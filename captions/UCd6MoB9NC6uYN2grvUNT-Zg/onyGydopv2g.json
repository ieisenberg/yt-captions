[
  {
    "text": "everyone can hear me now great where were we uh we were talking about the AWS",
    "start": "280",
    "end": "5879"
  },
  {
    "text": "booth and whiteboarding and uh trading ideas for how to build better Services",
    "start": "5879",
    "end": "11200"
  },
  {
    "text": "together and uh I was saying that that's been a a really great experience for me and even in putting together this",
    "start": "11200",
    "end": "17960"
  },
  {
    "text": "presentation I've had the opportunity to work with Jeff from mcbox who you'll get to meet later uh and it was the same",
    "start": "17960",
    "end": "24599"
  },
  {
    "text": "kind of thing it was uh as we were building this presentation I got to learn a lot about their use case how",
    "start": "24599",
    "end": "29720"
  },
  {
    "text": "they were leveraging AWS Services how they were using cloudfront to improve the the experience for their customers",
    "start": "29720",
    "end": "37120"
  },
  {
    "text": "and uh we even thought about ways that we could leverage some newer interesting AWS features and we were kind of",
    "start": "37120",
    "end": "43160"
  },
  {
    "text": "building products together uh so it's been quite a lot of fun and I wanted to start by saying thanks to all of you",
    "start": "43160",
    "end": "49079"
  },
  {
    "text": "guys for coming uh thanks",
    "start": "49079",
    "end": "52600"
  },
  {
    "text": "for e",
    "start": "58920",
    "end": "62960"
  },
  {
    "text": "cause a lot of rebuffering events then your customers aren't going to come back to you again and they're not going to be very happy with the experience you",
    "start": "94680",
    "end": "102040"
  },
  {
    "text": "provided so the question how do you know what kind of experience you're providing",
    "start": "102040",
    "end": "107759"
  },
  {
    "text": "for your customers and more importantly perhaps is how do you figure out what",
    "start": "107759",
    "end": "113240"
  },
  {
    "text": "kind of actions you can take to improve the experience of your customers and get more from your cdns",
    "start": "113240",
    "end": "120920"
  },
  {
    "text": "in order to answer those questions we first have to start by understanding uh your customer what's important to them where",
    "start": "120920",
    "end": "127920"
  },
  {
    "text": "are they coming from thereafter we can start defining some measurement methodologies and figure out what kind",
    "start": "127920",
    "end": "133720"
  },
  {
    "text": "of tests we can put out into the wild to understand what's happening with your viewer",
    "start": "133720",
    "end": "138760"
  },
  {
    "text": "experience and finally analyzing the data that we get back allows you to zero",
    "start": "138760",
    "end": "144160"
  },
  {
    "text": "in on root cause and understand which specific parts of your system may be contributing to a POS positive or",
    "start": "144160",
    "end": "150319"
  },
  {
    "text": "negative viewer experiences at the end of this presentation Jeff's for mapbox is going",
    "start": "150319",
    "end": "155599"
  },
  {
    "text": "to come up here and he's going to uh basically show you how all these Concepts can be put into action and he's",
    "start": "155599",
    "end": "161080"
  },
  {
    "text": "got a couple of real world cases and examples that mapbox use to improve their own customer experience with AWS",
    "start": "161080",
    "end": "166959"
  },
  {
    "text": "services and cloudfront as I said it before we can",
    "start": "166959",
    "end": "174480"
  },
  {
    "text": "before we know what to measure we have to understand what's important to our customers customers watching video apps",
    "start": "174480",
    "end": "182959"
  },
  {
    "text": "on mobile devices may have very different expectations than customers of",
    "start": "182959",
    "end": "188120"
  },
  {
    "text": "e-commerce websites that expect very P fast page loads and as you think through what's",
    "start": "188120",
    "end": "194440"
  },
  {
    "text": "really important to your customers uh you should be trying to identify two or",
    "start": "194440",
    "end": "201400"
  },
  {
    "text": "three key measurements that oh boy we're on the wrong slide",
    "start": "201400",
    "end": "208120"
  },
  {
    "text": "sorry guys two or three key measurements that truly",
    "start": "208120",
    "end": "213480"
  },
  {
    "text": "represent the customer experience I like to think of those two or three key measurements as customer Vital Signs",
    "start": "213480",
    "end": "220799"
  },
  {
    "text": "right these these are the things that indicate whether or not your service is healthy and your customers are getting a",
    "start": "220799",
    "end": "226080"
  },
  {
    "text": "great experience and I think about those metrics as something separate and distinct from all of the hundreds or",
    "start": "226080",
    "end": "233760"
  },
  {
    "text": "thousands of other bits of telemetry and data that you're collecting about your service I think of those more as",
    "start": "233760",
    "end": "239920"
  },
  {
    "text": "diagnostic measurements now diagnostic measurements are absolutely critical to operating your service ultimately",
    "start": "239920",
    "end": "246599"
  },
  {
    "text": "diagnostic me measurements are what you'll use to get to the root cause and understand why your viewers are seeing",
    "start": "246599",
    "end": "252959"
  },
  {
    "text": "the performance that they're seeing as an example of uh some customer",
    "start": "252959",
    "end": "260440"
  },
  {
    "text": "Vital Signs metrics or customer experience metrics I I've got two clear cases uh one is an availability",
    "start": "260440",
    "end": "266840"
  },
  {
    "text": "measurement now this applies equally to all all services and all customers all of your customers want to get to your",
    "start": "266840",
    "end": "274880"
  },
  {
    "text": "content and if they can't get to your content it doesn't really matter how fast or responsive your servers are",
    "start": "274880",
    "end": "281039"
  },
  {
    "text": "you're not able to deliver it to them so uh the first key vital signed metric",
    "start": "281039",
    "end": "286520"
  },
  {
    "text": "that all of our our our groups use is some sort of availability metric now one of the tricks with availability is it",
    "start": "286520",
    "end": "292919"
  },
  {
    "text": "can be difficult to measure an event that didn't happen uh but as it turns out customer requests tend to follow",
    "start": "292919",
    "end": "300080"
  },
  {
    "text": "pretty standard patterns this is an example of a customer distribution through cloudfront over the course of a",
    "start": "300080",
    "end": "305440"
  },
  {
    "text": "little more than 5 days and if you look at that graph you can see very distinct",
    "start": "305440",
    "end": "310600"
  },
  {
    "text": "a very distinct pattern during the weekdays there's actually two peaks that occur one at the lunchtime hour one at",
    "start": "310600",
    "end": "316320"
  },
  {
    "text": "the evening hour and then during weekday days we tend to see just one larger peak in the",
    "start": "316320",
    "end": "321680"
  },
  {
    "text": "evening if we're watching this graph closely as we should be if anything weird happens if that pattern changes in",
    "start": "321680",
    "end": "328120"
  },
  {
    "text": "some way that may indicate a problem with the service this this Vital sign metric is telling us that something may",
    "start": "328120",
    "end": "334160"
  },
  {
    "text": "be up there's a some set of customers that aren't able to get to our service on the on the Saturday day",
    "start": "334160",
    "end": "340440"
  },
  {
    "text": "here another example of a customer Vital sign metric would be download latency now in actual practice I",
    "start": "340440",
    "end": "348479"
  },
  {
    "text": "wouldn't choose this as a metric I think it's too generic I don't think it Maps close enough to what customers really",
    "start": "348479",
    "end": "353720"
  },
  {
    "text": "care about but it it serves our purpose and it covers all scenarios a better metric would be to say hey hey I uh my",
    "start": "353720",
    "end": "360560"
  },
  {
    "text": "customers are streaming video and I want to make sure that when they start playing a video they don't get any",
    "start": "360560",
    "end": "366000"
  },
  {
    "text": "interruptions at all and a really good customer experience metric would be to track the number of video interruptions",
    "start": "366000",
    "end": "373160"
  },
  {
    "text": "they're seeing and monitor that over time uh if you see any drop offs or spikes in in that measurement that could",
    "start": "373160",
    "end": "380880"
  },
  {
    "text": "be a clear indicator that something's going on with your service and you need to dig",
    "start": "380880",
    "end": "385800"
  },
  {
    "text": "in once you've established your two or three key customer measurement metrics",
    "start": "386000",
    "end": "391520"
  },
  {
    "text": "now you have to figure out how to collect that data from your customer and there's some complexity in that uh if we",
    "start": "391520",
    "end": "397599"
  },
  {
    "text": "break it down there really are are three highlevel ways that you can collect this",
    "start": "397599",
    "end": "403280"
  },
  {
    "text": "customer measurement data one is you can collect metrics and measurement from all of your servers uh this this could be",
    "start": "403280",
    "end": "410120"
  },
  {
    "text": "everything from uh server access logs to the Telemetry that's coming from the hardware",
    "start": "410120",
    "end": "415840"
  },
  {
    "text": "itself uh you can put external monitoring agents out on various parts",
    "start": "415840",
    "end": "421080"
  },
  {
    "text": "on the internet make requests back into your infrastructure and capture those measurements or you can use real user",
    "start": "421080",
    "end": "426879"
  },
  {
    "text": "measurements and grab Telemetry directly off of client devices and see exactly",
    "start": "426879",
    "end": "432360"
  },
  {
    "text": "what customers are seeing we can rate these three",
    "start": "432360",
    "end": "438639"
  },
  {
    "text": "methodologies along uh three dimensions one how accurately does this measurement methodology represent what your",
    "start": "438639",
    "end": "444919"
  },
  {
    "text": "customers are experiencing how easy is it to get these measurements tools set up and",
    "start": "444919",
    "end": "450720"
  },
  {
    "text": "configured and finally what kind of diagnostic data do these meth measurement methodologies yield when we",
    "start": "450720",
    "end": "457199"
  },
  {
    "text": "see a problem do we have enough data to actually know exactly what's going",
    "start": "457199",
    "end": "462599"
  },
  {
    "text": "wrong so as I mentioned serers side latency is really the server coming off of the service itself these are access",
    "start": "462840",
    "end": "469479"
  },
  {
    "text": "log CPU measurement um one thing that I call out that I",
    "start": "469479",
    "end": "475360"
  },
  {
    "text": "think is particularly useful that we pay a lot of attention to is first bite latency first spite latency is a a timer",
    "start": "475360",
    "end": "480919"
  },
  {
    "text": "that starts the minute we see a request and ends the moment we send that request out the door it lets us see how",
    "start": "480919",
    "end": "487039"
  },
  {
    "text": "performance our servers and everything behind our servers are are doing but it doesn't include any of the network",
    "start": "487039",
    "end": "492319"
  },
  {
    "text": "latency so it's a great way to get an isolated view of what's happening on the service however it doesn't do a great",
    "start": "492319",
    "end": "498840"
  },
  {
    "text": "job of showing you exactly what the customers are experiencing it tells you what the servers are experiencing that",
    "start": "498840",
    "end": "504479"
  },
  {
    "text": "can be a very different thing from what your viewers are seeing as it happens it's relatively",
    "start": "504479",
    "end": "509520"
  },
  {
    "text": "easy to get these set up I'm sure every one of you has service side monitoring and measurement infrastructure for the",
    "start": "509520",
    "end": "515200"
  },
  {
    "text": "services you're operating and it's absolutely critical this data is is super critical for actually getting to",
    "start": "515200",
    "end": "521159"
  },
  {
    "text": "root cause to any issues you may be facing so I give it an A on that",
    "start": "521159",
    "end": "526480"
  },
  {
    "text": "Dimension external monitoring involves uh putting robots on various parts",
    "start": "526480",
    "end": "532279"
  },
  {
    "text": "around the internet and making requests as if you were a user back into your web service infrastructure",
    "start": "532279",
    "end": "540160"
  },
  {
    "text": "this might be uh software that's provided to you that's actually custom software that can get very detailed",
    "start": "540160",
    "end": "545560"
  },
  {
    "text": "diagnostic information about each component of the request or it may be actual real user uh real browsers like",
    "start": "545560",
    "end": "553160"
  },
  {
    "text": "Internet Explorer Firefox with some automation wrapped around it oftentimes these Solutions are",
    "start": "553160",
    "end": "559120"
  },
  {
    "text": "running in anywhere from 30 to 140 different locations around the internet and the idea there is the the more",
    "start": "559120",
    "end": "566079"
  },
  {
    "text": "locations you can get the more likely you are to get a view from what your customers are",
    "start": "566079",
    "end": "571920"
  },
  {
    "text": "seeing however I want to drill in for a moment and talk about how effective external",
    "start": "571920",
    "end": "578160"
  },
  {
    "text": "measurement is in uh in actually representing what customers are seeing so customer the the performance that",
    "start": "578160",
    "end": "584360"
  },
  {
    "text": "customers see is actually driven largely by the overall usage of all other",
    "start": "584360",
    "end": "589920"
  },
  {
    "text": "customers and what I mean by that is most of the infrastructure you're using to serve content is leveraging some sort of some",
    "start": "589920",
    "end": "597279"
  },
  {
    "text": "flavor of caching that is often kept hotter or colder depending on what kind of usage those services are seeing and",
    "start": "597279",
    "end": "604279"
  },
  {
    "text": "just as a really oversimplified example we've got a web client that's making a request to a web content the very very",
    "start": "604279",
    "end": "610440"
  },
  {
    "text": "first request is going to make a DNS lookup and translate video. amazon.com into its",
    "start": "610440",
    "end": "617600"
  },
  {
    "text": "Network routable IP address uh it might seem silly to list this but actually a",
    "start": "617600",
    "end": "623360"
  },
  {
    "text": "cash Miss on DNS can be somewhat costly you can see uh it could be up to 100 milliseconds which isn't insignif",
    "start": "623360",
    "end": "630480"
  },
  {
    "text": "significant following our DNS request we make our TCP connection and eventually make our web request to our",
    "start": "630480",
    "end": "636160"
  },
  {
    "text": "infrastructure for our content if we're using a CDN and this is the first request that CDN has seen in all",
    "start": "636160",
    "end": "642639"
  },
  {
    "text": "likelihood that object won't be in cash it'll be a cash Miss we have to go all the way back to the origin to fetch that",
    "start": "642639",
    "end": "648200"
  },
  {
    "text": "content forward and that's going to incur some extra time penalty for that particular user however our second request the one",
    "start": "648200",
    "end": "655279"
  },
  {
    "text": "that follows on does its DNS look up it's very quick almost instant anous in some cases we make our request for the",
    "start": "655279",
    "end": "662320"
  },
  {
    "text": "content we get sent to our cloudfront Edge location and our cash is hot we're able to serve the request right from",
    "start": "662320",
    "end": "668320"
  },
  {
    "text": "there and save a bunch of time so performance depends on what",
    "start": "668320",
    "end": "673440"
  },
  {
    "text": "other users are doing we need hot Cashes in order to deliver the best performance in a lot of",
    "start": "673440",
    "end": "679120"
  },
  {
    "text": "cases uh performance also depends on location so in between our web client",
    "start": "679120",
    "end": "684720"
  },
  {
    "text": "and our content sits a lot of Internet network with varying degrees of latency and latency drives",
    "start": "684720",
    "end": "692399"
  },
  {
    "text": "performance so users on the west coast trying to access West Coast content are",
    "start": "692399",
    "end": "697920"
  },
  {
    "text": "going to get a much faster experience than users on the East Coast trying to access content on the west coast right",
    "start": "697920",
    "end": "705680"
  },
  {
    "text": "and in actuality these factors all conspire with one another to create the",
    "start": "705680",
    "end": "711839"
  },
  {
    "text": "end result that performance experience that your your customers are seeing and",
    "start": "711839",
    "end": "717240"
  },
  {
    "text": "it's it's difficult to simulate that with external monitoring right if you",
    "start": "717240",
    "end": "723360"
  },
  {
    "text": "think about it you need to have external monitors in all the networks that your customers are sitting in and they need",
    "start": "723360",
    "end": "729839"
  },
  {
    "text": "to make requests at intervals that mirror as closely as possible what your customers are actually",
    "start": "729839",
    "end": "737680"
  },
  {
    "text": "doing another thing to consider when looking at external monitoring agents is a really understanding where that",
    "start": "737680",
    "end": "744240"
  },
  {
    "text": "measurement's coming from and there's a something we call a backbone measurement",
    "start": "744240",
    "end": "749279"
  },
  {
    "text": "problem that that sometimes occurs with some external monitoring agents and that is these monitoring agents are running",
    "start": "749279",
    "end": "755000"
  },
  {
    "text": "in data centers in a lot of cases in some cases they may be running in the same data center or next tour to",
    "start": "755000",
    "end": "762279"
  },
  {
    "text": "data centers that are running your own service infrastructure and when that happens these external monitoring agents",
    "start": "762279",
    "end": "768040"
  },
  {
    "text": "can see really great performance the trouble is your customers aren't making",
    "start": "768040",
    "end": "774079"
  },
  {
    "text": "internet requests from data centers right they're connecting from their home which connects into an ISP",
    "start": "774079",
    "end": "780000"
  },
  {
    "text": "which eventually gets into the data center so the latencies you see from a backbone measurement are going to be quite a bit different from the",
    "start": "780000",
    "end": "785880"
  },
  {
    "text": "measurements you take from the viewer networks so for that reason external",
    "start": "785880",
    "end": "791040"
  },
  {
    "text": "monitoring is better than service side monitoring in terms of giving you a",
    "start": "791040",
    "end": "796240"
  },
  {
    "text": "sense for what the customer experience is still not perfect still pretty easy to set up",
    "start": "796240",
    "end": "802720"
  },
  {
    "text": "there's a lot of tools that make it easy to get up and running and have a test running on many nodes around the world uh and even aggregating that data for",
    "start": "802720",
    "end": "809120"
  },
  {
    "text": "for you and in a lot of cases it actually external monitors can do a good job of",
    "start": "809120",
    "end": "815000"
  },
  {
    "text": "providing you with some diagnostic data or even diagnostic tools that can break down measurement information for the",
    "start": "815000",
    "end": "821639"
  },
  {
    "text": "request so you can see your DNS response time versus the TCP connect time it can be helpful when you're trying to",
    "start": "821639",
    "end": "827199"
  },
  {
    "text": "diagnose or get to root cause on a specific customer impacting issue I'll finally real user monitoring",
    "start": "827199",
    "end": "835079"
  },
  {
    "text": "so real user monitoring works by instrumenting the the client itself the",
    "start": "835079",
    "end": "840759"
  },
  {
    "text": "thing that your customers are using to connect to your service if it's a website this this means instrumenting",
    "start": "840759",
    "end": "846040"
  },
  {
    "text": "the browser if it's a video player a lot of video players actually surface really rich Telemetry information about what's",
    "start": "846040",
    "end": "852839"
  },
  {
    "text": "going on all of that data gets posted back up to your server and aggregated for your",
    "start": "852839",
    "end": "860639"
  },
  {
    "text": "analysis we don't have to worry about making sure we're selecting ex uh",
    "start": "860639",
    "end": "865680"
  },
  {
    "text": "monitoring agents that map to where our users are because the data is coming",
    "start": "865680",
    "end": "870959"
  },
  {
    "text": "from our users and the usage characteristics are driven by real user",
    "start": "870959",
    "end": "876040"
  },
  {
    "text": "Behavior so we don't have to worry about trying to make sure the caches are are representative or we're trying to",
    "start": "876040",
    "end": "881240"
  },
  {
    "text": "simulate user request volumes it's it's all baked in uh initial versions of real user",
    "start": "881240",
    "end": "888680"
  },
  {
    "text": "measurement Works something like this this is an example I put together using jQuery uh in in all cases it's often for",
    "start": "888680",
    "end": "896240"
  },
  {
    "text": "web clients takes the form of some sort of client side JavaScript script this web Beacon is embedded in your web",
    "start": "896240",
    "end": "902959"
  },
  {
    "text": "page and uh you create a request on the clients on the in that JavaScript back",
    "start": "902959",
    "end": "909560"
  },
  {
    "text": "to your service infrastructure and that request is wrapped you take a start time before you",
    "start": "909560",
    "end": "915240"
  },
  {
    "text": "make the request and record an end time after you've finished the request now this is a pretty common method for doing",
    "start": "915240",
    "end": "921000"
  },
  {
    "text": "real user measurement or was some of the problems you have to be aware of you'll",
    "start": "921000",
    "end": "926199"
  },
  {
    "text": "note that we're we're wrapping the entire request we don't get a breakdown",
    "start": "926199",
    "end": "931279"
  },
  {
    "text": "and we there's no way to know if something is slow was it due to DNS was it due to a slow connect time was there",
    "start": "931279",
    "end": "938279"
  },
  {
    "text": "something else uh or even even different events in the browser competing for time",
    "start": "938279",
    "end": "945000"
  },
  {
    "text": "for the client side processing can have some effect on your measurement something you should be aware of uh",
    "start": "945000",
    "end": "951680"
  },
  {
    "text": "still in aggregate this is gives you very very good data very good insight",
    "start": "951680",
    "end": "957079"
  },
  {
    "text": "into what kind of experience your customers are seeing so for that I give uh the customer experience metric uh an",
    "start": "957079",
    "end": "964079"
  },
  {
    "text": "a ease of setup it tends to be more difficult I mean as you see we you have to find a way to instrument and put a",
    "start": "964079",
    "end": "969759"
  },
  {
    "text": "web beacon on your own website and have to find a way to get that data back to",
    "start": "969759",
    "end": "975319"
  },
  {
    "text": "your own server side now there are some tools out there that make the aggregation collection easier but you'll",
    "start": "975319",
    "end": "980959"
  },
  {
    "text": "still need to inject this client side measurement code into your web page one way or another same goes for web video",
    "start": "980959",
    "end": "987560"
  },
  {
    "text": "clients a lot of times uh they have good Telemetry but it needs to be hooked",
    "start": "987560",
    "end": "992720"
  },
  {
    "text": "together and somehow put back into some aggregation system in your own",
    "start": "992720",
    "end": "998399"
  },
  {
    "text": "network so almost all the the major modern",
    "start": "999600",
    "end": "1006440"
  },
  {
    "text": "browsers in the w3c have implemented a new technology called navigation timing",
    "start": "1006440",
    "end": "1011480"
  },
  {
    "text": "API and its sole purpose is to address some of the downsides that I discussed",
    "start": "1011480",
    "end": "1016519"
  },
  {
    "text": "in that web uh real user measurement one .0 system with navigation timing API you",
    "start": "1016519",
    "end": "1022800"
  },
  {
    "text": "get really accurate and detailed timing information for the web request so you",
    "start": "1022800",
    "end": "1027880"
  },
  {
    "text": "don't have to worry about other JavaScript processes interrupting in the middle of your timing event and",
    "start": "1027880",
    "end": "1033079"
  },
  {
    "text": "inflating your time uh and you can separate out your DNS response time from",
    "start": "1033079",
    "end": "1038400"
  },
  {
    "text": "your TCP connect time and your response so you get really rich diagnostic",
    "start": "1038400",
    "end": "1044360"
  },
  {
    "text": "information so real user measurement with navigation timing apis still has an",
    "start": "1045640",
    "end": "1051679"
  },
  {
    "text": "A on customer experience but now we get a lot of really rich diagnostic information to pair with that so we can",
    "start": "1051679",
    "end": "1057280"
  },
  {
    "text": "get uh right down to brass taxs and understand what's going on with our",
    "start": "1057280",
    "end": "1063000"
  },
  {
    "text": "service so in summation when it comes to selecting a measurement methodology if",
    "start": "1063039",
    "end": "1068360"
  },
  {
    "text": "at all possible I would highly recommend you get your customer experience metrics from a real user measurement system it's",
    "start": "1068360",
    "end": "1073960"
  },
  {
    "text": "not to say that uh external monitoring doesn't have its place I think that can also be pretty valid but uh if you have",
    "start": "1073960",
    "end": "1080679"
  },
  {
    "text": "the the choice look for real user monitoring now that we've got a",
    "start": "1080679",
    "end": "1087240"
  },
  {
    "text": "measurement methodology let's take a deeper look at the test itself so I I think this stuff is actually really cool",
    "start": "1087240",
    "end": "1093720"
  },
  {
    "text": "it's amazing how uh detailed of information and how much diagnostic information you can Surface in your real",
    "start": "1093720",
    "end": "1100840"
  },
  {
    "text": "user testing just by changing things like the object size that you're requesting or uh by using various",
    "start": "1100840",
    "end": "1108360"
  },
  {
    "text": "different cache busting or connection busting techniques to really isolate exactly what's going on in your client's",
    "start": "1108360",
    "end": "1114840"
  },
  {
    "text": "browsers as an example um it's possible to evaluate how well your CDN is is how",
    "start": "1114840",
    "end": "1123000"
  },
  {
    "text": "good a job your CDN is doing and selecting an edge location for you if you're using a CDN you know lower",
    "start": "1123000",
    "end": "1128760"
  },
  {
    "text": "latency is better so the closer we can get the content the user the better we're doing and if we look at the",
    "start": "1128760",
    "end": "1135000"
  },
  {
    "text": "connect time between the client and the edge location we can evaluate how well",
    "start": "1135000",
    "end": "1140039"
  },
  {
    "text": "that CDN is doing if we're seeing a 10 millisecond response time or connect",
    "start": "1140039",
    "end": "1145720"
  },
  {
    "text": "time we know that the CDN is actually doing a pretty good job of routing that user to an edge location and that edge",
    "start": "1145720",
    "end": "1152640"
  },
  {
    "text": "location is pretty closely located if we're seeing 100 millisecond or higher times that may indicate that the CDN",
    "start": "1152640",
    "end": "1160320"
  },
  {
    "text": "provider is not the selection algorithm or the routing algorithm for that specific user may not be working ideally",
    "start": "1160320",
    "end": "1167120"
  },
  {
    "text": "or perhaps that CDM provider doesn't actually have an edge location that's closely located to that customer right",
    "start": "1167120",
    "end": "1173440"
  },
  {
    "text": "that all that information can be inferred from just connect time you can also get a sense for uh the performance",
    "start": "1173440",
    "end": "1179520"
  },
  {
    "text": "of those cache servers by looking at the first bite latency of hits from the client perspective so you know from the",
    "start": "1179520",
    "end": "1185480"
  },
  {
    "text": "time I've issued a request to the time I see the first part of the response that's a comp that's Network latency",
    "start": "1185480",
    "end": "1191080"
  },
  {
    "text": "plus some of that server side time using larger objects and looking at",
    "start": "1191080",
    "end": "1196480"
  },
  {
    "text": "last bite latency measuring the total time takes to download a file you can get a sense for the quality of the",
    "start": "1196480",
    "end": "1201559"
  },
  {
    "text": "network between the client and the edge location if a user is experiencing Network congestion and packet loss",
    "start": "1201559",
    "end": "1208200"
  },
  {
    "text": "that's going to extend out the time it takes to download an OP object and uh lbl can can indicate give that indicator",
    "start": "1208200",
    "end": "1215280"
  },
  {
    "text": "for you and finally you might also be interested in just understanding how far away your users are from your own origin",
    "start": "1215280",
    "end": "1223520"
  },
  {
    "text": "and by forcing a Miss on your CDN server and going all the way back to the origin and taking measurement there you can get",
    "start": "1223520",
    "end": "1230039"
  },
  {
    "text": "a sense for where where all your users are coming from and you may even choose to move your origin location somewhat",
    "start": "1230039",
    "end": "1236360"
  },
  {
    "text": "closer to uh the rest of your customers and that would optimize the the cash Miss right so that even in a cash Miss",
    "start": "1236360",
    "end": "1242720"
  },
  {
    "text": "it's not quite as impacting taking a little deeper look on",
    "start": "1242720",
    "end": "1248720"
  },
  {
    "text": "that object size so as I mentioned if we look at a 1K object compared to 100K",
    "start": "1248720",
    "end": "1254679"
  },
  {
    "text": "object a 1K object when we make a request we might see zero or one round trips for a DNS lookup we'll see one",
    "start": "1254679",
    "end": "1262600"
  },
  {
    "text": "round trip between the client and the edge location to establish a TCP connection and then just one round trip",
    "start": "1262600",
    "end": "1269080"
  },
  {
    "text": "to make an object request and get that data back if we use a larger object we",
    "start": "1269080",
    "end": "1274600"
  },
  {
    "text": "increase the number of round trips between the client and the edge location to download the object now what that",
    "start": "1274600",
    "end": "1280600"
  },
  {
    "text": "does is it gives you more of an opportunity to uh I guess be exposed to packet loss uh and getting that",
    "start": "1280600",
    "end": "1287039"
  },
  {
    "text": "measurement can help you zero in on potential Network congestion from certain viewer",
    "start": "1287039",
    "end": "1292639"
  },
  {
    "text": "networks as I mentioned with cash busting techniques we can isolate specific components of the system and",
    "start": "1295080",
    "end": "1300480"
  },
  {
    "text": "test all sorts of parts of of things that might be going on in our infrastructure so looking at various",
    "start": "1300480",
    "end": "1306200"
  },
  {
    "text": "components a DNS lookup is if we're talking about DNS lookups with CDN in",
    "start": "1306200",
    "end": "1311799"
  },
  {
    "text": "particular uh there's some some trickiness there and if you're interested in talking more about it you can come and ask me questions but for",
    "start": "1311799",
    "end": "1317720"
  },
  {
    "text": "now uh I just say let DNS look up be as it is and and focus on some of the other",
    "start": "1317720",
    "end": "1323760"
  },
  {
    "text": "areas for TCP connections as I said this TCP connect is what will give us the",
    "start": "1323760",
    "end": "1328840"
  },
  {
    "text": "best indicator of the latency distance between the client and the edge location by uh and web browsers want to",
    "start": "1328840",
    "end": "1339279"
  },
  {
    "text": "reuse as many connections as possible in fact some web browsers I've observed on the first connection they'll go ahead",
    "start": "1339279",
    "end": "1344919"
  },
  {
    "text": "and create four connections to whatever servers there and then it's going to going to try to reuse those connections for subsequent uh object requests it's",
    "start": "1344919",
    "end": "1352679"
  },
  {
    "text": "great for browser for real user experience but if we want to measure how far away our our actual viewer is from",
    "start": "1352679",
    "end": "1357840"
  },
  {
    "text": "The Edge location we've got to stop that the way you do that is is forcing the browser to create a new connection and",
    "start": "1357840",
    "end": "1363360"
  },
  {
    "text": "you simply do that by making a request to a different domain name than has already been used in previous requests",
    "start": "1363360",
    "end": "1370039"
  },
  {
    "text": "does that make sense yeah so in the example there we would just use a test domain solely for uh making those",
    "start": "1370039",
    "end": "1376520"
  },
  {
    "text": "measurements and ensure we're not loading up any other images or objects on our web page with that",
    "start": "1376520",
    "end": "1383200"
  },
  {
    "text": "domain if we wanted to uh eliminate or estab take a measurement after the",
    "start": "1383200",
    "end": "1388799"
  },
  {
    "text": "connection had already been established we can actually Prime that connection uh just by doing the opposite right we use",
    "start": "1388799",
    "end": "1394559"
  },
  {
    "text": "the same domain name and just make two subsequent requests we make one request to establish the connection and throw",
    "start": "1394559",
    "end": "1400000"
  },
  {
    "text": "away the measurement result and take the measurement result on the second request that would give you a measurement after",
    "start": "1400000",
    "end": "1405919"
  },
  {
    "text": "the connection had been established when it comes to evaluating the",
    "start": "1405919",
    "end": "1411120"
  },
  {
    "text": "performance of your Edge cache it might in order to kind of have some good scientific data you might want",
    "start": "1411120",
    "end": "1417000"
  },
  {
    "text": "to ensure and guarantee that you're getting a hit from that client to whatever Edge location that's going to",
    "start": "1417000",
    "end": "1422919"
  },
  {
    "text": "that's easy enough to do you just make two concurrent requests for the same object that first call should in all",
    "start": "1422919",
    "end": "1429320"
  },
  {
    "text": "cases load that up in the edge location the second call will result in a hit on your Edge location side",
    "start": "1429320",
    "end": "1438120"
  },
  {
    "text": "uh something you should also consider if what we're really after is understanding exactly what kind of performance our",
    "start": "1439640",
    "end": "1445320"
  },
  {
    "text": "customers are seeing you might choose to do nothing at all just request the object the same object that your real",
    "start": "1445320",
    "end": "1451400"
  },
  {
    "text": "users are requesting and with that data you know how hot or cold the cach is",
    "start": "1451400",
    "end": "1457400"
  },
  {
    "text": "based on the real world usage that your customers are driving",
    "start": "1457400",
    "end": "1462640"
  },
  {
    "text": "right or you might choose to bust the cach on the CDN and you would do that if you want to get that measurement from",
    "start": "1462640",
    "end": "1469200"
  },
  {
    "text": "your client location all the way back to the origin and then when it comes to client cach don't forget it I don't think",
    "start": "1469200",
    "end": "1475840"
  },
  {
    "text": "there's really any scenario where you would care to know the performance between the JavaScript in your local and",
    "start": "1475840",
    "end": "1482600"
  },
  {
    "text": "in the customer's browser cache so just don't forget to bust through it and the most common way to do that is uh by",
    "start": "1482600",
    "end": "1489640"
  },
  {
    "text": "pinning a query string unique for each request all right so if we put it all",
    "start": "1489640",
    "end": "1495320"
  },
  {
    "text": "together my recommendation is don't Prime The Edge cach try to get a a view",
    "start": "1495320",
    "end": "1501320"
  },
  {
    "text": "of what your viewers are actually seeing so get your cash hits and your cash misses uh more of a in more of a natural",
    "start": "1501320",
    "end": "1508480"
  },
  {
    "text": "way do remember to use a fresh TCP connection so make sure you're using a unique domain name for your test",
    "start": "1508480",
    "end": "1515480"
  },
  {
    "text": "requests use 100K object to get a a good sample of that lbl so you can see the",
    "start": "1515480",
    "end": "1523120"
  },
  {
    "text": "quality of the network between your client and that edge location don't forget to bust the client C we don't care about the performance on",
    "start": "1523120",
    "end": "1530080"
  },
  {
    "text": "the local machine we want to see the network performance and absolutely use uh the",
    "start": "1530080",
    "end": "1536919"
  },
  {
    "text": "Diagnostics navigation timing API wherever possible especially in this mode U that's going to give you really",
    "start": "1536919",
    "end": "1542720"
  },
  {
    "text": "detailed breakdown information on your DNS versus your TCP uh versus your first bite latency and your last bite",
    "start": "1542720",
    "end": "1549080"
  },
  {
    "text": "latency and finally this one if you're going to use real user measurement and working with the CDN please use a",
    "start": "1549080",
    "end": "1554880"
  },
  {
    "text": "request ID if you send this request ID through cloudfront record it in our logs and if you ever come to us and say I've",
    "start": "1554880",
    "end": "1561200"
  },
  {
    "text": "got a question about this I'm seeing some odd behavior odd performance this we can use this request ID and grp",
    "start": "1561200",
    "end": "1567399"
  },
  {
    "text": "through our logs and find out exactly what was happening on the server side and marry that up with all of the other Rich server side Telemetry data that we",
    "start": "1567399",
    "end": "1573440"
  },
  {
    "text": "collect so please do that all right now we've got our",
    "start": "1573440",
    "end": "1579840"
  },
  {
    "text": "measurement collection methodology we've D designed some uh good tests we're getting gobs and gobs and gobs of data",
    "start": "1579840",
    "end": "1585960"
  },
  {
    "text": "back well if we just aggregate that together and look at it it might not tell us much uh analysis is all about",
    "start": "1585960",
    "end": "1592440"
  },
  {
    "text": "splitting up that data uh building good graphs and giving a lot of",
    "start": "1592440",
    "end": "1600080"
  },
  {
    "text": "visibility into any issue that may be going on so really really good analysis or good graphs will make it very obvious",
    "start": "1600200",
    "end": "1607840"
  },
  {
    "text": "when something is is going a Miss with your viewer experience and it should also give you",
    "start": "1607840",
    "end": "1613840"
  },
  {
    "text": "the data the diagnostic data to zero in very quickly on exactly what's driving",
    "start": "1613840",
    "end": "1619320"
  },
  {
    "text": "that particular issue I've got a few examples I'll walk through that are just based on things",
    "start": "1619320",
    "end": "1625440"
  },
  {
    "text": "that I know that are customers are doing and things that we do within cloudfront ourselves this isn't the definitive list",
    "start": "1625440",
    "end": "1630559"
  },
  {
    "text": "think of this more as a as a way to start your own thinking about uh how you",
    "start": "1630559",
    "end": "1635640"
  },
  {
    "text": "might segment your metrics this is going to be very specific to your service and specific to your",
    "start": "1635640",
    "end": "1640799"
  },
  {
    "text": "customers but just so we know what we're talking about here's a really quick example Geographic segmentation is",
    "start": "1640799",
    "end": "1646880"
  },
  {
    "text": "something we do almost all the time uh this is some cloudfront requests",
    "start": "1646880",
    "end": "1653880"
  },
  {
    "text": "like number of requests for a particular customers cloudfront distribution it's a global all up view from all the edge",
    "start": "1653880",
    "end": "1661120"
  },
  {
    "text": "locations that's what it looks like if we break that down very simply just at a",
    "start": "1661120",
    "end": "1666159"
  },
  {
    "text": "very high level across three different regions you can see very different patterns emerge right we start to see",
    "start": "1666159",
    "end": "1673919"
  },
  {
    "text": "the Peaks and the troughs and look over there in Asia there's actually a step",
    "start": "1673919",
    "end": "1679559"
  },
  {
    "text": "down in usage from Asia a big step right that's that wasn't even visible in the",
    "start": "1679559",
    "end": "1684919"
  },
  {
    "text": "global view now this this stuff when whenever we see a signal like that uh often times",
    "start": "1684919",
    "end": "1692279"
  },
  {
    "text": "it may be mapped to a big internet event uh something that may not be in our control for example uh when the",
    "start": "1692279",
    "end": "1698799"
  },
  {
    "text": "earthquake hit and severed some transpacific links uh there were big",
    "start": "1698799",
    "end": "1704159"
  },
  {
    "text": "sections of the internet that just couldn't get online anymore and we saw some drop off in usage so this kind of",
    "start": "1704159",
    "end": "1709760"
  },
  {
    "text": "graph can help us quickly identify whether or not we're dealing with one of those events or if there's something wrong with our system that we need to",
    "start": "1709760",
    "end": "1715840"
  },
  {
    "text": "drill into client device segmentation is also particularly useful uh especially if you",
    "start": "1715840",
    "end": "1723080"
  },
  {
    "text": "have customers that are using mobile devices and laptops that's a great way to look at your data um Also earlier",
    "start": "1723080",
    "end": "1730760"
  },
  {
    "text": "this year we had a customer that created a a customer support ticket for us they were they notified us of some poor",
    "start": "1730760",
    "end": "1737039"
  },
  {
    "text": "performance that they were EXP experiencing we dug into the issue and found out that that they had a higher",
    "start": "1737039",
    "end": "1742440"
  },
  {
    "text": "than normal amount of cash misses and actually for no good reason they had plenty of volume the caches should have been hot so we took another look at the",
    "start": "1742440",
    "end": "1749919"
  },
  {
    "text": "data and segmented It Out by client device and we found that there was one particular client that was the driver",
    "start": "1749919",
    "end": "1754960"
  },
  {
    "text": "for almost all of those cash misses and it turned out there was one new set toop",
    "start": "1754960",
    "end": "1760360"
  },
  {
    "text": "box that was just getting released out there and it had some funky behavior when making HTTP requests and the result",
    "start": "1760360",
    "end": "1766240"
  },
  {
    "text": "was it it it ended up uh result in a cash Miss so because we got to root",
    "start": "1766240",
    "end": "1771279"
  },
  {
    "text": "cause on that we were able to develop a workaround and deploy to production and resolve that issue for our",
    "start": "1771279",
    "end": "1777399"
  },
  {
    "text": "customers for those of you that are using a multi CDN solution I would encourage you to look at your",
    "start": "1777399",
    "end": "1782559"
  },
  {
    "text": "performance data by CDN so you know uh how each of them are performing for your own users right and",
    "start": "1782559",
    "end": "1790440"
  },
  {
    "text": "this is an example that comes uh straight from Amazon retail site this is actually real data they're using three",
    "start": "1790440",
    "end": "1796240"
  },
  {
    "text": "cdns today and um you can see cloudfront at the bottom there doing very well yeah",
    "start": "1796240",
    "end": "1802840"
  },
  {
    "text": "uh if anything changes in this uh it's it's a way you'll know who you need to escalate to if any one of these cdns",
    "start": "1802840",
    "end": "1809279"
  },
  {
    "text": "suddenly became less performant you can create a support ticket and say hey I'm using three cdns two of them are working",
    "start": "1809279",
    "end": "1814760"
  },
  {
    "text": "just fine you're not what's going on uh it also gives you the opportunity to say I'm going to shift more of my traffic",
    "start": "1814760",
    "end": "1820880"
  },
  {
    "text": "over to those cdns that are performing best for my",
    "start": "1820880",
    "end": "1825120"
  },
  {
    "text": "customers uh another segmentation scheme that's particularly important when we're dealing with Global Network apps is",
    "start": "1826760",
    "end": "1833919"
  },
  {
    "text": "looking at your data by viewer Network one of the common drivers of poor performance actually ends up being the",
    "start": "1833919",
    "end": "1841640"
  },
  {
    "text": "client networks themselves the internet service providers so on on any uh internet",
    "start": "1841640",
    "end": "1847679"
  },
  {
    "text": "service providers are managing their own network capacity just like any of of us",
    "start": "1847679",
    "end": "1853080"
  },
  {
    "text": "are measuring our own network service capacity and at times it can become overloaded and when that happens U",
    "start": "1853080",
    "end": "1860360"
  },
  {
    "text": "packet loss starts occurring and specific customers on these specific internet service provider networks",
    "start": "1860360",
    "end": "1866200"
  },
  {
    "text": "experience longer download times as a result of that packet loss so viewer Network segmentation allows you to zero",
    "start": "1866200",
    "end": "1871760"
  },
  {
    "text": "in on that and and determine whether or not a network congestion is causing poor",
    "start": "1871760",
    "end": "1877360"
  },
  {
    "text": "viewer experience the problem is that as of today there are more than 42,000",
    "start": "1877360",
    "end": "1883480"
  },
  {
    "text": "different client networks on the internet and uh 42,000 lines on a graph",
    "start": "1883480",
    "end": "1888880"
  },
  {
    "text": "is more than I could ever make sense of and you can't really see any patterns uh in cases like that my team",
    "start": "1888880",
    "end": "1896760"
  },
  {
    "text": "likes to use top talker lists or worst Defender lists is what we often call it so we'll take that same metric along",
    "start": "1896760",
    "end": "1902919"
  },
  {
    "text": "those Dimensions so uh in this case we're tracking all 42,000 client",
    "start": "1902919",
    "end": "1908039"
  },
  {
    "text": "networks but instead of trying to plot all those lines we just sort them by the",
    "start": "1908039",
    "end": "1913360"
  },
  {
    "text": "worst performing the slowest load time and we might have top 10 or top 20 and",
    "start": "1913360",
    "end": "1919200"
  },
  {
    "text": "at that point that is something that we can graph and Trend so we can keep an eye on that top those top 20 worst",
    "start": "1919200",
    "end": "1925120"
  },
  {
    "text": "offenders and if anything changes we can see that pattern in fact we might see",
    "start": "1925120",
    "end": "1930159"
  },
  {
    "text": "that at a certain time of day between one and two this particular network is having a problem that's a real key",
    "start": "1930159",
    "end": "1935799"
  },
  {
    "text": "indicator that they're having some congestion issues at peak times we have another customer PBS who",
    "start": "1935799",
    "end": "1944000"
  },
  {
    "text": "streams video through cloudfront they take cloudfront access logs and process them and aggregate by an object level so",
    "start": "1944000",
    "end": "1950880"
  },
  {
    "text": "they're looking at their video performance uh and specifically when they do this list they've been been able",
    "start": "1950880",
    "end": "1957039"
  },
  {
    "text": "to identify times when uh a particular file wasn't encoded correctly and uh this this this",
    "start": "1957039",
    "end": "1964279"
  },
  {
    "text": "technique allowed them to get to root cause identify the files that were misbehaving retcode them and upload them",
    "start": "1964279",
    "end": "1969720"
  },
  {
    "text": "back up into the system so that's a the highle conceptual",
    "start": "1969720",
    "end": "1976799"
  },
  {
    "text": "stuff uh in in summation your viewer the experience you your viewers see on your",
    "start": "1976799",
    "end": "1981880"
  },
  {
    "text": "infrastructure is very unique to your service it's Unique to your customers and the best way that I know how to",
    "start": "1981880",
    "end": "1988480"
  },
  {
    "text": "understand what's going on is to instrument your your service and your clients with real user measurement and",
    "start": "1988480",
    "end": "1994240"
  },
  {
    "text": "when you get that data back coming up with great segmentation techniques allow you to detect problems in your viewer",
    "start": "1994240",
    "end": "2001080"
  },
  {
    "text": "experience and diagnostic information allows you to get to root CS quickly and ultimately uh build a better experience",
    "start": "2001080",
    "end": "2007159"
  },
  {
    "text": "for your viewers all right with that I'm going to bring Jeff up here and he's going to take you",
    "start": "2007159",
    "end": "2014799"
  },
  {
    "text": "through mapbx and how they applied these techniques to improving their viewer",
    "start": "2014799",
    "end": "2022720"
  },
  {
    "text": "experience thanks Nate and uh I'm really happy to to be here and",
    "start": "2023320",
    "end": "2028919"
  },
  {
    "text": "I'm glad that AWS has invited me to talk one of the cool things about this conference uh so far for me has been the",
    "start": "2028919",
    "end": "2035039"
  },
  {
    "text": "ability to talk with people like Nate and his colleagues and get their perspective Ive on like how we use and abuse abuse their service but also talk",
    "start": "2035039",
    "end": "2041519"
  },
  {
    "text": "to other folks like me work at companies um that use AWS about um you know are we",
    "start": "2041519",
    "end": "2047880"
  },
  {
    "text": "alone and how we use AWS right like do other people do what we do so um I hope by like sharing what my company does um",
    "start": "2047880",
    "end": "2056398"
  },
  {
    "text": "you know give you a little perspective on how how we're using it and sort of uh maybe validate what you've experience or",
    "start": "2056399",
    "end": "2062200"
  },
  {
    "text": "give you different ideas so my name is Jeff micholas I work at a company called mapbox we're a small small uh bootstrap",
    "start": "2062200",
    "end": "2069240"
  },
  {
    "text": "sort of startup we've been around for a couple years out of Washington DC and um we help people make maps online",
    "start": "2069240",
    "end": "2076800"
  },
  {
    "text": "so we have a service called mapbox right and it lets you design maps in the cloud and publish them we're basically a",
    "start": "2076800",
    "end": "2082839"
  },
  {
    "text": "publishing platform for maps so if you have a website and I know a lot of you do you'd be interested in maps I could",
    "start": "2082839",
    "end": "2089000"
  },
  {
    "text": "talk to you all day about like our service how it works um and try and talk you into it what I'd like to really talk",
    "start": "2089000",
    "end": "2095440"
  },
  {
    "text": "about today is sort of give you an overview of mapbox so that you know you",
    "start": "2095440",
    "end": "2100560"
  },
  {
    "text": "know sort of what we do and get an idea of um of the of our sort of platform in a",
    "start": "2100560",
    "end": "2106480"
  },
  {
    "text": "way to understand maybe how it relates to you but I won't go much more into it than that so right mapbox is platform uh",
    "start": "2106480",
    "end": "2113880"
  },
  {
    "text": "like I said we have a platform hosted on a AWS and we do a whole bunch of things that let you publish Maps we have sort",
    "start": "2113880",
    "end": "2119760"
  },
  {
    "text": "of a a bunch of tools so we let you take maps of the world like street level data uh color it so it matches your pette",
    "start": "2119760",
    "end": "2126040"
  },
  {
    "text": "make sort of subtle changes to it so really works for your application we have terrain data we have um retina",
    "start": "2126040",
    "end": "2132760"
  },
  {
    "text": "labels so like if people are looking at on iPads and stuff it's like the correct size labels um we let you upload your",
    "start": "2132760",
    "end": "2139640"
  },
  {
    "text": "own data to our hosting environment and con and combine that with various layers in a dynamic way overlay that on top of",
    "start": "2139640",
    "end": "2146359"
  },
  {
    "text": "Street data um and we also have like a markers API so that if you want to put",
    "start": "2146359",
    "end": "2152079"
  },
  {
    "text": "dots you know do the Red Dot Fever thing on your own maps you can go ahead and do that in our stack and then we provide two API",
    "start": "2152079",
    "end": "2158599"
  },
  {
    "text": "or I'm sorry we provide an HTTP interface but also two sort of sdks one just for General web use and one for",
    "start": "2158599",
    "end": "2165920"
  },
  {
    "text": "iOS so this is basically the data we're talking about working with as mapbox",
    "start": "2165920",
    "end": "2172240"
  },
  {
    "text": "this is a a basic view of our sort of world map uh our data is based on open street",
    "start": "2172240",
    "end": "2179079"
  },
  {
    "text": "map so basically what we do is we take open street map um which I'm sure most of you have heard of it's sort of",
    "start": "2179079",
    "end": "2184920"
  },
  {
    "text": "referred to as the Wikipedia of maps it's a crowd source project where anybody can come in and help contribute",
    "start": "2184920",
    "end": "2190640"
  },
  {
    "text": "to a world map it's an absolutely great project the maps they sometimes produces",
    "start": "2190640",
    "end": "2195880"
  },
  {
    "text": "a project themselves aren't that greatl looking and so one of the value ads we add is making them really greatl looking",
    "start": "2195880",
    "end": "2202000"
  },
  {
    "text": "so a whole map of the world looks something like this open Street M has really great",
    "start": "2202000",
    "end": "2208520"
  },
  {
    "text": "street level data around the world competitive with uh commercial providers in some cases a little better some cases",
    "start": "2208520",
    "end": "2214000"
  },
  {
    "text": "a little worse but absolutely competitive with them so you can do great you know images of places like",
    "start": "2214000",
    "end": "2219599"
  },
  {
    "text": "Amsterdam like this and like I said this is like Global coverage so the other",
    "start": "2219599",
    "end": "2225400"
  },
  {
    "text": "part of what Mbox does is that we have an open source um desktop Suite called",
    "start": "2225400",
    "end": "2231040"
  },
  {
    "text": "tile Mill I'm only mentioning this so you guys have an understanding of how everything works together this is something you can download it's free",
    "start": "2231040",
    "end": "2237280"
  },
  {
    "text": "it's on GitHub and all that and it lets you author really great looking maps on your desktop and it's actually what we",
    "start": "2237280",
    "end": "2242560"
  },
  {
    "text": "use to make all of our Maps um so people can download this application plug it",
    "start": "2242560",
    "end": "2247880"
  },
  {
    "text": "into their U ezri database or post grafts or just a CSV file it makes it really easy to take custom data that",
    "start": "2247880",
    "end": "2254359"
  },
  {
    "text": "they've got create something that looks nice in this case just some bubbles they're going to overlay on a map later on and in a single push of a button push",
    "start": "2254359",
    "end": "2261000"
  },
  {
    "text": "that up to our our application on AWS so at the end of the day they'll",
    "start": "2261000",
    "end": "2267240"
  },
  {
    "text": "push it up they can uh this say could be the background they're going to Overlay those dots on they can make the background look nice make it grayed out",
    "start": "2267240",
    "end": "2273760"
  },
  {
    "text": "like this combine it with their stuff do what whatever they need to do for their application okay so a few more pictures",
    "start": "2273760",
    "end": "2281359"
  },
  {
    "text": "of maps and then we'll move on so this is the kind of data we have for places like Hawaii right nice looking",
    "start": "2281359",
    "end": "2287200"
  },
  {
    "text": "maps that we're really proud of um for people that like enjoy looking at Maps we have like slide decks of this stuff",
    "start": "2287200",
    "end": "2293800"
  },
  {
    "text": "um so right really great terrain data um you can do nice things like desaturate your Maps uh localize labels all that",
    "start": "2293800",
    "end": "2301480"
  },
  {
    "text": "kind of nice stuff you know make these sort of like classic like Tiana at night it's very dangerous um kinds of maps of",
    "start": "2301480",
    "end": "2308760"
  },
  {
    "text": "the world right so but for our use case right and for what we're interested in today it's really a matter of um when",
    "start": "2308760",
    "end": "2316400"
  },
  {
    "text": "I'm making decisions about a CDN and how I need my system to perform because I'm expected to be competitive with people",
    "start": "2316400",
    "end": "2322240"
  },
  {
    "text": "like Bing with people like uh Google like what what is this we're talking about so",
    "start": "2322240",
    "end": "2329800"
  },
  {
    "text": "the way all these sort of online slippy Maps work is basically like this right and you guys probably all know this there's individual image tiles 256 by 56",
    "start": "2329800",
    "end": "2338040"
  },
  {
    "text": "pixels either pgs or jpegs and there's a little bit of JavaScript in your application or a",
    "start": "2338040",
    "end": "2344079"
  },
  {
    "text": "little bit of U Objective C on your on your iPhone or whatever that stitches these guys all together right so the",
    "start": "2344079",
    "end": "2350480"
  },
  {
    "text": "fundamental uh interface that we have with our clients is basically is",
    "start": "2350480",
    "end": "2355760"
  },
  {
    "text": "basically these right and this is sort of the main interface I have with my clients it's an image they're going to",
    "start": "2355760",
    "end": "2362079"
  },
  {
    "text": "get looks like that those are a few of the headers on a on a nice cash from Cloud Hunt cloudfront",
    "start": "2362079",
    "end": "2368200"
  },
  {
    "text": "this is like the interface we have so there's really one interesting thing to point out here maybe two but those are",
    "start": "2368200",
    "end": "2374599"
  },
  {
    "text": "some of the cach headers we use and I'll talk a little bit more about those later but in particular things like um last",
    "start": "2374599",
    "end": "2380560"
  },
  {
    "text": "modified times and E tags so uh mapbox you know like",
    "start": "2380560",
    "end": "2387200"
  },
  {
    "text": "everybody wants to hit scale like we operate at scale we like to say right so for us I want to talk a little bit about",
    "start": "2387200",
    "end": "2392720"
  },
  {
    "text": "what that means to give you a sense of what kind of problems we run into and sort of the dimensions of scale that",
    "start": "2392720",
    "end": "2399359"
  },
  {
    "text": "we we're concerned about so a popular map on our service will do 50 million tiles a day 50 million HTTP requests for",
    "start": "2399359",
    "end": "2407000"
  },
  {
    "text": "those 256x 256 uh images so that's going to be around 580 maybe a little more a",
    "start": "2407000",
    "end": "2415400"
  },
  {
    "text": "little less request a second right now peak of the day it's going to be maybe almost twice that middle of the night maybe a lot less than that so we need to",
    "start": "2415400",
    "end": "2422119"
  },
  {
    "text": "have that sort of range of being able to deal with that and right we don't have just like one or two of these guys we have like thousands of maps you know not",
    "start": "2422119",
    "end": "2429680"
  },
  {
    "text": "nearly all of them are say really popular but we have thousands of them and need to be able to be able to deal",
    "start": "2429680",
    "end": "2435240"
  },
  {
    "text": "with uh this kind of volume from a lot of places so this is actually a pretty",
    "start": "2435240",
    "end": "2440280"
  },
  {
    "text": "terrible graph but I think it illustrates my point on the kind of problems that we uh we're we're dealing",
    "start": "2440280",
    "end": "2445680"
  },
  {
    "text": "with with our service so the scale on the bottom is the number of maps per an account on the left hand side is um the",
    "start": "2445680",
    "end": "2453480"
  },
  {
    "text": "num the uh number of requests being done um the actual values don't really matter",
    "start": "2453480",
    "end": "2459280"
  },
  {
    "text": "that much it's a it's you know a normal linear scale here and the the guys are stacked up so you can see that like",
    "start": "2459280",
    "end": "2466640"
  },
  {
    "text": "people who have one or two or three Maps I guess two or three Maps do a lot of traffic right these are people like",
    "start": "2466640",
    "end": "2471800"
  },
  {
    "text": "maybe four square who they have like a normal map a retina map and maybe like a mobile map and they're doing a lot of",
    "start": "2471800",
    "end": "2478560"
  },
  {
    "text": "traffic on these very focused Maps they're sort of a traditional use case and then way the heck out near like 70",
    "start": "2478560",
    "end": "2485440"
  },
  {
    "text": "or 80 Maps there's people that have a lot of maps a lot of data and while that doesn't look like much compared to the",
    "start": "2485440",
    "end": "2491119"
  },
  {
    "text": "four squares of the world it actually is a significant amount of traffic that they're doing across you know 80 some",
    "start": "2491119",
    "end": "2497040"
  },
  {
    "text": "different resources that are entire maps of the world right so scale we have you know per customer that can do a lot of",
    "start": "2497040",
    "end": "2503119"
  },
  {
    "text": "stuff we can have people that have a lot of data and then there's another problem that's actually the real problem for us",
    "start": "2503119",
    "end": "2508480"
  },
  {
    "text": "and the compounding one which is the world is Big right it's not that we have",
    "start": "2508480",
    "end": "2514880"
  },
  {
    "text": "like a front page and a couple things people can interact with with and every client can have their own one we have to worry about per user per whatever no we",
    "start": "2514880",
    "end": "2520960"
  },
  {
    "text": "have a whole world and we're rendering it so you can zoom in to any spot of the world at the street level at a way it's",
    "start": "2520960",
    "end": "2526280"
  },
  {
    "text": "relevant to you standing on the street so this is billions and billions of tiles right billions and billions of",
    "start": "2526280",
    "end": "2532119"
  },
  {
    "text": "images we have to worry about being able to serve out that are all valid requests at basically any",
    "start": "2532119",
    "end": "2538359"
  },
  {
    "text": "time the other um interesting thing about our service is that people have sort of adopted us and we we're really",
    "start": "2538359",
    "end": "2545200"
  },
  {
    "text": "happy about it as sort of a utility right so that if you go to for square right on the front page is a map and",
    "start": "2545200",
    "end": "2550839"
  },
  {
    "text": "it's our map if our map goes away you know four Square's hom page is blank it's bad news for them other people like",
    "start": "2550839",
    "end": "2557200"
  },
  {
    "text": "USA Today for their weather weather decision Technologies is another client they use um they use us for uh TV Maps",
    "start": "2557200",
    "end": "2564040"
  },
  {
    "text": "um so that on TV when you see a someone waving in front of a map that could be ours another interesting use case is",
    "start": "2564040",
    "end": "2570000"
  },
  {
    "text": "sort of uh critical utility is for um airplane pilots they download Maps just before they leave onto uh I think",
    "start": "2570000",
    "end": "2576800"
  },
  {
    "text": "they're like iPads and they use those for navigation in Flight pretty cool stuff but it means we're considered sort",
    "start": "2576800",
    "end": "2582599"
  },
  {
    "text": "of a utility provider so um specifically how we've",
    "start": "2582599",
    "end": "2589520"
  },
  {
    "text": "used AWS we've been on AWS from the start we're real big fans of benchmarking um we've tried just about",
    "start": "2589520",
    "end": "2595920"
  },
  {
    "text": "every instance type in lots of different configurations we know like what our sweet spot is on",
    "start": "2595920",
    "end": "2601400"
  },
  {
    "text": "AWS and it's been something that's sort of bred into like how we use the cloud in general we change things we measure",
    "start": "2601400",
    "end": "2609480"
  },
  {
    "text": "rinse and repeat over and over again for nearly every change we make so because we started on on AWS we use cloudfront",
    "start": "2609480",
    "end": "2616040"
  },
  {
    "text": "from the very beginning uh at a point in time we got some business pressure to switch so we're like great let's make a",
    "start": "2616040",
    "end": "2622040"
  },
  {
    "text": "list let's take a look at everybody and talk about you know how do we use this and should we switch so first thing we",
    "start": "2622040",
    "end": "2629920"
  },
  {
    "text": "did what is important to us right because before we can evaluate based on like the features we need to know",
    "start": "2629920",
    "end": "2635880"
  },
  {
    "text": "actually what the features are that are most important to us so we came up with this list speed obviously very very important",
    "start": "2635880",
    "end": "2643480"
  },
  {
    "text": "to everyone not the only thing though right the cost particularly like setup fees minimums this kind of stuff was",
    "start": "2643480",
    "end": "2650079"
  },
  {
    "text": "something we really wanted to make sure that we had under control log delivery this one's sometimes surprising we Bill",
    "start": "2650079",
    "end": "2656559"
  },
  {
    "text": "based on how much of our service you use if we don't get logs in a predictable reliable way in a format we can quickly",
    "start": "2656559",
    "end": "2662440"
  },
  {
    "text": "work with we're in serious trouble cash purging pretty obvious if you put something out there that's a mistake you",
    "start": "2662440",
    "end": "2668359"
  },
  {
    "text": "need to be able to get it back and actually the quality of being able to reach out to somebody and get some support for particular issues so these",
    "start": "2668359",
    "end": "2674920"
  },
  {
    "text": "were the things the sort of top five things we were concerned about and these are the people we basically evaluated in alphabetical",
    "start": "2674920",
    "end": "2681319"
  },
  {
    "text": "order I'm sure if anyone else has done uh CDN evaluation you have a similar list floating around",
    "start": "2681319",
    "end": "2686960"
  },
  {
    "text": "somewhere so we looked at where our traffic is coming from um so we were not sure before we did this",
    "start": "2686960",
    "end": "2694200"
  },
  {
    "text": "exercise like you know where is the biggest biggest users of of our system we just had a bunch of nodes in uh you",
    "start": "2694200",
    "end": "2700040"
  },
  {
    "text": "know the Virginia region and they sort of worked for everything so we downloaded our cloudfront logs and they",
    "start": "2700040",
    "end": "2705559"
  },
  {
    "text": "all have little codes that are pretty pretty much line up with airport codes made this nice map so it's pretty",
    "start": "2705559",
    "end": "2711720"
  },
  {
    "text": "obvious that most of our our customers are coming from um from the US and so as we evaluate",
    "start": "2711720",
    "end": "2717800"
  },
  {
    "text": "speed the US is where we primarily want to be focused we want to make sure we pay attention to other parts of the world particularly like Europe but for",
    "start": "2717800",
    "end": "2725160"
  },
  {
    "text": "the most part we had a us this was a few months back Us customer base so this is a start where things got",
    "start": "2725160",
    "end": "2731839"
  },
  {
    "text": "tricky for us and actually when I started talking to Nate about this presentation where I started realizing some better things we could do our",
    "start": "2731839",
    "end": "2738040"
  },
  {
    "text": "objects are almost exclusively images right so we don't serve a lot of",
    "start": "2738040",
    "end": "2743440"
  },
  {
    "text": "JavaScript for people to use on their website that we can sort of instrument right we just have images they request",
    "start": "2743440",
    "end": "2750079"
  },
  {
    "text": "it over HTTP that's our interaction with them so it's very difficult for us at this point",
    "start": "2750079",
    "end": "2756599"
  },
  {
    "text": "in time to figure out what existing real users are doing and this is something that uh",
    "start": "2756599",
    "end": "2763280"
  },
  {
    "text": "as as I worked on this presentation talked Nate about how cloudfront views things I realized like we should start sneaking instrumentation into things but",
    "start": "2763280",
    "end": "2770200"
  },
  {
    "text": "it's not something we've gotten done to this point in time although it's definitely on the agenda for the future",
    "start": "2770200",
    "end": "2775240"
  },
  {
    "text": "so we looked at using external monitoring tools and we are particularly interested in ones that could Model A",
    "start": "2775240",
    "end": "2781440"
  },
  {
    "text": "whole page load and would load a bunch of tiles to get us as close to the experience of a user on our system as",
    "start": "2781440",
    "end": "2787880"
  },
  {
    "text": "possible so there's a bunch of different um you know third parties parties that do this kind of stuff as Nate mentioned",
    "start": "2787880",
    "end": "2794280"
  },
  {
    "text": "we picked one that had a lot of monitoring stations 64 all over the world and um we set up two identical",
    "start": "2794280",
    "end": "2801160"
  },
  {
    "text": "Stacks not production Stacks dedicated just for this we ran our test simultaneously on them so if there's",
    "start": "2801160",
    "end": "2806920"
  },
  {
    "text": "anything that happened in how Network traffic is routed or DNS changes or whatever they would all be covered",
    "start": "2806920",
    "end": "2812720"
  },
  {
    "text": "identically put up the same map same same max age on it ran these uh polls",
    "start": "2812720",
    "end": "2818359"
  },
  {
    "text": "these tests for 24 hours so I feel like that was a pretty fair test of how this is going to perform so as objects get",
    "start": "2818359",
    "end": "2825559"
  },
  {
    "text": "into cash and expire from cash they'll be happening at approximately the same time for both of these stacks on each of",
    "start": "2825559",
    "end": "2832480"
  },
  {
    "text": "the cdns we were evaluating and then of course we had some actual people uh we have a pretty",
    "start": "2832480",
    "end": "2838640"
  },
  {
    "text": "distributed team we have some people uh in South America a few people in Europe and so we asked them hey you know open",
    "start": "2838640",
    "end": "2844640"
  },
  {
    "text": "up Chrome tell us what you're seeing for individual tiles in terms of fresh hits misses and then full page loads sort of",
    "start": "2844640",
    "end": "2851160"
  },
  {
    "text": "collect that information make sure it lines up with what our external monitoring system is telling us is happening not as precise as being able",
    "start": "2851160",
    "end": "2858480"
  },
  {
    "text": "to actually um get Telemetry information from all the clients we've got but a little bit of a a stop Gap that we could",
    "start": "2858480",
    "end": "2865960"
  },
  {
    "text": "use so stripped of their numbers because they were very very close this is basically what we found right on a",
    "start": "2865960",
    "end": "2873359"
  },
  {
    "text": "global basis sort of globally averaged there is the this this Market",
    "start": "2873359",
    "end": "2879079"
  },
  {
    "text": "is very competitive right CDN perform very very well all over the place and",
    "start": "2879079",
    "end": "2884520"
  },
  {
    "text": "the differences is a handful of milliseconds uh in the us when we Benchmark against our stack we found",
    "start": "2884520",
    "end": "2890480"
  },
  {
    "text": "cloudfront performed a bit better there could be reasons for this but we were happy just knowing that it did uh and it",
    "start": "2890480",
    "end": "2897359"
  },
  {
    "text": "also sort of validated um what we had seen before so um cloudfront for us was",
    "start": "2897359",
    "end": "2905400"
  },
  {
    "text": "faster the cost as there's been a lot of talk about how how Amazon operates generally the cost",
    "start": "2905400",
    "end": "2910920"
  },
  {
    "text": "was lower we were very happy with log delivery we'd already built a Billing System around it we didn't have to set",
    "start": "2910920",
    "end": "2915960"
  },
  {
    "text": "up an FTP server that would somehow suck those logs over to S3 and deal with how things were broken down C purging we're",
    "start": "2915960",
    "end": "2923160"
  },
  {
    "text": "completely satisfied with uh and um we sort of evaluated gold support versus the various support channels we had with",
    "start": "2923160",
    "end": "2929520"
  },
  {
    "text": "other systems and we're pretty happy with the kind of uh response we got and the availability of developers with",
    "start": "2929520",
    "end": "2935520"
  },
  {
    "text": "Amazon so so great we're on a good CDN perfect wonderful yes awesome right so",
    "start": "2935520",
    "end": "2941640"
  },
  {
    "text": "we wanted to do a little bit more right because you actually can't stop there there's two things we want us to look at doing doing less and getting closer so",
    "start": "2941640",
    "end": "2949839"
  },
  {
    "text": "doing less the idea here is the less your service has to",
    "start": "2949839",
    "end": "2955400"
  },
  {
    "text": "do the faster it's going to be so like I said earlier doing things with like",
    "start": "2955799",
    "end": "2961280"
  },
  {
    "text": "proper if modified headers this is absolutely critical right Nate walked",
    "start": "2961280",
    "end": "2966319"
  },
  {
    "text": "through earlier how a CDN is going to fetch objects if a CDN has an expired item and it hasn't trashed it it's going",
    "start": "2966319",
    "end": "2972680"
  },
  {
    "text": "to ask you before it trashed it completely can I reuse this if you can say yeah use that that is a much much",
    "start": "2972680",
    "end": "2980680"
  },
  {
    "text": "much smaller exchange between those two servers and it prevents your server from doing hardly any work at all except",
    "start": "2980680",
    "end": "2986119"
  },
  {
    "text": "checking metadata and you can move on real quick and serve those a lot faster",
    "start": "2986119",
    "end": "2991559"
  },
  {
    "text": "so of course this requires you to have already done some work right you need the ability to check for metadata",
    "start": "2991559",
    "end": "2997200"
  },
  {
    "text": "before building an object and this is you know often viewed as something that's a little bit too hard but it's",
    "start": "2997200",
    "end": "3004760"
  },
  {
    "text": "totally worth the work right and what we found is that put into place we do about",
    "start": "3004760",
    "end": "3010160"
  },
  {
    "text": "70% 304s right that's a awesome number it means that for those requests we",
    "start": "3010160",
    "end": "3015480"
  },
  {
    "text": "barely do anything we're able to deliver those requests hugely faster because all we're",
    "start": "3015480",
    "end": "3021079"
  },
  {
    "text": "doing is checking headers against a simple metadata table right this is awesome so I can do",
    "start": "3021079",
    "end": "3027680"
  },
  {
    "text": "um over 4,500 requests a second for 304s and much much less with with um 200s",
    "start": "3027680",
    "end": "3034720"
  },
  {
    "text": "similarly the response time on 304s is really fast we're talking in the order of dozens of milliseconds versus me",
    "start": "3034720",
    "end": "3040599"
  },
  {
    "text": "loing objects from remote sources compositing them and pushing them back out second thing is getting",
    "start": "3040599",
    "end": "3047760"
  },
  {
    "text": "closer even electrons take time to cross an ocean and if you're closer your CDN",
    "start": "3047760",
    "end": "3053280"
  },
  {
    "text": "doesn't have to go as far and misses so this is simp similar gra or the same uh picture we looked at earlier of where",
    "start": "3053280",
    "end": "3059799"
  },
  {
    "text": "our traffic comes from grouped into um sort of AWS",
    "start": "3059799",
    "end": "3065400"
  },
  {
    "text": "availability zones this is what it looks like right the US east region is the",
    "start": "3065400",
    "end": "3070480"
  },
  {
    "text": "majority of our traffic Europe comes second right so we're like great if we want to try and make things faster let's",
    "start": "3070480",
    "end": "3075599"
  },
  {
    "text": "go to Europe let's see what that does for us so we put another cluster in Europe",
    "start": "3075599",
    "end": "3082280"
  },
  {
    "text": "in uh aws's Ireland region we have master master replication between the there's a variety of DNS options you can",
    "start": "3082280",
    "end": "3088839"
  },
  {
    "text": "use to split your traffic we're using an anycast uh um solution right",
    "start": "3088839",
    "end": "3094240"
  },
  {
    "text": "now and of course getting closer if you've done these sort of things in the past if you've used cloud formation if",
    "start": "3094240",
    "end": "3100680"
  },
  {
    "text": "you have uh configuration management if you got automated deploys this is a lot easier right so the traffic splits nice",
    "start": "3100680",
    "end": "3107000"
  },
  {
    "text": "and clean once we get this up and running so there's uh us traffic on top",
    "start": "3107000",
    "end": "3112160"
  },
  {
    "text": "European traffic on the bottom and this is the drop off in AC latency from a",
    "start": "3112160",
    "end": "3118160"
  },
  {
    "text": "full page load right so you can see we launched on the 23rd of August and latency from a a test run out of the",
    "start": "3118160",
    "end": "3124319"
  },
  {
    "text": "Amazon data center goes from almost a second and a half to like 300 milliseconds 250 milliseconds right and",
    "start": "3124319",
    "end": "3130480"
  },
  {
    "text": "that's just moving the origin not changing any of the technology behind it right it's totally awesome for our users",
    "start": "3130480",
    "end": "3135520"
  },
  {
    "text": "in Europe their page loads just got like six three or six times faster right so",
    "start": "3135520",
    "end": "3141440"
  },
  {
    "text": "these sorts of things behind a CDN this already fast for us were huge improvements right the if modif if since",
    "start": "3141440",
    "end": "3147040"
  },
  {
    "text": "we can serve those you know 10 times faster it's crazy granted the cash has to be sort of populated already but for",
    "start": "3147040",
    "end": "3153200"
  },
  {
    "text": "a user that's getting a resource that's used a bit it's huge and then proximity",
    "start": "3153200",
    "end": "3158240"
  },
  {
    "text": "of course six times faster is just awesome so before I before I walk off",
    "start": "3158240",
    "end": "3164680"
  },
  {
    "text": "here if you fall fell asleep the three things that we found to be useful is knowing what matters uh measuring them",
    "start": "3164680",
    "end": "3171799"
  },
  {
    "text": "as much as possible and pulling together this talk I also learned that I did not keep track of my measur measurements",
    "start": "3171799",
    "end": "3177040"
  },
  {
    "text": "nearly as well as I should have there's measurements that I took that were really valuable and I spent a lot of time on their lost to the Winds of time",
    "start": "3177040",
    "end": "3184040"
  },
  {
    "text": "um so keep track of what you've done in the past and also being a good Upstream to your CDN is actually where we've seen",
    "start": "3184040",
    "end": "3189520"
  },
  {
    "text": "that we've been able to make the most improvements for our",
    "start": "3189520",
    "end": "3193480"
  },
  {
    "text": "users thanks [Applause] Jeff all right so we are a little bit",
    "start": "3198480",
    "end": "3206559"
  },
  {
    "text": "over time um I'm I'm going to stick around for questions if you have any and Jeff will be here too uh I also we have",
    "start": "3206559",
    "end": "3212040"
  },
  {
    "text": "some papers that might be interesting to you it's a performance comparison U showing cloudfronts performance compared",
    "start": "3212040",
    "end": "3218559"
  },
  {
    "text": "to some other CDN and also has more data that I showed that amazon.com retail data and and and cloudfront",
    "start": "3218559",
    "end": "3226240"
  },
  {
    "text": "usage thank you",
    "start": "3226240",
    "end": "3230440"
  }
]