[
  {
    "start": "0",
    "end": "137000"
  },
  {
    "text": "hi my name is massimo referra and i'm going to show you how amazon ecs anywhere works",
    "start": "1280",
    "end": "7359"
  },
  {
    "text": "with this simple demo in this demo we're going to deploy first",
    "start": "7359",
    "end": "12480"
  },
  {
    "text": "this simple application in the cloud to show you how it works uh",
    "start": "12480",
    "end": "17600"
  },
  {
    "text": "in the cloud and with ecs deployment um in the region the first step is going",
    "start": "17600",
    "end": "23119"
  },
  {
    "text": "to deploy this architecture here as you can see my application runs it's a python application that runs in this",
    "start": "23119",
    "end": "29760"
  },
  {
    "text": "ecs task that in turns runs on aws far gate",
    "start": "29760",
    "end": "35920"
  },
  {
    "text": "the way this application works is as follows we're going to put some files on a efs",
    "start": "35920",
    "end": "44320"
  },
  {
    "text": "share in particularly in in a source directory of this efs share we're going to put",
    "start": "44320",
    "end": "52239"
  },
  {
    "text": "messages uh in an amazon sqs queue that the application will read in a continuous",
    "start": "52239",
    "end": "59359"
  },
  {
    "text": "loop when there is a match between the file name and the message",
    "start": "59359",
    "end": "64720"
  },
  {
    "text": "in the sqs queue the application will compute the data",
    "start": "64720",
    "end": "72400"
  },
  {
    "text": "when i say compute in the for the purpose of this application i mean it will rename the file and it will move",
    "start": "72400",
    "end": "79439"
  },
  {
    "text": "it to another folder this should be representative or ideally representative of what a",
    "start": "79439",
    "end": "86080"
  },
  {
    "text": "task could do for example on your data last but not least the task will log",
    "start": "86080",
    "end": "92079"
  },
  {
    "text": "into cloudwatch what it has done in this demo we want to",
    "start": "92079",
    "end": "97840"
  },
  {
    "text": "first deploy this in the cloud and then we also want to deploy this outside of the cloud",
    "start": "97840",
    "end": "104159"
  },
  {
    "text": "mimicking how the very same application the very same code",
    "start": "104159",
    "end": "109360"
  },
  {
    "text": "could run in a task in an ecs task outside of the region and particularly",
    "start": "109360",
    "end": "115439"
  },
  {
    "text": "in a customer data center as you can see the task will continue to read from the amazon sqs queue",
    "start": "115439",
    "end": "121759"
  },
  {
    "text": "but in this case the data are not going to be on an efs share the data are going to",
    "start": "121759",
    "end": "127520"
  },
  {
    "text": "remain in the customer data center and the tasks will act on the data that are in the customer",
    "start": "127520",
    "end": "135760"
  },
  {
    "text": "data center so let's move into uh the actual demo",
    "start": "135760",
    "end": "143440"
  },
  {
    "start": "137000",
    "end": "301000"
  },
  {
    "text": "the demo is comprised of three main parts i have already done the prerequisite",
    "start": "143440",
    "end": "148720"
  },
  {
    "text": "we're going to deploy the application in region we're going to prepare",
    "start": "148720",
    "end": "154319"
  },
  {
    "text": "the external setup and we're going to actually deploy on",
    "start": "154319",
    "end": "160080"
  },
  {
    "text": "the external setup that we have just made so how are",
    "start": "160080",
    "end": "165200"
  },
  {
    "text": "we going to deploy in the region in order to be able to deploy in the region and satisfy",
    "start": "165200",
    "end": "171360"
  },
  {
    "text": "all the prerequisites that my application has i'm going to use um the docker compose",
    "start": "171360",
    "end": "177519"
  },
  {
    "text": "integration that we recently announced um if you have not been following along",
    "start": "177519",
    "end": "183360"
  },
  {
    "text": "all the latest news about ecs we have built an um docker composer integration with ecs",
    "start": "183360",
    "end": "190159"
  },
  {
    "text": "that allows you to um to sketch very simple yaml files as you can see",
    "start": "190159",
    "end": "195760"
  },
  {
    "text": "here this is the one that i'm using in order to bring up a somewhat complex stack let's go",
    "start": "195760",
    "end": "202400"
  },
  {
    "text": "through very briefly about what this does so i'm going to declare a service",
    "start": "202400",
    "end": "208959"
  },
  {
    "text": "which is going to be turned into an ecs service with this docker compose",
    "start": "208959",
    "end": "215920"
  },
  {
    "text": "syntax i'm going to call it ecs worker in region i'm going to pass a",
    "start": "215920",
    "end": "222159"
  },
  {
    "text": "number of variables like the sqsq url and also the efs source and destination",
    "start": "222159",
    "end": "230080"
  },
  {
    "text": "folders data source folder and data destination folder these are the two folders",
    "start": "230080",
    "end": "236159"
  },
  {
    "text": "that the application is going to use to move data back and forth the region the",
    "start": "236159",
    "end": "243599"
  },
  {
    "text": "image that i'm going to use in this case i'm using this um in this image that has already been",
    "start": "243599",
    "end": "251760"
  },
  {
    "text": "created and the other thing that i'm doing is i'm declaring a volume now when i'm deploying these uh with",
    "start": "251760",
    "end": "259040"
  },
  {
    "text": "standard docker compose this will create a darker volume on your laptop but leveraging this",
    "start": "259040",
    "end": "265520"
  },
  {
    "text": "integration this will create an actual efs share on aws which i'm then going to mount",
    "start": "265520",
    "end": "274080"
  },
  {
    "text": "into this um folder inside the container last but not least what this integration",
    "start": "274080",
    "end": "280800"
  },
  {
    "text": "allows you to do is to create particular em policies like in this case i'm asking",
    "start": "280800",
    "end": "288720"
  },
  {
    "text": "this integration to create a policy that allows my task to access this queue",
    "start": "288720",
    "end": "296639"
  },
  {
    "text": "in order to be able to read messages from that queue if i go on the console",
    "start": "296639",
    "end": "304479"
  },
  {
    "text": "and if i check what i have available as you can see i don't have any uh or i",
    "start": "304479",
    "end": "310960"
  },
  {
    "text": "only have three confirmation uh stacks already running this is my cue",
    "start": "310960",
    "end": "316639"
  },
  {
    "text": "uh main queue that i've already uh pre-created and this is my easy r",
    "start": "316639",
    "end": "324880"
  },
  {
    "text": "repo this is the container image that i'm going to use to create that architecture however if i",
    "start": "324880",
    "end": "333039"
  },
  {
    "text": "go into the ecs ui there is nothing here okay",
    "start": "333039",
    "end": "338400"
  },
  {
    "text": "there is no um cluster whatsoever uh in the region other than default uh",
    "start": "338400",
    "end": "346320"
  },
  {
    "text": "also there is no efs share whatsoever in the region",
    "start": "346320",
    "end": "352960"
  },
  {
    "start": "352000",
    "end": "439000"
  },
  {
    "text": "so let's go back and let's launch uh the sum in the directory that",
    "start": "352960",
    "end": "359520"
  },
  {
    "text": "includes this docker compose file so i'm just going to do docker compose up",
    "start": "359520",
    "end": "366880"
  },
  {
    "text": "what this is going to do it's going to translate this very simple and elegant docker compose file",
    "start": "366880",
    "end": "373280"
  },
  {
    "text": "into a very big cloud formation template that represents",
    "start": "373280",
    "end": "378400"
  },
  {
    "text": "the the architecture that i have described in the first part of this demo and that i have",
    "start": "378400",
    "end": "386240"
  },
  {
    "text": "already simply described with this yaml over here so as you can see",
    "start": "386240",
    "end": "391280"
  },
  {
    "text": "uh these integration has already started deploying this it will take a few minutes uh but let's",
    "start": "391280",
    "end": "397840"
  },
  {
    "text": "see how it's going to start as you can see it has already started this deployment",
    "start": "397840",
    "end": "403440"
  },
  {
    "text": "process as i said it will take a few minutes so i'll come back when this is done",
    "start": "403440",
    "end": "408960"
  },
  {
    "text": "the um stack has completed if i go back here i should see that it",
    "start": "408960",
    "end": "414639"
  },
  {
    "text": "has completed it took a few minutes uh two three minutes uh to deploy",
    "start": "414639",
    "end": "420400"
  },
  {
    "text": "um let's see what it has done uh so if i go here and i refresh",
    "start": "420400",
    "end": "425680"
  },
  {
    "text": "these i should see a new cluster in a region because that's the project name the docker compose project name",
    "start": "425680",
    "end": "432160"
  },
  {
    "text": "as you can see there is one service and one task because that's what was in the docker compose if i go",
    "start": "432160",
    "end": "439680"
  },
  {
    "start": "439000",
    "end": "487000"
  },
  {
    "text": "on the efs i should see the efs that has been created for me so this is the actual efs file system",
    "start": "439680",
    "end": "447360"
  },
  {
    "text": "that it has created to be able to land those files",
    "start": "447360",
    "end": "453759"
  },
  {
    "text": "last but not least if i go in cloudwatch i should see the docker compose in region",
    "start": "453759",
    "end": "462319"
  },
  {
    "text": "log group um and i can see the log streams here uh this is the application log stream so",
    "start": "462880",
    "end": "470319"
  },
  {
    "text": "as you can see uh my application is already starting uh to log like it's initializing the about",
    "start": "470319",
    "end": "477199"
  },
  {
    "text": "the client and anything that it needs to do now it's entering the infinite queue monitoring loop so",
    "start": "477199",
    "end": "484080"
  },
  {
    "text": "basically it's waiting for uh doing work so let's see um",
    "start": "484080",
    "end": "489199"
  },
  {
    "start": "487000",
    "end": "660000"
  },
  {
    "text": "what we can do here so i have from these cloud9 environments i have already mounted the efs share so",
    "start": "489199",
    "end": "496400"
  },
  {
    "text": "if i go in here i should see the two folders these are the two folders that the application is",
    "start": "496400",
    "end": "502080"
  },
  {
    "text": "using i'm accessing that folder from the outside of the application but they can still manipulate them so",
    "start": "502080",
    "end": "509280"
  },
  {
    "text": "they should be empty yes they are",
    "start": "509280",
    "end": "515200"
  },
  {
    "text": "so what i'm going to do is i'm going to start creating um a few files",
    "start": "515200",
    "end": "521919"
  },
  {
    "text": "in the source folder i'm going to call them 0 0 1 0",
    "start": "521919",
    "end": "528399"
  },
  {
    "text": "0 2 0 0 3 0 0 4 and 0 5 so",
    "start": "528399",
    "end": "535040"
  },
  {
    "text": "now there are uh three files uh in the source folder and no files in",
    "start": "535040",
    "end": "541360"
  },
  {
    "text": "the destination folder so let's go here in the amazon sqsq in my main queue which is the the key",
    "start": "541360",
    "end": "548320"
  },
  {
    "text": "that the application is pulling from so i'm going to send a few message here",
    "start": "548320",
    "end": "555120"
  },
  {
    "text": "i'm going to send 0 0 1",
    "start": "555120",
    "end": "558880"
  },
  {
    "text": "i'm going to send zero zero two",
    "start": "561440",
    "end": "565200"
  },
  {
    "text": "three four",
    "start": "566800",
    "end": "572959"
  },
  {
    "text": "let's go back here and see what happened as you can see files are already",
    "start": "574000",
    "end": "579360"
  },
  {
    "text": "disappearing uh from the source folder and they're being moved",
    "start": "579360",
    "end": "584480"
  },
  {
    "text": "into the destination folder with the suffix has been processed this is just for demo purposes just to",
    "start": "584480",
    "end": "591519"
  },
  {
    "text": "show you how these files are taken um processed uh quote-unquote and",
    "start": "591519",
    "end": "597600"
  },
  {
    "text": "moved into another folder um now only four files have been moved",
    "start": "597600",
    "end": "604399"
  },
  {
    "text": "and the fifth one has not been moved simply because there wasn't a message that would match",
    "start": "604399",
    "end": "611200"
  },
  {
    "text": "it so if i send the fifth one",
    "start": "611200",
    "end": "615920"
  },
  {
    "text": "that should disappear and the fifth file has been moved so that's what the application does",
    "start": "616320",
    "end": "622320"
  },
  {
    "text": "uh it should have also been logging in here yeah and it has logged into",
    "start": "622320",
    "end": "629920"
  },
  {
    "text": "cloudwatch so it just said processing file data sourcefolder001",
    "start": "629920",
    "end": "635519"
  },
  {
    "text": "and moving into so other than moving actually the file it has been",
    "start": "635519",
    "end": "640880"
  },
  {
    "text": "logging that it has been moving the file in the next part of the demo we are",
    "start": "640880",
    "end": "647600"
  },
  {
    "text": "going to prepare the on-prem environment to be able to deploy the very same application very",
    "start": "647600",
    "end": "653839"
  },
  {
    "text": "same architecture on-prem in your data center",
    "start": "653839",
    "end": "660880"
  },
  {
    "start": "660000",
    "end": "1120000"
  },
  {
    "text": "okay let's prepare the on-prem environment we're going to work primarily from this",
    "start": "660880",
    "end": "666399"
  },
  {
    "text": "window here this is going to be our main console so to speak where we're preparing that environment",
    "start": "666399",
    "end": "673440"
  },
  {
    "text": "that environment has is um represented by these two windows over here",
    "start": "673440",
    "end": "678720"
  },
  {
    "text": "so they're called um instance a and instance b they both run in an on-prem code environment they're",
    "start": "678720",
    "end": "686640"
  },
  {
    "text": "based on ubuntu 20 with docker install because i just",
    "start": "686640",
    "end": "693200"
  },
  {
    "text": "installed docker on these two there is nothing obviously running on these instances so",
    "start": "693200",
    "end": "700959"
  },
  {
    "text": "far and we're going to prepare them to be able to become part of an ecs cluster",
    "start": "700959",
    "end": "708800"
  },
  {
    "text": "but before we dive into this let's go and see what we're going to do",
    "start": "708800",
    "end": "713839"
  },
  {
    "text": "so we have completed this part of setting up the on the region environment we're going to",
    "start": "713839",
    "end": "720000"
  },
  {
    "text": "move to the second part of this demo which is the external part preparation",
    "start": "720000",
    "end": "726000"
  },
  {
    "text": "for these i have a couple of scripts that we are going to run there is a main script that we are going to run in this",
    "start": "726000",
    "end": "731600"
  },
  {
    "text": "main console and there are also two scripts that we need to run on these two",
    "start": "731600",
    "end": "736639"
  },
  {
    "text": "instances because we need to install the ssm agent which is a prerequisite",
    "start": "736639",
    "end": "742240"
  },
  {
    "text": "to make this ecs anywhere solution work so let's get started um with uh",
    "start": "742240",
    "end": "748720"
  },
  {
    "text": "the second part uh so we're going to uh move into",
    "start": "748720",
    "end": "755920"
  },
  {
    "text": "uh the directory here and we're going to launch the main setup",
    "start": "755920",
    "end": "763040"
  },
  {
    "text": "external script all right so it says that we're going to prepare",
    "start": "763040",
    "end": "770560"
  },
  {
    "text": "the environment we're going to work out of uss1 because this is the region that we're using for",
    "start": "770560",
    "end": "777440"
  },
  {
    "text": "uh this demo uh one note is that we're using some development environment",
    "start": "777440",
    "end": "784320"
  },
  {
    "text": "here so most of the things that we're creating with this screen won't show up uh in the production console but i will",
    "start": "784320",
    "end": "791200"
  },
  {
    "text": "show you um a development console that will show you what we're doing here so i'm setting",
    "start": "791200",
    "end": "799440"
  },
  {
    "text": "environment variables for this particular reason because we're not pointing to production but to this development environment",
    "start": "799440",
    "end": "807600"
  },
  {
    "text": "and the first thing that we do is we create a cluster okay if you remember in the in region",
    "start": "807600",
    "end": "813760"
  },
  {
    "text": "deployment we have created an in-region cluster or may um",
    "start": "813760",
    "end": "819360"
  },
  {
    "text": "the docker compose integration has created a dedicated cluster we're going to create a new",
    "start": "819360",
    "end": "825279"
  },
  {
    "text": "cluster for this on-prem capacity so",
    "start": "825279",
    "end": "830320"
  },
  {
    "text": "it's now creating a new cluster the the other thing that we're doing is we're going to create",
    "start": "830320",
    "end": "836560"
  },
  {
    "text": "ssm keys because these are the keys that we're going to need",
    "start": "836560",
    "end": "841680"
  },
  {
    "text": "to be able to connect these two instances that you see at the bottom instance a and instance b to",
    "start": "841680",
    "end": "849120"
  },
  {
    "text": "ssm in order to move forward so it's now creating these ssm keys and",
    "start": "849120",
    "end": "856160"
  },
  {
    "text": "it's now saying stop here and go to those instances to install the ssm agent",
    "start": "856160",
    "end": "864240"
  },
  {
    "text": "i'm going to export this variable here as you can see",
    "start": "864240",
    "end": "871040"
  },
  {
    "text": "the cluster name is being called external and i'm",
    "start": "871040",
    "end": "876000"
  },
  {
    "text": "and i'm basically setting this in this environment",
    "start": "876079",
    "end": "881279"
  },
  {
    "text": "variable so we have um exported this on these two instances the script the",
    "start": "881279",
    "end": "887360"
  },
  {
    "text": "um ssm script is already running uh on i'm sorry is already present on these",
    "start": "887360",
    "end": "893279"
  },
  {
    "text": "instances so we'll just run uh these",
    "start": "893279",
    "end": "898320"
  },
  {
    "text": "and basically what it's doing it's it's downloading the ubuntu snap for the ssm agent",
    "start": "898320",
    "end": "905360"
  },
  {
    "text": "um it's going to take a few seconds to do that and it's going to use those",
    "start": "905360",
    "end": "911680"
  },
  {
    "text": "keys those activation id and activation code to register into ssn",
    "start": "911680",
    "end": "919920"
  },
  {
    "text": "so it's almost complete uh it's setting up the profiles and",
    "start": "919920",
    "end": "925519"
  },
  {
    "text": "everything okay the script has",
    "start": "925519",
    "end": "931199"
  },
  {
    "text": "completed and i'm going to run the very same script on the other",
    "start": "931199",
    "end": "937440"
  },
  {
    "text": "instances for the purpose of this demo i'm doing this all manual just to walk you through",
    "start": "937440",
    "end": "943440"
  },
  {
    "text": "the steps required underneath to make it work but obviously in a production environment",
    "start": "943440",
    "end": "949040"
  },
  {
    "text": "you won't need to run this manually if you don't want to",
    "start": "949040",
    "end": "954800"
  },
  {
    "text": "so same thing it's grabbing the snap um and it's",
    "start": "954800",
    "end": "961279"
  },
  {
    "text": "setting up the ssm agent using the same activation id and activation code that i provided",
    "start": "961279",
    "end": "969680"
  },
  {
    "text": "okay it seems that it's been registered so we can go back to the main script",
    "start": "969680",
    "end": "975759"
  },
  {
    "text": "and hit enter okay it has found two instances",
    "start": "975759",
    "end": "982560"
  },
  {
    "text": "two managed instances with these i'm querying ssm and i'm asking ssm",
    "start": "982560",
    "end": "988160"
  },
  {
    "text": "give me the list of managed instances that you have and in fact there are two managed instances which is this one",
    "start": "988160",
    "end": "995040"
  },
  {
    "text": "and this other one and basically it's now going to install the ecs agent",
    "start": "995040",
    "end": "1001519"
  },
  {
    "text": "on those instances so what i'm going to do because the um ssm agent is represented by",
    "start": "1001519",
    "end": "1010560"
  },
  {
    "text": "docker container that is going to spin up on these instances i'm going to watch docker ps these two",
    "start": "1012000",
    "end": "1018560"
  },
  {
    "text": "instances and see when that container comes up",
    "start": "1018560",
    "end": "1025839"
  },
  {
    "text": "so what i'm doing in this main window is that i'm using now ssm to send the package",
    "start": "1026240",
    "end": "1033600"
  },
  {
    "text": "the ecs agent package to these two instances for the ecs agent to be set",
    "start": "1033600",
    "end": "1040160"
  },
  {
    "text": "up",
    "start": "1040160",
    "end": "1042319"
  },
  {
    "text": "and it's launching the remote setup of the ecs agent on these two instances it will take a few minutes uh",
    "start": "1046079",
    "end": "1053120"
  },
  {
    "text": "to grab the package these two instances are going to take a few minutes to download uh this package so i'm going to",
    "start": "1053120",
    "end": "1060240"
  },
  {
    "text": "pause here and come back when this is done",
    "start": "1060240",
    "end": "1066320"
  },
  {
    "text": "okay the agent has started and they should have joined the cluster",
    "start": "1066320",
    "end": "1073120"
  },
  {
    "text": "uh by now the cluster that we have just created with the main script so let's go and just check to make sure the status",
    "start": "1073120",
    "end": "1080480"
  },
  {
    "text": "of the ecs agent and particularly the packages",
    "start": "1080480",
    "end": "1086320"
  },
  {
    "text": "yeah as you can see they have been successfully installed keep in mind that",
    "start": "1086480",
    "end": "1093200"
  },
  {
    "text": "this is still um early stages um of these",
    "start": "1093200",
    "end": "1099679"
  },
  {
    "text": "tooling so you may see install errors that are okay for the purpose of our demo",
    "start": "1099679",
    "end": "1106799"
  },
  {
    "text": "let's now check the ecs cluster it should have a couple of container",
    "start": "1106799",
    "end": "1112240"
  },
  {
    "text": "instances as a matter of fact it has a couple of container instances which are the two that we have just",
    "start": "1112240",
    "end": "1118720"
  },
  {
    "text": "registered as i alluded to this is not running in a production deployment so",
    "start": "1118720",
    "end": "1124400"
  },
  {
    "start": "1120000",
    "end": "1207000"
  },
  {
    "text": "i won't see this cluster in my production environment where i have deployed the in",
    "start": "1124400",
    "end": "1131919"
  },
  {
    "text": "region cluster but um let me check uh if in the development",
    "start": "1131919",
    "end": "1140240"
  },
  {
    "text": "console i see the new cluster and the new container instances",
    "start": "1140240",
    "end": "1146160"
  },
  {
    "text": "so i have connected to the vpn in order to get access to this development",
    "start": "1146240",
    "end": "1151760"
  },
  {
    "text": "environment as you can see i didn't have any cluster in here let's say if i refresh if i see the new",
    "start": "1151760",
    "end": "1160320"
  },
  {
    "text": "external cluster here you are and the two container instances",
    "start": "1160320",
    "end": "1165679"
  },
  {
    "text": "and as you can see here if i click on these cluster",
    "start": "1165679",
    "end": "1173280"
  },
  {
    "text": "ecs instances yeah never mind about the agent this is",
    "start": "1173679",
    "end": "1180720"
  },
  {
    "text": "all student development these are the two instances that i've just deployed as you can see",
    "start": "1180720",
    "end": "1189039"
  },
  {
    "text": "they are ssn managed instances so they're not running",
    "start": "1189039",
    "end": "1194080"
  },
  {
    "text": "in the cloud so this concludes the second part the preparation of the environment the last part will",
    "start": "1194080",
    "end": "1201280"
  },
  {
    "text": "actually deploy our application so let's see",
    "start": "1201280",
    "end": "1207840"
  },
  {
    "start": "1207000",
    "end": "1443000"
  },
  {
    "text": "let's start the last part of this demo which is the part where we actually deploy the task on the on-prem",
    "start": "1208000",
    "end": "1214799"
  },
  {
    "text": "instances so we have as a recap the cluster with the three container instances that you",
    "start": "1214799",
    "end": "1220080"
  },
  {
    "text": "can see underneath here they're both running the ecs agent that we started in the previous",
    "start": "1220080",
    "end": "1225520"
  },
  {
    "text": "session what we're going to do now is we're going to use this task",
    "start": "1225520",
    "end": "1230640"
  },
  {
    "text": "definition which is very similar to the task definition that we have used for the in-region deployment that the",
    "start": "1230640",
    "end": "1236480"
  },
  {
    "text": "docker compose integration has created with some differences",
    "start": "1236480",
    "end": "1242880"
  },
  {
    "text": "so well the very first difference that i would like to call out is that",
    "start": "1242880",
    "end": "1248559"
  },
  {
    "text": "this task requires external compatibility this is a new thing that we are",
    "start": "1248559",
    "end": "1253840"
  },
  {
    "text": "introducing this external external launch type which is core to how ecs anywhere worked",
    "start": "1253840",
    "end": "1260799"
  },
  {
    "text": "work this is in addition to the existing launch type that we have that are",
    "start": "1260799",
    "end": "1266159"
  },
  {
    "text": "ect and fargate so external is this launch type that we",
    "start": "1266159",
    "end": "1271760"
  },
  {
    "text": "will use to deploy this task uh very similarly to the previous",
    "start": "1271760",
    "end": "1279440"
  },
  {
    "text": "test definition we are passing some of the variables which represents um the the the the",
    "start": "1279440",
    "end": "1286880"
  },
  {
    "text": "resources where this stack is going to act upon for example we're using the very same queue",
    "start": "1286880",
    "end": "1292559"
  },
  {
    "text": "that we have used at the beginning we're also declaring new folders because the structure",
    "start": "1292559",
    "end": "1299600"
  },
  {
    "text": "on-prem is different in particular what we're doing is we are basically declaring",
    "start": "1299600",
    "end": "1307039"
  },
  {
    "text": "a volume a darker volume at this location home ubuntu data and this data",
    "start": "1307039",
    "end": "1313840"
  },
  {
    "text": "is amount that we have on these two instances okay so",
    "start": "1313840",
    "end": "1320960"
  },
  {
    "text": "we're going to uh map that data into slash data inside the",
    "start": "1320960",
    "end": "1327120"
  },
  {
    "text": "container and that represents basically an nfs shared mount",
    "start": "1327120",
    "end": "1332400"
  },
  {
    "text": "inside the container which means that both instances are in both containers",
    "start": "1332400",
    "end": "1337690"
  },
  {
    "text": "[Music] actually both instances can access the same data so regardless of where",
    "start": "1337690",
    "end": "1343840"
  },
  {
    "text": "the application container is going to land it will have access to the very same",
    "start": "1343840",
    "end": "1351039"
  },
  {
    "text": "data we're also logging again into cloudwatch and we're",
    "start": "1351039",
    "end": "1358400"
  },
  {
    "text": "adding this graphics external just to uh make it clear that this is a very",
    "start": "1358400",
    "end": "1364880"
  },
  {
    "text": "different uh lock string last but not least we're obviously using the very same",
    "start": "1364880",
    "end": "1370960"
  },
  {
    "text": "uh container image that we used before so this is the ecs worker container image that",
    "start": "1370960",
    "end": "1377679"
  },
  {
    "text": "we have used for the in region launch this is absolutely the very same thing the other",
    "start": "1377679",
    "end": "1385039"
  },
  {
    "text": "three thing that i wanted to call out is that we're using the very same execution role",
    "start": "1385039",
    "end": "1391280"
  },
  {
    "text": "and the very same task role that we use for the um for the in-region",
    "start": "1391280",
    "end": "1398960"
  },
  {
    "text": "deployment this is literally a copy and paste from the actual",
    "start": "1398960",
    "end": "1405760"
  },
  {
    "text": "um deployment that we have done uh in the region both for the execution",
    "start": "1405760",
    "end": "1412000"
  },
  {
    "text": "row as well for the task role this taskbar for example allows me to get access to this queue",
    "start": "1412000",
    "end": "1418400"
  },
  {
    "text": "for example and this execution role allows me in the",
    "start": "1418400",
    "end": "1423600"
  },
  {
    "text": "container and the task deployment on these two on-prem instances to pull from ecr for example",
    "start": "1423600",
    "end": "1432240"
  },
  {
    "text": "so uh let's do this let's copy these um task definition",
    "start": "1432240",
    "end": "1440080"
  },
  {
    "text": "and instead of doing this from a cli let's do this from the ui",
    "start": "1440080",
    "end": "1448159"
  },
  {
    "start": "1443000",
    "end": "1468000"
  },
  {
    "text": "so this is the development ui that we have talked about",
    "start": "1448159",
    "end": "1455520"
  },
  {
    "text": "as you can see this is a high-level view of the cluster that we have created",
    "start": "1455520",
    "end": "1462640"
  },
  {
    "text": "let's go and try to create a new test definition using ecs anywhere one thing that is",
    "start": "1462640",
    "end": "1469679"
  },
  {
    "start": "1468000",
    "end": "1483000"
  },
  {
    "text": "important to note here is that there is a new compatibility as i was alluding to which is called",
    "start": "1469679",
    "end": "1475919"
  },
  {
    "text": "external in addition to fargate and dc2 so we're going to take this one",
    "start": "1475919",
    "end": "1482480"
  },
  {
    "text": "and let's move to the next step as you can see here the ui is very similar to the previous",
    "start": "1482480",
    "end": "1489760"
  },
  {
    "start": "1483000",
    "end": "1518000"
  },
  {
    "text": "one just for the sake of this demo and make things a little bit more agile we're going to configure these",
    "start": "1489760",
    "end": "1497360"
  },
  {
    "text": "via json and just paste the json that i discussed before",
    "start": "1497360",
    "end": "1505120"
  },
  {
    "text": "this is the same json that we had discussed so let's save and as you can see it has",
    "start": "1505120",
    "end": "1511840"
  },
  {
    "text": "filled everything in here and we will do create",
    "start": "1511840",
    "end": "1518480"
  },
  {
    "text": "all right so our task definition name is ecs worker external this is version 7 because there",
    "start": "1519360",
    "end": "1525600"
  },
  {
    "text": "are some other experiments that i've been running on this development environment i have",
    "start": "1525600",
    "end": "1531200"
  },
  {
    "text": "created previously other revisions that's it",
    "start": "1531200",
    "end": "1537039"
  },
  {
    "text": "as you can see it requires compatibility external the task execution role this is my",
    "start": "1537039",
    "end": "1544000"
  },
  {
    "text": "container that includes the very same application and this is the buy mount that i was",
    "start": "1544000",
    "end": "1549440"
  },
  {
    "text": "uploading to you before so before we launch this",
    "start": "1549440",
    "end": "1556000"
  },
  {
    "start": "1553000",
    "end": "1578000"
  },
  {
    "text": "let's go here and let's see that um i still have the the",
    "start": "1556000",
    "end": "1561760"
  },
  {
    "text": "watch docker ps running in here so what i'm expecting is that my",
    "start": "1561760",
    "end": "1567120"
  },
  {
    "text": "task and my container is going to land on either one of these two because ecs is going to pick one",
    "start": "1567120",
    "end": "1573679"
  },
  {
    "text": "instance where to run that new task so let's do this let's run this task as you can see",
    "start": "1573679",
    "end": "1582320"
  },
  {
    "start": "1578000",
    "end": "1608000"
  },
  {
    "text": "i'm going to choose external as the launch type this is a new thing that we're going to introduce when we",
    "start": "1582320",
    "end": "1588480"
  },
  {
    "text": "support and we genera make ecs anywhere generally",
    "start": "1588480",
    "end": "1593600"
  },
  {
    "text": "available we're going to deploy to the cluster that we call external and we're",
    "start": "1593600",
    "end": "1599600"
  },
  {
    "text": "just going to have one task for simplicity",
    "start": "1599600",
    "end": "1604720"
  },
  {
    "text": "we're going to run this task now okay the task has been created",
    "start": "1604720",
    "end": "1610840"
  },
  {
    "text": "successfully and it's impending",
    "start": "1610840",
    "end": "1616080"
  },
  {
    "text": "momentarily this task should be running on either one of these two",
    "start": "1620320",
    "end": "1627840"
  },
  {
    "text": "instances",
    "start": "1638840",
    "end": "1641840"
  },
  {
    "text": "there we go the task is now running on which instance we can figure out",
    "start": "1647919",
    "end": "1654960"
  },
  {
    "text": "okay on instance a um ecs um picked this uh instance",
    "start": "1654960",
    "end": "1662080"
  },
  {
    "text": "instance a to run this task and the task is up and running so",
    "start": "1662080",
    "end": "1669760"
  },
  {
    "text": "let's see if my application still works in this new environment so as i said i have",
    "start": "1669760",
    "end": "1678000"
  },
  {
    "text": "mounted this metro share under data in here and i have the same",
    "start": "1678000",
    "end": "1684880"
  },
  {
    "text": "thing um in here where i have this directory data which includes uh my",
    "start": "1684880",
    "end": "1693679"
  },
  {
    "text": "two folder destination folder and source folder let's see what we have in source",
    "start": "1693679",
    "end": "1700880"
  },
  {
    "text": "let's move into data let's see what we have in source nothing",
    "start": "1700880",
    "end": "1708960"
  },
  {
    "text": "and destination and we have a few files that we have",
    "start": "1708960",
    "end": "1714480"
  },
  {
    "text": "been playing uh around before uh that's fine",
    "start": "1714480",
    "end": "1720080"
  },
  {
    "text": "so what i'm going to do now um instead of watching uh docker ps i'm actually going to",
    "start": "1720080",
    "end": "1727600"
  },
  {
    "text": "watch uh the source folder here",
    "start": "1727600",
    "end": "1732240"
  },
  {
    "text": "like this and i'm going to create a few files from here",
    "start": "1734720",
    "end": "1741440"
  },
  {
    "text": "because remember this is the very same folder so i'm going to do",
    "start": "1742320",
    "end": "1748960"
  },
  {
    "text": "sudo touch zero zero um let's say h",
    "start": "1749360",
    "end": "1756880"
  },
  {
    "text": "or let's say one two three four",
    "start": "1756880",
    "end": "1763919"
  },
  {
    "text": "and five similar to how we did in the region",
    "start": "1763919",
    "end": "1769520"
  },
  {
    "text": "oh i created them in here so let's should go",
    "start": "1772559",
    "end": "1779279"
  },
  {
    "text": "in this other",
    "start": "1779279",
    "end": "1782159"
  },
  {
    "text": "sorry about that okay as you can see we have uh we're",
    "start": "1790799",
    "end": "1797200"
  },
  {
    "text": "watching that folder similarly we're actually now going to watch",
    "start": "1797200",
    "end": "1802240"
  },
  {
    "text": "uh these um uh destination folder on these",
    "start": "1802240",
    "end": "1810640"
  },
  {
    "text": "on this uh instance these are the previously",
    "start": "1810640",
    "end": "1818240"
  },
  {
    "text": "processed in another tests that i've done",
    "start": "1818480",
    "end": "1823840"
  },
  {
    "text": "now what we're going to do is we're going to switch to again the sqsq",
    "start": "1824000",
    "end": "1832240"
  },
  {
    "text": "and we're going to enter again those messages zero zero one two three",
    "start": "1832240",
    "end": "1838240"
  },
  {
    "text": "four and five",
    "start": "1838240",
    "end": "1841360"
  },
  {
    "text": "four and five so if we go back",
    "start": "1848840",
    "end": "1854960"
  },
  {
    "start": "1853000",
    "end": "1888000"
  },
  {
    "text": "here what you should see is that these files are moving from the source",
    "start": "1854960",
    "end": "1861039"
  },
  {
    "text": "folder into the destination folder and as you can see they're moving um there is a delay in the application",
    "start": "1861039",
    "end": "1868960"
  },
  {
    "text": "to wait 10 seconds before moving to the next one just to give a little bit more",
    "start": "1868960",
    "end": "1874720"
  },
  {
    "text": "time to show this but as you can see these files are being processed",
    "start": "1874720",
    "end": "1880320"
  },
  {
    "text": "by the application again running on-prem this time talking to the same sqs queue",
    "start": "1880320",
    "end": "1886799"
  },
  {
    "text": "in the cloud and logging in the same cloud watch so",
    "start": "1886799",
    "end": "1893840"
  },
  {
    "start": "1888000",
    "end": "1923000"
  },
  {
    "text": "this is the log i should see now um in external",
    "start": "1893840",
    "end": "1900960"
  },
  {
    "text": "here you go this is the one that we are that we have just created um and if i",
    "start": "1900960",
    "end": "1907039"
  },
  {
    "text": "look at here i see the very same login that um i used to have in the",
    "start": "1907039",
    "end": "1915360"
  },
  {
    "text": "with the in the region deployment so this log has been generated as we speak",
    "start": "1915360",
    "end": "1920480"
  },
  {
    "text": "uh by that application running on prime so this concludes our demo the last",
    "start": "1920480",
    "end": "1927840"
  },
  {
    "start": "1923000",
    "end": "1963000"
  },
  {
    "text": "thing that i wanted to show you just um as a bonus before we uh",
    "start": "1927840",
    "end": "1933039"
  },
  {
    "text": "close down are the instances that i've been using to run this demo on prime",
    "start": "1933039",
    "end": "1940799"
  },
  {
    "text": "and what i've been using here is a couple of raspberry pi's just to give you a feeling of the",
    "start": "1940799",
    "end": "1947519"
  },
  {
    "text": "flexibility that this on-prem deployment may give you when we make it generally",
    "start": "1947519",
    "end": "1953440"
  },
  {
    "text": "available we don't really care about the type of infrastructure what we care is the operating system that you're",
    "start": "1953440",
    "end": "1960320"
  },
  {
    "text": "running and whether or not it's going to be uh supported so these are actually to the two raspberry pi's that",
    "start": "1960320",
    "end": "1967120"
  },
  {
    "start": "1963000",
    "end": "2000000"
  },
  {
    "text": "i've been using um to um to deploy my tasks uh one thing to note is that i didn't",
    "start": "1967120",
    "end": "1974000"
  },
  {
    "text": "even bother to connect them to my local network i just connected them via wireless",
    "start": "1974000",
    "end": "1979519"
  },
  {
    "text": "so that task that you have seen running um and pulling from sqs and pull and",
    "start": "1979519",
    "end": "1985279"
  },
  {
    "text": "pushing into cloud watch um it has been running on either one of these two raspberry pi's",
    "start": "1985279",
    "end": "1990960"
  },
  {
    "text": "via wireless that's that's that's the thing uh",
    "start": "1990960",
    "end": "1996159"
  },
  {
    "text": "thanks for watching and looking forward to hear what you think about this integration",
    "start": "1996159",
    "end": "2002799"
  }
]