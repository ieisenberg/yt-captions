[
  {
    "text": "this talk is going to be a little bit different than the others let me show",
    "start": "4490",
    "end": "9900"
  },
  {
    "text": "you my slide show real quick I have one two three four slides amazing right so",
    "start": "9900",
    "end": "17420"
  },
  {
    "text": "we're going to take a look at how to optimize and secure containers and we're",
    "start": "17420",
    "end": "25470"
  },
  {
    "text": "going to try and do that by being as hands-on as possible so I'm gonna",
    "start": "25470",
    "end": "31349"
  },
  {
    "text": "probably fumble a lot at the keyboard and mess things up and you're gonna hopefully see just kind of the thought",
    "start": "31349",
    "end": "39570"
  },
  {
    "text": "process behind you know someone that would be trying to optimize their",
    "start": "39570",
    "end": "46350"
  },
  {
    "text": "container or the thought process when securing a container there's this isn't",
    "start": "46350",
    "end": "51899"
  },
  {
    "text": "a complete exhaustive list of things to do this is just you know some ideas of",
    "start": "51899",
    "end": "59129"
  },
  {
    "text": "things to take a look at and you would couple these with other ideas to look at we've mentioned a few in earlier talks",
    "start": "59129",
    "end": "66900"
  },
  {
    "text": "already let me pull up the environment for this real quick",
    "start": "66900",
    "end": "73579"
  },
  {
    "text": "okay well that's coming up let's do the slideshow okay live demo done already",
    "start": "106660",
    "end": "117800"
  },
  {
    "text": "done no I wanted you to we're gonna go back and we're gonna do the demo but I wanted you to see that this is all",
    "start": "117800",
    "end": "125210"
  },
  {
    "text": "already out on github so you can you don't have to follow it along right now",
    "start": "125210",
    "end": "131320"
  },
  {
    "text": "but have this look at it later and you",
    "start": "131320",
    "end": "136640"
  },
  {
    "text": "know try some stuff out on your own everything I'm gonna do I'm gonna do right off this page right off this",
    "start": "136640",
    "end": "143420"
  },
  {
    "text": "readme so you're gonna be able to do it yourself if you if you want to do I have",
    "start": "143420",
    "end": "152959"
  },
  {
    "text": "two sets of tabs going is that why this is confusing looking yes",
    "start": "152959",
    "end": "160390"
  },
  {
    "text": "all right so I mentioned it in the last the last",
    "start": "169870",
    "end": "177760"
  },
  {
    "text": "session but container scanning is today",
    "start": "177760",
    "end": "183609"
  },
  {
    "text": "almost a bare minimum you should definitely build if you building your",
    "start": "183609",
    "end": "189040"
  },
  {
    "text": "container with a CI CD pipeline there's really no reason for you to not include",
    "start": "189040",
    "end": "194709"
  },
  {
    "text": "a step in that CI process that does a container scan to see if you're if",
    "start": "194709",
    "end": "200290"
  },
  {
    "text": "you're bundling in any vulnerabilities so what I'm gonna do here is demonstrate",
    "start": "200290",
    "end": "207010"
  },
  {
    "text": "a couple of different containers and a couple of different operating systems",
    "start": "207010",
    "end": "212560"
  },
  {
    "text": "and we're just gonna kind of sit here and and figure out you know like what",
    "start": "212560",
    "end": "218469"
  },
  {
    "text": "are the options to make the whole situation better so I have a docker file",
    "start": "218469",
    "end": "225150"
  },
  {
    "text": "and if we start off if you've never built a docker image the docker file is",
    "start": "225150",
    "end": "232540"
  },
  {
    "text": "the description of how to build a docker image and you might first approach it as",
    "start": "232540",
    "end": "237989"
  },
  {
    "text": "building a server right so I'm going to if I think if I think about you know I'm",
    "start": "237989",
    "end": "243280"
  },
  {
    "text": "gonna launch some code right that's the ultimate goal run this code so let's back up from that",
    "start": "243280",
    "end": "249010"
  },
  {
    "text": "and let's figure out what has to happen from building a server I might be starting off with you know like some",
    "start": "249010",
    "end": "255250"
  },
  {
    "text": "version of CentOS and so I start off with a version of CentOS what do I need",
    "start": "255250",
    "end": "261430"
  },
  {
    "text": "to do to that server to be able to make it so that I can execute my code so the",
    "start": "261430",
    "end": "268120"
  },
  {
    "text": "first thing I might need to do is install if it's by the way my code is no",
    "start": "268120",
    "end": "273250"
  },
  {
    "text": "js' so I might need to install Apple release because that's how I then am",
    "start": "273250",
    "end": "278590"
  },
  {
    "text": "able to install node.js and nodejs npm",
    "start": "278590",
    "end": "283830"
  },
  {
    "text": "so after that I would probably want my direct my code to live inside its own",
    "start": "283830",
    "end": "288849"
  },
  {
    "text": "directory so I build user source app and then copy hopefully you can see that dot",
    "start": "288849",
    "end": "295419"
  },
  {
    "text": "dot that's from and - so copy from my current working directory into user",
    "start": "295419",
    "end": "303130"
  },
  {
    "text": "source app and then run NPM and stall and then I should be able to",
    "start": "303130",
    "end": "308900"
  },
  {
    "text": "execute my code so those are the basic steps involved when building a server to",
    "start": "308900",
    "end": "316250"
  },
  {
    "text": "run this code right let's just do this let's build this docker file so if I",
    "start": "316250",
    "end": "324200"
  },
  {
    "text": "want to build the docker file I would use the docker build command I'm going",
    "start": "324200",
    "end": "332060"
  },
  {
    "text": "to close this so we have a little bit more room so docker build past it a file",
    "start": "332060",
    "end": "338870"
  },
  {
    "text": "name and I'm passing it docker file Cintas original and then - T I'm giving",
    "start": "338870",
    "end": "347060"
  },
  {
    "text": "it a tag and the tag I'm giving it is basically the all of the information so",
    "start": "347060",
    "end": "353840"
  },
  {
    "text": "that it knows how to push into my ECR repository so I'm pushing this into my",
    "start": "353840",
    "end": "360800"
  },
  {
    "text": "ECR registry called sample app and giving it a tag in that registry called",
    "start": "360800",
    "end": "365840"
  },
  {
    "text": "CentOS original and you can see step by step I started with Santos I ran yum",
    "start": "365840",
    "end": "372919"
  },
  {
    "text": "install Iran yum install four nodejs and npm then set a work directory copied",
    "start": "372919",
    "end": "381350"
  },
  {
    "text": "over my application ran npm install and it installed all of the dependencies for",
    "start": "381350",
    "end": "387590"
  },
  {
    "text": "my application expose 3000 set the entry point and i'm good to go",
    "start": "387590",
    "end": "393520"
  },
  {
    "text": "does it work let's try it out let's see so the next thing i might want to do is",
    "start": "393520",
    "end": "401780"
  },
  {
    "text": "docker run it so here's a docker run command where I'm running my application",
    "start": "401780",
    "end": "408110"
  },
  {
    "text": "hey it came up let's look at it and see let's hit preview preview running",
    "start": "408110",
    "end": "413479"
  },
  {
    "text": "application I wrote this for docker con by the way so you see hello docker con but hey it's working I'm getting logs",
    "start": "413479",
    "end": "420950"
  },
  {
    "text": "out on the Left I'm seeing my hello message I'm seeing the uptime change so bingo it works",
    "start": "420950",
    "end": "428690"
  },
  {
    "text": "that's really cool but how big is it",
    "start": "428690",
    "end": "436150"
  },
  {
    "text": "so this application this nodejs app and all of its dependencies is 454",
    "start": "437980",
    "end": "444770"
  },
  {
    "text": "megabytes also what's inside of this",
    "start": "444770",
    "end": "450320"
  },
  {
    "text": "container let's explore inside one second if I do",
    "start": "450320",
    "end": "463130"
  },
  {
    "text": "an LS now by the way I've launched the container but not the application and",
    "start": "463130",
    "end": "468200"
  },
  {
    "text": "I've just launched a shell instead so if I look inside the container at user bin",
    "start": "468200",
    "end": "476830"
  },
  {
    "text": "there are 448 executables in here then I probably don't need now I probably need",
    "start": "477820",
    "end": "485330"
  },
  {
    "text": "user bin node that's in there I did need",
    "start": "485330",
    "end": "491360"
  },
  {
    "text": "user bin NPM I technically don't anymore",
    "start": "491360",
    "end": "496510"
  },
  {
    "text": "but it's in there but there are the other four hundred-plus application or",
    "start": "496510",
    "end": "502550"
  },
  {
    "text": "400 plus executables I probably don't need so remember earlier when I was",
    "start": "502550",
    "end": "507590"
  },
  {
    "text": "talking about you know that situation where an attacker might compromised my",
    "start": "507590",
    "end": "513140"
  },
  {
    "text": "application they end up in the environment that I executed it in they",
    "start": "513140",
    "end": "520250"
  },
  {
    "text": "would have all of this available to them to use to figure out to poke around to",
    "start": "520250",
    "end": "526040"
  },
  {
    "text": "explore and see what can they do what can they get out what can they wreak",
    "start": "526040",
    "end": "531350"
  },
  {
    "text": "havoc on do they have curl they don't have which they do have curl",
    "start": "531350",
    "end": "539960"
  },
  {
    "text": "so they can start curling out to other api's and they could potentially download anything else that they don't",
    "start": "539960",
    "end": "546140"
  },
  {
    "text": "have do they have W get no W get it",
    "start": "546140",
    "end": "551480"
  },
  {
    "text": "that's good but curl that's all you really need so from there they could download anything else that they need",
    "start": "551480",
    "end": "557750"
  },
  {
    "text": "and start executing that so it's a little bit scary right we want to try and avoid that situation we also would",
    "start": "557750",
    "end": "565250"
  },
  {
    "text": "like this container to be smaller how big is the application by itself so here's my directory there's",
    "start": "565250",
    "end": "574140"
  },
  {
    "text": "my node modules that are the the dependencies that I have I'm executing",
    "start": "574140",
    "end": "579180"
  },
  {
    "text": "server j/s and also package.json is describing the node modules so",
    "start": "579180",
    "end": "584880"
  },
  {
    "text": "altogether even adding in all this other stuff that's technically not part of my",
    "start": "584880",
    "end": "591420"
  },
  {
    "text": "app just this whole directory is 3.3 Meg's but I'm building a container that is 448",
    "start": "591420",
    "end": "600390"
  },
  {
    "text": "Meg's and size seems crazy right so don't do that what can we do to optimize",
    "start": "600390",
    "end": "608070"
  },
  {
    "text": "this let's take a look at the docker file again real quick can you see that",
    "start": "608070",
    "end": "615779"
  },
  {
    "text": "on the back by the way well enough sweet all right so I'll take volunteers look",
    "start": "615779",
    "end": "622500"
  },
  {
    "text": "at the docker file for a second and raise your hand and tell me what is something I can do to optimize this say",
    "start": "622500",
    "end": "633060"
  },
  {
    "text": "it louder multistage build I'll come back to you sir yes you're correct but",
    "start": "633060",
    "end": "639450"
  },
  {
    "text": "yes get rid of CentOS I like it anyone else copy just the package JSON before",
    "start": "639450",
    "end": "651810"
  },
  {
    "text": "so okay so let's look at a couple of those so let's start by just looking at",
    "start": "651810",
    "end": "658279"
  },
  {
    "text": "copying package JSON first why would I do this",
    "start": "658279",
    "end": "663450"
  },
  {
    "text": "well docker images are actually built in layers and this is where your knowledge",
    "start": "663450",
    "end": "668580"
  },
  {
    "text": "as a server administrator we're starting to depart from that and we're starting to think about docker specific behavior",
    "start": "668580",
    "end": "675779"
  },
  {
    "text": "so as a server administrator it's no process of instructions that we were",
    "start": "675779",
    "end": "682560"
  },
  {
    "text": "just looking at they were fine right no big deal to run yum install twice but in the docker world every time",
    "start": "682560",
    "end": "692430"
  },
  {
    "text": "I run a command in fact every time there's a line in this file that's a new layer in the image and what that means",
    "start": "692430",
    "end": "700050"
  },
  {
    "text": "is every that has happened up to that point is locked in and immutable and read-only",
    "start": "700050",
    "end": "706200"
  },
  {
    "text": "and can't be changed so imagine a file where I download a tar ball then in the",
    "start": "706200",
    "end": "713910"
  },
  {
    "text": "next line I decompress that tar ball then in the next line I run make then in",
    "start": "713910",
    "end": "720390"
  },
  {
    "text": "the next line I copy out my artifact the next line I delete all of the I do a",
    "start": "720390",
    "end": "727110"
  },
  {
    "text": "cleanup and delete everything and then I delete the tar ball that's a whole bunch of lines right and I would end up with",
    "start": "727110",
    "end": "734100"
  },
  {
    "text": "my artifact and it would all work but layer after layer after layer are just",
    "start": "734100",
    "end": "739200"
  },
  {
    "text": "added on top of each other so I would end up with this huge artifact that I would be shipping around docker specific",
    "start": "739200",
    "end": "748160"
  },
  {
    "text": "good practices would say let's do all of that in one line so in this in this",
    "start": "748160",
    "end": "754830"
  },
  {
    "text": "slightly improved CentOS file we're actually doing the yum install and the",
    "start": "754830",
    "end": "761610"
  },
  {
    "text": "npm install in one line one run command and we're doing line continuations for",
    "start": "761610",
    "end": "768960"
  },
  {
    "text": "readability sake so these are cut these are conditional executions if you don't",
    "start": "768960",
    "end": "774690"
  },
  {
    "text": "know bash and and means as long as the first command worked continue on and",
    "start": "774690",
    "end": "781140"
  },
  {
    "text": "execute the second command so as long as this young command worked I'm going to",
    "start": "781140",
    "end": "786360"
  },
  {
    "text": "go ahead and execute the second young-young command and as long as that one worked I'm gonna run npm install and if there's",
    "start": "786360",
    "end": "793440"
  },
  {
    "text": "ever a failure I'm gonna stop and then my container won't have successfully built so it's a good practice to sort of",
    "start": "793440",
    "end": "801180"
  },
  {
    "text": "build your docker files with this styling the other thing that was",
    "start": "801180",
    "end": "808590"
  },
  {
    "text": "mentioned was copy package JSON first again with docker were working in layers",
    "start": "808590",
    "end": "815550"
  },
  {
    "text": "a second behavior that you should be aware of is that any time we can these",
    "start": "815550",
    "end": "821370"
  },
  {
    "text": "layers get cached so if there's never a change in the layer then we will just",
    "start": "821370",
    "end": "828540"
  },
  {
    "text": "use the cached version so that can speed up docker builds so as",
    "start": "828540",
    "end": "833950"
  },
  {
    "text": "soon as we hit a layer that is not catchable or hasn't been cashed every",
    "start": "833950",
    "end": "840760"
  },
  {
    "text": "layer from starting there and going further down the cache is invalidated so",
    "start": "840760",
    "end": "847420"
  },
  {
    "text": "let's think from a workflow perspective what's going to be changing well package.json will change",
    "start": "847420",
    "end": "854650"
  },
  {
    "text": "occasionally but only when the developer adds a new library that they depend on",
    "start": "854650",
    "end": "860890"
  },
  {
    "text": "up until that point no need to change package.json so this is pretty cat",
    "start": "860890",
    "end": "866500"
  },
  {
    "text": "pretty catchable instant the the list of packages that's not gonna change very",
    "start": "866500",
    "end": "872290"
  },
  {
    "text": "often so it's pretty cacheable what will change my code why would I even build it",
    "start": "872290",
    "end": "879850"
  },
  {
    "text": "be building a new container if I haven't changed the code right if I haven't changed the code then whatever container",
    "start": "879850",
    "end": "886390"
  },
  {
    "text": "I've already built is probably just fine so this is what's going to change the most often so I want to put it as close",
    "start": "886390",
    "end": "893620"
  },
  {
    "text": "to the bottom as possible does that make sense because I want that that is a",
    "start": "893620",
    "end": "899050"
  },
  {
    "text": "layer that will always be invalidated so put it near the bottom at the bottom if",
    "start": "899050",
    "end": "904750"
  },
  {
    "text": "you can and then the last layer has to be the entry point the execution command",
    "start": "904750",
    "end": "910210"
  },
  {
    "text": "so it's at the bottom but doing this slightly optimized docker file let's",
    "start": "910210",
    "end": "917620"
  },
  {
    "text": "look and see what it turns out to look like where is my here we go CentOS image",
    "start": "917620",
    "end": "926320"
  },
  {
    "text": "we'll build it very cache by the way",
    "start": "926320",
    "end": "932280"
  },
  {
    "text": "which is awesome and then let's just look at the to compare it against each",
    "start": "932280",
    "end": "939220"
  },
  {
    "text": "other we go from you know same content same container same functionality but",
    "start": "939220",
    "end": "946050"
  },
  {
    "text": "slightly smaller 395 megabytes in size so someone else",
    "start": "946050",
    "end": "952720"
  },
  {
    "text": "you know when rattling off optimizations what else could we do get rid of CentOS",
    "start": "952720",
    "end": "958440"
  },
  {
    "text": "did anywho what do you suggest we use",
    "start": "958440",
    "end": "964290"
  },
  {
    "text": "Alpine what else did you say scratch I like that so yeah",
    "start": "965870",
    "end": "972000"
  },
  {
    "text": "so using Alpine we talked about Alpine in the micro VM we we referred to it but",
    "start": "972000",
    "end": "977010"
  },
  {
    "text": "we didn't get into what it really is it's a very very tiny Linux in fact the base docker image for it is four",
    "start": "977010",
    "end": "983520"
  },
  {
    "text": "megabytes in size so that's an option for us and in fact I have a docker Alpine docker file but one of the things",
    "start": "983520",
    "end": "993510"
  },
  {
    "text": "that you'll need to be aware of is it doesn't use yum so you can't just simply copy over and switch the from line right",
    "start": "993510",
    "end": "1002090"
  },
  {
    "text": "you'll have to actually change the package commands it uses a PK and",
    "start": "1002090",
    "end": "1008450"
  },
  {
    "text": "instead of yum install it's a PK ad but those are subtle differences they're",
    "start": "1008450",
    "end": "1014360"
  },
  {
    "text": "easy changes to make especially once you get used to it so if we try that out and by the way a",
    "start": "1014360",
    "end": "1020900"
  },
  {
    "text": "lot of people like Debian and so I I can sense from the audience that some of you",
    "start": "1020900",
    "end": "1026360"
  },
  {
    "text": "are thinking oh well Debian wouldn't be that big so actually I think I have oh I",
    "start": "1026360",
    "end": "1033170"
  },
  {
    "text": "don't never mind I thought I had it there's a debian Jessie one I thought I",
    "start": "1033170",
    "end": "1038300"
  },
  {
    "text": "had it Jessie image let's build",
    "start": "1038300",
    "end": "1046089"
  },
  {
    "text": "Jessey real quick and then see how big that turned out to be",
    "start": "1047079",
    "end": "1054899"
  },
  {
    "text": "I don't want to give too much away too quickly so Debian 297 still pretty huge",
    "start": "1067480",
    "end": "1076389"
  },
  {
    "text": "for a three mag app but you're starting to see the idea now does anyone ever use",
    "start": "1076389",
    "end": "1083820"
  },
  {
    "text": "Debian slim no all right cool you skip",
    "start": "1083820",
    "end": "1089649"
  },
  {
    "text": "straight to alpine I get it oh that was slim never mind",
    "start": "1089649",
    "end": "1097690"
  },
  {
    "text": "so Debian would have been worse if memory serves me but there is a slim",
    "start": "1097690",
    "end": "1103419"
  },
  {
    "text": "version but you see slim is still not not awesome then there's Alpine alright",
    "start": "1103419",
    "end": "1111490"
  },
  {
    "text": "the good stuff right so let's talk or build Alpine and then let's look to see",
    "start": "1111490",
    "end": "1119529"
  },
  {
    "text": "how does it compare with CentOS in fact let me do this at the top of the screen",
    "start": "1119529",
    "end": "1127080"
  },
  {
    "text": "42 Meg's it's quite a bit of savings that's actually really good and I know",
    "start": "1127139",
    "end": "1132669"
  },
  {
    "text": "that if I spent a little bit more time I could probably get this down even further for example if I were gonna be",
    "start": "1132669",
    "end": "1139960"
  },
  {
    "text": "super fancy I would make sure that when I apk install I would get rid of the",
    "start": "1139960",
    "end": "1146559"
  },
  {
    "text": "package metadata after I'm done with it also ultra fancy I actually don't need",
    "start": "1146559",
    "end": "1153549"
  },
  {
    "text": "the NPM command once I've used it so in my compound commands I would install it",
    "start": "1153549",
    "end": "1159010"
  },
  {
    "text": "run it then delete it all in the same line that's really fancy so these are",
    "start": "1159010",
    "end": "1165909"
  },
  {
    "text": "all you know very cool options that you can use but ultimately you're still going to have a you know respectable",
    "start": "1165909",
    "end": "1173559"
  },
  {
    "text": "sized container now let's take a look at what's inside of the alpine container if",
    "start": "1173559",
    "end": "1180970"
  },
  {
    "text": "I Oh let's first let's check to see that it works because that's the other critical",
    "start": "1180970",
    "end": "1186669"
  },
  {
    "text": "piece of all of this is if your code doesn't actually run then it's kind of",
    "start": "1186669",
    "end": "1192370"
  },
  {
    "text": "not worth the effort right so it came up it's listening on port 8080 preview",
    "start": "1192370",
    "end": "1199809"
  },
  {
    "text": "boom I'm up and refreshing and working",
    "start": "1199809",
    "end": "1205119"
  },
  {
    "text": "very cool kill now let's look at what's",
    "start": "1205119",
    "end": "1220960"
  },
  {
    "text": "inside of it docker Alpine here we go so this is the",
    "start": "1220960",
    "end": "1228369"
  },
  {
    "text": "same command as before just against the Alpine image when I look inside user bin",
    "start": "1228369",
    "end": "1235839"
  },
  {
    "text": "and I'm picking on user bin but there's a lot of stuff to explore here there's",
    "start": "1235839",
    "end": "1240909"
  },
  {
    "text": "still a whole lot of stuff in here only 177 things but there are things here and",
    "start": "1240909",
    "end": "1247839"
  },
  {
    "text": "by the way side note one of the ways Alpine is so small is because everything",
    "start": "1247839",
    "end": "1256450"
  },
  {
    "text": "inside all of the commands are linked to the same executable busybox",
    "start": "1256450",
    "end": "1261609"
  },
  {
    "text": "so we have busybox in the command in the container emulating the functionality of",
    "start": "1261609",
    "end": "1268210"
  },
  {
    "text": "all of these other commands now if you've ever done this or used busybox",
    "start": "1268210",
    "end": "1276460"
  },
  {
    "text": "for anything you'll know that it does a great job at emulating all these",
    "start": "1276460",
    "end": "1281649"
  },
  {
    "text": "commands but it's not a perfect job at emulating all these commands second",
    "start": "1281649",
    "end": "1286979"
  },
  {
    "text": "alpine is compiled against not G Lib C but muscle so it's a smaller library",
    "start": "1286979",
    "end": "1296289"
  },
  {
    "text": "that's used it gives smaller images and probably 90% of the time it's perfectly",
    "start": "1296289",
    "end": "1303820"
  },
  {
    "text": "fine but you'll occasionally see behavior that's subtly different than",
    "start": "1303820",
    "end": "1309700"
  },
  {
    "text": "when your application is compiled with G Lib C one example that I've run into is",
    "start": "1309700",
    "end": "1315969"
  },
  {
    "text": "DNS resolution we were we at the security company I worked for we",
    "start": "1315969",
    "end": "1322450"
  },
  {
    "text": "actually were mapping and tracking DNS data and when I put our application into",
    "start": "1322450",
    "end": "1329570"
  },
  {
    "text": "Alpine the way it was doing DNS resolution was far more generic and we",
    "start": "1329570",
    "end": "1335780"
  },
  {
    "text": "it wasn't as controllable as our application needed it to be against a",
    "start": "1335780",
    "end": "1341240"
  },
  {
    "text": "GFC compiled environment it was perfectly fine so be aware of that these",
    "start": "1341240",
    "end": "1348560"
  },
  {
    "text": "subtle differences could end up costing you some time and also the environment",
    "start": "1348560",
    "end": "1355250"
  },
  {
    "text": "itself still has some vulnerabilities that could be explored just by virtue of",
    "start": "1355250",
    "end": "1361370"
  },
  {
    "text": "having busybox there I don't see a curl and I don't see aw get oh there is w get",
    "start": "1361370",
    "end": "1370990"
  },
  {
    "text": "so I could still download and run other",
    "start": "1370990",
    "end": "1376580"
  },
  {
    "text": "other artifacts if I break into this container I can use W get to download",
    "start": "1376580",
    "end": "1381920"
  },
  {
    "text": "additional resources that I need to continue to hack on whatever it is I'm",
    "start": "1381920",
    "end": "1388490"
  },
  {
    "text": "trying to attack so this is bad right let's stop for a second and let's go",
    "start": "1388490",
    "end": "1395000"
  },
  {
    "text": "back and talk about container scanning so I keep talking in terms of you know",
    "start": "1395000",
    "end": "1400430"
  },
  {
    "text": "my containers compromised but how did it get to be compromised these are typically exploits of vulnerabilities so",
    "start": "1400430",
    "end": "1410150"
  },
  {
    "text": "let's scan for some vulnerabilities on these containers let me refresh this environment real quick just to make sure",
    "start": "1410150",
    "end": "1418700"
  },
  {
    "text": "things are working",
    "start": "1418700",
    "end": "1421450"
  },
  {
    "text": "so I have to container scanners running right now one is Claire and the other is",
    "start": "1424380",
    "end": "1429480"
  },
  {
    "text": "Angkor a and CH o ar e both are open source Claire is put out by the core OS",
    "start": "1429480",
    "end": "1437940"
  },
  {
    "text": "team and is totally open source as in they don't have any additional offerings",
    "start": "1437940",
    "end": "1445070"
  },
  {
    "text": "Angkor is similar functionality is the same in their open source product but",
    "start": "1445070",
    "end": "1452039"
  },
  {
    "text": "then they also offer a supported SAS offering and a dashboard and control",
    "start": "1452039",
    "end": "1458820"
  },
  {
    "text": "panel so if you feel like paying someone to do this for you they have that available to them as well",
    "start": "1458820",
    "end": "1464429"
  },
  {
    "text": "both are worth exploring but let's look at what what it looks like to scan or to",
    "start": "1464429",
    "end": "1472010"
  },
  {
    "text": "use one of these scanners both of them need the the image pushed into a",
    "start": "1472010",
    "end": "1480150"
  },
  {
    "text": "registry so let's push the Cintas image into e CR one second let me login to e",
    "start": "1480150",
    "end": "1490409"
  },
  {
    "text": "CR",
    "start": "1490409",
    "end": "1492740"
  },
  {
    "text": "okay so that's pushed and then let's scan with Claire",
    "start": "1497230",
    "end": "1503799"
  },
  {
    "text": "by the way Claire there's a command-line utility called car uh-huh that you can",
    "start": "1503799",
    "end": "1509830"
  },
  {
    "text": "use to talk to the Claire API so I'm simply going to run klar and then pass",
    "start": "1509830",
    "end": "1515620"
  },
  {
    "text": "it the image that I want to scan and it's going to sit there and work to scan",
    "start": "1515620",
    "end": "1522519"
  },
  {
    "text": "the Cintas image and it's going to take you know a few seconds and then return",
    "start": "1522519",
    "end": "1528639"
  },
  {
    "text": "back a result so think about it in terms of a CI pipeline this would just be one",
    "start": "1528639",
    "end": "1534789"
  },
  {
    "text": "step in the pipeline right and depending on the output found zero vulnerabilities",
    "start": "1534789",
    "end": "1541080"
  },
  {
    "text": "echo dollar question mark that's success right so continue on with the pipeline",
    "start": "1541080",
    "end": "1548169"
  },
  {
    "text": "let's scan the original Cintas file that",
    "start": "1548169",
    "end": "1554860"
  },
  {
    "text": "one I forgot to push the updated image but you get the idea echo dollar question mark failure right",
    "start": "1554860",
    "end": "1562840"
  },
  {
    "text": "so this would fail the pipeline because there are vulnerabilities that occurred",
    "start": "1562840",
    "end": "1568059"
  },
  {
    "text": "and I could look back through the CI build history and I could see all this output I'm gonna run it again just so we",
    "start": "1568059",
    "end": "1576610"
  },
  {
    "text": "can see the top of it there were 39 vulnerabilities 11 of them high 23",
    "start": "1576610",
    "end": "1584830"
  },
  {
    "text": "medium and 5 low by the way side note I",
    "start": "1584830",
    "end": "1589899"
  },
  {
    "text": "did this on purpose I used an old version of CentOS to be able to get these vulnerabilities in the in the",
    "start": "1589899",
    "end": "1598019"
  },
  {
    "text": "modified optimized CentOS docker file I just used latest and latest obviously",
    "start": "1598019",
    "end": "1604929"
  },
  {
    "text": "has been updated let's do the same thing for what else did we build we built",
    "start": "1604929",
    "end": "1613799"
  },
  {
    "text": "Alpine sent all let's do it for alpine oh yeah let's compare actually using",
    "start": "1613799",
    "end": "1624880"
  },
  {
    "text": "Angkor",
    "start": "1624880",
    "end": "1627299"
  },
  {
    "text": "do I not have the command for that",
    "start": "1631610",
    "end": "1635500"
  },
  {
    "text": "oops okay so anchor CLI same ideas klar",
    "start": "1654870",
    "end": "1662710"
  },
  {
    "text": "just subtly different we're going to scan the CentOS original image and the",
    "start": "1662710",
    "end": "1673420"
  },
  {
    "text": "API call that we're making is going to be image I believe ad so this is a",
    "start": "1673420",
    "end": "1683440"
  },
  {
    "text": "different behavior this particular scanner doesn't block and wait I just submitted it and it took it and it's",
    "start": "1683440",
    "end": "1690070"
  },
  {
    "text": "like okay I'm gonna go off and work so there's a separate wait option API call",
    "start": "1690070",
    "end": "1697330"
  },
  {
    "text": "and you'd want to use that in your CI process and it has already completed and",
    "start": "1697330",
    "end": "1707400"
  },
  {
    "text": "so then I can you see I thought I had",
    "start": "1707400",
    "end": "1714580"
  },
  {
    "text": "this in here I guess not",
    "start": "1714580",
    "end": "1719880"
  },
  {
    "text": "I can pull up the vulnerabilities with image phone and look at CentOS original",
    "start": "1725100",
    "end": "1738919"
  },
  {
    "text": "if I type it correctly",
    "start": "1739340",
    "end": "1743179"
  },
  {
    "text": "there we go so just like Claire it out put the list of CDEs that that this",
    "start": "1751950",
    "end": "1759059"
  },
  {
    "text": "container includes a slightly different format slightly different way to consume",
    "start": "1759059",
    "end": "1766350"
  },
  {
    "text": "it no real description or anything like that but links so that's kind of handy",
    "start": "1766350",
    "end": "1771809"
  },
  {
    "text": "and again if I word count I get 40 lines",
    "start": "1771809",
    "end": "1777000"
  },
  {
    "text": "there might have been like one header so 39 issue owner abilities just like Claire so pretty cool let's do it for",
    "start": "1777000",
    "end": "1786210"
  },
  {
    "text": "alpine let's do klar first",
    "start": "1786210",
    "end": "1794360"
  },
  {
    "text": "zero vulnerabilities but let's do it",
    "start": "1804090",
    "end": "1809920"
  },
  {
    "text": "again with Angkor",
    "start": "1809920",
    "end": "1813270"
  },
  {
    "text": "Angkor was actually able to find vulnerabilities and show them to me so I",
    "start": "1828260",
    "end": "1834190"
  },
  {
    "text": "wanted to show you this to show you that not every scanner behaves the same",
    "start": "1834190",
    "end": "1840850"
  },
  {
    "text": "definitely if if you get this especially with the open-source scanners being",
    "start": "1840850",
    "end": "1846500"
  },
  {
    "text": "available if you get this built into your pipeline consider using more than one right there are many to choose from",
    "start": "1846500",
    "end": "1853790"
  },
  {
    "text": "now and everyone operates their own database of vulnerabilities and so it",
    "start": "1853790",
    "end": "1860720"
  },
  {
    "text": "might be good to actually run this through two or three or even four and",
    "start": "1860720",
    "end": "1866380"
  },
  {
    "text": "since it's all automated it shouldn't really hurt you much it'll increase your build time a little bit but that might",
    "start": "1866380",
    "end": "1875150"
  },
  {
    "text": "be worth the effort especially in a situation like this where one of them",
    "start": "1875150",
    "end": "1880309"
  },
  {
    "text": "shows you quite a few vulnerabilities and the other one shows you that everything is fine so 17c v's listed",
    "start": "1880309",
    "end": "1890590"
  },
  {
    "text": "even better would be if you on top of",
    "start": "1890590",
    "end": "1895790"
  },
  {
    "text": "doing all of this don't have things in your container that you don't need right",
    "start": "1895790",
    "end": "1901549"
  },
  {
    "text": "and so that's actually where this other project came about from it's called",
    "start": "1901549",
    "end": "1908150"
  },
  {
    "text": "distro --less it's a project that Google started and right now it only supports",
    "start": "1908150",
    "end": "1913549"
  },
  {
    "text": "certain languages Java is one of them by the way I know there's a lot of Java people here so you can actually build a",
    "start": "1913549",
    "end": "1922340"
  },
  {
    "text": "distro list container and then let's in fact let's do that and then we'll do",
    "start": "1922340",
    "end": "1930049"
  },
  {
    "text": "this kind of same process and see what we have available to us so that was",
    "start": "1930049",
    "end": "1935450"
  },
  {
    "text": "built let's confirm that it works in",
    "start": "1935450",
    "end": "1940610"
  },
  {
    "text": "fact it's listening on port 80 so that's awesome preview works exactly the way it",
    "start": "1940610",
    "end": "1948650"
  },
  {
    "text": "should any guesses as to how big this container is going to end up being",
    "start": "1948650",
    "end": "1955059"
  },
  {
    "text": "53.3 I like the way you guys think very",
    "start": "1958300",
    "end": "1964820"
  },
  {
    "text": "optimistic distro Ellis actually came in bigger than Alpine seventy four point",
    "start": "1964820",
    "end": "1971090"
  },
  {
    "text": "three but let's take a look at what's inside if we explore the distro this",
    "start": "1971090",
    "end": "1980300"
  },
  {
    "text": "image the way I was exploring I was",
    "start": "1980300",
    "end": "1985310"
  },
  {
    "text": "trying to execute the shell there is no show pretty cool huh",
    "start": "1985310",
    "end": "1991070"
  },
  {
    "text": "now there's a debug mode for distro list so if let me rebuild the container and",
    "start": "1991070",
    "end": "1996260"
  },
  {
    "text": "oh by the way whoever mentioned earlier for optimizing doing a multi-stage build",
    "start": "1996260",
    "end": "2001810"
  },
  {
    "text": "you have to do a multi-stage build for distro list so let's look real quick I'm actually starting off with CentOS",
    "start": "2001810",
    "end": "2008500"
  },
  {
    "text": "because it's huge I'm using latest but I'm setting it to",
    "start": "2008500",
    "end": "2014050"
  },
  {
    "text": "be just my build environment then I do the same stuff I was doing in that CentOS docker file where I'm installing",
    "start": "2014050",
    "end": "2021040"
  },
  {
    "text": "stuff with young and then doing the NPM installed and copying over the code all",
    "start": "2021040",
    "end": "2026440"
  },
  {
    "text": "that's the same except I then throw all that away well I don't then throw it all",
    "start": "2026440",
    "end": "2032590"
  },
  {
    "text": "the way but I'm ready to throw it all away and I copy from that image build in",
    "start": "2032590",
    "end": "2039990"
  },
  {
    "text": "just user source app and I drop it into user source app in this container and",
    "start": "2039990",
    "end": "2047980"
  },
  {
    "text": "that's all there is so then I execute no jsbin node server j/s done so I don't",
    "start": "2047980",
    "end": "2058240"
  },
  {
    "text": "have a shell in here but occasionally you might want to troubleshoot something look let me actually see what's inside",
    "start": "2058240",
    "end": "2064659"
  },
  {
    "text": "so if I add on the debug tag and then",
    "start": "2064660",
    "end": "2071919"
  },
  {
    "text": "build distro 'less again",
    "start": "2071920",
    "end": "2076200"
  },
  {
    "text": "the build environment was cached so I didn't have to wait for all that to download again I just read down loaded",
    "start": "2077790",
    "end": "2085600"
  },
  {
    "text": "the distro list stuff but it's pretty small and if I look inside now now I",
    "start": "2085600",
    "end": "2094330"
  },
  {
    "text": "actually do get a shell and if I look at user bin I have a few things I have not",
    "start": "2094330",
    "end": "2106030"
  },
  {
    "text": "as many as the Alpine image and in fact if I go to slash bin nothing",
    "start": "2106030",
    "end": "2115500"
  },
  {
    "text": "in fact busybox busybox is there but all",
    "start": "2115500",
    "end": "2121690"
  },
  {
    "text": "of the linking is not set up so you can imagine that if this were compromised",
    "start": "2121690",
    "end": "2128440"
  },
  {
    "text": "the script Kitty might actually not discover that they could they could call",
    "start": "2128440",
    "end": "2134710"
  },
  {
    "text": "some of this and use it because they're looking for W get or curl or something like that and they're not necessarily",
    "start": "2134710",
    "end": "2141070"
  },
  {
    "text": "looking for just straight-up busybox that said if you want to guard against",
    "start": "2141070",
    "end": "2146770"
  },
  {
    "text": "that don't run the container in debug mode take that out and don't even have",
    "start": "2146770",
    "end": "2153730"
  },
  {
    "text": "busybox in your in your environment so without debug mode save build",
    "start": "2153730",
    "end": "2169800"
  },
  {
    "text": "run nothing it's pretty cool the other",
    "start": "2170220",
    "end": "2176400"
  },
  {
    "text": "advantage that distro Ellis has is is and the reason it's bigger than Alpine is that it is compiled against G Lib C",
    "start": "2176400",
    "end": "2182520"
  },
  {
    "text": "so the weird Muscle behavior that you might occasionally discover won't be a",
    "start": "2182520",
    "end": "2189750"
  },
  {
    "text": "problem with this type of base image so definitely check it out we also in the",
    "start": "2189750",
    "end": "2196860"
  },
  {
    "text": "last session alluded to or talked about dropping to an unprivileged user you can",
    "start": "2196860",
    "end": "2203610"
  },
  {
    "text": "still do that definitely do that and we also talked about wrapping your",
    "start": "2203610",
    "end": "2208920"
  },
  {
    "text": "container you know with the appropriate IAM policy so obviously do that these",
    "start": "2208920",
    "end": "2214980"
  },
  {
    "text": "are all layers of security that you can add to your container you want to you",
    "start": "2214980",
    "end": "2220170"
  },
  {
    "text": "want to explore doing as many and all of them as you can so that if there ever is",
    "start": "2220170",
    "end": "2225450"
  },
  {
    "text": "a compromise there's just the next layer in the way you don't want it to just be a complete open door are there any",
    "start": "2225450",
    "end": "2234210"
  },
  {
    "text": "questions I think we have a little bit of time yes the question was are there",
    "start": "2234210",
    "end": "2244020"
  },
  {
    "text": "plans for ECR to scan your images directly I'm so glad you asked that because github.com github.com / AWS /",
    "start": "2244020",
    "end": "2258500"
  },
  {
    "text": "containers roadmap if you weren't in",
    "start": "2258500",
    "end": "2263550"
  },
  {
    "text": "here before this was something we unveiled yesterday last night so this is",
    "start": "2263550",
    "end": "2270240"
  },
  {
    "text": "my team's roadmap and it's what we're working on and what's coming soon and",
    "start": "2270240",
    "end": "2278810"
  },
  {
    "text": "what we've just shipped and coming soon",
    "start": "2278810",
    "end": "2284540"
  },
  {
    "text": "actually we're working on it II see our",
    "start": "2284540",
    "end": "2289770"
  },
  {
    "text": "image vulnerability scanning pretty cool huh so yeah this is coming one of the",
    "start": "2289770",
    "end": "2297210"
  },
  {
    "text": "things that was an underpinning that we needed by the way that you could build around if you want is",
    "start": "2297210",
    "end": "2303010"
  },
  {
    "text": "triggers for ECR so you guys know that lambda for example is all built around",
    "start": "2303010",
    "end": "2309880"
  },
  {
    "text": "triggers any kind of custom code that you want to execute in lambda you do it by that lambda reacting to a trigger now",
    "start": "2309880",
    "end": "2319780"
  },
  {
    "text": "the ECR has triggers you can build a lambda that can go kick off a scan you",
    "start": "2319780",
    "end": "2325900"
  },
  {
    "text": "could build a lambda that could kick off a Claire scan or an anchor scan or we",
    "start": "2325900",
    "end": "2332079"
  },
  {
    "text": "can build a service that does the same thing will trigger on your ECR push and",
    "start": "2332079",
    "end": "2338470"
  },
  {
    "text": "we'll kick off a scan for you so yeah all of that you can imagine you know being a possibility and we're",
    "start": "2338470",
    "end": "2345910"
  },
  {
    "text": "working on it cool any other questions",
    "start": "2345910",
    "end": "2352530"
  },
  {
    "text": "all right well thank you guys for coming out I hope you had a great builders day and I'll be around a little while longer",
    "start": "2353160",
    "end": "2359800"
  },
  {
    "text": "if you have any questions you'd rather walk up and ask and otherwise enjoy the rest of your week",
    "start": "2359800",
    "end": "2367170"
  },
  {
    "text": "[Music]",
    "start": "2368500",
    "end": "2372059"
  },
  {
    "text": "you",
    "start": "2376110",
    "end": "2378170"
  }
]