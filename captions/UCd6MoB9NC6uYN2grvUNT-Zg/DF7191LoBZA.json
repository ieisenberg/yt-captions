[
  {
    "text": "[Music]",
    "start": "0",
    "end": "3600"
  },
  {
    "text": "hello everyone",
    "start": "3600",
    "end": "4720"
  },
  {
    "text": "my name is andy hopper and i'm a senior",
    "start": "4720",
    "end": "6799"
  },
  {
    "text": "solutions architect at amazon web",
    "start": "6799",
    "end": "8320"
  },
  {
    "text": "services",
    "start": "8320",
    "end": "9840"
  },
  {
    "text": "it can be awfully useful to have your",
    "start": "9840",
    "end": "11360"
  },
  {
    "text": "applications automatically installed on",
    "start": "11360",
    "end": "13360"
  },
  {
    "text": "an instance as soon as it's launched",
    "start": "13360",
    "end": "15360"
  },
  {
    "text": "a good example would be auto scaling",
    "start": "15360",
    "end": "17039"
  },
  {
    "text": "you'd like new instances to be launched",
    "start": "17039",
    "end": "18720"
  },
  {
    "text": "in response to peaks and load",
    "start": "18720",
    "end": "20320"
  },
  {
    "text": "and you don't want to have to wait for a",
    "start": "20320",
    "end": "21840"
  },
  {
    "text": "human being to connect to the machine",
    "start": "21840",
    "end": "23439"
  },
  {
    "text": "and install your software now there are",
    "start": "23439",
    "end": "25760"
  },
  {
    "text": "a number of ways",
    "start": "25760",
    "end": "26640"
  },
  {
    "text": "this can be accomplished but in this",
    "start": "26640",
    "end": "28480"
  },
  {
    "text": "video we're going to explore",
    "start": "28480",
    "end": "30000"
  },
  {
    "text": "how you can use a feature of elastic",
    "start": "30000",
    "end": "31439"
  },
  {
    "text": "compute cloud or ec2",
    "start": "31439",
    "end": "33280"
  },
  {
    "text": "called user data for those of you who",
    "start": "33280",
    "end": "35680"
  },
  {
    "text": "aren't familiar with this feature",
    "start": "35680",
    "end": "37120"
  },
  {
    "text": "it's a way for you to provide a script",
    "start": "37120",
    "end": "38640"
  },
  {
    "text": "that will be executed on the machine",
    "start": "38640",
    "end": "40399"
  },
  {
    "text": "during the launch process",
    "start": "40399",
    "end": "41920"
  },
  {
    "text": "this script can be a windows batch",
    "start": "41920",
    "end": "43840"
  },
  {
    "text": "script or a powershell script on windows",
    "start": "43840",
    "end": "45920"
  },
  {
    "text": "machines",
    "start": "45920",
    "end": "46559"
  },
  {
    "text": "or it can be a shell script for linux",
    "start": "46559",
    "end": "48559"
  },
  {
    "text": "machines",
    "start": "48559",
    "end": "49760"
  },
  {
    "text": "now for the purposes of this video we're",
    "start": "49760",
    "end": "51600"
  },
  {
    "text": "going to focus on the windows use case",
    "start": "51600",
    "end": "53520"
  },
  {
    "text": "however the same set of steps can be",
    "start": "53520",
    "end": "55280"
  },
  {
    "text": "performed on a linux box you'll just be",
    "start": "55280",
    "end": "57360"
  },
  {
    "text": "using a different syntax for the script",
    "start": "57360",
    "end": "60079"
  },
  {
    "text": "so let's get started",
    "start": "60079",
    "end": "63600"
  },
  {
    "text": "now what i have open here in visual",
    "start": "63760",
    "end": "65280"
  },
  {
    "text": "studio is an asp.net core nvc web",
    "start": "65280",
    "end": "68240"
  },
  {
    "text": "application",
    "start": "68240",
    "end": "69360"
  },
  {
    "text": "by the way the source for this",
    "start": "69360",
    "end": "70880"
  },
  {
    "text": "application is publicly available on",
    "start": "70880",
    "end": "72479"
  },
  {
    "text": "github",
    "start": "72479",
    "end": "74479"
  },
  {
    "text": "so if you want to take a peek at the",
    "start": "74479",
    "end": "75920"
  },
  {
    "text": "code for this as well as some other",
    "start": "75920",
    "end": "77439"
  },
  {
    "text": "videos i'll be posting on this topic",
    "start": "77439",
    "end": "79280"
  },
  {
    "text": "you can download it and try it out in",
    "start": "79280",
    "end": "81040"
  },
  {
    "text": "your own environment",
    "start": "81040",
    "end": "82960"
  },
  {
    "text": "now i'd like for this application to be",
    "start": "82960",
    "end": "85119"
  },
  {
    "text": "able to launch",
    "start": "85119",
    "end": "86080"
  },
  {
    "text": "automatically on boot and stay running",
    "start": "86080",
    "end": "88240"
  },
  {
    "text": "so i've had the nuget package that",
    "start": "88240",
    "end": "90240"
  },
  {
    "text": "allows me to host the application as a",
    "start": "90240",
    "end": "92640"
  },
  {
    "text": "windows service so i've got my",
    "start": "92640",
    "end": "95280"
  },
  {
    "text": "application",
    "start": "95280",
    "end": "96000"
  },
  {
    "text": "i've got it set up to run and so now i",
    "start": "96000",
    "end": "98079"
  },
  {
    "text": "just need to figure out how i'm going to",
    "start": "98079",
    "end": "99439"
  },
  {
    "text": "get this to automatically install",
    "start": "99439",
    "end": "101119"
  },
  {
    "text": "on ec2 machines now one principle we",
    "start": "101119",
    "end": "104240"
  },
  {
    "text": "adhere to in the cloud",
    "start": "104240",
    "end": "105520"
  },
  {
    "text": "is to automate everything and this",
    "start": "105520",
    "end": "107680"
  },
  {
    "text": "includes the creation of resources like",
    "start": "107680",
    "end": "109759"
  },
  {
    "text": "ec2 instances",
    "start": "109759",
    "end": "111439"
  },
  {
    "text": "so aws offers a service called",
    "start": "111439",
    "end": "113759"
  },
  {
    "text": "cloudformation",
    "start": "113759",
    "end": "114960"
  },
  {
    "text": "and what this allows you to do is build",
    "start": "114960",
    "end": "117920"
  },
  {
    "text": "documents that describe the cloud",
    "start": "117920",
    "end": "119600"
  },
  {
    "text": "resources you'd like to have created",
    "start": "119600",
    "end": "121840"
  },
  {
    "text": "one of the resource types ms ec2",
    "start": "121840",
    "end": "124000"
  },
  {
    "text": "instances",
    "start": "124000",
    "end": "124880"
  },
  {
    "text": "and if you look at the documentation of",
    "start": "124880",
    "end": "126479"
  },
  {
    "text": "the ec2 resource type",
    "start": "126479",
    "end": "128000"
  },
  {
    "text": "you'll see that there's a property here",
    "start": "128000",
    "end": "129840"
  },
  {
    "text": "called user data",
    "start": "129840",
    "end": "131680"
  },
  {
    "text": "and so if we look at the value of this",
    "start": "131680",
    "end": "133599"
  },
  {
    "text": "property",
    "start": "133599",
    "end": "134800"
  },
  {
    "text": "we'll see that it takes a script as a",
    "start": "134800",
    "end": "137920"
  },
  {
    "text": "with base64 encoding okay",
    "start": "137920",
    "end": "141120"
  },
  {
    "text": "so let's consider the steps i want my",
    "start": "141120",
    "end": "143360"
  },
  {
    "text": "user data script to perform",
    "start": "143360",
    "end": "145040"
  },
  {
    "text": "i'd like for it to download and install",
    "start": "145040",
    "end": "146720"
  },
  {
    "text": "the asp.net core runtime",
    "start": "146720",
    "end": "148560"
  },
  {
    "text": "i'd like to download my application i'd",
    "start": "148560",
    "end": "151280"
  },
  {
    "text": "like to configure the application to run",
    "start": "151280",
    "end": "153040"
  },
  {
    "text": "as a windows service",
    "start": "153040",
    "end": "154239"
  },
  {
    "text": "and then finally i'll ensure that my",
    "start": "154239",
    "end": "155920"
  },
  {
    "text": "application is accessible",
    "start": "155920",
    "end": "157280"
  },
  {
    "text": "on the standard http port of 80.",
    "start": "157280",
    "end": "160879"
  },
  {
    "text": "now before i write my scripts let's go",
    "start": "160879",
    "end": "162720"
  },
  {
    "text": "over a couple of things",
    "start": "162720",
    "end": "164400"
  },
  {
    "text": "user data can take two forms it can be",
    "start": "164400",
    "end": "166800"
  },
  {
    "text": "an inline script that runs a sequence of",
    "start": "166800",
    "end": "168480"
  },
  {
    "text": "commands",
    "start": "168480",
    "end": "169440"
  },
  {
    "text": "or it can use something called aws",
    "start": "169440",
    "end": "171440"
  },
  {
    "text": "cloudformation and net",
    "start": "171440",
    "end": "172879"
  },
  {
    "text": "it is considered a best practice to use",
    "start": "172879",
    "end": "174640"
  },
  {
    "text": "aws cloudformation init",
    "start": "174640",
    "end": "176400"
  },
  {
    "text": "as it supports features such as updating",
    "start": "176400",
    "end": "178080"
  },
  {
    "text": "the steps and can handle reboots if one",
    "start": "178080",
    "end": "180480"
  },
  {
    "text": "is required during execution",
    "start": "180480",
    "end": "182319"
  },
  {
    "text": "scripts are much simpler to write but",
    "start": "182319",
    "end": "184239"
  },
  {
    "text": "since they don't support these features",
    "start": "184239",
    "end": "185920"
  },
  {
    "text": "you'll want to determine whether you'll",
    "start": "185920",
    "end": "187360"
  },
  {
    "text": "need them",
    "start": "187360",
    "end": "188400"
  },
  {
    "text": "we'll go over both approaches in this",
    "start": "188400",
    "end": "190000"
  },
  {
    "text": "video though",
    "start": "190000",
    "end": "191440"
  },
  {
    "text": "okay so let's write our script",
    "start": "191440",
    "end": "195120"
  },
  {
    "text": "now to spare you my atrocious typing",
    "start": "195120",
    "end": "197040"
  },
  {
    "text": "i've taken the liberty of",
    "start": "197040",
    "end": "198400"
  },
  {
    "text": "already writing the script and i've",
    "start": "198400",
    "end": "200000"
  },
  {
    "text": "pulled up a copy here let's take a look",
    "start": "200000",
    "end": "202000"
  },
  {
    "text": "at what i'm actually doing",
    "start": "202000",
    "end": "203440"
  },
  {
    "text": "first i'm downloading and installing the",
    "start": "203440",
    "end": "205840"
  },
  {
    "text": "asp.net runtime",
    "start": "205840",
    "end": "207599"
  },
  {
    "text": "onto the machine and you'll notice i'm",
    "start": "207599",
    "end": "209599"
  },
  {
    "text": "using a feature of powershell while i'm",
    "start": "209599",
    "end": "211200"
  },
  {
    "text": "telling powershell to wait",
    "start": "211200",
    "end": "212799"
  },
  {
    "text": "for the installer to complete before it",
    "start": "212799",
    "end": "214480"
  },
  {
    "text": "moves on in the script",
    "start": "214480",
    "end": "216000"
  },
  {
    "text": "in this case you'll want to do that",
    "start": "216000",
    "end": "217519"
  },
  {
    "text": "because if you don't the asp.net",
    "start": "217519",
    "end": "220159"
  },
  {
    "text": "installer will come back immediately and",
    "start": "220159",
    "end": "222000"
  },
  {
    "text": "then we may try to start our service",
    "start": "222000",
    "end": "223680"
  },
  {
    "text": "before the runtime actually has finished",
    "start": "223680",
    "end": "225440"
  },
  {
    "text": "installing",
    "start": "225440",
    "end": "226560"
  },
  {
    "text": "next i'm downloading the zip file that",
    "start": "226560",
    "end": "229280"
  },
  {
    "text": "contains my application",
    "start": "229280",
    "end": "230720"
  },
  {
    "text": "and i've got it stored in a bucket that",
    "start": "230720",
    "end": "232319"
  },
  {
    "text": "uh that i have access to",
    "start": "232319",
    "end": "234080"
  },
  {
    "text": "and then what i'm doing is i'm expanding",
    "start": "234080",
    "end": "235680"
  },
  {
    "text": "the zip file onto the local hard drive",
    "start": "235680",
    "end": "237760"
  },
  {
    "text": "for the machine",
    "start": "237760",
    "end": "239360"
  },
  {
    "text": "now that i have the runtime and my",
    "start": "239360",
    "end": "240959"
  },
  {
    "text": "application code in place",
    "start": "240959",
    "end": "242400"
  },
  {
    "text": "it's time for me to go ahead and",
    "start": "242400",
    "end": "243360"
  },
  {
    "text": "register a windows service so i'm just",
    "start": "243360",
    "end": "245120"
  },
  {
    "text": "using the new service commandlet to",
    "start": "245120",
    "end": "247120"
  },
  {
    "text": "create that windows service and then",
    "start": "247120",
    "end": "248640"
  },
  {
    "text": "i'll start the service just so i can",
    "start": "248640",
    "end": "250159"
  },
  {
    "text": "start serving up my web pages",
    "start": "250159",
    "end": "252159"
  },
  {
    "text": "and then finally to ensure i can reach",
    "start": "252159",
    "end": "253920"
  },
  {
    "text": "this from the outside world",
    "start": "253920",
    "end": "255280"
  },
  {
    "text": "i'm using the uh the net shell advanced",
    "start": "255280",
    "end": "257040"
  },
  {
    "text": "firewall command sets to",
    "start": "257040",
    "end": "258799"
  },
  {
    "text": "expose port 80 for http traffic to reach",
    "start": "258799",
    "end": "262160"
  },
  {
    "text": "my web application",
    "start": "262160",
    "end": "263759"
  },
  {
    "text": "so what would something like this look",
    "start": "263759",
    "end": "265199"
  },
  {
    "text": "like in cloud formation",
    "start": "265199",
    "end": "266800"
  },
  {
    "text": "so i've got a cloudformation template",
    "start": "266800",
    "end": "268720"
  },
  {
    "text": "here that's this is also included in the",
    "start": "268720",
    "end": "271040"
  },
  {
    "text": "source code for that github application",
    "start": "271040",
    "end": "272639"
  },
  {
    "text": "by the way",
    "start": "272639",
    "end": "273919"
  },
  {
    "text": "and let's take a look at the resources",
    "start": "273919",
    "end": "275520"
  },
  {
    "text": "we have one of the resources",
    "start": "275520",
    "end": "278080"
  },
  {
    "text": "among other things is the actual ec2",
    "start": "278080",
    "end": "280720"
  },
  {
    "text": "instance",
    "start": "280720",
    "end": "281280"
  },
  {
    "text": "that's going to be running our web",
    "start": "281280",
    "end": "282800"
  },
  {
    "text": "application the other things are some",
    "start": "282800",
    "end": "284560"
  },
  {
    "text": "nuts and bolts like a security group to",
    "start": "284560",
    "end": "286160"
  },
  {
    "text": "allow access on port 80",
    "start": "286160",
    "end": "287919"
  },
  {
    "text": "an elastic ip address to make it",
    "start": "287919",
    "end": "290320"
  },
  {
    "text": "available to the public internet",
    "start": "290320",
    "end": "292080"
  },
  {
    "text": "and then i've got something called a",
    "start": "292080",
    "end": "293759"
  },
  {
    "text": "weight handle weight condition we'll",
    "start": "293759",
    "end": "295280"
  },
  {
    "text": "look at what those do in just a moment",
    "start": "295280",
    "end": "297280"
  },
  {
    "text": "so if we expand our resources here",
    "start": "297280",
    "end": "300080"
  },
  {
    "text": "you'll notice that i've got a user data",
    "start": "300080",
    "end": "301600"
  },
  {
    "text": "property",
    "start": "301600",
    "end": "302479"
  },
  {
    "text": "now you may recall from the",
    "start": "302479",
    "end": "303600"
  },
  {
    "text": "documentation that the user data expects",
    "start": "303600",
    "end": "306160"
  },
  {
    "text": "a base64",
    "start": "306160",
    "end": "307360"
  },
  {
    "text": "encoded script luckily there is an",
    "start": "307360",
    "end": "309600"
  },
  {
    "text": "intrinsic function inside cloud",
    "start": "309600",
    "end": "311199"
  },
  {
    "text": "formation that makes our job pretty easy",
    "start": "311199",
    "end": "313039"
  },
  {
    "text": "and it will do this for",
    "start": "313039",
    "end": "314160"
  },
  {
    "text": "us so if we look in this the script that",
    "start": "314160",
    "end": "317600"
  },
  {
    "text": "i've got here",
    "start": "317600",
    "end": "318800"
  },
  {
    "text": "you'll see that's the exact same steps",
    "start": "318800",
    "end": "320479"
  },
  {
    "text": "that i had in this powershell script",
    "start": "320479",
    "end": "322160"
  },
  {
    "text": "here",
    "start": "322160",
    "end": "322639"
  },
  {
    "text": "but what i've done is i've actually",
    "start": "322639",
    "end": "323840"
  },
  {
    "text": "added a little bit of a try catch",
    "start": "323840",
    "end": "325680"
  },
  {
    "text": "handler to it and the reason i did that",
    "start": "325680",
    "end": "328160"
  },
  {
    "text": "is that",
    "start": "328160",
    "end": "328960"
  },
  {
    "text": "i want to be able to signal to cloud",
    "start": "328960",
    "end": "330880"
  },
  {
    "text": "formation that",
    "start": "330880",
    "end": "332160"
  },
  {
    "text": "the script has either successfully",
    "start": "332160",
    "end": "333680"
  },
  {
    "text": "executed or it encountered an error",
    "start": "333680",
    "end": "335919"
  },
  {
    "text": "condition of some sort",
    "start": "335919",
    "end": "337520"
  },
  {
    "text": "and to do that what i'm actually using",
    "start": "337520",
    "end": "339680"
  },
  {
    "text": "is something called",
    "start": "339680",
    "end": "340560"
  },
  {
    "text": "a weight handle so you'll notice that",
    "start": "340560",
    "end": "342479"
  },
  {
    "text": "you know again i have these weight",
    "start": "342479",
    "end": "343680"
  },
  {
    "text": "handles and weight conditions down here",
    "start": "343680",
    "end": "345360"
  },
  {
    "text": "and so what this will actually do is",
    "start": "345360",
    "end": "347840"
  },
  {
    "text": "give me",
    "start": "347840",
    "end": "348479"
  },
  {
    "text": "a url that i can perform a put operation",
    "start": "348479",
    "end": "352000"
  },
  {
    "text": "on to indicate to cloud formation that",
    "start": "352000",
    "end": "354160"
  },
  {
    "text": "my script has either",
    "start": "354160",
    "end": "355680"
  },
  {
    "text": "successfully executed or if any kind of",
    "start": "355680",
    "end": "358400"
  },
  {
    "text": "failure of some sort",
    "start": "358400",
    "end": "359759"
  },
  {
    "text": "if i didn't use the weight handle to",
    "start": "359759",
    "end": "362160"
  },
  {
    "text": "indicate this",
    "start": "362160",
    "end": "363199"
  },
  {
    "text": "success or failure what'll happen is the",
    "start": "363199",
    "end": "365600"
  },
  {
    "text": "cloud formation will launch the ec2",
    "start": "365600",
    "end": "367280"
  },
  {
    "text": "machine and my ec2 user data will begin",
    "start": "367280",
    "end": "369680"
  },
  {
    "text": "execution but it won't wait for that",
    "start": "369680",
    "end": "371759"
  },
  {
    "text": "user data to complete and so you may end",
    "start": "371759",
    "end": "373759"
  },
  {
    "text": "up in a state where your user data fails",
    "start": "373759",
    "end": "376240"
  },
  {
    "text": "but cloudformation thinks the stack",
    "start": "376240",
    "end": "377840"
  },
  {
    "text": "launched successfully",
    "start": "377840",
    "end": "379520"
  },
  {
    "text": "so again by leveraging this weight",
    "start": "379520",
    "end": "380960"
  },
  {
    "text": "handle i've got a way to be able to",
    "start": "380960",
    "end": "383759"
  },
  {
    "text": "ensure that the stack overall will fail",
    "start": "383759",
    "end": "386319"
  },
  {
    "text": "if something happens that causes my",
    "start": "386319",
    "end": "387919"
  },
  {
    "text": "script to fail",
    "start": "387919",
    "end": "389919"
  },
  {
    "text": "so the way this works is you call invoke",
    "start": "389919",
    "end": "392160"
  },
  {
    "text": "web request",
    "start": "392160",
    "end": "393039"
  },
  {
    "text": "and again you indicate that you're",
    "start": "393039",
    "end": "394400"
  },
  {
    "text": "calling the put verb",
    "start": "394400",
    "end": "396160"
  },
  {
    "text": "and if we look all the way over to the",
    "start": "396160",
    "end": "398000"
  },
  {
    "text": "right here what i'm doing",
    "start": "398000",
    "end": "399680"
  },
  {
    "text": "is i'm actually invoking a uri and this",
    "start": "399680",
    "end": "402400"
  },
  {
    "text": "uri is defined",
    "start": "402400",
    "end": "404000"
  },
  {
    "text": "by that app server weight handle and",
    "start": "404000",
    "end": "406160"
  },
  {
    "text": "you'll notice that what i'm doing when",
    "start": "406160",
    "end": "407759"
  },
  {
    "text": "in the json that i'm passing to that put",
    "start": "407759",
    "end": "409840"
  },
  {
    "text": "method i'm actually indicating a status",
    "start": "409840",
    "end": "412000"
  },
  {
    "text": "code",
    "start": "412000",
    "end": "412479"
  },
  {
    "text": "so success if everything worked well and",
    "start": "412479",
    "end": "414880"
  },
  {
    "text": "a failure",
    "start": "414880",
    "end": "415599"
  },
  {
    "text": "if something went wrong and again that",
    "start": "415599",
    "end": "418240"
  },
  {
    "text": "uri",
    "start": "418240",
    "end": "418960"
  },
  {
    "text": "is defined by by virtue of the fact that",
    "start": "418960",
    "end": "421120"
  },
  {
    "text": "cloud formation has this app server",
    "start": "421120",
    "end": "423039"
  },
  {
    "text": "weight handle",
    "start": "423039",
    "end": "424080"
  },
  {
    "text": "and then if you look here with this",
    "start": "424080",
    "end": "425440"
  },
  {
    "text": "weight condition what's going on",
    "start": "425440",
    "end": "427440"
  },
  {
    "text": "is that i've got something that's going",
    "start": "427440",
    "end": "428960"
  },
  {
    "text": "to be waiting for this app server weight",
    "start": "428960",
    "end": "431440"
  },
  {
    "text": "handle",
    "start": "431440",
    "end": "432240"
  },
  {
    "text": "to be triggered with either a success or",
    "start": "432240",
    "end": "434560"
  },
  {
    "text": "a failure and then i've got an",
    "start": "434560",
    "end": "435759"
  },
  {
    "text": "associated timeout in this case i've",
    "start": "435759",
    "end": "437280"
  },
  {
    "text": "told it to wait 10 minutes or",
    "start": "437280",
    "end": "438800"
  },
  {
    "text": "600 seconds now one other thing i wanted",
    "start": "438800",
    "end": "441840"
  },
  {
    "text": "to show you",
    "start": "441840",
    "end": "442720"
  },
  {
    "text": "is you know i'm doing this in cloud",
    "start": "442720",
    "end": "444560"
  },
  {
    "text": "formation right now",
    "start": "444560",
    "end": "446160"
  },
  {
    "text": "but if you want to do this directly",
    "start": "446160",
    "end": "448000"
  },
  {
    "text": "inside the ec2 launch wizard you can",
    "start": "448000",
    "end": "450880"
  },
  {
    "text": "you'd simply go to launch a new instance",
    "start": "450880",
    "end": "454400"
  },
  {
    "text": "and in the launch wizard you'll have an",
    "start": "454400",
    "end": "457039"
  },
  {
    "text": "option to enter user data",
    "start": "457039",
    "end": "458880"
  },
  {
    "text": "as part of the advanced settings of your",
    "start": "458880",
    "end": "461199"
  },
  {
    "text": "launch steps",
    "start": "461199",
    "end": "462080"
  },
  {
    "text": "so let's take a look at this i'll choose",
    "start": "462080",
    "end": "463759"
  },
  {
    "text": "windows server i'll make it",
    "start": "463759",
    "end": "465599"
  },
  {
    "text": "a t2 micro",
    "start": "465599",
    "end": "468960"
  },
  {
    "text": "and if we go down to the advanced",
    "start": "469440",
    "end": "470879"
  },
  {
    "text": "details you'll see i also have user data",
    "start": "470879",
    "end": "473280"
  },
  {
    "text": "and you can either attach it you know",
    "start": "473280",
    "end": "475039"
  },
  {
    "text": "directly inline",
    "start": "475039",
    "end": "476319"
  },
  {
    "text": "as text so i could cut and paste my",
    "start": "476319",
    "end": "478240"
  },
  {
    "text": "powershell script in here",
    "start": "478240",
    "end": "479919"
  },
  {
    "text": "or i can have it you know upload a file",
    "start": "479919",
    "end": "482080"
  },
  {
    "text": "to the ec2 launch wizard",
    "start": "482080",
    "end": "484080"
  },
  {
    "text": "just bear in mind when you're using this",
    "start": "484080",
    "end": "485919"
  },
  {
    "text": "approach you won't have access",
    "start": "485919",
    "end": "487759"
  },
  {
    "text": "to the to those cloudformation features",
    "start": "487759",
    "end": "490000"
  },
  {
    "text": "like weight handles that's a cloud",
    "start": "490000",
    "end": "491360"
  },
  {
    "text": "formation only construct",
    "start": "491360",
    "end": "493360"
  },
  {
    "text": "okay well now it's time for us to go",
    "start": "493360",
    "end": "495199"
  },
  {
    "text": "ahead and launch our cloudformation",
    "start": "495199",
    "end": "496479"
  },
  {
    "text": "template",
    "start": "496479",
    "end": "497759"
  },
  {
    "text": "so let's go to the cloudformation",
    "start": "497759",
    "end": "499520"
  },
  {
    "text": "console",
    "start": "499520",
    "end": "500879"
  },
  {
    "text": "and we'll create a stack and in this",
    "start": "500879",
    "end": "503199"
  },
  {
    "text": "case i'm going to upload that",
    "start": "503199",
    "end": "504720"
  },
  {
    "text": "user data template that i created",
    "start": "504720",
    "end": "508639"
  },
  {
    "text": "and i will navigate to my asp.net core",
    "start": "511039",
    "end": "514719"
  },
  {
    "text": "deployment samples i've got a cloud",
    "start": "514719",
    "end": "516000"
  },
  {
    "text": "permission",
    "start": "516000",
    "end": "516800"
  },
  {
    "text": "and i will use my user data template",
    "start": "516800",
    "end": "521839"
  },
  {
    "text": "and it's going to ask me for a stack",
    "start": "522880",
    "end": "524240"
  },
  {
    "text": "name and i'll call this asp.net",
    "start": "524240",
    "end": "526000"
  },
  {
    "text": "demo dash user data",
    "start": "526000",
    "end": "530480"
  },
  {
    "text": "and you'll notice i've got a parameter",
    "start": "530800",
    "end": "532399"
  },
  {
    "text": "in here this is just a way for me",
    "start": "532399",
    "end": "534000"
  },
  {
    "text": "to automatically look up the latest",
    "start": "534000",
    "end": "536480"
  },
  {
    "text": "windows ami",
    "start": "536480",
    "end": "537600"
  },
  {
    "text": "id rather than having to hard code it",
    "start": "537600",
    "end": "540080"
  },
  {
    "text": "because after all",
    "start": "540080",
    "end": "540959"
  },
  {
    "text": "over time those zombie ids do expire",
    "start": "540959",
    "end": "544720"
  },
  {
    "text": "all right i will go ahead and scoot to",
    "start": "545839",
    "end": "548800"
  },
  {
    "text": "the end here",
    "start": "548800",
    "end": "550000"
  },
  {
    "text": "and i will create our stack",
    "start": "550000",
    "end": "553440"
  },
  {
    "text": "now rather than make you wait for the",
    "start": "553440",
    "end": "555680"
  },
  {
    "text": "entire stack to complete launching",
    "start": "555680",
    "end": "557680"
  },
  {
    "text": "i'm going to leverage the miracle video",
    "start": "557680",
    "end": "559920"
  },
  {
    "text": "editing and",
    "start": "559920",
    "end": "561279"
  },
  {
    "text": "fast forward through time so i will see",
    "start": "561279",
    "end": "563360"
  },
  {
    "text": "you on the other side",
    "start": "563360",
    "end": "566240"
  },
  {
    "text": "all right so our cloudformation stack",
    "start": "567360",
    "end": "569360"
  },
  {
    "text": "has finished launching",
    "start": "569360",
    "end": "570640"
  },
  {
    "text": "and i actually create an output on the",
    "start": "570640",
    "end": "573519"
  },
  {
    "text": "template",
    "start": "573519",
    "end": "574080"
  },
  {
    "text": "so just to make it easier to navigate to",
    "start": "574080",
    "end": "576720"
  },
  {
    "text": "the web application",
    "start": "576720",
    "end": "577760"
  },
  {
    "text": "so let's go ahead and click on this",
    "start": "577760",
    "end": "579519"
  },
  {
    "text": "hyperlink and see if our app will",
    "start": "579519",
    "end": "581040"
  },
  {
    "text": "actually start getting served",
    "start": "581040",
    "end": "584240"
  },
  {
    "text": "and look at that there you go so our",
    "start": "584480",
    "end": "586640"
  },
  {
    "text": "application is now up and running",
    "start": "586640",
    "end": "588399"
  },
  {
    "text": "on our ec2 machine and it was installed",
    "start": "588399",
    "end": "590800"
  },
  {
    "text": "automatically as part of launching that",
    "start": "590800",
    "end": "592640"
  },
  {
    "text": "ec2 instance",
    "start": "592640",
    "end": "594480"
  },
  {
    "text": "okay so that's how we get our",
    "start": "594480",
    "end": "595600"
  },
  {
    "text": "application installed using a script",
    "start": "595600",
    "end": "597519"
  },
  {
    "text": "inside our user data",
    "start": "597519",
    "end": "598959"
  },
  {
    "text": "now let's take a look at what it looks",
    "start": "598959",
    "end": "600640"
  },
  {
    "text": "like if we use that cfn init script",
    "start": "600640",
    "end": "605839"
  },
  {
    "text": "what i have here and again this is also",
    "start": "607920",
    "end": "609680"
  },
  {
    "text": "available in that github repository",
    "start": "609680",
    "end": "611600"
  },
  {
    "text": "is a cloudformation template where",
    "start": "611600",
    "end": "614399"
  },
  {
    "text": "instead of using an inline user data",
    "start": "614399",
    "end": "616240"
  },
  {
    "text": "script",
    "start": "616240",
    "end": "616880"
  },
  {
    "text": "i've got my ec2 instance and now instead",
    "start": "616880",
    "end": "619680"
  },
  {
    "text": "i'm actually supplying that",
    "start": "619680",
    "end": "621519"
  },
  {
    "text": "aws cloudformation init section this is",
    "start": "621519",
    "end": "624399"
  },
  {
    "text": "a section that goes inside the metadata",
    "start": "624399",
    "end": "626160"
  },
  {
    "text": "for the ec2 instance",
    "start": "626160",
    "end": "627680"
  },
  {
    "text": "and it's got a slightly different",
    "start": "627680",
    "end": "629040"
  },
  {
    "text": "structure so you'll notice i give it a",
    "start": "629040",
    "end": "631040"
  },
  {
    "text": "configuration",
    "start": "631040",
    "end": "632079"
  },
  {
    "text": "and rather than manually downloading the",
    "start": "632079",
    "end": "634720"
  },
  {
    "text": "files i'm actually letting",
    "start": "634720",
    "end": "636000"
  },
  {
    "text": "cloudformation take care of doing that",
    "start": "636000",
    "end": "637680"
  },
  {
    "text": "for me so i give it a list of all the",
    "start": "637680",
    "end": "639360"
  },
  {
    "text": "files that i want to have on the machine",
    "start": "639360",
    "end": "641040"
  },
  {
    "text": "in this case i'm actually supplying the",
    "start": "641040",
    "end": "643519"
  },
  {
    "text": "content for the file",
    "start": "643519",
    "end": "644560"
  },
  {
    "text": "inline for the cfn hub we'll describe",
    "start": "644560",
    "end": "647120"
  },
  {
    "text": "what that is in just a moment",
    "start": "647120",
    "end": "648959"
  },
  {
    "text": "i'm also configuring an auto reloader",
    "start": "648959",
    "end": "651200"
  },
  {
    "text": "again we'll take a look at those in just",
    "start": "651200",
    "end": "652640"
  },
  {
    "text": "a moment but the most important part",
    "start": "652640",
    "end": "654320"
  },
  {
    "text": "is i'm downloading the source for my",
    "start": "654320",
    "end": "656640"
  },
  {
    "text": "application",
    "start": "656640",
    "end": "658079"
  },
  {
    "text": "as well as the location of the asp.net",
    "start": "658079",
    "end": "660959"
  },
  {
    "text": "runtime installer so i was able to skip",
    "start": "660959",
    "end": "662880"
  },
  {
    "text": "those",
    "start": "662880",
    "end": "664480"
  },
  {
    "text": "now you'll notice below what i have is a",
    "start": "664480",
    "end": "666560"
  },
  {
    "text": "sequence of steps that i'm going to have",
    "start": "666560",
    "end": "668160"
  },
  {
    "text": "that cfn",
    "start": "668160",
    "end": "669279"
  },
  {
    "text": "init script perform for me and the way",
    "start": "669279",
    "end": "672480"
  },
  {
    "text": "this works",
    "start": "672480",
    "end": "673120"
  },
  {
    "text": "is you give an alphabetically ordered",
    "start": "673120",
    "end": "675040"
  },
  {
    "text": "list of commands that you wanted to have",
    "start": "675040",
    "end": "677120"
  },
  {
    "text": "execute incidentally you can tell it to",
    "start": "677120",
    "end": "679680"
  },
  {
    "text": "either do it in",
    "start": "679680",
    "end": "680560"
  },
  {
    "text": "ascending or descending order you just",
    "start": "680560",
    "end": "682800"
  },
  {
    "text": "specify that at the top of your",
    "start": "682800",
    "end": "684079"
  },
  {
    "text": "configuration",
    "start": "684079",
    "end": "685519"
  },
  {
    "text": "but you'll see what i'm doing here is",
    "start": "685519",
    "end": "687440"
  },
  {
    "text": "i'm running the commands",
    "start": "687440",
    "end": "689040"
  },
  {
    "text": "so i'll install my asp.net runtime here",
    "start": "689040",
    "end": "692560"
  },
  {
    "text": "and then i'm executing a powershell",
    "start": "692560",
    "end": "694720"
  },
  {
    "text": "command to expand my archive just like i",
    "start": "694720",
    "end": "696480"
  },
  {
    "text": "did in the original script",
    "start": "696480",
    "end": "699519"
  },
  {
    "text": "and then i'm registering the service now",
    "start": "700079",
    "end": "701760"
  },
  {
    "text": "in this case since it's not a powershell",
    "start": "701760",
    "end": "703440"
  },
  {
    "text": "execution environment i'm actually using",
    "start": "703440",
    "end": "705120"
  },
  {
    "text": "sc.exe to register my service but the",
    "start": "705120",
    "end": "708000"
  },
  {
    "text": "end result is going to be the same",
    "start": "708000",
    "end": "711360"
  },
  {
    "text": "i start my service and then again i will",
    "start": "711600",
    "end": "714560"
  },
  {
    "text": "open up port 80 on the firewall",
    "start": "714560",
    "end": "717519"
  },
  {
    "text": "now i mentioned that cfn hub service uh",
    "start": "717519",
    "end": "721200"
  },
  {
    "text": "backup in the config section there what",
    "start": "721200",
    "end": "723839"
  },
  {
    "text": "this is",
    "start": "723839",
    "end": "724399"
  },
  {
    "text": "is a service that allows you to respond",
    "start": "724399",
    "end": "726480"
  },
  {
    "text": "to updates",
    "start": "726480",
    "end": "727440"
  },
  {
    "text": "in the metadata configuration of your",
    "start": "727440",
    "end": "729360"
  },
  {
    "text": "ec2 instance",
    "start": "729360",
    "end": "731360"
  },
  {
    "text": "i mentioned earlier how user data is",
    "start": "731360",
    "end": "733279"
  },
  {
    "text": "unable to be updated in this way",
    "start": "733279",
    "end": "735279"
  },
  {
    "text": "and this service is what detects any of",
    "start": "735279",
    "end": "737760"
  },
  {
    "text": "those changes to the metadata so that it",
    "start": "737760",
    "end": "739440"
  },
  {
    "text": "can",
    "start": "739440",
    "end": "739760"
  },
  {
    "text": "alter any configuration on the ec2",
    "start": "739760",
    "end": "742839"
  },
  {
    "text": "instance so as you can see it's a it's a",
    "start": "742839",
    "end": "745279"
  },
  {
    "text": "slightly",
    "start": "745279",
    "end": "745839"
  },
  {
    "text": "more verbose way to get the user data",
    "start": "745839",
    "end": "748720"
  },
  {
    "text": "information",
    "start": "748720",
    "end": "749360"
  },
  {
    "text": "onto the ec2 machine however it's much",
    "start": "749360",
    "end": "752240"
  },
  {
    "text": "more robust and it offers some features",
    "start": "752240",
    "end": "754320"
  },
  {
    "text": "that you don't get",
    "start": "754320",
    "end": "755519"
  },
  {
    "text": "just using an inline script and user",
    "start": "755519",
    "end": "757200"
  },
  {
    "text": "data",
    "start": "757200",
    "end": "758720"
  },
  {
    "text": "oh yes one other thing i did want to",
    "start": "758720",
    "end": "760079"
  },
  {
    "text": "point out is that you do still need to",
    "start": "760079",
    "end": "762160"
  },
  {
    "text": "supply a script for you for executing",
    "start": "762160",
    "end": "764480"
  },
  {
    "text": "user data",
    "start": "764480",
    "end": "765680"
  },
  {
    "text": "but you'll notice what i'm doing is i'm",
    "start": "765680",
    "end": "766880"
  },
  {
    "text": "calling cfnit.xe",
    "start": "766880",
    "end": "768880"
  },
  {
    "text": "and this is actually going to be",
    "start": "768880",
    "end": "770240"
  },
  {
    "text": "consuming the data that's in that",
    "start": "770240",
    "end": "771839"
  },
  {
    "text": "metadata section to configure the ec2",
    "start": "771839",
    "end": "774000"
  },
  {
    "text": "instance",
    "start": "774000",
    "end": "776480"
  },
  {
    "text": "and then again at the end here i wanted",
    "start": "776480",
    "end": "778720"
  },
  {
    "text": "to ensure that my cloudformation",
    "start": "778720",
    "end": "780000"
  },
  {
    "text": "template waited",
    "start": "780000",
    "end": "781040"
  },
  {
    "text": "for my cfn init to complete so i'm",
    "start": "781040",
    "end": "783680"
  },
  {
    "text": "actually using a",
    "start": "783680",
    "end": "785680"
  },
  {
    "text": "application called cfn signal and again",
    "start": "785680",
    "end": "788480"
  },
  {
    "text": "it's actually sending",
    "start": "788480",
    "end": "789519"
  },
  {
    "text": "a copy of my weight handle you know as",
    "start": "789519",
    "end": "792959"
  },
  {
    "text": "a parameter to cfn signal so we can",
    "start": "792959",
    "end": "794720"
  },
  {
    "text": "execute that put command for",
    "start": "794720",
    "end": "796160"
  },
  {
    "text": "us all right",
    "start": "796160",
    "end": "799440"
  },
  {
    "text": "so let's see what this looks like in",
    "start": "799440",
    "end": "801120"
  },
  {
    "text": "practice when we launch a cloudformation",
    "start": "801120",
    "end": "802560"
  },
  {
    "text": "template",
    "start": "802560",
    "end": "803680"
  },
  {
    "text": "we'll create a new stack we'll upload",
    "start": "803680",
    "end": "806639"
  },
  {
    "text": "the template file",
    "start": "806639",
    "end": "808959"
  },
  {
    "text": "and this time instead of doing the user",
    "start": "808959",
    "end": "810720"
  },
  {
    "text": "data one you will do the cfn init",
    "start": "810720",
    "end": "815120"
  },
  {
    "text": "and i'll give it a similar name asp.net",
    "start": "815120",
    "end": "817920"
  },
  {
    "text": "demo except this one will be cfn",
    "start": "817920",
    "end": "820320"
  },
  {
    "text": "init we'll next through here",
    "start": "820320",
    "end": "824590"
  },
  {
    "text": "[Music]",
    "start": "824590",
    "end": "827519"
  },
  {
    "text": "and then we will create our stack and",
    "start": "827519",
    "end": "829920"
  },
  {
    "text": "again rather than make you wait i'm",
    "start": "829920",
    "end": "831440"
  },
  {
    "text": "going to go ahead and fast forward",
    "start": "831440",
    "end": "832639"
  },
  {
    "text": "through the",
    "start": "832639",
    "end": "833360"
  },
  {
    "text": "execution of the stack so see you on the",
    "start": "833360",
    "end": "835360"
  },
  {
    "text": "other side in just a moment",
    "start": "835360",
    "end": "837120"
  },
  {
    "text": "all right so our cloudformation template",
    "start": "837120",
    "end": "839040"
  },
  {
    "text": "has finished launching and again we're",
    "start": "839040",
    "end": "840639"
  },
  {
    "text": "going to go to the outputs tab",
    "start": "840639",
    "end": "842240"
  },
  {
    "text": "and let's go ahead and see if our",
    "start": "842240",
    "end": "844240"
  },
  {
    "text": "application launches",
    "start": "844240",
    "end": "845730"
  },
  {
    "text": "[Music]",
    "start": "845730",
    "end": "847680"
  },
  {
    "text": "awesome so as you can see there's a",
    "start": "847680",
    "end": "850399"
  },
  {
    "text": "little more work to do",
    "start": "850399",
    "end": "851600"
  },
  {
    "text": "if you use the aws cloudformation init",
    "start": "851600",
    "end": "853600"
  },
  {
    "text": "approach but it's really powerful",
    "start": "853600",
    "end": "856320"
  },
  {
    "text": "okay so let's go over what we did here",
    "start": "856320",
    "end": "858880"
  },
  {
    "text": "in this video",
    "start": "858880",
    "end": "859760"
  },
  {
    "text": "we looked at how you can use user data",
    "start": "859760",
    "end": "861760"
  },
  {
    "text": "it's a very powerful way for you to",
    "start": "861760",
    "end": "863360"
  },
  {
    "text": "customize the ec2 instances that you",
    "start": "863360",
    "end": "865600"
  },
  {
    "text": "create using cloudformation you can add",
    "start": "865600",
    "end": "868320"
  },
  {
    "text": "this user data to your cloudformation",
    "start": "868320",
    "end": "869839"
  },
  {
    "text": "templates or",
    "start": "869839",
    "end": "870720"
  },
  {
    "text": "you can use it inside the ec2 console",
    "start": "870720",
    "end": "873199"
  },
  {
    "text": "and then we also reviewed the",
    "start": "873199",
    "end": "874880"
  },
  {
    "text": "the two approaches you can use with user",
    "start": "874880",
    "end": "876480"
  },
  {
    "text": "data using using either an inline script",
    "start": "876480",
    "end": "879199"
  },
  {
    "text": "which can either be a command.xe or bash",
    "start": "879199",
    "end": "882320"
  },
  {
    "text": "shell script if you're using linux",
    "start": "882320",
    "end": "884079"
  },
  {
    "text": "or you can use powershell if you're on a",
    "start": "884079",
    "end": "886000"
  },
  {
    "text": "windows machine",
    "start": "886000",
    "end": "888000"
  },
  {
    "text": "we also looked at how you can configure",
    "start": "888000",
    "end": "890000"
  },
  {
    "text": "the aws cloudformation init section as",
    "start": "890000",
    "end": "892399"
  },
  {
    "text": "well",
    "start": "892399",
    "end": "893040"
  },
  {
    "text": "so that you have the ability to make",
    "start": "893040",
    "end": "895120"
  },
  {
    "text": "even modifications and updates to those",
    "start": "895120",
    "end": "897120"
  },
  {
    "text": "later on after you've launched your ec2",
    "start": "897120",
    "end": "898959"
  },
  {
    "text": "instance",
    "start": "898959",
    "end": "901360"
  },
  {
    "text": "thanks for watching and again here is",
    "start": "901360",
    "end": "903519"
  },
  {
    "text": "the link for that a github repo if you",
    "start": "903519",
    "end": "905519"
  },
  {
    "text": "want to download and try out this code",
    "start": "905519",
    "end": "907360"
  },
  {
    "text": "for yourself",
    "start": "907360",
    "end": "909760"
  },
  {
    "text": "again thanks for watching and we can't",
    "start": "909760",
    "end": "911680"
  },
  {
    "text": "wait to see what you built on aws",
    "start": "911680",
    "end": "920800"
  }
]