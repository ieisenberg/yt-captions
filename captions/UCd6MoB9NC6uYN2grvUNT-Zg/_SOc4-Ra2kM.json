[
  {
    "start": "0",
    "end": "31000"
  },
  {
    "text": "hi everyone this session is how Harvard University improves scalable cloud",
    "start": "1970",
    "end": "9000"
  },
  {
    "text": "network security visibility on automation so thank you for attending we're excited to have you here I'm Leo",
    "start": "9000",
    "end": "15960"
  },
  {
    "text": "Shabanov ski I'm a principal Solutions Architect at Amazon Web Services and",
    "start": "15960",
    "end": "21180"
  },
  {
    "text": "then speaking with me is Tom LaShawn he is a manager of cloud architecture at Harvard University and I worked with him",
    "start": "21180",
    "end": "27539"
  },
  {
    "text": "for several years now and so what you can expect from this session is to learn",
    "start": "27539",
    "end": "33630"
  },
  {
    "start": "31000",
    "end": "31000"
  },
  {
    "text": "how Harvard designed and deployed the platform which utilized serverless architecture to orchestrate the solution",
    "start": "33630",
    "end": "39780"
  },
  {
    "text": "that they're going to be talking about from within to protect their most sensitive data and afford students",
    "start": "39780",
    "end": "45300"
  },
  {
    "text": "faculty and staff the flexibility of using cloud computing so first I want to",
    "start": "45300",
    "end": "51149"
  },
  {
    "text": "talk about some specific methods for connecting to your V pcs so how do",
    "start": "51149",
    "end": "58980"
  },
  {
    "text": "you connect your on-premise networks to your V pcs right there's basically three",
    "start": "58980",
    "end": "64588"
  },
  {
    "start": "63000",
    "end": "63000"
  },
  {
    "text": "ways to do this there's a you can do it through a bastion host you can do it",
    "start": "64589",
    "end": "71040"
  },
  {
    "text": "through site-to-site VPN connection and you can do it through using AWS Direct",
    "start": "71040",
    "end": "76860"
  },
  {
    "text": "Connect so let's talk about kind of the trade-offs between these three methods so Bastion host so Bastion host is just",
    "start": "76860",
    "end": "85080"
  },
  {
    "text": "an instance running in your V PC it's gonna be running in the public subnet so you can get to it you can SSH to it it's",
    "start": "85080",
    "end": "92189"
  },
  {
    "text": "gonna need an elastic IP address so you have a you know an IP address that you know that you can SSH into or desktop",
    "start": "92189",
    "end": "98490"
  },
  {
    "text": "into it's gonna add an extra hop to whatever you're getting to inside of your V PC so for example if I'm SSA Qing",
    "start": "98490",
    "end": "106079"
  },
  {
    "text": "into an instance and a private subnet in my V PC now I have to go through the bastion host first so you can automate",
    "start": "106079",
    "end": "112200"
  },
  {
    "text": "that or make that quick worthy or SSH config file but it just adds some extra setup it also it's a single point of",
    "start": "112200",
    "end": "118979"
  },
  {
    "text": "failure so if your Bastion host goes down that means you can't connect to your PC until you bring it back up so",
    "start": "118979",
    "end": "125899"
  },
  {
    "text": "you know you can get around that by using the ec2 auto recovery feature so",
    "start": "125899",
    "end": "131280"
  },
  {
    "text": "what that will do is it'll make sure that within say Maisie if something happens to your instance it just going to automatically",
    "start": "131280",
    "end": "136740"
  },
  {
    "text": "reboot it's gonna have the same instanceid the same AP address and it'll",
    "start": "136740",
    "end": "142530"
  },
  {
    "text": "pretty quickly get you up and running if there's a availability zone issue then",
    "start": "142530",
    "end": "149580"
  },
  {
    "text": "you probably want to do like an auto scaling group of one across two Easy's and have some kind of script to get your",
    "start": "149580",
    "end": "155430"
  },
  {
    "text": "elastic ap back but just something to keep in mind a benefit of the bastion host is that it's really simple right so",
    "start": "155430",
    "end": "162420"
  },
  {
    "text": "it's easy to use you can get one up and running in a few minutes it doesn't require a lot of setup another benefit",
    "start": "162420",
    "end": "168060"
  },
  {
    "text": "of it is that now you really have this one instance that you have to monitor that you can audit because every",
    "start": "168060",
    "end": "174030"
  },
  {
    "text": "everyone is logging in through it so it's a central point that you can secure that you can focus on instead of versus",
    "start": "174030",
    "end": "180270"
  },
  {
    "text": "if you just had everything in public something that's that you can just directly associate into so then you've",
    "start": "180270",
    "end": "186450"
  },
  {
    "text": "got your site to site VPN so the way a site-to-site VPN works is on the EWS",
    "start": "186450",
    "end": "191730"
  },
  {
    "text": "side you set up a virtual private gateway the virtual private gateway is just our VPN concentrator and so you set",
    "start": "191730",
    "end": "198930"
  },
  {
    "text": "that up you connect it to your V PC and then on the unprecedent",
    "start": "198930",
    "end": "204870"
  },
  {
    "text": "so customer gateway is just a network device it's gonna have to support Ike and IPSec v2 and it doesn't have to",
    "start": "204870",
    "end": "212880"
  },
  {
    "text": "support BGP but ideally should so what happens when you set up a site-to-site",
    "start": "212880",
    "end": "219120"
  },
  {
    "text": "VPN is it's gonna set to different VPN tunnels and so if you have BGP if one of",
    "start": "219120",
    "end": "226530"
  },
  {
    "text": "the VPN tunnels fails it's gonna fail over to the other VPN tunnel automatically if you don't have BGP your",
    "start": "226530",
    "end": "233280"
  },
  {
    "text": "and I have to manually fail that over so you know just going to be some extra work and it's not gonna be an automated",
    "start": "233280",
    "end": "239130"
  },
  {
    "text": "failover one downside of using a site-to-site VPN is that you can run",
    "start": "239130",
    "end": "245580"
  },
  {
    "text": "into a bandwidth limit with your VPN device so on the Virtual Private Gateway side I've never seen a customer run into",
    "start": "245580",
    "end": "251970"
  },
  {
    "text": "a bandwidth limit there but on the customer gateway side you know your VPN device could have like a 500 megabyte",
    "start": "251970",
    "end": "259169"
  },
  {
    "text": "limit let's say for its IPSec connections so if you run into that",
    "start": "259169",
    "end": "264660"
  },
  {
    "text": "bandwidth limit you know well that now you know you're gonna have to get a higher end VPN device but a positive of",
    "start": "264660",
    "end": "272190"
  },
  {
    "text": "using this is that sites say VPNs are encrypted by default so now I've got an encrypted tunnel into your V PC so",
    "start": "272190",
    "end": "278790"
  },
  {
    "text": "everything is encrypted in transit by default so that's nice then you've got",
    "start": "278790",
    "end": "283950"
  },
  {
    "text": "either bass Direct Connect so your Connect is our product that we offer",
    "start": "283950",
    "end": "289350"
  },
  {
    "text": "that gives you dedicated fiber connection between AWS and your",
    "start": "289350",
    "end": "294840"
  },
  {
    "text": "on-premises location so Dirk Connect is available in different quantities so you can get it in one gigabit increments in",
    "start": "294840",
    "end": "301950"
  },
  {
    "text": "ten gigabit increments actually you can get in sub one gigabit increments if you want from some of our partners",
    "start": "301950",
    "end": "308160"
  },
  {
    "text": "there's many pops around the world the pops map to our regions so for example we have pops in Equinix in Virginia",
    "start": "308160",
    "end": "316290"
  },
  {
    "text": "which get you into our US East one region where pops out in Oregon which",
    "start": "316290",
    "end": "321570"
  },
  {
    "text": "get you into our US west to region so and so forth and Direct Connect also",
    "start": "321570",
    "end": "327270"
  },
  {
    "text": "gives you public and private bits so if if is a virtual interface the public",
    "start": "327270",
    "end": "332490"
  },
  {
    "text": "virtual interface gets you to our non VPC services so once you set up a public of if you get a BGP route table that's",
    "start": "332490",
    "end": "340020"
  },
  {
    "text": "gotten a have route to s3 to DynamoDB to other services that don't exist in in",
    "start": "340020",
    "end": "345840"
  },
  {
    "text": "the V PC so you only really need like one public of if perb Direct Connect",
    "start": "345840",
    "end": "351290"
  },
  {
    "text": "like you're also going to have private bits so private VIPs are private",
    "start": "351290",
    "end": "356370"
  },
  {
    "text": "connections between a given V PC and your on-premises network so the way you",
    "start": "356370",
    "end": "362370"
  },
  {
    "text": "said that up is you set up the private of if you tie it to V PC that V PC can",
    "start": "362370",
    "end": "368280"
  },
  {
    "text": "be in the same AWS account as your dark Connect or it can be in different either based account as from Direct Connect if",
    "start": "368280",
    "end": "376230"
  },
  {
    "text": "it's a different account the target account it has to approve the connection once it's approved it ties it to that V",
    "start": "376230",
    "end": "382950"
  },
  {
    "text": "PC is gonna have a VLAN tag associated with it and that VLAN tagging and come through on the on your on-premises side",
    "start": "382950",
    "end": "389700"
  },
  {
    "text": "so you can then map that in your network as you need to so the nice thing about the private VIPs is there",
    "start": "389700",
    "end": "396630"
  },
  {
    "text": "you can set up a lot of them you can do go across account now this gets you into your EBC without a cites a VPN",
    "start": "396630",
    "end": "403170"
  },
  {
    "text": "connection and without having a bastion host one thing to note though is private VIPs are not encrypted by default so if",
    "start": "403170",
    "end": "411000"
  },
  {
    "text": "you want encryption at rest which you should probably do you should just handle that on the app level which I",
    "start": "411000",
    "end": "416340"
  },
  {
    "text": "think it's a good practice anyway another benefit of Direct Connect is that it gives you transit over the it",
    "start": "416340",
    "end": "424710"
  },
  {
    "text": "abuse backbone for us regions so if you've got a direct connect and you just used one and you're accessing an s3",
    "start": "424710",
    "end": "431580"
  },
  {
    "text": "bucket in US OS 2 you're going to go over our private backbone to get there through Direct Connect one other thing",
    "start": "431580",
    "end": "439260"
  },
  {
    "text": "that you should be mindful of when you have a direct connect is the routing priority so you know to hook up Direct",
    "start": "439260",
    "end": "444960"
  },
  {
    "text": "Connect you modify your VPC route tables that were written specifically for private VIPs so you're gonna have you",
    "start": "444960",
    "end": "450630"
  },
  {
    "text": "know for example you know a route for your static site or for your site or blog for your on-premise network that",
    "start": "450630",
    "end": "456480"
  },
  {
    "text": "points back to over the direct connect connection and you have to know you know let's say you have a Direct Connect and",
    "start": "456480",
    "end": "463050"
  },
  {
    "text": "they'll say you also have a VPN connection going back to the same network with the same Sider block so how",
    "start": "463050",
    "end": "469260"
  },
  {
    "text": "do we make routing decisions when there's two routes that going back to the same IP address space well so the",
    "start": "469260",
    "end": "475290"
  },
  {
    "text": "priorities as follows first is just going to be static routes on the route table then it's going to be bgp",
    "start": "475290",
    "end": "480990"
  },
  {
    "text": "propagated routes like from the direct connect connection then it can be manually added static routes from your",
    "start": "480990",
    "end": "487080"
  },
  {
    "text": "VPN connection and then there's going to be BGP propagated routes from your VPN connection so if you have a VPN",
    "start": "487080",
    "end": "493740"
  },
  {
    "text": "connection and a direct connect going back to the same network it's going to prefer the BGP propagated routes over",
    "start": "493740",
    "end": "500340"
  },
  {
    "text": "the Direct Connect so if your Direct Connect fails then it's going to fail over to your VPN connection so it's",
    "start": "500340",
    "end": "506070"
  },
  {
    "text": "important to know that the other thing that's interesting with a public viv if you know one of your VIPs publicly fails",
    "start": "506070",
    "end": "513560"
  },
  {
    "text": "that's all public IP address space is going to fail back over to your regular internet connection so it should be a",
    "start": "513560",
    "end": "519840"
  },
  {
    "text": "pretty easy failover but what we and Tom's gonna talk about this more but what we see customers do is you know you can set up multiple",
    "start": "519840",
    "end": "526440"
  },
  {
    "text": "direct connects you can do diverse paths between them to you know have high availability there",
    "start": "526440",
    "end": "532399"
  },
  {
    "text": "so let's talk about some network security options in A to B us so first",
    "start": "532399",
    "end": "538589"
  },
  {
    "start": "537000",
    "end": "537000"
  },
  {
    "text": "of all how do you control access network access in your V pcs you have several",
    "start": "538589",
    "end": "543810"
  },
  {
    "text": "tools that we give you one of them is security group so security groups are",
    "start": "543810",
    "end": "549029"
  },
  {
    "text": "stateful firewalls essentially they are applied at the instance level instances going to have one or more security",
    "start": "549029",
    "end": "555000"
  },
  {
    "text": "groups apply to them they control egress and ingress to your instances and then",
    "start": "555000",
    "end": "561420"
  },
  {
    "text": "we've got knackles so network ecl's knackles are stateless filters they are",
    "start": "561420",
    "end": "566880"
  },
  {
    "text": "applied of the route table not of the instance level and then we've got route tables so route tables are applied to",
    "start": "566880",
    "end": "572850"
  },
  {
    "text": "your subnets in your vp see the route tables determine is this something that",
    "start": "572850",
    "end": "577890"
  },
  {
    "text": "public is a private Corral back over my VPN can it right over my Direct Connect",
    "start": "577890",
    "end": "583200"
  },
  {
    "text": "can you talk to as three through a private endpoint so it basically determines what the nature of your",
    "start": "583200",
    "end": "589589"
  },
  {
    "text": "subnet is then we've got the internet gateway so if you want to make a subnet",
    "start": "589589",
    "end": "595860"
  },
  {
    "text": "a public subnet you at you set up an Internet gateway you tie it to your V PC you add the default route so zero zero",
    "start": "595860",
    "end": "603270"
  },
  {
    "text": "zero zero slash zero and you point that to the Internet gateway so what that means is anything in a subnet with an",
    "start": "603270",
    "end": "608610"
  },
  {
    "text": "Internet gateway with a default route she's gonna go NAT out directly to the Internet through its public or elastic",
    "start": "608610",
    "end": "614970"
  },
  {
    "text": "IP through the influences public or elastic maybe then if you want have a private something that they can still egress outside the Internet you set up",
    "start": "614970",
    "end": "622110"
  },
  {
    "text": "an ADD gateway so in that gateways a managed endpoint essentially and so then instead of going directly out from its",
    "start": "622110",
    "end": "628740"
  },
  {
    "text": "elastic IP address or public IP address your instances are going to go out through the elastic IP address of the",
    "start": "628740",
    "end": "634470"
  },
  {
    "text": "NAT gateway then lastly we have something called an s3 private endpoint so if you want to get to s3 from a",
    "start": "634470",
    "end": "642120"
  },
  {
    "text": "public subnet and you don't want to go through NAT you can set up an s3 private endpoint and then you have direct",
    "start": "642120",
    "end": "647310"
  },
  {
    "text": "routing to s3 without going out over the Internet a nice feature of the s3",
    "start": "647310",
    "end": "652350"
  },
  {
    "text": "private endpoint is that it allows you to give access to all of us three are",
    "start": "652350",
    "end": "658020"
  },
  {
    "text": "only two specific buckets so you can apply an access policy to your private on point so for example if you've got",
    "start": "658020",
    "end": "663870"
  },
  {
    "text": "your instances are pulling down you know RPM packages are some kind of security updates off of a specific s3 bucket you",
    "start": "663870",
    "end": "670740"
  },
  {
    "text": "can whitelist only that bucket you don't have to open up access to all of us three so now let's talk about some",
    "start": "670740",
    "end": "677210"
  },
  {
    "start": "675000",
    "end": "675000"
  },
  {
    "text": "network visibility tools so we offer you",
    "start": "677210",
    "end": "682710"
  },
  {
    "text": "several tools that allow you to kind of see what's going on in your V PC and",
    "start": "682710",
    "end": "687750"
  },
  {
    "text": "also in your AWS account in general so for the first thing and I encourage everybody to turn this on is either",
    "start": "687750",
    "end": "693570"
  },
  {
    "text": "betas cloud trail so cloud trail is our service that gives you an audit log of API access against a",
    "start": "693570",
    "end": "699660"
  },
  {
    "text": "the BS so really when you use the console for example those are all API calls so when you change your security",
    "start": "699660",
    "end": "704670"
  },
  {
    "text": "group rule or your launch an instance or curate that's three bucket that all gets recorded in cloud trail it records what",
    "start": "704670",
    "end": "711510"
  },
  {
    "text": "IP address that call came from what time the call came from the user agent that",
    "start": "711510",
    "end": "716640"
  },
  {
    "text": "made the call all this useful information so you should make sure that this is on because if you ever have to audit what's going on your EWS account",
    "start": "716640",
    "end": "723779"
  },
  {
    "text": "cloud trail logs are essential and you can turn on cloud trail for one region you can turn on cloud trail for all",
    "start": "723779",
    "end": "729360"
  },
  {
    "text": "regions I would just recommend you can want to click turn it on for all regions and I think another good practice is if",
    "start": "729360",
    "end": "734820"
  },
  {
    "text": "you've got multiple AWS accounts for your organization you should have cloud trail just all flowing in the",
    "start": "734820",
    "end": "740610"
  },
  {
    "text": "centralized bucket and one of the accounts so your security team can audit all those logs then we've also got VPC",
    "start": "740610",
    "end": "748170"
  },
  {
    "text": "flow logs so VPC flow logs give you metadata about the packets going around",
    "start": "748170",
    "end": "754320"
  },
  {
    "text": "in your V PC so you can see basically any traffic what it where it's coming from what port words going anything that",
    "start": "754320",
    "end": "761940"
  },
  {
    "text": "goes into your V PC and whether that connection was allowed or denied so V PC",
    "start": "761940",
    "end": "767730"
  },
  {
    "text": "flow logs the way they work is you turn them on per vbc they then go into cloud watch logs which is our centralized",
    "start": "767730",
    "end": "773880"
  },
  {
    "text": "logging service and from there you can export them into s3 you can export them into elasticsearch so it allows you to",
    "start": "773880",
    "end": "781290"
  },
  {
    "text": "export it into this nations where you can consume them with some kind of tool we also have s3 bucket logs so as three",
    "start": "781290",
    "end": "788700"
  },
  {
    "text": "bucket logs are essentially excess logs you know for bigger s3 buckets so you",
    "start": "788700",
    "end": "795630"
  },
  {
    "text": "should turn those on because then you'll know did somebody access my data in s3 we've also got",
    "start": "795630",
    "end": "802410"
  },
  {
    "text": "yield B logs so yell B logs are gonna web access logs for your LV so instead of having to turn on logging at all the",
    "start": "802410",
    "end": "808800"
  },
  {
    "text": "web servers behind your you'll be you can just turn them on on the elbe and those get stored in s3 as well and then",
    "start": "808800",
    "end": "815340"
  },
  {
    "text": "lastly we have either BS config so either because config is basically a point in time snapshot of your AWS",
    "start": "815340",
    "end": "821550"
  },
  {
    "text": "account on certain resources in your either base account so you can tell you know 15 minutes ago what instances I had",
    "start": "821550",
    "end": "828510"
  },
  {
    "text": "running what were the instance ID is what ian eyes were attached to those instances what security groups were",
    "start": "828510",
    "end": "834750"
  },
  {
    "text": "attached those instances so once you consume your config logs or snapshots",
    "start": "834750",
    "end": "840840"
  },
  {
    "text": "what you can do is you can for example in your centralized logging tool where you're sending all these things say let",
    "start": "840840",
    "end": "846750"
  },
  {
    "text": "me list all of my V PC cider blocks across all of my accounts so let's you",
    "start": "846750",
    "end": "852630"
  },
  {
    "text": "get that kind of visibility so what I would recommend for customers doing to do is basically take all these logs and",
    "start": "852630",
    "end": "858480"
  },
  {
    "text": "send them to some centralized location so they can be an s3 write a lot of them",
    "start": "858480",
    "end": "863850"
  },
  {
    "text": "end up in s3 but if you ever have to pull them if you have to manually pull your cloud trail logs at a one bucket",
    "start": "863850",
    "end": "869250"
  },
  {
    "text": "and your three bucket logs at another one it might take you a while to pull and analyze and make any sense out of",
    "start": "869250",
    "end": "874320"
  },
  {
    "text": "those logs but if you for example send all these logs to something like our elastic search service or to a partner",
    "start": "874320",
    "end": "880290"
  },
  {
    "text": "solution like Splunk or to cloud watch logs basically it allows you to go into",
    "start": "880290",
    "end": "886230"
  },
  {
    "text": "that one place and start searching for whatever it is you need to search for so for example if you have some anomalous",
    "start": "886230",
    "end": "892290"
  },
  {
    "text": "network activity and you're looking for a certain IP address you can now pull it up and you're going to see where it shows up in your cloud trail logs and",
    "start": "892290",
    "end": "898290"
  },
  {
    "text": "where it shows up in your flow logs and so on so I think that's something that's super useful for customers so now let's",
    "start": "898290",
    "end": "907020"
  },
  {
    "start": "906000",
    "end": "906000"
  },
  {
    "text": "talk about IDs and IPS intrusion detection and intrusion protection",
    "start": "907020",
    "end": "912480"
  },
  {
    "text": "systems and so there's two different kinds of solutions for that or actually",
    "start": "912480",
    "end": "917700"
  },
  {
    "text": "three kinds of solutions for that so the first kind is agent based solutions so these are available in our ADA based",
    "start": "917700",
    "end": "924540"
  },
  {
    "text": "marketplace and so these the way these work and some examples are Trend Micro deep security and alert logic",
    "start": "924540",
    "end": "930870"
  },
  {
    "text": "threat manager and so the way these work are you basically run an agent on your instances that agent sends data back up",
    "start": "930870",
    "end": "937860"
  },
  {
    "text": "to whatever the centralized service that you're running and you can then go into the dashboard for the service and look",
    "start": "937860",
    "end": "943110"
  },
  {
    "text": "at what's going on in your instances you get alerts of something you know weird is happening and so the nice thing about",
    "start": "943110",
    "end": "949260"
  },
  {
    "text": "these solutions is they scale they're not blocking so you know if something",
    "start": "949260",
    "end": "955200"
  },
  {
    "text": "goes wrong with the service it doesn't matter you know the agent just stops reporting I mean that's not great but",
    "start": "955200",
    "end": "960570"
  },
  {
    "text": "you get your instances are still gonna function there's two kind of network connectivity but the costs usually",
    "start": "960570",
    "end": "966390"
  },
  {
    "text": "scaled by the number of hosts so if you've got a lot of instances you know you you could have some cost issues",
    "start": "966390",
    "end": "971880"
  },
  {
    "text": "there right so the second option is inline solutions so these are also available on the EWS marketplace and so",
    "start": "971880",
    "end": "979260"
  },
  {
    "text": "examples of these are Cisco brocade Ford and Palo Alto all essentially have network appliances you run them you use",
    "start": "979260",
    "end": "986550"
  },
  {
    "text": "them as your nat gateway so all your traffic egress is through them and so",
    "start": "986550",
    "end": "991830"
  },
  {
    "text": "you know once you have those set up you you get in line you know you can it's active protection but the problem is",
    "start": "991830",
    "end": "997950"
  },
  {
    "text": "that it can be a single point of failure right so if your device fails you then",
    "start": "997950",
    "end": "1003890"
  },
  {
    "text": "have to you your instance those can go out to the internet anymore so you have to make sure that you set them up in a way that's highly available so the third",
    "start": "1003890",
    "end": "1011690"
  },
  {
    "text": "option is to egress through Direct Connect so basically you have on premise",
    "start": "1011690",
    "end": "1017030"
  },
  {
    "text": "ids/ips devices already you're gonna basically send all your traffic so your default route is going to go back over",
    "start": "1017030",
    "end": "1023480"
  },
  {
    "text": "your Direct Connect and now through your own network so if you do this right this",
    "start": "1023480",
    "end": "1029600"
  },
  {
    "text": "also makes your on-premise network a single point of failure so you have to make sure that your on-premise network",
    "start": "1029600",
    "end": "1034640"
  },
  {
    "text": "is reliable if to make sure that your Direct Connect is set up in a highly available way so what we recommend is in",
    "start": "1034640",
    "end": "1040670"
  },
  {
    "text": "this case having a redundant direct connects and also not just having them redundant you should also have them over",
    "start": "1040670",
    "end": "1046819"
  },
  {
    "text": "diverse paths so if you have to direct connects but they're going over the same path and something happens along the path that are both going to have issues",
    "start": "1046819",
    "end": "1052670"
  },
  {
    "text": "so you want to make sure that you have diverse paths another thing is this makes DNS more interesting because you",
    "start": "1052670",
    "end": "1058910"
  },
  {
    "text": "know you have split dns sometimes and so it's going to make that a little bit more challenging there and",
    "start": "1058910",
    "end": "1066760"
  },
  {
    "text": "so now Tom's going to talk about harvard cloud shield and how they basically",
    "start": "1066760",
    "end": "1072440"
  },
  {
    "text": "implemented some of these options in practice thankfully uh how's everyone",
    "start": "1072440",
    "end": "1079010"
  },
  {
    "text": "doing come on so I'm gonna talk about cloud shield and",
    "start": "1079010",
    "end": "1085940"
  },
  {
    "text": "just one thing we're gonna take question the answers after the session out in the hall I'm gonna be available for about an",
    "start": "1085940",
    "end": "1091190"
  },
  {
    "text": "hour Leo's a little less time but if you want to talk to us about anything you've heard here be happy to talk to you after",
    "start": "1091190",
    "end": "1098830"
  },
  {
    "text": "so Harvard cloud shield what is cloud shield it has a great name well firstly",
    "start": "1098830",
    "end": "1105410"
  },
  {
    "start": "1101000",
    "end": "1101000"
  },
  {
    "text": "first it's a network security platform it's comprised of routers firewalls global site load balancing physical",
    "start": "1105410",
    "end": "1113090"
  },
  {
    "text": "appliances and it gives us proactive response for through IPS antivirus and",
    "start": "1113090",
    "end": "1119510"
  },
  {
    "text": "other proactive network security technologies it's a traffic aggregation",
    "start": "1119510",
    "end": "1125750"
  },
  {
    "text": "inspection point all traffic in into and out of and between applications and AWS",
    "start": "1125750",
    "end": "1132170"
  },
  {
    "text": "filters through this platform weaves our existing information security technologies for auditing and analysis",
    "start": "1132170",
    "end": "1138590"
  },
  {
    "text": "of traffic for detection and finding out if anything really bad happened and finally",
    "start": "1138590",
    "end": "1144230"
  },
  {
    "text": "it's redundant and geographically diverse we have two points of presence the United States each pop is a mirror",
    "start": "1144230",
    "end": "1151370"
  },
  {
    "text": "image of each other we've no shared infrastructure or IP addresses and all of the pop both of the pops are",
    "start": "1151370",
    "end": "1157670"
  },
  {
    "text": "separated by at least 400 miles so I want to talk about the goals and",
    "start": "1157670",
    "end": "1163580"
  },
  {
    "text": "alternatives some of these are things you that we've talked about but for the goals we are one of our top goals is",
    "start": "1163580",
    "end": "1170000"
  },
  {
    "start": "1166000",
    "end": "1166000"
  },
  {
    "text": "provide high availability we don't want to rely on the Harvard campus Network we want to provide high availability net to",
    "start": "1170000",
    "end": "1176690"
  },
  {
    "text": "avoid any issues and we need to be geographically just dispersed as I",
    "start": "1176690",
    "end": "1182480"
  },
  {
    "text": "mentioned before we won't provide visibility so we use tap and spam",
    "start": "1182480",
    "end": "1188630"
  },
  {
    "text": "technologies into the network flows and we take these from both pops and we",
    "start": "1188630",
    "end": "1195200"
  },
  {
    "text": "backhaul to and these are existing tools so we didn't have to deploy new tools new",
    "start": "1195200",
    "end": "1200539"
  },
  {
    "text": "technologies that we weren't familiar with and we didn't have to split our IDS's to have two different places that",
    "start": "1200539",
    "end": "1207499"
  },
  {
    "text": "we'd have to aggregate later we want to provide next general next-generation",
    "start": "1207499",
    "end": "1213109"
  },
  {
    "text": "firewall protections so as I said we want to have proactive response so intrusion protection not intrusion",
    "start": "1213109",
    "end": "1219259"
  },
  {
    "text": "detection because we already have that visibility Aimie antivirus it's not the",
    "start": "1219259",
    "end": "1225079"
  },
  {
    "text": "be-all end-all but it's better than some things it's better than nothing frankly we want provide layer four to seven",
    "start": "1225079",
    "end": "1231799"
  },
  {
    "text": "protections most firewalls today they stop at layer four we want to go all the way through the stack where possible and",
    "start": "1231799",
    "end": "1237489"
  },
  {
    "text": "basic denial of service mitigations we want to make things simpler for",
    "start": "1237489",
    "end": "1243409"
  },
  {
    "text": "end-users our on premise we have massive amounts of ACLs very complex sometimes",
    "start": "1243409",
    "end": "1249109"
  },
  {
    "text": "incredibly hard to get out to the internet sometimes they can't get to the internet at all unless they jump through three different hoops so we want to stop",
    "start": "1249109",
    "end": "1255469"
  },
  {
    "text": "that we want to provide inline web filtering and other protections to limit the amount of post creation",
    "start": "1255469",
    "end": "1261109"
  },
  {
    "text": "configuration of servers and we want to remove the need to have multiple systems that do functionally the same thing we",
    "start": "1261109",
    "end": "1268009"
  },
  {
    "text": "don't need a specific proxy if we can do it all in one box with the capacity we have so what else did we look at we",
    "start": "1268009",
    "end": "1275059"
  },
  {
    "start": "1273000",
    "end": "1273000"
  },
  {
    "text": "looked at security agents as we have said they're really easy to configure and there's no additional overhead cost",
    "start": "1275059",
    "end": "1280789"
  },
  {
    "text": "but it is actually more expensive to our end customers we actually have to make a bigger server that has more memory more",
    "start": "1280789",
    "end": "1287839"
  },
  {
    "text": "CPU because these agents consume resources on the server makes it very hard to right-size for end-users so",
    "start": "1287839",
    "end": "1294019"
  },
  {
    "text": "ultimately they have to eat some of those costs and they're reactive there on the server so if something goes off",
    "start": "1294019",
    "end": "1300439"
  },
  {
    "text": "with a security agent it's already at the server if something has gone wrong you want to stop it before it gets that",
    "start": "1300439",
    "end": "1306739"
  },
  {
    "text": "point so then we go to inline virtual firewalls they replace the NAT instances and with virtual firewall appliances and",
    "start": "1306739",
    "end": "1314509"
  },
  {
    "text": "it gives us the that proactive response that we want to have it allows us to right-size the instances for our clients",
    "start": "1314509",
    "end": "1321109"
  },
  {
    "text": "so they don't have to worry about that but it has really high overhead costs we have to have one instance per",
    "start": "1321109",
    "end": "1327679"
  },
  {
    "text": "availability zone and you have to make it probably about three times the size you would expect to have all the UTM features is they're all",
    "start": "1327679",
    "end": "1334289"
  },
  {
    "text": "done in software and the licensing cost and these are very high the cost per",
    "start": "1334289",
    "end": "1340379"
  },
  {
    "text": "megabit of a virtual appliance whether it's in Amazon or on Prem is this it's",
    "start": "1340379",
    "end": "1345690"
  },
  {
    "text": "about three to five times higher per megabit then instead of a physical appliance so you really have to factor",
    "start": "1345690",
    "end": "1352289"
  },
  {
    "text": "all that and we ended up going with a third option as a result of all this and there's really complex VPC routing so",
    "start": "1352289",
    "end": "1359879"
  },
  {
    "text": "we'll you said you need to be able to self-heal these you need to be able to route around failures and availability",
    "start": "1359879",
    "end": "1365309"
  },
  {
    "text": "zone so ultimately they're really hard to manage and trying to get the configuration back to where they were",
    "start": "1365309",
    "end": "1371039"
  },
  {
    "text": "we're just gonna be something that we didn't want to do the other thing we found is as a result of elastic load",
    "start": "1371039",
    "end": "1378629"
  },
  {
    "text": "balancers we can't use them in front of to make the inbound more available",
    "start": "1378629",
    "end": "1383789"
  },
  {
    "text": "because they can only send to the main interface of this instance they're attached to so we couldn't have multiple",
    "start": "1383789",
    "end": "1389909"
  },
  {
    "text": "interfaces to shard the load where possible so ultimately that led us to what we decided to build and I'm gonna",
    "start": "1389909",
    "end": "1396450"
  },
  {
    "text": "go a little bit deep technical so I'm sure everyone will like that and I'm gonna talk about her network",
    "start": "1396450",
    "end": "1401700"
  },
  {
    "text": "connectivity this was a very large effort and this is how we had to reckon act in 2015",
    "start": "1401700",
    "end": "1407129"
  },
  {
    "start": "1404000",
    "end": "1404000"
  },
  {
    "text": "we had no convergence between these two paths except in Virginia where we landed",
    "start": "1407129",
    "end": "1412230"
  },
  {
    "text": "in the Equinix facility that Leo talked about when we had one provider for both circuits so ultimately we want to remove",
    "start": "1412230",
    "end": "1418980"
  },
  {
    "text": "the thought of having a single point of failure in Virginia and we want to have a third provider so when we're going to",
    "start": "1418980",
    "end": "1426210"
  },
  {
    "text": "deploy our Direct Connect this was originally what we're going to do this year so we bring in the second provider",
    "start": "1426210",
    "end": "1431490"
  },
  {
    "text": "we'd remove Virginia but we realized we had a really bad inflection point in New York Metro we didn't have any common",
    "start": "1431490",
    "end": "1437999"
  },
  {
    "text": "spans we didn't have any common buildings but they're all right there and I'm sure as people know Hurricane sandy didn't really do well in that area",
    "start": "1437999",
    "end": "1443999"
  },
  {
    "text": "so as we built up this solution we decided to go a little bit crazy and we",
    "start": "1443999",
    "end": "1450179"
  },
  {
    "text": "put went out to Cleveland so we brought in a third provider we have no single",
    "start": "1450179",
    "end": "1456059"
  },
  {
    "text": "inflection points buildings or spans we can lose up to two links easily three lengths we're hurting a little bit but",
    "start": "1456059",
    "end": "1462629"
  },
  {
    "text": "we're functional and what you see here is the links in blue are site-to-site links and the links in yellow and red are actually",
    "start": "1462629",
    "end": "1469740"
  },
  {
    "text": "ordered to reckon X so we've four direct",
    "start": "1469740",
    "end": "1475980"
  },
  {
    "start": "1473000",
    "end": "1473000"
  },
  {
    "text": "connects the AWS to were over the waves that you saw on that picture and then to our physical cross connections from AWS",
    "start": "1475980",
    "end": "1482910"
  },
  {
    "text": "to our routing infrastructure and then we have the private links one via Cleveland and and one via the 95",
    "start": "1482910",
    "end": "1490500"
  },
  {
    "text": "corridor they're all this thing from a direct connect links from provider perspective and they land in two",
    "start": "1490500",
    "end": "1496470"
  },
  {
    "text": "different areas of our Boston metropolitan etwork so we don't have a reliant on a single routing",
    "start": "1496470",
    "end": "1502050"
  },
  {
    "text": "infrastructure we stretch it across our campus backbone talking a little bit",
    "start": "1502050",
    "end": "1507930"
  },
  {
    "text": "about our network design so here we have essentially what we've built at a very",
    "start": "1507930",
    "end": "1514140"
  },
  {
    "text": "high level we have the two points of presence with the routes which platform and to direct connects each each",
    "start": "1514140",
    "end": "1521610"
  },
  {
    "text": "firewall has two direct connects and this actually reflected by the routes which it was really important to us to",
    "start": "1521610",
    "end": "1527850"
  },
  {
    "text": "have 20 gigabit worth of direct connect available at any given time to any firewall and since we have active",
    "start": "1527850",
    "end": "1534480"
  },
  {
    "text": "passive firewalls or active standby they allow it we reflect them back through",
    "start": "1534480",
    "end": "1540330"
  },
  {
    "text": "VLANs as you'll see so we can always have the full capacity of that pop available to either firewall each",
    "start": "1540330",
    "end": "1547680"
  },
  {
    "text": "location has two global site load balancing platforms which are not pictured here and they're doing health",
    "start": "1547680",
    "end": "1554100"
  },
  {
    "text": "checks so what we found out as we built this is return path from Amazon is not",
    "start": "1554100",
    "end": "1560340"
  },
  {
    "text": "guaranteed if we send a packet in on the left it might come out on the right so what we had to do is we had to make a",
    "start": "1560340",
    "end": "1566430"
  },
  {
    "text": "primary and a standby site with these global site load balancers they send a",
    "start": "1566430",
    "end": "1572100"
  },
  {
    "text": "packet in if they don't get the response that's essentially the standby site because it went out the other direction",
    "start": "1572100",
    "end": "1577110"
  },
  {
    "text": "so both sites are actively trying to see if they're up and whichever one gets the packet back is up and each location has",
    "start": "1577110",
    "end": "1587280"
  },
  {
    "text": "independent public IP space internet connections so we don't have a dependency between either of the sites",
    "start": "1587280",
    "end": "1593610"
  },
  {
    "text": "the only dependence we have is to get to the internet to research and education networks we have to cross",
    "start": "1593610",
    "end": "1600060"
  },
  {
    "text": "these point-to-point links as i2 research and education is not easily accessible from all locations we bring",
    "start": "1600060",
    "end": "1607170"
  },
  {
    "text": "that back to campus but if for some reason these IPS get severed",
    "start": "1607170",
    "end": "1612300"
  },
  {
    "text": "I too will would fall back to the commercial Internet so we're gonna deep",
    "start": "1612300",
    "end": "1618180"
  },
  {
    "text": "dive into a single site in really explicit detail so what you see here is",
    "start": "1618180",
    "end": "1624690"
  },
  {
    "text": "essentially how we've built this system each firewall gets a single firewall",
    "start": "1624690",
    "end": "1630300"
  },
  {
    "text": "partition think of it like a slice of a cake the benefit here is it gives us it",
    "start": "1630300",
    "end": "1636020"
  },
  {
    "text": "allows us to not buy a whole bunch of very expensive firewalls we can actually",
    "start": "1636020",
    "end": "1642060"
  },
  {
    "text": "buy a medium medium large sized firewall and load it up to its capacity much like",
    "start": "1642060",
    "end": "1648210"
  },
  {
    "text": "virtual machines have allowed physical computing to be have a lower TCO these",
    "start": "1648210",
    "end": "1654900"
  },
  {
    "text": "virtual firewall instances have essentially done the same thing they're great where you can buy a system and you know",
    "start": "1654900",
    "end": "1661050"
  },
  {
    "text": "basically use it to its capacity and all of the traffic has to transit the",
    "start": "1661050",
    "end": "1666180"
  },
  {
    "text": "firewalls into or out of our PPC that is the only route to the internet our",
    "start": "1666180",
    "end": "1672450"
  },
  {
    "text": "campus or other VP sees is through the firewall it's SEP where we have to do",
    "start": "1672450",
    "end": "1677490"
  },
  {
    "text": "back-end connections for real time database needs so let's go into this and",
    "start": "1677490",
    "end": "1684480"
  },
  {
    "text": "look at this really in-depth we're gonna look at this from a single V PC point of view and how all the routing and the BGP",
    "start": "1684480",
    "end": "1691020"
  },
  {
    "text": "works so each tenant gets a private autonomous system number ASM the router",
    "start": "1691020",
    "end": "1698250"
  },
  {
    "text": "takes in a default route and sent it to the firewall the router gets it from our upstream internet provider we don't",
    "start": "1698250",
    "end": "1704280"
  },
  {
    "text": "generate it we don't want to generate because if something north of us happens we want to fail each VP C shares a",
    "start": "1704280",
    "end": "1711960"
  },
  {
    "text": "single IP outbound for internet access that's actually per per pop all of this",
    "start": "1711960",
    "end": "1718110"
  },
  {
    "text": "is per pump and that's really beneficial for us because we have a lot of providers that really whitelist our IP",
    "start": "1718110",
    "end": "1724500"
  },
  {
    "text": "addresses so instead of providing them eight different elastic IPS we provide them to two of our IPS that are",
    "start": "1724500",
    "end": "1731990"
  },
  {
    "text": "owned and delegated to us so we don't have to worry about them saying well that's going to change each application",
    "start": "1731990",
    "end": "1740180"
  },
  {
    "text": "inbound gets allocated a one to fqdn net what doesn't want to fqdn doesn't make",
    "start": "1740180",
    "end": "1746150"
  },
  {
    "text": "much sense but really we're giving it a public and a private IP one each and",
    "start": "1746150",
    "end": "1751220"
  },
  {
    "text": "we're pointing it at a DNS inside we're pointing this directly and you'll be",
    "start": "1751220",
    "end": "1756590"
  },
  {
    "text": "doing the translation it allows us to deal with scalings or contractions of",
    "start": "1756590",
    "end": "1763550"
  },
  {
    "text": "eel bees or al bees and these are realized as / 32 BGP announcements up to",
    "start": "1763550",
    "end": "1770480"
  },
  {
    "text": "the router and these occur on the firewall each of the firewalls is BGP paired to AWS as I said one / Direct",
    "start": "1770480",
    "end": "1778130"
  },
  {
    "text": "Connect and which are the VLANs and links reflected from the routes which platform and only we only send default",
    "start": "1778130",
    "end": "1786410"
  },
  {
    "text": "to AWS we only send the default route we never sent anything from campus that way we are guaranteed to have the widest",
    "start": "1786410",
    "end": "1792740"
  },
  {
    "text": "possible network access and if we need to have more specificity it's really not a problem but we use auditing tools as",
    "start": "1792740",
    "end": "1800120"
  },
  {
    "text": "Leo mentioned to make sure that if someone ends put something into a route",
    "start": "1800120",
    "end": "1805310"
  },
  {
    "text": "table we've detected that and alerted on that so this gives us the compliance of",
    "start": "1805310",
    "end": "1811010"
  },
  {
    "text": "fact factor that if someone has a route to the Internet and we announce in default route we win because of the",
    "start": "1811010",
    "end": "1817220"
  },
  {
    "text": "route preference and the router takes in all of the / 32s and summarizes it sends it to on campus",
    "start": "1817220",
    "end": "1824660"
  },
  {
    "text": "the internet and via the campus the internet Reese Internet to research and education network so let's talk a little",
    "start": "1824660",
    "end": "1833990"
  },
  {
    "text": "bit how we did a routing so what you have here is a sample of our routing system for our direct connects these are",
    "start": "1833990",
    "end": "1841130"
  },
  {
    "start": "1836000",
    "end": "1836000"
  },
  {
    "text": "from the firewalls that AWS what you'll notice is we use BFD and BGP and we have",
    "start": "1841130",
    "end": "1847610"
  },
  {
    "text": "the lowest timers we can allow for BFD and we use them in every single peer and hop it was really important for us to",
    "start": "1847610",
    "end": "1853970"
  },
  {
    "text": "get this for BGP what we did is we dropped their advertisement interval to",
    "start": "1853970",
    "end": "1859100"
  },
  {
    "text": "one second that's as low as this one provider provides and allows us I be GP like reconvergence",
    "start": "1859100",
    "end": "1865240"
  },
  {
    "text": "times you can see that we explicitly disable ipv6 ipv6 could create unknown",
    "start": "1865240",
    "end": "1873310"
  },
  {
    "text": "wait times hold times in PGP we want to make sure that we know what's going to happen we don't think we know what's",
    "start": "1873310",
    "end": "1879730"
  },
  {
    "text": "going to happen and we only allow the AWS Sider network from the BGP peer",
    "start": "1879730",
    "end": "1886020"
  },
  {
    "text": "prevents leaking routes upstream that are completely accidental but sometimes",
    "start": "1886020",
    "end": "1891550"
  },
  {
    "text": "inevitable and what you see here this route map out prepend ASM this is",
    "start": "1891550",
    "end": "1896950"
  },
  {
    "text": "actually how we do our primary stand by sight we prepend our autonomous our private autonomous system number n times",
    "start": "1896950",
    "end": "1904150"
  },
  {
    "text": "for the primary site it's 1 or 2 for the stand by sight it's 3 or 4 that way we",
    "start": "1904150",
    "end": "1910060"
  },
  {
    "text": "always appear further but we already have the routing the routing relationships created and if we fail our",
    "start": "1910060",
    "end": "1917020"
  },
  {
    "text": "primary sight our secondary sites the next best route BGP will naturally reconverge very quickly and this",
    "start": "1917020",
    "end": "1924460"
  },
  {
    "text": "guarantees us the return path and solves the orphaned packet problem so this is a",
    "start": "1924460",
    "end": "1932830"
  },
  {
    "start": "1930000",
    "end": "1930000"
  },
  {
    "text": "sum of our routing config you can see we use peer templates peer templates allow",
    "start": "1932830",
    "end": "1938590"
  },
  {
    "text": "us to prevent any duplication having to worry about changing a value in multiple places so we make sure we have a",
    "start": "1938590",
    "end": "1945880"
  },
  {
    "text": "consistent view and configuration between all of our peers we have a lot",
    "start": "1945880",
    "end": "1951190"
  },
  {
    "text": "of Pierce into AWS so it's important to make sure this works we use the default",
    "start": "1951190",
    "end": "1956500"
  },
  {
    "text": "originate to pass the default route from upstream down to the router and the firewall and this will only happen if",
    "start": "1956500",
    "end": "1963730"
  },
  {
    "text": "the router has a default route itself this allows us to detect and withdraw",
    "start": "1963730",
    "end": "1970240"
  },
  {
    "text": "our routes from AWS allows us the failover sites we could take out the default route from upstream and",
    "start": "1970240",
    "end": "1976060"
  },
  {
    "text": "everything naturally Cascades and we do this through something called BGP conditional advertisement essentially",
    "start": "1976060",
    "end": "1982900"
  },
  {
    "text": "it's it's an if statement if the firewall sees the default route announced the routes up from the",
    "start": "1982900",
    "end": "1988960"
  },
  {
    "text": "firewall for public IP and the VPC else only announced the infrastructure networks so we can troubleshoot things",
    "start": "1988960",
    "end": "1997230"
  },
  {
    "text": "and since we're using fire wall partitions one thing we found is we the conditional advertisement could",
    "start": "1997350",
    "end": "2003470"
  },
  {
    "text": "theoretically have a problem if a management network leaked into our private networks so since we have these",
    "start": "2003470",
    "end": "2011330"
  },
  {
    "text": "partitions our management of the firewall is completely segregated and we can't theoretically create a unknown",
    "start": "2011330",
    "end": "2018760"
  },
  {
    "text": "split-brain scenario where we thought we had everything set but somehow our",
    "start": "2018760",
    "end": "2024020"
  },
  {
    "text": "campus actually injected the default route and you can see here we adjusted",
    "start": "2024020",
    "end": "2030470"
  },
  {
    "text": "advertisement or valgus visit vendor actually supports zero so we have zero upstream which is instantaneous but it",
    "start": "2030470",
    "end": "2038000"
  },
  {
    "text": "negotiates that the lowest possible value so downstream we actually negotiate to one a second and then we",
    "start": "2038000",
    "end": "2044900"
  },
  {
    "text": "aggregate all of the 32s from all of the firewall partitions into a single network and announce them upstream so",
    "start": "2044900",
    "end": "2052908"
  },
  {
    "start": "2052000",
    "end": "2052000"
  },
  {
    "text": "for route filtering these are some of the key items we did we made sure that we filter on the public nets and we only",
    "start": "2052909",
    "end": "2060350"
  },
  {
    "text": "allow 32 s that come from the firewall we did this on both the router in the firewall to make sure that it's exactly",
    "start": "2060350",
    "end": "2066080"
  },
  {
    "text": "what we want and nothing else and we also dynamically create this VPC Sider",
    "start": "2066080",
    "end": "2072679"
  },
  {
    "text": "network from her orchestration system which we'll talk about it was only our vp c network to be accepted from AWS",
    "start": "2072679",
    "end": "2079879"
  },
  {
    "text": "peers nothing lower nothing bigger so we",
    "start": "2079880",
    "end": "2084919"
  },
  {
    "text": "had to we have a lot of pieces moving here and what we realize is if we did this manually it would take us a couple",
    "start": "2084919",
    "end": "2090800"
  },
  {
    "text": "hours couple days would never be right and how do we make sure we don't we screw it up or don't screw it up every",
    "start": "2090800",
    "end": "2096860"
  },
  {
    "text": "single time so we built network orchestration so we built the serverless architecture for a manager of managers",
    "start": "2096860",
    "end": "2103930"
  },
  {
    "start": "2098000",
    "end": "2098000"
  },
  {
    "text": "because we want to avoid managing CPU disk memory we just want to work and",
    "start": "2103930",
    "end": "2110810"
  },
  {
    "text": "what we couldn't do is predict how much traffic we're going to use in the future couldn't understand if we were gonna",
    "start": "2110810",
    "end": "2116600"
  },
  {
    "text": "have one API call procession or 4,000 API calls we would just want to scale we don't want to think about it so this",
    "start": "2116600",
    "end": "2123560"
  },
  {
    "text": "give us the choices of nodejs Java or Python so historically Harvard is used",
    "start": "2123560",
    "end": "2129470"
  },
  {
    "text": "Python internally it's a really easy language to learn so we chose Python because essentially the maintenance is easier",
    "start": "2129470",
    "end": "2136130"
  },
  {
    "text": "for end-users there's existing knowledge and frankly it's all just readable so we",
    "start": "2136130",
    "end": "2145540"
  },
  {
    "text": "had to interface with five different networker management products PHP there's an IBM system some firewall",
    "start": "2145540",
    "end": "2152510"
  },
  {
    "text": "management and global site load balancing this actually gave us three different api's we had to interface with",
    "start": "2152510",
    "end": "2158320"
  },
  {
    "text": "rest JSON RPC and internal toolset none of them work the same way and we use the",
    "start": "2158320",
    "end": "2165500"
  },
  {
    "text": "schema list database to allow us to pass functions which pass state between the functions as you'll see in the next",
    "start": "2165500",
    "end": "2171200"
  },
  {
    "text": "slide we have we've split out all of the functions into their own container and",
    "start": "2171200",
    "end": "2178000"
  },
  {
    "text": "we can update one without breaking the others so we need to be able to essentially glue them back together",
    "start": "2178000",
    "end": "2184750"
  },
  {
    "text": "so at a high conceptual level this is essentially what we built for network orchestration we made a API first as you",
    "start": "2184750",
    "end": "2192050"
  },
  {
    "text": "can see here we didn't want to have to write our own wrappers around this there",
    "start": "2192050",
    "end": "2197120"
  },
  {
    "text": "are ways to make this work easily and then we have the service functions they",
    "start": "2197120",
    "end": "2202310"
  },
  {
    "text": "actually interface with cloud and on-premises endpoints AWS api's and on-premises network management virtual",
    "start": "2202310",
    "end": "2209390"
  },
  {
    "text": "machines and it was critical to us for our functions to be able to source our internal IP addressing so we can we have",
    "start": "2209390",
    "end": "2217580"
  },
  {
    "text": "to worry about ACLs opening up to some IP we didn't know would always stay the same so it actually comes back across",
    "start": "2217580",
    "end": "2225770"
  },
  {
    "text": "our private connectivity and we orchestrate from within the system we actually managed and we used that schema",
    "start": "2225770",
    "end": "2233120"
  },
  {
    "text": "list database to provide externalized configuration values ephemeral session",
    "start": "2233120",
    "end": "2238160"
  },
  {
    "text": "caching to share the state information and an interesting thing we have to do the activity logs what we found was when",
    "start": "2238160",
    "end": "2244490"
  },
  {
    "text": "we made this API first we lost a lot of context about what was happening underneath the hood without a lot of",
    "start": "2244490",
    "end": "2250310"
  },
  {
    "text": "searching so we log everything to this database just to be safe so we have some context and we know it's the values we",
    "start": "2250310",
    "end": "2257600"
  },
  {
    "text": "expect what did we learn",
    "start": "2257600",
    "end": "2263150"
  },
  {
    "text": "we learnt a lot from businesses from the business perspective we learned that",
    "start": "2263150",
    "end": "2269809"
  },
  {
    "start": "2265000",
    "end": "2265000"
  },
  {
    "text": "network security has to be in place first so what does that mean we did this",
    "start": "2269809",
    "end": "2274999"
  },
  {
    "text": "probably two years into our journey into the cloud and it's probably the hardest",
    "start": "2274999",
    "end": "2280130"
  },
  {
    "text": "thing the retrofit that I've seen it's taken us a long time we're not quite there so it's really better to do it",
    "start": "2280130",
    "end": "2287569"
  },
  {
    "text": "beforehand I've talked to several universities about this and pretty much",
    "start": "2287569",
    "end": "2294499"
  },
  {
    "text": "everyone concurs that if you do it late you're gonna take a long time and we're",
    "start": "2294499",
    "end": "2299630"
  },
  {
    "text": "still not there and you need to align with your technology partners and vendors some vendors have a very",
    "start": "2299630",
    "end": "2308660"
  },
  {
    "text": "interesting concept of word automation or they don't really know what you're doing so be very upfront with them make sure",
    "start": "2308660",
    "end": "2316549"
  },
  {
    "text": "they know that they know exactly what you're doing and how you're doing it",
    "start": "2316549",
    "end": "2322930"
  },
  {
    "text": "have key business sponsors so we absolutely have business sponsors inside but what we didn't always have was the",
    "start": "2322930",
    "end": "2329690"
  },
  {
    "text": "financial sponsors this is a really expensive project to build if you don't",
    "start": "2329690",
    "end": "2336349"
  },
  {
    "text": "have a way to pay for it that's gonna be a problem or charge for it so make sure to involve the finance people early but",
    "start": "2336349",
    "end": "2343309"
  },
  {
    "text": "also have technical people that understand what you're doing and can explain it at a broader to a broader",
    "start": "2343309",
    "end": "2348859"
  },
  {
    "text": "audience because constant communication is absolutely essential what we found is",
    "start": "2348859",
    "end": "2356089"
  },
  {
    "text": "we kept fielding a lot of questions because this is a really radical change and when we filled these questions we",
    "start": "2356089",
    "end": "2362660"
  },
  {
    "text": "weren't doing it there was only two or three of us that we're building this system with the orchestration and it was really hard to",
    "start": "2362660",
    "end": "2370970"
  },
  {
    "text": "constantly deal with interrupts our day jobs and build this all at the same time because we actually still had to do what",
    "start": "2370970",
    "end": "2378410"
  },
  {
    "text": "we had to do on a daily basis from network design stateful failover is",
    "start": "2378410",
    "end": "2386390"
  },
  {
    "start": "2382000",
    "end": "2382000"
  },
  {
    "text": "impractical so what we found with our firewall vendors is firewalls are",
    "start": "2386390",
    "end": "2392029"
  },
  {
    "text": "stateful I mean it makes perfect sense they need to understand that this packet belongs to this rule but",
    "start": "2392029",
    "end": "2398830"
  },
  {
    "text": "going across geographic regions didn't always work and more importantly when it",
    "start": "2398830",
    "end": "2404810"
  },
  {
    "text": "did they couldn't support two firewalls in a single point of presence so that was real problem for us so we started",
    "start": "2404810",
    "end": "2411080"
  },
  {
    "text": "talking with vendors and we found that some required the same eyepiece face the same VLANs and some just actually",
    "start": "2411080",
    "end": "2417830"
  },
  {
    "text": "couldn't handle the 400 miles worth of latency none of those were really acceptable auctions to us so we worked",
    "start": "2417830",
    "end": "2424099"
  },
  {
    "text": "with one of our vendors and we found out that they would work with us and create this new way to reestablish session",
    "start": "2424099",
    "end": "2430820"
  },
  {
    "text": "state most vendors require a syn packet for a TCP session we worked with them to",
    "start": "2430820",
    "end": "2436910"
  },
  {
    "text": "reestablish without a syn packet so as a new packet comes in if we fail over immediately",
    "start": "2436910",
    "end": "2442700"
  },
  {
    "text": "it reestablishes the session re-evaluates against rule health and re logs if you turn on a symmetric which is",
    "start": "2442700",
    "end": "2451160"
  },
  {
    "text": "on some firewall platforms what you see is it doesn't really state and it doesn't log it so you essentially have",
    "start": "2451160",
    "end": "2457609"
  },
  {
    "text": "ghost traffic feeling of failing over",
    "start": "2457609",
    "end": "2462920"
  },
  {
    "text": "sites it's really important so we have two sites and we need to failover about",
    "start": "2462920",
    "end": "2468290"
  },
  {
    "text": "every two months or so so you need to consider this concept called error",
    "start": "2468290",
    "end": "2473420"
  },
  {
    "text": "budgets if you don't failover when you need to do maintenance essentially the",
    "start": "2473420",
    "end": "2478970"
  },
  {
    "text": "business might be risk adverse or it'll all crash and burn and something's are gonna come knocking on your door it's",
    "start": "2478970",
    "end": "2485060"
  },
  {
    "text": "really not what you want to do these are supposed to be independent they're supposed to be copies of each other so",
    "start": "2485060",
    "end": "2490310"
  },
  {
    "text": "why not failover between them since we know we can as fast as possible so I",
    "start": "2490310",
    "end": "2495859"
  },
  {
    "text": "don't know if anyone's read the Google sre book but it's really good and they actually have this thing called the chubby problem the chubby problem is",
    "start": "2495859",
    "end": "2503000"
  },
  {
    "text": "essentially a distributed locking system that isn't went down one day it never gone down before and when it went down",
    "start": "2503000",
    "end": "2509330"
  },
  {
    "text": "everyone thought it would never go down and it crashed and burned that's not what we want to do so these error",
    "start": "2509330",
    "end": "2514640"
  },
  {
    "text": "budgets we want to fail a certain percentage of the time every single month and if we don't then we're not a",
    "start": "2514640",
    "end": "2522260"
  },
  {
    "text": "good place as technologists to enable our businesses to have this redundancy then have this availability",
    "start": "2522260",
    "end": "2529600"
  },
  {
    "text": "and then make sure when you do this it actually allows you to test the DNS validation of firewalls",
    "start": "2529600",
    "end": "2535060"
  },
  {
    "text": "because firewalls have to revalidate their DNS applications have to reevaluate their DNS is certain",
    "start": "2535060",
    "end": "2541600"
  },
  {
    "text": "application languages like to cache forever I'm sure you know which ones and as the saying goes if something's broken",
    "start": "2541600",
    "end": "2548950"
  },
  {
    "text": "did anyone check DNS because it's usually DNS complying and implementing",
    "start": "2548950",
    "end": "2556240"
  },
  {
    "text": "RFC's they're not identical between vendors and you think it'll just work",
    "start": "2556240",
    "end": "2561330"
  },
  {
    "text": "whatever will just work it probably won't and whatever didn't you think that'll never work",
    "start": "2561330",
    "end": "2566710"
  },
  {
    "text": "what will cuz you're if you thought about it longer and you'll find that the tiny little my new show will be the",
    "start": "2566710",
    "end": "2572590"
  },
  {
    "text": "things that get you it's not the really hard problems so what did we learn about",
    "start": "2572590",
    "end": "2579490"
  },
  {
    "start": "2577000",
    "end": "2577000"
  },
  {
    "text": "routing we learned that I bgp and ebgp function differently not just from their",
    "start": "2579490",
    "end": "2586270"
  },
  {
    "text": "purposes but their timers and all sorts of interesting little minutia turn down",
    "start": "2586270",
    "end": "2592480"
  },
  {
    "text": "that advertisement interval as far as you can I you want to get it as close to immediate as possible but one second",
    "start": "2592480",
    "end": "2600130"
  },
  {
    "text": "still pretty realistic and then conditional advertisement is key but",
    "start": "2600130",
    "end": "2605680"
  },
  {
    "text": "setting it up isn't always intuitive what we found when we started setting up as we thought it was an if statement it",
    "start": "2605680",
    "end": "2611110"
  },
  {
    "text": "was actually unless so it never works because we had the conditional backwards and then graceful restart",
    "start": "2611110",
    "end": "2619450"
  },
  {
    "text": "everyone thinks graceful restarts the best thing because you know it allows a soft reset of your peers you don't have",
    "start": "2619450",
    "end": "2625420"
  },
  {
    "text": "to worry about it but what we found out is it actually introduces very unique old timers we thought we were failing",
    "start": "2625420",
    "end": "2632050"
  },
  {
    "text": "over with one second because we'd advertised them an interval all the way down our hold times were down but with graceful restored on it actually took",
    "start": "2632050",
    "end": "2638230"
  },
  {
    "text": "two three four minutes to fail over that's not acceptable in this scenario so we actually turned",
    "start": "2638230",
    "end": "2645130"
  },
  {
    "text": "it off pointing towards AWS and we left it on North bounds but frankly you don't",
    "start": "2645130",
    "end": "2650860"
  },
  {
    "text": "always need it as long as you've tuned your advertisement interval and some other things as well as possible so",
    "start": "2650860",
    "end": "2658420"
  },
  {
    "text": "historically we never used BFD BFD is by forwarding detection essentially it's a little UDP packet",
    "start": "2658420",
    "end": "2665800"
  },
  {
    "text": "that goes out to an IP comes back very much like IP SLA if you're familiar with it and if the long as it gets the",
    "start": "2665800",
    "end": "2672670"
  },
  {
    "text": "response is good but if it misses n number of packets over this amount of time it will know it will notify the BGP",
    "start": "2672670",
    "end": "2681310"
  },
  {
    "text": "routing daemon that that route is no longer valid and anything on that interface is no longer valid so what",
    "start": "2681310",
    "end": "2687160"
  },
  {
    "text": "actually allows us one second failover it notifies ourselves probably faster",
    "start": "2687160",
    "end": "2693340"
  },
  {
    "text": "than OSPF would ever reconverge and what we found was by doing this we actually like BFD we started implementing it all",
    "start": "2693340",
    "end": "2699970"
  },
  {
    "text": "over the place it's really low overhead and it's really really useful it notifies every single routing daemon but",
    "start": "2699970",
    "end": "2707400"
  },
  {
    "text": "well we found out as some document some platforms have undocumented limits some",
    "start": "2707400",
    "end": "2712810"
  },
  {
    "text": "platforms say they support 4000 BFD neighbors but after 25 for some reason",
    "start": "2712810",
    "end": "2717820"
  },
  {
    "text": "it says operation not permitted so make sure you've tested all of this information and then terminate your",
    "start": "2717820",
    "end": "2724510"
  },
  {
    "text": "public peering at each network pump so as I said we have a network pop in New York for Direct Connect we have a",
    "start": "2724510",
    "end": "2730660"
  },
  {
    "text": "network pop in Virginia for Direct Connect sorry in Boston in Virginia so what's really important is you don't",
    "start": "2730660",
    "end": "2737170"
  },
  {
    "text": "want your s3 traffic or some other public traffic to go all the way back up",
    "start": "2737170",
    "end": "2743230"
  },
  {
    "text": "to campus and all the way back down because ultimately you've just added about 60 milliseconds to someone that",
    "start": "2743230",
    "end": "2750070"
  },
  {
    "text": "didn't need it so where possible make sure you terminate public peering one",
    "start": "2750070",
    "end": "2756280"
  },
  {
    "text": "per direct connect as Leo said earlier connectivity path selection is hard and",
    "start": "2756280",
    "end": "2763420"
  },
  {
    "start": "2760000",
    "end": "2760000"
  },
  {
    "text": "critical what we found is Tansy's are really really important and get them",
    "start": "2763420",
    "end": "2768670"
  },
  {
    "text": "from all of your fibre vendors one of our vendors said they wouldn't give it to us we said we won't buy the service we wrote in our service order all of a",
    "start": "2768670",
    "end": "2775300"
  },
  {
    "text": "sudden we had this KMZ and you need to overlay these drill down down down down what you saw from those maps is actually",
    "start": "2775300",
    "end": "2781540"
  },
  {
    "text": "our km Z's overlaid into a map so that's real and it's really important we're",
    "start": "2781540",
    "end": "2787060"
  },
  {
    "text": "doing this all over the place because it's not a matter of if things",
    "start": "2787060",
    "end": "2793600"
  },
  {
    "text": "will go down it's a matter of when and the only way you prevent that is not by buying the most",
    "start": "2793600",
    "end": "2798760"
  },
  {
    "text": "expensive service in the world but buying the cheaper services and buying a whole bunch of them from different",
    "start": "2798760",
    "end": "2804160"
  },
  {
    "text": "providers because just because you want to spend $8,000 on a link doesn't mean",
    "start": "2804160",
    "end": "2809319"
  },
  {
    "text": "it's any better than the one that's three thousand dollars right next to it because these fiber seeking geckos I'm",
    "start": "2809319",
    "end": "2814990"
  },
  {
    "text": "sure everyone knows they're everywhere the Barry piece of fiber in the sand you're on a desert island digs up hey",
    "start": "2814990",
    "end": "2821500"
  },
  {
    "text": "you got rescued and then what happens if DNS is only on the campus as we have",
    "start": "2821500",
    "end": "2828069"
  },
  {
    "text": "said well that's a problem because if all of your links go down you've now lost DNS so you want to make sure you",
    "start": "2828069",
    "end": "2835240"
  },
  {
    "text": "think about that maybe you've put a dns appliance down with your infrastructure maybe you make a copy in the cloud all",
    "start": "2835240",
    "end": "2842049"
  },
  {
    "text": "of these are possible opportunities and definitely something you need to think about and then as I said earlier if your",
    "start": "2842049",
    "end": "2849910"
  },
  {
    "text": "Direct Connect only ends in one spot you're no better off so you want to make sure you are at least in two different",
    "start": "2849910",
    "end": "2855910"
  },
  {
    "text": "direct connect endpoints even for a single region so orchestration as you",
    "start": "2855910",
    "end": "2866740"
  },
  {
    "start": "2861000",
    "end": "2861000"
  },
  {
    "text": "see api's are not all equal api's didn't always exist and we found that we had to",
    "start": "2866740",
    "end": "2873880"
  },
  {
    "text": "actually reverse engineer a lot we were in the console of our network products",
    "start": "2873880",
    "end": "2879240"
  },
  {
    "text": "dumping everything we are clicking around the interface and then finally we figured out this magical potion to make",
    "start": "2879240",
    "end": "2886059"
  },
  {
    "text": "this one call work it's really not great but it's where the networking land is at",
    "start": "2886059",
    "end": "2892420"
  },
  {
    "text": "the moment as you see Sdn and a fee are becoming new things net coffee yang",
    "start": "2892420",
    "end": "2900069"
  },
  {
    "text": "those are definitely going to help but they're just not there yet they're still just not fully implemented across",
    "start": "2900069",
    "end": "2907690"
  },
  {
    "text": "everyone's product lines so we found that we had to reverse-engineer a lot",
    "start": "2907690",
    "end": "2913089"
  },
  {
    "text": "sometimes we just gave up implementing something for our routers we don't we don't use net comp we don't use the aim",
    "start": "2913089",
    "end": "2919299"
  },
  {
    "text": "we use templates in a templating language that we output to files and",
    "start": "2919299",
    "end": "2924880"
  },
  {
    "text": "then we upload them we could easily output it to a server and then use SNMP",
    "start": "2924880",
    "end": "2930360"
  },
  {
    "text": "so there's a bunch of ways to do automation it's just not always intuitive um",
    "start": "2930360",
    "end": "2937940"
  },
  {
    "text": "so network vendors are not software engineers I'm pretty sure everyone knows this but what's really important is the",
    "start": "2937940",
    "end": "2944550"
  },
  {
    "text": "documentation is really sometimes problematic just like the api's it",
    "start": "2944550",
    "end": "2950580"
  },
  {
    "text": "doesn't always exist and it's not always right we had one vendor say that nothing changed from this version to this",
    "start": "2950580",
    "end": "2956340"
  },
  {
    "text": "version in this API our first call broke and we went to them said you said",
    "start": "2956340",
    "end": "2962130"
  },
  {
    "text": "nothing changed oh yeah we left that in there by mistake so you know more than",
    "start": "2962130",
    "end": "2967650"
  },
  {
    "text": "your vendor really really quickly I think within about two weeks we were telling them some things that they",
    "start": "2967650",
    "end": "2973200"
  },
  {
    "text": "didn't know about their own products so that's important but it's an opportunity and I encourage everyone if you do this",
    "start": "2973200",
    "end": "2980430"
  },
  {
    "text": "to seize upon this opportunity help them get better they're not software",
    "start": "2980430",
    "end": "2985770"
  },
  {
    "text": "engineers so you can actually help them buy we worked with them they rewrote all",
    "start": "2985770",
    "end": "2990930"
  },
  {
    "text": "of our code every single call they breed replicated and one of our vendors and",
    "start": "2990930",
    "end": "2996080"
  },
  {
    "text": "now what we wrote is part of their test Suites it's already caught regressions in their next version it's really",
    "start": "2996080",
    "end": "3002270"
  },
  {
    "text": "important to take this opportunity and help them get better because the cloud is that opportunity and I think a lot of",
    "start": "3002270",
    "end": "3009440"
  },
  {
    "text": "them we're starting to see it they just don't have the internal discipline yet and then ensure all of your values are",
    "start": "3009440",
    "end": "3017600"
  },
  {
    "text": "externally configurable so the developer that works for me and she wrote a lot of",
    "start": "3017600",
    "end": "3023930"
  },
  {
    "text": "this or all of this it's about 15,000 lines of code and it",
    "start": "3023930",
    "end": "3029540"
  },
  {
    "text": "took three months it is a lot of code I I don't know how she did it but what she",
    "start": "3029540",
    "end": "3036860"
  },
  {
    "text": "told us after a little bit it was you guys changed your mind too much ouch we changed that P addresses where",
    "start": "3036860",
    "end": "3045680"
  },
  {
    "text": "like all that name doesn't make sense and after about three or four things she",
    "start": "3045680",
    "end": "3051410"
  },
  {
    "text": "started you know getting a little angry and said I'm gonna make everything externally configurable right",
    "start": "3051410",
    "end": "3057470"
  },
  {
    "text": "and then I just go into this the database and I changed the value and magic it just what happens",
    "start": "3057470",
    "end": "3063640"
  },
  {
    "text": "because you don't want to redeploy us we're still in some places that we don't",
    "start": "3063640",
    "end": "3069319"
  },
  {
    "text": "have everything it's sternly configured so we still are deploying randomly we're finding problems with how we wrote some",
    "start": "3069319",
    "end": "3076219"
  },
  {
    "text": "things but by isolating it into different functions and then using an",
    "start": "3076219",
    "end": "3082549"
  },
  {
    "text": "external configurable database we can solve a lot of the headache and we don't have to bring in the most experienced",
    "start": "3082549",
    "end": "3089930"
  },
  {
    "text": "people to learn this because it's modular it does its thing and it does it well and with that thank you",
    "start": "3089930",
    "end": "3101949"
  }
]