[
  {
    "text": "great hope everyone's enjoying reinvent I have my replay party t-shirt on so I'm",
    "start": "319",
    "end": "5759"
  },
  {
    "text": "getting excited with all the sessions and hopefully a fun party at later today if you're in this session its IOT for",
    "start": "5759",
    "end": "12389"
  },
  {
    "text": "one implementing multi-region AWS IOT my name is Ola Walia a lot of Hin I'm a",
    "start": "12389",
    "end": "17490"
  },
  {
    "text": "senior solution architect specialist for IOT we have the pleasure of having Lukas starett from analog devices a cloud",
    "start": "17490",
    "end": "23189"
  },
  {
    "text": "solutions architect so we have a lot to cover in a session today we tried to",
    "start": "23189",
    "end": "28949"
  },
  {
    "text": "pair as much as we can as much content we can in the next 60 minutes but it's gonna boil down to three things the",
    "start": "28949",
    "end": "34860"
  },
  {
    "text": "first thing is really why she do multi region for AWS iot why do you think about doing multi region for your",
    "start": "34860",
    "end": "39960"
  },
  {
    "text": "devices then it considerations about that then we'll get into the foundations of going multi region there's certain",
    "start": "39960",
    "end": "46620"
  },
  {
    "text": "things you have to do up front before you start deploying your devices across multiple regions in AWS so talk about",
    "start": "46620",
    "end": "52710"
  },
  {
    "text": "those best practices next then we'll have the pleasure of having analog devices talk about their multi region",
    "start": "52710",
    "end": "57809"
  },
  {
    "text": "journey and then we want to get into a bunch of architectures for different types of multi region deployments so why",
    "start": "57809",
    "end": "66420"
  },
  {
    "text": "do multi region in the first place so I get the pleasure working with a lot of IOT customers and they basically say",
    "start": "66420",
    "end": "72150"
  },
  {
    "text": "well with 8 OS IOT I've got to do multi region for a number of region reasons primary one is latency right I don't",
    "start": "72150",
    "end": "78780"
  },
  {
    "text": "want to ship a product over to Asia and then have it go connect to us East that's just inefficient for us it makes",
    "start": "78780",
    "end": "83880"
  },
  {
    "text": "the whole interaction of IOT just too slow you also say just for resiliency",
    "start": "83880",
    "end": "89159"
  },
  {
    "text": "like well you know as Vernor talked in his keynote you might have these individual cells or a ZZZ or regions but",
    "start": "89159",
    "end": "94590"
  },
  {
    "text": "we want to be resilient across regions so we need to be able to cut over from one region to another there also",
    "start": "94590",
    "end": "100350"
  },
  {
    "text": "customers just want to do it for disaster recovery so you really want to just have a backup of all of the devices all of the device state all of their",
    "start": "100350",
    "end": "106710"
  },
  {
    "text": "certificates and then be able to pre populate them and repopulate them into a target region so we know the why but",
    "start": "106710",
    "end": "115740"
  },
  {
    "text": "what really makes IOT and multi-region unique if we think about the kind of traditional web applications our users",
    "start": "115740",
    "end": "122610"
  },
  {
    "text": "come to our site you know they're using their laptops if something goes bump in the night on our website we can simply display a",
    "start": "122610",
    "end": "128550"
  },
  {
    "text": "message to the user and then we get this user driven interaction they can decide when they want to back and retry essentially your site",
    "start": "128550",
    "end": "135550"
  },
  {
    "text": "again we get devices in play it's actually very different of course we all",
    "start": "135550",
    "end": "140980"
  },
  {
    "text": "know devices are constrained but what that also means is that all of your retry logic all of your redundancy",
    "start": "140980",
    "end": "146110"
  },
  {
    "text": "resiliency has to be planned upfront if your firmware basically gets to a point where it says well I'm starting to run",
    "start": "146110",
    "end": "151480"
  },
  {
    "text": "out of memory I don't know what else to do now you have a memory leak problem if it keeps backing off and retrying has to say well at what point do I start",
    "start": "151480",
    "end": "158170"
  },
  {
    "text": "getting rid of metadata or a state that I have stored locally so I can make more room continue to process so this makes",
    "start": "158170",
    "end": "164440"
  },
  {
    "text": "it much more complex when you're trying to do these multi region appointments because you have these constrained devices and you do a lot more planning",
    "start": "164440",
    "end": "171220"
  },
  {
    "text": "upfront so when it comes to multi region there's like several different layers",
    "start": "171220",
    "end": "176770"
  },
  {
    "text": "and these are kind of like IOT layers that we delineate when we talk with customers everything from the edge which",
    "start": "176770",
    "end": "182320"
  },
  {
    "text": "is like SDKs or Greengrass or Amazon three or itas it's a provisioning which is your security and identity",
    "start": "182320",
    "end": "187770"
  },
  {
    "text": "communication if with eight aureus IOT core the pub/sub protocol ingestion where does that day to go next and in",
    "start": "187770",
    "end": "194950"
  },
  {
    "text": "applications analytics where people actually put the business value so to speak in to your iOS e applications for",
    "start": "194950",
    "end": "202240"
  },
  {
    "text": "this talk we're going to focus on the first four the reason why the ones in green we're going to focus on the edge",
    "start": "202240",
    "end": "207490"
  },
  {
    "text": "provisioning communication ingestion is that these are actually unique to IOT applications once you start getting into",
    "start": "207490",
    "end": "213550"
  },
  {
    "text": "applications and analytics layers those are kind of tried-and-true multi-region approaches do I take RDS and do I take",
    "start": "213550",
    "end": "219280"
  },
  {
    "text": "RDS and put in another region do I take my analytics in my Big Data and get it from s3 in one region to another it's",
    "start": "219280",
    "end": "225580"
  },
  {
    "text": "kind of independent of IOT but these first four layers are very unique to it it's going to spend a lot of time on",
    "start": "225580",
    "end": "230650"
  },
  {
    "text": "those since we are in Vegas we're gonna transition to figure out what really",
    "start": "230650",
    "end": "236410"
  },
  {
    "text": "table stakes is and if you're unfamiliar with the table stakes or you haven't gone to any of the tables yet you know you go sit down you play black chat you",
    "start": "236410",
    "end": "243040"
  },
  {
    "text": "play poker and you've got to put a certain amount of money down in order to sit down and play the game similarly",
    "start": "243040",
    "end": "248650"
  },
  {
    "text": "we're going with IOT there is four table states that you have to do up front before you get think about going multi-region these are your table stakes",
    "start": "248650",
    "end": "255459"
  },
  {
    "text": "if you don't do them then it's gonna be much more difficult once you go multi-region to add them in those are",
    "start": "255459",
    "end": "262479"
  },
  {
    "text": "your account structures in your region structures how do you pair accounts regions and how you then decide how to",
    "start": "262479",
    "end": "267850"
  },
  {
    "text": "replicate between those accounts and regions how do you actually bootstrap your device if you're unfamiliar with",
    "start": "267850",
    "end": "273250"
  },
  {
    "text": "bootstrapping it's vital to have some process to give your device configuration information on the fly and that's what bootstrapping",
    "start": "273250",
    "end": "279610"
  },
  {
    "text": "gets you you have to be able to do over-the-air updates of course our customers say yes I can do this but you",
    "start": "279610",
    "end": "285100"
  },
  {
    "text": "have to go send a field technician out to doe do this on a tractor manually it's not super scalable so you have to",
    "start": "285100",
    "end": "290650"
  },
  {
    "text": "be able to do this over the air and before you think about multi region redundancy anything about single region",
    "start": "290650",
    "end": "297910"
  },
  {
    "text": "redundancy resiliency so we'll give you some best practices about how that looks in a few slides so let's dive into each",
    "start": "297910",
    "end": "304420"
  },
  {
    "text": "one of these table stakes in a bit more detail so the first one is how many accounts and how many regions should I",
    "start": "304420",
    "end": "309580"
  },
  {
    "text": "have so most customers start here they",
    "start": "309580",
    "end": "314800"
  },
  {
    "text": "have one account for all of their regions just get a show of hands how many of you were running a terse IOT today and dab test production how many",
    "start": "314800",
    "end": "323020"
  },
  {
    "text": "of you have something similar whatever Atos IOT you run in it's one account and it runs in any of those regions this is",
    "start": "323020",
    "end": "331210"
  },
  {
    "text": "pretty standard most customers start here you have one account that's your production account and anything in",
    "start": "331210",
    "end": "336280"
  },
  {
    "text": "production lives in that one account when we start think about multi-region AWS IOT it gives you some pros the",
    "start": "336280",
    "end": "343090"
  },
  {
    "text": "replication is easier when you have one account in all your regions are using that single account when you start to",
    "start": "343090",
    "end": "348730"
  },
  {
    "text": "figure out where do you replicate this data to so in this example I have US East one in u.s. East ooh well okay",
    "start": "348730",
    "end": "355720"
  },
  {
    "text": "maybe they're paired but what about the AMIA regions do i pair them with the u.s. regions which one is my failover",
    "start": "355720",
    "end": "360880"
  },
  {
    "text": "which one has a replica of my data you kind of have to implicitly map this when you do one account for all of your",
    "start": "360880",
    "end": "366670"
  },
  {
    "text": "regions so what she'd be looking at if you're planning to go more to region we",
    "start": "366670",
    "end": "372040"
  },
  {
    "text": "actually recommend you just start segmenting isolating your accounts you can do that in two variations the first",
    "start": "372040",
    "end": "377530"
  },
  {
    "text": "one that we actually recommend for customers to do for multi region is have one account per deployment and think",
    "start": "377530",
    "end": "383170"
  },
  {
    "text": "about a deployment as a group of your regions that are used for replicating of a specific piece of data a good example",
    "start": "383170",
    "end": "389680"
  },
  {
    "text": "in this case is Americas if I have American devices or devices deployed in the Northeast or in North North America",
    "start": "389680",
    "end": "396910"
  },
  {
    "text": "I basically would say I'm going to use US East one and you see Stu and this is my one account if",
    "start": "396910",
    "end": "402159"
  },
  {
    "text": "I'm gonna do something in Europe I'm gonna create a brand new account I want to have a EU central one and all of my e regions there what this allows you to do",
    "start": "402159",
    "end": "409269"
  },
  {
    "text": "is that with this one account per deployment you get this easy mapping between which accounts are your backup",
    "start": "409269",
    "end": "415149"
  },
  {
    "text": "in which Council your primary you also then get a slightly reduced blast radius in a sense that if something were to",
    "start": "415149",
    "end": "420999"
  },
  {
    "text": "happen within this isolated appointment it doesn't impact your other geo locations you can also take this one",
    "start": "420999",
    "end": "428469"
  },
  {
    "text": "step further so you are just in the business of saying I'm what disaster recovery the only thing I want to do is",
    "start": "428469",
    "end": "433869"
  },
  {
    "text": "if something happens inside of my Atos IOT account I have a copy of all that data completely isolated that can go and",
    "start": "433869",
    "end": "440499"
  },
  {
    "text": "pull from and essentially to restore into my primary in those cases you still",
    "start": "440499",
    "end": "445569"
  },
  {
    "text": "want to shoot for isolation but you can go a little bit further you can do one account per region again we're limiting",
    "start": "445569",
    "end": "450699"
  },
  {
    "text": "the blast radius right I care about those asset recovery as someone comes in and deletes all of my certificates I need to have something they can't go",
    "start": "450699",
    "end": "456849"
  },
  {
    "text": "reach out to as well so I give each account a single region so that's the",
    "start": "456849",
    "end": "462279"
  },
  {
    "text": "first table stake all about your region account deployment the next one is can you programmatically give your devices",
    "start": "462279",
    "end": "468149"
  },
  {
    "text": "security identity this is relates to bootstrapping so if you're moving to",
    "start": "468149",
    "end": "473469"
  },
  {
    "text": "bootstrapping you basically give a global endpoint this is where your device goes and connects to to say hey I'm trying to figure out where I should",
    "start": "473469",
    "end": "479469"
  },
  {
    "text": "go that endpoint returns device configuration information that should be a nativist IOT your MQTT endpoint so",
    "start": "479469",
    "end": "486879"
  },
  {
    "text": "right now I'm not hard-coding a regional endpoint into my firm where I'm just hard coding this bootstrapping and",
    "start": "486879",
    "end": "492039"
  },
  {
    "text": "saying go find which a torus IOT region to connect with you put things in there like retry logic your health checks",
    "start": "492039",
    "end": "497879"
  },
  {
    "text": "information that's configurable on the device that you want to be able to change on the fly on a periodic basis",
    "start": "497879",
    "end": "503249"
  },
  {
    "text": "and the important part of bootstrapping in device configuration is to make sure",
    "start": "503249",
    "end": "508269"
  },
  {
    "text": "you're using your own certificate authority it's really really nice because AWS IOT lets you use our",
    "start": "508269",
    "end": "515680"
  },
  {
    "text": "certificates we're provisioning them for you and gives you a private key in a cert but if you really want to do multi",
    "start": "515680",
    "end": "521318"
  },
  {
    "text": "region you have to be using your own CA so to give you an idea of the bootstrapping architecture it's pretty",
    "start": "521319",
    "end": "527230"
  },
  {
    "text": "straight forward we've got a route 53 implementation we use the private key to essentially sign",
    "start": "527230",
    "end": "533329"
  },
  {
    "text": "private information to prove that we own the private key and we send out along to route 53 our back-end infrastructure API",
    "start": "533329",
    "end": "540379"
  },
  {
    "text": "Gateway Atlanta in this case will basically look at that device information and return configuration back to the device including which mqtt",
    "start": "540379",
    "end": "547249"
  },
  {
    "text": "endpoints to connect with our device happily goes along to a device IOT and",
    "start": "547249",
    "end": "552439"
  },
  {
    "text": "then connects there and starts publishing and subscribing to give you",
    "start": "552439",
    "end": "557660"
  },
  {
    "text": "an idea of what these kind of responses will look like your responsibilities",
    "start": "557660",
    "end": "562730"
  },
  {
    "text": "have kind of two main portions one is kind of the endpoint information like where am I supposed to go and the other",
    "start": "562730",
    "end": "568550"
  },
  {
    "text": "part is the topic information what can I do if you look at the endpoint",
    "start": "568550",
    "end": "574610"
  },
  {
    "text": "information we include essentially an object of each endpoint that's available for this device so right now have us",
    "start": "574610",
    "end": "580459"
  },
  {
    "text": "cease one but I can list any single endpoint that device can connect to I also list the CAS and these are actually",
    "start": "580459",
    "end": "587029"
  },
  {
    "text": "the server-side CAS not the device side CAS or your certificate authority that's that sign the device certificates these",
    "start": "587029",
    "end": "593689"
  },
  {
    "text": "CAS are to be able to let you know that if I go connect to this endpoint I do mutual TLS which server certificate do I",
    "start": "593689",
    "end": "600110"
  },
  {
    "text": "need to present to you and this is why we include this inside of the endpoint information then we conclude other things like whether your primary",
    "start": "600110",
    "end": "606559"
  },
  {
    "text": "endpoint or your backup or how often do you retry on this endpoint before you go somewhere else",
    "start": "606559",
    "end": "613269"
  },
  {
    "text": "similarly with the bit about strap you can send additional configuration information and the reason why I topics",
    "start": "613269",
    "end": "619370"
  },
  {
    "text": "are interesting to send when we get in smaller region later is this allows you to define what your rules do later on you can then define rules that say well",
    "start": "619370",
    "end": "626629"
  },
  {
    "text": "my configurations look like this so whenever I see a rule come in and a tourist IOT I can look for stings to",
    "start": "626629",
    "end": "631699"
  },
  {
    "text": "start with commanding config and then send them to a specific location so I",
    "start": "631699",
    "end": "638059"
  },
  {
    "text": "mentioned before to do bootstrapping you really need to use your own CA SKU an idea why I mentioned before if you get",
    "start": "638059",
    "end": "643939"
  },
  {
    "text": "certificates generated by us they stay in that region so you're ever going to the console and you do a QuickStart you",
    "start": "643939",
    "end": "649910"
  },
  {
    "text": "issue a CSR you say give me a cert it's gonna live in that region you gave it to in perpetuity so the only way you can do",
    "start": "649910",
    "end": "656540"
  },
  {
    "text": "Monte region if you're generating if you're getting certificates from us is that when you go to a new endpoint you",
    "start": "656540",
    "end": "661670"
  },
  {
    "text": "have to go get brand new certificates and of course we all constrain devices we don't really want to be managing to",
    "start": "661670",
    "end": "666980"
  },
  {
    "text": "three four certificates if you use your own certificates customer generated certificates by your own CA those are",
    "start": "666980",
    "end": "674360"
  },
  {
    "text": "multi-region by default and then you can use any of these four mechanisms in a DOS IOT core whether that's bring your",
    "start": "674360",
    "end": "680810"
  },
  {
    "text": "own certificate just-in-time provisioning bulk provisioning just-in-time registration any of those will allow you to register in a region",
    "start": "680810",
    "end": "686930"
  },
  {
    "text": "and then also read that certificate in other regions so next table state was",
    "start": "686930",
    "end": "696680"
  },
  {
    "text": "really building single region resiliency and these are they come in to a few things if you're not using a DOS IOT",
    "start": "696680",
    "end": "702980"
  },
  {
    "text": "rules engine error action just a nice way that if for some reason we can't write to the downstream service we can",
    "start": "702980",
    "end": "708709"
  },
  {
    "text": "then pick another service to write to on your behalf so for some reason we can't get to dynamo you can say send this data to Kinesis send it into s3 and with this",
    "start": "708709",
    "end": "716510"
  },
  {
    "text": "single region resiliency you can still continue to operate even if a other service downstream is impacted also make",
    "start": "716510",
    "end": "724190"
  },
  {
    "text": "sure you're writing to multiple upstream services at the same time many customers will say why just put everything in",
    "start": "724190",
    "end": "729290"
  },
  {
    "text": "dynamo it's like well what do you do for archival do you put that in dynamo too instead think about okay I'll have some",
    "start": "729290",
    "end": "734720"
  },
  {
    "text": "data in dynamo and dynamo but I'll put all my archive on s3 if I miss some data in dynamo at least still have a copy of",
    "start": "734720",
    "end": "741560"
  },
  {
    "text": "it in s3 so again just creating more resiliency and redundancy in a single region you services that you use",
    "start": "741560",
    "end": "749300"
  },
  {
    "text": "multiple Z's just makes your life a little bit easier I'm going to hopefully squeeze in a demo later but all of them",
    "start": "749300",
    "end": "754490"
  },
  {
    "text": "use services are already running across AZ's to get myself additional resiliency and also I have retry logic not just on",
    "start": "754490",
    "end": "761990"
  },
  {
    "text": "the cloud side but also on your devices again yet the pre program and all the things the device has to do to give a",
    "start": "761990",
    "end": "769310"
  },
  {
    "text": "quick example of how you can think about this retrying configuration logic with bootstrapping so right here I have if you look at that",
    "start": "769310",
    "end": "776149"
  },
  {
    "text": "first arrow it's basically just the way that can pass in configuration information to the device so I'm basically saying I'm gonna send you some",
    "start": "776149",
    "end": "782149"
  },
  {
    "text": "information on the fly related to how often you retry now at the very bottom I",
    "start": "782149",
    "end": "788180"
  },
  {
    "text": "basically have inputted my retry logic and they're kind of common things like how many retry attempts do I have how",
    "start": "788180",
    "end": "794149"
  },
  {
    "text": "many seconds should I wait even things like skewing what is my kind of skew or exponential back-off I should actually",
    "start": "794149",
    "end": "800149"
  },
  {
    "text": "you and by being able to set these from the cloud down to the device you're also able to essentially give the device new",
    "start": "800149",
    "end": "806480"
  },
  {
    "text": "information when your cloud site is impacted so let's say you're experiencing longer latency you can tell the device oh by the way",
    "start": "806480",
    "end": "812630"
  },
  {
    "text": "actually can you back off a little bit more because I have some latency issues and I Nabal to process as quickly as I normally can and the last tables sake is",
    "start": "812630",
    "end": "822350"
  },
  {
    "text": "being able to do OTAs and again this is important because even if you have this single region resiliency with all your",
    "start": "822350",
    "end": "828590"
  },
  {
    "text": "upstream services when they're connected to a device IOT core you might be sending data in and everything's working",
    "start": "828590",
    "end": "834230"
  },
  {
    "text": "fine for some reason one service starts to be impacted but again you've got single region resiliency you're doing",
    "start": "834230",
    "end": "840170"
  },
  {
    "text": "great then you start realizing other things start to be impact and you're like holy crap like I really need to move these devices since in this example",
    "start": "840170",
    "end": "848270"
  },
  {
    "text": "8 OS IOT core isn't impacted you can essentially issue an OTA update just",
    "start": "848270",
    "end": "853460"
  },
  {
    "text": "like you would the bootstrapping API you're saying everything's working with a device IOT core but for some reason",
    "start": "853460",
    "end": "858860"
  },
  {
    "text": "we're having internal issues I need you to go somewhere else and again the ability to Oh TA updates really give you",
    "start": "858860",
    "end": "864320"
  },
  {
    "text": "that mechanism a proactively changing state on the fly so just to recap these",
    "start": "864320",
    "end": "871580"
  },
  {
    "text": "table stakes these are the things you have to do before you go multi-region figure out your account structure again",
    "start": "871580",
    "end": "877460"
  },
  {
    "text": "one account per deployment grouping those appointments for what you're going to deploy to your primary or secondary",
    "start": "877460",
    "end": "882680"
  },
  {
    "text": "your active active both your primaries you have to be able to bootstrap your devices this is over HTTP but being to",
    "start": "882680",
    "end": "889400"
  },
  {
    "text": "make that call just allows you to just get additional metadata back OTA updates and also single region resiliency with",
    "start": "889400",
    "end": "898580"
  },
  {
    "text": "that I like to bring up Lukas starett because he's gonna talk about how they took some of these practices and started implementing this for their multi region",
    "start": "898580",
    "end": "904670"
  },
  {
    "text": "application hey everyone I hope that uh that you",
    "start": "904670",
    "end": "911770"
  },
  {
    "text": "reinvent has been a blast so far and you know I hope that when we all go home tomorrow we're leaving you know inspired",
    "start": "911770",
    "end": "917500"
  },
  {
    "text": "and kind of excited to to take these things these things home and and build new great things with them",
    "start": "917500",
    "end": "923140"
  },
  {
    "text": "I'm Lucas starett I'm a cloud solutions architect to analog devices and I'm",
    "start": "923140",
    "end": "928450"
  },
  {
    "text": "excited to be here today to talk to you a little bit about one of our industrial IOT applications that we've been taking",
    "start": "928450",
    "end": "934840"
  },
  {
    "text": "multi-region but before I can get into that a little bit about who we are analog devices where if you if you've",
    "start": "934840",
    "end": "943120"
  },
  {
    "text": "heard of us you you probably know us as primarily a semiconductor company and we specialize in data conversion and in",
    "start": "943120",
    "end": "949150"
  },
  {
    "text": "signal processing technology we've been in business for 53 years and we've grown a pretty cutting-edge portfolio over",
    "start": "949150",
    "end": "955630"
  },
  {
    "text": "that time of analog and mixed signal technologies and and also through",
    "start": "955630",
    "end": "961360"
  },
  {
    "text": "collaborating with our partners and customers we've built we've build a really deep domain expertise in domains",
    "start": "961360",
    "end": "967180"
  },
  {
    "text": "such as industrial Internet of Things renewable energy and healthcare and",
    "start": "967180",
    "end": "972570"
  },
  {
    "text": "we've been using this expertise in signal processing data conversion all these things to bridge the physical and",
    "start": "972570",
    "end": "980080"
  },
  {
    "text": "digital world so essentially anytime that that physics of the real world kind of interfaces with digital you'll find",
    "start": "980080",
    "end": "986440"
  },
  {
    "text": "analog devices and you'll find our technology and we've also been extending these expertise --is in these",
    "start": "986440",
    "end": "993550"
  },
  {
    "text": "technologies to the cloud via AWS IOT and other AWS services to build full",
    "start": "993550",
    "end": "999400"
  },
  {
    "text": "end-to-end solutions for our customers and our partners that deliver trusted insights you know to improve the",
    "start": "999400",
    "end": "1005460"
  },
  {
    "text": "outcomes and our in our customers and our partners businesses a formidable challenge in all this and kind of why",
    "start": "1005460",
    "end": "1011460"
  },
  {
    "text": "we're here today talking is is designing our IOT applications so that they're",
    "start": "1011460",
    "end": "1016980"
  },
  {
    "text": "multi-region ready we want to deploy these things to customers that are all over the world and all of these different geographic regions and and to",
    "start": "1016980",
    "end": "1022980"
  },
  {
    "text": "do that we have to design our applications in such a way that they can be deployed across regions so I want to",
    "start": "1022980",
    "end": "1029670"
  },
  {
    "text": "talk about a little bit of that today the product that I want to talk about is",
    "start": "1029670",
    "end": "1034890"
  },
  {
    "text": "is our Argus M machine health monitoring product product and what this is is it's",
    "start": "1034890",
    "end": "1041520"
  },
  {
    "text": "a solution it's it's it's a bunch of adi sensors and and connected with AWS IOT designed to",
    "start": "1041520",
    "end": "1047428"
  },
  {
    "text": "provide kind of an end-to-end machine health solution for our cuffs of customers that are running heavy industrial machinery and so if you if",
    "start": "1047429",
    "end": "1054270"
  },
  {
    "text": "you look at this kind of architecture overview starting from the left we're building from edge nodes so we have",
    "start": "1054270",
    "end": "1059970"
  },
  {
    "text": "these edge nodes they're equipped with adi sensors and they're installed on heavy industrial machinery and they're",
    "start": "1059970",
    "end": "1065669"
  },
  {
    "text": "designed to operate on battery power they're very low-power they're designed to operate on batteries for multiple",
    "start": "1065669",
    "end": "1070799"
  },
  {
    "text": "years without needing to recharge the battery or replace any batteries and then the edge nodes are locally mesh",
    "start": "1070799",
    "end": "1076440"
  },
  {
    "text": "network together with the technology our Adi smart mesh technology which is a local mesh net we're working local mesh",
    "start": "1076440",
    "end": "1084539"
  },
  {
    "text": "networking technology that is specifically designed for these very low powered devices industrial grade and then data that's",
    "start": "1084539",
    "end": "1091440"
  },
  {
    "text": "collected from these edge nodes is then sent through a gateway device via AWS IOT up to our cloud analytics engine and",
    "start": "1091440",
    "end": "1097919"
  },
  {
    "text": "then of course at the far end of this we have an intuitive user interface that allows our customers to see live status",
    "start": "1097919",
    "end": "1104669"
  },
  {
    "text": "via a dashboard we have some device management features and then also that's the way that we deliver kind of the",
    "start": "1104669",
    "end": "1109980"
  },
  {
    "text": "relevant machine health alerts and and outcomes and here we have here we have a",
    "start": "1109980",
    "end": "1116760"
  },
  {
    "text": "picture of one of our Argus M deployments this is actually deployed at our own fabrication facility in",
    "start": "1116760",
    "end": "1122130"
  },
  {
    "text": "Wilmington and in this picture we have 15 edge nodes monitoring 13 assets with",
    "start": "1122130",
    "end": "1127409"
  },
  {
    "text": "those assets being these large water pump motors and you can see the edge",
    "start": "1127409",
    "end": "1132450"
  },
  {
    "text": "nodes they're installed over the bearing races on the back end of each of these pump motors and they're collecting detailed vibration data in a normal",
    "start": "1132450",
    "end": "1140370"
  },
  {
    "text": "operation this vibration data that's collected is sent and summary data of the device is sent every six hours and",
    "start": "1140370",
    "end": "1147299"
  },
  {
    "text": "then with detailed vibration complete raw data sent once daily and so a couple things to note about this picture that",
    "start": "1147299",
    "end": "1153210"
  },
  {
    "text": "sort of drives our multi region requirements for this particular application for one thing Argus M has a",
    "start": "1153210",
    "end": "1159780"
  },
  {
    "text": "little bit of a natural talent tolerance as you might expect to downtime of the AWS IOT core service and the reason for",
    "start": "1159780",
    "end": "1166260"
  },
  {
    "text": "that is because of kind of the natural sparseness of data transmission so you know for this particular application we're not working with real-time data",
    "start": "1166260",
    "end": "1173240"
  },
  {
    "text": "we're working with you know we collect vibration data over long periods of time send it up sparsely",
    "start": "1173240",
    "end": "1179129"
  },
  {
    "text": "and so if a ws IOT core is down temporarily we can queue that data on the on the Gateway and then we can send",
    "start": "1179129",
    "end": "1184739"
  },
  {
    "text": "it up for analytics later and so for this particular application the uptime",
    "start": "1184739",
    "end": "1190320"
  },
  {
    "text": "of the services may not be our highest our highest priority requirement another",
    "start": "1190320",
    "end": "1195809"
  },
  {
    "text": "thing to note is that this this picture it looks really pretty this environment you know it looks like you could easily walk through there it almost looks like",
    "start": "1195809",
    "end": "1202080"
  },
  {
    "text": "Christmas you know as we amazingly rush toward that holiday already but most of",
    "start": "1202080",
    "end": "1207600"
  },
  {
    "text": "these and at least many of these heavy and dressed really environments are often very very harsh and so physically",
    "start": "1207600",
    "end": "1214440"
  },
  {
    "text": "interacting with this device these devices after installation can be difficult it can be impossible which is",
    "start": "1214440",
    "end": "1219659"
  },
  {
    "text": "why these devices are designed to work on battery power for multiple years and so one of our key requirements going",
    "start": "1219659",
    "end": "1225359"
  },
  {
    "text": "multi-region and for this entire application is to minimize physical interaction with these installations because after they're installed",
    "start": "1225359",
    "end": "1231989"
  },
  {
    "text": "sometimes it's it's it can be even impossible to get to them later so over-the-air updates being able to",
    "start": "1231989",
    "end": "1237480"
  },
  {
    "text": "dynamically update configuration these things are very important to us so now that you kind of have a sense for that",
    "start": "1237480",
    "end": "1242639"
  },
  {
    "text": "let's talk about some of our multi region requirements first of all we have to be able to operate devices and",
    "start": "1242639",
    "end": "1248009"
  },
  {
    "text": "multiple AWS regions that are best suited to the customer or the installation geolocation and we we do",
    "start": "1248009",
    "end": "1253499"
  },
  {
    "text": "this for a few reasons as Wally mentioned you know minimizing latency and chance of connection failure those",
    "start": "1253499",
    "end": "1259350"
  },
  {
    "text": "are those are very important even though we're not dealing with real time data you know the closer we can have our",
    "start": "1259350",
    "end": "1264509"
  },
  {
    "text": "cloud application to the physical installation the lower our latency and the less chance we have of connection",
    "start": "1264509",
    "end": "1269639"
  },
  {
    "text": "failure with those devices we also and as a lot of you guys are probably thinking about also in many cases there",
    "start": "1269639",
    "end": "1275220"
  },
  {
    "text": "are regional data handling laws that that vary geographic regions geographic",
    "start": "1275220",
    "end": "1280470"
  },
  {
    "text": "region and so being able to operate in multiple regions allows us to to properly comply with the regional data",
    "start": "1280470",
    "end": "1286230"
  },
  {
    "text": "laws where applicable the other thing that we need is we need to be able to",
    "start": "1286230",
    "end": "1292049"
  },
  {
    "text": "operate the devices in multiple AWS regions without reprovision in the keys and certificates and this is really",
    "start": "1292049",
    "end": "1297659"
  },
  {
    "text": "important for being quickly agile with these devices and flexible but first of all we want the device that you know the",
    "start": "1297659",
    "end": "1303299"
  },
  {
    "text": "device is key and certificate that's the devices identity and we want that identity because the device doesn't",
    "start": "1303299",
    "end": "1308940"
  },
  {
    "text": "change when it's moving regions we want that identity to be stable while the device is moving",
    "start": "1308940",
    "end": "1314490"
  },
  {
    "text": "between regions not only is it is it you know difficult and fussy to change keys and certificates and to reissue but it",
    "start": "1314490",
    "end": "1321030"
  },
  {
    "text": "also means that you're you're sort of changing the identity of your device as it's known cryptographically to the cloud and that is that's something we",
    "start": "1321030",
    "end": "1328320"
  },
  {
    "text": "don't want to do we want that identity to be to be trusted and to be stable and consistent for that device across",
    "start": "1328320",
    "end": "1333929"
  },
  {
    "text": "regions and then as I had mentioned previously we must be able to migrate",
    "start": "1333929",
    "end": "1339960"
  },
  {
    "text": "devices and dispatch OTA updates update configuration for these devices and do all of this without physically",
    "start": "1339960",
    "end": "1345510"
  },
  {
    "text": "interacting with the devices because by the nature of this Argus M product and the installations in these in these heavy industrial environments often the",
    "start": "1345510",
    "end": "1352620"
  },
  {
    "text": "you know it's it's far too harsh of an environment expensive difficult or even impossible to access these devices after",
    "start": "1352620",
    "end": "1358730"
  },
  {
    "text": "installation so those are some of our requirements and now I want to talk to you about one of the kind of fundamental",
    "start": "1358730",
    "end": "1365940"
  },
  {
    "text": "implementation patterns that's really helped us achieve some of these requirements and be particularly agile",
    "start": "1365940",
    "end": "1371340"
  },
  {
    "text": "when we're when we're moving devices between regions and being multi-region ready with our application and we call",
    "start": "1371340",
    "end": "1377039"
  },
  {
    "text": "this the registration and claiming pattern and so the idea behind it is that we are we are separating the",
    "start": "1377039",
    "end": "1385350"
  },
  {
    "text": "connection to AWS IOT core from the device and it's provisioning with the activation and association with with an",
    "start": "1385350",
    "end": "1392070"
  },
  {
    "text": "application into two distinct steps so we're making these things separate rather than baking full application and",
    "start": "1392070",
    "end": "1397799"
  },
  {
    "text": "customer association configuration into the device right from the beginning we're essentially separating the the",
    "start": "1397799",
    "end": "1404820"
  },
  {
    "text": "task into provisioning the device and connecting it to IOT core in whatever or multiple regions that it's going to",
    "start": "1404820",
    "end": "1410400"
  },
  {
    "text": "operate and then in claiming that's that's a separate task after the device is already registered whereby we",
    "start": "1410400",
    "end": "1417360"
  },
  {
    "text": "associate that device with an application and it's it's ready for business use in our application so again",
    "start": "1417360",
    "end": "1424140"
  },
  {
    "text": "connection and then claiming is associated with an application two separate steps and so let's dig into",
    "start": "1424140",
    "end": "1429840"
  },
  {
    "text": "that a little bit device registration what are we doing here so first of all it's the beginning of the life cycle the",
    "start": "1429840",
    "end": "1436440"
  },
  {
    "text": "device we're provisioning the device with a certificate and with an initial MQTT broker endpoint for the region in",
    "start": "1436440",
    "end": "1442830"
  },
  {
    "text": "which that device will first operate and so we were taking advantage",
    "start": "1442830",
    "end": "1447870"
  },
  {
    "text": "of just-in-time registration which is a really great pattern that Wally had mentioned the AWS i io t offers for",
    "start": "1447870",
    "end": "1454350"
  },
  {
    "text": "search that are issued by a certificate authority that you own and that you register with your various accounts in",
    "start": "1454350",
    "end": "1460230"
  },
  {
    "text": "the various regions for your deployment and so because we have our CI registered",
    "start": "1460230",
    "end": "1465960"
  },
  {
    "text": "and in any region this device operates we can just in time register it upon first connection all it need to do is",
    "start": "1465960",
    "end": "1471690"
  },
  {
    "text": "connect an upon connection we have a rule listening for the the just in time",
    "start": "1471690",
    "end": "1477660"
  },
  {
    "text": "registration event and what it will do is it will create a thing in the IOT thing registry and then it will also and",
    "start": "1477660",
    "end": "1483809"
  },
  {
    "text": "this is important it will connect a restricted policy to that certificate so that the device can maintain its",
    "start": "1483809",
    "end": "1489059"
  },
  {
    "text": "connection to IOT core but it's not ready for business use again it's not associated with its application and",
    "start": "1489059",
    "end": "1494610"
  },
  {
    "text": "owner just yet so it's in a restricted state it's able to connect and interact with its shadow but it can't publish to",
    "start": "1494610",
    "end": "1501270"
  },
  {
    "text": "any other MQTT topic which you know is going to be the the full use of the application later and I wanted to take a",
    "start": "1501270",
    "end": "1510480"
  },
  {
    "text": "quick aside to to talk a little bit about a great way kind of an implementation trick that I really like",
    "start": "1510480",
    "end": "1516480"
  },
  {
    "text": "that makes just-in-time registration even better and kind of supports some of that dynamic decision-making that Wally",
    "start": "1516480",
    "end": "1521640"
  },
  {
    "text": "was talking about when he was talking about bootstrapping so I have here a snippet of one of our device certificates and I particularly want to",
    "start": "1521640",
    "end": "1529800"
  },
  {
    "text": "focus on the common name field so if you're if you're familiar with x.509 search you're aware of the common name",
    "start": "1529800",
    "end": "1535470"
  },
  {
    "text": "field but but look at what we do here we found that the common name field is a really great place to put lifetime",
    "start": "1535470",
    "end": "1543660"
  },
  {
    "text": "persistent locked identifying characteristics of the device and bake them right into the certificate which is",
    "start": "1543660",
    "end": "1550350"
  },
  {
    "text": "you know the cryptographic identity of the device and you can also see that we format this as a JSON string which just",
    "start": "1550350",
    "end": "1556380"
  },
  {
    "text": "makes it really nice upon this just in time registration event you can have a lambda or one of your other functions",
    "start": "1556380",
    "end": "1561960"
  },
  {
    "text": "that can easily parse this stuff out and make smart and tailored decisions for what we're going to do with this particular device based on you know some",
    "start": "1561960",
    "end": "1569070"
  },
  {
    "text": "of its identifying attributes that are persistent and lifetime locked to the device and so you can see in this",
    "start": "1569070",
    "end": "1574440"
  },
  {
    "text": "particular example we have a a unique ID for this device and upon registration on that first connection",
    "start": "1574440",
    "end": "1580429"
  },
  {
    "text": "event this will become the thing name in the thing registry and then we can have other other identifying attributes that",
    "start": "1580429",
    "end": "1588379"
  },
  {
    "text": "we also put in this string that maybe help us tailor our decision upon registration so I think this is a really great trick if you're using just-in-time",
    "start": "1588379",
    "end": "1594289"
  },
  {
    "text": "registration to take advantage of that common name field and do some smart things with it okay so we talked about",
    "start": "1594289",
    "end": "1601309"
  },
  {
    "text": "registration claiming this is claiming is kind of the second half of all of this so the device because it's been",
    "start": "1601309",
    "end": "1608240"
  },
  {
    "text": "just in time registered it's already represented in the thing registry and it has its restricted policy attached but",
    "start": "1608240",
    "end": "1614419"
  },
  {
    "text": "then that registered thing is associated with an owner and application through an API call from an authenticated user and",
    "start": "1614419",
    "end": "1621049"
  },
  {
    "text": "this is gonna this comes from the end UI and that will reference the device's unique ID and so the the lamda that",
    "start": "1621049",
    "end": "1627860"
  },
  {
    "text": "handles that claim API will then upon the claim call it will update the device",
    "start": "1627860",
    "end": "1633409"
  },
  {
    "text": "attributes to associate it with the the proper owner and application and it will replace that restricted policy on that",
    "start": "1633409",
    "end": "1639110"
  },
  {
    "text": "devices certificate with a policy that allows the device now to start full",
    "start": "1639110",
    "end": "1644600"
  },
  {
    "text": "business operation in our application in the region that it was claimed here ok",
    "start": "1644600",
    "end": "1653960"
  },
  {
    "text": "so how do these two patterns kind of give us particular ability in in when",
    "start": "1653960",
    "end": "1659749"
  },
  {
    "text": "we're trying to take our application multi region it does it in a handful of ways first of all registering in",
    "start": "1659749",
    "end": "1665119"
  },
  {
    "text": "multiple regions because we're taking advantage of just-in-time registration and because our CA is registered in any",
    "start": "1665119",
    "end": "1670399"
  },
  {
    "text": "of the any of the regions in which were operating we don't need to re-roll certs and keys for the devices and while we",
    "start": "1670399",
    "end": "1676700"
  },
  {
    "text": "mention this that this is important to use your own CA issue you on your own certs so that they can be just-in-time",
    "start": "1676700",
    "end": "1682190"
  },
  {
    "text": "registered in any any account that you're in any region your device connects to and they're they're also",
    "start": "1682190",
    "end": "1688460"
  },
  {
    "text": "eligible to be migrated via cloud side logic between regions so any any region",
    "start": "1688460",
    "end": "1695869"
  },
  {
    "text": "that this device connects to with its same stable cryptographic identity it can be registered and ready for use in",
    "start": "1695869",
    "end": "1701990"
  },
  {
    "text": "that region and that is that's really nice devices can also be registered and",
    "start": "1701990",
    "end": "1707359"
  },
  {
    "text": "claimed in multiple regions to support failover so this can be abstracted from the application but depending on on you know",
    "start": "1707359",
    "end": "1714979"
  },
  {
    "text": "how you want your your resiliency to work how you want fast failover to work and what kind of pattern are you doing an active active pattern or an active",
    "start": "1714979",
    "end": "1721399"
  },
  {
    "text": "passive pattern for multi region replication the claim calls can be issued to any any region in which this",
    "start": "1721399",
    "end": "1728209"
  },
  {
    "text": "device has been registered and then it can be active for the application and to",
    "start": "1728209",
    "end": "1733639"
  },
  {
    "text": "the end-user the application just works another thing we can do is we can use",
    "start": "1733639",
    "end": "1739219"
  },
  {
    "text": "AWS IOT jobs to instruct a device to update its configuration and cut over to",
    "start": "1739219",
    "end": "1744859"
  },
  {
    "text": "a new region and again this kind of satisfies our core requirement of physically interacting with the devices",
    "start": "1744859",
    "end": "1750589"
  },
  {
    "text": "as minimally as possible when we need to update anything we can do that from the cloud without interacting with the",
    "start": "1750589",
    "end": "1756259"
  },
  {
    "text": "device and so the device receives a job that's telling it to cut over to a new region all it needs to do is update its",
    "start": "1756259",
    "end": "1763429"
  },
  {
    "text": "MQTT broker endpoint to the one that the the job tells it to switch to and we're",
    "start": "1763429",
    "end": "1768769"
  },
  {
    "text": "off to the races because we're using our certificates that were issued by our registered CAS which are registered in",
    "start": "1768769",
    "end": "1773989"
  },
  {
    "text": "both the both of these active regions the device registers just as we expect no need to reroll new keys and certs and",
    "start": "1773989",
    "end": "1781219"
  },
  {
    "text": "off we go so a couple limitations and",
    "start": "1781219",
    "end": "1786440"
  },
  {
    "text": "challenges as we've been doing this that I want to talk about that way they can be in your consideration as you're as you're designing your applications",
    "start": "1786440",
    "end": "1792849"
  },
  {
    "text": "firstly the just-in-time multi-region registration pattern does require the device to connect first to each region",
    "start": "1792849",
    "end": "1799429"
  },
  {
    "text": "in order to register and what I mean by this is the device sorta has to be the initiator the each region in which we're",
    "start": "1799429",
    "end": "1805070"
  },
  {
    "text": "operating is ready for the device to connect but in order for it to to",
    "start": "1805070",
    "end": "1810440"
  },
  {
    "text": "actually be in use it has to kind of make that at that initial connection to each of the regions in which it's going to connect and that's as opposed to",
    "start": "1810440",
    "end": "1818149"
  },
  {
    "text": "potentially using cloud side replication logic in which you connect to one region and then your cloud automatically",
    "start": "1818149",
    "end": "1824629"
  },
  {
    "text": "replicates that state between regions but there is a sort of kind of simplicity and elegance to using just",
    "start": "1824629",
    "end": "1830299"
  },
  {
    "text": "just-in-time registration that is less error-prone maybe than having a cloud side replication logic if you can if you",
    "start": "1830299",
    "end": "1837469"
  },
  {
    "text": "can handle having that device be the initiator for any region it's going to operate in",
    "start": "1837469",
    "end": "1842909"
  },
  {
    "text": "secondly using iot jobs for region switching events does require a little bit of tricky choreography and you might",
    "start": "1842909",
    "end": "1848529"
  },
  {
    "text": "be able to kind of imagine how this works if I issue a job to a device telling it to cut over to a new region",
    "start": "1848529",
    "end": "1854200"
  },
  {
    "text": "well that job is is you know that job exists in the in the source region and I necessarily can't have my device market",
    "start": "1854200",
    "end": "1861100"
  },
  {
    "text": "completed before switching regions because it's it hasn't done it hasn't done it yet but as soon as the device",
    "start": "1861100",
    "end": "1866470"
  },
  {
    "text": "does cut over to the new region it can't easily report that job complete in the source region and so a good solution to",
    "start": "1866470",
    "end": "1873429"
  },
  {
    "text": "this is to have an MQTT topic in the destination region which your device will publish to and then in that",
    "start": "1873429",
    "end": "1879789"
  },
  {
    "text": "destination region a message will be forwarded completing that job in the source region to kind of complete the circle but as you can see this that's a",
    "start": "1879789",
    "end": "1886240"
  },
  {
    "text": "little bit of a kind of a complex choreography and so you have to take that into consideration when you're",
    "start": "1886240",
    "end": "1891370"
  },
  {
    "text": "issuing jobs that are going to command the device to move between regions thirdly to leverage that dynamic",
    "start": "1891370",
    "end": "1897340"
  },
  {
    "text": "bootstrapping pattern that wally was talking about earlier you do have to support an HTTP on your device and so if",
    "start": "1897340",
    "end": "1903220"
  },
  {
    "text": "you have a device that supports mqtt only and adding HTTP is is not an option",
    "start": "1903220",
    "end": "1908519"
  },
  {
    "text": "the best solution is to have kind of a home-based region where your device will first connect and that home-based region",
    "start": "1908519",
    "end": "1915100"
  },
  {
    "text": "over MQTT will immediately kind of funnel your device perhaps based on some of those identifying attributes that you",
    "start": "1915100",
    "end": "1921309"
  },
  {
    "text": "put in your certificate when you issued it into the region in which it should operate but that's just a consideration",
    "start": "1921309",
    "end": "1927519"
  },
  {
    "text": "that for the HTTP based dynamic bootstrapping now you have to support another library on the device",
    "start": "1927519",
    "end": "1933960"
  },
  {
    "text": "another interesting challenge is devices that connect through a gateway and not directly to AWS iotv a certificate can't",
    "start": "1933960",
    "end": "1941110"
  },
  {
    "text": "take advantage of this just in time registration pattern that i've been talking about and this is particularly applicable to topologies like our Argos",
    "start": "1941110",
    "end": "1948429"
  },
  {
    "text": "EMM application where we have a gateway device that connects to AWS IOT but our edge nodes the low powered mesh network",
    "start": "1948429",
    "end": "1955029"
  },
  {
    "text": "edge nodes that I described are not connected directly to IOT core via certificate the Gateway is is talking to",
    "start": "1955029",
    "end": "1961620"
  },
  {
    "text": "talking to AWS IOT on their behalf and so in that case those devices can't take",
    "start": "1961620",
    "end": "1967450"
  },
  {
    "text": "advantage of just in time registration because they don't directly connect and so cloud side replication logic for any",
    "start": "1967450",
    "end": "1972610"
  },
  {
    "text": "state you have for those edge node type devices in the cloud has to be used to make sure that that",
    "start": "1972610",
    "end": "1977619"
  },
  {
    "text": "states replicated appropriately and then lastly we and perhaps you keep extended",
    "start": "1977619",
    "end": "1983559"
  },
  {
    "text": "attributes for devices in your iot applications in places other than the thing registry and when that is the case",
    "start": "1983559",
    "end": "1989679"
  },
  {
    "text": "you know we have attributes that are stored in dynamo DB tables for example and those need to be accounted for when",
    "start": "1989679",
    "end": "1994959"
  },
  {
    "text": "you're talking about replicating between regions and doing fast failover and all of those things making sure that state",
    "start": "1994959",
    "end": "2000269"
  },
  {
    "text": "remains in sync and of course there's many ways to do this this is kind of touching up toward that application layer that while I was talking about",
    "start": "2000269",
    "end": "2006809"
  },
  {
    "text": "where you can use global tables or other active replication between those things but in any case it needs to be",
    "start": "2006809",
    "end": "2013229"
  },
  {
    "text": "considered so summing all this up first of all managing and registering",
    "start": "2013229",
    "end": "2018959"
  },
  {
    "text": "your own CA with AWS IOT in multiple regions and taken advantage of just-in-time registration is a great way",
    "start": "2018959",
    "end": "2025079"
  },
  {
    "text": "to kind of instantly get a lot of multi region flexibility your certs are now without reissuing any certs they're",
    "start": "2025079",
    "end": "2030209"
  },
  {
    "text": "eligible to be used in multiple regions with several of these patterns and that's given us great flexibility in our",
    "start": "2030209",
    "end": "2035339"
  },
  {
    "text": "application separating device registration the initial provisioning in connection to",
    "start": "2035339",
    "end": "2041579"
  },
  {
    "text": "IOT core from the association with an owner and application via claiming also",
    "start": "2041579",
    "end": "2046829"
  },
  {
    "text": "gives you multi region flexibility you kind of simplify the problem into simpler chunks that can be handled",
    "start": "2046829",
    "end": "2052039"
  },
  {
    "text": "individually which reduces the complexity of your multi region configuration and is less error-prone",
    "start": "2052039",
    "end": "2058408"
  },
  {
    "text": "and and is a nice pattern for for supporting these types of of topologies",
    "start": "2058409",
    "end": "2064878"
  },
  {
    "text": "IOT jobs these are great to be to leverage to instruct devices to migrate between regions or update any other",
    "start": "2064879",
    "end": "2070858"
  },
  {
    "text": "configurations including failover and particularly for us when we have applications such as Argus M installed",
    "start": "2070859",
    "end": "2077128"
  },
  {
    "text": "in harsh industrial environments we don't want to touch the devices physically we don't want to be making field trips out to the installations and",
    "start": "2077129",
    "end": "2083579"
  },
  {
    "text": "so using IOT jobs to to instruct devices to update configuration is is a very",
    "start": "2083579",
    "end": "2088919"
  },
  {
    "text": "good thing to do and then lastly you know all of this that we're talking about deploying these IOT applications",
    "start": "2088919",
    "end": "2094888"
  },
  {
    "text": "on a global scale you know across multi regions you know this is a huge challenge that would have been hard to",
    "start": "2094889",
    "end": "2100680"
  },
  {
    "text": "think about you know not that many years ago but building on IOT AWS IOT makes",
    "start": "2100680",
    "end": "2106349"
  },
  {
    "text": "deploying applications like our Argus M product at this kind of scale across multiple regions with resiliency",
    "start": "2106349",
    "end": "2112410"
  },
  {
    "text": "and it makes it possible and that that's really exciting for me in my team so now",
    "start": "2112410",
    "end": "2117840"
  },
  {
    "text": "I want to hand it back to Wally and he's gonna dive a little bit deeper into several of these multi region patterns thank you thank you so much thanks Lucas",
    "start": "2117840",
    "end": "2129360"
  },
  {
    "text": "for that is a funny aside as well Lucas and I met last year randomly at a chalk",
    "start": "2129360",
    "end": "2134610"
  },
  {
    "text": "talk and it was just like oh we introduced each other and then he's like I'm speaking with this guy Wally and he looks down he's like have his business",
    "start": "2134610",
    "end": "2140760"
  },
  {
    "text": "card from last year so things come full circle so we've done a lot about like",
    "start": "2140760",
    "end": "2146160"
  },
  {
    "text": "what are the table stakes of multi-region what are the things you should be using how does this kind of look what I want to do now is actually",
    "start": "2146160",
    "end": "2153540"
  },
  {
    "text": "dive into okay what did your architecture is what kind of things you need to replicate and what events you need to pass back and forth so really",
    "start": "2153540",
    "end": "2160740"
  },
  {
    "text": "lay that off you've got two considerations for going multi multi region you have an active passive strategy if you're really doing it for",
    "start": "2160740",
    "end": "2168030"
  },
  {
    "text": "like dr scenarios resiliency you want to cut from one region to another you'll take the active passive route if you're",
    "start": "2168030",
    "end": "2175920"
  },
  {
    "text": "doing it primarily because you want to essentially run your devices in any region within the deployment I want to",
    "start": "2175920",
    "end": "2182340"
  },
  {
    "text": "run in US East one or u.s. East ooh you're going to do active active and these like two columns bullets basically",
    "start": "2182340",
    "end": "2188760"
  },
  {
    "text": "list the steps it takes a new active active or active passive the plus side is when I get into these architectures",
    "start": "2188760",
    "end": "2195119"
  },
  {
    "text": "both of these steps require you to do two things upfront you have to register replicate everything you're registering",
    "start": "2195119",
    "end": "2201210"
  },
  {
    "text": "so all of your attribution registry you need to put from one place to another on a region to another and then as Lukas",
    "start": "2201210",
    "end": "2207060"
  },
  {
    "text": "mentioned we have to replicate the certificate information as well again through some CA that you already provide",
    "start": "2207060",
    "end": "2214760"
  },
  {
    "text": "so we start with active passive again primarily if you're looking at this you're doing disaster recovery you need",
    "start": "2214760",
    "end": "2220470"
  },
  {
    "text": "a primary and a standby and when you do the cut over or something unique and active passive is that the data when it",
    "start": "2220470",
    "end": "2226770"
  },
  {
    "text": "when a device connects to that region it should be pin to that region meaning that any processing that happens whether",
    "start": "2226770",
    "end": "2232350"
  },
  {
    "text": "I go from US ceased one to u.s. cease to all of my processing happens in a region I'm connected to and this is kind of the",
    "start": "2232350",
    "end": "2238350"
  },
  {
    "text": "behaviors of active passive so again we've got to do these five",
    "start": "2238350",
    "end": "2243609"
  },
  {
    "text": "things and so I'm gonna spend the next few minutes going over what all these look like so you can figure out okay if I do read your replication registry",
    "start": "2243609",
    "end": "2250480"
  },
  {
    "text": "replication what does that look like so with registry replication the things",
    "start": "2250480",
    "end": "2256420"
  },
  {
    "text": "you have to think about is you need to essentially register everything that happens within your register or impact your registry whether that means that",
    "start": "2256420",
    "end": "2262599"
  },
  {
    "text": "jobs are going to do things like update the things or thing types or the policies or the groups associated with a",
    "start": "2262599",
    "end": "2268480"
  },
  {
    "text": "device anything that happens with the register you have to replicate there is this little-known launch that happened",
    "start": "2268480",
    "end": "2274900"
  },
  {
    "text": "last year we did the vise management and it was like great you can do OTA updates and jobs I got really excited about the",
    "start": "2274900",
    "end": "2281109"
  },
  {
    "text": "fact that what device manager released this thing called registry events I think about registry event it's almost like a tail log of your registry",
    "start": "2281109",
    "end": "2287500"
  },
  {
    "text": "whenever you make a change in your registry if you turn on registry events will publish a message to a set of",
    "start": "2287500",
    "end": "2292630"
  },
  {
    "text": "topics for you and these topics are grouped you have your thing event so anything that happens to a thing if it's",
    "start": "2292630",
    "end": "2298119"
  },
  {
    "text": "created updated deleted anything that happens to a thing type not just when a thing type is created but when a thing",
    "start": "2298119",
    "end": "2304150"
  },
  {
    "text": "type is associated to a thing similarly with thing groups when you create a group and you put a bunch of devices in",
    "start": "2304150",
    "end": "2310359"
  },
  {
    "text": "them it'll say ok here's a create event for the group and here's an add event to the group again all of this gets",
    "start": "2310359",
    "end": "2316180"
  },
  {
    "text": "published to you on these set of topics you enable them and what's nice about these registry events when you think",
    "start": "2316180",
    "end": "2321369"
  },
  {
    "text": "about doing them on to region is you kind of start grouping them into the values that you need to send to the other regions and those are your",
    "start": "2321369",
    "end": "2327309"
  },
  {
    "text": "operations in this example with the fing event everything in green is kind of my operation I've got a thing event it's a",
    "start": "2327309",
    "end": "2334510"
  },
  {
    "text": "updated so operation is updated what is it it's a thing name what type does it",
    "start": "2334510",
    "end": "2340089"
  },
  {
    "text": "have all of this information lets me essentially run the same API in the other region and then for going abroad",
    "start": "2340089",
    "end": "2348010"
  },
  {
    "text": "to researcher we need some unique identifiers we need a way of basically saying okay have we process this event yet in the region it was generated in",
    "start": "2348010",
    "end": "2354430"
  },
  {
    "text": "and again with these registry events we create a unique event ID every single",
    "start": "2354430",
    "end": "2359980"
  },
  {
    "text": "time event is processed so what does it mean for our multi region replication we",
    "start": "2359980",
    "end": "2365319"
  },
  {
    "text": "need to replicate our registry from one place to another so in this case our users our",
    "start": "2365319",
    "end": "2370540"
  },
  {
    "text": "administrators are going to be operating against let's say the control plane of AWS IOT every single time to make a change",
    "start": "2370540",
    "end": "2376330"
  },
  {
    "text": "against eight of your sigh Oh tea we're gonna trigger a step functions workflow we trigger step functions because what",
    "start": "2376330",
    "end": "2382600"
  },
  {
    "text": "we want to do is we want to do a bunch of sanity checks so if I'm doing active passive I need to go is this my active",
    "start": "2382600",
    "end": "2388060"
  },
  {
    "text": "region do I need to send it to my passive region if you're doing something like active active you're basically",
    "start": "2388060",
    "end": "2393490"
  },
  {
    "text": "saying well if I seem this event before it does the other region need to know about it so in our step functions our",
    "start": "2393490",
    "end": "2399190"
  },
  {
    "text": "first step is just to figure out routing where does this event need to be sent to if anywhere and then if I do need to",
    "start": "2399190",
    "end": "2405220"
  },
  {
    "text": "route it somewhere my step functions basically sends it to another lambda and that lambdas job is to persist that event we persist that event in global",
    "start": "2405220",
    "end": "2412900"
  },
  {
    "text": "tables so we're using DynamoDB global tables this allows us to have all of our data synced from one region to another",
    "start": "2412900",
    "end": "2419609"
  },
  {
    "text": "once we've synced it to that region in that other region we've enabled DynamoDB",
    "start": "2419609",
    "end": "2424930"
  },
  {
    "text": "streams on that global table and we listen to that stream as events come in and we basically say since this is every",
    "start": "2424930",
    "end": "2432010"
  },
  {
    "text": "single event that's ever happened when you come in i'm going to parse you look at what kind of registry event you are and i'm going to run the ancillary comma",
    "start": "2432010",
    "end": "2440050"
  },
  {
    "text": "complimentary AWS IOT api directly against a taurus IOT core and with just",
    "start": "2440050",
    "end": "2445690"
  },
  {
    "text": "these simple steps we were able to essentially replicate from one region to another all of our registry information I mentioned before we always want to",
    "start": "2445690",
    "end": "2453460"
  },
  {
    "text": "think about how we add resiliency and redundancy to our applications and I also mentioned that you can do a one",
    "start": "2453460",
    "end": "2458800"
  },
  {
    "text": "account with all your deployments or you can do an accounts for a single region so you have that kind of deploying flexibility some consideration to think",
    "start": "2458800",
    "end": "2465940"
  },
  {
    "text": "about again with single region resiliency is you need to be able to hands to have some backup and failover in this so for some reason you can't",
    "start": "2465940",
    "end": "2472600"
  },
  {
    "text": "write to dynamodb for summers you can't get across the wire you should have a fail back strategy what I actually",
    "start": "2472600",
    "end": "2478300"
  },
  {
    "text": "recommend is we have an open source library for Kinesis Kinesis streams cross region replication the exact same",
    "start": "2478300",
    "end": "2486220"
  },
  {
    "text": "workflow that you do for a dynamodb you can actually use with that Kinesis cross region library so again giving you some",
    "start": "2486220",
    "end": "2492250"
  },
  {
    "text": "resiliency within the region and planning upfront for some reason I can't get to dynamo I still need to replicate this so I'm gonna fall back to Kinesis",
    "start": "2492250",
    "end": "2500490"
  },
  {
    "text": "the second part of this we've talked about over and over again is bringing your own CA and that really is using",
    "start": "2500490",
    "end": "2505720"
  },
  {
    "text": "just-in-time registration so as Lucas alluded to when you Just In Time registration it publishes a",
    "start": "2505720",
    "end": "2510760"
  },
  {
    "text": "registered event on a specific topic so it publishes on AWS slash of events",
    "start": "2510760",
    "end": "2516550"
  },
  {
    "text": "certificates registered then the CA certificate ID and you get this metadata about the certificate itself when you",
    "start": "2516550",
    "end": "2523780"
  },
  {
    "text": "use that information you can apply it a pretty similar pattern for all of your certificate information now your devices",
    "start": "2523780",
    "end": "2530440"
  },
  {
    "text": "go connect to a tourist IOT core that registration rule that gets published by just-in-time registration you kick off",
    "start": "2530440",
    "end": "2537100"
  },
  {
    "text": "another step functions workflow again I like step functions here because when you're using just-in-time registration",
    "start": "2537100",
    "end": "2542290"
  },
  {
    "text": "you have to make a lot of API calls and as AWS IOT you've got to say got to create a thing and got to create a",
    "start": "2542290",
    "end": "2547450"
  },
  {
    "text": "policy I gotta attach a policy to a thing and a thing to assert there's a lot of gymnastics so step functions",
    "start": "2547450",
    "end": "2553390"
  },
  {
    "text": "gives me some nice retry logic as it essentially creates the device and creates the identity for it then I",
    "start": "2553390",
    "end": "2560140"
  },
  {
    "text": "persist a new identity out into that same global table I use one global table",
    "start": "2560140",
    "end": "2565300"
  },
  {
    "text": "for all this replication because it's essentially my my event store for everything happening in a registry it",
    "start": "2565300",
    "end": "2571330"
  },
  {
    "text": "gets replicated across something slightly different you can use just-in-time and registration across all",
    "start": "2571330",
    "end": "2576460"
  },
  {
    "text": "the regions as Lucas mentioned but when I get into my demo a little bit later since you have the certificate",
    "start": "2576460",
    "end": "2581890"
  },
  {
    "text": "information you can just do bring your own certificate to the control side in that target region and your device is",
    "start": "2581890",
    "end": "2587770"
  },
  {
    "text": "already basically there so instead of having the device go connects each one you can say connect to one and I will",
    "start": "2587770",
    "end": "2593050"
  },
  {
    "text": "persist your certificate everywhere for you of course this goes against Atos IOT",
    "start": "2593050",
    "end": "2599020"
  },
  {
    "text": "core and one note that I put down here at the very bottom with the green is if",
    "start": "2599020",
    "end": "2604060"
  },
  {
    "text": "you end up using this pattern there is a little known additional flag you have to",
    "start": "2604060",
    "end": "2610330"
  },
  {
    "text": "set if you use the same subject name and your certificate authority if you use the same subject name and your certificate authority you have to pass",
    "start": "2610330",
    "end": "2616810"
  },
  {
    "text": "the CA back to us so if you plan on using that pattern you just need to keep another map of what's my CA associated",
    "start": "2616810",
    "end": "2624190"
  },
  {
    "text": "so I can go and pull it and essentially apply it with that bring your own certificate if you don't use the same",
    "start": "2624190",
    "end": "2629410"
  },
  {
    "text": "subject name you can just take the device and just say register so I",
    "start": "2629410",
    "end": "2635320"
  },
  {
    "text": "mentioned the Justin time registration event kind of gives you this base information a certificate ID see a certificate ID times",
    "start": "2635320",
    "end": "2641400"
  },
  {
    "text": "and all of the kind of ancillary fields unfortunately you can't take that immediately and just send it to the",
    "start": "2641400",
    "end": "2647400"
  },
  {
    "text": "other region and the reasons why is that things like the certificate ID and the CA certificate are associated to the",
    "start": "2647400",
    "end": "2653280"
  },
  {
    "text": "region you're in so what we end up doing is we basically take that identity and",
    "start": "2653280",
    "end": "2659040"
  },
  {
    "text": "as we go through step functions we create two unique events we basically say well we've got a just-in-time",
    "start": "2659040",
    "end": "2664230"
  },
  {
    "text": "registration event but what I really need is a certificate event and a policy event and what the policy and",
    "start": "2664230",
    "end": "2670470"
  },
  {
    "text": "certificate event look like is they basically look like registry events this is why I can send them to the exact same",
    "start": "2670470",
    "end": "2675480"
  },
  {
    "text": "data store and in this case what we do is for the policy event we basically say well I'd have a policy is it created",
    "start": "2675480",
    "end": "2682410"
  },
  {
    "text": "updated or deleted and what kind of status do I need to give to this policy am i attaching it to a certificate or",
    "start": "2682410",
    "end": "2688290"
  },
  {
    "text": "not am i detaching it from a certificate and the same thing happens with a certificate event what do I need to do",
    "start": "2688290",
    "end": "2693510"
  },
  {
    "text": "with this certificate and more importantly since I want to register it programmatically I also then pass in",
    "start": "2693510",
    "end": "2701119"
  },
  {
    "text": "somewhere down here the certificate PEM file so I basically say well I have the",
    "start": "2701870",
    "end": "2707610"
  },
  {
    "text": "CA and now I have your certificate file if I send you to the other region I can now register you so this all gets",
    "start": "2707610",
    "end": "2713250"
  },
  {
    "text": "aggregated and then since across the other region once you get those first",
    "start": "2713250",
    "end": "2718590"
  },
  {
    "text": "two steps out of the way those those are big steps but they're doable steps once you get them out of the way the rest of",
    "start": "2718590",
    "end": "2724680"
  },
  {
    "text": "active-passive is actually really easy it's exactly what you do for your traditional applications you have a pilot light infrastructure running in",
    "start": "2724680",
    "end": "2731430"
  },
  {
    "text": "your standby region in this case is USC stew if my device cuts over I then say",
    "start": "2731430",
    "end": "2737040"
  },
  {
    "text": "you were now pinned to that region you can't go to another region all of your data goes here we process it here so",
    "start": "2737040",
    "end": "2743160"
  },
  {
    "text": "we're now becomes my primary and then now that my device is actually running here I essentially just start adding",
    "start": "2743160",
    "end": "2748260"
  },
  {
    "text": "more infrastructure so that as more devices move I can handle the replication but again this is the easier",
    "start": "2748260",
    "end": "2753300"
  },
  {
    "text": "part you essentially issue to the device go to the other region and everything's already set up for it to run and when",
    "start": "2753300",
    "end": "2761070"
  },
  {
    "text": "you're doing that active-passive scenario you're cut over strategy strategy is also easy it's the same two things we talked about",
    "start": "2761070",
    "end": "2766410"
  },
  {
    "text": "you can either bootstrap and just say we want you to cut over we're gonna update our bootstrapping endpoint and when you",
    "start": "2766410",
    "end": "2771780"
  },
  {
    "text": "come back to it you come back every hour every day your naturally go to the other endpoint or you can issue an OTA so if your device",
    "start": "2771780",
    "end": "2779240"
  },
  {
    "text": "is connected to a tourist IOT core you can just say I just need to go to the other region but it's all cloud driven",
    "start": "2779240",
    "end": "2784430"
  },
  {
    "text": "we don't need to have additional kind of device side logic to do what really is like an active active kind of going",
    "start": "2784430",
    "end": "2790430"
  },
  {
    "text": "between endpoints so what I'm going to do is I'm going to switch to my laptop",
    "start": "2790430",
    "end": "2796730"
  },
  {
    "text": "and I'm actually going to show doing the cross region replication just in time registration and all the crazy stuff",
    "start": "2796730",
    "end": "2803150"
  },
  {
    "text": "that we just saw and hopefully the demo gods are on my side",
    "start": "2803150",
    "end": "2809290"
  },
  {
    "text": "perfect there are many a screens running so I would try to make as much sense of",
    "start": "2818520",
    "end": "2825270"
  },
  {
    "text": "everything happening at the same time so if you're looking at this kind of a front screen it has more devices in them",
    "start": "2825270",
    "end": "2831869"
  },
  {
    "text": "I'll kind of make a little bit bigger that's our US East so this is where our devices are in u.s. East and on this",
    "start": "2831869",
    "end": "2839070"
  },
  {
    "text": "other side here this is all of us West so you can't really tell the difference between Chrome and Firefox but one is",
    "start": "2839070",
    "end": "2845850"
  },
  {
    "text": "Chrome and one two five one is Firefox so what I want to do is I'm going to be in North North Virginia and I've",
    "start": "2845850",
    "end": "2852630"
  },
  {
    "text": "actually already configured a bunch of rules for AWS IOT so I mentioned you",
    "start": "2852630",
    "end": "2858300"
  },
  {
    "text": "need those rules in place to listen to registry events and if you can see in",
    "start": "2858300",
    "end": "2865110"
  },
  {
    "text": "the middle of my screen I essentially am saying select star all of my registry",
    "start": "2865110",
    "end": "2870210"
  },
  {
    "text": "events and I look for specific ones I don't replicate all of them some of them are a little bit redundant so I say look",
    "start": "2870210",
    "end": "2875369"
  },
  {
    "text": "for things thing Bruce thing types in any of the associations that come up in the registry related to things groups",
    "start": "2875369",
    "end": "2882630"
  },
  {
    "text": "and types and then what do I do i trigger my step functions workflow and",
    "start": "2882630",
    "end": "2888359"
  },
  {
    "text": "of course as I said the best practice you need to have resiliency redundancy my error action is sqs so for some",
    "start": "2888359",
    "end": "2895170"
  },
  {
    "text": "reason I can't process step functions immediately what I do is I fail back to sqs and then I read off of sqs",
    "start": "2895170",
    "end": "2901619"
  },
  {
    "text": "periodically and just execute the step functions work for myself so again I'm just having a way that for",
    "start": "2901619",
    "end": "2906690"
  },
  {
    "text": "some reason if I can't actually get out the door immediately I haven't lost my replication information",
    "start": "2906690",
    "end": "2913070"
  },
  {
    "text": "so what I'll do now is I'm going to essentially just like do what you might do in a console I'm going to create a",
    "start": "2918820",
    "end": "2924020"
  },
  {
    "text": "thing create a type I want to create a group and I'm gonna associate all of them and I'm going to do this in North Virginia and as I do that the registry",
    "start": "2924020",
    "end": "2931070"
  },
  {
    "text": "events are going to kick in and I'm gonna start sending that to us West so",
    "start": "2931070",
    "end": "2936349"
  },
  {
    "text": "all this is happening my step functions is going to kick off I'll start creating it and I'll show you the step function so you see what's happening and then",
    "start": "2936349",
    "end": "2942619"
  },
  {
    "text": "we'll go to us West hopefully everything's there but it should be there and then we'll talk a little bit more so I'll create a single thing I'll",
    "start": "2942619",
    "end": "2952970"
  },
  {
    "text": "call it a multi region fun",
    "start": "2952970",
    "end": "2961930"
  },
  {
    "text": "I won't give it a type just yet so I'll just create the thing by itself just so we can kind of see it created",
    "start": "2962990",
    "end": "2969050"
  },
  {
    "text": "essentially do everything separately so my reinvent multi-region fun is listed",
    "start": "2969050",
    "end": "2975110"
  },
  {
    "text": "here what I'll do now is I'll create a new type as well so let me create a",
    "start": "2975110",
    "end": "2981460"
  },
  {
    "text": "multi region one time and I'll create",
    "start": "2981460",
    "end": "2987140"
  },
  {
    "text": "that as a type so again I'm now just doing a bunch of creates I also say I've",
    "start": "2987140",
    "end": "2992660"
  },
  {
    "text": "got to group these for deployment so I want to create a group that's just deployment and create thing group so",
    "start": "2992660",
    "end": "3003640"
  },
  {
    "text": "I've created all three of these things and so now what I've done is I just switched tabs over this is my uswest so",
    "start": "3003640",
    "end": "3009550"
  },
  {
    "text": "you can see there's less things in it already so now you can know you're actually in uswest add 6 & 1 & 3 the",
    "start": "3009550",
    "end": "3015010"
  },
  {
    "text": "other actually did it stay in here we go I don't know this is my US West",
    "start": "3015010",
    "end": "3022210"
  },
  {
    "text": "this is my US West there's so three things so if I in US west basically",
    "start": "3022210",
    "end": "3027910"
  },
  {
    "text": "refresh I have my three things now have my reinvent multi-region it's been",
    "start": "3027910",
    "end": "3033369"
  },
  {
    "text": "replicated multi-region fun from one place to another if I go into my thing",
    "start": "3033369",
    "end": "3038560"
  },
  {
    "text": "groups as well I now have a new one deployment I now take it from one region to another and my thing types so my",
    "start": "3038560",
    "end": "3045910"
  },
  {
    "text": "multi region one time and again I continue to iterate on this because what's happening is step functions is",
    "start": "3045910",
    "end": "3051250"
  },
  {
    "text": "sending it from one region to another so if I go back to east where I should be in this browser I can do things like",
    "start": "3051250",
    "end": "3060640"
  },
  {
    "text": "let's say let's associate a type to this so my multi region one time it's",
    "start": "3060640",
    "end": "3066130"
  },
  {
    "text": "associated if I type to it and what's interesting enough I'll go into step functions a little bit but this actually",
    "start": "3066130",
    "end": "3071920"
  },
  {
    "text": "happens fairly quickly I'm even going cross region after you know a few seconds maybe like five ten seconds it's",
    "start": "3071920",
    "end": "3078760"
  },
  {
    "text": "already replicated in dynamo through dynamo DS DB streams pulled off API call",
    "start": "3078760",
    "end": "3084550"
  },
  {
    "text": "and replicated in some cases it happened so quickly that the demo kind of looked weird I was like oh I went back and like",
    "start": "3084550",
    "end": "3090130"
  },
  {
    "text": "how it's already here like it's like I missed it so I'll show some things I did in step function just to show it but just to know that it's like a very",
    "start": "3090130",
    "end": "3096450"
  },
  {
    "text": "very fast process so if i refresh my browser again what we'll see is that",
    "start": "3096450",
    "end": "3105540"
  },
  {
    "text": "device I just created now has its type updated so even these associations are being replicated across region what I'll",
    "start": "3105540",
    "end": "3114480"
  },
  {
    "text": "quickly do to add on to this and just to show you that you can do this for just in time registration as well is I have",
    "start": "3114480",
    "end": "3119790"
  },
  {
    "text": "several devices that have been signed by a CA and I'm just gonna run both of them",
    "start": "3119790",
    "end": "3127620"
  },
  {
    "text": "right now and so if I'm back in North Virginia what's happening is that these",
    "start": "3127620",
    "end": "3133260"
  },
  {
    "text": "devices are going to start coming online and they're going to go through some step function workflows so to show you",
    "start": "3133260",
    "end": "3139980"
  },
  {
    "text": "what step functions does in both of these cases is I have one step function",
    "start": "3139980",
    "end": "3146610"
  },
  {
    "text": "workflow that did all of my registry information so if I go into it into the definitions what you're kind of see is",
    "start": "3146610",
    "end": "3153690"
  },
  {
    "text": "that I just had that very very simple routing logic and then behind that routing logic basically said do I",
    "start": "3153690",
    "end": "3159300"
  },
  {
    "text": "persist this or not and in this case I basically just checked if I seen it before and if I have I then just say",
    "start": "3159300",
    "end": "3164760"
  },
  {
    "text": "don't persist it if I haven't seen it I say persistent in the case of",
    "start": "3164760",
    "end": "3170550"
  },
  {
    "text": "just-in-time registration what these devices are doing they're coming up line and the first time they connect they",
    "start": "3170550",
    "end": "3175740"
  },
  {
    "text": "don't have permissions yet but what I do in my registration flow is I basically creates let me see you I can make this a",
    "start": "3175740",
    "end": "3182160"
  },
  {
    "text": "little bit bigger I basically create",
    "start": "3182160",
    "end": "3187920"
  },
  {
    "text": "this step functions walk down I basically say first thing to do parse a certificate pull out the certificate",
    "start": "3187920",
    "end": "3192960"
  },
  {
    "text": "information like the serial number like the validity date so I can store it later after I do that I say activate the",
    "start": "3192960",
    "end": "3198660"
  },
  {
    "text": "certificate after that I say attached a policy create the thing and eventually I do two last things one is that I wait",
    "start": "3198660",
    "end": "3205770"
  },
  {
    "text": "because this demo happen so quickly that I had to put in a buffer so you can actually see the change has happened and",
    "start": "3205770",
    "end": "3211740"
  },
  {
    "text": "then I replicate that certificate I send those two events out into dynamodb to the other region so what you'll see is",
    "start": "3211740",
    "end": "3220020"
  },
  {
    "text": "I've got two devices running and if I scroll up a little bit what has kind of happened is they failed and disconnected just a few times",
    "start": "3220020",
    "end": "3226560"
  },
  {
    "text": "because they're trying to write or certificate they haven't actually been seen yet but now if I go back into",
    "start": "3226560",
    "end": "3232840"
  },
  {
    "text": "my regions what I'll see is I'm gonna have a brand new device with all of his configuration information in northridge",
    "start": "3232840",
    "end": "3239470"
  },
  {
    "text": "Enya so if I go here I've got these two devices they actually use a serial",
    "start": "3239470",
    "end": "3244510"
  },
  {
    "text": "number that's why they're just long numbers and these two devices have been bootstrapped so here's my certificate",
    "start": "3244510",
    "end": "3249970"
  },
  {
    "text": "this is a certificate that was from the CA my device CA my device certificate was signed by the CA and I've given it a",
    "start": "3249970",
    "end": "3257380"
  },
  {
    "text": "default policy and again that same flow gets replicated in to the other region",
    "start": "3257380",
    "end": "3262830"
  },
  {
    "text": "so I might have to go back but if I go into my certificate information these",
    "start": "3262830",
    "end": "3268810"
  },
  {
    "text": "are my brand new certificates again these are the ones I've been signed by me they've got my u s-- live in",
    "start": "3268810",
    "end": "3274090"
  },
  {
    "text": "Massachusetts so I have my Massachusetts information in it and again the global policy so just by a few essentially step",
    "start": "3274090",
    "end": "3283210"
  },
  {
    "text": "functions one time awesome just by using",
    "start": "3283210",
    "end": "3292210"
  },
  {
    "text": "a few step functions in Lemna I'm able to just start this replication process and if you notice the rest of us",
    "start": "3292210",
    "end": "3297550"
  },
  {
    "text": "actually really really easy so we talked about active passive for multi region",
    "start": "3297550",
    "end": "3302650"
  },
  {
    "text": "what about active active what if I want to run so a device can connect to any region in a deployment and then still be",
    "start": "3302650",
    "end": "3308110"
  },
  {
    "text": "able to operate I would like to share a quote before we dive into active active I lucky to have a professor Brian",
    "start": "3308110",
    "end": "3316120"
  },
  {
    "text": "Kernighan who if you've had this ebook you probably know him but he'd say you know if you build something so complex the",
    "start": "3316120",
    "end": "3322360"
  },
  {
    "text": "first time it's gonna be impossible to debug it so when we think about active active what we really need to focus on",
    "start": "3322360",
    "end": "3327550"
  },
  {
    "text": "is simplicity when I show these next few architectures we try to make them as straightforward in the logic so that the",
    "start": "3327550",
    "end": "3333700"
  },
  {
    "text": "edge case is kind of fall to the wayside so why would you Mike why would you want to do active active seamless disaster",
    "start": "3333700",
    "end": "3340930"
  },
  {
    "text": "recovery so again as devices disconnect and reconnect that discovery endpoint can go to any device any region in that",
    "start": "3340930",
    "end": "3348100"
  },
  {
    "text": "deployment it doesn't have to go okay here's my primary or wait for you to send me to secondary it just says I'm",
    "start": "3348100",
    "end": "3353500"
  },
  {
    "text": "just going to client-side load-balanced if I see an issue I'm going to cut across it also means that both of your",
    "start": "3353500",
    "end": "3359110"
  },
  {
    "text": "regions are hot anything running in those two regions essentially your are being utilized versus active-passive",
    "start": "3359110",
    "end": "3364990"
  },
  {
    "text": "where you still need some pilot light infrastructure there's also some additional cost benefits as well luckily",
    "start": "3364990",
    "end": "3371829"
  },
  {
    "text": "since its active active the first two things are done for us and we only need to focus on the last three because four",
    "start": "3371829",
    "end": "3377230"
  },
  {
    "text": "active active active passive you have to do registry and a certificate information the dual infrastructure",
    "start": "3377230",
    "end": "3382690"
  },
  {
    "text": "that's actually pretty easy whatever you run in your first region you run in your second region for your",
    "start": "3382690",
    "end": "3389950"
  },
  {
    "text": "device information you kind of put these into two aspects since your device is now pinned to a region it's responsible",
    "start": "3389950",
    "end": "3396760"
  },
  {
    "text": "for replicating its state to the other region so if my device starts in US East one and it goes to us cease to its job",
    "start": "3396760",
    "end": "3405010"
  },
  {
    "text": "is to say well I have my shadow I have my current state I need to go replicate that first when I go connect to the",
    "start": "3405010",
    "end": "3410589"
  },
  {
    "text": "other region that's my job but now I don't have to worry about well where's my current state well your device owns it and it tells you where to go so if it",
    "start": "3410589",
    "end": "3417430"
  },
  {
    "text": "needs to go from East one to East two it replicates its shadow from east one to East two so as you see the shadow just",
    "start": "3417430",
    "end": "3424180"
  },
  {
    "text": "magically appears the other interesting thing where it kind of gets complicated",
    "start": "3424180",
    "end": "3429640"
  },
  {
    "text": "but you want to make it as seamless as possible with where do you process your data and if you decided you active active you want to process your data",
    "start": "3429640",
    "end": "3435579"
  },
  {
    "text": "once so what does that mean if I cut over from us cease to to us cease one I",
    "start": "3435579",
    "end": "3441339"
  },
  {
    "text": "need to decide where am I going to process anything that's critical or time-sensitive any critical with",
    "start": "3441339",
    "end": "3447760"
  },
  {
    "text": "time-sensitive data she's basically processed in the region and devices connected to you can't wait",
    "start": "3447760",
    "end": "3452800"
  },
  {
    "text": "to forward it back to the other region just because your application is there like your user front-end application or internal application is there you need",
    "start": "3452800",
    "end": "3459220"
  },
  {
    "text": "to actually do the process wherever it's connected what about things like telemetry though in case of thing like",
    "start": "3459220",
    "end": "3465609"
  },
  {
    "text": "telemetry you might have other consumers you might have a mobile application that mobile application might be pinned to another region it may not be in the same",
    "start": "3465609",
    "end": "3471819"
  },
  {
    "text": "place as a device in those cases you have to route your logic from one region",
    "start": "3471819",
    "end": "3477400"
  },
  {
    "text": "to another you basically say for this telemetry it may not have to be processed here I need to look up this device this lemon tree",
    "start": "3477400",
    "end": "3484390"
  },
  {
    "text": "based on the application and inside do I process it in a region or do i forward it long so what might this look like",
    "start": "3484390",
    "end": "3491609"
  },
  {
    "text": "let's say I publish on a data topic there's my telemetry topic that I've got an applic one in it when it comes up to a tourist",
    "start": "3491609",
    "end": "3499000"
  },
  {
    "text": "IOT core I can actually make use of substitution templates to say look at the application ID and based on the",
    "start": "3499000",
    "end": "3504520"
  },
  {
    "text": "application ID I want you to go to a specific downstream AWS service or I can",
    "start": "3504520",
    "end": "3510730"
  },
  {
    "text": "make use of land again I can just say I don't really want to parse the topic I want laminates to figure it out so I'm gonna send it to lambda it looks at the",
    "start": "3510730",
    "end": "3517450"
  },
  {
    "text": "telemetry parses out the app ID and tells what to go but the benefit with both of these strategies and having the",
    "start": "3517450",
    "end": "3523390"
  },
  {
    "text": "app ID inside of your own qtt topic is you can then automatically route it to distinct downstream services and if you",
    "start": "3523390",
    "end": "3530890"
  },
  {
    "text": "it's a little bit harder to see but if you can see the naming convention these are all Kinesis I basically have like",
    "start": "3530890",
    "end": "3536260"
  },
  {
    "text": "name them in a sense after the region they're supposed to be associated with so I've got a Kinesis stream that says send us the US East one another one that",
    "start": "3536260",
    "end": "3542650"
  },
  {
    "text": "says this is the one destined to us East ooh and so on and so forth so give you",
    "start": "3542650",
    "end": "3549130"
  },
  {
    "text": "an idea of what this will look like with the substitution templates I have my Kinesis action I say here's a case the",
    "start": "3549130",
    "end": "3554500"
  },
  {
    "text": "app ID is that second topic so I've got topic two and then I've got a case statement it says if it's at one sent it",
    "start": "3554500",
    "end": "3561220"
  },
  {
    "text": "to East one can ISA stream app - keys - and so on and so forth similar for",
    "start": "3561220",
    "end": "3567640"
  },
  {
    "text": "lambda so lambda logic is more kind of pseudocode I basically will take the topic IDE and essentially assign it a",
    "start": "3567640",
    "end": "3574270"
  },
  {
    "text": "nice name like application ID and then in my pseudocode I basically parse it out go to a routing",
    "start": "3574270",
    "end": "3580210"
  },
  {
    "text": "service and then route that event the nice thing with active active if you go",
    "start": "3580210",
    "end": "3586870"
  },
  {
    "text": "this route again there's lots of moving parts where you try to make it as simple as possible you get additional benefits",
    "start": "3586870",
    "end": "3592240"
  },
  {
    "text": "of how you decide to actually cut over one place to another you can still do the cloud side approach you can",
    "start": "3592240",
    "end": "3597370"
  },
  {
    "text": "basically say I want my cloud to dictate where you go also as I mentioned before you can do a device side approach in",
    "start": "3597370",
    "end": "3603700"
  },
  {
    "text": "your bootstrapping lists all the endpoints basically say you can go to any of these endpoints you want and let the device decide where to go and all",
    "start": "3603700",
    "end": "3610690"
  },
  {
    "text": "your routing logic is dictated by is it's critical I need to process it wherever it is or is it something that",
    "start": "3610690",
    "end": "3615880"
  },
  {
    "text": "means we route it to another region so just some considerations in trade also",
    "start": "3615880",
    "end": "3620980"
  },
  {
    "text": "think about active passive this is easier to implement it's all about just replicating your data and essentially",
    "start": "3620980",
    "end": "3626710"
  },
  {
    "text": "having a standby your shadow is going to be sticky to the region so whatever region your device even if went",
    "start": "3626710",
    "end": "3633850"
  },
  {
    "text": "away for a little bit but comes back whatever region is active or hot that's where your shadow should be differently",
    "start": "3633850",
    "end": "3640270"
  },
  {
    "text": "with active active it is more complicated to deal with try to make it as simple as possible you still have to",
    "start": "3640270",
    "end": "3645310"
  },
  {
    "text": "replicate your device information and certificate information but also realize your device has to help in this process",
    "start": "3645310",
    "end": "3650530"
  },
  {
    "text": "your device needs to replicate the data between one region and other in the case of things like shadow so I know we",
    "start": "3650530",
    "end": "3658150"
  },
  {
    "text": "covered a lot in an hour lots of things to think about lots of demos lots of really great use cases",
    "start": "3658150",
    "end": "3663750"
  },
  {
    "text": "hopefully you can take some things away around the table stakes and being active active and active passive so thank you",
    "start": "3663750",
    "end": "3670390"
  },
  {
    "text": "so much enjoy the rest of reinvent we'd love to get your feedback so definitely complete the survey and we'll be",
    "start": "3670390",
    "end": "3675760"
  },
  {
    "text": "standing by for any questions thank you [Applause]",
    "start": "3675760",
    "end": "3681619"
  }
]