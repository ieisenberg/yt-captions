[
  {
    "start": "0",
    "end": "48000"
  },
  {
    "text": "Hey Erin?\nHey Tim! Why does everyone think\nwe're day drinking on the show today?",
    "start": "180",
    "end": "5953"
  },
  {
    "text": "Ugh. This is how rumors get started, no. We're going to go through a really cool\ndrink dispensing solution today.",
    "start": "6950",
    "end": "13208"
  },
  {
    "text": "Yeah, that's right. We're bringing on\nour colleagues, Anton and Gavin to discuss their connected drink dispenser that uses FreeRTOS,\nAPI Gateway, Lambda, DynamoDB,",
    "start": "14447",
    "end": "23487"
  },
  {
    "text": "KiCad EDA, Autodesk Fusion 360 and somehow even more.",
    "start": "23777",
    "end": "28050"
  },
  {
    "text": "That's quite a mouthful,\nso stay tuned to this episode of 'IoT All the Things.' 'Special Projects Edition.'",
    "start": "29430",
    "end": "34961"
  },
  {
    "start": "48000",
    "end": "117000"
  },
  {
    "text": "Hi from Brooklyn everyone.\nI'm Erin McGill. I'm a Solutions Builder here at AWS. So I've lived my tech career\non the infrastructure side of the house,",
    "start": "48757",
    "end": "58168"
  },
  {
    "text": "first as a sys admin\nthen automating infrastructure.  So that's kind of where\nI've developed my skill set.",
    "start": "58235",
    "end": "65431"
  },
  {
    "text": "But recently I've been really interested\nin IoT projects at home. Things that I can do there where I can\nactually just take a piece of hardware,",
    "start": "65509",
    "end": "73299"
  },
  {
    "text": "maybe some wires, and a breadboard,\nand a little bit of code, and actually make things happen.",
    "start": "73595",
    "end": "77970"
  },
  {
    "text": "What about you, Tim? - Tell us a little bit about yourself.\n- Hey, I'm Tim Mattison. I'm Tim Mattison\nfrom Pleasantville, New York.",
    "start": "78728",
    "end": "84774"
  },
  {
    "text": "And I am a Principal Partner SA for IoT. So I spend my days\nworking on really cool IoT projects",
    "start": "85165",
    "end": "90282"
  },
  {
    "text": "with partners, building things on AWS. I started out as a developer. I was always interested\nin interacting with the real world,",
    "start": "90349",
    "end": "96201"
  },
  {
    "text": "and I've done a bunch of those kinds\nof projects throughout my career. So I've gone from software development\nnow to Solutions Architect,",
    "start": "96346",
    "end": "102244"
  },
  {
    "text": "and having a lot of fun doing it. So it's great\nto have everybody back today. We're going to be talking\nall about projects",
    "start": "102346",
    "end": "108522"
  },
  {
    "text": "from edge to cloud, idea to fruition. And we're going to bring on our guests. AWS SAs Anton Shmagin and Gavin Adams.",
    "start": "108589",
    "end": "116128"
  },
  {
    "start": "117000",
    "end": "281000"
  },
  {
    "text": "Right, so they developed a workshop\nthat uses AWS IoT services, API Gateway, Lambda,\nDynamoDB, and other services,",
    "start": "117582",
    "end": "127557"
  },
  {
    "text": "to connect IoT connected drink dispensers\ninto the cloud. But before we get started",
    "start": "128050",
    "end": "133917"
  },
  {
    "text": "we wanted to talk about some things\nthat our viewers may find interesting. We talk about hot topics here.",
    "start": "134721",
    "end": "140393"
  },
  {
    "text": "Recently,\nactually I think earlier this week, AWS Solutions just launched\nnine new versions or updates",
    "start": "141073",
    "end": "148237"
  },
  {
    "text": "to their implementations. So these are vetted\ntechnical reference implementations,",
    "start": "148304",
    "end": "153987"
  },
  {
    "text": "designed to help customers\nsolve common problems that we see that customers\nare having out in the world",
    "start": "154538",
    "end": "160964"
  },
  {
    "text": "and help them build faster. So this week, they have released\nabout nine new solutions",
    "start": "161410",
    "end": "168601"
  },
  {
    "text": "So...\nActually, sorry. They have released new solutions\nsuch as streaming data for Amazon Kinesis,",
    "start": "168668",
    "end": "174237"
  },
  {
    "text": "Cognito user profiles, export reference architecture.\nBut they also did updates",
    "start": "174707",
    "end": "180947"
  },
  {
    "text": "to things like\nthe Serverless Image Handler. But one that I wanted to talk about\nand focus on is...",
    "start": "181074",
    "end": "187887"
  },
  {
    "text": "Since it has a focus on machine learning and that's something\nthat we want to focus on here, is called discovering hot topics\nusing machine learning.",
    "start": "188457",
    "end": "196886"
  },
  {
    "text": "And I think we have a screenshot\nof the architecture here. So it looks..\nIt's really interesting.",
    "start": "198089",
    "end": "204206"
  },
  {
    "text": "What it does is,\nyou can just launch it in your account and it automatically...",
    "start": "204276",
    "end": "210452"
  },
  {
    "text": "Well the default data source is Twitter. But it takes\nall of the information from Twitter",
    "start": "210519",
    "end": "216441"
  },
  {
    "text": "from a specific topic that you, as a customer\nwho deploys this, identifies. And it...\nIt then takes that information",
    "start": "216581",
    "end": "224995"
  },
  {
    "text": "puts it against some\nof our machine learning services, and then, you know,\ngets some insight from it.",
    "start": "225284",
    "end": "232058"
  },
  {
    "text": "I was talking to you, Tim, about this,\nand I thought that was pretty cool. And they actually take...\nYeah, go on.",
    "start": "232734",
    "end": "240086"
  },
  {
    "text": "Yeah, sorry.\nSo you shared this with me and I was really interested in it, because last week when we were talking...\nI think it was last week.",
    "start": "240979",
    "end": "246992"
  },
  {
    "text": "We were talking about the Bird Spy\nat some point, and how I started getting... Well that's when we did the butterflies. And we talked about how\nyou could train things with Rekognition",
    "start": "247060",
    "end": "254607"
  },
  {
    "text": "and get experience using ML. And it always feels like\na really tall mountain to climb to get there.",
    "start": "254674",
    "end": "260077"
  },
  {
    "text": "But this, like end to end, you know. Being able to just\ntake an input source like Twitter and have it pull out things\nthat you're interested in",
    "start": "260469",
    "end": "267583"
  },
  {
    "text": "gives you at least\na baseline to get started and then you can learn more\nand develop more on top of it. So I'm really excited to try this out.",
    "start": "267903",
    "end": "273325"
  },
  {
    "text": "I haven't had the chance to try it out yet\nsince I just learned about it the other day, but I'm definitely\ngoing to kick the tires on this and see what it can do.",
    "start": "273392",
    "end": "280197"
  },
  {
    "start": "281000",
    "end": "470000"
  },
  {
    "text": "Yeah, I think it's really cool\nthat since it connects to Twitter we have, there's so much data there that it will help you get insights\ninto what people are saying",
    "start": "281053",
    "end": "288245"
  },
  {
    "text": "around whatever topic you decide. But I just thought\nit would be really cool. We have a link to the Solution",
    "start": "288312",
    "end": "293972"
  },
  {
    "text": "that has been published\non our Solutions page so I think we'll put the link\nin the chat stream.",
    "start": "294050",
    "end": "302765"
  },
  {
    "text": "I just wanted to talk about that quickly\nbecause we have a lot to talk about today. We have our two guests with us.",
    "start": "304624",
    "end": "310953"
  },
  {
    "text": "Anton Shmagin and Gavin Adams. Welcome!\nThank you so much for joining us today.",
    "start": "311020",
    "end": "317551"
  },
  {
    "text": "So Anton, why don't you tell us\na little bit about yourself.",
    "start": "319111",
    "end": "321986"
  },
  {
    "text": "Partner Solution Architect. I am working primarily\nwith semiconductor companies like Espressif,",
    "start": "326580",
    "end": "332559"
  },
  {
    "text": "STMicroelectronics,  NXP, Arm. So deeply rooted in the hardware",
    "start": "333660",
    "end": "340240"
  },
  {
    "text": "although I started AWS\nas a security architect, so it's kind of funny.",
    "start": "340404",
    "end": "345990"
  },
  {
    "text": "Cool, alright.\nGavin, how about you? What have you been doing at AWS? Yeah, thanks, Erin and Tim.",
    "start": "348810",
    "end": "354427"
  },
  {
    "text": "So Gavin Adams,\nI'm an IoT Specialist Solutions Architect, meaning I work directly with customers\nwith IoT-centric workloads.",
    "start": "354619",
    "end": "361181"
  },
  {
    "text": "So this is near and dear to my heart. I'm representing from Denver, Colorado, so the other side of the Mississippi,",
    "start": "361385",
    "end": "366588"
  },
  {
    "text": "so we've got some west coasters here. And my background pretty much\nhas always been tech-related. Started with the internet back in the '90s\nwhen it pretty much became popular.",
    "start": "366768",
    "end": "374897"
  },
  {
    "text": "And I pretty much have never looked back, but I've always had a penchant\nto work with physical devices",
    "start": "375249",
    "end": "380022"
  },
  {
    "text": "so I've always gravitated towards IoT. - Cool.\n- Yeah, it is so cool.",
    "start": "380358",
    "end": "385371"
  },
  {
    "text": "So thank you so much for joining us today. Can you tell us, just a little bit, what is this project\nthat you're going to show us",
    "start": "386223",
    "end": "392043"
  },
  {
    "text": "and talk to us...\ntalk through with us today? Yeah so this is the project",
    "start": "392110",
    "end": "398931"
  },
  {
    "text": "that we run three successful workshops\nat three re:Invents.",
    "start": "399032",
    "end": "405063"
  },
  {
    "text": "Actually, much more workshops,\nbut at three re:Invents.",
    "start": "405164",
    "end": "410013"
  },
  {
    "text": "And actually this\nis how it looks like, right? So it's basically... Let me see if I can focus on it.",
    "start": "411235",
    "end": "417867"
  },
  {
    "text": "There we go.\nThat's it. That's what everyone wants to see. - That looks great!\n- Show us the hardware. - Yes please.\n- Cool.",
    "start": "423014",
    "end": "427944"
  },
  {
    "text": "So it's basically...\nIt has... it has a ESP32 microcontroller\nfrom Espressif.",
    "start": "428452",
    "end": "435999"
  },
  {
    "text": "Some motor control circuitry. The pump.\nAquarium pump.",
    "start": "437593",
    "end": "444202"
  },
  {
    "text": "The pressurized bottle.\nThe air in the bottle. And that's pretty much it.",
    "start": "444355",
    "end": "450011"
  },
  {
    "text": "It's a siphon principle. The moment you are pressurizing the air,\nthe liquid starts flowing to your glass.",
    "start": "450078",
    "end": "457234"
  },
  {
    "text": "And in this case\nthe liquid is just a pure Evian water.",
    "start": "457336",
    "end": "460656"
  },
  {
    "text": "Cool so I think that\nthis is a really cool workshop where you connect, both, you know,\nhardware on site but also in the cloud.",
    "start": "463633",
    "end": "470445"
  },
  {
    "start": "470000",
    "end": "917000"
  },
  {
    "text": "Speaking of the cloud, Gavin, the cloud side is pretty cool. Can you show us\nwhat the back-end looks like?",
    "start": "471067",
    "end": "476317"
  },
  {
    "text": "Sure so I'll go ahead\nand show you an architecture here. You know, a picture\nis worth a thousand words. So just starting with,\nyou know, the left-hand side",
    "start": "477689",
    "end": "484611"
  },
  {
    "text": "we've got our physical actors. So the drink dispenser\nthat Anton just showed on top. And then users that will actually\ninteract through a web browser",
    "start": "484678",
    "end": "491403"
  },
  {
    "text": "through the back-end infrastructure and actually, you know,\ncontrol the device. So I'll start to build this out, here.",
    "start": "491876",
    "end": "496462"
  },
  {
    "text": "Starting with the drink dispenser. So the first thing is that\nthe dispensers are IoT devices",
    "start": "497423",
    "end": "503434"
  },
  {
    "text": "and they communicate with AWS IoT Core\nvia the device Gateway. And we use client certificates\nand private keys",
    "start": "503501",
    "end": "509943"
  },
  {
    "text": "to identify and authorize\nthe devices that connect. So in the workshop, you have\na hundred different drink dispensers",
    "start": "510545",
    "end": "516557"
  },
  {
    "text": "all connected to IoT Core. - Cool, and because... Sure...\n- And from there...",
    "start": "516638",
    "end": "523052"
  },
  {
    "text": "- Go on.\n- Oh, yeah. Like I said, and from there they're using the MPTT Protocols,",
    "start": "523865",
    "end": "528974"
  },
  {
    "text": "so they're publishing\nand subscribing to different topics on the back end\nthat we then interact with.",
    "start": "529041",
    "end": "535252"
  },
  {
    "text": "Very cool. And that communication\nbecause you're using certificates, is it encrypted, or do I have the option\nto have it encrypted?",
    "start": "537056",
    "end": "544213"
  },
  {
    "text": "Yeah, so with IoT Core\nwe mandate encryption. So every connection\nfrom a device using MPTT we require TLS 1.2 encryption,",
    "start": "545525",
    "end": "552850"
  },
  {
    "text": "so that we can ensure that data in transit\nfrom the device to IoT Core is fully encrypted.",
    "start": "553303",
    "end": "558472"
  },
  {
    "text": "And by using\nthose X.509 client certificates - we also did a mutual authentication\nso that devices can identify the cloud",
    "start": "558581",
    "end": "564464"
  },
  {
    "text": "and the cloud\ncan identify the devices, too. - Awesome.\n- So anyways just to follow on to that",
    "start": "564839",
    "end": "571198"
  },
  {
    "text": "is that every dispenser\nhas its own set of topics that it communicates with. And by that identity, is that we can ensure",
    "start": "571605",
    "end": "577769"
  },
  {
    "text": "that one dispenser can't see\nor interact with other dispensers, unless we allow it.",
    "start": "577836",
    "end": "582382"
  },
  {
    "text": "But on the back-end, IoT Core also\nhas a capability we call the Rules Engine, where we can create rules.",
    "start": "583101",
    "end": "588273"
  },
  {
    "text": "And it's like business logic\nthat can look at the messages that are flowing through on topics.",
    "start": "588340",
    "end": "593183"
  },
  {
    "text": "And based on the content of those messages\ntake different actions.",
    "start": "593528",
    "end": "596629"
  },
  {
    "text": "So in this case here, we've got a couple rules:\na dispense and a logging rule that are looking at messages.",
    "start": "599424",
    "end": "604337"
  },
  {
    "text": "And if it sees a message of interest it will then invoke another AWS service outside of IoT Core.\nIn this case, Lambda, to take action.",
    "start": "604674",
    "end": "612912"
  },
  {
    "text": "In this case it may be\nto update credits on a dispenser, reduce the amount of credits\nthat are available",
    "start": "613005",
    "end": "619099"
  },
  {
    "text": "in a DynamoDB table, or just do straight log in to DynamoDB, or something like,\nyou know, Elasticsearch.",
    "start": "619338",
    "end": "625104"
  },
  {
    "text": "So are these messages in JSON,\nso that then you can... you know, already tell\nthe content of the message?",
    "start": "626054",
    "end": "631585"
  },
  {
    "text": "Yes, so even though you can do JSON\nor binary through IoT Core, by using JSON it allows the Rules Engine\nto be able to see every attribute",
    "start": "632718",
    "end": "640493"
  },
  {
    "text": "and do actions such as comparisons,\ngreater than, equal to and call functions on that to actually transform\nor even enrich the payload.",
    "start": "640891",
    "end": "648173"
  },
  {
    "text": "And that's how we actually do it for... which rules are invoked\nand what actions they take.",
    "start": "648397",
    "end": "653100"
  },
  {
    "text": "- Awesome.\n- Alright So now just transitioning\nto the bottom portion of this,",
    "start": "654256",
    "end": "659397"
  },
  {
    "text": "the other person.\nWe have our participants that interact. So they interact through a web application,",
    "start": "659464",
    "end": "665230"
  },
  {
    "text": "and this is\na single page application, or SPA, that's served up\nby S3 bucket through CloudFront.",
    "start": "665327",
    "end": "670725"
  },
  {
    "text": "And we also incorporate Route 53 and Amazon Certificate Manager,",
    "start": "671639",
    "end": "676595"
  },
  {
    "text": "so that we've got a true HTTPS connection\nto a friendly endpoint, that can type in\nand get to the actual webpage",
    "start": "676962",
    "end": "683454"
  },
  {
    "text": "and, you know, get rocking from there. When they actually get there,",
    "start": "683907",
    "end": "688891"
  },
  {
    "text": "the first thing they have to do\nis we have everybody register so they put in some credentials,\nusername, and password,",
    "start": "688958",
    "end": "693795"
  },
  {
    "text": "and there's validation\nor verification via SMS. And then they have an account.\nThey have all the credentials",
    "start": "694209",
    "end": "700732"
  },
  {
    "text": "and in the back-end we create\nall the resources they need for the workshop: such as a Cloud9 instance, a limited role,\nlimited access IAM user, etc.",
    "start": "700799",
    "end": "708182"
  },
  {
    "text": "Alright, I love it, it's really cool. And there's just so many components there. Now you're going to talk\nabout API Gateway here.",
    "start": "710877",
    "end": "716760"
  },
  {
    "text": "Yeah just quickly is that\nonce you're authenticated then users can actually call API methods\nand we use API Gateway for this.",
    "start": "717877",
    "end": "724385"
  },
  {
    "text": "And that way when we're... our Lambda functions\nthat are backed by that can validate... 'Hey this user is associated\nwith dispenser 1, 2, 3,",
    "start": "724987",
    "end": "731854"
  },
  {
    "text": "so I'm only going to allow them\nto do actions based on that.' And not on like, you know,\ndispenser 102, which is Anton's.",
    "start": "732283",
    "end": "737783"
  },
  {
    "text": "So then the users interact\nwith the website and not directly\nwith the IoT devices themselves?",
    "start": "739408",
    "end": "744862"
  },
  {
    "text": "Exactly, as I kind of just built up there like the activate dispenser Lambda\nin the middle takes in the thing that,\n'Hey I want to do a dispense'",
    "start": "745944",
    "end": "752785"
  },
  {
    "text": "and that turns it\ninto an actual MPTT message that's published to the device. So this is sort of\nthe separation of concerns",
    "start": "752852",
    "end": "758289"
  },
  {
    "text": "where users from the website...\n- Separation of concerns. Yes, they don't actually interface\ndirectly with devices,",
    "start": "758357",
    "end": "765828"
  },
  {
    "text": "and conversely devices\ndon't directly interact with the users. Cool, that makes a lot of sense.",
    "start": "766156",
    "end": "772492"
  },
  {
    "text": "Yeah, and that's pretty much it\nfor the architecture there. Yeah, I want to, now.\nIt's going to be really exciting.",
    "start": "773320",
    "end": "778953"
  },
  {
    "text": "I know it's a lot of pressure\nfor a live demo. Always a challenge to do that. But now I really want to see,\nand probably all the viewers want to see",
    "start": "779020",
    "end": "785853"
  },
  {
    "text": "a demo of all of this working together. And how it works from the interface\nto the physical device.",
    "start": "785920",
    "end": "791921"
  },
  {
    "text": "Yeah, let's see it! The magic of closing this out. Go to our two browser windows here.",
    "start": "792952",
    "end": "798576"
  },
  {
    "text": "And also we'll...\nAnd then Anton will be showing you. So what we have here\nare two different logins.",
    "start": "799257",
    "end": "804311"
  },
  {
    "text": "So on the left-hand side\nis my login to the dispenser app. And something quickly to call out",
    "start": "804429",
    "end": "809749"
  },
  {
    "text": "is that there's a direct link\nto the documentation. So a participant can go\nright to the documentation.",
    "start": "809816",
    "end": "815003"
  },
  {
    "text": "And it's all, you know...\nNavigation on the left-hand side. And full list\nof all the instructions to take.",
    "start": "816121",
    "end": "822156"
  },
  {
    "text": "But back to the important part here. So, my dispenser...\nI'm logged in for dispenser 100.",
    "start": "822843",
    "end": "830132"
  },
  {
    "text": "I'm also...\nI stole Anton's credentials. I logged into his account\nfor dispenser 102.",
    "start": "830234",
    "end": "834756"
  },
  {
    "text": "You wouldn't do this\nin the real workshop, viewers. Exactly, we want to show\nthat back and forth of like...",
    "start": "835421",
    "end": "840570"
  },
  {
    "text": "As a participant, I actually need\nto give credits to Anton to activate his dispenser.",
    "start": "841374",
    "end": "846398"
  },
  {
    "text": "So if you take a look at his dispenser,\nhe's got 75 cents. Not enough to actually dispense a drink.",
    "start": "847249",
    "end": "852679"
  },
  {
    "text": "You know, the button there\nsays 'needs credits.' And if we take a look at the dispenser\nthat Anton's holding up",
    "start": "852796",
    "end": "858765"
  },
  {
    "text": "you see they're all white lights there. So what I'm going to do...\nI'm going to go back to mine.",
    "start": "858890",
    "end": "864203"
  },
  {
    "text": "And I'm going to give him 25 cents,\nso I'm going to click on send credit.",
    "start": "864390",
    "end": "866906"
  },
  {
    "text": "Oh, cool. And it updates on his side,\nso he now has a buck. We notice that the LED's turned to green.",
    "start": "870390",
    "end": "876379"
  },
  {
    "text": "If we take a look on the dispenser...\nThe physical dispenser, it's green. And I can now click on the dispense button\nand dispense a drink.",
    "start": "876446",
    "end": "883118"
  },
  {
    "text": "You ready, Anton.\nYeah. Here we go.\nClick.",
    "start": "883782",
    "end": "888397"
  },
  {
    "text": "Otherwise, you're going\nto have a big mess on your hands. - There you go!\n- That's Awesome. That is very fast, I love it.\nYeah.",
    "start": "889047",
    "end": "895688"
  },
  {
    "text": "And, as you noticed,\nI've ran him out of credits so his LEDs in his dispensers say red.",
    "start": "896876",
    "end": "901790"
  },
  {
    "text": "That there's no way you can do this\nuntil you go back through this again. So it's a social aspect of\nyou've got to be able",
    "start": "901903",
    "end": "907699"
  },
  {
    "text": "to communicate with somebody\nand get them to give you credits. That's really cool.\nI like that part of it.",
    "start": "907766",
    "end": "911462"
  },
  {
    "text": "So.\nDemo complete. That is amazing.\nThank you for that demo. And it went off without a hitch.\nCongratulations.",
    "start": "913079",
    "end": "920087"
  },
  {
    "start": "917000",
    "end": "975000"
  },
  {
    "text": "So this is a really cool idea.\nHow did you guys come up with it?",
    "start": "920993",
    "end": "924212"
  },
  {
    "text": "Well it started like three years ago we'd been deciding how\nto make engaging and some quirky workshop",
    "start": "926408",
    "end": "936842"
  },
  {
    "text": "for re:Invent because, I mean... People are going there to learn the things.",
    "start": "936990",
    "end": "943225"
  },
  {
    "text": "And we decided to combine electronics\nwith one of the four elements.",
    "start": "943889",
    "end": "949420"
  },
  {
    "text": "And we decided that the water\nwas going to be the most incompatible. So at the end that's...\n- Fire's probably frowned upon.",
    "start": "949545",
    "end": "957631"
  },
  {
    "text": "That's basically what happened. Yeah, I mean, the fire... But we pretty much, we were sure that...",
    "start": "958084",
    "end": "964178"
  },
  {
    "text": "Because you know, it's in Las Vegas,\nthey will not allow us to do a lot of stuff with fire. But maybe, maybe.\n- Next time.",
    "start": "964764",
    "end": "972373"
  },
  {
    "text": "Yeah, live demos are hard enough. I love that you had to add\na more difficult element. It's a live production\nwith hundreds of people depending on it",
    "start": "974904",
    "end": "982170"
  },
  {
    "start": "975000",
    "end": "1066000"
  },
  {
    "text": "and there's the possibility\nof shorting things out because you spilled something,\nso that's a lot to worry about.",
    "start": "982292",
    "end": "988315"
  },
  {
    "text": "So you said it uses a siphon effect? Oh say that again, Erin.",
    "start": "988445",
    "end": "995101"
  },
  {
    "text": "I've been playing with my daughter like some time ago,\nand I showed her the siphon effect",
    "start": "996578",
    "end": "1005304"
  },
  {
    "text": "but obviously on a much less,\nI would say, complicated setup.",
    "start": "1005421",
    "end": "1012022"
  },
  {
    "text": "It was just a button and this pump motor",
    "start": "1012132",
    "end": "1017015"
  },
  {
    "text": "and the battery. That's pretty much it. And what happened next is that\nwhen we decided to go for this workshop",
    "start": "1018421",
    "end": "1026855"
  },
  {
    "text": "it was actually pretty compelling, something to give into the hands\nof each and every participant.",
    "start": "1027925",
    "end": "1034928"
  },
  {
    "text": "And what was happening is that... We just obviously\nadded the microcontroller.",
    "start": "1035583",
    "end": "1041387"
  },
  {
    "text": "We wanted to show the connected system. The first iteration of this workshop",
    "start": "1041454",
    "end": "1046819"
  },
  {
    "text": "was using Mongoose OS, and... Because we were actually under embargo.",
    "start": "1046887",
    "end": "1052601"
  },
  {
    "text": "And right now for two consecutive years it uses the FreeRTOS with our libraries.",
    "start": "1054031",
    "end": "1060781"
  },
  {
    "text": "So yeah.\nIt started like that. That's cool.\nSo now that you have...",
    "start": "1062312",
    "end": "1068643"
  },
  {
    "start": "1066000",
    "end": "1233000"
  },
  {
    "text": "You know that you're going to have\nsome sort of physical thing how did you decide what your contraption\nor setup would physically look like?",
    "start": "1068711",
    "end": "1075370"
  },
  {
    "text": "How did you build the prototype? Because you clearly have\na lot of components that have to fit in there pretty tightly.",
    "start": "1075496",
    "end": "1081676"
  },
  {
    "text": "Yeah, I'm pretty...\nPretty much every time I start with cardboard prototypes",
    "start": "1083043",
    "end": "1088246"
  },
  {
    "text": "because even some\nof the startup accelerator they advise people,",
    "start": "1088602",
    "end": "1094524"
  },
  {
    "text": "to make very good understanding how the future product\nis going to look like,",
    "start": "1094712",
    "end": "1101195"
  },
  {
    "text": "create it in cardboard. And what was happening that, at the time...",
    "start": "1101778",
    "end": "1106004"
  },
  {
    "text": "There are no shortage\nin cardboard right now. I mean especially right now\nduring COVID, right?",
    "start": "1107637",
    "end": "1112910"
  },
  {
    "text": "Everything is delivered\nso we have stacks of it. You can feel right away\ndimensionally what's going on.",
    "start": "1113793",
    "end": "1122098"
  },
  {
    "text": "So what's happening is that... - Oh, yeah! There it is. Oh, that's awesome.\n- Actually I sent him a...",
    "start": "1122427",
    "end": "1130263"
  },
  {
    "text": "Yeah, so this is...\nI found this picture. It was really\nthe first prototype of the thing.",
    "start": "1131052",
    "end": "1137458"
  },
  {
    "text": "So inside of that middle tube\nis like a bottle. And it's doing everything that you see here.",
    "start": "1137614",
    "end": "1144208"
  },
  {
    "text": "But obviously in a way more ugly...",
    "start": "1144341",
    "end": "1149570"
  },
  {
    "text": "But the moment you have like dimensions you can bring it into the CAD.",
    "start": "1150945",
    "end": "1155492"
  },
  {
    "text": "I've been using FreeCAD and right now I'm using the Fusion 360.",
    "start": "1156953",
    "end": "1161593"
  },
  {
    "text": "And then you can start building something\nthat can be laser cut",
    "start": "1163265",
    "end": "1168843"
  },
  {
    "text": "or 3-D printed, for example. Actually this last model,\nwe made it really accessible.",
    "start": "1169351",
    "end": "1176429"
  },
  {
    "text": "If you have a scroll saw,\nor if you have a 3-D printer or if you have access to a laser cutter,\nit all will work.",
    "start": "1176497",
    "end": "1185277"
  },
  {
    "text": "I mean you can make it from plywood,\nyou can make it from plastic you can make it from acrylic like this.",
    "start": "1185738",
    "end": "1190824"
  },
  {
    "text": "Got it, so you went\nfrom this physical cardboard prototype, you then turned it into a 3D model. You said you used Autodesk Fusion 360.",
    "start": "1192331",
    "end": "1199402"
  },
  {
    "text": "I know a long time ago\nI looked into some of these tools and they were all super expensive but you were saying Fusion 360\nfor personal use is now free?",
    "start": "1199469",
    "end": "1205851"
  },
  {
    "text": "So that's a really easy way to get started. You can take the cardboard, measure it,\nplop it in there and get models printed?",
    "start": "1206008",
    "end": "1212250"
  },
  {
    "text": "Absolutely, and it's not only CAD.\nIt's actually CAD and CAM.",
    "start": "1213872",
    "end": "1219472"
  },
  {
    "text": "So if you need to learn machining,\nit's fantastic. And even the price point of the software",
    "start": "1220153",
    "end": "1227528"
  },
  {
    "text": "even if you want to\nbuy a commercial license and do something. It's very affordable.",
    "start": "1228157",
    "end": "1232282"
  },
  {
    "start": "1233000",
    "end": "1317000"
  },
  {
    "text": "And so you have...\nYou said you have your ESP32 on there, but you also have a driver on it.",
    "start": "1234399",
    "end": "1241891"
  },
  {
    "text": "Is that a custom board I think you said?\n- That's correct. Yeah?\nIs that custom? Like why custom?\nAnd how did you do that?",
    "start": "1242927",
    "end": "1248966"
  },
  {
    "text": "There are two main reasons. So first of all, as you can see,\nit has these tabs",
    "start": "1250978",
    "end": "1259712"
  },
  {
    "text": "that actually go into the dispenser. And it's like securely locked there, right?",
    "start": "1260321",
    "end": "1267938"
  },
  {
    "text": "So, I mean,\nit's mechanically also functional. But the main reason:\nwe wanted to fit into the budget.",
    "start": "1268110",
    "end": "1276446"
  },
  {
    "text": "So we made this like a short run. Actually, Espressif helped us",
    "start": "1277790",
    "end": "1283990"
  },
  {
    "text": "to even like communicate with manufacturers and make this short run in a very...",
    "start": "1284443",
    "end": "1292830"
  },
  {
    "text": "I would say, the timeframe\nthat we needed, right?",
    "start": "1293822",
    "end": "1297456"
  },
  {
    "text": "And finally, also we wanted\nto minimize the number of components with the Interconnects.",
    "start": "1299143",
    "end": "1304526"
  },
  {
    "text": "Because every time\nyou have like a EdgePress driver board, and then you have microcontroller,\nand then you have LED,",
    "start": "1304594",
    "end": "1311433"
  },
  {
    "text": "it's a failure point,\nso we wanted to minimize those.",
    "start": "1312621",
    "end": "1316754"
  },
  {
    "start": "1317000",
    "end": "1557000"
  },
  {
    "text": "Yeah, that makes sense. So you put this together. You said the software used for that\nwas KiCad EDA so you built it in that.",
    "start": "1317801",
    "end": "1325215"
  },
  {
    "text": "You then get this file, a Gerber file which you then send to some manufacturer. And you know, software is hard,\nbut I think hardware is harder.",
    "start": "1325770",
    "end": "1333743"
  },
  {
    "text": "And even for experienced designers You're going to run into problems. I'm curious\nif you could share some of the...",
    "start": "1334946",
    "end": "1340266"
  },
  {
    "text": "If you had problems. Could you share anything\nthat happened with these first things? I imagine you sent the first Gerber file,\nyou got the first boards back",
    "start": "1340548",
    "end": "1347146"
  },
  {
    "text": "and you were just like,\nit's amazing; everything works and you had a huge party,\nand you were done, right? Yeah, absolutely, absolutely.",
    "start": "1347214",
    "end": "1353284"
  },
  {
    "text": "The truth is, I mean,\nthat one of the stupidest mistakes that I had initially...",
    "start": "1355850",
    "end": "1360131"
  },
  {
    "text": "That some of the pins on ESP32,\nthey are input only so you can connect sensors there but you cannot really use them\nfor the output",
    "start": "1361295",
    "end": "1369501"
  },
  {
    "text": "and I routed this nice board With the...\nWith...",
    "start": "1369710",
    "end": "1374460"
  },
  {
    "text": "This is my hotel room before, actually, before the workshops",
    "start": "1374765",
    "end": "1379781"
  },
  {
    "text": "so everything hitting, and so...\nRight?",
    "start": "1379937",
    "end": "1383203"
  },
  {
    "text": "I routed those pins up to the 32 and the board comes back\nand I'm super excited.",
    "start": "1386887",
    "end": "1394465"
  },
  {
    "text": "I'm soldering my first prototype.\nBoom. It doesn't control the motor.",
    "start": "1394535",
    "end": "1400223"
  },
  {
    "text": "Luckily, we had a...\nI routed two motors",
    "start": "1400301",
    "end": "1404856"
  },
  {
    "text": "so at least we were able to use one. Technically with this board...\nYeah with this board",
    "start": "1405356",
    "end": "1411069"
  },
  {
    "text": "you can build even like\na simple differential driver. But, so I wanted it\na little bit like a Lego brick",
    "start": "1411136",
    "end": "1417839"
  },
  {
    "text": "but it just happened. So that was one of the crazy failures.",
    "start": "1418042",
    "end": "1425253"
  },
  {
    "text": "Yeah, wow, that seems like\na heartbreaking moment when you realize this thing is just going to\nneed to be reworked or whatever.",
    "start": "1425912",
    "end": "1432584"
  },
  {
    "text": "- You know, I have, kind of...\n- You have to wait a few more weeks, right? Yeah, that's right,\nevery time you do an update you've got to wait weeks, right?",
    "start": "1433700",
    "end": "1439716"
  },
  {
    "text": "It's not like you commit new code,\nand it just works out. - You've got to get something shipped.\n- Exactly, and...",
    "start": "1439783",
    "end": "1444744"
  },
  {
    "text": "Yeah, and right now it's really...\nI mean, it's really fast",
    "start": "1445531",
    "end": "1450781"
  },
  {
    "text": "but I can do, let's say,\nI can do the prototype of the board at home, I can etch it or route it",
    "start": "1451476",
    "end": "1458828"
  },
  {
    "text": "but if you want to do it for the workshop you're talking quantities and...\n- Yeah.",
    "start": "1458999",
    "end": "1464710"
  },
  {
    "text": "Basically every time this piece comes\nit's like, 'Oh my God, will it work?'",
    "start": "1464820",
    "end": "1468835"
  },
  {
    "text": "Yeah that's...\nI've seen a couple of boards made and even when you send the right stuff. Even... mistakes get made\nat these manufacturers, too",
    "start": "1471937",
    "end": "1479196"
  },
  {
    "text": "so you've got to look out for that. So we were saying before, 'trust, but verify', which is definitely something always to do -",
    "start": "1479330",
    "end": "1484592"
  },
  {
    "text": "especially with hardware. I was going to say, I've got...",
    "start": "1485249",
    "end": "1489171"
  },
  {
    "text": "I was just going to say,\nI've got this unhealthy obsession with LEDs and lighting\nas people have seen in the past. I'm curious if you could just share\nwhat kind of LEDs you're using on there",
    "start": "1490948",
    "end": "1499148"
  },
  {
    "text": "because they look really cool. Yeah, so we're using the WS2812B\nto be precise",
    "start": "1499289",
    "end": "1506187"
  },
  {
    "text": "and we use the 8 LED ring",
    "start": "1506984",
    "end": "1510664"
  },
  {
    "text": "What's happening is that\nit also saves us on Interconnection.",
    "start": "1514481",
    "end": "1520684"
  },
  {
    "text": "Basically what's happening\nis that these LEDs, they are dressable, so you just need the three pins.",
    "start": "1522182",
    "end": "1528524"
  },
  {
    "text": "It's like your 3.305 volts",
    "start": "1529236",
    "end": "1534268"
  },
  {
    "text": "your ground, and your control wire, right? But that is a kind of blessing and curse",
    "start": "1534335",
    "end": "1542538"
  },
  {
    "text": "because right now\nyou have to program it, right?",
    "start": "1542717",
    "end": "1546225"
  },
  {
    "text": "While there are a bunch of, like,\nArduino libraries - Yeah!\nWe had to, we had to...",
    "start": "1548249",
    "end": "1553553"
  },
  {
    "text": "We had to do it from scratch. Yeah, so I've definitely heard\nof FastLED, which is a cool library,",
    "start": "1554210",
    "end": "1561013"
  },
  {
    "text": "I'm sure, Tim, you've used it. So why did you actually have to end up creating your own, I guess,\nlow-level programming or a library",
    "start": "1561081",
    "end": "1568333"
  },
  {
    "text": "and not just using one of those? So, Arduino historically is C++",
    "start": "1568400",
    "end": "1574736"
  },
  {
    "text": "So all libraries are written in C++ The FreeRTOS that we are using is C",
    "start": "1575275",
    "end": "1582080"
  },
  {
    "text": "and the Mongoose OS\nthat we were using before was also written in C.",
    "start": "1582166",
    "end": "1586607"
  },
  {
    "text": "So, that was the main reason. And while you can do casting",
    "start": "1587192",
    "end": "1593652"
  },
  {
    "text": "and kind of like associate the function in your C code with the object in C++",
    "start": "1594871",
    "end": "1601356"
  },
  {
    "text": "I mean it was too much to work so we just took very similar examples",
    "start": "1601719",
    "end": "1608954"
  },
  {
    "text": "from RMT library and basically reused that to control these.",
    "start": "1609196",
    "end": "1617735"
  },
  {
    "text": "And I have to say there... Yeah, this is basically\nvery much a community project,",
    "start": "1619352",
    "end": "1625985"
  },
  {
    "text": "because we had tons of help from... from Espressif,\nfrom our colleagues in Klika Tech, ",
    "start": "1626149",
    "end": "1635520"
  },
  {
    "text": "from all our AWS colleagues. One colleague was like\nliterally debugging the code for us",
    "start": "1636689",
    "end": "1643760"
  },
  {
    "text": "on a plane from Stockholm to Las Vegas. It was countless, countless people\nthat I'm really thankful",
    "start": "1643862",
    "end": "1653393"
  },
  {
    "text": "to bring this to the point\nthis workshop is right now. Yeah. It's important\nfor people to know this.",
    "start": "1653831",
    "end": "1660167"
  },
  {
    "text": "Don't do it yourself. Yeah, it takes a village in some ways. It takes village to raise a workshop baby.",
    "start": "1660234",
    "end": "1666339"
  },
  {
    "start": "1664000",
    "end": "1828000"
  },
  {
    "text": "I just had to get that out.\n- Indeed! And, you know, one thing\nI wanted to highlight for people",
    "start": "1666948",
    "end": "1672190"
  },
  {
    "text": "is that you went through,\nyou made your own library and you said that there were\nmaybe some slight quirks with it.",
    "start": "1672257",
    "end": "1677815"
  },
  {
    "text": "Can you just explain to us the challenges\nyou ran into with the LEDs? Yeah, so the WS2812,\nwhile you can't beat bank,",
    "start": "1678730",
    "end": "1690839"
  },
  {
    "text": "then it uses a lot of processor cycles.",
    "start": "1692557",
    "end": "1697089"
  },
  {
    "text": "And we wanted to minimize that. So we had two choices, either RMT",
    "start": "1697659",
    "end": "1702731"
  },
  {
    "text": "or I2S subsystems or buses",
    "start": "1702798",
    "end": "1707726"
  },
  {
    "text": "that gives you, like, hardware\nvery precise timing control",
    "start": "1708929",
    "end": "1715757"
  },
  {
    "text": "over the, like,\na signal that you want to send.",
    "start": "1716261",
    "end": "1719966"
  },
  {
    "text": "So we went with RMT, but technically\nwe can reuse the I2S as well.",
    "start": "1721964",
    "end": "1729024"
  },
  {
    "text": "But you said that there was like\na slight flicker that you noticed that you were kind of harping on.",
    "start": "1730625",
    "end": "1734533"
  },
  {
    "text": "Yeah, indeed, it's basically... what was happening is that...",
    "start": "1735797",
    "end": "1739305"
  },
  {
    "text": "we noticed it. I don't think anybody in the audience\nnoticed it, but we did.",
    "start": "1742071",
    "end": "1746602"
  },
  {
    "text": "And we're working right now\nwith Espressif",
    "start": "1748438",
    "end": "1753368"
  },
  {
    "text": "to basically fix it. But because I run out of ideas,\nis why it's happening.",
    "start": "1753633",
    "end": "1761688"
  },
  {
    "text": "So I think it's something\non a low-level drivers. But, as I said, I also want to try\nto implement it in I2S",
    "start": "1761821",
    "end": "1770032"
  },
  {
    "text": "which is historically an audio interface but people have been\ndoing crazy stuff with it.",
    "start": "1770446",
    "end": "1776016"
  },
  {
    "text": "Especially with ESP8266 and ESP32. Yeah, the thing\nI wanted to highlight there, though",
    "start": "1776352",
    "end": "1783938"
  },
  {
    "text": "Sorry, we're all stepping\non each other, sorry. Just the thing I wanted to highlight was that when you work on\nthese low-level things like this.",
    "start": "1784258",
    "end": "1790813"
  },
  {
    "text": "I've done this before\non a different LED project but there were\na lot of things that I noticed when I implemented my own, simple drivers.",
    "start": "1790880",
    "end": "1797580"
  },
  {
    "text": "Much simpler than this;\nit was just a single LED. I would notice a lot of things and I was always\ncalling it creator's neuroticism",
    "start": "1797814",
    "end": "1804627"
  },
  {
    "text": "Where, like, you notice it,\nand you're kind of afraid to show it to people but then nobody else really notices,\nand it's not really a big deal.",
    "start": "1804694",
    "end": "1810944"
  },
  {
    "text": "And you just, you have to get over it. But the important thing is,\nnever tell them. Because if they notice it,\nthey'll never unsee it.",
    "start": "1811370",
    "end": "1816929"
  },
  {
    "text": "That's always very hard to get through.",
    "start": "1817077",
    "end": "1819327"
  },
  {
    "text": "Indeed. Sorry, Erin. I cut you off there.",
    "start": "1822188",
    "end": "1827563"
  },
  {
    "start": "1828000",
    "end": "1913000"
  },
  {
    "text": "Oh no, I was just going to say don't say anything\nbecause no one will notice.",
    "start": "1828634",
    "end": "1832429"
  },
  {
    "text": "And then once you point it out,\nlike you said then everyone can see it all the time,\nand then you just can't unsee it.",
    "start": "1834055",
    "end": "1839282"
  },
  {
    "text": "I found one of the other projects I've done with like, with my daughter, right?",
    "start": "1840829",
    "end": "1847485"
  },
  {
    "text": "It's basically...\n- Man, this is amazing. That's amazing.\nIs that LEDs or real fire?",
    "start": "1847638",
    "end": "1854177"
  },
  {
    "text": "Yeah, it's LEDs\nand I'm pretty proud of flickering",
    "start": "1855216",
    "end": "1860802"
  },
  {
    "text": "like to simulate the gas stove. But literally I was trying to find out\nthat siphon project that I did with her",
    "start": "1861107",
    "end": "1870865"
  },
  {
    "text": "and I bump into this one\nin the attic, so... Wow, is that made\nwith a little diffuser light",
    "start": "1871232",
    "end": "1876544"
  },
  {
    "text": "over that? That would look really\nvery convincing; that's pretty awesome. So we've gone through...\nwe've gone through the hardware.",
    "start": "1877052",
    "end": "1884200"
  },
  {
    "text": "We've talked about some of the challenges\nthat you've seen there. I want to get into\nthe software side of things now.",
    "start": "1884326",
    "end": "1889904"
  },
  {
    "text": "And the one thing I noticed immediately\nwas that the documentation is great. First of all, you've got\na great architecture diagram you showed us then you have that website",
    "start": "1890247",
    "end": "1897177"
  },
  {
    "text": "That shows everything,\nthat is all built out. Did you use any specific tools\nto help you do that?",
    "start": "1898107",
    "end": "1903263"
  },
  {
    "text": "Because I struggle\nwith writing documentation. If there's something to make it easier,\nI want to know about it.",
    "start": "1903353",
    "end": "1907635"
  },
  {
    "text": "- I usually just save it until the end.\n- So what we first started doing... Ha. Exactly. Yeah, we did it, too; we were doing\na lot of document writing",
    "start": "1908713",
    "end": "1915841"
  },
  {
    "start": "1913000",
    "end": "2096000"
  },
  {
    "text": "at re:Invent the night before. But, we made the decision to start\nat the very beginning, three years ago",
    "start": "1915936",
    "end": "1922334"
  },
  {
    "text": "that all the documentation\nwould be via a website. Which, there's a lot of challenges\nof how do you actually craft this?",
    "start": "1922412",
    "end": "1929225"
  },
  {
    "text": "You know, HTML, these types of things. So for this last one\nwe actually started to use Hugo. And Hugo essentially is a framework\nthat allows you to create static websites",
    "start": "1929292",
    "end": "1938242"
  },
  {
    "text": "from essentially any type of back-end file. Could be a text file, Markdown,\nAsciiDoc, even reStructuredText.",
    "start": "1938516",
    "end": "1944797"
  },
  {
    "text": "And by having\nall those sort of source files we could then just run a compilation\nas we're deploying the infrastructure.",
    "start": "1945461",
    "end": "1950945"
  },
  {
    "text": "It would render the entire site. We upload it to the same S3 bucket\nwhere the dispenser app is located.",
    "start": "1951469",
    "end": "1956914"
  },
  {
    "text": "Now everybody's\ngot full access to rich text so you can see images, videos,\neven UML diagrams",
    "start": "1957383",
    "end": "1963679"
  },
  {
    "text": "that we generate and render. Which gives the participants\na much better experience",
    "start": "1963747",
    "end": "1969881"
  },
  {
    "text": "and a way to copy/paste code\nand everything else in so many other ways. You probably see a lot of this also\nwith other AWS workshops, too.",
    "start": "1970116",
    "end": "1976014"
  },
  {
    "text": "They're using the same set of tools,\nand sort of template. Yeah, it's really convenient.",
    "start": "1976081",
    "end": "1981050"
  },
  {
    "text": "If you're used to writing documentation\nin Markdown or whatever, like you can add that web element\nto it really easy. Like I've written\ntons of Markdown documentation",
    "start": "1981118",
    "end": "1987490"
  },
  {
    "text": "but it doesn't look pretty like that, so... it's cool to know\nthat I can step up my game with something like Hugo.",
    "start": "1987557",
    "end": "1992838"
  },
  {
    "text": "- Just apply template.\n- You mentioned... You mentioned in that...\nWell, yeah, that's the hard part. I've got to find a template somewhere.\nAlright, well, I'll steal yours.",
    "start": "1994096",
    "end": "2000830"
  },
  {
    "text": "So you mentioned you guys are using Cloud9. I see a lot of workshops using Cloud9 and it's super convenient\nfor the web side of things",
    "start": "2001819",
    "end": "2008804"
  },
  {
    "text": "but there's this last leg of trying to get the, you know, the firmware\nthat you build in this environment.",
    "start": "2008871",
    "end": "2013801"
  },
  {
    "text": "And you do that because\nit's a consistent environment for everybody but the firmware that you build,\nyou need to get it onto the device,",
    "start": "2014035",
    "end": "2019067"
  },
  {
    "text": "and, as far as I know,\nCloud9 doesn't do that. So how do you bridge that last step?",
    "start": "2019134",
    "end": "2022907"
  },
  {
    "text": "Yeah, so, as mentioned, you know everybody has their own cloud environment where they're doing\nthe compilation of the firmware",
    "start": "2024240",
    "end": "2029197"
  },
  {
    "text": "So a lot of, you know, CMake files\nand these types of things. And the output\nbasically are the firmware files, and you need to physically\nget those onto the device.",
    "start": "2029264",
    "end": "2036044"
  },
  {
    "text": "So the approach that we took is that you download those from Cloud9\nto your local laptop. This could be Windows, Mac, or Linux.",
    "start": "2036280",
    "end": "2042577"
  },
  {
    "text": "And then you use the magic flashing tool to basically copy the files\nacross the USB serial connection",
    "start": "2043077",
    "end": "2049272"
  },
  {
    "text": "over to the ESP32 to actually flash it. So the challenge was for Mac and Linux,\nthere's a lot of good patterns",
    "start": "2049339",
    "end": "2056815"
  },
  {
    "text": "and sort of commands\nthat are built into the operating system but there's not for Windows.",
    "start": "2056882",
    "end": "2061638"
  },
  {
    "text": "So we had to find a tool. Well you can technically use it",
    "start": "2062289",
    "end": "2067455"
  },
  {
    "text": "but installing Python\nand installing all these libraries for the pi serial is much more challenging",
    "start": "2067588",
    "end": "2074484"
  },
  {
    "text": "than, let's say, installing it. Yeah, so precompiled binaries this is something\nthat Windows is historically using",
    "start": "2075382",
    "end": "2081866"
  },
  {
    "text": "Someone pointed us out that there are like\nprecompiled binaries for ESP...",
    "start": "2083683",
    "end": "2087933"
  },
  {
    "text": "ESP tools. And it saved our skin multiple times.",
    "start": "2089753",
    "end": "2095324"
  },
  {
    "start": "2096000",
    "end": "2148000"
  },
  {
    "text": "Yeah, I can imagine because everyone comes\nwith a different kind of computer. Sometimes they come with the one\nthat was given to them by their company",
    "start": "2096578",
    "end": "2103766"
  },
  {
    "text": "that's a little bit locked down. And sometimes they come with Windows",
    "start": "2103833",
    "end": "2108742"
  },
  {
    "text": "and maybe they can't install things. Maybe some things\ncan be installed and can't so I can see that being\na little bit of a challenge",
    "start": "2108859",
    "end": "2114833"
  },
  {
    "text": "and this sounds like\nit makes it easier across the board. Yeah, at least for the initial deployment\nor flashing.",
    "start": "2114900",
    "end": "2122001"
  },
  {
    "text": "But as Anton mentioned up front is that the next iteration would be\nto use over-the-air updates. Where you've got, you know,\nbasic bootloader on there",
    "start": "2122306",
    "end": "2129873"
  },
  {
    "text": "that can connect to Wi-Fi,\nand then it can automatically reach out to IoT Core and download the firmware",
    "start": "2129940",
    "end": "2136151"
  },
  {
    "text": "that somebody's compiled\nand has made available. So we're looking for any magic bullets\nor silver bullets that can help us",
    "start": "2136218",
    "end": "2143036"
  },
  {
    "text": "bridge that gap from, you know, a laptop\nto a physical device, locally.",
    "start": "2143184",
    "end": "2147343"
  },
  {
    "start": "2148000",
    "end": "2257000"
  },
  {
    "text": "Yeah, and you said that you've been,\nI guess, running this workshop and iterating on it over like\nthree years or so.",
    "start": "2148513",
    "end": "2155739"
  },
  {
    "text": "So I'm assuming\nyou started off with CloudFormation, and I think you said\nthat you've moved it through CDK.",
    "start": "2156471",
    "end": "2163908"
  },
  {
    "text": "So did you have any challenges moving\nfrom CloudFormation to using CDK? Why did you actually\ndo that in the first place?",
    "start": "2164768",
    "end": "2171447"
  },
  {
    "text": "So for the first two years\nit was based on CloudFormation. And CloudFormation is awesome\nbecause its infrastructure is code.",
    "start": "2173307",
    "end": "2178635"
  },
  {
    "text": "You have a single template,\nyou put in some parameters, click a button and everything's deployed\nfor you in the background. But what I saw as a novice developer,",
    "start": "2179119",
    "end": "2187135"
  },
  {
    "text": "is that if I need to make\nany small, slight changes it can be hard.\nI mean the best example is like a VPC.",
    "start": "2187533",
    "end": "2193424"
  },
  {
    "text": "In CloudFormation, a VPC requires\n10 to 20 resources before you actually\nget to the VPC component.",
    "start": "2194033",
    "end": "2199330"
  },
  {
    "text": "And it's like\n'Oh I want to change CIDR ranges or security groups, or route tables.' It gets kind of complex.",
    "start": "2199713",
    "end": "2205702"
  },
  {
    "text": "So at the same time last year that we were thinking about\nhow we wanted to iterate in year three,",
    "start": "2206467",
    "end": "2211272"
  },
  {
    "text": "the CDK or Cloud Development Kit was out. I said, \"Let's go ahead and use this.\" So, I'm a Python programmer",
    "start": "2211612",
    "end": "2218902"
  },
  {
    "text": "so I did this all in the Python version. There's TypeScripts in Java also. And once I saw the thing\nthat I can make a single call,",
    "start": "2218969",
    "end": "2226890"
  },
  {
    "text": "and I'll use the VPC example, a single call to VPC, and in a CIDR range, it does everything\nin the background for me.",
    "start": "2226957",
    "end": "2233125"
  },
  {
    "text": "And CDK basically just deploys that or creates\na CloudFormation template for you. I wasn't looking back.",
    "start": "2233390",
    "end": "2239133"
  },
  {
    "text": "So the challenge was getting out of\nthe mindset of CloudFormation managing a JSON and then a YAML document,",
    "start": "2239289",
    "end": "2246133"
  },
  {
    "text": "to being very prescriptive\nand using like Python or TypeScript to create my code",
    "start": "2246554",
    "end": "2251867"
  },
  {
    "text": "which then generates my templates, my CloudFormation templates.",
    "start": "2252312",
    "end": "2256692"
  },
  {
    "start": "2257000",
    "end": "2335000"
  },
  {
    "text": "So you already had\nyour CloudFormation templates and you had to kind of move over and retrofit them into CDK\nor figure out how it works.",
    "start": "2257833",
    "end": "2265494"
  },
  {
    "text": "Did you need to change the way\nthat you thought about  building your stacks\nwhen you moved to using the CDK?",
    "start": "2265782",
    "end": "2271329"
  },
  {
    "text": "Because, I mean, you're going\nfrom a statically written file to a more programming approach\nto creating infrastructure.",
    "start": "2271446",
    "end": "2279102"
  },
  {
    "text": "Yeah,\nso one of the things there was that CDK allows you to take inputs like locally\nlike in a local JSON file,",
    "start": "2280487",
    "end": "2286503"
  },
  {
    "text": "and it uses local commands\nto do some of the processing which ultimately then generates\na CloudFormation template.",
    "start": "2286862",
    "end": "2292440"
  },
  {
    "text": "But a lot of times you want to basically be able to give a single\ntemplate file to somebody that they can load\ninto the CloudFormation console,",
    "start": "2292745",
    "end": "2299197"
  },
  {
    "text": "put in some parameters,\nand then have the stack be deployed. And, originally last year,\nwe didn't have parameter support,",
    "start": "2299843",
    "end": "2306304"
  },
  {
    "text": "but we did have that sort of JSON,\nthat local config file, so that's the approach\nwe used for the workshop. But now you can actually generate\nCDK CloudFormation templates",
    "start": "2306859",
    "end": "2315145"
  },
  {
    "text": "that still have input parameters. Now they're CloudFormation,\nso they're immutable. You can't change them once input.",
    "start": "2315473",
    "end": "2321087"
  },
  {
    "text": "But if all of your parameters\nessentially are sort of static type of things\nyou can put into there,",
    "start": "2321735",
    "end": "2326555"
  },
  {
    "text": "we can now deploy -\nwe can give a person a single template. They can deploy the entire back end\ninfrastructure from that one file.",
    "start": "2327446",
    "end": "2334094"
  },
  {
    "start": "2335000",
    "end": "2507000"
  },
  {
    "text": "That's awesome. So, like Tim brought up,\nand talking to Anton,",
    "start": "2335266",
    "end": "2339750"
  },
  {
    "text": "I'm sure everything went perfectly. Nothing ever went wrong, especially when you're trying\nto run these workshops",
    "start": "2340446",
    "end": "2346969"
  },
  {
    "text": "with hundreds of people,\nmaybe 100, 200. So what was the most exciting thing\nthat went wrong with the software?",
    "start": "2347036",
    "end": "2354027"
  },
  {
    "text": "That would be\nthe first year that we did this. And, we were being smart. It's like, alright, we know that we need\nto give like unique credentials",
    "start": "2355559",
    "end": "2363547"
  },
  {
    "text": "and certificates\nand everything to each person. So let's, in the back-end,\ngenerate all of these assets,",
    "start": "2363615",
    "end": "2369545"
  },
  {
    "text": "zip them up into files,\nput them into an S3 bucket and then give everybody\na presigned, S3 URL.",
    "start": "2369678",
    "end": "2376412"
  },
  {
    "text": "- Makes sense.\n- Set the parameters, set the parameters\nto like expire in 36 hours. We're good to go.",
    "start": "2377029",
    "end": "2382435"
  },
  {
    "text": "And then we also used\na URL shortener service so that, you know, they didn't have to\ntype in that huge, long URL, but just a short one.",
    "start": "2382560",
    "end": "2388240"
  },
  {
    "text": "Start along...\nYou know, we go into the workshop. We tell people, alright,\ngo to your URL that we've given you,",
    "start": "2390037",
    "end": "2394732"
  },
  {
    "text": "and hands immediately\nwere being raised saying, 'I'm getting this thing\nsaying this URL's expired.'",
    "start": "2395150",
    "end": "2399877"
  },
  {
    "text": "- Oh no!\n- I'm thinking to myself... I'm thinking, but wait!\nI set this for 36 hours so how?\nAnd was only like around 12 hours ago.",
    "start": "2400496",
    "end": "2408192"
  },
  {
    "text": "Reading back, because I was having\nLambda actually generate the presigned URLs, it's using role chaining to do that",
    "start": "2409423",
    "end": "2415587"
  },
  {
    "text": "and it limits what that duration can be. Yeah, you can say that it's 36 hours,\nand it will give you one that's valid,",
    "start": "2415735",
    "end": "2421454"
  },
  {
    "text": "but it was only valid\nfor a short period of time. So pretty big fail right there.",
    "start": "2422141",
    "end": "2427040"
  },
  {
    "text": "We had to give all the files\nto people individually, so, as you can imagine,\nkind of a nightmare.",
    "start": "2427282",
    "end": "2432438"
  },
  {
    "text": "Yeah, and you ran into\nsome IAM service limits as well? Is that right? Some soft limits\nthat you didn't anticipate?",
    "start": "2433891",
    "end": "2440634"
  },
  {
    "text": "So this last year it was like, alright. No more third party URL shorteners. No more presigned URLs.\nWe'll basically just,",
    "start": "2441774",
    "end": "2447881"
  },
  {
    "text": "as people log into the website\nand register for the first time, we'll create their,\nall the assets for them.",
    "start": "2448022",
    "end": "2453130"
  },
  {
    "text": "So their things,\ntheir certificates, Cloud9. And we'll make this available\nas things they can download",
    "start": "2453237",
    "end": "2458573"
  },
  {
    "text": "once they've authenticated to the service. What we didn't realize is that when you test this out\nwith one or two people",
    "start": "2458640",
    "end": "2464031"
  },
  {
    "text": "it works fine,\nbut when you suddenly have 100 people, all hitting that same step\nof creating things",
    "start": "2464328",
    "end": "2469311"
  },
  {
    "text": "within a minute of each other you're flooding the back-end,\nyou know the APIs, with all these calls.",
    "start": "2469379",
    "end": "2475468"
  },
  {
    "text": "And you start to get timeouts\nand things like this and, you know, pretty much fail because we didn't take into consideration\nhaving 50 to 100 people",
    "start": "2476054",
    "end": "2484703"
  },
  {
    "text": "hitting, you know,\nhammering the services at the same time to create things within our account. Yeah, because if it doesn't work once,\nwhy not click it 800 more times?",
    "start": "2485020",
    "end": "2492668"
  },
  {
    "text": "- Exactly.\n- That's another problem. It just... It doesn't do retries.\nPeople don't do exponential backoffs.",
    "start": "2493817",
    "end": "2499581"
  },
  {
    "text": "They do the opposite.\nI don't know what that's called. But it's exponential rampup. Hit that button a thousand times:\nit didn't work!",
    "start": "2499668",
    "end": "2505317"
  },
  {
    "text": "Yeah, and my code is pretty much create thing one, create the next thing,",
    "start": "2506149",
    "end": "2510712"
  },
  {
    "text": "third thing: fail. And now you've got these three things\nthat have been created, but these other ten things\nthat have not been created.",
    "start": "2511634",
    "end": "2517462"
  },
  {
    "text": "So, and this is where one of our colleagues\nbasically helped out on this. I basically rewrote the code\nto be an iterator based one,",
    "start": "2518084",
    "end": "2525404"
  },
  {
    "text": "where it just goes through each thing like in a nested while loop.",
    "start": "2525472",
    "end": "2530120"
  },
  {
    "text": "And if anything fails at any point it just sort of backs itself out\nand deletes everything so that, you know, it's a clean state.",
    "start": "2530503",
    "end": "2535816"
  },
  {
    "text": "So a combination of backoff timers, you know, retry logic and even sort of spacing things out",
    "start": "2536211",
    "end": "2541664"
  },
  {
    "text": "you know, saved our bacon. Stress test it,\nso we would create a unit test to validate that a hundred users\ncould recreate this within a minute",
    "start": "2542317",
    "end": "2548848"
  },
  {
    "text": "and then it worked from then on perfectly. - Great, okay.\n- Nice.",
    "start": "2549524",
    "end": "2554557"
  },
  {
    "text": "You guys also mentioned to us previously that you had some physical issues",
    "start": "2554904",
    "end": "2560193"
  },
  {
    "text": "when you were doing the workshop and one of them that was\n2.4 gigahertz support wasn't there.",
    "start": "2560260",
    "end": "2565885"
  },
  {
    "text": "I was wondering if you guys\ncould just talk about that for a second? That seems like a tricky one to deal with. - Yeah, so the ESP32 is an awesome chip.\n- And even figure out!",
    "start": "2566054",
    "end": "2572593"
  },
  {
    "start": "2573000",
    "end": "2687000"
  },
  {
    "text": "Oh yeah, so the ESP32 is awesome. It's got 2.4 gigahertz Wi-Fi. It doesn't have 5 gigahertz.",
    "start": "2573835",
    "end": "2579503"
  },
  {
    "text": "We started to realize going to conferences that they weren't offering 5 gigahertz, , the conference providers, to us,\nlike at re:Invent.",
    "start": "2580597",
    "end": "2587563"
  },
  {
    "text": "And that you had to have\nlike a special order to have a 2.4 gigahertz set up. And even a couple times,\nwe walked into our room",
    "start": "2588266",
    "end": "2594898"
  },
  {
    "text": "twenty minutes before it's going to start -  No 2.4 gigahertz. Had to, you know, make urgent calls.",
    "start": "2594965",
    "end": "2600083"
  },
  {
    "text": "And they were able to get it set up for us. And so we realized that that's a conference where you've got people",
    "start": "2600150",
    "end": "2606306"
  },
  {
    "text": "that are very knowledgeable\non helping set up connectivity. But we also run these workshops\nin, like, our lofts, at AWS lofts,",
    "start": "2606373",
    "end": "2613387"
  },
  {
    "text": "and also even at hotels\nand other locations that you...\nyou may have no control over this. And so Anton came up\nwith the brilliant idea",
    "start": "2613454",
    "end": "2620141"
  },
  {
    "text": "of instead of trying to worry about what the hotel\nor venue's going to provide",
    "start": "2620209",
    "end": "2625415"
  },
  {
    "text": "let's just go ahead and get an eero kit which is, you know, a mesh network, add additional points into a room",
    "start": "2625998",
    "end": "2632271"
  },
  {
    "text": "to basically have\ngood coverage of 2.4 gigahertz, and then use a hard-wired\nEthernet connection for the actual internet.",
    "start": "2632338",
    "end": "2638752"
  },
  {
    "text": "And Anton was able to do this. And I didn't believe him when he said...\nI said, 'this is not going to work.' He goes, 'We'll try it.'\nHe did it for 250 people.",
    "start": "2639354",
    "end": "2646256"
  },
  {
    "text": "It was rock solid, providing 2.4 gigahertz\nfrom a single hard-wired Ethernet drop.",
    "start": "2646499",
    "end": "2651757"
  },
  {
    "text": "That is amazing. Yeah, in that particular setup we used just four eero access points",
    "start": "2652741",
    "end": "2662249"
  },
  {
    "text": "- which was mind-blowing.\n- For 250? - Yeah, yeah.\n- That's amazing.",
    "start": "2662699",
    "end": "2667691"
  },
  {
    "text": "And mind-blowing\nbecause it's multiplied by two because typically people\nare using a computer and the ESP;",
    "start": "2669300",
    "end": "2678026"
  },
  {
    "text": "which we've been trying to tell them at least put your computer\non the 5 gigahertz.",
    "start": "2678094",
    "end": "2683032"
  },
  {
    "text": "But some did, some didn't. - Sometimes.\n- Yeah. Wow, okay, well thank you so much\nfor joining us today.",
    "start": "2683641",
    "end": "2691282"
  },
  {
    "start": "2687000",
    "end": "2810000"
  },
  {
    "text": "Your project is really cool.\nSo interesting to hear about how you guys built it,\nand actually see it work!",
    "start": "2692000",
    "end": "2697649"
  },
  {
    "text": "I've only heard about it. Now we can see how hardware\nis really as hard as people say it is.",
    "start": "2698184",
    "end": "2704638"
  },
  {
    "text": "So we really appreciate\nyou guys taking the time. Yeah, thank you so much.",
    "start": "2704802",
    "end": "2709208"
  },
  {
    "text": "- Our pleasure.\n- So, speaking of things being challenging. Let's move on to our 'Challenge of Things.'",
    "start": "2710567",
    "end": "2716614"
  },
  {
    "text": "- Talk about that.\n- Challenge of the Things. Alright.",
    "start": "2717192",
    "end": "2721552"
  },
  {
    "text": "So we know hundreds of people\nhave already done this and that it's a community project.\nLots of people have contributed. But we always want to know,",
    "start": "2726216",
    "end": "2733048"
  },
  {
    "text": "Is there anything that,\nwhen you watch this, you thought like oh, I wish the drink dispenser did this or I wish it worked this way.",
    "start": "2733392",
    "end": "2738584"
  },
  {
    "text": "You know, maybe hook it up\nto your Twitch stream. We talked about\nthe social aspect of getting credits. Maybe people could\npost messages in your stream",
    "start": "2738651",
    "end": "2745057"
  },
  {
    "text": "and you could get coins from that,\nmaybe automatically distribute drinks. When you're doing a general Twitch show.",
    "start": "2745124",
    "end": "2750390"
  },
  {
    "text": "So if you've got any cool ideas. I think that that would be really cool.\nMaybe do that.",
    "start": "2750827",
    "end": "2756085"
  },
  {
    "text": "So yeah! Tweet us your solution\nat #alltheexperiments.",
    "start": "2756484",
    "end": "2760702"
  },
  {
    "text": "Yeah, there you go. Cool, and I think\nthat rounds out another episode.",
    "start": "2762187",
    "end": "2767952"
  },
  {
    "text": "So check the chat stream for the resources\nthat we talked about during the show.",
    "start": "2768179",
    "end": "2772171"
  },
  {
    "text": "And be sure to join us\non our next episode in two weeks. September 20.\nWatch for announcements.",
    "start": "2773476",
    "end": "2779617"
  },
  {
    "text": "We're going to be looking at project experiments\nfrom the edge to the cloud, so send us all your cool ideas.",
    "start": "2781281",
    "end": "2786912"
  },
  {
    "text": "We really can't wait to hear from you. We want to hear all your crazy ideas. Thanks again, everybody.",
    "start": "2786980",
    "end": "2793176"
  },
  {
    "text": "- Thank you!\n- Yeah, and we'll see you next time on 'IoT All the Things.' 'Special Projects Edition.'",
    "start": "2793887",
    "end": "2800032"
  }
]