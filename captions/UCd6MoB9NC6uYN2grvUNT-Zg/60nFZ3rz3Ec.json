[
  {
    "text": "all right we're on hello everyone how's it going can you guys see me okay yeah",
    "start": "79",
    "end": "6990"
  },
  {
    "text": "awesome how's everyone's reinforce going pretty good yeah sweet we're here to",
    "start": "6990",
    "end": "13110"
  },
  {
    "text": "talk about network visibility we've got a bunch of content we want to jump through today really cool things to",
    "start": "13110",
    "end": "18690"
  },
  {
    "text": "cover I'm Matt Lewis I'm one of the principal solution architects for AWS we've also got a new Diwani hear from our ec2",
    "start": "18690",
    "end": "25080"
  },
  {
    "text": "networking team and Dave Burke from our amazon.com team one of our senior or",
    "start": "25080",
    "end": "30269"
  },
  {
    "text": "principal security engineers now before we get into the visibility piece I just",
    "start": "30269",
    "end": "36420"
  },
  {
    "text": "want to set the scene so networking is really the foundation of any deployment that you build in AWS so I want to build",
    "start": "36420",
    "end": "43200"
  },
  {
    "text": "some networking things first we'll cover it pretty quickly but it is pretty straightforward stuff I hope so if we've",
    "start": "43200",
    "end": "49379"
  },
  {
    "text": "got an amazon region we've got some Elastic Compute we've got some RDS or relational database service we've got",
    "start": "49379",
    "end": "56250"
  },
  {
    "text": "our elastic MapReduce or EMR maybe an instance that could be running anything this is all within your AWS account now",
    "start": "56250",
    "end": "63390"
  },
  {
    "text": "if we kind of take a closer look at that we're really using ec2 we're using Amazon VPC and then inside that VPC we",
    "start": "63390",
    "end": "71159"
  },
  {
    "text": "have things like availability zones we've got subnets either public subnets which are accessible via the internet",
    "start": "71159",
    "end": "77610"
  },
  {
    "text": "private subnets we've got ec2 instances within those subnets so when you deploy in multiple availability zones you're",
    "start": "77610",
    "end": "83970"
  },
  {
    "text": "going to deploy ec2 instances in subnets that are tied to availability zones then we have the public internet then we have",
    "start": "83970",
    "end": "90630"
  },
  {
    "text": "all of our public services like s3 dynamodb lambda IOT etc and you'll see a",
    "start": "90630",
    "end": "96119"
  },
  {
    "text": "clear difference here where you've got the Amazon V PC but then you've got public services that actually sit",
    "start": "96119",
    "end": "101310"
  },
  {
    "text": "outside of the V PC as well so if we take a down another level even further",
    "start": "101310",
    "end": "107820"
  },
  {
    "text": "what controls traffic within the V PC is really routing so we have a route table",
    "start": "107820",
    "end": "112829"
  },
  {
    "text": "per subnet in this case and we've got this local route which means that any instance within the V PC can communicate",
    "start": "112829",
    "end": "119070"
  },
  {
    "text": "with each other we've got all of these services outside of the V PC and we'd have either a default route via an",
    "start": "119070",
    "end": "125460"
  },
  {
    "text": "internet gateway which is that purple icon in the middle there and we can send traffic to public services the",
    "start": "125460",
    "end": "132000"
  },
  {
    "text": "to net our private subnets might have a default router in that instance or",
    "start": "132000",
    "end": "137460"
  },
  {
    "text": "hopefully in that gateway which is much more scalable and now you've got instances that sit in private subnets",
    "start": "137460",
    "end": "143190"
  },
  {
    "text": "and public subnets they can talk to each other they can communicate with public services and they can communicate with the internet we also have things like V",
    "start": "143190",
    "end": "151020"
  },
  {
    "text": "PC endpoints for private connectivity to s3 DynamoDB we have what's called a vgw",
    "start": "151020",
    "end": "156660"
  },
  {
    "text": "or virtual private gateway which connects to a Direct Connect I noticed a couple of folks are taking photos I",
    "start": "156660",
    "end": "161970"
  },
  {
    "text": "actually have a pause at the end of this which is totally built out and you can take a full photo so I know it gets",
    "start": "161970",
    "end": "167010"
  },
  {
    "text": "frustrating trying to take a photo as we kind of go along here so we also have V",
    "start": "167010",
    "end": "172140"
  },
  {
    "text": "PC peering which connects to other V PCs and you'll notice we're filling out the routes on the left hand side there left",
    "start": "172140",
    "end": "179250"
  },
  {
    "text": "hand side we have a transit gateway which is what we launched at reinvent last year so that's going to be a highly",
    "start": "179250",
    "end": "184500"
  },
  {
    "text": "scalable mechanism to connect to many V pcs up to 5,000 V pcs in fact and we",
    "start": "184500",
    "end": "190440"
  },
  {
    "text": "also have AWS private link so you might have a SAS provider behind an NLB insider a SAS V PC we have V PC flow",
    "start": "190440",
    "end": "197310"
  },
  {
    "text": "logs giving you some form of visibility we're going to dive into flow logs and then global accelerator which sits",
    "start": "197310",
    "end": "202380"
  },
  {
    "text": "outside at our at our edge locations so as it sends today this is what a V PC",
    "start": "202380",
    "end": "207840"
  },
  {
    "text": "architecture really looks like these are all of the Bolton options if you will that sit and plug into a V PC and allow",
    "start": "207840",
    "end": "213780"
  },
  {
    "text": "you to have full network community communication between public services private services multiple V pcs your",
    "start": "213780",
    "end": "219570"
  },
  {
    "text": "on-premises etc so that said how do we",
    "start": "219570",
    "end": "226620"
  },
  {
    "text": "get visibility into your AWS network traffic so first we're going to start with v pc flow logs so a V PC flow log",
    "start": "226620",
    "end": "234989"
  },
  {
    "text": "is really if we have a look here we've got three different sources and I'll dive into actually what a flow log looks",
    "start": "234989",
    "end": "240989"
  },
  {
    "text": "like in a second but we've got a V PC a subnet and an elastic network interface on an ec2 instance inside the V PC so",
    "start": "240989",
    "end": "247440"
  },
  {
    "text": "each one of these is a flow log source that we can enable our destinations on",
    "start": "247440",
    "end": "252570"
  },
  {
    "text": "the right hand side here woops can be Amazon CloudWatch or Amazon s3 so we can send our flow logs to either of these",
    "start": "252570",
    "end": "259350"
  },
  {
    "text": "destinations now if we have a look at what a flow log looks like we'll kind of build this out",
    "start": "259350",
    "end": "265940"
  },
  {
    "text": "reasonably quickly and then I'll pause so you can take a photo if you like and so the flow log itself starts with a",
    "start": "265940",
    "end": "272390"
  },
  {
    "text": "version so the faux log version it has the account ID so the account ID that it source from the interface ID so the Eni",
    "start": "272390",
    "end": "279950"
  },
  {
    "text": "of the instance for example the source IP address and the destination IP address source port destination port",
    "start": "279950",
    "end": "287410"
  },
  {
    "text": "protocol well the eye on a protocol number the packets bytes the start and",
    "start": "287410",
    "end": "293930"
  },
  {
    "text": "end of the capture window for this flow and the action so if the flow log was",
    "start": "293930",
    "end": "299270"
  },
  {
    "text": "accepted and I'll dive into that in just a second and then the the log status and this is basically what a flow log looks",
    "start": "299270",
    "end": "305450"
  },
  {
    "text": "like in its completeness so flow logs",
    "start": "305450",
    "end": "310460"
  },
  {
    "text": "are really a building block for much deeper visibility into your V PC so we can capture what it looks like or what",
    "start": "310460",
    "end": "317090"
  },
  {
    "text": "IP traffic is going between your instances or between an instance and the outside world and look at the actual",
    "start": "317090",
    "end": "322550"
  },
  {
    "text": "flow record or the flow log of that traffic we can also use that to troubleshoot security groups or or",
    "start": "322550",
    "end": "328220"
  },
  {
    "text": "Network ACLs if we like as well so let's dive into a really simple example here",
    "start": "328220",
    "end": "333670"
  },
  {
    "text": "showing communication within a V PC so we've got two subnets we've got two ec2 instances two en eyes we've got a couple",
    "start": "333670",
    "end": "341450"
  },
  {
    "text": "of private addresses they're inside the V PC and we've got two security groups a b c and d EF now if we have a look at",
    "start": "341450",
    "end": "347780"
  },
  {
    "text": "the security groups we're actually referencing each other so each security group references the other and allows traffic between the two instances so",
    "start": "347780",
    "end": "354710"
  },
  {
    "text": "what we're doing here instance a and instance b can communicate with each other so we have full two-way",
    "start": "354710",
    "end": "359990"
  },
  {
    "text": "communications oops",
    "start": "359990",
    "end": "365349"
  },
  {
    "text": "so with BBC flow logs we can actually look at the log for that traffic now in",
    "start": "366110",
    "end": "373679"
  },
  {
    "text": "this case we've got connectivity between the two instances great so the flow log for this particular entry we've got the",
    "start": "373679",
    "end": "380339"
  },
  {
    "text": "en I the source address which is the 10-1 115 the destination address the 10-1 117 source port destination port",
    "start": "380339",
    "end": "386909"
  },
  {
    "text": "and in this case the action was accepted because it was allowed by the security group so if we keep going here",
    "start": "386909",
    "end": "394489"
  },
  {
    "text": "and we look at a security group where we're actually not allowing full two-way communications sorry just a couple of",
    "start": "398520",
    "end": "404759"
  },
  {
    "text": "build outs here in this case the first security group ABC is only allowing traffic from ten 51.0 / 24 and that's",
    "start": "404759",
    "end": "412560"
  },
  {
    "text": "actually outside of the range of the V in sense we want to communicate with so in this case instance a you can talk to",
    "start": "412560",
    "end": "417780"
  },
  {
    "text": "instance B but B can't talk to a so if we have a look at the flow log entry for",
    "start": "417780",
    "end": "426138"
  },
  {
    "text": "for this we basically see that the first entry from A to B it's accepted but the",
    "start": "426800",
    "end": "433620"
  },
  {
    "text": "second entry is actually rejected so we can get some visibility into hey traffic",
    "start": "433620",
    "end": "439289"
  },
  {
    "text": "isn't actually reaching my instance here through flow logs themselves so flow",
    "start": "439289",
    "end": "445410"
  },
  {
    "text": "logs can be sent to Amazon CloudWatch Amazon s3 and also Amazon Athene oh I've",
    "start": "445410",
    "end": "452520"
  },
  {
    "text": "got a couple of links here at Paul's if you guys are interested there's a couple of use cases around integrating with Athena for example",
    "start": "452520",
    "end": "460159"
  },
  {
    "text": "and then also we have customers that have taken Flo logs and enriched those to get more visibility into what the",
    "start": "462599",
    "end": "469740"
  },
  {
    "text": "traffic that's going through their VPC so in this case we've got a reinvent session where Netflix actually took Flo logs and enriched that to get more",
    "start": "469740",
    "end": "476309"
  },
  {
    "text": "visibility so feel free to check that one out as well",
    "start": "476309",
    "end": "480889"
  },
  {
    "text": "and we have a public case study for Netflix lots of links for you guys there on flow logs alrighty",
    "start": "484420",
    "end": "493320"
  },
  {
    "text": "so that's flow logs and I would almost say that's an introduction to VP see visibility yesterday we actually",
    "start": "493320",
    "end": "500620"
  },
  {
    "text": "launched something new VP see traffic mirroring which is really what the focus of the rest of the session is going to",
    "start": "500620",
    "end": "506980"
  },
  {
    "text": "be so we've got a new peer he's going to give us a really great intro on to what BBC traffic mirroring looks like thanks",
    "start": "506980",
    "end": "513430"
  },
  {
    "text": "man hi everyone so yesterday we launched a feature called trafficking ring it's a",
    "start": "513430",
    "end": "519250"
  },
  {
    "text": "feature that you can use to monitor your VP's infrastructure traffic with any",
    "start": "519250",
    "end": "525870"
  },
  {
    "text": "monitoring or security appliance of your choice for use cases like content inspection threat detection it lets you",
    "start": "525870",
    "end": "532990"
  },
  {
    "text": "do things like deep packet inspection look at your let you look at the full traffic including the payload so you",
    "start": "532990",
    "end": "540400"
  },
  {
    "text": "know really the traffic mirror VPC traffic mirroring is it's a fiber tap in",
    "start": "540400",
    "end": "545680"
  },
  {
    "text": "the cloud it works very similar to how you know a light travels between the two medium and when it travels you have you",
    "start": "545680",
    "end": "553270"
  },
  {
    "text": "know incident ray coming in a part of that that light actually gets refracted and part of that get reflected in the",
    "start": "553270",
    "end": "559720"
  },
  {
    "text": "same way what happens with PPC traffic mirroring is as the network packets are",
    "start": "559720",
    "end": "566770"
  },
  {
    "text": "flowing or your network interfaces a part of the packet that you want to",
    "start": "566770",
    "end": "572050"
  },
  {
    "text": "monitor can be sent to a minute monitoring appliances so let's let's at",
    "start": "572050",
    "end": "577570"
  },
  {
    "text": "a very high level at at its core let's take a look at what you know what how does this feature work so let's say you",
    "start": "577570",
    "end": "583960"
  },
  {
    "text": "have in your V PC and ec2 instance and there's some traffic flowing in and out",
    "start": "583960",
    "end": "589600"
  },
  {
    "text": "you have green packets coming in blue packets going on that's basically your inbound and outbound traffic",
    "start": "589600",
    "end": "595930"
  },
  {
    "text": "and you decided to monitor these traffic this happens to be one of the critical workload in your be PC and you want to",
    "start": "595930",
    "end": "601960"
  },
  {
    "text": "know you know what kind of traffic is coming in and out for that all you have to do is until you know starting",
    "start": "601960",
    "end": "609160"
  },
  {
    "text": "yesterday you could actually go in here the PC console or use you know CLI or API and create a mirror session by",
    "start": "609160",
    "end": "616510"
  },
  {
    "text": "default there are no mirror sessions so you have to create a mirror session and but before you create a mirror session",
    "start": "616510",
    "end": "622630"
  },
  {
    "text": "you need to create a mirroring instance and an appliance where you will analyze the traffic you so now you have an ec2",
    "start": "622630",
    "end": "631690"
  },
  {
    "text": "instance in your V PC or somewhere else we'll get into you know where these monitor compliance can be deployed you",
    "start": "631690",
    "end": "638230"
  },
  {
    "text": "have a mirroring instance and it has its eni and you go and now create mirror",
    "start": "638230",
    "end": "644140"
  },
  {
    "text": "session you click create mirror session there are a bunch of things we'll get into the details of how to create a",
    "start": "644140",
    "end": "650170"
  },
  {
    "text": "session once you do that the eni on the mirror source with the ec2 instance that",
    "start": "650170",
    "end": "656650"
  },
  {
    "text": "you want to monitor has been enabled with traffic mirroring and once you once it's enabled with traffic mirroring all",
    "start": "656650",
    "end": "663490"
  },
  {
    "text": "packets that were going in and out can be mirrored to an instance of monitoring instance which which is an out of boil",
    "start": "663490",
    "end": "670480"
  },
  {
    "text": "out of band monitoring for a security appliance that can actually look at your traffic I could do things like forensic",
    "start": "670480",
    "end": "677350"
  },
  {
    "text": "you know content inspection threat detection and things like that a bit about what type of monitoring appliances",
    "start": "677350",
    "end": "684460"
  },
  {
    "text": "you can use you can use anything you can build your own analyzer traffic analyzer you could use open source analyzer or",
    "start": "684460",
    "end": "691300"
  },
  {
    "text": "you could use you know solution from one of several partners that we have and and",
    "start": "691300",
    "end": "697150"
  },
  {
    "text": "there you know the the listings or the ami and appliance is available on AWS",
    "start": "697150",
    "end": "702190"
  },
  {
    "text": "marketplace so why did we build V PC",
    "start": "702190",
    "end": "707560"
  },
  {
    "text": "traffic Murray you know our customers have been asking for this feature for a long time they have deployed their",
    "start": "707560",
    "end": "715420"
  },
  {
    "text": "critical workloads in V PC they have their production network working in in AWS environment and",
    "start": "715420",
    "end": "722089"
  },
  {
    "text": "you know they want to monitor they've been asking us for an easy and a scalable solution that can monitor that",
    "start": "722089",
    "end": "728240"
  },
  {
    "text": "they can use to monitor their traffic they need to keep an eye out on you know that unusual traffic pattern or they",
    "start": "728240",
    "end": "734779"
  },
  {
    "text": "want to inspect the content that would signify that there is maybe an intrusion",
    "start": "734779",
    "end": "740089"
  },
  {
    "text": "in their network or maybe a workload has been compromised so all of these use cases are not possible with this feature",
    "start": "740089",
    "end": "746480"
  },
  {
    "text": "there is another key use case that our customers have been you know asking this",
    "start": "746480",
    "end": "751579"
  },
  {
    "text": "feature for which is for troubleshooting and diagnostic purpose a lot of times before you want to deploy an application",
    "start": "751579",
    "end": "758170"
  },
  {
    "text": "in production you might have various micro services via various applications",
    "start": "758170",
    "end": "763730"
  },
  {
    "text": "running and you want to see how do you know how they are talking to each other what are the blind spot what are the choke points between the applications so",
    "start": "763730",
    "end": "771170"
  },
  {
    "text": "so troubleshooting and diagnostic is another essential use case that this feature will be will come handy for but",
    "start": "771170",
    "end": "779589"
  },
  {
    "text": "you know customers have been doing these monitoring in cloud for some time so what are what is the benefit of traffic",
    "start": "779589",
    "end": "786139"
  },
  {
    "text": "nearing well there are several benefits the one until yesterday if you were to",
    "start": "786139",
    "end": "792410"
  },
  {
    "text": "monitor traffic from your ec2 instance you had to install an agent in the user",
    "start": "792410",
    "end": "797809"
  },
  {
    "text": "space in ec2 instance that agent would actually look at the or monitor or look",
    "start": "797809",
    "end": "803240"
  },
  {
    "text": "at the traffic which is going in and out of an network interface of that ec2 instance copy that in send it out that",
    "start": "803240",
    "end": "811309"
  },
  {
    "text": "actually that agent approach is it turns out is pretty complex and it's not",
    "start": "811309",
    "end": "817759"
  },
  {
    "text": "scalable our customers want a native feature you know as their number of ec2 instance are monitoring endpoint grows",
    "start": "817759",
    "end": "824319"
  },
  {
    "text": "it's it's bit complex to manage that agents install them on ec2 instance and things like that so this is the native",
    "start": "824319",
    "end": "832040"
  },
  {
    "text": "feature you don't need any agent it will actually get copied in your packet packets will get copied from the",
    "start": "832040",
    "end": "837410"
  },
  {
    "text": "networking interface there is no CPU penalty that occurs when you enable traffic memory the second thing and the",
    "start": "837410",
    "end": "844040"
  },
  {
    "text": "most critical thing is the security posture a lot of all security conscious customers they don't want to",
    "start": "844040",
    "end": "851420"
  },
  {
    "text": "look at or want to take traffic from the user space itself you know if agent is",
    "start": "851420",
    "end": "858830"
  },
  {
    "text": "running in user space and if the workload is already compromised you can tamper with the Mira traffic as well this particular feature actually copies",
    "start": "858830",
    "end": "866960"
  },
  {
    "text": "traffic right after out of the elastic network interface of an ec2 instance",
    "start": "866960",
    "end": "872270"
  },
  {
    "text": "which means that once you enable it once an administrator enable this feature you",
    "start": "872270",
    "end": "879140"
  },
  {
    "text": "cannot tamper with the mirror packet or even disable traffic mirroring from the user space this comes in handy when you",
    "start": "879140",
    "end": "885050"
  },
  {
    "text": "would really want to monitor a source and you can be rest assured that you're really looking in the packets which are",
    "start": "885050",
    "end": "891350"
  },
  {
    "text": "coming in and out of your ec2 instance and then the third thing is the wide range of options now you have our",
    "start": "891350",
    "end": "896570"
  },
  {
    "text": "customers want to monitor traffic using different appliances they might they",
    "start": "896570",
    "end": "902150"
  },
  {
    "text": "want to monitor maybe once type of traffic with one of the plants and other trifle traffic with other appliance it",
    "start": "902150",
    "end": "907700"
  },
  {
    "text": "is possible with agents you kind of get locked into one particular vendor with traffic bidding you can actually use",
    "start": "907700",
    "end": "914480"
  },
  {
    "text": "multiple tools so let's take a quick look at what traffic mirroring is you",
    "start": "914480",
    "end": "920090"
  },
  {
    "text": "know about how do you configure it what are the key components of it there are three components of traffic mirroring one is the target another is the filter",
    "start": "920090",
    "end": "928280"
  },
  {
    "text": "and then third is the session those of you have worked in the unprimed world these are you know typically you create",
    "start": "928280",
    "end": "935150"
  },
  {
    "text": "a mirror session you have a port you know similar to how you configure things on fibre tap-tap aggregation or a router",
    "start": "935150",
    "end": "941810"
  },
  {
    "text": "or a switch so let's talk about look into each of these component and detail target right target is your destination",
    "start": "941810",
    "end": "949490"
  },
  {
    "text": "for mirror traffic as of now there are two targets that are possible with traffic mirroring one is the elastic",
    "start": "949490",
    "end": "956720"
  },
  {
    "text": "elastic network interface of an ec2 instance all a network load balancer so",
    "start": "956720",
    "end": "962060"
  },
  {
    "text": "now here it's a key thing when you send your mirror traffic to a destination you",
    "start": "962060",
    "end": "967850"
  },
  {
    "text": "have to make sure that you're not over subscribing that destination you you're not sending 100 gig of a traffic of",
    "start": "967850",
    "end": "974300"
  },
  {
    "text": "mirror traffic to our instance that can only do one gig or a 10 gig right so it's important that you make sure that",
    "start": "974300",
    "end": "980420"
  },
  {
    "text": "your the the target has enough capacity if you if you don't know how much of",
    "start": "980420",
    "end": "986430"
  },
  {
    "text": "traffic you will be murdering we highly recommend using network load balancing two days ago we launched a feature on",
    "start": "986430",
    "end": "992940"
  },
  {
    "text": "NLB which is which now some with that feature now you can have a UDP listener",
    "start": "992940",
    "end": "998670"
  },
  {
    "text": "on NLB so mirror traffic is a UDP traffic we'll talk about that in a detail in more detail in a bit but you",
    "start": "998670",
    "end": "1005900"
  },
  {
    "text": "can actually run your analyzer in auto scaling group behind and NLB and and then you can scale up and down your",
    "start": "1005900",
    "end": "1012080"
  },
  {
    "text": "analyzer based on how much of the traffic you wanna mirror you can have multiple source sending traffic to a one",
    "start": "1012080",
    "end": "1020330"
  },
  {
    "text": "target so you know you it's not you're not limited to one is to one the type of",
    "start": "1020330",
    "end": "1026870"
  },
  {
    "text": "target you use there are limits associated with it if you are using a network load balancer there is no limit",
    "start": "1026870",
    "end": "1033199"
  },
  {
    "text": "if you are using dedicated hosting host you can have a few hundred source point into one mirror a mirror target and if",
    "start": "1033199",
    "end": "1041540"
  },
  {
    "text": "you're using some lower instance size you can have up to ten source for per target very important thing when we send",
    "start": "1041540",
    "end": "1048530"
  },
  {
    "text": "the mirror traffic to target you need to make sure that your target has a security group that allows you know UDP",
    "start": "1048530",
    "end": "1056300"
  },
  {
    "text": "traffic on for its import four eight seven nine this is a VX LAN port we encapsulate the traffic with VX LAN so",
    "start": "1056300",
    "end": "1063950"
  },
  {
    "text": "it is important that you enable your security group to allow this traffic you can just have to have one one rule where",
    "start": "1063950",
    "end": "1071030"
  },
  {
    "text": "you allow UDP traffic on this port on your ingress security group so that was target let's talk about filters now",
    "start": "1071030",
    "end": "1077990"
  },
  {
    "text": "filters come in really handy let's say let's take a scenario in this picture or",
    "start": "1077990",
    "end": "1084110"
  },
  {
    "text": "diagram you have an ec2 instance that you want to monitor it already has traffic mirroring enabled on it and",
    "start": "1084110",
    "end": "1089660"
  },
  {
    "text": "let's say you decide that you want to monitor all inbound traffic but you don't want to monitor outbound traffic",
    "start": "1089660",
    "end": "1095090"
  },
  {
    "text": "in that case you can just simply create a filter on your traffic mirroring session you say I just want an inbound",
    "start": "1095090",
    "end": "1101900"
  },
  {
    "text": "traffic to go and be mirrored and will you will be able to do that before we",
    "start": "1101900",
    "end": "1107360"
  },
  {
    "text": "talk about you know filtering options let's take a quick look at the packet format as I mentioned that mirrored",
    "start": "1107360",
    "end": "1113420"
  },
  {
    "text": "packet is encapsulated with the X line we are we the packet right out of the network",
    "start": "1113420",
    "end": "1119029"
  },
  {
    "text": "interface which means that you actually get to see the layer two headers on the network interface of that ec2 instance",
    "start": "1119029",
    "end": "1124730"
  },
  {
    "text": "as well what we do is that we may encapsulate that layer to pack it into an IP packet it's a it's a UDP packet",
    "start": "1124730",
    "end": "1131389"
  },
  {
    "text": "with VX LAN so the outer IP I had had it has an IP address source IP address of",
    "start": "1131389",
    "end": "1136580"
  },
  {
    "text": "the en I that you are mirroring the destination address is the target you",
    "start": "1136580",
    "end": "1142100"
  },
  {
    "text": "are sending the traffic to UDP hider has this destination port of four eight",
    "start": "1142100",
    "end": "1148129"
  },
  {
    "text": "seven nine and you have a V excellent header in in V excellent header when you",
    "start": "1148129",
    "end": "1154279"
  },
  {
    "text": "create that traffic modeling session you get an option to set your VX line ID as",
    "start": "1154279",
    "end": "1159409"
  },
  {
    "text": "well so you have up to 16 million options to set this VX line ID and it can come in handy when you are trying to",
    "start": "1159409",
    "end": "1165200"
  },
  {
    "text": "let's say deploy you know traffic mirroring you know central V PC model",
    "start": "1165200",
    "end": "1171049"
  },
  {
    "text": "where traffic from a lot of VP sees a lot of subnets a lot of ec2 instance are coming to one central V PC you can",
    "start": "1171049",
    "end": "1178070"
  },
  {
    "text": "actually set your vehicle an ID such that you can distinguish where this packet is coming",
    "start": "1178070",
    "end": "1184749"
  },
  {
    "text": "very important factor that you need to know is that when we encapsulate the packet with the excellent header there",
    "start": "1185840",
    "end": "1191780"
  },
  {
    "text": "is a 56 byte of overhead so if your packet is more than eight eight thousand",
    "start": "1191780",
    "end": "1197420"
  },
  {
    "text": "nine hundred forty six bytes will truncate that packet now let's talk about filtering so the filters in",
    "start": "1197420",
    "end": "1203930"
  },
  {
    "text": "traffic mirroring works similar to just like a network a CL plus there are two",
    "start": "1203930",
    "end": "1209450"
  },
  {
    "text": "more options so let's do this let's do one exercise let's see let's create a filter where you want to monitor all",
    "start": "1209450",
    "end": "1215930"
  },
  {
    "text": "your inbound traffic on a web server where traffic's coming on port 80 so I'll start my fill you know creating my",
    "start": "1215930",
    "end": "1223430"
  },
  {
    "text": "filter from the for the flow direction I'll pick I want to mirror all ingress traffic I pick protocol as TCP source",
    "start": "1223430",
    "end": "1232850"
  },
  {
    "text": "I want traffic coming from anywhere on source code any any source port the",
    "start": "1232850",
    "end": "1238580"
  },
  {
    "text": "destination IP can be my IP because I want to monitor specific traffic only destined to me and the destination port",
    "start": "1238580",
    "end": "1244580"
  },
  {
    "text": "will be port 80 now this is very typical of any network ACL rule or filter rule",
    "start": "1244580",
    "end": "1250520"
  },
  {
    "text": "that you specify there is one more thing you can specify while you are creating a traffic mirroring is packet length you",
    "start": "1250520",
    "end": "1256940"
  },
  {
    "text": "can choose to actually monitor only let's say first 200 bytes the first hundred bytes or first thousand bytes of",
    "start": "1256940",
    "end": "1263210"
  },
  {
    "text": "the packet and and that's totally up to you by default we mirror the entire packet and in this case I'll just say",
    "start": "1263210",
    "end": "1270620"
  },
  {
    "text": "packet length or omit the value where packet length field is and that's it now",
    "start": "1270620",
    "end": "1276740"
  },
  {
    "text": "you have a filter any traffic coming in on that port 80 will be mirrored now the",
    "start": "1276740",
    "end": "1282110"
  },
  {
    "text": "last piece where you tie these things together is the session session is the entity that kind of stablished that",
    "start": "1282110",
    "end": "1288770"
  },
  {
    "text": "relationship between source target with the filters so session has essentially",
    "start": "1288770",
    "end": "1294290"
  },
  {
    "text": "three components you you create a session by specifying the source which is your en I I that you want to monitor",
    "start": "1294290",
    "end": "1299690"
  },
  {
    "text": "target which is which could be n lb or ec2 instance Eni and the filter one last",
    "start": "1299690",
    "end": "1307280"
  },
  {
    "text": "thing I want to specify is that you can have up to three mirroring session on a source en I this comes in handy when you",
    "start": "1307280",
    "end": "1315020"
  },
  {
    "text": "have you know let's say you want to mirror HTTP traffic and send it to one tool and let's say",
    "start": "1315020",
    "end": "1321890"
  },
  {
    "text": "rest of the traffic you want to send it to another tool we mirror pack it only once but you can have sessions design",
    "start": "1321890",
    "end": "1329330"
  },
  {
    "text": "such a way that you can have you know lower lower numbered session session can has numbers and the lower number is the",
    "start": "1329330",
    "end": "1335750"
  },
  {
    "text": "higher priority so you could have session number one that can have HTTP filter rule and will essentially mirror",
    "start": "1335750",
    "end": "1341929"
  },
  {
    "text": "that HTTP traffic and a session number two can be a catch-all to mirror every packet coming on the source now there",
    "start": "1341929",
    "end": "1348530"
  },
  {
    "text": "are many ways you can deploy traffic mirroring and for that I'll invite Matt again",
    "start": "1348530",
    "end": "1354039"
  },
  {
    "text": "all right thanks a noop very cool stuff all right",
    "start": "1354039",
    "end": "1359120"
  },
  {
    "text": "so newts being heads down on on building traffic mirroring with the with the AWS",
    "start": "1359120",
    "end": "1364220"
  },
  {
    "text": "folks for about as long as I've known him so it's great to have him out here and talk about how it works",
    "start": "1364220",
    "end": "1369830"
  },
  {
    "text": "all right let's dive into some more advanced topics around traffic mirroring so first I want to clear the air with",
    "start": "1369830",
    "end": "1375380"
  },
  {
    "text": "vbc flow logs and traffic mirroring we'll just do a quick kind of vs. between the two so VPC flow logs are",
    "start": "1375380",
    "end": "1383240"
  },
  {
    "text": "really logs of network flows so you're going to get a log entry for the network",
    "start": "1383240",
    "end": "1388280"
  },
  {
    "text": "flow itself whereas VPC traffic mirroring is the real packet itself now it's the whole packet and you have the",
    "start": "1388280",
    "end": "1394820"
  },
  {
    "text": "ability to truncate if you like as well with VPC flow logs the destination is s3",
    "start": "1394820",
    "end": "1400490"
  },
  {
    "text": "or Amazon CloudWatch Logs with traffic mirroring it's another ni or a network",
    "start": "1400490",
    "end": "1407870"
  },
  {
    "text": "load balancer and we'll talk about scaling in just a moment with flow logs each record captures the five topple so",
    "start": "1407870",
    "end": "1414860"
  },
  {
    "text": "it's going to be the source destination source port destination port and protocol and for that specific flow",
    "start": "1414860",
    "end": "1421370"
  },
  {
    "text": "window with traffic mirroring it's the real network packet itself so if you",
    "start": "1421370",
    "end": "1427309"
  },
  {
    "text": "want to get visibility into the actual packets themselves traffic mirroring is definitely the way to go if you just want some visibility and have the",
    "start": "1427309",
    "end": "1434539"
  },
  {
    "text": "ability to look at the log of the flows that are accessing your instances or your V PC for example then maybe flow",
    "start": "1434539",
    "end": "1440390"
  },
  {
    "text": "logs is the way to go okay performance this is a pretty important topic when we",
    "start": "1440390",
    "end": "1447500"
  },
  {
    "text": "start talking about mirroring whole packets so how does traffic mirroring affect the performance of my ec2",
    "start": "1447500",
    "end": "1452690"
  },
  {
    "text": "instance well if we have an ec2 instance here and we've got traffic coming in and out we've got a traffic mirroring session as",
    "start": "1452690",
    "end": "1459350"
  },
  {
    "text": "well the instance traffic for the mirror traffic counts towards the performance",
    "start": "1459350",
    "end": "1464539"
  },
  {
    "text": "of that instance itself so in this case if we had one gigabits inbound and one",
    "start": "1464539",
    "end": "1469610"
  },
  {
    "text": "gigabits outbound so we've got symmetrical traffic going to an ec2 instance we're mirroring all",
    "start": "1469610",
    "end": "1474740"
  },
  {
    "text": "traffic so we're not doing any filters that would be a total of two gigabits per second of mirror traffic so some",
    "start": "1474740",
    "end": "1483140"
  },
  {
    "text": "quick second grade math if I don't mess it up here the total would be 4 gigabits",
    "start": "1483140",
    "end": "1488809"
  },
  {
    "text": "per second that that instance has to support because we've got one gig inbound one gig outbound and those two",
    "start": "1488809",
    "end": "1495049"
  },
  {
    "text": "inbound and outbound turn into two gig outbound so that instance actually needs to be able to support double the",
    "start": "1495049",
    "end": "1501200"
  },
  {
    "text": "performance that it would have normally versus if it didn't have traffic mirroring now obviously filters are become pretty",
    "start": "1501200",
    "end": "1507620"
  },
  {
    "text": "important in that case as well the monitoring instance needs to be able to support the amount of traffic that it's",
    "start": "1507620",
    "end": "1514669"
  },
  {
    "text": "going to be receiving as well and that's this one Finch - I should just put a",
    "start": "1514669",
    "end": "1521270"
  },
  {
    "text": "finish slide on every slide so you guys know when to take a photo also at the end of the session might the last slide",
    "start": "1521270",
    "end": "1527030"
  },
  {
    "text": "is actually my email address you can see me a note and I'm happy to share all of these slides with you folks okay so with performance instance right",
    "start": "1527030",
    "end": "1534440"
  },
  {
    "text": "sizing it does become extremely important it's important anyway but when you start adding traffic mirroring you",
    "start": "1534440",
    "end": "1540140"
  },
  {
    "text": "need to think about that a lot as well okay priority so when we have normal",
    "start": "1540140",
    "end": "1547130"
  },
  {
    "text": "production traffic and traffic mirroring traffic the production traffic will actually take a higher priority than",
    "start": "1547130",
    "end": "1553370"
  },
  {
    "text": "traffic mirroring traffic so if that instance is pushing as many packets as it possibly can we will actually start",
    "start": "1553370",
    "end": "1558919"
  },
  {
    "text": "dropping traffic mirroring traffic before we would start dropping your normal traffic to an ec2 instance so",
    "start": "1558919",
    "end": "1564500"
  },
  {
    "text": "that's definitely something to consider as well all right so while we're on the",
    "start": "1564500",
    "end": "1569809"
  },
  {
    "text": "topic let's talk more about scaling so we've got an ec2 instance here and we might have another ec2 instance sending",
    "start": "1569809",
    "end": "1576679"
  },
  {
    "text": "it some traffic or we might have bad ec2 instances serving traffic out to the internet or something similar we enable",
    "start": "1576679",
    "end": "1584480"
  },
  {
    "text": "traffic mirroring and we use the target for traffic mirroring we use the network load",
    "start": "1584480",
    "end": "1591110"
  },
  {
    "text": "balancer in this case we're actually sending traffic across multiple ec2 instances on the other side as targets",
    "start": "1591110",
    "end": "1596990"
  },
  {
    "text": "of the NLB or network load balancer we can also have these instances in an auto",
    "start": "1596990",
    "end": "1602210"
  },
  {
    "text": "scaling group so when we start sending more traffic which is pictured by the",
    "start": "1602210",
    "end": "1607280"
  },
  {
    "text": "red packets here in this case we can actually add more instances or scale up that fleet of monitoring instances",
    "start": "1607280",
    "end": "1614060"
  },
  {
    "text": "behind the network load balancer to be able to handle the total amount of traffic so get a little bit about flow",
    "start": "1614060",
    "end": "1621800"
  },
  {
    "text": "hashing so with the network load balancer we will hash flows across multiple instances we've been doing this",
    "start": "1621800",
    "end": "1627830"
  },
  {
    "text": "as long as Network load balancer has existed in AWS so we've been hashing flows now that we're using we have UDP",
    "start": "1627830",
    "end": "1635960"
  },
  {
    "text": "for network load balancer which by the way you can use outside of traffic mirroring it's available it's there there to be used but traffic mirroring",
    "start": "1635960",
    "end": "1644090"
  },
  {
    "text": "does use UDP so if we look at the hashing mechanism that the NRB users here I will actually use the protocol",
    "start": "1644090",
    "end": "1650510"
  },
  {
    "text": "which is UDP the source IP destination IP source port destination port now what",
    "start": "1650510",
    "end": "1655520"
  },
  {
    "text": "will happen is a UDP flow that has the same source and destination essentially looks like the same a single flow even",
    "start": "1655520",
    "end": "1663110"
  },
  {
    "text": "though UDP doesn't really have the concept of flows it's just traffic but they will be sent to the same target so",
    "start": "1663110",
    "end": "1669230"
  },
  {
    "text": "different UDP flows going to an ec2 instance will probably have different sources in that case probably the same",
    "start": "1669230",
    "end": "1674870"
  },
  {
    "text": "destination but they would be hashed to another ec2 instance behind your network load balancer so UDP flow hashing is",
    "start": "1674870",
    "end": "1681530"
  },
  {
    "text": "something to think about when you put instances behind a network load balancer behind traffic mirroring we can also",
    "start": "1681530",
    "end": "1689270"
  },
  {
    "text": "decentralize our traffic mirroring environment so in this case we're using VPC peering we've got on the right-hand",
    "start": "1689270",
    "end": "1696380"
  },
  {
    "text": "side here a centralized InfoSec VPC and that has our monitoring instances in it we've also got a VPC peering connection",
    "start": "1696380",
    "end": "1703100"
  },
  {
    "text": "between our application VPC for example and we're sending traffic over the VPC peering connection so traffic mirroring",
    "start": "1703100",
    "end": "1710030"
  },
  {
    "text": "can be sent to other destinations like V PC peering or in fact transit gateway if",
    "start": "1710030",
    "end": "1716270"
  },
  {
    "text": "we wanted to as long as you have routing reach ability within the VP see and you're sending the route via a",
    "start": "1716270",
    "end": "1722490"
  },
  {
    "text": "transit gateway or VPC peering so in this case you can build that centralized InfoSec VPC model and have all of your",
    "start": "1722490",
    "end": "1728610"
  },
  {
    "text": "other instances in other VPC sending traffic to the centralized VPC these can",
    "start": "1728610",
    "end": "1735000"
  },
  {
    "text": "also be in separate accounts so in this case transit gateway for example can attach to V pcs in multiple different",
    "start": "1735000",
    "end": "1741149"
  },
  {
    "text": "accounts so you could have your monitoring instance in one account and your application deployment in another",
    "start": "1741149",
    "end": "1746370"
  },
  {
    "text": "account as well dive in there and check out the console real quick now this",
    "start": "1746370",
    "end": "1752730"
  },
  {
    "text": "looks like a video but it's not it's just PowerPoint animation so it won't look exactly like your experience but if",
    "start": "1752730",
    "end": "1760740"
  },
  {
    "text": "we're here at the AWS management console we jump to V PC and on the left hand side here you'll now have these three",
    "start": "1760740",
    "end": "1767460"
  },
  {
    "text": "additional options here so mirroring sessions mirroring targets and mirroring filters now if we jump in and have a",
    "start": "1767460",
    "end": "1772860"
  },
  {
    "text": "look at mirroring sessions if you don't have any mirroring sessions configured",
    "start": "1772860",
    "end": "1778740"
  },
  {
    "text": "you'll be confronted with this screen that says no traffic mirroring sessions found in this case we're going to jump in there and just create a mirroring",
    "start": "1778740",
    "end": "1785129"
  },
  {
    "text": "session you'll then come across this screen where you can basically name your",
    "start": "1785129",
    "end": "1790409"
  },
  {
    "text": "traffic mirroring session we'll just call it a random name like traffic mirroring session you can add a",
    "start": "1790409",
    "end": "1795960"
  },
  {
    "text": "description if you like of course the next and probably one of the more",
    "start": "1795960",
    "end": "1801210"
  },
  {
    "text": "important pieces here is select the traffic mirroring source so I've got a bunch of ec2 instances in here I'm just",
    "start": "1801210",
    "end": "1807090"
  },
  {
    "text": "going to select this top instance and this en iso ni d0 e which was the last",
    "start": "1807090",
    "end": "1813509"
  },
  {
    "text": "three digits we then select our traffic mirroring target in this case I've got a target configured already and then we",
    "start": "1813509",
    "end": "1821850"
  },
  {
    "text": "scroll down because there's a whole bunch of additional configuration we can do we can set the the session number so",
    "start": "1821850",
    "end": "1828210"
  },
  {
    "text": "as Anoop said we can have up to three sessions in this case we're just going to leave that blank so it'll be just one",
    "start": "1828210",
    "end": "1834110"
  },
  {
    "text": "we can set the V and I or the VX LAN a network identifier if we like and",
    "start": "1834110",
    "end": "1839549"
  },
  {
    "text": "we'll just leave that blank truncating we can configure that for example up to 250 bytes and then we can select a",
    "start": "1839549",
    "end": "1847379"
  },
  {
    "text": "traffic mirroring filter in this case I actually have a traffic mirroring filter that's already been created and I've",
    "start": "1847379",
    "end": "1852419"
  },
  {
    "text": "just got a bit of a screen shot here folks so in this case we've got a rule here the rule is except we're saying TCP",
    "start": "1852419",
    "end": "1858540"
  },
  {
    "text": "destination port range 8080 with a sauce cedar of a default route or a zero zero to zero at zero slash zero which is",
    "start": "1858540",
    "end": "1864840"
  },
  {
    "text": "basically and any and then the destination is any as well we can add a description there too if we like but in",
    "start": "1864840",
    "end": "1872130"
  },
  {
    "text": "this case we're really looking for web traffic for this filter then we're basically the next screen will be this I",
    "start": "1872130",
    "end": "1877590"
  },
  {
    "text": "tried to zoom in on this as best I could it's really hard to read but basically you'll see that we've got a traffic",
    "start": "1877590",
    "end": "1883500"
  },
  {
    "text": "mirroring session it's got an ID and the en I or the source the target and the session number etc so pretty",
    "start": "1883500",
    "end": "1891179"
  },
  {
    "text": "straightforward configuration is actually one of the easiest parts here so what do you actually do with the",
    "start": "1891179",
    "end": "1896820"
  },
  {
    "text": "packets once you once you receive them once you've configured your traffic mirroring session well again we've got",
    "start": "1896820",
    "end": "1902549"
  },
  {
    "text": "this very familiar slide here where we've got basically a ec2 instance",
    "start": "1902549",
    "end": "1908250"
  },
  {
    "text": "sending traffic or mirroring traffic to a monitoring instance and in this case first up we have a whole bunch of",
    "start": "1908250",
    "end": "1913770"
  },
  {
    "text": "partners that we've been working with tirelessly to build integrations into traffic mirroring so folks like extra",
    "start": "1913770",
    "end": "1919590"
  },
  {
    "text": "hop Palo Alto Networks gigamon net scout these are leading-edge vendors that that",
    "start": "1919590",
    "end": "1925590"
  },
  {
    "text": "you folks know and love and have been using on premises for years and we've been working pretty hard to integrate",
    "start": "1925590",
    "end": "1930750"
  },
  {
    "text": "with those vendors and these folks have been building integrations into the traffic mirroring product and this is",
    "start": "1930750",
    "end": "1936360"
  },
  {
    "text": "actually something our vendors or our AP n partners customers have been asking for a long time and our partners have",
    "start": "1936360",
    "end": "1942390"
  },
  {
    "text": "been asking for a long time so we've worked with every one of these folks to deploy these at launch so folks like Big",
    "start": "1942390",
    "end": "1949919"
  },
  {
    "text": "Switch and Jessica's well Symantec etc now we're still working with a lot of our APN partners so as we go along",
    "start": "1949919",
    "end": "1956940"
  },
  {
    "text": "you'll notice that a lot of our folks are putting out public press releases and blog posts and building integrations",
    "start": "1956940",
    "end": "1962730"
  },
  {
    "text": "and I heard actually this morning we had our kantak and dark trace which are two additional partners that that additionally built integrations as well",
    "start": "1962730",
    "end": "1969179"
  },
  {
    "text": "so this list is absolutely going to grow and we've got a whole pipeline of partners that we're going to be working",
    "start": "1969179",
    "end": "1974970"
  },
  {
    "text": "with that will basically be treated as a traffic mirroring destination and then they'll be able to do something with",
    "start": "1974970",
    "end": "1980760"
  },
  {
    "text": "that traffic on but on your behalf next up you can build your own analyzer",
    "start": "1980760",
    "end": "1987190"
  },
  {
    "text": "if you wanted to I've got a bit of code here again feel free to take photos and",
    "start": "1987190",
    "end": "1992740"
  },
  {
    "text": "I can share the slides with anyone but in this case we've got a user that's doing an HTTP request and then we want",
    "start": "1992740",
    "end": "2000630"
  },
  {
    "text": "to capture the HTTP request what does that actually look like well if we were going to build the analyser out so if we",
    "start": "2000630",
    "end": "2006450"
  },
  {
    "text": "jump into our VI console for a second this is all simulated by the way so we're importing libraries in this case",
    "start": "2006450",
    "end": "2013500"
  },
  {
    "text": "for pcap so we basically want to capture the packets as they're coming into the mirrored instance so this is going to",
    "start": "2013500",
    "end": "2019230"
  },
  {
    "text": "run on the mirrored instance itself we build an agent code or really it's not really an agent it's an analyzer that",
    "start": "2019230",
    "end": "2025500"
  },
  {
    "text": "runs on the instance so we'll start a pcap capture on the elastic network",
    "start": "2025500",
    "end": "2030840"
  },
  {
    "text": "interface we'll filter for UDP packets in this case so we've got our all the pointer doesn't work but we've got we're",
    "start": "2030840",
    "end": "2037170"
  },
  {
    "text": "filtering for UDP packets and then creating a packet source from the eni looking at the VX land Ethernet packet",
    "start": "2037170",
    "end": "2043620"
  },
  {
    "text": "itself as it comes into the traffic mirroring instance as we grab the mirrored packet there's a bunch of code",
    "start": "2043620",
    "end": "2049888"
  },
  {
    "text": "here as well feel free to take photos or again I'm happy to share this through these folks",
    "start": "2049889",
    "end": "2056148"
  },
  {
    "text": "myself and one of my colleagues sat down for about a day and built this thing and it works it's amazing so let's build it",
    "start": "2056149",
    "end": "2066120"
  },
  {
    "text": "and see what output we get here so we'll jump in here and run our traffic",
    "start": "2066120",
    "end": "2072658"
  },
  {
    "text": "mirroring and you'll see here we've got layer 1 layer 2 layer 3 and this is basically what a peek app looks like but",
    "start": "2072659",
    "end": "2078888"
  },
  {
    "text": "if we dive into and we want to capture the actual HTTP packets we've got some",
    "start": "2078889",
    "end": "2085169"
  },
  {
    "text": "additional stuff here as well so we want to grab the HTTP request from the application payload as it comes into the",
    "start": "2085169",
    "end": "2090330"
  },
  {
    "text": "traffic mirroring instance and I'm going a little bit fast for that guys again",
    "start": "2090330",
    "end": "2096148"
  },
  {
    "text": "I'm happy to share this stuff with you as well so we've got a traffic mirroring destination and we right now",
    "start": "2096149",
    "end": "2103350"
  },
  {
    "text": "do-it-yourself traffic mirroring application on there we've got a traffic mirroring source so we're running a",
    "start": "2103350",
    "end": "2109050"
  },
  {
    "text": "simple HTTP server then we have our browser we access the web browser and we",
    "start": "2109050",
    "end": "2114300"
  },
  {
    "text": "go to our traffic mirroring page our hello world and you'll see on the left hand side we've actually captured the HTTP request",
    "start": "2114300",
    "end": "2121350"
  },
  {
    "text": "as its come into the traffic mirroring destination so you'll see here we've got the user agent string of its source",
    "start": "2121350",
    "end": "2127530"
  },
  {
    "text": "desks we've actually got the the actual HTML code itself so the traffic mirroring hello world as well so we're",
    "start": "2127530",
    "end": "2132990"
  },
  {
    "text": "actually seeing that real packet come into our traffic mirroring instance if you wanted to build your own this is pretty rudimentary though I'd probably",
    "start": "2132990",
    "end": "2139290"
  },
  {
    "text": "recommend using one of our great APN partners though if you wanted something a little bit more full-fledged but we'll",
    "start": "2139290",
    "end": "2144600"
  },
  {
    "text": "have Dave up in a second to tell us about how he's doing a whole bunch of stuff like this okay so after we've got",
    "start": "2144600",
    "end": "2154080"
  },
  {
    "text": "the actual packet capture we could send things to s3 Kinesis cloud watch et cetera and lastly we do integrate or we",
    "start": "2154080",
    "end": "2164970"
  },
  {
    "text": "have built integrations with open source ids/ips tools so in this case I've got a",
    "start": "2164970",
    "end": "2170220"
  },
  {
    "text": "link here for you folks but in the docs and we've got working with open source tools for traffic mirroring like Zeke and Surakarta as well and a link there",
    "start": "2170220",
    "end": "2178380"
  },
  {
    "text": "if you guys were interested that just takes you to the docs okay",
    "start": "2178380",
    "end": "2184849"
  },
  {
    "text": "any other considerations this is a reasonably important part so the first is mirror traffic is not subject to the",
    "start": "2186819",
    "end": "2193630"
  },
  {
    "text": "egress security group on the instance now we did this so your application owners basically can't go in and set a",
    "start": "2193630",
    "end": "2199299"
  },
  {
    "text": "security group and block your traffic mirrored packets so as an InfoSec person",
    "start": "2199299",
    "end": "2204819"
  },
  {
    "text": "you want to go in there and be able to take those packets and not have a security group affect that so the egress security group doesn't affect mirrored",
    "start": "2204819",
    "end": "2211359"
  },
  {
    "text": "traffic flow logs also don't capture mirrored traffic so if you've got flow logs from your application team",
    "start": "2211359",
    "end": "2217089"
  },
  {
    "text": "configured they won't see the mirrored traffic exiting the eni either and",
    "start": "2217089",
    "end": "2223019"
  },
  {
    "text": "packets will only be mirrored if they pass the inbound security group or network access control lists as well a",
    "start": "2223019",
    "end": "2230229"
  },
  {
    "text": "couple of considerations now for something special",
    "start": "2230229",
    "end": "2235299"
  },
  {
    "text": "we've got Dave Burke from our amazon.com team one of our principal security",
    "start": "2235299",
    "end": "2240630"
  },
  {
    "text": "engineers Dave over to you thank you much so as I said I'm Dave Burke I'm a",
    "start": "2240630",
    "end": "2248949"
  },
  {
    "text": "principal security engineer with amazon.com if you think of Amazon you've",
    "start": "2248949",
    "end": "2254799"
  },
  {
    "text": "all heard of a bless the other half of of Amazon is the retail of the consumer",
    "start": "2254799",
    "end": "2260169"
  },
  {
    "text": "division from I work we have our own dedicated security team we partner with the aid of a security team and what we",
    "start": "2260169",
    "end": "2266589"
  },
  {
    "text": "have to do is we take care of our thousands of development teams our tens of thousands of eight of us accounts",
    "start": "2266589",
    "end": "2271989"
  },
  {
    "text": "across some sort of global scale every ablest region every eight of us service in order to do our job",
    "start": "2271989",
    "end": "2277839"
  },
  {
    "text": "I was ultimately responsible for the security of our retail group is that we love every single Adel best security",
    "start": "2277839",
    "end": "2284349"
  },
  {
    "text": "service anything that can give us data VPC flow logs guard duty config cloud",
    "start": "2284349",
    "end": "2290140"
  },
  {
    "text": "trail we're just hungry for all that data whether it's finding some guard duty or the raw data that will then go",
    "start": "2290140",
    "end": "2295749"
  },
  {
    "text": "process ourselves create findings enrich it for our service teams and help us drive security up but why packet capture",
    "start": "2295749",
    "end": "2304119"
  },
  {
    "text": "why was it compelling for us we've been impact capture for a long time in our legacy our on-premises environments are",
    "start": "2304119",
    "end": "2310809"
  },
  {
    "text": "off net environments and really if we compare it to sort of flow data whether",
    "start": "2310809",
    "end": "2316150"
  },
  {
    "text": "it's PPC flow logs or IP fixed data in environments for us you know that we",
    "start": "2316150",
    "end": "2321530"
  },
  {
    "text": "look at the value add that we get where it's high fidelity time stamps that allows really accurately reconstruct",
    "start": "2321530",
    "end": "2327100"
  },
  {
    "text": "event timelines understand exactly when events were occurring even as Steve said",
    "start": "2327100",
    "end": "2333950"
  },
  {
    "text": "yesterday you know 90 percent of traffic that we're observing on the Internet is now moving to cryptid whether it's TLS",
    "start": "2333950",
    "end": "2339380"
  },
  {
    "text": "or SSH or anything like that but the ability to extract metadata whether it's their certificates the ciphers being",
    "start": "2339380",
    "end": "2345890"
  },
  {
    "text": "used there's still value there that we can we can get from that so packet capture still has a role to play and",
    "start": "2345890",
    "end": "2352760"
  },
  {
    "text": "it's still valuable to us and you know being able to do things like you know generate on-the-fly j3h a SSH additional",
    "start": "2352760",
    "end": "2361070"
  },
  {
    "text": "signatures that was a profile the clients the libraries that are observing inside our environments and so packet",
    "start": "2361070",
    "end": "2367040"
  },
  {
    "text": "captured still for us plays a very important role and we really wanted to",
    "start": "2367040",
    "end": "2372680"
  },
  {
    "text": "have that parity in the cloud but as Amazon we start with a pure for",
    "start": "2372680",
    "end": "2379600"
  },
  {
    "text": "and the quote Oh from me was that you know when we did a lot of our packet",
    "start": "2379790",
    "end": "2386270"
  },
  {
    "text": "capture in our present environment our number one tennis was don't cause harm don't cause available the impact don't",
    "start": "2386270",
    "end": "2392390"
  },
  {
    "text": "interfere with the operation of our of our of our websites our fulfillment centers and we looked at the cloud",
    "start": "2392390",
    "end": "2399800"
  },
  {
    "text": "options just wasn't an option that we would have to violate one of our tenants and so traffic mirroring is really",
    "start": "2399800",
    "end": "2406850"
  },
  {
    "text": "that's opened up that opportunity for us to enable what we really understand it is a really valuable opportunity why do",
    "start": "2406850",
    "end": "2415010"
  },
  {
    "text": "we like traffic mirroring you see traffic mirroring I think for us it was",
    "start": "2415010",
    "end": "2420140"
  },
  {
    "text": "as soon as we got access to the feature we were out to port our applications over so we have build systems that build our bro our Zeke our sericata",
    "start": "2420140",
    "end": "2427870"
  },
  {
    "text": "infrastructure it VPC traffic me represents as a network interface we",
    "start": "2427870",
    "end": "2433340"
  },
  {
    "text": "deployed our our systems they consumed the packets they process them they stream them off into the clouds",
    "start": "2433340",
    "end": "2439040"
  },
  {
    "text": "they went into our processing systems and so we were up and running very very very fast through the barrier to entry is really low we're excited for all the",
    "start": "2439040",
    "end": "2447470"
  },
  {
    "text": "new opportunities that we get that we haven't had in the cloud up until now so we think about a really sensitive",
    "start": "2447470",
    "end": "2455500"
  },
  {
    "text": "workloads we have sensitive workloads that need an Internet gateway or an app gateway or VPC peering but we really",
    "start": "2455500",
    "end": "2463600"
  },
  {
    "text": "really are sensitive of what traffic is leaving our VP sees and to be able to look at that traffic of high confidence",
    "start": "2463600",
    "end": "2470350"
  },
  {
    "text": "that is exactly what is leaving our environment I forget the fam is really a huge benefit for us we're a huge company",
    "start": "2470350",
    "end": "2477970"
  },
  {
    "text": "and we continually acquire new companies and so what we want to be able to do as we a new analyst account lands in our",
    "start": "2477970",
    "end": "2484000"
  },
  {
    "text": "systems yes you can run a whole bunch of describe calls but maybe you haven't got access to the code yes we're really",
    "start": "2484000",
    "end": "2490780"
  },
  {
    "text": "excited to be able to start immediately turn on our systems gain a base level understanding of the activity compare",
    "start": "2490780",
    "end": "2496630"
  },
  {
    "text": "what may be the new acquisition or the new account owner has told us they talked to on the internet versus what is realistically talking to on the internet",
    "start": "2496630",
    "end": "2504400"
  },
  {
    "text": "and then of course we're a servicing for Incident Response Team are soft team and an opportunity to give them additional",
    "start": "2504400",
    "end": "2510520"
  },
  {
    "text": "tool in their toolbox to be able to go in when they need to and gain additional",
    "start": "2510520",
    "end": "2515770"
  },
  {
    "text": "and data from during an incident think that's gonna be really powerful for us",
    "start": "2515770",
    "end": "2520800"
  },
  {
    "text": "how are we thinking about using us so when we pitch this the first thing we",
    "start": "2520800",
    "end": "2526870"
  },
  {
    "text": "really talked about was you know what we've got a case here where we've got a",
    "start": "2526870",
    "end": "2531910"
  },
  {
    "text": "V PC we've got an ec2 instance running goody and I and everything is not working",
    "start": "2531910",
    "end": "2538360"
  },
  {
    "text": "grace normal green traffic flowing in and out of our view PC but we then start seeing some bad traffic the system works",
    "start": "2538360",
    "end": "2545470"
  },
  {
    "text": "guard duty processes it let's imagine it's something like an IP address that's sitting on an IOC indicator list guard",
    "start": "2545470",
    "end": "2551410"
  },
  {
    "text": "duty does the right thing it's gonna alert it's gonna fire an alert in a cloud watch events but what we think is",
    "start": "2551410",
    "end": "2557110"
  },
  {
    "text": "the value out for us is gonna be saying well maybe we want to know what was they",
    "start": "2557110",
    "end": "2562990"
  },
  {
    "text": "talking to that IP address about what was the actual communication and so routing that alert into a lambda",
    "start": "2562990",
    "end": "2569140"
  },
  {
    "text": "function allowing the lambda function to identify the e and I all the metadata that we need and then go spin up on the",
    "start": "2569140",
    "end": "2577000"
  },
  {
    "text": "mound one of our monitoring a.m. eyes create the mirroring instance create the",
    "start": "2577000",
    "end": "2582370"
  },
  {
    "text": "traffic mirroring session and send the packets over and then whether we've decided if it's",
    "start": "2582370",
    "end": "2588999"
  },
  {
    "text": "appropriate in the lambda function to deploy Z course or ricotta we're then gonna have those log stream off into our",
    "start": "2588999",
    "end": "2595479"
  },
  {
    "text": "s3 buckets I'm gonna see the log shipping now and then we're just gonna give her an you know we now can come",
    "start": "2595479",
    "end": "2601599"
  },
  {
    "text": "along as humans we can look at the logs we could really deeply understand we",
    "start": "2601599",
    "end": "2606609"
  },
  {
    "text": "understand what you know Steve Schmidt was saying yeah say about you know automation is the key here but we want to be able to deliver the right data to",
    "start": "2606609",
    "end": "2612789"
  },
  {
    "text": "the humans at the right time to really make that high judgment call and so being able to do that is gonna be really",
    "start": "2612789",
    "end": "2618399"
  },
  {
    "text": "useful for us and then once we're done once you've made the decisions or there",
    "start": "2618399",
    "end": "2623769"
  },
  {
    "text": "are timer expires then we'll do our cleanup will tear down the monitoring instance will tear down the monitoring session and we're now back to all the",
    "start": "2623769",
    "end": "2631239"
  },
  {
    "text": "bad traffic has gone away we've just got that green traffic go flowing in and out but we've left the traffic or the logs",
    "start": "2631239",
    "end": "2637119"
  },
  {
    "text": "there for response team the other option we have here is let's say we have maybe",
    "start": "2637119",
    "end": "2643269"
  },
  {
    "text": "it's not guard duty maybe it's one of our other monitoring systems maybe it's the service owner telling us there is something gone wrong or suspicious with",
    "start": "2643269",
    "end": "2649509"
  },
  {
    "text": "their instance and so we want to give our incident response team the capability maybe that hit an API gateway",
    "start": "2649509",
    "end": "2656109"
  },
  {
    "text": "they'll provide the metadata that they need they'll tell it here's the eni ID I want",
    "start": "2656109",
    "end": "2661299"
  },
  {
    "text": "to spin up Zeke session for me and again we're just gonna rig in a lambda session",
    "start": "2661299",
    "end": "2667409"
  },
  {
    "text": "and let it do the spin up of the instances run the instance create the",
    "start": "2667409",
    "end": "2672639"
  },
  {
    "text": "traffic vbc traffic mirroring session for us take those logs again send them",
    "start": "2672639",
    "end": "2677769"
  },
  {
    "text": "across the e and I sent him into s3 send him into Athena and alert our incident",
    "start": "2677769",
    "end": "2683259"
  },
  {
    "text": "response team hey I did what he told there's the logs now streaming in you have live visibility you do all the",
    "start": "2683259",
    "end": "2688809"
  },
  {
    "text": "activity during an event just giving them that really strong signals and helping them make even more informed",
    "start": "2688809",
    "end": "2695289"
  },
  {
    "text": "decisions and then of course again once we're finished just make sure we just",
    "start": "2695289",
    "end": "2700299"
  },
  {
    "text": "clean up after ourselves and we don't use any of the resources that the account holder might have but we've left it really high quality and high fidelity",
    "start": "2700299",
    "end": "2706209"
  },
  {
    "text": "logs behind this is a more complicated session here so what we you know on",
    "start": "2706209",
    "end": "2712959"
  },
  {
    "text": "premise environments we know that sometimes you know you might be monitoring the perimeter firewall the",
    "start": "2712959",
    "end": "2718299"
  },
  {
    "text": "edge firewall I'm really saying I just really want to understand the traffic going out to the internet going out to untrusted networks",
    "start": "2718299",
    "end": "2725369"
  },
  {
    "text": "and so you know I'm less concerned maybe about east-west traffic it's more about north-south traffic and so here we've",
    "start": "2725369",
    "end": "2731380"
  },
  {
    "text": "got you know pre-configured we've got an ec2 instance it's now sending traffic to NLB we've got an auto scaling server",
    "start": "2731380",
    "end": "2739059"
  },
  {
    "text": "behind us and again logs are streaming house but the problem is it's an auto scaling group maybe on the right hand",
    "start": "2739059",
    "end": "2745029"
  },
  {
    "text": "side or service owner creates a new instance and so now we've got an",
    "start": "2745029",
    "end": "2750779"
  },
  {
    "text": "unmanaged or on mapped eni that's appeared inside our V PC but the good thing of course is if you're you run an",
    "start": "2750779",
    "end": "2759729"
  },
  {
    "text": "instance you generate a cloud trail event all we're gonna do is just send that cloud trail stream over the lambda",
    "start": "2759729",
    "end": "2766499"
  },
  {
    "text": "let it figure out okay what are the en eyes that have launched what is the",
    "start": "2766499",
    "end": "2772269"
  },
  {
    "text": "filter so filter at that east-west traffic build pre build me the filter on the fly so I only want to see that",
    "start": "2772269",
    "end": "2777880"
  },
  {
    "text": "Northside traffic and then just go to e and I add the vbc traffic mirroring",
    "start": "2777880",
    "end": "2783069"
  },
  {
    "text": "session and map it the target onto the oops P add the NLB here",
    "start": "2783069",
    "end": "2789819"
  },
  {
    "text": "and so again what we'll see is we'll see all our traffic now the blue and the green flowing through from the auto",
    "start": "2789819",
    "end": "2795039"
  },
  {
    "text": "scaling group through the NLB to an auto scaling monitoring service and loves going into our Athena cluster and so",
    "start": "2795039",
    "end": "2802029"
  },
  {
    "text": "we're now replicating what we've had in a premise environment which is that edge perimeter monitoring with the right",
    "start": "2802029",
    "end": "2808179"
  },
  {
    "text": "tooling at the right time we we view",
    "start": "2808179",
    "end": "2813609"
  },
  {
    "text": "this as a game-changer and that's this is only the start we're still just excited about all the opportunities if",
    "start": "2813609",
    "end": "2820150"
  },
  {
    "text": "you think about in your own premises environment you know for us deploying physical boxes your months house you're",
    "start": "2820150",
    "end": "2825849"
  },
  {
    "text": "trying to say I've got to precise the instance I've got a range of fiber-optic tap insulation I got a shift traffic",
    "start": "2825849",
    "end": "2831429"
  },
  {
    "text": "I've got to you know make sure that I want to xik box they're a Cercado box there's I want to just raw pcap box can",
    "start": "2831429",
    "end": "2838630"
  },
  {
    "text": "capture box there whereas now it is seconds that we're gonna be up and running and so our ability to do",
    "start": "2838630",
    "end": "2844569"
  },
  {
    "text": "experimentation and try out new things is something that you know for people who do packet capture it's just we've",
    "start": "2844569",
    "end": "2851439"
  },
  {
    "text": "never had that before it's really really exciting and also I think is a new said earlier the customisation of workloads",
    "start": "2851439",
    "end": "2858640"
  },
  {
    "text": "maybe starting with pcap replaying it through different types of tools finding for you know which VPC is the right",
    "start": "2858640",
    "end": "2866150"
  },
  {
    "text": "tooling sometimes it might be sir CAD or sometimes we Zeke sometimes I might pick up that you want to store but the",
    "start": "2866150",
    "end": "2873020"
  },
  {
    "text": "ability to experiment to replay without having to worry about you know large disks and storing data you know you've",
    "start": "2873020",
    "end": "2878720"
  },
  {
    "text": "got s3 for doing that now so you know to to clone an Amazon phrase we really",
    "start": "2878720",
    "end": "2884870"
  },
  {
    "text": "think this is day one a packet capture really excited I really think that you know this is so many exciting",
    "start": "2884870",
    "end": "2889880"
  },
  {
    "text": "opportunities in the coming years thank you and I'll hand it back to Matt",
    "start": "2889880",
    "end": "2895330"
  },
  {
    "text": "all right can you fake see me again I had to that's what my mic okay excellent thanks Dave that was absolutely awesome",
    "start": "2895330",
    "end": "2902600"
  },
  {
    "text": "to get a view into what Amazon is actually going to be doing with traffic mirroring so I've got a couple of final",
    "start": "2902600",
    "end": "2908870"
  },
  {
    "text": "thoughts here and just really quickly I mean we touched on VPC flow logs I think",
    "start": "2908870",
    "end": "2914450"
  },
  {
    "text": "the EPC flow logs still has a place in AWS and I think it's really something that it's not really a do I want to use",
    "start": "2914450",
    "end": "2920750"
  },
  {
    "text": "flow logs or traffic mirroring it's I probably want to use both in certain",
    "start": "2920750",
    "end": "2925820"
  },
  {
    "text": "scenarios we drove pretty deeply into traffic mirroring as well so there's a lot of different options there around",
    "start": "2925820",
    "end": "2931400"
  },
  {
    "text": "mirroring traffic to instances an Arby's using our APN partners building your own",
    "start": "2931400",
    "end": "2937700"
  },
  {
    "text": "traffic analyzer built using open source software as well that integrates with",
    "start": "2937700",
    "end": "2943340"
  },
  {
    "text": "traffic mirroring as well a couple of things to consider performance obviously how you're going to deploy your traffic",
    "start": "2943340",
    "end": "2948710"
  },
  {
    "text": "mirroring instances whether they're in the same VP sees your applications maybe they're in a centralized V PC for your",
    "start": "2948710",
    "end": "2954380"
  },
  {
    "text": "InfoSec folks to manage etc but overall traffic mirroring is one of those things we've been waiting for for quite some",
    "start": "2954380",
    "end": "2960320"
  },
  {
    "text": "time with AWS so I'm personally really excited that we now have this feature and can't wait to dive in there and use",
    "start": "2960320",
    "end": "2965810"
  },
  {
    "text": "it with a lot of my customers and lastly Dave gave us some real-world examples of",
    "start": "2965810",
    "end": "2970850"
  },
  {
    "text": "how we're really planning to use traffic mirroring lastly here just a bit of a",
    "start": "2970850",
    "end": "2976220"
  },
  {
    "text": "quirky quote so human beings have five fingers five toes five appendages five senses and there's also five arms on a",
    "start": "2976220",
    "end": "2982820"
  },
  {
    "text": "regular starfish and an earthworm has five high so that said if you think we're worth it",
    "start": "2982820",
    "end": "2988200"
  },
  {
    "text": "don't forget to fill out your evaluation and we love fives but that's all we've got for you folks today please take a",
    "start": "2988200",
    "end": "2994680"
  },
  {
    "text": "photo of this slide as well if you want the slides send it to this hopefully my inbox doesn't get too overloaded I'm",
    "start": "2994680",
    "end": "3001100"
  },
  {
    "text": "happy to share there's actually a hundred and thirteen slides in this session a whole bunch of code a whole bunch of stuff that you guys can digest",
    "start": "3001100",
    "end": "3007700"
  },
  {
    "text": "we will be doing a similar session at the New York summit as well in about a month's time it'll be a little bit",
    "start": "3007700",
    "end": "3013640"
  },
  {
    "text": "different but if you make it to New York you'll see one of my colleagues who actually built the open source analyzer",
    "start": "3013640",
    "end": "3018670"
  },
  {
    "text": "stuff he'll be presenting that there as well so thanks very much for coming guys great to have you here",
    "start": "3018670",
    "end": "3023890"
  },
  {
    "text": "[Applause]",
    "start": "3023890",
    "end": "3031019"
  }
]