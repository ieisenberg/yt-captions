[
  {
    "text": "hi welcome back so this session is now",
    "start": "5740",
    "end": "12020"
  },
  {
    "text": "Adeeb into a couple of features that we mentioned before just to be sure is anybody new here that was not here in a",
    "start": "12020",
    "end": "19550"
  },
  {
    "text": "Pew session so okay some movement in the session so my name is Danilo and I'm part of the Evangelist team and I'm",
    "start": "19550",
    "end": "26270"
  },
  {
    "text": "specifically focused on server less in the previous session we saw what's",
    "start": "26270",
    "end": "31850"
  },
  {
    "text": "happening in this several space and what were the most relevant reinvent announcement now we are depth living",
    "start": "31850",
    "end": "39230"
  },
  {
    "text": "into a couple of those that are also probably my favorite ones we will see",
    "start": "39230",
    "end": "46610"
  },
  {
    "text": "how lambda layers work how the runtime API works if you want to build your own",
    "start": "46610",
    "end": "52399"
  },
  {
    "text": "custom runtime is not necessary to know the internal over the runtime API to use",
    "start": "52399",
    "end": "57410"
  },
  {
    "text": "a new language it's only important if you want to build a new runtime for your favorite language but it's still",
    "start": "57410",
    "end": "63620"
  },
  {
    "text": "interesting to know and then we will do probably half of the session would be a demo to reuse layers and runtimes",
    "start": "63620",
    "end": "70549"
  },
  {
    "text": "to build something interesting so layers layers is a way to centrally manage code",
    "start": "70549",
    "end": "77060"
  },
  {
    "text": "and optionally also data that is shared across multiple functions we found this",
    "start": "77060",
    "end": "82069"
  },
  {
    "text": "to be complex for our customers because they needed to bundle everything all the",
    "start": "82069",
    "end": "87439"
  },
  {
    "text": "dependency with every function up that they were creating and this was also slow when they were creating an update",
    "start": "87439",
    "end": "95359"
  },
  {
    "text": "when we were updating a function so everything this normally is custom code that is used by must multiple multiple",
    "start": "95359",
    "end": "104090"
  },
  {
    "text": "functions it can be standard libraries that you want to use to simplify your business logic it's let's say it's",
    "start": "104090",
    "end": "111560"
  },
  {
    "text": "shared code that doesn't change frequently anything this is changing frequently keep it inside the function",
    "start": "111560",
    "end": "117469"
  },
  {
    "text": "code but anything that is relatively standard is not maybe core to your business logic because you only use",
    "start": "117469",
    "end": "123259"
  },
  {
    "text": "those as primitives use it put it into our layer layers by default are shared",
    "start": "123259",
    "end": "129770"
  },
  {
    "text": "within the account the AWS account they are created but you can optionally share",
    "start": "129770",
    "end": "135350"
  },
  {
    "text": "with multiple accounts within an AWS ganeshan so if you use it a blazer damage session you can easily share",
    "start": "135350",
    "end": "141430"
  },
  {
    "text": "within the old all the accounts of your organization or you can share publicly if you want to create something for the",
    "start": "141430",
    "end": "148120"
  },
  {
    "text": "public good and the idea is that the",
    "start": "148120",
    "end": "153310"
  },
  {
    "text": "function can reference account reference layers also cross accounts as I said before to build a layer you just need to",
    "start": "153310",
    "end": "160750"
  },
  {
    "text": "put those common components into a zip file and upload it as a lambda layer",
    "start": "160750",
    "end": "165989"
  },
  {
    "text": "when you create a layer you always create a new version over there if you're familiar with versioning with",
    "start": "165989",
    "end": "172569"
  },
  {
    "text": "lambda functions you know that you can update a function and you need to explicitly create a new version if you",
    "start": "172569",
    "end": "178000"
  },
  {
    "text": "want with layers it's automatically actually the primitives put create a new",
    "start": "178000",
    "end": "183340"
  },
  {
    "text": "version there is no create layer without creating a new version and each version is immutable so when if you need to",
    "start": "183340",
    "end": "189519"
  },
  {
    "text": "update you need to create a new version of that layer you can also delete a version but if you delete a specific",
    "start": "189519",
    "end": "196810"
  },
  {
    "text": "version for example I create version one of my Charlotte libraries then version 2 and version 3 I can delete version one",
    "start": "196810",
    "end": "204220"
  },
  {
    "text": "but all the functions that are still referencing where someone will continue to work but it will be impossible to",
    "start": "204220",
    "end": "211450"
  },
  {
    "text": "update or create a new function that use the deleted layer so you can delete safely because you don't need to check",
    "start": "211450",
    "end": "217450"
  },
  {
    "text": "if this layer is being used we will keep the layer if functions are still using it but when you want to update you will",
    "start": "217450",
    "end": "223599"
  },
  {
    "text": "not be able to use the deleted layer anymore and if you look at layers layers are",
    "start": "223599",
    "end": "230970"
  },
  {
    "text": "identified using an Amazon resource name and this is an example of the arm and at",
    "start": "230970",
    "end": "236079"
  },
  {
    "text": "the end you have the versioning number version 1 version 2 a pleasantry when",
    "start": "236079",
    "end": "242590"
  },
  {
    "text": "you configure a function can be a new function or updated function you can reference up to five layers so there is",
    "start": "242590",
    "end": "250150"
  },
  {
    "text": "a limit this is a limit that we decided but we may increase it but the idea is",
    "start": "250150",
    "end": "255639"
  },
  {
    "text": "that layers should not be too small so it is not like if you use node any NPM",
    "start": "255639",
    "end": "261280"
  },
  {
    "text": "module you put it into a layer and then you take 45 layers this is not the idea",
    "start": "261280",
    "end": "266440"
  },
  {
    "text": "we see layers we see that you use a few and in my purse",
    "start": "266440",
    "end": "271670"
  },
  {
    "text": "view but we still see how customer we will use layers the idea is that you",
    "start": "271670",
    "end": "276980"
  },
  {
    "text": "probably have a layer with all the dependencies of your function you have",
    "start": "276980",
    "end": "282230"
  },
  {
    "text": "maybe another layer with management stuff so maybe because your company is using some security or monitoring",
    "start": "282230",
    "end": "288200"
  },
  {
    "text": "service that you need to plug into your lambda function and maybe another layer can be a custom runtime so probably I'm",
    "start": "288200",
    "end": "295340"
  },
  {
    "text": "expecting functions to use to three layers no more than that when the",
    "start": "295340",
    "end": "301070"
  },
  {
    "text": "function is invoked the layers are installed when we create the sandbox in the execution environment",
    "start": "301070",
    "end": "309080"
  },
  {
    "text": "and what we do is just we unzip all the layers under /opt and the order of the",
    "start": "309080",
    "end": "317270"
  },
  {
    "text": "unzip is the order of the layers so when you configure layers order is important",
    "start": "317270",
    "end": "322280"
  },
  {
    "text": "it's an order at the list of layers and then in that order we will unzip inside the /opt so a layer can optional can",
    "start": "322280",
    "end": "330290"
  },
  {
    "text": "potentially overwrite the previous layer this can also be good because maybe you install some framework and then you want",
    "start": "330290",
    "end": "336560"
  },
  {
    "text": "to create a new layer that updates a few libraries or a few modules of that framework and that works because the",
    "start": "336560",
    "end": "342560"
  },
  {
    "text": "second layer will happen will overwrite the previous one the overall uncompressed sides of the lambda",
    "start": "342560",
    "end": "349940"
  },
  {
    "text": "function with all the layers remains the same as before it's 250 megabyte so you",
    "start": "349940",
    "end": "355910"
  },
  {
    "text": "can't use layers to have more space so the space that you have for your lambda function is exactly the same you can use",
    "start": "355910",
    "end": "361760"
  },
  {
    "text": "layers to organize how you distribute code but don't expect to have larger",
    "start": "361760",
    "end": "368780"
  },
  {
    "text": "functions because you use layers and when you zip your dependencies you need",
    "start": "368780",
    "end": "376700"
  },
  {
    "text": "to have a directory structure inside your zip file so that when we unzipped the file under /opt the the modules the",
    "start": "376700",
    "end": "384890"
  },
  {
    "text": "libraries will be seen by the different languages so imagine that in front of those folders there will be /opt because",
    "start": "384890",
    "end": "391400"
  },
  {
    "text": "we unzip there and this is this the directory structure inside your zip file for the layer so for not j/s we expect",
    "start": "391400",
    "end": "398810"
  },
  {
    "text": "node.js slash node modules and then slice and all the node modules so you need to",
    "start": "398810",
    "end": "404750"
  },
  {
    "text": "create a not just directory and then you can for example run NPM here and it will automatically work optionally you can",
    "start": "404750",
    "end": "410900"
  },
  {
    "text": "create use a directory structure that includes the node version for Python",
    "start": "410900",
    "end": "416240"
  },
  {
    "text": "again you expect a Python directory and then inside this Python directory all the Python modules that you want to use",
    "start": "416240",
    "end": "423879"
  },
  {
    "text": "optionally we support the site package syntax that includes also the Python",
    "start": "423879",
    "end": "429470"
  },
  {
    "text": "version for Java Java /lib is the class spot so put your jar into Java /lib and",
    "start": "429470",
    "end": "437599"
  },
  {
    "text": "it will be automatically seen by your Java lambda functions for Ruby we",
    "start": "437599",
    "end": "443419"
  },
  {
    "text": "support both the gems and Ruby libraries so Ruby's is new to the lambda platform",
    "start": "443419",
    "end": "448599"
  },
  {
    "text": "and for all runtimes anything that is under bean so it will be /opt /bin is in",
    "start": "448599",
    "end": "455900"
  },
  {
    "text": "the path so if you want to run an executable you put it on the bin and it will you can jump execute to the",
    "start": "455900",
    "end": "461750"
  },
  {
    "text": "executable without specifying the path within the lambda function and if you need shared objects libraries for you",
    "start": "461750",
    "end": "469039"
  },
  {
    "text": "can use leap and it will go into a shop it is - Lib for example if you want to",
    "start": "469039",
    "end": "474500"
  },
  {
    "text": "use open CV the open computing vision library within a lambda function there",
    "start": "474500",
    "end": "481069"
  },
  {
    "text": "are a few shared objects because open CV is mainly written in C++ + handlers in",
    "start": "481069",
    "end": "486110"
  },
  {
    "text": "Python or no js' you put the shared objects in under Lib and then you can put the no GS or the Python handles in",
    "start": "486110",
    "end": "494060"
  },
  {
    "text": "in those directories Mike makes sense okay to use layers we also needed to",
    "start": "494060",
    "end": "501919"
  },
  {
    "text": "update and add new api's to the lambda platform so the the create function and",
    "start": "501919",
    "end": "508849"
  },
  {
    "text": "the update function configuration now except this list of ordered layers up to",
    "start": "508849",
    "end": "514099"
  },
  {
    "text": "5 layers and then we have some api's to manage the layers so you can list the layers in your account you can see the",
    "start": "514099",
    "end": "521000"
  },
  {
    "text": "version of a layer you can publish a new layer version this is the API to create something new there is as I said before",
    "start": "521000",
    "end": "528199"
  },
  {
    "text": "you can publish a layer you need to publish a layer version that you can also delete with the caveat that I said",
    "start": "528199",
    "end": "534730"
  },
  {
    "text": "so we will keep it for the functions are still using it get layer version is quite powerful because gives you all the",
    "start": "534730",
    "end": "541120"
  },
  {
    "text": "metadata configuration of a layer for example when you create a layer you can say what are the compatible runtimes",
    "start": "541120",
    "end": "547600"
  },
  {
    "text": "like this is a layer that works with Python 3.6 and 3.7 this is a layer that",
    "start": "547600",
    "end": "553089"
  },
  {
    "text": "works with not js8 and so on if you run get layer version you get all this metadata and you also",
    "start": "553089",
    "end": "560019"
  },
  {
    "text": "get a link to the zip file that you can use to download the layer so if you want",
    "start": "560019",
    "end": "566079"
  },
  {
    "text": "to inspect a layer that you using or that maybe you created some time ago the get layer version is they wanted you",
    "start": "566079",
    "end": "572199"
  },
  {
    "text": "need to use because you can download the lay the layer locally and then the last three are to check add or remove",
    "start": "572199",
    "end": "579279"
  },
  {
    "text": "permissions to the layer so that you can add permission to other accounts to your organization or to everybody to use",
    "start": "579279",
    "end": "585610"
  },
  {
    "text": "those layer we also added support for",
    "start": "585610",
    "end": "592120"
  },
  {
    "text": "the severus application model so there is a resource that is a layered version",
    "start": "592120",
    "end": "598930"
  },
  {
    "text": "again there is no concept of layers itself because you always always have to",
    "start": "598930",
    "end": "604029"
  },
  {
    "text": "use a version so for example if you want to use a layer you if you want to create a layer in a some template you can say",
    "start": "604029",
    "end": "610540"
  },
  {
    "text": "this is the name this is the description this is the content of my layer and you can provide a directory and we will zip",
    "start": "610540",
    "end": "617260"
  },
  {
    "text": "everything inside the directory to create the layer or you can provide an extra link if you want if the layer is",
    "start": "617260",
    "end": "623139"
  },
  {
    "text": "already zipped on three the retention policy is is different than normally so",
    "start": "623139",
    "end": "629800"
  },
  {
    "text": "normally with confirmation if you update a resource we delete the previous version and we only keep the new version",
    "start": "629800",
    "end": "636459"
  },
  {
    "text": "but by default four layers version the detention policies retain so we will",
    "start": "636459",
    "end": "641500"
  },
  {
    "text": "retain if you update a layer we will keep the previous version and the new version and so on you can optionally",
    "start": "641500",
    "end": "647230"
  },
  {
    "text": "change this to be a different policy but the default is retain and when you have",
    "start": "647230",
    "end": "652630"
  },
  {
    "text": "a layer that you create in the same template or that is already may be being created you can reference the layer in",
    "start": "652630",
    "end": "658480"
  },
  {
    "text": "your function so your server is function as some code the handler and then you",
    "start": "658480",
    "end": "664689"
  },
  {
    "text": "can optionally specify the list of up to five layers is unordered list and you can reference",
    "start": "664689",
    "end": "670550"
  },
  {
    "text": "layers by arm or you can have reference layers created in the same template by",
    "start": "670550",
    "end": "675710"
  },
  {
    "text": "reference and in the runtime if you want to use a custom runtime so we will see",
    "start": "675710",
    "end": "681860"
  },
  {
    "text": "custom runtimes shortly the keyword that you must use from the sea in the CLI or",
    "start": "681860",
    "end": "687380"
  },
  {
    "text": "in Sam or in the API is provided so when you specific say that the runtime of a",
    "start": "687380",
    "end": "692630"
  },
  {
    "text": "lambda function is provided it means that is using the runtime runtime api and we will see what that means we also",
    "start": "692630",
    "end": "699470"
  },
  {
    "text": "integrate that same support in the same CLI so you can now use the same VI to",
    "start": "699470",
    "end": "705500"
  },
  {
    "text": "create layers in this way and to use layers in this way and also if you you",
    "start": "705500",
    "end": "711350"
  },
  {
    "text": "can use the same CLI to test your function locally and to debug locally if you do that we will automatically use",
    "start": "711350",
    "end": "718610"
  },
  {
    "text": "the the the gate layer version to download all the layers locally it is",
    "start": "718610",
    "end": "725450"
  },
  {
    "text": "transparent for you so you just say I want to debug this function locally it's using three layers we don't load those",
    "start": "725450",
    "end": "730910"
  },
  {
    "text": "layers around everything locally within a container we use docker containers for that let's see how the runtime API works",
    "start": "730910",
    "end": "740510"
  },
  {
    "text": "and then let's see they move both so the runtime api is a simple interface that",
    "start": "740510",
    "end": "746360"
  },
  {
    "text": "you can use to bring any programming language that can run only on amazon linux or a specific version of a",
    "start": "746360",
    "end": "753440"
  },
  {
    "text": "language that maybe we support but not your specific version you need for your developing your functions so the in the",
    "start": "753440",
    "end": "761900"
  },
  {
    "text": "console you can select a custom runtime or you can use provided in the API SDKs and CLI and what happens is that the",
    "start": "761900",
    "end": "769970"
  },
  {
    "text": "function must include or the function or any of the layer of the function must",
    "start": "769970",
    "end": "776510"
  },
  {
    "text": "include an executable file called boot stuff and this is a fixed name and we",
    "start": "776510",
    "end": "782930"
  },
  {
    "text": "will use this executable as an interface between the lambda environment and your",
    "start": "782930",
    "end": "788030"
  },
  {
    "text": "code in any language you want so this acceptable it is responsible for the communication between your code and",
    "start": "788030",
    "end": "795440"
  },
  {
    "text": "the lambda our platform this this X schedule of executable must be in the root of the function or in the root",
    "start": "795440",
    "end": "802350"
  },
  {
    "text": "of the lava layer so if it's in the root of the function it's the one that we use if there is no bootstrap executable in",
    "start": "802350",
    "end": "808200"
  },
  {
    "text": "the root of the function we will look under /opt since layers they are over overwrite each other if you have",
    "start": "808200",
    "end": "814890"
  },
  {
    "text": "multiple layers with a runtime the last one will win because it will overwrite the other ones this file must be",
    "start": "814890",
    "end": "821610"
  },
  {
    "text": "executable so if you dip an executable file on Linux or a Mac normally works",
    "start": "821610",
    "end": "827250"
  },
  {
    "text": "but if you use over there platform be careful because the executable permission of the file must be put inside the zip file otherwise if it's",
    "start": "827250",
    "end": "834570"
  },
  {
    "text": "not if it doesn't have the executable permission it will not work and the",
    "start": "834570",
    "end": "841860"
  },
  {
    "text": "booster acts as a bridge and the runtime api they use a simple HTTP interface to",
    "start": "841860",
    "end": "848420"
  },
  {
    "text": "to communicate between the lambda platform in your code and bootstrap the",
    "start": "848420",
    "end": "853620"
  },
  {
    "text": "main focus is to manage response should receive the event to the processing and then receive back a response or an error",
    "start": "853620",
    "end": "860690"
  },
  {
    "text": "you need also to manage the context and of course the execution of the function",
    "start": "860690",
    "end": "866630"
  },
  {
    "text": "the information on how and where is the HTTP endpoint and the environment is",
    "start": "866630",
    "end": "872130"
  },
  {
    "text": "shared as a environment variables with the with the bootstrap environment so",
    "start": "872130",
    "end": "878490"
  },
  {
    "text": "basically the bootstrap executable can see an environment variable that is a WS lambda runtime api that has the syntax",
    "start": "878490",
    "end": "885630"
  },
  {
    "text": "hostname port and this will be the end point where the the runtime api must be",
    "start": "885630",
    "end": "892500"
  },
  {
    "text": "executed there is also underscore a handler that is the traditional function handler of a",
    "start": "892500",
    "end": "900150"
  },
  {
    "text": "lambda function so it's script name the syntax is scripts name without extension",
    "start": "900150",
    "end": "905880"
  },
  {
    "text": "dot function name within this script so if you have a function with lots of",
    "start": "905880",
    "end": "912090"
  },
  {
    "text": "files and functions inside that because you have multiple functions the function that we execute with the lambda platform",
    "start": "912090",
    "end": "920460"
  },
  {
    "text": "is defined by the handler this is standard with lambda since 2014 and you specify the file name without extension",
    "start": "920460",
    "end": "927180"
  },
  {
    "text": "and then the function name within that file another environment variable that has always been there is the longer the",
    "start": "927180",
    "end": "933420"
  },
  {
    "text": "screws that tells you the directory where the function code is at this point isn't",
    "start": "933420",
    "end": "940850"
  },
  {
    "text": "the runtime ap the bootstrap at the beginning we'll do some initialization so the first time we create an",
    "start": "940850",
    "end": "947720"
  },
  {
    "text": "environment you know we recycle the environment for next execution but the first time there is an invocation we",
    "start": "947720",
    "end": "953209"
  },
  {
    "text": "have to create the environment for the lambda function you do some initialization work if you have an error",
    "start": "953209",
    "end": "959540"
  },
  {
    "text": "during initialization because maybe you can find stuff that your at runtime needs you can post the error to slash",
    "start": "959540",
    "end": "966800"
  },
  {
    "text": "run times less in it slash error then you start a loop to receive the events",
    "start": "966800",
    "end": "972770"
  },
  {
    "text": "and process the events of the function as you know we never have multiple",
    "start": "972770",
    "end": "977839"
  },
  {
    "text": "invocation in the same environment so every environment is sequential you get an invocation you process the event and",
    "start": "977839",
    "end": "983149"
  },
  {
    "text": "then you wait for another invocation you do get run time invocation next this is",
    "start": "983149",
    "end": "989120"
  },
  {
    "text": "an HTTP call you shouldn't be scared of timeouts because we will freed the",
    "start": "989120",
    "end": "996080"
  },
  {
    "text": "function between invocation so the function is freezed when there is some content we are freed and you get the",
    "start": "996080",
    "end": "1001120"
  },
  {
    "text": "event so no no no possible timeout here and in the response that you get the",
    "start": "1001120",
    "end": "1008020"
  },
  {
    "text": "payload of the get will be the event that you need to process with the lambda function and then in the headers you get",
    "start": "1008020",
    "end": "1014350"
  },
  {
    "text": "the invocation ID in this lambda runtime at the base request ID header and if you",
    "start": "1014350",
    "end": "1019779"
  },
  {
    "text": "want to use x-ray with your runtime we also get the x-ray x-ray tracing ID in",
    "start": "1019779",
    "end": "1025600"
  },
  {
    "text": "this header and you are in charge of propagating this as an environment variable to the to your function so if",
    "start": "1025600",
    "end": "1032380"
  },
  {
    "text": "you want to use extraneous on environment more information on this is in the documentation at the end of the",
    "start": "1032380",
    "end": "1039160"
  },
  {
    "text": "of the processing so you can use any language that you want you need to post to slash runtime invocation and then use",
    "start": "1039160",
    "end": "1046600"
  },
  {
    "text": "the invocation ID that you got from the from the from the get here in the path",
    "start": "1046600",
    "end": "1051820"
  },
  {
    "text": "and then you can post a response or if everything is ok with your return code or an error if it's if there is an error",
    "start": "1051820",
    "end": "1059020"
  },
  {
    "text": "so it's it's very simple the main loop is get and then post error or response",
    "start": "1059020",
    "end": "1064809"
  },
  {
    "text": "and the full and the point that you need to implement is this this is already HTTPS I think and then",
    "start": "1064809",
    "end": "1072910"
  },
  {
    "text": "you have the lambda runtime api 2008 1806 0 1 this is the versioning date for",
    "start": "1072910",
    "end": "1080050"
  },
  {
    "text": "the runtime api this is the current one and then the final part here is the one that I was mentioning here when we",
    "start": "1080050",
    "end": "1089110"
  },
  {
    "text": "launch the runtime api we release a few open source runtimes we work as a SS and",
    "start": "1089110",
    "end": "1097300"
  },
  {
    "text": "also we work together with our partners so as a WS we launch the C++ runtime to",
    "start": "1097300",
    "end": "1102310"
  },
  {
    "text": "create C++ functions and rust for creating rust functions and those are",
    "start": "1102310",
    "end": "1109600"
  },
  {
    "text": "open source on github and you can there is a blog post on the computer blog and",
    "start": "1109600",
    "end": "1114910"
  },
  {
    "text": "a blog post on the open source blog of AWS that describe how you can use those runtimes and then our partners they",
    "start": "1114910",
    "end": "1124390"
  },
  {
    "text": "already started creating interesting stuff so alert logic created a runtime",
    "start": "1124390",
    "end": "1129610"
  },
  {
    "text": "for Erlangen Alex fear blue age our runtime for COBOL so even now around",
    "start": "1129610",
    "end": "1135400"
  },
  {
    "text": "COBOL hits at lambda not source created a distribution for they're not solid",
    "start": "1135400",
    "end": "1142440"
  },
  {
    "text": "robust distribution of not Jas and stay Carey probably work on one of the most",
    "start": "1142440",
    "end": "1147490"
  },
  {
    "text": "requested languages now that Ruby is available to this PHP so you can also run PHP so all the things that I was",
    "start": "1147490",
    "end": "1154690"
  },
  {
    "text": "mentioning before how the runtime API works is important only if you want to create your own runtime if you want to",
    "start": "1154690",
    "end": "1160240"
  },
  {
    "text": "use a runtime probably the runtime is distributed as a layer you can just take the layer and just use it transparently",
    "start": "1160240",
    "end": "1166690"
  },
  {
    "text": "to you the main difference as a user is that the runtime that are fully managed",
    "start": "1166690",
    "end": "1172570"
  },
  {
    "text": "by AWS are also updated by us transparently so if there is a security update for not",
    "start": "1172570",
    "end": "1178450"
  },
  {
    "text": "Jas or Python we apply that transparently and you don't need to do anything if you use a runtime through a",
    "start": "1178450",
    "end": "1183820"
  },
  {
    "text": "layer probably there would be a new version of the layer and you need to reconfigure the function to use the new",
    "start": "1183820",
    "end": "1189310"
  },
  {
    "text": "version of the layer otherwise nobody will do that and you will continue to use the old version there also a curated",
    "start": "1189310",
    "end": "1196240"
  },
  {
    "text": "list of interesting public layers here on github so if you want to see what's possible",
    "start": "1196240",
    "end": "1201299"
  },
  {
    "text": "to create with layers and not just runtimes layers in general this is an interesting place to go those are public",
    "start": "1201299",
    "end": "1209070"
  },
  {
    "text": "layers so as a WS we can't enforce security on that so if you use a public",
    "start": "1209070",
    "end": "1215129"
  },
  {
    "text": "layer that is shared by someone my download the zip file analyze the zip",
    "start": "1215129",
    "end": "1220200"
  },
  {
    "text": "file because it's your responsibility to use something that someone else prepared for you so let's see how this work with",
    "start": "1220200",
    "end": "1227850"
  },
  {
    "text": "me the demo the idea of the demo is first to work with layers and let's see",
    "start": "1227850",
    "end": "1236039"
  },
  {
    "text": "how we can use layers with not j/s so I'm going to create a function of this using a few very common not GS modules",
    "start": "1236039",
    "end": "1245700"
  },
  {
    "text": "so moment requests requests promise and then we will see with Python with Python",
    "start": "1245700",
    "end": "1253019"
  },
  {
    "text": "we also created an AWS managed lair so there is the idea for AWS to provide",
    "start": "1253019",
    "end": "1259950"
  },
  {
    "text": "fully managed layers the first one and the only one up to now is this 1/4 item",
    "start": "1259950",
    "end": "1266549"
  },
  {
    "text": "that is providing you num pile and scifi so that you can use them easily",
    "start": "1266549",
    "end": "1271679"
  },
  {
    "text": "those are mathematical libraries for python that are normally quite complex",
    "start": "1271679",
    "end": "1277019"
  },
  {
    "text": "to use with lambda because they also have binary dependencies they use low-level c++ mathematical libraries",
    "start": "1277019",
    "end": "1282809"
  },
  {
    "text": "such as blast if I'm not wrong so normally you need to bundle these shared objects and the libraries is not easy so",
    "start": "1282809",
    "end": "1289259"
  },
  {
    "text": "we wanted to simplify this experience and we have this fully managed layer and we're looking forward to see this those",
    "start": "1289259",
    "end": "1295649"
  },
  {
    "text": "layers available for Python 3.6 and 3.7 and then we will see how to add that",
    "start": "1295649",
    "end": "1301289"
  },
  {
    "text": "another custom layer for a mock plotting for example so let's start with nodejs",
    "start": "1301289",
    "end": "1308059"
  },
  {
    "text": "oops so let's go here on the on the console so this is the lambda console",
    "start": "1308779",
    "end": "1318350"
  },
  {
    "text": "I'm in Ireland perfect as you can see here we have the layers as I mentioned",
    "start": "1318350",
    "end": "1325559"
  },
  {
    "text": "before and currently I have no layers and let's create a function let's call",
    "start": "1325559",
    "end": "1331289"
  },
  {
    "text": "it no the demo I'm using not Jes eight let's create a new role and let's",
    "start": "1331289",
    "end": "1339179"
  },
  {
    "text": "call the role like the function so they can find it easily and I don't need any",
    "start": "1339179",
    "end": "1344730"
  },
  {
    "text": "other permission and well the function",
    "start": "1344730",
    "end": "1350250"
  },
  {
    "text": "is being created let's go here and here I have my note demo so this is a very simple lambda function that is using",
    "start": "1350250",
    "end": "1357509"
  },
  {
    "text": "them moment and request promise so moment is a date/time library that is",
    "start": "1357509",
    "end": "1364649"
  },
  {
    "text": "very common to use with JavaScript and node and request promise is you see is providing a promise interface so that in",
    "start": "1364649",
    "end": "1371669"
  },
  {
    "text": "JavaScript you can use things like a sink and a weight with brought with the",
    "start": "1371669",
    "end": "1378870"
  },
  {
    "text": "request module and request is a very common module for doing HTTP request",
    "start": "1378870",
    "end": "1384029"
  },
  {
    "text": "from from no js' from a security perspective I normally say don't use external modules if you really don't",
    "start": "1384029",
    "end": "1390149"
  },
  {
    "text": "need it so no js' has very good HTTP and HTTPS so I normally try to avoid this",
    "start": "1390149",
    "end": "1395759"
  },
  {
    "text": "but for the sake of the example I'm using request and you will see the implication of that so I just printed",
    "start": "1395759",
    "end": "1403080"
  },
  {
    "text": "the date and then download the website and and write the logs but let's create",
    "start": "1403080",
    "end": "1408360"
  },
  {
    "text": "this function so let's copy everything here here I have my code I paste it and",
    "start": "1408360",
    "end": "1417149"
  },
  {
    "text": "then I save the function now I can zoom on the editor and test the function",
    "start": "1417149",
    "end": "1423899"
  },
  {
    "text": "let's I'm not using in the event in this function I'm just printing the date and",
    "start": "1423899",
    "end": "1429029"
  },
  {
    "text": "downloading a file is so I don't need any right so I create an empty test event with lambda in the console you can",
    "start": "1429029",
    "end": "1436230"
  },
  {
    "text": "create a test event so that you can test easily so this is an empty test event now I say click test and as you can",
    "start": "1436230",
    "end": "1444629"
  },
  {
    "text": "imagine I get that I cannot find the module moment so normally I would need to install and bundle everything but",
    "start": "1444629",
    "end": "1451080"
  },
  {
    "text": "since maybe I have hundreds of functions that use the same module let's create a layer so this is the the command line I",
    "start": "1451080",
    "end": "1458159"
  },
  {
    "text": "can create a node layer directory",
    "start": "1458159",
    "end": "1464059"
  },
  {
    "text": "here I need to create a node J s directory you remember the directory structure that I showed before and here",
    "start": "1465500",
    "end": "1473240"
  },
  {
    "text": "I can run NPM so I want to install a moment request and the request promise",
    "start": "1473240",
    "end": "1483670"
  },
  {
    "text": "npm install of course and as usual with",
    "start": "1484120",
    "end": "1490700"
  },
  {
    "text": "NPM now half of the internet has been downloaded and you can see the number of",
    "start": "1490700",
    "end": "1498470"
  },
  {
    "text": "modules that are loaded so that's why I say for security reason be careful with the modules you use actually moment is",
    "start": "1498470",
    "end": "1505100"
  },
  {
    "text": "quite good because moment is just downloading moment here request is downloading all those other modules so",
    "start": "1505100",
    "end": "1511520"
  },
  {
    "text": "be careful when you do that I've also the package lock created here",
    "start": "1511520",
    "end": "1517280"
  },
  {
    "text": "with versioning so I'm I don't need that in the lair so I move it out I move it",
    "start": "1517280",
    "end": "1524540"
  },
  {
    "text": "out a couple of directory and now here",
    "start": "1524540",
    "end": "1529850"
  },
  {
    "text": "this is the point where where I want so I'm in the not joyous directory let's",
    "start": "1529850",
    "end": "1535430"
  },
  {
    "text": "just I have the node.js directory here so I can zip maximum compression",
    "start": "1535430",
    "end": "1544670"
  },
  {
    "text": "recursive directory and then I want to call it not layer and everything is here",
    "start": "1544670",
    "end": "1554170"
  },
  {
    "text": "okay so now I have the zip file and I",
    "start": "1554170",
    "end": "1561050"
  },
  {
    "text": "have also the package Locker that I saved so let's go back here in the",
    "start": "1561050",
    "end": "1566540"
  },
  {
    "text": "console I go in layers so can you see",
    "start": "1566540",
    "end": "1571880"
  },
  {
    "text": "let me see if I did because if i zoom too much normally the console doesn't like it can you see from the last row",
    "start": "1571880",
    "end": "1579010"
  },
  {
    "text": "okay I create a layer here let's call it",
    "start": "1579010",
    "end": "1584120"
  },
  {
    "text": "node layer and this is the description so it's a very good practice to put the",
    "start": "1584120",
    "end": "1589460"
  },
  {
    "text": "versioning of what you're putting in the layer in the description because otherwise it's very difficult to understand what's there so that's why I",
    "start": "1589460",
    "end": "1595820"
  },
  {
    "text": "kept the the package lock so you can also maybe automate stuff but let's see for example",
    "start": "1595820",
    "end": "1603950"
  },
  {
    "text": "moment so for a moment I'm using where from two point two point two quindi so",
    "start": "1603950",
    "end": "1609500"
  },
  {
    "text": "here in the description they say there is moment - 22 - and then request some",
    "start": "1609500",
    "end": "1616940"
  },
  {
    "text": "version and then request promise and some other version so it use the syntax",
    "start": "1616940",
    "end": "1624440"
  },
  {
    "text": "like this so that you know what's inside a lair now I can upload a zip file you",
    "start": "1624440",
    "end": "1632390"
  },
  {
    "text": "can also use as if uploaded zip file from s3 and if your layer is bigger than",
    "start": "1632390",
    "end": "1638270"
  },
  {
    "text": "10 megabytes it's much better to do that but for now it's not a big so let's go",
    "start": "1638270",
    "end": "1644030"
  },
  {
    "text": "here this is not layered I just created",
    "start": "1644030",
    "end": "1650799"
  },
  {
    "text": "here you can declare what are the compatible runtimes I think this works",
    "start": "1650799",
    "end": "1655820"
  },
  {
    "text": "with not js8 and not GX j s6",
    "start": "1655820",
    "end": "1661010"
  },
  {
    "text": "so let's declare this as the compatible runtimes and now i'm creating the layer",
    "start": "1661010",
    "end": "1668030"
  },
  {
    "text": "so there has been uploaded and this will probably be the first version in fact is",
    "start": "1668030",
    "end": "1673610"
  },
  {
    "text": "version 1 and it's available near you also get the arm of the layer so you see",
    "start": "1673610",
    "end": "1681500"
  },
  {
    "text": "if you have multiple version here you get the list with the version of what's inside is much much easy to read so the",
    "start": "1681500",
    "end": "1688910"
  },
  {
    "text": "description is really useful for understanding what's inside that layer so now let's go back to the function",
    "start": "1688910",
    "end": "1696820"
  },
  {
    "text": "this is my node demo and as you see now we have layers here where you can configure the layers of the function if",
    "start": "1697600",
    "end": "1705559"
  },
  {
    "text": "use the CLI you have the layer option that is similar and then you have to use the lamp so I can add a layer here you",
    "start": "1705559",
    "end": "1712970"
  },
  {
    "text": "can select from the compatible layers or you can provide a layer by arm if you prefer here I can list the compatible",
    "start": "1712970",
    "end": "1720470"
  },
  {
    "text": "ones and I have my layers and not layer because it's compatible with not eight I can choose the version only version one",
    "start": "1720470",
    "end": "1727580"
  },
  {
    "text": "is available I just added and now I have here the reference layers",
    "start": "1727580",
    "end": "1732879"
  },
  {
    "text": "and if you have more than one layer here you can also define the order north",
    "start": "1732879",
    "end": "1737889"
  },
  {
    "text": "earlier or much later so the order the layer will be unzipped in the /opt so",
    "start": "1737889",
    "end": "1743649"
  },
  {
    "text": "you have to save and now that I save the function as I can test it again so let's",
    "start": "1743649",
    "end": "1751629"
  },
  {
    "text": "go back to function let's take the editor again and let's test again and",
    "start": "1751629",
    "end": "1758610"
  },
  {
    "text": "yeah wonder of the wonder here in the log now I get the time that I printed using moment and the the request library",
    "start": "1760139",
    "end": "1768490"
  },
  {
    "text": "downloaded 188 88 87 kilobytes from the",
    "start": "1768490",
    "end": "1775269"
  },
  {
    "text": "internet so nothing fancy but it's just an example of how you can create layers and use layers so let's do something a",
    "start": "1775269",
    "end": "1782889"
  },
  {
    "text": "little bit more interesting in Python now so let's go back here to functions",
    "start": "1782889",
    "end": "1789129"
  },
  {
    "text": "and let's create another function at this Python demo this is using I think",
    "start": "1789129",
    "end": "1796779"
  },
  {
    "text": "I'm using Python 3.6 here so I'm not using 3.7 because I already have another",
    "start": "1796779",
    "end": "1802149"
  },
  {
    "text": "library that I created for treatment 6 create a new role and I call the role",
    "start": "1802149",
    "end": "1808330"
  },
  {
    "text": "like the function so I will find it back and then I can just create the function",
    "start": "1808330",
    "end": "1815129"
  },
  {
    "text": "so for this function I want to use then the numpy sci-fi layer so let me look",
    "start": "1815129",
    "end": "1824409"
  },
  {
    "text": "here so this function is generally using numpy to generate a random matrix",
    "start": "1824409",
    "end": "1832080"
  },
  {
    "text": "vampire is very effective with linear algebra and it's used a lot with neural",
    "start": "1832080",
    "end": "1837639"
  },
  {
    "text": "networks that normally use lots of linear algebra inside so I generate a random library a second random library",
    "start": "1837639",
    "end": "1843999"
  },
  {
    "text": "and then I do the matrix multiplication there is something that is unknown to build yourself numpy is also very",
    "start": "1843999",
    "end": "1850749"
  },
  {
    "text": "efficient in our memory and speed for memory and speed so it's if you need to do this kind of things",
    "start": "1850749",
    "end": "1857139"
  },
  {
    "text": "don't build your own libraries and then I'm using side by side",
    "start": "1857139",
    "end": "1863130"
  },
  {
    "text": "is built on top of numpy and provides very high-level powerful scientific",
    "start": "1863130",
    "end": "1869330"
  },
  {
    "text": "functions in this case I generate 10 random points on a plane and then I use",
    "start": "1869330",
    "end": "1875880"
  },
  {
    "text": "from Sify convex hull hull convex hull is a function that we find that the",
    "start": "1875880",
    "end": "1880890"
  },
  {
    "text": "minimum convex set that includes all the random points something that if you need",
    "start": "1880890",
    "end": "1885960"
  },
  {
    "text": "to build yourself is not easy lots of possible use case maybe you receive events from devices and you have the",
    "start": "1885960",
    "end": "1892050"
  },
  {
    "text": "location and you want to understand what is they re affected by something so you want to find a convex set of those",
    "start": "1892050",
    "end": "1898140"
  },
  {
    "text": "points and and then it's printing those complex points so I copy again this go",
    "start": "1898140",
    "end": "1904080"
  },
  {
    "text": "back in the console this is my Python",
    "start": "1904080",
    "end": "1909300"
  },
  {
    "text": "demo it's Python I copy and paste this and then I save as you see also for",
    "start": "1909300",
    "end": "1919980"
  },
  {
    "text": "Python there is no impact on the code so when we design layers we wanted the the",
    "start": "1919980",
    "end": "1925350"
  },
  {
    "text": "code to just import or require in OGS or the in Java so we didn't want to have",
    "start": "1925350",
    "end": "1931950"
  },
  {
    "text": "any impact on the source code layers should be transparent to use in the source code let's add the numpy layer",
    "start": "1931950",
    "end": "1939480"
  },
  {
    "text": "otherwise I get an error here so now I add a layer again if I look at the list",
    "start": "1939480",
    "end": "1945240"
  },
  {
    "text": "of compatible layers now we also have AWS layers and for now there is only one",
    "start": "1945240",
    "end": "1951750"
  },
  {
    "text": "that is managed here but we're looking forward to suggestion and to what kind",
    "start": "1951750",
    "end": "1956760"
  },
  {
    "text": "of layers we can provide a managed for you I choose this one the last version",
    "start": "1956760",
    "end": "1962130"
  },
  {
    "text": "is version 2 and I add it now I can save",
    "start": "1962130",
    "end": "1968300"
  },
  {
    "text": "and if anybody tried to bundle numpy with lambda knows that this was very",
    "start": "1969830",
    "end": "1976380"
  },
  {
    "text": "annoying because you need to find like three for shared objects that depend on Amazon Linux sometimes you need to",
    "start": "1976380",
    "end": "1982680"
  },
  {
    "text": "install it or compile them it's not justified on model is using C++",
    "start": "1982680",
    "end": "1987720"
  },
  {
    "text": "low-level objects so now that the layer is saved I can test the function so I",
    "start": "1987720",
    "end": "1994110"
  },
  {
    "text": "take the editor test again I'm not using the event here I'm just generating function and the",
    "start": "1994110",
    "end": "2001080"
  },
  {
    "text": "matrix and doing the multiplication so I can create an empty event and use this",
    "start": "2001080",
    "end": "2007139"
  },
  {
    "text": "empty event and as you see now I have my first let me zoom a little bit my first",
    "start": "2007139",
    "end": "2016109"
  },
  {
    "text": "matrix random matrix our second random matrix then the dot product of the two",
    "start": "2016109",
    "end": "2021389"
  },
  {
    "text": "matrixes and then I used Syfy so I generate ten random points on a plane",
    "start": "2021389",
    "end": "2027210"
  },
  {
    "text": "between zero and one so the point zero two point nine and then the small at",
    "start": "2027210",
    "end": "2032999"
  },
  {
    "text": "convex set containing all ten points us in this case six sides and those are the",
    "start": "2032999",
    "end": "2038460"
  },
  {
    "text": "points so you need to connect point nine sorry we don't see all the six point",
    "start": "2038460",
    "end": "2045629"
  },
  {
    "text": "nine with 0.3 0.3 with point one point one with point four point four with",
    "start": "2045629",
    "end": "2051990"
  },
  {
    "text": "point two and point two with point seven and then back to nine so this works but it's not really easy to understand it",
    "start": "2051990",
    "end": "2058710"
  },
  {
    "text": "would be great if I can plot this on a graph and actually there is a library that is often used with numpy that is",
    "start": "2058710",
    "end": "2066059"
  },
  {
    "text": "called matplotlib but it's not included in my lair so how can I do that I need",
    "start": "2066059",
    "end": "2071908"
  },
  {
    "text": "to create another layer so that I can use math to talib is really mad poet leap is also using lip a JPEG and",
    "start": "2071909",
    "end": "2079760"
  },
  {
    "text": "lip-lip PNG for graphics so you need to bundle low level straight objects for",
    "start": "2079760",
    "end": "2087750"
  },
  {
    "text": "the library to work so to do that what I did I I went and say okay let's search",
    "start": "2087750",
    "end": "2093480"
  },
  {
    "text": "how the lambda environment is built and",
    "start": "2093480",
    "end": "2098520"
  },
  {
    "text": "we have this description of the lambda environment and here we also give you",
    "start": "2098520",
    "end": "2104609"
  },
  {
    "text": "the Amazon machine image the image that you can use on ec2 to create an instance",
    "start": "2104609",
    "end": "2109619"
  },
  {
    "text": "that does the same environment as the lambda functions so if I click here I",
    "start": "2109619",
    "end": "2116298"
  },
  {
    "text": "can start an instance that will be similar to to my lambda function I",
    "start": "2117470",
    "end": "2122549"
  },
  {
    "text": "actually already did that I did that in North Virginia because I did that when",
    "start": "2122549",
    "end": "2128069"
  },
  {
    "text": "the service was still in review and here I have any stunts that I",
    "start": "2128069",
    "end": "2133109"
  },
  {
    "text": "started that us where I call making",
    "start": "2133109",
    "end": "2139500"
  },
  {
    "text": "layers so let's copy this so let's do",
    "start": "2139500",
    "end": "2145859"
  },
  {
    "text": "SSH I think I have the SSH key here is c2",
    "start": "2145859",
    "end": "2155220"
  },
  {
    "text": "user and the domain okay and here I",
    "start": "2155220",
    "end": "2161310"
  },
  {
    "text": "created a few layers for Python and if I go in matplotlib layer we see there is",
    "start": "2161310",
    "end": "2166920"
  },
  {
    "text": "already that zip file and there's also the Piton directory and those are the directory so what I did and this just a",
    "start": "2166920",
    "end": "2174420"
  },
  {
    "text": "suggestion is I started the instance and I expect this to be similar to the lambda environment this is the site",
    "start": "2174420",
    "end": "2181710"
  },
  {
    "text": "package of Python but it for any language we look at the solid libraries then I installed matplotlib with all the",
    "start": "2181710",
    "end": "2188280"
  },
  {
    "text": "dependencies then I check back and I took all the new directories that were created and I copied all the new",
    "start": "2188280",
    "end": "2194130"
  },
  {
    "text": "directories here and then I dip them in this way you know what is the difference and what you need to dip over time",
    "start": "2194130",
    "end": "2201480"
  },
  {
    "text": "expect this to be better because as I said before you can build the layers with the Sam CLI and the same CLI can",
    "start": "2201480",
    "end": "2208109"
  },
  {
    "text": "use docker containers so it can emulate this environment for now it doesn't work",
    "start": "2208109",
    "end": "2214170"
  },
  {
    "text": "but the idea is that the same July could be used to build and install layers that are compatible without",
    "start": "2214170",
    "end": "2221340"
  },
  {
    "text": "having to start on ec2 instance but this is not so bad as an experience already",
    "start": "2221340",
    "end": "2227280"
  },
  {
    "text": "so this zip file I cop it locally and I have it here is already it's in this",
    "start": "2227280",
    "end": "2234540"
  },
  {
    "text": "directory so if I check and you see I",
    "start": "2234540",
    "end": "2240270"
  },
  {
    "text": "have the pot Python slash and then the in this case I used the site package",
    "start": "2240270",
    "end": "2246330"
  },
  {
    "text": "directory but you can also remove this part of the path it works the same in",
    "start": "2246330",
    "end": "2252540"
  },
  {
    "text": "this case maybe it was useful because this is really dependent on the under Python version so I know that this was",
    "start": "2252540",
    "end": "2257609"
  },
  {
    "text": "built for Python 3.6 so what I can do i if i go",
    "start": "2257609",
    "end": "2263630"
  },
  {
    "text": "on this close is it to and this let's go here on on layers and let's create a new",
    "start": "2263630",
    "end": "2271190"
  },
  {
    "text": "layer this is a mat plot lib layer",
    "start": "2271190",
    "end": "2279130"
  },
  {
    "text": "matplotlib I don't remember the version but always put the version here it's a",
    "start": "2279130",
    "end": "2285800"
  },
  {
    "text": "good practice so this is slightly larger than 10 megabytes so normally you should go through Amazon s3 if it's too big you",
    "start": "2285800",
    "end": "2292790"
  },
  {
    "text": "can get timeout from the console but in this case i'm i want to risk something",
    "start": "2292790",
    "end": "2298070"
  },
  {
    "text": "that's a live demo no you can't go everything okay we need to try and then",
    "start": "2298070",
    "end": "2304040"
  },
  {
    "text": "the compatible runtime this was built for python 3.6 create the compatible",
    "start": "2304040",
    "end": "2310220"
  },
  {
    "text": "runtime is just for your search ability and you can always force by arm to",
    "start": "2310220",
    "end": "2317090"
  },
  {
    "text": "import a module if you want so now we're uploading and configuring so we have the",
    "start": "2317090",
    "end": "2322970"
  },
  {
    "text": "new version of the layer so now i have two layers here now i go back to my",
    "start": "2322970",
    "end": "2328790"
  },
  {
    "text": "fightin demo and if you look at my code",
    "start": "2328790",
    "end": "2334250"
  },
  {
    "text": "here so the first thing let's add the layer so i got on layers i do that",
    "start": "2334250",
    "end": "2339530"
  },
  {
    "text": "because it's I forget and now here if I look for compatible layers I see that I",
    "start": "2339530",
    "end": "2345380"
  },
  {
    "text": "have both the AWS layer that I was already added and then my layer and",
    "start": "2345380",
    "end": "2350860"
  },
  {
    "text": "there is version 1 now I have two layers so I can also play with the order so",
    "start": "2350860",
    "end": "2357290"
  },
  {
    "text": "probably it makes sense to install before nan PI and sigh PI and then matplotlib but here you can go select",
    "start": "2357290",
    "end": "2364550"
  },
  {
    "text": "them and move them up or down so now let's go on the code let's save because",
    "start": "2364550",
    "end": "2370700"
  },
  {
    "text": "you need to save the the configuration change and then this save is taking a",
    "start": "2370700",
    "end": "2378890"
  },
  {
    "text": "little bit more time and if you see the source code there was some code that was commented out that was needed to - - for",
    "start": "2378890",
    "end": "2388640"
  },
  {
    "text": "my edit and if you see here also I'm using an s3 bucket to upload the image",
    "start": "2388640",
    "end": "2394550"
  },
  {
    "text": "that I create with the with a plot so to write honest three I need some permission so while this is",
    "start": "2394550",
    "end": "2401230"
  },
  {
    "text": "also saving probably save it but let's go quickly on IIM and let's add",
    "start": "2401230",
    "end": "2407380"
  },
  {
    "text": "permission to write in this bucket so let me copy the bucket so the bucket",
    "start": "2407380",
    "end": "2413050"
  },
  {
    "text": "that I'm using for some strange reason is in Oregon because I did that for the Las Vegas demo but still works let's go",
    "start": "2413050",
    "end": "2422350"
  },
  {
    "text": "here and rolls let's search for Python",
    "start": "2422350",
    "end": "2427630"
  },
  {
    "text": "demo and this is the role that has been created for my function and now I can",
    "start": "2427630",
    "end": "2433500"
  },
  {
    "text": "add an inline policy for example my service is s3 I need to be able to write",
    "start": "2433500",
    "end": "2441640"
  },
  {
    "text": "and do a put object and the resource is",
    "start": "2441640",
    "end": "2447370"
  },
  {
    "text": "I can specify a resource by arm so this is the bucket name and any file in the",
    "start": "2447370",
    "end": "2452890"
  },
  {
    "text": "bucket and now I can review the policy this is s3 right just just a name for",
    "start": "2452890",
    "end": "2460360"
  },
  {
    "text": "the policy and now the the policy can the lambda function can put object on",
    "start": "2460360",
    "end": "2468910"
  },
  {
    "text": "this bucket let's go on the bucket probably there is something that I left",
    "start": "2468910",
    "end": "2474760"
  },
  {
    "text": "there",
    "start": "2474760",
    "end": "2477180"
  },
  {
    "text": "yeah there is this convex and then there is an image did delete this image that",
    "start": "2482060",
    "end": "2487290"
  },
  {
    "text": "was already here from another demo so now it's empty now back to the function",
    "start": "2487290",
    "end": "2494130"
  },
  {
    "text": "so let's uncomment some stuff so I",
    "start": "2494130",
    "end": "2499560"
  },
  {
    "text": "import to the Muttalib function I use these three buckets and this is the object and here at the end there is this",
    "start": "2499560",
    "end": "2506910"
  },
  {
    "text": "final part that is using PLT plots is the name that is reused with matthew",
    "start": "2506910",
    "end": "2513570"
  },
  {
    "text": "talib i plot the original points then i plot the points taken from the convex",
    "start": "2513570",
    "end": "2520560"
  },
  {
    "text": "hull then i have an image and when you have an image and you need to upload an",
    "start": "2520560",
    "end": "2527550"
  },
  {
    "text": "image to s3 the easy way is to write the image on a file but I usually try to avoid using the /tmp of lambda if not",
    "start": "2527550",
    "end": "2534480"
  },
  {
    "text": "necessary also because /tmp is always 512 megabyte memory can reach 3 gigabytes so you have",
    "start": "2534480",
    "end": "2541530"
  },
  {
    "text": "more memory than disk so in this case with Python I can use plot bytes IO but",
    "start": "2541530",
    "end": "2546660"
  },
  {
    "text": "any language has a way to manage images in memory with bytes IO I create constructed is similar to a file in",
    "start": "2546660",
    "end": "2553500"
  },
  {
    "text": "memory where I store my image data and then I from both of the AWS SDK for",
    "start": "2553500",
    "end": "2558900"
  },
  {
    "text": "Python I upload this from memory strict straight to s3 my suggestion is don't",
    "start": "2558900",
    "end": "2566010"
  },
  {
    "text": "use the simply if you don't need it because probably you have more memory than than file system but it depends if",
    "start": "2566010",
    "end": "2572100"
  },
  {
    "text": "you want to run this with very little memory maybe it's not only a good use case the final so if you see matplotlib",
    "start": "2572100",
    "end": "2579420"
  },
  {
    "text": "is a library that normally is used as a global object so you see the plot that",
    "start": "2579420",
    "end": "2585420"
  },
  {
    "text": "is here is the same that I'm using inside the function so it's very important that you clean the object at",
    "start": "2585420",
    "end": "2591060"
  },
  {
    "text": "the end if you don't clean and you have multiple function execution that will go",
    "start": "2591060",
    "end": "2596100"
  },
  {
    "text": "in the same environment they will continue to plot on top of the same graphics so when you have global",
    "start": "2596100",
    "end": "2603210"
  },
  {
    "text": "variables so try to avoid anything that is global if you have found variables declare the variables inside the",
    "start": "2603210",
    "end": "2609570"
  },
  {
    "text": "function but if you have anything global thing that you need to clean it for any at the end of an invocation for",
    "start": "2609570",
    "end": "2615299"
  },
  {
    "text": "the next invocation and that's what the clause is doing so let's save now and",
    "start": "2615299",
    "end": "2621410"
  },
  {
    "text": "test so the the function now should run",
    "start": "2621410",
    "end": "2627240"
  },
  {
    "text": "similarly to before but since I want maybe to make it a little bit more",
    "start": "2627240",
    "end": "2634010"
  },
  {
    "text": "interesting let's put not a time point but 100 points to generate randomly and",
    "start": "2634010",
    "end": "2639569"
  },
  {
    "text": "let's increase the timeout to 30 seconds just to be sure that we have time to",
    "start": "2639569",
    "end": "2644849"
  },
  {
    "text": "process 100 point robbery yes but it's better not be I have 128 megabytes so",
    "start": "2644849",
    "end": "2651690"
  },
  {
    "text": "it's not very fast this function okay so let's go here and test so now the",
    "start": "2651690",
    "end": "2658950"
  },
  {
    "text": "function is doing the matrix multiplication as before then is generating 100 random number and then",
    "start": "2658950",
    "end": "2663990"
  },
  {
    "text": "the convex set surrounding my number so this is the matrix as before then 100",
    "start": "2663990",
    "end": "2670079"
  },
  {
    "text": "numbers and now the convex set as 11 sides and those are the points that you",
    "start": "2670079",
    "end": "2676019"
  },
  {
    "text": "need to connect to create the boundary but now I also uploaded this on a street",
    "start": "2676019",
    "end": "2681569"
  },
  {
    "text": "so if I go on this three bucket and I refresh I see that there is an image I can open the image and then I'm block",
    "start": "2681569",
    "end": "2689880"
  },
  {
    "text": "the the pop-up request and this is the image of operators based so those are",
    "start": "2689880",
    "end": "2695910"
  },
  {
    "text": "the 100 random points and this is the convex set so running all of those so I apart from the mathematical implication",
    "start": "2695910",
    "end": "2702900"
  },
  {
    "text": "that maybe are not only interests of everybody this this is a way to quickly add new capabilities to a lambda",
    "start": "2702900",
    "end": "2708599"
  },
  {
    "text": "function and when you create a layer then you can just use the layer with any function so it's something that can be shared within a company it's something",
    "start": "2708599",
    "end": "2715109"
  },
  {
    "text": "very well structure it so let's now try something different so let's go back",
    "start": "2715109",
    "end": "2723509"
  },
  {
    "text": "here and the second part I want to create a custom run time and what is the",
    "start": "2723509",
    "end": "2728940"
  },
  {
    "text": "language that you always wanted to use to create a globally scalable API - of",
    "start": "2728940",
    "end": "2734819"
  },
  {
    "text": "course so let's create a bash an engine for best functions for the lambda is they",
    "start": "2734819",
    "end": "2740279"
  },
  {
    "text": "probably they'll award of the run times but it's also easy to understand so I like this example so I need a bootstrap",
    "start": "2740279",
    "end": "2746210"
  },
  {
    "text": "that will be used for this runtime and hello in a file contain the function",
    "start": "2746210",
    "end": "2753770"
  },
  {
    "text": "that I want to run hello dot sh for example with a formal form I bash functions so let's go here and let's",
    "start": "2753770",
    "end": "2763490"
  },
  {
    "text": "look at the layer first so this is the bootstrap layer let me just close this",
    "start": "2763490",
    "end": "2772070"
  },
  {
    "text": "so that we have a little bit more space so this is an executable so it can be a",
    "start": "2772070",
    "end": "2778010"
  },
  {
    "text": "binary acceptable in this case is a script as a shell script the first",
    "start": "2778010",
    "end": "2783710"
  },
  {
    "text": "command I'm not entering into all the details of bash but basically saying that in case of error this script should",
    "start": "2783710",
    "end": "2789710"
  },
  {
    "text": "fail and report the right error code so it should not continue like normally bash scripts would do and this is a best",
    "start": "2789710",
    "end": "2796730"
  },
  {
    "text": "practice that we require runtimes to do so if a runtime is expected in case of an unmanaged error to fail and report",
    "start": "2796730",
    "end": "2803660"
  },
  {
    "text": "the error to the lambda environment and we will recreate another environment set",
    "start": "2803660",
    "end": "2809630"
  },
  {
    "text": "X is just for debugging it will the bad stuff everything that I echo that I",
    "start": "2809630",
    "end": "2815630"
  },
  {
    "text": "print will automatically go to cloud watch locks so you can print from the bug in this line here is quite",
    "start": "2815630",
    "end": "2823460"
  },
  {
    "text": "interesting again the tale of the best script are not important but in this",
    "start": "2823460",
    "end": "2829760"
  },
  {
    "text": "case I use source to import the function that I want to run I know that the",
    "start": "2829760",
    "end": "2834950"
  },
  {
    "text": "lambda the function code is in under the task route and here I I have the",
    "start": "2834950",
    "end": "2840410"
  },
  {
    "text": "underscore and lair environmental variable that as you remember as the syntax script a name without extension",
    "start": "2840410",
    "end": "2847820"
  },
  {
    "text": "dot function name so here I cut the handler at the dot and I take the first",
    "start": "2847820",
    "end": "2854690"
  },
  {
    "text": "part so this is the file name and then I add the extension dot SH and source will",
    "start": "2854690",
    "end": "2863000"
  },
  {
    "text": "import this function in in there in the memory of this script and then it starts the loop it starts try to zoom a little",
    "start": "2863000",
    "end": "2873230"
  },
  {
    "text": "bit better but I'm doing worse okay I I start the loop and loop will",
    "start": "2873230",
    "end": "2880130"
  },
  {
    "text": "I have to store the headers and for a Bosch I create a temporary file to do",
    "start": "2880130",
    "end": "2885260"
  },
  {
    "text": "that this is how work it works easily then I have to get the event for the",
    "start": "2885260",
    "end": "2890870"
  },
  {
    "text": "first invocation so the event I use curl to do an HTTP request I store the",
    "start": "2890870",
    "end": "2897170"
  },
  {
    "text": "headers there and then I call the lambda runtime api endpoint with the runtime",
    "start": "2897170",
    "end": "2902690"
  },
  {
    "text": "invocation next so as I said before you runtime invocation next so this script",
    "start": "2902690",
    "end": "2908030"
  },
  {
    "text": "will be freezed when there is an invocation this will succeed and get the event and write the headers here then",
    "start": "2908030",
    "end": "2915710"
  },
  {
    "text": "from the headers I do some magic with some cut and UNIX stuff to extract the",
    "start": "2915710",
    "end": "2921820"
  },
  {
    "text": "invocation ID from the headers and I store it here and I log it and now I",
    "start": "2921820",
    "end": "2928580"
  },
  {
    "text": "have to do the response so for the response I have to execute the function that I imported here so I take the",
    "start": "2928580",
    "end": "2934850"
  },
  {
    "text": "handler I cut with the dot and then I take the second part it's the function name I excuted this function passing in",
    "start": "2934850",
    "end": "2942170"
  },
  {
    "text": "input the event data and the result is the response and now I have to post the",
    "start": "2942170",
    "end": "2947690"
  },
  {
    "text": "result so I post the result at invocation the invocation ID and",
    "start": "2947690",
    "end": "2952910"
  },
  {
    "text": "response and I get the response back so",
    "start": "2952910",
    "end": "2958970"
  },
  {
    "text": "this is probably the shortest bootstrap there's a little bit of bash syntax that",
    "start": "2958970",
    "end": "2965720"
  },
  {
    "text": "maybe is not of interest of everybody but important to understand overall flow it's just a get process and post and",
    "start": "2965720",
    "end": "2971600"
  },
  {
    "text": "then from the under layer you get the file and the function name that you need to use now let's look at the function",
    "start": "2971600",
    "end": "2980060"
  },
  {
    "text": "that is very easy this is the function the file is called L o dot s H and",
    "start": "2980060",
    "end": "2985640"
  },
  {
    "text": "inside a lot of the sage there is a function that I call handler and this function is taking the event data but",
    "start": "2985640",
    "end": "2991430"
  },
  {
    "text": "it's actually just logging the event data and then it's just sending a standard static response that is built",
    "start": "2991430",
    "end": "2998630"
  },
  {
    "text": "for the API gateway so it's just saying status code HTTP 200 content type I",
    "start": "2998630",
    "end": "3005170"
  },
  {
    "text": "think is just saying that this utf-8 because I'm using some",
    "start": "3005170",
    "end": "3011190"
  },
  {
    "text": "non-standard Unicode Unicode characters and then say hello ward in a couple of",
    "start": "3011190",
    "end": "3017039"
  },
  {
    "text": "languages and then I print it for the bugging so this is an example of a",
    "start": "3017039",
    "end": "3022349"
  },
  {
    "text": "lambda function written in bash now let's create this so the first thing that you have to do is create a layer",
    "start": "3022349",
    "end": "3029400"
  },
  {
    "text": "I already dipped everything so create layer this is my bash run time this is",
    "start": "3029400",
    "end": "3038430"
  },
  {
    "text": "for bash I'm not specifying a version because I'm actually using the one in a lambda environment and then I can upload",
    "start": "3038430",
    "end": "3046640"
  },
  {
    "text": "the run time that I already dipped before lambda now there are no",
    "start": "3046640",
    "end": "3054750"
  },
  {
    "text": "compatible run times this is a custom run time so I can't declare a compatible run times here we are actually changed",
    "start": "3054750",
    "end": "3061769"
  },
  {
    "text": "going to change this because a side effect of this is that since this is there's no way to declare this as a",
    "start": "3061769",
    "end": "3068599"
  },
  {
    "text": "itself a run time it means that it's not discoverable in the console and I will need to copy and paste paste the arm but",
    "start": "3068599",
    "end": "3076230"
  },
  {
    "text": "we added at API level the possibility to declare a runtime compatible with provided that is the keyword for a run",
    "start": "3076230",
    "end": "3083039"
  },
  {
    "text": "time so it expect this to be a little bit better in the future is something where we still thinking off so for now I",
    "start": "3083039",
    "end": "3089339"
  },
  {
    "text": "have no compatible runtimes I created this layer and then I will need to save",
    "start": "3089339",
    "end": "3095789"
  },
  {
    "text": "the lay they arm here so I copy this arm that includes the layer version now I",
    "start": "3095789",
    "end": "3103319"
  },
  {
    "text": "want to create the function so I create a new function this is a dash function I",
    "start": "3103319",
    "end": "3110269"
  },
  {
    "text": "now I have to specify custom run time here and since this is a custom run time",
    "start": "3110269",
    "end": "3116369"
  },
  {
    "text": "there will be no Editora because we don't know which is the language so we can put an editor for something we don't",
    "start": "3116369",
    "end": "3122160"
  },
  {
    "text": "know I will need to upload that zip file and I create a new role with the same",
    "start": "3122160",
    "end": "3128700"
  },
  {
    "text": "name as before this to this so that I don't need so this is a new function",
    "start": "3128700",
    "end": "3134910"
  },
  {
    "text": "lambda knows that he's a custom run time so he can't show me an editor but I",
    "start": "3134910",
    "end": "3140670"
  },
  {
    "text": "already zipped the the the function here and it's",
    "start": "3140670",
    "end": "3146570"
  },
  {
    "text": "taking a little bit more than usual this is it's getting tired at the end of the",
    "start": "3146570",
    "end": "3152810"
  },
  {
    "text": "hour okay now here you see I don't have an editor but I can upload a zip file",
    "start": "3152810",
    "end": "3159530"
  },
  {
    "text": "from astray or directly so ya upload I upload my function here save and yeah",
    "start": "3159530",
    "end": "3172820"
  },
  {
    "text": "let's say and now I have to add the brush layer and by the way there's no",
    "start": "3172820",
    "end": "3178370"
  },
  {
    "text": "when you use custom runtimes you can also bundle the bootstrap together with",
    "start": "3178370",
    "end": "3184070"
  },
  {
    "text": "the function it's not mandatory to use layer but using layer is much more flexible because you created create the",
    "start": "3184070",
    "end": "3189320"
  },
  {
    "text": "layer once and then you can use it with multiple functions so depending on what you want to do you might not need to do",
    "start": "3189320",
    "end": "3195350"
  },
  {
    "text": "this but now I layers I add the layer now I have no compatible layers so I",
    "start": "3195350",
    "end": "3201650"
  },
  {
    "text": "need to provide the layer by arm as I said before this is what we want to simplify and save so now the function",
    "start": "3201650",
    "end": "3209120"
  },
  {
    "text": "has a layer and the code has been uploaded so let's try to test it again",
    "start": "3209120",
    "end": "3216140"
  },
  {
    "text": "I'm not using the event a lot so I can just put give an empty event and create",
    "start": "3216140",
    "end": "3222980"
  },
  {
    "text": "a test event and then test and as expected I got the sorry I got this so",
    "start": "3222980",
    "end": "3231770"
  },
  {
    "text": "the yellow word for the API gateway and if we look here we get the the log of",
    "start": "3231770",
    "end": "3238550"
  },
  {
    "text": "all this plus that you see is because I did the set X with the bash script so",
    "start": "3238550",
    "end": "3244160"
  },
  {
    "text": "the special script is doing that the back of everything that is doing so yeah to fool the bug of everything here and I",
    "start": "3244160",
    "end": "3250850"
  },
  {
    "text": "have the usual times if I test this again we can see the execution time is",
    "start": "3250850",
    "end": "3257710"
  },
  {
    "text": "still still not the fastest 200 milliseconds so bash is probably not really internet scale but now we can do",
    "start": "3257710",
    "end": "3265700"
  },
  {
    "text": "something more interesting we can add for example an API gateway here and say",
    "start": "3265700",
    "end": "3272480"
  },
  {
    "text": "that I want to create a new API an open API and save and and now I have",
    "start": "3272480",
    "end": "3284000"
  },
  {
    "text": "the endpoint that I can run and and now I'm running a globally distributed it's",
    "start": "3284000",
    "end": "3291800"
  },
  {
    "text": "book like I closed everything sorry I'm",
    "start": "3291800",
    "end": "3297590"
  },
  {
    "text": "now I'm running a globally distributed API",
    "start": "3297590",
    "end": "3303370"
  },
  {
    "text": "running on the lambda platform using bash scripts it's just reloading",
    "start": "3303370",
    "end": "3311440"
  },
  {
    "text": "- function API gateway runtime okay and",
    "start": "3317840",
    "end": "3325970"
  },
  {
    "text": "I can reload and still not probably the fastest so now that you can create bash",
    "start": "3325970",
    "end": "3335630"
  },
  {
    "text": "functions with an bash API I think your developer life is different but actually",
    "start": "3335630",
    "end": "3341540"
  },
  {
    "text": "you can look at the custom runtime so if you're interested in PHP or air long and",
    "start": "3341540",
    "end": "3346670"
  },
  {
    "text": "Alex here that I think would be a good fit for an event-driven architecture and",
    "start": "3346670",
    "end": "3351680"
  },
  {
    "text": "I'm still waiting for the first one that will create the poor around time because I used to play a lot with Perl I think",
    "start": "3351680",
    "end": "3358670"
  },
  {
    "text": "20 years ago still a good language thank you",
    "start": "3358670",
    "end": "3364869"
  },
  {
    "text": "[Music] we have a few minutes and after this I",
    "start": "3365370",
    "end": "3373850"
  },
  {
    "text": "think we have a break and then there is for lunch",
    "start": "3373850",
    "end": "3380120"
  },
  {
    "text": "this year break for lunch and then we start back with another session when we will dive deep on on the AWS CLI for Sam",
    "start": "3380120",
    "end": "3389000"
  },
  {
    "text": "and the surveillance applications other happy to take a few question if you want otherwise shall be I'm here and you can",
    "start": "3389000",
    "end": "3396410"
  },
  {
    "text": "just ask me",
    "start": "3396410",
    "end": "3398799"
  }
]