[
  {
    "start": "0",
    "end": "47000"
  },
  {
    "text": "morning folks uh I think we're at our new start time so we should kick off um",
    "start": "4160",
    "end": "9920"
  },
  {
    "text": "I've been watching Twitter and I've seen almost as many tweets for dead mouse as I have for",
    "start": "9920",
    "end": "15760"
  },
  {
    "text": "Kinesis and not sure what conclusion to draw from that so my name is Eric",
    "start": "15760",
    "end": "21680"
  },
  {
    "text": "brandwine I'm with the AWS security team but when I joined the company about 6 years ago I was with a team that defined",
    "start": "21680",
    "end": "28279"
  },
  {
    "text": "and built VPC virtual private cloud and that's what we're going to be talking about today we'll take a look at the",
    "start": "28279",
    "end": "34399"
  },
  {
    "text": "problem we're trying to solve the the customer experience that we wanted to provide uh a couple of ways that we",
    "start": "34399",
    "end": "40600"
  },
  {
    "text": "could have implemented it and then we'll dig into how we actually wound up building it and what that means for",
    "start": "40600",
    "end": "47239"
  },
  {
    "text": "us story is pretty simple we are AWS Amazon web services we have the cloud we",
    "start": "47239",
    "end": "53039"
  },
  {
    "text": "have all of these Services uh things like ec2 and elastic load balancing and",
    "start": "53039",
    "end": "58199"
  },
  {
    "text": "elastic Block store and our relation database service that just got postgres support uh red shift data warehouse",
    "start": "58199",
    "end": "64878"
  },
  {
    "text": "service elasticache this stuff's",
    "start": "64879",
    "end": "70360"
  },
  {
    "text": "great this stuff is not customers have data centers and so",
    "start": "71000",
    "end": "77880"
  },
  {
    "start": "73000",
    "end": "126000"
  },
  {
    "text": "like all good Engineers we go to the Whiteboard youve got the data center you've got the cloud let's just connect",
    "start": "77880",
    "end": "84119"
  },
  {
    "text": "them together this is going to be a very important deployment scenario for us uh",
    "start": "84119",
    "end": "89360"
  },
  {
    "text": "Andy Jaz he touched on this during his keynote we have customers they have applications they have resources they",
    "start": "89360",
    "end": "95799"
  },
  {
    "text": "have data already sitting in databases and data warehouses and Cold Storage on",
    "start": "95799",
    "end": "101000"
  },
  {
    "text": "their premise and doing a massive big bang forklift migration is unrealistic",
    "start": "101000",
    "end": "106079"
  },
  {
    "text": "we do have some customers that don't have any Legacy they can build for the cloud and that's awesome like we want",
    "start": "106079",
    "end": "111240"
  },
  {
    "text": "those customers to have a great day too but for all of the customers that already have some sort of it",
    "start": "111240",
    "end": "116600"
  },
  {
    "text": "infrastructure we have to enable uh a incremental migration we have to enable",
    "start": "116600",
    "end": "121759"
  },
  {
    "text": "them to to pick and choose and move at the right speed for them we have a a poster child customer",
    "start": "121759",
    "end": "128920"
  },
  {
    "start": "126000",
    "end": "176000"
  },
  {
    "text": "here I'm going to move to the less wir solution last year at this conference",
    "start": "128920",
    "end": "134239"
  },
  {
    "text": "Laura grit gave a talk entitled drinking our own champagne uh on how Amazon moved",
    "start": "134239",
    "end": "139959"
  },
  {
    "text": "to the cloud and it dealt with all of these issues there there's nothing magical about Amazon we built our",
    "start": "139959",
    "end": "145560"
  },
  {
    "text": "applications in our data centers and because of that they have a whole bunch of assumptions of about the environment",
    "start": "145560",
    "end": "151120"
  },
  {
    "text": "in which they were built and so just flipping a magic switch and appearing in the cloud one day wasn't going to happen",
    "start": "151120",
    "end": "158400"
  },
  {
    "text": "and so moving Amazon into the cloud relied on VPC heavily and we have many other customers that are in exactly the",
    "start": "158400",
    "end": "165400"
  },
  {
    "text": "same situation that are making that exact same migration and if anyone's interested the the talk is on",
    "start": "165400",
    "end": "172959"
  },
  {
    "start": "176000",
    "end": "212000"
  },
  {
    "text": "YouTube so the reason that it was difficult for us to connect ec2 up to customer data",
    "start": "176239",
    "end": "183560"
  },
  {
    "text": "centers is that when you launch an ec2 instance you get what is effectively a 32bit random number is an IP address we",
    "start": "183560",
    "end": "190480"
  },
  {
    "text": "pick it you have no control over it and there's no guarantee that your instances are going to be anywhere close",
    "start": "190480",
    "end": "196959"
  },
  {
    "text": "to each other in terms of IP address and in fact instances that are close together in IP address may be owned by",
    "start": "196959",
    "end": "202840"
  },
  {
    "text": "different customers and so as instances launch and terminate they get smeared across this internal IP space and there",
    "start": "202840",
    "end": "210239"
  },
  {
    "text": "there's no grouping mechanism there so when you try and connect to a customer's",
    "start": "210239",
    "end": "215480"
  },
  {
    "start": "212000",
    "end": "348000"
  },
  {
    "text": "data center let's say this customer has chosen to number their data center out of 192168",
    "start": "215480",
    "end": "221400"
  },
  {
    "text": "0016 and this is a decision that they made for reasons that made sense to them they made this decision years ago when",
    "start": "221400",
    "end": "227480"
  },
  {
    "text": "the building was built perhaps before AWS was even invented and there's absolutely nothing wrong with that",
    "start": "227480",
    "end": "234640"
  },
  {
    "text": "decision they've got a router most networks have routers on them the router has a routing table",
    "start": "234640",
    "end": "240280"
  },
  {
    "text": "and that routing table has an entry for that data Center's IP block that says that stays",
    "start": "240280",
    "end": "245680"
  },
  {
    "text": "here so as we launch instances we need to inform that router in the customer data center how to get to the instances",
    "start": "245680",
    "end": "252519"
  },
  {
    "text": "so as we launch instances we have to add entries to that customer's routing table",
    "start": "252519",
    "end": "257840"
  },
  {
    "text": "and we have to add sl32 host routes because the neighboring IP address may be owned by a different customer and so",
    "start": "257840",
    "end": "264240"
  },
  {
    "text": "as we launch instances we continue to add entries to the routing table this isn't the way that networks normally",
    "start": "264240",
    "end": "271960"
  },
  {
    "text": "work as we delete instances as we terminate instances we have to remove the routing entries because that IP",
    "start": "271960",
    "end": "278919"
  },
  {
    "text": "address could be handed to another customer when they launch an instance and so now rather than a Network that",
    "start": "278919",
    "end": "284479"
  },
  {
    "text": "has routing table updates at the rate at which administrators make changes and at the rate at which links change State we",
    "start": "284479",
    "end": "291400"
  },
  {
    "text": "have a Network that has State changes has routing table updates at the rate at which instances are launched and",
    "start": "291400",
    "end": "296840"
  },
  {
    "text": "terminated this is very high velocity we've got a slightly bigger problem",
    "start": "296840",
    "end": "303800"
  },
  {
    "text": "though what if years ago this customer happens to have chosen",
    "start": "303800",
    "end": "309080"
  },
  {
    "text": "10446 perfectly reasonable decision the cloud didn't exist at the time but now we have a conflict and there's",
    "start": "309080",
    "end": "315160"
  },
  {
    "text": "absolutely nothing that we can put in that routing table that makes sense there could be a 10441 12.4 in the cloud",
    "start": "315160",
    "end": "321960"
  },
  {
    "text": "and a 10441 12.4 in the customer Data Center and that's just a miserable place to be uh you can do things like double",
    "start": "321960",
    "end": "329360"
  },
  {
    "text": "NP but anyone that's actually lived in a network with double will tell you you don't want to live in a network with",
    "start": "329360",
    "end": "335319"
  },
  {
    "text": "double so we need to figure out how to solve this High Velocity routing table update",
    "start": "335319",
    "end": "341000"
  },
  {
    "text": "problem and there's no single IP block that we can choose that's guaranteed not to overlap with any of our customers and",
    "start": "341000",
    "end": "348199"
  },
  {
    "start": "348000",
    "end": "434000"
  },
  {
    "text": "so if we're going to build VPC customers have to be able to bring",
    "start": "348199",
    "end": "353400"
  },
  {
    "text": "their own IP blocks they have to be able to pick the IP range that makes sense for them there's nothing that we're going to be able to do to solve this",
    "start": "353400",
    "end": "359039"
  },
  {
    "text": "problem Universal L we have to enable each customer to solve it for themselves we need to aggregate routes",
    "start": "359039",
    "end": "366120"
  },
  {
    "text": "we need to make it so that the rate of change in the state tables on the traditional routers outside of the cloud",
    "start": "366120",
    "end": "372639"
  },
  {
    "text": "is something reasonable it's something that approximates the right of change that they would have had if they were connecting just to another Data",
    "start": "372639",
    "end": "378599"
  },
  {
    "text": "Center and we need to conform with existing Network designs and what I mean there is we had an early customer and",
    "start": "378599",
    "end": "385280"
  },
  {
    "text": "this customer who I may or may not currently be employed by had host manag tools that assumed that all networks",
    "start": "385280",
    "end": "391120"
  },
  {
    "text": "were SL 24s some software developer years ago was told we need a database of all our hosts he looked at the way we built data",
    "start": "391120",
    "end": "397560"
  },
  {
    "text": "centers all the networks were SL 24s he went and he built so we got a request from this customer that they needed sl24",
    "start": "397560",
    "end": "404400"
  },
  {
    "text": "networks and could we please support this and how long would it be until we could support sl24 networks and the",
    "start": "404400",
    "end": "410039"
  },
  {
    "text": "answer was it's one API call go do it yourselves and so if Amazon has these problems surely our other customers are",
    "start": "410039",
    "end": "416440"
  },
  {
    "text": "going to have these problems they're going to have assumptions about how they've been building Network for years outside of the cloud and it's easier to",
    "start": "416440",
    "end": "422280"
  },
  {
    "text": "enable them to continue their Network design practices in the cloud than it is to make them all conform to the way we",
    "start": "422280",
    "end": "427840"
  },
  {
    "text": "think networks should be",
    "start": "427840",
    "end": "430720"
  },
  {
    "text": "built so that leads us to the customer presentation for virtual private Cloud",
    "start": "433759",
    "end": "440560"
  },
  {
    "start": "434000",
    "end": "494000"
  },
  {
    "text": "customer declares a VPC they get to select the IP block that they're going to use for their VPC they get to pick",
    "start": "440560",
    "end": "446720"
  },
  {
    "text": "anything that doesn't conflict with what they're using already they bring up a VPN Gateway this is an",
    "start": "446720",
    "end": "452400"
  },
  {
    "text": "API call to us they tell us about the VPN device on their side we call it a customer Gateway",
    "start": "452400",
    "end": "459240"
  },
  {
    "text": "and then we bring up a VPN connection between the two and when bgp comes up they get one",
    "start": "459240",
    "end": "464599"
  },
  {
    "text": "route for the entire VPC added to their route table so as far as the router in the customer's data center is concerned",
    "start": "464599",
    "end": "470120"
  },
  {
    "text": "they're just connected to another router at the end of some Remote Link now the customer can declare",
    "start": "470120",
    "end": "476080"
  },
  {
    "text": "subnets assign cider blocks to them and as they launch and terminate instances",
    "start": "476080",
    "end": "481720"
  },
  {
    "text": "the routing table in the on-prem data center doesn't update at all so with",
    "start": "481720",
    "end": "486960"
  },
  {
    "text": "this product definition we've solved the high velocity routing table updates and we've solved the overlapping IP address",
    "start": "486960",
    "end": "493759"
  },
  {
    "text": "problem and you're all sitting out there saying uh I've seen this slide before like this",
    "start": "493759",
    "end": "500440"
  },
  {
    "start": "494000",
    "end": "620000"
  },
  {
    "text": "is just virtual networking this isn't anything revolutionary uh you can take",
    "start": "500440",
    "end": "505680"
  },
  {
    "text": "an ethernet switch you can apply vlans to it vlans and subnets you just you just used a different name for the same",
    "start": "505680",
    "end": "512640"
  },
  {
    "text": "thing a lot of routers for a long time has supported vrfs virtual routing and forwarding instances so you take the the",
    "start": "512640",
    "end": "518360"
  },
  {
    "text": "monolithic routing table in the the router and you just chop it up into multiple instances so you just take this",
    "start": "518360",
    "end": "524480"
  },
  {
    "text": "this physical Network that you already have and you ask it to make virtual copies of itself the problem is that what we're",
    "start": "524480",
    "end": "531760"
  },
  {
    "text": "talking about here is far outside of the design envelope for these devices it looks the same when you're considering",
    "start": "531760",
    "end": "537360"
  },
  {
    "text": "One customer but when you look at it at Cloud scale it's a fundamentally different problem and so the complexity",
    "start": "537360",
    "end": "544480"
  },
  {
    "text": "of the configuration on these devices and the testing envelope that the vendors have don't line up with what",
    "start": "544480",
    "end": "550160"
  },
  {
    "text": "we're trying to do so for example the VLAN header the 802.1q VLAN header uses",
    "start": "550160",
    "end": "556399"
  },
  {
    "text": "a 12-bit identifier for vlans due to the 12th is",
    "start": "556399",
    "end": "560920"
  },
  {
    "text": "496 most of the routers some of them claim up to about 4,000 vrfs but in",
    "start": "561480",
    "end": "567560"
  },
  {
    "text": "reality when you dig in they've only been tested to 1 to 2,000 uh thousand sounds pretty good",
    "start": "567560",
    "end": "573800"
  },
  {
    "text": "unless you've got hundreds of thousands of customers and you're looking to the Future um and they've tested to one or",
    "start": "573800",
    "end": "582360"
  },
  {
    "text": "2000 but they probably haven't tested with the the level of load that we're talking about the rate of configuration",
    "start": "582360",
    "end": "588240"
  },
  {
    "text": "change and these vendors have a name for customers that are the first to use a",
    "start": "588240",
    "end": "593880"
  },
  {
    "text": "particular piece of functionality in production they call them beta testers and that's not where we want to",
    "start": "593880",
    "end": "601600"
  },
  {
    "text": "be plus I've got a fixed ratio of vlans to vrfs these are both constrained",
    "start": "601600",
    "end": "607600"
  },
  {
    "text": "resources and now I'm going to run out of one or the other of them first stranding",
    "start": "607600",
    "end": "614480"
  },
  {
    "text": "capacity but as we dig in this gets even",
    "start": "614519",
    "end": "619720"
  },
  {
    "text": "tougher we're talking about big routers here you've seen pictures of them they're these monstrous boxes they take",
    "start": "619839",
    "end": "625480"
  },
  {
    "start": "620000",
    "end": "699000"
  },
  {
    "text": "half a rack or a rack tens of kilowatts of power they're rated in hundred hundreds of ports and terabits of",
    "start": "625480",
    "end": "630880"
  },
  {
    "text": "throughput and they really are massive monstrous boxes but when we're talking about that we're talking about the data",
    "start": "630880",
    "end": "636639"
  },
  {
    "text": "plane of the router we're talking about the fast path through the device this is where the as6 are this is where all of",
    "start": "636639",
    "end": "642120"
  },
  {
    "text": "the the clever shared memory buses are this is where the expensive Hardware is",
    "start": "642120",
    "end": "647560"
  },
  {
    "text": "but inside the router there's also a control plane and in many cases these control planes are less powerful than",
    "start": "647560",
    "end": "652920"
  },
  {
    "text": "the laptop I'm using to give this presentation they cost a lot more but they're less powerful and there's",
    "start": "652920",
    "end": "658399"
  },
  {
    "text": "constrained bandwidth between the control plane and the data plane and the control plane is where the operating system of the router runs this is where",
    "start": "658399",
    "end": "664839"
  },
  {
    "text": "your command prompt is this is where all of the routing protocols run and so the things that we're talking about doing",
    "start": "664839",
    "end": "670680"
  },
  {
    "text": "here we're talking about supporting thousands of instances of routing protocols and updating all of this configuration data we're putting stress",
    "start": "670680",
    "end": "677360"
  },
  {
    "text": "on the lightweight control plane we're not putting stress on that heavyweight data plane and of course we want our",
    "start": "677360",
    "end": "684240"
  },
  {
    "text": "customers to have a good day in the cloud so we're going to buy these things in pairs and we're going to bring up some sort of availab ility protocol",
    "start": "684240",
    "end": "690120"
  },
  {
    "text": "between them and that availability protocol runs between the control planes we're placing yet more stress on that",
    "start": "690120",
    "end": "696440"
  },
  {
    "text": "constrained resource so an example of how this capacity allocation uh problem can play",
    "start": "696440",
    "end": "704040"
  },
  {
    "start": "699000",
    "end": "777000"
  },
  {
    "text": "out these routers are configured with text files if we say the average router",
    "start": "704040",
    "end": "709480"
  },
  {
    "text": "configuration line is about 50 characters it takes us about 10 lines to describe a",
    "start": "709480",
    "end": "714880"
  },
  {
    "text": "VPC on average customers are using four subnets in every VPC in order to describe a subnet we need",
    "start": "714880",
    "end": "721560"
  },
  {
    "text": "five lines of configuration so we've got 2,000 customers on this device you multiply everything through we're",
    "start": "721560",
    "end": "727920"
  },
  {
    "text": "loading up a 3 megabyte config file into this device most routers don't swallow 3",
    "start": "727920",
    "end": "733959"
  },
  {
    "text": "megabyte config files well I'm sure someone out there has done the math and figured out that I just allocated 8,000",
    "start": "733959",
    "end": "739880"
  },
  {
    "text": "vlans and I just said you can only do 4,000 uh we actually prototype this in the lab these are round numbers to make",
    "start": "739880",
    "end": "745440"
  },
  {
    "text": "the slides look pretty uh we were regularly loading config files much larger than this into devices and in",
    "start": "745440",
    "end": "751639"
  },
  {
    "text": "several cases it took the devices 5 minutes to parse the configuration so you hit return and it's 5 minutes before",
    "start": "751639",
    "end": "758519"
  },
  {
    "text": "you get the prompt back it doesn't mean the configuration has actually been programmed into the data plane it just means that the configuration has been",
    "start": "758519",
    "end": "764320"
  },
  {
    "text": "parsed and accepted by the device that that's an indication that you're exiting from the the common use cases and you're",
    "start": "764320",
    "end": "771720"
  },
  {
    "text": "off in in a very scary land",
    "start": "771720",
    "end": "777240"
  },
  {
    "start": "777000",
    "end": "888000"
  },
  {
    "text": "dragons uh router are just computers they have strange expensive Hardware you",
    "start": "777240",
    "end": "782839"
  },
  {
    "text": "buy the software and the hardware from the same vendor but it's just software they're human beings writing the code and they suffer from all of the problems",
    "start": "782839",
    "end": "789480"
  },
  {
    "text": "that computers have uh and they they have assumptions in the testing that they do they know how their customers",
    "start": "789480",
    "end": "795680"
  },
  {
    "text": "are using the devices and they test those cases they don't necessarily know how their customers are going to use the devices so one problem we ran into is we",
    "start": "795680",
    "end": "803160"
  },
  {
    "text": "had a router vendor that was storing internal data structures in a link list and if you have six instances of of some",
    "start": "803160",
    "end": "809519"
  },
  {
    "text": "object traversing a link list of length six who cares if you have 4,000",
    "start": "809519",
    "end": "814800"
  },
  {
    "text": "instances of some object and every time you have to do something you have to do an exhaustive search of a link list of",
    "start": "814800",
    "end": "819839"
  },
  {
    "text": "length 4,000 all of a sudden the control plane tiny little stressed control plane isn't happy uh another problem that we",
    "start": "819839",
    "end": "827120"
  },
  {
    "text": "had is we had a router vendor and as far as we can tell this is a bug that that dates back to very early versions of",
    "start": "827120",
    "end": "833480"
  },
  {
    "text": "their control plane code uh it would leak memory every time you committed the configuration most routers they get",
    "start": "833480",
    "end": "840480"
  },
  {
    "text": "stood up a network engineer logs into them they play with them for a couple hours or a couple of days and then configuration events on the router are",
    "start": "840480",
    "end": "846800"
  },
  {
    "text": "very infrequent and with our routers configuration updates are tied to customer API calls customers create and",
    "start": "846800",
    "end": "853120"
  },
  {
    "text": "delete vpcs subnets change things around we have to push configuration to the routers to reflect that so we have a",
    "start": "853120",
    "end": "859320"
  },
  {
    "text": "dramatically higher orders of magnitude higher configuration velocity and so every time you commit the config the",
    "start": "859320",
    "end": "865079"
  },
  {
    "text": "router leaks a couple words of memory uh we could reliably crash these things in a couple of hours just by pounding",
    "start": "865079",
    "end": "871720"
  },
  {
    "text": "config updates to them this is a problem that didn't affect any of their other customers because no one else was using the devices in this",
    "start": "871720",
    "end": "879160"
  },
  {
    "text": "way I'm convinced maybe the router has a faster control plane than this",
    "start": "881079",
    "end": "887639"
  },
  {
    "start": "888000",
    "end": "1071000"
  },
  {
    "text": "laptop horizontal scaling is a a time honored design pattern in large scale systems it's one that we use all the",
    "start": "888199",
    "end": "894639"
  },
  {
    "text": "time um these numbers are artificially low I tried to use larger numbers the slides got too noisy but it's it's meant",
    "start": "894639",
    "end": "901440"
  },
  {
    "text": "to be a representative example uh so we've got uh two silos here we've got two stacks each of them can support four",
    "start": "901440",
    "end": "908399"
  },
  {
    "text": "customers on the routers and the routers have enough Network ports and capacity to drive 40 instances worth of",
    "start": "908399",
    "end": "915120"
  },
  {
    "text": "ec2 so I have a customer show up I put them in the left stack makes",
    "start": "915120",
    "end": "920759"
  },
  {
    "text": "sense another customer B shows up I put them in the right stack there's all sorts of interesting uh placement",
    "start": "920759",
    "end": "927000"
  },
  {
    "text": "algorithms you can apply here first fit best fit um it's it's an interesting optimization problem but we're not going",
    "start": "927000",
    "end": "933279"
  },
  {
    "text": "to go there another customer C shows up I put them on the left stack I'm starting to consume my my router and my",
    "start": "933279",
    "end": "940160"
  },
  {
    "text": "instance capacity nice big customer D shows up a launches a few more instances",
    "start": "940160",
    "end": "946440"
  },
  {
    "text": "and then we have customer e and customer e looks like a tiny little customer but",
    "start": "946440",
    "end": "951959"
  },
  {
    "text": "it turns out that customer e is actually insanely important to us the reason is that this is the getting started guide",
    "start": "951959",
    "end": "957880"
  },
  {
    "text": "this is a customer running one T1 micro and every single one of our customers was once a firsttime customer we need",
    "start": "957880",
    "end": "964800"
  },
  {
    "text": "that simple onramp we have a lot of customers that are just getting started and so we need to make sure that we",
    "start": "964800",
    "end": "970120"
  },
  {
    "text": "support this use case really well and this one instance one T1 Micro customer just took up an entire slot on one of my",
    "start": "970120",
    "end": "977759"
  },
  {
    "text": "routers so we keep going customer F launches and this this",
    "start": "977759",
    "end": "983120"
  },
  {
    "text": "was an Enterprise they' been planning a large migration so they consumed a bunch of capacity and then customer G I've",
    "start": "983120",
    "end": "990639"
  },
  {
    "text": "exhausted my router capacity on that left stack I can sell my remaining 25",
    "start": "990639",
    "end": "996680"
  },
  {
    "text": "instances worth of capacity to those four customers but I can't sell it to anyone else if they scale up I can make",
    "start": "996680",
    "end": "1002199"
  },
  {
    "text": "use of it but if they don't scale up that capacity is stranded that's going to drive lower utilization which is",
    "start": "1002199",
    "end": "1008240"
  },
  {
    "text": "going to drive higher prices and even if you hit something like 90% utilization that's an 11% price increase",
    "start": "1008240",
    "end": "1015560"
  },
  {
    "text": "that's that's not what we want to do but even worse turns out that customer B is",
    "start": "1015560",
    "end": "1021120"
  },
  {
    "text": "some social media application and they just went viral and they have the massive scaling event I'm out of",
    "start": "1021120",
    "end": "1027038"
  },
  {
    "text": "instance capacity on the right stack I can hide the fact that I'm out of router capacity on the left stack from my",
    "start": "1027039",
    "end": "1032880"
  },
  {
    "text": "customers I can't hide the fact that I'm out of instance capacity on the right stack I have to expose this to the",
    "start": "1032880",
    "end": "1038160"
  },
  {
    "text": "customer they have to go create another subnet another VPC this is this is a terrible customer experience and as",
    "start": "1038160",
    "end": "1044760"
  },
  {
    "text": "you've been seeing throughout this conference we have customers who have scaling events in the thousands of tens of thousands of instances that's a",
    "start": "1044760",
    "end": "1051240"
  },
  {
    "text": "massive slush fund to have available in each of these Stacks um so this this",
    "start": "1051240",
    "end": "1056480"
  },
  {
    "text": "this is a very difficult way to build the the network we're basically playing",
    "start": "1056480",
    "end": "1062600"
  },
  {
    "text": "Tetris with pieces that can change size and shape at any",
    "start": "1062600",
    "end": "1068120"
  },
  {
    "start": "1071000",
    "end": "1105000"
  },
  {
    "text": "time so we talked about a couple of product requirements let's talk about how we're",
    "start": "1071080",
    "end": "1076520"
  },
  {
    "text": "going to build this this is literally one of the requirements that we put on the table when we went down this path if",
    "start": "1076520",
    "end": "1082080"
  },
  {
    "text": "we're going to build this we have to be able to host millions of customers the size of",
    "start": "1082080",
    "end": "1087360"
  },
  {
    "text": "Amazon and we must not place any new constraints on the placement problem we have different instance types some of",
    "start": "1087760",
    "end": "1093720"
  },
  {
    "text": "them have faster Network slower networks gpus different ratios of CPU and memory the placement problem is already a",
    "start": "1093720",
    "end": "1099640"
  },
  {
    "text": "challenging problem the network must not add any new constraints to",
    "start": "1099640",
    "end": "1105559"
  },
  {
    "start": "1105000",
    "end": "1377000"
  },
  {
    "text": "it so let's talk about the the building blocks that we actually used for",
    "start": "1105640",
    "end": "1111280"
  },
  {
    "text": "VPC Amazon has data centers full of physical servers someone has to own the sheet",
    "start": "1111280",
    "end": "1117360"
  },
  {
    "text": "metal on those servers we host customer instances those instances are grouped",
    "start": "1117360",
    "end": "1123400"
  },
  {
    "text": "together into vpcs those instances host or those",
    "start": "1123400",
    "end": "1130320"
  },
  {
    "text": "servers host instances belonging to multiple vpcs um our apis we use uh heximal",
    "start": "1130320",
    "end": "1137080"
  },
  {
    "text": "identifiers but in the I'm going to use color because it's easier and one piece that our customers",
    "start": "1137080",
    "end": "1144360"
  },
  {
    "text": "can't see from the outside is the mapping service the mapping service is the Lynch pin around which the entire",
    "start": "1144360",
    "end": "1149760"
  },
  {
    "text": "network revolves uh it's really a very cool distributed system",
    "start": "1149760",
    "end": "1155600"
  },
  {
    "text": "um so let's go back to the dark days physical ethernet switch this is how",
    "start": "1155600",
    "end": "1162640"
  },
  {
    "text": "it's been done for decades in my house in data centers around the world if 102",
    "start": "1162640",
    "end": "1168760"
  },
  {
    "text": "wants to talk to 103 it's going to send an AR request the destination layer 2 destination is going to be an L2",
    "start": "1168760",
    "end": "1175320"
  },
  {
    "text": "broadcast uh I'm using this Mac of IP address notation to make the slides friendlier uh mentally you can",
    "start": "1175320",
    "end": "1181600"
  },
  {
    "text": "substitute any 40 bit 8 bit number of your choice so the switch we'll assume it's",
    "start": "1181600",
    "end": "1187919"
  },
  {
    "text": "freshly booted it doesn't know anything it's going to flood that ARP request out all ports one of those ports necessarily",
    "start": "1187919",
    "end": "1193840"
  },
  {
    "text": "is going to be the host to which 10 the port to which 103 is connected 10 three",
    "start": "1193840",
    "end": "1198880"
  },
  {
    "text": "is going to say yep that's me the switch is going to Snoop that ARP response the switch is going to learn",
    "start": "1198880",
    "end": "1205159"
  },
  {
    "text": "the Mac to Port mapping and so now 102 can send his packet with whatever layer",
    "start": "1205159",
    "end": "1211480"
  },
  {
    "text": "three and layer four uh payload he wants so the way that works in",
    "start": "1211480",
    "end": "1219200"
  },
  {
    "text": "VPC is our guest sends exactly the same art packet to run in VPC requires",
    "start": "1220720",
    "end": "1227320"
  },
  {
    "text": "exactly zero Chang to the guest's IP stack ethernet it is",
    "start": "1227320",
    "end": "1232600"
  },
  {
    "text": "bone standard from the guest's perspective we trap that packet and the server sends a query to",
    "start": "1232600",
    "end": "1239840"
  },
  {
    "text": "the mapping surface and hey I'm 1921 16803 I've got a query on behalf of an",
    "start": "1239840",
    "end": "1245400"
  },
  {
    "text": "orange guest for 103 the mapping service is okay hands us back both the physical mapping 103 is",
    "start": "1245400",
    "end": "1252640"
  },
  {
    "text": "located on 1921 16814 in the lower right corner there and the MAC address and so",
    "start": "1252640",
    "end": "1258320"
  },
  {
    "text": "we can can respond with an ARP response back to the guest so as far as 102 is concerned they just ared for their peer",
    "start": "1258320",
    "end": "1265640"
  },
  {
    "text": "and got a response so their ARP cach is hot they're ready to go uh one interesting thing worth noting 103 never",
    "start": "1265640",
    "end": "1272559"
  },
  {
    "text": "saw an ARP request it turns out that doesn't actually matter so again ethernet IP straight off",
    "start": "1272559",
    "end": "1280919"
  },
  {
    "text": "the OS DVD the guest forms their packet the layer two and layer three source and",
    "start": "1280919",
    "end": "1286120"
  },
  {
    "text": "destination both line up because this is an two flow within uh an L2 broadcast",
    "start": "1286120",
    "end": "1291240"
  },
  {
    "text": "domain we trap that packet we wrap it with a VPC header with in wrap it with a a physical",
    "start": "1291240",
    "end": "1298480"
  },
  {
    "text": "Network IP header and we send the packet directly across the physical Network to",
    "start": "1298480",
    "end": "1303760"
  },
  {
    "text": "the destination host on receipt 1921 16814 just got this packet",
    "start": "1303760",
    "end": "1311559"
  },
  {
    "text": "out of the blue it's like what the heck so it asks the mapping service I just got this packet uh from 1.4 claiming to",
    "start": "1311559",
    "end": "1318880"
  },
  {
    "text": "be on behalf of uh orange uh 1000002 is that kosher the mapping",
    "start": "1318880",
    "end": "1325320"
  },
  {
    "text": "service responds yeah actually orange 102 is indeed on that upper left server uh 0.3 so now that we've got validation",
    "start": "1325320",
    "end": "1333279"
  },
  {
    "text": "that this is a a kosher packet we deliver it on up to the guest so in",
    "start": "1333279",
    "end": "1338320"
  },
  {
    "text": "order for these two instances to communicate with each other the only requirement is that they have IP",
    "start": "1338320",
    "end": "1343840"
  },
  {
    "text": "connectivity between each other and that they'd be able to talk to the mapping service",
    "start": "1343840",
    "end": "1350159"
  },
  {
    "text": "so we're we're getting to that goal of any host in the region can host any instance in any subnet so I've shown",
    "start": "1350159",
    "end": "1357919"
  },
  {
    "text": "that two instances within a subnet can communicate and we're very good at building large IP networks we've got the",
    "start": "1357919",
    "end": "1363679"
  },
  {
    "text": "internet we know how to build IP networks that span the globe so this is this is a solved problem and it's a problem that our Network vendors solve",
    "start": "1363679",
    "end": "1369840"
  },
  {
    "text": "very well once that",
    "start": "1369840",
    "end": "1375080"
  },
  {
    "text": "so you're you're you're you're asking um whether the mapping service query happens in line with every packet that",
    "start": "1381120",
    "end": "1386919"
  },
  {
    "text": "is a complicated question with a complicated answer and I will go into that in future slides um the short answer is we do",
    "start": "1386919",
    "end": "1393919"
  },
  {
    "text": "cache mappings we're not pounding on the mapping service with every single packet transmit and receive um later yeah there",
    "start": "1393919",
    "end": "1401240"
  },
  {
    "text": "there are large distributed systems and then there are crazily large distributed systems and you want to avoid crazily",
    "start": "1401240",
    "end": "1406720"
  },
  {
    "text": "large um so the result here is that the layer 2 virtual topology is completely",
    "start": "1406720",
    "end": "1413480"
  },
  {
    "text": "decoupled from the physical topology I can place these guests anywhere in my data center I don't need large layer two",
    "start": "1413480",
    "end": "1419919"
  },
  {
    "text": "physical domains that span racks that span data centers so that reverse mapping on receipt is is interesting",
    "start": "1419919",
    "end": "1427120"
  },
  {
    "text": "let's dig into that a little",
    "start": "1427120",
    "end": "1430679"
  },
  {
    "text": "bit the simplest form of isolation that VPC offers is that we always interpret",
    "start": "1433279",
    "end": "1438880"
  },
  {
    "text": "packets sent by our guests in the context of their VPC so this is the",
    "start": "1438880",
    "end": "1444200"
  },
  {
    "text": "exact same ARP request that the orange guest would have sent modula the source IP address but the query that we send",
    "start": "1444200",
    "end": "1451679"
  },
  {
    "text": "out to the mapping service is for the gray VPC the guest physically can't cram",
    "start": "1451679",
    "end": "1459200"
  },
  {
    "text": "anything into that IP header that would cause it to address instances across VPC",
    "start": "1459200",
    "end": "1464360"
  },
  {
    "text": "boundaries they can put anything they want into that 32-bit field they can strobe across the entire ipv4 address",
    "start": "1464360",
    "end": "1470799"
  },
  {
    "text": "space and they can't hop across VPC",
    "start": "1470799",
    "end": "1475398"
  },
  {
    "text": "boundaries a slightly more complex example same ARP request but in this",
    "start": "1477440",
    "end": "1483200"
  },
  {
    "text": "case for whatever reason our query to the mapping service is corrupt rather than querying for the gray VPC we're",
    "start": "1483200",
    "end": "1490440"
  },
  {
    "text": "querying for the orange VPC this may do be due to a bug in our software a misconfiguration from one of our",
    "start": "1490440",
    "end": "1496679"
  },
  {
    "text": "operators or some malicious actor somewhere in the network the mapping service knows that",
    "start": "1496679",
    "end": "1503840"
  },
  {
    "text": "that server 192168 0.4 isn't hosting any guests in the VPC named orange so we're",
    "start": "1503840",
    "end": "1510840"
  },
  {
    "text": "going to deny that mapping and we're going to notify an operator and so even if this mapping",
    "start": "1510840",
    "end": "1518679"
  },
  {
    "text": "request comes out it's going to be denied if for some reason the misconfiguration the flaw in the system",
    "start": "1518679",
    "end": "1525279"
  },
  {
    "text": "is greater and we somehow have a valid mapping for that destination we can",
    "start": "1525279",
    "end": "1531520"
  },
  {
    "text": "perform the double wrapping we can send the packet across the physical network and on receipt we're going to perform a",
    "start": "1531520",
    "end": "1539159"
  },
  {
    "text": "validation check and unlike the previous flow this destination is going to",
    "start": "1539159",
    "end": "1545320"
  },
  {
    "text": "ask hey orange 104 is that there on 1921 16804 the mapping service is going to",
    "start": "1545320",
    "end": "1551720"
  },
  {
    "text": "say no we're going to drop this packet we're not going to deliver it to the instance",
    "start": "1551720",
    "end": "1557080"
  },
  {
    "text": "and again we're going to notify operator we're going to get a human involved and so in order for packets to flow all of",
    "start": "1557080",
    "end": "1563880"
  },
  {
    "text": "the parties involved in the flow have to agree on the configuration of the network The Source the destination and",
    "start": "1563880",
    "end": "1569159"
  },
  {
    "text": "the mapping service all have to be in",
    "start": "1569159",
    "end": "1573159"
  },
  {
    "start": "1573000",
    "end": "1665000"
  },
  {
    "text": "agreement uh that's complicated and I don't go into how the mapping service",
    "start": "1578520",
    "end": "1584200"
  },
  {
    "text": "authenticates um this talk has to fit in an hour and",
    "start": "1584200",
    "end": "1590240"
  },
  {
    "text": "and so back to the physical Network layer three forwarding this is how it's been",
    "start": "1590760",
    "end": "1598559"
  },
  {
    "text": "done for years in data centers around the world I'm assuming sl24 net masks and I've all lighted a whole bunch of",
    "start": "1598559",
    "end": "1603760"
  },
  {
    "text": "stuffs uh steps because watching people ARP for their peers is boring um so 102",
    "start": "1603760",
    "end": "1610399"
  },
  {
    "text": "wants to talk to 1013 now we're going across subnet boundaries we're going to talk through a router uh so we're going",
    "start": "1610399",
    "end": "1615720"
  },
  {
    "text": "to ARP uh and in this case we're not arping for our eventual destination we're arping for our Gateway and the",
    "start": "1615720",
    "end": "1621840"
  },
  {
    "text": "exact same ARP dance happens floods the router responds and we now learn the MAC address of uh 10",
    "start": "1621840",
    "end": "1628000"
  },
  {
    "text": "0001 so now when we send the packet the layer two and layer three sources line",
    "start": "1628000",
    "end": "1634360"
  },
  {
    "text": "up but the layer 2 destination is the router and the layer three destination is our eventual end host because",
    "start": "1634360",
    "end": "1639720"
  },
  {
    "text": "ethernet switches forward packets based solely on their Mac addresses they don't look past that so the layer three the layer 2",
    "start": "1639720",
    "end": "1646760"
  },
  {
    "text": "switch knows how to forward to the router now the router takes this packet it swaps out the Mac addresses so the",
    "start": "1646760",
    "end": "1652880"
  },
  {
    "text": "packet that hits the right ethernet switch has a layer two source of the router interface in that",
    "start": "1652880",
    "end": "1658039"
  },
  {
    "text": "subnet as a layer two destination of the end host and so now we can deliver this",
    "start": "1658039",
    "end": "1663200"
  },
  {
    "text": "packet on to the end host so again how do we do this in",
    "start": "1663200",
    "end": "1669279"
  },
  {
    "text": "VPC the exact same ARP request that we would have done in the physical Network we query the mapping service and",
    "start": "1669279",
    "end": "1675919"
  },
  {
    "text": "in this case the mapping service responds and it tells us here's a MAC address for you you can go uh format an",
    "start": "1675919",
    "end": "1681600"
  },
  {
    "text": "AR response to your guest but this host isn't actually hosted anywhere this this isn't a guest it's a Gateway so we note",
    "start": "1681600",
    "end": "1687880"
  },
  {
    "text": "that we cach that mapping and we send the ARP response back to the guest so now the guest formats their",
    "start": "1687880",
    "end": "1695840"
  },
  {
    "text": "packet it's exactly the same packet they would have sent in the physical Network we do a secondary lookup we take",
    "start": "1695840",
    "end": "1703159"
  },
  {
    "text": "that guest's packet we put it aside in a queue and we send a query to the mapping service not for the layer two",
    "start": "1703159",
    "end": "1709080"
  },
  {
    "text": "destination but for the layer three destination we do a secondary lookup at the mapping service mapping service",
    "start": "1709080",
    "end": "1714840"
  },
  {
    "text": "gives us a mapping ens the the standard response includes a MAC address which isn't meaningful in this context um but",
    "start": "1714840",
    "end": "1721880"
  },
  {
    "text": "we also have the the physical destination so now we take that guest packet off of the que perform exactly",
    "start": "1721880",
    "end": "1728640"
  },
  {
    "text": "the same double wrapping and send it directly across the physical Network to the destination host the exact same",
    "start": "1728640",
    "end": "1735399"
  },
  {
    "text": "reverse mapping happens the destination knows that this is a packet from off subnet so it",
    "start": "1735399",
    "end": "1741519"
  },
  {
    "text": "performs all of the Mac swapping necessary and delivers the packet on to",
    "start": "1741519",
    "end": "1746880"
  },
  {
    "text": "the destination guest so as far as these two guests are concerned they're connected in different subnets across a",
    "start": "1746880",
    "end": "1753240"
  },
  {
    "text": "layer three router but the forwarding path for Layer Three is identical to the forwarding path for Layer Two the",
    "start": "1753240",
    "end": "1760240"
  },
  {
    "text": "traditional way for performing layer 3 forwarding is you drag your packets up to some layer 3 device the layer 3",
    "start": "1760240",
    "end": "1766000"
  },
  {
    "text": "device performs layer 3 functionality and then you send the packets on to the end destination we don't do that the",
    "start": "1766000",
    "end": "1773279"
  },
  {
    "text": "robustness of layer three flows is exactly identical to the robustness of Layer Two flows even though these two",
    "start": "1773279",
    "end": "1779320"
  },
  {
    "text": "guests are on different subnets as long as the source server and the destination",
    "start": "1779320",
    "end": "1784679"
  },
  {
    "text": "server are both online and can talk to each other and can talk to the mapping service they can exchange packets across",
    "start": "1784679",
    "end": "1790279"
  },
  {
    "text": "the router the VPC router is not a single point of failure and it has an",
    "start": "1790279",
    "end": "1795720"
  },
  {
    "text": "interesting property the more you plug into it the faster it gets it is a",
    "start": "1795720",
    "end": "1800799"
  },
  {
    "text": "router of infinite capacity because it doesn't have a central point of",
    "start": "1800799",
    "end": "1806240"
  },
  {
    "text": "implementation so this meets our goal we've now described how layer 2 and layer three uh flows work in a way that",
    "start": "1806240",
    "end": "1815039"
  },
  {
    "text": "is completely decoupled from the physical topology underneath the virtual topology so now customers are free to",
    "start": "1815039",
    "end": "1821519"
  },
  {
    "text": "lay out their networks however they see fit using whatever addressing scheme",
    "start": "1821519",
    "end": "1827480"
  },
  {
    "text": "they have and our compute team is free to place those instances however is optimal to",
    "start": "1827480",
    "end": "1833240"
  },
  {
    "text": "them and the network doesn't place any additional constraints on it I'm not claiming that this system is",
    "start": "1833240",
    "end": "1839440"
  },
  {
    "text": "without scaling limits but we've treated our entire capacity pool is a single pool I haven't",
    "start": "1839440",
    "end": "1846279"
  },
  {
    "text": "fragmented capacity in separate silos those silos aren't actually horizontal scaling when you've got an array of web",
    "start": "1846279",
    "end": "1852320"
  },
  {
    "text": "servers each of the web servers is fungible a request can come into any of the web servers and they can all answer",
    "start": "1852320",
    "end": "1859480"
  },
  {
    "text": "when I have a customer launching an instance I have to launch them in The Silo that has their router so it's not actually horizontal scaling and so by",
    "start": "1859480",
    "end": "1866760"
  },
  {
    "text": "treating all of the capacity as a single pool I've managed to drive my utilization to exactly the same levels",
    "start": "1866760",
    "end": "1873039"
  },
  {
    "text": "that I had in E2 so I was asked earlier about",
    "start": "1873039",
    "end": "1880799"
  },
  {
    "start": "1875000",
    "end": "2001000"
  },
  {
    "text": "caching I said something really scary here when the customer sends a packet that's across a layer three boundary we",
    "start": "1880799",
    "end": "1887039"
  },
  {
    "text": "queue it queuing packets is scary because you now",
    "start": "1887039",
    "end": "1892960"
  },
  {
    "text": "have a bounded resource you've got some Cube based in memory that is driven by customer Behavior that's outside of our",
    "start": "1892960",
    "end": "1899440"
  },
  {
    "text": "control so one we're going to have latency Jetter packets that need to be queued are going to have higher latency",
    "start": "1899440",
    "end": "1905480"
  },
  {
    "text": "across the network than packets that don't need to be queed and two I've got this que and I'm going into debt I have",
    "start": "1905480",
    "end": "1911480"
  },
  {
    "text": "to make sure that the guest can't send packets into the queue faster than I can resolve them at the mapping service and",
    "start": "1911480",
    "end": "1917120"
  },
  {
    "text": "get them out of the queue and because the guest is talking to the queue local to the box and the mapping service is an offbox call that's that's",
    "start": "1917120",
    "end": "1923880"
  },
  {
    "text": "a a dangerous place to be and so what we actually do is we run a little mapping",
    "start": "1923880",
    "end": "1930399"
  },
  {
    "text": "service replica on each of our physical servers and they're constantly pulling the central mapping",
    "start": "1930399",
    "end": "1936639"
  },
  {
    "text": "service the end behavior of the system is exactly as I've described um the",
    "start": "1936639",
    "end": "1942120"
  },
  {
    "text": "mapping service organizes virtual Network information into topics and it",
    "start": "1942120",
    "end": "1947159"
  },
  {
    "text": "knows where every every single resource in the network is placed and so if a physical server attempts to subscribe to",
    "start": "1947159",
    "end": "1953360"
  },
  {
    "text": "a topic for example if 1921 16804 attempts to subscribe to the blue topic",
    "start": "1953360",
    "end": "1959639"
  },
  {
    "text": "or to the orange topic we know that's an error and we fire exactly the same alarm we would have fired in the inline query",
    "start": "1959639",
    "end": "1966519"
  },
  {
    "text": "case so we still have all of the same alarming in place but in practice we have 100% cash hit",
    "start": "1966519",
    "end": "1972679"
  },
  {
    "text": "ratio the physical server has all of the mappings that it needs for all of its packet translations for all of its peers",
    "start": "1972679",
    "end": "1978960"
  },
  {
    "text": "at all times and so we don't have to rely on timeouts or ttls or anything",
    "start": "1978960",
    "end": "1984039"
  },
  {
    "text": "like that these caches are actively managed and the mapping service is constantly pushing down Network updates",
    "start": "1984039",
    "end": "1989279"
  },
  {
    "text": "and so we can very rapidly and consistently push out configuration changes to the entire network uh with uh",
    "start": "1989279",
    "end": "1995799"
  },
  {
    "text": "with our administrative",
    "start": "1995799",
    "end": "1998638"
  },
  {
    "text": "tools so because of this implementation because I'm not",
    "start": "2000960",
    "end": "2006760"
  },
  {
    "text": "allocating a slice of a Virtual Router to a customer we don't charge for vpcs you",
    "start": "2006760",
    "end": "2014720"
  },
  {
    "text": "can create a VPC you can leave it sitting there with no instances running it costs you nothing you can leave it",
    "start": "2014720",
    "end": "2019799"
  },
  {
    "text": "sitting there with instances running it costs you nothing we don't charge for subnets rather than having 4,096 or",
    "start": "2019799",
    "end": "2027600"
  },
  {
    "text": "however many it is that my switches support and having to say this is a constrained resource and I want people",
    "start": "2027600",
    "end": "2032720"
  },
  {
    "text": "to be able to use them but I want to minimize how many of them they have to use because the way we've implemented",
    "start": "2032720",
    "end": "2038760"
  },
  {
    "text": "subnets you can have as many of them as you can cram into the CER block of your",
    "start": "2038760",
    "end": "2043880"
  },
  {
    "text": "VPC and because of the way the virtual network is implemented because we haven't made our packet flows any more",
    "start": "2043880",
    "end": "2050280"
  },
  {
    "text": "expensive the cost for instances and the cost for traffic within the VPC is exactly the same as the cost for ec2",
    "start": "2050280",
    "end": "2058760"
  },
  {
    "text": "Classic this has an unfortunate side effect uh we have a tradition of dropping prices in",
    "start": "2058760",
    "end": "2066480"
  },
  {
    "text": "AWS and unfortunately I don't think we'll ever drop price on",
    "start": "2066480",
    "end": "2072240"
  },
  {
    "start": "2073000",
    "end": "2125000"
  },
  {
    "text": "VPC this is a a slide I stole from Laura grits talk that I mentioned earlier",
    "start": "2073480",
    "end": "2079240"
  },
  {
    "text": "November 10th 2010 is the day we turned off the last physical web server in North American retail so if you've",
    "start": "2079240",
    "end": "2087200"
  },
  {
    "text": "browsed amazon.com since November 10th 2010 the page you saw was rendered by an",
    "start": "2087200",
    "end": "2093358"
  },
  {
    "text": "instance running in a VPC we follow the the industry we we track the academic papers there's a ton",
    "start": "2093359",
    "end": "2100200"
  },
  {
    "text": "of interesting research in this space but this is not this is not a research",
    "start": "2100200",
    "end": "2105560"
  },
  {
    "text": "project for us this isn't a a science project that we're we're producing very prety formatted Tech",
    "start": "2105560",
    "end": "2111800"
  },
  {
    "text": "documents this is this is a robust mature product this is going to be the fourth year that we carry the holiday",
    "start": "2111800",
    "end": "2117920"
  },
  {
    "text": "Peak for amazon.com so this is this is a major line of business for us this is",
    "start": "2117920",
    "end": "2123359"
  },
  {
    "text": "something we've been doing for a long time so far in this",
    "start": "2123359",
    "end": "2129680"
  },
  {
    "text": "talk the only thing I've talked about is ec2 instances but the slide that I",
    "start": "2129680",
    "end": "2135079"
  },
  {
    "text": "opened the talk with showed all of our other services so over time we've been adding",
    "start": "2135079",
    "end": "2141359"
  },
  {
    "text": "more services you have your VPC you can launch your instances but now you can launch RDS databases you can launch",
    "start": "2141359",
    "end": "2147599"
  },
  {
    "text": "redshift clusters and they're all connected to your VPC Verner touched on this in his keynote and so now you can",
    "start": "2147599",
    "end": "2153760"
  },
  {
    "text": "bring these other services inside of your perimeter now your client sitting in your on-prem database can connect",
    "start": "2153760",
    "end": "2159720"
  },
  {
    "text": "directly to your red shift cluster without having to go out over the internet now you have access to internal",
    "start": "2159720",
    "end": "2165040"
  },
  {
    "text": "data sources and all of your existing bi tools can connect directly and so we're",
    "start": "2165040",
    "end": "2170560"
  },
  {
    "text": "we're looking at VPC not as a way of connecting ec2 instances together but is",
    "start": "2170560",
    "end": "2177160"
  },
  {
    "text": "the future of the network and the cloud this is the the platform on which we're investing all of our",
    "start": "2177160",
    "end": "2183240"
  },
  {
    "text": "Innovation so when we launched VPC that transition's",
    "start": "2183240",
    "end": "2189040"
  },
  {
    "start": "2187000",
    "end": "2378000"
  },
  {
    "text": "amazing we started off with VPN connections these are standard IPC tunnels engineered over the Internet uh",
    "start": "2189040",
    "end": "2195240"
  },
  {
    "text": "We've since added Direct Connect so you can hand off to us on fiber or Copper at 1 gig or 10 gig speeds uh private",
    "start": "2195240",
    "end": "2202040"
  },
  {
    "text": "connections no uh exposure to internet availability much lower latency much flatter latency profiles um a lot of our",
    "start": "2202040",
    "end": "2209880"
  },
  {
    "text": "more security sensitive customers have asked for Security Group egress filtering uh in VPC security groups do",
    "start": "2209880",
    "end": "2216280"
  },
  {
    "text": "egress filtering so you can configure both inbound and outbound permit rules and that's only available in",
    "start": "2216280",
    "end": "2223160"
  },
  {
    "text": "VPC we have Network AOL many of our customers have a mental model of",
    "start": "2223160",
    "end": "2228839"
  },
  {
    "text": "networks as instances machines that have IP addresses that are close to each other do jobs that are similar and",
    "start": "2228839",
    "end": "2236000"
  },
  {
    "text": "machines that have in IP addresses that are far apart do jobs that are different so this subnet is my web servers this",
    "start": "2236000",
    "end": "2242040"
  },
  {
    "text": "subnet is my application servers and I express my filtering rules between those subnets with network a if you have a",
    "start": "2242040",
    "end": "2248560"
  },
  {
    "text": "compliance regime that requires you to do that or if you have internal governance rules you can do",
    "start": "2248560",
    "end": "2254839"
  },
  {
    "text": "that we have routing tables um this is really",
    "start": "2254839",
    "end": "2259880"
  },
  {
    "text": "uh difficult to to wrap your head around but interesting functionality um you can",
    "start": "2259880",
    "end": "2265920"
  },
  {
    "text": "apply more specific routes per subnet and this gives you the opportunity to use ec2 instances as Network appliances",
    "start": "2265920",
    "end": "2273440"
  },
  {
    "text": "so you can either build up your own using standard tools or we've got the AWS marketplace where we have a whole",
    "start": "2273440",
    "end": "2279000"
  },
  {
    "text": "bunch of isvs that have standard products that you you know and love uh hopefully in your existing data centers",
    "start": "2279000",
    "end": "2286920"
  },
  {
    "text": "and uh you can pull those out and you can run them as ec2 instances and you can make ec2 instances part of your network topology and so we've enabled",
    "start": "2286920",
    "end": "2294440"
  },
  {
    "text": "the ecosystem there we've unblocked a lot of innovation and part of that is elastic",
    "start": "2294440",
    "end": "2300000"
  },
  {
    "text": "network interfaces these are basically ethernet cards in the cloud so it has a",
    "start": "2300000",
    "end": "2305760"
  },
  {
    "text": "MAC address it has an IP address has a bunch of configuration associated with it and you can unplug it from one",
    "start": "2305760",
    "end": "2311560"
  },
  {
    "text": "machine and plug it into another machine and dynamically add more and so this is how you you Plum ec2 instances into your",
    "start": "2311560",
    "end": "2317960"
  },
  {
    "text": "network topology and another common ask from our customers was multiple IP addresses per",
    "start": "2317960",
    "end": "2323280"
  },
  {
    "text": "interface so we've also delivered that and again that's only available within",
    "start": "2323280",
    "end": "2328440"
  },
  {
    "text": "VPC and uh one of the things that Verner touched on in his keynote was our new C3",
    "start": "2328440",
    "end": "2334960"
  },
  {
    "text": "instance family with enhanced networking and he breezed past this pretty quickly but I I think it's an awesome awesome",
    "start": "2334960",
    "end": "2341920"
  },
  {
    "text": "feature um this is hardware virtualized networking we're doing srov we're",
    "start": "2341920",
    "end": "2347440"
  },
  {
    "text": "actually forwarding a virtualized hardware Nick into the doo into the guest and so you get wir line rates",
    "start": "2347440",
    "end": "2355119"
  },
  {
    "text": "we're measuring latency in micros seconds and the packets per second throughput has gone up to some",
    "start": "2355119",
    "end": "2360640"
  },
  {
    "text": "ridiculously large number and it comes with all of the VPC features so security",
    "start": "2360640",
    "end": "2366680"
  },
  {
    "text": "groups and Network accles uh all of the things that we just talked about are available with enhanced networking and",
    "start": "2366680",
    "end": "2372240"
  },
  {
    "text": "again that's only available within VPC so as you're designing",
    "start": "2372240",
    "end": "2380960"
  },
  {
    "start": "2378000",
    "end": "2446000"
  },
  {
    "text": "products you run into this spectrum where you have things that are simple on one side and things that are complicated",
    "start": "2380960",
    "end": "2387400"
  },
  {
    "text": "on the other and often the simple things are limited and the complicated things are",
    "start": "2387400",
    "end": "2393440"
  },
  {
    "text": "flexible and there's no value judgment here I own both an ail scope and a",
    "start": "2393440",
    "end": "2398480"
  },
  {
    "text": "micrometer and I I have both of them I intend to keep both of them lugging the oscilloscope around to check a battery",
    "start": "2398480",
    "end": "2404520"
  },
  {
    "text": "is is very silly but trying to troubleshoot a clock circuit with a a multimeter is is just not going to",
    "start": "2404520",
    "end": "2409599"
  },
  {
    "text": "happen and so this spectrum exists it's good they're they're good valuable tools at many points along the",
    "start": "2409599",
    "end": "2415560"
  },
  {
    "text": "Spectrum but ec2 fell more towards the The Limited and simple end of that Spectrum there weren't a lot of concepts",
    "start": "2415560",
    "end": "2422000"
  },
  {
    "text": "for you to understand in order to take advantage of ec2",
    "start": "2422000",
    "end": "2428040"
  },
  {
    "text": "we had private IP addresses we had public IP addresses maybe you wrapped your head around elastic IP addresses",
    "start": "2428040",
    "end": "2434359"
  },
  {
    "text": "that was quick and easy to get started you made one API call you called run instances and you were often running but",
    "start": "2434359",
    "end": "2440480"
  },
  {
    "text": "there wasn't a lot there there wasn't a framework for us to hang more advanced functionality and then we launched",
    "start": "2440480",
    "end": "2447839"
  },
  {
    "start": "2446000",
    "end": "2468000"
  },
  {
    "text": "VPC VPC has this very rich networking to topology has all of these interesting",
    "start": "2447839",
    "end": "2453440"
  },
  {
    "text": "features you can have instances that don't even have public IP addresses you've got Network tackles but there's a",
    "start": "2453440",
    "end": "2458839"
  },
  {
    "text": "tremendous amount more that you have to do you have to think about CER blocks you have to pick a network range you have to lay out subnets so you get a lot",
    "start": "2458839",
    "end": "2464920"
  },
  {
    "text": "more value you have to invest a lot more and so one of the things that we launched earlier this year is what we're",
    "start": "2464920",
    "end": "2472160"
  },
  {
    "start": "2468000",
    "end": "2521000"
  },
  {
    "text": "calling default VPC um the best description of this is a blog post by Jeff bar in March of this",
    "start": "2472160",
    "end": "2479440"
  },
  {
    "text": "year so you show up as a new customer at 3:00 in the morning type in your",
    "start": "2479440",
    "end": "2485480"
  },
  {
    "text": "information and you call run instan is say the ec2 getting started guide is it's existed for years it's code",
    "start": "2485480",
    "end": "2491960"
  },
  {
    "text": "compatible with all of the stuff that our customers have been writing for ec2 and you can go ahead and you can launch",
    "start": "2491960",
    "end": "2497280"
  },
  {
    "text": "and terminate instances to your heart's content and then at any time you can look behind the curtain and",
    "start": "2497280",
    "end": "2504640"
  },
  {
    "text": "it turns out that there's always been a VPC behind your instances and so then you can take",
    "start": "2504640",
    "end": "2510359"
  },
  {
    "text": "advantage of it you can tell us about your home data center bring up a VPN connection take advantage of all of the",
    "start": "2510359",
    "end": "2515800"
  },
  {
    "text": "advanced functionality of VP PC but you don't have to deal with it up",
    "start": "2515800",
    "end": "2521520"
  },
  {
    "start": "2521000",
    "end": "2551000"
  },
  {
    "text": "front so back to the Spectrum we have a single converged",
    "start": "2521760",
    "end": "2529480"
  },
  {
    "text": "product that allows customers to pick where they land on the Spectrum and they can move where they are in the Spectrum",
    "start": "2529480",
    "end": "2535760"
  },
  {
    "text": "at any time you can get started quickly with ec2 you launch an instance you you go through the getting started guide you",
    "start": "2535760",
    "end": "2541520"
  },
  {
    "text": "don't have to master all of those Concepts and then at any time you can just choose to turn on more and more",
    "start": "2541520",
    "end": "2547280"
  },
  {
    "text": "bits and pieces and take advantage of the complexity of VPC I had initially titled this uh other",
    "start": "2547280",
    "end": "2556040"
  },
  {
    "start": "2551000",
    "end": "2577000"
  },
  {
    "text": "VPC sessions or other interesting sessions but PowerPoint kept making the text smaller and smaller um so it's just",
    "start": "2556040",
    "end": "2563440"
  },
  {
    "text": "interesting VPC sessions I think a couple of these have already happened but we're planning on posting them to",
    "start": "2563440",
    "end": "2568599"
  },
  {
    "text": "YouTube so you can catch them again later and uh thank you very much",
    "start": "2568599",
    "end": "2576760"
  }
]