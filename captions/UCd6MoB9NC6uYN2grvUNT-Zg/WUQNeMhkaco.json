[
  {
    "text": "i'm don bailey with the aws security team i'm a principal geek there i protect customers on a daily basis in the",
    "start": "1280",
    "end": "7040"
  },
  {
    "text": "infrastructure itself and i'm graham baer and i work for the aws identity and access team",
    "start": "7040",
    "end": "13840"
  },
  {
    "text": "today we're talking about intrusion detection in the cloud and the agenda will be both that for your",
    "start": "14240",
    "end": "19439"
  },
  {
    "text": "aws environment as well as aws specific security features that you can build in ids with",
    "start": "19439",
    "end": "24880"
  },
  {
    "text": "and then we'll show some demos or we'll talk about a few different mechanisms that you can actually use to monitor",
    "start": "24880",
    "end": "31840"
  },
  {
    "text": "your environment and we'll point out some tips some other resources so when we're talking about ids for aws gram",
    "start": "31840",
    "end": "38160"
  },
  {
    "text": "what are we talking about so traditionally when we use the term ids you've probably been thinking about your",
    "start": "38160",
    "end": "43840"
  },
  {
    "text": "servers the files the processes your network packets kind of all the",
    "start": "43840",
    "end": "49200"
  },
  {
    "text": "things that in aws is really just the ec2 environment so as we talk about intrusion detection",
    "start": "49200",
    "end": "55680"
  },
  {
    "text": "in the cloud we're really going to focus today on the much broader aws environment",
    "start": "55680",
    "end": "60879"
  },
  {
    "text": "as you can see here the traditional environment has been the instances the network connectivity but we want to",
    "start": "60879",
    "end": "66720"
  },
  {
    "text": "focus on your s3 objects your dynamodb tables the rds databases",
    "start": "66720",
    "end": "72320"
  },
  {
    "text": "all of the other services that make up your entire aws account",
    "start": "72320",
    "end": "77439"
  },
  {
    "text": "that doesn't mean that you can't have a traditional intrusion detection system in aws if you're interested in having a",
    "start": "77439",
    "end": "83200"
  },
  {
    "text": "pizza box that sits there and listens to packets you can install one of those within your data center on the opposite end of your vpc endpoint",
    "start": "83200",
    "end": "89360"
  },
  {
    "text": "and monitor the traffic that flows to there or out to your actual router and gateway for your infrastructure or",
    "start": "89360",
    "end": "95439"
  },
  {
    "text": "if you'd like to have one of those soft appliances that sits within a vpc either at your internet nat gateway or on instance you",
    "start": "95439",
    "end": "101439"
  },
  {
    "text": "can deploy those there's a number of solutions to the aws marketplace we're not focusing on those today we're focusing on the broader",
    "start": "101439",
    "end": "107840"
  },
  {
    "text": "aspect of aws the configuration environment in particular monitoring for changes there and",
    "start": "107840",
    "end": "113040"
  },
  {
    "text": "detecting things so what are some prerequisites that we'd like our customers to know about and",
    "start": "113040",
    "end": "119200"
  },
  {
    "text": "make sure that they're using before they start considering building an idea so we're going to make a few assumptions",
    "start": "119200",
    "end": "124320"
  },
  {
    "text": "today we're going to assume first that you're familiar with the identity and access management service",
    "start": "124320",
    "end": "129520"
  },
  {
    "text": "that you're using i'm users i'm roles on your ec2 instances that you're following the principle of least privilege",
    "start": "129520",
    "end": "135599"
  },
  {
    "text": "you're assigning policies via groups and so on and so forth next we're going to assume that",
    "start": "135599",
    "end": "141920"
  },
  {
    "text": "especially for your privileged users but really for any user who's logging in interactively",
    "start": "141920",
    "end": "147120"
  },
  {
    "text": "that you're using multi-factor authentication on top of the username and password and third we're going to assume that",
    "start": "147120",
    "end": "153360"
  },
  {
    "text": "you're familiar with the s3 bucket logging feature so this is an existing feature that you know it's just it's basically your",
    "start": "153360",
    "end": "159040"
  },
  {
    "text": "standard um web server gets and puts and the s3 bucket logging feature gives",
    "start": "159040",
    "end": "166239"
  },
  {
    "text": "you gives you that data today and there's a few more things that we want to focus on",
    "start": "166239",
    "end": "171920"
  },
  {
    "text": "specifically today and specific to ids those are so we're going to talk a whole bunch about i am roles",
    "start": "171920",
    "end": "177599"
  },
  {
    "text": "uh roles are a feature that we introduced about a year ago and they are a named entity within",
    "start": "177599",
    "end": "184400"
  },
  {
    "text": "within your account they include a set of permissions so roles can take actions",
    "start": "184400",
    "end": "190080"
  },
  {
    "text": "and most importantly they do not themselves have credentials instead they specify a policy that or they",
    "start": "190080",
    "end": "196560"
  },
  {
    "text": "include a policy that specifies who can assume that role where this comes in really useful um",
    "start": "196560",
    "end": "203440"
  },
  {
    "text": "we're going to talk about a security role so this is a particular value for those of you who are managing multiple",
    "start": "203440",
    "end": "209280"
  },
  {
    "text": "accounts you can use it within a single account but when you're managing multiple accounts you probably have a single kind of",
    "start": "209280",
    "end": "215200"
  },
  {
    "text": "centralized security monitoring location and if you create a security role within",
    "start": "215200",
    "end": "220400"
  },
  {
    "text": "each of the accounts that you're monitoring that will give you access to information about all of those accounts",
    "start": "220400",
    "end": "226239"
  },
  {
    "text": "the piece that we really want want to make sure that you're not doing here please do not maintain a database of",
    "start": "226239",
    "end": "231440"
  },
  {
    "text": "credentials for all of your accounts this gives you a single centralized set of credentials that give you access",
    "start": "231440",
    "end": "237680"
  },
  {
    "text": "to everything you need across all of your accounts now last year we introduced the concept of the security role and we made sure to",
    "start": "237680",
    "end": "242959"
  },
  {
    "text": "provide you with one we've actually made sure to bring it back again so for those people that can write really fast scribble that down",
    "start": "242959",
    "end": "250239"
  },
  {
    "text": "so actually we'll make we'll talk more about how you actually get that policy in a few minutes",
    "start": "250640",
    "end": "256239"
  },
  {
    "text": "what we want to focus on just right now is the s3 component of that policy",
    "start": "256239",
    "end": "261280"
  },
  {
    "text": "so as you're probably well familiar there's a lot of apis across all of our services",
    "start": "261280",
    "end": "267040"
  },
  {
    "text": "what we see here are the s3 apis that you would need to examine the state of your account the",
    "start": "267040",
    "end": "273680"
  },
  {
    "text": "configuration the metadata what is explicitly missing from this list is the ability to read objects",
    "start": "273680",
    "end": "279759"
  },
  {
    "text": "there's no get object on that list so if you're using the security audit policy you can",
    "start": "279759",
    "end": "284880"
  },
  {
    "text": "inspect the state of the account the configuration but you can't actually retrieve any of the data",
    "start": "284880",
    "end": "291120"
  },
  {
    "text": "graham's going to show us real quick where you actually find your roles and in particular create a security role and",
    "start": "295120",
    "end": "300160"
  },
  {
    "text": "there's something interesting to show you in that particular tab so last year you had to uh actually key in that um",
    "start": "300160",
    "end": "307840"
  },
  {
    "text": "that policy so i'm here in the identity and access",
    "start": "307840",
    "end": "313199"
  },
  {
    "text": "management console just going going to go through how you create a role",
    "start": "313199",
    "end": "318639"
  },
  {
    "text": "this is a role for cross account access",
    "start": "319520",
    "end": "325840"
  },
  {
    "text": "um also relatively new you can actually require the use of mfa in order to assume the role if",
    "start": "329680",
    "end": "334800"
  },
  {
    "text": "anybody has that account number see us afterwards for your door prize but the piece that we really want to",
    "start": "334800",
    "end": "340320"
  },
  {
    "text": "highlight here so instead of having to key in the policy we've added the security audit template",
    "start": "340320",
    "end": "346960"
  },
  {
    "text": "and here's where you can see and so on um these are the uh",
    "start": "347199",
    "end": "354639"
  },
  {
    "text": "the metadata components of all the various services rather than the actual data itself saves people a lot of writing we're glad",
    "start": "354639",
    "end": "361039"
  },
  {
    "text": "to give that to you",
    "start": "361039",
    "end": "367840"
  },
  {
    "text": "so what's another concept that's pretty interesting for aws so the next uh the next concept we're",
    "start": "368400",
    "end": "374800"
  },
  {
    "text": "going to talk about is write one storage so right one storage is probably a concept you're familiar with",
    "start": "374800",
    "end": "380160"
  },
  {
    "text": "you may have used it for burning the output of your configuration audits your tripwire data and so on",
    "start": "380160",
    "end": "386240"
  },
  {
    "text": "to some sort of external media be it tape",
    "start": "386240",
    "end": "392880"
  },
  {
    "text": "or cd or kind of whatever your really durable storage is um the important part here is it's",
    "start": "392880",
    "end": "399600"
  },
  {
    "text": "storage that can't be modified or for which the bar to modify the storage is really really high",
    "start": "399600",
    "end": "405199"
  },
  {
    "text": "um and so this is going to be a really useful building block",
    "start": "405199",
    "end": "410560"
  },
  {
    "text": "so there's a couple of ways to build this in aws one of our favorites is to use s3 if you turn on bucket versioning you",
    "start": "410880",
    "end": "418160"
  },
  {
    "text": "turn on mfa delete that would in order to modify or delete objects that have been written to s3",
    "start": "418160",
    "end": "425280"
  },
  {
    "text": "you're going to need actually the root account mfa which hopefully you've locked into safe or",
    "start": "425280",
    "end": "431680"
  },
  {
    "text": "made very difficult to access um and then if you're managing multiple accounts you can take this a step further you can",
    "start": "431680",
    "end": "438160"
  },
  {
    "text": "use a common bucket in a single really locked down account",
    "start": "438160",
    "end": "443199"
  },
  {
    "text": "that is uh that is basically a data sync for all of your other aws accounts",
    "start": "443199",
    "end": "448880"
  },
  {
    "text": "um creating such a role is pretty straightforward this is an example of the bucket policy you might use to allow",
    "start": "448880",
    "end": "454720"
  },
  {
    "text": "rights from your external accounts into this right ones bucket",
    "start": "454720",
    "end": "461039"
  },
  {
    "text": "and turning on versioning is just a quick click in the in the s3 console",
    "start": "461599",
    "end": "468080"
  },
  {
    "text": "and then last year we introduced something neat so last year we at re invent we launched cloudtrail and",
    "start": "468080",
    "end": "474240"
  },
  {
    "text": "so this is where um aws will aggregate and provide to you logs of all",
    "start": "474240",
    "end": "481280"
  },
  {
    "text": "the api calls occurring within your account for the supported services this will give this gives you insight",
    "start": "481280",
    "end": "488080"
  },
  {
    "text": "into what's going on in your account um again turning on cloudtrail is pretty",
    "start": "488080",
    "end": "494000"
  },
  {
    "text": "straightforward it's just a couple of clicks within the console you tell us where you want your logs delivered and you",
    "start": "494000",
    "end": "499440"
  },
  {
    "text": "start getting files into your s3 bucket in just a few minutes this is a good place to use that right one storage too absolutely",
    "start": "499440",
    "end": "506160"
  },
  {
    "text": "so the logs give you a whole bunch of data it tells you who made the api call when the call was",
    "start": "506160",
    "end": "511599"
  },
  {
    "text": "made what action was taken and on what resources and where the call was made from",
    "start": "511599",
    "end": "518800"
  },
  {
    "text": "um if you're deeply familiar especially with our federated our federated offerings um you're",
    "start": "519039",
    "end": "524399"
  },
  {
    "text": "probably aware that there's a whole variety of identity types and the cloud trail logs will contain all of that information so if you're",
    "start": "524399",
    "end": "530560"
  },
  {
    "text": "just using a straightforward imeser we'll tell you the username of that item user",
    "start": "530560",
    "end": "536640"
  },
  {
    "text": "if you're using any of our federated offerings we'll give you the information about either the federated user or the",
    "start": "536720",
    "end": "541760"
  },
  {
    "text": "assumed role which will look just slightly different but pretty much the same data",
    "start": "541760",
    "end": "547440"
  },
  {
    "text": "and we'll even kind of peel back the covers a bit and so if we or when we make aws calls on your behalf",
    "start": "547440",
    "end": "554720"
  },
  {
    "text": "we'll give you insight into that into exactly what's going on there as well",
    "start": "554720",
    "end": "560000"
  },
  {
    "text": "so what are some security relevant cloudtrail events that we'd really like people to pay attention to so you get a whole bunch of data out",
    "start": "560160",
    "end": "566720"
  },
  {
    "text": "of cloudtrail um as security geeks here there's a few events that are a few types of events",
    "start": "566720",
    "end": "571839"
  },
  {
    "text": "that we're just a little bit more interested in so if we look at um",
    "start": "571839",
    "end": "577760"
  },
  {
    "text": "the first example when and this is also relatively new to cloudtrail when a user logs into the console we'll",
    "start": "577760",
    "end": "583920"
  },
  {
    "text": "ship you an event um what can be interesting here is let's say you have a user who's on vacation or they're off at a conference in las vegas",
    "start": "583920",
    "end": "590080"
  },
  {
    "text": "maybe and you see a login event from somewhere in europe or further abroad",
    "start": "590080",
    "end": "597279"
  },
  {
    "text": "that might be something that you know that's a little unexpected and that you want to dive into a little bit more",
    "start": "597279",
    "end": "603519"
  },
  {
    "text": "time of day ip address yeah if users you know nine to five and they're logging in at 3am",
    "start": "603519",
    "end": "608640"
  },
  {
    "text": "you know maybe maybe that's uh something that they had to be doing but maybe it's also just something you want to look into a",
    "start": "608640",
    "end": "614640"
  },
  {
    "text": "bit further hard worker so the next one um",
    "start": "614640",
    "end": "620399"
  },
  {
    "text": "if you've got an imuser or for that matter a role that's being used to run your services typically you know we test our services",
    "start": "620399",
    "end": "627040"
  },
  {
    "text": "pretty well um getting principal of least privilege working takes a lot of work but eventually we get there",
    "start": "627040",
    "end": "633200"
  },
  {
    "text": "and when your application is running in production you know typically it has exactly the permissions it needs and",
    "start": "633200",
    "end": "639279"
  },
  {
    "text": "it's pretty rare to see access denied errors from your programmatic users and so if you start seeing access denied",
    "start": "639279",
    "end": "646320"
  },
  {
    "text": "errors from the users that are used to run your services that might be something you really want to look into",
    "start": "646320",
    "end": "652079"
  },
  {
    "text": "it could be an indicator of something a little bit more and our favorite cloudtrail event our favorite cloudtrail event if",
    "start": "652079",
    "end": "658399"
  },
  {
    "text": "somebody turns off cloudtrail in my account that's the first thing i want to know",
    "start": "658399",
    "end": "663440"
  },
  {
    "text": "so actually searching and alerting on cloudtrail events there are a number of solutions for this if you visit the aws marketplace or",
    "start": "665040",
    "end": "671360"
  },
  {
    "text": "a number of the booths that are actually within our expo center you'll find a number of partners that are providing solutions for searching both cloud trail",
    "start": "671360",
    "end": "677040"
  },
  {
    "text": "events and alerting on particular events uh there are also software as a service offerings and their open source",
    "start": "677040",
    "end": "682240"
  },
  {
    "text": "offerings one example within the aws marketplace happens to be alert logic and their log manager which will actually alert and",
    "start": "682240",
    "end": "688720"
  },
  {
    "text": "uh search an alert on particular events uh log entries is an interesting sort of uh software as a service offering where",
    "start": "688720",
    "end": "694720"
  },
  {
    "text": "they will actually aggregate not just system logs but also cloud trail events and they can correlate those and also create alerts based on those and send",
    "start": "694720",
    "end": "701200"
  },
  {
    "text": "them to teams and then if you're looking for an open source solution logstash actually has a cloudtrail plug-in at these days too",
    "start": "701200",
    "end": "708560"
  },
  {
    "text": "and just one last note on cloudtrail cloudtrail can already send you an sns notification but with the new aws lambda",
    "start": "708560",
    "end": "716079"
  },
  {
    "text": "launch this morning you can also use that to pivot off of every new log file and take actions right away",
    "start": "716079",
    "end": "721200"
  },
  {
    "text": "great point so you know once we've got uh or so let's move along to kind of our",
    "start": "721200",
    "end": "727120"
  },
  {
    "text": "next steps when we start talking about unauthorized access within a within an aws account",
    "start": "727120",
    "end": "733120"
  },
  {
    "text": "uh there are kind of three different ways that actions can happen the first is just your standard signed",
    "start": "733120",
    "end": "738639"
  },
  {
    "text": "requests the second resources can be configured to be accessible publicly without any",
    "start": "738639",
    "end": "744399"
  },
  {
    "text": "particular signed request and the third is cross account access so let's dive into those for a bit",
    "start": "744399",
    "end": "752480"
  },
  {
    "text": "there are so for both your root account and item users there are a number of",
    "start": "752880",
    "end": "757920"
  },
  {
    "text": "different types of credentials that can be associated with each of these um all of these have their",
    "start": "757920",
    "end": "763519"
  },
  {
    "text": "uses and it's totally okay for them to exist you just need to make sure you understand exactly what is out there because",
    "start": "763519",
    "end": "769360"
  },
  {
    "text": "they're all uh potential areas it's surface area within your account um",
    "start": "769360",
    "end": "774720"
  },
  {
    "text": "i just want to highlight where we say login profile most people know that as username and password for interactive login",
    "start": "774720",
    "end": "781600"
  },
  {
    "text": "and if folks want to look and actually find out where credentials are and which credentials exist where they're going to go check",
    "start": "781600",
    "end": "789440"
  },
  {
    "text": "see here so",
    "start": "791200",
    "end": "795600"
  },
  {
    "text": "roles obviously don't have credentials but if we look at the users within my account",
    "start": "796240",
    "end": "802639"
  },
  {
    "text": "down towards the bottom you can see the access key that this particular user has both an access key and a password",
    "start": "803760",
    "end": "810079"
  },
  {
    "text": "the access key was created early this morning and the password was also used early this morning and this one also has",
    "start": "810079",
    "end": "816160"
  },
  {
    "text": "an mfa device also relatively new this year you can obtain a report of all of the",
    "start": "816160",
    "end": "821680"
  },
  {
    "text": "credentials within your account we're going to show you on the next slide this account is a little bit",
    "start": "821680",
    "end": "826720"
  },
  {
    "text": "boring but here's an example of that report and it'll show you all of the credentials",
    "start": "826720",
    "end": "831839"
  },
  {
    "text": "within the account when they were last rotated and in some cases when they were last used",
    "start": "831839",
    "end": "838160"
  },
  {
    "text": "so the next type of access to your account is publicly accessible resources these are not configured this way by",
    "start": "840399",
    "end": "846079"
  },
  {
    "text": "default but they're absolutely things that you can configure and there are valid use cases for each",
    "start": "846079",
    "end": "851760"
  },
  {
    "text": "this can be done for s3 and sqs as you can see up on the slides and",
    "start": "851760",
    "end": "856880"
  },
  {
    "text": "you know again it's totally okay to configure these if you have a business case to do so",
    "start": "856880",
    "end": "862399"
  },
  {
    "text": "it's just something that you need to make sure that you understand and be able to audit for as you review your account and so cross",
    "start": "862399",
    "end": "869199"
  },
  {
    "text": "account access is actually pretty similar to the public access instead of being wide open it's an additional external aws account",
    "start": "869199",
    "end": "876800"
  },
  {
    "text": "again as long as you either know who owns that account or um kind of what it's used for this is",
    "start": "876800",
    "end": "884000"
  },
  {
    "text": "totally acceptable as long as you have that business case to configure things this way",
    "start": "884000",
    "end": "890639"
  },
  {
    "text": "and if folks want to find out where they actually might have cross account access provision to any of their resources and",
    "start": "891199",
    "end": "897360"
  },
  {
    "text": "so again that will typically be in the roles tab when you look at one of the roles",
    "start": "897360",
    "end": "904160"
  },
  {
    "text": "the trust relationships will show you which account has access to assume this role",
    "start": "906959",
    "end": "914800"
  },
  {
    "text": "so we talked a little bit about roles earlier just to re-highlight them here roles are named entities within your",
    "start": "918320",
    "end": "924560"
  },
  {
    "text": "account they have a set of capabilities and they have a list of trusted entities",
    "start": "924560",
    "end": "929600"
  },
  {
    "text": "or an assumeral policy that defines who can assume that role to take action using those capabilities we've already looked",
    "start": "929600",
    "end": "937519"
  },
  {
    "text": "at where to find those so i think the next step in detecting",
    "start": "937519",
    "end": "944240"
  },
  {
    "text": "unauthorized access is understanding the policies within your account so as you've gone through and applied",
    "start": "944240",
    "end": "951040"
  },
  {
    "text": "principle of least privilege you may be familiar with action star in your policies and so",
    "start": "951040",
    "end": "957120"
  },
  {
    "text": "that's explicit but there's a number of ways of expressing star or",
    "start": "957120",
    "end": "962720"
  },
  {
    "text": "administ or root administrative access in an implicit manner we've got a couple of examples up here",
    "start": "962720",
    "end": "968880"
  },
  {
    "text": "if you can write policy if you can create credentials really",
    "start": "968880",
    "end": "974160"
  },
  {
    "text": "a number of the imapis can be used to escalate privilege and so you want to pay attention to who",
    "start": "974160",
    "end": "980160"
  },
  {
    "text": "has access to those apis strongly recommend using the policy simulator to really understand",
    "start": "980160",
    "end": "985680"
  },
  {
    "text": "the blast radius of any policies particularly any any of your complicated policies that you might have",
    "start": "985680",
    "end": "992160"
  },
  {
    "text": "so let's go over a few different policies maybe a little pop quiz so up here we have three policies um",
    "start": "992160",
    "end": "998320"
  },
  {
    "text": "we'd like to see by a show of hands who thinks each of these can be used to escalate privilege",
    "start": "998320",
    "end": "1003759"
  },
  {
    "text": "so for policy a for policy b",
    "start": "1003759",
    "end": "1011199"
  },
  {
    "text": "and for policy c not a lot of hands so the answer",
    "start": "1011199",
    "end": "1018880"
  },
  {
    "text": "is actually yes um all three of them have a component that can be used to escalate privilege so",
    "start": "1018880",
    "end": "1025280"
  },
  {
    "text": "the first statement so these these all have two statements the first statement is in all cases pretty benign um in",
    "start": "1025280",
    "end": "1031520"
  },
  {
    "text": "statement b it's actually a no op um it doesn't give you access to do anything but it also doesn't deny access",
    "start": "1031520",
    "end": "1037839"
  },
  {
    "text": "but it's the second statements we really have to watch out for so in policy a uh you might notice down",
    "start": "1037839",
    "end": "1043600"
  },
  {
    "text": "on the bottom right there there's a tact on comma star which means that this this entire policy is basically a wild",
    "start": "1043600",
    "end": "1049919"
  },
  {
    "text": "card grant the user a has access to do anything policy b",
    "start": "1049919",
    "end": "1055600"
  },
  {
    "text": "the user has access to put user policy which means they can modify their own user policies and any other",
    "start": "1055600",
    "end": "1061440"
  },
  {
    "text": "users so if they don't have access to do something they can just give themselves access which they give",
    "start": "1061440",
    "end": "1067360"
  },
  {
    "text": "i wish they gave that to me at work and uh policy c policy c is a little bit trickier so",
    "start": "1067360",
    "end": "1074880"
  },
  {
    "text": "when you launch an ec2 instance we do an additional check to make sure that you have the ability to pass the role",
    "start": "1074880",
    "end": "1080799"
  },
  {
    "text": "when you're launching an ec2 instance with a particular role so with policy c if there's additionally",
    "start": "1080799",
    "end": "1087440"
  },
  {
    "text": "a role within your account that has some level of escalated privilege then user c",
    "start": "1087440",
    "end": "1092559"
  },
  {
    "text": "can take advantage of that by launching their own instance and using the credentials that are made available to that instance to do whatever they",
    "start": "1092559",
    "end": "1098960"
  },
  {
    "text": "like to do yeah the point here is to keep an eye on both the roles the policies and if any",
    "start": "1098960",
    "end": "1104559"
  },
  {
    "text": "changes are made to them that would include any of these actions",
    "start": "1104559",
    "end": "1109679"
  },
  {
    "text": "so this is a lot of work but eventually you'll get there and once you have your account in exactly the right state",
    "start": "1109679",
    "end": "1116960"
  },
  {
    "text": "kind of the next step is to figure out okay great what if something changes so",
    "start": "1116960",
    "end": "1124320"
  },
  {
    "text": "one of the ways to do that is to inspect the uh the state of your account on a regular basis",
    "start": "1124320",
    "end": "1129760"
  },
  {
    "text": "and then you're just watching for changes um so we've got an example script here we're going to show just the s3 excerpt",
    "start": "1129760",
    "end": "1137120"
  },
  {
    "text": "from that script and the url for this will be available at the end as well",
    "start": "1137120",
    "end": "1142320"
  },
  {
    "text": "this script goes through to inspect all of your your s3 buckets your sq q policies in all cases",
    "start": "1142320",
    "end": "1150000"
  },
  {
    "text": "we're looking at the security configuration um and i think the sns topics and the ec2 security groups",
    "start": "1150000",
    "end": "1156000"
  },
  {
    "text": "and it just takes the current configuration and outputs it to a pretty straightforward flat file um we'll show you in an example of that",
    "start": "1156000",
    "end": "1163440"
  },
  {
    "text": "in just a minute there's the usage for it now",
    "start": "1163440",
    "end": "1170400"
  },
  {
    "text": "and so this is an example output let's zoom in on uh on a couple of the sections so here we",
    "start": "1171280",
    "end": "1177440"
  },
  {
    "text": "can see all of the users and their access keys also whether or not they're using mfa",
    "start": "1177440",
    "end": "1184000"
  },
  {
    "text": "yep uh the s3 buckets any bucket policies that may be applied",
    "start": "1184000",
    "end": "1189840"
  },
  {
    "text": "and you know when we're when we're at this point we're not so much interested in the current state as the diff so this script is outputting",
    "start": "1189840",
    "end": "1197039"
  },
  {
    "text": "just a pretty straightforward flat file and here's an example that you might see so",
    "start": "1197039",
    "end": "1202320"
  },
  {
    "text": "here we can see that the policy labeled one on this particular user change and there was an additional",
    "start": "1202320",
    "end": "1208720"
  },
  {
    "text": "read-only access policy that was added again this doesn't really tell you what those policies are but it tells you",
    "start": "1208720",
    "end": "1214080"
  },
  {
    "text": "where to look and from here you can go in and look at the im either apis or console to kind of see you know was this an",
    "start": "1214080",
    "end": "1220000"
  },
  {
    "text": "expected change was something you already knew was coming or is this something that could be problematic in the future",
    "start": "1220000",
    "end": "1225760"
  },
  {
    "text": "so we talked about some prerequisites we talked about uh some interesting new services that we've launched",
    "start": "1225760",
    "end": "1231039"
  },
  {
    "text": "since last year cloudtrail the credentials report which is great uh checking through a number of",
    "start": "1231039",
    "end": "1236960"
  },
  {
    "text": "different consoles for certain resources whether or not they've changed them using that and doing it programmatically with an actual script",
    "start": "1236960",
    "end": "1242880"
  },
  {
    "text": "uh some other things beyond that are to look at your actual utilization of your environment and detect when that's going beyond",
    "start": "1242880",
    "end": "1248320"
  },
  {
    "text": "a threshold that you were not expecting so if anybody has a cell phone and uses it",
    "start": "1248320",
    "end": "1254640"
  },
  {
    "text": "for data purposes you've probably seen a screen or a pop-up like this or a message from your provider telling you that",
    "start": "1254640",
    "end": "1259679"
  },
  {
    "text": "at a certain point in the month you've reached a threshold of usage i usually like to receive this at the end of the month as opposed to the first",
    "start": "1259679",
    "end": "1265919"
  },
  {
    "text": "week but sometimes that doesn't go as well as i planned we can also do this in our",
    "start": "1265919",
    "end": "1271280"
  },
  {
    "text": "environment where we actually graph our usage over time where we're looking for a certain amount of usage uh over the month",
    "start": "1271280",
    "end": "1277039"
  },
  {
    "text": "and if we exceed that usage uh within a period of time in one case it might be good one case",
    "start": "1277039",
    "end": "1282320"
  },
  {
    "text": "not so much and you can do that in the database environment using something called billing alerts so there's no need to",
    "start": "1282320",
    "end": "1287600"
  },
  {
    "text": "actually wait until the end of the month to actually be aware of what is unexpected utilization",
    "start": "1287600",
    "end": "1292720"
  },
  {
    "text": "instead you want to establish a baseline of what would be normal activity within your account and then set some thresholds and alert on those",
    "start": "1292720",
    "end": "1299280"
  },
  {
    "text": "investigate those alerts and determine whether or not you have something else going on that you weren't expecting",
    "start": "1299280",
    "end": "1304320"
  },
  {
    "text": "and we like to think this is one of the simplest cloud intrusion detection system mechanisms that you actually have",
    "start": "1304320",
    "end": "1309840"
  },
  {
    "text": "it's actually free for a setup of 10 alarms and up to a thousand notifications",
    "start": "1309840",
    "end": "1315200"
  },
  {
    "text": "turning on billing alerts means that you actually need to enable monitoring of your estimated charges so you want to do that",
    "start": "1315760",
    "end": "1321120"
  },
  {
    "text": "through the aws console and creating a billing alarm is as simple as going into",
    "start": "1321120",
    "end": "1326159"
  },
  {
    "text": "the cloud watch console selecting a particular metric and actually setting an alert for that in this case you want to select",
    "start": "1326159",
    "end": "1332000"
  },
  {
    "text": "by service and you can pick uh ec2 amazon ec2 service and set a and you can actually see the",
    "start": "1332000",
    "end": "1337919"
  },
  {
    "text": "actual utilization over a period of time actually grab there you want to create a",
    "start": "1337919",
    "end": "1343039"
  },
  {
    "text": "name for your alert make sure you give it a description then you can set a threshold such as 100 200 etc and then you can set a",
    "start": "1343039",
    "end": "1349360"
  },
  {
    "text": "notification mechanism actually put in an email have it alert tell you when you've actually reached",
    "start": "1349360",
    "end": "1355440"
  },
  {
    "text": "that threshold you'll want to enter an email that you're actually going to pay attention to here i know that a lot of other ids systems",
    "start": "1355440",
    "end": "1362320"
  },
  {
    "text": "are some things that you'd like to sort of ignore but this is probably one you'll want to actually pay attention to",
    "start": "1362320",
    "end": "1368320"
  },
  {
    "text": "you can do this through the command line interface as well so here's an example of actually setting a billing alert to the command line",
    "start": "1368320",
    "end": "1374480"
  },
  {
    "text": "interface where we actually want to get an alert for ec2 charges exceeding 200",
    "start": "1374480",
    "end": "1380480"
  },
  {
    "text": "now you just don't want to set one alert let's assume that you have or that you anticipate a thousand dollar",
    "start": "1382080",
    "end": "1387760"
  },
  {
    "text": "usage over a month you can actually uh understand the rate at which you're going to uh break through certain",
    "start": "1387760",
    "end": "1393840"
  },
  {
    "text": "thresholds by laddering billing alerts so we'll want to set a building alert at 250 500 750 and a thousand",
    "start": "1393840",
    "end": "1399919"
  },
  {
    "text": "such that as we're breaking through those thresholds we're going to be getting those alerts near the end of the week ideally and",
    "start": "1399919",
    "end": "1407760"
  },
  {
    "text": "that's going to be okay now early alerts are the ones that we're going to want to focus in on so",
    "start": "1407760",
    "end": "1414240"
  },
  {
    "text": "if we get a threshold breakage through maybe the early part of the second week that might",
    "start": "1414240",
    "end": "1420880"
  },
  {
    "text": "give us pause and then of course if we break through say 250 500 750",
    "start": "1420880",
    "end": "1426000"
  },
  {
    "text": "all within a matter of a week that would be something that we would want to investigate",
    "start": "1426000",
    "end": "1431840"
  },
  {
    "text": "now you can actually create your own meter-based alerts so not just billing alerts actually going through cloudwatch and",
    "start": "1433360",
    "end": "1439840"
  },
  {
    "text": "then creating those building alerts through either the console or the command line interface you can actually use programmatic access",
    "start": "1439840",
    "end": "1445120"
  },
  {
    "text": "to billing data and what i particularly like about programmatic access to billing data is that you're getting a cost allocation report delivered to a bucket",
    "start": "1445120",
    "end": "1451520"
  },
  {
    "text": "that you can perform analysis on multiple times a day so this gives you info more info about the types of",
    "start": "1451520",
    "end": "1457279"
  },
  {
    "text": "charges that you have and more importantly the locations of those charges so this allows for you to actually look for unexpected usage",
    "start": "1457279",
    "end": "1463520"
  },
  {
    "text": "per region such that if you know that you're one of those individuals that only uses us east or u.s west",
    "start": "1463520",
    "end": "1469120"
  },
  {
    "text": "and you don't have a lot of stuff overseas or maybe you're one of those uh maybe one of those customers that actually only uses uh",
    "start": "1469120",
    "end": "1475440"
  },
  {
    "text": "eus then and you don't want to see any usage within the united states you could set an alert that actually",
    "start": "1475440",
    "end": "1480559"
  },
  {
    "text": "tells you whether or not that's occurring so here's a quick script that i put together anything that's greater than",
    "start": "1480559",
    "end": "1486080"
  },
  {
    "text": "zero usage and an unexpected region send me an email make sure that i know that uh something's happening either in ap eu or",
    "start": "1486080",
    "end": "1493600"
  },
  {
    "text": "south america and uh i run this on my personal account and i don't get any alerts for it",
    "start": "1493600",
    "end": "1499120"
  },
  {
    "text": "but it's uh it's it is working i've tested it and we actually will provide that script as a url at the end of the presentation",
    "start": "1499120",
    "end": "1505919"
  },
  {
    "text": "as well uh everything is not just up to you",
    "start": "1505919",
    "end": "1511039"
  },
  {
    "text": "there are some things that we're doing on your behalf some things that we're keeping an eye out for and that we're checking one good example of that is trusted advisor",
    "start": "1511039",
    "end": "1517360"
  },
  {
    "text": "so trusted advisor will inspect your aws environment uh it identifies and helps you close any number of different security gaps it's also interesting that",
    "start": "1517360",
    "end": "1524799"
  },
  {
    "text": "it will let you know what type of efficiencies you can achieve on the platform in particular how you can spend less on",
    "start": "1524799",
    "end": "1530240"
  },
  {
    "text": "our platform but which is an interesting sort of thing to offer to our customers and the security checks are also great things to offer to our",
    "start": "1530240",
    "end": "1536320"
  },
  {
    "text": "customers as well so the security tab includes a number of different checks that include open",
    "start": "1536320",
    "end": "1542159"
  },
  {
    "text": "security groups whether or not your buckets are acquired appropriately whether or not you're using mfa identity access management you can",
    "start": "1542159",
    "end": "1549200"
  },
  {
    "text": "actually get a nice little healthy report showing you green across the board ideally and",
    "start": "1549200",
    "end": "1554799"
  },
  {
    "text": "in those places where it's yellow or red you'll want to pay a little bit more attention to you now something new uh if you didn't pay",
    "start": "1554799",
    "end": "1560640"
  },
  {
    "text": "attention to this summer there's a number of the security checks that we provide for free now so if you look you can find things such",
    "start": "1560640",
    "end": "1566640"
  },
  {
    "text": "as security groups uh whether or not those are open a number of other different security checks they're actually free from trusted",
    "start": "1566640",
    "end": "1572240"
  },
  {
    "text": "advisor no need to actually sign up for business or enterprise support for those checks and hopefully you'll see the value of that",
    "start": "1572240",
    "end": "1579520"
  },
  {
    "text": "in addition the support api allows you to actually go and query trusted advisor checks so you can actually list the",
    "start": "1579679",
    "end": "1585600"
  },
  {
    "text": "trusted advisor checks their descriptions get check results you can also once you've made changes to your configuration to improve your security",
    "start": "1585600",
    "end": "1592159"
  },
  {
    "text": "posture you can go and refresh and actually and then check on the status of the refresh",
    "start": "1592159",
    "end": "1597600"
  },
  {
    "text": "and then get the report back so this is a way for you to programmatically keep tabs on the security configuration of your account in addition to the other",
    "start": "1597600",
    "end": "1603840"
  },
  {
    "text": "methods that we were describing now one thing that you'll want to do if",
    "start": "1603840",
    "end": "1610720"
  },
  {
    "text": "if you have a one account multiple accounts and you'd like to add a particular uh a",
    "start": "1610720",
    "end": "1617440"
  },
  {
    "text": "particular notification example to let's say it's billing alerts or let's say it's",
    "start": "1617440",
    "end": "1623039"
  },
  {
    "text": "let's say it's things that we've noticed and that we'd like to make you aware of we're going to use the contact information that you provide to us",
    "start": "1623039",
    "end": "1628720"
  },
  {
    "text": "however you can actually provide an alternate security point of contact and you do this to the management console and we we",
    "start": "1628720",
    "end": "1633760"
  },
  {
    "text": "highly suggest that you consider adding a security specific contact for your account if you have a security team that you",
    "start": "1633760",
    "end": "1638880"
  },
  {
    "text": "know is going to pay attention to certain things or if you have that particular requirement to make sure that you're notifying a security team of events that",
    "start": "1638880",
    "end": "1644640"
  },
  {
    "text": "are associated with your account one tactic that we brought up last year",
    "start": "1644640",
    "end": "1650240"
  },
  {
    "text": "and that i'd like to remind people of rebuild frequency is uh is an interesting tactic",
    "start": "1650240",
    "end": "1655360"
  },
  {
    "text": "uh to use support adversaries that would like to maintain persistence within your account so let's assume that you have",
    "start": "1655360",
    "end": "1660960"
  },
  {
    "text": "ec2 instances that you know that you can rebuild on a daily basis uh what's great is it's very difficult for an adversary to maintain persistence",
    "start": "1660960",
    "end": "1667440"
  },
  {
    "text": "and an ec2 instance that does not so make sure that you're rebuilding frequently where you can",
    "start": "1667440",
    "end": "1672799"
  },
  {
    "text": "what's also an interesting facet to this particular tactic is that rebuilding frequently forces an",
    "start": "1672799",
    "end": "1678960"
  },
  {
    "text": "attacker if he's using a particular exposure to break in repeatedly which will give you a greater opportunity to actually detect their",
    "start": "1678960",
    "end": "1684720"
  },
  {
    "text": "actions and also it's easier to audit a system that only has changes that have occurred",
    "start": "1684720",
    "end": "1689840"
  },
  {
    "text": "within a 24-hour period as opposed to a week a month a year there's a lot less things for you to have to go back and try and",
    "start": "1689840",
    "end": "1695440"
  },
  {
    "text": "figure out what were wrong when you're only looking at what's happened within one day and we'll talk more about that in the incident response",
    "start": "1695440",
    "end": "1701039"
  },
  {
    "text": "portion of the next talk i believe it is",
    "start": "1701039",
    "end": "1705440"
  },
  {
    "text": "so speaking of other support options and in particular aws support is your",
    "start": "1706559",
    "end": "1711760"
  },
  {
    "text": "one-stop shop for any of your concerns security or otherwise if you have an issue and you",
    "start": "1711760",
    "end": "1717760"
  },
  {
    "text": "cannot have it resolved immediately with support they actually are trained and have run books to escalate internally to the",
    "start": "1717760",
    "end": "1723360"
  },
  {
    "text": "proper subject matter expert and that includes reaching out to the aws security team so make sure you're taking advantage of all of your support",
    "start": "1723360",
    "end": "1729760"
  },
  {
    "text": "options what are some other talks that we want people to pay attention to today or",
    "start": "1729760",
    "end": "1735279"
  },
  {
    "text": "yesterday or so the i am best practices talk was i believe yesterday that you can absolutely catch it on",
    "start": "1735279",
    "end": "1741120"
  },
  {
    "text": "youtube and on the slideshare um the other three talks here are all i believe uh later this afternoon or into",
    "start": "1741120",
    "end": "1747600"
  },
  {
    "text": "tomorrow and they go into some of the concepts that we've touched on today in some additional detail security 404",
    "start": "1747600",
    "end": "1754880"
  },
  {
    "text": "incident response in the cloud is in this room right after lunch and it's kind of the follow-on to this talk",
    "start": "1754880",
    "end": "1762080"
  },
  {
    "text": "don't forget last year we released and we're updating the security best practices white paper that white paper actually has specific",
    "start": "1762159",
    "end": "1768480"
  },
  {
    "text": "tactics to services uh in in the area of security configuration",
    "start": "1768480",
    "end": "1774240"
  },
  {
    "text": "management also alerting and monitoring so pay attention to that particular paper pretty good stuff and specific to each",
    "start": "1774240",
    "end": "1780480"
  },
  {
    "text": "and every one of the actual services other aws security resources the adwords security blog",
    "start": "1780480",
    "end": "1786480"
  },
  {
    "text": "pay attention there we actually provide a good bit of information in terms of in one case we've actually provided",
    "start": "1786480",
    "end": "1792399"
  },
  {
    "text": "incident response information already uh the aid of a security center paying attention to the security bulletins there and then if you need to reach out to the",
    "start": "1792399",
    "end": "1798880"
  },
  {
    "text": "aws security team or an email away aws staff security at amazon.com",
    "start": "1798880",
    "end": "1804720"
  },
  {
    "text": "at the beginning of the talk we brought up a few prerequisites that we said we'd assumed that you were very familiar with if not",
    "start": "1805520",
    "end": "1812960"
  },
  {
    "text": "here's some documentation links on how to get get started with those or how to get familiar with them",
    "start": "1812960",
    "end": "1819600"
  },
  {
    "text": "it's not a classic intrusion detection system mechanism but again building alerts and billing data those are things",
    "start": "1820640",
    "end": "1825679"
  },
  {
    "text": "that you'd like to pay attention to we've also got those urls there again",
    "start": "1825679",
    "end": "1831279"
  },
  {
    "text": "consider using programmatic access to building data to create your own meter-based alerts so we want to make sure that everybody",
    "start": "1831279",
    "end": "1836880"
  },
  {
    "text": "takes away today so if you came in here thinking about traditional intrusion detection",
    "start": "1836880",
    "end": "1842399"
  },
  {
    "text": "your network your servers we're hoping that you that you're going to go back and",
    "start": "1842399",
    "end": "1847760"
  },
  {
    "text": "look at your entire aws account all of the resources all of the services that you're using we provide a",
    "start": "1847760",
    "end": "1853679"
  },
  {
    "text": "wide variety of mechanisms of security controls in each of our services that we're really hoping you'll take",
    "start": "1853679",
    "end": "1859039"
  },
  {
    "text": "advantage of we've provided some resources here today they're really just intended as starting",
    "start": "1859039",
    "end": "1865440"
  },
  {
    "text": "points they cover some of the services there's a lot more out there please do feel free to tinker with them",
    "start": "1865440",
    "end": "1871760"
  },
  {
    "text": "let us know what works for you what doesn't what we should or if you're able to add stuff",
    "start": "1871760",
    "end": "1877600"
  },
  {
    "text": "to those scripts please do let us know don't forget to check out the expo floor and visit a lot of aws partners who are",
    "start": "1877600",
    "end": "1883519"
  },
  {
    "text": "providing solutions in the traditional intrusion detection space as well as starting to look at how to integrate a number of our newest",
    "start": "1883519",
    "end": "1888880"
  },
  {
    "text": "features such as cloudtrail into their products they'll provide you a much more holistic intrusion detection mechanism for an aws",
    "start": "1888880",
    "end": "1894000"
  },
  {
    "text": "environment the the sets of code that we showed you",
    "start": "1894000",
    "end": "1899519"
  },
  {
    "text": "snippets of the full scripts are available in s3 online",
    "start": "1899519",
    "end": "1906159"
  },
  {
    "text": "and thanks a lot for showing up for this talk it's really cool to see as many people in the audience that are as passionate about security as we are",
    "start": "1906159",
    "end": "1912240"
  },
  {
    "text": "so keep showing up to the security talks that's pretty groovy and give us feedback",
    "start": "1912240",
    "end": "1917440"
  },
  {
    "text": "we're thanks",
    "start": "1919519",
    "end": "1921840"
  }
]