[
  {
    "text": "ah so we're gonna talk about a little bit of a deep dive of chef and AWS and",
    "start": "0",
    "end": "6870"
  },
  {
    "text": "some usage patterns that we see on AWS to make you more successful with AWS",
    "start": "6870",
    "end": "12059"
  },
  {
    "text": "services so the agenda for today is",
    "start": "12059",
    "end": "18359"
  },
  {
    "text": "we'll do a quick introduction we'll do a quick recap of some of the paradigms and chef so when I'm using nomenclature you",
    "start": "18359",
    "end": "25439"
  },
  {
    "text": "guys remember what that means we'll do a quick introduction of ourselves and then we're gonna talk about user management",
    "start": "25439",
    "end": "31439"
  },
  {
    "text": "with chef managing versions not only in chef but also versions of applications as well we're gonna talk about something",
    "start": "31439",
    "end": "38370"
  },
  {
    "text": "really awesome called test-driven infrastructure with chef and then give you a sampling of some AWS cookbooks",
    "start": "38370",
    "end": "44910"
  },
  {
    "text": "that'll help you use AWS resources inside of your chef recipes or cookbooks and then lastly we're gonna talk about",
    "start": "44910",
    "end": "51989"
  },
  {
    "text": "something called chef provisioning and how you can provision machines load balancers and other components of AWS",
    "start": "51989",
    "end": "58559"
  },
  {
    "text": "directly inside of recipes so a quick introduction of who we are John will",
    "start": "58559",
    "end": "65250"
  },
  {
    "text": "introduce himself here in a minute when we go into the demo portion but I'm Michael juicy I'm a partner evangelist",
    "start": "65250",
    "end": "71070"
  },
  {
    "text": "for chef there are my pertinent details if you want to you know tweet love this",
    "start": "71070",
    "end": "76080"
  },
  {
    "text": "session or session was horrible feel free to tag me on that and then John Keizer as well who is our chief mad",
    "start": "76080",
    "end": "82530"
  },
  {
    "text": "scientist so let's talk about the building blocks of the components of",
    "start": "82530",
    "end": "88380"
  },
  {
    "text": "Chef so at the very base level in chef we have something that's called",
    "start": "88380",
    "end": "93570"
  },
  {
    "text": "resources and resources are just objects that we want to manipulate the objects object can be local on the operating",
    "start": "93570",
    "end": "100979"
  },
  {
    "text": "system that you're running on or it could be something that you've abstracted away like something that you're going to manipulate via an API",
    "start": "100979",
    "end": "107130"
  },
  {
    "text": "call like we'll show when we talk about the machine resource that we'll talk about later those get collected into what's called",
    "start": "107130",
    "end": "113159"
  },
  {
    "text": "recipes and then recipes are essentially the collections of resources that you",
    "start": "113159",
    "end": "118229"
  },
  {
    "text": "run to make something happen on your machine right so you want to have you",
    "start": "118229",
    "end": "123810"
  },
  {
    "text": "know Apache installed so you would have resources to start the service to install the package and to change your",
    "start": "123810",
    "end": "129929"
  },
  {
    "text": "httpd.conf file those read he's then get collected in what's called cookbooks and cookbooks are essentially",
    "start": "129929",
    "end": "137220"
  },
  {
    "text": "the packaged component the recipe and all the other supporting files that you need to install a particular application",
    "start": "137220",
    "end": "143790"
  },
  {
    "text": "and then you can collect cookbooks and also something else called attributes",
    "start": "143790",
    "end": "149730"
  },
  {
    "text": "and what's called roles and basically you can say this machine is a web server and you can apply the role to it and you",
    "start": "149730",
    "end": "156330"
  },
  {
    "text": "can say I want the recipe Apache I also want recipe users I want recipe like",
    "start": "156330",
    "end": "162810"
  },
  {
    "text": "pseudo as well to set up all the other base components so every time that you need a web server you just apply the role web server instead of having to",
    "start": "162810",
    "end": "169680"
  },
  {
    "text": "worry about all the little individual individual components and then all the",
    "start": "169680",
    "end": "175200"
  },
  {
    "text": "machines or nodes are we call inside of Chef we call machines that were managing",
    "start": "175200",
    "end": "180570"
  },
  {
    "text": "so the instances that we're managing nodes and those nodes belong to an environment so environments allow you to",
    "start": "180570",
    "end": "186390"
  },
  {
    "text": "kind of abstract out usage patterns so devtest production and kind of all your",
    "start": "186390",
    "end": "192090"
  },
  {
    "text": "standard typical environments that you see and there's something really cool in environments where you conversion lock",
    "start": "192090",
    "end": "198030"
  },
  {
    "text": "environments to particular versions of cookbooks which we'll show here in a second and then lastly data bags so data",
    "start": "198030",
    "end": "204030"
  },
  {
    "text": "bags are somewhat of an abstract thing to explain but when you understand what",
    "start": "204030",
    "end": "209100"
  },
  {
    "text": "they do they're really really powerful it's essentially just a JSON object store or data stores so you can put",
    "start": "209100",
    "end": "214860"
  },
  {
    "text": "arbitrary JSON formatted data in there and you can retrieve it and use it and I'll show you an example of how you can",
    "start": "214860",
    "end": "220470"
  },
  {
    "text": "actually use those actually two examples so the other important thing when you",
    "start": "220470",
    "end": "226320"
  },
  {
    "text": "talk about chef is that it is infrastructure is code so what does this mean so it's the ability to",
    "start": "226320",
    "end": "232620"
  },
  {
    "text": "programmatically define your infrastructure configurations where you were using versioning focusing on code",
    "start": "232620",
    "end": "240510"
  },
  {
    "text": "reuse as well so creating libraries and then also source control management right so it's beginning to abstract our",
    "start": "240510",
    "end": "246650"
  },
  {
    "text": "infrastructure inside of a codebase and then we treat it like a code base and the nice thing is is that when we do",
    "start": "246650",
    "end": "252780"
  },
  {
    "text": "that we should be able to recreate our infrastructure from three things a code repository which is all your cookbooks",
    "start": "252780",
    "end": "259109"
  },
  {
    "text": "and recipes and so forth a data backup which AWS has many ways to help you take",
    "start": "259109",
    "end": "264780"
  },
  {
    "text": "data backups and things like that and compute resources and AWS has a lot of compute resources as well so if for",
    "start": "264780",
    "end": "271740"
  },
  {
    "text": "some reason you know something happened to your environment like somebody decided to delete everything and this is",
    "start": "271740",
    "end": "277740"
  },
  {
    "text": "a true story I've heard this story multiple times where somebody goes into AWS and they delete the production",
    "start": "277740",
    "end": "283620"
  },
  {
    "text": "environment and they're like whoops and delete I'll terminate all the production instances and within an hour they're",
    "start": "283620",
    "end": "289530"
  },
  {
    "text": "back up and running because they had a data backup and they had all of the cookbooks and everything that they needed in the code repository to",
    "start": "289530",
    "end": "295770"
  },
  {
    "text": "recreate their environment from code so this is a important concept to keep in",
    "start": "295770",
    "end": "301350"
  },
  {
    "text": "mind as we talk about how you work with chef so let's talk about our first topic",
    "start": "301350",
    "end": "306600"
  },
  {
    "text": "so user management so managing access to",
    "start": "306600",
    "end": "312660"
  },
  {
    "text": "instances can be rather problematic when we talk to AWS solutions architects this is kind of the number one use case that",
    "start": "312660",
    "end": "319320"
  },
  {
    "text": "they want to try and help their customers solve so how do you grant access SSH access manage people's keys",
    "start": "319320",
    "end": "326490"
  },
  {
    "text": "on machine and so forth and especially not just you know you just don't run in",
    "start": "326490",
    "end": "332490"
  },
  {
    "text": "one region or availability zone you have to do this globally now as well right so the challenge is we want to try and",
    "start": "332490",
    "end": "338490"
  },
  {
    "text": "provide user authentication and management that's going to be resilient to failures as well so if your LDAP server goes you still want to be able to",
    "start": "338490",
    "end": "345390"
  },
  {
    "text": "log into the machines so by default chef",
    "start": "345390",
    "end": "350700"
  },
  {
    "text": "has some nice resources that allow you to manage users and groups right so there is a user resource I can create",
    "start": "350700",
    "end": "356940"
  },
  {
    "text": "Han I'm going to put him in the group rebels and his home is Carbonite and",
    "start": "356940",
    "end": "362700"
  },
  {
    "text": "he's a hipster so he uses Z show and then we have the group rebels and we're",
    "start": "362700",
    "end": "369780"
  },
  {
    "text": "gonna put Luke and Leia right so we can manage these and this is cool this works fairly well it doesn't give me any",
    "start": "369780",
    "end": "375590"
  },
  {
    "text": "ability to manage SSH keys also if I have to delete Han because Han you know",
    "start": "375590",
    "end": "381720"
  },
  {
    "text": "decided to get angry with Leah and you know fly off from Hoth and then he",
    "start": "381720",
    "end": "386790"
  },
  {
    "text": "changed his mind and he comes back right but if we do have to delete them it's",
    "start": "386790",
    "end": "392640"
  },
  {
    "text": "problematic because I'm not I don't have that state of whether if Han should be created or deleted and this kind of",
    "start": "392640",
    "end": "398729"
  },
  {
    "text": "becomes untenable so what we have is we have a cookbook right so it's a community-created",
    "start": "398729",
    "end": "405419"
  },
  {
    "text": "cookbook Fletcher Nichols in our community is the one who actually created it and it allows you to store",
    "start": "405419",
    "end": "411840"
  },
  {
    "text": "the user data in a data bag and this is one of the awesome things about data bags is now I can store this this kind",
    "start": "411840",
    "end": "417240"
  },
  {
    "text": "of arbitrary data that I need to configure my system inside of chef and then I can create it and use it inside",
    "start": "417240",
    "end": "423180"
  },
  {
    "text": "of chef as well so the user cookbooks allows me to create update and delete users and the users SSH keys so all I",
    "start": "423180",
    "end": "431699"
  },
  {
    "text": "need to do is describe Hahn inside of the data bag so you can see all of the",
    "start": "431699",
    "end": "437370"
  },
  {
    "text": "same fields that I was describing over on that other screen are here as well and any other arbitrary data that I",
    "start": "437370",
    "end": "444539"
  },
  {
    "text": "wanted to put in here about Hahn as well like maybe his password to get into the",
    "start": "444539",
    "end": "450330"
  },
  {
    "text": "Millennium Falcon computer system right and if it was a password the awesome thing is is that you could actually",
    "start": "450330",
    "end": "456270"
  },
  {
    "text": "encrypt this inside of chef as well and in what we call an encrypted data bag so",
    "start": "456270",
    "end": "462139"
  },
  {
    "text": "when we take it it give when we use the user's cookbook it actually gets a lot more simpler because now all I have to",
    "start": "462139",
    "end": "468270"
  },
  {
    "text": "do is that I would just want to say that I want to manage the group rebels and I'm gonna remove and create so inside of",
    "start": "468270",
    "end": "475229"
  },
  {
    "text": "here I could specify if I wanted to remove Han and if I say that I want to",
    "start": "475229",
    "end": "480599"
  },
  {
    "text": "remove Han when this actually reads this data it'll go through and remove Han for",
    "start": "480599",
    "end": "486029"
  },
  {
    "text": "me right so all I have to do is mark this person as deleted in my data bag and then he'll be he or she will be",
    "start": "486029",
    "end": "491729"
  },
  {
    "text": "deleted off of all of my machines in my fleet and then the now the nice thing",
    "start": "491729",
    "end": "496919"
  },
  {
    "text": "it'll go through and create all of my rebels as well very easily so it crazed the data bag it says show me all of",
    "start": "496919",
    "end": "503520"
  },
  {
    "text": "where all the use give me the users where their group is rebels and I'm going to create or remove them so that's",
    "start": "503520",
    "end": "512370"
  },
  {
    "text": "user management let's talk about versioning with chef so if you have any questions feel free to grab us",
    "start": "512370",
    "end": "517620"
  },
  {
    "text": "afterwards or come by our booth and we can talk more about some of these things that I'm talking about here because",
    "start": "517620",
    "end": "523440"
  },
  {
    "text": "we're kind of glancing over some of this stuff so we can have a bigger conversation later uh so problem with",
    "start": "523440",
    "end": "529560"
  },
  {
    "text": "versioning with Jeff so different instances often need different versions and applique of applications and cookbooks and the",
    "start": "529560",
    "end": "536430"
  },
  {
    "text": "reason is is because I might be testing my cookbook and I don't want it to leak into my production environment and break",
    "start": "536430",
    "end": "542160"
  },
  {
    "text": "my production environment right so I want to be able to control as I'm making changes and testing changes to my",
    "start": "542160",
    "end": "548220"
  },
  {
    "text": "infrastructure inside of chef I want to control when I push that into the production environment so versioning",
    "start": "548220",
    "end": "555390"
  },
  {
    "text": "with chefs so cookbooks are versioned right everyone hopefully knows this it",
    "start": "555390",
    "end": "560490"
  },
  {
    "text": "leverages what we call semantic versioning and if you want to learn about semantic versioning there is a URL there that is completely washed out so",
    "start": "560490",
    "end": "570150"
  },
  {
    "text": "it's SEM ve R org so if you just search for semantic versioning on your",
    "start": "570150",
    "end": "575400"
  },
  {
    "text": "preferred search engine then it allow you to find this very easily but",
    "start": "575400",
    "end": "580770"
  },
  {
    "text": "versioning allows environments and also machines to run different versions of cookbooks based upon what they need to",
    "start": "580770",
    "end": "587100"
  },
  {
    "text": "do and why they what what their role is in the environment and it's commonly as I said used to test cookbooks and lower",
    "start": "587100",
    "end": "593730"
  },
  {
    "text": "environments before I actually push them into a production environment so what I can do inside of chef is I can describe",
    "start": "593730",
    "end": "599970"
  },
  {
    "text": "what we call environments so you can lock an environment to a particular version of a cookbook so I could say",
    "start": "599970",
    "end": "606630"
  },
  {
    "text": "here that because I'm in dev I'm going to say my app is 1.1 and in prod it's",
    "start": "606630",
    "end": "612900"
  },
  {
    "text": "gonna still be at 1 right so I don't want I'm gonna test these changes in my lower environment and then push them up",
    "start": "612900",
    "end": "619650"
  },
  {
    "text": "there's also tooling there's a tool that we ship called Berk shelf that helps you manage dependencies as well and also",
    "start": "619650",
    "end": "626120"
  },
  {
    "text": "locking environments to versions so preventing people from uploading new versions of cookbooks and changing an",
    "start": "626120",
    "end": "633090"
  },
  {
    "text": "environment so you can freeze an environment to make sure that it's always stuck at that and you can't squash that accidentally so this is a",
    "start": "633090",
    "end": "640980"
  },
  {
    "text": "very simple way of how you just use versioning and cookbooks now you can also specify inside of roles and other",
    "start": "640980",
    "end": "647310"
  },
  {
    "text": "places to say use a particular version of a cookbook as well if you don't want to do it on this global level but that's",
    "start": "647310",
    "end": "653370"
  },
  {
    "text": "just my cookbook so how do we how do we want to version application data right",
    "start": "653370",
    "end": "658440"
  },
  {
    "text": "so I have a particular bar it's on a remote resource somewhere so it's on an",
    "start": "658440",
    "end": "665160"
  },
  {
    "text": "artifact server maybe it's on s3 and I want to download this war and I would have put it into my Tomcat home",
    "start": "665160",
    "end": "670709"
  },
  {
    "text": "right wherever my war home is set for so I've got my URL and I've also got the",
    "start": "670709",
    "end": "676620"
  },
  {
    "text": "current version here as well so in chef's we have something called attributes and attributes are pretty",
    "start": "676620",
    "end": "682620"
  },
  {
    "text": "powerful it allows you to basically write how you want something done and then the data of what actually gets done",
    "start": "682620",
    "end": "689459"
  },
  {
    "text": "is stored inside of an attribute so I can just bump this version and I'll get the next version of my war right the",
    "start": "689459",
    "end": "696000"
  },
  {
    "text": "problem is is if I store this data inside of my cookbook I actually have to release my cookbook right and and",
    "start": "696000",
    "end": "701940"
  },
  {
    "text": "basically release my whole and do a release of my cookbook bump-bump my cookbook version and if I'm and if I'm",
    "start": "701940",
    "end": "708149"
  },
  {
    "text": "producing this war a lot then I'm going to be updating my cookbooks a lot so we",
    "start": "708149",
    "end": "713310"
  },
  {
    "text": "don't want to necessarily store that data in the cookbook the other problem is is that when we're using a cookbook",
    "start": "713310",
    "end": "719640"
  },
  {
    "text": "attribute we can't link together other applications so who has an application where it's just one application right",
    "start": "719640",
    "end": "727670"
  },
  {
    "text": "very few of you I think right you have systems of machines that work together",
    "start": "727670",
    "end": "732750"
  },
  {
    "text": "that all run a different application that creates a service right and so you want to be able to abstract the idea of",
    "start": "732750",
    "end": "738779"
  },
  {
    "text": "the service and the versions of the different services that you might have running in your environment so data bags",
    "start": "738779",
    "end": "745110"
  },
  {
    "text": "are another solution to allow you to kind of collect all of this information about a particular environment and also",
    "start": "745110",
    "end": "751079"
  },
  {
    "text": "the application so I can actually take Deb and prod and I can say Maya the war",
    "start": "751079",
    "end": "757260"
  },
  {
    "text": "itself is gonna be 1.1 in dev and 1.9 I don't know why I pick numbers that are",
    "start": "757260",
    "end": "763500"
  },
  {
    "text": "so hard to say don't roll off the tongue very well so I can choose different versions and then inside of my data bag",
    "start": "763500",
    "end": "770760"
  },
  {
    "text": "I can inside of my recipe now I can actually consume this so based upon the environment that I'm running in it will",
    "start": "770760",
    "end": "777720"
  },
  {
    "text": "get back to the appropriate data bag so that's what's happening here is essentially we're querying we're trying",
    "start": "777720",
    "end": "782850"
  },
  {
    "text": "to find the item my app inside of my data bag and this will actually pull that back ah and then basically the",
    "start": "782850",
    "end": "792930"
  },
  {
    "text": "version will get pushed in I saw it something that wasn't syntactically",
    "start": "792930",
    "end": "798209"
  },
  {
    "text": "correct so it threw me off there first second ah but this is a good idea of how you would do it this chef people in the room",
    "start": "798209",
    "end": "804780"
  },
  {
    "text": "will realize what's wrong so let's talk about test-driven infrastructure with chef so test-driven infrastructure is",
    "start": "804780",
    "end": "814230"
  },
  {
    "text": "something that is getting extremely popular and it's gotten extremely popular in the last year if you haven't",
    "start": "814230",
    "end": "820650"
  },
  {
    "text": "checked it out I really encourage you to kind of take this talk and use the links at the end and learn more about what",
    "start": "820650",
    "end": "826320"
  },
  {
    "text": "we're doing in that space because it's really really cool so really what test-driven infrastructure is about is bringing the best practices test-driven",
    "start": "826320",
    "end": "833910"
  },
  {
    "text": "development to the infrastructure and operations world right so now that I'm doing infrastructure is code and I'm",
    "start": "833910",
    "end": "840570"
  },
  {
    "text": "treating my infrastructure configurations as a code base I can then begin to use the other",
    "start": "840570",
    "end": "847170"
  },
  {
    "text": "paradigms of software engineering to make my development of this infrastructure code better and that's",
    "start": "847170",
    "end": "852180"
  },
  {
    "text": "what we're doing here with tester of an infrastructure it also helps me provide a workflow of best practices so that as",
    "start": "852180",
    "end": "858570"
  },
  {
    "text": "I'm sharing content with other people I'm doing things that are nice to them right and and trying to be a good",
    "start": "858570",
    "end": "865230"
  },
  {
    "text": "developer with the other people that I'm working with so if you don't know what test-driven development is test-driven",
    "start": "865230",
    "end": "870960"
  },
  {
    "text": "development is this mantra of red green refactor right so the first thing I do",
    "start": "870960",
    "end": "877230"
  },
  {
    "text": "is I write a test and that test will fail because I don't have any code to actually run that test against right so",
    "start": "877230",
    "end": "885150"
  },
  {
    "text": "you write the test of the the state of the way you want things to be when the code is actually written and then when",
    "start": "885150",
    "end": "892050"
  },
  {
    "text": "you write then you actually go make the test green by writing the code that makes the test pass right so we're",
    "start": "892050",
    "end": "897840"
  },
  {
    "text": "writing our tests first and then we go and we refactor and we you know cause premature premature offered optimization",
    "start": "897840",
    "end": "904860"
  },
  {
    "text": "is the root of all evil so we don't want to prematurely optimize we go back and we optimize later right uh and then we",
    "start": "904860",
    "end": "912150"
  },
  {
    "text": "just continue this kind of cycle every time that we need to add a feature or a change so this is bringing this into the",
    "start": "912150",
    "end": "917670"
  },
  {
    "text": "infrastructure world so the old workflow for developing chef cookbooks was we'd",
    "start": "917670",
    "end": "923160"
  },
  {
    "text": "write some cookbook code we maybe do a vagrant up write a vagrant for a bigger provision if I have the machine already",
    "start": "923160",
    "end": "929100"
  },
  {
    "text": "working I verify that it works maybe it breaks I go to pre-production I do",
    "start": "929100",
    "end": "934449"
  },
  {
    "text": "some more ad hoc verification I go to production and then broken production right the new workflow which is like a",
    "start": "934449",
    "end": "941980"
  },
  {
    "text": "cake filled with M&Ms or yeah that's that that's how good it is so we write",
    "start": "941980",
    "end": "952209"
  },
  {
    "text": "some cookbook code we run some tooling to test for a cookbook correctness and we also run we can write and run some",
    "start": "952209",
    "end": "960009"
  },
  {
    "text": "unit tests as well to make sure that when I'm configuring my system it's actually behaving the way that I think",
    "start": "960009",
    "end": "965439"
  },
  {
    "text": "right we go into pre-production we can run these integration tests we can run",
    "start": "965439",
    "end": "970959"
  },
  {
    "text": "the same unit tests in the code correctness in an automated system like Travis or Jenkins or something like that",
    "start": "970959",
    "end": "977799"
  },
  {
    "text": "to actually verify and also take in changes from other people as well because we're not developing cookbooks",
    "start": "977799",
    "end": "983319"
  },
  {
    "text": "in isolation and we're developing cookbooks as a team and then we can actually verify that things are going to",
    "start": "983319",
    "end": "988449"
  },
  {
    "text": "work correctly when we bring in the set and then when we bring it brought in the set we can then go to production right",
    "start": "988449",
    "end": "993639"
  },
  {
    "text": "and our chances of success are higher they're not 100% but they're better right and there are some tools of the",
    "start": "993639",
    "end": "1001679"
  },
  {
    "text": "trade that you should look at if you're interested in test-driven infrastructure so two of them food critic Andrew boo",
    "start": "1001679",
    "end": "1008129"
  },
  {
    "text": "cop they're basically sanity checking to make sure that you're using kind of community best practices not only in the",
    "start": "1008129",
    "end": "1013980"
  },
  {
    "text": "chef community but also in the Ruby community as well there are unit tests so chef spec it",
    "start": "1013980",
    "end": "1020669"
  },
  {
    "text": "basically is a version of r-spec that we've we've extended our spec our spec to actually make sure that your Ruby",
    "start": "1020669",
    "end": "1027209"
  },
  {
    "text": "inside of are your resources inside of chef are actually behaving correctly and",
    "start": "1027209",
    "end": "1032279"
  },
  {
    "text": "then we have some integration tests tooling as well so one of the tools of the trade is Test Kitchen test kitchen",
    "start": "1032279",
    "end": "1038880"
  },
  {
    "text": "allows you to basically run the other integration tests like server spec and batts and server spec is a really cool",
    "start": "1038880",
    "end": "1044699"
  },
  {
    "text": "tool where it'll actually go to your machine and actually verify that this port is actually listening the way you",
    "start": "1044699",
    "end": "1050460"
  },
  {
    "text": "expect it to or this package actually got installed or this service is actually running as well server spec is",
    "start": "1050460",
    "end": "1056850"
  },
  {
    "text": "a cool one to look out because also people use it some sometimes in a monitoring environment as well to actually verify that things are are",
    "start": "1056850",
    "end": "1063000"
  },
  {
    "text": "behaving the way you expect them to so let's show a quick example of how you",
    "start": "1063000",
    "end": "1068539"
  },
  {
    "text": "can extend this so this is this is an example that I think is actually really",
    "start": "1068539",
    "end": "1075380"
  },
  {
    "text": "cool so I want to check to make sure that I'm doing some sort of compliance",
    "start": "1075380",
    "end": "1080929"
  },
  {
    "text": "check so I wrote compliance rule number one and what I'm going to do here is of",
    "start": "1080929",
    "end": "1086929"
  },
  {
    "text": "course the boxes didn't line up in the final cut so I'm going to find all of",
    "start": "1086929",
    "end": "1092750"
  },
  {
    "text": "the resources that are type of mount or I'm going to find where I'm actually",
    "start": "1092750",
    "end": "1097759"
  },
  {
    "text": "calling an execute block and my command is mount so I want to check to make sure",
    "start": "1097759",
    "end": "1103549"
  },
  {
    "text": "to see if people are putting things in a recipe that I don't want them to do and one of the things I don't want them to do is mount things that they're not",
    "start": "1103549",
    "end": "1109580"
  },
  {
    "text": "supposed to write because they mount up a volume or a USB key or something then",
    "start": "1109580",
    "end": "1114799"
  },
  {
    "text": "copy all my data off of course we don't have USB keys and AWS right so we want",
    "start": "1114799",
    "end": "1122509"
  },
  {
    "text": "to check to make sure this doesn't happen right and so we're mate we're doing these mounts and what's cool is",
    "start": "1122509",
    "end": "1128149"
  },
  {
    "text": "that when I'm running my integration tests and all my testing and so an automated environment can actually pick",
    "start": "1128149",
    "end": "1134629"
  },
  {
    "text": "my cookbooks up run this test and nobody hit the the people who have control of",
    "start": "1134629",
    "end": "1139850"
  },
  {
    "text": "this isn't the same person who's writing this right and then I can actually verify if we're but we're violating",
    "start": "1139850",
    "end": "1147289"
  },
  {
    "text": "policies right so maybe you could extend this to say I don't want certain ports opened up or I don't want people to do",
    "start": "1147289",
    "end": "1153590"
  },
  {
    "text": "certain things inside of their recipes to basically break compliance and break our security because we have the",
    "start": "1153590",
    "end": "1158929"
  },
  {
    "text": "standard way of doing things and the standard way that we want to work make sense all right so let's talk about AWS",
    "start": "1158929",
    "end": "1167629"
  },
  {
    "text": "cookbooks there's actually a lot of cookbooks out there inside of what we",
    "start": "1167629",
    "end": "1174110"
  },
  {
    "text": "call a supermarket so chef has a community site it's called supermarket of course because we're chefs and it",
    "start": "1174110",
    "end": "1182450"
  },
  {
    "text": "contains a lot of community cookbooks some of these are maintained by us chef and some of them are contributed to",
    "start": "1182450",
    "end": "1189549"
  },
  {
    "text": "contributed by the community so the first one is the AWS cookbook and I'll give you examples of each one of these I",
    "start": "1189549",
    "end": "1195769"
  },
  {
    "text": "also give you links to each one of these as well so the AWS cookbook allows you to manage",
    "start": "1195769",
    "end": "1201890"
  },
  {
    "text": "load balancers so register machines on a load balancer you can also manipulate elastic IPS and register a machine",
    "start": "1201890",
    "end": "1208370"
  },
  {
    "text": "against elastic IPS create EBS volumes do EBS raid change resource tagging and",
    "start": "1208370",
    "end": "1214880"
  },
  {
    "text": "so forth the security cookbook allows you to manipulate security groups and ruled the RDS cookbook obviously a man",
    "start": "1214880",
    "end": "1225410"
  },
  {
    "text": "allows you to manage RDS and create new RDS services and then lastly the route",
    "start": "1225410",
    "end": "1230720"
  },
  {
    "text": "53 cookbook so let's look at examples of each one of these so we can pull down",
    "start": "1230720",
    "end": "1236690"
  },
  {
    "text": "our data bag item so get our keys this is optional you know ideally you want to",
    "start": "1236690",
    "end": "1241940"
  },
  {
    "text": "be using iam roles and if the machine is part of that iam rolled then you just need to have the role allow them to",
    "start": "1241940",
    "end": "1247730"
  },
  {
    "text": "register themselves for the load balancer and then we actually perform the register so basically all I need to",
    "start": "1247730",
    "end": "1252770"
  },
  {
    "text": "do inside of my recipe on the instance is say the name of the load balancer and that I want to register against that",
    "start": "1252770",
    "end": "1258740"
  },
  {
    "text": "load balancer so every time the machine comes up it can discover its load balancer you could actually have this as",
    "start": "1258740",
    "end": "1264380"
  },
  {
    "text": "part of a search so you could search and get the load balancer name that you know and then register against that load",
    "start": "1264380",
    "end": "1269900"
  },
  {
    "text": "balancer ah for security for manipulating security groups uh it gives",
    "start": "1269900",
    "end": "1276410"
  },
  {
    "text": "you the resource security group rule and you can just write out the security the rule as you see here also to note you",
    "start": "1276410",
    "end": "1284330"
  },
  {
    "text": "can also use I am roles as well so you don't have to put your keys directly inside of the recipes which isn't really",
    "start": "1284330",
    "end": "1290510"
  },
  {
    "text": "a good practice and then same thing with",
    "start": "1290510",
    "end": "1296510"
  },
  {
    "text": "RDS so you should always run your RDS instances on a t1 micro and basically",
    "start": "1296510",
    "end": "1307880"
  },
  {
    "text": "you just specify this information the other thing is so the DB info then the name you could store all of this",
    "start": "1307880",
    "end": "1314420"
  },
  {
    "text": "information in a database or another attribute that then you can then search on and pull out since this is a database",
    "start": "1314420",
    "end": "1319970"
  },
  {
    "text": "password you should probably store it in an encrypted data bag right odd so using",
    "start": "1319970",
    "end": "1325730"
  },
  {
    "text": "kind of the queries that I showed earlier where you're getting the data bag item out so here we have",
    "start": "1325730",
    "end": "1333440"
  },
  {
    "text": "of creating a route 53 record so very self-explanatory the nice thing is is",
    "start": "1333440",
    "end": "1340490"
  },
  {
    "text": "that if the record already exists and you're just needed to update it you can actually override it which will just update the record as it exists and then",
    "start": "1340490",
    "end": "1350409"
  },
  {
    "text": "lastly all of these have URLs down at the bottom and then also at the end I'll give you a URL for each one of these",
    "start": "1350409",
    "end": "1356090"
  },
  {
    "text": "cookbooks as well so let's get back in the presentation so let's talk about",
    "start": "1356090",
    "end": "1365840"
  },
  {
    "text": "provisioning in AWS so launching new",
    "start": "1365840",
    "end": "1371149"
  },
  {
    "text": "instances in AWS you know you can go to the console there's ec2 tools there's lots of different ways that you can launch",
    "start": "1371149",
    "end": "1377299"
  },
  {
    "text": "instances inside of AWS when you want to launch more than one instance and maybe",
    "start": "1377299",
    "end": "1384259"
  },
  {
    "text": "you want to launch a collection of instances that perform some sort of a task that can kind of be a little bit",
    "start": "1384259",
    "end": "1390019"
  },
  {
    "text": "more problematic so with Chef the common way to launch instances is just to say",
    "start": "1390019",
    "end": "1396320"
  },
  {
    "text": "knife ec2 server create passing the ami the instance type and the other data",
    "start": "1396320",
    "end": "1402620"
  },
  {
    "text": "that you need and it'll go out and in a provision of machine wrap this in a for loop and you're provisioning machines",
    "start": "1402620",
    "end": "1408139"
  },
  {
    "text": "all day right so pretty easy and pretty simple it's great for one-off server",
    "start": "1408139",
    "end": "1414169"
  },
  {
    "text": "creation it's also great for tools that may not have direct integration into ec2",
    "start": "1414169",
    "end": "1419750"
  },
  {
    "text": "so you can use this and you can you know have it's a command line that you run right and as I say it's more like",
    "start": "1419750",
    "end": "1427070"
  },
  {
    "text": "infrastructure as command line not infrastructure as code and that's kind of problematic what if I want many",
    "start": "1427070",
    "end": "1433730"
  },
  {
    "text": "instances or what if I want tiers of instances that are performing a task and providing a service then that doesn't",
    "start": "1433730",
    "end": "1440210"
  },
  {
    "text": "works too well and this is where chef provisioning comes in so chef",
    "start": "1440210",
    "end": "1446509"
  },
  {
    "text": "provisioning allows you to create instances inside of chef recipes and not only instances but load balancers as",
    "start": "1446509",
    "end": "1451970"
  },
  {
    "text": "well and you can also manipulate machine images as well so it allows for more",
    "start": "1451970",
    "end": "1457340"
  },
  {
    "text": "programmatic creation and then you can also create multiple tiers so because chef executes things things in order you",
    "start": "1457340",
    "end": "1464690"
  },
  {
    "text": "can create the database server and then you can that's done then you can and only once that's done and successful then you can",
    "start": "1464690",
    "end": "1471080"
  },
  {
    "text": "go and create the web servers that might be talking to that database server so it allows you to kind of also sequence",
    "start": "1471080",
    "end": "1476149"
  },
  {
    "text": "creation of machines now as well and it's moving us more towards real",
    "start": "1476149",
    "end": "1482120"
  },
  {
    "text": "infrastructure as code so when the term infrastructures code was coined",
    "start": "1482120",
    "end": "1487390"
  },
  {
    "text": "everyone's like yeah but it only kind of manipulates my operating system it doesn't actually manipulate all of my",
    "start": "1487390",
    "end": "1493669"
  },
  {
    "text": "infrastructure right so this allows us to move more towards infrastructure as code and the other thing that I think is",
    "start": "1493669",
    "end": "1501049"
  },
  {
    "text": "really interesting about chef provisioning is that it allows you to consume resources in a manner that best",
    "start": "1501049",
    "end": "1508130"
  },
  {
    "text": "fits people's workflow and for most people a lot of people now their workflow is becoming code right so I",
    "start": "1508130",
    "end": "1515179"
  },
  {
    "text": "don't need a command line I don't need aid to learn how to do API calls or",
    "start": "1515179",
    "end": "1520399"
  },
  {
    "text": "anything like that I can just write it code that I'm used to and I'm already writing recipes why do I need to go",
    "start": "1520399",
    "end": "1525529"
  },
  {
    "text": "learn and write something else right so the way it looks and we're gonna do a",
    "start": "1525529",
    "end": "1531559"
  },
  {
    "text": "demo of it here in just a second but essentially all you need to do is specify a machine the name of the",
    "start": "1531559",
    "end": "1537260"
  },
  {
    "text": "machine what recipes you want and it'll go out to AWS or other places and create",
    "start": "1537260",
    "end": "1544309"
  },
  {
    "text": "the machines for you and with that I like to call John up to the stage and",
    "start": "1544309",
    "end": "1550210"
  },
  {
    "text": "John's gonna give you a quick demo of it",
    "start": "1550210",
    "end": "1554528"
  },
  {
    "text": "thanks Michael sorry for killing your your keynote hello I'm John Kaiser I'm",
    "start": "1560919",
    "end": "1568690"
  },
  {
    "text": "chief mad scientist at chef and about a",
    "start": "1568690",
    "end": "1574580"
  },
  {
    "text": "year ago we started a journey to create chef versioning because well we build",
    "start": "1574580",
    "end": "1581120"
  },
  {
    "text": "distributed applications at chef just like the rest of you and I was in the middle of building one and noticed that",
    "start": "1581120",
    "end": "1587510"
  },
  {
    "text": "I wasn't testing it very much and I wasn't testing it because I the method",
    "start": "1587510",
    "end": "1592940"
  },
  {
    "text": "for bringing up new machines was mysterious to me and I didn't trust the",
    "start": "1592940",
    "end": "1598220"
  },
  {
    "text": "place where we actually recorded how to do that which was in a",
    "start": "1598220",
    "end": "1604799"
  },
  {
    "text": "playbook there was a wiki page that we had where we would put those nice ec2 commands and",
    "start": "1604799",
    "end": "1610799"
  },
  {
    "text": "they would have first of all 50,000 parameters on the command line most of which I didn't understand I was I knew",
    "start": "1610799",
    "end": "1617190"
  },
  {
    "text": "how to write my application but I didn't know how to provision it yet and so the whole thing was scary to me so I would",
    "start": "1617190",
    "end": "1622470"
  },
  {
    "text": "test it on my local machine instead of actually bringing it up the way I should have honestly it made it so that the the",
    "start": "1622470",
    "end": "1629640"
  },
  {
    "text": "process towards the end was it was a worse experience because once it was done I still had to write the recipes I",
    "start": "1629640",
    "end": "1635850"
  },
  {
    "text": "still had to get them up there I'd been doing it from the beginning it would have been better and this the fact that",
    "start": "1635850",
    "end": "1641970"
  },
  {
    "text": "we needed a playbook was weird like if only we had a tool where we could write down what our infrastructure looks like",
    "start": "1641970",
    "end": "1647760"
  },
  {
    "text": "in code and it turns out we do so what",
    "start": "1647760",
    "end": "1654990"
  },
  {
    "text": "we decided to do was build resources to build the things we wanted which were",
    "start": "1654990",
    "end": "1660419"
  },
  {
    "text": "machines and that that's where chef provisioning was born you can see in",
    "start": "1660419",
    "end": "1668159"
  },
  {
    "text": "this sample recipe that I've got here we're going to build two web server",
    "start": "1668159",
    "end": "1674610"
  },
  {
    "text": "machines with a simple web server on them and then we're going to attach them to a local load balancer many of you",
    "start": "1674610",
    "end": "1680460"
  },
  {
    "text": "were here a little early and you saw the a bunch of little green texts blowing down the screen and that was actually me",
    "start": "1680460",
    "end": "1686450"
  },
  {
    "text": "preparing the machines in the demo because it takes three or four minutes to create a machine you also saw me doing it multiple times because the",
    "start": "1686450",
    "end": "1693179"
  },
  {
    "text": "first time I put too much on the machines and I wanted to have them half provision for you so I can show you more",
    "start": "1693179",
    "end": "1700429"
  },
  {
    "text": "provisioning your demo 10 minutes before the speech that's trust in your product",
    "start": "1700429",
    "end": "1707389"
  },
  {
    "text": "so the things that the primary concepts in chef metal are the machine resource",
    "start": "1707750",
    "end": "1714090"
  },
  {
    "text": "obviously that gives you a machine puts recipes on it but it has to work in",
    "start": "1714090",
    "end": "1719970"
  },
  {
    "text": "conjunction with somewhere right you've got to be able to get it up on AWS somehow or get your docker containers up",
    "start": "1719970",
    "end": "1725730"
  },
  {
    "text": "somehow and you have to say what they're gonna look like so that's where the the chef drivers come in and that's what",
    "start": "1725730",
    "end": "1732570"
  },
  {
    "text": "this first this first thing is this is this says with driver AWS and what that's gonna do",
    "start": "1732570",
    "end": "1739910"
  },
  {
    "text": "is going to pull the ADA Bess credentials out of my out of my configuration so that I don't specify",
    "start": "1739910",
    "end": "1746300"
  },
  {
    "text": "them in the recipe and then all the resources whenever I make a machine or whenever I make a load balancer and",
    "start": "1746300",
    "end": "1752180"
  },
  {
    "text": "you'll see it's commented out and that's will uncomment it in the second it's going to use all those credentials so",
    "start": "1752180",
    "end": "1758180"
  },
  {
    "text": "you don't have to put them in the recipe you can also point this a docker and you",
    "start": "1758180",
    "end": "1763730"
  },
  {
    "text": "can also point this at different regions so that's where you can see with data center you can use a chef's provisioning",
    "start": "1763730",
    "end": "1770450"
  },
  {
    "text": "to provision machines in different data centers this is designed both to be a",
    "start": "1770450",
    "end": "1777440"
  },
  {
    "text": "mixed mode so you can put things in different places all that are part of that are all part of your same app like",
    "start": "1777440",
    "end": "1782750"
  },
  {
    "text": "maybe you could a monitoring server in one region and a lot of your resources",
    "start": "1782750",
    "end": "1788030"
  },
  {
    "text": "in another or you yuuji distribute your web servers it's also meant to be repeatable so if you",
    "start": "1788030",
    "end": "1795260"
  },
  {
    "text": "switch out that with driver then you can order out that with data center you can",
    "start": "1795260",
    "end": "1800990"
  },
  {
    "text": "point this recipe at one region and then build the exact same cluster in another",
    "start": "1800990",
    "end": "1807350"
  },
  {
    "text": "that's why this is just chef its repeatable so you can see here that I'm",
    "start": "1807350",
    "end": "1814430"
  },
  {
    "text": "creating those two machines in a loop I made my machine names this is chef it's code and the code here I just I said I",
    "start": "1814430",
    "end": "1822140"
  },
  {
    "text": "want to make two web machines you can imagine lots of ways I can do this I can make I can dynamically create the names",
    "start": "1822140",
    "end": "1828860"
  },
  {
    "text": "and you know dynamically scale the number of web servers I have and then we",
    "start": "1828860",
    "end": "1834080"
  },
  {
    "text": "do a loop to create the machines we put in a machine batch which parallelizes the creation because it kind of sucks to",
    "start": "1834080",
    "end": "1839960"
  },
  {
    "text": "create 100 machines in serial 3 3 minutes each is not bad but 3 minutes",
    "start": "1839960",
    "end": "1846770"
  },
  {
    "text": "times 100 sucks without further ado I'm gonna run the recipe which is what you",
    "start": "1846770",
    "end": "1853250"
  },
  {
    "text": "guys wanted any in the first place what I have right now and let me switch out to show you that",
    "start": "1853250",
    "end": "1860950"
  },
  {
    "text": "is an expired session just one second",
    "start": "1861860",
    "end": "1868800"
  },
  {
    "text": "sorry about that um in fact while I'm doing that I'm going to you know it I'm not gonna show",
    "start": "1868800",
    "end": "1880800"
  },
  {
    "text": "the things in a double yes and we're gonna move on um I disabled LastPass so",
    "start": "1880800",
    "end": "1886110"
  },
  {
    "text": "you so that you wouldn't have a bunch of stuff in the way and so what I'm gonna do here is bring this up with the new",
    "start": "1886110",
    "end": "1895800"
  },
  {
    "text": "load balancer and with the the simple server recipe on each of these machines so I already have the two instances on",
    "start": "1895800",
    "end": "1903780"
  },
  {
    "text": "wave AWS I do not have the load balancer yet so I'm gonna run the chef client on",
    "start": "1903780",
    "end": "1910080"
  },
  {
    "text": "that same recipe what I did was I just uncommented out the simple server recipe so now what chef is gonna do is gonna",
    "start": "1910080",
    "end": "1916710"
  },
  {
    "text": "notice that the two machines exist already this is idempotent and that they don't",
    "start": "1916710",
    "end": "1924420"
  },
  {
    "text": "have that recipe on it yet so they're gonna add that recipe to the to the run list and reconverge the machines and",
    "start": "1924420",
    "end": "1932520"
  },
  {
    "text": "what that's gonna do is put the simple server and python and and a bunch of other fun things onto the machine you",
    "start": "1932520",
    "end": "1940590"
  },
  {
    "text": "can see here it's a it's starting the chef client on the second web machine and it's going to do this in parallel so",
    "start": "1940590",
    "end": "1946620"
  },
  {
    "text": "you'll see in a second the web one some text from web one going on at the same",
    "start": "1946620",
    "end": "1952230"
  },
  {
    "text": "time so this is this is the basics of it",
    "start": "1952230",
    "end": "1957660"
  },
  {
    "text": "you can you can run this multiple times",
    "start": "1957660",
    "end": "1963930"
  },
  {
    "text": "to scale as well while we're waiting for this thing to go I want to show you what",
    "start": "1963930",
    "end": "1969000"
  },
  {
    "text": "that trick looks like if I want a scale because of the item Potence of chef",
    "start": "1969000",
    "end": "1976440"
  },
  {
    "text": "recipes and what that means is that when you run a resource a second time if",
    "start": "1976440",
    "end": "1982230"
  },
  {
    "text": "there are no changes it will do nothing if the thing that you want to exist the machine that you want to exist already",
    "start": "1982230",
    "end": "1988070"
  },
  {
    "text": "exists then we sure better not make another one",
    "start": "1988070",
    "end": "1993870"
  },
  {
    "text": "if it doesn't exist then we create it if it exists and it's not exactly the way",
    "start": "1993870",
    "end": "1999190"
  },
  {
    "text": "you want it if it's not running all the recipes that you want then we will update it and that's what idempotence is",
    "start": "1999190",
    "end": "2004950"
  },
  {
    "text": "all about so you can see there we ran the rear and the the chef client on all",
    "start": "2004950",
    "end": "2015360"
  },
  {
    "text": "of these machines and so we're gonna save this sucker get the and get that",
    "start": "2015360",
    "end": "2021360"
  },
  {
    "text": "third guy in there since we got a little time and then I'll bring Michael back up here while it's running in the background but I want it I want you to",
    "start": "2021360",
    "end": "2032160"
  },
  {
    "text": "see the actual third machine being created while we're looking at it here",
    "start": "2032160",
    "end": "2039710"
  },
  {
    "text": "also happen I didn't save the recipe that's cool there's web 3 and we're",
    "start": "2040220",
    "end": "2046440"
  },
  {
    "text": "reproducing web 2 and stuffin by the end of this demo you get to see the load",
    "start": "2046440",
    "end": "2051720"
  },
  {
    "text": "balancer up there thanks John so this is",
    "start": "2051720",
    "end": "2056850"
  },
  {
    "text": "really awesome and as I said earlier it allows you to really kind of act treat",
    "start": "2056850",
    "end": "2062669"
  },
  {
    "text": "your infrastructure really ask code so now I have repeatability in creating",
    "start": "2062670",
    "end": "2067710"
  },
  {
    "text": "things in a tow us right as John said I can take this exact same recipe and I",
    "start": "2067710",
    "end": "2072960"
  },
  {
    "text": "can now move it and point it at a different region and I could even maybe even pointed at something that's",
    "start": "2072960",
    "end": "2078030"
  },
  {
    "text": "internal if I needed to use something internally as well or locally on my local machine as well and create the",
    "start": "2078030",
    "end": "2083429"
  },
  {
    "text": "exact same cluster that I might be creating somewhere else so so in",
    "start": "2083430",
    "end": "2093360"
  },
  {
    "text": "conclusion just to kind of wrap up so the one main thing is that chef is a journey so the user paradigm I showed",
    "start": "2093360",
    "end": "2101220"
  },
  {
    "text": "you this that's as some people that have been using chef for a while and they're like I don't understand why that's a problem anymore but way as you get",
    "start": "2101220",
    "end": "2108570"
  },
  {
    "text": "started you you you tackle these kind of smaller pieces and then you move up the chain some more complicated pieces right",
    "start": "2108570",
    "end": "2114020"
  },
  {
    "text": "so usually start with the easier paradigms that are easier to solve and work your way up to the bigger paradigms",
    "start": "2114020",
    "end": "2120600"
  },
  {
    "text": "such as application management or creation of instances inside of recipes",
    "start": "2120600",
    "end": "2127200"
  },
  {
    "text": "and the other thing is you need all of these links that you can't see so we'll",
    "start": "2127200",
    "end": "2136589"
  },
  {
    "text": "leave this up if you want to come up and get the links we'll also post the slides so look for them on Twitter I'll use the",
    "start": "2136589",
    "end": "2143490"
  },
  {
    "text": "hashtag reinvent and then also use our name as well you can find me pretty easily and I'll post the links for you",
    "start": "2143490",
    "end": "2150240"
  },
  {
    "text": "guys and gals so you can use them so thank you very much and thank you to John as well",
    "start": "2150240",
    "end": "2157250"
  }
]