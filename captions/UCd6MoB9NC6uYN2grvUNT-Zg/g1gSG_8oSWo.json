[
  {
    "start": "0",
    "end": "95000"
  },
  {
    "text": "my apologies that was for the least important part of this so I'm glad we",
    "start": "1100",
    "end": "7919"
  },
  {
    "text": "got that worked out thank you good afternoon I'm Mac Steinem i'm draftkings",
    "start": "7919",
    "end": "13530"
  },
  {
    "text": "account manager at at AWS a lot of the sessions you've seen and you will see it",
    "start": "13530",
    "end": "20580"
  },
  {
    "text": "at reinvent are often led by a member of the AWS technical team like a product manager and customers but today you'll",
    "start": "20580",
    "end": "28439"
  },
  {
    "text": "only be hearing from members of the draftkings team after I shut up that is",
    "start": "28439",
    "end": "33899"
  },
  {
    "text": "but that's not the only thing that'll make today unique it's also the combination of the scale of the problem",
    "start": "33899",
    "end": "40559"
  },
  {
    "text": "that draftkings faced with their Windows application and the fact that they're here to tell that story at all as their",
    "start": "40559",
    "end": "47460"
  },
  {
    "text": "account manager I've seen firsthand you know just how focused this team is on building experiences for their",
    "start": "47460",
    "end": "53070"
  },
  {
    "text": "customers so it's been great to see the time that they've put in to ensuring that you folks leave with some",
    "start": "53070",
    "end": "58140"
  },
  {
    "text": "interesting ideas of your own so with that I'd like to welcome the CTO of draftkings up to the stage to tell you",
    "start": "58140",
    "end": "63899"
  },
  {
    "text": "about how you can ensure your applications can handle massive spikes in traffic what this team affectionately",
    "start": "63899",
    "end": "71729"
  },
  {
    "text": "refers to as the Gronk effect",
    "start": "71729",
    "end": "75829"
  },
  {
    "text": "all right let's hear me thanks max thanks for coming here to learn about",
    "start": "79350",
    "end": "85380"
  },
  {
    "text": "draftkings and how we scale our infrastructure to handle our really unique traffic pattern excited to walk",
    "start": "85380",
    "end": "92729"
  },
  {
    "text": "you through that so start off we just want to give you guys a summary of what",
    "start": "92729",
    "end": "97890"
  },
  {
    "start": "95000",
    "end": "95000"
  },
  {
    "text": "you're going to get out of today's session so you've probably heard of auto scaling groups and elastic",
    "start": "97890",
    "end": "104399"
  },
  {
    "text": "infrastructure it's a big part of what makes an AWS so famous and so valuable and we're gonna tell you about how we've",
    "start": "104399",
    "end": "112170"
  },
  {
    "text": "sort of adopted some of those capabilities to handle our unique traffic scan traffic pattern so a lot of",
    "start": "112170",
    "end": "120179"
  },
  {
    "text": "scaling patterns revolve around the strategy of scaling based upon what's",
    "start": "120179",
    "end": "125460"
  },
  {
    "text": "coming into your server farm at a particular point in time so this is on demand scaling based upon current usage",
    "start": "125460",
    "end": "132290"
  },
  {
    "text": "you can scale things based upon CPU utilization for instance and this is",
    "start": "132290",
    "end": "138030"
  },
  {
    "text": "sort of built into capabilities right out of it right right out of the box but what we're going to talk about today is",
    "start": "138030",
    "end": "144360"
  },
  {
    "text": "doing something a little bit different and it's scaling based upon predicted demand not what's going to what's",
    "start": "144360",
    "end": "149670"
  },
  {
    "text": "happening right now at the moment but what you think will happen in two up two hours or four hours or whatever amount",
    "start": "149670",
    "end": "155370"
  },
  {
    "text": "of time so before we get into the",
    "start": "155370",
    "end": "160410"
  },
  {
    "start": "159000",
    "end": "159000"
  },
  {
    "text": "nitty-gritty of the technical scaling strategies I wanted to describe a little bit about what draftkings does just so",
    "start": "160410",
    "end": "167430"
  },
  {
    "text": "you have enough context to understand our problem domain so draftkings is a sports media entertainment company and",
    "start": "167430",
    "end": "174900"
  },
  {
    "text": "our primary product is daily fantasy sports for those who don't know who what",
    "start": "174900",
    "end": "180420"
  },
  {
    "text": "daily fantasy sports is the easiest way to describe it is you know by way of hands how many people in the audience",
    "start": "180420",
    "end": "185730"
  },
  {
    "text": "play season-long fantasy sports oh great that's like 100 percent so this is gonna",
    "start": "185730",
    "end": "191010"
  },
  {
    "text": "be pretty easy for me so daily fantasy sports is like season-long fantasy sports except we take the whole concept",
    "start": "191010",
    "end": "197519"
  },
  {
    "text": "and we shrink it down into a much shorter amount of time so for football that would be a week for",
    "start": "197519",
    "end": "203970"
  },
  {
    "text": "NBA could be just a day so you come to the site you draft you follow along you",
    "start": "203970",
    "end": "209400"
  },
  {
    "text": "compete against friends or against other draftkings users and test your skill and knowledge as as",
    "start": "209400",
    "end": "214860"
  },
  {
    "text": "a sports fan and your your team accrues",
    "start": "214860",
    "end": "220530"
  },
  {
    "text": "points based upon how much how well the players you selected did an actual real-life events so that's kind of",
    "start": "220530",
    "end": "227760"
  },
  {
    "text": "what's key to sort of the presentation today is that our users drafting users are following along with real-life",
    "start": "227760",
    "end": "233760"
  },
  {
    "text": "sporting events to get an idea of how their draftkings team is doing so what's",
    "start": "233760",
    "end": "241560"
  },
  {
    "start": "241000",
    "end": "241000"
  },
  {
    "text": "our scale you know basically the point of this slide is that draftkings is at the scale now where we have we have",
    "start": "241560",
    "end": "248099"
  },
  {
    "text": "legit scaling challenges we can't shut this whole thing on one one box and expect it to work over the course of",
    "start": "248099",
    "end": "254670"
  },
  {
    "text": "five and a half years over eight million registered users have tried out draftkings at peak times and on an NFL",
    "start": "254670",
    "end": "261600"
  },
  {
    "text": "Sunday our our API will handle over 1 million requests a minute we do 22,000",
    "start": "261600",
    "end": "268860"
  },
  {
    "text": "entries a minute so this concept of an entry it's basically drafting selling you a ticket to enter into a contest",
    "start": "268860",
    "end": "274139"
  },
  {
    "text": "effectively at the end of the day that's what draftkings sells us tickets into a contest so these are financial transactions where money is actually",
    "start": "274139",
    "end": "280710"
  },
  {
    "text": "exchanging hands not too many other places do that volume of financial",
    "start": "280710",
    "end": "286050"
  },
  {
    "text": "transactions it's an SOA based architecture with over 60 different microservices so we're not just scaling",
    "start": "286050",
    "end": "293130"
  },
  {
    "text": "one sort of monolithic platform here this is a Windows track session so I",
    "start": "293130",
    "end": "300300"
  },
  {
    "text": "want to kind of tie it back to two windows draftkings is primarily based upon of the.net platform our back-end",
    "start": "300300",
    "end": "308460"
  },
  {
    "text": "systems are written in c-sharp and I wanted you guys a sense of why we chose Windows obviously some pretty subjective",
    "start": "308460",
    "end": "315810"
  },
  {
    "text": "material ahead here but you know for draftkings we feel that the Visual Studio IDE in that development",
    "start": "315810",
    "end": "322590"
  },
  {
    "text": "experiences really enables our developers with a high amount of efficiency and the flexibility and power",
    "start": "322590",
    "end": "330450"
  },
  {
    "text": "of the c-sharp language itself c-sharp is a very actively managed and develops language and that over time has added a",
    "start": "330450",
    "end": "337050"
  },
  {
    "text": "lot of different features both statically typed features dynamic features and",
    "start": "337050",
    "end": "342460"
  },
  {
    "text": "interestingly you know it's actually dotnet the platform is actually open-source now so it's now a",
    "start": "342460",
    "end": "348669"
  },
  {
    "text": "cross-platform k-put platform as well but probably most important of why draftkings is I was a Windows technology",
    "start": "348669",
    "end": "356410"
  },
  {
    "text": "company is that the founders new windows developers and I think they very wisely chose to start a company based upon the",
    "start": "356410",
    "end": "363490"
  },
  {
    "text": "skill that they could draw from but that's not to say we're an exclusively windows-based shop we are also using a",
    "start": "363490",
    "end": "368770"
  },
  {
    "text": "variety of other AWS and other types of language technologies all right so",
    "start": "368770",
    "end": "377110"
  },
  {
    "start": "376000",
    "end": "376000"
  },
  {
    "text": "that's it for for for draftkings the background let's get into sort of the",
    "start": "377110",
    "end": "382150"
  },
  {
    "text": "fun stuff and so these gentlemen here is the Gronk effect and for those who don't know we're a boston-based company and",
    "start": "382150",
    "end": "389110"
  },
  {
    "text": "the grant effect is affectionately named after a Rob Gronkowski who plays for the",
    "start": "389110",
    "end": "394840"
  },
  {
    "text": "greatest football team of that's ever existed ever will exist with New England Patriots and Rob Gronkowski is famous",
    "start": "394840",
    "end": "402550"
  },
  {
    "text": "for two things one being a goofball and two catching a lot of touchdowns and",
    "start": "402550",
    "end": "407740"
  },
  {
    "text": "after he catches touchdowns he very dramatically takes the ball and he spikes it in the end zone and the Gronk",
    "start": "407740",
    "end": "416020"
  },
  {
    "text": "effect is named after those spikes as you can see this is not a smooth chart what you're looking at is the draft",
    "start": "416020",
    "end": "423759"
  },
  {
    "text": "kings traffic this is a cloud cloud watch chart for our main yell B so",
    "start": "423759",
    "end": "429610"
  },
  {
    "text": "you're looking at re lb for a Sunday night football game does anyone want to take a guess at what those large spikes",
    "start": "429610",
    "end": "436330"
  },
  {
    "text": "are touchdowns so what you're seeing is",
    "start": "436330",
    "end": "443370"
  },
  {
    "text": "all of our users at Sunday night are watching the same game and a touchdown",
    "start": "443370",
    "end": "448900"
  },
  {
    "text": "occurs and they all flood into the app to see how that touchdown his influence their standings in their daily fantasy",
    "start": "448900",
    "end": "454960"
  },
  {
    "text": "sports contests I think someone already answered the the second question here of what are those like slightly smaller",
    "start": "454960",
    "end": "461440"
  },
  {
    "text": "spikes and those are the commercial breaks so this is the traffic pattern",
    "start": "461440",
    "end": "466810"
  },
  {
    "text": "that we're trying to scale and obviously when your base line can jump up",
    "start": "466810",
    "end": "472449"
  },
  {
    "text": "literally 5x and then come back down minutes a minute you have a unique track so with that I'm gonna invite Eric up",
    "start": "472449",
    "end": "479409"
  },
  {
    "text": "who's our head of site reliability who's gonna tell you how we solve this problem",
    "start": "479409",
    "end": "484830"
  },
  {
    "text": "thank you Jason hello everyone my name is Eric biesecker I'm the director of site reliability at",
    "start": "487800",
    "end": "493749"
  },
  {
    "text": "draftkings my team is responsible for maintaining the production systems which it means that we have to deal with the",
    "start": "493749",
    "end": "500469"
  },
  {
    "text": "scaling challenge and making sure that all the production systems are at scale to meet this demand so let me take a",
    "start": "500469",
    "end": "507789"
  },
  {
    "start": "507000",
    "end": "507000"
  },
  {
    "text": "minute is to go into the different approaches that we've had to or different proaches that we were you or",
    "start": "507789",
    "end": "514268"
  },
  {
    "text": "tried to deal with those large spikes in traffic that Jason mentioned the option one is we could just keep at a scale",
    "start": "514269",
    "end": "521888"
  },
  {
    "text": "that would allow us to serve those traffic spikes but obviously that",
    "start": "521889",
    "end": "527110"
  },
  {
    "text": "wouldn't be an efficient use of servers as there's a lot of times when we wouldn't actually need all those ec2",
    "start": "527110",
    "end": "532569"
  },
  {
    "text": "instances in production the second option would be we would scale as those spikes would occur so from a demand",
    "start": "532569",
    "end": "539829"
  },
  {
    "text": "perspective as demand goes up we could reactively scale to meet the needs there",
    "start": "539829",
    "end": "545290"
  },
  {
    "text": "the challenge we have with that is due to the bootstrapping time to turn on new",
    "start": "545290",
    "end": "551380"
  },
  {
    "text": "instances and have them be able to serve production traffic that can lead to a loss of service to our customers as",
    "start": "551380",
    "end": "558420"
  },
  {
    "text": "those spikes are very short in very short amounts of time so in order to",
    "start": "558420",
    "end": "564029"
  },
  {
    "text": "solve those two challenges we've chosen to go with a approach that allows us to do and to predict what those spikes are",
    "start": "564029",
    "end": "572769"
  },
  {
    "text": "going to be in a given amount of time and then be able to scale up accordingly",
    "start": "572769",
    "end": "579688"
  },
  {
    "start": "580000",
    "end": "580000"
  },
  {
    "text": "let's review some of the challenges that our scaling approach has to account for",
    "start": "580889",
    "end": "586709"
  },
  {
    "text": "obviously the ones that we've talked about right now for the most part is the large increases in traffic that we have",
    "start": "586709",
    "end": "593050"
  },
  {
    "text": "where we have a support about a 5x increase in just HTTP traffic and about",
    "start": "593050",
    "end": "598269"
  },
  {
    "text": "a 2 minute time frame we also can't leverage a lot of caching solutions because a lot of the content that we've",
    "start": "598269",
    "end": "605800"
  },
  {
    "text": "drafting served its users very user specific so we can't use let's say edge heavily to be able to address those",
    "start": "605800",
    "end": "612430"
  },
  {
    "text": "spikes in traffic the last challenge we have is that reactive scaling is too slow we've been able to optimize our",
    "start": "612430",
    "end": "619770"
  },
  {
    "text": "scaling approach to be able to take about six minutes from when we turn easy two instances on till when they can take",
    "start": "619770",
    "end": "626230"
  },
  {
    "text": "start taking customer traffic which is too slow for those two minute spikes in traffic this chart here shows the that",
    "start": "626230",
    "end": "637750"
  },
  {
    "start": "633000",
    "end": "633000"
  },
  {
    "text": "our scaling approach has to also support different types of traffic patterns on",
    "start": "637750",
    "end": "643780"
  },
  {
    "text": "the left you can see a traffic pattern for our site when baseball contests are",
    "start": "643780",
    "end": "649900"
  },
  {
    "text": "going and you can see on the right the traffic pattern for a website when football contests are going as you can",
    "start": "649900",
    "end": "656860"
  },
  {
    "text": "see the scale between NFL or beet football and baseball contests is much",
    "start": "656860",
    "end": "662530"
  },
  {
    "text": "different in both the volume and spikes that occur so our scaling approach has",
    "start": "662530",
    "end": "668350"
  },
  {
    "text": "to be able to handle both situations here is a chart that shows a correlation",
    "start": "668350",
    "end": "675400"
  },
  {
    "start": "672000",
    "end": "672000"
  },
  {
    "text": "between our request count to the website and CPU CPU ization of our services the",
    "start": "675400",
    "end": "683770"
  },
  {
    "text": "scaling approach that we're trying to do is to predict what that peak is so we can scale enough ec2 instances to be",
    "start": "683770",
    "end": "689440"
  },
  {
    "text": "able to handle that spike and make sure that we don't run out of CPU capacity so",
    "start": "689440",
    "end": "699640"
  },
  {
    "start": "698000",
    "end": "698000"
  },
  {
    "text": "I want to take a minute to go over some of the approaches that draftkings had used in the past to scale our system",
    "start": "699640",
    "end": "706440"
  },
  {
    "text": "back a few years ago when draftkings had much smaller for technology footprint it",
    "start": "706440",
    "end": "711700"
  },
  {
    "text": "was a very manual process we had a engineer just spend a few hours turning",
    "start": "711700",
    "end": "717340"
  },
  {
    "text": "on new servers and deploying code to them obviously whenever humans involved there's it's error-prone as well as it's",
    "start": "717340",
    "end": "724420"
  },
  {
    "text": "time-consuming to have to do that and remember to do that for when football contests remember when the Masters is",
    "start": "724420",
    "end": "731230"
  },
  {
    "text": "going on like there's a lot of elements here that could lead to service interruption for users if done",
    "start": "731230",
    "end": "737140"
  },
  {
    "text": "improperly the next strategy that we tried for scaling was a schedule approach where",
    "start": "737140",
    "end": "743949"
  },
  {
    "text": "we would create we had to create a centralized process that would manage the scale-up operations and it was set",
    "start": "743949",
    "end": "751809"
  },
  {
    "text": "on a cron based trigger so that actually solved some of the problems of having to have an engineer spend time scaling the",
    "start": "751809",
    "end": "759160"
  },
  {
    "text": "system but we left a lot of money in the table because there is times when we",
    "start": "759160",
    "end": "764259"
  },
  {
    "text": "would scale up where we thought we meet wait we need more we had more servers that we needed and obviously you know",
    "start": "764259",
    "end": "770949"
  },
  {
    "text": "paying for series that you don't need is not optimal it also was not scalable as",
    "start": "770949",
    "end": "776859"
  },
  {
    "text": "the number of series has grew as this process had to you know wait for the surveyors to combine deploy them and as",
    "start": "776859",
    "end": "782799"
  },
  {
    "text": "we increase in there were micro servers that we had it took longer and longer for that approach to scale up to the",
    "start": "782799",
    "end": "788649"
  },
  {
    "text": "needs that we required so our solution",
    "start": "788649",
    "end": "793739"
  },
  {
    "text": "was a predictive based skilling approach it solved the problem of the amount of",
    "start": "793739",
    "end": "800559"
  },
  {
    "text": "time it took to scale up our site it reduced the cost by scaling only to what we predicted that we need would need to",
    "start": "800559",
    "end": "807459"
  },
  {
    "text": "scale to and it was no longer a centralized process and scaling operations were spread out and",
    "start": "807459",
    "end": "814299"
  },
  {
    "text": "controlled by obviously the groups themselves rather than having a centralized process manage that all",
    "start": "814299",
    "end": "823869"
  },
  {
    "start": "823000",
    "end": "823000"
  },
  {
    "text": "right so now I want to kind of go into the overall process at a kind of high level about what are the technologies",
    "start": "823869",
    "end": "830439"
  },
  {
    "text": "that draftkings uses to scale or in our predictive based approach and it",
    "start": "830439",
    "end": "836619"
  },
  {
    "text": "consists of three steps in step one we have to predict what we think that traffic peak is gonna be step two we",
    "start": "836619",
    "end": "843249"
  },
  {
    "text": "have to compute the scaling knee or the compute capacity that we need to be able to handle that",
    "start": "843249",
    "end": "848259"
  },
  {
    "text": "predictive scale or that traffic prediction and then step three we actually need to execute on that's those",
    "start": "848259",
    "end": "854709"
  },
  {
    "text": "computed skills those computed scaling needs",
    "start": "854709",
    "end": "859199"
  },
  {
    "start": "860000",
    "end": "860000"
  },
  {
    "text": "so on the step one predict traffic we have a service traffic predictor service",
    "start": "860640",
    "end": "867209"
  },
  {
    "text": "that loads data from an Aurora RDS instance and that traffic predictor will come up with the actual traffic",
    "start": "867209",
    "end": "874140"
  },
  {
    "text": "predictions for each for our max HTTP request rates in different time frames we then have a Amazon lambda function",
    "start": "874140",
    "end": "882300"
  },
  {
    "text": "that's triggered on a cron or a cloud watch event it's a cron based which will take those predictions from the traffic",
    "start": "882300",
    "end": "889079"
  },
  {
    "text": "predictor and then publish them into our centralized caching solution Draft at",
    "start": "889079",
    "end": "894570"
  },
  {
    "text": "draftkings we use aerospike for a centralized caching solution and aerospike is simply a open source key",
    "start": "894570",
    "end": "900570"
  },
  {
    "text": "value store my colleague Frank will actually be coming up after me to discuss how the traffic predictor works",
    "start": "900570",
    "end": "907140"
  },
  {
    "text": "in detail in step to compute scaling",
    "start": "907140",
    "end": "913410"
  },
  {
    "text": "needs we have built a dotnet Webster risk that we have dubbed Noah we felt",
    "start": "913410",
    "end": "918690"
  },
  {
    "text": "that that was an appropriate name as it deals with forecasting traffic and anybody news familiar with government",
    "start": "918690",
    "end": "923850"
  },
  {
    "text": "services knows that Noah's does the same thing so no service will read our",
    "start": "923850",
    "end": "929490"
  },
  {
    "text": "current production scale and how many ec2 instances we currently have and that published HTTP traffic prediction that's",
    "start": "929490",
    "end": "938130"
  },
  {
    "text": "in aerospike it will compute how many servers we need to add for all of our",
    "start": "938130",
    "end": "943769"
  },
  {
    "text": "different micro services and publish a custom cloud watch metric that represents how much we should increase",
    "start": "943769",
    "end": "950399"
  },
  {
    "text": "or decrease our scale here is a chart in",
    "start": "950399",
    "end": "957930"
  },
  {
    "start": "955000",
    "end": "955000"
  },
  {
    "text": "cloud watch that shows that custom cloud watch metric that noah publishes when a",
    "start": "957930",
    "end": "963750"
  },
  {
    "text": "value of 1 indicates that we are at current we are at scale to meet the predicted capacity of the future a",
    "start": "963750",
    "end": "969709"
  },
  {
    "text": "number above 1 indicates how observers need add to be able to handle the",
    "start": "969709",
    "end": "975510"
  },
  {
    "text": "predicted traffic and so like a number in this case for 1.4 would indicate that we need to scale up by 40%",
    "start": "975510",
    "end": "981510"
  },
  {
    "text": "so you able to handle the predicted traffic in the future as that as those servers come online no it's constantly",
    "start": "981510",
    "end": "988190"
  },
  {
    "text": "polling the environment and sees that okay we're at scale everything's good so",
    "start": "988190",
    "end": "993240"
  },
  {
    "text": "that number goes back down if a prediction comes back that we have too many servers and rotation that",
    "start": "993240",
    "end": "999540"
  },
  {
    "text": "custom cloud watch metric will dip below 1 and the Auslan groups will scale in and that number will go back up to 1 in",
    "start": "999540",
    "end": "1010279"
  },
  {
    "text": "step 3 scale out we use a trigger a step scaling policy or in Auto stealing",
    "start": "1010279",
    "end": "1015649"
  },
  {
    "text": "groups that actually trigger off of cloud watch alarms based upon that custom PI watch metric that I showed",
    "start": "1015649",
    "end": "1020870"
  },
  {
    "text": "previously we use a big ami approach at draftkings to scale out our systems that",
    "start": "1020870",
    "end": "1027500"
  },
  {
    "text": "means that we have created Amazon a.m. eyes that have the draftkings code pre-installed on them",
    "start": "1027500",
    "end": "1034569"
  },
  {
    "text": "wow-whee that helps us be able to scale out or scale up as fast as possible without having to facilitate deployment",
    "start": "1034569",
    "end": "1041418"
  },
  {
    "text": "what new machines come on we actually want to make sure that any scaling operation is safe to execute to make",
    "start": "1041419",
    "end": "1046880"
  },
  {
    "text": "sure we don't actually cause a problem production so in order to make sure that any scaling operation is safe to execute",
    "start": "1046880",
    "end": "1055220"
  },
  {
    "text": "we leverage lifecycle hooks on auto-scaling groups and the way that",
    "start": "1055220",
    "end": "1060260"
  },
  {
    "text": "process works is the hosting group will scout and ec2 instances it will the lifecycle hook will publish a message to",
    "start": "1060260",
    "end": "1066919"
  },
  {
    "text": "an SNS topic that SNS topic will invoke a lambda function that lambda function will do one of the safety checks in this",
    "start": "1066919",
    "end": "1075890"
  },
  {
    "text": "case the most common case we just want to verify that the version of code on",
    "start": "1075890",
    "end": "1081530"
  },
  {
    "text": "the AMI matches the version of code that's running in production make sure we don't scale up a bad version or an old version of code that lambda function",
    "start": "1081530",
    "end": "1088460"
  },
  {
    "text": "will then trigger back to the auto scaling group and if in this case the",
    "start": "1088460",
    "end": "1094159"
  },
  {
    "text": "versions of code match then it will tell that auto scaling group to continue or",
    "start": "1094159",
    "end": "1099200"
  },
  {
    "text": "let that instance scale out and if that version doesn't match it will tell obviously a group to cancel the scale of",
    "start": "1099200",
    "end": "1106040"
  },
  {
    "text": "that instance this slide just shows how",
    "start": "1106040",
    "end": "1112640"
  },
  {
    "start": "1109000",
    "end": "1109000"
  },
  {
    "text": "we've actually you know some of the configuration details of both the cloud watch alarm and the auto scaling policy",
    "start": "1112640",
    "end": "1119860"
  },
  {
    "text": "here is a sample of the life cycle hook and how its configured on our holler",
    "start": "1123119",
    "end": "1128139"
  },
  {
    "text": "certain groups in a sample message that gets published to the SNS topic from when a instance skills out as you can",
    "start": "1128139",
    "end": "1135789"
  },
  {
    "text": "see it includes the name of the auto scaling group and the instance the instance ID as well so that helps us be",
    "start": "1135789",
    "end": "1142029"
  },
  {
    "text": "able to validate what the ami version is that is being used on this slide is some",
    "start": "1142029",
    "end": "1150339"
  },
  {
    "text": "more details around what this process looks like from Auslan groups perspective so when one of our auto",
    "start": "1150339",
    "end": "1157059"
  },
  {
    "text": "scaling groups tells us to scale out or scaled out in ec2 instance since there's",
    "start": "1157059",
    "end": "1162339"
  },
  {
    "text": "that life cycle hook in place it puts this it puts the instance into this waiting state the that the trigger then",
    "start": "1162339",
    "end": "1170489"
  },
  {
    "text": "do the SNS hopping into the lambda function will occur as you can see in",
    "start": "1170489",
    "end": "1176229"
  },
  {
    "text": "the second picture here in this scenario the ami verification failed with a versions of code to not match and in",
    "start": "1176229",
    "end": "1182859"
  },
  {
    "text": "this case that lambda function would then send message back to the obstacle in group to tell it to cancel that",
    "start": "1182859",
    "end": "1188499"
  },
  {
    "text": "scaling operation so you can see the result here is that the ec2 instance was canceled because the versions of code",
    "start": "1188499",
    "end": "1195009"
  },
  {
    "text": "did not match so in summary of this process I've kind of shown you how you",
    "start": "1195009",
    "end": "1202659"
  },
  {
    "text": "can take data predictive data publish it into Amazon Cloud watch to be able to",
    "start": "1202659",
    "end": "1210849"
  },
  {
    "text": "and have your Auslan groups configured to listen to that clash metric and then",
    "start": "1210849",
    "end": "1216219"
  },
  {
    "text": "you know scale up or down based upon the predictive amount of the predicted",
    "start": "1216219",
    "end": "1221499"
  },
  {
    "text": "amount of traffic that we're going to have so with that I'm gonna invite my colleague Frank up who's gonna go over",
    "start": "1221499",
    "end": "1228820"
  },
  {
    "text": "the innards of how that traffic predicting service works thank you",
    "start": "1228820",
    "end": "1235200"
  },
  {
    "text": "Thank You York hi my name is Frank Lowe I'm the head of data science at",
    "start": "1238739",
    "end": "1244029"
  },
  {
    "text": "draftkings a pretty fun topic to be in a lot of talk of machine learning so far at AWS so far pretty eager to look into",
    "start": "1244029",
    "end": "1251950"
  },
  {
    "text": "sage mess a sage maker I think see what that is all about but basically um so",
    "start": "1251950",
    "end": "1257529"
  },
  {
    "text": "data science at draftkings because a software engineering team that works very closely with data and algorithms",
    "start": "1257529",
    "end": "1264009"
  },
  {
    "text": "and the products that we that we do build and we built a component of this broader system which is the traffic",
    "start": "1264009",
    "end": "1269409"
  },
  {
    "text": "predictor let me go actually by the next slide sorry we and this over here is a",
    "start": "1269409",
    "end": "1280409"
  },
  {
    "start": "1276000",
    "end": "1276000"
  },
  {
    "text": "zoomed in part of the broader design diagram that Eric had talked about and",
    "start": "1280409",
    "end": "1285970"
  },
  {
    "text": "so the traffic predictor we built the the innards of how it works and actually gonna cover that in the next slide I'm gonna cover overall at a high level",
    "start": "1285970",
    "end": "1292590"
  },
  {
    "text": "where it fits and where it functions in the broader system so the attractor the",
    "start": "1292590",
    "end": "1297909"
  },
  {
    "text": "traffic predictor itself is a lambda function and whenever you invoke the",
    "start": "1297909",
    "end": "1304479"
  },
  {
    "text": "lambda function it runs a whole set of data operations that have been",
    "start": "1304479",
    "end": "1309849"
  },
  {
    "text": "predefined that generate out predictions of how much traffic will have at future",
    "start": "1309849",
    "end": "1317830"
  },
  {
    "text": "points in time up to 12 hours in the future and so basically every single",
    "start": "1317830",
    "end": "1326289"
  },
  {
    "text": "time this is triggered the response is JSON formatted object that we want to",
    "start": "1326289",
    "end": "1331450"
  },
  {
    "text": "store as state that can be ingested by NOAA which is the the scaling service",
    "start": "1331450",
    "end": "1338019"
  },
  {
    "text": "that Eric talked about and so we need a place to actually store that state you could store that in s3 you could also",
    "start": "1338019",
    "end": "1345070"
  },
  {
    "text": "put that in a database we actually put that in aerospike which is a schema dose database that's very friendly towards",
    "start": "1345070",
    "end": "1350289"
  },
  {
    "text": "JSON forming it up objects and this lambda itself is triggered by a cloud",
    "start": "1350289",
    "end": "1357249"
  },
  {
    "text": "watch event rule if you don't know what a cloud watch event rule is it's basically like the crontab in the cloud and actually plays very very nicely with",
    "start": "1357249",
    "end": "1363309"
  },
  {
    "text": "lambda because lambda is a function in the cloud cloud watch revenge rule is a trigger in the cloud they work well",
    "start": "1363309",
    "end": "1368499"
  },
  {
    "text": "together and we set up this cloud watch event rule to basically trick invoke this lambda every two minutes what that means",
    "start": "1368499",
    "end": "1377350"
  },
  {
    "text": "is that every two minutes we are recomputing all of our predictions of how much traffic we will have in the",
    "start": "1377350",
    "end": "1383290"
  },
  {
    "text": "future and updating that state so like the state itself gets updated every two minutes and when Noah the the the",
    "start": "1383290",
    "end": "1391180"
  },
  {
    "text": "scaling service looks at that state the maximum it will ever be lagged as two minutes behind so next I'm going to look",
    "start": "1391180",
    "end": "1400360"
  },
  {
    "start": "1399000",
    "end": "1399000"
  },
  {
    "text": "a little bit under the hood on how this traffic predictor actually works all for some context for us you know as Jason",
    "start": "1400360",
    "end": "1407200"
  },
  {
    "text": "stated we have millions of customers and the way that we actually get traffic is",
    "start": "1407200",
    "end": "1413230"
  },
  {
    "text": "those customers coming in to play a fantasy contest that we host on our site at any given time we have several",
    "start": "1413230",
    "end": "1419620"
  },
  {
    "text": "hundred fantasy contests and we want to break things down at a contest level so we can have a granular approach that we",
    "start": "1419620",
    "end": "1425320"
  },
  {
    "text": "can aggregate back up to understand broader traffic patterns so the first part I want to talk about is like what",
    "start": "1425320",
    "end": "1430960"
  },
  {
    "text": "is the incoming data stream what is the data that we care about one part of the",
    "start": "1430960",
    "end": "1436450"
  },
  {
    "text": "data that we care about is the real-time data that's actually flowing in all the time and we care about two things and we",
    "start": "1436450",
    "end": "1443890"
  },
  {
    "text": "looking at this at a contest by contest level the two things are position and",
    "start": "1443890",
    "end": "1449560"
  },
  {
    "text": "velocity what that means is what is the position of the contest is basically how",
    "start": "1449560",
    "end": "1455500"
  },
  {
    "text": "much traffic has come to the contest so far how many entries it has are already received at this point in time and the",
    "start": "1455500",
    "end": "1462460"
  },
  {
    "text": "velocity of the contest is at this point in time how many how fast are the",
    "start": "1462460",
    "end": "1467620"
  },
  {
    "text": "entries coming in how fast is traffic coming into this contest and people signing up for it right the other piece",
    "start": "1467620",
    "end": "1473800"
  },
  {
    "text": "of information that we care about a lot our historical benchmarks what that means is for every single one of our",
    "start": "1473800",
    "end": "1479470"
  },
  {
    "text": "several hundred fantasy contests that we have on our website I think at any given time we've likely run many many contests",
    "start": "1479470",
    "end": "1485680"
  },
  {
    "text": "that are very similar to it and we look at those historical contests that we've run to come up with a prior belief of",
    "start": "1485680",
    "end": "1492070"
  },
  {
    "text": "the trajectory of the traffic patterns for this current contest that we have that's upcoming so it's basically like a",
    "start": "1492070",
    "end": "1497140"
  },
  {
    "text": "starting belief and this is pretty important simply because all of our contents are very",
    "start": "1497140",
    "end": "1503300"
  },
  {
    "text": "different we run low stakes contests mid stakes high stakes and high stakes and low stakes generate traffic patterns in",
    "start": "1503300",
    "end": "1509090"
  },
  {
    "text": "very different ways we run a lot of different sports we're like NFL games",
    "start": "1509090",
    "end": "1514340"
  },
  {
    "text": "because it's a weekly sport generate traffic over the course of a week whereas you know basketball or hockey",
    "start": "1514340",
    "end": "1521480"
  },
  {
    "text": "because there are daily sports generating traffic over the course of the day so they they follow very different curve so it's pretty important",
    "start": "1521480",
    "end": "1526850"
  },
  {
    "text": "that we are pinpoint in our in our prior beliefs of how every single contest will",
    "start": "1526850",
    "end": "1532580"
  },
  {
    "text": "pace out next we combine that information into a technique known as",
    "start": "1532580",
    "end": "1539030"
  },
  {
    "text": "common filtering and the actual mathematical details of how this works is kind of nitty-gritty it won't get",
    "start": "1539030",
    "end": "1544160"
  },
  {
    "text": "down to that level of death but I will say it at a high level what a common filter is doing is it starts up with",
    "start": "1544160",
    "end": "1549890"
  },
  {
    "text": "your prior belief of the trajectory of every single contest that we do have how",
    "start": "1549890",
    "end": "1557330"
  },
  {
    "text": "traffic will flow into it over time that's like a starting belief right but then we're taking constant measurements",
    "start": "1557330",
    "end": "1563750"
  },
  {
    "text": "over time over overtime in overtime of the position and velocity of contests",
    "start": "1563750",
    "end": "1568760"
  },
  {
    "text": "this is the thing that runs every 10 minutes and based on the position and velocity of the contest we look at that as the",
    "start": "1568760",
    "end": "1573890"
  },
  {
    "text": "state of a contest at a certain time we also look at previous states of the contest - and what we care about most is",
    "start": "1573890",
    "end": "1579290"
  },
  {
    "text": "how the state changes and what the common filter does is it's a pretty elegant method for combining your prior information with new information that's",
    "start": "1579290",
    "end": "1586220"
  },
  {
    "text": "constantly coming in to update your beliefs at all time on where your contest will be at certain points so",
    "start": "1586220",
    "end": "1592520"
  },
  {
    "text": "it's basically you're you're you're adjusting the curve constantly based on new information a little bit of",
    "start": "1592520",
    "end": "1598970"
  },
  {
    "text": "backstory about how we actually decided to use common filters here at draftkings I'm the lead engineer who actually who",
    "start": "1598970",
    "end": "1606230"
  },
  {
    "text": "who designed this system used to actually work with common filters very",
    "start": "1606230",
    "end": "1611420"
  },
  {
    "text": "very extensively at his previous job very different from fantasy sports his previous job was in helping to design",
    "start": "1611420",
    "end": "1618070"
  },
  {
    "text": "missile guidance technologies very very different context but you'll discover it's a very similar application of",
    "start": "1618070",
    "end": "1624640"
  },
  {
    "text": "common filters so I'm gonna actually step into that example for a little bit so missile guidance",
    "start": "1624640",
    "end": "1632560"
  },
  {
    "text": "say a US Navy ship fires off a cruise",
    "start": "1632560",
    "end": "1637700"
  },
  {
    "text": "missile to try to hit a target that's really far away at the point that you",
    "start": "1637700",
    "end": "1643130"
  },
  {
    "text": "fire off the missile you have a path planned you have a trajectory that where you think that target is going to hit",
    "start": "1643130",
    "end": "1648940"
  },
  {
    "text": "now imagine that missile is flying through the air at like a thousand miles per hour and there's a lot of factors",
    "start": "1648940",
    "end": "1656840"
  },
  {
    "text": "that are going on in real-time that can actually affect the trajectory of that missile for example like an air pressure",
    "start": "1656840",
    "end": "1663500"
  },
  {
    "text": "or like wind in the sky or like intricacies around propulsion things like that that will cause the target to",
    "start": "1663500",
    "end": "1668750"
  },
  {
    "text": "like veer off course and maybe hit somewhere else right so the onboard computer on the cruise missile itself is",
    "start": "1668750",
    "end": "1675320"
  },
  {
    "text": "always making measurements of where is it where is its position at this current time what is its velocity at this current",
    "start": "1675320",
    "end": "1681020"
  },
  {
    "text": "time and it's constantly feeding that information through a common filter merging that with our prior beliefs to",
    "start": "1681020",
    "end": "1687320"
  },
  {
    "text": "have a constantly updated estimation over where the missile will hit it's",
    "start": "1687320",
    "end": "1692810"
  },
  {
    "text": "actually not even where the missile hit but like where the miss will be at different points in the future until it hits and it's basically updated",
    "start": "1692810",
    "end": "1699260"
  },
  {
    "text": "constantly so after he left that company",
    "start": "1699260",
    "end": "1704810"
  },
  {
    "text": "he joined draftkings and looked at our traffic prediction problem and was like",
    "start": "1704810",
    "end": "1710210"
  },
  {
    "text": "hey this this actually fits the model really well instead of missiles firing off and try",
    "start": "1710210",
    "end": "1716750"
  },
  {
    "text": "and hit their targets we can predict their traffic patterns and it like in a very similar way where like the target",
    "start": "1716750",
    "end": "1723740"
  },
  {
    "text": "you're trying to hit is really how much traffic you're getting at a future point in time but you can kind of use the same",
    "start": "1723740",
    "end": "1729140"
  },
  {
    "text": "predictive methodology so if you think about it like a common filter using its prior beliefs and constantly updated",
    "start": "1729140",
    "end": "1735250"
  },
  {
    "text": "data I was able to on the the cruise",
    "start": "1735250",
    "end": "1740420"
  },
  {
    "text": "missile side of things say that this missile like maybe 30 seconds from now",
    "start": "1740420",
    "end": "1747470"
  },
  {
    "text": "will be at this point that's a prediction a minute from now will be at this point two minutes meant from now will be in",
    "start": "1747470",
    "end": "1752540"
  },
  {
    "text": "another point similarly you could say that our fantasy contest traffic at like",
    "start": "1752540",
    "end": "1759470"
  },
  {
    "text": "30 minutes from now will be at this point an hour from now will be at this point and two hours from now at this point very different context but",
    "start": "1759470",
    "end": "1766010"
  },
  {
    "text": "similar pleasure approach applies anecdotally we know that self-driving cars also use common filters in their",
    "start": "1766010",
    "end": "1773420"
  },
  {
    "text": "path planning because a car moving forward will have a planned path from",
    "start": "1773420",
    "end": "1778490"
  },
  {
    "text": "the point that it makes that a certain decision however as it moves toward is taking constant measurements over it's",
    "start": "1778490",
    "end": "1784250"
  },
  {
    "text": "like XY trajectory on the road how its velocity how that's moving to to have a",
    "start": "1784250",
    "end": "1789500"
  },
  {
    "text": "constantly updated sell assumption or estimation on where that car may be maybe like a half a second in the future",
    "start": "1789500",
    "end": "1797120"
  },
  {
    "text": "in a second the future and to two seconds in the future so it's a pretty powerful technique Kuhlman filtering",
    "start": "1797120",
    "end": "1803000"
  },
  {
    "text": "it's one that worked pretty well for us this next slide though is saying that",
    "start": "1803000",
    "end": "1809810"
  },
  {
    "start": "1807000",
    "end": "1807000"
  },
  {
    "text": "like while this worked for us there's a lot of different possible techniques that you can possibly use the important",
    "start": "1809810",
    "end": "1815210"
  },
  {
    "text": "thing is look at your data look your traffic patterns and find one that really matches your traffic patterns",
    "start": "1815210",
    "end": "1821780"
  },
  {
    "text": "given your industry your your enterprise your domain and so common filters worked",
    "start": "1821780",
    "end": "1827960"
  },
  {
    "text": "really well for us because our traffic patterns are very very event-driven those events are sporting events",
    "start": "1827960",
    "end": "1833870"
  },
  {
    "text": "football games basketball games etc and I'll fire off a couple ideas that I have",
    "start": "1833870",
    "end": "1839960"
  },
  {
    "text": "but basically if you're in an industry where your traffic is also event-driven",
    "start": "1839960",
    "end": "1845540"
  },
  {
    "text": "this could also work so for example if you're running an auction site if your eBay you could set up a common filter",
    "start": "1845540",
    "end": "1853310"
  },
  {
    "text": "around every single auction that you do have and then aggregate that up together that could possibly work or if you're in",
    "start": "1853310",
    "end": "1859610"
  },
  {
    "text": "the business of modeling the volume of financial transactions its doctrines or",
    "start": "1859610",
    "end": "1865310"
  },
  {
    "text": "something like that you could view say earnings release as an event where you",
    "start": "1865310",
    "end": "1873260"
  },
  {
    "text": "know that there's going to be a lot of traffic climbing up to that that one event and that could possibly work or",
    "start": "1873260",
    "end": "1878990"
  },
  {
    "text": "you know in the in the stock trading volume in example there's other models you could choose the arch model is also",
    "start": "1878990",
    "end": "1884930"
  },
  {
    "text": "is a well-known one that balances pretty well where you have periods of calmness",
    "start": "1884930",
    "end": "1891920"
  },
  {
    "text": "and interspersed with periods of like high activity so that could work pretty well another example I can think of is",
    "start": "1891920",
    "end": "1899300"
  },
  {
    "text": "well I used to work in e-commerce before I worked at draftkings and I can tell you that those traffic patterns if",
    "start": "1899300",
    "end": "1907800"
  },
  {
    "text": "you're in commerce say amazon.com for example follow a very predictable and",
    "start": "1907800",
    "end": "1913830"
  },
  {
    "text": "cyclical pattern so like intra week if you look at Sunday Monday Tuesday",
    "start": "1913830",
    "end": "1919410"
  },
  {
    "text": "Wednesday that traffic pattern like week over week or vague very very very consistent even intraday you know your",
    "start": "1919410",
    "end": "1926970"
  },
  {
    "text": "noon traffic versus your 3:00 p.m. traffic versus your 6:00 p.m. traffic extremely consistent so if that is your",
    "start": "1926970",
    "end": "1934170"
  },
  {
    "text": "traffic pattern you could use some kind of like Auto regressive time series model ARIMA is very popular and that",
    "start": "1934170",
    "end": "1940140"
  },
  {
    "text": "could probably figure your traffic patterns really well another idea I",
    "start": "1940140",
    "end": "1945300"
  },
  {
    "text": "could think of is let's just say you believe that your traffic is actually",
    "start": "1945300",
    "end": "1950400"
  },
  {
    "text": "dependent on a number of states that are out there what I mean by that is let's",
    "start": "1950400",
    "end": "1956310"
  },
  {
    "text": "just say you're in mobile gaming and you've discovered that people play",
    "start": "1956310",
    "end": "1961350"
  },
  {
    "text": "mobile games less when it's sunny and more and more when it's raining just an example so you can actually view your",
    "start": "1961350",
    "end": "1970350"
  },
  {
    "text": "traffic as a state you could view the weather as a state with an incoming feed and you probably have many many other",
    "start": "1970350",
    "end": "1976410"
  },
  {
    "text": "states that probably affect your traffic right and you could frame that as possibly a hidden Markov model to figure out to actually estimate how much",
    "start": "1976410",
    "end": "1983370"
  },
  {
    "text": "traffic you will have at a given point in time given all of your states as they come in so just some ideas the whole",
    "start": "1983370",
    "end": "1990720"
  },
  {
    "text": "point of this is there's there's there's many ways to do this do what makes sense for your business there's you can get",
    "start": "1990720",
    "end": "1996720"
  },
  {
    "text": "very analytically creative about how you try to solve these problems the most important thing is that you find some",
    "start": "1996720",
    "end": "2003590"
  },
  {
    "text": "way to make a prediction and you find some way to make sure that prediction is constantly updated and so on to the next",
    "start": "2003590",
    "end": "2011030"
  },
  {
    "text": "slide basically here's a demo of how we actually try to store the prediction",
    "start": "2011030",
    "end": "2018110"
  },
  {
    "text": "results that we do have this is very straightforward you know as I mentioned before the dilemma that we have that",
    "start": "2018110",
    "end": "2025340"
  },
  {
    "text": "actually computes the predictions it just runs every two minutes and it just creates a JSON formatted",
    "start": "2025340",
    "end": "2031289"
  },
  {
    "text": "object that we store somewhere here's an example of the object pretty simple we have estimated traffic at 312 hours at",
    "start": "2031289",
    "end": "2041139"
  },
  {
    "text": "every single hour and this is pretty important for us given that our traffic patterns will tend to be wildly volatile",
    "start": "2041139",
    "end": "2048789"
  },
  {
    "text": "so it's good to have before looking a read on where we'll be at different",
    "start": "2048789",
    "end": "2053950"
  },
  {
    "text": "points in time and this is ingested by by NOAA so this is the last line so in",
    "start": "2053950",
    "end": "2062289"
  },
  {
    "text": "summary we are draftkings we are the leader in daily fantasy sports and because our traffic depends on sports",
    "start": "2062289",
    "end": "2069190"
  },
  {
    "text": "games our traffic can be wildly volatile so we want to find a better way to to get ahead of it so what we do is we we",
    "start": "2069190",
    "end": "2077618"
  },
  {
    "text": "have a track a traffic predicted prediction algorithm that store state that's read by a scaling service that",
    "start": "2077619",
    "end": "2087549"
  },
  {
    "text": "then uses that information to determine how many servers we need to be up to be",
    "start": "2087549",
    "end": "2094079"
  },
  {
    "text": "provisioned at the right size it means that we're always on the mark where",
    "start": "2094079",
    "end": "2099210"
  },
  {
    "text": "we're never under provisioned we're never over provisioned but we're trying to operate within the AWS infrastructure",
    "start": "2099210",
    "end": "2105190"
  },
  {
    "text": "as efficiently as possible so we'll be up here if you have any questions I'm",
    "start": "2105190",
    "end": "2110380"
  },
  {
    "text": "will just be hanging around thank you very much",
    "start": "2110380",
    "end": "2114839"
  },
  {
    "text": "[Applause]",
    "start": "2115790",
    "end": "2119559"
  }
]