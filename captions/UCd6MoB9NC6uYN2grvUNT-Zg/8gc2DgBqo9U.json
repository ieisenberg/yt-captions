[
  {
    "start": "0",
    "end": "170000"
  },
  {
    "text": "good evening so welcome to this talk",
    "start": "2090",
    "end": "7500"
  },
  {
    "text": "another day another billion flows so my name is calm I'm a principal engineer I",
    "start": "7500",
    "end": "13290"
  },
  {
    "text": "work on PPC I also worked on low bouncing and I work",
    "start": "13290",
    "end": "18660"
  },
  {
    "text": "on crypto and what we're gonna talk about today is it's all about VPC we're",
    "start": "18660",
    "end": "25350"
  },
  {
    "text": "gonna go over how V PC is architected how it works and what I'm actually going",
    "start": "25350",
    "end": "30510"
  },
  {
    "text": "to do is I'm pretty much gonna give the same you know the same overview of the V",
    "start": "30510",
    "end": "36300"
  },
  {
    "text": "PC architecture that I would give to a new hire you know someone just joined the team pretty much give this same",
    "start": "36300",
    "end": "42540"
  },
  {
    "text": "description of everything the same level of detail it's enough to understand who everything's kind of glued together how",
    "start": "42540",
    "end": "48420"
  },
  {
    "text": "packets get from A to B how all of the seeming seemingly magic stuff that",
    "start": "48420",
    "end": "53670"
  },
  {
    "text": "happens in a V PC network actually works under the hood hopefully that's gonna be really interesting information just a",
    "start": "53670",
    "end": "62370"
  },
  {
    "text": "bit about myself so I actually spent the first so I've been it I've been a database this is my tenth year but",
    "start": "62370",
    "end": "70950"
  },
  {
    "text": "before that I spent the first eight years of my career as a network engineer it was my it was my job to you know",
    "start": "70950",
    "end": "78060"
  },
  {
    "text": "configure all sorts of of standard networking devices I spent a lot of time putting labels on cables that's probably",
    "start": "78060",
    "end": "85710"
  },
  {
    "text": "one of my primary network engineer tools it probably made literally tens of thousands of labels I'm now very glad",
    "start": "85710",
    "end": "92490"
  },
  {
    "text": "that that can just be a description in an API or a CloudFormation template doesn't actually have to go physically",
    "start": "92490",
    "end": "97920"
  },
  {
    "text": "anywhere and you know worked it I was in my universities networking society and",
    "start": "97920",
    "end": "104579"
  },
  {
    "text": "learned all these things about packets and so that was the first eight years of my career but since joining AWS",
    "start": "104579",
    "end": "111299"
  },
  {
    "text": "I was actually hard to be a software developer it's really my first offered about my job and I write code you know",
    "start": "111299",
    "end": "118860"
  },
  {
    "text": "that's that's that's my main job now and so now as a as a software developer working on V PC it's that's how it's",
    "start": "118860",
    "end": "126270"
  },
  {
    "text": "built it's all built in software V PC is is the software-defined Network it's it's built on code that handles all",
    "start": "126270",
    "end": "135310"
  },
  {
    "text": "the packets that moves everything around and so on we do have a physical network I'll talk a little bit about that where",
    "start": "135310",
    "end": "141459"
  },
  {
    "text": "it is which is built by our infrastructure team and that you know as traditional switches and routers and all",
    "start": "141459",
    "end": "148810"
  },
  {
    "text": "sorts of links in set in inside that and it's an amazingly impressive system that blows my mind and the the levels of",
    "start": "148810",
    "end": "155290"
  },
  {
    "text": "performance that my colleagues in the infrastructure team are able to get out of that network are just staggering and",
    "start": "155290",
    "end": "161019"
  },
  {
    "text": "and that's reflected in VPC performance but we're not we're not gonna talk too much about that today VPC runs on top of",
    "start": "161019",
    "end": "167829"
  },
  {
    "text": "that physical network okay so let's just start with you know what is V PC right this is a 400 level talk",
    "start": "167829",
    "end": "175650"
  },
  {
    "text": "we're quite a number of years now into V PC so people here probably already",
    "start": "175650",
    "end": "180670"
  },
  {
    "text": "familiar but we'll cover the ground a little now so V PC is essentially a",
    "start": "180670",
    "end": "186340"
  },
  {
    "text": "virtual network so V PC stands for virtual private cloud and it means",
    "start": "186340",
    "end": "191709"
  },
  {
    "text": "customers can can essentially draw a virtual box and say well that's my network they get to assign the the",
    "start": "191709",
    "end": "198549"
  },
  {
    "text": "network range for that they get to pick it right so you can have you know one nine two one six eight or ten slash or",
    "start": "198549",
    "end": "204669"
  },
  {
    "text": "whatever you know whatever you feel like whatever makes sense for you and then inside that virtual network we can",
    "start": "204669",
    "end": "211510"
  },
  {
    "text": "launch things that can talk to each other right so we can launch instances",
    "start": "211510",
    "end": "216780"
  },
  {
    "text": "you know regular ec2 instances that you can log in to use one web servers all of",
    "start": "216780",
    "end": "223030"
  },
  {
    "text": "those kind of things when containers you can launch or the S databases or your",
    "start": "223030",
    "end": "229479"
  },
  {
    "text": "own databases and these days all sorts of other cloud resources right and those",
    "start": "229479",
    "end": "235000"
  },
  {
    "text": "can all be launched directly into the V PC into subnets and and so on they're",
    "start": "235000",
    "end": "241599"
  },
  {
    "text": "under your control all via api's those resources get IP addresses that make",
    "start": "241599",
    "end": "248049"
  },
  {
    "text": "sense in the context of that network so if your V PC is using you know when I'm to that one six eight then the IP",
    "start": "248049",
    "end": "254829"
  },
  {
    "text": "address is for these things inside your vb c i'll start what will ninety one six eight and it all kind of makes logical",
    "start": "254829",
    "end": "259840"
  },
  {
    "text": "sense and very much emulates a traditional you know datacenter Network whether it",
    "start": "259840",
    "end": "265990"
  },
  {
    "text": "was just a physical network or something built with VLANs and so on you can",
    "start": "265990",
    "end": "271450"
  },
  {
    "text": "connect this network to other networks right so we have our direct connect",
    "start": "271450",
    "end": "277840"
  },
  {
    "text": "product where you can now interconnect the V PC to say an on-premises data",
    "start": "277840",
    "end": "285280"
  },
  {
    "text": "centers you've got machines there that's why it's so important that you can pick the IP range for your V PC because you",
    "start": "285280",
    "end": "291850"
  },
  {
    "text": "know once you start interconnecting all these networks all of the IP ranges have to be D conflicted right so in the in",
    "start": "291850",
    "end": "299200"
  },
  {
    "text": "our V PC we're using 1 8 1 9 2 1 6 a which means elsewhere we have to be using something else and we can connect",
    "start": "299200",
    "end": "306850"
  },
  {
    "text": "we at wheels of a VPN product so you can connect this to say your office and be able to access V PC resources over",
    "start": "306850",
    "end": "313750"
  },
  {
    "text": "private IP addresses from you know your",
    "start": "313750",
    "end": "319060"
  },
  {
    "text": "desk at work which which is pretty important you know I recently realized",
    "start": "319060",
    "end": "326100"
  },
  {
    "text": "you know just how important that is I am opportunity to sit down with a customer and watch how they did their",
    "start": "326100",
    "end": "333850"
  },
  {
    "text": "software development and it really struck me that that native connectivity",
    "start": "333850",
    "end": "339760"
  },
  {
    "text": "helped them out a lot because they were running unit tests and connecting to",
    "start": "339760",
    "end": "345100"
  },
  {
    "text": "resources they're all hosted in the cloud and the fact that they could just do that on their desktop really sped",
    "start": "345100",
    "end": "350260"
  },
  {
    "text": "things up for them it was really really important it's not just not just about not just about like everything being",
    "start": "350260",
    "end": "357400"
  },
  {
    "text": "everything on the business side being able to talk to each other it's also really critical for developers because",
    "start": "357400",
    "end": "363700"
  },
  {
    "text": "you can connect all these networks right we also support for routing tables so that this virtual network this V PC you",
    "start": "363700",
    "end": "371890"
  },
  {
    "text": "can create routes inside it or routes as some people say I hope they say routes",
    "start": "371890",
    "end": "378660"
  },
  {
    "text": "and I say route 50 tree for what it's worth and if anybody ever disagrees with you you can always ask them have the",
    "start": "378660",
    "end": "385030"
  },
  {
    "text": "song route 66 goes it's it's clearly route but just that just solves the argument",
    "start": "385030",
    "end": "392180"
  },
  {
    "text": "right there and well you can set roots",
    "start": "392180",
    "end": "397340"
  },
  {
    "text": "inside the V PC so that you can you can say this prefix goes here this prefix goes there you know I need this network",
    "start": "397340",
    "end": "402800"
  },
  {
    "text": "to go to this Direct Connect link that actually goes to my on-premises data",
    "start": "402800",
    "end": "408050"
  },
  {
    "text": "center or whatever and if this network goes over VPN out over here through a true of vgw which is a virtual gateway",
    "start": "408050",
    "end": "414379"
  },
  {
    "text": "and we've got Internet gateways if you need to get to the Internet and that gateways and all sorts of other things",
    "start": "414379",
    "end": "420169"
  },
  {
    "text": "that I'll talk about later okay so this is this is all fairly familiar probably this is can standard networking in the",
    "start": "420169",
    "end": "427520"
  },
  {
    "text": "context of a V PC other this year you can also do something else with all this which is instead of just using ipv4 you",
    "start": "427520",
    "end": "435469"
  },
  {
    "text": "can use ipv6 we've support for that now you know it's it's routing a different",
    "start": "435469",
    "end": "442550"
  },
  {
    "text": "IP a different version of the IP protocol but you know as far as everything else is concerned it's it's",
    "start": "442550",
    "end": "448099"
  },
  {
    "text": "the same and now because this is a software-defined network right everything I've talked about unlike you",
    "start": "448099",
    "end": "454789"
  },
  {
    "text": "know having to physically plug cables in anywhere or you know get on the ground and label things",
    "start": "454789",
    "end": "460669"
  },
  {
    "start": "460000",
    "end": "795000"
  },
  {
    "text": "it's all under programmatic control via api's right so I can create these route",
    "start": "460669",
    "end": "467120"
  },
  {
    "text": "entries I can launch instances I can assign IPs and so on all programmatically right just call API is",
    "start": "467120",
    "end": "474680"
  },
  {
    "text": "to do it I can template those things you know I can put them in cloud formation templates or use other templating tools",
    "start": "474680",
    "end": "480469"
  },
  {
    "text": "to build automation you know I've seen teams that can instantiate entire V pcs",
    "start": "480469",
    "end": "485930"
  },
  {
    "text": "with hundreds of resources in them and then you know tear it all down and do it again if they need to which is pretty",
    "start": "485930",
    "end": "492440"
  },
  {
    "text": "amazing because all of that's going to api's it also means we got change",
    "start": "492440",
    "end": "498379"
  },
  {
    "text": "history and all the capabilities you know we plug into the things like a Tobias config and so on so you can and",
    "start": "498379",
    "end": "505339"
  },
  {
    "text": "clout rail and you can see when you're when your network is being changed there's lots of strong controls there",
    "start": "505339",
    "end": "510500"
  },
  {
    "text": "you know there's layers of authentication built in because it's all web services API is the net as a network",
    "start": "510500",
    "end": "518149"
  },
  {
    "text": "right just as a virtual network we build in some things beyond just traditional like IP layer routability and so on we",
    "start": "518149",
    "end": "526110"
  },
  {
    "text": "have built-in support for DHCP right so we actually assign IP addresses to instances and so on using DHCP and",
    "start": "526110",
    "end": "531990"
  },
  {
    "text": "there's some programmatic control for that you can control a few things about how the DHCP is banded we have a",
    "start": "531990",
    "end": "538380"
  },
  {
    "text": "built-in DNS service you know every instance or container can use our dns resolver fleet to resolve things a nun",
    "start": "538380",
    "end": "546090"
  },
  {
    "text": "includes support for private DNS so if you you can create a private domain in route 53 and and you can say you know",
    "start": "546090",
    "end": "554220"
  },
  {
    "text": "this resolves in VP CA also vp c b vp c c and so on and only resolves there so",
    "start": "554220",
    "end": "561090"
  },
  {
    "text": "you can do things like split views if you need certain domains to resolve to private IPS you can do that it's all",
    "start": "561090",
    "end": "566760"
  },
  {
    "text": "built in including support for health checks and failover and everything else that comes with route 53 that's pretty",
    "start": "566760",
    "end": "573990"
  },
  {
    "text": "cool actually one thing I should mention which didn't quite make it into the talk because it literally launched just a few",
    "start": "573990",
    "end": "581250"
  },
  {
    "text": "hours ago but today we announced support for inter region peering which I know",
    "start": "581250",
    "end": "586290"
  },
  {
    "text": "people have been keen to get for a while so you can now peer VP sees in multiple regions I'll explain a little bit what a",
    "start": "586290",
    "end": "592620"
  },
  {
    "text": "bit more about peering but one of the cool things it's actually route 53 private DNS works across regions so you",
    "start": "592620",
    "end": "599820"
  },
  {
    "text": "can actually use a private DNS view with route 53 you know tag that zone with a",
    "start": "599820",
    "end": "605490"
  },
  {
    "text": "VP CA in Region a VP CB in region B and it works just works you can have these",
    "start": "605490",
    "end": "611310"
  },
  {
    "text": "private lookups that span regions and now those regions can talk to each other using an inter region peering it's",
    "start": "611310",
    "end": "616980"
  },
  {
    "text": "pretty cool ah so the network also comes with a built-in firewall right so we've got support for Network ackles and",
    "start": "616980",
    "end": "622980"
  },
  {
    "text": "security groups which are just two control mechanisms that let you allow or",
    "start": "622980",
    "end": "628950"
  },
  {
    "text": "prohibit traffic on a you know source destination basis security groups is",
    "start": "628950",
    "end": "634410"
  },
  {
    "text": "kind of it's also a distraction that the to manage collections of instances and so on you know say they're all in the security",
    "start": "634410",
    "end": "640920"
  },
  {
    "text": "group and this security we should be able to talk to that one and so on I mean you could you could build your own firewall right you could run something",
    "start": "640920",
    "end": "647160"
  },
  {
    "text": "like IP tables or do that on your own instances but the beauty of having this on the network right is that it gives",
    "start": "647160",
    "end": "653940"
  },
  {
    "text": "you that additional layer of protection if the box were ever you know if software on the box were ever compromised or something like that",
    "start": "653940",
    "end": "660029"
  },
  {
    "text": "there's nothing the attacker can control that would influence the firewall which is which is pretty important for a",
    "start": "660029",
    "end": "666089"
  },
  {
    "text": "security control I'm so that's built-in you can use it and then we also support jumbo frames which just means we can",
    "start": "666089",
    "end": "672660"
  },
  {
    "text": "support you know large packets larger than 1500 bytes so a lot of networks",
    "start": "672660",
    "end": "677910"
  },
  {
    "text": "they support up to about 9,000 byte empty use that's that's like a really common number just based on what was",
    "start": "677910",
    "end": "685470"
  },
  {
    "text": "common in some in some and some network vendors chips you know about 10 10 or 15",
    "start": "685470",
    "end": "691259"
  },
  {
    "text": "years ago we actually van the 9001 buy them to you just because we believe in giving that little bit extra just just",
    "start": "691259",
    "end": "699449"
  },
  {
    "text": "wanted to just wanted to give it away so that's that's why you get 9001 every VPC",
    "start": "699449",
    "end": "707160"
  },
  {
    "text": "is free we don't charge for them so you know we see a lot of customers who",
    "start": "707160",
    "end": "712230"
  },
  {
    "text": "really just have one or two V pcs they maybe have a you know this is my production V PC this is my",
    "start": "712230",
    "end": "718410"
  },
  {
    "text": "pre-production V PC or this is something I'm testing out or this is a different team or whatnot but we're starting to",
    "start": "718410",
    "end": "724380"
  },
  {
    "text": "see more and more customers who actually have quite large numbers of V pcs who really do a lot of segmentation who say",
    "start": "724380",
    "end": "730410"
  },
  {
    "text": "you know this application should get this application should get this virtual",
    "start": "730410",
    "end": "735449"
  },
  {
    "text": "network this one should be over here and they kind of treat the pcs like these little isolated playpens where they know",
    "start": "735449",
    "end": "742139"
  },
  {
    "text": "you know things can't just reach across easily and so they get a level of isolation which is pretty cool and so",
    "start": "742139",
    "end": "749519"
  },
  {
    "text": "that's like that's about having many V pcs you know at once in parallel we also see customers now who use V PC as part",
    "start": "749519",
    "end": "756630"
  },
  {
    "text": "of a beautiful immutable infrastructure patterns who like I said earlier you know create a V PC get it in the state",
    "start": "756630",
    "end": "763079"
  },
  {
    "text": "they want but then tear it down because they're they move on to the next iteration of the software deployment or",
    "start": "763079",
    "end": "769410"
  },
  {
    "text": "whatever I'm going to do the whole thing at the hop like the level of the whole network because they find that works which blows my mind you know that's a",
    "start": "769410",
    "end": "776399"
  },
  {
    "text": "pretty amazing architecture to see built especially common with container architectures",
    "start": "776399",
    "end": "782270"
  },
  {
    "text": "it's it's it's kind of amazing ok so that's my like high-level spiel and you",
    "start": "782270",
    "end": "788029"
  },
  {
    "text": "know what PPC can do how it will work at like an IP routing level what's going",
    "start": "788029",
    "end": "793459"
  },
  {
    "text": "on what the features are so how does it all work right like what's going on to",
    "start": "793459",
    "end": "798649"
  },
  {
    "start": "795000",
    "end": "814000"
  },
  {
    "text": "actually make this function right so you know let's start by giving away you know",
    "start": "798649",
    "end": "804680"
  },
  {
    "text": "a little secret about how easy to works which is that you know you're virtualized instances that you can run",
    "start": "804680",
    "end": "812300"
  },
  {
    "text": "and use and log into and so on well they actually run on physical Hardware somewhere right there is a real box in a",
    "start": "812300",
    "end": "819230"
  },
  {
    "start": "814000",
    "end": "940000"
  },
  {
    "text": "data center somewhere that that virtual machine is running on ok big reveal and",
    "start": "819230",
    "end": "825680"
  },
  {
    "text": "and those you know those physical hosts host one or more customer instances on",
    "start": "825680",
    "end": "831770"
  },
  {
    "text": "them and in in that physical host right down there kind of at the layer where",
    "start": "831770",
    "end": "837350"
  },
  {
    "text": "the hypervisor sits or or even below it in Hardware is a virtual router right in",
    "start": "837350",
    "end": "843529"
  },
  {
    "text": "in in every you know ec2 physical house that's there on our latest platforms you",
    "start": "843529",
    "end": "849680"
  },
  {
    "text": "know the things we've been launching for the you know the the last several years like Peter DeSantis talked about on",
    "start": "849680",
    "end": "856160"
  },
  {
    "text": "Tuesday that's uses our nitro platform and other you know hardware platforms that have been developed here so that's",
    "start": "856160",
    "end": "863029"
  },
  {
    "text": "basically like a hardware embedded rooder that's in those physical hosts and then on older platforms in things",
    "start": "863029",
    "end": "869720"
  },
  {
    "text": "that were launched years ago it's kind of an emulated software rooder that that's that's running down there with",
    "start": "869720",
    "end": "875029"
  },
  {
    "text": "the hypervisor it's can an abstracted virtualized service and that that Rueter",
    "start": "875029",
    "end": "880279"
  },
  {
    "text": "is doing all of the magic of making V PC work right so we provide these virtual",
    "start": "880279",
    "end": "886459"
  },
  {
    "text": "you know isolated networks you know customer a can be using one 92168 slash",
    "start": "886459",
    "end": "891770"
  },
  {
    "text": "16 and customer B can be using 192.168 slash 16 they can both be using it both",
    "start": "891770",
    "end": "897980"
  },
  {
    "text": "are overlapping it all just works right so clearly we're not just taking those packets I'm putting them on the wire",
    "start": "897980",
    "end": "904190"
  },
  {
    "text": "right we got to disambiguate them in some way there's a lot of networking",
    "start": "904190",
    "end": "909290"
  },
  {
    "text": "technologies for that right VLANs verse you could use MPLS there's there's",
    "start": "909290",
    "end": "914899"
  },
  {
    "text": "a lot of ways you can build virtual networks we looked at all of them when we were when we were building vbc none",
    "start": "914899",
    "end": "921260"
  },
  {
    "text": "of them scaled to our needs all of them are you know they can get dangerous at",
    "start": "921260",
    "end": "926720"
  },
  {
    "text": "scale and we were designing for millions of VP C's you know very very very high numbers so so we do our own proprietary",
    "start": "926720",
    "end": "935620"
  },
  {
    "text": "encapsulation to disambiguate everything right so if you were to look at a packet",
    "start": "935620",
    "end": "941899"
  },
  {
    "start": "940000",
    "end": "1101000"
  },
  {
    "text": "on the wire it you will see ordinary IP on the physical network at the outermost",
    "start": "941899",
    "end": "947959"
  },
  {
    "text": "layer and those packets are flowing between those physical hosts using that you know amazing physical network that",
    "start": "947959",
    "end": "954260"
  },
  {
    "text": "my colleagues in the infrastructure team have built and that's that's just relatively mundane networking you know",
    "start": "954260",
    "end": "961250"
  },
  {
    "text": "it's just you know IP a to IP B and finds traffic finds it's it's it's",
    "start": "961250",
    "end": "967910"
  },
  {
    "text": "destinations in the usual ways there's not too much magic going on it's an intentionally simplified Network we",
    "start": "967910",
    "end": "973970"
  },
  {
    "text": "focus a lot on performance and resilience and creating a lot of magic",
    "start": "973970",
    "end": "979160"
  },
  {
    "text": "inner inner inner platforms for that at that level but we don't do too much like network trickery there's not there's no",
    "start": "979160",
    "end": "986980"
  },
  {
    "text": "routing tricks or anything like that going on and then just above that layer",
    "start": "986980",
    "end": "992029"
  },
  {
    "text": "we have the V PC encapsulation protocol where we we stamp our own data on the",
    "start": "992029",
    "end": "997190"
  },
  {
    "text": "packet so that we can do some big away things you know there's information in there like which V PC this traffic is",
    "start": "997190",
    "end": "1004120"
  },
  {
    "text": "for you know which II and I so that's an elastic network interface that's kind of the the physical interface equivalent",
    "start": "1004120",
    "end": "1011589"
  },
  {
    "text": "that we attach to instances and so on that's in there and there's enough information though so that when a packet",
    "start": "1011589",
    "end": "1017920"
  },
  {
    "text": "goes from one physical host to another the physical house that receives it you know knows what a and eye on what",
    "start": "1017920",
    "end": "1024699"
  },
  {
    "text": "instance that traffic is for you know we can it can it can read the data that's in the encapsulation and it can send it",
    "start": "1024699",
    "end": "1030490"
  },
  {
    "text": "where it needs to go and then on top of that it's just your your normal IP packet right like what your instance",
    "start": "1030490",
    "end": "1038410"
  },
  {
    "text": "sent right and that's you you know if you're familiar we're looking at TCP dump or",
    "start": "1038410",
    "end": "1044769"
  },
  {
    "text": "digging into IP headers and all that stuff that's that just looks normal okay so this is for traffic between like",
    "start": "1044769",
    "end": "1052059"
  },
  {
    "text": "two instances right so the two instances are on to physical hosts this is how they communicate but we contend traffic",
    "start": "1052059",
    "end": "1058389"
  },
  {
    "text": "elsewhere right we can send traffic off network all right we can send traffic to the Internet we can send traffic to",
    "start": "1058389",
    "end": "1063580"
  },
  {
    "text": "direct connect we can send traffic to VPN and so on and so how does that work well we have these things called black",
    "start": "1063580",
    "end": "1069250"
  },
  {
    "text": "fluid edge devices so black box a platform we built quite a while ago which essentially translates from the",
    "start": "1069250",
    "end": "1076120"
  },
  {
    "text": "inside VPC Network you know with this encapsulation to the outside you know",
    "start": "1076120",
    "end": "1081850"
  },
  {
    "text": "normal IP networking right so it too has you know an embedded router essentially",
    "start": "1081850",
    "end": "1089460"
  },
  {
    "text": "although really you could kind of think of the whole thing as a really big router and and you know can encapsulate",
    "start": "1089460",
    "end": "1096340"
  },
  {
    "text": "and encapsulate this traffic on rapid can also do some other tricks and it",
    "start": "1096340",
    "end": "1101889"
  },
  {
    "text": "sends can send the traffic to and from a bunch of destinations like what's this",
    "start": "1101889",
    "end": "1107860"
  },
  {
    "text": "really cool system we actually named the building I work in after it so I work in the black foot building in Seattle",
    "start": "1107860",
    "end": "1113919"
  },
  {
    "text": "that's a a dhq basically by the way you",
    "start": "1113919",
    "end": "1119889"
  },
  {
    "text": "know that's a great sign of success right for your team like it's a lot of pride Wow they named a building after my",
    "start": "1119889",
    "end": "1124929"
  },
  {
    "text": "service that's really cool but all of the team members kind of regret that a",
    "start": "1124929",
    "end": "1130299"
  },
  {
    "text": "little because every time there's an email that mentions blackfoot you don't know if they're talking about the",
    "start": "1130299",
    "end": "1135549"
  },
  {
    "text": "building or if they're talking about your service and your filter stopped working and it gets a little confusing",
    "start": "1135549",
    "end": "1141090"
  },
  {
    "text": "but but it's it's it's still awesome that it that they named the building",
    "start": "1141090",
    "end": "1147759"
  },
  {
    "text": "after it that's kind of a cool cool thing so Blackfoot takes this encapsulated traffic right and says okay",
    "start": "1147759",
    "end": "1154990"
  },
  {
    "text": "well this needed to go to the Internet so it gets to a Blackfoot device the",
    "start": "1154990",
    "end": "1160029"
  },
  {
    "text": "Blackfoot device will strip the VPC encapsulation will translate the IP addresses right so when we go from",
    "start": "1160029",
    "end": "1166330"
  },
  {
    "text": "inside VPC to outside VPC we we got to start using like a public IP address",
    "start": "1166330",
    "end": "1171549"
  },
  {
    "text": "when we're talking to the internet so Blackfoot will actually do that it'll knock your internal VPC IP to the",
    "start": "1171549",
    "end": "1177200"
  },
  {
    "text": "external public IP address that's simple stateless you know one-to-one IP nap",
    "start": "1177200",
    "end": "1182900"
  },
  {
    "text": "that's going on although it's still very very difficult to do with the kind of scale Blackfoot operates and then",
    "start": "1182900",
    "end": "1188179"
  },
  {
    "text": "similarly you know with Direct Connect what's happening is Blackfoot D encapsulate that traffic passes it on to",
    "start": "1188179",
    "end": "1194750"
  },
  {
    "text": "another network that actually implements Direct Connect that starts doing things with VLANs because VLANs are just part",
    "start": "1194750",
    "end": "1201950"
  },
  {
    "text": "of how Direct Connect works if you have a direct connect link so that's a physical link to one of our direct connect centers you can actually connect",
    "start": "1201950",
    "end": "1208250"
  },
  {
    "text": "to more than just one V PC in the way that works is it's it's presented as a VLAN and so there's some translation in",
    "start": "1208250",
    "end": "1215929"
  },
  {
    "text": "this part of the network where we take you know the V PC that we got from the encapsulation layer into a traditional",
    "start": "1215929",
    "end": "1221660"
  },
  {
    "text": "VLAN on a traditional physical port and so on with VPN you know it goes to a",
    "start": "1221660",
    "end": "1227799"
  },
  {
    "text": "specialized service that does everything VPN needs like you know I can IPSec and",
    "start": "1227799",
    "end": "1233299"
  },
  {
    "text": "so on and applies all that it's also how s tree and DynamoDB endpoints work so if",
    "start": "1233299",
    "end": "1238970"
  },
  {
    "text": "you you so fuse s tree or dynamodb endpoints that's the technology that essentially lets you connect s tree or",
    "start": "1238970",
    "end": "1245150"
  },
  {
    "text": "dynamodb directly to your V PC without your traffic needing to traverse the internet or a backbone that is also",
    "start": "1245150",
    "end": "1253690"
  },
  {
    "text": "using the magic of Blackfoot to apply that translation and and connect everything together right it's pretty",
    "start": "1253690",
    "end": "1260299"
  },
  {
    "text": "cool so as I mentioned the other most IP destination just identifies the target",
    "start": "1260299",
    "end": "1266299"
  },
  {
    "text": "host or where it needs to go we mark all the packets but like how do we know",
    "start": "1266299",
    "end": "1272120"
  },
  {
    "text": "these right how do I know which physical host to send a packet to right and",
    "start": "1272120",
    "end": "1278750"
  },
  {
    "text": "that's where this thing called the mapping service comes in right and so our mapping service is a distributed",
    "start": "1278750",
    "end": "1286730"
  },
  {
    "start": "1280000",
    "end": "1440000"
  },
  {
    "text": "service that is in charge of mapping like this II and I in this V PC you know",
    "start": "1286730",
    "end": "1294820"
  },
  {
    "text": "corresponds at the moment to this physical host right and this instance on",
    "start": "1294820",
    "end": "1300890"
  },
  {
    "text": "that physical host right it's basically a gigantic all that has all that information in it",
    "start": "1300890",
    "end": "1307040"
  },
  {
    "text": "right and it also manages roots so if you've got you know if you've got a",
    "start": "1307040",
    "end": "1312670"
  },
  {
    "text": "routing look up you know it's not just a host that you're getting to its saying all this traffic should get to dinner",
    "start": "1312670",
    "end": "1317690"
  },
  {
    "text": "know whoever the mapping service will say well you know this IP prefix needs to go to the Blackfoot for Internet",
    "start": "1317690",
    "end": "1323870"
  },
  {
    "text": "gateway or whatever right that's what's going on and it's so the embedded",
    "start": "1323870",
    "end": "1329750"
  },
  {
    "text": "rooters down here are talking to the mapping service and you know figuring out okay well for this virtual",
    "start": "1329750",
    "end": "1337220"
  },
  {
    "text": "destination here's the real physical destination right and it's not it's not really like any traditional network",
    "start": "1337220",
    "end": "1346220"
  },
  {
    "text": "local protocol they may have seen before you know it's it's it's it's not like",
    "start": "1346220",
    "end": "1352040"
  },
  {
    "text": "ARP se right it's it's much more nuanced and it's been refined over the years and",
    "start": "1352040",
    "end": "1359150"
  },
  {
    "text": "there's a there's a lot of cool stuff going in there to make sure sure that lookups are really really fast right so",
    "start": "1359150",
    "end": "1365110"
  },
  {
    "text": "it wouldn't work it wouldn't get the kinds of performance we need for a you",
    "start": "1365110",
    "end": "1371030"
  },
  {
    "text": "know an instance to say okay I need to reach this IP and then the embedded Rooter to go well I don't know where",
    "start": "1371030",
    "end": "1376070"
  },
  {
    "text": "that IP isn't gonna ask the mapping service and then the mapping service tells it and then we can send the packet that would just take too long you know",
    "start": "1376070",
    "end": "1383300"
  },
  {
    "text": "we have a really fast Network things aren't things aren't that far apart you can now get Layton sees between",
    "start": "1383300",
    "end": "1389150"
  },
  {
    "text": "instances that are you know measured in tens of microseconds if you're using enhanced networking in ene and so on and",
    "start": "1389150",
    "end": "1395900"
  },
  {
    "text": "we can do that to our mapping service and so on like we can get fast lookup times but it's just not scalable like we",
    "start": "1395900",
    "end": "1401060"
  },
  {
    "text": "would be absolutely hammering the mapping service if that's how it worked right if it were that naive so you know",
    "start": "1401060",
    "end": "1407660"
  },
  {
    "text": "mappings are there they're both pushed out and pre-loaded and there's caching patterns and there's all sorts of things",
    "start": "1407660",
    "end": "1414170"
  },
  {
    "text": "in there to make sure that the the mappings themselves are highly optimized and that lookups happened very quickly",
    "start": "1414170",
    "end": "1420550"
  },
  {
    "text": "so that we can go from you know an instance needing to send a packet to",
    "start": "1420550",
    "end": "1426290"
  },
  {
    "text": "being able to look up that mapping you know directly in memory encapsulate the",
    "start": "1426290",
    "end": "1431450"
  },
  {
    "text": "the traffic in the way we need send it on to its destination extremely extremely quickly you know it's a key to how it works it's",
    "start": "1431450",
    "end": "1438659"
  },
  {
    "text": "a so like I said mappings a cache where they used which means we have to",
    "start": "1438659",
    "end": "1443909"
  },
  {
    "text": "proactively invalidate them and so on when we're when they change and and",
    "start": "1443909",
    "end": "1449779"
  },
  {
    "text": "that's what's going on right that's that's mapping service that's how that part works okay we're going a lightning",
    "start": "1449779",
    "end": "1457139"
  },
  {
    "text": "speed here but I know we're keeping up the that so so far we've essentially covered how",
    "start": "1457139",
    "end": "1464419"
  },
  {
    "text": "packets get from A to B right how the vbc technology works and in previous",
    "start": "1464419",
    "end": "1471539"
  },
  {
    "text": "versions of this talk it's kind of where we stopped right this is kind of okay",
    "start": "1471539",
    "end": "1476669"
  },
  {
    "text": "that's how V PC works that's what's going on but you know the time of this talk is there's another billion flows",
    "start": "1476669",
    "end": "1484799"
  },
  {
    "text": "right so what about flows and why are we talking about flows so if you look",
    "start": "1484799",
    "end": "1493350"
  },
  {
    "start": "1485000",
    "end": "1502000"
  },
  {
    "text": "closely at what the vb c network is is capable of there's a lot that's going on that actually relates to flows not just",
    "start": "1493350",
    "end": "1501000"
  },
  {
    "text": "packets right so some examples right so when you use security groups those are",
    "start": "1501000",
    "end": "1507090"
  },
  {
    "start": "1502000",
    "end": "1653000"
  },
  {
    "text": "actually firewall rules that include stateful connection tracking right and",
    "start": "1507090",
    "end": "1514370"
  },
  {
    "text": "we have flow logs as a feature where we give Paree and I agree gated you know",
    "start": "1514370",
    "end": "1520519"
  },
  {
    "text": "data that you can see your traffic going around but you can see that there's some it's aware of flows right to an extent",
    "start": "1520519",
    "end": "1527840"
  },
  {
    "text": "you can we launched network load bouncer two months ago that's a new low bouncer",
    "start": "1527840",
    "end": "1532980"
  },
  {
    "text": "offering that's kind of embedded and meshed into the VPC architecture and the",
    "start": "1532980",
    "end": "1539159"
  },
  {
    "text": "reason you can the reason you can tell that it's embedded and in the VPC network itself is because it it unlike",
    "start": "1539159",
    "end": "1546389"
  },
  {
    "text": "previous iterations of our load balancing products it can no bounds traffic to your backends and targets",
    "start": "1546389",
    "end": "1551639"
  },
  {
    "text": "transparently right so you can you you can create an LLB and you can put targets behind it instances containers",
    "start": "1551639",
    "end": "1558659"
  },
  {
    "text": "or IP addresses and let's say it's an internet facing NLB a public NLB it gets",
    "start": "1558659",
    "end": "1564419"
  },
  {
    "text": "traffic from out there an internet your instances and containers actually see the remote",
    "start": "1564419",
    "end": "1571170"
  },
  {
    "text": "you know IP address of the actual client like the browser whatever it was out there on the Internet it just comes in",
    "start": "1571170",
    "end": "1577710"
  },
  {
    "text": "right there's like something in the way doing the love bouncing clearly because",
    "start": "1577710",
    "end": "1582720"
  },
  {
    "text": "we pick different targets each time but yet the the flow is preserved all of the details of the flower preserved it's not",
    "start": "1582720",
    "end": "1588600"
  },
  {
    "text": "acting as a proxy right which is what most traditional load balancers work including most appliances right most",
    "start": "1588600",
    "end": "1595770"
  },
  {
    "text": "most load balancers and you know terminate a TCP connection decide where",
    "start": "1595770",
    "end": "1600930"
  },
  {
    "text": "it it should go create another TCP connection that comes from the low",
    "start": "1600930",
    "end": "1605970"
  },
  {
    "text": "bouncer right and if you want to see what the original source was you have to use like an x-forwarded-for header or a",
    "start": "1605970",
    "end": "1612960"
  },
  {
    "text": "proxy protocol header or whatever or a sip header that some appliances have right but that's not what's going on",
    "start": "1612960",
    "end": "1619440"
  },
  {
    "text": "this is actually in the network right there's clearly some flow awareness and that gateway right so we have this",
    "start": "1619440",
    "end": "1626160"
  },
  {
    "text": "native gateway type in V PC that can do many to warn that which which has to be",
    "start": "1626160",
    "end": "1632970"
  },
  {
    "text": "stateful right mapping hundreds thousands of instances to one IP address just require state and requires flow",
    "start": "1632970",
    "end": "1641070"
  },
  {
    "text": "tracking so so clearly there's some flow tracking going on in the BBC network",
    "start": "1641070",
    "end": "1647700"
  },
  {
    "text": "right and it turns out that's really important for how V PC works these days right so this flow tracking a lot of",
    "start": "1647700",
    "end": "1656670"
  },
  {
    "start": "1653000",
    "end": "1992000"
  },
  {
    "text": "it's actually happening on that embedded Rooter that's in on the physical host that I talked about right and oh so this",
    "start": "1656670",
    "end": "1666210"
  },
  {
    "text": "is four hundred level talks so I hope were okay with the next slide we're actually gonna look you know what one",
    "start": "1666210",
    "end": "1671790"
  },
  {
    "text": "flower tracking actually involves a little so just as a quick refresher right a flow we consider a flow to be a",
    "start": "1671790",
    "end": "1681330"
  },
  {
    "text": "five tuple right it's the combination of a protocol like TCP UDP icmp",
    "start": "1681330",
    "end": "1688710"
  },
  {
    "text": "a source IP a destination IP a source port destination port right that's a",
    "start": "1688710",
    "end": "1694590"
  },
  {
    "text": "flow so when I when I connect to double that I'm is on the comm my browser",
    "start": "1694590",
    "end": "1700440"
  },
  {
    "text": "picks a unique source port you know no other no other source port is that",
    "start": "1700440",
    "end": "1706410"
  },
  {
    "text": "source port is not being used and certainly not being used to talk to the Domino Tom at the moment so it gives",
    "start": "1706410",
    "end": "1711570"
  },
  {
    "text": "that to my browser and then my browser starts essentially creating all these packets which match a five tuple like",
    "start": "1711570",
    "end": "1716940"
  },
  {
    "text": "this and that's how my traffic gets to the Rams on the comm that's how about",
    "start": "1716940",
    "end": "1722400"
  },
  {
    "text": "the Rams on the comm can send packets back to me and have it go to that you know tab in my browser and so on that so",
    "start": "1722400",
    "end": "1728610"
  },
  {
    "text": "everything's disambiguated right that's what it a connection is that's what a flow is and and so with TCP right",
    "start": "1728610",
    "end": "1737940"
  },
  {
    "text": "there's this really well with both TCP and UDP there's this really important property that like the five tuple has to",
    "start": "1737940",
    "end": "1744690"
  },
  {
    "text": "be completely unique right like we would start mixing packets between Sanders and",
    "start": "1744690",
    "end": "1750900"
  },
  {
    "text": "receivers and so on if it weren't completely unique so if you have you",
    "start": "1750900",
    "end": "1755940"
  },
  {
    "text": "know if you have saved the same instance right like the source IP in this case 192 dot 0 dot to that one trying to",
    "start": "1755940",
    "end": "1763080"
  },
  {
    "text": "connect to the same destination IP on the same port support for for tree here that's the HTTP port they have to be",
    "start": "1763080",
    "end": "1769890"
  },
  {
    "text": "disambiguated in some way right so they have to use unique source ports so you",
    "start": "1769890",
    "end": "1775680"
  },
  {
    "text": "know if they're coming from the same instance the instance will handle that the Linux networking stack will say ok this connection gets poured a this",
    "start": "1775680",
    "end": "1781710"
  },
  {
    "text": "connection gets port B and there's some other stuff going on too right so you know standard TCP handshake",
    "start": "1781710",
    "end": "1788130"
  },
  {
    "text": "client sends a syn server syn ACK then we get a knock going the interaction the",
    "start": "1788130",
    "end": "1793740"
  },
  {
    "text": "network now we can talk there's some other numbers floating around they're important the first sin starts off with",
    "start": "1793740",
    "end": "1799140"
  },
  {
    "text": "a sequence number right that's a random that the server will know then that it's",
    "start": "1799140",
    "end": "1807960"
  },
  {
    "text": "replies are correct and everything's being nothing's being manipulated in the middle and there's an act number two so",
    "start": "1807960",
    "end": "1815160"
  },
  {
    "text": "when those act packets come back they'll be an act number that was invented by the other side",
    "start": "1815160",
    "end": "1820530"
  },
  {
    "text": "and when you're doing flow tracking right all of these things matter so what you want to do is you want to make sure",
    "start": "1820530",
    "end": "1826380"
  },
  {
    "text": "ok well the security group rule said this traffic's allowed this connections allowed so when we see the first packet",
    "start": "1826380",
    "end": "1832680"
  },
  {
    "text": "it matches that roll and it's allowed in right now we could just say well when we see the",
    "start": "1832680",
    "end": "1838870"
  },
  {
    "text": "second packet alright well if it matches the security rules it's allowed in we don't do that right we do we do some a",
    "start": "1838870",
    "end": "1845350"
  },
  {
    "text": "little better which we say well well in that second packet comes in its sequence number should make sense in fact number should make sense like",
    "start": "1845350",
    "end": "1852070"
  },
  {
    "text": "relative to the previous one right it should be within the TCP window all that kind of stuff and that's that's the",
    "start": "1852070",
    "end": "1860560"
  },
  {
    "text": "prevent you know certain kinds of attacks where people will just move traffic and try to you know have it come",
    "start": "1860560",
    "end": "1866320"
  },
  {
    "text": "in and pretend to be in the middle of a TCP connection and so on you can't spoof traffic on the the V PC network you know",
    "start": "1866320",
    "end": "1871990"
  },
  {
    "text": "there's lots of anti-spoofing measures including all that of capsulation I told you about but but you know Internet",
    "start": "1871990",
    "end": "1878380"
  },
  {
    "text": "traffic out there and the Wild West Internet may get maybe getting spoofed so it's important that that happen all",
    "start": "1878380",
    "end": "1885610"
  },
  {
    "text": "right so that's kind of state tracking that's happening down there for UDP we",
    "start": "1885610",
    "end": "1892450"
  },
  {
    "text": "don't have sequence and ACK numbers to track but we do have these things called Datagram IDs so UDP UDP packets can be",
    "start": "1892450",
    "end": "1900340"
  },
  {
    "text": "fragmented right so if a UDP packet is too big to fit inside that MTU it'll actually be split across multiple",
    "start": "1900340",
    "end": "1906790"
  },
  {
    "text": "fragments and those fragments have to be reassembled and to do that they've got IDs and those have to be relative and",
    "start": "1906790",
    "end": "1912610"
  },
  {
    "text": "they have to make sense and all that has to be tracked and we have to be able to reassemble everything and make sure just arbitrary fragments that have nothing to",
    "start": "1912610",
    "end": "1919240"
  },
  {
    "text": "do with anything don't just make it to an instance right that's part of what's going on and for ICMP we're just a",
    "start": "1919240",
    "end": "1925480"
  },
  {
    "text": "really complicated case so ICMP is the internet control messaging protocol you probably most know it for ping you know",
    "start": "1925480",
    "end": "1932920"
  },
  {
    "text": "you ping something you send an ICMP echo you get an echo reply but it's also used",
    "start": "1932920",
    "end": "1937990"
  },
  {
    "text": "for signaling errors related to connections things like path MTU discovery like you know pocket gets too",
    "start": "1937990",
    "end": "1944140"
  },
  {
    "text": "far in the network and says I don't fit anymore and ICMP response will be sent saying it didn't fit you need to change",
    "start": "1944140",
    "end": "1951820"
  },
  {
    "text": "the the size the the way that works is where you get back this ICMP error",
    "start": "1951820",
    "end": "1958030"
  },
  {
    "text": "message that actually includes you know a snapshot of the headers at least of the packet that triggered the error",
    "start": "1958030",
    "end": "1964270"
  },
  {
    "text": "right and so for ICMP actually to do something really deep you take a look all the way down there and see well does the ICP",
    "start": "1964270",
    "end": "1970780"
  },
  {
    "text": "error reference a packet that makes sense right that is something that I previously allowed or sent and should",
    "start": "1970780",
    "end": "1978070"
  },
  {
    "text": "come in right and so that's this was involved and stay full connection tracking that's what's happening you",
    "start": "1978070",
    "end": "1983320"
  },
  {
    "text": "know down there under the hood right and uh and and so far like that we're doing",
    "start": "1983320",
    "end": "1989710"
  },
  {
    "text": "that kind of make sense of okay well now kind of make sense have security groups work right we're just doing all that",
    "start": "1989710",
    "end": "1995920"
  },
  {
    "start": "1992000",
    "end": "2027000"
  },
  {
    "text": "contracting that makes sense how we can kind of aggregate flows at the Eni level you know we have this embedded router",
    "start": "1995920",
    "end": "2001470"
  },
  {
    "text": "that can ELISA all these packets are related and so when this time interval we only really need to send you one line of information about that know you know",
    "start": "2001470",
    "end": "2008309"
  },
  {
    "text": "a million lines but how do the others work right how does network law bouncer and that gateway work so one observation",
    "start": "2008309",
    "end": "2017130"
  },
  {
    "text": "is that if you look at these two things right if you look at that gateway and NLB they're super similar right they're",
    "start": "2017130",
    "end": "2025530"
  },
  {
    "text": "really about letting many instances share an IP address right so not gateway",
    "start": "2025530",
    "end": "2031020"
  },
  {
    "start": "2027000",
    "end": "2066000"
  },
  {
    "text": "is about saying I've got you know all these instances they want to get to the internet but they want to hide behind one IP or maybe I've only got one public",
    "start": "2031020",
    "end": "2038040"
  },
  {
    "text": "IP right super common that's when that",
    "start": "2038040",
    "end": "2043110"
  },
  {
    "text": "gateway is an OB is the same just in the other direction right I've got all these instances I want to hide behind one IP",
    "start": "2043110",
    "end": "2049169"
  },
  {
    "text": "address but it's in this time I'm accepting connections you know getting connections in from the internet say and",
    "start": "2049169",
    "end": "2054898"
  },
  {
    "text": "deciding where to put them so they're really the same problem right and so to",
    "start": "2054899",
    "end": "2062158"
  },
  {
    "text": "solve this to build all this we built a system called hyper plane which Peter",
    "start": "2062159",
    "end": "2067618"
  },
  {
    "start": "2066000",
    "end": "2184000"
  },
  {
    "text": "introduced and talked about on or last night on Tuesday night and just",
    "start": "2067619",
    "end": "2073530"
  },
  {
    "text": "introduced a bit about it I'm gonna cover it just a little bit more depth and when so hyper plane right it kind of",
    "start": "2073530",
    "end": "2081540"
  },
  {
    "text": "it's it's there on the V PC network along with you know ec2 physical hosts",
    "start": "2081540",
    "end": "2087628"
  },
  {
    "text": "and black fluid and so on actually hyper plane nodes are regular like completely",
    "start": "2087629",
    "end": "2095878"
  },
  {
    "text": "normal ec2 instances so the the team that runs hyperplane",
    "start": "2095879",
    "end": "2101020"
  },
  {
    "text": "they just launched instances and we they have a special privileged API that can",
    "start": "2101020",
    "end": "2106099"
  },
  {
    "text": "make them hyper tiny nodes but you know as far as they're concerned they can launch they can scale they can do",
    "start": "2106099",
    "end": "2111530"
  },
  {
    "text": "everything and ec2 instance can do and they use the ec2 network in the same way everything does even though these are",
    "start": "2111530",
    "end": "2117589"
  },
  {
    "text": "handling huge volumes of traffic we actually get amazing performance out of",
    "start": "2117589",
    "end": "2123170"
  },
  {
    "text": "them so these are doing so these are you know accepting traffic they are we'll",
    "start": "2123170",
    "end": "2130309"
  },
  {
    "text": "talk a bit a bit in a minute about what they're doing with that traffic but they're they're essentially doing state tracking and routing the track the",
    "start": "2130309",
    "end": "2137000"
  },
  {
    "text": "packets and so on but because the underlying ac2 network now because a",
    "start": "2137000",
    "end": "2142400"
  },
  {
    "text": "physical network has these you know tens of microseconds scale Layton sees it's",
    "start": "2142400",
    "end": "2148670"
  },
  {
    "text": "no trouble at all it can it can actually do you know quite amazing amounts of",
    "start": "2148670",
    "end": "2154160"
  },
  {
    "text": "throughput and responsive 'ti and and not add much latency by by doing this architecture it's pretty amazing so if",
    "start": "2154160",
    "end": "2160730"
  },
  {
    "text": "you provision a hyper plane resource so that's NLB not gateway private link",
    "start": "2160730",
    "end": "2166040"
  },
  {
    "text": "which launched for customers and partners yesterday and an EFS the",
    "start": "2166040",
    "end": "2172099"
  },
  {
    "text": "elastic file system also uses hyperplane under the hood you know the mapping service essentially says ok this II and",
    "start": "2172099",
    "end": "2178760"
  },
  {
    "text": "I it's really a hyperplane thing send it to hyperplane right hyperplane is gonna handle that and then when the traffic",
    "start": "2178760",
    "end": "2185299"
  },
  {
    "text": "comes to hyperplane so I said it's a distributed system right there's some magic going on those hyperplane nodes",
    "start": "2185299",
    "end": "2192470"
  },
  {
    "text": "are actually making transactional decisions about how to handle your packets so when that first packet for a",
    "start": "2192470",
    "end": "2199069"
  },
  {
    "text": "flow comes in before there's any stage set up hyperplane has to decide what should happen to it",
    "start": "2199069",
    "end": "2204530"
  },
  {
    "text": "all right so for example in the case of in the case of not hyperplane has to",
    "start": "2204530",
    "end": "2209660"
  },
  {
    "text": "guarantee that that can't back out bound connection will have a unique source",
    "start": "2209660",
    "end": "2215299"
  },
  {
    "text": "port at least if if you've got two connections both going to double amazon.com on port you know 443",
    "start": "2215299",
    "end": "2222530"
  },
  {
    "text": "hyperplane has to guarantee in a transactional way like really robust Lee that those connections have two",
    "start": "2222530",
    "end": "2228349"
  },
  {
    "text": "different source ports that's really important that's basically a database problem like trying to guarantee transactional uniqueness is you know a",
    "start": "2228349",
    "end": "2235849"
  },
  {
    "text": "distributed consensus problem right and we do it all in memory that makes it a little bit faster at least we don't have",
    "start": "2235849",
    "end": "2241880"
  },
  {
    "text": "to do commit things to disk but it's still you know a distributed consensus problem and that's what hyperplane is",
    "start": "2241880",
    "end": "2248210"
  },
  {
    "text": "doing like in real time so when that packet comes in you know all the nodes collectively are figuring out it gets",
    "start": "2248210",
    "end": "2253609"
  },
  {
    "text": "this source port and only it gets that source port and then they you know robustly commit that state so when the",
    "start": "2253609",
    "end": "2259460"
  },
  {
    "text": "next packet comes in we know what source port it should have and that the traffic can all flow without interruption",
    "start": "2259460",
    "end": "2265730"
  },
  {
    "text": "it's pretty amazing now it might seem like that's not that common like how",
    "start": "2265730",
    "end": "2271040"
  },
  {
    "text": "many times are you gonna get you know more more than one or two boxes hitting the same IP address set port at the same",
    "start": "2271040",
    "end": "2277099"
  },
  {
    "text": "time well software updates are pretty common case right so like 1:00 in the morning",
    "start": "2277099",
    "end": "2284150"
  },
  {
    "text": "all these Abunda boxes wake up and say I'm wrong we're all gonna hit the same Ubuntu after posit or e at the same time",
    "start": "2284150",
    "end": "2291440"
  },
  {
    "text": "it's like that the worst case you can imagine like literally you know hundreds",
    "start": "2291440",
    "end": "2296510"
  },
  {
    "text": "thousands of instances all deciding we want to get this warning P address on the same port at the same time right and",
    "start": "2296510",
    "end": "2302660"
  },
  {
    "text": "hyperplane has to work like to make sure that those port allocations are unique and do it in a very small window of time",
    "start": "2302660",
    "end": "2308210"
  },
  {
    "text": "right and for security reasons it actually gives every outbound connection",
    "start": "2308210",
    "end": "2313970"
  },
  {
    "text": "a random source port right even if even if we're already unique even if the client chose unique one they won't just",
    "start": "2313970",
    "end": "2319339"
  },
  {
    "text": "leave it alone it'll generally pick a new random one very small chance it might pick the same one but it generally",
    "start": "2319339",
    "end": "2325190"
  },
  {
    "text": "picks a random one that's for security reasons just because there's a lot of history that a lot of history with some software that you know was vulnerable to",
    "start": "2325190",
    "end": "2333020"
  },
  {
    "text": "UDP spoofing and so on and wasn't doing sufficient source port randomization on its own so we make sure",
    "start": "2333020",
    "end": "2339050"
  },
  {
    "text": "it's good we use our own secure random number generators and so on to make sure it's good at that point right so that's",
    "start": "2339050",
    "end": "2344630"
  },
  {
    "text": "what's happening for now we have to make that transactional decision for NLB we have to make a transactional decision",
    "start": "2344630",
    "end": "2350270"
  },
  {
    "text": "right so when that first packet comes in we have to say well which target should handle this right we have to pick one",
    "start": "2350270",
    "end": "2355700"
  },
  {
    "text": "and then we remember we have to remember it because all those new pockets are gonna come in from the same flower we're gonna need to send",
    "start": "2355700",
    "end": "2362119"
  },
  {
    "text": "them to the same place right and we do this by keeping state you know there are",
    "start": "2362119",
    "end": "2368180"
  },
  {
    "text": "ways to try and do this without without keeping too much state but we found that",
    "start": "2368180",
    "end": "2374600"
  },
  {
    "text": "especially for very long running connections and as I mentioned we have EFS which can have connections that",
    "start": "2374600",
    "end": "2379820"
  },
  {
    "text": "lasts months years because they're mounted file systems that this was the way to go it's pretty cool one other",
    "start": "2379820",
    "end": "2388250"
  },
  {
    "text": "interesting thing about how I plan works is that these hyperplane nodes right so",
    "start": "2388250",
    "end": "2395150"
  },
  {
    "text": "they're they're accepting the traffic they're deciding they're these making these transactional decisions they're",
    "start": "2395150",
    "end": "2401180"
  },
  {
    "text": "deciding where the traffic should go now as I mentioned they're the regular ec2 instances but they're actually they",
    "start": "2401180",
    "end": "2407869"
  },
  {
    "text": "don't participate in the mapping system so the mapping system is abstracted for them when they get traffic all they",
    "start": "2407869",
    "end": "2414470"
  },
  {
    "text": "really know is it's for this hyper plane resource that's it they don't know what",
    "start": "2414470",
    "end": "2419869"
  },
  {
    "text": "the physical mappings on the wire are or anything like that and that's for you know pretty strong security reasons all that's enforced at a lower level in",
    "start": "2419869",
    "end": "2426560"
  },
  {
    "text": "hardware that's something that you know we want to maintain very tight control on make sure there's no possibility of",
    "start": "2426560",
    "end": "2432440"
  },
  {
    "text": "traffic ever being spoofed or anything like that occurring and so we keep those layers of separation so that really only",
    "start": "2432440",
    "end": "2438230"
  },
  {
    "text": "the only the decisions are either things that need to happen on the hyper plane node happen on the hyper plane node okay",
    "start": "2438230",
    "end": "2444500"
  },
  {
    "text": "so now that's what's going on in terms of like distributed consensus algorithms and how it makes decisions and what it",
    "start": "2444500",
    "end": "2450770"
  },
  {
    "text": "does with traffic but this is another cool part of hyper plane then I want to cover so hyper planes you know it's it's",
    "start": "2450770",
    "end": "2457869"
  },
  {
    "text": "it's this system that's running it handles massive volumes the traffic Peter shared a little bit that on",
    "start": "2457869",
    "end": "2463190"
  },
  {
    "text": "Tuesday it's based on the architecture of the STL bouncer you know we essentially moved that to two ec2 and",
    "start": "2463190",
    "end": "2472040"
  },
  {
    "text": "adopted a little to be able to do that gateway and so on so it's really built for very high traffic volumes so and",
    "start": "2472040",
    "end": "2480109"
  },
  {
    "text": "it's embedded in the network and the network is multi-tenant right so it's not like we spin up hyperplane nodes",
    "start": "2480109",
    "end": "2486680"
  },
  {
    "text": "just for customer a and hyperplane no it's just for customer B and C and D and",
    "start": "2486680",
    "end": "2491700"
  },
  {
    "text": "you know these nodes are shared across all customers like you know lots of",
    "start": "2491700",
    "end": "2496859"
  },
  {
    "text": "parts of the network are right which brings a new challenge how do we manage this multi-tenancy right how do we make",
    "start": "2496859",
    "end": "2502950"
  },
  {
    "text": "sure that you know customer a doesn't cause problems to customer B and we call those noisy neighbor problems no one",
    "start": "2502950",
    "end": "2509339"
  },
  {
    "text": "wants a noisy neighbor right that is not what you want and this is kind of a core expertise for us right this is what",
    "start": "2509339",
    "end": "2515039"
  },
  {
    "text": "cloud services is about like we are about delivering the economies of scale and the efficiencies we could bring by",
    "start": "2515039",
    "end": "2522119"
  },
  {
    "text": "everybody sharing a little right by having all this big infrastructure that could really only be invested in at that",
    "start": "2522119",
    "end": "2527160"
  },
  {
    "text": "kind of scale but you still want to you still want to give a single tenant experience right you still want to make",
    "start": "2527160",
    "end": "2532920"
  },
  {
    "text": "sure the customer a feels like they're the only customer of this platform right so how do we do that right what's going",
    "start": "2532920",
    "end": "2540000"
  },
  {
    "text": "on it's pretty cool so I'm gonna go over a simple example so let's say we have 8",
    "start": "2540000",
    "end": "2546059"
  },
  {
    "start": "2542000",
    "end": "2675000"
  },
  {
    "text": "Piper pine nodes we have way more and I'll I'll cover the mats a little later",
    "start": "2546059",
    "end": "2551819"
  },
  {
    "text": "with more but let's say we have 8 for now so you know one strategy could be",
    "start": "2551819",
    "end": "2557430"
  },
  {
    "text": "okay all eight are just shared by all of my customers you know you know customer",
    "start": "2557430",
    "end": "2563130"
  },
  {
    "text": "a they have a one in eight chance of hitting any particular I prepare node and that's it there's lots of systems",
    "start": "2563130",
    "end": "2568260"
  },
  {
    "text": "built like that use lots of multi tenant services lots of web services built like that it's pretty common right but the",
    "start": "2568260",
    "end": "2574950"
  },
  {
    "text": "problem what that is noisy neighbor problems can be extreme right you get a really busy customer flow to all eight",
    "start": "2574950",
    "end": "2580799"
  },
  {
    "text": "nodes everybody has a bad day that's not what we want not what our customers want I should I should caveat all those thing",
    "start": "2580799",
    "end": "2588480"
  },
  {
    "text": "but like the capacity of hyperplane nodes is very very large you know this systems measured in you know tens of",
    "start": "2588480",
    "end": "2595109"
  },
  {
    "text": "gigabits can scale to terabits so it takes a lot to overload it I don't want to worry anybody so should I back at",
    "start": "2595109",
    "end": "2601559"
  },
  {
    "text": "that cautionary note but you know we planned for we plan for worst-case scenarios we want to make sure any noisy",
    "start": "2601559",
    "end": "2606839"
  },
  {
    "text": "neighbor issues are minimized so another strategy we could do is we could just shard it right we could say you know",
    "start": "2606839",
    "end": "2613740"
  },
  {
    "text": "I've got eight nodes I'm gonna have four groups of two and you know a corner of my customer go to group a corner of my",
    "start": "2613740",
    "end": "2619770"
  },
  {
    "text": "customers go to Group B and so on and now when one customer gives me a bad experience what a quarter of my",
    "start": "2619770",
    "end": "2625680"
  },
  {
    "text": "customers have a bad day you know that's better than before right that's a pretty common pattern that's sharding right a",
    "start": "2625680",
    "end": "2633380"
  },
  {
    "text": "technique so we actually extend that and we if we do something that we call shuffle charity which extends that",
    "start": "2633380",
    "end": "2639959"
  },
  {
    "text": "probabilistically and what we do is we say okay I've got eight nodes I'm gonna give each customer three but it's gonna",
    "start": "2639959",
    "end": "2647099"
  },
  {
    "text": "be I'm just gonna give them three at random right and you know here I've got",
    "start": "2647099",
    "end": "2653579"
  },
  {
    "text": "this customer who's orange they get those three nodes I don't got another customer that's a",
    "start": "2653579",
    "end": "2658829"
  },
  {
    "text": "pink and they get three nodes there's one that overlaps right that that one on",
    "start": "2658829",
    "end": "2664049"
  },
  {
    "text": "the bottom is both pink and orange so they both got assigned the same one right and so let's look at what the",
    "start": "2664049",
    "end": "2671219"
  },
  {
    "text": "overlaps like when you use this kind of algorithm right so with with eight nodes",
    "start": "2671219",
    "end": "2677869"
  },
  {
    "start": "2675000",
    "end": "2833000"
  },
  {
    "text": "choosing three at random the math works out like this right you know there's an",
    "start": "2677869",
    "end": "2682950"
  },
  {
    "text": "18% chance there'll be no overlap between so if I take customer and customer B at random there's an 18%",
    "start": "2682950",
    "end": "2689969"
  },
  {
    "text": "chance they won't overlap at all so it's quite low there's a 54% chance they'll",
    "start": "2689969",
    "end": "2695279"
  },
  {
    "text": "overlap by one node so just like that previous slide 26 percent chance two and so on two percent chance that all three",
    "start": "2695279",
    "end": "2701729"
  },
  {
    "text": "overlap that's bad right that's what eight but this is probabilistic math and",
    "start": "2701729",
    "end": "2707160"
  },
  {
    "text": "combinatorial math explodes like crazy like when you start using combinatorial xand you add numbers like the numbers",
    "start": "2707160",
    "end": "2713400"
  },
  {
    "text": "just get crazily big so let's look at a more realistic scenario that uses the kind of numbers hyperplanes actually",
    "start": "2713400",
    "end": "2719339"
  },
  {
    "text": "designed for and that's what a hundred hyperplane nodes and we give a customer five right so now in this model there's",
    "start": "2719339",
    "end": "2728579"
  },
  {
    "text": "a seventy seventy percent seventy seven percent chance they won't open up at all right twenty-one percent chance of one",
    "start": "2728579",
    "end": "2735150"
  },
  {
    "text": "host overlapping less than two percent chance that two will overlap two out of",
    "start": "2735150",
    "end": "2740880"
  },
  {
    "text": "five right and and so on down we can actually do a bit better because we assign them because we know how we",
    "start": "2740880",
    "end": "2747209"
  },
  {
    "text": "assign them we can actually make some guarantees and say okay well remove ones that overlap too much so we can say look",
    "start": "2747209",
    "end": "2754190"
  },
  {
    "text": "more than two are ever going to overlap between to house between two customers and then we've got resiliency guarantees",
    "start": "2754190",
    "end": "2760130"
  },
  {
    "text": "in the system like we can lose to knows no problem right so if a customer has a",
    "start": "2760130",
    "end": "2765560"
  },
  {
    "text": "really bad day because this huge burst of traffic fills all five of their nodes for some reason right there's a small",
    "start": "2765560",
    "end": "2772520"
  },
  {
    "text": "chance right that like two of your nose like there's a 2% chance that maybe two",
    "start": "2772520",
    "end": "2778130"
  },
  {
    "text": "of your nodes are in that set of five so it's really small probability much better than we saw before right so",
    "start": "2778130",
    "end": "2785060"
  },
  {
    "text": "that's already great but we can just lose those two right those two were just taken out of service for you and the",
    "start": "2785060",
    "end": "2790970"
  },
  {
    "text": "other tree this morning of capacity to carry on these systems are built in very big increments of capacity and so you",
    "start": "2790970",
    "end": "2797840"
  },
  {
    "text": "don't notice no nobody except the originating customer has any kind of a",
    "start": "2797840",
    "end": "2803030"
  },
  {
    "text": "bad day and actually behind the scenes if a customer does have a burst event like that we actually isolate and scale",
    "start": "2803030",
    "end": "2808370"
  },
  {
    "text": "them and start doing all sorts of things I mean even they don't have a bad day you know we actually hyperplane",
    "start": "2808370",
    "end": "2813860"
  },
  {
    "text": "resources by default you know you provision a hyperplane resource I cannot be or not Gateway which entity give you",
    "start": "2813860",
    "end": "2819800"
  },
  {
    "text": "about five gigabits per second by default which is what you get and then when we scale you we do it in five",
    "start": "2819800",
    "end": "2825230"
  },
  {
    "text": "gigabit per second trunks those are very big right very few people ever get into",
    "start": "2825230",
    "end": "2831650"
  },
  {
    "text": "those kind of requirements as I said it's based on the s3 low bouncer we've used it with the efest since launch it's",
    "start": "2831650",
    "end": "2838520"
  },
  {
    "start": "2833000",
    "end": "2854000"
  },
  {
    "text": "got you know sub-millisecond latency just crazy numbers of things that it can do you know can do millions of",
    "start": "2838520",
    "end": "2844310"
  },
  {
    "text": "connections per second it's this massive massively scalable system you know we",
    "start": "2844310",
    "end": "2850460"
  },
  {
    "text": "built it for s3 so it's it's numbers are pretty big the other thing that it's",
    "start": "2850460",
    "end": "2855830"
  },
  {
    "start": "2854000",
    "end": "2892000"
  },
  {
    "text": "doing we launched it for customers like I said yesterday is private link so all that's happening with private link is",
    "start": "2855830",
    "end": "2862190"
  },
  {
    "text": "because all this isn't better than the network we can actually provision resources between B pcs right so we can",
    "start": "2862190",
    "end": "2869870"
  },
  {
    "text": "have an MLB and VP CA or the provider V pcs it's called here and we can expose that in Ian's eyes and the client vbc",
    "start": "2869870",
    "end": "2877220"
  },
  {
    "text": "I'll be talking about this later in the week on Friday we have a talk that's on Friday about this where I'll be going",
    "start": "2877220",
    "end": "2884240"
  },
  {
    "text": "into more detail but hyperplanes just making it all happen right it can do the staple tracking even",
    "start": "2884240",
    "end": "2889339"
  },
  {
    "text": "between V pcs because it's all just built-in that means you can build even more compartmentalize V pcs like you",
    "start": "2889339",
    "end": "2896270"
  },
  {
    "start": "2892000",
    "end": "2955000"
  },
  {
    "text": "have one per service one per team or if you're a service provider you're gonna now offer services directly into V pcs",
    "start": "2896270",
    "end": "2901849"
  },
  {
    "text": "and so on I'm integrate with the a device marketplace so you know if you want to vendor service this way directly into",
    "start": "2901849",
    "end": "2908240"
  },
  {
    "text": "people's private networks including like it can reach their own premises expire Direct Connect which is pretty cool you",
    "start": "2908240",
    "end": "2915410"
  },
  {
    "text": "know all this works through the magic of hyperplane it's pretty awesome so the",
    "start": "2915410",
    "end": "2920660"
  },
  {
    "text": "main takeaways from all this that I you know when you leave with V PC is a",
    "start": "2920660",
    "end": "2926450"
  },
  {
    "text": "software-defined network right we're doing all this in code these are just systems running we've got you know our",
    "start": "2926450",
    "end": "2931460"
  },
  {
    "text": "own custom hardware in places but we're in copying packets we've got a mapping service everything can be controlled",
    "start": "2931460",
    "end": "2937990"
  },
  {
    "text": "programmatically right so unlike traditional networks I don't have to physically label anything it's all all",
    "start": "2937990",
    "end": "2943309"
  },
  {
    "text": "these descriptions it's hopefully pretty seamless right you can just connect to",
    "start": "2943309",
    "end": "2948859"
  },
  {
    "text": "existing networks very easily integrates with you know traditional networks just",
    "start": "2948859",
    "end": "2953960"
  },
  {
    "text": "fine and and now you know now that we're",
    "start": "2953960",
    "end": "2959000"
  },
  {
    "text": "really a bit more about hyperplane as Peter did on Tuesday you know we can we can reveal that you know there's a lot",
    "start": "2959000",
    "end": "2965900"
  },
  {
    "text": "of first-class support for flows that's going on in VB see a lot that's happening to be able to manage and",
    "start": "2965900",
    "end": "2971329"
  },
  {
    "text": "balance traffic at enormous scale it's it's pretty cool that's all the details",
    "start": "2971329",
    "end": "2977480"
  },
  {
    "text": "I have hopefully that was interesting there are other sessions worth going to if you want to find more about what's",
    "start": "2977480",
    "end": "2984650"
  },
  {
    "start": "2979000",
    "end": "2997000"
  },
  {
    "text": "going on with VB see under the hood and and thank you very much for coming if you've got any questions I'll be just",
    "start": "2984650",
    "end": "2991039"
  },
  {
    "text": "our stage at the end and yeah thanks again [Applause]",
    "start": "2991039",
    "end": "2998069"
  }
]