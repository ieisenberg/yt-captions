[
  {
    "text": "hi my name is Eric hanchad and I'm a",
    "start": "0",
    "end": "2639"
  },
  {
    "text": "front-end engineer at AWS we're going to",
    "start": "2639",
    "end": "5520"
  },
  {
    "text": "take a look at an existing application",
    "start": "5520",
    "end": "7140"
  },
  {
    "text": "that uses appsync in the background and",
    "start": "7140",
    "end": "9360"
  },
  {
    "text": "we're going to add in functionality so",
    "start": "9360",
    "end": "11160"
  },
  {
    "text": "users who are authorized in the admin",
    "start": "11160",
    "end": "13500"
  },
  {
    "text": "group can do deletions we'll be also be",
    "start": "13500",
    "end": "16080"
  },
  {
    "text": "updating our tables so that way only",
    "start": "16080",
    "end": "18900"
  },
  {
    "text": "authorized users can click a delete",
    "start": "18900",
    "end": "21240"
  },
  {
    "text": "button this video is a continuation of",
    "start": "21240",
    "end": "24119"
  },
  {
    "text": "our previous video where we created a",
    "start": "24119",
    "end": "26519"
  },
  {
    "text": "store admin dashboard so you don't",
    "start": "26519",
    "end": "28380"
  },
  {
    "text": "necessarily need to watch that to watch",
    "start": "28380",
    "end": "30000"
  },
  {
    "text": "this video but if you like the link will",
    "start": "30000",
    "end": "32460"
  },
  {
    "text": "be in the description so let's Jump On",
    "start": "32460",
    "end": "33960"
  },
  {
    "text": "In alright so I'm going to go ahead and",
    "start": "33960",
    "end": "35219"
  },
  {
    "text": "start by opening up the AWS console and",
    "start": "35219",
    "end": "38579"
  },
  {
    "text": "we're going to look at the AWS amplify",
    "start": "38579",
    "end": "40920"
  },
  {
    "text": "studio and make the changes that we need",
    "start": "40920",
    "end": "43079"
  },
  {
    "text": "today so I'm going to first I'm going to",
    "start": "43079",
    "end": "45239"
  },
  {
    "text": "search for AWS amplify I'm going to",
    "start": "45239",
    "end": "47100"
  },
  {
    "text": "choose it and then I'm going to look at",
    "start": "47100",
    "end": "48780"
  },
  {
    "text": "my existing application so in this case",
    "start": "48780",
    "end": "50760"
  },
  {
    "text": "it's studio graphql and I'm going to",
    "start": "50760",
    "end": "53100"
  },
  {
    "text": "click launch Studio you can see right",
    "start": "53100",
    "end": "54480"
  },
  {
    "text": "here here's the categories already added",
    "start": "54480",
    "end": "56640"
  },
  {
    "text": "for API authentication storage we can",
    "start": "56640",
    "end": "59699"
  },
  {
    "text": "look at those directly but studio is a",
    "start": "59699",
    "end": "61559"
  },
  {
    "text": "little bit of an easier way to get to it",
    "start": "61559",
    "end": "63480"
  },
  {
    "text": "so I'm going to click launch Studio all",
    "start": "63480",
    "end": "65280"
  },
  {
    "text": "right so I'm into my studio application",
    "start": "65280",
    "end": "67799"
  },
  {
    "text": "and let's take a look at the data tab so",
    "start": "67799",
    "end": "70320"
  },
  {
    "text": "here are the models that we created so",
    "start": "70320",
    "end": "72000"
  },
  {
    "text": "we have three of them we have a platform",
    "start": "72000",
    "end": "74220"
  },
  {
    "text": "genre and product and right now if we",
    "start": "74220",
    "end": "77159"
  },
  {
    "text": "click on any of these you'll see that",
    "start": "77159",
    "end": "78780"
  },
  {
    "text": "they're actually all just public so if",
    "start": "78780",
    "end": "81180"
  },
  {
    "text": "you look like look here everybody can",
    "start": "81180",
    "end": "83460"
  },
  {
    "text": "create read update and delete and if we",
    "start": "83460",
    "end": "85740"
  },
  {
    "text": "look at the schema more closely you see",
    "start": "85740",
    "end": "88140"
  },
  {
    "text": "we have platform allow public Cloud",
    "start": "88140",
    "end": "90420"
  },
  {
    "text": "public so there's really nothing here",
    "start": "90420",
    "end": "92400"
  },
  {
    "text": "that protects us and what we want to do",
    "start": "92400",
    "end": "94740"
  },
  {
    "text": "is we want only certain users to be able",
    "start": "94740",
    "end": "98280"
  },
  {
    "text": "to make changes and updates so we all",
    "start": "98280",
    "end": "101520"
  },
  {
    "text": "want admin users to be able to do",
    "start": "101520",
    "end": "104520"
  },
  {
    "text": "deletes and we want logged in users to",
    "start": "104520",
    "end": "107340"
  },
  {
    "text": "be able to do creates and only public",
    "start": "107340",
    "end": "108900"
  },
  {
    "text": "users can read so let's make that change",
    "start": "108900",
    "end": "111060"
  },
  {
    "text": "and we'll do it for all three of them we",
    "start": "111060",
    "end": "112799"
  },
  {
    "text": "can do changes for every single model",
    "start": "112799",
    "end": "114600"
  },
  {
    "text": "some go this platform one for the public",
    "start": "114600",
    "end": "116880"
  },
  {
    "text": "I'm just gonna make it to only public",
    "start": "116880",
    "end": "119100"
  },
  {
    "text": "people can do is read",
    "start": "119100",
    "end": "121740"
  },
  {
    "text": "and I'm going to add some authorization",
    "start": "121740",
    "end": "123659"
  },
  {
    "text": "rules I'll add another one and the first",
    "start": "123659",
    "end": "126000"
  },
  {
    "text": "one is this Cognito user pull so these",
    "start": "126000",
    "end": "128039"
  },
  {
    "text": "are logged in users so I want logged in",
    "start": "128039",
    "end": "130500"
  },
  {
    "text": "users to be able to create and read but",
    "start": "130500",
    "end": "133260"
  },
  {
    "text": "not update or delete we'll assume that",
    "start": "133260",
    "end": "135060"
  },
  {
    "text": "you need to have special permissions to",
    "start": "135060",
    "end": "136980"
  },
  {
    "text": "do that",
    "start": "136980",
    "end": "137940"
  },
  {
    "text": "so I'm going to create a third rule here",
    "start": "137940",
    "end": "140160"
  },
  {
    "text": "and this one's going to be a group rule",
    "start": "140160",
    "end": "142260"
  },
  {
    "text": "so I'm going to create new here I'm",
    "start": "142260",
    "end": "144180"
  },
  {
    "text": "going to create a new group called admin",
    "start": "144180",
    "end": "147120"
  },
  {
    "text": "and click create group",
    "start": "147120",
    "end": "150000"
  },
  {
    "text": "and now with our add new admin group",
    "start": "150000",
    "end": "152819"
  },
  {
    "text": "here",
    "start": "152819",
    "end": "154260"
  },
  {
    "text": "you see users and admin group can read",
    "start": "154260",
    "end": "156120"
  },
  {
    "text": "create update and delete and I'm just",
    "start": "156120",
    "end": "159000"
  },
  {
    "text": "going to leave and leave it here so if",
    "start": "159000",
    "end": "160920"
  },
  {
    "text": "you're an admin you can do everything",
    "start": "160920",
    "end": "162900"
  },
  {
    "text": "and this looks good so if we check here",
    "start": "162900",
    "end": "165599"
  },
  {
    "text": "and look at the graphql schema this is",
    "start": "165599",
    "end": "168000"
  },
  {
    "text": "what it adds in here and you can also do",
    "start": "168000",
    "end": "169560"
  },
  {
    "text": "this manually through the schema file",
    "start": "169560",
    "end": "171660"
  },
  {
    "text": "that's in your amplify app but you can",
    "start": "171660",
    "end": "174300"
  },
  {
    "text": "see here my public operations read and",
    "start": "174300",
    "end": "176940"
  },
  {
    "text": "then private they create read and then",
    "start": "176940",
    "end": "178620"
  },
  {
    "text": "if you're in the group admin you",
    "start": "178620",
    "end": "180239"
  },
  {
    "text": "basically get all the different access",
    "start": "180239",
    "end": "183060"
  },
  {
    "text": "and to make this work correctly I'm just",
    "start": "183060",
    "end": "184680"
  },
  {
    "text": "going to go ahead and add that for all",
    "start": "184680",
    "end": "186300"
  },
  {
    "text": "the other ones and have the same",
    "start": "186300",
    "end": "188180"
  },
  {
    "text": "permission so let's just just take a",
    "start": "188180",
    "end": "190319"
  },
  {
    "text": "second all right I added an old",
    "start": "190319",
    "end": "192239"
  },
  {
    "text": "authentication or authorization rules",
    "start": "192239",
    "end": "194040"
  },
  {
    "text": "here and you can see they all look the",
    "start": "194040",
    "end": "195659"
  },
  {
    "text": "same between all these different models",
    "start": "195659",
    "end": "197700"
  },
  {
    "text": "which is good one thing we need to make",
    "start": "197700",
    "end": "200280"
  },
  {
    "text": "sure we do then is we have this new",
    "start": "200280",
    "end": "202620"
  },
  {
    "text": "admin group",
    "start": "202620",
    "end": "204120"
  },
  {
    "text": "and we need to make sure this admin",
    "start": "204120",
    "end": "206519"
  },
  {
    "text": "group that we add users to it so we'll",
    "start": "206519",
    "end": "208319"
  },
  {
    "text": "do that in a second but let's just click",
    "start": "208319",
    "end": "209700"
  },
  {
    "text": "save and deploy now and make the changes",
    "start": "209700",
    "end": "213360"
  },
  {
    "text": "while it's doing that I just want to",
    "start": "213360",
    "end": "214860"
  },
  {
    "text": "quickly mention I had some questions",
    "start": "214860",
    "end": "216900"
  },
  {
    "text": "from a previous video I did on this",
    "start": "216900",
    "end": "219239"
  },
  {
    "text": "where people are asking well how do",
    "start": "219239",
    "end": "220860"
  },
  {
    "text": "migrations work in graphql and with",
    "start": "220860",
    "end": "223080"
  },
  {
    "text": "appsync so in general you don't have to",
    "start": "223080",
    "end": "225299"
  },
  {
    "text": "worry about migrations with appsync and",
    "start": "225299",
    "end": "227700"
  },
  {
    "text": "graphql it's smart enough to know that",
    "start": "227700",
    "end": "229680"
  },
  {
    "text": "when you add fields that it'll",
    "start": "229680",
    "end": "231659"
  },
  {
    "text": "automatically add it when we make",
    "start": "231659",
    "end": "233819"
  },
  {
    "text": "changes like this there's no such thing",
    "start": "233819",
    "end": "235860"
  },
  {
    "text": "as like migrations where we have to kind",
    "start": "235860",
    "end": "237840"
  },
  {
    "text": "of downgrade or upgrade to different",
    "start": "237840",
    "end": "239400"
  },
  {
    "text": "versions we always have the same version",
    "start": "239400",
    "end": "241080"
  },
  {
    "text": "and that's actually kind of built into",
    "start": "241080",
    "end": "243120"
  },
  {
    "text": "the idea behind graphql that you don't",
    "start": "243120",
    "end": "245280"
  },
  {
    "text": "necessarily have to do these migrations",
    "start": "245280",
    "end": "246780"
  },
  {
    "text": "so we'll just give this a minute and",
    "start": "246780",
    "end": "248400"
  },
  {
    "text": "this will update our data models and our",
    "start": "248400",
    "end": "250200"
  },
  {
    "text": "appsync backend",
    "start": "250200",
    "end": "251760"
  },
  {
    "text": "okay so the updates have been done which",
    "start": "251760",
    "end": "254159"
  },
  {
    "text": "is great I can pull this back into my",
    "start": "254159",
    "end": "256500"
  },
  {
    "text": "app",
    "start": "256500",
    "end": "257340"
  },
  {
    "text": "and one thing I want to do now is I'm",
    "start": "257340",
    "end": "259680"
  },
  {
    "text": "going to go to this user management",
    "start": "259680",
    "end": "263040"
  },
  {
    "text": "and this will have the email address",
    "start": "263040",
    "end": "265500"
  },
  {
    "text": "that I signed up with before and as you",
    "start": "265500",
    "end": "268919"
  },
  {
    "text": "probably see you can't see it I grade it",
    "start": "268919",
    "end": "270960"
  },
  {
    "text": "out but this is the email I just created",
    "start": "270960",
    "end": "272880"
  },
  {
    "text": "uh I'm pretty on my previous previous",
    "start": "272880",
    "end": "275580"
  },
  {
    "text": "video and you can see here I go to group",
    "start": "275580",
    "end": "277979"
  },
  {
    "text": "memberships I can now add this user to a",
    "start": "277979",
    "end": "281160"
  },
  {
    "text": "group so I'm going to click down here",
    "start": "281160",
    "end": "282660"
  },
  {
    "text": "and click admin so now I'm inside this",
    "start": "282660",
    "end": "285660"
  },
  {
    "text": "admin group and now this user will have",
    "start": "285660",
    "end": "289139"
  },
  {
    "text": "special access so that they can be",
    "start": "289139",
    "end": "291900"
  },
  {
    "text": "inside this group that we just created",
    "start": "291900",
    "end": "293940"
  },
  {
    "text": "this admin group all right so we are in",
    "start": "293940",
    "end": "296759"
  },
  {
    "text": "the code and the first thing we want to",
    "start": "296759",
    "end": "298740"
  },
  {
    "text": "do in this application is we're going to",
    "start": "298740",
    "end": "301080"
  },
  {
    "text": "create a new API route for deleting data",
    "start": "301080",
    "end": "306180"
  },
  {
    "text": "and we want to make sure this this new",
    "start": "306180",
    "end": "308580"
  },
  {
    "text": "API route only works if you're in the",
    "start": "308580",
    "end": "311160"
  },
  {
    "text": "admin group and you're logged in and",
    "start": "311160",
    "end": "313320"
  },
  {
    "text": "authenticated of course",
    "start": "313320",
    "end": "315120"
  },
  {
    "text": "so I'm going to come here I have this",
    "start": "315120",
    "end": "317340"
  },
  {
    "text": "folder called API and inside this API",
    "start": "317340",
    "end": "320820"
  },
  {
    "text": "folder I have hello.ts so this is kind",
    "start": "320820",
    "end": "323340"
  },
  {
    "text": "of what comes out of the box in xjs13",
    "start": "323340",
    "end": "325440"
  },
  {
    "text": "obviously it's not what we want so I'm",
    "start": "325440",
    "end": "327600"
  },
  {
    "text": "going to rename it",
    "start": "327600",
    "end": "329400"
  },
  {
    "text": "so we're just going to call it delete so",
    "start": "329400",
    "end": "331860"
  },
  {
    "text": "first we're going to do a quick renaming",
    "start": "331860",
    "end": "333840"
  },
  {
    "text": "of it what we're going to do is we have",
    "start": "333840",
    "end": "337500"
  },
  {
    "text": "a way to access amplify and some of the",
    "start": "337500",
    "end": "340139"
  },
  {
    "text": "API from here and we can then access and",
    "start": "340139",
    "end": "344280"
  },
  {
    "text": "do some API requests and let's go ahead",
    "start": "344280",
    "end": "347460"
  },
  {
    "text": "and do that so I'm not going to have",
    "start": "347460",
    "end": "348360"
  },
  {
    "text": "this data here I'm not going to have",
    "start": "348360",
    "end": "350100"
  },
  {
    "text": "this next response data so first thing I",
    "start": "350100",
    "end": "352800"
  },
  {
    "text": "need to do is I need to import in some",
    "start": "352800",
    "end": "356160"
  },
  {
    "text": "things from amplify so I'm going to",
    "start": "356160",
    "end": "357660"
  },
  {
    "text": "import in amplify",
    "start": "357660",
    "end": "360300"
  },
  {
    "text": "from AWS amplify and then I'm going to",
    "start": "360300",
    "end": "363300"
  },
  {
    "text": "import in the AWS exports file",
    "start": "363300",
    "end": "366479"
  },
  {
    "text": "now this is the file that's that was",
    "start": "366479",
    "end": "370139"
  },
  {
    "text": "created once we created our application",
    "start": "370139",
    "end": "372900"
  },
  {
    "text": "it's in the source folder so if we look",
    "start": "372900",
    "end": "375419"
  },
  {
    "text": "here once we're in the amplify pool the",
    "start": "375419",
    "end": "377820"
  },
  {
    "text": "first time it adds this AWS exports so",
    "start": "377820",
    "end": "380880"
  },
  {
    "text": "we're just going to grab it right from",
    "start": "380880",
    "end": "381960"
  },
  {
    "text": "there and then we'll need to run an",
    "start": "381960",
    "end": "383639"
  },
  {
    "text": "amplify configure and in this configure",
    "start": "383639",
    "end": "386400"
  },
  {
    "text": "here we need to do a couple things",
    "start": "386400",
    "end": "389520"
  },
  {
    "text": "one we need to tell it that we want to",
    "start": "389520",
    "end": "393000"
  },
  {
    "text": "basically grab all the AWS exports and",
    "start": "393000",
    "end": "394860"
  },
  {
    "text": "put it in here in this object but we",
    "start": "394860",
    "end": "397080"
  },
  {
    "text": "want to do a couple things we want to",
    "start": "397080",
    "end": "398639"
  },
  {
    "text": "put SSR true this is a configuration",
    "start": "398639",
    "end": "400860"
  },
  {
    "text": "that tells it that we are on the server",
    "start": "400860",
    "end": "403199"
  },
  {
    "text": "side and that it should work this way",
    "start": "403199",
    "end": "406139"
  },
  {
    "text": "okie dokie so first I need to grab some",
    "start": "406139",
    "end": "410639"
  },
  {
    "text": "data out of our",
    "start": "410639",
    "end": "413900"
  },
  {
    "text": "application here so there is this",
    "start": "413900",
    "end": "418080"
  },
  {
    "text": "uh this Library basically this function",
    "start": "418080",
    "end": "420780"
  },
  {
    "text": "here called with SSR context and this is",
    "start": "420780",
    "end": "424259"
  },
  {
    "text": "from the AWS amplify library and this",
    "start": "424259",
    "end": "427440"
  },
  {
    "text": "context uh",
    "start": "427440",
    "end": "429360"
  },
  {
    "text": "you can provide an object and a request",
    "start": "429360",
    "end": "431639"
  },
  {
    "text": "object and from here I can connect",
    "start": "431639",
    "end": "434639"
  },
  {
    "text": "basically grab data from amplify",
    "start": "434639",
    "end": "439020"
  },
  {
    "text": "so I can use it inside this Handler here",
    "start": "439020",
    "end": "442199"
  },
  {
    "text": "and the two things I need is auth",
    "start": "442199",
    "end": "444960"
  },
  {
    "text": "and API",
    "start": "444960",
    "end": "446940"
  },
  {
    "text": "and so this auth allows us to do",
    "start": "446940",
    "end": "449160"
  },
  {
    "text": "authenticated commands to our back end",
    "start": "449160",
    "end": "452340"
  },
  {
    "text": "and this API lets us talk to our graphql",
    "start": "452340",
    "end": "457039"
  },
  {
    "text": "and now that we have this I'm going to",
    "start": "457039",
    "end": "459240"
  },
  {
    "text": "delete I'm going to just comment that",
    "start": "459240",
    "end": "460860"
  },
  {
    "text": "out for right now and I'm going to do",
    "start": "460860",
    "end": "463319"
  },
  {
    "text": "request dot method",
    "start": "463319",
    "end": "465720"
  },
  {
    "text": "and we're going to assume they're going",
    "start": "465720",
    "end": "467460"
  },
  {
    "text": "to send over a delete if they don't send",
    "start": "467460",
    "end": "469680"
  },
  {
    "text": "over a delete then we can just do an",
    "start": "469680",
    "end": "472380"
  },
  {
    "text": "else here and we'll send back a an error",
    "start": "472380",
    "end": "475979"
  },
  {
    "text": "so I'm just going to",
    "start": "475979",
    "end": "478080"
  },
  {
    "text": "copy and paste this here so we're just",
    "start": "478080",
    "end": "480180"
  },
  {
    "text": "going to send this status that says 401",
    "start": "480180",
    "end": "482240"
  },
  {
    "text": "authentication failed but I will assume",
    "start": "482240",
    "end": "484860"
  },
  {
    "text": "that they are it goes through here",
    "start": "484860",
    "end": "488039"
  },
  {
    "text": "and we'll need to put in a try catch",
    "start": "488039",
    "end": "490740"
  },
  {
    "text": "block so we'll add that in and inside",
    "start": "490740",
    "end": "492840"
  },
  {
    "text": "this Tri block here is I'm needing to",
    "start": "492840",
    "end": "496080"
  },
  {
    "text": "grab some data from our authenticated",
    "start": "496080",
    "end": "500580"
  },
  {
    "text": "user so first if a user isn't",
    "start": "500580",
    "end": "502620"
  },
  {
    "text": "authenticated at all it they'll be it'll",
    "start": "502620",
    "end": "505680"
  },
  {
    "text": "come down here so this will be",
    "start": "505680",
    "end": "507000"
  },
  {
    "text": "unauthenticated and if this happens we",
    "start": "507000",
    "end": "509819"
  },
  {
    "text": "want to also show some sort of error",
    "start": "509819",
    "end": "511919"
  },
  {
    "text": "message so I'm just going to add that in",
    "start": "511919",
    "end": "514260"
  },
  {
    "text": "here okay so assuming that it doesn't",
    "start": "514260",
    "end": "517200"
  },
  {
    "text": "fail what what do we need to do here so",
    "start": "517200",
    "end": "520080"
  },
  {
    "text": "I'm going to I'm going to grab some data",
    "start": "520080",
    "end": "523620"
  },
  {
    "text": "I'm going to run this command and",
    "start": "523620",
    "end": "525540"
  },
  {
    "text": "actually since I'm doing a weight I'm",
    "start": "525540",
    "end": "527160"
  },
  {
    "text": "going to make this async I'm going to",
    "start": "527160",
    "end": "528779"
  },
  {
    "text": "wait ah dot current",
    "start": "528779",
    "end": "532220"
  },
  {
    "text": "authenticated authenticated user and",
    "start": "532220",
    "end": "535800"
  },
  {
    "text": "this is going to give us some data that",
    "start": "535800",
    "end": "537240"
  },
  {
    "text": "we need so first it's going to give us a",
    "start": "537240",
    "end": "539700"
  },
  {
    "text": "sign in user session and that's going to",
    "start": "539700",
    "end": "543060"
  },
  {
    "text": "provide us an access token and that's",
    "start": "543060",
    "end": "545459"
  },
  {
    "text": "going to provide us a payload and this",
    "start": "545459",
    "end": "547620"
  },
  {
    "text": "payload is going to allow us to look up",
    "start": "547620",
    "end": "550700"
  },
  {
    "text": "if they're in the correct group so let's",
    "start": "550700",
    "end": "553560"
  },
  {
    "text": "do that if payload and it's going to be",
    "start": "553560",
    "end": "556740"
  },
  {
    "text": "Cognito groups includes admin then we",
    "start": "556740",
    "end": "561480"
  },
  {
    "text": "know we're in the right place and once",
    "start": "561480",
    "end": "563160"
  },
  {
    "text": "again we're going to have an else here",
    "start": "563160",
    "end": "564680"
  },
  {
    "text": "that if they're not in the right one",
    "start": "564680",
    "end": "567180"
  },
  {
    "text": "we're just going to give an error",
    "start": "567180",
    "end": "570060"
  },
  {
    "text": "message so assuming they are in the",
    "start": "570060",
    "end": "572160"
  },
  {
    "text": "correct group we want to talk to the",
    "start": "572160",
    "end": "574860"
  },
  {
    "text": "graphql API and actually do the delete",
    "start": "574860",
    "end": "578220"
  },
  {
    "text": "command so the way I like to do this so",
    "start": "578220",
    "end": "580620"
  },
  {
    "text": "This API right now it doesn't have any",
    "start": "580620",
    "end": "583560"
  },
  {
    "text": "types to it so we're going to add in a",
    "start": "583560",
    "end": "585540"
  },
  {
    "text": "type and we're going to call it the type",
    "start": "585540",
    "end": "587339"
  },
  {
    "text": "we want to grab is API class and this",
    "start": "587339",
    "end": "589560"
  },
  {
    "text": "API class it's deprecated don't worry it",
    "start": "589560",
    "end": "591959"
  },
  {
    "text": "should work fine but it's from the AWS",
    "start": "591959",
    "end": "593519"
  },
  {
    "text": "amplify and we're going to use Dot",
    "start": "593519",
    "end": "595620"
  },
  {
    "text": "graphql and then this is where we're",
    "start": "595620",
    "end": "597660"
  },
  {
    "text": "going to add in some types we're going",
    "start": "597660",
    "end": "600360"
  },
  {
    "text": "to use the graphql query type which",
    "start": "600360",
    "end": "603060"
  },
  {
    "text": "we're going to add in a second and then",
    "start": "603060",
    "end": "605640"
  },
  {
    "text": "we're going to have a delete product",
    "start": "605640",
    "end": "607560"
  },
  {
    "text": "input",
    "start": "607560",
    "end": "608940"
  },
  {
    "text": "which is this one so this graphql query",
    "start": "608940",
    "end": "611339"
  },
  {
    "text": "though it's so we'll just import that in",
    "start": "611339",
    "end": "613980"
  },
  {
    "text": "real quickly",
    "start": "613980",
    "end": "615240"
  },
  {
    "text": "so there it is and then we'll need to",
    "start": "615240",
    "end": "617580"
  },
  {
    "text": "add some options here so we have a query",
    "start": "617580",
    "end": "620279"
  },
  {
    "text": "auth mode auth token and variables",
    "start": "620279",
    "end": "623459"
  },
  {
    "text": "alright so since we delete we're doing a",
    "start": "623459",
    "end": "626100"
  },
  {
    "text": "delete we need to do a query here and we",
    "start": "626100",
    "end": "629160"
  },
  {
    "text": "need to get around this mutations",
    "start": "629160",
    "end": "632040"
  },
  {
    "text": "which we'll need to also Import in so",
    "start": "632040",
    "end": "634980"
  },
  {
    "text": "this is this mutations is coming from",
    "start": "634980",
    "end": "637019"
  },
  {
    "text": "our graphql mutations folder this was",
    "start": "637019",
    "end": "639000"
  },
  {
    "text": "automatically code gen from from for us",
    "start": "639000",
    "end": "641779"
  },
  {
    "text": "from AWS amplifies Cogen when we're",
    "start": "641779",
    "end": "645420"
  },
  {
    "text": "using the CLI which is really important",
    "start": "645420",
    "end": "647040"
  },
  {
    "text": "so we should be able to do mutations Dot",
    "start": "647040",
    "end": "649260"
  },
  {
    "text": "and then this will give us a bunch of",
    "start": "649260",
    "end": "651060"
  },
  {
    "text": "options and we'll use delete product and",
    "start": "651060",
    "end": "654480"
  },
  {
    "text": "then we'll have variables and we'll have",
    "start": "654480",
    "end": "657180"
  },
  {
    "text": "an input variable that we need to pass",
    "start": "657180",
    "end": "658740"
  },
  {
    "text": "in now we need to make sure we have the",
    "start": "658740",
    "end": "661560"
  },
  {
    "text": "ID I will assume that they're sending it",
    "start": "661560",
    "end": "664140"
  },
  {
    "text": "in So at the top here and the last thing",
    "start": "664140",
    "end": "667079"
  },
  {
    "text": "we want to do is this auth mode and this",
    "start": "667079",
    "end": "669180"
  },
  {
    "text": "auth mode we can change it to Amazon",
    "start": "669180",
    "end": "670560"
  },
  {
    "text": "Cognito user pools and that way it's",
    "start": "670560",
    "end": "673079"
  },
  {
    "text": "being sent as this user pool here and",
    "start": "673079",
    "end": "676260"
  },
  {
    "text": "the last thing is we want to make sure",
    "start": "676260",
    "end": "677760"
  },
  {
    "text": "if it is Success that we passed back a",
    "start": "677760",
    "end": "679920"
  },
  {
    "text": "successful at 200. awesome so if we did",
    "start": "679920",
    "end": "682740"
  },
  {
    "text": "everything correctly now our back end",
    "start": "682740",
    "end": "684540"
  },
  {
    "text": "should be set up so if they come in",
    "start": "684540",
    "end": "687120"
  },
  {
    "text": "through a delete we grab the ID from it",
    "start": "687120",
    "end": "689700"
  },
  {
    "text": "we grab this payload out of this current",
    "start": "689700",
    "end": "691980"
  },
  {
    "text": "authenticated user since they're logged",
    "start": "691980",
    "end": "694260"
  },
  {
    "text": "in if this by the way if this await",
    "start": "694260",
    "end": "695760"
  },
  {
    "text": "fails it'll hit the catch block and then",
    "start": "695760",
    "end": "697920"
  },
  {
    "text": "send this authorization failed otherwise",
    "start": "697920",
    "end": "699899"
  },
  {
    "text": "we check to see if they're in the right",
    "start": "699899",
    "end": "701220"
  },
  {
    "text": "Cognito groups that includes admin once",
    "start": "701220",
    "end": "703980"
  },
  {
    "text": "again if they don't we send back an",
    "start": "703980",
    "end": "705300"
  },
  {
    "text": "error and then we do this query for them",
    "start": "705300",
    "end": "708540"
  },
  {
    "text": "and providing the this delete product",
    "start": "708540",
    "end": "711420"
  },
  {
    "text": "graphql that has already been generated",
    "start": "711420",
    "end": "713820"
  },
  {
    "text": "for us next let's take a look at our",
    "start": "713820",
    "end": "716160"
  },
  {
    "text": "products table so we have our products",
    "start": "716160",
    "end": "717959"
  },
  {
    "text": "we have all these different table cells",
    "start": "717959",
    "end": "720240"
  },
  {
    "text": "where we show the name price genre",
    "start": "720240",
    "end": "721800"
  },
  {
    "text": "platform image date added and then we're",
    "start": "721800",
    "end": "724079"
  },
  {
    "text": "grabbing some data from this products",
    "start": "724079",
    "end": "725880"
  },
  {
    "text": "objects that's being sent over",
    "start": "725880",
    "end": "727620"
  },
  {
    "text": "and then we also show the date at the",
    "start": "727620",
    "end": "729720"
  },
  {
    "text": "end but what we really want to do is",
    "start": "729720",
    "end": "731760"
  },
  {
    "text": "also check to see first if they're an",
    "start": "731760",
    "end": "735240"
  },
  {
    "text": "admin and if they are an admin then",
    "start": "735240",
    "end": "737760"
  },
  {
    "text": "we're going to show a button so let's",
    "start": "737760",
    "end": "739980"
  },
  {
    "text": "just add the button first so we're going",
    "start": "739980",
    "end": "741779"
  },
  {
    "text": "to add a table cell here and then we're",
    "start": "741779",
    "end": "743760"
  },
  {
    "text": "going to use a button and this is a part",
    "start": "743760",
    "end": "745800"
  },
  {
    "text": "of the AWS Library AWS amplify Library",
    "start": "745800",
    "end": "748260"
  },
  {
    "text": "so you can see I imported in so we're",
    "start": "748260",
    "end": "749940"
  },
  {
    "text": "going to use this variation destructive",
    "start": "749940",
    "end": "751260"
  },
  {
    "text": "and we'll make it look red we need it to",
    "start": "751260",
    "end": "753120"
  },
  {
    "text": "actually do a few things so I think what",
    "start": "753120",
    "end": "755399"
  },
  {
    "text": "I'm going to do is I'm going to pass",
    "start": "755399",
    "end": "756660"
  },
  {
    "text": "some variables down so I'm going to go",
    "start": "756660",
    "end": "758459"
  },
  {
    "text": "back to this products table props and",
    "start": "758459",
    "end": "761880"
  },
  {
    "text": "right now I only have it passing in this",
    "start": "761880",
    "end": "764579"
  },
  {
    "text": "product",
    "start": "764579",
    "end": "765899"
  },
  {
    "text": "but what I want to do is I want to",
    "start": "765899",
    "end": "767760"
  },
  {
    "text": "actually pass in a Handler here so I'm",
    "start": "767760",
    "end": "770579"
  },
  {
    "text": "going to pass in an on click delete",
    "start": "770579",
    "end": "772740"
  },
  {
    "text": "which I'll have an ID string and that'll",
    "start": "772740",
    "end": "774959"
  },
  {
    "text": "be void and then I'm going to pass in a",
    "start": "774959",
    "end": "777480"
  },
  {
    "text": "Boolean for an admin so right here we're",
    "start": "777480",
    "end": "779940"
  },
  {
    "text": "gonna add I'll add these in I'm going to",
    "start": "779940",
    "end": "781320"
  },
  {
    "text": "add this on click delete and this admin",
    "start": "781320",
    "end": "783180"
  },
  {
    "text": "so if I go back to here",
    "start": "783180",
    "end": "785820"
  },
  {
    "text": "I'm going to use a ternary so I'm going",
    "start": "785820",
    "end": "789060"
  },
  {
    "text": "to check to see if admin",
    "start": "789060",
    "end": "791160"
  },
  {
    "text": "is there and if so I'm going to come",
    "start": "791160",
    "end": "794519"
  },
  {
    "text": "down here and then I'll do just null",
    "start": "794519",
    "end": "797519"
  },
  {
    "text": "and also I want to add an on click here",
    "start": "797519",
    "end": "800459"
  },
  {
    "text": "so when they click on it we're going to",
    "start": "800459",
    "end": "803279"
  },
  {
    "text": "just run that function the on click",
    "start": "803279",
    "end": "805740"
  },
  {
    "text": "delete and then pass in that item",
    "start": "805740",
    "end": "808620"
  },
  {
    "text": "dot ID",
    "start": "808620",
    "end": "810240"
  },
  {
    "text": "so now this button should only show up",
    "start": "810240",
    "end": "812160"
  },
  {
    "text": "if they're an admin and once they click",
    "start": "812160",
    "end": "814620"
  },
  {
    "text": "it it'll go and delete it so let's go",
    "start": "814620",
    "end": "817019"
  },
  {
    "text": "into our index TSX file and you can see",
    "start": "817019",
    "end": "818940"
  },
  {
    "text": "we're already seeing an error here",
    "start": "818940",
    "end": "819899"
  },
  {
    "text": "because we're not passing in everything",
    "start": "819899",
    "end": "821040"
  },
  {
    "text": "we're supposed to the products table",
    "start": "821040",
    "end": "823740"
  },
  {
    "text": "uh but let's let's add in some",
    "start": "823740",
    "end": "826680"
  },
  {
    "text": "functionality in here to grab the data",
    "start": "826680",
    "end": "829920"
  },
  {
    "text": "that we need so first we probably need",
    "start": "829920",
    "end": "832620"
  },
  {
    "text": "the on click delete so I'm going to",
    "start": "832620",
    "end": "834899"
  },
  {
    "text": "create that",
    "start": "834899",
    "end": "835980"
  },
  {
    "text": "this is going to be a function that I",
    "start": "835980",
    "end": "837959"
  },
  {
    "text": "passed down it's going to be async we're",
    "start": "837959",
    "end": "840240"
  },
  {
    "text": "going to Pat it's going to accept a",
    "start": "840240",
    "end": "841680"
  },
  {
    "text": "string and then we'll just say if",
    "start": "841680",
    "end": "843480"
  },
  {
    "text": "there's no ID just return there's if",
    "start": "843480",
    "end": "846720"
  },
  {
    "text": "it's falsy like a zero would never be a",
    "start": "846720",
    "end": "848579"
  },
  {
    "text": "correct value there and then I'll wait",
    "start": "848579",
    "end": "851279"
  },
  {
    "text": "and this is where we're going to do a",
    "start": "851279",
    "end": "853560"
  },
  {
    "text": "fetch to the back end since we created",
    "start": "853560",
    "end": "855540"
  },
  {
    "text": "that new route we're gonna have API",
    "start": "855540",
    "end": "857339"
  },
  {
    "text": "delete and here we want to change the",
    "start": "857339",
    "end": "860100"
  },
  {
    "text": "method to delete and then the body we're",
    "start": "860100",
    "end": "863820"
  },
  {
    "text": "just going to stringify",
    "start": "863820",
    "end": "866160"
  },
  {
    "text": "and then we're going to pass in the ID",
    "start": "866160",
    "end": "868320"
  },
  {
    "text": "that we have and then if the response",
    "start": "868320",
    "end": "871079"
  },
  {
    "text": "status equal equals 200 meaning that it",
    "start": "871079",
    "end": "874260"
  },
  {
    "text": "came back that everything was fine then",
    "start": "874260",
    "end": "877079"
  },
  {
    "text": "we'll create this filtered product and",
    "start": "877079",
    "end": "880680"
  },
  {
    "text": "this will be this will use the products",
    "start": "880680",
    "end": "884279"
  },
  {
    "text": "that we have we're going to filter it",
    "start": "884279",
    "end": "886980"
  },
  {
    "text": "and this will be a product here",
    "start": "886980",
    "end": "889680"
  },
  {
    "text": "and then we'll check to see if the",
    "start": "889680",
    "end": "891060"
  },
  {
    "text": "product ID does not equal equal ID and",
    "start": "891060",
    "end": "895019"
  },
  {
    "text": "then we'll set products to the filter",
    "start": "895019",
    "end": "897360"
  },
  {
    "text": "products so what this does is it'll run",
    "start": "897360",
    "end": "900240"
  },
  {
    "text": "this filter through it and if any of",
    "start": "900240",
    "end": "903420"
  },
  {
    "text": "these values are true or it doesn't",
    "start": "903420",
    "end": "905579"
  },
  {
    "text": "equal then it'll add it but if it does",
    "start": "905579",
    "end": "907380"
  },
  {
    "text": "equal it won't add it",
    "start": "907380",
    "end": "909060"
  },
  {
    "text": "and this should update our filtered",
    "start": "909060",
    "end": "911100"
  },
  {
    "text": "products that we show so we're not quite",
    "start": "911100",
    "end": "913500"
  },
  {
    "text": "done yet we need to figure out one thing",
    "start": "913500",
    "end": "916740"
  },
  {
    "text": "here and this that's the admin okay",
    "start": "916740",
    "end": "919019"
  },
  {
    "text": "right where it says says user here",
    "start": "919019",
    "end": "921839"
  },
  {
    "text": "and the sign out we can use this to our",
    "start": "921839",
    "end": "925440"
  },
  {
    "text": "advantage",
    "start": "925440",
    "end": "926579"
  },
  {
    "text": "so let's do this we're going to grab the",
    "start": "926579",
    "end": "930180"
  },
  {
    "text": "session and we're going to do that from",
    "start": "930180",
    "end": "932100"
  },
  {
    "text": "user dot get sign in session",
    "start": "932100",
    "end": "935820"
  },
  {
    "text": "sign in user session and then we can do",
    "start": "935820",
    "end": "938760"
  },
  {
    "text": "groups here so groups will equal session",
    "start": "938760",
    "end": "941600"
  },
  {
    "text": "dot get access token",
    "start": "941600",
    "end": "945120"
  },
  {
    "text": "and then we can grab the payload of that",
    "start": "945120",
    "end": "946920"
  },
  {
    "text": "and then look for the Cognito groups",
    "start": "946920",
    "end": "950459"
  },
  {
    "text": "it's kind of the same thing we did",
    "start": "950459",
    "end": "951600"
  },
  {
    "text": "earlier but we're using the user data",
    "start": "951600",
    "end": "953399"
  },
  {
    "text": "that we grabbed at this use",
    "start": "953399",
    "end": "954420"
  },
  {
    "text": "authenticator now that we have the",
    "start": "954420",
    "end": "956399"
  },
  {
    "text": "groups",
    "start": "956399",
    "end": "957420"
  },
  {
    "text": "let's go back down here to the products",
    "start": "957420",
    "end": "961440"
  },
  {
    "text": "table so we need to add a couple things",
    "start": "961440",
    "end": "963779"
  },
  {
    "text": "to this table",
    "start": "963779",
    "end": "965160"
  },
  {
    "text": "first we need to add in the song click",
    "start": "965160",
    "end": "967260"
  },
  {
    "text": "delete so we'll just pass in that",
    "start": "967260",
    "end": "969420"
  },
  {
    "text": "method where you just created and then",
    "start": "969420",
    "end": "971639"
  },
  {
    "text": "we'll need to do the admin and this is",
    "start": "971639",
    "end": "974519"
  },
  {
    "text": "going to equal",
    "start": "974519",
    "end": "976680"
  },
  {
    "text": "the groups",
    "start": "976680",
    "end": "978120"
  },
  {
    "text": "and then we'll see does it includes",
    "start": "978120",
    "end": "981240"
  },
  {
    "text": "admin so now we have been able to get",
    "start": "981240",
    "end": "983519"
  },
  {
    "text": "the products table and and create this",
    "start": "983519",
    "end": "986160"
  },
  {
    "text": "new one click delete and it should now",
    "start": "986160",
    "end": "988860"
  },
  {
    "text": "only show up if the user is in the admin",
    "start": "988860",
    "end": "991680"
  },
  {
    "text": "group so let's test it out okay let's",
    "start": "991680",
    "end": "993060"
  },
  {
    "text": "log into our app and try again I need to",
    "start": "993060",
    "end": "994920"
  },
  {
    "text": "make one more change in the amplify",
    "start": "994920",
    "end": "997740"
  },
  {
    "text": "configure in the app TSX file I had it",
    "start": "997740",
    "end": "1000019"
  },
  {
    "text": "at SSR true so anywhere you do amplify",
    "start": "1000019",
    "end": "1002300"
  },
  {
    "text": "configure make sure you do SSR true",
    "start": "1002300",
    "end": "1004040"
  },
  {
    "text": "there and I stop and restart the server",
    "start": "1004040",
    "end": "1007040"
  },
  {
    "text": "um go ahead and log in all right so now",
    "start": "1007040",
    "end": "1008899"
  },
  {
    "text": "I see these deletes I'll go ahead and",
    "start": "1008899",
    "end": "1010759"
  },
  {
    "text": "click delete on one of them and you can",
    "start": "1010759",
    "end": "1012380"
  },
  {
    "text": "see it went ahead and deleted it and I'm",
    "start": "1012380",
    "end": "1014899"
  },
  {
    "text": "down to one now so let's create a new",
    "start": "1014899",
    "end": "1017839"
  },
  {
    "text": "user and see if that new user will be",
    "start": "1017839",
    "end": "1021199"
  },
  {
    "text": "able to delete or they'll see the delete",
    "start": "1021199",
    "end": "1023899"
  },
  {
    "text": "on here",
    "start": "1023899",
    "end": "1025040"
  },
  {
    "text": "just a quick couple other things I need",
    "start": "1025040",
    "end": "1026839"
  },
  {
    "text": "to do real quickly in my studio graphql",
    "start": "1026839",
    "end": "1029178"
  },
  {
    "text": "I'm going to go back to my UI Library",
    "start": "1029179",
    "end": "1030918"
  },
  {
    "text": "here and I want to check something if I",
    "start": "1030919",
    "end": "1032839"
  },
  {
    "text": "go to product create form if I click on",
    "start": "1032839",
    "end": "1035240"
  },
  {
    "text": "here click configure I want to make sure",
    "start": "1035240",
    "end": "1037280"
  },
  {
    "text": "that all my files are uploaded publicly",
    "start": "1037280",
    "end": "1039558"
  },
  {
    "text": "so just make sure it's on public here",
    "start": "1039559",
    "end": "1041839"
  },
  {
    "text": "then inside my code I added this line",
    "start": "1041839",
    "end": "1043938"
  },
  {
    "text": "right here and what this tells it is",
    "start": "1043939",
    "end": "1045918"
  },
  {
    "text": "that it should always use this Amazon",
    "start": "1045919",
    "end": "1047900"
  },
  {
    "text": "Cognito user pools when it does any kind",
    "start": "1047900",
    "end": "1050780"
  },
  {
    "text": "of authentication types and this will",
    "start": "1050780",
    "end": "1052640"
  },
  {
    "text": "help me when I'm using my forms in my",
    "start": "1052640",
    "end": "1055340"
  },
  {
    "text": "app so I'm going to create a new account",
    "start": "1055340",
    "end": "1057020"
  },
  {
    "text": "and log in and we'll make sure",
    "start": "1057020",
    "end": "1059059"
  },
  {
    "text": "everything looks okay here okay great it",
    "start": "1059059",
    "end": "1060799"
  },
  {
    "text": "logged in here and I see my rose game",
    "start": "1060799",
    "end": "1063020"
  },
  {
    "text": "and I don't see any delete here so this",
    "start": "1063020",
    "end": "1064640"
  },
  {
    "text": "is working as expected one other thing I",
    "start": "1064640",
    "end": "1067280"
  },
  {
    "text": "wanted to mention too is we have this",
    "start": "1067280",
    "end": "1068840"
  },
  {
    "text": "grab products in our index TSX file and",
    "start": "1068840",
    "end": "1071840"
  },
  {
    "text": "so if you watched the previous video",
    "start": "1071840",
    "end": "1072919"
  },
  {
    "text": "this will make sense I'm doing this list",
    "start": "1072919",
    "end": "1074600"
  },
  {
    "text": "queries but I'm I'm actually grabbing a",
    "start": "1074600",
    "end": "1077660"
  },
  {
    "text": "lot of information I don't need so what",
    "start": "1077660",
    "end": "1079760"
  },
  {
    "text": "I could do is I could copy this whole",
    "start": "1079760",
    "end": "1081980"
  },
  {
    "text": "query here and delete out the ones I",
    "start": "1081980",
    "end": "1084260"
  },
  {
    "text": "don't need but for now I'll just leave",
    "start": "1084260",
    "end": "1085940"
  },
  {
    "text": "them all but just realize that this is",
    "start": "1085940",
    "end": "1087919"
  },
  {
    "text": "kind of over fetching and you may not",
    "start": "1087919",
    "end": "1089600"
  },
  {
    "text": "need everything in there so that's all",
    "start": "1089600",
    "end": "1090799"
  },
  {
    "text": "I'm going to show today I hope you guys",
    "start": "1090799",
    "end": "1092059"
  },
  {
    "text": "learned something leave a comment below",
    "start": "1092059",
    "end": "1093740"
  },
  {
    "text": "with what you've learned thanks",
    "start": "1093740",
    "end": "1097419"
  }
]