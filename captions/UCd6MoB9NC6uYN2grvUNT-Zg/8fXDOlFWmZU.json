[
  {
    "text": "oh hello everyone and welcome to the session my name is steve roberts with me",
    "start": "500",
    "end": "7770"
  },
  {
    "text": "is Nam Johansson all right I've got an echo we're both senior dev engineers at AWS working in the tools responsible for the",
    "start": "7770",
    "end": "14490"
  },
  {
    "text": "8 SDK and tools for net so the ATS SDK for dotnet the toolkit for Visual Studio the tools for",
    "start": "14490",
    "end": "20580"
  },
  {
    "text": "PowerShell and the new tools this year for Microsoft Visual Studio Team Services there we go so in this session",
    "start": "20580",
    "end": "29670"
  },
  {
    "text": "we're going to take a brief introduction to the tools they're pretty new they were released in August we're gonna go",
    "start": "29670",
    "end": "35250"
  },
  {
    "text": "through what they are why you would use them what's included in the tools the majority of this session now we're going",
    "start": "35250",
    "end": "41010"
  },
  {
    "text": "to spend in demos right rather than talk about these tools we want to play with and when we use them so a brief",
    "start": "41010",
    "end": "47520"
  },
  {
    "text": "introduction to the tools to get everybody on the same page what are the tools for Microsoft Visual Studio Team Services well there are set of custom",
    "start": "47520",
    "end": "54329"
  },
  {
    "text": "build tasks that you can use in build and release pipelines to reach out to AWS from within your vs TS or TFS",
    "start": "54329",
    "end": "59969"
  },
  {
    "text": "environments ok we can do deployments we can perform general utility tasks like downloading from s3 uploading to s3 our",
    "start": "59969",
    "end": "65970"
  },
  {
    "text": "storage service where can you use them visual studio team services online or",
    "start": "65970",
    "end": "71729"
  },
  {
    "text": "you can use them in team foundation server on-prem so we support installation into TFS 2015 or higher but",
    "start": "71729",
    "end": "78630"
  },
  {
    "text": "perhaps more importantly why would you use them well they make it super easy to reach out to a diverse services from",
    "start": "78630",
    "end": "85890"
  },
  {
    "text": "within your V STS and TFS build pipelines they're a great example actually of collaboration between",
    "start": "85890",
    "end": "91350"
  },
  {
    "text": "Microsoft and AWS the tools originated inside Microsoft their ALM ranges came",
    "start": "91350",
    "end": "96450"
  },
  {
    "text": "up with the proof of concept so some some tasks and then reached out to AWS in the summer say hey would you like",
    "start": "96450",
    "end": "101790"
  },
  {
    "text": "guys to take this on as a project to release and then maintaining it from then on well no-brainer right that's a yes right",
    "start": "101790",
    "end": "108930"
  },
  {
    "text": "we're reaching out to our customers wherever they are from both companies so a great example of collaboration and of",
    "start": "108930",
    "end": "114659"
  },
  {
    "text": "course if you've got existing VSDs and TFS build pipelines set up that you invested in you know you don't want to change those right yes AWS has its",
    "start": "114659",
    "end": "121619"
  },
  {
    "text": "existing code build code pipeline code deploy etc well you've got pipelines that you want to use you just want to go",
    "start": "121619",
    "end": "126930"
  },
  {
    "text": "that extra mile out to AWS to do deployments or whatever you need to do",
    "start": "126930",
    "end": "132080"
  },
  {
    "text": "nee-naw why you'd use when you get them though they're only distributed on the visual studio marketplace but there's an easy link to",
    "start": "132080",
    "end": "139140"
  },
  {
    "text": "them from the edge of us homepage for the tools aws.amazon.com /v sts fact",
    "start": "139140",
    "end": "144330"
  },
  {
    "text": "Norman why don't we go and take a look at that so the center here you see it gets started with the tools button if we",
    "start": "144330",
    "end": "150210"
  },
  {
    "text": "click that it'll take us directly to the marketplace link obviously can go to the marketplace and search for them and I",
    "start": "150210",
    "end": "156030"
  },
  {
    "text": "think as of this morning they're still listed as a featured extension on that page okay let's head back to the slides",
    "start": "156030",
    "end": "165200"
  },
  {
    "text": "they're also open source they're on github we have a repo will show it later on where you can submit pull requests",
    "start": "165200",
    "end": "171989"
  },
  {
    "text": "feature requests etc issues to use the tools so what's included in the tools so",
    "start": "171989",
    "end": "180540"
  },
  {
    "text": "we released these back in August the first drop and the tilt the tasks were loosely distributing to two sets tools",
    "start": "180540",
    "end": "186810"
  },
  {
    "text": "for deployment and tasks the general-purpose operations so we could deploy to use a dress code deploy we're",
    "start": "186810",
    "end": "192270"
  },
  {
    "text": "going to what these services are later if you're not familiar with them but code deploy the deployment service cloud formation the infrastructure",
    "start": "192270",
    "end": "197910"
  },
  {
    "text": "provisioning service we could deploy to elastic Beanstalk that platform as a service we also had support for",
    "start": "197910",
    "end": "203250"
  },
  {
    "text": "deploying dotnet core functions and service applications to lambda so",
    "start": "203250",
    "end": "208709"
  },
  {
    "text": "general purpose goes you know we can upload and download through Amazon s3 our storage service we can send notifications through SNS and we handed",
    "start": "208709",
    "end": "215760"
  },
  {
    "text": "to tasks for the command line tools from AWS da to the CLI and the tools for",
    "start": "215760",
    "end": "220920"
  },
  {
    "text": "PowerShell now you'd use these if the tasks you need just reach out to some a do a service that you know we didn't",
    "start": "220920",
    "end": "226380"
  },
  {
    "text": "currently have a native task for okay you could then script out what you needed using the tools you already familiar with from inside the tools they",
    "start": "226380",
    "end": "234000"
  },
  {
    "text": "also surface in AWS credential endpoint type these tools are calling AWS for you",
    "start": "234000",
    "end": "239549"
  },
  {
    "text": "so you need to give them credentials and we'll show how you get to that shortly about two hours ago we released a new",
    "start": "239549",
    "end": "246299"
  },
  {
    "text": "drop including new tasks so we can now push docker images to ec2 the elastic",
    "start": "246299",
    "end": "251640"
  },
  {
    "text": "container registry this is a direct result for a repeater request on our repo we've added a new lambda",
    "start": "251640",
    "end": "258540"
  },
  {
    "text": "general-purpose deployment task so now not only can you deploy night dotnet core functions and service apps you can",
    "start": "258540",
    "end": "265020"
  },
  {
    "text": "collect any of the supported languages from lambda from within your euro VSDs builds and we've added two new tasks for systems",
    "start": "265020",
    "end": "272460"
  },
  {
    "text": "manager want to read from the parameter store if you're a existing user of es TSO TFS you know it has the concept of",
    "start": "272460",
    "end": "278880"
  },
  {
    "text": "build variables we've now linked build variables into the parameter store so you can get parameters back and customize your bills and we'll see a lot",
    "start": "278880",
    "end": "285540"
  },
  {
    "text": "of that in this demo later on we also added support for run command now run command is particularly cool",
    "start": "285540",
    "end": "291210"
  },
  {
    "text": "because you could execute command scripts or command documents as they're called against a fleet of machines those",
    "start": "291210",
    "end": "297000"
  },
  {
    "text": "machines could be ec2 instances they can also be on-premise machines if you have the Systems Manager agent installed",
    "start": "297000",
    "end": "302550"
  },
  {
    "text": "directly from your vs TSM DFS pipelines with that enough chat let's move to some",
    "start": "302550",
    "end": "310470"
  },
  {
    "text": "demos it's going to see the tools in action so to get started to get started",
    "start": "310470",
    "end": "316199"
  },
  {
    "text": "we're gonna go quickly how you go and install the tools cuz it does differ a little bit between VST s and TFS how",
    "start": "316199",
    "end": "321510"
  },
  {
    "text": "we're going to manage credentials and then we're actually gonna do a deployment we're gonna deploy an asp.net application to elastic Beanstalk I start",
    "start": "321510",
    "end": "329940"
  },
  {
    "text": "platform as a service service then we just read where it takes care of the infrastructure for you right you just",
    "start": "329940",
    "end": "336030"
  },
  {
    "text": "build your application and deploy it so it's pretty simple to get started okay alright so the application that we've",
    "start": "336030",
    "end": "345090"
  },
  {
    "text": "chosen to use today is contoso University it's one the asp.net sample applications traditional dotnet",
    "start": "345090",
    "end": "351030"
  },
  {
    "text": "framework app with a sequel database in fact we've already deployed this to elastic beanstalk so what are we going to take a quick",
    "start": "351030",
    "end": "356970"
  },
  {
    "text": "look at the application I'm sorry I'm jumping ahead of myself on a show you just saw it first let's read this page",
    "start": "356970",
    "end": "362639"
  },
  {
    "text": "right yes sorry so if you're a VSDs user you're gonna click the install button that's going to",
    "start": "362639",
    "end": "368099"
  },
  {
    "text": "lead you through a simple dialogue to install into your online system if you're a TFS user you're gonna click",
    "start": "368099",
    "end": "373320"
  },
  {
    "text": "download that's going to give you a v6 file a Visual Studio extensibility file you upload that to your local",
    "start": "373320",
    "end": "378479"
  },
  {
    "text": "marketplace in fact if you go to TFS instance we're using TFS 2017 here in the upper right corner you see manage",
    "start": "378479",
    "end": "384960"
  },
  {
    "text": "extensions that will lead you through uploading the extension file and then you can install it from there into your environment okay that's the installation",
    "start": "384960",
    "end": "393150"
  },
  {
    "text": "myth now back to contoso University so we've already deployed this application to elastic Beanstalk so that's gonna",
    "start": "393150",
    "end": "399659"
  },
  {
    "text": "take a look at it so Norma here is in our toolkit for visual studio which if you are in the dev 3:30 session yesterday you would assume it's",
    "start": "399659",
    "end": "406139"
  },
  {
    "text": "making heavy demos with that orchid demos with that they opened up the",
    "start": "406139",
    "end": "411240"
  },
  {
    "text": "environment here for being stuck and there's our application and in fact if we go to the students page we should see that the database is all connected up so",
    "start": "411240",
    "end": "422729"
  },
  {
    "text": "we deployed this from visual studio to get started but now we want to start deploying from our TFS instance okay so",
    "start": "422729",
    "end": "430320"
  },
  {
    "text": "let's gonna take a look at where the tools are installed or where they surface so we've already installed them",
    "start": "430320",
    "end": "436620"
  },
  {
    "text": "obviously for the demo so let's open the pack and toast our university project and go to the build and release tab and",
    "start": "436620",
    "end": "443160"
  },
  {
    "text": "we're gonna do deployment so let's add a new definition and this is a in this",
    "start": "443160",
    "end": "449280"
  },
  {
    "text": "case we're going to deploy an asp.net application so we'll pick the right template okay and we'd like me test",
    "start": "449280",
    "end": "457919"
  },
  {
    "text": "growing this project so we're just gonna remove that out of the default and we're not gonna bother publishing these symbols right now so right now we're",
    "start": "457919",
    "end": "463110"
  },
  {
    "text": "just gonna do the new get restore and do them as build to build the project so if",
    "start": "463110",
    "end": "468270"
  },
  {
    "text": "we click add task you'll see here listed the AWS tasks that we've got installed",
    "start": "468270",
    "end": "473370"
  },
  {
    "text": "so the command line the CLI cloud formation elastic Beanstalk lambda etc this is the first place and probably",
    "start": "473370",
    "end": "479729"
  },
  {
    "text": "the most frequent place you'll go to interact with these tasks so let's choose the elastic Beanstalk deployment",
    "start": "479729",
    "end": "485810"
  },
  {
    "text": "and you'll see it's just like any other VST s or TFS tasks we have a bunch of entry fields to fill in it's super",
    "start": "485810",
    "end": "492030"
  },
  {
    "text": "simple the first thing we're gonna want is credentials ok so to add credentials we can either click the plus button to",
    "start": "492030",
    "end": "497940"
  },
  {
    "text": "the right of the field that launches the dialogue if you familiar with that toolkit or any of our other tools you'll know we use credential profiles they",
    "start": "497940",
    "end": "504030"
  },
  {
    "text": "have a name access key secret key it's very similar here we can all see uses humor old credentials where the task",
    "start": "504030",
    "end": "509490"
  },
  {
    "text": "will assume a role that's scope to give it just the credentials that it needs and the permissions that it needs you can do that too if we close that dialog",
    "start": "509490",
    "end": "516479"
  },
  {
    "text": "you can also go to the service end points page we click the gear icon and",
    "start": "516479",
    "end": "521550"
  },
  {
    "text": "here you'll see if we drop down the new service endpoint definition on the left you'll see an AWS type we select that",
    "start": "521550",
    "end": "529760"
  },
  {
    "text": "then we get the same dialogue so we can fill out multiple credentials here you can also go to the screen to update",
    "start": "529760",
    "end": "536070"
  },
  {
    "text": "credentials if you need to so let's go back to our build definition and we've",
    "start": "536070",
    "end": "541800"
  },
  {
    "text": "already got credentials set up so let's select those we're in u.s. West - yeah",
    "start": "541800",
    "end": "549320"
  },
  {
    "text": "right now we can deploy both a student applications and a Senate korkin Tosa is",
    "start": "549320",
    "end": "555450"
  },
  {
    "text": "an eight-speed so we're just gonna do that which means we're gonna assume that's coming into this as a web deployed archive which is what that",
    "start": "555450",
    "end": "560880"
  },
  {
    "text": "msbuild steps gonna do now that was going to go build it mr. Poli out and",
    "start": "560880",
    "end": "566430"
  },
  {
    "text": "choose a build artifact staging directory so that's what we're gonna say is our source so that's the example of a",
    "start": "566430",
    "end": "574890"
  },
  {
    "text": "build variable if you've not seen those before the dollar parentheses syntax okay and then msbuild is by default",
    "start": "574890",
    "end": "581460"
  },
  {
    "text": "going to do the name of the project as the zip file so I'm just gonna copy that",
    "start": "581460",
    "end": "587700"
  },
  {
    "text": "out there so that's gonna be the EMS build web deploy package that this build",
    "start": "587700",
    "end": "594540"
  },
  {
    "text": "solution is gonna generate for us now the application naming the environment that's identifying cases where and being",
    "start": "594540",
    "end": "601020"
  },
  {
    "text": "stuck we want to deploy this and we've already deployed this so we can go out here and we can specify copy that here",
    "start": "601020",
    "end": "608190"
  },
  {
    "text": "this is our application up above here that's our environment contoso University - reinvent",
    "start": "608190",
    "end": "613350"
  },
  {
    "text": "so the environment is where the running instances are there a hosting your application okay if you've not used Bing",
    "start": "613350",
    "end": "618780"
  },
  {
    "text": "store before all right that's it I think we're configured and ready to go all right so let's go and make a change",
    "start": "618780",
    "end": "624780"
  },
  {
    "text": "we'll save that first did you give it a nice name I do not it was a nice name",
    "start": "624780",
    "end": "632839"
  },
  {
    "text": "okay no listen let's hop into visual",
    "start": "638540",
    "end": "643910"
  },
  {
    "text": "studio and make a change okay so let's go pick an index page here I will just",
    "start": "643910",
    "end": "651950"
  },
  {
    "text": "say Beanstalk built okay and then let's",
    "start": "651950",
    "end": "659810"
  },
  {
    "text": "check that in changes demo so we're",
    "start": "659810",
    "end": "666170"
  },
  {
    "text": "using TFS for our source control today you can also use coconut in this",
    "start": "666170",
    "end": "671300"
  },
  {
    "text": "environment as well okay so I committed and now pushing that out there now we",
    "start": "671300",
    "end": "677000"
  },
  {
    "text": "would do you probably would have it so it's building automatically for when you do commits but today for our demos we just want to make sure we can kick",
    "start": "677000",
    "end": "682550"
  },
  {
    "text": "things up manually not wait for the polling so we're gonna go here and just cue that up right see yep okay so here",
    "start": "682550",
    "end": "695780"
  },
  {
    "text": "we are running the bills up dinner needing a restore using msbuild to build the solution and that's gonna generate that web deploy archive and then it's",
    "start": "695780",
    "end": "702830"
  },
  {
    "text": "going to go into our new our ad best test to actually do that beans like",
    "start": "702830",
    "end": "708140"
  },
  {
    "text": "deployment which means it's gonna upload that to s3 and then tell Beanstalk that there is a new version of your",
    "start": "708140",
    "end": "714620"
  },
  {
    "text": "application go install that on your environment so that's going to start displaying me some of the events coming",
    "start": "714620",
    "end": "719990"
  },
  {
    "text": "through we should also be able to see that here in refers to here you can see it's currently updating as well so that",
    "start": "719990",
    "end": "727310"
  },
  {
    "text": "will take just about a minute or so to go",
    "start": "727310",
    "end": "730780"
  },
  {
    "text": "getting close",
    "start": "735700",
    "end": "738910"
  },
  {
    "text": "there's probably live demos you have to wait for things okay so the diversions",
    "start": "743700",
    "end": "750959"
  },
  {
    "text": "being deployed down to the instances few more seconds should have it there no",
    "start": "750959",
    "end": "758550"
  },
  {
    "text": "there we go so click the link and we should go and see your change",
    "start": "758550",
    "end": "763130"
  },
  {
    "text": "yeah so deployment to Beanstalk from a TFS bill task now and it was super easy",
    "start": "767360",
    "end": "773940"
  },
  {
    "text": "right there was just a few phones to fill out now some of you might be thinking wow that's all well and good but I don't do my deployments from my",
    "start": "773940",
    "end": "780420"
  },
  {
    "text": "bills I do them from release pipelines right the tests can be used in either so why don't we go back and set this up to",
    "start": "780420",
    "end": "787589"
  },
  {
    "text": "do a release build okay so first we want to clean up our our bill pipeline to not",
    "start": "787589",
    "end": "793230"
  },
  {
    "text": "do the build definition and in fact because these are so simple we just blow",
    "start": "793230",
    "end": "799320"
  },
  {
    "text": "that task away we don't need to copy the settings anywhere okay we'll leave the publish artifact in there because we're",
    "start": "799320",
    "end": "804630"
  },
  {
    "text": "going to pick up the build the web deploy artifact is a drop in our release pipeline okay that's good to find that",
    "start": "804630",
    "end": "811100"
  },
  {
    "text": "pipeline there's a new definition and we're just gonna do an empty one right",
    "start": "811100",
    "end": "816690"
  },
  {
    "text": "we're just gonna deployed a beanstalk yeah so he sees white up to our project",
    "start": "816690",
    "end": "823260"
  },
  {
    "text": "it's white up to our build and let's turn on automatic release unsuccessful build will still keep the builders",
    "start": "823260",
    "end": "829769"
  },
  {
    "text": "manual for the demo because we don't want to wait for the polling to kick in to do the dejected change but it's so",
    "start": "829769",
    "end": "835800"
  },
  {
    "text": "integral to have built a definition right we shouldn't add a task so no web",
    "start": "835800",
    "end": "854519"
  },
  {
    "text": "app okay we're not getting from the build staging anymore we're getting it on the drop so we can actually just use that dialogue there to go select our",
    "start": "854519",
    "end": "862820"
  },
  {
    "text": "check was it file what's our web do you play archive that we originally picked up from the build artifact staging folder okay and then",
    "start": "862820",
    "end": "869279"
  },
  {
    "text": "notice that being such a plication name and environment",
    "start": "869279",
    "end": "874970"
  },
  {
    "text": "oops not variable all right",
    "start": "875340",
    "end": "882720"
  },
  {
    "text": "so version label is optional if you don't specify one then the task Lord omalley create one for you based on the current date and time but you might want",
    "start": "882720",
    "end": "889980"
  },
  {
    "text": "to think do things like build number or something in there it's you're free to use shoes okay so we're all hooked up",
    "start": "889980",
    "end": "895920"
  },
  {
    "text": "let's go back and make another change",
    "start": "895920",
    "end": "899089"
  },
  {
    "text": "okay change here okay and then now we",
    "start": "902000",
    "end": "918420"
  },
  {
    "text": "can just go and kick off our bills cue",
    "start": "918420",
    "end": "924600"
  },
  {
    "text": "that up so now we're gonna rerun that",
    "start": "924600",
    "end": "930060"
  },
  {
    "text": "build which is just gonna do do the new get restore do the MS build create that web deploy archive and add it as a",
    "start": "930060",
    "end": "936810"
  },
  {
    "text": "published artifact which isn't gonna make it available to our release pipeline okay so we jump away to our",
    "start": "936810",
    "end": "943860"
  },
  {
    "text": "releases we should see the release in action now yep it's playing we can see okay see it's currently going so it's",
    "start": "943860",
    "end": "955920"
  },
  {
    "text": "downloading the artifacts it's now updating Bienstock to that new billing so it's work just like in the build but",
    "start": "955920",
    "end": "962250"
  },
  {
    "text": "here we can release and so we can do that if we wanted to sort of gate how we wanted our commits going into being",
    "start": "962250",
    "end": "967500"
  },
  {
    "text": "stock if we didn't want every single commit going into beans like we could have it at be part of that separate release pipeline so that's gonna go",
    "start": "967500",
    "end": "974700"
  },
  {
    "text": "under and again we're also seeing those same updates going in Visual Studio is being updates that environment is",
    "start": "974700",
    "end": "981240"
  },
  {
    "text": "currently being updated so a few more seconds we should be done",
    "start": "981240",
    "end": "987770"
  },
  {
    "text": "yes there we go okay let's click the link and we should see it something",
    "start": "996540",
    "end": "1002300"
  },
  {
    "text": "could change",
    "start": "1002300",
    "end": "1004420"
  },
  {
    "text": "there we go there we go so you can see the tasks can be used from build and release pipelines super simple so let's",
    "start": "1008920",
    "end": "1015529"
  },
  {
    "text": "head back to the slides so we saw somewhat in reverse order but",
    "start": "1015529",
    "end": "1024110"
  },
  {
    "text": "how to install the tools for VST s an online Team Foundation server really simple the package comes in currently",
    "start": "1024110",
    "end": "1029510"
  },
  {
    "text": "just under 7 Meg it's a very small download it's very quick to install where to find the tools after",
    "start": "1029510",
    "end": "1034819"
  },
  {
    "text": "installation there in your add tasks they commit they shown you build pipelines setting up the credential",
    "start": "1034819",
    "end": "1040548"
  },
  {
    "text": "endpoints either I out on the task itself or in the service endpoints page and how to ID test for definition and",
    "start": "1040549",
    "end": "1047900"
  },
  {
    "text": "then ultimately deploying an expedite application to elastic Beanstalk in either build or release definition so we",
    "start": "1047900",
    "end": "1055400"
  },
  {
    "text": "only talk about systems manage a parameter store for a while so the application that we deployed uses a",
    "start": "1055400",
    "end": "1060470"
  },
  {
    "text": "sequel server database and in fact out-of-the-box panto c university uses a local DB which you need to put in the",
    "start": "1060470",
    "end": "1066590"
  },
  {
    "text": "cloud we don't want the database on the instance right so we put the database into Amazon RDS we have a connection",
    "start": "1066590",
    "end": "1072650"
  },
  {
    "text": "string in the app but I didn't want to put the connection string into the web config file and I certainly didn't to put in those code so I decided to use",
    "start": "1072650",
    "end": "1078860"
  },
  {
    "text": "parameter store so it's gonna take a look at the connection string so we'll",
    "start": "1078860",
    "end": "1085309"
  },
  {
    "text": "go to the ec2 console so you can see",
    "start": "1085309",
    "end": "1095059"
  },
  {
    "text": "here I've got a number of parameters defined it the majority is going to come back to later on in a demo but the bottom you can see my secure a secure",
    "start": "1095059",
    "end": "1100280"
  },
  {
    "text": "string type it's automatically masked from being shown inside the code we've made some changes to read this back at",
    "start": "1100280",
    "end": "1106640"
  },
  {
    "text": "runtime so instead of deploying the application with static config files with a connection string hardwired we're",
    "start": "1106640",
    "end": "1111650"
  },
  {
    "text": "reading this dynamically at runtime so we go see in the code what's wrong so we have our Dell folder where we're",
    "start": "1111650",
    "end": "1117799"
  },
  {
    "text": "creating our content any frame of context object but we also created a factory class which is what we use to",
    "start": "1117799",
    "end": "1123169"
  },
  {
    "text": "create that and what it's doing is it's always it's going to SSM system",
    "start": "1123169",
    "end": "1128660"
  },
  {
    "text": "management to go and actually download that parameter based on this name here now we're telling you this because if we",
    "start": "1128660",
    "end": "1136010"
  },
  {
    "text": "can configure our application like this dynamically at runtime from parameter store how about our build and release tasks",
    "start": "1136010",
    "end": "1141590"
  },
  {
    "text": "right we have those build variables available was the new test that we launched this morning we can do just that so let's go take a look at how this",
    "start": "1141590",
    "end": "1148190"
  },
  {
    "text": "works we're gonna switch away and look in the ec2 console to another region us",
    "start": "1148190",
    "end": "1153289"
  },
  {
    "text": "West one I've set up some dummy parameters that we can use to illustrate this you can see here on the simulating",
    "start": "1153289",
    "end": "1159200"
  },
  {
    "text": "an application parameters and secrets okay and it's got three parameters for",
    "start": "1159200",
    "end": "1164270"
  },
  {
    "text": "each stage I've got a beta stage and a prod stage so the first one parameter one is a simple string type the",
    "start": "1164270",
    "end": "1172039"
  },
  {
    "text": "parameter two is a string list which is a comma delimited list of strings and number three the secure string is a math",
    "start": "1172039",
    "end": "1178250"
  },
  {
    "text": "string okay who in fact we can show that one in the console very very secret okay",
    "start": "1178250",
    "end": "1183710"
  },
  {
    "text": "what we're gonna do is actually run some build pipelines to retrieve these values during our bills and inject them as",
    "start": "1183710",
    "end": "1189409"
  },
  {
    "text": "build variables so if we go back to our TFS instance we have a new another project in there called parameters and",
    "start": "1189409",
    "end": "1197840"
  },
  {
    "text": "secrets and you can read from the parameter store with this task in two modes you can read individual parameters",
    "start": "1197840",
    "end": "1202940"
  },
  {
    "text": "or you can read as a hierarchy like a batch right if you mean if you want to get for example in our case all of these",
    "start": "1202940",
    "end": "1209149"
  },
  {
    "text": "all of the parameters for a given stage you can read them all in one go so let's take a look at the single parameter read",
    "start": "1209149",
    "end": "1214340"
  },
  {
    "text": "first you can see here I've got three",
    "start": "1214340",
    "end": "1220809"
  },
  {
    "text": "calls to the get systems with parameter tasks the first one is going to read by name so again we give credentials in",
    "start": "1220809",
    "end": "1227510"
  },
  {
    "text": "region single parameter and we're giving it the parameter name but notice there's a dollar stage environment variable a",
    "start": "1227510",
    "end": "1232909"
  },
  {
    "text": "variable inside there right I want it to be customized why am I reading beta or am I reading prod so I'm",
    "start": "1232909",
    "end": "1238370"
  },
  {
    "text": "doing that by passing in a variable into my build if we just go to the variables tab nan you see there's my stage setup",
    "start": "1238370",
    "end": "1245960"
  },
  {
    "text": "as beta by default and override a ball at Build time back in the bill definition once the value of that",
    "start": "1245960",
    "end": "1253309"
  },
  {
    "text": "parameter comes back we want to inject that as a build variable so our downstream tasks can pick it up and work with it so we have a number of options",
    "start": "1253309",
    "end": "1259460"
  },
  {
    "text": "to set that that's called a variable name transform we can either use the parameter name as the variable name so",
    "start": "1259460",
    "end": "1265789"
  },
  {
    "text": "identically the test will use at the same travel time as we've got inside Systems Manager we can take the leaf",
    "start": "1265789",
    "end": "1270980"
  },
  {
    "text": "part of the name so in this case parameter one we can either do we can do a reg with a substitution inside the name or",
    "start": "1270980",
    "end": "1277999"
  },
  {
    "text": "you can just use a custom name so in the first two instance of this task we're",
    "start": "1277999",
    "end": "1283729"
  },
  {
    "text": "just using the leaf part of the name but on the third one where I'm reading the secured string I'm gonna use a custom name okay and then at the end is a",
    "start": "1283729",
    "end": "1291799"
  },
  {
    "text": "simple PowerShell script that just accepts those parameters there is build variables now right there not Systems",
    "start": "1291799",
    "end": "1297440"
  },
  {
    "text": "Manager parameters and just echoes them out to the console so let's run this so you can see that's where those leaf names are so we took each one of those",
    "start": "1297440",
    "end": "1303409"
  },
  {
    "text": "and then that's this custom name there all right you want to run yes right and",
    "start": "1303409",
    "end": "1310459"
  },
  {
    "text": "we could have rated the stage there everyone okay so here we ran and this",
    "start": "1310459",
    "end": "1320149"
  },
  {
    "text": "got the parameter one it was just a string this is where we got the string",
    "start": "1320149",
    "end": "1326209"
  },
  {
    "text": "list for primary two and the third one is where we get the secret one it says the secret is true now when the task",
    "start": "1326209",
    "end": "1332570"
  },
  {
    "text": "reads a secure string variable from the parameter store it automatically creates a secret bill variable right there's no",
    "start": "1332570",
    "end": "1338239"
  },
  {
    "text": "override on that it's automatic inside the task so if we go to the output from the PowerShell task we should see that",
    "start": "1338239",
    "end": "1344029"
  },
  {
    "text": "parameter three is masked automatically okay so you can read secrets back from the parameter store securely to your",
    "start": "1344029",
    "end": "1350329"
  },
  {
    "text": "build environment and then pass them on to your downstream tasks it's gonna take a look at the hierarchical read",
    "start": "1350329",
    "end": "1357009"
  },
  {
    "text": "okay so here we have a single instance of the task set to pre hierarchical mode",
    "start": "1363720",
    "end": "1368880"
  },
  {
    "text": "you'll notice that we're using a shorter path here we've got crowns and secrets dollar stage insight systems manage the",
    "start": "1368880",
    "end": "1375240"
  },
  {
    "text": "paths can be up to five components long so you permanent flexibility again we're passing in stage where when we do the",
    "start": "1375240",
    "end": "1382380"
  },
  {
    "text": "variable name transform if we drop that down you'll notice we only have three options right using a custom name wouldn't make sense we're reading",
    "start": "1382380",
    "end": "1387870"
  },
  {
    "text": "multiple variables we can read the read all the variables at that level or we can read recursively as well recursive",
    "start": "1387870",
    "end": "1394830"
  },
  {
    "text": "is the default our powershell script at the end is again identical it's just going to take those names the build",
    "start": "1394830",
    "end": "1400260"
  },
  {
    "text": "variable names and just echo them out and so there's all those leaf names parameters one two and three so let's",
    "start": "1400260",
    "end": "1405780"
  },
  {
    "text": "queue that bill",
    "start": "1405780",
    "end": "1408320"
  },
  {
    "text": "you can see here weekend time which is one two in three build vironment were created and the last one was set to true",
    "start": "1414799",
    "end": "1421470"
  },
  {
    "text": "or secret and then that's our there now if we would have set the stage to prod",
    "start": "1421470",
    "end": "1428100"
  },
  {
    "text": "we would be getting beta VII or prod values here yeah okay okay so back to",
    "start": "1428100",
    "end": "1434700"
  },
  {
    "text": "the slides for a minute so that's parameter store we showed you",
    "start": "1434700",
    "end": "1440610"
  },
  {
    "text": "the different types of parameters the string the string list the secure string and that when we read those back into our building vironment the secure string",
    "start": "1440610",
    "end": "1447179"
  },
  {
    "text": "is preserved as a secret that we can read single values or hierarchical values and the options we have for the",
    "start": "1447179",
    "end": "1453330"
  },
  {
    "text": "variable name transform into our build a variable okay now we're telling you this",
    "start": "1453330",
    "end": "1458789"
  },
  {
    "text": "because our gonna make heavy use of it now we're actually going to set up two pipelines the first pipeline is going to",
    "start": "1458789",
    "end": "1465600"
  },
  {
    "text": "build a deployment infrastructure the second pipeline is going to deploy to that infrastructure we're going to use",
    "start": "1465600",
    "end": "1472740"
  },
  {
    "text": "the cloud formation test the cloud formation is our infrastructure as a service task okay it will you write a",
    "start": "1472740",
    "end": "1477990"
  },
  {
    "text": "declarative template if you haven't seen it written in Jason or Yama you submit that to cloud formation and it takes",
    "start": "1477990",
    "end": "1484440"
  },
  {
    "text": "over actually building out those resources for you we're gonna use code deploy to deploy to that infrastructure",
    "start": "1484440",
    "end": "1490279"
  },
  {
    "text": "as opposed to elastic Beanstalk now you haven't used code deploy the difference between being stuck in code deploy his",
    "start": "1490279",
    "end": "1496409"
  },
  {
    "text": "bean site it's gonna auto provision your ec2 instances your load balancers auto scaling versus code deploy is where you",
    "start": "1496409",
    "end": "1502529"
  },
  {
    "text": "define your own infrastructure how you want to see laid out but code to play will take care of actually laying down",
    "start": "1502529",
    "end": "1508049"
  },
  {
    "text": "the application for you we're gonna use the s3 download task to download content",
    "start": "1508049",
    "end": "1513210"
  },
  {
    "text": "from s3 into our build area so we further customize our build and of course we're going to take make use of",
    "start": "1513210",
    "end": "1518820"
  },
  {
    "text": "those parameters store tasks that we just saw to customize the build even further what I want to do in this is I wanna I've got an application contoso",
    "start": "1518820",
    "end": "1525510"
  },
  {
    "text": "university with three devoted to three deployment stages beta gamma and prod what I want to use the same template and",
    "start": "1525510",
    "end": "1531929"
  },
  {
    "text": "the same scripts across all those stages I don't want it to change alright and I'm gonna use parameters store to customer to do the",
    "start": "1531929",
    "end": "1537659"
  },
  {
    "text": "customization at Build time by getting promising values back from the store setting those build variables and then",
    "start": "1537659",
    "end": "1543059"
  },
  {
    "text": "using them in my tasks so let's start building okay so we're back here we're gonna go",
    "start": "1543059",
    "end": "1550230"
  },
  {
    "text": "start doing build definitions for contoso and let's go and create a brand",
    "start": "1550230",
    "end": "1558390"
  },
  {
    "text": "new one so the first one were creating this is just gonna create the infrastructure right right though here",
    "start": "1558390",
    "end": "1563400"
  },
  {
    "text": "we're just gonna take an empty one and start from scratch there okay so what's",
    "start": "1563400",
    "end": "1569460"
  },
  {
    "text": "the first step so the first thing I want to do is I put some content into Amazon s3 the storage service I put the template in there that we're going to",
    "start": "1569460",
    "end": "1575520"
  },
  {
    "text": "submit to cloud formation that declares the resources that we want created and some supporting script so it's going to",
    "start": "1575520",
    "end": "1582030"
  },
  {
    "text": "take a look at that in the toolkit so we open up the bucket inside s3 and you'll",
    "start": "1582030",
    "end": "1589980"
  },
  {
    "text": "notice we got a number of top level folders here or key prefixes let's go into cloud formation one and I've got a",
    "start": "1589980",
    "end": "1596130"
  },
  {
    "text": "template file there and I've got a script so when we submit the template to cloud formation we're also going to send",
    "start": "1596130",
    "end": "1601559"
  },
  {
    "text": "our parameters file with it to customize the template right and those parameters are coming from parameter store I've",
    "start": "1601559",
    "end": "1608250"
  },
  {
    "text": "actually checked these out locally so if we open up go to visual studio code here's our permission so it's got a few",
    "start": "1608250",
    "end": "1617970"
  },
  {
    "text": "primers coming in this is gonna be the name of our code deploy application and then we're gonna need the windows image",
    "start": "1617970",
    "end": "1624179"
  },
  {
    "text": "I mean and when current windows omni ID because the way we're working is we're using the bare windows on me and we're",
    "start": "1624179",
    "end": "1630450"
  },
  {
    "text": "gonna then install all the things we do that we're gonna saw is we're gonna install web deploy from them and then we",
    "start": "1630450",
    "end": "1636600"
  },
  {
    "text": "also need to pass in the instance tag key and then stack value which is gonna use to identify what are the ec2",
    "start": "1636600",
    "end": "1642750"
  },
  {
    "text": "instances that are part of our deployment group inside code deploy so",
    "start": "1642750",
    "end": "1647880"
  },
  {
    "text": "we look down here this is where we're gonna go spin up our ec2 instance which has the scripts going on with it and the first step is we're gonna go and",
    "start": "1647880",
    "end": "1654179"
  },
  {
    "text": "download the code deploy agent on there and then we're gonna go install the code deploy agent and again this is just",
    "start": "1654179",
    "end": "1661049"
  },
  {
    "text": "plain windows so it doesn't even by yes so we're gonna go run some special scripts to install is on there we also",
    "start": "1661049",
    "end": "1667530"
  },
  {
    "text": "need to get web deploy on there and easiest way the web ploy is through chocolaty so we're gonna install",
    "start": "1667530",
    "end": "1673409"
  },
  {
    "text": "chocolaty and then use that to install web deploy one so those are all themselves we're gonna signal in the",
    "start": "1673409",
    "end": "1678899"
  },
  {
    "text": "back to confirmation that this ec2 instance is all configured and the other things we're doing is",
    "start": "1678899",
    "end": "1684570"
  },
  {
    "text": "we're setting up the code deploy applications well so here's our code deploy application which is then going",
    "start": "1684570",
    "end": "1691169"
  },
  {
    "text": "to have our deployment group and that diplomat was gonna have those easy to tag filters to go identify what are the",
    "start": "1691169",
    "end": "1697409"
  },
  {
    "text": "ec2 instances to add to the deployment group alright and the script folder we",
    "start": "1697409",
    "end": "1702809"
  },
  {
    "text": "down that we're going to download is very simple it just takes the parameters that we're gonna give it to build variables that we're gonna give it and",
    "start": "1702809",
    "end": "1708359"
  },
  {
    "text": "writes them to a JSON format parameters file the cloud form in the format cloud formation expects ok ok so let's go and",
    "start": "1708359",
    "end": "1715259"
  },
  {
    "text": "add the s3 download task okay I'll start",
    "start": "1715259",
    "end": "1724139"
  },
  {
    "text": "setting up the credentials and the region here and so this task we're gonna be using to",
    "start": "1724139",
    "end": "1729779"
  },
  {
    "text": "download our template in that ps1 file alright yeah so I'm go to my hand make",
    "start": "1729779",
    "end": "1735869"
  },
  {
    "text": "sure no copy paste the wrong bucket name okay so there's our bucket and then that",
    "start": "1735869",
    "end": "1743669"
  },
  {
    "text": "sauce folder in the bucket was just clogged formation so this is gonna mean with that go up hadn't down here we're",
    "start": "1743669",
    "end": "1749489"
  },
  {
    "text": "gonna download all of the files from that folder in mystery bucket the download task can actually download",
    "start": "1749489",
    "end": "1755269"
  },
  {
    "text": "multiple takes multiple glob pattern so you can download individual files you have different glob patterns in there",
    "start": "1755269",
    "end": "1760679"
  },
  {
    "text": "which is you star star to just download everything from that that path inside s3 okay now we need to know where we're",
    "start": "1760679",
    "end": "1767399"
  },
  {
    "text": "going to put those scripts on that file on the build system rather than put them where our source code is gonna be we're",
    "start": "1767399",
    "end": "1773369"
  },
  {
    "text": "gonna put them into a temp folder and we're gonna use a build variable to do that cause agent temp directory no the",
    "start": "1773369",
    "end": "1778499"
  },
  {
    "text": "really nice thing about this is at the end of the build that location is automatically cleaned out okay so there",
    "start": "1778499",
    "end": "1783599"
  },
  {
    "text": "was anything in there that you didn't want to leave lying around the build server it's gonna get removed now this",
    "start": "1783599",
    "end": "1789029"
  },
  {
    "text": "is when it downloads it's gonna do it with that folder in there so it's gonna be temp directory CloudFormation and",
    "start": "1789029",
    "end": "1794879"
  },
  {
    "text": "then our template and ps1 file which we don't want so there's a new advanced option here to flatten those Fuller's",
    "start": "1794879",
    "end": "1800460"
  },
  {
    "text": "out so that the template in the PSN will be right there at the root of that intricate ok so it takes care of getting",
    "start": "1800460",
    "end": "1806460"
  },
  {
    "text": "down our template and our script now we want to get hold of the first of the variables that we want the windows image",
    "start": "1806460",
    "end": "1811529"
  },
  {
    "text": "ID now if you've worked with cloud formation or you've seen cloud formation templates you've likely seen maps right",
    "start": "1811529",
    "end": "1817769"
  },
  {
    "text": "of like region to the image ID that you want to use and that works fine problem",
    "start": "1817769",
    "end": "1822840"
  },
  {
    "text": "is that they can get out a day right you see two windows revs their images every month right so rather than risk getting",
    "start": "1822840",
    "end": "1829200"
  },
  {
    "text": "out a day we're not going to pull down from parameter store now you may not know this but a couple weeks ago ec2",
    "start": "1829200",
    "end": "1834990"
  },
  {
    "text": "started publishing the windows image IDs to parameter store on a public key and we actually go and query that if we go",
    "start": "1834990",
    "end": "1841139"
  },
  {
    "text": "to a PowerShell command prompt we're gonna run one of our commandlets from our tools for powershell called get",
    "start": "1841139",
    "end": "1847730"
  },
  {
    "text": "- SSN parameters by path and the path",
    "start": "1847730",
    "end": "1854279"
  },
  {
    "text": "that ec2 publishes - is slash AWS slash service slash AMI",
    "start": "1854279",
    "end": "1861080"
  },
  {
    "text": "- windows - latest if we execute that",
    "start": "1861080",
    "end": "1866149"
  },
  {
    "text": "you'll see is on the left side or all the keys the parameter keys that correspond to the various windows images",
    "start": "1866149",
    "end": "1871740"
  },
  {
    "text": "that are published by AWS on the right hand side of the image IDs right this is always the guaranteed latest image ID",
    "start": "1871740",
    "end": "1878100"
  },
  {
    "text": "for that particular version of Windows so we've already selected the one we want to use Windows Server 2016 the base",
    "start": "1878100",
    "end": "1884100"
  },
  {
    "text": "image which is in norms cheat sheet so let's swipe that parameter name and",
    "start": "1884100",
    "end": "1890909"
  },
  {
    "text": "we'll add the tasks and to go and retrieve that from parameter store as our build starts their new parameter",
    "start": "1890909",
    "end": "1900440"
  },
  {
    "text": "okay we need our credentials and here is",
    "start": "1900440",
    "end": "1909749"
  },
  {
    "text": "the parameter name and now we want to we're gonna give a custom name here because we wanted this for convenience",
    "start": "1909749",
    "end": "1915299"
  },
  {
    "text": "we're gonna use the same name as what we're using in our template I believe we call it whose windows image ID all right",
    "start": "1915299",
    "end": "1923690"
  },
  {
    "text": "so now we will have that bill variable in Internet protest open windows image",
    "start": "1923690",
    "end": "1929100"
  },
  {
    "text": "ID which point to the latest Windows AMI so that's the first customization the second one now is we want to read the",
    "start": "1929100",
    "end": "1934169"
  },
  {
    "text": "application settings the application named that varies by stage and the tag Kane tag value that identifies the",
    "start": "1934169",
    "end": "1940559"
  },
  {
    "text": "instances in that stage that we want to target for deployment so if we go to the ec2 console we've set these up in pram",
    "start": "1940559",
    "end": "1946380"
  },
  {
    "text": "to store if you go to the US West region",
    "start": "1946380",
    "end": "1952580"
  },
  {
    "text": "you can see here's the contoso University barrels we have a beta stage a gamma stage and a prod stage so the",
    "start": "1954590",
    "end": "1962280"
  },
  {
    "text": "application name changes of bearing on the stage so University BT University",
    "start": "1962280",
    "end": "1968550"
  },
  {
    "text": "Gamma unity Prada etcetera so we want to read these back appropriate to the stage that we're going to run the build for so",
    "start": "1968550",
    "end": "1974310"
  },
  {
    "text": "let's go back to our TFS instance and let's add in the task to read those",
    "start": "1974310",
    "end": "1979890"
  },
  {
    "text": "variables now this is an example where we're going to read hierarchic right we",
    "start": "1979890",
    "end": "1985230"
  },
  {
    "text": "want to read all those settings in one go so our hierarchies gonna be the side",
    "start": "1985230",
    "end": "1995490"
  },
  {
    "text": "of the path slash contoso university slash dollar stage right we want to vary the stage during our bill slash contoso",
    "start": "1995490",
    "end": "2003080"
  },
  {
    "text": "slash contoso university slash and then dollar parenthesis stage in fact while",
    "start": "2003080",
    "end": "2010640"
  },
  {
    "text": "we're typing this in let's go and add that stage variable now okay but before we get out so we want to make sure we're getting just the leaf name okay and",
    "start": "2010640",
    "end": "2023420"
  },
  {
    "text": "let's just default that to beta and make it override all the build time all right so we have our template files downloaded",
    "start": "2023420",
    "end": "2030740"
  },
  {
    "text": "we have our parameters that the windows image ID we have our parameters for the application configuring it by stage so",
    "start": "2030740",
    "end": "2037010"
  },
  {
    "text": "now let's write the parameters file that we need to submit with our template declared formation so add a task and",
    "start": "2037010",
    "end": "2042710"
  },
  {
    "text": "this can just be a general PowerShell task any way you're looking at something what's up I know I knew there's a type",
    "start": "2042710",
    "end": "2047780"
  },
  {
    "text": "of somewhere in there so my characters thing okay so we got the general PowerShell test to run a script that we",
    "start": "2047780",
    "end": "2054020"
  },
  {
    "text": "downloaded from s3 and if you remember",
    "start": "2054020",
    "end": "2061638"
  },
  {
    "text": "we downloaded the file into the agents temp directory okay so we're going to use the build variable to refer to that",
    "start": "2061639",
    "end": "2067960"
  },
  {
    "text": "this guy here all right",
    "start": "2067960",
    "end": "2076628"
  },
  {
    "text": "and then arguments are gonna be always build variables right yeah so the arguments are the windows image idea that we set up as a build variable the",
    "start": "2076629",
    "end": "2082060"
  },
  {
    "text": "parameters will be read down from EC tooth parameters store there we go and the output file where we want to put it",
    "start": "2082060",
    "end": "2087730"
  },
  {
    "text": "again we're gonna put this into the agents temp directory that's it we're all set to go now we have our parameters",
    "start": "2087730",
    "end": "2093398"
  },
  {
    "text": "to customize our build we just need to add the task to create CloudFormation stack there is our quadrants like right",
    "start": "2093399",
    "end": "2101320"
  },
  {
    "text": "there so this task can be used to create new stacks or update existing stacks you don't need to worry yourself about just",
    "start": "2101320",
    "end": "2107380"
  },
  {
    "text": "the stack exists I need to test first it auto detects and adjust its behavior accordingly so if a stack name we're",
    "start": "2107380",
    "end": "2119980"
  },
  {
    "text": "going to use our application name right the stack needs to be unique in a given region so let's use the build variable",
    "start": "2119980",
    "end": "2125500"
  },
  {
    "text": "application name that we set up earlier on stuck on the end yeah okay",
    "start": "2125500",
    "end": "2131980"
  },
  {
    "text": "our template is coming from a local file you can also reference templates that exist in the Amazon s3 if your template",
    "start": "2131980",
    "end": "2138700"
  },
  {
    "text": "is particularly large that's a template",
    "start": "2138700",
    "end": "2144790"
  },
  {
    "text": "that we downloaded back here on there's three step here now if your template is a local file and it exceeds the limits",
    "start": "2144790",
    "end": "2150550"
  },
  {
    "text": "that you can send to CloudFormation directly you can actually type in the bucket name as well so the TAS will then upload it to s3 before sending it to a",
    "start": "2150550",
    "end": "2158190"
  },
  {
    "text": "formation onew and released this morning last thing is we need to pass in our",
    "start": "2158190",
    "end": "2164770"
  },
  {
    "text": "parameters so we wrote in our postal scripts our postal script generated that",
    "start": "2164770",
    "end": "2169869"
  },
  {
    "text": "parameters that JSON file in our agents temperature okay I think we're ready to launch this one all right so we'll leave",
    "start": "2169869",
    "end": "2179830"
  },
  {
    "text": "it at beta stage so now we're departing out our deployment infrastructure so",
    "start": "2179830",
    "end": "2188859"
  },
  {
    "text": "we've downloaded from s3 the template we've read the parameters back we know what latest windows image ID is we've",
    "start": "2188859",
    "end": "2194140"
  },
  {
    "text": "written the parameters file and we're sending it to cloud formation so now we are in just doing recruiting the cloud",
    "start": "2194140",
    "end": "2199300"
  },
  {
    "text": "formation set so go over the confirmation console we should seem that coming online should",
    "start": "2199300",
    "end": "2205310"
  },
  {
    "text": "see there's universe to be the stack being launched okay now we know from rehearsal experience this takes about 15",
    "start": "2205310",
    "end": "2210440"
  },
  {
    "text": "minutes or so it's got to install iOS web deploy chocolaty all that stuff so this stack wouldn't be finished by the",
    "start": "2210440",
    "end": "2215780"
  },
  {
    "text": "time we finish this talk so we've also deployed a gamma stack that we're going to deploy to so now let's go and set up",
    "start": "2215780",
    "end": "2221720"
  },
  {
    "text": "the second pipeline that's going to deploy your application out to that deployment infrastructure so we're now",
    "start": "2221720",
    "end": "2232790"
  },
  {
    "text": "in Tosa so it's just an eighth of an application from that one yeah this time I got you're gonna build the application",
    "start": "2232790",
    "end": "2238000"
  },
  {
    "text": "so this would be the thing we will be building on your commits and doing deployments etc yeah we just saw in",
    "start": "2238000",
    "end": "2248810"
  },
  {
    "text": "Casper this will get rid of that step symbols in this particular case we're going to deploy from the bill so we can",
    "start": "2248810",
    "end": "2255200"
  },
  {
    "text": "remove the publish artifact one as well so we're really just gonna do restore and then run the misspelled to",
    "start": "2255200",
    "end": "2260570"
  },
  {
    "text": "build the where now I want to deploy when I when I deploy this application the verb to play archives that gets",
    "start": "2260570",
    "end": "2267560"
  },
  {
    "text": "built by default has the name of contoso university underscore deploy i don't want that i want to use the application name but i need to go and get that from",
    "start": "2267560",
    "end": "2274610"
  },
  {
    "text": "parameter store right we saw that as one of the build variables in there so let's add a task e to go and fetch that before",
    "start": "2274610",
    "end": "2280370"
  },
  {
    "text": "the build get primer and we want to do",
    "start": "2280370",
    "end": "2286130"
  },
  {
    "text": "that before on the bill yep again my",
    "start": "2286130",
    "end": "2291160"
  },
  {
    "text": "credentials in region Steve you're gonna make it easier for me to type this region in the future right I am we we",
    "start": "2291160",
    "end": "2297410"
  },
  {
    "text": "actually announcement in hand to turn that into a drop-down filled with all the current public regions and you'll be",
    "start": "2297410",
    "end": "2302870"
  },
  {
    "text": "over idle as well so if a new region launches you don't need to update the tools to take advantage of it you just type in the region string unfortunately",
    "start": "2302870",
    "end": "2309380"
  },
  {
    "text": "didn't quite make it in time for reinventing so coming soon",
    "start": "2309380",
    "end": "2313930"
  },
  {
    "text": "the enemy will do stage area stage again we're gonna customize this build as well",
    "start": "2317550",
    "end": "2323460"
  },
  {
    "text": "and then a professional yeah in fact we should program em to go and set up a stage build available now",
    "start": "2323460",
    "end": "2329800"
  },
  {
    "text": "oh yeah but I'm also going to make sure we're doing the leaf yep I believe that's our public variable the",
    "start": "2329800",
    "end": "2341230"
  },
  {
    "text": "baby yeah and make it over writable okay okay so now we know our application name",
    "start": "2341230",
    "end": "2346660"
  },
  {
    "text": "we can now customize our build so we get the right iOS application name in the web deploy package so if we got the",
    "start": "2346660",
    "end": "2353230"
  },
  {
    "text": "build solution we're gonna add an MS build parameter onto this using your cheat sheet now here is the extra",
    "start": "2353230",
    "end": "2360040"
  },
  {
    "text": "command line we're gonna pass them as build that says set up the is path to",
    "start": "2360040",
    "end": "2365320"
  },
  {
    "text": "just be the application name so that's the deploys app path that's where the primary path says to configure that in",
    "start": "2365320",
    "end": "2371590"
  },
  {
    "text": "your package okay so now this test is gonna use code deploy to do the deployment so when we deploy code deploy",
    "start": "2371590",
    "end": "2378010"
  },
  {
    "text": "we have to build a revision bundle that contains our application code and a couple of extra files or these one extra",
    "start": "2378010",
    "end": "2383619"
  },
  {
    "text": "file could an app spec file this is a yeah Mel format file that describes how we're going to install the application on the instance so again these are held",
    "start": "2383619",
    "end": "2390640"
  },
  {
    "text": "in s3 for the purpose of the demo this could be in your source code just like the template is we just decide to put it in s3 so we could show you the s3",
    "start": "2390640",
    "end": "2396609"
  },
  {
    "text": "download task s3 bucket and we have a code deploy folder which contains those two files the AK spec file the code code",
    "start": "2396609",
    "end": "2403839"
  },
  {
    "text": "pool uses to know how to deploy your application and in our case we're just gonna call this partial script to",
    "start": "2403839",
    "end": "2409240"
  },
  {
    "text": "actually install it so that we can show those scripts if we go to code so epic well this epic is very simple just run",
    "start": "2409240",
    "end": "2415720"
  },
  {
    "text": "that script and that script is just gonna go and run the command that was generated by web deploy all right right",
    "start": "2415720",
    "end": "2426099"
  },
  {
    "text": "good demos for mr. a yeah",
    "start": "2426099",
    "end": "2429330"
  },
  {
    "text": "that's two now this time when we download the files we want to put them where the application is where the built",
    "start": "2441250",
    "end": "2447220"
  },
  {
    "text": "web deploy archive is when you when you build a revision bundle the app spec file lives at the root of the of the zip",
    "start": "2447220",
    "end": "2453160"
  },
  {
    "text": "file bundle so we're going to put that into the build artifact staging folder",
    "start": "2453160",
    "end": "2458970"
  },
  {
    "text": "code deploy was the father in the bucket and everything in the book staging yep",
    "start": "2459300",
    "end": "2467910"
  },
  {
    "text": "okay and again we want to flatten the folder we want to make sure the files going to that folder okay",
    "start": "2470520",
    "end": "2476920"
  },
  {
    "text": "so we've done our new guru store we've got our application name to customize our iOS application name we've done the",
    "start": "2476920",
    "end": "2481960"
  },
  {
    "text": "build we've the downloaded our artifacts the code deploy from s3 the last task is just what the code deploy tasks okay",
    "start": "2481960",
    "end": "2489660"
  },
  {
    "text": "okay and the application name is reusing",
    "start": "2500140",
    "end": "2505180"
  },
  {
    "text": "the build environment we're gonna use the bill variable and then I believe",
    "start": "2505180",
    "end": "2514200"
  },
  {
    "text": "there are deployment group its application name underscore deployment yeah correct",
    "start": "2514200",
    "end": "2519850"
  },
  {
    "text": "okay now we need to point it at the revision bundle that were constructing the task will actually build the bundle",
    "start": "2519850",
    "end": "2525670"
  },
  {
    "text": "for you you don't need to worry about it slipping up the task when all the different builder sorry the build output and all the different pieces if you just",
    "start": "2525670",
    "end": "2531730"
  },
  {
    "text": "point the tasks at the folder it will take care of that for you you can give it a prebuilt zip if you want to package",
    "start": "2531730",
    "end": "2537070"
  },
  {
    "text": "it yourself that's fine it adjust its behavior accordingly okay it's the first today we're just gonna take the build",
    "start": "2537070",
    "end": "2543190"
  },
  {
    "text": "staging artifact folder which is gonna be zipped up and set as our code deploy bundle because it contains both our web",
    "start": "2543190",
    "end": "2549010"
  },
  {
    "text": "deploy package as well as our apps pack file okay and then we're gonna do that",
    "start": "2549010",
    "end": "2556540"
  },
  {
    "text": "same bucket for everything using today so once the task is constructed the bundle it wants to know which word",
    "start": "2556540",
    "end": "2561820"
  },
  {
    "text": "bucket do I need to upload this to so you give it the bucket name okay and then we need to know where we're gonna put it in the bucket and we'll just",
    "start": "2561820",
    "end": "2568180"
  },
  {
    "text": "covers deploy artifacts okay okay there's a few more settings below so we",
    "start": "2568180",
    "end": "2573940"
  },
  {
    "text": "want to change okay and I think for file behavior we just want to overwrite those changes if you haven't either",
    "start": "2573940",
    "end": "2579850"
  },
  {
    "text": "all right okay that's it just a few fields it's relatively simple so let's",
    "start": "2579850",
    "end": "2584920"
  },
  {
    "text": "go make a change in visual studio alright so back to our index page okay",
    "start": "2584920",
    "end": "2599700"
  },
  {
    "text": "and I think I should commit that",
    "start": "2599700",
    "end": "2604829"
  },
  {
    "text": "I'll go sync that up with our remote",
    "start": "2612360",
    "end": "2616670"
  },
  {
    "text": "okay so that's been pushed so we can go and trigger our build now when you say",
    "start": "2619340",
    "end": "2625680"
  },
  {
    "text": "thank you you good yeah I'm good all right so it's changed actually the stage",
    "start": "2625680",
    "end": "2632490"
  },
  {
    "text": "it changes to pull my teeth back Pete isn't it ready yet it is not right",
    "start": "2632490",
    "end": "2638550"
  },
  {
    "text": "in fact I'm pretty sure beta is not ready okay cuz gamma is the one in point",
    "start": "2638550",
    "end": "2645780"
  },
  {
    "text": "I'm sure could we set it before today's talk yep okay so we're doing the nuclear store we're now pulling down our",
    "start": "2645780",
    "end": "2653790"
  },
  {
    "text": "parameters name so there's we got our application name now we're doing the bills that's just using a misspelled and",
    "start": "2653790",
    "end": "2659640"
  },
  {
    "text": "it's also making sure it's setting up our is path when we're doing the web deploy bundle we downloaded our app spec",
    "start": "2659640",
    "end": "2669030"
  },
  {
    "text": "file and install scripts from our s3 bucket so this is the information that tells code deploy how to actually",
    "start": "2669030",
    "end": "2675150"
  },
  {
    "text": "install its application and again you know you could have put these files in your source repo it's fine it may be",
    "start": "2675150",
    "end": "2680970"
  },
  {
    "text": "these you've got a reason for putting them outside of your source repo you know it works either way we just wanted",
    "start": "2680970",
    "end": "2686010"
  },
  {
    "text": "to show off the s3 download task for this scenario so that's why we chose",
    "start": "2686010",
    "end": "2690950"
  },
  {
    "text": "yeah so that's oh then I'll finish for us awesome so if we go to the code",
    "start": "2692780",
    "end": "2699000"
  },
  {
    "text": "deploy console we should see if we're quick enough the deployment underway I think you've",
    "start": "2699000",
    "end": "2704340"
  },
  {
    "text": "just done just now so that exceeded you",
    "start": "2704340",
    "end": "2709740"
  },
  {
    "text": "sure 11:59 maybe I trusted I just never",
    "start": "2709740",
    "end": "2716820"
  },
  {
    "text": "lie so how my browser there should be a link directly to that environment",
    "start": "2716820",
    "end": "2723080"
  },
  {
    "text": "now you may be in a snow away you want to use him what I would call immutable deployments right where every time you",
    "start": "2729349",
    "end": "2736130"
  },
  {
    "text": "do a deployment maybe at the end of the day you just blow away your deployment infrastructure setting you one up deploy the application to it ready for testing",
    "start": "2736130",
    "end": "2742519"
  },
  {
    "text": "the next day so you don't get this buildup of Croft on your instances in that case you that you would consider merging these two pipelines together to",
    "start": "2742519",
    "end": "2749119"
  },
  {
    "text": "build your infrastructure and then deploy your latest build ready for the next day we're obviously showing there's",
    "start": "2749119",
    "end": "2754369"
  },
  {
    "text": "two separate ones because you might want to rev your infrastructure slower than your your commits okay so we've done",
    "start": "2754369",
    "end": "2763819"
  },
  {
    "text": "elastic Beanstalk where you just worry about your application the Beanstalk takes care of the actual hosting and",
    "start": "2763819",
    "end": "2769729"
  },
  {
    "text": "cloud formation and code deploy way you define what your infrastructure is and how you're going to deploy to it so",
    "start": "2769729",
    "end": "2775910"
  },
  {
    "text": "let's head back to the slides so we showed the cloud formation tasks for",
    "start": "2775910",
    "end": "2782329"
  },
  {
    "text": "setting up infrastructure for deployment how we now get the latest Windows image ID from parameter store we don't have to",
    "start": "2782329",
    "end": "2788509"
  },
  {
    "text": "hardwire those image IDs anymore passing that in constructing the bundle using the tastic from to download from s3 in",
    "start": "2788509",
    "end": "2795079"
  },
  {
    "text": "this case and i/o the tasks you know it takes care of zipping everything up in the right structure and sending it off",
    "start": "2795079",
    "end": "2800269"
  },
  {
    "text": "to s3 to deploy it through code deploy so back at the start of this talk I",
    "start": "2800269",
    "end": "2806150"
  },
  {
    "text": "mentioned that these are open source tools they're on github in fact we can go to the github repo issues list which",
    "start": "2806150",
    "end": "2820430"
  },
  {
    "text": "many of those feature requests that she got closed today she's awesome yeah so we welcome pull requests we've had a few",
    "start": "2820430",
    "end": "2826430"
  },
  {
    "text": "in the last few weeks that have been released today feature requests on our issues list will respond as quickly as",
    "start": "2826430",
    "end": "2832160"
  },
  {
    "text": "we can we're really excited about these tools really happy to add new things to them and of course issues if you have",
    "start": "2832160",
    "end": "2838130"
  },
  {
    "text": "problems questions how the tools work etc is your one-stop shop to get him",
    "start": "2838130",
    "end": "2844900"
  },
  {
    "text": "what did you press not the wrong thing",
    "start": "2848529",
    "end": "2853390"
  },
  {
    "text": "if you recap this session then so we saw how to install the tools vs tstms",
    "start": "2854529",
    "end": "2859640"
  },
  {
    "text": "slightly different sequences but the same end result where the tasks show up inside the ear environment when you're",
    "start": "2859640",
    "end": "2865969"
  },
  {
    "text": "adding a task in build and release pipelines how you configure credentials and remember you can either use access",
    "start": "2865969",
    "end": "2871430"
  },
  {
    "text": "King secret key or you can use assume role just fine how to deploy an ASP done",
    "start": "2871430",
    "end": "2876769"
  },
  {
    "text": "application to elastic Beanstalk let it take care of the infrastructure for you how to work with parameters",
    "start": "2876769",
    "end": "2882589"
  },
  {
    "text": "thought to customize your build how to link that parameter store to your build variables seeing customize your builds and releases and how to so the",
    "start": "2882589",
    "end": "2889489"
  },
  {
    "text": "deployment infrastructure and a deployment pipeline using the cloud formation and code deploy tasks so just",
    "start": "2889489",
    "end": "2896930"
  },
  {
    "text": "to wrap up on the leave you with the links to the tools homepage aws.amazon.com /v sts or you can go in",
    "start": "2896930",
    "end": "2904099"
  },
  {
    "text": "the marketplace and find it there the github repository so please get involved there and of course if the tools you",
    "start": "2904099",
    "end": "2912049"
  },
  {
    "text": "know you ever need for us to call a native service that we down of at s4 feel free to submit a pull request right",
    "start": "2912049",
    "end": "2917630"
  },
  {
    "text": "we will take them follow you can follow us on Twitter AWS Fernet is that Twitter handle and of",
    "start": "2917630",
    "end": "2923959"
  },
  {
    "text": "course we have a developer blog where we blog not just on the VST s tools but also on the sdk powershell tools and a",
    "start": "2923959",
    "end": "2929719"
  },
  {
    "text": "Visual Studio toolkit with that like to thank you I hope you enjoyed it and have a great",
    "start": "2929719",
    "end": "2935180"
  },
  {
    "text": "conference [Applause]",
    "start": "2935180",
    "end": "2942979"
  }
]