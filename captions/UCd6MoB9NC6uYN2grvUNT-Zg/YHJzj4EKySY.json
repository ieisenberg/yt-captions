[
  {
    "start": "0",
    "end": "22000"
  },
  {
    "text": "am I on all right thanks a lot for uh coming out today and for coming to Las Vegas for",
    "start": "1599",
    "end": "8000"
  },
  {
    "text": "reinvent uh my name is Bob Kenny I'm a developer with AWS mobile working on Amazon Cognito and uh that's actually",
    "start": "8000",
    "end": "15599"
  },
  {
    "text": "what we're going to be talking about today social logins with mobile with mobile apps with",
    "start": "15599",
    "end": "22199"
  },
  {
    "start": "22000",
    "end": "46000"
  },
  {
    "text": "Cognito um so I'll just briefly talk about uh the AWS mobile platform and",
    "start": "22279",
    "end": "27720"
  },
  {
    "text": "some of the services and and offerings that we have then I'm going to jump back a year uh if",
    "start": "27720",
    "end": "33600"
  },
  {
    "text": "any of you were here last year I would talked about a product uh or a service called Web identity Federation we'll",
    "start": "33600",
    "end": "38840"
  },
  {
    "text": "just review that a little bit and then we'll jump to Amazon Cognito which is an evolution on that",
    "start": "38840",
    "end": "46000"
  },
  {
    "start": "46000",
    "end": "110000"
  },
  {
    "text": "product so AWS mobile um the platform has been uh growing over the course of",
    "start": "46000",
    "end": "52399"
  },
  {
    "text": "the last year um we previously had uh our mobile sdks uh v1s um and with the",
    "start": "52399",
    "end": "60000"
  },
  {
    "text": "mobile connectors uh we also had uh SNS our simple notification service for mobile push and then in July we actually",
    "start": "60000",
    "end": "67520"
  },
  {
    "text": "launched Amazon Cognito as well as a mobile analytics platform um along with",
    "start": "67520",
    "end": "73600"
  },
  {
    "text": "the launch of those two platforms we actually revved our sdks to a V2 um completely rote our iOS SDK uh and added",
    "start": "73600",
    "end": "82560"
  },
  {
    "text": "some additional uh mobile connectors for services such as Kinesis Dynamo DB S3",
    "start": "82560",
    "end": "88320"
  },
  {
    "text": "SCS and S uh s es sqs uh if you're interested in learning",
    "start": "88320",
    "end": "94079"
  },
  {
    "text": "more about some of the SDK features I'm actually going to be giving a workshop tomorrow at 9:00 a.m. um and there's",
    "start": "94079",
    "end": "101280"
  },
  {
    "text": "actually going to be an Android version going on at the same time so there's our MBL 310 and MBL",
    "start": "101280",
    "end": "109159"
  },
  {
    "text": "311 so why are we here um if you heard me talk last year I talked about how",
    "start": "109719",
    "end": "115320"
  },
  {
    "start": "110000",
    "end": "144000"
  },
  {
    "text": "credentials management specifically AWS credentials management is hard um for mobile devices and it's hard because",
    "start": "115320",
    "end": "122360"
  },
  {
    "text": "things like Hopper and ABK Studio exists that allow you to decompile and extract information out of a compiled",
    "start": "122360",
    "end": "129280"
  },
  {
    "text": "app um so if you're embedding credentials worst case root credentials",
    "start": "129280",
    "end": "134480"
  },
  {
    "text": "those can be exposed by an attacker and used to access your AWS account and create resources that you would then be",
    "start": "134480",
    "end": "140879"
  },
  {
    "text": "liable for so what is the solution to this",
    "start": "140879",
    "end": "146800"
  },
  {
    "start": "144000",
    "end": "169000"
  },
  {
    "text": "problem we need to get credentials on the device we want to limit the lifetime of those credentials and we want to",
    "start": "146800",
    "end": "153239"
  },
  {
    "text": "enforce rotation of those credentials so uh to limit blast radius and then also we want to limit access to uh resources",
    "start": "153239",
    "end": "160720"
  },
  {
    "text": "that the user has access to again to limit blast radius uh so last year we launched web identity Federation to",
    "start": "160720",
    "end": "167120"
  },
  {
    "text": "solve this problem so what is web identity Federation uh at its most basic",
    "start": "167120",
    "end": "172200"
  },
  {
    "start": "169000",
    "end": "191000"
  },
  {
    "text": "level it's a way for you to trade uh uh tokens from a public provider such as",
    "start": "172200",
    "end": "179000"
  },
  {
    "text": "Facebook Google or Amazon Amazon and trade them directly for adab credentials and the best part was is you can do this",
    "start": "179000",
    "end": "185159"
  },
  {
    "text": "All without any server authentication or server",
    "start": "185159",
    "end": "190280"
  },
  {
    "text": "infrastructure um so as I said it allows you to uh get credentials onto the",
    "start": "191640",
    "end": "197159"
  },
  {
    "text": "device so we solve that problem we use the popular social login providers um we",
    "start": "197159",
    "end": "204080"
  },
  {
    "text": "give the user scoped credentials you can use policy variables uh to limit access",
    "start": "204080",
    "end": "209200"
  },
  {
    "text": "to those resources for that user and we didn't have to do any server code to do this um so there were some trade-offs",
    "start": "209200",
    "end": "215519"
  },
  {
    "text": "with this unfortunately um it doesn't support any guest access we have to enforce someone to log in in order to",
    "start": "215519",
    "end": "221560"
  },
  {
    "text": "use it uh we can't link across provider so if someone had a Facebook and a Google account those two people those",
    "start": "221560",
    "end": "228239"
  },
  {
    "text": "two accounts would seen as two different users inside a web identity Federation and one of the uh things we heard most",
    "start": "228239",
    "end": "235720"
  },
  {
    "text": "from customers was they couldn't use their own login system with this",
    "start": "235720",
    "end": "240879"
  },
  {
    "text": "um so as a result of all of that feedback we actually launched Amazon",
    "start": "240879",
    "end": "246840"
  },
  {
    "text": "Cognito so there's three uh major bullet points for Amazon Cognito um first is",
    "start": "247959",
    "end": "253599"
  },
  {
    "start": "248000",
    "end": "329000"
  },
  {
    "text": "the identity management which uh I'll be talking about obviously today uh so the",
    "start": "253599",
    "end": "258880"
  },
  {
    "text": "the we have support for the three providers that were in web ad enity Federation we also added support for",
    "start": "258880",
    "end": "264800"
  },
  {
    "text": "open ID connect uh for generic open ID connect support we also have guest on authentic at access um and allow you to",
    "start": "264800",
    "end": "272520"
  },
  {
    "text": "transition between those users and then we also have the ability to uh uh use your own authentication um we still",
    "start": "272520",
    "end": "279960"
  },
  {
    "text": "because we're using web entity Federation under the hood um we still get all of that benefit of uh no server",
    "start": "279960",
    "end": "287160"
  },
  {
    "text": "code and uh secure access and um pinned credentials for the user uh the other nice feature about",
    "start": "287160",
    "end": "294320"
  },
  {
    "text": "Amazon Cognito is that there's actually a data synchronization component so once your user registers andess is Cognito we",
    "start": "294320",
    "end": "300880"
  },
  {
    "text": "can actually give them a small amount of key value pair sync storage that syncs to the cloud um and then is available on",
    "start": "300880",
    "end": "308919"
  },
  {
    "text": "any platform where they log in um unfortunately this talk already happened but uh if you didn't get a chance to go",
    "start": "308919",
    "end": "315759"
  },
  {
    "text": "see uh our talk MBL 301 on our syns uh the sync portion of uh Cognito I highly",
    "start": "315759",
    "end": "321800"
  },
  {
    "text": "recommend you go check that out uh when the the uh sessions are available online later",
    "start": "321800",
    "end": "329280"
  },
  {
    "start": "329000",
    "end": "389000"
  },
  {
    "text": "um so now I'm going to talk a little bit about the identity model uh the identity data",
    "start": "330880",
    "end": "338080"
  },
  {
    "text": "model at the highest level we have your AWS account and then inside of that we",
    "start": "339000",
    "end": "344479"
  },
  {
    "text": "can create up to 60 identity pools and the easiest way to think about an identity pool is your application now",
    "start": "344479",
    "end": "351840"
  },
  {
    "text": "this is not strictly saying that you must use a different identity pool for every application you can use it across",
    "start": "351840",
    "end": "357560"
  },
  {
    "text": "but it is uh can be the easiest way to think about about it then inside of that identity pool you can have any number of",
    "start": "357560",
    "end": "364280"
  },
  {
    "text": "identities and then the identity is represents an individual user uh or",
    "start": "364280",
    "end": "369759"
  },
  {
    "text": "device that is accessing your identity pool and then each one of those",
    "start": "369759",
    "end": "374800"
  },
  {
    "text": "identities has some number of logins associated with it and they could have zero logins at which point they will be",
    "start": "374800",
    "end": "381120"
  },
  {
    "text": "a guest or unauthenticated user and as soon as they have a login they will be considered an authenticated user",
    "start": "381120",
    "end": "389840"
  },
  {
    "start": "389000",
    "end": "404000"
  },
  {
    "text": "so getting started with Cognito is quite easy uh we'll sign into the AWS console go to Cognito create an identity pool",
    "start": "390280",
    "end": "398000"
  },
  {
    "text": "and then there's uh SDK code included inside of the console that you can use and start integrating in the",
    "start": "398000",
    "end": "404360"
  },
  {
    "start": "404000",
    "end": "665000"
  },
  {
    "text": "app so actually that's what I'm going to do right now",
    "start": "404360",
    "end": "409960"
  },
  {
    "text": "so I'm going to start out at the uh AWS console I'm going to go to Cognito I don't have an identity pool already so",
    "start": "420639",
    "end": "426919"
  },
  {
    "text": "I'm going to go ahead and click get started the Wizard's going to walk me through creating my identity pool I'm",
    "start": "426919",
    "end": "433639"
  },
  {
    "text": "going to give my identity pool a name and then I'm going to want to support Facebook uh login in my app so I'm just",
    "start": "433639",
    "end": "439599"
  },
  {
    "text": "going to provide that information now just going to grab that from my cheat",
    "start": "439599",
    "end": "445000"
  },
  {
    "text": "sheet I'm also going to enable guest access for this identity pool and then",
    "start": "447319",
    "end": "452400"
  },
  {
    "text": "I'm going to go click",
    "start": "452400",
    "end": "455199"
  },
  {
    "text": "create and so now at this step uh Co the Cognito console is offering to create me",
    "start": "459919",
    "end": "465159"
  },
  {
    "text": "uh two roles and I'll talk a little bit about those uh um the roles role in",
    "start": "465159",
    "end": "470360"
  },
  {
    "text": "cognito a little bit later but I'm just going to go ahead and keep these at the default um and note that we have a uh",
    "start": "470360",
    "end": "477680"
  },
  {
    "text": "default policy here that allows you to give access to mobile analytics and our sync",
    "start": "477680",
    "end": "483759"
  },
  {
    "text": "service so now I have uh I've created my identity pool I've created my roles and",
    "start": "487840",
    "end": "493879"
  },
  {
    "text": "now the console is providing me with some starter code that I can use to get started so it has a credentials provider",
    "start": "493879",
    "end": "499879"
  },
  {
    "text": "and also some code to get started with sync I'm actually going to be doing some iOS coding so I'm going to grab this",
    "start": "499879",
    "end": "505840"
  },
  {
    "text": "code which is already preconfigured for my",
    "start": "505840",
    "end": "511840"
  },
  {
    "text": "identity pool and then I'm going to uh paste it into this sample uh that we",
    "start": "511840",
    "end": "517760"
  },
  {
    "text": "have that's available on",
    "start": "517760",
    "end": "521279"
  },
  {
    "text": "GitHub I'm just going to replace the ex existing one that's in",
    "start": "523200",
    "end": "528640"
  },
  {
    "text": "here and then I'm going to go ahead and run this on simulator",
    "start": "531240",
    "end": "539720"
  },
  {
    "text": "um and again just go while I'll wait for that for to compile I'll just point out again this sample is available on GitHub",
    "start": "542519",
    "end": "549800"
  },
  {
    "text": "we have a number of samples for the IOS and Android sdks um so this one shows off Cognito and Cognito sync um so",
    "start": "549800",
    "end": "559040"
  },
  {
    "text": "hopefully we'll get that started quickly",
    "start": "559040",
    "end": "563279"
  },
  {
    "text": "okay and uh I've included some logging in here uh just to show off uh that we've we've contacted the service and",
    "start": "587240",
    "end": "593920"
  },
  {
    "text": "what you can see down here at the very bottom of my logging screen is the identity ID so this is the unique",
    "start": "593920",
    "end": "599800"
  },
  {
    "text": "identifier we've assigned for this um for this",
    "start": "599800",
    "end": "605000"
  },
  {
    "text": "device so inside of the app I can click on browse data and I'm acting as an unauthenticated guest user I can click",
    "start": "605279",
    "end": "612279"
  },
  {
    "text": "on the plus to add a new data",
    "start": "612279",
    "end": "615920"
  },
  {
    "text": "set and then I can add data to that data",
    "start": "617640",
    "end": "623240"
  },
  {
    "text": "set can click on the synchronization button now my data is available in the",
    "start": "627240",
    "end": "633760"
  },
  {
    "text": "cloud if I go back to the AWS console for Cognito and look at my identity",
    "start": "633760",
    "end": "641000"
  },
  {
    "text": "pool I can see that I've created one identity and that's an unauthenticated identity and then I've used two sync so",
    "start": "641000",
    "end": "648399"
  },
  {
    "text": "far this month so that's the basics of getting",
    "start": "648399",
    "end": "655320"
  },
  {
    "text": "started with Cognito I'll go back to our presentation",
    "start": "655320",
    "end": "661240"
  },
  {
    "start": "665000",
    "end": "718000"
  },
  {
    "text": "so the starter code includes this object called the AWS Cognito credentials provider uh and the Android SDK has a",
    "start": "666240",
    "end": "673399"
  },
  {
    "text": "similar construct it's I believe it's called the Cognito caching credentials provider uh but basically it's intended",
    "start": "673399",
    "end": "679680"
  },
  {
    "text": "to uh be used with other service clients so it it's job is to get credentials to",
    "start": "679680",
    "end": "685120"
  },
  {
    "text": "give to other service clients it does lazy loading so it only makes Network calls when absolutely necessary it",
    "start": "685120",
    "end": "691880"
  },
  {
    "text": "handles the refreshing of those credentials for you so after the hour uh of the STS credentials expires it will",
    "start": "691880",
    "end": "698399"
  },
  {
    "text": "go and refresh them uh it supports both unauthenticated and authenticated as you",
    "start": "698399",
    "end": "703720"
  },
  {
    "text": "saw and it caches the identity ID for you and and the credentials across sessions so if you uh come back to the",
    "start": "703720",
    "end": "710200"
  },
  {
    "text": "app within an hour the credentials that are already cached will be used uh reused inside of the session",
    "start": "710200",
    "end": "718279"
  },
  {
    "start": "718000",
    "end": "833000"
  },
  {
    "text": "so the credentials provider does a bunch of stuff and covers uh the existing or covers the uh the entire Cognito off",
    "start": "720360",
    "end": "727279"
  },
  {
    "text": "flow so I'll walk through that",
    "start": "727279",
    "end": "730639"
  },
  {
    "text": "now so in the authenticated case the user authenticates with a login provider",
    "start": "732440",
    "end": "739399"
  },
  {
    "text": "and they'll get back either an ooth token in the case of Facebook or Amazon or an open ID connect token in case of",
    "start": "739399",
    "end": "745360"
  },
  {
    "text": "Google or one of the generic oidc providers",
    "start": "745360",
    "end": "750399"
  },
  {
    "text": "next step is is that the pro uh the provider passes that token to Cognito as",
    "start": "750399",
    "end": "755920"
  },
  {
    "text": "part of a get ID call Cognito will look up that identifier and validate it",
    "start": "755920",
    "end": "761839"
  },
  {
    "text": "against the uh the identity provider and uh Facebook or Google uh or",
    "start": "761839",
    "end": "768199"
  },
  {
    "text": "Amazon and if it's valid and uh for the uh application that we configured with",
    "start": "768199",
    "end": "773399"
  },
  {
    "text": "our identity pool we will return back an identity ID",
    "start": "773399",
    "end": "779240"
  },
  {
    "text": "after we have our identity ID the provider will then again pass that token back along with the identity ID as part",
    "start": "779480",
    "end": "786880"
  },
  {
    "text": "of a g open ID token call Cognito will once again validate that that token is",
    "start": "786880",
    "end": "792320"
  },
  {
    "text": "still valid with that provider and if it is it will return an open ID token for",
    "start": "792320",
    "end": "798440"
  },
  {
    "text": "Cognito for that identity finally the open ID token will",
    "start": "798440",
    "end": "804440"
  },
  {
    "text": "be passed to the secure token Service as part of an assume role with web identity",
    "start": "804440",
    "end": "809760"
  },
  {
    "text": "and assuming and then STS will validate that that token is valid with Cognito and then return AWS credentials",
    "start": "809760",
    "end": "817199"
  },
  {
    "text": "as a result so all of this stuff that's",
    "start": "817199",
    "end": "823279"
  },
  {
    "text": "underneath this gray box here is all handled by the credentials provider the only thing that you actually have to write and Implement is the login",
    "start": "823279",
    "end": "832120"
  },
  {
    "start": "833000",
    "end": "890000"
  },
  {
    "text": "flow so let's look at what a instantiation of an AWS credentials uh Cognito credentials provider looks like",
    "start": "833480",
    "end": "840079"
  },
  {
    "text": "we provide a region Cognito is available in Us East one and just recently we",
    "start": "840079",
    "end": "845720"
  },
  {
    "text": "launched our irland uh EU West one stack uh second we have your account",
    "start": "845720",
    "end": "852600"
  },
  {
    "text": "ID then we have your identity pool ID and that will be the the identity pool",
    "start": "852600",
    "end": "857759"
  },
  {
    "text": "the idea of the identity pool that we created then we provide our two roll arms so our unauthenticated and",
    "start": "857759",
    "end": "864839"
  },
  {
    "text": "authenticated roles and that's all we need so the first two pieces are passed to Cognito",
    "start": "864839",
    "end": "871199"
  },
  {
    "text": "as part of the the the Cognito portion of the flow and the roles are used in",
    "start": "871199",
    "end": "876480"
  },
  {
    "text": "the STS portion of the flow when we use uh when we're using it",
    "start": "876480",
    "end": "882839"
  },
  {
    "text": "in an unauthenticated case we obviously use the Uno roll and when we use the authenticated flow we would use the ath",
    "start": "882839",
    "end": "890320"
  },
  {
    "start": "890000",
    "end": "946000"
  },
  {
    "text": "roll so let's talk a little bit about uh unauthenticated identities",
    "start": "890720",
    "end": "897279"
  },
  {
    "text": "um one of the things we heard with web at any Federation was users weren't able to developers weren't able to give users",
    "start": "899959",
    "end": "906480"
  },
  {
    "text": "guest access and they were require they had to require uh their users to log in",
    "start": "906480",
    "end": "911920"
  },
  {
    "text": "and that created some amount of friction um so guest access allows you to reduce that friction and allow your",
    "start": "911920",
    "end": "919000"
  },
  {
    "text": "users to try out your app and try some of the readon functionality or perhaps some limited write functionality inside",
    "start": "919000",
    "end": "925680"
  },
  {
    "text": "of your app um the drawback here is is that these identities are not portable so when we create a new",
    "start": "925680",
    "end": "932800"
  },
  {
    "text": "identity um that identity is tied to the device and the identity is cached on the device if the user goes to another one",
    "start": "932800",
    "end": "940000"
  },
  {
    "text": "of their devices and uses guest access they will get a new",
    "start": "940000",
    "end": "945079"
  },
  {
    "start": "946000",
    "end": "955000"
  },
  {
    "text": "identity what if they want to transition with their data and they want to use their data in in multiple devices the",
    "start": "946720",
    "end": "953040"
  },
  {
    "text": "users can add a login and become an authenticated user now that identity",
    "start": "953040",
    "end": "958519"
  },
  {
    "start": "955000",
    "end": "964000"
  },
  {
    "text": "will track travel with them wherever they go whenever they log",
    "start": "958519",
    "end": "963440"
  },
  {
    "text": "in we also have the ability to link logins so if the user starts out with just Facebook we can add additional",
    "start": "963920",
    "end": "971839"
  },
  {
    "start": "964000",
    "end": "1032000"
  },
  {
    "text": "multiple uh other providers such as Google or Amazon and all those um all",
    "start": "971839",
    "end": "977639"
  },
  {
    "text": "those identities will be able to use to access this particular identity we have to have uh all of them to establish the",
    "start": "977639",
    "end": "984720"
  },
  {
    "text": "link it's an implicit uh it's an implicit link when you provide multiple logins but then once the link is",
    "start": "984720",
    "end": "991279"
  },
  {
    "text": "established any one of those logins can be used to access this identity uh we have a limitation that",
    "start": "991279",
    "end": "998720"
  },
  {
    "text": "you can only have one login per public provider um so that means you can't link two Facebook uh logins to the same",
    "start": "998720",
    "end": "1008160"
  },
  {
    "text": "identity so what happens if the user was using their uh Android device and they",
    "start": "1009440",
    "end": "1014880"
  },
  {
    "text": "logged in with Google and they were using a Kindle device and they were logged in with Amazon but they want to now transition and use the um same",
    "start": "1014880",
    "end": "1022680"
  },
  {
    "text": "identity and get access to the same data if we add a common",
    "start": "1022680",
    "end": "1027918"
  },
  {
    "text": "login then we can cause a merge to occur and so once we add that common",
    "start": "1027919",
    "end": "1034360"
  },
  {
    "start": "1032000",
    "end": "1069000"
  },
  {
    "text": "Facebook login we can add now have all three of those uh logins associated with",
    "start": "1034360",
    "end": "1039480"
  },
  {
    "text": "a single identity um the merged still respects that one uh login per uh provider",
    "start": "1039480",
    "end": "1047240"
  },
  {
    "text": "limitation so if we had had Google on both sides and we tried to add Facebook to both one of them would fail",
    "start": "1047240",
    "end": "1054160"
  },
  {
    "text": "and the mer the merge wouldn't actually happen so what I'm going to do now is",
    "start": "1054160",
    "end": "1059320"
  },
  {
    "text": "I'm going to go ahead and add uh authentication to my",
    "start": "1059320",
    "end": "1064360"
  },
  {
    "start": "1069000",
    "end": "1342000"
  },
  {
    "text": "app so I already configured my identity pool to support the uh the Facebook app",
    "start": "1069200",
    "end": "1074440"
  },
  {
    "text": "so I'm just going to update my iOS app just need to update it in two",
    "start": "1074440",
    "end": "1082000"
  },
  {
    "text": "places um and uh just to touch again again on this sample the sample actually",
    "start": "1104320",
    "end": "1109360"
  },
  {
    "text": "includes um support for Amazon and uh Google as well uh so there's example",
    "start": "1109360",
    "end": "1114960"
  },
  {
    "text": "code and instructions on how to configure those as well I'm just using Facebook because it's uh one of the",
    "start": "1114960",
    "end": "1120080"
  },
  {
    "text": "easier ones to initialize so I'm going to go ahead and click login I'm going to select Facebook",
    "start": "1120080",
    "end": "1129440"
  },
  {
    "text": "copy my",
    "start": "1143960",
    "end": "1146480"
  },
  {
    "text": "password oh come on Facebook there we go",
    "start": "1165159",
    "end": "1170720"
  },
  {
    "text": "so in the background you can see that I've made a couple of different requests I've now refreshed credentials and if I",
    "start": "1180320",
    "end": "1185559"
  },
  {
    "text": "go back to the awos console and",
    "start": "1185559",
    "end": "1192158"
  },
  {
    "text": "refresh my unauthenticated user is now transitioned to a Facebook user um and",
    "start": "1192720",
    "end": "1199080"
  },
  {
    "text": "my user is now authenticated uh it's important to note that once a user is transitioned to authenticated it can't",
    "start": "1199080",
    "end": "1204559"
  },
  {
    "text": "be used in an unauthenticated fashion anymore so that secures the data as",
    "start": "1204559",
    "end": "1210600"
  },
  {
    "text": "well and so then as a final example I'm going to go ahead and deploy this app",
    "start": "1217720",
    "end": "1225640"
  },
  {
    "text": "to my iPhone",
    "start": "1225640",
    "end": "1229840"
  },
  {
    "text": "and show that I can get to my data that's already been synchronized for this user",
    "start": "1245080",
    "end": "1251679"
  },
  {
    "text": "all right so my app launches click",
    "start": "1268720",
    "end": "1274400"
  },
  {
    "text": "login browse data hit",
    "start": "1277440",
    "end": "1282840"
  },
  {
    "text": "refresh my test data is here and I have my reinvent data and I can even modify",
    "start": "1282840",
    "end": "1288799"
  },
  {
    "text": "that data synchronize",
    "start": "1288799",
    "end": "1294400"
  },
  {
    "text": "it and then synchronize it over convincing",
    "start": "1294400",
    "end": "1300480"
  },
  {
    "text": "um browse data over here",
    "start": "1300480",
    "end": "1306720"
  },
  {
    "text": "synchronize and uh see that I have did I even change that apparently I",
    "start": "1306720",
    "end": "1313000"
  },
  {
    "text": "didn't",
    "start": "1313000",
    "end": "1316000"
  },
  {
    "text": "but so you can see that the uh the synchronization happens um so tomorrow uh at the workshop will also be showing",
    "start": "1319960",
    "end": "1327320"
  },
  {
    "text": "um our push synchronization if you didn't see that at um in our 301 talk as well um but that's adding",
    "start": "1327320",
    "end": "1335600"
  },
  {
    "start": "1342000",
    "end": "1398000"
  },
  {
    "text": "authentication um so now I'll I'm going to go back and talk a little bit about roles um so we're still using web",
    "start": "1343600",
    "end": "1349600"
  },
  {
    "text": "identity Federation under the hood to actually do the last mile of delivering credentials to the device and the",
    "start": "1349600",
    "end": "1355120"
  },
  {
    "text": "mechanism for doing that is IM IM roles uh IM roles have two policies associated",
    "start": "1355120",
    "end": "1360159"
  },
  {
    "text": "with them a trust policy or a trust uh um trust permissions um and this this",
    "start": "1360159",
    "end": "1366679"
  },
  {
    "text": "defines who can assume the role uh and then our access policy which can Define",
    "start": "1366679",
    "end": "1371960"
  },
  {
    "text": "defines what resources we can access once we've assumed that role uh there are three main types of uh roles at in",
    "start": "1371960",
    "end": "1378840"
  },
  {
    "text": "AWS AWS service roles that's for allowing services to uh make changes to",
    "start": "1378840",
    "end": "1384760"
  },
  {
    "text": "your account on your behalf we also have cross account roles for allowing other users to access your data uh and then",
    "start": "1384760",
    "end": "1392159"
  },
  {
    "text": "identity provider access which is what Cognito",
    "start": "1392159",
    "end": "1396919"
  },
  {
    "start": "1398000",
    "end": "1488000"
  },
  {
    "text": "uses um so what you see here is our uh default uh trust policy for",
    "start": "1398840",
    "end": "1404159"
  },
  {
    "text": "Cognito um this this bit up here this uh PR Federated uh Cognito identity defines",
    "start": "1404159",
    "end": "1411600"
  },
  {
    "text": "that we're trusting specifically the Cognito Service uh the odd the uh Cognito",
    "start": "1411600",
    "end": "1419320"
  },
  {
    "text": "identity. Amazon AWS colon odd uh field is set to trust our identity",
    "start": "1419320",
    "end": "1426159"
  },
  {
    "text": "pool um so that's because we're using open ID connect uh so the this is actually the audience field of the token",
    "start": "1426159",
    "end": "1433039"
  },
  {
    "text": "that we vend and then finally uh we also include this AMR field",
    "start": "1433039",
    "end": "1439080"
  },
  {
    "text": "uh for defining whether or not it's authenticated or unauthenticated uh in the unauthenticated case we also include",
    "start": "1439080",
    "end": "1445880"
  },
  {
    "text": "in the AMR field uh the domain of any provider used during the authentication",
    "start": "1445880",
    "end": "1451039"
  },
  {
    "text": "so that allows you to uh pivot based on whether or not the user is logging in with a specific",
    "start": "1451039",
    "end": "1457960"
  },
  {
    "text": "provider and here is a default Pol access policy that we create uh as part of our um our wizard in in the Cognito",
    "start": "1458480",
    "end": "1466799"
  },
  {
    "text": "console um by default would give you access to the mobile analytics service and the sync Service uh and you'll",
    "start": "1466799",
    "end": "1473880"
  },
  {
    "text": "notice here that it's it's set to Star and that might seem a little bit too permissive um but the sync service",
    "start": "1473880",
    "end": "1479399"
  },
  {
    "text": "actually has some additional Protections in place um so that identities can't access each other's",
    "start": "1479399",
    "end": "1486440"
  },
  {
    "start": "1488000",
    "end": "1565000"
  },
  {
    "text": "data uh so roles for Cognito by default as I mentioned we create two roles uh",
    "start": "1488520",
    "end": "1494600"
  },
  {
    "text": "unauthenticated and authenticated um if you don't add this support for one of those two when you create your identity",
    "start": "1494600",
    "end": "1500559"
  },
  {
    "text": "pool those won't get created for you by default but uh in the happy case we",
    "start": "1500559",
    "end": "1505960"
  },
  {
    "text": "create to um as I mentioned we give you access to the sync service and mobile analytics",
    "start": "1505960",
    "end": "1512760"
  },
  {
    "text": "but you can modify that to add support to any service you want uh such as S3 Dynamo GB Kinesis or anything that you",
    "start": "1512760",
    "end": "1519520"
  },
  {
    "text": "want to access directly from your app uh and it supports policy variables so any service that supports uh fine grain",
    "start": "1519520",
    "end": "1526039"
  },
  {
    "text": "Access Control uh you can use policy variables so let's talk a little bit about those policy variables let's take",
    "start": "1526039",
    "end": "1533480"
  },
  {
    "text": "an example use case we want to give a users access to to S3 so they can upload",
    "start": "1533480",
    "end": "1538760"
  },
  {
    "text": "to a a portion of that give them a a set of a home directory um we also want to",
    "start": "1538760",
    "end": "1545480"
  },
  {
    "text": "allow them to upload uh paths to their keys to Dynamo DB so that they can query",
    "start": "1545480",
    "end": "1551159"
  },
  {
    "text": "and and have an index of those files uh the user should be able to uh",
    "start": "1551159",
    "end": "1556279"
  },
  {
    "text": "update delete and modify basically crud operations for those items but they shouldn't be able to access other uh",
    "start": "1556279",
    "end": "1563080"
  },
  {
    "text": "other users data so here's a um two policy",
    "start": "1563080",
    "end": "1568159"
  },
  {
    "text": "statements that you can use inside of a a policy that would allow you to do this for S3 um uh this uh Cognito identity.",
    "start": "1568159",
    "end": "1577440"
  },
  {
    "text": "Amazon aws.com colub will be replaced by the identity ID which is that unique",
    "start": "1577440",
    "end": "1583399"
  },
  {
    "text": "identifier that we created for the user when they first logged in",
    "start": "1583399",
    "end": "1589039"
  },
  {
    "text": "additionally Dynamo DB also supports fine grain access control so we can limit the uh access to only those items",
    "start": "1590720",
    "end": "1598440"
  },
  {
    "text": "uh keyed to buy their identity ID and again we can use that colon sub variable",
    "start": "1598440",
    "end": "1604559"
  },
  {
    "text": "um to do that um so I mentioned that we we built",
    "start": "1604559",
    "end": "1612520"
  },
  {
    "start": "1609000",
    "end": "1639000"
  },
  {
    "text": "uh Cognito as a response to some of the trade-offs that we had to make for uh for web identity Federation",
    "start": "1612520",
    "end": "1618880"
  },
  {
    "text": "um so obviously we we got our guest access we have our unauthenticated users in in cognito we can link across of",
    "start": "1618880",
    "end": "1626360"
  },
  {
    "text": "providers and keep that consistent identifier but we still haven't touched on using your own authentication system",
    "start": "1626360",
    "end": "1633240"
  },
  {
    "text": "um and unfortunately we have to give up something to do that and that's going to be our server",
    "start": "1633240",
    "end": "1639158"
  },
  {
    "start": "1639000",
    "end": "1687000"
  },
  {
    "text": "code uh so we have a feature called developer authenticated identities that allows you to basically use your own",
    "start": "1639960",
    "end": "1646039"
  },
  {
    "text": "authentication system with cognito um many of the customers that we've",
    "start": "1646039",
    "end": "1651120"
  },
  {
    "text": "talked to have their had already had their own authentication system and didn't necessarily want to rely on one",
    "start": "1651120",
    "end": "1657200"
  },
  {
    "text": "of the public providers uh we built this feature so that they can call Cognito from the uh from their back end and we",
    "start": "1657200",
    "end": "1664600"
  },
  {
    "text": "added a new call called get open ID token for developer identity um that's available in all of",
    "start": "1664600",
    "end": "1670679"
  },
  {
    "text": "our server sdks so Ruby PHP python java.net Etc",
    "start": "1670679",
    "end": "1678440"
  },
  {
    "text": "um and then we manage the the linkages of those identities to the the underlying Cognito",
    "start": "1678440",
    "end": "1686240"
  },
  {
    "start": "1687000",
    "end": "1763000"
  },
  {
    "text": "identities um so the flow is going to be a little bit different for developer authenticated identities from the existing flow the uh the user will",
    "start": "1687039",
    "end": "1694919"
  },
  {
    "text": "initiate a login with the authentication system that authentication system will",
    "start": "1694919",
    "end": "1700159"
  },
  {
    "text": "actually call get open ID token for developer identity after of course validating that they've successfully",
    "start": "1700159",
    "end": "1706279"
  },
  {
    "text": "logged in because that is signed with AWS credentials from the backend we can",
    "start": "1706279",
    "end": "1712000"
  },
  {
    "text": "trust that whatever Prov whatever identifier is provided is the one that the developer wants to use in return we will actually return an",
    "start": "1712000",
    "end": "1719640"
  },
  {
    "text": "identity ID and an open ID token for that user which can then be passed back",
    "start": "1719640",
    "end": "1726919"
  },
  {
    "text": "to the app from the login flow then the app can finish the normal",
    "start": "1726919",
    "end": "1733640"
  },
  {
    "text": "flow of calling assume role with web identity at which point STS will valid validate that token with Cognito and",
    "start": "1733640",
    "end": "1740760"
  },
  {
    "text": "return AWS credentials so the bottom part here the",
    "start": "1740760",
    "end": "1746080"
  },
  {
    "text": "STS flow can be handled by the credentials provider but we don't have a uh a great",
    "start": "1746080",
    "end": "1755399"
  },
  {
    "text": "but how do we get the uh the token um for for the user that was already",
    "start": "1755399",
    "end": "1760440"
  },
  {
    "text": "encapsulated by our credentials provider well we extended this provider",
    "start": "1760440",
    "end": "1765559"
  },
  {
    "start": "1763000",
    "end": "1795000"
  },
  {
    "text": "methodology to an AWS identity provider and it's an interface for allowing you to call your own login system and gets",
    "start": "1765559",
    "end": "1772559"
  },
  {
    "text": "an open ID token from it and then passes it to the credentials provider to continue and uh complete the off",
    "start": "1772559",
    "end": "1780080"
  },
  {
    "text": "flow so what I'm going to do now is uh try to do a live demo of a developer",
    "start": "1780080",
    "end": "1786640"
  },
  {
    "text": "authenticated identity",
    "start": "1786640",
    "end": "1789679"
  },
  {
    "start": "1795000",
    "end": "2165000"
  },
  {
    "text": "flow so the first thing I'm going to do is is get my identity pool ID go or I have to update my identity",
    "start": "1795880",
    "end": "1802840"
  },
  {
    "text": "pool to actually support developer authenticated",
    "start": "1802840",
    "end": "1806919"
  },
  {
    "text": "identities so I create a uh a provider name and this is basically just a bare",
    "start": "1809080",
    "end": "1814960"
  },
  {
    "text": "string that we will use when we're setting the provider map inside of the uh inside of the call um and it's",
    "start": "1814960",
    "end": "1821200"
  },
  {
    "text": "important to note that once you set this you can't unset it uh or change it inside of the identity pool um so it's",
    "start": "1821200",
    "end": "1827200"
  },
  {
    "text": "important to make sure that this doesn't contain anything you don't want um and",
    "start": "1827200",
    "end": "1832240"
  },
  {
    "text": "actually matches um it doesn't have to match but it's in it's it's good to make sure that it matches your uh um the",
    "start": "1832240",
    "end": "1838200"
  },
  {
    "text": "domain of your login system so I'm going to go ahead and save those",
    "start": "1838200",
    "end": "1845279"
  },
  {
    "text": "changes and then I'm going to grab my identity pool ID because I'm going to need",
    "start": "1848120",
    "end": "1853760"
  },
  {
    "text": "that I'm going to go open a new tab",
    "start": "1854799",
    "end": "1859919"
  },
  {
    "text": "I'm going to go to elastic beanock where I actually have a um an",
    "start": "1860080",
    "end": "1867000"
  },
  {
    "text": "application that I've built to call Cognito and manage my",
    "start": "1867000",
    "end": "1874600"
  },
  {
    "text": "users I have to update the configuration so it uses the correct identity pool and the correct provider",
    "start": "1874600",
    "end": "1881840"
  },
  {
    "text": "name so that's under here so I'm going to create my new paste in",
    "start": "1884240",
    "end": "1890279"
  },
  {
    "text": "my new identity pool and paste in my new um developer authenticated identity",
    "start": "1890279",
    "end": "1898240"
  },
  {
    "text": "domain this",
    "start": "1898240",
    "end": "1901559"
  },
  {
    "text": "guy and those are the only two things that I need to do um the the the sample app actually uses a uh IM Ro um to",
    "start": "1905919",
    "end": "1913559"
  },
  {
    "text": "actually get credentials to call Cognito uh so I don't have to provide any other information other than my identity pool",
    "start": "1913559",
    "end": "1919240"
  },
  {
    "text": "and my developer provider",
    "start": "1919240",
    "end": "1922399"
  },
  {
    "text": "name uh so while I'm waiting for that to restart I'll switch over to the xcode to",
    "start": "1925200",
    "end": "1930600"
  },
  {
    "text": "xcode",
    "start": "1930600",
    "end": "1933600"
  },
  {
    "text": "um there's X code and inside this folder here I have",
    "start": "1935639",
    "end": "1940919"
  },
  {
    "text": "my developer authenticated identity provider stop these",
    "start": "1940919",
    "end": "1949240"
  },
  {
    "text": "okay and so this uh this provider uh basically has two um two main pieces um",
    "start": "1954799",
    "end": "1962519"
  },
  {
    "text": "we have our get identity ID call which responds with the identity ID and then",
    "start": "1962519",
    "end": "1968399"
  },
  {
    "text": "we have a refresh which makes sure that we have a fresh open ID token",
    "start": "1968399",
    "end": "1975799"
  },
  {
    "text": "um uh so this at this uh provider actually uses a similar flow to what we we used to call our token",
    "start": "1975799",
    "end": "1982360"
  },
  {
    "text": "vending machine so it has a authentication flow where it gets a private key um and then uses that to",
    "start": "1982360",
    "end": "1988120"
  },
  {
    "text": "encrypt uh the communication with the backend server um so this actually uh",
    "start": "1988120",
    "end": "1993519"
  },
  {
    "text": "communicates uh and and sends a payload and then gets the token back um this code is not currently available on",
    "start": "1993519",
    "end": "1999559"
  },
  {
    "text": "GitHub but we're hoping to make it available soon um but uh that's that",
    "start": "1999559",
    "end": "2005720"
  },
  {
    "text": "let's go check in on our uh backend back looks like it's",
    "start": "2005720",
    "end": "2011480"
  },
  {
    "text": "restarted um so I'm going to go ahead and go to the register. JSP I'm going to create a new",
    "start": "2013679",
    "end": "2021760"
  },
  {
    "text": "user Bob and click",
    "start": "2021760",
    "end": "2027240"
  },
  {
    "text": "register all right so this uh this this system actually uses Dynamo DB for registration so all of the records uh",
    "start": "2031320",
    "end": "2038120"
  },
  {
    "text": "the username and encrypted password are stored uh in a Dynamo DB",
    "start": "2038120",
    "end": "2043480"
  },
  {
    "text": "table and then assuming I did my job right hopefully we can just start this",
    "start": "2044840",
    "end": "2050919"
  },
  {
    "text": "up on my simulator",
    "start": "2050919",
    "end": "2058878"
  },
  {
    "text": "once again this this code um will will will make available in the same place the same repositories that we have for",
    "start": "2078200",
    "end": "2084280"
  },
  {
    "text": "all of our other samples um it's just going we're going through some cleanup and we want to make sure that we have both an Android sample as well as an iOS",
    "start": "2084280",
    "end": "2091480"
  },
  {
    "text": "sample as uh to to show um how to use this flow",
    "start": "2091480",
    "end": "2097800"
  },
  {
    "text": "so now if I click on login I can click on developer off and if I Supply my",
    "start": "2097800",
    "end": "2103000"
  },
  {
    "text": "username and password that I created",
    "start": "2103000",
    "end": "2106760"
  },
  {
    "text": "before then I can see that this uh credentials provider uh got me new",
    "start": "2108119",
    "end": "2113560"
  },
  {
    "text": "credentials and if I go back to the Cognito",
    "start": "2113560",
    "end": "2117960"
  },
  {
    "text": "console I can now see that I have um a developer authenticated identity so I've",
    "start": "2120160",
    "end": "2125800"
  },
  {
    "text": "I've I've created a new identity um for this user um so I did not link my Facebook",
    "start": "2125800",
    "end": "2132839"
  },
  {
    "text": "identity with this identity but um you could provide both the the Facebook login and your your developer login at",
    "start": "2132839",
    "end": "2140480"
  },
  {
    "text": "the same time and um and Link those two um it's important to note that if you want to do that you need to actually",
    "start": "2140480",
    "end": "2146359"
  },
  {
    "text": "send those tokens up to your backend to include as part of the get open ID token um for developer identity uh and this",
    "start": "2146359",
    "end": "2153839"
  },
  {
    "text": "sample app actually will include that um that code as well so if you need to use that you can do that so that's uh that's",
    "start": "2153839",
    "end": "2161079"
  },
  {
    "text": "developer authenticated",
    "start": "2161079",
    "end": "2164079"
  },
  {
    "start": "2165000",
    "end": "2242000"
  },
  {
    "text": "off um so actually one of the other nice things about developer authenticated identities is you can actually use it to",
    "start": "2167040",
    "end": "2173400"
  },
  {
    "text": "extend Cognito to support any provider that we don't currently support um such as",
    "start": "2173400",
    "end": "2178960"
  },
  {
    "text": "LinkedIn um if the user logs in with LinkedIn gets an uh goes through their ooth flow gets an ooth token you can",
    "start": "2178960",
    "end": "2186560"
  },
  {
    "text": "send that uh your access token to your back end use linkedin's um validation",
    "start": "2186560",
    "end": "2192880"
  },
  {
    "text": "ver or verification service to actually verify that token is valid and then call Cognito with the identity um that that",
    "start": "2192880",
    "end": "2200760"
  },
  {
    "text": "LinkedIn gives you will return back an ID and an open ID token which you can",
    "start": "2200760",
    "end": "2206720"
  },
  {
    "text": "return to your device which then can be passed to STS as part of the assume role with web",
    "start": "2206720",
    "end": "2212800"
  },
  {
    "text": "identity which then is validated with Cognito which then return you aw us",
    "start": "2212800",
    "end": "2218200"
  },
  {
    "text": "credentials um so I know that's a lot of uh a lot of rig role but this is a way",
    "start": "2218200",
    "end": "2223839"
  },
  {
    "text": "that you can actually extend the the platform um to meet your",
    "start": "2223839",
    "end": "2229400"
  },
  {
    "text": "needs and so you can do all of that uh that flow inside of your um your custom",
    "start": "2229400",
    "end": "2235119"
  },
  {
    "text": "identity provider and provide that as part of the um the credentials",
    "start": "2235119",
    "end": "2241039"
  },
  {
    "start": "2242000",
    "end": "2275000"
  },
  {
    "text": "provider um so in conclusion I just wanted the uh highlight that Amazon Amon",
    "start": "2242119",
    "end": "2247760"
  },
  {
    "text": "Cognito the identity portion specifically allows you to follow best practices um for accessing other AWS",
    "start": "2247760",
    "end": "2253920"
  },
  {
    "text": "services from your mobile device it gives your users a nice consistent identifier that travels with them um",
    "start": "2253920",
    "end": "2261079"
  },
  {
    "text": "across all of their logins uh it integrates with any authentication system um with a little additional",
    "start": "2261079",
    "end": "2267040"
  },
  {
    "text": "effort and then we have client SDK support for iOS uh Android JavaScript",
    "start": "2267040",
    "end": "2272520"
  },
  {
    "text": "and we also have more um so if you're interested in finding out more",
    "start": "2272520",
    "end": "2277960"
  },
  {
    "start": "2275000",
    "end": "2348000"
  },
  {
    "text": "uh so we have our AWS uh mobile home which is uh AWS amazon.com/mytv",
    "start": "2277960",
    "end": "2285800"
  },
  {
    "text": "Works We additionally have our Twitter feed AWS for mobile uh currently right now we're mostly just posting uh blog",
    "start": "2297920",
    "end": "2304839"
  },
  {
    "text": "announcements but we're continuing to figure out how to use that channel to engage with customers um if you really want to",
    "start": "2304839",
    "end": "2312079"
  },
  {
    "text": "engage with us the best ways are either via our forms um or stack Overflow uh so",
    "start": "2312079",
    "end": "2318520"
  },
  {
    "text": "uh Amazon employees actually monitor stack Overflow so myself and other Cognito team members uh monitor the",
    "start": "2318520",
    "end": "2325520"
  },
  {
    "text": "Amazon Cognito tag so if you have questions you can ask them there as well as the forums um and then finally all of",
    "start": "2325520",
    "end": "2333000"
  },
  {
    "text": "our sdks are open source and posted on GitHub uh on underneath the AWS uh",
    "start": "2333000",
    "end": "2339200"
  },
  {
    "text": "organization all of our sdks exist and then on our our AWS Labs organization uh",
    "start": "2339200",
    "end": "2344839"
  },
  {
    "text": "we have all of our samples so want to thank you again for",
    "start": "2344839",
    "end": "2350200"
  },
  {
    "start": "2348000",
    "end": "2388000"
  },
  {
    "text": "coming out today um Amazon takes a customer feedback very seriously um so",
    "start": "2350200",
    "end": "2355720"
  },
  {
    "text": "please take uh some time to uh fill out an evaluation it's uh good for me um to",
    "start": "2355720",
    "end": "2361760"
  },
  {
    "text": "make sure that we're make doing good presentations it's also good for the company to make sure that we're producing good content um so please uh",
    "start": "2361760",
    "end": "2368640"
  },
  {
    "text": "take the time to do that I know they're giving out swag for uh filling out some additional um surveys um so that's my",
    "start": "2368640",
    "end": "2376480"
  },
  {
    "text": "talk uh uh I'll actually be up here afterwards if you have additional questions but otherwise uh please enjoy",
    "start": "2376480",
    "end": "2383119"
  },
  {
    "text": "the rest of the conference enjoy replay tonight [Applause]",
    "start": "2383119",
    "end": "2390599"
  }
]