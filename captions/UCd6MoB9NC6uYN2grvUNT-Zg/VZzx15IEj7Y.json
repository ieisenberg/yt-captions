[
  {
    "text": "hi everyone I hope you're enjoying the inaugural reinforced conference everyone",
    "start": "1730",
    "end": "8010"
  },
  {
    "text": "hears me okay all right my name is Erin and I'm a security consultant and a",
    "start": "8010",
    "end": "13710"
  },
  {
    "text": "developer on the Amos jam platform that's the platform that runs the capture the flag a security jam in the",
    "start": "13710",
    "end": "19560"
  },
  {
    "text": "jam lounge in this event in other events by the show bands any of you played with",
    "start": "19560",
    "end": "24660"
  },
  {
    "text": "this with those events at this conference that's very nice that's great thank Reggie we still have another",
    "start": "24660",
    "end": "31920"
  },
  {
    "text": "security Jam at 12:30 so as with everything we build it at AWS and at",
    "start": "31920",
    "end": "38190"
  },
  {
    "text": "Amazon we start with a customer and move backwards and to help customers learn",
    "start": "38190",
    "end": "43379"
  },
  {
    "text": "more about AWS security and Animists in general in a fun way for invent 2016 we",
    "start": "43379",
    "end": "51329"
  },
  {
    "text": "created the security Jam it's a gamified platform we can solve challenges and",
    "start": "51329",
    "end": "57390"
  },
  {
    "text": "learn hands-on so as it grew and we got",
    "start": "57390",
    "end": "62760"
  },
  {
    "text": "good feedback it grew to be a bigger yet to have more more events and more things",
    "start": "62760",
    "end": "69960"
  },
  {
    "text": "happening in parallel we had to build a tool that will manage it in the backend and we wanted to it to be serverless we",
    "start": "69960",
    "end": "77729"
  },
  {
    "text": "want to need to be using our own corporate permissions and groups in",
    "start": "77729",
    "end": "83340"
  },
  {
    "text": "order to handle access control who can create events who could create challenges who can launch events we",
    "start": "83340",
    "end": "89670"
  },
  {
    "text": "wanted to make sure there is a 4i review to all that and in this talk we're going",
    "start": "89670",
    "end": "94680"
  },
  {
    "text": "to talk about some of the best practices and tips we learned as both a debates",
    "start": "94680",
    "end": "100650"
  },
  {
    "text": "employees but also edibles customers ourselves using Amazon kognito and a diverse lambda",
    "start": "100650",
    "end": "107840"
  },
  {
    "text": "so we will I'm not sure if all of you are familiar with Amazon canítö by show",
    "start": "109290",
    "end": "115360"
  },
  {
    "text": "of hands who is familiar with it and okay so that's a lot of hands so I can",
    "start": "115360",
    "end": "121960"
  },
  {
    "text": "probably skip get that part out of the way real relatively quickly will show a",
    "start": "121960",
    "end": "128050"
  },
  {
    "text": "demo of a very simple application that handle that handles access control based",
    "start": "128050",
    "end": "133989"
  },
  {
    "text": "on an external IDP and we will go over the architecture overview and then in",
    "start": "133989",
    "end": "140350"
  },
  {
    "text": "the end we'll deep dive into the code and I know that's probably what's holding between you and lunch so I'll",
    "start": "140350",
    "end": "147519"
  },
  {
    "text": "try to make that interesting and succinct but for those of you are not",
    "start": "147519",
    "end": "152980"
  },
  {
    "text": "developers I still encourage you to stay and for that part because it will help",
    "start": "152980",
    "end": "159130"
  },
  {
    "text": "tie everything in so imagine the",
    "start": "159130",
    "end": "165700"
  },
  {
    "text": "following conversation",
    "start": "165700",
    "end": "169019"
  },
  {
    "text": "anyone heard that kind of exchange probably not right but so even though",
    "start": "173150",
    "end": "183080"
  },
  {
    "text": "that's probably not a realistic feature for an app to just have the ability to",
    "start": "183080",
    "end": "188330"
  },
  {
    "text": "do single sign-on how many of you had the case where you had to develop an application they needed authentication",
    "start": "188330",
    "end": "194780"
  },
  {
    "text": "and authorization pretty pretty pretty much a common requirement but identity",
    "start": "194780",
    "end": "201950"
  },
  {
    "text": "is heavy lifting right you need to do all of those things to make it right",
    "start": "201950",
    "end": "207920"
  },
  {
    "text": "it's not always easy right the store passwords securely hash them solve them and all that it's it's it's",
    "start": "207920",
    "end": "214910"
  },
  {
    "text": "an it's an art it's heavy lifting it's transparent to the users you only know if you did it wrong if something that",
    "start": "214910",
    "end": "221810"
  },
  {
    "text": "happens in addition to that now users expect to be able to log in through",
    "start": "221810",
    "end": "227510"
  },
  {
    "text": "social providers and through external IDPs and you need to handle all that as well",
    "start": "227510",
    "end": "232630"
  },
  {
    "text": "samozang kognito comes into the picture your developers can focus on what differentiates their at your app focus",
    "start": "232630",
    "end": "240410"
  },
  {
    "text": "on the business needs and let Amazon cook need to handle identity Amazon",
    "start": "240410",
    "end": "248810"
  },
  {
    "text": "kognito consists of user pools which is a managed user directory hosted UI its",
    "start": "248810",
    "end": "254720"
  },
  {
    "text": "handles standard tokens and it can handle social and external IDP",
    "start": "254720",
    "end": "260479"
  },
  {
    "text": "Federation and we also have cognitive Amazon cognitive identity pools that can",
    "start": "260479",
    "end": "266389"
  },
  {
    "text": "allow application users to get a diverse I am credentials do the things that",
    "start": "266389",
    "end": "271580"
  },
  {
    "text": "directly with a debate services for example the classic example is uploading an image to s3 directly from your",
    "start": "271580",
    "end": "278210"
  },
  {
    "text": "application without the need to go through back-end",
    "start": "278210",
    "end": "282729"
  },
  {
    "text": "some of the key features quickly on Amazon Cognito user pools it's a service",
    "start": "283430",
    "end": "292280"
  },
  {
    "text": "directory you don't need to manage servers its API driven everything is every access to Amazon Cognito is",
    "start": "292280",
    "end": "299300"
  },
  {
    "text": "through I am right and it's Multi Z it",
    "start": "299300",
    "end": "304639"
  },
  {
    "text": "has another feature that is called groups and it's going to be important for our demo the special thing about",
    "start": "304639",
    "end": "312260"
  },
  {
    "text": "groups is that not only you can arrange your users within groups when kognito is",
    "start": "312260",
    "end": "319490"
  },
  {
    "text": "the source of truth but it's also possible with showing this example to",
    "start": "319490",
    "end": "325250"
  },
  {
    "text": "map an external group from your external IDP for example an l-dub group an ad",
    "start": "325250",
    "end": "330290"
  },
  {
    "text": "group or other attributes into what what we have here in canada a community group",
    "start": "330290",
    "end": "336410"
  },
  {
    "text": "and another benefit of the group claim is that the group claim will be both in",
    "start": "336410",
    "end": "343250"
  },
  {
    "text": "the ID token and the access token so this is helpful in case you want to work",
    "start": "343250",
    "end": "349220"
  },
  {
    "text": "with access tokens and not ID tokens when you make API calls another cool",
    "start": "349220",
    "end": "356330"
  },
  {
    "text": "feature that we liked is the hosted user interface you can build if you want to",
    "start": "356330",
    "end": "361430"
  },
  {
    "text": "allow both several external IDPs and also user name and password you can have",
    "start": "361430",
    "end": "367840"
  },
  {
    "text": "costume UI that you don't have to build yourself you know in the first iteration of the Java platform we built the",
    "start": "367840",
    "end": "374630"
  },
  {
    "text": "customer-facing part was built we built the only way our own UI and it's there's a lot of work to do that to do it right",
    "start": "374630",
    "end": "380720"
  },
  {
    "text": "forgot password verify email and all that this is all handled for you in the",
    "start": "380720",
    "end": "386599"
  },
  {
    "text": "host of UI support for OAuth 2 flows and",
    "start": "386599",
    "end": "393289"
  },
  {
    "text": "we'll focus on the thirds Asian code flow which may surprise some there's a recent internet draft that is",
    "start": "393289",
    "end": "403450"
  },
  {
    "text": "recommending to use the thor's asian code flow even for browser-based apps",
    "start": "403450",
    "end": "408490"
  },
  {
    "text": "and it recommends using a feature called pke or pixie",
    "start": "408490",
    "end": "415620"
  },
  {
    "text": "and in our demo we have that enabled through a product called database",
    "start": "415620",
    "end": "422940"
  },
  {
    "text": "amplify anyone here heard of anybody amplify used it before okay",
    "start": "422940",
    "end": "429980"
  },
  {
    "text": "so the way Federation works you have multiple identity providers all of them",
    "start": "433700",
    "end": "440180"
  },
  {
    "text": "will become a unified user profile so your application developer doesn't need",
    "start": "440180",
    "end": "445190"
  },
  {
    "text": "to worry about where the user came from where the claims came from it's all mapped to a unified set of standard",
    "start": "445190",
    "end": "452150"
  },
  {
    "text": "attributes and you can have the option of adding custom attributes as well the",
    "start": "452150",
    "end": "458060"
  },
  {
    "text": "application receives standard YDC tokens an access token an ID token and a",
    "start": "458060",
    "end": "464540"
  },
  {
    "text": "refresh token optionally in the way this works with Federation users are being",
    "start": "464540",
    "end": "471590"
  },
  {
    "text": "redirected if you know the IDP in advance you can skip that page completely you can go directly to step",
    "start": "471590",
    "end": "477230"
  },
  {
    "text": "step number 3 go directly to the IDP it's gonna be a seamless redirect for",
    "start": "477230",
    "end": "482270"
  },
  {
    "text": "the user you can land on the IDP now if your IDPs or the user is already signed in to the domain they login to the",
    "start": "482270",
    "end": "489110"
  },
  {
    "text": "laptop they will immediately redirect back with the sam'l response and then cognitive will map this sam'l response to the",
    "start": "489110",
    "end": "496790"
  },
  {
    "text": "profile and then you're going to have a chance there is a trigger that we're going to show that allows you to modify",
    "start": "496790",
    "end": "502930"
  },
  {
    "text": "how this mapping happens if it's not just the one to one mapping attribute to a tree but if you want to do some more",
    "start": "502930",
    "end": "508630"
  },
  {
    "text": "logic around it you can map you can use the lambda that will show later to make that more more customized and then the",
    "start": "508630",
    "end": "518210"
  },
  {
    "text": "application received the toggles receive the tokens and every API call is going to use those either ID token or access",
    "start": "518210",
    "end": "523789"
  },
  {
    "text": "token for for making API calls and in the application the claims of the token",
    "start": "523790",
    "end": "530480"
  },
  {
    "text": "can be used to make decisions about the Third's Asia another thing we liked about working",
    "start": "530480",
    "end": "537980"
  },
  {
    "text": "with Amazon canítö is it has built-in integration with a lot of other other services for example Amazon API gateway",
    "start": "537980",
    "end": "544970"
  },
  {
    "text": "and also recently this application load balancer it's a great integration for",
    "start": "544970",
    "end": "550670"
  },
  {
    "text": "different types of apps I would say for for api gateway if you have a fully",
    "start": "550670",
    "end": "556520"
  },
  {
    "text": "hundred-percent single page application everything is just JavaScript and HTML",
    "start": "556520",
    "end": "562550"
  },
  {
    "text": "and static assets sitting on s3 then this is a classic for using finito with the API gateway if",
    "start": "562550",
    "end": "571150"
  },
  {
    "text": "you have a more classic app we're using a cookie to preserve a session but you still want your application to work with",
    "start": "571150",
    "end": "576760"
  },
  {
    "text": "Boyd DC tokens then the application will balancer is a great solution for that as",
    "start": "576760",
    "end": "582820"
  },
  {
    "text": "well we will focus in this talk more about the API gateway integration there",
    "start": "582820",
    "end": "589540"
  },
  {
    "text": "are other services that integrate with like UNITA as well and and more coming every time all right so",
    "start": "589540",
    "end": "600900"
  },
  {
    "text": "without further ado I'm going to do a quick demo of what we're going to",
    "start": "600900",
    "end": "606290"
  },
  {
    "text": "right",
    "start": "617209",
    "end": "620139"
  },
  {
    "text": "okay so to demonstrate that they build a very very basic application that is",
    "start": "626100",
    "end": "634980"
  },
  {
    "text": "using single sign-on to to demonstrate what we talked about right now in this",
    "start": "634980",
    "end": "642210"
  },
  {
    "text": "case I'm going to show two to two bought two bottoms here one of them is going to",
    "start": "642210",
    "end": "647910"
  },
  {
    "text": "show me the hosted UI okay I didn't customize that this is how it goes out",
    "start": "647910",
    "end": "654420"
  },
  {
    "text": "of the box but I can add logos change the colors and all that in this case I chose to enable an ID in external IDP in",
    "start": "654420",
    "end": "663180"
  },
  {
    "text": "this case a music actor or users can also login with username and password this is for perhaps an application that",
    "start": "663180",
    "end": "669030"
  },
  {
    "text": "supports both internal users and also external users just like we have for the for the jam platform alternatively let's",
    "start": "669030",
    "end": "677430"
  },
  {
    "text": "say it's only intended for internal users like it will show you the code later on bypassing the identity provider",
    "start": "677430",
    "end": "685200"
  },
  {
    "text": "name you can skip that page if it's not relevant to save some clicks but the users and they can just go directly so",
    "start": "685200",
    "end": "693690"
  },
  {
    "text": "what happens behind the scene it goes to Cognito and then immediately redirects to the today DP in this case we're going",
    "start": "693690",
    "end": "700530"
  },
  {
    "text": "to login",
    "start": "700530",
    "end": "703160"
  },
  {
    "text": "as Bob [Music]",
    "start": "710070",
    "end": "715129"
  },
  {
    "text": "all right and again sorry for the it's not vr a meeting room application that's",
    "start": "718650",
    "end": "724860"
  },
  {
    "text": "gonna be probably the next iteration but just to demonstrate this is an application user that came from octa and",
    "start": "724860",
    "end": "732140"
  },
  {
    "text": "just for demonstration purposes I'm displaying here there maybe I'll make it",
    "start": "732140",
    "end": "738270"
  },
  {
    "text": "a little bit bigger I'm displaying there octa group okay there are a general user",
    "start": "738270",
    "end": "744960"
  },
  {
    "text": "from the pet store and the authorization logic behind that user is that they can",
    "start": "744960",
    "end": "751430"
  },
  {
    "text": "only see pets that they own okay if you",
    "start": "751430",
    "end": "757860"
  },
  {
    "text": "try to create a pet with a different owner that they'll fill and now we'll go to in this case I already logged in in a",
    "start": "757860",
    "end": "768810"
  },
  {
    "text": "different session with user named Alice and she has two LDAP groups or octa",
    "start": "768810",
    "end": "775920"
  },
  {
    "text": "groups associated with her user and she's an admin therefore she can see all",
    "start": "775920",
    "end": "782910"
  },
  {
    "text": "the other users items so this is not just general access control it's also",
    "start": "782910",
    "end": "788820"
  },
  {
    "text": "more of a role level security based on their external IDP credentials the",
    "start": "788820",
    "end": "794160"
  },
  {
    "text": "external IDP entitlements and I just",
    "start": "794160",
    "end": "800190"
  },
  {
    "text": "enabled other features such as you can update",
    "start": "800190",
    "end": "806000"
  },
  {
    "text": "and I can also update",
    "start": "807860",
    "end": "811730"
  },
  {
    "text": "all right so",
    "start": "815010",
    "end": "822250"
  },
  {
    "text": "all right so we're gonna move on to",
    "start": "825810",
    "end": "830990"
  },
  {
    "text": "talking about the architecture of all this real quick",
    "start": "833629",
    "end": "839240"
  },
  {
    "text": "all right so what work whatever bill how did we",
    "start": "851110",
    "end": "857730"
  },
  {
    "text": "build this and before I want to deep dive into that I want to talk about the",
    "start": "857730",
    "end": "864270"
  },
  {
    "text": "concept of where hand worked where do you want to handle access control on the",
    "start": "864270",
    "end": "870090"
  },
  {
    "text": "application level so there are several ways to do that one of them is policy",
    "start": "870090",
    "end": "877530"
  },
  {
    "text": "based you can use for example I am policies can control APA gateway access",
    "start": "877530",
    "end": "885690"
  },
  {
    "text": "batteries you can decide that this user role will only do a get on this path",
    "start": "885690",
    "end": "891000"
  },
  {
    "text": "pattern and the more powerful user will have post put and delete on a larger",
    "start": "891000",
    "end": "897930"
  },
  {
    "text": "more general it had will have more stars in it pattern okay so you can do that as",
    "start": "897930",
    "end": "903540"
  },
  {
    "text": "well this is great in my opinion for API to API access the benefits of its its",
    "start": "903540",
    "end": "910770"
  },
  {
    "text": "centralized it's the clarity of its role base another way to do that is",
    "start": "910770",
    "end": "916320"
  },
  {
    "text": "interceptor based for example a peg gateway has a feature called lambda custom authorizers before any request is",
    "start": "916320",
    "end": "924830"
  },
  {
    "text": "getting in the lambda will be triggered will look at the request will decide will generate the policy on the fly",
    "start": "924830",
    "end": "931350"
  },
  {
    "text": "that will decide whether to allow that or not and this is great if you want to",
    "start": "931350",
    "end": "936750"
  },
  {
    "text": "have a coarse grained external layered security level of protection before your",
    "start": "936750",
    "end": "944310"
  },
  {
    "text": "before before any request is coming in now both of those have been discussed",
    "start": "944310",
    "end": "949350"
  },
  {
    "text": "and there are a lot of examples and a lot of talks that discussed those two options both of them are part of the",
    "start": "949350",
    "end": "955770"
  },
  {
    "text": "options when you choose how to authorize api gateway calls and i want to talk",
    "start": "955770",
    "end": "960840"
  },
  {
    "text": "about the third one which is a layered security approach where the authorization logic is going to be in",
    "start": "960840",
    "end": "967080"
  },
  {
    "text": "your application code and the toobut to benefits in my opinion in here are you",
    "start": "967080",
    "end": "974580"
  },
  {
    "text": "can have access to domain objects that are not always accessible to an external",
    "start": "974580",
    "end": "979790"
  },
  {
    "text": "authorization layer and even if you were able to make them available it's not always making sense",
    "start": "979790",
    "end": "986740"
  },
  {
    "text": "in terms of data border lines between layers you don't always want to expose",
    "start": "986740",
    "end": "992800"
  },
  {
    "text": "your internal data to external Thurs a shin layer so this is again this is defensive in depth there's no one option",
    "start": "992800",
    "end": "1001680"
  },
  {
    "text": "that is the best usually it's a combination of several options that we're going to focus on the last one",
    "start": "1001680",
    "end": "1008269"
  },
  {
    "text": "another great feature that I found very useful is that when I do this I'm able",
    "start": "1008269",
    "end": "1014310"
  },
  {
    "text": "to test authorization logic offline regardless of where is it's running it can run on my laptop",
    "start": "1014310",
    "end": "1019980"
  },
  {
    "text": "it's decoupled from anything else and I can make sure that the Thora's Asian logic is sound so then we're going to",
    "start": "1019980",
    "end": "1027120"
  },
  {
    "text": "show a little bit of how those unit tests look like I mean the concept of",
    "start": "1027120",
    "end": "1033380"
  },
  {
    "text": "authorization being a little bit of business logic is not something I made up it's it's just one approach",
    "start": "1033380",
    "end": "1042260"
  },
  {
    "text": "so how is it how everything is tied together and we'll go over the code and we'll go over the console again the",
    "start": "1047450",
    "end": "1053840"
  },
  {
    "text": "purpose is not to bore you with a thousand slides but this is this is the main technique that we used outside of",
    "start": "1053840",
    "end": "1064060"
  },
  {
    "text": "the scope of our application in the IDP we map held up groups to sam'l",
    "start": "1064060",
    "end": "1070310"
  },
  {
    "text": "attributes in octa I'm doing it by assigning everything that starts with a",
    "start": "1070310",
    "end": "1077120"
  },
  {
    "text": "pet app will be will be mapped to those",
    "start": "1077120",
    "end": "1083630"
  },
  {
    "text": "samos attributes I don't wanna send all of the l-dub groups that the user is part of to my application so I take a",
    "start": "1083630",
    "end": "1089780"
  },
  {
    "text": "very small subset that is interesting it's very interesting for my app okay so that's done in octa i can show you",
    "start": "1089780",
    "end": "1095780"
  },
  {
    "text": "how it's done there can be similarly done with other oddities then the sam'l attribute is being mapped",
    "start": "1095780",
    "end": "1101060"
  },
  {
    "text": "into just in time user profile within amazon kognito it will either be created",
    "start": "1101060",
    "end": "1107030"
  },
  {
    "text": "or updated when you do this Federation this user profile using a lambda trigger",
    "start": "1107030",
    "end": "1112520"
  },
  {
    "text": "that will show later you can map those attributes into groups and optionally",
    "start": "1112520",
    "end": "1117530"
  },
  {
    "text": "even two roles this will go into a JWT JWT token a set of three tokens the ID",
    "start": "1117530",
    "end": "1124940"
  },
  {
    "text": "the access and the refresh tokens and then it will go to the app address",
    "start": "1124940",
    "end": "1130760"
  },
  {
    "text": "amplify will use that to make calls to a PA gateway a PA gateway will",
    "start": "1130760",
    "end": "1137420"
  },
  {
    "text": "automatically validate those tokens that they're the signature is correct that we're not tampered with the user didn't",
    "start": "1137420",
    "end": "1144440"
  },
  {
    "text": "add some claims to it that they're not supposed to this will go to our back-end app and in our back-end app will show",
    "start": "1144440",
    "end": "1152120"
  },
  {
    "text": "how we take those roles groups those groups claims and make a decision whether to allow or deny in a more of a",
    "start": "1152120",
    "end": "1160820"
  },
  {
    "text": "flow we have a twist amplifying that is used to save you the work needed to",
    "start": "1160820",
    "end": "1167390"
  },
  {
    "text": "handle all those redirects to redirect to logout to log in to capture the",
    "start": "1167390",
    "end": "1172910"
  },
  {
    "text": "authorization code when it comes in to hide it from the URL so it's not standing staying there when you bookmark",
    "start": "1172910",
    "end": "1179370"
  },
  {
    "text": "or and things like that mmm all with a few lines of code then the IDP will",
    "start": "1179370",
    "end": "1186240"
  },
  {
    "text": "authenticate and send a sam'l response that we showed before Cognito will handle the sam'l response for you so you",
    "start": "1186240",
    "end": "1192660"
  },
  {
    "text": "don't have to do that it will map the user attributes the lambda hook we'll we'll do that assignment the signed",
    "start": "1192660",
    "end": "1199470"
  },
  {
    "text": "tokens are going to be returned amplified we store those tokens and we'll handle refreshes as well so you",
    "start": "1199470",
    "end": "1205050"
  },
  {
    "text": "don't have to keep refreshing those talking to ourselves it's gonna be done for you the client app can make a call",
    "start": "1205050",
    "end": "1212790"
  },
  {
    "text": "to protected API and you're gonna pass the token as part of the authorization",
    "start": "1212790",
    "end": "1218010"
  },
  {
    "text": "header and then hmm Amazon API gateway using the cost of the user pool authorizer that will show",
    "start": "1218010",
    "end": "1224130"
  },
  {
    "text": "later it will validate the dead body token for you to make sure it hasn't been changed and didn't expire and we'll",
    "start": "1224130",
    "end": "1230730"
  },
  {
    "text": "pass it to the lambda including the token claims the application code we read it read the group's claims and make",
    "start": "1230730",
    "end": "1237420"
  },
  {
    "text": "a decision so it sounds in perhaps it sounds simple perhaps but it took us a",
    "start": "1237420",
    "end": "1245190"
  },
  {
    "text": "while to get into that pattern and I'll go into a little bit of a deeper dive on",
    "start": "1245190",
    "end": "1252810"
  },
  {
    "text": "the code and a little bit on the console",
    "start": "1252810",
    "end": "1258990"
  },
  {
    "text": "to show you the architecture through the console",
    "start": "1258990",
    "end": "1264740"
  },
  {
    "text": "by the way the code is going to be available on github and there's gonna be a link in the Kanda at the end of the",
    "start": "1286710",
    "end": "1294840"
  },
  {
    "text": "presentation",
    "start": "1294840",
    "end": "1297320"
  },
  {
    "text": "all right so the first thing I want to show is",
    "start": "1301240",
    "end": "1308670"
  },
  {
    "text": "this is for example the the implementation of the path to get all",
    "start": "1311270",
    "end": "1319580"
  },
  {
    "text": "pets this is an Express j/s code for",
    "start": "1319580",
    "end": "1325159"
  },
  {
    "text": "those of you are not familiar with Express je s or with with typescript this is a typescript it's a superset of",
    "start": "1325159",
    "end": "1331940"
  },
  {
    "text": "JavaScript that offers static typing and everything in this repo is going to use",
    "start": "1331940",
    "end": "1337370"
  },
  {
    "text": "typescript and in this case we see the implementation of the backend code that",
    "start": "1337370",
    "end": "1345020"
  },
  {
    "text": "handles the get all pets request and",
    "start": "1345020",
    "end": "1350169"
  },
  {
    "text": "what happens is that I added through a middleware an attribute called groups",
    "start": "1350169",
    "end": "1358250"
  },
  {
    "text": "it's a set all you need to do is to check if the user has this claim if they",
    "start": "1358250",
    "end": "1366890"
  },
  {
    "text": "have this claim we're going to give them all the pets their admins otherwise",
    "start": "1366890",
    "end": "1372320"
  },
  {
    "text": "we're going to give them pets by owner so this is a little bit of row level security security implementation and",
    "start": "1372320",
    "end": "1379190"
  },
  {
    "text": "you'll see if you look at the repo you'll see other methods implemented in a similar way and all of this is",
    "start": "1379190",
    "end": "1388610"
  },
  {
    "text": "happening thanks to a very simple middleware that I'll show later because",
    "start": "1388610",
    "end": "1393710"
  },
  {
    "text": "it's a little bit gonna be a little deeper dive but I'll show it later and I can go over how it's working and this is",
    "start": "1393710",
    "end": "1401860"
  },
  {
    "text": "this is this is what injects that request inside all right",
    "start": "1401860",
    "end": "1409600"
  },
  {
    "text": "now we'll skip a little bit to the front end",
    "start": "1411550",
    "end": "1415860"
  },
  {
    "text": "so I'm usually writing in angular and I decided for some reason to try it in react so if you look at this and it's",
    "start": "1423450",
    "end": "1428520"
  },
  {
    "text": "not hideo Matic react code so it's my you know my apology and you're more than",
    "start": "1428520",
    "end": "1434430"
  },
  {
    "text": "free to open issues and send pull requests to make it better so I apologize if it's a for those of you who",
    "start": "1434430",
    "end": "1443460"
  },
  {
    "text": "are react developers for butchering reacts for this demo and we'll look at",
    "start": "1443460",
    "end": "1450240"
  },
  {
    "text": "the main components",
    "start": "1450240",
    "end": "1453590"
  },
  {
    "text": "in this case",
    "start": "1459399",
    "end": "1462210"
  },
  {
    "text": "so this is how I'm making a request I'm going to ask from this is amplifying the",
    "start": "1476280",
    "end": "1483810"
  },
  {
    "text": "auth object is from amplifying I'm getting the current session and I'm",
    "start": "1483810",
    "end": "1490530"
  },
  {
    "text": "passing the current access token as part of the request this this can be done in",
    "start": "1490530",
    "end": "1497010"
  },
  {
    "text": "a nicer way probably when use angular or other or in react when you use other",
    "start": "1497010",
    "end": "1503250"
  },
  {
    "text": "interceptors this is just to make a very explicit example of how it can be done",
    "start": "1503250",
    "end": "1509780"
  },
  {
    "text": "all you need to do is pass the Thor zation header to the as when you make a",
    "start": "1509780",
    "end": "1515310"
  },
  {
    "text": "request then",
    "start": "1515310",
    "end": "1520490"
  },
  {
    "text": "let's say you have a UI and you want to hide certain things that the the user doesn't have access to for example an",
    "start": "1524710",
    "end": "1531730"
  },
  {
    "text": "admin tab or something like that it's not enforcing authorization but you want",
    "start": "1531730",
    "end": "1536740"
  },
  {
    "text": "to make an optimistic UI you want to make sure that user don't see things that they cannot use so just like you",
    "start": "1536740",
    "end": "1542710"
  },
  {
    "text": "could get those claims in the backend you can also get them in the front end and to do that",
    "start": "1542710",
    "end": "1552480"
  },
  {
    "text": "I created a little helper class called user it will get the cognitive user from",
    "start": "1554019",
    "end": "1559720"
  },
  {
    "text": "amplifying so you don't need to generate the cognitive user object it's it's going to be provided to you from from",
    "start": "1559720",
    "end": "1567279"
  },
  {
    "text": "amplify I'll show you later and to get the information about which groups the",
    "start": "1567279",
    "end": "1573879"
  },
  {
    "text": "user is part of that's all you need basically have all that as part of the",
    "start": "1573879",
    "end": "1583029"
  },
  {
    "text": "of the user session and all of this is has right will show the unit test in a",
    "start": "1583029",
    "end": "1593019"
  },
  {
    "text": "minute all right and then how do I use that I can use that to display those",
    "start": "1593019",
    "end": "1599409"
  },
  {
    "text": "groups and in this case I'm just displaying them on the screen in addition I can show the user name in my",
    "start": "1599409",
    "end": "1605409"
  },
  {
    "text": "case I want to show the first name I don't want to show the full email so all I do is user claims the get claims dot",
    "start": "1605409",
    "end": "1612429"
  },
  {
    "text": "name so the same claims both in the backend and the front-end and I want to",
    "start": "1612429",
    "end": "1620049"
  },
  {
    "text": "see if there's anything else on my show in the front-end yes so this is using as",
    "start": "1620049",
    "end": "1627730"
  },
  {
    "text": "I said it's using amplifying so in order to enable all this complex flow of",
    "start": "1627730",
    "end": "1635379"
  },
  {
    "text": "getting back through zation code storing it making a call to get the tokens from",
    "start": "1635379",
    "end": "1641470"
  },
  {
    "text": "the authorization code it's handled for you all we need to do is listen to an event from from the amplify hub if the",
    "start": "1641470",
    "end": "1648279"
  },
  {
    "text": "user is signed in this is how we get the user I just pass it in if there's a",
    "start": "1648279",
    "end": "1654309"
  },
  {
    "text": "failure I make sure that I clean up the user States and this is for listening",
    "start": "1654309",
    "end": "1662230"
  },
  {
    "text": "for events and when the page loads I get the community user from from this method call that's basically all the code I",
    "start": "1662230",
    "end": "1668379"
  },
  {
    "text": "needed to add to the front end to make this all work together ok and now to the",
    "start": "1668379",
    "end": "1677440"
  },
  {
    "text": "secret sauce",
    "start": "1677440",
    "end": "1679980"
  },
  {
    "text": "so we want to go into",
    "start": "1697960",
    "end": "1701610"
  },
  {
    "text": "so this is the lambda that is making this mapping happen okay",
    "start": "1706930",
    "end": "1714150"
  },
  {
    "text": "so this is this is a little bit may need some explanation but in general there is",
    "start": "1715760",
    "end": "1722660"
  },
  {
    "text": "a there's a documented page in our documentation that shows what needs what",
    "start": "1722660",
    "end": "1728030"
  },
  {
    "text": "is the request format and what is the output the response format for this lambda and all you need to do is to",
    "start": "1728030",
    "end": "1736040"
  },
  {
    "text": "return the structure okay and this is why I provided it already created an example so you don't have to worry about",
    "start": "1736040",
    "end": "1741680"
  },
  {
    "text": "that but a little bit about what it's doing so it will take an existing user",
    "start": "1741680",
    "end": "1747680"
  },
  {
    "text": "attribute a custom user attribute and then we'll parse it so that it's instead",
    "start": "1747680",
    "end": "1758390"
  },
  {
    "text": "of a list of comma delimited group names this is how it usually comes back in the some response you have square brackets",
    "start": "1758390",
    "end": "1764900"
  },
  {
    "text": "and then the group names it will parse it and make it into an array in the",
    "start": "1764900",
    "end": "1770330"
  },
  {
    "text": "token that's basically all this code is doing is taking a list of strings splitting it and putting it in an array",
    "start": "1770330",
    "end": "1776240"
  },
  {
    "text": "and then it's hiding that attribute we used to make all that the mapped attribute it's in gonna just hide it we",
    "start": "1776240",
    "end": "1783080"
  },
  {
    "text": "don't need to have both the groups as an array and as has a custom attribute so",
    "start": "1783080",
    "end": "1792770"
  },
  {
    "text": "we're suppressing that attribute name okay and that's that's about it that's about",
    "start": "1792770",
    "end": "1799260"
  },
  {
    "text": "the the the pre token generation lambda",
    "start": "1799260",
    "end": "1804800"
  },
  {
    "text": "and we'll revisit it when we go through the console to show how that was built and this is basically the main component",
    "start": "1804800",
    "end": "1815700"
  },
  {
    "text": "components of the application in the house so the question can be how is all",
    "start": "1815700",
    "end": "1821280"
  },
  {
    "text": "that built do we go and create it in the console do we need to run a cloud formation stack and the answer is",
    "start": "1821280",
    "end": "1829190"
  },
  {
    "text": "neither there is a new feature called cdk which is in developer preview that",
    "start": "1829190",
    "end": "1837720"
  },
  {
    "text": "allows me to really use code to create infrastructure it's really",
    "start": "1837720",
    "end": "1843600"
  },
  {
    "text": "infrastructure as code not just the ml file or an XML file it's it's it's actual code in this case I'm using",
    "start": "1843600",
    "end": "1848820"
  },
  {
    "text": "typescript so the entire repo is using the same the same language and I want to show some interesting some some things",
    "start": "1848820",
    "end": "1857520"
  },
  {
    "text": "that you might find beneficial in that repo that can save a lot of time",
    "start": "1857520",
    "end": "1863030"
  },
  {
    "text": "who starts by creating the user pool so",
    "start": "1864120",
    "end": "1869610"
  },
  {
    "text": "insyndicate anything has their 2.2 types of constructs there is a low-level",
    "start": "1869610",
    "end": "1875580"
  },
  {
    "text": "CloudFormation construct that is very similar to the way you would see it in",
    "start": "1875580",
    "end": "1881760"
  },
  {
    "text": "cloud formation same attributes same structure more or less replicating what you have in cloud formation only in a",
    "start": "1881760",
    "end": "1887310"
  },
  {
    "text": "more in a different language and in either in JavaScript typescript in in Java and other languages in this",
    "start": "1887310",
    "end": "1896010"
  },
  {
    "text": "case I'm creating a user pool and I'm",
    "start": "1896010",
    "end": "1902000"
  },
  {
    "text": "there's nothing special about that construct I'm also creating two tables",
    "start": "1902000",
    "end": "1907350"
  },
  {
    "text": "in this case I'm creating the table to hold the pets and also a table for some",
    "start": "1907350",
    "end": "1913470"
  },
  {
    "text": "information about the users I'm not going to store any any personal",
    "start": "1913470",
    "end": "1918960"
  },
  {
    "text": "information there I want to have that stored incognito but I want to store other things for example if the user",
    "start": "1918960",
    "end": "1924900"
  },
  {
    "text": "wanted to do a sign out and sign out of all other devices I'm storing that",
    "start": "1924900",
    "end": "1930150"
  },
  {
    "text": "timestamp there and if I get a token that was created before that timestamp I",
    "start": "1930150",
    "end": "1935850"
  },
  {
    "text": "know that token is no longer no longer relevant so I just reject it it's kind",
    "start": "1935850",
    "end": "1940890"
  },
  {
    "text": "of a way to make sure that that token is immediately no longer valid",
    "start": "1940890",
    "end": "1949730"
  },
  {
    "text": "then the API function this is this is my lambda function which is pointing to to",
    "start": "1951300",
    "end": "1958670"
  },
  {
    "text": "my other folder where that API function you saw before I'm passing some",
    "start": "1958670",
    "end": "1965040"
  },
  {
    "text": "environment variables so I don't have anything hard-coded in that in that function",
    "start": "1965040",
    "end": "1971720"
  },
  {
    "text": "and this is interesting that's another cool feature I really liked that instead",
    "start": "1973850",
    "end": "1981710"
  },
  {
    "text": "of making sometimes error-prone changes to to the IM policy with cdk i was just",
    "start": "1981710",
    "end": "1991520"
  },
  {
    "text": "able to let the items table grant access to the lambda and it will generate just",
    "start": "1991520",
    "end": "1998540"
  },
  {
    "text": "the right I am policy for the API function to be able to access that table and so this is",
    "start": "1998540",
    "end": "2008650"
  },
  {
    "text": "for as I said there are two types of items in cdk one of them is a low level",
    "start": "2008650",
    "end": "2014580"
  },
  {
    "text": "everything that starts with C FN it's exactly like it is in CloudFormation and",
    "start": "2014580",
    "end": "2020530"
  },
  {
    "text": "there are high level constructs that's build on top of that to make perhaps an",
    "start": "2020530",
    "end": "2026710"
  },
  {
    "text": "easier higher level of access to those resources so for those resources you can",
    "start": "2026710",
    "end": "2033700"
  },
  {
    "text": "have those cool methods like grant right dad's a grant 3 data or grant full",
    "start": "2033700",
    "end": "2039430"
  },
  {
    "text": "access for if you want to create a little bit more elaborate policy you can",
    "start": "2039430",
    "end": "2045430"
  },
  {
    "text": "do that as well using a domain-specific language right here I'm doing the global",
    "start": "2045430",
    "end": "2054070"
  },
  {
    "text": "sign out from the back end instead of the front end so I need to provide permission for that",
    "start": "2054070",
    "end": "2059190"
  },
  {
    "text": "this is the authorizer this is the the configuration that tells APA gateway to",
    "start": "2062990",
    "end": "2069559"
  },
  {
    "text": "look for that token for an access token in the incoming request and do that automatic validation for us okay",
    "start": "2069559",
    "end": "2078398"
  },
  {
    "text": "so yeah as you can see here I'm capturing all the requests for this example I'm just capturing all the requests and just passing them to my",
    "start": "2083560",
    "end": "2089230"
  },
  {
    "text": "lambda ml and letting that my lambda - to handle that I'm adding course options",
    "start": "2089230",
    "end": "2097510"
  },
  {
    "text": "that's another cool thing about cdk where I can I can have I can use",
    "start": "2097510",
    "end": "2104350"
  },
  {
    "text": "utilities and import other classes that I can reuse so instead of having large very large far as I can just import from",
    "start": "2104350",
    "end": "2111760"
  },
  {
    "text": "your my local and NPM repository things that other teams have created in this",
    "start": "2111760",
    "end": "2117400"
  },
  {
    "text": "case it's going to create a course configuration that is locked to my specific domain so you know to recommend",
    "start": "2117400",
    "end": "2124840"
  },
  {
    "text": "it to make sure you don't use star for course so that's doing that for me",
    "start": "2124840",
    "end": "2130500"
  },
  {
    "text": "that's the pre token generation Lander and",
    "start": "2130500",
    "end": "2135000"
  },
  {
    "text": "and here I want to show you something interesting that probably can save you a lot of time there's sometimes things in",
    "start": "2139340",
    "end": "2145640"
  },
  {
    "text": "CloudFormation that are not yet available that are available in the console so to to handle that there's a",
    "start": "2145640",
    "end": "2154880"
  },
  {
    "text": "concept called custom resources in cloud formation and with cdk it's very easy to to create",
    "start": "2154880",
    "end": "2160940"
  },
  {
    "text": "those custom constructs and then to make life easy i created custom constructs",
    "start": "2160940",
    "end": "2166790"
  },
  {
    "text": "for anything any small thing missing in platform in incognito in order to make",
    "start": "2166790",
    "end": "2172520"
  },
  {
    "text": "sure that everything is in code you don't have to do anything in the console so all those constructs has been created they are part of the repo one example is",
    "start": "2172520",
    "end": "2179780"
  },
  {
    "text": "that pre token generation construct all",
    "start": "2179780",
    "end": "2184970"
  },
  {
    "text": "I have to do is pass the user pool and the lambda and it will make that connection between them the attribute",
    "start": "2184970",
    "end": "2193160"
  },
  {
    "text": "mapping that we talked about is being defined here and I'll show later how it looks like in the console after I run",
    "start": "2193160",
    "end": "2198350"
  },
  {
    "text": "this deploy after I deploy it I met email to email a family name last name",
    "start": "2198350",
    "end": "2204980"
  },
  {
    "text": "from octave we'll go into family name and so on and the group this is the",
    "start": "2204980",
    "end": "2211310"
  },
  {
    "text": "important part the group's claim will be mapped from the group's attribute from",
    "start": "2211310",
    "end": "2218480"
  },
  {
    "text": "octet will be mapped into a custom attribute in Camino this died EP",
    "start": "2218480",
    "end": "2224000"
  },
  {
    "text": "settings all you need to provide is the meta data URL and all of this basically",
    "start": "2224000",
    "end": "2231950"
  },
  {
    "text": "be be set up",
    "start": "2231950",
    "end": "2235510"
  },
  {
    "text": "and it can support any provided type in this case I'm using octa and a sam'l provider this is the apt line settings",
    "start": "2239340",
    "end": "2249200"
  },
  {
    "text": "so I can the callback URL and logout URL is being set here the Scopes that are",
    "start": "2249200",
    "end": "2256110"
  },
  {
    "text": "allowed for that app client and I'm use I'm choosing the authorization code flow rate here I can set up the community",
    "start": "2256110",
    "end": "2265350"
  },
  {
    "text": "domain so part of the very few configuration that you need to pass for this to work you need to tell it which",
    "start": "2265350",
    "end": "2271370"
  },
  {
    "text": "prefix you want to use for the domain and I know that was long and thank you",
    "start": "2271370",
    "end": "2279510"
  },
  {
    "text": "for your patience but that's that's basically the entire infrastructure and the rest is being outputs as output",
    "start": "2279510",
    "end": "2286830"
  },
  {
    "text": "variables and in order to to deploy this so some",
    "start": "2286830",
    "end": "2299050"
  },
  {
    "text": "commands that you may find in the repo that can be useful one of them is a synth",
    "start": "2299050",
    "end": "2305609"
  },
  {
    "text": "so THC is basically compiling typescript to JavaScript and this is the cloud",
    "start": "2320800",
    "end": "2326410"
  },
  {
    "text": "formation has been generated from all that I don't know about you but I prefer",
    "start": "2326410",
    "end": "2333180"
  },
  {
    "text": "not having to write all that by hand even though it's readable and idiomatic",
    "start": "2333180",
    "end": "2340480"
  },
  {
    "text": "and it can be you can use that if you have a requirement to only use",
    "start": "2340480",
    "end": "2345790"
  },
  {
    "text": "CloudFormation you can use that output and then deploy it alternatively another",
    "start": "2345790",
    "end": "2352900"
  },
  {
    "text": "interesting feature before you show how it's deployed is DIF which is another",
    "start": "2352900",
    "end": "2357910"
  },
  {
    "text": "feature I liked in this case it won't show a lot of difference but if I go and change for example",
    "start": "2357910",
    "end": "2367650"
  },
  {
    "text": "something in the code",
    "start": "2368500",
    "end": "2371940"
  },
  {
    "text": "so in this case yeah let me let me run it again now with after I made a small change let's hope that change will catch",
    "start": "2388640",
    "end": "2394070"
  },
  {
    "text": "it will basically show you a difference between what was deployed and what you have right now in the stack before you",
    "start": "2394070",
    "end": "2400250"
  },
  {
    "text": "do the deployment that I find is a very interesting feature to make for me to make a sanity test to make sure I know",
    "start": "2400250",
    "end": "2405860"
  },
  {
    "text": "what is being deployed or not",
    "start": "2405860",
    "end": "2408940"
  },
  {
    "text": "all right so it will show me exactly that's my stack the lambda function",
    "start": "2416030",
    "end": "2422270"
  },
  {
    "text": "stack name was was changed in it and I'm gonna go with a little bit of a leap of faith and deploy it and we'll do other",
    "start": "2422270",
    "end": "2432140"
  },
  {
    "text": "things while it's being deployed",
    "start": "2432140",
    "end": "2435099"
  },
  {
    "text": "now it's running some unit tests which I'll show in a minute in a minute let's",
    "start": "2444910",
    "end": "2452890"
  },
  {
    "text": "hope I didn't break anything in the meantime",
    "start": "2452890",
    "end": "2456000"
  },
  {
    "text": "right all test passed they'll test make sure that what I think",
    "start": "2458260",
    "end": "2465869"
  },
  {
    "text": "I'm doing with authorization is actually happening",
    "start": "2465869",
    "end": "2470420"
  },
  {
    "text": "alright then now he's going to start deploying",
    "start": "2474690",
    "end": "2478369"
  },
  {
    "text": "okay by the way why is deploying when you",
    "start": "2480150",
    "end": "2487140"
  },
  {
    "text": "look at the repo and you want to see how those",
    "start": "2487140",
    "end": "2491088"
  },
  {
    "text": "I I wrote yeah no cdks it's not something I wrote this example yes yeah",
    "start": "2494410",
    "end": "2501130"
  },
  {
    "text": "I wrote it yeah",
    "start": "2501130",
    "end": "2504029"
  },
  {
    "text": "oh yeah that's something I can optimize look the TSC to make a differential yeah yeah okay question yeah are we ready",
    "start": "2510570",
    "end": "2516900"
  },
  {
    "text": "after for you no more deep dive on that so a little bit about how I created",
    "start": "2516900",
    "end": "2527580"
  },
  {
    "text": "those costs and resources while it's being while it's deploying so I created a an interface and after class that you",
    "start": "2527580",
    "end": "2534180"
  },
  {
    "text": "can extend create other custom resources you just need to implement on create on updating on deletes and for example I",
    "start": "2534180",
    "end": "2544110"
  },
  {
    "text": "can show the the custom domain",
    "start": "2544110",
    "end": "2550100"
  },
  {
    "text": "so this is that this is my lambda I just implement on create and on delete and",
    "start": "2551299",
    "end": "2556969"
  },
  {
    "text": "I'm just using regular API calls to create delete and update the resource",
    "start": "2556969",
    "end": "2562029"
  },
  {
    "text": "and then I can use that with cdk4 for anything that is not yet in in in cloud",
    "start": "2562029",
    "end": "2569449"
  },
  {
    "text": "formation alright so this this got deployed and it will also part of the",
    "start": "2569449",
    "end": "2577849"
  },
  {
    "text": "deployment it will generate a static file for me that I can use in my front and to connect to the right resources",
    "start": "2577849",
    "end": "2586779"
  },
  {
    "text": "and I also made some some instructions of what I need to do in octa for example I'll add other IDPs at the end when",
    "start": "2586779",
    "end": "2594739"
  },
  {
    "text": "needed it will tell me what to put in Rakta in order to make that connect okay",
    "start": "2594739",
    "end": "2601659"
  },
  {
    "text": "right we still have some time so I want to show a little bit how old is that after I deployed it how does it look in",
    "start": "2602019",
    "end": "2607880"
  },
  {
    "text": "the console so if your thanks for staying with me for that part of the code for those who are not developers",
    "start": "2607880",
    "end": "2614649"
  },
  {
    "text": "and I'm gonna show a little bit how it looks like in the console right",
    "start": "2614649",
    "end": "2622298"
  },
  {
    "text": "[Applause] so the first thing that is created in",
    "start": "2623550",
    "end": "2629710"
  },
  {
    "text": "the kinda console is that authorizer it's very basic it connects to my between my user pool and I just need to",
    "start": "2629710",
    "end": "2638410"
  },
  {
    "text": "define what's the name of the header and I pass this through and that header name",
    "start": "2638410",
    "end": "2643710"
  },
  {
    "text": "usually its authorization then how am I using this when I when I so this is what",
    "start": "2643710",
    "end": "2652450"
  },
  {
    "text": "the cdk just created this is the the deployment that was created right now if",
    "start": "2652450",
    "end": "2658359"
  },
  {
    "text": "I go into the method request I can see that they can that the authorizer is is",
    "start": "2658359",
    "end": "2664599"
  },
  {
    "text": "present there okay and then I mean let",
    "start": "2664599",
    "end": "2670569"
  },
  {
    "text": "me maximize it okay all right as as you can see in that slide when I show those",
    "start": "2670569",
    "end": "2676839"
  },
  {
    "text": "different types of authorizations you can do policy based you can do interceptor base and do it in code when",
    "start": "2676839",
    "end": "2683619"
  },
  {
    "text": "you do the kikuna to authorizer it's not doing anything beyond validating that your token is valid and that the user",
    "start": "2683619",
    "end": "2689680"
  },
  {
    "text": "has that scope in the in their access token okay in this case i just used one of the",
    "start": "2689680",
    "end": "2697299"
  },
  {
    "text": "built-in scopes that they have that they get it's called open ID but there are other options one of them is is using",
    "start": "2697299",
    "end": "2703180"
  },
  {
    "text": "IIM for for authorization which we're not we're not using right here but it",
    "start": "2703180",
    "end": "2709480"
  },
  {
    "text": "can be very nice for API to API access then incognito",
    "start": "2709480",
    "end": "2717059"
  },
  {
    "text": "in the user pool setting this is where this is where I do the the mapping those",
    "start": "2717440",
    "end": "2726930"
  },
  {
    "text": "are attributes that are in octa and I can if we'll have time I'll show how it's set up in arctor this is the",
    "start": "2726930",
    "end": "2733980"
  },
  {
    "text": "important parts the octa attribute called groups is being mapped into a",
    "start": "2733980",
    "end": "2739500"
  },
  {
    "text": "custom attribute called groups and then that lamp that will take it from the custom attribute into an array of groups",
    "start": "2739500",
    "end": "2747720"
  },
  {
    "text": "into the groups claim ok and again the importance here is that the group's",
    "start": "2747720",
    "end": "2752849"
  },
  {
    "text": "claim will be accessible in both the ID token and the access token and since",
    "start": "2752849",
    "end": "2759619"
  },
  {
    "text": "there is some preference to use an access token when you make a make API",
    "start": "2759619",
    "end": "2764760"
  },
  {
    "text": "calls you don't want to pass all the user information just a minimal needed so that's why I like that this is why I",
    "start": "2764760",
    "end": "2771240"
  },
  {
    "text": "do that mapping this mapping is optional to do that lambda mapping but again that's that's the reason to use a group",
    "start": "2771240",
    "end": "2777930"
  },
  {
    "text": "versus just use a claim just use a custom attribute because it will not get",
    "start": "2777930",
    "end": "2784440"
  },
  {
    "text": "into the access token to only show in the ID token",
    "start": "2784440",
    "end": "2789890"
  },
  {
    "text": "and then",
    "start": "2790750",
    "end": "2793590"
  },
  {
    "text": "the this is where the triggers are defined there are a lot of other",
    "start": "2795860",
    "end": "2800900"
  },
  {
    "text": "triggers okay and this is this is the secret sauce I would say for that for",
    "start": "2800900",
    "end": "2806990"
  },
  {
    "text": "this technique this this this lambda so this is where this is where the",
    "start": "2806990",
    "end": "2813350"
  },
  {
    "text": "association we did in cdk this is where it ends up very straightforward one one",
    "start": "2813350",
    "end": "2821420"
  },
  {
    "text": "thing I want to talk about the app client okay",
    "start": "2821420",
    "end": "2828039"
  },
  {
    "text": "as I can see I can choose which I of which I DPS I'm going to show on that login page for that app client and one",
    "start": "2828160",
    "end": "2839200"
  },
  {
    "text": "word of caution you see this this is a scope that I could check it's unchecked by default and the cdk",
    "start": "2839200",
    "end": "2848140"
  },
  {
    "text": "does not provide it but I want to make it make sure it's you know what it does so this scope allows users to use their",
    "start": "2848140",
    "end": "2856360"
  },
  {
    "text": "access token to interact with Cognito directly now since I'm coming from an external IDP and I consider that",
    "start": "2856360",
    "end": "2863620"
  },
  {
    "text": "external IDP is the source of truth I don't want to let users directly do",
    "start": "2863620",
    "end": "2868810"
  },
  {
    "text": "anything to their profile so it's important one takeaway from this is to make sure that this scope is not",
    "start": "2868810",
    "end": "2874540"
  },
  {
    "text": "provided to users at all it's not provided by default it's not in the repo by just wanted to note it out you don't",
    "start": "2874540",
    "end": "2880360"
  },
  {
    "text": "accidentally check that in if you do then it will allow users to modify the profile and since we rely on those",
    "start": "2880360",
    "end": "2886390"
  },
  {
    "text": "attributes to be mapped from the IDP we don't make we don't make sure that users can't have no way of modifying them",
    "start": "2886390",
    "end": "2893400"
  },
  {
    "text": "alright that is",
    "start": "2893400",
    "end": "2899070"
  },
  {
    "text": "[Applause] that's that was also created through a",
    "start": "2899070",
    "end": "2904390"
  },
  {
    "text": "custom resource construct from the code and we do have a little bit of time I",
    "start": "2904390",
    "end": "2912790"
  },
  {
    "text": "can show you how settings were done in octa is that something you're interested okay oh the the link okay so if for those of",
    "start": "2912790",
    "end": "2924550"
  },
  {
    "text": "you have to go right now I know lunch is waiting so this is the",
    "start": "2924550",
    "end": "2931960"
  },
  {
    "text": "this is the link it's going to be in the presentation let me make it bigger",
    "start": "2931960",
    "end": "2937680"
  },
  {
    "text": "alright so if you if you have recommendations you have comments you want to make sure that you have",
    "start": "2937740",
    "end": "2943329"
  },
  {
    "text": "questions about it from the talk submit an issue I will I'm monitoring this and",
    "start": "2943329",
    "end": "2948730"
  },
  {
    "text": "even if you have a very simple question based on the talk you can use this to ask questions you see a problem you find",
    "start": "2948730",
    "end": "2955060"
  },
  {
    "text": "a bug submit an issue or our PR request",
    "start": "2955060",
    "end": "2960400"
  },
  {
    "text": "it's very welcome",
    "start": "2960400",
    "end": "2963510"
  },
  {
    "text": "it's will the talks will be available as far as I know both the slides and video",
    "start": "2967040",
    "end": "2972290"
  },
  {
    "text": "will be available on YouTube yeah so one more thing before we before we go if you",
    "start": "2972290",
    "end": "2978800"
  },
  {
    "text": "look at the repo there is an explanation of what's everything if you don't remember from the talk what's in every",
    "start": "2978800",
    "end": "2984140"
  },
  {
    "text": "folder what's in every module what what's the purpose of every one of those things and also the explanation of okay",
    "start": "2984140",
    "end": "2991250"
  },
  {
    "text": "now we want to just try it and play with it and you don't want to write a lot of code you don't want to dive into that code so even if you're not a developer",
    "start": "2991250",
    "end": "2997430"
  },
  {
    "text": "you can fork the repo all I need to do is put some very basic configuration in",
    "start": "2997430",
    "end": "3005710"
  },
  {
    "text": "that nsh okay simulating something that may come from from a CD pipeline in the",
    "start": "3005710",
    "end": "3012790"
  },
  {
    "text": "future for example the the account and the the region I'm putting it as a",
    "start": "3012790",
    "end": "3018670"
  },
  {
    "text": "precaution so we don't just use the the one configure in your command line so we explicitly say which account you want in",
    "start": "3018670",
    "end": "3024880"
  },
  {
    "text": "which region and you set up you step",
    "start": "3024880",
    "end": "3030430"
  },
  {
    "text": "four and five you only need to do once to install cdk and again it's in",
    "start": "3030430",
    "end": "3035800"
  },
  {
    "text": "Developer Preview but I I'm using it for four for a while and I'm so far I'm",
    "start": "3035800",
    "end": "3042460"
  },
  {
    "text": "pretty happy with it step number five will create will deploy stack that will make it easier to handle assets so you",
    "start": "3042460",
    "end": "3049090"
  },
  {
    "text": "don't have to manually upload things to s3 to make it for example lambda code",
    "start": "3049090",
    "end": "3054970"
  },
  {
    "text": "and all that it will make it more seamless it will zip it for you uploaded for you for it for a temporary bucket",
    "start": "3054970",
    "end": "3060280"
  },
  {
    "text": "that is not accessible to the world and all that so that step number five is also an intermediate step to do but then",
    "start": "3060280",
    "end": "3067990"
  },
  {
    "text": "after you did that every time you want to make changes you just hit deploy in",
    "start": "3067990",
    "end": "3074380"
  },
  {
    "text": "the real world will you put that as part of a CIT CD pipeline it will take the information from environment variables and then quickly we'll have a few",
    "start": "3074380",
    "end": "3082780"
  },
  {
    "text": "minutes I'll go into",
    "start": "3082780",
    "end": "3085920"
  },
  {
    "text": "we'll go into the octa settings okay",
    "start": "3090390",
    "end": "3095420"
  },
  {
    "text": "so first this is",
    "start": "3095420",
    "end": "3099799"
  },
  {
    "text": "this is the assignment they have I have those those users are s are allowed to",
    "start": "3105280",
    "end": "3110380"
  },
  {
    "text": "access this application and if we look at",
    "start": "3110380",
    "end": "3117359"
  },
  {
    "text": "let's look at the sam'l settings so there's a little bit of a chicken and",
    "start": "3119650",
    "end": "3126789"
  },
  {
    "text": "egg setup because octa will ask you to provide I have a",
    "start": "3126789",
    "end": "3131889"
  },
  {
    "text": "link in the in the readme of what you need to put here and it's also being displayed when you do deploy so the",
    "start": "3131889",
    "end": "3139929"
  },
  {
    "text": "method is to create that you can put something temporary here as a placeholder create it and then it will",
    "start": "3139929",
    "end": "3145569"
  },
  {
    "text": "give you a metadata URL you just need that metadata URL in order to make all the other things work you deploy it and",
    "start": "3145569",
    "end": "3151599"
  },
  {
    "text": "then you go back and update those settings to the correct ones okay the metadata URL from what I found is the same between different",
    "start": "3151599",
    "end": "3157869"
  },
  {
    "text": "applications it's gonna be the saying whether you had those it's not affected",
    "start": "3157869",
    "end": "3164079"
  },
  {
    "text": "by those settings that's what I meant and this is where I do the mapping from the octa attributes into what I want to",
    "start": "3164079",
    "end": "3171909"
  },
  {
    "text": "be part of the sam'l the sam'l response",
    "start": "3171909",
    "end": "3178509"
  },
  {
    "text": "okay so similar mapping I'm a up the first name last name and email and that's the important part I guess any",
    "start": "3178509",
    "end": "3185229"
  },
  {
    "text": "other IDPs have other ways to do that in Enochs out the way I like it is to have a prefix and say based on that perfect",
    "start": "3185229",
    "end": "3192819"
  },
  {
    "text": "every every group that is starting with my app name belongs to my app that's kind of a namespace and then if the user",
    "start": "3192819",
    "end": "3200589"
  },
  {
    "text": "is has any group that starts with that it will be added to the sam'l response I don't want to send all of the group's",
    "start": "3200589",
    "end": "3206019"
  },
  {
    "text": "they're part of just a subset and yep",
    "start": "3206019",
    "end": "3211359"
  },
  {
    "text": "and so basically it's a mapping from from the group into the cognitive profile and then we map that into two",
    "start": "3211359",
    "end": "3219489"
  },
  {
    "text": "cognitive group and I think that's that's about that's",
    "start": "3219489",
    "end": "3231270"
  },
  {
    "text": "about it so let me just go back right",
    "start": "3231270",
    "end": "3237320"
  },
  {
    "text": "all right so we talked about the repository",
    "start": "3246970",
    "end": "3252410"
  },
  {
    "text": "structure but you'll have that in the slide this is the link for the for the github again and those are the main",
    "start": "3252410",
    "end": "3259880"
  },
  {
    "text": "modules in there just to recap that's that's that's the way we're doing this",
    "start": "3259880",
    "end": "3266329"
  },
  {
    "text": "mapping okay that's the structure it looks a little complex but it's documenting the link for the documentation for how this needs to look",
    "start": "3266329",
    "end": "3272689"
  },
  {
    "text": "like is there and also added the type information for typescript so you don't have to so you don't have to memorize",
    "start": "3272689",
    "end": "3280489"
  },
  {
    "text": "that you're just you're gonna have Auto completion for almost everything you created here this is how we can use this",
    "start": "3280489",
    "end": "3290779"
  },
  {
    "text": "all the Thursday in middleware to any proof you specify which groups are the minimal groups that the user will need",
    "start": "3290779",
    "end": "3297049"
  },
  {
    "text": "in order to do anything useful and that's an example of how you make a",
    "start": "3297049",
    "end": "3302299"
  },
  {
    "text": "thorough zation decision in code in a simple in a simple way and that's how",
    "start": "3302299",
    "end": "3307939"
  },
  {
    "text": "you can do that in the front-end just a recap of the interesting parts there are",
    "start": "3307939",
    "end": "3315109"
  },
  {
    "text": "some other resources that we discussed here it was CDK it was amplify anyway servers",
    "start": "3315109",
    "end": "3321559"
  },
  {
    "text": "Express that can take an existing Express app just throw it in lambda I",
    "start": "3321559",
    "end": "3327189"
  },
  {
    "text": "found it very useful and this is about how do you add different identity",
    "start": "3327189",
    "end": "3333199"
  },
  {
    "text": "providers other than octa there's some other so if you like the concept of that",
    "start": "3333199",
    "end": "3340699"
  },
  {
    "text": "so this was used to build the jam sessions and you can still make it to",
    "start": "3340699",
    "end": "3345919"
  },
  {
    "text": "the security GM the jam lounge and capture the flag that it's part of what",
    "start": "3345919",
    "end": "3351619"
  },
  {
    "text": "triggered this talk to share our experience building those things as you can play with them hands-on",
    "start": "3351619",
    "end": "3359528"
  },
  {
    "text": "and with that thank you feel free to reach out and you can feel free to send me an email thank you so much and please",
    "start": "3360000",
    "end": "3372690"
  },
  {
    "text": "complete the session survey in the mobile app thank you",
    "start": "3372690",
    "end": "3377359"
  }
]