[
  {
    "start": "0",
    "end": "49000"
  },
  {
    "text": "okay cool hi everybody my name is Andy Troutman",
    "start": "1500",
    "end": "6660"
  },
  {
    "text": "I'm the software Dev manager for AWS code deploy so if you saw Andy's keynote",
    "start": "6660",
    "end": "11880"
  },
  {
    "text": "earlier in the week uh or sorry two days ago a day ago losing track of time already uh code deploy is one of the new",
    "start": "11880",
    "end": "19080"
  },
  {
    "text": "app Management Services that we just announced it's the first one out of the gate and today I'm going to talk about code deploy as well as Apollo which is",
    "start": "19080",
    "end": "26760"
  },
  {
    "text": "the system internal to Amazon that we use for software deployments and we're going to kind of compare and contrast the two and",
    "start": "26760",
    "end": "34140"
  },
  {
    "text": "really when we went and built code deploy we looked a lot at Apollo our own internal service because it stood the",
    "start": "34140",
    "end": "40079"
  },
  {
    "text": "test of time and we wanted to see if we could pull some of those Lessons Learned or best practices out of",
    "start": "40079",
    "end": "45379"
  },
  {
    "text": "Apollo and apply them to code deploy so before I go too far let's provide a",
    "start": "45379",
    "end": "51960"
  },
  {
    "start": "49000",
    "end": "165000"
  },
  {
    "text": "little motivation as a reminder software deployment is still a hard problem",
    "start": "51960",
    "end": "57539"
  },
  {
    "text": "looking at all the people in the room you probably already realized this let me walk you through the life cycle of a",
    "start": "57539",
    "end": "62940"
  },
  {
    "text": "typical app from the day you start it so when you start it uh it's usually maybe one or two developers working on it",
    "start": "62940",
    "end": "69960"
  },
  {
    "text": "you're probably targeting a deploy Fleet of your desktop or maybe a couple integration or test servers",
    "start": "69960",
    "end": "77880"
  },
  {
    "text": "um the cost of failure is extremely low there's probably not customers using it yet and so you usually will get by with",
    "start": "77880",
    "end": "83700"
  },
  {
    "text": "something like SCP and product a couple scripts on your box to get it running",
    "start": "83700",
    "end": "89960"
  },
  {
    "text": "then success happens right so uh complexity grows maybe you hire some",
    "start": "89960",
    "end": "95579"
  },
  {
    "text": "more developers people are actually paying you to do this work now so you actually have customers that you have to",
    "start": "95579",
    "end": "101400"
  },
  {
    "text": "worry about and suddenly SCP doesn't seem as good of an idea you need some",
    "start": "101400",
    "end": "107100"
  },
  {
    "text": "process to coordinate all the people that are now touching the software and of course then you achieve",
    "start": "107100",
    "end": "113100"
  },
  {
    "text": "stratospheric success and you suddenly realize uh oh the the",
    "start": "113100",
    "end": "118680"
  },
  {
    "text": "act of of coordinating a software change across a big Fleet is is risky",
    "start": "118680",
    "end": "125040"
  },
  {
    "text": "customers are paying us a lot of money now uh it's it's a lot of coordination both",
    "start": "125040",
    "end": "130500"
  },
  {
    "text": "on the team because there's in theory a lot of people using the software developing on the software and you",
    "start": "130500",
    "end": "135720"
  },
  {
    "text": "really don't want to take down time you don't want to have your customers come to your website and see a sign that says you know come back later",
    "start": "135720",
    "end": "142080"
  },
  {
    "text": "we're updating our software right that's kind of lame we don't really want that so hopefully that's kind of just a",
    "start": "142080",
    "end": "148080"
  },
  {
    "text": "little bit of motivation for where we were coming from uh Amazon definitely experienced this we started uh started",
    "start": "148080",
    "end": "154140"
  },
  {
    "text": "very modestly and and achieved a lot of success and so we started to encounter",
    "start": "154140",
    "end": "159360"
  },
  {
    "text": "these problems ourselves uh processes that worked on day one didn't work once we got big",
    "start": "159360",
    "end": "165660"
  },
  {
    "start": "165000",
    "end": "271000"
  },
  {
    "text": "so I'm going to take you a little bit back in time it wasn't that long ago it was probably a little over a decade at",
    "start": "165660",
    "end": "171120"
  },
  {
    "text": "this point which and I know software terms is uh you know fossil fossil records but when we're",
    "start": "171120",
    "end": "177959"
  },
  {
    "text": "working on uh on Amazon uh we were at a transition point so just like the",
    "start": "177959",
    "end": "184319"
  },
  {
    "text": "previous slide was talking about we were making the decision uh to break up with what then was a pretty monolithic app so",
    "start": "184319",
    "end": "191400"
  },
  {
    "text": "a really large application that was kind of developed centrally on a on a like",
    "start": "191400",
    "end": "197220"
  },
  {
    "text": "Focus team into uh into something that was more manageable uh during the same time we were kind of",
    "start": "197220",
    "end": "204360"
  },
  {
    "text": "having a you know cultural revolution within the company too we were starting to change the way we approached",
    "start": "204360",
    "end": "209519"
  },
  {
    "text": "everything so adopting more agile practices so we wanted to really do a couple teams so they could run a lot",
    "start": "209519",
    "end": "215340"
  },
  {
    "text": "faster they didn't have to wait for another team to to do their work they could deliver iteratively for the",
    "start": "215340",
    "end": "220620"
  },
  {
    "text": "customers so get things out the door as quickly as possible uh and at the same time that this kind of",
    "start": "220620",
    "end": "226440"
  },
  {
    "text": "agile mentality was settling into Amazon's culture we started to look at how this was going to reflect in the",
    "start": "226440",
    "end": "232379"
  },
  {
    "text": "tools that we were building and the big change for Amazon was we were moving to a service oriented architecture so",
    "start": "232379",
    "end": "238019"
  },
  {
    "text": "instead of a monolithic application we were now trying to break it up into services that were well owned by smaller",
    "start": "238019",
    "end": "245340"
  },
  {
    "text": "teams you know Amazon's famous two Pizza team we didn't want teams that were bigger that we could that we could feed",
    "start": "245340",
    "end": "250980"
  },
  {
    "text": "without two pizzas and so we're trying to decouple everything make it smaller make it faster",
    "start": "250980",
    "end": "256859"
  },
  {
    "text": "uh and what we realized really quickly was to do that we were going to have to have tools that accommodated it so at",
    "start": "256859",
    "end": "262740"
  },
  {
    "text": "this time there wasn't a lot of Tooling in place to be able to manage service oriented architectures so we had to go",
    "start": "262740",
    "end": "269400"
  },
  {
    "text": "build stuff so the tool we built was Apollo um so Apollo is really our case study",
    "start": "269400",
    "end": "275280"
  },
  {
    "start": "271000",
    "end": "344000"
  },
  {
    "text": "today um like I mentioned earlier Apollo has been at Amazon over a decade Faithfully",
    "start": "275280",
    "end": "281520"
  },
  {
    "text": "serving us it is if you've used uh Amazon assets if you go on amazon.com uh",
    "start": "281520",
    "end": "287880"
  },
  {
    "text": "or anything on AWS chances are extremely well extremely good that Apollo put the",
    "start": "287880",
    "end": "293580"
  },
  {
    "text": "software on our servers for you to use so it's used very broadly in the company",
    "start": "293580",
    "end": "298759"
  },
  {
    "text": "it's it's evolved with the company so you know it's definitely not the system it was 10 years ago it's kind of had to",
    "start": "298759",
    "end": "304620"
  },
  {
    "text": "keep up with the pace of growth but in an environment where a lot of tools and services died along the way",
    "start": "304620",
    "end": "311040"
  },
  {
    "text": "where we chose to throw it away when it didn't reach scale Apollo kind of stuck around and so it made for a good case",
    "start": "311040",
    "end": "319020"
  },
  {
    "text": "study and and uh when we realized that we wanted to offer more options to AWS customers for doing software deployment",
    "start": "319020",
    "end": "325979"
  },
  {
    "text": "we looked back at Apollo and said what how did this succeed right so like why why why a decade later was it still",
    "start": "325979",
    "end": "332880"
  },
  {
    "text": "being used and was still valuable to us and so for the rest of this talk we'll kind of compare the two we'll compare",
    "start": "332880",
    "end": "338880"
  },
  {
    "text": "Apollo and code deploy and try and talk about some of the lessons we pulled forward",
    "start": "338880",
    "end": "344940"
  },
  {
    "text": "before I go too far though you should probably understand a little bit of how these systems work so both systems uh",
    "start": "344940",
    "end": "351120"
  },
  {
    "text": "operate at a high level very similarly they uh there's kind of two workflows that happen both in code deploy and",
    "start": "351120",
    "end": "356820"
  },
  {
    "text": "Apollo there's a high level workflow that's really organizing and thinking about Fleet level decisions",
    "start": "356820",
    "end": "362759"
  },
  {
    "text": "so just to Define terms a fleet in this case is a set of instances that we want",
    "start": "362759",
    "end": "367979"
  },
  {
    "text": "to run the same version of software so that could be a test Fleet it could be a",
    "start": "367979",
    "end": "373320"
  },
  {
    "text": "development Fleet it could be a production Fleet the stop-level workflow is thinking about making a software",
    "start": "373320",
    "end": "378780"
  },
  {
    "text": "change to one of those stacks and of course it's also helping you manage multiple Stacks because most people",
    "start": "378780",
    "end": "384060"
  },
  {
    "text": "don't just write code on their laptop and immediately push it to production without some kind of process if you do",
    "start": "384060",
    "end": "389580"
  },
  {
    "text": "good on you I guess um",
    "start": "389580",
    "end": "394100"
  },
  {
    "text": "the other part that the top level workflow does is it does fleet selection so when we're doing a deployment we don't want to deploy the change to every",
    "start": "394680",
    "end": "400800"
  },
  {
    "text": "single host in parallel that makes the opportunity for failure much greater because I'm going to assume that nobody",
    "start": "400800",
    "end": "407460"
  },
  {
    "text": "writes perfect code every single time and so this top level workflow is really",
    "start": "407460",
    "end": "412560"
  },
  {
    "text": "picking hosts to to put a software change on performing the deployment validating that it's healthy and then",
    "start": "412560",
    "end": "420479"
  },
  {
    "text": "making a decision about what happens next so if it doesn't come up healthy it's going to make a decision one way or the other if it does come up healthy",
    "start": "420479",
    "end": "426300"
  },
  {
    "text": "it's going to move forward grab some other collection of instances in your Fleet and start deploying to them",
    "start": "426300",
    "end": "432960"
  },
  {
    "start": "432000",
    "end": "559000"
  },
  {
    "text": "then there's the lower level workflow the lower level workflow is really thinking about what's happening on each",
    "start": "432960",
    "end": "439319"
  },
  {
    "text": "instance when the deployment is happening on that instance right uh probably the best way to",
    "start": "439319",
    "end": "445259"
  },
  {
    "text": "illustrate this is with an example so I'll use one from code deploy code deploy uses a simple config file",
    "start": "445259",
    "end": "452340"
  },
  {
    "text": "that we drop inside of our application directory to kind of specify what happens during a software change",
    "start": "452340",
    "end": "459419"
  },
  {
    "text": "so this is a really simple example of an app spec file there's two sections there's a file",
    "start": "459419",
    "end": "464819"
  },
  {
    "text": "section which is uh from a repository to the file system on",
    "start": "464819",
    "end": "470520"
  },
  {
    "text": "the instance you want us to put code onto that's basically a set of copy commands right so in this case we're",
    "start": "470520",
    "end": "477120"
  },
  {
    "text": "copying from the root of our repository in code deployer repository is either an",
    "start": "477120",
    "end": "482220"
  },
  {
    "text": "S3 bucket or a GitHub repository um so in this case we're copying from",
    "start": "482220",
    "end": "488400"
  },
  {
    "text": "slash to you know VAR HTML million dollar idea and then we're going to run through this",
    "start": "488400",
    "end": "494880"
  },
  {
    "text": "set of application hooks right and so in code deploy we call them life cycle events but they're essentially plug-in",
    "start": "494880",
    "end": "501539"
  },
  {
    "text": "points for whatever scripts you want us to run that actually accomplishes the the task of doing a deployment so",
    "start": "501539",
    "end": "508199"
  },
  {
    "text": "deployment is going to be unique and different to every single application uh and so to kind of make it flexible",
    "start": "508199",
    "end": "514020"
  },
  {
    "text": "and easy to use what we do here is just give you plug-in points right so in this case",
    "start": "514020",
    "end": "519419"
  },
  {
    "text": "uh we we stopped the server uh we install any dependencies or validate that our dependencies are there",
    "start": "519419",
    "end": "525899"
  },
  {
    "text": "then we start back up the server we start a logging process that that is deployed along with our million dollar idea and then we run a ping test to make",
    "start": "525899",
    "end": "533339"
  },
  {
    "text": "sure the application actually came up healthy uh so both apologists are slightly",
    "start": "533339",
    "end": "540300"
  },
  {
    "text": "different Apollo uses a file system based convention and I'll talk about that a little bit later in some of the decisions that led us to a file instead",
    "start": "540300",
    "end": "546839"
  },
  {
    "text": "of a folder hierarchy but at a really high level this is these two systems This Is How They accomplish their work",
    "start": "546839",
    "end": "552779"
  },
  {
    "text": "they have a top level workflow that's marching through the fleet and then they have a workflow that's actually doing work on each instance",
    "start": "552779",
    "end": "560640"
  },
  {
    "start": "559000",
    "end": "948000"
  },
  {
    "text": "so now let's jump into lessons so what is it when we when we look back what could we pull away from Apollo uh the",
    "start": "560640",
    "end": "567120"
  },
  {
    "text": "first lesson that jumped I think to everyone's mind was flexibility this picture kind of illustrates Amazon's culture we're not the big",
    "start": "567120",
    "end": "572700"
  },
  {
    "text": "homogeneous Block in the back when you look at our Tech culture it's very much so comprised of a lot of individual",
    "start": "572700",
    "end": "577920"
  },
  {
    "text": "pieces Amazon really values ownership we value",
    "start": "577920",
    "end": "583279"
  },
  {
    "text": "letting our engineers make the technical decisions and that goes down to the Technologies they use the way they",
    "start": "583279",
    "end": "589620"
  },
  {
    "text": "measure their success all of it and so Amazon has grown up to be a culture that has a very broad set of technology in",
    "start": "589620",
    "end": "597420"
  },
  {
    "text": "play at any given time we are not just a Java shop we uh you'll see all code from all places and so if we're going to have",
    "start": "597420",
    "end": "603959"
  },
  {
    "text": "a deployment system that's going to support that it needs to be extremely flexible it needs to be application agnostic in the way it interacts with",
    "start": "603959",
    "end": "611880"
  },
  {
    "text": "your code when it's doing a deployment AWS is the same way so that culture kind of carried forward we're trying to be",
    "start": "611880",
    "end": "618600"
  },
  {
    "text": "the cloud platform for everybody we're not the cloud platform if you are just a Java developer not the cloud platform if",
    "start": "618600",
    "end": "624180"
  },
  {
    "text": "you're just a.net developer PHP or python right we want everyone to come and feel like they can get a lot of",
    "start": "624180",
    "end": "629760"
  },
  {
    "text": "value out of the platform so code deploy kind of had the same impetus it really needed to be flexible",
    "start": "629760",
    "end": "635279"
  },
  {
    "text": "let me show you a quick demo Maybe I'm going to do the dangerous thing and",
    "start": "635279",
    "end": "640980"
  },
  {
    "text": "try and do live demos while uh on the stage here so let me bring up an ec2 instance in",
    "start": "640980",
    "end": "647820"
  },
  {
    "text": "this demo what I'm going to do is uh show you show a deployment with code",
    "start": "647820",
    "end": "653399"
  },
  {
    "text": "deploy um and we were trying to think how do we",
    "start": "653399",
    "end": "658440"
  },
  {
    "text": "actually show flexibility when I really only have time to do a single demo so I mixed together a bunch of Technologies to just show that we work with a bunch",
    "start": "658440",
    "end": "663959"
  },
  {
    "text": "of things in this example I'm going to do a deployment where I deployed it instances using Code deploy and it's",
    "start": "663959",
    "end": "670200"
  },
  {
    "text": "going to control that top level workflow and then I'm going to use Chef solo to actually do the lower level workflow",
    "start": "670200",
    "end": "675720"
  },
  {
    "text": "installation and I'm going to install a tomcat app which just is going to run a",
    "start": "675720",
    "end": "680880"
  },
  {
    "text": "little servlet and we'll get a really simple web page an embarrassingly simple web page so what I've done here is I've",
    "start": "680880",
    "end": "686640"
  },
  {
    "text": "CD did a directory I'll show you what's in this directory because it's somewhat interesting we have the app spec file",
    "start": "686640",
    "end": "692820"
  },
  {
    "text": "which I was just talking about that's basically the configuration that tells us how to perform the deployment on a single instance we have a copy of Chef",
    "start": "692820",
    "end": "699920"
  },
  {
    "text": "we have the the source code for the thing that we're actually building I've done the Martha Stewart trick I've",
    "start": "699920",
    "end": "705660"
  },
  {
    "text": "pre-baked some things so I've already run uh Maven package on this so that everything's ready to go",
    "start": "705660",
    "end": "711320"
  },
  {
    "text": "let me show you the app spec just so you can get a sense for what's happening",
    "start": "711320",
    "end": "717480"
  },
  {
    "text": "so very simple app spec files at the top we're basically copying Chef to Etsy",
    "start": "717480",
    "end": "723540"
  },
  {
    "text": "Chef code deploy we're copying our war file to varlib Tomcat then we're going",
    "start": "723540",
    "end": "728940"
  },
  {
    "text": "to run through this little life cycle so first we're going to install Chef we're going to instantiate our Chef solo run",
    "start": "728940",
    "end": "735540"
  },
  {
    "text": "that's going to configure tomcad and move our servlet to the right place then we have a little verify script",
    "start": "735540",
    "end": "741240"
  },
  {
    "text": "that's going to call the servlet and make sure that we actually get back some piece of HTML that looks like what we wanted",
    "start": "741240",
    "end": "746339"
  },
  {
    "text": "so just a really quick simple demo so let me the first thing I'm going to do",
    "start": "746339",
    "end": "752220"
  },
  {
    "text": "is push the application so I wrote a little helper script just to so I didn't have to you guys didn't",
    "start": "752220",
    "end": "758100"
  },
  {
    "text": "have to watch me type every single line here but what I did was using the AWS CLI uh",
    "start": "758100",
    "end": "764579"
  },
  {
    "text": "you can download it or update it and get the latest stuff for code deploy we push",
    "start": "764579",
    "end": "770220"
  },
  {
    "text": "an application the application is called Chef demo we uploaded it to S3 in this case and we told it to just ignore",
    "start": "770220",
    "end": "775920"
  },
  {
    "text": "hidden files in the directory so don't bring all our DOT files along uh once it uploads it so it happened",
    "start": "775920",
    "end": "781860"
  },
  {
    "text": "really fast because this is a pretty small simple application it'll it'll immediately spit out the next command to run to deploy the application so I'm",
    "start": "781860",
    "end": "788700"
  },
  {
    "text": "going to take advantage of that I'm just going to copy it in here you can see things like the the",
    "start": "788700",
    "end": "793860"
  },
  {
    "text": "e-tag for the bucket that we uploaded so I'm using a version bucket so it'll keep track of that stuff",
    "start": "793860",
    "end": "799800"
  },
  {
    "text": "um the only thing I need to add is the deployment group name so a deployment",
    "start": "799800",
    "end": "804959"
  },
  {
    "text": "group is logically equivalent to a fleet it's the name we use in code deploy it can be a set of ec2 instances that have",
    "start": "804959",
    "end": "812220"
  },
  {
    "text": "been tagged in some way that's meaningful to you or you can use an auto scaling group name uh so let me see I have a",
    "start": "812220",
    "end": "819779"
  },
  {
    "text": "chef demo yeah",
    "start": "819779",
    "end": "826560"
  },
  {
    "text": "I chose a very long name and I'm gonna hope that that was the right name it was okay so I've kicked off a deployment it",
    "start": "826560",
    "end": "832320"
  },
  {
    "text": "gives me back a deployment ID from the command line I could I could manually write a polar or uh use the",
    "start": "832320",
    "end": "839339"
  },
  {
    "text": "waders inside of the command line tool to get status right from the command line",
    "start": "839339",
    "end": "844440"
  },
  {
    "text": "I'm going to go look at the console because it's a little bit prettier uh so",
    "start": "844440",
    "end": "849839"
  },
  {
    "text": "this this is the code deploy console if I go over to deployments we should see a deployment that's in progress",
    "start": "849839",
    "end": "856500"
  },
  {
    "text": "so I'm deploying to 18 instances and I believe I set this one up to deploy in parallel so it's kind of go it's going",
    "start": "856500",
    "end": "861899"
  },
  {
    "text": "to go from blue to green really quickly well not really quickly it'll deploy to",
    "start": "861899",
    "end": "866940"
  },
  {
    "text": "all the 18 instances in parallel don't don't tell anyone I told you to deploy to all your instances in parallel",
    "start": "866940",
    "end": "873240"
  },
  {
    "text": "but a lot a lot to talk about so I'm going to do it that way if I want I can I can dig into the actual deployment a",
    "start": "873240",
    "end": "880260"
  },
  {
    "text": "little bit further and get other information about what's happening so while it's deploying I can actually see hosts that are being deployed to",
    "start": "880260",
    "end": "888660"
  },
  {
    "text": "um so I broke some of my instances but uh",
    "start": "888660",
    "end": "896220"
  },
  {
    "text": "eight of them succeeded looks like it's still in progress cool so I'm going to keep going I'll",
    "start": "896220",
    "end": "902220"
  },
  {
    "text": "come back to this and prove that it actually finished the deployment but uh I this this talk is long so I'm gonna",
    "start": "902220",
    "end": "907440"
  },
  {
    "text": "carry on so this is a let me hit the magical button",
    "start": "907440",
    "end": "912860"
  },
  {
    "text": "uh we're back so this is an example of doing a deployment using uh Tomcat chef",
    "start": "912860",
    "end": "919019"
  },
  {
    "text": "and code to play together we could easily swap out chef for another configuration Management Service like",
    "start": "919019",
    "end": "926220"
  },
  {
    "text": "puppet um and we can also of course change the application since code deploy is pretty epignostic it's just deploying uh it's",
    "start": "926220",
    "end": "934260"
  },
  {
    "text": "just copying files and running scripts on your behalf it kind of is pretty flexible and easy to use with a bunch of stuff",
    "start": "934260",
    "end": "940500"
  },
  {
    "text": "so lesson one be flexible make it easy to let the people deploying code pick",
    "start": "940500",
    "end": "945839"
  },
  {
    "text": "the right technology lesson tools listen to tools must be",
    "start": "945839",
    "end": "951480"
  },
  {
    "start": "948000",
    "end": "1007000"
  },
  {
    "text": "safe but not restrictive so this is a picture of people building their own fireworks and then shooting them at each",
    "start": "951480",
    "end": "957660"
  },
  {
    "text": "other that's not safe so um so don't do that uh again don't uh you",
    "start": "957660",
    "end": "966000"
  },
  {
    "text": "know don't go don't tell your parents that I told you to shoot fireworks to each other uh so I think there's a natural tension between",
    "start": "966000",
    "end": "972540"
  },
  {
    "text": "um putting in guard rails that make the right thing happen when mistakes happen and putting in so many guard rails that",
    "start": "972540",
    "end": "978480"
  },
  {
    "text": "you're unable to kind of use the tool in a flexible way so again when we look back at Apollo we felt like it hit a",
    "start": "978480",
    "end": "984660"
  },
  {
    "text": "sweet spot so really early we realized that we were in",
    "start": "984660",
    "end": "989940"
  },
  {
    "text": "the business of being able to deploy software and deploy bad software and have it not",
    "start": "989940",
    "end": "996060"
  },
  {
    "text": "affect our customer right that ended up being Apollo's goal was to let customers deploy what they want but to try really",
    "start": "996060",
    "end": "1001579"
  },
  {
    "text": "hard to make sure that any mistakes they made along the way wouldn't show up to our actual end users",
    "start": "1001579",
    "end": "1007579"
  },
  {
    "start": "1007000",
    "end": "1155000"
  },
  {
    "text": "the way Apollo approached this was to do rolling deployments so a rolling deployment is essentially we take",
    "start": "1007579",
    "end": "1013759"
  },
  {
    "text": "advantage of the fact that there's usually redundant capacity in an environment so most people don't run a single app",
    "start": "1013759",
    "end": "1020000"
  },
  {
    "text": "server they run a couple so that when something breaks you have a backup and uh kind of aggress gracefully does the",
    "start": "1020000",
    "end": "1026240"
  },
  {
    "text": "right thing so we realized we could take advantage of that extra capacity during a deployment and we could pull out some",
    "start": "1026240",
    "end": "1032240"
  },
  {
    "text": "capacity upgrade it put it back in service and kind of head down the fleet that way",
    "start": "1032240",
    "end": "1037760"
  },
  {
    "text": "the piece of configuration we came up with for Apollo and for code deploy was what we call minimum healthy hosts so",
    "start": "1037760",
    "end": "1044178"
  },
  {
    "text": "this is how you tell the the system how aggressive it can be during a software change so the contract is is pretty simple you",
    "start": "1044179",
    "end": "1052400"
  },
  {
    "text": "tell us the minimum number of hosts you have to have available at any time to serve your customer so in this case I'm",
    "start": "1052400",
    "end": "1058880"
  },
  {
    "text": "saying I have to have at least two instances out of my three available no matter what's going on",
    "start": "1058880",
    "end": "1064700"
  },
  {
    "text": "then that top level workflow that we talked about earlier is going to work within those constraints right so it's going to look at the host it has",
    "start": "1064700",
    "end": "1070580"
  },
  {
    "text": "available and come up with some kind of strategy for deploying so in this case just to go through this example really quickly we have three",
    "start": "1070580",
    "end": "1077240"
  },
  {
    "text": "instances they're fronted by an auto scaling group and a load balancer since you told us I have to keep two up",
    "start": "1077240",
    "end": "1082820"
  },
  {
    "text": "at all times I'm going to take one out because that's all I can afford to take out to keep my promise to you upgrade it",
    "start": "1082820",
    "end": "1089059"
  },
  {
    "text": "to version two in this case the happy thing happens and version two comes up successful go to the next instance unbind it so",
    "start": "1089059",
    "end": "1095720"
  },
  {
    "text": "it's not receiving customer traffic update it again in the happy case everything worked out",
    "start": "1095720",
    "end": "1102620"
  },
  {
    "text": "well and we're all in version two of the application but we all know that's not what always",
    "start": "1102620",
    "end": "1107900"
  },
  {
    "text": "happens right so so let's look at an example where it actually fails because I think it's",
    "start": "1107900",
    "end": "1113000"
  },
  {
    "text": "probably a more interesting case when we talk about safety so let's assume that version three actually fails the deployment",
    "start": "1113000",
    "end": "1119720"
  },
  {
    "text": "uh if version three uh fails the deployment um",
    "start": "1119720",
    "end": "1124820"
  },
  {
    "text": "the system will do something that's kind of subtle but smart it will it will realize that it can't keep its promise to us anymore we said we have to keep",
    "start": "1124820",
    "end": "1130940"
  },
  {
    "text": "two up at all times it can't take out any more capacity so it's going to stop the deployment right once it stops a",
    "start": "1130940",
    "end": "1138140"
  },
  {
    "text": "human needs to get involved and make a decision so you can either roll forward with a patch for this problem or most",
    "start": "1138140",
    "end": "1145400"
  },
  {
    "text": "people would probably roll back get the system stable and then think about you know how to actually come up with a way",
    "start": "1145400",
    "end": "1150980"
  },
  {
    "text": "to fix the problem so we're going to look at a rollback uh again the system does something subtle",
    "start": "1150980",
    "end": "1157100"
  },
  {
    "start": "1155000",
    "end": "1386000"
  },
  {
    "text": "but I think kind of smart if there had been multiple incentives that failed we would have deployed to all of them at the same time right because we're",
    "start": "1157100",
    "end": "1163220"
  },
  {
    "text": "already under the assumption that the thing that you didn't want to have happen did happen so the application broke in some way so could deploy tries",
    "start": "1163220",
    "end": "1172039"
  },
  {
    "text": "to aggressively get the system back to a healthy State as quickly as possible so it's going to pick all the instances that are broken deploy to them in this",
    "start": "1172039",
    "end": "1178700"
  },
  {
    "text": "case since we're rolling back it succeeds and then we're back to a healthy state so that's kind of an example of a",
    "start": "1178700",
    "end": "1185539"
  },
  {
    "text": "rolling deployment let's do another demo and I'll show you another aspect of this hopefully",
    "start": "1185539",
    "end": "1192860"
  },
  {
    "text": "um my back so let me bring up these instances",
    "start": "1192860",
    "end": "1198559"
  },
  {
    "text": "so I managed to uh succeed this because I so I failed half of my instances I'm not",
    "start": "1198559",
    "end": "1204980"
  },
  {
    "text": "sure why of course when you do a demo you're never sure why things fail so let me do another demo hopefully this",
    "start": "1204980",
    "end": "1211460"
  },
  {
    "text": "one will go a little smoother um I'm gonna go back to my applications page I'm going to select my rollout demo",
    "start": "1211460",
    "end": "1218000"
  },
  {
    "text": "so I'll show you a rolling deployment to an 18 instance Fleet so what I have here",
    "start": "1218000",
    "end": "1223220"
  },
  {
    "text": "on the left hand side is our deployment group so like we talked about earlier deployment group is",
    "start": "1223220",
    "end": "1228980"
  },
  {
    "text": "logically a fleet we want to put the same version of software on it so for this application I put together",
    "start": "1228980",
    "end": "1235039"
  },
  {
    "text": "this silly little page that's going to show you the instances in real time as I'm updating them and we can kind of",
    "start": "1235039",
    "end": "1240320"
  },
  {
    "text": "watch the deployment happen hopefully so let me deploy a new revision to this",
    "start": "1240320",
    "end": "1246380"
  },
  {
    "text": "group um I'm going to again use S3 I'm going",
    "start": "1246380",
    "end": "1251419"
  },
  {
    "text": "to select V2 of my application it auto detects that it's a version I",
    "start": "1251419",
    "end": "1256820"
  },
  {
    "text": "can say hello Vegas uh and then I'm gonna so like we're",
    "start": "1256820",
    "end": "1265400"
  },
  {
    "text": "talking about with deployment config I'm actually going to select a third at a time for this application so rather than doing it uh one at a time which would be",
    "start": "1265400",
    "end": "1272059"
  },
  {
    "text": "the most cautious thing or 50 at a time which would be somewhere in the middle uh you can also do it all at once you",
    "start": "1272059",
    "end": "1278059"
  },
  {
    "text": "can you know Cowboy up and go for it uh but but I'm gonna do a third at a time I'm gonna kick off this deployment",
    "start": "1278059",
    "end": "1284780"
  },
  {
    "text": "uh hopefully so it's created so we should in theory be able to go back to this View and uh as The deployment's",
    "start": "1284780",
    "end": "1292880"
  },
  {
    "text": "Happening hopefully we'll see some instances go green on version two there you go so so you notice like as it",
    "start": "1292880",
    "end": "1299299"
  },
  {
    "text": "was deploying you uh you saw the instances um pop in all three availability zones",
    "start": "1299299",
    "end": "1305059"
  },
  {
    "text": "so what I have here is three azs azs are a way for us to kind of isolate our",
    "start": "1305059",
    "end": "1310460"
  },
  {
    "text": "application in the same geographic region so the goal is to keep availability zones for the most part",
    "start": "1310460",
    "end": "1316880"
  },
  {
    "text": "Network isolated and available as much as possible so failure in oneaz is",
    "start": "1316880",
    "end": "1322760"
  },
  {
    "text": "unlikely but possible a failure in multiple AZ should be extremely unlikely so the system again is doing something",
    "start": "1322760",
    "end": "1328159"
  },
  {
    "text": "pretty subtle for us it's trying to put our decrement deployment across the azs it's striping it the reason we want to",
    "start": "1328159",
    "end": "1334760"
  },
  {
    "text": "do that is because we don't want to put all our eggs in one basket in the case of a failure right so if I deployed",
    "start": "1334760",
    "end": "1340520"
  },
  {
    "text": "everything to availability Zone one in this in this demo and an availability",
    "start": "1340520",
    "end": "1346600"
  },
  {
    "text": "availability zone two uh lost connectivity and my deployments uh was a bad",
    "start": "1346600",
    "end": "1354679"
  },
  {
    "text": "deployment we're down to only availability zone three uh serving our customers which is likely not what we",
    "start": "1354679",
    "end": "1360740"
  },
  {
    "text": "wanted it would be much better if we distributed it evenly across the AZ so that if we lose connectivity during a",
    "start": "1360740",
    "end": "1366020"
  },
  {
    "text": "deployment we're actually losing less overall available servers to help customers out so there's another thing",
    "start": "1366020",
    "end": "1372860"
  },
  {
    "text": "that the service kind of does to to preserve as best as possible availability for your customers your end",
    "start": "1372860",
    "end": "1379280"
  },
  {
    "text": "users so that's that's that demo let me switch back",
    "start": "1379280",
    "end": "1387559"
  },
  {
    "start": "1386000",
    "end": "1633000"
  },
  {
    "text": "next lesson uh helping the humans out so what do I mean by that",
    "start": "1387559",
    "end": "1393020"
  },
  {
    "text": "uh we realized in Apollo that auto you know automatic remediation",
    "start": "1393020",
    "end": "1400340"
  },
  {
    "text": "is the best so if the system can self-heal or drive drive around problems that's exactly what we want it to do but",
    "start": "1400340",
    "end": "1407480"
  },
  {
    "text": "the reality is that sometimes things are going to break and a human is going to have to get involved and make a decision",
    "start": "1407480",
    "end": "1413900"
  },
  {
    "text": "so in those cases we want to help them make the the quickest and best decision possible",
    "start": "1413900",
    "end": "1419539"
  },
  {
    "text": "in Apollo what we did uh for the first deployment visualization page we ever built we displayed everything and I mean",
    "start": "1419539",
    "end": "1426559"
  },
  {
    "text": "everything every instance every life cycle event uh real time um this worked great when you were",
    "start": "1426559",
    "end": "1432320"
  },
  {
    "text": "deploying the three instances when we were deploying to fleets of thousands the visualization kind of broke down and",
    "start": "1432320",
    "end": "1437600"
  },
  {
    "text": "got a little busy it was really hard to figure out what was going on especially when something was breaking uh because",
    "start": "1437600",
    "end": "1443059"
  },
  {
    "text": "that's really when you're looking at the deployment page once you build confidence you probably aren't watching",
    "start": "1443059",
    "end": "1448520"
  },
  {
    "text": "every single deployment go out in real time so let me show you a demo uh again or this isn't really a demo I'm just going",
    "start": "1448520",
    "end": "1454580"
  },
  {
    "text": "to walk through the console okay so that's that deployment finished up",
    "start": "1454580",
    "end": "1461720"
  },
  {
    "text": "so let me go back to my deployments list so in code deploy and Apollo we had to",
    "start": "1461720",
    "end": "1467840"
  },
  {
    "text": "iterate on that view right because it just got insanely busy it wasn't helping humans at all so let me take a look at a failed",
    "start": "1467840",
    "end": "1474200"
  },
  {
    "text": "deployment to kind of illustrate what we're talking about so I have this example website deployment that you can",
    "start": "1474200",
    "end": "1479240"
  },
  {
    "text": "see I deployed earlier and it failed so at the highest level we give you just",
    "start": "1479240",
    "end": "1484640"
  },
  {
    "text": "a very high level view of what's happened on the instance we can see that one instance failed and then we skipped 18. we skipped 18 because I did a single",
    "start": "1484640",
    "end": "1492559"
  },
  {
    "text": "host deployment so did the most cautious deployment possible as soon as one instance failed we bailed right so what",
    "start": "1492559",
    "end": "1499039"
  },
  {
    "text": "you see here is just a very quick like status bar view of the world um that's potentially interesting but if",
    "start": "1499039",
    "end": "1505100"
  },
  {
    "text": "you're trying to actually diagnose what's happening you'll want more information so we can actually drill",
    "start": "1505100",
    "end": "1510200"
  },
  {
    "text": "down a little bit further into the into the deployment uh and we can actually get now kind of instance level status of",
    "start": "1510200",
    "end": "1517159"
  },
  {
    "text": "what happened during that deployment so in this case we're getting a list of all the instances that we're participating",
    "start": "1517159",
    "end": "1522440"
  },
  {
    "text": "excuse me most of them are skipped but we do have this one failed one so we get",
    "start": "1522440",
    "end": "1527480"
  },
  {
    "text": "a little bit more information here we can see when the deployment started how long it took for the deployment to run we can also see what lifecycle event it",
    "start": "1527480",
    "end": "1534500"
  },
  {
    "text": "failed on still not enough information you say let's let's go down to the event level",
    "start": "1534500",
    "end": "1539840"
  },
  {
    "text": "information so now we've transitioned from that top level workflow that's making Fleet level decisions to the",
    "start": "1539840",
    "end": "1545960"
  },
  {
    "text": "lower level workflow that's that's showing you what actually happened on the box so here now we can see like what uh what",
    "start": "1545960",
    "end": "1553580"
  },
  {
    "text": "step in the deployment we were actually running when bad things happened so everything was going along well we did",
    "start": "1553580",
    "end": "1558679"
  },
  {
    "text": "the application stop we downloaded this new software we installed it and then when we tried to validate things went",
    "start": "1558679",
    "end": "1564799"
  },
  {
    "text": "bad right so at this point that might be enough information to act on if you were deploying a new validation script you",
    "start": "1564799",
    "end": "1571220"
  },
  {
    "text": "might just say okay well I'm gonna need to go back to the drawing board if you want to go further we can go down to the logs which most people will want to",
    "start": "1571220",
    "end": "1577279"
  },
  {
    "text": "right So eventually you want to drill down all the way to the logs and again we want to help humans out we don't want",
    "start": "1577279",
    "end": "1583700"
  },
  {
    "text": "you to have to get out your keys and try an SSH onto a random instance to figure out where the problem is so what we do",
    "start": "1583700",
    "end": "1590539"
  },
  {
    "text": "is if if any instance fails its deployment we'll pipe back the last 2K of your log files so we'll tell the last",
    "start": "1590539",
    "end": "1596539"
  },
  {
    "text": "2K make it immediately available in the console so you can kind of figure out real quickly uh Telemetry for where the",
    "start": "1596539",
    "end": "1602779"
  },
  {
    "text": "problem was in this case it's it's puked a bunch of JavaScript stack Trace to me",
    "start": "1602779",
    "end": "1608020"
  },
  {
    "text": "I'm not going to debug it here you probably don't want me to do that uh",
    "start": "1608020",
    "end": "1614720"
  },
  {
    "text": "so there's an example of kind of helping the humans out where what we really wanted to do was we wanted to encourage",
    "start": "1614720",
    "end": "1619760"
  },
  {
    "text": "the system uh to give us a high level overview and let us drill down into the thing we",
    "start": "1619760",
    "end": "1625279"
  },
  {
    "text": "cared about um rather than kind of giving us all the information that we could possibly want",
    "start": "1625279",
    "end": "1630320"
  },
  {
    "text": "and forcing us to kind of sift through it manually uh a related a parallel uh a corollary",
    "start": "1630320",
    "end": "1637100"
  },
  {
    "start": "1633000",
    "end": "1656000"
  },
  {
    "text": "if you will to helping the humans out is to be explicit so um",
    "start": "1637100",
    "end": "1642200"
  },
  {
    "text": "part of sometimes you can present information in such a way that it's not actionable and we definitely saw cases",
    "start": "1642200",
    "end": "1647720"
  },
  {
    "text": "of this as we were kind of iterating on Apollo and making it better and better sometimes we would end up in a place",
    "start": "1647720",
    "end": "1653720"
  },
  {
    "text": "where we didn't really know what the right thing was so let me talk about that one um remember earlier I talked about app",
    "start": "1653720",
    "end": "1659659"
  },
  {
    "start": "1656000",
    "end": "1836000"
  },
  {
    "text": "spec files and I said Apollo had a slightly different convention so the way Apollo lets you specify what scripts to run",
    "start": "1659659",
    "end": "1667039"
  },
  {
    "text": "during a particular life cycle event is it has a folder based convention so we would have folders that were named",
    "start": "1667039",
    "end": "1673159"
  },
  {
    "text": "with particular lifecycle events you would just drag the files that you wanted to run in the folder really easy",
    "start": "1673159",
    "end": "1678919"
  },
  {
    "text": "to configure you just drag your files in and then we would run them sort of ask a better ask eBay so we'd run them in some",
    "start": "1678919",
    "end": "1685820"
  },
  {
    "text": "order that you specified so this was a great idea and it worked pretty well uh",
    "start": "1685820",
    "end": "1691159"
  },
  {
    "text": "the the problem came when we allowed customers to combine multiple applications into a single deployment so",
    "start": "1691159",
    "end": "1697400"
  },
  {
    "text": "now we would dump a collection of the scripts to run and the names would",
    "start": "1697400",
    "end": "1702440"
  },
  {
    "text": "Collide right so two people would either want to name their stuff the same way and so then it became a war of trying to",
    "start": "1702440",
    "end": "1707659"
  },
  {
    "text": "get your stuff to run first during the deployment and so people came up with these kind of silly names you know you",
    "start": "1707659",
    "end": "1713000"
  },
  {
    "text": "would prefix it with a bunch of zeros and a one to try and get your thing to go first first that made it really hard so when you",
    "start": "1713000",
    "end": "1720020"
  },
  {
    "text": "glance at a list of these it's really hard to kind of tell what's happening or what's changing so this is actually two",
    "start": "1720020",
    "end": "1726260"
  },
  {
    "text": "versions the top box is version one of this app deployment and the bottom box is the second version if you glance at",
    "start": "1726260",
    "end": "1731960"
  },
  {
    "text": "it you can figure it out but it takes a little bit of mental uh diffing in your mind to kind of figure out which version",
    "start": "1731960",
    "end": "1738320"
  },
  {
    "text": "has changed you can see here this last file changed from V2 to V3 and some",
    "start": "1738320",
    "end": "1744200"
  },
  {
    "text": "other thing changed 14. so we went from 15 to 14. um this was made a little bit more",
    "start": "1744200",
    "end": "1750500"
  },
  {
    "text": "difficult because since it's a file system we overwrote it every time we did a deployment so uh if you did an",
    "start": "1750500",
    "end": "1757400"
  },
  {
    "text": "appointment and something broke and you went to the file system to see what changed between version one and version two you didn't have that information",
    "start": "1757400",
    "end": "1763039"
  },
  {
    "text": "available we had overwritten it with the new files so we wanted to do better right so we",
    "start": "1763039",
    "end": "1768980"
  },
  {
    "text": "wanted to do better in code to play and we ended up with an app spec which I've shown a couple times now so you guys are old hats at app specs so here's a diff",
    "start": "1768980",
    "end": "1776480"
  },
  {
    "text": "of version one and version two of an app spec um I've color coded it to cheat and make my point but hopefully it's pretty",
    "start": "1776480",
    "end": "1782419"
  },
  {
    "text": "obvious what's changed between the two versions right so between version one and version two at a glance I can really",
    "start": "1782419",
    "end": "1787760"
  },
  {
    "text": "quickly see uh that um the start server has changed from version one to version",
    "start": "1787760",
    "end": "1793340"
  },
  {
    "text": "two and I've added a new validation script so because an app spec is just a configuration file we would totally",
    "start": "1793340",
    "end": "1800179"
  },
  {
    "text": "encourage all of our customers to check it in with your application that you're deploying and Version Control it right get that history over time we found it's",
    "start": "1800179",
    "end": "1806779"
  },
  {
    "text": "been very valuable to be able to go back in time and look at an app spec and say what actually changed between here and",
    "start": "1806779",
    "end": "1812779"
  },
  {
    "text": "here right it's a really quick like sanity check for did something did someone change something that was",
    "start": "1812779",
    "end": "1818779"
  },
  {
    "text": "important right did we remove a script that was valuable to our deployment or add something new that's likely the",
    "start": "1818779",
    "end": "1824419"
  },
  {
    "text": "candidate for failure and if you if you Version Control this file you get that kind of really quickly you don't have to",
    "start": "1824419",
    "end": "1829580"
  },
  {
    "text": "go to the instance and figure something out so this is an example of being explicit",
    "start": "1829580",
    "end": "1837039"
  },
  {
    "start": "1836000",
    "end": "1927000"
  },
  {
    "text": "lesson five uh works well with others this guy's definitely working well with others",
    "start": "1837440",
    "end": "1842899"
  },
  {
    "text": "so one thing we realized about Apollo uh in the beginning our customers used Apollo directly a lot so they would go",
    "start": "1842899",
    "end": "1849919"
  },
  {
    "text": "to the Apollo website in our case the code deploy console and they would do all their work there and then the",
    "start": "1849919",
    "end": "1856640"
  },
  {
    "text": "company kept growing we kept adding more and more tooling we added you know build Services test Services continuous",
    "start": "1856640",
    "end": "1862399"
  },
  {
    "text": "integration you know the whole nine yards so we're building more and more Tools around Apollo the engineers in",
    "start": "1862399",
    "end": "1868700"
  },
  {
    "text": "Apollo made a really smart decision which was that they didn't try and force people to go to their application to do",
    "start": "1868700",
    "end": "1874100"
  },
  {
    "text": "their work right so Apollo really gracefully slotted into that lower level building block piece",
    "start": "1874100",
    "end": "1881200"
  },
  {
    "text": "and and today most people accomplish deployments in Apollo and never go to",
    "start": "1881200",
    "end": "1886399"
  },
  {
    "text": "the web page right because they're kicked off by other systems they go to their continuous integration environment",
    "start": "1886399",
    "end": "1891440"
  },
  {
    "text": "their code Pipeline and they they uh and Apollo is just triggered as a as a",
    "start": "1891440",
    "end": "1896840"
  },
  {
    "text": "matter of course right and so um we felt like that was a really key advantage to keeping Apollo relevant for",
    "start": "1896840",
    "end": "1903620"
  },
  {
    "text": "for our internal customers same way with code deploy we wanted to build a lower level building block that",
    "start": "1903620",
    "end": "1909380"
  },
  {
    "text": "kind of did one thing and focused on it we wanted to focus on getting your bits from your repo onto the box and and",
    "start": "1909380",
    "end": "1915440"
  },
  {
    "text": "running some code for you right and so uh you know we expect some customers will use could deploy directly respect a",
    "start": "1915440",
    "end": "1922039"
  },
  {
    "text": "lot of customers will do that but we really wanted to make sure that you could use it with just about anything you wanted to use it with",
    "start": "1922039",
    "end": "1927740"
  },
  {
    "start": "1927000",
    "end": "2107000"
  },
  {
    "text": "uh so these are some of our integration Partners we worked really hard to try and get a bunch of people on board uh",
    "start": "1927740",
    "end": "1933140"
  },
  {
    "text": "with code deploy from the beginning um here's a here's a sample of them GitHub is a good example so we have",
    "start": "1933140",
    "end": "1938419"
  },
  {
    "text": "GitHub as a as a repository type something that you can do with GitHub that you can't do",
    "start": "1938419",
    "end": "1944299"
  },
  {
    "text": "um through an S3 repository is you can configure GitHub so that every time you check in it immediately kicks off a",
    "start": "1944299",
    "end": "1949399"
  },
  {
    "text": "deployment so you can just get that automation for free so that's a case where uh the experience",
    "start": "1949399",
    "end": "1955399"
  },
  {
    "text": "is richer when we integrated with a partner let me let me do another demo I'll show you one other integration that we did",
    "start": "1955399",
    "end": "1964179"
  },
  {
    "text": "so our old friend Jenkins uh I'm going to assume people in this room",
    "start": "1967539",
    "end": "1972799"
  },
  {
    "text": "have heard of Jenkins but if you haven't it's a continuous integration open source system a lot of people use it to",
    "start": "1972799",
    "end": "1979340"
  },
  {
    "text": "kind of automate a release process so when chat when code gets checked in you can make Jenkins pull it down build it",
    "start": "1979340",
    "end": "1986000"
  },
  {
    "text": "run tests for you and kind of March it through a release process so we know a lot of people use Jenkins",
    "start": "1986000",
    "end": "1992059"
  },
  {
    "text": "it's very popular tool so we wrote a plug-in for code deploys that you could use code deploy with Jenkins and not have to work too hard at it",
    "start": "1992059",
    "end": "1998600"
  },
  {
    "text": "so you'll remember at the beginning of the talk I did a quick demo of code",
    "start": "1998600",
    "end": "2004659"
  },
  {
    "text": "deploy from the command line where I kicked off a deployment uh using chef",
    "start": "2004659",
    "end": "2009940"
  },
  {
    "text": "and deployed a tomcat app so I'll do that same thing from from",
    "start": "2009940",
    "end": "2015039"
  },
  {
    "text": "Jenkins so the nice thing so just as a quick aside it had been a while since I'd used",
    "start": "2015039",
    "end": "2021340"
  },
  {
    "text": "Jenkins and I came back to it and everything was right where I wanted it to be so uh so I'll just kick off a new build",
    "start": "2021340",
    "end": "2028419"
  },
  {
    "text": "build a scheduled we should see it pop up down here so I can go to the build",
    "start": "2028419",
    "end": "2035200"
  },
  {
    "text": "and I actually am getting my console output directly from the build so at the top you can see I actually pull down a",
    "start": "2035200",
    "end": "2041500"
  },
  {
    "text": "revision from git I call Maven package on it the build succeeds and then down",
    "start": "2041500",
    "end": "2047260"
  },
  {
    "text": "here I'm actually watching the deployment happen maybe or did I break my deployment",
    "start": "2047260",
    "end": "2053138"
  },
  {
    "text": "this is what happens when you build on top of your your application so you uh",
    "start": "2053139",
    "end": "2058358"
  },
  {
    "text": "oh okay so it actually it did it did start the deployment so we could sit here and uh there you go so now it's",
    "start": "2058359",
    "end": "2064300"
  },
  {
    "text": "getting some status if you pull the service too quickly and it doesn't have any status for you it tells you it doesn't have any status",
    "start": "2064300",
    "end": "2071080"
  },
  {
    "text": "um I'm not going to make you guys sit through the pain of watching this command line update but rest assured if",
    "start": "2071080",
    "end": "2076540"
  },
  {
    "text": "you wanted to you could sit here and watch uh it'll just continue to pull the service and you'll watch the update",
    "start": "2076540",
    "end": "2081638"
  },
  {
    "text": "happen so there's an example of one of our Integrations with Jenkins I haven't noted it yet but",
    "start": "2081639",
    "end": "2089080"
  },
  {
    "text": "all the all of the examples I've done today as well as quite a few more are available on AWS Labs so you can go down",
    "start": "2089080",
    "end": "2095618"
  },
  {
    "text": "to AWS labs and download all these examples and try them out yourself start playing with them uh so let me go back",
    "start": "2095619",
    "end": "2104339"
  },
  {
    "text": "cool so those are the lessons I had um so let's go over them again when we look",
    "start": "2105280",
    "end": "2112000"
  },
  {
    "start": "2107000",
    "end": "2173000"
  },
  {
    "text": "back at Apollo what we really realize is a lot of the lessons are are the things",
    "start": "2112000",
    "end": "2117220"
  },
  {
    "text": "that you would you would write down on a list of desirable features for any tool that you build right so you want your",
    "start": "2117220",
    "end": "2123520"
  },
  {
    "text": "tools to be flexible you want them to be safe but uh not too safe they should help the users make the",
    "start": "2123520",
    "end": "2130060"
  },
  {
    "text": "right decisions they should provide Clarity when you're using them and they should work with what you already have because no one wants to",
    "start": "2130060",
    "end": "2136060"
  },
  {
    "text": "pick up their whole process and move it somewhere else and so that's that's really the lessons we kind of took away from Apollo it's",
    "start": "2136060",
    "end": "2142780"
  },
  {
    "text": "one of those things where when you write down the list it seems self-evident and then when you try and execute on it it can be very difficult so that's why we",
    "start": "2142780",
    "end": "2149079"
  },
  {
    "text": "wanted to look at something that actually succeeded in the past um just a quick plug for code deploy if",
    "start": "2149079",
    "end": "2156040"
  },
  {
    "text": "you want to try it out you can do your first deployment from the Management console you can click through a wizard and it'll spin up ec2 capacity and do",
    "start": "2156040",
    "end": "2163359"
  },
  {
    "text": "your first deployment uh download the CLI and you can start downloading the sample app",
    "start": "2163359",
    "end": "2168700"
  },
  {
    "text": "and like I just mentioned you can check out AWS Labs if you want to try any of the samples",
    "start": "2168700",
    "end": "2173920"
  },
  {
    "text": "attribution for the art so uh I stole all this art from other people please give them props",
    "start": "2173920",
    "end": "2180160"
  },
  {
    "start": "2179000",
    "end": "2211000"
  },
  {
    "text": "that's all I had today so thank you for your time thank you for coming out I",
    "start": "2180160",
    "end": "2185380"
  },
  {
    "text": "believe we're going to take questions out in the hall actually I have a couple minutes so as this happens every time",
    "start": "2185380",
    "end": "2190599"
  },
  {
    "text": "you do a talk I can take questions for eight minutes up here if we want um",
    "start": "2190599",
    "end": "2196920"
  },
  {
    "text": "thank you",
    "start": "2196920",
    "end": "2199980"
  },
  {
    "text": "cool I'm sorry",
    "start": "2203740",
    "end": "2210300"
  },
  {
    "start": "2211000",
    "end": "2714000"
  },
  {
    "text": "no so the question was does uh code deploy spin up in ec2 instance for you the answer is no back to that point",
    "start": "2211420",
    "end": "2217720"
  },
  {
    "text": "where we wanted to keep it as a building block service that really did one thing we focused it on code deployment a lot",
    "start": "2217720",
    "end": "2223420"
  },
  {
    "text": "of our customers have integrated it with cloud formation if you're an auto scaling customer you can set up hooks",
    "start": "2223420",
    "end": "2228520"
  },
  {
    "text": "that will automatically perform a deployment when a new instance is scaled up and we'll even make sure that the",
    "start": "2228520",
    "end": "2234339"
  },
  {
    "text": "instance doesn't enter service until the deployment succeeds so if we fail the deployment Auto scaling we'll put the",
    "start": "2234339",
    "end": "2239500"
  },
  {
    "text": "instance in service it'll go get a fresh instance and try again",
    "start": "2239500",
    "end": "2244200"
  },
  {
    "text": "uh Jenkins we actually wrote a plug-in for so it's calling the service directly",
    "start": "2245980",
    "end": "2251339"
  },
  {
    "text": "uh during a deployment um so we do have some sample scripts that you can drop into your app spec",
    "start": "2255940",
    "end": "2261579"
  },
  {
    "text": "which will will unbind and bind back to the load balancer as part of the deployment and if we can't if we can't",
    "start": "2261579",
    "end": "2267460"
  },
  {
    "text": "get a hold of elb we will fail the deployment um but uh is that what you're asking or is it",
    "start": "2267460",
    "end": "2274480"
  },
  {
    "text": "okay today today you get that that uh",
    "start": "2274480",
    "end": "2280000"
  },
  {
    "text": "functionality through Auto scaling we're definitely looking uh at other options to kind of carry that forward but today",
    "start": "2280000",
    "end": "2286480"
  },
  {
    "text": "no",
    "start": "2286480",
    "end": "2288780"
  },
  {
    "text": "I'm sorry can you speak a little louder",
    "start": "2292240",
    "end": "2295619"
  },
  {
    "text": "good question so the answer was how do we deal with common resources like a database update uh between the fleet",
    "start": "2300040",
    "end": "2305980"
  },
  {
    "text": "today we don't have a great answer we're really focused on the the life cycle that's happening on the on the um",
    "start": "2305980",
    "end": "2311800"
  },
  {
    "text": "on the actual Fleet we've talked about extending that concept of life cycle events to have kind of global pre and",
    "start": "2311800",
    "end": "2318460"
  },
  {
    "text": "post hooks so you can plug it into like a broader process that's happening across the fleet but uh you know we're",
    "start": "2318460",
    "end": "2324820"
  },
  {
    "text": "kind of looking for customer feedback so if it's something you're interested in we'd love to hear it Sorry God",
    "start": "2324820",
    "end": "2331920"
  },
  {
    "text": "yeah because our system sorry the question was uh do we have to include any scripts for rollback uh yes so by",
    "start": "2334119",
    "end": "2341320"
  },
  {
    "text": "default the system will unstage any files that we know about so if you put the files in your app spec uh we will",
    "start": "2341320",
    "end": "2347920"
  },
  {
    "text": "keep track of what files were actually on the instance between versions and so if you roll back to a previous version we'll remove files that weren't there to",
    "start": "2347920",
    "end": "2354579"
  },
  {
    "text": "make the file system look like it did during that deployment but but if your scripts have side effects so if you run",
    "start": "2354579",
    "end": "2360280"
  },
  {
    "text": "scripts then they do something else we don't have any way of knowing about that so you need to take that into account with your scripts",
    "start": "2360280",
    "end": "2367680"
  },
  {
    "text": "that's correct so the two repositories that we integrate with today are S3 and GitHub",
    "start": "2370720",
    "end": "2376740"
  },
  {
    "text": "uh we love hearing from our customers so yeah uh absolutely um come talk to me if you guys you know",
    "start": "2377320",
    "end": "2383500"
  },
  {
    "text": "if you have a laundry list of the repositories you want to be able to pull code from we're always looking for what's next",
    "start": "2383500",
    "end": "2390180"
  },
  {
    "text": "right so the question was are is it a push-based deploy where we need SSH keys to log into the instance or is it a",
    "start": "2396099",
    "end": "2402460"
  },
  {
    "text": "pull-based model where we're running an agent it's the latter so it's a pool based model our agent uh the off primitive that we deal with is um is an",
    "start": "2402460",
    "end": "2409660"
  },
  {
    "text": "ec2 IM role um so so basically if you're it can be any role we don't need any special",
    "start": "2409660",
    "end": "2415420"
  },
  {
    "text": "permissions it's just how we establish the trust relationship between us and your instances",
    "start": "2415420",
    "end": "2422280"
  },
  {
    "text": "sorry which service I still didn't hear you sorry oh uh",
    "start": "2426339",
    "end": "2432280"
  },
  {
    "text": "um definitely being planned we don't have any integration yet but it's not out yet as far as I know so",
    "start": "2432280",
    "end": "2438820"
  },
  {
    "text": "we still got time",
    "start": "2438820",
    "end": "2441720"
  },
  {
    "text": "um I I don't think we're solving that sorry so the question was what what is our strategy for provisioning secret",
    "start": "2446500",
    "end": "2452380"
  },
  {
    "text": "keys and getting them to the instance today we don't have a great story with the new Key Management Services just",
    "start": "2452380",
    "end": "2457900"
  },
  {
    "text": "released we're looking uh to see if we can use that to kind of get Secrets onto the box that you can use but today",
    "start": "2457900",
    "end": "2464859"
  },
  {
    "text": "um the service isn't really solving that problem uh if you want to get secret Keys onto",
    "start": "2464859",
    "end": "2471220"
  },
  {
    "text": "the Box uh sorry uh our secrets are your secrets",
    "start": "2471220",
    "end": "2478980"
  },
  {
    "text": "um today you can if you want you can uh deploy them encrypted in the bundle that",
    "start": "2480400",
    "end": "2485859"
  },
  {
    "text": "we actually download uh and decrypt them on the box uh or you can you know bootstrap them another way",
    "start": "2485859",
    "end": "2493619"
  },
  {
    "text": "good question so the question was are we planning on integrating this with elastic Beanstalk integration with the",
    "start": "2497800",
    "end": "2502960"
  },
  {
    "text": "higher level App Management Services like Beanstalk and opsworks is definitely on our roadmap we want to make sure that if you're an existing",
    "start": "2502960",
    "end": "2508720"
  },
  {
    "text": "Beanstalk or opsworks customer uh you can you know you can use code deploy under the hood to kind of accomplish",
    "start": "2508720",
    "end": "2513880"
  },
  {
    "text": "your job but it's not there yet we're still kind of working with both those teams to figure out when we can get it in place",
    "start": "2513880",
    "end": "2520980"
  },
  {
    "text": "the question was how do you keep track of what's kind of happening end to end between you know developer environment",
    "start": "2527560",
    "end": "2533260"
  },
  {
    "text": "test environment production code pipelines is going to be the thing that solves that in a more realistic way",
    "start": "2533260",
    "end": "2538300"
  },
  {
    "text": "today you can set up separate uh um the deployment configs or deployment",
    "start": "2538300",
    "end": "2543760"
  },
  {
    "text": "groups and and I believe on one side you saw you'll get a list of the deployment groups as well as the last deployment",
    "start": "2543760",
    "end": "2549640"
  },
  {
    "text": "that happened to them and its outcome and you can drill down to a particular deployment in group see all the deployments that happen there",
    "start": "2549640",
    "end": "2555400"
  },
  {
    "text": "uh but code pipelines will really be when we can model that process in a much more visual way so you can actually go",
    "start": "2555400",
    "end": "2561940"
  },
  {
    "text": "go to a console and see like in real time where changes are where they're flowing to uh and sort of like that that",
    "start": "2561940",
    "end": "2569140"
  },
  {
    "text": "kind of data that's really holistically where changes are happening",
    "start": "2569140",
    "end": "2574619"
  },
  {
    "text": "correct yes so yeah the question was can you see a version travel across the fleet with",
    "start": "2582940",
    "end": "2588700"
  },
  {
    "text": "code pipelines yes copi plans will keep track of kind of all the changes that are happening you can get that View kind",
    "start": "2588700",
    "end": "2594460"
  },
  {
    "text": "of across everything",
    "start": "2594460",
    "end": "2597180"
  },
  {
    "text": "right sure well the question was will it will",
    "start": "2607420",
    "end": "2612760"
  },
  {
    "text": "it integrate with your QA process so we'll uh you know if you if you're using sauce Labs or something else to run",
    "start": "2612760",
    "end": "2618160"
  },
  {
    "text": "tests can it uh honor the outcome of that test to kick off a deployment or not we're definitely looking for more",
    "start": "2618160",
    "end": "2623200"
  },
  {
    "text": "integration like that today we have a few but um we'll we'll be kind of investing more and more where we hear",
    "start": "2623200",
    "end": "2629619"
  },
  {
    "text": "customer needs",
    "start": "2629619",
    "end": "2632338"
  },
  {
    "text": "sure so the question was for a more",
    "start": "2643180",
    "end": "2648700"
  },
  {
    "text": "complicated rollback scenario like if you're deploying a really complex directory structure with Tomcat uh what",
    "start": "2648700",
    "end": "2654640"
  },
  {
    "text": "will we keep track of uh we we will just keep track of the things that you tell us about in the app spec file so we'll",
    "start": "2654640",
    "end": "2659680"
  },
  {
    "text": "look at folders and we'll look at what's in those folders so the contract we have is essentially will make the the file",
    "start": "2659680",
    "end": "2667119"
  },
  {
    "text": "system look like it did when we copied from your application directory onto the instance but anything else it's going to",
    "start": "2667119",
    "end": "2673720"
  },
  {
    "text": "be up to the owner of the application to kind of write logic to unstage changes",
    "start": "2673720",
    "end": "2681599"
  },
  {
    "text": "uh so the question was is there a rollback phase in a in a deployment there's not an explicit rollback phase",
    "start": "2685300",
    "end": "2691180"
  },
  {
    "text": "in our system rollback is essentially a roll forward with an existing or with a",
    "start": "2691180",
    "end": "2696640"
  },
  {
    "text": "previous version so we basically will just run through the whole life cycle again",
    "start": "2696640",
    "end": "2702359"
  },
  {
    "text": "um oh that was perfectly timed I hit time so I'm happy to answer more questions in the hall thank you all for",
    "start": "2702819",
    "end": "2708040"
  },
  {
    "text": "coming out",
    "start": "2708040",
    "end": "2710400"
  }
]