[
  {
    "text": "I had the giggle it's working you get gigle okay hello my name is Norm Johansson and this is Steve Roberts",
    "start": "1160",
    "end": "7680"
  },
  {
    "text": "we're both software de developers at AWS and I just came to a great conclusion that this is a career",
    "start": "7680",
    "end": "14080"
  },
  {
    "text": "highlight to go just after Jeff Bezos it's not really very common I have him to warm me up so pretty happy about",
    "start": "14080",
    "end": "20359"
  },
  {
    "text": "that so what we're going to do today is we're going to take a de a net SQL Server based application uh in our case",
    "start": "20359",
    "end": "28199"
  },
  {
    "text": "it's a photo sharing site called Cloud shots and we're going to deploy that to the AWS",
    "start": "28199",
    "end": "35360"
  },
  {
    "text": "Cloud about a year ago if you were to take a do net application and you wanted to deploy that to AWS your release",
    "start": "35399",
    "end": "42920"
  },
  {
    "text": "process might have been something like go spin up a few ec2 instances copy your",
    "start": "42920",
    "end": "48079"
  },
  {
    "text": "application to all those instances and then go and create and configure a load balancer and then spin up another ec2",
    "start": "48079",
    "end": "54120"
  },
  {
    "text": "instance install SQL server and then you got to figure out your whole patching of backup needs",
    "start": "54120",
    "end": "61000"
  },
  {
    "text": "so today what we have with Amazon RDS which stands for relational database Services we can create our SQL Server",
    "start": "61000",
    "end": "68000"
  },
  {
    "text": "from there and that can take care of all of our backing and patching needs and",
    "start": "68000",
    "end": "73200"
  },
  {
    "text": "then using ads elastic beant stock to host our application that can take care",
    "start": "73200",
    "end": "78720"
  },
  {
    "text": "of all of our capacity provisioning load balancing autoscaling and application",
    "start": "78720",
    "end": "83960"
  },
  {
    "text": "Health monitoring and using the ads toolkit for visual studio we can interface with the",
    "start": "83960",
    "end": "89920"
  },
  {
    "text": "these Services right from visual studio and be able to just right click on our project and say publish to AWS for to",
    "start": "89920",
    "end": "95920"
  },
  {
    "text": "deploy it if you haven't seen or installed the",
    "start": "95920",
    "end": "101479"
  },
  {
    "text": "toolkit um you can download it from our website it's at aws.amazon.com Visual",
    "start": "101479",
    "end": "108799"
  },
  {
    "text": "Studio once you have that installed you can there will be a new",
    "start": "108799",
    "end": "113880"
  },
  {
    "text": "menu item under the views menu called ads Explorer this brings up this new window",
    "start": "113880",
    "end": "119159"
  },
  {
    "text": "here up top is the list of accounts that we've got registered with the toit the toit can support multiple accounts and",
    "start": "119159",
    "end": "126680"
  },
  {
    "text": "then is the list of regions that the toit supports which supports all the regions including",
    "start": "126680",
    "end": "131800"
  },
  {
    "text": "govcloud um we're going to use us West 2 based out of Portland Oregon for today's demo and then under there is all the",
    "start": "131800",
    "end": "138840"
  },
  {
    "text": "services the tokit supports in that particular region so the first thing we need to do",
    "start": "138840",
    "end": "145440"
  },
  {
    "text": "is to create our SQL Server instance to do that we navigate to the DB instance node in the Explorer and we right click",
    "start": "145440",
    "end": "152280"
  },
  {
    "text": "and select launch DB instance now RDS supports my SQL Oracle",
    "start": "152280",
    "end": "158480"
  },
  {
    "text": "as well as SQL server today we're going to use SQL Server web",
    "start": "158480",
    "end": "163720"
  },
  {
    "text": "Edition now the first thing we need to do here is we need to specify our database engine this is saying do we",
    "start": "164200",
    "end": "170239"
  },
  {
    "text": "want to use SQL Server 2008 or 2012 we want to use the latest and greatest so",
    "start": "170239",
    "end": "175519"
  },
  {
    "text": "we're going to use 2012 then we need to choose the instance CL class the the size of the database we",
    "start": "175519",
    "end": "181800"
  },
  {
    "text": "want our application is overall pretty small so we're just going to choose a small database then we need to give our",
    "start": "181800",
    "end": "187959"
  },
  {
    "text": "database server unique name and put in a username and password this is the admin",
    "start": "187959",
    "end": "193440"
  },
  {
    "text": "password for essentially SQL",
    "start": "193440",
    "end": "197159"
  },
  {
    "text": "Server up top here is the database Port that SQL Server will be configured for",
    "start": "199599",
    "end": "205000"
  },
  {
    "text": "when it's created 1433 is SQL server's default port and it's usually just to",
    "start": "205000",
    "end": "210159"
  },
  {
    "text": "use that one reason you might want to change that value is if you want to connect to your SQL Server database",
    "start": "210159",
    "end": "216200"
  },
  {
    "text": "locally uh your local network might be blocking that Port if that's the case you'll need to work with your it",
    "start": "216200",
    "end": "221920"
  },
  {
    "text": "department and figure out which ports are accessible and use one of those ports we're going to use the default",
    "start": "221920",
    "end": "228040"
  },
  {
    "text": "Security Group and then this checkbox at the bottom what that does is by default",
    "start": "228040",
    "end": "234680"
  },
  {
    "text": "RDS is going to block all machines access to our SQL Server instance there are two ways to add",
    "start": "234680",
    "end": "241120"
  },
  {
    "text": "exceptions to that one is by IP address and that's what this checkbox is doing it's going to add our laptop's IP",
    "start": "241120",
    "end": "248239"
  },
  {
    "text": "address is an exception to that to that Security Group the other way to do that",
    "start": "248239",
    "end": "253400"
  },
  {
    "text": "is based off of ec2 security groups and that means any ec2 instances that are",
    "start": "253400",
    "end": "258720"
  },
  {
    "text": "spun up in that using that Security Group will also have access to that um",
    "start": "258720",
    "end": "263880"
  },
  {
    "text": "SQL Server instance and when we deploy this to be that's how those ec2 instances will have access to the the",
    "start": "263880",
    "end": "269720"
  },
  {
    "text": "database server let's go and push next now SQL or RDS is going to do daily",
    "start": "269720",
    "end": "278039"
  },
  {
    "text": "backups here we can choose what time a day we want it to take the backups we",
    "start": "278039",
    "end": "283120"
  },
  {
    "text": "can also choose how many days to retain backups for we also can choose what time",
    "start": "283120",
    "end": "289440"
  },
  {
    "text": "of day we'd want RDS to apply any system patches um we're going to go ahead and just leave everything at the default for",
    "start": "289440",
    "end": "296160"
  },
  {
    "text": "now and now we can review our settings and go ahead and push",
    "start": "296160",
    "end": "301639"
  },
  {
    "text": "lunch so this has brought up our RDS view the instance view from the toolkit you can see there's our new database it",
    "start": "307280",
    "end": "313880"
  },
  {
    "text": "status is currently creating it takes about 10 minutes or so for a SQL Server",
    "start": "313880",
    "end": "318960"
  },
  {
    "text": "instance to become available um we obviously don't want to wait that long so Steve shortly before the demo created",
    "start": "318960",
    "end": "324639"
  },
  {
    "text": "another um SQL Server instance and we're going to use that throughout the rest of the talk",
    "start": "324639",
    "end": "330440"
  },
  {
    "text": "so now that we've got our database what we need to do now is configure our application to use that new database",
    "start": "330440",
    "end": "337080"
  },
  {
    "text": "instance so if we go back to our applications web config",
    "start": "337080",
    "end": "342280"
  },
  {
    "text": "file you notice there are a couple databased connection strings these are just using SQL Server Express as we were",
    "start": "343440",
    "end": "348960"
  },
  {
    "text": "developing everything locally um we're just going to go ahead and just delete those um and Steve happen to have copied",
    "start": "348960",
    "end": "356039"
  },
  {
    "text": "a Skeleton version of our connection strings these are just your standard SQL Server connection strings but the things we still need to",
    "start": "356039",
    "end": "362919"
  },
  {
    "text": "update are the data source for the newly created um SQL Server instance uh a",
    "start": "362919",
    "end": "368599"
  },
  {
    "text": "quick way to go get that value is if we go back to the RDS View and we can select uh right click on",
    "start": "368599",
    "end": "377000"
  },
  {
    "text": "our instance and select copy data source and then we go back to the web config file and paste that in you do that for",
    "start": "377000",
    "end": "383840"
  },
  {
    "text": "both our connection strings",
    "start": "383840",
    "end": "391560"
  },
  {
    "text": "and then we just need to update the username and password don't",
    "start": "392960",
    "end": "397919"
  },
  {
    "text": "look we spell it correctly too and if our database was on a non",
    "start": "398000",
    "end": "405639"
  },
  {
    "text": "standard default Port like 1433 that copy would have post fixed the the port address on there for",
    "start": "405639",
    "end": "411560"
  },
  {
    "text": "us okay so it looks like that's all good let's go ahead and run this locally make sure everything's working",
    "start": "411560",
    "end": "418120"
  },
  {
    "text": "fine",
    "start": "418520",
    "end": "421520"
  },
  {
    "text": "now our application is an entity frame rate code first application which means when it first starts up it's going to go",
    "start": "425479",
    "end": "431120"
  },
  {
    "text": "autocreate our database and push in all of our schema and any sample data so our our initial load can take a little bit",
    "start": "431120",
    "end": "438080"
  },
  {
    "text": "of startup",
    "start": "438080",
    "end": "440680"
  },
  {
    "text": "time there we go there's pictures that happens to be my wife for a shout out to",
    "start": "444759",
    "end": "450560"
  },
  {
    "text": "her and these are our pictures of uh some of the pictures from our that taken",
    "start": "450560",
    "end": "455680"
  },
  {
    "text": "by our team back in Seattle from the net team um so let's go ahead and make sure that that application or that database",
    "start": "455680",
    "end": "462000"
  },
  {
    "text": "was really used if we go back to uh the RDS view we can right click on our",
    "start": "462000",
    "end": "468080"
  },
  {
    "text": "database server and select add to server explore this brings up visual studios's",
    "start": "468080",
    "end": "474720"
  },
  {
    "text": "default uh connection dialog box we AutoFill in as much as we can so you just have to enter in your password and",
    "start": "474720",
    "end": "480680"
  },
  {
    "text": "select the database that was",
    "start": "480680",
    "end": "483680"
  },
  {
    "text": "autocreated there it goes there's our database and now it's important remember this is just SQL Server now at this",
    "start": "491919",
    "end": "497159"
  },
  {
    "text": "point you can use any tool that you're used to using for SQL Server we're just letting RDS manage the instance for us",
    "start": "497159",
    "end": "503240"
  },
  {
    "text": "and it's going to take care of our patching and backup",
    "start": "503240",
    "end": "506919"
  },
  {
    "text": "needs there's data uh so now our application is",
    "start": "508440",
    "end": "514120"
  },
  {
    "text": "configured with our RDS instance I'm going to hand this over to Steve who's going to walk us through how to deploy",
    "start": "514120",
    "end": "519159"
  },
  {
    "text": "this through 8B elastic beanock okay so getting the database",
    "start": "519159",
    "end": "524839"
  },
  {
    "text": "part of the application was pretty simple we can use all our standard tools we're good to go before we actually",
    "start": "524839",
    "end": "530480"
  },
  {
    "text": "publish the application though there's a couple of things we want to consider basically for the project settings when",
    "start": "530480",
    "end": "535959"
  },
  {
    "text": "they're living in the Adas Cloud do we need to make any changes secondly once we deploy to beanock for those of you",
    "start": "535959",
    "end": "542399"
  },
  {
    "text": "that aren't familiar with the environment what does it look like how is it structured so let's consider the",
    "start": "542399",
    "end": "547640"
  },
  {
    "text": "project settings first so nor can you bring up the publish settings publishing to AWS from Visual",
    "start": "547640",
    "end": "553360"
  },
  {
    "text": "Studio simply augments the existing publishing pipeline that you already have we didn't take anything away so",
    "start": "553360",
    "end": "560320"
  },
  {
    "text": "what this means is that all of the publishing settings you can see in front of you are still relevant you can still use these you'll see that we've elected",
    "start": "560320",
    "end": "567160"
  },
  {
    "text": "to keep the default of only deploying uh only deploying the files that the application actually needs to run but",
    "start": "567160",
    "end": "573720"
  },
  {
    "text": "we've made a couple of changes below we've elected to remove for example app data content we don't need it anymore",
    "start": "573720",
    "end": "578800"
  },
  {
    "text": "we're using RDS we've elected to remove uh program ebook symbols um let's keep",
    "start": "578800",
    "end": "583839"
  },
  {
    "text": "the size of the web deployment archive down and for this particular demo we've elected to do uh pre-compilation before",
    "start": "583839",
    "end": "589839"
  },
  {
    "text": "we actually deploy out you can also change the virtual route If You Wish U all these changes are fine when we",
    "start": "589839",
    "end": "595959"
  },
  {
    "text": "actually deploy out to the instances we'll use rewrite rules to ser your application at the root of I on the",
    "start": "595959",
    "end": "601600"
  },
  {
    "text": "instance so you have complete Freedom here in addition if you're familiar with the web publishing pipeline in visual",
    "start": "601600",
    "end": "608000"
  },
  {
    "text": "studio and the MS build extensions all of that's available to you what we actually deploy is a web deploy archive",
    "start": "608000",
    "end": "614680"
  },
  {
    "text": "so again if you're familiar with parameterization for web deploy that's available to you as well so you have complete flexibility in what actually",
    "start": "614680",
    "end": "620839"
  },
  {
    "text": "gets published out to beanock in this process now once we actually do deploy",
    "start": "620839",
    "end": "626200"
  },
  {
    "text": "to Beanstalk what does it look like well let's use the A6 Explorer to take a look if we expand the Explorer node in the",
    "start": "626200",
    "end": "634040"
  },
  {
    "text": "sorry the Beanstalk node in the Explorer we can see for this particular sample here we've got three top level entries",
    "start": "634040",
    "end": "639800"
  },
  {
    "text": "these are Beanstalk applications and as far as net is concerned these correspond to your Visual Studio",
    "start": "639800",
    "end": "646959"
  },
  {
    "text": "Projects each application can have a number of versions stored away uh at any",
    "start": "646959",
    "end": "652279"
  },
  {
    "text": "given time so if we actually uh right click on one of those um let's use shots Master our Master environment and view",
    "start": "652279",
    "end": "659839"
  },
  {
    "text": "status and then go to the versions tab we can see over time that we've deployed four versions of this particular",
    "start": "659839",
    "end": "665839"
  },
  {
    "text": "application but where is the version running well if we expand an application node we get what are known as",
    "start": "665839",
    "end": "672880"
  },
  {
    "text": "environments and each application can have a number of environments running simultaneously running different",
    "start": "672880",
    "end": "678040"
  },
  {
    "text": "versions of the application so for example if we expand the MVC test application one that we have here we've",
    "start": "678040",
    "end": "684680"
  },
  {
    "text": "got simulating three uh release stages the developer test a release test and production",
    "start": "684680",
    "end": "690560"
  },
  {
    "text": "environment uh shots Master is room with a single environment um quite simple so",
    "start": "690560",
    "end": "696000"
  },
  {
    "text": "it's pretty simple it's pretty straightforward there aren't many moving parts for you to worry about the environment is where you'll find the AWS",
    "start": "696000",
    "end": "702519"
  },
  {
    "text": "resources that are surfacing your application so you get one or more ec2 instances the load balancer and the auto",
    "start": "702519",
    "end": "708279"
  },
  {
    "text": "scaling group and later on we'll take a look at a running environment and drilled into some more some more of that",
    "start": "708279",
    "end": "713360"
  },
  {
    "text": "information so let's get started on publishing the application to match up with RDS now now when your application is",
    "start": "713360",
    "end": "720839"
  },
  {
    "text": "running on the ec2 instances it's being monitored for for health basically every so often a ping is sent a simple head",
    "start": "720839",
    "end": "727720"
  },
  {
    "text": "request to a particular page in the application um and all we expect is a 200 response back just to say yeah I'm",
    "start": "727720",
    "end": "734480"
  },
  {
    "text": "still here I'm still responding if a given instance fails to respond for a",
    "start": "734480",
    "end": "740440"
  },
  {
    "text": "particular number of times I believe it's 10 uh the instance will be recycled the inst will be shut down and a fresh",
    "start": "740440",
    "end": "745760"
  },
  {
    "text": "instance started you don't have to do anything uh on your on your side to get that to work now the default health check page",
    "start": "745760",
    "end": "753720"
  },
  {
    "text": "is the root page of your application and for most applications it's could well be fine but for an asp.net application you",
    "start": "753720",
    "end": "760279"
  },
  {
    "text": "know that could well involve some jitting uh code compilation on the on the instance which for a health check if",
    "start": "760279",
    "end": "766160"
  },
  {
    "text": "the instance isn't being used you know potentially could be quite heavy so a better practice that we recommend is that you dedicate a custom HTML page to",
    "start": "766160",
    "end": "773399"
  },
  {
    "text": "that process so Norm can you add me a new HTML page sure thing and we're going to call it ping",
    "start": "773399",
    "end": "780560"
  },
  {
    "text": "check. HTML just so we remember what we're doing with it now later on when we publish we'll tell beog that this is the",
    "start": "780560",
    "end": "787440"
  },
  {
    "text": "page it should Target for the health checks that's all we need to do to the page it's only going to serve head",
    "start": "787440",
    "end": "792800"
  },
  {
    "text": "requests we can just close it down now we're done now the other two changes or best practices we've already made in the",
    "start": "792800",
    "end": "799279"
  },
  {
    "text": "web config file um so if we scroll down through the file to the system.web",
    "start": "799279",
    "end": "806240"
  },
  {
    "text": "section you'll see that we've already generated an asp net machine key your application is going to be surfaced",
    "start": "806240",
    "end": "812199"
  },
  {
    "text": "potentially on more than one ec2 instance so to enable consistent encryption and and decryption of view",
    "start": "812199",
    "end": "818120"
  },
  {
    "text": "State it's best to do this before you do your first deployment otherwise while the application is live and new",
    "start": "818120",
    "end": "823920"
  },
  {
    "text": "instances spin up for redeployment for example you know some customers are actually hitting your site you know may",
    "start": "823920",
    "end": "829360"
  },
  {
    "text": "get a little bit confused so do this first the second best practice we want to bring to your attention though is",
    "start": "829360",
    "end": "834639"
  },
  {
    "text": "probably far more important if we scroll up through the file to the application settings",
    "start": "834639",
    "end": "840279"
  },
  {
    "text": "you can see here that we have embedded AWS access and secret Keys now for local",
    "start": "840279",
    "end": "846680"
  },
  {
    "text": "testing purposes this is fine you may want to put in Source control rules so that people don't check these into Source control that's fine but when this",
    "start": "846680",
    "end": "854720"
  },
  {
    "text": "file goes out to in deployment it's going to exist in a zip file in S3 now",
    "start": "854720",
    "end": "860560"
  },
  {
    "text": "that's fine it's kind of secure but it only takes one slip for somebody to make that file public and your keys are",
    "start": "860560",
    "end": "866800"
  },
  {
    "text": "potentially out in the open so what we recommend that you do is make use of web config transformations to restrip those",
    "start": "866800",
    "end": "873800"
  },
  {
    "text": "keys out and during deployment there's an alternative method of getting the keys that the application needs onto the",
    "start": "873800",
    "end": "880519"
  },
  {
    "text": "ec2 instances in an outof band manner that's more secure and doesn't leave your keys sitting in S3 the way we do",
    "start": "880519",
    "end": "887560"
  },
  {
    "text": "this is to use web config Transformations now if you haven't used these they're pretty simple to set up",
    "start": "887560",
    "end": "893399"
  },
  {
    "text": "you simply rightclick on the web config entry in solution Explorer and you'll see an add config transforms entry if",
    "start": "893399",
    "end": "899279"
  },
  {
    "text": "you select that Visual Studio will add one transform file per build configuration so normally if you expand",
    "start": "899279",
    "end": "905399"
  },
  {
    "text": "the tree thank you you'll see here we have a debug and a release config let's open up the debug config now all these",
    "start": "905399",
    "end": "911800"
  },
  {
    "text": "are are relatively simple rules for uh controlling what actually what changes",
    "start": "911800",
    "end": "917399"
  },
  {
    "text": "happen to the web config file during deployment it doesn't affect local debugging okay so here you can see two",
    "start": "917399",
    "end": "924199"
  },
  {
    "text": "rules they're just removing those access and secret keys and we could do the same thing with the connection strings that we use earlier on but to keep the demo",
    "start": "924199",
    "end": "930519"
  },
  {
    "text": "simple we're going to just leave the connection strings as they are so with those two best practices",
    "start": "930519",
    "end": "937160"
  },
  {
    "text": "uh reiterated let's get out and publish this application and the way that we do this is right click on the project in",
    "start": "937160",
    "end": "943600"
  },
  {
    "text": "solution Explorer and select publish to AWS and this launches the AWS publishing",
    "start": "943600",
    "end": "950000"
  },
  {
    "text": "wizard now the first thing that the wizard wants to know is what account is it going to publish the artifacts as and",
    "start": "950000",
    "end": "956199"
  },
  {
    "text": "this is not necessarily the same as the as the account that the application is going to run with in fact we would",
    "start": "956199",
    "end": "961240"
  },
  {
    "text": "recommend that it isn't okay in addition what region are we going to deploy to in",
    "start": "961240",
    "end": "966279"
  },
  {
    "text": "this case we're going to go to us West 2 to match up with our RDS database now this wizard can also be used to",
    "start": "966279",
    "end": "972440"
  },
  {
    "text": "republish or redeploy applications we'll see that later on but for now let's go ahead and pick to deploy a new",
    "start": "972440",
    "end": "977800"
  },
  {
    "text": "application to elastic beanock now we get to start defining the",
    "start": "977800",
    "end": "983560"
  },
  {
    "text": "application structure that I showed you inside Beanstalk itself okay so we need to give the application a name and we",
    "start": "983560",
    "end": "988600"
  },
  {
    "text": "Pres set that from the visual studio project name but that can be changed you can add an optional",
    "start": "988600",
    "end": "994040"
  },
  {
    "text": "description and the bottom you can see here an option called incremental deployment now deployment can be done in",
    "start": "994040",
    "end": "999240"
  },
  {
    "text": "one of two ways incremental non-incremental taking non-incremental mode first remember I said earlier on",
    "start": "999240",
    "end": "1006079"
  },
  {
    "text": "that what we actually publish is a web deploy archive okay so that's a zip file in non-incremental mode the zip",
    "start": "1006079",
    "end": "1013600"
  },
  {
    "text": "file is simply pushed up to S3 and then Beanstalk is notified of the new webplay archive and it will pull it down to the",
    "start": "1013600",
    "end": "1020079"
  },
  {
    "text": "running instances in non sorry in incremental mode the toolkit will maintain will",
    "start": "1020079",
    "end": "1026600"
  },
  {
    "text": "create and maintain a local git repository on your machine it's uh stored under the app data local folder",
    "start": "1026600",
    "end": "1032839"
  },
  {
    "text": "so it doesn't interfere with any git repository that you have for your project itself okay um and the web",
    "start": "1032839",
    "end": "1038319"
  },
  {
    "text": "deploy archive is what gets committed to that git repo the contents of the git repo your archive are then pushed out to",
    "start": "1038319",
    "end": "1045640"
  },
  {
    "text": "S3 and Beanstalk um now what this means to you is is that on an initial",
    "start": "1045640",
    "end": "1050720"
  },
  {
    "text": "deployment for both modes they're pretty much the same in fact incrementally slightly slower because of the git uh",
    "start": "1050720",
    "end": "1057760"
  },
  {
    "text": "commit for the S3 mode the non-incremental mode the same deploy zip file same size effectively depending on",
    "start": "1057760",
    "end": "1063799"
  },
  {
    "text": "what you've added is pushed up to S3 each time so you relatively large files depending on the size of your",
    "start": "1063799",
    "end": "1068919"
  },
  {
    "text": "application with the incremental mode though only the changed files get committed and only the changed files get",
    "start": "1068919",
    "end": "1074640"
  },
  {
    "text": "pushed out to S3 so it makes for a faster redeployment experience you can switch between these two at any time you",
    "start": "1074640",
    "end": "1080039"
  },
  {
    "text": "like for a given project you don't need to be locked into any particular mode um",
    "start": "1080039",
    "end": "1085240"
  },
  {
    "text": "so for now we're going to stick with incremental and move on now we need to give a name for our",
    "start": "1085240",
    "end": "1090559"
  },
  {
    "text": "first environment and this name is set is used to actually preset the URL that your",
    "start": "1090559",
    "end": "1097039"
  },
  {
    "text": "application is going to be surfaced at we can check that it's available if it's not we can change it",
    "start": "1097039",
    "end": "1102240"
  },
  {
    "text": "but we're good so let's move on so now we need to Define some of the AWS resources that the application needs",
    "start": "1102240",
    "end": "1109400"
  },
  {
    "text": "remember you're going to get the load balancer and the auto scaling group anyway you don't need to worry about those at this stage but what we do want",
    "start": "1109400",
    "end": "1114799"
  },
  {
    "text": "to decide is do we want to deploy to Windows Server 2008 or Windows Server 2012 and that's the meaning of the uh",
    "start": "1114799",
    "end": "1121080"
  },
  {
    "text": "container type at the top we're going go with Sol with 2012 today and we can select the size of the",
    "start": "1121080",
    "end": "1127200"
  },
  {
    "text": "ec2 instances to launch so rather than stick with the default of a micro let's today push out the boat and use an M1",
    "start": "1127200",
    "end": "1134440"
  },
  {
    "text": "large now a key pair is actually quite useful in deployment purposes we'll see why later on it's basically just a",
    "start": "1134440",
    "end": "1141440"
  },
  {
    "text": "simple key uh private public key cryptographic item that can be used instead of a user ID and a password to",
    "start": "1141440",
    "end": "1148039"
  },
  {
    "text": "connect to the running instances in a very slick and very quick manner inside the toolk if we drop down the combo the",
    "start": "1148039",
    "end": "1153960"
  },
  {
    "text": "combo box we can see we've got a number of key pairs already but let's go ahead and create a new key pair for this",
    "start": "1153960",
    "end": "1160519"
  },
  {
    "text": "deployment okay and move on so now we're into actually defining",
    "start": "1161159",
    "end": "1166760"
  },
  {
    "text": "the application options remember earlier on that we added a custom health check page this is where we get to specify to",
    "start": "1166760",
    "end": "1171960"
  },
  {
    "text": "Bean this is the page it should use and we also stripped the access some",
    "start": "1171960",
    "end": "1177120"
  },
  {
    "text": "secret keys out of the file of the web config file and this is where we get to tell it which keys to use now we have a",
    "start": "1177120",
    "end": "1182720"
  },
  {
    "text": "couple of options we could type in if you really feel like typing in an a secret key um the actual access and",
    "start": "1182720",
    "end": "1189200"
  },
  {
    "text": "secret Keys into these fields that's marginally better than putting it in the web config file but a much better",
    "start": "1189200",
    "end": "1195640"
  },
  {
    "text": "approach is to use an identity and access management user account that in particular is locked to only the",
    "start": "1195640",
    "end": "1201200"
  },
  {
    "text": "actions that the application needs and only the resources that it needs to touch now later on we'll show you",
    "start": "1201200",
    "end": "1207240"
  },
  {
    "text": "actually how to do this for now let's go ahead and select us an IM user and we'll use our Cloud shots demo user that we",
    "start": "1207240",
    "end": "1213320"
  },
  {
    "text": "already have set up and move on now this page the RDS database page",
    "start": "1213320",
    "end": "1219960"
  },
  {
    "text": "is only shown if you actually have RDS instances and what it's basically asking you as a convenience is you're going to",
    "start": "1219960",
    "end": "1226039"
  },
  {
    "text": "launch ec2 instances and the security group associated with those instances do you want it to be able to talk to your",
    "start": "1226039",
    "end": "1232200"
  },
  {
    "text": "RDS databases in our case the answer is definitely yes okay so we deployed with",
    "start": "1232200",
    "end": "1237320"
  },
  {
    "text": "the default IDs Security Group so let's go ahead and check that and move on and that's it we get our review page and we",
    "start": "1237320",
    "end": "1244720"
  },
  {
    "text": "can select to deploy so when we click deploy the wizard disappears and the build and",
    "start": "1244720",
    "end": "1250440"
  },
  {
    "text": "Publishing pipeline kicks into effect so the first thing is the project is built make sure all the targets are up to date",
    "start": "1250440",
    "end": "1256640"
  },
  {
    "text": "once that's done we invoke either an MS build package command to get the zip file of the web deploy archive or if",
    "start": "1256640",
    "end": "1263559"
  },
  {
    "text": "we're deploying a website project which has no project file we'll talk to web Deploy on your behalf to generate that",
    "start": "1263559",
    "end": "1269400"
  },
  {
    "text": "zip file once the zip file is built and ready we'll then start looking at whether we're doing incremental or",
    "start": "1269400",
    "end": "1274840"
  },
  {
    "text": "non-incremental if non-incremental right now you'd be seeing an S3 set of progress indicators as we upload the zip",
    "start": "1274840",
    "end": "1280559"
  },
  {
    "text": "file to S3 here you can see that we're actually committing the uh archive",
    "start": "1280559",
    "end": "1286360"
  },
  {
    "text": "locally uh starting the deployment ad out incremental deployment yeah so right now the toolkit is creating the git repo",
    "start": "1286360",
    "end": "1293000"
  },
  {
    "text": "under update a local there we go it's done and we launch and an environment window comes up now the first couple of",
    "start": "1293000",
    "end": "1299440"
  },
  {
    "text": "times you do this is really exciting you'll sit and watch these events come through as as the environment launches when you've done this a few hundred",
    "start": "1299440",
    "end": "1305520"
  },
  {
    "text": "times it's not quite so exciting so what we're going to do is switch away to our running environment shots master and",
    "start": "1305520",
    "end": "1311200"
  },
  {
    "text": "just take a look at what we can glean from a running environment and what we can do with it so let's open up the",
    "start": "1311200",
    "end": "1317279"
  },
  {
    "text": "view and you see here again we have the event trace and if you want to get to the uh the URL surfacing the application",
    "start": "1317279",
    "end": "1323360"
  },
  {
    "text": "you can just click the link in the top left hand corner events again not really",
    "start": "1323360",
    "end": "1328480"
  },
  {
    "text": "that interesting let's go to the monitoring tab so in here we surface Cloud watch metrics for the ec2",
    "start": "1328480",
    "end": "1334320"
  },
  {
    "text": "instances that are serving your application so you can see processor load throughput etc etc on the resources",
    "start": "1334320",
    "end": "1340559"
  },
  {
    "text": "tab we can see the various AWS resources in use so one or more ec2 instances if",
    "start": "1340559",
    "end": "1346840"
  },
  {
    "text": "we scroll down we can see details of the load balancers and the autoscaling group this information though isn't",
    "start": "1346840",
    "end": "1353000"
  },
  {
    "text": "static once you deploy you can change this so for example if we go to the server tab we can change our ec2 instance",
    "start": "1353000",
    "end": "1361120"
  },
  {
    "text": "type uh if we go to the load balancer tab then we can change the Ping check",
    "start": "1361120",
    "end": "1366440"
  },
  {
    "text": "interval or the health check page if we decide that we don't want to use ping check anymore if we go to the",
    "start": "1366440",
    "end": "1371520"
  },
  {
    "text": "autoscaling group tab rather then we can control how many the minimum number of",
    "start": "1371520",
    "end": "1377480"
  },
  {
    "text": "ec2 instances we want to run at any one time or the maximum right now we're running shots Master with a minimum of",
    "start": "1377480",
    "end": "1382919"
  },
  {
    "text": "two instances let's really push the boat out and go up to three and click save changes and it'll",
    "start": "1382919",
    "end": "1389200"
  },
  {
    "text": "done so while we're now talking a new ec2 instance is being spun up and the correct application version is being",
    "start": "1389200",
    "end": "1394600"
  },
  {
    "text": "deployed down to it where you go now there's a few other tabs in there that we're not going to cover today but one",
    "start": "1394600",
    "end": "1400039"
  },
  {
    "text": "that we did want to bring to your attention is called logs at the bottom sometimes you just want to have a quick look you know is it really running okay",
    "start": "1400039",
    "end": "1406520"
  },
  {
    "text": "did I really deploy so if you click on the logs Tab and then click the snapshot logs",
    "start": "1406520",
    "end": "1412640"
  },
  {
    "text": "button you see we get now what happens is we're reaching out to the various ec2 instances that are serving your application and Gathering up a set of",
    "start": "1412640",
    "end": "1419080"
  },
  {
    "text": "logs you'll see here now we have two log entries for two different instance numbers if we click on one of those we",
    "start": "1419080",
    "end": "1424760"
  },
  {
    "text": "get to see the Consolidated logs from the instance and we can scroll down here and see the deployments the health checks etc etc that have gone on over",
    "start": "1424760",
    "end": "1432600"
  },
  {
    "text": "time going back to the toolkit sometimes though just looking at the logs in the toolkit uh it's probably",
    "start": "1432600",
    "end": "1439559"
  },
  {
    "text": "not enough you really want to delve a little bit deeper onto the running instance itself and the way that we do this is by using remote desktop and so",
    "start": "1439559",
    "end": "1446919"
  },
  {
    "text": "if we click connect new instance now the toolkit remember we've got two running instances right now and",
    "start": "1446919",
    "end": "1452679"
  },
  {
    "text": "a third being spun up okay so the toolkit wants to know which version do we want to connect to so let's pick one",
    "start": "1452679",
    "end": "1458360"
  },
  {
    "text": "of them hopefully one that's actually running not the third one",
    "start": "1458360",
    "end": "1463559"
  },
  {
    "text": "okay we get this mini dialogue here asking how are we going to connect to the instance user ID password or ec2 key",
    "start": "1463960",
    "end": "1470840"
  },
  {
    "text": "pair remember that we created a key pair earlier on let's just click okay remote desktop",
    "start": "1470840",
    "end": "1479559"
  },
  {
    "text": "launches boom we're on the instance okay so let's go while we're here and the deployment is running let's go and take",
    "start": "1481200",
    "end": "1486919"
  },
  {
    "text": "a look at some interesting stuff so firstly where are those logs that I just showed you and this is it used to be how",
    "start": "1486919",
    "end": "1492640"
  },
  {
    "text": "you had to go and get the logs from the instance so we got into uh program files and the Amazon elastic beanock",
    "start": "1492640",
    "end": "1499960"
  },
  {
    "text": "folder poost manager logs and in here you can see four sub folders um and",
    "start": "1499960",
    "end": "1506120"
  },
  {
    "text": "these are the various log categories that were returned in that snapshot logs view for that particular instance okay",
    "start": "1506120",
    "end": "1511559"
  },
  {
    "text": "but where is your application well we know it's an iOS application so let's go to the rout of",
    "start": "1511559",
    "end": "1517840"
  },
  {
    "text": "inep Hub ww root and here you'll see a cloud shotor deploy folder that is the",
    "start": "1517840",
    "end": "1523640"
  },
  {
    "text": "contents of the web deploy artifact unpacked on this machine and surfacing the application if if we go into that",
    "start": "1523640",
    "end": "1529559"
  },
  {
    "text": "folder and Let's Open up web config just want to show you something",
    "start": "1529559",
    "end": "1534919"
  },
  {
    "text": "you'll see at the top in application settings there are no keys they've gone okay this is good but where are",
    "start": "1534919",
    "end": "1542399"
  },
  {
    "text": "they well let's close that web config step up one level and open up the web config at the",
    "start": "1542399",
    "end": "1548360"
  },
  {
    "text": "rout and there you'll see at the top of the rewrite rules servicing your application even though it's in a subfolder as the root of is on the",
    "start": "1548360",
    "end": "1554880"
  },
  {
    "text": "instance and down below the access and secret keys so they were transmitted to the uh ec2",
    "start": "1554880",
    "end": "1561559"
  },
  {
    "text": "instance out of band away from the web deploy archive that's in S3 nice and",
    "start": "1561559",
    "end": "1566600"
  },
  {
    "text": "safely so with that done on the instance let's go back to the toolkit and see how our current deployment is",
    "start": "1566600",
    "end": "1574240"
  },
  {
    "text": "doing and it looks like we're adding instances into the environment so a few more seconds should do it Norm can now",
    "start": "1576880",
    "end": "1582399"
  },
  {
    "text": "play wacka with the toaster that pops up when it's done but in the meantime let's kind have a quick look at some of the additional artifacts that we created",
    "start": "1582399",
    "end": "1588000"
  },
  {
    "text": "during deployment the first being the key pair so if we open up the amazon ec2",
    "start": "1588000",
    "end": "1593039"
  },
  {
    "text": "node to on key pairs you can see here a list of key pair names and uh signature",
    "start": "1593039",
    "end": "1598520"
  },
  {
    "text": "information and the green check mark on the right means that both parts of the public and private key are stored by the toolkit securely on the local machine",
    "start": "1598520",
    "end": "1605320"
  },
  {
    "text": "and that's how we are able to get the remote desktop to work so seamlessly all right what about the web deploy archive",
    "start": "1605320",
    "end": "1612039"
  },
  {
    "text": "itself I said it exists in S3 so let's go and take a look open up",
    "start": "1612039",
    "end": "1617240"
  },
  {
    "text": "S3 and in here we'll see a couple of folders you can see uh the MVC test",
    "start": "1617240",
    "end": "1622640"
  },
  {
    "text": "applications as shots Master this is what it looks like if you use non-incremental mode there'll be a folder name and that contains the",
    "start": "1622640",
    "end": "1628799"
  },
  {
    "text": "application or a key I should say and that contains the application version zip files that are web deploy archives",
    "start": "1628799",
    "end": "1634520"
  },
  {
    "text": "there's also one here with the rather strange name of git and a very long sequence of digits that was our current",
    "start": "1634520",
    "end": "1639760"
  },
  {
    "text": "deployment that's just been sent out um so let's go back and see how are we",
    "start": "1639760",
    "end": "1645000"
  },
  {
    "text": "doing on deployment it's still adding the instance",
    "start": "1645000",
    "end": "1650140"
  },
  {
    "text": "[Music] let's give it a few more",
    "start": "1650140",
    "end": "1654919"
  },
  {
    "text": "seconds actually while we're doing while we're waiting for it to come up let's go and take advantage and take a look at a few of the other tabs that we can see in",
    "start": "1658279",
    "end": "1664240"
  },
  {
    "text": "front of us so we got notifications that we didn't look at here you can configure an email address",
    "start": "1664240",
    "end": "1669960"
  },
  {
    "text": "so any significant activity will be sent out to that email and container here again we can see access",
    "start": "1669960",
    "end": "1676720"
  },
  {
    "text": "secret Keys uh the been recovered from the",
    "start": "1676720",
    "end": "1680799"
  },
  {
    "text": "instance um it's an easy way like if you want cuz basically those parameters they get injected in the web configs app",
    "start": "1682240",
    "end": "1687720"
  },
  {
    "text": "setting section so if there was just something you wanted to inject that way that's how you could use it and under",
    "start": "1687720",
    "end": "1693720"
  },
  {
    "text": "Advanced we get a whole stream of useful information click on Advance okay y",
    "start": "1693720",
    "end": "1698919"
  },
  {
    "text": "there we go so we can see availability zones here this how we can change setup availability Zone setups and scrolling",
    "start": "1698919",
    "end": "1705000"
  },
  {
    "text": "through there we got you can see the Keir name that we used so a ton of other information that you can change and",
    "start": "1705000",
    "end": "1711000"
  },
  {
    "text": "apply to configure your running environments there it is hey toaster",
    "start": "1711000",
    "end": "1716720"
  },
  {
    "text": "right click so now this is our application surface on Beanstalk talking to our RDS",
    "start": "1716720",
    "end": "1724159"
  },
  {
    "text": "database and uh as you see it's relatively simple to deploy out the",
    "start": "1724159",
    "end": "1729519"
  },
  {
    "text": "application so when it comes up it's a little bit of warmup required obviously um although this time at least we're not",
    "start": "1729519",
    "end": "1734960"
  },
  {
    "text": "creating the database um Norm's going to click around a few images um and we'll see that the application builds up a",
    "start": "1734960",
    "end": "1741559"
  },
  {
    "text": "list of the last five images that you clicked on on the right hand side and it spins",
    "start": "1741559",
    "end": "1749880"
  },
  {
    "text": "up you know I should have used Wireless not wired would have been faster oh really we give that a try we can switch",
    "start": "1750240",
    "end": "1756679"
  },
  {
    "text": "now no actually you know what let's just use the shots Master One let's go back to",
    "start": "1756679",
    "end": "1762880"
  },
  {
    "text": "that one that we have on the first tab okay the application run it'll come up eventually right so let's just click around some views here so you'll see on",
    "start": "1762880",
    "end": "1768679"
  },
  {
    "text": "the recently viewed column here we're going to get five did you click I did click I have to look at this guy all",
    "start": "1768679",
    "end": "1775200"
  },
  {
    "text": "week I'm a sler oh wait I think this came up ah there we go yeah and you'll",
    "start": "1775200",
    "end": "1780440"
  },
  {
    "text": "see actually we had the same initial load so we're using the ODS database whereas the shots master was using a different initial seed so we click",
    "start": "1780440",
    "end": "1786760"
  },
  {
    "text": "around so you'll see here we got this buildup of images that we've clicked on on the right hand side of the screen all",
    "start": "1786760",
    "end": "1792240"
  },
  {
    "text": "seems to be fine but there's a hidden problem right now that list of images that we've clicked on is being held in",
    "start": "1792240",
    "end": "1798840"
  },
  {
    "text": "session State on the ec2 instance right we can spin up any number of ec2 instances and simply we can scale them",
    "start": "1798840",
    "end": "1805080"
  },
  {
    "text": "down right that session state is not going to trans is not going to cover uh if the load balancer sends the user to a",
    "start": "1805080",
    "end": "1811600"
  },
  {
    "text": "different instance or if an instance is recycled because of Hill Health now the standard way to to to do this the patent",
    "start": "1811600",
    "end": "1817720"
  },
  {
    "text": "to fix this is to actually take the session State and move it to an off store an off instance database and you",
    "start": "1817720",
    "end": "1822919"
  },
  {
    "text": "know we have an RS database running here we could do that quite simply but you know that could be a little bit heavyweight for our purposes what we",
    "start": "1822919",
    "end": "1828840"
  },
  {
    "text": "really want you know is something that's fairly low latency high speed really nothing more than a key value pair and",
    "start": "1828840",
    "end": "1834960"
  },
  {
    "text": "it so happens we have such a thing and it's called Amazon Dynamo DB you've probably heard a lot about it at this conference and to sweeten the deal early",
    "start": "1834960",
    "end": "1842000"
  },
  {
    "text": "this year we published an extensions library for the net SDK the aw. net SDK",
    "start": "1842000",
    "end": "1847600"
  },
  {
    "text": "um that contains a drop in asp.net session State provider that talks to Dynamo DB and adding it to your project",
    "start": "1847600",
    "end": "1853240"
  },
  {
    "text": "is a snap so let's get started with that so the first thing that we have to do is simply add a reference to a new",
    "start": "1853240",
    "end": "1858639"
  },
  {
    "text": "extensions package which you can fetch from nugat right now we're going to use a local nugit reference and what you're",
    "start": "1858639",
    "end": "1865000"
  },
  {
    "text": "going to be looking for is a package called AWS do extensions now when you add this package",
    "start": "1865000",
    "end": "1870639"
  },
  {
    "text": "to your project it adds two things obviously sembly reference to the extensions Library itself the second",
    "start": "1870639",
    "end": "1877360"
  },
  {
    "text": "thing it adds is a sample configuration file and that that file contains the entries that you need to make to web",
    "start": "1877360",
    "end": "1883279"
  },
  {
    "text": "config to enable this in your application you can see here that it's just a simple session state entry for",
    "start": "1883279",
    "end": "1888760"
  },
  {
    "text": "system. web so let's go and swipe",
    "start": "1888760",
    "end": "1892799"
  },
  {
    "text": "that and we'll add it to our web",
    "start": "1895039",
    "end": "1898960"
  },
  {
    "text": "config okay so the session State provider needs three pieces of information firstly what region should",
    "start": "1903679",
    "end": "1910279"
  },
  {
    "text": "it run in obviously it's going to need to running Us West 2 which is where application running so we'll change",
    "start": "1910279",
    "end": "1916399"
  },
  {
    "text": "that the second piece of information it needs to know is the table name now the the",
    "start": "1916840",
    "end": "1922559"
  },
  {
    "text": "session provider will actually create the table for you if it doesn't exist but to show off the toolkit we thought we'd actually do it by hand so let's",
    "start": "1922559",
    "end": "1928159"
  },
  {
    "text": "swipe the table name and if we right click on Amazon Dynamo DB in the Explorer we can select create table",
    "start": "1928159",
    "end": "1934080"
  },
  {
    "text": "paste the table name now for the session State provider we only need a simple hash key um so I'll just put something",
    "start": "1934080",
    "end": "1939799"
  },
  {
    "text": "simple in for the purpose of the demo we don't need basic alarms so let's just turn those off and click okay now while",
    "start": "1939799",
    "end": "1946279"
  },
  {
    "text": "the table's being provisioned let's consider the third piece of information and you'll see here that it's access and secret Keys again now we could put again",
    "start": "1946279",
    "end": "1954120"
  },
  {
    "text": "put access and secret keys in here but our reiterate this file is going to go to S3 so we really don't want to do this",
    "start": "1954120",
    "end": "1959600"
  },
  {
    "text": "it turns out that if we delete these two lines I say it turns out we wrote the code we should know um if you delete",
    "start": "1959600",
    "end": "1965519"
  },
  {
    "text": "these two lines the session State provider will fall back to the application credentials that the",
    "start": "1965519",
    "end": "1970840"
  },
  {
    "text": "application itself is using in app settings which we know are already being transferred in a much more secure",
    "start": "1970840",
    "end": "1976519"
  },
  {
    "text": "manner now we said that we used an identity and access management user when we did that let's go and see what that",
    "start": "1976519",
    "end": "1982279"
  },
  {
    "text": "user can do so we'll open up the tree and click on our clo shots demo",
    "start": "1982279",
    "end": "1988360"
  },
  {
    "text": "user and go to the policies Tab and you can see here that we've got a policy in effect called uploader and this policy",
    "start": "1988360",
    "end": "1996279"
  },
  {
    "text": "by default only has the Amazon S3 actions that the image upload capability",
    "start": "1996279",
    "end": "2001840"
  },
  {
    "text": "of the application needs so in other words upload to a particular bucket and make that image public if we go to the",
    "start": "2001840",
    "end": "2007960"
  },
  {
    "text": "resources tab we can see that it's the lock down to the specific bucket where the images are",
    "start": "2007960",
    "end": "2013519"
  },
  {
    "text": "stored now we could change this policy and adding the the relevant Dynamo DB entries that we need but a cleaner way",
    "start": "2013519",
    "end": "2019559"
  },
  {
    "text": "of doing it is to just add another policy so let's go ahead and do that give the policy a name now by default",
    "start": "2019559",
    "end": "2026440"
  },
  {
    "text": "when the policy comes up everything will be enabled okay so let's turn everything off and for Dynamo DB we just need a",
    "start": "2026440",
    "end": "2033200"
  },
  {
    "text": "certain set of crud operations we've already created the table so we don't need to worry about that one we need",
    "start": "2033200",
    "end": "2038320"
  },
  {
    "text": "delete item describe table get item put item and update item that's all we need",
    "start": "2038320",
    "end": "2045760"
  },
  {
    "text": "this is a good start but we can go still further if we go to the resources tab we know that we only want it to access a",
    "start": "2045760",
    "end": "2051599"
  },
  {
    "text": "certain table right so we could enter we could type in the the resource Arn of the Dynamo DB table here but a much",
    "start": "2051599",
    "end": "2058158"
  },
  {
    "text": "nicer way of doing it is to Simply click the table in the Explorer and drag and drop it on The View and it'll preset the",
    "start": "2058159",
    "end": "2063599"
  },
  {
    "text": "IR in for us okay we save the changes away now if you creating a new IM user for",
    "start": "2063599",
    "end": "2070800"
  },
  {
    "text": "your application and you needed to get the access Keys here's how you do it click on the access Keys tab okay and",
    "start": "2070800",
    "end": "2076440"
  },
  {
    "text": "you'll see here that we've already got access Keys set You' click the create button this will give you a dialogue that show you the access and secret key",
    "start": "2076440",
    "end": "2082720"
  },
  {
    "text": "that's been generated that ads will only return once and on that will be an option that says save these in the toit",
    "start": "2082720",
    "end": "2089240"
  },
  {
    "text": "securely okay when you do that you'll get an entry in this view where you see access key and when you nor clicks on it as you see there you can get to the",
    "start": "2089240",
    "end": "2095280"
  },
  {
    "text": "access secret key data and you can recyc Keys very quickly in this way but obviously if you recycle keys for a",
    "start": "2095280",
    "end": "2101400"
  },
  {
    "text": "deployed application you'll need to redeploy to get the new keys across okay",
    "start": "2101400",
    "end": "2106720"
  },
  {
    "text": "so with the policy in place let's go ahead and we'll run the application but before we do let's just open up the new",
    "start": "2106720",
    "end": "2113040"
  },
  {
    "text": "session State table just to make sure there's no smoking mirrors going on here you'll see it's got no content okay so",
    "start": "2113040",
    "end": "2119200"
  },
  {
    "text": "let's run the application",
    "start": "2119200",
    "end": "2122078"
  },
  {
    "text": "locally and when it comes up we'll just click around a few images to generate some session",
    "start": "2126640",
    "end": "2133160"
  },
  {
    "text": "State let's go back to the toolkit and take a look at the table there you go session States in",
    "start": "2137320",
    "end": "2144599"
  },
  {
    "text": "we're good to go so now we can redeploy the application and the way we do this as before let's right click on the",
    "start": "2144599",
    "end": "2151000"
  },
  {
    "text": "project and select publish. AWS I said that the wizard could be used",
    "start": "2151000",
    "end": "2156400"
  },
  {
    "text": "to republish so what the wizard does when it starts up it goes looking for all of your running elastic beanock",
    "start": "2156400",
    "end": "2162119"
  },
  {
    "text": "environments and cloud formation environments that were deployed from the toolkit and presents them for you in this environment so we can actually take",
    "start": "2162119",
    "end": "2168200"
  },
  {
    "text": "this project and redeploy to different environments it doesn't have to necessarily be the one that we used okay",
    "start": "2168200",
    "end": "2173440"
  },
  {
    "text": "now and and you'll noticed that when it came up um it actually pre-selected the last environment that we used for this",
    "start": "2173440",
    "end": "2179319"
  },
  {
    "text": "project the talk it's tracking where where the deployments went but in this particular case all we actually want to",
    "start": "2179319",
    "end": "2185000"
  },
  {
    "text": "do is republish content we don't really want to change any settings so there's a faster way than using this",
    "start": "2185000",
    "end": "2190520"
  },
  {
    "text": "wizard let's cancellate the wizard and right click on the project again and you'll see underneath",
    "start": "2190520",
    "end": "2196359"
  },
  {
    "text": "published to AWS there's a republished to environment the toolkit knows the last",
    "start": "2196359",
    "end": "2201640"
  },
  {
    "text": "elastic beanock environment this project was published to or the last cloud formation stack that we published it to",
    "start": "2201640",
    "end": "2206960"
  },
  {
    "text": "and offers that as the choice if we click that option we get a simple onepage wizard that summarizes the",
    "start": "2206960",
    "end": "2212720"
  },
  {
    "text": "environment or the stack that we're going to we can double check it we're all good and click deploy",
    "start": "2212720",
    "end": "2219119"
  },
  {
    "text": "so again the publishing pipeline kicks in we re build all the targets up to",
    "start": "2219119",
    "end": "2225240"
  },
  {
    "text": "date then we'll get the package built there it goes and we're going to start incremental deployment out to the local",
    "start": "2227960",
    "end": "2233960"
  },
  {
    "text": "git repo now remember that earlier on we turned on pre-compilation for this application but even though we've only",
    "start": "2233960",
    "end": "2239319"
  },
  {
    "text": "changed one file right so you you're probably sitting there now thinking only one file is going to be committed not quite there's a few extra files that",
    "start": "2239319",
    "end": "2245400"
  },
  {
    "text": "were generated during compilation that will go go in but it's not too bad there you go finished incremental deployment",
    "start": "2245400",
    "end": "2251319"
  },
  {
    "text": "so it's pushing it out let's go back to the environment for the app and if we go to the events window this is one of the",
    "start": "2251319",
    "end": "2256520"
  },
  {
    "text": "few times when the events is actually exciting you'll see here it's always exciting you'll see here on the right",
    "start": "2256520",
    "end": "2262839"
  },
  {
    "text": "hand side it says waiting for two seconds to deploy there we go we're redeployed and if we click that bring it",
    "start": "2262839",
    "end": "2268280"
  },
  {
    "text": "up the application's running so that's how easy it is to deploy your application and redeploy real world changes directly within Visual Studio",
    "start": "2268280",
    "end": "2275680"
  },
  {
    "text": "Norm is now going to switch over and show you how we can do the same thing from the command",
    "start": "2275680",
    "end": "2281119"
  },
  {
    "text": "line yeah so now that we've done that a lot of you probably wondering I'm running team Foundation services or",
    "start": "2282040",
    "end": "2288079"
  },
  {
    "text": "Jenkins or some other build process and that's how you want to push out your your bits through that so what we have",
    "start": "2288079",
    "end": "2294599"
  },
  {
    "text": "to accommodate that is we ship with the toolkit a command line tool called ads deploy XE um if you install the toolkit",
    "start": "2294599",
    "end": "2302200"
  },
  {
    "text": "you'll find it under program files ads tools deployment tool and what this tool",
    "start": "2302200",
    "end": "2308280"
  },
  {
    "text": "will do is it will take the web deploy archive and either deploy to brand new",
    "start": "2308280",
    "end": "2313880"
  },
  {
    "text": "environments or redeploy to existing environments and to create your web deploy archive you can just use Ms build",
    "start": "2313880",
    "end": "2320480"
  },
  {
    "text": "from the command line with an extra switch to say hey package this up to demonstrate that what I did is I",
    "start": "2320480",
    "end": "2327280"
  },
  {
    "text": "created a simple inant script um inent is a it's a building scripting tool",
    "start": "2327280",
    "end": "2332359"
  },
  {
    "text": "pretty similar to Ms Bild if you're using that um the way it works is there's a collection of Targets in our",
    "start": "2332359",
    "end": "2339240"
  },
  {
    "text": "case the first Target is a package Target which is what calls Ms build it's",
    "start": "2339240",
    "end": "2344440"
  },
  {
    "text": "going to take in our project that we wanted to use and it has the extra package",
    "start": "2344440",
    "end": "2350040"
  },
  {
    "text": "switch and then the second target is our redeployment Target which has a dependency on package which means this",
    "start": "2350040",
    "end": "2357599"
  },
  {
    "text": "that we'll always be sure to package everything up before we run this Target and this is takes the command",
    "start": "2357599",
    "end": "2363599"
  },
  {
    "text": "lines the dashr is for telling adus deoy let's do a redeployment the DW is telling hloy to",
    "start": "2363599",
    "end": "2372240"
  },
  {
    "text": "wait until the stacks whole environment status has gone through updating and then back to healthy before actually",
    "start": "2372240",
    "end": "2377920"
  },
  {
    "text": "exiting it out otherwise it'll just send up hey there's a new version and then exit right out and then the final third",
    "start": "2377920",
    "end": "2383960"
  },
  {
    "text": "option is a config file that config file is what tells ads deploy what application you want to this is the",
    "start": "2383960",
    "end": "2390280"
  },
  {
    "text": "beanock application you want to deploy to and when what environment you want to deploy to it also contains the",
    "start": "2390280",
    "end": "2396160"
  },
  {
    "text": "credentials that you want to use to do the deployment with and it also say",
    "start": "2396160",
    "end": "2401599"
  },
  {
    "text": "where is the web pullet archive at we ship a the ad STI tool with several",
    "start": "2401599",
    "end": "2408119"
  },
  {
    "text": "sample files that you can use to help get started writing that file um shows you how to do some of the more advanced",
    "start": "2408119",
    "end": "2414240"
  },
  {
    "text": "settings you want to do but a really easy way to get started with this file is if we go back to the toolkit and we",
    "start": "2414240",
    "end": "2420319"
  },
  {
    "text": "select our environment in the Explorer we can rightclick and select save",
    "start": "2420319",
    "end": "2426040"
  },
  {
    "text": "configuration this is is going to generate that file based off of the settings that are currently on that",
    "start": "2426040",
    "end": "2433200"
  },
  {
    "text": "environment I'll go and uh so it's done we can check the checkbox to take a look at that",
    "start": "2436800",
    "end": "2442960"
  },
  {
    "text": "file so you can see in this file it's got the application that we're using if we scroll down I think it it'll I think",
    "start": "2442960",
    "end": "2449319"
  },
  {
    "text": "it does it shows the environment that we're going to deploy to and also know it does have your credentials so you do",
    "start": "2449319",
    "end": "2455160"
  },
  {
    "text": "want to be mindful of how you're handling this file um the one thing that we still do need to do with this file is we need to",
    "start": "2455160",
    "end": "2461560"
  },
  {
    "text": "update the deployment archive location um that's in our inet script so I can just go I can make Steve just go ahead",
    "start": "2461560",
    "end": "2467720"
  },
  {
    "text": "and copy that value out and we'll paste it",
    "start": "2467720",
    "end": "2471920"
  },
  {
    "text": "in don't forget to uncomment the file or the line oh yeah thank you yes very",
    "start": "2480920",
    "end": "2486400"
  },
  {
    "text": "important so that's all we need to do now we could run this from the command line I'm going",
    "start": "2486400",
    "end": "2491960"
  },
  {
    "text": "to have Steve make some sort of code change for us though before we go so we can see this in action let's see what",
    "start": "2491960",
    "end": "2497640"
  },
  {
    "text": "exciting thing he does for us pressure is on actually that's not",
    "start": "2497640",
    "end": "2503319"
  },
  {
    "text": "the file I want this is the file so all I'm going to do is just change the logo image there we",
    "start": "2503319",
    "end": "2509240"
  },
  {
    "text": "go logo to all right okay so we got to change run the way you run inet scripts",
    "start": "2509240",
    "end": "2515520"
  },
  {
    "text": "is you just go to the command line you type inet um and that runs the build script in that directory again this is very",
    "start": "2515520",
    "end": "2521240"
  },
  {
    "text": "similar also to Ms build if you guys are using Ms build to script out your things so you can see first it's running",
    "start": "2521240",
    "end": "2527240"
  },
  {
    "text": "package so that means it's going to compile everything so it's a huge wallet text there then it's building up the web",
    "start": "2527240",
    "end": "2532920"
  },
  {
    "text": "deploy archive for us so now now it's moved on to the",
    "start": "2532920",
    "end": "2538920"
  },
  {
    "text": "redeployment stage um interesting to note about this is since our config file",
    "start": "2538920",
    "end": "2544920"
  },
  {
    "text": "didn't contain a git repository location it's going to default to the the S3 file upload method which is what we're doing",
    "start": "2544920",
    "end": "2552359"
  },
  {
    "text": "right now looks like that's done now it's telling now it's telling be hey there's a new",
    "start": "2552359",
    "end": "2558359"
  },
  {
    "text": "application version go install this for us so let's go back to our environment status page and yeah you can see the",
    "start": "2558359",
    "end": "2565240"
  },
  {
    "text": "status is already changed it's going to updating should just take a minut second here for it to go back to",
    "start": "2565240",
    "end": "2572119"
  },
  {
    "text": "healthy",
    "start": "2576119",
    "end": "2579119"
  },
  {
    "text": "how big was your new logo oh it's huge huge yeah well they are really big screens that's why I thought that's why",
    "start": "2585960",
    "end": "2592319"
  },
  {
    "text": "I went for a big logo there we go two seconds to go or",
    "start": "2592319",
    "end": "2599760"
  },
  {
    "text": "waiting there we go let's click our link see it in",
    "start": "2599760",
    "end": "2605280"
  },
  {
    "text": "action",
    "start": "2606119",
    "end": "2609119"
  },
  {
    "text": "the new logo it's not that big all right um so that's how you can",
    "start": "2618319",
    "end": "2625480"
  },
  {
    "text": "do read point so you can imagine anything that basically you can call it command L you can figure out how to automate that process",
    "start": "2625480",
    "end": "2632319"
  },
  {
    "text": "through so that's really what we wanted to show as far as how to use the toket we have a few final tips that we wanted",
    "start": "2632520",
    "end": "2638480"
  },
  {
    "text": "to just talk about the first is it's really important to think about these ec2 instances as something this kind of",
    "start": "2638480",
    "end": "2645599"
  },
  {
    "text": "throwaway never store State on there because autoscaling can come up and decide hey I you need a new instances or",
    "start": "2645599",
    "end": "2652000"
  },
  {
    "text": "now you don't need that instance and then it will essentially tear that down so any in stored State on you there",
    "start": "2652000",
    "end": "2657319"
  },
  {
    "text": "would be lost so uh and as Steve showed using IM IM is a great way to help lock",
    "start": "2657319",
    "end": "2663000"
  },
  {
    "text": "down what your applications um can do um and using the custom health check page",
    "start": "2663000",
    "end": "2669079"
  },
  {
    "text": "another good tip there and also consider using multiple availability zones uh you saw when we went to the advanced tab",
    "start": "2669079",
    "end": "2675520"
  },
  {
    "text": "there was a few options in there you can use to configure that up so that's our tips thanks so much for",
    "start": "2675520",
    "end": "2682520"
  },
  {
    "text": "coming to our talk I really appreciate that I hope I was as good as Jeff Bezos we'll you know we'll see",
    "start": "2682520",
    "end": "2688090"
  },
  {
    "text": "[Applause] um",
    "start": "2688090",
    "end": "2695839"
  }
]