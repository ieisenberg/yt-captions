[
  {
    "text": "hello and welcome to measuring the Internet in real time today are going to",
    "start": "30",
    "end": "7109"
  },
  {
    "text": "be talking to you about how CloudFront measures the internet how not for measures all the traffic that reaches us",
    "start": "7109",
    "end": "13620"
  },
  {
    "text": "and why we do that while doing that I'm going to show you how our systems have",
    "start": "13620",
    "end": "18810"
  },
  {
    "text": "been built in great detail so you can also build build your own feedback loops",
    "start": "18810",
    "end": "24930"
  },
  {
    "text": "for your own distributed applications so before I get into details let me talk",
    "start": "24930",
    "end": "31710"
  },
  {
    "text": "you about cloud phone what is cloud front you probably know it's a CDN content delivery network and that's the",
    "start": "31710",
    "end": "41070"
  },
  {
    "text": "map that tells that show us where we are today a secret is that this map on our website",
    "start": "41070",
    "end": "47430"
  },
  {
    "text": "is mostly most of the time out of date the text below is correct but you're not",
    "start": "47430",
    "end": "53789"
  },
  {
    "text": "going to be seeing in this map Palermo in Italy that we launched last week our Denver in Colorado that we launched last",
    "start": "53789",
    "end": "60750"
  },
  {
    "text": "week because our marketing team can hardly keep up with speed we build pops",
    "start": "60750",
    "end": "65790"
  },
  {
    "text": "last year we built more than one pop a week so it's very hard for them to keep",
    "start": "65790",
    "end": "70799"
  },
  {
    "text": "up I'm sorry I've been saying pop that's one definition like to go with you",
    "start": "70799",
    "end": "75869"
  },
  {
    "text": "before I start pop is part of presence is a cloud from data center somewhere around the world okay why is it",
    "start": "75869",
    "end": "84060"
  },
  {
    "text": "important that we are in debt many edge locations we are in 107 today",
    "start": "84060",
    "end": "89700"
  },
  {
    "text": "that's 97 pops 108 97 pops the",
    "start": "89700",
    "end": "95070"
  },
  {
    "text": "importance of that is the speed of light so from here to San Paulo which is where",
    "start": "95070",
    "end": "100590"
  },
  {
    "text": "I was living before I started working for Amazon it's a hundred milliseconds RTT round-trip time if you do TCP",
    "start": "100590",
    "end": "108869"
  },
  {
    "text": "handshake plus SSL handshake those are three round-trips so you're 300 milliseconds before you",
    "start": "108869",
    "end": "114509"
  },
  {
    "text": "start transferring any useful data to your customer which is going to be sitting there waiting and that's a lot",
    "start": "114509",
    "end": "120750"
  },
  {
    "text": "and that's in the best case scenario if it's on a mobile network or something it's going to be even worse there's also",
    "start": "120750",
    "end": "128340"
  },
  {
    "text": "the problem with bandwidth regional ISPs don't have the of endless that is needed to transfer",
    "start": "128340",
    "end": "134730"
  },
  {
    "text": "data back to your origin here in the US or back to their origin in Europe",
    "start": "134730",
    "end": "139739"
  },
  {
    "text": "whatever it might be so we need this edge locations to be able to deliver data close to where",
    "start": "139739",
    "end": "146430"
  },
  {
    "text": "those ISPs are and not to contrast these international links or long-haul links",
    "start": "146430",
    "end": "154079"
  },
  {
    "text": "on the Internet even if those are not our links some someone is paying for those links and systems would be",
    "start": "154079",
    "end": "159540"
  },
  {
    "text": "congested otherwise so who would benefit from cloud front first whoever wants",
    "start": "159540",
    "end": "167459"
  },
  {
    "text": "more performance every single one of those edge locations around the globe has a cache so obviously for static",
    "start": "167459",
    "end": "175829"
  },
  {
    "text": "content it's a no-brainer cloud phone can deliver the data directly to your customers that are not even going back",
    "start": "175829",
    "end": "181919"
  },
  {
    "text": "to your origin wherever it might be but it's also good for dynamic content let me explain why first thing sometimes we",
    "start": "181919",
    "end": "190409"
  },
  {
    "text": "think of dynamic content as content that changes let's say news site a new site",
    "start": "190409",
    "end": "198049"
  },
  {
    "text": "changes all the time because people are publishing new information and you don't",
    "start": "198049",
    "end": "203370"
  },
  {
    "text": "want your customers to be seen saying new stories every day but let's say you have like a million hits a day on your",
    "start": "203370",
    "end": "210870"
  },
  {
    "text": "new site and you use a very very short time to leave on your cache objects",
    "start": "210870",
    "end": "215970"
  },
  {
    "text": "let's say one second right I think it's okay for customers to be reading one second old news that's pretty much okay",
    "start": "215970",
    "end": "223169"
  },
  {
    "text": "right if you do that and you have a million of requests distribute evenly across today that's a simplification but",
    "start": "223169",
    "end": "229769"
  },
  {
    "text": "at illustrative illustrates the point you're going to have more than 91% cash with hate hit ratio which means more",
    "start": "229769",
    "end": "237720"
  },
  {
    "text": "than 91% of requests are going to be served directly from the edge with that one second TTL if you do a larger TTL",
    "start": "237720",
    "end": "246329"
  },
  {
    "text": "let's say five seconds that should be okay for news it's going to be even greater than that but let's say your",
    "start": "246329",
    "end": "252959"
  },
  {
    "text": "content is not cacheable at all let's say it's Amazon shopping cart right that's non cash flow works on API",
    "start": "252959",
    "end": "258889"
  },
  {
    "text": "requests that's also impossible even in those cases having to improve your performance for instance",
    "start": "258889",
    "end": "267130"
  },
  {
    "text": "when slack review all no slack started using cloud funds for they their API",
    "start": "267130",
    "end": "274300"
  },
  {
    "text": "they started losing us for the last protection but I found out that performance was greatly improved the",
    "start": "274300",
    "end": "280090"
  },
  {
    "text": "reason for that is that out is TCP handshake and TLS handshake this join is",
    "start": "280090",
    "end": "285400"
  },
  {
    "text": "done between your viewer and our edge location so we are not incurring this",
    "start": "285400",
    "end": "290530"
  },
  {
    "text": "300 milliseconds for doing this handshake after the handshake is complete clouds",
    "start": "290530",
    "end": "296920"
  },
  {
    "text": "front pops will have a persistent connection back to your origin so you also go to a faster path why is it",
    "start": "296920",
    "end": "303670"
  },
  {
    "text": "faster so first because this connection is reused across many many requests from different users and second because this",
    "start": "303670",
    "end": "310810"
  },
  {
    "text": "connection is kept hot hot in the TCP sense of heart meaning congestion window and other TCP parameters are or already",
    "start": "310810",
    "end": "318130"
  },
  {
    "text": "optimized for this path also if your origin happens to be inside one of the",
    "start": "318130",
    "end": "323350"
  },
  {
    "text": "AWS regions there's a very good chance your traffic from the cloud front pops are going to be riding the Amazon",
    "start": "323350",
    "end": "330610"
  },
  {
    "text": "backbone which is a global backbone which is usually much better when it comes to congestion when compared to the",
    "start": "330610",
    "end": "336760"
  },
  {
    "text": "public Internet so for these reasons even for dynamic content cloud phones can greatly accelerate your content as I",
    "start": "336760",
    "end": "343960"
  },
  {
    "text": "told you we started to slack and more recently Amazon the ecommerce website",
    "start": "343960",
    "end": "349900"
  },
  {
    "text": "has started using us and they also saw a great performance improvements third",
    "start": "349900",
    "end": "355330"
  },
  {
    "text": "point is also good if you want to have a more availability cloud front has a lot",
    "start": "355330",
    "end": "360760"
  },
  {
    "text": "of points of presence so it's there's a greater chance that one of them is going",
    "start": "360760",
    "end": "366190"
  },
  {
    "text": "to be reachable from your customers point of view how these points of presence have multiple paths to the",
    "start": "366190",
    "end": "371380"
  },
  {
    "text": "Internet when you compare their to what would be a web server provider or a cloud",
    "start": "371380",
    "end": "377350"
  },
  {
    "text": "provider and we have only these many paths going back to this provider when",
    "start": "377350",
    "end": "382750"
  },
  {
    "text": "you compare a large city that to a large city unlike cloud phone to have all this multiple paths that can reach our pops",
    "start": "382750",
    "end": "388660"
  },
  {
    "text": "if one of these paths goes down the pop is still fully ritual from everyone",
    "start": "388660",
    "end": "394590"
  },
  {
    "text": "it's also I put I put here the dose protection but I'll prefer to talk about",
    "start": "394590",
    "end": "400770"
  },
  {
    "text": "what happens if your site becomes suddenly very popular let's say you got",
    "start": "400770",
    "end": "405790"
  },
  {
    "text": "lucky your blog post got linked by a very famous new site they're very famous",
    "start": "405790",
    "end": "412919"
  },
  {
    "text": "bloggers or a celebrity or something like that so the very very the very day",
    "start": "412919",
    "end": "419080"
  },
  {
    "text": "you're gonna have your 15 minutes of fame your site is down because it doesn't have capacity that will not",
    "start": "419080",
    "end": "424690"
  },
  {
    "text": "happen if you're using telephones so for these very good days you're going to have all the capability of cloud from",
    "start": "424690",
    "end": "430000"
  },
  {
    "text": "our power of serving terabits per seconds of data and millions of requests",
    "start": "430000",
    "end": "435669"
  },
  {
    "text": "per second to your customers also in the",
    "start": "435669",
    "end": "441550"
  },
  {
    "text": "unfortunate case that our origin might be down in that case CloudFront will be",
    "start": "441550",
    "end": "446890"
  },
  {
    "text": "able to serve a stay of contact even if your objects are expired so let's say you there something goes wrong with your",
    "start": "446890",
    "end": "454300"
  },
  {
    "text": "origin be that a static content or dynamic content if we have this object in cache your customers are going to be",
    "start": "454300",
    "end": "461260"
  },
  {
    "text": "seeing old news but they're not going to be seeing an error but our page and that's way better",
    "start": "461260",
    "end": "467580"
  },
  {
    "text": "third transference is also important if you want more security so I mentioned DDoS on the previous one",
    "start": "467580",
    "end": "475180"
  },
  {
    "text": "claude from torrent gives you standard AWS shield as part of the cloud front",
    "start": "475180",
    "end": "481210"
  },
  {
    "text": "offering this means whenever someone tries to ddos you you'll do we have a",
    "start": "481210",
    "end": "486910"
  },
  {
    "text": "lot of countermeasures we can deploy to avoid that it does being successful the first one of those is very easy to",
    "start": "486910",
    "end": "492970"
  },
  {
    "text": "understand it is very hard to bring down a service like cloud front it's very very expensive if you're doing a DDoS",
    "start": "492970",
    "end": "500260"
  },
  {
    "text": "you're hiring a botnet or something like that you're going to be spending a lot of money before you can successfully bring",
    "start": "500260",
    "end": "506979"
  },
  {
    "text": "down platforms because of your capacity even if you can effect let's say a small",
    "start": "506979",
    "end": "513339"
  },
  {
    "text": "point of presence or something of that nature we can manage traffic in",
    "start": "513339",
    "end": "520050"
  },
  {
    "text": "a way that you send this attacker only to that place or redistribute to traffic",
    "start": "520050",
    "end": "525510"
  },
  {
    "text": "and make your distribution available your content will always be available",
    "start": "525510",
    "end": "531410"
  },
  {
    "text": "travel also includes Web Application Firewall which you protect your content for common attack scenarios like",
    "start": "531560",
    "end": "538310"
  },
  {
    "text": "cross-site scripting c-curve injection and many others cloud phones will always",
    "start": "538310",
    "end": "543840"
  },
  {
    "text": "keep its servers up-to-date so don't have to worry about I am am i running the latest ssl library",
    "start": "543840",
    "end": "549660"
  },
  {
    "text": "that has protection against whatever new exploit has been released last week we",
    "start": "549660",
    "end": "555660"
  },
  {
    "text": "are that's our job we do that for you we are announcing in this week I don't know",
    "start": "555660",
    "end": "562440"
  },
  {
    "text": "that's probably the first time we are hearing it a product called field level encryption if this product we're going",
    "start": "562440",
    "end": "567990"
  },
  {
    "text": "to hold the public key you're going to give us and we will encrypt some form some fields inside a form in a post or",
    "start": "567990",
    "end": "575400"
  },
  {
    "text": "put requests with that public key which means your personal personal PII data",
    "start": "575400",
    "end": "582360"
  },
  {
    "text": "which is personal identifiable data will be encrypted from the very first point",
    "start": "582360",
    "end": "587970"
  },
  {
    "text": "of contact contact on the cloud for network until the very last point where",
    "start": "587970",
    "end": "593220"
  },
  {
    "text": "this data is consumed so who uses that today Amazon again whenever you put a",
    "start": "593220",
    "end": "598680"
  },
  {
    "text": "credit card information whenever it touches cloud front that that credit card gets encrypted so there's no way",
    "start": "598680",
    "end": "604530"
  },
  {
    "text": "it's going to be ended up in a log there's no way it might be decrypt inspected by a mid-level service because",
    "start": "604530",
    "end": "612810"
  },
  {
    "text": "it flows through pipelines very long pipeline of services but only the payment service needs this credit",
    "start": "612810",
    "end": "618480"
  },
  {
    "text": "card information you can do that for your own data starting a couple weeks from now and that brings me to compliance if you",
    "start": "618480",
    "end": "628950"
  },
  {
    "text": "use field level encryption your surface area that has to be audited for PCI compliance is greatly reduced because",
    "start": "628950",
    "end": "636180"
  },
  {
    "text": "now all these intermediary systems they don't see our data they see just a blurb of encrypted data and then don't have",
    "start": "636180",
    "end": "641970"
  },
  {
    "text": "the key so as long as you can prove you can you correctly managing this key you don't even have to audit this intermediary",
    "start": "641970",
    "end": "648160"
  },
  {
    "text": "system it's much easier to get PCI compliance by the way CloudFront will enable you to have PCI compliant HIPAA",
    "start": "648160",
    "end": "656470"
  },
  {
    "text": "compliant DSS compliant systems all our infrastructure is PCI compliant so we",
    "start": "656470",
    "end": "661899"
  },
  {
    "text": "can build a PCI compliant service on top of that without having to worry about",
    "start": "661899",
    "end": "667259"
  },
  {
    "text": "the security requirements that are posed on data centers so by the way we care",
    "start": "667259",
    "end": "675069"
  },
  {
    "text": "about those in reverse order so I presented them in performance availability security but our concerns",
    "start": "675069",
    "end": "680259"
  },
  {
    "text": "is actually reverse security for us is more important than everything else then availability and Leslie performance so",
    "start": "680259",
    "end": "689050"
  },
  {
    "text": "now let's get to the the reason we are here measuring the internet in real time right so this is how a request flows",
    "start": "689050",
    "end": "695980"
  },
  {
    "text": "through CloudFront so our viewer there wants to get a give a gift for a cat so",
    "start": "695980",
    "end": "703629"
  },
  {
    "text": "he goes to his ISP DNS was over that's gonna be Verizon Comcast or whatever",
    "start": "703629",
    "end": "710139"
  },
  {
    "text": "could be your SP and ask it for what CA P address for example.com these RSP was",
    "start": "710139",
    "end": "717490"
  },
  {
    "text": "over we eventually find our own DNS server and he's going to ask",
    "start": "717490",
    "end": "723180"
  },
  {
    "text": "distribution that cloud from that mat wuts ap address for that the cloud from",
    "start": "723180",
    "end": "728350"
  },
  {
    "text": "DNS system we're going to have to take this information the distribution name the resolver process it and come out",
    "start": "728350",
    "end": "735399"
  },
  {
    "text": "with an IP address we're going to give them that back to the user which dents connect to our pop and gets is ugly cat",
    "start": "735399",
    "end": "744569"
  },
  {
    "text": "so the problem we are trying to solve here is to how to optimally answer this",
    "start": "744569",
    "end": "749649"
  },
  {
    "text": "question given a resolver what is the best pop where to send this request",
    "start": "749649",
    "end": "756179"
  },
  {
    "text": "we're going to take all these factors in consideration performance server capacity pop health and network capacity",
    "start": "756179",
    "end": "763509"
  },
  {
    "text": "when I think it's all into consideration to give our users the best possible experience the way we do that",
    "start": "763509",
    "end": "770760"
  },
  {
    "text": "has to be done in real-time because internet is not a place that is always like Las Vegas with blue skies sometimes",
    "start": "770760",
    "end": "777870"
  },
  {
    "text": "it's like Seattle that has bad weather right so that's you have to account for",
    "start": "777870",
    "end": "783450"
  },
  {
    "text": "that all the time when there is congestion I have to route around it when there is interruption we have to route around it so you don't have to",
    "start": "783450",
    "end": "790980"
  },
  {
    "text": "care about Internet weather we carefully care about it for you I started to stock talk saying something",
    "start": "790980",
    "end": "797790"
  },
  {
    "text": "about feedback loops so let me define what I mean by feedback loops when you're in the shower you want some",
    "start": "797790",
    "end": "804920"
  },
  {
    "text": "temperature that pleases you right but you don't want to know anything about hydrodynamics or thermodynamics and",
    "start": "804920",
    "end": "811230"
  },
  {
    "text": "calculate how much flow of the hot water is coming how much of the other one and that many degrees to get the perfect",
    "start": "811230",
    "end": "817980"
  },
  {
    "text": "bath and then someone goes to the next hotel room and turns the water in our",
    "start": "817980",
    "end": "823830"
  },
  {
    "text": "audience exchange you don't have to do that you don't have to do any of that you just have to know one side is hotter",
    "start": "823830",
    "end": "829440"
  },
  {
    "text": "the other side is cold because you're measuring the temperature in your back all the time and you can feel it's",
    "start": "829440",
    "end": "836310"
  },
  {
    "text": "better or not or worse and then you can turn the knob feedback loops are based on the same principle I don't have to",
    "start": "836310",
    "end": "843270"
  },
  {
    "text": "understand the inner workings I just have to understand for that if I move",
    "start": "843270",
    "end": "849150"
  },
  {
    "text": "the knob to one side I get this behavior if I move the knob to another side I got",
    "start": "849150",
    "end": "854190"
  },
  {
    "text": "this other behavior is the same thing that we all do when we drive we move to one side and move to another but I don't",
    "start": "854190",
    "end": "859770"
  },
  {
    "text": "know how many degrees I'm moving my my steering wheel right so how does this apply to CloudFront we have a pop we",
    "start": "859770",
    "end": "867750"
  },
  {
    "text": "take measurements for central location happens to be AWS and we move and we send back to the pub control data so",
    "start": "867750",
    "end": "875220"
  },
  {
    "text": "let's start with the measurements you take the first measurement we take is the round trip time right the three 300",
    "start": "875220",
    "end": "881850"
  },
  {
    "text": "milliseconds from here to Brazil so this is how we measure around fifth time",
    "start": "881850",
    "end": "887160"
  },
  {
    "text": "every time in a new connection a new TCP connection lands on a path we measure",
    "start": "887160",
    "end": "892170"
  },
  {
    "text": "the time it takes from the scene act back packet we sent to the act back packet we get back from our viewers so",
    "start": "892170",
    "end": "900090"
  },
  {
    "text": "by measuring this time we have one data point of you can see what we do with that we send",
    "start": "900090",
    "end": "906140"
  },
  {
    "text": "all of these through Kinesis when Amazon Kinesis stream so hundreds of pops",
    "start": "906140",
    "end": "913030"
  },
  {
    "text": "hundreds of servers inside every pop tens of thousands of servers worldwide we push all these data to Kinesis stream",
    "start": "913240",
    "end": "920750"
  },
  {
    "text": "we use Kinesis consumer library KCl in ec2 we aggregate out this data we push",
    "start": "920750",
    "end": "927320"
  },
  {
    "text": "it to s3 at the end what we get is something like that for every network we",
    "start": "927320",
    "end": "932660"
  },
  {
    "text": "have a list of pops under latencies so now we know for every pup for every",
    "start": "932660",
    "end": "938420"
  },
  {
    "text": "network in the world EV network we see contacting CloudFront we know in real time",
    "start": "938420",
    "end": "943700"
  },
  {
    "text": "well what are the best pops for them latency wise before I continue let me",
    "start": "943700",
    "end": "950510"
  },
  {
    "text": "talk a little bit about the way we use Kinesis so Canisius has all these",
    "start": "950510",
    "end": "962780"
  },
  {
    "text": "performance out isabela ability to push a lot of data from distributed locations around the world this could be in your",
    "start": "962780",
    "end": "969770"
  },
  {
    "text": "applications devices which are spread around the world it has its ability because it has a concept of shards",
    "start": "969770",
    "end": "976760"
  },
  {
    "text": "so shards are these subtypes and cytokinesis and you can have as many of",
    "start": "976760",
    "end": "981770"
  },
  {
    "text": "them as you need to process your data in our case the sharding key the way we",
    "start": "981770",
    "end": "986990"
  },
  {
    "text": "separate the data is the pop name so some pops go into one shard some pops go into another shard when you consume",
    "start": "986990",
    "end": "993920"
  },
  {
    "text": "the data your consumers are also tied to a single shard so you have to select your key in a way that allows you to",
    "start": "993920",
    "end": "1001150"
  },
  {
    "text": "process the data you need together in the same consumer so it's very much like a MapReduce type of processing pipeline",
    "start": "1001150",
    "end": "1009580"
  },
  {
    "text": "and that's what we build if Kinesis the interesting thing about Canisius is the fact that we can dynamically change",
    "start": "1009580",
    "end": "1016080"
  },
  {
    "text": "these shards so the way it works is that whatever shard key you pass through",
    "start": "1016080",
    "end": "1022540"
  },
  {
    "text": "Kinesis gets hashed and gets transformed into a number from 0 to 200 to the 128",
    "start": "1022540",
    "end": "1029439"
  },
  {
    "text": "minus 1 and that large key space determines where",
    "start": "1029440",
    "end": "1036319"
  },
  {
    "text": "which shard you get every shard has a starting number and an ending number so once you shot don't you hash it can",
    "start": "1036320",
    "end": "1042589"
  },
  {
    "text": "assist us that for you you end up in a shard or in another shard and shards have finished capacity right you have to",
    "start": "1042590",
    "end": "1048920"
  },
  {
    "text": "create new shards if you need more capacity sorry so let's say we are building cloud",
    "start": "1048920",
    "end": "1055760"
  },
  {
    "text": "form from scratch today and we only have two pops we actually start with a 14 but let's say you already have two they both",
    "start": "1055760",
    "end": "1063980"
  },
  {
    "text": "feel fit in a single shard so it's fine we don't need to do anything else and then comes a third one Canisius cannot",
    "start": "1063980",
    "end": "1070790"
  },
  {
    "text": "handle the data of three shards three pops in a single shard what what is it",
    "start": "1070790",
    "end": "1075830"
  },
  {
    "text": "that we do with what we call recharging we split this chart in half now the first chart is okay the second one is",
    "start": "1075830",
    "end": "1082730"
  },
  {
    "text": "okay too but cloud phone keeps growing we now have five pops what we do we",
    "start": "1082730",
    "end": "1088730"
  },
  {
    "text": "split the second half in shards as well when you do that you don't have to change anything on the consumer side if",
    "start": "1088730",
    "end": "1095330"
  },
  {
    "text": "you're using Canisius consumer library you to recognize the new shard you to drain the old charts with all the data",
    "start": "1095330",
    "end": "1101240"
  },
  {
    "text": "from the old charts recognize the new ones and then starting reading from the new ones out transparently without you",
    "start": "1101240",
    "end": "1107720"
  },
  {
    "text": "having to do anything as long as you have enough computer power to run this the service that is consuming this data",
    "start": "1107720",
    "end": "1114440"
  },
  {
    "text": "you're going to be fine and how do you do that just have an auto scaling group",
    "start": "1114440",
    "end": "1119900"
  },
  {
    "text": "for instance and then you have enough capacity to run to consume this data okay back to CloudFront i told you",
    "start": "1119900",
    "end": "1127910"
  },
  {
    "text": "before that the request doing unexplained the request lifecycle that we have to make this decision based on",
    "start": "1127910",
    "end": "1134660"
  },
  {
    "text": "the result is p resolver the SP resolver will not tell us the IP address of the",
    "start": "1134660",
    "end": "1140780"
  },
  {
    "text": "viewer if you tell us the IP address of itself there is something called UCS",
    "start": "1140780",
    "end": "1146960"
  },
  {
    "text": "that some resolvers like Open DNS and Google DNS queues but that's not prevalent across ISPs because it's much",
    "start": "1146960",
    "end": "1155300"
  },
  {
    "text": "more expensive for them to provide so what we typically get for most requests",
    "start": "1155300",
    "end": "1160910"
  },
  {
    "text": "is a resolver IP address in the domain but if you remember the data we have is",
    "start": "1160910",
    "end": "1166730"
  },
  {
    "text": "by viewer networks right so that's not really the same thing so what do we do so we take this",
    "start": "1166730",
    "end": "1173360"
  },
  {
    "text": "viewer networks and populate insists and we transform that into resolvers two",
    "start": "1173360",
    "end": "1179300"
  },
  {
    "text": "latencies how do we do that we have another measurement system which I'm not going to be going to details today that",
    "start": "1179300",
    "end": "1185720"
  },
  {
    "text": "generates for us what we call the resolvers to viewers mapping so we have this mapping that tells us which viewers",
    "start": "1185720",
    "end": "1192380"
  },
  {
    "text": "which networks use which resolvers and then we can do a MapReduce type of",
    "start": "1192380",
    "end": "1197900"
  },
  {
    "text": "operation and come out with the data that we care about which is the resolver to pop mapping with latencies okay what",
    "start": "1197900",
    "end": "1207980"
  },
  {
    "text": "we've learned so far we learned that using Amazon can uses streams to get data from many",
    "start": "1207980",
    "end": "1214070"
  },
  {
    "text": "distributed endpoints for central location is something very efficient we learned that using KCl that Kinesis",
    "start": "1214070",
    "end": "1220430"
  },
  {
    "text": "consumer library to consume this data makes it easy and simple to build your",
    "start": "1220430",
    "end": "1226220"
  },
  {
    "text": "consumer side of this analytics pipeline and we also learned to me that you already probably know that you can start",
    "start": "1226220",
    "end": "1232850"
  },
  {
    "text": "this intermediary beta industry okay we also measured other types of data for",
    "start": "1232850",
    "end": "1239930"
  },
  {
    "text": "instance we measure pop health in this case we're not using Canisius we are using cloud watch were created creating",
    "start": "1239930",
    "end": "1246830"
  },
  {
    "text": "cloud watch metrics for the pop health that there was for instance what's the CPU usage on single pop and they're",
    "start": "1246830",
    "end": "1254510"
  },
  {
    "text": "pushing this data to cloud watch a big advantage of doing that is that we get alarms and we get - words just by using",
    "start": "1254510",
    "end": "1262160"
  },
  {
    "text": "cloud watch which makes it much easier to get this other data we need right and on the other side we put this data from",
    "start": "1262160",
    "end": "1270590"
  },
  {
    "text": "cloud watch using cloud watch as API which can give us real-time access to the latest value of all these metrics",
    "start": "1270590",
    "end": "1276680"
  },
  {
    "text": "and then we can decide is this pop healthy is it taking too many requests",
    "start": "1276680",
    "end": "1283700"
  },
  {
    "text": "should I send less traffic to it is it taking too few requests can I send marked traffic to it and we start this",
    "start": "1283700",
    "end": "1290060"
  },
  {
    "text": "computed capacity in an RDS database so we do this computation decide whether",
    "start": "1290060",
    "end": "1295130"
  },
  {
    "text": "the pop is just like the shower too hard to code we turn the knob and we start this data back",
    "start": "1295130",
    "end": "1301130"
  },
  {
    "text": "to an RDS database another design pattern there is to whenever you can",
    "start": "1301130",
    "end": "1307160"
  },
  {
    "text": "whenever the number of metrics allows it use cloud watch matrix instead of Canisius because them you get alarms and",
    "start": "1307160",
    "end": "1314480"
  },
  {
    "text": "dashboard without having to do any further work that makes it much easier and another one is that you can read",
    "start": "1314480",
    "end": "1320840"
  },
  {
    "text": "these metrics from cloud watch using an API you don't you are not tied to the console you can have this data inside",
    "start": "1320840",
    "end": "1327680"
  },
  {
    "text": "your feedback loop automated system so I told you about other types of data I",
    "start": "1327680",
    "end": "1333710"
  },
  {
    "text": "told you about link utilization I talked about load by viewer Network was over we",
    "start": "1333710",
    "end": "1338780"
  },
  {
    "text": "follow the same patterns there so use either Kinesis or cloud watch so I'm not going to go into the tail so how is that",
    "start": "1338780",
    "end": "1345980"
  },
  {
    "text": "I'll put together so we have the input resolver we have all these auxiliary inputs performance server capacity pub",
    "start": "1345980",
    "end": "1353690"
  },
  {
    "text": "health network capacity and you have to decide which pop and I told you you're",
    "start": "1353690",
    "end": "1358880"
  },
  {
    "text": "going to be using feedback loops to do that so putting out all together we have the cloud front pop which by the way",
    "start": "1358880",
    "end": "1365840"
  },
  {
    "text": "also hosts our clouds from DNS service and we push all this data our TT latency",
    "start": "1365840",
    "end": "1373070"
  },
  {
    "text": "load and luke utilization over Kinesis and we pre compute a resolver to pop",
    "start": "1373070",
    "end": "1380210"
  },
  {
    "text": "association table we send this table back to the pops - every single pop in",
    "start": "1380210",
    "end": "1385280"
  },
  {
    "text": "the world so that they know when they get a resolver to reach at location to",
    "start": "1385280",
    "end": "1390410"
  },
  {
    "text": "send this request and you do that continuously we keep muting those all the time we get new data we build a new",
    "start": "1390410",
    "end": "1396530"
  },
  {
    "text": "table we send it to the edge we also have the pop health feedback loop on top",
    "start": "1396530",
    "end": "1404420"
  },
  {
    "text": "of that that reads half matrix and start those into and process that using in",
    "start": "1404420",
    "end": "1412460"
  },
  {
    "text": "situ star a capacity value inside RDS and then that feeds back into that first",
    "start": "1412460",
    "end": "1419600"
  },
  {
    "text": "system telling us how much load a pop can take can this pop take this much",
    "start": "1419600",
    "end": "1424610"
  },
  {
    "text": "load fleet a class and that also feeds into the pre computed resolver to pop table so the another design pattern here",
    "start": "1424610",
    "end": "1433100"
  },
  {
    "text": "is that we can use mood nested feedback loops and that is good because that that allows you to take a",
    "start": "1433100",
    "end": "1439810"
  },
  {
    "text": "very complicated problem like the problem statement I had before having all these inputs to the side to each",
    "start": "1439810",
    "end": "1446110"
  },
  {
    "text": "resolver to each pop to send every resolver and boil it down to a simpler",
    "start": "1446110",
    "end": "1451810"
  },
  {
    "text": "problem for problem that I can understand and then another feedback loop on top of that and it's also a problem that I can understand and the",
    "start": "1451810",
    "end": "1458260"
  },
  {
    "text": "resulting system is very complex but it's one that I can understand we also learned that we can pre-compute this",
    "start": "1458260",
    "end": "1463870"
  },
  {
    "text": "data in AWS so I don't have to do any kind of expensive computation every time",
    "start": "1463870",
    "end": "1469660"
  },
  {
    "text": "I get I require a DNS request at the edge because it would take too long and",
    "start": "1469660",
    "end": "1475450"
  },
  {
    "text": "I have to do that millions and millions and millions of times ok so let's see",
    "start": "1475450",
    "end": "1481660"
  },
  {
    "text": "that in practice how does that react to ever changing Network conditions so this",
    "start": "1481660",
    "end": "1490330"
  },
  {
    "text": "is how routers work these days they have all these input interfaces and output",
    "start": "1490330",
    "end": "1497020"
  },
  {
    "text": "interfaces they are usually the same but that's understand them as being separate",
    "start": "1497020",
    "end": "1502170"
  },
  {
    "text": "every time a new IP packet comes into a router it decides in which part of this",
    "start": "1502170",
    "end": "1508530"
  },
  {
    "text": "cross network to connect them and send the packets to the output you can see",
    "start": "1508530",
    "end": "1515410"
  },
  {
    "text": "that we can have the 3 inputs ending hitter to the same output and it would not be able to process that or to send",
    "start": "1515410",
    "end": "1521800"
  },
  {
    "text": "that because there's affinity bandwidth on every single one of these arrows so",
    "start": "1521800",
    "end": "1527580"
  },
  {
    "text": "practice the way it works is that it has a buffer a queue on every single one of",
    "start": "1527580",
    "end": "1533200"
  },
  {
    "text": "those outputs when there is congestion this is what happens eventually this queue starts filling up and eventually",
    "start": "1533200",
    "end": "1540310"
  },
  {
    "text": "the last packet doesn't feel it gets dropped so that's how congestion happens",
    "start": "1540310",
    "end": "1545680"
  },
  {
    "text": "on the internet and then TCP you adapt to that and other protocols were dev to that and will send less data to avoid",
    "start": "1545680",
    "end": "1552430"
  },
  {
    "text": "this congestion in the first place but how do we adapt to that when we see a",
    "start": "1552430",
    "end": "1557590"
  },
  {
    "text": "congested link how they see it in the first place so this is",
    "start": "1557590",
    "end": "1562620"
  },
  {
    "text": "one of those RTT measurements that I showed you before when when there is",
    "start": "1562620",
    "end": "1568050"
  },
  {
    "text": "congestion suddenly that first pop that was twenty milliseconds is now 50",
    "start": "1568050",
    "end": "1573450"
  },
  {
    "text": "milliseconds of latency 50 milliseconds of round-trip time this means pop number",
    "start": "1573450",
    "end": "1579660"
  },
  {
    "text": "one which was preferred is not not preferred anymore traffic we're going to flow to pop Choo and pop three before it",
    "start": "1579660",
    "end": "1585540"
  },
  {
    "text": "flows to pop number one so by measuring that in real time all the time we can route around congested links we can send",
    "start": "1585540",
    "end": "1593820"
  },
  {
    "text": "your traffic to whatever now the pop is best for your customer right now",
    "start": "1593820",
    "end": "1599270"
  },
  {
    "text": "remember congestion usually does not happen inside Amazon Network it happens",
    "start": "1599270",
    "end": "1604400"
  },
  {
    "text": "more often outside Amazon's at work because it's there is much more internet outside Amazon's network than it is",
    "start": "1604400",
    "end": "1611640"
  },
  {
    "text": "inside our network so we don't have a way to directly measure that and we",
    "start": "1611640",
    "end": "1617190"
  },
  {
    "text": "don't really know what perhaps exists inside every single SP in the world but you can see the net effect of this",
    "start": "1617190",
    "end": "1623610"
  },
  {
    "text": "increased latency because there is all this queuing happening that every single router along the way we can citizen",
    "start": "1623610",
    "end": "1630180"
  },
  {
    "text": "crease latencies piling up and then you see okay so that switch links and to do",
    "start": "1630180",
    "end": "1636060"
  },
  {
    "text": "that without any operator integration you do that in minutes how do you react",
    "start": "1636060",
    "end": "1641700"
  },
  {
    "text": "to a pop getting hot by getting hot I mean getting more with requests per second than it can handle",
    "start": "1641700",
    "end": "1647700"
  },
  {
    "text": "or by getting closer to what would be the proper limit of it handling requests",
    "start": "1647700",
    "end": "1653750"
  },
  {
    "text": "with the one acceptable level of performance so this is how it happens",
    "start": "1653750",
    "end": "1659880"
  },
  {
    "text": "first we met we we see the server getting hot that's a metric like CPU utilization we push that to cloud watch",
    "start": "1659880",
    "end": "1667290"
  },
  {
    "text": "that lands on ec2 and then you see 2000s",
    "start": "1667290",
    "end": "1672300"
  },
  {
    "text": "smaller capacities and less last traffic to that pop and then we send that to the",
    "start": "1672300",
    "end": "1677760"
  },
  {
    "text": "inner feedback loop and eventually when you pre compute it was over to pop Association table we have less resolvers",
    "start": "1677760",
    "end": "1685800"
  },
  {
    "text": "for that same pop which means less traffic is going to land there and eventually the pop is going to be okay",
    "start": "1685800",
    "end": "1692490"
  },
  {
    "text": "it's not be hot anymore so we're going to be controlling for capacity as well if ever",
    "start": "1692490",
    "end": "1698640"
  },
  {
    "text": "changing loads so whenever you have a new release and you software update and your game update whatever is you said",
    "start": "1698640",
    "end": "1706410"
  },
  {
    "text": "more traffic to us you don't have to tell us in advance we're gonna sense it and adapt to that so we learn that cloud",
    "start": "1706410",
    "end": "1716220"
  },
  {
    "text": "firm does all this real-time measurement to be able to give your customers best",
    "start": "1716220",
    "end": "1721890"
  },
  {
    "text": "the best performance the best availability and the best security in real time as a recap of the design",
    "start": "1721890",
    "end": "1729930"
  },
  {
    "text": "patterns we talked about today we learn to use Canisius to transfer data from many different endpoints back to a",
    "start": "1729930",
    "end": "1736980"
  },
  {
    "text": "central location in a very scalable way we learned that using Canisius client",
    "start": "1736980",
    "end": "1742740"
  },
  {
    "text": "library we can do that in a scalable way inside this issue as well we can consume",
    "start": "1742740",
    "end": "1748680"
  },
  {
    "text": "these data we learn to aggregate this data in ec3 in s3 we learn that we can",
    "start": "1748680",
    "end": "1755250"
  },
  {
    "text": "use cloud watch for metrics for when we have low and moderate moderate Carter cardinality which is the number of",
    "start": "1755250",
    "end": "1762150"
  },
  {
    "text": "metrics is not too large which would be in the first case we learn to use",
    "start": "1762150",
    "end": "1768900"
  },
  {
    "text": "multiple feedback loops so we can take a complex problem and break it down into more simple problems and we learn to",
    "start": "1768900",
    "end": "1777150"
  },
  {
    "text": "pre-compute data in the ws region so we don't have to do all these expensive computations if all these data at",
    "start": "1777150",
    "end": "1783000"
  },
  {
    "text": "request time and that saves makes the in our case that makes a dns fleet smaller",
    "start": "1783000",
    "end": "1790230"
  },
  {
    "text": "than it would be otherwise and it makes the DNS response time faster than it would be otherwise it's a simple lookup",
    "start": "1790230",
    "end": "1798050"
  },
  {
    "text": "it's a short talk that's what I had for today I'll be taking questions from you",
    "start": "1798050",
    "end": "1805140"
  },
  {
    "text": "off stage feel free to come by and talk to me it was a pleasure talking to you",
    "start": "1805140",
    "end": "1811310"
  },
  {
    "text": "[Applause]",
    "start": "1811310",
    "end": "1819419"
  }
]