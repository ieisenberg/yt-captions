[
  {
    "start": "0",
    "end": "37000"
  },
  {
    "text": "and I'm here to talk to you today about why we built VPC and came out of vc2 classic how we built it some of the",
    "start": "40",
    "end": "7480"
  },
  {
    "text": "underlying challenges uh in the physical networking layer and what that Maps into in the",
    "start": "7480",
    "end": "12920"
  },
  {
    "text": "virtual networking layer and how this all translates into a broader platform that we've built with a Z",
    "start": "12920",
    "end": "19600"
  },
  {
    "text": "cost so I'm going to give the folks in the back coming in just a minute to take a seat I uh I believe that they have the",
    "start": "19600",
    "end": "25320"
  },
  {
    "text": "right to a full session um we will not be hosting Q&A today but if there are questions please",
    "start": "25320",
    "end": "31359"
  },
  {
    "text": "feel free to come to us",
    "start": "31359",
    "end": "34399"
  },
  {
    "start": "37000",
    "end": "37000"
  },
  {
    "text": "afterwards so in AWS we have this notion of the cloud and in the cloud as in any other",
    "start": "37239",
    "end": "45079"
  },
  {
    "text": "traditional uh on-prem facility you need a network if that network is virtual or physical it doesn't matter you need a",
    "start": "45079",
    "end": "51160"
  },
  {
    "text": "network and in our Cloud we have services that offer private endpoint",
    "start": "51160",
    "end": "57559"
  },
  {
    "text": "connectivity private endpoint connectivity means means I have an IP address that I can only get to privately",
    "start": "57559",
    "end": "64040"
  },
  {
    "text": "uh rfc1918 that would be the 1081 1722 192 16816 those private non-routable",
    "start": "64040",
    "end": "71840"
  },
  {
    "text": "non-advertised address spaces and in this private npoint space",
    "start": "71840",
    "end": "77200"
  },
  {
    "text": "you see ec2 for virtual machines you see elastic load balancing or elb for load",
    "start": "77200",
    "end": "83479"
  },
  {
    "text": "balancing of those ec2 virtual machines we also have private storage",
    "start": "83479",
    "end": "89000"
  },
  {
    "text": "and although that does not have a private endpoint space it does attach to private virtual machines that do have a",
    "start": "89000",
    "end": "95720"
  },
  {
    "text": "private endpoint address space and of course relational database service or",
    "start": "95720",
    "end": "102360"
  },
  {
    "text": "RDS and red shift so we have a cloud that offers a number of services that live in a",
    "start": "103200",
    "end": "109399"
  },
  {
    "text": "private endpoint space and will take on generally speaking non RFC or rfc1918",
    "start": "109399",
    "end": "114600"
  },
  {
    "text": "address space okay just for clarification too we do have a public endpoint space for services like ec2",
    "start": "114600",
    "end": "121560"
  },
  {
    "text": "that do exist in the non RFC 1918 space so that you can hit them publicly if your security groups allow but we've got",
    "start": "121560",
    "end": "128920"
  },
  {
    "text": "this network and of course our",
    "start": "128920",
    "end": "134879"
  },
  {
    "text": "customers have data centers you saw it today in Andy's keynote with VM were on",
    "start": "134879",
    "end": "140640"
  },
  {
    "start": "136000",
    "end": "136000"
  },
  {
    "text": "stage there is a movement from the Enterprise and other businesses to come into AWS and Cloud doesn't happen",
    "start": "140640",
    "end": "148239"
  },
  {
    "text": "overnight on the White board it does super easy for us to visualize what does",
    "start": "148239",
    "end": "154800"
  },
  {
    "start": "149000",
    "end": "149000"
  },
  {
    "text": "it take to integrate my private data center with Amazon's Cloud we simply",
    "start": "154800",
    "end": "160680"
  },
  {
    "text": "draw the data center on the left we draw the AWS Cloud on the",
    "start": "160680",
    "end": "165879"
  },
  {
    "text": "right PowerPoint engineering it's my favorite unfortunately it's not that",
    "start": "166720",
    "end": "171840"
  },
  {
    "text": "easy right because you're going to have address space that you're already provisioned in your on-prem data centers",
    "start": "171840",
    "end": "179080"
  },
  {
    "text": "and you're going to have this networking address space that you've got to integrate how many in the audience have",
    "start": "179080",
    "end": "184599"
  },
  {
    "text": "actually work for companies that have actually acquired other companies yes more than",
    "start": "184599",
    "end": "191519"
  },
  {
    "text": "half so this is a challenge of integrating two different IP address spaces is not y this is the first",
    "start": "191519",
    "end": "198319"
  },
  {
    "text": "problem that we faced in AWS more specifically this is a big",
    "start": "198319",
    "end": "203920"
  },
  {
    "text": "problem we faced at Amazon the actual retailer behind AWS",
    "start": "203920",
    "end": "209959"
  },
  {
    "text": "in our own business we lived in private data centers for years that means we",
    "start": "209959",
    "end": "215480"
  },
  {
    "text": "have physical facilities that have physical networking there may be a virtual networking layer or two in there",
    "start": "215480",
    "end": "221840"
  },
  {
    "text": "but how do you transition that to Amazon web services doesn't happen overnight doesn't happen overnight for us we",
    "start": "221840",
    "end": "228840"
  },
  {
    "text": "understand in our customers it won't happen overnight it's not easy more on that in a",
    "start": "228840",
    "end": "234560"
  },
  {
    "text": "minute when we started ec2 we started what was with is now",
    "start": "234560",
    "end": "240079"
  },
  {
    "text": "known as ec2 classic the idea of one flat Network address space that is a",
    "start": "240079",
    "end": "247319"
  },
  {
    "text": "10/8 and the earliest days it was easy it allowed us to get the virtual machine",
    "start": "247319",
    "end": "252400"
  },
  {
    "text": "service up and running you could fire a virtual machine up you would get some random IP address here we're seeing",
    "start": "252400",
    "end": "258160"
  },
  {
    "text": "10441 12.4 you fire another one up your",
    "start": "258160",
    "end": "263759"
  },
  {
    "text": "customer orange your 10 4492 17 you don't know if that that's",
    "start": "263759",
    "end": "271280"
  },
  {
    "text": "10446 could be 10442 SL I'd have to do the cider math here I don't know if I'm in the same CER",
    "start": "271280",
    "end": "278240"
  },
  {
    "text": "block or not but I got an IP address so minimum viable for us allowed the virtual machine service years ago to",
    "start": "278240",
    "end": "284960"
  },
  {
    "text": "come up and say okay I got IP connectivity the challenge was other customers customer blue here comes up",
    "start": "284960",
    "end": "291720"
  },
  {
    "text": "next to you and well now you're 10441 12.5 what's the challenge here I've got",
    "start": "291720",
    "end": "297240"
  },
  {
    "text": "another customer with an IP address that's a sl32 offset for me they're next door so no concept of",
    "start": "297240",
    "end": "304880"
  },
  {
    "text": "contiguity uh contiguous IP address blocks here this is our challenge in ec2 classic then another customer come up",
    "start": "304880",
    "end": "311600"
  },
  {
    "text": "comes up and he's in the12 subnet the point here is that what we",
    "start": "311600",
    "end": "319160"
  },
  {
    "text": "know today as ec2 classic does not",
    "start": "319160",
    "end": "325800"
  },
  {
    "start": "323000",
    "end": "323000"
  },
  {
    "text": "work and why it doesn't work is because if you have a network in your on Prem",
    "start": "325800",
    "end": "331120"
  },
  {
    "text": "Data Center and I promise you if you're an Enterprise you're going to be bigger than a 16-bit network all right but just",
    "start": "331120",
    "end": "337479"
  },
  {
    "text": "a model and keep it simple let's say you've got 192 16816 in your on",
    "start": "337479",
    "end": "343720"
  },
  {
    "text": "Prem your routing table says all local routes have destination here in the on-prem that's good the developer fires",
    "start": "343720",
    "end": "351360"
  },
  {
    "text": "up that ec2 instance back in the day the cr18 XL for example and it comes up",
    "start": "351360",
    "end": "358199"
  },
  {
    "text": "10441 12.4 developer in an office on Corp Network",
    "start": "358199",
    "end": "364360"
  },
  {
    "text": "that comes back into the on Prem network of 1921 16816 says I need to SSH into",
    "start": "364360",
    "end": "370120"
  },
  {
    "text": "this instance let's assume it's a Linux instance so Mr networking engineer says",
    "start": "370120",
    "end": "375800"
  },
  {
    "text": "all right I'll create a route destination for you I'm going to say that all traffic",
    "start": "375800",
    "end": "381960"
  },
  {
    "text": "destination 10441 12.4 will route to AWS developer happy",
    "start": "381960",
    "end": "387960"
  },
  {
    "text": "he or she gets to SSH into that instance network engineering not so happy they had to take a trouble ticket but",
    "start": "387960",
    "end": "393280"
  },
  {
    "text": "nonetheless developers happy and that's all that matters now another customer comes",
    "start": "393280",
    "end": "399759"
  },
  {
    "text": "up 10441 12.5 next door that's not you but you developer",
    "start": "399759",
    "end": "406680"
  },
  {
    "text": "says I need another instance they've got this cool service called elb 1044 9217 comes up and the developer",
    "start": "406680",
    "end": "413880"
  },
  {
    "text": "says now I need to SSH to this one as well I haven't figured out Auto scaling yet I haven't figured out cloud formation so I'm going to go in there by",
    "start": "413880",
    "end": "420000"
  },
  {
    "text": "hand and build it I need a ssh in as well so the networking engineer says I'll give you another sl32",
    "start": "420000",
    "end": "426000"
  },
  {
    "text": "route and over time what ends up happening is you've got a myriad of",
    "start": "426000",
    "end": "432599"
  },
  {
    "text": "destination routes going into your route tables how many think the network engineer is happy at this point both",
    "start": "432599",
    "end": "438599"
  },
  {
    "text": "with the developer and with us just's be very clear right and the challenge ends up",
    "start": "438599",
    "end": "445039"
  },
  {
    "text": "being that as you provision instances you have to go into the route tables and as you delete",
    "start": "445039",
    "end": "451520"
  },
  {
    "text": "instances because right virtual machines are Commodities you probably should also",
    "start": "451520",
    "end": "456680"
  },
  {
    "text": "delete those route table rules don't want to Orphan that out oh now the network engineer is very",
    "start": "456680",
    "end": "462199"
  },
  {
    "text": "upset right now what happens if the on-prem goes to",
    "start": "462199",
    "end": "471638"
  },
  {
    "text": "10446 and the data center range is",
    "start": "471800",
    "end": "476000"
  },
  {
    "text": "different unknown so singular route destinations to AWS",
    "start": "477560",
    "end": "485000"
  },
  {
    "text": "back in the day for ec2 classic or what is now known as ec2 classic caus a great amount of operational burden on our",
    "start": "485000",
    "end": "490639"
  },
  {
    "text": "developers more specifically our networking Engineers so we said hm let's step back",
    "start": "490639",
    "end": "496199"
  },
  {
    "text": "and find a way to give every customer the private Network that they've come to know in on-prem this is the evolution of",
    "start": "496199",
    "end": "503599"
  },
  {
    "text": "how we move from ec2 classic into VPC and the motivation as to why we needed to make this look more more like a",
    "start": "503599",
    "end": "509919"
  },
  {
    "text": "traditional physical network but we're going to do it virtually so the requirements on this was the customer",
    "start": "509919",
    "end": "515640"
  },
  {
    "text": "needs to be able to Define their CER blocks if you're in a 10446 address space and you want to look",
    "start": "515640",
    "end": "522959"
  },
  {
    "text": "like a 10456 address space in AWS you totally can you get to Define The Cider Block in",
    "start": "522959",
    "end": "530120"
  },
  {
    "text": "AWS as is that is the inherent property of VPC the singular sl32 destination routes",
    "start": "530120",
    "end": "537480"
  },
  {
    "text": "that the network engineer had to deal with that's that's that's nonsense that's that's a recipe for disaster from",
    "start": "537480",
    "end": "543360"
  },
  {
    "text": "security perspective and an operational burden let alone if you have thousands of routes I'm not sure the router you",
    "start": "543360",
    "end": "549920"
  },
  {
    "text": "know does it does it handle it at scale so we need to aggregate all of the destination traffic to",
    "start": "549920",
    "end": "556839"
  },
  {
    "text": "AWS and give you a way to Simply say say this sl16 address or smaller has",
    "start": "556839",
    "end": "563160"
  },
  {
    "text": "destination to AWS or multiple slash whatever networks destination to AWS we",
    "start": "563160",
    "end": "569040"
  },
  {
    "text": "need to be ble to aggregate all these routes so you don't have singular destination routes and finally we said",
    "start": "569040",
    "end": "574240"
  },
  {
    "text": "okay most importantly for the success of not only VPC but of",
    "start": "574240",
    "end": "579600"
  },
  {
    "text": "AWS we got to conform to existing Network designs we have to be able to play into what you the customer knows",
    "start": "579600",
    "end": "588160"
  },
  {
    "text": "today we can't tell you what the right way to do is this is this is networking this has been around for 2030 years we",
    "start": "588160",
    "end": "594760"
  },
  {
    "text": "have to conform with what exists today so we went to the Whiteboard",
    "start": "594760",
    "end": "600480"
  },
  {
    "start": "597000",
    "end": "597000"
  },
  {
    "text": "we drew out the on-prem box we drew out the adws cloud we put the arrow in we're done right no no what we did is we said",
    "start": "600480",
    "end": "607519"
  },
  {
    "text": "okay we're going to bring in a new network it's going to be called virtual private Cloud VPC for short I say it",
    "start": "607519",
    "end": "614079"
  },
  {
    "text": "short-handed so many times that I have to actually stop and think about the acronym and if you've been in AWS at any time you as well will but what did we do",
    "start": "614079",
    "end": "621160"
  },
  {
    "text": "we said okay let's go back to that whiteboard the on-prem is 1921 16816 those routes are going to stay",
    "start": "621160",
    "end": "627839"
  },
  {
    "text": "here they're going to Route local they don't need to ESS uh anywhere else now developers want to look at AWS",
    "start": "627839",
    "end": "635240"
  },
  {
    "text": "or maybe we're making a strategic migration whatever the case may be your networking team or maybe",
    "start": "635240",
    "end": "641839"
  },
  {
    "text": "possibly your developers inadvertently right have selected 172 3116 as their",
    "start": "641839",
    "end": "647040"
  },
  {
    "text": "Network in AWS so VPC allows us to actually Define for the first time ever",
    "start": "647040",
    "end": "652440"
  },
  {
    "text": "a private Network now this is not a novel concept bpc has been around since 2009 ballpark seven years but we're",
    "start": "652440",
    "end": "658959"
  },
  {
    "text": "going back in time to see why we did this and how we did it and the underlying challenges we",
    "start": "658959",
    "end": "665040"
  },
  {
    "text": "faced and so we said all right we need to now give you a way to integrate your network of 19268 with",
    "start": "665040",
    "end": "673920"
  },
  {
    "text": "17231 and we did this by way of edge points the visuals here are what you",
    "start": "673920",
    "end": "680399"
  },
  {
    "text": "might see as a vgw and a cgw all right this implies uh",
    "start": "680399",
    "end": "685639"
  },
  {
    "text": "potentially VPN it also could imply a different type of edge of direct in this case with a lock we IND we indicate VPN",
    "start": "685639",
    "end": "692160"
  },
  {
    "text": "but we have to have some physical networking capability to integrate the two if we're going to give you this we're going to bring you in we need to",
    "start": "692160",
    "end": "698560"
  },
  {
    "text": "let you integrate via VPN or possibly circuit integration known as Direct Connect more on that",
    "start": "698560",
    "end": "705519"
  },
  {
    "text": "later and as we bring you into the on Prem now that you've got your own",
    "start": "705519",
    "end": "711240"
  },
  {
    "text": "private Network you get your own subnets so now",
    "start": "711240",
    "end": "716680"
  },
  {
    "text": "you get to start to you get to carve out with VPC back in the day a network that might look like yours with the customer",
    "start": "716680",
    "end": "723680"
  },
  {
    "text": "IP address you want with the range you want that fits into your existing Design This is what we worked towards as we",
    "start": "723680",
    "end": "729920"
  },
  {
    "text": "evolved ec2 and realized that private networking was so important and of course we went to multiple subnets and",
    "start": "729920",
    "end": "735440"
  },
  {
    "text": "now we can do things like hey ec2 I want to map one subnet to az1 and one subnet",
    "start": "735440",
    "end": "741199"
  },
  {
    "text": "to az2 and I want to load balance across those and I get built-in active active redundancy this is the basis for",
    "start": "741199",
    "end": "748079"
  },
  {
    "text": "enabling the other services now keep in mind that VPC is private to",
    "start": "748079",
    "end": "754279"
  },
  {
    "text": "you and only you your network is not shared with another customer's Network and it's",
    "start": "754279",
    "end": "760079"
  },
  {
    "text": "actually not even shared with another Network in your own account it is quite possible in the VPC model that we've",
    "start": "760079",
    "end": "766079"
  },
  {
    "text": "designed to allow for you to clone that VPC and I use the word clone with quotes around it you can create one or more",
    "start": "766079",
    "end": "772760"
  },
  {
    "text": "vpcs next to it with the same address block now just side note here why would",
    "start": "772760",
    "end": "778920"
  },
  {
    "text": "we do that there's value to developers in having vpcs that look the same if they're doing QA environments Dev",
    "start": "778920",
    "end": "785600"
  },
  {
    "text": "regression test Etc all right but the capability is there and of course as you as your",
    "start": "785600",
    "end": "792160"
  },
  {
    "text": "developers spin up instances or your infrastructure people do uh depending on what the workload is you see that you",
    "start": "792160",
    "end": "798320"
  },
  {
    "text": "get to place your ec2 instance into those subnets now also keep in mind that",
    "start": "798320",
    "end": "803360"
  },
  {
    "text": "we allow you to private uh statically assign private IP address we allow you",
    "start": "803360",
    "end": "808959"
  },
  {
    "text": "to to take an IP address via DHCP which is serviced from VPC behind the scenes",
    "start": "808959",
    "end": "814000"
  },
  {
    "text": "as part of the virtual Network underneath or you can obviously assign a public IP out of our public IP pool",
    "start": "814000",
    "end": "820639"
  },
  {
    "text": "either ephemeral or elastic and of course this is just virtual networking so for the first 15",
    "start": "820639",
    "end": "826639"
  },
  {
    "start": "824000",
    "end": "824000"
  },
  {
    "text": "minutes you might be looking at me saying you've just gone backwards in time why do we do this well the reason is because we want to help you",
    "start": "826639",
    "end": "832839"
  },
  {
    "text": "understand how we built VPC to scale so in our world a subnet if we",
    "start": "832839",
    "end": "838279"
  },
  {
    "text": "think about the physical layer here we have to talk about our terminology in Virtual translated to what you will know",
    "start": "838279",
    "end": "844680"
  },
  {
    "text": "in physical physical a VLAN translates an our world to a subnet okay a VPC",
    "start": "844680",
    "end": "851920"
  },
  {
    "text": "translates to a vrf so you can have multiple vrfs in your account or multiple",
    "start": "851920",
    "end": "857839"
  },
  {
    "text": "vpcs but what happens if we think if we say",
    "start": "857839",
    "end": "863480"
  },
  {
    "start": "861000",
    "end": "861000"
  },
  {
    "text": "that a subnet is a VLAN and a VPC is a vrf that's great for One customer",
    "start": "863480",
    "end": "870560"
  },
  {
    "text": "it might be great for 4,000 customers right what do we do with a million",
    "start": "870560",
    "end": "876360"
  },
  {
    "text": "customers okay now here's the real engineering here's the challenge we have to face in our data centers in the",
    "start": "876360",
    "end": "882160"
  },
  {
    "text": "physical networking layer in our virtual n layer if we said that a VLAN is a",
    "start": "882160",
    "end": "887959"
  },
  {
    "text": "subnet and by VLAN definition you get 4096 theoretical 12 bit and size how",
    "start": "887959",
    "end": "894800"
  },
  {
    "text": "does that how do we get more than 4,000 subnets we had to figure that out",
    "start": "894800",
    "end": "899959"
  },
  {
    "text": "and if we said that a VPC is a vrf how do we have any type of large",
    "start": "899959",
    "end": "905600"
  },
  {
    "text": "commercial router that does anything more than a few thousand vrfs how do we",
    "start": "905600",
    "end": "910639"
  },
  {
    "text": "scale this out let's back up if we say that publicly we have over a million",
    "start": "910639",
    "end": "915800"
  },
  {
    "text": "customers in EC in AWS and if we assume that all million customers at least have one VPC how many vrfs are we talking",
    "start": "915800",
    "end": "923519"
  },
  {
    "text": "about here a million we had to look at the hardware",
    "start": "923519",
    "end": "929319"
  },
  {
    "text": "what commercial Hardware do we bring in to do this back in the day we have to map that physical infrastructure to",
    "start": "929319",
    "end": "934440"
  },
  {
    "text": "Virtual and of course there's only a fixed ratio of vlans to vrfs and networking Engineers don't like a large",
    "start": "934440",
    "end": "940639"
  },
  {
    "start": "938000",
    "end": "938000"
  },
  {
    "text": "number of vlans so back in that physical layer you have a big router go out and",
    "start": "940639",
    "end": "947360"
  },
  {
    "text": "get any of the commercial routers I won't name names but you can just imagine the big ones that will cook you dinner and probably make you",
    "start": "947360",
    "end": "953519"
  },
  {
    "text": "breakfast large take up lots of rack space they have a data plane they have a",
    "start": "953519",
    "end": "959600"
  },
  {
    "text": "smaller control plane that control plane is driven by a traditional CPU with software that you know networking gear",
    "start": "959600",
    "end": "966720"
  },
  {
    "text": "is the same as any traditional server physical server it's just got a different Hardware interface and we say",
    "start": "966720",
    "end": "972360"
  },
  {
    "text": "all right there is this control plane to data plane interaction through a small",
    "start": "972360",
    "end": "977399"
  },
  {
    "text": "bandwidth pipe now these data planes by the way networking companies really go",
    "start": "977399",
    "end": "982600"
  },
  {
    "text": "extra lengths to make these data planes perform very well right you want to move megabits gigabits terabits through data",
    "start": "982600",
    "end": "990480"
  },
  {
    "text": "planes got to perform so custom as6 all the hardware you can all the majors are doing this and then you want to pair it",
    "start": "990480",
    "end": "997199"
  },
  {
    "text": "up because when that one big router fails you want to go to the second one in the ha pair and then of course you've",
    "start": "997199",
    "end": "1003319"
  },
  {
    "text": "got ha communication between the two and you're putting a lot of stress",
    "start": "1003319",
    "end": "1009240"
  },
  {
    "text": "on these routers and so we have this challenge of how do we get a lot of vrfs and by the way if we say a million today",
    "start": "1009240",
    "end": "1017079"
  },
  {
    "text": "what does it look like in 5 years we don't know right we just don't so we have to scale",
    "start": "1017079",
    "end": "1022639"
  },
  {
    "text": "linearly and we had to look at how do we do this in a way where we're not having to buy large Hardware off commercial",
    "start": "1022639",
    "end": "1030480"
  },
  {
    "text": "Banks to do this at a way we can get the price to zero that's the challenge right how do",
    "start": "1030480",
    "end": "1036319"
  },
  {
    "start": "1036000",
    "end": "1036000"
  },
  {
    "text": "we keep the price zero for you how do we drive that price to a place that's is feasible for you let's give you an",
    "start": "1036319",
    "end": "1041678"
  },
  {
    "text": "example of some of the challenges we faced as we looked into the details so let's say an average uh router",
    "start": "1041679",
    "end": "1047400"
  },
  {
    "text": "configuration is about 50 characters size let's say for us to config up a VPC in that physical Network layer it's uh",
    "start": "1047400",
    "end": "1054200"
  },
  {
    "text": "10 lines say there's four subnets on average two public two private just four",
    "start": "1054200",
    "end": "1061240"
  },
  {
    "text": "okay let's say a config per subnet is five we're now into uh uh 20 across the",
    "start": "1061240",
    "end": "1068160"
  },
  {
    "text": "four and if we are looking at trying to scale 2,000 vpcs for our customer",
    "start": "1068160",
    "end": "1073600"
  },
  {
    "text": "base that average config file for the router is three Megs so",
    "start": "1073600",
    "end": "1079360"
  },
  {
    "text": "it turns out that in our testing in the labs as we built VPC out years",
    "start": "1079360",
    "end": "1084640"
  },
  {
    "text": "ago that file of three megabytes took five minutes to parse let's put this in perspective you",
    "start": "1084640",
    "end": "1091679"
  },
  {
    "text": "click on the AWS console you expect your change to be immediate so that routes take effect like",
    "start": "1091679",
    "end": "1097320"
  },
  {
    "text": "that how do we do it at 2,000 vpcs if it's going to take five minutes how do we go to a million right how do we do a",
    "start": "1097320",
    "end": "1103840"
  },
  {
    "text": "billion packets so we needed commodity Hardware that we",
    "start": "1103840",
    "end": "1110880"
  },
  {
    "text": "controlled the big virtual the big routers we're talking about are built by a handful of commercial",
    "start": "1110880",
    "end": "1116400"
  },
  {
    "text": "companies some of these Advanced features that get you the size and scale you need are only a few in size are",
    "start": "1116400",
    "end": "1123640"
  },
  {
    "text": "offered by a few and the interoperability between the companies because you want to diversify right",
    "start": "1123640",
    "end": "1130840"
  },
  {
    "text": "potentially blast radius considerations if I bring big routers in I want to do a couple different companies the",
    "start": "1130840",
    "end": "1136440"
  },
  {
    "text": "interoperability diminishes significantly as you go up in advanced feature",
    "start": "1136440",
    "end": "1143480"
  },
  {
    "text": "sets so let's step back here a bit and talk about capacity we've talked about",
    "start": "1143480",
    "end": "1149640"
  },
  {
    "start": "1144000",
    "end": "1144000"
  },
  {
    "text": "how many vpcs we're trying to design for how this translates into the routers that have to process the configuration",
    "start": "1149640",
    "end": "1155080"
  },
  {
    "text": "files to take effect now let's talk in terms of ec2 let's say I have an ha pair on the",
    "start": "1155080",
    "end": "1162480"
  },
  {
    "text": "left and I have an ha pair on the right the pair on the left gets me about 40",
    "start": "1162480",
    "end": "1168080"
  },
  {
    "text": "ec2 and instances and the pair on the right gets me about 40 ec2 instances that means I can put 40 I have 40 ec2",
    "start": "1168080",
    "end": "1174559"
  },
  {
    "text": "instances tied to one router pair and 40 to another now customer a says all right",
    "start": "1174559",
    "end": "1180679"
  },
  {
    "text": "well we're going to come online with three ec2 instances and we allocate into the cap pool of 40 we've got 37",
    "start": "1180679",
    "end": "1188799"
  },
  {
    "text": "left we have uh three slotted in there and the second thing is customer B",
    "start": "1188799",
    "end": "1194520"
  },
  {
    "text": "comes in and says well I only need two I'm a small company I'm testing things out",
    "start": "1194520",
    "end": "1200039"
  },
  {
    "text": "customer C comes in we load balance them into the router pair on the left they've got four instances on and on and on and",
    "start": "1200039",
    "end": "1205640"
  },
  {
    "text": "customer D brings in more virtual machines until customer a says you know what business is expanding we like AWS",
    "start": "1205640",
    "end": "1211360"
  },
  {
    "text": "we want more and as we horizontally scale",
    "start": "1211360",
    "end": "1217240"
  },
  {
    "text": "here customer e comes online he's like I'm just trying it out and so these customers keep bringing virtual machines",
    "start": "1217240",
    "end": "1223200"
  },
  {
    "text": "in and the problem we have is we don't we have a placement problem",
    "start": "1223200",
    "end": "1228240"
  },
  {
    "text": "your virtual machine is going to go into a router pair and be tied to that but we only have a physical capacity for so",
    "start": "1228240",
    "end": "1233960"
  },
  {
    "text": "much and by the way we don't know your growth in fact when G comes online they",
    "start": "1233960",
    "end": "1240320"
  },
  {
    "text": "blow out the router gr capacity but I still have slots for 25 for more virtual machines that's not",
    "start": "1240320",
    "end": "1246559"
  },
  {
    "text": "effective right we're spending money on physical Hardware but we're not getting the utilization on the router pair that",
    "start": "1246559",
    "end": "1252280"
  },
  {
    "text": "we want and what happens when Company B goes in and says all right we're just going to we want to be in the VPC on the",
    "start": "1252280",
    "end": "1259280"
  },
  {
    "text": "router pair on the right and we've now run out of capacity we're we're using uh",
    "start": "1259280",
    "end": "1264360"
  },
  {
    "text": "We've now taken the virtual machine capacity pool on that router pair to 40 what do we do we've run out of space in",
    "start": "1264360",
    "end": "1270919"
  },
  {
    "text": "our VPC this is the challenge of how we have to have a VPC mapping to a router pair with the ec2 incenses coming into",
    "start": "1270919",
    "end": "1278039"
  },
  {
    "text": "it right so what we said is from an implementation",
    "start": "1278039",
    "end": "1283240"
  },
  {
    "start": "1280000",
    "end": "1280000"
  },
  {
    "text": "perspective we need to scale the millions and our customer needs to be amazon.com it's the only customer we",
    "start": "1283240",
    "end": "1288919"
  },
  {
    "text": "need to focus on James said it last night we design our routers for One customer only",
    "start": "1288919",
    "end": "1295120"
  },
  {
    "text": "Amazon any server anywhere in a region can host the instance attached to any",
    "start": "1295120",
    "end": "1302080"
  },
  {
    "text": "subnet of VPC the capacity model you just saw with the AJ pair says hey I'm",
    "start": "1302080",
    "end": "1307600"
  },
  {
    "text": "going to be able to host any instance in any VPC but I also need to be able to restrict which instances you're getting",
    "start": "1307600",
    "end": "1313200"
  },
  {
    "text": "to you got to be able to only get in those vpcs that you own and are part of",
    "start": "1313200",
    "end": "1318840"
  },
  {
    "start": "1317000",
    "end": "1317000"
  },
  {
    "text": "so from a concept perspective how do we do this so yes we have Amazon we have Amazon has data",
    "start": "1318840",
    "end": "1325360"
  },
  {
    "text": "centers and yes we have physical hosts in those those physical hosts are our",
    "start": "1325360",
    "end": "1330480"
  },
  {
    "text": "hypervisors they've identified here in white with server uh IP addresses of 0.3 0.4 etc those are physical IPS on the",
    "start": "1330480",
    "end": "1338960"
  },
  {
    "text": "physical Network in our data center so we're talking about hypervisors running the ec2 virtual machines that take on",
    "start": "1338960",
    "end": "1345440"
  },
  {
    "text": "physical IP addresses now what we're looking at is how do we you put a virtual machine on",
    "start": "1345440",
    "end": "1350919"
  },
  {
    "text": "those hypervisors are you going to be on the physical Network or are you going to be on that virtual Network virtual",
    "start": "1350919",
    "end": "1356960"
  },
  {
    "text": "Network and that's what we're showing here how it works ec2 instance blue comes in a customer blue sorry comes in",
    "start": "1356960",
    "end": "1363120"
  },
  {
    "text": "with 10 Z2 gets placed on hypervisor 192168",
    "start": "1363120",
    "end": "1369039"
  },
  {
    "text": "0.3 two more instances come online to two different hypervisors with a one3",
    "start": "1369279",
    "end": "1376159"
  },
  {
    "text": "and a 1.4 hopefully these are in a different AZ right so now more customers come online",
    "start": "1376159",
    "end": "1384120"
  },
  {
    "text": "notice that I've got the same IP address being used between customers green blue and gray earlier I said that vpcs were",
    "start": "1384120",
    "end": "1391960"
  },
  {
    "text": "private to you and your account that you could have multiple vpcs with the same cider block they would be isolated away",
    "start": "1391960",
    "end": "1399360"
  },
  {
    "text": "from each other customers two customers in two different accounts could have vpcs with",
    "start": "1399360",
    "end": "1404400"
  },
  {
    "text": "the same CER block and again be isolated from each other the virtual networking layer we're building here on top of",
    "start": "1404400",
    "end": "1410400"
  },
  {
    "text": "these physical hosts has to accommodate this fact I have a virtual IP",
    "start": "1410400",
    "end": "1415880"
  },
  {
    "text": "102 I'm customer blue customer green is on the same host with me and also",
    "start": "1415880",
    "end": "1421640"
  },
  {
    "text": "102 so how do we actually ensure that blue gets to Blue only virtual machines",
    "start": "1421640",
    "end": "1427640"
  },
  {
    "text": "and green only gets to Green the answer is in a mapping service this is the",
    "start": "1427640",
    "end": "1433640"
  },
  {
    "text": "heart and soul of VPC if you've not seen this this will explain how we actually get Layer Two and layer three",
    "start": "1433640",
    "end": "1440640"
  },
  {
    "text": "ethernet uh destination routes to each virtual machine and how that translates back to subnets so what happens is the mapping",
    "start": "1440640",
    "end": "1447880"
  },
  {
    "text": "service is a distributed lookup all right it will map the",
    "start": "1447880",
    "end": "1452960"
  },
  {
    "text": "VPC of an ec2 instance to the physical server that it's on the physical host",
    "start": "1452960",
    "end": "1459360"
  },
  {
    "text": "I'm going to be very specific host here hypervisor all right so let's take a look Layer Two I've got an ec2 instance",
    "start": "1459360",
    "end": "1467600"
  },
  {
    "start": "1462000",
    "end": "1462000"
  },
  {
    "text": "in subnet a that needs to get to another ec2 instance also in subnet a that's Layer Two how do we do it well from the",
    "start": "1467600",
    "end": "1474960"
  },
  {
    "text": "basics of ethernet 10 Z2 goes to its switch it doesn't ARP it says hey who's",
    "start": "1474960",
    "end": "1481520"
  },
  {
    "text": "got 10 Z3 the switch responds with a flood and says oh the ARP request out there 103 is",
    "start": "1481520",
    "end": "1489080"
  },
  {
    "text": "on my switch I've got it 103 responds asks the request 02 knows where",
    "start": "1489080",
    "end": "1496679"
  },
  {
    "text": "it is and now it can talk directly to 103 that is a physical",
    "start": "1496679",
    "end": "1502640"
  },
  {
    "text": "Network in VPC the virtual Network the mapping service acts as that uh uh",
    "start": "1502640",
    "end": "1509640"
  },
  {
    "start": "1504000",
    "end": "1504000"
  },
  {
    "text": "element between uh the the the origination and the",
    "start": "1509640",
    "end": "1515240"
  },
  {
    "text": "destination what happens is 102 dumps out on the operating system and says hey",
    "start": "1515240",
    "end": "1520320"
  },
  {
    "text": "I need to get to 103 I'm going to ARP that request it dumps it though to the",
    "start": "1520320",
    "end": "1525840"
  },
  {
    "text": "physical host we don't want to change the oper operating system right same drivers same everything you import VMS",
    "start": "1525840",
    "end": "1532320"
  },
  {
    "text": "whatever you do you shouldn't be doing any network fun inside the OS you should delegate down to the hypervisor or lower",
    "start": "1532320",
    "end": "1540360"
  },
  {
    "text": "and that's what we do server the host the hypervisor with 1920 uh 1921",
    "start": "1540360",
    "end": "1546679"
  },
  {
    "text": "168.3 turns to the mapping service and says hey I've got an AR request out here for",
    "start": "1546679",
    "end": "1552200"
  },
  {
    "text": "103 for customer blue where is it that is the map and the map says hold on I",
    "start": "1552200",
    "end": "1559399"
  },
  {
    "text": "acknowledge he's actually on the host in the bottom right",
    "start": "1559399",
    "end": "1565080"
  },
  {
    "text": "16814 so the mapping service knows that customer blue 100002 on host",
    "start": "1565080",
    "end": "1571760"
  },
  {
    "text": "0.3 is trying to get to customer blue 0.3 on host 1.4 and he tells them",
    "start": "1571760",
    "end": "1578880"
  },
  {
    "text": "exactly how to get there on the physical Network so what we're watching is the VPC or the virtual Network dump its",
    "start": "1578880",
    "end": "1584240"
  },
  {
    "text": "request into the physical Network and the mapping service resolves the two",
    "start": "1584240",
    "end": "1589480"
  },
  {
    "text": "102 says thank you very much and now I can actually issue my layer 2 request",
    "start": "1589480",
    "end": "1595559"
  },
  {
    "text": "again I want to talk to this other virtual machine in the same subnet I'm going to send it a packet and we're going to actually encapsulate the packet",
    "start": "1595559",
    "end": "1603000"
  },
  {
    "text": "we're going to send the request and then we're going to encapsulate with information specific to the VPC along with source and destination",
    "start": "1603000",
    "end": "1609960"
  },
  {
    "text": "rules for the physical Network and host 0.3 sends this encapsulated packet over",
    "start": "1609960",
    "end": "1615799"
  },
  {
    "text": "to host 1.4 host 1.4 is going to un un encapsulate that de",
    "start": "1615799",
    "end": "1622880"
  },
  {
    "text": "encapsulate now he's not just going to accept the request though that' be too easy right there has to be some",
    "start": "1623159",
    "end": "1628960"
  },
  {
    "text": "verification we have to watch out for the potential of cross talk between two vpcs the host is going to turn back to",
    "start": "1628960",
    "end": "1634679"
  },
  {
    "text": "the mapping service and say hey I just got a request from physical host 0.3 for a virtual machine running on there for",
    "start": "1634679",
    "end": "1639960"
  },
  {
    "text": "customer blue are we good is the source good and the mapping service is going to say",
    "start": "1639960",
    "end": "1646440"
  },
  {
    "text": "yep and the request is going to go through the host will allow that traffic that is how we perform VPC",
    "start": "1646440",
    "end": "1654279"
  },
  {
    "start": "1651000",
    "end": "1651000"
  },
  {
    "text": "isolation now take a look at customer graay 10 Z4",
    "start": "1654279",
    "end": "1660559"
  },
  {
    "text": "he wants to get to 10 Z3 I don't see a 10 Z3 out here do you guys which 10 Z3 do you",
    "start": "1660559",
    "end": "1668960"
  },
  {
    "text": "see right it's gray so the mapping service says nope sorry",
    "start": "1668960",
    "end": "1675360"
  },
  {
    "text": "denied this prevents cross talk this is what allows for VPC isolation the",
    "start": "1675360",
    "end": "1680720"
  },
  {
    "text": "mapping service handles the source request tells it where the destination is communication goes through the",
    "start": "1680720",
    "end": "1687240"
  },
  {
    "text": "physical layer and then the destination says hold on before I accept that request let me turn back to the mapping",
    "start": "1687240",
    "end": "1693320"
  },
  {
    "text": "service and if it's good if source is verified then we'll allow the traffic",
    "start": "1693320",
    "end": "1699120"
  },
  {
    "text": "through again if we have 104 dump its traffic to 0.4 and he wants to go",
    "start": "1701720",
    "end": "1707559"
  },
  {
    "text": "destination blue if we play this out 10 z uh I'm sorry 0.4 isn't hosting",
    "start": "1707559",
    "end": "1714000"
  },
  {
    "text": "any blue instances and the mapping service again",
    "start": "1714000",
    "end": "1718159"
  },
  {
    "text": "denies if we assume somehow that a valid mapping was attempted we can we could try to use it so packets cannot and will",
    "start": "1719559",
    "end": "1727000"
  },
  {
    "text": "not flow unless all parties involved Source destination and mapping service agree on where those interfaces are and",
    "start": "1727000",
    "end": "1734200"
  },
  {
    "text": "as we play this out physical host 1.4 four is going to turn back to the mapping service and say",
    "start": "1734200",
    "end": "1740240"
  },
  {
    "text": "hold on I'm getting requests from Gray on that host over there am I good mapping service raises an alarm and says",
    "start": "1740240",
    "end": "1745720"
  },
  {
    "text": "sorry that's an invalid again VPC isolation through the source destination",
    "start": "1745720",
    "end": "1752159"
  },
  {
    "text": "act process on the mapping service and again if this occurs an alarm is raised internally on us now",
    "start": "1752159",
    "end": "1759840"
  },
  {
    "start": "1759000",
    "end": "1759000"
  },
  {
    "text": "that's assuming two virtual machines want to talk in the same subnet how do we get from a virtual machine in one",
    "start": "1759840",
    "end": "1764880"
  },
  {
    "text": "subnet to a virtual machine in another subnet this is layer three this is General IP routing in this scenario 0.2",
    "start": "1764880",
    "end": "1772840"
  },
  {
    "text": "virtual machine has to talk to the ethernet switch and Arps out and says hey I'm trying to get to",
    "start": "1772840",
    "end": "1778799"
  },
  {
    "text": "0.1.3 but first where's my Gateway 0.1 is the Gateway ether switch identifies",
    "start": "1778799",
    "end": "1785240"
  },
  {
    "text": "that says awesome let's get that to the gateway gateway takes it and says all",
    "start": "1785240",
    "end": "1791840"
  },
  {
    "text": "right destination request for 1.3 it comes back that is what we do",
    "start": "1791840",
    "end": "1798080"
  },
  {
    "start": "1796000",
    "end": "1796000"
  },
  {
    "text": "Source goes through a gateway to get to the destination let's model that in VPC now I've got a virtual machine in subnet",
    "start": "1798080",
    "end": "1804720"
  },
  {
    "text": "one is get to Virtual Machine and subnet 2 in Layer Two when we're all in the",
    "start": "1804720",
    "end": "1810200"
  },
  {
    "text": "same subnet we just go to the mapping service and back and then directly to the host it's pretty pretty directly coupled",
    "start": "1810200",
    "end": "1815919"
  },
  {
    "text": "right we want a virtual machine to jump from one subnet to another now he says hey I need to get to uh some instance",
    "start": "1815919",
    "end": "1824240"
  },
  {
    "text": "but first I need to identify where my Gateway is I got to tell the Gateway where I'm going",
    "start": "1824240",
    "end": "1829720"
  },
  {
    "text": "he says all right your gateway is here the mapping service delivers back",
    "start": "1829720",
    "end": "1835159"
  },
  {
    "text": "not the address of the destination but the address of the Gateway comes back to the",
    "start": "1835159",
    "end": "1842279"
  },
  {
    "text": "instance the instance then dumps the request to the physical host who goes to the",
    "start": "1842279",
    "end": "1847960"
  },
  {
    "text": "map and the map comes back and says okay I know where you're",
    "start": "1847960",
    "end": "1853399"
  },
  {
    "text": "at I'm going to create the packet I'm going to encapsulate the VPC information",
    "start": "1853399",
    "end": "1859159"
  },
  {
    "text": "we're going to then encapsulate further the physical host information and we're going to send that directly so there's a",
    "start": "1859159",
    "end": "1864840"
  },
  {
    "text": "layer of indirection here for layer three we have to go to the map first we have to find the gateway then we have to",
    "start": "1864840",
    "end": "1870600"
  },
  {
    "text": "go to the destination similar Concepts everywhere else packet encapsulation for VPC that encapsulation includes the VPC",
    "start": "1870600",
    "end": "1876960"
  },
  {
    "text": "information so we can actually say is this a valid source or not it also includes the physical host information",
    "start": "1876960",
    "end": "1882240"
  },
  {
    "text": "so we know how to operate on the physical Network in the data center again though you you got to come",
    "start": "1882240",
    "end": "1888320"
  },
  {
    "text": "from the right Source you have to be valid so the host turns to the mapping service and says once again is this a",
    "start": "1888320",
    "end": "1894919"
  },
  {
    "text": "valid request it's customer blue I'm allowed we're good and there we",
    "start": "1894919",
    "end": "1900880"
  },
  {
    "start": "1899000",
    "end": "1899000"
  },
  {
    "text": "go that is how VPC fundamentally works in the layer between virtual networking",
    "start": "1900880",
    "end": "1906880"
  },
  {
    "text": "to physical networking for virtual machines talking in the same subnets and virtual machines wanting to talk in",
    "start": "1906880",
    "end": "1913440"
  },
  {
    "text": "different subnets in the same VPC Layer Two is in the same subnet Layer Three is in two different subnets now all of this",
    "start": "1913440",
    "end": "1921559"
  },
  {
    "text": "has to happen in real time right I'm very slow presenting this but you can't",
    "start": "1921559",
    "end": "1926840"
  },
  {
    "text": "have it operate that slow this needs to be instantaneous zero latency we're talking about a single packet that's got",
    "start": "1926840",
    "end": "1932799"
  },
  {
    "text": "to get through multiplied by a factor of a billion or more how do we make this fast zero latency is the goal the answer",
    "start": "1932799",
    "end": "1941279"
  },
  {
    "text": "is cashing we can't continually hit the map service in real time right it's not",
    "start": "1941279",
    "end": "1946720"
  },
  {
    "text": "a real-time service it's a distributed service might be millisecond response times but we need near zero the answer",
    "start": "1946720",
    "end": "1953600"
  },
  {
    "text": "is that we build cash pools on the physical hosts from the mapping service imagine the idea of us decentralizing",
    "start": "1953600",
    "end": "1961159"
  },
  {
    "text": "the map service with the rules that are specific to that host we're only going",
    "start": "1961159",
    "end": "1967480"
  },
  {
    "text": "to give you the information on the host that makes sense and why is that oops sorry why is that because when I'm on a",
    "start": "1967480",
    "end": "1974519"
  },
  {
    "text": "host and I need to get to the destination the cash should only know about the areas I can get to it",
    "start": "1974519",
    "end": "1980399"
  },
  {
    "text": "guarantees a 100% hit rate in the cash I'm not throwing 70% success I look",
    "start": "1980399",
    "end": "1987720"
  },
  {
    "text": "there's no gray on the host at 0.3 right we all can see that I don't have any",
    "start": "1987720",
    "end": "1993440"
  },
  {
    "text": "gray virtual machines the cash has no knowledge of gray virtual machines it",
    "start": "1993440",
    "end": "1998480"
  },
  {
    "text": "only has knowledge of blue and green because that's every single request that",
    "start": "1998480",
    "end": "2004320"
  },
  {
    "text": "goes through that cash needs to be 100% hit rate and that is how we get zero latency on",
    "start": "2004320",
    "end": "2010480"
  },
  {
    "text": "VPC all right and what this allows us to do if we kind of back up is we started",
    "start": "2010480",
    "end": "2016120"
  },
  {
    "text": "this with a very flat Network in ec2 right and then we said we need to break this up we need to privatize the network",
    "start": "2016120",
    "end": "2022559"
  },
  {
    "text": "we need to give you the capability of private Network endpoints full control over your networking between your on-prem and AWS and it allows for this",
    "start": "2022559",
    "end": "2031200"
  },
  {
    "text": "virtual machines can come up with fixed or DHCP based addresses multiple subnets",
    "start": "2031200",
    "end": "2036559"
  },
  {
    "text": "you get to map those subnets to the availability zones virtual machine running at 10. uh",
    "start": "2036559",
    "end": "2043360"
  },
  {
    "text": "007 getting to 109 in the same subnet does a layer two request in the virtual",
    "start": "2043360",
    "end": "2049158"
  },
  {
    "text": "networking layer known as VPC and through the mapping service to you it's transparent it was real time",
    "start": "2049159",
    "end": "2056200"
  },
  {
    "text": "but what you really did is went through the cache which was coming back from the mapping service with a source destination verification on it if you",
    "start": "2056200",
    "end": "2063839"
  },
  {
    "text": "want to get to another subnet this is how it all plays out you're doing a player three request to the destination",
    "start": "2063839",
    "end": "2070760"
  },
  {
    "text": "through the Gateway with the same Source ver destination",
    "start": "2070760",
    "end": "2075919"
  },
  {
    "text": "verification there is this idea of I need to egress traffic out some Edge that edge is a way for me to",
    "start": "2075919",
    "end": "2084839"
  },
  {
    "text": "get somewhere be it a what we call a virtual private Gateway or vgw whose destination is some other",
    "start": "2084839",
    "end": "2091240"
  },
  {
    "text": "network some physical or maybe an igw",
    "start": "2091240",
    "end": "2097280"
  },
  {
    "text": "so if we expand this further and get outside of what we're doing in the VPC",
    "start": "2098160",
    "end": "2103800"
  },
  {
    "text": "and getting into another Network we find that we actually go through edges and we encapsulate the packets the same way we",
    "start": "2103800",
    "end": "2111119"
  },
  {
    "text": "say here's the actual virtual networking information encapsulated with the VPC information encapsulated with the",
    "start": "2111119",
    "end": "2117079"
  },
  {
    "text": "physical Network information and have some type of edge allow me to ESS",
    "start": "2117079",
    "end": "2122480"
  },
  {
    "text": "traffic so when you're tunneling packets through that VPN tunnel",
    "start": "2122480",
    "end": "2127880"
  },
  {
    "text": "ation to your vgw with this customer Gateway the cgw on the other side what you're really doing is going through an",
    "start": "2127880",
    "end": "2133640"
  },
  {
    "text": "edge and the same holds true for igw the internet gateway as well as Direct Connect or DX for short and the way the",
    "start": "2133640",
    "end": "2141160"
  },
  {
    "text": "edge Works in VPC is it's the same setup the physical hypervisor hosts have map",
    "start": "2141160",
    "end": "2146960"
  },
  {
    "text": "caches the mapping services in place the virtual network uh says Hey",
    "start": "2146960",
    "end": "2153000"
  },
  {
    "text": "listen I'm on physical host 0.4 I need to get to I've got a virtual machine on me that needs to get to uh",
    "start": "2153000",
    "end": "2159359"
  },
  {
    "text": "also 0.4 and I'm going to go to a destination uh of",
    "start": "2159359",
    "end": "2165359"
  },
  {
    "text": "17266 that's like my on Prem so I've got a virtual machine that wants to Route traffic to the on- Prem The Edge that",
    "start": "2165359",
    "end": "2173680"
  },
  {
    "text": "vgw internally looks just like another physical host to us in this case it's uh",
    "start": "2173680",
    "end": "2180760"
  },
  {
    "text": "4.3 so we send the traffic down to the physical host we encap at it with the virtual",
    "start": "2181599",
    "end": "2188680"
  },
  {
    "text": "networking information the VPC information and the physical Network information we send it to the",
    "start": "2188680",
    "end": "2193800"
  },
  {
    "text": "edge and the traffic esses now as I mentioned earlier there are three types of edges there's a VPN based Edge or",
    "start": "2193800",
    "end": "2201040"
  },
  {
    "start": "2194000",
    "end": "2194000"
  },
  {
    "text": "what we call a virtual private Gateway or vgw for short packet encapsulated information goes to this 4.3",
    "start": "2201040",
    "end": "2209760"
  },
  {
    "text": "Edge you know what the edge does its job is to translate Amazon proprietary",
    "start": "2209760",
    "end": "2215400"
  },
  {
    "text": "information about VPC to stuff that the real world understands in this case with this Edge it's translating to IP SEC",
    "start": "2215400",
    "end": "2223760"
  },
  {
    "text": "specific information for the VPN tunnel so we do packet encapsulation and strip out the VPC information we do not ESS",
    "start": "2223760",
    "end": "2231960"
  },
  {
    "text": "Amazon's network with proprietary VPC information we put it back on the physical networks in the world",
    "start": "2231960",
    "end": "2237560"
  },
  {
    "text": "encapsulated with the information specific to them case in point if we look at direct connect this is a circuit",
    "start": "2237560",
    "end": "2245200"
  },
  {
    "start": "2241000",
    "end": "2241000"
  },
  {
    "text": "This Is Us going to a direct connect facility then destination one or more on Prem we also send requests down to the",
    "start": "2245200",
    "end": "2252800"
  },
  {
    "text": "vgw for a direct connect right you've got your VPC you want to send traffic to the on-prem you route it to the vgw the",
    "start": "2252800",
    "end": "2259880"
  },
  {
    "text": "vgw is really an edge and the edge is job is to not only",
    "start": "2259880",
    "end": "2265160"
  },
  {
    "text": "look like something local and familiar to you in VPC that we saw in Layer Two and layer three but then to also put",
    "start": "2265160",
    "end": "2271280"
  },
  {
    "text": "802.1q VLAN tag information on it for the real world so the edge is actually",
    "start": "2271280",
    "end": "2276319"
  },
  {
    "text": "an adapter or a map if if you will and then finally the third Edge is the internet gateway or the igw this is the",
    "start": "2276319",
    "end": "2283599"
  },
  {
    "start": "2279000",
    "end": "2279000"
  },
  {
    "text": "Border as it lives on Amazon right same thing it's just an edge its job is to",
    "start": "2283599",
    "end": "2289400"
  },
  {
    "text": "translate between a very proprietary virtual Network on our side and a physical world out there",
    "start": "2289400",
    "end": "2296319"
  },
  {
    "text": "except one difference here we're not doing IPC encapsulation we're not doing VLAN tag encapsulation what we actually",
    "start": "2296319",
    "end": "2303480"
  },
  {
    "text": "have to do is make it look like you're coming from a public IP so if you've ever wondered how those elastic IPS work",
    "start": "2303480",
    "end": "2310599"
  },
  {
    "text": "we take your Source information and egress at that point in",
    "start": "2310599",
    "end": "2315839"
  },
  {
    "text": "time with the EIP or potentially the managed net or the natat you know",
    "start": "2315839",
    "end": "2321440"
  },
  {
    "text": "ephemeral IP but public or static IP and public and that is what the edge does at",
    "start": "2321440",
    "end": "2328040"
  },
  {
    "text": "the igw its job is to translate not only the specific information uh VPC so the",
    "start": "2328040",
    "end": "2333839"
  },
  {
    "text": "real world but it also needs to then map into that public IP address so we can talk on the",
    "start": "2333839",
    "end": "2339400"
  },
  {
    "text": "internet so to recap VPC not only handles inner subnet traffic and subnet",
    "start": "2339400",
    "end": "2345560"
  },
  {
    "start": "2340000",
    "end": "2340000"
  },
  {
    "text": "a subnet but it also has to talk on different destinations I'm going to egress over VPN I'm going to egress over",
    "start": "2345560",
    "end": "2352119"
  },
  {
    "text": "Direct Connect I'm going to egress out the border on AWS via igw we have edges in our mapping service",
    "start": "2352119",
    "end": "2358880"
  },
  {
    "text": "to handle all of this and they look just like any other destination so brief diversion",
    "start": "2358880",
    "end": "2367480"
  },
  {
    "start": "2364000",
    "end": "2364000"
  },
  {
    "text": "the hardware we built uh for our routers so uh yeah okay",
    "start": "2367480",
    "end": "2372680"
  },
  {
    "text": "the the penguin um we talked earlier about physical routers going to scale with us and how that wasn't going to",
    "start": "2372680",
    "end": "2378800"
  },
  {
    "text": "work and how we needed to build commodity Hardware that scaled right that just looked and felt like a traditional uh uh server and in our",
    "start": "2378800",
    "end": "2387880"
  },
  {
    "text": "world we built this the device is known as a Blackfoot and uh it's based on",
    "start": "2387880",
    "end": "2393480"
  },
  {
    "text": "Linux hence the penguin now it turns out that the Blackfoot",
    "start": "2393480",
    "end": "2399280"
  },
  {
    "text": "penguin uh why they named the device Blackfoot is because uh Linux",
    "start": "2399280",
    "end": "2407240"
  },
  {
    "text": "penguin the team that did this is based in Cape Town in South Africa and there's a spot",
    "start": "2407240",
    "end": "2414200"
  },
  {
    "text": "in Cape Town where penguins exist and the penguin in Cape Town South Africa is indigenous to that",
    "start": "2414200",
    "end": "2421800"
  },
  {
    "text": "region and it's called the Blackfoot so a little fun fact about Amazon is that yes these devices we",
    "start": "2421800",
    "end": "2429079"
  },
  {
    "text": "build are called black feet black foots technically uh based on the team in Cape",
    "start": "2429079",
    "end": "2434480"
  },
  {
    "text": "Town who built that in the early days and we've actually named one of our headquarter buildings this is the actual",
    "start": "2434480",
    "end": "2439520"
  },
  {
    "text": "photograph of it in Seattle uh in the just outside the South Lake Union campus known as blackoot and turns out a lot of",
    "start": "2439520",
    "end": "2445800"
  },
  {
    "text": "product development happens here so just wanted to bypass some of the dry Network and get back into little",
    "start": "2445800",
    "end": "2453040"
  },
  {
    "start": "2449000",
    "end": "2449000"
  },
  {
    "text": "color on Amazon so how much does VPC cost zero how much you guys paying for",
    "start": "2453040",
    "end": "2459839"
  },
  {
    "text": "subnets anybody how much are we upcharging you per for your network on an instance this",
    "start": "2459839",
    "end": "2466119"
  },
  {
    "text": "is the design goal right we can't get to zero if we buy really expensive large",
    "start": "2466119",
    "end": "2473319"
  },
  {
    "text": "commercial hardware and by the way it's not that we are adverse to it it's that you have to scale in ways that they've",
    "start": "2473319",
    "end": "2478800"
  },
  {
    "text": "never had to do because we have a lot of customers right as opposed to a singular customer in a single Data Center and so",
    "start": "2478800",
    "end": "2485680"
  },
  {
    "text": "if we buy those at Large Scale we're going to pay money and we have to actually pass that back on and we don't want to do that we want to drive price",
    "start": "2485680",
    "end": "2491319"
  },
  {
    "text": "down and make it cost affordable for customers so I would bet I get no one who",
    "start": "2491319",
    "end": "2497720"
  },
  {
    "text": "understands what this date is anybody have a venture at what this date is turns out this is Black Friday for",
    "start": "2497720",
    "end": "2503520"
  },
  {
    "text": "the year 2010 so why is it when was Black Friday",
    "start": "2503520",
    "end": "2509440"
  },
  {
    "text": "last Friday the 25th so any amazon.com Black Friday what",
    "start": "2509440",
    "end": "2515640"
  },
  {
    "text": "do you think happens for us pretty busy right what do we decide to do on November 10th",
    "start": "2515640",
    "end": "2523040"
  },
  {
    "text": "2010 we actually shut down the last physical host that ran the retail",
    "start": "2523040",
    "end": "2529240"
  },
  {
    "text": "Commerce site amazon.com that's the day we fully went in 100% on retail to",
    "start": "2529240",
    "end": "2536200"
  },
  {
    "text": "ec2 so why is it really important because I'm up here talking about VPC and virtual networking translation to",
    "start": "2536200",
    "end": "2542440"
  },
  {
    "text": "physical networks egressing on edges all this stuff right scale but we're talking",
    "start": "2542440",
    "end": "2547480"
  },
  {
    "text": "about real Commerce traffic on Blackfoot uh on Black Friday just five six years",
    "start": "2547480",
    "end": "2553119"
  },
  {
    "text": "ago VPC works if we could survive that and we've survived black Fridays and if",
    "start": "2553119",
    "end": "2559160"
  },
  {
    "text": "this is the last day we've done then we've done it right we've built VPC the way it needs to be at the core so just a",
    "start": "2559160",
    "end": "2566400"
  },
  {
    "text": "side note to come back to the amazon.com story about um uh customer trust in",
    "start": "2566400",
    "end": "2572400"
  },
  {
    "text": "VPC um broader picture we talked about uh lower level things on routing subnets",
    "start": "2572400",
    "end": "2578960"
  },
  {
    "start": "2573000",
    "end": "2573000"
  },
  {
    "text": "uh Etc um VPC itself is a platform and we can't forget that right as a platform we allow you to",
    "start": "2578960",
    "end": "2587520"
  },
  {
    "text": "build subnets and those subnets go into private networks known as vpcs we allow you to egress traffic in and out of",
    "start": "2587520",
    "end": "2593000"
  },
  {
    "text": "those networks with the edges we now as a platform allow you to bring in other private endpoint services so bringing it",
    "start": "2593000",
    "end": "2599359"
  },
  {
    "text": "back to the start of this session when we said those relational database services and that red shift cluster",
    "start": "2599359",
    "end": "2605040"
  },
  {
    "text": "coming in private the VPC that we talked about ends up creating its own platform",
    "start": "2605040",
    "end": "2610119"
  },
  {
    "text": "and that platform enables other services and as a platform yes we give you VPN",
    "start": "2610119",
    "end": "2616040"
  },
  {
    "text": "and Direct Connect we talked about that but now we build other things on top of it hey I want security groups stateful",
    "start": "2616040",
    "end": "2623240"
  },
  {
    "text": "firewalls that do sl32 filtering for both inbound and and outbound",
    "start": "2623240",
    "end": "2628319"
  },
  {
    "text": "traffic it gave us the ability to control perimeter traffic with network ACLS at the subnets truthfully most of",
    "start": "2628319",
    "end": "2635000"
  },
  {
    "text": "our customers do security groups because they have longer history than Network ACLS but you have the option to do",
    "start": "2635000",
    "end": "2640200"
  },
  {
    "text": "either one or both right as a platform VPC gives you the ability to get to",
    "start": "2640200",
    "end": "2645359"
  },
  {
    "text": "routing tables it gives you the it gives us the",
    "start": "2645359",
    "end": "2650440"
  },
  {
    "text": "ability to place uh not only one but more network interfaces on those ec2",
    "start": "2650440",
    "end": "2656480"
  },
  {
    "text": "instances known as elastic network interfaces right so as a platform as",
    "start": "2656480",
    "end": "2662280"
  },
  {
    "text": "we've developed over time we've been able to get more featur rich in what we've been able to offer back back to",
    "start": "2662280",
    "end": "2667359"
  },
  {
    "text": "the other services side note uh elastic network interfaces you get more you can multi",
    "start": "2667359",
    "end": "2673640"
  },
  {
    "text": "you can actually add more based on the instance type if you didn't know that and yes you can multi-home them all",
    "start": "2673640",
    "end": "2681000"
  },
  {
    "start": "2681000",
    "end": "2681000"
  },
  {
    "text": "right one of the latest uh advances in VPC in the past year had been on S3 endpoints so there's this big movement",
    "start": "2681440",
    "end": "2688720"
  },
  {
    "text": "from our customers who say hey VPC awesome you guys built it six seven years ago thank you very much we have",
    "start": "2688720",
    "end": "2695440"
  },
  {
    "text": "private endpoint connectivity but some of your services have a longer history here than ec2 S3 is the one right and S3 lives in",
    "start": "2695440",
    "end": "2702760"
  },
  {
    "text": "the public endpoint space so here's the challenge our customers bring to us all right I've got this instance that's",
    "start": "2702760",
    "end": "2709599"
  },
  {
    "text": "private in ec2 in a VPC that needs to talk to",
    "start": "2709599",
    "end": "2714319"
  },
  {
    "text": "S3 I have to get to the internet because S3 is a public endpoint service had been",
    "start": "2714680",
    "end": "2720920"
  },
  {
    "text": "right exclusively and that the the the the the engineering on it means if I'm in a",
    "start": "2720920",
    "end": "2727079"
  },
  {
    "text": "private subnet I have to throw all my traffic through at the time Gat instances everybody remember",
    "start": "2727079",
    "end": "2734200"
  },
  {
    "text": "Gat instances how many people were happy to see managet come along yeah it's the whole room right I don't even need to",
    "start": "2734200",
    "end": "2740000"
  },
  {
    "text": "ask that question um yeah so the challenge is you're literally burning all of this data through Gat instances",
    "start": "2740000",
    "end": "2745760"
  },
  {
    "text": "just to get to S3 it's kind of a waste yeah manage helps you out there right the other",
    "start": "2745760",
    "end": "2751800"
  },
  {
    "text": "option was You' put those instances in a public subnet so you're already on the public endpoint space and you don't have to go through n layer ah it's the wrong",
    "start": "2751800",
    "end": "2759800"
  },
  {
    "text": "way to do it so what we did was we said all right customers need to make S3 look local they need to make it look private",
    "start": "2759800",
    "end": "2766559"
  },
  {
    "text": "there's a big Movement by the way in the customer base we see with more services that are in the public endpoint space customers are asking us to bring them to",
    "start": "2766559",
    "end": "2772800"
  },
  {
    "text": "private endpoint space you know so we look at all those requests and you know we build road map space on customers so",
    "start": "2772800",
    "end": "2779640"
  },
  {
    "text": "S3 endpoints came this is private connectivity into S3 from your VPC your",
    "start": "2779640",
    "end": "2785440"
  },
  {
    "text": "S3 buckets look local in our world they're just another Edge",
    "start": "2785440",
    "end": "2791040"
  },
  {
    "text": "your virtual machine goes out to S3 through an edge if I can actually get",
    "start": "2791040",
    "end": "2798319"
  },
  {
    "text": "there yep so we talked about three edges earlier we built a fourth for",
    "start": "2798319",
    "end": "2805240"
  },
  {
    "text": "S3 and if we build more private endpoint connectivity for public endpoint services like S3 you should expect them",
    "start": "2805240",
    "end": "2812359"
  },
  {
    "text": "to come as edges as well and they work the same right except this time we make",
    "start": "2812359",
    "end": "2817960"
  },
  {
    "text": "the edge own the bucket information so I've got a virtual machine on the",
    "start": "2817960",
    "end": "2823040"
  },
  {
    "text": "virtual Network that has a physical server underneath it it needs to get to S3 as",
    "start": "2823040",
    "end": "2829480"
  },
  {
    "text": "17216 uh that is an edge and we send the request through the map service again it goes to the",
    "start": "2829480",
    "end": "2835680"
  },
  {
    "text": "physical layer we encapsulate the",
    "start": "2835680",
    "end": "2839760"
  },
  {
    "start": "2839000",
    "end": "2839000"
  },
  {
    "text": "packets and we send it to the edge so our private endpoint connectivity for S3",
    "start": "2840880",
    "end": "2846920"
  },
  {
    "text": "goes through an edge just like Direct Connect VPN and internet gateway do this time we have to encapsulate",
    "start": "2846920",
    "end": "2853640"
  },
  {
    "text": "different we have to encapsulate with VPC end we made S3 look like its own VPC endpoint to do it and we put that",
    "start": "2853640",
    "end": "2860040"
  },
  {
    "text": "information in the green here so we encapsulate that and then we encapsulate physical Network information but this",
    "start": "2860040",
    "end": "2865760"
  },
  {
    "text": "time we're talking public endpoint spaces because S3 is a public endpoint service so the edge does all the traffic",
    "start": "2865760",
    "end": "2872960"
  },
  {
    "text": "for you locally makes it look local and then does the translation as an edge Ed to go to the public endpoint space we",
    "start": "2872960",
    "end": "2879119"
  },
  {
    "text": "didn't change S3 like we didn't really privatize it we just built edges to be able to accept Source traffic from your",
    "start": "2879119",
    "end": "2885720"
  },
  {
    "start": "2881000",
    "end": "2881000"
  },
  {
    "text": "VPC and make it look local so that you didn't have to put gats manage gats or put your virtual machines in public",
    "start": "2885720",
    "end": "2891800"
  },
  {
    "text": "subnets to get there right and then of course when we did that now that we have",
    "start": "2891800",
    "end": "2897880"
  },
  {
    "text": "an edge we actually introduced A New Concept giving you the ability to secure access to those buckets via",
    "start": "2897880",
    "end": "2904880"
  },
  {
    "text": "policies so now with an edge we've Advanced from where we were with Direct Connect VPN and igw and add an",
    "start": "2904880",
    "end": "2911800"
  },
  {
    "text": "additional layer of security right it's an additional layer and by definition of policy I can",
    "start": "2911800",
    "end": "2916960"
  },
  {
    "text": "say I'm going to allow access from here to the S3 bucket or deny in this case uh we actually Define",
    "start": "2916960",
    "end": "2924280"
  },
  {
    "text": "the resource of the bucket and everything in it and then we have a policy here that",
    "start": "2924280",
    "end": "2929480"
  },
  {
    "text": "actually says I'm going to go ahead and deny if you're not this Source VPC so",
    "start": "2929480",
    "end": "2935640"
  },
  {
    "text": "the really cool thing here is that the edges got smarter when we did private endpoint connectivity for S3 and you can",
    "start": "2935640",
    "end": "2941680"
  },
  {
    "text": "secure access that's super important because you may have multiple vpcs in your",
    "start": "2941680",
    "end": "2947440"
  },
  {
    "text": "account and you only want one to access an S3 bucket right prod VPC Dev VPC qav",
    "start": "2947440",
    "end": "2954440"
  },
  {
    "text": "VPC you only want prod traffic go to a prod bucket that's what we're talking about here by the way that's the customer use case okay so in the end our",
    "start": "2954440",
    "end": "2961720"
  },
  {
    "text": "challenge in building VPC was e you know the simple complex",
    "start": "2961720",
    "end": "2969960"
  },
  {
    "text": "balance if we go super simple for our customer base then the most advanced networking Engineers won't be happy",
    "start": "2969960",
    "end": "2976000"
  },
  {
    "text": "their feature sets limited but if we go complex while we satisfy the most",
    "start": "2976000",
    "end": "2982040"
  },
  {
    "text": "hardcore Die Hard of the network engineers and be flexible for them those out there who need to who don't really",
    "start": "2982040",
    "end": "2987839"
  },
  {
    "text": "have the CCI or don't have the networking expertise are left in the are left behind so what we did is built a",
    "start": "2987839",
    "end": "2994240"
  },
  {
    "text": "flexible model you can go as simple as you want or as complex as you",
    "start": "2994240",
    "end": "2999480"
  },
  {
    "text": "want and we allow you to go into full Advanced features on VPC or keep it simple with like a default",
    "start": "2999480",
    "end": "3006920"
  },
  {
    "text": "VPC the default VPC was introduced a few years ago and its job was to make networking simple I",
    "start": "3006920",
    "end": "3013960"
  },
  {
    "start": "3008000",
    "end": "3008000"
  },
  {
    "text": "don't need to think about this and by the way there's some type of movement out there we're",
    "start": "3013960",
    "end": "3019000"
  },
  {
    "text": "sensing I I don't know how long the days are where people really need to think about traditional networks they're here",
    "start": "3019000",
    "end": "3024559"
  },
  {
    "text": "for for some time right but question we ask is do you really need to think about your network if you can just get",
    "start": "3024559",
    "end": "3030680"
  },
  {
    "text": "somewhere do you care where you came from right so in a default VPC we spin you up with",
    "start": "3030680",
    "end": "3036400"
  },
  {
    "text": "17231 2016 and you don't think about it you provision the instances into the subnets it's already there it's uh if I",
    "start": "3036400",
    "end": "3042680"
  },
  {
    "text": "recall it's a two Subnet in the public two Subnet in the private and allows you to provision and it makes it feel like",
    "start": "3042680",
    "end": "3048760"
  },
  {
    "text": "ec2 classic there was some value to ec2 classic by the way and the fact that I could just provision virtual machines I",
    "start": "3048760",
    "end": "3054520"
  },
  {
    "text": "get an IP address and I don't have to think about networking so default VPC is an attempt to get back there but keep you in a private endpoint",
    "start": "3054520",
    "end": "3061119"
  },
  {
    "text": "space and that private endpoint space is of course represented here with subnets and the over overarching VPC and it",
    "start": "3061119",
    "end": "3068280"
  },
  {
    "text": "brings in the private connectivity so where ec2 classic fell short Default",
    "start": "3068280",
    "end": "3073520"
  },
  {
    "text": "vpc's job is to say we brought you here we got you into private endpoint space we give you the features you want but we",
    "start": "3073520",
    "end": "3079680"
  },
  {
    "text": "made it simple for you not to have to worry about so much now I will tell you most Enterprises are not using default vpcs",
    "start": "3079680",
    "end": "3087040"
  },
  {
    "text": "we understand that we have to deal with the both ends of the spectrum here okay",
    "start": "3087040",
    "end": "3094000"
  },
  {
    "text": "simple and but limited for some complex for others but flexible right and that",
    "start": "3094000",
    "end": "3100200"
  },
  {
    "text": "is what we're trying to deal with here in VPC so I realize that people have lines to get to I'm going to go ahead",
    "start": "3100200",
    "end": "3106960"
  },
  {
    "text": "and recommend some sessions for you uh if you've taken a chance to uh oop",
    "start": "3106960",
    "end": "3112200"
  },
  {
    "start": "3107000",
    "end": "3107000"
  },
  {
    "text": "there's a spelling typo there uh count uh I recommend the Deep dive on Direct Connect and VPN Netflix's session is",
    "start": "3112200",
    "end": "3119599"
  },
  {
    "text": "also great if you miss them be sure to check them on the AWS YouTube Channel please remember to complete your",
    "start": "3119599",
    "end": "3126400"
  },
  {
    "text": "evaluations sorry for those who are actually taking photos I'm not going to I got",
    "start": "3126400",
    "end": "3132559"
  },
  {
    "text": "it so please be sure to fill out your evaluation we love customer feedback I'm",
    "start": "3132559",
    "end": "3138400"
  },
  {
    "text": "going to let everybody take this guys enjoy thank you so much",
    "start": "3138400",
    "end": "3144000"
  }
]