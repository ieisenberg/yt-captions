[
  {
    "start": "0",
    "end": "28000"
  },
  {
    "text": "so good afternoon and welcome to this session first of all let's check we're all in the right room I think I'm in the",
    "start": "1439",
    "end": "7480"
  },
  {
    "text": "right room but this is a deep dive session this is net 402 we're going to be talking about Direct Connect and",
    "start": "7480",
    "end": "15279"
  },
  {
    "text": "vpns my name is Steve Seymour I'm a specialist Solutions architect for networking I work in Europe Middle East",
    "start": "15279",
    "end": "21560"
  },
  {
    "text": "and Africa with all of our customers that want to have deep dive discussions on",
    "start": "21560",
    "end": "26640"
  },
  {
    "text": "networking as I say this is a 400 level session which means means it's an expert level session we expect you to be deeply",
    "start": "26640",
    "end": "34040"
  },
  {
    "start": "28000",
    "end": "28000"
  },
  {
    "text": "familiar with this topic already and actually quite comfortable with how it already works this is not an introduction level",
    "start": "34040",
    "end": "40640"
  },
  {
    "text": "session so perhaps some existing knowledge you might have perhaps earlier in the week you might have gone to Becky's session net 2011 where she",
    "start": "40640",
    "end": "47480"
  },
  {
    "start": "42000",
    "end": "42000"
  },
  {
    "text": "talked about some of the connectivity options that we have and she mentioned Direct Connect and VPN in that",
    "start": "47480",
    "end": "53359"
  },
  {
    "text": "session you might also have seen yesterday's session with Ben and Sid they talked about how to extend data",
    "start": "53359",
    "end": "59000"
  },
  {
    "text": "centers into the cloud and again they were explaining how you use VPN and direct connect to achieve",
    "start": "59000",
    "end": "65880"
  },
  {
    "text": "that you also might have seen the session that I did last year it was the same titled session but it was net 406",
    "start": "65880",
    "end": "71560"
  },
  {
    "text": "last year and in that session I actually go through step by step how to configure everything to do with these two services",
    "start": "71560",
    "end": "77600"
  },
  {
    "text": "so I'm not going to be repeating that this year but all of that content can be found on YouTube so you can look at it",
    "start": "77600",
    "end": "82759"
  },
  {
    "text": "after this event if you need to go back and refresh some of that knowledge now one of the core things",
    "start": "82759",
    "end": "89360"
  },
  {
    "start": "88000",
    "end": "88000"
  },
  {
    "text": "that I do expect from this session and hopefully all of you know this is the difference between a VPN and Direct",
    "start": "89360",
    "end": "95799"
  },
  {
    "text": "Connect that's really important knowledge but I also expect you to know the difference between a router and a",
    "start": "95799",
    "end": "104078"
  },
  {
    "text": "router anyway let's get started with the rest of the session so what are we actually going to be covering well obviously we're talking about VPN and",
    "start": "104280",
    "end": "110560"
  },
  {
    "start": "108000",
    "end": "108000"
  },
  {
    "text": "Direct Connect throughout the whole session but I wanted to look at some of the options and the configuration details around those we're going to talk",
    "start": "110560",
    "end": "116600"
  },
  {
    "text": "about resilience how you can achieve a resilience setup with both of these Serv and talk about some of the frequently",
    "start": "116600",
    "end": "121880"
  },
  {
    "text": "asked questions that we get as a Solutions architecture team about the two services and touch on billing a",
    "start": "121880",
    "end": "126960"
  },
  {
    "text": "little bit as well just to explain how some of that works we're then going to go a bit deeper on bgp and how does",
    "start": "126960",
    "end": "132560"
  },
  {
    "text": "rooting actually work talking about autonomous system numbers how routing Works within the virtual private",
    "start": "132560",
    "end": "139200"
  },
  {
    "text": "Gateway beyond that I'm then going to dive into some details around cloudhub and Transit VPC Solutions how you can",
    "start": "139200",
    "end": "146280"
  },
  {
    "text": "connect Direct Connect and VPN to other AWS services and then finally a full",
    "start": "146280",
    "end": "151640"
  },
  {
    "text": "example of how you can configure an IPC VPN over the top of direct connect so",
    "start": "151640",
    "end": "156680"
  },
  {
    "text": "that's the level of depth we're talking about in this session okay so let's start with the",
    "start": "156680",
    "end": "161720"
  },
  {
    "text": "hardware VPN solution that we have now the hardware VPN solution is a fully managed VPN solution provided by AWS it",
    "start": "161720",
    "end": "169800"
  },
  {
    "text": "has an endpoint on the AWS side which is the virtual private Gateway and it has an endpoint on the customer side of the",
    "start": "169800",
    "end": "175159"
  },
  {
    "text": "connection that we refer to as the customer Gateway when you create a VPN connection using this solution we",
    "start": "175159",
    "end": "181159"
  },
  {
    "text": "actually provisioned two tunnels and those two tunnels give you your resilience into the AWS environment each",
    "start": "181159",
    "end": "186480"
  },
  {
    "text": "of those tunnel end points terminates in a different availability Zone it's a standard IPC tunnel so there's nothing",
    "start": "186480",
    "end": "193120"
  },
  {
    "text": "unusual about this it supports standard encryption options supports as 256 sh 2 and also we do now support Nat traversal",
    "start": "193120",
    "end": "200159"
  },
  {
    "text": "as well so if the customer Gateway on your side of this connection is actually already behind another rout that is",
    "start": "200159",
    "end": "205400"
  },
  {
    "text": "doing some address translation that's fine that'll work as well the V VPN connection is paid for on an hourly",
    "start": "205400",
    "end": "212120"
  },
  {
    "text": "basis for each VPN connection that you have and that covers the two tunnels associated with that particular VPN",
    "start": "212120",
    "end": "218640"
  },
  {
    "text": "connection and then finally there are two options for configuring this VPN it can either be a static VPN or it can be",
    "start": "218640",
    "end": "225239"
  },
  {
    "text": "dynamic or bgp based in terms of the roting so let's just quickly refresh ourselves on what those two terms mean",
    "start": "225239",
    "end": "231280"
  },
  {
    "start": "229000",
    "end": "229000"
  },
  {
    "text": "both static and dynamic so here's an example of a static VPN in this situation you actually have to configure",
    "start": "231280",
    "end": "237239"
  },
  {
    "text": "specifically the IP addresses that are going to be on each end of the VPN tunnels might be also known as a policy",
    "start": "237239",
    "end": "242760"
  },
  {
    "text": "based VPN so you're going to Define that on the right hand side here you've got your corporate infrastructure your data",
    "start": "242760",
    "end": "248000"
  },
  {
    "text": "center and perhaps it's 1921 16816 on the left hand side we have our",
    "start": "248000",
    "end": "253319"
  },
  {
    "text": "VPC and our two end points for the virtual private Gateway and the VPC in this case is",
    "start": "253319",
    "end": "258720"
  },
  {
    "text": "1016 now you'll notice here that you can only have one unique security Association pair per tunnel so that's",
    "start": "258720",
    "end": "266120"
  },
  {
    "text": "fine in this setup that we're showing here there is only one set of IP addresses on each end of the connection that we need to be able to rout to so",
    "start": "266120",
    "end": "272919"
  },
  {
    "text": "that's two unique pairs for two tunnels that's four security associations but I'm guessing that a lot",
    "start": "272919",
    "end": "278320"
  },
  {
    "text": "of your networks don't simply have one6 as part of them so on the right hand side of the diagram and in that case",
    "start": "278320",
    "end": "284600"
  },
  {
    "text": "what you actually need to do is configure the policy based VPN to be using 0/0 what that means is any traffic can",
    "start": "284600",
    "end": "292080"
  },
  {
    "text": "flow over this VPN connection you then need to use Network acl's on your end of the connection on your routers to",
    "start": "292080",
    "end": "297960"
  },
  {
    "text": "actually control and manage that traffic because we need to go back to the fact that we support these four security",
    "start": "297960",
    "end": "303199"
  },
  {
    "text": "associations across the two tunnels now what about a dynamic",
    "start": "303199",
    "end": "308240"
  },
  {
    "text": "VPN Dynamic VPN again has the two end points on the AWS side but this time instead of specifying which IP addresses",
    "start": "308240",
    "end": "314520"
  },
  {
    "text": "are reachable on each end of the connection we use bgp a routing protocol to announce those routes between each",
    "start": "314520",
    "end": "320400"
  },
  {
    "text": "end between each location so in this case we're going to have the two tunnels there's an IP address associated with",
    "start": "320400",
    "end": "326720"
  },
  {
    "text": "each end of that tunnel and then a bgp as number defining both the customer end of the connection and the AWS end the as",
    "start": "326720",
    "end": "335039"
  },
  {
    "text": "number that's used on the Amazon side is fixed for each region but on the customer side obviously you can use",
    "start": "335039",
    "end": "340479"
  },
  {
    "text": "whatever as number you like we'd recommend you use a private as number and if you use a public as number you",
    "start": "340479",
    "end": "345560"
  },
  {
    "text": "should own it but this is a private environment it's a VPN connection now if you wanted to achieve",
    "start": "345560",
    "end": "352199"
  },
  {
    "text": "a resilience setup with either the static or the dynamic vpns you could obviously deploy two customer gateways",
    "start": "352199",
    "end": "357680"
  },
  {
    "text": "within your environment within your data center on the the right you can then build two VPN tunnels from each of those",
    "start": "357680",
    "end": "363840"
  },
  {
    "text": "customer gateways to each VPC that you want to connect to so in this case I'm showing two vpcs and you can then expand",
    "start": "363840",
    "end": "370240"
  },
  {
    "text": "this as you needed to build the VPN connections out to all of your",
    "start": "370240",
    "end": "375000"
  },
  {
    "text": "vpcs so let's take a look at a couple of the frequently asked questions that I get now quite a common one is how can I",
    "start": "375319",
    "end": "381160"
  },
  {
    "text": "change the pre-shared key on a VPN connection now you might have seen this if you have some experience with our VPN",
    "start": "381160",
    "end": "386319"
  },
  {
    "text": "solution already when you create the VPN configuration we give you a file to download which contains all the",
    "start": "386319",
    "end": "391479"
  },
  {
    "text": "configuration options it's also a template for a lot of well-known router manufacturers that you can just",
    "start": "391479",
    "end": "396520"
  },
  {
    "text": "generally apply the pre-shared key is within that file so if you want to change that pre-shared key what you",
    "start": "396520",
    "end": "402560"
  },
  {
    "text": "actually have to do is create a new VPN connection that will generate a new pre-shared key and you can then",
    "start": "402560",
    "end": "408199"
  },
  {
    "text": "reconfigure it on your end of the connection but when you do that you also need to be aware that when you recreate",
    "start": "408199",
    "end": "413440"
  },
  {
    "text": "that VPN we are likely to also change the end points on the AWS side of that connection so the IP addresses you're",
    "start": "413440",
    "end": "419120"
  },
  {
    "text": "establishing your tunnels to will probably have changed in that scenario so in that case make sure you do",
    "start": "419120",
    "end": "424240"
  },
  {
    "text": "reconfigure all of those options on your router now we support a whole range of crypto options on the VPN solution that",
    "start": "424240",
    "end": "431120"
  },
  {
    "text": "we have here so what if you want to change those after you've already deployed the VPN well this is really easy you simply change it on your end",
    "start": "431120",
    "end": "437919"
  },
  {
    "text": "because the way an ipvpn works is there is a negotiation at the beginning of the VPN connection where you make proposals",
    "start": "437919",
    "end": "444520"
  },
  {
    "text": "to each other of which encryption options do I want to use and if you only propose propose a higher level of",
    "start": "444520",
    "end": "450520"
  },
  {
    "text": "encryption that's fine that's what we'll accept and we'll establish that VPN connection now what if you've built your",
    "start": "450520",
    "end": "456680"
  },
  {
    "text": "VPC you've done some testing in it and now you want to build another VPC perhaps for production and move your VPN",
    "start": "456680",
    "end": "462520"
  },
  {
    "text": "to that production VPC you want to reuse that existing VPN connection this is actually really quite",
    "start": "462520",
    "end": "468440"
  },
  {
    "text": "easy because the VPN connection is associated with the virtual private Gateway it's not associated with your VPC so what that means is you can now",
    "start": "468440",
    "end": "475360"
  },
  {
    "text": "detach that virtual private Gateway and then reattach it to the other VPC",
    "start": "475360",
    "end": "480680"
  },
  {
    "text": "so very easy to move that virtual private Gateway so how does billing work on VPN",
    "start": "480680",
    "end": "487560"
  },
  {
    "start": "485000",
    "end": "485000"
  },
  {
    "text": "connections well as I mentioned earlier you pay for the connection hours of your VPN connection so once that VPN is",
    "start": "487560",
    "end": "493800"
  },
  {
    "text": "configured you're then going to receive an hourly charge for it the other dimension that we have is that you pay for data transfer over that VPN",
    "start": "493800",
    "end": "500639"
  },
  {
    "text": "connection now here's a little bit more detail that I didn't have in my session last year but I wanted just to give you",
    "start": "500639",
    "end": "505720"
  },
  {
    "text": "that that kind of slightly deeper view the first item I have here is where is the customer Gateway well if it's over",
    "start": "505720",
    "end": "511240"
  },
  {
    "text": "the internet somewhere if it's in your data center then you're transferring this data over the Internet so the data",
    "start": "511240",
    "end": "517159"
  },
  {
    "text": "transfer charge is our standard internet out data transfer charge and obviously we don't charge anything for the data",
    "start": "517159",
    "end": "522479"
  },
  {
    "text": "flowing into AWS but what if you're using your customer Gateway via a direct connect",
    "start": "522479",
    "end": "528839"
  },
  {
    "text": "circuit which is the example that I'm going to be talking about later on how do we charge for the data transfer in that situation well it's charged at the",
    "start": "528839",
    "end": "535720"
  },
  {
    "text": "rate for Direct Connect it's not charged at the normal internet data transfer rate",
    "start": "535720",
    "end": "540800"
  },
  {
    "text": "there's also a scenario where you might have deployed your customer Gateway actually as a virtual machine in another VPC and if that VPC is in the same",
    "start": "540800",
    "end": "548360"
  },
  {
    "text": "region and you're reaching it via its elastic IP address then actually you're going to pay the data transfer charge for regional data transfer it makes",
    "start": "548360",
    "end": "554959"
  },
  {
    "text": "sense the IP address is within the region so we're not going to charge you for internet data transfer out we charge",
    "start": "554959",
    "end": "560120"
  },
  {
    "text": "you for regional data transfer and then finally again you could have deployed your customer Gateway as a software",
    "start": "560120",
    "end": "565680"
  },
  {
    "text": "solution in a VPC in another AWS region and again in that case the billing will be based on data transfer to a remote",
    "start": "565680",
    "end": "572800"
  },
  {
    "text": "AWS region so there's a couple of other dimensions there to the",
    "start": "572800",
    "end": "577839"
  },
  {
    "text": "billing so now let's also just touch on what is direct connect well Direct Connect is a dedicated private",
    "start": "578320",
    "end": "583880"
  },
  {
    "start": "582000",
    "end": "582000"
  },
  {
    "text": "connection into AWS you can create private or public virtual interfaces that give you access to either your VPC",
    "start": "583880",
    "end": "591000"
  },
  {
    "text": "or other AWS services that have public IP addresses it enables you to benefit from reduced data transfer rates data",
    "start": "591000",
    "end": "598480"
  },
  {
    "text": "transfer in still remains free obviously but data transfer out is at a lesser rate than internet data transfer it",
    "start": "598480",
    "end": "604959"
  },
  {
    "text": "gives you this consistent Network performance you can obviously configure the environment for redundant",
    "start": "604959",
    "end": "610720"
  },
  {
    "text": "connections although you might only provision one direct connect connection or multiple you can actually share these",
    "start": "610720",
    "end": "616399"
  },
  {
    "text": "across all of your AWS accounts and it's a very common setup we now see with customers where they have multiple",
    "start": "616399",
    "end": "621440"
  },
  {
    "text": "accounts so you can actually share these Direct Connect connections between them all and then finally Direct Connect uses",
    "start": "621440",
    "end": "627640"
  },
  {
    "text": "bgp for exchanging routing information so there is no static option on Direct",
    "start": "627640",
    "end": "633760"
  },
  {
    "text": "Connect so a bit of terminology about the connections these are probably terms you're fairly familiar with you know dark fiber ethernet private line",
    "start": "633760",
    "end": "640200"
  },
  {
    "start": "634000",
    "end": "634000"
  },
  {
    "text": "pseudowire these kind of things basically these are all layer one layer two type Services effectively an",
    "start": "640200",
    "end": "645639"
  },
  {
    "text": "ethernet connection so when you connect into an AWS Direct Connect router at one of our locations it's probably going to",
    "start": "645639",
    "end": "651480"
  },
  {
    "text": "be using one of these mechanisms if you happen to be in one of our Direct Connect locations and you",
    "start": "651480",
    "end": "657480"
  },
  {
    "text": "have your equipment in a rack at one of those this might be as simple as ordering a cross connect so you order that from the",
    "start": "657480",
    "end": "663440"
  },
  {
    "text": "data center provider the cross connect might go under the floor straight into the AWS router we use single mode fiber",
    "start": "663440",
    "end": "670480"
  },
  {
    "text": "connections either thousand Bas LX for 1 gig connections or 10g Bas LR for 10 gig connections and they're the two Port",
    "start": "670480",
    "end": "676399"
  },
  {
    "text": "speed options that we have 1 gig or 10 gig and that's a dedicated port for you",
    "start": "676399",
    "end": "681920"
  },
  {
    "text": "if you're not though within those Direct Connect locations within those Colo facilities you might be using a direct connect partner to get this connection",
    "start": "681920",
    "end": "688160"
  },
  {
    "text": "to you but there will always be a router on the other end of that connection that needs to talk bgp over a",
    "start": "688160",
    "end": "696560"
  },
  {
    "text": "VLAN so I said there that this is a dedicated connection a 1 gig or a 10 gig Port but what if you actually want a",
    "start": "696560",
    "end": "703000"
  },
  {
    "text": "lesser amount of bandwidth so I just wanted to clarify here the terms that we use so a 1 gig or a 10 gig Port is",
    "start": "703000",
    "end": "710200"
  },
  {
    "text": "fairly clear it's a port on a rout that now is assigned to you and you connect into it you get the full port speed",
    "start": "710200",
    "end": "715720"
  },
  {
    "text": "available for your use and you can configure as many virtual interfaces public or private on that connection",
    "start": "715720",
    "end": "722040"
  },
  {
    "text": "that you need with a hosted connection though this is provided by some of our partners",
    "start": "722040",
    "end": "727639"
  },
  {
    "text": "it enables you to get sub one gig connections so 50 meg through to 500 megabits per second it's actually",
    "start": "727639",
    "end": "733800"
  },
  {
    "text": "provided on an existing connection we have with that partner we call that an interconnect and when they create a connection for you it becomes a hosted",
    "start": "733800",
    "end": "740760"
  },
  {
    "text": "connection that hosted connection defines a bandwidth the 50 meg through to 500 Meg and a",
    "start": "740760",
    "end": "747800"
  },
  {
    "text": "VLAN because it's already defined the VLAN when you create a virtual interface on that hosted connection you can only",
    "start": "747800",
    "end": "753760"
  },
  {
    "text": "create a single one of them I'm going to look at that in a bit more detail in a moment now I've mentioned the term",
    "start": "753760",
    "end": "759839"
  },
  {
    "start": "759000",
    "end": "759000"
  },
  {
    "text": "virtual interface a couple of times and public and private virtual interface now virtual interface is quite often known",
    "start": "759839",
    "end": "765040"
  },
  {
    "text": "by the term vif I realize that's used in the industry generally for quite a few things but this is a public and a",
    "start": "765040",
    "end": "770240"
  },
  {
    "text": "private vif we're talking about here a private vif connects you to your virtual private Cloud your",
    "start": "770240",
    "end": "776639"
  },
  {
    "text": "VPC but what it doesn't give you access to your VPC is the DNS resolver that we",
    "start": "776639",
    "end": "782320"
  },
  {
    "text": "provide it's referred to as the the plus two DNS resolver it's on the base IP address of your VPC plus two you can't",
    "start": "782320",
    "end": "789160"
  },
  {
    "text": "reach that over a private vif equally you might have a VPC endpoint for S3 on",
    "start": "789160",
    "end": "794920"
  },
  {
    "text": "your VPC you can't reach that over a private virtual interface either but otherwise ec2 instances that are",
    "start": "794920",
    "end": "801720"
  },
  {
    "text": "deployed within your VPC you can reach those over a private virtual interface so what about a public virtual",
    "start": "801720",
    "end": "807800"
  },
  {
    "text": "interface well again the CL is in the name it gives you access to public AWS Services these are services that are",
    "start": "807800",
    "end": "813519"
  },
  {
    "text": "Exposed on the internet and that you can reach normally over an internet connection but in the case that you want to use direct connect to reach those you",
    "start": "813519",
    "end": "820040"
  },
  {
    "text": "create a public virtual interface it gives you access to any of our public IP addresses in the associated AWS region",
    "start": "820040",
    "end": "827399"
  },
  {
    "text": "and it also gives you access to anything else that is running on AWS IP addresses within that",
    "start": "827399",
    "end": "832959"
  },
  {
    "text": "region the other thing that's included within those public IP addresses are the VPN endpoints for the managed VPN that",
    "start": "832959",
    "end": "838920"
  },
  {
    "text": "I'm mentioned a moment ago and at the end of this session that's the example I'm going to show you of how to configure an IPC VPN over a public",
    "start": "838920",
    "end": "846480"
  },
  {
    "text": "virtual interface so a little bit more about virtual interfaces well what do you",
    "start": "846480",
    "end": "852560"
  },
  {
    "text": "actually need to configure it's very simple you've got three choices first of all is it public or",
    "start": "852560",
    "end": "857600"
  },
  {
    "text": "private I need to choose a VLAN for this particular virtual interface and when I've done that I need to configure some",
    "start": "857600",
    "end": "863839"
  },
  {
    "text": "bgp options so these are the three core components of a virtual interface",
    "start": "863839",
    "end": "870320"
  },
  {
    "text": "now let's take a look at how we pull these together so we have your account here and within it you've created a one",
    "start": "870320",
    "end": "876560"
  },
  {
    "text": "gig or a 10 gig direct connect connection on that connection you're then going to go and create a virtual",
    "start": "876560",
    "end": "882279"
  },
  {
    "text": "interface and when you do that it will be assigned an identifier DX vif DX is the abbreviation we use for Direct",
    "start": "882279",
    "end": "888199"
  },
  {
    "text": "Connect and you will have chosen a vlam for this particular virtual interface you can create multiples of those so if",
    "start": "888199",
    "end": "894199"
  },
  {
    "text": "you have another VPC that you want to reach over this Direct Connect you simply create a second virtual interface",
    "start": "894199",
    "end": "899399"
  },
  {
    "text": "and a third and as many more as you need on that regular connection that 1 gig or that 10 gig",
    "start": "899399",
    "end": "906720"
  },
  {
    "text": "Port I mentioned that you can also share these across accounts so how does that work well if you've got multiple AWS",
    "start": "906720",
    "end": "913000"
  },
  {
    "text": "accounts you go into the account that has the connection you create a virtual interface as normal but there's an option to enter another AWS account",
    "start": "913000",
    "end": "920279"
  },
  {
    "text": "number when you do that you finish configuring the VLAN and the bgp options put in the account number and when you",
    "start": "920279",
    "end": "926199"
  },
  {
    "text": "submit that it will appear in the other AWS account ready to be accepted and at this point it becomes what we call a",
    "start": "926199",
    "end": "932000"
  },
  {
    "text": "hosted virtual interface because it is hosted on the connection in another account and you can repeat this so you",
    "start": "932000",
    "end": "938360"
  },
  {
    "text": "can create as many of those as you need as well on a regular connection what about the situation",
    "start": "938360",
    "end": "945319"
  },
  {
    "text": "where we have a partner providing the sub one gig options the 50 through 500 Meg options well I mentioned earlier",
    "start": "945319",
    "end": "951079"
  },
  {
    "text": "that the partner will already have an interconnect with us so that's already in place you don't need to order any physical components on the AWS side you",
    "start": "951079",
    "end": "958399"
  },
  {
    "text": "still might need connection from that partner to your infrastructure but you don't have to create the connection in the AWS console what you actually do",
    "start": "958399",
    "end": "964839"
  },
  {
    "text": "instead is give your AWS account number to the direct connect partner they will then provision a hosted connection for",
    "start": "964839",
    "end": "971720"
  },
  {
    "text": "you on their interconnect and it will appear in your account to accept it will show up with a particular",
    "start": "971720",
    "end": "977839"
  },
  {
    "text": "VLAN already assigned to it and a defined bandwidth but you still need to then create the virtual interface on",
    "start": "977839",
    "end": "983720"
  },
  {
    "text": "that hosted connection the only difference here will be that the VLAN has already been set and you'll see that",
    "start": "983720",
    "end": "988920"
  },
  {
    "text": "it's exactly the same screen that you've already been looking at to create a virtual interface on a regular connection but the VLAN field will just",
    "start": "988920",
    "end": "994920"
  },
  {
    "text": "be grayed out because it's already been chosen by the direct connect partner but I said that a virtual interface requires",
    "start": "994920",
    "end": "1000839"
  },
  {
    "text": "a choice of public and private a VLAN and a bgp session well one of those decisions is already been made for you",
    "start": "1000839",
    "end": "1006519"
  },
  {
    "text": "so if you want another virtual interface whether you're going to use it in the same account or another one you actually need to go back to the partner and ask",
    "start": "1006519",
    "end": "1013600"
  },
  {
    "text": "them to ride you with another hosted connection so in this case I'm showing it as vlam 102 and at that stage you can",
    "start": "1013600",
    "end": "1019360"
  },
  {
    "text": "then create another virtual interface on that hosted",
    "start": "1019360",
    "end": "1024240"
  },
  {
    "text": "connection so how do we deal with resilience with Direct Connect so I'm showing here two Direct Connect",
    "start": "1024480",
    "end": "1029720"
  },
  {
    "text": "locations now we have multiple locations for most of the AWS regions and this",
    "start": "1029720",
    "end": "1034918"
  },
  {
    "text": "means that you can deploy very resilient connectivity solutions to the right of this diagram facing your network in each",
    "start": "1034919",
    "end": "1040678"
  },
  {
    "text": "of those Direct Connect locations we have at least two Direct Connect routers so even within a single facility you can",
    "start": "1040679",
    "end": "1045959"
  },
  {
    "text": "have redundant connectivity these two Direct Connect locations though need to be connected back to an",
    "start": "1045959",
    "end": "1051440"
  },
  {
    "text": "AWS region so here we have an example of an AWS region with multiple availability zones and the two Transit centers",
    "start": "1051440",
    "end": "1058000"
  },
  {
    "text": "associated with that each Direct Connect location then has diverse and resilient connectivity back to that",
    "start": "1058000",
    "end": "1065160"
  },
  {
    "text": "region so you can now build a very resilient very highly available solution using Direct",
    "start": "1065160",
    "end": "1071799"
  },
  {
    "text": "Connect so couple of FAQs on Direct Connect what if you want to move that",
    "start": "1071799",
    "end": "1076840"
  },
  {
    "text": "connection that you ordered in one account to another account well the first thing is don't delete it because",
    "start": "1076840",
    "end": "1082720"
  },
  {
    "text": "if you do what's going to happen is you'll have to start the process of ordering that connection again and we're going to then send you a new Loa letter",
    "start": "1082720",
    "end": "1089280"
  },
  {
    "text": "of authorization connecting facility agreement that defines where that Port actually is and it will be a different",
    "start": "1089280",
    "end": "1095159"
  },
  {
    "text": "port to the one you had previously so now you're going to have to move your cross connect Etc so don't delete the port if you want to do this all you need",
    "start": "1095159",
    "end": "1101880"
  },
  {
    "text": "to do is raise a support case we will happily move that assuming you own both accounts obviously and we'll move that",
    "start": "1101880",
    "end": "1107919"
  },
  {
    "text": "between the accounts or rename it based on your request so simply don't delete it you've created a virtual interface",
    "start": "1107919",
    "end": "1115200"
  },
  {
    "text": "it's attached to a virtual private Gateway that's how we connect into our VPC what if we actually want to move it to another virtual private Gateway well",
    "start": "1115200",
    "end": "1122720"
  },
  {
    "text": "in this case what you need to do is actually note down the settings that you use so the bgp options uh the VLAN Etc",
    "start": "1122720",
    "end": "1129200"
  },
  {
    "text": "you can then delete and recreate that virtual interface using the same settings if you need to delete a virtual",
    "start": "1129200",
    "end": "1136000"
  },
  {
    "text": "private Gateway you will need to remove all of the virtual interfaces first if you're doing a public virtual",
    "start": "1136000",
    "end": "1143280"
  },
  {
    "text": "interface you need to reach the public side of the AWS Network you're going to need to be using public IP addresses on that connection what if you don't have",
    "start": "1143280",
    "end": "1149880"
  },
  {
    "text": "any that you are willing to use on this particular connection what if you don't own your own IP addresses they just come",
    "start": "1149880",
    "end": "1155240"
  },
  {
    "text": "from your ISP that's no problem at all we are happy to provide you with a31 of",
    "start": "1155240",
    "end": "1160360"
  },
  {
    "text": "public IP addresses to use on a public virtual interface all you need to do is raise a support case and ask us to",
    "start": "1160360",
    "end": "1165960"
  },
  {
    "text": "provide that to you and then finally what if you want to change the bandwidth on one of those",
    "start": "1165960",
    "end": "1171080"
  },
  {
    "text": "hosted connections the 50 through 500 Meg connections via Direct Connect Partners well what you need to do there",
    "start": "1171080",
    "end": "1176960"
  },
  {
    "text": "is go back to the partner and actually ask them to create you a new hosted connection at the new bandwidth they can",
    "start": "1176960",
    "end": "1182799"
  },
  {
    "text": "do this in parallel to your existing one it's on another VLAN you can configure another virtual interface and attach it",
    "start": "1182799",
    "end": "1188600"
  },
  {
    "text": "to your VPC and then you can simply remove the old one there is no need for downtime in this situation you can",
    "start": "1188600",
    "end": "1194799"
  },
  {
    "text": "simply create a new one then deprovision the old one",
    "start": "1194799",
    "end": "1200200"
  },
  {
    "start": "1199000",
    "end": "1199000"
  },
  {
    "text": "how does billing work on Direct Connect well quite similarly to the to the VPN side of things we charge for the hours",
    "start": "1200200",
    "end": "1206120"
  },
  {
    "text": "that you have a direct connect connection and it's charged from the moment that it comes up for the first time so obviously there is quite often a",
    "start": "1206120",
    "end": "1213039"
  },
  {
    "text": "period of time from when you order the connection from AWS to the point in time at which your carrier your partner can",
    "start": "1213039",
    "end": "1218280"
  },
  {
    "text": "actually deliver it to your facilities so in that window we don't charge for that connection when it comes up for the",
    "start": "1218280",
    "end": "1223960"
  },
  {
    "text": "first time that's when we start the billing process over Direct Connect you have reduced data transfer rate so you",
    "start": "1223960",
    "end": "1229280"
  },
  {
    "text": "pay for data transfer and it's worth remembering as I said earlier that if you're running an IP VPN over that",
    "start": "1229280",
    "end": "1235080"
  },
  {
    "text": "Direct Connect public virtual interface you pay for the data transfer at the direct connect",
    "start": "1235080",
    "end": "1240280"
  },
  {
    "text": "rates now if you have a private virtual interface billing for this is very simple all the data transfer that goes",
    "start": "1240280",
    "end": "1246200"
  },
  {
    "text": "out via your virtual private Gateway over Direct Connect is charged for at the direct connect",
    "start": "1246200",
    "end": "1251280"
  },
  {
    "text": "rates what about a public virtual interface because a public virtual interface is giving you access to all of the things on public IP addresses all of",
    "start": "1251280",
    "end": "1258080"
  },
  {
    "text": "the services that we have other services that other customers are publishing on AWS you can access all of those over",
    "start": "1258080",
    "end": "1263840"
  },
  {
    "text": "public virtual interfaces so how is that buil well first of all let's keep it really simple if you're accessing a",
    "start": "1263840",
    "end": "1269120"
  },
  {
    "text": "resource that you own let's say an S3 bucket then it's quite simple you pay for that data transfer and it's charge",
    "start": "1269120",
    "end": "1274840"
  },
  {
    "text": "for at the direct connect rates what about accessing a resource that is owned by another account but",
    "start": "1274840",
    "end": "1281600"
  },
  {
    "text": "it's part of your Consolidated billing family so many of you might have multiple AWS accounts that all come into",
    "start": "1281600",
    "end": "1287039"
  },
  {
    "text": "one Consolidated bill if you're accessing an S3 bucket that is owned by another AWS account but within that same",
    "start": "1287039",
    "end": "1292919"
  },
  {
    "text": "Consolidated billing family again you'll pay for that and you'll pay for it at the direct connect rates but what about",
    "start": "1292919",
    "end": "1298720"
  },
  {
    "text": "if you're accessing something that I own something that another customer on AWS is providing from the platform and in",
    "start": "1298720",
    "end": "1305159"
  },
  {
    "text": "that case you don't pay for that data transfer they pay for that data",
    "start": "1305159",
    "end": "1310440"
  },
  {
    "text": "transfer so some of you might have seen the announcement earlier today we announced that we now support IPv6 in",
    "start": "1310799",
    "end": "1316559"
  },
  {
    "text": "VPC we launched in the Ohio region this morning and therefore we also support",
    "start": "1316559",
    "end": "1321600"
  },
  {
    "text": "now IPv6 on Direct Connect so I want to give you a bit of an insight into how that's actually going to be",
    "start": "1321600",
    "end": "1328240"
  },
  {
    "text": "working so when you create an IPv6 based peering session on a virtual interface",
    "start": "1329520",
    "end": "1335159"
  },
  {
    "text": "we're going to be supplying you with a sl25 CER block for that particular connection you won't be defining your",
    "start": "1335159",
    "end": "1341200"
  },
  {
    "text": "own IPv6 addresses for the connection if you haven't seen also within VPC again we'll be assigning you address space",
    "start": "1341200",
    "end": "1347200"
  },
  {
    "text": "from Amazon's IPv6 allocation we will accept sl64 or",
    "start": "1347200",
    "end": "1352320"
  },
  {
    "text": "shorter prefixes from you over the bgp session and the way this works is it's actually an additional peering session",
    "start": "1352320",
    "end": "1358880"
  },
  {
    "text": "on top of your existing virtual interface so you'll have an ipv4 peering session and an IPv6 peering session and",
    "start": "1358880",
    "end": "1365400"
  },
  {
    "text": "it is supported on both public and private virtual interfaces so this is what it looks like",
    "start": "1365400",
    "end": "1371600"
  },
  {
    "text": "on the screen here I'm showing you an existing virtual interface it's down at this point I haven't finished configuring it at all but what we're",
    "start": "1371600",
    "end": "1377760"
  },
  {
    "text": "going to do at the top here is click on the actions menu and you'll see there is now an option to add appearing to this",
    "start": "1377760",
    "end": "1383039"
  },
  {
    "text": "virtual interface until this point it's only an ipv4 connection which is now up and running but I want to add IPv6 to it",
    "start": "1383039",
    "end": "1390279"
  },
  {
    "text": "so we add appearing we choose IPv6 now you can only have a pair of pering connections",
    "start": "1390279",
    "end": "1396200"
  },
  {
    "text": "on this virtual interface one ipv4 one IPv6 so in this case because ipv4 already exists this is going to be an",
    "start": "1396200",
    "end": "1402559"
  },
  {
    "text": "additional IPv6 interface autogenerate IPS as I mentioned we're going to provide the IP",
    "start": "1402559",
    "end": "1407760"
  },
  {
    "text": "addresses for the appearing session itself you simply specify the as number and if you want to specify one the bgp",
    "start": "1407760",
    "end": "1413880"
  },
  {
    "text": "key that you're going to use for this session and then click go you'll then see an additional tab appears on that",
    "start": "1413880",
    "end": "1420120"
  },
  {
    "text": "virtual interface showing you both the ipv4 and the IPv6",
    "start": "1420120",
    "end": "1425360"
  },
  {
    "text": "sessions you can of course go back and if you started with an IPv6 peering session add an ipv4 session to it so it",
    "start": "1427360",
    "end": "1435120"
  },
  {
    "text": "works both ways you could start with either peering and add the second appearing",
    "start": "1435120",
    "end": "1440879"
  },
  {
    "text": "afterwards so I mentioned bgp a few times so a quick refresher on that because we're going to have to dive into some of the detail of this next so bgp",
    "start": "1441000",
    "end": "1448400"
  },
  {
    "text": "is a TCP based protocol for exchanging rooting information more specific prefixes or",
    "start": "1448400",
    "end": "1454039"
  },
  {
    "text": "Roots have always preferred we use autonomous system numbers to identify the networks on each end of a bgp",
    "start": "1454039",
    "end": "1460039"
  },
  {
    "text": "session and that session is established between two bgp neighbors ibgp is the term that's used",
    "start": "1460039",
    "end": "1466880"
  },
  {
    "text": "for bgp peers within the same as number ebgp is the term used for peers within different as's and whenever you're doing",
    "start": "1466880",
    "end": "1473200"
  },
  {
    "text": "bgp with AWS you're going to be using ebgp so there going to be two different as numbers on the ends of the VPN",
    "start": "1473200",
    "end": "1479360"
  },
  {
    "text": "connection or the direct connect as path is a really important concept it's a measure of network",
    "start": "1479360",
    "end": "1485600"
  },
  {
    "text": "distance so it's not the same as a trace route with the amount of hops in it but it represents the whole network that",
    "start": "1485600",
    "end": "1490720"
  },
  {
    "text": "you're passing traffic through and on the as path it will be identified by a number of the particular networks that",
    "start": "1490720",
    "end": "1496960"
  },
  {
    "text": "your traffic is passing through you can always configure a local preference to push traffic down a particular connection if",
    "start": "1496960",
    "end": "1504919"
  },
  {
    "text": "needed so bit more on as numbers autonomous system numbers if you look up Amazon in one of",
    "start": "1504919",
    "end": "1511679"
  },
  {
    "text": "the internet routing Registries you're probably going to see the our as number is 16509 there's a few others out there as",
    "start": "1511679",
    "end": "1518559"
  },
  {
    "text": "well but that's our main as number but when you create a public virtual interface and you download that configuration remembering it gives you",
    "start": "1518559",
    "end": "1525159"
  },
  {
    "text": "access to all of Amazon's public IPS in that region your you're actually going to see that the as number is probably",
    "start": "1525159",
    "end": "1530720"
  },
  {
    "text": "7224 it's not 16509 what about when you create a",
    "start": "1530720",
    "end": "1535880"
  },
  {
    "text": "private virtual interface what's the as number that we use on the Amazon end of a private virtual interface or a dynamic",
    "start": "1535880",
    "end": "1542600"
  },
  {
    "text": "VPN and the point here is that it can vary so please don't make any assumptions about what the as number is",
    "start": "1542600",
    "end": "1548320"
  },
  {
    "text": "going to be as an example here's some of our regions just specifying what the as numbers are so always download the",
    "start": "1548320",
    "end": "1556240"
  },
  {
    "text": "configuration you can do this in a couple of ways so if you create a virtual interface there's always a link to download the configuration within",
    "start": "1556240",
    "end": "1562520"
  },
  {
    "text": "that will be the as number that we're using for that particular Connection in that region the same for a VPN",
    "start": "1562520",
    "end": "1568320"
  },
  {
    "text": "connection and obviously you can also do this via the command line tools so always check what the as number is on",
    "start": "1568320",
    "end": "1574000"
  },
  {
    "text": "the Amazon end of your VPN or direct connect connection now that public virtual",
    "start": "1574000",
    "end": "1580679"
  },
  {
    "start": "1578000",
    "end": "1578000"
  },
  {
    "text": "interface that gives us access to all of Amazon's public IPS in that particular region it requires public IP addresses",
    "start": "1580679",
    "end": "1586279"
  },
  {
    "text": "for the bgp peering session as I mentioned you can open a case with awf support if you need a31 to use for that",
    "start": "1586279",
    "end": "1592840"
  },
  {
    "text": "but if you have your own IP addresses you can announce those to us when you create the virtual interface you specify",
    "start": "1592840",
    "end": "1598240"
  },
  {
    "text": "those IP addresses we then whitelist them to accept them into our Network once we've verified that you own them",
    "start": "1598240",
    "end": "1603559"
  },
  {
    "text": "and then you can use those if you're going to use an as number that is public you have to own",
    "start": "1603559",
    "end": "1610320"
  },
  {
    "text": "that as number on a public virtual interface if you don't that's absolutely fine you can use private as numbers but",
    "start": "1610320",
    "end": "1616840"
  },
  {
    "text": "if you specify a public one again we're going to verify that you actually own that before we enable that virtual interface and that's why there's a",
    "start": "1616840",
    "end": "1623279"
  },
  {
    "text": "window of time up to about 72 hours possibly to validate the ownership of those IP addresses and that as",
    "start": "1623279",
    "end": "1631279"
  },
  {
    "text": "number public virtual interfaces in the US also enable you to reach all of the AWS regions within the US this is us",
    "start": "1631279",
    "end": "1638840"
  },
  {
    "text": "specific feature but it means that you're going to receive bgp announcements for all of Amazon's IPS in",
    "start": "1638840",
    "end": "1644159"
  },
  {
    "text": "all of the AWS regions in the US now going back to the as path comment I",
    "start": "1644159",
    "end": "1651200"
  },
  {
    "text": "made earlier this is an example of the output for a particular prefix on a rout of that disconnected over a bgp session",
    "start": "1651200",
    "end": "1657919"
  },
  {
    "text": "via a public virtual interface you can see on here that there's an as path 7224",
    "start": "1657919",
    "end": "1664159"
  },
  {
    "text": "is the as path the as number that I mentioned that we use for Direct Connect you can see it twice in the path there",
    "start": "1664159",
    "end": "1670799"
  },
  {
    "text": "you also see that we then have 6509 which is the Amazon as number I also mentioned earlier and represents where",
    "start": "1670799",
    "end": "1676320"
  },
  {
    "text": "this particular prefix originates Within Network what you've got here is an as",
    "start": "1676320",
    "end": "1682200"
  },
  {
    "text": "path length of three so we have 7224 in there twice deliberately one step further than that",
    "start": "1682200",
    "end": "1689159"
  },
  {
    "text": "we actually have what's called a community attached to this particular bgp announcement it's called the no export community and the reason we've",
    "start": "1689159",
    "end": "1696080"
  },
  {
    "text": "done that is it helps prevent any unintended propagation of these routs beyond your as boundary so beyond your",
    "start": "1696080",
    "end": "1703320"
  },
  {
    "text": "network you can of course override things like no export if you happen to use multiply s numbers in internally but",
    "start": "1703320",
    "end": "1708960"
  },
  {
    "text": "this is a measure to help prevent these routs being leaked beyond your network and limit the impact if that were to",
    "start": "1708960",
    "end": "1716279"
  },
  {
    "text": "happen as I mentioned you can have an inter region public virtual interface",
    "start": "1717440",
    "end": "1722679"
  },
  {
    "text": "this is enabled by default which means you're going to receive all of these prefixes for all of those regions in the US but what if you don't actually want",
    "start": "1722679",
    "end": "1729480"
  },
  {
    "text": "to use them what we do here is we actually tag our announcements with particular bgp communities to help you",
    "start": "1729480",
    "end": "1735600"
  },
  {
    "text": "decide what you want to do with them so you can see here that if it comes from the local AWS region that you connected",
    "start": "1735600",
    "end": "1741000"
  },
  {
    "text": "this virtual interface to it's going to be tagged with the 8100 Community if however it comes from",
    "start": "1741000",
    "end": "1747840"
  },
  {
    "text": "somewhere else on the continent so somewhere else within the us then it'll be tagged with the 8200 prefix equally",
    "start": "1747840",
    "end": "1754519"
  },
  {
    "text": "you can announce prefixes back to us and tag them with a particular Community to limit how far we distribute those within",
    "start": "1754519",
    "end": "1760039"
  },
  {
    "text": "our Network so if you only want your public IP addresses to be rooted from within that local region that's fine you",
    "start": "1760039",
    "end": "1765840"
  },
  {
    "text": "just add the 9100 community to those announcements so here's an example of",
    "start": "1765840",
    "end": "1773440"
  },
  {
    "text": "those communities attached to this particular announcement you can see we've got 7224 8100 and 8200 well",
    "start": "1773440",
    "end": "1779960"
  },
  {
    "text": "obviously a region is within the continent so that's why you've got both communities attached to this particular",
    "start": "1779960",
    "end": "1785919"
  },
  {
    "text": "announcement so a few more considerations around the as path that we should think about when we're doing multi- region deployments on AWS so",
    "start": "1786080",
    "end": "1793640"
  },
  {
    "start": "1793000",
    "end": "1793000"
  },
  {
    "text": "here's the scenario that we're going to be working with we have three vpcs in three different regions one in Us East",
    "start": "1793640",
    "end": "1799760"
  },
  {
    "text": "one in North Virginia one in US West 2 in Oregon and one in EU West 1 which is in Ireland you can see just under the",
    "start": "1799760",
    "end": "1806399"
  },
  {
    "text": "VPC there I've put the as numbers that we use for the private virtual interface in those particular regions and you",
    "start": "1806399",
    "end": "1811640"
  },
  {
    "text": "might notice that the EU west1 iseland region uses a different as number uses",
    "start": "1811640",
    "end": "1817000"
  },
  {
    "text": "9059 all of these are connected to a corporate backbone might be your own backbone it might be managed and",
    "start": "1817000",
    "end": "1823240"
  },
  {
    "text": "provided to you by a partner but I'm representing that here by a particular as number 65,000",
    "start": "1823240",
    "end": "1829960"
  },
  {
    "text": "so let's take the scenario where we want to be able to send traffic across this corporate backbone for whatever reason",
    "start": "1830279",
    "end": "1835720"
  },
  {
    "text": "that you have between us East 1 and US West 2 both of them use the same as",
    "start": "1835720",
    "end": "1841600"
  },
  {
    "text": "number 7224 and in the bgp environment what that actually means is when you announce",
    "start": "1841600",
    "end": "1846880"
  },
  {
    "text": "that route from us East on the left across your corporate Network where we add then the 65,000 as number to the as",
    "start": "1846880",
    "end": "1854000"
  },
  {
    "text": "path when it gets to us West 2 we're actually going to reject it and that's",
    "start": "1854000",
    "end": "1859120"
  },
  {
    "text": "because to us it appears to come from the same as number and it could cause a rooting Loop so on our side we're going",
    "start": "1859120",
    "end": "1864559"
  },
  {
    "text": "to reject that announcement from your router but actually you wanted this to happen you wanted to be able to communicate between those two vpcs so",
    "start": "1864559",
    "end": "1871519"
  },
  {
    "text": "how can we fix that well using an example here for a Cisco router you can apply something called as override on",
    "start": "1871519",
    "end": "1877639"
  },
  {
    "text": "your router facing that region what that means is if I see the as number in the",
    "start": "1877639",
    "end": "1882720"
  },
  {
    "text": "as path for the network that I'm about to announce the network to I'm I'm going",
    "start": "1882720",
    "end": "1888080"
  },
  {
    "text": "to override that I'm going to replace it with my as number so you can see here in green the 65,000 that's the backbone as",
    "start": "1888080",
    "end": "1894639"
  },
  {
    "text": "number at which point we will happily accept that announcement into the US west region now obviously if you do the",
    "start": "1894639",
    "end": "1900559"
  },
  {
    "text": "same for the reverse path this time from us West 2 back to us east1 the same is going to apply so let's put as override",
    "start": "1900559",
    "end": "1907120"
  },
  {
    "text": "in place to deal with that now you may not have to configure this on your own equipment but it might be something that your partner your carrier may have to",
    "start": "1907120",
    "end": "1915240"
  },
  {
    "text": "do let's take another scenario using that same environment this time we've got EU West one in Ireland wanting to be",
    "start": "1915240",
    "end": "1921799"
  },
  {
    "text": "able to send traffic to us West 2 well in this case EU West One is using a different as number 9059 so if we look",
    "start": "1921799",
    "end": "1929200"
  },
  {
    "text": "at this path here in the middle we can see",
    "start": "1929200",
    "end": "1933519"
  },
  {
    "text": "4 via the backbone 65,000 into eest 1 now eu1 is 9059 so",
    "start": "1947960",
    "end": "1954080"
  },
  {
    "text": "everything should be good but if you actually set this up you'll find that it is rejected why is that well it's because",
    "start": "1954080",
    "end": "1961039"
  },
  {
    "text": "internally we actually use 7224 for quite a few of the internal environments for Direct Connect so what do we do in",
    "start": "1961039",
    "end": "1967639"
  },
  {
    "text": "this particular situation well you could try and apply as override like we did before but you",
    "start": "1967639",
    "end": "1974559"
  },
  {
    "text": "can see here in the example it actually won't do anything because the appearing session is with 9059 that's not the same",
    "start": "1974559",
    "end": "1981000"
  },
  {
    "text": "as 7224 so as override does not apply so it's still rejected now there's a few variations of",
    "start": "1981000",
    "end": "1987480"
  },
  {
    "text": "how you can deal with this situation this is bgp engineering that you can do one example I wanted to use here was",
    "start": "1987480",
    "end": "1992880"
  },
  {
    "text": "that you could actually change the way you're announcing routes into the EU one region you can actually configure your",
    "start": "1992880",
    "end": "1998639"
  },
  {
    "text": "rout of the last hop before the VPC to originate a default route so this time",
    "start": "1998639",
    "end": "2004600"
  },
  {
    "text": "this route this 0/0 route is going to originate from your 6 5,000 Network and of course we're going to accept that",
    "start": "2004600",
    "end": "2010679"
  },
  {
    "text": "because there is no rooting Loop there's no 7224 there's no 9059 this probably isn't quite what you",
    "start": "2010679",
    "end": "2016279"
  },
  {
    "text": "wanted to achieve you didn't want a default route you just wanted to rout to the other vpcs across the",
    "start": "2016279",
    "end": "2021720"
  },
  {
    "text": "globe so now let's look at a little bit more about how the virtual Gateway works with this so here's our VPC we've got",
    "start": "2021720",
    "end": "2028279"
  },
  {
    "text": "our bgp session with our default route being originated on the right hand side so now the virtual private Gateway has a",
    "start": "2028279",
    "end": "2034679"
  },
  {
    "text": "default route inside but your VPC also has an internet gateway which also Roots",
    "start": "2034679",
    "end": "2040480"
  },
  {
    "text": "out to the Internet it's probably what you intended to use as your default route well the good news here is that",
    "start": "2040480",
    "end": "2045679"
  },
  {
    "text": "those two options are actually separate from the root tables inside your VPC",
    "start": "2045679",
    "end": "2051320"
  },
  {
    "text": "when you create a root table it has a local root in it which says this is how I get to all the IP addresses within my",
    "start": "2051320",
    "end": "2056839"
  },
  {
    "text": "VPC you've then probably created a default route that says send all traffic to the internet via my internet gateway",
    "start": "2056839",
    "end": "2064960"
  },
  {
    "text": "what you can actually do here is put a specific route in that root table inside your VPC just for the 10/8 Network and",
    "start": "2064960",
    "end": "2073200"
  },
  {
    "text": "in this case you can say if I have traffic for 108 send it to the virtual private Gateway so what you're seeing",
    "start": "2073200",
    "end": "2079599"
  },
  {
    "text": "here is two steps in the rooting process there's a decision that's made inside the root table that you configured and",
    "start": "2079599",
    "end": "2085320"
  },
  {
    "text": "then once that traffic gets to your virtual private Gateway it's going to follow that default route anyway down the direct connect onto the corporate",
    "start": "2085320",
    "end": "2091800"
  },
  {
    "text": "backbone so you have actually achieved your goal of being able to rout to the rest of your 10 Network over Direct Connect even even though you might have",
    "start": "2091800",
    "end": "2098599"
  },
  {
    "text": "some overlapping as number configuration issues so while we're talking about",
    "start": "2098599",
    "end": "2104359"
  },
  {
    "start": "2103000",
    "end": "2103000"
  },
  {
    "text": "rooting within our VPC we might have multiple routes to get to a particular destination inside that root table they",
    "start": "2104359",
    "end": "2110520"
  },
  {
    "text": "could have come from various places you could have created them manually they could have been propagated dynamically from Direct Connect or VPN so how do we",
    "start": "2110520",
    "end": "2117560"
  },
  {
    "text": "make a decision about where to send that traffic well the first thing to say is that Local Roots within the VPC always",
    "start": "2117560",
    "end": "2124160"
  },
  {
    "text": "come first you cannot create a more specific route in a root table in a VPC than the VPC cider",
    "start": "2124160",
    "end": "2130280"
  },
  {
    "text": "itself assuming that the choice now has to be made between two routes that are outside of that VPC the first thing",
    "start": "2130280",
    "end": "2136480"
  },
  {
    "text": "we're going to do is look for the longest prefix match first so a sl24 is more specific than a sl6 route assuming",
    "start": "2136480",
    "end": "2143440"
  },
  {
    "text": "that hasn't broken the tie we're then going to have a look and say any route that appeared as a static entry one that",
    "start": "2143440",
    "end": "2149240"
  },
  {
    "text": "you created inside that route table that will win okay but perhaps that didn't split",
    "start": "2149240",
    "end": "2155920"
  },
  {
    "text": "the match we have here so now into the dynamic routes if we have a dynamic route via Direct Connect and Via VPN the",
    "start": "2155920",
    "end": "2162760"
  },
  {
    "text": "first thing we're going to do is choose Direct Connect it's unlikely that you intended to use a VPN connection if you",
    "start": "2162760",
    "end": "2168319"
  },
  {
    "text": "had a direct connect in place so Direct Connect wins first if we still need to break a tie here we're going to look at",
    "start": "2168319",
    "end": "2174160"
  },
  {
    "text": "the shortest as path and finally at this stage we say okay we have two two paths to a remote Network we're going to do",
    "start": "2174160",
    "end": "2180119"
  },
  {
    "text": "ecmp equal cost multipathing and use both of those connections assuming it wasn't a direct",
    "start": "2180119",
    "end": "2186520"
  },
  {
    "text": "connect decision we needed to make make static VPN connections now come before Dynamic VPN connections so this is the",
    "start": "2186520",
    "end": "2193200"
  },
  {
    "text": "rooting preference that we have with inside the VPC so now let's talk about something",
    "start": "2193200",
    "end": "2199520"
  },
  {
    "text": "called VPN Cloud Hub you might have seen this in the documentation VP and cloudhub is a way that you can connect",
    "start": "2199520",
    "end": "2205760"
  },
  {
    "text": "multiple remote networks these could be your data centers your Corporate Offices all into the same virtual private",
    "start": "2205760",
    "end": "2211839"
  },
  {
    "text": "Gateway assuming that you configure them with different as numbers here you'll be exchanging Roots via the virtual private",
    "start": "2211839",
    "end": "2218000"
  },
  {
    "text": "Gateway it acts as a hub hence the name Cloud Hub it also of course gives you access into the VPC as you'd",
    "start": "2218000",
    "end": "2224200"
  },
  {
    "text": "expect you can use different as numbers but you also have the option to use the same as number if you wanted to although",
    "start": "2224200",
    "end": "2230920"
  },
  {
    "start": "2228000",
    "end": "2228000"
  },
  {
    "text": "you might need to do some custom configuration on your routers to make that work I also wanted to show an example",
    "start": "2230920",
    "end": "2236839"
  },
  {
    "text": "here where instead of connecting multiple offices or multiple data centers together you could of course",
    "start": "2236839",
    "end": "2242040"
  },
  {
    "text": "deploy another VPC perhaps in a different region so up on the top right I'm showing EU Central One this is",
    "start": "2242040",
    "end": "2248040"
  },
  {
    "text": "another region I've deployed two software VPN instances in that region",
    "start": "2248040",
    "end": "2253560"
  },
  {
    "text": "I've deployed two obviously for high availability so these are now my customer gateways they connect to the",
    "start": "2253560",
    "end": "2258920"
  },
  {
    "text": "virtual private Gateway on the left and now we're able to route between your data centers and two different vpcs in",
    "start": "2258920",
    "end": "2265280"
  },
  {
    "text": "two different locations that works really well you can expand that of course and now put another two software",
    "start": "2265280",
    "end": "2271319"
  },
  {
    "text": "VPN instances and another VPC build a whole set of vpns to that virtual private Gateway and now all three of",
    "start": "2271319",
    "end": "2277040"
  },
  {
    "text": "these V PCS wherever they're located will be able to root to each other let's add a corporate data center",
    "start": "2277040",
    "end": "2283800"
  },
  {
    "text": "back into the mix here let's add a private virtual interface connected to that same virtual private Gateway and",
    "start": "2283800",
    "end": "2289520"
  },
  {
    "text": "now all of these environments can all rout to each other so you can come over one direct connec to one particular",
    "start": "2289520",
    "end": "2294839"
  },
  {
    "text": "region then over these VPN connections out to the others isn't this starting to sound like",
    "start": "2294839",
    "end": "2300720"
  },
  {
    "text": "a Transit VPC you've created an environment where you can route to multiple locations over this one",
    "start": "2300720",
    "end": "2306200"
  },
  {
    "text": "connection but there's a problem with this design whilst technically it works we've had to deploy two software VPN",
    "start": "2306200",
    "end": "2313319"
  },
  {
    "text": "instances in every single VPC that we want to add into this environment those two software vpns",
    "start": "2313319",
    "end": "2319400"
  },
  {
    "text": "might be running commercial software that you're having to pay license fees for and you now need to deal with the resilience of them within that VPC what",
    "start": "2319400",
    "end": "2326599"
  },
  {
    "text": "happens when one of them fails that's what we should always be planning for so we now need to have some automation that fails over our routing all of this is",
    "start": "2326599",
    "end": "2333400"
  },
  {
    "text": "completely doable and we actually have examples of this published but actually there's an easier",
    "start": "2333400",
    "end": "2339319"
  },
  {
    "start": "2339000",
    "end": "2339000"
  },
  {
    "text": "way we published a Transit VPC solution recently what this does is it moves",
    "start": "2339319",
    "end": "2345119"
  },
  {
    "text": "those two software VPN instances into a hub environment so we actually create a VPC here we're not using anything else",
    "start": "2345119",
    "end": "2351400"
  },
  {
    "text": "within it just to hold these two VPN instances these two VPN instances act as",
    "start": "2351400",
    "end": "2357480"
  },
  {
    "text": "the customer Gateway and they connect out to the virtual private Gateway of as many other vpcs as you need because it's",
    "start": "2357480",
    "end": "2363839"
  },
  {
    "text": "going to a virtual private Gateway on the other end you haven't even got to think about the resol within those vpcs",
    "start": "2363839",
    "end": "2369000"
  },
  {
    "text": "A and B at the top because you have one Target in your root table the virtual private Gateway you don't have to script",
    "start": "2369000",
    "end": "2374599"
  },
  {
    "text": "any fail over you just say send my traffic to the virtual private Gateway and we take care of it for you in the",
    "start": "2374599",
    "end": "2380359"
  },
  {
    "text": "hub we have the two VPN instances so that's highly available and resilient if one of those fails all of the traffic",
    "start": "2380359",
    "end": "2385960"
  },
  {
    "text": "will just keep flowing over the other one whilst it gets replaced by whatever automation you want to implement now",
    "start": "2385960",
    "end": "2391520"
  },
  {
    "text": "we've actually published a cloud formation template on automation around this for you it allows you to do things",
    "start": "2391520",
    "end": "2396760"
  },
  {
    "text": "as simple as tagging a virtual private Gateway with a Spoke tag we then use",
    "start": "2396760",
    "end": "2401880"
  },
  {
    "text": "Lambda to automatically notice that build a VPN configuration and configure these two software VPN instances in the",
    "start": "2401880",
    "end": "2407800"
  },
  {
    "text": "middle for you so you can go and download that from our website give it a try customize it as much as you need and",
    "start": "2407800",
    "end": "2414440"
  },
  {
    "text": "that's great for connecting vpcs together in multiple regions if needed but also you probably want to connect it",
    "start": "2414440",
    "end": "2420319"
  },
  {
    "text": "back to your data center so at the bottom here if you were using a VPN connection you could bring those straight into those two ec2 instances is",
    "start": "2420319",
    "end": "2427480"
  },
  {
    "text": "in the middle but if you're using Direct Connect how does that work well you can actually create a virtual private",
    "start": "2427480",
    "end": "2432960"
  },
  {
    "text": "Gateway doesn't have to even be attached to a VPC you can bring your virtual interface for Direct Connect into that",
    "start": "2432960",
    "end": "2439720"
  },
  {
    "text": "and then tag it again with the spoke VPN tag that will then add it into this Transit VPC and now you'll be able to",
    "start": "2439720",
    "end": "2446160"
  },
  {
    "text": "rout between Direct Connect and all of those other vpcs at the top of the diagram so as I say there is a full",
    "start": "2446160",
    "end": "2452640"
  },
  {
    "text": "solution brief documented about this it shows you how to configure all of the components how to automatically deploy it and I'd encourage you to take a look",
    "start": "2452640",
    "end": "2459119"
  },
  {
    "text": "at that and customize it for your own needs so how do we use VPN and direct",
    "start": "2459119",
    "end": "2464760"
  },
  {
    "text": "connect with some other AWS Services let's touch on public virtual",
    "start": "2464760",
    "end": "2470319"
  },
  {
    "text": "interfaces first it connects you to those Public Services we talked about anything within that local Associated",
    "start": "2470319",
    "end": "2475800"
  },
  {
    "text": "region and things like Amazon S3 Amazon Glacier Dynamo DB these are the kinds of",
    "start": "2475800",
    "end": "2481359"
  },
  {
    "text": "services that you're going to connect to over a public virtual interface what about the Services these",
    "start": "2481359",
    "end": "2488040"
  },
  {
    "text": "might be ones that you're considering actually aren't these private well no all of these actually have a public",
    "start": "2488040",
    "end": "2493520"
  },
  {
    "text": "component to them workspaces you connect to the end points for workspaces over the Internet so they have public IP",
    "start": "2493520",
    "end": "2499839"
  },
  {
    "text": "addresses elastic load balancing yes you can have internal elastic low balancers but you also generally deploy them with",
    "start": "2499839",
    "end": "2506480"
  },
  {
    "text": "public IP addresses facing the internet so these are all reachable over a public virtual",
    "start": "2506480",
    "end": "2511839"
  },
  {
    "text": "interface now what about a private virtual interface it goes to your VPC so I think we can keep those same services",
    "start": "2511839",
    "end": "2517079"
  },
  {
    "text": "on on the screen because workspaces has a component that does exist inside your VPC as well so it's relevant for that",
    "start": "2517079",
    "end": "2523599"
  },
  {
    "text": "Lambda again you can create Lambda functions and run them inside your VPC so that's relevant and of course ec2 ec2",
    "start": "2523599",
    "end": "2530119"
  },
  {
    "text": "instances are running inside your VPC other services though that you might",
    "start": "2530119",
    "end": "2535760"
  },
  {
    "text": "not expect to see there you've got things like RDS red shift Cloud HSM these are all reachable over private",
    "start": "2535760",
    "end": "2541640"
  },
  {
    "text": "virtual interfaces so let's take an actual example here let's work with storage Gateway for for those of you not",
    "start": "2541640",
    "end": "2547640"
  },
  {
    "start": "2544000",
    "end": "2544000"
  },
  {
    "text": "familiar with storage Gateway it's a virtual appliance that you deploy in your virtualized environment on premises",
    "start": "2547640",
    "end": "2554240"
  },
  {
    "text": "you can then use your legacy servers and backup software that supports virtual tape libraries to connect to the storage",
    "start": "2554240",
    "end": "2560200"
  },
  {
    "text": "Gateway over ice gzy what storage gateway then does is it can either act in a cached mode or a Gateway mode but",
    "start": "2560200",
    "end": "2566520"
  },
  {
    "text": "it will then take your data and push it into a service on the AWS side via some",
    "start": "2566520",
    "end": "2572359"
  },
  {
    "text": "public endpoints so these exist for a particular region they have public IP addresses this normally works over the",
    "start": "2572359",
    "end": "2578280"
  },
  {
    "text": "Internet so I think you can see quite clearly here that if we put a direct connect in place you could replace that",
    "start": "2578280",
    "end": "2583800"
  },
  {
    "text": "connection over the Internet potentially high bandwidth usage that's going over your current Internet connection you",
    "start": "2583800",
    "end": "2589200"
  },
  {
    "text": "could replace that with a direct connect the other scenario is Amazon workspaces so again this might be an",
    "start": "2589200",
    "end": "2596040"
  },
  {
    "text": "architecture that you've seen before it's quite a standard setup of workspaces on the left hand side we have",
    "start": "2596040",
    "end": "2601440"
  },
  {
    "text": "your data center we have various servers deployed within that environment perhaps some directory servers multiactor",
    "start": "2601440",
    "end": "2607119"
  },
  {
    "text": "authentication servers you also have your users within that environment who want to connect to their workspaces and",
    "start": "2607119",
    "end": "2613000"
  },
  {
    "text": "when they connect to the endpoints for workspaces they go over the Internet they're exposed to the public internet so that you can log in from",
    "start": "2613000",
    "end": "2619079"
  },
  {
    "text": "anywhere there's usually already a VPN connection within a solution like this because our directory service wants to",
    "start": "2619079",
    "end": "2625240"
  },
  {
    "text": "integrate with your directory so that VPN connection is in place and as we know a private virtual interface can be",
    "start": "2625240",
    "end": "2631400"
  },
  {
    "text": "used wherever we're using a VPN connection so that's one place in this solution that we can use Direct Connect",
    "start": "2631400",
    "end": "2637359"
  },
  {
    "text": "but there is one more those connections from those users when they're in the corporate office within the corporate",
    "start": "2637359",
    "end": "2642680"
  },
  {
    "text": "environment if they want to reach these public end points if we put a public virtual interface in place they can",
    "start": "2642680",
    "end": "2648640"
  },
  {
    "text": "actually connect over those we aren't limiting their ability to connect you can still connect from home or from a",
    "start": "2648640",
    "end": "2653720"
  },
  {
    "text": "coffee shop wherever you need to to use workspaces but if you're in the office you can benefit from that direct connect",
    "start": "2653720",
    "end": "2659079"
  },
  {
    "text": "connection if you deploy a public virtual",
    "start": "2659079",
    "end": "2663240"
  },
  {
    "text": "interface okay so I sometimes hear request from customers that they want to use Direct Connect but it's not",
    "start": "2664160",
    "end": "2670480"
  },
  {
    "text": "encrypted how can I encrypt a connection over Direct Connect well this is one of the options for doing that there are",
    "start": "2670480",
    "end": "2676880"
  },
  {
    "text": "many ways of doing it and I showed this example last year it's a very high level diagram it's saying that on the rightand",
    "start": "2676880",
    "end": "2683280"
  },
  {
    "text": "side we have your corporate Network we have a router there we create a public virtual interface which is the blue line",
    "start": "2683280",
    "end": "2688319"
  },
  {
    "text": "on the diagram here the configuration at the top everything we've talked about so far because the IP addresses for our VPN",
    "start": "2688319",
    "end": "2695040"
  },
  {
    "text": "endpoints are presented within that public public address space you can now build a VPN connection on top of that",
    "start": "2695040",
    "end": "2700680"
  },
  {
    "text": "that's the two dashed green lines on the diagram here the configuration for those two IPC tunnels is shown at the bottom",
    "start": "2700680",
    "end": "2706400"
  },
  {
    "text": "of the screen and this is what you'd need to configure but how do you actually do this so what I'm going to show you is",
    "start": "2706400",
    "end": "2713559"
  },
  {
    "text": "one particular example it's configured on a Cisco router you can do this on various vendors hardware and it uses",
    "start": "2713559",
    "end": "2720200"
  },
  {
    "text": "something called virtual rooting and forwarding vrfs so a vrf allows you to create a",
    "start": "2720200",
    "end": "2725720"
  },
  {
    "text": "separate environment within that Ro it's sometimes called a roting instance on other vendor environments other vendor",
    "start": "2725720",
    "end": "2730800"
  },
  {
    "text": "Hardware you can create a separate rooting table within that router it means that the main root table can be",
    "start": "2730800",
    "end": "2737200"
  },
  {
    "text": "associated with an internal private Network and you can contain a set of other Roots completely separately to",
    "start": "2737200",
    "end": "2743200"
  },
  {
    "text": "that root table so what we have here I've created a vrf virtual rooting and forwarding environment for a public",
    "start": "2743200",
    "end": "2749599"
  },
  {
    "text": "virtual interface I'm then going to build that public virtual interface between AWS and that vrf now when you",
    "start": "2749599",
    "end": "2756319"
  },
  {
    "text": "create a public virtual interface you download a configuration it looks something like this but what I've done",
    "start": "2756319",
    "end": "2762079"
  },
  {
    "text": "here is added in the extra lines to now use a vrf on this particular router so these examples can actually be",
    "start": "2762079",
    "end": "2768920"
  },
  {
    "text": "used and applied if you want to there's a few other elements you might choose to add to integrate better with your",
    "start": "2768920",
    "end": "2774040"
  },
  {
    "text": "network to add some additional security but these are the core components once you've configured the",
    "start": "2774040",
    "end": "2779720"
  },
  {
    "text": "vrf for that public virtual interface if we now look inside that root table inside the vrf we're going to see all of",
    "start": "2779720",
    "end": "2785599"
  },
  {
    "text": "those Amazon public IP addresses addes within those are the IP addresses for the virtual private",
    "start": "2785599",
    "end": "2791640"
  },
  {
    "text": "Gateway so the next step is to create a VPN connection and again when you download the configuration this is what",
    "start": "2791640",
    "end": "2797520"
  },
  {
    "text": "it's going to look like what you can do here is say when I established this VPN connection establish it from within that",
    "start": "2797520",
    "end": "2804839"
  },
  {
    "text": "vrf use the routing that I have available from that public virtual interface to reach the VPN endpoints so",
    "start": "2804839",
    "end": "2811880"
  },
  {
    "text": "I'm showing you here the places that you need to add in that additional configuration for your reference that you can use this perhaps after this",
    "start": "2811880",
    "end": "2817680"
  },
  {
    "text": "session to try out this configuration basically though you're configuring the key rings and the profile for the VPN",
    "start": "2817680",
    "end": "2825160"
  },
  {
    "text": "connection once you've configured those two elements though you also have to take the two tunnel interfaces themselves and here it's really",
    "start": "2825599",
    "end": "2831839"
  },
  {
    "text": "important to configure those tunnels to start within that vrf we don't need the whole interface to be in there so",
    "start": "2831839",
    "end": "2837839"
  },
  {
    "text": "there's no configuration here to put the interface itself in the vrf just the start of the tunnels so when that's done what we now",
    "start": "2837839",
    "end": "2845000"
  },
  {
    "text": "have is the configuration of two tunnels that have part of them inside that public vrf and part of them within the",
    "start": "2845000",
    "end": "2850520"
  },
  {
    "text": "global routing table on the router we bring up the bgp sessions between these two and now if we have a look at the",
    "start": "2850520",
    "end": "2857119"
  },
  {
    "text": "root table on the main part of the router the global rting table it's nice and clean all it has in it is a route to",
    "start": "2857119",
    "end": "2863599"
  },
  {
    "text": "my corporate Network 1921 16851 in this example and it has my two paths via two",
    "start": "2863599",
    "end": "2869480"
  },
  {
    "text": "VPN connections into AWS so this is one way that you can build an encrypted connection on top top",
    "start": "2869480",
    "end": "2877040"
  },
  {
    "text": "of direct connect so these are a few of the other",
    "start": "2877040",
    "end": "2882440"
  },
  {
    "text": "sessions that cover Direct Connect and vpns there's quite a few there as I say most of them have already occurred this",
    "start": "2882440",
    "end": "2888160"
  },
  {
    "text": "week so you can catch them on YouTube after the event hope the session has been useful to you we'd really",
    "start": "2888160",
    "end": "2893720"
  },
  {
    "text": "appreciate your feedback because I shaped this session based on some of the feedback we had last year and we're always looking to improve the content so",
    "start": "2893720",
    "end": "2900720"
  },
  {
    "text": "thank you very much for your time got about 10 minutes if anyone's got any questions",
    "start": "2900720",
    "end": "2906559"
  }
]