[
  {
    "start": "0",
    "end": "58000"
  },
  {
    "text": "well hello everyone and thank you for coming so my name is Brian Kraus I am a",
    "start": "0",
    "end": "5120"
  },
  {
    "text": "senior solutions engineer with github and today we're going to show you the",
    "start": "5120",
    "end": "10969"
  },
  {
    "text": "basics of automating deployments of code from github to lamda through three",
    "start": "10969",
    "end": "17039"
  },
  {
    "text": "different pipelines so we'll show you how to do it using Jenkins we'll show you how to do it using AWS code pipeline",
    "start": "17039",
    "end": "23460"
  },
  {
    "text": "and we'll show you how to do it using AWS code star so I want to get a few things out of the way before we get",
    "start": "23460",
    "end": "29699"
  },
  {
    "text": "started has everybody heard of github in the room everybody some of us use github",
    "start": "29699",
    "end": "34829"
  },
  {
    "text": "suite how many of us use github Enterprise on Prem at work oh that's great okay that's good to know so while",
    "start": "34829",
    "end": "42000"
  },
  {
    "text": "we agree that the talk is going well I thought I'd take a quick selfie to",
    "start": "42000",
    "end": "47820"
  },
  {
    "text": "memorialize this so everybody smile and wave alright thanks I appreciate that",
    "start": "47820",
    "end": "53879"
  },
  {
    "text": "okay so if things go downhill at least I'll always had that okay so let's get started",
    "start": "53879",
    "end": "58890"
  },
  {
    "start": "58000",
    "end": "58000"
  },
  {
    "text": "so we are as I said gonna talk about three ways to deploy a single lambda",
    "start": "58890",
    "end": "64470"
  },
  {
    "text": "micro service from github to AWS so we'll start with github and Jenkins and",
    "start": "64470",
    "end": "70979"
  },
  {
    "text": "the reason we're going to start here is because this will give us an opportunity to review the entire process from",
    "start": "70979",
    "end": "76020"
  },
  {
    "text": "beginning to end so we'll set up a development environment we'll configure our AWS toolset will configure Jenkins",
    "start": "76020",
    "end": "82470"
  },
  {
    "text": "we'll do all the things that you need to do so that if you pay attention from beginning to end and I got it right we'll see which one of those holds true",
    "start": "82470",
    "end": "89610"
  },
  {
    "text": "you will be able to do this when you walk out of this room so after that we're going to adapt that code mostly",
    "start": "89610",
    "end": "95100"
  },
  {
    "text": "the configuration parts of the code and we're gonna do the same thing again but we're gonna use AWS is native code",
    "start": "95100",
    "end": "100920"
  },
  {
    "text": "pipeline tool set in order to do that and then lastly we're gonna do all of that again using the new code star",
    "start": "100920",
    "end": "107909"
  },
  {
    "text": "platform so is anybody here used code star or heard of code star from Amazon alright so it's pretty cool if you're",
    "start": "107909",
    "end": "114060"
  },
  {
    "text": "just getting started with this sort of thing it's a great way to get introduced to CI and deployment on on Amazon okay",
    "start": "114060",
    "end": "123299"
  },
  {
    "start": "123000",
    "end": "123000"
  },
  {
    "text": "continuous integration is there anyone in the room that doesn't know what I mean when I talk about continuous integration definitely pitch this a",
    "start": "123299",
    "end": "131819"
  },
  {
    "text": "little low for this room it looks like okay so for just a quick review for the folks online continuous integration is the idea that",
    "start": "131819",
    "end": "138300"
  },
  {
    "text": "we every time we push code to github or into our repository we are testing it to",
    "start": "138300",
    "end": "143910"
  },
  {
    "text": "ensure its integrity we're doing regression tests we're doing unit tests we're doing everything we can to ensure",
    "start": "143910",
    "end": "150780"
  },
  {
    "text": "that that code is complete and it's free of defects as we can make it and obviously when we want to automate this",
    "start": "150780",
    "end": "156630"
  },
  {
    "text": "so that we remove the human factor because sometimes humans do their testing how does it work so every time",
    "start": "156630",
    "end": "163020"
  },
  {
    "text": "developers push to github github can be configured via a tool called a web hook",
    "start": "163020",
    "end": "168750"
  },
  {
    "text": "to emit a rest payload to a rest api endpoint and this payload contains all",
    "start": "168750",
    "end": "175260"
  },
  {
    "text": "the information that whatever is on the other side of that endpoint needs to pull that code from github and do stuff",
    "start": "175260",
    "end": "182370"
  },
  {
    "text": "so what we're gonna look at here in a bit with Jenkins we're gonna build that code we are going to test that code and",
    "start": "182370",
    "end": "189690"
  },
  {
    "text": "we're gonna deploy that code to lambda and if there's anything wrong and any one of those stages Jenkins is going to",
    "start": "189690",
    "end": "195240"
  },
  {
    "text": "return a fail response and it's also not going to proceed now if all of that",
    "start": "195240",
    "end": "200459"
  },
  {
    "text": "stuff works it's going to return an okay response which is great feedback is awesome",
    "start": "200459",
    "end": "205769"
  },
  {
    "text": "what do we do with this feedback so if everything works the code will be deployed to lambda the reason this is",
    "start": "205769",
    "end": "212550"
  },
  {
    "text": "relevant for us in github is that we can leverage this feedback process to further protect our code so there is a",
    "start": "212550",
    "end": "219239"
  },
  {
    "text": "feature inside of github called protected branches and it's exactly what it sounds like it allows you to impose",
    "start": "219239",
    "end": "226200"
  },
  {
    "text": "layered protection on your code to prevent various bad things from happening to it so in our case if I",
    "start": "226200",
    "end": "233220"
  },
  {
    "text": "protect my branch and this could be my master branch if I'm in a SAS scenario and I'm deploying a lambda function this",
    "start": "233220",
    "end": "240450"
  },
  {
    "text": "lambda function may be going directly into production several times a day I want to make sure that it's past its",
    "start": "240450",
    "end": "245790"
  },
  {
    "text": "integration test before that actually happens I can require that status checks in other words these continuous",
    "start": "245790",
    "end": "251940"
  },
  {
    "text": "integration tests that Jenkins performs return successfully before a pull request can be merged and everybody's",
    "start": "251940",
    "end": "259169"
  },
  {
    "text": "using pull requests right nobody's merging directly to master we're all using Poe requests further I can select",
    "start": "259169",
    "end": "265289"
  },
  {
    "text": "from any number of these tests we're only going to set up a single test but it may make sense for you to",
    "start": "265289",
    "end": "271229"
  },
  {
    "text": "separate out your testing Suites into unit testing deployment testing whatever makes sense for your particular scenario",
    "start": "271229",
    "end": "277560"
  },
  {
    "text": "you can select any or all of these the failure of which will prevent a pull request from merging and lastly this is",
    "start": "277560",
    "end": "284729"
  },
  {
    "text": "a really cool feature you can require branches to be what we call up to date so what we're going to do in this instance is we're going to take the code",
    "start": "284729",
    "end": "291180"
  },
  {
    "text": "from the base branch and the branch that's going to be merged create a sort of a temporary commitment all that code",
    "start": "291180",
    "end": "297300"
  },
  {
    "text": "is merged and then send that off to be tested so this is a great way to eliminate merge surprises before you",
    "start": "297300",
    "end": "304050"
  },
  {
    "text": "deploy to production so again github protected branches if you're not using protected branches you",
    "start": "304050",
    "end": "309479"
  },
  {
    "text": "definitely should consider doing so there's a lot of information in our documentation then we have a couple of webinars to describe how this",
    "start": "309479",
    "end": "316110"
  },
  {
    "text": "functionality can really help you to protect your code and prevent bad things from happening alright so what would",
    "start": "316110",
    "end": "322199"
  },
  {
    "text": "happen if Jenkins returns a failed code when I submit and when I push code to",
    "start": "322199",
    "end": "328650"
  },
  {
    "text": "github I'm gonna see this response while those checks are actually running and some of the checks can take a while if",
    "start": "328650",
    "end": "334979"
  },
  {
    "text": "those checks fail I'm gonna see this which means a check has failed and most",
    "start": "334979",
    "end": "340500"
  },
  {
    "text": "importantly the merge pull request button will be disabled in those cases administrators can if you allow them",
    "start": "340500",
    "end": "347159"
  },
  {
    "text": "overrule this and merge anyway but they can't say that they weren't warned if they choose to do that and lastly if all",
    "start": "347159",
    "end": "353460"
  },
  {
    "text": "the checks do pass which of course they eventually will then you can merge the pull request as normal if all of the",
    "start": "353460",
    "end": "360539"
  },
  {
    "text": "other configuration parameters that you may have specified have been met all right so in order to do this obviously",
    "start": "360539",
    "end": "367620"
  },
  {
    "start": "365000",
    "end": "365000"
  },
  {
    "text": "you have to understand how to use install and use the Amazon Web Services",
    "start": "367620",
    "end": "372659"
  },
  {
    "text": "command line interface the CEO I also you should probably have some familiarity with I am users groups and",
    "start": "372659",
    "end": "380490"
  },
  {
    "text": "roles as well as lambda functions and as three buckets and some awareness of",
    "start": "380490",
    "end": "386190"
  },
  {
    "text": "nodes since that's a platform you're using bash NPM and and grunt just for",
    "start": "386190",
    "end": "392849"
  },
  {
    "text": "the record when I started on this presentation I did not but now I do so",
    "start": "392849",
    "end": "397950"
  },
  {
    "text": "again if you are following along and you want to actually do this we're gonna use node sixth ten at the time that I created this",
    "start": "397950",
    "end": "403320"
  },
  {
    "text": "presentation that was the latest supported node virgin in lambda we're using a plugin for the function called",
    "start": "403320",
    "end": "409770"
  },
  {
    "text": "image magic which isn't necessarily very relevant to the deployment that we're talking about but it will help you to",
    "start": "409770",
    "end": "415170"
  },
  {
    "text": "understand the code if you ever go browse the repository and of course the Amazon AWS CLI alright so the first",
    "start": "415170",
    "end": "423120"
  },
  {
    "start": "422000",
    "end": "422000"
  },
  {
    "text": "thing we're going to do as we start down this path is create our I am user and",
    "start": "423120",
    "end": "428520"
  },
  {
    "text": "group and the reason we're doing this is we don't want to use our root user and our root authority to do anything inside",
    "start": "428520",
    "end": "436440"
  },
  {
    "text": "of AWS so we head to I M we click on add user and we specify a username so I like",
    "start": "436440",
    "end": "442980"
  },
  {
    "text": "to try to use a naming convention such that when I see a long list of user names or group names I can understand",
    "start": "442980",
    "end": "448800"
  },
  {
    "text": "which one usually I just created because I happen to forget or where it falls",
    "start": "448800",
    "end": "453840"
  },
  {
    "text": "within all of the different user names groups and roles that I may be creating so in this case we're going to choose",
    "start": "453840",
    "end": "459840"
  },
  {
    "text": "management console access and like I",
    "start": "459840",
    "end": "465630"
  },
  {
    "text": "missed one there we're going to specify a custom password so that we can use it again and store that password obviously",
    "start": "465630",
    "end": "471390"
  },
  {
    "text": "someplace safe the next thing we're going to do is not",
    "start": "471390",
    "end": "477570"
  },
  {
    "text": "require that password to be reset by the user the next time they log in because we don't intend to login interactively",
    "start": "477570",
    "end": "483660"
  },
  {
    "text": "with this user it's strictly going to be used for the build process all right so",
    "start": "483660",
    "end": "492210"
  },
  {
    "text": "the next thing we're gonna do is set permissions and we're gonna do this by creating a group so we're gonna click create group we're gonna give it a name",
    "start": "492210",
    "end": "497490"
  },
  {
    "text": "again that describes where it belongs in our hierarchy of development tools and we're gonna give it administrator access",
    "start": "497490",
    "end": "503700"
  },
  {
    "text": "so throughout this presentation we are going to more or less finesse security by providing administrator access and",
    "start": "503700",
    "end": "510690"
  },
  {
    "text": "using trust relationships rather than providing long policy documents that",
    "start": "510690",
    "end": "516300"
  },
  {
    "text": "describe what you would have to do in your specific scenario and the reason for that is that they're really only relevant in this particular scenario",
    "start": "516300",
    "end": "523020"
  },
  {
    "text": "everybody's are going to be different the way that I found it easiest to learn",
    "start": "523020",
    "end": "528180"
  },
  {
    "text": "how to do this efficiently was to get the pipeline's working understand how the tools work together and then come",
    "start": "528180",
    "end": "534840"
  },
  {
    "text": "back and overlay security on top of that in the context of something that I was actually trying to do in a real environment alright so",
    "start": "534840",
    "end": "541769"
  },
  {
    "text": "we've provided administrator access we've created our group and we're gonna",
    "start": "541769",
    "end": "547470"
  },
  {
    "text": "go ahead and apply our user to that group and create the user and there it is great so the next thing we need to do",
    "start": "547470",
    "end": "553889"
  },
  {
    "text": "obviously is get ahold of the security credentials that we're gonna need later on to authorize these various tools to",
    "start": "553889",
    "end": "560249"
  },
  {
    "text": "do things on our behalf so I'm gonna click on that user again click on the credentials tab and I'm gonna copy both",
    "start": "560249",
    "end": "567059"
  },
  {
    "text": "my access key ID I'm gonna click this show and copy the secret key as well and",
    "start": "567059",
    "end": "572970"
  },
  {
    "text": "store those someplace safe like a random text file on my desktop and actually",
    "start": "572970",
    "end": "579149"
  },
  {
    "text": "don't ever do that use a password manager or something that's going to be a little more secure and here's why this",
    "start": "579149",
    "end": "584819"
  },
  {
    "text": "is a simulated bill that happens when you share your access keys and for God's",
    "start": "584819",
    "end": "590850"
  },
  {
    "text": "sake don't upload them together this is a terrible terrible thing to do as my",
    "start": "590850",
    "end": "596549"
  },
  {
    "text": "friend not me found out okay so the next thing we're",
    "start": "596549",
    "end": "601829"
  },
  {
    "start": "600000",
    "end": "600000"
  },
  {
    "text": "going to do is create a role so what's a role a group is a collection of users that you can also use to manage",
    "start": "601829",
    "end": "606929"
  },
  {
    "text": "permissions a role is a collection of policies which describe permissions or",
    "start": "606929",
    "end": "612779"
  },
  {
    "text": "defined permissions but roles are different in that various services can assume those roles to do things on your",
    "start": "612779",
    "end": "617819"
  },
  {
    "text": "behalf so we're going to create an administrative or an admin role and then we're going to leverage that throughout",
    "start": "617819",
    "end": "623189"
  },
  {
    "text": "the rest of this process to provide access to the various tools that are going to be doing things for us so we're",
    "start": "623189",
    "end": "629009"
  },
  {
    "text": "gonna go back into I am we're gonna select roles we're gonna create a role it asks you to select a trusted service",
    "start": "629009",
    "end": "635990"
  },
  {
    "text": "we'll be adding to this later but for now we'll just select lamda we're gonna provide full access to lamda as well as",
    "start": "635990",
    "end": "643139"
  },
  {
    "text": "full access to Amazon s3 and cloud watch and these will all be relevant later as",
    "start": "643139",
    "end": "649829"
  },
  {
    "text": "we move through this process but it's more efficient in my opinion to do this in the beginning if you know what you",
    "start": "649829",
    "end": "655350"
  },
  {
    "text": "need alright so we've got our role we're gonna review it and we see that we've got our full access to the three",
    "start": "655350",
    "end": "660689"
  },
  {
    "text": "services our trust relationship go ahead and create the wall great so the next",
    "start": "660689",
    "end": "666029"
  },
  {
    "start": "666000",
    "end": "666000"
  },
  {
    "text": "thing that we're gonna do oh I guess I should mention what this application does so it's a simple application there's",
    "start": "666029",
    "end": "672600"
  },
  {
    "text": "example of this all over the web the idea is it's an image resizer so we've got a little micro service which like a",
    "start": "672600",
    "end": "677850"
  },
  {
    "text": "good micro service does one and one thing only and does it very well it's going to respond to an event in an s3",
    "start": "677850",
    "end": "683400"
  },
  {
    "text": "bucket somebody drops an image an event will be fired the micro Service picks the image up and resizes it according to",
    "start": "683400",
    "end": "689310"
  },
  {
    "text": "parameters they're hard-coded spits it out to another bucket the essence of simplicity but first we have to create",
    "start": "689310",
    "end": "694440"
  },
  {
    "text": "that infrastructure so we're gonna create the bucket we're gonna give it a name and then we're gonna repeat that process using whatever name we just",
    "start": "694440",
    "end": "701490"
  },
  {
    "text": "chose with - resized as the suffix alright so we've got our buckets now",
    "start": "701490",
    "end": "708240"
  },
  {
    "text": "we're gonna give it something to work on later on when we actually test this code so we're gonna click on our source bucket github lambda demo pix we're",
    "start": "708240",
    "end": "715620"
  },
  {
    "text": "gonna upload a file that I just happen to have lying around and put it into our",
    "start": "715620",
    "end": "721800"
  },
  {
    "text": "source bucket and this file by the way is a giant bunch of octo cats the point",
    "start": "721800",
    "end": "726900"
  },
  {
    "text": "is that it's much larger than 100 by 100 pixels which is what we've configured our resize microservice - we knit on the",
    "start": "726900",
    "end": "734010"
  },
  {
    "text": "other end ok so now it's time to",
    "start": "734010",
    "end": "742230"
  },
  {
    "start": "735000",
    "end": "735000"
  },
  {
    "text": "actually create a lambda function so back to the console back to lambda we're",
    "start": "742230",
    "end": "747570"
  },
  {
    "text": "gonna choose create function and this UI seems to change about once a week which is great because amazon is obviously",
    "start": "747570",
    "end": "753150"
  },
  {
    "text": "making improvements constantly so my apologies if this is a week or two out-of-date they provide you with a",
    "start": "753150",
    "end": "758790"
  },
  {
    "text": "pretty good catalog of templates if you want to start off using one of their templates but in this case because what",
    "start": "758790",
    "end": "764520"
  },
  {
    "text": "we're doing is so incredibly simple we're simply going to author from scratch so we're gonna give it a name",
    "start": "764520",
    "end": "770010"
  },
  {
    "text": "that's descriptive we're going to choose an existing role under which this",
    "start": "770010",
    "end": "775590"
  },
  {
    "text": "function will operate which is the admin role that we just created and then we're going to create the function and that's",
    "start": "775590",
    "end": "780870"
  },
  {
    "text": "all there is to it so right off the bat Amazon's gonna create a lambda function that will run without any intervention",
    "start": "780870",
    "end": "786780"
  },
  {
    "text": "from our part so we can see that the code is actually coming from that little editor down there that's what edit code",
    "start": "786780",
    "end": "792150"
  },
  {
    "text": "inline means we're using the node.js 6.10 runtime which was the most recent",
    "start": "792150",
    "end": "797760"
  },
  {
    "text": "node runtime that was supported and we're letting lambda know that the code needs to call is the",
    "start": "797760",
    "end": "803279"
  },
  {
    "text": "handler export so in this case exports dot handler we're gonna again make sure",
    "start": "803279",
    "end": "810089"
  },
  {
    "text": "that our github lamb-lamb the admin role is the one that's actually executing this function tweak the memory up to",
    "start": "810089",
    "end": "815129"
  },
  {
    "text": "about a gigabyte just in case somebody uploads a large image and during",
    "start": "815129",
    "end": "820740"
  },
  {
    "text": "development a longer time out makes more sense you don't want things to be timing out while you're trying to debug right",
    "start": "820740",
    "end": "826230"
  },
  {
    "text": "so go ahead and set the timeout to the maximum which is 300 seconds okay so now",
    "start": "826230",
    "end": "832170"
  },
  {
    "text": "before we actually save and move on in the next step we'll just do a simple test to make sure that all this plumbing is correct so we'll click on save and",
    "start": "832170",
    "end": "838980"
  },
  {
    "text": "test which will save our function and take us to the to the test utility and",
    "start": "838980",
    "end": "844649"
  },
  {
    "text": "this is really cool we'll see this later on they provide you with a large number of templates that you can use to emit events to fire your function but in this",
    "start": "844649",
    "end": "851579"
  },
  {
    "text": "case we're just going to send it a few parameters I'm gonna give it a name we're gonna create this particular test",
    "start": "851579",
    "end": "857160"
  },
  {
    "text": "configuration we're gonna click test and of course it all magically works because it was created by Amazon we actually",
    "start": "857160",
    "end": "862800"
  },
  {
    "text": "haven't done a thing so cool so we're done with our lambda function we're ready to move on to the next phase of",
    "start": "862800",
    "end": "868379"
  },
  {
    "text": "the operation which is linking this lambda function to our source s3 bucket",
    "start": "868379",
    "end": "874290"
  },
  {
    "start": "869000",
    "end": "869000"
  },
  {
    "text": "bucket and the way we do that again is we click on the triggers tab and then click add trigger this little UI will",
    "start": "874290",
    "end": "881309"
  },
  {
    "text": "come up which took me a while to figure out but if you put your mouse into that little dotted line box this helpful list",
    "start": "881309",
    "end": "887759"
  },
  {
    "text": "of services will appear scroll down to the service you want which on our case is s3 specify the event you want which",
    "start": "887759",
    "end": "895050"
  },
  {
    "text": "in this case is anytime anybody creates anything in this bucket let our lambda function know and submit",
    "start": "895050",
    "end": "901259"
  },
  {
    "text": "and you've got your event so now we have a fully configured lambda function that's going to be triggered when anybody drops something into our source",
    "start": "901259",
    "end": "908490"
  },
  {
    "text": "bucket fabulous okay so the next step is we're gonna move back to our development machine we're going to configure our",
    "start": "908490",
    "end": "913860"
  },
  {
    "start": "910000",
    "end": "910000"
  },
  {
    "text": "command-line interface there are tools out there that require you to include your secret key and your access key and",
    "start": "913860",
    "end": "921899"
  },
  {
    "text": "one of their configuration files and this frankly is how stuff gets uploaded to github in other places where it",
    "start": "921899",
    "end": "926939"
  },
  {
    "text": "shouldn't be that's why we're using grunt grunt integrates with the AWS CLI very nicely and the AWS CLI only",
    "start": "926939",
    "end": "934290"
  },
  {
    "text": "requires you to configure it where you actually use so it asks you for questions provide four answers including the region that",
    "start": "934290",
    "end": "940959"
  },
  {
    "text": "you're going to use wherever you might be as well as your security credentials and that's all there is to it you're good to go and if you're wondering it",
    "start": "940959",
    "end": "947290"
  },
  {
    "text": "stores these and a hidden directory in your home directory called AWS in a file called credentials so it's very easy to",
    "start": "947290",
    "end": "954730"
  },
  {
    "text": "find very easy to backup and also very easy to delete if you need to start over for whatever reason all right so here's",
    "start": "954730",
    "end": "961540"
  },
  {
    "start": "960000",
    "end": "960000"
  },
  {
    "text": "the code that we're gonna start off with that's actually in github and if anybody's interested later on this is a",
    "start": "961540",
    "end": "967690"
  },
  {
    "text": "public repository if it's not let me know I intended for it could be public go ahead and take a look at it any time",
    "start": "967690",
    "end": "973330"
  },
  {
    "text": "if you want but we're gonna clone this in the way that we all know and love we're going to clone it into our",
    "start": "973330",
    "end": "980350"
  },
  {
    "text": "development environment we're gonna switch to that directory run npm install because it's a node project and now",
    "start": "980350",
    "end": "986890"
  },
  {
    "text": "we're good to go we're ready to start developing so let's take a look at package.json the three things that",
    "start": "986890",
    "end": "992740"
  },
  {
    "start": "989000",
    "end": "989000"
  },
  {
    "text": "really matter from the AWS deployment point of view are that we have grunt that we have the",
    "start": "992740",
    "end": "998470"
  },
  {
    "text": "grunt AWS lamb to plugin and that we have the AWS sdk in our dependencies the",
    "start": "998470",
    "end": "1004950"
  },
  {
    "text": "rest of the stuff obviously is going to vary depending on what your function is doing but those three are necessary for this particular deployment strategy to",
    "start": "1004950",
    "end": "1011130"
  },
  {
    "text": "work so here's our new index j s we",
    "start": "1011130",
    "end": "1018990"
  },
  {
    "start": "1015000",
    "end": "1015000"
  },
  {
    "text": "still have the export dot handler function which takes the same arguments doesn't really matter what's going on in",
    "start": "1018990",
    "end": "1025140"
  },
  {
    "text": "there it's basically using that image magic library to resize an image but part that is sort of interesting are",
    "start": "1025140",
    "end": "1031260"
  },
  {
    "text": "these parameters up here we can change these parameters very easily run through the deployment pipeline again take a",
    "start": "1031260",
    "end": "1036329"
  },
  {
    "text": "look at the output and tell right away if not only is our code working but is our deployment pipeline working and is",
    "start": "1036329",
    "end": "1042329"
  },
  {
    "text": "the code that's being deployed actually the code that that we want to see okay",
    "start": "1042329",
    "end": "1048809"
  },
  {
    "text": "so the next thing that we need if we want to unit test this from our desktop we need an s3 event that we can feed to",
    "start": "1048809",
    "end": "1056700"
  },
  {
    "text": "our lambda function to see what happens so again we're gonna return to the lambda interface in the AWS console",
    "start": "1056700",
    "end": "1063270"
  },
  {
    "text": "we're gonna go to configure test events but this time we're actually going to select the s3 put event",
    "start": "1063270",
    "end": "1070290"
  },
  {
    "text": "it's gonna generate all of this lovely JSON which is in fact the payload that our lambda function is going to get",
    "start": "1070290",
    "end": "1075900"
  },
  {
    "text": "every time somebody drops something into this particular budget which is great because that means we don't have to type",
    "start": "1075900",
    "end": "1080910"
  },
  {
    "text": "all that so we'll just go ahead and copy it we're gonna create a file inside of our project called event dot JSON it has to be that name",
    "start": "1080910",
    "end": "1088760"
  },
  {
    "text": "we're gonna save that file and now we're ready to go to test before you do though",
    "start": "1088760",
    "end": "1094950"
  },
  {
    "text": "just make sure of a couple of things that the source bucket name is correct whatever you configured make sure that",
    "start": "1094950",
    "end": "1100740"
  },
  {
    "text": "the Arn or the Amazon resource name for that particular bucket is correct and then just double check that the file",
    "start": "1100740",
    "end": "1107430"
  },
  {
    "text": "name is correct they usually are but you never know alright so the next thing we're going to",
    "start": "1107430",
    "end": "1112530"
  },
  {
    "start": "1111000",
    "end": "1111000"
  },
  {
    "text": "do is we're going to use grunt and the lambda underscore invoke task which will use that event a JSON file feed it to",
    "start": "1112530",
    "end": "1120060"
  },
  {
    "text": "our function and then we'll see what happens so it'll generate all of this output and what we're looking for really at the end",
    "start": "1120060",
    "end": "1125520"
  },
  {
    "text": "is this it worked and then if we want to we can actually go out to our",
    "start": "1125520",
    "end": "1132200"
  },
  {
    "text": "destination bucket we can look inside the first good sign there's a file in there with the right name and the second",
    "start": "1132200",
    "end": "1139440"
  },
  {
    "text": "good sign of course is that it's very small so our function has worked our test has worked we're making progress ok",
    "start": "1139440",
    "end": "1146610"
  },
  {
    "start": "1146000",
    "end": "1146000"
  },
  {
    "text": "so the next thing that we're going to do is we're going to use grunt lambda underscore package to take all of our",
    "start": "1146610",
    "end": "1152280"
  },
  {
    "text": "code and compress it into a zip file put it into a specific location and prepare",
    "start": "1152280",
    "end": "1157620"
  },
  {
    "text": "it for deployment to lambda and the way that we do that is simply to execute grunt lambda underscore package and the",
    "start": "1157620",
    "end": "1164670"
  },
  {
    "text": "thing to bear in mind is where by default this code goes it goes into a directory and your source tree called",
    "start": "1164670",
    "end": "1169800"
  },
  {
    "text": "dist with a name which is basically your project name underscore latest dot zip",
    "start": "1169800",
    "end": "1175260"
  },
  {
    "text": "we're going to need to know this later when we configure Jenkins okay so we've tested we've packaged we're ready to",
    "start": "1175260",
    "end": "1182100"
  },
  {
    "start": "1178000",
    "end": "1178000"
  },
  {
    "text": "actually deploy from the command line so let's go ahead and do that one thing that we need to make sure of inside of",
    "start": "1182100",
    "end": "1188550"
  },
  {
    "text": "our grunt file is that we have the Arn for our function correctly specified and",
    "start": "1188550",
    "end": "1193920"
  },
  {
    "text": "then of course the deployed function that I'm using in this case just concatenates together the existing",
    "start": "1193920",
    "end": "1198990"
  },
  {
    "text": "package and deploy grunt tasks so let's go ahead and run that it's going to do its it's gonna package it's gonna deploy if",
    "start": "1198990",
    "end": "1207000"
  },
  {
    "text": "you're fortunate everything is gonna work you're not gonna get any errors we haven't made any changes to configuration so let's go and see and an",
    "start": "1207000",
    "end": "1213840"
  },
  {
    "text": "easy way to tell is look the code is been updated in the last 30 seconds so things look good if you want to use them",
    "start": "1213840",
    "end": "1219690"
  },
  {
    "text": "go ahead and run a test you can't actually look at the code because now instead of being edited in line and that",
    "start": "1219690",
    "end": "1225180"
  },
  {
    "text": "little editor it is sourced from a zip file somewhere off an s3 and you can't actually edit the code anymore in the",
    "start": "1225180",
    "end": "1232020"
  },
  {
    "text": "lambda editor okay so if you want to you can change those default dimensions that",
    "start": "1232020",
    "end": "1237540"
  },
  {
    "start": "1234000",
    "end": "1234000"
  },
  {
    "text": "I mentioned before to something else and retest it's just a good way to go okay so we've built the function we've",
    "start": "1237540",
    "end": "1245040"
  },
  {
    "text": "created our AWS infrastructure we have tested it on our desktop we've done our unit testing we verified that everything",
    "start": "1245040",
    "end": "1251520"
  },
  {
    "text": "works the way we think it should with our deployment tool which is grunt so now it's time to set up Jenkins to do",
    "start": "1251520",
    "end": "1257670"
  },
  {
    "text": "all this for us automatically all right so Jenkins folks familiar with",
    "start": "1257670",
    "end": "1263820"
  },
  {
    "start": "1261000",
    "end": "1261000"
  },
  {
    "text": "Jenkins out there so a lot of people complain about Jenkins I like it when they do that there's two kinds of",
    "start": "1263820",
    "end": "1271190"
  },
  {
    "text": "continuous integration tools the ones everyone complains about and the ones no-one uses so Dinkins is what it is but",
    "start": "1271190",
    "end": "1279900"
  },
  {
    "text": "it's out there and it more or less works so the first thing we want to do when we come in is we're gonna manage Jenkins so",
    "start": "1279900",
    "end": "1285930"
  },
  {
    "text": "we'll click on the manage Jenkins menu item and then we're gonna click on the",
    "start": "1285930",
    "end": "1291470"
  },
  {
    "text": "configure system item which is at the very top I'm sorry the manage plugins item in the middle there use the filter",
    "start": "1291800",
    "end": "1299070"
  },
  {
    "start": "1297000",
    "end": "1297000"
  },
  {
    "text": "at the top on the available tab to find the node.js plug-in and select it and if",
    "start": "1299070",
    "end": "1304680"
  },
  {
    "text": "you want to you can install that right away hopefully you'll get a success and then repeat the process for the AWS",
    "start": "1304680",
    "end": "1310490"
  },
  {
    "start": "1308000",
    "end": "1308000"
  },
  {
    "text": "lambda plug-in so at the end of the day you're gonna have two plugins installed",
    "start": "1310490",
    "end": "1315560"
  },
  {
    "text": "successfully and we're ready to go so the next thing we need to do is actually configure the node.js plugin so in this",
    "start": "1315560",
    "end": "1322680"
  },
  {
    "start": "1318000",
    "end": "1318000"
  },
  {
    "text": "case we are going to click global tool configuration we're gonna scroll down to",
    "start": "1322680",
    "end": "1327930"
  },
  {
    "text": "the node.js section give it a name in this case 6.10 define which runtime we",
    "start": "1327930",
    "end": "1335040"
  },
  {
    "text": "want to use which again is 6.10 whether or not you want to install any packages globally so I installed grunt",
    "start": "1335040",
    "end": "1341410"
  },
  {
    "text": "globally you don't have to do that but any packages you think might be useful on a global basis you can specify there",
    "start": "1341410",
    "end": "1347050"
  },
  {
    "text": "and then let Jenkins now how often or how frequently it should reach back out to refresh those packages okay so now",
    "start": "1347050",
    "end": "1355870"
  },
  {
    "start": "1354000",
    "end": "1354000"
  },
  {
    "text": "our Jenkins server is configured and it's ready to go the next thing to do is to tell it what to do with our code so",
    "start": "1355870",
    "end": "1361300"
  },
  {
    "text": "we're gonna create a build project and we do that again on the home screen by clicking on new item we specify a name",
    "start": "1361300",
    "end": "1367000"
  },
  {
    "text": "again if it's descriptive of what you're doing that's helpful and select the freestyle project this is the simplest",
    "start": "1367000",
    "end": "1372850"
  },
  {
    "text": "and the most flexible way to get Jenkins to do stuff for you go ahead and click OK and begin configuring so we are doing",
    "start": "1372850",
    "end": "1380800"
  },
  {
    "text": "a github project so the first thing we're gonna do is enter the URL to our repository and don't forget the dot git",
    "start": "1380800",
    "end": "1388060"
  },
  {
    "text": "it's very frustrating because it won't work if you forget the dot good the next thing that we're going to do is provide",
    "start": "1388060",
    "end": "1393790"
  },
  {
    "text": "credentials so you don't have to do this if you're using github comm and you're",
    "start": "1393790",
    "end": "1398800"
  },
  {
    "text": "using a public repository any other instance if using github enterprise or a private repository on github comm you're",
    "start": "1398800",
    "end": "1405580"
  },
  {
    "text": "gonna need to supply print credentials so I go ahead and just do it anyway sort of out of habit alright in the next",
    "start": "1405580",
    "end": "1412990"
  },
  {
    "text": "section under build triggers we want to select the github hook trigger for git SCM polling which is a complicated way",
    "start": "1412990",
    "end": "1419470"
  },
  {
    "text": "of saying let github let Jenkins now when something has changed and the",
    "start": "1419470",
    "end": "1424690"
  },
  {
    "text": "reason for this is the other choice which is to pull github is a great way eventually if there's more than a few",
    "start": "1424690",
    "end": "1430750"
  },
  {
    "text": "people working in your system to eventually DDoS your entire github installation if you're on enterprise or",
    "start": "1430750",
    "end": "1437530"
  },
  {
    "text": "get yourself rate limited if you're on github comm because every single one of these jobs will continually be pinging",
    "start": "1437530",
    "end": "1443440"
  },
  {
    "text": "your repository did you change did you change did you change and that's just a bad practice all the way around so live an",
    "start": "1443440",
    "end": "1450220"
  },
  {
    "text": "event-driven life and that certainly applies to to Jenkins ok so moving on the next section what do we want this",
    "start": "1450220",
    "end": "1457090"
  },
  {
    "text": "thing to do when we build and you can add any number of build steps the first",
    "start": "1457090",
    "end": "1462280"
  },
  {
    "text": "thing we're gonna add is just a simple shell execute shell we're gonna give it some commands I always like on Jenkins",
    "start": "1462280",
    "end": "1467860"
  },
  {
    "text": "because I may or may not manage this environment I include some debugging information what version of node is running what",
    "start": "1467860",
    "end": "1473950"
  },
  {
    "text": "version of NPM is running what version of the AWS CLI is running so in my output I'll always see those you may",
    "start": "1473950",
    "end": "1479830"
  },
  {
    "text": "want to include also some commands to get more context around AWS like the I",
    "start": "1479830",
    "end": "1486490"
  },
  {
    "text": "am good user command is a useful one next we're gonna run NPM install just to",
    "start": "1486490",
    "end": "1492490"
  },
  {
    "text": "make sure that our environment is up-to-date and then again the grunt lambda package tasks from our grunt file",
    "start": "1492490",
    "end": "1498640"
  },
  {
    "text": "we're not going to run deploy because we're gonna use the AWS lambda plug-in to do that in a later step okay and then",
    "start": "1498640",
    "end": "1507010"
  },
  {
    "text": "if we have configured webhooks we can set the status of the build to pending so the github knows what's happening and",
    "start": "1507010",
    "end": "1513460"
  },
  {
    "text": "then the very last thing we're gonna do is set an AWS lambda deployment so it",
    "start": "1513460",
    "end": "1518860"
  },
  {
    "text": "wants all of these parameters you have to provide them including your AWS login",
    "start": "1518860",
    "end": "1524769"
  },
  {
    "text": "credentials so you have to make a decision at this point do I trust Jenkins and more importantly do I trust whoever it is in my organization that's",
    "start": "1524769",
    "end": "1530889"
  },
  {
    "text": "running Jenkins because without them obviously it won't work otherwise you're specifying the Arn for your role that",
    "start": "1530889",
    "end": "1536200"
  },
  {
    "text": "you created and down there under artifact location is why it's important to know where grunt lambda package",
    "start": "1536200",
    "end": "1542889"
  },
  {
    "text": "actually puts those artifacts as a final",
    "start": "1542889",
    "end": "1549190"
  },
  {
    "text": "step if you want to test you can select grunt lambda I'm sorry aww s lambda invocation which will actually test fire",
    "start": "1549190",
    "end": "1555970"
  },
  {
    "text": "your function you provide most of the same parameters including your security credentials that s3 payload that we",
    "start": "1555970",
    "end": "1562179"
  },
  {
    "text": "copied from the lambda test environment and you're good to go that'll be the last thing that's run so lastly again if",
    "start": "1562179",
    "end": "1568269"
  },
  {
    "text": "we want feedback to return to github after all of this we use the set github",
    "start": "1568269",
    "end": "1573610"
  },
  {
    "text": "commit status and provides basically the defaults and that will drive that pull",
    "start": "1573610",
    "end": "1579730"
  },
  {
    "text": "request behavior that we looked at earlier all right so we're good to go our project is good click on build now",
    "start": "1579730",
    "end": "1585490"
  },
  {
    "start": "1582000",
    "end": "1582000"
  },
  {
    "text": "you'll see the barber pole it'll take it some amount of time depending on the strength of your machine and the number",
    "start": "1585490",
    "end": "1591639"
  },
  {
    "text": "of jobs that are running but eventually and usually on the first time you'll see success which is indicated by that",
    "start": "1591639",
    "end": "1597789"
  },
  {
    "text": "little blue ball if you click on the build you can see your output again which tells you everything that happened",
    "start": "1597789",
    "end": "1603370"
  },
  {
    "text": "we is nice when things go well but it's very useful when things go wrong so common things to go wrong are",
    "start": "1603370",
    "end": "1609910"
  },
  {
    "text": "misspellings in your configuration files or permissions problems with trying to do the deployment to Amazon eBay they're",
    "start": "1609910",
    "end": "1616360"
  },
  {
    "text": "gotten your credentials wrong or you've specified a role that doesn't have adequate permissions to do whatever you're asking it to do and you'll see",
    "start": "1616360",
    "end": "1622870"
  },
  {
    "text": "useful feedback here to help you debug those problems and then we head over to lamda and we see that Jenkins and did",
    "start": "1622870",
    "end": "1629310"
  },
  {
    "text": "indeed did exactly what we asked it to do and that our code was freshly updated we can execute the test again if you",
    "start": "1629310",
    "end": "1635170"
  },
  {
    "start": "1634000",
    "end": "1634000"
  },
  {
    "text": "want to do that just to be sure all right so lastly let's talk about how we set up this feedback loop with github",
    "start": "1635170",
    "end": "1642010"
  },
  {
    "text": "so we're back in our repository we're gonna click on integrations and services and then from the menu from the add",
    "start": "1642010",
    "end": "1649060"
  },
  {
    "text": "service menu we're gonna use the filter to filter it down to Jenkins and select Jenkins with the github plugin and then",
    "start": "1649060",
    "end": "1656530"
  },
  {
    "text": "only have to do at this point is enter the webhook URL and it takes this form",
    "start": "1656530",
    "end": "1661720"
  },
  {
    "text": "so wherever your Jenkins is github webhook do remember the trailing slash it's very important all right so we've",
    "start": "1661720",
    "end": "1669070"
  },
  {
    "text": "got our service integration set up and our web hooks set up click on test service it'll send a test payload and if",
    "start": "1669070",
    "end": "1676870"
  },
  {
    "text": "you see the little green arrow then you're in good shape check-ins this set up to do what you want it to do all right that's it that's",
    "start": "1676870",
    "end": "1682750"
  },
  {
    "text": "all you have to do to use Jenkins and again this will work from github Enterprise if you're in an on-prem environment and it will also work from",
    "start": "1682750",
    "end": "1688780"
  },
  {
    "text": "github comm so moving forward we can talk about how we could use different branch filters to take different actions",
    "start": "1688780",
    "end": "1694870"
  },
  {
    "text": "depending on where you're actually pushing we talked a little bit about pull requests and protected branches there's a lot more territory to cover",
    "start": "1694870",
    "end": "1701020"
  },
  {
    "text": "there both in terms of driving continuous integration and other automation as well as securing your code",
    "start": "1701020",
    "end": "1706060"
  },
  {
    "text": "code review whether you want to be open source and of course ultimately collaborating with your community however you choose to define that all",
    "start": "1706060",
    "end": "1713920"
  },
  {
    "text": "right so let's move on to the next step we're gonna do basically the same thing but this time we're going to use AWS code pipeline so code pipeline is",
    "start": "1713920",
    "end": "1722110"
  },
  {
    "text": "basically a configurable continuous integration workflow engine that allows you to link together tasks to do useful",
    "start": "1722110",
    "end": "1728290"
  },
  {
    "text": "things with your code it integrates a number of AWS services and vacuu nearly all of them are available through code",
    "start": "1728290",
    "end": "1734440"
  },
  {
    "text": "pipeline it's very flexible flexible and it allows you to both do test and deploy lambda functions and",
    "start": "1734440",
    "end": "1741050"
  },
  {
    "text": "other services from a single pane of glass so in our case our first aid is",
    "start": "1741050",
    "end": "1746480"
  },
  {
    "text": "going to be sourced we're going to retrieve the code in our case from github then we're going to build we're",
    "start": "1746480",
    "end": "1751550"
  },
  {
    "text": "going to build the code the same way that we did before but using a different tool set we're gonna be using code build and then we're gonna stage that code by",
    "start": "1751550",
    "end": "1758660"
  },
  {
    "text": "creating an Amazon jame set and then we're gonna deploy that chain set by executing it all right so the tools that",
    "start": "1758660",
    "end": "1766280"
  },
  {
    "text": "are available to you here are pretty varied you've got code commit you can use s3 or of course github is your",
    "start": "1766280",
    "end": "1771980"
  },
  {
    "text": "repository we've got four different courses for building including Jenkins that we just saw as well as AWS code",
    "start": "1771980",
    "end": "1777950"
  },
  {
    "text": "build which we'll be using and your deployment options are pretty wide open as well you can use code deploy if we're going to ec2 opsworks stacks or in our",
    "start": "1777950",
    "end": "1785510"
  },
  {
    "text": "case we're going to be using cloud formation so there's a few things you need to do if you want to move on",
    "start": "1785510",
    "end": "1791510"
  },
  {
    "text": "directly from where we just were AWS change sets don't like it when things",
    "start": "1791510",
    "end": "1798020"
  },
  {
    "text": "that they think they're manage already exist so delete all your AWS artifacts",
    "start": "1798020",
    "end": "1803150"
  },
  {
    "text": "that you just created if you want to use the same names delete or disable your webhook so then you don't have jenkins",
    "start": "1803150",
    "end": "1808430"
  },
  {
    "text": "under the covers interfering with us create another s3 bucket called github lam to build that's we're gonna put our",
    "start": "1808430",
    "end": "1814130"
  },
  {
    "text": "artifacts in this case and then add the cloud formation and code pipeline trust relationships to the github lambda admin",
    "start": "1814130",
    "end": "1821510"
  },
  {
    "start": "1821000",
    "end": "1821000"
  },
  {
    "text": "role so a little bit about debugging code pipeline this was my experience in",
    "start": "1821510",
    "end": "1826760"
  },
  {
    "text": "a way it's not always permissions but in my experience it's always permissions so when things go wrong look at your trust",
    "start": "1826760",
    "end": "1834050"
  },
  {
    "text": "relationships look at the permissions that you've granted and if all else goes wrong back things out use administrator",
    "start": "1834050",
    "end": "1839750"
  },
  {
    "text": "access make sure that your pipeline itself works and then remove administrator access and start layering",
    "start": "1839750",
    "end": "1845450"
  },
  {
    "text": "in the permissions that you think you need until things work the way that you think they should so how do we add trust",
    "start": "1845450",
    "end": "1853070"
  },
  {
    "start": "1849000",
    "end": "1849000"
  },
  {
    "text": "relationships we go back into our role in I am we click the edit trust relationship button there's already one",
    "start": "1853070",
    "end": "1859220"
  },
  {
    "text": "there for lambda so we'll just copy and paste that twice changing the service each time to code pipeline and cloud",
    "start": "1859220",
    "end": "1865580"
  },
  {
    "text": "formation all right so there's two new build files we're no longer going to be using grunt we're using code build to build our",
    "start": "1865580",
    "end": "1872470"
  },
  {
    "text": "function in this case and that relies on two files the first of which is called build spec dot llamo you can use JSON",
    "start": "1872470",
    "end": "1878920"
  },
  {
    "text": "but yeah Mel's cool because you can comment stuff and the guts of this really are in the middle the install",
    "start": "1878920",
    "end": "1885040"
  },
  {
    "text": "phase there's actually six phases that are supported by code build but in our case we're just gonna use one so we're",
    "start": "1885040",
    "end": "1890350"
  },
  {
    "text": "going to run npm install again to make sure that our environment is up-to-date and then we're gonna run the cloud formation package command we're going to",
    "start": "1890350",
    "end": "1897610"
  },
  {
    "text": "be using a template file which we'll look at in a bit called template gamal we're gonna put the code in that bucket",
    "start": "1897610",
    "end": "1902679"
  },
  {
    "text": "that we just created github demo build and we're going to send all of this output to a new",
    "start": "1902679",
    "end": "1908170"
  },
  {
    "text": "template called Newsom template fatty ammo and that's really all there is to it as a zip so the second file is where",
    "start": "1908170",
    "end": "1915850"
  },
  {
    "text": "the fun really starts this is template dot Yama which is part of the server list framework that is that Amazon",
    "start": "1915850",
    "end": "1921010"
  },
  {
    "text": "released relatively recently and it's a bunch of different parts so the first part here we're defining resources and",
    "start": "1921010",
    "end": "1927610"
  },
  {
    "text": "we have to define these resources in a specific order because we're going to modify them later on in the process so",
    "start": "1927610",
    "end": "1934030"
  },
  {
    "text": "the first thing we're going to do is create our image bucket and a policy that defines access to that bucket the",
    "start": "1934030",
    "end": "1939520"
  },
  {
    "text": "second thing that we're gonna do is basically the same thing but for our target bucket our resized bucket in this",
    "start": "1939520",
    "end": "1945070"
  },
  {
    "text": "case and then the last thing we're gonna do is define our function so the",
    "start": "1945070",
    "end": "1950980"
  },
  {
    "text": "important parts of this are the configuration elements that define our runtime our memory our timeout the name",
    "start": "1950980",
    "end": "1957130"
  },
  {
    "text": "of our function as well as the AR end of the arn for the role that's going to actually execute this function that's",
    "start": "1957130",
    "end": "1962559"
  },
  {
    "text": "incorrect that should be our admin role that we created earlier so underneath that we have the permissions for our",
    "start": "1962559",
    "end": "1970440"
  },
  {
    "text": "function and then the last thing we're gonna do is we're actually gonna add the",
    "start": "1970440",
    "end": "1976720"
  },
  {
    "text": "event and this is why this has to come at the end because if you put this anywhere else it doesn't work because",
    "start": "1976720",
    "end": "1982420"
  },
  {
    "text": "the bucket itself that we're trying to modify doesn't exist so the order in this file actually has significance but",
    "start": "1982420",
    "end": "1988840"
  },
  {
    "text": "in this case we're going to attach the object created event to that bucket so that everything works the way that it",
    "start": "1988840",
    "end": "1994210"
  },
  {
    "text": "did when we first started alright so we're gonna hit code pipeline inside of the AWS console and we're gonna start by",
    "start": "1994210",
    "end": "2000990"
  },
  {
    "text": "giving it a name and again my name in conventional could stand out in the list the first",
    "start": "2000990",
    "end": "2006270"
  },
  {
    "start": "2006000",
    "end": "2006000"
  },
  {
    "text": "thing we do is configure source we select github from the drop-down of potential options and then we have to",
    "start": "2006270",
    "end": "2013020"
  },
  {
    "text": "connect to github and the way that you do this is hit that button if you aren't already logged in it will ask you to log",
    "start": "2013020",
    "end": "2019290"
  },
  {
    "text": "in and then it'll helpfully tell you what permissions you're granting so again make the decision consciously that",
    "start": "2019290",
    "end": "2024570"
  },
  {
    "text": "you trust Amazon to be able to do pretty much anything it wants with your repositories and this is an either-or",
    "start": "2024570",
    "end": "2031020"
  },
  {
    "text": "decision if you don't feel comfortable with this you can't really use this approach but if you do hit the green button and and on we go and the last",
    "start": "2031020",
    "end": "2038520"
  },
  {
    "text": "thing we do at this step is D select the default option which is to run whenever",
    "start": "2038520",
    "end": "2044970"
  },
  {
    "text": "changes in the source are detected and what this means is that now Amazon will be pulling your repositories as well so",
    "start": "2044970",
    "end": "2051510"
  },
  {
    "text": "deselect that okay the next step is the build step we're going to use code build",
    "start": "2051510",
    "end": "2056760"
  },
  {
    "start": "2054000",
    "end": "2054000"
  },
  {
    "text": "so we select that from the provider drop-down and we're gonna create a new build project when you get a couple of",
    "start": "2056760",
    "end": "2062580"
  },
  {
    "text": "these built you can in fact select an existing build project at this point and save yourself this step give it a name",
    "start": "2062580",
    "end": "2068760"
  },
  {
    "text": "fill out the parameters in our case we're going to use a Linux operating system running node it doesn't have a",
    "start": "2068760",
    "end": "2074908"
  },
  {
    "text": "6.10 option so we use the next best thing which is 7.0 and we are instructing it to use the build spec",
    "start": "2074909",
    "end": "2081810"
  },
  {
    "text": "gambol bits in the source code root directory you also have the option at this point of basically creating your",
    "start": "2081810",
    "end": "2086970"
  },
  {
    "text": "own build spec dynamic by entering commands in a dialogue box it needs a",
    "start": "2086970",
    "end": "2092429"
  },
  {
    "text": "role that it's going to assume to actually perform these functions so create a new role and give it again a",
    "start": "2092429",
    "end": "2097560"
  },
  {
    "text": "descriptive name and then move on to the to the next step we've created a build",
    "start": "2097560",
    "end": "2102600"
  },
  {
    "text": "project this project lives in AWS code build you can go look at it and edit it there if you want to click next step the",
    "start": "2102600",
    "end": "2109740"
  },
  {
    "start": "2109000",
    "end": "2109000"
  },
  {
    "text": "next step is deploy we're going to use cloud formation and what we're going to do is create will replace a change set",
    "start": "2109740",
    "end": "2116250"
  },
  {
    "text": "that's the action mode that we select give your stack name which the change set is going to create and the change",
    "start": "2116250",
    "end": "2121590"
  },
  {
    "text": "set itself distinctive names and then remember that the template is new Sam template that we defined in our build",
    "start": "2121590",
    "end": "2127680"
  },
  {
    "text": "spec yamo a few slides ago we want to use capability underscore I am because",
    "start": "2127680",
    "end": "2133320"
  },
  {
    "text": "we're not defining anything with respect to roles or the other things that we acquire capability named I am and then",
    "start": "2133320",
    "end": "2140940"
  },
  {
    "text": "what role is gonna handle all of this it's going to be the admin role that we created pipeline also requires a service",
    "start": "2140940",
    "end": "2148619"
  },
  {
    "text": "role to sort of manage all of these things at one time again because of our administrative permissions we can use our admin role review your steps and",
    "start": "2148619",
    "end": "2156599"
  },
  {
    "start": "2154000",
    "end": "2154000"
  },
  {
    "text": "create the pipeline and right off the bat it's going to run and right off the bat it's going to fail and the reason",
    "start": "2156599",
    "end": "2162270"
  },
  {
    "text": "for that is that the service role that we created doesn't have the authority to create anything so if you want to create",
    "start": "2162270",
    "end": "2169770"
  },
  {
    "text": "your s3 resources your s3 buckets then you need to add those permissions the",
    "start": "2169770",
    "end": "2175440"
  },
  {
    "text": "easiest way at this point is to add administrator privileges and then you can go back and use the iam policy",
    "start": "2175440",
    "end": "2180660"
  },
  {
    "text": "simulator if you like to add the actual specific permissions that that role needs go ahead and do that run it",
    "start": "2180660",
    "end": "2186900"
  },
  {
    "text": "through and test again and you'll see that everything hopefully succeeds all the way down alright the last thing we",
    "start": "2186900",
    "end": "2194039"
  },
  {
    "start": "2193000",
    "end": "2193000"
  },
  {
    "text": "need to do is add a deploy step this is going to take our change set that we've created and actually make things happen",
    "start": "2194039",
    "end": "2199950"
  },
  {
    "text": "in the physical world the virtual physical world of AWS so the way we do that is we go to our pipeline we click",
    "start": "2199950",
    "end": "2206369"
  },
  {
    "text": "Edit and then we move down to the staging phase and click on the little",
    "start": "2206369",
    "end": "2212309"
  },
  {
    "text": "pencil to edit that phase and then we click on this little box to add an action and the action that we're gonna",
    "start": "2212309",
    "end": "2218520"
  },
  {
    "text": "add obviously is a deploy category action give it a name in this case case",
    "start": "2218520",
    "end": "2224430"
  },
  {
    "text": "deploy change set and then we're gonna use cloud formation to do it what we're gonna do is specify it under action mode",
    "start": "2224430",
    "end": "2229980"
  },
  {
    "text": "that's execute the change set that we created in the last step so we just provide the names for the stack that we",
    "start": "2229980",
    "end": "2235770"
  },
  {
    "text": "want to create or modify and the change set that we want to use to do so and that's all we have to do we run this and",
    "start": "2235770",
    "end": "2243109"
  },
  {
    "text": "everything will magically work you can go ahead and test again however you like and things will be built all right so",
    "start": "2243109",
    "end": "2251099"
  },
  {
    "text": "we're making progress for about 2/3 of the way through we have now successfully with a few modifications taken the same",
    "start": "2251099",
    "end": "2258089"
  },
  {
    "text": "code base and deployed that using code pipeline so code star is kind of a cool new way of bringing together a bunch of",
    "start": "2258089",
    "end": "2265500"
  },
  {
    "text": "Amazon tools into a single location think of it as an integrated single pane of glass view of code pipeline cloud watch and",
    "start": "2265500",
    "end": "2272910"
  },
  {
    "text": "github and a bunch of other things all in a single location there's configurable tiles that you can move around it's got a pretty cool",
    "start": "2272910",
    "end": "2278819"
  },
  {
    "text": "wizard setup obviously it's integrated with github it's a great way to get started with AWS build tools if you're",
    "start": "2278819",
    "end": "2284730"
  },
  {
    "text": "not familiar with AWS build tools to build a code start project and then look",
    "start": "2284730",
    "end": "2289859"
  },
  {
    "text": "at all of the artifacts that it creates and how they relate together and that in and of itself will give you a pretty decent idea of how things actually work",
    "start": "2289859",
    "end": "2295760"
  },
  {
    "text": "so we'll just do a quick walk around here of code star so it comes with a and",
    "start": "2295760",
    "end": "2310319"
  },
  {
    "start": "2301000",
    "end": "2301000"
  },
  {
    "text": "integrated wiki then you can edit so you can sort of keep in touch with your extended team as they're accessing your",
    "start": "2310319",
    "end": "2315539"
  },
  {
    "text": "project it's also got direct integration with github so if I click on opening",
    "start": "2315539",
    "end": "2321930"
  },
  {
    "text": "github I can look at the repository that underlays this particular code star project and then switch back I've also",
    "start": "2321930",
    "end": "2328589"
  },
  {
    "text": "got whatever my deployment strategy through code pipeline is over there on the right I can click on Co pipeline go",
    "start": "2328589",
    "end": "2334529"
  },
  {
    "text": "directly there see what's going on make changes or release changes from there if I want we've got an integrated cloud wot",
    "start": "2334529",
    "end": "2341549"
  },
  {
    "text": "stack that's providing basic metrics around our lambda function and of course we can also create issues inside of",
    "start": "2341549",
    "end": "2349079"
  },
  {
    "text": "github so we'll go ahead and just create a random issue here and those issues are",
    "start": "2349079",
    "end": "2355440"
  },
  {
    "text": "going to be available in visible and you can interact with them from inside of code star so again it's a just a great",
    "start": "2355440",
    "end": "2362730"
  },
  {
    "text": "sort of single pane of glass view and of course any of these tiles are removable you can move them around and set them up",
    "start": "2362730",
    "end": "2369420"
  },
  {
    "text": "any way that you want so how do we get started so the first thing it's going to ask you is to create yet another service role and you have no choice you have to",
    "start": "2369420",
    "end": "2376019"
  },
  {
    "start": "2371000",
    "end": "2371000"
  },
  {
    "text": "do this or you can't use code star so go ahead and click yes create role then click on create a new project and on the",
    "start": "2376019",
    "end": "2383069"
  },
  {
    "text": "left hand side are a bunch of filters that you can use to narrow down the choice of templates that you want to use",
    "start": "2383069",
    "end": "2388500"
  },
  {
    "text": "so in this case we're going to run a web service using AWS lambda running service",
    "start": "2388500",
    "end": "2394079"
  },
  {
    "text": "so we'll click that we're gonna give our project a name and then we're gonna integrate with github by clicking on the",
    "start": "2394079",
    "end": "2399569"
  },
  {
    "text": "giant github icon we're gonna run through the same process of granting authorization give our repository a name and that's",
    "start": "2399569",
    "end": "2407820"
  },
  {
    "text": "all there is to it one thing you do have to select the option that will allow code start to modify AWS resources on",
    "start": "2407820",
    "end": "2415080"
  },
  {
    "text": "your behalf again if you don't do that you can't use code star alright now if we go so it's going to give you some",
    "start": "2415080",
    "end": "2420510"
  },
  {
    "text": "useful information about getting to your repository and then it will spend a few minutes building itself and once it's",
    "start": "2420510",
    "end": "2427470"
  },
  {
    "text": "done you can sort of clear up the interface here by closing those things and then we're ready to actually migrate",
    "start": "2427470",
    "end": "2433140"
  },
  {
    "text": "so one of the things that we have to do if you want that integrated stack to work correctly is change your lambda",
    "start": "2433140",
    "end": "2438930"
  },
  {
    "text": "function name in your configuration files to whatever your codes to our project spit out so we're gonna go to",
    "start": "2438930",
    "end": "2444510"
  },
  {
    "text": "lambda there's the function that co-starred is created we're gonna copy the name these are the other things you",
    "start": "2444510",
    "end": "2449970"
  },
  {
    "text": "need to do so clone your repository your new repository copy the code from your",
    "start": "2449970",
    "end": "2455280"
  },
  {
    "text": "old repository into your new repo change the name of the output file and we'll see how to do these all in detail in a",
    "start": "2455280",
    "end": "2461190"
  },
  {
    "text": "bit and build spec change the name of the function puts all that back up delete the code star generated stack",
    "start": "2461190",
    "end": "2467660"
  },
  {
    "text": "remove the parameters from the generate change set stage and then add the ability for the cloud formation worker",
    "start": "2467660",
    "end": "2473970"
  },
  {
    "text": "role to pass itself to the get up lambda admin role so how do we do this changes",
    "start": "2473970",
    "end": "2479730"
  },
  {
    "start": "2478000",
    "end": "2478000"
  },
  {
    "text": "to the template to build spec gamal we just changed the output template file",
    "start": "2479730",
    "end": "2485670"
  },
  {
    "text": "this is what code star generates by default and it's easier to just do it this way than to go try and change the",
    "start": "2485670",
    "end": "2491880"
  },
  {
    "text": "cloud formation template so we just change it to template - export dynamic moving on we change the function name to",
    "start": "2491880",
    "end": "2500520"
  },
  {
    "text": "whatever code star spits out and we're good to go we've now reconfigured our code pipeline and CloudFormation",
    "start": "2500520",
    "end": "2507060"
  },
  {
    "text": "template files to work the next thing we need to do is edit our pipeline go to our generate change set phase and remove",
    "start": "2507060",
    "end": "2513690"
  },
  {
    "text": "the parameters all they are as a project ID but they're not useful in our context so we'll get rid of them we delete the",
    "start": "2513690",
    "end": "2520020"
  },
  {
    "text": "stack that code starred generated forest in the first place and then the last",
    "start": "2520020",
    "end": "2525540"
  },
  {
    "text": "thing that we do is go to I am and add this particular capability to our to the",
    "start": "2525540",
    "end": "2532050"
  },
  {
    "text": "role that code star created to run cloud formation",
    "start": "2532050",
    "end": "2536240"
  },
  {
    "text": "so after we do all of those things we released the change little and it will",
    "start": "2537080",
    "end": "2542790"
  },
  {
    "start": "2542000",
    "end": "2542000"
  },
  {
    "text": "magically work so now we have our code migrated from a pure github Jenkins environment to a good pipeline",
    "start": "2542790",
    "end": "2548190"
  },
  {
    "text": "environment to a code star environment so when I was at the booth earlier today",
    "start": "2548190",
    "end": "2553770"
  },
  {
    "text": "a few people came up to me and asked how do we do this how do we work with github and lambda functions in the cloud and",
    "start": "2553770",
    "end": "2560130"
  },
  {
    "text": "hopefully this has been a useful sort of introduction to three ways that you can do that fairly straightforwardly now",
    "start": "2560130",
    "end": "2566040"
  },
  {
    "text": "obviously there are a million permutations on this and I'm sure everyone has different questions and",
    "start": "2566040",
    "end": "2572010"
  },
  {
    "text": "requirements and we at github are not just interested in talking to you we're",
    "start": "2572010",
    "end": "2577290"
  },
  {
    "text": "very interested in hearing from you about what you're doing the challenges that you're facing and what sorts of information you might find useful from",
    "start": "2577290",
    "end": "2583290"
  },
  {
    "text": "us so that the next time we meet we might be able to help you with those challenges and that's all I have for you",
    "start": "2583290",
    "end": "2588990"
  },
  {
    "text": "so thank you very much I appreciate it [Applause]",
    "start": "2588990",
    "end": "2596750"
  }
]