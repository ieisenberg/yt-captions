[
  {
    "start": "0",
    "end": "83000"
  },
  {
    "text": "good morning everyone happy Friday you know for most people if they need to",
    "start": "469",
    "end": "8010"
  },
  {
    "text": "learn a new skill or a new task something like how to fix the sink or how to learn a new language and you",
    "start": "8010",
    "end": "15210"
  },
  {
    "text": "present them with a choice I mean they're doing it with text based materials or a video most of them will",
    "start": "15210",
    "end": "22199"
  },
  {
    "text": "choose video and it's not surprising given that video with video you can visualize more complex information",
    "start": "22199",
    "end": "29000"
  },
  {
    "text": "there's motion as opposed to everything being static whether it's an image or text and so as a result videos being",
    "start": "29000",
    "end": "37140"
  },
  {
    "text": "used more and more for training for learning for corporate communications and yet most businesses don't use video",
    "start": "37140",
    "end": "44370"
  },
  {
    "text": "as much as they could or should and really the single biggest reason why that's the case is that traditionally",
    "start": "44370",
    "end": "51800"
  },
  {
    "text": "long-form video has been impossible to search the content within the video has",
    "start": "51800",
    "end": "57300"
  },
  {
    "text": "been impossible to search so that's what we're gonna be talking about today searching inside video and doing it at",
    "start": "57300",
    "end": "64650"
  },
  {
    "text": "massive scale without breaking the bank by using spot instances my name is Ari",
    "start": "64650",
    "end": "70740"
  },
  {
    "text": "beth horon and joining me today is Tim Sullivan our VP of engineering we work for a company called Panopto and we",
    "start": "70740",
    "end": "77670"
  },
  {
    "text": "build a video platform that among other things does video search all right so",
    "start": "77670",
    "end": "85650"
  },
  {
    "start": "83000",
    "end": "150000"
  },
  {
    "text": "specifically what do we cover over the next 40 to 45 minutes I'm gonna start off with a quick overview of video",
    "start": "85650",
    "end": "92579"
  },
  {
    "text": "search what does it mean when we say is searching inside a video what kind of content are we indexing and why is the",
    "start": "92579",
    "end": "99630"
  },
  {
    "text": "way that we do video search now substandard tim is then gonna dive into",
    "start": "99630",
    "end": "106920"
  },
  {
    "text": "our implementation and you know when we started doing videos search we had a number of different options for how we",
    "start": "106920",
    "end": "112829"
  },
  {
    "text": "could do it he's going to explain why we chose spot and some of the other options that we could have used will then",
    "start": "112829",
    "end": "121680"
  },
  {
    "text": "discuss our architecture and we use a combination of Windows and Linux Tim's",
    "start": "121680",
    "end": "127409"
  },
  {
    "text": "gonna talk about why we chose Windows for certain aspects and what we're getting out of that wise",
    "start": "127409",
    "end": "132860"
  },
  {
    "text": "important to our overall architecture and the last but not least we're gonna",
    "start": "132860",
    "end": "138470"
  },
  {
    "text": "share things that we've learned for using spot to scale up to scale down and",
    "start": "138470",
    "end": "143780"
  },
  {
    "text": "how to deal with some of the the considerations of working with spot",
    "start": "143780",
    "end": "150490"
  },
  {
    "start": "150000",
    "end": "192000"
  },
  {
    "text": "alright let's begin by just talking about an overview of video search we",
    "start": "150550",
    "end": "156410"
  },
  {
    "text": "refer to video as a last mile problem per search and the reason for that is that today video is really or multimedia",
    "start": "156410",
    "end": "164540"
  },
  {
    "text": "including video and audio is really the only data type that is still really really hard to search in under a second",
    "start": "164540",
    "end": "173690"
  },
  {
    "text": "you can search over 30 million webpages sorry 30 trillion web pages you can search email at documents you can search",
    "start": "173690",
    "end": "180950"
  },
  {
    "text": "what's longer your file system and yet the non-textual nature of video content",
    "start": "180950",
    "end": "187850"
  },
  {
    "text": "has traditionally made it really really hard to search now when I first started",
    "start": "187850",
    "end": "194600"
  },
  {
    "start": "192000",
    "end": "238000"
  },
  {
    "text": "working at Panopto one of the first questions I asked is will you know haven't YouTube already figured this out given that their parent company runs a",
    "start": "194600",
    "end": "201590"
  },
  {
    "text": "small boutique search engine and thank you thank you the jokes only get worse",
    "start": "201590",
    "end": "208299"
  },
  {
    "text": "but here's the thing with YouTube you might not necessarily need to search",
    "start": "208299",
    "end": "213860"
  },
  {
    "text": "inside video because the shorter the video the less valuable inside video search becomes so right now the average",
    "start": "213860",
    "end": "222799"
  },
  {
    "text": "YouTube video is about 4 minutes long so if you find a video and you need to find",
    "start": "222799",
    "end": "228200"
  },
  {
    "text": "something within that video and the video is only 4 minutes long chances are you're just gonna watch the entire video",
    "start": "228200",
    "end": "234340"
  },
  {
    "text": "worst case scenario you're out 4 minutes of your life but it's very very",
    "start": "234340",
    "end": "239600"
  },
  {
    "start": "238000",
    "end": "301000"
  },
  {
    "text": "different in the enterprise if you think about a lot of the videos that we use in",
    "start": "239600",
    "end": "244940"
  },
  {
    "text": "business today it's things like training videos compliance training its CEO town",
    "start": "244940",
    "end": "251299"
  },
  {
    "text": "hall events and right now in our cloud we host about 2 million of these videos",
    "start": "251299",
    "end": "257120"
  },
  {
    "text": "from both businesses and universities and most of those videos range somewhere",
    "start": "257120",
    "end": "262820"
  },
  {
    "text": "between 15 to 90 minutes long now when someone sends you a 60 minute",
    "start": "262820",
    "end": "269960"
  },
  {
    "text": "or a 90 minute video and they say here watch this chances are you don't need to watch the entire video you're just",
    "start": "269960",
    "end": "277130"
  },
  {
    "text": "looking for some segments within that video that has particular information that's valuable to you right that moment",
    "start": "277130",
    "end": "284230"
  },
  {
    "text": "so for these videos we want to start thinking of them less as these big monolithic opaque objects and more as a",
    "start": "284230",
    "end": "292790"
  },
  {
    "text": "series of segments of information that we can break out and immediately access through the use of search now the way",
    "start": "292790",
    "end": "303950"
  },
  {
    "start": "301000",
    "end": "405000"
  },
  {
    "text": "that we've traditionally done video search is through manually entered metadata so titles descriptions and tags",
    "start": "303950",
    "end": "311840"
  },
  {
    "text": "and there's always been a big emphasis on tagging videos but tags have three",
    "start": "311840",
    "end": "318200"
  },
  {
    "text": "fundamental flaws when it comes to searching video content first tags",
    "start": "318200",
    "end": "323450"
  },
  {
    "text": "require the user to think and take action and as a result it's not scalable a few years ago Microsoft built their",
    "start": "323450",
    "end": "331580"
  },
  {
    "text": "own internal sort of their own internal YouTube for employees to share",
    "start": "331580",
    "end": "336590"
  },
  {
    "text": "information with video and the biggest problem that they had with this was tagging people wouldn't tag their own",
    "start": "336590",
    "end": "343430"
  },
  {
    "text": "videos and so as a result Microsoft ended up bringing on a team of people whose sole job was to tag all the videos",
    "start": "343430",
    "end": "351530"
  },
  {
    "text": "that employees were uploaded so it's not scalable in that sense the other",
    "start": "351530",
    "end": "356870"
  },
  {
    "text": "challenge with tags is that even if you do a great job of tagging your videos even if you give a video let's say 10",
    "start": "356870",
    "end": "363020"
  },
  {
    "text": "tags there's still a very good chance that when someone searches for that video they won't find it and I'll",
    "start": "363020",
    "end": "369350"
  },
  {
    "text": "explain why in just a second I'll show you an example of that and then last but not least the third problem with tags is",
    "start": "369350",
    "end": "375590"
  },
  {
    "text": "that even if you've tagged the video properly and you're able to find the video you're finding the very first",
    "start": "375590",
    "end": "382760"
  },
  {
    "text": "second of the video you're finding the start of the video and that's not what we want for a 60 or 90 minute video we",
    "start": "382760",
    "end": "390710"
  },
  {
    "text": "want to find somewhere in that video timeline and tags don't allow you to do that all right so let's look at an",
    "start": "390710",
    "end": "398210"
  },
  {
    "text": "example of where tagging really good tagging Falls really short for finding a video let's use a CEO",
    "start": "398210",
    "end": "407660"
  },
  {
    "start": "405000",
    "end": "441000"
  },
  {
    "text": "town-hall event as an example and let's say that the town hall event is 45",
    "start": "407660",
    "end": "413270"
  },
  {
    "text": "minutes in length the CEO who easy on screen here is speaking at about 125",
    "start": "413270",
    "end": "420290"
  },
  {
    "text": "words per minute which is average speaking pace and so over the course of",
    "start": "420290",
    "end": "425780"
  },
  {
    "text": "that 45 minutes he's gonna say over 5,000 words now ideally we would tag",
    "start": "425780",
    "end": "433130"
  },
  {
    "text": "every single one of those words so that we could search for anything that the CEO that said and jump right to that",
    "start": "433130",
    "end": "439730"
  },
  {
    "text": "point the video but the truth is we don't need to tag every single word and",
    "start": "439730",
    "end": "446080"
  },
  {
    "start": "441000",
    "end": "476000"
  },
  {
    "text": "the reason is that a lot of words in the talk track don't have any value to",
    "start": "446080",
    "end": "451250"
  },
  {
    "text": "search so I've highlighted those on screen here words like the is and your",
    "start": "451250",
    "end": "457700"
  },
  {
    "text": "which those words don't have any value to search so on this slide right here",
    "start": "457700",
    "end": "464450"
  },
  {
    "text": "there are 125 words 124 words 62 of them have no value to search so exactly 50%",
    "start": "464450",
    "end": "471770"
  },
  {
    "text": "of the words here have no value to search we can throw them out so that",
    "start": "471770",
    "end": "477440"
  },
  {
    "start": "476000",
    "end": "506000"
  },
  {
    "text": "means in this 45 minute presentation over 5,000 words were spoken 50% of them",
    "start": "477440",
    "end": "484340"
  },
  {
    "text": "have no value that's the leaves over 2,800 words that",
    "start": "484340",
    "end": "489770"
  },
  {
    "text": "have value to search so even if you've done a great job of tagging your video",
    "start": "489770",
    "end": "494870"
  },
  {
    "text": "you've given your video 10 tags let's say you're only covering a fraction of a",
    "start": "494870",
    "end": "500720"
  },
  {
    "text": "percent of the valuable words that were covered in that video video search is",
    "start": "500720",
    "end": "508730"
  },
  {
    "start": "506000",
    "end": "546000"
  },
  {
    "text": "what we've been focused on app Panopto so what we do is we build a video specific content management system",
    "start": "508730",
    "end": "516140"
  },
  {
    "text": "that's hosted in the cloud and organizations use that as an internal",
    "start": "516140",
    "end": "521510"
  },
  {
    "text": "YouTube for all of their videos corporate communication training social",
    "start": "521510",
    "end": "526790"
  },
  {
    "text": "learning videos and then in higher education most of the videos hosted in our cloud are recorded lectures that",
    "start": "526790",
    "end": "533720"
  },
  {
    "text": "made available on-demand to students and what we wanted to do is make every one of those videos that an organization",
    "start": "533720",
    "end": "540529"
  },
  {
    "text": "uploaded searchable to the word anywhere within the video so the way that we did",
    "start": "540529",
    "end": "547850"
  },
  {
    "start": "546000",
    "end": "756000"
  },
  {
    "text": "that is we took a six point approach there are six types of content that we",
    "start": "547850",
    "end": "553759"
  },
  {
    "text": "index within every video that's uploaded the first is what we were already talking about we obviously have to index",
    "start": "553759",
    "end": "560629"
  },
  {
    "text": "the manually entered metadata the title the description and the tags we can also",
    "start": "560629",
    "end": "566779"
  },
  {
    "text": "index transcription so when you upload a video you can request automatic",
    "start": "566779",
    "end": "571850"
  },
  {
    "text": "captioning to be done by a human based service and this is often required for a d8 compliance so you get captions that",
    "start": "571850",
    "end": "579259"
  },
  {
    "text": "play over the video it's relatively easy to do because what we get is",
    "start": "579259",
    "end": "584290"
  },
  {
    "text": "time-stamped text back from a captioning provider but most people don't do",
    "start": "584290",
    "end": "591199"
  },
  {
    "text": "transcription because there's a cost associated with it it's it's a human based service so there's a relatively",
    "start": "591199",
    "end": "596420"
  },
  {
    "text": "high cost if you're uploading hundreds or thousands of hours of video in any given month so that's where things get",
    "start": "596420",
    "end": "604490"
  },
  {
    "text": "interesting one of the things that we do is we run an algorithm that performs speech recognition on the audio track of every",
    "start": "604490",
    "end": "612500"
  },
  {
    "text": "video that gets uploaded into the system and I'll show you a demo of how that works in a second but basically we've",
    "start": "612500",
    "end": "618019"
  },
  {
    "text": "tracked the audio the audio content we run the algorithm and we timestamp as many words as we can recognize",
    "start": "618019",
    "end": "624259"
  },
  {
    "text": "throughout the entire talk track there's another step here called optical",
    "start": "624259",
    "end": "629569"
  },
  {
    "text": "character recognition and this is particularly important in the enterprising and higher ed where videos",
    "start": "629569",
    "end": "636079"
  },
  {
    "text": "don't just consist of the the talking head the speaker they often include on-screen content as well so give me a",
    "start": "636079",
    "end": "643519"
  },
  {
    "text": "slide deck it could be an on screen demo and what we do with optical character recognition as we look at the on screen",
    "start": "643519",
    "end": "649939"
  },
  {
    "text": "content and we split it up into individual frames throughout the video each of those frames is an image that we",
    "start": "649939",
    "end": "657500"
  },
  {
    "text": "then run an algorithm on to identify anything that we believe to be text on that image and when we find text we add",
    "start": "657500",
    "end": "664819"
  },
  {
    "text": "it to the search index and timestamp it the last thing of the next last thing",
    "start": "664819",
    "end": "671510"
  },
  {
    "text": "that we do is slide extraction now when you do on-screen content recognition",
    "start": "671510",
    "end": "677030"
  },
  {
    "text": "when you do optical character recognition it has a very high accuracy rate so anything that shows up on your",
    "start": "677030",
    "end": "682640"
  },
  {
    "text": "screen should in theory be indexed however we get an added advantage when",
    "start": "682640",
    "end": "688340"
  },
  {
    "text": "someone is presenting from PowerPoint or from keynote if I'm doing a slide and",
    "start": "688340",
    "end": "693980"
  },
  {
    "text": "I'm presenting a slide as part of my presentation we can actually tap in to the object model of PowerPoint and",
    "start": "693980",
    "end": "700670"
  },
  {
    "text": "extract the text programmatically from every slide as well as the speaker notes",
    "start": "700670",
    "end": "706940"
  },
  {
    "text": "that are associated with every slide and add that to the search index so it's like optical character recognition it's",
    "start": "706940",
    "end": "713180"
  },
  {
    "text": "pulling information from the slide but you get a hundred percent accuracy because we're actually tapping into the",
    "start": "713180",
    "end": "719120"
  },
  {
    "text": "PowerPoint object model and then last but not least when you're watching a",
    "start": "719120",
    "end": "724490"
  },
  {
    "text": "video in our system as a viewer you can take notes that are time-stamped and",
    "start": "724490",
    "end": "730070"
  },
  {
    "text": "they're personal to you so anytime you go and watch a video if you're a student and you want to take notes on a topic",
    "start": "730070",
    "end": "736820"
  },
  {
    "text": "while the teacher is speaking you can take notes directly in the video player those notes are time-stamped they're",
    "start": "736820",
    "end": "742670"
  },
  {
    "text": "saved for your playback for future review and we index those notes as well",
    "start": "742670",
    "end": "747970"
  },
  {
    "text": "so this is the general approach that we take indexing the content associated",
    "start": "747970",
    "end": "753440"
  },
  {
    "text": "with the video and then within the video itself let me show you a quick demo of",
    "start": "753440",
    "end": "758780"
  },
  {
    "start": "756000",
    "end": "1001000"
  },
  {
    "text": "what I'm talking about here and we're gonna look at three different things",
    "start": "758780",
    "end": "763930"
  },
  {
    "text": "let me see here standby there we go",
    "start": "770279",
    "end": "776980"
  },
  {
    "text": "alright so this is one of our customers websites Henry Ford Medical Group and this is sort of a traditional view of",
    "start": "776980",
    "end": "784480"
  },
  {
    "text": "what a corporate YouTube would look like what I want to do is a search across the entire video library for declining",
    "start": "784480",
    "end": "793860"
  },
  {
    "text": "kidney function what we'll do is return",
    "start": "793860",
    "end": "802380"
  },
  {
    "text": "not only the videos we're declining kidney function is included but every",
    "start": "802380",
    "end": "807850"
  },
  {
    "text": "moment within that video where the word is either spoken or shown anywhere on",
    "start": "807850",
    "end": "813250"
  },
  {
    "text": "the screen so here 10 minutes and 14 seconds I'm gonna click on that link and",
    "start": "813250",
    "end": "818920"
  },
  {
    "text": "it'll take me right to that point in the video population what about the effect",
    "start": "818920",
    "end": "825970"
  },
  {
    "text": "of declining kidney function on the prevalence of sleep apnea in lecture so you're heard the speaker there is say",
    "start": "825970",
    "end": "831850"
  },
  {
    "text": "declining kidney function and I use this video because it's an example of how FAR's speech recognition has come in the",
    "start": "831850",
    "end": "838540"
  },
  {
    "text": "last few years the audio quality is good but it's not great the speaker is",
    "start": "838540",
    "end": "844000"
  },
  {
    "text": "talking relatively quickly and they're speaking with an accent and so this is our technology has come a long way in a",
    "start": "844000",
    "end": "850870"
  },
  {
    "text": "really short period of time and it's made these kind of advanced as possible now let's look at an example of slide",
    "start": "850870",
    "end": "858220"
  },
  {
    "text": "extraction looking at the text within every slide that's being presented and extracting that for indexing I'm gonna",
    "start": "858220",
    "end": "865569"
  },
  {
    "text": "search for interoperable yeah occasion",
    "start": "865569",
    "end": "875100"
  },
  {
    "text": "and you'll see in the search results here we've identified interoperable",
    "start": "875100",
    "end": "880240"
  },
  {
    "text": "communication or variations of it in the talk tract if I scroll down a little bit",
    "start": "880240",
    "end": "886329"
  },
  {
    "text": "further here we see an example where we've identified it on a given slide and so when I click there and we look at",
    "start": "886329",
    "end": "893829"
  },
  {
    "text": "what's on screen we've extracted interoperable communication from this point in the slide and you'll notice",
    "start": "893829",
    "end": "900069"
  },
  {
    "text": "what's interesting about this is that it recognizes that the words are connected even though there's a line break between them and the last but not",
    "start": "900069",
    "end": "909700"
  },
  {
    "text": "least let's look an optical character recognition with our OCR engine what we do is a couple of different things one",
    "start": "909700",
    "end": "916029"
  },
  {
    "text": "of the things we do is we test how small the font can be on the screen and still be recognized so for this video what we",
    "start": "916029",
    "end": "923320"
  },
  {
    "text": "did is we had a series of phrases on screen and over time to get smaller and",
    "start": "923320",
    "end": "928930"
  },
  {
    "text": "smaller and smaller and so a little search for here network architecture and",
    "start": "928930",
    "end": "937920"
  },
  {
    "text": "at 1 minute and 40 seconds what you're looking at here is the word passive",
    "start": "937920",
    "end": "944140"
  },
  {
    "text": "network architecture it's an eight point plant on a 1920 by 1080 screen and so",
    "start": "944140",
    "end": "950019"
  },
  {
    "text": "the optical character recognition is incredibly accurate in terms of being able to recognize text the last thing",
    "start": "950019",
    "end": "957010"
  },
  {
    "text": "that I'll show you here is contrast ratio we want to make sure that if text appears on the screen and the contrast",
    "start": "957010",
    "end": "963790"
  },
  {
    "text": "ratio is an ideal we can still recognize those words and so here I'm gonna search",
    "start": "963790",
    "end": "969220"
  },
  {
    "text": "for HTTP communication and at 1 minute and 10 seconds what you can see right",
    "start": "969220",
    "end": "976180"
  },
  {
    "text": "here HTTP communication and in this case the contrast ratio is 1.7 and if you",
    "start": "976180",
    "end": "983890"
  },
  {
    "text": "look at the web content content accessibility guidelines the it's below",
    "start": "983890",
    "end": "989709"
  },
  {
    "text": "that so the content accessibility guidelines require a contrast ratio of",
    "start": "989709",
    "end": "994750"
  },
  {
    "text": "2.0 we wanted to make sure that we could do even better than that so that's a really quick overview of what we think",
    "start": "994750",
    "end": "1002490"
  },
  {
    "start": "1001000",
    "end": "1154000"
  },
  {
    "text": "of when we're talking about video search and some of the challenges the way that we approach those within our product now",
    "start": "1002490",
    "end": "1009990"
  },
  {
    "text": "let me hand things over to Tim Sullivan and Tim is gonna drill into how we decided to use font in the first place",
    "start": "1009990",
    "end": "1015570"
  },
  {
    "text": "and then some of the best practices that we've learned over the last couple of years thanks Ari so way back in 2009 we",
    "start": "1015570",
    "end": "1028740"
  },
  {
    "text": "aspired to be a rapidly growing company",
    "start": "1028740",
    "end": "1034168"
  },
  {
    "text": "we were quite quite small at the time what we thought let's let's set ourselves up for success so we actually",
    "start": "1034169",
    "end": "1039629"
  },
  {
    "text": "started on AWS way back then and lo and behold we found ourselves some success",
    "start": "1039629",
    "end": "1045480"
  },
  {
    "text": "we've been growing exponentially since then so back in 2009 we'd see you know",
    "start": "1045480",
    "end": "1050700"
  },
  {
    "text": "50 hours of content get uploaded to our cloud and we'd all run around the room and give ourselves you know give",
    "start": "1050700",
    "end": "1055769"
  },
  {
    "text": "high-fives to each other we were all really excited about that and now in a single month we're",
    "start": "1055769",
    "end": "1061590"
  },
  {
    "text": "uploading 15 years of content over 130,000 hours of content a single month four hundred terabytes added to our",
    "start": "1061590",
    "end": "1068369"
  },
  {
    "text": "content store and so there's been all kinds of really fun challenges in figuring out how to make our service",
    "start": "1068369",
    "end": "1074519"
  },
  {
    "text": "scale to that degree the new challenge that we had with inside video search is how do we take this incredibly compute",
    "start": "1074519",
    "end": "1083129"
  },
  {
    "text": "intensive set of activities to apply to every video and do that in a way that's",
    "start": "1083129",
    "end": "1088559"
  },
  {
    "text": "cost-effective so the first thing that we considered was using on-demand",
    "start": "1088559",
    "end": "1094350"
  },
  {
    "text": "instances we had been using on-demand instances for the majority of our cloud and we were kind of cruising along we",
    "start": "1094350",
    "end": "1101789"
  },
  {
    "text": "were within our budget and we modelled it out what happens if we flip on ASR and OCR and we were going to blow right",
    "start": "1101789",
    "end": "1110009"
  },
  {
    "text": "through our budget so this was a total non-starter for us we it was going to be cost prohibitive to offer the new",
    "start": "1110009",
    "end": "1116820"
  },
  {
    "text": "service to all our customers and I was really frustrated so we had this amazing demo we had this great prototype and we",
    "start": "1116820",
    "end": "1123659"
  },
  {
    "text": "thought well what good is it going to do us if we can't actually give it to people so we thought well maybe we can",
    "start": "1123659",
    "end": "1130710"
  },
  {
    "text": "just ask people to pay more for it we could cover our costs and hope you'll",
    "start": "1130710",
    "end": "1136889"
  },
  {
    "text": "pay more if they want to opt in but Panopto does all of this and our brand",
    "start": "1136889",
    "end": "1143850"
  },
  {
    "text": "promise is you pay one price and you get everything it's really simple so this broke our brand promise it broke",
    "start": "1143850",
    "end": "1151470"
  },
  {
    "text": "our business model and so is a non-starter then we considered maybe we",
    "start": "1151470",
    "end": "1157080"
  },
  {
    "start": "1154000",
    "end": "1257000"
  },
  {
    "text": "can use reserved instances so reserved instances for those aren't familiar our mechanism that Amazon gives you to make",
    "start": "1157080",
    "end": "1165480"
  },
  {
    "text": "a commitment up front to and instance 24 hours a day seven days a",
    "start": "1165480",
    "end": "1170550"
  },
  {
    "text": "week year-round or some percentage of that and in exchange you get to pay a lower",
    "start": "1170550",
    "end": "1177000"
  },
  {
    "text": "rate so in this case you can save you know 30 40 percent by doing this these",
    "start": "1177000",
    "end": "1183270"
  },
  {
    "text": "work really really well for predictable workloads we use them for our core databases we use them for our search",
    "start": "1183270",
    "end": "1190350"
  },
  {
    "text": "index servers things that we need to run all the time but they really don't work",
    "start": "1190350",
    "end": "1196020"
  },
  {
    "text": "well if you have a spiky demand curve and if you want to fit to a closed SLA now if you don't care about fitting to a",
    "start": "1196020",
    "end": "1203700"
  },
  {
    "text": "closed SLA reserved instances can still be a good option and we actually tried this for a little while just to be able",
    "start": "1203700",
    "end": "1211440"
  },
  {
    "text": "to play with putting a little bit more scale on the searching within within the",
    "start": "1211440",
    "end": "1217080"
  },
  {
    "text": "video services so in this case the horizontal line is the number of our",
    "start": "1217080",
    "end": "1224010"
  },
  {
    "text": "eyes you can choose to only run a number of instances for which you have prepaid",
    "start": "1224010",
    "end": "1229740"
  },
  {
    "text": "our eyes and what you find is that when",
    "start": "1229740",
    "end": "1234780"
  },
  {
    "text": "you get a spike of demand you end up with a delayed start to when you can",
    "start": "1234780",
    "end": "1239910"
  },
  {
    "text": "when you can begin processing those workloads and invariably there's still",
    "start": "1239910",
    "end": "1245040"
  },
  {
    "text": "some waste because you need to have a certain amount of spare capacity and so",
    "start": "1245040",
    "end": "1250560"
  },
  {
    "text": "when you're not actually making use of those instances you're still paying for them and there's waste and in our case",
    "start": "1250560",
    "end": "1257010"
  },
  {
    "start": "1257000",
    "end": "1307000"
  },
  {
    "text": "we wanted to have a really quick turnaround time so it was actually a",
    "start": "1257010",
    "end": "1262320"
  },
  {
    "text": "totally different scenario for us so in our case it's common for lots and lots",
    "start": "1262320",
    "end": "1268890"
  },
  {
    "text": "of hours of content to come in during the middle of the day especially when classes and if you're a school recording",
    "start": "1268890",
    "end": "1275820"
  },
  {
    "text": "classes you have classes to end at 9:00 o'clock classes and the ten o'clock classes and at eleven and you have",
    "start": "1275820",
    "end": "1281340"
  },
  {
    "text": "hundreds and hundreds of hours of content all getting uploaded at once we want to turn around that content really",
    "start": "1281340",
    "end": "1288450"
  },
  {
    "text": "rapidly and then in the middle of the night you've got very little going on so if you try to apply the reserved",
    "start": "1288450",
    "end": "1294090"
  },
  {
    "text": "instance model to this you end up often spending more money than you would otherwise because you're paying too",
    "start": "1294090",
    "end": "1300770"
  },
  {
    "text": "the reserved instances when you don't need them and you're paying to run on-demand instances on top of that so",
    "start": "1300770",
    "end": "1307730"
  },
  {
    "start": "1307000",
    "end": "1321000"
  },
  {
    "text": "that was a non-starter we did for a little while consider buying our own hardware but",
    "start": "1307730",
    "end": "1313610"
  },
  {
    "text": "we're all here at AWS we had been for a reason the total cost of ownership is a",
    "start": "1313610",
    "end": "1319010"
  },
  {
    "text": "total non-starter so let's dismiss dismiss that right away enter spot instances so spot instances",
    "start": "1319010",
    "end": "1326150"
  },
  {
    "start": "1321000",
    "end": "1349000"
  },
  {
    "text": "are an opportunity for all of us to buy excess capacity from Amazon at steeply",
    "start": "1326150",
    "end": "1333590"
  },
  {
    "text": "reduced prices so when ec2 has a whole bunch of instances that aren't otherwise",
    "start": "1333590",
    "end": "1339920"
  },
  {
    "text": "running and aren't being consumed by on-demand instances they make those",
    "start": "1339920",
    "end": "1345380"
  },
  {
    "text": "available in an auction market what's the difference between an on-demand",
    "start": "1345380",
    "end": "1351200"
  },
  {
    "start": "1349000",
    "end": "1376000"
  },
  {
    "text": "instance and a spot incidence there isn't any the instance itself is identical they can all run am eyes you",
    "start": "1351200",
    "end": "1359330"
  },
  {
    "text": "can give them static IP endpoints all the things you expect from an on-demand and since you can do with the spot",
    "start": "1359330",
    "end": "1364550"
  },
  {
    "text": "instance the only difference is in how you pay for them so on demand you're paying one price it's a fixed price you",
    "start": "1364550",
    "end": "1371600"
  },
  {
    "text": "know it up front spot you're paying a variable price you can set your maximum",
    "start": "1371600",
    "end": "1376730"
  },
  {
    "text": "price you're willing to pay but it's a variable price so net net we modeled out",
    "start": "1376730",
    "end": "1381740"
  },
  {
    "text": "how is our how is our spend going to look with spot and we found that we could actually hold the line totally",
    "start": "1381740",
    "end": "1388400"
  },
  {
    "text": "flat and open up all these new capabilities searching inside a video you might ask well you're still doing",
    "start": "1388400",
    "end": "1395660"
  },
  {
    "text": "more work why didn't the line trend up and that's because it turns out we can",
    "start": "1395660",
    "end": "1400760"
  },
  {
    "text": "run a whole bunch of compute that we were otherwise running on demand on spot as well so when a video gets uploaded we",
    "start": "1400760",
    "end": "1409070"
  },
  {
    "text": "encode it for distribution on the web we encode it for distribution to phone and",
    "start": "1409070",
    "end": "1414340"
  },
  {
    "text": "when somebody uploads a video in a different format we'll transcode it to our canonical format and we found that",
    "start": "1414340",
    "end": "1421070"
  },
  {
    "text": "we can run all of those very compute intensive activities on spot as well so we're actually doing more and spending",
    "start": "1421070",
    "end": "1428000"
  },
  {
    "text": "less let's talk a little bit about the mechanics of this spot off",
    "start": "1428000",
    "end": "1434390"
  },
  {
    "start": "1429000",
    "end": "1496000"
  },
  {
    "text": "so this is kind of a complicated graph what we're looking at is the market",
    "start": "1434390",
    "end": "1439850"
  },
  {
    "text": "price of the auction for a particular instance type across four different",
    "start": "1439850",
    "end": "1445180"
  },
  {
    "text": "availability zones within Virginia so each colored dot each color represents a",
    "start": "1445180",
    "end": "1451580"
  },
  {
    "text": "different availability zone and you can see there's a lot of variation over the course of the day from day to day and",
    "start": "1451580",
    "end": "1457850"
  },
  {
    "text": "even variation from availability zone to availability so the green line that's",
    "start": "1457850",
    "end": "1464300"
  },
  {
    "text": "the flat line across there represents an example bid price so the basic idea is",
    "start": "1464300",
    "end": "1470050"
  },
  {
    "text": "you bid what you're willing to spend if you bid more than the current market price you get instances if you bid less",
    "start": "1470050",
    "end": "1478040"
  },
  {
    "text": "then you don't get instances and in some cases if you have previously bid a price",
    "start": "1478040",
    "end": "1484700"
  },
  {
    "text": "and gotten an instance and the market price goes up and off Amazon can",
    "start": "1484700",
    "end": "1489740"
  },
  {
    "text": "actually revoke that instance back from you and sell it to somebody who's willing to pay more there are a few",
    "start": "1489740",
    "end": "1497990"
  },
  {
    "start": "1496000",
    "end": "1563000"
  },
  {
    "text": "considerations and if you're thinking about using spot the first one is is",
    "start": "1497990",
    "end": "1504590"
  },
  {
    "text": "your workload capable of sustaining the volatility that you're going to take on",
    "start": "1504590",
    "end": "1510170"
  },
  {
    "text": "sir clearly is when you look at those varying market prices and volatility",
    "start": "1510170",
    "end": "1515980"
  },
  {
    "text": "what happens if you want spot capacity and you can't get it you need to be able",
    "start": "1515980",
    "end": "1521180"
  },
  {
    "text": "to deal with that in some cases you can if your workload is one that can run on",
    "start": "1521180",
    "end": "1526520"
  },
  {
    "text": "a wide variety of different machines instead of just one one type you can",
    "start": "1526520",
    "end": "1531910"
  },
  {
    "text": "potentially use spot fleet which I'll talk in more detail about a little bit later and then the other thing to look",
    "start": "1531910",
    "end": "1538490"
  },
  {
    "text": "at is for the instance types that you use in the region's and what you run you",
    "start": "1538490",
    "end": "1544340"
  },
  {
    "text": "can look at the spot bid advisor and see the historical market prices and that'll",
    "start": "1544340",
    "end": "1549830"
  },
  {
    "text": "tell you if you actually stand to save money or not usually you stand this",
    "start": "1549830",
    "end": "1555380"
  },
  {
    "text": "button to save quite a lot of money let's talk a little bit more about the",
    "start": "1555380",
    "end": "1561020"
  },
  {
    "text": "architecture that we use to actually put this into play so the first thing to consider is",
    "start": "1561020",
    "end": "1567230"
  },
  {
    "start": "1563000",
    "end": "1610000"
  },
  {
    "text": "the fact that we use Windows to run our service you might say why on earth are",
    "start": "1567230",
    "end": "1572519"
  },
  {
    "text": "you using Windows to run a high scale video service almost everybody would naturally say let's run let's use Linux",
    "start": "1572519",
    "end": "1579269"
  },
  {
    "text": "for that and the reason we do is that we have a large number of customers that",
    "start": "1579269",
    "end": "1584490"
  },
  {
    "text": "for a variety of reasons want to run our service on Prem now we're a small lean",
    "start": "1584490",
    "end": "1590490"
  },
  {
    "text": "and agile team we don't have the capacity to sustain two separate code bases one for on-prem and one for cloud",
    "start": "1590490",
    "end": "1597570"
  },
  {
    "text": "so we have just a single codebase single service architecture we run it the same",
    "start": "1597570",
    "end": "1602669"
  },
  {
    "text": "way on premiere or in the cloud and that means it's really important to us that we run Windows in the club and for the",
    "start": "1602669",
    "end": "1608549"
  },
  {
    "text": "most part it works really well that's not true of everything there are a",
    "start": "1608549",
    "end": "1613799"
  },
  {
    "start": "1610000",
    "end": "1644000"
  },
  {
    "text": "number of cases where we choose to run Linux one of the reasons that we'll do that is for costs when you run a Windows",
    "start": "1613799",
    "end": "1620700"
  },
  {
    "text": "instance in AWS AWS has to presumably pay some licensing fees to Microsoft and",
    "start": "1620700",
    "end": "1626940"
  },
  {
    "text": "they have to pass that cost on belong to us so it's more expensive to run Windows and there's some software packages that",
    "start": "1626940",
    "end": "1633840"
  },
  {
    "text": "just work better on Linux or only available on Linux so we're a little bit selective and in cases where it makes",
    "start": "1633840",
    "end": "1639210"
  },
  {
    "text": "sense for us to run on Linux we do but the majority of our system runs on Windows now in the cloud we try to",
    "start": "1639210",
    "end": "1648419"
  },
  {
    "start": "1644000",
    "end": "1699000"
  },
  {
    "text": "follow the best practices of running a high scale high uptime service on AWS",
    "start": "1648419",
    "end": "1654539"
  },
  {
    "text": "and that means spreading our services across availability zones and making sure that we don't have single points of",
    "start": "1654539",
    "end": "1659879"
  },
  {
    "text": "failure so if a single machine goes down we've got other machines that can take",
    "start": "1659879",
    "end": "1665009"
  },
  {
    "text": "over for it if the whole availability zone goes down we have other availability zones that can pick up the",
    "start": "1665009",
    "end": "1671009"
  },
  {
    "text": "load and that make sure that we have service continuity even in the case of major problems now in this case if you",
    "start": "1671009",
    "end": "1679080"
  },
  {
    "text": "look at the diagram there's these green bars that scale out so we make use of all the auto scaling functionality",
    "start": "1679080",
    "end": "1687360"
  },
  {
    "text": "within AWS so that we can turn on and turn off things like video encoding servers Search Indexing servers and our",
    "start": "1687360",
    "end": "1694919"
  },
  {
    "text": "web front end servers based on load let's look at how we actually put that",
    "start": "1694919",
    "end": "1701809"
  },
  {
    "start": "1699000",
    "end": "1736000"
  },
  {
    "text": "into play with auto-scaling groups so the yellow line here represents in the abstract the demand on our services so",
    "start": "1701809",
    "end": "1709419"
  },
  {
    "text": "over the course of the day we might get a big spike of demand a big spike of uploads from our from our clients and we",
    "start": "1709419",
    "end": "1718100"
  },
  {
    "text": "need to handle that so the blue line represents the number of instances actually running within an auto scaling",
    "start": "1718100",
    "end": "1723710"
  },
  {
    "text": "group and so the blue line will closely follow the yellow line and make sure",
    "start": "1723710",
    "end": "1731090"
  },
  {
    "text": "that we have sufficient capacity to handle all of those jobs we've found a",
    "start": "1731090",
    "end": "1738710"
  },
  {
    "start": "1736000",
    "end": "1786000"
  },
  {
    "text": "lot of utility out of using CloudFormation to define and configure our auto scaling groups and really the",
    "start": "1738710",
    "end": "1745580"
  },
  {
    "text": "majority of our cloud the beauty of cloud formation is that you can specify all of your config in code you can check",
    "start": "1745580",
    "end": "1752929"
  },
  {
    "text": "that in code into your source control system and you can very easily monitor",
    "start": "1752929",
    "end": "1758779"
  },
  {
    "text": "for changes and have good close review of any changes you want to make and with",
    "start": "1758779",
    "end": "1766190"
  },
  {
    "text": "that you can define everything about how your auto scaling group runs what the",
    "start": "1766190",
    "end": "1771529"
  },
  {
    "text": "what instance is running within your auto scaling group what kind of which",
    "start": "1771529",
    "end": "1776840"
  },
  {
    "text": "machine image it should run and what are the rules that determines when to scale up and when to scale down all that can",
    "start": "1776840",
    "end": "1783019"
  },
  {
    "text": "be determined and defined in code what",
    "start": "1783019",
    "end": "1789019"
  },
  {
    "start": "1786000",
    "end": "1837000"
  },
  {
    "text": "about specifying how to use spot versus on-demand code well this is an example",
    "start": "1789019",
    "end": "1795379"
  },
  {
    "text": "of the launch config for an auto scaling group so an auto scaling group is just a collection of instances you can pump",
    "start": "1795379",
    "end": "1802490"
  },
  {
    "text": "metrics and until it to scale up or scale down and the launch config defines what instance and what machine image",
    "start": "1802490",
    "end": "1810200"
  },
  {
    "text": "should be launched and run as part of that auto scaling group if you look",
    "start": "1810200",
    "end": "1816320"
  },
  {
    "text": "between what's on the left and what's on the right very little has to change to move from an on-demand instance to a",
    "start": "1816320",
    "end": "1823429"
  },
  {
    "text": "spot instance basically just have to tell the launch get big this is supposed to be spot and then you have to specify",
    "start": "1823429",
    "end": "1830690"
  },
  {
    "text": "the spot so the spot price is that bid price that we talked about so how do you determine",
    "start": "1830690",
    "end": "1839360"
  },
  {
    "text": "what your bid price should be we looked at that really complicated graph and when we were trying to set this up",
    "start": "1839360",
    "end": "1846650"
  },
  {
    "text": "initially we looked at that and we started modeling out all kinds of numbers and looking at all kinds of",
    "start": "1846650",
    "end": "1852320"
  },
  {
    "text": "historical data and we were a little bit befuddled how are we going to bid and",
    "start": "1852320",
    "end": "1857330"
  },
  {
    "text": "have our have our bids accurately change throughout the day so that we can make",
    "start": "1857330",
    "end": "1862370"
  },
  {
    "text": "sure that we gets about capacity and we don't over overspend but when we talked to the architects today WS about this",
    "start": "1862370",
    "end": "1869420"
  },
  {
    "text": "and we looked at things really carefully we realized since spot is a second price",
    "start": "1869420",
    "end": "1875510"
  },
  {
    "text": "auction we can use a really really simple model if we just bid the on",
    "start": "1875510",
    "end": "1880940"
  },
  {
    "text": "demand price all the time it doesn't necessarily mean that we're going to pay",
    "start": "1880940",
    "end": "1886370"
  },
  {
    "text": "the on-demand price so in this case you've got the on-demand price is 84 cents so we're gonna bid 84 cents",
    "start": "1886370",
    "end": "1893320"
  },
  {
    "text": "anytime the market price is less than 84 cents we're going to pay at the market price so we're not gonna overspend we're",
    "start": "1893320",
    "end": "1901010"
  },
  {
    "text": "just going to be assured of saving money in all the cases that we're able to so",
    "start": "1901010",
    "end": "1909710"
  },
  {
    "start": "1908000",
    "end": "1964000"
  },
  {
    "text": "really simple right but there are some challenges to running on spot one of the things we talked about earlier what is",
    "start": "1909710",
    "end": "1916250"
  },
  {
    "text": "what happens how do you how do you deal with cases where Amazon is going to revoke the instance from you because the",
    "start": "1916250",
    "end": "1922850"
  },
  {
    "text": "market price has gone too high that's especially challenging when you have very long-running jobs so in in Panopto",
    "start": "1922850",
    "end": "1930860"
  },
  {
    "text": "case we're going to be doing things like video encoding which is the job that might take a half hour or an hour or an",
    "start": "1930860",
    "end": "1937700"
  },
  {
    "text": "hour and a half in some cases similarly if we're going to go and run optical character recognition and all",
    "start": "1937700",
    "end": "1944210"
  },
  {
    "text": "the frames of an hour-long video that's gonna take us quite a lot and the longer you have an instance running the higher",
    "start": "1944210",
    "end": "1950420"
  },
  {
    "text": "the chance it's going to be revoked from you you have to have some way of dealing with this Amazon gives you a little bit",
    "start": "1950420",
    "end": "1956300"
  },
  {
    "text": "of warning they'll give you two minutes of warning if you're gonna have an instance revoked and you've got to be",
    "start": "1956300",
    "end": "1961370"
  },
  {
    "text": "able to handle that so what do you do in our case we came up with this small",
    "start": "1961370",
    "end": "1967620"
  },
  {
    "start": "1964000",
    "end": "2029000"
  },
  {
    "text": "service that we call spotter that runs on the instance so when the market price",
    "start": "1967620",
    "end": "1973770"
  },
  {
    "text": "goes too high amazon sends us a message and says you're going to lose this machine the spotter service listens to",
    "start": "1973770",
    "end": "1981420"
  },
  {
    "text": "that message and it tries to determine is the job that's already running going to finish before we lose that machine if",
    "start": "1981420",
    "end": "1989520"
  },
  {
    "text": "so great there's nothing to do but what happens if it isn't going to finish well",
    "start": "1989520",
    "end": "1995700"
  },
  {
    "text": "in that case you've got some choices to make and it really depends on your workload the ideal is to be able to",
    "start": "1995700",
    "end": "2001970"
  },
  {
    "text": "quickly save all of your state so that your job can be resumed and you don't loose any work save your state put it",
    "start": "2001970",
    "end": "2010010"
  },
  {
    "text": "back in the queue in fact put it at the top of the queue so it gets picked back up immediately and then start over in",
    "start": "2010010",
    "end": "2015260"
  },
  {
    "text": "the worst case you should at least gracefully cancel the job and stick it",
    "start": "2015260",
    "end": "2020330"
  },
  {
    "text": "up at the top of the queue so maybe you lose a little bit of work but at least there's a minimal amount of delay how do",
    "start": "2020330",
    "end": "2030530"
  },
  {
    "start": "2029000",
    "end": "2136000"
  },
  {
    "text": "we determine when it's time to turn new machines on we saw that demand curve and",
    "start": "2030530",
    "end": "2035929"
  },
  {
    "text": "we saw the instance curve in the auto auto scaling group side how do we determine when to turn things on it's",
    "start": "2035929",
    "end": "2043040"
  },
  {
    "text": "actually kind of a hard problem there are all sorts of inputs to consider one of them is well how much work is there",
    "start": "2043040",
    "end": "2049850"
  },
  {
    "text": "to do how many new jobs are there waiting to be worked on but there's",
    "start": "2049850",
    "end": "2056118"
  },
  {
    "text": "other considerations too like how many machines are currently running how many of those are currently working on jobs",
    "start": "2056119",
    "end": "2062138"
  },
  {
    "text": "how long is it going to take them to finish the jobs that they're currently working on and how long is it going to",
    "start": "2062139",
    "end": "2068330"
  },
  {
    "text": "take you to spin up a new machine if you do need to turn on a new machine to handle the the additional jobs maybe you",
    "start": "2068330",
    "end": "2076100"
  },
  {
    "text": "also need to take into account how long do you have to turn this job around what's the expectation of customers to",
    "start": "2076100",
    "end": "2082878"
  },
  {
    "text": "get this the results of this job turned around now we started doing some fairly",
    "start": "2082879",
    "end": "2089868"
  },
  {
    "text": "naive approach to this initially and we found that we had some really interesting oscillations that emerged",
    "start": "2089869",
    "end": "2096000"
  },
  {
    "text": "this we weren't taking into account the time it takes to spin up a new machine so we'd see a whole slew of new jobs",
    "start": "2096000",
    "end": "2103290"
  },
  {
    "text": "arrive we would scale up to handle those new jobs and in the case of some of our",
    "start": "2103290",
    "end": "2110190"
  },
  {
    "text": "Windows servers we're seeing a 5 to 7 minute delay between when we say let's",
    "start": "2110190",
    "end": "2115470"
  },
  {
    "text": "turn on a new machine and when that machine is up and running and actually doing useful work and in a lot of cases",
    "start": "2115470",
    "end": "2121650"
  },
  {
    "text": "the machines that we already had running finish their jobs and we're sitting",
    "start": "2121650",
    "end": "2126810"
  },
  {
    "text": "there waiting to hit actually already picked up the jobs that we had scaled up to handle by the time the new machines",
    "start": "2126810",
    "end": "2132870"
  },
  {
    "text": "came online so we were wasting money and then they would just scale back down so our solution to this problem was give it",
    "start": "2132870",
    "end": "2140520"
  },
  {
    "start": "2136000",
    "end": "2156000"
  },
  {
    "text": "to the very smart data scientist that we have back at the home office in Seattle and see what they could come up with they came up with some really great pure",
    "start": "2140520",
    "end": "2147780"
  },
  {
    "text": "istic that we found I've done a really really nice job at handling all of these inputs and doing and doing a good job",
    "start": "2147780",
    "end": "2154440"
  },
  {
    "text": "making sure that we scale up now how do we tell we've had a lot of utility out",
    "start": "2154440",
    "end": "2160050"
  },
  {
    "start": "2156000",
    "end": "2216000"
  },
  {
    "text": "of the cloud wash dashboards that were released I think about a year ago so we",
    "start": "2160050",
    "end": "2165960"
  },
  {
    "text": "build dashboards for each different job type if you look at that one at the top in the middle back-end OCR you can see",
    "start": "2165960",
    "end": "2174030"
  },
  {
    "text": "that we're modeling out how many machines are currently running and that",
    "start": "2174030",
    "end": "2179580"
  },
  {
    "text": "curve is going up with demand and going back down as demand eases we're modeling how many of the machines that are",
    "start": "2179580",
    "end": "2186510"
  },
  {
    "text": "running are doing useful work and we're modeling the queue so how many jobs are waiting and so it's really easy for our",
    "start": "2186510",
    "end": "2193980"
  },
  {
    "text": "team to go and look at this retro actively and say are we doing a good job are we not doing a good job you know is",
    "start": "2193980",
    "end": "2200190"
  },
  {
    "text": "the queue growing too large indicating we're not scaling up fast enough or do",
    "start": "2200190",
    "end": "2205470"
  },
  {
    "text": "we have cases where we've scaled up but many of the machines aren't actually doing anything useful in which case",
    "start": "2205470",
    "end": "2210600"
  },
  {
    "text": "you're wasting money so this has been a really great utility for us so we talked",
    "start": "2210600",
    "end": "2216450"
  },
  {
    "start": "2216000",
    "end": "2252000"
  },
  {
    "text": "about how to turn machines on what about when it's time to turn the machines off so all the scaling groups make it really",
    "start": "2216450",
    "end": "2222810"
  },
  {
    "text": "easy to turn the machines off you just say scale down and it'll turn the Machine off but it effectively picks a",
    "start": "2222810",
    "end": "2228780"
  },
  {
    "text": "trend or maybe it'll choose the longest-running machine but in our case",
    "start": "2228780",
    "end": "2234140"
  },
  {
    "text": "that's a really bad behavior because we have all of these variable running jobs and if you say scale down and Amazon",
    "start": "2234140",
    "end": "2242810"
  },
  {
    "text": "happens to choose a machine that's you know 60 minutes through a 90 minute task that's actually pretty terrible for us",
    "start": "2242810",
    "end": "2249290"
  },
  {
    "text": "so we built our own system for this the first thing we do is look at these active machines the ones actively doing",
    "start": "2249290",
    "end": "2256580"
  },
  {
    "start": "2252000",
    "end": "2299000"
  },
  {
    "text": "jobs and we make sure to exclude those from scale down but we didn't actually",
    "start": "2256580",
    "end": "2263240"
  },
  {
    "text": "want to choose from just the other machines that we're currently running and not doing anything useful to scale",
    "start": "2263240",
    "end": "2268910"
  },
  {
    "text": "down willing to be a little bit more careful than that so when you think about how Amazon does billing they round",
    "start": "2268910",
    "end": "2275210"
  },
  {
    "text": "up to the next hour so if you run a machine for 10 minutes you pay for an hour and if you run a machine for an",
    "start": "2275210",
    "end": "2281630"
  },
  {
    "text": "hour and ten minutes you pay for two hours so we thought well why should we",
    "start": "2281630",
    "end": "2286730"
  },
  {
    "text": "turn a machine off if we've already paid for another 50 minutes of run time what",
    "start": "2286730",
    "end": "2291740"
  },
  {
    "text": "if a new a new job comes in if we had had that machine running it could just process it otherwise we're gonna have to",
    "start": "2291740",
    "end": "2298040"
  },
  {
    "text": "pay to turn yet another machine on so the rule of thumb we've come up with is never turn a machine off unless it's",
    "start": "2298040",
    "end": "2304610"
  },
  {
    "start": "2299000",
    "end": "2320000"
  },
  {
    "text": "within the last 15 minutes of its billing hour and we found that the api's make it really easy to go and find out",
    "start": "2304610",
    "end": "2311720"
  },
  {
    "text": "when is the billing hour actually up so it's just these four machines that are",
    "start": "2311720",
    "end": "2317570"
  },
  {
    "text": "viable for scale down let's talk about the challenge of spot having a lack of",
    "start": "2317570",
    "end": "2324710"
  },
  {
    "start": "2320000",
    "end": "2395000"
  },
  {
    "text": "spot capacity so normal operations everything's going along hunky-dory spot",
    "start": "2324710",
    "end": "2331340"
  },
  {
    "text": "scaling up it's scaling down we say let's turn on two more spot instances and it turns out that we can't get them",
    "start": "2331340",
    "end": "2338630"
  },
  {
    "text": "we get a signal from the API that says there's just not enough capacity and these machines aren't going to be turned",
    "start": "2338630",
    "end": "2345290"
  },
  {
    "text": "on so our solution to this problem is to run two parallel groups with identical",
    "start": "2345290",
    "end": "2351320"
  },
  {
    "text": "launch configs except for that spot difference one that only is the spot and one that only uses",
    "start": "2351320",
    "end": "2358100"
  },
  {
    "text": "on-demand now we can open up that on-demand capacity when we find there isn't sufficient spot capacity so",
    "start": "2358100",
    "end": "2365790"
  },
  {
    "text": "in the case of having use on-demand instances we do have to spend a little bit more money obviously but it means",
    "start": "2365790",
    "end": "2373620"
  },
  {
    "text": "that we can have service continuity even in the case of insufficient spot capacity so in this case we end up using",
    "start": "2373620",
    "end": "2381600"
  },
  {
    "text": "a fair amount of on-demand but then as soon as spot capacity v2 returns we go",
    "start": "2381600",
    "end": "2387390"
  },
  {
    "text": "straight back into using spot there's a lot more that we can do with spot ethnic",
    "start": "2387390",
    "end": "2394830"
  },
  {
    "text": "dough we're kind of just scratching the surface the first one I mentioned earlier was spot fleet so spot fleet is",
    "start": "2394830",
    "end": "2402510"
  },
  {
    "start": "2395000",
    "end": "2565000"
  },
  {
    "text": "a completely different approach to scaling into a cloud of instances with",
    "start": "2402510",
    "end": "2409530"
  },
  {
    "text": "auto scaling groups you're using one instance type and one machine image with",
    "start": "2409530",
    "end": "2415440"
  },
  {
    "text": "spot fleet you can ask Amazon to spread your workload across a wide variety of",
    "start": "2415440",
    "end": "2421800"
  },
  {
    "text": "different instances it's still up to you to determine what instances to use but you can say I'm not I don't care about",
    "start": "2421800",
    "end": "2428580"
  },
  {
    "text": "running just on a c3 to excel I'm happy to run on a c3 Excel up to a c3 you know",
    "start": "2428580",
    "end": "2435030"
  },
  {
    "text": "for accelerate Excel and maybe I'm even happy to run my workload on our threes or our force and this allows you to make",
    "start": "2435030",
    "end": "2445260"
  },
  {
    "text": "use of the cheapest machine at any given time and that can be incredibly useful",
    "start": "2445260",
    "end": "2451110"
  },
  {
    "text": "you can even define your own custom waiting to determine how much you value",
    "start": "2451110",
    "end": "2457290"
  },
  {
    "text": "a particular machine you might say that for you and r3 isn't particularly",
    "start": "2457290",
    "end": "2462570"
  },
  {
    "text": "valuable relative to a c3 because our threes are you know have a lot more",
    "start": "2462570",
    "end": "2467580"
  },
  {
    "text": "memory paid much more for the memory on those machines if you don't have a memory intensive task you might just",
    "start": "2467580",
    "end": "2473280"
  },
  {
    "text": "want it for the compute and so you can say I want to have the same bid price for our 3s as I have for C threes and I",
    "start": "2473280",
    "end": "2480270"
  },
  {
    "text": "want them to be evaluated as having the same number of compute units so it can",
    "start": "2480270",
    "end": "2486300"
  },
  {
    "text": "be really really flexible and you can tune it very specifically to your environment",
    "start": "2486300",
    "end": "2492010"
  },
  {
    "text": "there are a few challenges with it though that we've found we've started looking into it one of them is that",
    "start": "2492010",
    "end": "2497230"
  },
  {
    "text": "there is no way to account for the cost of EBS volumes so when you're running at",
    "start": "2497230",
    "end": "2502690"
  },
  {
    "text": "spot and you're paying a deeply discounted price for compute you're",
    "start": "2502690",
    "end": "2507700"
  },
  {
    "text": "still paying full price for EBS so if you say that you need the same size EBS",
    "start": "2507700",
    "end": "2513820"
  },
  {
    "text": "volume whether you're running on something like a c3 dot large as if you're running on a C 3.8 XL but you",
    "start": "2513820",
    "end": "2521440"
  },
  {
    "text": "have to run four times or eight times as many c3 larges to make up for to make up",
    "start": "2521440",
    "end": "2527020"
  },
  {
    "text": "the full amount of compute that you need you end up needing to have eight times as many EBS volumes and that's going to",
    "start": "2527020",
    "end": "2534220"
  },
  {
    "text": "be a significant portion of the cost the EBS volumes can be you know 10 20 30 40",
    "start": "2534220",
    "end": "2540460"
  },
  {
    "text": "percent of the total cost of your spend so you do need to take that into account and there's a couple other problems like",
    "start": "2540460",
    "end": "2546360"
  },
  {
    "text": "aSG's have very simple health checks if a machine becomes unhealthy it can be",
    "start": "2546360",
    "end": "2552850"
  },
  {
    "text": "automatically replaced it automatically propagates tags to all your machines these are problems that we think we can",
    "start": "2552850",
    "end": "2559780"
  },
  {
    "text": "work around by using lambda but there are still problems one other big",
    "start": "2559780",
    "end": "2565780"
  },
  {
    "start": "2565000",
    "end": "2640000"
  },
  {
    "text": "challenge with using spot fleet is that if you're using machines of different sizes and different capacity you need to",
    "start": "2565780",
    "end": "2573880"
  },
  {
    "text": "figure out how your workload applies best to those machines so in our case we've taken a lot of care to tune the",
    "start": "2573880",
    "end": "2581650"
  },
  {
    "text": "number of workers and the types of workers that run on each machine and we've set things up so that they've run",
    "start": "2581650",
    "end": "2587800"
  },
  {
    "text": "optimally so it might be that we can run three jobs that encode a video for",
    "start": "2587800",
    "end": "2594430"
  },
  {
    "text": "distribution to phones and tablets simultaneously on the c32 XL but if",
    "start": "2594430",
    "end": "2601780"
  },
  {
    "text": "we're going to run on a machine that's half the size or quarter the size we might only want to run one of those jobs",
    "start": "2601780",
    "end": "2607960"
  },
  {
    "text": "or if we're gonna run on a machine that's two times as big or four times as big we might want to run many more of",
    "start": "2607960",
    "end": "2613750"
  },
  {
    "text": "the jobs or we might want to distribute the types of jobs differently so today",
    "start": "2613750",
    "end": "2618790"
  },
  {
    "text": "we is immutable config it's baked into the machine image the machine image turns on",
    "start": "2618790",
    "end": "2624520"
  },
  {
    "text": "and there's three or four workers sitting there ready to go in the future we need to be dynamic about that so the",
    "start": "2624520",
    "end": "2630580"
  },
  {
    "text": "machine comes up it figures out what type of machine it is and how much capacity it has and it runs a rubric and",
    "start": "2630580",
    "end": "2637390"
  },
  {
    "text": "figures out what did she do another thing that we want to do in the future",
    "start": "2637390",
    "end": "2643060"
  },
  {
    "start": "2640000",
    "end": "2703000"
  },
  {
    "text": "is move more towards grid based computing so if you imagine what's",
    "start": "2643060",
    "end": "2648610"
  },
  {
    "text": "involved in running optical character recognition on an hour-long video you're",
    "start": "2648610",
    "end": "2654430"
  },
  {
    "text": "going to be pulling all of the video frames out treating those images and",
    "start": "2654430",
    "end": "2660040"
  },
  {
    "text": "running OCR on those images and that's going to be as we talked about earlier a very long running job and it's super",
    "start": "2660040",
    "end": "2667240"
  },
  {
    "text": "painful if you lose that machine in the middle if you subdivide that job out and",
    "start": "2667240",
    "end": "2672460"
  },
  {
    "text": "run it instead of on one machine you're running it on four machines or sixteen",
    "start": "2672460",
    "end": "2677830"
  },
  {
    "text": "machines there's 32 machines each one of which is looking at a small portion of the video then losing any one of those",
    "start": "2677830",
    "end": "2683920"
  },
  {
    "text": "machines is far less painful you have a lot less work that you have to catch back up and there's other benefits too",
    "start": "2683920",
    "end": "2690280"
  },
  {
    "text": "like you can have the turnaround time for that full job being much much faster because you're running it all in",
    "start": "2690280",
    "end": "2695530"
  },
  {
    "text": "parallel so in summary spot has had a",
    "start": "2695530",
    "end": "2701320"
  },
  {
    "text": "huge impact for our business we've actually been able to save 53 percent of",
    "start": "2701320",
    "end": "2706750"
  },
  {
    "start": "2703000",
    "end": "2713000"
  },
  {
    "text": "our compute on the types of jobs that are that are running on all the videos to get uploaded and for us that's meant",
    "start": "2706750",
    "end": "2714190"
  },
  {
    "start": "2713000",
    "end": "2737000"
  },
  {
    "text": "that we can take this awesome feature of searching inside videos and we've been able to give it to our entire customer",
    "start": "2714190",
    "end": "2719320"
  },
  {
    "text": "base which has been huge for the business and huge for our customers the other thing is we've been able to save",
    "start": "2719320",
    "end": "2725200"
  },
  {
    "text": "so much money using spot to run all of the very compute intensive tests that we have that we've been able to turn that",
    "start": "2725200",
    "end": "2731800"
  },
  {
    "text": "back into growth of our business most importantly and expanding our team which",
    "start": "2731800",
    "end": "2738190"
  },
  {
    "text": "means we're hiring [Music] we'd love to have more strong developers",
    "start": "2738190",
    "end": "2744340"
  },
  {
    "text": "data scientists any kind of smart people join us in Seattle London and Pittsburgh",
    "start": "2744340",
    "end": "2750540"
  },
  {
    "text": "thank you very much",
    "start": "2750540",
    "end": "2753930"
  }
]