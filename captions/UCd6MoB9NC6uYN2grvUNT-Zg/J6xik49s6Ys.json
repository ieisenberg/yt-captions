[
  {
    "start": "0",
    "end": "53000"
  },
  {
    "text": "okay the big hand on the NTP client tells me it's time I got going so hi",
    "start": "30",
    "end": "5759"
  },
  {
    "text": "folks I'm Dave bean at AWS for shade over four years now helping customers",
    "start": "5759",
    "end": "12360"
  },
  {
    "text": "mostly around Europe Middle East and Africa address their security and compliance requirements on AWS and",
    "start": "12360",
    "end": "18500"
  },
  {
    "text": "otherwise of trying to make a constructive nuisance of myself and my relatively small amount of spare time",
    "start": "18500",
    "end": "24960"
  },
  {
    "text": "inventing stuff so we do have quite a bit of stuff to get through today I am",
    "start": "24960",
    "end": "30900"
  },
  {
    "text": "going to be going at a little bit of a gallop from an administrative perspective video of this session will",
    "start": "30900",
    "end": "36870"
  },
  {
    "text": "be going up on YouTube within a day or so so no need to take photographs unless",
    "start": "36870",
    "end": "42960"
  },
  {
    "text": "you particularly want to you can go in freeze frame the video as needed similarly the slides are expected to",
    "start": "42960",
    "end": "49379"
  },
  {
    "text": "land on SlideShare not very much longer after the video shows up we are now in",
    "start": "49379",
    "end": "55140"
  },
  {
    "start": "53000",
    "end": "186000"
  },
  {
    "text": "the last full day of reinvent and I suspect your feet are probably as grateful about this as mine are so there",
    "start": "55140",
    "end": "62609"
  },
  {
    "text": "aren't actually that many related breakouts left to do pertinent to this",
    "start": "62609",
    "end": "68040"
  },
  {
    "text": "session though we have actually had what's effectively a mini track in all all about landing zones so there are two",
    "start": "68040",
    "end": "76170"
  },
  {
    "text": "sessions remaining one of which actually does overlap a little bit with this one",
    "start": "76170",
    "end": "81360"
  },
  {
    "text": "I don't mind I I I won't take any offence if you choose to sneak out a",
    "start": "81360",
    "end": "86880"
  },
  {
    "text": "little bit early so you can go and catch the governance at scale one as I know that is very interesting also if you",
    "start": "86880",
    "end": "95100"
  },
  {
    "text": "this session is in some ways a companion piece to the one with session code",
    "start": "95100",
    "end": "101310"
  },
  {
    "text": "Sierra echo charlie 303 given on Monday and Tuesday by my friend and partner in",
    "start": "101310",
    "end": "107430"
  },
  {
    "text": "geekery Sam Elm Iraq that's already on YouTube if you want to go look it up who",
    "start": "107430",
    "end": "112619"
  },
  {
    "text": "was actually in that session or has otherwise seen it a few okay so I will",
    "start": "112619",
    "end": "118469"
  },
  {
    "text": "be sure to try and recap a little bit on the fly before I actually kick off into",
    "start": "118469",
    "end": "125070"
  },
  {
    "text": "this bearing in mind that it is now Thursday and control tower was announced",
    "start": "125070",
    "end": "131220"
  },
  {
    "text": "yesterday obviously that was developed under some secrecy so we haven't really been able",
    "start": "131220",
    "end": "137439"
  },
  {
    "text": "to talk about it before now the situation is control tower has been released in preview I really wouldn't go",
    "start": "137439",
    "end": "144939"
  },
  {
    "text": "looking at putting production workloads in it today play with it evaluate it use it to teach",
    "start": "144939",
    "end": "151599"
  },
  {
    "text": "yourself about how it's going to work but if you actually need a referee a reference multi-account architecture",
    "start": "151599",
    "end": "158590"
  },
  {
    "text": "that is ready for production workloads before the end of this year then landing zone is probably the thing to go look at",
    "start": "158590",
    "end": "165750"
  },
  {
    "text": "once control tower actually does go into general availability there will be a",
    "start": "165750",
    "end": "172269"
  },
  {
    "text": "migration path for your accounts and other assets from landing zone into",
    "start": "172269",
    "end": "178299"
  },
  {
    "text": "control tower if that's something that you want to do so just to set the scene",
    "start": "178299",
    "end": "183669"
  },
  {
    "text": "as I normally do around compliance I think of compliance very much as being",
    "start": "183669",
    "end": "189430"
  },
  {
    "text": "the outcome of what happens around threat modeling once you've actually got your governance framework particularly",
    "start": "189430",
    "end": "195849"
  },
  {
    "text": "in terms of costing and management and so forth all set up at a corporate level everything starts with a threat model in",
    "start": "195849",
    "end": "203139"
  },
  {
    "text": "my view and threat modeling and risk analysis and assessment is normally done by your risk group if you're of the size",
    "start": "203139",
    "end": "210069"
  },
  {
    "text": "of organization large enough to have one that then normally leads to a bunch of",
    "start": "210069",
    "end": "215680"
  },
  {
    "text": "security controls to actually mitigate the material risks that are considered",
    "start": "215680",
    "end": "222459"
  },
  {
    "text": "to be appropriate to mitigate rather than being residual risks that need that can just be accepted you then have",
    "start": "222459",
    "end": "229689"
  },
  {
    "text": "compliance that sort of has a relatively large overlap with this in all honesty I",
    "start": "229689",
    "end": "235120"
  },
  {
    "text": "just think of compliance as B is being dealing with the controls laid out as a",
    "start": "235120",
    "end": "241060"
  },
  {
    "text": "result of someone else's analysis of their threat model whether that be your regulator or some or some other industry",
    "start": "241060",
    "end": "247000"
  },
  {
    "start": "247000",
    "end": "339000"
  },
  {
    "text": "body in terms of AWS ease compliance with various standards we've got a few",
    "start": "247000",
    "end": "253389"
  },
  {
    "text": "certifications and the way in which this normally works certainly for things like",
    "start": "253389",
    "end": "258400"
  },
  {
    "text": "Sorkin PCI and the various ISO standards is that for Sauk and PCI in particular",
    "start": "258400",
    "end": "265810"
  },
  {
    "text": "we actually publish our audit reports via the artifact service artifact user",
    "start": "265810",
    "end": "271470"
  },
  {
    "text": "just a few okay it's a great little self-service portal there is a click",
    "start": "271470",
    "end": "276639"
  },
  {
    "text": "through NDA on it for actually getting access to the audit reports that we have done mostly by",
    "start": "276639",
    "end": "282340"
  },
  {
    "text": "E&Y certify point so Ernst and Young in the Netherlands we actually get our PCI",
    "start": "282340",
    "end": "287889"
  },
  {
    "text": "done by coal fire here in the USA and those audit reports are available along",
    "start": "287889",
    "end": "293380"
  },
  {
    "text": "with things like continuation letters so you can be sure that once a sock report period is over we're actually already",
    "start": "293380",
    "end": "300130"
  },
  {
    "text": "starting the evaluation for the next one so there's a lot of information in there about things like our physical security",
    "start": "300130",
    "end": "306580"
  },
  {
    "text": "controls that your auditors or regulators or other industry bodies may",
    "start": "306580",
    "end": "311800"
  },
  {
    "text": "want it's a good read there's also if you need to do particular things like",
    "start": "311800",
    "end": "317020"
  },
  {
    "text": "PCI compliance there are also workbooks from third-party companies like a",
    "start": "317020",
    "end": "322240"
  },
  {
    "text": "Nisshin in there which are essentially step by step approaches and controls to",
    "start": "322240",
    "end": "327910"
  },
  {
    "text": "go about implementing controls in your AWS environments that are within scope",
    "start": "327910",
    "end": "333729"
  },
  {
    "text": "that we expect will give you a relatively straightforward ride with your auditor outside of artifact there's",
    "start": "333729",
    "end": "341979"
  },
  {
    "start": "339000",
    "end": "406000"
  },
  {
    "text": "a bunch of frameworks and assets which are also well worth look we've got two",
    "start": "341979",
    "end": "347440"
  },
  {
    "text": "CIS benchmarks that we income in conjunction with CIS keep and other",
    "start": "347440",
    "end": "352780"
  },
  {
    "text": "contributors keep up to date they had an update a little earlier this year we",
    "start": "352780",
    "end": "358030"
  },
  {
    "text": "also have our enterprise accelerator assets which give you frameworks for mapping the controls in a standard to",
    "start": "358030",
    "end": "364390"
  },
  {
    "text": "means of implementing them in AWS and also sets of cloud formation templates",
    "start": "364390",
    "end": "369460"
  },
  {
    "text": "that you can use to essentially baseline environments so that when so that you",
    "start": "369460",
    "end": "376539"
  },
  {
    "text": "can then build your assets on top of them and again hopefully get a reasonably straightforward audit audit",
    "start": "376539",
    "end": "384970"
  },
  {
    "text": "actually set up and through however these are at the moment all predicated",
    "start": "384970",
    "end": "390070"
  },
  {
    "text": "on single account environments this is something I'd like to tweak in the future and this is something I may well",
    "start": "390070",
    "end": "397180"
  },
  {
    "text": "get on to doing some work on next you certainly all of them can benefit from extending with scps and some of the",
    "start": "397180",
    "end": "403839"
  },
  {
    "text": "other features that we've been announcing so on to multi account environments I'm hoping that you've seen",
    "start": "403839",
    "end": "410349"
  },
  {
    "start": "406000",
    "end": "681000"
  },
  {
    "text": "this all this diagram already please raise your hand if you have good so I",
    "start": "410349",
    "end": "416709"
  },
  {
    "text": "will still give a very brief explanation for the few people who didn't raise their hands but I'm glad most of you",
    "start": "416709",
    "end": "423279"
  },
  {
    "text": "have your landing zone essentially comprises five core accounts plus a",
    "start": "423279",
    "end": "429699"
  },
  {
    "text": "whole bunch more that you then go and configure yourself so the core accounts are your organization's master which",
    "start": "429699",
    "end": "436479"
  },
  {
    "text": "goes and actually provisions and and manages the SCPs",
    "start": "436479",
    "end": "442659"
  },
  {
    "text": "in your other accounts and also consolidates your billing you then have your security account in which you go",
    "start": "442659",
    "end": "449439"
  },
  {
    "text": "and put your security monitoring tooling your automated security remediation",
    "start": "449439",
    "end": "454839"
  },
  {
    "text": "tooling more of which in a moment and essentially this account also has the",
    "start": "454839",
    "end": "460779"
  },
  {
    "text": "ability for people in that account which should be your security team to be able to have read access to all the all the",
    "start": "460779",
    "end": "468159"
  },
  {
    "text": "assets in your environment you then have your log archive account which is where all the logs from all your accounts",
    "start": "468159",
    "end": "474969"
  },
  {
    "text": "aggregate to in terms of cloud trail and cloud watch logs and so forth all that's in there is an s3 bucket with",
    "start": "474969",
    "end": "483219"
  },
  {
    "text": "a bunch of permissions on it from the point of view of all your accounts being able to write to it but only a select",
    "start": "483219",
    "end": "490539"
  },
  {
    "text": "you being able to read the network account if you is where you can put",
    "start": "490539",
    "end": "496360"
  },
  {
    "text": "things like transit way also where you can go putting any direct connect links",
    "start": "496360",
    "end": "502769"
  },
  {
    "text": "your network team will probably thank you if you have a direct connect environment to actually have direct",
    "start": "502769",
    "end": "509019"
  },
  {
    "text": "connect all come into there so that there you can then set up the their workflow for assigning virtual",
    "start": "509019",
    "end": "516490"
  },
  {
    "text": "interfaces on the AWS side to 802 dot1q VLANs on their side for integration into",
    "start": "516490",
    "end": "522669"
  },
  {
    "text": "your corporate network before then offering each v out to the account that needs it to plug into the relevant V PC",
    "start": "522669",
    "end": "529389"
  },
  {
    "text": "and shared services is where you can things like corporate directory",
    "start": "529389",
    "end": "535660"
  },
  {
    "text": "information any any tooling that you may need to use that is common to all your",
    "start": "535660",
    "end": "542290"
  },
  {
    "text": "various teams and projects and that essentially is your core on as far as",
    "start": "542290",
    "end": "547840"
  },
  {
    "text": "team and group accounts his concerns this is where you start start using organizations organizational units o use",
    "start": "547840",
    "end": "555580"
  },
  {
    "text": "very LDAP and how you actually go about laying those out really comes down to",
    "start": "555580",
    "end": "560980"
  },
  {
    "text": "what your organization chart and your corporate policies look like in terms of",
    "start": "560980",
    "end": "568570"
  },
  {
    "text": "whether you want to assign groupings of accounts based on projects in progress or assign them to departments and also",
    "start": "568570",
    "end": "576880"
  },
  {
    "text": "again this depends on what degree of autonomy apart departments should have",
    "start": "576880",
    "end": "582250"
  },
  {
    "text": "from each other and from any core security team also",
    "start": "582250",
    "end": "587730"
  },
  {
    "text": "what secrets department a maid need may need to keep from Department B from the",
    "start": "587730",
    "end": "593860"
  },
  {
    "text": "point of view of developers one thing that we often get asked at AWS is how we",
    "start": "593860",
    "end": "599170"
  },
  {
    "text": "manage to move fast without breaking things and this is where it's actually",
    "start": "599170",
    "end": "604420"
  },
  {
    "text": "good to give your developers a reasonable degree of autonomy so it's a good idea to actually give each",
    "start": "604420",
    "end": "610330"
  },
  {
    "text": "developer their own account on which they are effectively route so they can",
    "start": "610330",
    "end": "615700"
  },
  {
    "text": "go and use this just to learn AWS technologies to prototype to debug to",
    "start": "615700",
    "end": "621370"
  },
  {
    "text": "work on side projects that before that before they actually potentially get",
    "start": "621370",
    "end": "626770"
  },
  {
    "text": "adopted into a formal management framework at which point they then become imported into a team and group",
    "start": "626770",
    "end": "633490"
  },
  {
    "text": "account environment so if your developer is writing code that actually needs to",
    "start": "633490",
    "end": "638770"
  },
  {
    "text": "have privilege in terms of being able to make AWS API calls itself they can do",
    "start": "638770",
    "end": "644170"
  },
  {
    "text": "that without having to because because they have dominion over I am in their",
    "start": "644170",
    "end": "650050"
  },
  {
    "text": "own little account without having to go to a security manager in their team and say please can you tweet this role",
    "start": "650050",
    "end": "657760"
  },
  {
    "text": "profile for me finally down in the bottom right you've got your own data",
    "start": "657760",
    "end": "664090"
  },
  {
    "text": "center or a and other environment in which you have your central directory",
    "start": "664090",
    "end": "669519"
  },
  {
    "text": "so that people can authenticate and authorize into roles to go and do things",
    "start": "669519",
    "end": "675279"
  },
  {
    "text": "with the AWS api's in these various accounts and if we look at this in a",
    "start": "675279",
    "end": "680290"
  },
  {
    "text": "little more detail you can actually do some interesting things here that I'll be talking about just in the next bit",
    "start": "680290",
    "end": "687040"
  },
  {
    "start": "681000",
    "end": "787000"
  },
  {
    "text": "but there's a few further truths hiding in this slightly more detailed diagram so if you look at the resource accounts",
    "start": "687040",
    "end": "694240"
  },
  {
    "text": "in the middle on the far right-hand side you'll see that kms and potentially",
    "start": "694240",
    "end": "699670"
  },
  {
    "text": "Cloud HSM should you need it are actually located in the resource accounts rather Lin and shared role in",
    "start": "699670",
    "end": "706149"
  },
  {
    "text": "an in a shared service account there are good reasons to keep the keys that",
    "start": "706149",
    "end": "711430"
  },
  {
    "text": "actually are the master keys for encrypting your assets close to and",
    "start": "711430",
    "end": "717130"
  },
  {
    "text": "within the same accounts as the assets themselves so this also helps address",
    "start": "717130",
    "end": "723430"
  },
  {
    "text": "the question as well as how many accounts do I need how many kms master keys do I need you",
    "start": "723430",
    "end": "729819"
  },
  {
    "text": "normally just have at least one of your own AWS resource accounting that you can",
    "start": "729819",
    "end": "737740"
  },
  {
    "text": "do in the context of billing in the organization's master account down in",
    "start": "737740",
    "end": "743709"
  },
  {
    "text": "the bottom right we have an extra lambda function that actually can migrate billing records potentially with some",
    "start": "743709",
    "end": "750880"
  },
  {
    "text": "anonymization if needed out to a separate account just left of that one that you can then go and use your",
    "start": "750880",
    "end": "757540"
  },
  {
    "text": "governance that scale tooling to do billing analysis on or indeed that would be the bucket that you would potentially",
    "start": "757540",
    "end": "763990"
  },
  {
    "text": "expose to your finance team and your auditors in the top at the right hand",
    "start": "763990",
    "end": "769389"
  },
  {
    "text": "side that's where our log bucket lives again this is where you can actually go",
    "start": "769389",
    "end": "774790"
  },
  {
    "text": "about as well as exposing that your internal audit team also potentially",
    "start": "774790",
    "end": "780069"
  },
  {
    "text": "exposing that further but let's look at what's going on on the left here in terms of our Federation",
    "start": "780069",
    "end": "786339"
  },
  {
    "text": "I am Federation is good thing to do anyway in that it has the useful side",
    "start": "786339",
    "end": "794110"
  },
  {
    "start": "787000",
    "end": "983000"
  },
  {
    "text": "effect if you federated a group to group level which we recommend of draining",
    "start": "794110",
    "end": "799990"
  },
  {
    "text": "person the identifiable information out of I am so our usual recommendation is that",
    "start": "799990",
    "end": "806350"
  },
  {
    "text": "individual users have no permissions groups that users are the users are",
    "start": "806350",
    "end": "811870"
  },
  {
    "text": "members of have permission to assume a role and roles have the relevant police",
    "start": "811870",
    "end": "817330"
  },
  {
    "text": "privilege permissions to do appropriate and useful things so if you actually do",
    "start": "817330",
    "end": "823480"
  },
  {
    "text": "your Federation on a group to group basis so when you actually set your sam'l up in I am you're just actually",
    "start": "823480",
    "end": "831820"
  },
  {
    "text": "consumed you're just actually consuming and filter on filtering on Oh a equals oh you equals and DC equals then there's",
    "start": "831820",
    "end": "839110"
  },
  {
    "text": "no PII in that or unless you're running a particularly weird schema now there",
    "start": "839110",
    "end": "846730"
  },
  {
    "text": "are two schools of thought about how to go about doing this Federation we actually recommend doing direct",
    "start": "846730",
    "end": "853270"
  },
  {
    "text": "Federation from each AWS account to your central ID P this may sound like a lot",
    "start": "853270",
    "end": "860529"
  },
  {
    "text": "of work in practice the bulk of the work is actually setting up the IDP in the first place federated Federation and",
    "start": "860529",
    "end": "867100"
  },
  {
    "text": "setting that up to the actual account is sufficiently straightforward that it can",
    "start": "867100",
    "end": "872200"
  },
  {
    "text": "actually be automated and landing zone can help you do that the other way of doing it is by having a",
    "start": "872200",
    "end": "879220"
  },
  {
    "text": "jump account so you have an AWS account that federates back to your IDP and then",
    "start": "879220",
    "end": "884860"
  },
  {
    "text": "all your users authenticate into that account and that's where their cross account roles live that's that will take",
    "start": "884860",
    "end": "892750"
  },
  {
    "text": "you so far from the point of view of scalability the issue happens that your",
    "start": "892750",
    "end": "898330"
  },
  {
    "text": "I am policies as you start adding roles and multiple across account rules and so",
    "start": "898330",
    "end": "903339"
  },
  {
    "text": "forth can get very complicated indeed and very quickly so if I show my age",
    "start": "903339",
    "end": "908410"
  },
  {
    "text": "here it winds up looking a bit like when you get up to sort of 30 accounts or so",
    "start": "908410",
    "end": "914500"
  },
  {
    "text": "it winds up looking a bit like how things used to be where you had central",
    "start": "914500",
    "end": "920410"
  },
  {
    "text": "checkpoint firewalls for your enterprise running on a couple of really big Nokia boxes and you could get some you had to",
    "start": "920410",
    "end": "927670"
  },
  {
    "text": "wind up you had to wind up doing interesting dependency analysis if you wanted to introduce a new rules to",
    "start": "927670",
    "end": "932860"
  },
  {
    "text": "ensure that it didn't and didn't also involve any undesirable",
    "start": "932860",
    "end": "938980"
  },
  {
    "text": "changes associated with that so direct Federation scales better also because",
    "start": "938980",
    "end": "946029"
  },
  {
    "text": "users aren't going to be authenticating every few seconds it does actually scale",
    "start": "946029",
    "end": "952569"
  },
  {
    "text": "very well you can have a relatively modest set of hardware running your IDP and federated bunch of accounts to it",
    "start": "952569",
    "end": "959709"
  },
  {
    "text": "without either lighting the wires up or putting a huge amount of load actually on the IDP itself so what do you go",
    "start": "959709",
    "end": "966819"
  },
  {
    "text": "putting in there well you're only going to have a subset of users in your",
    "start": "966819",
    "end": "972579"
  },
  {
    "text": "company I would expect unless you're a born in the cloud startup who are going to be using the AWS api's and if we go",
    "start": "972579",
    "end": "980829"
  },
  {
    "text": "looking at this in a bit more detail here so this is what we would typically",
    "start": "980829",
    "end": "987189"
  },
  {
    "start": "983000",
    "end": "1245000"
  },
  {
    "text": "recommend originally about how to do I am Federation so you've got your central directory in your corporate data center",
    "start": "987189",
    "end": "994240"
  },
  {
    "text": "you put some extra software on top of it to make it function as a sam'l IDP and",
    "start": "994240",
    "end": "999550"
  },
  {
    "text": "you then go do sam'l Federation's from it to your various AWS accounts in",
    "start": "999550",
    "end": "1004970"
  },
  {
    "text": "practice I do not know a single customer who'll does this reason being that that",
    "start": "1004970",
    "end": "1011279"
  },
  {
    "text": "central directory has not only got everyone's credentials in it all the way up to your CEO but it's probably got all",
    "start": "1011279",
    "end": "1017970"
  },
  {
    "text": "sorts of further configuration in there for enterprise software that you're using on-premise there's a whole bunch",
    "start": "1017970",
    "end": "1023970"
  },
  {
    "text": "of stuff which just is not relevant to the use of AWS so the normal thing to do",
    "start": "1023970",
    "end": "1029130"
  },
  {
    "text": "is stand up a secondary directory which you put your IDP software on and then",
    "start": "1029130",
    "end": "1036569"
  },
  {
    "text": "just do a limited LDAP S replica between the two so you're just actually synchronizing the details of those",
    "start": "1036569",
    "end": "1043048"
  },
  {
    "text": "groups of users who are going to be using the AWS api's so this is what I see a lot of a lot of people in fact",
    "start": "1043049",
    "end": "1051000"
  },
  {
    "text": "most people who do this also then go putting extra security technologies in",
    "start": "1051000",
    "end": "1056760"
  },
  {
    "text": "between the two so that you can essentially establish a trust gradient between your internal and external ID",
    "start": "1056760",
    "end": "1062820"
  },
  {
    "text": "internal and external directories to guard against the issue of your external IDP being hacked and",
    "start": "1062820",
    "end": "1070410"
  },
  {
    "text": "then potentially hacked back from to the main corporate directory now here's the",
    "start": "1070410",
    "end": "1075750"
  },
  {
    "text": "thing we've got an IDP here we've done that piece of work we've probably built it so in a",
    "start": "1075750",
    "end": "1081510"
  },
  {
    "text": "semi-automated fashion so that if our Hardware dies we can go and replace it very quickly why not use that to build",
    "start": "1081510",
    "end": "1089820"
  },
  {
    "text": "two and two IDPs and I have one for the very very small number of people who may",
    "start": "1089820",
    "end": "1097320"
  },
  {
    "text": "need in an emergency to interact with our production environment and then have all our developers and so forth for",
    "start": "1097320",
    "end": "1103890"
  },
  {
    "text": "their sandbox accounts have their details in non production IDP as you may",
    "start": "1103890",
    "end": "1109140"
  },
  {
    "text": "have seen already this week in any dedsec op sessions you've been to the ultimate aim found the sort of road",
    "start": "1109140",
    "end": "1116340"
  },
  {
    "text": "towards security nirvana is to get to the point where your production environment shouldn't be touched by",
    "start": "1116340",
    "end": "1123360"
  },
  {
    "text": "human hands you want to be able to have your code go into some code repository",
    "start": "1123360",
    "end": "1128940"
  },
  {
    "text": "be built by a continuous integration environment and then potentially once",
    "start": "1128940",
    "end": "1133950"
  },
  {
    "text": "it's gone through its appropriate tests or automated testing be deployed by an automated deployment system into your",
    "start": "1133950",
    "end": "1140250"
  },
  {
    "text": "production environment where the production where the automated deployment system is the only thing that has the permissions to push things to a",
    "start": "1140250",
    "end": "1147060"
  },
  {
    "text": "live world so at this point once we're actually separated our IDPs out in",
    "start": "1147060",
    "end": "1153420"
  },
  {
    "text": "normal operation we just turn our production one off there is a design",
    "start": "1153420",
    "end": "1160800"
  },
  {
    "text": "axiom at a ws it's been something that we've cleaved to for a good many years",
    "start": "1160800",
    "end": "1166410"
  },
  {
    "text": "but we haven't really talked about it that much externally until this year and",
    "start": "1166410",
    "end": "1171840"
  },
  {
    "text": "that is that you want to keep humans away from data now my interpretation of",
    "start": "1171840",
    "end": "1177600"
  },
  {
    "text": "that and a little extension on the top is that this means that you also want to keep humans away from api's because it's",
    "start": "1177600",
    "end": "1184770"
  },
  {
    "text": "by using and fat fingering api's that humans mess data up so if you're humans",
    "start": "1184770",
    "end": "1190800"
  },
  {
    "text": "in this model do not in normal circumstances have access to the api's",
    "start": "1190800",
    "end": "1196080"
  },
  {
    "text": "then they can't go messing with your actual real-world data which should only go",
    "start": "1196080",
    "end": "1201960"
  },
  {
    "text": "existing in your production environment and any backups of it in the first place obviously in the case of emergencies",
    "start": "1201960",
    "end": "1209010"
  },
  {
    "text": "happening or strange things being observed you can do the break glass thing and boot your IDP ensure that it's",
    "start": "1209010",
    "end": "1217140"
  },
  {
    "text": "synchronized with your central directory and then go executing API calls this is",
    "start": "1217140",
    "end": "1222330"
  },
  {
    "text": "very much like what you may already be familiar with in terms of using Bastion hosts in in non production environments",
    "start": "1222330",
    "end": "1230220"
  },
  {
    "text": "typically to get to ec2 instances that may be observed to be misbehaving so",
    "start": "1230220",
    "end": "1235830"
  },
  {
    "text": "again normally you only stand these up when an emergency is happening and you",
    "start": "1235830",
    "end": "1241110"
  },
  {
    "text": "keep it shut down in normal operation now from the point of view of compliance",
    "start": "1241110",
    "end": "1246450"
  },
  {
    "start": "1245000",
    "end": "1360000"
  },
  {
    "text": "and scoping the magic well the magic with compliance is always in the scoping",
    "start": "1246450",
    "end": "1252480"
  },
  {
    "text": "if there's one thing that's guaranteed to make an auditor nervous it is not having a hard defined boundary between",
    "start": "1252480",
    "end": "1259320"
  },
  {
    "text": "what's in scope and what isn't and while a lot of people use VP C's",
    "start": "1259320",
    "end": "1265500"
  },
  {
    "text": "scope boundaries there are a number of good reasons why accounts actually make",
    "start": "1265500",
    "end": "1271050"
  },
  {
    "text": "it make better scope boundaries in certain circumstances anyone here in US",
    "start": "1271050",
    "end": "1276510"
  },
  {
    "text": "healthcare just couple okay so if you guys have already signed our HIPAA",
    "start": "1276510",
    "end": "1282750"
  },
  {
    "text": "business associate agreement you will know from that that it's a require is a mandated requirement in there to",
    "start": "1282750",
    "end": "1289890"
  },
  {
    "text": "identify at account level which AWS accounts are handling personal",
    "start": "1289890",
    "end": "1294900"
  },
  {
    "text": "healthcare information and and the account boundary is actually your",
    "start": "1294900",
    "end": "1299970"
  },
  {
    "text": "compliance boundary you'd probably want to go in an organization's or landing",
    "start": "1299970",
    "end": "1305340"
  },
  {
    "text": "zone environment to do that account tagging in the O in an O you name but",
    "start": "1305340",
    "end": "1310890"
  },
  {
    "text": "I'll also just tell you a little story in a moment about why using accounts",
    "start": "1310890",
    "end": "1316860"
  },
  {
    "text": "rather than VP C's as your boundary may actually be a really good idea so when",
    "start": "1316860",
    "end": "1323010"
  },
  {
    "text": "you go actually provisioning an account in organizations or in or indeed in your landing zone you wind up getting this",
    "start": "1323010",
    "end": "1330690"
  },
  {
    "text": "this rather long string roll which is effectively your route environment landing zone uses a",
    "start": "1330690",
    "end": "1337560"
  },
  {
    "text": "secondary one which is the CloudFormation stack set execution roll in which to then when you provision an",
    "start": "1337560",
    "end": "1344100"
  },
  {
    "text": "account to go hardening it configuring it pre populating it with certain assets such as lot such as log monitoring and",
    "start": "1344100",
    "end": "1351570"
  },
  {
    "text": "shipping environments and then it also applies an SCP on the top which I'll be",
    "start": "1351570",
    "end": "1356640"
  },
  {
    "text": "talking about at some length later but back to that little story so I had a an",
    "start": "1356640",
    "end": "1364680"
  },
  {
    "start": "1360000",
    "end": "1488000"
  },
  {
    "text": "engagement with a bank who shall remain nameless here and they were looking to deploy a PCI DSS compliant workload in",
    "start": "1364680",
    "end": "1372960"
  },
  {
    "text": "AWS not an unusual thing to be doing and they had a very rigorous and diligent",
    "start": "1372960",
    "end": "1380220"
  },
  {
    "text": "and I think relatively new qsa so PCI auditor who came to them and said okay",
    "start": "1380220",
    "end": "1386580"
  },
  {
    "text": "so you're you want to use this Jana use of EPC as a boundary fair enough you're you've got your ec2 instance here",
    "start": "1386580",
    "end": "1393540"
  },
  {
    "text": "is here which are processing card data and you're running the cloud watch logs agent on them so as to go scraping your",
    "start": "1393540",
    "end": "1401430"
  },
  {
    "text": "log files and they're therefore determined that your applications are performing correctly now I'm going to",
    "start": "1401430",
    "end": "1407610"
  },
  {
    "text": "give you a what if what if one of your instances was to misbehave for whatever",
    "start": "1407610",
    "end": "1414390"
  },
  {
    "text": "reason such that the card data its processing found its way into one of",
    "start": "1414390",
    "end": "1420510"
  },
  {
    "text": "those log files that's being scraped all of a sudden so you're running the cloud",
    "start": "1420510",
    "end": "1425790"
  },
  {
    "text": "watch logs agent it's behaving like a remote syslog you're shipping your data out of your V PC into the AWS logging",
    "start": "1425790",
    "end": "1433650"
  },
  {
    "text": "system this is an escape vector for card data tell me what secondary and",
    "start": "1433650",
    "end": "1439740"
  },
  {
    "text": "compensating controls you've got to stop this happening and alert on it should",
    "start": "1439740",
    "end": "1445140"
  },
  {
    "text": "the occasion arise and the bank when um come here Dave need a hand here so",
    "start": "1445140",
    "end": "1455900"
  },
  {
    "text": "they got me involved and bearing in mind they're actually mid audit cycle on this",
    "start": "1458379",
    "end": "1464659"
  },
  {
    "text": "PCI workload they had a fairly tight time scale we did something creative and",
    "start": "1464659",
    "end": "1469999"
  },
  {
    "text": "hackish involving SELinux on their instances so that car data couldn't",
    "start": "1469999",
    "end": "1475190"
  },
  {
    "text": "actually make it way into those files and and that could not control satisfied the qsa but we decided afterwards that",
    "start": "1475190",
    "end": "1483769"
  },
  {
    "text": "there really had to be a better way of doing it and this is what we came up with",
    "start": "1483769",
    "end": "1489139"
  },
  {
    "start": "1488000",
    "end": "1625000"
  },
  {
    "text": "so let's actually look at how you can go filtering your logs we've got an account",
    "start": "1489139",
    "end": "1497090"
  },
  {
    "text": "here we've got cloud trail and config going into an s3 bucket the way they normally do and we've also got an",
    "start": "1497090",
    "end": "1504109"
  },
  {
    "text": "instance or a set of instances running the cloud watch logs agent so log data goes into cloud watch we can trigger a",
    "start": "1504109",
    "end": "1511429"
  },
  {
    "text": "lambda function off of that so that we can then get those logs into an s3 bucket and this doesn't stop us also",
    "start": "1511429",
    "end": "1518960"
  },
  {
    "text": "using cloud watch events to have a number of other lambda auto responders",
    "start": "1518960",
    "end": "1524389"
  },
  {
    "text": "doing things to respond to other events as needed so what we can do is rather",
    "start": "1524389",
    "end": "1531440"
  },
  {
    "text": "than take our log data and then just use clout use cloud trail across account or",
    "start": "1531440",
    "end": "1537289"
  },
  {
    "text": "the or the config aggregator to ship data into our central logging account",
    "start": "1537289",
    "end": "1543190"
  },
  {
    "text": "let's put another lambda function in the way which not only does our shipping here but also scans our code and redact",
    "start": "1543190",
    "end": "1551989"
  },
  {
    "text": "anything it finds that shouldn't be in there for card data it's relatively straightforward to just do a rag ax grep",
    "start": "1551989",
    "end": "1559129"
  },
  {
    "text": "for it because card data is of a reasonable size it's a reasonably service of a well-known format it's got",
    "start": "1559129",
    "end": "1564679"
  },
  {
    "text": "a well-known checksum on it you could actually do this instead with two lambda",
    "start": "1564679",
    "end": "1570440"
  },
  {
    "text": "functions because one of the one of our recommendations around lambda is to have one function and one purpose and indeed",
    "start": "1570440",
    "end": "1577729"
  },
  {
    "text": "when I am role so you could have your first lambda function there in the signal path just do your detection and",
    "start": "1577729",
    "end": "1585169"
  },
  {
    "text": "redaction of anything that is looking untoward and post",
    "start": "1585169",
    "end": "1591149"
  },
  {
    "text": "alert to an SNS topic being watched by your security team in the event of such data being observed and then your second",
    "start": "1591149",
    "end": "1598739"
  },
  {
    "text": "lambda function just goes and does your shipping to your remote bucket this also gives you the opportunity if you want to",
    "start": "1598739",
    "end": "1605580"
  },
  {
    "text": "to verify that your redaction is working correctly in the account where it's happening just",
    "start": "1605580",
    "end": "1610589"
  },
  {
    "text": "by looking at differences between your two log buckets you could even put something like an AI car in there so",
    "start": "1610589",
    "end": "1617969"
  },
  {
    "text": "that your redaction log your redaction lambda function will redact another kind of data that actually isn't sensitive in",
    "start": "1617969",
    "end": "1625849"
  },
  {
    "text": "terms of how such a function would work we've got a prototype for doing this for",
    "start": "1625849",
    "end": "1630960"
  },
  {
    "text": "cloud trails we want to get it into github but it's taking us a little",
    "start": "1630960",
    "end": "1636119"
  },
  {
    "text": "longer than we than we thought a friend of mine wrote this and we're just having a bit of fun engaging with it with our",
    "start": "1636119",
    "end": "1641999"
  },
  {
    "text": "with our posting process but it's not a complicated thing to do and of course",
    "start": "1641999",
    "end": "1648239"
  },
  {
    "text": "this would satisfy our our bank's qsa in this context very much so as well",
    "start": "1648239",
    "end": "1654960"
  },
  {
    "text": "it also doesn't need that much in the way of I am roles I am role permissions to go and do its",
    "start": "1654960",
    "end": "1662070"
  },
  {
    "text": "job so as I said I'm hoping that it won't be that much longer before we can get some sample code for this upon our",
    "start": "1662070",
    "end": "1669479"
  },
  {
    "text": "AWS samples account on github a thing that landing zones don't really talk",
    "start": "1669479",
    "end": "1675929"
  },
  {
    "start": "1672000",
    "end": "1722000"
  },
  {
    "text": "about that much at the moment is cross region access or indeed how to go about",
    "start": "1675929",
    "end": "1681179"
  },
  {
    "text": "laying them out in a multi region context I would normally suggest certainly if you're dealing with",
    "start": "1681179",
    "end": "1688109"
  },
  {
    "text": "sensitive data where potentially compliance requirements may differ between different countries it's worth",
    "start": "1688109",
    "end": "1695489"
  },
  {
    "text": "maybe even looking at deploying a landing zone per region I know a lot of people like to ship their logs around",
    "start": "1695489",
    "end": "1703320"
  },
  {
    "text": "the world so that everything aggregates into one bucket you can do that as well",
    "start": "1703320",
    "end": "1708869"
  },
  {
    "text": "if you wind up actually doing doing redaction again on for example PII",
    "start": "1708869",
    "end": "1714479"
  },
  {
    "text": "because we all know that there's legislation out there where certain places take a dim view of PII leaving",
    "start": "1714479",
    "end": "1721200"
  },
  {
    "text": "geographical boundaries so how to go about doing this first of",
    "start": "1721200",
    "end": "1727070"
  },
  {
    "start": "1722000",
    "end": "1850000"
  },
  {
    "text": "all there's obvious reasons to do it we actually introduced a capability earlier",
    "start": "1727070",
    "end": "1732080"
  },
  {
    "text": "this year that makes it a lot easier than it used to be so the magic room to",
    "start": "1732080",
    "end": "1737150"
  },
  {
    "text": "look at is AWS : requested region and I've got a little sample bit of I am",
    "start": "1737150",
    "end": "1742760"
  },
  {
    "text": "policy here that allows you to restrict any launching or manipulation of ec2 to",
    "start": "1742760",
    "end": "1750230"
  },
  {
    "text": "u.s. regions only this works just fine if you want to go restricting to regions",
    "start": "1750230",
    "end": "1756200"
  },
  {
    "text": "that are non American there's an extra little bit of wrinkle and that you wouldn't necessarily want to apply this",
    "start": "1756200",
    "end": "1762650"
  },
  {
    "text": "to all services since the last I looked if you actually block access to US East",
    "start": "1762650",
    "end": "1770600"
  },
  {
    "text": "one for I am then I am being a global service your I am call stop working",
    "start": "1770600",
    "end": "1777080"
  },
  {
    "text": "similarly you wouldn't want to do it for organizations or for cloud trail route",
    "start": "1777080",
    "end": "1783500"
  },
  {
    "text": "53 you can actually still use Island if you if you block US East that does still work also just to prove that not all if",
    "start": "1783500",
    "end": "1792200"
  },
  {
    "text": "not all innovation happens at AWS I found this neat little cloud formation script on github which will act as a",
    "start": "1792200",
    "end": "1798890"
  },
  {
    "text": "canary to determine if there's any activity in any regions that you don't",
    "start": "1798890",
    "end": "1804260"
  },
  {
    "text": "want to see you don't want to have assets stood up in so we've got a preventive control we've got a detective",
    "start": "1804260",
    "end": "1810080"
  },
  {
    "text": "control we've got some nice defense-in-depth going on here until guard duty launched we actually also",
    "start": "1810080",
    "end": "1817460"
  },
  {
    "text": "recommended that you stand up a bucket in every region that you didn't want to use and turn cloud Traill on and indeed",
    "start": "1817460",
    "end": "1824480"
  },
  {
    "text": "they did the cross region log shipping thing using cloud trails intrinsic",
    "start": "1824480",
    "end": "1830000"
  },
  {
    "text": "capability we did a bit of a tour around some UK customers earlier right at the",
    "start": "1830000",
    "end": "1836060"
  },
  {
    "text": "start of this year and we found that they're actually now preferring to use guard duty as this canary of choice for",
    "start": "1836060",
    "end": "1844310"
  },
  {
    "text": "activity in regions that you don't want to do stuff in so this is also worth",
    "start": "1844310",
    "end": "1850670"
  },
  {
    "start": "1850000",
    "end": "2045000"
  },
  {
    "text": "looking at I mentioned auditors earlier",
    "start": "1850670",
    "end": "1855520"
  },
  {
    "text": "so we've got all our logs aggregating in our buckets in the top right we want to",
    "start": "1859420",
    "end": "1866780"
  },
  {
    "text": "be able to write to those logs from everywhere in our organization but we want to be careful as to who's able to",
    "start": "1866780",
    "end": "1872360"
  },
  {
    "text": "read those as well as our security team if you're a regulated entity you're",
    "start": "1872360",
    "end": "1877460"
  },
  {
    "text": "going to have an internal audit group as well give them read access to it so that they can then do their their",
    "start": "1877460",
    "end": "1885020"
  },
  {
    "text": "analytics on it and ensure that they are comfortable in the dress rehearsal for your audits that everything is going to",
    "start": "1885020",
    "end": "1891470"
  },
  {
    "text": "be sensible the roles that they're going to need to do that again uncomplicated there's a",
    "start": "1891470",
    "end": "1897500"
  },
  {
    "text": "managed I am role for a read to be honest it's worth just put just pulling",
    "start": "1897500",
    "end": "1903680"
  },
  {
    "text": "the actions out of that and reusing them as well as obviously giving read access",
    "start": "1903680",
    "end": "1908900"
  },
  {
    "text": "to the log bucket if you have your",
    "start": "1908900",
    "end": "1914750"
  },
  {
    "text": "external auditor also have an AWS account I'd be surprised if they didn't",
    "start": "1914750",
    "end": "1920360"
  },
  {
    "text": "these days then you could actually do very much the same thing for them give them carefully",
    "start": "1920360",
    "end": "1925940"
  },
  {
    "text": "mediated read access just to your log bucket rather than necessarily giving read access everywhere so that they can",
    "start": "1925940",
    "end": "1933800"
  },
  {
    "text": "actually look at your disposition of assets and your admin activities before",
    "start": "1933800",
    "end": "1939560"
  },
  {
    "text": "they come on site and examine your documentation and interview your personnel about your security ops so",
    "start": "1939560",
    "end": "1947030"
  },
  {
    "text": "this can actually make an audit less disruptive it's fair to say because they",
    "start": "1947030",
    "end": "1952460"
  },
  {
    "text": "can actually do the technical aspect from the point of view of examining the",
    "start": "1952460",
    "end": "1957500"
  },
  {
    "text": "technology of their audit completely remotely they don't need to come on-site at all they just need to be sure",
    "start": "1957500",
    "end": "1963860"
  },
  {
    "text": "initially that you've got your bucket and your logging set up the way they like it because of course any changes in",
    "start": "1963860",
    "end": "1970760"
  },
  {
    "text": "that would then be caught in the logging bucket obviously in this case there is a further slight difference in that you",
    "start": "1970760",
    "end": "1977480"
  },
  {
    "text": "would want to share your access to your bucket but you wouldn't want your",
    "start": "1977480",
    "end": "1983570"
  },
  {
    "text": "auditors account to be in your organisation since you're already going to be paying them",
    "start": "1983570",
    "end": "1989330"
  },
  {
    "text": "it plenty enough to be auditing you you don't necessarily want to have their bill from their account roll up into",
    "start": "1989330",
    "end": "1995090"
  },
  {
    "text": "your bill so that you are not paying for the audit tools that they're using finally if you want to take this to its",
    "start": "1995090",
    "end": "2002290"
  },
  {
    "text": "logical conclusion nothing stops you giving exactly the same access to your",
    "start": "2002290",
    "end": "2007690"
  },
  {
    "text": "industry regulator now we've had a chat with a number of regulators about this",
    "start": "2007690",
    "end": "2014010"
  },
  {
    "text": "they think it's a really interesting idea they aren't all geared up to be",
    "start": "2014010",
    "end": "2019330"
  },
  {
    "text": "able to do this from the point of view of scale yet but it's something that they could potentially do and find",
    "start": "2019330",
    "end": "2026380"
  },
  {
    "text": "useful obviously they would need a fairly sizable infrastructure to do this if they're if they're ingesting log data",
    "start": "2026380",
    "end": "2034240"
  },
  {
    "text": "from all the entities in the industry that they're regulating but it can be scaled you can you can put you can put",
    "start": "2034240",
    "end": "2042430"
  },
  {
    "text": "Kinesis queues in the way as needed and essentially deal with it when it comes",
    "start": "2042430",
    "end": "2048940"
  },
  {
    "start": "2045000",
    "end": "2140000"
  },
  {
    "text": "to actually doing auto-response you've probably all seen a few things over the",
    "start": "2048940",
    "end": "2054970"
  },
  {
    "text": "years so one there's a popular diagram where essentially you have a couple of flows",
    "start": "2054970",
    "end": "2060669"
  },
  {
    "text": "here people make calls to endpoints these generate records in cloud trail",
    "start": "2060670",
    "end": "2066129"
  },
  {
    "text": "which go in a bucket but they also wind up triggering cloud watch events that can trigger lambda functions that can",
    "start": "2066130",
    "end": "2072460"
  },
  {
    "text": "then either do stuff using using i''m roles in terms of automated remediation",
    "start": "2072460",
    "end": "2078940"
  },
  {
    "text": "or if the thing that has been found is sufficiently subtle and complicated that",
    "start": "2078940",
    "end": "2084550"
  },
  {
    "text": "a human needs to be put in the loop they can go and post details of what the",
    "start": "2084550",
    "end": "2089560"
  },
  {
    "text": "event is to an SNS topic that your security team are watching if you collapse that down a bit more you can",
    "start": "2089560",
    "end": "2096730"
  },
  {
    "text": "look at it in terms of someone who has access to api's may not actually be that",
    "start": "2096730",
    "end": "2102880"
  },
  {
    "text": "confident or capable with them actually making API calls those triggering events",
    "start": "2102880",
    "end": "2108850"
  },
  {
    "text": "and those triggering lambda responders now our friends at Capital One have gone",
    "start": "2108850",
    "end": "2114070"
  },
  {
    "text": "and put a nice framework together around this called cloud custodian anyone in here using it just a couple",
    "start": "2114070",
    "end": "2121250"
  },
  {
    "text": "it's worth a look even if you don't want to run the whole framework if you want to look at being able to do automated",
    "start": "2121250",
    "end": "2128300"
  },
  {
    "text": "response it's a great source of pre-built lambda functions that you just maybe need to tweak a little bit in",
    "start": "2128300",
    "end": "2135520"
  },
  {
    "text": "addition to actually humans generating events God Duty does so too so guard",
    "start": "2135520",
    "end": "2144260"
  },
  {
    "start": "2140000",
    "end": "2285000"
  },
  {
    "text": "duty outputs child watch events when it as when it actually makes a finding who",
    "start": "2144260",
    "end": "2151160"
  },
  {
    "text": "he's using guard duty right I would hope by the end of the week that's everybody turning it on is very",
    "start": "2151160",
    "end": "2158780"
  },
  {
    "text": "much a no-brainer you get a 30 day free trial and it says over the course of",
    "start": "2158780",
    "end": "2164000"
  },
  {
    "text": "that 30 days how much it would be charging you if it was charging you but in terms of the threat intelligence you",
    "start": "2164000",
    "end": "2170750"
  },
  {
    "text": "can get out of it if you cleave to block heed Martin's cyber kill chain model",
    "start": "2170750",
    "end": "2176090"
  },
  {
    "text": "there's a whole bunch of useful and subtle stuff that it can trap on and in",
    "start": "2176090",
    "end": "2182570"
  },
  {
    "text": "terms of how those further get categorized I would definitely look at the full list up at the top right there",
    "start": "2182570",
    "end": "2188440"
  },
  {
    "text": "the guard duty team are always adding new findings so pretty much any list in",
    "start": "2188440",
    "end": "2193970"
  },
  {
    "text": "any presentation is out of date unless it's one of the guard duty team that's giving it that list at the top right is",
    "start": "2193970",
    "end": "2200089"
  },
  {
    "text": "the definitive one and how they normally set these things up is guard duty",
    "start": "2200089",
    "end": "2206089"
  },
  {
    "text": "generates an event that goes into cloud watch you use cloud watch alarms to match on a rule and then you go and do",
    "start": "2206089",
    "end": "2213140"
  },
  {
    "text": "stuff we have a lambda function in our AWS samples account on github that will",
    "start": "2213140",
    "end": "2219260"
  },
  {
    "text": "pick up guard duty findings and based on the severity the guard duty assigns them it can either it can post them to a",
    "start": "2219260",
    "end": "2226369"
  },
  {
    "text": "number of places typically people send low severity findings to a slack noise",
    "start": "2226369",
    "end": "2232130"
  },
  {
    "text": "channel that's just there for logging stuff medium severity stuff goes to a",
    "start": "2232130",
    "end": "2237770"
  },
  {
    "text": "slack channel that the admins are actually paid to keep an eye on and anything high severity can go to",
    "start": "2237770",
    "end": "2243650"
  },
  {
    "text": "somewhere like pages UT to get people out of bed if needed if you go looking",
    "start": "2243650",
    "end": "2248930"
  },
  {
    "text": "at the actual anatomy of a cloud watch event this is an example here and really",
    "start": "2248930",
    "end": "2254420"
  },
  {
    "text": "the interesting things happen in the latter half of it so we can see the Bob our hapless intern",
    "start": "2254420",
    "end": "2260530"
  },
  {
    "text": "so we have attribution on the event here which config rules doesn't give you has",
    "start": "2260530",
    "end": "2266619"
  },
  {
    "text": "tried stopping cloud trail running in US East and he tried doing that with the",
    "start": "2266619",
    "end": "2272560"
  },
  {
    "text": "given access key and he executed that call from signing Amazon AWS com which",
    "start": "2272560",
    "end": "2278109"
  },
  {
    "text": "is the AWS console rather than one of his IP addresses on let's say his laptop",
    "start": "2278109",
    "end": "2283440"
  },
  {
    "text": "so we can trap on all this and actually do useful stuff with it and we've got a",
    "start": "2283440",
    "end": "2288970"
  },
  {
    "text": "nice example here from a couple of friends of mine and a couple of reinvents ago it's still perfectly valid",
    "start": "2288970",
    "end": "2295119"
  },
  {
    "text": "it still works well so it's it's actually my preferred example to give so here's Bob Ching an ec2 instance in",
    "start": "2295119",
    "end": "2304030"
  },
  {
    "text": "order to do so we need to know what the ami is that the instance is being launched from we have a subnet ID as to",
    "start": "2304030",
    "end": "2310839"
  },
  {
    "text": "where as to what network it's being attached to we have a we have security group IDs because you have to in terms",
    "start": "2310839",
    "end": "2316960"
  },
  {
    "text": "of actually putting those on your on your en eyes that will go we can trap",
    "start": "2316960",
    "end": "2322569"
  },
  {
    "text": "that with the cloud watch event and then actually trigger a lambda function off of that to see if that combination of",
    "start": "2322569",
    "end": "2329920"
  },
  {
    "text": "things is approved or not we don't want to actually go hardwiring our policy",
    "start": "2329920",
    "end": "2335410"
  },
  {
    "text": "into our lambda function especially since it's probably going to change on a fairly regular basis as we update our",
    "start": "2335410",
    "end": "2341079"
  },
  {
    "text": "a.m. eyes so policy would naturally reside in something like dynamodb and we",
    "start": "2341079",
    "end": "2347800"
  },
  {
    "text": "can express our policy as tuples of all the allowed combinations that we have so",
    "start": "2347800",
    "end": "2352900"
  },
  {
    "text": "is Bob's combination one that we're happy with we can actually see what he's",
    "start": "2352900",
    "end": "2358329"
  },
  {
    "text": "gone and stood up and no it isn't so at this point we can kick off another event",
    "start": "2358329",
    "end": "2364240"
  },
  {
    "text": "that kicks off another lambda function that goes and kills Bob's instance now obviously we have a race condition going",
    "start": "2364240",
    "end": "2370960"
  },
  {
    "text": "on here since Bob started his instance and we want this whole cycle to complete",
    "start": "2370960",
    "end": "2376810"
  },
  {
    "text": "before that instance actually goes binding listeners to ports and doing things it shouldn't be in practice it",
    "start": "2376810",
    "end": "2383260"
  },
  {
    "text": "takes a minute maybe two to stand up even a minimal line X based ec2 instance and it takes",
    "start": "2383260",
    "end": "2391700"
  },
  {
    "text": "less than that for the cycle that we've got on-screen to complete so we are going to win",
    "start": "2391700",
    "end": "2396920"
  },
  {
    "text": "and Bob's instance is never actually going to spring fully into life now a quest this is all fair enough",
    "start": "2396920",
    "end": "2403940"
  },
  {
    "text": "the question then comes for pretty much any security technology you may want to deploy how do you go about doing this",
    "start": "2403940",
    "end": "2411230"
  },
  {
    "text": "multi account really you've got two options you can either treat a multi",
    "start": "2411230",
    "end": "2417470"
  },
  {
    "text": "account environment as a collection of single account in four environments and just replicate excuse me just replicate",
    "start": "2417470",
    "end": "2425360"
  },
  {
    "text": "what you already do across multiple accounts there are good and bad reasons as to why mark might want to do this and",
    "start": "2425360",
    "end": "2433100"
  },
  {
    "text": "you still need to manage the whole environment in each account of course if you've got different accounts for",
    "start": "2433100",
    "end": "2438560"
  },
  {
    "text": "different purposes that may actually be a good thing to do alternatively you can split the environment into two so that",
    "start": "2438560",
    "end": "2447020"
  },
  {
    "start": "2440000",
    "end": "2525000"
  },
  {
    "text": "you have your detectors in your individual accounts and you centralize your responders so obviously this gives",
    "start": "2447020",
    "end": "2454760"
  },
  {
    "text": "you less management overhead but it means that everything has to be beholden to relatively common policy this is",
    "start": "2454760",
    "end": "2461150"
  },
  {
    "text": "probably is probably easier to understand graphically so if we have account one here with stuff in it we",
    "start": "2461150",
    "end": "2467030"
  },
  {
    "text": "just go putting the same thing in account two whereas if we have option two we actually go and use things like",
    "start": "2467030",
    "end": "2474170"
  },
  {
    "text": "the cloud watch events bus and cross account roles on on our lambda functions",
    "start": "2474170",
    "end": "2479840"
  },
  {
    "text": "in order to centralize our detection our propagation of actions our detection and",
    "start": "2479840",
    "end": "2486260"
  },
  {
    "text": "response now something that some friends of mine in AWS professional services",
    "start": "2486260",
    "end": "2492260"
  },
  {
    "text": "have done which they only got going sufficiently recently that it hasn't made it onto anybody's slides that I'm",
    "start": "2492260",
    "end": "2498980"
  },
  {
    "text": "aware of is they've actually gone and built a reference architecture for this that has some God do to responders and a",
    "start": "2498980",
    "end": "2507020"
  },
  {
    "text": "whole bunch of other useful lambda functions in it it's called arrow as in the chocolate bar and they they're",
    "start": "2507020",
    "end": "2514460"
  },
  {
    "text": "exhibiting it in the quad at the Aria in the builders fair so if the builders fair is still open please go along",
    "start": "2514460",
    "end": "2521390"
  },
  {
    "text": "to have a look at this they should be demoing it now we got on to what is",
    "start": "2521390",
    "end": "2526640"
  },
  {
    "start": "2525000",
    "end": "2740000"
  },
  {
    "text": "probably my favorite bit full disclosure I spent a lot of time working at Sun",
    "start": "2526640",
    "end": "2532700"
  },
  {
    "text": "Microsystems a bunch of years ago and about half that time probably about five",
    "start": "2532700",
    "end": "2537710"
  },
  {
    "text": "years worth I was doing interesting stuff for interesting people in UK",
    "start": "2537710",
    "end": "2542930"
  },
  {
    "text": "government involving multi-level cross-domain stuff on trusted Solaris mandatory",
    "start": "2542930",
    "end": "2548960"
  },
  {
    "text": "access control when you get your head around it it sort of works your way into your head and stays there so if you if",
    "start": "2548960",
    "end": "2555890"
  },
  {
    "text": "for those of you who are old enough to remember the mitre compartmented Mode workstation spec that trusted Solaris",
    "start": "2555890",
    "end": "2563510"
  },
  {
    "text": "and other things like HP virtual vault came from I probably run a compartmented",
    "start": "2563510",
    "end": "2568790"
  },
  {
    "text": "mode cortex these days and I actually think that mandatory access control and",
    "start": "2568790",
    "end": "2574430"
  },
  {
    "text": "multi-level cross-domain environments have definite use in certain very",
    "start": "2574430",
    "end": "2580460"
  },
  {
    "text": "carefully scoped contexts organizations actually enables you to do mandatory",
    "start": "2580460",
    "end": "2588230"
  },
  {
    "text": "access control in AWS the first actual feature for mandatory access control was",
    "start": "2588230",
    "end": "2594260"
  },
  {
    "text": "Glacia volt lock that came out a couple of years ago as you may have seen from earlier this week",
    "start": "2594260",
    "end": "2599360"
  },
  {
    "text": "we now have s3 object lock which I'm very happy to talk about now and you may",
    "start": "2599360",
    "end": "2605060"
  },
  {
    "text": "want to actually use object lock on some of the on the objects in your in your consolidated logging bucket as well to",
    "start": "2605060",
    "end": "2612530"
  },
  {
    "text": "make sure that logs can't be tampered with so with organizations you create",
    "start": "2612530",
    "end": "2618620"
  },
  {
    "text": "groups of accounts you can actually nest these up to five deep and then you use",
    "start": "2618620",
    "end": "2624350"
  },
  {
    "text": "organizations to attach service control policies so service control policies",
    "start": "2624350",
    "end": "2629900"
  },
  {
    "text": "what they are and what they do they are very much like I am policies but at this",
    "start": "2629900",
    "end": "2635900"
  },
  {
    "text": "particular point in time there's a couple of things there are they aren't able to do they don't support conditions",
    "start": "2635900",
    "end": "2641060"
  },
  {
    "text": "and they don't support fine-grained resources so your resource field needs to be a star but you can set them up to",
    "start": "2641060",
    "end": "2648620"
  },
  {
    "text": "whitelist or black lip when I write them I'm always blacklisting and they effectively act",
    "start": "2648620",
    "end": "2654540"
  },
  {
    "text": "as an invisible prepend on the front of the ion policy in the account that the",
    "start": "2654540",
    "end": "2660990"
  },
  {
    "text": "in the account in your organization that the SCP is being applied to this is the",
    "start": "2660990",
    "end": "2666510"
  },
  {
    "text": "neat thing root is actually in scope to be affected by scps so SCPs",
    "start": "2666510",
    "end": "2674100"
  },
  {
    "text": "are invisible to anyone in the child account including root they're immutable and they're applied to all users so it",
    "start": "2674100",
    "end": "2681960"
  },
  {
    "text": "looks like system policy in an old school be one mandatory access control environment any SELinux jockeys in the",
    "start": "2681960",
    "end": "2689880"
  },
  {
    "text": "audience or trusted BSD one or two okay",
    "start": "2689880",
    "end": "2696300"
  },
  {
    "text": "but I think mandatory access control is a really really good thing for highly",
    "start": "2696300",
    "end": "2703350"
  },
  {
    "text": "secure systems but it can be fun to manage once you've actually built an old",
    "start": "2703350",
    "end": "2710310"
  },
  {
    "text": "school system or or something like selinux if you want to change your system policy you have to completely",
    "start": "2710310",
    "end": "2716190"
  },
  {
    "text": "rebuild the system there's no other way around it with SCPs while you still have mandatory access",
    "start": "2716190",
    "end": "2723000"
  },
  {
    "text": "control from the point of view of the account the SCP has been applied to you",
    "start": "2723000",
    "end": "2728430"
  },
  {
    "text": "can actually do further things where the SCP can be revoked in the event of their",
    "start": "2728430",
    "end": "2734730"
  },
  {
    "text": "needing to be a pre-approved change so",
    "start": "2734730",
    "end": "2740300"
  },
  {
    "start": "2740000",
    "end": "3105000"
  },
  {
    "text": "I'll get onto that in just a moment most people also think about applying scps",
    "start": "2740300",
    "end": "2746580"
  },
  {
    "text": "when an account gets created to prevent services that you don't want to use being used and indeed this is that this",
    "start": "2746580",
    "end": "2752100"
  },
  {
    "text": "is the view that landing zone takes at the moment that's actually half the story you can go standing up assets in your",
    "start": "2752100",
    "end": "2759720"
  },
  {
    "text": "accounts and then apply an SCP after the fact in order to make them immutable how",
    "start": "2759720",
    "end": "2764790"
  },
  {
    "text": "would you for example like the idea of having lambda functions that are execute only we've already seen how you can use",
    "start": "2764790",
    "end": "2772380"
  },
  {
    "text": "lambda functions for doing lob redaction and also for doing auto response if",
    "start": "2772380",
    "end": "2778470"
  },
  {
    "text": "those if those lambda functions especially in a log redaction context are in your developer sandbox account",
    "start": "2778470",
    "end": "2784710"
  },
  {
    "text": "you don't want your developer even if they're routing that sandbox account to go messing up",
    "start": "2784710",
    "end": "2790150"
  },
  {
    "text": "the operation of your lambda function so put an SCP on it that can actually stop",
    "start": "2790150",
    "end": "2795369"
  },
  {
    "text": "them doing that unless of course their job happens to be writing lambda functions so most people just use a CPS",
    "start": "2795369",
    "end": "2804519"
  },
  {
    "text": "like this to disable services a very common baseline which landing zone also",
    "start": "2804519",
    "end": "2811239"
  },
  {
    "text": "uses is to stop logging being disabled so you've got a little SCP here to stop",
    "start": "2811239",
    "end": "2817989"
  },
  {
    "text": "cloud trail being disabled you can do the same thing for cloud watch and vpz",
    "start": "2817989",
    "end": "2823450"
  },
  {
    "text": "flow logs and config one thing but actually s3 object lock interacts with",
    "start": "2823450",
    "end": "2832299"
  },
  {
    "text": "in interesting ways it doesn't quite obsolete it is one to make the existence",
    "start": "2832299",
    "end": "2837489"
  },
  {
    "text": "of an s3 bucket and the policy applied to it immutable so you could actually",
    "start": "2837489",
    "end": "2843489"
  },
  {
    "text": "make objects in s3 immutable as well if you were to put if you were to have s3",
    "start": "2843489",
    "end": "2850839"
  },
  {
    "text": "delete objects in that list they're putting s3 put objects in there could be",
    "start": "2850839",
    "end": "2855849"
  },
  {
    "text": "done as well if you want to have the most static of static websites served out of your s3 bucket but then you",
    "start": "2855849",
    "end": "2861999"
  },
  {
    "text": "wouldn't be able to append things either if you had versioning on your bucket then you still wouldn't then you could",
    "start": "2861999",
    "end": "2868329"
  },
  {
    "text": "actually deal with this as you could deal with this that way I've already mentioned making lambda functions",
    "start": "2868329",
    "end": "2874359"
  },
  {
    "text": "immutable you can do that with this which still allows you to go and call your lambda functions plus read",
    "start": "2874359",
    "end": "2880690"
  },
  {
    "text": "information about their status and their versioning and so forth also a thing I",
    "start": "2880690",
    "end": "2886029"
  },
  {
    "text": "see in a couple of banks so I I know a few investment banks who do lots of big",
    "start": "2886029",
    "end": "2893469"
  },
  {
    "text": "financial calculations HPC stuff in AWS environments and they want to ensure",
    "start": "2893469",
    "end": "2900219"
  },
  {
    "text": "that these calculations which of course inform their market position stay really",
    "start": "2900219",
    "end": "2905859"
  },
  {
    "text": "really really confidential the way they do this I think is actually really rather neat they've got an account with",
    "start": "2905859",
    "end": "2913839"
  },
  {
    "text": "a V PC in it and a really big easy to compute farm but they don't actually",
    "start": "2913839",
    "end": "2919930"
  },
  {
    "text": "have an Internet gateway or vgw or Direct",
    "start": "2919930",
    "end": "2924970"
  },
  {
    "text": "Connect coming into that environment they just have an s3 bucket with a V PC",
    "start": "2924970",
    "end": "2931090"
  },
  {
    "text": "private endpoint so they put their data in the s3 bucket and then they use",
    "start": "2931090",
    "end": "2937750"
  },
  {
    "text": "Systems Manager run command to go and kick off the batch job to do their HPC",
    "start": "2937750",
    "end": "2943390"
  },
  {
    "text": "calculations the the script that they call with run command does the",
    "start": "2943390",
    "end": "2949240"
  },
  {
    "text": "calculations puts the results back in the bucket at which point at which point",
    "start": "2949240",
    "end": "2954640"
  },
  {
    "text": "they the the instances then quiesce themselves so they're able to do that",
    "start": "2954640",
    "end": "2960010"
  },
  {
    "text": "command and control using Systems Manager with no direct internet",
    "start": "2960010",
    "end": "2965380"
  },
  {
    "text": "connection I think that's kind of cool and you can use this to stop Internet",
    "start": "2965380",
    "end": "2971170"
  },
  {
    "text": "gateways being put on your V pcs or indeed having your V pcs peer to other V",
    "start": "2971170",
    "end": "2977740"
  },
  {
    "text": "pcs that may have Internet gateways on them because you want to close off that option as well in terms of what to put",
    "start": "2977740",
    "end": "2985060"
  },
  {
    "text": "in an SCP and what to put in I am obviously as I said I s CPS right now",
    "start": "2985060",
    "end": "2991660"
  },
  {
    "text": "there are certain things they don't do if you want to do hard enforcement",
    "start": "2991660",
    "end": "2997180"
  },
  {
    "text": "certainly in a production environment of ensuring that assets can't be deployed",
    "start": "2997180",
    "end": "3003270"
  },
  {
    "text": "outside of a given region using AWS requested region as we discussed earlier",
    "start": "3003270",
    "end": "3008630"
  },
  {
    "text": "there is a way around this however you could actually set up your ion policy",
    "start": "3008630",
    "end": "3014460"
  },
  {
    "text": "with that condition in it and then use an SCP to make your ion policy immutable",
    "start": "3014460",
    "end": "3020120"
  },
  {
    "text": "so there are ways and means scps are a little bit of a blunt instrument",
    "start": "3020120",
    "end": "3026730"
  },
  {
    "text": "still but sometimes a big hammer is what's needed on permissions so in terms",
    "start": "3026730",
    "end": "3035820"
  },
  {
    "text": "of how to actually go about applying this I like to think of it in terms of a multi-stage approach landing zone",
    "start": "3035820",
    "end": "3042540"
  },
  {
    "text": "actually just does the first one at the moment in terms of it doesn't quite deal",
    "start": "3042540",
    "end": "3049650"
  },
  {
    "text": "with the immutability scps yet but it's something I'm talk to the landing zone builders team about",
    "start": "3049650",
    "end": "3056840"
  },
  {
    "text": "as I mentioned earlier you do have mandatory access control but there is",
    "start": "3056840",
    "end": "3063920"
  },
  {
    "text": "still the ability to revoke the SCP provided you're inappropriately permissioned entity in the",
    "start": "3063920",
    "end": "3069020"
  },
  {
    "text": "organization's master so you need to have the permissions you need to be able",
    "start": "3069020",
    "end": "3074090"
  },
  {
    "text": "to have the same kind of degree of privilege that was used to put the SCP",
    "start": "3074090",
    "end": "3079520"
  },
  {
    "text": "on in the first place and what this means is that if you need to make a legitimate change the owner of the",
    "start": "3079520",
    "end": "3085280"
  },
  {
    "text": "account and therefore the I am policy and the owner of the control to apply",
    "start": "3085280",
    "end": "3090650"
  },
  {
    "text": "and done apply the SCP II need to work together so if you have a requirement in",
    "start": "3090650",
    "end": "3096200"
  },
  {
    "text": "your human policy for doing two-person rules you now have the means of implementing a technical control to give",
    "start": "3096200",
    "end": "3103220"
  },
  {
    "text": "you one as well a little bit about third-party tooling there's a whole",
    "start": "3103220",
    "end": "3113960"
  },
  {
    "start": "3105000",
    "end": "3343000"
  },
  {
    "text": "number of popular security tools in the AWS marketplace which do various",
    "start": "3113960",
    "end": "3120710"
  },
  {
    "text": "security and compliance checking in a in an AWS account your mileage may vary",
    "start": "3120710",
    "end": "3127840"
  },
  {
    "text": "plus of course there's things like cloud custodian for doing this in as open",
    "start": "3127840",
    "end": "3133970"
  },
  {
    "text": "source your mileage may vary when it comes to getting these tools working in",
    "start": "3133970",
    "end": "3139040"
  },
  {
    "text": "a multi account environment when it comes to initial tool selection who has",
    "start": "3139040",
    "end": "3145130"
  },
  {
    "text": "come across this rather neat thing in terms of the marketplace regulatory",
    "start": "3145130",
    "end": "3150530"
  },
  {
    "text": "model mapper from all grass nobody this",
    "start": "3150530",
    "end": "3156500"
  },
  {
    "text": "is interesting go have a look go have a look on it on the marketplace if my memory serves",
    "start": "3156500",
    "end": "3161900"
  },
  {
    "text": "correctly it's free to use but what you can actually do with it is you can set",
    "start": "3161900",
    "end": "3167600"
  },
  {
    "text": "it up with the compliance frameworks that you need to meet and it will give you this little pinwheel a chart here",
    "start": "3167600",
    "end": "3174950"
  },
  {
    "text": "with that with the standard involved breaking it down into sections on the inner wheel and then on the outer wheel",
    "start": "3174950",
    "end": "3181820"
  },
  {
    "text": "giving you all the individual controls click on one of the individual controls and it will take you",
    "start": "3181820",
    "end": "3187760"
  },
  {
    "text": "to AWS marketplace products that implement that control and you can even",
    "start": "3187760",
    "end": "3193460"
  },
  {
    "text": "go buying them straight out of it as well but it gives you the options as to as to what you might want to look at for",
    "start": "3193460",
    "end": "3198920"
  },
  {
    "text": "implementing a particular control and then you can apply these checks to the",
    "start": "3198920",
    "end": "3204620"
  },
  {
    "text": "tools that are available so in terms of how your tool is going to work some",
    "start": "3204620",
    "end": "3211190"
  },
  {
    "text": "tools just do log analog analysis at which point you can give them access to your centralized logging bucket and they",
    "start": "3211190",
    "end": "3218240"
  },
  {
    "text": "can determine what the disposition of your assets are and to make that finding straight from that some of the tools",
    "start": "3218240",
    "end": "3225350"
  },
  {
    "text": "need to read only role you'd want to verify with the vendor that it works with cross account roles normally they",
    "start": "3225350",
    "end": "3232460"
  },
  {
    "text": "do any vendors in the room hands up please on marketplace not this time okay I have",
    "start": "3232460",
    "end": "3239690"
  },
  {
    "text": "I have asked the vendors very nicely if they will actually make it clear in",
    "start": "3239690",
    "end": "3245420"
  },
  {
    "text": "their product descriptions on the marketplace about the multi account",
    "start": "3245420",
    "end": "3250700"
  },
  {
    "text": "awareness of their products and some are taking it to heart and doing so but",
    "start": "3250700",
    "end": "3256520"
  },
  {
    "text": "otherwise you just wind up creating a cross account role with the same permissions as your audit role once your",
    "start": "3256520",
    "end": "3263120"
  },
  {
    "text": "tool has actually done its work it needs to report if it's posting information to",
    "start": "3263120",
    "end": "3269210"
  },
  {
    "text": "an SNS topic that should work just fine you shouldn't actually need to change anything and for cloud watcher events if",
    "start": "3269210",
    "end": "3275720"
  },
  {
    "text": "it sends findings through that then you can actually get it to use the cloud",
    "start": "3275720",
    "end": "3280790"
  },
  {
    "text": "watch events bus again just verify with the vendor that it can so just to wrap",
    "start": "3280790",
    "end": "3286160"
  },
  {
    "text": "up few resources various papers and blogs and online documentation in terms",
    "start": "3286160",
    "end": "3294350"
  },
  {
    "text": "of governance at scale which I mentioned earlier they do have a paper that came out earlier this year which is worth a",
    "start": "3294350",
    "end": "3301520"
  },
  {
    "text": "read regarding what their take on governance is it can apply very nicely to a multi account environment and the",
    "start": "3301520",
    "end": "3309020"
  },
  {
    "text": "usual set of videos that we record that are recommended watching for um general",
    "start": "3309020",
    "end": "3315890"
  },
  {
    "text": "security as in general AWS security education so haven't quite come in in terms of",
    "start": "3315890",
    "end": "3323450"
  },
  {
    "text": "wrapping up quickly enough for you to be able to get to the governor's that scale session you will have missed the first",
    "start": "3323450",
    "end": "3329330"
  },
  {
    "text": "few minutes of it if you want to - there that's as I said that's probably a good thing to do there is a deep dive",
    "start": "3329330",
    "end": "3336380"
  },
  {
    "text": "tomorrow but that's me thank you I'm happy to take questions afterwards",
    "start": "3336380",
    "end": "3343300"
  },
  {
    "text": "[Applause]",
    "start": "3343300",
    "end": "3345789"
  }
]