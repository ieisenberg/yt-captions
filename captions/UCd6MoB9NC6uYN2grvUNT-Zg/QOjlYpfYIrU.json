[
  {
    "start": "0",
    "end": "40000"
  },
  {
    "text": "- [Mahmoud] Hi, everyone.",
    "start": "450",
    "end": "2190"
  },
  {
    "text": "Amazon Cognito User Pools",
    "start": "2190",
    "end": "3540"
  },
  {
    "text": "is a service that AWS customers use",
    "start": "3540",
    "end": "5640"
  },
  {
    "text": "for managing identity of their customers.",
    "start": "5640",
    "end": "8476"
  },
  {
    "text": "It is a fully managed service",
    "start": "8476",
    "end": "10019"
  },
  {
    "text": "for all customer identity and\naccess management use cases.",
    "start": "10020",
    "end": "13410"
  },
  {
    "text": "Today, Amazon Cognito and\nAWS Web Application Firewall",
    "start": "13410",
    "end": "17160"
  },
  {
    "text": "jointly launched a native integration",
    "start": "17160",
    "end": "19380"
  },
  {
    "text": "that brings significant security benefits",
    "start": "19380",
    "end": "21449"
  },
  {
    "text": "to Amazon Cognito customers.",
    "start": "21450",
    "end": "22983"
  },
  {
    "text": "This allows you to protect identity layer",
    "start": "24000",
    "end": "26220"
  },
  {
    "text": "of your applications\nwhich use Amazon Cognito",
    "start": "26220",
    "end": "28289"
  },
  {
    "text": "from common web exploits, DDoS attacks,",
    "start": "28290",
    "end": "30900"
  },
  {
    "text": "unwanted bot traffic,",
    "start": "30900",
    "end": "32640"
  },
  {
    "text": "and any other traffic that can\nconsume extensive resources",
    "start": "32640",
    "end": "35760"
  },
  {
    "text": "and affect availability of\nyour resources and application.",
    "start": "35760",
    "end": "39480"
  },
  {
    "text": "Let's take a look at how this works.",
    "start": "39480",
    "end": "41313"
  },
  {
    "start": "40000",
    "end": "184000"
  },
  {
    "text": "You begin by defining\nweb access control list,",
    "start": "42690",
    "end": "45210"
  },
  {
    "text": "or web ACL in WAF.",
    "start": "45210",
    "end": "46323"
  },
  {
    "text": "This includes one or more security rules",
    "start": "47400",
    "end": "49650"
  },
  {
    "text": "with which you would like\nto enforce on your tracker.",
    "start": "49650",
    "end": "52020"
  },
  {
    "text": "For example, you can\nhave great limiting rules",
    "start": "52020",
    "end": "54360"
  },
  {
    "text": "to make sure that clients",
    "start": "54360",
    "end": "55273"
  },
  {
    "text": "don't send more than a\nspecific number of requests",
    "start": "55273",
    "end": "58079"
  },
  {
    "text": "within a few minutes.",
    "start": "58080",
    "end": "59910"
  },
  {
    "text": "You can also add deny\nlist or allow list tools.",
    "start": "59910",
    "end": "63030"
  },
  {
    "text": "You can also filter traffic",
    "start": "63030",
    "end": "64379"
  },
  {
    "text": "based on geographic locations\nor specific patterns,",
    "start": "64380",
    "end": "67170"
  },
  {
    "text": "like a combination of\nheaders, user agents,",
    "start": "67170",
    "end": "70049"
  },
  {
    "text": "and many other possibilities.",
    "start": "70050",
    "end": "71820"
  },
  {
    "text": "You can even write more\nsophisticated rules",
    "start": "71820",
    "end": "74220"
  },
  {
    "text": "that apply to certain application clients",
    "start": "74220",
    "end": "76590"
  },
  {
    "text": "or specific API calls in Cognito.",
    "start": "76590",
    "end": "79020"
  },
  {
    "text": "This information is available",
    "start": "79020",
    "end": "80399"
  },
  {
    "text": "as headers in the requests,",
    "start": "80400",
    "end": "82260"
  },
  {
    "text": "and you can write rules\nthat target specific flows.",
    "start": "82260",
    "end": "85200"
  },
  {
    "text": "You can also use wide\nrange of managing rules",
    "start": "85200",
    "end": "88049"
  },
  {
    "text": "or rules available in the Marketplace",
    "start": "88050",
    "end": "89700"
  },
  {
    "text": "from AWS Security Partners.",
    "start": "89700",
    "end": "91323"
  },
  {
    "text": "This web ACL is then associated\nwith a Cognito user pool.",
    "start": "92460",
    "end": "96540"
  },
  {
    "text": "When Cognito user pool\nreceives authentication",
    "start": "96540",
    "end": "99270"
  },
  {
    "text": "or user management requests from clients,",
    "start": "99270",
    "end": "101880"
  },
  {
    "text": "which could be OAuth 2 endpoints",
    "start": "101880",
    "end": "103979"
  },
  {
    "text": "and out of the box hosted\nsign-up and sign-in pages,",
    "start": "103980",
    "end": "107190"
  },
  {
    "text": "or federation flows,",
    "start": "107190",
    "end": "108510"
  },
  {
    "text": "it could also be traffic",
    "start": "108510",
    "end": "110190"
  },
  {
    "text": "coming from web or mobile applications",
    "start": "110190",
    "end": "112080"
  },
  {
    "text": "using the SDK or DirectTrust\nAPI calls to Cognito user pool.",
    "start": "112080",
    "end": "116640"
  },
  {
    "text": "It could also be machine authentications",
    "start": "116640",
    "end": "118590"
  },
  {
    "text": "coming from the client credentials flow,",
    "start": "118590",
    "end": "121020"
  },
  {
    "text": "or backend authentications,",
    "start": "121020",
    "end": "122369"
  },
  {
    "text": "like things running in a\nproxy or backend components.",
    "start": "122370",
    "end": "125760"
  },
  {
    "text": "When Cognito receives this traffic,",
    "start": "125760",
    "end": "127830"
  },
  {
    "text": "it sends sanitized requests\nto WAF for inspection,",
    "start": "127830",
    "end": "131790"
  },
  {
    "text": "and WAF will run requests",
    "start": "131790",
    "end": "133439"
  },
  {
    "text": "against the web ACL that is\nassociated with the user pool,",
    "start": "133440",
    "end": "136620"
  },
  {
    "text": "and will make a decision.",
    "start": "136620",
    "end": "138659"
  },
  {
    "text": "If the decision is to allow the request,",
    "start": "138660",
    "end": "140737"
  },
  {
    "text": "Cognito moves on with\nprocessing the request.",
    "start": "140737",
    "end": "143160"
  },
  {
    "text": "Otherwise, the proper response\nis return it to the client.",
    "start": "143160",
    "end": "146160"
  },
  {
    "text": "It could be a block, it\ncould be a custom response,",
    "start": "146160",
    "end": "148830"
  },
  {
    "text": "or it could be CAPTCHA,",
    "start": "148830",
    "end": "149910"
  },
  {
    "text": "in cases where Cognito controls the UI",
    "start": "149910",
    "end": "152002"
  },
  {
    "text": "and when it calls to flows",
    "start": "152002",
    "end": "153117"
  },
  {
    "text": "and the hosted sign-in and sign-up pages.",
    "start": "153117",
    "end": "156120"
  },
  {
    "text": "You can enable this feature\nin two different ways.",
    "start": "156120",
    "end": "158730"
  },
  {
    "text": "You can do this from the\nAmazon Cognito console",
    "start": "158730",
    "end": "161159"
  },
  {
    "text": "by going to the user pool\nproperties under the user pool,",
    "start": "161160",
    "end": "165570"
  },
  {
    "text": "and activating WAF and\nselecting a web ACL from there.",
    "start": "165570",
    "end": "169890"
  },
  {
    "text": "You can also do this\nfrom the AWS WAF console",
    "start": "169890",
    "end": "172590"
  },
  {
    "text": "by creating a new web ACL,",
    "start": "172590",
    "end": "174450"
  },
  {
    "text": "or editing the associations\nof an existing web ACL.",
    "start": "174450",
    "end": "177446"
  },
  {
    "text": "And now, you will see that\nAmazon Cognito user pools",
    "start": "177447",
    "end": "180150"
  },
  {
    "text": "is an available resource,",
    "start": "180150",
    "end": "181680"
  },
  {
    "text": "but you can associate a web ACL too.",
    "start": "181680",
    "end": "183870"
  },
  {
    "text": "Now, let's give it a try,\nand see how to configure it",
    "start": "183870",
    "end": "186780"
  },
  {
    "start": "184000",
    "end": "331000"
  },
  {
    "text": "and how this works in action.",
    "start": "186780",
    "end": "188490"
  },
  {
    "text": "From Amazon Cognito console,",
    "start": "188490",
    "end": "190320"
  },
  {
    "text": "you can go to user pool properties",
    "start": "190320",
    "end": "192060"
  },
  {
    "text": "under the user pool that you\nwould like to enable WAF on,",
    "start": "192060",
    "end": "194880"
  },
  {
    "text": "and now, you see that there\nis an AWS WAF card here.",
    "start": "194880",
    "end": "198690"
  },
  {
    "text": "You can edit this card and enable WAF,",
    "start": "198690",
    "end": "201810"
  },
  {
    "text": "and then, choose a web ACL to associate.",
    "start": "201810",
    "end": "203819"
  },
  {
    "text": "You can also click on these links",
    "start": "203820",
    "end": "205290"
  },
  {
    "text": "to take you to the WAF console",
    "start": "205290",
    "end": "206819"
  },
  {
    "text": "so you can create a new web\nACL if you would like to.",
    "start": "206820",
    "end": "210000"
  },
  {
    "text": "From the WAF admin console,",
    "start": "210000",
    "end": "210833"
  },
  {
    "text": "you'll begin by creating a web ACL.",
    "start": "210833",
    "end": "213002"
  },
  {
    "text": "Give your web ACL a name,",
    "start": "213900",
    "end": "215970"
  },
  {
    "text": "and from the associated resources here,",
    "start": "215970",
    "end": "218190"
  },
  {
    "text": "add a resource,",
    "start": "218190",
    "end": "219480"
  },
  {
    "text": "and select the Amazon Cognito user pool",
    "start": "219480",
    "end": "221700"
  },
  {
    "text": "that you would like to apply this to.",
    "start": "221700",
    "end": "223803"
  },
  {
    "text": "Then, you start adding\nsecurity rules to this web ACL.",
    "start": "225540",
    "end": "229439"
  },
  {
    "text": "Just as an example, let's\nadd a rate limiting,",
    "start": "229440",
    "end": "232050"
  },
  {
    "text": "choosing rate-based rule,",
    "start": "232050",
    "end": "233703"
  },
  {
    "text": "and giving a number for\nthe number of the requests",
    "start": "235170",
    "end": "237780"
  },
  {
    "text": "that you would like to\nallow from a single client",
    "start": "237780",
    "end": "240900"
  },
  {
    "text": "within five minutes.",
    "start": "240900",
    "end": "242519"
  },
  {
    "text": "The lowest number is 100,",
    "start": "242520",
    "end": "243963"
  },
  {
    "text": "and I will continue until\nI create this web ACL.",
    "start": "245130",
    "end": "248310"
  },
  {
    "text": "Now, all user management action\nthat come to this user pool",
    "start": "248310",
    "end": "251760"
  },
  {
    "text": "will be inspected against this web ACL.",
    "start": "251760",
    "end": "255120"
  },
  {
    "text": "If I try to access the\nhosted sign-in pages",
    "start": "255120",
    "end": "258120"
  },
  {
    "text": "of this user pool,",
    "start": "258120",
    "end": "259169"
  },
  {
    "text": "and I send more than 100\nrequests within five minutes,",
    "start": "259170",
    "end": "262109"
  },
  {
    "text": "I will be challenged with a CAPTCHA.",
    "start": "262110",
    "end": "264090"
  },
  {
    "text": "Let's see this in action.",
    "start": "264090",
    "end": "265560"
  },
  {
    "text": "I have already made more\nthan the allowed requests",
    "start": "265560",
    "end": "267960"
  },
  {
    "text": "within five minutes.",
    "start": "267960",
    "end": "269250"
  },
  {
    "text": "So, if I try to refresh this page,",
    "start": "269250",
    "end": "272160"
  },
  {
    "text": "I will be asked to\nconfirm that I am a human,",
    "start": "272160",
    "end": "274620"
  },
  {
    "text": "and this is the CAPTCHA\nresponse coming from WAF.",
    "start": "274620",
    "end": "277070"
  },
  {
    "text": "After solving the puzzle,\nthis is going to succeed,",
    "start": "278220",
    "end": "281130"
  },
  {
    "text": "and it will take me back to the hosted UI",
    "start": "281130",
    "end": "283230"
  },
  {
    "text": "with a session that is\nvalid for five minutes.",
    "start": "283230",
    "end": "285600"
  },
  {
    "text": "This is just one scenario,",
    "start": "285600",
    "end": "286740"
  },
  {
    "text": "but you can definitely define the rule",
    "start": "286740",
    "end": "288389"
  },
  {
    "text": "that applies to your\nsecurity requirements.",
    "start": "288390",
    "end": "291360"
  },
  {
    "text": "And if I try to send API\ncalls to this user pool,",
    "start": "291360",
    "end": "294389"
  },
  {
    "text": "the same rule will be enforced,",
    "start": "294390",
    "end": "296250"
  },
  {
    "text": "and if I exceed the 100\nrequests within five minutes,",
    "start": "296250",
    "end": "298920"
  },
  {
    "text": "I will receive a forbidden exception",
    "start": "298920",
    "end": "301050"
  },
  {
    "text": "that this request is blocked\ndue to CAPTCHA from WAF.",
    "start": "301050",
    "end": "304919"
  },
  {
    "text": "Because this is an API call",
    "start": "304920",
    "end": "306300"
  },
  {
    "text": "and there is no UI that Cognito controls,",
    "start": "306300",
    "end": "309000"
  },
  {
    "text": "this exception will be\nrelayed to the application,",
    "start": "309000",
    "end": "311580"
  },
  {
    "text": "and it will be up to the application",
    "start": "311580",
    "end": "313169"
  },
  {
    "text": "on how to handle this exception.",
    "start": "313170",
    "end": "315240"
  },
  {
    "text": "You can start using this feature today,",
    "start": "315240",
    "end": "317130"
  },
  {
    "text": "and if you are running\nworkload in production",
    "start": "317130",
    "end": "318930"
  },
  {
    "text": "that uses Amazon Cognito,",
    "start": "318930",
    "end": "320120"
  },
  {
    "text": "it is highly recommended\nthat you enable WAF",
    "start": "320120",
    "end": "322710"
  },
  {
    "text": "to get maximum protection",
    "start": "322710",
    "end": "323910"
  },
  {
    "text": "for your applications and resources.",
    "start": "323910",
    "end": "326100"
  },
  {
    "text": "Thank you.",
    "start": "326100",
    "end": "326933"
  }
]