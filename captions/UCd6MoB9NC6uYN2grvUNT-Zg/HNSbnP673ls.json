[
  {
    "start": "0",
    "end": "75000"
  },
  {
    "text": "hey guys thanks so much for coming this afternoon I know it's been a long day",
    "start": "30",
    "end": "5220"
  },
  {
    "text": "for some of you really appreciate you coming to joint I think this is really interesting an important one which is why I build to talk about it so",
    "start": "5220",
    "end": "11610"
  },
  {
    "text": "hopefully I can help you out with wherever you are at your journey on the multi-account adventure so basically",
    "start": "11610",
    "end": "19350"
  },
  {
    "text": "when you start out in a in an enterprise you'll find that these companies are at",
    "start": "19350",
    "end": "25769"
  },
  {
    "text": "different levels of maturity with how they organize and choreograph different teams and different accounts with their",
    "start": "25769",
    "end": "31650"
  },
  {
    "text": "cloud footprint and so what we're saying is that there's there's a lot of",
    "start": "31650",
    "end": "37040"
  },
  {
    "text": "confusion about how best to do this and so over the last sort of two or three",
    "start": "37040",
    "end": "42210"
  },
  {
    "text": "years we've had a lot of work done globally on how we can come together and",
    "start": "42210",
    "end": "47700"
  },
  {
    "text": "build up some best practices and advice on how you can set things up the right way so that's what we're going to cover",
    "start": "47700",
    "end": "54719"
  },
  {
    "text": "up in this session I'm going to run you through some best practices on setting up your deployment processes and DevOps",
    "start": "54719",
    "end": "60600"
  },
  {
    "text": "tooling across accounts and I'm going to run you through a little demo that we've got to show you kind of how it works",
    "start": "60600",
    "end": "65850"
  },
  {
    "text": "mechanically so what we do see this conversation often arising from is it",
    "start": "65850",
    "end": "74189"
  },
  {
    "text": "comes from challenges that people are having and the first one of these is generally coordination across teams so",
    "start": "74189",
    "end": "81420"
  },
  {
    "start": "75000",
    "end": "75000"
  },
  {
    "text": "when you're in a big enterprise complex environment particularly coordinating your applications that are connecting to",
    "start": "81420",
    "end": "88290"
  },
  {
    "text": "other applications in the company is complicated and then working with the teams is hard coordination of deployments getting to",
    "start": "88290",
    "end": "95159"
  },
  {
    "text": "rolled out coordinating with other teams on time slots all of this stuff is quite challenging and this is something that",
    "start": "95159",
    "end": "102600"
  },
  {
    "text": "still happens in the cloud if you don't orchestrate these things the right sort of way there's also environmental",
    "start": "102600",
    "end": "108869"
  },
  {
    "text": "complexity that comes to play so when you are when you've got these different",
    "start": "108869",
    "end": "114210"
  },
  {
    "text": "systems that are interconnected you don't want to break other people's systems or interfaces with your",
    "start": "114210",
    "end": "120000"
  },
  {
    "text": "deployments and so orchestration becomes really challenging and change can probe",
    "start": "120000",
    "end": "126180"
  },
  {
    "text": "processes have a tendency to slow things down and so in the modern world of agile",
    "start": "126180",
    "end": "131400"
  },
  {
    "text": "software development we're trying to find where you can take out some of the blockers and having multiple accounts is a way of",
    "start": "131400",
    "end": "139500"
  },
  {
    "text": "segregating things and ensuring there's a security blast radius that's contained if there's ever a compromise but at the",
    "start": "139500",
    "end": "146430"
  },
  {
    "text": "same time if you need to push something out to your dev environment and then you promote it in to your test environment",
    "start": "146430",
    "end": "152880"
  },
  {
    "text": "and then you've got multiple test environments and then you've got multiple teams interfacing with those test environments this becomes really",
    "start": "152880",
    "end": "158490"
  },
  {
    "text": "hard and it can slow things down a lot so these are some of the challenges that where we see quite commonly so when",
    "start": "158490",
    "end": "165720"
  },
  {
    "text": "you're starting out it usually starts with a proof-of-concept or a small",
    "start": "165720",
    "end": "171000"
  },
  {
    "text": "project and it might be one dev ops engineer or developer that just starts building stuff in the cloud and that",
    "start": "171000",
    "end": "178740"
  },
  {
    "text": "generally follows if it's successful with adding a couple more environments so usually what happens we see people",
    "start": "178740",
    "end": "186000"
  },
  {
    "text": "spin up another V PC within the same account as the existing dev V PC and",
    "start": "186000",
    "end": "191520"
  },
  {
    "text": "then for production there we see people really commonly making a good decision which is to isolate that production",
    "start": "191520",
    "end": "199260"
  },
  {
    "text": "environment is its own separate account so that's good then once companies start maturing their",
    "start": "199260",
    "end": "206310"
  },
  {
    "start": "204000",
    "end": "204000"
  },
  {
    "text": "practices generally we see people trying to get some sort of isolation you you've got a little bit of maturity in the way",
    "start": "206310",
    "end": "212100"
  },
  {
    "text": "you're doing your terraform or your cloud formation you start breaking things out and you realize that you can stamp out these different VP C's into",
    "start": "212100",
    "end": "219210"
  },
  {
    "text": "different accounts pretty easily that's a direction that we're seeing things sort of trending but what do you do with",
    "start": "219210",
    "end": "227190"
  },
  {
    "start": "226000",
    "end": "226000"
  },
  {
    "text": "the pipeline's what do you do with deployment well one thing we see quite commonly is the pipeline's getting set",
    "start": "227190",
    "end": "235410"
  },
  {
    "text": "up within each of the different environments that you've got running in the cloud and that's that's commonly",
    "start": "235410",
    "end": "241650"
  },
  {
    "text": "done because as an engineer you're generally just trying to get something done to get your your dev environment",
    "start": "241650",
    "end": "248540"
  },
  {
    "text": "automated so you know doing all the manual processes and that's a good intent but then when you want to roll",
    "start": "248540",
    "end": "254130"
  },
  {
    "text": "that out in other environments often people will take those same sort of scripts or configs and then push them",
    "start": "254130",
    "end": "259380"
  },
  {
    "text": "into those other environments problem with this is configuration drift so if",
    "start": "259380",
    "end": "264930"
  },
  {
    "text": "you define a pipeline you've got a of different steps in there but you've spent a whole bunch of time defining",
    "start": "264930",
    "end": "272110"
  },
  {
    "text": "really carefully and it works really well in that environment and then you push it into a different environment all",
    "start": "272110",
    "end": "277780"
  },
  {
    "text": "of the time there's a bit less diligence over making sure that it's consistently",
    "start": "277780",
    "end": "284260"
  },
  {
    "text": "applied in those environments so the scripts tend to take a path of their own even if you are using infrastructures",
    "start": "284260",
    "end": "289960"
  },
  {
    "text": "code to define these pipelines so there's a bit of a risk there that",
    "start": "289960",
    "end": "295830"
  },
  {
    "start": "295000",
    "end": "295000"
  },
  {
    "text": "pushing those pipelines into their own different environments is going to cause",
    "start": "295830",
    "end": "302020"
  },
  {
    "text": "your configuration to drift and you'll you're going to lose control over making sure that with the pattern that you used",
    "start": "302020",
    "end": "308740"
  },
  {
    "text": "to deploy a plot to deploy in per dev environment is exactly the same as your",
    "start": "308740",
    "end": "314740"
  },
  {
    "text": "test environment is exactly the same as your prada environment so that's one of the the challenges we see is very very",
    "start": "314740",
    "end": "321520"
  },
  {
    "text": "common the multiple pipelines pattern so iterating on that some people see this",
    "start": "321520",
    "end": "327340"
  },
  {
    "text": "issue and will build a single pipeline that spans across the accounts now this",
    "start": "327340",
    "end": "333100"
  },
  {
    "start": "328000",
    "end": "328000"
  },
  {
    "text": "is a great thing to do because what it means is that in a single view you can",
    "start": "333100",
    "end": "338860"
  },
  {
    "text": "see which exact phase in your deployment pipeline code is getting promoted",
    "start": "338860",
    "end": "344050"
  },
  {
    "text": "through so if it's getting pushed to your test environment you can see that what steps it needs to pass to get to",
    "start": "344050",
    "end": "350920"
  },
  {
    "text": "prod so that whole process is visible and it's also good because you're not going to have configuration drift to the",
    "start": "350920",
    "end": "357430"
  },
  {
    "text": "same extent you can make sure that the pattern that you're using to promote to dev is applied consistently to test and",
    "start": "357430",
    "end": "364960"
  },
  {
    "text": "deployed so that's a that's a good thing now the challenge with this approach is",
    "start": "364960",
    "end": "371530"
  },
  {
    "text": "that you are as you can see there you are you are hosting your pipeline in one",
    "start": "371530",
    "end": "377680"
  },
  {
    "text": "of those three environments so you kind of be kind of coupling your pattern really the configuration of how you",
    "start": "377680",
    "end": "384220"
  },
  {
    "text": "manage your change which is what a deployment is it's just change management you're you're pushing that",
    "start": "384220",
    "end": "391180"
  },
  {
    "text": "into into the context of your application so if it's hosted in your",
    "start": "391180",
    "end": "396310"
  },
  {
    "text": "dev environment what does that mean about your security profile when you're pushing stuff from dev into",
    "start": "396310",
    "end": "402590"
  },
  {
    "text": "prod yeah I would say it's problematic so what we're starting to see more and",
    "start": "402590",
    "end": "409250"
  },
  {
    "text": "more customers do is build out a pattern that looks a little bit more like this so you've got in this one you can see an",
    "start": "409250",
    "end": "416120"
  },
  {
    "start": "410000",
    "end": "410000"
  },
  {
    "text": "account that's completely dedicated to the DevOps processes and tooling and then the application environments have",
    "start": "416120",
    "end": "423290"
  },
  {
    "text": "accounts of their own and this is a great pattern that we're seeing a lot of success with because it's keeping",
    "start": "423290",
    "end": "429320"
  },
  {
    "text": "everything separate and isolated and well-defined so what you can do with this is you can define exactly what",
    "start": "429320",
    "end": "436430"
  },
  {
    "text": "security parameters are required to push stuff into your dev environment and if you want those security parameters to be",
    "start": "436430",
    "end": "444620"
  },
  {
    "text": "to be different for test or prod for any other reason you've got full control over that but this is a visit this is a",
    "start": "444620",
    "end": "453380"
  },
  {
    "text": "good way forward and the other thing is it doesn't need to be just your DevOps pipeline any other DevOps tooling that",
    "start": "453380",
    "end": "460010"
  },
  {
    "text": "you use across different environments can have a similar pattern apply it for example one thing that we see some",
    "start": "460010",
    "end": "465590"
  },
  {
    "start": "464000",
    "end": "464000"
  },
  {
    "text": "people doing is a particularly newer cloud native businesses is using tools",
    "start": "465590",
    "end": "471020"
  },
  {
    "text": "like the simian army for those of you that haven't heard of it chaos monkey is",
    "start": "471020",
    "end": "476210"
  },
  {
    "text": "a really famous tool for doing chaos engineering which is introducing randomness into an environment to test",
    "start": "476210",
    "end": "483350"
  },
  {
    "text": "out the durability of infrastructure so you could for example run chaos monkey",
    "start": "483350",
    "end": "488510"
  },
  {
    "text": "script in your in your dev environment it from you can launch them from your",
    "start": "488510",
    "end": "494780"
  },
  {
    "text": "DevOps environment push them into dev and then if you're comfortable that the way that you've got your architectures",
    "start": "494780",
    "end": "500810"
  },
  {
    "text": "configured in dev is durable and by trying to randomly shut down servers or",
    "start": "500810",
    "end": "507320"
  },
  {
    "text": "kill networking connections it will continually bring itself back alive it'll self heal then you can push that",
    "start": "507320",
    "end": "513469"
  },
  {
    "text": "to test and try that out an ultimate would be running your chaos engineering practices in prod which is making sure",
    "start": "513470",
    "end": "521240"
  },
  {
    "text": "that you are super confident that your your production environment is alive and durable and happy so that's",
    "start": "521240",
    "end": "530180"
  },
  {
    "text": "but that's great that's for a single team for a single application but how do",
    "start": "530180",
    "end": "538339"
  },
  {
    "text": "you handle that when things get a bit bigger well that's what that's what",
    "start": "538339",
    "end": "543500"
  },
  {
    "start": "542000",
    "end": "542000"
  },
  {
    "text": "we've seen more and more people trying to achieve rolling out patterns like",
    "start": "543500",
    "end": "548779"
  },
  {
    "text": "this at scale and this diagram captures a really good way of achieving that so",
    "start": "548779",
    "end": "555620"
  },
  {
    "text": "you can see that we've got these enterprise white accounts now these will generally be managed by say your cloud",
    "start": "555620",
    "end": "560750"
  },
  {
    "text": "center of excellence and the CEO II might have they might look after for",
    "start": "560750",
    "end": "566300"
  },
  {
    "text": "example connectivity networking account and shared services but you might have InfoSec managing their own security",
    "start": "566300",
    "end": "573980"
  },
  {
    "text": "account that they use and those tools might pull data from different accounts all across the organization for example",
    "start": "573980",
    "end": "580730"
  },
  {
    "text": "so the enterprise wide accounts are generally centrally managed either",
    "start": "580730",
    "end": "585860"
  },
  {
    "text": "central IT cloud Center of Excellence InfoSec teams like that the developer",
    "start": "585860",
    "end": "591350"
  },
  {
    "text": "counts as something that can be provisioned out for everybody as sandboxes and you can use policies to",
    "start": "591350",
    "end": "597980"
  },
  {
    "text": "define what those accounts would look like touch on that's surely and the business unit accounts is where you've",
    "start": "597980",
    "end": "604880"
  },
  {
    "text": "got the the pattern that I just described before so that's where you'd",
    "start": "604880",
    "end": "609920"
  },
  {
    "text": "have your DevOps tooling and dev test prod for each application and you might",
    "start": "609920",
    "end": "614990"
  },
  {
    "text": "use those accounts for multiple applications but within single business unit so you know the marketing team",
    "start": "614990",
    "end": "622550"
  },
  {
    "text": "might have their owns that marketing engineering or your operations engineering might have their own pattern",
    "start": "622550",
    "end": "628370"
  },
  {
    "text": "like this so this is happening because customers are getting to the point where",
    "start": "628370",
    "end": "634370"
  },
  {
    "text": "they're not just spinning up your three four accounts this we're seeing people",
    "start": "634370",
    "end": "640550"
  },
  {
    "text": "spend up tens dozens and even hundreds so you need some way to plan for this",
    "start": "640550",
    "end": "647089"
  },
  {
    "text": "and to manage it and we're seeing a lot of success with this and make some",
    "start": "647089",
    "end": "652730"
  },
  {
    "text": "things a lot simpler but the big question is how do you actually achieve",
    "start": "652730",
    "end": "659029"
  },
  {
    "text": "it so to be able to do something like this",
    "start": "659029",
    "end": "664160"
  },
  {
    "text": "as a service that we've got that was released a while ago now called AWS",
    "start": "664160",
    "end": "671180"
  },
  {
    "start": "670000",
    "end": "670000"
  },
  {
    "text": "organizations and organizations helps you deploy out multiple accounts and it",
    "start": "671180",
    "end": "678379"
  },
  {
    "text": "gives you the option to use policies to define exactly what is enabled and what",
    "start": "678379",
    "end": "684860"
  },
  {
    "text": "is not enabled in those accounts so the first one of these is the ability to",
    "start": "684860",
    "end": "691100"
  },
  {
    "text": "control those AWS services so you can say that in this account elasticsearch",
    "start": "691100",
    "end": "697220"
  },
  {
    "text": "is available these set of accounts we've got a different policy so for example we want to disable elasticsearch to be",
    "start": "697220",
    "end": "704839"
  },
  {
    "text": "deployed out across all of the developer sandboxes but you can choose for your",
    "start": "704839",
    "end": "710410"
  },
  {
    "text": "for the business unit V PC VP season accounts you can say that you know",
    "start": "710410",
    "end": "716540"
  },
  {
    "text": "everything is available but you can have the central IT reporting back to what",
    "start": "716540",
    "end": "723079"
  },
  {
    "text": "sort of services are being spun up as well and you can mandate that certain services are available or not really",
    "start": "723079",
    "end": "731839"
  },
  {
    "text": "important feature is the ability to automate account creation so that's one thing that organizations does which is",
    "start": "731839",
    "end": "738829"
  },
  {
    "text": "pretty critical if you're going to be doing the developer sandbox is at scale really important one and then the",
    "start": "738829",
    "end": "747500"
  },
  {
    "text": "ability to do consolidated billing and usage reporting as well so this area is",
    "start": "747500",
    "end": "752600"
  },
  {
    "text": "is complex and it becomes more complex trying to assimilate all of that information as scale so having something",
    "start": "752600",
    "end": "759680"
  },
  {
    "text": "like AWS organizations is very important for that purpose so there's two ways",
    "start": "759680",
    "end": "769069"
  },
  {
    "start": "766000",
    "end": "766000"
  },
  {
    "text": "that you can about go about actually technically doing this so organizations",
    "start": "769069",
    "end": "774920"
  },
  {
    "text": "is the first tool that you will use kind of no matter what because that helps with the account part but AWS landing",
    "start": "774920",
    "end": "781550"
  },
  {
    "text": "zones is something that we released just a couple of months ago and the landing zone is a as a solution it's a pattern",
    "start": "781550",
    "end": "789860"
  },
  {
    "text": "and it's also a cloud formation template that lets you get started if you do not",
    "start": "789860",
    "end": "795319"
  },
  {
    "text": "have a big multi account pattern already in your organization so landing",
    "start": "795319",
    "end": "800670"
  },
  {
    "text": "zones is basically an easy deploy easy to deploy solution but it just sets you",
    "start": "800670",
    "end": "807810"
  },
  {
    "start": "802000",
    "end": "802000"
  },
  {
    "text": "up so that you can do all of that automated account provisioning it's based on best practices that we've seen",
    "start": "807810",
    "end": "813000"
  },
  {
    "text": "this has been built up over the last two or three years so it's not just AWS kind",
    "start": "813000",
    "end": "818520"
  },
  {
    "text": "of making it up like most of our services it's stuff that we've had a lot of demand for over time and we've taken",
    "start": "818520",
    "end": "825570"
  },
  {
    "text": "that on and we've learned from what does and doesn't work and we've set this up to try and guide guide you and give you",
    "start": "825570",
    "end": "831630"
  },
  {
    "text": "guardrails to make sure that you don't make mistakes that others have before it",
    "start": "831630",
    "end": "837660"
  },
  {
    "text": "gives you the initial security setup and governance controls that you need so it",
    "start": "837660",
    "end": "842880"
  },
  {
    "text": "gives for example one of the important parts that's listed there is automated deployment but it sets up all of the",
    "start": "842880",
    "end": "849690"
  },
  {
    "text": "governance around how you can make define your policies that are used to build out these other accounts Electric",
    "start": "849690",
    "end": "856710"
  },
  {
    "text": "baseline accounts and it gives you that that concept of an account vending machine where you can just turn them out",
    "start": "856710",
    "end": "862920"
  },
  {
    "text": "as required and you've got control so that you can spin them down as well so this is a really good starting point for",
    "start": "862920",
    "end": "870240"
  },
  {
    "text": "implementing a multi account strategy so you can see here that we've got a couple",
    "start": "870240",
    "end": "877980"
  },
  {
    "start": "873000",
    "end": "873000"
  },
  {
    "text": "of different accounts so the organization's account parent one is there at the top there's a shared",
    "start": "877980",
    "end": "884070"
  },
  {
    "text": "services account a logging account and a security account and we've got a bunch of tools in there but I won't run",
    "start": "884070",
    "end": "890310"
  },
  {
    "text": "through in detail they should give you a feel for you know the different services that are deployed automatically as part",
    "start": "890310",
    "end": "896850"
  },
  {
    "text": "of this to help solve the key problems that we see people having when setting these things up themselves so this is",
    "start": "896850",
    "end": "904920"
  },
  {
    "text": "publicly available you can just jump on and download those scripts and it'll give you a really good head start but if",
    "start": "904920",
    "end": "911760"
  },
  {
    "text": "you're already in a position where your organization has a bunch of accounts",
    "start": "911760",
    "end": "917610"
  },
  {
    "text": "already at play and you need to start sort of wrangling them together and it's exercising a bit of control over that",
    "start": "917610",
    "end": "924030"
  },
  {
    "text": "then the other option is just to roll your own so we've got a bunch of different tools",
    "start": "924030",
    "end": "931540"
  },
  {
    "text": "available as you would well know I'm sure code pipelines what we use to",
    "start": "931540",
    "end": "936790"
  },
  {
    "start": "932000",
    "end": "932000"
  },
  {
    "text": "orchestrate a lot of the different elements of the DevOps tool chain and",
    "start": "936790",
    "end": "942850"
  },
  {
    "text": "then of course you can roll any of your own from marketplace and there's a wide range of those available now one",
    "start": "942850",
    "end": "951490"
  },
  {
    "start": "950000",
    "end": "950000"
  },
  {
    "text": "important tool that is going to play a key role in doing this stuff is Systems",
    "start": "951490",
    "end": "957310"
  },
  {
    "text": "Manager now Systems Manager is really great for orchestrating a whole bunch of different activities across a server fleet but for",
    "start": "957310",
    "end": "965590"
  },
  {
    "text": "the purposes of this session we're just going to have a look at parameter store now parameters store is something that",
    "start": "965590",
    "end": "972130"
  },
  {
    "start": "971000",
    "end": "971000"
  },
  {
    "text": "helps you apply the 12 factor best practice of separate separating out your",
    "start": "972130",
    "end": "978430"
  },
  {
    "text": "code from your config so you can use that to store your secrets and if you've got connection strings and things like",
    "start": "978430",
    "end": "985030"
  },
  {
    "text": "that that you need to store somewhere then see parameter store will do that job now my friend aurelion and paul have",
    "start": "985030",
    "end": "992500"
  },
  {
    "text": "a session after this if you want to find out more about secrets manager which is another option that you've got available",
    "start": "992500",
    "end": "998520"
  },
  {
    "text": "then they're going to be running through that they're using both parameter store as well as secrets manager but",
    "start": "998520",
    "end": "1005910"
  },
  {
    "text": "essentially for our purposes it's just a very simple place for you to store",
    "start": "1005910",
    "end": "1011540"
  },
  {
    "text": "secrets that you can then use as part of your overall multi account setup so a",
    "start": "1011540",
    "end": "1022020"
  },
  {
    "start": "1020000",
    "end": "1020000"
  },
  {
    "text": "little demo that I wanted to run you through is called docker invasion so",
    "start": "1022020",
    "end": "1027959"
  },
  {
    "text": "there's a QR code there you can go and hit that right now if you like and you can have a quick go now it uses two",
    "start": "1027960",
    "end": "1035400"
  },
  {
    "text": "micro services we've got ECS and we've got lambda the game itself is running in",
    "start": "1035400",
    "end": "1041069"
  },
  {
    "text": "a container docker container and the topstick or service is running in louder so though I was just going to run you",
    "start": "1041070",
    "end": "1048480"
  },
  {
    "start": "1045000",
    "end": "1045000"
  },
  {
    "text": "through what the flow looks like for those two different scenarios quickly so",
    "start": "1048480",
    "end": "1054690"
  },
  {
    "text": "for the game service itself the way that this works is a developer will",
    "start": "1054690",
    "end": "1060570"
  },
  {
    "text": "check in the code to code commit and then that will get picked up by code",
    "start": "1060570",
    "end": "1065820"
  },
  {
    "text": "pipeline code pipeline will then trigger code billed as the next stage code build",
    "start": "1065820",
    "end": "1072809"
  },
  {
    "text": "will build the docker container based on the new code that you've checked in and it will store that container in our",
    "start": "1072809",
    "end": "1080399"
  },
  {
    "text": "elastic container registry so I know that we've had a few docker sessions today different container sessions I'm",
    "start": "1080399",
    "end": "1087299"
  },
  {
    "text": "sure this has come up ECI uses s3 it stores your information it stores the",
    "start": "1087299",
    "end": "1094440"
  },
  {
    "text": "build artifact in there the docker container and the way that it works and",
    "start": "1094440",
    "end": "1100950"
  },
  {
    "text": "this is the key part code pipeline or whatever your tool chain is your",
    "start": "1100950",
    "end": "1105990"
  },
  {
    "text": "pipeline tool will assume a cross account roll into using iam so when it",
    "start": "1105990",
    "end": "1112950"
  },
  {
    "text": "does that it will then push the cloud formation script in that CloudFormation script has the details of the difference",
    "start": "1112950",
    "end": "1121200"
  },
  {
    "text": "in ECR of what container it needs to spin up ECS will then get that change",
    "start": "1121200",
    "end": "1127559"
  },
  {
    "text": "will get pushed to ECS which will then reach out to ECR and then it will pull",
    "start": "1127559",
    "end": "1134549"
  },
  {
    "text": "that pull that container out and deploy it onto the ec2 instance that the container is running on so that's the",
    "start": "1134549",
    "end": "1142649"
  },
  {
    "text": "the game service now at this point we've just deployed to dev and that's great",
    "start": "1142649",
    "end": "1149730"
  },
  {
    "text": "but we probably don't want to just ship stuff out the door to production so what",
    "start": "1149730",
    "end": "1155399"
  },
  {
    "text": "you need to do is make sure that you've got a gate setup to ensure it doesn't just flow straight through whether",
    "start": "1155399",
    "end": "1162090"
  },
  {
    "text": "there's passes or fails of tests so there's a few different options one that's commonly used our black days",
    "start": "1162090",
    "end": "1169139"
  },
  {
    "text": "where you have as a gate that says do not continuously deploy during these",
    "start": "1169139",
    "end": "1174240"
  },
  {
    "text": "particular time windows that's often if you're like a software-as-a-service retailer like online retailer you might",
    "start": "1174240",
    "end": "1181200"
  },
  {
    "text": "want to not deploy during 9:00 a.m. and 10:00 a.m. each morning for example",
    "start": "1181200",
    "end": "1186929"
  },
  {
    "text": "other options are you can gate it by just having a simple manual approval step and that's what we've got in our",
    "start": "1186929",
    "end": "1193320"
  },
  {
    "text": "demo and then a few other ways that you can do that as well but the important thing",
    "start": "1193320",
    "end": "1200130"
  },
  {
    "text": "is that you've got the exact same pattern happening where a cross account role is assumed into production and then",
    "start": "1200130",
    "end": "1206670"
  },
  {
    "text": "it will push the same pattern through deploy the cloud formation script retrieve that build artifact and then",
    "start": "1206670",
    "end": "1213330"
  },
  {
    "text": "push that out to ECS and easy to so",
    "start": "1213330",
    "end": "1220140"
  },
  {
    "start": "1219000",
    "end": "1219000"
  },
  {
    "text": "that's the game service top-scorer service we've got is a little bit different so similar pattern in that you",
    "start": "1220140",
    "end": "1226770"
  },
  {
    "text": "check your code in to get get that picked up by the build pipeline that",
    "start": "1226770",
    "end": "1232200"
  },
  {
    "text": "then processes that and writes the artifact to your s3 now in our case that",
    "start": "1232200",
    "end": "1239610"
  },
  {
    "text": "build artifact is a lambda function and the lambda function get needs to get",
    "start": "1239610",
    "end": "1245670"
  },
  {
    "text": "pushed into those two environments so code pipeline will then assume across account role make the change to cloud",
    "start": "1245670",
    "end": "1252750"
  },
  {
    "text": "formation push that in cloud formation will then retrieve that build artifact and push it to lambda so in our case",
    "start": "1252750",
    "end": "1260250"
  },
  {
    "text": "what we're doing at what we wanted to show you was how lambda will use a different connection string for the",
    "start": "1260250",
    "end": "1266430"
  },
  {
    "text": "DynamoDB endpoint in dev to the DynamoDB endpoint in prod so it will retrieve",
    "start": "1266430",
    "end": "1273030"
  },
  {
    "text": "that from parameter store that endpoint same thing happens when you're going into production of course you want to",
    "start": "1273030",
    "end": "1279630"
  },
  {
    "text": "have some sort of gate in the way but as long as the gates there you can assume the cross account role and then push it",
    "start": "1279630",
    "end": "1286470"
  },
  {
    "text": "into cloud formation retrieve the right parameter when the function is executing so I am I've recorded a little view to",
    "start": "1286470",
    "end": "1295680"
  },
  {
    "text": "show you exactly how this works we",
    "start": "1295680",
    "end": "1301830"
  },
  {
    "text": "switch across please thank you okay so",
    "start": "1301830",
    "end": "1308390"
  },
  {
    "text": "what I'm going to show you here is the app itself for those of you that scan the QR code you'll see this it's a",
    "start": "1308390",
    "end": "1315210"
  },
  {
    "text": "little space invaders clone OOP you okay and so from there we're going to jump",
    "start": "1315210",
    "end": "1322490"
  },
  {
    "text": "straight across into code pipeline in the console code pipeline we've got a",
    "start": "1322490",
    "end": "1330409"
  },
  {
    "text": "few different pipelines there so the one that we're looking at as I said before is the EC s1 so we've got a source stage",
    "start": "1330409",
    "end": "1336770"
  },
  {
    "text": "where we will get picked up when we commit stuff got a build stage where we're using AWS code build we've got a",
    "start": "1336770",
    "end": "1344179"
  },
  {
    "text": "deployed dev stage and deployed a prod stage so you can see in there that's where we've got the manual approval",
    "start": "1344179",
    "end": "1350480"
  },
  {
    "text": "listed so that's our gate that we're using to make sure that we get the right",
    "start": "1350480",
    "end": "1355970"
  },
  {
    "text": "thing into brought into prod so this is the code that's running that we're going",
    "start": "1355970",
    "end": "1362210"
  },
  {
    "text": "to be running in our container so you can see in here I'm just it's just a",
    "start": "1362210",
    "end": "1367850"
  },
  {
    "text": "little JavaScript app so I'm just commenting out the background color and",
    "start": "1367850",
    "end": "1373460"
  },
  {
    "text": "putting it to something a little bit more interesting so we're just going to",
    "start": "1373460",
    "end": "1379899"
  },
  {
    "text": "add that to the change and commit it bring the party now we're just going to",
    "start": "1379899",
    "end": "1390649"
  },
  {
    "text": "push that in to the repo so you can see",
    "start": "1390649",
    "end": "1396020"
  },
  {
    "text": "this this is my internal private code commit repository okay so now that",
    "start": "1396020",
    "end": "1404149"
  },
  {
    "text": "that's being pushed that's going to get picked up here in the pipeline automatically so you can see that it's",
    "start": "1404149",
    "end": "1413090"
  },
  {
    "text": "been picked up at the code commit stage and processed now while the build stage",
    "start": "1413090",
    "end": "1418820"
  },
  {
    "text": "is occurring I'm just going to show you what that looks like that that the build definition",
    "start": "1418820",
    "end": "1426250"
  },
  {
    "text": "so this is code build and you can see we've got the repo listed there and if",
    "start": "1430630",
    "end": "1438340"
  },
  {
    "text": "you click on the project details the build spec is listed so that build spec",
    "start": "1438340",
    "end": "1443350"
  },
  {
    "text": "is defined in llamo as part of the project so you can see in here we've got",
    "start": "1443350",
    "end": "1449140"
  },
  {
    "text": "the docker build stage and then a step to tag that build correctly and that's",
    "start": "1449140",
    "end": "1457150"
  },
  {
    "text": "tagging with what we're going to use for in ECR and then the docker push pushes",
    "start": "1457150",
    "end": "1464620"
  },
  {
    "text": "that into into ACR so that means that the container once it finishes building",
    "start": "1464620",
    "end": "1469750"
  },
  {
    "text": "will be stored in s3 there so once that build finishes it's going to deploy that",
    "start": "1469750",
    "end": "1476230"
  },
  {
    "text": "automatically to dev",
    "start": "1476230",
    "end": "1479280"
  },
  {
    "text": "and then once that's done it's gated by that manual approval step that we've got",
    "start": "1488820",
    "end": "1494100"
  },
  {
    "text": "in there so the manual approval is using work mail so this is a one oh this is",
    "start": "1494100",
    "end": "1500009"
  },
  {
    "text": "our managed email service and you can see that it sent us through an email with the content to review which is the",
    "start": "1500009",
    "end": "1507570"
  },
  {
    "text": "staged version of our deploy and you can",
    "start": "1507570",
    "end": "1514769"
  },
  {
    "text": "see the backgrounds colors changed is something a little bit more body so to",
    "start": "1514769",
    "end": "1519899"
  },
  {
    "text": "approve it you just click the other link that pipes you into code pipeline again and it will come up asking you to",
    "start": "1519899",
    "end": "1528059"
  },
  {
    "text": "approve or reject the revision so this is the manual approval step to make sure that the right content is getting",
    "start": "1528059",
    "end": "1535590"
  },
  {
    "text": "through to production so this is an excellent pattern and as I was saying before you don't need to use code pipeline all the commonly used DevOps",
    "start": "1535590",
    "end": "1543240"
  },
  {
    "text": "tool chains will support these these features so now that that's been",
    "start": "1543240",
    "end": "1549090"
  },
  {
    "text": "manually approved that will get pushed to production",
    "start": "1549090",
    "end": "1554330"
  },
  {
    "text": "and now we just do a hot refresh on that page and you can see the colors change",
    "start": "1559210",
    "end": "1571810"
  },
  {
    "text": "in pride so that's the Fleur for the game service itself so the other one",
    "start": "1571810",
    "end": "1578860"
  },
  {
    "text": "that I wanted to show you is the the lamda change that we made as well so we",
    "start": "1578860",
    "end": "1585520"
  },
  {
    "text": "just used to put this together we just use the sample code that was available it's got a source and a build stage",
    "start": "1585520",
    "end": "1591700"
  },
  {
    "text": "similar sort of pattern now this time we're creating a change set with cloud",
    "start": "1591700",
    "end": "1597760"
  },
  {
    "text": "formation so that we can check and validate what change is exactly going out there's a manual approval stage and",
    "start": "1597760",
    "end": "1604690"
  },
  {
    "text": "then the same pattern again so you can see exactly what the different stages are and again having this all in one",
    "start": "1604690",
    "end": "1610840"
  },
  {
    "text": "pipeline makes it very easy to avoid configuration drift so just looking at",
    "start": "1610840",
    "end": "1616360"
  },
  {
    "text": "the build stage I'm just going to edit",
    "start": "1616360",
    "end": "1624100"
  },
  {
    "text": "that project and have a look at the build spec so you can see here in the",
    "start": "1624100",
    "end": "1631930"
  },
  {
    "text": "build stage we've got the the command in there to package up the cloud formation",
    "start": "1631930",
    "end": "1638110"
  },
  {
    "text": "script and store that in the in s3",
    "start": "1638110",
    "end": "1642660"
  },
  {
    "text": "so this is the actual lambda code that we've got in there and as I said the",
    "start": "1649940",
    "end": "1655049"
  },
  {
    "text": "reason I wanted to show you this is so you can see how to assume the cross",
    "start": "1655049",
    "end": "1660240"
  },
  {
    "text": "account role from the context of the lambda function so that's what it is",
    "start": "1660240",
    "end": "1665399"
  },
  {
    "text": "it's STS dot assume role and then the response that's hitting the systems",
    "start": "1665399",
    "end": "1672960"
  },
  {
    "text": "manager and using the get parameter command and that's passing that into the dynamodb call so that is how the that's",
    "start": "1672960",
    "end": "1684179"
  },
  {
    "text": "that's how the lambda function works to do the cross the cow stuff so you can",
    "start": "1684179",
    "end": "1689639"
  },
  {
    "text": "see that both those are pretty straightforward if you build them and you use the right sort of patterns it's",
    "start": "1689639",
    "end": "1696149"
  },
  {
    "start": "1692000",
    "end": "1692000"
  },
  {
    "text": "not too hard to do you can set it up so that cross account stuff becomes more of a non-issue but it's very important to",
    "start": "1696149",
    "end": "1703169"
  },
  {
    "text": "have the structure set up correctly so as part of the conversation when you're getting this done you need to include",
    "start": "1703169",
    "end": "1709769"
  },
  {
    "text": "all of the different dev teams in this journey ops teams that are involved that's very",
    "start": "1709769",
    "end": "1716460"
  },
  {
    "text": "common particularly the big enterprise like complex enterprise environments any DevOps teams your cloud center of",
    "start": "1716460",
    "end": "1722399"
  },
  {
    "text": "excellence and InfoSec as well these all need to be part of the journey when",
    "start": "1722399",
    "end": "1727409"
  },
  {
    "text": "you're setting up like proper multi account automation because a lot of people will have a lot of opinions on",
    "start": "1727409",
    "end": "1733649"
  },
  {
    "text": "how best to do automation so you need to get on the same page you can't just beat people into what you say tell them is",
    "start": "1733649",
    "end": "1740909"
  },
  {
    "text": "best so this is a team effort use a separate account for the develops",
    "start": "1740909",
    "end": "1746159"
  },
  {
    "text": "tooling that's a really good pattern as I said before keep things separate define the security context dev is going",
    "start": "1746159",
    "end": "1752370"
  },
  {
    "text": "to have a bunch of engineers usually with a lot more lack security doing all sorts of crazy stuff you don't want that",
    "start": "1752370",
    "end": "1759240"
  },
  {
    "text": "security context to be applied to your pipeline which can then push stuff into production very bad idea",
    "start": "1759240",
    "end": "1765539"
  },
  {
    "text": "use cross account roles to coordinate your administration of these things and the different deployments and a key",
    "start": "1765539",
    "end": "1773370"
  },
  {
    "text": "tenet to this as well is to build once and deploy many times so carry that same build artifact",
    "start": "1773370",
    "end": "1779820"
  },
  {
    "text": "through push it to one environment test that environment push it to the next environment this pattern is really good",
    "start": "1779820",
    "end": "1785250"
  },
  {
    "text": "for that so um if you enjoy the session there is you can tap up the top of the",
    "start": "1785250",
    "end": "1791520"
  },
  {
    "text": "room to get more information and we'd really appreciate feedback as well hopefully this has been useful and",
    "start": "1791520",
    "end": "1797660"
  },
  {
    "text": "thanks very much for your time everyone [Applause]",
    "start": "1797660",
    "end": "1802579"
  }
]