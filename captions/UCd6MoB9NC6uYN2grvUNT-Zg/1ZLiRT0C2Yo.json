[
  {
    "start": "0",
    "end": "43000"
  },
  {
    "text": "Welcome to another episode of\n'This is My Architecture'.",
    "start": "7287",
    "end": "10226"
  },
  {
    "text": "Today I have here with me\nThom from T-Mobile.",
    "start": "10226",
    "end": "13120"
  },
  {
    "text": "-Hi Thom.\n-Hi.",
    "start": "13120",
    "end": "14509"
  },
  {
    "text": "So Thom, we all know T-Mobile.",
    "start": "14851",
    "end": "16709"
  },
  {
    "text": "So tell me a little bit\nof what your team does.",
    "start": "16778",
    "end": "19225"
  },
  {
    "text": "I work in a team\nthat does central planning for cloud.",
    "start": "19980",
    "end": "25028"
  },
  {
    "text": "We have hundreds of teams,\nthousands of developers with T-Mobile",
    "start": "25518",
    "end": "29569"
  },
  {
    "text": "and many of those teams that\nuse the public cloud, use AWS.",
    "start": "29569",
    "end": "32633"
  },
  {
    "text": "So what we do is we build platforms,\nsecurity tools, and other services",
    "start": "32874",
    "end": "37849"
  },
  {
    "text": "to enable those teams to build\nour customer-facing features on AWS.",
    "start": "37849",
    "end": "42257"
  },
  {
    "text": "I see. And those tools\nthat you build for them,",
    "start": "42408",
    "end": "45819"
  },
  {
    "start": "43000",
    "end": "139000"
  },
  {
    "text": "do you have a standardized way\nof deploying them?",
    "start": "45820",
    "end": "48215"
  },
  {
    "text": "Yeah, so we will build,\nfor example our Kubernetes infrastructure.",
    "start": "48632",
    "end": "52467"
  },
  {
    "text": "We have a standard way of building\nKubernetes infrastructure",
    "start": "53039",
    "end": "55402"
  },
  {
    "text": "where we will use our automation\ntools like Teraform...",
    "start": "55402",
    "end": "59413"
  },
  {
    "text": "and Ansible.",
    "start": "61292",
    "end": "63098"
  },
  {
    "text": "And basically what we're\nbuilding when we do that",
    "start": "64825",
    "end": "68310"
  },
  {
    "text": "is we're building Kubernetes clusters",
    "start": "68311",
    "end": "70375"
  },
  {
    "text": "with making sure we have\nour identity management baked into",
    "start": "71071",
    "end": "76315"
  },
  {
    "text": "the clusters we're building.",
    "start": "76624",
    "end": "78692"
  },
  {
    "text": "And the 20 to 30 different components\nthat go into building a Kubernetes cluster.",
    "start": "78692",
    "end": "86053"
  },
  {
    "text": "And what this does-- so this is\nthe automation stack that we use.",
    "start": "86400",
    "end": "90988"
  },
  {
    "text": "What this does is it allows\nus to have a standard way",
    "start": "90988",
    "end": "93993"
  },
  {
    "text": "to build Kubernetes clusters",
    "start": "93995",
    "end": "95840"
  },
  {
    "text": "across the entire organization.",
    "start": "95840",
    "end": "97345"
  },
  {
    "text": "So anyone who is consuming Kubernetes\nis doing the same thing.",
    "start": "97346",
    "end": "101831"
  },
  {
    "text": "We don't have drift in terms of",
    "start": "101831",
    "end": "104085"
  },
  {
    "text": "the number of different\ncomponents people are using,",
    "start": "104086",
    "end": "106604"
  },
  {
    "text": "the versions, or the state,\nthat sort of thing.",
    "start": "106605",
    "end": "110000"
  },
  {
    "text": "Okay, so basically they can just\ntake what you build",
    "start": "110000",
    "end": "113429"
  },
  {
    "text": "and deploy as many times as they want",
    "start": "113429",
    "end": "115415"
  },
  {
    "text": "depending on what applications\nthey are developing.",
    "start": "115416",
    "end": "117543"
  },
  {
    "text": "Correct.",
    "start": "117694",
    "end": "118721"
  },
  {
    "text": "We have several applications,\nfor example, our e-commerce application,",
    "start": "118721",
    "end": "122884"
  },
  {
    "text": "our retail applications,\nour internet service provider applications",
    "start": "122884",
    "end": "128031"
  },
  {
    "text": "that use this system with hundreds\nof applications that use this system",
    "start": "128031",
    "end": "131178"
  },
  {
    "text": "and they're all deploying\nto a standard infrastructure",
    "start": "131178",
    "end": "136236"
  },
  {
    "text": "across all the applications.",
    "start": "136237",
    "end": "138537"
  },
  {
    "text": "Okay. Let's dive a little bit deeper",
    "start": "138537",
    "end": "141066"
  },
  {
    "start": "139000",
    "end": "195000"
  },
  {
    "text": "into the architecture of\nthis standard infrastructure.",
    "start": "141067",
    "end": "144256"
  },
  {
    "text": "You mentioned Kubernetes.",
    "start": "144256",
    "end": "145970"
  },
  {
    "text": "What else are this team using?",
    "start": "146404",
    "end": "148522"
  },
  {
    "text": "So, the ability to build\nthese common clusters",
    "start": "148522",
    "end": "153232"
  },
  {
    "text": "allows our team\nto focus on the infrastructure",
    "start": "153232",
    "end": "155861"
  },
  {
    "text": "and allows the application teams to",
    "start": "155861",
    "end": "157491"
  },
  {
    "text": "be able to consume things\nlike RDS for example.",
    "start": "157492",
    "end": "160788"
  },
  {
    "text": "So teams don't have to spend the time",
    "start": "161184",
    "end": "164016"
  },
  {
    "text": "on thinking about what\ninfrastructure they're building.",
    "start": "164017",
    "end": "167431"
  },
  {
    "text": "We're using a GitOps model for example.",
    "start": "167934",
    "end": "172023"
  },
  {
    "text": "And so any change to the state\nof any cluster anywhere,",
    "start": "172403",
    "end": "176781"
  },
  {
    "text": "when there's 40 clusters now\nrunning 30,000 containers",
    "start": "176781",
    "end": "181089"
  },
  {
    "text": "across hundreds of applications,",
    "start": "181089",
    "end": "182883"
  },
  {
    "text": "any change to any of those is\ndone through a GitOps process",
    "start": "183283",
    "end": "186345"
  },
  {
    "text": "which is just a merge request for example.",
    "start": "186346",
    "end": "189674"
  },
  {
    "text": "And so that has a review process\nand it goes out to production or non-prod.",
    "start": "189674",
    "end": "194293"
  },
  {
    "start": "195000",
    "end": "328000"
  },
  {
    "text": "Okay, so the infrastructure deployment is",
    "start": "195395",
    "end": "197664"
  },
  {
    "text": "completely automated through\nGithub and Teraform.",
    "start": "197665",
    "end": "200271"
  },
  {
    "text": "And the infrastructure itself,",
    "start": "200271",
    "end": "202364"
  },
  {
    "text": "do they have the same components?",
    "start": "204010",
    "end": "205678"
  },
  {
    "text": "Each team uses the same\ncomponents in the infrastructure",
    "start": "205678",
    "end": "208441"
  },
  {
    "text": "or do you have different components\ndepending on the needs of the teams?",
    "start": "208443",
    "end": "211601"
  },
  {
    "text": "So from a component point of view,",
    "start": "211912",
    "end": "213415"
  },
  {
    "text": "what we're trying to do is\nwe're trying to build,",
    "start": "213416",
    "end": "215303"
  },
  {
    "text": "effectively we're trying to\nget to the point where we have",
    "start": "215824",
    "end": "218585"
  },
  {
    "text": "immutable infrastructure.",
    "start": "218586",
    "end": "220621"
  },
  {
    "text": "And that's really the goal.",
    "start": "221555",
    "end": "223411"
  },
  {
    "text": "So we've been at this a long time.",
    "start": "223412",
    "end": "224679"
  },
  {
    "text": "We've been doing this\nfor almost five years now",
    "start": "224679",
    "end": "226972"
  },
  {
    "text": "where we've had large scale\ncontainer based environments.",
    "start": "226972",
    "end": "231502"
  },
  {
    "text": "And we've evolved to the point now\nwhere we want to basically just say",
    "start": "231502",
    "end": "236213"
  },
  {
    "text": "that a cluster\nis not something that is living.",
    "start": "236213",
    "end": "240207"
  },
  {
    "text": "That you deploy to it\nwhen there's configuration change needed.",
    "start": "240207",
    "end": "243710"
  },
  {
    "text": "You remove it\nand redeploy through this GitOps process",
    "start": "243810",
    "end": "248081"
  },
  {
    "text": "to deliver immutable infrastructure.",
    "start": "248082",
    "end": "250218"
  },
  {
    "text": "So this is kind of the end state\nof where we want to be.",
    "start": "250218",
    "end": "253384"
  },
  {
    "text": "The enables us, for example,\nto take all these applications we have.",
    "start": "254214",
    "end": "259426"
  },
  {
    "text": "Like for example,\neach of these applications lives in a VPC.",
    "start": "259426",
    "end": "265565"
  },
  {
    "text": "This VPC sill span east and west regions.",
    "start": "265565",
    "end": "270971"
  },
  {
    "text": "So we get HA out of this.",
    "start": "271238",
    "end": "273744"
  },
  {
    "text": "So we really want to make sure everything\nis consistent across these.",
    "start": "273744",
    "end": "280112"
  },
  {
    "text": "We'll also have prod versions of these\nand non-prod versions.",
    "start": "280113",
    "end": "284572"
  },
  {
    "text": "Dev versions of these as well",
    "start": "284572",
    "end": "287891"
  },
  {
    "text": "so that we can have consistency in\nevery singe environment that someone uses.",
    "start": "287891",
    "end": "294366"
  },
  {
    "text": "We'll also make sure that we can have\na single way to build clusters",
    "start": "295595",
    "end": "301512"
  },
  {
    "text": "even though we have different\nneeds for different clusters.",
    "start": "301635",
    "end": "304063"
  },
  {
    "text": "We have dedicated clusters for teams.",
    "start": "304063",
    "end": "309375"
  },
  {
    "text": "We have share\nwhere many teams are in one cluster.",
    "start": "309376",
    "end": "312428"
  },
  {
    "text": "And so we have clusters\nthat span accounts.",
    "start": "313377",
    "end": "317384"
  },
  {
    "text": "Or, clusters that span VPCs.",
    "start": "318452",
    "end": "321488"
  },
  {
    "text": "And all these things need to be baked into",
    "start": "321489",
    "end": "324291"
  },
  {
    "text": "how we deliver our code\nfor our infrastructure.",
    "start": "324292",
    "end": "327327"
  },
  {
    "start": "328000",
    "end": "377000"
  },
  {
    "text": "And all of these,\nlet's say dedicated share accounts,",
    "start": "328000",
    "end": "332098"
  },
  {
    "text": "do they share information at any time?",
    "start": "332465",
    "end": "334820"
  },
  {
    "text": "Are they connected\nto the VPCs at any time?",
    "start": "334820",
    "end": "337380"
  },
  {
    "text": "Yeah, everything is done through\nTransit Gateway here.",
    "start": "337380",
    "end": "341208"
  },
  {
    "text": "We have a model\nwhere we have about 100 accounts or so,",
    "start": "341208",
    "end": "344799"
  },
  {
    "text": "which is a fairly small number\nfor a company our size",
    "start": "344799",
    "end": "347314"
  },
  {
    "text": "and the scale we're at.",
    "start": "347315",
    "end": "349056"
  },
  {
    "text": "But we're able to do that because of\ntools like Transit Gateway.",
    "start": "349056",
    "end": "351484"
  },
  {
    "text": "Transit Gateway allows us to connect\ninto our data centers.",
    "start": "351484",
    "end": "355125"
  },
  {
    "text": "So we have data centers in Texas\nand Washington state.",
    "start": "355125",
    "end": "361127"
  },
  {
    "text": "And so\nthat allows all these applications here",
    "start": "361795",
    "end": "365066"
  },
  {
    "text": "to connect back to any\ninformation they need",
    "start": "365067",
    "end": "367753"
  },
  {
    "text": "from the data centers.",
    "start": "367753",
    "end": "369168"
  },
  {
    "text": "And so we can replicate this process\nacross many different accounts,",
    "start": "369472",
    "end": "375146"
  },
  {
    "text": "many different use cases.",
    "start": "375147",
    "end": "377377"
  },
  {
    "start": "377000",
    "end": "436000"
  },
  {
    "text": "So you're deploying this\nacross your data center, regions.",
    "start": "377623",
    "end": "381814"
  },
  {
    "text": "Are you deploying\nalso closer to your users?",
    "start": "382682",
    "end": "385418"
  },
  {
    "text": "One example, one good benefit of\nhaving a model like this",
    "start": "385656",
    "end": "390891"
  },
  {
    "text": "is you can take something new,\nlike a local zone for example,",
    "start": "390891",
    "end": "393738"
  },
  {
    "text": "and we can use exactly the same process\nto deliver out to now the LA local zone.",
    "start": "394312",
    "end": "400172"
  },
  {
    "text": "So in LA you have a new local zone\nthat we can deliver to",
    "start": "400801",
    "end": "405723"
  },
  {
    "text": "and that has to AZs.",
    "start": "405723",
    "end": "407903"
  },
  {
    "text": "And all these clusters we built\nall span three AZs.",
    "start": "407903",
    "end": "413113"
  },
  {
    "text": "And so we want to be able\nto do the same thing here",
    "start": "414524",
    "end": "417379"
  },
  {
    "text": "where you have an A and a B on LAX",
    "start": "417380",
    "end": "420501"
  },
  {
    "text": "and deliver this.",
    "start": "420501",
    "end": "421589"
  },
  {
    "text": "We were able to do this--",
    "start": "421589",
    "end": "423719"
  },
  {
    "text": "Now, local zone is different than a region\nand so you have to adjust for that.",
    "start": "424204",
    "end": "428290"
  },
  {
    "text": "But we were able to make\nthose adjustments and deliver",
    "start": "428290",
    "end": "430697"
  },
  {
    "text": "a local zone within a week.",
    "start": "430928",
    "end": "432303"
  },
  {
    "text": "So it was pretty straightforward for us\nto be able to look at that.",
    "start": "432303",
    "end": "435435"
  },
  {
    "text": "So what was the reason to actually see\nthe deployment on a local zone?",
    "start": "435732",
    "end": "439697"
  },
  {
    "start": "436000",
    "end": "483000"
  },
  {
    "text": "Do you have any applications that need\nsingle cycle latency?",
    "start": "439697",
    "end": "443443"
  },
  {
    "text": "Yeah, so as a telecom, we really\nunderstand the need for low latency",
    "start": "443776",
    "end": "447814"
  },
  {
    "text": "and to build applications\nwhere customers can access things quicker.",
    "start": "448156",
    "end": "452986"
  },
  {
    "text": "But on Amazon today, we use west and east.",
    "start": "453954",
    "end": "458130"
  },
  {
    "text": "So we need more options.\nWe need to be able to",
    "start": "458428",
    "end": "460689"
  },
  {
    "text": "service our customers in LA, Florida,\nand they're not exactly close to a region.",
    "start": "460689",
    "end": "464764"
  },
  {
    "text": "So one of the ways we can do that\nis through local zones.",
    "start": "465566",
    "end": "468270"
  },
  {
    "text": "So if you can think of for example,\na store locator application",
    "start": "468270",
    "end": "472362"
  },
  {
    "text": "where every time somebody\nis looking for a store,",
    "start": "472362",
    "end": "475017"
  },
  {
    "text": "they're looking\nfor something near to them.",
    "start": "475018",
    "end": "478044"
  },
  {
    "text": "So that will help us\nmake that a quicker process.",
    "start": "478044",
    "end": "482690"
  },
  {
    "text": "So, you already deployed on local zones?",
    "start": "482690",
    "end": "485318"
  },
  {
    "start": "483000",
    "end": "512000"
  },
  {
    "text": "Was there any difference\nor any improvement",
    "start": "485318",
    "end": "487887"
  },
  {
    "text": "on the latency when you did that?",
    "start": "487888",
    "end": "489489"
  },
  {
    "text": "Yeah, it was significant.",
    "start": "489489",
    "end": "490824"
  },
  {
    "text": "We'd been measuring the difference\nbetween local zones.",
    "start": "490824",
    "end": "494883"
  },
  {
    "text": "So a user in LA going to a local zone\nwill experience pretty low latency",
    "start": "495122",
    "end": "500808"
  },
  {
    "text": "in the area of five milliseconds\nis what we've tested.",
    "start": "500808",
    "end": "503970"
  },
  {
    "text": "But going back to the AZ\nwill be something like 50 milliseconds.",
    "start": "504641",
    "end": "508638"
  },
  {
    "text": "So it's an order or magnitude faster.",
    "start": "508638",
    "end": "510076"
  },
  {
    "text": "I see.\nJust the last question I have for you",
    "start": "510076",
    "end": "514031"
  },
  {
    "start": "512000",
    "end": "571000"
  },
  {
    "text": "is all of this infrastructure,",
    "start": "514032",
    "end": "515781"
  },
  {
    "text": "I'm assuming\nthat you are, besides the automation,",
    "start": "515783",
    "end": "518875"
  },
  {
    "text": "also constantly monitoring it.",
    "start": "518876",
    "end": "521725"
  },
  {
    "text": "Yeah. So obviously\nwe hook into CloudWatch.",
    "start": "521881",
    "end": "525792"
  },
  {
    "text": "We pull our CloudWatch into this\ninfrastructure as well through Prometheus.",
    "start": "525893",
    "end": "530597"
  },
  {
    "text": "And we have...",
    "start": "532294",
    "end": "534147"
  },
  {
    "text": "Observability is one of the key points\nto being able to do this at all,",
    "start": "535632",
    "end": "538846"
  },
  {
    "text": "never mind doing it at scale.",
    "start": "538847",
    "end": "540640"
  },
  {
    "text": "And so this is something\nwe really leverage",
    "start": "541274",
    "end": "544284"
  },
  {
    "text": "and make sure we have\nall the alerts firing",
    "start": "544285",
    "end": "546978"
  },
  {
    "text": "and we know the state of our applications,\nor infrastructure across AWS",
    "start": "546979",
    "end": "553082"
  },
  {
    "text": "and across all of our clusters.",
    "start": "553082",
    "end": "554853"
  },
  {
    "text": "This is very interesting.\nThank you so much sharing this with us.",
    "start": "555722",
    "end": "558714"
  },
  {
    "text": "Sure. Thank you.",
    "start": "558892",
    "end": "560293"
  },
  {
    "text": "And thank you for watching another episode\nof 'This is My Architecture'.",
    "start": "560521",
    "end": "564531"
  }
]