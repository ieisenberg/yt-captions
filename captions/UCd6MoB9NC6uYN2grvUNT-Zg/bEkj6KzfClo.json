[
  {
    "start": "0",
    "end": "28000"
  },
  {
    "text": "hello everybody I'm Jeffrey and this is",
    "start": "7359",
    "end": "9040"
  },
  {
    "text": "my colleag Kurt uh we are from amplitude",
    "start": "9040",
    "end": "12000"
  },
  {
    "text": "analytics we'll get a little more into",
    "start": "12000",
    "end": "13320"
  },
  {
    "text": "that later uh what we're going to talk",
    "start": "13320",
    "end": "14759"
  },
  {
    "text": "about today is uh kind of our process of",
    "start": "14759",
    "end": "17240"
  },
  {
    "text": "scaling our data ingestion Pipeline and",
    "start": "17240",
    "end": "19359"
  },
  {
    "text": "how we migrate a bunch of you know",
    "start": "19359",
    "end": "20640"
  },
  {
    "text": "metadata stores from SQL to Dynamo DB um",
    "start": "20640",
    "end": "23160"
  },
  {
    "text": "you guys all heard a lot about Dynamo DB",
    "start": "23160",
    "end": "24840"
  },
  {
    "text": "so far and we're excited to share some",
    "start": "24840",
    "end": "26240"
  },
  {
    "text": "of our experiences with it as well I'm",
    "start": "26240",
    "end": "28480"
  },
  {
    "start": "28000",
    "end": "41000"
  },
  {
    "text": "Kurt studied CS at University of Arizona",
    "start": "28480",
    "end": "31359"
  },
  {
    "text": "previously worked at Amazon and",
    "start": "31359",
    "end": "32960"
  },
  {
    "text": "Marketplace and on the Kinesis team um",
    "start": "32960",
    "end": "36760"
  },
  {
    "text": "and started working at amplitude a year",
    "start": "36760",
    "end": "38440"
  },
  {
    "text": "ago uh focusing on the data ingestion",
    "start": "38440",
    "end": "40840"
  },
  {
    "text": "Pipeline and I'm Jeffrey I graduated",
    "start": "40840",
    "end": "42800"
  },
  {
    "start": "41000",
    "end": "58000"
  },
  {
    "text": "from Stanford uh in 2010 studying",
    "start": "42800",
    "end": "45000"
  },
  {
    "text": "computer science as well um previously",
    "start": "45000",
    "end": "47160"
  },
  {
    "text": "worked on distributed systems at pal and",
    "start": "47160",
    "end": "48960"
  },
  {
    "text": "sumologic over the last few years uh two",
    "start": "48960",
    "end": "50960"
  },
  {
    "text": "years ago uh I started amplitude uh",
    "start": "50960",
    "end": "53960"
  },
  {
    "text": "originally as the vpv engineering moving",
    "start": "53960",
    "end": "55320"
  },
  {
    "text": "into the Chief Architect role recently",
    "start": "55320",
    "end": "56800"
  },
  {
    "text": "to focus on the techn vision of the",
    "start": "56800",
    "end": "58160"
  },
  {
    "text": "company we were founded in 2012 by",
    "start": "58160",
    "end": "60039"
  },
  {
    "text": "Spencer and Curtis they went through YC",
    "start": "60039",
    "end": "62239"
  },
  {
    "text": "and basically we are an event-based",
    "start": "62239",
    "end": "64119"
  },
  {
    "text": "mobile and web analytics platform for",
    "start": "64119",
    "end": "66000"
  },
  {
    "text": "understanding user Behavior so you can",
    "start": "66000",
    "end": "67960"
  },
  {
    "text": "think of something like the next",
    "start": "67960",
    "end": "69119"
  },
  {
    "text": "generation of Google analytics or you",
    "start": "69119",
    "end": "71520"
  },
  {
    "text": "know flurry or things like that um we",
    "start": "71520",
    "end": "73640"
  },
  {
    "text": "raised a series a from Benchmark in 2015",
    "start": "73640",
    "end": "75560"
  },
  {
    "text": "and actually we're happy to announce",
    "start": "75560",
    "end": "77200"
  },
  {
    "text": "that this morning we just uh you know",
    "start": "77200",
    "end": "79400"
  },
  {
    "text": "disclosed our series B from battery so",
    "start": "79400",
    "end": "81520"
  },
  {
    "text": "it's been a busy day at the office to",
    "start": "81520",
    "end": "83240"
  },
  {
    "start": "83000",
    "end": "149000"
  },
  {
    "text": "give you a little bit of context I want",
    "start": "83240",
    "end": "84479"
  },
  {
    "text": "to share what we do first so you have",
    "start": "84479",
    "end": "86000"
  },
  {
    "text": "something to think about as we go into",
    "start": "86000",
    "end": "87240"
  },
  {
    "text": "all the technology you there's kind of",
    "start": "87240",
    "end": "88600"
  },
  {
    "text": "two parts of uh uh the you know our",
    "start": "88600",
    "end": "91159"
  },
  {
    "text": "architecture I guess one is the the",
    "start": "91159",
    "end": "93119"
  },
  {
    "text": "event collection side so you know when",
    "start": "93119",
    "end": "95880"
  },
  {
    "text": "our customers use us they'll you know",
    "start": "95880",
    "end": "98560"
  },
  {
    "text": "when they're building a mobile app or a",
    "start": "98560",
    "end": "100360"
  },
  {
    "text": "website they'll instrument our SDK into",
    "start": "100360",
    "end": "102119"
  },
  {
    "text": "their code and then they'll basically",
    "start": "102119",
    "end": "103840"
  },
  {
    "text": "track different events that users",
    "start": "103840",
    "end": "105240"
  },
  {
    "text": "perform within their application and we",
    "start": "105240",
    "end": "107600"
  },
  {
    "text": "collect all that data and provide",
    "start": "107600",
    "end": "109719"
  },
  {
    "text": "behavioral analytics on it um you know I",
    "start": "109719",
    "end": "112560"
  },
  {
    "text": "find it useful to provide an example of",
    "start": "112560",
    "end": "114079"
  },
  {
    "text": "like what this actually means uh this is",
    "start": "114079",
    "end": "115719"
  },
  {
    "text": "one of our you know more Innovative",
    "start": "115719",
    "end": "117759"
  },
  {
    "text": "products called compass and what it does",
    "start": "117759",
    "end": "119680"
  },
  {
    "text": "is",
    "start": "119680",
    "end": "120520"
  },
  {
    "text": "is given the actions that a user",
    "start": "120520",
    "end": "123439"
  },
  {
    "text": "performs in your app let's say let's say",
    "start": "123439",
    "end": "125759"
  },
  {
    "text": "you're Facebook or something and you",
    "start": "125759",
    "end": "126799"
  },
  {
    "text": "have actions that are like you know",
    "start": "126799",
    "end": "128039"
  },
  {
    "text": "adding a friend or sharing a status",
    "start": "128039",
    "end": "130399"
  },
  {
    "text": "update or uploading a photo um it",
    "start": "130399",
    "end": "132440"
  },
  {
    "text": "basically you know looks through all the",
    "start": "132440",
    "end": "133720"
  },
  {
    "text": "data and finds correlations between",
    "start": "133720",
    "end": "135640"
  },
  {
    "text": "those actions and whether users are uh",
    "start": "135640",
    "end": "137760"
  },
  {
    "text": "retained within your application long",
    "start": "137760",
    "end": "139239"
  },
  {
    "text": "term so this is really helpful for kind",
    "start": "139239",
    "end": "141120"
  },
  {
    "text": "of guiding the the product direction of",
    "start": "141120",
    "end": "143120"
  },
  {
    "text": "an application and figuring out you know",
    "start": "143120",
    "end": "144920"
  },
  {
    "text": "what behaviors correlate strongly with",
    "start": "144920",
    "end": "146599"
  },
  {
    "text": "users coming back and becoming power",
    "start": "146599",
    "end": "148120"
  },
  {
    "text": "users of your application in this",
    "start": "148120",
    "end": "149920"
  },
  {
    "start": "149000",
    "end": "207000"
  },
  {
    "text": "presentation as I mentioned at the",
    "start": "149920",
    "end": "150760"
  },
  {
    "text": "beginning we're bring to talk about our",
    "start": "150760",
    "end": "151800"
  },
  {
    "text": "data ingestion pipeline so uh this is",
    "start": "151800",
    "end": "154280"
  },
  {
    "text": "like how the data gets to us and you",
    "start": "154280",
    "end": "156720"
  },
  {
    "text": "know what we do with the data before it",
    "start": "156720",
    "end": "158480"
  },
  {
    "text": "kind of you know becomes a a process",
    "start": "158480",
    "end": "161640"
  },
  {
    "text": "within our system so here's a very high",
    "start": "161640",
    "end": "163920"
  },
  {
    "text": "level uh Square diagram of uh all the",
    "start": "163920",
    "end": "167319"
  },
  {
    "text": "ingestion pipeline in our system so",
    "start": "167319",
    "end": "169360"
  },
  {
    "text": "obviously it starts with the data",
    "start": "169360",
    "end": "170319"
  },
  {
    "text": "collection servers it's just you know a",
    "start": "170319",
    "end": "171720"
  },
  {
    "text": "standard web",
    "start": "171720",
    "end": "172800"
  },
  {
    "text": "endpoint uh everything is immediately",
    "start": "172800",
    "end": "174959"
  },
  {
    "text": "dropped into a Kafka cluster um for",
    "start": "174959",
    "end": "176879"
  },
  {
    "text": "those of you who are not familiar Kafka",
    "start": "176879",
    "end": "178400"
  },
  {
    "text": "is you know very popular queuing",
    "start": "178400",
    "end": "180599"
  },
  {
    "text": "Technologies these days for very high",
    "start": "180599",
    "end": "182640"
  },
  {
    "text": "volume uh log data and you know event",
    "start": "182640",
    "end": "185200"
  },
  {
    "text": "data is you know very similar to log",
    "start": "185200",
    "end": "186680"
  },
  {
    "text": "data um and so we use it quite heavily",
    "start": "186680",
    "end": "190040"
  },
  {
    "text": "uh so we drop it in Kafka cluster",
    "start": "190040",
    "end": "191640"
  },
  {
    "text": "immediately for durability so that we",
    "start": "191640",
    "end": "193400"
  },
  {
    "text": "can immediately tell the uh tell the",
    "start": "193400",
    "end": "196080"
  },
  {
    "text": "client that we've accepted it uh so and",
    "start": "196080",
    "end": "198640"
  },
  {
    "text": "then it goes through a data",
    "start": "198640",
    "end": "199640"
  },
  {
    "text": "transformation process U which we'll get",
    "start": "199640",
    "end": "201440"
  },
  {
    "text": "into later after that it gets dropped",
    "start": "201440",
    "end": "203440"
  },
  {
    "text": "into a second CCO cluster where it then",
    "start": "203440",
    "end": "205319"
  },
  {
    "text": "basically Forks to a bunch of Downstream",
    "start": "205319",
    "end": "206959"
  },
  {
    "text": "data processing things so what we're",
    "start": "206959",
    "end": "208319"
  },
  {
    "text": "going to be focusing on today is the",
    "start": "208319",
    "end": "209799"
  },
  {
    "text": "data transformation process and so uh",
    "start": "209799",
    "end": "212280"
  },
  {
    "text": "we'll be talking about like all of the",
    "start": "212280",
    "end": "213519"
  },
  {
    "text": "pre-processing we do on the data before",
    "start": "213519",
    "end": "215840"
  },
  {
    "text": "uh it kind of gets handled by the rest",
    "start": "215840",
    "end": "217319"
  },
  {
    "text": "of the system what does this data",
    "start": "217319",
    "end": "218640"
  },
  {
    "start": "218000",
    "end": "306000"
  },
  {
    "text": "transformation you know pipeline",
    "start": "218640",
    "end": "220200"
  },
  {
    "text": "actually do at the very basic level it",
    "start": "220200",
    "end": "221760"
  },
  {
    "text": "takes HTTP requests containing the raw",
    "start": "221760",
    "end": "223959"
  },
  {
    "text": "data U these come from our sdks that are",
    "start": "223959",
    "end": "226400"
  },
  {
    "text": "in mobile apps or websites and",
    "start": "226400",
    "end": "229760"
  },
  {
    "text": "transforms them into proper events that",
    "start": "229760",
    "end": "231920"
  },
  {
    "text": "the rest of the system can understand",
    "start": "231920",
    "end": "233920"
  },
  {
    "text": "and so what does this actually look like",
    "start": "233920",
    "end": "236239"
  },
  {
    "text": "uh here's kind of a simple example uh",
    "start": "236239",
    "end": "238920"
  },
  {
    "text": "the HB request might contain the the API",
    "start": "238920",
    "end": "241040"
  },
  {
    "text": "key of the application you know to tell",
    "start": "241040",
    "end": "242560"
  },
  {
    "text": "us which one it is and then some",
    "start": "242560",
    "end": "244239"
  },
  {
    "text": "information like the user the device the",
    "start": "244239",
    "end": "246920"
  },
  {
    "text": "timestamp like what type of event that's",
    "start": "246920",
    "end": "249040"
  },
  {
    "text": "being performed you know in this case",
    "start": "249040",
    "end": "250760"
  },
  {
    "text": "it's Play song for say a music",
    "start": "250760",
    "end": "252439"
  },
  {
    "text": "application and uh then some user",
    "start": "252439",
    "end": "254840"
  },
  {
    "text": "properties potentially associated with",
    "start": "254840",
    "end": "256440"
  },
  {
    "text": "the",
    "start": "256440",
    "end": "257320"
  },
  {
    "text": "person and you know the transformation",
    "start": "257320",
    "end": "259720"
  },
  {
    "text": "process you know it's it you know",
    "start": "259720",
    "end": "261280"
  },
  {
    "text": "doesn't look too different at the end um",
    "start": "261280",
    "end": "263040"
  },
  {
    "text": "but it adds a few pieces of important",
    "start": "263040",
    "end": "265000"
  },
  {
    "text": "important information so app is like you",
    "start": "265000",
    "end": "267320"
  },
  {
    "text": "know what we resolved the API key to uh",
    "start": "267320",
    "end": "269560"
  },
  {
    "text": "you you'll notice a field called",
    "start": "269560",
    "end": "270560"
  },
  {
    "text": "amplitude ID U which we'll talk a lot",
    "start": "270560",
    "end": "272960"
  },
  {
    "text": "more about later but that's kind of our",
    "start": "272960",
    "end": "274160"
  },
  {
    "text": "internal resolution of who the user is",
    "start": "274160",
    "end": "276600"
  },
  {
    "text": "um and then you'll see potentially other",
    "start": "276600",
    "end": "278520"
  },
  {
    "text": "user properties appearing um based on",
    "start": "278520",
    "end": "280560"
  },
  {
    "text": "historical data uh we'll get into that",
    "start": "280560",
    "end": "282320"
  },
  {
    "text": "as well as well as a few other things",
    "start": "282320",
    "end": "284280"
  },
  {
    "text": "and so you know the concept of this",
    "start": "284280",
    "end": "286520"
  },
  {
    "text": "transformation is relatively simple but",
    "start": "286520",
    "end": "288720"
  },
  {
    "text": "uh the important thing is that it has to",
    "start": "288720",
    "end": "290039"
  },
  {
    "text": "operate at scale um today we process uh",
    "start": "290039",
    "end": "293680"
  },
  {
    "text": "at the the High Times or peak times",
    "start": "293680",
    "end": "296039"
  },
  {
    "text": "during the day about 40,000 events per",
    "start": "296039",
    "end": "297600"
  },
  {
    "text": "second and so you know and that's that's",
    "start": "297600",
    "end": "299880"
  },
  {
    "text": "growing very quickly and so we're",
    "start": "299880",
    "end": "300960"
  },
  {
    "text": "constantly thinking about how to make",
    "start": "300960",
    "end": "302080"
  },
  {
    "text": "sure this uh transformation process is",
    "start": "302080",
    "end": "305080"
  },
  {
    "text": "scalable here's kind of the the key",
    "start": "305080",
    "end": "306759"
  },
  {
    "start": "306000",
    "end": "382000"
  },
  {
    "text": "steps of the data transform pipeline um",
    "start": "306759",
    "end": "308960"
  },
  {
    "text": "I'll just talk about them very briefly",
    "start": "308960",
    "end": "310360"
  },
  {
    "text": "before we get into the ones that are",
    "start": "310360",
    "end": "312039"
  },
  {
    "text": "most relevant to this discussion uh",
    "start": "312039",
    "end": "313880"
  },
  {
    "text": "first is request validation kind of",
    "start": "313880",
    "end": "315320"
  },
  {
    "text": "simple stuff we decide whether it's a",
    "start": "315320",
    "end": "316720"
  },
  {
    "text": "good thing or whether it's a good",
    "start": "316720",
    "end": "317960"
  },
  {
    "text": "request or not um you know sometimes we",
    "start": "317960",
    "end": "320000"
  },
  {
    "text": "get spammed by uh people that just uh",
    "start": "320000",
    "end": "322319"
  },
  {
    "text": "send bad data time St adjustment uh as",
    "start": "322319",
    "end": "324840"
  },
  {
    "text": "it turns out you know mobile phones are",
    "start": "324840",
    "end": "326440"
  },
  {
    "text": "often not uh you know uh they don't have",
    "start": "326440",
    "end": "329840"
  },
  {
    "text": "like MTP on them and everything so",
    "start": "329840",
    "end": "331520"
  },
  {
    "text": "they're not recording the right time",
    "start": "331520",
    "end": "332600"
  },
  {
    "text": "stamp and when the data comes in we",
    "start": "332600",
    "end": "333880"
  },
  {
    "text": "don't want time stamp to be all messed",
    "start": "333880",
    "end": "335479"
  },
  {
    "text": "up and so we kind of resolve the client",
    "start": "335479",
    "end": "336720"
  },
  {
    "text": "and server time differential uh D",
    "start": "336720",
    "end": "338840"
  },
  {
    "text": "duplication uh they also mobile devices",
    "start": "338840",
    "end": "341280"
  },
  {
    "text": "also have poor connections typically and",
    "start": "341280",
    "end": "343600"
  },
  {
    "text": "so they might send a request and then",
    "start": "343600",
    "end": "345400"
  },
  {
    "text": "they don't really know if they got a",
    "start": "345400",
    "end": "346520"
  },
  {
    "text": "response and so you know the the client",
    "start": "346520",
    "end": "348880"
  },
  {
    "text": "is you know will obviously retry that so",
    "start": "348880",
    "end": "350840"
  },
  {
    "text": "the data isn't lost and then on the",
    "start": "350840",
    "end": "352360"
  },
  {
    "text": "server side we need to understand that",
    "start": "352360",
    "end": "354080"
  },
  {
    "text": "you know data might have come in before",
    "start": "354080",
    "end": "355520"
  },
  {
    "text": "and uh D duplicate it and then we also",
    "start": "355520",
    "end": "358560"
  },
  {
    "text": "do a bunch of Integrations you know we",
    "start": "358560",
    "end": "360000"
  },
  {
    "text": "are primar primarily an analytic service",
    "start": "360000",
    "end": "362360"
  },
  {
    "text": "but people like to hook up a lot of",
    "start": "362360",
    "end": "363560"
  },
  {
    "text": "different things to analytic Services uh",
    "start": "363560",
    "end": "365440"
  },
  {
    "text": "this includes like marketing tools if",
    "start": "365440",
    "end": "367000"
  },
  {
    "text": "you want to send push notifications or",
    "start": "367000",
    "end": "368759"
  },
  {
    "text": "attribution tools if you want to track",
    "start": "368759",
    "end": "370520"
  },
  {
    "text": "like your marketing channels and figure",
    "start": "370520",
    "end": "371919"
  },
  {
    "text": "out where you're coming from so we'll do",
    "start": "371919",
    "end": "373440"
  },
  {
    "text": "a allot of that work in the",
    "start": "373440",
    "end": "374280"
  },
  {
    "text": "transformation pipeline um and the last",
    "start": "374280",
    "end": "376720"
  },
  {
    "text": "two which are really the ones that we're",
    "start": "376720",
    "end": "378199"
  },
  {
    "text": "going to focus on and see how Dynamo DB",
    "start": "378199",
    "end": "380400"
  },
  {
    "text": "helps us are applying user properties",
    "start": "380400",
    "end": "382120"
  },
  {
    "start": "382000",
    "end": "458000"
  },
  {
    "text": "and resolving Ute ID yeah as we saw",
    "start": "382120",
    "end": "384080"
  },
  {
    "text": "previously you know the the user",
    "start": "384080",
    "end": "385680"
  },
  {
    "text": "properties that came in on the event",
    "start": "385680",
    "end": "386919"
  },
  {
    "text": "were like you know age equals 30 I",
    "start": "386919",
    "end": "388800"
  },
  {
    "text": "apologize should have put this year",
    "start": "388800",
    "end": "389840"
  },
  {
    "text": "again and then but a new property called",
    "start": "389840",
    "end": "391440"
  },
  {
    "text": "like gender female appeared and so what",
    "start": "391440",
    "end": "394039"
  },
  {
    "text": "do this like why did that happen and so",
    "start": "394039",
    "end": "396000"
  },
  {
    "text": "in our system user properties are",
    "start": "396000",
    "end": "397400"
  },
  {
    "text": "associated with the user at you know",
    "start": "397400",
    "end": "399720"
  },
  {
    "text": "some point in time we are informed that",
    "start": "399720",
    "end": "401560"
  },
  {
    "text": "the user's gender is female or their age",
    "start": "401560",
    "end": "403520"
  },
  {
    "text": "is 30 and all future events uh get those",
    "start": "403520",
    "end": "406840"
  },
  {
    "text": "properties applied to them and so this",
    "start": "406840",
    "end": "408720"
  },
  {
    "text": "is like a fully denormalized thing where",
    "start": "408720",
    "end": "410800"
  },
  {
    "text": "you know the the user is not really",
    "start": "410800",
    "end": "412280"
  },
  {
    "text": "separate from the event um the",
    "start": "412280",
    "end": "414440"
  },
  {
    "text": "properties are all applied on the event",
    "start": "414440",
    "end": "415680"
  },
  {
    "text": "to make it easier to query",
    "start": "415680",
    "end": "417520"
  },
  {
    "text": "later um and so you know in our in the",
    "start": "417520",
    "end": "420199"
  },
  {
    "text": "SQL world we had a user properties table",
    "start": "420199",
    "end": "423360"
  },
  {
    "text": "where uh you know it's very simple it's",
    "start": "423360",
    "end": "425879"
  },
  {
    "text": "got the app it's got the ampu ID which",
    "start": "425879",
    "end": "427440"
  },
  {
    "text": "is our internal resolution of who the",
    "start": "427440",
    "end": "428840"
  },
  {
    "text": "user is and then we're using an H store",
    "start": "428840",
    "end": "431240"
  },
  {
    "text": "uh column in postgress which is just you",
    "start": "431240",
    "end": "433800"
  },
  {
    "text": "know key value mapping and so when we",
    "start": "433800",
    "end": "436160"
  },
  {
    "text": "get new user properties we update them",
    "start": "436160",
    "end": "438080"
  },
  {
    "text": "and then when we get new events we apply",
    "start": "438080",
    "end": "439639"
  },
  {
    "text": "the existing user properties to the",
    "start": "439639",
    "end": "441000"
  },
  {
    "text": "event um and it's kind of as simple as",
    "start": "441000",
    "end": "443160"
  },
  {
    "text": "that and so yeah the context around kind",
    "start": "443160",
    "end": "445919"
  },
  {
    "text": "of all all the two steps of the pipeline",
    "start": "445919",
    "end": "447879"
  },
  {
    "text": "we to discuss is we used to do",
    "start": "447879",
    "end": "449240"
  },
  {
    "text": "everything in SQL this was like you know",
    "start": "449240",
    "end": "450879"
  },
  {
    "text": "a year year and a half back um and then",
    "start": "450879",
    "end": "453160"
  },
  {
    "text": "we'll see why and how we switch to",
    "start": "453160",
    "end": "454879"
  },
  {
    "text": "Dynamo so the introduction to all this",
    "start": "454879",
    "end": "457039"
  },
  {
    "text": "is going to be in SQL so resolving",
    "start": "457039",
    "end": "458400"
  },
  {
    "start": "458000",
    "end": "538000"
  },
  {
    "text": "amplitud ID is somewhat more complicated",
    "start": "458400",
    "end": "460400"
  },
  {
    "text": "process I'll go through a little bit",
    "start": "460400",
    "end": "461879"
  },
  {
    "text": "about what uh what actually happens",
    "start": "461879",
    "end": "463720"
  },
  {
    "text": "there so a user ID is the the customer",
    "start": "463720",
    "end": "465840"
  },
  {
    "text": "defined identifier of who the user is so",
    "start": "465840",
    "end": "468599"
  },
  {
    "text": "this could be like an email or a login",
    "start": "468599",
    "end": "471440"
  },
  {
    "text": "or uh if you have an internal ID in your",
    "start": "471440",
    "end": "474039"
  },
  {
    "text": "database um people will often use that",
    "start": "474039",
    "end": "476680"
  },
  {
    "text": "as the user ID in our",
    "start": "476680",
    "end": "478319"
  },
  {
    "text": "system um um and that that's kind of",
    "start": "478319",
    "end": "481319"
  },
  {
    "text": "like the first order thing that tells us",
    "start": "481319",
    "end": "482759"
  },
  {
    "text": "who the user is you know if if the",
    "start": "482759",
    "end": "484319"
  },
  {
    "text": "customer says the user is this person",
    "start": "484319",
    "end": "486199"
  },
  {
    "text": "then we will uh just always assume that",
    "start": "486199",
    "end": "487960"
  },
  {
    "text": "that's true and not try to do anything",
    "start": "487960",
    "end": "489520"
  },
  {
    "text": "fancy uh device ID is uh often uh used",
    "start": "489520",
    "end": "493240"
  },
  {
    "text": "as well which is a random usually a",
    "start": "493240",
    "end": "496000"
  },
  {
    "text": "random token generated on uh the mobile",
    "start": "496000",
    "end": "499759"
  },
  {
    "text": "device or the you know in the browser uh",
    "start": "499759",
    "end": "502360"
  },
  {
    "text": "to indicate you know that all the events",
    "start": "502360",
    "end": "504520"
  },
  {
    "text": "you know coming from a certain session",
    "start": "504520",
    "end": "506080"
  },
  {
    "text": "or or a computer or phone uh are the",
    "start": "506080",
    "end": "509159"
  },
  {
    "text": "same and so when you don't have a user",
    "start": "509159",
    "end": "511400"
  },
  {
    "text": "ID let's say someone just opens your app",
    "start": "511400",
    "end": "513000"
  },
  {
    "text": "or your website and they haven't logged",
    "start": "513000",
    "end": "514159"
  },
  {
    "text": "in you don't know who they are they'll",
    "start": "514159",
    "end": "515719"
  },
  {
    "text": "just have a device ID that ties all",
    "start": "515719",
    "end": "517760"
  },
  {
    "text": "their events coming from that device",
    "start": "517760",
    "end": "519719"
  },
  {
    "text": "together and so lastly you know we we",
    "start": "519719",
    "end": "522240"
  },
  {
    "text": "had these two pieces of information from",
    "start": "522240",
    "end": "524240"
  },
  {
    "text": "the uh SDK and then you know our job is",
    "start": "524240",
    "end": "527040"
  },
  {
    "text": "to determine uh the amplitud ID which is",
    "start": "527040",
    "end": "530040"
  },
  {
    "text": "to say uh like which canonical user",
    "start": "530040",
    "end": "533240"
  },
  {
    "text": "within our system this is and figure out",
    "start": "533240",
    "end": "535880"
  },
  {
    "text": "uh when two users are the same user ID",
    "start": "535880",
    "end": "537959"
  },
  {
    "text": "tells you for sure that this this is a",
    "start": "537959",
    "end": "539760"
  },
  {
    "start": "538000",
    "end": "578000"
  },
  {
    "text": "user um and there's so the interesting",
    "start": "539760",
    "end": "543440"
  },
  {
    "text": "Cas is when you don't have a user ID so",
    "start": "543440",
    "end": "546000"
  },
  {
    "text": "let's say you have a device ID someone's",
    "start": "546000",
    "end": "547720"
  },
  {
    "text": "anonymously sending you events uh and",
    "start": "547720",
    "end": "549880"
  },
  {
    "text": "then so you know when the event comes in",
    "start": "549880",
    "end": "551480"
  },
  {
    "text": "you have to assign them an amplitud ID",
    "start": "551480",
    "end": "552839"
  },
  {
    "text": "they have some canonical ID within the",
    "start": "552839",
    "end": "554440"
  },
  {
    "text": "system and you know that's who they are",
    "start": "554440",
    "end": "556800"
  },
  {
    "text": "what you know becomes you know where it",
    "start": "556800",
    "end": "559040"
  },
  {
    "text": "becomes a little bit more interesting is",
    "start": "559040",
    "end": "560120"
  },
  {
    "text": "later when they log",
    "start": "560120",
    "end": "561360"
  },
  {
    "text": "in now you have a user ID and device ID",
    "start": "561360",
    "end": "564959"
  },
  {
    "text": "and so you want to make sure that you",
    "start": "564959",
    "end": "566440"
  },
  {
    "text": "know when the user log in they assume",
    "start": "566440",
    "end": "568399"
  },
  {
    "text": "the amplitude ID",
    "start": "568399",
    "end": "569920"
  },
  {
    "text": "uh of that device",
    "start": "569920",
    "end": "571680"
  },
  {
    "text": "ID and then potentially they can log in",
    "start": "571680",
    "end": "573959"
  },
  {
    "text": "on a different system and you want to",
    "start": "573959",
    "end": "575519"
  },
  {
    "text": "make sure that the ampl IDS there are",
    "start": "575519",
    "end": "577120"
  },
  {
    "text": "resolved as well when we're resolving",
    "start": "577120",
    "end": "578560"
  },
  {
    "start": "578000",
    "end": "699000"
  },
  {
    "text": "amp ID there's two tables user IDs and",
    "start": "578560",
    "end": "580399"
  },
  {
    "text": "device IDs I'll talk about both of them",
    "start": "580399",
    "end": "582480"
  },
  {
    "text": "so again these tables are fairly simple",
    "start": "582480",
    "end": "584720"
  },
  {
    "text": "you know it's got the app which is the",
    "start": "584720",
    "end": "586720"
  },
  {
    "text": "context in which it's running the device",
    "start": "586720",
    "end": "588040"
  },
  {
    "text": "ID uh the amplitud DAT resolved to and",
    "start": "588040",
    "end": "590480"
  },
  {
    "text": "then a time stamp um this is because on",
    "start": "590480",
    "end": "592440"
  },
  {
    "text": "a single device you can have potentially",
    "start": "592440",
    "end": "594320"
  },
  {
    "text": "multiple different users um right",
    "start": "594320",
    "end": "596440"
  },
  {
    "text": "especially true with like browsers uh",
    "start": "596440",
    "end": "598600"
  },
  {
    "text": "it's often the case that that you know",
    "start": "598600",
    "end": "599920"
  },
  {
    "text": "let's say you're in like a library or",
    "start": "599920",
    "end": "601000"
  },
  {
    "text": "something lots of people are using the",
    "start": "601000",
    "end": "602200"
  },
  {
    "text": "same",
    "start": "602200",
    "end": "603320"
  },
  {
    "text": "browser",
    "start": "603320",
    "end": "604880"
  },
  {
    "text": "um so the access patterns for this",
    "start": "604880",
    "end": "608560"
  },
  {
    "text": "are when you you know when you",
    "start": "608560",
    "end": "611880"
  },
  {
    "text": "see uh you know an anonomous event comes",
    "start": "611880",
    "end": "614680"
  },
  {
    "text": "in that comes in you need to know",
    "start": "614680",
    "end": "616399"
  },
  {
    "text": "whether you there's already been ampl ID",
    "start": "616399",
    "end": "618360"
  },
  {
    "text": "assigned to that and so that's when you",
    "start": "618360",
    "end": "619760"
  },
  {
    "text": "use the app device ID index um it's also",
    "start": "619760",
    "end": "622160"
  },
  {
    "text": "got time at the end which I'll get to a",
    "start": "622160",
    "end": "623480"
  },
  {
    "text": "little bit later but that just looks up",
    "start": "623480",
    "end": "625839"
  },
  {
    "text": "you know is there an ample ID that we've",
    "start": "625839",
    "end": "627480"
  },
  {
    "text": "already assigned to this device",
    "start": "627480",
    "end": "628680"
  },
  {
    "text": "anonymously um if so you know this new",
    "start": "628680",
    "end": "631320"
  },
  {
    "text": "Anonymous user we should assume is the",
    "start": "631320",
    "end": "632720"
  },
  {
    "text": "same as the previous one and use that",
    "start": "632720",
    "end": "634120"
  },
  {
    "text": "amplitude ID when you look up a user",
    "start": "634120",
    "end": "636959"
  },
  {
    "text": "within the system uh sometimes you just",
    "start": "636959",
    "end": "638680"
  },
  {
    "text": "want to see all the devices they're on",
    "start": "638680",
    "end": "640600"
  },
  {
    "text": "and you know to to show that uh you need",
    "start": "640600",
    "end": "642920"
  },
  {
    "text": "that second index the user ID's table uh",
    "start": "642920",
    "end": "645519"
  },
  {
    "text": "so again when we see a user ID that is",
    "start": "645519",
    "end": "647839"
  },
  {
    "text": "the first thing that we use and so this",
    "start": "647839",
    "end": "649519"
  },
  {
    "text": "app user ID index is kind of the the you",
    "start": "649519",
    "end": "652279"
  },
  {
    "text": "know a very I don't know like the first",
    "start": "652279",
    "end": "654800"
  },
  {
    "text": "order index within the resolution",
    "start": "654800",
    "end": "656680"
  },
  {
    "text": "process if an entry exists for that user",
    "start": "656680",
    "end": "658720"
  },
  {
    "text": "ID already kind of the whole resolution",
    "start": "658720",
    "end": "660760"
  },
  {
    "text": "process stops and we're like this is the",
    "start": "660760",
    "end": "662000"
  },
  {
    "text": "amplitud ID there's no reason for us to",
    "start": "662000",
    "end": "663800"
  },
  {
    "text": "continue trying to figure out if there's",
    "start": "663800",
    "end": "665880"
  },
  {
    "text": "any weird device correlations between",
    "start": "665880",
    "end": "667760"
  },
  {
    "text": "people this is definitely that",
    "start": "667760",
    "end": "669680"
  },
  {
    "text": "person uh so that's pretty simple and",
    "start": "669680",
    "end": "671920"
  },
  {
    "text": "then the app amplitud ID index uh is",
    "start": "671920",
    "end": "674079"
  },
  {
    "text": "used for uh a somewhat complicated uh",
    "start": "674079",
    "end": "677200"
  },
  {
    "text": "merge process where uh it can be the",
    "start": "677200",
    "end": "679680"
  },
  {
    "text": "case that we actually have two amplitude",
    "start": "679680",
    "end": "681320"
  },
  {
    "text": "IDs that we need to uh merge together um",
    "start": "681320",
    "end": "684760"
  },
  {
    "text": "not going to not going to go into too",
    "start": "684760",
    "end": "686560"
  },
  {
    "text": "much detail about that specific use case",
    "start": "686560",
    "end": "688440"
  },
  {
    "text": "but is important that we have uh the",
    "start": "688440",
    "end": "690519"
  },
  {
    "text": "lookup by app amplitude ID to identify",
    "start": "690519",
    "end": "692480"
  },
  {
    "text": "that case so now we've kind of",
    "start": "692480",
    "end": "694279"
  },
  {
    "text": "established uh the the two different use",
    "start": "694279",
    "end": "697040"
  },
  {
    "text": "cases that we have and how they manifest",
    "start": "697040",
    "end": "698839"
  },
  {
    "text": "it in SQL why SQL um a lot of people are",
    "start": "698839",
    "end": "703040"
  },
  {
    "start": "699000",
    "end": "725000"
  },
  {
    "text": "usually familiar with it and you don't",
    "start": "703040",
    "end": "704959"
  },
  {
    "text": "really know like what your use cases",
    "start": "704959",
    "end": "706920"
  },
  {
    "text": "your business use cases are going to be",
    "start": "706920",
    "end": "708760"
  },
  {
    "text": "so it just gives you a lot of",
    "start": "708760",
    "end": "710240"
  },
  {
    "text": "flexibility um you got acid um you want",
    "start": "710240",
    "end": "713680"
  },
  {
    "text": "to add more indexes you can always do",
    "start": "713680",
    "end": "715360"
  },
  {
    "text": "that and they'll be strongly consistent",
    "start": "715360",
    "end": "718079"
  },
  {
    "text": "um if you inep having complicated",
    "start": "718079",
    "end": "720480"
  },
  {
    "text": "transactional use cases you know that",
    "start": "720480",
    "end": "722760"
  },
  {
    "text": "you'll be able to do those scaling is",
    "start": "722760",
    "end": "725320"
  },
  {
    "start": "725000",
    "end": "762000"
  },
  {
    "text": "very difficult typically like all of",
    "start": "725320",
    "end": "727760"
  },
  {
    "text": "those things break down once you need to",
    "start": "727760",
    "end": "729880"
  },
  {
    "text": "have multiple instances running why",
    "start": "729880",
    "end": "731720"
  },
  {
    "text": "Dynamo simple API it's a basic key Value",
    "start": "731720",
    "end": "735240"
  },
  {
    "text": "Store um once you understand your use",
    "start": "735240",
    "end": "738440"
  },
  {
    "text": "cases um and you've identified that like",
    "start": "738440",
    "end": "742000"
  },
  {
    "text": "like sort of The Limited ways that you",
    "start": "742000",
    "end": "744160"
  },
  {
    "text": "want to access the data you'll be able",
    "start": "744160",
    "end": "745959"
  },
  {
    "text": "to make like a confident decision that",
    "start": "745959",
    "end": "748560"
  },
  {
    "text": "uh d is right for you last thing um",
    "start": "748560",
    "end": "751560"
  },
  {
    "text": "conditional updates which sort of allow",
    "start": "751560",
    "end": "753440"
  },
  {
    "text": "you to Model A lot of the transactional",
    "start": "753440",
    "end": "755560"
  },
  {
    "text": "concepts but usually requiring um some",
    "start": "755560",
    "end": "759440"
  },
  {
    "text": "limitations on how exactly that all",
    "start": "759440",
    "end": "761920"
  },
  {
    "text": "works final reason it's really easy to",
    "start": "761920",
    "end": "764320"
  },
  {
    "start": "762000",
    "end": "769000"
  },
  {
    "text": "manage in scale you just go click",
    "start": "764320",
    "end": "766160"
  },
  {
    "text": "buttons you get more hosts data gets",
    "start": "766160",
    "end": "768320"
  },
  {
    "text": "spread around Jeffrey talked about the",
    "start": "768320",
    "end": "769959"
  },
  {
    "start": "769000",
    "end": "802000"
  },
  {
    "text": "user properties table that's like a good",
    "start": "769959",
    "end": "772399"
  },
  {
    "text": "example of like you just have a table",
    "start": "772399",
    "end": "774519"
  },
  {
    "text": "that you don't know what you're going to",
    "start": "774519",
    "end": "775920"
  },
  {
    "text": "do with it necessarily um but then after",
    "start": "775920",
    "end": "780079"
  },
  {
    "text": "the sort of the use cases have",
    "start": "780079",
    "end": "781839"
  },
  {
    "text": "stabilized you realize that you really",
    "start": "781839",
    "end": "784399"
  },
  {
    "text": "only have this one AIS pattern you're",
    "start": "784399",
    "end": "785959"
  },
  {
    "text": "looking it up by its primary key and",
    "start": "785959",
    "end": "789040"
  },
  {
    "text": "merging old user properties with the",
    "start": "789040",
    "end": "791040"
  },
  {
    "text": "current user properties on an event um",
    "start": "791040",
    "end": "793639"
  },
  {
    "text": "or adding new user properties to sort of",
    "start": "793639",
    "end": "795720"
  },
  {
    "text": "just a blob of data so you basically",
    "start": "795720",
    "end": "797680"
  },
  {
    "text": "just have like a uh dictionary as the",
    "start": "797680",
    "end": "800680"
  },
  {
    "text": "value under some primary key here's an",
    "start": "800680",
    "end": "802680"
  },
  {
    "start": "802000",
    "end": "808000"
  },
  {
    "text": "example you can sort of see um the sort",
    "start": "802680",
    "end": "805959"
  },
  {
    "text": "of properties that people have this was",
    "start": "805959",
    "end": "808120"
  },
  {
    "start": "808000",
    "end": "834000"
  },
  {
    "text": "mentioned in the previous talk as as",
    "start": "808120",
    "end": "809240"
  },
  {
    "text": "well but we do cache our Dynamo reads",
    "start": "809240",
    "end": "811519"
  },
  {
    "text": "pretty heavily uh as with any database",
    "start": "811519",
    "end": "813320"
  },
  {
    "text": "caching is kind of a natural way to uh",
    "start": "813320",
    "end": "815320"
  },
  {
    "text": "reduce the load on the you know more",
    "start": "815320",
    "end": "817600"
  },
  {
    "text": "contentious resource which is typically",
    "start": "817600",
    "end": "819279"
  },
  {
    "text": "IO or in Dynamo's case the capacity um",
    "start": "819279",
    "end": "822079"
  },
  {
    "text": "we use Reddit a lot uh you know because",
    "start": "822079",
    "end": "825079"
  },
  {
    "text": "the key value data model and redis you",
    "start": "825079",
    "end": "826760"
  },
  {
    "text": "know maps to Dynamo pretty nicely uh",
    "start": "826760",
    "end": "828839"
  },
  {
    "text": "it's easy uh we have about 80% hit rate",
    "start": "828839",
    "end": "830959"
  },
  {
    "text": "on our cash right now and just reduces",
    "start": "830959",
    "end": "832560"
  },
  {
    "text": "costs and is really nice ampl ID",
    "start": "832560",
    "end": "834959"
  },
  {
    "start": "834000",
    "end": "850000"
  },
  {
    "text": "resolution use case in Dynamo which is",
    "start": "834959",
    "end": "837160"
  },
  {
    "text": "uh somewhat more complicated because we",
    "start": "837160",
    "end": "838920"
  },
  {
    "text": "have multiple lookups on these tables as",
    "start": "838920",
    "end": "840759"
  },
  {
    "text": "you saw from the multiple indexes on the",
    "start": "840759",
    "end": "842440"
  },
  {
    "text": "SQL tables before um one important thing",
    "start": "842440",
    "end": "845120"
  },
  {
    "text": "to note is that the items are immutable",
    "start": "845120",
    "end": "846680"
  },
  {
    "text": "so we don't do dates but we do inserts",
    "start": "846680",
    "end": "848800"
  },
  {
    "text": "and we do reads based on our SQL schema",
    "start": "848800",
    "end": "851440"
  },
  {
    "start": "850000",
    "end": "863000"
  },
  {
    "text": "before you know these were the fields",
    "start": "851440",
    "end": "853000"
  },
  {
    "text": "and these were the the lookups that we",
    "start": "853000",
    "end": "854720"
  },
  {
    "text": "did on the table uh so how do we uh turn",
    "start": "854720",
    "end": "858240"
  },
  {
    "text": "that into a Dynamo schema you know",
    "start": "858240",
    "end": "860320"
  },
  {
    "text": "hopefully from your previous talk you",
    "start": "860320",
    "end": "861600"
  },
  {
    "text": "can you have now the tools to figure",
    "start": "861600",
    "end": "863320"
  },
  {
    "start": "863000",
    "end": "936000"
  },
  {
    "text": "that out but here's what we figured out",
    "start": "863320",
    "end": "864880"
  },
  {
    "text": "you know one thing to note is that yeah",
    "start": "864880",
    "end": "866839"
  },
  {
    "text": "the hash key you know so although the",
    "start": "866839",
    "end": "868839"
  },
  {
    "text": "the main look up is app plus device ID",
    "start": "868839",
    "end": "870680"
  },
  {
    "text": "plus time the hash key we do use as app",
    "start": "870680",
    "end": "872680"
  },
  {
    "text": "plus device ID because you know",
    "start": "872680",
    "end": "874279"
  },
  {
    "text": "sometimes we do want to look up all of",
    "start": "874279",
    "end": "875759"
  },
  {
    "text": "the ampli IDS on a device ID and so then",
    "start": "875759",
    "end": "878440"
  },
  {
    "text": "we use time as the range key and so this",
    "start": "878440",
    "end": "880440"
  },
  {
    "text": "is you know this fits kind of within the",
    "start": "880440",
    "end": "882120"
  },
  {
    "text": "schema design pattern of dynama because",
    "start": "882120",
    "end": "884040"
  },
  {
    "text": "app device ID is quite uh it's quite a",
    "start": "884040",
    "end": "887240"
  },
  {
    "text": "large keyspace um a device ID is like",
    "start": "887240",
    "end": "889720"
  },
  {
    "text": "associated with a specific you know",
    "start": "889720",
    "end": "891160"
  },
  {
    "text": "phone or browser and so they there are a",
    "start": "891160",
    "end": "893360"
  },
  {
    "text": "lot of them and so we don't have too",
    "start": "893360",
    "end": "894759"
  },
  {
    "text": "much locality there um and for the",
    "start": "894759",
    "end": "897519"
  },
  {
    "text": "second lookup the amplitud ID direction",
    "start": "897519",
    "end": "900120"
  },
  {
    "text": "to figure out you know all the devices",
    "start": "900120",
    "end": "901720"
  },
  {
    "text": "that this user is on we're okay with",
    "start": "901720",
    "end": "903360"
  },
  {
    "text": "this being eventually consistent because",
    "start": "903360",
    "end": "905519"
  },
  {
    "text": "uh this this reverse lookup is not part",
    "start": "905519",
    "end": "907440"
  },
  {
    "text": "of the you know transformation process",
    "start": "907440",
    "end": "909240"
  },
  {
    "text": "itself but rather uh like in our",
    "start": "909240",
    "end": "911320"
  },
  {
    "text": "interface someone can go look up all the",
    "start": "911320",
    "end": "913079"
  },
  {
    "text": "device IDs for an amp2 ID and so it's",
    "start": "913079",
    "end": "915040"
  },
  {
    "text": "not like critical that we have the",
    "start": "915040",
    "end": "917240"
  },
  {
    "text": "mapping perfect at all points in time as",
    "start": "917240",
    "end": "919440"
  },
  {
    "text": "long as it eventually shows up we're",
    "start": "919440",
    "end": "921120"
  },
  {
    "text": "okay with that so you know this table",
    "start": "921120",
    "end": "922759"
  },
  {
    "text": "fits the ends up fit fitting the Dynamo",
    "start": "922759",
    "end": "925279"
  },
  {
    "text": "schema pretty well and it helps that you",
    "start": "925279",
    "end": "927040"
  },
  {
    "text": "know the it doesn't have too many",
    "start": "927040",
    "end": "928519"
  },
  {
    "text": "different field and or rather it doesn't",
    "start": "928519",
    "end": "930680"
  },
  {
    "text": "have too many different access patterns",
    "start": "930680",
    "end": "932480"
  },
  {
    "text": "and so it it uh transitions much more",
    "start": "932480",
    "end": "934639"
  },
  {
    "text": "nicely to Dynamo the user ID stable uh a",
    "start": "934639",
    "end": "937079"
  },
  {
    "start": "936000",
    "end": "1071000"
  },
  {
    "text": "little bit more complicated because the",
    "start": "937079",
    "end": "939279"
  },
  {
    "text": "two lookups are both need to be strongly",
    "start": "939279",
    "end": "941759"
  },
  {
    "text": "consistent uh they are both resolved in",
    "start": "941759",
    "end": "944560"
  },
  {
    "text": "the transformation process and so we",
    "start": "944560",
    "end": "946519"
  },
  {
    "text": "have to figure out how to get at least",
    "start": "946519",
    "end": "949399"
  },
  {
    "text": "emulate strong consistency on both of",
    "start": "949399",
    "end": "950959"
  },
  {
    "text": "them we kind of use a hash key standard",
    "start": "950959",
    "end": "953040"
  },
  {
    "text": "app and user ID again that's a",
    "start": "953040",
    "end": "955000"
  },
  {
    "text": "relatively large key space because uh",
    "start": "955000",
    "end": "957519"
  },
  {
    "text": "that corresponds to like a single user",
    "start": "957519",
    "end": "959720"
  },
  {
    "text": "an end user of ours rather than you know",
    "start": "959720",
    "end": "962319"
  },
  {
    "text": "one of our customers and we have a",
    "start": "962319",
    "end": "964279"
  },
  {
    "text": "global secondary index again with app",
    "start": "964279",
    "end": "966319"
  },
  {
    "text": "amplitud ID but as I mentioned this",
    "start": "966319",
    "end": "967680"
  },
  {
    "text": "needs to be strongly consistent uh",
    "start": "967680",
    "end": "970600"
  },
  {
    "text": "during the resolution process and so how",
    "start": "970600",
    "end": "972399"
  },
  {
    "text": "do we get around that the gsis don't",
    "start": "972399",
    "end": "974079"
  },
  {
    "text": "support a strong consistency uh which is",
    "start": "974079",
    "end": "977000"
  },
  {
    "text": "uh which makes sense because it's a very",
    "start": "977000",
    "end": "978639"
  },
  {
    "text": "difficult distributed systems problem",
    "start": "978639",
    "end": "979800"
  },
  {
    "text": "actually uh and so we do several",
    "start": "979800",
    "end": "982279"
  },
  {
    "text": "mitigation factors as well as just some",
    "start": "982279",
    "end": "984480"
  },
  {
    "text": "reasoning about our use case to to get",
    "start": "984480",
    "end": "986360"
  },
  {
    "text": "around this uh so we we write things to",
    "start": "986360",
    "end": "988600"
  },
  {
    "text": "cach immediately when we insert them",
    "start": "988600",
    "end": "990480"
  },
  {
    "text": "into the table and so that that by",
    "start": "990480",
    "end": "992560"
  },
  {
    "text": "itself kind of eliminates the vast",
    "start": "992560",
    "end": "994279"
  },
  {
    "text": "majority of problems right as long as",
    "start": "994279",
    "end": "995639"
  },
  {
    "text": "your caches are up uh the the eventual",
    "start": "995639",
    "end": "998360"
  },
  {
    "text": "consistency will certainly take effect",
    "start": "998360",
    "end": "999959"
  },
  {
    "text": "before you know they flush or or things",
    "start": "999959",
    "end": "1002040"
  },
  {
    "text": "like that uh it's possible however that",
    "start": "1002040",
    "end": "1003880"
  },
  {
    "text": "you know the inmemory cache you restart",
    "start": "1003880",
    "end": "1005279"
  },
  {
    "text": "it or the red is cach it crashes who",
    "start": "1005279",
    "end": "1007279"
  },
  {
    "text": "knows um in that case we still don't",
    "start": "1007279",
    "end": "1008880"
  },
  {
    "text": "want you know too many problems um",
    "start": "1008880",
    "end": "1011120"
  },
  {
    "text": "fortunately we can you know reason",
    "start": "1011120",
    "end": "1012440"
  },
  {
    "text": "pretty nicely about this in",
    "start": "1012440",
    "end": "1014839"
  },
  {
    "text": "that the the actual amp or app plus amp",
    "start": "1014839",
    "end": "1018560"
  },
  {
    "text": "ID look up only happens uh on a specific",
    "start": "1018560",
    "end": "1021920"
  },
  {
    "text": "you know kind of a specific situation",
    "start": "1021920",
    "end": "1024000"
  },
  {
    "text": "where you know two users are like",
    "start": "1024000",
    "end": "1026199"
  },
  {
    "text": "logging on to the same device at the",
    "start": "1026199",
    "end": "1028038"
  },
  {
    "text": "same time so it's actually uh just this",
    "start": "1028039",
    "end": "1031400"
  },
  {
    "text": "really rare thing where it's very",
    "start": "1031400",
    "end": "1033959"
  },
  {
    "text": "unlikely that you know you're going to",
    "start": "1033959",
    "end": "1035438"
  },
  {
    "text": "have like a phone and have two people",
    "start": "1035439",
    "end": "1036839"
  },
  {
    "text": "log into the the app at the same time",
    "start": "1036839",
    "end": "1039640"
  },
  {
    "text": "and so because of that it's actually",
    "start": "1039640",
    "end": "1041120"
  },
  {
    "text": "like not a case that we care that much",
    "start": "1041120",
    "end": "1042678"
  },
  {
    "text": "about and so between you know the the",
    "start": "1042679",
    "end": "1044959"
  },
  {
    "text": "relative Rarity of the use case as well",
    "start": "1044959",
    "end": "1047319"
  },
  {
    "text": "as the inmemory caching red caching uh",
    "start": "1047319",
    "end": "1050200"
  },
  {
    "text": "we kind of you know assume that this is",
    "start": "1050200",
    "end": "1051960"
  },
  {
    "text": "a good enough approximation of uh the",
    "start": "1051960",
    "end": "1054600"
  },
  {
    "text": "strong consistency um we' have you know",
    "start": "1054600",
    "end": "1057000"
  },
  {
    "text": "we can identify these cases pretty",
    "start": "1057000",
    "end": "1058480"
  },
  {
    "text": "easily and we haven't run into any",
    "start": "1058480",
    "end": "1059559"
  },
  {
    "text": "issues so we're pretty happy with how",
    "start": "1059559",
    "end": "1060960"
  },
  {
    "text": "that worked out and so you know despite",
    "start": "1060960",
    "end": "1062919"
  },
  {
    "text": "not having the the strong consistency of",
    "start": "1062919",
    "end": "1065000"
  },
  {
    "text": "a you know a SQL index uh we were able",
    "start": "1065000",
    "end": "1067120"
  },
  {
    "text": "to to solve this use case uh you know",
    "start": "1067120",
    "end": "1069520"
  },
  {
    "text": "relatively straightforward in Dynamo one",
    "start": "1069520",
    "end": "1071280"
  },
  {
    "start": "1071000",
    "end": "1103000"
  },
  {
    "text": "thing that's kind of interesting you",
    "start": "1071280",
    "end": "1072520"
  },
  {
    "text": "know especially if you're running SQL",
    "start": "1072520",
    "end": "1073640"
  },
  {
    "text": "now is how to migrate from SQL Dy DB um",
    "start": "1073640",
    "end": "1076640"
  },
  {
    "text": "you know we have I guess multiple",
    "start": "1076640",
    "end": "1079039"
  },
  {
    "text": "terabytes is only the case now",
    "start": "1079039",
    "end": "1081000"
  },
  {
    "text": "previously we have maybe hundreds of",
    "start": "1081000",
    "end": "1082520"
  },
  {
    "text": "gigabytes in our SQL database uh and we",
    "start": "1082520",
    "end": "1085200"
  },
  {
    "text": "can't really just stop everything uh let",
    "start": "1085200",
    "end": "1087400"
  },
  {
    "text": "it let it run a big migration that you",
    "start": "1087400",
    "end": "1089360"
  },
  {
    "text": "know probably takes a few hours if not",
    "start": "1089360",
    "end": "1091360"
  },
  {
    "text": "like you know maybe even a day depending",
    "start": "1091360",
    "end": "1093280"
  },
  {
    "text": "on what kind of capacity you're",
    "start": "1093280",
    "end": "1095720"
  },
  {
    "text": "provisioning uh and so you know we need",
    "start": "1095720",
    "end": "1097880"
  },
  {
    "text": "to figure out how to get over to Dynamo",
    "start": "1097880",
    "end": "1099919"
  },
  {
    "text": "DB without you know incurring any uh",
    "start": "1099919",
    "end": "1102039"
  },
  {
    "text": "downtime or anything like that",
    "start": "1102039",
    "end": "1103240"
  },
  {
    "start": "1103000",
    "end": "1131000"
  },
  {
    "text": "originally you're reading and writing to",
    "start": "1103240",
    "end": "1104559"
  },
  {
    "text": "SQL and there's nothing happening with",
    "start": "1104559",
    "end": "1106080"
  },
  {
    "text": "Dynamo so the first step is uh to start",
    "start": "1106080",
    "end": "1109240"
  },
  {
    "text": "writing to Dynamo so we're we're",
    "start": "1109240",
    "end": "1111400"
  },
  {
    "text": "fortunate that there are no updates um",
    "start": "1111400",
    "end": "1113720"
  },
  {
    "text": "but even if you have updates you can",
    "start": "1113720",
    "end": "1115480"
  },
  {
    "text": "just write updated items to Dynamo as",
    "start": "1115480",
    "end": "1117679"
  },
  {
    "text": "long as you always read from Dynamo",
    "start": "1117679",
    "end": "1119039"
  },
  {
    "text": "first and then SQL you kind of always",
    "start": "1119039",
    "end": "1120440"
  },
  {
    "text": "have the latest thing U there are you",
    "start": "1120440",
    "end": "1122840"
  },
  {
    "text": "know a few edge cases where we do need",
    "start": "1122840",
    "end": "1125120"
  },
  {
    "text": "some sort of transactionality uh but",
    "start": "1125120",
    "end": "1127640"
  },
  {
    "text": "across the two-day bases but that's not",
    "start": "1127640",
    "end": "1129039"
  },
  {
    "text": "a big deal we can we use some locks in",
    "start": "1129039",
    "end": "1130640"
  },
  {
    "text": "that case so now you're writing all the",
    "start": "1130640",
    "end": "1132720"
  },
  {
    "text": "new items to Dynamo and so at some point",
    "start": "1132720",
    "end": "1135080"
  },
  {
    "text": "you probably want to shut down the SQL",
    "start": "1135080",
    "end": "1136320"
  },
  {
    "text": "database you're not running it forever",
    "start": "1136320",
    "end": "1138039"
  },
  {
    "text": "uh you don't have to make main all that",
    "start": "1138039",
    "end": "1139400"
  },
  {
    "text": "Legacy code that's talking in the SQL",
    "start": "1139400",
    "end": "1140760"
  },
  {
    "text": "database and so we add like a background",
    "start": "1140760",
    "end": "1143440"
  },
  {
    "text": "migration process that kind of slowly",
    "start": "1143440",
    "end": "1145559"
  },
  {
    "text": "reads through all the SQL data and",
    "start": "1145559",
    "end": "1147480"
  },
  {
    "text": "inserts it into Dynamo and eventually uh",
    "start": "1147480",
    "end": "1150000"
  },
  {
    "text": "you end up with everything in Dynamo and",
    "start": "1150000",
    "end": "1151440"
  },
  {
    "text": "then you can shut down your SQL database",
    "start": "1151440",
    "end": "1152960"
  },
  {
    "text": "and be happy kind of end on a few Dynamo",
    "start": "1152960",
    "end": "1155440"
  },
  {
    "start": "1154000",
    "end": "1198000"
  },
  {
    "text": "DB best practices and some stuff that",
    "start": "1155440",
    "end": "1156919"
  },
  {
    "text": "we've learned might be useful to you all",
    "start": "1156919",
    "end": "1158640"
  },
  {
    "text": "if you start using it uh yeah capacity",
    "start": "1158640",
    "end": "1161679"
  },
  {
    "text": "can be expensive in Dynamo DB depending",
    "start": "1161679",
    "end": "1163600"
  },
  {
    "text": "on uh your workload so taking advantage",
    "start": "1163600",
    "end": "1165880"
  },
  {
    "text": "of utilization patterns is nice you know",
    "start": "1165880",
    "end": "1167720"
  },
  {
    "text": "here's the U ization I think the",
    "start": "1167720",
    "end": "1169880"
  },
  {
    "text": "reutilization of one of our tables you",
    "start": "1169880",
    "end": "1171720"
  },
  {
    "text": "know obviously it's pretty uh cyclic uh",
    "start": "1171720",
    "end": "1174159"
  },
  {
    "text": "with a daily cycle and now there's this",
    "start": "1174159",
    "end": "1177039"
  },
  {
    "text": "nice tool called Dynamic Dynamo DB which",
    "start": "1177039",
    "end": "1179760"
  },
  {
    "text": "kind of monitors your uh Your Capacity",
    "start": "1179760",
    "end": "1183280"
  },
  {
    "text": "usage and adjusts your capacity for you",
    "start": "1183280",
    "end": "1185720"
  },
  {
    "text": "so you don't have to do it yourself um",
    "start": "1185720",
    "end": "1188720"
  },
  {
    "text": "uh I don't this unfortunately this",
    "start": "1188720",
    "end": "1189919"
  },
  {
    "text": "pictur is not great because I didn't get",
    "start": "1189919",
    "end": "1191120"
  },
  {
    "text": "it I didn't have time to pull up a good",
    "start": "1191120",
    "end": "1192480"
  },
  {
    "text": "screen shot but usually it'll look like",
    "start": "1192480",
    "end": "1194000"
  },
  {
    "text": "the capacity is like roughly uh",
    "start": "1194000",
    "end": "1196480"
  },
  {
    "text": "following your your utilization you know",
    "start": "1196480",
    "end": "1198760"
  },
  {
    "text": "spots are definitely your enemy one bad",
    "start": "1198760",
    "end": "1200400"
  },
  {
    "text": "key can you know affect that partition",
    "start": "1200400",
    "end": "1203200"
  },
  {
    "text": "and cause like everything that's writing",
    "start": "1203200",
    "end": "1204880"
  },
  {
    "text": "or reading from that partition to slow",
    "start": "1204880",
    "end": "1206400"
  },
  {
    "text": "down uh and and cause a bunch of you",
    "start": "1206400",
    "end": "1208679"
  },
  {
    "text": "know basically propagate a lot of uh",
    "start": "1208679",
    "end": "1211120"
  },
  {
    "text": "issues throughout the rest of your",
    "start": "1211120",
    "end": "1212240"
  },
  {
    "text": "system so you know even though we we",
    "start": "1212240",
    "end": "1214320"
  },
  {
    "start": "1213000",
    "end": "1325000"
  },
  {
    "text": "thought pretty carefully about the the",
    "start": "1214320",
    "end": "1216080"
  },
  {
    "text": "key distribution in our uh schema design",
    "start": "1216080",
    "end": "1219400"
  },
  {
    "text": "it's difficult to completely prevent",
    "start": "1219400",
    "end": "1220880"
  },
  {
    "text": "hotspots so you know sometimes users",
    "start": "1220880",
    "end": "1224320"
  },
  {
    "text": "will just you know the end users of our",
    "start": "1224320",
    "end": "1226640"
  },
  {
    "text": "customers applications will suddenly do",
    "start": "1226640",
    "end": "1229080"
  },
  {
    "text": "a bunch of stuff and or you know often",
    "start": "1229080",
    "end": "1231520"
  },
  {
    "text": "our customers will instrument like some",
    "start": "1231520",
    "end": "1233000"
  },
  {
    "text": "programmatic things that will fire you",
    "start": "1233000",
    "end": "1234799"
  },
  {
    "text": "know let's say 10,000 events for user",
    "start": "1234799",
    "end": "1236840"
  },
  {
    "text": "instantly and in that case yeah or",
    "start": "1236840",
    "end": "1239760"
  },
  {
    "text": "testing exactly uh that will often cause",
    "start": "1239760",
    "end": "1243159"
  },
  {
    "text": "uh a Hotpot to kind of manifest you know",
    "start": "1243159",
    "end": "1245720"
  },
  {
    "text": "with the burst capacity it's not too",
    "start": "1245720",
    "end": "1247520"
  },
  {
    "text": "often but you know with if enough of",
    "start": "1247520",
    "end": "1249039"
  },
  {
    "text": "these things happen at once you know you",
    "start": "1249039",
    "end": "1250679"
  },
  {
    "text": "randomly can get a a partition",
    "start": "1250679",
    "end": "1252480"
  },
  {
    "text": "overloaded and so what we do is we",
    "start": "1252480",
    "end": "1254880"
  },
  {
    "text": "actually monitor the throttling on our",
    "start": "1254880",
    "end": "1256280"
  },
  {
    "text": "database so Dynamo DB will report thrott",
    "start": "1256280",
    "end": "1258600"
  },
  {
    "text": "startling metrics when uh you've",
    "start": "1258600",
    "end": "1260480"
  },
  {
    "text": "exceeded the you know the allowed rate",
    "start": "1260480",
    "end": "1263280"
  },
  {
    "text": "on a partition and so when we do that so",
    "start": "1263280",
    "end": "1265799"
  },
  {
    "text": "you know that lower red line is kind of",
    "start": "1265799",
    "end": "1267640"
  },
  {
    "text": "like where our capacity normally is at",
    "start": "1267640",
    "end": "1269400"
  },
  {
    "text": "you'll notice it's already quite a bit",
    "start": "1269400",
    "end": "1270640"
  },
  {
    "text": "higher than our consumed capacity",
    "start": "1270640",
    "end": "1272159"
  },
  {
    "text": "because uh because of this kind of",
    "start": "1272159",
    "end": "1274120"
  },
  {
    "text": "natural Hots spot uh stuff that happens",
    "start": "1274120",
    "end": "1277440"
  },
  {
    "text": "but when it gets really bad uh we",
    "start": "1277440",
    "end": "1279400"
  },
  {
    "text": "actually monitor the throttling there's",
    "start": "1279400",
    "end": "1280919"
  },
  {
    "text": "you know supposedly a separate graph",
    "start": "1280919",
    "end": "1282279"
  },
  {
    "text": "here that shows you throttling but it",
    "start": "1282279",
    "end": "1283760"
  },
  {
    "text": "didn't actually show up um well we",
    "start": "1283760",
    "end": "1286120"
  },
  {
    "text": "actually we see the throttling is",
    "start": "1286120",
    "end": "1287559"
  },
  {
    "text": "happening and so we don't want the",
    "start": "1287559",
    "end": "1288720"
  },
  {
    "text": "system to kind of grind to a halt that",
    "start": "1288720",
    "end": "1290240"
  },
  {
    "text": "would be like definitely the worst thing",
    "start": "1290240",
    "end": "1292520"
  },
  {
    "text": "to happen and so we just temporarily",
    "start": "1292520",
    "end": "1294120"
  },
  {
    "text": "bump up the capacity kind of absorb that",
    "start": "1294120",
    "end": "1296520"
  },
  {
    "text": "load uh you know it's kind of an",
    "start": "1296520",
    "end": "1298520"
  },
  {
    "text": "extension of the the burst thing if you",
    "start": "1298520",
    "end": "1300559"
  },
  {
    "text": "will uh so we we pay a little bit more",
    "start": "1300559",
    "end": "1302400"
  },
  {
    "text": "cost during that time in order to",
    "start": "1302400",
    "end": "1303960"
  },
  {
    "text": "prevent the system from slowing down and",
    "start": "1303960",
    "end": "1306480"
  },
  {
    "text": "you know then once we've seen that it",
    "start": "1306480",
    "end": "1307720"
  },
  {
    "text": "goes away we kind of bring it back down",
    "start": "1307720",
    "end": "1309480"
  },
  {
    "text": "and let it keep going and so we've kind",
    "start": "1309480",
    "end": "1311400"
  },
  {
    "text": "of built that simple throttling me or",
    "start": "1311400",
    "end": "1313279"
  },
  {
    "text": "simple monitoring mechanism for",
    "start": "1313279",
    "end": "1314720"
  },
  {
    "text": "throttling ourselves um and it's worked",
    "start": "1314720",
    "end": "1316520"
  },
  {
    "text": "out uh pretty well it reduces a lot of",
    "start": "1316520",
    "end": "1319080"
  },
  {
    "text": "um you know random incidents that pop up",
    "start": "1319080",
    "end": "1321679"
  },
  {
    "text": "that uh don't really have anything",
    "start": "1321679",
    "end": "1323320"
  },
  {
    "text": "actionable except to increase the",
    "start": "1323320",
    "end": "1324679"
  },
  {
    "text": "capacity of your Dynamo table recap",
    "start": "1324679",
    "end": "1326320"
  },
  {
    "start": "1325000",
    "end": "1363000"
  },
  {
    "text": "really quick all the stuff we went over",
    "start": "1326320",
    "end": "1328360"
  },
  {
    "text": "so we originally stored all this",
    "start": "1328360",
    "end": "1329760"
  },
  {
    "text": "metadata related to the event",
    "start": "1329760",
    "end": "1331200"
  },
  {
    "text": "transformation process as we scal beyond",
    "start": "1331200",
    "end": "1332880"
  },
  {
    "text": "the throughput of a single process box",
    "start": "1332880",
    "end": "1334679"
  },
  {
    "text": "we eventually migrated them to Dynamo",
    "start": "1334679",
    "end": "1336279"
  },
  {
    "text": "Dynamo is yeah again we want to really",
    "start": "1336279",
    "end": "1338159"
  },
  {
    "text": "emphasize this point the reason we use",
    "start": "1338159",
    "end": "1339640"
  },
  {
    "text": "it is that it's easy easy to use and",
    "start": "1339640",
    "end": "1341400"
  },
  {
    "text": "scale um you know it's not necessarily",
    "start": "1341400",
    "end": "1343840"
  },
  {
    "text": "the cheapest thing but it's pretty",
    "start": "1343840",
    "end": "1344840"
  },
  {
    "text": "reasonable in price um it's not",
    "start": "1344840",
    "end": "1346840"
  },
  {
    "text": "necessarily the most flexible thing but",
    "start": "1346840",
    "end": "1349000"
  },
  {
    "text": "you know if your use case fits it it's",
    "start": "1349000",
    "end": "1350559"
  },
  {
    "text": "really easy to use in scale and all the",
    "start": "1350559",
    "end": "1353000"
  },
  {
    "text": "complexity of you know a database like",
    "start": "1353000",
    "end": "1354880"
  },
  {
    "text": "this is very much hidden behind the",
    "start": "1354880",
    "end": "1356279"
  },
  {
    "text": "scenes um whereas you know let's say you",
    "start": "1356279",
    "end": "1358120"
  },
  {
    "text": "were trying to run something like a",
    "start": "1358120",
    "end": "1359799"
  },
  {
    "text": "sander yourself that's certainly going",
    "start": "1359799",
    "end": "1361039"
  },
  {
    "text": "to be more complicated than the Dynamo",
    "start": "1361039",
    "end": "1363080"
  },
  {
    "text": "API we were able to work around the lack",
    "start": "1363080",
    "end": "1364720"
  },
  {
    "text": "of full relational DB support you know",
    "start": "1364720",
    "end": "1366480"
  },
  {
    "text": "it's not always trivial depending on",
    "start": "1366480",
    "end": "1368760"
  },
  {
    "text": "your use case so in our user properties",
    "start": "1368760",
    "end": "1370400"
  },
  {
    "text": "case it's a very natural mapping to",
    "start": "1370400",
    "end": "1372159"
  },
  {
    "text": "Dynamo and so it works out in our device",
    "start": "1372159",
    "end": "1374400"
  },
  {
    "text": "IDs and user ID's case uh they're a",
    "start": "1374400",
    "end": "1376320"
  },
  {
    "text": "little bit uh less obvious but you know",
    "start": "1376320",
    "end": "1378200"
  },
  {
    "text": "you kind of fit them uh so you know like",
    "start": "1378200",
    "end": "1382080"
  },
  {
    "text": "all these things you get from a full",
    "start": "1382080",
    "end": "1384080"
  },
  {
    "text": "relational database while they're",
    "start": "1384080",
    "end": "1386080"
  },
  {
    "text": "they're useful at the beginning when",
    "start": "1386080",
    "end": "1387159"
  },
  {
    "text": "you're kind of prioritizing flexibility",
    "start": "1387159",
    "end": "1388880"
  },
  {
    "text": "and the ability to do different things",
    "start": "1388880",
    "end": "1390760"
  },
  {
    "text": "that you didn't anticipate once you have",
    "start": "1390760",
    "end": "1392640"
  },
  {
    "text": "a use case that you understand and you",
    "start": "1392640",
    "end": "1394000"
  },
  {
    "text": "need a scale Dynamo uh actually works",
    "start": "1394000",
    "end": "1396480"
  },
  {
    "text": "really well and lastly managing capacity",
    "start": "1396480",
    "end": "1398720"
  },
  {
    "start": "1397000",
    "end": "1419000"
  },
  {
    "text": "is important in Dynamo uh in order to",
    "start": "1398720",
    "end": "1400400"
  },
  {
    "text": "keep throughput high and cost low as I",
    "start": "1400400",
    "end": "1402679"
  },
  {
    "text": "said monitoring is really useful to make",
    "start": "1402679",
    "end": "1404480"
  },
  {
    "text": "sure that you're not know slowing down",
    "start": "1404480",
    "end": "1406600"
  },
  {
    "text": "unnecessarily and uh keep your costs Che",
    "start": "1406600",
    "end": "1412880"
  }
]