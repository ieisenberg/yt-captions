[
  {
    "text": "welcome to the you know the first session of the day here at the DevOps trackit reinvent my name is Yvonne",
    "start": "0",
    "end": "5670"
  },
  {
    "text": "Rabinovich I mean presenting today with Brian Trautwein here from Admiral focusing on how they how the Admiralty",
    "start": "5670",
    "end": "14099"
  },
  {
    "text": "moved from operating based on sort of you know by gut to monitoring based on",
    "start": "14099",
    "end": "21060"
  },
  {
    "text": "to top rating based on data making decisions in their pipeline based on data some of our challenges in",
    "start": "21060",
    "end": "26070"
  },
  {
    "text": "monitoring as you're moving into dynamic infrastructure and they're like okay so",
    "start": "26070",
    "end": "32130"
  },
  {
    "text": "my name is Yvonne rabinovich as i mentioned i run the lead the evangelism and community teams at data dog prior to",
    "start": "32130",
    "end": "38760"
  },
  {
    "text": "my time at dated a guy was enable us user much like the rest of you working for companies like we all and Edmunds",
    "start": "38760",
    "end": "43920"
  },
  {
    "text": "building monitoring tooling and infrastructure automation tooling so definitely have a number of years with",
    "start": "43920",
    "end": "51239"
  },
  {
    "text": "that with that fun you may have seen me here last year at reinvent chatting",
    "start": "51239",
    "end": "56760"
  },
  {
    "text": "about in the storage track talking about our use of cloud front and s3 for",
    "start": "56760",
    "end": "62370"
  },
  {
    "text": "serving videos so i mentioned data dog",
    "start": "62370",
    "end": "68868"
  },
  {
    "text": "so just give you a quick overview of who we are and what the relevance is this is not a this is not a sales pitch don't",
    "start": "70100",
    "end": "75119"
  },
  {
    "text": "spend too much time on it you should totally come by our booth at the expo floor and learn more about that later today but we'd like to think ourselves",
    "start": "75119",
    "end": "81869"
  },
  {
    "text": "ourselves as monitoring for modern applications think of things systems and",
    "start": "81869",
    "end": "87479"
  },
  {
    "text": "applications running in the cloud dynamic infrastructure microservices containers all of those all of those",
    "start": "87479",
    "end": "93570"
  },
  {
    "text": "things that you're hearing you're here at reinvent to learn about this week those are the things that we we strive",
    "start": "93570",
    "end": "99390"
  },
  {
    "text": "to monitor think of us as a time series storage for your metrics and events so any type of event or metric you'd like",
    "start": "99390",
    "end": "105689"
  },
  {
    "text": "to put into us we can help you alert on monitor on trend let you let you slice",
    "start": "105689",
    "end": "111149"
  },
  {
    "text": "and dice that data in any number of ways and we'll go into a little bit later here and then hundreds of built in the integration so we're here at reinvent",
    "start": "111149",
    "end": "117299"
  },
  {
    "text": "don't mention the you know the AWS specific ones so if you want to pull in your cloud watch data things like getting metrics off your ec2 instances",
    "start": "117299",
    "end": "125479"
  },
  {
    "text": "elb s east the the ec2 container service and much more and so you're going to be",
    "start": "125479",
    "end": "131670"
  },
  {
    "text": "able to slice and dice all that data together and really get some great insight into your infrastructure but",
    "start": "131670",
    "end": "136690"
  },
  {
    "text": "again as I said this is not a sales pitch so you should come by the data dog booth for a demo later today and I can",
    "start": "136690",
    "end": "142000"
  },
  {
    "text": "we can show that to you and uh with a live demo so as I mentioned we're here",
    "start": "142000",
    "end": "149170"
  },
  {
    "text": "in the DevOps track so let's just really quickly do a refresher on what DevOps is and why that's important John Willis and",
    "start": "149170",
    "end": "156100"
  },
  {
    "text": "Damon Edwards a few years back coined acronym that kind of speaks to the themes that that that are behind the",
    "start": "156100",
    "end": "163090"
  },
  {
    "text": "develop the DevOps movement culture automation metrics and sharing some people say that as measurements at times",
    "start": "163090",
    "end": "169390"
  },
  {
    "text": "but you know you get the gist culture is really about people and process first so it doesn't matter all of other things",
    "start": "169390",
    "end": "175390"
  },
  {
    "text": "that you know Brian and I are going to talk about in today's session they're important you know automation is important building all your tooling is",
    "start": "175390",
    "end": "181180"
  },
  {
    "text": "important but if you don't have the right people and place you have the right color in place you're not working together collaboratively doesn't matter",
    "start": "181180",
    "end": "186459"
  },
  {
    "text": "what tools you have in place so that's really the first thing you want to focus on is building a collaborative building collaborative team where folks can can",
    "start": "186459",
    "end": "195190"
  },
  {
    "text": "succeed together Automation is the core of why a lot of you guys are here this week at reinvent this is about scaling",
    "start": "195190",
    "end": "201640"
  },
  {
    "text": "with code rather than with people that could mean you know using a cloud",
    "start": "201640",
    "end": "207070"
  },
  {
    "text": "provider like Amazon so that you're not you don't have an army of folks in a data center racking and stacking servers it could mean automating your",
    "start": "207070",
    "end": "212560"
  },
  {
    "text": "deployments with things like chef or ansible or puppet or any of the other tooling but really it's about as I said about scaling with code rather than with",
    "start": "212560",
    "end": "219730"
  },
  {
    "text": "people so that has you know the work increases you don't have to double triple quadruple your team at the same",
    "start": "219730",
    "end": "224769"
  },
  {
    "text": "rate and then there's metrics which is the core of this talked here today if you don't measure you can't tell if",
    "start": "224769",
    "end": "231220"
  },
  {
    "text": "you're getting better and that's true in the cloud as well as anywhere else and that could be hard metrics like how your",
    "start": "231220",
    "end": "237250"
  },
  {
    "text": "servers are performing and how much CPU they're using requests per second it also could just be how many outages",
    "start": "237250",
    "end": "242440"
  },
  {
    "text": "you're having you know in a given period of time or how many how many story",
    "start": "242440",
    "end": "248440"
  },
  {
    "text": "points you're moving through us in a sprint it's really just about tracking a number deciding where you want to be and",
    "start": "248440",
    "end": "253930"
  },
  {
    "text": "then moving towards that direction and then finally sharing this sort of loops back into the culture piece but again",
    "start": "253930",
    "end": "260290"
  },
  {
    "text": "all of these tools that you built there way more effective if you're sharing that data between your team members and",
    "start": "260290",
    "end": "265960"
  },
  {
    "text": "if you're working together collaboratively so if you have an incident maybe you're all looking at the same graphs rather than one team having a certain set of graphs",
    "start": "265960",
    "end": "271950"
  },
  {
    "text": "another team have a different set of graphs now you're you're you're sort of maybe pointing fingers at each other whatever you want to be having blameless",
    "start": "271950",
    "end": "277680"
  },
  {
    "text": "poor modems you want to be a situation where you're all ready to work together you see the problem as the issue that",
    "start": "277680",
    "end": "282960"
  },
  {
    "text": "you're tackling together whether it be a technical problem you're trying to solve or an incident that you're experiencing and not some other team on the other",
    "start": "282960",
    "end": "287970"
  },
  {
    "text": "side of some wall so at the end of the day that's sort of a quick so that's a quick overview of sort of cams and what",
    "start": "287970",
    "end": "295350"
  },
  {
    "text": "DevOps is and as I said we're going to focus on the metrics and sharing piece today both in my section of the talk as",
    "start": "295350",
    "end": "300810"
  },
  {
    "text": "well as later on with Brian so we're",
    "start": "300810",
    "end": "309030"
  },
  {
    "text": "we're all here at you reinvent you're all excited about the cloud you've been in the cloud probably for some period of time because you're here at the",
    "start": "309030",
    "end": "315000"
  },
  {
    "text": "conference and everything's awesome like you you're you've got the scale you're looking for you're able to automate all",
    "start": "315000",
    "end": "320370"
  },
  {
    "text": "of these all of these workflows that you have you're not running into resource contention because you're now you're now",
    "start": "320370",
    "end": "327180"
  },
  {
    "text": "constrained by your credit card not by than the four walls of your data center this is great right I mean we've got",
    "start": "327180",
    "end": "332490"
  },
  {
    "text": "things like things like auto scaling in place where based on the amount of work",
    "start": "332490",
    "end": "337980"
  },
  {
    "text": "that came in all the sudden your nodes are going to spin up or spin down things like container orchestration so that you",
    "start": "337980",
    "end": "343020"
  },
  {
    "text": "can deploy consistent you know consistent services and workloads out production with our using ecs or cooper",
    "start": "343020",
    "end": "349530"
  },
  {
    "text": "Nettie's or maize those things like that infinite storage right you have things like s3 you want to upload a couple",
    "start": "349530",
    "end": "354540"
  },
  {
    "text": "terabytes for the files no worries you have to worry about putting some drive somewhere so this is this really the dream of probably most operations folks",
    "start": "354540",
    "end": "361080"
  },
  {
    "text": "right you're not worrying about about these limits but you know we're trusting",
    "start": "361080",
    "end": "369240"
  },
  {
    "text": "the cloud to do a lot for us and we're trusting our animation do a lot for us and the real question is how do we know",
    "start": "369240",
    "end": "374430"
  },
  {
    "text": "when that's being successful and how do we know when that's failing how do we tell the health of both of our organization as well as the applications",
    "start": "374430",
    "end": "381120"
  },
  {
    "text": "we're looking at again we talked about earlier about the important of Metro the important of metrics for tracking towards success so the first thing we're",
    "start": "381120",
    "end": "390840"
  },
  {
    "text": "you know for a strategy of course like anything we do in anywhere else in our",
    "start": "390840",
    "end": "396290"
  },
  {
    "text": "organization and whether it's on Prem in the cloud we say if it moves monitoring and we probably also say",
    "start": "396290",
    "end": "401460"
  },
  {
    "text": "moves alert on it right well we're going to pick some arbitrary thresholds based on our past experience set those limits",
    "start": "401460",
    "end": "407370"
  },
  {
    "text": "and say wake me up in the middle of the night if X happens graph that hope for",
    "start": "407370",
    "end": "412949"
  },
  {
    "text": "the best and so as we go to do that our",
    "start": "412949",
    "end": "418229"
  },
  {
    "text": "first SAR you know our first thing to do is probably gonna pull up pull open up our bag of tricks and say these are the tools I know these the modeling",
    "start": "418229",
    "end": "424380"
  },
  {
    "text": "strategies I've used I'm going to reuse those in the cloud with my dynamic infrastructure and so how does that fit",
    "start": "424380",
    "end": "430740"
  },
  {
    "text": "in the reality is those were the best",
    "start": "430740",
    "end": "435750"
  },
  {
    "text": "tools of a decade ago right just like they're now relics those are the",
    "start": "435750",
    "end": "441750"
  },
  {
    "text": "strategies of a decade ago they don't fit in they were built for a situation where things we're not changing constantly and that's not where we are",
    "start": "441750",
    "end": "449669"
  },
  {
    "text": "today and that's that's sort of opposed to what you've done is you're moving into the cloud so but you know we'll",
    "start": "449669",
    "end": "457110"
  },
  {
    "text": "drive into a little bit more on to the Y so the first thing is most that monitoring is host centric you've picked",
    "start": "457110",
    "end": "464099"
  },
  {
    "text": "a certain host you've decided it's your engine X host or your Redis host or your Cassandra host and you're going to mock",
    "start": "464099",
    "end": "469110"
  },
  {
    "text": "monitor it for that you're gonna monitor it for its lifetime the thing is we've moved into a world where we're no longer",
    "start": "469110",
    "end": "474479"
  },
  {
    "text": "thinking of our servers as pets there now there now cattle and we're we're calling them and spending more up and",
    "start": "474479",
    "end": "480509"
  },
  {
    "text": "down and replacing them fairly regularly based on on workloads and so we want to be able to track a lot of those metrics",
    "start": "480509",
    "end": "486389"
  },
  {
    "text": "and a lot of that state across hosts rather than around that on specific hosts that may not exist in a minute let",
    "start": "486389",
    "end": "493080"
  },
  {
    "text": "alone in a week so I'm not I don't mean to pick on nagios here I love nog you",
    "start": "493080",
    "end": "498900"
  },
  {
    "text": "know but I've used augeas for a number of years it's a sort of a canonical thing that we've all probably everybody in the room has used at one point or",
    "start": "498900",
    "end": "504810"
  },
  {
    "text": "another so it's it's a good exit people to work with so again another piece",
    "start": "504810",
    "end": "515039"
  },
  {
    "text": "there is a most of the tools that we worked in the past are likely you know they rely on static configurations so",
    "start": "515039",
    "end": "521099"
  },
  {
    "text": "whether that even if you've gone through the effort to chef that up or you know puppet that up and you're in a situation",
    "start": "521099",
    "end": "526110"
  },
  {
    "text": "where that's generated dynamically a lot of what you've done is you're sort of tricking a static system and causing to",
    "start": "526110",
    "end": "531540"
  },
  {
    "text": "pretend to be dynamic and as things are changing every second or every minute you want be in a situation where your systems could can respond in kind and so if you",
    "start": "531540",
    "end": "539640"
  },
  {
    "text": "can't you end up in a situation like this right we've got a sort of nagios can flick config block here that we've either handcrafted or generated we're",
    "start": "539640",
    "end": "546810"
  },
  {
    "text": "telling it to monitor our favorite host for for a given service except that",
    "start": "546810",
    "end": "551850"
  },
  {
    "text": "service is part of an auto scaling group and so what happens your pagers going off every five minutes as you scale up and down telling you that things are not",
    "start": "551850",
    "end": "558120"
  },
  {
    "text": "not working finally a lot of the tools that we're looking at and a lot of the",
    "start": "558120",
    "end": "564000"
  },
  {
    "text": "process that we're looking at are really focused on resources at end of the day your customers are not particularly excited about whether or not your cpu",
    "start": "564000",
    "end": "570930"
  },
  {
    "text": "load is high whether you had a network spike what they care about is is did the service they came to your to your",
    "start": "570930",
    "end": "577290"
  },
  {
    "text": "website or to your API for is that functioning are you returning what they want and so a lot of a lot of the",
    "start": "577290",
    "end": "582690"
  },
  {
    "text": "monitoring that we worked with in the past whether it's because of our strategies are because of our tools you're tend to be focused on those resources rather than maybe that work",
    "start": "582690",
    "end": "588960"
  },
  {
    "text": "output and then finally as we're looking",
    "start": "588960",
    "end": "595920"
  },
  {
    "text": "at this we're pulling in data nowadays from so many different systems you're relying on third parties for API is",
    "start": "595920",
    "end": "602280"
  },
  {
    "text": "you're relying on you know back-end services from a to form AWS we're talking about things like we talked",
    "start": "602280",
    "end": "608640"
  },
  {
    "text": "about all the scaling groups you want to show events from that we have cloud watch data we have elb ease you want to",
    "start": "608640",
    "end": "613800"
  },
  {
    "text": "maybe look at the latency of requests coming in there versus the latency that your requests are seeing at the application level so you want to be able",
    "start": "613800",
    "end": "620130"
  },
  {
    "text": "to show that all together and a lot of the strategies we've used in the past maybe have you looking at 10 different dashboards and in your mind trying to",
    "start": "620130",
    "end": "626430"
  },
  {
    "text": "come up with a mental model of how they fit to get together so you know let's",
    "start": "626430",
    "end": "633390"
  },
  {
    "text": "let's define those pieces I said you know we're talking a little bit about work metrics we're talking what about resource metrics what they are and why",
    "start": "633390",
    "end": "639990"
  },
  {
    "text": "they're important I'm going to just do a quick TL DR on some of these pieces but if you're interested there's a blog post",
    "start": "639990",
    "end": "646350"
  },
  {
    "text": "that we link to in the slides here as well as my colleague Matt Williams will be giving a talk tomorrow tomorrow one",
    "start": "646350",
    "end": "652200"
  },
  {
    "text": "room over where he does a whole hour session on the strategies behind these identifying these metrics and where to",
    "start": "652200",
    "end": "658350"
  },
  {
    "text": "use them so work metrics these are the pieces that we were talking talking about earlier this is what your customers care about think of it if",
    "start": "658350",
    "end": "665910"
  },
  {
    "text": "you're in a factory and you're have an assembly line you're spitting out cars the car is the work that you are doing or the widget that you are building is",
    "start": "665910",
    "end": "672610"
  },
  {
    "text": "the work you are doing if you're in a web application it's likely requests per second is your throughput successes is",
    "start": "672610",
    "end": "678070"
  },
  {
    "text": "when you return it two hundred errors would be the rate at which you're returning maybe five hundreds or for",
    "start": "678070",
    "end": "683709"
  },
  {
    "text": "hundreds things of that nature and the like so those are those those are the pieces that you really care about this",
    "start": "683709",
    "end": "689740"
  },
  {
    "text": "is what what customers are paying you to do resource metrics on the other hand these are the things that go into make",
    "start": "689740",
    "end": "695380"
  },
  {
    "text": "into producing network so you know we talked about cpu utilization or I oh these are the things that these are the",
    "start": "695380",
    "end": "701380"
  },
  {
    "text": "the resources that are consumed for making that work happen and again you're interested in those as for context for",
    "start": "701380",
    "end": "707290"
  },
  {
    "text": "information about how your application is performing but they're not as they're",
    "start": "707290",
    "end": "715540"
  },
  {
    "text": "not as key to the success of your event of your work there they're not necessarily what you want to learn on it",
    "start": "715540",
    "end": "721570"
  },
  {
    "text": "events are things changes in your infrastructure you know did you do a code deployment scaling etc and so as",
    "start": "721570",
    "end": "728560"
  },
  {
    "text": "you're working it as you're looking at this what you want to be focused on is paging on those symptoms paging on when you're not being successful and then",
    "start": "728560",
    "end": "735490"
  },
  {
    "text": "using those other metrics to to diagnose you're going to start to look at your work metrics see how they tied into your",
    "start": "735490",
    "end": "741250"
  },
  {
    "text": "resources continue to dive down look for a correlation to those events that you mentioned mentioned and so you're just going to recurse down that stack and",
    "start": "741250",
    "end": "751390"
  },
  {
    "text": "then you want to be looking at situations where you can ask questions across your infrastructure things like again aggregates are really what matter",
    "start": "751390",
    "end": "757209"
  },
  {
    "text": "not necessarily individual hosts you want to express your monitors as questions what was the average response",
    "start": "757209",
    "end": "763300"
  },
  {
    "text": "time across all of my injects host was it over 500 milliseconds to alert me maybe are we less than the number i want",
    "start": "763300",
    "end": "769270"
  },
  {
    "text": "alert me things like that and then you want to be able to mash up all that data / 360 degree view so a quick just a",
    "start": "769270",
    "end": "777010"
  },
  {
    "text": "quick kind of example of this in this situation we're looking at i/o across all of our engine X host broken up by",
    "start": "777010",
    "end": "783940"
  },
  {
    "text": "availability zone you want to be able to ask questions like that and say did you know maybe is easy to having an event",
    "start": "783940",
    "end": "790270"
  },
  {
    "text": "right now in u.s. East 1b is that why my IO has spiked or maybe there's some other component in my topology and that",
    "start": "790270",
    "end": "796900"
  },
  {
    "text": "particular availability ability zone that's important and so you want to look at that mash that up with a lot of the different",
    "start": "796900",
    "end": "802279"
  },
  {
    "text": "that we're talking about and start to build dashboards like these where you can take your application metrics put",
    "start": "802279",
    "end": "808279"
  },
  {
    "text": "those alongside your your resource metrics and start to build a view of",
    "start": "808279",
    "end": "813709"
  },
  {
    "text": "those and so without i'm going to hand off to Brian who's going to dive into how they did that at Admiral you gotta",
    "start": "813709",
    "end": "821180"
  },
  {
    "text": "click on the slide thereupon what's going on it's very done hi everyone uh so I am a senior software engineer at",
    "start": "821180",
    "end": "828170"
  },
  {
    "text": "Admiral i'm just going to confirm that this clicker is dead it is in fact",
    "start": "828170",
    "end": "833569"
  },
  {
    "text": "beastly dead my particular jam is I really like things that are vaguely managed to disasters so computers are",
    "start": "833569",
    "end": "840199"
  },
  {
    "text": "awesome so I work on the real-time bidding project at Admiral so I work on",
    "start": "840199",
    "end": "849559"
  },
  {
    "text": "the real-time bidding project at Admiral Admiral is an ad tech company real-time bidding is a a thing where you see an ad",
    "start": "849559",
    "end": "857420"
  },
  {
    "text": "on the web and it seems to follow you around the web that is real-time bidding they don't actually exist when the web page is rendered there is a little bit",
    "start": "857420",
    "end": "864319"
  },
  {
    "text": "of JavaScript and then there's an auction that occurs through an exchange so the exchanges are people like Google",
    "start": "864319",
    "end": "870139"
  },
  {
    "text": "Facebook etc etc and they signal out to various different companies one of those companies is Admiral and I work on the",
    "start": "870139",
    "end": "876309"
  },
  {
    "text": "product that catches the exchange or excuse me the auction notification and",
    "start": "876309",
    "end": "881420"
  },
  {
    "text": "then responds back with a price or with a no bid so gonna try this again nope",
    "start": "881420",
    "end": "888230"
  },
  {
    "text": "that's okay it can stay there I got",
    "start": "888230",
    "end": "898579"
  },
  {
    "text": "nothing oh there we go okay so the problem domain for real-time bidding is very interesting it slowly latency so",
    "start": "898579",
    "end": "905170"
  },
  {
    "text": "human perception is about one tenth of a second if a thing happens in less than one tenth of a second we kind of can't",
    "start": "905170",
    "end": "910939"
  },
  {
    "text": "notice it some people especially young people will notice a flash but people my",
    "start": "910939",
    "end": "917120"
  },
  {
    "text": "age and older they don't really see that so our system has to be sure when we get a notification that an auction is",
    "start": "917120",
    "end": "923059"
  },
  {
    "text": "available that we respond in less than one tenth of a second and that includes network travel time and other sides we",
    "start": "923059",
    "end": "928970"
  },
  {
    "text": "actually have less than one tenth of a second it's a firm real-time system so we've sort of",
    "start": "928970",
    "end": "935540"
  },
  {
    "text": "change the meaning of real time in the last little bit to to say like I get a thing and then you respond pretty",
    "start": "935540",
    "end": "941540"
  },
  {
    "text": "quickly that's not actually what I mean there there is a jargon term real time that was coined quite a bit of while ago",
    "start": "941540",
    "end": "948649"
  },
  {
    "text": "it means that every computation that you have has some implicit clock it has some implicit deadlines and there are three",
    "start": "948649",
    "end": "955040"
  },
  {
    "text": "gradients of real-time a soft real-time system is one in which you go past the deadline and your computation still has",
    "start": "955040",
    "end": "961130"
  },
  {
    "text": "value you can still use it a hard real-time system is one in which you go",
    "start": "961130",
    "end": "967100"
  },
  {
    "text": "past the deadline and something your computation has no value and also something is now on fire or there is",
    "start": "967100",
    "end": "973310"
  },
  {
    "text": "someone who is now a piece of paste like against the inside of a aircraft frame a firm real-time system is less",
    "start": "973310",
    "end": "980720"
  },
  {
    "text": "frightening than hard real-time you go past the post and your computation has no value but nobody dies so there's no",
    "start": "980720",
    "end": "987829"
  },
  {
    "text": "catastrophe associated with a firm real-time system so in our system when we go past the post we lose the ability",
    "start": "987829",
    "end": "994519"
  },
  {
    "text": "to give an ad and in a single event no one cries like that is just not a big",
    "start": "994519",
    "end": "1000699"
  },
  {
    "text": "deal if we accumulate too many of those bad things happen but I will touch on that it's highly concurrent the system",
    "start": "1000699",
    "end": "1007510"
  },
  {
    "text": "does approximately two million transactions per second at peak it's",
    "start": "1007510",
    "end": "1012639"
  },
  {
    "text": "actually gotten so so large that we have stopped aggregating over an entire day we have that number of dish is not",
    "start": "1012639",
    "end": "1017889"
  },
  {
    "text": "valuable it's too big to conceive of number global and we're 24 7 we can't",
    "start": "1017889",
    "end": "1023260"
  },
  {
    "text": "shut down ever so this thing has to just keep rolling and that's that has",
    "start": "1023260",
    "end": "1029079"
  },
  {
    "text": "interesting consequences you know the sort of analogous thing in the world is high frequency trading and high",
    "start": "1029079",
    "end": "1036280"
  },
  {
    "text": "frequency trading is a little bit different because if you're the first one there you are the winner whereas we",
    "start": "1036280",
    "end": "1041709"
  },
  {
    "text": "have a set block of time but they get to shut off after 14 hours and we have to",
    "start": "1041709",
    "end": "1047079"
  },
  {
    "text": "keep running so if you know high frequency trading that's basically the same modus operandi except for ads in",
    "start": "1047079",
    "end": "1052419"
  },
  {
    "text": "the internet instead of liquid being in an economy okay so in the early days of",
    "start": "1052419",
    "end": "1060669"
  },
  {
    "text": "the Admiral real-time bidding project we could use our intuition the system was small enough and",
    "start": "1060669",
    "end": "1067679"
  },
  {
    "text": "simple enough that we could sort of hold the context of it in our minds when we",
    "start": "1067679",
    "end": "1073330"
  },
  {
    "text": "sort of discussed it it was doing simple enough things that everyone could be a domain expert on everything about it and",
    "start": "1073330",
    "end": "1079990"
  },
  {
    "text": "the total number of requests coming into the system was relatively small and human intuition with regard to systems",
    "start": "1079990",
    "end": "1087159"
  },
  {
    "text": "is real good when it's human sized you know because we we are sort of these macro creatures that are relatively slow",
    "start": "1087159",
    "end": "1092649"
  },
  {
    "text": "and if you have a system that has relatively few things coming into it it fits into our intuition and the impact",
    "start": "1092649",
    "end": "1099429"
  },
  {
    "text": "of mistakes was minor the the the business relies on the real-time bidding system but as we were sort of chugging",
    "start": "1099429",
    "end": "1105730"
  },
  {
    "text": "along there were there was less reliance on the effective use of the real-time",
    "start": "1105730",
    "end": "1111100"
  },
  {
    "text": "bitter and there was a less traffic coming into the system so the thing going offline just wasn't as bad and we",
    "start": "1111100",
    "end": "1118059"
  },
  {
    "text": "could be reasonably confident that when we made a change to the system our mental model of the systems behavior",
    "start": "1118059",
    "end": "1123820"
  },
  {
    "text": "with accurate so we could sort of reason about the state of the system without necessarily having empirical data",
    "start": "1123820",
    "end": "1129580"
  },
  {
    "text": "because it was small enough and compact enough to fit into our intuition to fit",
    "start": "1129580",
    "end": "1134590"
  },
  {
    "text": "into our expectations of how it would work the the trouble with a complex system as you add more and more and you get more ambitious is that this behavior",
    "start": "1134590",
    "end": "1141009"
  },
  {
    "text": "and practice gets away from you pretty fast human intuition runs out real quick and the the trick there is when you're",
    "start": "1141009",
    "end": "1148779"
  },
  {
    "text": "building a vaguely managed disaster like a software system you don't necessarily know that you've stepped over this line",
    "start": "1148779",
    "end": "1155409"
  },
  {
    "text": "it's sort of a gradient from I got this too Oh No so you know we we need to",
    "start": "1155409",
    "end": "1164799"
  },
  {
    "text": "address this we need to start getting intuition back we need to start building better models so you know the first",
    "start": "1164799",
    "end": "1170049"
  },
  {
    "text": "approach that we took was to batch process our logs generated by individual bidders so the bidders have relatively a",
    "start": "1170049",
    "end": "1177519"
  },
  {
    "text": "relatively large data stream we would just chug that out into s3 and then we would have another team that would pick",
    "start": "1177519",
    "end": "1182950"
  },
  {
    "text": "those up and then turn through them and they would get us a sense of how the bidders were working in practice and you",
    "start": "1182950",
    "end": "1188889"
  },
  {
    "text": "know the the pros of that was we were already doing this that's how we do billing it's how we do a lot of",
    "start": "1188889",
    "end": "1195070"
  },
  {
    "text": "different things so we already have this infrastructure in place so we're just able to sort of leverage this and",
    "start": "1195070",
    "end": "1200720"
  },
  {
    "text": "as a result it's very simple to implement which is fantastic because we were able to get a sense of how the bidders were working with relatively low",
    "start": "1200720",
    "end": "1206870"
  },
  {
    "text": "effort and without having to build our own data processing pipeline because there's a group that does that and it's",
    "start": "1206870",
    "end": "1212840"
  },
  {
    "text": "relatively straightforward to conceive of how to instrument a bitter just through logging because everybody here in this room has probably done print",
    "start": "1212840",
    "end": "1219169"
  },
  {
    "text": "debugging and logging is just print debugging but a little more formalized so the the batch processing processing",
    "start": "1219169",
    "end": "1225559"
  },
  {
    "text": "wasn't a perfect utopia there's a high update latency to batch processing so",
    "start": "1225559",
    "end": "1231890"
  },
  {
    "text": "you're kicking out these large logs and then it goes into a data processing pipeline and the latency of that could be you know an hour a day and",
    "start": "1231890",
    "end": "1240070"
  },
  {
    "text": "catastrophic errors with the bitter or you know catastrophic failure of the machine that the bitter is resident on",
    "start": "1240070",
    "end": "1246620"
  },
  {
    "text": "will cause those logs to just get dropped so you know if we have an event and that event causes machine death we",
    "start": "1246620",
    "end": "1252860"
  },
  {
    "text": "have no insight into that event because the machine was not able to take the relatively high latency process of",
    "start": "1252860",
    "end": "1259220"
  },
  {
    "text": "uploading to s3 to completion and this sort of approach the sort of high",
    "start": "1259220",
    "end": "1266150"
  },
  {
    "text": "latency update denies impulse experimentation it denies you the ability to say what if I tweak a config",
    "start": "1266150",
    "end": "1272120"
  },
  {
    "text": "value so you know when we design the the bitter system every new features is configurable and we have the ability to",
    "start": "1272120",
    "end": "1277820"
  },
  {
    "text": "change the configuration on the fly in a batch processing world you change a",
    "start": "1277820",
    "end": "1283610"
  },
  {
    "text": "value you wait a day and then you look which is real bad for experimenting",
    "start": "1283610",
    "end": "1288919"
  },
  {
    "text": "because you've moved on the context just slip out of your mind so the work that you're capable of doing is less good",
    "start": "1288919",
    "end": "1295850"
  },
  {
    "text": "than it could possibly be so you know we needed something better so our second",
    "start": "1295850",
    "end": "1301190"
  },
  {
    "text": "approach was course real-time metrics we generated you know metrics in real time",
    "start": "1301190",
    "end": "1306230"
  },
  {
    "text": "and then we analyzed those so this was actually pretty effective and it's it's",
    "start": "1306230",
    "end": "1311600"
  },
  {
    "text": "an iterative step up from basket processing so you know we're able to conceive how we would do it based on batch processing we basically just went",
    "start": "1311600",
    "end": "1318020"
  },
  {
    "text": "in and everywhere we had a log out we inserted a call to kick out to grab like at the time and this proves out the comm",
    "start": "1318020",
    "end": "1325610"
  },
  {
    "text": "proves out the concept it had clear value once we did it and it was a you know also relatively simple to implement",
    "start": "1325610",
    "end": "1332640"
  },
  {
    "text": "I don't know that we did it with it but I think now I'm probably good enough it said that I could just like said this",
    "start": "1332640",
    "end": "1338670"
  },
  {
    "text": "thing out the the cons of doing course real-time metrics is that you still rely on intuition you still rely on this this",
    "start": "1338670",
    "end": "1345810"
  },
  {
    "text": "you know I know how the system is behaving so I know where to put these",
    "start": "1345810",
    "end": "1351210"
  },
  {
    "text": "basically real-time printf statements and the bitter implementation was",
    "start": "1351210",
    "end": "1356250"
  },
  {
    "text": "suboptimal it was slow it was relatively memory intensive and the dashboards that",
    "start": "1356250",
    "end": "1363360"
  },
  {
    "text": "we had that we're catching these the the tool that we were using they were sort of a one-size-fits-all approach they",
    "start": "1363360",
    "end": "1368490"
  },
  {
    "text": "were so awkward to build that the person who would add the statements in would then build a dashboard and then just",
    "start": "1368490",
    "end": "1375540"
  },
  {
    "text": "sort of give that to everyone and the the problem with that you know when when",
    "start": "1375540",
    "end": "1381000"
  },
  {
    "text": "you have someone that builds a dashboard they are implicitly building a dashboard based on their own mental model of the system which is different between",
    "start": "1381000",
    "end": "1386820"
  },
  {
    "text": "everyone in the team and everyone has different needs for visualizing data so",
    "start": "1386820",
    "end": "1392270"
  },
  {
    "text": "one-size-fits-all dashboarding is a real hard hard gig so you know by this point",
    "start": "1392270",
    "end": "1398010"
  },
  {
    "text": "the complexity of the system and our ambitions were growing you know we added two more engineers to the team so we",
    "start": "1398010",
    "end": "1403230"
  },
  {
    "text": "have more and more need to be able to coordinate on the activity of the bitter and we have more and more likelihood",
    "start": "1403230",
    "end": "1412080"
  },
  {
    "text": "that a feature will come in that not everybody is a domain expert on so not everyone will have the same mental model",
    "start": "1412080",
    "end": "1417960"
  },
  {
    "text": "of the system so now we've built something that not a is not understandable in in totality by a",
    "start": "1417960",
    "end": "1424560"
  },
  {
    "text": "single human and we were adding more and more people in other departments so the company was growing very quickly and the",
    "start": "1424560",
    "end": "1431160"
  },
  {
    "text": "real-time bidder was becoming increasingly fundamental to the company's nature so more and more people wanted to know about how the bidder was",
    "start": "1431160",
    "end": "1437910"
  },
  {
    "text": "doing and relatively quickly so you know the challenge here is how do we take you",
    "start": "1437910",
    "end": "1444120"
  },
  {
    "text": "know we've gone from batch processing and we've gone from two course real-time metrics and that clearly has value it's",
    "start": "1444120",
    "end": "1450210"
  },
  {
    "text": "clearly a step up over batch processing but how do we take that and make something even better and because of the",
    "start": "1450210",
    "end": "1457050"
  },
  {
    "text": "defects in course real-time real-time metrics we were making decisions in our knowledge void you know we would still",
    "start": "1457050",
    "end": "1463380"
  },
  {
    "text": "sort of have to reason about something with our increasingly flawed mental model and then just sort of guess and hope that it worked out so you know",
    "start": "1463380",
    "end": "1471330"
  },
  {
    "text": "at this point what we've got is a cloud watch and cloud watch is great it's it ships with all of your AWS machines but",
    "start": "1471330",
    "end": "1480360"
  },
  {
    "text": "it reports the basic health of your system so it's it's focused on the machine and not necessarily the system",
    "start": "1480360",
    "end": "1487890"
  },
  {
    "text": "that you have built so where you can indirectly see your system reflected in the basic health of the machine that's",
    "start": "1487890",
    "end": "1493830"
  },
  {
    "text": "great but you know you need application specific metrics because you have",
    "start": "1493830",
    "end": "1498900"
  },
  {
    "text": "application specific concerns so cloud watch provides the total view of the AWS",
    "start": "1498900",
    "end": "1504299"
  },
  {
    "text": "system AWS systems that you're using you know is DynamoDB having a problem is it s 3 having a problem but again that's an",
    "start": "1504299",
    "end": "1510330"
  },
  {
    "text": "indirect measure of your system if your system uses those things you can sort of reason about it but we want to get away",
    "start": "1510330",
    "end": "1515700"
  },
  {
    "text": "from having to reason about things and just having you know dead straightforward stupid blunt simple",
    "start": "1515700",
    "end": "1521600"
  },
  {
    "text": "instrumentation of our system so what we don't have at this point is a detailed",
    "start": "1521600",
    "end": "1526620"
  },
  {
    "text": "view of our system and increasingly we we need one what we don't have is the ability to explore the information that",
    "start": "1526620",
    "end": "1531960"
  },
  {
    "text": "we have especially in a high-stress situation so as our as our mental model drifted we kept making goofs and those",
    "start": "1531960",
    "end": "1538710"
  },
  {
    "text": "groups happen to be worked very quickly with a poor amount of information available to us and that that's real",
    "start": "1538710",
    "end": "1546030"
  },
  {
    "text": "challenging so you know the bidders we've implemented then Marilyn I've talked at airline factory about this you",
    "start": "1546030",
    "end": "1553890"
  },
  {
    "text": "know if you use airline XO meter is a library that we use and it solves our",
    "start": "1553890",
    "end": "1559020"
  },
  {
    "text": "airline side problem how do we get cheap real time metrics that have sophisticated aggregation it's",
    "start": "1559020",
    "end": "1565020"
  },
  {
    "text": "incredibly useful this talk is not about airline but if you are at all interested exa meters your library but getting",
    "start": "1565020",
    "end": "1573030"
  },
  {
    "text": "information out of the bidders is a challenge or into something that will aggregate and do something sensible with",
    "start": "1573030",
    "end": "1580140"
  },
  {
    "text": "it and data dog is the thing that solves our aggregation our visualization and are alerting and all of these are",
    "start": "1580140",
    "end": "1585240"
  },
  {
    "text": "extremely sophisticated and complex things to do and we shopped around quite a bit but this is non sales pitch but",
    "start": "1585240",
    "end": "1592260"
  },
  {
    "text": "data dog is real nice and that it integrates with cloud watch you know our our system specific metrics can then be",
    "start": "1592260",
    "end": "1598200"
  },
  {
    "text": "correlated with the basic health of the system so we're able to take this indirect thing we're able to take this very direct thing sort",
    "start": "1598200",
    "end": "1604559"
  },
  {
    "text": "of combine them and do something very very useful and this can be done in real",
    "start": "1604559",
    "end": "1609719"
  },
  {
    "text": "time in effect basically it's just the latency of your update interval so if",
    "start": "1609719",
    "end": "1615149"
  },
  {
    "text": "you kick something out every 15 seconds you have a time series that updates every 15 seconds and the very nice thing",
    "start": "1615149",
    "end": "1622289"
  },
  {
    "text": "is this can be done in very high-stress situations you know this sort of correlation can be done when everybody's",
    "start": "1622289",
    "end": "1629369"
  },
  {
    "text": "freaking out you know when you're CTO is yelling across the office and you can",
    "start": "1629369",
    "end": "1634979"
  },
  {
    "text": "sort of collaborate together and really interestingly this can be done by other",
    "start": "1634979",
    "end": "1640379"
  },
  {
    "text": "departments of the business they have the same structured data that we have and they can see our dashboards and sort",
    "start": "1640379",
    "end": "1646559"
  },
  {
    "text": "of what we're caring about and then they can build their own you know data dog",
    "start": "1646559",
    "end": "1653369"
  },
  {
    "text": "makes building dashboards incredibly simple to do and incredibly quick to do so you know in the real-time bidding",
    "start": "1653369",
    "end": "1659669"
  },
  {
    "text": "project each team member has sort of a their own group of dashboards so that",
    "start": "1659669",
    "end": "1664679"
  },
  {
    "text": "they're the dashboards they fit into our mental models and you can see that reflected in other parts of the business",
    "start": "1664679",
    "end": "1670859"
  },
  {
    "text": "because they have a particular mental model of how this thing fits into their world so you know now I kind of want to",
    "start": "1670859",
    "end": "1678269"
  },
  {
    "text": "talk about we're able to do this in high-stress situations but what does that process look like so I'm going to",
    "start": "1678269",
    "end": "1684629"
  },
  {
    "text": "walk through different problems that we had and the first one is really interesting so it's a timeout spike problem so I mentioned that the bitter",
    "start": "1684629",
    "end": "1691799"
  },
  {
    "text": "is a real-time system so in our term is that a bid a bid a single event from the",
    "start": "1691799",
    "end": "1697979"
  },
  {
    "text": "exchange times out when we don't reply back to the exchange in 100 milliseconds depending on the exchange it can be 60",
    "start": "1697979",
    "end": "1704700"
  },
  {
    "text": "milliseconds depending on the region of the world so we're real concerned about that in a single event it's not a",
    "start": "1704700",
    "end": "1710940"
  },
  {
    "text": "problem but when you have thousands of them the exchanges will start to limit our traffic they will believe that we",
    "start": "1710940",
    "end": "1716099"
  },
  {
    "text": "are not capable of servicing it so they'll cut our traffic down and that's a problem because we make money on",
    "start": "1716099",
    "end": "1721139"
  },
  {
    "text": "traffic if we don't have traffic we don't have money and if we don't have money we don't have a business so you",
    "start": "1721139",
    "end": "1726389"
  },
  {
    "text": "know this is one of the very early wins of our sophisticated real-time monitoring with data dog we had no idea",
    "start": "1726389",
    "end": "1733499"
  },
  {
    "text": "that we actually had timeout spikes are you know intuition said that we didn't that we were servicing traffic and that the",
    "start": "1733499",
    "end": "1739380"
  },
  {
    "text": "exchanges thought we were golden and then we started graphing it and it might be a little hard to read i'm not sure",
    "start": "1739380",
    "end": "1745260"
  },
  {
    "text": "but the peaks there are 5 k so that means that on average each bidder",
    "start": "1745260",
    "end": "1751310"
  },
  {
    "text": "periodically at a very suspicious pattern 5k timeouts and then it goes back down so you know in a real-time",
    "start": "1751310",
    "end": "1757560"
  },
  {
    "text": "system you don't necessarily want the highest performance you want consistent performance you want to be able to",
    "start": "1757560",
    "end": "1762690"
  },
  {
    "text": "always say that no matter the load no matter what everything is nice flat and steady and this is clearly not nice flat",
    "start": "1762690",
    "end": "1768750"
  },
  {
    "text": "and steady and we really really did not realize that this was happening we had",
    "start": "1768750",
    "end": "1773940"
  },
  {
    "text": "almost no understanding of how the system actually behaved in practice so",
    "start": "1773940",
    "end": "1779160"
  },
  {
    "text": "you know we start digging into it and this is the system load so this is all over a fixed time period and we start",
    "start": "1779160",
    "end": "1786090"
  },
  {
    "text": "looking the system load we ask ourselves is the exchange just sending us bursty traffic and you know there's some random",
    "start": "1786090",
    "end": "1791790"
  },
  {
    "text": "walk around the around a mean here but no they're not this is nice flat consistent so you know the system load",
    "start": "1791790",
    "end": "1798510"
  },
  {
    "text": "is no normal there's not a periodic spike in bid request so that's one hypothesis gone so you can sort of see",
    "start": "1798510",
    "end": "1803700"
  },
  {
    "text": "that we're starting to get into this work pattern where we're making hypothesis and then we have an empirical result and then we sort of turn on that",
    "start": "1803700",
    "end": "1810200"
  },
  {
    "text": "so we started looking around and we start graphing more things and then we look at the network I oh so network I oh",
    "start": "1810200",
    "end": "1816510"
  },
  {
    "text": "there is actually a very suspiciously correlated burst in traffic out from the",
    "start": "1816510",
    "end": "1821640"
  },
  {
    "text": "bidders so you know that's real interesting because that whenever you find a correlation that's that's",
    "start": "1821640",
    "end": "1827280"
  },
  {
    "text": "something where you can hook a hypothesis to it so then we start looking around this sort of thing and",
    "start": "1827280",
    "end": "1833750"
  },
  {
    "text": "not to get too deep into airline but basically the way airline works you know we have these incredibly cheap processes",
    "start": "1833780",
    "end": "1840120"
  },
  {
    "text": "but they're not operating system threads they run on operating system threads and they're sort of core operatively multi",
    "start": "1840120",
    "end": "1845400"
  },
  {
    "text": "tax a cooperative lee multitask across these threads and called the schedulers and the scheduler is in effect have a",
    "start": "1845400",
    "end": "1851250"
  },
  {
    "text": "queue on them and that's called the run queue so if a scheduler is unable to",
    "start": "1851250",
    "end": "1856440"
  },
  {
    "text": "service its processes the run queue grows and the run queue as it grows indicates that latency will increase in",
    "start": "1856440",
    "end": "1862080"
  },
  {
    "text": "the system because for any any process statistically speaking it'll take longer to come back through so we",
    "start": "1862080",
    "end": "1867900"
  },
  {
    "text": "chart the run queue we try to run queue for all of our scheduler threads and we notice that there is a correlated spike",
    "start": "1867900",
    "end": "1873540"
  },
  {
    "text": "in the run queue meaning that the system itself is incapable of servicing traffic in sort of bursts so that that's why we",
    "start": "1873540",
    "end": "1879900"
  },
  {
    "text": "would timeout because you have something that's running on a deadline and then it's just not able to be computed so you",
    "start": "1879900",
    "end": "1887820"
  },
  {
    "text": "know the correlated spikes and in the airline vm run queue is real real interesting because it means that",
    "start": "1887820",
    "end": "1893640"
  },
  {
    "text": "something is happening with regard to CPU resources just sort of using our reasoned understanding of how the vm",
    "start": "1893640",
    "end": "1899880"
  },
  {
    "text": "works so the vm scheduler threads we lock them to a cpu so they don't drift around they don't have to do context",
    "start": "1899880",
    "end": "1905790"
  },
  {
    "text": "switching they just own the cpu and it turned out that we actually had a very",
    "start": "1905790",
    "end": "1911190"
  },
  {
    "text": "CPU intensive background process that kicks on every 20 minutes and it might have been hard to see but those Peaks",
    "start": "1911190",
    "end": "1916770"
  },
  {
    "text": "occur in 20 minute intervals the trick was even though we append a CPU and",
    "start": "1916770",
    "end": "1922530"
  },
  {
    "text": "thought this is golden we actually hadn't set up a CPU shield so the bitter ran cooperatively with all the other",
    "start": "1922530",
    "end": "1929250"
  },
  {
    "text": "processes running on the system so you have this thread that is pinned to CPU",
    "start": "1929250",
    "end": "1935340"
  },
  {
    "text": "and then a high CPU intensity process comes on and kicks that thread off but it turns out that thread is actually",
    "start": "1935340",
    "end": "1941580"
  },
  {
    "text": "doing real time things and you can't kick a real time thread off so when it",
    "start": "1941580",
    "end": "1946770"
  },
  {
    "text": "gets kicked off all the processes back up and then it comes back on and tries to process but it's too late and so",
    "start": "1946770",
    "end": "1952590"
  },
  {
    "text": "everything times out so that was one of the extreme early wins and that was sort",
    "start": "1952590",
    "end": "1960300"
  },
  {
    "text": "of something where we could sort of lazily go about it you know we were concerned but it wasn't a disaster this",
    "start": "1960300",
    "end": "1966600"
  },
  {
    "text": "is one of the first disasters that we had when we had our integration with day to dog going on you know for us failure",
    "start": "1966600",
    "end": "1973590"
  },
  {
    "text": "a bid request traffic is an old hands problem it's something that everybody has to look into because it means the",
    "start": "1973590",
    "end": "1979260"
  },
  {
    "text": "system is not able to do what it's expected to do it doesn't have the resources that it needs without traffic",
    "start": "1979260",
    "end": "1986250"
  },
  {
    "text": "the bidders can't do anything because all we do is we just take a bit of traffic and we either say nothing you",
    "start": "1986250",
    "end": "1991560"
  },
  {
    "text": "know no bid or we say money value so this is a really good day relatively",
    "start": "1991560",
    "end": "1998640"
  },
  {
    "text": "actually it's a so it says one hour there but that is a a multi-day segment so if you look at",
    "start": "1998640",
    "end": "2004950"
  },
  {
    "text": "the bid request to come into the system they have this sort of like up down curve tends to peak around eleven",
    "start": "2004950",
    "end": "2010350"
  },
  {
    "text": "o'clock and then drops at night because there aren't people that are looking at the web so this is normal traffic",
    "start": "2010350",
    "end": "2015840"
  },
  {
    "text": "patterns for the the real time bitter and you know it's a healthy couple of",
    "start": "2015840",
    "end": "2021420"
  },
  {
    "text": "days where the traffic it did to the night when it climbs back in the day this is a disaster this is a real hard",
    "start": "2021420",
    "end": "2028980"
  },
  {
    "text": "traffic crash this is over a four-day period and you can actually see that you",
    "start": "2028980",
    "end": "2036299"
  },
  {
    "text": "know this is completely artificial no humans were involved in doing this at least not an aggregate so when you see",
    "start": "2036299",
    "end": "2042990"
  },
  {
    "text": "sharp curves in human generated data it's not humans doing it it's something else so this is a weekend's worth of",
    "start": "2042990",
    "end": "2051210"
  },
  {
    "text": "traffic lost we were getting more sophisticated with using data dog but we were not good at doing alerting yet we",
    "start": "2051210",
    "end": "2058710"
  },
  {
    "text": "just didn't know when we came into the office and everything was bad because we happen to look at the graph we eventually got better in part because of",
    "start": "2058710",
    "end": "2065510"
  },
  {
    "text": "you know things like this so we confirmed with cloud watch that the networking of the machines was fine you",
    "start": "2065510",
    "end": "2070830"
  },
  {
    "text": "could actually get traffic in and out you know cloud watches the basic health of your system and we also confirm that no one in snuck production changes in we",
    "start": "2070830",
    "end": "2079200"
  },
  {
    "text": "used to play you know real fast and loose we eventually got better at that to all detail metrics from the vm are",
    "start": "2079200",
    "end": "2085200"
  },
  {
    "text": "acceptable you know we went through the usual suspects oh the run Keys backed up etc etc but you know none of that so",
    "start": "2085200",
    "end": "2091830"
  },
  {
    "text": "then we went to the exchange partner and we looked at their traffic and we confirmed that there was a correlated",
    "start": "2091830",
    "end": "2097410"
  },
  {
    "text": "crash on their side so they're just not sending us traffic the exchange has dropped confirmed to drop in traffic",
    "start": "2097410",
    "end": "2102990"
  },
  {
    "text": "from their system so it's not us that's doing it we're just not getting anything from them it turns out that we had hit",
    "start": "2102990",
    "end": "2109859"
  },
  {
    "text": "an implicit exchange limitation so we had synced over greater than 2 billion cookies to them and they had a clause in",
    "start": "2109859",
    "end": "2118109"
  },
  {
    "text": "their implementation that said if it's greater than 2 billion it has to be wrong like there's no way that anyone could have more than two billion cookies",
    "start": "2118109",
    "end": "2124320"
  },
  {
    "text": "so when that got triggered they just decided that we were fraudulent and shut us off they eventually up that limit and",
    "start": "2124320",
    "end": "2131900"
  },
  {
    "text": "we became more conscientious about alerting effectively that was the big win there we had",
    "start": "2131900",
    "end": "2136980"
  },
  {
    "text": "nothing to change except our process around how these things get worked out",
    "start": "2136980",
    "end": "2142070"
  },
  {
    "text": "so sophisticated auto-scaling you know at high scale it's very easy to have the",
    "start": "2142070",
    "end": "2147750"
  },
  {
    "text": "over provisioned for your systems load it's real easy especially in Amazon to just say I don't fully understand the",
    "start": "2147750",
    "end": "2153060"
  },
  {
    "text": "performance implications of the system here's ten thousand dollars real easy",
    "start": "2153060",
    "end": "2159180"
  },
  {
    "text": "real tempting especially when it's not your credit card too but what's worse is",
    "start": "2159180",
    "end": "2164820"
  },
  {
    "text": "that it's very easy to be under provision for system load if you're not real careful about it it's easy to like",
    "start": "2164820",
    "end": "2170369"
  },
  {
    "text": "I only need two computers oh it turns out i needed 40 so you have to have some way of doing auto scaling and an AWS is",
    "start": "2170369",
    "end": "2178230"
  },
  {
    "text": "auto scaling is real excellent all cloud watch alarms and easy two instances can",
    "start": "2178230",
    "end": "2183660"
  },
  {
    "text": "be pressed into service for auto scaling and that's great so you know anything",
    "start": "2183660",
    "end": "2189570"
  },
  {
    "text": "that is reflective of the basic health of your system can now be auto scale event the first thing we did for auto",
    "start": "2189570",
    "end": "2198180"
  },
  {
    "text": "scaling because we were massively over provision was to use remaining used idle",
    "start": "2198180",
    "end": "2205920"
  },
  {
    "text": "CPU so if the bidder was too stressed it would consume basically all the CPU resource and then we would just have an",
    "start": "2205920",
    "end": "2213780"
  },
  {
    "text": "alarm I think of a threshold of ten percent and then we would just kick auto scaling up so you know this was a big",
    "start": "2213780",
    "end": "2219480"
  },
  {
    "text": "win for us actually so this is a number of bid request coming into the system",
    "start": "2219480",
    "end": "2226010"
  },
  {
    "text": "and you can see that it trails down at the end of the day and as traffic drops",
    "start": "2226010",
    "end": "2232920"
  },
  {
    "text": "off at the end of the day we need less CPU time to process it right I mean we the it's real handy for us that the",
    "start": "2232920",
    "end": "2240710"
  },
  {
    "text": "input to the system is reflective in the CPU of the system because we just have to do something with everything there's",
    "start": "2240710",
    "end": "2246960"
  },
  {
    "text": "no point where we can drop things on the floor so there's a nice fairly linear relationship there and you can see over",
    "start": "2246960",
    "end": "2253020"
  },
  {
    "text": "that same time period as traffic drops down the idle cpu climbs so we have its strong signal here for auto scaling we",
    "start": "2253020",
    "end": "2259680"
  },
  {
    "text": "have something that we can do instead of just sort of like here's a wheelbarrow of money enjoy that where we can sort of",
    "start": "2259680",
    "end": "2264750"
  },
  {
    "text": "take our money back at the end of the day and you know this was great when we star doing this we saved loads of money we",
    "start": "2264750",
    "end": "2271470"
  },
  {
    "text": "chopped out something like fifteen percent of the number of machines that we needed especially at night at night we would go down to our minimums and",
    "start": "2271470",
    "end": "2278520"
  },
  {
    "text": "that was super super effective the problem was it's an indirect measurements there's there's always some",
    "start": "2278520",
    "end": "2283859"
  },
  {
    "text": "nuance that you're going to miss you know your system has a complex behavior and your system is not just distill",
    "start": "2283859",
    "end": "2290220"
  },
  {
    "text": "abble into idle CPU I mean unless you're having to build a space heater that just does you know computation to do that",
    "start": "2290220",
    "end": "2297359"
  },
  {
    "text": "which we are not building a space heater though I'm sure the machines kick out a lot of heat co-resident subsystems eat",
    "start": "2297359",
    "end": "2303960"
  },
  {
    "text": "into the CPU time so our our bitter is not necessarily just airline there are",
    "start": "2303960",
    "end": "2309680"
  },
  {
    "text": "native components to get shipped along and they eat up that CPU time and we don't necessarily want to measure that",
    "start": "2309680",
    "end": "2315710"
  },
  {
    "text": "you know we want to measure that in a more direct fashion so we can't say that Buddha is doing something who does the",
    "start": "2315710",
    "end": "2322200"
  },
  {
    "text": "name of the bitter can't say that Boone is doing something we can't say that the native component is doing something because we've just got one value CPU",
    "start": "2322200",
    "end": "2329790"
  },
  {
    "text": "consumption carries no information about aberrant system issues it is just distilled into one value and it's very",
    "start": "2329790",
    "end": "2335280"
  },
  {
    "text": "indirect and as you do more sophisticated things in the machine it gets way too indirect so you know what",
    "start": "2335280",
    "end": "2341940"
  },
  {
    "text": "can you do the the trouble with having just a single metric is while it's easy",
    "start": "2341940",
    "end": "2347130"
  },
  {
    "text": "to conceive of and it's easy to start with it's not effective in the long term the real trick is that cloud watch",
    "start": "2347130",
    "end": "2354210"
  },
  {
    "text": "doesn't allow you to auto scale on multiple things you technically you can",
    "start": "2354210",
    "end": "2360060"
  },
  {
    "text": "but they don't cooperate you just sort of say like well do a thing and then do a thing and then do a thing and you hope",
    "start": "2360060",
    "end": "2365819"
  },
  {
    "text": "they don't collide so if any of you have ever built control systems that is the least optimal way of building control",
    "start": "2365819",
    "end": "2371910"
  },
  {
    "text": "system so you've only got one signal out so what do you do you distill the",
    "start": "2371910",
    "end": "2377339"
  },
  {
    "text": "performance capability of your system into a single signal so it's a single signal control system but you know that",
    "start": "2377339",
    "end": "2383670"
  },
  {
    "text": "you need multiple signals so you just combine them so what we did was we took in effect we just took big requests we",
    "start": "2383670",
    "end": "2391530"
  },
  {
    "text": "took time outs of some of the subsystems and we took latency metrics and we summed them and they're weighted you",
    "start": "2391530",
    "end": "2397920"
  },
  {
    "text": "know in terms of our concerns about those and we call that the metadata index and you can see here the metadata index",
    "start": "2397920",
    "end": "2406539"
  },
  {
    "text": "is meant to fluctuate between two lines and so that's where the auto scaling gets set up at you know bottom line is",
    "start": "2406539",
    "end": "2412210"
  },
  {
    "text": "where you scale down and top line is where you scale up real simple and real",
    "start": "2412210",
    "end": "2417970"
  },
  {
    "text": "effective the the metadata index tracks load on the bidders it's just a weighted sum of metrics so it's very useful to",
    "start": "2417970",
    "end": "2424900"
  },
  {
    "text": "take your sophisticated understanding the system and just sort of say like this is the most important less",
    "start": "2424900",
    "end": "2430299"
  },
  {
    "text": "important less important less important less important and as the traffic drops",
    "start": "2430299",
    "end": "2435400"
  },
  {
    "text": "the metadata index drops because it's largely pegged to bid requests and indirectly idle CPU increases so you",
    "start": "2435400",
    "end": "2443140"
  },
  {
    "text": "know we met this metric index into cloud watch is a custom metric and we're able",
    "start": "2443140",
    "end": "2448660"
  },
  {
    "text": "to auto scale on it and as soon as it hits cloud watch that's us we're golden",
    "start": "2448660",
    "end": "2454359"
  },
  {
    "text": "so you know as a sort of bid request climb up in the day indirectly CPU",
    "start": "2454359",
    "end": "2462299"
  },
  {
    "text": "decreases we're needing more and more CPU but it turns out that there's not a great indication in the modern system",
    "start": "2462299",
    "end": "2469960"
  },
  {
    "text": "but once we start auto scaling on this metadata index you can see that the as",
    "start": "2469960",
    "end": "2475750"
  },
  {
    "text": "the traffic increases we're able to sort of keep this thing in parameter which is",
    "start": "2475750",
    "end": "2481750"
  },
  {
    "text": "the thing that we were unable to do with cpu because it was too fluctuated too much I mentioned that we had periodic",
    "start": "2481750",
    "end": "2487599"
  },
  {
    "text": "tasks that kick on their high CPU users so this is a very very direct measure of",
    "start": "2487599",
    "end": "2493799"
  },
  {
    "text": "the system's performance and it sort of proved out in the number of ec2 hosts",
    "start": "2493799",
    "end": "2501400"
  },
  {
    "text": "that we use so you can sort of see that we dive almost all the way down just a six hour minimum threshold is four for",
    "start": "2501400",
    "end": "2506650"
  },
  {
    "text": "redundancy purposes and then through the day even as traffic fluctuates and jitters around we have these nice flat",
    "start": "2506650",
    "end": "2512710"
  },
  {
    "text": "consistent places in the number of instances that we have so we've able to",
    "start": "2512710",
    "end": "2518200"
  },
  {
    "text": "we've been able to remove some sort of jitter from the system and we've been able to make it more efficient in fact",
    "start": "2518200",
    "end": "2523450"
  },
  {
    "text": "this is twice as efficient as CPU idle scaling as that signal so we need one",
    "start": "2523450",
    "end": "2528670"
  },
  {
    "text": "half the number of machines that we needed previously and it's been an incredible cost savings and it's also very valuable for our understanding the",
    "start": "2528670",
    "end": "2535450"
  },
  {
    "text": "system because instead of well I don't know jeez like the CPU we can say a thing that we know very well",
    "start": "2535450",
    "end": "2541060"
  },
  {
    "text": "is doing a thing that we understand very well and blue line here is the number of",
    "start": "2541060",
    "end": "2547600"
  },
  {
    "text": "machines we need purple line there's the number of machines we needed week before so just immediately useful and so the",
    "start": "2547600",
    "end": "2555340"
  },
  {
    "text": "last thing I want to talk about the advertising industry is fun because in the modern web there's an incredible",
    "start": "2555340",
    "end": "2560440"
  },
  {
    "text": "number of fraud there's an incentive to cheat and get people to pay you money",
    "start": "2560440",
    "end": "2566190"
  },
  {
    "text": "for a thing that didn't actually happen and we see a lot of this and we've had to become more and more sophisticated as",
    "start": "2566190",
    "end": "2572380"
  },
  {
    "text": "we've detected this at combating fraud and we knew about certain kinds of fraud that we just accepted we called it the",
    "start": "2572380",
    "end": "2578290"
  },
  {
    "text": "hot cookie and it caused a tolerable faults in the bidders so the bidders are such a large complex system that it's",
    "start": "2578290",
    "end": "2585070"
  },
  {
    "text": "not correct by design it is fault tolerant by design so there are certain low latency errors that occur that we",
    "start": "2585070",
    "end": "2593920"
  },
  {
    "text": "just consider to be acceptable for the time being in particular this tolerable",
    "start": "2593920",
    "end": "2599380"
  },
  {
    "text": "fault was to do with our DynamoDB usage so we store a lot of stuff in dynamo dB if you have a hot cookie come through",
    "start": "2599380",
    "end": "2605380"
  },
  {
    "text": "the way DynamoDB works is it hits a single shard and then it goes over your threshold for that shard and then you",
    "start": "2605380",
    "end": "2610690"
  },
  {
    "text": "start getting timeouts or we refer to them as throttles but they're just timeouts because that shard is",
    "start": "2610690",
    "end": "2616330"
  },
  {
    "text": "overloaded so we were seeing that everything that was co-resident on that shard would now start timing out because",
    "start": "2616330",
    "end": "2621730"
  },
  {
    "text": "you have you know one fraudulent cookie that's hitting you you know a hundred thousand times a second but we",
    "start": "2621730",
    "end": "2627850"
  },
  {
    "text": "considered that acceptable we just massively over provision DynamoDB and we went on our way and then eventually we",
    "start": "2627850",
    "end": "2634120"
  },
  {
    "text": "wanted to not just give a wheelbarrow of money for that so we started fixing it so we build a thing called cookie",
    "start": "2634120",
    "end": "2639730"
  },
  {
    "text": "bouncer and it blocks bidding on fraudulent hot cookies in real time it's",
    "start": "2639730",
    "end": "2644980"
  },
  {
    "text": "just a control system and it's a configurable control system and our concern here was blocking too much",
    "start": "2644980",
    "end": "2650380"
  },
  {
    "text": "traffic you know like I said we have to have traffic coming in a system we have to be able to service it and if we block",
    "start": "2650380",
    "end": "2656260"
  },
  {
    "text": "too many legitimate bids through over-aggressive tuning through saying like this cookie can't show up that many",
    "start": "2656260",
    "end": "2661480"
  },
  {
    "text": "times then we will start to lose money so we had to have some sort of heuristic",
    "start": "2661480",
    "end": "2666850"
  },
  {
    "text": "for deciding that no human could view send us their cookie in too many in",
    "start": "2666850",
    "end": "2673520"
  },
  {
    "text": "you know some window too many times we didn't know what that would be we had no",
    "start": "2673520",
    "end": "2678560"
  },
  {
    "text": "idea how the system actually behaved in practice so when we built the cookie bouncer we had gotten relativist",
    "start": "2678560",
    "end": "2684260"
  },
  {
    "text": "relatively sophisticated with dashboarding and we had gotten relatively sophisticated with alerting so we built a dashboard for it and we",
    "start": "2684260",
    "end": "2690230"
  },
  {
    "text": "introduced the ability to tune this thing in real time when every bitter so that we could roll out cookie bouncer",
    "start": "2690230",
    "end": "2696710"
  },
  {
    "text": "with very conservative settings that basically turned it off but it was running and then start adjusting we",
    "start": "2696710",
    "end": "2702380"
  },
  {
    "text": "could turn it make it more and more aggressive and we can keep tabs on the key indicators because we've got very finely detailed real-time metrics and we",
    "start": "2702380",
    "end": "2709790"
  },
  {
    "text": "can see in real time our configuration changes having an effect on the system so you know I mentioned before in batch",
    "start": "2709790",
    "end": "2715670"
  },
  {
    "text": "processing where we would experiment and it would be a change wait 24 hours make a change wait for 24 hours now it's make",
    "start": "2715670",
    "end": "2723560"
  },
  {
    "text": "a change wait for 3 minutes make a change wait for 3 minutes so it's very easy for two people to work together and",
    "start": "2723560",
    "end": "2728630"
  },
  {
    "text": "to sort of keep the mental model running and make a very sophisticated product very quickly so blue line is current",
    "start": "2728630",
    "end": "2736640"
  },
  {
    "text": "purple lines week before yellow is month before these are the total winds that",
    "start": "2736640",
    "end": "2743600"
  },
  {
    "text": "are coming into the system and in particular these are the winds that we are considered to be fraudulent in some",
    "start": "2743600",
    "end": "2749570"
  },
  {
    "text": "way and you can see is we're sort of tuning this thing that they're cranking down and down and down so it's having an",
    "start": "2749570",
    "end": "2754730"
  },
  {
    "text": "effect and is having a very positive effect because all this fraudulent stuff is money lost to our customers and as we",
    "start": "2754730",
    "end": "2761570"
  },
  {
    "text": "adjusted this thing we actually thought that the it would behave differently in practice so our reasoning about this",
    "start": "2761570",
    "end": "2768290"
  },
  {
    "text": "system was not very good but as we adjusted it we were incredibly surprised",
    "start": "2768290",
    "end": "2773840"
  },
  {
    "text": "the number of block cookies the percentage of total traffic that was fraudulent we thought it would maybe be percent at most and when we started",
    "start": "2773840",
    "end": "2782180"
  },
  {
    "text": "doing this we had to convince ourselves that we hadn't introduced a bug somewhere the percentages were so high",
    "start": "2782180",
    "end": "2787730"
  },
  {
    "text": "and the numbers of block cookies were so high that we backed it off and we reviewed the code even more stringently",
    "start": "2787730",
    "end": "2793730"
  },
  {
    "text": "because it just surprised us and you can see as we sort of tune this thing up you",
    "start": "2793730",
    "end": "2799400"
  },
  {
    "text": "know on the far left-hand side there is its most conservative settings",
    "start": "2799400",
    "end": "2805770"
  },
  {
    "text": "it's basically turned off so it's kicking out the number the bounce rate the percentage of cookies that I've seen",
    "start": "2805770",
    "end": "2811380"
  },
  {
    "text": "the last second that I bounced or excuse me the last 15 minutes is zero it's not",
    "start": "2811380",
    "end": "2817770"
  },
  {
    "text": "doing anything and then we make it a little more aggressive a little more aggressive and a little more aggressive and you can see these jumps in cookies",
    "start": "2817770",
    "end": "2824880"
  },
  {
    "text": "the other interesting thing is the cookies aren't distributed evenly through time so that's why you have these giant spikes because you'll get",
    "start": "2824880",
    "end": "2830820"
  },
  {
    "text": "100,000 in a second then you'll never see it again that was another thing we learned we didn't know how they were",
    "start": "2830820",
    "end": "2836910"
  },
  {
    "text": "distributed and as the the blacklist as a bitter comes online and starts filling",
    "start": "2836910",
    "end": "2842970"
  },
  {
    "text": "up its blacklist you can see that it scales up in a very interesting fashion",
    "start": "2842970",
    "end": "2848550"
  },
  {
    "text": "and this is the same time period so you can see on the far left-hand side that we're very conservative we're not doing anything and then on and on and on if we",
    "start": "2848550",
    "end": "2855990"
  },
  {
    "text": "had not had data dog we wouldn't have been able to do this this would not have been a thing that we would have been",
    "start": "2855990",
    "end": "2861300"
  },
  {
    "text": "capable of understanding it radically changed our understanding of the nature of the traffic that came into the system",
    "start": "2861300",
    "end": "2866760"
  },
  {
    "text": "because we had convinced ourselves that the online advertising world was a nicer place we wanted it to be a nicer place",
    "start": "2866760",
    "end": "2872910"
  },
  {
    "text": "but it turns out there's just a lot of crap that flows through it but because",
    "start": "2872910",
    "end": "2877920"
  },
  {
    "text": "we were able to experiment extremely quickly with accuracy we were able to understand you know what the proper",
    "start": "2877920",
    "end": "2884849"
  },
  {
    "text": "tuning parameters were and i think when we were doing this we change the tuning",
    "start": "2884849",
    "end": "2889859"
  },
  {
    "text": "parameter something like 15 times so if you can imagine in the old days that would have taken 15 days basically to",
    "start": "2889859",
    "end": "2895470"
  },
  {
    "text": "work weeks to sort of fiddle with this thing but we did this in less than a day like this was the thing we just put",
    "start": "2895470",
    "end": "2900480"
  },
  {
    "text": "together in less than a day and it was super super effective and you know the",
    "start": "2900480",
    "end": "2906329"
  },
  {
    "text": "instrumentation sort of speaks for itself like the instrumentation is not just a thing that is a tool for you it",
    "start": "2906329",
    "end": "2913319"
  },
  {
    "text": "almost becomes another another co-worker for you another thing to bounce ideas off of another thing to put a hypothesis",
    "start": "2913319",
    "end": "2920940"
  },
  {
    "text": "on and get empirical measurements back and it radically changes the way that you are able to conceive of building",
    "start": "2920940",
    "end": "2927300"
  },
  {
    "text": "complex products to to introduce all of this telemetry and then make reasoned decisions based on that telemetry not",
    "start": "2927300",
    "end": "2933000"
  },
  {
    "text": "just your sort of Aristotle II inability to believe that there are more teeth and people than others and you know as so we",
    "start": "2933000",
    "end": "2941410"
  },
  {
    "text": "have a thing that predicts the average price as we turn the cookie bouncer on once we cut the prod out our average",
    "start": "2941410",
    "end": "2947410"
  },
  {
    "text": "price prediction jumped way up like just very very rapidly and that's another fantastic win for real-time bidding or",
    "start": "2947410",
    "end": "2953740"
  },
  {
    "text": "real-time telemetry because we were able to see changes throughout the system as",
    "start": "2953740",
    "end": "2958980"
  },
  {
    "text": "you know the positive or negative depending benefits of a new feature",
    "start": "2958980",
    "end": "2964950"
  },
  {
    "text": "replicate and spread out through the system and that is incredibly useful",
    "start": "2964950",
    "end": "2970089"
  },
  {
    "text": "because other segments of the business that are concerned about different things are checking our work you know they're saying how did the prediction",
    "start": "2970089",
    "end": "2976839"
  },
  {
    "text": "jump up well we cut out a lot of fraud enjoy that and that is an incredibly useful thing because now your organization is working together",
    "start": "2976839",
    "end": "2983560"
  },
  {
    "text": "internally instead of at loggerheads with one another and that has been one of the best things about this work is",
    "start": "2983560",
    "end": "2988990"
  },
  {
    "text": "that everybody gets a chance to work together and as was mentioned there is",
    "start": "2988990",
    "end": "2994000"
  },
  {
    "text": "another monitoring monitoring strategies finding signal and the noise so if you want to know how to build these",
    "start": "2994000",
    "end": "2999670"
  },
  {
    "text": "dashboards without having to do the eight months of laborious experimentation that we did they will",
    "start": "2999670",
    "end": "3005700"
  },
  {
    "text": "catch you up real fast and I would highly suggest you go see it and thank you everyone for coming",
    "start": "3005700",
    "end": "3011990"
  }
]