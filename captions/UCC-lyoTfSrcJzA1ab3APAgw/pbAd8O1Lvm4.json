[
  {
    "text": "hi this is Lance from Lang chain I'm",
    "start": "1599",
    "end": "3560"
  },
  {
    "text": "going to be talking about using Lang",
    "start": "3560",
    "end": "4920"
  },
  {
    "text": "graph to build a diverse and",
    "start": "4920",
    "end": "7000"
  },
  {
    "text": "sophisticated rag",
    "start": "7000",
    "end": "8840"
  },
  {
    "text": "flows so just to set the stage the basic",
    "start": "8840",
    "end": "11960"
  },
  {
    "text": "rag flow you can see here starts with a",
    "start": "11960",
    "end": "15199"
  },
  {
    "text": "question retrieval of relevant documents",
    "start": "15199",
    "end": "17640"
  },
  {
    "text": "from an index which are passed into the",
    "start": "17640",
    "end": "20279"
  },
  {
    "text": "context window of an llm for generation",
    "start": "20279",
    "end": "22720"
  },
  {
    "text": "of an answer grounded in the ret",
    "start": "22720",
    "end": "24320"
  },
  {
    "text": "documents so that's kind of the basic",
    "start": "24320",
    "end": "27000"
  },
  {
    "text": "outline and we can see it's like a very",
    "start": "27000",
    "end": "29000"
  },
  {
    "text": "linear path",
    "start": "29000",
    "end": "31240"
  },
  {
    "text": "um in practice though you often",
    "start": "31240",
    "end": "34239"
  },
  {
    "text": "encounter a few different types of",
    "start": "34239",
    "end": "36000"
  },
  {
    "text": "questions like when do we actually want",
    "start": "36000",
    "end": "38399"
  },
  {
    "text": "to",
    "start": "38399",
    "end": "39120"
  },
  {
    "text": "retrieve based upon the context of the",
    "start": "39120",
    "end": "41840"
  },
  {
    "text": "question um are the retrieve documents",
    "start": "41840",
    "end": "44200"
  },
  {
    "text": "actually good or not and if they're not",
    "start": "44200",
    "end": "46719"
  },
  {
    "text": "good should we discard them and then how",
    "start": "46719",
    "end": "49360"
  },
  {
    "text": "do we loot back and retry retrieval with",
    "start": "49360",
    "end": "51559"
  },
  {
    "text": "for example an improved",
    "start": "51559",
    "end": "53800"
  },
  {
    "text": "question so these types of questions",
    "start": "53800",
    "end": "56920"
  },
  {
    "text": "motivate an idea of active rag which",
    "start": "56920",
    "end": "59920"
  },
  {
    "text": "which is a process where an llm actually",
    "start": "59920",
    "end": "61800"
  },
  {
    "text": "decides when and where to retrieve based",
    "start": "61800",
    "end": "64158"
  },
  {
    "text": "upon like existing",
    "start": "64159",
    "end": "65840"
  },
  {
    "text": "retrievals or existing",
    "start": "65840",
    "end": "68720"
  },
  {
    "text": "Generations now when you think about",
    "start": "68720",
    "end": "71600"
  },
  {
    "text": "this there's a few different levels of",
    "start": "71600",
    "end": "73360"
  },
  {
    "text": "control that you have over an llm in a",
    "start": "73360",
    "end": "76720"
  },
  {
    "text": "rag",
    "start": "76720",
    "end": "77600"
  },
  {
    "text": "application the base case like we saw",
    "start": "77600",
    "end": "80280"
  },
  {
    "text": "with our chain is you just use an llm to",
    "start": "80280",
    "end": "83280"
  },
  {
    "text": "choose a single steps output so for",
    "start": "83280",
    "end": "86240"
  },
  {
    "text": "example in traditional rag you feed it",
    "start": "86240",
    "end": "88759"
  },
  {
    "text": "documents and it decides the generation",
    "start": "88759",
    "end": "92320"
  },
  {
    "text": "so it's just kind of one step now a lot",
    "start": "92320",
    "end": "95840"
  },
  {
    "text": "of rag workflows will use the idea of",
    "start": "95840",
    "end": "97759"
  },
  {
    "text": "routing so like given a question should",
    "start": "97759",
    "end": "100840"
  },
  {
    "text": "I route it to a vector store or a graph",
    "start": "100840",
    "end": "104759"
  },
  {
    "text": "DB um and we have seen this quite a",
    "start": "104759",
    "end": "108560"
  },
  {
    "text": "bit now this newer idea that I want to",
    "start": "108560",
    "end": "111640"
  },
  {
    "text": "introduce is how do we build more",
    "start": "111640",
    "end": "115439"
  },
  {
    "text": "sophisticated logical",
    "start": "115439",
    "end": "117600"
  },
  {
    "text": "flows um in a rag",
    "start": "117600",
    "end": "120640"
  },
  {
    "text": "pipeline um that you let the llm choose",
    "start": "120640",
    "end": "124880"
  },
  {
    "text": "between different steps but specify all",
    "start": "124880",
    "end": "129160"
  },
  {
    "text": "the transitions that are",
    "start": "129160",
    "end": "131400"
  },
  {
    "text": "available and this is known as we call a",
    "start": "131400",
    "end": "133840"
  },
  {
    "text": "state",
    "start": "133840",
    "end": "134720"
  },
  {
    "text": "machine now there's a few different",
    "start": "134720",
    "end": "138440"
  },
  {
    "text": "architectures that have emerged uh to",
    "start": "138440",
    "end": "141080"
  },
  {
    "text": "build different types of radic chains",
    "start": "141080",
    "end": "143760"
  },
  {
    "text": "and of course chains are traditionally",
    "start": "143760",
    "end": "146680"
  },
  {
    "text": "used just for like very basic graph but",
    "start": "146680",
    "end": "149400"
  },
  {
    "text": "there's no State machine is a bit newer",
    "start": "149400",
    "end": "152560"
  },
  {
    "text": "and Lang graph which we recently",
    "start": "152560",
    "end": "154680"
  },
  {
    "text": "released provides a really nice way to",
    "start": "154680",
    "end": "157480"
  },
  {
    "text": "build State machines for Rag and for",
    "start": "157480",
    "end": "160440"
  },
  {
    "text": "other",
    "start": "160440",
    "end": "161360"
  },
  {
    "text": "things and the general idea here is that",
    "start": "161360",
    "end": "164519"
  },
  {
    "text": "you can lay out more diverse and",
    "start": "164519",
    "end": "166800"
  },
  {
    "text": "complicated rag flows and then Implement",
    "start": "166800",
    "end": "170280"
  },
  {
    "text": "them as",
    "start": "170280",
    "end": "171680"
  },
  {
    "text": "graphs and it kind of motivates this",
    "start": "171680",
    "end": "173840"
  },
  {
    "text": "more broad idea of of like flow",
    "start": "173840",
    "end": "175760"
  },
  {
    "text": "engineering and thinking through the",
    "start": "175760",
    "end": "177319"
  },
  {
    "text": "actual like workflow that you want and",
    "start": "177319",
    "end": "180120"
  },
  {
    "text": "then implementing it um and we're going",
    "start": "180120",
    "end": "182840"
  },
  {
    "text": "to actually do that right now so I'm",
    "start": "182840",
    "end": "186480"
  },
  {
    "text": "going to Pi uh a recent paper called CAG",
    "start": "186480",
    "end": "189680"
  },
  {
    "text": "corrective rag which is really a nice",
    "start": "189680",
    "end": "192080"
  },
  {
    "text": "method um for active rag that",
    "start": "192080",
    "end": "195720"
  },
  {
    "text": "incorporates a few different",
    "start": "195720",
    "end": "197959"
  },
  {
    "text": "ideas um so first you retrieve documents",
    "start": "197959",
    "end": "202120"
  },
  {
    "text": "and then you grade",
    "start": "202120",
    "end": "203519"
  },
  {
    "text": "them now if at least one document",
    "start": "203519",
    "end": "207440"
  },
  {
    "text": "exceeds the threshold for relevance",
    "start": "207440",
    "end": "210720"
  },
  {
    "text": "you go to generation you generate your",
    "start": "210720",
    "end": "214080"
  },
  {
    "text": "answer um and it does this knowledge",
    "start": "214080",
    "end": "217920"
  },
  {
    "text": "refinement stage after that but let's",
    "start": "217920",
    "end": "221560"
  },
  {
    "text": "not worry about that for right now it's",
    "start": "221560",
    "end": "223000"
  },
  {
    "text": "kind of not essential for understanding",
    "start": "223000",
    "end": "224760"
  },
  {
    "text": "the basic flow here so again you do a",
    "start": "224760",
    "end": "228120"
  },
  {
    "text": "grade for relevance for every document",
    "start": "228120",
    "end": "231239"
  },
  {
    "text": "if any is relevant you",
    "start": "231239",
    "end": "233840"
  },
  {
    "text": "generate now if they're all ambiguous or",
    "start": "233840",
    "end": "237599"
  },
  {
    "text": "incorrect based upon your grader",
    "start": "237599",
    "end": "240360"
  },
  {
    "text": "you retrieve from an external Source",
    "start": "240360",
    "end": "243120"
  },
  {
    "text": "they use web",
    "start": "243120",
    "end": "244519"
  },
  {
    "text": "search and then they pass that as their",
    "start": "244519",
    "end": "247680"
  },
  {
    "text": "context for answer",
    "start": "247680",
    "end": "250079"
  },
  {
    "text": "generation so it's a really neat",
    "start": "250079",
    "end": "252200"
  },
  {
    "text": "workflow where you're doing retrieval",
    "start": "252200",
    "end": "254560"
  },
  {
    "text": "just like with basic rag but then you're",
    "start": "254560",
    "end": "256560"
  },
  {
    "text": "reasoning about the documents if they're",
    "start": "256560",
    "end": "258840"
  },
  {
    "text": "relevant go ahead and at least one is",
    "start": "258840",
    "end": "261160"
  },
  {
    "text": "relevant go ahead and generate if",
    "start": "261160",
    "end": "262680"
  },
  {
    "text": "they're not retrieve from alternative",
    "start": "262680",
    "end": "265560"
  },
  {
    "text": "source and then pack that into the",
    "start": "265560",
    "end": "267639"
  },
  {
    "text": "context and generate your answer",
    "start": "267639",
    "end": "271080"
  },
  {
    "text": "so let's see how we would implement this",
    "start": "271080",
    "end": "274360"
  },
  {
    "text": "as a state machine using Lang",
    "start": "274360",
    "end": "278360"
  },
  {
    "text": "graph um we'll make a few",
    "start": "278360",
    "end": "281919"
  },
  {
    "text": "simplifications",
    "start": "281919",
    "end": "283560"
  },
  {
    "text": "um we're going to first decide if any",
    "start": "283560",
    "end": "287600"
  },
  {
    "text": "documents are relevant we'll go ahead",
    "start": "287600",
    "end": "290240"
  },
  {
    "text": "and do the the web",
    "start": "290240",
    "end": "292199"
  },
  {
    "text": "search um to supplement the output so",
    "start": "292199",
    "end": "295960"
  },
  {
    "text": "that's just like kind of one minor",
    "start": "295960",
    "end": "297880"
  },
  {
    "text": "modification um we'll use search for web",
    "start": "297880",
    "end": "301039"
  },
  {
    "text": "search um we use Query writing to",
    "start": "301039",
    "end": "303840"
  },
  {
    "text": "optimize the search for uh to optimize",
    "start": "303840",
    "end": "306160"
  },
  {
    "text": "the web search but it follows a lot of",
    "start": "306160",
    "end": "308840"
  },
  {
    "text": "the the intuitions of the main paper uh",
    "start": "308840",
    "end": "312520"
  },
  {
    "text": "small note here we set the Tav API key",
    "start": "312520",
    "end": "316320"
  },
  {
    "text": "and another small mode I've already set",
    "start": "316320",
    "end": "318120"
  },
  {
    "text": "my lsmith API key um which we'll see is",
    "start": "318120",
    "end": "322680"
  },
  {
    "text": "useful a bit later for observing the",
    "start": "322680",
    "end": "325479"
  },
  {
    "text": "resulting",
    "start": "325479",
    "end": "326960"
  },
  {
    "text": "traces now I'm going to index three blog",
    "start": "326960",
    "end": "330520"
  },
  {
    "text": "posts that I",
    "start": "330520",
    "end": "331720"
  },
  {
    "text": "like um I'm going to use chrom ADB I'm",
    "start": "331720",
    "end": "334639"
  },
  {
    "text": "going to use open eye embeddings I'm",
    "start": "334639",
    "end": "336600"
  },
  {
    "text": "going to run this right now this will",
    "start": "336600",
    "end": "338919"
  },
  {
    "text": "create a vector store for me from these",
    "start": "338919",
    "end": "340880"
  },
  {
    "text": "three blog",
    "start": "340880",
    "end": "343199"
  },
  {
    "text": "posts and then what I'm going to do is",
    "start": "343199",
    "end": "346800"
  },
  {
    "text": "Define a",
    "start": "346800",
    "end": "348479"
  },
  {
    "text": "state now this is kind of the core",
    "start": "348479",
    "end": "351160"
  },
  {
    "text": "object that's going to be passed around",
    "start": "351160",
    "end": "353120"
  },
  {
    "text": "my graph that I'm going to",
    "start": "353120",
    "end": "355319"
  },
  {
    "text": "modify and right here is where I Define",
    "start": "355319",
    "end": "357840"
  },
  {
    "text": "it and the key point to know note right",
    "start": "357840",
    "end": "359919"
  },
  {
    "text": "now is it's just a dictionary and it can",
    "start": "359919",
    "end": "363080"
  },
  {
    "text": "contain things that are relevant for rag",
    "start": "363080",
    "end": "365600"
  },
  {
    "text": "like question documents generation and",
    "start": "365600",
    "end": "368199"
  },
  {
    "text": "we'll see how we update that in in in a",
    "start": "368199",
    "end": "370599"
  },
  {
    "text": "little bit but the first thing to note",
    "start": "370599",
    "end": "372240"
  },
  {
    "text": "is we Define our state and this is",
    "start": "372240",
    "end": "375520"
  },
  {
    "text": "what's going to be modified in every",
    "start": "375520",
    "end": "377039"
  },
  {
    "text": "note of our",
    "start": "377039",
    "end": "378560"
  },
  {
    "text": "graph now here's really the Crux of it",
    "start": "378560",
    "end": "381240"
  },
  {
    "text": "and this is the thing I want to zoom in",
    "start": "381240",
    "end": "382599"
  },
  {
    "text": "on a little bit um",
    "start": "382599",
    "end": "386280"
  },
  {
    "text": "so when you kind of move from just",
    "start": "386280",
    "end": "388800"
  },
  {
    "text": "thinking about prompts to thinking about",
    "start": "388800",
    "end": "390680"
  },
  {
    "text": "overall flows it it's like kind of a fun",
    "start": "390680",
    "end": "393360"
  },
  {
    "text": "and interesting exercise I kind of think",
    "start": "393360",
    "end": "395639"
  },
  {
    "text": "about this as it's been mentioned on",
    "start": "395639",
    "end": "397039"
  },
  {
    "text": "Twitter a little bit more like flow",
    "start": "397039",
    "end": "400319"
  },
  {
    "text": "engineering so let's think through what",
    "start": "400319",
    "end": "403759"
  },
  {
    "text": "was actually done in the paper and what",
    "start": "403759",
    "end": "407039"
  },
  {
    "text": "modifications to our state are going to",
    "start": "407039",
    "end": "409080"
  },
  {
    "text": "happen in each stage so we start with a",
    "start": "409080",
    "end": "412160"
  },
  {
    "text": "question you can see that on the far",
    "start": "412160",
    "end": "413880"
  },
  {
    "text": "left and this kind of state is",
    "start": "413880",
    "end": "415919"
  },
  {
    "text": "represented as a dictionary like we have",
    "start": "415919",
    "end": "417400"
  },
  {
    "text": "we start with a question we perform",
    "start": "417400",
    "end": "419400"
  },
  {
    "text": "retrieval from our Vector ster which we",
    "start": "419400",
    "end": "421039"
  },
  {
    "text": "just created that's going to give us",
    "start": "421039",
    "end": "423160"
  },
  {
    "text": "documents so that's one node we made an",
    "start": "423160",
    "end": "426919"
  },
  {
    "text": "an adjustment to our state by adding",
    "start": "426919",
    "end": "429440"
  },
  {
    "text": "documents that's step",
    "start": "429440",
    "end": "431680"
  },
  {
    "text": "one now we have a second node where",
    "start": "431680",
    "end": "433919"
  },
  {
    "text": "we're going to grade the documents and",
    "start": "433919",
    "end": "436360"
  },
  {
    "text": "in this node we might filter some out so",
    "start": "436360",
    "end": "438360"
  },
  {
    "text": "we are making a modification to state",
    "start": "438360",
    "end": "440039"
  },
  {
    "text": "which is why it's a node so we're going",
    "start": "440039",
    "end": "442240"
  },
  {
    "text": "to have a",
    "start": "442240",
    "end": "443440"
  },
  {
    "text": "greater then we're going to have what",
    "start": "443440",
    "end": "446000"
  },
  {
    "text": "we're going to call a conditional Edge",
    "start": "446000",
    "end": "448560"
  },
  {
    "text": "so we saw we went from question to",
    "start": "448560",
    "end": "450800"
  },
  {
    "text": "retrieval retrieval always goes to",
    "start": "450800",
    "end": "453240"
  },
  {
    "text": "grading and now we have a",
    "start": "453240",
    "end": "455560"
  },
  {
    "text": "decision if any document is",
    "start": "455560",
    "end": "458800"
  },
  {
    "text": "irrelevant we're going to go ahead and",
    "start": "458800",
    "end": "462000"
  },
  {
    "text": "do web search to",
    "start": "462000",
    "end": "463759"
  },
  {
    "text": "supplement and if they're all relevant",
    "start": "463759",
    "end": "465919"
  },
  {
    "text": "will go to generation it's a minor kind",
    "start": "465919",
    "end": "468080"
  },
  {
    "text": "of a minor kind of logical uh decision",
    "start": "468080",
    "end": "471879"
  },
  {
    "text": "that we're going to",
    "start": "471879",
    "end": "473159"
  },
  {
    "text": "make um if any are not relevant we'll",
    "start": "473159",
    "end": "476639"
  },
  {
    "text": "transform the query and we'll do we",
    "start": "476639",
    "end": "479400"
  },
  {
    "text": "search and we'll use that for Generation",
    "start": "479400",
    "end": "481479"
  },
  {
    "text": "so that's really it and that's how we",
    "start": "481479",
    "end": "483440"
  },
  {
    "text": "can kind of think about our flow and how",
    "start": "483440",
    "end": "485680"
  },
  {
    "text": "our States can be modified throughout",
    "start": "485680",
    "end": "487280"
  },
  {
    "text": "this",
    "start": "487280",
    "end": "488560"
  },
  {
    "text": "flow now all we then need to do and I I",
    "start": "488560",
    "end": "492520"
  },
  {
    "text": "kind of found",
    "start": "492520",
    "end": "493960"
  },
  {
    "text": "spending 10 minutes thinking carefully",
    "start": "493960",
    "end": "496639"
  },
  {
    "text": "through your flow",
    "start": "496639",
    "end": "498080"
  },
  {
    "text": "engineering is really valuable because",
    "start": "498080",
    "end": "500479"
  },
  {
    "text": "from here it's really just",
    "start": "500479",
    "end": "501759"
  },
  {
    "text": "implementation",
    "start": "501759",
    "end": "503159"
  },
  {
    "text": "details um and it's pretty easy as",
    "start": "503159",
    "end": "506039"
  },
  {
    "text": "you'll see so basically I'm going to run",
    "start": "506039",
    "end": "509879"
  },
  {
    "text": "this code block but then we can like",
    "start": "509879",
    "end": "511319"
  },
  {
    "text": "walk through some of it I won't show you",
    "start": "511319",
    "end": "512880"
  },
  {
    "text": "everything so it'll get a little bit",
    "start": "512880",
    "end": "513959"
  },
  {
    "text": "boring but really all we're",
    "start": "513959",
    "end": "516320"
  },
  {
    "text": "doing is we're finding functions for",
    "start": "516320",
    "end": "518959"
  },
  {
    "text": "every node that take in the state and",
    "start": "518959",
    "end": "522479"
  },
  {
    "text": "modify in some way that's all it's going",
    "start": "522479",
    "end": "524560"
  },
  {
    "text": "on so thing about retrieval we run",
    "start": "524560",
    "end": "527120"
  },
  {
    "text": "retrieval we take in state remember it's",
    "start": "527120",
    "end": "529200"
  },
  {
    "text": "a dict we get our state dict like this",
    "start": "529200",
    "end": "532160"
  },
  {
    "text": "we extract one key question from our",
    "start": "532160",
    "end": "534760"
  },
  {
    "text": "dick we pass that to a retriever we get",
    "start": "534760",
    "end": "537720"
  },
  {
    "text": "documents and we write back out State",
    "start": "537720",
    "end": "540560"
  },
  {
    "text": "now with documents key added that's",
    "start": "540560",
    "end": "544120"
  },
  {
    "text": "all generate going to be similar we take",
    "start": "544120",
    "end": "547160"
  },
  {
    "text": "in state now we have our question and",
    "start": "547160",
    "end": "549800"
  },
  {
    "text": "documents we pull in a prompt we Define",
    "start": "549800",
    "end": "552560"
  },
  {
    "text": "an LM we do minor postprocessing on",
    "start": "552560",
    "end": "555519"
  },
  {
    "text": "documents we set up a chain for",
    "start": "555519",
    "end": "557040"
  },
  {
    "text": "retrieval uh or sorry for Generation",
    "start": "557040",
    "end": "559320"
  },
  {
    "text": "which is just going to be take our",
    "start": "559320",
    "end": "560560"
  },
  {
    "text": "prompt pump Plum that to an llm pars the",
    "start": "560560",
    "end": "563680"
  },
  {
    "text": "output to string and we run it right",
    "start": "563680",
    "end": "566079"
  },
  {
    "text": "here invoking our documents and our",
    "start": "566079",
    "end": "569279"
  },
  {
    "text": "question to get our answer we write that",
    "start": "569279",
    "end": "572160"
  },
  {
    "text": "back to State that's",
    "start": "572160",
    "end": "574399"
  },
  {
    "text": "it and you can kind of follow here for",
    "start": "574399",
    "end": "576959"
  },
  {
    "text": "every node we just Define a function",
    "start": "576959",
    "end": "580079"
  },
  {
    "text": "that performs the state modification",
    "start": "580079",
    "end": "581800"
  },
  {
    "text": "that we want to do on that",
    "start": "581800",
    "end": "583480"
  },
  {
    "text": "node grading documents is going to be",
    "start": "583480",
    "end": "585839"
  },
  {
    "text": "the same um in this case I do a little",
    "start": "585839",
    "end": "589880"
  },
  {
    "text": "thing extra here because I actually",
    "start": "589880",
    "end": "591440"
  },
  {
    "text": "Define a pantic data model for my grater",
    "start": "591440",
    "end": "594240"
  },
  {
    "text": "so that the output of that particular",
    "start": "594240",
    "end": "597079"
  },
  {
    "text": "grading chain is a binary yes or no you",
    "start": "597079",
    "end": "600399"
  },
  {
    "text": "can look at the code make sure it's all",
    "start": "600399",
    "end": "602560"
  },
  {
    "text": "shared um and that just makes sure that",
    "start": "602560",
    "end": "604760"
  },
  {
    "text": "our output is is very deterministic so",
    "start": "604760",
    "end": "607640"
  },
  {
    "text": "that we then can down here perform",
    "start": "607640",
    "end": "611120"
  },
  {
    "text": "logical filtering so what you can see",
    "start": "611120",
    "end": "614360"
  },
  {
    "text": "here is um we Define this search value",
    "start": "614360",
    "end": "619640"
  },
  {
    "text": "no and we iterate through our documents",
    "start": "619640",
    "end": "622320"
  },
  {
    "text": "we grade them if any document uh is",
    "start": "622320",
    "end": "626160"
  },
  {
    "text": "graded as not relevant we flag a search",
    "start": "626160",
    "end": "629640"
  },
  {
    "text": "thing to yes that means we're going to",
    "start": "629640",
    "end": "632360"
  },
  {
    "text": "perform web search we then add that to",
    "start": "632360",
    "end": "635200"
  },
  {
    "text": "our state dict at the end so run web",
    "start": "635200",
    "end": "637079"
  },
  {
    "text": "search now that value is true that's",
    "start": "637079",
    "end": "640079"
  },
  {
    "text": "it and you can kind of see we go through",
    "start": "640079",
    "end": "642440"
  },
  {
    "text": "some other nodes here there's web search",
    "start": "642440",
    "end": "644720"
  },
  {
    "text": "node um now here is where our one",
    "start": "644720",
    "end": "648360"
  },
  {
    "text": "conditional Edge we Define right here",
    "start": "648360",
    "end": "651200"
  },
  {
    "text": "this is where we decide to generate or",
    "start": "651200",
    "end": "652720"
  },
  {
    "text": "not based on that search key so we again",
    "start": "652720",
    "end": "657160"
  },
  {
    "text": "get our state let's extract the various",
    "start": "657160",
    "end": "659600"
  },
  {
    "text": "values so we have the search value now",
    "start": "659600",
    "end": "662560"
  },
  {
    "text": "if search is yes we return the next no",
    "start": "662560",
    "end": "666639"
  },
  {
    "text": "that we want to go to so in this case",
    "start": "666639",
    "end": "669040"
  },
  {
    "text": "it'll be transform query which will then",
    "start": "669040",
    "end": "671240"
  },
  {
    "text": "go to web search else we go to",
    "start": "671240",
    "end": "675120"
  },
  {
    "text": "generate so what we can see is we laid",
    "start": "675120",
    "end": "679120"
  },
  {
    "text": "out our graph which you can kind of see",
    "start": "679120",
    "end": "681680"
  },
  {
    "text": "up",
    "start": "681680",
    "end": "683279"
  },
  {
    "text": "here and now we Define functions for all",
    "start": "683279",
    "end": "685800"
  },
  {
    "text": "those nodes as well as the conditional",
    "start": "685800",
    "end": "688079"
  },
  {
    "text": "Edge",
    "start": "688079",
    "end": "690000"
  },
  {
    "text": "and now we scroll down all we have to do",
    "start": "690000",
    "end": "693880"
  },
  {
    "text": "is just lay that out here again as our",
    "start": "693880",
    "end": "696639"
  },
  {
    "text": "flow and this is kind of what you might",
    "start": "696639",
    "end": "698279"
  },
  {
    "text": "think of as like kind of flow",
    "start": "698279",
    "end": "699320"
  },
  {
    "text": "engineering where you're just laying out",
    "start": "699320",
    "end": "701800"
  },
  {
    "text": "the graph as you drew it where we have",
    "start": "701800",
    "end": "705040"
  },
  {
    "text": "set our entry point as retrieve we're",
    "start": "705040",
    "end": "707639"
  },
  {
    "text": "adding an edge between retrieve and",
    "start": "707639",
    "end": "709440"
  },
  {
    "text": "grade documents so we went retrieval",
    "start": "709440",
    "end": "711800"
  },
  {
    "text": "grade documents we add our conditional",
    "start": "711800",
    "end": "713800"
  },
  {
    "text": "Edge depending on the grade either",
    "start": "713800",
    "end": "716760"
  },
  {
    "text": "transform the query go to web search or",
    "start": "716760",
    "end": "719720"
  },
  {
    "text": "just go to generate we create an edge",
    "start": "719720",
    "end": "722200"
  },
  {
    "text": "between transform the query and web",
    "start": "722200",
    "end": "723720"
  },
  {
    "text": "search then web search to generate and",
    "start": "723720",
    "end": "726680"
  },
  {
    "text": "then we also have an edge generate to",
    "start": "726680",
    "end": "728639"
  },
  {
    "text": "end and that's our whole graph that's it",
    "start": "728639",
    "end": "730800"
  },
  {
    "text": "so we can just run",
    "start": "730800",
    "end": "732480"
  },
  {
    "text": "this and now I'm going to ask a question",
    "start": "732480",
    "end": "735320"
  },
  {
    "text": "so let's just say um how does agent",
    "start": "735320",
    "end": "739199"
  },
  {
    "text": "memory work for example let's just try",
    "start": "739199",
    "end": "741800"
  },
  {
    "text": "that and what this is going to do is",
    "start": "741800",
    "end": "743839"
  },
  {
    "text": "going to print out what's going on as we",
    "start": "743839",
    "end": "746240"
  },
  {
    "text": "run through this graph so um um first we",
    "start": "746240",
    "end": "749760"
  },
  {
    "text": "going to see output from",
    "start": "749760",
    "end": "751160"
  },
  {
    "text": "retrieve this is going to be all of our",
    "start": "751160",
    "end": "753320"
  },
  {
    "text": "documents that we retrieved so that's",
    "start": "753320",
    "end": "755079"
  },
  {
    "text": "that's fine this is from our our",
    "start": "755079",
    "end": "756839"
  },
  {
    "text": "retriever then you can see that we're",
    "start": "756839",
    "end": "758959"
  },
  {
    "text": "doing a relevance check across our",
    "start": "758959",
    "end": "761320"
  },
  {
    "text": "documents and this is kind of",
    "start": "761320",
    "end": "763120"
  },
  {
    "text": "interesting right you can see we grading",
    "start": "763120",
    "end": "765560"
  },
  {
    "text": "them here one is grade as not",
    "start": "765560",
    "end": "768279"
  },
  {
    "text": "relevant um and okay you can see the",
    "start": "768279",
    "end": "771279"
  },
  {
    "text": "documents are now filtered because we've",
    "start": "771279",
    "end": "772720"
  },
  {
    "text": "remove the one that's not relevant and",
    "start": "772720",
    "end": "774760"
  },
  {
    "text": "because one is not relevant we decide",
    "start": "774760",
    "end": "777680"
  },
  {
    "text": "okay we're going to is transform the",
    "start": "777680",
    "end": "779440"
  },
  {
    "text": "query and run web",
    "start": "779440",
    "end": "781000"
  },
  {
    "text": "search and um you can see after query",
    "start": "781000",
    "end": "785199"
  },
  {
    "text": "transformation we rewrite the question",
    "start": "785199",
    "end": "787519"
  },
  {
    "text": "slightly we then run web",
    "start": "787519",
    "end": "790120"
  },
  {
    "text": "search um and you can see from web",
    "start": "790120",
    "end": "792240"
  },
  {
    "text": "search it searched from some additional",
    "start": "792240",
    "end": "795639"
  },
  {
    "text": "sources um which you can actually see",
    "start": "795639",
    "end": "798639"
  },
  {
    "text": "here it's",
    "start": "798639",
    "end": "799720"
  },
  {
    "text": "appended as a so here it is so here it's",
    "start": "799720",
    "end": "803120"
  },
  {
    "text": "a new document appended from web search",
    "start": "803120",
    "end": "805720"
  },
  {
    "text": "which is from memory and knowledge",
    "start": "805720",
    "end": "807160"
  },
  {
    "text": "requirements so it it basically looked",
    "start": "807160",
    "end": "809399"
  },
  {
    "text": "up some AI architecture related to",
    "start": "809399",
    "end": "811399"
  },
  {
    "text": "memory uh web results so that's fine",
    "start": "811399",
    "end": "814519"
  },
  {
    "text": "that's exactly what we want to",
    "start": "814519",
    "end": "816120"
  },
  {
    "text": "do and then um we generate a",
    "start": "816120",
    "end": "819600"
  },
  {
    "text": "response so that's great and this is",
    "start": "819600",
    "end": "822199"
  },
  {
    "text": "just showing you everything in kind of",
    "start": "822199",
    "end": "823760"
  },
  {
    "text": "gory detail but I'm going to show you",
    "start": "823760",
    "end": "826079"
  },
  {
    "text": "one other thing that's that's really",
    "start": "826079",
    "end": "827399"
  },
  {
    "text": "nice about this if I go to",
    "start": "827399",
    "end": "831480"
  },
  {
    "text": "lsmith I have my AP I key set so all my",
    "start": "831480",
    "end": "834880"
  },
  {
    "text": "Generations are just logged to to Lang",
    "start": "834880",
    "end": "837160"
  },
  {
    "text": "Smith and I can see my Lang graph run",
    "start": "837160",
    "end": "840040"
  },
  {
    "text": "here now what's really cool is this",
    "start": "840040",
    "end": "843040"
  },
  {
    "text": "shows me all of my nodes so remember we",
    "start": "843040",
    "end": "847320"
  },
  {
    "text": "had retrieve",
    "start": "847320",
    "end": "849920"
  },
  {
    "text": "grade we evaluated the grade because one",
    "start": "849920",
    "end": "853800"
  },
  {
    "text": "was irrelevant we then went ahead and",
    "start": "853800",
    "end": "855800"
  },
  {
    "text": "transformed the query we did a web",
    "start": "855800",
    "end": "857920"
  },
  {
    "text": "search we pended that to our context you",
    "start": "857920",
    "end": "860120"
  },
  {
    "text": "can see all those steps are laid out",
    "start": "860120",
    "end": "862079"
  },
  {
    "text": "here in fact you can even look at every",
    "start": "862079",
    "end": "864759"
  },
  {
    "text": "single uh grader and its output I will",
    "start": "864759",
    "end": "867880"
  },
  {
    "text": "move this up LLY um so you can see that",
    "start": "867880",
    "end": "872519"
  },
  {
    "text": "the different scores for grades okay so",
    "start": "872519",
    "end": "874639"
  },
  {
    "text": "this particular retrieval was graded as",
    "start": "874639",
    "end": "877279"
  },
  {
    "text": "as not relevant so that's fine that that",
    "start": "877279",
    "end": "879880"
  },
  {
    "text": "can happen in some cases and because of",
    "start": "879880",
    "end": "883079"
  },
  {
    "text": "that um we did a query transformation so",
    "start": "883079",
    "end": "886680"
  },
  {
    "text": "we modified the question slightly how",
    "start": "886680",
    "end": "889079"
  },
  {
    "text": "does memory how does the memory system",
    "start": "889079",
    "end": "891279"
  },
  {
    "text": "and artificial agents function so it's",
    "start": "891279",
    "end": "893320"
  },
  {
    "text": "just a minor rephrasing of the question",
    "start": "893320",
    "end": "895639"
  },
  {
    "text": "we did this tly web search this is where",
    "start": "895639",
    "end": "898720"
  },
  {
    "text": "it queried from this particular blog",
    "start": "898720",
    "end": "900920"
  },
  {
    "text": "post or medium so it's like a sing web",
    "start": "900920",
    "end": "903759"
  },
  {
    "text": "query we can like sanity check it and",
    "start": "903759",
    "end": "905920"
  },
  {
    "text": "then what's need is we can go to our",
    "start": "905920",
    "end": "907199"
  },
  {
    "text": "generate step look at open Ai and here's",
    "start": "907199",
    "end": "909519"
  },
  {
    "text": "our full prompt how does the memory",
    "start": "909519",
    "end": "911800"
  },
  {
    "text": "system in our official agents function",
    "start": "911800",
    "end": "914839"
  },
  {
    "text": "and then here's all of our documents so",
    "start": "914839",
    "end": "917160"
  },
  {
    "text": "this is the this is the web search as",
    "start": "917160",
    "end": "919639"
  },
  {
    "text": "well as we still have the relevant",
    "start": "919639",
    "end": "921399"
  },
  {
    "text": "chunks that were atriev from our blog",
    "start": "921399",
    "end": "923920"
  },
  {
    "text": "posts um and then here's our answer so",
    "start": "923920",
    "end": "929240"
  },
  {
    "text": "that's really it you can see how um",
    "start": "929240",
    "end": "932959"
  },
  {
    "text": "really moving from the notion of just",
    "start": "932959",
    "end": "936160"
  },
  {
    "text": "like I'll actually go back to the",
    "start": "936160",
    "end": "938399"
  },
  {
    "text": "original um moving",
    "start": "938399",
    "end": "942279"
  },
  {
    "text": "from uh I will try to open this up a",
    "start": "942279",
    "end": "945120"
  },
  {
    "text": "little",
    "start": "945120",
    "end": "946880"
  },
  {
    "text": "bit",
    "start": "946880",
    "end": "949880"
  },
  {
    "text": "um yeah I can see my face still um the",
    "start": "951680",
    "end": "957519"
  },
  {
    "text": "transition from from laying out simple",
    "start": "957519",
    "end": "963360"
  },
  {
    "text": "chains to",
    "start": "963360",
    "end": "966079"
  },
  {
    "text": "flows is a really interesting and",
    "start": "966079",
    "end": "968560"
  },
  {
    "text": "helpful way of thinking about why graphs",
    "start": "968560",
    "end": "970800"
  },
  {
    "text": "are really interesting because you can",
    "start": "970800",
    "end": "973639"
  },
  {
    "text": "encode more sophisticated logical",
    "start": "973639",
    "end": "976160"
  },
  {
    "text": "reasoning",
    "start": "976160",
    "end": "977680"
  },
  {
    "text": "workflows but in a",
    "start": "977680",
    "end": "979959"
  },
  {
    "text": "very like clean and well-engineered way",
    "start": "979959",
    "end": "984839"
  },
  {
    "text": "where you can specify all the",
    "start": "984839",
    "end": "986399"
  },
  {
    "text": "transitions that you actually want to",
    "start": "986399",
    "end": "988199"
  },
  {
    "text": "have",
    "start": "988199",
    "end": "989040"
  },
  {
    "text": "executed um and I actually find this way",
    "start": "989040",
    "end": "993639"
  },
  {
    "text": "of thinking and building kind of logical",
    "start": "993639",
    "end": "996160"
  },
  {
    "text": "uh like workflows really",
    "start": "996160",
    "end": "998639"
  },
  {
    "text": "intuitive um we have a blog post coming",
    "start": "998639",
    "end": "1001720"
  },
  {
    "text": "out uh tomorrow that discusses both",
    "start": "1001720",
    "end": "1005839"
  },
  {
    "text": "implementing self rag as well as C rag",
    "start": "1005839",
    "end": "1008199"
  },
  {
    "text": "for two different active rag approaches",
    "start": "1008199",
    "end": "1010839"
  },
  {
    "text": "using uh this idea of of State machines",
    "start": "1010839",
    "end": "1014000"
  },
  {
    "text": "and Lang graph um so I encourage you to",
    "start": "1014000",
    "end": "1017040"
  },
  {
    "text": "play with it uh I found it really uh",
    "start": "1017040",
    "end": "1020319"
  },
  {
    "text": "intuitive to work with um I also found",
    "start": "1020319",
    "end": "1024760"
  },
  {
    "text": "uh inspection of traces to be quite",
    "start": "1024760",
    "end": "1027839"
  },
  {
    "text": "intuitive using Lang graph because every",
    "start": "1027839",
    "end": "1032160"
  },
  {
    "text": "node is enumerated pretty clearly for",
    "start": "1032160",
    "end": "1034558"
  },
  {
    "text": "you which is not always the case when",
    "start": "1034559",
    "end": "1036558"
  },
  {
    "text": "you're using other types of of more",
    "start": "1036559",
    "end": "1038798"
  },
  {
    "text": "complex reasoning approaches for example",
    "start": "1038799",
    "end": "1040760"
  },
  {
    "text": "like agents so in any case um I hope",
    "start": "1040760",
    "end": "1044000"
  },
  {
    "text": "this was helpful and I definitely",
    "start": "1044000",
    "end": "1045918"
  },
  {
    "text": "encourage you to check out um kind this",
    "start": "1045919",
    "end": "1048760"
  },
  {
    "text": "notion of like flow engineering using",
    "start": "1048760",
    "end": "1050360"
  },
  {
    "text": "line graph and in the context of rag it",
    "start": "1050360",
    "end": "1052480"
  },
  {
    "text": "can be really powerful hopefully as You'",
    "start": "1052480",
    "end": "1054720"
  },
  {
    "text": "seen here thank",
    "start": "1054720",
    "end": "1056760"
  },
  {
    "text": "you",
    "start": "1056760",
    "end": "1059760"
  }
]