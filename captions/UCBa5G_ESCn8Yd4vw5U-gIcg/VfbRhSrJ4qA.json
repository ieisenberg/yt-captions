[
  {
    "text": "uh okay so I'm Bram Cohen I'm the founder and chief scientist at bit torrent Inc uh a created the bit torrent",
    "start": "10519",
    "end": "17080"
  },
  {
    "text": "protocol sitting in my living room in my underwear um uh with no academic affiliation oddly",
    "start": "17080",
    "end": "25199"
  },
  {
    "text": "enough so I'm going to talk about bit torrent live so uh bit torrent is this is again a",
    "start": "25199",
    "end": "31880"
  },
  {
    "text": "bandwidth based uh solution um because of the various things you could try and",
    "start": "31880",
    "end": "37160"
  },
  {
    "text": "distribute it turns out there's plenty of CPU uh there's plenty of storage there there's plenty of lots of things",
    "start": "37160",
    "end": "42879"
  },
  {
    "text": "where there isn't plenty of as bandwidth uh so bit torrent is all about bandwidth and bit torrent live is in a",
    "start": "42879",
    "end": "49480"
  },
  {
    "text": "similar vein and it's about trying to do live video streaming um like on",
    "start": "49480",
    "end": "55600"
  },
  {
    "text": "television same way people still to this day consume most of their video content",
    "start": "55600",
    "end": "60680"
  },
  {
    "text": "um and the problem here is how do we do it peer-to-peer how do we make it so one person can be broadcasting and a million",
    "start": "60680",
    "end": "67040"
  },
  {
    "text": "people can be watching and it all works well it sounds like a reasonably well defined problem here's the general goal",
    "start": "67040",
    "end": "74240"
  },
  {
    "text": "of what you want to have accomplish as the number of viewers goes up in a",
    "start": "74240",
    "end": "79960"
  },
  {
    "text": "non peer-to-peer system the amount of bandwidth use goes up and a bit T live it caps out at around 10 10 times the",
    "start": "79960",
    "end": "86360"
  },
  {
    "text": "bit rate of the stream no matter how many pair you have so in terms of where the problem is uh",
    "start": "86360",
    "end": "93759"
  },
  {
    "text": "there's CPU usage uh that's not a big deal get your astics right I have the whole thing written in Python it's not a",
    "start": "93759",
    "end": "99119"
  },
  {
    "text": "big deal uh uh bandwidth overhead of course matters you can waste around 20",
    "start": "99119",
    "end": "104920"
  },
  {
    "text": "to 30% most protocols do stuff like that not a big deal a necessary",
    "start": "104920",
    "end": "110360"
  },
  {
    "text": "Headroom is a little different from uh bandwidth overhead uh necessary Headroom",
    "start": "110360",
    "end": "115680"
  },
  {
    "text": "includes the amount of extra space you need above and beyond your overhead in order to actually function properly you",
    "start": "115680",
    "end": "121520"
  },
  {
    "text": "won't be using it all the time but if you don't have it everything is going to fall apart sooner or later uh that's generally like 30 to 50% uh which",
    "start": "121520",
    "end": "129800"
  },
  {
    "text": "compounds on top of the 20 to 30% bandwidth overhead that you have so you're typically looking at around 100%",
    "start": "129800",
    "end": "136800"
  },
  {
    "text": "overall combined overhead including both uh uh you definitely need robustness",
    "start": "136800",
    "end": "143200"
  },
  {
    "text": "against fast peer turn uh you should really engineer the whole thing from scratch to do",
    "start": "143200",
    "end": "148560"
  },
  {
    "text": "that uh and you definitely need uh congestion control that's getting to be hard um because you need to uh make it",
    "start": "148560",
    "end": "158040"
  },
  {
    "text": "shift over quickly which a regular congestion control doesn't do at all uh",
    "start": "158040",
    "end": "163080"
  },
  {
    "text": "how many of you are familiar with tcp's congestion control okay you're all going to find this hella",
    "start": "163080",
    "end": "169319"
  },
  {
    "text": "weird um uh uh security is uh very hard um uh",
    "start": "169319",
    "end": "177840"
  },
  {
    "text": "you need to use some slightly new ish crypto Gunk I'll explain that not that weird I didn't do it myself",
    "start": "177840",
    "end": "184720"
  },
  {
    "text": "um uh and latency is the real problem here's the big issue you want it to be that something is happening right now",
    "start": "184720",
    "end": "191920"
  },
  {
    "text": "and right now as in in about 5 Seconds everybody's viewing it even if there's like a million",
    "start": "191920",
    "end": "197120"
  },
  {
    "text": "peers turns out latency is the big issue latency totally dominates everything uh",
    "start": "197120",
    "end": "202879"
  },
  {
    "text": "the other peer-to-peer live video systems people have made typically have latencies around if they're really",
    "start": "202879",
    "end": "208680"
  },
  {
    "text": "really good 30 second more typically like 5 minutes um that's not really very live that's more like tape delayed uh",
    "start": "208680",
    "end": "216920"
  },
  {
    "text": "latency sucks uh latency it's kind of like dealing with like motor efficiency with thermodynamic things everything",
    "start": "216920",
    "end": "222760"
  },
  {
    "text": "adds to it there's no cheating around it it's this quantitative value everything you do adds to it there's no way of just",
    "start": "222760",
    "end": "228920"
  },
  {
    "text": "throwing an ASM totic about woring about and stop worrying about it all of your constants matter it's horrible all right",
    "start": "228920",
    "end": "234879"
  },
  {
    "text": "so this is generally the overall architecture uh there's an input camera it does some to the origin server which",
    "start": "234879",
    "end": "241400"
  },
  {
    "text": "speaks rtmp to what I'm calling the source which is one of my servers uh",
    "start": "241400",
    "end": "247239"
  },
  {
    "text": "those uh speak bit torent live protocol to all the peers which then speak rtmp",
    "start": "247239",
    "end": "252400"
  },
  {
    "text": "to a flash player in a web browser and then it gets displayed reasonably straightforward architecture integrates",
    "start": "252400",
    "end": "258160"
  },
  {
    "text": "with the web my goal is to make it so someone once they've got it installed doesn't know they're using it they go to web pages that use it it plays they",
    "start": "258160",
    "end": "264720"
  },
  {
    "text": "don't know the difference kind of like flash in general yes it to be a flash no",
    "start": "264720",
    "end": "271039"
  },
  {
    "text": "um well in theory or in terms of actual practice today both um in theory no not",
    "start": "271039",
    "end": "279240"
  },
  {
    "text": "at all I don't really care uh in terms of actual practice today you're basically stuck with h264 on flash if",
    "start": "279240",
    "end": "285240"
  },
  {
    "text": "you want consistent playback everywhere because Flash is the only thing that's widely available the general pissing",
    "start": "285240",
    "end": "291560"
  },
  {
    "text": "matches around um licensing of h264 and its inclusion in HTML 5 resulted in this",
    "start": "291560",
    "end": "298639"
  },
  {
    "text": "wonderful thing of everyone being free of their dependence on directly on h264 and instead their dependent directly on",
    "start": "298639",
    "end": "305120"
  },
  {
    "text": "flash thanks Google",
    "start": "305120",
    "end": "309919"
  },
  {
    "text": "um all right uh so in terms of Basics here uh the broadcaster that was on the origin",
    "start": "310280",
    "end": "317600"
  },
  {
    "text": "server they use anyal uh uh encoder that they want uh flash media live encoder open",
    "start": "317600",
    "end": "324960"
  },
  {
    "text": "broadcaster split wirecast these are all things that we've seen people use hopefully uses x264 under the hood x264",
    "start": "324960",
    "end": "333199"
  },
  {
    "text": "supports uh vbv vbv means that you can actually control the bit rate in a",
    "start": "333199",
    "end": "338240"
  },
  {
    "text": "reasonable manner uh spikiness in bandwidth is very bad for this protocol",
    "start": "338240",
    "end": "343560"
  },
  {
    "text": "it's just a bad thing to have happened because peers adjust weirdly to it they don't quite know what to do even in",
    "start": "343560",
    "end": "349199"
  },
  {
    "text": "theory even if my protocol was better at handling it it would still be a major problem you don't want when something's",
    "start": "349199",
    "end": "354240"
  },
  {
    "text": "kind of running at the limit across all peers uploading as fast as it can for there to be a sudden Spike it'll overload it and it's very hard to get",
    "start": "354240",
    "end": "361039"
  },
  {
    "text": "out of a bad situation once you're in it um of course most things do use x264",
    "start": "361039",
    "end": "366160"
  },
  {
    "text": "most things don't actually have any pass through of the parameters to the encoder to actually send to the x264",
    "start": "366160",
    "end": "371800"
  },
  {
    "text": "implementation that they're using thanks guys real helpful",
    "start": "371800",
    "end": "377360"
  },
  {
    "text": "um uh uh of course we send to the sourcing application via",
    "start": "377360",
    "end": "383120"
  },
  {
    "text": "rtmp and I personally have essentially zero interest in video codex uh so I",
    "start": "383120",
    "end": "390319"
  },
  {
    "text": "treat the data as a black box and I take each packet and I remember the contents of that packet and the time that I got",
    "start": "390319",
    "end": "396639"
  },
  {
    "text": "the packet and I resolve to try and Replay that exact as exactly as I can on the playback side albeit delayed",
    "start": "396639",
    "end": "405199"
  },
  {
    "text": "somewhat all right so there's the series of steps that you need to go through uh",
    "start": "405199",
    "end": "410360"
  },
  {
    "text": "in order to um uh to do streaming and I'm just going to follow like the life cycle of a packet here more or less uh",
    "start": "410360",
    "end": "417639"
  },
  {
    "text": "so first off was encoding just cover that uh next you need to uh uh batch up",
    "start": "417639",
    "end": "423000"
  },
  {
    "text": "your data and sign it so every quarter of a second you take all the data that you have and batch it all up uh you",
    "start": "423000",
    "end": "430759"
  },
  {
    "text": "compact it into a bunch of packets like you see in this diagram here uh each one of these here payloads would actually",
    "start": "430759",
    "end": "437720"
  },
  {
    "text": "potentially have multiple rtmp payloads span uh inside of it that it spans and",
    "start": "437720",
    "end": "444039"
  },
  {
    "text": "they're all just designed to be about the same size just a little bit less than an MTU um and then you use a hash",
    "start": "444039",
    "end": "452039"
  },
  {
    "text": "tree you see here binary hash tree and sign with ed25519",
    "start": "452039",
    "end": "457520"
  },
  {
    "text": "um that makes it so you've got in each and every packet you have 64 bytes of overhead for the um ed25519 signature",
    "start": "457520",
    "end": "466479"
  },
  {
    "text": "and 12 bytes for each level of tree I just kind of decided to um truncate my things in the middle here to save myself",
    "start": "466479",
    "end": "473240"
  },
  {
    "text": "a few bytes because this is overhead for every level of tree for every single packet so in principle I could have gone",
    "start": "473240",
    "end": "481280"
  },
  {
    "text": "a lot less than that I was a little worried about blah blah blah attacks I just decided on 12 and someone's going to scream at me no matter how I truncate",
    "start": "481280",
    "end": "487800"
  },
  {
    "text": "that so that was the value I used um uh by using this combination of",
    "start": "487800",
    "end": "495000"
  },
  {
    "text": "things I managed to make it so that I can actually literally sign every single packet that comes through and uh still",
    "start": "495000",
    "end": "502560"
  },
  {
    "text": "not use a huge amount of bandwidth overhead but I did in fact need to use ed25519 and I still haven't switched to",
    "start": "502560",
    "end": "509520"
  },
  {
    "text": "shot three which I really ought to do yes so what does the percentage overhead end up being um the percentage overhead",
    "start": "509520",
    "end": "515959"
  },
  {
    "text": "of btes in the wire is let me see so it sort of depends partially whether",
    "start": "515959",
    "end": "523320"
  },
  {
    "text": "you include the like UDP overhead as well so that's like 28 bytes and there's 64 bytes you you wind up with roughly",
    "start": "523320",
    "end": "531120"
  },
  {
    "text": "let's say 100 bytes of overhead and MC is like 1,00 bytes plus so yeah a little",
    "start": "531120",
    "end": "538600"
  },
  {
    "text": "less than 10% uh you have bigger issues with um just necessary headro that you need but the",
    "start": "538600",
    "end": "544680"
  },
  {
    "text": "the overall overhead is quite under control here actually um CPU is a little bit more of an issue I did in fact have",
    "start": "544680",
    "end": "550440"
  },
  {
    "text": "to use ed25519 I'm not just being goofy for that and I'm switching it to use the",
    "start": "550440",
    "end": "555560"
  },
  {
    "text": "ref 10 implementation because half my CPU is going to ed25519 right",
    "start": "555560",
    "end": "561800"
  },
  {
    "text": "now you know you you you verify signatures on every single packet it's",
    "start": "561800",
    "end": "567279"
  },
  {
    "text": "yes gpus to accelerate I don't have control of the machine ah",
    "start": "567279",
    "end": "572880"
  },
  {
    "text": "my software needs to run on every random bit of garbage on the internet okay",
    "start": "572880",
    "end": "577920"
  },
  {
    "text": "Flash Flash oh well flash isn't doing that part but um this has to run on like",
    "start": "577920",
    "end": "584880"
  },
  {
    "text": "mobile phones and different architectures and blah blah blah blah blah it's I I I I I'm stuck with the garbage",
    "start": "584880",
    "end": "592600"
  },
  {
    "text": "I'm giving I I have these home net connections where people are running other applications behind the same Net",
    "start": "592600",
    "end": "597959"
  },
  {
    "text": "Connection and they're on Wi-Fi that has a high failure I I I'm stuck with the garbage it's my problem see the thing is",
    "start": "597959",
    "end": "604279"
  },
  {
    "text": "packet-based networking is the absolute worst form of networking except for all the others like like no one in their",
    "start": "604279",
    "end": "610040"
  },
  {
    "text": "right mind would actually design it Global Communications um uh with no concept of",
    "start": "610040",
    "end": "617720"
  },
  {
    "text": "connectivity or guarantees or anything like that built into it whatsoever but it turns out the best way to actually",
    "start": "617720",
    "end": "623079"
  },
  {
    "text": "build the network is to build it in exactly that way with the assumption that some engineer will figure out that problems uh that some engineer would be",
    "start": "623079",
    "end": "631160"
  },
  {
    "text": "me over here um uh so uh so",
    "start": "631160",
    "end": "639000"
  },
  {
    "text": "there's uh while I was working on this uh someone asked me at one point what my",
    "start": "639000",
    "end": "644760"
  },
  {
    "text": "Approach was uh because I was claiming kind of ridiculous benchmarks which I can actually demonstrate in the wild now by the way um but I was claiming kind of",
    "start": "644760",
    "end": "652160"
  },
  {
    "text": "ridiculous benchmarks uh and so he asked me how my architecture worked because he was saying you can't possibly um have",
    "start": "652160",
    "end": "658800"
  },
  {
    "text": "less than 30- second uh end to endend delay and he kind of had a reasonable",
    "start": "658800",
    "end": "664200"
  },
  {
    "text": "rough sketch of why that was I'm like well you're you're making assumptions here in your model that aren't true of how I do",
    "start": "664200",
    "end": "670399"
  },
  {
    "text": "things uh and he asked me what I meant I'm like well can you name a protocol",
    "start": "670399",
    "end": "676200"
  },
  {
    "text": "that has high robustness and low latency he he he didn't know what I was",
    "start": "676200",
    "end": "681240"
  },
  {
    "text": "getting at and it's like well I didn't say that it needed you know efficiency or congestion control so if you want a a",
    "start": "681240",
    "end": "687560"
  },
  {
    "text": "protocol that has high robustness and low latency and it's actually his overhead isn't really all that bad",
    "start": "687560",
    "end": "692800"
  },
  {
    "text": "either uh you have this protocol where every Pier has three connections to other three by directional connections",
    "start": "692800",
    "end": "698240"
  },
  {
    "text": "to other peers and every time it gets a piece of data from one peer it sends it to the other too if it's never seen it",
    "start": "698240",
    "end": "703680"
  },
  {
    "text": "before uh this is what you call a screamer protocol it has uh 100%",
    "start": "703680",
    "end": "709440"
  },
  {
    "text": "overhead it has no congestion control however very high robustness very low",
    "start": "709440",
    "end": "715680"
  },
  {
    "text": "latency works great so my my idea here my secret sauce just about the most",
    "start": "715680",
    "end": "722160"
  },
  {
    "text": "embarrassingly stupid piece of Secret Sauce I've ever had in any project I've ever done uh my secret sauce here uh",
    "start": "722160",
    "end": "728680"
  },
  {
    "text": "that I thought of in 2008 which was actually the thing that me thinking hey maybe I could make a live protocol this was literally my big idea was hey I know",
    "start": "728680",
    "end": "736160"
  },
  {
    "text": "how about I scream the data out to I don't know 10% of the peers and then do something a little more controlled to",
    "start": "736160",
    "end": "742000"
  },
  {
    "text": "the rest of them and that way I'll get the um high robustness and low latency of a screamer protocol uh while keeping",
    "start": "742000",
    "end": "749800"
  },
  {
    "text": "the fact that it has no congestion control and it has high overhead under control by only doing it for a small fraction of all my traffic this was my",
    "start": "749800",
    "end": "757000"
  },
  {
    "text": "big idea um uh because it was very obvious to me that uh tree based uh",
    "start": "757000",
    "end": "762320"
  },
  {
    "text": "protocols were way not going to work just the way the failures Cascade is just not happening at all um I don't",
    "start": "762320",
    "end": "770360"
  },
  {
    "text": "know why this was so obvious to me uh and not anybody else I don't uh but it",
    "start": "770360",
    "end": "778040"
  },
  {
    "text": "wasn't anyway my idea here is to combine the best aspects of a screamer and a tree based protocol which is what I've",
    "start": "778040",
    "end": "784000"
  },
  {
    "text": "done uh so first of of all you scream data out to one six of the piers so",
    "start": "784000",
    "end": "789600"
  },
  {
    "text": "turns out you scream to more than 10% of the peers you scream to like 18% of the",
    "start": "789600",
    "end": "794959"
  },
  {
    "text": "peers or 1 16 this is what happens there are six what I call clubs so every piece",
    "start": "794959",
    "end": "800720"
  },
  {
    "text": "of data has a sequence number if you want to know the uh Club associated with that piece of data uh you take the",
    "start": "800720",
    "end": "807560"
  },
  {
    "text": "sequence number uh module 6 uh every peer is associated with a club basically",
    "start": "807560",
    "end": "815160"
  },
  {
    "text": "assigned randomly uh when you check in with the tracker there's a bit torr style tracker it'll suggest a club for",
    "start": "815160",
    "end": "820680"
  },
  {
    "text": "you it just rotates through them increments over the last one it suggested to somebody try and get reasonably even distribution doesn't",
    "start": "820680",
    "end": "826680"
  },
  {
    "text": "really matter all that much so um uh so you have the source which is a",
    "start": "826680",
    "end": "832920"
  },
  {
    "text": "member of all clubs unlike every other peer which is who are members of exactly one club uh if you the patent it'll say",
    "start": "832920",
    "end": "839800"
  },
  {
    "text": "every Pier is a member of two clubs don't worry about it um",
    "start": "839800",
    "end": "844839"
  },
  {
    "text": "the um the um but the peers then scream to each other and then for the last top",
    "start": "844839",
    "end": "851759"
  },
  {
    "text": "and only the last top does it send a in a more controlled Manner and five out of",
    "start": "851759",
    "end": "857199"
  },
  {
    "text": "the six peers get it that way a little less because the source sends to a bunch but tiny amount Less in a very big swarm",
    "start": "857199",
    "end": "864000"
  },
  {
    "text": "okay any questions about that everybody got it okay uh all right I said",
    "start": "864000",
    "end": "870959"
  },
  {
    "text": "that oh okay uh so there's this big difference between the last top and the not last top um uh in terms of",
    "start": "870959",
    "end": "879519"
  },
  {
    "text": "prioritization if you're familiar with bit torrent protocol um most people who are familiar with bit torrent protocol",
    "start": "879519",
    "end": "884560"
  },
  {
    "text": "they intuitive notion of prioritization is um is you should ask for the rarest",
    "start": "884560",
    "end": "892320"
  },
  {
    "text": "piece of data first because that's the way bit torrent works and that approach does in fact work uh it does in fact get",
    "start": "892320",
    "end": "898199"
  },
  {
    "text": "the data out there however it's horrible for latency uh when you're worrying about latency uh there's a very very big",
    "start": "898199",
    "end": "904959"
  },
  {
    "text": "difference between it being the last top and being not the last top if you are if",
    "start": "904959",
    "end": "911360"
  },
  {
    "text": "you're going to send data to someone who is a last top you can send it kind of at your leisure and it's not going to make",
    "start": "911360",
    "end": "916600"
  },
  {
    "text": "a big difference it's only going to increase latency for just them if you're some sending to somebody who's not the last hop um if you delay it not only are",
    "start": "916600",
    "end": "924519"
  },
  {
    "text": "you delaying it for them you're delaying it for everybody they're going to send it to as well uh so from a latency standpoint you",
    "start": "924519",
    "end": "931519"
  },
  {
    "text": "really want to send uh the very most um not the yeah the very most urgent stuff",
    "start": "931519",
    "end": "938040"
  },
  {
    "text": "first always first and then you want to send it first to the peers who are going to rebroadcast to",
    "start": "938040",
    "end": "943880"
  },
  {
    "text": "somebody else and then finally to the peers who aren't going to rebroadcast to anybody else uh that way you optimize",
    "start": "943880",
    "end": "949519"
  },
  {
    "text": "your latency in principle uh you could have some concept of how many hops each",
    "start": "949519",
    "end": "955079"
  },
  {
    "text": "peer is going to send it to I make no such distinction here uh I just go last top not last top",
    "start": "955079",
    "end": "962440"
  },
  {
    "text": "yes I'm not quite getting this that's a that's a small siiz picture it fits on the screen yeah what what's it look like",
    "start": "962440",
    "end": "969199"
  },
  {
    "text": "if I've got you know a thousand nodes uh well first off if you have a thousand nodes there are going to be a little",
    "start": "969199",
    "end": "975399"
  },
  {
    "text": "less around 180 peers in this group here uh and this is only there are six of",
    "start": "975399",
    "end": "980800"
  },
  {
    "text": "these overlaid on top of each other so this is a subset of all connections just the ones relative to one particular Club",
    "start": "980800",
    "end": "987759"
  },
  {
    "text": "so when you're looking at just one Club there's around 180 peers here 1/ 16 of a",
    "start": "987759",
    "end": "993399"
  },
  {
    "text": "th000 and there's the source which is connected to like three of them uh and",
    "start": "993399",
    "end": "1000199"
  },
  {
    "text": "these have a pretty random graph going between them of where everything's going but it's densely connected and then the",
    "start": "1000199",
    "end": "1007279"
  },
  {
    "text": "remaining 800 some odd peers are all down here and the average the average",
    "start": "1007279",
    "end": "1012880"
  },
  {
    "text": "fan out from these peers here to the ones down here is um five",
    "start": "1012880",
    "end": "1019279"
  },
  {
    "text": "uh and there's each per here is getting data from exactly one of those uh but",
    "start": "1019279",
    "end": "1024798"
  },
  {
    "text": "the number of these connections going out from these is highly variable because that's how the congestion",
    "start": "1024799",
    "end": "1030038"
  },
  {
    "text": "control works I'll get to that in a second does that make sense so so there's some scaling limit based on",
    "start": "1030039",
    "end": "1036360"
  },
  {
    "text": "on how big the blob in the middle there gets no there's no scaling",
    "start": "1036360",
    "end": "1042918"
  },
  {
    "text": "limit uh no no the The Blob in the middle increases as the number of peers increase it's always 1 Sixth of the",
    "start": "1042919",
    "end": "1049480"
  },
  {
    "text": "peers um a each of the other peers down here is a member of another club so I'm",
    "start": "1049480",
    "end": "1056280"
  },
  {
    "text": "only displaying one sixth of the total Connections in the whole thing right now um and for each of these peers down here",
    "start": "1056280",
    "end": "1063039"
  },
  {
    "text": "they'll be a member of the big cluster for a different Club does that make",
    "start": "1063039",
    "end": "1069159"
  },
  {
    "text": "sense it's it's General the maximum depth of the of the center Club grows",
    "start": "1070760",
    "end": "1076200"
  },
  {
    "text": "very slowly uh maximum that any packet oh yeah yeah the the depth that you go",
    "start": "1076200",
    "end": "1082400"
  },
  {
    "text": "is going to be basically exponential is logarithmic sorry it because this is a screamer protocol here you get this",
    "start": "1082400",
    "end": "1088799"
  },
  {
    "text": "exponential fan out in here and then you know a factor of five for the last",
    "start": "1088799",
    "end": "1094320"
  },
  {
    "text": "time is that making any sense you look kind of confused I don't understand it well",
    "start": "1094320",
    "end": "1100039"
  },
  {
    "text": "enough to explain it to somebody yet oh okay um this this is actually kind of a",
    "start": "1100039",
    "end": "1105880"
  },
  {
    "text": "simplic simplification of the overlays concept cep which is used in other um",
    "start": "1105880",
    "end": "1111120"
  },
  {
    "text": "other life protocols uh uh so there's this invariant within your group that's screaming here um",
    "start": "1111120",
    "end": "1120400"
  },
  {
    "text": "that um each oh by the way these connections are all directional there's no bidirectional connections here if if",
    "start": "1120400",
    "end": "1127760"
  },
  {
    "text": "I'm sending you data you're probably not sending me back the same data even if we're both in the same Club thing to",
    "start": "1127760",
    "end": "1134080"
  },
  {
    "text": "know um uh so there's this question of how is the gra and here formed between these",
    "start": "1134080",
    "end": "1140600"
  },
  {
    "text": "peers um and first off every Pier has at",
    "start": "1140600",
    "end": "1146039"
  },
  {
    "text": "least two incoming and at least two outgoing connections because two is the number after one and uh you need that",
    "start": "1146039",
    "end": "1153760"
  },
  {
    "text": "for exponential growth uh I at one point had this as a strict invariant that",
    "start": "1153760",
    "end": "1159200"
  },
  {
    "text": "every peer had exactly two incoming and exactly two outgoing this resulted in state machines which were really scary",
    "start": "1159200",
    "end": "1166440"
  },
  {
    "text": "rocket science and could never quite work EX ex actually right due to edge cases of peers leaving",
    "start": "1166440",
    "end": "1172280"
  },
  {
    "text": "eventually I came up with this brilliant idea that peers were allowed to have two or three incoming and two or three",
    "start": "1172280",
    "end": "1178159"
  },
  {
    "text": "outgoing connections uh and this resulted in the state machine where if you had two or",
    "start": "1178159",
    "end": "1184400"
  },
  {
    "text": "less and you get a new one you just accept it and keep going uh anybody care to guess what happens if you have three",
    "start": "1184400",
    "end": "1189679"
  },
  {
    "text": "connections and you get a new one what you do is you take you pick",
    "start": "1189679",
    "end": "1194880"
  },
  {
    "text": "randomly one of your existing old connections and you drop it",
    "start": "1194880",
    "end": "1200000"
  },
  {
    "text": "uh this can potentially make it so that the pier that you uh just dropped the connection from is now below their limit",
    "start": "1200000",
    "end": "1205799"
  },
  {
    "text": "they'll go find a new one uh and form a connection to them that Pier might then be above their limit this can Cascade a",
    "start": "1205799",
    "end": "1211679"
  },
  {
    "text": "little bit but because there's slop sooner or later they'll hit someone who had extra slop already available and the Chain Reaction will",
    "start": "1211679",
    "end": "1219000"
  },
  {
    "text": "stop kind of a stupid idea but it works",
    "start": "1219000",
    "end": "1224159"
  },
  {
    "text": "um uh so uh",
    "start": "1224159",
    "end": "1230280"
  },
  {
    "text": "did did people find what I just said really confusing by the way was that weird like that uh pretty strange okay",
    "start": "1230280",
    "end": "1237159"
  },
  {
    "text": "sorry uh all right now uh so after you're done screaming you need to send",
    "start": "1237159",
    "end": "1242960"
  },
  {
    "text": "out data in a reasonably coherent manner to the last top um TCP is congestion",
    "start": "1242960",
    "end": "1248679"
  },
  {
    "text": "window-based I hate congestion window-based protocols I think it's a horrible hack I really like pacing uh",
    "start": "1248679",
    "end": "1254679"
  },
  {
    "text": "out my data carefully uh when you're using a congestion window you inherent ly have this problem that you might",
    "start": "1254679",
    "end": "1260360"
  },
  {
    "text": "maybe be sending all your data as one giant glp every rtt and then your Q in",
    "start": "1260360",
    "end": "1266600"
  },
  {
    "text": "the middle has to have an rtt's worth of buffer available in it and it's just horrible and aside from that all my",
    "start": "1266600",
    "end": "1273120"
  },
  {
    "text": "congestion control here is based on oneway delays not packet loss and that really gets messed up when you aren't",
    "start": "1273120",
    "end": "1278520"
  },
  {
    "text": "pacing out your data carefully so I Pace out my data meaning I send a packet at regular",
    "start": "1278520",
    "end": "1285480"
  },
  {
    "text": "intervals um so uh because this data is kind of known",
    "start": "1285520",
    "end": "1293960"
  },
  {
    "text": "data uh I actually know what its bit rate is the source just says what the bit rate is in every single piece of",
    "start": "1293960",
    "end": "1299760"
  },
  {
    "text": "data coming out I don't need to guess it I don't need to adjust for it over the time I just say it and I follow",
    "start": "1299760",
    "end": "1305400"
  },
  {
    "text": "it uh you of course take the overall data",
    "start": "1305400",
    "end": "1311679"
  },
  {
    "text": "rate divide by six because each connection is for one six of the data and you multiply by the number of upload",
    "start": "1311679",
    "end": "1317279"
  },
  {
    "text": "connections you have that's the rate which you send data out uh so then you calculate your pacing",
    "start": "1317279",
    "end": "1322679"
  },
  {
    "text": "delay which is if I didn't get any new data coming in ever how long would it take for me to send out all the data",
    "start": "1322679",
    "end": "1328720"
  },
  {
    "text": "I've currently queued up to send out and then you uh increase your pacing delay",
    "start": "1328720",
    "end": "1336720"
  },
  {
    "text": "you increase the rate you're sending um if that data isn't if the pacing delay isn't zero based on this here formula",
    "start": "1336720",
    "end": "1344400"
  },
  {
    "text": "this is an important formula um uh when whenever you have um control",
    "start": "1344400",
    "end": "1350960"
  },
  {
    "text": "loops and I have a lot of control loops in this protocol by the way I've learned way more about PID controllers than I",
    "start": "1350960",
    "end": "1358600"
  },
  {
    "text": "ever really cared to um uh uh in general here I'm doing what you",
    "start": "1358600",
    "end": "1365799"
  },
  {
    "text": "call eye controllers meaning I'm doing it based on a lot of aggregate data so you're currently looking at your current",
    "start": "1365799",
    "end": "1371520"
  },
  {
    "text": "pacing delays very much an eye controller um you don't really ever want to rapidly change the rate at which you",
    "start": "1371520",
    "end": "1378760"
  },
  {
    "text": "send data out because it'll mess up your own congestion control really badly uh you definitely don't want to ever send",
    "start": "1378760",
    "end": "1386240"
  },
  {
    "text": "at very much more than 25% the rate you really should uh for two reasons um",
    "start": "1386240",
    "end": "1393120"
  },
  {
    "text": "number one because again you'll screw up your own congestion control peers will stop downloading from you when they",
    "start": "1393120",
    "end": "1398600"
  },
  {
    "text": "shouldn't because you're uploading faster than you really need to um at number two uh there's the subtle",
    "start": "1398600",
    "end": "1405080"
  },
  {
    "text": "complicated thing where if a pier doesn't have enough download capacity it needs to um it needs to quit eventually",
    "start": "1405080",
    "end": "1413720"
  },
  {
    "text": "so the thing that happens here this is kind of complicated and subtle is if I'm uploading to you and you have",
    "start": "1413720",
    "end": "1419440"
  },
  {
    "text": "insufficient download capacity uh I'm going to keep just trying to resend everything that uh I'd sent to you uh",
    "start": "1419440",
    "end": "1427279"
  },
  {
    "text": "already and all these are going to keep getting red dropped because your download isn't capable of handling them",
    "start": "1427279",
    "end": "1433559"
  },
  {
    "text": "your backlog is going to keep going to going to keep getting bigger I'm eventually going to start sending at 25%",
    "start": "1433559",
    "end": "1439440"
  },
  {
    "text": "faster uh than I really should be but no more uh and you're going to keep",
    "start": "1439440",
    "end": "1446120"
  },
  {
    "text": "dropping data and you're going to keep falling farther farther behind and eventually if you fall too far behind you give up and leave the Swarm and",
    "start": "1446120",
    "end": "1451240"
  },
  {
    "text": "that's how peers figure out that they have insufficient download capacity kind of a hack um well I mean it works yeah",
    "start": "1451240",
    "end": "1459120"
  },
  {
    "text": "anyway this is the way you keep this from oscillating that was a lot of work",
    "start": "1459120",
    "end": "1465679"
  },
  {
    "text": "um down to another Pier no no no no when I say a pier doesn't have sufficient download capacity I mean the size of",
    "start": "1467080",
    "end": "1472919"
  },
  {
    "text": "their download pipe isn't enough okay for the bit rate of the stream uh",
    "start": "1472919",
    "end": "1478080"
  },
  {
    "text": "there's no like saying I'm just going to use a fraction of the bit rate of the data stream here either you can play the",
    "start": "1478080",
    "end": "1484080"
  },
  {
    "text": "whole thing or eventually you just kind of give up MH yes twoy questions so why do you say",
    "start": "1484080",
    "end": "1491120"
  },
  {
    "text": "screamers screamers that's the technical term for it technical term yes can you",
    "start": "1491120",
    "end": "1496240"
  },
  {
    "text": "say like a broadcasting or something I don't know I like the term screamer and second is how did you find",
    "start": "1496240",
    "end": "1503000"
  },
  {
    "text": "it meic number six uh oh um I I I pulled",
    "start": "1503000",
    "end": "1508600"
  },
  {
    "text": "it out of my ass uh if if ever I'm good at coming up",
    "start": "1508600",
    "end": "1514360"
  },
  {
    "text": "with magic numbers I have a lot of fiber in my diet uh if ever you're doing your",
    "start": "1514360",
    "end": "1519480"
  },
  {
    "text": "own protocol and need some magic numbers you can come to me I'll help you I'll hook you up um no I no actually I I",
    "start": "1519480",
    "end": "1526760"
  },
  {
    "text": "determined it via simulation I I have this whole tricked out system where I uh",
    "start": "1526760",
    "end": "1531840"
  },
  {
    "text": "before I um before I actually made my code work I wrote an emulator for the internet uh it turns out I spoke",
    "start": "1531840",
    "end": "1538320"
  },
  {
    "text": "previously about how bad it is to do this whatever anyway I I I made an emulator for how the internet works it",
    "start": "1538320",
    "end": "1544360"
  },
  {
    "text": "turns out it's hard to simulate uh TCP because TCP Stacks are different",
    "start": "1544360",
    "end": "1549600"
  },
  {
    "text": "everywhere it's actually very easy to emulate router Creek cues because they're very simple beasts unless you're",
    "start": "1549600",
    "end": "1555120"
  },
  {
    "text": "trying to get fancy and do red or whatever",
    "start": "1555120",
    "end": "1560440"
  },
  {
    "text": "the fancy tail drop fanciness dujour is",
    "start": "1560440",
    "end": "1565520"
  },
  {
    "text": "these days I I'm against that stuff it makes me not know how the internet works um but router cues are very very simple",
    "start": "1565520",
    "end": "1571840"
  },
  {
    "text": "beasts uh things get delayed in transit between peers when something hits a que",
    "start": "1571840",
    "end": "1577520"
  },
  {
    "text": "it gets added to the end of a buffer where everything is shoved out of on a very regular schedule if the new packet",
    "start": "1577520",
    "end": "1584399"
  },
  {
    "text": "coming in makes the buffer too big it gets thrown out that's how the internet works um so I wrote an emulator for that",
    "start": "1584399",
    "end": "1592080"
  },
  {
    "text": "and then I made it so all of my code um uh uh all of my code has these funny",
    "start": "1592080",
    "end": "1599399"
  },
  {
    "text": "things where I have this call called debt shuffle for deterministic Shuffle where every time I iterate over the uh",
    "start": "1599399",
    "end": "1606520"
  },
  {
    "text": "keys in a dictionary where the order in which I key uh iterate over the matters I first sort and then randomly Shuffle",
    "start": "1606520",
    "end": "1612559"
  },
  {
    "text": "the order of the keys uh so that I can run my emulation over and over again it does the exact same thing every time",
    "start": "1612559",
    "end": "1619919"
  },
  {
    "text": "um yeah um I um and it was in these uh",
    "start": "1619919",
    "end": "1627559"
  },
  {
    "text": "emulations that I just played around with the magic numbers and came up with that as a value um there there are some",
    "start": "1627559",
    "end": "1632919"
  },
  {
    "text": "trade-offs to it if you have a very very large swarm it's kind of good to make it bigger because that makes your overhead",
    "start": "1632919",
    "end": "1638520"
  },
  {
    "text": "be lower and uh if you have a very very small swarm it helps to make it smaller",
    "start": "1638520",
    "end": "1645080"
  },
  {
    "text": "so that there's more offload to peers but that makes your overhead larger and makes your congestion control work worse",
    "start": "1645080",
    "end": "1650279"
  },
  {
    "text": "so six is pretty good on basically all sizes um uh it's really nice by the way",
    "start": "1650279",
    "end": "1655520"
  },
  {
    "text": "I highly recommend this having an emulator thing I uh I was able to like actually run things and figure out my",
    "start": "1655520",
    "end": "1661120"
  },
  {
    "text": "overall architecture before I'd really written much of anything like actually something that you know spoke UDP or",
    "start": "1661120",
    "end": "1667880"
  },
  {
    "text": "even actually I'd figured out my congestion control or for that matter um on my to-do list in 2009 top of the",
    "start": "1667880",
    "end": "1674000"
  },
  {
    "text": "to-do list was uh remove psychic powers uh because I had actually figured out my",
    "start": "1674000",
    "end": "1679120"
  },
  {
    "text": "whole protocol yet and so there were places where peers needed to find a peer so they just went and looked in the",
    "start": "1679120",
    "end": "1684760"
  },
  {
    "text": "global data structure of all peers and picked one you had a",
    "start": "1684760",
    "end": "1691440"
  },
  {
    "text": "question I yeah I was going to ask uh how big is a big swarm",
    "start": "1691440",
    "end": "1698120"
  },
  {
    "text": "uh you know that's kind of a relative concept uh there are a few different scales where things start to behave a",
    "start": "1698120",
    "end": "1704200"
  },
  {
    "text": "little bit differently okay um when you get up to when you have around 10 peers",
    "start": "1704200",
    "end": "1709360"
  },
  {
    "text": "you've still likely got most of your data or maybe like half your data coming off the source when you get up to 100",
    "start": "1709360",
    "end": "1715919"
  },
  {
    "text": "peers you have most of your data coming off of peers uh when you get up to",
    "start": "1715919",
    "end": "1721720"
  },
  {
    "text": "around a th peers um you get this phenomenon where",
    "start": "1721720",
    "end": "1726880"
  },
  {
    "text": "when a peer is doing peer gossip to find potential peers it no longer finds out about almost all of its potential peers",
    "start": "1726880",
    "end": "1733039"
  },
  {
    "text": "that it could be using and that affects the uh congestion control in subtle ways that I'll get to",
    "start": "1733039",
    "end": "1738799"
  },
  {
    "text": "um and then above a th000 peers it's all kind of the same you can't tell the difference",
    "start": "1738799",
    "end": "1744080"
  },
  {
    "text": "um yes you said at the very beginning that you had one advantage that you knew the bit rate at the be you knew the bit",
    "start": "1744080",
    "end": "1750440"
  },
  {
    "text": "rate up front yeah yet you were that the bottom peers were being booted because",
    "start": "1750440",
    "end": "1755880"
  },
  {
    "text": "they didn't couldn't support the bit rate oh I don't know their download capacity right",
    "start": "1755880",
    "end": "1761200"
  },
  {
    "text": "but okay so that's how you're measuring download capacity comparing but you can't just notice that no no no these",
    "start": "1761200",
    "end": "1768399"
  },
  {
    "text": "are peers on the internet I don't know anything about them they have shitty CPU they have Unown unknown data",
    "start": "1768399",
    "end": "1774360"
  },
  {
    "text": "connectivity the rate they can measure well you can look at your data",
    "start": "1774360",
    "end": "1779840"
  },
  {
    "text": "rate coming in but how do you know whether the problem is uh the peers sending you data or you're receiving",
    "start": "1779840",
    "end": "1785640"
  },
  {
    "text": "data and how do you know if the problem's transient or not and you know all that kind of stuff but you do know",
    "start": "1785640",
    "end": "1791519"
  },
  {
    "text": "the rate that you should be getting it out yes but that's about all you know there there's all this like in almost",
    "start": "1791519",
    "end": "1797559"
  },
  {
    "text": "every case here you can say oh well here's a heris which will really nail it but the problem is that heuristic only",
    "start": "1797559",
    "end": "1803799"
  },
  {
    "text": "really works on a clean Network where nothing bad is happening in Bram worlds bad stuff is happening all the time you",
    "start": "1803799",
    "end": "1809000"
  },
  {
    "text": "just have constant peer churn you have constant congestion control happening the the world is out of control I don't",
    "start": "1809000",
    "end": "1814960"
  },
  {
    "text": "know like what the I I don't know what the transfer capacity of these peers is they don't really have great",
    "start": "1814960",
    "end": "1821640"
  },
  {
    "text": "CPUs um they have cross talk going over the same things which might or might not be transient I I don't I don't know",
    "start": "1821640",
    "end": "1827519"
  },
  {
    "text": "what's going on these person how yes how fast does Pier churn occur very very",
    "start": "1827519",
    "end": "1834519"
  },
  {
    "text": "fast so fast um okay I said you're all going to find this hella weird here",
    "start": "1834519",
    "end": "1840600"
  },
  {
    "text": "so uh now you want to do congestion control so first off don't use pipes TCP",
    "start": "1840600",
    "end": "1848480"
  },
  {
    "text": "inherently anything vaguely TCP is uh has this concept of a pipe I'm",
    "start": "1848480",
    "end": "1855200"
  },
  {
    "text": "sending you data uh I try to send the data if the network isn't ready for the data CU I'm sending it too fast it",
    "start": "1855200",
    "end": "1861799"
  },
  {
    "text": "backlogs it that's not happening here I need L latency that that that abstraction fundamentally introduces a",
    "start": "1861799",
    "end": "1868760"
  },
  {
    "text": "lot of latency having nothing whatsoever to do that with the network don't use it can't use it at all all right well that",
    "start": "1868760",
    "end": "1876279"
  },
  {
    "text": "that kind of blows anything vaguely resembling tcp's congestion control right there um so uh uh",
    "start": "1876279",
    "end": "1885519"
  },
  {
    "text": "the uh the fundamental construct here is whenever you get a piece of data that's",
    "start": "1885519",
    "end": "1891880"
  },
  {
    "text": "delayed too much too much by the way means 200",
    "start": "1891880",
    "end": "1897440"
  },
  {
    "text": "milliseconds you send a fa ad message uh to the connection uh to the pier that was",
    "start": "1897519",
    "end": "1904120"
  },
  {
    "text": "sending you the data faad it's this faad is this Universal term for terminating a",
    "start": "1904120",
    "end": "1909639"
  },
  {
    "text": "connection permanently it's an it's an acronym it stands for",
    "start": "1909639",
    "end": "1915519"
  },
  {
    "text": "off and die um this is an actual technical term uh so",
    "start": "1915519",
    "end": "1922919"
  },
  {
    "text": "he sent a faad message uh",
    "start": "1922919",
    "end": "1928919"
  },
  {
    "text": "uh no no you do not so the so so the way",
    "start": "1928919",
    "end": "1935840"
  },
  {
    "text": "this works uh well the peer that was sending",
    "start": "1935840",
    "end": "1942200"
  },
  {
    "text": "the data might have an A backlog in their outgoing queue which is going to cause delays for a whole lot of peers",
    "start": "1942200",
    "end": "1947600"
  },
  {
    "text": "and very important to get rid of that more important to get rid of that than to get your own data quickly",
    "start": "1947600",
    "end": "1954039"
  },
  {
    "text": "um uh so uh at one point someone new to my team uh uh we I was someone joined my",
    "start": "1954039",
    "end": "1962519"
  },
  {
    "text": "team right when we were switching to monotonic time I by the way don't use anything except monotonic time uh this",
    "start": "1962519",
    "end": "1971000"
  },
  {
    "text": "person who is new to my team and K Junior coder said well why don't you just make sure the machine's running ntp",
    "start": "1971000",
    "end": "1976559"
  },
  {
    "text": "and I said okay you're not allowed to ask that question ever again there's this myth that there's",
    "start": "1976559",
    "end": "1983399"
  },
  {
    "text": "this thing called time that there's this Global time that's accurate everywhere uh it doesn't exist uh in my",
    "start": "1983399",
    "end": "1992039"
  },
  {
    "text": "entire protocol there's only one place where I call true time and that's uh just to make it so that if you have",
    "start": "1992039",
    "end": "1997600"
  },
  {
    "text": "multiple sources uh they can kind of compare to see which one started later so the one that started earlier can go",
    "start": "1997600",
    "end": "2003159"
  },
  {
    "text": "away uh but everywhere else in the entire protocol I call monotonic time I have concept of what the actual time is",
    "start": "2003159",
    "end": "2009559"
  },
  {
    "text": "the only thing I know is that there are clock SKS between machines and delays and so if I'm",
    "start": "2009559",
    "end": "2018200"
  },
  {
    "text": "sending you data you can look at the data that I got sent to you and it'll have some delay the delay might be you",
    "start": "2018200",
    "end": "2023960"
  },
  {
    "text": "know three years and five months uh which is not necessarily a useful piece of information but if I",
    "start": "2023960",
    "end": "2030639"
  },
  {
    "text": "later on send you uh data which has a delay of 3 years 5 months and 100",
    "start": "2030639",
    "end": "2036480"
  },
  {
    "text": "milliseconds you can go oh that's 100 milliseconds more than before uh maybe there's some noise in the network here",
    "start": "2036480",
    "end": "2042639"
  },
  {
    "text": "and then if I send you one that's got a delay of 3 years 5 months and 300 milliseconds you go oh no that's",
    "start": "2042639",
    "end": "2048158"
  },
  {
    "text": "horrible that's too much delay um I I figured out some tricks here for",
    "start": "2048159",
    "end": "2054079"
  },
  {
    "text": "dealing with time time sucks by the way hate dealing with time spent way more",
    "start": "2054079",
    "end": "2059200"
  },
  {
    "text": "time dealing with time I never really cared to um uh in general a basic trick",
    "start": "2059200",
    "end": "2065800"
  },
  {
    "text": "you should know if you ever have to deal with networking and sending timestamps o o over the wire the appropriate way of",
    "start": "2065800",
    "end": "2071960"
  },
  {
    "text": "doing it is whenever send someone sends you a timestamp uh the way you send a",
    "start": "2071960",
    "end": "2077158"
  },
  {
    "text": "Tim stamp is it's two bytes which is in milliseconds modulo 2 to the 16th for",
    "start": "2077159",
    "end": "2084000"
  },
  {
    "text": "every single connection or every single Pier that you get a timestamp from what you do is you look at the last time they",
    "start": "2084000",
    "end": "2090720"
  },
  {
    "text": "sent you a timestamp and what you thought their time was uh and what their new time stamp is",
    "start": "2090720",
    "end": "2097160"
  },
  {
    "text": "now and you kind of guess about what the time stamp should be given the current thing and you find the nearest VA value",
    "start": "2097160",
    "end": "2104400"
  },
  {
    "text": "modulo 2 to the6th in milliseconds that that should be uh this results in this very nice behavior that uh your assumed",
    "start": "2104400",
    "end": "2113079"
  },
  {
    "text": "time from a given Pier at first is something close to zero and then it kind of just gradually increases over time",
    "start": "2113079",
    "end": "2119400"
  },
  {
    "text": "and about lock step with you and you don't get any thresholding thing where you're flipping back and forth between two values and suddenly jumping 2 to the",
    "start": "2119400",
    "end": "2126800"
  },
  {
    "text": "16th milliseconds or anything like that to the 16th milliseconds is almost a minute fine for my protocol cuz timeouts",
    "start": "2126800",
    "end": "2133359"
  },
  {
    "text": "are way quicker than that anyway just so as you know that's the right way to do it",
    "start": "2133359",
    "end": "2139880"
  },
  {
    "text": "um okay so the way you find a new",
    "start": "2139880",
    "end": "2144680"
  },
  {
    "text": "pier you send messages to all your current peers saying hey tell me about everybody you know in this club they",
    "start": "2145520",
    "end": "2151040"
  },
  {
    "text": "send you lists of everyone you know uh they also help you out with some natur reversal they have active connections to",
    "start": "2151040",
    "end": "2156359"
  },
  {
    "text": "these peers they tell that piery heay send a ping request to this person to poke open a hole in N turns out enough",
    "start": "2156359",
    "end": "2162520"
  },
  {
    "text": "peers are either behind open n or have up andp running that this works great",
    "start": "2162520",
    "end": "2169400"
  },
  {
    "text": "um uh you then pick which one to download from using this highly sophisticated technique of picking one",
    "start": "2169400",
    "end": "2177359"
  },
  {
    "text": "randomly um uh I I tried to be more clever about",
    "start": "2178160",
    "end": "2184400"
  },
  {
    "text": "this and uh in general when whenever you're working on her istics whenever",
    "start": "2184400",
    "end": "2189800"
  },
  {
    "text": "you think you're really smart and have come up with a heuristic for something it's always very very important that",
    "start": "2189800",
    "end": "2195240"
  },
  {
    "text": "among the heuristics you're testing out you try the exact opposite of what you think the right thing to do is uh",
    "start": "2195240",
    "end": "2200880"
  },
  {
    "text": "because that's frequently correct uh this was one of those cases",
    "start": "2200880",
    "end": "2207319"
  },
  {
    "text": "um uh the behavior here is not terribly obvious uh let's take a very simple",
    "start": "2207319",
    "end": "2214200"
  },
  {
    "text": "model on the top here where you have a pier and it's sending out data to its peers",
    "start": "2214200",
    "end": "2221359"
  },
  {
    "text": "and uh whenever a pier gets uh you know list of peers it just picks a random",
    "start": "2221359",
    "end": "2226839"
  },
  {
    "text": "Pier out there in the Swarm to start downloading from new um and then the way",
    "start": "2226839",
    "end": "2233880"
  },
  {
    "text": "the congestion control works is every time a pier uh comes to its full capacity something really horrible",
    "start": "2233880",
    "end": "2240440"
  },
  {
    "text": "happens and it drops every single connection out that it actually has in practice it's not quite that bad but",
    "start": "2240440",
    "end": "2245680"
  },
  {
    "text": "this is a reasonable first approximation what's going on uh then you get this pretty predictable Behavior where",
    "start": "2245680",
    "end": "2251839"
  },
  {
    "text": "regardless of the utilization regardless of the peer's upload capacity you get",
    "start": "2251839",
    "end": "2257119"
  },
  {
    "text": "the rate at which the pier is sending uploading uh um increasing linearly until it hits 100% And then drops down",
    "start": "2257119",
    "end": "2263960"
  },
  {
    "text": "to zero uh now what do you notice about the integral of this",
    "start": "2263960",
    "end": "2271480"
  },
  {
    "text": "curve it's it's 50% of the potential capacity that's not really all that bad",
    "start": "2271480",
    "end": "2277520"
  },
  {
    "text": "actually that's pretty good uh in practice when you have a large swarm and things aren't working quite so horribly",
    "start": "2277520",
    "end": "2285440"
  },
  {
    "text": "uh what tends to happen and again I'm being cartoonish here is um uh just due to an artifact",
    "start": "2285440",
    "end": "2294920"
  },
  {
    "text": "you asked what what's a big swarm I said a thousand peers peers wind up not knowing about every other Pier every time they do a thing uh in very large",
    "start": "2294920",
    "end": "2301760"
  },
  {
    "text": "swarms uh the peers that have more connections will tend to get downloaded from more just because when you're",
    "start": "2301760",
    "end": "2306839"
  },
  {
    "text": "asking for the total list of peers they come up more often um there are various",
    "start": "2306839",
    "end": "2312119"
  },
  {
    "text": "hacks that could improve this uh they would likely screw things up on small",
    "start": "2312119",
    "end": "2317520"
  },
  {
    "text": "swarms I haven't really messed with trying to fix it all that much um uh and let's say that the so so",
    "start": "2317520",
    "end": "2324480"
  },
  {
    "text": "your current your increase in rate instead of being linear is a little more",
    "start": "2324480",
    "end": "2329640"
  },
  {
    "text": "exponential and then when you hit 100% it drops down to let's say 50% instead of zero because it doesn't drop every",
    "start": "2329640",
    "end": "2336160"
  },
  {
    "text": "single connection some of them drop and they drop quickly enough that the the remaining ones don't drop and so this is",
    "start": "2336160",
    "end": "2342760"
  },
  {
    "text": "more kind of what you get and this is more the intergral this is more like 3/4s the remaining stuff here is kind of",
    "start": "2342760",
    "end": "2349280"
  },
  {
    "text": "necessary Headroom not doing too badly actually",
    "start": "2349280",
    "end": "2354480"
  },
  {
    "text": "um so that's how the congestion control works yes if you're collecting this list",
    "start": "2354480",
    "end": "2360200"
  },
  {
    "text": "of peers how bigger impact on the bandwidth is that",
    "start": "2360200",
    "end": "2365480"
  },
  {
    "text": "nothing you just you have like um on the order of around 10 maybe 15",
    "start": "2365480",
    "end": "2374240"
  },
  {
    "text": "connections to peers you send a message to each of them asking for all their peers in the club they all send",
    "start": "2374240",
    "end": "2380720"
  },
  {
    "text": "responses you send ping to all those um so that's around 100 packets with around",
    "start": "2380720",
    "end": "2387920"
  },
  {
    "text": "I don't know 30 bytes each maybe um so that's three kilobytes total for finding",
    "start": "2387920",
    "end": "2393920"
  },
  {
    "text": "a new pier not a big deal if you're going to pick one randomly why do you ask the peers for their full list",
    "start": "2393920",
    "end": "2400680"
  },
  {
    "text": "connection since just saying why don't you pick one randomly and send me one you get 15 oh CU you don't know if",
    "start": "2400680",
    "end": "2406720"
  },
  {
    "text": "they'll you don't know if you'll succeed in pinging them you don't know you don't know if you'll succeed in pinging them",
    "start": "2406720",
    "end": "2412160"
  },
  {
    "text": "you do ping all of them yourself to make sure that natur reversal is working to make sure that they've been up reasonably recently and",
    "start": "2412160",
    "end": "2419000"
  },
  {
    "text": "also you pick one randomly if that one doesn't work you'll work off that list uh yeah that would be more you",
    "start": "2419000",
    "end": "2427800"
  },
  {
    "text": "could try and optimize this a bit but that would be more roundtrip timey stuff you could just you know use the very first one that you got uh but that would",
    "start": "2427800",
    "end": "2434520"
  },
  {
    "text": "tend to bias towards particular peers that have low latencies and stuff I suppose I could make it so that every",
    "start": "2434520",
    "end": "2439880"
  },
  {
    "text": "single Pier you go to would only send you a single one in response that wouldn't really fundamentally change how the overall protocol works though just",
    "start": "2439880",
    "end": "2446160"
  },
  {
    "text": "because in the case where you only wind up getting a few peers in your responses your overall behavior is going to be the",
    "start": "2446160",
    "end": "2451440"
  },
  {
    "text": "same anyway and you're going to have to wait the same amount of time before picking one so how long average does it take you to get that list back oh it",
    "start": "2451440",
    "end": "2458640"
  },
  {
    "text": "just Waits a second before picking one okay so it doesn't have it doesn't have any concept of checking to see if it's",
    "start": "2458640",
    "end": "2464599"
  },
  {
    "text": "gotten all of its responses it just Waits a second after it started the whole process before picking",
    "start": "2464599",
    "end": "2470760"
  },
  {
    "text": "one and if it doesn't have a list of them it just starts the process over again at that",
    "start": "2470760",
    "end": "2477280"
  },
  {
    "text": "point this is in many ways not a very sophisticated protocol",
    "start": "2477800",
    "end": "2483720"
  },
  {
    "text": "um uh it's all hacks and emergent Behavior",
    "start": "2483720",
    "end": "2488880"
  },
  {
    "text": "uh okay now you need to prioritize your data like I said before uh you want to send your in-club",
    "start": "2488880",
    "end": "2495720"
  },
  {
    "text": "data first so let's say that you have six outgoing connections and uh this is saying what",
    "start": "2495720",
    "end": "2502040"
  },
  {
    "text": "pieces of data the peers need these are the lat latest piece of data you've",
    "start": "2502040",
    "end": "2507079"
  },
  {
    "text": "gotten and these are earlier pieces of data and your in club peers already have",
    "start": "2507079",
    "end": "2512319"
  },
  {
    "text": "most of the data your out of Club Pi don't have quite so much of the data and",
    "start": "2512319",
    "end": "2517920"
  },
  {
    "text": "the order in which you send data to them is the order in which I've numbered here you round robin between peers the idea",
    "start": "2517920",
    "end": "2523920"
  },
  {
    "text": "being that each Pier should keep the current latency that it has if one Pier is playing with very low latency you",
    "start": "2523920",
    "end": "2529680"
  },
  {
    "text": "want to send it stuff relatively quickly if one Pier is playing with high latency it's okay to take longer to send it stuff round robing peers preserves that",
    "start": "2529680",
    "end": "2537040"
  },
  {
    "text": "across peers um and of course you oh you send",
    "start": "2537040",
    "end": "2542079"
  },
  {
    "text": "the earlier data first and oh wait oops sorry",
    "start": "2542079",
    "end": "2550559"
  },
  {
    "text": "uh um and well that's what you do here so you see it goes I've numbered them",
    "start": "2550559",
    "end": "2556440"
  },
  {
    "text": "one two three four five six uh just sticking within club and round rining",
    "start": "2556440",
    "end": "2562680"
  },
  {
    "text": "and then it goes to the out of club and goes 7 8 9 10 11 12 13 14 15 16 17 18 19",
    "start": "2562680",
    "end": "2568359"
  },
  {
    "text": "20 21 uh reasonably straightforward um of course it's",
    "start": "2568359",
    "end": "2574000"
  },
  {
    "text": "unlikely that you would go that whole entire time without getting any new data in uh but that's the order you'd go if",
    "start": "2574000",
    "end": "2580319"
  },
  {
    "text": "you never got any new data the whole time you're sending those out",
    "start": "2580319",
    "end": "2585480"
  },
  {
    "text": "um oh by the way I didn't do these beautiful diagrams you might have gathered by uh my difficulty of setting",
    "start": "2585480",
    "end": "2592359"
  },
  {
    "text": "things up I don't really do AV at all um uh some people I work with decided I should have better presentation so they",
    "start": "2592359",
    "end": "2598880"
  },
  {
    "text": "insisted that I scw some diagrams with which actual professionals who I work with made into these very pretty diagrams you see here they should be",
    "start": "2598880",
    "end": "2606040"
  },
  {
    "text": "iterated on a bit more but but thanks to Taka on my team for actually making this looks nice um so um there's an exception",
    "start": "2606040",
    "end": "2615520"
  },
  {
    "text": "to this you you get this case again this is something that I found in the",
    "start": "2615520",
    "end": "2620640"
  },
  {
    "text": "emulator which would have really been which is hard enough to find in the emulator would have been a real nightmare to try and find on a running",
    "start": "2620640",
    "end": "2626440"
  },
  {
    "text": "system uh you can get this interesting phenomenon where the source only has one",
    "start": "2626440",
    "end": "2631640"
  },
  {
    "text": "outof Club outgoing connection and that outgoing connection gets starved out this can be very very bad",
    "start": "2631640",
    "end": "2637839"
  },
  {
    "text": "uh CU that one Pier is just going to not play ever um so to get rid of that problem you have this exception where",
    "start": "2637839",
    "end": "2645160"
  },
  {
    "text": "you make sure every 10th packet is out of Club so this is a case here where you have just the one outof Club connection",
    "start": "2645160",
    "end": "2651800"
  },
  {
    "text": "and you see it is round robing in in club but after it gets to nine it just sends number 10 out of Club just",
    "start": "2651800",
    "end": "2657839"
  },
  {
    "text": "literally if it just sent nine in club in a row number 10 goes out of club and",
    "start": "2657839",
    "end": "2663160"
  },
  {
    "text": "then it goes back to normal prioritization kind of a hack it",
    "start": "2663160",
    "end": "2669240"
  },
  {
    "text": "works uh prevents some really bad starvation that could happen um in case you're wondering how I got",
    "start": "2669240",
    "end": "2676200"
  },
  {
    "text": "the every 10th packet same thing as before I I did actually test it and",
    "start": "2676200",
    "end": "2681640"
  },
  {
    "text": "wound up using one out of 10 I'm pretty good at that little game of making up numbers yes you just Happ to get up",
    "start": "2681640",
    "end": "2689200"
  },
  {
    "text": "early in the morning have breakfast and notice these things or you have some way of systematic more systematic way of finding them I run emulated tests which",
    "start": "2689200",
    "end": "2697720"
  },
  {
    "text": "display eyeball them yes I eyeball them they have all kinds of numbers that they spit out and stuff as they're running",
    "start": "2697720",
    "end": "2704880"
  },
  {
    "text": "and um which is utterly inscrutable to everyone but me and someone on my team",
    "start": "2704880",
    "end": "2710240"
  },
  {
    "text": "is actually adding headers and stuff to label what everything is so you can see what's going on uh with",
    "start": "2710240",
    "end": "2716079"
  },
  {
    "text": "that um uh and I notice bad things happening like I'll just run a situ",
    "start": "2716079",
    "end": "2721559"
  },
  {
    "text": "simulation and notice that really an emulation because the peers don't the peers don't know that they're in a computer",
    "start": "2721559",
    "end": "2727599"
  },
  {
    "text": "um the uh I'll notice that like one Pier has very high latency or that one Pier",
    "start": "2727599",
    "end": "2733040"
  },
  {
    "text": "quit which didn't make any sense because there's plenty of bandwidth or it seems like there should be plenty of bandwidth so long oh well what if I increase so",
    "start": "2733040",
    "end": "2738839"
  },
  {
    "text": "there's plenty of bandwidth for everyone and then still happens oh how' that happen I start running it or sometimes I'll have something which only happens",
    "start": "2738839",
    "end": "2744760"
  },
  {
    "text": "in one run but because I have this magical deterministic emulation I can do that run over and over and over again",
    "start": "2744760",
    "end": "2749960"
  },
  {
    "text": "really figure out exactly what's going on that's how I find this stuff I find the thought of trying",
    "start": "2749960",
    "end": "2755599"
  },
  {
    "text": "to like do this without that like nightmarish horrifying I would never even try yes is",
    "start": "2755599",
    "end": "2762160"
  },
  {
    "text": "this a good time to talk about clubs and your designed for them or you going to hit that later clubs I I talked about",
    "start": "2762160",
    "end": "2767800"
  },
  {
    "text": "clubs already you said like these guys are in one club and there are other clubs but you didn't really talk much",
    "start": "2767800",
    "end": "2773359"
  },
  {
    "text": "about there's six clubs oh okay that's it every peer is a member of One Club okay that's all there",
    "start": "2773359",
    "end": "2781160"
  },
  {
    "text": "is to say about clubs okay when a new peer comes in it picks a random Club to be a member of",
    "start": "2781160",
    "end": "2787760"
  },
  {
    "text": "okay uh in order to try and make it so that there's approximately equal numbers of peers in every Club the tracker will",
    "start": "2787760",
    "end": "2793079"
  },
  {
    "text": "give a hint the way the tracker gives a hint is it takes the last Hint it handed out and adds one to",
    "start": "2793079",
    "end": "2798559"
  },
  {
    "text": "it okay",
    "start": "2798559",
    "end": "2804359"
  },
  {
    "text": "um okay uh finally you reconstruct your data and play back uh which is kind of a",
    "start": "2804359",
    "end": "2811000"
  },
  {
    "text": "trivial thing um uh well actually no it's not trivial all it's horrible um",
    "start": "2811000",
    "end": "2818680"
  },
  {
    "text": "the uh uh this has a lot to do with time again and local CPU delays and who knows",
    "start": "2818680",
    "end": "2826119"
  },
  {
    "text": "what um uh so to First approximation you don't do skips ever just you get data",
    "start": "2826119",
    "end": "2832720"
  },
  {
    "text": "comes in and you play it out um if the next piece of data that you're scheduled to play isn't here locally you wait for",
    "start": "2832720",
    "end": "2840480"
  },
  {
    "text": "it and then you play and you reset your delay to now be based on how long it",
    "start": "2840480",
    "end": "2845839"
  },
  {
    "text": "took for you to get the data so it's your new latency um you of course can't",
    "start": "2845839",
    "end": "2850960"
  },
  {
    "text": "do that at the very start uh you need to decide when it's okay to start this is how you decide when it's okay to start",
    "start": "2850960",
    "end": "2857800"
  },
  {
    "text": "um you I don't know if you can see I'm numbering the packets from the upper left just counting in read order down to",
    "start": "2857800",
    "end": "2865119"
  },
  {
    "text": "the lower right this is typically the spread of packets that you'll get you're downloading from peers Who start sending",
    "start": "2865119",
    "end": "2871160"
  },
  {
    "text": "you at differing points they send you everything sequentially you get these kind of vertical stripes of stuff as",
    "start": "2871160",
    "end": "2877359"
  },
  {
    "text": "soon as you have six contiguous packets uh in this case it would start at 78 over here because 78 through 83 is six",
    "start": "2877359",
    "end": "2884800"
  },
  {
    "text": "contiguous packets you start playing there that's where you start your reconstruction and then you start",
    "start": "2884800",
    "end": "2890680"
  },
  {
    "text": "playback um uh I hate CPU delays um whenever",
    "start": "2890680",
    "end": "2900240"
  },
  {
    "text": "you get uh data whenever you wake up from asleep you don't generally wake up when",
    "start": "2900240",
    "end": "2906359"
  },
  {
    "text": "you to you wake up later sometimes you wake up earlier especially in Windows machines anyway uh you I'm not kidding",
    "start": "2906359",
    "end": "2915680"
  },
  {
    "text": "um no you're not um uh you always always",
    "start": "2915680",
    "end": "2921200"
  },
  {
    "text": "always remember when it was you were supposed to wake up so you you wake up to send a piece of data you just send",
    "start": "2921200",
    "end": "2926800"
  },
  {
    "text": "the piece of data out for playback and then you schedule the next piece of data uh to be sent out but you schedule it",
    "start": "2926800",
    "end": "2933440"
  },
  {
    "text": "when it was supposed to happen not based on the delta in time from the current one to that one because you need to",
    "start": "2933440",
    "end": "2938760"
  },
  {
    "text": "correct for CPU delays there's a very very big exception to",
    "start": "2938760",
    "end": "2944079"
  },
  {
    "text": "this which is if you didn't have any data to send out before and you do now",
    "start": "2944079",
    "end": "2950000"
  },
  {
    "text": "because you'd caught up uh then you send the next piece of dat because you were",
    "start": "2950000",
    "end": "2955040"
  },
  {
    "text": "waiting for the next piece of data you uh then send it out immediately and set",
    "start": "2955040",
    "end": "2962440"
  },
  {
    "text": "the playback delay to be the current delay based on that one piece of data CPU delays be",
    "start": "2962440",
    "end": "2969000"
  },
  {
    "text": "damned it took me way too long to figure that out that's the right way of doing things um uh so you can't completely get",
    "start": "2969000",
    "end": "2976920"
  },
  {
    "text": "away without having skips forever uh you do occasionally actually lose a piece of",
    "start": "2976920",
    "end": "2983359"
  },
  {
    "text": "data um the uh and you and just no amount of",
    "start": "2983359",
    "end": "2989839"
  },
  {
    "text": "just waiting for it will make it will make it come in uh to account for that if you are frozen I that should say",
    "start": "2989839",
    "end": "2997160"
  },
  {
    "text": "frozen rather than delayed but if you're Frozen for more than 2 seconds uh you go into desperation mode which basically is",
    "start": "2997160",
    "end": "3003079"
  },
  {
    "text": "the mode that you started with when you first started Play Back in the first place",
    "start": "3003079",
    "end": "3010119"
  },
  {
    "text": "um uh and occasionally you can run into a situation where you got delayed a",
    "start": "3010119",
    "end": "3016000"
  },
  {
    "text": "large amount at some time in the distant past and that appear and you continued playing at a high delay ever since then",
    "start": "3016000",
    "end": "3023799"
  },
  {
    "text": "and it seems like it's not necessary anymore you don't have any terribly good options here you can keep playing at a",
    "start": "3023799",
    "end": "3030000"
  },
  {
    "text": "high latency forever you can skip a couple of seconds of video uh or you can",
    "start": "3030000",
    "end": "3037200"
  },
  {
    "text": "play back sped up I play back sped up currently set to 10% I should probably",
    "start": "3037200",
    "end": "3042520"
  },
  {
    "text": "change it to five um all right finally after that thing uh that by the",
    "start": "3042520",
    "end": "3050480"
  },
  {
    "text": "way is had to do with what I call the smoother hate working on the smoother it's most hated part of my own code base",
    "start": "3050480",
    "end": "3057200"
  },
  {
    "text": "uh finally uh you wait for a key frame uh I mention this because it",
    "start": "3057200",
    "end": "3064119"
  },
  {
    "text": "sucks um key frames are typically people don't",
    "start": "3064119",
    "end": "3069319"
  },
  {
    "text": "like putting key frames in their video because it hurts the compression on",
    "start": "3069319",
    "end": "3074960"
  },
  {
    "text": "their video as a result of which you will typically get key frames every I don't know 8 16 seconds which will",
    "start": "3074960",
    "end": "3081240"
  },
  {
    "text": "result in uh waiting for a key frame to do your playback like literally my protocol is",
    "start": "3081240",
    "end": "3089520"
  },
  {
    "text": "working great it's getting the data it's ready to play the data it's sitting there waiting for a key frame so it",
    "start": "3089520",
    "end": "3096119"
  },
  {
    "text": "takes like 8 seconds to start playback and the user thinks it's playing with a delay of 8 seconds no it's playing with",
    "start": "3096119",
    "end": "3101640"
  },
  {
    "text": "a delay of 3 seconds I just had to wait 6 seconds for a key frame after I",
    "start": "3101640",
    "end": "3106720"
  },
  {
    "text": "actually started my playback it sucks uh this is kind of a deep problem in general uh it's the reason why changing",
    "start": "3106720",
    "end": "3113359"
  },
  {
    "text": "channels on Cable sucks by the way uh they don't like in key frames either they do send key frames every like",
    "start": "3113359",
    "end": "3120400"
  },
  {
    "text": "second uh just so that it doesn't just freeze every time you change channels because they have this problem too but",
    "start": "3120400",
    "end": "3126839"
  },
  {
    "text": "when you're just flipping channels you definitely notice it that's why it takes longer to change channels now than it did 20 years ago in case you were",
    "start": "3126839",
    "end": "3134079"
  },
  {
    "text": "wondering um latencies in general have gone have slid backwards horribly across",
    "start": "3134079",
    "end": "3139960"
  },
  {
    "text": "the board uh people interrupt each other on the phone all the time these days and it's not that people have gotten more",
    "start": "3139960",
    "end": "3145880"
  },
  {
    "text": "rude I suppose they probably have um it's because the round trip time on",
    "start": "3145880",
    "end": "3151680"
  },
  {
    "text": "phone calls has gone up uh it turns out a roundt trip time of a third of a",
    "start": "3151680",
    "end": "3158119"
  },
  {
    "text": "second on a phone call is kind of manageable turns out by an interesting Cosmic coincidence due to the speed of",
    "start": "3158119",
    "end": "3163880"
  },
  {
    "text": "light uh you kind of need close to a third of a second uh rtt on a phone call",
    "start": "3163880",
    "end": "3169440"
  },
  {
    "text": "if you're going between New Zealand and Spain um I think they should just Plum a",
    "start": "3169440",
    "end": "3175799"
  },
  {
    "text": "line through the of the earth I'm told that's got some engineering challenges to it",
    "start": "3175799",
    "end": "3181319"
  },
  {
    "text": "um but uh but even if you're in the same city see the Telos decided in their",
    "start": "3181319",
    "end": "3187680"
  },
  {
    "text": "Infinite Wisdom that a third of a second was acceptable or a third of a second was good a third of second is not good",
    "start": "3187680",
    "end": "3194240"
  },
  {
    "text": "okay like less than 100 milliseconds for a human voice call kind of okay more",
    "start": "3194240",
    "end": "3199880"
  },
  {
    "text": "than that it starts getting annoying and a third of a second is like just on the edge of totally and utterly unacceptable",
    "start": "3199880",
    "end": "3206319"
  },
  {
    "text": "um so if you notice that you whenever you talk to people on cell phones and they're on cell phones which is every",
    "start": "3206319",
    "end": "3211400"
  },
  {
    "text": "call ever these days even when you're on the city same city you have this horrible roundtrip time on it and you'll",
    "start": "3211400",
    "end": "3217559"
  },
  {
    "text": "be interrupting each other all the time because you stop talking to give the other person a chance to talk uh you",
    "start": "3217559",
    "end": "3223799"
  },
  {
    "text": "wait 200 milliseconds which is plenty of time for them to respond they haven't responded yet because they haven't heard",
    "start": "3223799",
    "end": "3229040"
  },
  {
    "text": "you stop talking and then you start talking again and then they start talking over you and that's why people",
    "start": "3229040",
    "end": "3234160"
  },
  {
    "text": "interrupt each other on calls all the time uh you notice this like maell Park I don't",
    "start": "3234160",
    "end": "3241760"
  },
  {
    "text": "know what it's called these days it's obviously maell Park so I'll just call myell Park um if you're watching the",
    "start": "3241760",
    "end": "3247280"
  },
  {
    "text": "game and watching one of the videos they have there there there will be a video of the game that's happening 100 feet",
    "start": "3247280",
    "end": "3254119"
  },
  {
    "text": "away from you it's delayed by like two seconds like right there it used to be",
    "start": "3254119",
    "end": "3259200"
  },
  {
    "text": "you could sit in a baseball stadium not that I watch baseball but you could sit in a baseball stadium and if you were",
    "start": "3259200",
    "end": "3264319"
  },
  {
    "text": "sitting back in the bleachers you could be listening to the radio and you would",
    "start": "3264319",
    "end": "3269760"
  },
  {
    "text": "hear calls on what was happening in front of you before the sound of the play got to your ears but after you you",
    "start": "3269760",
    "end": "3276319"
  },
  {
    "text": "know saw it visually because it turns out the speed of sound isn't really all that fast uh and it's quite noticeable",
    "start": "3276319",
    "end": "3282400"
  },
  {
    "text": "when you're in the back bleachers um uh that don't that trick don't work no more uh turns out if you",
    "start": "3282400",
    "end": "3289040"
  },
  {
    "text": "really really want to optimize for latency well and truly like optimize for",
    "start": "3289040",
    "end": "3294760"
  },
  {
    "text": "latency across the board you basically go back and build the same that we had the 1950s is the way you optimize",
    "start": "3294760",
    "end": "3300599"
  },
  {
    "text": "for latency everywhere just no processing in the middle of anything no compression no nothing just straight",
    "start": "3300599",
    "end": "3308720"
  },
  {
    "text": "through analog gets great latency also really good if you want space aliens to be watching your TV",
    "start": "3308720",
    "end": "3315040"
  },
  {
    "text": "programs uh very very hard for space aliens to see anything if everyone's getting it over their local Wireless",
    "start": "3315040",
    "end": "3320680"
  },
  {
    "text": "because it's not loud enough for them to see on their giant telescopes anyway uh",
    "start": "3320680",
    "end": "3326319"
  },
  {
    "text": "that's see enough forting about least uh the uh so it's a problem for changing",
    "start": "3326319",
    "end": "3331400"
  },
  {
    "text": "account and that that's all I had to say actually so uh that's that's my talk does anyone",
    "start": "3331400",
    "end": "3339039"
  },
  {
    "text": "have any questions like about talking about this more in depth",
    "start": "3339039",
    "end": "3346319"
  },
  {
    "text": "no this is as much as I've put together on I will put together more in the future uh I'm also planning on uh making",
    "start": "3347760",
    "end": "3355640"
  },
  {
    "text": "uh the code available for the purposes of academic study um there's a patent",
    "start": "3355640",
    "end": "3361640"
  },
  {
    "text": "it's half right because it's kind of a moving Target and it's not it's written kind of in patentes um uh but what you",
    "start": "3361640",
    "end": "3370400"
  },
  {
    "text": "just saw is about as much information as is generally available now so if you have any questions you can ask yes",
    "start": "3370400",
    "end": "3376440"
  },
  {
    "text": "instead of that paper yes why not the other paper because you kept you kept dropping in these little this is what",
    "start": "3376440",
    "end": "3382680"
  },
  {
    "text": "you think you should do no no do this instead of doing a paper on this paper on how to do this I'm not sure",
    "start": "3382680",
    "end": "3389920"
  },
  {
    "text": "what you mean well you said Okay I I build build an emulator of the of the internet yeah and study uh always try",
    "start": "3389920",
    "end": "3397160"
  },
  {
    "text": "the opposite yeah all those things that's far more useful than this okay um",
    "start": "3397160",
    "end": "3404599"
  },
  {
    "text": "uh I I I guess um more fun yeah uh the the emulator is",
    "start": "3404599",
    "end": "3412119"
  },
  {
    "text": "with my code base actually and it is a really dumb piece of code um and people who actually know how the internet works",
    "start": "3412119",
    "end": "3418520"
  },
  {
    "text": "cringe horribly when I tell them the model of the internet in Bram world but",
    "start": "3418520",
    "end": "3423640"
  },
  {
    "text": "uh see see in Bram world the backbone has infinite capacity uh and uh your latencies come",
    "start": "3423640",
    "end": "3431400"
  },
  {
    "text": "from a few places there's pacing delay on the actual peers because it doesn't send out data just because it doesn't feel like it because it's running",
    "start": "3431400",
    "end": "3437119"
  },
  {
    "text": "Windows CU I don't know it doesn't send it out for a while and then you have uh queuing delays on the router which data",
    "start": "3437119",
    "end": "3442440"
  },
  {
    "text": "gets to basically instantaneously uh which can be like a couple seconds long and there can be",
    "start": "3442440",
    "end": "3447960"
  },
  {
    "text": "buffer bloat and y y y on that um and uh and then once data gets off of",
    "start": "3447960",
    "end": "3455960"
  },
  {
    "text": "that has a little bit of um uh serialization delay going out that's very small and then uh most under good",
    "start": "3455960",
    "end": "3462880"
  },
  {
    "text": "conditions most of the latency comes from the next thing which has to do with the speed of light everyone just kind of assumes that there's all this delay in",
    "start": "3462880",
    "end": "3468880"
  },
  {
    "text": "routing turns out it's not delay in routing is in micros seconds delay due to the speed of light is in milliseconds",
    "start": "3468880",
    "end": "3475039"
  },
  {
    "text": "um the speed of light isn't really all that fast uh if someone can figure out how to make the speed of light just like",
    "start": "3475039",
    "end": "3480200"
  },
  {
    "text": "one order of magnitude faster it would really make my life a lot easier either move everyone back onto the same",
    "start": "3480200",
    "end": "3485799"
  },
  {
    "text": "continent or make the speed of light one order of magnitude quicker would really just eliminate a huge number of",
    "start": "3485799",
    "end": "3491000"
  },
  {
    "text": "engineering challenges for me um and then you hit another que uh on the",
    "start": "3491000",
    "end": "3496680"
  },
  {
    "text": "receiving end and then someone place I think my emulator doesn't actually emulate a queue on the receiving end it",
    "start": "3496680",
    "end": "3502119"
  },
  {
    "text": "just assumes they're all super fast anyway in Bram world the backbone internet capacity is infinite so",
    "start": "3502119",
    "end": "3509599"
  },
  {
    "text": "yes or here you is this protocol open what is the protocol open like could I",
    "start": "3509599",
    "end": "3515520"
  },
  {
    "text": "write my own client no it is not it's not no I'm",
    "start": "3515520",
    "end": "3521280"
  },
  {
    "text": "uh it wouldn't really do me any good in practice these things tend to be",
    "start": "3521280",
    "end": "3527160"
  },
  {
    "text": "dominated by one implementation anyway and I really want to maintain the ability to um uh rev it over time and",
    "start": "3527160",
    "end": "3535359"
  },
  {
    "text": "also like bit torrent protocol this isn't really that resilient to peers being misbehaved uh so it's pretty easy",
    "start": "3535359",
    "end": "3542240"
  },
  {
    "text": "to write a peer that just doesn't really behave all that well and kind of screws up things for everybody else so I I I want to maintain a certain amount of",
    "start": "3542240",
    "end": "3547720"
  },
  {
    "text": "control over the whole things yes have you tried this on large networks like 10 million uh not 10 million I've tried it",
    "start": "3547720",
    "end": "3555280"
  },
  {
    "text": "on um you know thousands we've had a p networks of thousands of actual peers in",
    "start": "3555280",
    "end": "3561079"
  },
  {
    "text": "the wild actually watching something of their own free will uh we also ran a whole bunch on ec2 which is you know",
    "start": "3561079",
    "end": "3566680"
  },
  {
    "text": "kind of an artificial situation I think we only got up to like 8,000 peers on it cuz we used all the available ec2",
    "start": "3566680",
    "end": "3573119"
  },
  {
    "text": "instances at that moment um but um but that worked we were able to get that to",
    "start": "3573119",
    "end": "3579119"
  },
  {
    "text": "work fine as well that was also a very useful form of testing uh to do um but yeah",
    "start": "3579119",
    "end": "3586240"
  },
  {
    "text": "the uh uh the we've gotten up to a scale where I don't anticipate any changes as",
    "start": "3586240",
    "end": "3591960"
  },
  {
    "text": "it gets larger really yeah you tried comparing against other products like stream Tor and vetle",
    "start": "3591960",
    "end": "3598559"
  },
  {
    "text": "and other yeah it's they're not even comparable it's it's a",
    "start": "3598559",
    "end": "3604599"
  },
  {
    "text": "blowout yes do you have any plans to use web RTC what is web RTC uh it's just like",
    "start": "3604960",
    "end": "3612280"
  },
  {
    "text": "peer-to-peer thing in the browser the new it's a new web",
    "start": "3612280",
    "end": "3618039"
  },
  {
    "text": "standard AIO video oh oh that stuff isn't really useful for me cuz that's",
    "start": "3618039",
    "end": "3624200"
  },
  {
    "text": "for like Point too video and I need actual connections myself I basically need to be able to send UDP",
    "start": "3624200",
    "end": "3630240"
  },
  {
    "text": "traffic if I can't actually send UDP traffic I can't do my",
    "start": "3630240",
    "end": "3635440"
  },
  {
    "text": "protocol yeah how much of your model assumes it's okay to lose content periodically and how much is trying to",
    "start": "3635520",
    "end": "3642640"
  },
  {
    "text": "are you trying to maintain I I try to get it all back I I just do resounds so like there's all this stuff on being",
    "start": "3642640",
    "end": "3648920"
  },
  {
    "text": "able to handle packet loss uh which isn't really that useful for what I'm doing it's really useful if you're doing",
    "start": "3648920",
    "end": "3654640"
  },
  {
    "text": "an interactive like video chat with somebody yeah um but there you're",
    "start": "3654640",
    "end": "3659760"
  },
  {
    "text": "talking about you know less than a third of second round trip time and here my delays are like on the order of around 5",
    "start": "3659760",
    "end": "3665720"
  },
  {
    "text": "Seconds yeah hopefully less but could be around 5 seconds and that gives you",
    "start": "3665720",
    "end": "3671359"
  },
  {
    "text": "enough time to ask for resent and things like that so you have this fail over time in the middle so I mean there's a",
    "start": "3671359",
    "end": "3676480"
  },
  {
    "text": "certain amount of model of accuracy you're looking for in television which is that uh if you glitched a second or",
    "start": "3676480",
    "end": "3682079"
  },
  {
    "text": "two well you know it's television uh but uh yeah yeah I I appear to actually",
    "start": "3682079",
    "end": "3687920"
  },
  {
    "text": "glitch a lot less than like YouTube does um okay uh definitely a lot less than",
    "start": "3687920",
    "end": "3694119"
  },
  {
    "text": "most streaming services do it's actually really hard to get your glitching under control in general so I'm very very",
    "start": "3694119",
    "end": "3699720"
  },
  {
    "text": "conservative about making it so that when you do get glitches they're freezes",
    "start": "3699720",
    "end": "3705000"
  },
  {
    "text": "and then they happen very very rarely that you get a freeze and then you don't get a freeze again for a really really",
    "start": "3705000",
    "end": "3711039"
  },
  {
    "text": "long time um where other things will actually drop data and stuff and I really really try",
    "start": "3711039",
    "end": "3717559"
  },
  {
    "text": "hard to never actually drop data you always get the data it just might be delayed a little bit and you always get it on exactly the schedule that you",
    "start": "3717559",
    "end": "3722920"
  },
  {
    "text": "should or other things try and play games where they get down to the wire and stuff and I'm not I'm not doing that",
    "start": "3722920",
    "end": "3727960"
  },
  {
    "text": "I'm being a lot more conservative yes so",
    "start": "3727960",
    "end": "3733119"
  },
  {
    "text": "um as I understand I guess each Pier needs to have about 10 times as much",
    "start": "3733119",
    "end": "3738279"
  },
  {
    "text": "Upstream bandwidth as no no no no no each Pier should probably really have",
    "start": "3738279",
    "end": "3744000"
  },
  {
    "text": "around let's say a third of the uh bit rate and Upstream capacity you can get",
    "start": "3744000",
    "end": "3749839"
  },
  {
    "text": "away with less on individual peers but they'll have constant sh it's kind of annoying um The Source should have 10",
    "start": "3749839",
    "end": "3756319"
  },
  {
    "text": "times s The Source really should have four times but it caps itself at 10 by",
    "start": "3756319",
    "end": "3761480"
  },
  {
    "text": "default so I think right now it's cing 20 but is that is that an amount that's",
    "start": "3761480",
    "end": "3768000"
  },
  {
    "text": "you know practicable for a lot of you know if a lot of people are watching it on cell phones or something is that is",
    "start": "3768000",
    "end": "3774240"
  },
  {
    "text": "that a cell phones are Toler well Wireless net connections",
    "start": "3774240",
    "end": "3780440"
  },
  {
    "text": "Wireless net connections are kind of a problem they behave really really badly uh in particular they have crazy erratic",
    "start": "3780440",
    "end": "3788000"
  },
  {
    "text": "ping times I I don't even know how they manage to pull that off but they do like I I I don't like even if you have high",
    "start": "3788000",
    "end": "3794559"
  },
  {
    "text": "loss it doesn't cause high ping times I do not know what they're doing to cause erratic ping times that makes no sense",
    "start": "3794559",
    "end": "3800720"
  },
  {
    "text": "to me they're doing lowle retransmissions what doing lowle ransmission they're trying to cover",
    "start": "3800720",
    "end": "3806440"
  },
  {
    "text": "oh okay they should they should stop doing that they complain about us just as much",
    "start": "3806440",
    "end": "3812680"
  },
  {
    "text": "okay all right fine yeah anyway the uh so it only",
    "start": "3812680",
    "end": "3817720"
  },
  {
    "text": "really works when you're on Wi-Fi or reasonable Net Connection of some kind um",
    "start": "3817720",
    "end": "3825160"
  },
  {
    "text": "the um uh I forgot I was I was going with",
    "start": "3825200",
    "end": "3831880"
  },
  {
    "text": "that I guess I was lead to oh oh work when some peers have less",
    "start": "3831880",
    "end": "3838480"
  },
  {
    "text": "than that oh yeah yeah yeah yeah no no it does in fact have congestion only kind of it does in fact have congestion",
    "start": "3838480",
    "end": "3844680"
  },
  {
    "text": "control so in order to for its in club data each Pier needs uh some minimum amount of connectivity in principle if a",
    "start": "3844680",
    "end": "3851359"
  },
  {
    "text": "pier discovered that it was really bad it could just kind of not even do in club but it's rare for upload download",
    "start": "3851359",
    "end": "3858240"
  },
  {
    "text": "ratios to be so off that a peer that can't even handle that will actually be able to even watch the Stream So they",
    "start": "3858240",
    "end": "3863480"
  },
  {
    "text": "tend to kick themselves out completely um uh uh but a pier will happily only do",
    "start": "3863480",
    "end": "3871000"
  },
  {
    "text": "its in club uh connectivity and have zero outof club connections going out uh",
    "start": "3871000",
    "end": "3876480"
  },
  {
    "text": "and that will cause other peers to have more outof Club connections going out you have to have out of Club connections",
    "start": "3876480",
    "end": "3882200"
  },
  {
    "text": "to receive five six of the packets what don't you need to have out out of Club connections to get yeah incoming you do",
    "start": "3882200",
    "end": "3888480"
  },
  {
    "text": "not outgoing so each Pier will have right two or three incoming and two or three outgoing in club and then out of",
    "start": "3888480",
    "end": "3895960"
  },
  {
    "text": "Club it'll have five incoming right and between zero and infinity",
    "start": "3895960",
    "end": "3901599"
  },
  {
    "text": "outgoing okay I see say and generally fast peers have a lot of outgoing and slow peers have many fewer",
    "start": "3901599",
    "end": "3909319"
  },
  {
    "text": "and that that's how the congestion control works and then it's it's very very noisy um uh I bet a lot of",
    "start": "3909319",
    "end": "3915720"
  },
  {
    "text": "firewalls would freak out about this really badly because it exhibits churn",
    "start": "3915720",
    "end": "3920880"
  },
  {
    "text": "rates which are not supposed to happen in any known protocol yes",
    "start": "3920880",
    "end": "3926520"
  },
  {
    "text": "uh does this support like the video quality changing depending on the user's connection speed",
    "start": "3926520",
    "end": "3932880"
  },
  {
    "text": "uh no so it's just whatever the broadcaster decides to broadcast yeah",
    "start": "3932880",
    "end": "3937920"
  },
  {
    "text": "you can you can broadcast two different swarms of different bit rates which is what tends to be done in fact even things like Justin.tv tend to just give",
    "start": "3937920",
    "end": "3944160"
  },
  {
    "text": "you two options and then if one kicks out you as the user go oh I want the other one but that that fragment the",
    "start": "3944160",
    "end": "3950520"
  },
  {
    "text": "network right so then now you have half as many people sitting each uh well each Pier bring brings its own upload",
    "start": "3950520",
    "end": "3956559"
  },
  {
    "text": "capacity with its own download demand so the fragmentation isn't really a problem or anything okay right adds a little bit",
    "start": "3956559",
    "end": "3962240"
  },
  {
    "text": "of requirements to The Source in terms of having two things that needs to Source now it's not that big of a deal",
    "start": "3962240",
    "end": "3970520"
  }
]