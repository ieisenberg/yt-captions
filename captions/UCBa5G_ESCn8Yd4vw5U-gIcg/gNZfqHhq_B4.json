[
  {
    "start": "0",
    "end": "25000"
  },
  {
    "start": "0",
    "end": "890"
  },
  {
    "text": "OK, we're going to have an\nR session now in RStudio.",
    "start": "890",
    "end": "5150"
  },
  {
    "text": "We've learnt about some\ntechniques for fitting linear",
    "start": "5150",
    "end": "8660"
  },
  {
    "text": "regression models, and now we're\ngoing to see how we do it in R.",
    "start": "8660",
    "end": "12450"
  },
  {
    "text": "So you'll see I've got a session\nopen in RStudio with some",
    "start": "12450",
    "end": "17390"
  },
  {
    "text": "commands that I've already typed\nin, and I'm just going to go",
    "start": "17390",
    "end": "20270"
  },
  {
    "text": "through these with you, and\nwe'll see some of the features",
    "start": "20270",
    "end": "23330"
  },
  {
    "text": "in R for fitting\nregression models.",
    "start": "23330",
    "end": "24985"
  },
  {
    "start": "24985",
    "end": "28160"
  },
  {
    "start": "25000",
    "end": "178000"
  },
  {
    "text": "So here we are.",
    "start": "28160",
    "end": "31660"
  },
  {
    "text": "We've got a script\nwindow over here,",
    "start": "31660",
    "end": "34060"
  },
  {
    "text": "and we'll send commands\ndown to the console.",
    "start": "34060",
    "end": "37080"
  },
  {
    "text": "So first we'll do\nlibrary maths, which",
    "start": "37080",
    "end": "39310"
  },
  {
    "text": "has some data sets that\nwe're going to access.",
    "start": "39310",
    "end": "43300"
  },
  {
    "text": "And then we'll go\nlibrary ISLR, which",
    "start": "43300",
    "end": "46210"
  },
  {
    "text": "is our own library with\ndata sets used in the book.",
    "start": "46210",
    "end": "50140"
  },
  {
    "text": "And so first of all, we'll\ndo simple linear regression.",
    "start": "50140",
    "end": "54370"
  },
  {
    "text": "So one of the data sets\nis the Boston data,",
    "start": "54370",
    "end": "57250"
  },
  {
    "text": "and it's got a\nbunch of variables.",
    "start": "57250",
    "end": "59720"
  },
  {
    "text": "And if you say\nnames of Boston, you",
    "start": "59720",
    "end": "61780"
  },
  {
    "text": "see all the names\nof the variables.",
    "start": "61780",
    "end": "63730"
  },
  {
    "text": "Well, they kind of\nabbreviated names,",
    "start": "63730",
    "end": "66080"
  },
  {
    "text": "and so if you want more detail,\nyou can ask for help on Boston.",
    "start": "66080",
    "end": "69680"
  },
  {
    "text": "So we do that by putting a\nquestion mark before Boston.",
    "start": "69680",
    "end": "72880"
  },
  {
    "text": "Boston's a data frame.",
    "start": "72880",
    "end": "74619"
  },
  {
    "text": "And in the right\npanel now, we see",
    "start": "74620",
    "end": "78430"
  },
  {
    "text": "the help file for the Boston.",
    "start": "78430",
    "end": "81290"
  },
  {
    "text": "So we see it's housing\nvalues in suburbs of Boston.",
    "start": "81290",
    "end": "84910"
  },
  {
    "text": "It's got 506 rows\nand 14 columns.",
    "start": "84910",
    "end": "89290"
  },
  {
    "text": "And now tells you details\nabout each of the variables.",
    "start": "89290",
    "end": "93080"
  },
  {
    "text": "So crim, for example, is per\ncapita crime rate by town,",
    "start": "93080",
    "end": "98990"
  },
  {
    "text": "zn is proportion of residential\nland zone for lots over 25,000",
    "start": "98990",
    "end": "103509"
  },
  {
    "text": "square, feet, and so on.",
    "start": "103510",
    "end": "106560"
  },
  {
    "text": "If you go down the\nlist, and these",
    "start": "106560",
    "end": "109070"
  },
  {
    "text": "are all features about\nthese regions in Boston,",
    "start": "109070",
    "end": "115370"
  },
  {
    "text": "and they sort of\nsummary features",
    "start": "115370",
    "end": "117140"
  },
  {
    "text": "that describe the socioeconomic\nconditions in those regions.",
    "start": "117140",
    "end": "122470"
  },
  {
    "text": "lstat, lower status of the\npopulation percentage,m",
    "start": "122470",
    "end": "126500"
  },
  {
    "text": "so it's a percentage of the\npopulation in that region",
    "start": "126500",
    "end": "129429"
  },
  {
    "text": "that's of lower status.",
    "start": "129430",
    "end": "131680"
  },
  {
    "text": "And medv is median value\nof owner occupied homes",
    "start": "131680",
    "end": "135819"
  },
  {
    "text": "in $100,000.",
    "start": "135820",
    "end": "137780"
  },
  {
    "text": "So you can do help\non dataframes.",
    "start": "137780",
    "end": "142360"
  },
  {
    "text": "So the first thing we do\nis we fit a linear model.",
    "start": "142360",
    "end": "145425"
  },
  {
    "start": "145425",
    "end": "148273"
  },
  {
    "text": "I beg your pardon,\nthe first thing we do",
    "start": "148273",
    "end": "149940"
  },
  {
    "text": "is plot some variables.",
    "start": "149940",
    "end": "152740"
  },
  {
    "text": "So we will plot medv and lstat,\nthe two variables we just",
    "start": "152740",
    "end": "157860"
  },
  {
    "text": "mentioned, and\ncomma Boston, which",
    "start": "157860",
    "end": "160860"
  },
  {
    "text": "tells the plot function to find\nthose variables in the data",
    "start": "160860",
    "end": "164370"
  },
  {
    "text": "frame, Boston.",
    "start": "164370",
    "end": "165519"
  },
  {
    "text": "And by using a twiddle\nbetween medv and lstat,",
    "start": "165520",
    "end": "168300"
  },
  {
    "text": "you actually telling it that\nreally the response is medv,",
    "start": "168300",
    "end": "171100"
  },
  {
    "text": "that's the median\nhousing value, it's",
    "start": "171100",
    "end": "176100"
  },
  {
    "text": "going to put that on\nthe vertical axis.",
    "start": "176100",
    "end": "178260"
  },
  {
    "start": "178000",
    "end": "535000"
  },
  {
    "text": "And so there's the\nplot on the right.",
    "start": "178260",
    "end": "180610"
  },
  {
    "text": "And sure enough, as the lower\nstatus in the region percentage",
    "start": "180610",
    "end": "188790"
  },
  {
    "text": "increases, the median\nhousing value decreases.",
    "start": "188790",
    "end": "192420"
  },
  {
    "text": "We'll fit a linear\nmodel now to those data,",
    "start": "192420",
    "end": "195330"
  },
  {
    "text": "and you'll see the formula is\nthe same as we used in the plot.",
    "start": "195330",
    "end": "198460"
  },
  {
    "text": "And we call that fit1,\nand there it's fit,",
    "start": "198460",
    "end": "201540"
  },
  {
    "text": "and then we'll print it out.",
    "start": "201540",
    "end": "203250"
  },
  {
    "text": "And it gives us an\nintercept and a coefficient.",
    "start": "203250",
    "end": "206050"
  },
  {
    "text": "And sure enough, the\ncoefficients negative,",
    "start": "206050",
    "end": "208610"
  },
  {
    "text": "as you can see, there's\na negative relationship.",
    "start": "208610",
    "end": "211420"
  },
  {
    "text": "So printing out a\nlinear model fit",
    "start": "211420",
    "end": "214420"
  },
  {
    "text": "gives you a very brief summary.",
    "start": "214420",
    "end": "216170"
  },
  {
    "text": "And for a more detailed summary,\nyou can say summary of fit.",
    "start": "216170",
    "end": "219550"
  },
  {
    "text": "And when we do that,\nwe get a lot more.",
    "start": "219550",
    "end": "222910"
  },
  {
    "text": "So we get residuals.",
    "start": "222910",
    "end": "225730"
  },
  {
    "text": "Some of it's got cut off here.",
    "start": "225730",
    "end": "227425"
  },
  {
    "text": "And if you just look\nup, you'll see you get",
    "start": "227425",
    "end": "229690"
  },
  {
    "text": "the call that created the fit.",
    "start": "229690",
    "end": "231520"
  },
  {
    "start": "231520",
    "end": "235060"
  },
  {
    "text": "And then you get\nthe coefficients,",
    "start": "235060",
    "end": "237099"
  },
  {
    "text": "their standard errors,\nt values, and p values.",
    "start": "237100",
    "end": "241850"
  },
  {
    "text": "And both of these\nare very significant.",
    "start": "241850",
    "end": "244390"
  },
  {
    "text": "We typically not interested\ntoo much in the intercept,",
    "start": "244390",
    "end": "247010"
  },
  {
    "text": "it's the coefficient of lstat\nthat we're interested here,",
    "start": "247010",
    "end": "250000"
  },
  {
    "text": "and it's negative and\nvery significantly so.",
    "start": "250000",
    "end": "252650"
  },
  {
    "text": "And then there's some other\nsubmarine material underneath,",
    "start": "252650",
    "end": "255500"
  },
  {
    "text": "which we'll maybe\ntouch on a bit later.",
    "start": "255500",
    "end": "258829"
  },
  {
    "text": "OK, so the nice thing, so\nnotice in the formula here,",
    "start": "258829",
    "end": "265010"
  },
  {
    "text": "we had the response\non the left hand side.",
    "start": "265010",
    "end": "267540"
  },
  {
    "text": "Twiddle means is modeled\nas, and then Lstat",
    "start": "267540",
    "end": "272060"
  },
  {
    "text": "is the single\npredictor in this case.",
    "start": "272060",
    "end": "273930"
  },
  {
    "text": "And then we give\nthe name of the data",
    "start": "273930",
    "end": "275660"
  },
  {
    "text": "frame where these\nvariables can be found.",
    "start": "275660",
    "end": "277860"
  },
  {
    "text": "So that's a standard format\nfor fitting linear models.",
    "start": "277860",
    "end": "280783"
  },
  {
    "text": "And there are other options\ntoo, but for the moment,",
    "start": "280783",
    "end": "282949"
  },
  {
    "text": "we won't need them.",
    "start": "282950",
    "end": "286420"
  },
  {
    "text": "Now we can add that linear\nmodel fit to the plot.",
    "start": "286420",
    "end": "289820"
  },
  {
    "text": "And there's a\nfunction called abline",
    "start": "289820",
    "end": "292150"
  },
  {
    "text": "in R, which is able to pick up\na linear model and just do that.",
    "start": "292150",
    "end": "297199"
  },
  {
    "text": "And you'll see in\nthe right hand plot",
    "start": "297200",
    "end": "299020"
  },
  {
    "text": "it was augmented with the line\nthat corresponds to the fit.",
    "start": "299020",
    "end": "305504"
  },
  {
    "start": "305505",
    "end": "309200"
  },
  {
    "text": "Now we've done various\nthings with the fit,",
    "start": "309200",
    "end": "312270"
  },
  {
    "text": "we've plotted it\nwith this ab line.",
    "start": "312270",
    "end": "314250"
  },
  {
    "text": "We've looked at it with\nsummary, and with print",
    "start": "314250",
    "end": "316670"
  },
  {
    "text": "by just printing its name.",
    "start": "316670",
    "end": "318290"
  },
  {
    "text": "You can see what other\ncomponents on it,",
    "start": "318290",
    "end": "320510"
  },
  {
    "text": "it actually has got\nquite a few components.",
    "start": "320510",
    "end": "322980"
  },
  {
    "text": "These are largely to do with the\ndetails of fitting the model,",
    "start": "322980",
    "end": "325940"
  },
  {
    "text": "and we won't trouble\nourselves too much with them.",
    "start": "325940",
    "end": "328620"
  },
  {
    "text": "But basically, you can see\nthe coefficients on the fit,",
    "start": "328620",
    "end": "332630"
  },
  {
    "text": "and that was picked\nup by the summary.",
    "start": "332630",
    "end": "335000"
  },
  {
    "text": "And then a whole\nlot of other things",
    "start": "335000",
    "end": "336500"
  },
  {
    "text": "that are used rather\ninternally, so we won't really",
    "start": "336500",
    "end": "340250"
  },
  {
    "text": "concern ourselves with them.",
    "start": "340250",
    "end": "342740"
  },
  {
    "text": "Confint finds your confidence\ninterval for the fit.",
    "start": "342740",
    "end": "348650"
  },
  {
    "text": "And in this case, it\ngives a confidence",
    "start": "348650",
    "end": "350330"
  },
  {
    "text": "interval for the coefficients,\nand by default, it",
    "start": "350330",
    "end": "352970"
  },
  {
    "text": "gives the lower 25% and\nupper 97.5% balance,",
    "start": "352970",
    "end": "359240"
  },
  {
    "text": "so this is a 95%\nconfidence interval",
    "start": "359240",
    "end": "361910"
  },
  {
    "text": "for each of those coefficients.",
    "start": "361910",
    "end": "363600"
  },
  {
    "start": "363600",
    "end": "367260"
  },
  {
    "text": "The predict function is\nanother one of these methods",
    "start": "367260",
    "end": "370800"
  },
  {
    "text": "that we can use to query\na linear model fit.",
    "start": "370800",
    "end": "375240"
  },
  {
    "text": "In this game case,\nwe're going to predict",
    "start": "375240",
    "end": "377970"
  },
  {
    "text": "with three new values for lstat,\nor three particular values,",
    "start": "377970",
    "end": "381810"
  },
  {
    "text": "5, 10 and 15.",
    "start": "381810",
    "end": "383410"
  },
  {
    "text": "And we're going to not\nonly ask for predictions,",
    "start": "383410",
    "end": "385620"
  },
  {
    "text": "we're going to ask for\na confidence interval.",
    "start": "385620",
    "end": "387720"
  },
  {
    "text": "So those are additional\narguments to predict.",
    "start": "387720",
    "end": "390900"
  },
  {
    "text": "And when we do that, we get\nthe fit at those three values,",
    "start": "390900",
    "end": "395699"
  },
  {
    "text": "and then the lower\nconfidence interval",
    "start": "395700",
    "end": "398100"
  },
  {
    "text": "and the upper confidence band.",
    "start": "398100",
    "end": "401730"
  },
  {
    "text": "And so you can give as\nmany values as you like",
    "start": "401730",
    "end": "405090"
  },
  {
    "text": "and get this lower\nand upper values.",
    "start": "405090",
    "end": "408990"
  },
  {
    "text": "So that's simple\nlinear regression,",
    "start": "408990",
    "end": "411449"
  },
  {
    "text": "let's move on to multiple\nlinear regression.",
    "start": "411450",
    "end": "413890"
  },
  {
    "text": "And now we fit a\nlinear model, fit2,",
    "start": "413890",
    "end": "416070"
  },
  {
    "text": "which is going to be a linear\nmodel with lstat and age,",
    "start": "416070",
    "end": "420300"
  },
  {
    "text": "and then we separate those\nwith a plus in the right hand",
    "start": "420300",
    "end": "422729"
  },
  {
    "text": "side of the formula.",
    "start": "422730",
    "end": "424800"
  },
  {
    "text": "And we can fit that\nand do a summary.",
    "start": "424800",
    "end": "428800"
  },
  {
    "text": "Well, let's just much\nlike we had before,",
    "start": "428800",
    "end": "431250"
  },
  {
    "text": "except now we've got two\ncoefficients, two standard,",
    "start": "431250",
    "end": "434400"
  },
  {
    "text": "plus the intercept,\nso three altogether,",
    "start": "434400",
    "end": "436440"
  },
  {
    "text": "with their standard errors,\nt value and p values.",
    "start": "436440",
    "end": "439860"
  },
  {
    "text": "And age is also significant,\nquite strongly So, but not as",
    "start": "439860",
    "end": "443759"
  },
  {
    "text": "significant as lstat.",
    "start": "443760",
    "end": "445435"
  },
  {
    "start": "445435",
    "end": "448540"
  },
  {
    "text": "One of the things down\nbelow is the R squared,",
    "start": "448540",
    "end": "451450"
  },
  {
    "text": "which we talked about\nas well for the model.",
    "start": "451450",
    "end": "454840"
  },
  {
    "text": "Remember, R squared,\nit's the higher,",
    "start": "454840",
    "end": "456730"
  },
  {
    "text": "the better, It's the\npercentage of variance",
    "start": "456730",
    "end": "459370"
  },
  {
    "text": "explained, and it also gives\nyou other summary of the model.",
    "start": "459370",
    "end": "466360"
  },
  {
    "text": "The F statistic\nis the F statistic",
    "start": "466360",
    "end": "468340"
  },
  {
    "text": "that we'd obtain if we dropped\nout both of the predictors",
    "start": "468340",
    "end": "470889"
  },
  {
    "text": "in this model.",
    "start": "470890",
    "end": "471510"
  },
  {
    "start": "471510",
    "end": "474900"
  },
  {
    "text": "For three, we're going to fit a\nlinear model with response medv,",
    "start": "474900",
    "end": "479970"
  },
  {
    "text": "and it goes twiddle dot.",
    "start": "479970",
    "end": "481860"
  },
  {
    "text": "And what that\nsignifies is that we're",
    "start": "481860",
    "end": "484259"
  },
  {
    "text": "supposed to use all the other\nvariables in the Boston data",
    "start": "484260",
    "end": "486960"
  },
  {
    "text": "frame, except medv,\nwhich is the response,",
    "start": "486960",
    "end": "489360"
  },
  {
    "text": "and all the others\nwill be predictors.",
    "start": "489360",
    "end": "492050"
  },
  {
    "text": "And sure enough, when we\ndo a summary of that model,",
    "start": "492050",
    "end": "495590"
  },
  {
    "text": "you see there's a\nlot of coefficients,",
    "start": "495590",
    "end": "498410"
  },
  {
    "text": "and they each get their\nestimate, their standard error,",
    "start": "498410",
    "end": "502400"
  },
  {
    "text": "their t value and the p value.",
    "start": "502400",
    "end": "505100"
  },
  {
    "text": "Most of them are\nsignificant, some are not.",
    "start": "505100",
    "end": "508370"
  },
  {
    "text": "Age now is no\nlonger significant.",
    "start": "508370",
    "end": "511190"
  },
  {
    "text": "So age, when it was in\nthe model just with lstat,",
    "start": "511190",
    "end": "515840"
  },
  {
    "text": "was significant.",
    "start": "515840",
    "end": "517229"
  },
  {
    "text": "But now it's in the model with\nall these other predictors,",
    "start": "517230",
    "end": "521990"
  },
  {
    "text": "and it's no longer significant.",
    "start": "521990",
    "end": "525200"
  },
  {
    "text": "What that means is,\nthere's basically",
    "start": "525200",
    "end": "526910"
  },
  {
    "text": "a lot of other predictors that\nare very correlated with age,",
    "start": "526910",
    "end": "530699"
  },
  {
    "text": "and in the presence of them,\nage is no longer required.",
    "start": "530700",
    "end": "535820"
  },
  {
    "start": "535000",
    "end": "919000"
  },
  {
    "text": "Let's do a plot.",
    "start": "535820",
    "end": "536880"
  },
  {
    "text": "You can plot linear models.",
    "start": "536880",
    "end": "538880"
  },
  {
    "text": "I made a two-by-two\nlayout, because I",
    "start": "538880",
    "end": "542450"
  },
  {
    "text": "know that four plots get\nproduced when you do a plot.",
    "start": "542450",
    "end": "546650"
  },
  {
    "text": "These are a little smaller,\nbut we can see what's going on.",
    "start": "546650",
    "end": "550170"
  },
  {
    "text": "These give you various\nviews of the linear model.",
    "start": "550170",
    "end": "553320"
  },
  {
    "text": "The first one is the residuals\nagainst the fitted values.",
    "start": "553320",
    "end": "557660"
  },
  {
    "text": "The vector of fitted values\nis just a single vector,",
    "start": "557660",
    "end": "560220"
  },
  {
    "text": "and so we can plot the\nresiduals against that.",
    "start": "560220",
    "end": "562639"
  },
  {
    "text": "And the reason we do that is,\nwe looking for non-linearities",
    "start": "562640",
    "end": "566030"
  },
  {
    "text": "and we kind know there's a\nnon-linearity in this one,",
    "start": "566030",
    "end": "568620"
  },
  {
    "text": "we saw that in the\nvery first plot.",
    "start": "568620",
    "end": "570440"
  },
  {
    "text": "And by the curve in\nthe residuals here,",
    "start": "570440",
    "end": "572900"
  },
  {
    "text": "we can see that the model is\nnot quite capturing everything",
    "start": "572900",
    "end": "576020"
  },
  {
    "text": "that's going on, there seems\nto be some non-linearity.",
    "start": "576020",
    "end": "579700"
  },
  {
    "text": "And there's other plots,\nwhich are somewhat",
    "start": "579700",
    "end": "583570"
  },
  {
    "text": "beyond the scope of what\nwe're doing here today",
    "start": "583570",
    "end": "587380"
  },
  {
    "text": "that give you aspects\nof the linear model fit.",
    "start": "587380",
    "end": "592120"
  },
  {
    "text": "This one here, is\nthis lower left one,",
    "start": "592120",
    "end": "594580"
  },
  {
    "text": "is the square root of the\nabsolute standardized residuals.",
    "start": "594580",
    "end": "598130"
  },
  {
    "text": "And one plots this\nto see perhaps",
    "start": "598130",
    "end": "601150"
  },
  {
    "text": "if the variance is changing\nwith the mean or the fit.",
    "start": "601150",
    "end": "606053"
  },
  {
    "text": "In this case, it looks like\nthere may be some relationship",
    "start": "606053",
    "end": "608470"
  },
  {
    "text": "there, but that could be a\nresult of the non-linearity",
    "start": "608470",
    "end": "611439"
  },
  {
    "text": "that we seem to have\nmissed in the model.",
    "start": "611440",
    "end": "614780"
  },
  {
    "text": "Update is a nice command.",
    "start": "614780",
    "end": "616320"
  },
  {
    "text": "You fit a model, fit3,\nand you can update it.",
    "start": "616320",
    "end": "620480"
  },
  {
    "text": "And in this case, we're going\nto update, the formula we give",
    "start": "620480",
    "end": "623959"
  },
  {
    "text": "is twiddle dot minus age.",
    "start": "623960",
    "end": "626270"
  },
  {
    "text": "Twiddle means\nnothing on the left,",
    "start": "626270",
    "end": "628408"
  },
  {
    "text": "means we're going to\nuse the same response.",
    "start": "628408",
    "end": "630200"
  },
  {
    "text": "Dot means whatever the model was\nin fit3, that's replaced in dot.",
    "start": "630200",
    "end": "636020"
  },
  {
    "text": "And minus age means\nwe want to remove age,",
    "start": "636020",
    "end": "639290"
  },
  {
    "text": "and minus in this we want\nto remove in this as well.",
    "start": "639290",
    "end": "642449"
  },
  {
    "text": "So this will fit the model with\nthose two variables removed,",
    "start": "642450",
    "end": "645830"
  },
  {
    "text": "all the others in.",
    "start": "645830",
    "end": "647490"
  },
  {
    "text": "And sure enough,\nif we do the fit,",
    "start": "647490",
    "end": "649800"
  },
  {
    "text": "we see that those two\nvariables are out.",
    "start": "649800",
    "end": "653019"
  },
  {
    "text": "And now everything\nthat's left in the model",
    "start": "653020",
    "end": "655410"
  },
  {
    "text": "appears to be significant.",
    "start": "655410",
    "end": "658879"
  },
  {
    "text": "Moving on, non-linearities\nand interactions.",
    "start": "658880",
    "end": "664600"
  },
  {
    "text": "The first thing we'll\ndo is make a fit",
    "start": "664600",
    "end": "666420"
  },
  {
    "text": "where we put an interaction\nbetween lstat and age.",
    "start": "666420",
    "end": "671250"
  },
  {
    "text": "And that we do with a star, like\nmultiply, but in this formula",
    "start": "671250",
    "end": "675990"
  },
  {
    "text": "language it means\nan interaction.",
    "start": "675990",
    "end": "678520"
  },
  {
    "text": "And we've just got those\ntwo variables in the model,",
    "start": "678520",
    "end": "681050"
  },
  {
    "text": "and so when we do a\nsummary of the fit,",
    "start": "681050",
    "end": "683080"
  },
  {
    "text": "we see that we get the\nmain effect for lstat,",
    "start": "683080",
    "end": "687990"
  },
  {
    "text": "a main effect for age, and\nthen the interaction, which",
    "start": "687990",
    "end": "691680"
  },
  {
    "text": "is represented as a colon.",
    "start": "691680",
    "end": "693730"
  },
  {
    "text": "So that star in\nthe formula means",
    "start": "693730",
    "end": "696720"
  },
  {
    "text": "that we're going to have\nmain effects for each",
    "start": "696720",
    "end": "698819"
  },
  {
    "text": "and the interaction,\nand the pure interaction",
    "start": "698820",
    "end": "700950"
  },
  {
    "text": "is indicated by colon.",
    "start": "700950",
    "end": "704640"
  },
  {
    "text": "And while the main effect for\nages is not significant here,",
    "start": "704640",
    "end": "709050"
  },
  {
    "text": "the interaction is\nsomewhat significant.",
    "start": "709050",
    "end": "713500"
  },
  {
    "text": "Next thing we do\nis we fit lstat.",
    "start": "713500",
    "end": "717520"
  },
  {
    "text": "And we saw that there was a\nnon-linear-looking scatter",
    "start": "717520",
    "end": "720790"
  },
  {
    "text": "plot between medv and lstat.",
    "start": "720790",
    "end": "724009"
  },
  {
    "text": "And so here we explicitly\nput in a quadratic term.",
    "start": "724010",
    "end": "728390"
  },
  {
    "text": "And there's two\nthings going on here,",
    "start": "728390",
    "end": "731600"
  },
  {
    "text": "the one is, quadratic we\nindicate by lstat, power two.",
    "start": "731600",
    "end": "737360"
  },
  {
    "text": "But power has a meaning\nin this formula language.",
    "start": "737360",
    "end": "740370"
  },
  {
    "text": "And so if you want\nit to be mean,",
    "start": "740370",
    "end": "742700"
  },
  {
    "text": "actually just raise\nlstat to the power 2,",
    "start": "742700",
    "end": "745100"
  },
  {
    "text": "we protect it with\nthis identity function.",
    "start": "745100",
    "end": "747750"
  },
  {
    "text": "So the formula language doesn't\ndig inside this identity",
    "start": "747750",
    "end": "750530"
  },
  {
    "text": "function, so it literally\nputs in the square of lstat.",
    "start": "750530",
    "end": "754430"
  },
  {
    "text": "And the other thing\nthat's going on here",
    "start": "754430",
    "end": "756260"
  },
  {
    "text": "is, we've put two commands in\none line, which you can do in R,",
    "start": "756260",
    "end": "759200"
  },
  {
    "text": "but you have to separate\nthem with semicolons.",
    "start": "759200",
    "end": "762030"
  },
  {
    "text": "So you can have as many commands\nin one line as you like,",
    "start": "762030",
    "end": "765140"
  },
  {
    "text": "but separate them\nwith semicolons. ,",
    "start": "765140",
    "end": "767930"
  },
  {
    "text": "And so both of those\ncommands got executed now.",
    "start": "767930",
    "end": "772520"
  },
  {
    "text": "And sure enough as no\nsurprise, both coefficients",
    "start": "772520",
    "end": "776890"
  },
  {
    "text": "are strongly significant,\nthe linear and the quadratic.",
    "start": "776890",
    "end": "782080"
  },
  {
    "text": "So now we're going to plot this.",
    "start": "782080",
    "end": "784910"
  },
  {
    "text": "What I do now is attach\nBoston, we've seen this before.",
    "start": "784910",
    "end": "788220"
  },
  {
    "text": "It means that the named\nvariables in Boston",
    "start": "788220",
    "end": "792170"
  },
  {
    "text": "are available in our\ndata space, it just",
    "start": "792170",
    "end": "795649"
  },
  {
    "text": "makes it easier for\nmaking nice looking plots.",
    "start": "795650",
    "end": "799520"
  },
  {
    "text": "We go back to a single\npane plot layout,",
    "start": "799520",
    "end": "802950"
  },
  {
    "text": "so par mf row equals c11, it\nmeans a one-by-one layout.",
    "start": "802950",
    "end": "807290"
  },
  {
    "text": "And now we'll plot our two\nvariables, there they are,",
    "start": "807290",
    "end": "811829"
  },
  {
    "text": "we've seen that plot before.",
    "start": "811830",
    "end": "813200"
  },
  {
    "text": "And now we'll include\nthe quadratic fit.",
    "start": "813200",
    "end": "818060"
  },
  {
    "text": "Now we can't use abline anymore,\nbecause that only works when",
    "start": "818060",
    "end": "822950"
  },
  {
    "text": "you've got a straight line fit.",
    "start": "822950",
    "end": "824570"
  },
  {
    "text": "Now we need to somehow\nget the fitted values",
    "start": "824570",
    "end": "826760"
  },
  {
    "text": "from our quadratic fit and\ninclude them in the plot.",
    "start": "826760",
    "end": "829760"
  },
  {
    "text": "And so we do that with\nthe points command.",
    "start": "829760",
    "end": "832350"
  },
  {
    "text": "And the first argument\nis lstat itself.",
    "start": "832350",
    "end": "836300"
  },
  {
    "text": "And the second argument are\nthe fitted values from fit6.",
    "start": "836300",
    "end": "839880"
  },
  {
    "text": "that was our quadratic fit.",
    "start": "839880",
    "end": "841440"
  },
  {
    "text": "So the fitted values are,\nfor each value of lstat,",
    "start": "841440",
    "end": "844428"
  },
  {
    "text": "it's the fitted\nvalue from the model.",
    "start": "844428",
    "end": "845970"
  },
  {
    "text": "So that's exactly\nwhat we want, and that",
    "start": "845970",
    "end": "847636"
  },
  {
    "text": "will be plotted as\na series of points.",
    "start": "847637",
    "end": "849650"
  },
  {
    "text": "And we tell it the\ncolor should be red.",
    "start": "849650",
    "end": "852740"
  },
  {
    "text": "And the pch, which is the\nplotting character, is to be 20,",
    "start": "852740",
    "end": "860520"
  },
  {
    "text": "let's see what it\ndoes for us first.",
    "start": "860520",
    "end": "862380"
  },
  {
    "text": "Well, it puts the\nquadratic fit in the plot.",
    "start": "862380",
    "end": "867170"
  },
  {
    "text": "Looks like the\nplotting character, 20,",
    "start": "867170",
    "end": "869750"
  },
  {
    "text": "is a little round ball.",
    "start": "869750",
    "end": "873090"
  },
  {
    "text": "We'll have a little\nlook in a moment",
    "start": "873090",
    "end": "875300"
  },
  {
    "text": "and see a bit more about that.",
    "start": "875300",
    "end": "878040"
  },
  {
    "text": "Before we do that,\nthere's an easier",
    "start": "878040",
    "end": "880560"
  },
  {
    "text": "way of fitting\npolynomials, and that's",
    "start": "880560",
    "end": "882660"
  },
  {
    "text": "to use the poly function\nin R. And so here",
    "start": "882660",
    "end": "885569"
  },
  {
    "text": "we're going to fit medv as a\npolynomial of degree 4 in lstat.",
    "start": "885570",
    "end": "891430"
  },
  {
    "text": "And we'll add that to\nthe plot with color blue.",
    "start": "891430",
    "end": "896270"
  },
  {
    "text": "And you can see that the fourth\ndegree polynomial is getting",
    "start": "896270",
    "end": "901460"
  },
  {
    "text": "a little bit too\nwiggly, it's starting",
    "start": "901460",
    "end": "904730"
  },
  {
    "text": "to overfit the data\nlittle bit, especially",
    "start": "904730",
    "end": "906709"
  },
  {
    "text": "you can see in the\nright tail over here",
    "start": "906710",
    "end": "909230"
  },
  {
    "text": "it's maybe going after these\nrather isolated points here.",
    "start": "909230",
    "end": "919680"
  },
  {
    "start": "919000",
    "end": "934000"
  },
  {
    "text": "So before we end, let's have a\nlook at what plotting characters",
    "start": "919680",
    "end": "923730"
  },
  {
    "text": "are available.",
    "start": "923730",
    "end": "924399"
  },
  {
    "text": "So here's a simple way\nof seeing them all.",
    "start": "924400",
    "end": "927090"
  },
  {
    "text": "Plot 1 to 20, 1 to m and\nplotting characters 1 to 20.",
    "start": "927090",
    "end": "931690"
  },
  {
    "text": "And we can see the whole lot.",
    "start": "931690",
    "end": "933180"
  },
  {
    "text": "And there you see them.",
    "start": "933180",
    "end": "934870"
  },
  {
    "text": "And so you have\navailable a whole bunch",
    "start": "934870",
    "end": "936990"
  },
  {
    "text": "of plotting characters, actually\nmore than these, and number 20",
    "start": "936990",
    "end": "939899"
  },
  {
    "text": "was sure enough,\nthis one over here.",
    "start": "939900",
    "end": "941910"
  },
  {
    "text": "And cex equals 2\nmeans that we want",
    "start": "941910",
    "end": "945209"
  },
  {
    "text": "to enlarge those\nplotting characters by 2,",
    "start": "945210",
    "end": "950220"
  },
  {
    "text": "we want to double the size.",
    "start": "950220",
    "end": "951425"
  },
  {
    "start": "951425",
    "end": "953950"
  },
  {
    "text": "Qualitative predictors.",
    "start": "953950",
    "end": "955990"
  },
  {
    "text": "So Carseats is another\none of the data sets.",
    "start": "955990",
    "end": "960415"
  },
  {
    "start": "960415",
    "end": "969048"
  },
  {
    "text": "So the command fix is a way\nof throwing up an editor in R.",
    "start": "969049",
    "end": "974280"
  },
  {
    "text": "So you can actually look at the\ndata that you're about to use,",
    "start": "974280",
    "end": "976900"
  },
  {
    "text": "so it'll throw up a data\nframe and allow you to use it.",
    "start": "976900",
    "end": "979980"
  },
  {
    "text": "And so here's the car seats data\nframe thrown up on the screen,",
    "start": "979980",
    "end": "984300"
  },
  {
    "text": "maybe a little bit\nsmall for you to use.",
    "start": "984300",
    "end": "986680"
  },
  {
    "text": "Just wanted to show you that.",
    "start": "986680",
    "end": "988320"
  },
  {
    "text": "I'll quit out of that, and I'll\nget back to our RStudio session.",
    "start": "988320",
    "end": "992280"
  },
  {
    "start": "992280",
    "end": "995290"
  },
  {
    "start": "994000",
    "end": "1104000"
  },
  {
    "text": "So that's one way\nof seeing the data.",
    "start": "995290",
    "end": "997339"
  },
  {
    "text": "There's the names of Carseats.",
    "start": "997340",
    "end": "1001110"
  },
  {
    "text": "And so this was a study\non children's car seats.",
    "start": "1001110",
    "end": "1006570"
  },
  {
    "text": "You can also do a\nsummary of a data frame.",
    "start": "1006570",
    "end": "1010320"
  },
  {
    "text": "And for each\nvariable, it tells you",
    "start": "1010320",
    "end": "1016290"
  },
  {
    "text": "something about the\nvalues in the data",
    "start": "1016290",
    "end": "1018839"
  },
  {
    "text": "frame for that variable.",
    "start": "1018840",
    "end": "1020770"
  },
  {
    "text": "And you can see, for\nquantitative variables,",
    "start": "1020770",
    "end": "1024069"
  },
  {
    "text": "it gives you summaries like\nthe mean, the median, and upper",
    "start": "1024069",
    "end": "1027699"
  },
  {
    "text": "and lower quantiles.",
    "start": "1027700",
    "end": "1029980"
  },
  {
    "text": "But for categorical or\nquantitative variables,",
    "start": "1029980",
    "end": "1033939"
  },
  {
    "text": "it actually gives you a\ntable of the distinct values.",
    "start": "1033940",
    "end": "1037809"
  },
  {
    "text": "So shelve lock is a quantitative\nvariable in this case.",
    "start": "1037810",
    "end": "1042314"
  },
  {
    "start": "1042315",
    "end": "1052224"
  },
  {
    "text": "So we'll fit a model\nfor the Carseats data.",
    "start": "1052224",
    "end": "1057050"
  },
  {
    "text": "and The first call\nis sales Twiddle dot,",
    "start": "1057050",
    "end": "1063540"
  },
  {
    "text": "means everything in the\nframe, but sales, plus we're",
    "start": "1063540",
    "end": "1066300"
  },
  {
    "text": "going to add in interactions\nbetween income and advertising,",
    "start": "1066300",
    "end": "1070200"
  },
  {
    "text": "and age and price.",
    "start": "1070200",
    "end": "1071554"
  },
  {
    "start": "1071555",
    "end": "1075270"
  },
  {
    "text": "And we do that.",
    "start": "1075270",
    "end": "1077250"
  },
  {
    "text": "And sure enough, they\nwe get the model.",
    "start": "1077250",
    "end": "1081030"
  },
  {
    "text": "And see what there's again, a\nbunch of significant variables.",
    "start": "1081030",
    "end": "1086140"
  },
  {
    "text": "And there are those two\ninteractions we put in.",
    "start": "1086140",
    "end": "1088470"
  },
  {
    "text": "And income and\nadvertising appears",
    "start": "1088470",
    "end": "1092010"
  },
  {
    "text": "to be strongly significant,\nbut price and age is not.",
    "start": "1092010",
    "end": "1095225"
  },
  {
    "start": "1095225",
    "end": "1105020"
  },
  {
    "start": "1104000",
    "end": "1217000"
  },
  {
    "text": "ShelveLoc was a\nqualitative variable.",
    "start": "1105020",
    "end": "1111050"
  },
  {
    "text": "If you look at\ncontrasts function,",
    "start": "1111050",
    "end": "1115700"
  },
  {
    "text": "it shows you how R will\ncode that variable when",
    "start": "1115700",
    "end": "1119840"
  },
  {
    "text": "it's put in a linear model.",
    "start": "1119840",
    "end": "1121520"
  },
  {
    "text": "And in this case, it's\na three-level factor,",
    "start": "1121520",
    "end": "1124800"
  },
  {
    "text": "and so it puts in\ntwo dummy variables.",
    "start": "1124800",
    "end": "1128720"
  },
  {
    "text": "And the values are if\nShelveLoc, is bad, 0 for both.",
    "start": "1128720",
    "end": "1137080"
  },
  {
    "text": "If it's good, the first one\nis 1, and the second one is 0.",
    "start": "1137080",
    "end": "1142590"
  },
  {
    "text": "If it's medium, you\nsee they named actually",
    "start": "1142590",
    "end": "1144510"
  },
  {
    "text": "good in medium, 0 and 1.",
    "start": "1144510",
    "end": "1147300"
  },
  {
    "text": "And so bad is not neither good\nnor medium, so that's 0 on both.",
    "start": "1147300",
    "end": "1151500"
  },
  {
    "text": "So that you can\nactually find out how",
    "start": "1151500",
    "end": "1154170"
  },
  {
    "text": "R codes quantitative variables.",
    "start": "1154170",
    "end": "1158070"
  },
  {
    "text": "So the final thing we'll do\nhere is see some examples",
    "start": "1158070",
    "end": "1162480"
  },
  {
    "text": "of writing R functions.",
    "start": "1162480",
    "end": "1164280"
  },
  {
    "text": "So let's write a little R\nfunction to fit a regression",
    "start": "1164280",
    "end": "1167610"
  },
  {
    "text": "model and make a plot.",
    "start": "1167610",
    "end": "1169559"
  },
  {
    "text": "So we start off\nby saying regplot",
    "start": "1169560",
    "end": "1172290"
  },
  {
    "text": "is equal to function of\nx, y, open curly brace.",
    "start": "1172290",
    "end": "1176420"
  },
  {
    "start": "1176420",
    "end": "1178930"
  },
  {
    "text": "So that open curly\nbrace indicates",
    "start": "1178930",
    "end": "1181420"
  },
  {
    "text": "that we're going to start\ngiving the code in our function.",
    "start": "1181420",
    "end": "1183880"
  },
  {
    "text": "And the x and y says\nour function is going",
    "start": "1183880",
    "end": "1186100"
  },
  {
    "text": "to take arguments, x and y.",
    "start": "1186100",
    "end": "1189647"
  },
  {
    "text": "And so the first\nthing we do is, we're",
    "start": "1189647",
    "end": "1191230"
  },
  {
    "text": "going to fit a linear\nmodel between y and x,",
    "start": "1191230",
    "end": "1193790"
  },
  {
    "text": "then we're going to\nplot x, y, and then",
    "start": "1193790",
    "end": "1196270"
  },
  {
    "text": "we're going to abline the\nfit with color equals red,",
    "start": "1196270",
    "end": "1199550"
  },
  {
    "text": "and then close curly brace,\nthat's the end of our function.",
    "start": "1199550",
    "end": "1204860"
  },
  {
    "text": "So it's a very simple little\nfunction, which we've written.",
    "start": "1204860",
    "end": "1208160"
  },
  {
    "text": "And so now let's try it out.",
    "start": "1208160",
    "end": "1209790"
  },
  {
    "text": "We'll attach Carseats,\nand we'll will do",
    "start": "1209790",
    "end": "1211940"
  },
  {
    "text": "a regplot of price and sales.",
    "start": "1211940",
    "end": "1214350"
  },
  {
    "text": "So it takes two arguments,\nwe've given it price in sales.",
    "start": "1214350",
    "end": "1218080"
  },
  {
    "start": "1217000",
    "end": "1330000"
  },
  {
    "text": "And you see the plot\non the right, regplot",
    "start": "1218080",
    "end": "1221169"
  },
  {
    "text": "silently went off and did\nthat, and produced the plot,",
    "start": "1221170",
    "end": "1223510"
  },
  {
    "text": "and put in the line.",
    "start": "1223510",
    "end": "1226240"
  },
  {
    "text": "Well, let's make our function\na little bit more useful.",
    "start": "1226240",
    "end": "1229390"
  },
  {
    "text": "And you can see I'm\ndefining it with essentially",
    "start": "1229390",
    "end": "1233350"
  },
  {
    "text": "the same commands,\nbut I've added",
    "start": "1233350",
    "end": "1238970"
  },
  {
    "text": "a dot dot dot in the arguments.",
    "start": "1238970",
    "end": "1240710"
  },
  {
    "text": "And this is a very\nuseful construct in R",
    "start": "1240710",
    "end": "1243110"
  },
  {
    "text": "when writing functions.",
    "start": "1243110",
    "end": "1244850"
  },
  {
    "text": "Dot dot dot means these\nare unnamed arguments,",
    "start": "1244850",
    "end": "1248360"
  },
  {
    "text": "but you're allowed to\nadd extra arguments,",
    "start": "1248360",
    "end": "1250460"
  },
  {
    "text": "and they'll get\npassed on exactly",
    "start": "1250460",
    "end": "1252350"
  },
  {
    "text": "as they supplied\nwherever they're",
    "start": "1252350",
    "end": "1254690"
  },
  {
    "text": "used inside the function.",
    "start": "1254690",
    "end": "1256340"
  },
  {
    "text": "And here I've passed them\non to the plot function.",
    "start": "1256340",
    "end": "1258990"
  },
  {
    "text": "And what that does\nis it allows us",
    "start": "1258990",
    "end": "1260600"
  },
  {
    "text": "to add extra arguments to the\nplot function via our regplot.",
    "start": "1260600",
    "end": "1265910"
  },
  {
    "text": "And so now when\nwe make the call,",
    "start": "1265910",
    "end": "1268190"
  },
  {
    "text": "we call regplot price and sales.",
    "start": "1268190",
    "end": "1271220"
  },
  {
    "text": "And we give it an\nx lab and y lab,",
    "start": "1271220",
    "end": "1274590"
  },
  {
    "text": "so that tells it how\nto annotate the labels",
    "start": "1274590",
    "end": "1277309"
  },
  {
    "text": "of the axes of the plot,\nand we add some color",
    "start": "1277310",
    "end": "1280700"
  },
  {
    "text": "and other information.",
    "start": "1280700",
    "end": "1282840"
  },
  {
    "text": "See, red plot just called\nthe axes, x and y, meanwhile,",
    "start": "1282840",
    "end": "1286640"
  },
  {
    "text": "our variables were\nwhere price and sales.",
    "start": "1286640",
    "end": "1289550"
  },
  {
    "text": "So now when we\nmake the plot, you",
    "start": "1289550",
    "end": "1293010"
  },
  {
    "text": "see the plot points\nwere colored in blue",
    "start": "1293010",
    "end": "1297210"
  },
  {
    "text": "and the axes were labeled.",
    "start": "1297210",
    "end": "1301200"
  },
  {
    "text": "So that's a little introduction\nto some of the linear model",
    "start": "1301200",
    "end": "1306480"
  },
  {
    "text": "software in R. The\nscope is really large,",
    "start": "1306480",
    "end": "1310020"
  },
  {
    "text": "and there's many other\nthings you can do.",
    "start": "1310020",
    "end": "1312430"
  },
  {
    "text": "But as always, with\nsoftware, you've",
    "start": "1312430",
    "end": "1314730"
  },
  {
    "text": "got to start at the beginning\nand get your hands dirty.",
    "start": "1314730",
    "end": "1317770"
  },
  {
    "text": "And so we've done that\na little bit here.",
    "start": "1317770",
    "end": "1319600"
  },
  {
    "text": "and I encourage you to\nplay with this yourself,",
    "start": "1319600",
    "end": "1322640"
  },
  {
    "text": "and explore the functions,\nuse the help files,",
    "start": "1322640",
    "end": "1326180"
  },
  {
    "text": "and see how far you can get.",
    "start": "1326180",
    "end": "1328700"
  },
  {
    "start": "1328700",
    "end": "1330000"
  }
]