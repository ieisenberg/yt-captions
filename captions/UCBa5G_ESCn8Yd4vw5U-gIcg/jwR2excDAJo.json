[
  {
    "start": "0",
    "end": "5510"
  },
  {
    "text": "Today we're going to\nshift gears a little bit. So up until maybe the\nlast three weeks or so--",
    "start": "5510",
    "end": "12715"
  },
  {
    "text": "for the last three\nweeks or we've been talking mostly about this\ntopic of failure analysis. So we did falsification.",
    "start": "12715",
    "end": "18420"
  },
  {
    "text": "We did the failure distribution. We looked at failure\nprobability estimation. And now we're going\nto switch gears",
    "start": "18420",
    "end": "23990"
  },
  {
    "text": "to this idea of formal\nmethods, where we're trying to,",
    "start": "23990",
    "end": "29330"
  },
  {
    "text": "more formally, get\nguarantees on system. So instead of trying to\nfind failures or estimate probabilities of\nfailure, here we're",
    "start": "29330",
    "end": "35300"
  },
  {
    "text": "actually trying to prove\nthe absence of failure. So under some set\nof assumptions, can we prove that our\nsystem will never fail?",
    "start": "35300",
    "end": "42055"
  },
  {
    "text": "And we're going to do that\nmostly through something called reachability. And before I jump in I want\nto give a disclaimer here.",
    "start": "42055",
    "end": "49260"
  },
  {
    "text": "So over the course\nof the quarter, I've been really concerned\nthat there was just",
    "start": "49260",
    "end": "56239"
  },
  {
    "text": "going to come some point where\nI just run out of jokes to tell, and then I just can't\nentertain you anymore.",
    "start": "56240",
    "end": "62489"
  },
  {
    "text": "Because I'm just like, I don't\nknow if I can keep this up. And to be honest, we've now come\nto our point of reachability.",
    "start": "62490",
    "end": "68920"
  },
  {
    "text": "And at this point, I don't know\nif that point has occurred, but I'm really reaching\nfor some jokes right now. [LAUGHTER]",
    "start": "68920",
    "end": "75240"
  },
  {
    "text": "I wasn't sure if I was\ngoing to get booed off the stage for that one. OK. So with that, let's get\nstarted on reachability.",
    "start": "75240",
    "end": "82840"
  },
  {
    "text": "So most of the stuff\nthat we've done so far has basically no\nguarantees with it.",
    "start": "82840",
    "end": "88000"
  },
  {
    "text": "So we've been able to\nsearch for failures and estimate these\nprobabilities and whatnot. But if we, let's say, ran\nour search for failure",
    "start": "88000",
    "end": "95220"
  },
  {
    "text": "for a long time and we\ndidn't find any failures, that didn't necessarily mean\nthat the system would never fail. It's just that we didn't\nnecessarily find them.",
    "start": "95220",
    "end": "102540"
  },
  {
    "text": "So that might be\nunsatisfactory to some of you. And so today, we're\ngoing to switch over",
    "start": "102540",
    "end": "108012"
  },
  {
    "text": "to this world of formal\nmethods where we can actually start getting some guarantees\non the behavior of our system.",
    "start": "108012",
    "end": "114720"
  },
  {
    "text": "And specifically, with\nreachability, what we want to do is we want to compute\nthe set of states",
    "start": "114720",
    "end": "120000"
  },
  {
    "text": "that a system could\nreach over time. And so we're going to use\nthis very simple system",
    "start": "120000",
    "end": "127140"
  },
  {
    "text": "that maybe some of\nyou who have taken controls classes or dynamics\nclasses have seen before. Basically, it's a mass\nspring damper system.",
    "start": "127140",
    "end": "134290"
  },
  {
    "text": "So we have this mass here. It's kind of square object. It's just some mass.",
    "start": "134290",
    "end": "140129"
  },
  {
    "text": "It's attached to a wall. And it's attached by this\nspring and this damper.",
    "start": "140130",
    "end": "145830"
  },
  {
    "text": "And basically, the spring acts\nlike a spring like that, maybe, you've seen before in the world. And then the damper\nis just something",
    "start": "145830",
    "end": "152305"
  },
  {
    "text": "you think of it like modeling\nair resistance or something like that. So this might look\na little weird, but it's actually\na very common model",
    "start": "152305",
    "end": "158482"
  },
  {
    "text": "that's used for many\nphysical systems, for example, like the\nsuspension on a car. And so this kind of\nsystem often comes up",
    "start": "158482",
    "end": "165540"
  },
  {
    "text": "in control theory\nand things like that. And here we're going to\nsay-- so this mass can move back and forth\nalong here, we're",
    "start": "165540",
    "end": "172170"
  },
  {
    "text": "ignoring any idea of gravity. And then we're going\nto say it fails if it ends up in this region.",
    "start": "172170",
    "end": "177820"
  },
  {
    "text": "So if it gets too close to the\nwall or it extends too far, that's a failure. And so then let's imagine now\nthat this mass is out here",
    "start": "177820",
    "end": "186189"
  },
  {
    "text": "and its actual resting position\nwith respect to the spring is right here. So we've kind of\nstretched it out here.",
    "start": "186190",
    "end": "192240"
  },
  {
    "text": "So let's say that we now let\ngo of whatever it's holding onto as it's stretched out. What do you guys think\nis going to happen?",
    "start": "192240",
    "end": "200448"
  },
  {
    "text": "Yeah, as [INAUDIBLE],\nthis it's going to oscillate back and forth. So that's what happens here. ",
    "start": "200448",
    "end": "208470"
  },
  {
    "text": "But we might not be\nsatisfied with that. We might actually want it to\nslow down a little bit faster or not oscillate as much.",
    "start": "208470",
    "end": "214740"
  },
  {
    "text": "And so we could add some\nsort of controller to this. Or in the terminology of this\nclass, we could add an agent.",
    "start": "214740",
    "end": "220270"
  },
  {
    "text": "And the agent is\nable to apply a force at this mass that can counteract\nwhat the spring and the damper",
    "start": "220270",
    "end": "225959"
  },
  {
    "text": "are doing. And ideally, it should make it\noscillate a little bit less. So if we look at what happens\nwhen we add this agent,",
    "start": "225960",
    "end": "235540"
  },
  {
    "text": "we get it to slow down\na little bit faster. So that's the system that\nwe're trying to validate.",
    "start": "235540",
    "end": "242210"
  },
  {
    "text": "And again, we don't want it\nto end up in these red regions and to make things a\nlittle bit more difficult and continue with the\nmodel of this class,",
    "start": "242210",
    "end": "248612"
  },
  {
    "text": "we're going to assume that\nthere's some sensor noise. So whatever agent is getting\nto apply the force to this mass",
    "start": "248612",
    "end": "253810"
  },
  {
    "text": "doesn't get to observe\nexactly where the mass is, and it just has some\nnoisy observation of it",
    "start": "253810",
    "end": "258940"
  },
  {
    "text": "with some additive sensor noise. So if we add in\nsome sensor noise, it's not able to\ndo quite as well,",
    "start": "258940",
    "end": "264919"
  },
  {
    "text": "but it's still able to\nkeep it in the center. But what happens if we\nadd a lot of sensor noise,",
    "start": "264920",
    "end": "271909"
  },
  {
    "text": "then the whole thing\nmight go crazy, and it does fail, et cetera. I had to add a lot of sensor\nnoise to make this happen.",
    "start": "271910",
    "end": "277759"
  },
  {
    "text": "So that's why sometimes\nyou don't even see it. It's all the way out\nhere or something. But the idea is\nthat at some point,",
    "start": "277760",
    "end": "283600"
  },
  {
    "text": "there's too much sensor noise\nand the thing could fail. And so we might want to know\nwhat is too much sensor noise.",
    "start": "283600",
    "end": "289370"
  },
  {
    "text": "How do we know how\nmuch we could have? And so maybe we\nask this question,",
    "start": "289370",
    "end": "294920"
  },
  {
    "text": "given a bound on the\nmaximum possible noise, can we prove that the\nsystem will never fail?",
    "start": "294920",
    "end": "302150"
  },
  {
    "text": "Or maybe we want to provide\na counterexample showing that a failure is possible. Because, of course, if\nthere is a failure possible,",
    "start": "302150",
    "end": "307500"
  },
  {
    "text": "then we're not going to be able\nto prove that it can't fail. And so typically, what\nthese formal methods do is return a counterexample\nin that case that says,",
    "start": "307500",
    "end": "314220"
  },
  {
    "text": "here's a trajectory\nwhere it does fail. And so we can answer questions\nlike this using reachability",
    "start": "314220",
    "end": "321620"
  },
  {
    "text": "analysis. So that's what we're going\nto start diving into today.",
    "start": "321620",
    "end": "327080"
  },
  {
    "text": "And to do this, there's\nno free lunch here. ",
    "start": "327080",
    "end": "333319"
  },
  {
    "text": "In all the previous lectures,\nwe were doing all this failure analysis blah, blah, blah.",
    "start": "333320",
    "end": "338392"
  },
  {
    "text": "But there were no guarantees\nthat come with it. Now we're going\nto get guarantees, but we have to make some\nassumptions in order",
    "start": "338392",
    "end": "343550"
  },
  {
    "text": "to actually get\nthose guarantees. So one assumption\nthat we're going to make in terms of\nthe mass spring damper",
    "start": "343550",
    "end": "349838"
  },
  {
    "text": "is we're going to\nsay we always start the mass with the\nposition between minus 0.2 and 0.2, whatever units\nyou want to apply here,",
    "start": "349838",
    "end": "356620"
  },
  {
    "text": "of its resting point. So we'll say its\nresting point is at 0. So we either squish it minus\n0.2 or we pull it out plus 0.2.",
    "start": "356620",
    "end": "364202"
  },
  {
    "text": "And we're going to assume\nit starts with no velocity. So we imagine we took\nthis and we squished it, and we're just\nabout to let it go,",
    "start": "364202",
    "end": "370160"
  },
  {
    "text": "and it starts with\nno velocity there. And then we're also going\nto make an assumption",
    "start": "370160",
    "end": "375550"
  },
  {
    "text": "that the maximum\nabsolute observation noise on the position\nand the velocity is one. So again, whatever units\nyou want to apply here.",
    "start": "375550",
    "end": "382870"
  },
  {
    "text": "But basically, we're bounding\nthe amount of observation noise we could have. So we're bounding how\nwrong our observation could",
    "start": "382870",
    "end": "389440"
  },
  {
    "text": "be about what the true\nstate of this mass is, what the true\nposition and velocity is.",
    "start": "389440",
    "end": "394699"
  },
  {
    "text": "And specifically, we can\nbe off by at most one is what we're saying. So this would be-- let's say, we have a sensor.",
    "start": "394700",
    "end": "399770"
  },
  {
    "text": "We generally know\nhow good it is. And we're saying we expect our\nsensor to be off by at most one.",
    "start": "399770",
    "end": "405910"
  },
  {
    "text": "So to make these things more\ngeneral, what we basically did was we just specified a\nbounded set of initial states,",
    "start": "405910",
    "end": "413000"
  },
  {
    "text": "and then we specified a\nbounded set of disturbances. So more generally, with\nrespect to other systems,",
    "start": "413000",
    "end": "419840"
  },
  {
    "text": "these are the general\nthings that we need to assume for\nreachability analysis.",
    "start": "419840",
    "end": "425810"
  },
  {
    "text": "So now let's look at\nwhat this looks like. So on this axis, we're showing\nthe position of the mass.",
    "start": "425810",
    "end": "432300"
  },
  {
    "text": "So that's where it was as it\nwas going back and forth there. On the vertical axis, we're\nshowing the speed of the mass.",
    "start": "432300",
    "end": "438690"
  },
  {
    "text": "Yeah? And we assume that we\nknow exactly the model and have no dynamics noise\nor something like this?",
    "start": "438690",
    "end": "444470"
  },
  {
    "text": "Yeah, we're assuming we know\nthe model and only noise is on the observation.",
    "start": "444470",
    "end": "450470"
  },
  {
    "text": "Yeah. We don't have to\nmake that assumption. We could add noise elsewhere. But I'll show the more\ngeneral formulation soon.",
    "start": "450470",
    "end": "458780"
  },
  {
    "text": "Yeah. We do have to assume we\nknow the model, though. Yeah. ",
    "start": "458780",
    "end": "464940"
  },
  {
    "text": "So we basically have velocity\non the vertical axis.",
    "start": "464940",
    "end": "470080"
  },
  {
    "text": "And then we're showing-- I said that it's a failure if\nits position exceeds some value.",
    "start": "470080",
    "end": "477129"
  },
  {
    "text": "So it either gets too squished,\nso it exceeds minus 0.3, or it extends too far,\nso it exceeds 0.3.",
    "start": "477130",
    "end": "484750"
  },
  {
    "text": "That would be like a failure\nso in these red regions. And we're going to start in\nthis set of initial states",
    "start": "484750",
    "end": "490560"
  },
  {
    "text": "where the position is\nbetween minus 0.2 and 0.2. And then we have 0 velocity.",
    "start": "490560",
    "end": "496479"
  },
  {
    "text": "So I've done here is just\ndraw a bunch of samples from this initial set of states.",
    "start": "496480",
    "end": "501840"
  },
  {
    "text": "So this represents\nthe set of states that we have at timestep one. And then we could\nimagine we just apply",
    "start": "501840",
    "end": "508595"
  },
  {
    "text": "the dynamics for the system,\nwhich I haven't really showed you, to figure out\nwhere that mass could end up",
    "start": "508595",
    "end": "515250"
  },
  {
    "text": "at the next time step. So here's all the\nposition and velocities that we get at the next time\nstep for all of these samples",
    "start": "515250",
    "end": "520440"
  },
  {
    "text": "that we started with. And then we could\njust keep doing this for some amount of time. And let's say that we're just\ninterested for some reason now,",
    "start": "520440",
    "end": "527730"
  },
  {
    "text": "and whether or not\nit's going to be safe at the first\nfor time steps. So we can now see what states it\nreaches over the first four time",
    "start": "527730",
    "end": "534860"
  },
  {
    "text": "steps. But the thing here is all we did\nwas just run a bunch of samples. So we just did basically a\nbunch of rollouts of depth four.",
    "start": "534860",
    "end": "542930"
  },
  {
    "text": "And we saw that\nnone of the samples ended up in this\nfailure region, but that doesn't guarantee that the\nsystem will never fail.",
    "start": "542930",
    "end": "548910"
  },
  {
    "text": "So again, this is\njust almost like we were doing falsification. We didn't find any failures. But that doesn't mean\nthat it will never fail.",
    "start": "548910",
    "end": "556130"
  },
  {
    "text": "And what we actually\nwant to do instead is see if we can compute\nthe full reachable set. So what is the\nfull set of states",
    "start": "556130",
    "end": "561710"
  },
  {
    "text": "that we could reach if we\nstarted in our initial set and applied these bounded\ndisturbances over time.",
    "start": "561710",
    "end": "567600"
  },
  {
    "text": "So that's what these kind\nof shapes in the background are showing. And I'll get rid of the samples\nso you can see it better.",
    "start": "567600",
    "end": "574010"
  },
  {
    "text": "So here our initial reachable\nset at time step one is just that initial\nset we started with. So we said, we're\nalways going to start",
    "start": "574010",
    "end": "580295"
  },
  {
    "text": "at a position between minus two\nand two and a velocity of 0. So it's just this line here. And then the next time step,\nwe get this shape here.",
    "start": "580295",
    "end": "588040"
  },
  {
    "text": "And this contains\nall possible states that the system could\nreach at time step two.",
    "start": "588040",
    "end": "593575"
  },
  {
    "text": "So I didn't tell you\nyet how to compute this. That's what we're going to be\nspending a lot of the lecture on. But that's the idea of\nwhat a reachable set is.",
    "start": "593575",
    "end": "601438"
  },
  {
    "text": "And then at time step 3,\nhere's all of the states that we could reach and\nat time step 4 and so on.",
    "start": "601438",
    "end": "606959"
  },
  {
    "text": "Is there any questions\nup to this point? Yeah. So you have here that the shape\nof it is fairly well defined.",
    "start": "606960",
    "end": "615209"
  },
  {
    "text": "Is it ever a particle\ninstantiated distribution or should we always have\nour initial state set",
    "start": "615210",
    "end": "622170"
  },
  {
    "text": "and disturbance, should\nthey all be in closed form? Here's the assumptions. Yeah, so the question is\nlike the representation",
    "start": "622170",
    "end": "628260"
  },
  {
    "text": "of the sets almost. These are all nice closed sets. We're going to talk in this\nlecture about what nice set",
    "start": "628260",
    "end": "634170"
  },
  {
    "text": "representation looks like. And I'll define in a second. But really, a set is just\na collection of points.",
    "start": "634170",
    "end": "639670"
  },
  {
    "text": "So in this case, it's a\ncollection of an infinite amount of points. And we have nice ways\nto describe that.",
    "start": "639670",
    "end": "644772"
  },
  {
    "text": "But sometimes, you could\njust write down a set as a collection of points,\nand it's kind of up to you how you want to\ndefine those things.",
    "start": "644773",
    "end": "650570"
  },
  {
    "text": "[INAUDIBLE] Yeah. So the lecture is called\nreachability for linear systems. But the assumptions you didn't\nspecify it, but I'm sure",
    "start": "650570",
    "end": "657879"
  },
  {
    "text": "we need to put some kind\nof lineary constraints or some continuity constraints\non our models, right?",
    "start": "657880",
    "end": "664490"
  },
  {
    "text": "Yeah. So the question was\nabout linearity. In this lecture, we are\ngoing to assume that.",
    "start": "664490",
    "end": "670315"
  },
  {
    "text": "But for right now,\nI'm just talking about what reachability is. And then when we talk about\nhow to compute these sets,",
    "start": "670315",
    "end": "675880"
  },
  {
    "text": "I'm going to give you methods. This lecture for linear systems. And then next lecture,\nwe'll talk about nonlinear.",
    "start": "675880",
    "end": "681350"
  },
  {
    "text": " So let's recap our\ngoal more generally",
    "start": "681350",
    "end": "688090"
  },
  {
    "text": "and with some added\nnotation here. So yellow slide to wake you up. So we're going to\nassume some things.",
    "start": "688090",
    "end": "696279"
  },
  {
    "text": "And the first thing\nthat we said we assumed when we did all of this stuff\nis that the initial states",
    "start": "696280",
    "end": "701350"
  },
  {
    "text": "come from some bounded set,\nsome bounded initial set. So that was in our\ncase, what positions could the mass start at and what\nvelocities could it start at.",
    "start": "701350",
    "end": "709560"
  },
  {
    "text": "And then we're also\ngoing to assume that the disturbances\nat each time step come from a bounded set as well.",
    "start": "709560",
    "end": "715320"
  },
  {
    "text": "So in this case,\nin our case, it was like the amount of\nobservation noise we apply came from some bounded set.",
    "start": "715320",
    "end": "722730"
  },
  {
    "text": "And then specifically, to write\nthis set down mathematically, it looks a little crazy here. But all we're saying\nis like there's",
    "start": "722730",
    "end": "728500"
  },
  {
    "text": "a component of this set for the\nagent environment and sensor. And each of those comes from\nits own set specifically.",
    "start": "728500",
    "end": "738780"
  },
  {
    "text": "And as we were\ntalking about, a set is just a collection of points. So it could be an\ninfinite amount of points.",
    "start": "738780",
    "end": "745150"
  },
  {
    "text": "For example, a rectangle\ncontains an infinite amount of points. But we know that that's still\nkind of a bounded closed set.",
    "start": "745150",
    "end": "751260"
  },
  {
    "text": "Or it could just\nbe a set of points. That's it. ",
    "start": "751260",
    "end": "756420"
  },
  {
    "text": "And so for the\nmass spring damper, we basically assumed\nthat our initial set",
    "start": "756420",
    "end": "762880"
  },
  {
    "text": "was all states with a\nposition between minus 2 and 0.2 and no velocity. And then for our\ndisturbances, we",
    "start": "762880",
    "end": "770140"
  },
  {
    "text": "don't have any disturbances on\nthe environment or on the agent. So these are what we\njust call the zero set.",
    "start": "770140",
    "end": "776949"
  },
  {
    "text": "It's more just like\na notation thing. But basically,\nthese just don't get used because we don't have\ndisturbances on the agent",
    "start": "776950",
    "end": "783490"
  },
  {
    "text": "or environment for the system. But for other systems we might. But where we do have\ndisturbances for the mass spring",
    "start": "783490",
    "end": "790300"
  },
  {
    "text": "damper is on the sensor. And so that this\nkind of big x0 set",
    "start": "790300",
    "end": "795850"
  },
  {
    "text": "is going to be all noise\nvalues between minus 1 and 1. ",
    "start": "795850",
    "end": "803967"
  },
  {
    "text": "And then you might\nbe thinking though, but all these problems that\nwe saw before in this class, they've always had distributions\nover initial states",
    "start": "803967",
    "end": "810820"
  },
  {
    "text": "and disturbances. And that's different\nfrom these sets. We introduced the mass\nspring damper with this.",
    "start": "810820",
    "end": "816563"
  },
  {
    "text": "But what about the pendulum? It had a whole distribution over\ninitial states and disturbances.",
    "start": "816563",
    "end": "821899"
  },
  {
    "text": "And so what we could do is we\ncan convert these distributions to bounded sets by\nusing their support. So basically, everywhere that\nthe distribution is non-zero",
    "start": "821900",
    "end": "829310"
  },
  {
    "text": "we include that in our set. So for example, if we had\na uniform distribution",
    "start": "829310",
    "end": "834710"
  },
  {
    "text": "in between minus 1 and 1 like\nthis, the support of that is minus 1 to 1. So we get a bounded set.",
    "start": "834710",
    "end": "840530"
  },
  {
    "text": "But then some of you\nare probably like, well, most of the time, we had\nGaussian distributions. Their support is infinite. They're defined over\nthe entire real line.",
    "start": "840530",
    "end": "847590"
  },
  {
    "text": "So that's not going to give us a\nbounded set because that's going to be all possible values. And so what we could\ndo is we could just",
    "start": "847590",
    "end": "853430"
  },
  {
    "text": "select a region that contains\nmost of the probability mass. So maybe we go out like 3,\n4, or 5 standard deviations",
    "start": "853430",
    "end": "859220"
  },
  {
    "text": "and just cut it off and\nsay that's good enough. But this is an assumption\nyou need to make. Yeah.",
    "start": "859220",
    "end": "864590"
  },
  {
    "text": "Could you explain\nthe 0 set again? Yeah, so this is basically\njust like a set such",
    "start": "864590",
    "end": "870740"
  },
  {
    "text": "that when we apply operations\nto it, it kind of acts like 0. But really, all\nI'm trying to say",
    "start": "870740",
    "end": "876770"
  },
  {
    "text": "is there are no disturbances\non the environment or the agent for the\nmass spring damper.",
    "start": "876770",
    "end": "883010"
  },
  {
    "text": "And so it's just kind of a\nplaceholder for the disturbance set, meaning there\njust aren't any. ",
    "start": "883010",
    "end": "892279"
  },
  {
    "text": "Yeah. So this is just the\nproperty of our system that we're working with, not-- This zero set thing?",
    "start": "892280",
    "end": "897860"
  },
  {
    "text": "Yeah. Yeah. So everything in\nblue is with respect to the mass spring\ndamper system. Everything in black is the\ngeneral case of things.",
    "start": "897860",
    "end": "906170"
  },
  {
    "text": "And again, to reiterate,\n0 set [INAUDIBLE]. 0 set, it's like--",
    "start": "906170",
    "end": "912730"
  },
  {
    "text": "[INAUDIBLE] I'm going to-- maybe. I'm actually not sure.",
    "start": "912730",
    "end": "918260"
  },
  {
    "text": "Basically, in the code,\nwe use an object called 0 set from the package we use.",
    "start": "918260",
    "end": "923510"
  },
  {
    "text": "And it has the\nproperties of 0 we need when we apply set operations. I would have to look\nup more details of what",
    "start": "923510",
    "end": "931120"
  },
  {
    "text": "exactly is meant\nby the 0 set so I don't tell you the wrong thing. [? Sorry. ?] Yeah.",
    "start": "931120",
    "end": "936930"
  },
  {
    "text": "So we made these assumptions. And now given these\nassumptions, what we want to do is compute the set\nof reachable states",
    "start": "936930",
    "end": "943010"
  },
  {
    "text": "at some particular\ndepth in our trajectory. So here's what that looks\nlike mathematically.",
    "start": "943010",
    "end": "949410"
  },
  {
    "text": "And so basically, what we're\ngoing to call this fancy script r sub b is all states that we\ncould reach at depth d if we",
    "start": "949410",
    "end": "957710"
  },
  {
    "text": "were to start from an initial\nstate in our bounded set of possible initial\nstates, and select",
    "start": "957710",
    "end": "963110"
  },
  {
    "text": "the disturbance\nat each time step from some point in our\ndisturbance set for that time",
    "start": "963110",
    "end": "969129"
  },
  {
    "text": "step. So basically, we're\njust saying, what is the set of states\nwe could reach if we make these assumptions up here.",
    "start": "969130",
    "end": "976472"
  },
  {
    "text": "And so what all\nthis math is saying is it's just saying the set of\nall states for which the state could be reached, given some\ninitial state and disturbance",
    "start": "976472",
    "end": "983839"
  },
  {
    "text": "set, where that initial state\nand disturbance is drawn from our sets that we\nspecified over initial states",
    "start": "983840",
    "end": "991100"
  },
  {
    "text": "and disturbances. And so all this reach\nfunction is doing is it's doing a rollout\nstarting from state",
    "start": "991100",
    "end": "997155"
  },
  {
    "text": "s with these set of\ndisturbances and giving us the final state at that depth.",
    "start": "997155",
    "end": "1004252"
  },
  {
    "text": "What questions do\nyou have on that? ",
    "start": "1004252",
    "end": "1009410"
  },
  {
    "text": "What's that? So then it's kind of\na rollout [INAUDIBLE]. Yeah. So basically, it's\nsaying like if we",
    "start": "1009410",
    "end": "1015140"
  },
  {
    "text": "were to do a rollout\nfrom all possible points in our initial set up to depth\nd, what is the set of states",
    "start": "1015140",
    "end": "1022850"
  },
  {
    "text": "we would end at\nfor that rollout. Is that how you\ncompute [INAUDIBLE]?",
    "start": "1022850",
    "end": "1029720"
  },
  {
    "text": "So I'm going to probably get\nto this in a second, I think, in the slides. But basically, if\nyou try to do that,",
    "start": "1029720",
    "end": "1035069"
  },
  {
    "text": "if you start an initial set with\nan infinite amount of points in it, you'd have to do an\ninfinite amount of rollouts to figure out what\nthat reachable set is.",
    "start": "1035069",
    "end": "1042209"
  },
  {
    "text": "And so the whole key\nto today's lecture and the next few lectures\nis more efficient ways to handle that.",
    "start": "1042210",
    "end": "1048650"
  },
  {
    "text": "Yeah, but good question. Any other questions here? ",
    "start": "1048650",
    "end": "1056370"
  },
  {
    "text": "Yep. Can you explain\nthe depth concept? Yeah, so the depth is\nbasically just the number",
    "start": "1056370",
    "end": "1063060"
  },
  {
    "text": "of steps in our trajectory. So if we want to say\nwhat is the set of states that we could reach at time\nstep 4, it would be r sub 4.",
    "start": "1063060",
    "end": "1072059"
  },
  {
    "text": "Oh, got it. Yeah. Yep. But this assumes that\nthere is a finite set",
    "start": "1072060",
    "end": "1079140"
  },
  {
    "text": "of things in each set. S and x need to be bounded sets. Yeah. OK, so they're bounded sets.",
    "start": "1079140",
    "end": "1085860"
  },
  {
    "text": "So then naively, [INAUDIBLE]\nintractable is the idea. Yeah, it is intractable\nto do a bunch of rollouts.",
    "start": "1085860",
    "end": "1091470"
  },
  {
    "text": "Yeah.  So going back to our mass\nspring damper example,",
    "start": "1091470",
    "end": "1098100"
  },
  {
    "text": "just adding this notation to it. So r sub 1. So the reachable set at depth\n1 is just our initial set.",
    "start": "1098100",
    "end": "1103780"
  },
  {
    "text": "So it's just this\nline that we had. And then r2 is the set of states\nwe could reach at time step",
    "start": "1103780",
    "end": "1109470"
  },
  {
    "text": "2 and so on.  And then a lot of times,\nthough, we don't just",
    "start": "1109470",
    "end": "1115580"
  },
  {
    "text": "care about the reachable\nset at a particular depth. So we're not just, oh,\nwhat is the set of states I could reach at time\nstep 4 and that's",
    "start": "1115580",
    "end": "1121880"
  },
  {
    "text": "all I care about, because I\ndon't care what my system does at all other time steps. That's kind of unlikely or\nnot what we typically want.",
    "start": "1121880",
    "end": "1128460"
  },
  {
    "text": "Typically, we want the reachable\nset up to some horizon. So you want to say,\nwhat are all the states I could reach between\nnow and time step 4,",
    "start": "1128460",
    "end": "1135560"
  },
  {
    "text": "not just at time step 4. And so we just denote\nthat r1 through h-- so all the sets up to h.",
    "start": "1135560",
    "end": "1142830"
  },
  {
    "text": "And it's just the union of\nall the sets at each step. So basically, what\nyou can imagine is we have the reachable\nset for each depth.",
    "start": "1142830",
    "end": "1149340"
  },
  {
    "text": "We just take the union over\nall of them, which kind of just looks like us stacking them\nall on top of each other.",
    "start": "1149340",
    "end": "1154937"
  },
  {
    "text": "And now we can say,\nthese are all the states we would reach if we operated\nour system from time step 1 to time step 4.",
    "start": "1154937",
    "end": "1160945"
  },
  {
    "text": " Yeah. So it looks like\nprevious time steps",
    "start": "1160945",
    "end": "1168680"
  },
  {
    "text": "were the states of the previous\ndepth may not necessarily be a subset of what you\nhave at a later depth.",
    "start": "1168680",
    "end": "1177450"
  },
  {
    "text": "Yep, that's absolutely right. Yeah. But when you're doing\nthis union right here,",
    "start": "1177450",
    "end": "1184409"
  },
  {
    "text": "you're including everything. You're including everything. Because if were to came\nup to you and was like,",
    "start": "1184410",
    "end": "1189487"
  },
  {
    "text": "hey, I want to make\nsure my system is never going to enter this red set\nbetween time steps 1 and 4, you wouldn't want to look at\njust one of those time steps.",
    "start": "1189488",
    "end": "1196720"
  },
  {
    "text": "You'd want to look at\nall of those time steps together and be\nlike, does anything in that kind of union set\nintersect with this bad set.",
    "start": "1196720",
    "end": "1205770"
  },
  {
    "text": "Yeah. Can you just explain the\nnotation of reach again. Sure, so this is\njust as if you took--",
    "start": "1205770",
    "end": "1212549"
  },
  {
    "text": "you started in state\ns, and then you use this set of disturbances\nfor each time step,",
    "start": "1212550",
    "end": "1218350"
  },
  {
    "text": "and you did a rollout, and\nthen you took the final state that you ended up with in\nthat rollout at depth d.",
    "start": "1218350",
    "end": "1226080"
  },
  {
    "text": "I see. OK, that makes sense. Great. Yeah. Is it OK that it's\nnot continuous,",
    "start": "1226080",
    "end": "1231909"
  },
  {
    "text": "the union of all the sets? This one, I think is kind of\ncontinuous, but it's not convex.",
    "start": "1231910",
    "end": "1238736"
  },
  {
    "text": "[INAUDIBLE] the very first\nplace, which is just 1. Is just the 1, yeah.",
    "start": "1238736",
    "end": "1245170"
  },
  {
    "text": "So that basically makes it\nnon-convex, which is OK.",
    "start": "1245170",
    "end": "1251060"
  },
  {
    "text": "But it kind of depends what\nyou want to do with it. So if you have\nnon-convex sets they're generally more\ndifficult to work with.",
    "start": "1251060",
    "end": "1257419"
  },
  {
    "text": "So for example,\nfor your project, we were trying to compute the\nvolume of this non-convex set. That's kind of hard to do.",
    "start": "1257420",
    "end": "1263240"
  },
  {
    "text": "So if you wanted to compute\nthe volume of your reachable set then that might be an issue.",
    "start": "1263240",
    "end": "1268300"
  },
  {
    "text": "And so it really just depends\non what you want to do. And I think as we go\nthroughout this lecture,",
    "start": "1268300",
    "end": "1274010"
  },
  {
    "text": "we're going to\nsee some sets that have very nice properties\nsuch that if we want to do all these things\nlike compute volume",
    "start": "1274010",
    "end": "1279410"
  },
  {
    "text": "or some other operations\nI'm going to talk about, we want to use sets like that. And then you're kind\nof limited if you",
    "start": "1279410",
    "end": "1285430"
  },
  {
    "text": "have these non-convex sets. Yeah, your question. ",
    "start": "1285430",
    "end": "1292380"
  },
  {
    "text": "So we have the reachable set. We've kind of already talked\na little bit about this. But basically, we\nwant to see now if it intersects\nwith any bad states.",
    "start": "1292380",
    "end": "1298793"
  },
  {
    "text": "And if it doesn't, then\nwe can say we're never going to end up in a bad state. And so we're good to go. Our system is safe.",
    "start": "1298793",
    "end": "1305270"
  },
  {
    "text": "And so we're going to\ncall our bad states in this class the avoid set. It's basically the set of\nstates that we want to avoid.",
    "start": "1305270",
    "end": "1311274"
  },
  {
    "text": "So that does mean that you\nhave to have your safety property or your\nspecification written in terms of a set of states\nthat you want to avoid,",
    "start": "1311275",
    "end": "1318810"
  },
  {
    "text": "which is not always possible. But we do talk about--\nwe did talk a little bit about reachability in the\nproperty specification lecture.",
    "start": "1318810",
    "end": "1327980"
  },
  {
    "text": "So in the case of our\nmass spring damper we wanted to avoid the states\nthat were in this red region.",
    "start": "1327980",
    "end": "1333000"
  },
  {
    "text": "So these two kind of bars\nmake up our avoid set. ",
    "start": "1333000",
    "end": "1339125"
  },
  {
    "text": "Then there's one other\nthing you might be thinking. Well, maybe we don't always\nwant to avoid a certain set.",
    "start": "1339125",
    "end": "1344220"
  },
  {
    "text": "Maybe we want to reach a set. So that's more\nliveness than safety.",
    "start": "1344220",
    "end": "1349250"
  },
  {
    "text": "But you might also want to\ncheck if a system reaches a goal region. And you could do\nthat by checking",
    "start": "1349250",
    "end": "1354490"
  },
  {
    "text": "if the reachable set is\ncontained within the goal region. So you want to say, all the\nstates I could reach end up",
    "start": "1354490",
    "end": "1360220"
  },
  {
    "text": "at the goal. We're not going to talk\nabout this case quite as much in this class. And in the book, we don't\ntalk about it as much.",
    "start": "1360220",
    "end": "1367613"
  },
  {
    "text": "But something to keep\nin mind if you did want to reach a goal region\ninstead of avoid a bad region.",
    "start": "1367613",
    "end": "1373350"
  },
  {
    "text": " So now I just explained\nkind of at a high level",
    "start": "1373350",
    "end": "1381550"
  },
  {
    "text": "what reachability is. And now I want to talk\nabout how we actually compute these reachable sets.",
    "start": "1381550",
    "end": "1387317"
  },
  {
    "text": "And specifically,\nwe're going to focus on the math behind\ncomputing reachable sets for linear systems.",
    "start": "1387317",
    "end": "1392660"
  },
  {
    "text": "And then in subsequent\nlectures, we'll talk about what to do\nfor non-linear systems.",
    "start": "1392660",
    "end": "1399280"
  },
  {
    "text": "So plan for today-- we just\ntalked about reachable sets. Next, I'm going to define\nexactly what a linear system is.",
    "start": "1399280",
    "end": "1406310"
  },
  {
    "text": "Then we're going to spend\na good chunk of the time on this idea of set\npropagation techniques.",
    "start": "1406310",
    "end": "1411330"
  },
  {
    "text": "So there's multiple ways\nto do this reachability for linear systems. One is set propagation.",
    "start": "1411330",
    "end": "1416580"
  },
  {
    "text": "And then the last\none, which we'll talk about a little bit at\nthe end is using optimization.",
    "start": "1416580",
    "end": "1423320"
  },
  {
    "text": "So let's dive into\nlinear systems. So linear systems\nare basically a class",
    "start": "1423320",
    "end": "1429080"
  },
  {
    "text": "of systems where the sensor,\nthe agent, the environment are all linear functions\nof the state action",
    "start": "1429080",
    "end": "1435679"
  },
  {
    "text": "observation and disturbance. So they're just all linear\nfunctions of their inputs. So previously, we just\ngenerically defined",
    "start": "1435680",
    "end": "1442640"
  },
  {
    "text": "the observation model the\nagent and the transition model. And now we're going\nto specify that they have to have this\nparticular functional form.",
    "start": "1442640",
    "end": "1450510"
  },
  {
    "text": "So for example, for\nthe observation model it's a function of the state\nand the observation disturbance.",
    "start": "1450510",
    "end": "1455880"
  },
  {
    "text": "And we're saying it needs\nto be a linear function of these things. So it needs to be\nsome matrix multiplied",
    "start": "1455880",
    "end": "1462290"
  },
  {
    "text": "by the state, plus some linear\nfunction of the observation disturbance.",
    "start": "1462290",
    "end": "1468120"
  },
  {
    "text": "Similarly, for the agent,\nthis kind of big pi o is a matrix multiplied by\nthe observation and so on.",
    "start": "1468120",
    "end": "1475090"
  },
  {
    "text": "And then similarly for\nthe transition model. So what this looks like\nfor the mass spring",
    "start": "1475090",
    "end": "1481320"
  },
  {
    "text": "damper, which turns out\nthat's the whole reason we introduced it. It's a linear system. And basically,\nwhat's happening here",
    "start": "1481320",
    "end": "1487620"
  },
  {
    "text": "is our observation model\nis just the identity matrix because our observation is\njust the state plus some noise",
    "start": "1487620",
    "end": "1494730"
  },
  {
    "text": "disturbance. So plus some added noise. So this kind of big boldface\no is just the identity matrix",
    "start": "1494730",
    "end": "1502299"
  },
  {
    "text": "in this case. Our controller is a\nproportional controller. You don't really\nneed to understand",
    "start": "1502300",
    "end": "1507420"
  },
  {
    "text": "how we got any of this. You can take\ndynamics or controls if you want to look into this. But this big pi o is just\nequal to this matrix.",
    "start": "1507420",
    "end": "1516130"
  },
  {
    "text": "And then I said, the\nagent, and the environment are deterministic for\nthe mass spring damper.",
    "start": "1516130",
    "end": "1521170"
  },
  {
    "text": "So we actually don't\nhave a disturbance on either of either of these.",
    "start": "1521170",
    "end": "1526409"
  },
  {
    "text": "And then the transition model\nis these matrices multiplied by the state and the action. And again, this is\njust given to you.",
    "start": "1526410",
    "end": "1532870"
  },
  {
    "text": "You don't need to know how\nto derive this or anything. So that's linear systems.",
    "start": "1532870",
    "end": "1538300"
  },
  {
    "text": "That was a short section. And now we're going\nto talk for a while about these things called\nset propagation techniques.",
    "start": "1538300",
    "end": "1543815"
  },
  {
    "text": "So I put these equations\nback up here because we're going to need them in a second. And let's look at a\nsingle time step first.",
    "start": "1543815",
    "end": "1550179"
  },
  {
    "text": "And let's try to\nwrite our next state s prime in terms of our current\nstate and the disturbance",
    "start": "1550180",
    "end": "1555420"
  },
  {
    "text": "that we apply. So we can start by saying,\nOK, our next state is equal to our transition\nmodel evaluated",
    "start": "1555420",
    "end": "1562228"
  },
  {
    "text": "at the current state with\nthe action that we take and our disturbance. But we don't want it\nin terms of the action",
    "start": "1562228",
    "end": "1569070"
  },
  {
    "text": "because we just want\nit in terms of s and x And we know that\nthe action is going to be the result of\nwhatever policy we applied,",
    "start": "1569070",
    "end": "1576400"
  },
  {
    "text": "so we can just take this\naction and replace it with our policy function. So now we're just saying it's\nthe state, the action that",
    "start": "1576400",
    "end": "1583260"
  },
  {
    "text": "comes out of the policy, and\nthen our disturbance still. But we don't want\no in there either.",
    "start": "1583260",
    "end": "1588940"
  },
  {
    "text": "And we know that o is just\nthe observation that comes out of our observation model. So we can just replace o\nwith our observation model.",
    "start": "1588940",
    "end": "1596590"
  },
  {
    "text": "And then we get this kind of\nbig thing of nested functions. But this gives us\nbasically the next state",
    "start": "1596590",
    "end": "1601950"
  },
  {
    "text": "in terms of our current state\nand the disturbances that get applied.",
    "start": "1601950",
    "end": "1606960"
  },
  {
    "text": "And then all I'm\ngoing to do now is we have functions\nfor all these things. So we know os xo is\nequal to this function",
    "start": "1606960",
    "end": "1613530"
  },
  {
    "text": "for a linear system and so on. So I'm just going to plug\nall of those things in. And we get something\nthat looks like this.",
    "start": "1613530",
    "end": "1620190"
  },
  {
    "text": "And then I'm just going to do a\nwhole bunch of simplification, just group some terms together. And we end up with\nthis expression.",
    "start": "1620190",
    "end": "1626679"
  },
  {
    "text": "So now we know\nthat our next state is equal to this\nexpression here, which",
    "start": "1626680",
    "end": "1632250"
  },
  {
    "text": "is this just ends up\nbeing kind of a big matrix multiplied by our current\nstate, plus some other matrices",
    "start": "1632250",
    "end": "1637710"
  },
  {
    "text": "multiplied by our disturbances. And the thing-- you\ndon't really need to study this\nequation, too hard,",
    "start": "1637710",
    "end": "1644150"
  },
  {
    "text": "as long as you understand\nwhere we got it from. But the big idea that I\nwant to get across here is basically what's going on\nis we're taking some matrices,",
    "start": "1644150",
    "end": "1651560"
  },
  {
    "text": "we're multiplying\nthem by some vectors, and we're adding stuff together. So those are the\nmain operations we",
    "start": "1651560",
    "end": "1657250"
  },
  {
    "text": "had to do to calculate\nthe next state if we were given the current\nstate and the disturbances.",
    "start": "1657250",
    "end": "1662566"
  },
  {
    "text": " But all of this is kind of\napplied to a single point.",
    "start": "1662566",
    "end": "1668370"
  },
  {
    "text": "So we just said we\nhave our current state. That's just one state. We have our current disturbance.",
    "start": "1668370",
    "end": "1673400"
  },
  {
    "text": "It's just one disturbance. But we're interested now\nin what happens if we have a whole set of states.",
    "start": "1673400",
    "end": "1678470"
  },
  {
    "text": "What happens to a whole set of\nstates, given that we could have this whole set of disturbances. And so what if we could\njust take these operations",
    "start": "1678470",
    "end": "1685403"
  },
  {
    "text": "and, instead of applying them\nto just a single point, just a single state and disturbance,\nwe could apply them",
    "start": "1685403",
    "end": "1690549"
  },
  {
    "text": "to entire sets. So that's kind of\nwhere we're headed. And now we're going to talk\nabout what it means to do that",
    "start": "1690550",
    "end": "1696370"
  },
  {
    "text": "and how we do that. But this is really\njust the main idea behind set based reachability.",
    "start": "1696370",
    "end": "1705600"
  },
  {
    "text": "So again we now\nhave this expression that we need to evaluate. And we want to\nevaluate it over sets.",
    "start": "1705600",
    "end": "1711451"
  },
  {
    "text": "And what's going on\nin this expression is we have some\nmatrices, and they're being multiplied by\nsome vectors and adding. So there's basically\ntwo main types",
    "start": "1711452",
    "end": "1718200"
  },
  {
    "text": "of operations that are required\nto compute the next state for a linear system.",
    "start": "1718200",
    "end": "1724080"
  },
  {
    "text": "And one of those operations\nis matrix multiplication-- or sometimes, we also refer to\nthat as a linear transformation,",
    "start": "1724080",
    "end": "1730169"
  },
  {
    "text": "meaning same thing-- and then the other one\nwe saw is addition. So if we could just define what\nthese operations mean for sets,",
    "start": "1730170",
    "end": "1738789"
  },
  {
    "text": "we could then take this\nequation and convert it to be not just over\nsingle points, but over sets.",
    "start": "1738790",
    "end": "1744970"
  },
  {
    "text": "So that's where we're headed. So let's talk about what\nmatrix multiplication looks",
    "start": "1744970",
    "end": "1751230"
  },
  {
    "text": "like for sets. So here's the mathematical\ndefinition of it. So say we have some set.",
    "start": "1751230",
    "end": "1757370"
  },
  {
    "text": "So by the way, as\nyou're kind of parsing through these slides, when we\nuse this kind of script mathcal",
    "start": "1757370",
    "end": "1762399"
  },
  {
    "text": "notation, that\ntypically denotes a set. So when you see a nice\nfancy curly letter, that probably means it's a set.",
    "start": "1762400",
    "end": "1768770"
  },
  {
    "text": "And then these boldface things\nare matrices and vectors. So let's say that we\nwant to take the set p",
    "start": "1768770",
    "end": "1774160"
  },
  {
    "text": "and multiply it\nby some matrix A. Then all we do is take\nevery point P in the set,",
    "start": "1774160",
    "end": "1780260"
  },
  {
    "text": "multiply it by A. Then\nthe set of new points we get by doing that\nwould be our new set.",
    "start": "1780260",
    "end": "1786240"
  },
  {
    "text": "So we can see what\nthis looks like to make it a little more intuitive. So let's imagine we\nhave this set here.",
    "start": "1786240",
    "end": "1792100"
  },
  {
    "text": "We'll call it p. We're going to multiply\nit by this matrix. So this is equal to a. And then over here, we're going\nto show what the result is.",
    "start": "1792100",
    "end": "1799900"
  },
  {
    "text": "So all this is saying is that\nwe take every point in the set-- so let's just take\nthis point for example.",
    "start": "1799900",
    "end": "1805789"
  },
  {
    "text": "We take the value\nof this point here, and we multiply\nit by this matrix.",
    "start": "1805790",
    "end": "1810980"
  },
  {
    "text": "That will give us a new point. And that's going to be in\nour new set, a times p.",
    "start": "1810980",
    "end": "1816410"
  },
  {
    "text": "And then we can repeat\nthis process basically for all of the\npoints that are in p, just continue to\nmultiply them by a.",
    "start": "1816410",
    "end": "1823760"
  },
  {
    "text": "And then eventually, we can\ntake all of those points and that's our new set.",
    "start": "1823760",
    "end": "1831890"
  },
  {
    "text": "But in order to get this\nkind of purple shape, we would need to compute\nthat for all infinite points. So we to take every\nsingle point in p",
    "start": "1831890",
    "end": "1838490"
  },
  {
    "text": "and get the result to create\nthis kind of a times p.",
    "start": "1838490",
    "end": "1843835"
  },
  {
    "text": "But of course, we\ndon't have time to do that for an\ninfinite set of points. And so it turns out that many\ncommon set representations like",
    "start": "1843835",
    "end": "1850669"
  },
  {
    "text": "this set like a\nrectangle, et cetera, they have efficient\nways of actually doing this transformation\nwithout having",
    "start": "1850670",
    "end": "1857000"
  },
  {
    "text": "to take every single point\nin p and multiplying it by a. And we're going to\ntalk about how to do that later in this lecture.",
    "start": "1857000",
    "end": "1864890"
  },
  {
    "text": "So the next thing,\nwe now know how to multiply a set by a matrix. Now we need to know how\nto add two sets together.",
    "start": "1864890",
    "end": "1872310"
  },
  {
    "text": "So here's the mathematical\ndefinition for this. You can ignore this fancy\nsign for a second here.",
    "start": "1872310",
    "end": "1877690"
  },
  {
    "text": "But basically, when we\nadd two sets together, we take every point in set p--\nso we're adding set p to set q.",
    "start": "1877690",
    "end": "1883659"
  },
  {
    "text": "We take every point in set p and\nadd it to every point in set q. And then the result\nis our new set.",
    "start": "1883660",
    "end": "1891390"
  },
  {
    "text": "So by the way, this kind\nof fancy plus symbol, it's just kind of the symbol\nwe use for addition for sets.",
    "start": "1891390",
    "end": "1898990"
  },
  {
    "text": "And it refers to\na Minkowski sum. So that's what this operation is\noften called as a Minkowski sum.",
    "start": "1898990",
    "end": "1906903"
  },
  {
    "text": "So let's see what\nthis looks like. So let's say that we\nwant to take this set p and add it to this set q.",
    "start": "1906903",
    "end": "1912929"
  },
  {
    "text": "And so what we need to do\nis for every point in p, we take another point in q.",
    "start": "1912930",
    "end": "1918070"
  },
  {
    "text": "And all I'm going to do is\ndraw vectors to these points. So these vectors represent\nbasically the same thing as the point. I'm just looking at\nthe vector version.",
    "start": "1918070",
    "end": "1924780"
  },
  {
    "text": "And if we want to add\nthese two points together, we just add the\nvectors together. So we take this vector\nand add it to this one.",
    "start": "1924780",
    "end": "1931914"
  },
  {
    "text": "And then we'll\nget this new point that's going to be\nin our set p plus q. So we get this\npurple point here.",
    "start": "1931915",
    "end": "1937970"
  },
  {
    "text": "And then we can just\nrepeat this process. So we grab another point\nfrom p, another point from q, draw the vectors,\nadd them together,",
    "start": "1937970",
    "end": "1945570"
  },
  {
    "text": "and then we get this new point. And then we can keep doing this\nover and over and over again.",
    "start": "1945570",
    "end": "1952410"
  },
  {
    "text": "Imagine we did it an\ninfinite number of times, and we would get\nthe set p plus q.",
    "start": "1952410",
    "end": "1957900"
  },
  {
    "text": "Yeah. [INAUDIBLE] which points to add? Or is it like you're doing\n[INAUDIBLE] every combination?",
    "start": "1957900",
    "end": "1964800"
  },
  {
    "text": "Yep, every combination. So this is intractable because\nthere's an infinite number of combinations. But there's ways I'm going\nto talk about later that you",
    "start": "1964800",
    "end": "1973429"
  },
  {
    "text": "can do this without having to do\nevery single individual point. But just to understand\nwhat this operation is,",
    "start": "1973430",
    "end": "1979220"
  },
  {
    "text": "imagine if you could\ndo that, that's how we would get this set. ",
    "start": "1979220",
    "end": "1987270"
  },
  {
    "text": "So yeah, like I just said, many\ncommon set that representations like hyperrectangles,\net cetera, they all have efficient ways\nof actually doing",
    "start": "1987270",
    "end": "1993462"
  },
  {
    "text": "this calculation without doing\nall the individual points. ",
    "start": "1993462",
    "end": "2000720"
  },
  {
    "text": "So now we know how to\ndo these operations. So let's look back at our\nequation we had before where we had all these matrix\nmultiplications and pluses",
    "start": "2000720",
    "end": "2008210"
  },
  {
    "text": "and see if we can\ndo this for sets. So all we need to do now is\njust replace those operations",
    "start": "2008210",
    "end": "2014390"
  },
  {
    "text": "with set operations. So we're just going to now\nmultiply matrices in the way that I showed. And then we're going to replace\nthe sums with Minkowski sums.",
    "start": "2014390",
    "end": "2022550"
  },
  {
    "text": "And now, given an initial set\nand these disturbance sets, we can calculate the set\nof possible next states.",
    "start": "2022550",
    "end": "2029995"
  },
  {
    "text": " So this is the big\nequation that we're going to use for set\npropagation for linear systems.",
    "start": "2029995",
    "end": "2037929"
  },
  {
    "text": " And so here's what this\nlooks like in code.",
    "start": "2037930",
    "end": "2043640"
  },
  {
    "text": "So in the book, we\nimplement it like this. We have this get\nmatrices function, which just takes in a system and\nreturns the linear matrices",
    "start": "2043640",
    "end": "2052199"
  },
  {
    "text": "for the system. So we need ts, ta, pi o. So it just returns\nthose matrices.",
    "start": "2052199",
    "end": "2057489"
  },
  {
    "text": "And then when we do\nthis propagation, we take in our current set\nand the set of disturbances.",
    "start": "2057489",
    "end": "2062800"
  },
  {
    "text": "We grab those matrices\nfor the linear system. And then we just implement\nthis line here in code.",
    "start": "2062800",
    "end": "2070949"
  },
  {
    "text": "And here's your ad for Julia. Look at this amazing\nlittle o plus. It looks just like this.",
    "start": "2070949",
    "end": "2076239"
  },
  {
    "text": "These like script\nthings, everything. It all just looks like\nthis, which is pretty cool. And the reason\nthat we can do this",
    "start": "2076239",
    "end": "2082710"
  },
  {
    "text": "is because of this wonderful\nJulia package called LazySets.jl which I think a lot\nof you will become",
    "start": "2082710",
    "end": "2088138"
  },
  {
    "text": "quite familiar with\nduring your project. And it's amazing. We can just do this.",
    "start": "2088139",
    "end": "2093908"
  },
  {
    "text": "We can just multiply sets\nusing all the normal stuff. We can do this 0 plus, it'll\ndo the Minkowski sum for us.",
    "start": "2093909",
    "end": "2098980"
  },
  {
    "text": "It'll just do all\nthe stuff for us. And we're going to throw\nout the next few lectures, show more and more\nfeatures of what",
    "start": "2098980",
    "end": "2104488"
  },
  {
    "text": "LazySets can do as we\nteach these concepts and it's just so good. So there's your ad for Julia.",
    "start": "2104488",
    "end": "2111510"
  },
  {
    "text": "And I don't know-- if the\nLazySets people end up somehow watching this\none day, thank you. Your package is just wonderful.",
    "start": "2111510",
    "end": "2118349"
  },
  {
    "text": " So that was how you do it\nfor a single time step.",
    "start": "2118350",
    "end": "2124549"
  },
  {
    "text": "But now let's talk\nabout how we would do that for multiple time steps. So basically, as you might\nhave already been guessing,",
    "start": "2124550",
    "end": "2132319"
  },
  {
    "text": "we could just keep\napplying this equation. So we had an initial set. We had a set of disturbances\nthat gave us our next set.",
    "start": "2132320",
    "end": "2139109"
  },
  {
    "text": "So we could just make that\nour initial set and then just keep going in order to get the\nreachable sets at future time",
    "start": "2139110",
    "end": "2144980"
  },
  {
    "text": "steps. So all that looks like is this\nwhere basically all we just did here is we just took\nthe initial set and said,",
    "start": "2144980",
    "end": "2152190"
  },
  {
    "text": "that's going to be our\nset at the previous time step or the previous steps. And then our next\nset is going to be",
    "start": "2152190",
    "end": "2158359"
  },
  {
    "text": "the set that we're trying to\ncompute for the current depth. So we basically just keep\napplying this equation over and over again,\nand we can build out",
    "start": "2158360",
    "end": "2164940"
  },
  {
    "text": "the reachable set over time.  So let's see what this looks\nlike in a Pluto notebook.",
    "start": "2164940",
    "end": "2173130"
  },
  {
    "text": "Before I go over to that,\nare there any questions? Yeah.",
    "start": "2173130",
    "end": "2178710"
  },
  {
    "text": "So the reachable set and\nthe current set of states is same thing. But don't we need to add them\nto squish them down together?",
    "start": "2178710",
    "end": "2186750"
  },
  {
    "text": "So there's the subtle\ndifference in notation we made for the book,\nwhich-- so rd represents",
    "start": "2186750",
    "end": "2193500"
  },
  {
    "text": "just the set of states we\ncould reach at depth d. So only at d. And then if we say r1 through\nh or r1 through d or whatever,",
    "start": "2193500",
    "end": "2201910"
  },
  {
    "text": "like r1 through 4, then we\nwould squish them all together. Most of the time, what we\ncare about is r1 through 4.",
    "start": "2201910",
    "end": "2207145"
  },
  {
    "text": "Is there any distinction\nbetween saying that these are the\nreachable sets versus just the states at d?",
    "start": "2207145",
    "end": "2214830"
  },
  {
    "text": "Most of the states,\nyou could reach at d. Oh, given some initial\nstate, I guess. Given some-- yeah.",
    "start": "2214830",
    "end": "2220140"
  },
  {
    "text": "So for all of this,\nwe are assuming that there was some\ninitial set that we cared about and some\ndisturbance set that could",
    "start": "2220140",
    "end": "2227170"
  },
  {
    "text": "be applied at each time step. Makes sense. [INAUDIBLE] Yeah, no problem.",
    "start": "2227170",
    "end": "2232540"
  },
  {
    "text": "So let's look at\nwhat this looks like. So basically,\nwhat's going on here",
    "start": "2232540",
    "end": "2238410"
  },
  {
    "text": "is this is our same\nplot that we had before. We're, in a second,\ngoing to control kind",
    "start": "2238410",
    "end": "2243850"
  },
  {
    "text": "of the magnitude of the noise. And then what I'm showing\nhere is the samples. So these blue things\nare like the samples.",
    "start": "2243850",
    "end": "2249710"
  },
  {
    "text": "You can ignore the big\ngreen rectangle for now. But the blue things\nare the samples. So again, we're starting\nbetween minus 2 and 0.2.",
    "start": "2249710",
    "end": "2256970"
  },
  {
    "text": "And you can't really see it\nright now because the set is just a line, the initial set. But you'll be able\nto see the sets",
    "start": "2256970",
    "end": "2263350"
  },
  {
    "text": "as we go for future time steps. So for example, let's\ngo to the second time step or the third time step.",
    "start": "2263350",
    "end": "2269630"
  },
  {
    "text": "And now you can\nsee this set here is our reachable set\nat the third time step.",
    "start": "2269630",
    "end": "2276530"
  },
  {
    "text": "So here's all the samples. We know that those\nhave to be contained within that reachable set. And then we've now\ncomputed this set",
    "start": "2276530",
    "end": "2282930"
  },
  {
    "text": "by applying the Minkowski\nsum and linear transformation and all that stuff at\nthe third time set. And so we can just continue\nto do this for a while.",
    "start": "2282930",
    "end": "2290320"
  },
  {
    "text": "And we can understand\nthe set of states that the system could\nreach over time. And you guys will\nget to play around",
    "start": "2290320",
    "end": "2295950"
  },
  {
    "text": "with this and all of these cool\ngraphics in your project 3. So hopefully, you'll enjoy that.",
    "start": "2295950",
    "end": "2302770"
  },
  {
    "text": "So this all looks good. And what's cool is that this\ndoesn't intersect with our set",
    "start": "2302770",
    "end": "2307830"
  },
  {
    "text": "that we wanted to avoid. So this feels good all the way\nup to time step 21, we are safe.",
    "start": "2307830",
    "end": "2313170"
  },
  {
    "text": "But let's imagine\nthat we increase the magnitude of the noise. So we're now making the\nsystem a little bit more",
    "start": "2313170",
    "end": "2319650"
  },
  {
    "text": "difficult to handle because\nwe have more perception noise. And as we continue\nto increase that, we",
    "start": "2319650",
    "end": "2325410"
  },
  {
    "text": "get worse and worse to the point\nwhere now, our reachable set actually, by the 20\nsomething time step,",
    "start": "2325410",
    "end": "2331990"
  },
  {
    "text": "it actually intersects\nwith this set that we were trying to avoid. Yeah. So do we actually know--",
    "start": "2331990",
    "end": "2339420"
  },
  {
    "text": "if you reduce a little\nbit the noise maybe, you draw like this kind\nof green inner set.",
    "start": "2339420",
    "end": "2346010"
  },
  {
    "text": "Yeah. So you need some equation\nfor the boundary of the set. And do we get an exact form of\nthis equation out of the code",
    "start": "2346010",
    "end": "2354220"
  },
  {
    "text": "or anything? Yes, we get an exact\nform for this equation. I'm going to talk about-- to get an exact form, you need\nto have a certain type set",
    "start": "2354220",
    "end": "2361510"
  },
  {
    "text": "that you start with. But I'm going to talk\nabout how to get that. Yeah. [INAUDIBLE] Yeah. And also, this system is linear.",
    "start": "2361510",
    "end": "2367415"
  },
  {
    "text": "So for nonlinear, we're not\ngoing to be able to get that. This is obviously not\na nonlinear boundary. It's not a nonlinear boundary.",
    "start": "2367415",
    "end": "2373400"
  },
  {
    "text": "[INAUDIBLE] Good. I'm glad. [LAUGHTER] Yeah. Yeah, because maybe you\nwere going to touch on this.",
    "start": "2373400",
    "end": "2380030"
  },
  {
    "text": "But it's like right now, this\nis just a set of particles that we're propagating.",
    "start": "2380030",
    "end": "2385190"
  },
  {
    "text": "So what is the property of the\nset that it must contain so that we can do this properly?",
    "start": "2385190",
    "end": "2390220"
  },
  {
    "text": "The property-- What properties does this\nhave to have for it to work? We're going to get there.",
    "start": "2390220",
    "end": "2395510"
  },
  {
    "text": "OK. Yeah. So yeah. But then, basically, the other\npoint I wanted to make here",
    "start": "2395510",
    "end": "2401570"
  },
  {
    "text": "is, if we get our\nnoise super high, and it turns out like we do\nnow overlap with this set that we don't want to,\nbasically what's going on",
    "start": "2401570",
    "end": "2410180"
  },
  {
    "text": "is like all of our samples-- so we just ran a\nbunch of rollouts. All of our samples\ndon't look like they intersect with this set.",
    "start": "2410180",
    "end": "2416340"
  },
  {
    "text": "But again, we couldn't just\nconclude from the rollouts that our system was safe. And it turns out that if we\ndo this exact reachability,",
    "start": "2416340",
    "end": "2423480"
  },
  {
    "text": "we find that there is actually\nsome rollout where it's possible that it enters this set\nthat we want it to avoid.",
    "start": "2423480",
    "end": "2430530"
  },
  {
    "text": "And so our reachability is able\nto conclude that this system is unsafe, whereas when we\njust did a bunch of rollouts we didn't actually\nobserve this behavior.",
    "start": "2430530",
    "end": "2438620"
  },
  {
    "text": "So what I think is confusing\nis that we're not taking a convex hull of the samples.",
    "start": "2438620",
    "end": "2445710"
  },
  {
    "text": "Right, yeah. We're taking the\nmax initial state.",
    "start": "2445710",
    "end": "2451640"
  },
  {
    "text": "So it's not the\nsamples, it's the max. And then we just happen\nto plot some samples-- Oh, yes.",
    "start": "2451640",
    "end": "2456710"
  },
  {
    "text": "OK, got it. Yeah. Thanks for pointing that out. Yeah. So these samples are\ncompletely independent from how",
    "start": "2456710",
    "end": "2462089"
  },
  {
    "text": "we computed this. It just so happens that when\nwe do this, we know for a fact,",
    "start": "2462090",
    "end": "2467380"
  },
  {
    "text": "since this needs to include\nevery possible reachable set, all of our samples\nmust be inside of it. But this is just the result of\nrunning a bunch of rollouts.",
    "start": "2467380",
    "end": "2474520"
  },
  {
    "text": "Yeah, that makes sense. Yeah, thanks for\npointing that out. Yeah. So far, I think we've\ndiscussed how we can",
    "start": "2474520",
    "end": "2480210"
  },
  {
    "text": "check that our reachable set. Will there be a\nfuture state that possibly violates our safety?",
    "start": "2480210",
    "end": "2485440"
  },
  {
    "text": "But do we actually have a way\nto figure out what sequence-- will we discuss\ntechniques to figure out",
    "start": "2485440",
    "end": "2491099"
  },
  {
    "text": "what sequence of disturbances\nand initial states will bring us to that failure? That's a good question.",
    "start": "2491100",
    "end": "2496250"
  },
  {
    "text": " I think from the\nset based technique,",
    "start": "2496250",
    "end": "2502810"
  },
  {
    "text": "it's not super obvious how\nto get that counterexample. Some of the other\ntechniques we discussed,",
    "start": "2502810",
    "end": "2508990"
  },
  {
    "text": "it's possible to do that. But yeah, that's\na good question. I'd have to get\nback to you on that. ",
    "start": "2508990",
    "end": "2517190"
  },
  {
    "text": "Yeah. I mean, if I understand\nthis question correctly, I guess not every\npoint in this set",
    "start": "2517190",
    "end": "2522559"
  },
  {
    "text": "that we find is actually\nreachable, right? We have an overapproximation\nof all the-- No, no, this is the exact\nset of reachable states.",
    "start": "2522560",
    "end": "2529710"
  },
  {
    "text": "It's not an overapproximation. Yeah. ",
    "start": "2529710",
    "end": "2535773"
  },
  {
    "text": "So let's go back and see\nhow we do all of this because maybe that will clear\nup some of these questions here.",
    "start": "2535773",
    "end": "2543050"
  },
  {
    "text": "So let's talk about, before\nwe get into how we actually do this, let's just recap\nwhat kind of guarantees we can get here.",
    "start": "2543050",
    "end": "2549000"
  },
  {
    "text": "So we computed the reachable\nset out to some depth. So here are r1 through 4. I just showed you r1 through 21.",
    "start": "2549000",
    "end": "2556250"
  },
  {
    "text": "And if we find that\nr1 through h does not intersect with the\navoid set, then we can guarantee that the system\nwill not enter the avoid set",
    "start": "2556250",
    "end": "2562490"
  },
  {
    "text": "from timesteps 1 to h. But after time step h,\nthere's no guarantees.",
    "start": "2562490",
    "end": "2569700"
  },
  {
    "text": "So we basically just only\nsaid that for time step 1 through 4 in this case, or what\nI just showed you, 1 through 21,",
    "start": "2569700",
    "end": "2575200"
  },
  {
    "text": "we know it's safe. So you might say, OK, if we go\nout to a sufficient time step that we know our\nsystem is not going to be operating longer than\nthat, then we're good to go.",
    "start": "2575200",
    "end": "2582760"
  },
  {
    "text": "But for infinite time,\nthere's no guarantees here. All we did was compute\nit for 1 through h.",
    "start": "2582760",
    "end": "2590069"
  },
  {
    "text": "But there is one case\nwhere we could get a guarantee for infinite time. And that'd be like if we get\nsomething property like this.",
    "start": "2590070",
    "end": "2597610"
  },
  {
    "text": "So this might take a few\nkind of back and forth through your head a\nfew times, but I'll try to say it once here.",
    "start": "2597610",
    "end": "2602680"
  },
  {
    "text": "Basically, if we have--\nthis is our reachable set at one time step. And then at the\nnext time step, we",
    "start": "2602680",
    "end": "2607920"
  },
  {
    "text": "get a reachable set\nthat's fully contained within the reachable set that we\nhad at our previous time step.",
    "start": "2607920",
    "end": "2613930"
  },
  {
    "text": "We're basically\nsaying all states in this set have to go to some\nstate in this smaller set.",
    "start": "2613930",
    "end": "2620260"
  },
  {
    "text": "And since this smaller\nset is inside of this set, it must be the case that all\nstates in this smaller set",
    "start": "2620260",
    "end": "2626130"
  },
  {
    "text": "will also stay within\nthis smaller set. So that might need a few\ntimes through your head. But basically, the\nidea here is that if we",
    "start": "2626130",
    "end": "2633640"
  },
  {
    "text": "do happen to get a reachable\nset that has this property-- there's no guarantee that we\nwould end up finding this.",
    "start": "2633640",
    "end": "2638900"
  },
  {
    "text": "But as we're going out\nand computing these sets, if we do get something\nthat has this property, we can say that r sub\nd is an invariant set",
    "start": "2638900",
    "end": "2646450"
  },
  {
    "text": "and the system will stay\nwithin r sub d from there on out indefinitely.",
    "start": "2646450",
    "end": "2651880"
  },
  {
    "text": "Yeah. I'm wondering, is\nthe requirement even more relaxed than this\nthat we really only need",
    "start": "2651880",
    "end": "2658630"
  },
  {
    "text": "to be a subset of r reachable\nset over the time horizon from our start?",
    "start": "2658630",
    "end": "2664115"
  },
  {
    "text": "Yeah, you're exactly right. So the question was is it\neven more relaxed than this. And that's true. You could actually say\nreplace this with, yeah, 1",
    "start": "2664115",
    "end": "2672460"
  },
  {
    "text": "through d minus 1 I think\nis what you're saying. And we did realize that when we\nwere writing the book actually. And we actually implement\nthis in the book.",
    "start": "2672460",
    "end": "2680330"
  },
  {
    "text": "And the main problem is, as\nI was pointing out earlier, this set tends to be non-convex,\nand it's very difficult",
    "start": "2680330",
    "end": "2687310"
  },
  {
    "text": "to check if a set is a\nsubset of a non-convex set. So yes, if you\nhave that property, you can draw this conclusion.",
    "start": "2687310",
    "end": "2693730"
  },
  {
    "text": "It's just really hard\nto check that property. And maybe just\nanother quick thing. So I'm thinking that\nit should be rd minus 1",
    "start": "2693730",
    "end": "2702220"
  },
  {
    "text": "That should be the invariant\nset, rd, since we know that--",
    "start": "2702220",
    "end": "2708180"
  },
  {
    "text": "No, because it's basically\neverything in here we know goes to rd. And rd is in here.",
    "start": "2708180",
    "end": "2715079"
  },
  {
    "text": "So everything in rd\nalso has to go to rd. Yeah. That's true, eventually. But it can go out to rd minus\n1 before coming back to rd,",
    "start": "2715080",
    "end": "2722540"
  },
  {
    "text": "I think. ",
    "start": "2722540",
    "end": "2728670"
  },
  {
    "text": "I don't think so. Maybe-- Yeah, I guess maybe the point is\nthat it has to hold for all d.",
    "start": "2728670",
    "end": "2737430"
  },
  {
    "text": "Oh, I see. Sorry, I made a mistake\nin thinking about this. Is that true?",
    "start": "2737430",
    "end": "2743369"
  },
  {
    "text": "What has to hold for all these? To prove this, you have\nto prove it for all d. You just have to have\nthis happen at some point.",
    "start": "2743370",
    "end": "2749020"
  },
  {
    "text": "And then you can say\nfrom this point on, it's going to be in this set. I don't get that.",
    "start": "2749020",
    "end": "2754630"
  },
  {
    "text": "So we know that\neverything in rd minus 1. So let's say that this was\nthe reachable set at time set 5 was this outer thing.",
    "start": "2754630",
    "end": "2761350"
  },
  {
    "text": "At time step 6,\nall of these states must be in this rectangle.",
    "start": "2761350",
    "end": "2766400"
  },
  {
    "text": "So at time step 7, well, this\nrectangle was in this rectangle. And we already know that\neverything in this rectangle",
    "start": "2766400",
    "end": "2771670"
  },
  {
    "text": "goes to this one. So then everything\nin this one also must go to that\none at time step 7. And then we're just going\nto keep having that happen",
    "start": "2771670",
    "end": "2778900"
  },
  {
    "text": "for all the rest of time. Right. Yeah. [? Is there a way ?] I can\nhelp us understand this?",
    "start": "2778900",
    "end": "2785560"
  },
  {
    "text": "Is it the system? Sure. So let's say that we were\nlooking at our mass spring",
    "start": "2785560",
    "end": "2792280"
  },
  {
    "text": "damper and it was kind of\noscillating for a while, and then eventually it's kind\nof settling towards the middle.",
    "start": "2792280",
    "end": "2800157"
  },
  {
    "text": "You're probably going to\nend up getting a set such that the position and\nvelocity keeps getting-- the amount of\nreachable positions",
    "start": "2800157",
    "end": "2805690"
  },
  {
    "text": "and velocities will keep\ngetting smaller and smaller because you're\nsettling on the middle. And so then you'll\nprobably get a smaller set",
    "start": "2805690",
    "end": "2812420"
  },
  {
    "text": "of possible positions and\nvelocities at one time step than at the previous time step.",
    "start": "2812420",
    "end": "2817430"
  },
  {
    "text": "So, yeah. It seems like some\n[INAUDIBLE] knowledge expressed in that [INAUDIBLE]?",
    "start": "2817430",
    "end": "2825767"
  },
  {
    "text": "Well, you don't necessarily\nneed domain knowledge. I mean, because I'm saying\nthere's no guarantee you're going to get this property.",
    "start": "2825767",
    "end": "2831290"
  },
  {
    "text": "So domain knowledge might\nhelp you have a hint that maybe this would\nend up happening. And you're kind of hoping\nmost of the time, when",
    "start": "2831290",
    "end": "2837620"
  },
  {
    "text": "you do this, that this\nwill end up happening. So you can get an\ninfinite time guarantee. But really, after you\ncompute your reachable sets,",
    "start": "2837620",
    "end": "2843030"
  },
  {
    "text": "you would just need\nto look through them and see if you have\nthis property happening.",
    "start": "2843030",
    "end": "2848660"
  },
  {
    "text": "OK. And these are all with\nrespect to the assumptions that we made about all the\ninitial states and disturbances.",
    "start": "2848660",
    "end": "2855422"
  },
  {
    "text": "So don't forget, we got\na bunch of guarantees, but we also assumed a bunch\nof things along the way. So you should always\nkeep that in mind.",
    "start": "2855423",
    "end": "2861410"
  },
  {
    "text": "And to really drive the\npoint home about assumptions, I've got a story here. So we're going to go back\nto COVID, which is somehow",
    "start": "2861410",
    "end": "2870330"
  },
  {
    "text": "almost five years ago now. And so at the beginning of\nCOVID, I really didn't know-- I mean, like many of you, I\nhad no idea what was going on.",
    "start": "2870330",
    "end": "2877480"
  },
  {
    "text": "And I was like, I\ndon't know what to do. So I ended up going to my\nboyfriend's apartment, who's now my husband, and we're\nlike, oh, it'll be two weeks.",
    "start": "2877480",
    "end": "2884185"
  },
  {
    "text": "Fine, we'll just move\nin for these two weeks. Ended up being forever. And this is after\neight months of dating,",
    "start": "2884185",
    "end": "2891990"
  },
  {
    "text": "in a studio apartment. And I was, OK, well, we\ngotta figure this out.",
    "start": "2891990",
    "end": "2897160"
  },
  {
    "text": "We gotta both work, whatever. So it's a studio apartment. So he had a desk near the\nbed that he was working at,",
    "start": "2897160",
    "end": "2902349"
  },
  {
    "text": "and I was left with the kind of\ntiny kitchen table that he had. And this was like-- he was,\nbefore this period of time",
    "start": "2902350",
    "end": "2909480"
  },
  {
    "text": "and before work from\nhome, he was basically living at his office. So he was eating breakfast,\nlunch, dinner there.",
    "start": "2909480",
    "end": "2914770"
  },
  {
    "text": "So this apartment was\nnot really livable. He didn't really live\nin this apartment. And so all he really had\nfor his tiny kitchen table",
    "start": "2914770",
    "end": "2921930"
  },
  {
    "text": "was a folding chair\nthat-- one of those chairs you'd put\nout at a party when you don't have enough\nchairs for everyone else.",
    "start": "2921930",
    "end": "2928850"
  },
  {
    "text": "It was that kind of chair. And I was like, OK,\nthere's absolutely no way I can work from\nthis folding chair all day, every day.",
    "start": "2928850",
    "end": "2934880"
  },
  {
    "text": "My back was already\nstarting to kill me. And so I was like, OK, I need\nto go ahead and order a chair.",
    "start": "2934880",
    "end": "2941059"
  },
  {
    "text": "And so I went on Amazon and\nfound a chair for myself.",
    "start": "2941060",
    "end": "2946160"
  },
  {
    "text": "And so I found\nspecifically this chair. And I was like, it's totally\nbachelor pad at this point.",
    "start": "2946160",
    "end": "2951632"
  },
  {
    "text": "Might as well spruce it up\nwith a nice hot pink chair in the middle of the apartment. So I ordered this desk chair.",
    "start": "2951632",
    "end": "2957150"
  },
  {
    "text": "And I didn't really know\nwhat reasonable prices for desk chairs were. But I looked at this\nand I was like, wow, this is super reasonably priced.",
    "start": "2957150",
    "end": "2962940"
  },
  {
    "text": "Perfect, I'll just\norder this chair. So I ordered it. You see, March 17, 2020.",
    "start": "2962940",
    "end": "2967950"
  },
  {
    "text": "Pretty crazy time. And so then the chair\ncomes a few days later,",
    "start": "2967950",
    "end": "2973310"
  },
  {
    "text": "and I'm all excited. I get the notification\nit's there. I run downstairs. I'm like, yes, no more of\nthis terrible folding chair.",
    "start": "2973310",
    "end": "2978900"
  },
  {
    "text": "And I go downstairs and the\nbox is about this big maybe. And I'm like, weird, I feel like\na chair shouldn't fit in that.",
    "start": "2978900",
    "end": "2986200"
  },
  {
    "text": "But maybe it's just\nin a lot of parts. So I pick up the box. And I'm like, wow, this\nchair is really light. I must have bought some\nreally nice, light chair.",
    "start": "2986200",
    "end": "2994289"
  },
  {
    "text": "Get upstairs, open the box. Still convinced that\nthis is a chair. And then, yeah, wasn't a chair.",
    "start": "2994290",
    "end": "3004349"
  },
  {
    "text": "And in fact, it was just\nthese two pieces of glass. And so you can see this is\nabout the size that the box was.",
    "start": "3004350",
    "end": "3011220"
  },
  {
    "text": "There was no way that there\nwas a chair in that box. And I was just stuck now\nwith this folding chair",
    "start": "3011220",
    "end": "3017120"
  },
  {
    "text": "with some hot pink cloth on it. [INAUDIBLE]",
    "start": "3017120",
    "end": "3022220"
  },
  {
    "text": "I don't know. Probably 20 bucks or something. There was a lot of-- [INAUDIBLE] again.",
    "start": "3022220",
    "end": "3028609"
  },
  {
    "text": "I have not ordered it again. But these covers\nare actually still on my husband's desk chair. He really liked them and\ntook them for himself.",
    "start": "3028610",
    "end": "3034898"
  },
  {
    "text": "So-- but yeah, so\nthat was a bummer. I had to wait a few extra\ndays for an actual chair",
    "start": "3034898",
    "end": "3040940"
  },
  {
    "text": "to come, which I made sure to\nreally check the next time. And the key thing\nhere is that I just",
    "start": "3040940",
    "end": "3046140"
  },
  {
    "text": "assumed that if the\npicture of the item is a chair, that it\nis, in fact, a chair. But you should always read.",
    "start": "3046140",
    "end": "3053020"
  },
  {
    "text": "So always read the fine print. Assumptions matter. Or in this case, always read the\nextremely large obvious print",
    "start": "3053020",
    "end": "3061500"
  },
  {
    "text": "because if I had really\njust read anything, I probably wouldn't have\nbeen in that situation. So there you go.",
    "start": "3061500",
    "end": "3067480"
  },
  {
    "text": "Make sure you're always keeping\ntrack of your assumptions. ",
    "start": "3067480",
    "end": "3073860"
  },
  {
    "text": "Back to set\npropagation techniques. So we were talking\nearlier about how if we want to do\nmatrix multiplication,",
    "start": "3073860",
    "end": "3080319"
  },
  {
    "text": "and we ran into a similar\nthing with the Minkowski sum, that if we have this whole\ninfinite set of points that we now need to multiply\nby a to get this new one,",
    "start": "3080320",
    "end": "3088170"
  },
  {
    "text": "we can't do that. We don't have time to\ndo infinite points. And so there's these\ncommon representations that have efficient\nways of doing this.",
    "start": "3088170",
    "end": "3095490"
  },
  {
    "text": "And so now, let's talk about\nwhat actually are these nice set representations.",
    "start": "3095490",
    "end": "3101340"
  },
  {
    "text": "So first, I'm just going to\nlist some properties that would be nice for our sets to have.",
    "start": "3101340",
    "end": "3107434"
  },
  {
    "text": "And then I'm going to\nshow you some sets that have these properties. So one nice property\nfor a set would",
    "start": "3107435",
    "end": "3113600"
  },
  {
    "text": "be a finite representation. So I don't have to sit down\nand tell you every single point that's in the set. I don't have to be like 1.1 is\nin the set and 1.2 is in the set",
    "start": "3113600",
    "end": "3120825"
  },
  {
    "text": "and 3 is in the set. We can just specify something\nlike maybe for a rectangle, I could just tell you the\ncorners of the rectangle,",
    "start": "3120825",
    "end": "3126650"
  },
  {
    "text": "and you would know every\npoint that's in the set. So you want to have some of\nfinite representation like that so we can tell you the\npoints that are in a set",
    "start": "3126650",
    "end": "3132878"
  },
  {
    "text": "without having to list them all. Efficient set operations--\nso we've already talked a bunch about this.",
    "start": "3132878",
    "end": "3137880"
  },
  {
    "text": "We want to be able to compute\nthat linear transformation or Minkowski sum or\nintersection or union without having to just apply\nit to every single point",
    "start": "3137880",
    "end": "3145400"
  },
  {
    "text": "in the set. And then finally,\nsometimes it's nice to have",
    "start": "3145400",
    "end": "3150890"
  },
  {
    "text": "this property where things are\nclosed under set operations. And what that\nbasically means is if I apply an operation to a set, I\nget a set of the same type out.",
    "start": "3150890",
    "end": "3160565"
  },
  {
    "text": "So to give you a\nconcrete example of that, the intersection of two\nrectangles is also a rectangle.",
    "start": "3160565",
    "end": "3165883"
  },
  {
    "text": "So for example, if we have\nthese two pink rectangles here, and we look at\ntheir intersection, that intersection\nis also a rectangle.",
    "start": "3165883",
    "end": "3172960"
  },
  {
    "text": "And so we say that rectangles\nare closed under intersection. And just a little test for you.",
    "start": "3172960",
    "end": "3180150"
  },
  {
    "text": "Our rectangle is closed\nunder union I see a-- yeah.",
    "start": "3180150",
    "end": "3185290"
  },
  {
    "text": "No, they're not\nclosed under union. Because now we're looking at\nwhat is this whole space here. Well, that's certainly\nnot a rectangle.",
    "start": "3185290",
    "end": "3191890"
  },
  {
    "text": "So they're not\nclosed under union So those are nice\nproperties to have. And what are sets that\nhave these nice properties?",
    "start": "3191890",
    "end": "3198713"
  },
  {
    "text": "Convex sets. They tend to be quite nice. A convex set is defined\nby this equation here.",
    "start": "3198713",
    "end": "3204609"
  },
  {
    "text": "But I think rather than looking\nat all the math, the easier thing to do is kind of just\nlook at what it means visually.",
    "start": "3204610",
    "end": "3210850"
  },
  {
    "text": "So a convex set is a\nset such that if you draw a line between any\ntwo points in the set,",
    "start": "3210850",
    "end": "3216790"
  },
  {
    "text": "that line will be contained\nentirely within the set. So I can pick any two points in\nhere, draw a line between them,",
    "start": "3216790",
    "end": "3222099"
  },
  {
    "text": "and that line is going\nto be in the set. But then if there's some way\nto take two points in the set",
    "start": "3222100",
    "end": "3227170"
  },
  {
    "text": "and draw a line between\nthem, and that line is not contained within the set,\nthen our set is not convex.",
    "start": "3227170",
    "end": "3233150"
  },
  {
    "text": "So this set here is convex,\nthis one is not convex.",
    "start": "3233150",
    "end": "3238599"
  },
  {
    "text": "And specifically, we are big\nfans of polytopes in this class. So we're going to mostly\nbe talking-- so there's",
    "start": "3238600",
    "end": "3244300"
  },
  {
    "text": "other types of convex sets. There's ellipsoids and\ncircles and things like that.",
    "start": "3244300",
    "end": "3249645"
  },
  {
    "text": "In this class,\nwe're mostly going to talk about a convex\nset called a polytope. And if you want to know about\nthose other cool types of convex",
    "start": "3249645",
    "end": "3256990"
  },
  {
    "text": "sets, you can take convex\noptimization with Stephen Boyd. And it's his birthday today. So if you happen to see him, you\ncan wish him a happy birthday.",
    "start": "3256990",
    "end": "3264453"
  },
  {
    "text": " Oh, did you want\na picture of that? Yeah, go back for a second.",
    "start": "3264453",
    "end": "3271220"
  },
  {
    "text": "Do you to film the fireworks? Yeah, fireworks too, please. OK. Ready? Yeah. ",
    "start": "3271220",
    "end": "3279150"
  },
  {
    "text": "Thank you. [LAUGHTER] ",
    "start": "3279150",
    "end": "3284680"
  },
  {
    "text": "So to talk about what a polytope\nis, which we're big fans of, let's build out a polytope.",
    "start": "3284680",
    "end": "3291059"
  },
  {
    "text": "So polytopes are made\nup of these things called linear inequalities. And a linear inequality is\nan inequality with this form.",
    "start": "3291060",
    "end": "3299650"
  },
  {
    "text": "So a and b are just vectors. And this is a constant that\nwe pick and x is our variable.",
    "start": "3299650",
    "end": "3304990"
  },
  {
    "text": "And so we're just saying\na transpose x less than or equal to b. That's a linear inequality. And if we actually see what\nthat looks like visually,",
    "start": "3304990",
    "end": "3311910"
  },
  {
    "text": "we can basically plot the\nline a transpose x equals b. So here, we've picked\nvalues for a and b we're",
    "start": "3311910",
    "end": "3317340"
  },
  {
    "text": "going to call them a1 and b1. And this line represents\nthe equality part of it.",
    "start": "3317340",
    "end": "3322960"
  },
  {
    "text": "And then everything on\nthis side of the line is points that satisfy\nthat linear inequality.",
    "start": "3322960",
    "end": "3328809"
  },
  {
    "text": "And we call this kind of\nspace of all the points that satisfy the\ninequality a half space.",
    "start": "3328810",
    "end": "3334569"
  },
  {
    "text": "So it's not bounded,\nit's infinite. It extends far off\nof this plot here.",
    "start": "3334570",
    "end": "3339950"
  },
  {
    "text": "It extends forever in space. And so you can think of this\nas dividing all infinite space",
    "start": "3339950",
    "end": "3345670"
  },
  {
    "text": "in half by kind of\ncutting through it with this linear inequality. And then if we have multiple\nlinear inequalities,",
    "start": "3345670",
    "end": "3352660"
  },
  {
    "text": "and we take the\nintersection of them-- so we're taking the\nintersection of half spaces-- then we get a polyhedron.",
    "start": "3352660",
    "end": "3358550"
  },
  {
    "text": "So the idea here is we now\nhave a linear inequality with a1 and b1. We pick another\nlinear inequality",
    "start": "3358550",
    "end": "3365170"
  },
  {
    "text": "defined by a2 and b2-- these are the\nvectors a1 and a2--",
    "start": "3365170",
    "end": "3370467"
  },
  {
    "text": "and we take the\nintersection of those. Now we have a polyhedron. So it's not bounded, but it's\nmore than just a half space.",
    "start": "3370467",
    "end": "3377660"
  },
  {
    "text": "So we have this\nshape here now that extends forever into infinity.",
    "start": "3377660",
    "end": "3382930"
  },
  {
    "text": "And then if we intersect\nenough of these and we get a bounded\nintersection of half spaces,",
    "start": "3382930",
    "end": "3388369"
  },
  {
    "text": "then we get something\ncalled a polytope. And so the way we\ntend to represent",
    "start": "3388370",
    "end": "3393440"
  },
  {
    "text": "polytopes, at least one way,\nis by just kind of stacking these inequalities\non top of each other and saying that all of these\ninequalities need to be true.",
    "start": "3393440",
    "end": "3401130"
  },
  {
    "text": "And then we get this kind\nof bounded intersection of half spaces.",
    "start": "3401130",
    "end": "3406250"
  },
  {
    "text": "Yeah. Can you formally\ngive a definition for what [INAUDIBLE] is? [INAUDIBLE]",
    "start": "3406250",
    "end": "3411599"
  },
  {
    "start": "3411600",
    "end": "3417680"
  },
  {
    "text": "I'm sure someone\ncan, but I cannot. Yeah. Maybe bounded in\nlike a normal sense.",
    "start": "3417680",
    "end": "3424500"
  },
  {
    "text": "All the points in the set have\nto have some norm that's not [INAUDIBLE].",
    "start": "3424500",
    "end": "3429980"
  },
  {
    "text": "OK, yeah. ",
    "start": "3429980",
    "end": "3436502"
  },
  {
    "text": "So we're talking\nabout polytopes. There's two different\nrepresentations of polytopes",
    "start": "3436502",
    "end": "3441680"
  },
  {
    "text": "that we'll talk\nabout in this class. One is an h polytope. So that's the representation\nwe were just talking about.",
    "start": "3441680",
    "end": "3447203"
  },
  {
    "text": "So you can think of h\nbeing for half space. And it's just a\nset of half spaces. And so for this matrix\na and this vector",
    "start": "3447203",
    "end": "3454080"
  },
  {
    "text": "b, you can imagine we just\nstacked all of the a's for each of the linear\ninequalities on top of each other, and we\nstacked all the b's",
    "start": "3454080",
    "end": "3460680"
  },
  {
    "text": "on top of each other. And then the polytope\nis just the set of points that satisfy\nthis inequality.",
    "start": "3460680",
    "end": "3469350"
  },
  {
    "text": "There's also another\nrepresentation that sometimes useful\ncalled the v polytope. So you can think\nof v for vertices.",
    "start": "3469350",
    "end": "3475420"
  },
  {
    "text": "And we talk about a v\npolytope as a convex hull of a set of vertices,\nso written like that.",
    "start": "3475420",
    "end": "3481650"
  },
  {
    "text": "And the convex hull\nof a set of points. So for example,\nthis set of points here is just the\nsmallest convex set",
    "start": "3481650",
    "end": "3487470"
  },
  {
    "text": "that contains all of the points. So the convex hull\nfor this set of points is this set here that's\ndefined by these points here.",
    "start": "3487470",
    "end": "3497070"
  },
  {
    "text": "And so when we write down\nthe vertices of v polytope, we really only need these\npoints that define the convex",
    "start": "3497070",
    "end": "3502830"
  },
  {
    "text": "hull on the edge. So a lot of times, we just write\nit down as this set of points. These are the vertices,\nbasically, for the polytope.",
    "start": "3502830",
    "end": "3510110"
  },
  {
    "text": "So you can think\nabout it as there's two ways to represent polytopes. Actually, there's\nmore than two ways. But the two ways that\nwe're going to talk about",
    "start": "3510110",
    "end": "3515918"
  },
  {
    "text": "in this class are\nthe h polytope where we have an intersection\nof half spaces, or the v polytope where we\njust specify its vertices.",
    "start": "3515918",
    "end": "3524450"
  },
  {
    "text": "And both of these\nare equivalent. So you could take a v\npolytope and convert it to be represented as an\nh polytope and vice versa.",
    "start": "3524450",
    "end": "3531420"
  },
  {
    "text": "So it's always possible\nto represent it in both of these ways.",
    "start": "3531420",
    "end": "3536450"
  },
  {
    "text": "Just sometimes, one way is\nmore useful than others. And specifically,\na v polytope is",
    "start": "3536450",
    "end": "3542570"
  },
  {
    "text": "quite useful for doing things\nlike linear transformations and Minkowski sums. So we're going to look\nat this v polytope idea",
    "start": "3542570",
    "end": "3548990"
  },
  {
    "text": "and talk about now how do\nwe actually apply this set operation without doing all\ninfinite points to the polytope.",
    "start": "3548990",
    "end": "3555690"
  },
  {
    "text": "So let's say we want to multiply\nthis polytope by some matrix a. It turns out it\nhas this equation.",
    "start": "3555690",
    "end": "3562200"
  },
  {
    "text": "Well, let me just visually\nshow you what happens here. So let's imagine we\nhave this polytope here. It has vertices v1, v2, v3, v4.",
    "start": "3562200",
    "end": "3570040"
  },
  {
    "text": "And basically, we're saying\nthat the new polytope is the convex hull of-- if we take a and we multiply\nit by each vertices.",
    "start": "3570040",
    "end": "3578170"
  },
  {
    "text": "So all I'm going to do here is\nmultiply each vertices by a. That moves the vertices\nto some new points.",
    "start": "3578170",
    "end": "3584020"
  },
  {
    "text": "We connect them together\nto get the convex hull. And then this is the\nresulting set of a times p.",
    "start": "3584020",
    "end": "3591137"
  },
  {
    "text": "So we didn't have to take\nall infinite points in p and multiply them by a. It turns out we just had to\nmultiply the vertices by a,",
    "start": "3591137",
    "end": "3597090"
  },
  {
    "text": "connected together, and then\nwe get the resulting set. It's going to be a similar\nthing for the Minkowski sum.",
    "start": "3597090",
    "end": "3604270"
  },
  {
    "text": "So this is what it looks like. And basically, we're taking the\nconvex hull of all combinations",
    "start": "3604270",
    "end": "3609720"
  },
  {
    "text": "of sums of the vertices. So let me show you visually\nwhat that looks like. So we have our set p, and\nwe want to add it to set q.",
    "start": "3609720",
    "end": "3616740"
  },
  {
    "text": "Basically, what we\nneed to do is we need to take every\ncombination of a sum of a vertex for the first one\nand a vertex for the second one.",
    "start": "3616740",
    "end": "3626442"
  },
  {
    "text": "And so, basically,\nwhat we're going to do is you could imagine\nit's kind of equivalent to taking this polytope here and\nmoving it to each vertex of q.",
    "start": "3626442",
    "end": "3637119"
  },
  {
    "text": "And now what we can do is we\ncan say, if I sum these two, I'd end up here. If I sum this one and\nthis one, I'd end up here.",
    "start": "3637120",
    "end": "3644380"
  },
  {
    "text": "And this one and this one,\nI'd end up here, and so on. So this is equivalent to taking\nall of those individual sums",
    "start": "3644380",
    "end": "3649569"
  },
  {
    "text": "of the vertices. And then we need to\ntrace out the convex hull of this new shape. So we just trace out what\nwe end up with there.",
    "start": "3649570",
    "end": "3656869"
  },
  {
    "text": "And that gives us\nthe Minkowski sum. ",
    "start": "3656870",
    "end": "3662380"
  },
  {
    "text": "Any questions on that one? Yeah. [INAUDIBLE] just\ngetting a little",
    "start": "3662380",
    "end": "3670330"
  },
  {
    "text": "confused by the neutral type. So basically, what's\nhappening here is we're saying, for all\ncombinations of v1 and v2",
    "start": "3670330",
    "end": "3678039"
  },
  {
    "text": "where these are vertices\nof our sets p and q, we want to add v1 to v2.",
    "start": "3678040",
    "end": "3683870"
  },
  {
    "text": "And so one way to think\nof that is to say-- let's say I wanted to add\nthis vertex to this one.",
    "start": "3683870",
    "end": "3689560"
  },
  {
    "text": "That would be like taking\nthis and adding on this. So it's like moving\nthis one to here.",
    "start": "3689560",
    "end": "3694810"
  },
  {
    "text": "Let's say I wanted to\nadd this one to this one. Well, that's going\nto end up over here. And so the way that\nit ends up looking",
    "start": "3694810",
    "end": "3701070"
  },
  {
    "text": "is it's kind of equivalent\nto is if you took this and you put it on\ntop of each vertex, and then you looked at all\nof these resulting vertices,",
    "start": "3701070",
    "end": "3709680"
  },
  {
    "text": "and you computed the\nconvex hull of those. So that's what we're doing. Yeah. I think the question\nis that the top left",
    "start": "3709680",
    "end": "3717720"
  },
  {
    "text": "of the left vertex [INAUDIBLE]",
    "start": "3717720",
    "end": "3724483"
  },
  {
    "text": "The question is that my\nslides are over there. Yeah, OK. Thank you for pointing that out.",
    "start": "3724483",
    "end": "3730109"
  },
  {
    "text": "This should have been like that. Yeah, thanks for that. Oh, yeah. Yeah, I just put it on the\nwrong spot, which is a bummer",
    "start": "3730110",
    "end": "3737560"
  },
  {
    "text": "because I had such\na cool animation. But, oh, well. I'll fix it for next time.",
    "start": "3737560",
    "end": "3742830"
  },
  {
    "text": "So yeah, this is actually\nnot the resulting sum. The resulting sum is like that. But yeah, thanks for\npointing that out.",
    "start": "3742830",
    "end": "3749500"
  },
  {
    "text": " So now, what we can\ndo is we can start",
    "start": "3749500",
    "end": "3755210"
  },
  {
    "text": "thinking about the complexity\nof doing all of this in terms of the number of vertices.",
    "start": "3755210",
    "end": "3760410"
  },
  {
    "text": "So when we did the\nlinear transformation, we started with four vertices\nhere-- v1, v2, v3, v4.",
    "start": "3760410",
    "end": "3766860"
  },
  {
    "text": "And we did the linear\ntransformation. And we ended up again\nwith four vertices. So doing a linear\ntransformation doesn't really",
    "start": "3766860",
    "end": "3772910"
  },
  {
    "text": "change, in general,\nthe number of vertices that we have for our set. But when we do a\nMinkowski sum, we",
    "start": "3772910",
    "end": "3780890"
  },
  {
    "text": "had four vertices\non this one, we have four vertices on this one. And then if we just look at the\nnumber of candidate vertices",
    "start": "3780890",
    "end": "3786500"
  },
  {
    "text": "because we're taking the convex\nhull of everything-- again, don't look at this. It should be over here--",
    "start": "3786500",
    "end": "3791809"
  },
  {
    "text": "but the point still\nholds true that there's 16 candidate vertices\nnow that we need",
    "start": "3791810",
    "end": "3797930"
  },
  {
    "text": "to take the convex hull of. So we know that the number\nof vertices in our new shape is going to be bounded\nby that number.",
    "start": "3797930",
    "end": "3803520"
  },
  {
    "text": "It's going to be less\nthan or equal to 16. And in general, it's\ngoing to be less than or equal to the\nnumber of vertices",
    "start": "3803520",
    "end": "3809359"
  },
  {
    "text": "for p times the number\nof vertices for q. So if we summarize\nthat here, we can",
    "start": "3809360",
    "end": "3816080"
  },
  {
    "text": "look at what we need to do\nfor our linear reachability. So at every time step, we\nhad this equation here.",
    "start": "3816080",
    "end": "3822180"
  },
  {
    "text": "And it had three\nlinear transformations in it and three Minkowski sums. And so we can look\nat this and try",
    "start": "3822180",
    "end": "3828410"
  },
  {
    "text": "to understand what is\nthe maximum factor, the maximum amount we could\nincrease our number of vertices",
    "start": "3828410",
    "end": "3833960"
  },
  {
    "text": "in our reachable set by\njust applying this equation to rd minus 1 to get rd.",
    "start": "3833960",
    "end": "3839870"
  },
  {
    "text": "And so the linear\ntransformations don't really matter much because, again,\nthey don't change the number of vertices in our set.",
    "start": "3839870",
    "end": "3845970"
  },
  {
    "text": "But we're doing these\nthree Minkowski sums. And specifically, we're\ndoing rd minus 1, x0, xa, xs.",
    "start": "3845970",
    "end": "3853382"
  },
  {
    "text": "And so we're going to end\nup multiplying all of those together. And so we know that\nthe number of vertices for our reachable set\nat the next time step",
    "start": "3853382",
    "end": "3860150"
  },
  {
    "text": "is bounded by this number here. And that's just\nfor one time step.",
    "start": "3860150",
    "end": "3865573"
  },
  {
    "text": "But let's go all the\nway back to when we started from our initial set. And then we can see we need to\ndo this for every single step.",
    "start": "3865573",
    "end": "3871810"
  },
  {
    "text": "So every time we do\nanother one, we're going to multiply by\nthis number again. So we're going to\ngo all the way up",
    "start": "3871810",
    "end": "3877710"
  },
  {
    "text": "to depth d that's\nnow in the exponent. And what we've\nbasically shown is that there's this\nexponential growth",
    "start": "3877710",
    "end": "3883140"
  },
  {
    "text": "in the bound on the number\nof vertices with the depth. And typically, when we\nsee exponential growth,",
    "start": "3883140",
    "end": "3888150"
  },
  {
    "text": "we don't like this. That's not good, because\nwe're going to get, especially for high dimensional\nsystems, we're going to get really\nhuge polytopes with lots",
    "start": "3888150",
    "end": "3895890"
  },
  {
    "text": "of vertices-- not\nhuge volume wise, but lots of vertices\nfor these polytopes",
    "start": "3895890",
    "end": "3901500"
  },
  {
    "text": "as we increase the depth. And so that can be really\ndifficult if you, for example, have memory constraints\nor generally,",
    "start": "3901500",
    "end": "3907950"
  },
  {
    "text": "computationally, this can\nblow up quite quickly. So one thing that\nwe can do about this",
    "start": "3907950",
    "end": "3913530"
  },
  {
    "text": "is use something\ncalled a zonotope. So this kind of motivates\nthe idea for this thing called a zonotope.",
    "start": "3913530",
    "end": "3919640"
  },
  {
    "text": "And zonotopes are a\nspecial type of polytope. So not all polytopes\nare zonotopes, but all zonotopes are polytopes.",
    "start": "3919640",
    "end": "3926540"
  },
  {
    "text": "And they're represented\nas the Minkowski sum of a set of line segments\ncentered at some point.",
    "start": "3926540",
    "end": "3932150"
  },
  {
    "text": "So here's the math for it. And if you're anything\nlike me, the first time you saw zonotopes,\nthe first time I saw",
    "start": "3932150",
    "end": "3937970"
  },
  {
    "text": "zonotopes-- this is what\nyou look like right now. I was just like, what is\nthis shape, this doesn't look like anything to me,\nwhat are zonotopes,",
    "start": "3937970",
    "end": "3944940"
  },
  {
    "text": "I don't understand this. That's kind of how I felt. So\nlet's build a zonotope here. So, like I said, zonotopes\nconsist of these things.",
    "start": "3944940",
    "end": "3951960"
  },
  {
    "text": "It consists of a center point,\nand then a list of generators. And these generators\nare just vectors.",
    "start": "3951960",
    "end": "3957240"
  },
  {
    "text": "So here, we're going\nto say that we have three different generators. And it's the Minkowski\nsum of the center",
    "start": "3957240",
    "end": "3963110"
  },
  {
    "text": "with all of these generators. So let's look at just one\nof these generators for now.",
    "start": "3963110",
    "end": "3968670"
  },
  {
    "text": "Let's look at the blue one. And we're going to\ntake the Minkowski sum. And for zonotopes, we\ntake the Minkowski sum",
    "start": "3968670",
    "end": "3975650"
  },
  {
    "text": "of the positive version\nof the generator and the negative version. So we're going to need the one\ngoing in the positive direction",
    "start": "3975650",
    "end": "3981143"
  },
  {
    "text": "and then one going in\nthe opposite direction. This is how they're defined. So we're going to\ntake our center point.",
    "start": "3981143",
    "end": "3986825"
  },
  {
    "text": "And then if you remember, when\nwe took the Minkowski sum, we took each vertex of the thing\nwe were trying to add it to.",
    "start": "3986825",
    "end": "3992210"
  },
  {
    "text": "And we added on the shape\nthat we were trying to add. So here, we're trying to\nadd this line segment.",
    "start": "3992210",
    "end": "3997730"
  },
  {
    "text": "We only have one vertex right\nnow that's the center point. And so we just add it in both\ndirections to the center point.",
    "start": "3997730",
    "end": "4004333"
  },
  {
    "text": "And then when we took\nthe Minkowski sum, we traced out the convex hull. So we can just trace out\nthe convex hull of this.",
    "start": "4004333",
    "end": "4009610"
  },
  {
    "text": "It's just a line. And our new set\nnow is just a line. So now we've used--",
    "start": "4009610",
    "end": "4015760"
  },
  {
    "text": "yeah. Sorry. Can you repeat what\nthe generators-- just what are the building\nblocks [INAUDIBLE]?",
    "start": "4015760",
    "end": "4021690"
  },
  {
    "text": "A center and a\nlist of generators. That's how they're defined. So you just have to pick those. [INAUDIBLE]",
    "start": "4021690",
    "end": "4026910"
  },
  {
    "text": "Yeah. So now we've used\nthe first generator. Now we're going to go\nto another generator.",
    "start": "4026910",
    "end": "4032200"
  },
  {
    "text": "So let's go to this pink one. And we're going to\ndo the Minkowski sum of this shape we have\nnow with this pink generator.",
    "start": "4032200",
    "end": "4038530"
  },
  {
    "text": "So we're going to add\nthis pink generator to all of our endpoints,\nor all of our vertices of our current set.",
    "start": "4038530",
    "end": "4044710"
  },
  {
    "text": "So that's what\nthis is doing here. And then we trace out the\nconvex hull of our new set.",
    "start": "4044710",
    "end": "4051160"
  },
  {
    "text": "And then we get this\npurple set here. And now we have\none generator left.",
    "start": "4051160",
    "end": "4056980"
  },
  {
    "text": "So we're going to\ndo the same thing. We're going to add it to all of\nthe vertices of our current set,",
    "start": "4056980",
    "end": "4062940"
  },
  {
    "text": "trace out the convex hull. And then here's our zonotope.",
    "start": "4062940",
    "end": "4068775"
  },
  {
    "text": "And it turns out, if you picked\nany order for those generators, you'd end up getting the same\nshape when you trace it out.",
    "start": "4068775",
    "end": "4074619"
  },
  {
    "text": "Yeah. Is this 2D because [INAUDIBLE]? In this case, it's 2D because\nour generators are 2D.",
    "start": "4074620",
    "end": "4082800"
  },
  {
    "text": "Just because they're 2--\nif I picked 3D generators, then we could be going in\ndifferent directions and stuff. Yeah, I'm just\nshowing 2D for now.",
    "start": "4082800",
    "end": "4089760"
  },
  {
    "text": "But these could be\narbitrary dimensions. Yeah. ",
    "start": "4089760",
    "end": "4097710"
  },
  {
    "text": "So that's how you\nget a zonotope. I still think there may be a\nlittle bit hard to visualize,",
    "start": "4097710",
    "end": "4103109"
  },
  {
    "text": "because even from\nthese generators, I don't know if I'd be\nable to picture this. But that's in general of what's\ngoing on with a zonotope.",
    "start": "4103109",
    "end": "4111738"
  },
  {
    "text": "But what's nice\nabout zonotopes is that it turns out that\noperations for them, when we do linear transformations\nin Minkowski sums,",
    "start": "4111739",
    "end": "4117469"
  },
  {
    "text": "end up being a little bit nicer\nthan the generic operations for polytopes. So when we do linear\ntransformation of a zonotope,",
    "start": "4117470",
    "end": "4125160"
  },
  {
    "text": "for example, we want to multiply\nthe zonotope by some matrix A. And so all we have to do\nis multiply the center by a",
    "start": "4125160",
    "end": "4133759"
  },
  {
    "text": "and then multiply each\nof its generators by a. And that gives us\nthe new zonotope. For Minkowski sum,\nwhat's kind of cool is",
    "start": "4133760",
    "end": "4140930"
  },
  {
    "text": "we just add the two\ncenters together, and then we just\nconcatenate the list of generators for each of them.",
    "start": "4140930",
    "end": "4146370"
  },
  {
    "text": "So we just have now\nboth sets of generators as our generators for the\nnew Minkowski sum zonotope.",
    "start": "4146370",
    "end": "4154410"
  },
  {
    "text": "And so what's kind\nof nice about this is that, just like\nwith polytopes, the number of generators\nstays the same.",
    "start": "4154410",
    "end": "4160330"
  },
  {
    "text": "So now we're thinking in\nterms of how many generators we're going to\nhave to keep track of to represent this shape\ninstead of how many vertices.",
    "start": "4160330",
    "end": "4166922"
  },
  {
    "text": "And so the number of\ngenerators stays the same for a linear transformation. But for the Minkowski sum,\nthe number of generators",
    "start": "4166923",
    "end": "4172830"
  },
  {
    "text": "grows linearly now. So the number of generators\nthat the previous set had, plus the number of generators\nthat the new set had",
    "start": "4172830",
    "end": "4180189"
  },
  {
    "text": "is going to be the number of\ngenerators in the Minkowski sum. So we're not\nmultiplying anymore. We're adding things,\nwhich is much better.",
    "start": "4180189",
    "end": "4187299"
  },
  {
    "text": "So it's not exponentially\nlike before. And that's why\nzonotopes in general can be much more computationally\ntractable to work with.",
    "start": "4187300",
    "end": "4196090"
  },
  {
    "text": "Yeah. Do these operations\nrequire that our generators are symmetric about our center? So like you said,\nwe have to consider",
    "start": "4196090",
    "end": "4203070"
  },
  {
    "text": "that it can go in the negative. I guess this generator is also\nin the negative direction.",
    "start": "4203070",
    "end": "4208860"
  },
  {
    "text": "The generators-- I guess I'm trying\nto figure out is this requirement about this\nsymmetry part of the definition",
    "start": "4208860",
    "end": "4216730"
  },
  {
    "text": "of a generator or part of the-- the assumptions we need-- Yeah.",
    "start": "4216730",
    "end": "4222170"
  },
  {
    "text": "If you look at the actual\nmath definition of a zonotope, it's like alpha\ntimes this vector g, and alpha goes between\nnegative 1 and 1.",
    "start": "4222170",
    "end": "4228949"
  },
  {
    "text": "So that's how you get the both\nsides of it regardless-- yeah, it's part of the definition. Yeah. But the point you're\nmaking is interesting,",
    "start": "4228950",
    "end": "4235610"
  },
  {
    "text": "which is that zonotopes are\nsymmetric about the center, always. So that's why not all\npolytopes are like that.",
    "start": "4235610",
    "end": "4242150"
  },
  {
    "text": "So not all polytopes can\nbe written as zonotopes. So we can't always do\nthis type of thing. ",
    "start": "4242150",
    "end": "4252650"
  },
  {
    "text": "And one other lovely\nthing about zonotopes is that the beloved\nhyperrectangle is actually just a special case of a\nzonotope in which the generators",
    "start": "4252650",
    "end": "4259929"
  },
  {
    "text": "are aligned with the axes. And so hopefully, many of\nyou have seen hyperrectangles",
    "start": "4259930",
    "end": "4265000"
  },
  {
    "text": "before, at least rectangles. So in one dimension, a\nhyperrectangle is just a line. In two dimensions,\nit's a rectangle.",
    "start": "4265000",
    "end": "4271159"
  },
  {
    "text": "In three dimensions, it's\nlike a rectangular prism. And in four dimensions,\nI don't really know.",
    "start": "4271160",
    "end": "4276969"
  },
  {
    "text": "But you can do your best\nto try to visualize it. And more dimensions\nas you keep going up.",
    "start": "4276970",
    "end": "4283180"
  },
  {
    "text": "We can keep going up. But in general, I don't\nknow how to visualize that.",
    "start": "4283180",
    "end": "4289660"
  },
  {
    "text": "So that's the types of\npolytopes that we have. We have this wonderful class\nof things called polytopes.",
    "start": "4289660",
    "end": "4297010"
  },
  {
    "text": "Some subset of\nthat is zonotopes. And then a subset of\nzonotopes is hyperrectangles",
    "start": "4297010",
    "end": "4306250"
  },
  {
    "text": "All right. So if we go back\nnow to this problem, we have this exponential\ngrowth in bound",
    "start": "4306250",
    "end": "4312250"
  },
  {
    "text": "in the number of vertices. So one thing we saw is that\nwe could use zonotopes instead to help us with this.",
    "start": "4312250",
    "end": "4318200"
  },
  {
    "text": "And now that kind resulted\nin a linear growth in the number of generators\nwe were keeping track of.",
    "start": "4318200",
    "end": "4323920"
  },
  {
    "text": "But sometimes, we can't do that\nbecause sometimes, like I said, not all zonotopes are polytopes. So maybe our polytopes for\nour initial set and whatnot",
    "start": "4323920",
    "end": "4330820"
  },
  {
    "text": "are not represented\nas zonotopes. And then we can't do\nthis kind of thing. And so another option is\nto use overapproximation.",
    "start": "4330820",
    "end": "4338942"
  },
  {
    "text": "So everything I showed you\nup to this point is exact. So these sets that we get will\nbe exactly the set of points",
    "start": "4338942",
    "end": "4344050"
  },
  {
    "text": "that we could reach. And all of them are\nreachable by some trajectory.",
    "start": "4344050",
    "end": "4349240"
  },
  {
    "text": "And now what I'm\ngoing to talk about is overapproximation where\nwe can define this new set. When we talk about\napproximate sets,",
    "start": "4349240",
    "end": "4355190"
  },
  {
    "text": "we'll often put this kind\nof bar on top of them. So if you see the bar, that\nmeans overapproximation.",
    "start": "4355190",
    "end": "4360370"
  },
  {
    "text": "It's an overapproximation\nif the true set that we're\noverapproximating-- so the p is a subset of that set.",
    "start": "4360370",
    "end": "4367179"
  },
  {
    "text": "So this operator here just\nmeans subset or equal to. So for example, let's say\nthat we have this set p.",
    "start": "4367180",
    "end": "4374020"
  },
  {
    "text": "An overapproximation of\np might look something like this where\neverything in the blue set",
    "start": "4374020",
    "end": "4379360"
  },
  {
    "text": "is also contained\nwithin the purple set And so one idea here is\nwe have these polytopes",
    "start": "4379360",
    "end": "4387530"
  },
  {
    "text": "with lots and lots of vertices. And so what if we just\noverapproximated it with a polytope\nwith fewer vertices,",
    "start": "4387530",
    "end": "4393690"
  },
  {
    "text": "and then we don't have to\ndeal with as many vertices. But does that really help us?",
    "start": "4393690",
    "end": "4399200"
  },
  {
    "text": "It does help with having\ntoo many vertices. But what does this\ndo to our guarantees as we're trying to\nunderstand the set of states",
    "start": "4399200",
    "end": "4405650"
  },
  {
    "text": "that are reachable? So let's say that this\nwas our reachable set. And we said, we don't want it\nto intersect with this kind",
    "start": "4405650",
    "end": "4412789"
  },
  {
    "text": "set of bad states here. So let's say we only know\nthe overapproximated version.",
    "start": "4412790",
    "end": "4418770"
  },
  {
    "text": "We don't know the\ntrue reachable set because we didn't\nwant to keep track of all the vertices for it. Can we still conclude\nthat this system satisfies",
    "start": "4418770",
    "end": "4426320"
  },
  {
    "text": "the specification given\nthis scenario here from our overapproximated\nreachable set? ",
    "start": "4426320",
    "end": "4435199"
  },
  {
    "text": "Yeah. Yeah, we can, because if the\noverapproximated reachable set doesn't intersect\nwith our avoid set,",
    "start": "4435200",
    "end": "4440503"
  },
  {
    "text": "and we know that the true\nreachable set is contained inside here, then there's no\nway that the true reachable set intersects with our avoid set.",
    "start": "4440503",
    "end": "4447490"
  },
  {
    "text": "So we can conclude\nthat this works. What if we had this? Well, we certainly\ncan't conclude",
    "start": "4447490",
    "end": "4453960"
  },
  {
    "text": "that it satisfies the\nspecification because we've overlapped with the avoid set.",
    "start": "4453960",
    "end": "4460090"
  },
  {
    "text": "So there might be states\nthat could reach it. But could we conclude\nnow that it doesn't satisfy the specification?",
    "start": "4460090",
    "end": "4467890"
  },
  {
    "text": "No. Yeah, we can't conclude\nthat it does not satisfy the specification\neither because we",
    "start": "4467890",
    "end": "4473040"
  },
  {
    "text": "don't know the true\nreachable set looks like. So it might be that the\ntrue reachable set is still some subset of this\nset that doesn't",
    "start": "4473040",
    "end": "4478740"
  },
  {
    "text": "intersect with the avoid set. And we don't know. We don't know either way. So we just can't really\ndraw a conclusion from this.",
    "start": "4478740",
    "end": "4487679"
  },
  {
    "text": "So what does this do\nto our guarantees? If the overapproximate\nreachable set does not",
    "start": "4487680",
    "end": "4493409"
  },
  {
    "text": "intersect with the avoid set,\nwe can still make a guarantee. We can still conclude\nthat the system is safe. But if the overapproximate\nreachable set does intersect,",
    "start": "4493410",
    "end": "4501220"
  },
  {
    "text": "then we can't conclude anything. We don't know if\nit's safe or not. ",
    "start": "4501220",
    "end": "4507739"
  },
  {
    "text": "And then we can do\nthis in practice by every few iterations,\nwe'll then just",
    "start": "4507740",
    "end": "4513530"
  },
  {
    "text": "overapproximate\nthe reachable set with a set that\nhas fewer vertices. And then we won't have as many\nvertices to keep track of.",
    "start": "4513530",
    "end": "4520460"
  },
  {
    "text": "So here's the line in the\nalgorithm that does it. And surprise, surprise,\nLazySets has got us covered.",
    "start": "4520460",
    "end": "4526560"
  },
  {
    "text": "It just has this\noverapproximate function where we give it some\nepsilon and it will just return an overapproximate set\nwith that kind of error bound",
    "start": "4526560",
    "end": "4535160"
  },
  {
    "text": "on it, which is wonderful. And if you want to know how that\noverapproximate algorithm works, you can check out this\nsection in the book.",
    "start": "4535160",
    "end": "4541710"
  },
  {
    "text": "We talk about how\nthey actually do it. And I guess, since we're\nrunning out of time, I'll pick up next\nlecture probably here.",
    "start": "4541710",
    "end": "4547695"
  },
  {
    "text": "This is what it looks like. And we'll talk about the basic\nbuilding block of that method for overapproximating sets.",
    "start": "4547695",
    "end": "4554659"
  },
  {
    "text": "So yeah, I think\nwe'll wrap up here. And I'll see you on Thursday. ",
    "start": "4554660",
    "end": "4564000"
  }
]