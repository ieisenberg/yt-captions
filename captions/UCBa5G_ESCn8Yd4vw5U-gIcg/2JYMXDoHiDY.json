[
  {
    "text": " So let's do a quick\nreview of last lecture.",
    "start": "0",
    "end": "8990"
  },
  {
    "text": "So last time, we kind of did a\nhigh level taxonomy of radar.",
    "start": "8990",
    "end": "15309"
  },
  {
    "text": "And it looks very\nsimilar to sonar. So in terms of the\nwaveforms that radar is use,",
    "start": "15310",
    "end": "22300"
  },
  {
    "text": "we said that there's\ntwo main types. You either have pulse radar,\nwhich sends these short pulses,",
    "start": "22300",
    "end": "29529"
  },
  {
    "text": "or you have a CW or a\ncontinuous wave radar, which is continuously\ntransmitting.",
    "start": "29530",
    "end": "35769"
  },
  {
    "text": "And specifically, there is two\ntypes of continuous waveforms that are commonly used in radar.",
    "start": "35770",
    "end": "43540"
  },
  {
    "text": "So we have FMCW\nradar, which stands for frequency modulated\ncontinuous wave radar.",
    "start": "43540",
    "end": "50920"
  },
  {
    "text": "And that's the one that sends\nthese linear frequency chirps. And then you can\nhave your PMCW radar,",
    "start": "50920",
    "end": "59710"
  },
  {
    "text": "which stands for phase modulated\ncontinuous wave radar, which",
    "start": "59710",
    "end": "65920"
  },
  {
    "text": "sends basically ranging\ncodes, such as PN sequences",
    "start": "65920",
    "end": "71770"
  },
  {
    "text": "or M sequences exactly like GPS. We haven't talked\nmuch about PMCW yet,",
    "start": "71770",
    "end": "77570"
  },
  {
    "text": "but we'll get to it today. And then in terms of the\nantenna configuration, you can have systems that just\nhave one transmitter and one",
    "start": "77570",
    "end": "85420"
  },
  {
    "text": "receiver antenna. And that's a single input\nsingle output or a SISO system, or you can have as\nit's called diversity",
    "start": "85420",
    "end": "93250"
  },
  {
    "text": "in your antennas\nmultiple transmitters, multiple receivers, and then\nthat makes a MIMO system.",
    "start": "93250",
    "end": "100750"
  },
  {
    "text": "You can, of course,\nhave in-betweens like a SIMO system, which has\none transmit multiple receivers",
    "start": "100750",
    "end": "107080"
  },
  {
    "text": "or a MISO system, which\nhas multiple transmitters single receiver.",
    "start": "107080",
    "end": "112270"
  },
  {
    "text": "But I mean, that in my mind,\nall of those fall under MIMO. If your transmitter receives or\nboth are more than one antenna,",
    "start": "112270",
    "end": "120579"
  },
  {
    "text": "I would like to just\ncall it a MIMO system just to simplify it. OK.",
    "start": "120580",
    "end": "125590"
  },
  {
    "text": "And then we basically developed\na very detailed signal model for FMCW radar.",
    "start": "125590",
    "end": "132819"
  },
  {
    "text": "And for now, we\nare zooming SISO. Although everything we say for\nrange and velocity estimation",
    "start": "132820",
    "end": "140230"
  },
  {
    "text": "exactly as is will\napply to MIMO systems. But for now, just to keep our\nsignal model a little simpler",
    "start": "140230",
    "end": "149200"
  },
  {
    "text": "and more tractable, we are\nstarting with a SISO system. We will get to MIMO very soon.",
    "start": "149200",
    "end": "155810"
  },
  {
    "text": "So before we look\nat the signal model, just remember that the\nmost common type of radar",
    "start": "155810",
    "end": "163780"
  },
  {
    "text": "that is used for\nautonomous robotics today is MIMO FMCW, OK?",
    "start": "163780",
    "end": "170860"
  },
  {
    "text": "And that's like 99% of what's\nout there for this application,",
    "start": "170860",
    "end": "175990"
  },
  {
    "text": "OK? For other applications,\nyou can have other things. PMCW, it's very interesting.",
    "start": "175990",
    "end": "181210"
  },
  {
    "text": "I'll talk more about it. I'm personally very much in\nfavor of seeing more PMCW",
    "start": "181210",
    "end": "187420"
  },
  {
    "text": "systems developed and deployed. But right now, for\nvery practical reasons,",
    "start": "187420",
    "end": "192739"
  },
  {
    "text": "it hasn't been widely\nused and deployed. And we'll talk about it more. OK. So let's look at our\nsignal model for FMCW.",
    "start": "192740",
    "end": "200650"
  },
  {
    "text": "So we said that after down\nconversion, so after basically you mix you received echo\nwith the transmitter chirp,",
    "start": "200650",
    "end": "206500"
  },
  {
    "text": "you get this IF signal, which is\ngiven by this expression here. So let's break it down.",
    "start": "206500",
    "end": "212650"
  },
  {
    "text": "So there's a mu that's-- mu and alpha are\njust constants, OK? So you can completely\nignore them basically",
    "start": "212650",
    "end": "217930"
  },
  {
    "text": "for the purpose of DSP. But this is for\ncompleteness included here. Mu is the gain of your low\nnoise amplifier and the receiver",
    "start": "217930",
    "end": "226240"
  },
  {
    "text": "front end. Alpha is the attenuation from\nthe roundtrip wave propagation",
    "start": "226240",
    "end": "232310"
  },
  {
    "text": "and also the RF\nreflectivity of your target. So all of that is lumped into\njust one complex factor alpha.",
    "start": "232310",
    "end": "239050"
  },
  {
    "text": "And then you have\nbasically a time varying",
    "start": "239050",
    "end": "245260"
  },
  {
    "text": "term with frequency delta,\nFE to the J to pi delta FT. So that's the frequency\nof the IF signal delta, F.",
    "start": "245260",
    "end": "254740"
  },
  {
    "text": "And then you have a phase term,\nwhich doesn't change over time, but it depends on the\nroundtrip delay tau.",
    "start": "254740",
    "end": "262430"
  },
  {
    "text": "So we just call that\ne to the J phi of tau. So this is our phase\nterm essentially, and that's our frequency\nor time varying term, OK?",
    "start": "262430",
    "end": "272530"
  },
  {
    "text": "So what is specifically\ndelta F, is we showed that\nthere is basically",
    "start": "272530",
    "end": "278860"
  },
  {
    "text": "the two things contributing to\nthe frequency of the IF signal. There is a F sub t, which\nis proportional to range.",
    "start": "278860",
    "end": "288280"
  },
  {
    "text": "So FT is just your slew rate\ntimes the round trip delay or time of flight\ntau, which becomes",
    "start": "288280",
    "end": "294520"
  },
  {
    "text": "equal to 2 times the slew rate\ntimes the target range divided by the speed of light.",
    "start": "294520",
    "end": "299748"
  },
  {
    "text": "So that's the first term. But there's also a contribution\nfrom the Doppler effect. So the frequency\nis actually Doppler",
    "start": "299748",
    "end": "306290"
  },
  {
    "text": "shifted by F sub D, which\nis our Doppler frequency. And specifically, F\nsub D is proportional",
    "start": "306290",
    "end": "312830"
  },
  {
    "text": "to the relative radial\nvelocity between the radar and the target via\nthis expression.",
    "start": "312830",
    "end": "320180"
  },
  {
    "text": "It's minus 2 times the\ntime derivative of range. And the time derivative is\nthat relative radial velocity",
    "start": "320180",
    "end": "326960"
  },
  {
    "text": "times the carrier\nfrequency over C. Or you can just write\nR dot as V sub R to make it more clear that\nthat's a radial velocity.",
    "start": "326960",
    "end": "334500"
  },
  {
    "text": "So your FD is minus\n2 VR FC over C. OK. And this is a V set.",
    "start": "334500",
    "end": "340190"
  },
  {
    "text": "It's a complication\nwhen it comes to how do we process this IF\nsignal to do range and velocity",
    "start": "340190",
    "end": "348920"
  },
  {
    "text": "estimation because it\ncouples range and velocity. And if you can only\nmeasure a delta F, then",
    "start": "348920",
    "end": "355730"
  },
  {
    "text": "how do we break it down to what\nwas range, what was velocity? It's a big complication.",
    "start": "355730",
    "end": "361850"
  },
  {
    "text": "It turned out that for\nmost robotic application, this is actually of\nvery little consequence.",
    "start": "361850",
    "end": "368570"
  },
  {
    "text": "Why? Because this Doppler\nshift term turns out to be much, much,\nmuch smaller than FT,",
    "start": "368570",
    "end": "376790"
  },
  {
    "text": "which is range dependent. And for practical purposes\nin most robotic applications,",
    "start": "376790",
    "end": "382819"
  },
  {
    "text": "you can just ignore\nthis term, OK? And then your delta F becomes\nequal to FT, which is just",
    "start": "382820",
    "end": "389690"
  },
  {
    "text": "basically a function of range. OK. So we checked with\nsome numbers that",
    "start": "389690",
    "end": "397820"
  },
  {
    "text": "are actually kind of a\npretty conservative estimate. So we assume a target going\nat 100 miles per hour,",
    "start": "397820",
    "end": "404910"
  },
  {
    "text": "that was just a few meters\nin front of the receiver, and receiver working\nat 77 gigahertz. Even for that case, we showed\nthat your FT is less than 1%",
    "start": "404910",
    "end": "414890"
  },
  {
    "text": "of-- or F Doppler is\nless than 1% of FT. So that's why we can ignore it.",
    "start": "414890",
    "end": "420890"
  },
  {
    "text": "But this is one of those cases\nthat it's extremely, extremely important to remember\nthese assumptions",
    "start": "420890",
    "end": "427370"
  },
  {
    "text": "that go into our\nalgorithms and the DSP because you might be working\non some different application,",
    "start": "427370",
    "end": "432680"
  },
  {
    "text": "say you're working on\na military radar that is supposed to track missiles.",
    "start": "432680",
    "end": "437990"
  },
  {
    "text": "And missiles can go, I don't\nknow, 10 or 100 times faster than this maybe. And then this\nassumption breaks down.",
    "start": "437990",
    "end": "443930"
  },
  {
    "text": "And then if you use your\nvanilla DSP, of course, it is not going to work. So extremely important\nto remember these.",
    "start": "443930",
    "end": "452870"
  },
  {
    "text": "And every application\nyou're working on, just check your parameters\nagainst these assumptions",
    "start": "452870",
    "end": "460100"
  },
  {
    "text": "and make sure they're valid. For you know what I\ncall everyday robotics, this is fine, right? I mean, we don't work\nwith things that go faster",
    "start": "460100",
    "end": "467780"
  },
  {
    "text": "than 100 miles per hour. Even in like autonomous\ndriving that's a very, very conservative\nassumption, usually.",
    "start": "467780",
    "end": "474290"
  },
  {
    "text": "OK. So that's that. And then this phi of\nT, the phase term, it's given by this expression,\n2 pi times K frequency minus B",
    "start": "474290",
    "end": "483590"
  },
  {
    "text": "tau over 2 times tau. We'll get back to this today. For now, it's just\na phase system because we're working\non how do we do ranging.",
    "start": "483590",
    "end": "490910"
  },
  {
    "text": "How do we do range estimation? When it comes to Doppler,\nwe'll start looking at this. Actually, we'll do that today.",
    "start": "490910",
    "end": "497026"
  },
  {
    "text": "OK, any questions about\nthe signal model here? OK, so let's continue.",
    "start": "497026",
    "end": "503740"
  },
  {
    "text": "And then we said that in the\nmore general case, if you have more than one target, the exact\nsame signal model basically",
    "start": "503740",
    "end": "513760"
  },
  {
    "text": "applies. If you have K targets,\nyou just sum up the IF signals that you're\nreceiving from each of them.",
    "start": "513760",
    "end": "522110"
  },
  {
    "text": "So it just becomes this. So each has its own\nattenuation alpha I, and each has its own frequency\ndelta FI, and its own phase",
    "start": "522110",
    "end": "530680"
  },
  {
    "text": "term phi of tau, OK? You just sum over all targets. So here's just one\nsimple visual example.",
    "start": "530680",
    "end": "538000"
  },
  {
    "text": "You have an antenna with a very\nwide radiation pattern or gain",
    "start": "538000",
    "end": "543250"
  },
  {
    "text": "pattern. So it's almost isotropic. And then the chirp that\nyou send, in this case,",
    "start": "543250",
    "end": "549820"
  },
  {
    "text": "it has hit three\ntargets simultaneously, at ranges R1, R2,\nand R3, and then",
    "start": "549820",
    "end": "556709"
  },
  {
    "text": "you receive all three echoes\nalmost at the same time. So if you look at\nbasically this plot here.",
    "start": "556710",
    "end": "564210"
  },
  {
    "text": "It kind of shows what\nyou're receiving. So the green is the frequency\nversus time for the transmitter",
    "start": "564210",
    "end": "571589"
  },
  {
    "text": "chirp, and then you\nreceive three chirps back. Each with a different delay.",
    "start": "571590",
    "end": "577019"
  },
  {
    "text": "So I call them tau\n1, tau 2, and tau 3. And each of them basically\ninduces a frequency",
    "start": "577020",
    "end": "584160"
  },
  {
    "text": "in your IF signal that is\nproportional to the range of that target. So you get a delta F1, a delta\nF2, and a delta F3, right?",
    "start": "584160",
    "end": "595320"
  },
  {
    "text": "So this naturally\njust extends to a case with multiple targets.",
    "start": "595320",
    "end": "601210"
  },
  {
    "text": "So now we are ready to do\na range estimation, right? Because we know that these delta\nF's are proportional to range,",
    "start": "601210",
    "end": "609270"
  },
  {
    "text": "right? It's just equal to 2-- make sure I get it\nright from the board,",
    "start": "609270",
    "end": "615570"
  },
  {
    "text": "2 times the slew rate times\nthe range of i-th target divided by the speed of light.",
    "start": "615570",
    "end": "621060"
  },
  {
    "text": "That's what the delta F's are. So again, exactly like\nthe case of CTFM sonar,",
    "start": "621060",
    "end": "627240"
  },
  {
    "text": "now we have converted by\nusing these chirps a range or a time of flight\nestimation problem",
    "start": "627240",
    "end": "633300"
  },
  {
    "text": "to a frequency estimation. Problem now, we need to\nestimate the frequency of this IF signal.",
    "start": "633300",
    "end": "639030"
  },
  {
    "text": "Again, as I said,\nmultiple times, there's tons of different\nalgorithms that work when it comes to a\nspectral estimation or frequency",
    "start": "639030",
    "end": "646200"
  },
  {
    "text": "estimation. The simplest one is our good\nold Fourier transform, right? You just take a\nFourier transform",
    "start": "646200",
    "end": "652140"
  },
  {
    "text": "and you're expecting\nto see peaks at these delta F frequencies. And that's exactly what happens.",
    "start": "652140",
    "end": "659319"
  },
  {
    "text": "So if you just take\nyour IF signal-- and remember, this is the IF\nsignal from one chirp, right?",
    "start": "659320",
    "end": "666270"
  },
  {
    "text": "So you have down converted\none chirp, if down converted.",
    "start": "666270",
    "end": "672680"
  },
  {
    "text": "That's the SIF that you get. And The ADC has sampled it. So you get N points\nor N samples in it.",
    "start": "672680",
    "end": "682110"
  },
  {
    "text": "So N samples corresponding\nto one down converted chirp, then you do an N\npoint FFT on it. And here, I'm kind of\nloosely using the term FFT.",
    "start": "682110",
    "end": "690720"
  },
  {
    "text": "I mean, we all know FFT\nis the actual algorithm, the implementation of a\ndiscrete Fourier transform.",
    "start": "690720",
    "end": "696430"
  },
  {
    "text": "So to be mathematically correct,\nI should really call this DFT, the discrete Fourier transform.",
    "start": "696430",
    "end": "701819"
  },
  {
    "text": "But I mean, just\nfor convenience, we are all-- when you\nprogram, you just write FFT. I mean, technically, FFTs are\ndesigned under most efficient",
    "start": "701820",
    "end": "708959"
  },
  {
    "text": "when N is a power of 2. But I mean, you can extend it,\nand it will work for any N, OK?",
    "start": "708960",
    "end": "714509"
  },
  {
    "text": "So just a quick note. Throughout the\nrest of the course, I'm going to just constantly\nsay FFT, but I mean,",
    "start": "714510",
    "end": "721110"
  },
  {
    "text": "mathematically speaking to be-- mathematically correct, that's\na discrete Fourier transform. FFT is just the\nalgorithm that is",
    "start": "721110",
    "end": "727920"
  },
  {
    "text": "used to calculate the discrete\nFourier transform for you. There is other algorithms. You could use something\nlike the chirp Z transform,",
    "start": "727920",
    "end": "735240"
  },
  {
    "text": "or other things. But again, the\npoint is, you take a discrete Fourier transform. And so you get this what\nwe call the SIF of K.",
    "start": "735240",
    "end": "743490"
  },
  {
    "text": "Now K is the index of\nyour Fourier transform. And what you need to do is just\nlook at the absolute value of F",
    "start": "743490",
    "end": "753570"
  },
  {
    "text": "or a magnitude of\nF, and find a peaks. And those peaks would\ngive you the delta F, your estimates of your delta F.",
    "start": "753570",
    "end": "761790"
  },
  {
    "text": "So for example, in\nthe case of the-- what I showed you in\nthe previous slide, where we had three\ntargets, if you do that,",
    "start": "761790",
    "end": "768819"
  },
  {
    "text": "we will see three\npeaks in the FFT at indices k hat 1,\nk hat 2, and k hat 3.",
    "start": "768820",
    "end": "775290"
  },
  {
    "text": "And then to actually find\nthe range of the targets,",
    "start": "775290",
    "end": "780329"
  },
  {
    "text": "you first convert the indices\nto frequencies, right? So the indices go\nfrom 0 to N minus 1",
    "start": "780330",
    "end": "787470"
  },
  {
    "text": "because you are doing\nN point FFT here. To find the\nfrequencies, you just",
    "start": "787470",
    "end": "792720"
  },
  {
    "text": "do your index\ndivided by N, which is the total number\nof points in the FFT times the sampling\nrate, F sub S. F sub S",
    "start": "792720",
    "end": "799890"
  },
  {
    "text": "is your ADC sampling rate. So that converts your index\nK to your delta F frequency.",
    "start": "799890",
    "end": "805709"
  },
  {
    "text": "And then from Delta\nF 2 range, that's another scaling, right,\nwhich we just looked at.",
    "start": "805710",
    "end": "811350"
  },
  {
    "text": "So to find the range\nof the IF target, you do delta F times the speed\nof light divided by 2 times",
    "start": "811350",
    "end": "818070"
  },
  {
    "text": "the slew rate. And the slew rate,\nremember, is known because we know what\nchirps we are sending. B is known.",
    "start": "818070",
    "end": "823680"
  },
  {
    "text": "It's actually a\nconfigurable parameter. Usually, you can\nset what slew rate you want at your transmitter.",
    "start": "823680",
    "end": "830430"
  },
  {
    "text": "So this is it. Basically, that's K\nis the index where you see the peak in the\nFFT times the sampling",
    "start": "830430",
    "end": "838620"
  },
  {
    "text": "rate of the ADC times\nthe speed of light divided by 2 times the\nnumber of points in your down",
    "start": "838620",
    "end": "843990"
  },
  {
    "text": "convert signal times slew rate. That gives you range in meters. And you're done, right?",
    "start": "843990",
    "end": "849529"
  },
  {
    "text": "So that's how you do ranging. That's our algorithm. It's just a Fourier transform.",
    "start": "849530",
    "end": "855320"
  },
  {
    "text": "It's an unbiased estimator. It's very efficient\nand easy to implement. And it's widely used. Yes?",
    "start": "855320",
    "end": "860770"
  },
  {
    "text": "Can you explain what\nyou mean by unbiased? Yes. Good question. What do I mean by unbiased? So by unbiased\nestimator, I mean that--",
    "start": "860770",
    "end": "868454"
  },
  {
    "text": "I'm going to explain it a\nlittle loosely because unbiased in like statistics, I\nmean, there's like--",
    "start": "868455",
    "end": "874100"
  },
  {
    "text": "I don't want to go\nthrough the full math. But loosely speaking,\nit means that if I",
    "start": "874100",
    "end": "879110"
  },
  {
    "text": "do this-- run this algorithm\nmany, many times, OK? And I average all\nthose R hats that I",
    "start": "879110",
    "end": "886550"
  },
  {
    "text": "estimate, the average is\nequal to the true ground truth underlying R.",
    "start": "886550",
    "end": "891949"
  },
  {
    "text": "There is no systematic\nerror in my measurement. As opposed to if you\nremember in the case",
    "start": "891950",
    "end": "898340"
  },
  {
    "text": "where we were\ntalking about sonar with a simple thresholding\ndetector, that was a bias",
    "start": "898340",
    "end": "904460"
  },
  {
    "text": "estimator because\nthere was always, then the measurement would\nnever be equal to the underlying",
    "start": "904460",
    "end": "910970"
  },
  {
    "text": "ground truth. There would always be some\nsystematic error in it. So unbiased means\nno systematic error.",
    "start": "910970",
    "end": "916490"
  },
  {
    "text": "There's still noise\nin your estimate, but the average\nof the noise is 0, or the average of the error that\nyou make in your estimate is 0.",
    "start": "916490",
    "end": "923810"
  },
  {
    "text": "That's what we mean by unbiased. OK. So that's how we do ranging, OK?",
    "start": "923810",
    "end": "931370"
  },
  {
    "text": "Now, what is-- from\nthis algorithm, what is the range resolution\nand what is the maximum range",
    "start": "931370",
    "end": "937790"
  },
  {
    "text": "that we can get? Exactly like the case\nof sonar, the resolution is determined by basically the\nwidth of the FFT bins, right?",
    "start": "937790",
    "end": "947540"
  },
  {
    "text": "So the minimum frequency you\ncan discriminate is 1 FFT bin. Like, I can go\nfrom K to K plus 1.",
    "start": "947540",
    "end": "954590"
  },
  {
    "text": "And that's the minimum frequency\ndiscrimination you can do. And so that determines\nour range resolution.",
    "start": "954590",
    "end": "961280"
  },
  {
    "text": "And maximum range is determined\nby the maximum frequency we can estimate, which is\nbasically tied to the sampling",
    "start": "961280",
    "end": "967730"
  },
  {
    "text": "rate of the ADC. So if the peak is at\nbasically N minus 1, that's the maximum frequency\nyou can distinguish,",
    "start": "967730",
    "end": "975230"
  },
  {
    "text": "and that determines\nthe maximum rate. So mathematically, what we get\nis minimum range discrimination",
    "start": "975230",
    "end": "983930"
  },
  {
    "text": "corresponds to one FFT bin. So what is the frequency\nfor one FFT bin? That's just your sampling rate.",
    "start": "983930",
    "end": "989540"
  },
  {
    "text": "FS, divided by the\ntotal number of points in your FFT, which is also\nequal to 1 over T, where T is,",
    "start": "989540",
    "end": "995990"
  },
  {
    "text": "remember, the chirp\nduration in seconds because you have this\nrelationship between the number of samples, the chirp duration,\nand the sampling rate.",
    "start": "995990",
    "end": "1004370"
  },
  {
    "text": "OK. So with that delta\nF minimum, what is the minimum range that\nyou can discriminate?",
    "start": "1004370",
    "end": "1009500"
  },
  {
    "text": "You can just plug that delta\nF min into our range equation. So delta are minimum, which is\nour range resolution becomes",
    "start": "1009500",
    "end": "1017139"
  },
  {
    "text": "delta F minimum\ntimes speed of light, divided by 2 B. And you plug\nthis into here from the top,",
    "start": "1017140",
    "end": "1025540"
  },
  {
    "text": "and then your\ndelta R min becomes C over 2 B times C\nor speed of light divided by 2 times the\nbandwidth of the chirp, right?",
    "start": "1025540",
    "end": "1034510"
  },
  {
    "text": "And remember, the\nbandwidth of the chirp is if you look at this\nfrequency versus time, the bandwidth of\nthe chirp is if you",
    "start": "1034510",
    "end": "1041470"
  },
  {
    "text": "go from FC to FC plus\nslew rate times T,",
    "start": "1041470",
    "end": "1047020"
  },
  {
    "text": "where T is the total\nchirp duration, this is our chirp\nbandwidth B, which",
    "start": "1047020",
    "end": "1052750"
  },
  {
    "text": "is slew eight times\nthe total duration. This is exactly the\nsame expression. By the way, we\ngot {} CTFM sonar.",
    "start": "1052750",
    "end": "1059919"
  },
  {
    "text": "No changes because\nit's principle of operation, same algorithm. So it makes sense that you\nget the same basically type",
    "start": "1059920",
    "end": "1068440"
  },
  {
    "text": "of performance out of it. What about the maximum range? Maximum range is-- again,\nthe maximum frequency, you",
    "start": "1068440",
    "end": "1076630"
  },
  {
    "text": "can find in your FFT times the\nspeed of light divided by 2 B. What is the\nmaximum frequency?",
    "start": "1076630",
    "end": "1082240"
  },
  {
    "text": "Well, if you're searching,\nwe know that range is always positive by definition. So when we look at\nour FFT at delta,",
    "start": "1082240",
    "end": "1089410"
  },
  {
    "text": "F can be from 0 to a maximum,\nwhich is the sampling rate, FS. And this is from the\nNyquist basically theorem.",
    "start": "1089410",
    "end": "1097030"
  },
  {
    "text": "So we plug-in\nbasically our F delta F max is the sampling\nrate, plug that in,",
    "start": "1097030",
    "end": "1102560"
  },
  {
    "text": "and that is the\nmaximum range, which is sampling rate times the speed\nof light divided by 2 B, OK?",
    "start": "1102560",
    "end": "1109630"
  },
  {
    "text": "So here, immediately, we see\none of those basically trade offs between your\nrange resolution",
    "start": "1109630",
    "end": "1117530"
  },
  {
    "text": "and the maximum range\nthat you can discriminate. Why? Because let's say, you keep\nevery parameter the same,",
    "start": "1117530",
    "end": "1124240"
  },
  {
    "text": "and we are just\nvarying this slew rate. OK? So if you increase\nthis slew rate B,",
    "start": "1124240",
    "end": "1131530"
  },
  {
    "text": "what happens to delta R? Delta R, if you increase\nB , it likes it, right?",
    "start": "1131530",
    "end": "1137530"
  },
  {
    "text": "Because delta R\nbecomes a smaller, that means you get\nbetter range resolution. So it's good for delta\nR, delta goes up,",
    "start": "1137530",
    "end": "1144580"
  },
  {
    "text": "or it goes down actually,\nwhich is desirable. But also the maximum range goes\ndown, which is undesirable.",
    "start": "1144580",
    "end": "1152980"
  },
  {
    "text": "So it will increase\nyour range resolution, but decrease the maximum range. So that's a very\nimportant trade off.",
    "start": "1152980",
    "end": "1160230"
  },
  {
    "text": "If you're in charge\nof designing or using",
    "start": "1160230",
    "end": "1166049"
  },
  {
    "text": "a radar for some application,\none of the design parameters you need to choose\nif it's an FMCW radar",
    "start": "1166050",
    "end": "1172799"
  },
  {
    "text": "is going to be this\nslew rate, and then you have to look at\nyour application, decide what is\nthe maximum range.",
    "start": "1172800",
    "end": "1177899"
  },
  {
    "text": "You need to see what is\nthe range resolution that is required. And then based on those, decide\nwhat is the optimal B to use.",
    "start": "1177900",
    "end": "1185159"
  },
  {
    "text": "And it's a trade off. So somebody needs\nto give something. And you cannot have the\nbest possible resolution",
    "start": "1185160",
    "end": "1193110"
  },
  {
    "text": "and the best possible\nmaximum range. There's always this trade\noff between the two. OK.",
    "start": "1193110",
    "end": "1198150"
  },
  {
    "text": "Any-- yes? For radars that work\nat these frequencies,",
    "start": "1198150",
    "end": "1203440"
  },
  {
    "text": "do they ever do real sampling? Or is it usually always IQ too? Great question. So the question\nis the radars that",
    "start": "1203440",
    "end": "1209850"
  },
  {
    "text": "operate we are talking\nabout at these frequencies when it comes to\nthe ADC sampling, do real samples or IQ samples?",
    "start": "1209850",
    "end": "1217680"
  },
  {
    "text": "For FMCW, it's always\nIQ samples because we",
    "start": "1217680",
    "end": "1222780"
  },
  {
    "text": "need to have the full\ncomplex signal as we'll see in a second, especially\nto do Doppler frequency",
    "start": "1222780",
    "end": "1229950"
  },
  {
    "text": "estimation. That phase term\nneeds to be known. Basically, we need to have\nthis E to the J phi of T.",
    "start": "1229950",
    "end": "1236370"
  },
  {
    "text": "And as we know, the only\nway you can find the phase is to have the full complex\nsignal or both the I and the Q",
    "start": "1236370",
    "end": "1241620"
  },
  {
    "text": "component. So it's always, always full IQ. Yeah. Physically, you get out of\nyour ADC, I mean, you can't--",
    "start": "1241620",
    "end": "1251586"
  },
  {
    "text": "in circuits, you\ncan have complex. So it gives you two data\nstreams, one for 1, one for Q, as you know.",
    "start": "1251586",
    "end": "1256740"
  },
  {
    "text": "And then in DSP, you mix them,\nand make a complex signal out of it. OK.",
    "start": "1256740",
    "end": "1262500"
  },
  {
    "text": "So other questions? All right. Let's continue. So now we want to talk\nabout velocity estimation.",
    "start": "1262500",
    "end": "1269880"
  },
  {
    "text": "We know how to do range, right? And next is velocity. And velocity here,\nit's basically",
    "start": "1269880",
    "end": "1277680"
  },
  {
    "text": "the velocity from the Doppler\nshift, which, as we know, it's the relative\nradial velocity, OK?",
    "start": "1277680",
    "end": "1283180"
  },
  {
    "text": "So it's that Vr, that we are\ngoing to see how to estimate. So it's not going to\ngive us the full velocity",
    "start": "1283180",
    "end": "1289890"
  },
  {
    "text": "vector of the target. It will only give\nus the component that's projected to\nthe radial direction.",
    "start": "1289890",
    "end": "1297360"
  },
  {
    "text": "Still extremely useful, right? But that's an important\nthing to know, that the velocity that you get\nis just the radial velocity.",
    "start": "1297360",
    "end": "1303929"
  },
  {
    "text": "OK. As I told you, that's where\nthis phase term phi of tau",
    "start": "1303930",
    "end": "1309810"
  },
  {
    "text": "becomes very important\nbecause this does contain Doppler information in it.",
    "start": "1309810",
    "end": "1314860"
  },
  {
    "text": "Now to see how velocity\nestimation works, first, let's look at a very\nsimple example, just two chirps",
    "start": "1314860",
    "end": "1320789"
  },
  {
    "text": "sent consecutively\nfrom the transmitter. And they are echoed back\nfrom the same target, OK?",
    "start": "1320790",
    "end": "1327060"
  },
  {
    "text": "So two chirps here\nshown in green, and then you get two echoes\nin blue from the target.",
    "start": "1327060",
    "end": "1333870"
  },
  {
    "text": "And let's say, your roundtrip\ndelay from the target was from the first\nchirp, you get tau 1,",
    "start": "1333870",
    "end": "1340830"
  },
  {
    "text": "from the second\nchirp, you get tau 2. Why did it change? Because we are assuming the\ntarget has some velocity.",
    "start": "1340830",
    "end": "1348420"
  },
  {
    "text": "Because it has some radial\nvelocity between the two chirps, it moves a slightly. And that slight movement can\naffect your roundtrip delay",
    "start": "1348420",
    "end": "1357150"
  },
  {
    "text": "or time of flight tau. OK. So target has some\nradial velocity.",
    "start": "1357150",
    "end": "1362760"
  },
  {
    "text": "V sub r relative to the antenna. And here, we are\nassuming that basically",
    "start": "1362760",
    "end": "1370660"
  },
  {
    "text": "within this small\ntime, a T that has passed between the two chirps. So this first chirp\nwas sent at time 0.",
    "start": "1370660",
    "end": "1377140"
  },
  {
    "text": "The second is sent\nat time big T. And because this big T\nis typically very small,",
    "start": "1377140",
    "end": "1383920"
  },
  {
    "text": "so these are on the orders\nof like tens of microseconds, basically, for the\ntypes of radars",
    "start": "1383920",
    "end": "1389320"
  },
  {
    "text": "that we're talking about, or\nsometimes even less than 10 microseconds because it's\nsuch a small time elapsed",
    "start": "1389320",
    "end": "1397900"
  },
  {
    "text": "between the two\nconsecutive chirps. Well, the target does move if\nit has the radial velocity.",
    "start": "1397900",
    "end": "1404080"
  },
  {
    "text": "But it doesn't move enough\nfor that change basically",
    "start": "1404080",
    "end": "1410140"
  },
  {
    "text": "in the target range to affect\nthe IF frequency delta F, OK?",
    "start": "1410140",
    "end": "1416680"
  },
  {
    "text": "So again, the assumption here\nis that Doppler term does not",
    "start": "1416680",
    "end": "1422620"
  },
  {
    "text": "affect delta F, which is\nexactly the same assumption we talked about a few minutes ago.",
    "start": "1422620",
    "end": "1427910"
  },
  {
    "text": "So delta F is the same between\nthe two consecutive chirps. But nevertheless, the round trip\ndelay is changing a little bit.",
    "start": "1427910",
    "end": "1436600"
  },
  {
    "text": "And that would affect our\nphi because phi is only a function of tau. How much does it affect phi?",
    "start": "1436600",
    "end": "1443590"
  },
  {
    "text": "So let's look at it. So as you know, phi-- so\nlet's first look at the phi",
    "start": "1443590",
    "end": "1449920"
  },
  {
    "text": "1, which is the phase of\nthe down-converted signal from the first chirp.",
    "start": "1449920",
    "end": "1455440"
  },
  {
    "text": "OK. So you have SIF 1 of T From\nhere, and you get a SIF 2 of T",
    "start": "1455440",
    "end": "1463990"
  },
  {
    "text": "from this one. So what is phi 1? The expression for it was\n2 pi FC minus B tau over 2",
    "start": "1463990",
    "end": "1470500"
  },
  {
    "text": "over time, OK? But if you look at the numbers,\nB times tau is always, again,",
    "start": "1470500",
    "end": "1478360"
  },
  {
    "text": "for the applications we work\nwith, is much, much less than the carrier frequency FC.",
    "start": "1478360",
    "end": "1484090"
  },
  {
    "text": "Like, B tau is typically\na few megahertz. Carrier frequency,\nas you know, it's",
    "start": "1484090",
    "end": "1489820"
  },
  {
    "text": "like 24 gigahertz\nor 77 gigahertz. So your B times tau is\nlike 1,000 to 10,000 times",
    "start": "1489820",
    "end": "1496180"
  },
  {
    "text": "smaller than FC. So inside here, you can assume\nthis is almost 0 in comparison",
    "start": "1496180",
    "end": "1502390"
  },
  {
    "text": "to FC. And then your phi just becomes\n2 pi times the carrier frequency times tau 1.",
    "start": "1502390",
    "end": "1507940"
  },
  {
    "text": "Just like that, what is the\nphase of the second IF signal? That becomes 2 pi\nFC tau 2, right?",
    "start": "1507940",
    "end": "1514570"
  },
  {
    "text": "So the phases are directly\nproportional to the taus.",
    "start": "1514570",
    "end": "1519909"
  },
  {
    "text": "OK. So now let's look at\nthe phase difference between these two IF signals. So I'm going to subtract the\nphase of the second IF signal",
    "start": "1519910",
    "end": "1527110"
  },
  {
    "text": "from the phase of\nthe first IF signal, and see how much between the two\nchirps, the phase of the signal",
    "start": "1527110",
    "end": "1534310"
  },
  {
    "text": "we receive has changed. So that delta phi, phi 2\nminus phi 1, let's plug-in. So it becomes 2 pi\ndelta times carrier",
    "start": "1534310",
    "end": "1542620"
  },
  {
    "text": "frequency times delta tau. And what is delta tau? That's just delta\nrange divided by C.",
    "start": "1542620",
    "end": "1549520"
  },
  {
    "text": "That's by definition,\ntimes 2, right? So that's why you get a 4 here. So remember, tau\nis two 2R over C.",
    "start": "1549520",
    "end": "1556899"
  },
  {
    "text": "So your delta tau\nbecomes 2 delta R over C. And that's what we\nhave plugged in.",
    "start": "1556900",
    "end": "1562300"
  },
  {
    "text": "Here, you can write it\nlike this, 2 pi T times to FC delta R divided\nby C times T, where T is",
    "start": "1562300",
    "end": "1568960"
  },
  {
    "text": "the chirp duration in seconds. But here's something\ninteresting. This delta R over T, that's\nhow much the range changed",
    "start": "1568960",
    "end": "1577500"
  },
  {
    "text": "over T seconds. So that's the radial\nvelocity of your target or the relative radial\nvelocity between the target",
    "start": "1577500",
    "end": "1584747"
  },
  {
    "text": "and the radar. So that's Vr, or almost\nequal to Vr, if T is small,",
    "start": "1584747",
    "end": "1590350"
  },
  {
    "text": "which we know it is. And then this term\nhere, 2 FC Vr over C, that's our basically\nDoppler shift by definition.",
    "start": "1590350",
    "end": "1600130"
  },
  {
    "text": "So you see that this delta\nbetween phi between the two consecutive chirps that\nthe phase difference is",
    "start": "1600130",
    "end": "1606690"
  },
  {
    "text": "proportional, in fact,\nto the Doppler shift. OK?",
    "start": "1606690",
    "end": "1612940"
  },
  {
    "text": "So now that that's\nthe case, that means if we estimate\nor calculate the phase",
    "start": "1612940",
    "end": "1618960"
  },
  {
    "text": "difference between two\nconsecutive chirps, we can then estimate Doppler\nshift from that, right?",
    "start": "1618960",
    "end": "1624870"
  },
  {
    "text": "So from this expression, then\nyou just basically invert that. And you get your estimate\nof the Doppler shift",
    "start": "1624870",
    "end": "1631560"
  },
  {
    "text": "is just delta phi\ndivided by 2 pi T. Again, T is the\nchirp duration, OK?",
    "start": "1631560",
    "end": "1638820"
  },
  {
    "text": "And from the\nDoppler shift we can find the relative radial\nvelocity between the target",
    "start": "1638820",
    "end": "1646860"
  },
  {
    "text": "and the radar,\nwhich, as we know, is just minus FT times\nlambda over 2 lambda",
    "start": "1646860",
    "end": "1652530"
  },
  {
    "text": "is the wavelength. In terms of the phi,\nit's this expression. OK? So that is in principle, how\nyou can estimate velocity",
    "start": "1652530",
    "end": "1661650"
  },
  {
    "text": "in a FMCW radar. Yes? If you're saying like\nthe radial velocity,",
    "start": "1661650",
    "end": "1667320"
  },
  {
    "text": "we have a MIMO array,\nthen how to say what is the radial velocity\nresponse with respect to each",
    "start": "1667320",
    "end": "1673690"
  },
  {
    "text": "of them? That's a great question. So the question is, we are\ntalking about radial velocity.",
    "start": "1673690",
    "end": "1679620"
  },
  {
    "text": "But what if we\nhave a MIMO array, then with respect to this\nradial is, with respect",
    "start": "1679620",
    "end": "1685830"
  },
  {
    "text": "to which antenna. So if I were to draw it, if I\nhave multiple antennas, right, and then there is a target when\nwe talk about radial velocity",
    "start": "1685830",
    "end": "1694720"
  },
  {
    "text": "as is radial with\nrespect to this, is it radial with\nrespect to this? Is it radial with\nrespect to that, right?",
    "start": "1694720",
    "end": "1699928"
  },
  {
    "text": "That was the question. Well, that's a very\nvalid question. But this is only-- I think this picture is kind of\nlike exaggerated in the sense",
    "start": "1699928",
    "end": "1708810"
  },
  {
    "text": "that the target is like so\nclose to the antenna plane, that the ranges are\nactually different.",
    "start": "1708810",
    "end": "1714450"
  },
  {
    "text": "When we are talking\nabout far field targets, the target is actually\nlike way out here.",
    "start": "1714450",
    "end": "1719919"
  },
  {
    "text": "So we assume that range\nis the same to all of--",
    "start": "1719920",
    "end": "1725700"
  },
  {
    "text": "like the antennas are so close\nto each other relative to how far the target is, that the\nrange is the same to all",
    "start": "1725700",
    "end": "1732233"
  },
  {
    "text": "of the antennas. That's-- and that's\na good assumption. I mean, usually,\nyour antenna aperture is like a couple of inches\nby a couple of inches.",
    "start": "1732233",
    "end": "1739260"
  },
  {
    "text": "And then if your target is like\n20, 30 meters away, or even 10, 5 meters away, you\ncan assume the range",
    "start": "1739260",
    "end": "1747029"
  },
  {
    "text": "is almost the same respect\nto all of the antennas.",
    "start": "1747030",
    "end": "1752610"
  },
  {
    "text": "But again, that's\na great question because that's one of\nthe assumptions that in some applications\nmight not be valid.",
    "start": "1752610",
    "end": "1758490"
  },
  {
    "text": "Like, if your target is\nlike too close, then yes, you can pick up different\nDopplers on different antennas",
    "start": "1758490",
    "end": "1765659"
  },
  {
    "text": "because of exactly\nwhat you brought up. But for us, we assume that,\nyeah, its target is far away.",
    "start": "1765660",
    "end": "1774570"
  },
  {
    "text": "The range is almost\nthe same with respect to all the antennas. And the antennas are\nreally close to each other.",
    "start": "1774570",
    "end": "1779610"
  },
  {
    "text": "But if the target is\nvery close then can we just estimate the\ntangential velocity?",
    "start": "1779610",
    "end": "1785370"
  },
  {
    "text": "Yes, you can. It becomes complicated, but not\ncomplicated to the point that",
    "start": "1785370",
    "end": "1791231"
  },
  {
    "text": "you cannot do it. But you can absolutely\ndo that, then you need to find Doppler with\nrespect to every antenna.",
    "start": "1791232",
    "end": "1797940"
  },
  {
    "text": "And then by comparing\nthose Dopplers, then you can also find tangential\nvelocity, I'm sure.",
    "start": "1797940",
    "end": "1803400"
  },
  {
    "text": "I haven't seen\nanybody do it, makes for an interesting\nresearch problem, I guess, but it's doable.",
    "start": "1803400",
    "end": "1809830"
  },
  {
    "text": "OK. So that's how we find\nDoppler from just two consecutive chirps. And there is a limit to\nwhat velocity you can find.",
    "start": "1809830",
    "end": "1818280"
  },
  {
    "text": "Why is there a limit? Because note that it's\nbased on that phase",
    "start": "1818280",
    "end": "1823860"
  },
  {
    "text": "shift between two\nconsecutive chirps. And if the phase shift\nis bigger than pi",
    "start": "1823860",
    "end": "1829049"
  },
  {
    "text": "or smaller than minus pi,\nit wraps around the circle, and then basically,\nbecomes ambiguous, right?",
    "start": "1829050",
    "end": "1835710"
  },
  {
    "text": "So this is valid as long as\nyour delta phi is less than pi",
    "start": "1835710",
    "end": "1842010"
  },
  {
    "text": "bigger than minus pi, OK? That's important. So that limits what is\nthe maximum velocity",
    "start": "1842010",
    "end": "1848130"
  },
  {
    "text": "you can unambiguously detect. So what is the maximum\nvelocity or the absolute value of the maximum velocity you\ncan unambiguously detect?",
    "start": "1848130",
    "end": "1855360"
  },
  {
    "text": "That is proportional\nto the maximum phase you can unambiguously\ndetect, which is pi.",
    "start": "1855360",
    "end": "1860770"
  },
  {
    "text": "So you plug-in pi\ninto this expression for delta phi, and then\nthe pi, and the numerator",
    "start": "1860770",
    "end": "1867809"
  },
  {
    "text": "and denominator cancel\nout, and you get lambda over 4T, which is\nthe maximum velocity.",
    "start": "1867810",
    "end": "1874150"
  },
  {
    "text": "So the radial velocity\nyou can estimate is between lambda over 4T\nand minus lambda over 4T.",
    "start": "1874150",
    "end": "1880500"
  },
  {
    "text": "That's the limit. And again, if you need\nto increase that limit",
    "start": "1880500",
    "end": "1889950"
  },
  {
    "text": "on what velocity you can detect,\nwhat one thing you can do is, well, either you can go to\nhigher frequencies lambdas.",
    "start": "1889950",
    "end": "1897510"
  },
  {
    "text": "So that's one reason, like 77\ngigahertz is better than 24, one of the many reasons.",
    "start": "1897510",
    "end": "1902850"
  },
  {
    "text": "Or you can reduce T. So send\nshorter chirps, basically,",
    "start": "1902850",
    "end": "1908970"
  },
  {
    "text": "and that helps with your\nunambiguous velocity. OK. So this is fine.",
    "start": "1908970",
    "end": "1914770"
  },
  {
    "text": "This is one way you\ncan estimate velocity. But just looking at\ntwo consecutive chirps,",
    "start": "1914770",
    "end": "1922140"
  },
  {
    "text": "it's not a very robust\nalgorithm because remember like in reality, these\nsignals are distorted.",
    "start": "1922140",
    "end": "1927510"
  },
  {
    "text": "They're noisy. So if you just\nlook at two chirps and compare the\nphase of the two, you get a really,\nreally noisy estimate",
    "start": "1927510",
    "end": "1934620"
  },
  {
    "text": "of that phase\ndifference, which becomes a very noisy estimate\nof your Doppler shift,",
    "start": "1934620",
    "end": "1940799"
  },
  {
    "text": "and ultimately, velocity. To robustify this\nidea, what you can do",
    "start": "1940800",
    "end": "1946620"
  },
  {
    "text": "is, basically, extend it. And instead of just\nlooking at two chirps, look at a whole bunch of them. Look at tens or hundreds, right?",
    "start": "1946620",
    "end": "1953580"
  },
  {
    "text": "But the core idea\nis exactly the same. So what is done in\npractice to robustify",
    "start": "1953580",
    "end": "1959250"
  },
  {
    "text": "this velocity estimation\nalgorithm is that you define what is called a frame.",
    "start": "1959250",
    "end": "1965357"
  },
  {
    "text": "OK? And the frame is basically\na collection of M chirps",
    "start": "1965357",
    "end": "1971610"
  },
  {
    "text": "that are sent consecutively. Remember that your\ntransmitter is just constantly it's a CW system, right?",
    "start": "1971610",
    "end": "1977850"
  },
  {
    "text": "It's just constantly sending\nthese chirps forever, right? On the receiver, so in DSP,\nyou can define a frame.",
    "start": "1977850",
    "end": "1984870"
  },
  {
    "text": "And it's up to you like how\nlong you take your frame to be. But you just collect a bunch of\nIF signals M off them, right?",
    "start": "1984870",
    "end": "1993060"
  },
  {
    "text": "Chirp 0 to chirp\nM. And you decide what is a good choice\nfor M. Typically,",
    "start": "1993060",
    "end": "1999000"
  },
  {
    "text": "it's like a few tens\nto a couple hundred, or something like that. So I've seen like numbers\nbetween 32 to 512, or so.",
    "start": "1999000",
    "end": "2008540"
  },
  {
    "text": "But you choose some\nM, and then that makes up for a frame of data.",
    "start": "2008540",
    "end": "2013880"
  },
  {
    "text": "And then instead of looking at\njust two consecutive chirps, you look at all of them, and\nthen estimate your Doppler.",
    "start": "2013880",
    "end": "2020809"
  },
  {
    "text": "But the core idea\nis exactly the same. So what happens--\nand here our notation is going to get\nslightly more complex.",
    "start": "2020810",
    "end": "2026610"
  },
  {
    "text": "So let's make sure\nthings make sense. So I'm calling now SIF,\nI'm assigning two indices",
    "start": "2026610",
    "end": "2032960"
  },
  {
    "text": "to the IF signals, a M and\nan N. So SIF of M and N. M",
    "start": "2032960",
    "end": "2040980"
  },
  {
    "text": "Is the chirp index, OK? So that means this SIF is\ncoming from which of the M",
    "start": "2040980",
    "end": "2047309"
  },
  {
    "text": "chirps inside the frame. So little M goes\nfrom 0 to M minus 1.",
    "start": "2047310",
    "end": "2053129"
  },
  {
    "text": "And little N is the ADC sample\nindex, just like we had before. So little N goes from--",
    "start": "2053130",
    "end": "2059279"
  },
  {
    "text": "those are the samples\nyou get out of your ADCs. So that goes from\n0 to big N minus 1",
    "start": "2059280",
    "end": "2064710"
  },
  {
    "text": "because we are sampling\neach chirp and times, OK? So that's our annotation.",
    "start": "2064710",
    "end": "2069850"
  },
  {
    "text": "Just to make sure it's clear. So now, if you look at the\nphases of these SIF of M and N,",
    "start": "2069850",
    "end": "2077879"
  },
  {
    "text": "the first one, SIF\n0 for M equals 0, let's call that phase\nof that guy just phi 0.",
    "start": "2077880",
    "end": "2084850"
  },
  {
    "text": "That's our reference phase. That's like the phase at\nthe start of the frame, OK? We just call that phi 0.",
    "start": "2084850",
    "end": "2090210"
  },
  {
    "text": "It's equal to 2 pi FC tau 0. OK, that's our reference. But then every chirp that\ncomes after that in the frame,",
    "start": "2090210",
    "end": "2098280"
  },
  {
    "text": "it has a phase phi\nM, which is phi 0 plus M times the delta phi.",
    "start": "2098280",
    "end": "2104280"
  },
  {
    "text": "Delta phi is that\nphase difference we just calculated between\ntwo consecutive chirps. So the phase-- the chirp that\ncomes after M chirps, it's just",
    "start": "2104280",
    "end": "2114990"
  },
  {
    "text": "has a phase difference of M\ntimes delta phi with respect to the first one, right?",
    "start": "2114990",
    "end": "2120240"
  },
  {
    "text": "And what is the assumption\nthat goes into here? We're assuming that\nthe radial velocity",
    "start": "2120240",
    "end": "2125490"
  },
  {
    "text": "is constant within one frame. And because of\nthat, the delta phi of every two consecutive\nchirps becomes constant.",
    "start": "2125490",
    "end": "2132270"
  },
  {
    "text": "And we know what\ndelta phi was, right? Delta phi was just minus 2\npi times Doppler frequency",
    "start": "2132270",
    "end": "2138990"
  },
  {
    "text": "times T. So the phase of\nthe IF signal number M",
    "start": "2138990",
    "end": "2144270"
  },
  {
    "text": "becomes phi 0 minus 2\npi F Doppler times M, which is the chirp index times\nT, which is the chirp duration.",
    "start": "2144270",
    "end": "2153240"
  },
  {
    "text": "OK? So what is the total\ntime of one frame? It consists of M chirps.",
    "start": "2153240",
    "end": "2159720"
  },
  {
    "text": "And each chirp has a time\nof T. So a frame time TF",
    "start": "2159720",
    "end": "2164820"
  },
  {
    "text": "is equal to M times T,\nwhich is the chirp time, OK?",
    "start": "2164820",
    "end": "2170550"
  },
  {
    "text": "All right. So what is our new signal\nmodel for one full frame.",
    "start": "2170550",
    "end": "2176760"
  },
  {
    "text": "So SIF of M and N.\nThere's nothing new here. So it's equal to mu times alpha.",
    "start": "2176760",
    "end": "2181870"
  },
  {
    "text": "So mu alpha is again the gain\nand the attenuation factor. This is our good old\nfrequency term that we had,",
    "start": "2181870",
    "end": "2189060"
  },
  {
    "text": "E to the J 2 pi\ndelta F times NTS. I'm writing the\ndiscrete version here, so that's why you\nget N times TS.",
    "start": "2189060",
    "end": "2195964"
  },
  {
    "text": "TS is the sampling\ninterval of the ADC. And N, remember,\nis the ADC index.",
    "start": "2195965",
    "end": "2201569"
  },
  {
    "text": "OK? So that's-- and delta F is\nthe term that is proportional to range, and then you\nget E to the J phi 0,",
    "start": "2201570",
    "end": "2209100"
  },
  {
    "text": "so that's the starting\nphase of the first chirp. And then this E to the\nminus J2 pi F Doppler",
    "start": "2209100",
    "end": "2217730"
  },
  {
    "text": "MT, that is basically\ncoming from here, which was phi 0 plus and delta phi.",
    "start": "2217730",
    "end": "2224850"
  },
  {
    "text": "So again, this\nexpression here is exactly what we had here,\nsame signal model, right?",
    "start": "2224850",
    "end": "2231810"
  },
  {
    "text": "We have just expanded what\nphi would be for chirps",
    "start": "2231810",
    "end": "2237390"
  },
  {
    "text": "that are inside a frame. That's all we had done. There's no new physics,\nno new, you know--",
    "start": "2237390",
    "end": "2244500"
  },
  {
    "text": "really exactly. There's no new physics here. We've just expanded\nthe math to include, you know, to be able\nto talk about frames",
    "start": "2244500",
    "end": "2251880"
  },
  {
    "text": "instead of individual chirps. So again, when you see\nexpressions like this,",
    "start": "2251880",
    "end": "2257700"
  },
  {
    "text": "I mean, at first\nglance, they look kind of too much to digest,\nbut always take a deep breath,",
    "start": "2257700",
    "end": "2264089"
  },
  {
    "text": "and go term by term, and make\nsure everything makes sense. Again, let's do it\ntogether one more time. Mu is the gain.",
    "start": "2264090",
    "end": "2270270"
  },
  {
    "text": "Alpha is attenuation. This is our good old E\nto the J 2 pi delta FT. We have just discretized\nit through the ADC.",
    "start": "2270270",
    "end": "2278730"
  },
  {
    "text": "This E to the J phi 0\nis the starting phase at the very beginning\nof the frame. And then this is the\njust E to the J 2 pi.",
    "start": "2278730",
    "end": "2286290"
  },
  {
    "text": "And this here is\nlike M delta phi. That's what it is, E to the J.",
    "start": "2286290",
    "end": "2292780"
  },
  {
    "text": "Now what's really\ninteresting here is now we have this complex\nexponential term, which",
    "start": "2292780",
    "end": "2298060"
  },
  {
    "text": "is proportional at the frequency\nof it is the Doppler shift. And it's sampled at a\ndifferent sampling rate.",
    "start": "2298060",
    "end": "2304269"
  },
  {
    "text": "It's sampled at every T\nseconds, which is a chirp--",
    "start": "2304270",
    "end": "2309610"
  },
  {
    "text": "a chirp time. So here, we have a different\nsampling rate for delta F. Delta F is sampled at TS,\nwhich is our ADC sampling time.",
    "start": "2309610",
    "end": "2317740"
  },
  {
    "text": "And that's fast. That's why it's\ncalled fast time. And then our Doppler\nis sampled slowly",
    "start": "2317740",
    "end": "2323050"
  },
  {
    "text": "because it's sampled\nbetween chirps. And that's every T seconds. And this is usually called slow\ntime in the context of radar.",
    "start": "2323050",
    "end": "2330790"
  },
  {
    "text": "So how do we process this? Processing turns out to be\nextremely, extremely easy. Before we do that, you can even\nmake it more general if you",
    "start": "2330790",
    "end": "2340420"
  },
  {
    "text": "have K, K targets. What happens? You just sum K of this. One for each target that\nis echoing back to you.",
    "start": "2340420",
    "end": "2348900"
  },
  {
    "text": "So it's the exact\nsame expression. Mu is mu because it's the\nsame game for all targets. But then now, every\ntarget going from 1 to K",
    "start": "2348900",
    "end": "2355850"
  },
  {
    "text": "has its own attenuation\nfactor, its own delta F, which is proportional to\nthe range of the IF target.",
    "start": "2355850",
    "end": "2363410"
  },
  {
    "text": "It contributes a phi 0 to the\nstarting phase of the frame. And it has this term, which\nis the phase of the IF signal.",
    "start": "2363410",
    "end": "2372710"
  },
  {
    "text": "And it has its proportional\nto the Doppler frequency,",
    "start": "2372710",
    "end": "2377940"
  },
  {
    "text": "which, as we know,\ngives us Vri, which is the relative radial\nvelocity of the IF target, OK?",
    "start": "2377940",
    "end": "2386839"
  },
  {
    "text": "So that's the\ngeneral signal model. And here, two assumptions\ngo into the signal model.",
    "start": "2386840",
    "end": "2394770"
  },
  {
    "text": "So we have assumed that within\none frame, both the target range and the target, the\nloss of radial velocity",
    "start": "2394770",
    "end": "2402020"
  },
  {
    "text": "of the target are\nalmost constant. OK? So the frames should be long\nenough, should be short enough",
    "start": "2402020",
    "end": "2409970"
  },
  {
    "text": "that both these\nassumptions are valid. R doesn't change too\nmuch for each target. And Vr doesn't change too much.",
    "start": "2409970",
    "end": "2416130"
  },
  {
    "text": "So that means the frames\nshould be short enough. But also should be long\nenough, such that it gives us enough chirps so that we can\nestimate Doppler accurately.",
    "start": "2416130",
    "end": "2424940"
  },
  {
    "text": "What are some typical\nnumbers for reasonable frame times for applications\nwe are interested in?",
    "start": "2424940",
    "end": "2433609"
  },
  {
    "text": "No more than 100 milliseconds. I would say. If it goes above\n100 milliseconds--",
    "start": "2433610",
    "end": "2438980"
  },
  {
    "text": "except if things are moving\nreally, really slowly, that's where I would\nstart to worry. Like, are these assumptions\nare still valid or not?",
    "start": "2438980",
    "end": "2445670"
  },
  {
    "text": "And 100 milliseconds\nframe time, that's like a 10 frames a second radar. So it's something\nvery interesting.",
    "start": "2445670",
    "end": "2453470"
  },
  {
    "text": "Of course, if you can\nwork with shorter frames, it's better because that means\nthese assumptions are even more",
    "start": "2453470",
    "end": "2458799"
  },
  {
    "text": "valid. But if things start to\nbecome too long in your frame or if the frame duration starts\nto become too long, you should",
    "start": "2458800",
    "end": "2465920"
  },
  {
    "text": "plug-in some numbers\nfor typical range, typical velocity that\nyou get, and see,",
    "start": "2465920",
    "end": "2471660"
  },
  {
    "text": "OK, are the assumptions\nis still valid or not, that went into the signal model.",
    "start": "2471660",
    "end": "2476700"
  },
  {
    "text": "OK. How do we process this? Processing is a two-step thing.",
    "start": "2476700",
    "end": "2481730"
  },
  {
    "text": "First, the step is the\nsame as we did before. So first, you do range\nestimation, which is just an N point FFT, OK?",
    "start": "2481730",
    "end": "2488510"
  },
  {
    "text": "But now your signal is a\nfunction of two indices. You have N and\nyou have M, right?",
    "start": "2488510",
    "end": "2494480"
  },
  {
    "text": "So your first FFT\nis along the N axis, and that is called the range\nFFT, or range processing.",
    "start": "2494480",
    "end": "2502599"
  },
  {
    "text": "Range processing. So when you do range processing,\nyou basically just take the FFT",
    "start": "2502600",
    "end": "2508960"
  },
  {
    "text": "if this IF signal over N, OK? And that's the big N point FFT.",
    "start": "2508960",
    "end": "2514210"
  },
  {
    "text": "So everything that\ndoesn't depend on N, you can just take\nthem out of the FFD.",
    "start": "2514210",
    "end": "2519880"
  },
  {
    "text": "Sum or integral, so mu is mu. Alpha I is alpha I.\nThis stuff is also-- you",
    "start": "2519880",
    "end": "2525580"
  },
  {
    "text": "can take them out because\nthey are not functions of N. The only term that\nhas independence",
    "start": "2525580",
    "end": "2531350"
  },
  {
    "text": "is this, E to the J\n2 pi delta F ints. Yes, which is the same\nthing we had before when",
    "start": "2531350",
    "end": "2536740"
  },
  {
    "text": "we did our ranging. So you take the FFT of that. Call that FFT. I'm calling it R\ntilde i of K. OK?",
    "start": "2536740",
    "end": "2544930"
  },
  {
    "text": "In fact, I'm also in\nthis R tilde i I'm also including the constant. So the Alpha I, the mu,\nand E to the J phi I 0.",
    "start": "2544930",
    "end": "2554079"
  },
  {
    "text": "I'm also lumping those into-- all right, just to\nsimplify the math, right?",
    "start": "2554080",
    "end": "2559660"
  },
  {
    "text": "So RI is our range FFT. And we know from what\nwe just discussed that for each target, if you\nlook at the magnitude of R",
    "start": "2559660",
    "end": "2568600"
  },
  {
    "text": "tilde i, It will have\na peak at an index that is proportional to the\nrange of that target.",
    "start": "2568600",
    "end": "2575740"
  },
  {
    "text": "In fact, it will show a\npeak at an index K hat I, which is equal to N\ntimes delta F hat I over FS.",
    "start": "2575740",
    "end": "2582850"
  },
  {
    "text": "And delta F hat I is\nproportional to RI or R hat I, which is the range\nof the IF target, OK?",
    "start": "2582850",
    "end": "2590440"
  },
  {
    "text": "So range processing\nconverts your raw IF signal into something that\nshows peaks and indices",
    "start": "2590440",
    "end": "2598690"
  },
  {
    "text": "proportional to the\nrange of the targets. Now look at this. We have something\nvery interesting. As a function of M,\nwhat we have here",
    "start": "2598690",
    "end": "2605650"
  },
  {
    "text": "is just this complex\nexponential, right? It's like a complex exponential\nwith a frequency, that",
    "start": "2605650",
    "end": "2611829"
  },
  {
    "text": "is the Doppler frequency\nof the IF target, FT I. So if we take now\nan FFT over M, that",
    "start": "2611830",
    "end": "2621180"
  },
  {
    "text": "should give us peaks that are\nproportional to the Doppler frequencies, right?",
    "start": "2621180",
    "end": "2626520"
  },
  {
    "text": "So again, now our Doppler\nestimation or velocity estimation became a spectral\nestimation, or a frequency",
    "start": "2626520",
    "end": "2633270"
  },
  {
    "text": "estimation problem, we need\nto estimate these FTIs. Simplest algorithm is\na Fourier transform.",
    "start": "2633270",
    "end": "2638920"
  },
  {
    "text": "So let's do that. So now you do a\nsecond one dimensional N point FFT along the m-axis.",
    "start": "2638920",
    "end": "2645250"
  },
  {
    "text": "This is called Doppler\nFFT or Doppler processing. So now we take the FFT\nover M of the already",
    "start": "2645250",
    "end": "2653730"
  },
  {
    "text": "FFT to pre processed IF signal. And this time, you can take\nthe R tilde out of the FFT",
    "start": "2653730",
    "end": "2661080"
  },
  {
    "text": "because that does\nnot depend on M. So you just FFT this\ncomplex exponential term,",
    "start": "2661080",
    "end": "2667260"
  },
  {
    "text": "and let's call that\nD tilde I of L, OK? So D tilde of L,\nit will show peaks",
    "start": "2667260",
    "end": "2674579"
  },
  {
    "text": "at indices L that are\nproportional to the Doppler shifts or Doppler frequencies\nof individual targets.",
    "start": "2674580",
    "end": "2683670"
  },
  {
    "text": "Very specifically for\nthe IF target if you look at the magnitude of D tilde I.\nIt will show a peak at L hat",
    "start": "2683670",
    "end": "2693450"
  },
  {
    "text": "I's. And the Doppler\nshifts are just L hat over M, which is the number\nof points in the FFT times",
    "start": "2693450",
    "end": "2699300"
  },
  {
    "text": "this F prime is. What is F prime S? Is the sampling rate in\nthe Doppler axis, OK?",
    "start": "2699300",
    "end": "2706860"
  },
  {
    "text": "On the Doppler axis, we\nsaid we are a slow time. So we are sampling\nat 1 over T rate. So F prime S, which is 1 over T,\nis the effective sampling rate",
    "start": "2706860",
    "end": "2715170"
  },
  {
    "text": "along the Doppler axis. And it basically becomes\nminus L hat I over TF.",
    "start": "2715170",
    "end": "2723000"
  },
  {
    "text": "So that's the estimate\nof the Doppler shift, of the i-th target.",
    "start": "2723000",
    "end": "2728579"
  },
  {
    "text": "And Doppler shift, we\ncan also easily convert that to radial velocities.",
    "start": "2728580",
    "end": "2733590"
  },
  {
    "text": "Radial velocities are Doppler\nminus Doppler times lambda over 2. If you plug everything\nin, in terms",
    "start": "2733590",
    "end": "2741150"
  },
  {
    "text": "of the indices at which you\nsee the peaks along the Doppler axis, if you multiply them\nby lambda divided by 2 times",
    "start": "2741150",
    "end": "2749670"
  },
  {
    "text": "the frame time, that gives\nyou the radial velocities of the targets and\nmeters per second.",
    "start": "2749670",
    "end": "2755530"
  },
  {
    "text": "I know the math becomes\na bit dense here. So this is the kind of a thing. You have to sit down and go\nthrough it at your own pace,",
    "start": "2755530",
    "end": "2763830"
  },
  {
    "text": "and make sure every\nstep makes sense. But I very intentionally\nleft nothing out",
    "start": "2763830",
    "end": "2769950"
  },
  {
    "text": "when it comes to\nwriting down the math and clarifying all the\nassumptions because I think",
    "start": "2769950",
    "end": "2775680"
  },
  {
    "text": "it's important to get\ncomfortable to work at this level of\nmathematical complexity.",
    "start": "2775680",
    "end": "2782100"
  },
  {
    "text": "Again, the point\nhere is that even like lots of textbooks,\nwhen it comes to DSP,",
    "start": "2782100",
    "end": "2788790"
  },
  {
    "text": "they just tell you, Oh, range\nand Doppler processes, these are just two FFTs, go\ndo it, and you're done.",
    "start": "2788790",
    "end": "2794280"
  },
  {
    "text": "And of course-- well,\nyes and no, right? I mean, yes, and again,\n95% of the cases,",
    "start": "2794280",
    "end": "2800520"
  },
  {
    "text": "but there's a lot of\nassumptions that go into this. And it's important\nI think really, really important for you to know\nwhere those assumptions were",
    "start": "2800520",
    "end": "2808853"
  },
  {
    "text": "made, what are the assumptions? And at the end of\nthe day, why FFT? FFT is just-- or\nFourier transform",
    "start": "2808853",
    "end": "2814200"
  },
  {
    "text": "is just a convenient\nalgorithm that lets us find these frequencies\nwe are looking for.",
    "start": "2814200",
    "end": "2820980"
  },
  {
    "text": "There is nothing\nsacred about FFT. You could do another many,\nmany different algorithms",
    "start": "2820980",
    "end": "2826710"
  },
  {
    "text": "exist that can be used\nfor spectral estimation. So FFT, again, it's\nstandard because it's",
    "start": "2826710",
    "end": "2834119"
  },
  {
    "text": "efficient, and easy,\nand convenient to use. But you can actually,\nin terms of performance,",
    "start": "2834120",
    "end": "2840210"
  },
  {
    "text": "beat FFT by a long\nmargin if you use more sophisticated algorithms.",
    "start": "2840210",
    "end": "2845250"
  },
  {
    "text": "So let's look at\nthis graphically. Hopefully, this\nnext slide kind of-- instead of math\ngets really dense.",
    "start": "2845250",
    "end": "2852280"
  },
  {
    "text": "But this is visually really\nat the end of the day, what happens? It's a very, very simple\nprocess to do range and Doppler",
    "start": "2852280",
    "end": "2858240"
  },
  {
    "text": "estimation. So the way to read this,\nit's like four blocks. So you start here so that's\nnumber / you go from 1 to 2,",
    "start": "2858240",
    "end": "2866220"
  },
  {
    "text": "2 to 3. 3 to 4. OK. So let's go together. One is there's nothing\nhappening in one.",
    "start": "2866220",
    "end": "2872640"
  },
  {
    "text": "So there's just from\nyour ADC signals coming in, raw signal, OK?",
    "start": "2872640",
    "end": "2878099"
  },
  {
    "text": "So you take one frame\nof data, and you just populate it in a by N matrix.",
    "start": "2878100",
    "end": "2884079"
  },
  {
    "text": "So you have in rows are your\nindex N, which is ADC samples.",
    "start": "2884080",
    "end": "2889170"
  },
  {
    "text": "And columns are the chip index. So you put your first IF\nsignal from the first chirp",
    "start": "2889170",
    "end": "2894300"
  },
  {
    "text": "in the first row, SIF\n0 N. The second IF goes in the second row, third\none goes in the third row,",
    "start": "2894300",
    "end": "2900570"
  },
  {
    "text": "and so on, all the\nway to the n-th one. OK? So that's just ordering your\ndata before you process it.",
    "start": "2900570",
    "end": "2907530"
  },
  {
    "text": "Now you want to do range\nand Doppler processing. To do range processing,\nyou FFT each row.",
    "start": "2907530",
    "end": "2913410"
  },
  {
    "text": "Every row of the matrix just\ndo a N big endpoint FFT on it.",
    "start": "2913410",
    "end": "2919210"
  },
  {
    "text": "And that converts basically ADC\nsamples to the range index K.",
    "start": "2919210",
    "end": "2925140"
  },
  {
    "text": "And we called that\nR tilde, right? So you get R tilde K, R tilde\nK, R tilde K on the rows,",
    "start": "2925140",
    "end": "2930150"
  },
  {
    "text": "but each is multiplied--\neach row is multiplied by a different complex\nexponential that is proportional to\nthe Doppler shift.",
    "start": "2930150",
    "end": "2938079"
  },
  {
    "text": "So you get-- first\none is multiplied by just E to the J 0. Second one, E to J 2 pi FDTs.",
    "start": "2938080",
    "end": "2944130"
  },
  {
    "text": "Third one, E to the J 2 pi FD\n2 T, and so on, and so forth. OK. So that's your range\nprocessing double processing.",
    "start": "2944130",
    "end": "2950349"
  },
  {
    "text": "Now you take FFTs of\neach every column, right? So FFT every column,\nthis is going",
    "start": "2950350",
    "end": "2955680"
  },
  {
    "text": "to be N point FFT because\nyou have N points. And again, remember, every\ncell here is 1 ADC sample,",
    "start": "2955680",
    "end": "2963270"
  },
  {
    "text": "1 ADC sample. So it's just one number, one\ncomplex number in every cell,",
    "start": "2963270",
    "end": "2968940"
  },
  {
    "text": "right? So that's our data\nmatrix, basically. So FFT, the columns,\nand then that",
    "start": "2968940",
    "end": "2974670"
  },
  {
    "text": "converts your chirp index to a\nDoppler shift index L, right?",
    "start": "2974670",
    "end": "2980309"
  },
  {
    "text": "And that's why we call\nthat, after the FFT, we call it detailed D of L. So\nnow if you look at your cell",
    "start": "2980310",
    "end": "2989190"
  },
  {
    "text": "basically KL, that gives you\nwhat we call SIF, big SIF of K",
    "start": "2989190",
    "end": "2995099"
  },
  {
    "text": "and L. And then the K is\nproportional to, basically",
    "start": "2995100",
    "end": "3000330"
  },
  {
    "text": "to the range, and L. So K is range index.",
    "start": "3000330",
    "end": "3006690"
  },
  {
    "text": "And L is Doppler index\nor velocity index. How do you convert these indices\nto physical quantities that",
    "start": "3006690",
    "end": "3014900"
  },
  {
    "text": "is range in meters velocity\nand meters per second? Those are simple scaling, right? These are the things\nwe had seen before.",
    "start": "3014900",
    "end": "3020869"
  },
  {
    "text": "So from this, to make what\nis called a range velocity map, what you do\nis first you take",
    "start": "3020870",
    "end": "3028099"
  },
  {
    "text": "the magnitude of this\nmatrix after the 2 FFTs because it's going\nto be complex value,",
    "start": "3028100",
    "end": "3034220"
  },
  {
    "text": "but you look at the\nmagnitude of it. And then to go from\nindices to physical range",
    "start": "3034220",
    "end": "3039830"
  },
  {
    "text": "in meters, velocity in meters\nper second, let's zoom in here, you do scaling. So a range becomes like\nK times FS C over 2 Nb.",
    "start": "3039830",
    "end": "3047820"
  },
  {
    "text": "I mean, these are the things\nthat we had seen before. Doppler becomes minus L over MT,\nand then velocity from Doppler",
    "start": "3047820",
    "end": "3054440"
  },
  {
    "text": "is minus Doppler shift\ntimes lambda over 2. After you scale your two\naxes, according to these,",
    "start": "3054440",
    "end": "3059660"
  },
  {
    "text": "you end up with here,\nthe visualization is-- color is basically\nthe value in dB.",
    "start": "3059660",
    "end": "3067610"
  },
  {
    "text": "So it goes from -30 to 30 dB. And then the two axes,\none is range in meters. One is velocity\nmeters per second.",
    "start": "3067610",
    "end": "3074690"
  },
  {
    "text": "It is called the\nrange velocity map. But note, it's not the\nmap that we intend, it's just a term used\nin radar terminology.",
    "start": "3074690",
    "end": "3082280"
  },
  {
    "text": "So it's not map in the sense\nof the geometric representation of what the scene looks\nlike because we haven't",
    "start": "3082280",
    "end": "3089359"
  },
  {
    "text": "done direction of arrival yet. But it's still very useful\nbecause it tells you a lot of information.",
    "start": "3089360",
    "end": "3095490"
  },
  {
    "text": "So looking at this, you can read\nit as kind of like a heat map, if you will, and where\nyou have peaks in here,",
    "start": "3095490",
    "end": "3101660"
  },
  {
    "text": "like here, that's\na target, right? Everywhere that the values\nare low, this is just noise.",
    "start": "3101660",
    "end": "3108688"
  },
  {
    "text": "So you ignore that. And then very, very\nhave, you know, big values those are\nwhere the targets are.",
    "start": "3108688",
    "end": "3114310"
  },
  {
    "text": "So here for instance, I can tell\nthat I probably in this scene had a moving target\nat about, say,",
    "start": "3114310",
    "end": "3120520"
  },
  {
    "text": "20 meters range and a\nvelocity of about, say, -20 meters per second.",
    "start": "3120520",
    "end": "3126930"
  },
  {
    "text": "That's one because that's a\nhotspot in my range velocity map. What is this stuff? All of this, it's\nspans a lot of range",
    "start": "3126930",
    "end": "3137400"
  },
  {
    "text": "from very close to far\naway, but all at 0 velocity. So that's all the static\nparts of the scene, right?",
    "start": "3137400",
    "end": "3143520"
  },
  {
    "text": "I probably had like stuff\nfrom very close to me. I don't know where\nthis was captured. But if it was out on\nthe street, maybe it",
    "start": "3143520",
    "end": "3149250"
  },
  {
    "text": "was like buildings or trees, or\nanything that's a stationary, from very close to right\nabout 120, 130 meters.",
    "start": "3149250",
    "end": "3159420"
  },
  {
    "text": "And those all show at 0 velocity\nslice basically in the range, range velocity map. So that's how far we have\ngotten so far in terms",
    "start": "3159420",
    "end": "3166710"
  },
  {
    "text": "of the DSP of FMCW radar. We can do range, and we\ncan do velocity estimation.",
    "start": "3166710",
    "end": "3174570"
  },
  {
    "text": "One more thing is\nthat the 2 FFTs, so we did FFT on the\nrows, FFT on the columns.",
    "start": "3174570",
    "end": "3180600"
  },
  {
    "text": "If you like, you can combine\nthe two, and just do one 2D FFT. That's mathematically\nequivalent.",
    "start": "3180600",
    "end": "3189609"
  },
  {
    "text": "And so basically,\nwhat you can do is that you can start\nfrom your data matrix,",
    "start": "3189610",
    "end": "3196140"
  },
  {
    "text": "raw data matrix, and just do\na 2D FFT on it over M and N.",
    "start": "3196140",
    "end": "3201150"
  },
  {
    "text": "And that's equivalent\nto two separate 1D FFT. It's just mathematically\nequivalent, and that directly gives you\nyour range Doppler processed,",
    "start": "3201150",
    "end": "3210720"
  },
  {
    "text": "basically data matrix. And again remember R tilde\nI's they have peaks, where",
    "start": "3210720",
    "end": "3218010"
  },
  {
    "text": "according-- where the target\naccording to target range, and D tilde I's they\nshow peaks according",
    "start": "3218010",
    "end": "3224670"
  },
  {
    "text": "to the target velocities. So when you multiply\nthe two, you get peaks at the correct range\nand velocity of the target.",
    "start": "3224670",
    "end": "3233860"
  },
  {
    "text": "Here's another picture. Again, this is a\nlittle more compact so you start from one frame\nof data, OK, coming in,",
    "start": "3233860",
    "end": "3241950"
  },
  {
    "text": "and then you accumulate\nthe IF signal into this and and raw data\nmatrix, and then",
    "start": "3241950",
    "end": "3247500"
  },
  {
    "text": "you can do an n\nby n 2D FFT on it. And that gives you\nthis SIF of L and K.",
    "start": "3247500",
    "end": "3252960"
  },
  {
    "text": "And then on this\nor on the magnitude of this, if you do\npeak search, that gives you the range and\nvelocities of the targets.",
    "start": "3252960",
    "end": "3259599"
  },
  {
    "text": "Here's another visualization\nof the range velocity map. Here, instead of like an\nimage view or a heat map view,",
    "start": "3259600",
    "end": "3265890"
  },
  {
    "text": "you're doing a full 3D surface. So same data. It's just visualized\ndifferently.",
    "start": "3265890",
    "end": "3271350"
  },
  {
    "text": "But for this one, it shows\ntwo pretty significant peaks.",
    "start": "3271350",
    "end": "3276690"
  },
  {
    "text": "So those correspond\nto two targets. Looks like in this case, they\nwere both at around 100 meters",
    "start": "3276690",
    "end": "3281940"
  },
  {
    "text": "range. And one had, I don't\nknow, a velocity of like maybe -15\nmeters per second.",
    "start": "3281940",
    "end": "3287650"
  },
  {
    "text": "The other one had a velocity\nof maybe 30 meters per second, or something like that. But the point is from here,\nyou can detect usually--",
    "start": "3287650",
    "end": "3298800"
  },
  {
    "text": "you can do target\ndetection on this, right? So for instance, if\nyou apply a threshold,",
    "start": "3298800",
    "end": "3304750"
  },
  {
    "text": "and just keep everything that\nis above a fixed threshold, that could give\nyou your targets.",
    "start": "3304750",
    "end": "3310720"
  },
  {
    "text": "That's one way of doing\ntarget detection on this.",
    "start": "3310720",
    "end": "3315810"
  },
  {
    "text": "Any questions? Yes?  What is the magnitude, like\nkind of the signal strength",
    "start": "3315810",
    "end": "3323990"
  },
  {
    "text": "of the IF signal? Yes, after the FFT. So the magnitude\nhere is basically",
    "start": "3323990",
    "end": "3330020"
  },
  {
    "text": "the norm of this as\nbig as IF of L and K.",
    "start": "3330020",
    "end": "3336150"
  },
  {
    "text": "According to that\nbecause we know-- Or lack of it. --the target and then maybe\nthe magnitude of the noise.",
    "start": "3336150",
    "end": "3342734"
  },
  {
    "text": "So can it be transferred\ninto SNR or something? Yes. So if you want to estimate\nSNR, one way of doing",
    "start": "3342735",
    "end": "3350849"
  },
  {
    "text": "it is that if you\nlook at part of this where there is no\ntargets and average that, that can give you kind of\nlike your noise level, right?",
    "start": "3350850",
    "end": "3359970"
  },
  {
    "text": "Noise floor, and then\nyou take your targets, and then you divide\nlike your target value",
    "start": "3359970",
    "end": "3365580"
  },
  {
    "text": "by the noise floor, and that\ngives you a measure of SNR. But you have to know, look\nat-- or maybe the previous one",
    "start": "3365580",
    "end": "3371430"
  },
  {
    "text": "is better if I go here. Like over here, if there\nwas no target, you can just, you know, average here.",
    "start": "3371430",
    "end": "3377310"
  },
  {
    "text": "And that gives you kind\nof like your noise level. And then, yeah, use\nthat to estimate SNR.",
    "start": "3377310",
    "end": "3382740"
  },
  {
    "text": "That's one way of doing it. OK. Last thing we need to do\nis with this algorithm,",
    "start": "3382740",
    "end": "3392310"
  },
  {
    "text": "what is the velocity\nresolution and maximum velocity you can detect? Well, it's another FFT, right?",
    "start": "3392310",
    "end": "3398390"
  },
  {
    "text": "So the exact same argument\nwe did for range applies. What is the velocity resolution? It's the width of one Doppler--",
    "start": "3398390",
    "end": "3406069"
  },
  {
    "text": "one FFT bin for the Doppler FFT.",
    "start": "3406070",
    "end": "3411530"
  },
  {
    "text": "So when it comes to the\nminimum Doppler shift that we can discriminate,\nthat delta F",
    "start": "3411530",
    "end": "3416870"
  },
  {
    "text": "is the sampling rate\nfor on the Doppler axis, which was F prime S, divided\nby the number of points",
    "start": "3416870",
    "end": "3423770"
  },
  {
    "text": "in the Doppler FFTM. And we know F prime was just 1\nover T, 1 over the chirp time.",
    "start": "3423770",
    "end": "3429299"
  },
  {
    "text": "So it becomes 1 over M times T\nor 1 over the total frame time, OK? So if you want better\nDoppler resolution,",
    "start": "3429300",
    "end": "3436610"
  },
  {
    "text": "you need longer frames,\nbasically, larger TF. In terms of what the exact\nvelocity resolution is,",
    "start": "3436610",
    "end": "3444740"
  },
  {
    "text": "delta V, we know how\nit's related to delta F, is delta F times\nlambda over 2, and then",
    "start": "3444740",
    "end": "3450740"
  },
  {
    "text": "plug 1 over TF for delta F.\nYou get lambda over 2 TF. So to improve your\nvelocity resolution,",
    "start": "3450740",
    "end": "3457190"
  },
  {
    "text": "you need longer\nframe duration, OK? And then what is the maximum\nvelocity you can detect?",
    "start": "3457190",
    "end": "3464050"
  },
  {
    "text": "Maximum velocity\nalso corresponds to the maximum\nfrequency that you can detect in your Doppler FFT.",
    "start": "3464050",
    "end": "3472600"
  },
  {
    "text": "One very important thing is when\nwe were doing this for range, we said range is\nalways positive. So in the range FFT, we look at\nfrequency 0 all the way to FS.",
    "start": "3472600",
    "end": "3481510"
  },
  {
    "text": "Velocity can be\npositive or negative. So when we're looking at your\nDoppler shift in the FFT,",
    "start": "3481510",
    "end": "3487870"
  },
  {
    "text": "you basically search the FFT\nfrom minus FS prime over 2",
    "start": "3487870",
    "end": "3493390"
  },
  {
    "text": "to FS prime over 2. So you basically\ntake it two sided, and that's why you get this.",
    "start": "3493390",
    "end": "3500470"
  },
  {
    "text": "So the maximum frequency that\nyou can find in your Doppler FFT before it becomes\nambiguous is half the sampling",
    "start": "3500470",
    "end": "3509050"
  },
  {
    "text": "rate because you want to\ngo two sided basically. So half the sampling\nrate, plug that in,",
    "start": "3509050",
    "end": "3514450"
  },
  {
    "text": "and it becomes lambda over 40. Interestingly,\nboth this and this",
    "start": "3514450",
    "end": "3519670"
  },
  {
    "text": "are the exact same that\nwe got when we first did the simple velocity\nestimation from just",
    "start": "3519670",
    "end": "3525700"
  },
  {
    "text": "two consecutive chirps. Just, I don't know,\n20 minutes ago, we got the exact same velocity\nresolution and maximum",
    "start": "3525700",
    "end": "3534370"
  },
  {
    "text": "velocity. Again, it makes\nsense because if we are doing the same algorithm,\nwe just extended it to M chirps instead of 2.",
    "start": "3534370",
    "end": "3540730"
  },
  {
    "text": "So it kind of\nmakes sense that it doesn't affect the overall\nresolution or maximum velocity.",
    "start": "3540730",
    "end": "3546470"
  },
  {
    "text": "OK. So here's another trade\noff, basically, for you. If you keep all the\nparameters constant",
    "start": "3546470",
    "end": "3551920"
  },
  {
    "text": "and just decrease the chirp\nduration T, what happens is that it will decrease\nvelocity resolution, right?",
    "start": "3551920",
    "end": "3559029"
  },
  {
    "text": "Why does it decrease\nvelocity resolution? Because if you decrease\nT, you decrease TF. You decrease TF, your\ndelta Vr goes up.",
    "start": "3559030",
    "end": "3565510"
  },
  {
    "text": "So you lose velocity\nof resolution, but you increase\nmaximum velocity. Again, because your T goes\ndown, your maximum V goes up.",
    "start": "3565510",
    "end": "3574460"
  },
  {
    "text": "So that's a trade off\nbetween velocity resolution and maximum velocity that you\ncan detect with this algorithm,",
    "start": "3574460",
    "end": "3581080"
  },
  {
    "text": "what the FFT algorithm. Any questions? Yes? Why in this case\ndo you have to--",
    "start": "3581080",
    "end": "3587600"
  },
  {
    "text": " for the sampling\nof the Doppler, why is it like, quote,\nunquote, Nyquist, I guess?",
    "start": "3587600",
    "end": "3594050"
  },
  {
    "text": "Why is it FS over\n2 and not just FS? Well, it is Nyquist, but\nit is minus FS over 2",
    "start": "3594050",
    "end": "3602930"
  },
  {
    "text": "to FS because if this is\nmy frequency after the FFT,",
    "start": "3602930",
    "end": "3609050"
  },
  {
    "text": "and that's 0, so\nNyquist tells us you have to be within\nthe sampling rate",
    "start": "3609050",
    "end": "3616460"
  },
  {
    "text": "before things are\nstart to wrap around. So you can pick your-- you have\nan overall spectral width that",
    "start": "3616460",
    "end": "3625700"
  },
  {
    "text": "is equal to F prime S. You can pick your\nstarting point,",
    "start": "3625700",
    "end": "3630740"
  },
  {
    "text": "and that determines\nyour N point. If you know the quantity\nor the frequency you're looking for\nis always positive,",
    "start": "3630740",
    "end": "3637880"
  },
  {
    "text": "you want to start at 0, and then\nyou go all the way to FS prime. But for velocity, we know it\ncan be positive or negative",
    "start": "3637880",
    "end": "3644660"
  },
  {
    "text": "because the target\ncan come towards you or go away from you. So then you make it symmetric.",
    "start": "3644660",
    "end": "3649910"
  },
  {
    "text": "You start at minus\nF prime S over 2, and then you search all the\nway to F prime S over 2.",
    "start": "3649910",
    "end": "3657140"
  },
  {
    "text": "And that's why, basically. It's just because it can\nbe positive or negative. OK.",
    "start": "3657140",
    "end": "3662900"
  },
  {
    "text": "So we are kind of like\nclosing this part of the DSP",
    "start": "3662900",
    "end": "3667970"
  },
  {
    "text": "about range and Doppler\nestimation or range and velocity estimation. One thing to note is\nthat when we discussed",
    "start": "3667970",
    "end": "3674930"
  },
  {
    "text": "this idea of the\nchirp waveforms, we assumed ideal chirps,\nthere were these the chirps",
    "start": "3674930",
    "end": "3680990"
  },
  {
    "text": "that we looked at, it was\njust perfect frequency ramp, and then instantaneously\nwould like drop to 0,",
    "start": "3680990",
    "end": "3687472"
  },
  {
    "text": "and then you would\ntransmit the next one, and then you would transmit\nthe next one, right? In reality they\ndon't look like this.",
    "start": "3687472",
    "end": "3693450"
  },
  {
    "text": "There's nonidealities\nin the waveform. So it's more like this\npicture here what a realistic,",
    "start": "3693450",
    "end": "3698960"
  },
  {
    "text": "you know, what you get\nfrom actual hardware. So here is just assumed like\nthis was the previous chirp.",
    "start": "3698960",
    "end": "3705210"
  },
  {
    "text": "This is the next chirp. And then when you turn\noff your transmitter, there is this ugly\ntransition down",
    "start": "3705210",
    "end": "3711920"
  },
  {
    "text": "to 0, which takes some time. And there's some\nwiggling around it. Also when you start\nthe ramp, there",
    "start": "3711920",
    "end": "3719210"
  },
  {
    "text": "is a little bit of nonideality\nat the very beginning, there's usually a\nkink in the frequency. So there is only a\npart of the full chirp",
    "start": "3719210",
    "end": "3726830"
  },
  {
    "text": "that is constant slew\nrate, and nice and linear, and useful, OK? And that is what the\nactual hardware uses.",
    "start": "3726830",
    "end": "3734300"
  },
  {
    "text": "So your ADCs are only sampling\nat the nicest, most linear part",
    "start": "3734300",
    "end": "3739790"
  },
  {
    "text": "of the chirp because\nif they don't do that, all of this ugliness\nand distortions",
    "start": "3739790",
    "end": "3746900"
  },
  {
    "text": "will make it into your signal. And your FFTs become\nvery, very noisy. And it becomes very difficult\nto see what's a real target,",
    "start": "3746900",
    "end": "3754010"
  },
  {
    "text": "and what's noise. So that's important to note. Also, there is always some idle\ntime between the previous chirp",
    "start": "3754010",
    "end": "3763190"
  },
  {
    "text": "and the start of\nthe next one, OK? These are typically small. I mean, could be a couple\nof microseconds only.",
    "start": "3763190",
    "end": "3769250"
  },
  {
    "text": "But there is some idle time\nbecause as you shut down your transmitter, it needs,\nagain, a bit of time for it",
    "start": "3769250",
    "end": "3774980"
  },
  {
    "text": "for the transients to\ndie off, and then it's ready to do another chirp. That idle time should\nbe factored in when",
    "start": "3774980",
    "end": "3782329"
  },
  {
    "text": "it comes to the sampling\nrate along the Doppler axis because we said the\nsampling rate is just 1",
    "start": "3782330",
    "end": "3789680"
  },
  {
    "text": "over the chirp duration. But in reality, there's\nthis T effective, which is the chirp duration\nplus the idle time.",
    "start": "3789680",
    "end": "3796500"
  },
  {
    "text": "So the frequency or the sampling\nrate on the Doppler axis becomes 1 over the\neffective chirp",
    "start": "3796500",
    "end": "3803930"
  },
  {
    "text": "time, which is the chirp\nduration plus the idle time. It's very, very important. And these numbers are known.",
    "start": "3803930",
    "end": "3809930"
  },
  {
    "text": "Like, you can go-- either you can\nfigure it, or it's in the data sheet of the\ntransceiver that you're using.",
    "start": "3809930",
    "end": "3816680"
  },
  {
    "text": "But when you're\ndoing your analysis, just you have to--\nand your DSP, you have to account for the\nidle time for sure, OK?",
    "start": "3816680",
    "end": "3826730"
  },
  {
    "text": "And last but not least,\na lot of these parameters that we talked about, and\nwhat parameters did we",
    "start": "3826730",
    "end": "3833660"
  },
  {
    "text": "talk about, in terms of\nthe waveform parameters? Things like slew\nrate, chirp duration,",
    "start": "3833660",
    "end": "3839030"
  },
  {
    "text": "number of chirps per\nframe, frame duration, carrier frequency, a lot\nof these modern devices",
    "start": "3839030",
    "end": "3845840"
  },
  {
    "text": "let you configure them. So they can support a range\nof each of these variables.",
    "start": "3845840",
    "end": "3850980"
  },
  {
    "text": "So again, this TI transceiver\nwe looked at last time, AWR2243,",
    "start": "3850980",
    "end": "3856640"
  },
  {
    "text": "it's very configurable. And now that we know about these\ntrade offs that, for instance,",
    "start": "3856640",
    "end": "3862250"
  },
  {
    "text": "you can give up range, but\nget better range resolution, or you can give up\nmaximum velocity,",
    "start": "3862250",
    "end": "3867980"
  },
  {
    "text": "you get better\nvelocity resolution. Now you go and do your study\naccording to your application.",
    "start": "3867980",
    "end": "3875150"
  },
  {
    "text": "And you come up with a desirable\nchoice of these parameters",
    "start": "3875150",
    "end": "3880339"
  },
  {
    "text": "that you can configure\nyour device to use. So you can do studies like this.",
    "start": "3880340",
    "end": "3886130"
  },
  {
    "text": "This has been done\nfor a SISO system. But specifically, for this\ndevice and this table,",
    "start": "3886130",
    "end": "3893000"
  },
  {
    "text": "I can tell you which\nparameters you can configure as the user of the device. So FC, you can configure it.",
    "start": "3893000",
    "end": "3899630"
  },
  {
    "text": "And I think it supports\n76 to 81 gigahertz. So you go and specify what\ncenter frequency you want.",
    "start": "3899630",
    "end": "3906200"
  },
  {
    "text": "The center frequency\ndetermines lambda because lambda is F\nis just C over lambda. So you set F and it kind\nof dictates what lambda is.",
    "start": "3906200",
    "end": "3914030"
  },
  {
    "text": "You can set this\nslew rate, and then you look at the data sheet, it\ntells you a range of slew rates that you can do you.",
    "start": "3914030",
    "end": "3919685"
  },
  {
    "text": "You can set the idle time. You can set the chirp duration. And slew rate and chirp\nduration, together,",
    "start": "3919685",
    "end": "3926420"
  },
  {
    "text": "determines the bandwidth. So that's not a free\nparameter anymore. You can even set the ADC\nsampling rate in this device.",
    "start": "3926420",
    "end": "3932870"
  },
  {
    "text": "Again, there is range\nof acceptable values, but it's user determined. And then once you set\nthe sampling rate,",
    "start": "3932870",
    "end": "3938750"
  },
  {
    "text": "the sample's per chirp\nis determined for you. Chirps per frame, you\ncan also determine.",
    "start": "3938750",
    "end": "3944809"
  },
  {
    "text": "And with all of\nthese set, that also sets your total frame\nduration for you. And once you have\nthose, these blue ones,",
    "start": "3944810",
    "end": "3951380"
  },
  {
    "text": "these are-- so the top ones\nare kind of like engineering parameters. Those are the ones that\nyou, as a sensor engineer,",
    "start": "3951380",
    "end": "3957660"
  },
  {
    "text": "go and decide based on some\nstudies that you had done. And then from these kind of--",
    "start": "3957660",
    "end": "3963990"
  },
  {
    "text": "you can derive the system\nlevel parameters that determine the performance of the\nsystem, things like frame rate,",
    "start": "3963990",
    "end": "3970920"
  },
  {
    "text": "things like maximum range, range\nresolution, maximum velocity, velocity resolution. So these are the system\nlevel performance metrics.",
    "start": "3970920",
    "end": "3977530"
  },
  {
    "text": "So here's for instance,\nthree configurations that somebody has\ndesigned for this.",
    "start": "3977530",
    "end": "3984030"
  },
  {
    "text": "And those are for like a\nlong range application, a medium range application,\nand a short range application.",
    "start": "3984030",
    "end": "3989748"
  },
  {
    "text": "I wouldn't go through\nthe full table. But some things\nshould make sense. So for instance, short range,\nwhat is the maximum range?",
    "start": "3989748",
    "end": "3995250"
  },
  {
    "text": "So short range sees\nup to 62 meters. Long range sees up\nto 250 meters, OK?",
    "start": "3995250",
    "end": "4001040"
  },
  {
    "text": "So what parameter\nis changed here? So for instance, if\nyou look at the slew rates that were chosen, short\nrange has a higher slew rate.",
    "start": "4001040",
    "end": "4008450"
  },
  {
    "text": "Long range has a\nlower slew rate. Or if you look at, for\ninstance, the ADC sampling rate,",
    "start": "4008450",
    "end": "4013609"
  },
  {
    "text": "you see that short range\nhas a lower sampling rate. And the long range\nhas a longer sample--",
    "start": "4013610",
    "end": "4019280"
  },
  {
    "text": "larger sampling rate. And based on the trade\noffs that we discussed, these should make sense\nbecause for instance, you",
    "start": "4019280",
    "end": "4025393"
  },
  {
    "text": "know how changes in slew\nrate or sampling rate affect maximum range\nand range resolution.",
    "start": "4025394",
    "end": "4032569"
  },
  {
    "text": "Anyway, so again, it's not\nlike these numbers are not set in stone.",
    "start": "4032570",
    "end": "4038270"
  },
  {
    "text": "You, as the engineer, who is\nworking on an application,",
    "start": "4038270",
    "end": "4043640"
  },
  {
    "text": "should go and design,\nand decide what are the right parameters\nfor your applications.",
    "start": "4043640",
    "end": "4049040"
  },
  {
    "text": "There are some tools that\nI'm not a big fan of, but I should let\nyou know that exist.",
    "start": "4049040",
    "end": "4054690"
  },
  {
    "text": "So for instance, Ti\nprovides this online tool to design chirps for\ntheir transceivers.",
    "start": "4054690",
    "end": "4062250"
  },
  {
    "text": "So you go on their\nwebsite, and you decide what device you're using. So these are all the TI\nmillimeter wave transceivers,",
    "start": "4062250",
    "end": "4069590"
  },
  {
    "text": "go with 2243. You pick up the number of\ntransmit and receiver antennas.",
    "start": "4069590",
    "end": "4075590"
  },
  {
    "text": "Here, they're doing it\nthe other way around. So you give them like\nwhat parameters you want, like this is the\nmaximum range I want.",
    "start": "4075590",
    "end": "4082260"
  },
  {
    "text": "This is the maximum velocity I\nwant, and so on, and so forth. And then it kind of calculates\nthe chirp parameters",
    "start": "4082260",
    "end": "4091190"
  },
  {
    "text": "that you want to give the device\nin terms of the frequency slope is the slew rate, and\nthe sampling rate,",
    "start": "4091190",
    "end": "4099020"
  },
  {
    "text": "and so on and so forth. And then you can go program\nthe device accordingly. I'm not a fan of this because\nthis sort of becomes a bit",
    "start": "4099020",
    "end": "4106399"
  },
  {
    "text": "black boxy, and it hides\nthe low level trade offs that we talked about.",
    "start": "4106399",
    "end": "4111568"
  },
  {
    "text": "Now that you know how all\nthese parameters are related, you should do your own\nanalysis and come up",
    "start": "4111569",
    "end": "4117770"
  },
  {
    "text": "because again, these\nare trade offs. And when it comes\nto trade offs, you should decide what's the\nright trade offs to make.",
    "start": "4117770",
    "end": "4124580"
  },
  {
    "text": "You shouldn't let some black\nbox algorithm on a TI website that God knows which end\nto end route when decide",
    "start": "4124580",
    "end": "4131449"
  },
  {
    "text": "the fate of your application. Any questions?",
    "start": "4131450",
    "end": "4136520"
  },
  {
    "text": "Yes? When you're talking\nabout the idle time, like [INAUDIBLE] range\nsolution that we just see,",
    "start": "4136520",
    "end": "4144230"
  },
  {
    "text": "but we put [INAUDIBLE]. For-- OK.",
    "start": "4144230",
    "end": "4149869"
  },
  {
    "text": "So T effective and your\nquestion was for range-- Range. For range resolution,\nlet me think about that.",
    "start": "4149870",
    "end": "4158270"
  },
  {
    "text": "For range resolution, no. That wouldn't get affected\nbecause range resolution goes",
    "start": "4158270",
    "end": "4164540"
  },
  {
    "text": "with ADC. That's fast time, right? Fast time is ADC sampling\nrate, and that's unaffected.",
    "start": "4164540",
    "end": "4169939"
  },
  {
    "text": "You're just sampling on yours. Your slow time gets\naffected by the idle time because that adds\nto the separation",
    "start": "4169939",
    "end": "4176810"
  },
  {
    "text": "between consecutive chirps. OK. Very good. And then so that's so far\nthe discussion about-- we",
    "start": "4176810",
    "end": "4185781"
  },
  {
    "text": "finished the discussion about\nrange and velocity estimation for FMCW. And we haven't talked about\ndirection of arrival yet.",
    "start": "4185782",
    "end": "4192180"
  },
  {
    "text": "We'll get to that. But before that, I want to very\nbriefly talk about PMCW radar. You're not going to\ngo as much in depth,",
    "start": "4192180",
    "end": "4198590"
  },
  {
    "text": "although the full\ndetail is in the slides if you're interested,\nI can read about it.",
    "start": "4198590",
    "end": "4204120"
  },
  {
    "text": "But here's a high level block\ndiagram of a PMCW radar. Again, remember that the main\ndifference is the waveform,",
    "start": "4204120",
    "end": "4210210"
  },
  {
    "text": "right? So these radars send\nranging codes for waveforms. So it can be like a maximum\nlength sequence or an M",
    "start": "4210210",
    "end": "4217490"
  },
  {
    "text": "sequence exactly like GPS,\nor other types of codes with good autocorrelation\nbasically properties.",
    "start": "4217490",
    "end": "4224600"
  },
  {
    "text": "And then you modulate that\nwith some carrier frequency. You pass it through an\namplifier, and transmit that.",
    "start": "4224600",
    "end": "4231980"
  },
  {
    "text": "And then on the receive\nside, again, it's the same physics, right? So you get a\nattenuated, delayed,",
    "start": "4231980",
    "end": "4238100"
  },
  {
    "text": "and Doppler shifted\nversion of what you sent. Your down conversion\nhere is simpler.",
    "start": "4238100",
    "end": "4243330"
  },
  {
    "text": "You just down convert by the\ncarrier frequency instead of the as opposed to down\nconverting by the full waveform",
    "start": "4243330",
    "end": "4250159"
  },
  {
    "text": "that you transmitted,\nlike we did in FMCW. So down converters\nis just simple. It's exactly the same as, again,\nGPS receiver, filter it, pass",
    "start": "4250160",
    "end": "4258670"
  },
  {
    "text": "it to the ADC, and you do your\nrange and velocity estimation. So at a very high level,\nthe way the ranging works,",
    "start": "4258670",
    "end": "4267940"
  },
  {
    "text": "I think this picture is\na good one to look at. So you transmit a ranging code.",
    "start": "4267940",
    "end": "4273115"
  },
  {
    "text": "M sequences are very\ncommon for PMCW radars. And then you receive-- so green\nis what you transmit, call",
    "start": "4273115",
    "end": "4280690"
  },
  {
    "text": "that S of T and\nthen the IF signal that you receive after\nthat down conversion,",
    "start": "4280690",
    "end": "4286810"
  },
  {
    "text": "if there is no\nDoppler shift, it's just going to be a delayed\nand attenuated version",
    "start": "4286810",
    "end": "4292090"
  },
  {
    "text": "of your transmitter. And then as we know from GPS,\nif you correlate the two,",
    "start": "4292090",
    "end": "4298240"
  },
  {
    "text": "that correlation\nis going to have a peak at an index that is\nproportional to the round trip",
    "start": "4298240",
    "end": "4304450"
  },
  {
    "text": "time of flight delay. And you can then convert\nthe tau to range, right?",
    "start": "4304450",
    "end": "4310660"
  },
  {
    "text": "So R is basically tau over 2C.",
    "start": "4310660",
    "end": "4317200"
  },
  {
    "text": "OK. Sorry. Tau C over 2. Did I get this right?",
    "start": "4317200",
    "end": "4322450"
  },
  {
    "text": "Think so. Yeah. So that's super high level\nhow the PMCW radar works.",
    "start": "4322450",
    "end": "4329870"
  },
  {
    "text": "Now as I said, today, it's not\nas widely deployed as FMCW.",
    "start": "4329870",
    "end": "4337250"
  },
  {
    "text": "Actually, you cannot go and\nbuy an off the shelf fully integrated PMCW transceiver,\nwhich is kind of sad",
    "start": "4337250",
    "end": "4343520"
  },
  {
    "text": "because it's in my mind, from\nan architecture and DSP point of view, it's a\nmore interesting, more capable technology.",
    "start": "4343520",
    "end": "4349610"
  },
  {
    "text": "I hope we'll see more of it. The main reason, if\nyou're interested, know why PMCW is not as deployed\nas FMCW, is basically this ADC",
    "start": "4349610",
    "end": "4361190"
  },
  {
    "text": "that you need for PMCW. To get comparable\nperformance to FMCW,",
    "start": "4361190",
    "end": "4366530"
  },
  {
    "text": "you need much, much\nhigher sampling rates. And by much, much\nhigher, I mean something like a factor of 1,000\nto 10,000 times faster.",
    "start": "4366530",
    "end": "4373820"
  },
  {
    "text": "You need like giga samples\nper second or multi giga samples per second. ADCs for PMCW as opposed\nto megahertz or tens",
    "start": "4373820",
    "end": "4382489"
  },
  {
    "text": "of kilohertz per second ADCs,\nor kilo samples per second ADCs for FMCW.",
    "start": "4382490",
    "end": "4387590"
  },
  {
    "text": "And that makes today the\nPMCW more expensive device",
    "start": "4387590",
    "end": "4394340"
  },
  {
    "text": "to manufacture\nbecause it becomes more power hungry and more\nexpensive to build in silicon.",
    "start": "4394340",
    "end": "4399800"
  },
  {
    "text": "But that's changing. I mean year over year, we know\nhow silicon technology works. These things get faster,\ncheaper, better over time.",
    "start": "4399800",
    "end": "4406710"
  },
  {
    "text": "So I think soon,\nwe're going to see more and more ready to\ngo, turnkey, off the shelf",
    "start": "4406710",
    "end": "4412580"
  },
  {
    "text": "PMCW transceivers. There's none today. So if you were to build\none of these, you have to--",
    "start": "4412580",
    "end": "4418340"
  },
  {
    "text": "either you have a\nlot of money, and you know, design a full async and\ndo a tape out, which is fine.",
    "start": "4418340",
    "end": "4423510"
  },
  {
    "text": "If not, you need to build it\nin the so-called discrete way. So you go and you buy a discrete\nwaveform generator, a discrete",
    "start": "4423510",
    "end": "4432304"
  },
  {
    "text": "up converter, a discrete\npower amplifier, and connect these either on a\nPCB or with transmission lines.",
    "start": "4432305",
    "end": "4440540"
  },
  {
    "text": "And you can build it, at\nleast with a few antennas. It's very doable. But it becomes very\nquickly unmanageable",
    "start": "4440540",
    "end": "4446780"
  },
  {
    "text": "if you need big MIMO\nsystems that are PMCW. So that's the limitation. And that's why we're not\ngoing to go in as much depth,",
    "start": "4446780",
    "end": "4454699"
  },
  {
    "text": "although again, full\neverything is in the slides. But I don't want to spend\ntoo much time on it on class.",
    "start": "4454700",
    "end": "4460970"
  },
  {
    "text": "So that's high level how ranging\nworks when there is no Doppler. What about when\nthere is Doppler?",
    "start": "4460970",
    "end": "4466370"
  },
  {
    "text": "Interestingly, the\nDoppler part of PMCW becomes identical to FMCW. So what you do when it comes\nto both range and Doppler",
    "start": "4466370",
    "end": "4474560"
  },
  {
    "text": "estimation? You assume that Doppler does\nnot affect your ranging exactly",
    "start": "4474560",
    "end": "4480350"
  },
  {
    "text": "as we did for FMCW. So basically, that phase\nterm varies a slowly enough,",
    "start": "4480350",
    "end": "4486650"
  },
  {
    "text": "that does not affect the\noutput of your correlator. So you just do your\ncorrelation as is,",
    "start": "4486650",
    "end": "4491930"
  },
  {
    "text": "but then you accumulate\na bunch of code words. And post correlation, you\ndo FFTs on the columns",
    "start": "4491930",
    "end": "4497210"
  },
  {
    "text": "as we did for FMCW, and that\nFFT, basically, gives you the full range Doppler map or\nrange of velocity map for PMCW.",
    "start": "4497210",
    "end": "4507710"
  },
  {
    "text": "Any questions?  OK.",
    "start": "4507710",
    "end": "4512800"
  },
  {
    "text": "So that basically concludes\npart one of radar.",
    "start": "4512800",
    "end": "4519309"
  },
  {
    "text": "And we're going\nto start part two. So in part two, we're\ngoing to mainly talk about two things, radar\ntarget detection and direction",
    "start": "4519310",
    "end": "4526960"
  },
  {
    "text": "of arrival estimation. And direction of arrival-- and\nboth of these, they don't care,",
    "start": "4526960",
    "end": "4532270"
  },
  {
    "text": "is it PMCW? Is it FMCW? They operate on\nrange velocity maps,",
    "start": "4532270",
    "end": "4537610"
  },
  {
    "text": "which is after processing\nrange and Doppler whether it be PMCW or FMCW.",
    "start": "4537610",
    "end": "4542980"
  },
  {
    "text": "So that part does\nnot matter at all. That's why we don't even make\nthat distinction as we talk.",
    "start": "4542980",
    "end": "4549400"
  },
  {
    "text": "So starting with\ntarget detection, what is target detection? Target detection is if you\nremember a few minutes ago,",
    "start": "4549400",
    "end": "4556360"
  },
  {
    "text": "when we looked at these\nrange velocity maps, in there, it's kind of\nlike you can visualize it,",
    "start": "4556360",
    "end": "4563360"
  },
  {
    "text": "either as a heat map\nor a 3D surface plot. Targets show as a strong\npeaks in there, OK?",
    "start": "4563360",
    "end": "4568960"
  },
  {
    "text": "And everything else is noise. So the target\ndetection basically goes and just tells\nyou where the targets.",
    "start": "4568960",
    "end": "4575990"
  },
  {
    "text": "And so you only\nfocus on those when it comes to the direction\nof arrival estimation.",
    "start": "4575990",
    "end": "4581910"
  },
  {
    "text": "OK? So distinguishes real\ntargets from noise or clutter by looking at the\nrange velocity map.",
    "start": "4581910",
    "end": "4588190"
  },
  {
    "text": "So you can kind of\nthink, it's going to be in the simplest form, it's\ngoing to be some thresholding basically that you do.",
    "start": "4588190",
    "end": "4595600"
  },
  {
    "text": "Many different\nways of doing it , a simplest one is just you\napply a fixed global threshold to your range velocity map.",
    "start": "4595600",
    "end": "4602880"
  },
  {
    "text": "And everything that's\nabove the threshold, you declare a target. Everything that's below the\nthreshold, you declare noise.",
    "start": "4602880",
    "end": "4608679"
  },
  {
    "text": "Or you can do a more\nfancy type thresholding. A very common one is called the\nCFAR thresholding or constant",
    "start": "4608680",
    "end": "4615430"
  },
  {
    "text": "false alarm rate thresholding. And overall goal is to have\na high true positive rate",
    "start": "4615430",
    "end": "4622720"
  },
  {
    "text": "and keep your false\npositive as low as possible. So with the fixed\nthresholding, basically,",
    "start": "4622720",
    "end": "4631750"
  },
  {
    "text": "what you do is that, again,\nif I draw a mini range",
    "start": "4631750",
    "end": "4637090"
  },
  {
    "text": "Doppler map here, so the\ncells, and let's say, you have range on one axis,\nDoppler on the other axis.",
    "start": "4637090",
    "end": "4646120"
  },
  {
    "text": "You can decide some\nfixed threshold P fixed, and then compare the\nmagnitude value of every cell.",
    "start": "4646120",
    "end": "4654699"
  },
  {
    "text": "Basically, the absolute\nvalue of it to that P fixed. And if that value is\nbigger than P fixed,",
    "start": "4654700",
    "end": "4660490"
  },
  {
    "text": "you basically declare detection. You say target in that cell.",
    "start": "4660490",
    "end": "4666179"
  },
  {
    "text": "And if it's below the\nthreshold, you say nothing here. That's just noise. And you do that for the\nfull range Doppler map.",
    "start": "4666180",
    "end": "4672400"
  },
  {
    "text": "And that's how you do\nyour basically detections. Now it's tricky to decide\nwhat a good choice for P fixed",
    "start": "4672400",
    "end": "4679770"
  },
  {
    "text": "should be, right? Because it depends on as\n[INAUDIBLE] brought up depends on the SNR or the\nnoise characteristics, which",
    "start": "4679770",
    "end": "4687780"
  },
  {
    "text": "in many applications,\nare either unknown or they change over time, OK?",
    "start": "4687780",
    "end": "4693159"
  },
  {
    "text": "But in the case as if you have\na system where you say you know, oh, my noise is some Gaussian\ndistributed with a mean mu",
    "start": "4693160",
    "end": "4702330"
  },
  {
    "text": "and variance sigma, then\nsure, you can choose a P fixed that is mu\nsay plus 3 sigma.",
    "start": "4702330",
    "end": "4709890"
  },
  {
    "text": "And then that, by the\nGaussian of statistics just gives you a very low\nfalse positive rate of 0.13%.",
    "start": "4709890",
    "end": "4716940"
  },
  {
    "text": "And that's OK. But in practice,\nit's not that clean. Again, either your noise\nstatistics can be complicated.",
    "start": "4716940",
    "end": "4725770"
  },
  {
    "text": "It can be unknown. They're going to change\nover time with temperature, and things like that. Or sometimes, there is\nexternal interferences",
    "start": "4725770",
    "end": "4732810"
  },
  {
    "text": "that are time varying,\nand they raise or lower your noise floor. So that's why fixed thresholding\nis typically not a good idea,",
    "start": "4732810",
    "end": "4740290"
  },
  {
    "text": "except for very well\ncontrolled simple applications. And oftentimes, you want to\ndo some adaptive thresholding,",
    "start": "4740290",
    "end": "4746250"
  },
  {
    "text": "such as CFAR. So very quickly, we'll\nlook at the math next time.",
    "start": "4746250",
    "end": "4751590"
  },
  {
    "text": "But what CFAR calculates is\nthat, again, for your range velocity map, what it does, the\ncore idea before we do any math",
    "start": "4751590",
    "end": "4761850"
  },
  {
    "text": "is that if you have a\ntarget at some cell, these are usually\nrange velocity maps",
    "start": "4761850",
    "end": "4768179"
  },
  {
    "text": "as we show in the\nprevious slides. These are pretty sparse. Like, you have a target, and\nthen there's nothing around it,",
    "start": "4768180",
    "end": "4773820"
  },
  {
    "text": "and then there's another target. It's not a dense, dense map. So the idea is that if you\nhave a target in one cell,",
    "start": "4773820",
    "end": "4780840"
  },
  {
    "text": "the cells around it\nare mostly noise. So if you average the value of\nthe cells around the target,",
    "start": "4780840",
    "end": "4788010"
  },
  {
    "text": "that gives you a good\nidea of the local noise floor where that target is. So you can just compare\nthe value of each cell",
    "start": "4788010",
    "end": "4795330"
  },
  {
    "text": "to the average of\nthe cells around it. And if it's much\nbigger, then you say that's a target because\naround it it's just noise.",
    "start": "4795330",
    "end": "4804940"
  },
  {
    "text": "So that's basically the idea. So CFAR, basically,\ngives you a per cell",
    "start": "4804940",
    "end": "4810060"
  },
  {
    "text": "instead of one global\nthreshold for the entire range Doppler map. It calculates a\nper cell threshold,",
    "start": "4810060",
    "end": "4817000"
  },
  {
    "text": "which is adaptively adjusted. And then for each cell, if the\nmagnitude of the range Doppler",
    "start": "4817000",
    "end": "4824880"
  },
  {
    "text": "value is bigger than the\nCFAR threshold at that cell, so note that now\nour threshold is",
    "start": "4824880",
    "end": "4831120"
  },
  {
    "text": "a function of the cell indices. I just notice an\ninconsistency in my notation.",
    "start": "4831120",
    "end": "4837030"
  },
  {
    "text": "I think the N should be K\nbecause we use the K for--",
    "start": "4837030",
    "end": "4842820"
  },
  {
    "text": "after the FFT index. So sorry about that. I'll correct that. But this is SIF of L\nand K. And so each cell",
    "start": "4842820",
    "end": "4851850"
  },
  {
    "text": "is compared to a threshold\nthat is calculated. For that cell, if it's\nlarger, you declare target.",
    "start": "4851850",
    "end": "4857130"
  },
  {
    "text": "If not, you say\nthat's just noise. And next time, we'll look\nat how actually CFAR--",
    "start": "4857130",
    "end": "4863010"
  },
  {
    "text": "CFAR works. Questions? All right. That's great.",
    "start": "4863010",
    "end": "4868199"
  },
  {
    "text": "And I'll see you next time. ",
    "start": "4868200",
    "end": "4874000"
  }
]