[
  {
    "start": "0",
    "end": "5180"
  },
  {
    "text": "So last time, we basically\nstarted the in-depth study of sonar or ultrasonic sensors.",
    "start": "5180",
    "end": "12650"
  },
  {
    "text": "And as usual, we started\nwith the physics of it. So physics of acoustic waves\nis what we started studying.",
    "start": "12650",
    "end": "20869"
  },
  {
    "text": "So at a very high level, we said\nthat the principle of operation",
    "start": "20870",
    "end": "26780"
  },
  {
    "text": "of all active sensors\nthat we'll be studying, and specifically sonar,\nit's very simple principle.",
    "start": "26780",
    "end": "34820"
  },
  {
    "text": "So basically, you have a\ntransmitter or an emitter that sends out a signal.",
    "start": "34820",
    "end": "41600"
  },
  {
    "text": "A signal goes into\nthe environment, it hits the targets at different\nparts of the environment",
    "start": "41600",
    "end": "46970"
  },
  {
    "text": "and some echoes reflect back. And then the receiver\npart of the sensor",
    "start": "46970",
    "end": "53810"
  },
  {
    "text": "collects those\nechoes, and then it needs to process them\nsomehow and determine the range to each target as\nwell as the bearing angle",
    "start": "53810",
    "end": "61820"
  },
  {
    "text": "or direction of\narrival to each target. And then as you do this process\nrepeated for multiple targets,",
    "start": "61820",
    "end": "69200"
  },
  {
    "text": "you can then, basically,\nreconstruct a 2D or 3D map of the scene by, basically,\nplacing these points according",
    "start": "69200",
    "end": "75950"
  },
  {
    "text": "to their range and their\ndirection of arrival into a common\nframe of reference.",
    "start": "75950",
    "end": "82049"
  },
  {
    "text": "Now, we started going in-depth\ninto the physics of it for sonar.",
    "start": "82050",
    "end": "87620"
  },
  {
    "text": "So for sonar,\nbasically, the signals are acoustic waves at\nultrasound frequencies.",
    "start": "87620",
    "end": "95869"
  },
  {
    "text": "And we first focused on the\nemitter or the transducer",
    "start": "95870",
    "end": "102500"
  },
  {
    "text": "that sends the signals. So these are, essentially,\nlike audio speakers,",
    "start": "102500",
    "end": "108830"
  },
  {
    "text": "but they work at high frequency. So the signals are\nnot audible to us. But they're sound\nwaves, essentially.",
    "start": "108830",
    "end": "115250"
  },
  {
    "text": "And we showed that the beam\npattern of the wave that",
    "start": "115250",
    "end": "122120"
  },
  {
    "text": "is generated by ultrasonic\nemitter, in general, it",
    "start": "122120",
    "end": "128990"
  },
  {
    "text": "can be very well approximated. The angular dependency of\nit, by the Fourier transform",
    "start": "128990",
    "end": "135320"
  },
  {
    "text": "of the shape of the\nemitter aperture. So in most cases, the\naperture, as we'll see today,",
    "start": "135320",
    "end": "142489"
  },
  {
    "text": "the apertures that are\nused are, basically, just plain circular disks.",
    "start": "142490",
    "end": "148190"
  },
  {
    "text": "And in that case, you just\ntake the 2D Fourier transform of a 2D, basically,\ndisk or a circle",
    "start": "148190",
    "end": "155630"
  },
  {
    "text": "and it turns out to be,\nbasically, this Bessel function that we showed.",
    "start": "155630",
    "end": "160640"
  },
  {
    "text": "Graphically, it shows-- is like\nthis blue part of the picture",
    "start": "160640",
    "end": "168900"
  },
  {
    "text": "here. Basically, your beam pattern. It has a main lobe where most\nof the energy is focused.",
    "start": "168900",
    "end": "174560"
  },
  {
    "text": "And then you get a number of the\nsmaller side lobes around it. And the main lobe, basically,\nit has some beam angle",
    "start": "174560",
    "end": "185090"
  },
  {
    "text": "that is two times theta 0. So it goes from minus\ntheta 0 to theta 0. And theta 0 is given\nby this expression",
    "start": "185090",
    "end": "192920"
  },
  {
    "text": "here, which is the sine inverse\nof some constant, 0.61, times velocity or speed of sound\nin that medium divided",
    "start": "192920",
    "end": "201230"
  },
  {
    "text": "by 8 times f, where\nf is the frequency of the ultrasonic wave\nthat you're generating.",
    "start": "201230",
    "end": "206450"
  },
  {
    "text": "Basically, it's the frequency at\nwhich the emitter is vibrating. And a is the radius\nof that disk.",
    "start": "206450",
    "end": "213019"
  },
  {
    "text": "That is your transmitter\nor the emitter. So it is desirable\nin most cases.",
    "start": "213020",
    "end": "220280"
  },
  {
    "text": "It's a little\napplication-dependent as we'll see. But in most cases, if you want\na good angular resolution,",
    "start": "220280",
    "end": "227120"
  },
  {
    "text": "you want to, basically,\nfocus your beam as tightly as possible. So you want their\ntheta 0 to be small,",
    "start": "227120",
    "end": "234960"
  },
  {
    "text": "which means, according\nto this expression, the denominator here\nshould be large, which means either you\ngo to higher frequencies",
    "start": "234960",
    "end": "242000"
  },
  {
    "text": "or you use larger apertures\nto, basically, focus your beam better.",
    "start": "242000",
    "end": "248480"
  },
  {
    "text": "Then, of course, we are\ninterested in the echo, not just what we transmit,\nbecause we need to process",
    "start": "248480",
    "end": "254840"
  },
  {
    "text": "the echo to do sensing with it. And so we continued\nalong those lines.",
    "start": "254840",
    "end": "260690"
  },
  {
    "text": "We said, OK. You send a ultrasonic\nwave, and according",
    "start": "260690",
    "end": "266960"
  },
  {
    "text": "to this radiation\npattern or beam pattern, it hits the target. If you assume your\ntarget is small,",
    "start": "266960",
    "end": "272479"
  },
  {
    "text": "this is just an\nassumption for us to be able to simplify\nthe math, the return echo,",
    "start": "272480",
    "end": "279740"
  },
  {
    "text": "when the target is\npretty small, you can very well approximate\nit with spherical waves.",
    "start": "279740",
    "end": "286069"
  },
  {
    "text": "So you hit it with kind\nof like a focus beam, but what echoes back to\nyou, you can estimate it",
    "start": "286070",
    "end": "292220"
  },
  {
    "text": "as spherical waves. And spherical\nwaves, as we showed, basically, their amplitude\ndrops by 1 over distance.",
    "start": "292220",
    "end": "301190"
  },
  {
    "text": "So on the return\npath, the echo that's coming back towards the\nsensor, there is going to be--",
    "start": "301190",
    "end": "307810"
  },
  {
    "text": "if that range is rho,\non the return path there is going to be 1/rho\nattenuation, basically,",
    "start": "307810",
    "end": "318490"
  },
  {
    "text": "just according to the physics\nof the spherical waves. And then we said that\nmost of these components,",
    "start": "318490",
    "end": "326949"
  },
  {
    "text": "they can operate both as a\ntransmitter and a receiver. So if you have one\nof those transducers,",
    "start": "326950",
    "end": "333850"
  },
  {
    "text": "then for collecting back the\necho, the sensitivity of that",
    "start": "333850",
    "end": "338920"
  },
  {
    "text": "is going to have the\nexact same pattern. Angular pattern as the transmit,\nbecause it's the same physics,",
    "start": "338920",
    "end": "345010"
  },
  {
    "text": "basically. So then you get the same,\nbasically, Bessel function as your sensitivity.",
    "start": "345010",
    "end": "352090"
  },
  {
    "text": "Maybe I should go to the slide\nhere because we can also look at the expressions together. ",
    "start": "352090",
    "end": "360568"
  },
  {
    "text": "OK. So then, basically,\nthe sensitivity of your receiver as\nof theta is going",
    "start": "360568",
    "end": "369110"
  },
  {
    "text": "to be the exact same\npattern as its beam pattern",
    "start": "369110",
    "end": "374240"
  },
  {
    "text": "that is radiating or emitting\nthe same Bessel function dependence.",
    "start": "374240",
    "end": "379640"
  },
  {
    "text": "But also there is a gain factor. And the gain factor,\nbasically, is a measure of how much of the\nreturn echo's energy",
    "start": "379640",
    "end": "388430"
  },
  {
    "text": "your receiver is collecting. And that is proportional\nto its area. The larger it is, more\nof the acoustic energy",
    "start": "388430",
    "end": "394400"
  },
  {
    "text": "is captured by it, right? It's directly\nproportional to the area. So that gain factor of the\nreceiver is some constant.",
    "start": "394400",
    "end": "401810"
  },
  {
    "text": "I'm calling it theta\ntimes a squared. So a squared is like a measure.",
    "start": "401810",
    "end": "406865"
  },
  {
    "text": "If it's a circle,\nbasically, of radius a,",
    "start": "406865",
    "end": "412190"
  },
  {
    "text": "then pi a squared is the area. So I'm just lumping in\nthe pi into that constant. So some constant times\na squared is a measure",
    "start": "412190",
    "end": "418789"
  },
  {
    "text": "of the gain of your receiver. So then what is the received\necho at the end of the day?",
    "start": "418790",
    "end": "424110"
  },
  {
    "text": "So the echo is a multiplication\nof a bunch of factors.",
    "start": "424110",
    "end": "429460"
  },
  {
    "text": "It, of course, depends on\nthe range and angle, right? Those are the two factors.",
    "start": "429460",
    "end": "435820"
  },
  {
    "text": "So this term here,\np of rho and theta is your transmitted\nbeam pattern.",
    "start": "435820",
    "end": "442800"
  },
  {
    "text": "Then it hits a\ntarget, and the target would also have some\nacoustic reflectivity, right?",
    "start": "442800",
    "end": "447930"
  },
  {
    "text": "It does not echo back 100%\nof the energy that hits it.",
    "start": "447930",
    "end": "453539"
  },
  {
    "text": "Some materials absorb some of\nthe vibrations, for instance. So there's this delta factor.",
    "start": "453540",
    "end": "459480"
  },
  {
    "text": "That's a number\nbetween 0 and 1, which is the acoustic\nreflectivity of the target",
    "start": "459480",
    "end": "465840"
  },
  {
    "text": "that we're hitting\nwith the acoustic wave. Then you get the 1/rho, which\nis the attenuation according",
    "start": "465840",
    "end": "473340"
  },
  {
    "text": "to the spherical wave\npropagating back to the sensor. Then you multiply\nby s of theta, which",
    "start": "473340",
    "end": "480720"
  },
  {
    "text": "is the sensitivity, the\ndirectional sensitivity of your receiver. And finally, you multiply\nby the gain factor, g.",
    "start": "480720",
    "end": "487980"
  },
  {
    "text": "And that is the full\nequation that gives you what is the\ndependency of the echo",
    "start": "487980",
    "end": "494070"
  },
  {
    "text": "that you collect back, what's\nthe dependency on range and direction of arrival?",
    "start": "494070",
    "end": "500490"
  },
  {
    "text": "So how does it depend on rho? How does it depend on theta? And as you see here,\nthe dependency on rho",
    "start": "500490",
    "end": "506430"
  },
  {
    "text": "turns out to be 1/rho squared. OK? So by square of the\ndistance to the target,",
    "start": "506430",
    "end": "513390"
  },
  {
    "text": "we, basically, lose signal. And the dependency on\nthe angle of arrival",
    "start": "513390",
    "end": "520770"
  },
  {
    "text": "or the bearing of the target is\nthe square of this, basically,",
    "start": "520770",
    "end": "525870"
  },
  {
    "text": "Bessel function. Now, this is an extremely\nuseful equation,",
    "start": "525870",
    "end": "532110"
  },
  {
    "text": "because first, it's\neasy to evaluate, right? You can plug in numbers into it. Everything should be known.",
    "start": "532110",
    "end": "537900"
  },
  {
    "text": "If you're analyzing a\ncase, you say, oh, I'm designing a sensor. I want to see if I can\ndetect a target that",
    "start": "537900",
    "end": "544290"
  },
  {
    "text": "is at 20 meters at\na 30 degree varying angle with a reflectivity or\nacoustic reflectivity of 50%.",
    "start": "544290",
    "end": "553470"
  },
  {
    "text": "And then I have\nan emitter, which has an aperture\nradius of an inch,",
    "start": "553470",
    "end": "559050"
  },
  {
    "text": "let's say, and my\nfrequency is 40 kilohertz. OK. You plug in everything\nand then that directly",
    "start": "559050",
    "end": "564630"
  },
  {
    "text": "gives you what is\nthe echo amplitude that you collect back.",
    "start": "564630",
    "end": "569670"
  },
  {
    "text": "And then that kind of-- it's a very easy way\nof determining, OK,",
    "start": "569670",
    "end": "574995"
  },
  {
    "text": "am I going to get enough\nsignal to be able to detect it successfully, or is it\ncompared, for instance,",
    "start": "574995",
    "end": "581050"
  },
  {
    "text": "to the noise level of the\nelectronics I'm working with? Is it going to be\nbelow noise floor?",
    "start": "581050",
    "end": "586140"
  },
  {
    "text": "Is it going to be\nabove noise floor? So this gives you\na first-order-- very easy first-order check of.",
    "start": "586140",
    "end": "593850"
  },
  {
    "text": "What you can detect\nand what you're going to miss as a function\nof range and bearing angle",
    "start": "593850",
    "end": "599550"
  },
  {
    "text": "and the reflectivity\nof the targets. So it's very, very\nuseful, but also, it's extremely important to--",
    "start": "599550",
    "end": "607710"
  },
  {
    "text": "as you do these\ntypes of analysis, remember all the assumptions\nthat went into this.",
    "start": "607710",
    "end": "613410"
  },
  {
    "text": "So this equation, there is a\nwhole bunch of assumptions. As we were doing the derivation,\nwe made a bunch of assumptions,",
    "start": "613410",
    "end": "620010"
  },
  {
    "text": "and if one or some of those\nare not valid for the case that you are analyzing,\nthen your results",
    "start": "620010",
    "end": "627930"
  },
  {
    "text": "might not match what\nyou get in reality. So very specifically,\nfor instance, what were the assumptions\nthat went into this formula?",
    "start": "627930",
    "end": "635189"
  },
  {
    "text": "We assumed a circular emitter. If your emitter is\nnot circular, well, you're going to get a\ndifferent beam pattern.",
    "start": "635190",
    "end": "642509"
  },
  {
    "text": "What else did we assume? We assumed a perfectly\nharmonic sinusoidal waveform.",
    "start": "642510",
    "end": "647970"
  },
  {
    "text": "If you waveform is\nsome broadband waveform with other frequency\ncomponents in it, then your radiation\npattern is going to change.",
    "start": "647970",
    "end": "657420"
  },
  {
    "text": "We're operating\nin the far field. So if you're doing\nnear-field sensing, well, some of these\nassumptions break down.",
    "start": "657420",
    "end": "663930"
  },
  {
    "text": "So it's really,\nreally important. And that's why, instead of\nlike in one shot showing you",
    "start": "663930",
    "end": "669300"
  },
  {
    "text": "this expression\nand saying, that's the echo amplitude of\na ultrasonic sensor. I really walk you\nthrough all the steps",
    "start": "669300",
    "end": "675780"
  },
  {
    "text": "from the very basic physics too. Here, so you see what\nassumptions were made.",
    "start": "675780",
    "end": "680970"
  },
  {
    "text": "And for your specific studies,\nif one of those assumptions is not valid, that's fine.",
    "start": "680970",
    "end": "686459"
  },
  {
    "text": "You can go back\nand go to the point where we made that\nassumption, remove it, and continue the derivation\nwithout making that assumption.",
    "start": "686460",
    "end": "693730"
  },
  {
    "text": "So very specifically,\nfor instance, if your aperture shape is\nnot a circle, that's fine.",
    "start": "693730",
    "end": "699329"
  },
  {
    "text": "You go take the\nFourier transform of whatever the shape\nof your aperture is and use that formula\ninstead of the Bessel",
    "start": "699330",
    "end": "705900"
  },
  {
    "text": "function that we have here. So that's really,\nreally important. And it's really when--",
    "start": "705900",
    "end": "712080"
  },
  {
    "text": "this formula here in 90%, 95%,\nmaybe 99% of typical cases,",
    "start": "712080",
    "end": "718740"
  },
  {
    "text": "it just works fine. And most people just use it,\nand they don't even bother",
    "start": "718740",
    "end": "723930"
  },
  {
    "text": "or know about the\nassumptions that go into it. But it's really that 1% of\nthe cases where things don't",
    "start": "723930",
    "end": "731630"
  },
  {
    "text": "work, and then somebody needs to\nfigure out why it didn't work. That that requires\nthe in-depth knowledge",
    "start": "731630",
    "end": "738800"
  },
  {
    "text": "of all the physics and the\nassumptions that went into it. And that's exactly-- that 1%\nis what differentiates really,",
    "start": "738800",
    "end": "745260"
  },
  {
    "text": "really top engineers\nwith others. And that's why we bother\nwith the physics here.",
    "start": "745260",
    "end": "750510"
  },
  {
    "text": "OK. Any questions? All right. Let's continue. So now, we know the physics.",
    "start": "750510",
    "end": "757830"
  },
  {
    "text": "So let's talk a little bit\nabout these transducers.",
    "start": "757830",
    "end": "763890"
  },
  {
    "text": "The emitters and the\nreceivers that are used. There's different\ntechnologies that",
    "start": "763890",
    "end": "769680"
  },
  {
    "text": "are used to build\nthese transducers. Specifically, there's\nthree main types",
    "start": "769680",
    "end": "775440"
  },
  {
    "text": "that are used for sensing. One is called electrostatic. So these ones are\npretty high bandwidth,",
    "start": "775440",
    "end": "782370"
  },
  {
    "text": "and they have good sensitivity. They require very high\nvoltage just to derive. So you might need like 100 volts\nor multiple hundreds of volts",
    "start": "782370",
    "end": "791010"
  },
  {
    "text": "to derive them at\nacoustic frequencies. And they cannot go to\nsuper high frequencies.",
    "start": "791010",
    "end": "799380"
  },
  {
    "text": "So you're typically limited\nby about 150 to 200 kilohertz in terms of\noperational frequency,",
    "start": "799380",
    "end": "805060"
  },
  {
    "text": "which is fine for\nrobotic sensing. But, for instance, they're not\nuseful for medical ultrasound.",
    "start": "805060",
    "end": "811590"
  },
  {
    "text": "Because they don't go\nhigh enough in frequency. Then you have your\npiezoelectric transducers.",
    "start": "811590",
    "end": "818230"
  },
  {
    "text": "So these operate based on\nthe piezoelectric effect. And they have low bandwidth,\nbecause piezoelectric ceramics",
    "start": "818230",
    "end": "826019"
  },
  {
    "text": "are typically resonant. So they only resonate at a\nvery sharp frequency band.",
    "start": "826020",
    "end": "831519"
  },
  {
    "text": "So that you can't do\nbroadband sensing with these. But they don't\nrequire as high a bias",
    "start": "831520",
    "end": "838020"
  },
  {
    "text": "voltage as the electrostatic. And they can go very\nhigh in operational frequency up to a few megahertz.",
    "start": "838020",
    "end": "844440"
  },
  {
    "text": "And finally, you have\nyour MEMS transducers. These have very high bandwidth,\nvery good sensitivity.",
    "start": "844440",
    "end": "853090"
  },
  {
    "text": "And they can operate at\nextremely high frequencies. You can go up to tens\nof megahertz with them.",
    "start": "853090",
    "end": "858820"
  },
  {
    "text": "Super compact, and they have\nall the benefits of the MEMS processing, like you can\npackage your electronics",
    "start": "858820",
    "end": "866800"
  },
  {
    "text": "with the transducer in one\nchip and so on and so forth. The drawback is, in MEMS, you\ncannot make very big apertures.",
    "start": "866800",
    "end": "874610"
  },
  {
    "text": "So you are-- because of\nthe process limitations, you're limited to small\napertures which as we know,",
    "start": "874610",
    "end": "880510"
  },
  {
    "text": "would then limit,\nbasically, your beam width. So with MEMS, you're going\nto get very small a, which",
    "start": "880510",
    "end": "886960"
  },
  {
    "text": "means very large theta 0. And then the trick people\nplay to, basically,",
    "start": "886960",
    "end": "893139"
  },
  {
    "text": "counter that is in MEMS, you\ncan-- instead of one emitting aperture, you can\ngenerate an array of them,",
    "start": "893140",
    "end": "900160"
  },
  {
    "text": "so a bunch of them very\nclosely packed together, and then effectively\ntogether, they can act as a larger\naperture for you.",
    "start": "900160",
    "end": "908600"
  },
  {
    "text": "Let's look at-- and all\nthree types, by the way, they can operate as both\ntransmitters and receivers.",
    "start": "908600",
    "end": "914889"
  },
  {
    "text": "So these are\nbi-direction-- can be, in principle, wide directional\ntransducers for you.",
    "start": "914890",
    "end": "920510"
  },
  {
    "text": "There is no limitation\non that side. So let's look at some\npictures so you get a better",
    "start": "920510",
    "end": "925570"
  },
  {
    "text": "idea of what these look like. So here's a\nelectrostatic transducer. Extremely simple construction.",
    "start": "925570",
    "end": "932080"
  },
  {
    "text": "So there's, basically, a ring. And then inside there,\nthe ring is just",
    "start": "932080",
    "end": "937360"
  },
  {
    "text": "for structural purposes. So you can mount, basically,\ndifferent pieces to it. But the key piece is, there's\na groove the metallic plate.",
    "start": "937360",
    "end": "945880"
  },
  {
    "text": "And then there is a very\nthin foil on top of it. And the way this\ndevice operates--",
    "start": "945880",
    "end": "952360"
  },
  {
    "text": "and here you get an idea of\nthe size compared to a quarter there. So these things are like\nan inch or 2 in diameter.",
    "start": "952360",
    "end": "959140"
  },
  {
    "text": "And then if you look at the\ncross-section of the groove and the thin foil on\ntop of it, so you get,",
    "start": "959140",
    "end": "965560"
  },
  {
    "text": "basically, these\npeaks and valleys on top of the groove plate.",
    "start": "965560",
    "end": "971259"
  },
  {
    "text": "And then the high\nvoltage is applied between that metallic foil\nand the metallic groove plate.",
    "start": "971260",
    "end": "978130"
  },
  {
    "text": "So you get your electrostatic\nforce between the two. And the force can, basically,\npull the metallic foil",
    "start": "978130",
    "end": "986290"
  },
  {
    "text": "into the groove. So when it goes into the\ngrooves, it makes this shape. And then as you\noscillate the voltage,",
    "start": "986290",
    "end": "993250"
  },
  {
    "text": "you, basically,\nvibrate the thin foil on top of the groove plate. And it generates these circular,\nbasically, waves on top of it,",
    "start": "993250",
    "end": "1001750"
  },
  {
    "text": "which then emit\nultrasonic waves. And just to protect the\nfoil, because it's very thin,",
    "start": "1001750",
    "end": "1007410"
  },
  {
    "text": "usually, you put like a\nhousing or a grill on top of it so you can touch\nit or puncture it.",
    "start": "1007410",
    "end": "1013590"
  },
  {
    "text": "So that's your\nelectrostatic transducer. And then here's one\nexample of a piezoelectric.",
    "start": "1013590",
    "end": "1020490"
  },
  {
    "text": "Also super simple construction. So basically, this is a device.",
    "start": "1020490",
    "end": "1025709"
  },
  {
    "text": "In terms of the\nsize, it's comparable to the electrostatic. It takes up a\nlittle more volume.",
    "start": "1025710",
    "end": "1031770"
  },
  {
    "text": "The electrostatic is more flat. But in terms of the\ndiameter, it's very similar. And then if you look\nat the cross-section",
    "start": "1031770",
    "end": "1038250"
  },
  {
    "text": "of this, basically, these\ntwo darker elements here, those are the piezoceramic.",
    "start": "1038250",
    "end": "1045390"
  },
  {
    "text": "And the way it's\nconstructed, basically, you sandwich your piezoceramics\nbetween two pieces of mass.",
    "start": "1045390",
    "end": "1053760"
  },
  {
    "text": "And you put them in tension\nwith some compression bolt. So there is some tension\napplied or compression",
    "start": "1053760",
    "end": "1060600"
  },
  {
    "text": "applied to the piezoceramics. And then as you apply a\nvoltage to the electrodes,",
    "start": "1060600",
    "end": "1067350"
  },
  {
    "text": "the voltage is applied\nto the piezoceramics, and then they start-- through the piezoceramic\neffect, they start vibrating at their\nresonance frequency.",
    "start": "1067350",
    "end": "1074610"
  },
  {
    "text": "And then that vibration\nis coupled to the mass. So the mass vibrates, and then\nyou can then bond the mass",
    "start": "1074610",
    "end": "1081480"
  },
  {
    "text": "to some output phase,\nwhich becomes, basically, your emitter aperture.",
    "start": "1081480",
    "end": "1087930"
  },
  {
    "text": "And here is an actual\ncross-section of a device. So you have your piezos\nhere and then that's",
    "start": "1087930",
    "end": "1095190"
  },
  {
    "text": "the compression bolt.\nYou have the two masses. And at the end of the\nday, this top plate is what your final aperture\nof the emitter or the receiver",
    "start": "1095190",
    "end": "1106740"
  },
  {
    "text": "is going to be. OK? So that's piezo. And finally, there is the MEMS. And here, again, you get\na sense of the scale.",
    "start": "1106740",
    "end": "1114690"
  },
  {
    "text": "You see how much smaller MEMS\nis compared to the other two.",
    "start": "1114690",
    "end": "1120039"
  },
  {
    "text": "It's really, really tiny. And the aperture hole on\nthis particular device is just half a millimeter.",
    "start": "1120040",
    "end": "1126150"
  },
  {
    "text": "And there is a lot,\nactually, packed into this tiny package\nthat's just a few millimeters by a few millimeters.",
    "start": "1126150",
    "end": "1131730"
  },
  {
    "text": "So if you open it up, so\nthe way it's constructed, it's actually like a\ndouble decker design.",
    "start": "1131730",
    "end": "1139000"
  },
  {
    "text": "So on the top, you have your\nMEMS device with the emitter.",
    "start": "1139000",
    "end": "1146910"
  },
  {
    "text": "And at the bottom, you\nhave all the electronics. So you have your waveform\ngenerator, your amplifiers,",
    "start": "1146910",
    "end": "1153750"
  },
  {
    "text": "your ADCs, your\nsignal processing. So this, basically, you\ncan co-package everything",
    "start": "1153750",
    "end": "1160830"
  },
  {
    "text": "into a small chip. And this thing is\nthe full sensor then. Not just a transducer.",
    "start": "1160830",
    "end": "1166500"
  },
  {
    "text": "You can have everything\nin a tiny package. And then if you zoom in and\nlook into your aperture hole",
    "start": "1166500",
    "end": "1173310"
  },
  {
    "text": "under a microscope, you see\nthis tiny MEMS membrane.",
    "start": "1173310",
    "end": "1179070"
  },
  {
    "text": "And then if you zoom\nin a little more into that, this\ntiny little circle, that is your emitter\naperture, which is",
    "start": "1179070",
    "end": "1187350"
  },
  {
    "text": "self millimeter in dimensions. And it's suspended with\nthese super thin bridges.",
    "start": "1187350",
    "end": "1194100"
  },
  {
    "text": "And then the\nprinciple of operation is exactly like your\nelectrostatic transducer.",
    "start": "1194100",
    "end": "1200279"
  },
  {
    "text": "So basically, this is\nyour thin membrane. And then a voltage is\napplied at alternating",
    "start": "1200280",
    "end": "1206549"
  },
  {
    "text": "voltage between the membrane\nand a fixed metallic surface. So again, you get your\nelectrostatic alternating",
    "start": "1206550",
    "end": "1212880"
  },
  {
    "text": "force, which causes vibrations\nof the membrane up and down. And then that's how you\ngenerate your acoustic wave.",
    "start": "1212880",
    "end": "1221110"
  },
  {
    "text": "But again, the point here\nis you have to notice how small that aperture is.",
    "start": "1221110",
    "end": "1227715"
  },
  {
    "text": "You can make an array\nof them as I said, but if you just use one\nlike in this device, you get a tiny,\ntiny aperture, which",
    "start": "1227715",
    "end": "1233909"
  },
  {
    "text": "means this device will generate\na very broad beam for you,",
    "start": "1233910",
    "end": "1239190"
  },
  {
    "text": "which for some applications,\nmight be actually desirable. It's not necessarily\na bad thing.",
    "start": "1239190",
    "end": "1244270"
  },
  {
    "text": "So, for instance,\nif you just want a proximity sensor for a\nvehicle parking assist sensor.",
    "start": "1244270",
    "end": "1251490"
  },
  {
    "text": "You, typically, want them to\nhave very broad beam pattern so that no matter\nwhere the target is,",
    "start": "1251490",
    "end": "1258570"
  },
  {
    "text": "you can detect its proximity. The price you pay is then you\nlose sensitivity in bearing,",
    "start": "1258570",
    "end": "1265570"
  },
  {
    "text": "right? Your bearing angle estimation\nmight not be as accurate. Any questions?",
    "start": "1265570",
    "end": "1271860"
  },
  {
    "text": "Yes. Like you were saying, in terms\nof the MEMS of the amplitude,",
    "start": "1271860",
    "end": "1277190"
  },
  {
    "text": "the signal is probably-- piezo is going to be smaller\nthan the ultrasonic set piezo and electrostatic sensor.",
    "start": "1277190",
    "end": "1284170"
  },
  {
    "text": "Is that true? The amplitude of the\nactual acoustic wave. Yes. And that's also because you\nhave just a tiny surface that",
    "start": "1284170",
    "end": "1292179"
  },
  {
    "text": "is vibrating. So you just generate\nless energy, basically, acoustic energy. And energy is proportional\nto the amplitude",
    "start": "1292180",
    "end": "1300190"
  },
  {
    "text": "or the square of the amplitude. So yes, you do get\nless, which means also",
    "start": "1300190",
    "end": "1305860"
  },
  {
    "text": "your range would be more\nlimited because you're not sending as much energy out. That's exactly right.",
    "start": "1305860",
    "end": "1312920"
  },
  {
    "text": "OK. So now we understand the\nphysics of acoustic waves.",
    "start": "1312920",
    "end": "1319039"
  },
  {
    "text": "We also looked at how these\ntransducers are made and using different technologies.",
    "start": "1319040",
    "end": "1324180"
  },
  {
    "text": "Think we are ready to\nstart looking at the system architecture to understand\nat a system level",
    "start": "1324180",
    "end": "1330500"
  },
  {
    "text": "how an ultrasonic sensor works. The system block diagram is\nextremely simple, actually.",
    "start": "1330500",
    "end": "1335570"
  },
  {
    "text": "So basically, on\nthe transmit side, you have some local\noscillator that generates the base frequency\nfor your acoustic wave",
    "start": "1335570",
    "end": "1344740"
  },
  {
    "text": "that you want to send. Then you have a\nwaveform generator. We'll talk more about this. But you typically don't\njust send a pure harmonic.",
    "start": "1344740",
    "end": "1352810"
  },
  {
    "text": "You send some sort\nof a pulse shape. Then you want to amplify that.",
    "start": "1352810",
    "end": "1359380"
  },
  {
    "text": "And that's your\namplifier in electronics. And as we said, some\nof these transducers,",
    "start": "1359380",
    "end": "1365620"
  },
  {
    "text": "like the electrostatic\nones, they require very high voltages,\nlike 100 volts or more. In those cases, you also have\na high-voltage transformer",
    "start": "1365620",
    "end": "1373659"
  },
  {
    "text": "in the path. So that's just to get you to\nthe very high voltages you need because you can't\ndirectly generate",
    "start": "1373660",
    "end": "1379270"
  },
  {
    "text": "those in electronics and\nCMOS or something like that. You basically get help with\nthe transformer effect.",
    "start": "1379270",
    "end": "1390820"
  },
  {
    "text": "You couple that basically\namplified waveform to your transducer.",
    "start": "1390820",
    "end": "1397180"
  },
  {
    "text": "Here we are showing one\nwhere the same component is both the transmitter\nand the receiver.",
    "start": "1397180",
    "end": "1402910"
  },
  {
    "text": "So you first transmit\nyour wave, and then you also collect the echos.",
    "start": "1402910",
    "end": "1408730"
  },
  {
    "text": "And the echos come to the\nreceiver path, basically. On the receiver side,\nalso very simple.",
    "start": "1408730",
    "end": "1415010"
  },
  {
    "text": "You just amplify it,\nas we do in any sensor. Usually, the first\nthing you want to do is to amplify because\nyou want to maximize",
    "start": "1415010",
    "end": "1423610"
  },
  {
    "text": "your signal-to-noise ratio. Then you apply some filtering\nto get rid of out-of-band noise",
    "start": "1423610",
    "end": "1429289"
  },
  {
    "text": "and just keep the frequency\ncontent that where you know there is signal.",
    "start": "1429290",
    "end": "1435280"
  },
  {
    "text": "And then you digitize\nit to an ADC. And then you do some\nprocessing in DSP",
    "start": "1435280",
    "end": "1441010"
  },
  {
    "text": "to estimate your range\nand varying angle. And we'll talk about\nthe processing. Now, note that this is kind of\nlike a generic block diagram.",
    "start": "1441010",
    "end": "1448370"
  },
  {
    "text": "Specific systems might\nbe different from this in certain aspects.",
    "start": "1448370",
    "end": "1453500"
  },
  {
    "text": "So some of them, for\ninstance, might not have the high-voltage\ntransformer because, for instance, if\nyou have a MEMS device,",
    "start": "1453500",
    "end": "1459160"
  },
  {
    "text": "it doesn't need high\nvoltages to operate. So then you don't put the\nhigh-voltage transformer in them. Or sometimes, you might\nhave a separate transmitter",
    "start": "1459160",
    "end": "1467020"
  },
  {
    "text": "and receiver, as we'll see. In some cases, you separate\nout your transducers. Use one only for transmit.",
    "start": "1467020",
    "end": "1473500"
  },
  {
    "text": "Use the other only for receive. But at a high level,\nbasically, this block diagram",
    "start": "1473500",
    "end": "1479830"
  },
  {
    "text": "captures the essential\nfunctions that need to happen inside\na sonar system.",
    "start": "1479830",
    "end": "1487660"
  },
  {
    "text": "So here's an example. I think we've all seen\nthese ultrasonic sensors",
    "start": "1487660",
    "end": "1494890"
  },
  {
    "text": "in the bumpers of the cars\nthat are used for parking. So these are the tiny circular\nindentations that you see.",
    "start": "1494890",
    "end": "1501940"
  },
  {
    "text": "There's usually four\nof them on each bumper. So those are ultrasonic sensors.",
    "start": "1501940",
    "end": "1506950"
  },
  {
    "text": "And if you take one of them\nout and look inside it, now we fully understand at\na system level what's what.",
    "start": "1506950",
    "end": "1514929"
  },
  {
    "text": "So typically, those have a\npiezoelectric transducer, which",
    "start": "1514930",
    "end": "1520690"
  },
  {
    "text": "is connected to some PCB here. And then on the PCB,\nyou have a transformer",
    "start": "1520690",
    "end": "1526390"
  },
  {
    "text": "to generate the high voltages. And then you have a silicon\nchip with all the electronics.",
    "start": "1526390",
    "end": "1532810"
  },
  {
    "text": "And the electronics\nbasically is everything we showed in the block diagram. There is the oscillator. There is the waveform generator.",
    "start": "1532810",
    "end": "1539650"
  },
  {
    "text": "And then under the amplifiers\non the transmit and the receiver side, filter, ADC,\nand possibly some",
    "start": "1539650",
    "end": "1546730"
  },
  {
    "text": "DSP on board too to basically\nprocess the signals. Some of them don't\ndo the DSP on board",
    "start": "1546730",
    "end": "1553960"
  },
  {
    "text": "and just give you\ndigitized signals. And then you can have a\nseparate microcontroller or some",
    "start": "1553960",
    "end": "1561580"
  },
  {
    "text": "compute elsewhere that does\nthe processing for you. So that's what these look like.",
    "start": "1561580",
    "end": "1567289"
  },
  {
    "text": "And there's several\ncompanies that make them. This one is from\nBosch, for instance.",
    "start": "1567290",
    "end": "1573030"
  },
  {
    "text": "OK, so-- yes. On this one, you\nsaid some systems",
    "start": "1573030",
    "end": "1578250"
  },
  {
    "text": "do simple ranging in\nthe analog domain? Correct. Yes. Can you talk a little\nbit more about that?",
    "start": "1578250",
    "end": "1583300"
  },
  {
    "text": "Yes. And thanks for pointing\nthat out because I think I skipped over it. ",
    "start": "1583300",
    "end": "1590110"
  },
  {
    "text": "We are talking about\nthis point that do simple ranging\nin analog domain. So in some cases, if you're\nnot interested in doing",
    "start": "1590110",
    "end": "1599790"
  },
  {
    "text": "full mapping-- and, for instance,\nI think one example is the parking assistance\nis where you only",
    "start": "1599790",
    "end": "1605730"
  },
  {
    "text": "want to detect proximity-- you don't need to go to\nthe trouble of digitizing",
    "start": "1605730",
    "end": "1611760"
  },
  {
    "text": "your signal and then doing\nfancy DSP on a microcontroller or something like that.",
    "start": "1611760",
    "end": "1617760"
  },
  {
    "text": "What you can do is in analog\nbuild very simple circuitry that just do some thresholding\non the received signal.",
    "start": "1617760",
    "end": "1626080"
  },
  {
    "text": "And if it goes\nabove a threshold, they say, oh, I'm\ndetecting something. And this is the range.",
    "start": "1626080",
    "end": "1631580"
  },
  {
    "text": "We'll talk a little bit more\nabout it in a few minutes. But basically, those sensors\nare not usually extremely useful",
    "start": "1631580",
    "end": "1642120"
  },
  {
    "text": "for robotics except,\nagain, if you are interested in just a very\nsimple proximity detector.",
    "start": "1642120",
    "end": "1648990"
  },
  {
    "text": "But if you want to do proper\nmapping with bearing angle detection and things\nlike that, you have to digitize your\nsignal and do some DSP.",
    "start": "1648990",
    "end": "1657750"
  },
  {
    "text": "So one thing we haven't talked\nabout yet is if I go back here. So there is this\nwaveform generator here.",
    "start": "1657750",
    "end": "1664080"
  },
  {
    "text": "But what are these\nwaveforms that are used for sonar sensing? So there's two main\ncategories of waveforms",
    "start": "1664080",
    "end": "1673470"
  },
  {
    "text": "that are used in sonar. And first category\nis short pulses.",
    "start": "1673470",
    "end": "1681660"
  },
  {
    "text": "So some sonar systems\nbasically generate finite-duration short pulses. So they're somewhere\nbetween tens",
    "start": "1681660",
    "end": "1688289"
  },
  {
    "text": "to hundreds of microseconds. And they send these pulses. So your transmitter\nbasically sends a pulse.",
    "start": "1688290",
    "end": "1694650"
  },
  {
    "text": "And then it's silent\nuntil all the echoes are received from that pulse. And then it sends another one.",
    "start": "1694650",
    "end": "1700290"
  },
  {
    "text": "So it's periodically\nsending pulses. But the pulses are short. So there is a finite\nduration that you transmit.",
    "start": "1700290",
    "end": "1706230"
  },
  {
    "text": "Then you're mostly silent. And then you send another pulse. And then you send another pulse.",
    "start": "1706230",
    "end": "1711390"
  },
  {
    "text": "So the waveforms are\nrepetitive series of finite-duration pulses. The hardware and\nalgorithms that are",
    "start": "1711390",
    "end": "1717990"
  },
  {
    "text": "needed to generate\nthe pulses and also process the echos to do\nranging and varying estimation are very simple.",
    "start": "1717990",
    "end": "1723900"
  },
  {
    "text": "And this type of sonar is called\npulse-echo sonar, by the way.",
    "start": "1723900",
    "end": "1730440"
  },
  {
    "text": "But it also comes\nwith some drawbacks. So typically, these\nsystems are not very robust to noise\nand interference.",
    "start": "1730440",
    "end": "1737580"
  },
  {
    "text": "And also, they're limited\nin how many measurements you can do per second\nbecause, most of the time,",
    "start": "1737580",
    "end": "1744030"
  },
  {
    "text": "you're not\ntransmitting anything. You just send a pulse. You're listening\nfor all the echoes. And then you send another one.",
    "start": "1744030",
    "end": "1749850"
  },
  {
    "text": "So that sort of, as\nwe will see, limits how many measurements\nyou can do per second. Then the second category\nof waveforms that are used,",
    "start": "1749850",
    "end": "1758190"
  },
  {
    "text": "those are continuous waveforms. So your transmitter is\ncontinuously-- never stops.",
    "start": "1758190",
    "end": "1763480"
  },
  {
    "text": "It's continuously\ntransmitting waveforms. Specifically in sonar,\nthese are called",
    "start": "1763480",
    "end": "1769020"
  },
  {
    "text": "Continuous Transmission\nFrequency Modulated sonar, or CTFM sonar.",
    "start": "1769020",
    "end": "1774750"
  },
  {
    "text": "Excuse me. Also called Frequency\nModulated Continuous Wave,",
    "start": "1774750",
    "end": "1780390"
  },
  {
    "text": "or FMCW, sonar. FMCW might be familiar to\nyou from radar community",
    "start": "1780390",
    "end": "1788400"
  },
  {
    "text": "because that's what these\nsystems are called in radar. But CTFM and FMCW--",
    "start": "1788400",
    "end": "1794220"
  },
  {
    "text": "exact same principle. Basically, the system\nis continuously transmitting some\nfrequency-modulated signals.",
    "start": "1794220",
    "end": "1801210"
  },
  {
    "text": "And we'll see exactly what the\nfrequency modulation is today.",
    "start": "1801210",
    "end": "1806820"
  },
  {
    "text": "And there's certain\nbenefits to this. It typically need\nless bandwidth.",
    "start": "1806820",
    "end": "1813299"
  },
  {
    "text": "The average power that\nthey send is lower because you're spreading out\nyour transmission over longer",
    "start": "1813300",
    "end": "1819180"
  },
  {
    "text": "duration. So you don't need to send\nvery high peak powers. So there's less\nnonlinearities and things",
    "start": "1819180",
    "end": "1825600"
  },
  {
    "text": "like that in the system. You can do a higher number\nof measurements per second,",
    "start": "1825600",
    "end": "1830610"
  },
  {
    "text": "as we'll see, again,\nbecause you're continuously transmitting your signal. You're not limited\nto short pulses.",
    "start": "1830610",
    "end": "1836940"
  },
  {
    "text": "You will be more robust\nto noise and interference in the systems. But this also comes with\na bunch of trade offs.",
    "start": "1836940",
    "end": "1843400"
  },
  {
    "text": "So you need more\ncomplex hardware. You would need more complex DSP.",
    "start": "1843400",
    "end": "1848760"
  },
  {
    "text": "And certain types of movements\nin the target or platform might cause issues for\nthese systems, as we'll see.",
    "start": "1848760",
    "end": "1856900"
  },
  {
    "text": "So there's always trade offs. It's not like pulse\necho is always better--",
    "start": "1856900",
    "end": "1862230"
  },
  {
    "text": "is superior always to CTFM, or\nCTFM is superior to pulse echo.",
    "start": "1862230",
    "end": "1869070"
  },
  {
    "text": "The thing is that for\npulse-echo systems--",
    "start": "1869070",
    "end": "1874279"
  },
  {
    "text": "and here we are talking\nin the context of sonar, but exact same thing, as\nwe'll see, type of waveforms",
    "start": "1874280",
    "end": "1880610"
  },
  {
    "text": "are used in radar\nand LiDAR as well. What really is the\nmain drawback is",
    "start": "1880610",
    "end": "1887180"
  },
  {
    "text": "the fact that the\ntype of DSP signal processing that you can do is\nvery limited in these systems.",
    "start": "1887180",
    "end": "1893810"
  },
  {
    "text": "And because of that, they don't\nimprove much over time, because",
    "start": "1893810",
    "end": "1899870"
  },
  {
    "text": "as over time, you're coming\nup with better algorithms, more interesting ways of doing\ndetections, or denoising,",
    "start": "1899870",
    "end": "1905870"
  },
  {
    "text": "or filtering and\nthings like that. And most of those\nare not applicable to pulse-echo systems.",
    "start": "1905870",
    "end": "1911270"
  },
  {
    "text": "But in CW systems, there is\na lot more you can do in DSP. And because of\nthat, these systems",
    "start": "1911270",
    "end": "1917804"
  },
  {
    "text": "in terms of the performance\nare getting better and better and better over time. So there is a shift\nin the performance.",
    "start": "1917805",
    "end": "1926390"
  },
  {
    "text": "And I think eventually,\nwe might get to a point where, except for cases where\nyou want to build something",
    "start": "1926390",
    "end": "1933050"
  },
  {
    "text": "which is very low cost, or\nyou need very simple hardware, you might be completely\nruling out eventually.",
    "start": "1933050",
    "end": "1941320"
  },
  {
    "text": "That's not where we are today. But eventually, we\nmight completely phase out pulse-echo\nsystems for more advanced",
    "start": "1941320",
    "end": "1947960"
  },
  {
    "text": "robotic applications. So now we are going to study\nthese types of waveforms",
    "start": "1947960",
    "end": "1954110"
  },
  {
    "text": "in detail and also the\ntype of signal processing associated with each\nof them, starting",
    "start": "1954110",
    "end": "1959360"
  },
  {
    "text": "with pulse-echo ranging. So how do you do ranging? Later, we'll talk about\nvarying or DOA estimation.",
    "start": "1959360",
    "end": "1966440"
  },
  {
    "text": "Right now, we're\njust talking about, how do you estimate the\nrange to the target?",
    "start": "1966440",
    "end": "1971610"
  },
  {
    "text": "So in pulse-echo\nsystems, there's two types of pulses\nthat are used.",
    "start": "1971610",
    "end": "1980180"
  },
  {
    "text": "First type or\ncategory of pulses, they're called\nnarrowband pulses. And those are very\neasy to generate.",
    "start": "1980180",
    "end": "1988070"
  },
  {
    "text": "They don't take a lot\nof frequency bandwidth. And they are typically more\nrobust to noise, again,",
    "start": "1988070",
    "end": "1996110"
  },
  {
    "text": "because they're\nvery low bandwidth.",
    "start": "1996110",
    "end": "2002650"
  },
  {
    "text": "So you can filter out\nyour receive signal just at around the\nbandwidth of the pulse",
    "start": "2002650",
    "end": "2008200"
  },
  {
    "text": "and reject a lot of noise. And then we have\nwideband pulses.",
    "start": "2008200",
    "end": "2013960"
  },
  {
    "text": "Again, there's\nalways trade offs. There's no free\nlunch ever when it",
    "start": "2013960",
    "end": "2019180"
  },
  {
    "text": "comes to these types of\nsensing applications. So with wideband pulses, you can\nget better ranging resolution.",
    "start": "2019180",
    "end": "2027490"
  },
  {
    "text": "Also, you can do some\nvery interesting stuff. So for instance,\nbecause you have",
    "start": "2027490",
    "end": "2034059"
  },
  {
    "text": "a lot of frequency content\nin the returned echo with the wideband\npulses, you can",
    "start": "2034060",
    "end": "2040360"
  },
  {
    "text": "use that spectral\ninformation to do some types of classification. So just by looking,\nfor instance,",
    "start": "2040360",
    "end": "2046490"
  },
  {
    "text": "at the FFT of the\nreturn echo, you can classify different\ntypes of objects,",
    "start": "2046490",
    "end": "2053649"
  },
  {
    "text": "like a human versus a car\nversus something else. And this idea, for those of you\nwho are familiar, for instance,",
    "start": "2053650",
    "end": "2062349"
  },
  {
    "text": "with the micro-Doppler\neffect in radar, this is kind of along those\nlines, but done in sonar.",
    "start": "2062350",
    "end": "2068860"
  },
  {
    "text": "And also with wideband, you\ncan get lower side lobes in the beam pattern.",
    "start": "2068860",
    "end": "2075638"
  },
  {
    "text": "So what are the drawbacks? Again, there's going to be\nmore complexity to the hardware and more complexity to parts\nof the signal processing",
    "start": "2075639",
    "end": "2085449"
  },
  {
    "text": "if you want to do\nfancy stuff like this. Let's look at some\nof these pulses, so begin an idea of\nwhat they look like.",
    "start": "2085449",
    "end": "2092239"
  },
  {
    "text": "And so there's these plots.",
    "start": "2092239",
    "end": "2097640"
  },
  {
    "text": "The first two starting from\nthe left are narrowband pulses. So the narrowband pulses--",
    "start": "2097640",
    "end": "2104330"
  },
  {
    "text": "let's look at this\nmiddle one first. Basically, what it is,\nit's just a pure sine wave",
    "start": "2104330",
    "end": "2109600"
  },
  {
    "text": "at a fixed frequency-- 49.9 kilohertz-- with\na rectangular window applied to it.",
    "start": "2109600",
    "end": "2114710"
  },
  {
    "text": "So the rectangular window\nbasically determines your pulse duration. And then within that\nduration, you're",
    "start": "2114710",
    "end": "2120940"
  },
  {
    "text": "just sending a pure sine wave. And that's why it's a narrowband\nsignal because there's just most of the frequency\nis going to be--",
    "start": "2120940",
    "end": "2128530"
  },
  {
    "text": "the energy is going to be at\nthat 49.9-kilohertz frequency.",
    "start": "2128530",
    "end": "2134320"
  },
  {
    "text": "The left one is\nbasically the same idea. It's a slightly lower\nfrequency at 40 kilohertz. It's just that the window\napplied to it or the pulse",
    "start": "2134320",
    "end": "2142450"
  },
  {
    "text": "shape is more smooth. Instead of this sharp\nrectangular one, it's a smoother, basically,\npulse shape applied to it.",
    "start": "2142450",
    "end": "2151170"
  },
  {
    "text": "So those two are the two\nexamples of narrowband. Again, there's tons and tons\nof different pulse shapes",
    "start": "2151170",
    "end": "2158060"
  },
  {
    "text": "that you can do. You can come up with your own. And there's always some\ntrade off in performance according to the\nparameters of the pulse.",
    "start": "2158060",
    "end": "2166190"
  },
  {
    "text": "So it's not like these\nthree, this is it. You can always come\nup with new ones.",
    "start": "2166190",
    "end": "2171260"
  },
  {
    "text": "And there's many of these. And this third one\nis a wideband pulse. And as you see, it's\nbasically just--",
    "start": "2171260",
    "end": "2178704"
  },
  {
    "text": "well, there's a\nbit of transient. But it's basically just\nthis one pulse, short pulse, that you're sending.",
    "start": "2178705",
    "end": "2184130"
  },
  {
    "text": "And that pulse is\njust 10 microseconds. ",
    "start": "2184130",
    "end": "2189480"
  },
  {
    "text": "So it's kind of almost-- not exactly, but close to what\na delta function would be. It's very narrow in\ntime, which means",
    "start": "2189480",
    "end": "2197510"
  },
  {
    "text": "in frequency it's going to\nbe broadband or wideband.",
    "start": "2197510",
    "end": "2202700"
  },
  {
    "text": "And then this is just one pulse. So again, remember, the way\nthe pulse-echo sonar works",
    "start": "2202700",
    "end": "2208070"
  },
  {
    "text": "is it periodically sends these. So if you look at your time\naxis, what the TX is doing--",
    "start": "2208070",
    "end": "2215870"
  },
  {
    "text": "that's bad. Let's clean it up. What the TX is doing.",
    "start": "2215870",
    "end": "2221720"
  },
  {
    "text": "If it's a wideband\nK, so it's going to send one of those pulses. Then it's silent. Then it'll send another\none and another one.",
    "start": "2221720",
    "end": "2229520"
  },
  {
    "text": "And when it's silent,\nthat's where the receiver is collecting echoes.",
    "start": "2229520",
    "end": "2235040"
  },
  {
    "text": "And when all the echoes\nare basically back, then you send another one.",
    "start": "2235040",
    "end": "2241130"
  },
  {
    "text": "So there's some periodicity\nto the transmit. But most of the time, you're\nnot transmitting anything.",
    "start": "2241130",
    "end": "2248780"
  },
  {
    "text": "That's how pulse echo works. So how do we do ranging\nwith these pulses?",
    "start": "2248780",
    "end": "2256580"
  },
  {
    "text": "Let's talk about that. So this principle that I just\ntold you, you transmit a pulse.",
    "start": "2256580",
    "end": "2262220"
  },
  {
    "text": "And then you just wait for\nall the echos to come back. And then you\ntransmit another one. So it's basically like a TDM,\nTime-Division Multiplexing,",
    "start": "2262220",
    "end": "2273859"
  },
  {
    "text": "principle. So you're multiplexing the\ntime between your transmit. And then you're silent.",
    "start": "2273860",
    "end": "2279530"
  },
  {
    "text": "You're just hearing\nback the echoes. And how do you decide\nthe periodicity",
    "start": "2279530",
    "end": "2286220"
  },
  {
    "text": "of when to send the pulses? It's typically\nfixed, not adaptive.",
    "start": "2286220",
    "end": "2291380"
  },
  {
    "text": "And the way that's\ncalculated is that you decide on a maximum detectable range.",
    "start": "2291380",
    "end": "2296839"
  },
  {
    "text": "Call that rho max. And that you can calculate\nbased on the physics, like that expression we looked at, which\ngives you the echo amplitude.",
    "start": "2296840",
    "end": "2304680"
  },
  {
    "text": "You can plug in some\nnumbers onto it-- into it and find, OK, I think\nthat's the maximum range,",
    "start": "2304680",
    "end": "2309770"
  },
  {
    "text": "10 meters, 15 meters, something\nthat I can detect based on the amplitude\nthat's coming back",
    "start": "2309770",
    "end": "2315349"
  },
  {
    "text": "and what you think your receiver\ncan successfully process. So if that's your rho\nmax, the round-trip delay",
    "start": "2315350",
    "end": "2323660"
  },
  {
    "text": "for that range, so your tau max,\nbasically, is equal to what?",
    "start": "2323660",
    "end": "2329099"
  },
  {
    "text": "It's 2 times rho max divided\nby the speed of sound,",
    "start": "2329100",
    "end": "2338050"
  },
  {
    "text": "divided by V. So that's the\nmaximum round-trip delay time that you have.",
    "start": "2338050",
    "end": "2344380"
  },
  {
    "text": "And this is how much you want to\nwait after sending each pulse. So the pulses that\nyou send, you want",
    "start": "2344380",
    "end": "2353540"
  },
  {
    "text": "to wait a tau max\nbetween them to make sure all the echoes are back.",
    "start": "2353540",
    "end": "2359809"
  },
  {
    "text": "Or if you invert that,\nhow many measurements you would do per second,\nthat's 1 over tau,",
    "start": "2359810",
    "end": "2364910"
  },
  {
    "text": "which is V over 2 rho max. That's the rate of measurement\nthat your pulse-echo system",
    "start": "2364910",
    "end": "2370880"
  },
  {
    "text": "would do. And then in terms of, again,\nhow do you find your range,",
    "start": "2370880",
    "end": "2377990"
  },
  {
    "text": "that's just the\ntime-of-flight principle. So what we need-- what\nthe receiver needs to calculate to do\nranging is this tau",
    "start": "2377990",
    "end": "2385100"
  },
  {
    "text": "or time-of-flight delay. And then you do speed of\nsound times that divided by 2.",
    "start": "2385100",
    "end": "2393013"
  },
  {
    "text": "Remember, why do\nthey divide by 2? Because tau is the\nround-trip delay. So you divide by 2 to make\nit your just one-way delay",
    "start": "2393013",
    "end": "2399619"
  },
  {
    "text": "and then multiply by\nthe speed of sound. Yes. So it sounds like you\narbitrarily decide",
    "start": "2399620",
    "end": "2405650"
  },
  {
    "text": "on the rho max beforehand. But is that possible\nthat your sound",
    "start": "2405650",
    "end": "2411620"
  },
  {
    "text": "can reflect on a surface\nthat's further than rho, and then it will be processed\nin the next set of echoes?",
    "start": "2411620",
    "end": "2417600"
  },
  {
    "text": "Yes. So I'm just going to\nrepeat the question. So the question\nwas, OK, so we're going to decide on some rho\nmax based on some calculation.",
    "start": "2417600",
    "end": "2425960"
  },
  {
    "text": "Or you do some sort of\nanalysis based on the physics, and you say, OK, I think\nthat's the maximum range",
    "start": "2425960",
    "end": "2431690"
  },
  {
    "text": "that the system can detect. But there is always\na risk, as you said, that you can have a very\nstrong acoustic reflector",
    "start": "2431690",
    "end": "2440450"
  },
  {
    "text": "at a distance\nlonger than rho max. And that would echo a signal\nback that you still detect.",
    "start": "2440450",
    "end": "2448820"
  },
  {
    "text": "And it's strong enough. But that kind of messes\nup your calculation because you assumed--",
    "start": "2448820",
    "end": "2454550"
  },
  {
    "text": "now you're associating that\necho with the pulse that was sent after the original pulse.",
    "start": "2454550",
    "end": "2461330"
  },
  {
    "text": "So your tau calculation is\ngoing to be completely wrong. And that's exactly true. It does happen.",
    "start": "2461330",
    "end": "2466670"
  },
  {
    "text": "And that's why\nyou're never perfect. Some of your range measurements\nare completely wrong.",
    "start": "2466670",
    "end": "2472370"
  },
  {
    "text": "And this is one of\nthe effects that can introduce that kind of error. You always can have a\nvery strong reflector.",
    "start": "2472370",
    "end": "2479630"
  },
  {
    "text": "It's not the biggest factor. As we'll see, there\nare things that are much, much worse than this.",
    "start": "2479630",
    "end": "2485670"
  },
  {
    "text": "But every now and\nthen, yes, you can get something that\nis at a range higher",
    "start": "2485670",
    "end": "2491690"
  },
  {
    "text": "than the max range you assumed\nwhen you were designing your system and algorithms. And that could give you a false\npositive detection, basically.",
    "start": "2491690",
    "end": "2500140"
  },
  {
    "text": "OK, so how do we do ranging? So we need to estimate\ntime of flight.",
    "start": "2500140",
    "end": "2506859"
  },
  {
    "text": "And there are two main\ntypes of algorithms that are used in\npulse-echo sonar when it comes to the\ntime-of-flight estimation.",
    "start": "2506860",
    "end": "2514270"
  },
  {
    "text": "One is called\nthreshold-based ranging, which is the simplest\nthing one can do. We'll talk about it.",
    "start": "2514270",
    "end": "2519640"
  },
  {
    "text": "And then you can borrow\nan idea from GPS.",
    "start": "2519640",
    "end": "2524740"
  },
  {
    "text": "And when we were\nstudying GPS, there also you had to\nestimate time of flight. And for GPS, we use this\nidea of matched filtering",
    "start": "2524740",
    "end": "2533710"
  },
  {
    "text": "or correlation to\ndo time of flight.",
    "start": "2533710",
    "end": "2539080"
  },
  {
    "text": "Here, it's the same thing. If you want to measure time of\nflight, one of the things you can do, you can-- if you transmit signals with\ngood autocorrelation properties",
    "start": "2539080",
    "end": "2546970"
  },
  {
    "text": "at the receive side,\nyou can correlate them with a replica of what you send. And then the correlation\npeak would be proportional",
    "start": "2546970",
    "end": "2554259"
  },
  {
    "text": "to the time of flight. So that's also another\nidea that we'll talk about. But let's talk about\nthe simple one,",
    "start": "2554260",
    "end": "2560140"
  },
  {
    "text": "the threshold-based ranging. Extremely, extremely\nsimple idea. So basically, what you do is--",
    "start": "2560140",
    "end": "2566860"
  },
  {
    "text": "here's your P echo,\nso that received echo, either in continuous\ntime or after the ADC.",
    "start": "2566860",
    "end": "2572500"
  },
  {
    "text": "So that's why you have\nthe T or an inversion and as the index\nafter ADC sampling",
    "start": "2572500",
    "end": "2578830"
  },
  {
    "text": "and so your echo is a\nfunction of the range rho and the bearing angle\nor DOA of the target.",
    "start": "2578830",
    "end": "2586630"
  },
  {
    "text": "What you do in threshold-based\nranging, first you rectify it. Basically, take like the\nabsolute value of it.",
    "start": "2586630",
    "end": "2592900"
  },
  {
    "text": "Then you integrate that\nrectified waveform. And you monitor the\noutput of your integrator",
    "start": "2592900",
    "end": "2599050"
  },
  {
    "text": "as it's doing the integration. As soon as it crosses a\nset threshold, you say,",
    "start": "2599050",
    "end": "2605290"
  },
  {
    "text": "that's my detection. And you check the time at which\nyour integrator output crosses",
    "start": "2605290",
    "end": "2610810"
  },
  {
    "text": "the threshold. And you declare that as your\nround-trip time of flight. So graphically, here's\nwhat's happening.",
    "start": "2610810",
    "end": "2617200"
  },
  {
    "text": "So you have your echo\nwaveform coming back. It hits the receiver\nat time tau.",
    "start": "2617200",
    "end": "2624410"
  },
  {
    "text": "So this tau is the ground\ntruth time of flight",
    "start": "2624410",
    "end": "2629950"
  },
  {
    "text": "that you want to estimate. That's the actual,\nphysical time of flight. That's when you start\nreceiving the echo.",
    "start": "2629950",
    "end": "2637060"
  },
  {
    "text": "Then you rectify this. So this is the absolute\nvalue of your waveform, the rectified version.",
    "start": "2637060",
    "end": "2643240"
  },
  {
    "text": "And then you pass this rectified\nwaveform to an integrator. So what happens is\nthat, well, there's",
    "start": "2643240",
    "end": "2649180"
  },
  {
    "text": "nothing out of the integrator\nuntil you get some signal. And then you start integrating.",
    "start": "2649180",
    "end": "2654580"
  },
  {
    "text": "And at some point, the\noutput of your integrator crosses a threshold. And then at that point,\nyou check what time it is.",
    "start": "2654580",
    "end": "2661240"
  },
  {
    "text": "That's tau hat. And that's your estimate of\nthe round-trip time of flight.",
    "start": "2661240",
    "end": "2667190"
  },
  {
    "text": "So right off the\nbat, you see that it is a very simple algorithm. But it has a big problem,\nwhich is your tau hat is never",
    "start": "2667190",
    "end": "2675010"
  },
  {
    "text": "going to be the same as tau. There's always going to\ntake a little bit of time for the integrator to\ncross the threshold.",
    "start": "2675010",
    "end": "2681830"
  },
  {
    "text": "So it is always a\nbiased estimator. That's very important to note. You never get a perfect\nestimation out of this.",
    "start": "2681830",
    "end": "2690850"
  },
  {
    "text": "And it's always biased. What makes matters a little\nworse with this detector is",
    "start": "2690850",
    "end": "2699220"
  },
  {
    "text": "that not only your\nestimate is always biased, but also that this error\nin your estimation--",
    "start": "2699220",
    "end": "2707740"
  },
  {
    "text": "and the error is the delta\ntau, which is tau hat minus the ground truth tau--",
    "start": "2707740",
    "end": "2712900"
  },
  {
    "text": "is also a function of\nthe strength of the echo that you receive. So if you have a weaker target,\neither a weaker reflectivity",
    "start": "2712900",
    "end": "2722079"
  },
  {
    "text": "target or a target that\nis at a further distance-- because we know an echo\namplitude is also proportional",
    "start": "2722080",
    "end": "2729640"
  },
  {
    "text": "to 1 over range squared. So you get a smaller amplitude\necho for a further-away target. So if you have another\ntarget with a smaller--",
    "start": "2729640",
    "end": "2737080"
  },
  {
    "text": "I'm just going to overlay it\nin green-- with a smaller echo amplitude, and you pass it\nthrough the same integrator,",
    "start": "2737080",
    "end": "2742840"
  },
  {
    "text": "it's going to do the same thing. But it's going to pass--\nbecause it's a weaker signal, it's going to pass the\nthreshold at a much later time.",
    "start": "2742840",
    "end": "2751010"
  },
  {
    "text": "So this is going to be the\ntau hat 2 of the green signal. So your, basically,\nerror in estimation",
    "start": "2751010",
    "end": "2760810"
  },
  {
    "text": "is going to get worse and\nworse for further-away targets or the targets that\nare less reflective.",
    "start": "2760810",
    "end": "2768400"
  },
  {
    "text": "So it's not a great estimator. So if you want applications--",
    "start": "2768400",
    "end": "2773530"
  },
  {
    "text": "I'll be with you in a second-- applications which\nneed precise ranging, you shouldn't use\nthe threshold based.",
    "start": "2773530",
    "end": "2779350"
  },
  {
    "text": "Yes. Based on that\napplication, how would you go about sensing two\ndifferent targets?",
    "start": "2779350",
    "end": "2786100"
  },
  {
    "text": "That's also a great question. So the question is,\nwhat if you have echos",
    "start": "2786100",
    "end": "2793420"
  },
  {
    "text": "from more than one target? So two cases can happen if\nyou have more than one target.",
    "start": "2793420",
    "end": "2799420"
  },
  {
    "text": "Either they are at the same\nrange but at different angles,",
    "start": "2799420",
    "end": "2805780"
  },
  {
    "text": "which means, basically-- yeah, at the same time\nthat you have this PE, there's a second\ntarget whose echo",
    "start": "2805780",
    "end": "2814690"
  },
  {
    "text": "is hitting the receiver\nat the exact same time. And with that, there is no\nway you can distinguish them",
    "start": "2814690",
    "end": "2820960"
  },
  {
    "text": "because you get\nthe sum of the two. And then you cannot tell. You just detect\nit as one target.",
    "start": "2820960",
    "end": "2826960"
  },
  {
    "text": "The second case\nis if the targets are at different ranges. So if they're at\ndifferent ranges, the echos are going to get\nto you at different times.",
    "start": "2826960",
    "end": "2834680"
  },
  {
    "text": "So you receive the first target. And then a bit of time goes by.",
    "start": "2834680",
    "end": "2840099"
  },
  {
    "text": "And then you receive\nanother echo. This you can detect. But what you would need to\ndo-- and that's actually",
    "start": "2840100",
    "end": "2845710"
  },
  {
    "text": "what good receivers do--\nis that at the output of this integrator, as soon\nas it crosses a threshold,",
    "start": "2845710",
    "end": "2854090"
  },
  {
    "text": "which we call a\ntarget detection, they reset the integrator. So it crosses the threshold. They reset it, go back to zero,\nand then integrate again so",
    "start": "2854090",
    "end": "2861670"
  },
  {
    "text": "if another echo comes,\nyou can detect it.  So you see right\noff the bat, this",
    "start": "2861670",
    "end": "2869200"
  },
  {
    "text": "comes with very\nserious limitations. But it's actually even worse\nthan that, as we'll see.",
    "start": "2869200",
    "end": "2875770"
  },
  {
    "text": "So always biased. And also, your\ntime-of-flight estimate depends on the echo amplitude.",
    "start": "2875770",
    "end": "2882500"
  },
  {
    "text": "So echo amplitude is, as\nwe know by the analysis that we did last time, it\ndepends on a bunch of factors.",
    "start": "2882500",
    "end": "2892220"
  },
  {
    "text": "One is the, basically,\nacoustic reflectivity of the target, how much of\nthe energy it echos back.",
    "start": "2892220",
    "end": "2899530"
  },
  {
    "text": "Then there is range\nbecause there's 1 over rho squared dependency\non the echo amplitude.",
    "start": "2899530",
    "end": "2905170"
  },
  {
    "text": "The third one is angle\ndependency, that Bessel function dependency,\nfor instance,",
    "start": "2905170",
    "end": "2913180"
  },
  {
    "text": "determines also the reflectivity\nor the echo amplitude-- not the reflectivity-- the\necho amplitude of the target.",
    "start": "2913180",
    "end": "2920020"
  },
  {
    "text": "So targets that are at\nlarger bearing angles, we get much weaker\nsignals from them.",
    "start": "2920020",
    "end": "2926470"
  },
  {
    "text": "And with this type of\ndetection, weaker signal means bigger error in\nyour ranging estimate.",
    "start": "2926470",
    "end": "2932780"
  },
  {
    "text": "So let's study that. I think it's important to\nunderstand that how serious especially that bearing angle\ndependency of the ranging error",
    "start": "2932780",
    "end": "2942880"
  },
  {
    "text": "is for this type of detector. So to do that, we\nneed a signal model. ",
    "start": "2942880",
    "end": "2951100"
  },
  {
    "text": "Our physics accurate\nsignal model is this expression that we\nderived for the echo amplitude.",
    "start": "2951100",
    "end": "2958840"
  },
  {
    "text": "I'm going to factor out\nthe range dependency. So let's say you're looking at\ntargets at a fixed range rho.",
    "start": "2958840",
    "end": "2967000"
  },
  {
    "text": "You also fix our frequency\nand other parameters. You're just going to look\nas a function of theta,",
    "start": "2967000",
    "end": "2973550"
  },
  {
    "text": "which is the bearing\nangle to the target. If you just hold your\ntarget at a fixed range and just change the angle, how\nis the error in our ranging",
    "start": "2973550",
    "end": "2982270"
  },
  {
    "text": "going to change as\na function of theta? So the theta dependency\nof the echo amplitude",
    "start": "2982270",
    "end": "2987460"
  },
  {
    "text": "is this square of the Bessel\nfunction that we derive. This is a pretty\naccurate signal model,",
    "start": "2987460",
    "end": "2994270"
  },
  {
    "text": "but it's difficult to work with. We don't want to work\nwith Bessel functions when it comes to this\ntype of analysis.",
    "start": "2994270",
    "end": "3000130"
  },
  {
    "text": "So again, remember, everything\nelse is lumped into this P0. So P0 has your aperture,\ngeometry, frequency,",
    "start": "3000130",
    "end": "3008130"
  },
  {
    "text": "the rho squared, all of that. But you're fixing\nall of those, just focusing on varying theta,\nwhich is a DOA angle.",
    "start": "3008130",
    "end": "3016230"
  },
  {
    "text": "So to get something that\nis easier to work with, it turns out that-- so this\nBessel function squared thingy,",
    "start": "3016230",
    "end": "3024900"
  },
  {
    "text": "remember, as a function of\ntheta, it has a main lobe, and then it has a bunch\nof smaller side lobes.",
    "start": "3024900",
    "end": "3032790"
  },
  {
    "text": "And the main lobe, if\nthis is theta equals to 0, it's between plus theta\n0 and minus theta 0.",
    "start": "3032790",
    "end": "3038910"
  },
  {
    "text": "Now, it turns out that\nthe main lobe of this can be very well approximated\nby a Gaussian function.",
    "start": "3038910",
    "end": "3047350"
  },
  {
    "text": "So basically, for thetas\nthat are in the main lobe, less than theta 0, you can\napproximate your echo amplitude",
    "start": "3047350",
    "end": "3056010"
  },
  {
    "text": "by the P0 times a Gaussian\nfunction, which is minus theta",
    "start": "3056010",
    "end": "3061680"
  },
  {
    "text": "squared over 2 sigma squared. What is sigma? Sigma is just the\nvariance of the Gaussian.",
    "start": "3061680",
    "end": "3066990"
  },
  {
    "text": "And it's chosen such that\nthe width of the Gaussian matches the width of your\necho amplitude, basically.",
    "start": "3066990",
    "end": "3074370"
  },
  {
    "text": "So graphically, this\nis what it looks like. So this is for a real\ntransducer that I did this.",
    "start": "3074370",
    "end": "3080430"
  },
  {
    "text": "The transducer had an aperture\nradius of 1.8 centimeters. It was operating at a\nfrequency of 50 kilohertz.",
    "start": "3080430",
    "end": "3088770"
  },
  {
    "text": "So those numbers you plug\ninto the Bessel function. And you plot it. And the blue curve is the\nactual angular dependency",
    "start": "3088770",
    "end": "3099150"
  },
  {
    "text": "of your echo amplitude. And then the red is a\nGaussian that I fit to it.",
    "start": "3099150",
    "end": "3106059"
  },
  {
    "text": "And as you see,\nfor thetas that are between, say, plus and minus 10\ndegrees, the red and the blue",
    "start": "3106060",
    "end": "3113099"
  },
  {
    "text": "are almost on top of each other. So we can use the Gaussian\nfunction as our signal model",
    "start": "3113100",
    "end": "3118440"
  },
  {
    "text": "to analyze our ranging error. It's much, much\neasier to work with.",
    "start": "3118440",
    "end": "3124400"
  },
  {
    "text": "So let's see then how\nthe error in ranging for the simple\nthreshold-based detector",
    "start": "3124400",
    "end": "3130250"
  },
  {
    "text": "varies as a function of the\nangle of arrival or the bearing angle.",
    "start": "3130250",
    "end": "3135410"
  },
  {
    "text": "So the way we do that, we need\nto basically-- the detection criteria, remember,\nis the output",
    "start": "3135410",
    "end": "3141320"
  },
  {
    "text": "of our integrator\ncrossing a threshold. So let's look at that. We call the i of theta and t the\noutput of the integrator, which",
    "start": "3141320",
    "end": "3149960"
  },
  {
    "text": "is basically the\nintegral from 0 to t of the absolute value\nof the echo amplitude",
    "start": "3149960",
    "end": "3156620"
  },
  {
    "text": "or the rectified echo amplitude. Now, we're going to make\none more simplification here",
    "start": "3156620",
    "end": "3162500"
  },
  {
    "text": "again just to get a signal model\nwe can analytically play with.",
    "start": "3162500",
    "end": "3168560"
  },
  {
    "text": "Remember, if I sketch it here,\nthe rectified echo amplitude,",
    "start": "3168560",
    "end": "3174110"
  },
  {
    "text": "it looked something\nlike this for one of those narrowband pulses\nthat we were working with.",
    "start": "3174110",
    "end": "3180860"
  },
  {
    "text": "We are going to approximate\nthat by just a rectangular pulse of constant amplitude.",
    "start": "3180860",
    "end": "3187829"
  },
  {
    "text": "Why? Because then the integral\nwe can do analytically and look at the results easily.",
    "start": "3187830",
    "end": "3193200"
  },
  {
    "text": "So what happens is\nthat-- so the amplitude, we call that just\nP echo of theta.",
    "start": "3193200",
    "end": "3200810"
  },
  {
    "text": "We take that out\nof the integral. And then the\nintegral, so it starts at time tau, which is\nthe time of arrival,",
    "start": "3200810",
    "end": "3208220"
  },
  {
    "text": "actually, of the pulse. And you're integrating over t. So then you integrate\nfrom tau to t of just t.",
    "start": "3208220",
    "end": "3217069"
  },
  {
    "text": "So then the result is basically\nthis, what we have plugged in.",
    "start": "3217070",
    "end": "3222290"
  },
  {
    "text": "Well, P0 is just\nthat constant that lumps in range, and geometry,\nand frequency, and all that.",
    "start": "3222290",
    "end": "3228710"
  },
  {
    "text": "We have our Gaussian\napproximation to P of theta.",
    "start": "3228710",
    "end": "3235290"
  },
  {
    "text": "So that's E to the minus theta\nsquared over 2 sigma squared. And this t minus tau is\nbasically the integral.",
    "start": "3235290",
    "end": "3243110"
  },
  {
    "text": "So this now is-- now we\nhave an analytical formula for the output of\nour integrator.",
    "start": "3243110",
    "end": "3248840"
  },
  {
    "text": "And then, remember, as soon\nas this i crosses a threshold, that's where we\ndeclare a detection.",
    "start": "3248840",
    "end": "3255240"
  },
  {
    "text": "So when your i of\nt and some tau hat equals the threshold\nthat we call big T,",
    "start": "3255240",
    "end": "3261620"
  },
  {
    "text": "that is the time of\narrival, basically, for us.",
    "start": "3261620",
    "end": "3266670"
  },
  {
    "text": "So then we just use this\nexpression here for i. And we solve for\nour estimate tau",
    "start": "3266670",
    "end": "3273799"
  },
  {
    "text": "hat of the round-trip delay. And this is what you get. So your tau hat is\nthe true ground truth",
    "start": "3273800",
    "end": "3280849"
  },
  {
    "text": "tau plus this error term. That's your estimation error. And as you see, it depends\non a bunch of things.",
    "start": "3280850",
    "end": "3289640"
  },
  {
    "text": "It of course depends\non your threshold. And it seems like,\nOK, this tells me",
    "start": "3289640",
    "end": "3295070"
  },
  {
    "text": "if I want a low\nestimation error, I should choose a threshold\nthat's low enough.",
    "start": "3295070",
    "end": "3301010"
  },
  {
    "text": "Why not even set it to 0? Why not? Set it to 0.",
    "start": "3301010",
    "end": "3306210"
  },
  {
    "text": "Airtime goes away. Everybody happy. Tau hat equals tau. Why not do that? ",
    "start": "3306210",
    "end": "3316450"
  },
  {
    "text": "Well, because\nthere's always noise. So the output of your integrator\nis always greater than 0",
    "start": "3316450",
    "end": "3324460"
  },
  {
    "text": "because even when you\nhaven't received any echo, there's noises, and a\nlittle bit of interferences,",
    "start": "3324460",
    "end": "3329650"
  },
  {
    "text": "and other effects. So, I mean, the picture\nwe are looking at here, everything looks nice and ideal.",
    "start": "3329650",
    "end": "3336010"
  },
  {
    "text": "But you can never\nhave a 0 threshold because if you set\nyour threshold too low, any bit of noise, a\nspike, or something",
    "start": "3336010",
    "end": "3343240"
  },
  {
    "text": "that is randomly\ngenerated in the system, causes that output to go to 0. So you're going to get a\nton of false positives,",
    "start": "3343240",
    "end": "3349270"
  },
  {
    "text": "basically, if you set your\ndetection threshold to 0. So bad idea. We don't want to\nmess with T too much.",
    "start": "3349270",
    "end": "3355150"
  },
  {
    "text": "You usually even set\nit a bit conservatively to limit your false positives. What else? P0, we want large.",
    "start": "3355150",
    "end": "3362380"
  },
  {
    "text": "And P0 is basically a measure of\nthe amount of echo you get back",
    "start": "3362380",
    "end": "3368553"
  },
  {
    "text": "from the target. So stronger targets are good. Those give you big P0's. Closer targets are good.",
    "start": "3368553",
    "end": "3374740"
  },
  {
    "text": "Those give you big P0. But it's not really\na design parameter. It is what it is\naccording to the distance",
    "start": "3374740",
    "end": "3381250"
  },
  {
    "text": "and the acoustic\nreflectivity of the target. And then you have this\nreally, really, really concerning term here.",
    "start": "3381250",
    "end": "3387170"
  },
  {
    "text": "And as you see, your error is\nexponential in theta squared.",
    "start": "3387170",
    "end": "3393020"
  },
  {
    "text": "So as you make your angle of\narrival larger and larger, this error term can\nreally, really blow up.",
    "start": "3393020",
    "end": "3399710"
  },
  {
    "text": "And that's actually what\nhappens when you do that.",
    "start": "3399710",
    "end": "3405849"
  },
  {
    "text": "Instead of thinking\nin terms of the tau, if you want to actually think\nin terms of the range error",
    "start": "3405850",
    "end": "3412089"
  },
  {
    "text": "that you make in\nmeters, for instance, we can convert that to\nrange with the simple--",
    "start": "3412090",
    "end": "3418795"
  },
  {
    "text": "our time-of-flight conversion. So delta rho is the error\nthat you make in ranging.",
    "start": "3418795",
    "end": "3424150"
  },
  {
    "text": "And that would be speed\nof sound times delta tau, your estimate of the\nround-trip time of flight",
    "start": "3424150",
    "end": "3432340"
  },
  {
    "text": "minus the actual time\nof flight times 2. And then we plug in our\nexpression for tau hat.",
    "start": "3432340",
    "end": "3438130"
  },
  {
    "text": "This is what we get. So the range error in meters\nis given by this expression.",
    "start": "3438130",
    "end": "3444100"
  },
  {
    "text": "The theta dependency\nis the same. So it depends on the\ne to the theta squared",
    "start": "3444100",
    "end": "3449650"
  },
  {
    "text": "over 2 sigma squared. So if we plot this, we'll\nsee it can be really, really",
    "start": "3449650",
    "end": "3459250"
  },
  {
    "text": "a big issue in certain cases. So what we are\nplotting here, we are looking at the ranging\nerror, the error in the range",
    "start": "3459250",
    "end": "3467860"
  },
  {
    "text": "estimate, as a function of the\nbearing angle of the target. We're looking at two\ndifferent targets.",
    "start": "3467860",
    "end": "3474830"
  },
  {
    "text": "One is target of very high\nacoustic reflectivity, like a wall. The other one is a target with\nvery low acoustic reflectivity,",
    "start": "3474830",
    "end": "3482200"
  },
  {
    "text": "like a thin pole, for instance. And both are at the same range.",
    "start": "3482200",
    "end": "3487730"
  },
  {
    "text": "So we are fixing\nrho at 1.5 meters. And you're just changing\nthe angle of the targets.",
    "start": "3487730",
    "end": "3493930"
  },
  {
    "text": "So the difference is one of the\ntargets has a very large P0. And that's the\nwall, for instance.",
    "start": "3493930",
    "end": "3499660"
  },
  {
    "text": "And one of them has a very\nsmall P0, which is the pole. That's the reflectivity\nof the target.",
    "start": "3499660",
    "end": "3504970"
  },
  {
    "text": "And then we look at the\narea as a function of theta. And if you look at\nthe one for the pole,",
    "start": "3504970",
    "end": "3511119"
  },
  {
    "text": "even for a 10-degree\nangle of arrival, you can be a meter off in\nyour range estimate for 15,",
    "start": "3511120",
    "end": "3520600"
  },
  {
    "text": "for 12 degrees. I mean, this thing\nblows exponentially. So 15 degrees, it can\nbe many, many meters.",
    "start": "3520600",
    "end": "3527920"
  },
  {
    "text": "So that can be a big, big issue. For targets that have a high\nreflectivity is not as bad.",
    "start": "3527920",
    "end": "3534280"
  },
  {
    "text": "And again, why is it not as bad? Because this 1 over P0\nterm in the error term.",
    "start": "3534280",
    "end": "3539750"
  },
  {
    "text": "So if your P0 is\nlarge, that really limits your arranging error. And that's why for a wall,\nit can be at 15 degrees,",
    "start": "3539750",
    "end": "3547480"
  },
  {
    "text": "and you still estimate the\nrange pretty much correctly. And it's really beyond\n20 degrees that your--",
    "start": "3547480",
    "end": "3554500"
  },
  {
    "text": "or beyond 15 degrees that your\nerrors for a very strong target start to blow up as\na function of angle.",
    "start": "3554500",
    "end": "3561490"
  },
  {
    "text": "So again, we did all\nthis analysis just to show you the simple\nthreshold-based ranging works,",
    "start": "3561490",
    "end": "3568300"
  },
  {
    "text": "but it has very\nsignificant drawbacks. So if you're working\non an application where you need accurate\nranging, accurate mapping,",
    "start": "3568300",
    "end": "3576339"
  },
  {
    "text": "you don't want to\ndo this probably. This is not the best\nalgorithm to work with. Any questions?",
    "start": "3576340",
    "end": "3584079"
  },
  {
    "text": "All right. So the second type\nof algorithm you could use for a\npulse-echo sonar is",
    "start": "3584080",
    "end": "3595330"
  },
  {
    "text": "doing matched filter ranging. So let's just remind\nourselves when we were talking\nabout the GPS, we",
    "start": "3595330",
    "end": "3603790"
  },
  {
    "text": "did this very general\nderivation, if you remember, that we said, if you have\nsome transmitter that",
    "start": "3603790",
    "end": "3611320"
  },
  {
    "text": "is transmitting\nsome signal x of t, and then you have\na receiver that",
    "start": "3611320",
    "end": "3617230"
  },
  {
    "text": "receives some attenuated and\ndelayed version of x of t, like alpha times\nx of t minus tau,",
    "start": "3617230",
    "end": "3624700"
  },
  {
    "text": "and you want to estimate tau,\nand if you set your, basically,",
    "start": "3624700",
    "end": "3632260"
  },
  {
    "text": "criteria as minimizing\nthe mean squared error in your estimation of tau,\nthen the optimal detector",
    "start": "3632260",
    "end": "3639640"
  },
  {
    "text": "is what we call\na matched filter. And what a matched\nfilter does is that it takes a correlation\nof your received",
    "start": "3639640",
    "end": "3646520"
  },
  {
    "text": "waveform with a copy of\nthe transmitted waveform. You evaluate the correlation.",
    "start": "3646520",
    "end": "3653020"
  },
  {
    "text": "You look. You find the peak. And where that peak happens is\nyour minimum mean squared error",
    "start": "3653020",
    "end": "3659350"
  },
  {
    "text": "estimate of the\ntime-of-flight delay. Exact same thing you\ncan do for sonar,",
    "start": "3659350",
    "end": "3665020"
  },
  {
    "text": "except now your transmitter\nand receiver are colocated. And your tau is the\nround-trip delay",
    "start": "3665020",
    "end": "3670990"
  },
  {
    "text": "instead of the one-way delay\nbetween the transmitter and the receiver. But the exact same thing. So you receive\nsome echo waveform.",
    "start": "3670990",
    "end": "3679480"
  },
  {
    "text": "And because you\ntransmitted it yourself, you know what waveform it is. So you can also generate\na local replica of it,",
    "start": "3679480",
    "end": "3686890"
  },
  {
    "text": "correlate the two, and then find\nthe peak in your correlation, which is the Arg max of\nthe correlation squared",
    "start": "3686890",
    "end": "3694390"
  },
  {
    "text": "or the absolute value\nof the correlation. And then that gives you your\nround-trip time-of-flight",
    "start": "3694390",
    "end": "3699700"
  },
  {
    "text": "estimate. Exact same, again,\nmath and principle as what we did in GPS.",
    "start": "3699700",
    "end": "3705099"
  },
  {
    "text": "So I'm not going to spend\ntoo much time on it. Again, f sub s is your\nADC sampling rate.",
    "start": "3705100",
    "end": "3710920"
  },
  {
    "text": "And n hat tau is the\ndiscretized index corresponding",
    "start": "3710920",
    "end": "3715990"
  },
  {
    "text": "to your actual time of flight. So it's the floor of tau\nover T sub s, where T sub s is the sampling interval.",
    "start": "3715990",
    "end": "3723829"
  },
  {
    "text": "And again, we all know\nthat the correlation is given by this, basically,\nlinear filter here.",
    "start": "3723830",
    "end": "3732430"
  },
  {
    "text": "Here I think I'm dropping\na constant factor here, like that 1 over k thing. I've just dropped it\nbecause it doesn't matter.",
    "start": "3732430",
    "end": "3739309"
  },
  {
    "text": "You're just looking for a peak. You don't need to\nreally include that. But that's what it is. Now, this works much,\nmuch, much better",
    "start": "3739310",
    "end": "3747910"
  },
  {
    "text": "than a simple\nthreshold-based detector.",
    "start": "3747910",
    "end": "3753579"
  },
  {
    "text": "Of course, it needs\nmore complex processing. But, I mean, it's a filter.",
    "start": "3753580",
    "end": "3759700"
  },
  {
    "text": "I mean, these days, any\neven tiny microprocessor can handle these\ntypes of calculations.",
    "start": "3759700",
    "end": "3768700"
  },
  {
    "text": "One thing that is a source\nof error for-- so this is, for instance, it's unbiased.",
    "start": "3768700",
    "end": "3774280"
  },
  {
    "text": "It's much, much less sensitive\nto the angle of arrival or the range of your target.",
    "start": "3774280",
    "end": "3780715"
  },
  {
    "text": "It doesn't have\nall those drawbacks of simple threshold based. But note that one thing that\nstill is a source of error,",
    "start": "3780715",
    "end": "3788079"
  },
  {
    "text": "even with the\nmatch filtering, is that because of the\nphysics of acoustic waves,",
    "start": "3788080",
    "end": "3794560"
  },
  {
    "text": "your waves get distorted-- the\nechoes that you receive back get distorted according to, for\ninstance, the angle of arrival.",
    "start": "3794560",
    "end": "3802540"
  },
  {
    "text": "So the waveform that you\nreceive in some cases doesn't perfectly match\nwhat you transmitted.",
    "start": "3802540",
    "end": "3810050"
  },
  {
    "text": "So there can be a little bit\nof distortion between the two, which degrades the quality\nof the correlation.",
    "start": "3810050",
    "end": "3815780"
  },
  {
    "text": "If the two waveforms\nare not perfect matches, your correlation can degrade.",
    "start": "3815780",
    "end": "3821140"
  },
  {
    "text": "So your peak can\nbe a little weaker. Nevertheless, this\nworks beautifully.",
    "start": "3821140",
    "end": "3826750"
  },
  {
    "text": "And as exactly was the\ncase for GPS, the ideal--",
    "start": "3826750",
    "end": "3831790"
  },
  {
    "text": "if you want to use this\nscheme of match filtering, the ideal waveforms\nto transmit are",
    "start": "3831790",
    "end": "3837430"
  },
  {
    "text": "going to be waveforms that have\ngood correlation properties.",
    "start": "3837430",
    "end": "3842619"
  },
  {
    "text": "So in the case of GPS, we saw M\nsequences were very desirable.",
    "start": "3842620",
    "end": "3848950"
  },
  {
    "text": "It turns out that for sonar,\nM sequences are overkill. I mean, these sequences\ncan be very long.",
    "start": "3848950",
    "end": "3854080"
  },
  {
    "text": "And, I mean, they are good for\nvery long-distance ranging. Sonar, you just need\nto do a few meters.",
    "start": "3854080",
    "end": "3861589"
  },
  {
    "text": "So there are some much\nsimpler codes that exist that are used in sonar. Same principle.",
    "start": "3861590",
    "end": "3867019"
  },
  {
    "text": "These are just waveforms\nwith good autocorrelation properties. But for instance,\nBarker codes are",
    "start": "3867020",
    "end": "3872890"
  },
  {
    "text": "type of ranging codes\nthat are common in sonar. They operate, again, in the\nsame way as M sequences.",
    "start": "3872890",
    "end": "3879340"
  },
  {
    "text": "They're just shorter\nduration and more proper for\nshort-distance ranging.",
    "start": "3879340",
    "end": "3887320"
  },
  {
    "text": "This should be very\nfamiliar, how you do your matched filter ranging. And you receive your echo.",
    "start": "3887320",
    "end": "3892420"
  },
  {
    "text": "You pass it through\na correlator. You correlate it with your\nlocal replica of the waveform",
    "start": "3892420",
    "end": "3898150"
  },
  {
    "text": "that you have transmitted. You get your correlation out. And then you square it.",
    "start": "3898150",
    "end": "3903410"
  },
  {
    "text": "You take your absolute value. You find the peak and the index\ncorresponding to that peak.",
    "start": "3903410",
    "end": "3908950"
  },
  {
    "text": "That is the discretized\nindex for your tau. And then you do\nyour tau hat, which",
    "start": "3908950",
    "end": "3915220"
  },
  {
    "text": "is basically n hat tau times\nyour sampling interval Ts.",
    "start": "3915220",
    "end": "3920950"
  },
  {
    "text": "And then you convert tau hat to\nrho hat, which is your range. So that's how it works.",
    "start": "3920950",
    "end": "3927730"
  },
  {
    "text": "And again, most common\ntype of codes that are used",
    "start": "3927730",
    "end": "3933369"
  },
  {
    "text": "or waveforms that are used\nfor this type of sonar, they're called\nBarker codes, which are signals with good\ncorrelation properties.",
    "start": "3933370",
    "end": "3939520"
  },
  {
    "text": "Yes. Why doesn't wideband\nwaveforms [INAUDIBLE]??",
    "start": "3939520",
    "end": "3946494"
  },
  {
    "text": "Oh, this down here? Wideband waveforms? So maybe I should have\nwritten it the other way.",
    "start": "3946494",
    "end": "3953690"
  },
  {
    "text": "So waveforms with good\nautocorrelation are desirable. We agree with that. They just turn out\nto be wideband.",
    "start": "3953690",
    "end": "3961670"
  },
  {
    "text": "Signals that have good\ncorrelation properties, they always tend to\nbe wideband signals. So that's why this\nis written that way.",
    "start": "3961670",
    "end": "3969690"
  },
  {
    "text": "Questions? Yes. It isn't also affected\nby the angle tau?",
    "start": "3969690",
    "end": "3977045"
  },
  {
    "text": "How is the performance\naffected by? Not as bad as the thresholding. So the question is,\nis this technique-",
    "start": "3977045",
    "end": "3982910"
  },
  {
    "text": "is matched filter ranging also--\ndoes it degrade with angle of arrival? A little bit.",
    "start": "3982910",
    "end": "3988640"
  },
  {
    "text": "Not as bad,\nexponentially blowing up, like the threshold based. And the reason it\ndegrades a little bit",
    "start": "3988640",
    "end": "3995119"
  },
  {
    "text": "is because there is some\ndistortion in the waveforms that are angle dependent. So at steep angles of arrivals,\nthe echo that you receive back,",
    "start": "3995120",
    "end": "4004150"
  },
  {
    "text": "the waveform has some\ndistortion in it. And that degrades the\nquality of the correlation.",
    "start": "4004150",
    "end": "4009170"
  },
  {
    "text": "So essentially,\ninstead of-- if you look at your absolute\nvalue of Rp times p hat,",
    "start": "4009170",
    "end": "4018880"
  },
  {
    "text": "for small angles of arrivals, it\ncan give you a very sharp peak.",
    "start": "4018880",
    "end": "4024970"
  },
  {
    "text": "And then when your angle\nof arrival is larger, the peak can be a little--",
    "start": "4024970",
    "end": "4031600"
  },
  {
    "text": "not as tall or not as sharp. But still, it's\nnot like the area is going to blow\nup, like the case",
    "start": "4031600",
    "end": "4037420"
  },
  {
    "text": "of threshold-based ranging. So this is still a much, much\nbetter way of doing ranging.",
    "start": "4037420",
    "end": "4046450"
  },
  {
    "text": "So this was for\npulse-echo sonar. Now we want to talk about the\nsecond category of waveforms,",
    "start": "4046450",
    "end": "4054280"
  },
  {
    "text": "which were these\ncontinuous waveforms that are used for sonar ranging.",
    "start": "4054280",
    "end": "4059430"
  },
  {
    "text": "So specifically, as\nwe said, the waveforms that are used in CTFM sonar\nare frequency modulated.",
    "start": "4059430",
    "end": "4067990"
  },
  {
    "text": "And there's a very, very\ninteresting, clever type of frequency modulation that\nis used in these waveforms.",
    "start": "4067990",
    "end": "4074290"
  },
  {
    "text": "And they are called\nlinear frequency chirps. So what the signal\nwaveform looks",
    "start": "4074290",
    "end": "4080560"
  },
  {
    "text": "like that a CTFM system sends-- let's call it s of t.",
    "start": "4080560",
    "end": "4087010"
  },
  {
    "text": "And it has this very\nsimple expression-- e to the j2 pi f0 plus\nbt over 2 times t.",
    "start": "4087010",
    "end": "4095620"
  },
  {
    "text": "So let's break this down. So you have some start\nfrequency f0 of your waveform.",
    "start": "4095620",
    "end": "4102489"
  },
  {
    "text": "And then this b here is a\nconstant called the slow rate.",
    "start": "4102490",
    "end": "4107960"
  },
  {
    "text": "So what this is-- let me clean this\nup a little bit. And let's call this\nterm here everything.",
    "start": "4107960",
    "end": "4117729"
  },
  {
    "text": "It's a phase term. So let's call that phi of t. So my s of t is equal\nto e to the j5t.",
    "start": "4117729",
    "end": "4127660"
  },
  {
    "text": "Now let's find the instantaneous\nfrequency of the signal s of t. By definition, the instantaneous\nfrequency of a signal--",
    "start": "4127660",
    "end": "4135040"
  },
  {
    "text": "let's called that f-- is equal to the 1 over 2\npi times the derivative",
    "start": "4135040",
    "end": "4140290"
  },
  {
    "text": "of its phase. That's the definition of\nthe instantaneous frequency. So it's 1 over 2 pi d phi dt.",
    "start": "4140290",
    "end": "4149130"
  },
  {
    "text": "So for instance, if phi of t-- if my s was simply\ne to the j2 pi f0t,",
    "start": "4149130",
    "end": "4156750"
  },
  {
    "text": "then according to\nthis formula here, its instantaneous\nfrequency would be just f0,",
    "start": "4156750",
    "end": "4162299"
  },
  {
    "text": "which we know is true. This is a slightly more\ncomplicated, but not too bad.",
    "start": "4162300",
    "end": "4168660"
  },
  {
    "text": "We can take the derivative\ntogether of that phi. What it gives you--\nafter dividing by 2 pi,",
    "start": "4168660",
    "end": "4174479"
  },
  {
    "text": "it gives you an f--\nso there's a 2 pi f0t. The derivative of that\ndivided by 2 pi is just f0.",
    "start": "4174479",
    "end": "4181380"
  },
  {
    "text": "And then you have a 2 pi\ntimes bt squared over 2.",
    "start": "4181380",
    "end": "4186812"
  },
  {
    "text": "And then you take the\nderivative of that. And then that gives\nyou a plus bt. ",
    "start": "4186812",
    "end": "4193549"
  },
  {
    "text": "So your frequency, you\nsee it starts at f0,",
    "start": "4193550",
    "end": "4198619"
  },
  {
    "text": "and it linearly goes up or\ndown according to what b is, positive or negative, over time.",
    "start": "4198620",
    "end": "4204690"
  },
  {
    "text": "That's why it's called a\nlinear frequency chirp. Graphically, they\nlook like this. So a transmitted waveform.",
    "start": "4204690",
    "end": "4211290"
  },
  {
    "text": "So this is for a positive\nb, what I've plotted here. So you start at some frequency.",
    "start": "4211290",
    "end": "4216990"
  },
  {
    "text": "And as time goes by, you see\nthe frequency is going up. The oscillations are faster\ntowards the end of the chirp",
    "start": "4216990",
    "end": "4223429"
  },
  {
    "text": "compared to the beginning of it. And you do that for\nsome time duration",
    "start": "4223430",
    "end": "4229670"
  },
  {
    "text": "T, which is your big T,\nwhich is your chirp duration. And then you send another one.",
    "start": "4229670",
    "end": "4235040"
  },
  {
    "text": "So you send a chirp,\nanother chirp. And all of these\nare the exact same. But the point is you're\ncontinuously transmitting.",
    "start": "4235040",
    "end": "4242180"
  },
  {
    "text": "There is no dead time. There's no stop time or silence\ntime for your transmitter.",
    "start": "4242180",
    "end": "4249199"
  },
  {
    "text": "Another way of visualizing\nthis, which is perhaps more intuitive, is if you plot\nthe instantaneous frequency",
    "start": "4249200",
    "end": "4257420"
  },
  {
    "text": "of your signal as a function of\ntime, it has this linear ramp. So at time 0, it starts at\nsome f0 frequency, goes up",
    "start": "4257420",
    "end": "4265580"
  },
  {
    "text": "with a slope of b. So you get to f0 plus\nb times T, where big T is the chirp duration.",
    "start": "4265580",
    "end": "4271490"
  },
  {
    "text": "And then you repeat. Again, you drop back to\nf0, go up, and so on. So you send these\nsawtooth-like frequency chirps",
    "start": "4271490",
    "end": "4279409"
  },
  {
    "text": "as a function of time. So how do we do\nranging with this?",
    "start": "4279410",
    "end": "4286200"
  },
  {
    "text": "So the echo that you\nreceive is always just a time-delayed version\nof what you transmit.",
    "start": "4286200",
    "end": "4294150"
  },
  {
    "text": "It also depends on angle\nof arrival and range, its amplitude. But here, we are focusing\non that time of flight.",
    "start": "4294150",
    "end": "4301840"
  },
  {
    "text": "So the P echo received, we can\nwrite-- we can break it down into two terms. If s of t is that chirp\nwaveform that we transmit,",
    "start": "4301840",
    "end": "4310769"
  },
  {
    "text": "your received echo\nhas some angle and range dependency\ntimes s of t minus tau.",
    "start": "4310770",
    "end": "4317820"
  },
  {
    "text": "So if we look at the\nreceived echo and compare",
    "start": "4317820",
    "end": "4326579"
  },
  {
    "text": "that to what we transmit--\nlet's look at this picture down here first because I\nthink that's very intuitive. So there's two\nthings plotted here.",
    "start": "4326580",
    "end": "4332880"
  },
  {
    "text": "The green is-- again--\nthat's instantaneous frequency versus time\nfor what we transmit.",
    "start": "4332880",
    "end": "4339420"
  },
  {
    "text": "It's just a ramp. And then the echo that\nyou receive, that's also--",
    "start": "4339420",
    "end": "4344577"
  },
  {
    "text": "I mean, it's the same waveform. It's just delayed. So some round-trip time of\nflight has passed, some tau.",
    "start": "4344578",
    "end": "4350460"
  },
  {
    "text": "And then you receive your echo. And the echo is the exact same-- in terms of\ninstantaneous frequency,",
    "start": "4350460",
    "end": "4356460"
  },
  {
    "text": "it's going to have the\nexact same behavior. It's a linear frequency chirp\nthat is just delayed in time.",
    "start": "4356460",
    "end": "4362220"
  },
  {
    "text": "That's the echo\nthat you receive. So here, there's this very\ninteresting relationship between your transmitted pulse\nand the echo that you receive,",
    "start": "4362220",
    "end": "4370750"
  },
  {
    "text": "which is if you compare\nthe instantaneous frequency of the two, it's\ngoing to be constant.",
    "start": "4370750",
    "end": "4376890"
  },
  {
    "text": "This delta f here,\nas we call it, it's constant between the two. And it's equal to the slew rate\nb times the round-trip time",
    "start": "4376890",
    "end": "4386070"
  },
  {
    "text": "of flight tau. And we know tau is directly\nproportional to range.",
    "start": "4386070",
    "end": "4391290"
  },
  {
    "text": "So we know the round-trip\ndelay is just 2 who over v. So",
    "start": "4391290",
    "end": "4397740"
  },
  {
    "text": "if you plug that in, you\nsee that the difference in the instantaneous\nfrequency of what you transmit",
    "start": "4397740",
    "end": "4403680"
  },
  {
    "text": "and the echo that you receive is\ndirectly proportional to range.",
    "start": "4403680",
    "end": "4409800"
  },
  {
    "text": "b is known. b is the\nslew rate that we choose, and we use, and we know.",
    "start": "4409800",
    "end": "4414989"
  },
  {
    "text": "v is the speed of sound. And if you measure\nthis delta f, which",
    "start": "4414990",
    "end": "4420450"
  },
  {
    "text": "is the difference in the\ninstantaneous frequency of the transmitted and received\nwaves, then we can do ranging.",
    "start": "4420450",
    "end": "4426989"
  },
  {
    "text": "So the beauty of this technique\nis that it kind of transforms",
    "start": "4426990",
    "end": "4432960"
  },
  {
    "text": "a time estimation problem,\na time-of-flight estimation problem, to a frequency\nestimation problem.",
    "start": "4432960",
    "end": "4439500"
  },
  {
    "text": "Now, by finding this\nfrequency, delta f, you can convert that to time. And you can convert\ntime to distance.",
    "start": "4439500",
    "end": "4447420"
  },
  {
    "text": "And as you might know,\nfrequency estimation, it's a problem that\nhas been studied for many, many, many\nyears in statistics",
    "start": "4447420",
    "end": "4454950"
  },
  {
    "text": "and electrical engineering. So there are hundreds\nof different interesting techniques for\nfrequency estimation.",
    "start": "4454950",
    "end": "4461640"
  },
  {
    "text": "And all of those are now\napplicable to sensing just by this little\ntrick of designing",
    "start": "4461640",
    "end": "4466680"
  },
  {
    "text": "a very interesting waveform. Is the concept of CTFM\nclear how it operates?",
    "start": "4466680",
    "end": "4473530"
  },
  {
    "text": "So now we just need to figure\nout, how do we extract-- so we have our\ntransmitted waveform.",
    "start": "4473530",
    "end": "4478740"
  },
  {
    "text": "We have a received waveform. How do we extract this delta f? If we can do it, just that\npiece, figure that out,",
    "start": "4478740",
    "end": "4485550"
  },
  {
    "text": "then I think we are\non to something. Yes. I'm slightly confused\non the blind time",
    "start": "4485550",
    "end": "4491880"
  },
  {
    "text": "because isn't that usually-- the periodicity of how\nlong you're sending,",
    "start": "4491880",
    "end": "4498030"
  },
  {
    "text": "isn't T usually equal\nto the 2 rho max over v? ",
    "start": "4498030",
    "end": "4507260"
  },
  {
    "text": "Oh, I see what-- you're talking\nabout this T, right? OK. Let me first talk\nbriefly about blind time",
    "start": "4507260",
    "end": "4515930"
  },
  {
    "text": "because I didn't\ntalk about it yet. And then I will get\nto your question. So there is always\nthis blind time.",
    "start": "4515930",
    "end": "4522350"
  },
  {
    "text": "And that's a bit of time\nwhere you receive the echo, or the tail of it, basically,\noverlaps with the next chirp",
    "start": "4522350",
    "end": "4530780"
  },
  {
    "text": "that you're sending. And this is a\nsource of confusion. It's kind of like\nin the case of pulse",
    "start": "4530780",
    "end": "4538100"
  },
  {
    "text": "echo, the question\nthat I had, which was if your echo\nthat you're receiving",
    "start": "4538100",
    "end": "4544370"
  },
  {
    "text": "is after you have\ntransmitted your next pulse, then you can't do ranging. So this portion\nis always ignored.",
    "start": "4544370",
    "end": "4553040"
  },
  {
    "text": "Or sometimes, a bit\nof a dead time is-- a bit of idle time is added\nbetween transmitting two chirps",
    "start": "4553040",
    "end": "4560750"
  },
  {
    "text": "so this doesn't happen. But then question. You said, isn't T chosen\nto be 2 rho max over v?",
    "start": "4560750",
    "end": "4572450"
  },
  {
    "text": "Well, that was the case for\npulse echo, not for CTFM. So actually, for CTFM,\nyou want to choose your T",
    "start": "4572450",
    "end": "4580040"
  },
  {
    "text": "to be much bigger than 2 rho\nmax over v. So in comparison,",
    "start": "4580040",
    "end": "4586680"
  },
  {
    "text": "this portion is\nactually negligible. And you can just throw out\nthat part of the signal and only work with\nthe piece where",
    "start": "4586680",
    "end": "4593070"
  },
  {
    "text": "you know the signal is good. So that's the case.",
    "start": "4593070",
    "end": "4599440"
  },
  {
    "text": "So in terms of the system\nblock diagram of a CTFM sonar,",
    "start": "4599440",
    "end": "4606030"
  },
  {
    "text": "this is it. Most of it is familiar. On the transmit side, again,\nyou have your local oscillator.",
    "start": "4606030",
    "end": "4611040"
  },
  {
    "text": "You have your\nwaveform generator, which now generates these\nfrequency chirps for you. It does this from f0\nto f0 plus b times T.",
    "start": "4611040",
    "end": "4621480"
  },
  {
    "text": "It continuously just does that. You amplify it. You might or might not have\nyour transformer in the path.",
    "start": "4621480",
    "end": "4628500"
  },
  {
    "text": "One big difference here is that\nbecause you're continuously transmitting in CTFM, you\ncan't use the same transducer",
    "start": "4628500",
    "end": "4637284"
  },
  {
    "text": "as transmitter and\nreceiver, because it will interfere with itself. It wouldn't know, what's the\npart that I was transmitting?",
    "start": "4637285",
    "end": "4643040"
  },
  {
    "text": "What's the part I'm receiving? So usually, you have a\nseparate receiver transducer.",
    "start": "4643040",
    "end": "4648660"
  },
  {
    "text": "And you have your\nseparate transmitter. The transmitter is\nalways transmitting. The receiver is\nalways receiving.",
    "start": "4648660",
    "end": "4655610"
  },
  {
    "text": "Received signal, as usual, you\npass it through an amplifier. Let's say it has some\ngain constant gain mu.",
    "start": "4655610",
    "end": "4661230"
  },
  {
    "text": "And the magic really happens\nhere at this block here.",
    "start": "4661230",
    "end": "4666330"
  },
  {
    "text": "This is the block that\nextracts that delta f for you, basically.",
    "start": "4666330",
    "end": "4671639"
  },
  {
    "text": "And it's actually a very\nsimple mathematical operation. It turns out that it's\njust a multiplication.",
    "start": "4671640",
    "end": "4676710"
  },
  {
    "text": "It's also called a mixer\nor a downconverter. ",
    "start": "4676710",
    "end": "4685480"
  },
  {
    "text": "So we'll see the\nexact math behind it. But then out of this-- so you\nhave to feed it two things.",
    "start": "4685480",
    "end": "4690970"
  },
  {
    "text": "It needs to have your\ntransmitted waveform or chirp.",
    "start": "4690970",
    "end": "4696380"
  },
  {
    "text": "And it also needs\nyour received echo because it needs to\nextract the difference in the instantaneous\nfrequency of those two.",
    "start": "4696380",
    "end": "4703490"
  },
  {
    "text": "So if this is done right-- then this is what we call s\nsub IF, IF for Intermediate Frequency-- this should be\na signal whose frequency is",
    "start": "4703490",
    "end": "4712670"
  },
  {
    "text": "that delta f, which is\nproportional to the time of flight tau if\nthat's done right.",
    "start": "4712670",
    "end": "4718820"
  },
  {
    "text": "And then you filter that. You take that through the ADC. And then you can do rate, and\nranging, and bearing estimation",
    "start": "4718820",
    "end": "4726800"
  },
  {
    "text": "in the digital domain. Let's see. How much time do we have?",
    "start": "4726800",
    "end": "4731917"
  },
  {
    "text": "Should we go through this? No. We're almost out of time. So we'll look at\nthe math next time. But it's very simple.",
    "start": "4731917",
    "end": "4737600"
  },
  {
    "text": "It's just a complex\nmultiplication. And it extracts that\ndelta f for you. But this is a good\nplace to stop.",
    "start": "4737600",
    "end": "4742940"
  },
  {
    "text": "And then we'll finish\nthe discussion next time. Any questions?",
    "start": "4742940",
    "end": "4748079"
  },
  {
    "text": "No. All right. ",
    "start": "4748080",
    "end": "4755000"
  }
]