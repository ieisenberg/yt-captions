[
  {
    "text": " So let's do a quick review of\nthe previous lecture as usual.",
    "start": "0",
    "end": "9920"
  },
  {
    "text": "So last time we kind of started\ngoing into the details of sonar",
    "start": "9920",
    "end": "16880"
  },
  {
    "text": "in terms of the different types\nof sonar systems for robotics of course.",
    "start": "16880",
    "end": "22630"
  },
  {
    "text": "And then we kind of did a\ntaxonomy of sonar if you will.",
    "start": "22630",
    "end": "28769"
  },
  {
    "text": "So starting with what\ntype of waveforms these systems use for sensing,\nthe breakdown is pretty clear.",
    "start": "28770",
    "end": "38190"
  },
  {
    "text": "So either your system\nsends short pulses, and there's kind of like\na silent time between two",
    "start": "38190",
    "end": "45470"
  },
  {
    "text": "consecutive pulses,\nand during that time it basically is hearing\nback for the echoes",
    "start": "45470",
    "end": "50930"
  },
  {
    "text": "from the environment. Or it is continuous. So that would be a pulse echo\nsonar or ultrasonic sensor.",
    "start": "50930",
    "end": "57320"
  },
  {
    "text": "Or it's continuously\ntransmitting signals. And so there is no\nsilence time basically.",
    "start": "57320",
    "end": "64619"
  },
  {
    "text": "It's continuously transmitting. And that's a continuous\ntransmission frequency",
    "start": "64620",
    "end": "70170"
  },
  {
    "text": "modulated or CTFM sonar. Also called FMCW\nsonar, frequency",
    "start": "70170",
    "end": "78030"
  },
  {
    "text": "modulated continuous wave. This term FMCW is less\nused in sonar terminology,",
    "start": "78030",
    "end": "85650"
  },
  {
    "text": "mostly it's called CTFM. But when we talk\nabout radar you would see that there is systems of\nbasically the exact same type",
    "start": "85650",
    "end": "93689"
  },
  {
    "text": "of architecture in radar,\nand those are called FMCW. So that's why I included so\nyou kind of start identifying",
    "start": "93690",
    "end": "101850"
  },
  {
    "text": "these different fields\nuse different terms, they are the same type\nof systems or principle",
    "start": "101850",
    "end": "107369"
  },
  {
    "text": "of operation. Then we looked in\ndetail at pulse echo sonar in terms of what\ntypes of pulse waveforms",
    "start": "107370",
    "end": "116460"
  },
  {
    "text": "they use. There's many, many\ndifferent pulses. So there's no standard table\nof just a few pulses that are.",
    "start": "116460",
    "end": "124890"
  },
  {
    "text": "Used every sensor\nmanufacturer they kind of come up with their\nown version of pulses.",
    "start": "124890",
    "end": "132030"
  },
  {
    "text": "You can also design your own. So we looked at a few. But the big divide\nhere is either they're narrowband pulses.",
    "start": "132030",
    "end": "138930"
  },
  {
    "text": "So those are basically kind\nof like a pure sinusoid with some amplitude\nenvelope applied to them.",
    "start": "138930",
    "end": "145590"
  },
  {
    "text": "Or they're wideband pulses,\nwhich are typically much, much shorter and then they take\nup more spectral bandwidth",
    "start": "145590",
    "end": "154140"
  },
  {
    "text": "in basically in the\nfrequency domain. And then in terms\nof how you detect",
    "start": "154140",
    "end": "161940"
  },
  {
    "text": "range, the ranging algorithms\nfor pulse echo sonar, we also looked at two\nmain types of algorithms.",
    "start": "161940",
    "end": "169152"
  },
  {
    "text": "The first one was\na threshold based ranging which basically you\njust rectify and integrate your received echo.",
    "start": "169152",
    "end": "175020"
  },
  {
    "text": "And as soon as the\noutput of your integrator passes a predetermined\nthreshold,",
    "start": "175020",
    "end": "180450"
  },
  {
    "text": "you declare a detection. Very, very simple algorithm. It can even be fully\nimplemented in analog.",
    "start": "180450",
    "end": "186659"
  },
  {
    "text": "So you might not even need\nto use an ADC and a DSP.",
    "start": "186660",
    "end": "191730"
  },
  {
    "text": "You can do it much simpler. But it comes with\nall sorts of caveats.",
    "start": "191730",
    "end": "197122"
  },
  {
    "text": " In terms of specifically\nthe error in ranging",
    "start": "197122",
    "end": "204670"
  },
  {
    "text": "has dependency on the\namplitude of the received echo and also on the angle\nof where the target is",
    "start": "204670",
    "end": "211980"
  },
  {
    "text": "and in certain cases we saw\nthat the error can blow up. So there's a trade\noff there, right?",
    "start": "211980",
    "end": "217320"
  },
  {
    "text": "You get something very\nsimple you can get it up and running quickly\nand cheap, but it's not",
    "start": "217320",
    "end": "222780"
  },
  {
    "text": "the best performing\nalgorithm for you. Or you could do\nbasically what we",
    "start": "222780",
    "end": "228060"
  },
  {
    "text": "learned in GPS, you can\ndo matched filtering or correlation based detectors. And for that, you\nbasically take your",
    "start": "228060",
    "end": "234840"
  },
  {
    "text": "received echo and correlate\nthat with the waveform that was transmitted, and that\nthe output of that correlator",
    "start": "234840",
    "end": "240880"
  },
  {
    "text": "there's going to be a peak. And the index of that peak\ncorresponds to the round trip",
    "start": "240880",
    "end": "246840"
  },
  {
    "text": "time of flight. And then for this, as\nwe know, of course, you would want to if you're\nusing match filtering,",
    "start": "246840",
    "end": "253320"
  },
  {
    "text": "you would want to use waveforms\nor pulses with good correlation properties that give you a nice,\nsharp peak with low side lobes.",
    "start": "253320",
    "end": "262780"
  },
  {
    "text": "So you could do for\ninstance Barker codes are a good choice that are used.",
    "start": "262780",
    "end": "268240"
  },
  {
    "text": "PN sequences also\nwork of course. But they're a bit\noverkill I would say for sonar because for sonar\nwe're dealing with short range",
    "start": "268240",
    "end": "276629"
  },
  {
    "text": "applications. You don't need codes\nwith very high SNR.",
    "start": "276630",
    "end": "282450"
  },
  {
    "text": "OK. And then so this was about\npulse echo sonar then we started talking\nabout the CTFM sonar.",
    "start": "282450",
    "end": "291090"
  },
  {
    "text": "And the CTFM, this FM part of\nit, the frequency modulation",
    "start": "291090",
    "end": "297600"
  },
  {
    "text": "is there because these\nsystems typically send a very specific\ntype of waveform, which",
    "start": "297600",
    "end": "305100"
  },
  {
    "text": "is a linear frequency chirp. I mean, so what linear\nfrequency chirp is it's",
    "start": "305100",
    "end": "310830"
  },
  {
    "text": "basically a signal\nin the time domain. And it's designed such\nthat if you calculate",
    "start": "310830",
    "end": "316199"
  },
  {
    "text": "the instantaneous\nfrequency of the signal, it varies linearly\nover time, right?",
    "start": "316200",
    "end": "321479"
  },
  {
    "text": "So this plot, which is a bit\nof a unusual way of visualizing",
    "start": "321480",
    "end": "329670"
  },
  {
    "text": "the signal because either you're\nused to looking at signals in terms of their\namplitude versus time",
    "start": "329670",
    "end": "335550"
  },
  {
    "text": "or we looked at their\nlook at their Fourier transform basically. This is something in between.",
    "start": "335550",
    "end": "340590"
  },
  {
    "text": "So your vertical axis is\nthe instantaneous frequency, horizontal is time, OK?",
    "start": "340590",
    "end": "346230"
  },
  {
    "text": "But it is the most\nintuitive way of thinking about these signals. So the instantaneous frequency. Let's look at the black first.",
    "start": "346230",
    "end": "352170"
  },
  {
    "text": "That's basically waveform\nthat you transmit at time 0. It starts at some frequency f 0.",
    "start": "352170",
    "end": "358680"
  },
  {
    "text": "And it just linearly goes up. It could also go down that's\njust a choice of slew rate,",
    "start": "358680",
    "end": "364669"
  },
  {
    "text": "right? You can also ramp it down. Doesn't matter. It's the same principle. So with some slew rate b, your\nfrequency basically linearly",
    "start": "364670",
    "end": "373720"
  },
  {
    "text": "goes up and then you\ntransmit for a pulse duration or a waveform duration\nof big T. And then you repeat.",
    "start": "373720",
    "end": "380930"
  },
  {
    "text": "So I have only drawn one. But, basically, right\nafter that, because it's a continuous\ntransmission system.",
    "start": "380930",
    "end": "387500"
  },
  {
    "text": "So as soon as you\nfinish the first one, you start the second\none, basically. But let's just look\nat one for now.",
    "start": "387500",
    "end": "394870"
  },
  {
    "text": "So you start from f0. You go to f0 plus\nb, is your slew rate",
    "start": "394870",
    "end": "399970"
  },
  {
    "text": "in hertz per second, times\nt, which is the duration.",
    "start": "399970",
    "end": "405220"
  },
  {
    "text": "So that delta frequency here,\nthat's the overall bandwidth",
    "start": "405220",
    "end": "410920"
  },
  {
    "text": "that your pulse takes up. And it's called big-- it's denoted by big\nB for the bandwidth, which is equal to basically\nslew rate times time.",
    "start": "410920",
    "end": "418960"
  },
  {
    "text": "b times t is the\ntotal bandwidth. What you receive is going to be\njust a delayed version of what",
    "start": "418960",
    "end": "426218"
  },
  {
    "text": "you transmit. I mean, there is\nattenuation also. But if you look at\nthe frequency of it, it's just going to be the same\nlinear frequency chirp or ramp,",
    "start": "426218",
    "end": "435310"
  },
  {
    "text": "just delayed by some round\ntrip time of flight, tau. So you, essentially,\nget the same thing.",
    "start": "435310",
    "end": "441100"
  },
  {
    "text": "And, really, the beauty\nof this technique is that now if you\nlook at the difference",
    "start": "441100",
    "end": "449289"
  },
  {
    "text": "in the instantaneous\nfrequency of the waveform that you transmitted and the\necho that you've received,",
    "start": "449290",
    "end": "456070"
  },
  {
    "text": "first of all, that\ndelta frequency, I mean, these are two parallel lines. So the delta frequency is going\nto be constant for the duration",
    "start": "456070",
    "end": "463810"
  },
  {
    "text": "that you're receiving the echo. And that delta f, as we\nshowed, is proportional to tau.",
    "start": "463810",
    "end": "470919"
  },
  {
    "text": "In fact, it's exactly equal\nto your slew rate times tau. Very simple linear relationship.",
    "start": "470920",
    "end": "477290"
  },
  {
    "text": "So it's just b times tau. So b is known. That's a choice that we\nmake for the waveform",
    "start": "477290",
    "end": "484420"
  },
  {
    "text": "that we're transmitting. So all we need to do is\nestimate the difference",
    "start": "484420",
    "end": "489790"
  },
  {
    "text": "in the instantaneous\nfrequency of the echo that's received compared to the\noriginal waveform that",
    "start": "489790",
    "end": "496270"
  },
  {
    "text": "was transmitted. Once that delta f is\nknown, you divide by b, you get your time of flight tau,\nand we know the time of flight.",
    "start": "496270",
    "end": "503770"
  },
  {
    "text": "From, that we can\nbasically estimate range. You just divide your\ntime of flight by 2",
    "start": "503770",
    "end": "510220"
  },
  {
    "text": "to go from round-trip\nto one-way, and then also divide\nby the speed of sound, and that gives you range.",
    "start": "510220",
    "end": "515860"
  },
  {
    "text": "So now, today, we are\ngoing to basically start by looking at how to\nfind this delta f,",
    "start": "515860",
    "end": "522520"
  },
  {
    "text": "because that's at the core\nof how CTFM sonar works. Any questions\nbefore we continue?",
    "start": "522520",
    "end": "528714"
  },
  {
    "text": " So we were looking at the system\nblock diagram for a CTFM sonar.",
    "start": "528715",
    "end": "537340"
  },
  {
    "text": "And we said that,\nreally, the magic happens at this,\nbasically, this block here,",
    "start": "537340",
    "end": "546110"
  },
  {
    "text": "which is called a mixer\nor a down-converter. And what happens here is that\nwe feed it the echo signal",
    "start": "546110",
    "end": "554500"
  },
  {
    "text": "that we have collected\nback at the receiver and s of t, which is basically\nthe transmitted chirp.",
    "start": "554500",
    "end": "564240"
  },
  {
    "text": "So that's the\nchirp that we send. And then, it basically\noutputs some signal,",
    "start": "564240",
    "end": "569279"
  },
  {
    "text": "which we call sif of t, which\nis our intermediate frequency signal. And if this block is\ndesigned right, that sif of t",
    "start": "569280",
    "end": "579120"
  },
  {
    "text": "should have a\nfrequency at delta f, which is the difference\nbetween the transmitted",
    "start": "579120",
    "end": "585270"
  },
  {
    "text": "and the received echo frequency. And, in fact,\nmathematically, it turns out that the operation that\nthat block needs to do",
    "start": "585270",
    "end": "592230"
  },
  {
    "text": "is very simple. It's basically just a\ncomplex multiplication.",
    "start": "592230",
    "end": "597310"
  },
  {
    "text": "So what that-- and that's why\nwe show it as a multiplier, because it's actually exactly\nmultiplying those signals.",
    "start": "597310",
    "end": "603125"
  },
  {
    "text": "So what it does\nis, basically, it multiplies the complex\nconjugate of the echo that you have received by\ns of t which, again, s of t",
    "start": "603125",
    "end": "611190"
  },
  {
    "text": "is that chirp waveform that\nwe generate and send out. So, explicitly, we can break\ndown the echo into two parts.",
    "start": "611190",
    "end": "619959"
  },
  {
    "text": "So it has-- the echo signal has\nan amplitude that, as we know, depends on range and\nthe angle of the target.",
    "start": "619960",
    "end": "629590"
  },
  {
    "text": "So it depends on theta and rho. But the time dependency of\nit is just a delayed version",
    "start": "629590",
    "end": "636750"
  },
  {
    "text": "of the transmitted chirp. And why the star? Because we are taking that\nmixer block is conjugating it.",
    "start": "636750",
    "end": "644260"
  },
  {
    "text": "So that's an operation that\nhappens inside the mixer. So you get basically s as a star\nof t minus tau times s of t.",
    "start": "644260",
    "end": "652199"
  },
  {
    "text": "And now, we can plug\nin the expression that we have for\nthat chirp signal.",
    "start": "652200",
    "end": "657480"
  },
  {
    "text": "Remember-- let me first\ngo to the next one. But remember, s\nof t was basically",
    "start": "657480",
    "end": "664630"
  },
  {
    "text": "exponential of something\nlike j 2 pi, some f0, plus bt",
    "start": "664630",
    "end": "672100"
  },
  {
    "text": "over 2 times t. So this was mathematically what\nthe linear frequency chirp is.",
    "start": "672100",
    "end": "679330"
  },
  {
    "text": "So you just plug that in. So this here basically\nis our s of t.",
    "start": "679330",
    "end": "685090"
  },
  {
    "text": "And this term is the s\nas star of t minus tau. That's why this\nhas a minus sign.",
    "start": "685090",
    "end": "691090"
  },
  {
    "text": "And then, a lot of\nthings simplify. It's just two exponential\nterms getting multiplied out. And you do the math.",
    "start": "691090",
    "end": "697820"
  },
  {
    "text": "So some terms cancel out. But what you're left with is--",
    "start": "697820",
    "end": "703839"
  },
  {
    "text": "so, of course, the\nmu, which is the gain of the amplifier and this echo\namplitude just carry over.",
    "start": "703840",
    "end": "709750"
  },
  {
    "text": "But we're concerned with\nthe time dependency of it. So what you get at\nthe end of the day,",
    "start": "709750",
    "end": "715540"
  },
  {
    "text": "you get e to the j 2 pi. Let me go one step further.",
    "start": "715540",
    "end": "720680"
  },
  {
    "text": "So at the-- inside\nthe exponent, you get this b times tau times t.",
    "start": "720680",
    "end": "727029"
  },
  {
    "text": "And that's the only term\nthat has time dependence. And you get something that\ndepends on f0, and b, and tau.",
    "start": "727030",
    "end": "735550"
  },
  {
    "text": "But there is no t\ndependency in it. So that's just a\nconstant phase for us.",
    "start": "735550",
    "end": "741460"
  },
  {
    "text": "So we can basically\nrefactor this. And this b times tau, we\ncall that our delta f.",
    "start": "741460",
    "end": "751120"
  },
  {
    "text": "And everything else, just\ncall that phi of tau. It's just a constant\nphase, basically,",
    "start": "751120",
    "end": "756760"
  },
  {
    "text": "for the duration of\nthe received echo. And so, we see that this sif,\nthe intermediate frequency",
    "start": "756760",
    "end": "764530"
  },
  {
    "text": "signal that's coming\nout of the mixer, exactly has the\nproperty that we want.",
    "start": "764530",
    "end": "769750"
  },
  {
    "text": "It's basically the\ntime dependency of it, like if you ignore everything\nelse that is not time",
    "start": "769750",
    "end": "776110"
  },
  {
    "text": "dependent, like\nthe echo amplitude and that constant\nphase, the sif of t",
    "start": "776110",
    "end": "783699"
  },
  {
    "text": "is proportional to e to\nthe j 2 pi delta ft, which",
    "start": "783700",
    "end": "789040"
  },
  {
    "text": "is exactly what we want. So this signal has\ninstantaneous frequency, or it's actually just\na constant frequency",
    "start": "789040",
    "end": "796450"
  },
  {
    "text": "that is proportional to\nthe time of flight tau.",
    "start": "796450",
    "end": "802330"
  },
  {
    "text": "So, basically, at this\npoint, we have a sensor. Because that block diagram that\nwe showed, if you build that,",
    "start": "802330",
    "end": "812230"
  },
  {
    "text": "the intermediate\nfrequency that we get-- if I just go\nback to the block",
    "start": "812230",
    "end": "817480"
  },
  {
    "text": "diagram real quick so we\ncan look at it together. So this intermediate\nfrequency signal",
    "start": "817480",
    "end": "824050"
  },
  {
    "text": "that we have, it's going\nto get filtered and passed through an ADC. But then, the discretized\nversion that we have,",
    "start": "824050",
    "end": "830260"
  },
  {
    "text": "this signal has a\nfrequency that is proportional to\nthe time of flight.",
    "start": "830260",
    "end": "836240"
  },
  {
    "text": "So now, to estimate\ntime of flight and ultimately range,\nall we need to do is to estimate the\nfrequency of the i f signal.",
    "start": "836240",
    "end": "847820"
  },
  {
    "text": "And, again, as we know, the\nrho, which is the range, is going to be proportional\nto the frequency delta",
    "start": "847820",
    "end": "856370"
  },
  {
    "text": "f of the downconverted\nsignal via this expression. Where is this coming from?",
    "start": "856370",
    "end": "861990"
  },
  {
    "text": "Well, we know rho is\nbasically the time of flight",
    "start": "861990",
    "end": "868029"
  },
  {
    "text": "times the speed of light over 2. And then, we have\njust plugged in--",
    "start": "868030",
    "end": "873430"
  },
  {
    "text": "for tau, we have plugged\nin this expression, which is delta f over b.",
    "start": "873430",
    "end": "879160"
  },
  {
    "text": "So that's our time of flight. So, really, the\nmagic or the power of this idea of CTFM\nor FMCW is that we",
    "start": "879160",
    "end": "890320"
  },
  {
    "text": "have converted a\nrange estimation problem to a frequency\nestimation problem.",
    "start": "890320",
    "end": "897530"
  },
  {
    "text": "So, now, we just need to\nestimate the frequency of the signal in DSB.",
    "start": "897530",
    "end": "903250"
  },
  {
    "text": "And, as I said last time,\nthere is tens or possibly",
    "start": "903250",
    "end": "908260"
  },
  {
    "text": "hundreds of algorithms\nfor frequency estimation. If you just go on Google and\nsearch for spectral estimation",
    "start": "908260",
    "end": "916180"
  },
  {
    "text": "or frequency estimation, you\nwould see tons, and tons, and tons of papers. I mean, some of them go\nback many tens of years.",
    "start": "916180",
    "end": "924070"
  },
  {
    "text": "Because it's a\nproblem that has been studied in statistics and\nlater in electrical engineering",
    "start": "924070",
    "end": "929270"
  },
  {
    "text": "for many years. And people have come up with\nreally beautiful algorithms for spectral estimations.",
    "start": "929270",
    "end": "934610"
  },
  {
    "text": "Different algorithms, they\nhave different trade-offs. Some are more accurate but\nmore computationally complex,",
    "start": "934610",
    "end": "940100"
  },
  {
    "text": "some are simpler,\nnot as accurate. I mean, you get all sorts\nof trade-offs between them. We are going to look at the\nsimplest and most efficient one",
    "start": "940100",
    "end": "948529"
  },
  {
    "text": "which you all\nalready know about, which is the Fourier transform. I mean, what Fourier transform\nis good at is telling you",
    "start": "948530",
    "end": "956930"
  },
  {
    "text": "the spectral\ncontent of a signal. Now, if you have a signal\nwhich basically has just one",
    "start": "956930",
    "end": "964130"
  },
  {
    "text": "frequency in it, and you\nlook at its Fourier transform or the magnitude of\nthe Fourier transform,",
    "start": "964130",
    "end": "969290"
  },
  {
    "text": "it will show a peak\nat that frequency. So, basically, in DSP,\nwith our simple algorithm,",
    "start": "969290",
    "end": "975710"
  },
  {
    "text": "we just take the Fourier\ntransform of the i f signal. So this digitized i\nf signal comes in.",
    "start": "975710",
    "end": "983990"
  },
  {
    "text": "You take the Fourier\ntransform of it. And you get what we\ncall big S i f of k.",
    "start": "983990",
    "end": "991850"
  },
  {
    "text": "And then you find peaks. So you look at basically\nthe magnitude of the Fourier",
    "start": "991850",
    "end": "997160"
  },
  {
    "text": "transform and you\nlook at the peaks. So what you would typically\nsee, if this plot down here",
    "start": "997160",
    "end": "1004990"
  },
  {
    "text": "is the FFT of sif, so it's\nalso plotted in log scale.",
    "start": "1004990",
    "end": "1011060"
  },
  {
    "text": "So that's why we\ncall it db here. So to be very concrete about\nit, what is being plotted",
    "start": "1011060",
    "end": "1020170"
  },
  {
    "text": "is 20 times log 10\nof the magnitude",
    "start": "1020170",
    "end": "1025410"
  },
  {
    "text": "of the FFT of sif of n.",
    "start": "1025410",
    "end": "1031349"
  },
  {
    "text": " That's what this is. And that's why it's in db,\nbecause we're taking 20 log.",
    "start": "1031349",
    "end": "1037780"
  },
  {
    "text": "Why db? I mean, it's just not-- makes a nicer plot. That's why, I mean, there's\nreally-- you could plot it",
    "start": "1037780",
    "end": "1044680"
  },
  {
    "text": "in linear scale, if you will. But the point here is that,\nwell, you look at your FFT.",
    "start": "1044680",
    "end": "1050500"
  },
  {
    "text": "And at some index, k hat,\nyou're going to see a peak.",
    "start": "1050500",
    "end": "1056160"
  },
  {
    "text": "And that index, or the\nfrequency of that index,",
    "start": "1056160",
    "end": "1061260"
  },
  {
    "text": "is basically the frequency\nof the i f signal. And then, we can convert that\nto time of flight and range.",
    "start": "1061260",
    "end": "1066270"
  },
  {
    "text": "How do we convert\nthat to frequency? Well, this simple\nformula, as you know from Fourier transforms,\nwell, you get an index.",
    "start": "1066270",
    "end": "1076049"
  },
  {
    "text": "But to go from the index to\nthe actual frequency in hertz, all you need to do--\nso if your signal",
    "start": "1076050",
    "end": "1082440"
  },
  {
    "text": "or if one chirp after the\nADC had n samples in it, so we are basically taking\nan n point FFT here.",
    "start": "1082440",
    "end": "1092890"
  },
  {
    "text": "That's why our k index\ngoes from 0 to n minus 1. We're just looking at\none period of the FFT.",
    "start": "1092890",
    "end": "1098650"
  },
  {
    "text": "The frequency varies\nlinearly here. So all you need to do to go from\nyour index to the frequency,",
    "start": "1098650",
    "end": "1104980"
  },
  {
    "text": "you divide that by\nn and multiply that by fs, which is the\nADC sampling rate. ",
    "start": "1104980",
    "end": "1112380"
  },
  {
    "text": "And that gives you\nyour delta f hat, which is your estimate of the\nfrequency of the i f signal.",
    "start": "1112380",
    "end": "1121550"
  },
  {
    "text": "And what is your\nrange estimate then? You just basically\ndo delta f hat times",
    "start": "1121550",
    "end": "1128300"
  },
  {
    "text": "the speed of sound divided\nby 2 times the slew rate. And that would be the\nrange of your target.",
    "start": "1128300",
    "end": "1136760"
  },
  {
    "text": "And that's it. I mean, the algorithms for\nCTFM are really this simple.",
    "start": "1136760",
    "end": "1141929"
  },
  {
    "text": "It's just one FFT you do,\nlook at the magnitude, take the peak, and convert\nthe index of the peak",
    "start": "1141930",
    "end": "1147260"
  },
  {
    "text": "to the frequency, and then\nconvert the frequency to time of flight and range.",
    "start": "1147260",
    "end": "1152270"
  },
  {
    "text": "And it's all just\nlinear transfer, just a bunch of scalings,\nbasically, that you need to do in between to go from\nindex, to frequency, to time",
    "start": "1152270",
    "end": "1160700"
  },
  {
    "text": "of flight, to range. Make sure this here\nmakes sense to you.",
    "start": "1160700",
    "end": "1167190"
  },
  {
    "text": "If it doesn't, let me know. Let's talk about it. Does this make sense how we're\nconverting the frequency?",
    "start": "1167190",
    "end": "1173190"
  },
  {
    "text": "Because, again, when you\ndo the FFT for your index, 0 index corresponds\nto 0 frequency.",
    "start": "1173190",
    "end": "1178890"
  },
  {
    "text": "And index n corresponds to the\nsampling rate, which is fs. And every index in\nbetween is just linear.",
    "start": "1178890",
    "end": "1186149"
  },
  {
    "text": "So every FFT bin\nis basically has a width of fs over n, where\nn is the number of points",
    "start": "1186150",
    "end": "1192090"
  },
  {
    "text": "in the FFT. So that's why your k hat, you\njust multiply it by fs over n. And that gives you the actual\nfrequency corresponding to it.",
    "start": "1192090",
    "end": "1201960"
  },
  {
    "text": "Now, it turns out,\nso far we just assumed what you've received\nis coming from a single target.",
    "start": "1201960",
    "end": "1208200"
  },
  {
    "text": "But this also works if you\nsimultaneously receive echoes from multiple targets.",
    "start": "1208200",
    "end": "1214090"
  },
  {
    "text": "So let's say you're sending\nout the ultrasonic beam pattern that you're sending is wide.",
    "start": "1214090",
    "end": "1219990"
  },
  {
    "text": "And it's hitting multiple\ntargets in the scene. And within the\nduration of one chirp,",
    "start": "1219990",
    "end": "1225630"
  },
  {
    "text": "you receive multiple echoes. That is fine. So what you have is basically a\nsummation of a bunch of echoes.",
    "start": "1225630",
    "end": "1233639"
  },
  {
    "text": "And you do the exact same thing. You downconvert them\nand you take the FFT. And you're going to\nsee multiple peaks.",
    "start": "1233640",
    "end": "1240690"
  },
  {
    "text": "So this is k hat 1, and then\nyou get k hat 2, k hat 3.",
    "start": "1240690",
    "end": "1245940"
  },
  {
    "text": "And each gives you the\nrange of 1 of the targets. So it also, it's very\nnice in that manner,",
    "start": "1245940",
    "end": "1253800"
  },
  {
    "text": "that if you're hitting more than\none target with a single chirp,",
    "start": "1253800",
    "end": "1260430"
  },
  {
    "text": "that's still fine. Your algorithm works basically.",
    "start": "1260430",
    "end": "1266460"
  },
  {
    "text": "Any questions about this? All right, let's continue. So next thing we\nwant to look at is,",
    "start": "1266460",
    "end": "1273880"
  },
  {
    "text": "what is the ranging\nresolution you get from this, and what is the maximum\nrange that you get from this?",
    "start": "1273880",
    "end": "1282580"
  },
  {
    "text": "And there is a trade-off\nbetween the two. And just looking\nat this picture, I'm going to clean\nit up a little bit",
    "start": "1282580",
    "end": "1288070"
  },
  {
    "text": "and maybe also clean this up.",
    "start": "1288070",
    "end": "1293399"
  },
  {
    "text": "And just looking at\nthis, you can actually answer both questions. So in terms of the\nrange resolution",
    "start": "1293400",
    "end": "1301470"
  },
  {
    "text": "that you expect from\nthis, it's directly tied to, again, the FFT.",
    "start": "1301470",
    "end": "1306630"
  },
  {
    "text": "So the closest two targets\nthat you can possibly distinguish in range\nis if they have",
    "start": "1306630",
    "end": "1314490"
  },
  {
    "text": "two peaks that are exactly one\nFFT bin apart, like one is at k and the other one is\nat the exact next bin.",
    "start": "1314490",
    "end": "1321929"
  },
  {
    "text": "So that is like the lower bound\non how close two targets can",
    "start": "1321930",
    "end": "1328600"
  },
  {
    "text": "be. If they are are any closer, they\nbasically fall into the same FFT bin, and then you\ncannot distinguish them.",
    "start": "1328600",
    "end": "1335520"
  },
  {
    "text": "So that's one. And then, what is\nthe maximum range that you can detect possibly?",
    "start": "1335520",
    "end": "1340530"
  },
  {
    "text": "That's where the peak is\nat the very end of the FFT.",
    "start": "1340530",
    "end": "1345690"
  },
  {
    "text": "So that's where,\nbasically, your delta f hat is equal to your sampling rate.",
    "start": "1345690",
    "end": "1352990"
  },
  {
    "text": "Because if the frequency\nis any higher than that, FFTs are periodic, and\nit just wraps around.",
    "start": "1352990",
    "end": "1358990"
  },
  {
    "text": "So this picture\ndirectly also tells you the resolution and the maximum\nrange-- range resolution",
    "start": "1358990",
    "end": "1364690"
  },
  {
    "text": "and maximum range\nthat you can get. But we can also mathematically\nlook at what they are.",
    "start": "1364690",
    "end": "1369880"
  },
  {
    "text": "So for the minimum\nrange discrimination, as I said that you\ncan do, that delta",
    "start": "1369880",
    "end": "1375430"
  },
  {
    "text": "f min corresponds\nto a single FFT bin. And what is the width? The frequency width\nof one FFT bin,",
    "start": "1375430",
    "end": "1382840"
  },
  {
    "text": "that's just your sampling rate\ndivided by the total number of points in the FFT. So it's just fs over n.",
    "start": "1382840",
    "end": "1390070"
  },
  {
    "text": "You can also write it as\n1 over t where, remember, t is your total chirp duration.",
    "start": "1390070",
    "end": "1395780"
  },
  {
    "start": "1395780",
    "end": "1401000"
  },
  {
    "text": "Why is that the case? Because, well, you have a\nchirp of, in time, it's 0 to t.",
    "start": "1401000",
    "end": "1409700"
  },
  {
    "text": "And if I just draw the waveform\nof it, that's the chirp. And then, in the ADC, we're\nsampling it in endpoints.",
    "start": "1409700",
    "end": "1419660"
  },
  {
    "text": "So you do basically\ndiscretize it to n points. So then, you get\nthis relationship",
    "start": "1419660",
    "end": "1425990"
  },
  {
    "text": "between the number of points\nin the discretized signal and the sampling rate of the\nADC and the total time duration,",
    "start": "1425990",
    "end": "1432320"
  },
  {
    "text": "n equals t times fs. So that's your minimum frequency\nthat you can discriminate",
    "start": "1432320",
    "end": "1439190"
  },
  {
    "text": "with your FFT algorithm. But what range does\nthat correspond to? We just plug this into our\nrange estimation equation.",
    "start": "1439190",
    "end": "1448560"
  },
  {
    "text": "So our delta rho minimum,\nthat's our range resolution, the minimum range\nwe can discriminate,",
    "start": "1448560",
    "end": "1454370"
  },
  {
    "text": "is going to be the minimum\ndelta f times the speed of sound divided by 2b.",
    "start": "1454370",
    "end": "1459570"
  },
  {
    "text": "And then, for delta f,\nwe plug in the 1 over t. And we get this expression here.",
    "start": "1459570",
    "end": "1467700"
  },
  {
    "text": "So our ranging\nresolution is going to be the speed of sound\ndivided by 2 times the slew",
    "start": "1467700",
    "end": "1473220"
  },
  {
    "text": "rate times the\nduration of the chirp. Remember, this b times t, if\nwe go back to this picture",
    "start": "1473220",
    "end": "1480270"
  },
  {
    "text": "we had here-- slide it up-- b times t is\nthe total bandwidth, we said,",
    "start": "1480270",
    "end": "1487290"
  },
  {
    "text": "of the chirp. Because we go from frequency 0,\nf0, to f0 plus b times big T.",
    "start": "1487290",
    "end": "1493679"
  },
  {
    "text": "And b times big T, so that's\nthe total spectral width",
    "start": "1493680",
    "end": "1499170"
  },
  {
    "text": "of the chirp or the\ntotal chirp bandwidth. So basically, our\nranging resolution",
    "start": "1499170",
    "end": "1506670"
  },
  {
    "text": "is just the speed of\nlight divided by 2b. So if you want more\nresolution, you",
    "start": "1506670",
    "end": "1513630"
  },
  {
    "text": "need a chirp with\na larger bandwidth, which means either higher slew\nrate or larger chirp duration,",
    "start": "1513630",
    "end": "1521080"
  },
  {
    "text": "so larger b, or\nlarger t, or both, to get a larger bandwidth. That's what we need.",
    "start": "1521080",
    "end": "1527519"
  },
  {
    "text": "What about maximum range? Maximum detectable\nrange, again, as we said, it's the maximum delta f that\nyou can find in your FFT times",
    "start": "1527520",
    "end": "1538060"
  },
  {
    "text": "the speed of sound\ndivided by 2b. And what is the maximum delta f? It's almost equal to\nyour FFT sampling rate.",
    "start": "1538060",
    "end": "1546850"
  },
  {
    "text": "So you just get your\nFFT sampling rate",
    "start": "1546850",
    "end": "1552020"
  },
  {
    "text": "times v divided by 2b. And that is your maximum range.",
    "start": "1552020",
    "end": "1557130"
  },
  {
    "text": "So here, if you want more\nrange, what should you do?",
    "start": "1557130",
    "end": "1562200"
  },
  {
    "text": "Either increase the ADC\nsampling rate, use a faster ADC.",
    "start": "1562200",
    "end": "1568190"
  },
  {
    "text": "That's one way. Speed of sound, well, you don't\nhave any control over that. Or you can make the\ndenominator smaller, which",
    "start": "1568190",
    "end": "1575720"
  },
  {
    "text": "means reduce your slew rate. So here, you see\ntwo opposite effects",
    "start": "1575720",
    "end": "1581990"
  },
  {
    "text": "in terms of the slew rate if\nyou keep everything the same. And just change the slew\nrate of these chirps.",
    "start": "1581990",
    "end": "1588860"
  },
  {
    "text": "And, remember, this slew rate\nis like the slope of how quickly you vary the frequency. If I want to increase\nthe slew rate,",
    "start": "1588860",
    "end": "1595280"
  },
  {
    "text": "it's going to go up faster. If you reduce it, it's\ngoing to go up slower.",
    "start": "1595280",
    "end": "1600570"
  },
  {
    "text": "So if you just change the\nslew rate, what happens is that increasing the\nslew rate, so larger",
    "start": "1600570",
    "end": "1608929"
  },
  {
    "text": "b, what it does for you is it\nwill improve the resolution.",
    "start": "1608930",
    "end": "1616190"
  },
  {
    "text": "Because this delta rho\nwill become smaller, which is a good thing. That means you can\ndiscriminate targets that are",
    "start": "1616190",
    "end": "1622280"
  },
  {
    "text": "more closely spaced in range. So you get better resolution. But you're going to\nreduce your maximum range.",
    "start": "1622280",
    "end": "1630649"
  },
  {
    "text": "So there's always\na trade-off there. That's, of course, if\neverything else is fixed.",
    "start": "1630650",
    "end": "1636200"
  },
  {
    "text": "If you have control over\nsome other parameters, maybe you can design your\nwaveforms differently.",
    "start": "1636200",
    "end": "1642410"
  },
  {
    "text": "But just remember that this\nb is a design parameter",
    "start": "1642410",
    "end": "1647900"
  },
  {
    "text": "that, if you're in charge\nof using the sensor or tuning it for your\nspecific application,",
    "start": "1647900",
    "end": "1655580"
  },
  {
    "text": "this is one of the\nimportant design parameters. And then you need to decide what\nis the right choice of b that",
    "start": "1655580",
    "end": "1660920"
  },
  {
    "text": "gives you the right trade-off\nbetween maximum range and the range resolution. And then, you\nbasically go with that.",
    "start": "1660920",
    "end": "1667950"
  },
  {
    "text": "Any questions? ",
    "start": "1667950",
    "end": "1673090"
  },
  {
    "text": "So let's continue. So we talked about\nranging so far,",
    "start": "1673090",
    "end": "1679090"
  },
  {
    "text": "and how it's done in\nboth the case of pulse echo sonar and\ncontinuous wave sonar.",
    "start": "1679090",
    "end": "1687639"
  },
  {
    "text": "What we have not\ntalked about yet is how do you estimate the\nbearing angle or the direction",
    "start": "1687640",
    "end": "1693759"
  },
  {
    "text": "of arrival for the target. Now, in terms of\nbearing estimation, there's different\nways of doing it.",
    "start": "1693760",
    "end": "1701920"
  },
  {
    "text": "And, for instance, some systems\njust use a single receiver.",
    "start": "1701920",
    "end": "1709170"
  },
  {
    "text": "And from the echo amplitude\nthat they receive, they try to estimate\nalso, in addition",
    "start": "1709170",
    "end": "1715020"
  },
  {
    "text": "to the range, the bearing\nangle of the target. But as we know, the\ndependency of the echo",
    "start": "1715020",
    "end": "1724799"
  },
  {
    "text": "amplitude on the\ntarget angle, there is a lot that goes into it. I mean, it depends on\nyour radiation pattern,",
    "start": "1724800",
    "end": "1733020"
  },
  {
    "text": "the actual shape of the\ntarget, a lot of things. So the systems that only use a\nsingle transducers for bearing",
    "start": "1733020",
    "end": "1741480"
  },
  {
    "text": "estimation, they usually cannot\ndo a good job because there is so much uncertainty. They have to have a\nsignal model or a fit",
    "start": "1741480",
    "end": "1749790"
  },
  {
    "text": "to the dependency of the echo\namplitude to the target angle. And there is so much variation\nin those signal models",
    "start": "1749790",
    "end": "1758580"
  },
  {
    "text": "that they usually\ncan't do a great job. I mean, it kind of works,\nbut it's not very accurate.",
    "start": "1758580",
    "end": "1765420"
  },
  {
    "text": "Systems that can do much\nbetter bearing estimation, they typically use more\nthan one transducer.",
    "start": "1765420",
    "end": "1773020"
  },
  {
    "text": "So they use at least two. And they use this\nidea of triangulation that we will talk about.",
    "start": "1773020",
    "end": "1778370"
  },
  {
    "text": "But before we talk\nabout triangulation, there is a very, very\ninteresting geometric trick",
    "start": "1778370",
    "end": "1785620"
  },
  {
    "text": "that when it comes to doing\nthe calculations for target",
    "start": "1785620",
    "end": "1791470"
  },
  {
    "text": "bearing, or DOA, it really\nmakes the math a lot more intuitive and easy.",
    "start": "1791470",
    "end": "1796779"
  },
  {
    "text": "And that's this idea\nof the virtual emitter. This is a purely,\npurely geometric idea.",
    "start": "1796780",
    "end": "1804790"
  },
  {
    "text": "It's not new physics\nwe are talking about. So we are just going to do\nthis smart geometric trick that",
    "start": "1804790",
    "end": "1812620"
  },
  {
    "text": "helps us analyze the bearing\nangle a little more easily",
    "start": "1812620",
    "end": "1818620"
  },
  {
    "text": "in math. So when it comes to\nthe virtual emitter,",
    "start": "1818620",
    "end": "1823990"
  },
  {
    "text": "targets are very broadly\ncategorized or divided into three types.",
    "start": "1823990",
    "end": "1829450"
  },
  {
    "text": "And it's a very, very\nbroad categorization. But it, nevertheless, it's OK.",
    "start": "1829450",
    "end": "1834490"
  },
  {
    "text": "It gives us something\nto work with. So the three classes of targets\nfor sonar that are considered,",
    "start": "1834490",
    "end": "1841360"
  },
  {
    "text": "it's plane targets. So it's a plane, it's\nkind of like a wall, just",
    "start": "1841360",
    "end": "1846880"
  },
  {
    "text": "a big flat surface. Then you have corners, which\nis like a corner of a wall, two",
    "start": "1846880",
    "end": "1853090"
  },
  {
    "text": "surfaces at an angle. That is typically\nassumed to be 90 degrees.",
    "start": "1853090",
    "end": "1859030"
  },
  {
    "text": "And then, you have edges. Again, two surfaces,\nbut at, basically,",
    "start": "1859030",
    "end": "1866200"
  },
  {
    "text": "an angle that makes an\nedge instead of a corner. And, again, I know\nit's very crude.",
    "start": "1866200",
    "end": "1873399"
  },
  {
    "text": "I mean, you can\nargue that, oh, but I can have a sphere or\nsomething that is not really",
    "start": "1873400",
    "end": "1879100"
  },
  {
    "text": "any of these. But very, very broadly speaking,\nand in a very crude manner,",
    "start": "1879100",
    "end": "1886300"
  },
  {
    "text": "you can roughly categorize\ndifferent targets into these three categories.",
    "start": "1886300",
    "end": "1891580"
  },
  {
    "text": "Now, what happens, this\nidea of virtual emitter, let's just look at the pictures\nhere, starting with the plane.",
    "start": "1891580",
    "end": "1897670"
  },
  {
    "text": "The idea here is-- so you have, let's say, one\ntransmitter and one receiver.",
    "start": "1897670",
    "end": "1904390"
  },
  {
    "text": "And then, you have your target. In this case, it's the\nplane, as drawn here.",
    "start": "1904390",
    "end": "1911800"
  },
  {
    "text": "And then, your transmitter\nreceiver plane, so they are on a plane.",
    "start": "1911800",
    "end": "1917320"
  },
  {
    "text": "And they make an angle\ntheta with respect to where the target normal is.",
    "start": "1917320",
    "end": "1924400"
  },
  {
    "text": "So, basically, the target\nbearing is at some angle theta relative to where the\nt axis is pointing at.",
    "start": "1924400",
    "end": "1934780"
  },
  {
    "text": "Now, what happens is\nthat the signal that goes from the tx to\nthe rx in this case, in the case of a plane,\nit's going to basically get",
    "start": "1934780",
    "end": "1943720"
  },
  {
    "text": "reflected. It hits the plane and\nit gets reflected. And it gets to the rx.",
    "start": "1943720",
    "end": "1948880"
  },
  {
    "text": "And then, because it's\na plane, basically, that main path from\nthe tx to the rx",
    "start": "1948880",
    "end": "1955300"
  },
  {
    "text": "is basically the shortest path. Which, as we know from\ngeometry, the angle of incidence",
    "start": "1955300",
    "end": "1961450"
  },
  {
    "text": "and the angle of reflection\nare going to be equal. So it's as if it was a mirror.",
    "start": "1961450",
    "end": "1968410"
  },
  {
    "text": "Now, for this\ngeometry here, if I place what we call a virtual\ntransmitter, which is just",
    "start": "1968410",
    "end": "1976660"
  },
  {
    "text": "a mirror image of the tx\nwith respect to this plane, so you just basically\nreflect the tx",
    "start": "1976660",
    "end": "1984129"
  },
  {
    "text": "and put a virtual tx here. And then, you remove the\nplane as if it wasn't there.",
    "start": "1984130",
    "end": "1989770"
  },
  {
    "text": "And, now, if you transmit\nfrom this virtual tx, the rx is not going to\nnotice any difference.",
    "start": "1989770",
    "end": "1997860"
  },
  {
    "text": "it's As if the original\ntx had transmitted and the plane was there, because\nit's the same angle of arrival",
    "start": "1997860",
    "end": "2004190"
  },
  {
    "text": "and it's the same\ntime of flight, basically, between the\nvirtual tx and the rx and the actual tx and the rx.",
    "start": "2004190",
    "end": "2011000"
  },
  {
    "text": "So that's the idea of\nthe virtual emitter or the virtual transmitter.",
    "start": "2011000",
    "end": "2016670"
  },
  {
    "text": "It's a purely\ngeometric argument. Now, you might ask,\nwhat's the use of it? I'll show you in a second.",
    "start": "2016670",
    "end": "2023300"
  },
  {
    "text": "But just to complete, it depends\nwhere the virtual transmitter",
    "start": "2023300",
    "end": "2028430"
  },
  {
    "text": "is. It depends on the\ngeometry of the target. So if it's a plane, as we\nsaw you just reflect it,",
    "start": "2028430",
    "end": "2034039"
  },
  {
    "text": "reflect the transmitter\nrelative to that plane. If it's a corner,\nyour virtual tx",
    "start": "2034040",
    "end": "2041990"
  },
  {
    "text": "is going to be the reflection\nof the transmitter with respect to, basically, the corner point.",
    "start": "2041990",
    "end": "2050869"
  },
  {
    "text": "So you basically reflect it. You put your virtual tx here. And then, from this\nvirtual tx to the rx,",
    "start": "2050870",
    "end": "2057810"
  },
  {
    "text": "it's going to see, basically,\nas if it was the actual tx, the same DOA, basically.",
    "start": "2057810",
    "end": "2064259"
  },
  {
    "text": "Finally, if you have an edge,\nyour virtual transmitter, it could be the-- it\nwould be the edge itself.",
    "start": "2064260",
    "end": "2070710"
  },
  {
    "text": "That edge point\nbecomes basically the virtual transmitter. And one point to note\nabout edge targets",
    "start": "2070710",
    "end": "2077579"
  },
  {
    "text": "is that, as we said\nbefore, when you have edge targets, the\nechoes that reflect back,",
    "start": "2077580",
    "end": "2082629"
  },
  {
    "text": "they're going to\nbe spherical waves. Because those essentially\nact like point targets",
    "start": "2082630",
    "end": "2088109"
  },
  {
    "text": "that are very small. And then they echo back\nspherical wavefronts to you.",
    "start": "2088110",
    "end": "2093989"
  },
  {
    "text": "So that's the idea of\nthe virtual emitter, purely geometric, nothing\nreally physically new about it.",
    "start": "2093989",
    "end": "2105330"
  },
  {
    "text": "But why is it useful? It's useful because it lets\nus to do DOA estimation,",
    "start": "2105330",
    "end": "2111750"
  },
  {
    "text": "basically, very easily. So, as I said, the\ntype of DOA estimation",
    "start": "2111750",
    "end": "2116970"
  },
  {
    "text": "we are going to look at is going\nto be based on triangulation. So, in this case, you have\nat least two receivers.",
    "start": "2116970",
    "end": "2126329"
  },
  {
    "text": "So I have rx1 and rx2. They're separated\nby some distance d.",
    "start": "2126330",
    "end": "2131790"
  },
  {
    "text": "And they have received echoes. And let's say we know\nthat the echoes that",
    "start": "2131790",
    "end": "2137190"
  },
  {
    "text": "are received by the\ntwo rx's correspond to the same physical target.",
    "start": "2137190",
    "end": "2143467"
  },
  {
    "text": "But they're going\nto-- because they're located at different\npositions, the range that the two receivers\nestimate, the rho,",
    "start": "2143467",
    "end": "2151050"
  },
  {
    "text": "is going to be different. So rx1 is going to\nestimate some range rho 1.",
    "start": "2151050",
    "end": "2157920"
  },
  {
    "text": "And rx2 is going to\nestimate some range rho 2. But, now, we can\nassume both of these",
    "start": "2157920",
    "end": "2164040"
  },
  {
    "text": "are coming from the same\nvirtual transmitter. So I had one transmitter,\ntwo receivers, a target--",
    "start": "2164040",
    "end": "2173150"
  },
  {
    "text": "doesn't matter what it is. But whatever target it is,\nwe can make an equivalent, basically, geometry here,\nwhich is a virtual transmitter",
    "start": "2173150",
    "end": "2182240"
  },
  {
    "text": "and the two rx's. And, now, the DOA\nestimation problem",
    "start": "2182240",
    "end": "2187520"
  },
  {
    "text": "is what is this angle\ntheta, basically, relative to, say, rx2?",
    "start": "2187520",
    "end": "2192830"
  },
  {
    "text": "And that is the DOA to\nthe actual target because. We know the DOA\nto the virtual tx",
    "start": "2192830",
    "end": "2198410"
  },
  {
    "text": "is going to be equal to the\nDOA to the physical target.",
    "start": "2198410",
    "end": "2204440"
  },
  {
    "text": "But now we have a very\nsimple geometry, basically, to solve here. Because, basically,\nwe look at-- we",
    "start": "2204440",
    "end": "2212660"
  },
  {
    "text": "have multiple triangles here. But if you look\nat this one first, that I highlight in green--",
    "start": "2212660",
    "end": "2218540"
  },
  {
    "text": "in red-- the sign\nof the DOA is going to be given by d\nplus h over rho 2.",
    "start": "2218540",
    "end": "2226520"
  },
  {
    "text": "The d is a separation\nbetween the rx and tx. h is this additional\npiece, basically, here.",
    "start": "2226520",
    "end": "2232100"
  },
  {
    "text": "It's a right triangle. So d plus h divided by\nrho 2, that's sine theta.",
    "start": "2232100",
    "end": "2237950"
  },
  {
    "text": "Cosine theta is l over rho 2.",
    "start": "2237950",
    "end": "2242960"
  },
  {
    "text": "And then, we can look\nat this top triangle. I'm going to highlight\nit in purple.",
    "start": "2242960",
    "end": "2250840"
  },
  {
    "text": "And then, in there,\nwe see that h is equal to square root\nof rho 1 minus l squared.",
    "start": "2250840",
    "end": "2258450"
  },
  {
    "text": "I mean, this is pure Pythagoras\ntheorem and geometry.",
    "start": "2258450",
    "end": "2263540"
  },
  {
    "text": "But, basically, from\nthese three equations, we can solve for theta.",
    "start": "2263540",
    "end": "2270080"
  },
  {
    "text": "And theta becomes\nthis, the arcsine of d squared plus rho 2\nsquared minus rho 1 squared",
    "start": "2270080",
    "end": "2276079"
  },
  {
    "text": "over 2d times rho 2. What's nice about this\nis everything is known.",
    "start": "2276080",
    "end": "2283280"
  },
  {
    "text": "d is the separation\nof the two receivers. We know what it is. And the rho 1 and the\nrho 2 are the ranges",
    "start": "2283280",
    "end": "2292130"
  },
  {
    "text": "that the two\nreceivers estimated. You just plug\neverything into this.",
    "start": "2292130",
    "end": "2298069"
  },
  {
    "text": "You take the arcsine. And that gives you\nthe DOA to the target.",
    "start": "2298070",
    "end": "2303780"
  },
  {
    "text": "So very simple. But what's important\nabout it is that you need to know the\nrho 1 and the rho 2",
    "start": "2303780",
    "end": "2313130"
  },
  {
    "text": "that you measured with\nyour two receivers correspond to the same target.",
    "start": "2313130",
    "end": "2319100"
  },
  {
    "text": "If they don't, well,\nthis argument is invalid. And that's OK if you just\nhave one target in the scene.",
    "start": "2319100",
    "end": "2326180"
  },
  {
    "text": "Then, you know, of course,\nyeah, I measure two ranges. They correspond to\nthe same target.",
    "start": "2326180",
    "end": "2331190"
  },
  {
    "text": "But when you have a very\ncluttered scene and then you simultaneously receive\nechoes from many targets,",
    "start": "2331190",
    "end": "2337369"
  },
  {
    "text": "establishing that\ncorrespondence between the rhos that your different\nreceivers are estimating",
    "start": "2337370",
    "end": "2345049"
  },
  {
    "text": "becomes a difficult task. So that's one thing to note. The other one to note is\nthat, well, this method works.",
    "start": "2345050",
    "end": "2352070"
  },
  {
    "text": "And it's often used. But it's important to note\nthat it couples your bearing estimation to your\nrange estimation.",
    "start": "2352070",
    "end": "2359750"
  },
  {
    "text": "So whatever errors that you\nhave in your range estimation would now get into your bearing\nestimation or DOA estimation.",
    "start": "2359750",
    "end": "2368430"
  },
  {
    "text": "So if you use a poor\nmethod for ranging, like a threshold-based\nranging, which can have a very large error,\nthen that error basically",
    "start": "2368430",
    "end": "2375960"
  },
  {
    "text": "propagates into your DOA as\nwell and can make your DOA very, very inaccurate.",
    "start": "2375960",
    "end": "2382650"
  },
  {
    "text": "One simplification we can\ndo to the expression we had in the previous page is\nthat if the receivers are placed",
    "start": "2382650",
    "end": "2391559"
  },
  {
    "text": "very close to each other,\nso if that separation d is much smaller\nthan the distance",
    "start": "2391560",
    "end": "2398430"
  },
  {
    "text": "to the target, rho 1 and rho\n2, basically, the expression",
    "start": "2398430",
    "end": "2403800"
  },
  {
    "text": "simplifies, because\nyou can basically ignore the d term in the\nnumerator and make it simpler.",
    "start": "2403800",
    "end": "2411900"
  },
  {
    "text": "So then, your bearing\nestimate basically just becomes arcsine of\nrho 2 minus rho 1 over d--",
    "start": "2411900",
    "end": "2419220"
  },
  {
    "text": "very, very simple expression. Any questions about\nDOA estimation?",
    "start": "2419220",
    "end": "2426839"
  },
  {
    "text": " And this is general. This is independent\nof do you have",
    "start": "2426840",
    "end": "2433700"
  },
  {
    "text": "a pulse echo sonar,\nor a CTFM, or how you're doing your ranging? It doesn't care.",
    "start": "2433700",
    "end": "2439850"
  },
  {
    "text": "All you need is two\nreceivers, two range estimates, and know that\nthose two range estimates",
    "start": "2439850",
    "end": "2448130"
  },
  {
    "text": "are for the same target. And just, the rest\nis just geometry.",
    "start": "2448130",
    "end": "2455090"
  },
  {
    "text": "So hopefully, now,\nit makes sense why we introduced this\nidea of the virtual tx",
    "start": "2455090",
    "end": "2460520"
  },
  {
    "text": "or the virtual emitter. Because, basically, this\npicture is why, right? This-- I lost it.",
    "start": "2460520",
    "end": "2468800"
  },
  {
    "text": "This picture is why. Because with the\nvirtual tx, you just take the target\nout of the picture",
    "start": "2468800",
    "end": "2475609"
  },
  {
    "text": "and you just have a\nvery simple geometry to solve for the DOA estimation.",
    "start": "2475610",
    "end": "2481340"
  },
  {
    "text": "That's why. It just simplifies\nthe math, basically. So let's continue.",
    "start": "2481340",
    "end": "2489270"
  },
  {
    "text": "As I said, so what\nkind of accuracy you can get with\nthis triangulation,",
    "start": "2489270",
    "end": "2496080"
  },
  {
    "text": "basically, technique? You can get sub degrees. I mean, in a good day, where\nyour environment is not",
    "start": "2496080",
    "end": "2503490"
  },
  {
    "text": "cluttered, your\nSNR is good and all that, you can get close to 0.2\ndegrees or a little better.",
    "start": "2503490",
    "end": "2509790"
  },
  {
    "text": "So that's what to estimate. If things are noisy, if\nyou have too much clutter, you can do worse.",
    "start": "2509790",
    "end": "2517050"
  },
  {
    "text": "But that's what you can get. As I said, there are methods\nfor bearing estimations that just use a\nsingle transducer.",
    "start": "2517050",
    "end": "2524819"
  },
  {
    "text": "But those methods need a\nsignal model, essentially, which is usually those are\ndata-driven techniques which",
    "start": "2524820",
    "end": "2531900"
  },
  {
    "text": "do a fit to the echo amplitude\nas a function of bearing with a bunch of assumptions,\nbasically, baked in.",
    "start": "2531900",
    "end": "2539099"
  },
  {
    "text": "And then, they use that to\ndo bearing angle estimation.",
    "start": "2539100",
    "end": "2545490"
  },
  {
    "text": "And those methods are\nnot very accurate.",
    "start": "2545490",
    "end": "2550500"
  },
  {
    "text": "So they can get, at best, to\none degree accuracy or so.",
    "start": "2550500",
    "end": "2555800"
  },
  {
    "text": "And it sort of makes sense why. Because there's too much\nvariation in the signal",
    "start": "2555800",
    "end": "2561650"
  },
  {
    "text": "that a single\nreceiver would receive as a function of bearing\nand other parameters.",
    "start": "2561650",
    "end": "2566670"
  },
  {
    "text": "So just the data-driven\napproach can only get you so far when\nit comes to having",
    "start": "2566670",
    "end": "2573590"
  },
  {
    "text": "a signal model to work with. But triangulation, you\ncan do much better. You can even do triangulation\nwith more than two receivers.",
    "start": "2573590",
    "end": "2580640"
  },
  {
    "text": "I mean, you can have\na bunch and even reduce your error even further.",
    "start": "2580640",
    "end": "2586470"
  },
  {
    "text": "But two is the minimum. You've seen this.",
    "start": "2586470",
    "end": "2591740"
  },
  {
    "text": "I mean, lots of cars,\nmany cars today, they have ultrasonic\nsensors in their bumpers.",
    "start": "2591740",
    "end": "2599540"
  },
  {
    "text": "And some of them just use the-- there's typically\nfour in the bumper.",
    "start": "2599540",
    "end": "2606260"
  },
  {
    "text": "And some of them just\nuse them individually and for just ranging.",
    "start": "2606260",
    "end": "2611730"
  },
  {
    "text": "So they just beep if something\nis close to one of the sensors, and that's all they do.",
    "start": "2611730",
    "end": "2618130"
  },
  {
    "text": "Some of them do\nsomething more advanced. So what they have is that they\nhave transducers with radiation",
    "start": "2618130",
    "end": "2624480"
  },
  {
    "text": "patterns that overlap. So this is one, this is another\none, this is another one,",
    "start": "2624480",
    "end": "2629799"
  },
  {
    "text": "and this is another one. And when the target is close, it\noverlaps more than one antenna",
    "start": "2629800",
    "end": "2635490"
  },
  {
    "text": "so they can basically\ntriangulate it. So they do a rho 1 to your\nfirst transducer, and a rho",
    "start": "2635490",
    "end": "2645030"
  },
  {
    "text": "2 to the second\ntransducer, and find, actually, not just the distance,\nbut also the bearing angle",
    "start": "2645030",
    "end": "2650880"
  },
  {
    "text": "of the target. And they actually can\nbuild a very crude-- kind of like a map around\nthe car in close proximity.",
    "start": "2650880",
    "end": "2659160"
  },
  {
    "text": "And the cars that, actually,\nthe more fancy cars that, for instance, have\nautomatic parking function,",
    "start": "2659160",
    "end": "2669760"
  },
  {
    "text": "those should do this. Because if you want to actually\nautomatically park the car,",
    "start": "2669760",
    "end": "2675990"
  },
  {
    "text": "just a proximity is not enough. You need to build a\nmini-map around the car.",
    "start": "2675990",
    "end": "2683130"
  },
  {
    "text": "Cameras are not great at\nvery close range because",
    "start": "2683130",
    "end": "2688859"
  },
  {
    "text": "of just the physical limitations\nof how you can place them around the car.",
    "start": "2688860",
    "end": "2694200"
  },
  {
    "text": "So ultrasonic are\nvery good for this. It's an application that is\na great fit for ultrasound,",
    "start": "2694200",
    "end": "2701790"
  },
  {
    "text": "because you need\nclose-range sensing. You are not typically\nmoving very fast.",
    "start": "2701790",
    "end": "2709230"
  },
  {
    "text": "Things are slow. So it's OK if your\nsensor is a little slow. And you need a solution\nthat is cheap and robust.",
    "start": "2709230",
    "end": "2716950"
  },
  {
    "text": "So ultrasonic sensor is\na great choice for that.",
    "start": "2716950",
    "end": "2722070"
  },
  {
    "text": "Questions?  So there's something really,\nreally cool and unique to sonar",
    "start": "2722070",
    "end": "2732069"
  },
  {
    "text": "when it comes to bearing\nangle estimation, which is you can actually do a\nclassification of targets",
    "start": "2732070",
    "end": "2740680"
  },
  {
    "text": "just based on DOA. I mean, when we\nhear classification,",
    "start": "2740680",
    "end": "2746740"
  },
  {
    "text": "we typically think about\nvision sensors like cameras with fancy neural networks\nthat do classification.",
    "start": "2746740",
    "end": "2755210"
  },
  {
    "text": "And those are, of course, the\nbest classifiers out there that can do very sophisticated\ntypes of classification.",
    "start": "2755210",
    "end": "2761980"
  },
  {
    "text": "But it turns out that\nan ultrasound sensor can do a very crude\nclassification for you",
    "start": "2761980",
    "end": "2767960"
  },
  {
    "text": "almost for free. So it's just a fun\nthing to look at. And it's purely, again, a\ngeometry-based argument.",
    "start": "2767960",
    "end": "2775800"
  },
  {
    "text": "So, here, what you\nneed is two pairs of transducers, tx, rx, so two\ntransmitters, two receivers.",
    "start": "2775800",
    "end": "2784040"
  },
  {
    "text": "That's the assumption. And what you do is,\nfirst you transmit with the first\ntransmitter, tx1 transmits.",
    "start": "2784040",
    "end": "2790460"
  },
  {
    "text": "And then, you measure\na DOA theta 1. And then you transmit\nwith tx2, and you",
    "start": "2790460",
    "end": "2797539"
  },
  {
    "text": "measure another DOA theta 2. And just by comparing\nthe two thetas,",
    "start": "2797540",
    "end": "2803690"
  },
  {
    "text": "you can distinguish\nthe three types of targets we\ntalked about, which is planes, edges, and corners.",
    "start": "2803690",
    "end": "2809730"
  },
  {
    "text": "And this is how it works,\nagain, pure geometry. Let's look at the plane case. So I'm writing these\nas trx because it's",
    "start": "2809730",
    "end": "2817609"
  },
  {
    "text": "like a transmitter\nreceiver combo",
    "start": "2817610",
    "end": "2822890"
  },
  {
    "text": "thing, co-located\ntransmitter receiver. So it's trx1, trx2. So each is both a tx and a rx.",
    "start": "2822890",
    "end": "2828710"
  },
  {
    "text": "And what we're doing, let's\nsay, first tx1 sends--",
    "start": "2828710",
    "end": "2833810"
  },
  {
    "text": "transmits. And what DOA do we measure? And we're also looking\nat DOA on rx1, let's say.",
    "start": "2833810",
    "end": "2840350"
  },
  {
    "text": "If it's far away, it doesn't\nmatter which one you look at. But let's say we're\njust looking at rx1.",
    "start": "2840350",
    "end": "2846200"
  },
  {
    "text": "So tx1 fires. What DOA do you measure? Well, we should look at\nthe virtual transmitter",
    "start": "2846200",
    "end": "2853430"
  },
  {
    "text": "corresponding to tx1, which\nis the mirror image of that relative to the plane.",
    "start": "2853430",
    "end": "2859490"
  },
  {
    "text": "So that's number one. And what DOA do you measure? Well, we measure theta 1.",
    "start": "2859490",
    "end": "2867050"
  },
  {
    "text": "I'm going to\nhighlight it in red. So that's your theta 1. Then x2 fires. What is the virtual transmitter\nfor tx2, highlighted in orange.",
    "start": "2867050",
    "end": "2877190"
  },
  {
    "text": "That's number two. Again, you just reflect\ntx relative to the plane.",
    "start": "2877190",
    "end": "2882560"
  },
  {
    "text": "So that's number two. And what do you do\nyou measure with two? You measure the larger angle\nhighlighted in orange, theta 2.",
    "start": "2882560",
    "end": "2890119"
  },
  {
    "text": "So if you compare\ntheta 1 and theta 2, or if you look at\ntheir difference, which we call psi, which is\ntheta 2 minus theta 1,",
    "start": "2890120",
    "end": "2897440"
  },
  {
    "text": "you see it's a positive value. So what? The so what, it becomes\nclear if we look",
    "start": "2897440",
    "end": "2904490"
  },
  {
    "text": "at a different class of target. So if you look at a\ncorner, for instance, I'm not going to do the full\nwalking through the geometry",
    "start": "2904490",
    "end": "2913640"
  },
  {
    "text": "because it's kind of obvious. But, again, you\ndo the same thing. You first do the tx1, look at\nthe corresponding virtual tx.",
    "start": "2913640",
    "end": "2921830"
  },
  {
    "text": "So it's going to be up here. And for tx2, it's\ngoing to be down here. And then you look at\nthe theta 1 and theta 2.",
    "start": "2921830",
    "end": "2928490"
  },
  {
    "text": "And now you see, for\nthis type of target, it's the exact opposite. So theta 2 minus theta 1\nbecomes negative for a corner.",
    "start": "2928490",
    "end": "2937700"
  },
  {
    "text": "And if you do that\nfor an edge, you would see that the\ntheta 1 and theta 2 become equal, which\nis pretty cool.",
    "start": "2937700",
    "end": "2943720"
  },
  {
    "text": "I mean, it's very limited\nwhat you can do with this. But it's kind of interesting\nthat just by pure geometry",
    "start": "2943720",
    "end": "2950309"
  },
  {
    "text": "you can do a very simple\nclassification and so on. I thought it's just\ncool to point that out.",
    "start": "2950310",
    "end": "2958510"
  },
  {
    "text": "So you just, again, have two\ntransmitters, two receivers, and do your DOA\nestimation twice.",
    "start": "2958510",
    "end": "2964770"
  },
  {
    "text": "And just by that delta\ndifference in the angle, you can do a bit\nof classification.",
    "start": "2964770",
    "end": "2970650"
  },
  {
    "text": "Any questions? Yes. Just [INAUDIBLE]\nmy understanding was that the angle between the\ntransmitter and the receiver",
    "start": "2970650",
    "end": "2976980"
  },
  {
    "text": "was [INAUDIBLE]. In the first case,\nwhy [INAUDIBLE] shouldn't that one be 0? [INAUDIBLE]?",
    "start": "2976980",
    "end": "2982080"
  },
  {
    "text": "First case, is it the\nplane, you mean, or? Why would it be 0?",
    "start": "2982080",
    "end": "2987330"
  },
  {
    "text": "Could you say that again? The bearing with the angle\nbetween the virtual tx1",
    "start": "2987330",
    "end": "2992520"
  },
  {
    "text": "and trx1, right? Yeah, but when we talk about\nthe angle, remember that-- oops,",
    "start": "2992520",
    "end": "2998940"
  },
  {
    "text": "sorry-- remember that there\nis a plane here. So our tx's and rx's\nhave their normal,",
    "start": "2998940",
    "end": "3005910"
  },
  {
    "text": "which is this, highlighted. So the angles are\nrelative to that.",
    "start": "3005910",
    "end": "3011180"
  },
  {
    "text": "If it was directly\npointing to the plane, yes, we would measure 0.",
    "start": "3011180",
    "end": "3018170"
  },
  {
    "text": "But not when there is an angle. ",
    "start": "3018170",
    "end": "3024190"
  },
  {
    "text": "So last part about\nsonar is basically",
    "start": "3024190",
    "end": "3031210"
  },
  {
    "text": "this idea of egomotion effect. So this is a big limitation\nof ultrasonic sensors, which",
    "start": "3031210",
    "end": "3040300"
  },
  {
    "text": "basically boils down to the\nfact that the speed of sound",
    "start": "3040300",
    "end": "3047050"
  },
  {
    "text": "is not that high. It's 340 or 30\nmeters per second.",
    "start": "3047050",
    "end": "3055150"
  },
  {
    "text": "So what can happen is that\nif your sensor is mounted on a platform that is moving,\na robot that is moving,",
    "start": "3055150",
    "end": "3063850"
  },
  {
    "text": "and that's what we\nmean by egomotion. So if the sensor\nmoves, what can happen",
    "start": "3063850",
    "end": "3070120"
  },
  {
    "text": "is that when your transmitter\ntransmits a waveform, by the time the echo\nis received back,",
    "start": "3070120",
    "end": "3076920"
  },
  {
    "text": "you are at a different position. And that position, well,\nyou might think, oh,",
    "start": "3076920",
    "end": "3082410"
  },
  {
    "text": "but we can ignore it. Well, it turns out that,\nno, it's not negligible. Even if you're moving at\na few meters per second,",
    "start": "3082410",
    "end": "3091330"
  },
  {
    "text": "which is 1% of the\nspeed of sound, that effect can be significant.",
    "start": "3091330",
    "end": "3097000"
  },
  {
    "text": "So by the time you\nreceive the echo, your platform has moved\nenough that that movement",
    "start": "3097000",
    "end": "3102510"
  },
  {
    "text": "is going to cause errors in\nthe range and the bearing angle estimation.",
    "start": "3102510",
    "end": "3108089"
  },
  {
    "text": "So that's the idea\nof egomotion effect. And it depends on a few factors.",
    "start": "3108090",
    "end": "3114460"
  },
  {
    "text": "One is, of course, the movement\nor the velocity of the robot",
    "start": "3114460",
    "end": "3119820"
  },
  {
    "text": "that the sensor is mounted on. The higher the velocity the\nbigger these effects are. The type of motion also matters.",
    "start": "3119820",
    "end": "3126540"
  },
  {
    "text": "Typically, linear motion is much\nworse than rotational motion. Rotational motion is\nusually not too bad,",
    "start": "3126540",
    "end": "3134920"
  },
  {
    "text": "except if it's at very\nhigh angular velocities. But linear motion, again,\neven a few meters per second,",
    "start": "3134920",
    "end": "3143260"
  },
  {
    "text": "you can get a 0.6 degree\nbearing angle error up to that, which is significant.",
    "start": "3143260",
    "end": "3149559"
  },
  {
    "text": "And, also, the effect depends\non the geometry of the target.",
    "start": "3149560",
    "end": "3154700"
  },
  {
    "text": "So, again, a plane, versus an\nedge, versus a corner effect",
    "start": "3154700",
    "end": "3159820"
  },
  {
    "text": "differently both the-- when it comes to egomotion,\nthe range and the bearing.",
    "start": "3159820",
    "end": "3167140"
  },
  {
    "text": "So sometimes you can have\nalgorithms that compensate",
    "start": "3167140",
    "end": "3173619"
  },
  {
    "text": "this effect to some extent. But the algorithms tend to\nbecome a bit too complex",
    "start": "3173620",
    "end": "3180790"
  },
  {
    "text": "and also not perfect. So, oftentimes, they're\nnot actually used. But just know that, in\nalgorithm, you can compensate",
    "start": "3180790",
    "end": "3188289"
  },
  {
    "text": "to some extent the egomotion. Now, the exact\neffect that egomotion",
    "start": "3188290",
    "end": "3196090"
  },
  {
    "text": "has on the range and\nthe bearing angle, you can calculate it for\nevery type of target.",
    "start": "3196090",
    "end": "3203290"
  },
  {
    "text": "And, in fact, it is\ndone in the notes. But I'm not going to bore\nyou with it because it's",
    "start": "3203290",
    "end": "3209800"
  },
  {
    "text": "purely geometric arguments. And I'll let you\nread it in the notes.",
    "start": "3209800",
    "end": "3214970"
  },
  {
    "text": "It's very detailed derivations\nfor every type of target. But just set it up for you so\nyou know, if you read this,",
    "start": "3214970",
    "end": "3221500"
  },
  {
    "text": "how the calculation\nis being done. Basically, we look at\ndifferent types of targets",
    "start": "3221500",
    "end": "3227350"
  },
  {
    "text": "starting with the plane. And we assume there\nis a transducer that",
    "start": "3227350",
    "end": "3234190"
  },
  {
    "text": "is moving at some velocity u. So at the time of transmit,\nit's at this position",
    "start": "3234190",
    "end": "3240369"
  },
  {
    "text": "highlighted in red. And by the time it\nreceives the echo, it's at this purple position.",
    "start": "3240370",
    "end": "3246400"
  },
  {
    "text": "So it basically\nmoves by this much from the time it transmits the\nwave to the time it receives",
    "start": "3246400",
    "end": "3253540"
  },
  {
    "text": "the echo. So, basically, the\nround-trip path of sound is-- for the plane case--",
    "start": "3253540",
    "end": "3260110"
  },
  {
    "text": "is this. And then, as usual, we have\nour frame of reference.",
    "start": "3260110",
    "end": "3265580"
  },
  {
    "text": "That's the x-axis. That's the y-axis. And the velocity is u. So it has an x component\nand a y component.",
    "start": "3265580",
    "end": "3272559"
  },
  {
    "text": "If the platform\nwas a stationary, it would stay just\nat this point. What it would measure\nin terms of the range",
    "start": "3272560",
    "end": "3281080"
  },
  {
    "text": "to the target would be d. d is this distance. So it would just hit\nthe wall and come back.",
    "start": "3281080",
    "end": "3286720"
  },
  {
    "text": "And your sensor would\nbe at the same place. So it would measure d. Now, because it is\nmoving, it's going",
    "start": "3286720",
    "end": "3293259"
  },
  {
    "text": "to measure a different range\nand a different time of flight. You can exactly solve for that.",
    "start": "3293260",
    "end": "3298817"
  },
  {
    "text": "And, again, I'll let\nyou read the math because it's pure geometry. But, for instance, for the\ncase of a plane target,",
    "start": "3298817",
    "end": "3305420"
  },
  {
    "text": "it comes to this, which is\nyour actual the time of flight that you measure is going\nto be-- this tau 0 is",
    "start": "3305420",
    "end": "3312850"
  },
  {
    "text": "the time of flight\nwith no egomotion, so if your transducer\nwas a stationary. But, now, because\nof the egomotion,",
    "start": "3312850",
    "end": "3320020"
  },
  {
    "text": "now you have this dependency\non the x and the y component of your ego velocity.",
    "start": "3320020",
    "end": "3326089"
  },
  {
    "text": "And, in this case, in the\ncase of a planar target, depending on what\nux and ui are, you",
    "start": "3326090",
    "end": "3331510"
  },
  {
    "text": "can measure a time\nof flight that is bigger or smaller than tau\n0, which is the stationary case.",
    "start": "3331510",
    "end": "3337987"
  },
  {
    "text": "Which kind of makes sense. If you're moving\ntowards the wall, for instance, you're\ngoing to measure a shorter time of flight.",
    "start": "3337987",
    "end": "3343000"
  },
  {
    "text": "If you're moving\naway from it, you're going to measure a\nlonger time of flight. So the effect--\nthe point here is,",
    "start": "3343000",
    "end": "3350079"
  },
  {
    "text": "you can exactly calculate\nthem just from geometry. And you can-- because\nyou can calculate them,",
    "start": "3350080",
    "end": "3356830"
  },
  {
    "text": "you can come up with\nalgorithms to compensate them to some extent. And it's also highly\ndependent on the velocity",
    "start": "3356830",
    "end": "3363730"
  },
  {
    "text": "and the geometry of the target. You can do the same calculation\nfor angle of arrival. Again, it's all in the notes.",
    "start": "3363730",
    "end": "3371200"
  },
  {
    "text": "I'm not going to\ngo through it all because it's a thing you need\nto sit down and at your own pace",
    "start": "3371200",
    "end": "3379180"
  },
  {
    "text": "go through it. Otherwise, it becomes very\ndry if you do it here. Any questions?",
    "start": "3379180",
    "end": "3384599"
  },
  {
    "start": "3384600",
    "end": "3389690"
  },
  {
    "text": "So we are pretty much done\nwith the discussion of sonar. I just want to summarize it all.",
    "start": "3389690",
    "end": "3398420"
  },
  {
    "text": "So we learned about the\nphysics of sonar, the system architecture, different\ntype of waveforms,",
    "start": "3398420",
    "end": "3404869"
  },
  {
    "text": "how you process them, how you\nestimate range and bearing. And as we did this,\nwe also learned",
    "start": "3404870",
    "end": "3412430"
  },
  {
    "text": "about all the limitations\nof sonar sensors. So very specifically,\nfor instance,",
    "start": "3412430",
    "end": "3419100"
  },
  {
    "text": "if you have a wide\nbeam patterns, that those can affect in\npoor bearing resolution.",
    "start": "3419100",
    "end": "3426230"
  },
  {
    "text": "We know that the\nsensing rate is not going to be very high in\nsonar because you're basically",
    "start": "3426230",
    "end": "3432740"
  },
  {
    "text": "limited by the speed of sound. The range is limited because of\nthe high attenuation of factor",
    "start": "3432740",
    "end": "3440690"
  },
  {
    "text": "of sound waves in air. We also know, if you\nhave smooth surfaces",
    "start": "3440690",
    "end": "3446839"
  },
  {
    "text": "at very oblique angles, you\nmight not receive any echoes from them, because\nmost of the sound",
    "start": "3446840",
    "end": "3453380"
  },
  {
    "text": "that hits it is going to\nbounce off away from you. So sonar typically has a\nhard time detecting targets",
    "start": "3453380",
    "end": "3462170"
  },
  {
    "text": "at oblique angles. You can have false\ndetections because",
    "start": "3462170",
    "end": "3469100"
  },
  {
    "text": "of large side lobes\nin your beam pattern or other non-idealities\nin your signals.",
    "start": "3469100",
    "end": "3478790"
  },
  {
    "text": "Just to make matters\nmore complicated, humidity and temperature\nvariations in air",
    "start": "3478790",
    "end": "3484220"
  },
  {
    "text": "cause changes in\nthe speed of sound. And every calculation\nthat we did, as you saw,",
    "start": "3484220",
    "end": "3489800"
  },
  {
    "text": "for ranging and bearing angle\nestimation, the speed of sound goes into those equations.",
    "start": "3489800",
    "end": "3495680"
  },
  {
    "text": "And you always assume\nsome constant for it. And if that constant\ndoesn't change what the physical\nspeed of sound is,",
    "start": "3495680",
    "end": "3501560"
  },
  {
    "text": "that's an additional\nsource of error. So all in all, what\nkind of performance",
    "start": "3501560",
    "end": "3507350"
  },
  {
    "text": "can you expect from\nyour sonar sensor? Maximum range, 10 to\n15 meters, I would say.",
    "start": "3507350",
    "end": "3515279"
  },
  {
    "text": "And, again, these numbers\nare not set in stone. I'm sure you can get more\nthan this with some effort.",
    "start": "3515280",
    "end": "3521100"
  },
  {
    "text": "But these are typical\nnumbers to expect from a good sonar for robotics.",
    "start": "3521100",
    "end": "3528150"
  },
  {
    "text": "Range resolution, a few\ncentimeters up to 10, 20 centimeters.",
    "start": "3528150",
    "end": "3533370"
  },
  {
    "text": "Bearing resolution,\ndepending on how you do it, you can do 0.2 degrees\nto maybe 1 degree.",
    "start": "3533370",
    "end": "3539070"
  },
  {
    "text": "And you can do about 10 to\n40 measurements a second.",
    "start": "3539070",
    "end": "3544380"
  },
  {
    "text": "So, I mean, if you\nlook at this slide, you're going to see\neverything here is a negative.",
    "start": "3544380",
    "end": "3550860"
  },
  {
    "text": "So these are all limitations. But I hope this doesn't\ncome through as,",
    "start": "3550860",
    "end": "3556140"
  },
  {
    "text": "so sonar is useless. No, that's by no means the case. It actually can be\nvery, very useful.",
    "start": "3556140",
    "end": "3562330"
  },
  {
    "text": "It all depends on\nyour applications. What are you trying to do,\nand what type of autonomy",
    "start": "3562330",
    "end": "3568859"
  },
  {
    "text": "you're trying to do, and\nwhat are the constraints you need to work with.",
    "start": "3568860",
    "end": "3573869"
  },
  {
    "text": "And, actually, sonar\ncan be a perfect fit. So that automated\nparking, for instance,",
    "start": "3573870",
    "end": "3579540"
  },
  {
    "text": "is one case where sonar\nis a very, very good fit. So, typically, if you're\nin short-range cases,",
    "start": "3579540",
    "end": "3584940"
  },
  {
    "text": "you don't have very\nfast egomotion. Things are stationary\nor moving slowly.",
    "start": "3584940",
    "end": "3590970"
  },
  {
    "text": "You don't need crazy\nhigh angular resolution. And you don't need crazy\nhigh measurement rates.",
    "start": "3590970",
    "end": "3600000"
  },
  {
    "text": "But you're looking for\nsomething reliable and cheap with not a lot of power\nor compute resources,",
    "start": "3600000",
    "end": "3608069"
  },
  {
    "text": "sonar can be perfect. Let's look at one\nsimple example of how",
    "start": "3608070",
    "end": "3613800"
  },
  {
    "text": "sonar mapping works\nin action in robotics, if I can open this link.",
    "start": "3613800",
    "end": "3620790"
  },
  {
    "text": "Before I play this, what\nyou're about to see, it's a little dark.",
    "start": "3620790",
    "end": "3625860"
  },
  {
    "text": "But so, let me actually\ngo to the-- here. So it's a room that is\nbeing videoed from the top.",
    "start": "3625860",
    "end": "3633840"
  },
  {
    "text": "And then, there's this\nlittle robot thing that is moving around the room.",
    "start": "3633840",
    "end": "3638910"
  },
  {
    "text": "And there is some objects. You have a box here, and\na box here, and a wall, and another little\nbox in the center.",
    "start": "3638910",
    "end": "3644560"
  },
  {
    "text": "And it has one sonar\nsensor mapped on it-- mounted on it. And it's going to map the\nroom as it moves around.",
    "start": "3644560",
    "end": "3652860"
  },
  {
    "text": "So it's a mapping\napplication in robotics. The arena for our robot. We place two objects in\nthe corner and the glass",
    "start": "3652860",
    "end": "3660510"
  },
  {
    "text": "object in the\nmiddle of the arena. I can't stop the audio, but-- The boundaries consist of\nthree wall panels and one glass",
    "start": "3660510",
    "end": "3666253"
  },
  {
    "text": "surface. As the robot-- So, here, they're\nshowing, basically, the live output of the map that\nis being generated by the sonar",
    "start": "3666253",
    "end": "3675410"
  },
  {
    "text": "sensor. So as it does a ranging and\na bearing angle estimation, it puts one dot in this 3D plot.",
    "start": "3675410",
    "end": "3683070"
  },
  {
    "text": "Basically, each is a target\nthat it is detecting. --navigates the arena, you can\nsee its 3D range data being",
    "start": "3683070",
    "end": "3689100"
  },
  {
    "text": "published on the point cloud.  So that's the kind of\nspeed that you get.",
    "start": "3689100",
    "end": "3696650"
  },
  {
    "text": "It's slow. It's not the fastest. It's not crazy high resolution. But, again, it could be useful.",
    "start": "3696650",
    "end": "3703020"
  },
  {
    "text": "I mean, if you give\nit enough time, it's going to\nbuild a decent map. I'm going to fast\nforward a little bit.",
    "start": "3703020",
    "end": "3709980"
  },
  {
    "text": "So you see, it's\ntowards the end. After the robot is done,\nwe get raw data points",
    "start": "3709980",
    "end": "3715250"
  },
  {
    "text": "describing the complete arena. If I stop here, I\nmean, it's not bad.",
    "start": "3715250",
    "end": "3722990"
  },
  {
    "text": "It got the-- so that's\none of the boxes. That's the other box. That's the thing in the center. A lot of false positives,\nlike stuff around here",
    "start": "3722990",
    "end": "3730160"
  },
  {
    "text": "is all false positive. Some stuff is detected\nbehind the walls, those are false positives. So it's not perfect, not\nsuper high resolution.",
    "start": "3730160",
    "end": "3738320"
  },
  {
    "text": "Nevertheless, it could\nbe pretty useful. I mean, these things are\ngoing to be very cheap, very low power, very low compute.",
    "start": "3738320",
    "end": "3746450"
  },
  {
    "text": "One more thing to note before\nwe close the chapter on sonar is that the type of\nsonar we talked about,",
    "start": "3746450",
    "end": "3752780"
  },
  {
    "text": "everything we talked\nabout, was very targeted to robotic autonomy\napplications.",
    "start": "3752780",
    "end": "3758820"
  },
  {
    "text": "In other applications,\nyou can have sonar with different transducer\ndesigns, different type of DSP,",
    "start": "3758820",
    "end": "3767040"
  },
  {
    "text": "different frequencies. And then you get very different\ntypes of outputs, basically,",
    "start": "3767040",
    "end": "3773579"
  },
  {
    "text": "from them. Medical applications is one. As we said, those operate at\nmuch, much higher frequencies.",
    "start": "3773580",
    "end": "3780900"
  },
  {
    "text": "Range is much shorter. But that's OK for\nmedical applications. Because they're at\nhigh frequencies,",
    "start": "3780900",
    "end": "3787049"
  },
  {
    "text": "they can have much\nsmaller transducers and many more of them. So they have big arrays of\npiezo or MEMS transducers.",
    "start": "3787050",
    "end": "3795270"
  },
  {
    "text": "And then, they can get much\nbetter angular resolution, for instance. So the numbers that\nwe're talking about,",
    "start": "3795270",
    "end": "3801630"
  },
  {
    "text": "if you talk to a person\nwho works in medical sonar, they might say, well, what\nare you talking about?",
    "start": "3801630",
    "end": "3807510"
  },
  {
    "text": "We can get 10 or 100\ntimes better than this. Yes, for that application,\nbecause they're",
    "start": "3807510",
    "end": "3813420"
  },
  {
    "text": "working with at\ndifferent frequencies with different constraints. For robotics, these are\nthe ballpark numbers",
    "start": "3813420",
    "end": "3822720"
  },
  {
    "text": "that you would estimate. Another type of sonar, which\nis actually very common,",
    "start": "3822720",
    "end": "3827760"
  },
  {
    "text": "not for robotic autonomy\nbut in other fields, is they do sonar underwater.",
    "start": "3827760",
    "end": "3836430"
  },
  {
    "text": "And the idea is called\nsynthetic aperture sonar, where they actually very\nslowly move their transducers.",
    "start": "3836430",
    "end": "3843150"
  },
  {
    "text": "And with some very clever\ntechniques and signal",
    "start": "3843150",
    "end": "3849210"
  },
  {
    "text": "processing, they can\neffectively generate virtual apertures\nthat are much larger",
    "start": "3849210",
    "end": "3855840"
  },
  {
    "text": "than the physical aperture. And as we know, the\nbeamwidth goes inversely with the aperture size.",
    "start": "3855840",
    "end": "3861510"
  },
  {
    "text": "So they can, in DSP, basically\nsynthesize this very tight sonar beams underwater.",
    "start": "3861510",
    "end": "3868030"
  },
  {
    "text": "And then, with that, they can\ndo extremely high resolution images, like this\none that you see.",
    "start": "3868030",
    "end": "3874890"
  },
  {
    "text": "It looks like just a picture,\nbut it's actually a 3D image. It has depth information.",
    "start": "3874890",
    "end": "3881039"
  },
  {
    "text": "So it's a ship from World\nWar II that was sunk. And it was a Norwegian tanker .",
    "start": "3881040",
    "end": "3886530"
  },
  {
    "text": "And this is a sonar picture of\nit, extremely high resolution. But this picture, this can take\nhours to collect all the data,",
    "start": "3886530",
    "end": "3895589"
  },
  {
    "text": "because they're very slowly\nmoving their transducers underwater. It also requires very high\namount of compute to generate.",
    "start": "3895590",
    "end": "3905160"
  },
  {
    "text": "It's all done in\npost-processing. So it's not like live view\nyou're going to get this image. No, this is hours of\ndata collection, maybe",
    "start": "3905160",
    "end": "3913500"
  },
  {
    "text": "another hour or two\nof crunching the data, and then, eventually,\nyou get this. Again, not useful\nfor robotic autonomy.",
    "start": "3913500",
    "end": "3921630"
  },
  {
    "text": "But just so you know, sonar\nand other applications can do very high\nresolution things.",
    "start": "3921630",
    "end": "3929610"
  },
  {
    "text": "Any questions? Yes. [INAUDIBLE] but why sonar\ncan achieve high resolution?",
    "start": "3929610",
    "end": "3936620"
  },
  {
    "text": "Radar also uses the FMCW,\nbut why it cannot achieve the wavelength for some reason?",
    "start": "3936620",
    "end": "3942860"
  },
  {
    "text": "So the question was why sonar\ncannot achieve high resolution? Was that the question, or?",
    "start": "3942860",
    "end": "3948560"
  },
  {
    "text": "Yeah, why sonar can't and\nradar under water cannot? Oh, actually, radar also can.",
    "start": "3948560",
    "end": "3953600"
  },
  {
    "text": "So when we talk about\nsonar resolution, first, radar can do better\nresolution than sonar.",
    "start": "3953600",
    "end": "3961490"
  },
  {
    "text": "It's all about--\nand by resolution, are we talking about angle\nresolution or range resolution?",
    "start": "3961490",
    "end": "3967680"
  },
  {
    "text": "Angle. Angle resolution, OK. So for sonar, we said\n0.2 degrees or so.",
    "start": "3967680",
    "end": "3974180"
  },
  {
    "text": "Well, yes, you can do that for-- again, on a good day.",
    "start": "3974180",
    "end": "3981230"
  },
  {
    "text": "You have good SNR, you don't\nhave a very cluttered scene,",
    "start": "3981230",
    "end": "3986390"
  },
  {
    "text": "everything looks good,\nand you can achieve that. Radar also can approach that\nand with better algorithms.",
    "start": "3986390",
    "end": "3993480"
  },
  {
    "text": "I mean, we haven't\ntalked about radar yet. But when we talk to it,\nwith better algorithms,",
    "start": "3993480",
    "end": "3999369"
  },
  {
    "text": "like if you use super resolution\nDOA algorithms in radar, you can do even better\nthan 0.2 degrees.",
    "start": "3999370",
    "end": "4006720"
  },
  {
    "text": "It really boils down to\ntwo things for radar. How big is the aperture and\nwhat type of signal processing",
    "start": "4006720",
    "end": "4013230"
  },
  {
    "text": "algorithms you can do. I know my answer is a little\nvague right now because we haven't talked about radar.",
    "start": "4013230",
    "end": "4018675"
  },
  {
    "text": "But when we do, remind\nme of this question and we can talk about the\nresolution limits for radar.",
    "start": "4018675",
    "end": "4025140"
  },
  {
    "text": "But it can get close\nto this or better. Yeah. ",
    "start": "4025140",
    "end": "4031880"
  },
  {
    "text": "Other questions? So now we can start\ntalking about radar.",
    "start": "4031880",
    "end": "4037295"
  },
  {
    "text": " So radar is another\nactive sensor",
    "start": "4037295",
    "end": "4045430"
  },
  {
    "text": "used for robotic mapping. And the main\ndifference with sonar",
    "start": "4045430",
    "end": "4051310"
  },
  {
    "text": "is basically that it uses\nelectromagnetic radiation instead of waves--\ninstead of sound waves",
    "start": "4051310",
    "end": "4059200"
  },
  {
    "text": "at radio frequencies. So it can determine range. It can determine an angle\nor direction of arrival.",
    "start": "4059200",
    "end": "4067240"
  },
  {
    "text": "As we will see,\nit can also detect radial velocity of targets\nusing the Doppler effect.",
    "start": "4067240",
    "end": "4076000"
  },
  {
    "text": "A little bit of history. So the first-- the concept\nwas proposed in early 1900s",
    "start": "4076000",
    "end": "4081610"
  },
  {
    "text": "by Heinrich Hertz. But the actual first\ndeployment of radar",
    "start": "4081610",
    "end": "4087640"
  },
  {
    "text": "was fueled by, basically, World\nWar, the Second World War,",
    "start": "4087640",
    "end": "4094480"
  },
  {
    "text": "as similar to many\nother technologies that, basically, they were\ndeveloped during the war.",
    "start": "4094480",
    "end": "4102520"
  },
  {
    "text": "So the first field\ndeployment of radars,",
    "start": "4102520",
    "end": "4109240"
  },
  {
    "text": "it was what was called chain\nhome radar at the time. And it was built by the\nBritish Royal Air Force",
    "start": "4109240",
    "end": "4117250"
  },
  {
    "text": "and deployed in 1938. And chain home was\na fascinating thing.",
    "start": "4117250",
    "end": "4122500"
  },
  {
    "text": "So it was, basically, a\nnumber of radar antennas",
    "start": "4122500",
    "end": "4128770"
  },
  {
    "text": "that were built along the\nEast Coast of United Kingdom.",
    "start": "4128770",
    "end": "4135939"
  },
  {
    "text": "It was operating at a frequency\nof between 20 and 30 megahertz. And it had a pretty long range.",
    "start": "4135939",
    "end": "4143170"
  },
  {
    "text": "It could detect up to 99 miles. And it was purely designed\nand built as an early warning",
    "start": "4143170",
    "end": "4150939"
  },
  {
    "text": "system for, basically,\nthe German aircraft that could come and attack the UK.",
    "start": "4150939",
    "end": "4159259"
  },
  {
    "text": "And it was one of\nthe main reasons that Germans actually never\nsuccessfully attacked the UK",
    "start": "4159260",
    "end": "4165170"
  },
  {
    "text": "during the World War because the\nchain home did such a nice job of the early warning.",
    "start": "4165170",
    "end": "4171290"
  },
  {
    "text": "So they had 21 sites\nalong the coast. And here's a picture.",
    "start": "4171290",
    "end": "4177089"
  },
  {
    "text": "So there was-- the antennas\nwere huge towers, 360 feet tall.",
    "start": "4177090",
    "end": "4182568"
  },
  {
    "text": "And each transmit antenna\nwas basically two towers. And the actual\nantenna was basically",
    "start": "4182569",
    "end": "4189350"
  },
  {
    "text": "hanging from the two towers. It was like a dipole antenna\nstructure, huge thing.",
    "start": "4189350",
    "end": "4195350"
  },
  {
    "text": "Receiver antennas were\nsmaller single towers. And here, on the map, you\nsee each dot is basically",
    "start": "4195350",
    "end": "4203750"
  },
  {
    "text": "one of these. And here's a picture\nof one of the sites. So they had 21 sites. It was a huge effort.",
    "start": "4203750",
    "end": "4210890"
  },
  {
    "text": "[INAUDIBLE] at the\ntime, essentially, there was no digital\nsignal processing.",
    "start": "4210890",
    "end": "4218040"
  },
  {
    "text": "So the signals were\nprocessed by humans. So they were basically\ncollecting these signals",
    "start": "4218040",
    "end": "4226250"
  },
  {
    "text": "from the radars in real time. And they had these\noffices full of engineers looking at the\nsignals and trying",
    "start": "4226250",
    "end": "4232460"
  },
  {
    "text": "to figure out what is the\nrange and what is the DOA. Fascinating. But it actually worked.",
    "start": "4232460",
    "end": "4239580"
  },
  {
    "text": "So that was radar in 1939. Today, it's everywhere.",
    "start": "4239580",
    "end": "4247380"
  },
  {
    "text": "I mean, from astronomy,\nto medical applications, to robotics, to\naviation, even as you",
    "start": "4247380",
    "end": "4255810"
  },
  {
    "text": "go to the airport, this fun\nlittle things in the airport security which have you do this,\nand then it rotates around you,",
    "start": "4255810",
    "end": "4262560"
  },
  {
    "text": "there's actually a big\nradar antenna array in them. It doesn't show\nthe actual output.",
    "start": "4262560",
    "end": "4270180"
  },
  {
    "text": "But these things have\nextremely high resolution. So when you stand\nin there, the device",
    "start": "4270180",
    "end": "4276150"
  },
  {
    "text": "is actually doing a very high\nresolution picture of you. And if you're concealing\nsomething, it can detect it.",
    "start": "4276150",
    "end": "4285300"
  },
  {
    "text": "The actual output that it shows\nthe TSA agents is not this.",
    "start": "4285300",
    "end": "4291960"
  },
  {
    "text": "It just highlights\npart of the body if it thinks something is there. But it's actually a super,\nsuper high resolution",
    "start": "4291960",
    "end": "4298050"
  },
  {
    "text": "radar, this thing. Cars have radars today,\njust the collision avoidance",
    "start": "4298050",
    "end": "4303970"
  },
  {
    "text": "and other things. But it's everywhere. Modern-day radar, it's\nreally deployed very widely.",
    "start": "4303970",
    "end": "4313309"
  },
  {
    "text": "So we're going to do the usual\nthing, start with the physics,",
    "start": "4313310",
    "end": "4319750"
  },
  {
    "text": "as you know. And the physics of\nradar, of course, we're going to talk about\nelectromagnetic waves",
    "start": "4319750",
    "end": "4324940"
  },
  {
    "text": "and also how antennas\nwork, basically. And then, from\nthere, we're going",
    "start": "4324940",
    "end": "4332050"
  },
  {
    "text": "to talk about the\nsystem architecture, how you do ranging, how you\ndo angle estimation,",
    "start": "4332050",
    "end": "4337810"
  },
  {
    "text": "how you do velocity estimation. And, also, along the way,\njust like we did for sonar,",
    "start": "4337810",
    "end": "4343000"
  },
  {
    "text": "we do a little bit of taxonomy\nof different types of radar. It's going to be our biggest\nchapter in the course.",
    "start": "4343000",
    "end": "4351170"
  },
  {
    "text": "So we will probably\nspend something like five lectures on\nit, for a good reason.",
    "start": "4351170",
    "end": "4357010"
  },
  {
    "text": "Because radar, I think, is-- well, as I said, it's been\naround for a long time,",
    "start": "4357010",
    "end": "4364940"
  },
  {
    "text": "since the 1930s or so. But it's really very\nrecently that people started",
    "start": "4364940",
    "end": "4372199"
  },
  {
    "text": "paying attention to it as a\nvery useful sensor for autonomy and robotics.",
    "start": "4372200",
    "end": "4377450"
  },
  {
    "text": "All the previous work\non radar was very driven by military aviation\nand astronomy.",
    "start": "4377450",
    "end": "4385350"
  },
  {
    "text": "So a ton of progress\nhas been made there but for very different\ntypes of applications.",
    "start": "4385350",
    "end": "4391500"
  },
  {
    "text": "So very different types of\nradars have been designed. So the type of radar\nthat, for instance, you",
    "start": "4391500",
    "end": "4397760"
  },
  {
    "text": "use in an airport, or on\nan airplane, or on a tank, it's not useful for robotics.",
    "start": "4397760",
    "end": "4403639"
  },
  {
    "text": "It's useful for\nthose applications. So that's why, for\nradar in robotics,",
    "start": "4403640",
    "end": "4410120"
  },
  {
    "text": "it's still an extremely\nactive field of research across the board from\nthe hardware design,",
    "start": "4410120",
    "end": "4416660"
  },
  {
    "text": "to the algorithms, signal\nmodels, simulation,",
    "start": "4416660",
    "end": "4421770"
  },
  {
    "text": "there's a lot of\nvery interesting work being done here. And I think it's one\nof those sensors,",
    "start": "4421770",
    "end": "4429989"
  },
  {
    "text": "or probably the main sensor\nfor robotic applications, that we're still, in my opinion,\nabout 10 to 20 years away",
    "start": "4429990",
    "end": "4439830"
  },
  {
    "text": "from it getting to the\nfull maturity level. So and by maturity level, I\nmean maybe the gold standard",
    "start": "4439830",
    "end": "4447480"
  },
  {
    "text": "is something like cameras. Digital cameras are\nextremely mature these days. I mean, you can buy them cheap,\nand robust, and extremely good",
    "start": "4447480",
    "end": "4457800"
  },
  {
    "text": "performance. Radars, again, for\nautonomy robotics,",
    "start": "4457800",
    "end": "4464040"
  },
  {
    "text": "they're not there yet. We've made a ton of progress. But it's still a very\nhot active field.",
    "start": "4464040",
    "end": "4469260"
  },
  {
    "text": "And that's why I want to\nreally spend the time on it and really give it the\nattention it deserves.",
    "start": "4469260",
    "end": "4476580"
  },
  {
    "text": "So starting with the\nphysics, the radars use electromagnetic radiation.",
    "start": "4476580",
    "end": "4484560"
  },
  {
    "text": "So these are waves that\npropagate in free space.",
    "start": "4484560",
    "end": "4489590"
  },
  {
    "text": "And they can be at\ndifferent frequencies. Radars use RF,\nradiofrequency waves.",
    "start": "4489590",
    "end": "4499160"
  },
  {
    "text": "And then, later, when\nwe talk about LiDAR, it's the exact same physics\njust at much higher frequency,",
    "start": "4499160",
    "end": "4504409"
  },
  {
    "text": "and that's optical frequency. That's where light is. But the physics is the same.",
    "start": "4504410",
    "end": "4509480"
  },
  {
    "text": "It's electromagnetic radiation. And, typically, you have an\nelectric field, we call that E,",
    "start": "4509480",
    "end": "4514910"
  },
  {
    "text": "and a magnetic field called H.\nAnd these two fields are always coupled and propagate together.",
    "start": "4514910",
    "end": "4520890"
  },
  {
    "text": "And in many applications,\nas we'll see, they're actually\nthe field vectors are orthogonal to each other,\nas shown here in red and blue.",
    "start": "4520890",
    "end": "4528409"
  },
  {
    "text": "And just like acoustic waves,\nthey have a wavelength lambda. And, also, you have a\ndirection of propagation.",
    "start": "4528410",
    "end": "4536130"
  },
  {
    "text": "So they're traveling\nin a certain direction in free space.",
    "start": "4536130",
    "end": "4542420"
  },
  {
    "text": "So the electromagnetic\nfields, as you might remember from a\nphysics course you've taken,",
    "start": "4542420",
    "end": "4549950"
  },
  {
    "text": "they are-- the\nphysics of them is governed by the extremely\nfamous Maxwell's equations.",
    "start": "4549950",
    "end": "4556670"
  },
  {
    "text": "So Maxwell's equations is a set\nof four differential equations that are pretty much\ncompletely describes",
    "start": "4556670",
    "end": "4565010"
  },
  {
    "text": "the physics of\nelectromagnetic waves. And the equations are in terms\nof the electric and magnetic",
    "start": "4565010",
    "end": "4570230"
  },
  {
    "text": "field. Very specifically, they\nsay that the divergence of the electric field\nis equal to rho,",
    "start": "4570230",
    "end": "4577340"
  },
  {
    "text": "which is the charge density,\nelectric charge density, divided by epsilon,\nwhich is a constant.",
    "start": "4577340",
    "end": "4582679"
  },
  {
    "text": "And it's the permittivity\nof the medium. Then they say the\nsecond equation",
    "start": "4582680",
    "end": "4587720"
  },
  {
    "text": "is divergence of H equals 0. So H is a divergence-free\nfield, as we say.",
    "start": "4587720",
    "end": "4594710"
  },
  {
    "text": "Then we have the\ncurl of E, which is equal to a constant times\nthe time derivative of H.",
    "start": "4594710",
    "end": "4602640"
  },
  {
    "text": "And that constant mu is the\npermeability of the medium. And finally, we\nhave the curl of H,",
    "start": "4602640",
    "end": "4608770"
  },
  {
    "text": "which is equal to J, which is\nthe electric current density in the medium, plus the\npermittivity times the time",
    "start": "4608770",
    "end": "4617190"
  },
  {
    "text": "derivative of E. So what matters for us here\nis, really, the important thing",
    "start": "4617190",
    "end": "4625469"
  },
  {
    "text": "is, as these two last\nequations show you, there's two things\nthat can give rise",
    "start": "4625470",
    "end": "4631650"
  },
  {
    "text": "to electromagnetic radiation. One is if you have a\ntime-varying magnetic field.",
    "start": "4631650",
    "end": "4637300"
  },
  {
    "text": "So if this partial H,\npartial T term is non-zero, that gives rise to\nan electric field.",
    "start": "4637300",
    "end": "4644760"
  },
  {
    "text": "Because then the curl\nof E becomes non-zero. And, also, from\nthe last equation,",
    "start": "4644760",
    "end": "4649869"
  },
  {
    "text": "we see that if you have a\ncurrent distribution that can vary with time, that can\ngive rise to a magnetic field.",
    "start": "4649870",
    "end": "4658110"
  },
  {
    "text": "Or if you have a\ntime-varying electric field, that can also give rise\nto a magnetic field.",
    "start": "4658110",
    "end": "4663340"
  },
  {
    "text": "So that's why the electric\nand the magnetic field always go together. Because if one of them\nis basically radiating",
    "start": "4663340",
    "end": "4671040"
  },
  {
    "text": "and is varying\nwith time, because of the Maxwell's\nequations, the other one also has to be non-zero.",
    "start": "4671040",
    "end": "4677820"
  },
  {
    "text": "And just to remind\nourselves what is the divergence and the\ncurl, the curl these are just",
    "start": "4677820",
    "end": "4684720"
  },
  {
    "text": "from calculus we know\nthe divergence of E. And, remember, E and H,\nthese are vector fields.",
    "start": "4684720",
    "end": "4691890"
  },
  {
    "text": "So these are fields in R3. So they have an x, and\na y, and a z component. And the divergence of\nE, it's a scalar value,",
    "start": "4691890",
    "end": "4699580"
  },
  {
    "text": "which is just a sum of the\nthree partial derivatives of E with respect to x, y, and z. So divergence of E\nis just a scalar.",
    "start": "4699580",
    "end": "4708060"
  },
  {
    "text": "And the curl of a field is\ngiven by this bigger expression. It's also related to\nits partial derivatives",
    "start": "4708060",
    "end": "4715170"
  },
  {
    "text": "with respect to x, y, and z. But the curl is a vector. It's a vector in R3.",
    "start": "4715170",
    "end": "4720970"
  },
  {
    "text": "So that's just a\nmathematical definition of a divergence and a curl.",
    "start": "4720970",
    "end": "4726750"
  },
  {
    "text": "I think this is a\ngood place to stop because we're almost out\nof time and, then, we'll",
    "start": "4726750",
    "end": "4732240"
  },
  {
    "text": "continue next time. Any questions? No? All right.",
    "start": "4732240",
    "end": "4737810"
  },
  {
    "start": "4737810",
    "end": "4742000"
  }
]