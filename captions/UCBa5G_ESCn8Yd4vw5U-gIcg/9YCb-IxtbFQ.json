[
  {
    "start": "0",
    "end": "4897"
  },
  {
    "text": "SPEAKER: Welcome back, everyone.",
    "start": "4897",
    "end": "6229"
  },
  {
    "text": "This is part three in our\nseries on information retrieval.",
    "start": "6230",
    "end": "9160"
  },
  {
    "text": "In part two we talked\nabout classical IR models.",
    "start": "9160",
    "end": "12110"
  },
  {
    "text": "I hope that gave you a sense\nfor how IR systems work",
    "start": "12110",
    "end": "14980"
  },
  {
    "text": "and we're now in a\ngood position to think",
    "start": "14980",
    "end": "16720"
  },
  {
    "text": "about how to evaluate them.",
    "start": "16720",
    "end": "18099"
  },
  {
    "text": "That is the topic of IR metrics.",
    "start": "18100",
    "end": "20860"
  },
  {
    "text": "Right at the start,\nI want to emphasize",
    "start": "20860",
    "end": "22750"
  },
  {
    "text": "that there are many ways\nin which we can assess",
    "start": "22750",
    "end": "25270"
  },
  {
    "text": "the quality of IR systems.",
    "start": "25270",
    "end": "27700"
  },
  {
    "text": "Of course, inevitably,\nwe'll end up",
    "start": "27700",
    "end": "29740"
  },
  {
    "text": "focused on accuracy\nstyle metrics.",
    "start": "29740",
    "end": "31840"
  },
  {
    "text": "They're prominent\nin the literature",
    "start": "31840",
    "end": "33550"
  },
  {
    "text": "and they are an important\naspect of system quality.",
    "start": "33550",
    "end": "36550"
  },
  {
    "text": "But there are many\nother things we",
    "start": "36550",
    "end": "38200"
  },
  {
    "text": "should think about for\nIR systems, particularly",
    "start": "38200",
    "end": "40630"
  },
  {
    "text": "when they are deployed.",
    "start": "40630",
    "end": "42050"
  },
  {
    "text": "For example, in\nindustrial contexts,",
    "start": "42050",
    "end": "44680"
  },
  {
    "text": "latency is often\nincredibly important.",
    "start": "44680",
    "end": "47200"
  },
  {
    "text": "Latency is the time it takes\nto execute a single query.",
    "start": "47200",
    "end": "50740"
  },
  {
    "text": "And in industrial contexts,\nlatency constraints",
    "start": "50740",
    "end": "53830"
  },
  {
    "text": "are often very tight.",
    "start": "53830",
    "end": "55270"
  },
  {
    "text": "Users expect low latency\nsystems and as a result,",
    "start": "55270",
    "end": "58940"
  },
  {
    "text": "high latency systems are\nbasically non-starters",
    "start": "58940",
    "end": "61780"
  },
  {
    "text": "no matter how accurate they are.",
    "start": "61780",
    "end": "63530"
  },
  {
    "text": "And so you often see\naccuracy and latency",
    "start": "63530",
    "end": "66170"
  },
  {
    "text": "paired as crucial aspects\nof system performance.",
    "start": "66170",
    "end": "70340"
  },
  {
    "text": "Throughput is similar.",
    "start": "70340",
    "end": "71750"
  },
  {
    "text": "Throughput is the total\nquery served in a fixed time",
    "start": "71750",
    "end": "75170"
  },
  {
    "text": "maybe via batch processing.",
    "start": "75170",
    "end": "77420"
  },
  {
    "text": "That's related to latency\nbut it could trade off",
    "start": "77420",
    "end": "80119"
  },
  {
    "text": "against latency.",
    "start": "80120",
    "end": "80930"
  },
  {
    "text": "You might decide to sacrifice\nsome per query speed",
    "start": "80930",
    "end": "84770"
  },
  {
    "text": "in order to process batches\nof examples efficiently.",
    "start": "84770",
    "end": "88259"
  },
  {
    "text": "And so whether you favor\nlatency or throughput",
    "start": "88260",
    "end": "90620"
  },
  {
    "text": "might depend on how users\ninteract with your system.",
    "start": "90620",
    "end": "94880"
  },
  {
    "text": "FLOPs is a hardware\nagnostic measure",
    "start": "94880",
    "end": "97430"
  },
  {
    "text": "of total compute resources.",
    "start": "97430",
    "end": "99480"
  },
  {
    "text": "This could be a good\nholistic measure.",
    "start": "99480",
    "end": "101720"
  },
  {
    "text": "It might be hard to measure and\nkind of hard to reason about,",
    "start": "101720",
    "end": "105920"
  },
  {
    "text": "but it could be a\ngood summary number.",
    "start": "105920",
    "end": "108259"
  },
  {
    "text": "But we might want to break it\ndown into component pieces.",
    "start": "108260",
    "end": "110990"
  },
  {
    "text": "For example, disk usage for your\nmodel or for your index that",
    "start": "110990",
    "end": "115310"
  },
  {
    "text": "can be an important cost,\nespecially for our index.",
    "start": "115310",
    "end": "118640"
  },
  {
    "text": "If we're going to\nindex the entire web,",
    "start": "118640",
    "end": "120590"
  },
  {
    "text": "then the cost of storing\nour index on disk",
    "start": "120590",
    "end": "122810"
  },
  {
    "text": "could be very large\nand we need to think",
    "start": "122810",
    "end": "124520"
  },
  {
    "text": "about that as a component\nof system quality.",
    "start": "124520",
    "end": "127640"
  },
  {
    "text": "For modern systems,\nmaybe more pressing",
    "start": "127640",
    "end": "129888"
  },
  {
    "text": "would be memory usage, again,\nfor the model or the index.",
    "start": "129889",
    "end": "133100"
  },
  {
    "text": "If we need to hold the\nentire index in memory",
    "start": "133100",
    "end": "135950"
  },
  {
    "text": "to have a low latency system,\nthat could get very expensive",
    "start": "135950",
    "end": "140090"
  },
  {
    "text": "very fast, for example.",
    "start": "140090",
    "end": "142620"
  },
  {
    "text": "And we could think about\ncost as a kind of way",
    "start": "142620",
    "end": "145220"
  },
  {
    "text": "to summarize all of two through\nsix in a way that kind of gets",
    "start": "145220",
    "end": "149630"
  },
  {
    "text": "us thinking holistically\nabout the system",
    "start": "149630",
    "end": "151610"
  },
  {
    "text": "and about trade offs that are\ninherent in these metrics.",
    "start": "151610",
    "end": "154370"
  },
  {
    "text": "For example, if we want a\nreally low latency system",
    "start": "154370",
    "end": "158090"
  },
  {
    "text": "we might need to hold\neverything in memory",
    "start": "158090",
    "end": "160440"
  },
  {
    "text": "and that could get very\nexpensive very fast.",
    "start": "160440",
    "end": "163610"
  },
  {
    "text": "But we could\ndecide, for example,",
    "start": "163610",
    "end": "165300"
  },
  {
    "text": "that we're going to cut costs\nby making our system smaller",
    "start": "165300",
    "end": "168050"
  },
  {
    "text": "overall, but that could lead\nto a sacrifice in accuracy",
    "start": "168050",
    "end": "172040"
  },
  {
    "text": "and so forth and so on.",
    "start": "172040",
    "end": "173510"
  },
  {
    "text": "Given a cost constraint, we'll\nstart thinking about trade offs",
    "start": "173510",
    "end": "177319"
  },
  {
    "text": "in a way that\nseems very healthy.",
    "start": "177320",
    "end": "179420"
  },
  {
    "text": "And I think more IR\nevaluation should",
    "start": "179420",
    "end": "181670"
  },
  {
    "text": "be in that holistic\nmode balancing",
    "start": "181670",
    "end": "183980"
  },
  {
    "text": "all of these considerations\nrelative to the interest",
    "start": "183980",
    "end": "187459"
  },
  {
    "text": "that we have and the constraints\nthat we're operating under.",
    "start": "187460",
    "end": "191640"
  },
  {
    "text": "All that said though, we are\nnow about to focus maybe too",
    "start": "191640",
    "end": "195360"
  },
  {
    "text": "obsessively on\naccuracy style metrics.",
    "start": "195360",
    "end": "198240"
  },
  {
    "text": "Let's dive into that.",
    "start": "198240",
    "end": "199590"
  },
  {
    "text": "As a preliminary, we should talk\nabout the kinds of data sets",
    "start": "199590",
    "end": "202920"
  },
  {
    "text": "that you're likely to\nhave at your disposal.",
    "start": "202920",
    "end": "205000"
  },
  {
    "text": "They're a little bit\ndifferent from the ones",
    "start": "205000",
    "end": "207030"
  },
  {
    "text": "we're accustomed to in NLP.",
    "start": "207030",
    "end": "208750"
  },
  {
    "text": "So this is worth a review.",
    "start": "208750",
    "end": "211010"
  },
  {
    "text": "Given a query Q&A\ncollection of N documents D,",
    "start": "211010",
    "end": "214900"
  },
  {
    "text": "one data type that\nyou might have",
    "start": "214900",
    "end": "216680"
  },
  {
    "text": "would be a complete partial gold\nranking of all the documents",
    "start": "216680",
    "end": "220549"
  },
  {
    "text": "with respect to your query.",
    "start": "220550",
    "end": "222080"
  },
  {
    "text": "And you would need such rankings\nfor every query in your data",
    "start": "222080",
    "end": "224780"
  },
  {
    "text": "set.",
    "start": "224780",
    "end": "225740"
  },
  {
    "text": "That would obviously be\ninordinately expensive to do",
    "start": "225740",
    "end": "229670"
  },
  {
    "text": "with all human labeling.",
    "start": "229670",
    "end": "231200"
  },
  {
    "text": "So most likely, if you\nhave a data set like this,",
    "start": "231200",
    "end": "234590"
  },
  {
    "text": "the rankings were automatically\ngenerated via some process.",
    "start": "234590",
    "end": "239120"
  },
  {
    "text": "It might be that you have an\nincomplete partial ranking",
    "start": "239120",
    "end": "242720"
  },
  {
    "text": "of the documents with\nrespect to queries.",
    "start": "242720",
    "end": "245040"
  },
  {
    "text": "So that it might be that\nvia some heuristics,",
    "start": "245040",
    "end": "247079"
  },
  {
    "text": "some documents were\npresented to humans",
    "start": "247080",
    "end": "249710"
  },
  {
    "text": "who then ranked them, maybe\njust a handful of them,",
    "start": "249710",
    "end": "252530"
  },
  {
    "text": "for each query.",
    "start": "252530",
    "end": "253580"
  },
  {
    "text": "And that could be the basis\nfor inferring automatically",
    "start": "253580",
    "end": "256730"
  },
  {
    "text": "a total ranking.",
    "start": "256730",
    "end": "257930"
  },
  {
    "text": "But there will be some\nnoise in this process that",
    "start": "257930",
    "end": "260750"
  },
  {
    "text": "goes beyond being\nstrictly gold labels",
    "start": "260750",
    "end": "263060"
  },
  {
    "text": "or you'll have\nonly partial labels",
    "start": "263060",
    "end": "265250"
  },
  {
    "text": "and need to think about that.",
    "start": "265250",
    "end": "267680"
  },
  {
    "text": "Another common kind of\nlabeling in this space",
    "start": "267680",
    "end": "269960"
  },
  {
    "text": "is to simply have binary\njudgments for whether or not",
    "start": "269960",
    "end": "273380"
  },
  {
    "text": "documents in our corpus are\nrelevant or not to the given",
    "start": "273380",
    "end": "277070"
  },
  {
    "text": "query.",
    "start": "277070",
    "end": "277580"
  },
  {
    "text": "That's very common to see.",
    "start": "277580",
    "end": "279710"
  },
  {
    "text": "This could be based\non human labeling",
    "start": "279710",
    "end": "281690"
  },
  {
    "text": "but it could also be based on\na weak supervision heuristic.",
    "start": "281690",
    "end": "284750"
  },
  {
    "text": "For example, whether\neach document",
    "start": "284750",
    "end": "287270"
  },
  {
    "text": "contains the query that we're\ninterested in as a substring.",
    "start": "287270",
    "end": "291349"
  },
  {
    "text": "That would obviously\nbe very noisy",
    "start": "291350",
    "end": "293270"
  },
  {
    "text": "but we found in practice\nthat kind of weak supervision",
    "start": "293270",
    "end": "296150"
  },
  {
    "text": "heuristic can be\npowerful when it comes",
    "start": "296150",
    "end": "298699"
  },
  {
    "text": "to training good IR systems.",
    "start": "298700",
    "end": "301980"
  },
  {
    "text": "And then maybe the most\nrelevant data type for us",
    "start": "301980",
    "end": "304860"
  },
  {
    "text": "as we think about neural IR\nsystems, in particular, is",
    "start": "304860",
    "end": "308430"
  },
  {
    "text": "the one given in item 4 here.",
    "start": "308430",
    "end": "310020"
  },
  {
    "text": "Here we have a tuple consisting\nof one positive document",
    "start": "310020",
    "end": "313860"
  },
  {
    "text": "for our query and one or\nmore negative documents",
    "start": "313860",
    "end": "317400"
  },
  {
    "text": "for our query.",
    "start": "317400",
    "end": "318360"
  },
  {
    "text": "That can be a device for\nboth training IR systems",
    "start": "318360",
    "end": "321419"
  },
  {
    "text": "and for evaluating them.",
    "start": "321420",
    "end": "324950"
  },
  {
    "text": "So with those data\ntypes in place,",
    "start": "324950",
    "end": "327100"
  },
  {
    "text": "let's start to think about\nthe metrics themselves.",
    "start": "327100",
    "end": "329420"
  },
  {
    "text": "We'll start with the\nsimplest ones which are",
    "start": "329420",
    "end": "331510"
  },
  {
    "text": "success and reciprocal rank.",
    "start": "331510",
    "end": "334030"
  },
  {
    "text": "A common ingredient\nfor both of them",
    "start": "334030",
    "end": "336010"
  },
  {
    "text": "is what I've called rank here.",
    "start": "336010",
    "end": "338110"
  },
  {
    "text": "For a ranking D\nof our documents,",
    "start": "338110",
    "end": "340659"
  },
  {
    "text": "we say that the rank for a query\nin that ranking is an integer",
    "start": "340660",
    "end": "344950"
  },
  {
    "text": "and that is the position of\nthe first relevant document",
    "start": "344950",
    "end": "348730"
  },
  {
    "text": "for the query in our ranking.",
    "start": "348730",
    "end": "350590"
  },
  {
    "text": "The first one.",
    "start": "350590",
    "end": "351820"
  },
  {
    "text": "And on that basis we\ncan define success",
    "start": "351820",
    "end": "354460"
  },
  {
    "text": "at K. We pick some value K\nand then we say for our query",
    "start": "354460",
    "end": "358180"
  },
  {
    "text": "and our ranking the\nvalue for success at k",
    "start": "358180",
    "end": "361000"
  },
  {
    "text": "is 1, if the rank for the query\nin our ranking is less than",
    "start": "361000",
    "end": "364960"
  },
  {
    "text": "or equal to k otherwise 0.",
    "start": "364960",
    "end": "367479"
  },
  {
    "text": "So a binary judgment.",
    "start": "367480",
    "end": "369410"
  },
  {
    "text": "And then the reciprocal\nrank is similar.",
    "start": "369410",
    "end": "372430"
  },
  {
    "text": "RR at K for a query\nin a document ranking",
    "start": "372430",
    "end": "375669"
  },
  {
    "text": "is 1 over the rank for\nthat query in the ranking",
    "start": "375670",
    "end": "379090"
  },
  {
    "text": "if the rank is less than\nor equal to K, otherwise 0.",
    "start": "379090",
    "end": "383110"
  },
  {
    "text": "So this is identical to success\nexcept where success we have 1,",
    "start": "383110",
    "end": "387169"
  },
  {
    "text": "now we have 1 over\nthe actual rank value.",
    "start": "387170",
    "end": "390260"
  },
  {
    "text": "But we map to 0 all cases\nwhere rank is below K.",
    "start": "390260",
    "end": "395630"
  },
  {
    "text": "And then MRR at K\nis a common metric",
    "start": "395630",
    "end": "397792"
  },
  {
    "text": "that you see in the\nliterature and that's",
    "start": "397792",
    "end": "399500"
  },
  {
    "text": "simply the average over multiple\nqueries for the RR at K values.",
    "start": "399500",
    "end": "406400"
  },
  {
    "text": "Let's get a deeper\nfeel for these metrics",
    "start": "406400",
    "end": "408620"
  },
  {
    "text": "by looking at some examples.",
    "start": "408620",
    "end": "410220"
  },
  {
    "text": "And I'm going to use these\nrankings as running examples.",
    "start": "410220",
    "end": "413085"
  },
  {
    "text": "Here's the first one.",
    "start": "413085",
    "end": "413960"
  },
  {
    "text": "This is a ranking\nof six documents",
    "start": "413960",
    "end": "416389"
  },
  {
    "text": "relative to some\nfixed query q star",
    "start": "416390",
    "end": "420230"
  },
  {
    "text": "indicates that the document was\njudged relevant to the query.",
    "start": "420230",
    "end": "424260"
  },
  {
    "text": "So in this ranking, the first\ntwo are considered relevant",
    "start": "424260",
    "end": "427670"
  },
  {
    "text": "and the final one in the ranking\nis also considered relevant.",
    "start": "427670",
    "end": "431420"
  },
  {
    "text": "Here's a second ranking\nand this ranking again it's",
    "start": "431420",
    "end": "434060"
  },
  {
    "text": "the same three stars but they\nappear in different positions",
    "start": "434060",
    "end": "436680"
  },
  {
    "text": "now.",
    "start": "436680",
    "end": "437180"
  },
  {
    "text": "The first relevant\ndocument is at position 2",
    "start": "437180",
    "end": "439940"
  },
  {
    "text": "and the other two are\nin positions 5 and 6.",
    "start": "439940",
    "end": "443330"
  },
  {
    "text": "And then for document ranking\nthree again same three stars",
    "start": "443330",
    "end": "446240"
  },
  {
    "text": "but now they're at positions\n3, 4, and 5 in the ranking.",
    "start": "446240",
    "end": "450410"
  },
  {
    "text": "Before we even\nthink about metrics",
    "start": "450410",
    "end": "452240"
  },
  {
    "text": "you might step back\nand ask yourselves,",
    "start": "452240",
    "end": "454460"
  },
  {
    "text": "which one of these\nrankings is the best?",
    "start": "454460",
    "end": "457550"
  },
  {
    "text": "And it might not be\nso obvious, it might,",
    "start": "457550",
    "end": "460129"
  },
  {
    "text": "depend on perspective.",
    "start": "460130",
    "end": "461360"
  },
  {
    "text": "For example, document\nranking 1 looks really good",
    "start": "461360",
    "end": "465110"
  },
  {
    "text": "because the first two documents\nin the ranking are relevant.",
    "start": "465110",
    "end": "469039"
  },
  {
    "text": "However, it has the third star\nall the way down in last place",
    "start": "469040",
    "end": "474110"
  },
  {
    "text": "whereas just for a comparison,\nif you look at ranking 3,",
    "start": "474110",
    "end": "478490"
  },
  {
    "text": "all of its stars are low\nin positions 3, 4, and 5",
    "start": "478490",
    "end": "482090"
  },
  {
    "text": "but at least it didn't put\nany of them in last place",
    "start": "482090",
    "end": "485720"
  },
  {
    "text": "and then document ranking\n2 might look intermediate",
    "start": "485720",
    "end": "488330"
  },
  {
    "text": "between those two extremes.",
    "start": "488330",
    "end": "490990"
  },
  {
    "text": "So obviously,\ndifferent metrics will",
    "start": "490990",
    "end": "492780"
  },
  {
    "text": "be sensitive to different\nnotions of quality",
    "start": "492780",
    "end": "495090"
  },
  {
    "text": "in that sense and it\nmight be hard to decide",
    "start": "495090",
    "end": "498270"
  },
  {
    "text": "a priori which kind of quality\nwe're actually seeking.",
    "start": "498270",
    "end": "501720"
  },
  {
    "text": "It's going to be\nall about trade offs",
    "start": "501720",
    "end": "503430"
  },
  {
    "text": "and reflecting on those\nhigh level considerations.",
    "start": "503430",
    "end": "507940"
  },
  {
    "text": "Let's return to\nsuccess and reciprocal",
    "start": "507940",
    "end": "509910"
  },
  {
    "text": "rank, how do they do?",
    "start": "509910",
    "end": "511170"
  },
  {
    "text": "Success at 2 for document\nranking 1 given our fixed query",
    "start": "511170",
    "end": "515070"
  },
  {
    "text": "is 1 and that's because there\nis some relevant document",
    "start": "515070",
    "end": "518969"
  },
  {
    "text": "at or above position\n2 in this ranking.",
    "start": "518970",
    "end": "521957"
  },
  {
    "text": "It doesn't really\nmatter in this case",
    "start": "521958",
    "end": "523500"
  },
  {
    "text": "that there are two of them.",
    "start": "523500",
    "end": "525180"
  },
  {
    "text": "Same thing for ranking 2.",
    "start": "525180",
    "end": "526950"
  },
  {
    "text": "We get a value of\n1 because there is",
    "start": "526950",
    "end": "528870"
  },
  {
    "text": "a star at or above position 2.",
    "start": "528870",
    "end": "532080"
  },
  {
    "text": "Whereas ranking 3 gives us\nsuccess at 2 of 0 and that's",
    "start": "532080",
    "end": "536220"
  },
  {
    "text": "because there are no\nstars at or above position",
    "start": "536220",
    "end": "539490"
  },
  {
    "text": "2 in the ranking.",
    "start": "539490",
    "end": "541880"
  },
  {
    "text": "The reciprocal rank values\nat 2 will be similar",
    "start": "541880",
    "end": "544580"
  },
  {
    "text": "but a little bit more nuanced.",
    "start": "544580",
    "end": "546270"
  },
  {
    "text": "The RR at 2 for\nthe first ranking",
    "start": "546270",
    "end": "548150"
  },
  {
    "text": "is 1 and that's\nbecause it's 1 over 1",
    "start": "548150",
    "end": "550970"
  },
  {
    "text": "so we have our first relevant\ndocument in position 1.",
    "start": "550970",
    "end": "556860"
  },
  {
    "text": "Now the denominator\nthere is the rank.",
    "start": "556860",
    "end": "560810"
  },
  {
    "text": "Whereas for ranking\n2, it's 1 over 2",
    "start": "560810",
    "end": "563210"
  },
  {
    "text": "and that's because the\nfirst relevant document now",
    "start": "563210",
    "end": "566090"
  },
  {
    "text": "is in position 2 here.",
    "start": "566090",
    "end": "568470"
  },
  {
    "text": "Whereas for document 3 as\nbefore, we get an RR at 2 of 0",
    "start": "568470",
    "end": "573209"
  },
  {
    "text": "because there are no stars\nat or above 2 in the ranking.",
    "start": "573210",
    "end": "578650"
  },
  {
    "text": "Let's move now to\nprecision and recall.",
    "start": "578650",
    "end": "580480"
  },
  {
    "text": "These are classic IR\nmetrics and they're",
    "start": "580480",
    "end": "582610"
  },
  {
    "text": "going to be more nuanced\nthan success in RR",
    "start": "582610",
    "end": "585790"
  },
  {
    "text": "because they are going to be\nsensitive to multiple stars.",
    "start": "585790",
    "end": "589029"
  },
  {
    "text": "For success and RR, we really\nonly cared about one star",
    "start": "589030",
    "end": "592553"
  },
  {
    "text": "whereas now we're going to\ncare about the full set of them",
    "start": "592553",
    "end": "594970"
  },
  {
    "text": "that we have.",
    "start": "594970",
    "end": "596379"
  },
  {
    "text": "Two preliminary concepts.",
    "start": "596380",
    "end": "598130"
  },
  {
    "text": "First, the return set\nfor a ranking at value K",
    "start": "598130",
    "end": "601750"
  },
  {
    "text": "is the set of documents in\nthe ranking at or above K.",
    "start": "601750",
    "end": "606010"
  },
  {
    "text": "And the relevant set for a\nquery given a document ranking",
    "start": "606010",
    "end": "609790"
  },
  {
    "text": "is simply the set of\nall documents that",
    "start": "609790",
    "end": "612579"
  },
  {
    "text": "are relevant to the query that\nis all the ones in my notation",
    "start": "612580",
    "end": "615550"
  },
  {
    "text": "that have stars attached to\nthem anywhere in the ranking.",
    "start": "615550",
    "end": "620050"
  },
  {
    "text": "Then we can define precision\nat a relevant value",
    "start": "620050",
    "end": "622899"
  },
  {
    "text": "at a chosen value K.\nThe precision at K here.",
    "start": "622900",
    "end": "626480"
  },
  {
    "text": "The numerator is the\nreturn set intersected",
    "start": "626480",
    "end": "629560"
  },
  {
    "text": "with the relevant set and the\ndenominator is the value K",
    "start": "629560",
    "end": "634720"
  },
  {
    "text": "This is kind of intuitive\nin terms of precision.",
    "start": "634720",
    "end": "637040"
  },
  {
    "text": "If we think about the values\nat or above K as the guesses",
    "start": "637040",
    "end": "640240"
  },
  {
    "text": "that we made, with precision\nwe're saying how many of those",
    "start": "640240",
    "end": "643330"
  },
  {
    "text": "guesses were good ones.",
    "start": "643330",
    "end": "645820"
  },
  {
    "text": "And recall is a dual of that.",
    "start": "645820",
    "end": "647920"
  },
  {
    "text": "Recall has the same\ndenominator, the recall at K",
    "start": "647920",
    "end": "652240"
  },
  {
    "text": "is the return set intersected\nwith the relevant set",
    "start": "652240",
    "end": "655480"
  },
  {
    "text": "the number of those\ndivided by, in this case,",
    "start": "655480",
    "end": "658760"
  },
  {
    "text": "the number of\nrelevant documents.",
    "start": "658760",
    "end": "661120"
  },
  {
    "text": "And so this is\nkind of like saying",
    "start": "661120",
    "end": "663460"
  },
  {
    "text": "if the set of\nthings at or above K",
    "start": "663460",
    "end": "665860"
  },
  {
    "text": "are our guesses, how\nmany of the relevant ones",
    "start": "665860",
    "end": "669130"
  },
  {
    "text": "actually burbled up\nto be at or above K,",
    "start": "669130",
    "end": "672680"
  },
  {
    "text": "a kind of duel of precision.",
    "start": "672680",
    "end": "675399"
  },
  {
    "text": "Let's see how these\nvalues play out",
    "start": "675400",
    "end": "677200"
  },
  {
    "text": "in terms of our three rankings.",
    "start": "677200",
    "end": "678880"
  },
  {
    "text": "We'll do precision first.",
    "start": "678880",
    "end": "680530"
  },
  {
    "text": "Precision at 2 in our\nfirst ranking is 2 out of 2",
    "start": "680530",
    "end": "684340"
  },
  {
    "text": "because we set K at or above\n2 and both of those documents",
    "start": "684340",
    "end": "689320"
  },
  {
    "text": "are relevant.",
    "start": "689320",
    "end": "690490"
  },
  {
    "text": "For ranking 2 it's 1 out of 2.",
    "start": "690490",
    "end": "692440"
  },
  {
    "text": "Because again, we have\nto set two documents",
    "start": "692440",
    "end": "694850"
  },
  {
    "text": "in our denominator and\nonly one in our numerator.",
    "start": "694850",
    "end": "698630"
  },
  {
    "text": "Only one relevant document\nthere whereas for ranking 3,",
    "start": "698630",
    "end": "702770"
  },
  {
    "text": "precision at 2 is 0 out of 2.",
    "start": "702770",
    "end": "706350"
  },
  {
    "text": "Let's look at the recall.",
    "start": "706350",
    "end": "707699"
  },
  {
    "text": "The recall at two for our\nfirst ranking is 2 out of 3.",
    "start": "707700",
    "end": "710580"
  },
  {
    "text": "Recall the\ndenominator there is 3",
    "start": "710580",
    "end": "712178"
  },
  {
    "text": "because there are three\nrelevant documents,",
    "start": "712178",
    "end": "713970"
  },
  {
    "text": "three stars and two of\nthem are at or above",
    "start": "713970",
    "end": "717120"
  },
  {
    "text": "K. So that's quite\nan impressive value.",
    "start": "717120",
    "end": "719050"
  },
  {
    "text": "It's like the max there.",
    "start": "719050",
    "end": "720630"
  },
  {
    "text": "For document ranking\n2 it's 1 out of three.",
    "start": "720630",
    "end": "723030"
  },
  {
    "text": "3, we have three relevant\ndocuments in the denominator",
    "start": "723030",
    "end": "725880"
  },
  {
    "text": "and only one of them\nis at or above K.",
    "start": "725880",
    "end": "729060"
  },
  {
    "text": "And then finally, as you\ncould predict for ranking 3,",
    "start": "729060",
    "end": "731790"
  },
  {
    "text": "it's 0 out of 3 because there\nare no relevant documents",
    "start": "731790",
    "end": "735449"
  },
  {
    "text": "at or above 2 here.",
    "start": "735450",
    "end": "737610"
  },
  {
    "text": "So that kind of reproduces\nmore or less the ranking",
    "start": "737610",
    "end": "740670"
  },
  {
    "text": "that we saw for success\nand reciprocal rank.",
    "start": "740670",
    "end": "745470"
  },
  {
    "text": "But here's a twist.",
    "start": "745470",
    "end": "746759"
  },
  {
    "text": "Suppose we set our value of K\nto 5 whereas before it was 2.",
    "start": "746760",
    "end": "752310"
  },
  {
    "text": "Now we get this set of\nprecision and recall values",
    "start": "752310",
    "end": "755190"
  },
  {
    "text": "and the noteworthy thing\nhere is that having set it",
    "start": "755190",
    "end": "757980"
  },
  {
    "text": "at 5 document ranking 3 is\nnow clearly in the lead.",
    "start": "757980",
    "end": "762300"
  },
  {
    "text": "And it's in the lead because\nit didn't put anything",
    "start": "762300",
    "end": "764730"
  },
  {
    "text": "in position 6.",
    "start": "764730",
    "end": "766240"
  },
  {
    "text": "So it got precision\nat 5 out of 3 out of 5",
    "start": "766240",
    "end": "769720"
  },
  {
    "text": "and it got recall at 5 of 3\nout of 3 whereas both of these",
    "start": "769720",
    "end": "773290"
  },
  {
    "text": "are less good.",
    "start": "773290",
    "end": "774310"
  },
  {
    "text": "And that shows you how\nimportant the value of k",
    "start": "774310",
    "end": "778810"
  },
  {
    "text": "was to our overall\nassessment of quality.",
    "start": "778810",
    "end": "782020"
  },
  {
    "text": "And we should think when we use\nthese metrics about what we're",
    "start": "782020",
    "end": "785260"
  },
  {
    "text": "doing when we set\nk and how it might",
    "start": "785260",
    "end": "787180"
  },
  {
    "text": "affect our assessment\nof ranking quality.",
    "start": "787180",
    "end": "791870"
  },
  {
    "text": "Average precision is\na nice alternative",
    "start": "791870",
    "end": "794270"
  },
  {
    "text": "because it's less\nsensitive to the value of k",
    "start": "794270",
    "end": "796640"
  },
  {
    "text": "and we just saw how\nimpactful that can be.",
    "start": "796640",
    "end": "799100"
  },
  {
    "text": "Average precision for a query\nrelative to a document ranking",
    "start": "799100",
    "end": "803360"
  },
  {
    "text": "is kind of intuitively\nspelled out like this,",
    "start": "803360",
    "end": "805790"
  },
  {
    "text": "for the numerator we're\ngoing to get precision",
    "start": "805790",
    "end": "807949"
  },
  {
    "text": "values for every step where\nthere is a relevant document.",
    "start": "807950",
    "end": "812480"
  },
  {
    "text": "Every place where\nthere is a star",
    "start": "812480",
    "end": "814310"
  },
  {
    "text": "and we sum those up and\nthen the denominator",
    "start": "814310",
    "end": "817910"
  },
  {
    "text": "is the set of\nrelevant documents.",
    "start": "817910",
    "end": "821160"
  },
  {
    "text": "So here's how this plays out,\nagain, using those same three",
    "start": "821160",
    "end": "823940"
  },
  {
    "text": "rankings that we had before.",
    "start": "823940",
    "end": "825770"
  },
  {
    "text": "We have relevant documents\nfor ranking 1 at 1, 2, and 6.",
    "start": "825770",
    "end": "830540"
  },
  {
    "text": "So those are the\nthree precision values",
    "start": "830540",
    "end": "832519"
  },
  {
    "text": "that we check, and\nwe simply sum those",
    "start": "832520",
    "end": "834830"
  },
  {
    "text": "up to get 2 out of 5 over 3.",
    "start": "834830",
    "end": "838190"
  },
  {
    "text": "For document\nranking 2, we sum up",
    "start": "838190",
    "end": "840920"
  },
  {
    "text": "the same things, but now\nat positions 2, 5, and 6,",
    "start": "840920",
    "end": "844430"
  },
  {
    "text": "and we get 1.4 divided by 3.",
    "start": "844430",
    "end": "847130"
  },
  {
    "text": "And then for D3, we\nget relevant position--",
    "start": "847130",
    "end": "850490"
  },
  {
    "text": "we have relevant\ndocuments at 3, 4, and 5.",
    "start": "850490",
    "end": "853020"
  },
  {
    "text": "Those are our precision\nvalues, and they sum to 1.43.",
    "start": "853020",
    "end": "856740"
  },
  {
    "text": "And this is noteworthy\nbecause document ranking 1",
    "start": "856740",
    "end": "860250"
  },
  {
    "text": "is the clear winner,\neven though we have",
    "start": "860250",
    "end": "862170"
  },
  {
    "text": "no sensitivity to K anymore.",
    "start": "862170",
    "end": "864149"
  },
  {
    "text": "But in fact, ranking three\ninched ahead of ranking 2",
    "start": "864150",
    "end": "868380"
  },
  {
    "text": "in this metric, which is\nsomething that we hadn't really",
    "start": "868380",
    "end": "870840"
  },
  {
    "text": "seen before, except for\nthat one case, where we set",
    "start": "870840",
    "end": "873870"
  },
  {
    "text": "K low for precision and recall.",
    "start": "873870",
    "end": "876660"
  },
  {
    "text": "This is nice because we don't\nhave the sensitivity to K",
    "start": "876660",
    "end": "879500"
  },
  {
    "text": "anymore.",
    "start": "879500",
    "end": "880000"
  },
  {
    "text": "We've abstracted over\nall the different values",
    "start": "880000",
    "end": "882420"
  },
  {
    "text": "we could have chosen.",
    "start": "882420",
    "end": "883560"
  },
  {
    "text": "And we still have\nthis numerator here,",
    "start": "883560",
    "end": "885480"
  },
  {
    "text": "keeping track of the number\nof relevant documents.",
    "start": "885480",
    "end": "888420"
  },
  {
    "start": "888420",
    "end": "891190"
  },
  {
    "text": "That's a sampling\nof common metrics.",
    "start": "891190",
    "end": "893107"
  },
  {
    "text": "There are, of course,\nmany more, but they'll",
    "start": "893107",
    "end": "894940"
  },
  {
    "text": "follow similar patterns.",
    "start": "894940",
    "end": "896320"
  },
  {
    "text": "Let's step back here\nand ask, which metric",
    "start": "896320",
    "end": "898960"
  },
  {
    "text": "should you be using?",
    "start": "898960",
    "end": "900080"
  },
  {
    "text": "And you can probably anticipate\nmy answer at this point.",
    "start": "900080",
    "end": "902770"
  },
  {
    "text": "There is no single answer.",
    "start": "902770",
    "end": "904420"
  },
  {
    "text": "Let's just think\nabout some trade-offs.",
    "start": "904420",
    "end": "906339"
  },
  {
    "text": "For you, is the\ncost of scrolling",
    "start": "906340",
    "end": "908860"
  },
  {
    "text": "through k passages low\nfor your users or for you?",
    "start": "908860",
    "end": "912880"
  },
  {
    "text": "Then maybe success at K\nis fine-grained enough,",
    "start": "912880",
    "end": "915580"
  },
  {
    "text": "because all you need to\ndo is find a relevant one",
    "start": "915580",
    "end": "917920"
  },
  {
    "text": "in that set of K documents.",
    "start": "917920",
    "end": "920540"
  },
  {
    "text": "Are there multiple relevant\ndocuments per query?",
    "start": "920540",
    "end": "923899"
  },
  {
    "text": "If so, success and\nreciprocal rank",
    "start": "923900",
    "end": "926660"
  },
  {
    "text": "are probably going to be too\ncoarse-grained because they're",
    "start": "926660",
    "end": "929149"
  },
  {
    "text": "not sensitive to having these\nmultiple relevant documents.",
    "start": "929150",
    "end": "933500"
  },
  {
    "text": "Is it more important to find\nevery relevant document?",
    "start": "933500",
    "end": "937160"
  },
  {
    "text": "If so, favor Recall.",
    "start": "937160",
    "end": "939350"
  },
  {
    "text": "Is it more important to review\nonly relevant documents?",
    "start": "939350",
    "end": "942649"
  },
  {
    "text": "If so, favor Precision.",
    "start": "942650",
    "end": "945117"
  },
  {
    "text": "This would be a case where\nthe cost of missing something",
    "start": "945117",
    "end": "947450"
  },
  {
    "text": "is high, but the cost\nof review is low.",
    "start": "947450",
    "end": "951110"
  },
  {
    "text": "Down here, maybe the cost\nof review could be high,",
    "start": "951110",
    "end": "954200"
  },
  {
    "text": "but we don't really pay\ntoo much if we miss things.",
    "start": "954200",
    "end": "956510"
  },
  {
    "text": "We just need to find a\nfew relevant exemplars,",
    "start": "956510",
    "end": "958880"
  },
  {
    "text": "and so we can favor\nprecision in that case.",
    "start": "958880",
    "end": "962630"
  },
  {
    "text": "F1@K is the harmonic mean\nof the precision and recall",
    "start": "962630",
    "end": "966440"
  },
  {
    "text": "values at K. And that can\nbe used where there are",
    "start": "966440",
    "end": "969200"
  },
  {
    "text": "multiple relevant documents.",
    "start": "969200",
    "end": "970700"
  },
  {
    "text": "But their relative order above\nK doesn't matter that much.",
    "start": "970700",
    "end": "974550"
  },
  {
    "text": "And so, you've decided to\nbalance precision and recall.",
    "start": "974550",
    "end": "978920"
  },
  {
    "text": "Average precision, of all\nthe metrics I showed you,",
    "start": "978920",
    "end": "981740"
  },
  {
    "text": "will give the finest-grained\ndistinctions of all the metrics",
    "start": "981740",
    "end": "985220"
  },
  {
    "text": "that we discussed.",
    "start": "985220",
    "end": "986029"
  },
  {
    "text": "It's sensitive to rank,\nand precision, and recall.",
    "start": "986030",
    "end": "990210"
  },
  {
    "text": "And so if you don't have\nvery much information,",
    "start": "990210",
    "end": "992240"
  },
  {
    "text": "and you would like to make\nfine-grained distinctions",
    "start": "992240",
    "end": "994500"
  },
  {
    "text": "among different rankings\nyou've predicted,",
    "start": "994500",
    "end": "996720"
  },
  {
    "text": "average precision may\nbe a very good choice.",
    "start": "996720",
    "end": "1001220"
  },
  {
    "text": "But as I said at\nthe start, I would",
    "start": "1001220",
    "end": "1004160"
  },
  {
    "text": "love for us to break out of\nthe mold of thinking only",
    "start": "1004160",
    "end": "1007220"
  },
  {
    "text": "about accuracy.",
    "start": "1007220",
    "end": "1008839"
  },
  {
    "text": "To get us thinking in that\ndirection, what I have here",
    "start": "1008840",
    "end": "1011450"
  },
  {
    "text": "is what we call a synthetic\nleaderboard in this paper",
    "start": "1011450",
    "end": "1014510"
  },
  {
    "text": "that we recently completed.",
    "start": "1014510",
    "end": "1016220"
  },
  {
    "text": "And we just assembled\nfrom the literature a lot",
    "start": "1016220",
    "end": "1018649"
  },
  {
    "text": "of different systems\nand tried to figure out",
    "start": "1018650",
    "end": "1020930"
  },
  {
    "text": "from the papers what they had\ndone in terms of hardware,",
    "start": "1020930",
    "end": "1024500"
  },
  {
    "text": "accuracy, your MRR and latency.",
    "start": "1024500",
    "end": "1028699"
  },
  {
    "text": "And if you Zoom in on the MRR\ncolumn, that is the accuracy",
    "start": "1028700",
    "end": "1032199"
  },
  {
    "text": "column, I think it\nemerges that you",
    "start": "1032200",
    "end": "1034899"
  },
  {
    "text": "should pick one of these ColBERT\nsystems or this one here.",
    "start": "1034900",
    "end": "1039640"
  },
  {
    "text": "But, for example, the ColBERT\nsystems, to achieve that MRR,",
    "start": "1039640",
    "end": "1045010"
  },
  {
    "text": "need pretty heavy\nduty hardware, 4 GPUs.",
    "start": "1045010",
    "end": "1048430"
  },
  {
    "text": "Whereas, if we go up to some\nof these SPLADE systems,",
    "start": "1048430",
    "end": "1051940"
  },
  {
    "text": "they're comparable\nin terms of quality,",
    "start": "1051940",
    "end": "1054639"
  },
  {
    "text": "but they have fewer\nresources that they",
    "start": "1054640",
    "end": "1056860"
  },
  {
    "text": "require in terms of hardware.",
    "start": "1056860",
    "end": "1058960"
  },
  {
    "text": "And then within\nthose SPLADE systems,",
    "start": "1058960",
    "end": "1061120"
  },
  {
    "text": "you can start to think\nabout the trade-offs",
    "start": "1061120",
    "end": "1062920"
  },
  {
    "text": "relative to hardware\nand latency.",
    "start": "1062920",
    "end": "1065290"
  },
  {
    "text": "And that, again,\ngets you thinking",
    "start": "1065290",
    "end": "1066790"
  },
  {
    "text": "in a totally new way about which\nof these systems is the best.",
    "start": "1066790",
    "end": "1071200"
  },
  {
    "text": "And that's the thinking\nthat I want to encourage.",
    "start": "1071200",
    "end": "1073480"
  },
  {
    "text": "Here's another\nperspective on this.",
    "start": "1073480",
    "end": "1075070"
  },
  {
    "text": "This is also from\nthat same paper.",
    "start": "1075070",
    "end": "1076899"
  },
  {
    "text": "We've got cost along the x-axis\nhere, and a measure of accuracy",
    "start": "1076900",
    "end": "1081430"
  },
  {
    "text": "along the y-axis.",
    "start": "1081430",
    "end": "1083080"
  },
  {
    "text": "This is BM25 down at the bottom.",
    "start": "1083080",
    "end": "1085570"
  },
  {
    "text": "It's very inexpensive, but it\nis very ineffective as well.",
    "start": "1085570",
    "end": "1090880"
  },
  {
    "text": "For essentially\nthe same cost, you",
    "start": "1090880",
    "end": "1093850"
  },
  {
    "text": "could have a huge\njump in your accuracy,",
    "start": "1093850",
    "end": "1096280"
  },
  {
    "text": "in your MRR, if you just picked\nthat small BT-SPLADE system.",
    "start": "1096280",
    "end": "1100880"
  },
  {
    "text": "That's given in green.",
    "start": "1100880",
    "end": "1102570"
  },
  {
    "text": "And you could go\nup a little bit,",
    "start": "1102570",
    "end": "1103970"
  },
  {
    "text": "yet, again, with a\nslight cost increase",
    "start": "1103970",
    "end": "1105860"
  },
  {
    "text": "by picking the medium model.",
    "start": "1105860",
    "end": "1107270"
  },
  {
    "text": "And then even just a slight\ncost increase after that,",
    "start": "1107270",
    "end": "1110240"
  },
  {
    "text": "and you get the\nBT-SPLADE large model.",
    "start": "1110240",
    "end": "1113120"
  },
  {
    "text": "Huge jump in performance with\nhardly any cost increase.",
    "start": "1113120",
    "end": "1116990"
  },
  {
    "text": "Whereas, correspondingly,\nthis kind of picture",
    "start": "1116990",
    "end": "1119600"
  },
  {
    "text": "makes it seem like you\nwouldn't pick this ANCE system",
    "start": "1119600",
    "end": "1122419"
  },
  {
    "text": "because it's both expensive and\nless good in terms of accuracy",
    "start": "1122420",
    "end": "1126800"
  },
  {
    "text": "than some of these more\ninexpensive systems.",
    "start": "1126800",
    "end": "1129080"
  },
  {
    "text": "And more generally,\nthis is sometimes",
    "start": "1129080",
    "end": "1130880"
  },
  {
    "text": "called the Pareto\nfrontier of systems.",
    "start": "1130880",
    "end": "1133040"
  },
  {
    "text": "Given the two things\nwe've decided to measure,",
    "start": "1133040",
    "end": "1135380"
  },
  {
    "text": "some systems are strictly\ndominating some other systems.",
    "start": "1135380",
    "end": "1139310"
  },
  {
    "text": "But of course, there\nmay be other dimensions",
    "start": "1139310",
    "end": "1141560"
  },
  {
    "text": "to this that would cause\nends to pull ahead,",
    "start": "1141560",
    "end": "1144200"
  },
  {
    "text": "and so we need to think\nholistically again.",
    "start": "1144200",
    "end": "1146779"
  },
  {
    "text": "And this is just\nreinforcing the notion",
    "start": "1146780",
    "end": "1148580"
  },
  {
    "text": "that there isn't one fixed\nanswer to the question",
    "start": "1148580",
    "end": "1151460"
  },
  {
    "text": "of system quality.",
    "start": "1151460",
    "end": "1152659"
  },
  {
    "text": "There are lots of\ndimensions and lots",
    "start": "1152660",
    "end": "1154400"
  },
  {
    "text": "of trade-offs to\nconsider, ultimately.",
    "start": "1154400",
    "end": "1158020"
  },
  {
    "start": "1158020",
    "end": "1162000"
  }
]