[
  {
    "start": "0",
    "end": "6050"
  },
  {
    "text": "Now, let's do a quick review of\nthe previous lecture, lecture 18. So we talked about\nPIN photodiodes, which",
    "start": "6050",
    "end": "13280"
  },
  {
    "text": "are used to detect\nbasically the light that is received by a LiDAR, and we\ntalked about the physics of it.",
    "start": "13280",
    "end": "22070"
  },
  {
    "text": "So the PIN photodiode it's\nlike a regular diode, which is a PN junction,\nexcept there is",
    "start": "22070",
    "end": "27740"
  },
  {
    "text": "an extra material\nin between the P and the N-type\nsemiconductors, which",
    "start": "27740",
    "end": "33320"
  },
  {
    "text": "is an undoped semiconductor\ncalled the intrinsic material and that material is actually\nthe photosensitive part",
    "start": "33320",
    "end": "43220"
  },
  {
    "text": "of the PIN diode. So as photons, which\nare close to the bandgap",
    "start": "43220",
    "end": "50360"
  },
  {
    "text": "energy of the\nintrinsic material, get into the intrinsic\nregion some of them",
    "start": "50360",
    "end": "57230"
  },
  {
    "text": "get absorbed as we said, and\nthey generate a photocurrent, and the photocurrent,\nin amps, is",
    "start": "57230",
    "end": "64849"
  },
  {
    "text": "given by the\nresponsivity of the PIN photodiode times the power\nof the incident light,",
    "start": "64849",
    "end": "73430"
  },
  {
    "text": "basically, that's\nhitting the diode. And we also talked about how\nyou calculate the responsivity.",
    "start": "73430",
    "end": "79400"
  },
  {
    "text": "There is a few factors. There's the reflectivity\nof the intrinsic material, there is basically the\nabsorption coefficient,",
    "start": "79400",
    "end": "90700"
  },
  {
    "text": "and there is-- so those together, basically,\ngive you the full quantum",
    "start": "90700",
    "end": "96410"
  },
  {
    "text": "efficiency, and then it can be\nconverted to the responsibility of the device.",
    "start": "96410",
    "end": "102259"
  },
  {
    "text": "Then, we started looking\nat the full voltage-current characteristics of\nthe PIN photodiode",
    "start": "102260",
    "end": "108440"
  },
  {
    "text": "so it's important to note\nthat the devices are still a diode, right?",
    "start": "108440",
    "end": "114170"
  },
  {
    "text": "So yes. It's a special type of diode\nthat is sensitive to photons and generates a photocurrent,\nbut the full response",
    "start": "114170",
    "end": "123110"
  },
  {
    "text": "of the device is still\nhas the characteristics",
    "start": "123110",
    "end": "128270"
  },
  {
    "text": "of a regular diode, and as\nyou know, in a regular diode, the voltage-current\ncharacteristic is",
    "start": "128270",
    "end": "134120"
  },
  {
    "text": "given by an exponential\nfunction, so that's given here. So in this very simple circuit,\nwe are applying a voltage vd",
    "start": "134120",
    "end": "141319"
  },
  {
    "text": "across our PIN photodiode and a\ncurrent id is going through it, and the convention in\nanalyzing electrical circuits",
    "start": "141320",
    "end": "149240"
  },
  {
    "text": "is always that current\ngoes from positive to the negative\nterminal of the device, so that's a positive current.",
    "start": "149240",
    "end": "154969"
  },
  {
    "text": "So that id is given. If it was a regular\ndiode, it would just",
    "start": "154970",
    "end": "160400"
  },
  {
    "text": "be this exponential\nterm, which is IS, which we call the\ndark current, times e",
    "start": "160400",
    "end": "165500"
  },
  {
    "text": "to the elementary charge\ntimes the voltage applied to the device divided by\nthe Boltzmann constant times",
    "start": "165500",
    "end": "172400"
  },
  {
    "text": "the absolute\ntemperature minus 1, OK? Now, because this\nis a special diode there is an\nadditional term, which",
    "start": "172400",
    "end": "178400"
  },
  {
    "text": "is the photocurrent that gets\nadded to the total current.",
    "start": "178400",
    "end": "184250"
  },
  {
    "text": "By the negative sign\nhere, again, it's because of our convention\nthat we take id to go from the positive\nto the negative terminal",
    "start": "184250",
    "end": "191810"
  },
  {
    "text": "but the photocurrent, as we saw,\ngoes in the opposite direction. So that's why we add\nthe minus sign when",
    "start": "191810",
    "end": "198020"
  },
  {
    "text": "we calculate the total current. Now, we said that for this\nto become useful for sensing,",
    "start": "198020",
    "end": "206300"
  },
  {
    "text": "we are only interested in the\nphotocurrent part of this, right? Everything else is it's kind\nof like noise or interference",
    "start": "206300",
    "end": "213680"
  },
  {
    "text": "that we don't like. It's not useful for\nsensing because it's not-- there is no signal\nin here, right?",
    "start": "213680",
    "end": "220550"
  },
  {
    "text": "This is all just from\nthe voltage that's being applied to the diode.",
    "start": "220550",
    "end": "225750"
  },
  {
    "text": "So in order to basically\neliminate this term. What we do is that we\napply a reverse bias,",
    "start": "225750",
    "end": "232610"
  },
  {
    "text": "so negative make\nthe vd negative, and that kind of if\nit's negative enough,",
    "start": "232610",
    "end": "238670"
  },
  {
    "text": "basically, this exponential\nterm becomes almost negligible-- almost zero, and\nthen we get something",
    "start": "238670",
    "end": "245330"
  },
  {
    "text": "where the total current that\nis going through the diode",
    "start": "245330",
    "end": "251510"
  },
  {
    "text": "is just the sum of the dark\ncurrent and the photocurrent, and then that makes\na proper sensor.",
    "start": "251510",
    "end": "257239"
  },
  {
    "text": "There's one more reason why\nreverse biasing helps us, which as we showed, it increases\nthe bandwidth of the PIN diode",
    "start": "257240",
    "end": "266000"
  },
  {
    "text": "because it reduces the\njunction capacitance. So there's two reasons,\none is increased bandwidth, the other one is it makes\nid almost be proportional",
    "start": "266000",
    "end": "273740"
  },
  {
    "text": "to the photocurrent, which is\nbasically good for sensing.",
    "start": "273740",
    "end": "279050"
  },
  {
    "text": "OK, any questions? All right, let's continue.",
    "start": "279050",
    "end": "284300"
  },
  {
    "text": "So here, is basically a\nplot of the voltage-current characteristic of\nthe PIN photodiode,",
    "start": "284300",
    "end": "290830"
  },
  {
    "text": "and you can kind of break\nit into three regions. So horizontal axis here is the\nvoltage across the diode v sub",
    "start": "290830",
    "end": "299800"
  },
  {
    "text": "d, and the vertical axis\nis the current that's going through the device,\nand the three regions is that-- there's the forward\nbias regime, also called",
    "start": "299800",
    "end": "307780"
  },
  {
    "text": "the photovoltaic regime, where,\nbasically, the exponential term dominates because vd\nis positive and you",
    "start": "307780",
    "end": "314860"
  },
  {
    "text": "get these very nonlinear\ncurves, basically, so that part is not\nuseful for sensing.",
    "start": "314860",
    "end": "319990"
  },
  {
    "text": "For other\napplications, you might want to operate in that\nregime, but not for sensing, then you have the reverse bias\npart where V sub D is negative,",
    "start": "319990",
    "end": "330880"
  },
  {
    "text": "and that's called the\nphotoconductive regime, and in that part, basically,\nthe exponential term is almost",
    "start": "330880",
    "end": "337870"
  },
  {
    "text": "zero, so what you get is\nyour id, that total current, is just basically minus\nthe dark-- negative",
    "start": "337870",
    "end": "345760"
  },
  {
    "text": "the dark current\nminus IP, and so basically, it then\nvaries linearly",
    "start": "345760",
    "end": "353740"
  },
  {
    "text": "with the incident power. So it just becomes\nthe doctrine that is a constant minus the\nresponsivity times power,",
    "start": "353740",
    "end": "361810"
  },
  {
    "text": "and that's shown with\nthese multiple curves. So each of these curves is\nbasically the IV characteristic",
    "start": "361810",
    "end": "366880"
  },
  {
    "text": "for a different amount\nof incident photon flux, and that's this area\nshows, basically,",
    "start": "366880",
    "end": "374350"
  },
  {
    "text": "increased photon\nflux, and when there is no photon flux in the\nnegative bias regime,",
    "start": "374350",
    "end": "379900"
  },
  {
    "text": "you just get the dark current. So that's why\nthere's a nonzero id, and then as you increase\nyour photon flux,",
    "start": "379900",
    "end": "385450"
  },
  {
    "text": "basically, it just linearly\nvaries-- your id linearly varies with the photon\nflux, and that's",
    "start": "385450",
    "end": "392289"
  },
  {
    "text": "valid until you\nhit the breakdown voltage of the device, and\nthen beyond breakdown voltage,",
    "start": "392290",
    "end": "398380"
  },
  {
    "text": "basically, the\ndevice breaks down. It can recover, so it's\nnot like you would fully",
    "start": "398380",
    "end": "405310"
  },
  {
    "text": "destroy the device\nusually, except if you apply a voltage way\nbeyond breakdown,",
    "start": "405310",
    "end": "411220"
  },
  {
    "text": "but you can go a little above\nor below breakdown voltage, and you get then a\nvery nonlinear response",
    "start": "411220",
    "end": "418840"
  },
  {
    "text": "from the device and\nthat's called basically the Geiger mode regime.",
    "start": "418840",
    "end": "424010"
  },
  {
    "text": "So for sensing we're interested\nbasically in this part. So this is for\nsensing, specifically,",
    "start": "424010",
    "end": "431920"
  },
  {
    "text": "for LiDAR, cameras, things\nlike that for photo-sensing. That's the region\nwe want to operate.",
    "start": "431920",
    "end": "437740"
  },
  {
    "text": "We want to be in the bias, but\nthe reverse part is part itself as you can see you can kind\nof be in different areas.",
    "start": "437740",
    "end": "446870"
  },
  {
    "text": "So you can be kind of in the\nmid-to-highish reverse bias,",
    "start": "446870",
    "end": "453490"
  },
  {
    "text": "and if you're in this region,\nyou get a nice linear response",
    "start": "453490",
    "end": "459130"
  },
  {
    "text": "from your device, as. Is shown by these curves,\nbut it can also operate close to breakdown voltage.",
    "start": "459130",
    "end": "464280"
  },
  {
    "text": "Specifically, you can have a\nvery high negative bias voltage",
    "start": "464280",
    "end": "470050"
  },
  {
    "text": "close to the breakdown,\nm then the response starts to become nonlinear, OK?",
    "start": "470050",
    "end": "475600"
  },
  {
    "text": "Or you can operate slightly\nbeyond the breakdown voltage and be in the\nGeiger mode regime.",
    "start": "475600",
    "end": "482410"
  },
  {
    "text": "So what is the difference\nof these, basically, modes of operation? So there are three regimes.",
    "start": "482410",
    "end": "487850"
  },
  {
    "text": "First, we have-- or the three,\nbasically, modes of operation in the reverse bias regime.",
    "start": "487850",
    "end": "494290"
  },
  {
    "text": "First is the photoconductive\nregime or region. So that's where, as I said, you\nhave low-to-medium reverse bias",
    "start": "494290",
    "end": "502300"
  },
  {
    "text": "voltage, and if you\nare in that mode you get a responsivity that is\non the order of 1 amps per watt",
    "start": "502300",
    "end": "510970"
  },
  {
    "text": "from a good photodiode. It can be slightly\nabove or slightly below. I mean, the point is\nthat the range is usually",
    "start": "510970",
    "end": "517240"
  },
  {
    "text": "like somewhere between\n0.8 to like 1.1 or so on the order of 1, but\nthen what's important",
    "start": "517240",
    "end": "523750"
  },
  {
    "text": "is that the current id varies\nlinearly with the incident optical power. So you get a linear\ndetector, right?",
    "start": "523750",
    "end": "530829"
  },
  {
    "text": "Linear in power, not linear\nin amplitude of the field, but linear in the\noptical power, OK?",
    "start": "530830",
    "end": "539020"
  },
  {
    "text": "Then, you can further\nincrease the reverse bias so",
    "start": "539020",
    "end": "546070"
  },
  {
    "text": "make it more\nnegative, and then you get into the nonlinear regime. So that's where you have a\nvery high reverse bias voltage",
    "start": "546070",
    "end": "552910"
  },
  {
    "text": "but you're just\nbelow breakdown, so haven't quite gotten past\nthe breakdown voltage.",
    "start": "552910",
    "end": "558279"
  },
  {
    "text": "That mode of operation-- then the PD is called an\navalanche photodiode or an APD,",
    "start": "558280",
    "end": "563800"
  },
  {
    "text": "OK? What happens if you\ndo that is that you can get very high responsivity,\nso you can get responsibilities",
    "start": "563800",
    "end": "569920"
  },
  {
    "text": "of on the order of 100 due\nto a physical effect, which is called impact ionization.",
    "start": "569920",
    "end": "576590"
  },
  {
    "text": "So in that sense, it's a good\nthing for sensing, right? You can make your photodiode a\nlot more responsive to incident",
    "start": "576590",
    "end": "584320"
  },
  {
    "text": "photon flux, but the\ntradeoff is the response becomes also very\nnonlinear, right?",
    "start": "584320",
    "end": "590680"
  },
  {
    "text": "So then, your id,\nthe current varies, nonlinearly with\nthe incident power because, again, if you go\nto the previous slide you're",
    "start": "590680",
    "end": "597730"
  },
  {
    "text": "in these regions where\nthe response starts to become very, very nonlinear.",
    "start": "597730",
    "end": "603520"
  },
  {
    "text": "Finally, you can\ngo beyond breakdown and operate in the\nGeiger mode basically",
    "start": "603520",
    "end": "610270"
  },
  {
    "text": "and this is very sparse\nvoltage is beyond the breakdown",
    "start": "610270",
    "end": "615310"
  },
  {
    "text": "voltage of the device, and\nthen in this mode of operation, the PD is called a single photon\navalanche photodiode or a SPAD,",
    "start": "615310",
    "end": "622660"
  },
  {
    "text": "OK? Essentially, in\nthis regime, you get something like\ninfinite responsivity,",
    "start": "622660",
    "end": "629500"
  },
  {
    "text": "but again, the\ntrade is so that you can think of it as a\ngood thing for sensing it becomes extremely, extremely\nresponsive to incident photon",
    "start": "629500",
    "end": "637360"
  },
  {
    "text": "flux to the point\nthat, basically, it's like an on/off switch for you.",
    "start": "637360",
    "end": "643639"
  },
  {
    "text": "So as soon as even a single\nphoton hits the detector, it just triggers\nthe maximum current",
    "start": "643640",
    "end": "650139"
  },
  {
    "text": "that it can possibly produce. So that's the Avalanche\neffect basically and from a single photon,\nand if there's no photon,",
    "start": "650140",
    "end": "659200"
  },
  {
    "text": "you basically get nothing. So it becomes extremely,\nextremely nonlinear",
    "start": "659200",
    "end": "664510"
  },
  {
    "text": "in the Geiger mode regime. Now, when it comes to\nLiDARs, it turns out you might ask, OK,\nso what's the best",
    "start": "664510",
    "end": "671500"
  },
  {
    "text": "choice for building a LiDAR? It turns out that all\nthree modes are used, but it really depends on\nyour system architecture.",
    "start": "671500",
    "end": "678790"
  },
  {
    "text": "Specifically, the\nwaveforms that you send determine what mode\nof operation in terms",
    "start": "678790",
    "end": "685780"
  },
  {
    "text": "of biasing the photodiode\nyou want to be at. So for instance, as we\nwill see most LiDARs",
    "start": "685780",
    "end": "692650"
  },
  {
    "text": "are direct detection\nLiDARs, which only detect the incident\npower of the pulses",
    "start": "692650",
    "end": "702399"
  },
  {
    "text": "and work with very\nsimple waveforms. So for those, they just want to\napply a threshold to the echo",
    "start": "702400",
    "end": "707529"
  },
  {
    "text": "that they receive and use that\nfor time-of-flight estimation. They don't quite care about\nthe specifics of the waveform.",
    "start": "707530",
    "end": "715430"
  },
  {
    "text": "So they want just\nmaximum responsivity, so direct detection LiDAR, they--\nit's very common for them",
    "start": "715430",
    "end": "720550"
  },
  {
    "text": "to use APD or SPAD\nbecause they don't quite care about the\nwaveforms, but then you",
    "start": "720550",
    "end": "726430"
  },
  {
    "text": "have more sophisticated types\nof LiDARs coherent LiDARs, which are kind of like CW radar.",
    "start": "726430",
    "end": "732820"
  },
  {
    "text": "They send like FM\nor PM waveforms, like chirps or ranging\ncodes, and as we know,",
    "start": "732820",
    "end": "738310"
  },
  {
    "text": "you need to apply DSP\nto those waveforms to be able to do random\nvelocity estimation.",
    "start": "738310",
    "end": "745040"
  },
  {
    "text": "So for those types of\nor for coherent LiDAR, it's very important to have a\nlinear detector that DOES not",
    "start": "745040",
    "end": "750860"
  },
  {
    "text": "distort the waveform, right? So coherent LiDAR uses-- operates in the\nphotoconductive regime",
    "start": "750860",
    "end": "758630"
  },
  {
    "text": "because linearity matters. So again, you should decide\ndo you care for linearity",
    "start": "758630",
    "end": "764120"
  },
  {
    "text": "or do you care for sensitivity\nand then that determines how you want to bias.",
    "start": "764120",
    "end": "770180"
  },
  {
    "text": "OK, so just to summarize,\nreverse biasing, what it does for us if you\nhave a negative Vbias in the id",
    "start": "770180",
    "end": "778640"
  },
  {
    "text": "response-- voltage current\nresponse of the device, the exponential\nterm is almost zero so the current that's\ngoing through the device",
    "start": "778640",
    "end": "785180"
  },
  {
    "text": "becomes just some of the dark\ncurrent and the photocurrent, and if the dark current is a\nsmall or negligible compared",
    "start": "785180",
    "end": "793045"
  },
  {
    "text": "to the photocurrent,\nyou can just say that your total\ncurrent is almost equal to the photocurrent,\nwhich is just",
    "start": "793045",
    "end": "798500"
  },
  {
    "text": "the responsivity times\nthe incident power. OK, so to get a nice\nlinear response out",
    "start": "798500",
    "end": "807980"
  },
  {
    "text": "of a photodiode we need some\nexternal circuitry that applies",
    "start": "807980",
    "end": "815180"
  },
  {
    "text": "a constant negative bias\nvoltage for us so you want to kind of hold your\ndevice, and by device, I",
    "start": "815180",
    "end": "821959"
  },
  {
    "text": "mean the photodiode at a\nconstant negative Vbias and then somehow measure\nthe current that's",
    "start": "821960",
    "end": "828380"
  },
  {
    "text": "going through it, and to\ndo that to achieve that, you need some\nexternal circuitry, which is the biasing\ncircuitry for you.",
    "start": "828380",
    "end": "836510"
  },
  {
    "text": "This vertical line sometimes\nis called the load line,",
    "start": "836510",
    "end": "841790"
  },
  {
    "text": "so that's here how we're\nloading the device, and by fixing a\nconstant bias voltage,",
    "start": "841790",
    "end": "847370"
  },
  {
    "text": "you basically get this\nvertical load line, and then the\ncurrent, as we said, is just proportional\nto the incident power.",
    "start": "847370",
    "end": "854339"
  },
  {
    "text": "How do we achieve\nthis basically, or what type of\ncircuitry do we need",
    "start": "854340",
    "end": "860390"
  },
  {
    "text": "to build to achieve a constant\nnegative bias voltage? The best type of circuit\nthat achieves this",
    "start": "860390",
    "end": "869990"
  },
  {
    "text": "is called a transimpedance\namplifier or a TIA, which actually is a very,\nvery simple circuit.",
    "start": "869990",
    "end": "877130"
  },
  {
    "text": "Here is kind of like in this. Let's look at the\npicture together. It's the ideal version of it. What the transimpedance\namplifier is, is it's",
    "start": "877130",
    "end": "884870"
  },
  {
    "text": "a high-gain OpAmp,\nOperational Amplifier, which is this device. And the circuit is built by\ntying the positive terminal",
    "start": "884870",
    "end": "896269"
  },
  {
    "text": "of the PIN diode to the\ninverting input of the OpAmp, and then the negative\nterminal of the photodiode",
    "start": "896270",
    "end": "903620"
  },
  {
    "text": "is applied to our\nnegative Vbias rail, and then noninverting input\nof the OpAmp is grounded,",
    "start": "903620",
    "end": "912439"
  },
  {
    "text": "and then there is\nsome feedback resistor that ties the inverting input\nof the pump to the output, OK?",
    "start": "912440",
    "end": "920180"
  },
  {
    "text": "So let's see what happens\nbecause these high-gain OpAmps typically have very\nhigh input impedance.",
    "start": "920180",
    "end": "928400"
  },
  {
    "text": "What happens is that the\ntwo inputs are virtually at the same potential\nwhen the OpAmp operates.",
    "start": "928400",
    "end": "935940"
  },
  {
    "text": "So that means because the\npositive input is grounded, the negative is also\nvirtually grounded,",
    "start": "935940",
    "end": "941360"
  },
  {
    "text": "held at a very low\npotential, and that means our diode is held\nat a constant bias voltage",
    "start": "941360",
    "end": "952130"
  },
  {
    "text": "because both the terminals\nare now at a constant voltage. The positive side is grounded. Negative side, we are tying\nit to our negative bias.",
    "start": "952130",
    "end": "960500"
  },
  {
    "text": "OK, so this gives us the\nlow line that we want, which is constant\nvoltage, and another thing",
    "start": "960500",
    "end": "967399"
  },
  {
    "text": "that the circuit\nachieves is that all the current that is\ngenerated in the PIN diode.",
    "start": "967400",
    "end": "974480"
  },
  {
    "text": "It's going to pass through\nthe feedback resistor, so the current path is\nbasically like that,",
    "start": "974480",
    "end": "981620"
  },
  {
    "text": "and by passing the current\nthrough the feedback resistor, we convert it to a voltage,\nwhich you can measure",
    "start": "981620",
    "end": "987560"
  },
  {
    "text": "at the output of the OpAmp. OK, so your output\nvoltage is basically just that the current times\nthe feedback resistance,",
    "start": "987560",
    "end": "996680"
  },
  {
    "text": "and in terms of the\nincident optical power, it just becomes minus\nthe responsivity",
    "start": "996680",
    "end": "1002140"
  },
  {
    "text": "of the diode times the\nfeedback resistance times the optical power\nthat's incident on it.",
    "start": "1002140",
    "end": "1008089"
  },
  {
    "text": "So it's a very nice,\nsimple circuit that achieves exactly what we want.",
    "start": "1008090",
    "end": "1014680"
  },
  {
    "text": "You can set a\nnegative bias voltage, and it holds the PIN diode\nat that constant bias",
    "start": "1014680",
    "end": "1020080"
  },
  {
    "text": "voltage, also nicely converts\ncurrent to voltage for us. So this voltage can-- now\nyou can feed it to an ADC",
    "start": "1020080",
    "end": "1027760"
  },
  {
    "text": "if you like and digitize\nit and then do DSP on it.",
    "start": "1027760",
    "end": "1034939"
  },
  {
    "text": "OK, so the circuit is basically\nphotons in and electrons out,",
    "start": "1034940",
    "end": "1046169"
  },
  {
    "text": "and the output-- it's a voltage-type output so\nit's very compatible with ADCs",
    "start": "1046170",
    "end": "1051480"
  },
  {
    "text": "for digitization. Now, this was the ideal circuit. In reality, it's a little\nmore complex than this.",
    "start": "1051480",
    "end": "1059250"
  },
  {
    "text": "So a more accurate model of\na transimpedance amplifier",
    "start": "1059250",
    "end": "1065040"
  },
  {
    "text": "kind of looks like this. So here, it's still the same\narchitecture, if you will",
    "start": "1065040",
    "end": "1070560"
  },
  {
    "text": "but we have added a\nfew nonidentities to it to make the model more complete. First is that, well, the\nOpAmps are not ideal devices.",
    "start": "1070560",
    "end": "1080399"
  },
  {
    "text": "So the gain of the OpAmp is-- it\nhas some frequency dependency, so we have made A, instead of a\nconstant gain, just a function",
    "start": "1080400",
    "end": "1089400"
  },
  {
    "text": "of frequency. That's how these\ncircuits work, and then",
    "start": "1089400",
    "end": "1094920"
  },
  {
    "text": "as we talked last\ntime, these PIN diodes have some junction\ncapacitance, right?",
    "start": "1094920",
    "end": "1100110"
  },
  {
    "text": "So the correct small\nsignal model of a diode is what we have put here. So instead of just\na diode, basically,",
    "start": "1100110",
    "end": "1108630"
  },
  {
    "text": "we model it the\nsmall signal model",
    "start": "1108630",
    "end": "1114130"
  },
  {
    "text": "is a current source,\nwhich is producing a current that is I sub D of\nthe current through the diode.",
    "start": "1114130",
    "end": "1121030"
  },
  {
    "text": "In parallel to\nthat, you're adding this parasitic capacitance so\nC, remember, is the junction",
    "start": "1121030",
    "end": "1128790"
  },
  {
    "text": "capacitance, which,\nas you know, affects the bandwidth of the device.",
    "start": "1128790",
    "end": "1134340"
  },
  {
    "text": "So this is a more complete\nmodel of the diode that you're putting in here. Also, in practice,\nthe feedback that",
    "start": "1134340",
    "end": "1141380"
  },
  {
    "text": "is put in the\ntransimpedance amplifier, it's not just resistive. Some capacitance is also\nadded, so that's not",
    "start": "1141380",
    "end": "1150230"
  },
  {
    "text": "parasitic capacitance. That's a capacitor that the\nelectrical engineers design and add to the\nfeedback because it",
    "start": "1150230",
    "end": "1157430"
  },
  {
    "text": "helps in stabilizing\nthe response, so it basically kills resonances\nand oscillations at the output.",
    "start": "1157430",
    "end": "1163820"
  },
  {
    "text": "You get a nicer response. So you can solve the circuit. I'm not going to go through all\nthe details, but it's simple.",
    "start": "1163820",
    "end": "1170720"
  },
  {
    "text": "Even by hand, you can solve it. You just write down your\nKirchhoff voltage-current equations and solve--",
    "start": "1170720",
    "end": "1176630"
  },
  {
    "text": "find, basically, the\nfrequency response of it, and here, I'm defining the\nfrequency response H of omega",
    "start": "1176630",
    "end": "1182720"
  },
  {
    "text": "as the output I'm taking,\nas the voltage output Vout. So this is Vout of omega.",
    "start": "1182720",
    "end": "1187730"
  },
  {
    "text": "Divided input, you can\ntake it as the current or the optical power. I just decided to use the\noptical power as the input.",
    "start": "1187730",
    "end": "1196730"
  },
  {
    "text": "But just remember that id\nis responsivity times p, so you could also--",
    "start": "1196730",
    "end": "1202909"
  },
  {
    "text": "I mean, these two are just the\nscaled versions of each other. You can also define your\nH as Vout out over id,",
    "start": "1202910",
    "end": "1211840"
  },
  {
    "text": "and you pretty much\nget the same thing, except I guess the\nR wouldn't be there.",
    "start": "1211840",
    "end": "1217630"
  },
  {
    "text": "But here's the full solution. There's a lot in here,\nbut at the end of the day,",
    "start": "1217630",
    "end": "1224480"
  },
  {
    "text": "it becomes a low-pass filter. OK, so low-pass\nfilter, and then note",
    "start": "1224480",
    "end": "1229530"
  },
  {
    "text": "that everything in this\nexpression is known. a of omega is the frequency\nresponse of the OpAmp.",
    "start": "1229530",
    "end": "1234760"
  },
  {
    "text": "So whatever op amp is used\nyou can go to the datasheet and it gives you\nwhat a if omega is.",
    "start": "1234760",
    "end": "1241230"
  },
  {
    "text": "Rf is the feedback resistance.\nr is the responsibility of the photodiode. You can get that from\nthe photodiode datasheet.",
    "start": "1241230",
    "end": "1249810"
  },
  {
    "text": "c is the junction capacitance\nof the photodiode. Again, you usually can find\nthat in the datasheet of the PIN",
    "start": "1249810",
    "end": "1255419"
  },
  {
    "text": "diode, or if you know the\ngeometry of the diode, you can just calculate\nit, and CF is also",
    "start": "1255420",
    "end": "1261179"
  },
  {
    "text": "a design parameter, which is\nthe capacitance and the feedback that you know. So everything is known you\ncan plug it in and actually--",
    "start": "1261180",
    "end": "1268980"
  },
  {
    "text": "plug everything in and plot,\nfor instance, the impulse the frequency response as\na function of frequency,",
    "start": "1268980",
    "end": "1276120"
  },
  {
    "text": "but the point is if\nit's designed right, it will be a low-pass filter.",
    "start": "1276120",
    "end": "1281400"
  },
  {
    "text": "If not, that means there\nis some design flaw, but a properly designed\nTIA would have--",
    "start": "1281400",
    "end": "1288690"
  },
  {
    "text": "if you look at the magnitude\nof h f or h of omega-- let's make it omega because\nthe note says omega--",
    "start": "1288690",
    "end": "1296190"
  },
  {
    "text": "h of omega as a\nfunction of omega, it will be a low-pass\nfilter with some cutoff",
    "start": "1296190",
    "end": "1302160"
  },
  {
    "text": "frequency, omega 0, OK? Now, to find your output voltage\nfrom this, once this is found,",
    "start": "1302160",
    "end": "1309162"
  },
  {
    "text": "it's easy, right? So your Vout of t\nis just the inverse Fourier transform of h of\nomega times p of omega,",
    "start": "1309162",
    "end": "1325120"
  },
  {
    "text": "and what is p omega? p of\nomega is the Fourier transform of the incident optical power.",
    "start": "1325120",
    "end": "1335160"
  },
  {
    "text": "So as easy as that, you\nfirst plug everything in, you find your H,\nand then you just",
    "start": "1335160",
    "end": "1341419"
  },
  {
    "text": "take the Fourier transform\nof t, which is the incident, basically power as a function\nof time, and then filter that.",
    "start": "1341420",
    "end": "1348740"
  },
  {
    "text": "So it's a filtering\neffect, right? All we are doing\nhere is we're just filtering p with the\nfrequency response of the TIA.",
    "start": "1348740",
    "end": "1357200"
  },
  {
    "text": "Now, it turns out that again\nfor a well-designed TIA within the bandwidth\nthe magnitude of h",
    "start": "1357200",
    "end": "1364340"
  },
  {
    "text": "is pretty constant,\nso you can call that h zero so if your p for the\nFFT of p is kind of like well",
    "start": "1364340",
    "end": "1373010"
  },
  {
    "text": "within the bandwidth\nof the device. So for instance, if\nthis one is p of omega,",
    "start": "1373010",
    "end": "1379080"
  },
  {
    "text": "so if it's well\nwithin the bandwidth, then the result of\nthis filtering effect",
    "start": "1379080",
    "end": "1385370"
  },
  {
    "text": "just becomes a scaling. It just becomes h0 times p of t.",
    "start": "1385370",
    "end": "1391270"
  },
  {
    "text": "So again, even in a realistic\ncase for a well-designed TIA",
    "start": "1391270",
    "end": "1398020"
  },
  {
    "text": "and an input signal that\nis within the bandwidth of the TIA, your\noutput voltage is just",
    "start": "1398020",
    "end": "1404500"
  },
  {
    "text": "linearly proportional\nto the incident power. So the linearity still holds\neven in a more realistic case.",
    "start": "1404500",
    "end": "1412510"
  },
  {
    "text": "That's the point. Any questions about TIAs?",
    "start": "1412510",
    "end": "1417990"
  },
  {
    "text": "OK, so let's continue. So I think, by this point,\nwe basically finished",
    "start": "1417990",
    "end": "1424890"
  },
  {
    "text": "all the physics that we needed\nto learn about to understand LiDARs at a system level.",
    "start": "1424890",
    "end": "1430830"
  },
  {
    "text": "So we talked about lasers. We talked about different ways\nof illuminating the scene. We talked about Gaussian beams\nand optics or lenses that",
    "start": "1430830",
    "end": "1440100"
  },
  {
    "text": "help us collimate the beams\nwe talked about beam scanning, and we talked about\nphoton detection. So physics done, now we can\ntalk about system architecture",
    "start": "1440100",
    "end": "1448710"
  },
  {
    "text": "for LiDARs. So just like radars and\nsonar, you can kind of",
    "start": "1448710",
    "end": "1456990"
  },
  {
    "text": "do a little taxonomy of LiDAR,\nand there's two main types of LiDAR that you can design.",
    "start": "1456990",
    "end": "1465420"
  },
  {
    "text": "The first is called the\ndirect detection LiDAR, and this is very\nsimilar in principle",
    "start": "1465420",
    "end": "1472259"
  },
  {
    "text": "to pulse-echo sonar\nand pulse radar.",
    "start": "1472260",
    "end": "1479225"
  },
  {
    "text": " It's very similar.",
    "start": "1479225",
    "end": "1484830"
  },
  {
    "text": "It's also called ToF, or Time of\nFlight LiDAR, in the industry, but this term is\njust technically",
    "start": "1484830",
    "end": "1491480"
  },
  {
    "text": "incorrect because all LiDARs\nmeasure time of flight for ranging at the end of\nthe day, but for some reason,",
    "start": "1491480",
    "end": "1497690"
  },
  {
    "text": "it's very common to call\ndirect detection LiDAR a ToF.",
    "start": "1497690",
    "end": "1502759"
  },
  {
    "text": "What distinguishes\nToF LiDAR is that it uses just a single\nphotodetector,",
    "start": "1502760",
    "end": "1509930"
  },
  {
    "text": "and it detects just a received\noptical power, very important.",
    "start": "1509930",
    "end": "1515280"
  },
  {
    "text": "So direct detection LiDAR\nonly detects the power of the incident light\nor electromagnetic wave",
    "start": "1515280",
    "end": "1522620"
  },
  {
    "text": "versus the second\ntype of LiDAR, which is called coherent detection\nLiDAR or coherent LiDAR LiDAR.",
    "start": "1522620",
    "end": "1528169"
  },
  {
    "text": "It detects the full\nelectromagnetic field. So it detects both the amplitude\nand the phase of light,",
    "start": "1528170",
    "end": "1536299"
  },
  {
    "text": "and it uses a more\ncomplex module at the receiver\nside, which is called a coherent optical receiver.",
    "start": "1536300",
    "end": "1542400"
  },
  {
    "text": "We'll talk more about it,\nbut coherent detection LiDAR it's very similar in\nprinciple to CW sonar and CW",
    "start": "1542400",
    "end": "1553289"
  },
  {
    "text": "radar like FMCW, UPN,\nCW that we have seen.",
    "start": "1553290",
    "end": "1559800"
  },
  {
    "text": "OK, so a few more details. So direct detection LiDAR,\nit sends, basically,",
    "start": "1559800",
    "end": "1567630"
  },
  {
    "text": "short pulses periodically\nagain, exactly like pulse radar. Some of them just use\nvery simple pulses,",
    "start": "1567630",
    "end": "1575549"
  },
  {
    "text": "like pulses with\nGaussian envelopes. Some other systems, use\nmore complex pulse shapes,",
    "start": "1575550",
    "end": "1581610"
  },
  {
    "text": "but because these systems\nonly care about the received power, that's all they\nmeasure, and they just",
    "start": "1581610",
    "end": "1587130"
  },
  {
    "text": "want to apply a threshold\nto calculate time of flight. It's very common for them to try\nto maximize their sensitivity",
    "start": "1587130",
    "end": "1594090"
  },
  {
    "text": "at the receiver, so\nthey use APDs or SPADs to improve sensitivity\nbecause, at the receiver,",
    "start": "1594090",
    "end": "1600630"
  },
  {
    "text": "all the phase information\nis lost anyway. So they just try to\nmaximize the sensitivity",
    "start": "1600630",
    "end": "1607169"
  },
  {
    "text": "so they can see further out. And then ranging,\nyeah, it's mostly",
    "start": "1607170",
    "end": "1613950"
  },
  {
    "text": "done via simple thresholding,\nbut in principle, they can also do match filtering,\nand because they only",
    "start": "1613950",
    "end": "1619800"
  },
  {
    "text": "detect the optical power,\nessentially all the phase information is lost\nat the receiver,",
    "start": "1619800",
    "end": "1624990"
  },
  {
    "text": "and we know, for instance,\nphase information contains the Doppler frequency,\nwhich can be",
    "start": "1624990",
    "end": "1630299"
  },
  {
    "text": "used for velocity estimation. Direct detection\nLiDAR cannot do that. So they cannot detect velocity\nbecause they don't have",
    "start": "1630300",
    "end": "1637860"
  },
  {
    "text": "the phase of the\nsignal at the receiver. Now, coherent LiDAR,\nagain, it's exactly like CW radar and sonar,\nso they continuously",
    "start": "1637860",
    "end": "1645780"
  },
  {
    "text": "transmit waveforms,\nso they're CW systems. They can be FMCW or PMCW,\nso they can, for instance,",
    "start": "1645780",
    "end": "1652290"
  },
  {
    "text": "send chirps just like FMCW\nradar or these ranging codes like PMCW radar, and they\ncan do velocity estimation",
    "start": "1652290",
    "end": "1662790"
  },
  {
    "text": "because they have the full field\nso they can recover a Doppler frequency from the phase\nof the received signal,",
    "start": "1662790",
    "end": "1669270"
  },
  {
    "text": "so that's a very\nimportant characteristic of coherent LiDAR that, in\naddition to range and DOA,",
    "start": "1669270",
    "end": "1675120"
  },
  {
    "text": "it also gives you velocity. Now, generally speaking,\ncoherent LiDAR can achieve",
    "start": "1675120",
    "end": "1682770"
  },
  {
    "text": "much better performance, so\nit's not just that it gives you velocity and the\ndirect detection LiDAR",
    "start": "1682770",
    "end": "1688200"
  },
  {
    "text": "doesn't, but even for\nrange, an SNR coherent can achieve much better range\nbecause it has much better SNR",
    "start": "1688200",
    "end": "1696990"
  },
  {
    "text": "than direct detection LiDAR. There is a very\nsimple argument that can be made to\nkind of justify why",
    "start": "1696990",
    "end": "1702870"
  },
  {
    "text": "coherent achieves better SNR. So direct detection\nLiDAR, as we said,",
    "start": "1702870",
    "end": "1709290"
  },
  {
    "text": "measures optical power, right? So optical power is\nproportional to the square",
    "start": "1709290",
    "end": "1714540"
  },
  {
    "text": "of the electric\nfield, as we know. ",
    "start": "1714540",
    "end": "1720490"
  },
  {
    "text": "For instance, if you look at\nthe Gaussian wave approximation that we did, electric field is\nproportional to 1 over range.",
    "start": "1720490",
    "end": "1731170"
  },
  {
    "text": "OK, so that means the signal\nthat a direct detection LiDAR receives is proportional\nto 1 over R-squared or norm",
    "start": "1731170",
    "end": "1739690"
  },
  {
    "text": "R-squared, which is where R\nis the round trip distance,",
    "start": "1739690",
    "end": "1745029"
  },
  {
    "text": "versus a coherent LiDAR\nmeasures electric field,",
    "start": "1745030",
    "end": "1751310"
  },
  {
    "text": "which is then proportional\nto 1 over R, OK? So let's say it\nranges 100 meters.",
    "start": "1751310",
    "end": "1757767"
  },
  {
    "text": "You want to see hundreds meters. The signal that a direct\ndetection leader would receive would be proportional\nto 1 over 100",
    "start": "1757767",
    "end": "1763750"
  },
  {
    "text": "squared versus for coherent\nLiDAR, it's 1 over 100, so coherent LiDAR would have 100\ntimes a stronger signal, right?",
    "start": "1763750",
    "end": "1772149"
  },
  {
    "text": "So this 1 over r\nversus 1 over r squared is the main reason why coherent\nhas much better SNR typically",
    "start": "1772150",
    "end": "1778390"
  },
  {
    "text": "than direct detection. OK, so just to summarize,\nso what type of LiDARs",
    "start": "1778390",
    "end": "1787480"
  },
  {
    "text": "are used in autonomy? Both direct detection\nand coherent are used.",
    "start": "1787480",
    "end": "1793450"
  },
  {
    "text": "Today, what's available on\nthe market, most of it, like, again, 90% of it\nis direct detection",
    "start": "1793450",
    "end": "1801550"
  },
  {
    "text": "because it has simpler\nhardware simpler algorithms. It's just a easier\ntechnology to develop.",
    "start": "1801550",
    "end": "1809300"
  },
  {
    "text": "So that's what the market went\nafter first, so it's mostly direct detection, but there\nare commercially available",
    "start": "1809300",
    "end": "1817480"
  },
  {
    "text": "coherent LiDARs also, and\nit's gaining more traction. Again, it's a more complex\ntechnology both in hardware",
    "start": "1817480",
    "end": "1823120"
  },
  {
    "text": "and in algorithms, and those\ntechnologies just naturally take a little longer to\ncatch up with the market,",
    "start": "1823120",
    "end": "1829730"
  },
  {
    "text": "but as we go we are seeing\nmore and more coherent LiDARs getting deployed,\nand as I just said,",
    "start": "1829730",
    "end": "1836770"
  },
  {
    "text": "they just have\nsuperior performance. Well, A, they have a\nvery important feature, which is velocities estimation,\nwhich direct detection doesn't",
    "start": "1836770",
    "end": "1845409"
  },
  {
    "text": "even have, but also\neven just for ranging, coherent can do much better.",
    "start": "1845410",
    "end": "1852020"
  },
  {
    "text": "So if you get just a typical\ndirect detection LiDAR today",
    "start": "1852020",
    "end": "1859120"
  },
  {
    "text": "that is a state of the art,\nwhat kind of performance can you expect from it? These are just some\nballpark numbers, right?",
    "start": "1859120",
    "end": "1864639"
  },
  {
    "text": "Don't take these\nnumbers that as set in stone, just to give you an\nidea of what these systems can",
    "start": "1864640",
    "end": "1870610"
  },
  {
    "text": "do. Some of them can see\nup to 400 meters. This is kind of like\nthe very good ones",
    "start": "1870610",
    "end": "1877870"
  },
  {
    "text": "do these, state of the art. Average ones could see\nless than 200 meters. 150 to 200 is what an\naverage time-of-flight LiDAR",
    "start": "1877870",
    "end": "1885820"
  },
  {
    "text": "or direct detection\nladder can do. Range resolution,\na few centimeters, 5 to 10 centimeters is typical.",
    "start": "1885820",
    "end": "1892270"
  },
  {
    "text": "Field of view, for instance,\nthe ones with a rotating frame, as we know, can do a\nfull 360-degree horizontal,",
    "start": "1892270",
    "end": "1898990"
  },
  {
    "text": "and vertically, something around\n50, 60, 70 degrees is typical.",
    "start": "1898990",
    "end": "1904059"
  },
  {
    "text": "They can achieve very\ngood DOA resolution. Like 0.05 degrees is kind of\nwhat good ones can achieve.",
    "start": "1904060",
    "end": "1915190"
  },
  {
    "text": "Some of them can do\nmuch better than this, but this is kind of like what\nyou can get from a good one.",
    "start": "1915190",
    "end": "1923480"
  },
  {
    "text": "And then, what's the\nmeasurement rate? 10 to 30 Hertz. Most of them are\naround 10 Hertz today,",
    "start": "1923480",
    "end": "1929170"
  },
  {
    "text": "so you get 10 frames a\nsecond, and each frame could be like a full 360\ndegrees scan of the environment.",
    "start": "1929170",
    "end": "1935110"
  },
  {
    "text": "So one map they can put\nout a lot of points. So millions of points per\nsecond, the good ones today",
    "start": "1935110",
    "end": "1941870"
  },
  {
    "text": "can do. So say, if it can do one million\npoints per second at 10 Hertz,",
    "start": "1941870",
    "end": "1949360"
  },
  {
    "text": "it means each frame has\n100,000 points in it, so it gives you a point\ncloud with 100,000 points",
    "start": "1949360",
    "end": "1955630"
  },
  {
    "text": "with the full 360 field of view\nevery 100 milliseconds, which is pretty impressive, and\nthe power consumptions",
    "start": "1955630",
    "end": "1961899"
  },
  {
    "text": "are few tens of watts, so\nthese are what we can expect. So now, we're going to look\nat the system architecture",
    "start": "1961900",
    "end": "1968680"
  },
  {
    "text": "of direct detection LiDAR\nfirst and then coherent LiDAR, and then afterwards we'll\ntalk about signal processing",
    "start": "1968680",
    "end": "1975010"
  },
  {
    "text": "and how they actually do\nrender estimation, velocity estimation, and DOA. OK, let's start with\ndirect detection LiDAR.",
    "start": "1975010",
    "end": "1983169"
  },
  {
    "text": "So direct detection LiDAR,\nhere is a system architecture for it. So you start with\na laser source this",
    "start": "1983170",
    "end": "1989650"
  },
  {
    "text": "is kind of the equivalent of\nthe local oscillator in a radar right it generates your\ncarrier and then it's",
    "start": "1989650",
    "end": "1996370"
  },
  {
    "text": "fed to an optical modulator. For coherent LiDAR, an\namplitude modulator is used--",
    "start": "1996370",
    "end": "2002460"
  },
  {
    "text": "amplitude modulation-- because\nwe need to essentially modulate the power.",
    "start": "2002460",
    "end": "2007710"
  },
  {
    "text": "The receiver is going to\nreceive measured power, so amplitude modulation is\nkind of like power modulation. So if you did some\nwaveforms and that gets--",
    "start": "2007710",
    "end": "2015240"
  },
  {
    "text": "the laser gets\namplitude modulated, then it goes through\nthe lens system,",
    "start": "2015240",
    "end": "2020340"
  },
  {
    "text": "basically the TX\noptics, and then it goes to the beam scanner,\nand then, at the output, you have this nicely\ncollimated laser",
    "start": "2020340",
    "end": "2027180"
  },
  {
    "text": "beam that's getting scanned\nand azimuth and elevation,",
    "start": "2027180",
    "end": "2033120"
  },
  {
    "text": "and it's amplitude modulated. So that's a transmit\nsignal model, and then on the received side,\nwhat we receive,",
    "start": "2033120",
    "end": "2040080"
  },
  {
    "text": "it's the same thing we have\nseen in sonar and radar, so there's some\nattenuation, right? There is some delay, so\nyou get STFT minus tau",
    "start": "2040080",
    "end": "2047940"
  },
  {
    "text": "and there is some\nDoppler shift, E to the j 2pi FDT is the\nDoppler shift if there is some relative radial velocity.",
    "start": "2047940",
    "end": "2054360"
  },
  {
    "text": "So you get that through\nthe RX beam scanner, and then you pass it\nthrough the lens system.",
    "start": "2054360",
    "end": "2061080"
  },
  {
    "text": "Why do you need an\nRX beam scanner? Because your techniques need\nto look in the same direction right so you need you need\nthe same type of beam scanning",
    "start": "2061080",
    "end": "2068210"
  },
  {
    "text": "applied if for instance,\nespecially if you have a-- this is a bistatic system, so\nwe have a separate transmit",
    "start": "2068210",
    "end": "2076039"
  },
  {
    "text": "and receive optics,\nbut they need to look in the same direction\nbecause if your transmitter and receiver are looking\nat different directions,",
    "start": "2076040",
    "end": "2082790"
  },
  {
    "text": "you wouldn't even see the\necho that's coming back, so they need to\nbe synchronously, basically, scanning if\nit's a bistatic system.",
    "start": "2082790",
    "end": "2091340"
  },
  {
    "text": "Then, a lens system basically\nfocuses the received light into a photodetector,\nand the photodetector",
    "start": "2091340",
    "end": "2097773"
  },
  {
    "text": "gives you an electrical\nsignal, which we call SPD, PD for photodetector. SPD of t, and then you can\ndigitize that in the ADC,",
    "start": "2097773",
    "end": "2105200"
  },
  {
    "text": "take it to the digital\ndomain, and then on that, you can do range\nand dot estimation at the end of the day\nyou get R hat for range",
    "start": "2105200",
    "end": "2112760"
  },
  {
    "text": "and then theta hat for a hat or\nthe azimuth and elevation DOA. Now, there is variations\nof these architectures.",
    "start": "2112760",
    "end": "2119730"
  },
  {
    "text": "Again, so this is like\na bistatic system. You can have monostatic systems,\nor it might be a flashlight R,",
    "start": "2119730",
    "end": "2126530"
  },
  {
    "text": "so it wouldn't have\nthe beam scanner. It would instead have a\ndiffuser and things like that, but this basically covers\nthe essential components that",
    "start": "2126530",
    "end": "2136160"
  },
  {
    "text": "go into-- or modules that go into a\ndirect detection LiDAR system.",
    "start": "2136160",
    "end": "2143210"
  },
  {
    "text": "OK, so let's talk about-- I want to focus on this\npart, the photodetection,",
    "start": "2143210",
    "end": "2149299"
  },
  {
    "text": "and develop the\ncomplete signal model for this electrical\nsignal that's",
    "start": "2149300",
    "end": "2154760"
  },
  {
    "text": "coming out of the photodiode. We kind of have\nalready done it, but I want to do it a\nlittle more carefully",
    "start": "2154760",
    "end": "2162450"
  },
  {
    "text": "so that we can actually\nthen talk about the DSP. So for direct detection,\nit's pretty simple.",
    "start": "2162450",
    "end": "2169670"
  },
  {
    "text": "So that part of the system\nhas some optical incident, you know, photon flux is coming\nin or the power is p of t.",
    "start": "2169670",
    "end": "2177950"
  },
  {
    "text": "It's a function of time, again,\nbecause we have amplitude modulated the signal\nso the received",
    "start": "2177950",
    "end": "2183470"
  },
  {
    "text": "power varies with time. It goes to our PIN\nand photodiode,",
    "start": "2183470",
    "end": "2189410"
  },
  {
    "text": "and then some\nphotocurrent comes out, which is passed\nthrough a TIA, and then that becomes the PD signal, OK?",
    "start": "2189410",
    "end": "2197150"
  },
  {
    "text": "On the left, we\nhave the picture, so you have some\noptics that's the lens and it focuses the incident\nlight onto a the photodiode,",
    "start": "2197150",
    "end": "2207890"
  },
  {
    "text": "so that big square is\nbasically the aperture of the active aperture\nof the photodiode,",
    "start": "2207890",
    "end": "2213450"
  },
  {
    "text": "and we have some incident,\nbasically, power flux density,",
    "start": "2213450",
    "end": "2220530"
  },
  {
    "text": "which as we know we\ndenote by S average, so that's the Poynting\nvector, the power flux density of the incident light.",
    "start": "2220530",
    "end": "2226760"
  },
  {
    "text": "OK, so let's assume\nthe photodiode is at z equals z0 plane.",
    "start": "2226760",
    "end": "2232100"
  },
  {
    "text": "OK, so it's orthogonal to the\naxis of the beam propagation.",
    "start": "2232100",
    "end": "2238530"
  },
  {
    "text": "That's to maximize,\nbasically, sensitivity, and it's also centered\nat 0, 0 in xy,",
    "start": "2238530",
    "end": "2247220"
  },
  {
    "text": "and the received\nelectrical field. Call that e rx of xy and t.",
    "start": "2247220",
    "end": "2252980"
  },
  {
    "text": "On the photodiode, we can\nwrite that this is what we get.",
    "start": "2252980",
    "end": "2258119"
  },
  {
    "text": "So alpha is, again,\nthe attenuation factor and this what we is\nthis E of xy and z",
    "start": "2258120",
    "end": "2267119"
  },
  {
    "text": "0, that's the electric\nfield amplitude on the photodiode plane, right?",
    "start": "2267120",
    "end": "2273470"
  },
  {
    "text": "Then, you have your\ndelayed carrier, E to the j 2pi FC t minus tau.",
    "start": "2273470",
    "end": "2278600"
  },
  {
    "text": "That's just basically the\ncarrier or the temporal part of the electric field that\nis delayed by the round trip",
    "start": "2278600",
    "end": "2285380"
  },
  {
    "text": "time of flight. You get S of t minus tau. Remember, S of t was just an\namplitude modulation waveform",
    "start": "2285380",
    "end": "2292580"
  },
  {
    "text": "that was applied so that is\nalso delayed by t minus tau, and you have your Doppler term,\nwhich is a e to the j 2pi FDT,",
    "start": "2292580",
    "end": "2301610"
  },
  {
    "text": "so that's the full\nelectric field that is incident on the photodiode.",
    "start": "2301610",
    "end": "2306770"
  },
  {
    "text": "OK, now, as we know\nphotodiode responds to power, not fields, so we\nshould first calculate",
    "start": "2306770",
    "end": "2313099"
  },
  {
    "text": "what is the total power. To calculate the\ntotal power, we first calculate the power flux\ndensity, which is our Poynting",
    "start": "2313100",
    "end": "2319490"
  },
  {
    "text": "vector, as remembered\nfrom the radar discussion, and the Poynting\nvector is basically",
    "start": "2319490",
    "end": "2325280"
  },
  {
    "text": "proportional to the amplitude\nsquared of the field, right? So it just becomes\nminus 1 over 2 eta.",
    "start": "2325280",
    "end": "2332090"
  },
  {
    "text": "eta, remember, is the\nimpedance of free space times magnitude squared of the\nelectric field, and it's in--",
    "start": "2332090",
    "end": "2338990"
  },
  {
    "text": "why the negative sign here? Because the field is\ngoing right to left here",
    "start": "2338990",
    "end": "2344510"
  },
  {
    "text": "in the z direction, so\nthat's why it's in z hat but with a minus sign. just\nto get the direction right,",
    "start": "2344510",
    "end": "2350127"
  },
  {
    "text": "that's why there's a minus sign. So s is a vector\nfield basically.",
    "start": "2350127",
    "end": "2356140"
  },
  {
    "text": "Now, as you square this\nfield, again, as we said,",
    "start": "2356140",
    "end": "2362109"
  },
  {
    "text": "the phase terms go away, right? So the square of e to the j 2pi\nFDT is one, so this disappears.",
    "start": "2362110",
    "end": "2369310"
  },
  {
    "text": "The square of E to the j\n2pi FCT minus 2 is also 1. So we completely lose\nall phase information,",
    "start": "2369310",
    "end": "2376510"
  },
  {
    "text": "and we are just left\nwith this, which is kind of like the amplitude\nof the flux density.",
    "start": "2376510",
    "end": "2384550"
  },
  {
    "text": "The only thing that\nis time dependent is just this s squared\nof t minus tau, so we are just left with\nthe square of the waveform",
    "start": "2384550",
    "end": "2392080"
  },
  {
    "text": "that we send. So this is the power\nflux density and watts parameters per meter squared.",
    "start": "2392080",
    "end": "2397599"
  },
  {
    "text": "To get the total power\nincident on the photodetector, we need to integrate this across\nthe photosensitive area, right?",
    "start": "2397600",
    "end": "2406630"
  },
  {
    "text": "So you just integrate\nthat Poynting vector over the active photodiode\narea, and that gives you",
    "start": "2406630",
    "end": "2411880"
  },
  {
    "text": "the total power. Integration is pretty\nstraightforward. So the total incident\npower is just an integral",
    "start": "2411880",
    "end": "2418119"
  },
  {
    "text": "of the Poynting vector\nover the PD area, and we can just lump\nit into a constant",
    "start": "2418120",
    "end": "2424599"
  },
  {
    "text": "and say that integral\nis just some p0 times the s squared of t minus tau.",
    "start": "2424600",
    "end": "2431830"
  },
  {
    "text": "Mind that the integral is\na spatial integral, right? So it's integrated over\nxy on the active PD area.",
    "start": "2431830",
    "end": "2440180"
  },
  {
    "text": "So that's why this is a s\nsquared of t minus tau, that just comes out of the integral. It has no xy dependency,\nand everything",
    "start": "2440180",
    "end": "2446359"
  },
  {
    "text": "that has xy dependencies\nis basically given here, that the actual integral is just\nthis integral of xyz 0 squared",
    "start": "2446360",
    "end": "2456035"
  },
  {
    "text": "times a bunch of constants. You have the alpha\nsquared and two eta, so you just do that integral,\nand whatever comes out of it,",
    "start": "2456035",
    "end": "2463920"
  },
  {
    "text": "we are just calling it p0\nfor us it's just a constant. It's just a power\nscale factor basically.",
    "start": "2463920",
    "end": "2470310"
  },
  {
    "text": "The point is this photocurrent\nthat is coming out of the PD,",
    "start": "2470310",
    "end": "2476790"
  },
  {
    "text": "at the end of the day, is\njust the responsivity times p",
    "start": "2476790",
    "end": "2482700"
  },
  {
    "text": "of t the power, and\nthe power we just showed that it's some\np0 times the square",
    "start": "2482700",
    "end": "2488820"
  },
  {
    "text": "of the waveform or the\npulse shape that was sent.",
    "start": "2488820",
    "end": "2494950"
  },
  {
    "text": "So we did all this\nderivation but this is really the signal model\nfor the photocurrent",
    "start": "2494950",
    "end": "2500130"
  },
  {
    "text": "that we now have, and again,\na very important point is, for direct detection, there\nis no phase information.",
    "start": "2500130",
    "end": "2507090"
  },
  {
    "text": "There's no Doppler\nterm in here, right? It's just a intensity value.",
    "start": "2507090",
    "end": "2512790"
  },
  {
    "text": "So Doppler is lost. We cannot measure velocity\nwith direct detection LiDAR. Any questions?",
    "start": "2512790",
    "end": "2519550"
  },
  {
    "text": "OK, next step is this current\nis going to go through the TIA and get converted to a voltage\nsignal which we call SPD of t,",
    "start": "2519550",
    "end": "2527890"
  },
  {
    "text": "but we already know\nhow to model that. It's a filtering effect, right? So we said that the TIA\nis a low-pass filter,",
    "start": "2527890",
    "end": "2535370"
  },
  {
    "text": "so you just pass that through\nyour low-pass filter frequency response, and this is it.",
    "start": "2535370",
    "end": "2540430"
  },
  {
    "text": "So your PD output is\njust the Fourier inverse of the TIA frequency\nresponse called",
    "start": "2540430",
    "end": "2547710"
  },
  {
    "text": "that H of omega\ntimes the Fourier transform of your\nphotocurrent, OK?",
    "start": "2547710",
    "end": "2553240"
  },
  {
    "text": "And again, in a more\nsimplified case,",
    "start": "2553240",
    "end": "2558369"
  },
  {
    "text": "where if we go back to the\nideal TIA model with just a resistive feedback\nRF, and we also",
    "start": "2558370",
    "end": "2565810"
  },
  {
    "text": "assume that T is well within\nthe bandwidth of the TIF,",
    "start": "2565810",
    "end": "2571480"
  },
  {
    "text": "this filter output becomes\njust a scaling, as we said.",
    "start": "2571480",
    "end": "2577090"
  },
  {
    "text": "So at the end of the\nday, the PD output, in this simplified case,\njust becomes a scaled version",
    "start": "2577090",
    "end": "2586210"
  },
  {
    "text": "of s squared and the\nscale factor specifically is the responsibility of the\nphotodiode times the feedback",
    "start": "2586210",
    "end": "2592210"
  },
  {
    "text": "resistance of the TIA\ntimes this p0 which is just an integral of\nthe squared electric field",
    "start": "2592210",
    "end": "2598599"
  },
  {
    "text": "over the PD area, so that's just\nthe power at times s squared.",
    "start": "2598600",
    "end": "2604480"
  },
  {
    "text": "So the signal is really\nsome constant times s squared of t minus tau,\nand this is in volts,",
    "start": "2604480",
    "end": "2611890"
  },
  {
    "text": "and with this signal,\nwe can now work on it and try to estimate tau.",
    "start": "2611890",
    "end": "2617319"
  },
  {
    "text": "That's what we want to estimate\nthat's our time of flight, OK? Again, I want to reiterate\nthat Doppler shift has",
    "start": "2617320",
    "end": "2624840"
  },
  {
    "text": "no effect on the PD signal in\nthe case of direct detection.",
    "start": "2624840",
    "end": "2631000"
  },
  {
    "text": "So because of that, direct\ndetection LiDARs cannot estimate target velocity. They can just find tau because\nthe received signal only",
    "start": "2631000",
    "end": "2639900"
  },
  {
    "text": "has tau dependency. It does not depend\non anything else.",
    "start": "2639900",
    "end": "2645309"
  },
  {
    "text": "So what types of-- so\nwhat is s of t here? What type of waveforms\nor pulse shapes",
    "start": "2645310",
    "end": "2651840"
  },
  {
    "text": "is used in direct\ndetection LiDAR. There's different pulse\nshapes, but typically",
    "start": "2651840",
    "end": "2658650"
  },
  {
    "text": "what systems do is they send\nvery, very short pulses, so the pulse durations\nare on the order of 3",
    "start": "2658650",
    "end": "2665120"
  },
  {
    "text": "to 10 nanoseconds, and\nhere is one example shown. It's the time axis is\nnot in scale, of course,",
    "start": "2665120",
    "end": "2672180"
  },
  {
    "text": "but you basically\nhave your carrier and your amplitude is\nmodulated, so you multiply it by this s of t.",
    "start": "2672180",
    "end": "2679350"
  },
  {
    "text": "In this case, the pulse\nshape is a Gaussian, and that's a common\none that is used. It's like a nice\nsmooth pulse shape,",
    "start": "2679350",
    "end": "2686370"
  },
  {
    "text": "and then so they send these\nvery short pulses, and then",
    "start": "2686370",
    "end": "2691470"
  },
  {
    "text": "for some period\nafter that, they just don't transmit anything and\njust wait for echoes again,",
    "start": "2691470",
    "end": "2696760"
  },
  {
    "text": "exactly like pulse echoes\nsonar or pulse radar there's some pulse\nrepetition interval",
    "start": "2696760",
    "end": "2702930"
  },
  {
    "text": "or PRI that's the time duration\nbetween two consecutive pulses that are sent, and that\nduration, basically,",
    "start": "2702930",
    "end": "2711210"
  },
  {
    "text": "determines the maximum range\nthat the system can detect because the maximum round\ntrip delay, tau max, that",
    "start": "2711210",
    "end": "2719520"
  },
  {
    "text": "can be detected unambiguously is\nequal to that pulse repetition",
    "start": "2719520",
    "end": "2725370"
  },
  {
    "text": "interval. If it's more than\nthat, it's going to be confused with the\nnext pulse that was sent.",
    "start": "2725370",
    "end": "2731370"
  },
  {
    "text": "So that PRI is that it's\ntypically microseconds. Like, 1 to 2 microseconds\nis what the TRI is,",
    "start": "2731370",
    "end": "2740720"
  },
  {
    "text": "or the PRI is 1\nto 2 microseconds,",
    "start": "2740720",
    "end": "2747510"
  },
  {
    "text": "and the pulse duration\nis nanoseconds. So again, this picture\nis not to scale. The pulses like super,\nsuper short, and then,",
    "start": "2747510",
    "end": "2757020"
  },
  {
    "text": "most of the time, it's just\nnot transmitting anything. The peak power that they send\nthese systems is extremely high",
    "start": "2757020",
    "end": "2765990"
  },
  {
    "text": "because they have a very short\ntime duration to send they max out the power within that\nshort time to get the best SNR.",
    "start": "2765990",
    "end": "2773890"
  },
  {
    "text": "So they typically go up to\nright below the eye safety limit or the MPE, Maximum\nPermissible Emission",
    "start": "2773890",
    "end": "2779760"
  },
  {
    "text": "limit, so they send very high\npower, super short pulses. OK, questions?",
    "start": "2779760",
    "end": "2788740"
  },
  {
    "text": "All right, so this is-- now\nwe have the signal model-- a full signal model and\nthe system architecture",
    "start": "2788740",
    "end": "2794860"
  },
  {
    "text": "for direct detection LiDAR. We are going to talk\nabout coherent LiDAR",
    "start": "2794860",
    "end": "2801130"
  },
  {
    "text": "on next so we understand both\nsystem architectures and signal models, and then\nwe'll look at how",
    "start": "2801130",
    "end": "2807530"
  },
  {
    "text": "these signals are processed for\nrange and velocity estimation. So here's the block\ndiagram of a coherent LiDAR",
    "start": "2807530",
    "end": "2815920"
  },
  {
    "text": "so Aquarian LiDAR are\non the transmit side it's kind of similar. So you have a laser\nsource and it's",
    "start": "2815920",
    "end": "2821800"
  },
  {
    "text": "kind of like your local\noscillator for radar and then you modulate\nit with some waveform",
    "start": "2821800",
    "end": "2827920"
  },
  {
    "text": "but here instead of so for\ndirect detection amplitude modulation was applied\nfor coherent LiDAR are you",
    "start": "2827920",
    "end": "2835030"
  },
  {
    "text": "either phase or frequency\nmodulate, right? So you either have FM or\nPMCW systems, and it's a CW,",
    "start": "2835030",
    "end": "2845140"
  },
  {
    "text": "so it's continuously sending\nwaveforms that are periodic, and coherent LiDARs almost\nalways are monostatic,",
    "start": "2845140",
    "end": "2856510"
  },
  {
    "text": "so they use the\nsame shared optics for transmit and receive,\nand the reason for this",
    "start": "2856510",
    "end": "2864400"
  },
  {
    "text": "is that it's very tricky to\nmake a bistatic coherent LiDAR",
    "start": "2864400",
    "end": "2871690"
  },
  {
    "text": "for reasons-- we cannot quite get\ninto the details of it, but it has to do with the\nphysics of coherent detection",
    "start": "2871690",
    "end": "2878680"
  },
  {
    "text": "and spectral optics. To get good SNR, you need\nto make it monostatic,",
    "start": "2878680",
    "end": "2886270"
  },
  {
    "text": "so basically have\nthe same optical path for your transmitted\nand received light and to achieve that, usually,\na beam splitter or a circulator",
    "start": "2886270",
    "end": "2897160"
  },
  {
    "text": "is used. So what this device does is\nit's a photonic device which",
    "start": "2897160",
    "end": "2904299"
  },
  {
    "text": "has basically it's kind\nof like a multiplexer. So on the transmit\nside, and that's",
    "start": "2904300",
    "end": "2909880"
  },
  {
    "text": "why we are showing this\nin different colors. If this green is your outgoing\nbeam, transmit beam, most of it",
    "start": "2909880",
    "end": "2918160"
  },
  {
    "text": "goes through the device\nto the output port. There's going to be some\nlosses, so this is just --",
    "start": "2918160",
    "end": "2924580"
  },
  {
    "text": "radiated out. These devices have a\nlittle bit of losses, and a small portion of the\noutgoing or the transmit signal",
    "start": "2924580",
    "end": "2935280"
  },
  {
    "text": "also kind of spills over\nto the receiver path, so that's equivalent\nto the spillover",
    "start": "2935280",
    "end": "2942210"
  },
  {
    "text": "we have in radar radio\ntransmit antenna and receive antenna coupled directly. This is the optical\nequivalent of that,",
    "start": "2942210",
    "end": "2948310"
  },
  {
    "text": "so it's an undesirable thing. It's kind of like additional\nnoise, but it just happens.",
    "start": "2948310",
    "end": "2954839"
  },
  {
    "text": "So that's your transmit path,\nand then under the receive path the signal that's\ncoming back, most of it",
    "start": "2954840",
    "end": "2961589"
  },
  {
    "text": "goes to the output\nport of the device. There's a little bit of\nlosses, and also a little bit",
    "start": "2961590",
    "end": "2967980"
  },
  {
    "text": "of leakage the other way around,\nbut we don't care about that, so there is some optical\nleakage or spillover from on the received\npath, but that--",
    "start": "2967980",
    "end": "2975000"
  },
  {
    "text": "this one is unimportant, so\nwe don't even show it, OK? So that's a beam splitter.",
    "start": "2975000",
    "end": "2980290"
  },
  {
    "text": "So physically it has three\nports, basically and so two",
    "start": "2980290",
    "end": "2986340"
  },
  {
    "text": "input ports and one output\nport, but the output port is bidirectional, right? So physically, this\nis the output port",
    "start": "2986340",
    "end": "2993450"
  },
  {
    "text": "which operates in a full duplex\nway, light goes both ways, and then and then it has\nthis input and that one that",
    "start": "2993450",
    "end": "3001310"
  },
  {
    "text": "goes to the coherent\nreceiver, and also, again, you",
    "start": "3001310",
    "end": "3006470"
  },
  {
    "text": "have a beam scanner,\nso you scan the beam, and then your\ntransmit waveform is--",
    "start": "3006470",
    "end": "3013190"
  },
  {
    "text": "signal is the waveform that your\nmodulating times the carrier, and the receiver as we\nknow, is the attenuation",
    "start": "3013190",
    "end": "3021650"
  },
  {
    "text": "factor times the delayed\nwaveform times the Doppler term e to the j 2pi FDT, OK?",
    "start": "3021650",
    "end": "3028430"
  },
  {
    "text": "Now, I want to talk about this\nmodule, coherent receiver,",
    "start": "3028430",
    "end": "3033950"
  },
  {
    "text": "because basically the magic-- all the magic happens here,\nand what this module does",
    "start": "3033950",
    "end": "3040369"
  },
  {
    "text": "is it gives us an\nelectrical signal. We call it SCR, CR\nfor coherent receiver.",
    "start": "3040370",
    "end": "3045470"
  },
  {
    "text": "SCR of t, that is proportional\nto the complex electric field,",
    "start": "3045470",
    "end": "3050609"
  },
  {
    "text": "so that's the main distinction\nbetween coherent LiDAR and direct detection. Direct detection,\nwe showed that we",
    "start": "3050610",
    "end": "3056300"
  },
  {
    "text": "get a signal that is\nproportional to the magnitude squared of the\nfield or the power.",
    "start": "3056300",
    "end": "3062450"
  },
  {
    "text": "Incoherent LiDAR,\nwe get a signal that is proportional to\nthe full electric field,",
    "start": "3062450",
    "end": "3068100"
  },
  {
    "text": "so at a functional level, what\nthis coherent receiver does--",
    "start": "3068100",
    "end": "3073130"
  },
  {
    "text": "and notice that\nit has two inputs. There is a received\nsignal input, and there is a local\noscillator input to it.",
    "start": "3073130",
    "end": "3078410"
  },
  {
    "text": "So functionally, it does\nthis exact same function as the down converter\nin radar did.",
    "start": "3078410",
    "end": "3085789"
  },
  {
    "text": "Remember, the radar\ndown converter, we fed it the received\nsignal and low signal, right?",
    "start": "3085790",
    "end": "3091925"
  },
  {
    "text": " And then, it gave us this f of\nt, which was a complex signal",
    "start": "3091925",
    "end": "3101140"
  },
  {
    "text": "proportional to, basically,\nthe full complex field.",
    "start": "3101140",
    "end": "3106420"
  },
  {
    "text": "A coherent receiver\ndoes the same function in the optical\ndomain, and there is",
    "start": "3106420",
    "end": "3115660"
  },
  {
    "text": "a bunch of slides in\nthe notes that kind of go over the full detail of how\nthe coherent receiver works",
    "start": "3115660",
    "end": "3122050"
  },
  {
    "text": "but here I just want\nto go I don't want to go over the full math because\nit's too detailed for class, but I want to go over the\nhigh-level idea of how you can",
    "start": "3122050",
    "end": "3130150"
  },
  {
    "text": "construct, because inside, there\nare still PIN photodiodes used and PIN photodiodes, we know\nit's like a square detector.",
    "start": "3130150",
    "end": "3137319"
  },
  {
    "text": "It always gives you a signal\nthat's proportional to power. So how can you\nconstruct something",
    "start": "3137320",
    "end": "3142391"
  },
  {
    "text": "with a bunch of\nphotodiodes that actually extracts a field for you? And that's the magic\nof coherence detection.",
    "start": "3142392",
    "end": "3147820"
  },
  {
    "text": "The way it's done is, again,\nI'm going to do pseduomath here,",
    "start": "3147820",
    "end": "3153340"
  },
  {
    "text": "so not all the\nterms are correct, but just to get you the idea. If you have just one photodiode\nand instead of just feeding it",
    "start": "3153340",
    "end": "3162220"
  },
  {
    "text": "the received signal,\nI add another field to the received signal, and\nthen I feed the sum of the two",
    "start": "3162220",
    "end": "3170380"
  },
  {
    "text": "to the photodiode. So I have this erx, and\nI also add some a bit",
    "start": "3170380",
    "end": "3177710"
  },
  {
    "text": "of the local oscillator, elo,\nso I add up the two fields, I'm going to couple\nthem together, and then",
    "start": "3177710",
    "end": "3183350"
  },
  {
    "text": "feed it to the photodiode. What I'm going to\nget at the output, the current, as\nwe know, is going",
    "start": "3183350",
    "end": "3189830"
  },
  {
    "text": "to be proportional to\nthe magnitude squared of erx plus elo.",
    "start": "3189830",
    "end": "3196099"
  },
  {
    "text": "All right, that's what\nthe photodiode does? So because it's the\nsum of two fields, I'm going to get 3\nterms out, right?",
    "start": "3196100",
    "end": "3202040"
  },
  {
    "text": "So I'm going to\nget erx squared--  is this readable?",
    "start": "3202040",
    "end": "3207520"
  },
  {
    "text": "I think it is, right? OK, erx squared plus elo\nsquared plus a cross term,",
    "start": "3207520",
    "end": "3216820"
  },
  {
    "text": "which is plus 2 times the\nreal part, because these are complex fields, of erx times\nelo star, conjugate of elo.",
    "start": "3216820",
    "end": "3227049"
  },
  {
    "text": "OK, so that's what I get\nif I just use one of these. Now, if I use a second\nphotodiode, and to this one,",
    "start": "3227050",
    "end": "3237910"
  },
  {
    "text": "I feed instead of the sum\nof the two fields there, I subtract them, so I do erx\nminus elo, clean this up.",
    "start": "3237910",
    "end": "3249349"
  },
  {
    "text": "Minus elo, so I subtract the\ntwo fields and feed it to that. What photocurrent am I\ngoing to get out of that?",
    "start": "3249350",
    "end": "3254960"
  },
  {
    "text": "So it's going to be proportional\nto erx minus elo squared, so again, I'm going\nto get three terms.",
    "start": "3254960",
    "end": "3261500"
  },
  {
    "text": "There's going to\nbe an erx squared elo squared or magnitude\nsquared minus 2 times",
    "start": "3261500",
    "end": "3269900"
  },
  {
    "text": "the real part of erx\nelo conjugate, good?",
    "start": "3269900",
    "end": "3276380"
  },
  {
    "text": "All right, now\nsomebody figured they can do something pretty smart,\nwhich is if you put these two",
    "start": "3276380",
    "end": "3283280"
  },
  {
    "text": "diodes back to back like so. ",
    "start": "3283280",
    "end": "3290310"
  },
  {
    "text": "So there's diode\none and diode two, and again, one is-- we are\nfeeding it erx plus elo,",
    "start": "3290310",
    "end": "3295380"
  },
  {
    "text": "and to the second one, we\nare feeding erx minus elo, and then you look\nat the current. At this point, this\nid is the difference",
    "start": "3295380",
    "end": "3304750"
  },
  {
    "text": "of the currents\nof the two diodes, so this id is going\nto be id 1 minus id 2",
    "start": "3304750",
    "end": "3313930"
  },
  {
    "text": "and then the common\nmodes cancel out. So the erx cancels out. The elo squared\ncancels out, and it's",
    "start": "3313930",
    "end": "3320740"
  },
  {
    "text": "going to be proportional to just\n4 times the real part of erx",
    "start": "3320740",
    "end": "3326500"
  },
  {
    "text": "elo star.  OK, now we're getting\nsomewhere. elo is known,",
    "start": "3326500",
    "end": "3332700"
  },
  {
    "text": "so if you treat the elo\nas just like a constant, this is going to be\nproportional in a way",
    "start": "3332700",
    "end": "3339170"
  },
  {
    "text": "to just the real part of erx. ",
    "start": "3339170",
    "end": "3344492"
  },
  {
    "text": "All right, so by\nusing-- and this is called a balance detector. By using one balanced\nphotodetector, which",
    "start": "3344492",
    "end": "3351140"
  },
  {
    "text": "is 2 photodiodes back to\nback with these specific combinations of two\nfields applied to it,",
    "start": "3351140",
    "end": "3356240"
  },
  {
    "text": "you can kind of extract\nthe real part of your input or received electric field. Now, you can make another\nbalanced detector,",
    "start": "3356240",
    "end": "3364970"
  },
  {
    "text": "where you do the\nexact same thing, except you apply an lo that is\nphase shifted by 90 degrees.",
    "start": "3364970",
    "end": "3372570"
  },
  {
    "text": "So you apply j times elo to it,\nthat's just a 90 degree phase shift, and all that happens\nis that everywhere that you",
    "start": "3372570",
    "end": "3380460"
  },
  {
    "text": "have real parts, you get\nimaginary parts if you do the math. So that one gives you\nimaginary, imaginary,",
    "start": "3380460",
    "end": "3385620"
  },
  {
    "text": "so then if you do that second\nback-to-back or balanced",
    "start": "3385620",
    "end": "3390660"
  },
  {
    "text": "detector and feed\nthe phase shift-- that the 90-degree phase\nshift that lo to it the,",
    "start": "3390660",
    "end": "3396780"
  },
  {
    "text": "current that you get out of\nthat is going to be proportional to the imaginary part of erx.",
    "start": "3396780",
    "end": "3403530"
  },
  {
    "text": "So you convert the real\npart and the imaginary part, and then you just\ncombine them it's like a full IQ receiver\nat that point for you, OK?",
    "start": "3403530",
    "end": "3411059"
  },
  {
    "text": "Again, this was pseudo math\nthe full correct math is in the notes but at\nthe end of the day,",
    "start": "3411060",
    "end": "3416740"
  },
  {
    "text": "this is what it looks\nlike, the full coherent IQ coherent receiver.",
    "start": "3416740",
    "end": "3423040"
  },
  {
    "text": "This is the full construction. So this module, which is called\na 90-degree optical hybrid,",
    "start": "3423040",
    "end": "3429660"
  },
  {
    "text": "it's a passive device. It's, like, there's\nwaveguides and couplers and delay lines in it. There's nothing active in there.",
    "start": "3429660",
    "end": "3436110"
  },
  {
    "text": "It's just a passive\ndevice, but you feed it a local oscillator field\nand a receive field",
    "start": "3436110",
    "end": "3441210"
  },
  {
    "text": "and it generates at\nthe four outputs of it. So it's two inputs,\nfour outputs,",
    "start": "3441210",
    "end": "3446520"
  },
  {
    "text": "and the four outputs are\nexactly what we talked about. There's erx plus elo, erx\nminus elo, erx plus j times",
    "start": "3446520",
    "end": "3453240"
  },
  {
    "text": "elo, erx x minus j times elo. So this, you can do\ncompletely passively, and then you feed two of those\nto one balanced detector,",
    "start": "3453240",
    "end": "3461730"
  },
  {
    "text": "pass it through the\nTIA and that gives you the imaginary part or the real\npart of your signal or the I",
    "start": "3461730",
    "end": "3468150"
  },
  {
    "text": "component, and then\nthe other two outputs go through another balanced\ndetector and a TIA,",
    "start": "3468150",
    "end": "3473340"
  },
  {
    "text": "and that gives you the\nimaginary part of your signal.",
    "start": "3473340",
    "end": "3479500"
  },
  {
    "text": "So full signal model\nthen for a coherent are",
    "start": "3479500",
    "end": "3485610"
  },
  {
    "text": "is given by this, what\nwe call the SCR, output of the full coherent receiver.",
    "start": "3485610",
    "end": "3492300"
  },
  {
    "text": "It's the end phase plus j\ntimes the quadrature component,",
    "start": "3492300",
    "end": "3497970"
  },
  {
    "text": "and if you do the full math,\nagain, it's in the slides, but we kind of talked about\nthe high-level idea behind it,",
    "start": "3497970",
    "end": "3504700"
  },
  {
    "text": "the magic is that this\nsignal that you get out of your coherent\nreceiver becomes",
    "start": "3504700",
    "end": "3510270"
  },
  {
    "text": "equal to just some constant. Call that kappa. It's a multiplication of a\nbunch of things, responsivity,",
    "start": "3510270",
    "end": "3515490"
  },
  {
    "text": "feedback resistance, the\npower incident on the diodes, and so on and so forth,\nso don't mind about it.",
    "start": "3515490",
    "end": "3521070"
  },
  {
    "text": "It's just a constant\ntimes the delayed waveform f of t minus tau times the\nDoppler term e to the j,",
    "start": "3521070",
    "end": "3529559"
  },
  {
    "text": "so it recovers the full complex\nwaveform that you had sent.",
    "start": "3529560",
    "end": "3535950"
  },
  {
    "text": "So if you go back to\nyour radar slides, this is exactly the signal model\nwe had for SIF of t in radar,",
    "start": "3535950",
    "end": "3542790"
  },
  {
    "text": "right? It was exactly the same. So now we achieve the exact\nsame signal for optics--",
    "start": "3542790",
    "end": "3551220"
  },
  {
    "text": "with optics in\nLiDAR, which means-- now, this is amazing because\neverything we talked about",
    "start": "3551220",
    "end": "3557610"
  },
  {
    "text": "in radar now applies to LiDAR. We can send the same waveforms\nwith coherent LiDAR chirps or PN sequences.",
    "start": "3557610",
    "end": "3564810"
  },
  {
    "text": "We can apply the exact\nsame DSP, so now you're already-- without\neven talking about it,",
    "start": "3564810",
    "end": "3570487"
  },
  {
    "text": "you already know\nwhat's going to come, so we are going to\nbuild an FMCW LiDAR and you're going to\ndo FFTs to do ranging,",
    "start": "3570487",
    "end": "3577050"
  },
  {
    "text": "and we are going to do FFTs\nto do velocity estimation. It's going to be\nexact same thing,",
    "start": "3577050",
    "end": "3582570"
  },
  {
    "text": "so that's the magic\nof coherent LiDAR. By the way this idea\nof coherent receiver, it's not new to sensing.",
    "start": "3582570",
    "end": "3588599"
  },
  {
    "text": "It's been done for\nmany, many years in optical communications. Actually, the entire\nbackbone of our internet",
    "start": "3588600",
    "end": "3596310"
  },
  {
    "text": "relies on optical coherence\noptical transmission and receivers.",
    "start": "3596310",
    "end": "3603090"
  },
  {
    "text": "So every data center, they\nhave these coherent optical receivers. Without that,\nactually, it would have",
    "start": "3603090",
    "end": "3608490"
  },
  {
    "text": "been impossible to achieve\nthe kind of data bandwidths that we have today\nbecause when you're able to transmit and\nreceive complex signals,",
    "start": "3608490",
    "end": "3616650"
  },
  {
    "text": "then it opens up a whole\nbunch of new possibilities for modulation techniques\nand DSP techniques.",
    "start": "3616650",
    "end": "3624060"
  },
  {
    "text": "OK, so that's the\nfull signal model, and then, as we said,\nthe kind of waveforms",
    "start": "3624060",
    "end": "3630210"
  },
  {
    "text": "that coherent LiDAR are\ntransmit and receive, they're very similar\nto CW radars.",
    "start": "3630210",
    "end": "3637349"
  },
  {
    "text": "So you can have\nFMCW LiDARs, which send these linear frequency\nchirps, and you can build",
    "start": "3637350",
    "end": "3644340"
  },
  {
    "text": "PMCW LiDARs, which send\nranging codes like m-sequences or any other type of\ncodes digital codes",
    "start": "3644340",
    "end": "3651630"
  },
  {
    "text": "with good correlation\nproperties basically, and then you phase modulated it.",
    "start": "3651630",
    "end": "3657090"
  },
  {
    "text": "Any questions? Yes. We are transmitting a continuous\nwave and the LiDAR scanning,",
    "start": "3657090",
    "end": "3664260"
  },
  {
    "text": "then there will be\npositions shift or-- Exactly, that's a good question.",
    "start": "3664260",
    "end": "3669760"
  },
  {
    "text": "So the question is we are\ntransmitting a continuous wave, but also if--",
    "start": "3669760",
    "end": "3676580"
  },
  {
    "text": "either physically like a\nspinning LiDAR or the system is moving or even\nin a scanning LiDAR,",
    "start": "3676580",
    "end": "3682420"
  },
  {
    "text": "your mirrors are\nrotating or whatever the scanning\nmechanism, is pointing to different directions.",
    "start": "3682420",
    "end": "3688609"
  },
  {
    "text": "So it turns out that because-- so then, I guess the question\nis, how do we actually receive",
    "start": "3688610",
    "end": "3693970"
  },
  {
    "text": "something if you're moving? So exactly because\nof that, that's",
    "start": "3693970",
    "end": "3699970"
  },
  {
    "text": "one of the big\nfactors that limits how fast you can move, right? So that's why part of the\nreason these systems are limited",
    "start": "3699970",
    "end": "3706270"
  },
  {
    "text": "to 10 to 30 frames a second is\nbecause if they move too fast-- like, the faster\nyou move, the less",
    "start": "3706270",
    "end": "3713290"
  },
  {
    "text": "echo you're going to\nreceive because you're now looking in a slightly different\ndirection than where you were",
    "start": "3713290",
    "end": "3719740"
  },
  {
    "text": "pointing to, so\nthat's kind of that, and it's called the lag angle. So the lag angle is\nthe angle or how much",
    "start": "3719740",
    "end": "3726700"
  },
  {
    "text": "you moved from the time\nyou were transmitting to the time the\necho is coming back.",
    "start": "3726700",
    "end": "3733329"
  },
  {
    "text": "So if that lag angle\nis too large-- so in a case of a scanning\nLiDAR, or let's say",
    "start": "3733330",
    "end": "3738580"
  },
  {
    "text": "you have this\nscanning mirror that is kind of like\npivoting like this,",
    "start": "3738580",
    "end": "3743589"
  },
  {
    "text": "so you send a beam in this\ndirection and by the time the echo is coming\nback, your mirror",
    "start": "3743590",
    "end": "3749170"
  },
  {
    "text": "has a slightly moved\nso it's actually pointing in a different\ndirection, right?",
    "start": "3749170",
    "end": "3754240"
  },
  {
    "text": "That angle theta\nis the lag angle,",
    "start": "3754240",
    "end": "3760160"
  },
  {
    "text": "and the larger it is, a bigger\nSNR hit you are going to have,",
    "start": "3760160",
    "end": "3765660"
  },
  {
    "text": "OK? It's not, like, as soon\nas it becomes nonzero, you lose everything, right?",
    "start": "3765660",
    "end": "3771110"
  },
  {
    "text": "Because there is a bit of\nangular field of view that you're still receptive to, but\nif your mirror is moving too",
    "start": "3771110",
    "end": "3777830"
  },
  {
    "text": "fast-- so typically, if you plot\nSNR versus the lag angle theta",
    "start": "3777830",
    "end": "3784265"
  },
  {
    "text": ", it's usually nice and constant\nand then there's a cliff that",
    "start": "3784265",
    "end": "3790039"
  },
  {
    "text": "it drops, and that kind of\nlimits you know how fast you can scan or move or whatever\nyour beam scanning technique",
    "start": "3790040",
    "end": "3796670"
  },
  {
    "text": "is. So that's a very good question,\nand it's a design factor that you need to\nmodel it, study it,",
    "start": "3796670",
    "end": "3802340"
  },
  {
    "text": "and it kind of determines\nhow fast you can move, and it's different.",
    "start": "3802340",
    "end": "3808190"
  },
  {
    "text": "The lag effect is\nactually different between coherent LiDAR and\ndirect detection LiDAR.",
    "start": "3808190",
    "end": "3813590"
  },
  {
    "text": "Actually, it turns out\nthat for direct detection, it's easy to find that curve.",
    "start": "3813590",
    "end": "3819799"
  },
  {
    "text": "For coherent, it becomes\ndoable but very complicated. You need to go into the very\ndetails of the speckle physics",
    "start": "3819800",
    "end": "3825860"
  },
  {
    "text": "and things like that. OK, so now we're ready\nto talk about algorithms",
    "start": "3825860",
    "end": "3832730"
  },
  {
    "text": "that are used to do-- first, we'll talk about direct\ndetection LiDAR, which is just",
    "start": "3832730",
    "end": "3839270"
  },
  {
    "text": "ranging right, and then we'll\ntalk about the coherent LiDAR which does range and Doppler.",
    "start": "3839270",
    "end": "3844730"
  },
  {
    "text": "Before that, I want to\nshow a quick live demo. So we have a LiDAR here.",
    "start": "3844730",
    "end": "3850609"
  },
  {
    "text": "This is a direct detection\nleader with a rotating frame.",
    "start": "3850610",
    "end": "3857070"
  },
  {
    "text": "So it's a multibeam\nrotating frame LiDAR. Actually, you don't\nsee the rotation because the mechanical motor\nis behind this IR transparent",
    "start": "3857070",
    "end": "3867110"
  },
  {
    "text": "glass. Actually, from where you are,\nyou probably don't hear it, but I can hear it spinning.",
    "start": "3867110",
    "end": "3872593"
  },
  {
    "text": "There's a motor\nspinning in there. It's spinning at\n10 Hertz, and it has 32 laser beams that\nit's basically transmitting,",
    "start": "3872593",
    "end": "3881750"
  },
  {
    "text": "and it's constantly rotating. So let's look at it. It's running.",
    "start": "3881750",
    "end": "3886910"
  },
  {
    "text": "If I don't break it,\nI should be able to--",
    "start": "3886910",
    "end": "3892470"
  },
  {
    "text": "OK, I think it's working, so I'm\njust going to switch to that.",
    "start": "3892470",
    "end": "3899440"
  },
  {
    "text": "So here's a view of the\nclassroom, a full 360. You actually should see the--",
    "start": "3899440",
    "end": "3905260"
  },
  {
    "text": "the HDMI is not-- OK, so you kind of\nsee the shadow of me,",
    "start": "3905260",
    "end": "3911819"
  },
  {
    "text": "and that's the wall, and\nthis is a full 3D view.",
    "start": "3911820",
    "end": "3917400"
  },
  {
    "text": "You see the scan\nlines, and the coloring is by reflectivity so the\nwalls are more reflective.",
    "start": "3917400",
    "end": "3925030"
  },
  {
    "text": "If anyone wants to do a\nTikTok dance or something,",
    "start": "3925030",
    "end": "3930410"
  },
  {
    "text": "now's the time. So yeah, so you see the\nscanlines on the wall",
    "start": "3930410",
    "end": "3935650"
  },
  {
    "text": "so that's the rotating beams. Color is reflectivity,\nso walls are apparently",
    "start": "3935650",
    "end": "3942190"
  },
  {
    "text": "more reflective at\nthe 905 wavelength that this is operating at,\nand the fabric on the chairs",
    "start": "3942190",
    "end": "3948140"
  },
  {
    "text": "is a little less reflective. Also, on the top, this\nkind of like panoramic view",
    "start": "3948140",
    "end": "3953410"
  },
  {
    "text": "is that they actually unroll\nthe point cloud and make it like a very wide image--",
    "start": "3953410",
    "end": "3958430"
  },
  {
    "text": "IR image, basically. So yeah, that's it.",
    "start": "3958430",
    "end": "3964720"
  },
  {
    "text": "You had something very\nreflective at some point. What was it?",
    "start": "3964720",
    "end": "3969790"
  },
  {
    "text": "Metal or some that showed red? Yeah, so that's your laptop,\nwhich is more IR reflective",
    "start": "3969790",
    "end": "3976390"
  },
  {
    "text": "apparently, and actually,\nif you change the angle, you should see-- there you go. You see the\nreflectivity changes.",
    "start": "3976390",
    "end": "3982210"
  },
  {
    "text": "I'm going to just\nZoom in on that. See? That's the angle of incidence. So because these are\ndiffuse reflectors,",
    "start": "3982210",
    "end": "3988510"
  },
  {
    "text": "there's a cosine theta term\nthat goes with the angle. So if you point it exactly\ntowards this, that's",
    "start": "3988510",
    "end": "3994569"
  },
  {
    "text": "where you get maximum signal\nand when it becomes red, you're basically perfectly\npointing towards it.",
    "start": "3994570",
    "end": "4000630"
  },
  {
    "text": "Anyway, this is fun but we need\nto get back to the lecture, I think. Yeah, you get an idea.",
    "start": "4000630",
    "end": "4005760"
  },
  {
    "text": "I mean, this is not the\nbest LiDAR out there, but it's better than average. It's a good LiDAR.",
    "start": "4005760",
    "end": "4011820"
  },
  {
    "text": "This one sees up to\n150 meters or so. 200 meters if for\nvery strong reflective",
    "start": "4011820",
    "end": "4019380"
  },
  {
    "text": "targets, but on\naverage, 100 250 meters. It's really useful\nyou see this is like a-- you're live\nmapping, essentially,",
    "start": "4019380",
    "end": "4026130"
  },
  {
    "text": "the full classroom. OK, anything?",
    "start": "4026130",
    "end": "4032040"
  },
  {
    "text": "Any requests on this\nbefore we go back to-- OK, let's go back to the slides.",
    "start": "4032040",
    "end": "4037750"
  },
  {
    "text": "OK, so let's talk about how\nrange estimation is done",
    "start": "4037750",
    "end": "4042810"
  },
  {
    "text": "for direct detection LiDAR. So as we said, these\nsystems essentially",
    "start": "4042810",
    "end": "4048270"
  },
  {
    "text": "do time division\nmultiplexing or TDM, so they just repeatedly\nsend out these short pulses,",
    "start": "4048270",
    "end": "4054690"
  },
  {
    "text": "and then they wait\nfor some time, which is pulse repetition interval,\nTPRI, before emitting",
    "start": "4054690",
    "end": "4061350"
  },
  {
    "text": "the next one. So the maximum\nroundtrip delay they can measure is equal\nto TPRI, and that",
    "start": "4061350",
    "end": "4067619"
  },
  {
    "text": "also determines the maximum\nrange they can measure. So the maximum range is going\nto be speed of light times",
    "start": "4067620",
    "end": "4073349"
  },
  {
    "text": "to max over 2, which\nbecomes speed of light times the pulse repetition interval\nover 2, or you can invert that",
    "start": "4073350",
    "end": "4082559"
  },
  {
    "text": "and say, how many points\nper second they can measure, that becomes c over our max\nso that's the number of range",
    "start": "4082560",
    "end": "4088470"
  },
  {
    "text": "measurements per second. In terms of the\nranging algorithms, again, it's exactly like\npulse-echo sonar or pulse",
    "start": "4088470",
    "end": "4095670"
  },
  {
    "text": "radar, so you can do\nsimple thresholding or match filtering, right? Almost all systems I\nknow of do thresholding",
    "start": "4095670",
    "end": "4104189"
  },
  {
    "text": "because it works\nreally well for LiDAR because the pulses are so short. Remember, for sonar, there\nwas this effect of the bias",
    "start": "4104189",
    "end": "4111270"
  },
  {
    "text": "and which made thresholding\nkind of not a good technique. For LiDAR, it's\nactually pretty good,",
    "start": "4111270",
    "end": "4118469"
  },
  {
    "text": "and that's-- and because\nof the simplicity of it, that's what most\nsystems use, and again,",
    "start": "4118470",
    "end": "4125399"
  },
  {
    "text": "pulse shapes can be different,\nbut Gaussian is a standard one. But in principle, you\ncan do match filtering",
    "start": "4125399",
    "end": "4131790"
  },
  {
    "text": "with coded waveforms, things\nlike Barker codes and things like that to improve\nyour sensitivity,",
    "start": "4131790",
    "end": "4140009"
  },
  {
    "text": "and also another thing that\nmakes threshold-based ranging very attractive, because it's\na simple threshold detector,",
    "start": "4140010",
    "end": "4147120"
  },
  {
    "text": "you don't care about\ndistorting the waveform, so then you can operate\nwith a APDs or SPADs",
    "start": "4147120",
    "end": "4153960"
  },
  {
    "text": "and get really good sensitivity. Actually, this LiDAR\nwe just looked at, it uses SPADs for\ndetecting the pulses.",
    "start": "4153960",
    "end": "4162778"
  },
  {
    "text": "OK, so how does it work? Very simple. It's called\nleading-edge ranging,",
    "start": "4162779",
    "end": "4168028"
  },
  {
    "text": "which is a fancy term\nfor thresholding. So you have some transmitted\npulse, shown in green here.",
    "start": "4168029",
    "end": "4174850"
  },
  {
    "text": "Note that we're\nplotting s squared, a square of the waveform\nbecause our signal model showed",
    "start": "4174850",
    "end": "4180899"
  },
  {
    "text": "that what we receive is\nproportional to the square of the pulse shape that we send.",
    "start": "4180899",
    "end": "4186330"
  },
  {
    "text": "So s squared of t, that's\nthe transmitted pulse. It's normalized to 1, OK?",
    "start": "4186330",
    "end": "4191700"
  },
  {
    "text": "And then, the time it\ncrosses half the maximum, which is 0.5, the system marks\nthat pr kind of records that--",
    "start": "4191700",
    "end": "4201900"
  },
  {
    "text": "call that tau 0,\nand then what you receive is some attenuated and\ndelayed version of s squared,",
    "start": "4201900",
    "end": "4208020"
  },
  {
    "text": "right? So that's shown in blue here. So it goes up to some s max,\nand that's the pulse shape,",
    "start": "4208020",
    "end": "4215159"
  },
  {
    "text": "and then it also finds the point\nof half maximum for the receive",
    "start": "4215160",
    "end": "4220260"
  },
  {
    "text": "one, call that tau sub e. and\nthen if you just subtract the 2 it gives you the\nround trip delay,",
    "start": "4220260",
    "end": "4227430"
  },
  {
    "text": "and then range is just\nC times tau over 2. So extremely simple. It's as easy as it\ngets for arranging,",
    "start": "4227430",
    "end": "4235492"
  },
  {
    "text": "and actually, it\nworks pretty well. I mean, we just saw an example\nof it this system is doing--",
    "start": "4235492",
    "end": "4240780"
  },
  {
    "text": "I assume-- I mean, I don't\nknow all the details maybe they're doing something\na little fancier, but I would be surprised\nif they did something",
    "start": "4240780",
    "end": "4248430"
  },
  {
    "text": "much fancier than this. Now, here, what we\nare showing-- we are showing the full\ncontinuous time waveforms,",
    "start": "4248430",
    "end": "4254670"
  },
  {
    "text": "but in practice, we know\nsignals are sampled, right? So we need to work with\nthe digitized version",
    "start": "4254670",
    "end": "4260010"
  },
  {
    "text": "of the received signal. So usually, you set\nyour sampling rate high enough that you get a\nfew samples on the full pulse",
    "start": "4260010",
    "end": "4267690"
  },
  {
    "text": "shape, 3, 4, 5, or so.",
    "start": "4267690",
    "end": "4273120"
  },
  {
    "text": "And then, your sampling\nrate, the ADC sampling rate, f sub s, which is 1 over\nthe sampling interval, that",
    "start": "4273120",
    "end": "4278970"
  },
  {
    "text": "determines your\nranging resolution because the minimum\ntime delta that you can measure that delta tau\nmin is equal to the sampling",
    "start": "4278970",
    "end": "4288750"
  },
  {
    "text": "interval of your ADC. You can just go one sample\nextra and that determines",
    "start": "4288750",
    "end": "4295110"
  },
  {
    "text": "your delta r, delta\nrange between two to consecutive ranges\nthat you can measure.",
    "start": "4295110",
    "end": "4301240"
  },
  {
    "text": "So it just becomes a\nspeed of flight times the sampling interval over 2.",
    "start": "4301240",
    "end": "4306750"
  },
  {
    "text": "That's your range resolution\nfor the sample leading edge. Now, as I said,\nin principle, you",
    "start": "4306750",
    "end": "4313530"
  },
  {
    "text": "work with a discretized or\ndigitized echo waveform,",
    "start": "4313530",
    "end": "4319020"
  },
  {
    "text": "and that introduces\nsome additional error in your time estimation\nbecause if you just",
    "start": "4319020",
    "end": "4326280"
  },
  {
    "text": "work with these discrete\nsamples that are shown here-- so you find the\nmaximum one, and then",
    "start": "4326280",
    "end": "4332489"
  },
  {
    "text": "that's your best guess\nof what the peak was, and then you typically don't get\na sample exactly at half of it,",
    "start": "4332490",
    "end": "4340830"
  },
  {
    "text": "so you just pick the closest\nsample to the half max and call that your\nleading edge, which",
    "start": "4340830",
    "end": "4347369"
  },
  {
    "text": "is not the exact leading edge\nof the continuous-time waveform. So the time that you get would\nhave some additional error",
    "start": "4347370",
    "end": "4355470"
  },
  {
    "text": "due to digitization. But some fancier\nsystems actually can make this more\naccurate in DSP",
    "start": "4355470",
    "end": "4362520"
  },
  {
    "text": "by doing a fit to the samples\nbecause you know exact waveform that you sensed it was\na Gaussian, so you can",
    "start": "4362520",
    "end": "4369900"
  },
  {
    "text": "take these samples and\nbasically fit a Gaussian to it, as it's shown down here,\nand then from that--",
    "start": "4369900",
    "end": "4377740"
  },
  {
    "text": "and you can do that as\nfinely as you want in DSP, and then you find\nthe leading edge,",
    "start": "4377740",
    "end": "4384820"
  },
  {
    "text": "which is the half max on\nthe fit and that basically makes it more accurate.",
    "start": "4384820",
    "end": "4390990"
  },
  {
    "text": "In many robotic\napplications, you typically don't care about that\nlevel of accuracy",
    "start": "4390990",
    "end": "4398640"
  },
  {
    "text": "from just the pure discrete\ndiscretized waveforms. You can get like 5\nto 10 centimeters,",
    "start": "4398640",
    "end": "4404280"
  },
  {
    "text": "and that's usually good enough,\nbut in other applications, you might need much\nmore accurate ranging",
    "start": "4404280",
    "end": "4411480"
  },
  {
    "text": "and this is a technique that can\nhelp you in those situations. Another thing that\ncan happen in practice",
    "start": "4411480",
    "end": "4418860"
  },
  {
    "text": "is you can get multiple echos\nfrom a single laser beam.",
    "start": "4418860",
    "end": "4424290"
  },
  {
    "text": "It doesn't happen often. Most of the time, like,\n90 something of the pulses",
    "start": "4424290",
    "end": "4429810"
  },
  {
    "text": "that you send out, they just\necho back from just one target because these are very\nnarrow laser beams.",
    "start": "4429810",
    "end": "4435550"
  },
  {
    "text": "But in certain cases--\nso here's one example. So we sent out the laser beam. It's going through the\nwindshield of the car",
    "start": "4435550",
    "end": "4444059"
  },
  {
    "text": "and that can generate some\npartial echoes at the entry point, and the exit point then\nit goes through some vegetation",
    "start": "4444060",
    "end": "4452850"
  },
  {
    "text": "the leaves of the tree\nand they can partially overlap the Gaussian beam, and\nyou get some echoes from those",
    "start": "4452850",
    "end": "4460350"
  },
  {
    "text": "and it finally hits a wall\nand that's kind of like that the rest of the\nsignal echoes back.",
    "start": "4460350",
    "end": "4466270"
  },
  {
    "text": "So if you look at your full\nreceived echo waveform, it can have, in this case,\none, two, three, four,",
    "start": "4466270",
    "end": "4473369"
  },
  {
    "text": "five little echos from\ndifferent parts of the scene. This is kind of an\nextreme example.",
    "start": "4473370",
    "end": "4479969"
  },
  {
    "text": "In reality, again, most of the\ntime, like 95% of the cases",
    "start": "4479970",
    "end": "4485253"
  },
  {
    "text": "you, just get one echo\nand then the other five you can have one extra\nmaybe, one or two extras.",
    "start": "4485253",
    "end": "4490290"
  },
  {
    "text": "But some LiDAR systems do\nreport more than one echo per transmitted pulse, right?",
    "start": "4490290",
    "end": "4498060"
  },
  {
    "text": "Typically, they\nreport two or three, and it doesn't mean that like\nif when they report three,",
    "start": "4498060",
    "end": "4504719"
  },
  {
    "text": "all three are true positive. Some of them might be false\npositives, as we know. Maybe it's from\nfog, or maybe it's",
    "start": "4504720",
    "end": "4510300"
  },
  {
    "text": "just noise or something like\nthat, but they do report those, and then it's up to\nthe user to decide",
    "start": "4510300",
    "end": "4516300"
  },
  {
    "text": "which ones are real targets\nand which ones are not, and it's not always obvious. Again, this one\nwe just looked at,",
    "start": "4516300",
    "end": "4521970"
  },
  {
    "text": "it returns to Echo's, and you\ncan display both or just one. I was just displaying the\nmain one, the strong one,",
    "start": "4521970",
    "end": "4528030"
  },
  {
    "text": "but you can look at both. OK, questions? Al",
    "start": "4528030",
    "end": "4533340"
  },
  {
    "text": "All right, that's it\nabout-- so coherent LiDAR-- direct detection LiDAR,\nit's as easy as that.",
    "start": "4533340",
    "end": "4539050"
  },
  {
    "text": "Basically, you just take\nyour signal, take your echo, digitize it, find\nthe leading edge,",
    "start": "4539050",
    "end": "4544260"
  },
  {
    "text": "and then convert\nthat time to range, and then you get range, OK? DOA, we'll talk about\nlater, but before",
    "start": "4544260",
    "end": "4550890"
  },
  {
    "text": "that, we are going to talk about\nrange and Doppler estimation for coherent LiDAR, so this\nis going to need a bit of DSP,",
    "start": "4550890",
    "end": "4558449"
  },
  {
    "text": "as you can imagine because it\nhas phase information in it, but I'm just going to\nset it up, and then",
    "start": "4558450",
    "end": "4565620"
  },
  {
    "text": "we'll talk about the\ndetails next time. But again, as we said,\ncoherent LiDARs continuously",
    "start": "4565620",
    "end": "4571980"
  },
  {
    "text": "transmit waveforms that are\nperiodic very similar to CM--",
    "start": "4571980",
    "end": "4579360"
  },
  {
    "text": "CW radar, so they can transmit\nfrequency chirps like,",
    "start": "4579360",
    "end": "4585000"
  },
  {
    "text": "and that makes an\nFMCW LiDAR, or they can transmit range\nin codes like PRNs,",
    "start": "4585000",
    "end": "4591090"
  },
  {
    "text": "and that makes a PMCW LiDAR. As far as I know,\nno PM CW LiDARs",
    "start": "4591090",
    "end": "4600409"
  },
  {
    "text": "are commercially deployed today. Anything that's commercially\nout there and available is FMCW LiDAR, but\nin research, people",
    "start": "4600410",
    "end": "4611150"
  },
  {
    "text": "are working on it in principle. It works, and it has even some\nadvantages over the FMCW LiDAR,",
    "start": "4611150",
    "end": "4617000"
  },
  {
    "text": "but for the same\nreason in radar, almost all the deployed CW\nradars for autonomy are FMCW.",
    "start": "4617000",
    "end": "4623659"
  },
  {
    "text": "There's very little PMCW radars\ndeployed, same for LiDAR. There's some added complexity\nin hardware and algorithms",
    "start": "4623660",
    "end": "4633679"
  },
  {
    "text": "that just makes it a little\nmore difficult to develop. Signal processing algorithms\nfor a coherent LiDAR",
    "start": "4633680",
    "end": "4640280"
  },
  {
    "text": "are, again, are very similar\nto those for radar because-- why are they very similar?",
    "start": "4640280",
    "end": "4645320"
  },
  {
    "text": "Because the signal model\nis the exact same, right? Same signal, same processing. We are estimating the same\nparameters with the same signal",
    "start": "4645320",
    "end": "4652100"
  },
  {
    "text": "model, so they're going\nto be very similar, but there are some\nkey differences. One is the fact that LiDAR\nbeams are much, much narrower",
    "start": "4652100",
    "end": "4661220"
  },
  {
    "text": "than radar, right? So you're working with these\nmilimeter-thin laser beams,",
    "start": "4661220",
    "end": "4667280"
  },
  {
    "text": "versus radar, you can have\nalmost isotropic beam patterns. This is a good thing. So it makes LiDAR DSP easier\nbecause you can almost",
    "start": "4667280",
    "end": "4676670"
  },
  {
    "text": "assume always, alright,\nI'm just looking for one target in\nthis signal versus, in radar, we had to superimpose\nand assume multiple targets",
    "start": "4676670",
    "end": "4685910"
  },
  {
    "text": "and then do CFR and other\nthings to kind of separate them from the noise. In LiDAR, this\nhelps, but there's",
    "start": "4685910",
    "end": "4691850"
  },
  {
    "text": "another effect, which makes\nLiDAR slightly more tricky, and that's the fact\nthat the Doppler shifts",
    "start": "4691850",
    "end": "4697909"
  },
  {
    "text": "that you see in LiDAR, the\nDoppler frequencies that you see in LiDAR are much,\nmuch, much higher",
    "start": "4697910",
    "end": "4705980"
  },
  {
    "text": "than radar by many\norders, by almost like three orders of magnitude\nor more, because Doppler",
    "start": "4705980",
    "end": "4711320"
  },
  {
    "text": "shifts are inversely\nproportional to wavelength, if you remember,\nand LiDAR operates at much shorter wavelength.",
    "start": "4711320",
    "end": "4716690"
  },
  {
    "text": "So for the same\nvelocity of the target or for the same\nrelative velocity, the Doppler shift that\nyou see in a LiDAR",
    "start": "4716690",
    "end": "4723410"
  },
  {
    "text": "is significantly\nhigher than radar. And if you remember\nfrom radar DSP,",
    "start": "4723410",
    "end": "4728510"
  },
  {
    "text": "we actually use the\nfact that Doppler shifts are small to simplify our DSP. We kind of set for the\nduration of a chirp.",
    "start": "4728510",
    "end": "4735410"
  },
  {
    "text": "We kind of ignore Doppler and\nonly use the phase shifts in",
    "start": "4735410",
    "end": "4740420"
  },
  {
    "text": "between consecutive chirps in\nFMCW radar to estimate Doppler. As we'll see, you cannot\nmake that assumption in LiDAR",
    "start": "4740420",
    "end": "4748070"
  },
  {
    "text": "because the-- again, the Doppler shifts\nare much, much larger and nonnegligible\neven within one chirp,",
    "start": "4748070",
    "end": "4756620"
  },
  {
    "text": "but it turns out that there\nis a very clever technique to actually solve that, which\nwe'll talk about next time.",
    "start": "4756620",
    "end": "4764980"
  },
  {
    "start": "4764980",
    "end": "4769000"
  }
]