[
  {
    "text": "good morning good morning everybody it's for me it's a complete honor to be here at NDC stage I have learned a lot from",
    "start": "1160",
    "end": "8440"
  },
  {
    "text": "these conferences and now here I am at this stage together with such brilliant people sharing my thoughts it's a",
    "start": "8440",
    "end": "14799"
  },
  {
    "text": "complete honor thank you very much for making these events possible I'm going to make you a couple of questions how",
    "start": "14799",
    "end": "22119"
  },
  {
    "text": "many of you know what DDD is all about whoow it's much more than I was",
    "start": "22119",
    "end": "31160"
  },
  {
    "text": "expected to it yeah great and how many of you are practicing it daily at your",
    "start": "31160",
    "end": "36600"
  },
  {
    "text": "work much less okay that was the proportion I was I was expecting to to",
    "start": "36600",
    "end": "42039"
  },
  {
    "text": "find to find but you know what these two questions are wrong because they are",
    "start": "42039",
    "end": "47280"
  },
  {
    "text": "aiming into a possible solution that we could end adopting but not on the real problem that we are trying to fix so",
    "start": "47280",
    "end": "54160"
  },
  {
    "text": "let's try to reformulate the questions how much time does it take since we have an idea this finally work working in our",
    "start": "54160",
    "end": "61640"
  },
  {
    "text": "product how many changes have we made since the last completest",
    "start": "61640",
    "end": "67119"
  },
  {
    "text": "run do we find difficulties to comprehensively test whether those ideas",
    "start": "67119",
    "end": "72360"
  },
  {
    "text": "work as expect in our product as well as our previous ones keep working as they",
    "start": "72360",
    "end": "77680"
  },
  {
    "text": "were do we need any kind of debug on Hardware in order to do that these are",
    "start": "77680",
    "end": "83079"
  },
  {
    "text": "more proper questions right and you know what the I know firsthand that the the",
    "start": "83079",
    "end": "90200"
  },
  {
    "text": "differences out there are really huge they range from several hundreds of",
    "start": "90200",
    "end": "95240"
  },
  {
    "text": "lines lasting days or even weeks while having to deal with different types of",
    "start": "95240",
    "end": "100840"
  },
  {
    "text": "Hardware till a single line of code in less than a minute by only using our development environment and the",
    "start": "100840",
    "end": "107799"
  },
  {
    "text": "differences are not strictly the or direct or indirectly related with the",
    "start": "107799",
    "end": "113600"
  },
  {
    "text": "essential complexity of the products that we are building but on the accidental complexity that our",
    "start": "113600",
    "end": "119320"
  },
  {
    "text": "development processes prevents us to combat mercilessly back in 2009 something",
    "start": "119320",
    "end": "127200"
  },
  {
    "text": "happened that changed my professional career we were developing fully electronically controlled small wind",
    "start": "127200",
    "end": "132840"
  },
  {
    "text": "turbines and I was on charge on the b sare control it was a disruptive concept",
    "start": "132840",
    "end": "138440"
  },
  {
    "text": "we had several orders already waiting in the queue we had a small wind tunnel in our",
    "start": "138440",
    "end": "144319"
  },
  {
    "text": "facilities in which we were able to put the small winter wine to work and test most of its Dynam",
    "start": "144319",
    "end": "150879"
  },
  {
    "text": "not not all of them for example the cases where it was facing strong gusts",
    "start": "150879",
    "end": "156800"
  },
  {
    "text": "of wind we had been working really hard to have a final release ready because in",
    "start": "156800",
    "end": "164000"
  },
  {
    "text": "two weeks a strong with the storm was arriving to test facilities and you know we need to have everything ready to face",
    "start": "164000",
    "end": "170680"
  },
  {
    "text": "the wind two days before the de day my manager came to my desk and asked me a",
    "start": "170680",
    "end": "177040"
  },
  {
    "text": "totally fair question it was like bran is it going to work right and you know",
    "start": "177040",
    "end": "183640"
  },
  {
    "text": "fair question need to be answered with honesty I said yes I hope it will hope",
    "start": "183640",
    "end": "189720"
  },
  {
    "text": "he cut me off mid sentence it looks like you don't have control about what you're doing and he was right even having done",
    "start": "189720",
    "end": "197239"
  },
  {
    "text": "my best I was completely unsure in fact I had nothing in my hand Beyond cor and",
    "start": "197239",
    "end": "204159"
  },
  {
    "text": "hope I guess you know what happened when the wind storm arrived the wind tov",
    "start": "204159",
    "end": "210159"
  },
  {
    "text": "enter into an improper control Loop due to a back for sure it accelerated Beyond his dominant speed and it broke down in",
    "start": "210159",
    "end": "216879"
  },
  {
    "text": "pieces my code happened to be mere Dust in the Wind it was a lucky event however",
    "start": "216879",
    "end": "224000"
  },
  {
    "text": "because during the next months I have a record neyar in which this event was happening in a Winter Vine install in a",
    "start": "224000",
    "end": "231159"
  },
  {
    "text": "schoolyard you don't have control about what you're doing those words keep resonating in my head during the next",
    "start": "231159",
    "end": "236599"
  },
  {
    "text": "coming years like a spinter in my head but how on Earth could I have managed to test those cor cases to execute those",
    "start": "236599",
    "end": "244680"
  },
  {
    "text": "paths to execute those paths without having to have the full system working and facing this these strong GS of wind",
    "start": "244680",
    "end": "251599"
  },
  {
    "text": "looking for answers to these questions by nearly by accident some years later",
    "start": "251599",
    "end": "257120"
  },
  {
    "text": "in 2016 I got aware of the tdd existence existance of tdd and the funny thing is",
    "start": "257120",
    "end": "262479"
  },
  {
    "text": "that neither my colleagues nor my thinkal managers have heard about a word about it nowadays is a more sprit",
    "start": "262479",
    "end": "270360"
  },
  {
    "text": "technique or at least it's an acronym that is more well known but I still deeply believe that that is a completely",
    "start": "270360",
    "end": "276120"
  },
  {
    "text": "underrated technique in most development environments and in embedded even",
    "start": "276120",
    "end": "282479"
  },
  {
    "text": "more my goal today is to try to live up to the challenge to show you some of its",
    "start": "282479",
    "end": "287960"
  },
  {
    "text": "main benefits in action and you will judge if I have accomplish my my goal so",
    "start": "287960",
    "end": "294039"
  },
  {
    "text": "but before starting let me make a little inod about me and my current context and let's see if it works",
    "start": "294039",
    "end": "301320"
  },
  {
    "text": "I have tried before okay let's do it in that way my name is Frank Clement I am a",
    "start": "301320",
    "end": "307600"
  },
  {
    "text": "communication engineer with my Jour in electronics I have been uh well I started working as Hardware engineer",
    "start": "307600",
    "end": "313400"
  },
  {
    "text": "back in two 2007 uh but soon I moved to software and",
    "start": "313400",
    "end": "319319"
  },
  {
    "text": "fiware uh I currently work as senior R&D software developer at consor Discovery Spain At Con Discovery we create the",
    "start": "319319",
    "end": "328039"
  },
  {
    "text": "state-of-the-art maritime solution and systems like the ones you can see in this slide and kber has several facilities in",
    "start": "328039",
    "end": "337440"
  },
  {
    "text": "my country but our main headquarters are located in La Villa joyosa which happens",
    "start": "337440",
    "end": "342720"
  },
  {
    "text": "it's it's a it's a small and beautiful city Coastal City close to alikante which happens to be my hometown we are",
    "start": "342720",
    "end": "349319"
  },
  {
    "text": "currently 18 Engineers there working on suble among different teams around the globe apart from that as technical coach",
    "start": "349319",
    "end": "356800"
  },
  {
    "text": "I usually help teams and organizations to improve their development processes um probably most of you know that kbur",
    "start": "356800",
    "end": "364680"
  },
  {
    "text": "is a great company to work for we have the proper Carta and really good",
    "start": "364680",
    "end": "369919"
  },
  {
    "text": "technical challenges we are continually looking for talented team players so I invite you to join to visit this P web",
    "start": "369919",
    "end": "377199"
  },
  {
    "text": "page and take a look at the open opportunities that we have around the globe so but why I not to talk about TTD",
    "start": "377199",
    "end": "384800"
  },
  {
    "text": "right which is the motivation in this talk that I delivered in the past I presented the major impediments I have",
    "start": "384800",
    "end": "391039"
  },
  {
    "text": "found so far in theed development realm as well as some of the solutions that I",
    "start": "391039",
    "end": "396160"
  },
  {
    "text": "have used trying to eliminate or reduce those Ro blocks this talk can be seen as its",
    "start": "396160",
    "end": "402000"
  },
  {
    "text": "practical companion here I will try to show you some of the movement some of the design decisions that we could do we",
    "start": "402000",
    "end": "409479"
  },
  {
    "text": "could face when we are following in the real action so without further Ado let's",
    "start": "409479",
    "end": "416240"
  },
  {
    "text": "start and let's start by Trying by to get to get Fe back from the",
    "start": "416240",
    "end": "421919"
  },
  {
    "text": "hardware the approaches that we usually follow by an easy example how would we assure the code do",
    "start": "421919",
    "end": "429599"
  },
  {
    "text": "really turn on and off an LED easy right easy",
    "start": "429599",
    "end": "437120"
  },
  {
    "text": "question common approaches that I have found to these questions lay in one of",
    "start": "437120",
    "end": "442520"
  },
  {
    "text": "these categories like measuring the voltage measuring the current Loop using a logic analyzer or even using some kind",
    "start": "442520",
    "end": "448960"
  },
  {
    "text": "of EX photo detector and all these approaches have something in common they tend to put",
    "start": "448960",
    "end": "455960"
  },
  {
    "text": "Hardware into all our software development Loop and for sure we are in",
    "start": "455960",
    "end": "461360"
  },
  {
    "text": "better developers right and for sure we will need to to use the hardware some in some moment but I deeply believe that we",
    "start": "461360",
    "end": "467800"
  },
  {
    "text": "might rethink when do we want to let it in into our development processes and",
    "start": "467800",
    "end": "474120"
  },
  {
    "text": "here is where the metal development approach comes to the arena its main goal is to make possible to create and",
    "start": "474120",
    "end": "480440"
  },
  {
    "text": "evolve any embedded go much aspect much faster and safer iteratively and",
    "start": "480440",
    "end": "485599"
  },
  {
    "text": "incrementally good right how are we going to achieve this key thing always right continually",
    "start": "485599",
    "end": "494199"
  },
  {
    "text": "looking for ways to get feedback faster that is going to be the key",
    "start": "494199",
    "end": "499759"
  },
  {
    "text": "corstone for us and in order to achieve this we are we will need to treat as much embedded",
    "start": "499759",
    "end": "505720"
  },
  {
    "text": "code as possible as an in as an independent",
    "start": "505720",
    "end": "511320"
  },
  {
    "text": "subsystem let me try to explain what I mean with that none of the previous",
    "start": "511320",
    "end": "517440"
  },
  {
    "text": "approaches give us any proper feedback about how our code is really",
    "start": "517440",
    "end": "522839"
  },
  {
    "text": "behaving short circuits upper circuits fuse LS bad soldering all of them have a",
    "start": "522839",
    "end": "528920"
  },
  {
    "text": "really real a real impact in the voltage electrons and photons involved but none",
    "start": "528920",
    "end": "535160"
  },
  {
    "text": "of them have have anything to do with how or embeded Co behaves",
    "start": "535160",
    "end": "541440"
  },
  {
    "text": "so in order to do the other the previous step possible we will try whenever",
    "start": "544279",
    "end": "549360"
  },
  {
    "text": "possible we will try to use cheap really cheap software in the loop in known as",
    "start": "549360",
    "end": "556760"
  },
  {
    "text": "the doubles instead of Hardware Lo instead of any hardware in the loop",
    "start": "556760",
    "end": "562000"
  },
  {
    "text": "because there's something that is really key here is that absolutely nothing",
    "start": "562000",
    "end": "568360"
  },
  {
    "text": "happens in the real world if it doesn't change an special function register B nothing even those strong gusts of",
    "start": "568360",
    "end": "576760"
  },
  {
    "text": "wind and if we we take this into account we could we could try to put our",
    "start": "576760",
    "end": "583440"
  },
  {
    "text": "embedded code into a matrix right we we are going to fake it that the external",
    "start": "583440",
    "end": "588480"
  },
  {
    "text": "events are happening how using test doubles that will interact with exposure from your register that we need other",
    "start": "588480",
    "end": "594399"
  },
  {
    "text": "convenience whenever we want we will also rule the time",
    "start": "594399",
    "end": "600800"
  },
  {
    "text": "and yeah which is the outcome for sure we will need to yeah we we will do a",
    "start": "601519",
    "end": "606600"
  },
  {
    "text": "better code better software right better architector yeah this is again this a",
    "start": "606600",
    "end": "611640"
  },
  {
    "text": "low level detail the what it really matters is the business outcome what we are going to achieve is to have an",
    "start": "611640",
    "end": "616959"
  },
  {
    "text": "increase and better development in deep time at a sustainable pace so we will be able to give the customer value to",
    "start": "616959",
    "end": "625079"
  },
  {
    "text": "provide to the customer value faster and safer as you most of you probably have guessed",
    "start": "625079",
    "end": "631839"
  },
  {
    "text": "we are going to follow an evolutive uh design and development and specifically we are going to",
    "start": "631839",
    "end": "638000"
  },
  {
    "text": "embrace this one the one that acknowledges our limitations and divides",
    "start": "638000",
    "end": "643480"
  },
  {
    "text": "the development development in three strategical steps you is name that why make it work",
    "start": "643480",
    "end": "649880"
  },
  {
    "text": "make it right and make it fast during the make it right we are focused in trying to understand how to solve the",
    "start": "649880",
    "end": "655639"
  },
  {
    "text": "problem not about engineering the code right during the make it right phase we will",
    "start": "655639",
    "end": "662519"
  },
  {
    "text": "be engine trying to engineer and craft the code right in order to make it easy to understand maintain and evolve and",
    "start": "662519",
    "end": "669720"
  },
  {
    "text": "these two differentiated stages should exist because barely no human being is able to do both things properly at the",
    "start": "669720",
    "end": "676360"
  },
  {
    "text": "same time and last but not least make it fast right we the developers fast enough",
    "start": "676360",
    "end": "684360"
  },
  {
    "text": "let's try to fulfill the system timing requirements if we have but take this",
    "start": "684360",
    "end": "689480"
  },
  {
    "text": "into account that this is one of the common traps in Ed the real is that we try to we follow in the in the global",
    "start": "689480",
    "end": "695399"
  },
  {
    "text": "performance PR that trap sorry we go directly to the third step which makes",
    "start": "695399",
    "end": "701959"
  },
  {
    "text": "which makes us even harder to reach the one the first one and almost impossible",
    "start": "701959",
    "end": "707000"
  },
  {
    "text": "to three to go to the second one",
    "start": "707000",
    "end": "712079"
  },
  {
    "text": "so the best implementation I know so far for this evolutive design development is by following tdd if we follow it's three",
    "start": "712079",
    "end": "720600"
  },
  {
    "text": "differentiated stages red green refractor we will be transitioning among these three differentiated stages",
    "start": "720600",
    "end": "726720"
  },
  {
    "text": "several times per minute we will see the example in a couple of in few",
    "start": "726720",
    "end": "731959"
  },
  {
    "text": "minutes and metal in development encompasses the well-known dual Target",
    "start": "731959",
    "end": "738279"
  },
  {
    "text": "tdd approach as stated in James Green's book we will be running our Solution on",
    "start": "738279",
    "end": "743360"
  },
  {
    "text": "our this for sure both in the final Target environment as well as in our development environment also known as",
    "start": "743360",
    "end": "749000"
  },
  {
    "text": "the po at least from the very beginning we will be running in two different platforms maybe they are going to be",
    "start": "749000",
    "end": "755120"
  },
  {
    "text": "portable or maybe not we will see what tdd what sorry what Metaline emphasizes",
    "start": "755120",
    "end": "761320"
  },
  {
    "text": "is to threat as many as many units of behavior from metal to metal what means",
    "start": "761320",
    "end": "768880"
  },
  {
    "text": "is from microcontroller inputs till microcontroller outputs units of",
    "start": "768880",
    "end": "775639"
  },
  {
    "text": "behavior and in some cases it will be enough to run till stages one stages two",
    "start": "775639",
    "end": "781320"
  },
  {
    "text": "stage three only by running on our development environment as we will see in the example but in other cases we",
    "start": "781320",
    "end": "788199"
  },
  {
    "text": "will for example when we are aiming or talking with an external I integrated circuit we will need to go to the stage",
    "start": "788199",
    "end": "794839"
  },
  {
    "text": "four and stage five run it into the real Hardware right in order to to to",
    "start": "794839",
    "end": "800639"
  },
  {
    "text": "validate whether our or our understanding of the data sheets are correct or",
    "start": "800639",
    "end": "807440"
  },
  {
    "text": "not so when I was looking for an example in order to show you uh the the",
    "start": "808120",
    "end": "814959"
  },
  {
    "text": "technical practice in action I knew that it it should be something that is it shouldn't be a toy",
    "start": "814959",
    "end": "821399"
  },
  {
    "text": "right something that it will be able to reproduce the kind of decisions that one could face in the real work but at the",
    "start": "821399",
    "end": "828399"
  },
  {
    "text": "same time I didn't want it to be complex because the the the goal of the of the",
    "start": "828399",
    "end": "833959"
  },
  {
    "text": "example is not is not going to be to solve a complex problem it's going to be to show how we",
    "start": "833959",
    "end": "839759"
  },
  {
    "text": "we can solve it right so what what could be better than use this or kind of hello world right blinking LEDs and this is",
    "start": "839759",
    "end": "847399"
  },
  {
    "text": "the cut this is the example we I call it the four level battery",
    "start": "847399",
    "end": "852519"
  },
  {
    "text": "monitor I choose a bare metal 8bit bare metal microcontroller in C I choose a",
    "start": "852519",
    "end": "860360"
  },
  {
    "text": "really constrained environment in order to show that even in those con constraint environments these things are",
    "start": "860360",
    "end": "866079"
  },
  {
    "text": "possible this is the current Hardware variant that we are going to use right we are going to have four LEDs",
    "start": "866079",
    "end": "872000"
  },
  {
    "text": "connecting to the port a high neble and yeah that example belongs to a",
    "start": "872000",
    "end": "878800"
  },
  {
    "text": "bigger Workshop that that I have created that lasts almost half a day uh so I",
    "start": "878800",
    "end": "884199"
  },
  {
    "text": "have to try to synthetize as much as as I as I can and one thing that we are going we are not going to see is from",
    "start": "884199",
    "end": "891360"
  },
  {
    "text": "the the input I mean from the sensing the battery right through the uh control",
    "start": "891360",
    "end": "898320"
  },
  {
    "text": "this part is not going to to be seen we are going to see to see only the other the other part the outgoing part the",
    "start": "898320",
    "end": "903560"
  },
  {
    "text": "driving the LEDs um we are going to pretend that is this this is going to be the first",
    "start": "903560",
    "end": "909920"
  },
  {
    "text": "internal usage of this microcontroller in the company so we don't have any kind",
    "start": "909920",
    "end": "915320"
  },
  {
    "text": "of process later I will explain what that means later at all it's brand new",
    "start": "915320",
    "end": "920639"
  },
  {
    "text": "for us and for the reason of time as I said U we are going",
    "start": "920639",
    "end": "925759"
  },
  {
    "text": "to pretend pretend that the battery status percentage provide provided module is being developed by another",
    "start": "925759",
    "end": "932240"
  },
  {
    "text": "team so we are going to use a test double for it the goal you know the goal is to develop a highly decoupled and",
    "start": "932240",
    "end": "938639"
  },
  {
    "text": "portable battery monitor module I don't know if you have faced the semiconductors shortage but you have",
    "start": "938639",
    "end": "947040"
  },
  {
    "text": "it you know um there are certain for example there are certain development environments where they have finally",
    "start": "947040",
    "end": "953319"
  },
  {
    "text": "understood that the web or the databases are simply IO devices they don't they",
    "start": "953319",
    "end": "959519"
  },
  {
    "text": "are not core Centric to our our architector so maybe we should rethink but the microcontroller is simply a",
    "start": "959519",
    "end": "965360"
  },
  {
    "text": "running detail should it be centry so we we should be able to change it with",
    "start": "965360",
    "end": "971480"
  },
  {
    "text": "little to no effort so let's see let's do it before starting this is going to be",
    "start": "971480",
    "end": "977959"
  },
  {
    "text": "the development environment that we are going to use simply because it's the fastest embeded environment the fastest",
    "start": "977959",
    "end": "985600"
  },
  {
    "text": "environment I have found for this kind of embedded see uh if I am Contin continuously",
    "start": "985600",
    "end": "994480"
  },
  {
    "text": "looking for ways to have something that goes even faster this is the key thing right we are going to use seedling",
    "start": "994480",
    "end": "1001079"
  },
  {
    "text": "seedling is a lightweighted unit testing fairwork for C is really tiny so it's",
    "start": "1001079",
    "end": "1006480"
  },
  {
    "text": "able to be loaded into even in tiny microcontrollers one addition feature",
    "start": "1006480",
    "end": "1012279"
  },
  {
    "text": "that is really really good for the ceiling is it's automated test double creation it's really is a really nice",
    "start": "1012279",
    "end": "1018240"
  },
  {
    "text": "feature for the ID we are going to use celon mainly because of the",
    "start": "1018240",
    "end": "1023839"
  },
  {
    "text": "state-of-the-art automatic refactorings unfortunately I have not found any vendor specific tool that aims into that",
    "start": "1023839",
    "end": "1030319"
  },
  {
    "text": "direction and this is going to be key for us and on the tool chain we I have",
    "start": "1030319",
    "end": "1036480"
  },
  {
    "text": "choose GCC but you can use clang or whatever usually doesn't matter well this is for vendor agnostic when we talk",
    "start": "1036480",
    "end": "1043360"
  },
  {
    "text": "about the current vendor because current we we should be able to change it it's going to be micro",
    "start": "1043360",
    "end": "1049640"
  },
  {
    "text": "in this case we are going to use the its its cross compiler and something that is",
    "start": "1049640",
    "end": "1055520"
  },
  {
    "text": "really nice and important we're going to use its simulator microchips Prov microchip",
    "start": "1055520",
    "end": "1061600"
  },
  {
    "text": "provides a simulator that's that uh supports almost all its microcontrollers and a simulator should be something that",
    "start": "1061600",
    "end": "1067679"
  },
  {
    "text": "we should ask the vendors to provide these are really nice tools to have",
    "start": "1067679",
    "end": "1073440"
  },
  {
    "text": "so yeah let's try to start let's try by trying to understand those WR in a stone",
    "start": "1073440",
    "end": "1081320"
  },
  {
    "text": "specifications well even though the stone is made of silicon this is or belove data sheets",
    "start": "1081320",
    "end": "1087360"
  },
  {
    "text": "right um so you remember we have the LEDs connected to the port a it will go",
    "start": "1087360",
    "end": "1093280"
  },
  {
    "text": "to the microcontrollers data sheet we will see that in order to command to high a given gpio in the port a we will",
    "start": "1093280",
    "end": "1101080"
  },
  {
    "text": "need to write into the port A7 for example if we want to to write this bit putting the setting this bit to high",
    "start": "1101080",
    "end": "1107799"
  },
  {
    "text": "will mean that we will put a high level in the in the gpio sitting a zero will be will mean that we",
    "start": "1107799",
    "end": "1113919"
  },
  {
    "text": "are putting a zero in the gpio additionally if we want to read the value in the gpio the the data sheet",
    "start": "1113919",
    "end": "1121000"
  },
  {
    "text": "state is that reading from the same port will give us the actual IOP value nice",
    "start": "1121000",
    "end": "1128200"
  },
  {
    "text": "awesome we have everything so let's start here you have uh the framework",
    "start": "1128200",
    "end": "1135480"
  },
  {
    "text": "connection this is the test Suite that I have created you can see that",
    "start": "1135480",
    "end": "1141320"
  },
  {
    "text": "um here I have created some helper functions we have it SE assertion",
    "start": "1141320",
    "end": "1147320"
  },
  {
    "text": "functions on helpers here we have the common set up and tear down that are present in almost",
    "start": "1147320",
    "end": "1153799"
  },
  {
    "text": "any xunit framework and each of these functions or methods are a independent",
    "start": "1153799",
    "end": "1160760"
  },
  {
    "text": "test I have tried to follow the given when then approach in order to explain what they do and we have several of",
    "start": "1160760",
    "end": "1169679"
  },
  {
    "text": "them and each of them is covering a specific Corner case following the",
    "start": "1169679",
    "end": "1175360"
  },
  {
    "text": "boundary value an analysis testing technique so they Define each of these values Define the points where an",
    "start": "1175360",
    "end": "1182559"
  },
  {
    "text": "interval of behavior starts and ends that means a partition so yeah some people say okay",
    "start": "1182559",
    "end": "1190400"
  },
  {
    "text": "that's nice because you knew which which where the test do you do you need to have even if you don't",
    "start": "1190400",
    "end": "1196280"
  },
  {
    "text": "know even you don't know by advance which test do you want to do this is nothing that you can is going to prevent",
    "start": "1196280",
    "end": "1202559"
  },
  {
    "text": "you to use tdd because when you write a line you know what you are doing at least let's put a test for that right so",
    "start": "1202559",
    "end": "1209679"
  },
  {
    "text": "this is that let's start by running the framework in the target for the very",
    "start": "1209679",
    "end": "1215320"
  },
  {
    "text": "first time taking into account how much time does it take to run we will I will explain later what happened behind the",
    "start": "1215320",
    "end": "1222720"
  },
  {
    "text": "Cains one thing that I want to mention is that all tests are currently ignored",
    "start": "1222720",
    "end": "1229159"
  },
  {
    "text": "right if and if everything is Right regarding the framework itself it should pass everything should be",
    "start": "1229159",
    "end": "1237200"
  },
  {
    "text": "green so yeah here we have it right 27 seconds",
    "start": "1237840",
    "end": "1244799"
  },
  {
    "text": "not bad right let's see what happened under the C what s did was creating the runner for",
    "start": "1244799",
    "end": "1254000"
  },
  {
    "text": "us cross compiling it using the cross compiler",
    "start": "1254000",
    "end": "1259159"
  },
  {
    "text": "it did the same with the test Suite itself using the cross compiler and",
    "start": "1259159",
    "end": "1265960"
  },
  {
    "text": "later it linked everything together creating the binary executable that is able to be flashed into the",
    "start": "1265960",
    "end": "1271279"
  },
  {
    "text": "microcontroller but you know we don't have a microcontroller we have a simulator and what it does is in order",
    "start": "1271279",
    "end": "1276480"
  },
  {
    "text": "to run it it uses the simulator it loads the test running into",
    "start": "1276480",
    "end": "1282120"
  },
  {
    "text": "it this test run is going to write into using the outut Char to through a uart",
    "start": "1282120",
    "end": "1287159"
  },
  {
    "text": "and this the output of this uart is derive it to a common text file and this is the text file that we are going to",
    "start": "1287159",
    "end": "1293320"
  },
  {
    "text": "retrieve at the end here you can see these are the",
    "start": "1293320",
    "end": "1298360"
  },
  {
    "text": "results that are written by the microcontroller through the uart and recover from the text file and as you",
    "start": "1298360",
    "end": "1304400"
  },
  {
    "text": "can see the format is a g well it lasts 8.67 8.6 seconds to run of the 27 and",
    "start": "1304400",
    "end": "1311880"
  },
  {
    "text": "the format is a g g test format this is why cion is able to understand what's",
    "start": "1311880",
    "end": "1316919"
  },
  {
    "text": "going on behind the coordinates so let's go for the first specification",
    "start": "1316919",
    "end": "1323200"
  },
  {
    "text": "yeah the one that says that a 0% of battery all LED should be off easy so",
    "start": "1323200",
    "end": "1329679"
  },
  {
    "text": "the first thing that we need to do is to enter into the red State okay and here you can see in the",
    "start": "1329679",
    "end": "1335559"
  },
  {
    "text": "assertion you can see that I have used a mask in which I have put uh yeah this F",
    "start": "1335559",
    "end": "1342240"
  },
  {
    "text": "is because we are only focusing in the high Nal and we are asserting that is",
    "start": "1342240",
    "end": "1347440"
  },
  {
    "text": "zero right right the high should be zero in order to pass so if we write that",
    "start": "1347440",
    "end": "1353720"
  },
  {
    "text": "thing we activate all of the gpos this test should",
    "start": "1353720",
    "end": "1359120"
  },
  {
    "text": "fail let's see it they's run the test in the Target I have speed it up right not",
    "start": "1359120",
    "end": "1366679"
  },
  {
    "text": "27 seconds whoa it passes totally unexpected",
    "start": "1366679",
    "end": "1373080"
  },
  {
    "text": "right that means that we are not being able to put these GPI too high",
    "start": "1373080",
    "end": "1380440"
  },
  {
    "text": "maybe yeah yeah but your friend you know what I need to see in the hardware I need to see in the light see lights",
    "start": "1380840",
    "end": "1386840"
  },
  {
    "text": "right so let's Flash the ter ran into the Target and see that effectively they are",
    "start": "1386840",
    "end": "1394080"
  },
  {
    "text": "off let's do",
    "start": "1394080",
    "end": "1397559"
  },
  {
    "text": "that here is flashing the running into the tar final product you can see the",
    "start": "1401760",
    "end": "1407080"
  },
  {
    "text": "Rhythm this is the Rhythm we are used to have every as as long as we put Hardware",
    "start": "1407080",
    "end": "1413440"
  },
  {
    "text": "into our Loop it gets slower and slower and harder and harder to reproduce you know as well as me okay spashing",
    "start": "1413440",
    "end": "1422559"
  },
  {
    "text": "it let's see now it's flashing they are off effectively we have been unable to",
    "start": "1422559",
    "end": "1428080"
  },
  {
    "text": "command them to on and this is because for sure there's something on the",
    "start": "1428080",
    "end": "1434559"
  },
  {
    "text": "written in Silicon stone that thata sheet that we haven't understood correctly so let's take a a a closer look to the",
    "start": "1434559",
    "end": "1442200"
  },
  {
    "text": "data sheet and we will find that there are a couple of additional special function register involved in in in that",
    "start": "1442200",
    "end": "1449360"
  },
  {
    "text": "in that stuff and they are the Tre a and anal a after reset all these values are",
    "start": "1449360",
    "end": "1455960"
  },
  {
    "text": "one that means that by default all GPI on the on the port a in this microcontroller go to digital sorry",
    "start": "1455960",
    "end": "1464039"
  },
  {
    "text": "analog inputs that's the the thing we are not able to command it because they are analog inputs so let's configure in",
    "start": "1464039",
    "end": "1470120"
  },
  {
    "text": "order to do it to configure then as digital output we will need to write a zero in the corresponding 3 a bit that",
    "start": "1470120",
    "end": "1475679"
  },
  {
    "text": "which means that we will be uh the output driver is enabled and also writing a low level",
    "start": "1475679",
    "end": "1482200"
  },
  {
    "text": "into the unseal a corresponding B that means that the input buffers are enabled",
    "start": "1482200",
    "end": "1488120"
  },
  {
    "text": "the combined effect is that this digital output this this this this gpio is going",
    "start": "1488120",
    "end": "1493640"
  },
  {
    "text": "to be configured as a digital output let's see if we have cord what should be",
    "start": "1493640",
    "end": "1499000"
  },
  {
    "text": "done let's do that let's configure the port a to have all of them",
    "start": "1499000",
    "end": "1507080"
  },
  {
    "text": "as digital outputs let's run the test and yeah they is failing it's",
    "start": "1507080",
    "end": "1513760"
  },
  {
    "text": "failing by the reason that we were expecting to fail that means that we have correctly activated the G the GPI",
    "start": "1513760",
    "end": "1520240"
  },
  {
    "text": "the LEDs okay you don't believe me let's see it in the in the real Hardware let's TR the the running now the run in the in",
    "start": "1520240",
    "end": "1527520"
  },
  {
    "text": "the fin product and they are on",
    "start": "1527520",
    "end": "1533120"
  },
  {
    "text": "awesome so we have made we are finally into the",
    "start": "1533120",
    "end": "1540360"
  },
  {
    "text": "red state right now it's time to make it",
    "start": "1540360",
    "end": "1546279"
  },
  {
    "text": "work as fast as possible right here our common under engineering is really",
    "start": "1546279",
    "end": "1552760"
  },
  {
    "text": "welcome we can do whatever we want we will we can be complete siners here this",
    "start": "1552760",
    "end": "1558520"
  },
  {
    "text": "do it really ugly right let's do it oh which is the minimum implementation to make this test",
    "start": "1558520",
    "end": "1567039"
  },
  {
    "text": "F yeah this is the minimum thing let's do it let do it here directly yeah all",
    "start": "1570520",
    "end": "1577520"
  },
  {
    "text": "to zero you should yeah you should pass let's",
    "start": "1577520",
    "end": "1582519"
  },
  {
    "text": "see oh yeah it does we did it all of them are off now okay again we need most",
    "start": "1583240",
    "end": "1591039"
  },
  {
    "text": "of you probably need to see it in the real Hardware let's do it again sorry uh",
    "start": "1591039",
    "end": "1598520"
  },
  {
    "text": "sorry it's going to be repeated let's let's see it in the real hard",
    "start": "1598520",
    "end": "1604480"
  },
  {
    "text": "now um let's fli the running into the into the final product and see that effectively they",
    "start": "1604480",
    "end": "1611679"
  },
  {
    "text": "are all of this is going to be the very last time that we are going to run it into the hardware and in fact I have",
    "start": "1611679",
    "end": "1617440"
  },
  {
    "text": "been using it only because I know we are so used to seeing blinking lights in",
    "start": "1617440",
    "end": "1623799"
  },
  {
    "text": "order to leave right no more test into the loop okay nice we are in green",
    "start": "1623799",
    "end": "1632039"
  },
  {
    "text": "awesome now it's time to make it right right we now it's time to refactor now",
    "start": "1632039",
    "end": "1638240"
  },
  {
    "text": "is where we will engage a little bit more brain sets right little bit not too",
    "start": "1638240",
    "end": "1643960"
  },
  {
    "text": "much let's try that is the moment that we will try to put in all the all our",
    "start": "1643960",
    "end": "1650320"
  },
  {
    "text": "business logic right put it in means that let's keep it away from the low level details this is the thing that is",
    "start": "1650320",
    "end": "1656480"
  },
  {
    "text": "done here so you will agree that um this line",
    "start": "1656480",
    "end": "1665320"
  },
  {
    "text": "shouldn't be there it belongs to production code right so let's move it",
    "start": "1665320",
    "end": "1670960"
  },
  {
    "text": "to uh proper method using the IDE refactoring tools start method and we",
    "start": "1670960",
    "end": "1676480"
  },
  {
    "text": "are calling battery monit update status okay create you can see the",
    "start": "1676480",
    "end": "1683320"
  },
  {
    "text": "definition and the implementation is there we are running the tests we should be green yes they",
    "start": "1683320",
    "end": "1689600"
  },
  {
    "text": "are yeah now we can move to this proper module Next",
    "start": "1689600",
    "end": "1694919"
  },
  {
    "text": "Step let's move it there using the ID refactoring tools we are going to create",
    "start": "1694919",
    "end": "1700039"
  },
  {
    "text": "the battery monitor module the the one that we have we need to be working on",
    "start": "1700039",
    "end": "1706720"
  },
  {
    "text": "setting that we want this method to to be there move it yes create it yeah it has been created inside the test folder",
    "start": "1706720",
    "end": "1713880"
  },
  {
    "text": "sorry for that we are going to move it to the proper source source",
    "start": "1713880",
    "end": "1719279"
  },
  {
    "text": "code there I have mve it to the entities source code folder",
    "start": "1719279",
    "end": "1724600"
  },
  {
    "text": "great just open this this source file and the heater file by a moment and let's run the test again it",
    "start": "1724600",
    "end": "1732240"
  },
  {
    "text": "should be green right we are refactoring and they we are green",
    "start": "1732240",
    "end": "1739399"
  },
  {
    "text": "awesome perfect look at these include files they belong to the testing",
    "start": "1739399",
    "end": "1744600"
  },
  {
    "text": "framework are they shouldn't be there I don't know why the IDE has done but they",
    "start": "1744600",
    "end": "1749679"
  },
  {
    "text": "should not be needed so we not we should not include anything that we don't depend on and this is the one one of the",
    "start": "1749679",
    "end": "1755440"
  },
  {
    "text": "little little things that we start to to take a closer look when we start doing",
    "start": "1755440",
    "end": "1760640"
  },
  {
    "text": "little baby steps so let's remove this Heights and let's mark by the same",
    "start": "1760640",
    "end": "1765960"
  },
  {
    "text": "reason that this include is there this this one the battery monitor is there because this source file is implementing",
    "start": "1765960",
    "end": "1772679"
  },
  {
    "text": "its API let's put it there is there because he's implementing this okay let's run",
    "start": "1772679",
    "end": "1779640"
  },
  {
    "text": "the test fine passes awesome",
    "start": "1779640",
    "end": "1787320"
  },
  {
    "text": "great let's see now the same M the same micro cycle right green reflector in a",
    "start": "1787320",
    "end": "1792799"
  },
  {
    "text": "complete run let's go for the next spec",
    "start": "1792799",
    "end": "1799278"
  },
  {
    "text": "okay here it is the n spec is the one that says at 24 24% all this should be",
    "start": "1800120",
    "end": "1806279"
  },
  {
    "text": "off so let's put the proper Arrangement phase copy paste oo let's copy paste it",
    "start": "1806279",
    "end": "1814480"
  },
  {
    "text": "right we are setting the port a to G digital outputs and setting the desired",
    "start": "1814480",
    "end": "1821279"
  },
  {
    "text": "output at the complement all high because we are expected to have all of them low let's run to let's run to test",
    "start": "1821279",
    "end": "1828320"
  },
  {
    "text": "s again we should be ready and yes we are by the Spector",
    "start": "1828320",
    "end": "1836360"
  },
  {
    "text": "reason okay we are in red minimum implementation to make this test",
    "start": "1836360",
    "end": "1842360"
  },
  {
    "text": "pass what about do the same let's put it to low in conditionally right so let's",
    "start": "1845080",
    "end": "1851399"
  },
  {
    "text": "call the prodution code the same way it is and it should pass",
    "start": "1851399",
    "end": "1858120"
  },
  {
    "text": "let's see yeah he passes awesome take it till you make it right",
    "start": "1858720",
    "end": "1866559"
  },
  {
    "text": "so time to refactor these three lines are",
    "start": "1866559",
    "end": "1872559"
  },
  {
    "text": "duplicated and even these two are really low level details that we have corly",
    "start": "1872559",
    "end": "1879440"
  },
  {
    "text": "understood maybe few minutes ago but for sure we are going to forget it in the near future what do do these two lines mean",
    "start": "1879440",
    "end": "1887440"
  },
  {
    "text": "they mean that yes so let's put this uh",
    "start": "1887440",
    "end": "1893840"
  },
  {
    "text": "information that we have in our mind into a proper method right St method and",
    "start": "1893840",
    "end": "1899760"
  },
  {
    "text": "it's given the port a gpios are all",
    "start": "1899760",
    "end": "1907200"
  },
  {
    "text": "outputs easy okay let's run the test again yeah it passes awesome let's move",
    "start": "1907200",
    "end": "1915080"
  },
  {
    "text": "the definition to the end of the file we don't want to have it in the middle of test low level dates at at the",
    "start": "1915080",
    "end": "1920880"
  },
  {
    "text": "bottom okay let's remove the duplication using in the using it in the other test run the test",
    "start": "1920880",
    "end": "1928279"
  },
  {
    "text": "again here passes awesome what about this sentence is also a r a really low",
    "start": "1928279",
    "end": "1934440"
  },
  {
    "text": "level detail do you remember where why we put it there yes it means I given that the port",
    "start": "1934440",
    "end": "1943200"
  },
  {
    "text": "a high neble are all on",
    "start": "1943200",
    "end": "1948480"
  },
  {
    "text": "same run the test again pass is awesome",
    "start": "1948559",
    "end": "1953799"
  },
  {
    "text": "pass is move it to the back of the file and let's mark this section is a custom",
    "start": "1953799",
    "end": "1959519"
  },
  {
    "text": "given section and let's use it in the other test removing the",
    "start": "1959519",
    "end": "1966360"
  },
  {
    "text": "duplication not rocket science run the test and it",
    "start": "1966360",
    "end": "1973480"
  },
  {
    "text": "passes okay fine this is a little bit better",
    "start": "1973480",
    "end": "1979240"
  },
  {
    "text": "let's take a closer look to our dependencies we have two modules the",
    "start": "1979240",
    "end": "1984919"
  },
  {
    "text": "battery monitor this a prodution code and the test Suite the test battery monitor both are using a oh are using a",
    "start": "1984919",
    "end": "1992720"
  },
  {
    "text": "Sim in order to is called processor selection. H in order to incorporate the",
    "start": "1992720",
    "end": "1998760"
  },
  {
    "text": "me controller package when we are running on Target and there are some arrows that",
    "start": "1998760",
    "end": "2005600"
  },
  {
    "text": "crosses architectural boundary is the hardware boundary these These are marked in",
    "start": "2005600",
    "end": "2011519"
  },
  {
    "text": "red these arrows is are there because we are using",
    "start": "2011519",
    "end": "2016559"
  },
  {
    "text": "the port a and an A and T A are the ones that make these modules fear were they",
    "start": "2016559",
    "end": "2024600"
  },
  {
    "text": "are fear were because they depend on something that that is hard to change right what is hard to change our",
    "start": "2024600",
    "end": "2031840"
  },
  {
    "text": "running microcontroller okay so yeah we could try to address",
    "start": "2031840",
    "end": "2038080"
  },
  {
    "text": "this thing now but uh I'm not going to do it I'm going to",
    "start": "2038080",
    "end": "2044039"
  },
  {
    "text": "wait a little bit more and put more behavior in place before doing it and you could ask why you know what we are",
    "start": "2044039",
    "end": "2051960"
  },
  {
    "text": "following tdd and we are the ones who drive in this case it was me I I decided",
    "start": "2051960",
    "end": "2058200"
  },
  {
    "text": "to do it in that way it's the only reason okay so let's go for the next",
    "start": "2058200",
    "end": "2064280"
  },
  {
    "text": "one the next one is the one that states that at 25% only Le four should be on",
    "start": "2064280",
    "end": "2071040"
  },
  {
    "text": "let's copy let's put the proper arrangement in order to enter into the red in that case we",
    "start": "2071040",
    "end": "2077800"
  },
  {
    "text": "should the the binary complement of the expected output is e zero is e in in the",
    "start": "2077800",
    "end": "2083679"
  },
  {
    "text": "high and let's call the prodution",
    "start": "2083679",
    "end": "2088720"
  },
  {
    "text": "code it should fail we should be in red and it fails it fails because lead for",
    "start": "2088720",
    "end": "2094040"
  },
  {
    "text": "is not on right just the thing that we were expecting to to to",
    "start": "2094040",
    "end": "2099079"
  },
  {
    "text": "have and now we cannot fake it anymore this taste is going to force us",
    "start": "2099079",
    "end": "2106599"
  },
  {
    "text": "to finally ask for the battery percentage so we are as I said we are going to use uh this module that the",
    "start": "2106599",
    "end": "2114560"
  },
  {
    "text": "battery change status provided get CH percentage and we are in included yeah",
    "start": "2114560",
    "end": "2120599"
  },
  {
    "text": "includ the heer filer we are going to mark that this include is there because this is",
    "start": "2120599",
    "end": "2125920"
  },
  {
    "text": "a collaborator we are using it and if we run now the",
    "start": "2125920",
    "end": "2131560"
  },
  {
    "text": "test we are still in red but it we are in red because the build is broken and",
    "start": "2131560",
    "end": "2138000"
  },
  {
    "text": "it's broken for sure because we don't have any any any definition or implementation for this method is the",
    "start": "2138000",
    "end": "2143359"
  },
  {
    "text": "one that we were pretending that is being developed by another team so we are going to use a test double for in",
    "start": "2143359",
    "end": "2148400"
  },
  {
    "text": "the way in which is done with COK and seing is by making an include an include with the",
    "start": "2148400",
    "end": "2156079"
  },
  {
    "text": "same name of the API that we are pretending to mock but with a mock word in front of it if we run the",
    "start": "2156079",
    "end": "2164160"
  },
  {
    "text": "test now we will see that the build works so it has created the test double for us",
    "start": "2164160",
    "end": "2170880"
  },
  {
    "text": "but it's failing not only the the test that we are working on but the previous one that we're passing now are red",
    "start": "2170880",
    "end": "2177960"
  },
  {
    "text": "failing and the reason is because we are calling the oh we are",
    "start": "2177960",
    "end": "2185480"
  },
  {
    "text": "calling this uh method more times than expected this is because seedling by",
    "start": "2185480",
    "end": "2192000"
  },
  {
    "text": "default uses a strict strict mocks right and you know mocks tend to know too much",
    "start": "2192000",
    "end": "2198079"
  },
  {
    "text": "yeah they are really appealing really easy to use but be aware that they know too much anyways we are going to use it",
    "start": "2198079",
    "end": "2204560"
  },
  {
    "text": "but we are going to hide it in a few moments right so let's try to to put the",
    "start": "2204560",
    "end": "2209599"
  },
  {
    "text": "other one the the the previous one that we're passing into the red State again what is missing is the expectation right",
    "start": "2209599",
    "end": "2217640"
  },
  {
    "text": "let's go to the one that is at zero battery percentage level the way in which the expectation is is set up in",
    "start": "2217640",
    "end": "2224240"
  },
  {
    "text": "with Mo with Cog is by calling the same method of function if you want to be",
    "start": "2224240",
    "end": "2229359"
  },
  {
    "text": "pure uh followed by expect and return and passing the desired value right if",
    "start": "2229359",
    "end": "2236599"
  },
  {
    "text": "we do this and run the test again the a site we will see that this test is passing again okay fine let's fix that",
    "start": "2236599",
    "end": "2243760"
  },
  {
    "text": "one that is at 24 this is the this corresponding expectation fine passing this is the only one that",
    "start": "2243760",
    "end": "2250720"
  },
  {
    "text": "is missing right the one that we were working on let's put its proper expectation should be that the battery",
    "start": "2250720",
    "end": "2256599"
  },
  {
    "text": "is at 25 and let's run",
    "start": "2256599",
    "end": "2261839"
  },
  {
    "text": "it yeah it fails and now it's failing by the reason that we were expecting to fail because lead LED 4 is not",
    "start": "2263000",
    "end": "2271400"
  },
  {
    "text": "on we are in red finally so minimum implementation to to make this test",
    "start": "2271400",
    "end": "2279440"
  },
  {
    "text": "pass I think that you will agree that the minimum thing that we could do is to do this thing if the battery percentage",
    "start": "2280480",
    "end": "2287319"
  },
  {
    "text": "is 25 let's activ dis activate the LED 4 else let's clear them",
    "start": "2287319",
    "end": "2292720"
  },
  {
    "text": "all yeah awesome it will pass yet it is it does green",
    "start": "2292720",
    "end": "2300240"
  },
  {
    "text": "perfect if we have a battery with 0 25 we're done okay time to refactor do we have",
    "start": "2300240",
    "end": "2308160"
  },
  {
    "text": "anything else maybe not but okay just try to",
    "start": "2308160",
    "end": "2314480"
  },
  {
    "text": "refactor so you know what this line here knows",
    "start": "2314760",
    "end": "2323960"
  },
  {
    "text": "too much it knows that we use a given well a",
    "start": "2323960",
    "end": "2329720"
  },
  {
    "text": "a battery changes that provided a given module a specific module to retrieve the battery it knows that we are not using",
    "start": "2329720",
    "end": "2336560"
  },
  {
    "text": "its production code but a test double instead of of that and it also knows that we are using a mo test double and",
    "start": "2336560",
    "end": "2343680"
  },
  {
    "text": "additionally it knows that we use we are using COK for it too much right I have had to explain the meaning to you a",
    "start": "2343680",
    "end": "2350960"
  },
  {
    "text": "couple of minutes ago so let's hide it behind the proper seam that is going to be a proper Seam for the future we are",
    "start": "2350960",
    "end": "2357000"
  },
  {
    "text": "not going to be to see it in the in the example but this line means given the battery charge status is right and we",
    "start": "2357000",
    "end": "2364400"
  },
  {
    "text": "will set it here the desired battery percentage",
    "start": "2364400",
    "end": "2369359"
  },
  {
    "text": "yeah we could pass the the battery percentage struct method okay here we",
    "start": "2371240",
    "end": "2376280"
  },
  {
    "text": "have it we should pick the input parameter and pass it to the mock framework and with that we have we",
    "start": "2376280",
    "end": "2382920"
  },
  {
    "text": "should be done let's run the test again and we should be green oh Jesus no",
    "start": "2382920",
    "end": "2389599"
  },
  {
    "text": "now it's now it's red what the hell whatever it is is some lines maybe two a",
    "start": "2389599",
    "end": "2396040"
  },
  {
    "text": "couple of lines ahead of this right okay let's check what I did okay I pass a a",
    "start": "2396040",
    "end": "2402160"
  },
  {
    "text": "zero here instead of 25 okay let's fix it now it should be",
    "start": "2402160",
    "end": "2407720"
  },
  {
    "text": "pass and it does awesome let's move it to the back of the file to the",
    "start": "2407720",
    "end": "2414078"
  },
  {
    "text": "file and this is going to be a custom Arrangements section we here we have hidden this low",
    "start": "2414440",
    "end": "2422599"
  },
  {
    "text": "level let's use this proper Arrangement method well let's run the test again because because we have mov it to the",
    "start": "2422599",
    "end": "2428160"
  },
  {
    "text": "end of the file fine we are done let's use this give proper method Arrangement",
    "start": "2428160",
    "end": "2433800"
  },
  {
    "text": "method in the other ones 24 and in the one that is at zero we are",
    "start": "2433800",
    "end": "2439000"
  },
  {
    "text": "running the test of the time in the background in the background so zero",
    "start": "2439000",
    "end": "2445720"
  },
  {
    "text": "fine it should be passive yeah it does fine a little bit",
    "start": "2446240",
    "end": "2453960"
  },
  {
    "text": "cleaner so this is the these These are the our current dependencies now we you can see",
    "start": "2454480",
    "end": "2462240"
  },
  {
    "text": "that both the prodution code and the test code prodution code code sorry and",
    "start": "2462240",
    "end": "2467480"
  },
  {
    "text": "the test code depend on the on the new collaborator this provider and you can",
    "start": "2467480",
    "end": "2472720"
  },
  {
    "text": "see how the test Suite has created instantiated the test double for it you",
    "start": "2472720",
    "end": "2478359"
  },
  {
    "text": "can see that the hard to change dependencies are still there is we will fix it",
    "start": "2478359",
    "end": "2483800"
  },
  {
    "text": "later so let's go well before",
    "start": "2483800",
    "end": "2489240"
  },
  {
    "text": "that you have you have seen that we that it lasts 27 seconds to run right it",
    "start": "2489240",
    "end": "2495160"
  },
  {
    "text": "looks like it's really short but in reality it isn't once you start practicing pair programming or team",
    "start": "2495160",
    "end": "2501720"
  },
  {
    "text": "programming and you need faster feedback you will realize that this really annoying so let's this is one of the",
    "start": "2501720",
    "end": "2508440"
  },
  {
    "text": "reason why we are going to try to run it in the host and also because if we are able to run it in the host it's going to",
    "start": "2508440",
    "end": "2514200"
  },
  {
    "text": "be portable or maybe not but at at least we will have additional tools like",
    "start": "2514200",
    "end": "2520640"
  },
  {
    "text": "available in PL C the tool chain right so let's try to do",
    "start": "2520640",
    "end": "2526319"
  },
  {
    "text": "that so let's run it in the host as I mentioned to you we are using",
    "start": "2528359",
    "end": "2535079"
  },
  {
    "text": "GCC for this end for sure it's failing right it's failing yeah you can see we",
    "start": "2535079",
    "end": "2541480"
  },
  {
    "text": "are using GCC we has done the same he has created a runner compile everything and run it",
    "start": "2541480",
    "end": "2546760"
  },
  {
    "text": "but for sure it doesn't know what the port a is obviously we are not incorporating",
    "start": "2546760",
    "end": "2553599"
  },
  {
    "text": "any microcontroller package right so could how could we fix this",
    "start": "2553599",
    "end": "2561000"
  },
  {
    "text": "thing one way to do it is to apply the separation of concerns because one thing",
    "start": "2561000",
    "end": "2569839"
  },
  {
    "text": "is taking so assuring which values are read from or written to a specific",
    "start": "2569839",
    "end": "2577880"
  },
  {
    "text": "memory address and another complete thing is whether this this memory address is exactly the one that is where",
    "start": "2577880",
    "end": "2585200"
  },
  {
    "text": "the spal function register is right so let's take advantage advantage of this",
    "start": "2585200",
    "end": "2590400"
  },
  {
    "text": "and as long as the framework activates this",
    "start": "2590400",
    "end": "2596720"
  },
  {
    "text": "flag it's the test host whenever it runs in the host we could create really cheap",
    "start": "2596720",
    "end": "2604040"
  },
  {
    "text": "fakes for it right when we are running the host if we run now well yeah for sure we need",
    "start": "2604040",
    "end": "2610800"
  },
  {
    "text": "to access from the from the test Suite let's create Global variables for it and let's run the test now now it's building",
    "start": "2610800",
    "end": "2617960"
  },
  {
    "text": "and it's running in the host we are registering the",
    "start": "2617960",
    "end": "2623400"
  },
  {
    "text": "time yeah 10 seconds almost the a third of the one that it took on the target we",
    "start": "2624079",
    "end": "2629920"
  },
  {
    "text": "are getting better apart from that as I mentioned as long as we are using a",
    "start": "2629920",
    "end": "2636359"
  },
  {
    "text": "plain seat tool chain we will have plenty of new tools we are no longer constrained to be embedded right one of",
    "start": "2636359",
    "end": "2643160"
  },
  {
    "text": "the tools that we will have is the code coverage you can see we are running now with code coverage but we will have have",
    "start": "2643160",
    "end": "2649319"
  },
  {
    "text": "any kind of sanitizers rule Checkers uh you name it mutation testing for example",
    "start": "2649319",
    "end": "2655160"
  },
  {
    "text": "you name it who you have yeah that's what we have so back to our",
    "start": "2655160",
    "end": "2662760"
  },
  {
    "text": "dependencies our code is portable isn't it it's running two different platforms well",
    "start": "2662760",
    "end": "2668079"
  },
  {
    "text": "no not not really because even though it's running the",
    "start": "2668079",
    "end": "2673880"
  },
  {
    "text": "host is instantiating these ugly globals variables bear with me it's",
    "start": "2673880",
    "end": "2681040"
  },
  {
    "text": "going to it's going to be something momentary we will fix it but not only that not only that because this belong",
    "start": "2681040",
    "end": "2688119"
  },
  {
    "text": "to a to a specific microcontroller not only that we are also putting some code",
    "start": "2688119",
    "end": "2693480"
  },
  {
    "text": "that is there only by testing purposes in our production code that this is that this is an smell it shouldn't be",
    "start": "2693480",
    "end": "2699839"
  },
  {
    "text": "there and yeah sometimes when we refactor we take some steps that worsen",
    "start": "2699839",
    "end": "2708599"
  },
  {
    "text": "our our code in order to have to be able to take bigger stepes or faster states",
    "start": "2708599",
    "end": "2714760"
  },
  {
    "text": "in the near future that's the that's the thing right",
    "start": "2714760",
    "end": "2720000"
  },
  {
    "text": "so let's continue let's continue by adding a some",
    "start": "2720000",
    "end": "2725280"
  },
  {
    "text": "behavior let's go for the next uh Corner case is the 49 so let's put the proper",
    "start": "2725280",
    "end": "2733119"
  },
  {
    "text": "Arrangement now yeah it's the same thing atate",
    "start": "2733119",
    "end": "2738280"
  },
  {
    "text": "status it should be failing because Le for is is not on we are in",
    "start": "2738280",
    "end": "2745160"
  },
  {
    "text": "red time to make it fast as fast as possible right and here we are going to",
    "start": "2745160",
    "end": "2751079"
  },
  {
    "text": "employ a technique that allow us to have with briefly in time a duplication",
    "start": "2751079",
    "end": "2757800"
  },
  {
    "text": "between production code and test code it's going is named triangulation what triangulation means",
    "start": "2757800",
    "end": "2764599"
  },
  {
    "text": "is like this 25 that we have there and the 49 that we are now dealing with Define an an interval of behavior right",
    "start": "2764599",
    "end": "2772559"
  },
  {
    "text": "so we know there's going to be a less or equal or greater or equal in some way right but we will wait a little bit to",
    "start": "2772559",
    "end": "2778480"
  },
  {
    "text": "have this generation this generalization in place till we have more cor cases covered so let's fake it a little bit",
    "start": "2778480",
    "end": "2785359"
  },
  {
    "text": "using the triangulation is easy so if the battery percentage is 25",
    "start": "2785359",
    "end": "2790720"
  },
  {
    "text": "or is 49 dis activate the LED 4 enough it",
    "start": "2790720",
    "end": "2797520"
  },
  {
    "text": "passes let's do the same with the 50 let's go for the 50 at 50% now let LED 4",
    "start": "2797520",
    "end": "2806160"
  },
  {
    "text": "and led 5 should be on and now the binary complement the high neble is C in exad",
    "start": "2806160",
    "end": "2813119"
  },
  {
    "text": "decimal let's call the prodution code run the T",
    "start": "2813119",
    "end": "2818240"
  },
  {
    "text": "and yeah it fails just by the reason that we were expected to fail Le four LED 4 and led 5 are not on minimum",
    "start": "2818240",
    "end": "2824720"
  },
  {
    "text": "implementation to make this test pass you will agree that it will be",
    "start": "2824720",
    "end": "2831920"
  },
  {
    "text": "enough doing this thing the battery percentage is equal to 50 let's activate",
    "start": "2831920",
    "end": "2838000"
  },
  {
    "text": "Le five and led 5 and led 4 let's run the",
    "start": "2838000",
    "end": "2843558"
  },
  {
    "text": "test I need fails why it's failing do you have any",
    "start": "2845640",
    "end": "2852040"
  },
  {
    "text": "clue yeah I forgot I miss it defect localization so yeah I forgot to",
    "start": "2852040",
    "end": "2858079"
  },
  {
    "text": "activate led5 let's do it so now we should be passing we are",
    "start": "2858079",
    "end": "2864800"
  },
  {
    "text": "done so now we are going work continuously with this triangulation stuff till we have all the corner cases",
    "start": "2864800",
    "end": "2870680"
  },
  {
    "text": "covered running the test Suite all along the the path right all along the process till we have all of them in place",
    "start": "2870680",
    "end": "2878839"
  },
  {
    "text": "so we have it we have almost a 100 here it is okay",
    "start": "2880800",
    "end": "2888720"
  },
  {
    "text": "fine really yeah when it's it looks like this yeah but yeah yeah it is it could",
    "start": "2888720",
    "end": "2895880"
  },
  {
    "text": "be so now now it's time to refactor well before refactoring hey we forgot to run",
    "start": "2895880",
    "end": "2902200"
  },
  {
    "text": "it in the Target it's going to be working the target let's run it in the target it",
    "start": "2902200",
    "end": "2907359"
  },
  {
    "text": "should be working we haven't we haven't done anything strange but who knows two",
    "start": "2907359",
    "end": "2912640"
  },
  {
    "text": "different platforms yeah it passes okay trying to refactor now is where we could",
    "start": "2912640",
    "end": "2917839"
  },
  {
    "text": "put this generalization in place let's do it slowly right so yeah for sure if the",
    "start": "2917839",
    "end": "2925640"
  },
  {
    "text": "battery is bigger than 25 or less than 49 let L4 should be on so let's do this",
    "start": "2925640",
    "end": "2934359"
  },
  {
    "text": "thing and if we commit any error in the process it",
    "start": "2934359",
    "end": "2940799"
  },
  {
    "text": "will point it out like it has been done",
    "start": "2940799",
    "end": "2946160"
  },
  {
    "text": "okay and yeah we can even revert the order in which we are doing this thing",
    "start": "2946160",
    "end": "2951559"
  },
  {
    "text": "let's try that let's see if it passes and yeah it does and you know this is last if",
    "start": "2951559",
    "end": "2959240"
  },
  {
    "text": "statement is redundant we can remove it yeah it is and look at this yeah",
    "start": "2959240",
    "end": "2965559"
  },
  {
    "text": "these are also redundant we can't remove them much",
    "start": "2965559",
    "end": "2971280"
  },
  {
    "text": "cleaner yeah",
    "start": "2971520",
    "end": "2975640"
  },
  {
    "text": "fine now is where we are going to finally address the issue right let's",
    "start": "2977559",
    "end": "2984079"
  },
  {
    "text": "try to make our code independent on the microcontroller this is the prodution code that we currently have as you can",
    "start": "2984079",
    "end": "2990680"
  },
  {
    "text": "see there's a single uh statement for each of the for the uh intervals",
    "start": "2990680",
    "end": "2997880"
  },
  {
    "text": "for Forget by the moment the low nible we have put we have been putting to zero all the time right skip it by the moment",
    "start": "2997880",
    "end": "3005280"
  },
  {
    "text": "take a look at the at the high Nel we are dealing with a four it's",
    "start": "3005280",
    "end": "3010880"
  },
  {
    "text": "four four bits at once because it it was the easier way to do it because in our",
    "start": "3010880",
    "end": "3018000"
  },
  {
    "text": "current Hardware variant we were using this four gpos on the port a but you",
    "start": "3018000",
    "end": "3024960"
  },
  {
    "text": "will agree with me that we it's impossible to say okay you know Hardware colleagues you are not able to you to to",
    "start": "3024960",
    "end": "3032000"
  },
  {
    "text": "use any gpio you should go to this one so this can be moved right so one thing",
    "start": "3032000",
    "end": "3037319"
  },
  {
    "text": "that we will need to do is to deal with each of these bits independently because if we do that we",
    "start": "3037319",
    "end": "3044040"
  },
  {
    "text": "could also put a proper illustration in place that we'll be able to deal with each of these individual gpos but in the",
    "start": "3044040",
    "end": "3051280"
  },
  {
    "text": "way the code is in this shape this is going to be hard to do so one thing that",
    "start": "3051280",
    "end": "3056319"
  },
  {
    "text": "we are going going to do first make the change easy right",
    "start": "3056319",
    "end": "3061839"
  },
  {
    "text": "we're going to try to put everything in place to to make the easy change",
    "start": "3061839",
    "end": "3067400"
  },
  {
    "text": "later so we are going to to these sentences we are going to try to put it",
    "start": "3067400",
    "end": "3072960"
  },
  {
    "text": "as the equivalent but with the sentences that are dealing with each individual",
    "start": "3072960",
    "end": "3079599"
  },
  {
    "text": "bit individually these are the common masks that we are used to to use when we",
    "start": "3079599",
    "end": "3084680"
  },
  {
    "text": "are in embed right dealing with special function registers once after a time",
    "start": "3084680",
    "end": "3091359"
  },
  {
    "text": "right and yeah you can see they are equivalent so now let's run it in the",
    "start": "3091359",
    "end": "3097480"
  },
  {
    "text": "Target don't forget that and yeah it passes in both awesome",
    "start": "3097480",
    "end": "3103839"
  },
  {
    "text": "now we are in a much better shape to finally make the easy change let's call",
    "start": "3103839",
    "end": "3109200"
  },
  {
    "text": "it easy we will see as you can see here we have two types of sentences one",
    "start": "3109200",
    "end": "3118640"
  },
  {
    "text": "that clears the a given gpio and the other one that sets the gpio to high and",
    "start": "3118640",
    "end": "3124040"
  },
  {
    "text": "to low this sentence over here means setting to low level the four bit in the",
    "start": "3124040",
    "end": "3132640"
  },
  {
    "text": "port a what we want now is to extract it to a method that is going to call be called",
    "start": "3132640",
    "end": "3139880"
  },
  {
    "text": "pal under gpio low pal comes process comes from processor artion layer if the",
    "start": "3139880",
    "end": "3146680"
  },
  {
    "text": "goal is to hide which process which microcontroller are we dealing",
    "start": "3146680",
    "end": "3152200"
  },
  {
    "text": "with and we will need to pass something in order to know which",
    "start": "3152200",
    "end": "3159000"
  },
  {
    "text": "GPI are we do we want to address right and here is where we need to put all our",
    "start": "3159000",
    "end": "3164640"
  },
  {
    "text": "brain or brain cells in action because whatever we put there that on veils",
    "start": "3164640",
    "end": "3171480"
  },
  {
    "text": "veils which microcontroller is behind the ctin will contact it orig intent",
    "start": "3171480",
    "end": "3177559"
  },
  {
    "text": "when that happens we call these abstractions leaky abstractions and",
    "start": "3177559",
    "end": "3182839"
  },
  {
    "text": "unfortunately most Hardware artion layers from the vendors happen to be leaky attractions take this into account",
    "start": "3182839",
    "end": "3191720"
  },
  {
    "text": "so let's use the ID and create the P gpio",
    "start": "3191720",
    "end": "3198720"
  },
  {
    "text": "low what about passing a un",
    "start": "3198720",
    "end": "3204200"
  },
  {
    "text": "Aid what about that if do that we will be able to address 256 independent gpios",
    "start": "3204200",
    "end": "3210559"
  },
  {
    "text": "maybe it's more than enough and one thing that we do that is that the port this thing that this port thing it goes",
    "start": "3210559",
    "end": "3218200"
  },
  {
    "text": "away it's a low level detail right so let's do",
    "start": "3218200",
    "end": "3223440"
  },
  {
    "text": "that we have it let's run the test and let's move each of these H Corner cases",
    "start": "3223440",
    "end": "3230400"
  },
  {
    "text": "or implementation to this behavior and probably some of you are not thinking yeah this is a really switch which case",
    "start": "3230400",
    "end": "3236720"
  },
  {
    "text": "if F statement we should be doing some shifting to the left and masking right",
    "start": "3236720",
    "end": "3242520"
  },
  {
    "text": "you're right but not now not yet right not yet so let's do the same with the p",
    "start": "3242520",
    "end": "3249559"
  },
  {
    "text": "GPI high and let's start removing yeah it is the P GP",
    "start": "3249559",
    "end": "3254680"
  },
  {
    "text": "high and let's start using it I'm moving all the code through this method each by",
    "start": "3254680",
    "end": "3264920"
  },
  {
    "text": "each right it's always faster to let it work",
    "start": "3264920",
    "end": "3271559"
  },
  {
    "text": "in that trying to fix when it's broken fine let's run in the Target",
    "start": "3271559",
    "end": "3276920"
  },
  {
    "text": "right should work and it works great this file gpio method should not",
    "start": "3276920",
    "end": "3284680"
  },
  {
    "text": "belong to the our to our module right they should be to the proper module so let's move it there let's create a p GPI",
    "start": "3284680",
    "end": "3293040"
  },
  {
    "text": "module and let's mark that we want both methods there just create it yeah do",
    "start": "3293040",
    "end": "3299720"
  },
  {
    "text": "it there here we have yes we have it let's",
    "start": "3299720",
    "end": "3304839"
  },
  {
    "text": "see this is the source file oh here we have some include that",
    "start": "3304839",
    "end": "3310960"
  },
  {
    "text": "shouldn't be there like before but we will remove it in a moment",
    "start": "3310960",
    "end": "3316040"
  },
  {
    "text": "let's remove them it's no longer needed and let's mark specifically that this",
    "start": "3316040",
    "end": "3321720"
  },
  {
    "text": "include is there because this source file is the one the only one that is implementing this P gpio for this",
    "start": "3321720",
    "end": "3329520"
  },
  {
    "text": "microcontroller right great run the test again and it fails",
    "start": "3329520",
    "end": "3337839"
  },
  {
    "text": "totally unexpected and it fails because I have been because it's not finding the P GPI high and this is because I have",
    "start": "3337839",
    "end": "3344280"
  },
  {
    "text": "been unable to make seedling deep dependencies to properly work and it's not compiling the pgp so if we put this",
    "start": "3344280",
    "end": "3352200"
  },
  {
    "text": "sentence over here we will force the framework to compile it now it's compiled but yeah you go you need you",
    "start": "3352200",
    "end": "3359359"
  },
  {
    "text": "see port a is on declared okay sure it isn't we are running the host",
    "start": "3359359",
    "end": "3364720"
  },
  {
    "text": "right what if we okay let's make it let's make let's make it fast fast what",
    "start": "3364720",
    "end": "3371039"
  },
  {
    "text": "about what let's copy these globals here and use it there you should",
    "start": "3371039",
    "end": "3378920"
  },
  {
    "text": "pass yeah it does awesome we are closer we're getting closer but the battery",
    "start": "3379200",
    "end": "3385079"
  },
  {
    "text": "monitor module is this these lines the lines 10 to 12 are the ones that are",
    "start": "3385079",
    "end": "3390599"
  },
  {
    "text": "making this module P well we don't want it to be there right so let's move these",
    "start": "3390599",
    "end": "3398480"
  },
  {
    "text": "lines into the proper p",
    "start": "3399079",
    "end": "3406839"
  },
  {
    "text": "gpio and let's run the test again it should",
    "start": "3406839",
    "end": "3413480"
  },
  {
    "text": "pass awesome it doesn't know anything about which microcontroller is under the Cordes we",
    "start": "3414559",
    "end": "3420799"
  },
  {
    "text": "are using the only thing that is missing is to move in this pile GPI or heater file and source file to the proper",
    "start": "3420799",
    "end": "3426440"
  },
  {
    "text": "folders so let's do that the the source file the API is going to be in the P",
    "start": "3426440",
    "end": "3431720"
  },
  {
    "text": "interfaces folder and the p gpio is going to be inside the this concrete",
    "start": "3431720",
    "end": "3438160"
  },
  {
    "text": "microcontroller implementation and let's run the test",
    "start": "3438160",
    "end": "3444000"
  },
  {
    "text": "again it should be pass in let's run it by the very last time in the",
    "start": "3444599",
    "end": "3451359"
  },
  {
    "text": "Target and it passes we done",
    "start": "3451359",
    "end": "3458799"
  },
  {
    "text": "finished okay closer look to our dependencies now as you can see the",
    "start": "3458799",
    "end": "3465039"
  },
  {
    "text": "prodution code is no longer dependent on anything is not crossing any hardare",
    "start": "3465039",
    "end": "3470160"
  },
  {
    "text": "boundary so it's independent on the microcontroller that we are using because we have inverted the dependency",
    "start": "3470160",
    "end": "3475559"
  },
  {
    "text": "using this struction unfortunately we have been unable to do the same with the test",
    "start": "3475559",
    "end": "3481240"
  },
  {
    "text": "Suite which is really unfortunate because it should be done we but do have plenty of time to do it this is but you",
    "start": "3481240",
    "end": "3487359"
  },
  {
    "text": "can see these globals are still there but at least they are only in the implementation for the specific",
    "start": "3487359",
    "end": "3492640"
  },
  {
    "text": "microcontroller it's better and when we run it into the target we don't have this ugly",
    "start": "3492640",
    "end": "3500760"
  },
  {
    "text": "things right these fakes we are incorporating the microcontroller package and we are done",
    "start": "3500760",
    "end": "3506760"
  },
  {
    "text": "so I show you okay incompleteness before you get at me I haven't showed this",
    "start": "3506760",
    "end": "3512319"
  },
  {
    "text": "method right because we for sure we should be able to set which GPI do we",
    "start": "3512319",
    "end": "3517799"
  },
  {
    "text": "want to use for each status LED sure it should be this kind of init should be",
    "start": "3517799",
    "end": "3523160"
  },
  {
    "text": "there and additionally you will be all the time maybe thinking that this is an",
    "start": "3523160",
    "end": "3529520"
  },
  {
    "text": "ugly thing right really naive and you will be thinking some some variant of",
    "start": "3529520",
    "end": "3535520"
  },
  {
    "text": "the one that you have here right so masking and shift and left",
    "start": "3535520",
    "end": "3540640"
  },
  {
    "text": "shifting right agree but this thing in order to transition from that one to",
    "start": "3540640",
    "end": "3545760"
  },
  {
    "text": "this one we will need to test drive it using its proper test right in order to",
    "start": "3545760",
    "end": "3552400"
  },
  {
    "text": "cover all the cornate cases even the low Nel that we have be pretended that is zero all the",
    "start": "3552400",
    "end": "3557839"
  },
  {
    "text": "time so yeah this is the end this is the this has been this this has been my",
    "start": "3557839",
    "end": "3563359"
  },
  {
    "text": "little contribution to a practical technique that allow me to start playing",
    "start": "3563359",
    "end": "3569200"
  },
  {
    "text": "to win like Ken Beck explains in his book stream programming explain",
    "start": "3569200",
    "end": "3576400"
  },
  {
    "text": "obviously we will never be the one like Neo in The Matrix",
    "start": "3576400",
    "end": "3582440"
  },
  {
    "text": "movies but however we we really deserve better development approaches to",
    "start": "3582440",
    "end": "3589480"
  },
  {
    "text": "gracefully fly while facing Shifty Winds of Change right it's time to fly thanks",
    "start": "3589480",
    "end": "3596599"
  },
  {
    "text": "for Jour no I don't know we have time to any",
    "start": "3596599",
    "end": "3604480"
  },
  {
    "text": "questions maybe yes",
    "start": "3604480",
    "end": "3608319"
  }
]