[
  {
    "text": "all right it's awfully quiet in here is everybody awake I don't see much caffeine out there maybe that's the",
    "start": "2040",
    "end": "8559"
  },
  {
    "text": "problem all right I'm Jesse Phelps uh this is reverse engineering a bluetooth light",
    "start": "8559",
    "end": "14120"
  },
  {
    "text": "bulb so I'm an agal engineering coach at a company called Express Scripts which is a big company in the US and uh in",
    "start": "14120",
    "end": "21840"
  },
  {
    "text": "that role I try to get teams to think about feedback loops and a lot of these things like that we probably all take for granted surprisingly of testing and",
    "start": "21840",
    "end": "29679"
  },
  {
    "text": "uh you know red green refractor there are a lot of Engineers that still don't get it and are many steps behind on some",
    "start": "29679",
    "end": "35320"
  },
  {
    "text": "of this so I'm trying to help coach teams on how to do these things and talk about feedback loops trying to get them",
    "start": "35320",
    "end": "41000"
  },
  {
    "text": "to have a more Dynamic interactive team and try to get them to have some fun and in that process I was thinking about uh",
    "start": "41000",
    "end": "47760"
  },
  {
    "text": "a build light would be a great thing to have and to have the teams build them and and you know put it all together",
    "start": "47760",
    "end": "52800"
  },
  {
    "text": "themselves uh as kind of a team building exercise now build lights are not a new",
    "start": "52800",
    "end": "57960"
  },
  {
    "text": "thing uh does anybody have any build lights now just that of curiosity so companies that have them",
    "start": "57960",
    "end": "64360"
  },
  {
    "text": "often put stuff up about them because they are kind of unique and fun uh these are some examples that I just went Googling to see um you know what other",
    "start": "64360",
    "end": "71200"
  },
  {
    "text": "companies had and they had these and the first ones that we started with were just some LEDs hooked up to a",
    "start": "71200",
    "end": "77119"
  },
  {
    "text": "microcontroller and that worked but it was cumbersome and messy and not as not",
    "start": "77119",
    "end": "82320"
  },
  {
    "text": "as portable and all of that so I found a light bulb that I liked which is just a",
    "start": "82320",
    "end": "87799"
  },
  {
    "text": "nice simple bluetooth light bulb and uh it has an app with it and you can control the color and uh there's several",
    "start": "87799",
    "end": "94280"
  },
  {
    "text": "other things you can do with it and so I thought okay this will work perfectly it's just a Bluetooth low energy bold I",
    "start": "94280",
    "end": "99439"
  },
  {
    "text": "should be able to take that and have that become my build light well I emailed the company and I said um you",
    "start": "99439",
    "end": "105759"
  },
  {
    "text": "know hey I bought this bulb I'd like to uh know what the spec for it is so that I can interact with it myself and have",
    "start": "105759",
    "end": "111479"
  },
  {
    "text": "my own my own code on a microcontroller control it and they said we don't provide that so I said challenge",
    "start": "111479",
    "end": "118840"
  },
  {
    "text": "accepted so got a Bluetooth L energy bulb I have",
    "start": "118840",
    "end": "125560"
  },
  {
    "text": "Team City that's running in a Docker container on here uh I have a Raspberry Pi up here um the Bluetooth bulb as",
    "start": "125560",
    "end": "132680"
  },
  {
    "text": "mentioned I guess I should have said we're it's using Bluetooth low energy and I have the bulb um we're going to",
    "start": "132680",
    "end": "138160"
  },
  {
    "text": "packet sniff the communication between the app and the bulb and um then we're going to use wire shark to inspect that",
    "start": "138160",
    "end": "144800"
  },
  {
    "text": "protocol and then put it all together and actually have this operate as a build light",
    "start": "144800",
    "end": "150519"
  },
  {
    "text": "so first thing to know about Bluetooth low energy um has anybody done any implementation work with Bluetooth low",
    "start": "150519",
    "end": "156519"
  },
  {
    "text": "energy all right I'm going to ask a several questions along the way because I just like to survey and see what people are doing too uh so basically the",
    "start": "156519",
    "end": "164159"
  },
  {
    "text": "simplest thing you need to know about it is it operates in a key value pair kind of way and it's called generic attribute",
    "start": "164159",
    "end": "170760"
  },
  {
    "text": "uh this generic attribute protocol is what's used um and it's just real simple",
    "start": "170760",
    "end": "175840"
  },
  {
    "text": "key values there are a few other modes of operation you can actually access the uh",
    "start": "175840",
    "end": "181599"
  },
  {
    "text": "The Logical link as well and do more advanced things but this is what most Bluetooth low energy devices that you're",
    "start": "181599",
    "end": "186720"
  },
  {
    "text": "going to encounter are doing is just generic attribute so team City how many team",
    "start": "186720",
    "end": "192879"
  },
  {
    "text": "City users do we have all right less than half uh",
    "start": "192879",
    "end": "198200"
  },
  {
    "text": "Jenkins anybody have something else okay uh just curious um so build",
    "start": "198200",
    "end": "206200"
  },
  {
    "text": "system again I'm running it in Docker the plugin that I'm using to actually allowed us to communicate back to the Raspberry Pi is this web hooks plugin",
    "start": "206200",
    "end": "213840"
  },
  {
    "text": "and um what we're doing with that is essentially just grabbing these three lines out of the call that it makes to",
    "start": "213840",
    "end": "220400"
  },
  {
    "text": "the um to the Raspberry Pi that indicates the project that built and what the status was um on that in terms",
    "start": "220400",
    "end": "227959"
  },
  {
    "text": "of success or fail and whether it has started or is finished so that's all I'm extracting from that",
    "start": "227959",
    "end": "233079"
  },
  {
    "text": "payload so then Raspberry Pi how many Pi owners do we have all right we can skip",
    "start": "233079",
    "end": "238280"
  },
  {
    "text": "this slide all right so uh I'm using blue Z which is the um uh the Linux the official",
    "start": "238280",
    "end": "246480"
  },
  {
    "text": "bluetooth support for Linux how many people have done something with blue Z okay just a couple so um for the",
    "start": "246480",
    "end": "253319"
  },
  {
    "text": "Raspberry Pi I haven't found a pre-built binary so I had to build from Source uh anybody of you couple build Source",
    "start": "253319",
    "end": "260919"
  },
  {
    "text": "yourself as well okay so I see nods um Ada fruit has a pretty good tutorial on",
    "start": "260919",
    "end": "266600"
  },
  {
    "text": "that whole process if you just search for bluesy Raspberry Pi I think the first or second link um other devices",
    "start": "266600",
    "end": "272919"
  },
  {
    "text": "you may haveen them built in uh you may be able to find pre-built binaries so your mileage may",
    "start": "272919",
    "end": "279400"
  },
  {
    "text": "vary so then Bluetooth bulb I bought this from Bluetooth light bulb.com um in",
    "start": "279400",
    "end": "285080"
  },
  {
    "text": "theory the same process should work with any of them um you know Philips H is really big and popular uh so I think it",
    "start": "285080",
    "end": "291880"
  },
  {
    "text": "should same process should work so to actually get the initial round of",
    "start": "291880",
    "end": "297840"
  },
  {
    "text": "data um I'm using using uh an Android device and you can actually set Android",
    "start": "297840",
    "end": "303680"
  },
  {
    "text": "OS to log all of the Bluetooth traffic to a log file so every manufacturer has",
    "start": "303680",
    "end": "309479"
  },
  {
    "text": "it someplace hidden differently but what you're looking for is this enable Bluetooth HCI Snoop and where it's going",
    "start": "309479",
    "end": "316240"
  },
  {
    "text": "to store that log file also changes manufacturer to manufacturer the one I was using it was on the SD card so again",
    "start": "316240",
    "end": "323360"
  },
  {
    "text": "just one of those things you'll have to figure out how to do on your own but this is a really easy way to actually get a hold of all of that traffic",
    "start": "323360",
    "end": "330919"
  },
  {
    "text": "and I'll come back to how you do it if you don't have that later wire shark",
    "start": "330919",
    "end": "336120"
  },
  {
    "text": "users okay so for those who haven't used it it's like Fiddler let you inspect traffic and um it'll it'll also parse",
    "start": "336120",
    "end": "344080"
  },
  {
    "text": "apart the actual traffic the actual packets and give you the various blocks and segments of it very nice and easy uh",
    "start": "344080",
    "end": "351199"
  },
  {
    "text": "so it's it's easy to to analyze a protocol and um you know with with wire shark lots of options in there",
    "start": "351199",
    "end": "357520"
  },
  {
    "text": "too so then putting all together I have a node server that's running on the Raspberry Pi and I have a react web",
    "start": "357520",
    "end": "363840"
  },
  {
    "text": "interface for it although it's a pretty meaningless web interface but it's there um Team City web hooks to notify the",
    "start": "363840",
    "end": "369759"
  },
  {
    "text": "Raspberry Pi Noble is the name of the npm package that will facilitate all of",
    "start": "369759",
    "end": "376039"
  },
  {
    "text": "the um node Bluetooth low energy communication for you and then um that's",
    "start": "376039",
    "end": "382560"
  },
  {
    "text": "actually what sends off the signal to the Bold to uh change the color of the light for build status",
    "start": "382560",
    "end": "387800"
  },
  {
    "text": "information all right so let's do this so the first step here I'm going to",
    "start": "387800",
    "end": "396440"
  },
  {
    "text": "put this bold in all",
    "start": "396440",
    "end": "402240"
  },
  {
    "text": "right try not to Blind anybody can everybody basically see the color of the bulb",
    "start": "402240",
    "end": "408639"
  },
  {
    "text": "here turn this off real quick so as I mentioned there's an app",
    "start": "411440",
    "end": "418560"
  },
  {
    "text": "for this bulb and whenever you're going to try to reverse engineer something like",
    "start": "418560",
    "end": "424520"
  },
  {
    "text": "this what you want to do is try to produce patterns so that something",
    "start": "424520",
    "end": "430280"
  },
  {
    "text": "becomes recognizable potentially in the data and so I've got the app connected",
    "start": "430280",
    "end": "436599"
  },
  {
    "text": "to the bulb now and I'm actually doing this on an iPhone because that's what I use I just use somebody else's Android",
    "start": "436599",
    "end": "442360"
  },
  {
    "text": "to to do this but it'll all still uh you know fit together fine so basically I connect to the bulb and I just cycled",
    "start": "442360",
    "end": "449800"
  },
  {
    "text": "through some colors and you know log that data uh turned it on and off a few",
    "start": "449800",
    "end": "456960"
  },
  {
    "text": "times there are also these functions that it has in here and I can set it on",
    "start": "456960",
    "end": "463280"
  },
  {
    "text": "this you know pulsating blue and yellow these various colors so that's",
    "start": "463280",
    "end": "469000"
  },
  {
    "text": "what I did just went through and just toggle in these options a few times and uh just try to produce something that",
    "start": "469000",
    "end": "474879"
  },
  {
    "text": "might I can identify that AB pattern or with the colors something else uh in in this log data so magically now I have",
    "start": "474879",
    "end": "482400"
  },
  {
    "text": "moved that log file over to wire shark",
    "start": "482400",
    "end": "488360"
  },
  {
    "text": "here okay so is everybody able to see this okay in the back can I get a nod all",
    "start": "488440",
    "end": "496479"
  },
  {
    "text": "right so I don't know what I I knew nothing about how Bluetooth worked at",
    "start": "496479",
    "end": "501599"
  },
  {
    "text": "the time I just you know knew I could get these packets and I brought them over here and uh I went off and I started reading the spec and I was",
    "start": "501599",
    "end": "507879"
  },
  {
    "text": "trying to figure out how does this stuff even work and I'm looking through this data and I had only seen this thing",
    "start": "507879",
    "end": "513959"
  },
  {
    "text": "about this generic attribute profile so as I'm looking through this data I'm",
    "start": "513959",
    "end": "519120"
  },
  {
    "text": "scrolling along and I start to see this Gat show up in here right and this is all the magic of wi shark recognizing",
    "start": "519120",
    "end": "525519"
  },
  {
    "text": "these packets and their descriptors and being able to label them for me in a way that I can try to correlate them with",
    "start": "525519",
    "end": "530880"
  },
  {
    "text": "that spec um so I find these in here and just trying to kind of look at them",
    "start": "530880",
    "end": "538240"
  },
  {
    "text": "and see what do I what kind can I recognize here as any sort of patterns with",
    "start": "538240",
    "end": "543440"
  },
  {
    "text": "things and in in correlating the time of what I did it felt like all that stuff was probably initial connection work of",
    "start": "543440",
    "end": "550560"
  },
  {
    "text": "getting the bulb um you know connected to the app but as I get further down",
    "start": "550560",
    "end": "555720"
  },
  {
    "text": "into here and I start doing more things now I",
    "start": "555720",
    "end": "561200"
  },
  {
    "text": "start to see this right command in here and I see this same",
    "start": "561200",
    "end": "568120"
  },
  {
    "text": "address over and over and um when I look at the value down here I see it's",
    "start": "568120",
    "end": "575440"
  },
  {
    "text": "alternating well I recall turning the power on and off a bunch of times uh and",
    "start": "575440",
    "end": "581040"
  },
  {
    "text": "when I correlate this with the order that I actually did these things in that's what that felt like it was maybe this is turning it on and off so then I",
    "start": "581040",
    "end": "587519"
  },
  {
    "text": "had to figure out now how do I actually test these things like uniquely and individually and with blue Z it turns",
    "start": "587519",
    "end": "593760"
  },
  {
    "text": "out you can interact with",
    "start": "593760",
    "end": "599680"
  },
  {
    "text": "um with Bluetooth devices just like from the command line there's a CLI utility that you can use to issue commands and",
    "start": "599680",
    "end": "605480"
  },
  {
    "text": "and experiment with things so I'll show you a couple of things you have to do",
    "start": "605480",
    "end": "611360"
  },
  {
    "text": "here this Bluetooth CTL is uh an application that lets you like listen to",
    "start": "611360",
    "end": "617200"
  },
  {
    "text": "the Bluetooth traffic around you it's listening for the advertising it also lets you control um whether the",
    "start": "617200",
    "end": "622680"
  },
  {
    "text": "Bluetooth is on or off on the device so I've got this what you're seeing here is my VNC session running to the Raspberry",
    "start": "622680",
    "end": "628800"
  },
  {
    "text": "Pi by the way I have a a network adapter up here and so that's what I'm you're looking at so this is connected and what",
    "start": "628800",
    "end": "635839"
  },
  {
    "text": "I need to get from here actually is I'm going to run this scan so you'll",
    "start": "635839",
    "end": "641279"
  },
  {
    "text": "see this is all of the advertising Bluetooth devices probably mostly in this room",
    "start": "641279",
    "end": "648120"
  },
  {
    "text": "and I already have this paired with the bulb so it's not showing up in that list but what I had to find is the device ID",
    "start": "648120",
    "end": "657160"
  },
  {
    "text": "and the bulb actually broadcasts it own identifier as led blue so I was able to",
    "start": "657160",
    "end": "662360"
  },
  {
    "text": "just find the ID yes ah yes sorry um",
    "start": "662360",
    "end": "669040"
  },
  {
    "text": "maybe better okay thank you point it out",
    "start": "675279",
    "end": "681040"
  },
  {
    "text": "if I if I miss anything else please uh all right so I found this led blue in here and now I got to scroll to it again",
    "start": "681040",
    "end": "690000"
  },
  {
    "text": "and I was able to get its device ID which is this here so there's this application that comes with the bluesy U",
    "start": "690000",
    "end": "697320"
  },
  {
    "text": "Bluetooth stack that you can use called Gat",
    "start": "697320",
    "end": "702720"
  },
  {
    "text": "tool and again you had to build all this from Source but it's there so I'm going to run this in the interactive mode and",
    "start": "702920",
    "end": "709959"
  },
  {
    "text": "the ID of the device that's the uh the address for the",
    "start": "709959",
    "end": "716360"
  },
  {
    "text": "Bold so this is how I actually tell it I want to be interactive and I want to connect to that",
    "start": "716360",
    "end": "722600"
  },
  {
    "text": "device or well actually it's not connected yet it's it's uh preparing to communicate with that address but it's",
    "start": "722600",
    "end": "729519"
  },
  {
    "text": "not connected yet to connect it you have to actually tell it to connect and now",
    "start": "729519",
    "end": "734720"
  },
  {
    "text": "it has successfully connected to the bulb so now the Raspberry Pi has the CLI utility running and talking to the bulb",
    "start": "734720",
    "end": "740959"
  },
  {
    "text": "and through looking at documentation on Gat tool and how do I possibly do this",
    "start": "740959",
    "end": "746160"
  },
  {
    "text": "what I'm experimenting with is a command line here that's uh Char WR",
    "start": "746160",
    "end": "752279"
  },
  {
    "text": "CMD and in looking at how the the spec for this works all that you're doing is you're sending out uh to a particular",
    "start": "752279",
    "end": "759480"
  },
  {
    "text": "address and then you have the then that's your key and then the value that you want to go to the address and",
    "start": "759480",
    "end": "765360"
  },
  {
    "text": "there's chrite wreck which for some devices you write something and then it will respond back and in other cases",
    "start": "765360",
    "end": "772720"
  },
  {
    "text": "you're going to have things like this where you just fire and forget and um you know if you find specs for devices",
    "start": "772720",
    "end": "779160"
  },
  {
    "text": "that you're looking at which is pretty hard it seems in many cases uh you'll have better documentation on it tells",
    "start": "779160",
    "end": "785360"
  },
  {
    "text": "you what that is but this is just experimenting and figuring out what am I looking for here so so I'm expecting",
    "start": "785360",
    "end": "791160"
  },
  {
    "text": "that if I write this out something's going to happen so let's jump back over to uh wire shark here so I see this 0043",
    "start": "791160",
    "end": "800880"
  },
  {
    "text": "is the handle so I just type that in and I",
    "start": "800880",
    "end": "806360"
  },
  {
    "text": "don't know what's going to happen but I just you know seeing what what happens if I fire one of these packets off myself and CC",
    "start": "806360",
    "end": "814079"
  },
  {
    "text": "23 2333 all right so first time we'll see",
    "start": "814079",
    "end": "819399"
  },
  {
    "text": "what happens nothing happened well if this is the onof maybe that was the on right so",
    "start": "819399",
    "end": "827120"
  },
  {
    "text": "let's switch over to the other one here which is",
    "start": "827120",
    "end": "832440"
  },
  {
    "text": "2433 bulb went off that is so exciting every time I press the key and the bulb changes so",
    "start": "832680",
    "end": "840440"
  },
  {
    "text": "now let's try the other one again and see if it turns back on there we go so it's still doing the same thing it was",
    "start": "840440",
    "end": "845839"
  },
  {
    "text": "before when I set it with the app but um you know it it's just the onoff is different than the what is the bulb",
    "start": "845839",
    "end": "851639"
  },
  {
    "text": "doing right the connect to the so can you have multiple things connected",
    "start": "851639",
    "end": "857600"
  },
  {
    "text": "simultaneously to the no I shut the app off when I when I put the phone down",
    "start": "857600",
    "end": "863279"
  },
  {
    "text": "yeah so it sends the signal to tell the bulb to turn into that mode and the bulb is there now it's not a continuous",
    "start": "863279",
    "end": "869880"
  },
  {
    "text": "stream of in of updating the color all right so now let's go back",
    "start": "869880",
    "end": "876399"
  },
  {
    "text": "over to wire shark and let's go dig some more and see what else we can find so these all look like onof type of",
    "start": "876399",
    "end": "884959"
  },
  {
    "text": "things but when I get here I see something entirely new let's take this and see what",
    "start": "884959",
    "end": "891440"
  },
  {
    "text": "happens so I can copy that value because I don't want to type",
    "start": "891440",
    "end": "896759"
  },
  {
    "text": "that and it was the same hand I believe correct yes yeah so",
    "start": "896759",
    "end": "904519"
  },
  {
    "text": "now hang on doesn't paste across here very well",
    "start": "904519",
    "end": "909560"
  },
  {
    "text": "sometimes copy",
    "start": "909920",
    "end": "913839"
  },
  {
    "text": "value oh and you got to drop the colons out of um of this all right so let's",
    "start": "915680",
    "end": "923240"
  },
  {
    "text": "send that and see what happens all right we got a new color",
    "start": "923240",
    "end": "930600"
  },
  {
    "text": "let's go look through some of these further here so I see the same thing going on all",
    "start": "930639",
    "end": "937319"
  },
  {
    "text": "these keep digging down in here okay now I start to see some changes happening in",
    "start": "939720",
    "end": "946360"
  },
  {
    "text": "here let's take another one of these and see see what happens if I grab",
    "start": "946360",
    "end": "952920"
  },
  {
    "text": "this didn't like my pasting paste what is the",
    "start": "957600",
    "end": "965759"
  },
  {
    "text": "deal copy I did click copy value before",
    "start": "965759",
    "end": "971079"
  },
  {
    "text": "right all right so let's see what this one does well I don't notice that anything",
    "start": "980880",
    "end": "987519"
  },
  {
    "text": "changed",
    "start": "987519",
    "end": "990519"
  },
  {
    "text": "no it's slightly different see slightly different in here change did it okay",
    "start": "993000",
    "end": "1000199"
  },
  {
    "text": "let's go grab another one and see all right this has a nine in it which isn't in the other one so we'll see if we get",
    "start": "1000199",
    "end": "1006480"
  },
  {
    "text": "something all right copy you I did didn't I yeah yes that's what",
    "start": "1006480",
    "end": "1013160"
  },
  {
    "text": "I wanted paste okay",
    "start": "1013160",
    "end": "1020480"
  },
  {
    "text": "all right so let's see what happens here still only a slight color",
    "start": "1022079",
    "end": "1027120"
  },
  {
    "text": "change let's see if we can find something that looks much",
    "start": "1027120",
    "end": "1032678"
  },
  {
    "text": "different I could also just cheat and go to the end because you know I know the",
    "start": "1038199",
    "end": "1043600"
  },
  {
    "text": "answer all right we'll go with this one and if this doesn't get us enough of a color difference then I'll",
    "start": "1044400",
    "end": "1049640"
  },
  {
    "text": "just go to the solution",
    "start": "1049640",
    "end": "1053520"
  },
  {
    "text": "guide there we go now I got something that looks a little different so but as I look at this and I see you know I've",
    "start": "1061679",
    "end": "1068320"
  },
  {
    "text": "done a few different things I got some different colors well most of this looks exactly the same I really only see six",
    "start": "1068320",
    "end": "1076039"
  },
  {
    "text": "characters in here that are changing and uh you know if anybody's done color codes before you might recognize RGB are",
    "start": "1076039",
    "end": "1083400"
  },
  {
    "text": "going to represent themselves as six hex digits right so what if I just take that",
    "start": "1083400",
    "end": "1089000"
  },
  {
    "text": "and I say perhaps ff0000 will be",
    "start": "1089000",
    "end": "1096559"
  },
  {
    "text": "red and maybe 0000 FF z0 will be blue or green I",
    "start": "1096559",
    "end": "1105640"
  },
  {
    "text": "mean and this will will be blue so now we have successfully reverse",
    "start": "1105960",
    "end": "1112520"
  },
  {
    "text": "engineered the protocol for how we actually change the colors on this",
    "start": "1112520",
    "end": "1117799"
  },
  {
    "text": "bulb and there there were other things in here too because I did that um uh where I set it to that pulsating",
    "start": "1118159",
    "end": "1125200"
  },
  {
    "text": "mode of of yellow and stuff right um I'm probably not going to find those as you can see this log file is quite lengthy",
    "start": "1125200",
    "end": "1131480"
  },
  {
    "text": "um it's very noisy but I I hunted them down once before so I already have that in my",
    "start": "1131480",
    "end": "1137880"
  },
  {
    "text": "answer key uh as well but as you dig through here you'll see an entirely different packet",
    "start": "1137880",
    "end": "1143280"
  },
  {
    "text": "structure right it's not 56 and then all of that it's entirely different value um so we've got that part figured",
    "start": "1143280",
    "end": "1151640"
  },
  {
    "text": "out now and go back to my BNC all right I'm going to",
    "start": "1151640",
    "end": "1159600"
  },
  {
    "text": "disconnect okay any questions about any of that so far yes you said at the beginning that the",
    "start": "1163919",
    "end": "1171360"
  },
  {
    "text": "was already to the is that I already paired it earlier so it doesn't show in the",
    "start": "1171360",
    "end": "1178360"
  },
  {
    "text": "discovery list because it already knew it and was already paired to it how how",
    "start": "1178360",
    "end": "1183679"
  },
  {
    "text": "do you accomplish the um in the Bluetooth CTL which is a different CLI",
    "start": "1183679",
    "end": "1189640"
  },
  {
    "text": "utility than what I was just using I was just using Gat tool but in Bluetooth CTL you actually just say pair and then the",
    "start": "1189640",
    "end": "1196559"
  },
  {
    "text": "device ID it does doesn't do anything special all that happens is that that bluet Bluetooth CTL application if I",
    "start": "1196559",
    "end": "1203600"
  },
  {
    "text": "tell it to send a command it will just know exactly what to send it to that's it and I didn't unpair it and the key",
    "start": "1203600",
    "end": "1210440"
  },
  {
    "text": "thing there is that it keeps that information and the reason why I do that is because in some environments this one",
    "start": "1210440",
    "end": "1215640"
  },
  {
    "text": "wasn't too noisy right like I ran the scan and it only showed basically one page I've had some places before where",
    "start": "1215640",
    "end": "1221280"
  },
  {
    "text": "I've done this and it's actually crashed the pie because it was overloaded with too much data and it was trying you know",
    "start": "1221280",
    "end": "1227120"
  },
  {
    "text": "the scrolling just couldn't keep up it was it was a bad deal so that's why I do it that way that way I know exactly what",
    "start": "1227120",
    "end": "1233080"
  },
  {
    "text": "the IDE is but if you remain s of to your phone I know you close the app but",
    "start": "1233080",
    "end": "1238520"
  },
  {
    "text": "it doesn't matter that you got that so the bulb itself what happens is when you first turn on the bulb it has like a",
    "start": "1238520",
    "end": "1245200"
  },
  {
    "text": "five to 10c window where it will listen to um connect where it's in discovery",
    "start": "1245200",
    "end": "1250360"
  },
  {
    "text": "mode and it's broadcasting its availability and it will allow whatever the first thing that connects to it",
    "start": "1250360",
    "end": "1256200"
  },
  {
    "text": "it'll allow it to connect and and uh connecting is different than pairing which is also important connecting is",
    "start": "1256200",
    "end": "1262799"
  },
  {
    "text": "just I'm now I'm now telling you I'm going to send you commands pairing is uh",
    "start": "1262799",
    "end": "1268080"
  },
  {
    "text": "telling the host which is the Raspberry Pi to maintain that Affinity right remember it and in the future if if I",
    "start": "1268080",
    "end": "1275360"
  },
  {
    "text": "run Bluetooth CTL and it shows up it's already in its known history and it will just immediately grab it so that's the",
    "start": "1275360",
    "end": "1282200"
  },
  {
    "text": "subtle distinction there but the bulb will only allow One controller at a time so I had to actually close the app here",
    "start": "1282200",
    "end": "1289520"
  },
  {
    "text": "so that it would release it before I then could to come back over here and start that for it to pick it up does",
    "start": "1289520",
    "end": "1295760"
  },
  {
    "text": "that make sense anything else yeah um you mentioned you when you started you didn't have any prior knowledge of how",
    "start": "1295760",
    "end": "1302360"
  },
  {
    "text": "to connect all that stuff how long did it take rly to get to this point get to",
    "start": "1302360",
    "end": "1308279"
  },
  {
    "text": "this point um this was probably two to three weeks of off and on messing around",
    "start": "1308279",
    "end": "1314159"
  },
  {
    "text": "with it and um and I didn't even know that Bluetooth low energy had this as its underlying thing so I had a",
    "start": "1314159",
    "end": "1320200"
  },
  {
    "text": "Bluetooth low energy serial adapter as well and that serial adapter would see",
    "start": "1320200",
    "end": "1325360"
  },
  {
    "text": "the bulb I spent probably three or four days of that time thinking that maybe",
    "start": "1325360",
    "end": "1330720"
  },
  {
    "text": "the serial protocol is all that BL does this is before I bothered to go read the spec right uh and I'm trying to get the",
    "start": "1330720",
    "end": "1336760"
  },
  {
    "text": "serial um the serial link to connect to the bulb and it would connect but I could never do anything right and um so",
    "start": "1336760",
    "end": "1344799"
  },
  {
    "text": "that's that was kind of a dead end right I went down a couple of those dead ends before I finally got to the point where",
    "start": "1344799",
    "end": "1350200"
  },
  {
    "text": "it was okay let me go look through this you know 400 page spec for Bluetooth and",
    "start": "1350200",
    "end": "1355240"
  },
  {
    "text": "see what nuggets I can find that I can go then Google and find something else right so all in all this was this whole",
    "start": "1355240",
    "end": "1362279"
  },
  {
    "text": "thing was probably about a month of off andon work so the Raspberry Pi itself doesn't have Bluetooth when you you need",
    "start": "1362279",
    "end": "1368960"
  },
  {
    "text": "an adapt no the Raspberry Pi 3 has Bluetooth built on",
    "start": "1368960",
    "end": "1374799"
  },
  {
    "text": "right yep it's got Wi-Fi all you need was the Rasberry Pi you didn't need",
    "start": "1374799",
    "end": "1379919"
  },
  {
    "text": "extra correct yes yeah and and honestly the original incarnation of this was not with a Raspberry Pi it was with an Intel",
    "start": "1379919",
    "end": "1386200"
  },
  {
    "text": "Edison uh but the Intel Edison has been discontinued so I ped it all over to the Raspberry Pi and so that's where we are",
    "start": "1386200",
    "end": "1392960"
  },
  {
    "text": "it is a lot easier um to use the Raspberry Pi than it is to use an Intel Edison because the an Edison is just a",
    "start": "1392960",
    "end": "1399080"
  },
  {
    "text": "microcontroller basically this is actually a full functioning computer now the downside is I had to have this",
    "start": "1399080",
    "end": "1405679"
  },
  {
    "text": "network adapter and V and C into it because I can't just have some other you know connection and send serial terminal",
    "start": "1405679",
    "end": "1412600"
  },
  {
    "text": "right so did I see another hand",
    "start": "1412600",
    "end": "1417799"
  },
  {
    "text": "okay all right so now we've got all that working let's jump over to team City here real",
    "start": "1417799",
    "end": "1424000"
  },
  {
    "text": "quick and go to my browser all right so team City I just",
    "start": "1424000",
    "end": "1430320"
  },
  {
    "text": "have one dummy build out here um as I said I'm running this in Docker and I've",
    "start": "1430320",
    "end": "1435799"
  },
  {
    "text": "got there there are actually two separate instan is running on here how many Docker users do we have okay so I'm going to probably gloss",
    "start": "1435799",
    "end": "1443720"
  },
  {
    "text": "over Docker then uh or skip it so I have Team city server which is a separate",
    "start": "1443720",
    "end": "1449440"
  },
  {
    "text": "instance or separate container from the agent on jenin they're actually all together in one if you're just doing it",
    "start": "1449440",
    "end": "1455360"
  },
  {
    "text": "in a a standard um install with Jenkins on here so servers running agents",
    "start": "1455360",
    "end": "1462720"
  },
  {
    "text": "running and then as I mentioned that web hook plugin so you install that plugin",
    "start": "1462720",
    "end": "1468360"
  },
  {
    "text": "which is just download the zip and upload it in from the web interface and that's it and then this is set up to",
    "start": "1468360",
    "end": "1475960"
  },
  {
    "text": "have all builds and um I'm using the bonjour protocol here so I can just plug",
    "start": "1475960",
    "end": "1481440"
  },
  {
    "text": "things in and it magically works and uh and it's the local extension on here then is anybody familiar with",
    "start": "1481440",
    "end": "1488919"
  },
  {
    "text": "that uh so basically on a Mac at least it's built in and Raspberry Pi and a",
    "start": "1488919",
    "end": "1495200"
  },
  {
    "text": "handful of other um like uh printers will often do it as well and they just sort of Auto recognize each other like I",
    "start": "1495200",
    "end": "1501080"
  },
  {
    "text": "don't have to deal with the IP addresses or anything I don't have any DHCP running on here you just plug it in and",
    "start": "1501080",
    "end": "1506840"
  },
  {
    "text": "and it works so you just have to know what it's calling itself that's it and to do that",
    "start": "1506840",
    "end": "1514080"
  },
  {
    "text": "you do ARP so if you do go to the I'll show you real quick because it's actually kind of",
    "start": "1514080",
    "end": "1519200"
  },
  {
    "text": "fun so if you do this ARP on here um shouldn't show up in that",
    "start": "1519200",
    "end": "1526679"
  },
  {
    "text": "list what's that uh well it's not I'm not seeing it",
    "start": "1526679",
    "end": "1532360"
  },
  {
    "text": "at the moment so uh that may not be helpful all right I don't know why it's",
    "start": "1532360",
    "end": "1538080"
  },
  {
    "text": "not showing up but that's not the point of this talk so forget I said that but that's usually what you do you",
    "start": "1538080",
    "end": "1544240"
  },
  {
    "text": "do the get the ARP list and then it'll tell you the name that thing is broadcasting itself as",
    "start": "1544240",
    "end": "1549320"
  },
  {
    "text": "so uh okay so let's jump back over here and so you've seen the team team City",
    "start": "1549320",
    "end": "1555000"
  },
  {
    "text": "set up and it's just going to send that web hook call off to raspberry local and that's all hooked up",
    "start": "1555000",
    "end": "1560240"
  },
  {
    "text": "here and then let's take a look at some of this code in team",
    "start": "1560240",
    "end": "1566000"
  },
  {
    "text": "City so and this is sloppy hacky you know toy",
    "start": "1566000",
    "end": "1573480"
  },
  {
    "text": "right so how that's how this is sometimes so we get this set up in here and as I",
    "start": "1573480",
    "end": "1580799"
  },
  {
    "text": "mentioned Noble is I'll show you the package list all right so Noble is the",
    "start": "1580799",
    "end": "1587679"
  },
  {
    "text": "I'll increase the size okay it it was working just very",
    "start": "1587679",
    "end": "1597000"
  },
  {
    "text": "slowly is that good enough in the back [Laughter]",
    "start": "1597760",
    "end": "1608320"
  },
  {
    "text": "okay all right I'm gonna go down one so that this is",
    "start": "1608480",
    "end": "1615440"
  },
  {
    "text": "navigable maybe is that a 5 two or three this is a",
    "start": "1616600",
    "end": "1623080"
  },
  {
    "text": "three B all right Noble is the package that",
    "start": "1623080",
    "end": "1631240"
  },
  {
    "text": "you need to do the Bluetooth communication and it just wraps and capsules things nice and easily for you",
    "start": "1631240",
    "end": "1637039"
  },
  {
    "text": "and then I've got express running on here for web server and then I also have socket iio on here um and I'm basically",
    "start": "1637039",
    "end": "1644600"
  },
  {
    "text": "using that so that I could simplify some of the work of when a bulb connects and I'm keeping track of the list of known",
    "start": "1644600",
    "end": "1651240"
  },
  {
    "text": "bulbs and I want to send that off to the client I didn't want to deal with writing a rest interface to all of that so I just thre socket in there and just",
    "start": "1651240",
    "end": "1657960"
  },
  {
    "text": "throw over the list it's just a little easier so let's go look at the code here",
    "start": "1657960",
    "end": "1665960"
  },
  {
    "text": "on the server now all right so this gets set",
    "start": "1665960",
    "end": "1671480"
  },
  {
    "text": "up and important things along the way",
    "start": "1671480",
    "end": "1679039"
  },
  {
    "text": "let me run this and I'll have the bulb connect to it because the bulb is blue right now you do have to run this as",
    "start": "1679039",
    "end": "1685559"
  },
  {
    "text": "route to access um the Bluetooth device through Noble I suppose you don't have",
    "start": "1685559",
    "end": "1691600"
  },
  {
    "text": "to I'm sure that I could spend the work of figuring out what exact permission settings need to be to make it work but",
    "start": "1691600",
    "end": "1698080"
  },
  {
    "text": "that's more work than it's",
    "start": "1698080",
    "end": "1700880"
  },
  {
    "text": "worth all right so what should happen is this should come up",
    "start": "1705480",
    "end": "1711240"
  },
  {
    "text": "and okay so the bulb was because nothing was connected to it it was still broadcasting its Discovery packet and",
    "start": "1711240",
    "end": "1719440"
  },
  {
    "text": "the uh the web server here through Noble caught the packet and immediately grabbed a hold of the bulb and what I",
    "start": "1719440",
    "end": "1725760"
  },
  {
    "text": "had it do uh when it first connects is set the bulb to Green just so that I had a visual indicator that things were",
    "start": "1725760",
    "end": "1731080"
  },
  {
    "text": "working right so that's what happened here okay so let's talk",
    "start": "1731080",
    "end": "1736399"
  },
  {
    "text": "through how some of this works I'm going to close this",
    "start": "1736399",
    "end": "1741720"
  },
  {
    "text": "uh window on the left here if I can figure out what that thing's called on the first first oh yes that's",
    "start": "1741720",
    "end": "1750960"
  },
  {
    "text": "right thank you okay so let's scroll down through here",
    "start": "1750960",
    "end": "1758080"
  },
  {
    "text": "there's discover all right there's a wire up method that I have called setup bulb stuff and uh basically you know",
    "start": "1758080",
    "end": "1766080"
  },
  {
    "text": "naming things is hard right and all this is essentially an async wrapper so that I could make awaits on the things that",
    "start": "1766080",
    "end": "1771399"
  },
  {
    "text": "needed to happen to actually have this work so uh so the Discover so I'm doing",
    "start": "1771399",
    "end": "1777120"
  },
  {
    "text": "Noble on the Discover event go you know use this discover method State change so",
    "start": "1777120",
    "end": "1784360"
  },
  {
    "text": "there there are some idiosyncrasies you're going to run into with every platform and device you use on the Raspberry Pi the state change method",
    "start": "1784360",
    "end": "1790760"
  },
  {
    "text": "actually never gets fired because it's always in scanning uh when when I start this up but on the Intel Edison it",
    "start": "1790760",
    "end": "1796840"
  },
  {
    "text": "wasn't in scanning it would be in powered on would be its state so when",
    "start": "1796840",
    "end": "1802279"
  },
  {
    "text": "this would start up I would need it to actually uh set up the state change method which it then would be signaled",
    "start": "1802279",
    "end": "1809519"
  },
  {
    "text": "powered on as the state and then I actually had to tell it to do to do the start scanning before discoveries could",
    "start": "1809519",
    "end": "1815320"
  },
  {
    "text": "occur so there are probably going to be other idiosyncrasies with every platform that you run into out there um but this",
    "start": "1815320",
    "end": "1821519"
  },
  {
    "text": "code all works on the pi 3B at least so that Discovery method let's go",
    "start": "1821519",
    "end": "1828919"
  },
  {
    "text": "to it which was right up here so when this gets",
    "start": "1828919",
    "end": "1836799"
  },
  {
    "text": "discovered you'll see what what happens with that Discovery method is everything that's broadcasting is discovered so all",
    "start": "1836799",
    "end": "1844880"
  },
  {
    "text": "of your SmartWatches that you've got on right now or fitbits or you know anything in this room the things that",
    "start": "1844880",
    "end": "1849919"
  },
  {
    "text": "you saw in that list when I said scan on it's picking all those up but obviously they're not all Bluetooth bulbs so the",
    "start": "1849919",
    "end": "1856200"
  },
  {
    "text": "only thing I could find is a good indicator was in the name of the device it starts with LED blue so I'm just",
    "start": "1856200",
    "end": "1861480"
  },
  {
    "text": "looking for the string and if it says it's an LED blue then I want to grab it and connect to it and as soon as it",
    "start": "1861480",
    "end": "1868000"
  },
  {
    "text": "connects I have it right out that it discovered the bulb to the console but my console is actually off the screen",
    "start": "1868000",
    "end": "1873639"
  },
  {
    "text": "because of sizing and projectors and things that you think we would have figured out by now uh so I connect to",
    "start": "1873639",
    "end": "1880240"
  },
  {
    "text": "that bulb and now I've got it and we'll go to the send command method in just a minute um but I sent the command with",
    "start": "1880240",
    "end": "1887559"
  },
  {
    "text": "the color green so that the Bold turns green and I can identify it and then on each individual",
    "start": "1887559",
    "end": "1894000"
  },
  {
    "text": "peripheral you have States and events that you can manage and set up and so I",
    "start": "1894000",
    "end": "1899799"
  },
  {
    "text": "set up the the disconnect method or event on there so that anytime a bulb disconnects uh it'll actually tell me",
    "start": "1899799",
    "end": "1906399"
  },
  {
    "text": "write that off the console and I don't know if it's I'm doing something dumb or",
    "start": "1906399",
    "end": "1912120"
  },
  {
    "text": "or or if it's a crappy manufactured bulb but it disconnects a lot for no reason and and um so what you'll also see in a",
    "start": "1912120",
    "end": "1919960"
  },
  {
    "text": "minute is in my sin command uh the very first thing I do is if it's not connected connect it and then send the",
    "start": "1919960",
    "end": "1926200"
  },
  {
    "text": "command uh and it works you know but I think that it's just noisy right like uh",
    "start": "1926200",
    "end": "1931639"
  },
  {
    "text": "you know when we're in I'm at my house and everything's running on 2.4 gigahertz and uh you know conferences",
    "start": "1931639",
    "end": "1937240"
  },
  {
    "text": "and you're all wearing devices I think there's just a lot of noise and uh the Bluetooth low energy by definition is",
    "start": "1937240",
    "end": "1942639"
  },
  {
    "text": "low energy so I think it just gets interfered with easily and disconnects",
    "start": "1942639",
    "end": "1949080"
  },
  {
    "text": "all right so send command so we already saw that we were writing out to that",
    "start": "1950880",
    "end": "1958120"
  },
  {
    "text": "handle and I'm writing out whatever I pass in from that when I make the send command call just whatever that buffer",
    "start": "1958120",
    "end": "1964720"
  },
  {
    "text": "uh hex address is now what you'll notice in here is that I have a different",
    "start": "1964720",
    "end": "1969880"
  },
  {
    "text": "handle on this one and that's because um we bought multiple of these and had them",
    "start": "1969880",
    "end": "1975840"
  },
  {
    "text": "all running off of one Raspberry Pi and what I discovered was that the you saw",
    "start": "1975840",
    "end": "1982799"
  },
  {
    "text": "this was led blue- s and then other digits right well if it's",
    "start": "1982799",
    "end": "1989000"
  },
  {
    "text": "-8 it's a different handle so and again I don't know how to find any sort of",
    "start": "1989000",
    "end": "1994159"
  },
  {
    "text": "other identifying characteristics to tell me like what handle I should use so this was just trial and error and I",
    "start": "1994159",
    "end": "1999639"
  },
  {
    "text": "figured that out so I just stuck that in here that's my logic identifier if it's a-7 on the address we use 43 if it's D 8",
    "start": "1999639",
    "end": "2007440"
  },
  {
    "text": "we use 2 e as the address to write to but everything else is exactly the same and that just comes off of the um",
    "start": "2007440",
    "end": "2015760"
  },
  {
    "text": "this peripheral that Discovery broadcast is the is called an advertisement and",
    "start": "2015760",
    "end": "2021360"
  },
  {
    "text": "it's the local name off of that advertisement what's the why wouldn't",
    "start": "2021360",
    "end": "2029080"
  },
  {
    "text": "you use the the micle for that if you",
    "start": "2029080",
    "end": "2034639"
  },
  {
    "text": "know those like set of",
    "start": "2034639",
    "end": "2038960"
  },
  {
    "text": "they not different between why wouldn't you you already connect to them once to get all this",
    "start": "2040320",
    "end": "2047120"
  },
  {
    "text": "information why wouldn't you just use the oh I understand because then I would have to catalog that list right I'd have",
    "start": "2047120",
    "end": "2053878"
  },
  {
    "text": "to have a lookup table and and um I was looking for something that was one",
    "start": "2053879",
    "end": "2059560"
  },
  {
    "text": "abstraction away from that so that if we just bought another bulb and hooked it up hopefully it would be able to classify it based on that identifier and",
    "start": "2059560",
    "end": "2066398"
  },
  {
    "text": "I don't know this this abstraction could be wrong right I could get another bulb and it's 70 and it doesn't follow the",
    "start": "2066399",
    "end": "2072280"
  },
  {
    "text": "same rules as the other sevens that we had um but that was just the one common element that I could find uh between the",
    "start": "2072280",
    "end": "2078919"
  },
  {
    "text": "ones that worked was that first digit was a seven versus an eight and you know the company was just",
    "start": "2078919",
    "end": "2084520"
  },
  {
    "text": "so helpful at telling me anything at all so it was all just",
    "start": "2084520",
    "end": "2089520"
  },
  {
    "text": "guesswork all right so I think that's basically the stuff that's important in here um on the client side let's go take",
    "start": "2090240",
    "end": "2099000"
  },
  {
    "text": "a look at that actually let's just go to the web page and run this so we can see what's happening here so this is all I",
    "start": "2099000",
    "end": "2104839"
  },
  {
    "text": "have on here nothing fancy and all I was able to do is just write out or all I",
    "start": "2104839",
    "end": "2109920"
  },
  {
    "text": "was doing is just writing out the rest of that name of the bulb and then the problem is there's nothing on the bulb",
    "start": "2109920",
    "end": "2115960"
  },
  {
    "text": "itself that actually tells me what its Bluetooth identity would be or anything like that so I added this identify",
    "start": "2115960",
    "end": "2122640"
  },
  {
    "text": "function on here so that it just causes it to cycle through colors which to kind of address the thing we're talking about",
    "start": "2122640",
    "end": "2128880"
  },
  {
    "text": "earlier I'm not sending a stream of colors that is just one of the methods that the bulb had and I'll show you what",
    "start": "2128880",
    "end": "2135280"
  },
  {
    "text": "that is the the the hex value for that um but you can change it to just like seven color cycle right and there's one",
    "start": "2135280",
    "end": "2142400"
  },
  {
    "text": "command you issue and then it does that and then I have a timeout that gets set and at the end of that two or three",
    "start": "2142400",
    "end": "2147880"
  },
  {
    "text": "seconds or whatever it just reverts back to green so that we added that in there so we could actually identify which bulb",
    "start": "2147880",
    "end": "2153359"
  },
  {
    "text": "was which and then um I'm using the team apis to get the list of build projects",
    "start": "2153359",
    "end": "2160440"
  },
  {
    "text": "and I can pick the ones I want and then assign them together and now they're now",
    "start": "2160440",
    "end": "2165720"
  },
  {
    "text": "they have a relationship um and I have a config file that all this stuff can be put in ahead of time as well although",
    "start": "2165720",
    "end": "2171760"
  },
  {
    "text": "that is essentially lookup table then um but uh that way we could have it just outo when it boots up pick it up and and",
    "start": "2171760",
    "end": "2177920"
  },
  {
    "text": "use that so now let's go to Team City and let's see it all happen are you",
    "start": "2177920",
    "end": "2183359"
  },
  {
    "text": "ready all right so all that I have this build doing is sleeping for 10",
    "start": "2183359",
    "end": "2190640"
  },
  {
    "text": "seconds the just a command line sleep for 10 seconds and if I want it to pass",
    "start": "2190800",
    "end": "2197200"
  },
  {
    "text": "I have it not Echo fail and if I want it to fail I Echo fail so should we do fail",
    "start": "2197200",
    "end": "2203760"
  },
  {
    "text": "first all right yeah we got to do red green",
    "start": "2203760",
    "end": "2208559"
  },
  {
    "text": "right so I'm going to kick this build off now one thing I want you to notice is watch the difference between the",
    "start": "2209720",
    "end": "2216079"
  },
  {
    "text": "display and the bulb in terms of the sequencing and timing I just clicked",
    "start": "2216079",
    "end": "2224318"
  },
  {
    "text": "run so pulsing blue is the running",
    "start": "2227880",
    "end": "2233039"
  },
  {
    "text": "status and we've we had fail so what this this information here",
    "start": "2236200",
    "end": "2242520"
  },
  {
    "text": "told me is that the agent is what actually is sending the commands to uh",
    "start": "2242520",
    "end": "2248079"
  },
  {
    "text": "to team City from that web hook plugin and when I went and checked their do their documentation their code that's",
    "start": "2248079",
    "end": "2253760"
  },
  {
    "text": "what I found in there as well so there it's just interesting the lag between the UI update right and the bulb the",
    "start": "2253760",
    "end": "2259560"
  },
  {
    "text": "bulb is more accurate than the UI and at this point when it goes red",
    "start": "2259560",
    "end": "2267079"
  },
  {
    "text": "what do you say who broke the",
    "start": "2267079",
    "end": "2272400"
  },
  {
    "text": "bill all right now we'll go back in and go green",
    "start": "2272960",
    "end": "2278599"
  },
  {
    "text": "that's the team building part of this you get to chastise each other a little bit and you",
    "start": "2282680",
    "end": "2288000"
  },
  {
    "text": "know all right here we",
    "start": "2293000",
    "end": "2296640"
  },
  {
    "text": "go now we're agreen you can clap it's",
    "start": "2305520",
    "end": "2313610"
  },
  {
    "text": "[Applause] okay all right so same stuff should work",
    "start": "2313610",
    "end": "2319400"
  },
  {
    "text": "with Jenkins there's a Jenkins notification plugin uh I've started setting it up but I don't use Jenkins I",
    "start": "2319400",
    "end": "2325599"
  },
  {
    "text": "just want to use team City and I haven't been motivated enough to finish it so it's there someone finish it and issue a",
    "start": "2325599",
    "end": "2330960"
  },
  {
    "text": "poll request to me and I'll bring in your code uh but this is basically what you need the the real the real hiccup or",
    "start": "2330960",
    "end": "2338240"
  },
  {
    "text": "goofy part here is uh with the way that Jenkin Cascades all the jobs in the API",
    "start": "2338240",
    "end": "2343960"
  },
  {
    "text": "call um you got to flatten it all out and I just didn't want to do all the work of it and I didn't want to bring in low Dash either so it's a whole",
    "start": "2343960",
    "end": "2351240"
  },
  {
    "text": "deal now as I mentioned earlier I pulled this log from an Android device but I",
    "start": "2351240",
    "end": "2358000"
  },
  {
    "text": "don't use an Android device I use an iPhone so what am I going to do other",
    "start": "2358000",
    "end": "2363520"
  },
  {
    "text": "than borrow one from somebody if I need to C capture traffic here or what if I",
    "start": "2363520",
    "end": "2369040"
  },
  {
    "text": "want to capture traffic between devices that don't actually have an interface of some kind an app for me anyway if it's",
    "start": "2369040",
    "end": "2374920"
  },
  {
    "text": "just devices that are talking to each other and doing something and I want to get in between there and make my own things happen My Own Way well that's",
    "start": "2374920",
    "end": "2382359"
  },
  {
    "text": "when we go to hard mode and hard mode is",
    "start": "2382359",
    "end": "2388799"
  },
  {
    "text": "using interesting that should say ubertooth I'm not sure why it doesn't",
    "start": "2389480",
    "end": "2394960"
  },
  {
    "text": "this is an ubertooth that no that says hard mode and",
    "start": "2394960",
    "end": "2402599"
  },
  {
    "text": "then like an hour ago that said ubertooth so but this is an ubertooth and what an",
    "start": "2402599",
    "end": "2409680"
  },
  {
    "text": "ubertooth is is uh you'll notice not Bluetooth in the name right well that's",
    "start": "2409680",
    "end": "2414800"
  },
  {
    "text": "because to call yourself or call a device Bluetooth uh you have to go through a certification and compliance",
    "start": "2414800",
    "end": "2420119"
  },
  {
    "text": "process and or else they sue you for copyright infringement that's how they enforce the that you follow their spec",
    "start": "2420119",
    "end": "2425920"
  },
  {
    "text": "if you're going to call yourself that but an ubertooth is not Bluetooth and it ignores one key important part of the",
    "start": "2425920",
    "end": "2431839"
  },
  {
    "text": "spec on purpose and that is that Bluetooth devices are in the chip itself",
    "start": "2431839",
    "end": "2437440"
  },
  {
    "text": "not supposed to pass on traffic that is not intended for their address so the",
    "start": "2437440",
    "end": "2443599"
  },
  {
    "text": "traffic in the air that's going between your devices my phone hearing it and the",
    "start": "2443599",
    "end": "2448960"
  },
  {
    "text": "chip itself says not for me and does not send it on to the OS and the software",
    "start": "2448960",
    "end": "2455000"
  },
  {
    "text": "the ubertooth says I'm going to just take everything so you can capture the",
    "start": "2455000",
    "end": "2460160"
  },
  {
    "text": "traffic between the iPhone app and the light bulb on a side Snoop right so that",
    "start": "2460160",
    "end": "2467920"
  },
  {
    "text": "like wire sh inis what's that is that like wire shk inous mode yes exactly",
    "start": "2467920",
    "end": "2474560"
  },
  {
    "text": "yeah but so wire shark and promiscuous mode can only operate that way if your network infrastructure actually allows",
    "start": "2474560",
    "end": "2481200"
  },
  {
    "text": "that right your wire shark is just listen and so is your OS everything on your machine Any packet that comes in",
    "start": "2481200",
    "end": "2488200"
  },
  {
    "text": "your physical link your OS is picking up in some fashion but in most networks",
    "start": "2488200",
    "end": "2494920"
  },
  {
    "text": "especially if you have like a regulated environment I work in a healthcare environment and so we have everything locked down to where not a single packet",
    "start": "2494920",
    "end": "2501880"
  },
  {
    "text": "is ever going to show up at your Port that the network infrastructure has not determined is actually destined for your",
    "start": "2501880",
    "end": "2508560"
  },
  {
    "text": "Mac address right so that's the subtle difference in there all right so let's hook this",
    "start": "2508560",
    "end": "2515240"
  },
  {
    "text": "up I'm going to go ahead and unplug the",
    "start": "2515240",
    "end": "2520960"
  },
  {
    "text": "uh actually yeah I'm going to unplug it I only have two USB ports on here",
    "start": "2520960",
    "end": "2529760"
  },
  {
    "text": "so all right so I have the ubertooth plugged in now the way that you use this so",
    "start": "2536000",
    "end": "2541760"
  },
  {
    "text": "again you got to build from Source because um in fact I actually even wondered I'm not going to say I'm not",
    "start": "2541760",
    "end": "2547960"
  },
  {
    "text": "going to say the rest you they can't legally distribute the binary that's the thing right there are a number of um",
    "start": "2547960",
    "end": "2555960"
  },
  {
    "text": "there are a number of software things like uh like pgp I think as well they can't legally allow a binary of of pgp",
    "start": "2555960",
    "end": "2563559"
  },
  {
    "text": "to move from the border of one country to another because of treaties between all these countries so if you're going",
    "start": "2563559",
    "end": "2569319"
  },
  {
    "text": "to use pgp you actually have to build it from Source uh if most of the time for that kind of reason that's why so all",
    "start": "2569319",
    "end": "2575800"
  },
  {
    "text": "those weird weird things ubertooth you have to build from source for that same reason the source code is protected by",
    "start": "2575800",
    "end": "2581839"
  },
  {
    "text": "at least in the US First Amendment and many other countries have similar things that protect it but the binaries",
    "start": "2581839",
    "end": "2587000"
  },
  {
    "text": "themselves you you can't distribute legally so so you get this and then now you have",
    "start": "2587000",
    "end": "2594839"
  },
  {
    "text": "to go to wire shark we have to change things up a",
    "start": "2594839",
    "end": "2599920"
  },
  {
    "text": "bit um first thing you got to do so Uber is hooked up um on Linux based OS and",
    "start": "2601319",
    "end": "2609400"
  },
  {
    "text": "Mac is BSD based the same thing uh you can just make a generic file handle that acts as a first in first out buffer and",
    "start": "2609400",
    "end": "2617480"
  },
  {
    "text": "so if you do make bio you can specify any file that you want and this",
    "start": "2617480",
    "end": "2625200"
  },
  {
    "text": "actually just gives you a handle on the OS a device description um that you",
    "start": "2625200",
    "end": "2630440"
  },
  {
    "text": "write data into and anything else that's captured it and listening will get that data back out okay okay so it's just a",
    "start": "2630440",
    "end": "2636720"
  },
  {
    "text": "first and first out buffer so make 5o temp pipe is what I've got on here I've already done that and it and that pipe",
    "start": "2636720",
    "end": "2643000"
  },
  {
    "text": "will will persist as well so it's already there so now I can come to wire",
    "start": "2643000",
    "end": "2648760"
  },
  {
    "text": "shark and you have to go to manage interfaces and pipes and then you tell",
    "start": "2648760",
    "end": "2655760"
  },
  {
    "text": "it the path to that named pipe right so temp pipe is in there and then now I'm",
    "start": "2655760",
    "end": "2660920"
  },
  {
    "text": "going to pick that pipe all right so it's now wi shark is",
    "start": "2660920",
    "end": "2666599"
  },
  {
    "text": "now listening to that device handle and it's just going to capture whatever comes through so now I can come over",
    "start": "2666599",
    "end": "2673960"
  },
  {
    "text": "to and I wrote uh wrote it down ahead of time",
    "start": "2673960",
    "end": "2679520"
  },
  {
    "text": "over here so now I can execute I didn't hit the Mac copy I hit",
    "start": "2679520",
    "end": "2685200"
  },
  {
    "text": "the Linux copy have to keep changing back and forth okay so that that wrote",
    "start": "2685200",
    "end": "2690240"
  },
  {
    "text": "and already had the enter on there so it immediately started and this is all of the traffic happening in here right now",
    "start": "2690240",
    "end": "2696000"
  },
  {
    "text": "now and it's just writing out to that buffer and um and it's getting passed over to wire shark so wire shark is just",
    "start": "2696000",
    "end": "2702920"
  },
  {
    "text": "capturing everything right so go ahead and uh you know use",
    "start": "2702920",
    "end": "2707960"
  },
  {
    "text": "your banking apps and buy things you know all that kind of stuff",
    "start": "2707960",
    "end": "2713119"
  },
  {
    "text": "right all right so I'm going to stop that now as you see the traffic here is immense right and it's it's going to be",
    "start": "2713319",
    "end": "2719760"
  },
  {
    "text": "uh useless to sort through so I have a capture that I've did at home where I had low traffic and I'll switch to that",
    "start": "2719760",
    "end": "2724800"
  },
  {
    "text": "in just a second but I want to talk about this just for a moment more uh when you capture this the way Bluetooth",
    "start": "2724800",
    "end": "2731079"
  },
  {
    "text": "low energy does that whole Discovery advertising and um and uh and connecting",
    "start": "2731079",
    "end": "2736920"
  },
  {
    "text": "process there are three different channels that it broadcasts that advertisement on then when and you",
    "start": "2736920",
    "end": "2743640"
  },
  {
    "text": "discover from then when a connect occurs and the host issues a connect command",
    "start": "2743640",
    "end": "2748680"
  },
  {
    "text": "they jump to a different um frequency so there are three address three three",
    "start": "2748680",
    "end": "2753720"
  },
  {
    "text": "radio frequencies that it uses and then it'll jump to one of like 16 I think um",
    "start": "2753720",
    "end": "2758920"
  },
  {
    "text": "that it actually has that active communication on so what this is this is defaulting to like address 37 and you",
    "start": "2758920",
    "end": "2766680"
  },
  {
    "text": "have 38 and 39 that are also um advertising addresses uh so this is just picking up the advertisements from 37",
    "start": "2766680",
    "end": "2774040"
  },
  {
    "text": "when you when I first run it I can tell it to do 38 or 39 but you can only do one at a time on an ubertooth then what",
    "start": "2774040",
    "end": "2780000"
  },
  {
    "text": "happens is as soon as it observes a connect command occur it it follows that",
    "start": "2780000",
    "end": "2787119"
  },
  {
    "text": "that's um I think it was in the command over here the- F on there that tells it",
    "start": "2787119",
    "end": "2793599"
  },
  {
    "text": "to follow a connect so it's listening for whatever is happening up 37 as soon",
    "start": "2793599",
    "end": "2799319"
  },
  {
    "text": "as it sees a connect it observes what address they have agreed to move to and",
    "start": "2799319",
    "end": "2804359"
  },
  {
    "text": "it will follow them to that address and now it can capture all the traffic between them so probably what we see",
    "start": "2804359",
    "end": "2810880"
  },
  {
    "text": "here is either all advertisements which I see lots of things that say broadcast so probably all advertisements um but it",
    "start": "2810880",
    "end": "2818119"
  },
  {
    "text": "could have also had it could have observed a connect and followed and then this is the actual traffic over the air",
    "start": "2818119",
    "end": "2824359"
  },
  {
    "text": "between them now this isn't just Bluetooth low energy this is Bluetooth period uh so blow Bluetooth low energy",
    "start": "2824359",
    "end": "2830920"
  },
  {
    "text": "has no encryption standards that are baked in you kind of got to write your own Bluetooth does so what you'll get in",
    "start": "2830920",
    "end": "2837480"
  },
  {
    "text": "here if you're actually capturing um Bluetooth traffic in general between you know a lot of devices it will be",
    "start": "2837480",
    "end": "2843520"
  },
  {
    "text": "encrypted traffic uh of course people have written the software to decrypt it and hack it and figure it all out right",
    "start": "2843520",
    "end": "2848839"
  },
  {
    "text": "so that's out there too um but anyway just giving you that if you get this and you're listening and you're having",
    "start": "2848839",
    "end": "2854200"
  },
  {
    "text": "problems go check um into the how do I change the address that it listens on Discovery and how do I get it to follow",
    "start": "2854200",
    "end": "2860839"
  },
  {
    "text": "because that's the stuff that you got to mess with so I'll switch over here real quick",
    "start": "2860839",
    "end": "2866720"
  },
  {
    "text": "to this Uber pcap file is what this one is if I can get it",
    "start": "2866720",
    "end": "2874720"
  },
  {
    "text": "to stop trying to rename the file and okay",
    "start": "2874720",
    "end": "2880240"
  },
  {
    "text": "so this is the traffic that I captured from home where it was a nice quiet environment and picked up the",
    "start": "2880240",
    "end": "2887559"
  },
  {
    "text": "communication on um right into this bulb and you'll",
    "start": "2887559",
    "end": "2893559"
  },
  {
    "text": "see if I come down in here further we see these same right commands",
    "start": "2893559",
    "end": "2898599"
  },
  {
    "text": "again right and this was captured with my iPhone talking directly to the bulb",
    "start": "2898599",
    "end": "2904119"
  },
  {
    "text": "and an ubertooth just listening on the side not involved in the communication at all and just pick up what's happening",
    "start": "2904119",
    "end": "2909800"
  },
  {
    "text": "and you can reverse engineer that protocol from that so any questions about",
    "start": "2909800",
    "end": "2916079"
  },
  {
    "text": "that any questions about any of this",
    "start": "2916640",
    "end": "2923240"
  },
  {
    "text": "yes one more time did you ever consider",
    "start": "2926119",
    "end": "2930880"
  },
  {
    "text": "gra ah I did actually that was one of the first dead end or the dead ends I went down so uh the APK that this",
    "start": "2933040",
    "end": "2940599"
  },
  {
    "text": "company put out for um for the app is obfuscated so I was able to get it to uh",
    "start": "2940599",
    "end": "2948720"
  },
  {
    "text": "I was able to get it into Java but everything was such a mess I couldn't make heads or tails of it because it was",
    "start": "2948720",
    "end": "2955160"
  },
  {
    "text": "all just um you know it was all obfuscated I had no naming for anything it it was just terrible to try to",
    "start": "2955160",
    "end": "2962480"
  },
  {
    "text": "reverse I'm not a Java developer I'm a net in Java scrip guy so perhaps if",
    "start": "2962480",
    "end": "2967559"
  },
  {
    "text": "you're better with Java and know the jvm better and all that stuff it might be more manageable for somebody but that's",
    "start": "2967559",
    "end": "2973839"
  },
  {
    "text": "not my expertise yes this",
    "start": "2973839",
    "end": "2979920"
  },
  {
    "text": "is so I mean in principle yes all the same stuff would work uh I don't have",
    "start": "2981559",
    "end": "2987760"
  },
  {
    "text": "the answer for how do you go about capturing that traffic right like but I guarantee you if you spend 10 minutes on",
    "start": "2987760",
    "end": "2993280"
  },
  {
    "text": "Google you'll find some device that somebody has out there that is designed to let you do things you're not supposed",
    "start": "2993280",
    "end": "2999559"
  },
  {
    "text": "to do and capture all of the traffic from Wi-Fi and they probably don't call it you know Wi-Fi because that's",
    "start": "2999559",
    "end": "3004839"
  },
  {
    "text": "copyright protected by i e they probably call it like spyfy or something I'm just making this up uh",
    "start": "3004839",
    "end": "3012280"
  },
  {
    "text": "but anything else do you want to see it",
    "start": "3012760",
    "end": "3019160"
  },
  {
    "text": "again I'll hook up the uh got this is why I didn't unplug the on",
    "start": "3020720",
    "end": "3026680"
  },
  {
    "text": "there Network there we",
    "start": "3026680",
    "end": "3030480"
  },
  {
    "text": "go all right here we go hopefully everything magically",
    "start": "3042319",
    "end": "3048640"
  },
  {
    "text": "restored itself when I unplugged it and plugged it back in it didn't oh you know what I didn't",
    "start": "3048640",
    "end": "3055599"
  },
  {
    "text": "start the web server again did I because I stopped it a minute",
    "start": "3055599",
    "end": "3062280"
  },
  {
    "text": "ago actually could have been that that caught the bulb in the advertising uh",
    "start": "3068280",
    "end": "3074760"
  },
  {
    "text": "and have to relink",
    "start": "3074760",
    "end": "3078240"
  },
  {
    "text": "it",
    "start": "3084359",
    "end": "3087359"
  },
  {
    "text": "okay there we go bold",
    "start": "3094079",
    "end": "3097000"
  },
  {
    "text": "connected what is happening all right we'll forget that",
    "start": "3101280",
    "end": "3107520"
  },
  {
    "text": "last demo we'll pretend it all right well uh if you have any questions you can come and talk to me um",
    "start": "3107520",
    "end": "3113760"
  },
  {
    "text": "and thanks everybody for coming really appreciate have a good [Applause]",
    "start": "3113760",
    "end": "3124559"
  },
  {
    "text": "one yes it is I guess I the last slide I'll throw up there real fast uh it's on",
    "start": "3125319",
    "end": "3131440"
  },
  {
    "text": "GitHub my code build light Jesse Phelps build light um how much",
    "start": "3131440",
    "end": "3139160"
  }
]