[
  {
    "text": "hey folks um hopefully you are here to hear me talk about um",
    "start": "8080",
    "end": "14400"
  },
  {
    "text": "managing asynchronous apis and by what i mean by that well i mean that we",
    "start": "14400",
    "end": "20160"
  },
  {
    "text": "need to talk a little bit about the idea of if we have asynchronous apis and explain",
    "start": "20160",
    "end": "26240"
  },
  {
    "text": "what i mean by that in a minute how do we manage them i talk a lot at various conferences about building them once",
    "start": "26240",
    "end": "31840"
  },
  {
    "text": "you've got one how are you going to own it",
    "start": "31840",
    "end": "36239"
  },
  {
    "text": "okay who am i so my name is ian cooper some of you may know me from talks about test driven development or event driven",
    "start": "36880",
    "end": "43520"
  },
  {
    "text": "architecture i've been doing this a while i used to have hair on my head and i used to have a beard that had some",
    "start": "43520",
    "end": "50879"
  },
  {
    "text": "dark color in it but the point i really try and draw out is i'm just like you i'm just another",
    "start": "50879",
    "end": "58000"
  },
  {
    "text": "developer i'm not particularly smarter because i happen to be on this stage i'm just sharing experience",
    "start": "58000",
    "end": "64320"
  },
  {
    "text": "um you know we are all of us capable of doing all of the stuff that i'm talking about today so",
    "start": "64320",
    "end": "70640"
  },
  {
    "text": "please don't feel it's kind of expert to learner here i work on an open source project if you",
    "start": "70640",
    "end": "77200"
  },
  {
    "text": "are a net developer particularly we provide a messaging framework um we cover the functionality of",
    "start": "77200",
    "end": "83600"
  },
  {
    "text": "something like mediator but we then also let you work out of process uh and using messaging transport",
    "start": "83600",
    "end": "90159"
  },
  {
    "text": "uh we've got a v9 release coming out a couple of weeks with better support for outboxes and things like entity",
    "start": "90159",
    "end": "95759"
  },
  {
    "text": "framework call if you're a python developer we have a python version but it's languishing a bit and needs some love",
    "start": "95759",
    "end": "102560"
  },
  {
    "text": "his agenda that's probably a bit wrong uh i'm knocking off a deck over there because i've got some av issues",
    "start": "102560",
    "end": "108079"
  },
  {
    "text": "um but we'll talk about endpoints what are they and what i mean by endpoints we'll",
    "start": "108079",
    "end": "113200"
  },
  {
    "text": "talk about how we discover endpoints and then we'll talk about there's more than just facing kpi some",
    "start": "113200",
    "end": "119040"
  },
  {
    "text": "things that help us with the process of endpoint discovery all right",
    "start": "119040",
    "end": "126240"
  },
  {
    "text": "so first of all i think i should probably define what i mean by an asynchronous api or",
    "start": "126880",
    "end": "132239"
  },
  {
    "text": "uh what are we talking about so a synchronous conversation",
    "start": "132239",
    "end": "137599"
  },
  {
    "text": "is one where both parties are present",
    "start": "137599",
    "end": "142440"
  },
  {
    "text": "and it fails if that's not true if you can't pick up the second you know the phone call and",
    "start": "142640",
    "end": "149360"
  },
  {
    "text": "answer that synchronous conversation will fail it requires both parties to be present when it happens",
    "start": "149360",
    "end": "155599"
  },
  {
    "text": "typical example a phone call right i pick up the phone and i phone you that conversation is synchronous",
    "start": "155599",
    "end": "162000"
  },
  {
    "text": "grpc http those kind of protocols i tend to be synchronous right i call you the",
    "start": "162000",
    "end": "168720"
  },
  {
    "text": "server needs to be online and present",
    "start": "168720",
    "end": "172239"
  },
  {
    "text": "an asynchronous conversation is one where both parties don't need to be present",
    "start": "174720",
    "end": "180959"
  },
  {
    "text": "what happens is you deliver to some kind of mailbox a message queue is really just a mailbox",
    "start": "181680",
    "end": "188959"
  },
  {
    "text": "and the work sits there until the person effectively who is the receiver decides they want to pick it up",
    "start": "188959",
    "end": "195440"
  },
  {
    "text": "and process it and that obviously has lots of useful properties",
    "start": "195440",
    "end": "200720"
  },
  {
    "text": "the receiver doesn't have to actually be up when you send the message and the receiver can throttle they can",
    "start": "200720",
    "end": "206879"
  },
  {
    "text": "decide when and at what rate they want to consume messages",
    "start": "206879",
    "end": "212319"
  },
  {
    "text": "snail mail is the classic example but we all use messaging apps today like you know whatsapp signal whatever your",
    "start": "212319",
    "end": "218480"
  },
  {
    "text": "preference is the only person that phones me",
    "start": "218480",
    "end": "223680"
  },
  {
    "text": "is my mum everybody else just sends me a whatsapp message or a signal message or",
    "start": "223680",
    "end": "229440"
  },
  {
    "text": "a text and they do that because it's really inconvenient to call",
    "start": "229440",
    "end": "234720"
  },
  {
    "text": "me and i'm not there that you can't get anything done right you send me a message i can just pick it up and deal",
    "start": "234720",
    "end": "241120"
  },
  {
    "text": "with it when i'm ready um and my mom likes to hear my voice right but everybody else just sends me a",
    "start": "241120",
    "end": "247680"
  },
  {
    "text": "message and the same is really true of our software today",
    "start": "247680",
    "end": "253360"
  },
  {
    "text": "it is a lot more robust to send somebody a message and let them put it in an outbox let them get to it",
    "start": "253360",
    "end": "260160"
  },
  {
    "text": "when they can let them process it when they have availability to do so then it is to demand that the other",
    "start": "260160",
    "end": "266639"
  },
  {
    "text": "party is up and running when you send them a message and that's why we try and push particularly in",
    "start": "266639",
    "end": "273040"
  },
  {
    "text": "microservices world i shift to asynchronous apis a lot",
    "start": "273040",
    "end": "278080"
  },
  {
    "text": "this talk is not about why you should use asynchronous apis however with a lot of other talks i give others to give",
    "start": "278080",
    "end": "283600"
  },
  {
    "text": "about that but it's more about once you have them how do you how do you look after them",
    "start": "283600",
    "end": "288960"
  },
  {
    "text": "how do you own them all right one of the words i'm going to use here is end point what do i mean by",
    "start": "288960",
    "end": "294800"
  },
  {
    "text": "an endpoint i'm actually going to use a definition that comes from microsoft and from the days of windows communication",
    "start": "294800",
    "end": "301919"
  },
  {
    "text": "foundation i think it's a pretty good definition it's places where messages are sent or received that's what we mean by the end",
    "start": "301919",
    "end": "308080"
  },
  {
    "text": "point your application has an end point you may be using it to send messages you may be using it to receive messages you",
    "start": "308080",
    "end": "314639"
  },
  {
    "text": "may be using it to do both in an app quite often our app sends and receive messages right",
    "start": "314639",
    "end": "319680"
  },
  {
    "text": "and by that really as an end point we don't necessarily have to mean an asynchronous protocol it could well be a synchronous protocol",
    "start": "319680",
    "end": "326639"
  },
  {
    "text": "and generally when we think about an endpoint we want to know a number of things",
    "start": "326639",
    "end": "331759"
  },
  {
    "text": "we want to know what's the message that i'm going to",
    "start": "331759",
    "end": "337039"
  },
  {
    "text": "send or receive on this end point",
    "start": "337039",
    "end": "341360"
  },
  {
    "text": "if i am the receiver i might want to know where it's coming from if i'm the sender i might want to",
    "start": "342320",
    "end": "348720"
  },
  {
    "text": "know where it's going to and i'm likely want to know how i send it and by how we mean things like",
    "start": "348720",
    "end": "356080"
  },
  {
    "text": "am i sending this over http am i sending this basically via kafka am i sending this",
    "start": "356080",
    "end": "361759"
  },
  {
    "text": "via amqp",
    "start": "361759",
    "end": "367039"
  },
  {
    "text": "if i have those pieces of information i know enough to communicate",
    "start": "367039",
    "end": "373599"
  },
  {
    "text": "let's take a little detour for a moment into the main drum design as an idea",
    "start": "376400",
    "end": "382879"
  },
  {
    "text": "so in the main drum design we have basically a domain right currently i work for adjusted takeaway so i work in",
    "start": "383280",
    "end": "390000"
  },
  {
    "text": "the domain of delivering takeaway food to your doorstep and within that domain",
    "start": "390000",
    "end": "396479"
  },
  {
    "text": "we may identify what we call subdomains little bits of that puzzle right so i tend to focus sub domains on",
    "start": "396479",
    "end": "403039"
  },
  {
    "text": "business processes so it might be checkout order fulfill order place order",
    "start": "403039",
    "end": "409680"
  },
  {
    "text": "um provide menu right those kind of business processes",
    "start": "409680",
    "end": "417199"
  },
  {
    "text": "and their sub domains it's easier for us to reason about and think about those right",
    "start": "417199",
    "end": "423520"
  },
  {
    "text": "and what we tend to do as software engineers or architects",
    "start": "424240",
    "end": "430240"
  },
  {
    "text": "is we model that sub domain we say let's model this particular sub domain and let's write some code to implement the",
    "start": "430240",
    "end": "436400"
  },
  {
    "text": "sub-domain let's create some schemers to implement that sub-domain and let's have a language we use within that sub-domain",
    "start": "436400",
    "end": "442560"
  },
  {
    "text": "and the product team to talk about the concepts let's create a shared understanding of that subdomain",
    "start": "442560",
    "end": "450280"
  },
  {
    "text": "now sometimes we don't get the world right and our bounded contexts don't align very well",
    "start": "451520",
    "end": "456560"
  },
  {
    "text": "with our sub domains that's generally a historical situation where the sub domains change our view the subdomains",
    "start": "456560",
    "end": "462639"
  },
  {
    "text": "change we've got legacy bounded context and mapping gets more complicated but let's assume we have a better world",
    "start": "462639",
    "end": "468639"
  },
  {
    "text": "where our sub domains and our bounded contexts align quite well for the moment and typically",
    "start": "468639",
    "end": "474800"
  },
  {
    "text": "our microservices represent the sub domains on microservices and therefore bounded context don't get that",
    "start": "474800",
    "end": "481840"
  },
  {
    "text": "wrong by the way it's not really about microservices being bounded contexts when we talk about what microservices",
    "start": "481840",
    "end": "488319"
  },
  {
    "text": "target it's really about microservices targeting sub-domains and thereby being",
    "start": "488319",
    "end": "493520"
  },
  {
    "text": "a bounded context all right",
    "start": "493520",
    "end": "499599"
  },
  {
    "text": "we name about the context right so i've got two here restaurant management in other words that talks about getting restaurants onto our platform restaurant",
    "start": "500240",
    "end": "507360"
  },
  {
    "text": "availability is the restaurant open is the restaurant serving food how long will it take the restaurant to serve",
    "start": "507360",
    "end": "513279"
  },
  {
    "text": "food all right um has the restaurant had some terrible kitchen disaster and needs to close for",
    "start": "513279",
    "end": "519680"
  },
  {
    "text": "half an hour okay",
    "start": "519680",
    "end": "525680"
  },
  {
    "text": "and you'll notice we may have shared concepts",
    "start": "525680",
    "end": "531120"
  },
  {
    "text": "restaurant management is going to tell restaurant availability about restaurants in their opening hours etc",
    "start": "531120",
    "end": "538560"
  },
  {
    "text": "and the question really is how these two begin to communicate how are we going to communicate between",
    "start": "539760",
    "end": "546080"
  },
  {
    "text": "restaurant management restaurant availability about life and things right and particularly how we're going to",
    "start": "546080",
    "end": "551519"
  },
  {
    "text": "communicate about shared concepts like restaurant",
    "start": "551519",
    "end": "556160"
  },
  {
    "text": "because we have different models i'm moderating restaurant availability",
    "start": "557360",
    "end": "563120"
  },
  {
    "text": "i'm modeling restaurant management they're two different teams two different sets of code two different",
    "start": "563120",
    "end": "568320"
  },
  {
    "text": "schemas probably two different product owners and we think about things differently in restaurant availability i",
    "start": "568320",
    "end": "573760"
  },
  {
    "text": "really care a lot about hours i care about the hard problems about scheduling during time zone changes and",
    "start": "573760",
    "end": "580080"
  },
  {
    "text": "restaurant management i care about getting people on board signing a contract who's the contact detail where",
    "start": "580080",
    "end": "585120"
  },
  {
    "text": "they're located right so we have to kind of come up with some",
    "start": "585120",
    "end": "590160"
  },
  {
    "text": "agreement about information that we'll share",
    "start": "590160",
    "end": "594240"
  },
  {
    "text": "and we tend to think about the idea of there being an upstream and a downstream",
    "start": "595920",
    "end": "601120"
  },
  {
    "text": "team and what do we mean by that well generally in a relationship somebody is",
    "start": "601120",
    "end": "608560"
  },
  {
    "text": "producing information and somebody's consuming it and the producer is kind of upstreaming the consumers downstream and",
    "start": "608560",
    "end": "614240"
  },
  {
    "text": "the reason we talk about those that particular metaphor is if you are upstream of somebody like you're a city",
    "start": "614240",
    "end": "621120"
  },
  {
    "text": "and you pollute the water the poor old people downstream have to deal",
    "start": "621120",
    "end": "627200"
  },
  {
    "text": "with your behavior so the problem is",
    "start": "627200",
    "end": "632480"
  },
  {
    "text": "there's no real constraint on the upstream team on what they do but the downstream team continuously",
    "start": "632480",
    "end": "638880"
  },
  {
    "text": "suffer as a result so we try and do is say well we should have a customer supplier relationship",
    "start": "638880",
    "end": "647839"
  },
  {
    "text": "people upstream should be suppliers people downstream should be their customers",
    "start": "647839",
    "end": "654399"
  },
  {
    "text": "and the suppliers should try to look after and take care of their customers they shouldn't abuse their privilege of being upstream",
    "start": "654399",
    "end": "660560"
  },
  {
    "text": "they should say hey how would you what quality would you like for your water",
    "start": "660560",
    "end": "665920"
  },
  {
    "text": "should we color it today i don't know whatever all right",
    "start": "665920",
    "end": "671760"
  },
  {
    "text": "so the bad world is called conformance",
    "start": "673360",
    "end": "678720"
  },
  {
    "text": "and that says the upstream team just says you know what i've got a data structure around",
    "start": "678720",
    "end": "683839"
  },
  {
    "text": "restaurants i'm just going to publish that",
    "start": "683839",
    "end": "689800"
  },
  {
    "text": "from our point of view talking about a tinklist conversations they're publishing an event",
    "start": "690240",
    "end": "696000"
  },
  {
    "text": "but it could be this is generally applicable to all kind of interactions between two services",
    "start": "696000",
    "end": "701200"
  },
  {
    "text": "if i just publish it i publish my internal structure downstream teams start consuming it they",
    "start": "701200",
    "end": "706959"
  },
  {
    "text": "conform to the structure basically the upstream team uses one day the upstream team says oh you",
    "start": "706959",
    "end": "713839"
  },
  {
    "text": "know i think we should change the way that id works um",
    "start": "713839",
    "end": "719839"
  },
  {
    "text": "we switched from using sql server to dynamo and it turns out you know that old incrementing identity value we use",
    "start": "719839",
    "end": "725680"
  },
  {
    "text": "is not going to work for us let's have a good somebody goes yeah let's make that change a few days later upstream team",
    "start": "725680",
    "end": "732079"
  },
  {
    "text": "changes their event model yeah hey downstream teams start saying everything's broken we don't understand",
    "start": "732079",
    "end": "737760"
  },
  {
    "text": "why what happened right a downstream team is dependent on the",
    "start": "737760",
    "end": "742800"
  },
  {
    "text": "schema that the upstream team uses internally they'll just break",
    "start": "742800",
    "end": "748160"
  },
  {
    "text": "so the problem with this conformance model is it's really antithetical to one of the key properties of microservices which is independent deployability",
    "start": "749120",
    "end": "757440"
  },
  {
    "text": "the restaurant management team ought to be able to change their internal code base they ought to be able to change",
    "start": "757440",
    "end": "764720"
  },
  {
    "text": "uh their that the schema in the data store it's not good to change their data store",
    "start": "764720",
    "end": "770639"
  },
  {
    "text": "and it shouldn't have an effect on restaurant availability they should be able to just keep working",
    "start": "770639",
    "end": "775680"
  },
  {
    "text": "along just as they did yesterday getting useful restaurant information",
    "start": "775680",
    "end": "780800"
  },
  {
    "text": "so the first rule really is we don't want to publish our internal representations",
    "start": "780800",
    "end": "786720"
  },
  {
    "text": "straight onto the wire because the problem is",
    "start": "786720",
    "end": "791839"
  },
  {
    "text": "we will break our consumers now what the downstream coup team could",
    "start": "791839",
    "end": "798959"
  },
  {
    "text": "do is introduce an anti-corruption layer they say all right we'll write something defensive it'll listen to whatever we",
    "start": "798959",
    "end": "805680"
  },
  {
    "text": "get from upstream and it will convert it into the representation that we want to",
    "start": "805680",
    "end": "812240"
  },
  {
    "text": "see and we want to depend upon so we'll take whatever version and restaurant they're giving us and we'll",
    "start": "812240",
    "end": "817600"
  },
  {
    "text": "convert it into something looks like the restaurant we expect oh they've changed the id value fine we'll we'll cope on our side we'll",
    "start": "817600",
    "end": "824240"
  },
  {
    "text": "do something in our anti-corruption layer to put in an id number that basically is we",
    "start": "824240",
    "end": "830079"
  },
  {
    "text": "can understand and that works but it's not very effective right",
    "start": "830079",
    "end": "836800"
  },
  {
    "text": "because every downstream team that listens to restaurant management is now writing an anti-corruption lad to",
    "start": "836800",
    "end": "842399"
  },
  {
    "text": "protect themselves against the bad behavior of the folks upstream so it's a great defensive measure if we don't",
    "start": "842399",
    "end": "848560"
  },
  {
    "text": "control restaurant management if they're outside of our purview they're a third party that we don't trust very much",
    "start": "848560",
    "end": "855360"
  },
  {
    "text": "but if they're part of our organization they can behave better",
    "start": "855360",
    "end": "860079"
  },
  {
    "text": "so what we do is we say they're a supplier we should have a contract with them",
    "start": "861279",
    "end": "869440"
  },
  {
    "text": "and the contract agrees what they will supply to us",
    "start": "869839",
    "end": "874880"
  },
  {
    "text": "and they will agree what the model of a restaurant is that they will give us",
    "start": "875519",
    "end": "883120"
  },
  {
    "text": "and they will agree that that model won't just change every five minutes",
    "start": "883760",
    "end": "889760"
  },
  {
    "text": "but they'll try and produce changes that are backwards compatible we will agree probably what we call a",
    "start": "889760",
    "end": "895920"
  },
  {
    "text": "tolerant reader that means if somebody adds a field we don't depend on that's okay we can",
    "start": "895920",
    "end": "902240"
  },
  {
    "text": "ignore that maybe we'll agree with the upstream team that there are certain defaults we can",
    "start": "902240",
    "end": "907519"
  },
  {
    "text": "use sensibly and in the event that the information is not there we'll just swap in one of our defaults",
    "start": "907519",
    "end": "913199"
  },
  {
    "text": "and that allows the upstream team to make some changes they can add new fields for new customers right",
    "start": "913199",
    "end": "920160"
  },
  {
    "text": "we'll just ignore those but otherwise we try and remain consistent",
    "start": "920160",
    "end": "926079"
  },
  {
    "text": "and if someone's going to create a breaking chains like changing identifier from an integer to a string",
    "start": "926079",
    "end": "933120"
  },
  {
    "text": "we'll have a discussion about how best to manage that we'll have to version the contract",
    "start": "933120",
    "end": "938560"
  },
  {
    "text": "we'll have to come up with some approach like providing both identifiers for a period of time until we can all move",
    "start": "938560",
    "end": "943839"
  },
  {
    "text": "over but it's a contract and it's a process of negotiation and agreement between two parties",
    "start": "943839",
    "end": "951399"
  },
  {
    "text": "and the thing is it frees the upstream team restaurant management can now change their internals as much as they",
    "start": "954320",
    "end": "960560"
  },
  {
    "text": "like without fear that they're going to break everyone downstream because they're continuing to",
    "start": "960560",
    "end": "966240"
  },
  {
    "text": "honor the contract",
    "start": "966240",
    "end": "969639"
  },
  {
    "text": "and we talk about this as necessary coupling we all",
    "start": "972560",
    "end": "978000"
  },
  {
    "text": "as software engineers and architects i'm sure um recognize that what we want is high",
    "start": "978000",
    "end": "984160"
  },
  {
    "text": "cohesion and low coupling right particularly if we have kind of micro services we recognize the goal is low",
    "start": "984160",
    "end": "989199"
  },
  {
    "text": "coupling i want to release my micro service without talking to you about that release so we recognize you know we don't want",
    "start": "989199",
    "end": "995839"
  },
  {
    "text": "too much coupling but some coupling isn't is necessary right if i don't couple at all",
    "start": "995839",
    "end": "1002160"
  },
  {
    "text": "well no one's using my service it's not doing anything right no one can talk to me",
    "start": "1002160",
    "end": "1007759"
  },
  {
    "text": "and i'm in perfect isolation i'm probably not offering a lot of value so folks want to talk to me so there's a",
    "start": "1007759",
    "end": "1014320"
  },
  {
    "text": "certain amount of necessary coupling you have to talk to me to get my job done we're going to have to agree to",
    "start": "1014320",
    "end": "1020560"
  },
  {
    "text": "couple so we want to manage that coupling",
    "start": "1020560",
    "end": "1026558"
  },
  {
    "text": "and we manage that kelvin by thinking about it as a contract we've taken this risk the decision to",
    "start": "1026559",
    "end": "1032959"
  },
  {
    "text": "couple to you hey we'll do that by contract so it won't change that stuff",
    "start": "1032959",
    "end": "1038000"
  },
  {
    "text": "because we know that people could couple to it and therefore we want to manage their ability to change so we won't keep",
    "start": "1038000",
    "end": "1044240"
  },
  {
    "text": "forcing changes on them so we can talk about basically creating",
    "start": "1044240",
    "end": "1050480"
  },
  {
    "text": "some kind of habitable relationship with both the supplier and the consumer we have a contract",
    "start": "1050480",
    "end": "1056320"
  },
  {
    "text": "and that contract allows us both to survive the fact that we've coupled together",
    "start": "1056320",
    "end": "1061600"
  },
  {
    "text": "anyone familiar with promise theory can understand that essentially what's happening is that we can think of the",
    "start": "1061600",
    "end": "1067360"
  },
  {
    "text": "micro service as kind of a super agent it's able to make promises about its own behavior and it can say i can make",
    "start": "1067360",
    "end": "1074080"
  },
  {
    "text": "promises to you contracts about what i will expose in the future",
    "start": "1074080",
    "end": "1082720"
  },
  {
    "text": "and an end point is really just this contract that i am making",
    "start": "1084320",
    "end": "1090320"
  },
  {
    "text": "to other services about what i'm going to provide",
    "start": "1090320",
    "end": "1097679"
  },
  {
    "text": "and really it consists of a contract a binding and an address sometimes in wcf where we",
    "start": "1098000",
    "end": "1104559"
  },
  {
    "text": "used to call it the abc's of a contract",
    "start": "1104559",
    "end": "1109640"
  },
  {
    "text": "remember we said basically uh where messages should be sent how they should be sent and what they look like what",
    "start": "1112400",
    "end": "1117440"
  },
  {
    "text": "they look like is the contract where they should be sent is the address and the binding is how they should be",
    "start": "1117440",
    "end": "1123440"
  },
  {
    "text": "sent okay i thought another little slide there",
    "start": "1123440",
    "end": "1130080"
  },
  {
    "text": "okay",
    "start": "1130320",
    "end": "1133320"
  },
  {
    "text": "i i i will move on a little bit i may have a need to just change an av issue in a second with",
    "start": "1143360",
    "end": "1150640"
  },
  {
    "text": "the glass in the second hour if i get to it i will uh you may have the current version so",
    "start": "1150640",
    "end": "1158720"
  },
  {
    "text": "all right",
    "start": "1158720",
    "end": "1161880"
  },
  {
    "text": "one of the questions then i might want to ask is",
    "start": "1168080",
    "end": "1172799"
  },
  {
    "text": "how do i discover these endpoints",
    "start": "1173919",
    "end": "1178279"
  },
  {
    "text": "someone documents my their contract and there's a service say i need to know about",
    "start": "1184480",
    "end": "1190080"
  },
  {
    "text": "restaurants where am i going to find that information",
    "start": "1190080",
    "end": "1196080"
  },
  {
    "text": "now lots of orgs typical problem spaces",
    "start": "1197760",
    "end": "1202880"
  },
  {
    "text": "i go on slack and i ask everybody i said anyone know who creates restaurants",
    "start": "1202880",
    "end": "1210080"
  },
  {
    "text": "because i can't find where it is and i need a restaurant for my service or the other thing typically that",
    "start": "1210880",
    "end": "1216640"
  },
  {
    "text": "happens in august is someone goes okay i'll just search our enterprise github and see if i can find messages entitled",
    "start": "1216640",
    "end": "1222559"
  },
  {
    "text": "restaurants that'll be what i need to do to solve this problem",
    "start": "1222559",
    "end": "1227760"
  },
  {
    "text": "and as you can imagine that's not really a perfect world right",
    "start": "1230720",
    "end": "1236480"
  },
  {
    "text": "if i am the provider of a message i'm going to have a similar problem",
    "start": "1237200",
    "end": "1244880"
  },
  {
    "text": "my problem is going to be i don't know who consumes my messages",
    "start": "1246720",
    "end": "1252320"
  },
  {
    "text": "i know that i produce this message which tells me that the restaurant hours have changed",
    "start": "1252960",
    "end": "1258559"
  },
  {
    "text": "but who consumes it it might be nice to know that sometimes now i don't want to couple to them",
    "start": "1258559",
    "end": "1264240"
  },
  {
    "text": "that's certainly a bad thing right but what i do want to do",
    "start": "1264240",
    "end": "1270480"
  },
  {
    "text": "is sometimes say well hey have i got some consumers of this message",
    "start": "1270480",
    "end": "1277840"
  },
  {
    "text": "that's a little bit of a problem right because",
    "start": "1283280",
    "end": "1289480"
  },
  {
    "text": "where am i going to find it again the problem seems to come down to this usually most organizations",
    "start": "1290320",
    "end": "1298240"
  },
  {
    "text": "what i'm going to do is go on to slack and ask a question and say hey everybody",
    "start": "1298240",
    "end": "1304799"
  },
  {
    "text": "can you tell me who consumes my message can you tell me",
    "start": "1304799",
    "end": "1312400"
  },
  {
    "text": "if you use it and that's not really that useful right",
    "start": "1313919",
    "end": "1319520"
  },
  {
    "text": "so if the only way we are documenting our messages is to document them by essentially",
    "start": "1319520",
    "end": "1326000"
  },
  {
    "text": "putting the information on our github repo in a markdown file where we kind of say oh here's our message structure or",
    "start": "1326000",
    "end": "1333039"
  },
  {
    "text": "oh here basically is the code that represents the endpoint it's very difficult for us to",
    "start": "1333039",
    "end": "1338640"
  },
  {
    "text": "communicate with other people",
    "start": "1338640",
    "end": "1341840"
  },
  {
    "text": "germany people need to know a number of things they want to know what is the content type of our message and probably what they also want to know what the",
    "start": "1343919",
    "end": "1349919"
  },
  {
    "text": "encoding is as well okay",
    "start": "1349919",
    "end": "1356399"
  },
  {
    "text": "they may want to know what's the schema of the message",
    "start": "1356559",
    "end": "1363520"
  },
  {
    "text": "what does it look like what's the shape of it what are its fields we probably also want to know what",
    "start": "1363520",
    "end": "1369840"
  },
  {
    "text": "metadata has been supplied what matters we mean the headers so we may have header information which",
    "start": "1369840",
    "end": "1375120"
  },
  {
    "text": "helps us process the message we haven't defined that",
    "start": "1375120",
    "end": "1381120"
  },
  {
    "text": "it's going to be really hard for us to basically work with those messages",
    "start": "1381120",
    "end": "1386279"
  },
  {
    "text": "we may want to know what protocol we need to use to talk about it do you talk kafka do you talk sns",
    "start": "1388240",
    "end": "1396000"
  },
  {
    "text": "do you talk amqp how can i talk to you",
    "start": "1396000",
    "end": "1401280"
  },
  {
    "text": "all these pieces of information are some something we're going to have to discover in order to use your service",
    "start": "1401679",
    "end": "1409039"
  },
  {
    "text": "so we can think about our endpoint which we defined as basically these abcs right",
    "start": "1409440",
    "end": "1414640"
  },
  {
    "text": "i need to know the contract i need to know the binding i need to know the address",
    "start": "1414640",
    "end": "1419919"
  },
  {
    "text": "and we can say basically we're going to need to document our message the thing that we send or receive",
    "start": "1419919",
    "end": "1425279"
  },
  {
    "text": "we're going to need to document probably both the headers and the payload of that message what headers do you have",
    "start": "1425279",
    "end": "1431679"
  },
  {
    "text": "what what do they contain do you have tracing information look at what is the content type",
    "start": "1431679",
    "end": "1438559"
  },
  {
    "text": "um what is the content encoding do you have a message id do you have some kind of correlation id do you tell",
    "start": "1438559",
    "end": "1444000"
  },
  {
    "text": "us where you replied to on reply messages we're going to understand the channel",
    "start": "1444000",
    "end": "1451279"
  },
  {
    "text": "where does this message travel channels in messaging uh quite often sort of a pipe between the producer and",
    "start": "1451279",
    "end": "1459039"
  },
  {
    "text": "consumer over which stuff flows in a single direction and they're quite often given a logical address and in most",
    "start": "1459039",
    "end": "1465039"
  },
  {
    "text": "messaging platforms we think about a topic or a routine key so a mqp091",
    "start": "1465039",
    "end": "1470159"
  },
  {
    "text": "rabbit is a routine key in kafka or sns it's a topic right where am i sending",
    "start": "1470159",
    "end": "1475360"
  },
  {
    "text": "this where can you subscribe to it how could you possibly listen to the message",
    "start": "1475360",
    "end": "1481120"
  },
  {
    "text": "and what's the binding right if i'm going to listen to this message on this channel and pull it off",
    "start": "1481120",
    "end": "1486480"
  },
  {
    "text": "what do i need to do you i need to use kafka do i use google pub sub right you need to document all those",
    "start": "1486480",
    "end": "1492720"
  },
  {
    "text": "things all right you just give me a second i'm going to",
    "start": "1492720",
    "end": "1498480"
  },
  {
    "text": "get uh just upload a different",
    "start": "1498480",
    "end": "1503520"
  },
  {
    "text": "a later version of this presentation because he's so the av is not working within a laptop",
    "start": "1503520",
    "end": "1509039"
  },
  {
    "text": "so he's got my deck over there and i just need to get him to start downloading a new",
    "start": "1509039",
    "end": "1515200"
  },
  {
    "text": "version if you give me a second i apologize for interruption",
    "start": "1515200",
    "end": "1521640"
  },
  {
    "text": "oh okay",
    "start": "1548320",
    "end": "1551799"
  },
  {
    "text": "all right see me two seconds while i get him to do the update and then",
    "start": "1572159",
    "end": "1577679"
  },
  {
    "text": "i will have i'm just missing a couple of slides that i want you to see it will take me two seconds to get this",
    "start": "1577679",
    "end": "1583120"
  },
  {
    "text": "guy to do it",
    "start": "1583120",
    "end": "1585600"
  },
  {
    "text": "sorry i think i've got a slightly older version can you just get to that github and keep her if you just do",
    "start": "1589600",
    "end": "1595520"
  },
  {
    "text": "search for github in cooper just touch it just search githubby and keeper i can find",
    "start": "1595520",
    "end": "1602440"
  },
  {
    "text": "yeah and i should have a newer version i just uploaded it",
    "start": "1615840",
    "end": "1621679"
  },
  {
    "text": "the time",
    "start": "1622720",
    "end": "1625960"
  },
  {
    "text": "it's just the managing async for you guys and for managing yep",
    "start": "1632960",
    "end": "1640760"
  },
  {
    "text": "she just committed it one minute ago yeah that's one minute ago just download it click the down button",
    "start": "1643039",
    "end": "1648240"
  },
  {
    "text": "to the the download because it's a binary uh cert then you just play that one",
    "start": "1648240",
    "end": "1653520"
  },
  {
    "text": "and that'll be the correct version thank you",
    "start": "1653520",
    "end": "1657840"
  },
  {
    "text": "all right it's amazing isn't it quite how",
    "start": "1659360",
    "end": "1665039"
  },
  {
    "text": "we've reached 2021 but we still don't really have uh",
    "start": "1665039",
    "end": "1670559"
  },
  {
    "text": "but av can still be a trial for us all all right",
    "start": "1670559",
    "end": "1676720"
  },
  {
    "text": "hopefully you get a nice um recap as it speeds through so you can all go wow fantastic ian",
    "start": "1676880",
    "end": "1682880"
  },
  {
    "text": "remember to put a recap into his talk so that when i was confused i could see all the slides was passed",
    "start": "1682880",
    "end": "1690640"
  },
  {
    "text": "um you regret animation when you have to whiz through everything at high speed",
    "start": "1690640",
    "end": "1696799"
  },
  {
    "text": "don't you you didn't see that slide but don't",
    "start": "1696799",
    "end": "1702080"
  },
  {
    "text": "worry it's just basically saying that we need to document async asynchronous apis as well as synchronous",
    "start": "1702080",
    "end": "1707120"
  },
  {
    "text": "apis and that's why i knew i had a slightly older version of the deck",
    "start": "1707120",
    "end": "1713600"
  },
  {
    "text": "all right there you go",
    "start": "1714559",
    "end": "1720320"
  },
  {
    "text": "so one of the major games in town is 18 kpi 18 kpi represents basically uh an",
    "start": "1720320",
    "end": "1725919"
  },
  {
    "text": "emerging standard for documenting your endpoints it's recently become part of the linux foundation so and it has a",
    "start": "1725919",
    "end": "1732880"
  },
  {
    "text": "very open governance model there are some key kind of project owners but then",
    "start": "1732880",
    "end": "1738480"
  },
  {
    "text": "effectively it has very open contribution model has a community on slack you can all go and get involved and help define it",
    "start": "1738480",
    "end": "1744960"
  },
  {
    "text": "and they're a lovely lovely bunch and they have kind of regular zoom meetings you can kind of join in and they're all",
    "start": "1744960",
    "end": "1750559"
  },
  {
    "text": "over the world so lovely bunch and what they give you is a specification for defining an api",
    "start": "1750559",
    "end": "1757200"
  },
  {
    "text": "um uh and then they give you tools which we'll look at a little bit uh during the session",
    "start": "1757200",
    "end": "1762559"
  },
  {
    "text": "which say well given you've defined this api json yaml i can parse that",
    "start": "1762559",
    "end": "1767679"
  },
  {
    "text": "and i can run a tool chain for you and there are emerging community-based tools around it as well",
    "start": "1767679",
    "end": "1774399"
  },
  {
    "text": "so the way async kpi works it says well there's a producer and a consumer",
    "start": "1774399",
    "end": "1779679"
  },
  {
    "text": "and there are roles my app could take because on my app i might send some",
    "start": "1779679",
    "end": "1785039"
  },
  {
    "text": "messages and i might listen to some messages so i can be in both a producer and a consumer role",
    "start": "1785039",
    "end": "1792159"
  },
  {
    "text": "and i send a message over a channel to what we hope before right so a channel",
    "start": "1792159",
    "end": "1797440"
  },
  {
    "text": "has this logical construction given a name where i'm going to send a message",
    "start": "1797440",
    "end": "1803279"
  },
  {
    "text": "has to be addressable because essentially i must be able to send to an address is really a name",
    "start": "1803279",
    "end": "1810080"
  },
  {
    "text": "and channels are usually hosted on a server now in async api 2",
    "start": "1810080",
    "end": "1817120"
  },
  {
    "text": "generally the server abstraction if we're using messaging via broker is a little bit redundant we'll talk about in",
    "start": "1817120",
    "end": "1823039"
  },
  {
    "text": "a second if you've seen something like web sockets the server is a role",
    "start": "1823039",
    "end": "1828159"
  },
  {
    "text": "one of you will be playing like the producer if you're producing messages you'll effectively be the server",
    "start": "1828159",
    "end": "1833600"
  },
  {
    "text": "we'll come back to the server a little bit later okay",
    "start": "1833600",
    "end": "1839039"
  },
  {
    "text": "we send a message and it has a payload and a header and as a protocol",
    "start": "1839039",
    "end": "1845760"
  },
  {
    "text": "or called a binding which tells us how are we going to use a specific",
    "start": "1845760",
    "end": "1851520"
  },
  {
    "text": "protocol like kafka or an sns to send this how are we going to configure that to work",
    "start": "1851520",
    "end": "1858320"
  },
  {
    "text": "so an async kpi specification has a top level object called an 18kpi object some",
    "start": "1858720",
    "end": "1865360"
  },
  {
    "text": "of you who've done open api may find this model familiar and that's because open api was",
    "start": "1865360",
    "end": "1871360"
  },
  {
    "text": "an inspiration to the async api team when they began working they looked at the way open api i was able to document",
    "start": "1871360",
    "end": "1878080"
  },
  {
    "text": "http endpoints and said wouldn't it be great if we had something similar for doing messaging particularly in their",
    "start": "1878080",
    "end": "1883519"
  },
  {
    "text": "case i think web sockets info object is a top level object which",
    "start": "1883519",
    "end": "1889440"
  },
  {
    "text": "says what is this specification about right it's metadata about the",
    "start": "1889440",
    "end": "1894799"
  },
  {
    "text": "specification who should i talk to which team in the organization owns this endpoint",
    "start": "1894799",
    "end": "1901760"
  },
  {
    "text": "the service object says okay what hosts effectively this",
    "start": "1901760",
    "end": "1909360"
  },
  {
    "text": "endpoint and the channels object says what are the channels what are the",
    "start": "1909679",
    "end": "1916080"
  },
  {
    "text": "things over which messages are flowing",
    "start": "1916080",
    "end": "1921640"
  },
  {
    "text": "and within the channels object because you may have more than one channel because you both send and receive you have operations",
    "start": "1922000",
    "end": "1928640"
  },
  {
    "text": "saying i'm going to send something or i'm going to receive something and they have under the operation a",
    "start": "1928640",
    "end": "1934559"
  },
  {
    "text": "message saying what i send or receive",
    "start": "1934559",
    "end": "1939278"
  },
  {
    "text": "there's a component section and what that lets us do is take common repeated bits of definition",
    "start": "1940080",
    "end": "1946080"
  },
  {
    "text": "like message schemas put them in a central place and tags so i can effectively tag my",
    "start": "1946080",
    "end": "1952080"
  },
  {
    "text": "spec for purposes of searching etc okay so the top level object really has just",
    "start": "1952080",
    "end": "1958559"
  },
  {
    "text": "one property an id which is identifier of the app the specification is for you right specification for a given app so",
    "start": "1958559",
    "end": "1964799"
  },
  {
    "text": "you would write one for a micro service the info object has some useful",
    "start": "1964799",
    "end": "1971440"
  },
  {
    "text": "information i've just documented for fun and giggles um",
    "start": "1971440",
    "end": "1977600"
  },
  {
    "text": "one of our sample applications in the budget project and it has stuff like saying well where",
    "start": "1977600",
    "end": "1983760"
  },
  {
    "text": "do you go to find help about this where would you go for support don't email that email it doesn't exist",
    "start": "1983760",
    "end": "1990880"
  },
  {
    "text": "and a license information which is a bit strange if it's internal you just put something like local",
    "start": "1990880",
    "end": "1996799"
  },
  {
    "text": "it's a required field which is a bit weird a description effectively of what the specification represents right so",
    "start": "1996799",
    "end": "2003519"
  },
  {
    "text": "someone reading this can go oh okay this is the tech for that app um a version number in other words",
    "start": "2003519",
    "end": "2010000"
  },
  {
    "text": "essentially which version the specification is this so i can effectively version and iterate my",
    "start": "2010000",
    "end": "2015039"
  },
  {
    "text": "specifications if i have to move forward it's a contract it should have a version",
    "start": "2015039",
    "end": "2021120"
  },
  {
    "text": "and tags the service object you can have multiple servers so you can do production staging",
    "start": "2021120",
    "end": "2028320"
  },
  {
    "text": "qri i'm just defining a local one here and the protocol how do i talk to the server that effectively is working here",
    "start": "2028320",
    "end": "2036399"
  },
  {
    "text": "and then perhaps most importantly the channel so the channel is what i'm communicating",
    "start": "2036399",
    "end": "2042399"
  },
  {
    "text": "over so i'm defining a channel called greeting in say kafka this would be a topic",
    "start": "2042399",
    "end": "2047679"
  },
  {
    "text": "right i describe an operation on it subscribe i'll come back to subscribe in just a",
    "start": "2047679",
    "end": "2052878"
  },
  {
    "text": "second the operation id is really used for code gen saying what would i call this",
    "start": "2052879",
    "end": "2059358"
  },
  {
    "text": "particular operation if i co-gen something around it and then i say what's the summary of what i'm doing and",
    "start": "2059359",
    "end": "2065118"
  },
  {
    "text": "what's the description of what i'm doing right and then what's the message that goes over the channel with this operation",
    "start": "2065119",
    "end": "2071520"
  },
  {
    "text": "notice that although all the description says i am sending something the",
    "start": "2071520",
    "end": "2076560"
  },
  {
    "text": "operation is subscribe why is that well because of the",
    "start": "2076560",
    "end": "2081919"
  },
  {
    "text": "history of async api what it's defining is what operations do i expose",
    "start": "2081919",
    "end": "2090398"
  },
  {
    "text": "to you and if i am a publisher i expose the subscribe operation you can",
    "start": "2090399",
    "end": "2097359"
  },
  {
    "text": "subscribe to my messages if i am a consumer i expose the publish",
    "start": "2097359",
    "end": "2102800"
  },
  {
    "text": "operation you can publish to me that makes sense in the kind of",
    "start": "2102800",
    "end": "2108560"
  },
  {
    "text": "websockets world it came from it doesn't make so much sense in a pub sub world",
    "start": "2108560",
    "end": "2113839"
  },
  {
    "text": "and we'll come back to that again at the end as i say a ref",
    "start": "2113839",
    "end": "2119599"
  },
  {
    "text": "is a way of saying inspect you saw one on the on the previous page see a ref for the message",
    "start": "2119599",
    "end": "2125839"
  },
  {
    "text": "right a ref says hey i'm not going to define that here it's",
    "start": "2125839",
    "end": "2131119"
  },
  {
    "text": "somewhere else in the spec because it's shared typically a message might be used in",
    "start": "2131119",
    "end": "2136320"
  },
  {
    "text": "multiple places and so here i'm doing a ref where it just says actually you can find it in the same document in the",
    "start": "2136320",
    "end": "2142079"
  },
  {
    "text": "component section and here i'm saying actually it's in this other file in the component section",
    "start": "2142079",
    "end": "2147440"
  },
  {
    "text": "the other file one's quite useful because as you can imagine i've got two apps one is sending message the other is",
    "start": "2147440",
    "end": "2153520"
  },
  {
    "text": "receiving a message i can have a shared definition file with a message in it and share it between the two apps",
    "start": "2153520",
    "end": "2161359"
  },
  {
    "text": "that's what a component section looks like you can see that effectively i have a schema for a message",
    "start": "2162320",
    "end": "2168240"
  },
  {
    "text": "and it has internally refs to describe the payload the traits are aware of providing common header reuse",
    "start": "2168240",
    "end": "2175280"
  },
  {
    "text": "and a schema for the message uh out of the box async api supports json schema to",
    "start": "2175280",
    "end": "2181920"
  },
  {
    "text": "describe its messages but it is open to any format and we'll describe some other formats in a second you could use",
    "start": "2181920",
    "end": "2187839"
  },
  {
    "text": "right so it doesn't it isn't constrained to saying you must describe your messages in json schema easy to tell it you just",
    "start": "2187839",
    "end": "2195040"
  },
  {
    "text": "need to document what you're describing your message format in so the structure",
    "start": "2195040",
    "end": "2201760"
  },
  {
    "text": "how well does that map to the requirement we gave earlier around basically an endpoint consisting",
    "start": "2201760",
    "end": "2207760"
  },
  {
    "text": "of a message with a payload and a header a channel what do we send it over and a binding",
    "start": "2207760",
    "end": "2213440"
  },
  {
    "text": "well we've got some information about the endpoint right and really though a bit strangely when",
    "start": "2213440",
    "end": "2220240"
  },
  {
    "text": "we talk about basically channels and operations the things that the endpoint makes available they're actually a bit",
    "start": "2220240",
    "end": "2225359"
  },
  {
    "text": "closer to kind of our general endpoint description we certainly in the operation have a",
    "start": "2225359",
    "end": "2231680"
  },
  {
    "text": "message which describes the message with a payload and a header we have also this weird servers object",
    "start": "2231680",
    "end": "2238000"
  },
  {
    "text": "for hosting a channel and the binding information which describes how a given protocol",
    "start": "2238000",
    "end": "2246160"
  },
  {
    "text": "supports stuff so what happens is you add binding information say to operation etcetera to describe how your protocol",
    "start": "2246160",
    "end": "2252400"
  },
  {
    "text": "supports that um is spread throughout",
    "start": "2252400",
    "end": "2258160"
  },
  {
    "text": "so there's currently discussion in the asia cafe community about a v3 and v3 the intent is ready to support",
    "start": "2258400",
    "end": "2265280"
  },
  {
    "text": "pub sub a bit better make it a bit more intuitive so what you can see is the operations",
    "start": "2265280",
    "end": "2270720"
  },
  {
    "text": "have been taken out from under channels i made a top level item",
    "start": "2270720",
    "end": "2276400"
  },
  {
    "text": "so you're saying my app sends some stuff and my app receives some stuff that's the action you can see there",
    "start": "2276400",
    "end": "2283280"
  },
  {
    "text": "and it does that over a channel which i've defined elsewhere",
    "start": "2283280",
    "end": "2288160"
  },
  {
    "text": "and you can say in its bindings hey am i actually a server or do i just use",
    "start": "2288400",
    "end": "2294560"
  },
  {
    "text": "a piece of middleware to do that so there'd be a better support for pub sub and v3 yet some of the details there",
    "start": "2294560",
    "end": "2301440"
  },
  {
    "text": "are still under kind of development um and it's time to infl it's good time to go try and influence that spec if",
    "start": "2301440",
    "end": "2307680"
  },
  {
    "text": "you're interested in that kind of thing um but better support for pub sub is coming it's very usable today um we we",
    "start": "2307680",
    "end": "2314240"
  },
  {
    "text": "use it to define uh producers and consumers it's just a little bit you have to",
    "start": "2314240",
    "end": "2320240"
  },
  {
    "text": "explain counterintuitive stuff like why is it published versus subscribe at this point right",
    "start": "2320240",
    "end": "2327839"
  },
  {
    "text": "i've taken that feedback and it's the next iteration i think should be very exciting two is definitely kind of early",
    "start": "2328880",
    "end": "2334320"
  },
  {
    "text": "adopters people giving feedback three i think is probably where early majority will come in",
    "start": "2334320",
    "end": "2341680"
  },
  {
    "text": "okay um there is tooling they provide basically your studio you can write the yaml or your json or display something",
    "start": "2341680",
    "end": "2348960"
  },
  {
    "text": "looks like html we'll come back to that what documentation you can put it in visual studio code if",
    "start": "2348960",
    "end": "2354400"
  },
  {
    "text": "you like and it will basically do the same thing for you backstage and other",
    "start": "2354400",
    "end": "2362240"
  },
  {
    "text": "similar libs are starting to support async api what's backstage is for backstage if you",
    "start": "2362240",
    "end": "2367680"
  },
  {
    "text": "don't know it comes out of spotify and it's really a portal for us to put developer",
    "start": "2367680",
    "end": "2372960"
  },
  {
    "text": "documentation so if i want to discover",
    "start": "2372960",
    "end": "2377838"
  },
  {
    "text": "what services do we have and what events do they expose i can use something like backstage to hold my 18kpi documentation",
    "start": "2378400",
    "end": "2386800"
  },
  {
    "text": "so developers can discover what endpoints look like",
    "start": "2386800",
    "end": "2394200"
  },
  {
    "text": "there's also tooling emerging from the community this one i don't think is perfect what it does but you can see",
    "start": "2397040",
    "end": "2402720"
  },
  {
    "text": "that it's possible once you have definitions for your endpoints to begin to graphing out the flow",
    "start": "2402720",
    "end": "2408880"
  },
  {
    "text": "and visibility of event based of asynchronous apis is a",
    "start": "2408880",
    "end": "2413920"
  },
  {
    "text": "real problem right how do i know what's actually going on under the hood",
    "start": "2413920",
    "end": "2418960"
  },
  {
    "text": "this gives you a kind of static viewpoint it lets you say at a design level",
    "start": "2418960",
    "end": "2425280"
  },
  {
    "text": "what would the flight messages in my system look like we'll talk about operational understanding of that in a bit",
    "start": "2425280",
    "end": "2433119"
  },
  {
    "text": "okay so we said it supports json schema it also supports other formats what are the ways of describing our actual",
    "start": "2433280",
    "end": "2439440"
  },
  {
    "text": "message one of the big emerging standards in a minute is cloud events so cloud events is across a number of",
    "start": "2439440",
    "end": "2446240"
  },
  {
    "text": "vendors really across the people that compete with aws because aws are not part of the cloud event standard but it's an",
    "start": "2446240",
    "end": "2452640"
  },
  {
    "text": "interesting and quite useful uh tool to use card events is focused on events let's",
    "start": "2452640",
    "end": "2459200"
  },
  {
    "text": "just define commands and events for a second right a command is an instruction my example",
    "start": "2459200",
    "end": "2464720"
  },
  {
    "text": "is usually make me a cup of tea an event is basically a fact i am thirsty",
    "start": "2464720",
    "end": "2471520"
  },
  {
    "text": "event sent me one way i broadcast it i don't know if anyone's ever going to respond to it i just broadcast that fact",
    "start": "2471920",
    "end": "2479200"
  },
  {
    "text": "commands often imply a reply please make me a cup of tea i'm expecting to get a cup of tea",
    "start": "2479200",
    "end": "2486240"
  },
  {
    "text": "commands typically i know the recipient i'm addressing somebody and giving them an instruction",
    "start": "2486720",
    "end": "2492560"
  },
  {
    "text": "events don't have any knowledge basically of who actually subscribes it maybe nobody listening for all you care",
    "start": "2492560",
    "end": "2500560"
  },
  {
    "text": "one recipient or zero to many subscribers",
    "start": "2500560",
    "end": "2504960"
  },
  {
    "text": "cloud events has focused itself on events hence the name",
    "start": "2506480",
    "end": "2512480"
  },
  {
    "text": "so they've deliberately restricted the scope of their work and as such",
    "start": "2512480",
    "end": "2518960"
  },
  {
    "text": "the specification has nothing really about routing right it has does it it considers that",
    "start": "2518960",
    "end": "2524960"
  },
  {
    "text": "protocol specific concern and it also considers that events may flow and may change who they're between at any one",
    "start": "2524960",
    "end": "2531760"
  },
  {
    "text": "time so things like reply to or to these are not things that you will find",
    "start": "2531760",
    "end": "2536880"
  },
  {
    "text": "the topic you won't find those in cloud events doesn't mean you can't use them",
    "start": "2536880",
    "end": "2542319"
  },
  {
    "text": "but it means it's not covered by the standard okay generally cloud events is basically",
    "start": "2542319",
    "end": "2548160"
  },
  {
    "text": "concerned with the metadata more than anything else all right",
    "start": "2548160",
    "end": "2554400"
  },
  {
    "text": "so it says my event consists of metadata and a payload and my metadata consists of required and",
    "start": "2555119",
    "end": "2562480"
  },
  {
    "text": "optional attributes i have an identifier for basically my",
    "start": "2562480",
    "end": "2568640"
  },
  {
    "text": "message and a source message right so",
    "start": "2568640",
    "end": "2574000"
  },
  {
    "text": "this application sent it and it had this id between the two of those it's unique ids could repeat",
    "start": "2574000",
    "end": "2580319"
  },
  {
    "text": "between uh people sending a message but for any given producer the id should be unique",
    "start": "2580319",
    "end": "2588560"
  },
  {
    "text": "spec version so which version of cloud events are you basically defining it with and a type",
    "start": "2588560",
    "end": "2594160"
  },
  {
    "text": "so basically it's the kind of name in the message like my greetings message and generally the version information goes here like grouping v1 greeting v2",
    "start": "2594160",
    "end": "2601119"
  },
  {
    "text": "if you have written information optional attributes you don't require",
    "start": "2601119",
    "end": "2606880"
  },
  {
    "text": "them it makes assumptions otherwise what is the content type what is the mime type basically of this",
    "start": "2606880",
    "end": "2613680"
  },
  {
    "text": "message application json application avro right what is the data schema what does the",
    "start": "2613680",
    "end": "2619040"
  },
  {
    "text": "payload look like notice that cloud events is not defining",
    "start": "2619040",
    "end": "2624400"
  },
  {
    "text": "payloads so cloud events is perfectly usable",
    "start": "2624400",
    "end": "2631839"
  },
  {
    "text": "with async api async api can how you can have a json description of the schema of your",
    "start": "2631839",
    "end": "2638079"
  },
  {
    "text": "message and you can treat cloud events instead of traits that define",
    "start": "2638079",
    "end": "2643359"
  },
  {
    "text": "the headers that your message is going to use subject qualifies the id and source",
    "start": "2643359",
    "end": "2649680"
  },
  {
    "text": "information with more detail if necessary and a time stamp when the message gets",
    "start": "2649680",
    "end": "2655440"
  },
  {
    "text": "sent all right there are two types of binding to",
    "start": "2655440",
    "end": "2661200"
  },
  {
    "text": "specific protocols like kafka sns http etc right",
    "start": "2661200",
    "end": "2666800"
  },
  {
    "text": "binary and structured binary says the protocol has probably got some",
    "start": "2666800",
    "end": "2673040"
  },
  {
    "text": "mechanism for handling metadata use that mechanism",
    "start": "2673040",
    "end": "2678560"
  },
  {
    "text": "structured says just shove it all in the payload we'll show it example in a second and we support a range of bindings okay",
    "start": "2678560",
    "end": "2688240"
  },
  {
    "text": "uh if your binding's not there they are pretty good at taking uh contributions from the community and",
    "start": "2688480",
    "end": "2694560"
  },
  {
    "text": "some bindings have been defined kind of outside the community",
    "start": "2694560",
    "end": "2699119"
  },
  {
    "text": "so a binary one for kafka for example would look like this kafka and i can't which version it came in but",
    "start": "2700079",
    "end": "2706640"
  },
  {
    "text": "kafka now supports basically headers and messages so those things the ce underscore are",
    "start": "2706640",
    "end": "2712800"
  },
  {
    "text": "cloud events attributes and that protocol has been defined so",
    "start": "2712800",
    "end": "2718960"
  },
  {
    "text": "effectively if you use cloud events with kafka then you can read the cloud events attributes out basically of kafka",
    "start": "2718960",
    "end": "2726480"
  },
  {
    "text": "structured and all protocols have to support both says just whack it in the body of the message",
    "start": "2726480",
    "end": "2732640"
  },
  {
    "text": "in a kind of envelope fashion makes sense",
    "start": "2732640",
    "end": "2738319"
  },
  {
    "text": "so you can see the difference one goes in the actual headers that the protocol supports the other just says dump it all",
    "start": "2739440",
    "end": "2745040"
  },
  {
    "text": "in the payload use a kind of envelope model wrap my actual payload with this information",
    "start": "2745040",
    "end": "2751839"
  },
  {
    "text": "okay you need to be aware of what you're reading obviously because that's how you interpret it okay",
    "start": "2751839",
    "end": "2757040"
  },
  {
    "text": "uh you probably then once you've created all these event schemas your payload",
    "start": "2757040",
    "end": "2762480"
  },
  {
    "text": "you need to do something with them you could leave them in async api but one of the things that you want to think",
    "start": "2762480",
    "end": "2769200"
  },
  {
    "text": "about is forwards and backwards compatibility of your schemas",
    "start": "2769200",
    "end": "2774880"
  },
  {
    "text": "so a number of tools exist out there this is a slide from confluence schema registry i think there's uh one from ap curio and",
    "start": "2774880",
    "end": "2782880"
  },
  {
    "text": "i think there are a few others and the cloud events team are working on a specification that let you register the",
    "start": "2782880",
    "end": "2789680"
  },
  {
    "text": "schema of the message that you produce and consumers can register their",
    "start": "2789680",
    "end": "2794720"
  },
  {
    "text": "interest in it such that you can determine whether or not your message is forwards or backwards",
    "start": "2794720",
    "end": "2801280"
  },
  {
    "text": "compatible changes to messages are the one of the big problems we get out there in terms",
    "start": "2801280",
    "end": "2806480"
  },
  {
    "text": "of braking systems as we said if you're a tolerant reader you can effectively cope with certain",
    "start": "2806480",
    "end": "2811599"
  },
  {
    "text": "changes so you can be forwards and backwards compatible so you'll probably want to dig out a",
    "start": "2811599",
    "end": "2816880"
  },
  {
    "text": "registry of some sort as your estate grows bigger and register your messages and check compatibility i would check",
    "start": "2816880",
    "end": "2823119"
  },
  {
    "text": "out confluence scheme registry you might also want to go and look at something like happy curio",
    "start": "2823119",
    "end": "2829480"
  },
  {
    "text": "telemetry so we mentioned that with something like async api what i can do",
    "start": "2830079",
    "end": "2836640"
  },
  {
    "text": "is i can essentially say here is a static view of how messages are going to flow through my system i can look at",
    "start": "2836640",
    "end": "2843119"
  },
  {
    "text": "those all those producer and consumer endpoints i've defined i can graph them",
    "start": "2843119",
    "end": "2848559"
  },
  {
    "text": "and i can kind of see what the flow is open telemetry would let you investigate",
    "start": "2848559",
    "end": "2854160"
  },
  {
    "text": "that at runtime as well so where open telemetry works is this",
    "start": "2854160",
    "end": "2860720"
  },
  {
    "text": "idea of a a spa a trace that has spans and a span really says hey i'm starting",
    "start": "2860720",
    "end": "2868640"
  },
  {
    "text": "some lifetime of communication and it can have sub spans which",
    "start": "2868640",
    "end": "2873920"
  },
  {
    "text": "represent hey i'm a worker thing that lives inside that span so here for example if i was going to send a message",
    "start": "2873920",
    "end": "2879920"
  },
  {
    "text": "between restaurant management restaurant availability i might have an overall span that begins",
    "start": "2879920",
    "end": "2885839"
  },
  {
    "text": "when i send the message from restaurant management",
    "start": "2885839",
    "end": "2891599"
  },
  {
    "text": "and i serialize the span context into the headers of my message",
    "start": "2891680",
    "end": "2897599"
  },
  {
    "text": "cloud events doesn't define whether you're using open telemetry etc but it has optional attributes it allows them",
    "start": "2897599",
    "end": "2903599"
  },
  {
    "text": "so you can define that and you yourself and i create another span in the child",
    "start": "2903599",
    "end": "2911599"
  },
  {
    "text": "which says i'm now effectively in the child and i'm doing work here",
    "start": "2911599",
    "end": "2917839"
  },
  {
    "text": "spans consider an operation name start and finish time stamps the context the span id and the trace id",
    "start": "2918000",
    "end": "2923839"
  },
  {
    "text": "and the attributes that basically are defined by standard and the ones you define yourself so that you can particularly",
    "start": "2923839",
    "end": "2930480"
  },
  {
    "text": "determine what the flow is you can see yourself flowing through these spans open telemetry has a collector and the",
    "start": "2930480",
    "end": "2936720"
  },
  {
    "text": "collector effectively you send messages to you from your application or you rely on the framework or a library you're",
    "start": "2936720",
    "end": "2943359"
  },
  {
    "text": "using being built around open telemetry and doing it for you and then you can effectively go from that collector to",
    "start": "2943359",
    "end": "2949040"
  },
  {
    "text": "standard tracing tools i'm not going to go into a huge detail",
    "start": "2949040",
    "end": "2955200"
  },
  {
    "text": "just because of time alex i noticed is running a session on open telemetry later on today in room three so if",
    "start": "2955200",
    "end": "2962640"
  },
  {
    "text": "you're interested in open telemetry and want to know more about that i would go and see alex's session",
    "start": "2962640",
    "end": "2969160"
  },
  {
    "text": "all right so i've built my endpoints i've recognized their contracts i've documented the endpoint with async api",
    "start": "2971680",
    "end": "2978480"
  },
  {
    "text": "i have used cloud events to make sure that my metadata is consistent uh and i can uh",
    "start": "2978480",
    "end": "2985599"
  },
  {
    "text": "i can basically then have a binding between that and various protocols between 18 kpi",
    "start": "2985599",
    "end": "2991359"
  },
  {
    "text": "and cloud events and my messages um and i've registered all my events in a schema registry okay great what other",
    "start": "2991359",
    "end": "2998319"
  },
  {
    "text": "things might help me from that toolkit that i've got",
    "start": "2998319",
    "end": "3002880"
  },
  {
    "text": "18 kpis pretty interesting and it's real sweet spot for me is its",
    "start": "3006800",
    "end": "3012480"
  },
  {
    "text": "parser and generator model so what happens is i've got my",
    "start": "3012480",
    "end": "3017520"
  },
  {
    "text": "specification and there's a parser written in javascript",
    "start": "3017520",
    "end": "3023200"
  },
  {
    "text": "that will essentially pause that yaml adjacent and turn it into a model",
    "start": "3023200",
    "end": "3028800"
  },
  {
    "text": "and then what i can do with what's called the generator is i can essentially",
    "start": "3028960",
    "end": "3034160"
  },
  {
    "text": "pass that model to a template they support both react or nunjucks",
    "start": "3034160",
    "end": "3040640"
  },
  {
    "text": "and i can use that template to generate new artifacts",
    "start": "3040640",
    "end": "3047200"
  },
  {
    "text": "i'll i'll do that okay so this is basically a react template",
    "start": "3049520",
    "end": "3056400"
  },
  {
    "text": "and here you can see the idea that what we're saying is okay well why don't you have a look and see",
    "start": "3056400",
    "end": "3061599"
  },
  {
    "text": "whether or not i'm publishing something in other words i'm",
    "start": "3061599",
    "end": "3066800"
  },
  {
    "text": "actually means i'm subscribing and i've got a binding of kafka so in other words i've probably got a",
    "start": "3066800",
    "end": "3072800"
  },
  {
    "text": "protocol binding of kaska effectively on my channel",
    "start": "3072800",
    "end": "3078960"
  },
  {
    "text": "if i have generate a new file",
    "start": "3079200",
    "end": "3084720"
  },
  {
    "text": "with the relevant kafka information what could i do with that",
    "start": "3084720",
    "end": "3090800"
  },
  {
    "text": "well one of the things we've begun to do with it is say i'll take the 18 kpi definition",
    "start": "3090800",
    "end": "3096559"
  },
  {
    "text": "i'll use the binding information we use sns and kafka i've take that binding information out",
    "start": "3096559",
    "end": "3103599"
  },
  {
    "text": "put it in a json file and i'll use polumi to generate that infrastructure that's required for that",
    "start": "3103599",
    "end": "3110079"
  },
  {
    "text": "process i will declare my cues i'll declare my topics i will subscribe my cues to my",
    "start": "3110079",
    "end": "3115599"
  },
  {
    "text": "topics for sms right",
    "start": "3115599",
    "end": "3119200"
  },
  {
    "text": "so my team just declaratively says what infrastructure do i want",
    "start": "3120880",
    "end": "3126800"
  },
  {
    "text": "drop that in there repo rate repo we pick it up when we build the infrastructure for them",
    "start": "3126800",
    "end": "3133920"
  },
  {
    "text": "such that we know that infrastructure is going to be available when they run their app",
    "start": "3134480",
    "end": "3140079"
  },
  {
    "text": "you can do documentation the same way yeah an infrastructure is code the other thing you can do",
    "start": "3141599",
    "end": "3148079"
  },
  {
    "text": "is scaffolding someone writes basically a definition",
    "start": "3148079",
    "end": "3153200"
  },
  {
    "text": "where they say i'm going to consume these messages if you're if you use a standard",
    "start": "3153200",
    "end": "3159760"
  },
  {
    "text": "framework internally for consuming those messages you can probably boil a plate a lot of",
    "start": "3159760",
    "end": "3166480"
  },
  {
    "text": "an application that would need to be able to read messages from that stream so we're certainly looking at doing",
    "start": "3166480",
    "end": "3173240"
  },
  {
    "text": "boilerplate.net solutions that effectively just say you know write your handler code here",
    "start": "3173240",
    "end": "3179599"
  },
  {
    "text": "we'll do all the hard work of creating the boilerplate that connects up to that given channel",
    "start": "3179599",
    "end": "3185200"
  },
  {
    "text": "pulls messages off it and dumps it to a handler we're using using frameworks all you really want to write is your domain",
    "start": "3185200",
    "end": "3191200"
  },
  {
    "text": "logic makes it very easy",
    "start": "3191200",
    "end": "3198400"
  },
  {
    "text": "all right and i i finished the finished at that point we have five minutes",
    "start": "3198480",
    "end": "3205599"
  },
  {
    "text": "so we we're live we can do questions wow does anybody have any questions",
    "start": "3205599",
    "end": "3212880"
  },
  {
    "text": "i realize you're all norwegians and you don't actually ask questions i've got a question at the front um",
    "start": "3212880",
    "end": "3220680"
  },
  {
    "text": "for like authentication requirements okay that's a good question so the question was does async api have",
    "start": "3222240",
    "end": "3228240"
  },
  {
    "text": "specification for authorization or other authorization requirements yep there's a security section on async api which lets",
    "start": "3228240",
    "end": "3234000"
  },
  {
    "text": "you say how are we going to authorize this one and then there's basically protocol specific uh information quite",
    "start": "3234000",
    "end": "3241280"
  },
  {
    "text": "often on the binding which says okay what's going on here",
    "start": "3241280",
    "end": "3245680"
  },
  {
    "text": "other questions i can see people which is quite a",
    "start": "3247839",
    "end": "3252960"
  },
  {
    "text": "revolution no no one's gonna think all right so uh",
    "start": "3252960",
    "end": "3258880"
  },
  {
    "text": "my i'm i cooper on twitter my dms are always open i'm happy to talk about this stuff and what we're doing with it um",
    "start": "3258880",
    "end": "3265760"
  },
  {
    "text": "uh for us it's definitely uh i mean we have 2000 developers and",
    "start": "3265760",
    "end": "3272079"
  },
  {
    "text": "hundreds of services become critical to us that we take control of that event infrastructure because it's become",
    "start": "3272079",
    "end": "3278720"
  },
  {
    "text": "too difficult for people to discover events and too difficult for us to manage that event estate to manage the",
    "start": "3278720",
    "end": "3285200"
  },
  {
    "text": "infrastructure we had services declaring their own infrastructure things when things died who knew how you recovered",
    "start": "3285200",
    "end": "3291200"
  },
  {
    "text": "it right as a production incident somebody accidentally deletes a queue uh a topic in sns",
    "start": "3291200",
    "end": "3297760"
  },
  {
    "text": "right and the queues will then die how do you know how to effectively recreate that topic",
    "start": "3297760",
    "end": "3304079"
  },
  {
    "text": "and who subscribes to it richard all the subscriptions right that was a real problem for us so this is a solution to",
    "start": "3304079",
    "end": "3310000"
  },
  {
    "text": "those problems so at sufficient scale this all becomes really difficult",
    "start": "3310000",
    "end": "3315200"
  },
  {
    "text": "so it's kind of this uh and it's an emerging area there's lots of emerging standards people are working on to try",
    "start": "3315200",
    "end": "3321359"
  },
  {
    "text": "and make this better make life better as people move towards events again feel free to ping me about this",
    "start": "3321359",
    "end": "3327200"
  },
  {
    "text": "okay but otherwise if you've got no more questions i can see oh there's a question in front",
    "start": "3327200",
    "end": "3335480"
  },
  {
    "text": "so for racing kpi the tooling is kind of irrespective of language but you effectively have to use javascript to",
    "start": "3342319",
    "end": "3349119"
  },
  {
    "text": "basically work with the generator pretty much i i there was some people writing tooling in things like go and net to try",
    "start": "3349119",
    "end": "3355440"
  },
  {
    "text": "and do the same thing but most of those efforts have not had a lot of traction and the core team works on javascript",
    "start": "3355440",
    "end": "3361280"
  },
  {
    "text": "i'm not a great i'm a back end person i'm not a great javascript developer but even i can make the react template stuff work it's not like it's really there's a",
    "start": "3361280",
    "end": "3368240"
  },
  {
    "text": "whole template you clone a github template you go and fill in the bits and you're in in your of that you need to",
    "start": "3368240",
    "end": "3374079"
  },
  {
    "text": "know and then you're done so it's it's just enough javascript that i go oh look javascript i'm writing javascript look",
    "start": "3374079",
    "end": "3380480"
  },
  {
    "text": "at me um uh but i don't have to be a real expert i i know nothing about javascript all right",
    "start": "3380480",
    "end": "3387200"
  },
  {
    "text": "anyone else cool uh but open telemetry um uh it's got",
    "start": "3387200",
    "end": "3394559"
  },
  {
    "text": "good.net support for example um cloudvent doesn't need any support for our language um but acn kpo has",
    "start": "3394559",
    "end": "3400720"
  },
  {
    "text": "documented developers in the community so it's not like we're left out in the cold right some places",
    "start": "3400720",
    "end": "3406880"
  },
  {
    "text": "all right cool thanks very much remember you want to put the green",
    "start": "3406880",
    "end": "3412960"
  },
  {
    "text": "ticket in the box outside",
    "start": "3412960",
    "end": "3416920"
  },
  {
    "text": "i got another talk tomorrow by the way hustle and flow and that's about how you model event-driven architectures how you",
    "start": "3418640",
    "end": "3425119"
  },
  {
    "text": "figure out how to use events between systems so please come to that if you're interested in events",
    "start": "3425119",
    "end": "3432359"
  },
  {
    "text": "you",
    "start": "3437520",
    "end": "3439599"
  }
]