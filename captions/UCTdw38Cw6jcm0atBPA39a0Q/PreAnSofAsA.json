[
  {
    "text": "buddy welcome hopefully you are here to see me my name is Ian Cooper talked",
    "start": "11370",
    "end": "17850"
  },
  {
    "text": "about a venture and collaboration what I mean by that is when we have an advantage of an architecture how do we",
    "start": "17850",
    "end": "24210"
  },
  {
    "text": "get different say micro-services in their architecture to collaborate with",
    "start": "24210",
    "end": "29369"
  },
  {
    "text": "us each other to give basically functionality I have tended to notice over time teaching kind of messaging",
    "start": "29369",
    "end": "36059"
  },
  {
    "text": "workshop and working at various companies that one of the key problems people run into with an event-driven",
    "start": "36059",
    "end": "41640"
  },
  {
    "text": "architecture is trying to understand how I get all these different micro services",
    "start": "41640",
    "end": "47760"
  },
  {
    "text": "to collaborate to solve a problem that's what it's talking about that's just some",
    "start": "47760",
    "end": "53309"
  },
  {
    "text": "information about me it says two things to you one that I'm old and the other",
    "start": "53309",
    "end": "59460"
  },
  {
    "text": "essentially that I currently don't work I don't work for any kind of consultancy I had nothing to sell you apart from",
    "start": "59460",
    "end": "65580"
  },
  {
    "text": "just share my experience the point I always draw out most of all is the one",
    "start": "65580",
    "end": "71010"
  },
  {
    "text": "at the very bottom of the deck I encourage you all to get up and speak it",
    "start": "71010",
    "end": "79140"
  },
  {
    "text": "can be intimidating to look at speakers and imagine that we are all very small people I hang out in the speaker room",
    "start": "79140",
    "end": "84480"
  },
  {
    "text": "with a lot of them and they like me I no smarter than you I promise that you are not they're just the same all of us are",
    "start": "84480",
    "end": "90810"
  },
  {
    "text": "just lucky enough to have been given the opportunity to speak user groups or other events and build confidence which",
    "start": "90810",
    "end": "97230"
  },
  {
    "text": "is the main thing which lets us come stand in front of you guys but I am no",
    "start": "97230",
    "end": "102960"
  },
  {
    "text": "smarter than any of you I promise so if I can get this stuff so can you",
    "start": "102960",
    "end": "108440"
  },
  {
    "text": "how many dotnet devs in the room any Python devs okay so I work on an open",
    "start": "109230",
    "end": "117600"
  },
  {
    "text": "source library called brighter brighter is a c-sharp messaging library it",
    "start": "117600",
    "end": "123090"
  },
  {
    "text": "provides an equivalent to say mass transit or an service bus always have a Python / version called bright Sun I",
    "start": "123090",
    "end": "129509"
  },
  {
    "text": "wish interrupts with it and we also support the functionalities we like mediator so if you're interested in",
    "start": "129509",
    "end": "135629"
  },
  {
    "text": "getting messaging working and a dotnet application or a Python application please do check us out we are hopefully",
    "start": "135629",
    "end": "142379"
  },
  {
    "text": "friendly and always open to people who want to work and source project pick you for the first time so please do come along we've",
    "start": "142379",
    "end": "148650"
  },
  {
    "text": "got some nice new open issues people to start work on and we try and help her as much as possible and I get to channel so",
    "start": "148650",
    "end": "154680"
  },
  {
    "text": "we have a get to channel to advertise on the github page and we'll try and help if we can",
    "start": "154680",
    "end": "159950"
  },
  {
    "text": "alright enough preamble we're going to talk about so we'll mention the we're",
    "start": "159950",
    "end": "165030"
  },
  {
    "text": "start talking a little bit about an idea from a guy called Pat Helens from a white paper called data on the inside",
    "start": "165030",
    "end": "170910"
  },
  {
    "text": "versus data on the outside we will talk a little bit about this notion of how this applies in service-oriented",
    "start": "170910",
    "end": "178320"
  },
  {
    "text": "architectures and micro-services will then look at requests versus",
    "start": "178320",
    "end": "183720"
  },
  {
    "text": "event-driven architectures and we'll have a brief try can't try an understanding of what or",
    "start": "183720",
    "end": "189540"
  },
  {
    "text": "what it was one of the key advantages that event-driven architecture is promise you over a question of and",
    "start": "189540",
    "end": "194730"
  },
  {
    "text": "architectures will ask why that can be hard to obtain unless you know some key",
    "start": "194730",
    "end": "200340"
  },
  {
    "text": "patterns that you're going to want to apply to preserve those benefits in pipelines and reference data we'll talk",
    "start": "200340",
    "end": "206790"
  },
  {
    "text": "about those patterns and how you apply them in correctness we'll show you some",
    "start": "206790",
    "end": "212910"
  },
  {
    "text": "of the things you to understand what those patterns work work correctly into",
    "start": "212910",
    "end": "218700"
  },
  {
    "text": "name and in compositions and conversations as a few additional pits the bits that are helpful to understand",
    "start": "218700",
    "end": "223920"
  },
  {
    "text": "once you have an event-driven architecture that are not necessary related to the main thrust of the rest",
    "start": "223920",
    "end": "230400"
  },
  {
    "text": "of the talk all right so let's talk about later on the outside versus data on the inside so I'm kind of I guess",
    "start": "230400",
    "end": "238400"
  },
  {
    "text": "unfortunate or lucky enough to have begun my kind of career towards",
    "start": "238400",
    "end": "243510"
  },
  {
    "text": "architecture when we had service-oriented architecture as a thing and Don box who worked at Microsoft on",
    "start": "243510",
    "end": "252030"
  },
  {
    "text": "comm is probably one of the fathers of SOA and he come up what we call the four",
    "start": "252030",
    "end": "257400"
  },
  {
    "text": "tenets of service-oriented architecture which are on this deck and we're gonna talk about in a second now you probably",
    "start": "257400",
    "end": "263160"
  },
  {
    "text": "all think I've got micro services SOA is yesterday I don't I don't care about SOA",
    "start": "263160",
    "end": "268530"
  },
  {
    "text": "there is a pretty much a direct line between SOA and micro services Microsoft's can be just seen as a modern",
    "start": "268530",
    "end": "275130"
  },
  {
    "text": "evolution from things that we have learned so the thought works Excel we're architects",
    "start": "275130",
    "end": "283110"
  },
  {
    "text": "now what's from the effigy I cook with Jim Weber and Jim Weber basically looked at the state of SOA which so it started",
    "start": "283110",
    "end": "289349"
  },
  {
    "text": "with web services soap you know Dom box cool so was behind WCF sort of that",
    "start": "289349",
    "end": "295020"
  },
  {
    "text": "model and people have found over time that led to a requester of an architecture which we can talk about later and have problems",
    "start": "295020",
    "end": "300210"
  },
  {
    "text": "give credit SOA to which basically work with events will show you how you do that but they've got kind of captured",
    "start": "300210",
    "end": "306930"
  },
  {
    "text": "and they got captured by vendors vendors lovely people obviously and they decided",
    "start": "306930",
    "end": "312180"
  },
  {
    "text": "that they wanted their slice of them effectively this architecture they wanted to make some money from it so",
    "start": "312180",
    "end": "318569"
  },
  {
    "text": "they created the thing called the enterprise service bus the idea was that all of your communication should go",
    "start": "318569",
    "end": "324120"
  },
  {
    "text": "through Enterprise Service bus will help you with workflows will help you with mapping between different message",
    "start": "324120",
    "end": "331979"
  },
  {
    "text": "formats in different systems BizTalk is an example really of an enterprise",
    "start": "331979",
    "end": "337469"
  },
  {
    "text": "service bus from Microsoft and the problem with those es B's was that they were centralized components quite often",
    "start": "337469",
    "end": "343889"
  },
  {
    "text": "looked after by centralized teams in your organization where you had to fill in if you worked in large enterprises",
    "start": "343889",
    "end": "349949"
  },
  {
    "text": "forms in triplicate to get access and people shoveled a lot of the business",
    "start": "349949",
    "end": "355259"
  },
  {
    "text": "logic into this centralized component rather than leaving in the micro services and Jim carpenter the idea that",
    "start": "355259",
    "end": "362699"
  },
  {
    "text": "he called guerrilla micro services a grill aside rather Agora so I said what",
    "start": "362699",
    "end": "368129"
  },
  {
    "text": "you really want is just to have your micro services and you want to see something simple you can deploy yourself",
    "start": "368129",
    "end": "373800"
  },
  {
    "text": "like have HTTP calls between the services or essentially have a lightweight broker lat rabbit and when",
    "start": "373800",
    "end": "380159"
  },
  {
    "text": "Martin Fowler and James goes to find their micro services concept they picked",
    "start": "380159",
    "end": "386639"
  },
  {
    "text": "on some of these ideas when they built their definition you can find on Martin's Blakey and that one was",
    "start": "386639",
    "end": "392339"
  },
  {
    "text": "basically repeated as smart endpoints dumb pipes so they really evolved a lot",
    "start": "392339",
    "end": "397800"
  },
  {
    "text": "of those ideas and brought some ideas from DevOps and DDD that we're also emerging the times has been kind of what is this what is the",
    "start": "397800",
    "end": "404490"
  },
  {
    "text": "current state of understanding micro service is the term itself comes from a",
    "start": "404490",
    "end": "412199"
  },
  {
    "text": "guy Oh Fred George fragile is also famous a program anarchy some of you may like",
    "start": "412199",
    "end": "418020"
  },
  {
    "text": "program Anarchy it says that the developers should be in charge nobody else really knows anything it sort of it",
    "start": "418020",
    "end": "423690"
  },
  {
    "text": "should all be about software developers sort of us just working directly with the customers we're gonna file all the product managers they know nothing we're",
    "start": "423690",
    "end": "430320"
  },
  {
    "text": "gonna fire all the QA who needed them and we're all gonna write tiny hundred line services those in the body will",
    "start": "430320",
    "end": "436830"
  },
  {
    "text": "replace them every so often so I tend to think of Fred's version as extreme SOA",
    "start": "436830",
    "end": "442370"
  },
  {
    "text": "it's kind of SOA and I've turned the dart up to 11th as well attack fans but um otherwise you can just think of a lot",
    "start": "442370",
    "end": "450060"
  },
  {
    "text": "running assent and the reason that's useful to us is because much of the literature about SOA is still relevant",
    "start": "450060",
    "end": "458250"
  },
  {
    "text": "in the world of micro services so a couple of things to understand here the first is basically what could we think",
    "start": "458250",
    "end": "464460"
  },
  {
    "text": "of as a typical micro the rules about a micro service and this is what we get",
    "start": "464460",
    "end": "469770"
  },
  {
    "text": "the four tenets which you can see above so one of them is the boundaries are explicit what we mean by that well we",
    "start": "469770",
    "end": "478139"
  },
  {
    "text": "mean that the only way to interact with our service is through a well defined API that could be an HTTP API",
    "start": "478139",
    "end": "486180"
  },
  {
    "text": "it could be G RPC it could be events over AMQP that were not worrying about",
    "start": "486180",
    "end": "492810"
  },
  {
    "text": "the technology choice that were using but what we're saying is there should be a well-defined API which is hopefully stable so we",
    "start": "492810",
    "end": "501479"
  },
  {
    "text": "basically partition our system into micro services we seek stable boundaries",
    "start": "501479",
    "end": "506760"
  },
  {
    "text": "things that won't change too much over time and that's why there's often alignment with the business's goals",
    "start": "506760",
    "end": "512430"
  },
  {
    "text": "business capability sometimes it's called nothing else can peer inside that",
    "start": "512430",
    "end": "521729"
  },
  {
    "text": "boundary slightly event horizon on a black hole ok what is inside belongs to",
    "start": "521729",
    "end": "528690"
  },
  {
    "text": "the owners that micro service the team is building it they can change the code as much as they want they can change",
    "start": "528690",
    "end": "534779"
  },
  {
    "text": "from using sequel server to DynamoDB if they want it shouldn't matter to anybody",
    "start": "534779",
    "end": "540240"
  },
  {
    "text": "else how they implement their service is entirely up to them provided they mayn't",
    "start": "540240",
    "end": "546899"
  },
  {
    "text": "in that contract that contract is a dependency you can take anything inside",
    "start": "546899",
    "end": "553230"
  },
  {
    "text": "is off-limits they also said that services are autonomous what you mean by",
    "start": "553230",
    "end": "559589"
  },
  {
    "text": "those I should bear to release my micro service and have no impact and other services provided I don't change my",
    "start": "559589",
    "end": "567389"
  },
  {
    "text": "boundary contract the boundary contract remains the same I can release the whole thing that means I can't share database",
    "start": "567389",
    "end": "575100"
  },
  {
    "text": "tables why you've aisle 8 my boundaries and B I'm no longer autonomous because",
    "start": "575100",
    "end": "582089"
  },
  {
    "text": "if you release me how do I know they haven't breakin somebody else who was reading from those tables directly so",
    "start": "582089",
    "end": "588869"
  },
  {
    "text": "you can't peer beyond this boundary that we've established around our micro service a couple of other ones that are",
    "start": "588869",
    "end": "596069"
  },
  {
    "text": "useful but not so relevant to the talk we share schema not type in other words we don't use dotnet Assemblies between",
    "start": "596069",
    "end": "602670"
  },
  {
    "text": "two micro services as a way of communicating what that's going to be a parent a wire we use a format like JSON",
    "start": "602670",
    "end": "608819"
  },
  {
    "text": "or XML or protobuf whatever is appropriate and that allows us actually",
    "start": "608819",
    "end": "614009"
  },
  {
    "text": "to not care how the other micro service is implemented I don't care how it's implemented I just care it has a",
    "start": "614009",
    "end": "619829"
  },
  {
    "text": "contract right the other team could be writing it in Lua for all I care as long",
    "start": "619829",
    "end": "625110"
  },
  {
    "text": "as they provide the contract and if and they provide a decent SLA and if you work in larger organisations it's",
    "start": "625110",
    "end": "631230"
  },
  {
    "text": "inevitable that you will eventually acquire a state of a larger number of frameworks and languages and",
    "start": "631230",
    "end": "637829"
  },
  {
    "text": "question.why policy is probably the least significant most of the time that really says in order for me to make a",
    "start": "637829",
    "end": "643800"
  },
  {
    "text": "call to you were gonna have to agree certain things like how we do authorization and we have a policy based",
    "start": "643800",
    "end": "649290"
  },
  {
    "text": "approach to that so we'll agree or we're going to use it or Thor whatever okay",
    "start": "649290",
    "end": "656600"
  },
  {
    "text": "but one of the things to understand is that even though I suggest that this is",
    "start": "659629",
    "end": "664829"
  },
  {
    "text": "kind of a black hole or my details live inside data has to leave my",
    "start": "664829",
    "end": "671429"
  },
  {
    "text": "micro-service otherwise it's not useful they - leaves via that stable boundary",
    "start": "671429",
    "end": "677480"
  },
  {
    "text": "so you might for example issue a get request can I have some data from your",
    "start": "677480",
    "end": "683610"
  },
  {
    "text": "micro service please and so we're going to use a example of hotel booking I know",
    "start": "683610",
    "end": "689309"
  },
  {
    "text": "nothing about hotel booking if you work in hotel software I apologize from the",
    "start": "689309",
    "end": "694439"
  },
  {
    "text": "bottom of my heart for trashing your domain but it's useful because you know I don't let my CV includes nothing in",
    "start": "694439",
    "end": "700769"
  },
  {
    "text": "hotels so you're not talking about nothing real and they raise events from",
    "start": "700769",
    "end": "707489"
  },
  {
    "text": "my micro service right I read an event that says this thing interesting thing happened in my micro service would you",
    "start": "707489",
    "end": "714720"
  },
  {
    "text": "like to know about it and there are a couple of interesting properties - those things that we raise",
    "start": "714720",
    "end": "723269"
  },
  {
    "text": "from our boundary so we so we don't own that data there's a single writer of",
    "start": "723269",
    "end": "730139"
  },
  {
    "text": "that data it is the micro server so that writes the data inside so we are not we",
    "start": "730139",
    "end": "735329"
  },
  {
    "text": "have no authority over it is just basically a copy that floats outside it's immutable there's no point in you",
    "start": "735329",
    "end": "743129"
  },
  {
    "text": "changing that data it won't cause an update so the dates in the database contain with inside the micro service it",
    "start": "743129",
    "end": "751470"
  },
  {
    "text": "is stale as soon as the data leaves my boundary it is possibly incorrect if you",
    "start": "751470",
    "end": "758879"
  },
  {
    "text": "can imagine that someone does a post into my booking service to create a new booking when you go and get the list of",
    "start": "758879",
    "end": "766589"
  },
  {
    "text": "bookings if that post comes in seconds after you've got the list of bookings your list of bookings is now stale you",
    "start": "766589",
    "end": "774720"
  },
  {
    "text": "don't have the information about that new booking that just arrived after you took the get bookings list for one of",
    "start": "774720",
    "end": "780959"
  },
  {
    "text": "those that's one of the reasons with things like HTTP we will do things like put for example a cache control header",
    "start": "780959",
    "end": "787139"
  },
  {
    "text": "on the information we will say how long do I think it's safe for you to hold onto the",
    "start": "787139",
    "end": "792390"
  },
  {
    "text": "information inside a cache you can keep a copy but it's gonna get stale it's",
    "start": "792390",
    "end": "799320"
  },
  {
    "text": "also a reason for example we have something like a last modified or an e-tag on an HTTP header we say I'm gonna",
    "start": "799320",
    "end": "807060"
  },
  {
    "text": "give you a way to determine whether the data you hold is still accurate and so I",
    "start": "807060",
    "end": "812730"
  },
  {
    "text": "can make an if modified since um I get requests and say you know I've got a copy locally in my cache is it still any",
    "start": "812730",
    "end": "819660"
  },
  {
    "text": "good or do I need to get a new version and so essentially we version the data",
    "start": "819660",
    "end": "828800"
  },
  {
    "text": "because it is style to determine how current our data is oops and Pat calls",
    "start": "828800",
    "end": "837390"
  },
  {
    "text": "these two put ideas of data outside data data that lives outside our service we",
    "start": "837390",
    "end": "844590"
  },
  {
    "text": "authored it you can have a copy of it you can cache it you can work with it and do whatever you will with it an",
    "start": "844590",
    "end": "850550"
  },
  {
    "text": "inside data data that essentially belongs inside our micro service and",
    "start": "850550",
    "end": "857750"
  },
  {
    "text": "obviously that you have a relationship but from the point of view of people outside I didn't know what that",
    "start": "857750",
    "end": "863670"
  },
  {
    "text": "relationship is we are inside data maybe they look very much like our outside data but it might look entirely",
    "start": "863670",
    "end": "868800"
  },
  {
    "text": "different",
    "start": "868800",
    "end": "870950"
  },
  {
    "text": "park that piece of information in your mind we will come back to it let's talk a little bit about requests versus",
    "start": "876620",
    "end": "883070"
  },
  {
    "text": "architectures versus event-driven architectures and why you might favor an event-driven architecture so I'm gonna",
    "start": "883070",
    "end": "889210"
  },
  {
    "text": "go light on the detail there are a lot of a lot of things going on but let me just like I try and highlight the",
    "start": "889210",
    "end": "894830"
  },
  {
    "text": "particular issue let us imagine that when I get a direct booking into my",
    "start": "894830",
    "end": "902380"
  },
  {
    "text": "company I decide that essentially what I'm gonna do is take a credit card",
    "start": "902380",
    "end": "910279"
  },
  {
    "text": "payment inform housekeeping that there is a booking on a given day and go to my",
    "start": "910279",
    "end": "915890"
  },
  {
    "text": "channel manager so that's covering things like Expedia bookings comm all the places where I advertise my hotel",
    "start": "915890",
    "end": "921920"
  },
  {
    "text": "and tell them to decrement the availability of rooms for that given date one of the problems if what I'm",
    "start": "921920",
    "end": "931220"
  },
  {
    "text": "doing here is making a call via HTTP plus Jason or G RPC is that I need all",
    "start": "931220",
    "end": "938990"
  },
  {
    "text": "of those services to be running in order to complete my booking you can think of",
    "start": "938990",
    "end": "945140"
  },
  {
    "text": "this like a phone call right I know we don't make phone calls anymore and my mum phones me but everyone else we just",
    "start": "945140",
    "end": "951680"
  },
  {
    "text": "send text right but back in the day of phone calls if I phone you up and you're not there I'm kind of frustrated because",
    "start": "951680",
    "end": "958760"
  },
  {
    "text": "I can't complete whatever action it is that I wanted to look at and so if the",
    "start": "958760",
    "end": "963890"
  },
  {
    "text": "channel manager is down for example my problem now is I can't I may not get a",
    "start": "963890",
    "end": "970040"
  },
  {
    "text": "completely booking because I've coupled my booking to the channel manager",
    "start": "970040",
    "end": "976150"
  },
  {
    "text": "obviously there are some workarounds I could choose to ignore the fact that basically I fail to talk to channel manager and I'll have that situation to",
    "start": "976150",
    "end": "982490"
  },
  {
    "text": "continue there's a particular property of requester and architectures that you",
    "start": "982490",
    "end": "987530"
  },
  {
    "text": "bind your uptime to the uptime of all the services you're dependent on if all",
    "start": "987530",
    "end": "993709"
  },
  {
    "text": "of your services have 99.9 uptime and you have about four of them that gives",
    "start": "993709",
    "end": "999620"
  },
  {
    "text": "you 99.5 uptime at best that's an outage",
    "start": "999620",
    "end": "1004630"
  },
  {
    "text": "every day on average in about ten minutes now you may say 10 minute",
    "start": "1004630",
    "end": "1010270"
  },
  {
    "text": "but I work for a currently for a food",
    "start": "1010270",
    "end": "1015970"
  },
  {
    "text": "provider called Justi we connect consumers of restaurants and delivery partners and ten minutes during peak",
    "start": "1015970",
    "end": "1023950"
  },
  {
    "text": "order is a lot of orders hundreds of thousands of orders that we haven't",
    "start": "1023950",
    "end": "1030100"
  },
  {
    "text": "taken and delivered to our restaurant partners so though ten minutes doesn't",
    "start": "1030100",
    "end": "1035589"
  },
  {
    "text": "seem very much it's at the wrong time of day it's an enormous Li long window to file for so the question is can we try",
    "start": "1035590",
    "end": "1043930"
  },
  {
    "text": "and avoid these problems or a question of an architecture now just as an aside if you are forced into this model that's",
    "start": "1043930",
    "end": "1049750"
  },
  {
    "text": "what you get into low balancing across various instances using our service mash acceptor to try and give you a reach",
    "start": "1049750",
    "end": "1056380"
  },
  {
    "text": "rise in the circuit breakers so there are solutions but one solution is",
    "start": "1056380",
    "end": "1061780"
  },
  {
    "text": "basically to move to an event-driven architecture so with an event-driven architecture I simply raise an event",
    "start": "1061780",
    "end": "1067720"
  },
  {
    "text": "that says I have a direct booking and I have all the other micro services simply",
    "start": "1067720",
    "end": "1074500"
  },
  {
    "text": "subscribed to a channel which is identified by a topic or a routing key that says I want to hear about new",
    "start": "1074500",
    "end": "1081670"
  },
  {
    "text": "direct bookings thank you very much that'd be really great and so for yourself a housekeeping",
    "start": "1081670",
    "end": "1087190"
  },
  {
    "text": "just says I'm gonna listen to direct bookings and we send in a message and",
    "start": "1087190",
    "end": "1093370"
  },
  {
    "text": "the thing is this is a synchronous and decoupled it's like because we don't",
    "start": "1093370",
    "end": "1099040"
  },
  {
    "text": "send phone calls anymore I send you an SMS right I sent you an SMS and you can",
    "start": "1099040",
    "end": "1104740"
  },
  {
    "text": "you can retrieve it in five minutes when you finally get to look at your phone when you finish that important conversation that you were having about",
    "start": "1104740",
    "end": "1111100"
  },
  {
    "text": "what you learned at NDC Osler today and that asynchronous property means it",
    "start": "1111100",
    "end": "1116650"
  },
  {
    "text": "doesn't really matter to me if that other service is not available at that",
    "start": "1116650",
    "end": "1121810"
  },
  {
    "text": "time what it will do you just stick them in a queue we refer to this as",
    "start": "1121810",
    "end": "1129520"
  },
  {
    "text": "guaranteed delivery okay channel manager will eventually get that message now there is an issue",
    "start": "1129520",
    "end": "1135580"
  },
  {
    "text": "called eventual consistency and that means if channel manager is offline then comes back online again there is a",
    "start": "1135580",
    "end": "1141040"
  },
  {
    "text": "window during which our availability will look greater than it is out there to basically customers",
    "start": "1141040",
    "end": "1148180"
  },
  {
    "text": "using our service on booking.com or Expedia ok and that is potentially a",
    "start": "1148180",
    "end": "1154060"
  },
  {
    "text": "problem but businesses solved that problem for many years before we has",
    "start": "1154060",
    "end": "1159240"
  },
  {
    "text": "software and so the usual model is a hotel will simply direct that booking to an overflow hotel where essentially it",
    "start": "1159240",
    "end": "1166210"
  },
  {
    "text": "could be dealt with but I said - you've got time as well you could contact the customer and say I'm sorry we have to be",
    "start": "1166210",
    "end": "1171490"
  },
  {
    "text": "fully booked on that date and I'm afraid I'm going to have to cancel your booking ok and here's some is a voucher for your",
    "start": "1171490",
    "end": "1177880"
  },
  {
    "text": "next booking or ever more award points or some mechanism that usually the business will understand to solve that",
    "start": "1177880",
    "end": "1183700"
  },
  {
    "text": "problem ok as an interesting aside I had a",
    "start": "1183700",
    "end": "1190000"
  },
  {
    "text": "situation where I arrived at a hotel where from eventual consistency reasons",
    "start": "1190000",
    "end": "1197130"
  },
  {
    "text": "my house housekeeping had not rented the ring in time was a very expensive hotel and they simply said to me sir go to the",
    "start": "1197130",
    "end": "1203470"
  },
  {
    "text": "bar and greet as much expensive alcohol as you like and will tell you when your room is ready and I was quite glad my",
    "start": "1203470",
    "end": "1210460"
  },
  {
    "text": "room wasn't ready for quite some time and I was quite drunk at that point right so there's always usually adequate",
    "start": "1210460",
    "end": "1218080"
  },
  {
    "text": "business solution to the problem or eventual consistency ok but that's a",
    "start": "1218080",
    "end": "1224320"
  },
  {
    "text": "question that usually comes up at this point so I go away I'll be very excited",
    "start": "1224320",
    "end": "1229780"
  },
  {
    "text": "I'm gonna build event-driven architectures Ian's tell people about them I've got my copy of n service bass",
    "start": "1229780",
    "end": "1235150"
  },
  {
    "text": "or brighter or whatever off I go and I building my system and I say great we",
    "start": "1235150",
    "end": "1241030"
  },
  {
    "text": "can take a direct booking and direct booking for a customer and account and the customer with the account his credit",
    "start": "1241030",
    "end": "1248650"
  },
  {
    "text": "card heaters aren't part of the booking we go and look them up again it's the credit card that we've got stored on file for the customer how are we gonna",
    "start": "1248650",
    "end": "1255400"
  },
  {
    "text": "look up his account details because if my answer is that I request that",
    "start": "1255400",
    "end": "1262630"
  },
  {
    "text": "information from the accounts micro service I've just reintroduced temporal",
    "start": "1262630",
    "end": "1267970"
  },
  {
    "text": "coupling into my workflow now in principle in this kind of scenario I",
    "start": "1267970",
    "end": "1275320"
  },
  {
    "text": "could retry a few times maybe because accounts has got my message essentially I think to myself",
    "start": "1275320",
    "end": "1280480"
  },
  {
    "text": "it's fine I'll just keep retrying but any flow are effectively you want to complete within a reasonable time window",
    "start": "1280480",
    "end": "1287260"
  },
  {
    "text": "this could be a significant problem right if accounts is down how do I finish this operation in a way that essentially is",
    "start": "1287260",
    "end": "1294340"
  },
  {
    "text": "going to allow me to release the resources I'm currently using in the credit card payment system which are",
    "start": "1294340",
    "end": "1300400"
  },
  {
    "text": "trying to get a hold of information out of accounts so we're going to do is try",
    "start": "1300400",
    "end": "1310120"
  },
  {
    "text": "and solve that problem in the event different way rather than resorting back",
    "start": "1310120",
    "end": "1315250"
  },
  {
    "text": "to using requests so there are a couple",
    "start": "1315250",
    "end": "1321400"
  },
  {
    "text": "of options really so if we look in the lower left hand corner of that slide",
    "start": "1321400",
    "end": "1327210"
  },
  {
    "text": "what we could always do is ensure that the message that is received by the",
    "start": "1327210",
    "end": "1332830"
  },
  {
    "text": "credit card payment service has all of the data it needs to process the request",
    "start": "1332830",
    "end": "1338070"
  },
  {
    "text": "so I simply make sure that from somewhere I've obtained your credit card",
    "start": "1338070",
    "end": "1344110"
  },
  {
    "text": "details and added them into the request such that you can process it correctly",
    "start": "1344110",
    "end": "1349150"
  },
  {
    "text": "all right and we're gonna explain in a second what your options are for filling that data in on that message assuming",
    "start": "1349150",
    "end": "1357460"
  },
  {
    "text": "that it's not in the direct booking so the classified a direct booking not an account and they've got according their credit card I may have it right from the",
    "start": "1357460",
    "end": "1363310"
  },
  {
    "text": "beginning the process but assuming in this slightly contrived scenario that I have to get the information out of the",
    "start": "1363310",
    "end": "1368860"
  },
  {
    "text": "egg from the from your account details how do i how do i add that to the message given that the direct booking",
    "start": "1368860",
    "end": "1375100"
  },
  {
    "text": "event was raised by the direct bookings micro service not by the accounts micro service and the second option which",
    "start": "1375100",
    "end": "1384610"
  },
  {
    "text": "we'll get to after that is that my payment service has the information it",
    "start": "1384610",
    "end": "1391210"
  },
  {
    "text": "needs in a cache it is cached information from the account service",
    "start": "1391210",
    "end": "1398370"
  },
  {
    "text": "about accounts and their credit card details that it needs to service its requests ok and the clue to the what",
    "start": "1398370",
    "end": "1409540"
  },
  {
    "text": "we're going to do is to think back to that early sex about reference data right remember we",
    "start": "1409540",
    "end": "1414610"
  },
  {
    "text": "can cache data coming out of a service",
    "start": "1414610",
    "end": "1418799"
  },
  {
    "text": "so messaging tends to work by pipes and filters model I have a source of a",
    "start": "1420510",
    "end": "1427210"
  },
  {
    "text": "message I have some endpoint destination which I want to get you to service the",
    "start": "1427210",
    "end": "1432309"
  },
  {
    "text": "request but like in a certain arbitrary number of steps between the two and I",
    "start": "1432309",
    "end": "1438820"
  },
  {
    "text": "simply published a one channel pick up the request and then I essentially consume from another channel and it's",
    "start": "1438820",
    "end": "1444880"
  },
  {
    "text": "important usually so a channel you mean think something like a topic or a routine key depending on your technology",
    "start": "1444880",
    "end": "1450370"
  },
  {
    "text": "of choice it's important understand that you have multiple channels involved so",
    "start": "1450370",
    "end": "1456100"
  },
  {
    "text": "my direct bookings publish is something like direct booking made on account and",
    "start": "1456100",
    "end": "1463020"
  },
  {
    "text": "the account service listens for those messages and it says are as a direct",
    "start": "1463020",
    "end": "1468730"
  },
  {
    "text": "booking made on account I need to enrich that message with the credit card",
    "start": "1468730",
    "end": "1474190"
  },
  {
    "text": "information when I've added the credit card information I will raise a message",
    "start": "1474190",
    "end": "1479470"
  },
  {
    "text": "which is I mean that direct booking made with credit card details and the credit",
    "start": "1479470",
    "end": "1485410"
  },
  {
    "text": "card system listens to that message and says great I've got a direct booking and",
    "start": "1485410",
    "end": "1492280"
  },
  {
    "text": "I've got the credit card details I can take the payment so while using that",
    "start": "1492280",
    "end": "1498309"
  },
  {
    "text": "pipeline we are able to leave micro services as the single authorities about",
    "start": "1498309",
    "end": "1504400"
  },
  {
    "text": "their own data I don't have to let you call me to get hold of that data VAR a",
    "start": "1504400",
    "end": "1510400"
  },
  {
    "text": "request or even worse reaching beyond my boundaries of my database I simply ask",
    "start": "1510400",
    "end": "1517510"
  },
  {
    "text": "you to complete a pipeline where you will enrich the data before it reaches",
    "start": "1517510",
    "end": "1523690"
  },
  {
    "text": "me now you can't have a little bit of concern about a latency I'm making some",
    "start": "1523690",
    "end": "1529390"
  },
  {
    "text": "extra hops maybe if I need something high-performing this is not the better option you come back to our options a",
    "start": "1529390",
    "end": "1535210"
  },
  {
    "text": "second sometimes that model gets quite",
    "start": "1535210",
    "end": "1540220"
  },
  {
    "text": "complicated so the previous way of doing it were essentially",
    "start": "1540220",
    "end": "1545320"
  },
  {
    "text": "a pipeline I passed events between one and the other we tend to refer to as choreography all right I am simply",
    "start": "1545320",
    "end": "1551440"
  },
  {
    "text": "letting events flow around the system and I listen to this event you published that event etc okay another model is",
    "start": "1551440",
    "end": "1559299"
  },
  {
    "text": "called orchestration and orchestration says a component an Orchestrator usually",
    "start": "1559299",
    "end": "1565090"
  },
  {
    "text": "thought of logically as being at the API gateway layer couldn´t conducts the flow",
    "start": "1565090",
    "end": "1571600"
  },
  {
    "text": "of operations so it says I want to make a direct booking and the direct booking",
    "start": "1571600",
    "end": "1577000"
  },
  {
    "text": "system says okay great I've raised a direct booking in the direct booking system and that sagar then says okay",
    "start": "1577000",
    "end": "1586269"
  },
  {
    "text": "great i need to fill in the account details because basically the type of booking was a booking on account",
    "start": "1586269",
    "end": "1592240"
  },
  {
    "text": "hey account system fill in the account details on this message and it passed it",
    "start": "1592240",
    "end": "1600460"
  },
  {
    "text": "to the credit card system and says hey credit card system here is a message basically of our direct booking for this",
    "start": "1600460",
    "end": "1605919"
  },
  {
    "text": "account go and take the payment and a trivial example like this there's",
    "start": "1605919",
    "end": "1611500"
  },
  {
    "text": "probably no significant advantage over the first flow but the real advantage of",
    "start": "1611500",
    "end": "1616870"
  },
  {
    "text": "this process is I can add compensation so compensation is what I do when",
    "start": "1616870",
    "end": "1621909"
  },
  {
    "text": "something goes wrong right what do I do when your credit card is declined",
    "start": "1621909",
    "end": "1628440"
  },
  {
    "text": "now you can actually in this particular case so the problem by choreography if you want to as well so I just had a",
    "start": "1628440",
    "end": "1634450"
  },
  {
    "text": "situation where my credit card had passed over its expiry date for a booking I've made in a hotel probably",
    "start": "1634450",
    "end": "1640419"
  },
  {
    "text": "nine months ago and actually all that happened was they just phoned me up and they said mr. Cooper could you give us a",
    "start": "1640419",
    "end": "1646570"
  },
  {
    "text": "new credit card that's called manual compensation right effectively and that's quite possible choreography we have a booking status",
    "start": "1646570",
    "end": "1652899"
  },
  {
    "text": "and something that goes to the bookings every so often and says all other any bookings that basically have a status of effectively you know card declined or",
    "start": "1652899",
    "end": "1659409"
  },
  {
    "text": "well but with this process of a Sardar I can manage that in some way right the",
    "start": "1659409",
    "end": "1665080"
  },
  {
    "text": "Sarkar can effectively update my direct booking and say change display status - but card",
    "start": "1665080",
    "end": "1670840"
  },
  {
    "text": "declined it may send an email to an operator saying please contact mr.",
    "start": "1670840",
    "end": "1676750"
  },
  {
    "text": "Cooper and tell him his car is been declined and he needs to replace it with a new one etc and I can control",
    "start": "1676750",
    "end": "1683019"
  },
  {
    "text": "that flow and it also gives me a central point - usually because storing state in some kind of database generally a song a",
    "start": "1683019",
    "end": "1690099"
  },
  {
    "text": "state machine and it's sorting database saying so I can go and query that and say where is mr. Cooper's booking and",
    "start": "1690099",
    "end": "1696759"
  },
  {
    "text": "that's useful if someone gets on the phone to a call center and say I thought I've cuz I've just complain saying you",
    "start": "1696759",
    "end": "1702669"
  },
  {
    "text": "know I made a bookie your hotel in the 15th and I've received no confirmation someone can go in look at the state of",
    "start": "1702669",
    "end": "1708309"
  },
  {
    "text": "that particular transaction and it says to them mr. Cooper's card was declined and they can then say to me your card",
    "start": "1708309",
    "end": "1714159"
  },
  {
    "text": "was declined mr. Cooper would you like to present a new card right so having some kind of saga helps manage that",
    "start": "1714159",
    "end": "1720460"
  },
  {
    "text": "process okay but earlier on we talked",
    "start": "1720460",
    "end": "1726609"
  },
  {
    "text": "about this model right we said the patterns are defined that there was outside data and inside data and the",
    "start": "1726609",
    "end": "1733629"
  },
  {
    "text": "outside data was what comes out of a micro service in the form of data we get",
    "start": "1733629",
    "end": "1739210"
  },
  {
    "text": "get for a basically an HTTP request or a G RPC request or events that we raise",
    "start": "1739210",
    "end": "1744249"
  },
  {
    "text": "from the boundary of the system and that data is a mutable style and versioned",
    "start": "1744249",
    "end": "1750820"
  },
  {
    "text": "and it is very suitable for caching so",
    "start": "1750820",
    "end": "1756580"
  },
  {
    "text": "what I could do is listen to events",
    "start": "1756580",
    "end": "1761799"
  },
  {
    "text": "being raised by the accounts system and the account system would publish events",
    "start": "1761799",
    "end": "1767559"
  },
  {
    "text": "when a new account was created or it was updated and maybe it raises quite specific events like a credit card",
    "start": "1767559",
    "end": "1774129"
  },
  {
    "text": "details updated so I only had to listen for a fraction of the events coming out of the account system ones that I know",
    "start": "1774129",
    "end": "1780399"
  },
  {
    "text": "I'm interested in well it lets me do is build a cache of the account systems",
    "start": "1780399",
    "end": "1789219"
  },
  {
    "text": "data that I as the payment service own and can access it lives within my",
    "start": "1789219",
    "end": "1795999"
  },
  {
    "text": "boundary it's my copy I've only use a small number of fields that the account system actually creates",
    "start": "1795999",
    "end": "1802210"
  },
  {
    "text": "when it publishes for example the credit card number the CBC code may be your",
    "start": "1802210",
    "end": "1808899"
  },
  {
    "text": "some of your address details so I can confirm those but I can listen to the account system",
    "start": "1808899",
    "end": "1814970"
  },
  {
    "text": "and construct a cache which I can then use at runtime to service my requests so",
    "start": "1814970",
    "end": "1822590"
  },
  {
    "text": "account says something like you know credit card details updated a worker process running inside my micro service",
    "start": "1822590",
    "end": "1829850"
  },
  {
    "text": "updates my local cache of account data and I just sit there listening to events",
    "start": "1829850",
    "end": "1837380"
  },
  {
    "text": "and recounts updating my own version of what lives in the account system and",
    "start": "1837380",
    "end": "1842420"
  },
  {
    "text": "then when a booking event is raised I can simply ask my local cache about your",
    "start": "1842420",
    "end": "1849740"
  },
  {
    "text": "credit card details rather making a request back to you and the significant",
    "start": "1849740",
    "end": "1856220"
  },
  {
    "text": "advantage of this model is that I am essentially now insulated from your",
    "start": "1856220",
    "end": "1861770"
  },
  {
    "text": "system and it's it's uptime and availability because I can service",
    "start": "1861770",
    "end": "1868160"
  },
  {
    "text": "requests without accounts being available a cat you can't add a new account and you can't update your credit",
    "start": "1868160",
    "end": "1874250"
  },
  {
    "text": "card details accounts is down but from the flow of me with taking new hotel bookings that's viable and seeing that's",
    "start": "1874250",
    "end": "1883070"
  },
  {
    "text": "probably my money-making flow that's what I want to protect against the loss",
    "start": "1883070",
    "end": "1888710"
  },
  {
    "text": "of availability of a service so while accounts I may not care for couches down for a window time the",
    "start": "1888710",
    "end": "1895070"
  },
  {
    "text": "lights up a window saying so are it's not possible to add in your account at this point in time certainly with my",
    "start": "1895070",
    "end": "1900230"
  },
  {
    "text": "booking flow I want to make sure there's no real impediment and if you're booking on account right telling you to come",
    "start": "1900230",
    "end": "1907460"
  },
  {
    "text": "back later is probably gonna cost you it's gonna go somewhere else but with a model like this I'm insulated from your",
    "start": "1907460",
    "end": "1914120"
  },
  {
    "text": "system I don't I have no dependencies right I read I received the event and I'm able to act on it on my own and in",
    "start": "1914120",
    "end": "1920570"
  },
  {
    "text": "turn credit card payments after it's essentially made the payment will raise its own events and that can be listened",
    "start": "1920570",
    "end": "1926000"
  },
  {
    "text": "to by systems downstream from credit card payments which may in turn be using the data for their own purposes for",
    "start": "1926000",
    "end": "1931850"
  },
  {
    "text": "example may be raising financial information accounts invoices reports right I don't care who they are they can",
    "start": "1931850",
    "end": "1938000"
  },
  {
    "text": "have a cache of my data as well they don't own that data right it's potentially stale they should they",
    "start": "1938000",
    "end": "1944180"
  },
  {
    "text": "should track version numbers against it but that data essentially is usable by",
    "start": "1944180",
    "end": "1949610"
  },
  {
    "text": "them to process requests",
    "start": "1949610",
    "end": "1952750"
  },
  {
    "text": "the process of using events to create reference data can show you that again",
    "start": "1959380",
    "end": "1966130"
  },
  {
    "text": "is called event carriage state transfer Martin Fowler named it recently we've",
    "start": "1966130",
    "end": "1972490"
  },
  {
    "text": "been doing it for years but mine's now named it so that's great we can all talk about it it exists now",
    "start": "1972490",
    "end": "1978870"
  },
  {
    "text": "another thing in technology exists and Kyle Martin names it I'm not really sure but yeah you met earlier on people quote",
    "start": "1978870",
    "end": "1987220"
  },
  {
    "text": "often referred to it by just the term reference data and one of the interesting things I noted over time",
    "start": "1987220",
    "end": "1992830"
  },
  {
    "text": "about reference data is that for example it's in if you're in the breast in practice they refer to reference data",
    "start": "1992830",
    "end": "1999159"
  },
  {
    "text": "but don't explain it they just assume that you understand what it is it's like going up one of the great secrets of",
    "start": "1999159",
    "end": "2004789"
  },
  {
    "text": "architecture and building event-driven architectures the single reference data people say oh and if you're building reference data you should do this and",
    "start": "2004789",
    "end": "2011250"
  },
  {
    "text": "people are like what is reference data right so you may see the term reference",
    "start": "2011250",
    "end": "2016289"
  },
  {
    "text": "data eventually the term projections because people often liken this to a",
    "start": "2016289",
    "end": "2021860"
  },
  {
    "text": "CQRS model where effectively I have commands coming in to a system and I'm generating a view off that basically",
    "start": "2021860",
    "end": "2028919"
  },
  {
    "text": "from what happens there and you might people relate it as well too many ideas an event sourcing where effectively you",
    "start": "2028919",
    "end": "2034470"
  },
  {
    "text": "are building a projection of a stream of events so there are rated ideas if you really",
    "start": "2034470",
    "end": "2040710"
  },
  {
    "text": "want to cause a fight on Twitter because you're bored one afternoon you simply",
    "start": "2040710",
    "end": "2045840"
  },
  {
    "text": "say something like on Twitter hey I'm really interested in using Kafka for",
    "start": "2045840",
    "end": "2051750"
  },
  {
    "text": "event sourcing as what caused a fight really most of the scenarios that the CAF group like confident describing for",
    "start": "2051750",
    "end": "2058080"
  },
  {
    "text": "Kafka are actually event carried State transfer not event sourcing but upsets people it's finally got the popcorn",
    "start": "2058080",
    "end": "2063750"
  },
  {
    "text": "understand back and watch basically as the blood congeals on the floor okay so",
    "start": "2063750",
    "end": "2070980"
  },
  {
    "text": "um if we tape it around for a while so veterinary State transfer is one approach to doing it but there are",
    "start": "2070980",
    "end": "2076260"
  },
  {
    "text": "others atom feeds so you may see this one talked about a von Vernon who's here somewhere at this conference I think in",
    "start": "2076260",
    "end": "2083190"
  },
  {
    "text": "one of his the major design books talks about this model so at one point people",
    "start": "2083190",
    "end": "2088740"
  },
  {
    "text": "would say I'm going to use an atom feed to expose all of the events that have happened inside my",
    "start": "2088740",
    "end": "2094290"
  },
  {
    "text": "micro-service and they use an item fee because it has some interesting properties and one of those is that every page after the current page is",
    "start": "2094290",
    "end": "2101760"
  },
  {
    "text": "immutable it won't always have the same contents and that makes it very easy for you to read an event history because I",
    "start": "2101760",
    "end": "2108570"
  },
  {
    "text": "start on the current page and I just keep paging until I see the first event that I recognized then I go back to the",
    "start": "2108570",
    "end": "2114630"
  },
  {
    "text": "beginning and they use a lot of etags to tell you whether you put the pages change so I can query the current page",
    "start": "2114630",
    "end": "2121020"
  },
  {
    "text": "and say are the new entries on this page so I can poll that and only read in that case so it's a quite efficient mechanism",
    "start": "2121020",
    "end": "2128839"
  },
  {
    "text": "nowadays because there are better technology choices available it's used less than it was in the past but it's a",
    "start": "2128839",
    "end": "2136170"
  },
  {
    "text": "very easy to access version if you have trouble installing middleware etc in your organization extract transform and",
    "start": "2136170",
    "end": "2143160"
  },
  {
    "text": "load so people have done this a lot in the past was simply replicating data out of a database in one like SOA into",
    "start": "2143160",
    "end": "2150329"
  },
  {
    "text": "another SOA right lots of banks in London for years have done I've used",
    "start": "2150329",
    "end": "2155520"
  },
  {
    "text": "this approach of replicating their data everywhere by using ETL so valid strategy the problem of course is ETL is",
    "start": "2155520",
    "end": "2162300"
  },
  {
    "text": "not always the best particularly for doing things like you know sending using transaction logs but other systems but",
    "start": "2162300",
    "end": "2168060"
  },
  {
    "text": "also you're binding yourself to using the same database technology usually across all your micro services that may",
    "start": "2168060",
    "end": "2174359"
  },
  {
    "text": "not be what you want to do you know one micro search might want to use a graph DB one might want to use basically",
    "start": "2174359",
    "end": "2179760"
  },
  {
    "text": "dynamo or cosmos and so that kind of binding you're you're removed of that",
    "start": "2179760",
    "end": "2185190"
  },
  {
    "text": "from that dependency on technology by using essentially events as the medium",
    "start": "2185190",
    "end": "2190410"
  },
  {
    "text": "of actually to transmit over you can use FTP as well write as a no perfect buy",
    "start": "2190410",
    "end": "2195900"
  },
  {
    "text": "strategy the more modern equivalent will be write something to blob storage somewhere effectively and read from that instead and essentially you're doing",
    "start": "2195900",
    "end": "2202800"
  },
  {
    "text": "pretty much what some of the message globe provides which took about a second D by creating effectively an append-only",
    "start": "2202800",
    "end": "2208319"
  },
  {
    "text": "stream of photo of events so very strategies you can use I do a lot of e",
    "start": "2208319",
    "end": "2214680"
  },
  {
    "text": "CST but then I'm kind of an events guy but you can pick other ones if you want to okay there are various types of",
    "start": "2214680",
    "end": "2222420"
  },
  {
    "text": "reference data you can share an operand data our friend data is essentially useful",
    "start": "2222420",
    "end": "2230270"
  },
  {
    "text": "when you want something like a product description right or some of those tiny",
    "start": "2230270",
    "end": "2236040"
  },
  {
    "text": "oh I've got an ID I want to have the description so I can return the description in my you make a get request",
    "start": "2236040",
    "end": "2242100"
  },
  {
    "text": "to me I've just got an idea about a product in another system rather than effectively having to mix get recalls to",
    "start": "2242100",
    "end": "2248880"
  },
  {
    "text": "both systems so I can just fill in the description I can have it in my reference data and I can just include that in the return value shared",
    "start": "2248880",
    "end": "2256740"
  },
  {
    "text": "collections so share collections or mostly what this is used for and so we say things for these are lists of things",
    "start": "2256740",
    "end": "2263220"
  },
  {
    "text": "that nearly every micro service in your system needs so list of customers or users of the system lists of companies",
    "start": "2263220",
    "end": "2270450"
  },
  {
    "text": "basically registered to use your platform so just eat for example I use that list of restaurants list serve",
    "start": "2270450",
    "end": "2276090"
  },
  {
    "text": "customers list of delivery partners ok because most of your microservices will",
    "start": "2276090",
    "end": "2281250"
  },
  {
    "text": "need that data in somewhere to operate and it saves you continually making request based calls to those other",
    "start": "2281250",
    "end": "2287190"
  },
  {
    "text": "architectures I just think about this way if you if you slightly Jebus if I was gonna remain AC to be your request",
    "start": "2287190",
    "end": "2292800"
  },
  {
    "text": "to get that data then that desi fee request would surely indicates to me that I could cash it because AC feat",
    "start": "2292800",
    "end": "2299040"
  },
  {
    "text": "that's how the web scale as we cache data and you cached locally you cash by secretly at the point of the consumer",
    "start": "2299040",
    "end": "2304650"
  },
  {
    "text": "not the point of not in the origin server so what I'm doing is caching the HTTP request data but if I do the event",
    "start": "2304650",
    "end": "2311370"
  },
  {
    "text": "carriage state trance from just doing off an event and I read that local cache rather than asking you again for the",
    "start": "2311370",
    "end": "2318090"
  },
  {
    "text": "same data and historical artifacts it's not I got the facts coalesces for your",
    "start": "2318090",
    "end": "2323400"
  },
  {
    "text": "transactional system that tends to be more I am filling my data Lake full of",
    "start": "2323400",
    "end": "2329190"
  },
  {
    "text": "stuff based on the events that had on the microservices because it turns out",
    "start": "2329190",
    "end": "2334380"
  },
  {
    "text": "and now I put all my doctor in these individual micro services it's very difficult to create queries across",
    "start": "2334380",
    "end": "2339750"
  },
  {
    "text": "multiple micro service boundaries so I'm going to take all that event data and I'm going to shove it into a massive",
    "start": "2339750",
    "end": "2344880"
  },
  {
    "text": "Lake where effectively I can then query it my my biggest tip is that reference",
    "start": "2344880",
    "end": "2352260"
  },
  {
    "text": "data should not know the rules what I mean by that when I receive an event or",
    "start": "2352260",
    "end": "2358290"
  },
  {
    "text": "make a get request to you I ain't print the data you give me myself by my own rules what I don't do is copy your",
    "start": "2358290",
    "end": "2366660"
  },
  {
    "text": "rules from inside your micro service and then apply them to my service because",
    "start": "2366660",
    "end": "2371730"
  },
  {
    "text": "then I've coupled the main knowledge between these two micro services and if it changes in one it's gonna have to",
    "start": "2371730",
    "end": "2378270"
  },
  {
    "text": "change in the other okay so you need to better interpret that yourself don't replicate the rules and",
    "start": "2378270",
    "end": "2385680"
  },
  {
    "text": "if the data in the other micro service has to be understood by complex algorithms for example we have some",
    "start": "2385680",
    "end": "2391890"
  },
  {
    "text": "stuff adjusting about you know delivery radiuses etc on where we'll deliver to",
    "start": "2391890",
    "end": "2398460"
  },
  {
    "text": "and what time windows are about that it's not a suitable artifact for reference data you're better off using",
    "start": "2398460",
    "end": "2403859"
  },
  {
    "text": "that kind of pipeline approach in doing choreographer orchestration to fill the data in that context you're going to get",
    "start": "2403859",
    "end": "2410670"
  },
  {
    "text": "more latency because the great thing about reference data is it's pretty low latency just calling the database rates",
    "start": "2410670",
    "end": "2416460"
  },
  {
    "text": "faster than making that request of an architecture was in the first place and it's certainly faster than basically filling that pipeline of the better",
    "start": "2416460",
    "end": "2423510"
  },
  {
    "text": "messages it flows through a choreography or orchestration so don't pick reference",
    "start": "2423510",
    "end": "2431010"
  },
  {
    "text": "they too were essentially you need to bring the rules with you most of it should be fairly basic stuff but for",
    "start": "2431010",
    "end": "2436380"
  },
  {
    "text": "some credit card details you know the account system has no rules about it it's the credit card payment system",
    "start": "2436380",
    "end": "2441480"
  },
  {
    "text": "that's going to have the rules about it correctness okay this is the hop up so",
    "start": "2441480",
    "end": "2450930"
  },
  {
    "text": "I'm gonna just drink some water my battery's low",
    "start": "2450930",
    "end": "2455510"
  },
  {
    "text": "all right so if I am sending data from",
    "start": "2476390",
    "end": "2483020"
  },
  {
    "text": "say my accounts system and it's been",
    "start": "2483020",
    "end": "2488849"
  },
  {
    "text": "picked up by the credit card like receptors downstream I want to make sure",
    "start": "2488849",
    "end": "2495170"
  },
  {
    "text": "that they both agree on what the current state of the account is what the credit",
    "start": "2495170",
    "end": "2501990"
  },
  {
    "text": "card information that you put on file is there's no good me trying to take a payment from a CRO historical credit",
    "start": "2501990",
    "end": "2508559"
  },
  {
    "text": "card and then saying it's declined and you finding up the customer and the customer saying but I gave you in the",
    "start": "2508559",
    "end": "2514890"
  },
  {
    "text": "you credit card details yesterday you might get a really latency of a small of a short window the customer is probably gonna tolerate that but yesterday's",
    "start": "2514890",
    "end": "2521910"
  },
  {
    "text": "enemy no good so you to make sure that the changes in the account system always flow to the downstream credit card",
    "start": "2521910",
    "end": "2529260"
  },
  {
    "text": "payment system okay so in this",
    "start": "2529260",
    "end": "2534750"
  },
  {
    "text": "particular in vivexx there's also this particular model right the the service",
    "start": "2534750",
    "end": "2541109"
  },
  {
    "text": "essentially that effectively wants to change its own state to the auto service it's going to like to the orders table",
    "start": "2541109",
    "end": "2547849"
  },
  {
    "text": "ignore the outlets for the moment and it's also going to write to the message broker to send a message downstream to",
    "start": "2547849",
    "end": "2554490"
  },
  {
    "text": "say hey I have changed the state basically of this given record so we'll just use the example of the council sets",
    "start": "2554490",
    "end": "2560790"
  },
  {
    "text": "account service and today after message broker it's unlikely that we can create",
    "start": "2560790",
    "end": "2567390"
  },
  {
    "text": "a transaction across our message broker and our database probably the two",
    "start": "2567390",
    "end": "2574049"
  },
  {
    "text": "technologies don't share any kind of distributed transaction coordinator maybe if we're using MSM queue and were",
    "start": "2574049",
    "end": "2580290"
  },
  {
    "text": "using sequel server that will work but essentially even then we'd use a scaling",
    "start": "2580290",
    "end": "2587460"
  },
  {
    "text": "issue that by basically holding a transaction open across two resources everything will slow down that creates a",
    "start": "2587460",
    "end": "2595710"
  },
  {
    "text": "risk there's a risk for example that I might write through my database and",
    "start": "2595710",
    "end": "2600809"
  },
  {
    "text": "update it and say here in the new credit card details when I try and sent to the message broker I fail it's down for",
    "start": "2600809",
    "end": "2607799"
  },
  {
    "text": "whatever reason okay and then theory there's also a risk",
    "start": "2607799",
    "end": "2614910"
  },
  {
    "text": "which kind of says I could I could swap that around I could say well I solved",
    "start": "2614910",
    "end": "2620130"
  },
  {
    "text": "that problem I'll Center my message broker and only if I succeed this thing in my message break while I update the table that",
    "start": "2620130",
    "end": "2627810"
  },
  {
    "text": "creates the reverse problem I may now have told the downstream account system the credit card has changed we're not the upstream account system and that may",
    "start": "2627810",
    "end": "2634530"
  },
  {
    "text": "cause problems in the future for me so I'd to fix that problem as a pan called",
    "start": "2634530",
    "end": "2641940"
  },
  {
    "text": "the out box and the out box says what I do is they create a table and I write in",
    "start": "2641940",
    "end": "2651090"
  },
  {
    "text": "a transaction to the accounts table that has my credit card information and the",
    "start": "2651090",
    "end": "2657870"
  },
  {
    "text": "outbox table and I put the message I want to send into the outbox table and",
    "start": "2657870",
    "end": "2663210"
  },
  {
    "text": "typically if I'm using relational data store I have some header properties that say things here like here the head of",
    "start": "2663210",
    "end": "2668400"
  },
  {
    "text": "purpose of the message and a feel it's just some JSON or whatever it has the body of the message stored inside it and",
    "start": "2668400",
    "end": "2675950"
  },
  {
    "text": "then I send the message knowing that I",
    "start": "2675950",
    "end": "2681720"
  },
  {
    "text": "safely got that message in the outbox and I have two strategies practice you one which is kind of my preference says",
    "start": "2681720",
    "end": "2688800"
  },
  {
    "text": "I put it in the outbox and I just send the message as normal strategy to says I",
    "start": "2688800",
    "end": "2696510"
  },
  {
    "text": "send the message directly from the I read the outbox table and send a message from the outbox okay I prefer the first strategy because",
    "start": "2696510",
    "end": "2703380"
  },
  {
    "text": "otherwise I'm tended to use the outbox table as a cue which means I have to do some interesting sequel to get that to",
    "start": "2703380",
    "end": "2708990"
  },
  {
    "text": "work right now if I fail to send to the",
    "start": "2708990",
    "end": "2715620"
  },
  {
    "text": "broker what I can do is have another process that my worker process running in the background that says okay when",
    "start": "2715620",
    "end": "2722760"
  },
  {
    "text": "did you write to the outbox table have I seen that come is that a timestamp saying it was sent via the message",
    "start": "2722760",
    "end": "2729630"
  },
  {
    "text": "broker so when the broker sends it updates the outbox table and a messaging it says with a timestamp I've sent the",
    "start": "2729630",
    "end": "2736260"
  },
  {
    "text": "message at this time point okay if I don't see one of those I know that I",
    "start": "2736260",
    "end": "2742020"
  },
  {
    "text": "should send it so this worker force is spinning in the background says are there any messages older than five minutes that",
    "start": "2742020",
    "end": "2748170"
  },
  {
    "text": "don't have a timestamp I'm gonna resend those now there's a risk and the risk is",
    "start": "2748170",
    "end": "2755190"
  },
  {
    "text": "that when I relate to the message broker and try and update the outbox table I fail because the database is not",
    "start": "2755190",
    "end": "2760290"
  },
  {
    "text": "available right that's okay I just send the message downstream anyway the",
    "start": "2760290",
    "end": "2766170"
  },
  {
    "text": "downstream system has to basically deal with duplicates that's what we tend to refer to guaranteed at least once",
    "start": "2766170",
    "end": "2773579"
  },
  {
    "text": "delivery because I may send you the message more than once okay so I send",
    "start": "2773579",
    "end": "2782550"
  },
  {
    "text": "the message downstream so I can guarantee that you will eventually receive any of the updates made to the",
    "start": "2782550",
    "end": "2789180"
  },
  {
    "text": "outbox table and there can be an issue here and the issue is that essentially",
    "start": "2789180",
    "end": "2794760"
  },
  {
    "text": "some databases for example MongoDB I'm not going to support a transaction",
    "start": "2794760",
    "end": "2800390"
  },
  {
    "text": "across and an accounts document and an outbox document so what can I do",
    "start": "2800390",
    "end": "2807210"
  },
  {
    "text": "okay look so the other option we can use",
    "start": "2807210",
    "end": "2812520"
  },
  {
    "text": "called a log tailing if your database supports it and log tailing says I am",
    "start": "2812520",
    "end": "2818460"
  },
  {
    "text": "gonna listen to the transaction log on the database and use that to generate my",
    "start": "2818460",
    "end": "2825420"
  },
  {
    "text": "events so dynamodb for example an AWS",
    "start": "2825420",
    "end": "2832230"
  },
  {
    "text": "supports this against listen to its log as the log generates events I say okay that transaction log is effectively what",
    "start": "2832230",
    "end": "2838980"
  },
  {
    "text": "I'm going to use for my outbox and I will effectively listen for those events and I will raise events to send them on the broker downstream and dynamodb",
    "start": "2838980",
    "end": "2847920"
  },
  {
    "text": "replication itself is actually done by effectively listening to the transaction log pushing events over Kinesis and then",
    "start": "2847920",
    "end": "2855089"
  },
  {
    "text": "reading them on the other DynamoDB instance and updating the table effect on the other DynamoDB instance the",
    "start": "2855089",
    "end": "2860670"
  },
  {
    "text": "dynamodb does this as its method of replicating between two systems if",
    "start": "2860670",
    "end": "2867869"
  },
  {
    "text": "neither of those work my third option is I write to the broker and when I've",
    "start": "2867869",
    "end": "2875520"
  },
  {
    "text": "succeed that right into the broker I listen to the message that I've just written to",
    "start": "2875520",
    "end": "2881430"
  },
  {
    "text": "the broker and update my own state so in this equation both sides listen to the",
    "start": "2881430",
    "end": "2888180"
  },
  {
    "text": "broker to update state but the data source and the data sink okay as",
    "start": "2888180",
    "end": "2894780"
  },
  {
    "text": "obviously it slight downside with this and that is that essentially timing issues can mean to the downstream system",
    "start": "2894780",
    "end": "2899940"
  },
  {
    "text": "knows about something before the upstream system does and you get things like the customer get notification that credit card has been debited for a",
    "start": "2899940",
    "end": "2905970"
  },
  {
    "text": "certain amount and you haven't even confirmed their order to them but you see these things catch up right and",
    "start": "2905970",
    "end": "2911610"
  },
  {
    "text": "customers are often tolerant to that kind of problem but it is a little bit",
    "start": "2911610",
    "end": "2918000"
  },
  {
    "text": "of a funky one because people are sometimes a bit like I don't write my old local state I just listen to the key okay logs versus cues you can also have",
    "start": "2918000",
    "end": "2929010"
  },
  {
    "text": "this discussion we could call it rabbit and Q versus Kafka if you like right so",
    "start": "2929010",
    "end": "2936270"
  },
  {
    "text": "things like RabbitMQ have a model we call a shared cube what do you mean by",
    "start": "2936270",
    "end": "2942570"
  },
  {
    "text": "shared Q I mean that when I send you a message downstream when you pull it off and update your accounts reference data",
    "start": "2942570",
    "end": "2949040"
  },
  {
    "text": "we delete the message off the queue so it's gone okay I keep eating messages",
    "start": "2949040",
    "end": "2957000"
  },
  {
    "text": "off the queue I can tell where I am because the head of the queue is the next thing to process but what happens",
    "start": "2957000",
    "end": "2964710"
  },
  {
    "text": "if I introduce a new service into my environment particularly happens in",
    "start": "2964710",
    "end": "2970170"
  },
  {
    "text": "non-production warrants for like QA some races a new version of their service I used to build my cash my cash is empty I",
    "start": "2970170",
    "end": "2978930"
  },
  {
    "text": "don't have any credit card data how am I going to fill it so the archer in this",
    "start": "2978930",
    "end": "2984150"
  },
  {
    "text": "model is that hopefully I have an outbox and I resend the messages out of the",
    "start": "2984150",
    "end": "2991110"
  },
  {
    "text": "outbox saying here's all the things that happened in accounts and the problem",
    "start": "2991110",
    "end": "2997350"
  },
  {
    "text": "with this model though is that everybody now gets a notification of all the things that happen in accounts and they",
    "start": "2997350",
    "end": "3003200"
  },
  {
    "text": "have to have some kind of hopefully an inbox for the deduplicate where they say discard it I've seen it discard it I've",
    "start": "3003200",
    "end": "3008540"
  },
  {
    "text": "seen it this guy that I've seen it right and I've got other work through Frank for well the system is basically in your",
    "start": "3008540",
    "end": "3015330"
  },
  {
    "text": "parts your system just two on board this one you Microsoft's and publishers cash",
    "start": "3015330",
    "end": "3020340"
  },
  {
    "text": "or because you want to blow the cash away for whatever reason to start again okay so the avanti's the message log",
    "start": "3020340",
    "end": "3027240"
  },
  {
    "text": "systems like calf girl Kinesis and i'm i think it streams in as you I'm not Nazir",
    "start": "3027240",
    "end": "3032640"
  },
  {
    "text": "person and have is that I don't delete",
    "start": "3032640",
    "end": "3038450"
  },
  {
    "text": "what I do is I've advanced the index pointer but the data remains essentially",
    "start": "3038450",
    "end": "3044940"
  },
  {
    "text": "because it's written to disk and I can reset the index pointer back to zero or",
    "start": "3044940",
    "end": "3051990"
  },
  {
    "text": "a new service can start at zero and consume all the events it's a bit like",
    "start": "3051990",
    "end": "3057450"
  },
  {
    "text": "that atom feed we were talking about earlier okay new service points towards the accounts",
    "start": "3057450",
    "end": "3064290"
  },
  {
    "text": "feed I read nothing so far I'm at zero I guess go reading all the way through service has been around for ages maybe",
    "start": "3064290",
    "end": "3070920"
  },
  {
    "text": "record forty thousand or whatever right generally speaking to do this though you have to rely on the ability to store",
    "start": "3070920",
    "end": "3077460"
  },
  {
    "text": "that data forever or at least do some kind of snapshots to let you truncate the donor at some point so that you can",
    "start": "3077460",
    "end": "3083580"
  },
  {
    "text": "start from a given origin Cass Cass I think good infra tension which really helps with this you can look at other",
    "start": "3083580",
    "end": "3089880"
  },
  {
    "text": "models for example like saving snapshots out to s3 as a starting point for your data generally my experience has been",
    "start": "3089880",
    "end": "3099120"
  },
  {
    "text": "that message log star technologies are easier once you get this working to",
    "start": "3099120",
    "end": "3105660"
  },
  {
    "text": "deliver event card select transfer and indeed you talk to people like confluent they see the event care estate transfer",
    "start": "3105660",
    "end": "3111840"
  },
  {
    "text": "model as being one of the key successful scenarios where you can deploy message",
    "start": "3111840",
    "end": "3118350"
  },
  {
    "text": "globe arts based technologies over share cue technologists right reversed trade-offs between the two technology",
    "start": "3118350",
    "end": "3123690"
  },
  {
    "text": "choices but this is definitely one of their sweet spots where they work very well and it's this stuff that tends to cause the oven with the event sourcing",
    "start": "3123690",
    "end": "3129900"
  },
  {
    "text": "people",
    "start": "3129900",
    "end": "3132200"
  },
  {
    "text": "and our box and inbox don't tend to be near such the message logs because the",
    "start": "3140440",
    "end": "3146390"
  },
  {
    "text": "message lock itself is the art box in the inbox eventually and there are even",
    "start": "3146390",
    "end": "3153050"
  },
  {
    "text": "technologies for a job or for example called streams which although I never tried it in theory we suspect may be",
    "start": "3153050",
    "end": "3158690"
  },
  {
    "text": "usable to build actual reference data by pointing at the stream of data without",
    "start": "3158690",
    "end": "3164060"
  },
  {
    "text": "having to do it directly but I've nothing I already played with okay so a",
    "start": "3164060",
    "end": "3169700"
  },
  {
    "text": "couple of things to touch on just at the end which kind of relate to this piece and I just try and give you the full",
    "start": "3169700",
    "end": "3176360"
  },
  {
    "text": "picture so this is mostly been talking about what happens in event-driven systems when I want to in micro service",
    "start": "3176360",
    "end": "3184220"
  },
  {
    "text": "when I want to basically handle the workflow from some kind of request coming in to to do some work or tasks",
    "start": "3184220",
    "end": "3189920"
  },
  {
    "text": "cuz reach me right what happens in Microsoft's what I want to get data so",
    "start": "3189920",
    "end": "3196100"
  },
  {
    "text": "typically you essentially have a model of composition either by the client or",
    "start": "3196100",
    "end": "3202100"
  },
  {
    "text": "we're gonna show next guide the server right so the client simply says there are as an accounts micro service credit",
    "start": "3202100",
    "end": "3208580"
  },
  {
    "text": "card payments direct booking service I just talk to all of them and if I need data I'll just get the data from all of them they're outside the perimeter it's",
    "start": "3208580",
    "end": "3214820"
  },
  {
    "text": "very difficult for them to talk to any kind of event model so you have to rely basically on good old request driven",
    "start": "3214820",
    "end": "3220760"
  },
  {
    "text": "architectures so you can get that the client or effectively you can do it the server when you form part of the gateway",
    "start": "3220760",
    "end": "3226220"
  },
  {
    "text": "the main reason for doing that the server is some reduce to latency right rather than making that call effectively",
    "start": "3226220",
    "end": "3232430"
  },
  {
    "text": "from your mobile phone twit to get across to twelve api's to get the service I just basically make one call",
    "start": "3232430",
    "end": "3237770"
  },
  {
    "text": "to your software effectively and it makes the cause internally toast 12 services basically and then you can also",
    "start": "3237770",
    "end": "3244220"
  },
  {
    "text": "do lots of management there because you're a question of an operation around retries circuit breakers all that stuff",
    "start": "3244220",
    "end": "3250610"
  },
  {
    "text": "to say history is pioneer that now we get in service meshes the other model",
    "start": "3250610",
    "end": "3257870"
  },
  {
    "text": "though that's what kind of more interesting for this discussion is that I can build what's sometimes called a composite view model and that says if",
    "start": "3257870",
    "end": "3266390"
  },
  {
    "text": "what I want to do is take data from a number our services and build something it's just a simple kind of select statement",
    "start": "3266390",
    "end": "3272630"
  },
  {
    "text": "it just says give me a row give me four or five rows of pre calculated information then I can actually just",
    "start": "3272630",
    "end": "3281059"
  },
  {
    "text": "listen to events and build a read-only",
    "start": "3281059",
    "end": "3287559"
  },
  {
    "text": "projection from basically that reference data that you can then query this is",
    "start": "3287559",
    "end": "3293029"
  },
  {
    "text": "affecting this idea of historical artifacts it's particularly useful if",
    "start": "3293029",
    "end": "3299019"
  },
  {
    "text": "you can avoid cooling a micro-service to calculate something you can just say I can calculate ahead of time what then",
    "start": "3299019",
    "end": "3306829"
  },
  {
    "text": "what this result will look like so when the user queries it's just simply a low latency cool into a database to get",
    "start": "3306829",
    "end": "3313969"
  },
  {
    "text": "their data back and that saves you from",
    "start": "3313969",
    "end": "3319249"
  },
  {
    "text": "this world having to cool multiple API to decomposition if simply querying a pre-built",
    "start": "3319249",
    "end": "3324799"
  },
  {
    "text": "cache that looks like the results of their query alright so this basically",
    "start": "3324799",
    "end": "3334789"
  },
  {
    "text": "art look lovely a bit of animation and we're building up our of you and",
    "start": "3334789",
    "end": "3339949"
  },
  {
    "text": "typically these things out water histories I that's where the the customer wants to see something that ranged across a range of data in theory",
    "start": "3339949",
    "end": "3348709"
  },
  {
    "text": "although it's really kind of outside the scope for the topic of this talk you're doing exactly the same thing we bought data like right the data Lake is simply",
    "start": "3348709",
    "end": "3355069"
  },
  {
    "text": "really just listening to all the events that happen in your verus microservices collecting the data and putting it",
    "start": "3355069",
    "end": "3360199"
  },
  {
    "text": "together in some big store that you can then go later and effectively great queries against alright one more to go I",
    "start": "3360199",
    "end": "3370959"
  },
  {
    "text": "was getting excessive there okay and with that we are done there's a couple",
    "start": "3370959",
    "end": "3378410"
  },
  {
    "text": "of minutes for questions I suspect if anyone wants to ask a question I can see you can always come and grab me i'm i q4",
    "start": "3378410",
    "end": "3386299"
  },
  {
    "text": "on twitter and where DMS are open so you can just direct message me and i'm happy to talk about this stuff",
    "start": "3386299",
    "end": "3391609"
  },
  {
    "text": "ad nauseam so but otherwise we are done and please don't forget to vote for me",
    "start": "3391609",
    "end": "3399880"
  },
  {
    "text": "green tickets are our votes",
    "start": "3399880",
    "end": "3404170"
  },
  {
    "text": "[Applause]",
    "start": "3406470",
    "end": "3410900"
  }
]