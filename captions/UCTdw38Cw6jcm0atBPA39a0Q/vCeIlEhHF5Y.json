[
  {
    "text": "yeah okay it's really hard to see so welcome everyone wow I am amazed at",
    "start": "6720",
    "end": "12719"
  },
  {
    "text": "the number of people here and humbled honestly thank you for giving me some of your time hopefully we will find some",
    "start": "12719",
    "end": "18760"
  },
  {
    "text": "useful things in this talk for you um so I have been a singer for a long time and",
    "start": "18760",
    "end": "25640"
  },
  {
    "text": "I've been on stage a lot and these lights might be some of the brightest I've ever faced to be quite Frank so",
    "start": "25640",
    "end": "32920"
  },
  {
    "text": "this will be interesting because I can barely see any of you so I I will ask a couple of quick questions just to get a quick PLL and I can see generally who's",
    "start": "32920",
    "end": "39800"
  },
  {
    "text": "up here but um how many of you are actually using some sort of serverless messaging or Eventing or things like",
    "start": "39800",
    "end": "46079"
  },
  {
    "text": "that at this point yeah okay cool and with that how many of you are using like",
    "start": "46079",
    "end": "51640"
  },
  {
    "text": "a a library to wrap that like in service bus or mass transit or rabbit mq cool any of you that are doing that",
    "start": "51640",
    "end": "59120"
  },
  {
    "text": "like interested in knowing more about the guts that happens in Azure or within the code or you just here to learn more",
    "start": "59120",
    "end": "66040"
  },
  {
    "text": "about how you might integrate with those services so um hopefully we can we can",
    "start": "66040",
    "end": "71840"
  },
  {
    "text": "give you some some information that will be really good for you so and now my clicker stopped that's",
    "start": "71840",
    "end": "79680"
  },
  {
    "text": "neat why did my clicker",
    "start": "79680",
    "end": "83479"
  },
  {
    "text": "stop there we go all right so this is is me um so quite frankly uh I'm very intimidated",
    "start": "87640",
    "end": "95280"
  },
  {
    "text": "by this room and the reason is because a lot of times when I step into a room like this I feel like the dumbest person",
    "start": "95280",
    "end": "101280"
  },
  {
    "text": "in the room to be honest and I know that a lot of you out there probably have a lot more um practical experience and and",
    "start": "101280",
    "end": "107320"
  },
  {
    "text": "intelligence than I do so uh a little bit of impostor Sy them I put a bud of stuff up there to make it look like I'm",
    "start": "107320",
    "end": "112479"
  },
  {
    "text": "more qualified But ultimately the reason I want you to see this is um I do do a lot of azure training so if you're",
    "start": "112479",
    "end": "119119"
  },
  {
    "text": "interested in any certifications in Azure at all um I would love to talk to you and help you find resources so you",
    "start": "119119",
    "end": "124439"
  },
  {
    "text": "can find me around the conference for the rest of the time or after this and we can talk about that and um I also",
    "start": "124439",
    "end": "129759"
  },
  {
    "text": "wrote a couple of books if you're interested in that sort of thing as well and um all these slides will be available all of the the stuff that I",
    "start": "129759",
    "end": "136480"
  },
  {
    "text": "have is going to be on a repo as well that you'll have access to so let me just show you that real quick and",
    "start": "136480",
    "end": "142040"
  },
  {
    "text": "ultimately this QR code here will take you directly to the repo so if you're",
    "start": "142040",
    "end": "147239"
  },
  {
    "text": "interested in getting that repo I'll give you a second to do that um it's ultimately under github.com",
    "start": "147239",
    "end": "152400"
  },
  {
    "text": "Gorman and then Azure queing messaging and Eventing or something similar to that and on that repo there's going to",
    "start": "152400",
    "end": "160120"
  },
  {
    "text": "be a link so um that will that link will take you to my personal training site where I have posted for free all the",
    "start": "160120",
    "end": "167360"
  },
  {
    "text": "slides that you'll see today with the exception of a couple that I just added because like any good you know presenter",
    "start": "167360",
    "end": "173480"
  },
  {
    "text": "I feel a little bit like oh I might not be deep enough in the material so I want to add more cool things so hopefully that will work out but here we",
    "start": "173480",
    "end": "182120"
  },
  {
    "text": "go so first service we're going to take a look at is going to be the event Hub",
    "start": "182120",
    "end": "188200"
  },
  {
    "text": "so what I want to do today honestly is just give you a chance to see actually I should have probably just left that up",
    "start": "188200",
    "end": "194000"
  },
  {
    "text": "for one more second because I can tell you that we're going to go through the event hubs then we're going to go to the event grid we're going to go to the service bus and then we're going to look",
    "start": "194000",
    "end": "200239"
  },
  {
    "text": "at cues and topics within the service bus and talk about them and ultimately storage queue and we'll talk about some",
    "start": "200239",
    "end": "206000"
  },
  {
    "text": "different things you different approaches you can do along the way with some of those we're going to look at code on slides I have demos ready in",
    "start": "206000",
    "end": "212439"
  },
  {
    "text": "case we have time but there is a lot to cover this is about a day's worth of training kind of condensed into an a an",
    "start": "212439",
    "end": "218879"
  },
  {
    "text": "hour so we're going to go fast there's a lot of slides I hate slides but it",
    "start": "218879",
    "end": "223959"
  },
  {
    "text": "allows me to get all the information to you as quickly as possible so with that we're going to start with event",
    "start": "223959",
    "end": "229319"
  },
  {
    "text": "Hub so the event Hub is the S uh the service you want to use at Azure when",
    "start": "229319",
    "end": "234640"
  },
  {
    "text": "you're looking for big data or streaming or iot and so ultimately at this point",
    "start": "234640",
    "end": "239840"
  },
  {
    "text": "think millions and millions of Records coming in or even hundreds of thousands whatever per second or per minute or",
    "start": "239840",
    "end": "245920"
  },
  {
    "text": "whatever lots of events coming so you're streaming from Telemetry devices or from",
    "start": "245920",
    "end": "251159"
  },
  {
    "text": "some other Eventing from your applications and you need to get all those events and you need to process them and you need to be able to ingest",
    "start": "251159",
    "end": "257120"
  },
  {
    "text": "them store them and work with them that's what the event Hub is for So within the event Hub you actually to",
    "start": "257120",
    "end": "263320"
  },
  {
    "text": "create it at Azure you create an Azure event hubs name space the name space is the housing for all of your event hubs",
    "start": "263320",
    "end": "269759"
  },
  {
    "text": "hubs you can have multiple event hubs in there that you can use and ultimately kind of determines the top level entry",
    "start": "269759",
    "end": "276039"
  },
  {
    "text": "point for how you get through with your um with your SAS tokens and things like that if you want to go at the top level",
    "start": "276039",
    "end": "282840"
  },
  {
    "text": "uh there's a couple of really dry pieces of information I want to give you so that if you were making decisions about",
    "start": "282840",
    "end": "287919"
  },
  {
    "text": "applications you know what these things are for and why you would use them so the first thing is throughput units you",
    "start": "287919",
    "end": "294560"
  },
  {
    "text": "can have up to 40 and a throughput unit is essentially how much you want to Ingress so one throughput unit",
    "start": "294560",
    "end": "300360"
  },
  {
    "text": "is about 1 Megabyte per second or 1 th000 events per second so if you need more you need more throughput units and",
    "start": "300360",
    "end": "306440"
  },
  {
    "text": "event Hub does charge by throughput units so just keep that in mind uh and it allows you to eress up to 2 megabytes",
    "start": "306440",
    "end": "313080"
  },
  {
    "text": "a second uh if you want to do the autoc capture to Cold Storage which is what uh",
    "start": "313080",
    "end": "318120"
  },
  {
    "text": "the demos would do you would end up having that cold storage uh you need to have at least a standard or better",
    "start": "318120",
    "end": "325120"
  },
  {
    "text": "tier so when you create it you just give it a namespace name what you'll notice it's really interesting to me is that it",
    "start": "325120",
    "end": "330960"
  },
  {
    "text": "actually lives in service bus so this is the one place in Azure where they name",
    "start": "330960",
    "end": "336840"
  },
  {
    "text": "something funny right no okay but ultimately service bus is the name space",
    "start": "336840",
    "end": "343280"
  },
  {
    "text": "for both event Hub and service bus which can be confusing to people but just know that the event Hub just lives in the",
    "start": "343280",
    "end": "349240"
  },
  {
    "text": "service bus endpoint name space and it is still its own thing so you get your hubn name. service bus as you create it",
    "start": "349240",
    "end": "356400"
  },
  {
    "text": "so you can see some costing there some sliders on how to create it basic stuff there ultimately I wanted to call out",
    "start": "356400",
    "end": "362720"
  },
  {
    "text": "here when you go to the next page this Auto local authentication if you want to use SAS",
    "start": "362720",
    "end": "369120"
  },
  {
    "text": "tokens you have to have that enabled if you turn that off your only option will be arbac or Rob based access",
    "start": "369120",
    "end": "376319"
  },
  {
    "text": "control so if you'd rather use only rbase Access Control you can and ultimately you do that by turning on the",
    "start": "376319",
    "end": "384080"
  },
  {
    "text": "or you can turn off the SAS and then you can select the roles for data owner data receiver and data sender which are the",
    "start": "384080",
    "end": "390240"
  },
  {
    "text": "same tokens you could create in SAS tokens by using the arbac to do that and then of course you need a service",
    "start": "390240",
    "end": "396120"
  },
  {
    "text": "principal or an authorized user to be able or managed identity to be able to go in and and have the access to do",
    "start": "396120",
    "end": "402560"
  },
  {
    "text": "either sending receiving or both so when it comes down to the event",
    "start": "402560",
    "end": "408319"
  },
  {
    "text": "Hub you typically have your producers and your consumers and ultimately those producers can be anything that streams",
    "start": "408319",
    "end": "414160"
  },
  {
    "text": "those events that Telemetry into your event Hub and the consumers are just the services that end up selecting that and",
    "start": "414160",
    "end": "421199"
  },
  {
    "text": "and processing it out and that could be an application it could be a stream analytics job it could be uh other uh",
    "start": "421199",
    "end": "427560"
  },
  {
    "text": "even other event hubs or different scenarios so you could have an event Hub that's streaming and another event Hub",
    "start": "427560",
    "end": "432680"
  },
  {
    "text": "is consuming um you might not want to do that but you can so the most important part of this",
    "start": "432680",
    "end": "438160"
  },
  {
    "text": "is the partitions when you create your vent Hub you have to determine how many partitions you want from the start if",
    "start": "438160",
    "end": "444000"
  },
  {
    "text": "you don't you have to recreate your if you get it wrong you have to recreate your vent Hub you can't change the number one it's created so think about",
    "start": "444000",
    "end": "451199"
  },
  {
    "text": "you can have up to 32 partitions and each one of those should actually be used to do about 1 Megabyte of ingestion",
    "start": "451199",
    "end": "459160"
  },
  {
    "text": "per second for your throughput so if you want to have a lot more data coming in you might need",
    "start": "459160",
    "end": "464960"
  },
  {
    "text": "more partitions uh typical iot load is recommended to be about four partitions",
    "start": "464960",
    "end": "472639"
  },
  {
    "text": "so other than that uh the events come in and and they're order they're they are they are in order um if you use a",
    "start": "472639",
    "end": "480720"
  },
  {
    "text": "a partition key when you pass it in and ultimately those go out and they get evenly distributed over the partitions",
    "start": "480720",
    "end": "486039"
  },
  {
    "text": "I'll show you a picture of that in a second and the other important thing is the retention event Hub typically can be",
    "start": "486039",
    "end": "493479"
  },
  {
    "text": "deleted after an hour up to 7 days if you go to the premium level you can go up to 90",
    "start": "493479",
    "end": "500199"
  },
  {
    "text": "days so within the event Hub then there's these things called consumer groups and I'm going to show you a big picture of this again in a second just",
    "start": "500199",
    "end": "505759"
  },
  {
    "text": "so you can kind of see it consumer groups are used to have different processing on the same events so think",
    "start": "505759",
    "end": "512599"
  },
  {
    "text": "of this as uh competing consumers if you have to replay data there's a checkpoint",
    "start": "512599",
    "end": "518959"
  },
  {
    "text": "and the checkpoint needs to be correct for the application and if one application moved the checkpoint back to",
    "start": "518959",
    "end": "525760"
  },
  {
    "text": "a different previous spot in the feed then the other one who's trying to consume would be basically replaying",
    "start": "525760",
    "end": "532200"
  },
  {
    "text": "data and so the consumer groups should say okay this data is going to be read by this consumer group and the same data",
    "start": "532200",
    "end": "538600"
  },
  {
    "text": "is going to be read by this other other ones so if I want to do one path into cold storage and one path through a stream analytics job I can create two",
    "start": "538600",
    "end": "545399"
  },
  {
    "text": "consumer groups and they won't compete for the data then so that's what this all looks like",
    "start": "545399",
    "end": "551720"
  },
  {
    "text": "you got a bunch of producers whatever it might be sending data either through https amqp Kafka or um yeah that and so",
    "start": "551720",
    "end": "561519"
  },
  {
    "text": "when you do that just know that you probably don't want to use https unless you have to because there's an extreme",
    "start": "561519",
    "end": "567160"
  },
  {
    "text": "overhead with https you have to keep uh reestablishing your socket basically",
    "start": "567160",
    "end": "572519"
  },
  {
    "text": "your connection every time you send a data event so with amqp you can keep that open or cka so then the weirdest",
    "start": "572519",
    "end": "580200"
  },
  {
    "text": "most cons like confusing thing for me when I was learning this is what the heck are these",
    "start": "580200",
    "end": "585600"
  },
  {
    "text": "partitions and so these partitions exist again to help you spread your data out and keep order and the worst thing is at",
    "start": "585600",
    "end": "592800"
  },
  {
    "text": "one point and I think you can still do this you can actually tell your code to write to a specific partition which is a",
    "start": "592800",
    "end": "598760"
  },
  {
    "text": "really bad idea so what you're supposed to do is use a partition key and that partition key",
    "start": "598760",
    "end": "605399"
  },
  {
    "text": "then will order keep your your data ordered as you ingest it and Microsoft's",
    "start": "605399",
    "end": "610560"
  },
  {
    "text": "internal workings on the event Hub will spread your data data out evenly over these partitions and the ordering will",
    "start": "610560",
    "end": "615839"
  },
  {
    "text": "be maintained and then again the consumer groups are just different reader groups and you can actually have",
    "start": "615839",
    "end": "621120"
  },
  {
    "text": "up to five readers in a consumer group but um again be careful about",
    "start": "621120",
    "end": "626200"
  },
  {
    "text": "duplication if you do that so you might want to go one to one it's probably the the easiest so this is capturing when you",
    "start": "626200",
    "end": "633519"
  },
  {
    "text": "create an event Hub if you do it a standard or better you can capture your events automatically into storage so you",
    "start": "633519",
    "end": "638600"
  },
  {
    "text": "create a data Lake storage and you essentially then make sure that that's a hierarchical name space you then uh turn",
    "start": "638600",
    "end": "645040"
  },
  {
    "text": "on the storage the capture and all that stuff and it it uh emits all of your events so you can capture in intervals",
    "start": "645040",
    "end": "653440"
  },
  {
    "text": "of either 5 minutes or 300 megabytes whichever happens first as the default or you can change that around so you see",
    "start": "653440",
    "end": "659320"
  },
  {
    "text": "the time window you can change the the the size window you can change so if you need your data faster the other thing",
    "start": "659320",
    "end": "664440"
  },
  {
    "text": "that's interesting here is the check mark for do not emit empty files so if",
    "start": "664440",
    "end": "669760"
  },
  {
    "text": "you turn that on like it is in this image this means that if there's nothing in your data you're not going to emit a",
    "start": "669760",
    "end": "675600"
  },
  {
    "text": "file now that might seem great because you're not storing anything but it also might be painful if you're looking at",
    "start": "675600",
    "end": "681279"
  },
  {
    "text": "your event storage and nothing's being written do you know is your event Hub actually ingesting or not if they're if",
    "start": "681279",
    "end": "687360"
  },
  {
    "text": "you're if you're emitting empty files after 5 minutes you would know at least you're still trying to stream stuff",
    "start": "687360",
    "end": "693320"
  },
  {
    "text": "right you're just not getting your data so the easiest way to write code",
    "start": "693320",
    "end": "700480"
  },
  {
    "text": "and if you haven't ever written code at the SDK level with the event Hub or service bus is going to be using these",
    "start": "700480",
    "end": "705959"
  },
  {
    "text": "SAS tokens there's three different types of tokens you can create you can create the manage token which allows you to",
    "start": "705959",
    "end": "712360"
  },
  {
    "text": "kind of have god mode over that that um that piece of the hierarchy so the root",
    "start": "712360",
    "end": "718120"
  },
  {
    "text": "managed uh root manage shared key um is the absolute god mode over your entire",
    "start": "718120",
    "end": "725000"
  },
  {
    "text": "name space so if you give your access to that they can do anything against all of",
    "start": "725000",
    "end": "730399"
  },
  {
    "text": "your hubs so you typically don't really want to use that unless it's a specific case scenario so what you typically do",
    "start": "730399",
    "end": "737959"
  },
  {
    "text": "is go to the actual event Hub in your in your portal and create your producer and",
    "start": "737959",
    "end": "743839"
  },
  {
    "text": "your listener or consumer keys and that way your app only has access to one hub",
    "start": "743839",
    "end": "749279"
  },
  {
    "text": "and the data it needs so then you get that you put that into your code uh typically in your user",
    "start": "749279",
    "end": "756519"
  },
  {
    "text": "Secrets or actually like a key Vault and you need to make sure you know the name of your Hub and the connection string",
    "start": "756519",
    "end": "762160"
  },
  {
    "text": "for your consumer and for the the sample apps that I have the connection string",
    "start": "762160",
    "end": "767760"
  },
  {
    "text": "and container name for the storage that we're capturing to",
    "start": "767760",
    "end": "774639"
  },
  {
    "text": "so think we're doing okay on time does anybody want to see it's a very simple I",
    "start": "774639",
    "end": "779920"
  },
  {
    "text": "can just run the code quick and stream it into my event Hub and consume it does anybody want to see that yeah okay let's",
    "start": "779920",
    "end": "785199"
  },
  {
    "text": "do it all right hopefully this won't screw up my",
    "start": "785199",
    "end": "791000"
  },
  {
    "text": "clicker all right so again all this code is going to be available to you on the repo so you can take this home there's",
    "start": "793120",
    "end": "799399"
  },
  {
    "text": "actually I out there to create all the resources that you could uh you could run it's not quite complete for some of",
    "start": "799399",
    "end": "806399"
  },
  {
    "text": "the stream analytics stuff I was working on yesterday but that's that's okay um how's that for size is that pretty good",
    "start": "806399",
    "end": "814639"
  },
  {
    "text": "cool all right so again the code is very straightforward when we're going to be working with the event Hub ultimately uh",
    "start": "814639",
    "end": "823320"
  },
  {
    "text": "we're going to be looking at the code here and we're going to get in the connection string and the configuration",
    "start": "823320",
    "end": "828560"
  },
  {
    "text": "for the event Hub connection string and name we need a producer client and a consumer client on the consumer side and",
    "start": "828560",
    "end": "834480"
  },
  {
    "text": "then we have event data that we're encoding now this is a very generic very simple binary string encoding so it's",
    "start": "834480",
    "end": "841320"
  },
  {
    "text": "not doing much but that brings me to another important point the difference between events and messages right so",
    "start": "841320",
    "end": "848440"
  },
  {
    "text": "when we get to service bus later we'll be doing messages here we're doing events so if you want to get some",
    "start": "848440",
    "end": "854399"
  },
  {
    "text": "clarification on which is supposed to be used when think of do I care what",
    "start": "854399",
    "end": "859560"
  },
  {
    "text": "happens to this do I need to respond to something if it doesn't happen and also do I need State those are kind of your",
    "start": "859560",
    "end": "866639"
  },
  {
    "text": "two determining factors so if you don't necessarily need State you just need information and if you don't necessarily",
    "start": "866639",
    "end": "872880"
  },
  {
    "text": "care if anybody handles it you typically fire an event okay here it's out if there's anybody subscribing to this",
    "start": "872880",
    "end": "878320"
  },
  {
    "text": "event they can do stuff with it if not it's in The Ether or maybe in a que a dead letter q or something uh so that's",
    "start": "878320",
    "end": "884560"
  },
  {
    "text": "kind of the the first part of that the events are more Just for information that you can then use to continue",
    "start": "884560",
    "end": "890079"
  },
  {
    "text": "processing or handle something that if it's broken or whatever so when you run the events",
    "start": "890079",
    "end": "896160"
  },
  {
    "text": "project here uh so we just run the event Hub project here",
    "start": "896160",
    "end": "901199"
  },
  {
    "text": "I've already pre-wired all my connection strings so that you didn't have to watch me do all that I hope um I feel like",
    "start": "901199",
    "end": "907040"
  },
  {
    "text": "most of you would have no problem figuring out where that would need to go um if so ask me after uh so I just",
    "start": "907040",
    "end": "913959"
  },
  {
    "text": "published 25 events to the event Hub queue on the consumer side then this",
    "start": "913959",
    "end": "919199"
  },
  {
    "text": "project needs to have the event Hub consumer and also a storage account that",
    "start": "919199",
    "end": "924560"
  },
  {
    "text": "we're reading from so we get the blob for the file name and the file client uh we create that as we go and then",
    "start": "924560",
    "end": "930920"
  },
  {
    "text": "ultimately when we're reading this in we have our event Hub cons super client excuse me and our blob container client",
    "start": "930920",
    "end": "937720"
  },
  {
    "text": "that we've basically connected to Via the SAS token and the storage connection string again arbac is probably a better",
    "start": "937720",
    "end": "944639"
  },
  {
    "text": "solution a little bit more tricky to implement and make sure it's going to work the SAS token will work and the SAS",
    "start": "944639",
    "end": "950560"
  },
  {
    "text": "token is probably in scenario where you have a third party and you need to expose your endpoint to let them write",
    "start": "950560",
    "end": "958440"
  },
  {
    "text": "their data into your event Hub that's probably your better option unless you have a principle for them um in like a",
    "start": "958440",
    "end": "965480"
  },
  {
    "text": "b2c client or something so with that in mind uh we process the events",
    "start": "965480",
    "end": "970720"
  },
  {
    "text": "asynchronously and it's just going to read them in through this asynchronous Handler and it just this is a very basic",
    "start": "970720",
    "end": "976839"
  },
  {
    "text": "code again but my hope is it will just give you enough to get started if you trying to play around with this or know",
    "start": "976839",
    "end": "983319"
  },
  {
    "text": "that hey I can I can use this to do some really cool things later um I'm",
    "start": "983319",
    "end": "988399"
  },
  {
    "text": "struggling there CU I'm on the wrong thing so if I start a new instance of the consumer now you're going to see so",
    "start": "988399",
    "end": "994000"
  },
  {
    "text": "what this was for um what inspired this idea was I had a client um we were working with they had a bunch of um",
    "start": "994000",
    "end": "1000519"
  },
  {
    "text": "errors and logs and things and they were logging from their events um and ultimately they were logging it into log",
    "start": "1000519",
    "end": "1006920"
  },
  {
    "text": "analytics and they were logging megabyte after megabyte after megabyte and typically log analytics isn't that bad",
    "start": "1006920",
    "end": "1012399"
  },
  {
    "text": "until you start streaming thousands and thousands and thousands of events into it and it starts getting really big you're paying per gigabyte so we were",
    "start": "1012399",
    "end": "1019120"
  },
  {
    "text": "looking for a different option of can we stream data and make it so that the data",
    "start": "1019120",
    "end": "1024199"
  },
  {
    "text": "can go somewhere else now I'm not sure that event Hub would have been cheaper we never got farther than that we were",
    "start": "1024199",
    "end": "1029280"
  },
  {
    "text": "just exploring but it expired the idea let's just throw some events from a data from a Windows machine L log there and",
    "start": "1029280",
    "end": "1035319"
  },
  {
    "text": "see what happens and that's what those are uh so is there any questions about event Hub before we move",
    "start": "1035319",
    "end": "1042640"
  },
  {
    "text": "on awesome cool",
    "start": "1043600",
    "end": "1049039"
  },
  {
    "text": "all right and my clicker is gone again it's going to be a struggle I suppose",
    "start": "1054039",
    "end": "1059760"
  },
  {
    "text": "okay so again this is just again really uh quick there's the code highlighted again for you you saw it in the code",
    "start": "1059760",
    "end": "1066400"
  },
  {
    "text": "already all these slides again are available after so we're just going to move through these pretty quickly um",
    "start": "1066400",
    "end": "1071440"
  },
  {
    "text": "that's the manual storage capture part and then I wanted to call out a couple of other things iot Hub so if you're",
    "start": "1071440",
    "end": "1077840"
  },
  {
    "text": "using iot devices or Telemetry devices you can stream directly into iot Hub iot",
    "start": "1077840",
    "end": "1083720"
  },
  {
    "text": "Hub is just a subset of event Hub which means you should be able to write the same code against either using the event",
    "start": "1083720",
    "end": "1089960"
  },
  {
    "text": "Hub SDK and you should be good to go um so again the cool thing about iot is",
    "start": "1089960",
    "end": "1095559"
  },
  {
    "text": "then you can move it out to the edge as well and do some pre-filtering with iot Hub on the edge uh which can be nice",
    "start": "1095559",
    "end": "1102120"
  },
  {
    "text": "too I also wanted to bring up stream analytics so what is stream analytics",
    "start": "1102120",
    "end": "1107760"
  },
  {
    "text": "for well if we have data coming in all day long and I am processing this events",
    "start": "1107760",
    "end": "1113720"
  },
  {
    "text": "and something important happens how am I going to tell my application that there's an immediate need that's what",
    "start": "1113720",
    "end": "1119159"
  },
  {
    "text": "stream analytics is for so you can also use it to do different types of ingestion but typically a Lambda path",
    "start": "1119159",
    "end": "1125400"
  },
  {
    "text": "where you're going hot and cold so you create a stream an elix job with an input for your Hub a query that's",
    "start": "1125400",
    "end": "1131840"
  },
  {
    "text": "basically SQL and then an output which is either an aure function another event",
    "start": "1131840",
    "end": "1136919"
  },
  {
    "text": "Hub another stream analytics you can send it uh anywhere you want another another event uh so you can also send it",
    "start": "1136919",
    "end": "1143280"
  },
  {
    "text": "directly to dashboards so now if that sensor in the hospital is detecting there's too many parts per million of some dust or something in an operating",
    "start": "1143280",
    "end": "1150440"
  },
  {
    "text": "room you can immediately throw an alert and say hey you can't operate there it's might not be safe right or things like that so uh this is a Lambda architecture",
    "start": "1150440",
    "end": "1158039"
  },
  {
    "text": "I kind of stole off of Microsoft sites as well ultimately I wanted to call that out because of the idea of the hot path",
    "start": "1158039",
    "end": "1163840"
  },
  {
    "text": "and the cold path so think of this as I need to know if something happened immediately that's my hot path",
    "start": "1163840",
    "end": "1169320"
  },
  {
    "text": "my cold path is this is all my data so I can do postmortem so I stream that into storage and that's always going to be",
    "start": "1169320",
    "end": "1176480"
  },
  {
    "text": "there but my hot path is hey that hospital thing happened or the temperature is too warm or the humidity is too much in my wine seller or",
    "start": "1176480",
    "end": "1182120"
  },
  {
    "text": "whatever uh that you're monitoring and ultimately then you can know you need to make an",
    "start": "1182120",
    "end": "1187919"
  },
  {
    "text": "adjustment so that brings up event grid and for me when I first started with",
    "start": "1188280",
    "end": "1193559"
  },
  {
    "text": "these Services I was like what the heck is event Hub what the heck is event grid why do I need both do I need both",
    "start": "1193559",
    "end": "1199200"
  },
  {
    "text": "together or can I do one by themselves like is the event grid part of the event hub no so they're different services and",
    "start": "1199200",
    "end": "1206679"
  },
  {
    "text": "so I had to uh play around with it a little bit to understand that but ultimately the event grid its main",
    "start": "1206679",
    "end": "1211919"
  },
  {
    "text": "purpose is one oneoff events so if I can do anything in Azure you can typically",
    "start": "1211919",
    "end": "1217039"
  },
  {
    "text": "monitor that and that monitor says Hey something happened and the event grid",
    "start": "1217039",
    "end": "1222919"
  },
  {
    "text": "just says okay here's my event here's the here's the Telemetry or the data from that event so it might be a blob",
    "start": "1222919",
    "end": "1229039"
  },
  {
    "text": "storage URL or it might be um somebody signed in or somebody turned off your important VM whatever that is all of",
    "start": "1229039",
    "end": "1236039"
  },
  {
    "text": "those events are monitored and Azure and anything that's monitored can trigger an event to the event grid once you have",
    "start": "1236039",
    "end": "1241200"
  },
  {
    "text": "that you can create subscrib subscribers on it send off a logic app that says hey somebody shut off the VM um to your",
    "start": "1241200",
    "end": "1248559"
  },
  {
    "text": "slack or your teams or whatever you're using or even an email and so ultimately pretty much",
    "start": "1248559",
    "end": "1256080"
  },
  {
    "text": "everything can connect and create an Event Source and pretty much everything on the right hand side here that you see",
    "start": "1256080",
    "end": "1261720"
  },
  {
    "text": "can handle it there's one other cool thing that's been recently added with event grid and this might be interesting",
    "start": "1261720",
    "end": "1267400"
  },
  {
    "text": "to some of you if you play around with mqtt so if you're doing mqtt typically iot workload you can actually stream it",
    "start": "1267400",
    "end": "1274880"
  },
  {
    "text": "directly to an event grid now vers before you had to do that typically through iot Hub now you can go straight",
    "start": "1274880",
    "end": "1281400"
  },
  {
    "text": "to the event grid and you can handle those events in event grid with the mqtt connection so you can have all your",
    "start": "1281400",
    "end": "1288080"
  },
  {
    "text": "little things devices just sending directly to the event Grid or whatever and hey shut off the lights boom done",
    "start": "1288080",
    "end": "1293799"
  },
  {
    "text": "you know whatever all right so filtering so all",
    "start": "1293799",
    "end": "1300480"
  },
  {
    "text": "of our events that come in you can filter by subject and ultimately um you can use that to determine how do I want",
    "start": "1300480",
    "end": "1307159"
  },
  {
    "text": "to handle this uh what do I want to do with it um and and listen to some or ignore others right uh events are",
    "start": "1307159",
    "end": "1314400"
  },
  {
    "text": "consumption based they're on a pub sub basis so if I don't subscribe to it it goes into either a dead letter q and or",
    "start": "1314400",
    "end": "1321039"
  },
  {
    "text": "it's gone away um and then you can create your own so this is another thing",
    "start": "1321039",
    "end": "1327520"
  },
  {
    "text": "you can create your own events but I want to challenge you in your mind to think if I am thinking I'm going to",
    "start": "1327520",
    "end": "1333360"
  },
  {
    "text": "create a custom event should that have actually been a message and again go back to your discernment do does anybody",
    "start": "1333360",
    "end": "1340559"
  },
  {
    "text": "do I need to care if this thing was processed and if I do probably I want to look at messaging because then we have a",
    "start": "1340559",
    "end": "1347120"
  },
  {
    "text": "little bit more control over like retries and things like that um if it",
    "start": "1347120",
    "end": "1352159"
  },
  {
    "text": "has to maintain State probably a message now that doesn't mean you can't serialize Json as",
    "start": "1352159",
    "end": "1358240"
  },
  {
    "text": "an object and throw it through an event as the data payload you can do that um but writing a custom event is a little",
    "start": "1358240",
    "end": "1363840"
  },
  {
    "text": "bit trickier than using a message as well so I just wanted to call that out event grid does have an exponential",
    "start": "1363840",
    "end": "1370559"
  },
  {
    "text": "back off on its retry up to 30 maximum tries and ultimately you can have messages with a time to live up to 24",
    "start": "1370559",
    "end": "1377679"
  },
  {
    "text": "hours a dead letter q and the only things that won't be retried are things that basically say this can never happen",
    "start": "1377679",
    "end": "1384120"
  },
  {
    "text": "like it's not a good endpoint I don't have permission things like that um so when you create an event Grid it's",
    "start": "1384120",
    "end": "1391720"
  },
  {
    "text": "registered oh yes story time so the first thing you have to do",
    "start": "1391720",
    "end": "1399279"
  },
  {
    "text": "to use event grid if you don't have this registered on your subscription is make sure it is Microsoft Event Grid it's not",
    "start": "1399279",
    "end": "1404919"
  },
  {
    "text": "registered by default neither is the Hub but if you create them in the portal it'll typically uh do them for you",
    "start": "1404919",
    "end": "1411159"
  },
  {
    "text": "however if you do what I did and you create a logic app that triggers an event that needs to you know respond",
    "start": "1411159",
    "end": "1417880"
  },
  {
    "text": "from a blob storage created event and you don't have this registered you might spend a couple hours trying to figure",
    "start": "1417880",
    "end": "1423039"
  },
  {
    "text": "out why your messages aren't getting sent until you realize because it wasn't turned on so I just called out to make",
    "start": "1423039",
    "end": "1428960"
  },
  {
    "text": "sure that happens so what I have here is a quick demo that's actually a gif allows me to",
    "start": "1428960",
    "end": "1435159"
  },
  {
    "text": "stop talking for a minute and so you guys to watch a couple things while I talk about it I guess over overhead but we're going to create a logic app that",
    "start": "1435159",
    "end": "1440840"
  },
  {
    "text": "responds to a blob storage Tri trigger again all of these slides are in that whole thing so you can watch this again",
    "start": "1440840",
    "end": "1446480"
  },
  {
    "text": "later you can see what's happening here this is a very generic connection I'm just going to use the storage connection string and my own personal account",
    "start": "1446480",
    "end": "1452679"
  },
  {
    "text": "there's other options we'll see in a second ultimately we're going to connect we're going to create a logic app and",
    "start": "1452679",
    "end": "1458080"
  },
  {
    "text": "that logic app will then respond whenever you drop any file into blob storage and this is just one of millions",
    "start": "1458080",
    "end": "1463159"
  },
  {
    "text": "of ways that you could use an event grid um but then once you have it you'll be able to go in review your subscription",
    "start": "1463159",
    "end": "1469279"
  },
  {
    "text": "this proves to me that my logic app is actually connected to this event and is actually subscribing to that publish",
    "start": "1469279",
    "end": "1474760"
  },
  {
    "text": "event and that way I can see that and you know you can filter out your different event grid system topics to",
    "start": "1474760",
    "end": "1481120"
  },
  {
    "text": "see which one it is now I don't know if you've ever used this search functionality but it is very tricky you",
    "start": "1481120",
    "end": "1486840"
  },
  {
    "text": "have to be in the right region in your filter and so if you are looking in the East us and you created in central us or",
    "start": "1486840",
    "end": "1492760"
  },
  {
    "text": "east Europe or Western Europe um you'd be in trouble you wouldn't see it you'd be like where's my topic I don't know",
    "start": "1492760",
    "end": "1497919"
  },
  {
    "text": "it's gone so here is a quick demo of all of that happening so you can kind of",
    "start": "1497919",
    "end": "1506679"
  },
  {
    "text": "watch so we're going to get an access key of course in our storage account name and this storage account isn't out",
    "start": "1513360",
    "end": "1519919"
  },
  {
    "text": "there so you can try these keys if you want but they probably don't work",
    "start": "1519919",
    "end": "1526240"
  },
  {
    "text": "so I just wanted to call out not the connection string just the key for this",
    "start": "1529240",
    "end": "1534158"
  },
  {
    "text": "part when you click on this you can actually do functions or logic apps but I would recommend doing functions",
    "start": "1538679",
    "end": "1543720"
  },
  {
    "text": "manually not through this interface so this is the events within the storage and then you just connect",
    "start": "1543720",
    "end": "1550039"
  },
  {
    "text": "and say I want my blob storage connection",
    "start": "1550039",
    "end": "1554880"
  },
  {
    "text": "and of course once that's connected it gives you this nice green check mark tells you it's connected and then",
    "start": "1567000",
    "end": "1574279"
  },
  {
    "text": "on this next part here I signed in with my own personal ID but I wanted to call out you can do service principle or manage identity which is probably a",
    "start": "1574279",
    "end": "1579360"
  },
  {
    "text": "better solution because if I leave the company this no longer would work that'd be bad right so you get the nice screen",
    "start": "1579360",
    "end": "1585640"
  },
  {
    "text": "check mark everything works literally done nothing but click a few buttons and it creates this logic app it has a timer",
    "start": "1585640",
    "end": "1593399"
  },
  {
    "text": "trigger that deletes blobs after 30 days I deleted that and then ultimately save the logic app and then you can drop a",
    "start": "1593399",
    "end": "1599000"
  },
  {
    "text": "file and it will immediately respond to that",
    "start": "1599000",
    "end": "1603480"
  },
  {
    "text": "event there's a couple of other options here if you have an integrated service environment you can integrate that you",
    "start": "1604440",
    "end": "1609559"
  },
  {
    "text": "can actually disable it when you create it which makes no sense to me but you can do that um and then yeah",
    "start": "1609559",
    "end": "1618000"
  },
  {
    "text": "so once it's created it'll tell you you you're going to lose your code even though it's already created that's another bug but it is what it is so you",
    "start": "1624000",
    "end": "1631640"
  },
  {
    "text": "get your logic app here once you drop the file and storage then again this is",
    "start": "1631640",
    "end": "1636799"
  },
  {
    "text": "just reviewing to see that you can prove that you're connected to the event so you basically have the hook in place",
    "start": "1636799",
    "end": "1642200"
  },
  {
    "text": "there's the hook there's the event subscription there's the circular going back and forth between them so you can",
    "start": "1642200",
    "end": "1647720"
  },
  {
    "text": "see how that kind of connects there's the logic app and",
    "start": "1647720",
    "end": "1656200"
  },
  {
    "text": "ultimately yeah so we're going to go out here to the uploads we're going to upload any file it doesn't matter what",
    "start": "1656440",
    "end": "1662840"
  },
  {
    "text": "it is and once we do that in our logic app",
    "start": "1662840",
    "end": "1668799"
  },
  {
    "text": "we can review that it was triggered and succeeded and then we have access to the",
    "start": "1668799",
    "end": "1673880"
  },
  {
    "text": "blob URL through the data so again an event just sending information just The Blob URL now whoever's subscribing to",
    "start": "1673880",
    "end": "1681120"
  },
  {
    "text": "this needs to handle that that's how simple it is to create a logic app to respond using a functions a little",
    "start": "1681120",
    "end": "1687000"
  },
  {
    "text": "trickier you got to create an event good trigger and again I would just recommend wiring that up um by going into the",
    "start": "1687000",
    "end": "1692480"
  },
  {
    "text": "portal or whatever tool you use um whether it's ISC or not to create that subscription manually and select your",
    "start": "1692480",
    "end": "1698880"
  },
  {
    "text": "function end point all right so the next thing then is service bus and there's two different",
    "start": "1698880",
    "end": "1705519"
  },
  {
    "text": "parts of service bus that we really care about qes and topics and the first one we're going to look at is cues and",
    "start": "1705519",
    "end": "1712000"
  },
  {
    "text": "here's the part where I want to call out for you differences between when I might use the service bus queue and start",
    "start": "1712000",
    "end": "1718440"
  },
  {
    "text": "talking about storage cues which we're going to end with so if I'm making decisions as an architect of which type",
    "start": "1718440",
    "end": "1723919"
  },
  {
    "text": "of queue I want to use I always consider cost which in my mind storage counts cues are going to be a little little",
    "start": "1723919",
    "end": "1729880"
  },
  {
    "text": "less expensive there's a lot less overhead cost to that but service bu qes serve a couple of specific purposes the",
    "start": "1729880",
    "end": "1737159"
  },
  {
    "text": "number one purpose is is this is the only place that you can guarantee an ordered que so I don't know why storage",
    "start": "1737159",
    "end": "1743880"
  },
  {
    "text": "Q is actually called storage Q if I can't guarantee order when I as a computer scientist think of cu's I think",
    "start": "1743880",
    "end": "1750399"
  },
  {
    "text": "of fifo but yes storage cues may be an order but there's not an actual",
    "start": "1750399",
    "end": "1756600"
  },
  {
    "text": "guarantee um and when we do it if we get a chance we'll do a demo maybe but the you can actually see it getting out of",
    "start": "1756600",
    "end": "1762480"
  },
  {
    "text": "order so the other thing to keep in mind is is data size so if my message size",
    "start": "1762480",
    "end": "1767600"
  },
  {
    "text": "needs to be bigger than 256 kiloby I have to use service bus or better actually bigger",
    "start": "1767600",
    "end": "1773760"
  },
  {
    "text": "than 64 KOB it has to be service bus so I can go anywhere up to like 100 megabytes now with a premium which is",
    "start": "1773760",
    "end": "1779919"
  },
  {
    "text": "kind of crazy for the size of a message but you can do it uh you get dupe detection dead lettering um again",
    "start": "1779919",
    "end": "1785840"
  },
  {
    "text": "anytime you use a queue you're going to get uh decoupling of your your client and server sides you can send messages",
    "start": "1785840",
    "end": "1791240"
  },
  {
    "text": "and then you can offload some of the work that way um the other two important things to keep in mind are the types of",
    "start": "1791240",
    "end": "1798200"
  },
  {
    "text": "processing so whether I want to be at most once or at least once those are different ways to process so with",
    "start": "1798200",
    "end": "1805440"
  },
  {
    "text": "service bus Q this is the only way to also do atmost once so guaranteed you",
    "start": "1805440",
    "end": "1812760"
  },
  {
    "text": "can do at most Once In Storage cues if you write really good code and don't",
    "start": "1812760",
    "end": "1817919"
  },
  {
    "text": "have any other competing clients but in service bus you can actually guarantee",
    "start": "1817919",
    "end": "1823000"
  },
  {
    "text": "at most once by deleting it as you read it with the receive and delete option or",
    "start": "1823000",
    "end": "1828279"
  },
  {
    "text": "you can do a peak clock which is the at least once which means I'm just going to put a lock on it but if I decide I don't",
    "start": "1828279",
    "end": "1833919"
  },
  {
    "text": "get it processed the lock expires and it can be processed again so again uh it's a service bus",
    "start": "1833919",
    "end": "1841600"
  },
  {
    "text": "name space standard or better if you want to use topics which I'm going to show in a minute um so you'll want to",
    "start": "1841600",
    "end": "1847440"
  },
  {
    "text": "have at least a standard for that and then ultimately uh local authentication again the SAS token the same thing we had for the thing so you create a que",
    "start": "1847440",
    "end": "1855399"
  },
  {
    "text": "and the que you can set different pieces of the puzzle and there's this other really interesting and confusing piece",
    "start": "1855399",
    "end": "1862240"
  },
  {
    "text": "of the que are my Q messages in order by default yes they are if I have multiple processing that I",
    "start": "1862240",
    "end": "1869440"
  },
  {
    "text": "need to do across messages they're not guaranteed unless I turn on sessions so",
    "start": "1869440",
    "end": "1875039"
  },
  {
    "text": "if I have a group of messages that need to be processed in order and they need to wait for each other to be processed",
    "start": "1875039",
    "end": "1881200"
  },
  {
    "text": "in order so that we don't have like part three goes faster than part two so part",
    "start": "1881200",
    "end": "1886840"
  },
  {
    "text": "three finished so part four was triggered but part two is still running I have to use sessions so you got to",
    "start": "1886840",
    "end": "1892639"
  },
  {
    "text": "turn that on it's a lot trickier to work with so if you don't need it if uh you don't want to turn it on but once you",
    "start": "1892639",
    "end": "1898399"
  },
  {
    "text": "need it it could be a lifesaver so this is what that looks like with the session so here what you",
    "start": "1898399",
    "end": "1903600"
  },
  {
    "text": "can see is four different data feeds coming in where you have processing that needs to happen in order for the",
    "start": "1903600",
    "end": "1909519"
  },
  {
    "text": "specific things that we're keying on and that session basically says hey this que",
    "start": "1909519",
    "end": "1914799"
  },
  {
    "text": "processes my session in order and it also prevents part one from firing",
    "start": "1914799",
    "end": "1920039"
  },
  {
    "text": "before or part two from firing before part one completes and so that keeps your processing and your transactions",
    "start": "1920039",
    "end": "1926399"
  },
  {
    "text": "kind of uh synchronously in order so again we need the SAS token for",
    "start": "1926399",
    "end": "1931799"
  },
  {
    "text": "producer we need the entra ID if you want to do that you got the data owner receiver and sender same three",
    "start": "1931799",
    "end": "1937559"
  },
  {
    "text": "permissions just an Entre ID instead of a SAS token and then ultimately I wanted to call this out if you do use entra ID",
    "start": "1937559",
    "end": "1943960"
  },
  {
    "text": "don't choose these uh the service bus cues are bad um or sorry the storage Q data",
    "start": "1943960",
    "end": "1951440"
  },
  {
    "text": "contributor and processor Center and reader are bad for service bus they won't do you any good so it's important",
    "start": "1951440",
    "end": "1957159"
  },
  {
    "text": "to keep that in mind so when I create a queue everything you do with SDK and",
    "start": "1957159",
    "end": "1962880"
  },
  {
    "text": "Azure pretty much for all these Services is going to be a hierarchy so you need some sort of client you need some sort of uh connection for that client and",
    "start": "1962880",
    "end": "1969039"
  },
  {
    "text": "then from there you need some more information what Que am I connecting to so that's essentially what we're doing here creating the queue and then what I",
    "start": "1969039",
    "end": "1975799"
  },
  {
    "text": "wanted to call out here is the difference between at most once and at least once so again if I want to do",
    "start": "1975799",
    "end": "1981320"
  },
  {
    "text": "receive and delete on my options I can do that and that allows me to say once I get this out of the queue it's gone",
    "start": "1981320",
    "end": "1987000"
  },
  {
    "text": "forever and then uh the at least one says hey I'm just going to put a lock on it and the thing about that is you have",
    "start": "1987000",
    "end": "1993519"
  },
  {
    "text": "to remember at the end to process it and basically mark it as as processed if you",
    "start": "1993519",
    "end": "2000000"
  },
  {
    "text": "don't you're in big trouble because then ites it goes back into the queue so uh when we send it we send it",
    "start": "2000000",
    "end": "2007320"
  },
  {
    "text": "as a bat so we're adding some service bus messag and this is just some Json for movies um that's generated in the",
    "start": "2007320",
    "end": "2012919"
  },
  {
    "text": "app and then that sends a a sync and then at the end of the send message we dispose it clean up ourself you know",
    "start": "2012919",
    "end": "2018799"
  },
  {
    "text": "clean up and this is the processor again handling it with uh a message Handler we start the processing async and the",
    "start": "2018799",
    "end": "2025679"
  },
  {
    "text": "processing then uh allows us to parse out that movie Object and write it and",
    "start": "2025679",
    "end": "2031760"
  },
  {
    "text": "so with that in mind uh real quick throw out a demo",
    "start": "2031760",
    "end": "2037720"
  },
  {
    "text": "so this will be the service bus",
    "start": "2041399",
    "end": "2045639"
  },
  {
    "text": "q and again just to call this out when we do our",
    "start": "2052760",
    "end": "2057919"
  },
  {
    "text": "producer we have that choice of which one we want to use for our client",
    "start": "2058639",
    "end": "2063760"
  },
  {
    "text": "whether we're going to use the options to do the the peak and receive and Peak sorry rece and delete or the PE clock so",
    "start": "2063760",
    "end": "2073200"
  },
  {
    "text": "yeah so we're going to that's that's on this receiver of course let me send some",
    "start": "2073200",
    "end": "2078480"
  },
  {
    "text": "messages to my q and it will bring this over here so",
    "start": "2078480",
    "end": "2084320"
  },
  {
    "text": "you can see it sent 17 movies to the queue and then",
    "start": "2084320",
    "end": "2089679"
  },
  {
    "text": "on this one we're going to go ahead and receive them",
    "start": "2089679",
    "end": "2095158"
  },
  {
    "text": "maybe there they are so it's just processing them out and this is doing um",
    "start": "2101200",
    "end": "2106280"
  },
  {
    "text": "the receive and uh P clock I Believe by default set up with that code and then at the end of that we have",
    "start": "2106280",
    "end": "2113960"
  },
  {
    "text": "to make sure that we process it out and the start processing complete message so that's",
    "start": "2113960",
    "end": "2121079"
  },
  {
    "text": "one thing if we don't do that when we're doing the send and delete or peock",
    "start": "2121079",
    "end": "2126160"
  },
  {
    "text": "excuse me then we end up with you know goes back into the que so again now all",
    "start": "2126160",
    "end": "2131440"
  },
  {
    "text": "that code's out there for you and you can see how that would work um but ultimately that's the the gist of",
    "start": "2131440",
    "end": "2138359"
  },
  {
    "text": "working with cues so the next one is topics so cues are great because I got ordered",
    "start": "2138359",
    "end": "2144680"
  },
  {
    "text": "guarantees what happens if I have different clients that need to read different parts of the messages that's",
    "start": "2144680",
    "end": "2149960"
  },
  {
    "text": "what topics are for so now what I can do is I can feed my cues once and then I",
    "start": "2149960",
    "end": "2155480"
  },
  {
    "text": "can put different filters on my message mesages to send to different cues what's really cool about this is every client",
    "start": "2155480",
    "end": "2162359"
  },
  {
    "text": "has their own q and it's going to be every time I",
    "start": "2162359",
    "end": "2168880"
  },
  {
    "text": "apologize just got to get it in Focus so if I you know have different clients and I want to say hey only these messages go",
    "start": "2171359",
    "end": "2178800"
  },
  {
    "text": "to client a these messages go to client B and these messages go to client C this message goes to everybody we can create",
    "start": "2178800",
    "end": "2184280"
  },
  {
    "text": "different filters on our code to send the messages to the right place so we filter at this subscription level",
    "start": "2184280",
    "end": "2190280"
  },
  {
    "text": "and we make sure that the subscription subscribes to their particular um",
    "start": "2190280",
    "end": "2196760"
  },
  {
    "text": "filter so what that looks like uh ultimately when we do this we create a SQL filter a Boolean filter or a",
    "start": "2196880",
    "end": "2203400"
  },
  {
    "text": "correlation filter and typically you're going to do a Boolean filter that's set to true for sending all cues so I send",
    "start": "2203400",
    "end": "2210960"
  },
  {
    "text": "the message once and it goes to all the cues if I do a SQL filter then I can filter it on different things like does",
    "start": "2210960",
    "end": "2218240"
  },
  {
    "text": "the subject contain client name does the subject contain this event whatever or this this message whatever it might be",
    "start": "2218240",
    "end": "2224960"
  },
  {
    "text": "um this piece of the puzzle you can do it so blob storage is always a really",
    "start": "2224960",
    "end": "2230480"
  },
  {
    "text": "good example to filter and see this there's millions of applications to this but outside of blob storage but if you",
    "start": "2230480",
    "end": "2235960"
  },
  {
    "text": "think of blob storage you have different containers you could filter on the total blob storage account you could filter on different containers you can even filter",
    "start": "2235960",
    "end": "2242839"
  },
  {
    "text": "on different types of images or messages so you can do numeric value whether a",
    "start": "2242839",
    "end": "2248240"
  },
  {
    "text": "property has a value or greater than or equal to or less than um you can do some",
    "start": "2248240",
    "end": "2253280"
  },
  {
    "text": "filter value is you know filtered you can do whether you have different",
    "start": "2253280",
    "end": "2258400"
  },
  {
    "text": "strings you're looking for in the subject so maybe you're looking for different pieces of information that would be in your subject you're sending",
    "start": "2258400",
    "end": "2265000"
  },
  {
    "text": "U and a correlation ID like something like critical or information to kind of Route different messages to different",
    "start": "2265000",
    "end": "2271599"
  },
  {
    "text": "places so you create a topic this time instead of a que the topic has uh Max",
    "start": "2271599",
    "end": "2277760"
  },
  {
    "text": "topic sizes you can set there um you know time to live things like that so what we have in our code sample is we're",
    "start": "2277760",
    "end": "2284079"
  },
  {
    "text": "going to create three subscriptions on the same que uh one for adult movies and it's not the type of adult movies you're",
    "start": "2284079",
    "end": "2289720"
  },
  {
    "text": "thinking of it's just r or R PG-13 um and then we have family movies which is",
    "start": "2289720",
    "end": "2295440"
  },
  {
    "text": "like pg& G and then we have all the movies which is all of them so those three subscriptions then",
    "start": "2295440",
    "end": "2301560"
  },
  {
    "text": "can be filtered as we send one message it will go to the right cues and you can view all that in your uh portal while",
    "start": "2301560",
    "end": "2308720"
  },
  {
    "text": "it's happening you can see the different cues and the messages being processed again the access token is done to allow",
    "start": "2308720",
    "end": "2315880"
  },
  {
    "text": "different pieces to read from the puzzle so we have to have um in this one there's a manager project which creates",
    "start": "2315880",
    "end": "2321960"
  },
  {
    "text": "the three subscriptions and sets the filters so that's this first part here where you get the root manage access",
    "start": "2321960",
    "end": "2328359"
  },
  {
    "text": "connection string so remember I said God mode is only for Unique scenarios this is one of them so if I want to have",
    "start": "2328359",
    "end": "2334359"
  },
  {
    "text": "access to the top level of all of my Topics in that namespace then I need to make sure that I have god mode so that I",
    "start": "2334359",
    "end": "2341839"
  },
  {
    "text": "can create a new topic in the namespace and then it creates the three subscriptions once we have that um we",
    "start": "2341839",
    "end": "2347960"
  },
  {
    "text": "have the ability to filter those movies across those subscriptions and receive",
    "start": "2347960",
    "end": "2353680"
  },
  {
    "text": "them and send them to that to the two subscriptions so the client says uh make sure the Topic's there make sure the",
    "start": "2353680",
    "end": "2360079"
  },
  {
    "text": "subscriptions are there and then ultimately create some if they're not and that is about all it does and then",
    "start": "2360079",
    "end": "2368800"
  },
  {
    "text": "the the producer is going to send the movie and the movie is only sent once and it will go into the appropriate",
    "start": "2368800",
    "end": "2374040"
  },
  {
    "text": "queue and then the sender will be able to the receivers will be able to see it so you get subscriptions going to all",
    "start": "2374040",
    "end": "2380520"
  },
  {
    "text": "three and then a message count of being able to um determine you know which me",
    "start": "2380520",
    "end": "2385640"
  },
  {
    "text": "how many messages are in each queue even though I send the message once again you can see how it it goes only to the appropriate",
    "start": "2385640",
    "end": "2391800"
  },
  {
    "text": "place oh you might say well there's there's 17 messages you only have 16 filtered what happened me one movie was",
    "start": "2391800",
    "end": "2398480"
  },
  {
    "text": "in the like 1950s and it doesn't have a rating so it didn't go anywhere got",
    "start": "2398480",
    "end": "2404078"
  },
  {
    "text": "lost so then this is just a you know calling out the code but ultimately we have to choose one of the subscriptions",
    "start": "2404480",
    "end": "2410400"
  },
  {
    "text": "when we process it and that process will then filter by that subscription and make it",
    "start": "2410400",
    "end": "2415720"
  },
  {
    "text": "happen um so this is just the receiving part and then ultimately that allows me",
    "start": "2415720",
    "end": "2421599"
  },
  {
    "text": "to make a choice of which subscription I want and print them out and then you can",
    "start": "2421599",
    "end": "2426920"
  },
  {
    "text": "see that that all happens we have enough time and I know you're probably getting hungry um so I'll go as fast as I can",
    "start": "2426920",
    "end": "2433040"
  },
  {
    "text": "but I want to show you this because this is probably my favorite part of the whole thing is this",
    "start": "2433040",
    "end": "2440040"
  },
  {
    "text": "topics so again this is the service bus Pub sub project also available on the",
    "start": "2441040",
    "end": "2446400"
  },
  {
    "text": "repo and all of my connection strings are preset this is my administrator",
    "start": "2446400",
    "end": "2451760"
  },
  {
    "text": "project again this is the one that's creating the different subscriptions I don't think I called this out good enough in the codes so I want to show",
    "start": "2451760",
    "end": "2458000"
  },
  {
    "text": "you where I created the actual rule filters so there's one this one is for",
    "start": "2458000",
    "end": "2465280"
  },
  {
    "text": "the all adult movies so you can see that on the subscription when I created it I said listen for um this SQL rule filter",
    "start": "2465280",
    "end": "2473839"
  },
  {
    "text": "where the mpa rating is equal to PG-13 or R so it's very it's very similar to SQL it's a SQL rule filter and it allows",
    "start": "2473839",
    "end": "2481720"
  },
  {
    "text": "me to do that the other one is the same it's an MP MPA rating of G or PG and",
    "start": "2481720",
    "end": "2488040"
  },
  {
    "text": "then the true filter is literally just you know passing it true so that's PG or G I must the true filter must be up here",
    "start": "2488040",
    "end": "2495839"
  },
  {
    "text": "yeah so all movies just sends a new true rule filter there's nothing special about that at all so send them all there",
    "start": "2495839",
    "end": "2501440"
  },
  {
    "text": "so this will run and it will create all my",
    "start": "2501440",
    "end": "2506480"
  },
  {
    "text": "subscriptions in my in my portal so let me actually show you that because this is pretty cool too",
    "start": "2508160",
    "end": "2516240"
  },
  {
    "text": "so inside of my service bus if I go to my",
    "start": "2517800",
    "end": "2524880"
  },
  {
    "text": "topics you can see that it would create movies to review if it's not there and ultimately um what it did was it said",
    "start": "2524880",
    "end": "2532119"
  },
  {
    "text": "they're already there because I ran it earlier so it wouldn't have to we wouldn't have to wait for it but you can then see your subscriptions and you can",
    "start": "2532119",
    "end": "2538000"
  },
  {
    "text": "see your message counts and things like that right here in in the portal um and then you can even like peek at them if",
    "start": "2538000",
    "end": "2543640"
  },
  {
    "text": "you want to see what got filtered to make sure it works so once I have it let's produce some so",
    "start": "2543640",
    "end": "2549839"
  },
  {
    "text": "we're going to do the publisher and again this is just the same code that we've been seeing over and over again we",
    "start": "2549839",
    "end": "2554880"
  },
  {
    "text": "got our SAS token that we connect as a producer and it says hey I'm going to publish the movies so all 17 movies have",
    "start": "2554880",
    "end": "2561040"
  },
  {
    "text": "been sent into the topic q and essentially what happens then is all",
    "start": "2561040",
    "end": "2566839"
  },
  {
    "text": "three of the cues get their own or all three of the subscriptions get their own que so let's make sure that we have some",
    "start": "2566839",
    "end": "2573240"
  },
  {
    "text": "some stuff here there we go so again the filters allowed all the movies to go",
    "start": "2573240",
    "end": "2579520"
  },
  {
    "text": "into the all movies subscription and the adult movies with PG or PG-13 or R went",
    "start": "2579520",
    "end": "2585000"
  },
  {
    "text": "into that subscription and the all family movies went to the other one all my client has to do then is connect to",
    "start": "2585000",
    "end": "2590520"
  },
  {
    "text": "the correct subscription and they only see the messages that are meant for them and they're all still in order and they're all still um independent of the",
    "start": "2590520",
    "end": "2598200"
  },
  {
    "text": "original things so if I delete from the all family movies it doesn't delete from the all adult movies it doesn't affect",
    "start": "2598200",
    "end": "2603920"
  },
  {
    "text": "the all movies they're all they're all independent cues which is what what we get to see in this final part when we",
    "start": "2603920",
    "end": "2609119"
  },
  {
    "text": "run the",
    "start": "2609119",
    "end": "2611400"
  },
  {
    "text": "consumer so we can choose so let's go ahead and just do the family movies and we can see that we're going",
    "start": "2617440",
    "end": "2623880"
  },
  {
    "text": "to receive the messages just from that subscription all four of them and that's it it process them it's done so we got",
    "start": "2623880",
    "end": "2630319"
  },
  {
    "text": "you know I don't know Top Gun and pul fiction I don't know Pulp Fiction is a family movie but maybe you guys think it",
    "start": "2630319",
    "end": "2636880"
  },
  {
    "text": "is I don't know so again you can run it again over and over again to see how this processes",
    "start": "2636880",
    "end": "2642920"
  },
  {
    "text": "differently but the the really cool part of that is again watching this side of the of the equation and seeing how only",
    "start": "2642920",
    "end": "2648839"
  },
  {
    "text": "the all family movies was cleared out and the rest of them were left alone so that client got all their messages the",
    "start": "2648839",
    "end": "2654800"
  },
  {
    "text": "other ones haven't processed yet that's awesome so you know we could run this all day over and over again to see that",
    "start": "2654800",
    "end": "2661000"
  },
  {
    "text": "but at the end of the day it would just end up deleting them all from that cue so you know if I print them all out",
    "start": "2661000",
    "end": "2667200"
  },
  {
    "text": "it'll it'll receive all the all the messages and it's now processing out of the",
    "start": "2667200",
    "end": "2672680"
  },
  {
    "text": "queue so that's probably be good enough on that um and then that just leaves storage cues but before I do that does",
    "start": "2673559",
    "end": "2680640"
  },
  {
    "text": "anybody have any further questions about that topic before we move",
    "start": "2680640",
    "end": "2686680"
  },
  {
    "text": "on okay let's go to lunch right so all right let's do the storage cues then",
    "start": "2686839",
    "end": "2692160"
  },
  {
    "text": "quick and so storage cues again are probably the cheaper option and they are",
    "start": "2692160",
    "end": "2697280"
  },
  {
    "text": "Q's except they can't guarantee order and there's two things about this again",
    "start": "2697280",
    "end": "2702319"
  },
  {
    "text": "I train a lot for a 204 so I'm sorry if these things are a little bit dry but if you're making architectural decision",
    "start": "2702319",
    "end": "2707520"
  },
  {
    "text": "they're pretty important so I like to call it out the message size has to be less than 64 kilobytes if it's going to",
    "start": "2707520",
    "end": "2712960"
  },
  {
    "text": "be bigger than that it's not going to be able to be stored in storage q and then you also have to use storage Q when it's",
    "start": "2712960",
    "end": "2719839"
  },
  {
    "text": "greater than 80 gigabytes of total data so you think of storage you think wow that's lots of storage awesome but the",
    "start": "2719839",
    "end": "2726559"
  },
  {
    "text": "message sizes are smaller than service bus it's not necessarily intuitive so just keep that in mind but if I'm going",
    "start": "2726559",
    "end": "2733400"
  },
  {
    "text": "to have over 80 gbes of data service bus can't handle it you'd have to have multiple service buses and all kinds of",
    "start": "2733400",
    "end": "2739440"
  },
  {
    "text": "orchestration around which ones you're in if you want to go over 80 gigaby so if you have a terabyte of data or",
    "start": "2739440",
    "end": "2745240"
  },
  {
    "text": "something ridiculous storage Q is your option right the tricky thing about storage Q is how you actually handle the",
    "start": "2745240",
    "end": "2751800"
  },
  {
    "text": "data a little bit differently so again same hierarchy connect to the the",
    "start": "2751800",
    "end": "2757119"
  },
  {
    "text": "storage account connect to create this Q client uh you can create the queue you can send messages to it just like you",
    "start": "2757119",
    "end": "2763559"
  },
  {
    "text": "would expect um again we're converting movies to Json and sending it in there",
    "start": "2763559",
    "end": "2768599"
  },
  {
    "text": "you get this array of receipts then that you're getting back if you want to",
    "start": "2768599",
    "end": "2773800"
  },
  {
    "text": "leverage those messages you need that receipt ID um to be to be able to",
    "start": "2773800",
    "end": "2779559"
  },
  {
    "text": "directly process them if you want to do updates on them or something now that's the really interesting case though",
    "start": "2779559",
    "end": "2784960"
  },
  {
    "text": "because if I take that receipt and I update the message in the queue it actually goes to the bottom of the order",
    "start": "2784960",
    "end": "2792680"
  },
  {
    "text": "now maybe that's correct processing because I did change the message but if that was supposed to be handled before",
    "start": "2792680",
    "end": "2797960"
  },
  {
    "text": "the other stuff we're in big trouble so you can peek at them uh there is no atmost once in storage Q because",
    "start": "2797960",
    "end": "2805559"
  },
  {
    "text": "you can't you can't delete until you're done processing you can't just receive and delete the same time so you can't",
    "start": "2805559",
    "end": "2811839"
  },
  {
    "text": "guarantee at most once if you only have one consumer and you're peing and deleting every time you can guarantee at",
    "start": "2811839",
    "end": "2818160"
  },
  {
    "text": "most once unless it fails if it fails then of course you know that's a whole other world",
    "start": "2818160",
    "end": "2823720"
  },
  {
    "text": "but so you update the message here this is how you can update and again once you update that this one uh updated from Top",
    "start": "2823720",
    "end": "2830480"
  },
  {
    "text": "Gun to top gun Maverick um and when I did that it went to the bottom of the queue and then ultimately uh they're out",
    "start": "2830480",
    "end": "2836319"
  },
  {
    "text": "of order if you were thinking Top Gun was the top movie all of a sudden it's the bottom movie um so you can also set",
    "start": "2836319",
    "end": "2842680"
  },
  {
    "text": "the number of messages you want to receive on a batch so you can say the maximum messages I'm going to pull is 20",
    "start": "2842680",
    "end": "2848400"
  },
  {
    "text": "um and then you have to you know make multiple calls if you have more than that and you're just de serializing the",
    "start": "2848400",
    "end": "2853559"
  },
  {
    "text": "data so that's just basic code this is the most important part so we saw similar when we completed the the",
    "start": "2853559",
    "end": "2859640"
  },
  {
    "text": "process in the service bus when we did the P clock and in in storage queue you",
    "start": "2859640",
    "end": "2864960"
  },
  {
    "text": "have to delete at the end if you don't delete the message it will go back into the queue and the way cues work in",
    "start": "2864960",
    "end": "2871079"
  },
  {
    "text": "storage queue is it basically puts a time um a time stamp on when you leas it",
    "start": "2871079",
    "end": "2877400"
  },
  {
    "text": "right and so if it's a long running process you actually have to send a notification that I would like to extend",
    "start": "2877400",
    "end": "2883200"
  },
  {
    "text": "my lease and if you do that nobody else can get it out of the queue um what it also does is makes it really hard for",
    "start": "2883200",
    "end": "2890160"
  },
  {
    "text": "any other client to see that until after that time expires has done so if you lock your messages for an hour then you",
    "start": "2890160",
    "end": "2897880"
  },
  {
    "text": "lose your thread you won't see that message again for another hour and it's just kind of",
    "start": "2897880",
    "end": "2903680"
  },
  {
    "text": "hidden um You probably see it that it's there in the portal but you I don't know that you could even read it um this is",
    "start": "2903680",
    "end": "2909839"
  },
  {
    "text": "again updating with the time stamp here to do that leasing so if I want to extend the lease",
    "start": "2909839",
    "end": "2916040"
  },
  {
    "text": "and then deleting from the queue so uh that's the last demo officially and that",
    "start": "2916040",
    "end": "2921480"
  },
  {
    "text": "one is just the storage q and same thing with the code here is",
    "start": "2921480",
    "end": "2927960"
  },
  {
    "text": "ultimately all for all out there for you if you want to run these on your own later or if you need to see these again",
    "start": "2927960",
    "end": "2934119"
  },
  {
    "text": "at a at a slower Pace this this one is utilizing storage",
    "start": "2934119",
    "end": "2940079"
  },
  {
    "text": "queue and again we've already kind of gone over the code so um I don't know what I just did there uh ultimately this",
    "start": "2941720",
    "end": "2949440"
  },
  {
    "text": "just gives you options of how you want to handle data with your queue it creates the queue if it doesn't exist it",
    "start": "2949440",
    "end": "2954760"
  },
  {
    "text": "then says you know hey let's get all the receipts so that we can update top gone um using that receipt and then that's",
    "start": "2954760",
    "end": "2961520"
  },
  {
    "text": "where this is doing that ultimately receiving the messages and then it asks you if you'd like to extend the lease",
    "start": "2961520",
    "end": "2967680"
  },
  {
    "text": "and if you do that again they get locked for an hour based on whatever your time span is here really this is a time span",
    "start": "2967680",
    "end": "2972720"
  },
  {
    "text": "of an hour um you could set that differently but um once I do that they're basically locked and they won't",
    "start": "2972720",
    "end": "2978520"
  },
  {
    "text": "they won't it won't let me process them again until that hour is exposed or done and that's uh the last part is just",
    "start": "2978520",
    "end": "2984799"
  },
  {
    "text": "clean up the queue if you want so you can run this item potently because it will create if it doesn't exist or it'll",
    "start": "2984799",
    "end": "2990720"
  },
  {
    "text": "just use the one that's there so no worries there but use the right project would help",
    "start": "2990720",
    "end": "2998440"
  },
  {
    "text": "and I guess I could probably just F5 this one there's only one project so it's adding messages to the",
    "start": "2999559",
    "end": "3006880"
  },
  {
    "text": "storage queue and basically all those movies were added and then it asks uh do you",
    "start": "3006880",
    "end": "3012599"
  },
  {
    "text": "want to process them so I'm going to process them and it says would you like to lease us would you like to lease the",
    "start": "3012599",
    "end": "3018160"
  },
  {
    "text": "message for one hour I give a note don't do this because you won't be able to delete them for an hour so we're going to say no so there's the processing of",
    "start": "3018160",
    "end": "3024960"
  },
  {
    "text": "the messages out of the queue again everything kind of looks in order except for Top Gun because Top Gun got moved to",
    "start": "3024960",
    "end": "3030799"
  },
  {
    "text": "the end when I updated it and would you like to delete the",
    "start": "3030799",
    "end": "3035920"
  },
  {
    "text": "queue if I say no it will you know leave it there and that's essentially the demo",
    "start": "3035920",
    "end": "3043040"
  },
  {
    "text": "um I'm going to lease them really quick just to show you the pain of that so again I if I don't delete the",
    "start": "3043040",
    "end": "3049119"
  },
  {
    "text": "queue this is item potent so it wouldn't matter um this time I'm going to say I'm",
    "start": "3049119",
    "end": "3054559"
  },
  {
    "text": "going to I'm going to process and then I'm going to actually lease them so I'm going to say yes so now it's going to renew the lease on all of those messages",
    "start": "3054559",
    "end": "3061480"
  },
  {
    "text": "now after that it's going to error out because it's going to say I can't read these messages that you just locked up",
    "start": "3061480",
    "end": "3067319"
  },
  {
    "text": "um so big big problems um and then ultimately if you go into this portal",
    "start": "3067319",
    "end": "3074119"
  },
  {
    "text": "this is why I'm interested to see in the storage",
    "start": "3074119",
    "end": "3079480"
  },
  {
    "text": "account uh storage account oh wrong storage account",
    "start": "3080440",
    "end": "3089520"
  },
  {
    "text": "apparently okay all right so I was hoping to find the storage account that those were in I thought it was in that",
    "start": "3089680",
    "end": "3097480"
  },
  {
    "text": "one shouldn't be here but I'll check this one anyway nope okay I I'm not going to be",
    "start": "3101640",
    "end": "3107720"
  },
  {
    "text": "able to find it uh in the interest of your personal sanity I'm not going to make you watch me do that so you've seen",
    "start": "3107720",
    "end": "3114280"
  },
  {
    "text": "all the different message processing that's happening along the way you've seen different types hopefully if you had questions about which one you should",
    "start": "3114280",
    "end": "3120319"
  },
  {
    "text": "use when you now kind of feel like oh I'm pretty confident about that I know when I should use this have enough information to be dangerous about how to",
    "start": "3120319",
    "end": "3126960"
  },
  {
    "text": "use the code if you want to um and then if you're still using like inservice bus or rabbit mq or or something to wrap all",
    "start": "3126960",
    "end": "3133680"
  },
  {
    "text": "this now you have a little more information about how the underlying stuff might work too so does anybody",
    "start": "3133680",
    "end": "3139599"
  },
  {
    "text": "have further questions about all of",
    "start": "3139599",
    "end": "3144040"
  },
  {
    "text": "that is every everybody hungry yeah all right well let's go ahead and wrap it up",
    "start": "3145160",
    "end": "3151640"
  },
  {
    "text": "then and have a great lunch thank you again for all all of you for coming I really appreciate you giving me your",
    "start": "3151640",
    "end": "3158440"
  },
  {
    "text": "time sweet",
    "start": "3160240",
    "end": "3164240"
  }
]