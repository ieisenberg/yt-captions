[
  {
    "start": "0",
    "end": "82000"
  },
  {
    "text": "good afternoon thank you for coming to my session on security in asp.net core",
    "start": "9620",
    "end": "15170"
  },
  {
    "text": "or I will probably be heckled by Dominic at the back because he knows more about some security things than I do I will",
    "start": "15170",
    "end": "22039"
  },
  {
    "text": "freely admit that my name is Barry d'harans I am the dotnet security PM the slides and the demos for this will be",
    "start": "22039",
    "end": "28820"
  },
  {
    "text": "available from my website which is I don't know two org probably in about 20 minutes after I'm done assuming the",
    "start": "28820",
    "end": "35690"
  },
  {
    "text": "hotel Wi-Fi does not fall over which seem to be quite often here basically my",
    "start": "35690",
    "end": "44899"
  },
  {
    "text": "job is to try and tell everyone how to do things correctly from a security perspective I also own certain features",
    "start": "44899",
    "end": "51409"
  },
  {
    "text": "of asp.net that are related by security and then when everything goes wrong and someone hacks us I'm the person that has",
    "start": "51409",
    "end": "58370"
  },
  {
    "text": "to deal with it which is why I chain smoke in order to quickly end my pin you",
    "start": "58370",
    "end": "63859"
  },
  {
    "text": "can follow me on Twitter as a blow dart it is not very work focused I will warn you now today it has been pictures of",
    "start": "63859",
    "end": "71680"
  },
  {
    "text": "ibis weird looking birds that I apparently am told are called bin",
    "start": "71680",
    "end": "77149"
  },
  {
    "text": "chickens you people are weird so I cover",
    "start": "77149",
    "end": "84079"
  },
  {
    "start": "82000",
    "end": "100000"
  },
  {
    "text": "some of the various things that we've done in asp.net core 2.0 I was gonna",
    "start": "84079",
    "end": "89840"
  },
  {
    "text": "cover some of the things that are coming up in 2.1 but my 2.1 install does not work so we're just gonna talk about",
    "start": "89840",
    "end": "97159"
  },
  {
    "text": "those vaguely but unfortunately a can't demo first up is hosting in asp.net core",
    "start": "97159",
    "end": "103909"
  },
  {
    "start": "100000",
    "end": "164000"
  },
  {
    "text": "we decided that we didn't like any web server on the planet that already existed and so we thought it would be a",
    "start": "103909",
    "end": "111140"
  },
  {
    "text": "great idea to write our own which is wonderful from a performance point of",
    "start": "111140",
    "end": "117469"
  },
  {
    "text": "view from a security point of view it's very much giving me an ulcer to be",
    "start": "117469",
    "end": "122689"
  },
  {
    "text": "perfectly honest however we did a lot of work in cash flow for 2.0 including",
    "start": "122689",
    "end": "128330"
  },
  {
    "text": "having some pen testers come in from outside and beat up on it and when you tell pen testers we have a brand new web",
    "start": "128330",
    "end": "133580"
  },
  {
    "text": "server for you to test they tend to get very very excited because that doesn't happen very often kestrel now supports",
    "start": "133580",
    "end": "141470"
  },
  {
    "text": "HTTPS we have finally updated visual studio so",
    "start": "141470",
    "end": "148010"
  },
  {
    "text": "it will issue self-signed cert so that chrome does not barf on if you have an",
    "start": "148010",
    "end": "153170"
  },
  {
    "text": "existing self-signed cert we won't update it because we don't want to overwrite you but you can update it yourself manually by following that gist",
    "start": "153170",
    "end": "160010"
  },
  {
    "text": "and you can get a self-signed cert that chrome is happy with you can configure",
    "start": "160010",
    "end": "166220"
  },
  {
    "text": "the search via a config like this it's all very exciting because the way that we are now building our web hosts has",
    "start": "166220",
    "end": "173240"
  },
  {
    "text": "using a lot of opinions and defaults and",
    "start": "173240",
    "end": "178630"
  },
  {
    "text": "we've decided that yes this is probably the easiest way to do things so now you just have like two lines rather than 17",
    "start": "178630",
    "end": "186680"
  },
  {
    "text": "to configure stuff but you could still have those 17 lines if you are paid by the line of code we have a lot of limits",
    "start": "186680",
    "end": "197750"
  },
  {
    "start": "193000",
    "end": "206000"
  },
  {
    "text": "in castro in version 1 we had all of those I'm not going to go through the",
    "start": "197750",
    "end": "203900"
  },
  {
    "text": "slide in version 2 we added some more and when we added those we've come to",
    "start": "203900",
    "end": "209750"
  },
  {
    "text": "the conclusion that yes you can run Castro as your main web server with nothing in front of it I am very careful",
    "start": "209750",
    "end": "216020"
  },
  {
    "text": "in my wording here which makes Pilar really unhappy he's like what are you trying to say with Castro 2.0 using it",
    "start": "216020",
    "end": "224870"
  },
  {
    "text": "on the edge will no longer be unsupported which is a wonderful phrase that should make you stop and think",
    "start": "224870",
    "end": "230020"
  },
  {
    "text": "basically if you use the only edge in one we're like hey you're on your own it's not our problem in 2.0 if you want",
    "start": "230020",
    "end": "237590"
  },
  {
    "text": "to do it feel free now would I recommend it no uhm I think we're all in agreement",
    "start": "237590",
    "end": "244340"
  },
  {
    "text": "except maybe perhaps for David in that it's a new web server it's been out for",
    "start": "244340",
    "end": "250970"
  },
  {
    "text": "a year it hasn't been beaten up a lot by attackers so being a lot by us but with",
    "start": "250970",
    "end": "257450"
  },
  {
    "text": "the best will in the world we're probably not going to catch everything they're going to be some weird edge cases where some will be able to",
    "start": "257450",
    "end": "263780"
  },
  {
    "text": "denial-of-service attack your server and iis was the same as was apache in their first 3 or 4 years of existing so i",
    "start": "263780",
    "end": "271880"
  },
  {
    "text": "would honestly recommend that you still put a proxy in front like nginx or yes and then stream everything through",
    "start": "271880",
    "end": "278440"
  },
  {
    "text": "to Castro but if you want to live dangerously feel free and we will",
    "start": "278440",
    "end": "283660"
  },
  {
    "text": "support you authentication in dotnet",
    "start": "283660",
    "end": "290080"
  },
  {
    "start": "285000",
    "end": "352000"
  },
  {
    "text": "core in 1 we rewrote all our authentication story and our",
    "start": "290080",
    "end": "295480"
  },
  {
    "text": "authorization story so there are a few options that you have you have no authentication which obviously is still",
    "start": "295480",
    "end": "302830"
  },
  {
    "text": "a type of authentication you're just anonymous you have individual user accounts where everything is stored in a local database that you have to manage",
    "start": "302830",
    "end": "310000"
  },
  {
    "text": "and backup and how never ever leaks so you have to secure it we have work in",
    "start": "310000",
    "end": "315040"
  },
  {
    "text": "school accounts which is as your Active Directory and we have windows authentication for those of you that are",
    "start": "315040",
    "end": "321130"
  },
  {
    "text": "running on internal windows only networks you do not switch windows authentication on to the Internet it's a",
    "start": "321130",
    "end": "327580"
  },
  {
    "text": "bad bad thing we have social offs we have Facebook Twitter Google Microsoft account and Roth bill in there is a community driven",
    "start": "327580",
    "end": "334720"
  },
  {
    "text": "project for lots and lots and lots of providers for social networks that I have never heard of but you can",
    "start": "334720",
    "end": "343060"
  },
  {
    "text": "basically find pretty much everything you want in the SP net security ooofff",
    "start": "343060",
    "end": "348190"
  },
  {
    "text": "providers project in asp net contrib so",
    "start": "348190",
    "end": "354729"
  },
  {
    "start": "352000",
    "end": "470000"
  },
  {
    "text": "template off like I say we have local databases everything is done via EF so you can change how your models look it's",
    "start": "354729",
    "end": "362919"
  },
  {
    "text": "very opinionated in how we store passwords we're not going to let you change that because we think we know",
    "start": "362919",
    "end": "368710"
  },
  {
    "text": "best so it is what it is and eventually",
    "start": "368710",
    "end": "374530"
  },
  {
    "text": "we will be supporting authentication via oh I DC and we'll talk about that a little bit working school accounts as your Active",
    "start": "374530",
    "end": "381940"
  },
  {
    "text": "Directory it's open ID Connect based if you have a DFS in your network and you",
    "start": "381940",
    "end": "388419"
  },
  {
    "text": "want to use a DFS you must upgrade to a DFS 2016 which if you're not the network administrator good luck and convincing",
    "start": "388419",
    "end": "394780"
  },
  {
    "text": "them to do that because network administrator's do not like changing major parts of their network but it is",
    "start": "394780",
    "end": "399940"
  },
  {
    "text": "necessary we have had lots of requests for sam'l and WS fed because a bunch of",
    "start": "399940",
    "end": "405580"
  },
  {
    "text": "you work with governments and by and people that generally don't move at a fast rate it's not there yet it will",
    "start": "405580",
    "end": "414430"
  },
  {
    "text": "be there some time between now and two point one you won't have to wait for two",
    "start": "414430",
    "end": "419860"
  },
  {
    "text": "point one we're probably playing to push it out in about a month the support that we needed for it got delivered two weeks",
    "start": "419860",
    "end": "425949"
  },
  {
    "text": "before two Oh dropped so we're like yeah okay we're not gonna do that right now so check again in about a month and we",
    "start": "425949",
    "end": "434379"
  },
  {
    "text": "should have WS fed support for all those banks and governments and witnesses",
    "start": "434379",
    "end": "439750"
  },
  {
    "text": "dedication obviously needs to be running on Windows so it requires iis and it's",
    "start": "439750",
    "end": "445029"
  },
  {
    "text": "just against local demand joint servers we don't do impersonation by default anymore which is something that we used",
    "start": "445029",
    "end": "450879"
  },
  {
    "text": "to do in the dotnet framework so you could say if someone is logging in via integrated off I can I pretend to be",
    "start": "450879",
    "end": "455919"
  },
  {
    "text": "them it causes some rather interesting scalability problems so if you are going",
    "start": "455919",
    "end": "461529"
  },
  {
    "text": "to need impersonation you will have to manually impersonate just around the little bits that you need to like",
    "start": "461529",
    "end": "467349"
  },
  {
    "text": "database access for example so we threw",
    "start": "467349",
    "end": "474129"
  },
  {
    "text": "away custom identity classes you can no longer really use a custom identity our",
    "start": "474129",
    "end": "480430"
  },
  {
    "text": "custom principle everything is claims principle best we can have multiple authentication",
    "start": "480430",
    "end": "486310"
  },
  {
    "text": "it was middleware and one it's not just providers in two they don't have to run",
    "start": "486310",
    "end": "491610"
  },
  {
    "text": "automatically basically you could allow your users to log in with cookies but then have an API that needs a job token",
    "start": "491610",
    "end": "498159"
  },
  {
    "text": "and it will magically work as long as you remember what the right spell to make it magically work is only one",
    "start": "498159",
    "end": "505870"
  },
  {
    "text": "middleware will run with every request so there is one middleware that will",
    "start": "505870",
    "end": "511089"
  },
  {
    "text": "always look at a request coming in and try and construct an identity out of it if you will have to choose which one",
    "start": "511089",
    "end": "516789"
  },
  {
    "text": "that is normally it's cookies and if you are using cookie authentication we",
    "start": "516789",
    "end": "522849"
  },
  {
    "text": "finally got to the point of understanding the difference between you being unaffected gated are you being",
    "start": "522849",
    "end": "528640"
  },
  {
    "text": "authenticated but not allowed to do what you want to do so 401 versus 403 because we sucked at that and the dotnet",
    "start": "528640",
    "end": "534699"
  },
  {
    "text": "framework and we fixed it in two well okay so the support",
    "start": "534699",
    "end": "541180"
  },
  {
    "text": "for multiple middlewares was a great idea but we kind of budged it it was far",
    "start": "541180",
    "end": "548890"
  },
  {
    "text": "too easy to configure more than one default middleware and then you put yourselves in what we politely call an",
    "start": "548890",
    "end": "555610"
  },
  {
    "text": "unsupported experience which basically means we have no idea what's gonna happen and you're on your own so we fix",
    "start": "555610",
    "end": "565390"
  },
  {
    "text": "this sonication into is a single service and then you plug the authentication pieces",
    "start": "565390",
    "end": "571480"
  },
  {
    "text": "into that service so it's like a little di container all of its own so we fixed",
    "start": "571480",
    "end": "576640"
  },
  {
    "text": "they're active versus passive stuff and the selection of multiple middleware so now you can't send yourself into a spin",
    "start": "576640",
    "end": "582580"
  },
  {
    "text": "and finally I got rid of two factor auth fire SMS or email if you go file new project",
    "start": "582580",
    "end": "590200"
  },
  {
    "text": "in asp.net 2.0 you will see that we support Authenticator apps which is nice",
    "start": "590200",
    "end": "597670"
  },
  {
    "text": "because nest has been saying for a long time don't use SMS for your two-factor",
    "start": "597670",
    "end": "602710"
  },
  {
    "text": "off because it's incredibly easy to social engineer your way through the",
    "start": "602710",
    "end": "608170"
  },
  {
    "text": "very lacks security on American mobile networks and steal someone's phone number so I can I can vaguely demo this",
    "start": "608170",
    "end": "615850"
  },
  {
    "text": "it's not very exciting here is our template and if I can find the right",
    "start": "615850",
    "end": "623890"
  },
  {
    "text": "project there we go so I start our project we run it and",
    "start": "623890",
    "end": "631900"
  },
  {
    "text": "it's going to do everything that you expect it to do except by default it doesn't generate a QR code for legal",
    "start": "631900",
    "end": "639100"
  },
  {
    "text": "reasons kind of legal reasons if we use third-party software we have to put it",
    "start": "639100",
    "end": "645250"
  },
  {
    "text": "through a bunch of code scans and we also have to make sure that it's supported if it's an active open source",
    "start": "645250",
    "end": "651790"
  },
  {
    "text": "project and I haven't found one yet that meets all our criteria for QR codes so",
    "start": "651790",
    "end": "657070"
  },
  {
    "text": "if I log in so we're not like to ship it I am however I like to document it and",
    "start": "657070",
    "end": "664030"
  },
  {
    "text": "say this is how you can do it so that's what I've ended up doing when you use the templates you will see that when you",
    "start": "664030",
    "end": "672490"
  },
  {
    "text": "run things there is a little line of code that says go to this this documentation",
    "start": "672490",
    "end": "677680"
  },
  {
    "text": "website and it will tell you how to generate QR codes and I have done this in this template so when this eventually",
    "start": "677680",
    "end": "684400"
  },
  {
    "text": "wakes up yay I can go here we've made a",
    "start": "684400",
    "end": "691779"
  },
  {
    "text": "count mine's a little bit prettier I can then choose to configure an",
    "start": "691779",
    "end": "696970"
  },
  {
    "text": "Authenticator out with a QR code yay people have been wanting this for ages",
    "start": "696970",
    "end": "702760"
  },
  {
    "text": "and it's been sort of sitting there in asp.net core wom one it's just we never",
    "start": "702760",
    "end": "709330"
  },
  {
    "text": "wired it up because we hadn't tested it properly so you can get your",
    "start": "709330",
    "end": "715589"
  },
  {
    "text": "Authenticator apps and that should hopefully make everybody happy",
    "start": "715589",
    "end": "720510"
  },
  {
    "text": "many of you have been using doclet core 1.0 not enough of you I I dislike you",
    "start": "721890",
    "end": "731470"
  },
  {
    "text": "all immensely ok fair enough so if you are porting things from 100 to 200 how",
    "start": "731470",
    "end": "737920"
  },
  {
    "text": "many of you have tried this how many of you tried it with the release candidates yeah",
    "start": "737920",
    "end": "743920"
  },
  {
    "text": "how many of you that then tried your port from the release candidates to RTM - one of which is Dominic who writes",
    "start": "743920",
    "end": "751750"
  },
  {
    "text": "identity server so he does not count so it's a little bit painful it's even more",
    "start": "751750",
    "end": "758200"
  },
  {
    "text": "painful if you move to rc2 because we change things for our TM so I apologise to that other one person this was how",
    "start": "758200",
    "end": "764710"
  },
  {
    "text": "you configure things in 1.0 you had used cookie authentication and then this is",
    "start": "764710",
    "end": "770080"
  },
  {
    "start": "770000",
    "end": "834000"
  },
  {
    "text": "how we change things in 2.0 you have apt use authentication in your configure",
    "start": "770080",
    "end": "775480"
  },
  {
    "text": "method and then you add a fabrication in your services and then you chain off all the authentication handlers that you",
    "start": "775480",
    "end": "782140"
  },
  {
    "text": "want if you will note that our way of fixing you of stopping you messing up",
    "start": "782140",
    "end": "789970"
  },
  {
    "text": "having multiple handlers is now the options for authentication middleware or",
    "start": "789970",
    "end": "795520"
  },
  {
    "text": "handlers is set at the authentication level rather than the individual handler",
    "start": "795520",
    "end": "800860"
  },
  {
    "text": "level so there are a bunch of defaults if you're using one you can just use",
    "start": "800860",
    "end": "806320"
  },
  {
    "text": "default scheme you using multiple ones well you have a choice if you start using social off",
    "start": "806320",
    "end": "811860"
  },
  {
    "text": "which is what file are likes to do in all his demos we know make him do a little bit of extra work because you",
    "start": "811860",
    "end": "817020"
  },
  {
    "text": "have to configure the default authenticate handler which is the one that runs in every request and constructs an identity default signing",
    "start": "817020",
    "end": "822930"
  },
  {
    "text": "handler which is what gets called when someone calls sign in and default challenge which is what gets called when",
    "start": "822930",
    "end": "828180"
  },
  {
    "text": "someone hits challenge for example by encountering an endpoint that has an authorised attribute on it so if you",
    "start": "828180",
    "end": "836280"
  },
  {
    "start": "834000",
    "end": "859000"
  },
  {
    "text": "were using Twitter because it's Fowler's example and I like to be helpful you would set the Authenticator handler to",
    "start": "836280",
    "end": "843600"
  },
  {
    "text": "be cookies because you want to use cookies to persist your identity you have sign-in being cookies because you",
    "start": "843600",
    "end": "850170"
  },
  {
    "text": "want to have your identity persistent but challenge would go to Twitter because that's what you want to actually",
    "start": "850170",
    "end": "855570"
  },
  {
    "text": "perform the little login dance we moved where authenticate challenge",
    "start": "855570",
    "end": "862860"
  },
  {
    "start": "859000",
    "end": "891000"
  },
  {
    "text": "and sign in was from contacts authentication just up to context so you",
    "start": "862860",
    "end": "870240"
  },
  {
    "text": "need to search your code for context authentication and just remove authentication you will get warnings",
    "start": "870240",
    "end": "876660"
  },
  {
    "text": "about deprecation if you tried this in our c2 we have the warnings on some things and not in others because we suck",
    "start": "876660",
    "end": "883530"
  },
  {
    "text": "and we like to make life difficult for you but the warnings are now finally there in the RTM code so one of the",
    "start": "883530",
    "end": "893280"
  },
  {
    "start": "891000",
    "end": "969000"
  },
  {
    "text": "questions we get asked where the scenarios we get asked a lot is cookie if education with asp.net identity",
    "start": "893280",
    "end": "900060"
  },
  {
    "text": "asp.net identity is the bits and pieces that keep your username and password and",
    "start": "900060",
    "end": "905760"
  },
  {
    "text": "roles and claims in a local database but people don't necessarily want to use that because it's a bit of overhead and",
    "start": "905760",
    "end": "911610"
  },
  {
    "text": "my god it's really hard to understand sometimes so people want to use the",
    "start": "911610",
    "end": "918000"
  },
  {
    "text": "cookie middleware on their own because rolling your own encryption scheme for identity cookies is a really bad idea so",
    "start": "918000",
    "end": "926370"
  },
  {
    "text": "I'm gonna walk you through how we do this just because it is such a common scenario so everything is going to end",
    "start": "926370",
    "end": "934080"
  },
  {
    "text": "up in your cookie middle or your cookie Handler and we will encrypt and sign cookies for you when you call sign-in",
    "start": "934080",
    "end": "940660"
  },
  {
    "text": "and by default that uses our data protection layer which I'll talk about later but we have a keychain that you",
    "start": "940660",
    "end": "948279"
  },
  {
    "text": "need to synchronize between multiple servers if you are going to run with multiple servers which a lot of people",
    "start": "948279",
    "end": "954009"
  },
  {
    "text": "are you could just shove them in a database you can shove them in Redis you can shove them in a shared folder you can shove them an azure key vault you",
    "start": "954009",
    "end": "960220"
  },
  {
    "text": "can write your own it is incredibly easy and then the cookies will take the",
    "start": "960220",
    "end": "965769"
  },
  {
    "text": "identity on every request and rehydrate it so in order to do this you have to",
    "start": "965769",
    "end": "972939"
  },
  {
    "start": "969000",
    "end": "980000"
  },
  {
    "text": "sign in and sign night calling HTTP contacts that's sign in and HTTP contacts that's signing out you just",
    "start": "972939",
    "end": "978250"
  },
  {
    "text": "give it a principal and it will write the cookie it's magical but when you drop a cookie it's the sole source of",
    "start": "978250",
    "end": "985600"
  },
  {
    "start": "980000",
    "end": "1044000"
  },
  {
    "text": "truth we don't go back to your database we don't check things for you as long as that cookie exists we're gonna take the",
    "start": "985600",
    "end": "993459"
  },
  {
    "text": "identity from it until you implement a validator which asp.net identity does",
    "start": "993459",
    "end": "999579"
  },
  {
    "text": "for you so if you think about it you're probably gonna want to do this every time there's a request or every certain",
    "start": "999579",
    "end": "1005100"
  },
  {
    "text": "number of requests you want to check if a user is still valid if you haven't you know banned them for posting poop emojis",
    "start": "1005100",
    "end": "1012389"
  },
  {
    "text": "on your message board so you need to hook in a validator and a validator can either reject your principle or it can",
    "start": "1012389",
    "end": "1018029"
  },
  {
    "text": "actually update it which is handy if you are changing the roles or the claims",
    "start": "1018029",
    "end": "1023639"
  },
  {
    "text": "that are associated with the user you can even go further asp.net identity uses it to support sign",
    "start": "1023639",
    "end": "1031949"
  },
  {
    "text": "right everywhere so if you have someone who has logged in for multiple browsers or from a phone for multiple machines we",
    "start": "1031949",
    "end": "1038938"
  },
  {
    "text": "use the validator to sign out every single one at once and it runs on every",
    "start": "1038939",
    "end": "1046678"
  },
  {
    "start": "1044000",
    "end": "1224000"
  },
  {
    "text": "single request it's up to you to throttle it it's up to you to throttle it going back to your database which you",
    "start": "1046679",
    "end": "1051690"
  },
  {
    "text": "will want to do asp.net identity runs it about every 15 minutes you can customize",
    "start": "1051690",
    "end": "1057659"
  },
  {
    "text": "that in asp.net identity so this is what a validator looks like it's nice and",
    "start": "1057659",
    "end": "1062970"
  },
  {
    "text": "simple hey it's is ooh a static class which means there is no di you're gonna",
    "start": "1062970",
    "end": "1068850"
  },
  {
    "text": "have to manually do that yourself I'm afraid eventually it will turn into a service but we had so many",
    "start": "1068850",
    "end": "1074340"
  },
  {
    "text": "other things to do that we did not get rid of it so that's how you wire it up",
    "start": "1074340",
    "end": "1080580"
  },
  {
    "text": "and let's just go through our very exciting demo cookie off from scratch",
    "start": "1080580",
    "end": "1085799"
  },
  {
    "text": "here we go says startup so we have an",
    "start": "1085799",
    "end": "1090809"
  },
  {
    "text": "account controller that is going to log you in and this is pretty much the standard account controller I'm just",
    "start": "1090809",
    "end": "1096210"
  },
  {
    "text": "going to construct a principle here and then I call sign in async I give it a",
    "start": "1096210",
    "end": "1103529"
  },
  {
    "text": "scheme name which is just a string that is going to identify your handler so you",
    "start": "1103529",
    "end": "1109409"
  },
  {
    "text": "can have multiple instances of cookie handlers for example but you need to tell us which one you're going to sign",
    "start": "1109409",
    "end": "1114809"
  },
  {
    "text": "into you pass in the principal yeah tweak how the cookies gonna live",
    "start": "1114809",
    "end": "1120000"
  },
  {
    "text": "somewhat and then you do a redirect to local we're wiring it up and start up so",
    "start": "1120000",
    "end": "1127080"
  },
  {
    "text": "we have used authentication and configure and then in configure services we're going to add a sent ocation we're",
    "start": "1127080",
    "end": "1134190"
  },
  {
    "text": "gonna tell it that we want to use our cookie middle wire that we're about to add and we're just going to use the",
    "start": "1134190",
    "end": "1139380"
  },
  {
    "text": "default scheme and then we add our cookie underneath and you can see here that we are validating a or we are",
    "start": "1139380",
    "end": "1146309"
  },
  {
    "text": "wiring up a validator just to prove the validators work so I have a simple validator that if I hit refresh enough",
    "start": "1146309",
    "end": "1152130"
  },
  {
    "text": "times it will update my principal so it's just gonna pretend as if I was in a",
    "start": "1152130",
    "end": "1158610"
  },
  {
    "text": "group and I'm gonna update group so if I run this",
    "start": "1158610",
    "end": "1162559"
  },
  {
    "text": "it will eventually start I blame your",
    "start": "1169780",
    "end": "1175070"
  },
  {
    "text": "Australian internet so I have loved him once so I have a kind of once and then",
    "start": "1175070",
    "end": "1180260"
  },
  {
    "text": "if I hit refresh 1 2 3 I hit 5 the validator is going to kick",
    "start": "1180260",
    "end": "1187940"
  },
  {
    "text": "in and update me every 5 requests and you will see that number keeping going up and up and up so I could just lock",
    "start": "1187940",
    "end": "1196580"
  },
  {
    "text": "myself out I could have updated my name I could have changed the roles that I'm in or",
    "start": "1196580",
    "end": "1201800"
  },
  {
    "text": "the claims that are associated with Mike Mike claims principle so if you are",
    "start": "1201800",
    "end": "1206930"
  },
  {
    "text": "doing cookie middleware or middleware act it's not middle wearing wear its handlers if you're doing cookie authentication with our handlers by",
    "start": "1206930",
    "end": "1212780"
  },
  {
    "text": "default wire up a validator so you can keep the identity up to date with",
    "start": "1212780",
    "end": "1218720"
  },
  {
    "text": "whatever your back-end thinks is there",
    "start": "1218720",
    "end": "1222429"
  },
  {
    "start": "1224000",
    "end": "1267000"
  },
  {
    "text": "so like I said we can have multiple handlers so we could have cookie in one point we could have jot somewhere else",
    "start": "1225190",
    "end": "1231860"
  },
  {
    "text": "and you can tell the authorized attribute which handler you want to use by specifying the scheme name that",
    "start": "1231860",
    "end": "1239210"
  },
  {
    "text": "string that says this is the identity of a handler that you have wired up so what",
    "start": "1239210",
    "end": "1244610"
  },
  {
    "text": "used to happen was that people would wire up Joe and people would wire up cookies and then your API would accept",
    "start": "1244610",
    "end": "1250790"
  },
  {
    "text": "both where as I'm sure we all realize that API should not be accepting cookies anymore because there's a bunch of CSRF",
    "start": "1250790",
    "end": "1257240"
  },
  {
    "text": "vulnerabilities that you really don't want to deal with so you can limit the identity that is accepted by specifying",
    "start": "1257240",
    "end": "1265610"
  },
  {
    "text": "the scheme name so this was where I was going to demo my 2.1 stuff but I've been",
    "start": "1265610",
    "end": "1273020"
  },
  {
    "start": "1267000",
    "end": "1448000"
  },
  {
    "text": "talking to the dev when we spent the last three days trying to get the damn thing to work and it does not because it",
    "start": "1273020",
    "end": "1278300"
  },
  {
    "text": "requires asp.net core 2.1 and i've tried to install that and it destroyed my",
    "start": "1278300",
    "end": "1283340"
  },
  {
    "text": "machine and i had to pull it out again and then it just got very messy so i'm gonna have to talk about this in theory",
    "start": "1283340",
    "end": "1289220"
  },
  {
    "text": "i am sorry there are no demos we've the",
    "start": "1289220",
    "end": "1295460"
  },
  {
    "text": "the cookie auth flow has has been well it's been our opinion of how things should",
    "start": "1295460",
    "end": "1300940"
  },
  {
    "text": "happen but identity has a bunch of standards around it and one of these is open ID Connect so we have been thinking",
    "start": "1300940",
    "end": "1308620"
  },
  {
    "text": "and we will probably deliver a slim opinionated open ID Connect service in",
    "start": "1308620",
    "end": "1318040"
  },
  {
    "text": "asp.net identity so the flow will look slightly different the URLs that you will have will look like standard oh I D",
    "start": "1318040",
    "end": "1324820"
  },
  {
    "text": "see URLs and we'll be logging in with oh I DC before we use cookies to drop an",
    "start": "1324820",
    "end": "1329830"
  },
  {
    "text": "identity so this is kind of nice because it's decoupling your app code from your authentication code so it can just be",
    "start": "1329830",
    "end": "1335320"
  },
  {
    "text": "like hidden away in and you get packaged and it allows you to support external",
    "start": "1335320",
    "end": "1342130"
  },
  {
    "text": "clients first party clients third party clients you can write your own mobile",
    "start": "1342130",
    "end": "1347800"
  },
  {
    "text": "app and use the OID C pieces to log in and if you get to the point of being",
    "start": "1347800",
    "end": "1354130"
  },
  {
    "text": "sick of managing your own databases we hope to get to the point of having a button that will take your local creds",
    "start": "1354130",
    "end": "1361870"
  },
  {
    "text": "your local identity store and just shove it into Azure b2c so you never have to worry about it again if you don't like",
    "start": "1361870",
    "end": "1369070"
  },
  {
    "text": "as your b2c there are other options because it's using oh I DC so it's nice",
    "start": "1369070",
    "end": "1374530"
  },
  {
    "text": "and standard we're only going to support authorization and hybrid code flows and",
    "start": "1374530",
    "end": "1380500"
  },
  {
    "text": "implicit for spa applications so you're no longer using cookies for spas if you",
    "start": "1380500",
    "end": "1386350"
  },
  {
    "text": "want to use more than we give you and a lot of you will then Dominic is sitting",
    "start": "1386350",
    "end": "1391630"
  },
  {
    "text": "at the back row there with identity server and that's where I recommend you go he supports an awful lot more of the",
    "start": "1391630",
    "end": "1397510"
  },
  {
    "text": "OID C standard than we do like I say we are giving you a skinny opinionated one that only supports two or three common",
    "start": "1397510",
    "end": "1405880"
  },
  {
    "text": "scenarios identity server is the big man",
    "start": "1405880",
    "end": "1411790"
  },
  {
    "text": "Oh IDC server for dotnet so if you want more than we give you you can plug in",
    "start": "1411790",
    "end": "1417790"
  },
  {
    "text": "identity server and because we're going to use the OID C it is a matter of commenting out use asp.net identity",
    "start": "1417790",
    "end": "1424900"
  },
  {
    "text": "service or whatever we're going to call it and replace that call with you app don't use identity server and that's it",
    "start": "1424900",
    "end": "1431290"
  },
  {
    "text": "that's why we want to move to OID C so you can swap with one line if code and it worked in our situ and then",
    "start": "1431290",
    "end": "1438580"
  },
  {
    "text": "we yanked out because we didn't think it was ready and it doesn't work anymore so I can't demo it it was impressive when",
    "start": "1438580",
    "end": "1443740"
  },
  {
    "text": "it worked I promise you it looked really good in Oslo so you have your options of",
    "start": "1443740",
    "end": "1451779"
  },
  {
    "start": "1448000",
    "end": "1461000"
  },
  {
    "text": "identity server ASOS and open eye dict which are the the three dotnet third-party ones or you can use Azure",
    "start": "1451779",
    "end": "1459130"
  },
  {
    "text": "b2c authorization for those of you that",
    "start": "1459130",
    "end": "1465070"
  },
  {
    "start": "1461000",
    "end": "1605000"
  },
  {
    "text": "have not used asp.net core this is where we changed everything how many of you",
    "start": "1465070",
    "end": "1472029"
  },
  {
    "text": "have written your own custom authorized attribute ok keep your hands up now",
    "start": "1472029",
    "end": "1480340"
  },
  {
    "text": "drop your hands if you thought this was easy and didn't suck real I have three",
    "start": "1480340",
    "end": "1485440"
  },
  {
    "text": "people drop their hands Wow okay yeah okay we know this sucked and it sucked",
    "start": "1485440",
    "end": "1491049"
  },
  {
    "text": "hard so we decided to redo everything in",
    "start": "1491049",
    "end": "1496390"
  },
  {
    "text": "dotnet core which upsets some people case we can't make everyone happy all of",
    "start": "1496390",
    "end": "1501520"
  },
  {
    "text": "the time but most people have been happy with what we've done you do not need to write your own authorization attribute",
    "start": "1501520",
    "end": "1508390"
  },
  {
    "text": "anymore in fact if you do it won't do anything the authorization attribute in",
    "start": "1508390",
    "end": "1513789"
  },
  {
    "text": "dotnet core is just a marker and what we've been trying to do is we be trying",
    "start": "1513789",
    "end": "1519100"
  },
  {
    "text": "to remove hard code rules are hard-coded rules of attributes things like user",
    "start": "1519100",
    "end": "1525190"
  },
  {
    "text": "names claims groups whatever else we have moved all authorization into code",
    "start": "1525190",
    "end": "1530760"
  },
  {
    "text": "everything is based in a policy and requirements and requirements handlers",
    "start": "1530760",
    "end": "1536440"
  },
  {
    "text": "so your policy says the current user has to fulfill one or more requirements and then each requirement may have one more",
    "start": "1536440",
    "end": "1543309"
  },
  {
    "text": "handlers that will tell the policy the current user has fulfilled those requirements and we've also added",
    "start": "1543309",
    "end": "1550210"
  },
  {
    "text": "resource based authorization because Dominic had been on RS for absolutely ages to do it and it fell nicely into",
    "start": "1550210",
    "end": "1557020"
  },
  {
    "text": "this it's all putting di like most of asp.net core is these days and you still",
    "start": "1557020",
    "end": "1562120"
  },
  {
    "text": "have your scheme filtering and you can even replace the entire thing if you don't like our implementation",
    "start": "1562120",
    "end": "1568390"
  },
  {
    "text": "and have your own policy provider there is a workshop which is their the the 2.0",
    "start": "1568390",
    "end": "1577690"
  },
  {
    "text": "stuff was for 2.0 RC 2 and I have not gotten around to updating it because all the internet sucks and I can't even sync",
    "start": "1577690",
    "end": "1586090"
  },
  {
    "text": "my repo I've been trying for three days it's just not a pleasant experience so when I get back next week it will be",
    "start": "1586090",
    "end": "1592870"
  },
  {
    "text": "updated for 2.0 RT M if you are one of the two people that logged a bunch of",
    "start": "1592870",
    "end": "1597910"
  },
  {
    "text": "issues this week saying it was broken if you are in the room I'm sorry I will get around to it when I get back and I have",
    "start": "1597910",
    "end": "1603820"
  },
  {
    "text": "internet again so let's talk about what requirements are if you have ever been",
    "start": "1603820",
    "end": "1611590"
  },
  {
    "start": "1605000",
    "end": "1757000"
  },
  {
    "text": "to Microsoft in Redmond and I assume it is exactly the same for the various offices here you will see people using",
    "start": "1611590",
    "end": "1617410"
  },
  {
    "text": "their badges to scan into a door so having a badge is a requirement for",
    "start": "1617410",
    "end": "1624190"
  },
  {
    "text": "opening a door at Microsoft so we can express this as G an office entry",
    "start": "1624190",
    "end": "1630490"
  },
  {
    "text": "requirement and all it does is you implement I authorize a shin requirement which has nothing on it it's a marker",
    "start": "1630490",
    "end": "1637600"
  },
  {
    "text": "interface and then we have our requirements so we have to figure out a",
    "start": "1637600",
    "end": "1643690"
  },
  {
    "text": "way to handle them a way to process them so we have one or more authorization",
    "start": "1643690",
    "end": "1649210"
  },
  {
    "text": "handlers against each of our requirements so here this does actually",
    "start": "1649210",
    "end": "1654370"
  },
  {
    "text": "have something on the interface handle requirement async I'm gonna look at the user I'm gonna make sure that he has a",
    "start": "1654370",
    "end": "1660610"
  },
  {
    "text": "valid badge number I'm gonna make sure that it's issued by me and if it is everything's good if it isn't I'm just",
    "start": "1660610",
    "end": "1669220"
  },
  {
    "text": "gonna return so you call contact succeed of the requirement if everything is good everything is bad you do absolutely",
    "start": "1669220",
    "end": "1675730"
  },
  {
    "text": "nothing at all because you may have multiple handlers so the normal way of",
    "start": "1675730",
    "end": "1681400"
  },
  {
    "text": "handling entry is to tap your badge but if you are like me about once a month you forget your badge because you're in",
    "start": "1681400",
    "end": "1687130"
  },
  {
    "text": "a rush and you have to get this little sticky badge of shame that gets printed out from a thermal printer and you can't",
    "start": "1687130",
    "end": "1693520"
  },
  {
    "text": "see the picture and their reception has to open the door for you so that is another way of fulfilling our",
    "start": "1693520",
    "end": "1698770"
  },
  {
    "text": "requirement I have a temporary badge that hasn't expired and there's a action is there to press the button so",
    "start": "1698770",
    "end": "1703990"
  },
  {
    "text": "we have one requirement but two ways to fulfill it which are two different handlers and the reason I recommend two",
    "start": "1703990",
    "end": "1710350"
  },
  {
    "text": "different handlers rather than just having one great big handler that checks absolutely everything and branching is well that stuff's hard to maintain but",
    "start": "1710350",
    "end": "1717610"
  },
  {
    "text": "you can reuse handlers over multiple requirements so you could have for an example if you were rewriting SharePoint",
    "start": "1717610",
    "end": "1724750"
  },
  {
    "text": "and someone really ought to you can have do I have permissions to put a document",
    "start": "1724750",
    "end": "1731530"
  },
  {
    "text": "in this library normal user would have permissions and you would check just by looking at what the user is but if",
    "start": "1731530",
    "end": "1737410"
  },
  {
    "text": "you're an admin you may have rights everywhere so you could have an is admin handler for every for everything and it",
    "start": "1737410",
    "end": "1746050"
  },
  {
    "text": "would run across all your requirements so rather than doing things in a branch and duplicating all that code you just",
    "start": "1746050",
    "end": "1753040"
  },
  {
    "text": "keep things in little individual requirements and apply them using policy and away we go and then how we express this it's when",
    "start": "1753040",
    "end": "1761170"
  },
  {
    "start": "1757000",
    "end": "1806000"
  },
  {
    "text": "we're adding authorization we add a policy and we're gonna call this policy building entry and then we build up all",
    "start": "1761170",
    "end": "1766840"
  },
  {
    "text": "our requirements and then the one thing that I always forget to do when I am writing demos and I'm sitting there on",
    "start": "1766840",
    "end": "1772510"
  },
  {
    "text": "stage going why doesn't this work is you need to register the handler for the requirement in the DI system because I'm",
    "start": "1772510",
    "end": "1780610"
  },
  {
    "text": "lazy and because badge Hamner has no state I can add it as a singleton but you can add it using the various scopes",
    "start": "1780610",
    "end": "1787120"
  },
  {
    "text": "if you want to do things like inject your database into your handler that's absolutely fine just never do it as a",
    "start": "1787120",
    "end": "1792790"
  },
  {
    "text": "single thing because that will be a nightmare and then you specify the",
    "start": "1792790",
    "end": "1799420"
  },
  {
    "text": "policy on the authorize attribute by giving by specifying this name and away we go",
    "start": "1799420",
    "end": "1806070"
  },
  {
    "start": "1806000",
    "end": "2017000"
  },
  {
    "text": "this makes more sense with a demo like most things so this is that this is the",
    "start": "1806070",
    "end": "1812950"
  },
  {
    "text": "actual really technical demo that we have the the soul one so I'm gonna say",
    "start": "1812950",
    "end": "1819610"
  },
  {
    "text": "this is a startup project and I'm gonna run it and I'll see what it looks like in a big screen you will see how",
    "start": "1819610",
    "end": "1825280"
  },
  {
    "text": "beautiful my UI skills are so I have",
    "start": "1825280",
    "end": "1832390"
  },
  {
    "text": "noticed whilst I have been walking about that you guys think this is old despite it being 20 degrees I was",
    "start": "1832390",
    "end": "1839030"
  },
  {
    "text": "wandering around in shorts this morning at 6 a.m. and everything woman was looking at me like I was mad so here we",
    "start": "1839030",
    "end": "1845330"
  },
  {
    "text": "have my emulation of Australian weather",
    "start": "1845330",
    "end": "1850340"
  },
  {
    "text": "and travel as you can see it is winter I'm using a snowmen because all Zee",
    "start": "1850340",
    "end": "1858440"
  },
  {
    "text": "winter would probably just be a beach so will will make this perfectly clear and we have two options we can go outside",
    "start": "1858440",
    "end": "1864800"
  },
  {
    "text": "and we can go inside and we're going to evaluate whether someone is allowed to",
    "start": "1864800",
    "end": "1869840"
  },
  {
    "text": "do that based upon who they are so if I go outside it's going to ask me to log",
    "start": "1869840",
    "end": "1877490"
  },
  {
    "text": "in so I picked famous people we have Daniel Radcliffe because he's British",
    "start": "1877490",
    "end": "1883720"
  },
  {
    "text": "we have Rupert Grint because he's ginger and we'll come on to that in a minute",
    "start": "1883720",
    "end": "1888740"
  },
  {
    "text": "and then we have Steve Irwin I'm not gonna say anything bad about Steve Irwin",
    "start": "1888740",
    "end": "1893860"
  },
  {
    "text": "so we'll go back and we will remind you that I am I am in Australia and it is",
    "start": "1893860",
    "end": "1900260"
  },
  {
    "text": "winter and I want to go outside so I can go outside because I am Daniel Radcliffe",
    "start": "1900260",
    "end": "1908510"
  },
  {
    "text": "and it's okay if you're British going outside in Australia winter because it's",
    "start": "1908510",
    "end": "1913670"
  },
  {
    "text": "not cold what is wrong with you people okay and of course I can go inside because",
    "start": "1913670",
    "end": "1921170"
  },
  {
    "text": "there's no problems with going inside just a quick reminder to check for spiders in the dunny but because it",
    "start": "1921170",
    "end": "1927470"
  },
  {
    "text": "doesn't eat just makes me laugh isn't work so I'm gonna sign now I am no longer Daniel Radcliffe it is winter I",
    "start": "1927470",
    "end": "1933020"
  },
  {
    "text": "am going to go outside I'm gonna be Steve Irwin oh my god no it's too cold",
    "start": "1933020",
    "end": "1938900"
  },
  {
    "text": "you can't go outside because it's only 20 degrees now if I go back and change",
    "start": "1938900",
    "end": "1948710"
  },
  {
    "text": "it so it's summer Steve Irwin can go",
    "start": "1948710",
    "end": "1955940"
  },
  {
    "text": "outside because apparently it's an acceptable temperature and he won't freeze if I say night I try and go",
    "start": "1955940",
    "end": "1964010"
  },
  {
    "text": "outside again in summer but I'm Daniel Radcliffe no it's to time war",
    "start": "1964010",
    "end": "1969539"
  },
  {
    "text": "40 degrees is not an acceptable temperature what are you thinking living here okay so we are adjusting our policy",
    "start": "1969539",
    "end": "1977820"
  },
  {
    "text": "is evaluating who someone is what their nationality is and what the current weather is and just to be mean to",
    "start": "1977820",
    "end": "1984779"
  },
  {
    "text": "gingers because that's who I am Rupert Grint obviously can't go outside",
    "start": "1984779",
    "end": "1991139"
  },
  {
    "text": "in somewhere in Australia because he's ginger and he will spontaneously combust",
    "start": "1991139",
    "end": "1996409"
  },
  {
    "text": "if I go back and change the weather to winter it's 20 degrees he still can't go",
    "start": "1996409",
    "end": "2006320"
  },
  {
    "text": "outside because it's too darn sunny and he walks spontaneously combust so for Rupert Grint it doesn't make any",
    "start": "2006320",
    "end": "2011720"
  },
  {
    "text": "difference you cannot go outside in Australia so we're gonna look at the code now I can't do these sorts of demos",
    "start": "2011720",
    "end": "2020869"
  },
  {
    "start": "2017000",
    "end": "2410000"
  },
  {
    "text": "in in America because they just don't understand the ginger thing they think",
    "start": "2020869",
    "end": "2026720"
  },
  {
    "text": "gingers are real people I should look around to see if there are ginger people",
    "start": "2026720",
    "end": "2032989"
  },
  {
    "text": "in the audience that would probably would have been a really clever thing today all right I'm not looking up",
    "start": "2032989",
    "end": "2039559"
  },
  {
    "text": "because there probably is one than they're glaring at me right now when they're trying to steal my soul so is",
    "start": "2039559",
    "end": "2046759"
  },
  {
    "text": "there anyone ginger in the audience still wants to read yeah you saw our ginger and bald so you're fine so I have",
    "start": "2046759",
    "end": "2056658"
  },
  {
    "text": "a weather provider at the equivalent of some sort of database and so I am injecting that into my di container and",
    "start": "2056659",
    "end": "2063290"
  },
  {
    "text": "we will be using that in our policies I am setting up a policy of inside and",
    "start": "2063290",
    "end": "2069368"
  },
  {
    "text": "setting up a policy of each site so what I have done with my requirement is I am",
    "start": "2069369",
    "end": "2075108"
  },
  {
    "text": "making it a parameterised requirement remember requirements have no code but I can stick properties all them all I like",
    "start": "2075109",
    "end": "2080628"
  },
  {
    "text": "so I'm going to use the same requirement I'm gonna have a location so I can just branch based upon it and then we have a",
    "start": "2080629",
    "end": "2088220"
  },
  {
    "text": "handler and it's going to take our weather provider in so I know what the",
    "start": "2088220",
    "end": "2094368"
  },
  {
    "text": "current weather is and then I'm going to look for the nationality of a user",
    "start": "2094369",
    "end": "2099400"
  },
  {
    "text": "because I'm recycling their demo from Europe and I did stuff with past or control and Briggs it and then just",
    "start": "2099400",
    "end": "2105710"
  },
  {
    "text": "made myself very very sad because I changed it to before and after breaks it and to reason me I got rejected from",
    "start": "2105710",
    "end": "2110810"
  },
  {
    "text": "Europe just like she should have been rejected in the polls however I can",
    "start": "2110810",
    "end": "2116750"
  },
  {
    "text": "laugh at that but I mean I stuck with Donald Trump as a president and that's just even worse I got I got stopped by",
    "start": "2116750",
    "end": "2123520"
  },
  {
    "text": "one of the charity muggers yesterday when I was walking around in my shorts and he was like how much do you like",
    "start": "2123520",
    "end": "2128930"
  },
  {
    "text": "nature and I'm like I don't even live here and he goes how much do you hate Donald Trump Wow my accent has changed",
    "start": "2128930",
    "end": "2134180"
  },
  {
    "text": "so I signed American to Australian so that's really depressing so I'm gonna get the country is someone's identity",
    "start": "2134180",
    "end": "2140230"
  },
  {
    "text": "which I've shoved in via the account controller and I'll log someone in we're putting their name in we're giving them",
    "start": "2140230",
    "end": "2146660"
  },
  {
    "text": "a hair color so we can you detect Rupert Grint we're giving them a country so if",
    "start": "2146660",
    "end": "2151880"
  },
  {
    "text": "it's outside and the season this summer that's come from RDI and you're British",
    "start": "2151880",
    "end": "2157750"
  },
  {
    "text": "it's Phi or it's it's not good so I'm not gonna do anything but if it is good",
    "start": "2157750",
    "end": "2164270"
  },
  {
    "text": "if I'm Australian and it's not winter or if I'm British and it's not summer I'm going to succeed my requirement and if",
    "start": "2164270",
    "end": "2171470"
  },
  {
    "text": "I'm going inside I'm always gonna succeed in my requirement now I could expand this I so you know Australian",
    "start": "2171470",
    "end": "2178340"
  },
  {
    "text": "people could go outside in winter if you're all wearing five layers and hats and scarves and at 20 degrees there are",
    "start": "2178340",
    "end": "2185960"
  },
  {
    "text": "fire pits lit and fire lamps and the outside of the pub as I saw in Melbourne at the weekend and laughed very hard at",
    "start": "2185960",
    "end": "2193720"
  },
  {
    "text": "so does this make sense as a requirement and how to fulfill it this is the sort",
    "start": "2193720",
    "end": "2199760"
  },
  {
    "text": "of thing that you would have had to shove behind your custom attribute before which was incredibly hard to test",
    "start": "2199760",
    "end": "2207070"
  },
  {
    "text": "policies and requirements are incredibly easy to unit test this does not help",
    "start": "2207070",
    "end": "2212570"
  },
  {
    "text": "Rupert Grint however so I've got another requirement I have or I've got another",
    "start": "2212570",
    "end": "2219500"
  },
  {
    "text": "requirements hand rest I've got a single requirement but I have two handlers and this handler is especially for gingers",
    "start": "2219500",
    "end": "2226630"
  },
  {
    "text": "and it's gonna check that I have a hair",
    "start": "2226630",
    "end": "2231680"
  },
  {
    "text": "claim that has come from the passport control and if you are ginger",
    "start": "2231680",
    "end": "2237320"
  },
  {
    "text": "and you are trying to go outside and I don't care what season it is I am going to fail I haven't covered failure yet so",
    "start": "2237320",
    "end": "2245390"
  },
  {
    "text": "there are three things that you can do in a handler you can succeed this",
    "start": "2245390",
    "end": "2250430"
  },
  {
    "text": "current user fulfills all the requirements you can do nothing that says they haven't fulfilled this",
    "start": "2250430",
    "end": "2256520"
  },
  {
    "text": "requirement but another handler may kicked in and you may fail and fail is there for those scenarios where even if",
    "start": "2256520",
    "end": "2262850"
  },
  {
    "text": "other handlers have succeeded fail overrides everything it's the sort of",
    "start": "2262850",
    "end": "2268490"
  },
  {
    "text": "thing where you use where your database is on fire or someone has been sacked but the the system's have not updated",
    "start": "2268490",
    "end": "2276320"
  },
  {
    "text": "yet and you have a specific check for sacking or they're ginger and they're going to spontaneously combust because",
    "start": "2276320",
    "end": "2281870"
  },
  {
    "text": "they're in Australia so we have two handlers for a single requirement and in",
    "start": "2281870",
    "end": "2288800"
  },
  {
    "text": "start-up the CS I remember to put these handlers into DI because I'm not doing",
    "start": "2288800",
    "end": "2296060"
  },
  {
    "text": "this life because this is where I always forget and because they're taking requirements that are pretending to be a",
    "start": "2296060",
    "end": "2302000"
  },
  {
    "text": "database I'm going to add them as transient and then all my location",
    "start": "2302000",
    "end": "2307730"
  },
  {
    "text": "inside is going to in the code say that",
    "start": "2307730",
    "end": "2314420"
  },
  {
    "text": "I am authorized I'm going to use my policy for inside and if outside is got",
    "start": "2314420",
    "end": "2319670"
  },
  {
    "text": "to use my outside policy what I would recommend is that you never use strings you end up having a static class that",
    "start": "2319670",
    "end": "2328280"
  },
  {
    "text": "then where's my static class let's go find it go to definition yeah so you",
    "start": "2328280",
    "end": "2334460"
  },
  {
    "text": "just have a static class that then exposes your policy names as constants so you can change them at whim so does",
    "start": "2334460",
    "end": "2342470"
  },
  {
    "text": "that make sense is that easier than writing a custom authorized attribute",
    "start": "2342470",
    "end": "2349900"
  },
  {
    "text": "there's no one going to admit to that cleaner by default yes it's a little bit",
    "start": "2349900",
    "end": "2356309"
  },
  {
    "text": "less flexible the complaints that we have heard a complaints is a strong word",
    "start": "2356309",
    "end": "2362130"
  },
  {
    "text": "the feedback that we have gotten is that people who have written custom attributes generally have put custom",
    "start": "2362130",
    "end": "2367440"
  },
  {
    "text": "properties on them and we don't really have support for that properties are",
    "start": "2367440",
    "end": "2373410"
  },
  {
    "text": "part of your requirement so we're going to revisit this in 2.1 and see if we",
    "start": "2373410",
    "end": "2378539"
  },
  {
    "text": "have a nicer way of giving you the ability to write custom attributes that",
    "start": "2378539",
    "end": "2385200"
  },
  {
    "text": "still don't have code but you can put your own strongly typed properties on there so you can start building rules up",
    "start": "2385200",
    "end": "2391410"
  },
  {
    "text": "or requirements within your custom attribute there is an issue on the",
    "start": "2391410",
    "end": "2396930"
  },
  {
    "text": "security repo about this if you have strong feelings about it I would advise that you go check that out and leave us",
    "start": "2396930",
    "end": "2403890"
  },
  {
    "text": "your comments but no complaining about the fact that I'm just picking on gingers so here's a quick summary of",
    "start": "2403890",
    "end": "2414390"
  },
  {
    "start": "2410000",
    "end": "2420000"
  },
  {
    "text": "where we we're with policies requirements and handlers there's no point in me going through that again and",
    "start": "2414390",
    "end": "2421920"
  },
  {
    "start": "2420000",
    "end": "2431000"
  },
  {
    "text": "here is what the handler should return generally you just want to call succeed or do nothing at all because of multiple",
    "start": "2421920",
    "end": "2429150"
  },
  {
    "text": "handlers for a requirement and because it's a service you can check all of this",
    "start": "2429150",
    "end": "2435119"
  },
  {
    "start": "2431000",
    "end": "2469000"
  },
  {
    "text": "in code you could in your controller or your race or page because everything is",
    "start": "2435119",
    "end": "2441420"
  },
  {
    "text": "cool and trendy with razor pages if you listen to Damian yesterday or the day before you can inject the authorization",
    "start": "2441420",
    "end": "2448500"
  },
  {
    "text": "service into your code and then you can call authorize async and you don't have to duplicate that stuff that you had in",
    "start": "2448500",
    "end": "2454740"
  },
  {
    "text": "your custom attribute somewhere else if you failed you can return forbidden result if you",
    "start": "2454740",
    "end": "2461190"
  },
  {
    "text": "want to tell someone that they're not allowed to get in or you can return challenge result and it will flow through the log a flow again and then",
    "start": "2461190",
    "end": "2467430"
  },
  {
    "text": "hopefully they can login with with an identity that has access just remember",
    "start": "2467430",
    "end": "2474180"
  },
  {
    "text": "to register your handlers and one thing I will say is I've seen people write a bunch of stuff and they're like oh well",
    "start": "2474180",
    "end": "2480809"
  },
  {
    "text": "no one's ever gonna send me an identity from someone else really okay",
    "start": "2480809",
    "end": "2486780"
  },
  {
    "text": "especially with Eli DC it's great you should be everything should really be claims-based now rather than doing",
    "start": "2486780",
    "end": "2492930"
  },
  {
    "text": "something like checking rolls or checking someone's username so when you're checking clams check the issuer",
    "start": "2492930",
    "end": "2498119"
  },
  {
    "text": "for the clam to make sure it has come from where you expect and then we have",
    "start": "2498119",
    "end": "2504480"
  },
  {
    "start": "2502000",
    "end": "2697000"
  },
  {
    "text": "resource based authorization which is just a little step further taking the SharePoint example there's a",
    "start": "2504480",
    "end": "2511829"
  },
  {
    "text": "document in a library and you want to check permissions whether a user is able to edit that document or delete it",
    "start": "2511829",
    "end": "2518460"
  },
  {
    "text": "that's not just a requirement on can you access the library but it depends on the",
    "start": "2518460",
    "end": "2524400"
  },
  {
    "text": "resource that someone is trying to access so we have the same thing again",
    "start": "2524400",
    "end": "2530460"
  },
  {
    "text": "with policies and requirements and di and on our little system that you can",
    "start": "2530460",
    "end": "2536640"
  },
  {
    "text": "pass a resource through to the authorization service and you can pass an operation through or a requirement",
    "start": "2536640",
    "end": "2544440"
  },
  {
    "text": "through that says this person is trying to do X on resource Y and then you can",
    "start": "2544440",
    "end": "2550050"
  },
  {
    "text": "pick apart the properties from resource Y and in our SharePoint example you'd look at the document author property and",
    "start": "2550050",
    "end": "2557430"
  },
  {
    "text": "see whether the document author is equal to the current user or not and let them do it all you'd have another handle that",
    "start": "2557430",
    "end": "2564150"
  },
  {
    "text": "says are they admin will then they can do what they want so you just extend this out instead of",
    "start": "2564150",
    "end": "2571619"
  },
  {
    "text": "having an authorization Handler that takes in a requirement you know take in the requirement and the resource that you want to check it's just an extra",
    "start": "2571619",
    "end": "2579869"
  },
  {
    "text": "parameter so if you've already gotten into writing policies you should be able to write resource authorization handlers",
    "start": "2579869",
    "end": "2586190"
  },
  {
    "text": "if you want to authorize absolutely everywhere that's how you do it you just build a policy and you register it as a",
    "start": "2586190",
    "end": "2594390"
  },
  {
    "text": "filter because at the end of the day policies and attributes end up as filters and you can limit by scheme in",
    "start": "2594390",
    "end": "2601589"
  },
  {
    "text": "policy so if you're having API rather than putting the scheme name in the",
    "start": "2601589",
    "end": "2607260"
  },
  {
    "text": "attribute because everyone will forget you can actually enforce it in a policy itself and because we have things as a",
    "start": "2607260",
    "end": "2615480"
  },
  {
    "text": "service you can actually inject them into razor or if you're putting this doesn't really",
    "start": "2615480",
    "end": "2621959"
  },
  {
    "text": "apply to razor pages you would just inject them into your page and brunch",
    "start": "2621959",
    "end": "2627239"
  },
  {
    "text": "based upon it so if you are a horrible person because people get really upset when I say you can do this you can in",
    "start": "2627239",
    "end": "2634410"
  },
  {
    "text": "your razor page inject the authorization service call authorize async and then",
    "start": "2634410",
    "end": "2639779"
  },
  {
    "text": "vary your UI based upon that some people don't think that's clean they would",
    "start": "2639779",
    "end": "2645029"
  },
  {
    "text": "rather put what's going to be shown or not shown in the UI in the view model but if you're lazy or you're writing",
    "start": "2645029",
    "end": "2652170"
  },
  {
    "text": "demos for presentations you can inject the authorization service into your view the only thing that I would remind you",
    "start": "2652170",
    "end": "2658680"
  },
  {
    "text": "to do because our interns do it every single year is it's all very well hiding",
    "start": "2658680",
    "end": "2664109"
  },
  {
    "text": "things in the UI but even in your controller just do the checks again so",
    "start": "2664109",
    "end": "2669719"
  },
  {
    "text": "for example we give our interns every summer a blog system to write it's like",
    "start": "2669719",
    "end": "2675479"
  },
  {
    "text": "here you go you know what a blog system is why don't you go away and write one and make sure that you have authorization and authentication and so",
    "start": "2675479",
    "end": "2681779"
  },
  {
    "text": "they will end up adjusting the view so if you're not logged in you don't see you edit and then I go okay what happens",
    "start": "2681779",
    "end": "2688049"
  },
  {
    "text": "if I type edit in the URL and they're like oh because they haven't duplicated the check in the controller so just",
    "start": "2688049",
    "end": "2694829"
  },
  {
    "text": "remember that hiding things in the UI is not enough and if you hid all of that",
    "start": "2694829",
    "end": "2699949"
  },
  {
    "start": "2697000",
    "end": "2727000"
  },
  {
    "text": "you can replace it because everything's a service so you can write your own policy resolver you can write your own",
    "start": "2699949",
    "end": "2705930"
  },
  {
    "text": "policy provider and you for now until we fix this custom parameter problem you",
    "start": "2705930",
    "end": "2711690"
  },
  {
    "text": "could do parameters this is sort of like stringify the the policy name it's incredibly ugly but you could just",
    "start": "2711690",
    "end": "2717719"
  },
  {
    "text": "separate stuff with dashes and split it up and get parameters that way data",
    "start": "2717719",
    "end": "2724140"
  },
  {
    "text": "protection how many of you had to synchronize your",
    "start": "2724140",
    "end": "2730830"
  },
  {
    "start": "2727000",
    "end": "3089000"
  },
  {
    "text": "machine key across multiple machines to make everything work for those of you",
    "start": "2730830",
    "end": "2736590"
  },
  {
    "text": "that have done that how many of you have then changed your machine key after deployment not a single hand goes up how",
    "start": "2736590",
    "end": "2746760"
  },
  {
    "text": "many of you tried it and then yeah okay and it was bad wasn't it it was like I",
    "start": "2746760",
    "end": "2752730"
  },
  {
    "text": "have to deploy this exactly the same time to every single machine or everything falls apart I am sorry machine key was a bad idea so",
    "start": "2752730",
    "end": "2762960"
  },
  {
    "text": "it's not there anymore well you have replaced machine key with data protection which is a little bit more",
    "start": "2762960",
    "end": "2769650"
  },
  {
    "text": "complicated but does allow you to change keys without having to synchrony with out having to republish to every single",
    "start": "2769650",
    "end": "2775260"
  },
  {
    "text": "machine data protection is aimed at ephemeral data it's stuff that you can",
    "start": "2775260",
    "end": "2780870"
  },
  {
    "text": "throw away you don't particularly care we use it for our authentication cookies we use it for a bunch of tight providers",
    "start": "2780870",
    "end": "2788820"
  },
  {
    "text": "that go into rezard the temp data provider and stuff like that stuff that you can recreate now people have been",
    "start": "2788820",
    "end": "2795750"
  },
  {
    "text": "using machine key to protect data of their own so despite all of us saying no",
    "start": "2795750",
    "end": "2801750"
  },
  {
    "text": "this is only for ephemeral data we know that you're going to use it for non ephemeral data because no one ever wants",
    "start": "2801750",
    "end": "2807930"
  },
  {
    "text": "to write their own crypto code so it'll work you just have to be very careful",
    "start": "2807930",
    "end": "2813390"
  },
  {
    "text": "about where your keys are stored and that you don't lose them so we have taken away the ability shoot yourself in",
    "start": "2813390",
    "end": "2819840"
  },
  {
    "text": "the foot machine key was incredibly bad at that you could encrypt things but not sign them if you were at my presentation",
    "start": "2819840",
    "end": "2826080"
  },
  {
    "text": "two days ago you won't know why that is a bad idea it will provide isolation automatically",
    "start": "2826080",
    "end": "2831840"
  },
  {
    "text": "it will provide isolation on purposes automatically and it will try and figure out where your key should be stored based on your platform and you can even",
    "start": "2831840",
    "end": "2840120"
  },
  {
    "text": "write your own custom algorithms that are going to be used for encryption this",
    "start": "2840120",
    "end": "2845670"
  },
  {
    "text": "is not for you this is for Russians because no seriously Russia says that",
    "start": "2845670",
    "end": "2851370"
  },
  {
    "text": "you must use our Russian encryption algorithm if you are storing data in Russia China has been mulling over the",
    "start": "2851370",
    "end": "2858210"
  },
  {
    "text": "same thing I've seen how your government talks about the internet so at some point you",
    "start": "2858210",
    "end": "2865450"
  },
  {
    "text": "may end up doing this yourself as well because apparently the laws of mathematics do not count when it comes",
    "start": "2865450",
    "end": "2871059"
  },
  {
    "text": "to encryption and storing data and the Australian government would like you to break the laws of mathematics so they",
    "start": "2871059",
    "end": "2876250"
  },
  {
    "text": "can spy on people's IMS in facebook but you can do it just don't so when I say",
    "start": "2876250",
    "end": "2884770"
  },
  {
    "text": "that we are going to make all your choices for you security people tend to get very upset these are the minimum ones we don't allow you to go any lower",
    "start": "2884770",
    "end": "2891220"
  },
  {
    "text": "than this and you can send this to your security people and go here they are using good defaults so what we have is a",
    "start": "2891220",
    "end": "2899319"
  },
  {
    "text": "keyring and each keyring has a single master key in it to start off with in every 90 days a new master key will be",
    "start": "2899319",
    "end": "2906460"
  },
  {
    "text": "inserted into the keyring and everything will roll over slowly by default so we",
    "start": "2906460",
    "end": "2912250"
  },
  {
    "text": "create a new master key probably about three or four days before the 90-day period is up to make sure that it syncs",
    "start": "2912250",
    "end": "2917260"
  },
  {
    "text": "and then everybody sort of flips over around the 90 day period because the data that we encrypt has a key",
    "start": "2917260",
    "end": "2923740"
  },
  {
    "text": "identifier at the start and says I'm gonna use this key and then when system number one starts using the new key",
    "start": "2923740",
    "end": "2929440"
  },
  {
    "text": "system number two no it's using the new key so we can go and check for it we derive keys based on purpose in every",
    "start": "2929440",
    "end": "2936789"
  },
  {
    "text": "single payload so if you encrypt the same data with data protection twice the",
    "start": "2936789",
    "end": "2942640"
  },
  {
    "text": "result will not be the same because that stops people trying to figure out parts",
    "start": "2942640",
    "end": "2948099"
  },
  {
    "text": "of what your debt is so we're gonna use AES g56 CBC and H H Mac sha-256 we give",
    "start": "2948099",
    "end": "2956230"
  },
  {
    "text": "you some key stores if you're running an azure Web Apps it's all done magically for you the key store will flow between",
    "start": "2956230",
    "end": "2963369"
  },
  {
    "text": "all your instances until you use slots because as your key vault have not given",
    "start": "2963369",
    "end": "2970059"
  },
  {
    "text": "us storage between slots and lots of people use slots to swap stuff over and",
    "start": "2970059",
    "end": "2976000"
  },
  {
    "text": "then we're back into the same problem we have with machine key where everything is out of sync so if you use slots this is not what you want to do if you are",
    "start": "2976000",
    "end": "2982960"
  },
  {
    "text": "running a and we'll come on to what you do want to do in a minute she usually is with no user profile which I think's in",
    "start": "2982960",
    "end": "2988150"
  },
  {
    "text": "the registry for using is with a profile which is what you're doing in Visual Studio we store in app date",
    "start": "2988150",
    "end": "2993730"
  },
  {
    "text": "and then on Linux because Linux has no good security story by default we store",
    "start": "2993730",
    "end": "2999160"
  },
  {
    "text": "the keys in memory and throw them away afterwards which is why we say this is targeted at ephemeral data if you want",
    "start": "2999160",
    "end": "3005850"
  },
  {
    "text": "to use it on your own data you need to make some changes to the defaults we will protect your keys as well if you're",
    "start": "3005850",
    "end": "3012450"
  },
  {
    "text": "on Windows we use DP API if you're on Windows in an active directory will use DP API and G which just means that",
    "start": "3012450",
    "end": "3018270"
  },
  {
    "text": "everything flows nicely you can use next 509 certificate or you can just not protect it at all which is probably not",
    "start": "3018270",
    "end": "3024270"
  },
  {
    "text": "a good idea for your encryption keys you can do it manually",
    "start": "3024270",
    "end": "3029550"
  },
  {
    "text": "lots of people do you create an ID a protection provider you create a data",
    "start": "3029550",
    "end": "3034920"
  },
  {
    "text": "protector with a purpose from it and then you call protect and um protect with your data and that's it so here is",
    "start": "3034920",
    "end": "3042300"
  },
  {
    "text": "how you would do it we are using the ephemeral data protector just to remind you that things get thrown away",
    "start": "3042300",
    "end": "3048680"
  },
  {
    "text": "we have purposes and purposes are allowed to provide isolation so the key",
    "start": "3048770",
    "end": "3055200"
  },
  {
    "text": "the the purpose might be slightly different for example you want to encrypt someone's credit card number not",
    "start": "3055200",
    "end": "3062610"
  },
  {
    "text": "that you would ever store a full credit card number because then the bank's get really upset but we'll take this as an",
    "start": "3062610",
    "end": "3067770"
  },
  {
    "text": "example you would store your credit card number using one purpose and you would store perhaps someone's address using another purposes so the same key can't",
    "start": "3067770",
    "end": "3073560"
  },
  {
    "text": "be used to decrypt both don't use user input for this that's an incredibly",
    "start": "3073560",
    "end": "3080430"
  },
  {
    "text": "silly idea it means that an attacker would be able to construct a derived key",
    "start": "3080430",
    "end": "3086090"
  },
  {
    "text": "that might not be the one that you want so we have configuration points the key",
    "start": "3086090",
    "end": "3093930"
  },
  {
    "start": "3089000",
    "end": "3153000"
  },
  {
    "text": "stores the encryption algorithms you can serve like up up if you're in Russia and you can change the key expiration policy",
    "start": "3093930",
    "end": "3099870"
  },
  {
    "text": "so if you don't like ninety days you can lower it to thirty please don't set it to one we set it to one just to prove",
    "start": "3099870",
    "end": "3106860"
  },
  {
    "text": "that the key rolling works which was quite fun but that's just a bit too much work for your per application and there",
    "start": "3106860",
    "end": "3114180"
  },
  {
    "text": "is a forward compatibility package for don''t 5.2 so the reason we have a",
    "start": "3114180",
    "end": "3120150"
  },
  {
    "text": "forward forward compatibility package is people want to be able to log into their",
    "start": "3120150",
    "end": "3125640"
  },
  {
    "text": "dotnet frame app third MVC one two three four or five app and shared the authentication cookie",
    "start": "3125640",
    "end": "3132220"
  },
  {
    "text": "with a core app now we're not gonna reinvent machine key in core that's what",
    "start": "3132220",
    "end": "3137830"
  },
  {
    "text": "we used to use on frameworks so we took data protection and we put it into the dotnet framework so you have to pull",
    "start": "3137830",
    "end": "3143560"
  },
  {
    "text": "your dotnet framework app up to make it work with dotnet court rather than crippling dotnet core and sucking it",
    "start": "3143560",
    "end": "3150850"
  },
  {
    "text": "down into a vortex of depression so configuring services nice and easy",
    "start": "3150850",
    "end": "3156700"
  },
  {
    "start": "3153000",
    "end": "3197000"
  },
  {
    "text": "everything's a service we will add data protection then we will choose where we are going to store our keys and then we",
    "start": "3156700",
    "end": "3161980"
  },
  {
    "text": "are going to choose how we protect our keys and then finally we set an application name because then we have",
    "start": "3161980",
    "end": "3167560"
  },
  {
    "text": "isolation between apps if you want to if you want to share data protected data",
    "start": "3167560",
    "end": "3173050"
  },
  {
    "text": "between applications then you need to set a static application name that is",
    "start": "3173050",
    "end": "3178060"
  },
  {
    "text": "the same for all your applications you want to write your own I XML repository",
    "start": "3178060",
    "end": "3184510"
  },
  {
    "text": "and we used XML because it give us some nice encryption capabilities and there are only two things you need to do you",
    "start": "3184510",
    "end": "3190810"
  },
  {
    "text": "need to give it a way to get every single key and you need to give it a way to store a single key so it is honestly",
    "start": "3190810",
    "end": "3199480"
  },
  {
    "start": "3197000",
    "end": "3230000"
  },
  {
    "text": "easy to write your own one of these in 2.0 we now allow you to protect your",
    "start": "3199480",
    "end": "3205570"
  },
  {
    "text": "keys with an x.509 certificate everywhere we only did that in the desktop before because encrypted XML was",
    "start": "3205570",
    "end": "3212350"
  },
  {
    "text": "not in core and we have kevo if you are running in Azure and it will use",
    "start": "3212350",
    "end": "3217420"
  },
  {
    "text": "certificate stored in key volts to protect your data now you still need a backing store because like I said this",
    "start": "3217420",
    "end": "3223270"
  },
  {
    "text": "is the protection provider so it layers on top of where you are storing your",
    "start": "3223270",
    "end": "3228430"
  },
  {
    "text": "keys but we have we have ones that are suitable we have blob storage we have",
    "start": "3228430",
    "end": "3233680"
  },
  {
    "start": "3230000",
    "end": "3249000"
  },
  {
    "text": "Redis then and we have local filesystem someone wrote one for MySQL I've seen",
    "start": "3233680",
    "end": "3239860"
  },
  {
    "text": "one for sequel Lite and it's only two it's only two things that you need to",
    "start": "3239860",
    "end": "3245650"
  },
  {
    "text": "implement so it is easy to do so back compact we have our yank asp.net up",
    "start": "3245650",
    "end": "3253450"
  },
  {
    "start": "3249000",
    "end": "3443000"
  },
  {
    "text": "package for cookie sharing the docs are a little bit weird",
    "start": "3253450",
    "end": "3259990"
  },
  {
    "text": "so I have my current version of of how to do this sitting on that github repo",
    "start": "3259990",
    "end": "3267089"
  },
  {
    "text": "and we just did some general stuff the HTML encoder all our encoders are based",
    "start": "3267089",
    "end": "3274480"
  },
  {
    "text": "on safe lists rather than exclusion lists because generally that's a better idea the HTML encoder is quite",
    "start": "3274480",
    "end": "3283330"
  },
  {
    "text": "opinionated and what it will encode and not encode by default we will encode",
    "start": "3283330",
    "end": "3288339"
  },
  {
    "text": "basic English I'm sorry we will leave basic English alone but as soon as you start wandering off the basic Unicode",
    "start": "3288339",
    "end": "3295690"
  },
  {
    "text": "plan if you are going to go to Chinese plans or Russian plans or Japanese or",
    "start": "3295690",
    "end": "3301800"
  },
  {
    "text": "engine hieroglyphs of which there is a code point for in Unicode they will all",
    "start": "3301800",
    "end": "3307810"
  },
  {
    "text": "get encoded by default in your HTML and then people go well my HTML is very big",
    "start": "3307810",
    "end": "3313450"
  },
  {
    "text": "and I say that you can configure the HTML encoder so if you know that you're",
    "start": "3313450",
    "end": "3319869"
  },
  {
    "text": "going to use those characters and you consider those characters safe you can turn off encoding for each code table in",
    "start": "3319869",
    "end": "3326980"
  },
  {
    "text": "each of the nico stuff now people go well of course they're safe if anything it's it's the basic English ones that",
    "start": "3326980",
    "end": "3333970"
  },
  {
    "text": "are unsafe and that's probably true the reason why we're being paranoid is that browser security sucks especially IE",
    "start": "3333970",
    "end": "3342750"
  },
  {
    "text": "and that we have seen too many bugs in the handling of Unicode code points in",
    "start": "3342750",
    "end": "3349690"
  },
  {
    "text": "browsers so we're gonna be very safe and very paranoid by default and if you want",
    "start": "3349690",
    "end": "3356140"
  },
  {
    "text": "to take the risk you can just turn off the encoding we have CSRF cross-site",
    "start": "3356140",
    "end": "3363250"
  },
  {
    "text": "request forgery you can actually turn the checks on automatically now we have",
    "start": "3363250",
    "end": "3369040"
  },
  {
    "text": "a way of accessing your eraser for use in JavaScript so you don't need to do all sorts of ugliness if you're using",
    "start": "3369040",
    "end": "3374710"
  },
  {
    "text": "razor pages razor pages will both insert and check the CSRF token for you we",
    "start": "3374710",
    "end": "3380589"
  },
  {
    "text": "can't do that in straightforward MVC because it would break too many people and I don't want the complaints we have",
    "start": "3380589",
    "end": "3387520"
  },
  {
    "text": "Coors middleware and the one that spent four weeks of arguing with mr. Fowler",
    "start": "3387520",
    "end": "3392680"
  },
  {
    "text": "about was the default for environment how many of you have deployed an old application",
    "start": "3392680",
    "end": "3398680"
  },
  {
    "text": "up and forgotten to turn debug off and had a yellow screen of death with your stack traces when a user hits an error",
    "start": "3398680",
    "end": "3405540"
  },
  {
    "text": "the rest of you are lying so by default",
    "start": "3405540",
    "end": "3412990"
  },
  {
    "text": "now and all asp.net core application is the default environment is release you",
    "start": "3412990",
    "end": "3419140"
  },
  {
    "text": "have to jump through hoops or run your code from within visual studio to set",
    "start": "3419140",
    "end": "3424180"
  },
  {
    "text": "the development environment to development and all our templates use environment checks if is development",
    "start": "3424180",
    "end": "3430780"
  },
  {
    "text": "then we're gonna put in the full stack tress error so when you shove them up to",
    "start": "3430780",
    "end": "3436360"
  },
  {
    "text": "a life server because the default is release none of that code runs so we're being",
    "start": "3436360",
    "end": "3441640"
  },
  {
    "text": "safer by default this is how you enable automatic CSRF validation this is how",
    "start": "3441640",
    "end": "3448119"
  },
  {
    "start": "3443000",
    "end": "3451000"
  },
  {
    "text": "you get the CSRF tokens and views now",
    "start": "3448119",
    "end": "3453670"
  },
  {
    "start": "3451000",
    "end": "3514000"
  },
  {
    "text": "finally we have secrets far too many people check in their encryption keys or",
    "start": "3453670",
    "end": "3461380"
  },
  {
    "text": "their machine key and web config on github including certain people at Microsoft you have done it in sample",
    "start": "3461380",
    "end": "3467590"
  },
  {
    "text": "code so we have the concept of Secrets if you're looking at settings in asp.net",
    "start": "3467590",
    "end": "3474160"
  },
  {
    "text": "core a lot of things will come out if you're saying start JSON file but if you go to a sure for example and set things",
    "start": "3474160",
    "end": "3480730"
  },
  {
    "text": "for your application those get shelter in environment variables so your secrets can end up in environment variables and",
    "start": "3480730",
    "end": "3485920"
  },
  {
    "text": "that's absolutely fine because you can't check them into github but what you do during development you don't want to mess around with environment variables",
    "start": "3485920",
    "end": "3492130"
  },
  {
    "text": "so we have a secrets manager that puts a secrets file in your user profile way",
    "start": "3492130",
    "end": "3497770"
  },
  {
    "text": "way out of where your source code lies so you would have to copy it and do all sorts of really really dumb things in",
    "start": "3497770",
    "end": "3503740"
  },
  {
    "text": "order to put it in your repository we have support for as your key vault putting your secrets if you don't like",
    "start": "3503740",
    "end": "3508960"
  },
  {
    "text": "environment variables but of course that's not on Linux so you're stuck with environment variables there so that's",
    "start": "3508960",
    "end": "3515680"
  },
  {
    "text": "pretty much it is a quick run-through what we've done which will hopefully make most of you happy for those of you",
    "start": "3515680",
    "end": "3522010"
  },
  {
    "text": "that do want custom properties on custom authorization attributes please go to",
    "start": "3522010",
    "end": "3527260"
  },
  {
    "text": "the asp.net security repo on github and give us your requirements it is the top issue right now we will listen and we",
    "start": "3527260",
    "end": "3534640"
  },
  {
    "text": "will try to make you happy so I have who just tweeted about my presentation I",
    "start": "3534640",
    "end": "3541120"
  },
  {
    "text": "have G one minute which is great because it means Dominic can't ask a question or make a comment and embarrass me does",
    "start": "3541120",
    "end": "3546940"
  },
  {
    "text": "anyone other than Dominic have a question everyone's staring at darling now hello the person next to did Dominic",
    "start": "3546940",
    "end": "3556450"
  },
  {
    "text": "tell you something to ask what was the",
    "start": "3556450",
    "end": "3567550"
  },
  {
    "text": "question is what was the solution with slots and dinner protection you would end up using blob storage or as your key",
    "start": "3567550",
    "end": "3575920"
  },
  {
    "text": "vault to store your data protection key ring in rather than letting Azure do its",
    "start": "3575920",
    "end": "3581800"
  },
  {
    "text": "thing and storing it in a secret place on the what's not exactly secret you can find it quite easily by looking at the",
    "start": "3581800",
    "end": "3587350"
  },
  {
    "text": "code but as a directory in the file system so if you're using slots use as your blob storage now remember when we",
    "start": "3587350",
    "end": "3593770"
  },
  {
    "text": "put things in blob storage it's not encrypted by default so you still either need to use an x.509 certificate which",
    "start": "3593770",
    "end": "3599920"
  },
  {
    "text": "gets deployed across all your slots because they'll do that for you or key vault to hold an x.509",
    "start": "3599920",
    "end": "3607060"
  },
  {
    "text": "certificate to protect the stuff that is in blob storage anyone else have a",
    "start": "3607060",
    "end": "3612460"
  },
  {
    "text": "question or we all just want in our like sweets and sticky buns as we run to the next session now great oh here's an easy",
    "start": "3612460",
    "end": "3620260"
  },
  {
    "text": "one when do I expect two point one I refuse",
    "start": "3620260",
    "end": "3625390"
  },
  {
    "text": "to answer that because I am NOT Damian we do not publicly comment on when we",
    "start": "3625390",
    "end": "3631060"
  },
  {
    "text": "will release stuff mainly because Fowler does something unhappy and then I have to go no we can't do that and it gets",
    "start": "3631060",
    "end": "3637240"
  },
  {
    "text": "delayed a week or two I honestly don't know we've started writing it now if you look at the daily build server you will",
    "start": "3637240",
    "end": "3643720"
  },
  {
    "text": "see that there are daily bills for 2.1 but i have no idea when it will come out that it's not my decision to make",
    "start": "3643720",
    "end": "3649180"
  },
  {
    "text": "damian gets paid far more than me to make that sort of decision and I'm not about to undercut him or second-guess him nice try though",
    "start": "3649180",
    "end": "3656800"
  },
  {
    "text": "thank you very much I hope this has been useful the code and the slides will be available in about 20 minutes off my",
    "start": "3656800",
    "end": "3662210"
  },
  {
    "text": "website thank you",
    "start": "3662210",
    "end": "3665260"
  }
]