[
  {
    "text": "hello everyone are we getting close to time to get started no one else coming",
    "start": "4690",
    "end": "11080"
  },
  {
    "text": "in so I guess we might as well I got a ton of stuff to talk cover so did the sooner we can get started the better is",
    "start": "11080",
    "end": "16200"
  },
  {
    "text": "everybody having a good day even though it's early in the morning oh let's see let me try that everybody",
    "start": "16200",
    "end": "22750"
  },
  {
    "text": "having a good day I love this so much one of my last presentations was in Belgium you go in and you say everybody",
    "start": "22750",
    "end": "29140"
  },
  {
    "text": "having a good day silence you cracked the best joke you know and it's complete silence so I love",
    "start": "29140",
    "end": "34269"
  },
  {
    "text": "the fact that there's some feedback that's awesome so it's topic of today is authentication and a little bit of",
    "start": "34269",
    "end": "40450"
  },
  {
    "text": "authorization in asp.net Core 2 it's quite an important part that it is actually 2.0 or 2.1 they rewrote the",
    "start": "40450",
    "end": "48010"
  },
  {
    "text": "whole thing from 1 to 2 and I will be covering what's in 2 which is completely different from one so my name is Chris",
    "start": "48010",
    "end": "56590"
  },
  {
    "text": "Klug I work at the company in Stockholm called captain 34 where my official",
    "start": "56590",
    "end": "62109"
  },
  {
    "text": "title is ninja which basically means nothing because everyone is a ninja or company but I traveled the world",
    "start": "62109",
    "end": "69160"
  },
  {
    "text": "speaking at conferences sharing knowledge as much as I can and once in a while I do touch a keyboard and write",
    "start": "69160",
    "end": "75490"
  },
  {
    "text": "code for real for clients it's been a while now though and for some reason",
    "start": "75490",
    "end": "81039"
  },
  {
    "text": "I've got stuck with doing a lot of what syndication I got a beard I got stuck",
    "start": "81039",
    "end": "90640"
  },
  {
    "text": "doing a bunch of authentication and authorization and had to learn that and it's actually it's it's quite fun to",
    "start": "90640",
    "end": "96069"
  },
  {
    "text": "work with so I thought I'd go around and tell people how to do that and how it works in a spread net core because it's",
    "start": "96069",
    "end": "102459"
  },
  {
    "text": "not that complicated but it is quite important before we get started how many",
    "start": "102459",
    "end": "108069"
  },
  {
    "text": "of you are on asp.net core 2.0 today how many of you have not are not on asp net",
    "start": "108069",
    "end": "114369"
  },
  {
    "text": "core at all today okay so for those of you who are not on court core today a",
    "start": "114369",
    "end": "120160"
  },
  {
    "text": "lot of the stuff that I'm showing can be done in all old MVC as well it's",
    "start": "120160",
    "end": "127390"
  },
  {
    "text": "different implementation wise you have to write slightly different syntax but it is possible to do kind of the same",
    "start": "127390",
    "end": "133600"
  },
  {
    "text": "things in a similar manner but a spec or made it easier so even if you're not in core you can take",
    "start": "133600",
    "end": "139959"
  },
  {
    "text": "away a lot of information from this session that's about all of these lights I had",
    "start": "139959",
    "end": "145349"
  },
  {
    "text": "I'm gonna be coding for the rest of the session my goal is to do a very",
    "start": "145349",
    "end": "152080"
  },
  {
    "text": "practical walkthrough of how we do authentication in F net core so I'm gonna be showing you how we do all sent",
    "start": "152080",
    "end": "159130"
  },
  {
    "text": "ocation with local logins how we switch over and start using social logins how",
    "start": "159130",
    "end": "164470"
  },
  {
    "text": "we combine several different social logins how we do a sure ad b2c authentication and how we use identity",
    "start": "164470",
    "end": "171610"
  },
  {
    "text": "server to do our authentication and I'm gonna do that all in 55 minutes so it's gonna be a fairly fast-paced before I",
    "start": "171610",
    "end": "179470"
  },
  {
    "text": "forget it though I just want to put up one more slide I generally have it at the end but I people are rushing out at",
    "start": "179470",
    "end": "184900"
  },
  {
    "text": "that time mostly all of the code that I am writing is available on the internet so you can just go and download it it",
    "start": "184900",
    "end": "191799"
  },
  {
    "text": "will have everything you need except for my credentials for Twitter and Facebook",
    "start": "191799",
    "end": "197190"
  },
  {
    "text": "all of those credentials will be on my screen during the session I would",
    "start": "197190",
    "end": "202900"
  },
  {
    "text": "suggest not using them for my sake and I might reset them afterwards but you need",
    "start": "202900",
    "end": "209440"
  },
  {
    "text": "to make some minor changes to get to work and if you you're interesting in authentication and authorization and the",
    "start": "209440",
    "end": "214810"
  },
  {
    "text": "stuff that I'm talking about today but you're not doing exactly what I'm showing here there's a course on Pluralsight that shows you exactly the",
    "start": "214810",
    "end": "221530"
  },
  {
    "text": "same thing 10 to 20 minute sessions on specific implementations so if you want to build your own authentication handler",
    "start": "221530",
    "end": "228220"
  },
  {
    "text": "there's a 20 minute module with that if you want to do Facebook authentication there's 20 minutes of that so you can go in find the module that suits your needs",
    "start": "228220",
    "end": "234670"
  },
  {
    "text": "and you can look up that stuff for that specific feature other than that let's",
    "start": "234670",
    "end": "240489"
  },
  {
    "text": "just go and switch over to my beautiful application it is as you can see a",
    "start": "240489",
    "end": "245560"
  },
  {
    "text": "fantastic MVC application with bootstrap so it looks like every other application",
    "start": "245560",
    "end": "251139"
  },
  {
    "text": "on the Internet it's pretty simple it has a home page",
    "start": "251139",
    "end": "256690"
  },
  {
    "text": "which is this this SLO world that's it it's got a login screen it's got a",
    "start": "256690",
    "end": "262810"
  },
  {
    "text": "register screen and it's got a secret page which isn't very secret but if you",
    "start": "262810",
    "end": "269409"
  },
  {
    "text": "go to user info you can find out information about the currently login user and it throws an exception because it's not",
    "start": "269409",
    "end": "277090"
  },
  {
    "text": "done that's kind of application I'll be using for the entire day or entire session so I'm going to add different",
    "start": "277090",
    "end": "283900"
  },
  {
    "text": "types of authentications to it and if we walk over and we look at the code for it",
    "start": "283900",
    "end": "289169"
  },
  {
    "text": "look it's start up here actually start up is completely uninteresting but there's like we're using MVC and some",
    "start": "289169",
    "end": "295479"
  },
  {
    "text": "static files that's it I have in this case I have an i user service I have a little user service and let's look at",
    "start": "295479",
    "end": "302080"
  },
  {
    "text": "the implementation of the API for that it's basically just has authenticate add authenticate external add external we're",
    "start": "302080",
    "end": "310030"
  },
  {
    "text": "not going to look at the implementation because it's ugly but it basically stores the users in a JSON file on disk",
    "start": "310030",
    "end": "317949"
  },
  {
    "text": "do not ever ever do this but it's a demo",
    "start": "317949",
    "end": "323099"
  },
  {
    "text": "if we look at the controller stuff there are some controls in here there's an auth controller that has all of the",
    "start": "323099",
    "end": "328449"
  },
  {
    "text": "actions that we need so it's got login and register and log outs which is the",
    "start": "328449",
    "end": "333909"
  },
  {
    "text": "stuff that we're going to be implementing and it's got an endpoint equal access denied and I want to point that out because I'm not covering it in",
    "start": "333909",
    "end": "340330"
  },
  {
    "text": "any detail but in previous versions of Microsoft authentication a user was",
    "start": "340330",
    "end": "346479"
  },
  {
    "text": "never put into a state of access denied access denied and unauthorized or - or",
    "start": "346479",
    "end": "353490"
  },
  {
    "text": "unauthenticated or two different things so used it used to be that when a user went to a page that they didn't have",
    "start": "353490",
    "end": "359110"
  },
  {
    "text": "access to they were sent to the login page you could never go and say I want to send a user that is logged in but",
    "start": "359110",
    "end": "365650"
  },
  {
    "text": "doesn't have access to this specific feature to a specific page they always ended up on the login page there was no",
    "start": "365650",
    "end": "371139"
  },
  {
    "text": "difference between being logged in and not having access and not being logged in at all so they've added this feature",
    "start": "371139",
    "end": "377080"
  },
  {
    "text": "where you can say if you're logged in but you don't have access we can handle that separately from not being",
    "start": "377080",
    "end": "382479"
  },
  {
    "text": "authenticated at all which is actually quite nice home controller is pretty",
    "start": "382479",
    "end": "388029"
  },
  {
    "text": "boring it has very little except for an authorized attribute so I'm using authorize attributes it's just the same",
    "start": "388029",
    "end": "393310"
  },
  {
    "text": "as we would do in any old a spinet MVC application as well to make sure that the user is authenticated and that is",
    "start": "393310",
    "end": "400630"
  },
  {
    "text": "about it a couple of use in here obviously they don't do a whole lot so if we get started it and I want to",
    "start": "400630",
    "end": "406950"
  },
  {
    "text": "start out with doing local logins so first of all before I do that how many of you are doing local logins today you",
    "start": "406950",
    "end": "413460"
  },
  {
    "text": "have your own credential store on Prem how many of you are terrified that you",
    "start": "413460",
    "end": "419280"
  },
  {
    "text": "have your local storage on Prem with user credentials is one two three had",
    "start": "419280",
    "end": "424620"
  },
  {
    "text": "way less than all the people that said that they had it and if I had it I would be terrified but we still do it and I",
    "start": "424620",
    "end": "432360"
  },
  {
    "text": "still have stuff to do it so I thought I'd start out in that end that we have our own login our users or user",
    "start": "432360",
    "end": "438270"
  },
  {
    "text": "credentials in our application so the first step to do is we go up to configure services and we say services",
    "start": "438270",
    "end": "443820"
  },
  {
    "text": "dot add authentication that is step one that adds the authentication services to",
    "start": "443820",
    "end": "451350"
  },
  {
    "text": "the dependency injection framework which is the IOC container it doesn't add any form of authentication this is just",
    "start": "451350",
    "end": "457380"
  },
  {
    "text": "foundational stuff that is used to authenticate users it doesn't have any actual authentication in there what we",
    "start": "457380",
    "end": "464640"
  },
  {
    "text": "get back from our authentication is an authentication builder the",
    "start": "464640",
    "end": "470460"
  },
  {
    "text": "authentication builder is something that we can then go and say I want to add cookies so I want to have cookie",
    "start": "470460",
    "end": "475919"
  },
  {
    "text": "authentication in my application that's it that's that adds a cookie authentication",
    "start": "475919",
    "end": "481800"
  },
  {
    "text": "Handler that is responsible for making sure that cookies work as an authentication paradigm in your",
    "start": "481800",
    "end": "487140"
  },
  {
    "text": "application and then that uses the foundational authentication services from add authentication so in this case",
    "start": "487140",
    "end": "494130"
  },
  {
    "text": "we'll be using cookie and we need to configure that a bit so I'm gonna add a cookie configuration so it has a",
    "start": "494130",
    "end": "500850"
  },
  {
    "text": "callback delegate here and you get options back and I'm just setting the login path and the access denied path if",
    "start": "500850",
    "end": "507600"
  },
  {
    "text": "you leave these they all have default values so I could literally just skip that whole thing but you get some other",
    "start": "507600",
    "end": "514349"
  },
  {
    "text": "URLs that I didn't find work for me so I went in and configured it like this instead but it does have pretty good",
    "start": "514349",
    "end": "521370"
  },
  {
    "text": "defaults to begin with so it does have things like cookie protection it turned on and all of the standard defaults that",
    "start": "521370",
    "end": "528210"
  },
  {
    "text": "you'd want to have for your authentication stuff so I'm putting in cookies and then I need to tell my",
    "start": "528210",
    "end": "534540"
  },
  {
    "text": "authentication services what cook what handler do I want to use to do it for my indication so every handler that we add",
    "start": "534540",
    "end": "541079"
  },
  {
    "text": "to the authentication context has a name if I don't specifically give my cookie",
    "start": "541079",
    "end": "547800"
  },
  {
    "text": "handler a name it gets a default name and the default name is available under a cookie authentication defaults cookie",
    "start": "547800",
    "end": "559410"
  },
  {
    "text": "authentication default thought authentication scheme so if we look at this it's just basically a string that",
    "start": "559410",
    "end": "565709"
  },
  {
    "text": "says cookies but all of the different handlers so if I'm doing cook your",
    "start": "565709",
    "end": "570899"
  },
  {
    "text": "authentication there's a cookie authentication defaults if I do open ID connectors and open ID Connect defaults",
    "start": "570899",
    "end": "576179"
  },
  {
    "text": "so the defaults the standard is that there is a static class that you can use to get the default values for different",
    "start": "576179",
    "end": "582119"
  },
  {
    "text": "things for that specific handler so in this case I'm just saying that I want to use to cook your authentication handler",
    "start": "582119",
    "end": "587279"
  },
  {
    "text": "for everything so whenever a user comes to my site look at the cookie whenever I stell the use system to sign",
    "start": "587279",
    "end": "593999"
  },
  {
    "text": "the user in create a cookie whenever the user is considered not having access",
    "start": "593999",
    "end": "599480"
  },
  {
    "text": "redirect the user using the cookie authentication handler which will redirect to both access denied if the",
    "start": "599480",
    "end": "605610"
  },
  {
    "text": "user needs to login and I challenge the user to login tell that cookie authentication handler that it should do",
    "start": "605610",
    "end": "612179"
  },
  {
    "text": "whatever it does to get the person logged in so I'm defaulting to that for everything which is basically everything",
    "start": "612179",
    "end": "617579"
  },
  {
    "text": "we need and that is yeah literally everything I need from a service point",
    "start": "617579",
    "end": "623730"
  },
  {
    "text": "of view was I complicated no it wasn't complicated good if that is complicated",
    "start": "623730",
    "end": "629699"
  },
  {
    "text": "it will get way more complicated throughout the session and then one of",
    "start": "629699",
    "end": "635490"
  },
  {
    "text": "the things like I generally forget for some reason is you need to go down to your configure method I need to do app",
    "start": "635490",
    "end": "640529"
  },
  {
    "text": "use authentication if you don't do that everything works fine except the user",
    "start": "640529",
    "end": "649740"
  },
  {
    "text": "never gets logged in which is potentially not fine but it kind of there's no exceptions being thrown it",
    "start": "649740",
    "end": "656189"
  },
  {
    "text": "just your application looks like everything works and then the user is not logged in don't forget that part because that is the middleware that will",
    "start": "656189",
    "end": "662549"
  },
  {
    "text": "actually make sure that once the request passes this middle where the user is authenticated there is a user setup in",
    "start": "662549",
    "end": "669449"
  },
  {
    "text": "the system there's a current user context that you can work with and that means that when we get to MVC the users authenticated so when we have",
    "start": "669449",
    "end": "676499"
  },
  {
    "text": "the authorized attribute that works once I got my services in place in my",
    "start": "676499",
    "end": "681779"
  },
  {
    "text": "middleware I need to go over to my oath controller and here in my oath",
    "start": "681779",
    "end": "687149"
  },
  {
    "text": "controller I'm gonna need to do a few things first of all I need to register a user I don't have any users in the",
    "start": "687149",
    "end": "692699"
  },
  {
    "text": "system so step one is to register one we look at the first action here it",
    "start": "692699",
    "end": "698369"
  },
  {
    "text": "basically just returns a view so it returns the form to sign in or sorry to register and if we look at the second",
    "start": "698369",
    "end": "704429"
  },
  {
    "text": "register action here it's an HTTP POST and the post here all it does so far it",
    "start": "704429",
    "end": "710490"
  },
  {
    "text": "checks to make sure that the the model state is valid basically that I have filled out all the fields that I need",
    "start": "710490",
    "end": "715550"
  },
  {
    "text": "validation is sparse in this application and by sparse I mean crap but I trusted people using my app",
    "start": "715550",
    "end": "723749"
  },
  {
    "text": "to fill in everything and then I used my user service and I say if everything is",
    "start": "723749",
    "end": "729959"
  },
  {
    "text": "filled in I'm just gonna add a new user with that name that email address and that password and that gives me user",
    "start": "729959",
    "end": "735959"
  },
  {
    "text": "back from my user store and this is where I need to go and do my authentication stuff so I'm gonna remove",
    "start": "735959",
    "end": "742199"
  },
  {
    "text": "that and I'm gonna say register you through one so the first thing I need to",
    "start": "742199",
    "end": "749279"
  },
  {
    "text": "do is I need to create a list of claims so claims is the default way of doing authentication in asp.net and has been",
    "start": "749279",
    "end": "756569"
  },
  {
    "text": "so for the last few years before that we had a identity and I whatever claims",
    "start": "756569",
    "end": "762749"
  },
  {
    "text": "principle or I principle it's all claims now so I'm gonna go ahead and create a claims list so I'm saying that I've got",
    "start": "762749",
    "end": "768749"
  },
  {
    "text": "a name identifier I got a name and I got an email and these are the values for it once I got that I'll go and take my",
    "start": "768749",
    "end": "778410"
  },
  {
    "text": "claims and I'll use those to create a new identity so I'm creating a new",
    "start": "778410",
    "end": "784529"
  },
  {
    "text": "claims identity passing in the claims and I pass in the name of the authentication scheme that was used for",
    "start": "784529",
    "end": "790350"
  },
  {
    "text": "this user to sign in so in this case cook your authentication then I take my",
    "start": "790350",
    "end": "795809"
  },
  {
    "text": "identity and I pass it in and create a principle and once I've got my principle",
    "start": "795809",
    "end": "804230"
  },
  {
    "text": "I can pretty easily that's an extension method so we need to have that I'll just",
    "start": "804290",
    "end": "810920"
  },
  {
    "text": "await HTTP context I'll sign in a sink and give that my principal and after",
    "start": "810920",
    "end": "816680"
  },
  {
    "text": "that I redirect the user to user information about user information action on the home controller that is",
    "start": "816680",
    "end": "823040"
  },
  {
    "text": "pretty much everything I do so signing I think you doesn't actually do a whole lot but on the way out as the request",
    "start": "823040",
    "end": "828769"
  },
  {
    "text": "goes past on the way out this system will basically set the cookie and make sure that the cookie is protected and",
    "start": "828769",
    "end": "834500"
  },
  {
    "text": "encrypted and signed and all of that stuff and whenever the user comes back after having been redirected to user",
    "start": "834500",
    "end": "840440"
  },
  {
    "text": "information asked the user comes in that request will have that cookie the cookie authentication or the authentication",
    "start": "840440",
    "end": "846949"
  },
  {
    "text": "middleware would use will use two authentication services to go and say can you please authenticate this user it",
    "start": "846949",
    "end": "852529"
  },
  {
    "text": "looks at the cookie rehydrates the cookie and resets the user context and the user should be logged in and I'm",
    "start": "852529",
    "end": "859310"
  },
  {
    "text": "saying should but let's say and see if it actually does let's go register there this and I'm",
    "start": "859310",
    "end": "871940"
  },
  {
    "text": "gonna register user I'm gonna written to me so we'll do that I'm registered I'm",
    "start": "871940",
    "end": "881089"
  },
  {
    "text": "logged in I have a user and you can see here it says that my user name is Chris fine it says that their I have three",
    "start": "881089",
    "end": "887449"
  },
  {
    "text": "claims they're all issued by local authority so it's issued by me I could give it a different issue if I wanted to",
    "start": "887449",
    "end": "893360"
  },
  {
    "text": "here is the claim type which is humongously long but and makes the cookie big but you can make them shorter",
    "start": "893360",
    "end": "899329"
  },
  {
    "text": "and custom if you want the name and email address what's that semi understandable cool",
    "start": "899329",
    "end": "906699"
  },
  {
    "text": "next step right now I can sign out I can't log out user so logging out the",
    "start": "906699",
    "end": "911959"
  },
  {
    "text": "user is actually as simple if not simpler so if we close this down and we",
    "start": "911959",
    "end": "918230"
  },
  {
    "text": "look at the logout endpoint one little detail here by the way I have an HD post so my logout button actually posts a",
    "start": "918230",
    "end": "925639"
  },
  {
    "text": "form the reason for this is that I've learned that certain browsers chrome",
    "start": "925639",
    "end": "931569"
  },
  {
    "text": "will in some cases prefetch pages for you to make your browsing faster",
    "start": "931569",
    "end": "938030"
  },
  {
    "text": "we'll actually go and prefetch stuff for you in certain scenarios if your logout endpoint is a HTTP GET it will go and",
    "start": "938030",
    "end": "945560"
  },
  {
    "text": "potentially prefetch the logout endpoints logging their user out of your system so when the user clicks something",
    "start": "945560",
    "end": "951380"
  },
  {
    "text": "he or she will be redirected to that page and then logged out and have to log in again go to that page after login",
    "start": "951380",
    "end": "956990"
  },
  {
    "text": "gets logged out again because chrome is nice enough so every time you click something you have to re log in not a",
    "start": "956990",
    "end": "964010"
  },
  {
    "text": "great solution I've not seen this happen a lot of times it happens once in a while so I'm just for safety I'm doing",
    "start": "964010",
    "end": "970220"
  },
  {
    "text": "HTTP POST and what do we need to do in here well we just need to do sign out",
    "start": "970220",
    "end": "975260"
  },
  {
    "text": "user by the way never ever take on a project where you don't have pre-built snippets takes way too long",
    "start": "975260",
    "end": "981170"
  },
  {
    "text": "just having pre-built snippets for everything makes life a lot easier so what you do is you just say await HTTP",
    "start": "981170",
    "end": "987560"
  },
  {
    "text": "context of sign out async and redirect to action index home once again",
    "start": "987560",
    "end": "992930"
  },
  {
    "text": "this thing is async it's probably going to be very fast but it's it sets up some stuff into authentication services so",
    "start": "992930",
    "end": "998960"
  },
  {
    "text": "that when the request goes out the cookie is being removed because of the cook you handler so this doesn't actually tie into the cookie handler at",
    "start": "998960",
    "end": "1005290"
  },
  {
    "text": "all the feature I'm doing here like sign out is saying ties into the authentication services the",
    "start": "1005290",
    "end": "1011140"
  },
  {
    "text": "authentication service then looks that they configured handler for signing out and finds that I configure that to be",
    "start": "1011140",
    "end": "1018250"
  },
  {
    "text": "the cookie authentication handler and then it uses to cook your sent occation handler to sign out so I'm in no way tied in to anything specific and I can",
    "start": "1018250",
    "end": "1026140"
  },
  {
    "text": "switch things around using that I can go back out here I can press logout",
    "start": "1026140",
    "end": "1032938"
  },
  {
    "text": "and it looks at okay fairly simple right yes Chris that is awesomely simple I",
    "start": "1036980",
    "end": "1043040"
  },
  {
    "text": "know last step logging in so I got register I",
    "start": "1043040",
    "end": "1048740"
  },
  {
    "text": "need to get my log in working as well because I've got a user now so we look at the log in one I've got the first",
    "start": "1048740",
    "end": "1054110"
  },
  {
    "text": "action which is to get which gives me the form the second action is my post and yes I do things like validate ante",
    "start": "1054110",
    "end": "1061610"
  },
  {
    "text": "forgery token for example to make sure that we can't do replace and stuff like that and in the post",
    "start": "1061610",
    "end": "1068780"
  },
  {
    "text": "I check my modal state if it's valid if it's not I just returned the view then I",
    "start": "1068780",
    "end": "1073880"
  },
  {
    "text": "look at my user service and says can you place all tentacle this user who use the email address here's the password if I",
    "start": "1073880",
    "end": "1080780"
  },
  {
    "text": "don't get a user back from my user service I add a model state error and then I return the view again with an",
    "start": "1080780",
    "end": "1087350"
  },
  {
    "text": "error and finally I need to login the user and by the way yes this is the way",
    "start": "1087350",
    "end": "1093620"
  },
  {
    "text": "it should be you should not be throwing exceptions if the user is not available anything like that do return null exceptions are slow and it's not an",
    "start": "1093620",
    "end": "1100910"
  },
  {
    "text": "exceptional state that people fill in the wrong password so what I'm going to do actually I'm gonna I'm gonna hold off",
    "start": "1100910",
    "end": "1106880"
  },
  {
    "text": "on that what I need to do it's actually gonna be very very similar to what I'm doing here because I've got a user right",
    "start": "1106880",
    "end": "1113270"
  },
  {
    "text": "and this code here signs in the user so what I'm gonna do is I'm gonna take this",
    "start": "1113270",
    "end": "1118280"
  },
  {
    "text": "I'm gonna do that extract method sign in user I have issues I know that so I'm",
    "start": "1118280",
    "end": "1126890"
  },
  {
    "text": "gonna have to move this to the end of my code because I suffer from C do which is OCD with the letters in the right order",
    "start": "1126890",
    "end": "1134650"
  },
  {
    "text": "then you go up here and we just do return oh wait sign-in user user like",
    "start": "1134650",
    "end": "1144710"
  },
  {
    "text": "that there's no difference between registering a user or signing any user I'm doing the same thing I go to user I",
    "start": "1144710",
    "end": "1150410"
  },
  {
    "text": "need to set the claims once I set the claims I need to sign in to use to using date should be context and then I'm good",
    "start": "1150410",
    "end": "1155420"
  },
  {
    "text": "to go having that in place I should be able to hopefully that is not me that is",
    "start": "1155420",
    "end": "1163070"
  },
  {
    "text": "me fantastically complicated password",
    "start": "1163070",
    "end": "1167800"
  },
  {
    "text": "and it works good login so if we look at just quickly have a recap of the code we",
    "start": "1171570",
    "end": "1178109"
  },
  {
    "text": "start up and start up with we start out in start up we add our authentication",
    "start": "1178109",
    "end": "1183269"
  },
  {
    "text": "service we configured it the handlers that we need and we add the middleware",
    "start": "1183269",
    "end": "1188399"
  },
  {
    "text": "and then in the actual controller we just depend on the HP context sign-in I",
    "start": "1188399",
    "end": "1195149"
  },
  {
    "text": "think an HTP context sign out I think that's what we need to do and they are pretty self-explanatory sign in async",
    "start": "1195149",
    "end": "1200549"
  },
  {
    "text": "takes and prints a principal ok I need to create a principal to create a principal I need an identity to create",
    "start": "1200549",
    "end": "1205590"
  },
  {
    "text": "an identity I need some claims so you can sort of backtrack and figure out what to do but I figured out that all of",
    "start": "1205590",
    "end": "1213960"
  },
  {
    "text": "my clients basically now want to have other kinds of sign-in they want to do social logins everybody wants to login",
    "start": "1213960",
    "end": "1220080"
  },
  {
    "text": "with Facebook or Twitter or something like that actually talking about that how many of you do if there's a login form on a",
    "start": "1220080",
    "end": "1226889"
  },
  {
    "text": "registration form on their website do how many of you use Facebook or any",
    "start": "1226889",
    "end": "1232710"
  },
  {
    "text": "social provider if that is available instead of doing a local login how many",
    "start": "1232710",
    "end": "1237840"
  },
  {
    "text": "of you will do a local login how am i keeping hands up keep your hands up you",
    "start": "1237840",
    "end": "1242999"
  },
  {
    "text": "have enough strength to keep your hands up how many of you have a unique password for every website you ever go",
    "start": "1242999",
    "end": "1248070"
  },
  {
    "text": "to or a few hunts coming down I must admit I do social logins whenever I can",
    "start": "1248070",
    "end": "1254309"
  },
  {
    "text": "because I true hyrum their entire sentence before you judge me because I'm gonna say I trust Facebook to keep my",
    "start": "1254309",
    "end": "1262169"
  },
  {
    "text": "credential safe I actually I trust Facebook in every single way I will know that they will",
    "start": "1262169",
    "end": "1268320"
  },
  {
    "text": "sell me out as soon as anybody will pay for it but I'm also pretty sure they will keep my credential safe and also",
    "start": "1268320",
    "end": "1275309"
  },
  {
    "text": "because they have my credentials doesn't mean that they get to see everything and can log into every single application",
    "start": "1275309",
    "end": "1280499"
  },
  {
    "text": "all of that they issue a token and that token is used by the third party application it doesn't necessarily give",
    "start": "1280499",
    "end": "1287039"
  },
  {
    "text": "Facebook access to that application and it doesn't necessarily give that application access to your Facebook so",
    "start": "1287039",
    "end": "1292559"
  },
  {
    "text": "I'm happy with that and I see a lot of clients going towards social logins because it's it's simple so what we want",
    "start": "1292559",
    "end": "1299820"
  },
  {
    "text": "to do is we want to go back to the sort of class I want to add another form of authentication in here",
    "start": "1299820",
    "end": "1305340"
  },
  {
    "text": "and I don't think I can do this easily so let's see if we can do it like this that's the one so I'm just gonna go in",
    "start": "1305340",
    "end": "1312720"
  },
  {
    "text": "here and I'm gonna say I want to add some other stuff so besides cookie authentication I want to add facebook i",
    "start": "1312720",
    "end": "1318590"
  },
  {
    "text": "want to add twitter and as I said preview credentials these are the ones",
    "start": "1318590",
    "end": "1325020"
  },
  {
    "text": "that you will have to switch out in your if you download the code these are credentials they are supposed",
    "start": "1325020",
    "end": "1331950"
  },
  {
    "text": "to be kept safe and should not be shown to other people on a huge screen in front of 200 people at a conference",
    "start": "1331950",
    "end": "1339230"
  },
  {
    "text": "I will reset this after the conference you can't do anything with them I've",
    "start": "1339230",
    "end": "1344610"
  },
  {
    "text": "said that for the last five conferences they are still the same but you can't actually do anything with them because",
    "start": "1344610",
    "end": "1350190"
  },
  {
    "text": "the app on Facebook white lists the URL lists that you can use and it's hard-coded to only allow localhost so in",
    "start": "1350190",
    "end": "1357030"
  },
  {
    "text": "theory you can use this and just but you can only do local development with my account so it doesn't really matter but",
    "start": "1357030",
    "end": "1362640"
  },
  {
    "text": "please don't get your own one it's simple so I add this in here and add Facebook and Twitter and after that",
    "start": "1362640",
    "end": "1370740"
  },
  {
    "text": "that's kind of it so I need then I'm gonna go to my view for register",
    "start": "1370740",
    "end": "1376550"
  },
  {
    "text": "actually I'm not I'm gonna go to my that's not the one I want to go here I wonder if my login screen sorry to begin",
    "start": "1376550",
    "end": "1382410"
  },
  {
    "text": "with and down here after my login form I'm gonna go and say nope nope that's",
    "start": "1382410",
    "end": "1392370"
  },
  {
    "text": "the one external provider is test one so first thing I do in here is I inject a",
    "start": "1392370",
    "end": "1399270"
  },
  {
    "text": "service called I authenticate scheme provider that is part of add authentication it gives me",
    "start": "1399270",
    "end": "1404820"
  },
  {
    "text": "access to all of these authentication schemes that are available in this case cookie Facebook and Twitter cuz those",
    "start": "1404820",
    "end": "1411240"
  },
  {
    "text": "are the ones that I have registered and then down here I go and say for each scheme in get request handler schemes I",
    "start": "1411240",
    "end": "1417720"
  },
  {
    "text": "think that method will give me back all the handlers that does redirects so if I",
    "start": "1417720",
    "end": "1424500"
  },
  {
    "text": "put in it won't give me cookie because cookie is local it will only give me ones that will redirect to other services for sign-in so in this case it",
    "start": "1424500",
    "end": "1430980"
  },
  {
    "text": "will give me Twitter and Facebook back and then I create a link here and say action is login external path",
    "start": "1430980",
    "end": "1438590"
  },
  {
    "text": "long the name of this game as an ID parameter and the name of the button or",
    "start": "1438590",
    "end": "1445400"
  },
  {
    "text": "the display of the text on the button is supposed to be this display name of that scheme so basically render one for H",
    "start": "1445400",
    "end": "1453020"
  },
  {
    "text": "that's fine login external is not available at the moment so if we go back to Earth",
    "start": "1453020",
    "end": "1458539"
  },
  {
    "text": "controller we look at login sort of here I add another endpoint login external it",
    "start": "1458539",
    "end": "1468380"
  },
  {
    "text": "takes the ID which is going to be the name of the scheme that I want to use so Facebook or Twitter and then I go HTTP",
    "start": "1468380",
    "end": "1475039"
  },
  {
    "text": "context or challenge async and I give it",
    "start": "1475039",
    "end": "1480559"
  },
  {
    "text": "to ID so I'm basically this time I'm telling it that I want you to challenge the user using Facebook or Twitter it",
    "start": "1480559",
    "end": "1486860"
  },
  {
    "text": "depending on what I've tossed in and then I give it what is called authentication properly saying that once",
    "start": "1486860",
    "end": "1492649"
  },
  {
    "text": "the users been logged in redirect to user info if you do not do this",
    "start": "1492649",
    "end": "1497929"
  },
  {
    "text": "it defaults to redirecting back to the same URL or the same action which means",
    "start": "1497929",
    "end": "1503539"
  },
  {
    "text": "that the user after having gone to Facebook and logged in or Twitter the user gets redirected back to this",
    "start": "1503539",
    "end": "1508880"
  },
  {
    "text": "endpoint which then goes sweet you want to sign in with Facebook I'm going to",
    "start": "1508880",
    "end": "1514070"
  },
  {
    "text": "redirect you to Facebook Facebook goes and says you've already signed in you're fine I'm issuing a token to your system",
    "start": "1514070",
    "end": "1519279"
  },
  {
    "text": "you come back to this system here your system redirects to this end point you get redirected to Facebook and you kind",
    "start": "1519279",
    "end": "1525049"
  },
  {
    "text": "of get the whole thing that it's gonna suck it you get like 20 redirects and then chrome explosion your face and says",
    "start": "1525049",
    "end": "1530960"
  },
  {
    "text": "that you were ain't not quite those terms but but kind of so I've got",
    "start": "1530960",
    "end": "1536000"
  },
  {
    "text": "that going all I need to do now is log up my user look out my user and we press",
    "start": "1536000",
    "end": "1546799"
  },
  {
    "text": "login we press look at that Facebook Twitter go to Facebook you need an",
    "start": "1546799",
    "end": "1557390"
  },
  {
    "text": "internet connection to connect to social providers connect it's actually kind of cool because you get to see that it's",
    "start": "1557390",
    "end": "1562880"
  },
  {
    "text": "creating this massive URL at the top and you don't have to care it sorts everything out for you so all I need to",
    "start": "1562880",
    "end": "1568520"
  },
  {
    "text": "do is get connected to the Wi-Fi those of you who are now torrenting stuff of why well internet",
    "start": "1568520",
    "end": "1575060"
  },
  {
    "text": "can play stop there is connected open go",
    "start": "1575060",
    "end": "1584270"
  },
  {
    "text": "enter enter I end up at Facebook",
    "start": "1584270",
    "end": "1591160"
  },
  {
    "text": "I end up with Facebook there it is",
    "start": "1596509",
    "end": "1603320"
  },
  {
    "text": "it says that auth demo which is my Facebook app wants to have access to my public profile and my illa email address",
    "start": "1603320",
    "end": "1609139"
  },
  {
    "text": "and since I do trust the creator of this application to be an awesome guy I'm gonna say yes",
    "start": "1609139",
    "end": "1614869"
  },
  {
    "text": "so continuous Chris Facebook issues a token sends that back to the system it",
    "start": "1614869",
    "end": "1621859"
  },
  {
    "text": "sends it back to a custom URL that you don't see but it basically has a different URL where it caches that and put that token uses that token to",
    "start": "1621859",
    "end": "1630169"
  },
  {
    "text": "authenticate the user it creates a user identity or a claims principle and signs",
    "start": "1630169",
    "end": "1635690"
  },
  {
    "text": "in the user and as you can see here it has let's see if I can do this I get Facebook issued claims that says here's",
    "start": "1635690",
    "end": "1643009"
  },
  {
    "text": "the name identifier which is the unique ID of me on Twitter or sorry on Facebook my email address my name my given name",
    "start": "1643009",
    "end": "1649759"
  },
  {
    "text": "my surname because those are the claims that Facebook will issue for me if I do",
    "start": "1649759",
    "end": "1654949"
  },
  {
    "text": "the same thing with with Twitter I'm",
    "start": "1654949",
    "end": "1661549"
  },
  {
    "text": "gonna get different claims which is kind of annoying because we do end up with depending on what I logged in with",
    "start": "1661549",
    "end": "1668389"
  },
  {
    "text": "actually I can show you that if we log out here I could do login if I log in with Twitter instead so depending on",
    "start": "1668389",
    "end": "1673399"
  },
  {
    "text": "what provider I use I'm gonna get different claims so I got get here I sign-in always prep your machine with",
    "start": "1673399",
    "end": "1687379"
  },
  {
    "text": "your passwords screw that okay so I'm not showing you Twitter and we're gonna use Facebook if I were to do Twitter",
    "start": "1687379",
    "end": "1695329"
  },
  {
    "text": "you'd get different claims just trust me on that one which is kind of annoying because I would continuously my",
    "start": "1695329",
    "end": "1700369"
  },
  {
    "text": "application have to go if the user has claimed a I can do this if the user has claimed B I can do this I would have to",
    "start": "1700369",
    "end": "1705709"
  },
  {
    "text": "do that all the time what we often end up doing is saying I won't have a standardized set of claims and",
    "start": "1705709",
    "end": "1710749"
  },
  {
    "text": "potentially I want to collect other information than what I get from my provider so I'm it's very likely that I",
    "start": "1710749",
    "end": "1716269"
  },
  {
    "text": "will be collecting information that my provider will never give to me so to get that extra information or correct the",
    "start": "1716269",
    "end": "1723440"
  },
  {
    "text": "information that you get from your provider there's a there's a pattern for that and if we go back here",
    "start": "1723440",
    "end": "1729930"
  },
  {
    "text": "we go back to the startup class what I'm gonna do is I'm gonna go down here to the bottom and I'm gonna add another",
    "start": "1729930",
    "end": "1737010"
  },
  {
    "text": "handler in here I'm gonna say add cookie again but I'm gonna name this handler",
    "start": "1737010",
    "end": "1743190"
  },
  {
    "text": "temp cookie so this is a customer ID it's the same handler it's the same code",
    "start": "1743190",
    "end": "1748260"
  },
  {
    "text": "as this thing here but instead of having this name it now has this name and then",
    "start": "1748260",
    "end": "1755850"
  },
  {
    "text": "I go into my Twitter one and I say options dot sign-in scheme and set that",
    "start": "1755850",
    "end": "1762330"
  },
  {
    "text": "to tame temp cookie I'll do the same thing to Facebook because Facebook and",
    "start": "1762330",
    "end": "1768720"
  },
  {
    "text": "Twitter will only authenticate user it will not sign in the user on its own so what happens once Facebook the Facebook",
    "start": "1768720",
    "end": "1775140"
  },
  {
    "text": "and sorry that was it needs to go there",
    "start": "1775140",
    "end": "1780290"
  },
  {
    "text": "they will only authenticate the user and then they will go and say once I have authenticated",
    "start": "1780290",
    "end": "1785429"
  },
  {
    "text": "please use this scheme here to sign in the user it defaults to cookie so that's fine but",
    "start": "1785429",
    "end": "1792390"
  },
  {
    "text": "in this case I'm actually telling it that once you've authenticated the user using Facebook or Twitter I want you to",
    "start": "1792390",
    "end": "1797850"
  },
  {
    "text": "sign in using this thing called temp cookie temp cookie doesn't actually sign in the user at all in the system it",
    "start": "1797850",
    "end": "1803910"
  },
  {
    "text": "creates a cookie with an authentication authenticated user but it doesn't sign the user in because the system expects",
    "start": "1803910",
    "end": "1810330"
  },
  {
    "text": "the user to be signed in using that handler so it's gonna be sort of semi signed in using a different cookie and",
    "start": "1810330",
    "end": "1817100"
  },
  {
    "text": "not really signed into the system but there is still a user for me to access",
    "start": "1817100",
    "end": "1822179"
  },
  {
    "text": "does that make sense ish well see when I start using it I think it makes more sense so what we're",
    "start": "1822179",
    "end": "1828300"
  },
  {
    "text": "gonna do here so I'm gonna make little change in my worth controller in my challenge external well change this and",
    "start": "1828300",
    "end": "1834240"
  },
  {
    "text": "say once you've registered or signed in on Facebook or Twitter can you please go",
    "start": "1834240",
    "end": "1840540"
  },
  {
    "text": "to auth slash register external instead like that and if we go down and we'll do",
    "start": "1840540",
    "end": "1849270"
  },
  {
    "text": "that here in register external what I'll",
    "start": "1849270",
    "end": "1855600"
  },
  {
    "text": "do is I'll go ahead and I'll take a look at the HP context and say can you please authenticate this user specifically",
    "start": "1855600",
    "end": "1862530"
  },
  {
    "text": "using temp cookie so normally the user will not be signed in here but there will still be a",
    "start": "1862530",
    "end": "1868300"
  },
  {
    "text": "temporary cookie for me with the user in it and then I say if I didn't get a user",
    "start": "1868300",
    "end": "1873310"
  },
  {
    "text": "back basically the user hasn't been temporarily signed in then hey just redirect the person to home",
    "start": "1873310",
    "end": "1878740"
  },
  {
    "text": "because I don't want to I don't want to mess with that then afterwards I take I",
    "start": "1878740",
    "end": "1883810"
  },
  {
    "text": "take to pray the principal basically the user currently user and I get the name identifier my unique ID from that",
    "start": "1883810",
    "end": "1890350"
  },
  {
    "text": "provider and I ask the authenticate external thing saying can you please go",
    "start": "1890350",
    "end": "1896080"
  },
  {
    "text": "and see if there's anyone in the system with this unique ID if there isn't one",
    "start": "1896080",
    "end": "1901840"
  },
  {
    "text": "of those in the earth if there isn't one of those in the system so basically the user has never been here before it goes and says oh sorry if there is",
    "start": "1901840",
    "end": "1908500"
  },
  {
    "text": "one of those and the users been here before please sign in the user using this user otherwise please go ahead and",
    "start": "1908500",
    "end": "1916450"
  },
  {
    "text": "show a view where the user can fill out their name and email this means that if I come back from Facebook oh and I",
    "start": "1916450",
    "end": "1923920"
  },
  {
    "text": "haven't been to the site before so I'm a new user I'm basically registering myself it will go and show me a name in",
    "start": "1923920",
    "end": "1929770"
  },
  {
    "text": "the email field that I can fill out and it will pre-populate the name and email fields with the value that is available",
    "start": "1929770",
    "end": "1936520"
  },
  {
    "text": "in the current identity so for Facebook it means that the values will be pre-populated because I do get them from",
    "start": "1936520",
    "end": "1942910"
  },
  {
    "text": "Twitter which I obviously can't show you I will not get the email address so I will only get a name and then the user",
    "start": "1942910",
    "end": "1950830"
  },
  {
    "text": "has to fill those out and they can change them and correct them as they want and then once they've filled out",
    "start": "1950830",
    "end": "1956770"
  },
  {
    "text": "that form and they're coming they're coming back and reposted out stuff we'll do sign in external know what I read",
    "start": "1956770",
    "end": "1966010"
  },
  {
    "text": "sorry register external post is what I want I got an action here where you post back",
    "start": "1966010",
    "end": "1972790"
  },
  {
    "text": "your credit your information your user name and your email address once again I",
    "start": "1972790",
    "end": "1977890"
  },
  {
    "text": "go and ask the system can you please authenticate the user using the temporary cookie not the real one",
    "start": "1977890",
    "end": "1982930"
  },
  {
    "text": "if there is no signed in temporary user then hey go back to home I don't really care if the model state isn't valid",
    "start": "1982930",
    "end": "1989860"
  },
  {
    "text": "which basically in this case means if they haven't filled out the fields show them the form again if everything is",
    "start": "1989860",
    "end": "1996310"
  },
  {
    "text": "filled out I my user service that can you please register a new user in the system here",
    "start": "1996310",
    "end": "2002519"
  },
  {
    "text": "there's a claim called name identifier for this user unique ID for that",
    "start": "2002519",
    "end": "2007679"
  },
  {
    "text": "provider can you please use that unique ID as the ID of the user and here is the",
    "start": "2007679",
    "end": "2013860"
  },
  {
    "text": "user's name and email and it adds the user to the database with that name that email and that unique identifier I'm",
    "start": "2013860",
    "end": "2022190"
  },
  {
    "text": "somewhat naive here because I'm just assuming that the unique identifier the name identifier is going to be different",
    "start": "2022190",
    "end": "2029010"
  },
  {
    "text": "for all providers in the entire world for this user they are not because Facebook is gonna have one and Twitter's",
    "start": "2029010",
    "end": "2035549"
  },
  {
    "text": "gonna have one absolutely but it's very possible that I were to build an application that you could use for",
    "start": "2035549",
    "end": "2040590"
  },
  {
    "text": "authentication that happen to give that identifier to a different user which then becomes scary because it means that",
    "start": "2040590",
    "end": "2046440"
  },
  {
    "text": "you will have two users being able to log in to your system from two different systems and they're two different people",
    "start": "2046440",
    "end": "2051929"
  },
  {
    "text": "but they end up being the same in the system so you probably want to have a little field here that says Facebook so",
    "start": "2051929",
    "end": "2058408"
  },
  {
    "text": "if the user is logged in with Facebook here's the Facebook ID if it's they've logged in with Twitter here's a new Twitter ID if they've logged in with",
    "start": "2058409",
    "end": "2063658"
  },
  {
    "text": "Gmail leaves the Gmail ID and all of that and finally I embody I call sign in",
    "start": "2063659",
    "end": "2068819"
  },
  {
    "text": "external sign in external is actually quite simple it has two two rows of code",
    "start": "2068819",
    "end": "2078560"
  },
  {
    "text": "it first it starts out by saying can you please sign out the user from the temp",
    "start": "2078560",
    "end": "2084060"
  },
  {
    "text": "cookie that will remove the temporary cookie and user is now not signed in at all and then it goes and says can you",
    "start": "2084060",
    "end": "2091500"
  },
  {
    "text": "please sign in the user and it just reuses the old sign in method to actually sign in the user using the",
    "start": "2091500",
    "end": "2096690"
  },
  {
    "text": "proper cookie the real one and after that the user is signed into the system so if we save this we go back here we do",
    "start": "2096690",
    "end": "2103140"
  },
  {
    "text": "login actually it's nicer to do it in register so what I'll do is I'm just",
    "start": "2103140",
    "end": "2108210"
  },
  {
    "text": "gonna go down here so register will do",
    "start": "2108210",
    "end": "2112880"
  },
  {
    "text": "we'll just do that I'm just drawing",
    "start": "2115780",
    "end": "2121030"
  },
  {
    "text": "these out the handlers on the register page as well so if we go to register with registration stuff Facebook Twitter",
    "start": "2121030",
    "end": "2127120"
  },
  {
    "text": "I go Facebook I get sent over to Facebook Facebook dan says I already know who you are cuz you're already",
    "start": "2127120",
    "end": "2133240"
  },
  {
    "text": "signed in so I get single sign on because I've already approved this application for authentication there is",
    "start": "2133240",
    "end": "2143380"
  },
  {
    "text": "don't ask why and I end up at this page here and here I can collect all these I",
    "start": "2143380",
    "end": "2148720"
  },
  {
    "text": "can get them to correct their information I can get them to add information that's not there and you can get them to put in their address or",
    "start": "2148720",
    "end": "2154210"
  },
  {
    "text": "whatever you need and right now if I were to go to the home page or the user information page it would treat me as",
    "start": "2154210",
    "end": "2159880"
  },
  {
    "text": "not signed in because I'm signed in using that temporary cookie if I go and press register here it then goes and",
    "start": "2159880",
    "end": "2166720"
  },
  {
    "text": "registers may using the information in temporary cookie adds me to the local system and it adds these claims here and",
    "start": "2166720",
    "end": "2173530"
  },
  {
    "text": "I get my default claims the ones that I want and if I log out and I go log in again and I log in using Facebook you'll",
    "start": "2173530",
    "end": "2182170"
  },
  {
    "text": "see that it now corrects the claims for me so I don't get the Facebook claims anymore I get my custom claims instead",
    "start": "2182170",
    "end": "2187600"
  },
  {
    "text": "so I get this standardized set of claims from application ok does that make sense",
    "start": "2187600",
    "end": "2195930"
  },
  {
    "text": "how many of you are in love with social authentication and will use that for the rest of your life and that's gonna save",
    "start": "2195930",
    "end": "2201820"
  },
  {
    "text": "the world a few I like you guys for the rest of you how many of you are using",
    "start": "2201820",
    "end": "2208870"
  },
  {
    "text": "Azure Active Directory today to do authentication how many of you love Active Directory it's one two hands okay",
    "start": "2208870",
    "end": "2217030"
  },
  {
    "text": "I thought I was gonna show you Active Directory but I thought I make it make a little twist on it so I'm gonna use a",
    "start": "2217030",
    "end": "2222370"
  },
  {
    "text": "sure ad b2c so Azure ad b2c is ash your Active Directory business-to-consumer",
    "start": "2222370",
    "end": "2228430"
  },
  {
    "text": "which basically means it's an accurate assure Active Directory but then it's actually not natural Active Directory it's kind of an Active Directory behind",
    "start": "2228430",
    "end": "2236020"
  },
  {
    "text": "the scenes but it's not being treated like one so you can't use it quite as",
    "start": "2236020",
    "end": "2241450"
  },
  {
    "text": "you would with an Active Directory but it adds features like social logins so what you get is you get an Active",
    "start": "2241450",
    "end": "2247360"
  },
  {
    "text": "Directory and you get endpoints that are open ID connect specific and they allow you to configure your service",
    "start": "2247360",
    "end": "2253719"
  },
  {
    "text": "and say I want users to be able to log in with local logins I want to have users logging in using Facebook and",
    "start": "2253719",
    "end": "2259509"
  },
  {
    "text": "Twitter and I want them to be able to be registered there a user account I want them to be able to edit their user",
    "start": "2259509",
    "end": "2264609"
  },
  {
    "text": "account and they take care of all of that all you need to do is add integration with that service and then",
    "start": "2264609",
    "end": "2270460"
  },
  {
    "text": "they take care of logging in users verifying email addresses connect collecting extra information all the",
    "start": "2270460",
    "end": "2276309"
  },
  {
    "text": "stuff that I did manually in my previous version so I have an ad b2c set up in",
    "start": "2276309",
    "end": "2281769"
  },
  {
    "text": "the cloud and it's configured and done and I'm actually not going to show you",
    "start": "2281769",
    "end": "2287859"
  },
  {
    "text": "that if you want to see more of that that Pluralsight course will we'll walk you through setting it up as well but",
    "start": "2287859",
    "end": "2292900"
  },
  {
    "text": "I'm more interested in the client side the a spirit core stuff so once again I have an identical application and if we",
    "start": "2292900",
    "end": "2301630"
  },
  {
    "text": "look at that it's a little bit different we'll see that in the the auth",
    "start": "2301630",
    "end": "2306670"
  },
  {
    "text": "controller but once again I'll go back to startup because this is where one starts and we're going to service this",
    "start": "2306670",
    "end": "2312609"
  },
  {
    "text": "first thing services dot authentication step one step two add open add open ID",
    "start": "2312609",
    "end": "2323920"
  },
  {
    "text": "connect so a sure ad b2c supports open ID Connect which is a standard interface",
    "start": "2323920",
    "end": "2328960"
  },
  {
    "text": "for authenticating users and I need to give it a name for my handler in this",
    "start": "2328960",
    "end": "2334479"
  },
  {
    "text": "case I am weirdly enough gonna name it b2c underscore b2c underscore one",
    "start": "2334479",
    "end": "2342579"
  },
  {
    "text": "underscore sign underscore in and it needs to be configured there is a thing",
    "start": "2342579",
    "end": "2350950"
  },
  {
    "text": "with Azure ad b2c it's the fact that it's not a hundred percent open ID Connect compliant",
    "start": "2350950",
    "end": "2357539"
  },
  {
    "text": "because Open ID Connect builds on the idea that you can authenticate users and that's all you can do Microsoft wants to",
    "start": "2357539",
    "end": "2363549"
  },
  {
    "text": "add other features to it like editing profile information and registering users and signing up you signing up and",
    "start": "2363549",
    "end": "2368979"
  },
  {
    "text": "signing out and signing in and all that so what they've done is they've said we're gonna have what we call profiles",
    "start": "2368979",
    "end": "2375069"
  },
  {
    "text": "so a profile is an action that I can do so you can have a sign-in profile a sign out profile sign in or up",
    "start": "2375069",
    "end": "2382130"
  },
  {
    "text": "profile a edit account profile and those profiles basically define define what",
    "start": "2382130",
    "end": "2388579"
  },
  {
    "text": "the user can do but you need to treat them as different end points and different handlers in your clients which",
    "start": "2388579",
    "end": "2395240"
  },
  {
    "text": "is kind of a pain so the reason that I'm naming this thing here b2c underscore",
    "start": "2395240",
    "end": "2400700"
  },
  {
    "text": "one underscore sign underscore in is because my profile in the cloud is called b2c underscore one underscore",
    "start": "2400700",
    "end": "2407900"
  },
  {
    "text": "sign underscore in for the sign in profile Chris why the hell would you",
    "start": "2407900",
    "end": "2414289"
  },
  {
    "text": "name it like that I didn't b2c underscore on one underscore is prepended by Microsoft for",
    "start": "2414289",
    "end": "2421519"
  },
  {
    "text": "you why I have no idea but it's there so you have to use it so what I'm doing is",
    "start": "2421519",
    "end": "2427490"
  },
  {
    "text": "I'm naming my handler the same thing is my profile and then I need to configure my options but I'm gonna have several",
    "start": "2427490",
    "end": "2434359"
  },
  {
    "text": "profiles so to be able to support that I'm actually gonna go ahead and say ad b2c con options config that's the one so",
    "start": "2434359",
    "end": "2444160"
  },
  {
    "text": "I'm creating this helper method here and all it does it basically it takes the options parameter the configuration and",
    "start": "2444160",
    "end": "2452299"
  },
  {
    "text": "the policy that I want to use then it creates the metadata address and says",
    "start": "2452299",
    "end": "2457609"
  },
  {
    "text": "you can find the metadata for this endpoint at this location here with the policy appended at the end then I tell",
    "start": "2457609",
    "end": "2465440"
  },
  {
    "text": "it that here's my client ID which you get from the cloud I want to get an ID token I want the user to be signed I",
    "start": "2465440",
    "end": "2471589"
  },
  {
    "text": "signed out or redirected sorry to slash after compare signing out when the user",
    "start": "2471589",
    "end": "2477500"
  },
  {
    "text": "comes back from Asher and having been authenticated please redirect the user to this endpoint here and when they sign",
    "start": "2477500",
    "end": "2485660"
  },
  {
    "text": "out please redirect to this your endpoint here these are endpoints that you don't touch though these are handled",
    "start": "2485660",
    "end": "2491299"
  },
  {
    "text": "by the authentication system but they need to be there they need to have specific URLs and it and callback paths",
    "start": "2491299",
    "end": "2497690"
  },
  {
    "text": "have to be unique per policy so that's why I'm basically saying sign in - oh I",
    "start": "2497690",
    "end": "2503390"
  },
  {
    "text": "DC - policy name and also the name claim",
    "start": "2503390",
    "end": "2508460"
  },
  {
    "text": "that comes back from Asher has the different standards I have to say that the user's name claim comes back with a",
    "start": "2508460",
    "end": "2514069"
  },
  {
    "text": "claim type name not this HTTP colon slash la blah which is that long so I need to configure that once I",
    "start": "2514069",
    "end": "2521600"
  },
  {
    "text": "got those configuration properties in place I can go and say configure OpenID",
    "start": "2521600",
    "end": "2526790"
  },
  {
    "text": "Connect options and I can pass in my options and my policy which is going to be that so I got my sign-in policy up",
    "start": "2526790",
    "end": "2534470"
  },
  {
    "text": "and running there are then two other policies that I want to have so I'm",
    "start": "2534470",
    "end": "2539660"
  },
  {
    "text": "gonna go ahead and say which is the",
    "start": "2539660",
    "end": "2545450"
  },
  {
    "text": "wonder one sorry ad b2c that's the one sorry so I create two",
    "start": "2545450",
    "end": "2550640"
  },
  {
    "text": "other policies one for sign in or up which is basically a sign in form with a button that says register and then I",
    "start": "2550640",
    "end": "2557450"
  },
  {
    "text": "create one for sign up which is just for registration make sense yes okay once",
    "start": "2557450",
    "end": "2565610"
  },
  {
    "text": "I'm done with that I go and add cookie all of these providers will authenticate",
    "start": "2565610",
    "end": "2573530"
  },
  {
    "text": "the users they will not sign the user into the system you need cookie authentication to actually keep a",
    "start": "2573530",
    "end": "2579650"
  },
  {
    "text": "persistent sign in for that user so I add cookie at the end the authentication configuration here is a",
    "start": "2579650",
    "end": "2586070"
  },
  {
    "text": "little bit more complicated it's going to be able to see both defaults so in",
    "start": "2586070",
    "end": "2592730"
  },
  {
    "text": "this case instead of just passing in like I did before cookie authentication defaults dot authentication scheme I'm",
    "start": "2592730",
    "end": "2599270"
  },
  {
    "text": "splitting out the different options saying that when the user wants to when you sign in the user basically once",
    "start": "2599270",
    "end": "2605840"
  },
  {
    "text": "they've been authenticated and they cook your authentic or I need to sign in the user used to cook your authentication",
    "start": "2605840",
    "end": "2612100"
  },
  {
    "text": "when you want to sign out unless you specifically tell the system what provider to sign out from sign out from",
    "start": "2612100",
    "end": "2618920"
  },
  {
    "text": "the cookie authentication if the user is going to a page where they don't have",
    "start": "2618920",
    "end": "2624500"
  },
  {
    "text": "access and they need to be automatically challenged to sign in please sign them in and use the the handler called b2c",
    "start": "2624500",
    "end": "2632330"
  },
  {
    "text": "unscrew one underscore sign underscore in underscore our unscrew up you don't",
    "start": "2632330",
    "end": "2637430"
  },
  {
    "text": "want to have that in a meeting you want to have shorter stuff and finally a default authentication scheme means that",
    "start": "2637430",
    "end": "2643730"
  },
  {
    "text": "when the user arrives at the application when the request comes in from his browser Play",
    "start": "2643730",
    "end": "2649070"
  },
  {
    "text": "use this provider the cookie authentication one to verify that user is signed in so we can configure all",
    "start": "2649070",
    "end": "2656030"
  },
  {
    "text": "these in different ways and have different providers or handlers or schemes for different things in this",
    "start": "2656030",
    "end": "2661850"
  },
  {
    "text": "case the only one I really want to change is the default challenge one and all that once is going to be cookie",
    "start": "2661850",
    "end": "2667490"
  },
  {
    "text": "authentication and finally before I forget it app dot use authentication to make sure",
    "start": "2667490",
    "end": "2674630"
  },
  {
    "text": "that the user actually gets authenticated the services that you register up here doesn't actually have",
    "start": "2674630",
    "end": "2680120"
  },
  {
    "text": "access to anything in the system it will never know when to run properly unless you add this thing here that make sure",
    "start": "2680120",
    "end": "2686780"
  },
  {
    "text": "that everything works so how do we do this if we look at the controllers well",
    "start": "2686780",
    "end": "2692930"
  },
  {
    "text": "first of all my auth controller is way simpler in this case there's only login logout and register because I don't have",
    "start": "2692930",
    "end": "2699620"
  },
  {
    "text": "any forms anymore Microsoft handles all of that for me this is all I need so let's look at log in so signing in a",
    "start": "2699620",
    "end": "2707240"
  },
  {
    "text": "user here is gonna be ad b2c challenge",
    "start": "2707240",
    "end": "2713140"
  },
  {
    "text": "last one and what I need here if I say",
    "start": "2713140",
    "end": "2718670"
  },
  {
    "text": "please challenge the user and I want to challenge the user using b2c underscore",
    "start": "2718670",
    "end": "2724070"
  },
  {
    "text": "one b2c underscore one underscore sign underscore in like that and after the",
    "start": "2724070",
    "end": "2732380"
  },
  {
    "text": "redirect please redirect or design in place a redirect user to user info same",
    "start": "2732380",
    "end": "2738320"
  },
  {
    "text": "thing as before the only difference is that I in this case have to specifically tell it what scheme that I want to use",
    "start": "2738320",
    "end": "2743900"
  },
  {
    "text": "to sign in the user we go to to register I do exactly the same thing I send a",
    "start": "2743900",
    "end": "2754880"
  },
  {
    "text": "challenge but instead of sending them to sign in I send them to sign up and",
    "start": "2754880",
    "end": "2761950"
  },
  {
    "text": "finally signing out a user is actually quite simple first of all we do the",
    "start": "2761950",
    "end": "2767420"
  },
  {
    "text": "await HCP context don't sign out a thing",
    "start": "2767420",
    "end": "2772580"
  },
  {
    "text": "like that that will sign you out from the default sign in sign out scheme which is cookie authentication and then",
    "start": "2772580",
    "end": "2781720"
  },
  {
    "text": "nope that's not the one I want I want to have sorry ad b2c sign that's the one I",
    "start": "2785150",
    "end": "2791940"
  },
  {
    "text": "want so here comes a little kicker I need to sign out the user using the same",
    "start": "2791940",
    "end": "2797880"
  },
  {
    "text": "scheme that the user signed in with and there's a cool and that's actually the",
    "start": "2797880",
    "end": "2803370"
  },
  {
    "text": "reason that I named my schemes or my handlers here the same thing as my profiles in Azure because when Asscher",
    "start": "2803370",
    "end": "2811710"
  },
  {
    "text": "issues the cookie or issues the authentication they will include a claim that is called TFP the TFP claim will",
    "start": "2811710",
    "end": "2819450"
  },
  {
    "text": "contain the name of the profile that was used when signing in this user so by",
    "start": "2819450",
    "end": "2825150"
  },
  {
    "text": "when the user signs out I go and look at the TFP claim to find out what was the name of the profile the user used when",
    "start": "2825150",
    "end": "2831660"
  },
  {
    "text": "signing in and then I sell the system can you please sign out the user with that same with a scheme with the same",
    "start": "2831660",
    "end": "2838890"
  },
  {
    "text": "name as that profile does that make sense so if the user signs in using b2c underscore one underscore sign on the",
    "start": "2838890",
    "end": "2844680"
  },
  {
    "text": "screen they will sign out using that same thing so if we try this out you'll see how it works we'll go register",
    "start": "2844680",
    "end": "2851280"
  },
  {
    "text": "because I don't have a user there's a",
    "start": "2851280",
    "end": "2856350"
  },
  {
    "text": "reason I don't do a sure demos anymore I hate internet so I've got different things here",
    "start": "2856350",
    "end": "2861360"
  },
  {
    "text": "I've got email sign up we've got Facebook we've got Twitter because all of this is configured I'm not going to Twitter but I've configured this in",
    "start": "2861360",
    "end": "2867060"
  },
  {
    "text": "Asscher so they have all the information if I go email signup I might regret this",
    "start": "2867060",
    "end": "2872310"
  },
  {
    "text": "but let's try it I'm gonna say Chris at 59 NORTHCOM that's my address no I'm apparently not I'm gonna say Chris",
    "start": "2872310",
    "end": "2877950"
  },
  {
    "text": "that's the one send verification code I press that I press that it goes away",
    "start": "2877950",
    "end": "2886460"
  },
  {
    "text": "scary thing here is if you're on stage and you start typing in your password field after you click that button when",
    "start": "2886460",
    "end": "2892710"
  },
  {
    "text": "the verification code thing pops up it actually takes focus you start typing your password in that field in clear",
    "start": "2892710",
    "end": "2898800"
  },
  {
    "text": "text it is brilliant I might have done that a few times so we'll do password",
    "start": "2898800",
    "end": "2905460"
  },
  {
    "text": "exclamation mark and Microsoft is nice",
    "start": "2905460",
    "end": "2911760"
  },
  {
    "text": "enough to verify my email address so I need to pull up my phone I need to my email client and I need to refresh my",
    "start": "2911760",
    "end": "2918930"
  },
  {
    "text": "emails Microsoft on behalf of both demo your",
    "start": "2918930",
    "end": "2924359"
  },
  {
    "text": "code is zero one nine three four six",
    "start": "2924359",
    "end": "2929750"
  },
  {
    "text": "verify code nope I don't want to say that and display name is gonna be zero",
    "start": "2929750",
    "end": "2936630"
  },
  {
    "text": "call creates so Microsoft handles all of that for me they will do the verification the whole thing that I put",
    "start": "2936630",
    "end": "2943859"
  },
  {
    "text": "my display name you can ask it to collect any information that you want and they will make sure to add fields",
    "start": "2943859",
    "end": "2949020"
  },
  {
    "text": "for them to input that and they will make sure it's populating all of that so they will give you all of the UI that",
    "start": "2949020",
    "end": "2955410"
  },
  {
    "text": "you need and then I get logged in like this and you can see it issues it using this issue it is really hard to do that",
    "start": "2955410",
    "end": "2961319"
  },
  {
    "text": "backwards this issue are here which is my end point my usher ad b2c and I get",
    "start": "2961319",
    "end": "2967290"
  },
  {
    "text": "the claims name identifier I get an object identifier which is the users object ID in the in da D my email I get",
    "start": "2967290",
    "end": "2974640"
  },
  {
    "text": "a claim that says new user so that claim is issued when they use of registers so I can treat them differently I get my",
    "start": "2974640",
    "end": "2980280"
  },
  {
    "text": "name and as you can see I get a TFP claim saying the user signed in using b2c honest with one underscore sign on",
    "start": "2980280",
    "end": "2985890"
  },
  {
    "text": "this crop so when I sign out now it's going to look at that TFP claim it's",
    "start": "2985890",
    "end": "2991200"
  },
  {
    "text": "gonna figure out which handler to use you didn't see it but I was actually sent over to a charade a to sign out",
    "start": "2991200",
    "end": "2998760"
  },
  {
    "text": "there as well so I do get signed out disabling single sign-on if you don't",
    "start": "2998760",
    "end": "3003859"
  },
  {
    "text": "want to have that you want to keep single sign-on you can sign out the user locally and as soon as they click login they will be redirected and",
    "start": "3003859",
    "end": "3010160"
  },
  {
    "text": "automatically signed it back in again which is not what most clients want okay",
    "start": "3010160",
    "end": "3016010"
  },
  {
    "text": "you've seen ASHRAE db2 say I'm a fan but there are other options one option - I",
    "start": "3016010",
    "end": "3022940"
  },
  {
    "text": "very often put in is identity server so identity server is a tool built by brock",
    "start": "3022940",
    "end": "3029569"
  },
  {
    "text": "allen and dominic buyer and it's kind of cool because you get an authentication",
    "start": "3029569",
    "end": "3035329"
  },
  {
    "text": "provider an identity provider out of the box it said you just get it off nougat you install it in your",
    "start": "3035329",
    "end": "3041000"
  },
  {
    "text": "application it doesn't have a UI by default so if we go over here and we look at the the code for it by default",
    "start": "3041000",
    "end": "3048349"
  },
  {
    "text": "you go in and you configure your identity server here to have like these are the different things I want to configure it with here is a",
    "start": "3048349",
    "end": "3054380"
  },
  {
    "text": "test user here is some identity resources so all of the configuration that I need is being done in the",
    "start": "3054380",
    "end": "3059960"
  },
  {
    "text": "services here and then you just add it to your request pipeline by calling app to use identity server that will give",
    "start": "3059960",
    "end": "3066829"
  },
  {
    "text": "you an open ID connect endpoint to authenticate users with it will not give you UI so to get a UI which is what I've",
    "start": "3066829",
    "end": "3073670"
  },
  {
    "text": "got here you need to go to github and download it and it will give you an MVC application with the views so you can go",
    "start": "3073670",
    "end": "3080599"
  },
  {
    "text": "in and customize all of the UI of it and how it works and everything so it's not an external identity provider that you",
    "start": "3080599",
    "end": "3086359"
  },
  {
    "text": "control completely if you want to integrate with that which is what I want",
    "start": "3086359",
    "end": "3091640"
  },
  {
    "text": "to do I create another web here so we'll go set that I startup go control f5 I'll",
    "start": "3091640",
    "end": "3100400"
  },
  {
    "text": "go and I'll do the same thing as I've done before we start up and start up we'll do services dot ad authentication",
    "start": "3100400",
    "end": "3109569"
  },
  {
    "text": "we'll go ahead and do add open ID connect because that's what we're going to use for identity server and then",
    "start": "3109569",
    "end": "3117369"
  },
  {
    "text": "cookie for the open ID connect stuff we won't have some configuration so I'm",
    "start": "3117369",
    "end": "3123470"
  },
  {
    "text": "going to put in some config here telling it this is where you'll find the identity server we are identity provider",
    "start": "3123470",
    "end": "3129049"
  },
  {
    "text": "localhost port 5000 I'm doing it on HTTP not HTTP if you ever ever ever do that I",
    "start": "3129049",
    "end": "3137059"
  },
  {
    "text": "will hunt you down I will find you while you sleep and terrorize you like Freddy Krueger it should always you don't want",
    "start": "3137059",
    "end": "3145099"
  },
  {
    "text": "to send credentials over HTTP so you need htps ID specifically have to go in",
    "start": "3145099",
    "end": "3151339"
  },
  {
    "text": "and configure it to say I don't require HTTPS I don't have HCBS because I'm doing this demo locally and it causes",
    "start": "3151339",
    "end": "3158240"
  },
  {
    "text": "some issues for me moving it around but for everything else leave that thing and use SSL if you don't want to pay for it",
    "start": "3158240",
    "end": "3164539"
  },
  {
    "text": "let's encrypt is free start doing SSL on everything I give you a client ID so the",
    "start": "3164539",
    "end": "3170809"
  },
  {
    "text": "client that that's configured an identity server I tell it where to redirect after the user is signed out I",
    "start": "3170809",
    "end": "3177759"
  },
  {
    "text": "have this thing here which is a bit of a weird one say tokens means that when the user comes",
    "start": "3177759",
    "end": "3184960"
  },
  {
    "text": "back after having been authenticated please save the original token together with this user in a cookie and have that",
    "start": "3184960",
    "end": "3192730"
  },
  {
    "text": "for future use if you don't do that identity server when you sign out",
    "start": "3192730",
    "end": "3197950"
  },
  {
    "text": "identity server won't actually redirect you back to your application again it will just stop there because it doesn't",
    "start": "3197950",
    "end": "3203529"
  },
  {
    "text": "know who you are so the token that you get when you sign in needs to be passed to identity server as a hint token hint",
    "start": "3203529",
    "end": "3209859"
  },
  {
    "text": "when you sign out otherwise signing out and automatically redirecting back to your application doesn't work so this",
    "start": "3209859",
    "end": "3216010"
  },
  {
    "text": "thing is to be set to true and finally I have an event thing here and I listen to on remote failure so if something goes",
    "start": "3216010",
    "end": "3223480"
  },
  {
    "text": "wrong while logging in do this basically redirect user / own remote failure is",
    "start": "3223480",
    "end": "3228910"
  },
  {
    "text": "the same thing as the user presses cancel when signing in I don't find that",
    "start": "3228910",
    "end": "3233980"
  },
  {
    "text": "to be a remote failure but it's considered that so if you don't add this if the user goes and says I want to log",
    "start": "3233980",
    "end": "3240519"
  },
  {
    "text": "in and then presses cancel your application dies so you need this thing we've got my cookie in there I've got my",
    "start": "3240519",
    "end": "3248079"
  },
  {
    "text": "I identify or my open ID connect so what I need up here is ideas or defaults do",
    "start": "3248079",
    "end": "3256990"
  },
  {
    "text": "pretty much the same thing I did before set it up to use cookie for everything but default challenge so if I go to a",
    "start": "3256990",
    "end": "3263319"
  },
  {
    "text": "web page and it needs to challenge user automatically used to open ID Connect one as you can see your open I reconnect",
    "start": "3263319",
    "end": "3268930"
  },
  {
    "text": "defaults just as with cookie authentication defaults and finally we need to go back in here and we need to",
    "start": "3268930",
    "end": "3274990"
  },
  {
    "text": "say app dot use authentication to actually enable authentication in our system once we've got that we that's",
    "start": "3274990",
    "end": "3283240"
  },
  {
    "text": "kind of same as I've done three times before and if we go over to Earth controller we'll see that I've got the",
    "start": "3283240",
    "end": "3288880"
  },
  {
    "text": "same as without your ID basically I've got the login and logout I don't have",
    "start": "3288880",
    "end": "3294220"
  },
  {
    "text": "register because register is not supported there's no way to do registration out of the box without empty server it will authenticate user",
    "start": "3294220",
    "end": "3301150"
  },
  {
    "text": "it will not register users so I don't need a register endpoint which is kinda nice on the other hand users can",
    "start": "3301150",
    "end": "3306789"
  },
  {
    "text": "register to my system which is kind of crap and in here we'll do idea challenge",
    "start": "3306789",
    "end": "3313430"
  },
  {
    "text": "why the ID DS challenge that's one I want so challenging is the same as",
    "start": "3313430",
    "end": "3320520"
  },
  {
    "text": "before I just send back a child when they want to log in challenge San Juan it defaults since the challenge default",
    "start": "3320520",
    "end": "3328410"
  },
  {
    "text": "scheme is open and you connect it will use that and for signing out I will just",
    "start": "3328410",
    "end": "3334950"
  },
  {
    "text": "do oh yes that's one same as I did with",
    "start": "3334950",
    "end": "3342680"
  },
  {
    "text": "Usher ad b2c first I sign out my local cookie using a shippi context of sign",
    "start": "3342680",
    "end": "3348359"
  },
  {
    "text": "out async and then I sign out using the open ID connect one and that will redirect me to the identity server to",
    "start": "3348359",
    "end": "3355200"
  },
  {
    "text": "get a proper sign out there otherwise you'll have signed a single sign on again with that in place control that",
    "start": "3355200",
    "end": "3363000"
  },
  {
    "text": "five got five minutes I got one more demo to go application boots up I press",
    "start": "3363000",
    "end": "3369869"
  },
  {
    "text": "login you'll see up here in the address bar it redirects me to it redirects me",
    "start": "3369869",
    "end": "3376140"
  },
  {
    "text": "to port 5000 which is my identity server I get this identity server for UI which",
    "start": "3376140",
    "end": "3382049"
  },
  {
    "text": "is a default one as I said fully styler ball user name your call password test",
    "start": "3382049",
    "end": "3389630"
  },
  {
    "text": "login I get redirected back and I have this user signed in I have this",
    "start": "3389630",
    "end": "3396089"
  },
  {
    "text": "configured here to issue my stuff as my identity server which is not a great name and you get a bunch of claims",
    "start": "3396089",
    "end": "3401520"
  },
  {
    "text": "claims it's up to you so you define what claims the identity server should issue for you you have full control over",
    "start": "3401520",
    "end": "3406770"
  },
  {
    "text": "everything because it's your identity server one thing left here as I want to",
    "start": "3406770",
    "end": "3412770"
  },
  {
    "text": "demo is there's a spine here and by spa I mean there's a JavaScript in here I think that's what you call a spa right",
    "start": "3412770",
    "end": "3418260"
  },
  {
    "text": "it's a web page with a javascript in it it is called equals an API and I call",
    "start": "3418260",
    "end": "3423990"
  },
  {
    "text": "the API and I get ID one back that's fine because my API is in the same application on the same port on the same",
    "start": "3423990",
    "end": "3430740"
  },
  {
    "text": "host it means that it automatically or that authenticates the request using a cookie because it will send the",
    "start": "3430740",
    "end": "3437790"
  },
  {
    "text": "authentication cookie to the API problem with authenticating using cookies with API is that we can get cross-site",
    "start": "3437790",
    "end": "3443910"
  },
  {
    "text": "request forgeries that we causes problems so what we want to do is we don't when we're doing API is we want to make sure",
    "start": "3443910",
    "end": "3450030"
  },
  {
    "text": "we don't use cookie authentication if they're on the same domain so instead we",
    "start": "3450030",
    "end": "3455310"
  },
  {
    "text": "want to use tokens JSON web token bearer tokens and to do that we can go back to",
    "start": "3455310",
    "end": "3462600"
  },
  {
    "text": "our startup class we'll add another one of these we'll do add JWT bearer like",
    "start": "3462600",
    "end": "3467880"
  },
  {
    "text": "that actually I'm gonna cheat so we're gonna do to make this faster ah that's",
    "start": "3467880",
    "end": "3474300"
  },
  {
    "text": "the one that's the one and I want IDs J that's one so I'm",
    "start": "3474300",
    "end": "3481590"
  },
  {
    "text": "adding another handler here saying add jason web token bearer handler once again I tell it to not use HTTPS",
    "start": "3481590",
    "end": "3488369"
  },
  {
    "text": "don't ever do that and then I tell it you have to be have access to API one to",
    "start": "3488369",
    "end": "3493980"
  },
  {
    "text": "be able to access this thing so I have another handler that will make sure that if that is requested it will verify an",
    "start": "3493980",
    "end": "3500220"
  },
  {
    "text": "access token that is being sent through a header instead of the cookie if I go",
    "start": "3500220",
    "end": "3506700"
  },
  {
    "text": "and test this now it's still gonna work because I still out sent gating using the cookie because my API if we look up",
    "start": "3506700",
    "end": "3513900"
  },
  {
    "text": "here has an authorized attributes that just says make sure the user is authorized I don't care how just make",
    "start": "3513900",
    "end": "3520800"
  },
  {
    "text": "sure it's your authorized if we change that and we changed it to authentication schemes and we say JDT defaults dot",
    "start": "3520800",
    "end": "3530310"
  },
  {
    "text": "authentication scheme I'm now telling the API that only authenticated users",
    "start": "3530310",
    "end": "3535640"
  },
  {
    "text": "authorized user sorry authenticated using the bearer token if I take this I",
    "start": "3535640",
    "end": "3541800"
  },
  {
    "text": "go back out here and I press call API it freezes for a while and then it gets 401",
    "start": "3541800",
    "end": "3548550"
  },
  {
    "text": "unauthorized that's kind of sweet I get it for a one I've secured my API but I",
    "start": "3548550",
    "end": "3554130"
  },
  {
    "text": "can't actually call my API kind of sucks so what we can do then is I can go to",
    "start": "3554130",
    "end": "3559410"
  },
  {
    "text": "home spa I'm just gonna quickly do this there's more to learn about this but",
    "start": "3559410",
    "end": "3564540"
  },
  {
    "text": "what I'm doing is I'm gonna add a sign-in button and a sign out button and in my API here man is some functionality",
    "start": "3564540",
    "end": "3573780"
  },
  {
    "text": "to sign in so basically when the user opens the page I use a client library called oh I DC client",
    "start": "3573780",
    "end": "3580530"
  },
  {
    "text": "jas which is written by Brock Allen which is an open ID client for JavaScript using that I can say please",
    "start": "3580530",
    "end": "3588150"
  },
  {
    "text": "go when the page loads please go and get a user and it's going to look for a user in local session storage if there's not",
    "start": "3588150",
    "end": "3595140"
  },
  {
    "text": "no such user it doesn't do anything but when I call sign in click the sign-in button it uses the OID C client to",
    "start": "3595140",
    "end": "3602340"
  },
  {
    "text": "basically sign in to use using a pop-up sign out sign up use using a pop-up and whenever I do an HTTP call in this case",
    "start": "3602340",
    "end": "3610200"
  },
  {
    "text": "I'll do fetch I add a header here called authorization with bearer and the users access token",
    "start": "3610200",
    "end": "3616620"
  },
  {
    "text": "so I'm using access tokens instead of my cookie and if i refresh this page you",
    "start": "3616620",
    "end": "3624060"
  },
  {
    "text": "will now see I get a few buttons if I call the API not know access because it",
    "start": "3624060",
    "end": "3629100"
  },
  {
    "text": "doesn't do cookies if I press sign in it's gonna pop up a window I get automatic signed in because",
    "start": "3629100",
    "end": "3635130"
  },
  {
    "text": "I'm already signed in at the identity server you don't even need the pop-up you can actually do it silently so the",
    "start": "3635130",
    "end": "3640200"
  },
  {
    "text": "user doesn't see that you're doing a sign-in as long as they're signed in on that enter provider if I call the API it",
    "start": "3640200",
    "end": "3645780"
  },
  {
    "text": "goes ID 1 because it's now sending an access token in an orthros ation header and we got a token authentication and",
    "start": "3645780",
    "end": "3652020"
  },
  {
    "text": "even if I log out I come back here I look at my spa page I'm still signed in",
    "start": "3652020",
    "end": "3658470"
  },
  {
    "text": "because there's a cooked access token in my session storage that it uses to authenticate user and if I call the API",
    "start": "3658470",
    "end": "3664530"
  },
  {
    "text": "even though I don't have the cookie I can still use this thing here so we can mix and match or authentication as well",
    "start": "3664530",
    "end": "3670800"
  },
  {
    "text": "having that said moving your API to a different domain name or a subdomain is",
    "start": "3670800",
    "end": "3675900"
  },
  {
    "text": "better for security reasons but if you're gonna mix put them in the same make sure that you have web token",
    "start": "3675900",
    "end": "3681480"
  },
  {
    "text": "authentication on the API and cook your authentication on your applique or web application code is available there if",
    "start": "3681480",
    "end": "3695640"
  },
  {
    "text": "you have any questions I will be around if you have more want more information you want to see how to configure",
    "start": "3695640",
    "end": "3700680"
  },
  {
    "text": "identity server there are courses on that specifically on that course of course there's information on doing",
    "start": "3700680",
    "end": "3705780"
  },
  {
    "text": "exactly this demo from start with all of the configuration as well other than",
    "start": "3705780",
    "end": "3711060"
  },
  {
    "text": "that thank you so much for listening and I hope you have a good day oh if you liked the session please fill",
    "start": "3711060",
    "end": "3717809"
  },
  {
    "text": "out an eval or drop a green note if you didn't like the session come up to me talk to me I'll explain why it was awesome and then you'll drop a green",
    "start": "3717809",
    "end": "3724410"
  },
  {
    "text": "note on the way out right [Applause]",
    "start": "3724410",
    "end": "3730849"
  }
]