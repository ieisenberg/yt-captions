[
  {
    "start": "0",
    "end": "40000"
  },
  {
    "text": "hi good afternoon and welcome to this talk about board support packages for yocto project",
    "start": "6160",
    "end": "14639"
  },
  {
    "text": "so first of all how many of you are users of yocto",
    "start": "14639",
    "end": "21119"
  },
  {
    "text": "project at the moment some okay",
    "start": "21119",
    "end": "26880"
  },
  {
    "text": "um anybody maintaining a bsp here for yokto [Laughter]",
    "start": "26880",
    "end": "32719"
  },
  {
    "text": "one maybe cool okay",
    "start": "32719",
    "end": "37920"
  },
  {
    "text": "so this oh first of all a little bit about a bit about myself so i'm chris simmons",
    "start": "37920",
    "end": "43600"
  },
  {
    "start": "40000",
    "end": "40000"
  },
  {
    "text": "i've been doing stuff with embedded linux since 1999.",
    "start": "43600",
    "end": "48800"
  },
  {
    "text": "um i've written a book on the subject it's a good book just saying and you can contact me by electronic means",
    "start": "48800",
    "end": "55760"
  },
  {
    "text": "by these various channels however",
    "start": "55760",
    "end": "61199"
  },
  {
    "start": "60000",
    "end": "60000"
  },
  {
    "text": "so this target then is going to be about board support packages and yocto",
    "start": "61199",
    "end": "66320"
  },
  {
    "text": "um [Music] so in yocto the board support package is written as",
    "start": "66320",
    "end": "72640"
  },
  {
    "text": "a meta layer and i'll explain what that is later on for those of you who are not yokto regular users",
    "start": "72640",
    "end": "81119"
  },
  {
    "text": "so every project needs a bsp because the bsp defines the hardware okay you pretty much can't do anything",
    "start": "81119",
    "end": "87040"
  },
  {
    "text": "without a bsp of some kind um so where do you get the bsp from",
    "start": "87040",
    "end": "93439"
  },
  {
    "text": "uh the bsp either comes from the guy who sold you the board um which could be a raspberry pi for",
    "start": "93439",
    "end": "99680"
  },
  {
    "text": "example or it could be a commercial board from one of the many companies that make uh",
    "start": "99680",
    "end": "105040"
  },
  {
    "text": "embedded boards or if you are that guy",
    "start": "105040",
    "end": "110560"
  },
  {
    "text": "who provides the board then you're going to have to write the bsp yourself or if you're developing in-house hardware",
    "start": "110560",
    "end": "117759"
  },
  {
    "text": "then somebody's gonna have to produce the bsp for that board",
    "start": "117759",
    "end": "122719"
  },
  {
    "text": "either way the bsp is the foundation of the stack of layers you need to make the",
    "start": "123040",
    "end": "128239"
  },
  {
    "text": "the software work so the bsp is i believe the most important part of the whole thing",
    "start": "128239",
    "end": "134160"
  },
  {
    "text": "so this is all about how to write a bsp what is good what is bad about what goes into bsp layers",
    "start": "134160",
    "end": "143000"
  },
  {
    "text": "but before we get into that i want to do a bit of a",
    "start": "143680",
    "end": "149440"
  },
  {
    "text": "a prefix talk a little bit about yokto and what yocto is and how the various",
    "start": "149440",
    "end": "155120"
  },
  {
    "text": "bits put together so i want to in particular i want to give you the terminology so when we talk about layers",
    "start": "155120",
    "end": "161040"
  },
  {
    "text": "and recipes um and bb pens we all know what those things really mean",
    "start": "161040",
    "end": "167760"
  },
  {
    "text": "so youtube project um there's the url um",
    "start": "169519",
    "end": "175760"
  },
  {
    "text": "so yogto project is a build system that creates um a linux distro for you",
    "start": "175760",
    "end": "183360"
  },
  {
    "text": "uh with the octo you feed in a configuration and a bunch of recipes",
    "start": "183360",
    "end": "189599"
  },
  {
    "text": "and then it magically munches that all together and produces first of all binary packages",
    "start": "189599",
    "end": "196720"
  },
  {
    "text": "in a form in some format usually rpm but it doesn't really matter and then it combines those binary",
    "start": "196720",
    "end": "201760"
  },
  {
    "text": "packages into images and then you flash those images into the flash memory of your target device or",
    "start": "201760",
    "end": "207840"
  },
  {
    "text": "put them onto an sd card or whatever it is your device supports",
    "start": "207840",
    "end": "213840"
  },
  {
    "text": "um so yokto oh an open embedded i should mention open embedded here because just in case any opening embedded guys are",
    "start": "215120",
    "end": "221680"
  },
  {
    "text": "watching this so youngtow project and open embedded are kind of the same but also somewhat",
    "start": "221680",
    "end": "226959"
  },
  {
    "text": "different open embedded actually was the um the the start of all this 2003 open",
    "start": "226959",
    "end": "233120"
  },
  {
    "text": "embedded was started uh yokto project is kind of a fork of that uh",
    "start": "233120",
    "end": "238720"
  },
  {
    "text": "which came along in 2010 for complicated reasons which i'm not going to go into now",
    "start": "238720",
    "end": "243920"
  },
  {
    "text": "but yokto and embedded open embedded kind of the same thing but also different let's just leave it",
    "start": "243920",
    "end": "251920"
  },
  {
    "text": "um yeah well okay so why do you want to do this",
    "start": "252000",
    "end": "257359"
  },
  {
    "text": "why didn't we just take debian or um yeah distro of your choice",
    "start": "257359",
    "end": "263120"
  },
  {
    "text": "and the reason is that if you do take debian as you do with the raspberry pi with raspberry and or now raspberry pi",
    "start": "263120",
    "end": "269520"
  },
  {
    "text": "os as it's now called the problem with with with a full-blown desktop distro is it brings on board a",
    "start": "269520",
    "end": "276639"
  },
  {
    "text": "whole bunch of stuff you don't really want it's difficult to um",
    "start": "276639",
    "end": "282639"
  },
  {
    "text": "to split debian up into small enough pieces for a really good embedded uh",
    "start": "282639",
    "end": "288639"
  },
  {
    "text": "deployment you end up with a bunch of stuff you don't need you end up with",
    "start": "288639",
    "end": "294479"
  },
  {
    "text": "more attack service than you really need you end up with maintenance problems and so on",
    "start": "294479",
    "end": "300240"
  },
  {
    "text": "so in the general case debian is not a good choice for an embedded operating system",
    "start": "300240",
    "end": "305600"
  },
  {
    "text": "for those reasons",
    "start": "305600",
    "end": "309000"
  },
  {
    "text": "so let's talk about yokto uh so yocto has a six month release",
    "start": "310880",
    "end": "316560"
  },
  {
    "text": "cycle um we're currently at 3.3",
    "start": "316560",
    "end": "321680"
  },
  {
    "text": "uh with the codename hard knot um but it will soon in the next couple",
    "start": "321680",
    "end": "326880"
  },
  {
    "text": "of weeks be superseded by 3.4 which is just about to be released and that has the code name hollister",
    "start": "326880",
    "end": "333600"
  },
  {
    "text": "and you can see the previous versions as well every now and again there is a long-term",
    "start": "333600",
    "end": "340479"
  },
  {
    "text": "support release so the lts release is 3.1 which is done fell which actually is from april last",
    "start": "340479",
    "end": "346560"
  },
  {
    "text": "year",
    "start": "346560",
    "end": "349560"
  },
  {
    "text": "so how do you get yokto uh well you go to uh this git repository",
    "start": "353919",
    "end": "360880"
  },
  {
    "text": "and you do a git clone and minus b in whichever branch you want or",
    "start": "360880",
    "end": "366639"
  },
  {
    "text": "if you want the main branch leave leave out the minus b bit that will download for you",
    "start": "366639",
    "end": "374160"
  },
  {
    "text": "total of about 250 megabytes of which 55 megabytes is the actual metadata",
    "start": "374160",
    "end": "381600"
  },
  {
    "text": "okay so not so much why so small that's because what you've downloaded is just the metadata",
    "start": "381600",
    "end": "388479"
  },
  {
    "text": "the recipes you don't download the code at this point it's only when you do the build that it downloads the code for the",
    "start": "388479",
    "end": "394639"
  },
  {
    "text": "packages that you want",
    "start": "394639",
    "end": "398240"
  },
  {
    "start": "400000",
    "end": "400000"
  },
  {
    "text": "so after you've done the git clone it will by default clone into a directory called pokey",
    "start": "402400",
    "end": "408720"
  },
  {
    "text": "again there's reasons why it's called  which i really don't go into just now it just is",
    "start": "408720",
    "end": "415120"
  },
  {
    "text": "and then within that uh directory you will find there's a script called oe init build end",
    "start": "415120",
    "end": "422400"
  },
  {
    "text": "oe for open embedded so you need to source that script in order to set up various shell variables",
    "start": "422400",
    "end": "429199"
  },
  {
    "text": "and that will create for you a build directory if it doesn't exist already you can give the name of the directory",
    "start": "429199",
    "end": "435199"
  },
  {
    "text": "you want it to create here as a parameter if you don't give a parameter there",
    "start": "435199",
    "end": "440240"
  },
  {
    "text": "by default it's called build",
    "start": "440240",
    "end": "443840"
  },
  {
    "start": "446000",
    "end": "446000"
  },
  {
    "text": "and then within that build directory there is a configuration directory called conf",
    "start": "446560",
    "end": "452639"
  },
  {
    "text": "and there's a bunch of configuration files in there the main one is called local.conf",
    "start": "452639",
    "end": "457919"
  },
  {
    "text": "and it's within the local.conf you set up what it is you want to build",
    "start": "457919",
    "end": "463520"
  },
  {
    "text": "so you have to go and edit this with a text editor um typically you will put things in here",
    "start": "463520",
    "end": "469199"
  },
  {
    "text": "like machine equals something or other so if i'm building for a beaglebone i",
    "start": "469199",
    "end": "474639"
  },
  {
    "text": "specify beaglebone if i'm building for a raspberry pi i put raspberry pi",
    "start": "474639",
    "end": "480638"
  },
  {
    "text": "so that actually is the board support package so this is the bit we're going to be talking about is what is what do we mean by beaglebone or",
    "start": "481039",
    "end": "488720"
  },
  {
    "text": "raspberry pi what does that point to you can also select the distribution",
    "start": "488720",
    "end": "496080"
  },
  {
    "text": "the default one is called pocky and the distribution is basically the policy",
    "start": "496080",
    "end": "502160"
  },
  {
    "text": "of which components you want to download and install so do you want the latest of everything",
    "start": "502160",
    "end": "508479"
  },
  {
    "text": "or do you want to have a conservative approach to the packages you install uh which net demon do you want to use",
    "start": "508479",
    "end": "514800"
  },
  {
    "text": "um which graphics environment do you want to use and so on so the distro is",
    "start": "514800",
    "end": "521919"
  },
  {
    "text": "policy when we've got a choice of packages which one should we install",
    "start": "521919",
    "end": "527839"
  },
  {
    "text": "package class this allows you to specify the intermediate packaging format",
    "start": "528080",
    "end": "533120"
  },
  {
    "text": "the default is rpm and to be honest there's no good reason to ever change that",
    "start": "533120",
    "end": "539120"
  },
  {
    "text": "so we kind of leave that and then there are various other things including extra image features",
    "start": "539120",
    "end": "546240"
  },
  {
    "text": "it's documented i'm not going to go into details here um but this pretty much does what it says it allows you to add additional",
    "start": "546240",
    "end": "552399"
  },
  {
    "text": "things in so for example a good one to do when you're developing stuff is adding debug tweaks",
    "start": "552399",
    "end": "558560"
  },
  {
    "text": "that will add in um gdb and i can't remember a few other uh",
    "start": "558560",
    "end": "564240"
  },
  {
    "text": "useful debug tools",
    "start": "564240",
    "end": "567279"
  },
  {
    "start": "570000",
    "end": "570000"
  },
  {
    "text": "so the core of the um yocto project metadata",
    "start": "572000",
    "end": "578880"
  },
  {
    "text": "are called recipes uh so we have recipes",
    "start": "578880",
    "end": "585120"
  },
  {
    "text": "these recipes are gathered together into layers and then there's a tool called bit bake",
    "start": "585120",
    "end": "591519"
  },
  {
    "text": "which is the task scheduler which processes the recipes and will perform",
    "start": "591519",
    "end": "596959"
  },
  {
    "text": "whatever instructions are needed so bitbake will generate binary packages",
    "start": "596959",
    "end": "604560"
  },
  {
    "text": "in rpm format by default and then as a final step when it when it",
    "start": "604560",
    "end": "609680"
  },
  {
    "text": "generates the image it will take the rpm files and unpack them to create",
    "start": "609680",
    "end": "615839"
  },
  {
    "text": "images and then those images are flashed into your flash memory",
    "start": "615839",
    "end": "623120"
  },
  {
    "text": "so just as a random example then this is what a recipe looks like this is the",
    "start": "626959",
    "end": "633200"
  },
  {
    "text": "canonical hello world recipe um",
    "start": "633200",
    "end": "638240"
  },
  {
    "text": "what can i say so the first bit is just um fluff we can ignore the first three",
    "start": "638240",
    "end": "643920"
  },
  {
    "text": "things natural fact oh no so first two things the third thing is the license the license is important every recipe must",
    "start": "643920",
    "end": "651200"
  },
  {
    "text": "have a license okay we believe in licenses licenses are very important",
    "start": "651200",
    "end": "657120"
  },
  {
    "text": "not only much is say that it's an mit license you must also give a pointer to the file",
    "start": "657120",
    "end": "663200"
  },
  {
    "text": "or a file that contains the text of that license and we also have an md5 hash of that",
    "start": "663200",
    "end": "668800"
  },
  {
    "text": "file just to make sure that nobody has gone and changed the license when you weren't looking so licenses are important",
    "start": "668800",
    "end": "676800"
  },
  {
    "text": "next bit down here with how a line that says source uri so this is a list of",
    "start": "678399",
    "end": "685120"
  },
  {
    "text": "places to get the source code for the component that you're going to",
    "start": "685120",
    "end": "690320"
  },
  {
    "text": "compile usually in source uri",
    "start": "690320",
    "end": "696000"
  },
  {
    "text": "this will point to a tar file on some server somewhere so you'll have",
    "start": "696000",
    "end": "702560"
  },
  {
    "text": "source uri is https colon slash some uri some url slash some tar file",
    "start": "702560",
    "end": "711920"
  },
  {
    "text": "or you could be a git repository so you'd have git colon slash slash and then",
    "start": "712240",
    "end": "717440"
  },
  {
    "text": "a git root git repo but in this case because this is a simple hello world program we are just",
    "start": "717440",
    "end": "724720"
  },
  {
    "text": "using the local mime type file colon slash so that is a local file actually",
    "start": "724720",
    "end": "730959"
  },
  {
    "text": "packaged as part of the recipe",
    "start": "730959",
    "end": "734320"
  },
  {
    "text": "then we have instructions to compile this thing so do compile",
    "start": "736320",
    "end": "742240"
  },
  {
    "text": "that's the instruction that bitbait uses to compile stuff and so in here we",
    "start": "742240",
    "end": "747360"
  },
  {
    "text": "specify how we build this thing this is a simple um cc so we're just",
    "start": "747360",
    "end": "752720"
  },
  {
    "text": "doing gonna run the compiler we're gonna compile helloworld.c and we're gonna generate a binary called hello world",
    "start": "752720",
    "end": "761199"
  },
  {
    "text": "usually you'd have a make file here or something but you know this is this is simple and then there's a do in store section",
    "start": "761920",
    "end": "768399"
  },
  {
    "text": "which says having built hello world where do you put it so we want to put it into something called bindiya",
    "start": "768399",
    "end": "775600"
  },
  {
    "text": "bindiya turns out to be user slash bin",
    "start": "775600",
    "end": "780160"
  },
  {
    "text": "so this is going to install it into this is going to do an install minus m hello world and it goes into binder so",
    "start": "780720",
    "end": "788079"
  },
  {
    "text": "we'll end up with user bin hello world there are other things for other useful",
    "start": "788079",
    "end": "793279"
  },
  {
    "text": "places as well as binder like libraries and such like which i think is called libdia",
    "start": "793279",
    "end": "800600"
  },
  {
    "text": "okay so that's roughly speaking what a recipe looks like um yeah you get the basic idea idea now i",
    "start": "801680",
    "end": "808079"
  },
  {
    "text": "hope",
    "start": "808079",
    "end": "811079"
  },
  {
    "start": "812000",
    "end": "812000"
  },
  {
    "text": "so in open embedded stroke doctor project we have first of all we have the",
    "start": "814880",
    "end": "820399"
  },
  {
    "text": "configuration file i just mentioned so in build conf you have this local.conf",
    "start": "820399",
    "end": "825760"
  },
  {
    "text": "file which specifies your machine and your distro and there's another file called bblayers.conf",
    "start": "825760",
    "end": "832720"
  },
  {
    "text": "so that is the list of layers in your project",
    "start": "832720",
    "end": "838240"
  },
  {
    "text": "and for example we have here a couple of layers so a layer is just a directory which contains bb files",
    "start": "840240",
    "end": "848639"
  },
  {
    "text": "by some convention the layers are prefixed with meta so we have meta this and meta that the",
    "start": "849440",
    "end": "856399"
  },
  {
    "text": "the most meta one of the wall of the mall is just called meta so that's the the really basic stuff",
    "start": "856399",
    "end": "861600"
  },
  {
    "text": "and then meta pokey is the uh recipes for the pocky distro",
    "start": "861600",
    "end": "867680"
  },
  {
    "text": "and we'll see in a moment or two your board support package will be its own meta layer",
    "start": "867680",
    "end": "873680"
  },
  {
    "text": "and then within the layers so these are just directories and they just can contain a whole bunch of bb files and a",
    "start": "875199",
    "end": "881199"
  },
  {
    "text": "few other things which we'll come to in a moment now",
    "start": "881199",
    "end": "886399"
  },
  {
    "text": "the idea of layers is really powerful because it means that we can just build up our project by adding in layers for",
    "start": "886399",
    "end": "893040"
  },
  {
    "text": "whatever it is we want to do so you'll always start off with the meta layer because that's always required",
    "start": "893040",
    "end": "898720"
  },
  {
    "text": "you'll need a distro layer for example metapokey you'll need a bsp layer",
    "start": "898720",
    "end": "904079"
  },
  {
    "text": "but there are hundreds and hundreds of other layers you can just add in as you need them",
    "start": "904079",
    "end": "911240"
  },
  {
    "text": "oh okay just for reference this is what the bblayers.com file looks like well it's a list of directories",
    "start": "913120",
    "end": "919760"
  },
  {
    "text": "it's not complicated",
    "start": "919760",
    "end": "923320"
  },
  {
    "text": "okay so that's the basic structure of uh yocto project",
    "start": "928560",
    "end": "934480"
  },
  {
    "text": "so now let's look at the layers and in particular support package layers",
    "start": "934480",
    "end": "941480"
  },
  {
    "start": "941000",
    "end": "941000"
  },
  {
    "text": "so there's what i call the trinity trinity the holy trinity of um",
    "start": "943040",
    "end": "949759"
  },
  {
    "text": "open embedded and yocto project this stroke machine image",
    "start": "949759",
    "end": "955759"
  },
  {
    "text": "so the distro is how i want to build my system that's the policy which versions of of packages do i want to use",
    "start": "955759",
    "end": "962800"
  },
  {
    "text": "uh that kind of thing so high level stuff the machine",
    "start": "962800",
    "end": "968959"
  },
  {
    "text": "this variable is the board in other words the board support package i want to use and then the image is",
    "start": "968959",
    "end": "975759"
  },
  {
    "text": "the the image recipe i will use when i build the target images now the neat thing about this is you can",
    "start": "975759",
    "end": "982399"
  },
  {
    "text": "swap any of these things around and it should in theory at least still work",
    "start": "982399",
    "end": "988000"
  },
  {
    "text": "so say i have several boards that are that i'm producing",
    "start": "988000",
    "end": "993519"
  },
  {
    "text": "they could be different architectures one could be arm one could be x86 one could be",
    "start": "993519",
    "end": "999759"
  },
  {
    "text": "risk five yes risk five is popular these days so long as you have a board support",
    "start": "999759",
    "end": "1005360"
  },
  {
    "text": "package for each of those you can just specify the machine here leave the disto and the image the same",
    "start": "1005360",
    "end": "1011120"
  },
  {
    "text": "and you'll get the same thing built for these different architectures",
    "start": "1011120",
    "end": "1016000"
  },
  {
    "text": "or in a similar way you can just change the image so we can have one image that is just",
    "start": "1016320",
    "end": "1021680"
  },
  {
    "text": "bare metal we can have another image which has a graphical environment we can have another image that's for",
    "start": "1021680",
    "end": "1028959"
  },
  {
    "text": "pre-production tests or whatever so we keep the distro and this machine the same we just change the image for",
    "start": "1028959",
    "end": "1034798"
  },
  {
    "text": "whatever it is we want to do with that particular board so it becomes very powerful",
    "start": "1034799",
    "end": "1041280"
  },
  {
    "text": "and modular which is quite neat",
    "start": "1041280",
    "end": "1048319"
  },
  {
    "start": "1047000",
    "end": "1047000"
  },
  {
    "text": "so layers so there are three types of layer",
    "start": "1050400",
    "end": "1055919"
  },
  {
    "text": "bsp distro and everything else",
    "start": "1056160",
    "end": "1061200"
  },
  {
    "text": "the bsp layers then they define a machine variable so the way you know it's a bsp layer is it has",
    "start": "1063039",
    "end": "1070080"
  },
  {
    "text": "this file here in conf slash machine slash something dot conf",
    "start": "1070080",
    "end": "1075520"
  },
  {
    "text": "and where i put machine in brackets that just is the name of the board which could be raspberry pi or beaglebone or",
    "start": "1075520",
    "end": "1082000"
  },
  {
    "text": "whatever uh distro layers you can tell it's a",
    "start": "1082000",
    "end": "1087919"
  },
  {
    "text": "destroy layer because it has a directory called distro and a conf file in there",
    "start": "1087919",
    "end": "1094000"
  },
  {
    "text": "if it has neither then it is an everything else so these are often just called software",
    "start": "1094000",
    "end": "1100480"
  },
  {
    "text": "layers so this is stuff that is not distro or board specific so",
    "start": "1100480",
    "end": "1105760"
  },
  {
    "text": "libraries qt qt5 meta qg5 is a layer for example",
    "start": "1105760",
    "end": "1111440"
  },
  {
    "text": "languages there's a meta java layer virtualization se linux there's a metase",
    "start": "1111440",
    "end": "1117200"
  },
  {
    "text": "linux actually meta security is for sr linux and so on",
    "start": "1117200",
    "end": "1122559"
  },
  {
    "text": "and there is i don't think i've got it on the slide but there is a website you can go to called",
    "start": "1122559",
    "end": "1129440"
  },
  {
    "text": "uh open embedded layer index layer index open embedded can't quite remember but google it um which lists",
    "start": "1129440",
    "end": "1137200"
  },
  {
    "text": "out three or four hundred of layers like this",
    "start": "1137200",
    "end": "1142159"
  },
  {
    "text": "plus there are private layers that you will get you you will find links to from various",
    "start": "1142799",
    "end": "1148480"
  },
  {
    "text": "places so like i said the layer concept is really really powerful",
    "start": "1148480",
    "end": "1155360"
  },
  {
    "text": "yes you may have occurred it may occur to you in my description of that there is a fourth option",
    "start": "1158480",
    "end": "1164799"
  },
  {
    "text": "you can have a layer which has both a machine and a distro configuration",
    "start": "1164799",
    "end": "1170160"
  },
  {
    "text": "we do not talk about these they should not exist",
    "start": "1170160",
    "end": "1176720"
  },
  {
    "text": "um they do exist but really they shouldn't so if you find you have a layer which has",
    "start": "1176720",
    "end": "1184240"
  },
  {
    "text": "both of these things yeah something somewhere's gonna gone wrong",
    "start": "1184240",
    "end": "1189679"
  },
  {
    "text": "and you really need to refactor it",
    "start": "1189679",
    "end": "1193840"
  },
  {
    "text": "okay so",
    "start": "1196640",
    "end": "1199200"
  },
  {
    "text": "so let's talk about bsps and i what i want to do from from now to the end of the presentation is to go through",
    "start": "1201840",
    "end": "1208880"
  },
  {
    "text": "some of the things not everything because that we don't have that much time but some of the things you'll find that are specific to bsp layers",
    "start": "1208880",
    "end": "1216720"
  },
  {
    "text": "and i want to kind of point to the best practice when you're laying out the bsp",
    "start": "1216720",
    "end": "1222960"
  },
  {
    "text": "or conversely even if you're not writing the bsp i want you to recognize a good bsp when you see one",
    "start": "1222960",
    "end": "1229360"
  },
  {
    "text": "and that's just as important so first rule of bsp layers keep it",
    "start": "1229360",
    "end": "1235520"
  },
  {
    "text": "simple and this is probably the biggest problem quite often there is too much stuff put",
    "start": "1235520",
    "end": "1243280"
  },
  {
    "start": "1238000",
    "end": "1238000"
  },
  {
    "text": "into the bsp layer the bsp layer should have the machine configuration file so that's",
    "start": "1243280",
    "end": "1249360"
  },
  {
    "text": "the thing in uh conf slash machine whatever.conf and it should have configuration for",
    "start": "1249360",
    "end": "1256799"
  },
  {
    "text": "your bootloader whatever that might be the kernel version you want to use and any modules that there requires",
    "start": "1256799",
    "end": "1264080"
  },
  {
    "text": "maybe some firm firmware binaries that you need to build the system up uh for various bits and pieces",
    "start": "1264080",
    "end": "1270960"
  },
  {
    "text": "other hardware related stuff so maybe gstreamer libraries for the particular",
    "start": "1270960",
    "end": "1276799"
  },
  {
    "text": "video controller you have that kind of thing and nothing else",
    "start": "1276799",
    "end": "1283200"
  },
  {
    "text": "so it should only contain hardware specific stuff there should not be any generic stuff in here at all that",
    "start": "1283200",
    "end": "1289360"
  },
  {
    "text": "belongs in a different layer and meta raspberry pi actually is a good",
    "start": "1289360",
    "end": "1296240"
  },
  {
    "text": "example if you are building a bsp go see what meta raspberry pi have done",
    "start": "1296240",
    "end": "1302240"
  },
  {
    "text": "that's a that's a very good template",
    "start": "1302240",
    "end": "1305840"
  },
  {
    "start": "1305000",
    "end": "1305000"
  },
  {
    "text": "so um yeah i kind of stepped through a couple of things so supposing i am producing a range of",
    "start": "1310080",
    "end": "1317919"
  },
  {
    "text": "boards uh called nova uh they're called nova because they're new they're sparkling",
    "start": "1317919",
    "end": "1324880"
  },
  {
    "text": "and also they explode for no well understood reason from time to time",
    "start": "1324880",
    "end": "1330720"
  },
  {
    "text": "we're working on that so i go bitbit layers",
    "start": "1330720",
    "end": "1336960"
  },
  {
    "text": "create layer metanova is a good name for it so all that does actually is create a",
    "start": "1336960",
    "end": "1343760"
  },
  {
    "text": "directory so that creates my directory called metanova with a couple of subdirectories in it",
    "start": "1343760",
    "end": "1349039"
  },
  {
    "text": "and then i need to add that layer sometime pipbig layers add layer metanova it's now part of my bb layers uh",
    "start": "1349039",
    "end": "1356080"
  },
  {
    "text": "conf file and any recipes i create in that metanova directory will be part of",
    "start": "1356080",
    "end": "1362480"
  },
  {
    "text": "my project",
    "start": "1362480",
    "end": "1365039"
  },
  {
    "text": "it will generate for you when you do the create layer it will generate a template readme file",
    "start": "1368320",
    "end": "1373440"
  },
  {
    "text": "um it's good practice to actually put something sensible into that readme file",
    "start": "1373440",
    "end": "1378640"
  },
  {
    "text": "to explain what the layer is for which boards do you support",
    "start": "1378640",
    "end": "1383919"
  },
  {
    "text": "any other interesting stuff to anybody using this layer",
    "start": "1383919",
    "end": "1389640"
  },
  {
    "text": "and a license everything has to have a license uh including the layer metadata",
    "start": "1389679",
    "end": "1397039"
  },
  {
    "text": "most people choose an mit license for them for the layer metadata but of course you can",
    "start": "1397039",
    "end": "1402559"
  },
  {
    "text": "choose whichever license you like",
    "start": "1402559",
    "end": "1406158"
  },
  {
    "text": "and then you would want to create the configuration files for your hardware",
    "start": "1411600",
    "end": "1418640"
  },
  {
    "text": "so in conf slash machine",
    "start": "1418640",
    "end": "1423919"
  },
  {
    "text": "within metanova we will create two files because we have the nova and the nova",
    "start": "1423919",
    "end": "1430159"
  },
  {
    "text": "pro which we're very proud of uh so we have two configuration files",
    "start": "1430159",
    "end": "1435520"
  },
  {
    "text": "one for uh the two boards because they're they're sufficiently different that a single configuration wouldn't",
    "start": "1435520",
    "end": "1440720"
  },
  {
    "text": "cover them both and then when i do a build of course",
    "start": "1440720",
    "end": "1446880"
  },
  {
    "text": "uh i select which machine i'm using by putting it into my local.conf file",
    "start": "1446880",
    "end": "1452320"
  },
  {
    "text": "machine equals nova nova pro for example",
    "start": "1452320",
    "end": "1458919"
  },
  {
    "start": "1461000",
    "end": "1461000"
  },
  {
    "text": "then we start populating the nova.com file",
    "start": "1463520",
    "end": "1469600"
  },
  {
    "text": "probably one of the places i want to start is the bootloader how do i boot my board",
    "start": "1470320",
    "end": "1476000"
  },
  {
    "text": "uh most likely i'm using u-boot so i put extra image depends plus equals",
    "start": "1476000",
    "end": "1481760"
  },
  {
    "text": "u-boot pretty much job done so this variable here extra image",
    "start": "1481760",
    "end": "1488400"
  },
  {
    "text": "depends is a list of packages that need to be built but not included in the final root file",
    "start": "1488400",
    "end": "1494400"
  },
  {
    "text": "system because the bootloader is separate from that",
    "start": "1494400",
    "end": "1500360"
  },
  {
    "text": "it's quite likely that i will need to configure u-boot for my nova board",
    "start": "1502880",
    "end": "1509679"
  },
  {
    "text": "um and the way you would do that is through something called a bb append",
    "start": "1509679",
    "end": "1514880"
  },
  {
    "text": "so i will create also in my metanova i'll create a u-boot some version bb",
    "start": "1514880",
    "end": "1521039"
  },
  {
    "text": "append and there i'll put in the stuff that's specific to my configuration",
    "start": "1521039",
    "end": "1528159"
  },
  {
    "text": "so that may contain some additional configuration files for uboot may contain some patches to add some",
    "start": "1529279",
    "end": "1534880"
  },
  {
    "text": "drivers or something for my board whatever",
    "start": "1534880",
    "end": "1539279"
  },
  {
    "text": "and i've chosen um a version number so 2021",
    "start": "1541360",
    "end": "1546400"
  },
  {
    "text": "0 1.",
    "start": "1546400",
    "end": "1549039"
  },
  {
    "start": "1551000",
    "end": "1551000"
  },
  {
    "text": "so let's talk a little bit then as a digression what about these version numbers",
    "start": "1553600",
    "end": "1559440"
  },
  {
    "text": "so every recipe has a version number so with u-boot",
    "start": "1560080",
    "end": "1565279"
  },
  {
    "text": "u-boot is the name of the package and then the version number is usually",
    "start": "1565279",
    "end": "1570400"
  },
  {
    "text": "expressed like this with an underscore and then whatever the version number string is and it's expressed as part of",
    "start": "1570400",
    "end": "1576880"
  },
  {
    "text": "the recipe filename there are other ways of doing it but this is the most common way of doing it",
    "start": "1576880",
    "end": "1585159"
  },
  {
    "text": "when bit bake processes package u-boot so back here i didn't specify a version i just said i want you",
    "start": "1586880",
    "end": "1592880"
  },
  {
    "text": "boot so bitbake will simply go and use the",
    "start": "1592880",
    "end": "1600000"
  },
  {
    "text": "latest version of uber it can find",
    "start": "1600000",
    "end": "1603679"
  },
  {
    "text": "if i want a specific version and if that version exists as a recipe somewhere i can put preferred version underscore",
    "start": "1607360",
    "end": "1614000"
  },
  {
    "text": "name a package say 202011",
    "start": "1614000",
    "end": "1619600"
  },
  {
    "text": "we can also use wildcards here so when it comes to the linux version",
    "start": "1623679",
    "end": "1629760"
  },
  {
    "text": "the linux version can have three separate digit fields",
    "start": "1629760",
    "end": "1636000"
  },
  {
    "text": "so we can put a percent here that's the wild card and that will match 5.4.1 and",
    "start": "1636000",
    "end": "1641279"
  },
  {
    "text": "5.4.2 and 5.4.3 etc",
    "start": "1641279",
    "end": "1645679"
  },
  {
    "start": "1650000",
    "end": "1650000"
  },
  {
    "text": "okay digression number two i mentioned bb appends just now so let's elaborate on that a bit",
    "start": "1652720",
    "end": "1659840"
  },
  {
    "text": "so the bb append mechanism within um open embedded is really really",
    "start": "1659840",
    "end": "1665039"
  },
  {
    "text": "powerful it allows us to modify an existing recipe",
    "start": "1665039",
    "end": "1670159"
  },
  {
    "text": "without actually changing the text of the actual recipe uh it's pretty simple",
    "start": "1670159",
    "end": "1677120"
  },
  {
    "text": "i simply need to create a so i have u-boots u-boot some version number",
    "start": "1677120",
    "end": "1683120"
  },
  {
    "text": "uh but for my nova board i need to add some stuff in there specific to the configuration for my board",
    "start": "1683120",
    "end": "1688880"
  },
  {
    "text": "so i create a file in my layer called same name same version dot bb append",
    "start": "1688880",
    "end": "1697520"
  },
  {
    "text": "and then in that bb append file i put my additional stuff when it comes to pass that it literally",
    "start": "1697520",
    "end": "1705360"
  },
  {
    "text": "uh takes the base um do the bb file",
    "start": "1705360",
    "end": "1711200"
  },
  {
    "text": "and literally appends whatever is going to be append to the end of it",
    "start": "1711200",
    "end": "1716799"
  },
  {
    "text": "and then it passes that so this allows me to in the bb append to",
    "start": "1716799",
    "end": "1722240"
  },
  {
    "text": "override things that are defined in the bb file if i say wish or i can add new stuff",
    "start": "1722240",
    "end": "1729840"
  },
  {
    "text": "um i can even remove stuff if i really want to although that's problematic",
    "start": "1729840",
    "end": "1735200"
  },
  {
    "text": "and again we can use wild cards so if i'm if i want my bb append to apply",
    "start": "1736880",
    "end": "1742880"
  },
  {
    "text": "to any version of u-boot not just this particular version i can put a percent sign in there",
    "start": "1742880",
    "end": "1749880"
  },
  {
    "start": "1752000",
    "end": "1752000"
  },
  {
    "text": "okay next thing i probably want to worry about is what kernel i'm going to am i going to be using on my board",
    "start": "1755520",
    "end": "1763360"
  },
  {
    "text": "so i specify this again in the uh machine.conf file",
    "start": "1763679",
    "end": "1770159"
  },
  {
    "text": "so nova.com for example i put preferred preferred provider",
    "start": "1770159",
    "end": "1777200"
  },
  {
    "text": "virtual kernel so i haven't spoken about this too much but you have these virtual packages",
    "start": "1777200",
    "end": "1782240"
  },
  {
    "text": "called virtual something one of them is virtual candle and you assign to the virtual package",
    "start": "1782240",
    "end": "1787440"
  },
  {
    "text": "the actual package you want to fulfill that role so virtual car kernel is going to be",
    "start": "1787440",
    "end": "1794240"
  },
  {
    "text": "linux nova so that is a specific version of linux",
    "start": "1794240",
    "end": "1799520"
  },
  {
    "text": "for mine overboard",
    "start": "1799520",
    "end": "1802640"
  },
  {
    "text": "and so preferred provider i can also give a version number so maybe there are several versions of",
    "start": "1805919",
    "end": "1811360"
  },
  {
    "text": "linux nova and i specifically want the 5.10 version",
    "start": "1811360",
    "end": "1818520"
  },
  {
    "text": "that i'm using a question mark equals for the assignment here because",
    "start": "1822240",
    "end": "1827440"
  },
  {
    "text": "somebody can override that with a bsp in a higher level layer so somebody may come along and use my bsp say well this",
    "start": "1827440",
    "end": "1834880"
  },
  {
    "text": "b is great but we really want to use 5.14 or whatever the latest version",
    "start": "1834880",
    "end": "1841279"
  },
  {
    "text": "might be at the time",
    "start": "1841279",
    "end": "1844000"
  },
  {
    "start": "1846000",
    "end": "1846000"
  },
  {
    "text": "so bitbake assignments we have",
    "start": "1846799",
    "end": "1851840"
  },
  {
    "text": "two forms of regular assignment lazy and immediate",
    "start": "1851840",
    "end": "1857279"
  },
  {
    "text": "um if you're familiar with make files this is similar to how gnu mate works",
    "start": "1857279",
    "end": "1862559"
  },
  {
    "text": "so the the lazy assignment it only actually does the assignment when it passes",
    "start": "1862559",
    "end": "1868399"
  },
  {
    "text": "uh the e or sorry when it dereferences the variable with equals in it",
    "start": "1868399",
    "end": "1875360"
  },
  {
    "text": "um this can be problematic because it does",
    "start": "1875360",
    "end": "1881120"
  },
  {
    "text": "mean that if you dereference the same thing in different places they can actually turn up with different",
    "start": "1881120",
    "end": "1886480"
  },
  {
    "text": "values sometimes so i generally recommend people not to use the single",
    "start": "1886480",
    "end": "1892559"
  },
  {
    "text": "the simple equals colon equals is more deterministic",
    "start": "1892559",
    "end": "1897919"
  },
  {
    "text": "er this does an immediate assignment when it pauses that line and once it's been assigned it's never going to change",
    "start": "1897919",
    "end": "1905360"
  },
  {
    "text": "usually that's the behavior that you want and then we have the conditional",
    "start": "1905360",
    "end": "1911519"
  },
  {
    "text": "assignment so question mark equals means we only do the assignment if it's",
    "start": "1911519",
    "end": "1916720"
  },
  {
    "text": "not assigned already",
    "start": "1916720",
    "end": "1920679"
  },
  {
    "text": "and then there's also the double question mark equals which is um no it isn't um",
    "start": "1921760",
    "end": "1929679"
  },
  {
    "text": "this is um yeah this is the default default",
    "start": "1929679",
    "end": "1935360"
  },
  {
    "text": "so essentially what it really means is that once we finish parsing all of the scripts we then actually go through with the",
    "start": "1935360",
    "end": "1941279"
  },
  {
    "text": "with the final pass and in that final pass we do the double uh question mark equals",
    "start": "1941279",
    "end": "1948720"
  },
  {
    "text": "so a question mark equals overrides a double question my equals essentially",
    "start": "1948720",
    "end": "1955039"
  },
  {
    "text": "no there isn't a triple question about equals yet i'm sure it's in the planning but we haven't gotten that far yet",
    "start": "1956159",
    "end": "1963840"
  },
  {
    "text": "sonia so when we're doing assignments in the bsp layer which is a one of the lower level layers",
    "start": "1964080",
    "end": "1969919"
  },
  {
    "text": "it's good to use question mark equals because someone can come along with the bb append and override that with a colon equals",
    "start": "1969919",
    "end": "1978159"
  },
  {
    "text": "with a different uh value and then we'll just pick that up when this gets processed",
    "start": "1978159",
    "end": "1985880"
  },
  {
    "text": "um step back to the slide here before i did",
    "start": "1991679",
    "end": "1998080"
  },
  {
    "text": "the digressions there we go um so in this case then i'm going to use my",
    "start": "1998080",
    "end": "2003120"
  },
  {
    "text": "own special kernel which i called linux nova so this presumably is something",
    "start": "2003120",
    "end": "2008320"
  },
  {
    "text": "that i have uh cloned from um kernel.org and then i've got my own",
    "start": "2008320",
    "end": "2015120"
  },
  {
    "text": "special tree this is not the recommended way of doing it by the way but it does happen sometimes for example with",
    "start": "2015120",
    "end": "2020399"
  },
  {
    "text": "raspberry pi the raspberry pi kernel is not the mainline kernel you have to go and get it from raspberrypi.org",
    "start": "2020399",
    "end": "2028720"
  },
  {
    "text": "so i mentioned i've documented this because it's kind of a simpler concept",
    "start": "2030080",
    "end": "2036000"
  },
  {
    "text": "so how do we do this i would need a recipe called linux nova and then some",
    "start": "2036000",
    "end": "2042000"
  },
  {
    "text": "version number and that would then have the necessary instructions to do a git clone",
    "start": "2042000",
    "end": "2047200"
  },
  {
    "text": "from my own nova.com",
    "start": "2047200",
    "end": "2053760"
  },
  {
    "text": "git repository or whatever",
    "start": "2053760",
    "end": "2056878"
  },
  {
    "text": "if on the other hand you're using one of the standard kernels so there is a standard kernel called linux yokto",
    "start": "2059200",
    "end": "2065679"
  },
  {
    "text": "i should really flip this around because that's actually the recommended way of doing it these days then i would use um",
    "start": "2065679",
    "end": "2072800"
  },
  {
    "text": "i still want to make some changes but i can do that with the bb append on linux youtube and whichever version",
    "start": "2072800",
    "end": "2080240"
  },
  {
    "start": "2084000",
    "end": "2084000"
  },
  {
    "text": "uh next let's talk about device trees this is almost certain that you will",
    "start": "2086480",
    "end": "2092240"
  },
  {
    "text": "need to modify this so the device tree determines which hub which bits of hardware",
    "start": "2092240",
    "end": "2099119"
  },
  {
    "text": "are active alive and you need to you know if you want to remap your gpios to do certain things",
    "start": "2099119",
    "end": "2106160"
  },
  {
    "text": "you do that in the device tree so this is one of the things you almost always need to change",
    "start": "2106160",
    "end": "2111680"
  },
  {
    "text": "there are various ways of doing this again i'm taking the simplest case where we're simply going to replace the device",
    "start": "2113119",
    "end": "2118960"
  },
  {
    "text": "tree with a new one so we have a device tree for the nova board called nova dts",
    "start": "2118960",
    "end": "2125599"
  },
  {
    "text": "so it's in my kernel recipe in linux nova dts dts so that's the source for the device",
    "start": "2125599",
    "end": "2133119"
  },
  {
    "text": "tree and then i need to",
    "start": "2133119",
    "end": "2139280"
  },
  {
    "text": "tell the kernel build recipe which device trees to actually build a",
    "start": "2139680",
    "end": "2145119"
  },
  {
    "text": "build time so i do that with kernel device tree equals or color and equals and then one or actually several device",
    "start": "2145119",
    "end": "2151680"
  },
  {
    "text": "trees if i say wished um it's up to you",
    "start": "2151680",
    "end": "2157040"
  },
  {
    "text": "and that will then generate for me anova.dtb and then later on i would have to do some",
    "start": "2157040",
    "end": "2164400"
  },
  {
    "text": "some scripts or whatever to tell the bootloader u-boot to load nova dtb",
    "start": "2164400",
    "end": "2170880"
  },
  {
    "text": "at boot time",
    "start": "2170880",
    "end": "2173838"
  },
  {
    "start": "2176000",
    "end": "2176000"
  },
  {
    "text": "um firmware yeah so firmware is a real pain to be honest",
    "start": "2178880",
    "end": "2185680"
  },
  {
    "text": "so by firmware i mean the various binary blobs that you need to program into",
    "start": "2185680",
    "end": "2191440"
  },
  {
    "text": "various bits of the system to make them work the example here is from the raspberry",
    "start": "2191440",
    "end": "2196480"
  },
  {
    "text": "pi actually the um",
    "start": "2196480",
    "end": "2201720"
  },
  {
    "text": "uh wi-fi yes this is a wi-fi chip i'm trying but it probably does bluetooth as well i'm not quite sure anyhow to make this chip work you need",
    "start": "2202000",
    "end": "2208640"
  },
  {
    "text": "to load this binary into it at boot time we don't need to do anything with that",
    "start": "2208640",
    "end": "2213920"
  },
  {
    "text": "binary we just need to load that binary into the appropriate location whatever it is",
    "start": "2213920",
    "end": "2220320"
  },
  {
    "text": "and away we go so for this to happen we need a",
    "start": "2220320",
    "end": "2226839"
  },
  {
    "text": "recipe um called linux form firmware arpi distro something bb",
    "start": "2226839",
    "end": "2235920"
  },
  {
    "text": "but we also need to tell the the build system that we need to build this recipe which will include the",
    "start": "2237280",
    "end": "2243359"
  },
  {
    "text": "binary and then load it to boot time does that so do this with machine extra r recommends and then the name of that",
    "start": "2243359",
    "end": "2250320"
  },
  {
    "text": "recipe that will load the firmware for this chip when we boot up the wi-fi will work",
    "start": "2250320",
    "end": "2258319"
  },
  {
    "start": "2262000",
    "end": "2262000"
  },
  {
    "text": "how we doing yeah not too bad um what else right",
    "start": "2265119",
    "end": "2271040"
  },
  {
    "text": "okay so there are many many many other things i can mention of bits and pieces you could include",
    "start": "2271040",
    "end": "2276880"
  },
  {
    "text": "into the bsp um but i think you're getting the view the general feel of how you do this now",
    "start": "2276880",
    "end": "2284160"
  },
  {
    "text": "so next thing i want to look at then is the image format so the whole point of doing all this",
    "start": "2284160",
    "end": "2291839"
  },
  {
    "text": "is to create images and you need to determine what format of",
    "start": "2291839",
    "end": "2297599"
  },
  {
    "text": "those images you want so youtube has image builders for various",
    "start": "2297599",
    "end": "2304160"
  },
  {
    "text": "things the simplest is tar files so that's just a targeted file",
    "start": "2304160",
    "end": "2310799"
  },
  {
    "text": "more sophisticated things is we can create um partition images",
    "start": "2311680",
    "end": "2317599"
  },
  {
    "text": "uh so these can be in a regular file format such as ext4 or they could be",
    "start": "2317599",
    "end": "2323520"
  },
  {
    "text": "probably not jf of s2 but might be ub a flash file system format to program",
    "start": "2323520",
    "end": "2329520"
  },
  {
    "text": "into nand flash memory or we can create a disk image",
    "start": "2329520",
    "end": "2335119"
  },
  {
    "text": "and with a disk image that includes a partition table maybe a boot block",
    "start": "2335119",
    "end": "2341760"
  },
  {
    "text": "and you can just flash that into emmc or something like that or an sd card",
    "start": "2341760",
    "end": "2347440"
  },
  {
    "text": "so these days probably the last one the disk image is the most useful one because most devices these days come",
    "start": "2347440",
    "end": "2353440"
  },
  {
    "text": "with either sd cards to boot from or emmc and emfc",
    "start": "2353440",
    "end": "2358640"
  },
  {
    "text": "is just a sd card with legs on that you sold onto the board",
    "start": "2358640",
    "end": "2363680"
  },
  {
    "start": "2366000",
    "end": "2366000"
  },
  {
    "text": "so you select which file formats you want in your machine.com file",
    "start": "2367440",
    "end": "2374800"
  },
  {
    "text": "you put image fs types equals and you can give a list so in this case i've chosen ext3",
    "start": "2374800",
    "end": "2380640"
  },
  {
    "text": "which is a rather weird choice i can't remember why i put that there actually the xt4 would be more likely",
    "start": "2380640",
    "end": "2385760"
  },
  {
    "text": "or tar bz2",
    "start": "2385760",
    "end": "2389200"
  },
  {
    "text": "well why not",
    "start": "2391200",
    "end": "2394599"
  },
  {
    "start": "2394000",
    "end": "2394000"
  },
  {
    "text": "if i want to create a a partitioned uh device that i can put",
    "start": "2396960",
    "end": "2403200"
  },
  {
    "text": "into a onto an sd card then i can use a thing called wick to do that for me",
    "start": "2403200",
    "end": "2409280"
  },
  {
    "text": "funny story about wick it actually wick actually stands for the open image and um sorry open embedded",
    "start": "2409280",
    "end": "2416240"
  },
  {
    "text": "image creator or o-e-i-c and then somebody realized the bible",
    "start": "2416240",
    "end": "2421520"
  },
  {
    "text": "became apparent that you you cannot possibly pronounce oei c not in english anyhow weak",
    "start": "2421520",
    "end": "2426880"
  },
  {
    "text": "so oik became wick so that's why it's called wick the w doesn't stand for anything",
    "start": "2426880",
    "end": "2434240"
  },
  {
    "text": "so um so you end up with a wick file",
    "start": "2437680",
    "end": "2444880"
  },
  {
    "text": "and you put it typically into the directional wick in your layer so in metanova in our case",
    "start": "2444880",
    "end": "2454319"
  },
  {
    "text": "there is for historical reasons there's also another directory you can put them in",
    "start": "2454319",
    "end": "2459520"
  },
  {
    "text": "but that would be a bit crazy",
    "start": "2459520",
    "end": "2462560"
  },
  {
    "start": "2463000",
    "end": "2463000"
  },
  {
    "text": "so if we want to generate a wic file we just put just add wic to the list of types",
    "start": "2465280",
    "end": "2473599"
  },
  {
    "text": "and then we create a wks file and we reference it like this so now this is",
    "start": "2473599",
    "end": "2479680"
  },
  {
    "text": "for beaglebone so we have beaglebone yokto wks that contains the the instructions to format the image uh",
    "start": "2479680",
    "end": "2487040"
  },
  {
    "text": "ready to put into the in the case of beaglebone the emmc that's on the beaglebone board",
    "start": "2487040",
    "end": "2495640"
  },
  {
    "text": "i don't think yeah okay i didn't include the stuff about the format of wick",
    "start": "2496400",
    "end": "2503280"
  },
  {
    "text": "it's a little bit convoluted and i didn't want to go into too much detail there but yeah",
    "start": "2503280",
    "end": "2509599"
  },
  {
    "text": "you can look it up now now you know what it's called you can look it up",
    "start": "2509599",
    "end": "2513920"
  },
  {
    "text": "okay so first of all the bsps keep it simple but obviously it's not that simple",
    "start": "2518960",
    "end": "2524560"
  },
  {
    "text": "because it's a complicated thing you're doing so keep it as simple as possible",
    "start": "2524560",
    "end": "2530640"
  },
  {
    "text": "the second rule of bsps then is don't break things and this is where",
    "start": "2532079",
    "end": "2537760"
  },
  {
    "text": "the things tend to go wrong um yeah so let me go through some of the",
    "start": "2537760",
    "end": "2544319"
  },
  {
    "text": "pitfalls and some of the things you should look out for",
    "start": "2544319",
    "end": "2549240"
  },
  {
    "start": "2549000",
    "end": "2549000"
  },
  {
    "text": "the first issue then is that the person creating the bsp layer",
    "start": "2553599",
    "end": "2560640"
  },
  {
    "text": "in some well-known company or other probably isn't thinking about products",
    "start": "2560640",
    "end": "2566640"
  },
  {
    "text": "you may be using from for example competitors they will assume you're always going to use their product",
    "start": "2566640",
    "end": "2573040"
  },
  {
    "text": "and never can use any other product that is not the case of course",
    "start": "2573040",
    "end": "2578880"
  },
  {
    "text": "so one of the issues is that quite often bsp layers are written in such a way that they destroy",
    "start": "2578880",
    "end": "2584720"
  },
  {
    "text": "everything else so as long as you're using that particular board",
    "start": "2584720",
    "end": "2590160"
  },
  {
    "text": "fine but if you want um if you have a bsp sorry if you have a yakuto set up with",
    "start": "2590160",
    "end": "2596319"
  },
  {
    "text": "multiple bsps and you just want to select the bsp by setting the machine then you'll find that there is stuff in",
    "start": "2596319",
    "end": "2602640"
  },
  {
    "text": "some bsp layers which basically destroy other bsp layers this is not friendly",
    "start": "2602640",
    "end": "2610480"
  },
  {
    "text": "so if you are creating a bsp layer or if you're testing",
    "start": "2610720",
    "end": "2616240"
  },
  {
    "text": "it's worthwhile just seeing what happens if you add that bsp layer in your bblayers.com file but don't use it as",
    "start": "2616240",
    "end": "2623680"
  },
  {
    "text": "you select a different machine it should still build that's logically consistent but quite often it doesn't",
    "start": "2623680",
    "end": "2630800"
  },
  {
    "text": "and usually the problem is with these bb appends if you have a bsp layer with a whole bunch of bb pens",
    "start": "2630800",
    "end": "2638400"
  },
  {
    "text": "which then interfere with other recipes that you may be using in other layers yeah the whole thing the",
    "start": "2638560",
    "end": "2644640"
  },
  {
    "text": "whole thing blows up",
    "start": "2644640",
    "end": "2648279"
  },
  {
    "text": "so okay right i've just said that",
    "start": "2650640",
    "end": "2654880"
  },
  {
    "start": "2656000",
    "end": "2656000"
  },
  {
    "text": "another problem is dependencies so quite often one layer depends on other",
    "start": "2658480",
    "end": "2663839"
  },
  {
    "text": "layers and so when you're doing the running the bit bake build bit bake",
    "start": "2663839",
    "end": "2670400"
  },
  {
    "text": "whatever you get errors like this could not include require recipes blah",
    "start": "2670400",
    "end": "2676160"
  },
  {
    "text": "blah essentially the problem is then that",
    "start": "2676160",
    "end": "2682160"
  },
  {
    "text": "linux imx is in a different layer and we don't have that layer so then we have to go",
    "start": "2682160",
    "end": "2688400"
  },
  {
    "text": "and scratch your hair a little bit work out where linux imx is coming from include that layer",
    "start": "2688400",
    "end": "2694640"
  },
  {
    "text": "it would be nice to avoid that and it's very easy to avoid you just need to put into the layer.conf file",
    "start": "2694640",
    "end": "2700880"
  },
  {
    "text": "your dependencies so we depend on core and free scale layer",
    "start": "2700880",
    "end": "2706000"
  },
  {
    "text": "and it turns out freescale layer is the one that contains linux imax.inc",
    "start": "2706000",
    "end": "2711880"
  },
  {
    "text": "so be nice get your dependencies right",
    "start": "2713040",
    "end": "2718040"
  },
  {
    "start": "2718000",
    "end": "2718000"
  },
  {
    "text": "um check your layer so there's a really handy little script called the octo check layer",
    "start": "2720240",
    "end": "2727680"
  },
  {
    "text": "and it's got various heuristics and tests built into it which will validate that your your layer",
    "start": "2727680",
    "end": "2733520"
  },
  {
    "text": "is at least halfway sane so it's a good way to do this so it's a",
    "start": "2733520",
    "end": "2739200"
  },
  {
    "text": "good thing to do this you just run the command pointed at your layer",
    "start": "2739200",
    "end": "2744560"
  },
  {
    "text": "and it chugs through in this case oh it says this is a bsp layer it knows that",
    "start": "2744560",
    "end": "2750880"
  },
  {
    "text": "because it's found a machine.com file",
    "start": "2750880",
    "end": "2755440"
  },
  {
    "text": "and then it does various things and hopefully you want to see at the end pass",
    "start": "2756319",
    "end": "2761359"
  },
  {
    "text": "there you go there's a gold star for you",
    "start": "2761359",
    "end": "2764799"
  },
  {
    "text": "the final thing um and this is really the biggest bugbear i have",
    "start": "2772240",
    "end": "2777359"
  },
  {
    "text": "with bsp layers from many sources",
    "start": "2777359",
    "end": "2783359"
  },
  {
    "text": "when a company so this this typically happens when you you buy an off-the-shelf um single ball",
    "start": "2783599",
    "end": "2789760"
  },
  {
    "text": "computer or system on module from many one of the many companies",
    "start": "2789760",
    "end": "2796240"
  },
  {
    "text": "the marketing department of the company company often see the bsp layer as being the showcase for their product",
    "start": "2796720",
    "end": "2803440"
  },
  {
    "text": "and so they will load as well as the bsp stuff they will load in demos",
    "start": "2803440",
    "end": "2809200"
  },
  {
    "text": "um splash screens with their company logo in all kinds of stuff which you really",
    "start": "2809200",
    "end": "2814800"
  },
  {
    "text": "don't want and don't care about so",
    "start": "2814800",
    "end": "2819839"
  },
  {
    "text": "the bsp layer is not a market marketing tool the bsp layer is just there to make it work",
    "start": "2819839",
    "end": "2825920"
  },
  {
    "text": "if you want to have demos fine great i like demos but put them into a separate",
    "start": "2825920",
    "end": "2831440"
  },
  {
    "text": "layer so i can include the demo initially just to see all the fine",
    "start": "2831440",
    "end": "2837599"
  },
  {
    "text": "things you do but when i produce my thing i want to do it my way not with your",
    "start": "2837599",
    "end": "2843680"
  },
  {
    "text": "funny splash screens and demos",
    "start": "2843680",
    "end": "2847119"
  },
  {
    "text": "um another thing then which kind of relates back to this thing here",
    "start": "2849440",
    "end": "2855440"
  },
  {
    "text": "so quite often when you are using a bsp with a whole bunch of",
    "start": "2855440",
    "end": "2860800"
  },
  {
    "text": "stuff there are multiple layers and it's",
    "start": "2860800",
    "end": "2866640"
  },
  {
    "text": "even though you put the layers here so at least it will tell you that a layer is missing it's even nicer if you can",
    "start": "2866640",
    "end": "2872160"
  },
  {
    "text": "actually load all the layers in one go so one common way to do this actually is to",
    "start": "2872160",
    "end": "2878960"
  },
  {
    "text": "use repo so repo is from android but it's basically just a wrapper around git",
    "start": "2878960",
    "end": "2885760"
  },
  {
    "text": "you give it a manifest file which is an xml file with a list of get repositories in you'd run repo it will clone them all",
    "start": "2885760",
    "end": "2891599"
  },
  {
    "text": "for you and a company called digi do quite do this",
    "start": "2891599",
    "end": "2897520"
  },
  {
    "text": "quite nicely so here's an example of a repo from digi and",
    "start": "2897520",
    "end": "2903920"
  },
  {
    "text": "that works quite nicely oh and when you do that yeah so that includes all these layers so metadigi",
    "start": "2903920",
    "end": "2910720"
  },
  {
    "text": "which is their bsp layer meta freescale which has some stuff for the imx chips",
    "start": "2910720",
    "end": "2917680"
  },
  {
    "text": "some demos met open embedded because it uses some additional stuff from from metro open",
    "start": "2917680",
    "end": "2922720"
  },
  {
    "text": "embedded qt5 because we want to do some graphical stuff an sw update because we want a software",
    "start": "2922720",
    "end": "2929200"
  },
  {
    "text": "updater so that's a good way of presenting",
    "start": "2929200",
    "end": "2935760"
  },
  {
    "text": "the uh the features of your product without putting everything into the bsp layer",
    "start": "2935760",
    "end": "2943838"
  },
  {
    "start": "2947000",
    "end": "2947000"
  },
  {
    "text": "oh final thing yes you can sign up",
    "start": "2948640",
    "end": "2954000"
  },
  {
    "text": "for yocto compatibility so you can actually get the the badge of",
    "start": "2954000",
    "end": "2960400"
  },
  {
    "text": "approval from the youtube developers um you can give me a given couple there be a give them a copy of your bsp",
    "start": "2960400",
    "end": "2968839"
  },
  {
    "text": "layer and they're pretty nice people they will",
    "start": "2968839",
    "end": "2974400"
  },
  {
    "text": "suggest some changes maybe um but if it's perfect that will give you the badge",
    "start": "2974400",
    "end": "2981200"
  },
  {
    "text": "and then having done that it would be really nice to publish the layer out this is the thing i was trying to",
    "start": "2982480",
    "end": "2987520"
  },
  {
    "text": "remember so this is the layer index layers.openembedding.org slash layer index",
    "start": "2987520",
    "end": "2992640"
  },
  {
    "text": "so then that would appear as a bsp layout on there and then anybody in the world can download your bsp and use your",
    "start": "2992640",
    "end": "2998800"
  },
  {
    "text": "fantastic computer board",
    "start": "2998800",
    "end": "3002640"
  },
  {
    "text": "advantages to getting it right this is kind of obvious reduced development costs",
    "start": "3005200",
    "end": "3011200"
  },
  {
    "text": "help from the community the yorktow developers are very very keen to help people write vsps",
    "start": "3011200",
    "end": "3018640"
  },
  {
    "text": "happier users more easily integrated into other people's",
    "start": "3020400",
    "end": "3026480"
  },
  {
    "text": "products so given that list you would wonder why",
    "start": "3026480",
    "end": "3032480"
  },
  {
    "text": "don't why is it that there's a problem with bsps and answers i don't know",
    "start": "3032480",
    "end": "3039040"
  },
  {
    "text": "but the advantages of getting the bsp right are kind of overwhelming",
    "start": "3039040",
    "end": "3044800"
  },
  {
    "text": "and that is basically it so",
    "start": "3046720",
    "end": "3052559"
  },
  {
    "text": "any questions or are you are you also totally",
    "start": "3052559",
    "end": "3058240"
  },
  {
    "text": "overwhelmed",
    "start": "3058240",
    "end": "3061240"
  },
  {
    "text": "so if i'm buying a board in which has a which comes with a bsb would i need to create my own bsp",
    "start": "3077040",
    "end": "3084079"
  },
  {
    "text": "no not in that case i would use the bsp that i've been given",
    "start": "3084079",
    "end": "3090400"
  },
  {
    "text": "but i may want to make some changes so i'll need to add some bb appends because i want to use um",
    "start": "3090400",
    "end": "3097520"
  },
  {
    "text": "a later kernel version or some extra features or whatever so",
    "start": "3097520",
    "end": "3103119"
  },
  {
    "text": "as a user of a dev board you will be typically modifying an",
    "start": "3103119",
    "end": "3108240"
  },
  {
    "text": "existing bsp rather than writing one from scratch",
    "start": "3108240",
    "end": "3113720"
  },
  {
    "text": "exactly so yeah so the bsp you get from the um the vendor i mean raspberry pi is",
    "start": "3124720",
    "end": "3129760"
  },
  {
    "text": "a good example so you get the raspberry pi bsp that has um hooks in it for everything that",
    "start": "3129760",
    "end": "3136400"
  },
  {
    "text": "raspberry pi can do which is a vast number of things and then on top of that you just select the particular features that you want",
    "start": "3136400",
    "end": "3143680"
  },
  {
    "text": "to make it into a drone or a computer or whatever you want",
    "start": "3143680",
    "end": "3149359"
  },
  {
    "text": "yeah",
    "start": "3149359",
    "end": "3152359"
  },
  {
    "text": "uh so dts is the device tree source uh it's a standard um for all linux devices",
    "start": "3166800",
    "end": "3174319"
  },
  {
    "text": "um i'm not so familiar with vxworks um but so the device free so device tree dts",
    "start": "3174319",
    "end": "3183280"
  },
  {
    "text": "is used throughout linux for all architectures apart from x86",
    "start": "3183280",
    "end": "3190880"
  },
  {
    "text": "so x86 as we know is weird but everything else uses dts device trees",
    "start": "3190880",
    "end": "3198400"
  },
  {
    "text": "so you yeah um",
    "start": "3198400",
    "end": "3203960"
  },
  {
    "text": "okay so so coming from the audience then is that yeah so",
    "start": "3221200",
    "end": "3226640"
  },
  {
    "text": "vx works whenever vx works also uses dts device tree files but they're not they're",
    "start": "3226640",
    "end": "3233359"
  },
  {
    "text": "they're similar to but not identical to the linux dts files",
    "start": "3233359",
    "end": "3238799"
  },
  {
    "text": "um anyone else no no",
    "start": "3241920",
    "end": "3246960"
  },
  {
    "text": "yeah",
    "start": "3246960",
    "end": "3249960"
  },
  {
    "text": "so yes the question is would you do this for something like an arduino and the answer is",
    "start": "3256480",
    "end": "3261520"
  },
  {
    "text": "more or less no so the so yokto project is",
    "start": "3261520",
    "end": "3268160"
  },
  {
    "text": "mostly for linux based systems not to say you can't so you can build um",
    "start": "3268160",
    "end": "3276078"
  },
  {
    "text": "uh zephyr yeah stuffer uh there is support for for example zephyr which is another real-time operating system",
    "start": "3277040",
    "end": "3283920"
  },
  {
    "text": "um and in principle since it's just a build system you could do it for anything",
    "start": "3283920",
    "end": "3289520"
  },
  {
    "text": "um but in practice yokto is mostly used for linux",
    "start": "3289520",
    "end": "3295839"
  },
  {
    "text": "so yes so more powerful things 32 and 64-bit processors with",
    "start": "3295839",
    "end": "3302480"
  },
  {
    "text": "quite a few hundred megabytes of ram",
    "start": "3302480",
    "end": "3306760"
  },
  {
    "text": "okay question where do you set the cpu architecture and other things yes um i kind of",
    "start": "3314799",
    "end": "3320720"
  },
  {
    "text": "skipped over that yeah so um in the",
    "start": "3320720",
    "end": "3325760"
  },
  {
    "text": "um so in in the",
    "start": "3325760",
    "end": "3330720"
  },
  {
    "text": "machine count file you will include tunings for whichever processor",
    "start": "3331200",
    "end": "3338960"
  },
  {
    "text": "you're having so you'll have include for um i can remember",
    "start": "3338960",
    "end": "3344079"
  },
  {
    "text": "arch 64 or um x or or x86 or whatever so it is",
    "start": "3344079",
    "end": "3351359"
  },
  {
    "text": "in the excuse me you include the appropriate uh machine tunings as part of your uh conf",
    "start": "3351359",
    "end": "3358240"
  },
  {
    "text": "file",
    "start": "3358240",
    "end": "3361240"
  },
  {
    "text": "okay",
    "start": "3366559",
    "end": "3369559"
  },
  {
    "text": "its",
    "start": "3384559",
    "end": "3387559"
  },
  {
    "text": "uh so the question is how does yocto fit into the zephyr",
    "start": "3391119",
    "end": "3397040"
  },
  {
    "text": "um board support package um the the simple answer is i have no clue",
    "start": "3397040",
    "end": "3402799"
  },
  {
    "text": "i'm afraid um because i've not used zephyr and i'm not really familiar with",
    "start": "3402799",
    "end": "3408079"
  },
  {
    "text": "the the support for that all i know is that there is a meta-zephyr layer uh for yocto and i see commits on the mail list",
    "start": "3408079",
    "end": "3415040"
  },
  {
    "text": "from time to time but i've no real idea what it is that they do",
    "start": "3415040",
    "end": "3421798"
  },
  {
    "text": "okay",
    "start": "3422319",
    "end": "3425319"
  },
  {
    "text": "so yeah so the so far as i understand um the integration with the octo and zephyr is",
    "start": "3440079",
    "end": "3446640"
  },
  {
    "text": "exactly as with linux it's a bunch of bb files and light metal layers and whatever that support",
    "start": "3446640",
    "end": "3451839"
  },
  {
    "text": "uh that architecture but the details of that i'm afraid i are beyond me",
    "start": "3451839",
    "end": "3459480"
  },
  {
    "text": "okay so we're pretty much out of time so thank you all very much for uh turning",
    "start": "3461359",
    "end": "3466720"
  },
  {
    "text": "up and listening to me and just before we go there's one little thing i want to do i hope you don't mind",
    "start": "3466720",
    "end": "3472799"
  },
  {
    "text": "um i really want to do a selfie of myself standing in front of an audience which is not a thing i've done",
    "start": "3472799",
    "end": "3479440"
  },
  {
    "text": "in recent times so shield your faces if you don't appear in",
    "start": "3479440",
    "end": "3484720"
  },
  {
    "text": "my picture there we go just to prove there were people in the",
    "start": "3484720",
    "end": "3490400"
  },
  {
    "text": "room so thank you all very much and see you",
    "start": "3490400",
    "end": "3495760"
  },
  {
    "text": "next year [Applause]",
    "start": "3495760",
    "end": "3500439"
  },
  {
    "text": "you",
    "start": "3506400",
    "end": "3508480"
  }
]