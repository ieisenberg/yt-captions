[
  {
    "text": "I'm really excited this is the part where I tell you I am definitely going to post the slides on my site tonight",
    "start": "6160",
    "end": "12000"
  },
  {
    "text": "except for in this talk there are no slides but the cool part is the code",
    "start": "12000",
    "end": "17320"
  },
  {
    "text": "that we're going to build today is already online at github.com robd level",
    "start": "17320",
    "end": "22680"
  },
  {
    "text": "up devops GitHub actions and kubernetes here it is yeah if you want to grab an easier",
    "start": "22680",
    "end": "30759"
  },
  {
    "text": "URL to get there let's head over to Rob rich.org Rob rich.org we'll click on",
    "start": "30759",
    "end": "36320"
  },
  {
    "text": "presentations here at the top and here's level up your devops with GitHub actions and kubernetes and the link to the",
    "start": "36320",
    "end": "42039"
  },
  {
    "text": "GitHub repository is right there while we're here on Rob rich.org let's take a look at the about me page",
    "start": "42039",
    "end": "49160"
  },
  {
    "text": "and we'll see some of the things that I've done recently uh I'm a uh both Microsoft and Docker have",
    "start": "49160",
    "end": "56600"
  },
  {
    "text": "given me some awards uh Redgate as well uh and Cyprus a give Camp is really fun",
    "start": "56600",
    "end": "62800"
  },
  {
    "text": "AZ give Camp brings volunteer developers together with Charities to build free software we start building software",
    "start": "62800",
    "end": "69040"
  },
  {
    "text": "Friday after work Sunday afternoon we deliver that completed software to Charities sleep is optional caffeine",
    "start": "69040",
    "end": "75080"
  },
  {
    "text": "provided if you're in Phoenix come join us for the next a give camp or if you'd like a GI Camp here in Oslo or wherever",
    "start": "75080",
    "end": "81400"
  },
  {
    "text": "you traveled from find me here at the event or hit me up on any of the socials and let's get a give camp in your",
    "start": "81400",
    "end": "87840"
  },
  {
    "text": "neighborhood too some of the other things that I've done um I've written a few books well",
    "start": "87840",
    "end": "94240"
  },
  {
    "text": "some chapters in books um and one of the things I'm particularly proud of I replied to a net rocks podcast episode",
    "start": "94240",
    "end": "100840"
  },
  {
    "text": "they read my comment on the air and they sent me a mug so there's my claim to fame by",
    "start": "100840",
    "end": "106200"
  },
  {
    "text": "coveted net rocks mug so let's dig into level up your devops with GitHub actions and",
    "start": "106200",
    "end": "112880"
  },
  {
    "text": "kubernetes I understand that in about 20 minutes we're going to get a national test of the broadcast system and all our",
    "start": "112880",
    "end": "119360"
  },
  {
    "text": "phones are going to beep at maximum volume this will be really entertaining hopefully the build is going by then so",
    "start": "119360",
    "end": "126680"
  },
  {
    "text": "we'll see if you want to turn off your phones from what I understand even muting them won't actually stop the",
    "start": "126680",
    "end": "132520"
  },
  {
    "text": "beeping so yeah my phone too this will be entertaining here's a repository it's",
    "start": "132520",
    "end": "138599"
  },
  {
    "text": "pretty much empty I did come in here and create some Secrets here so I come into",
    "start": "138599",
    "end": "144720"
  },
  {
    "text": "secrets and I created some Secrets here just to be able to use over the course of our build",
    "start": "144720",
    "end": "150360"
  },
  {
    "text": "but otherwise it's a pretty empty repository let's build up a website",
    "start": "150360",
    "end": "155720"
  },
  {
    "text": "we'll put it inside of a container we'll deploy it through a devop pipeline and start it in",
    "start": "155720",
    "end": "160959"
  },
  {
    "text": "kubernetes so here's that folder I've got nothing in kubernetes I've got nothing in this directory and let's",
    "start": "160959",
    "end": "167640"
  },
  {
    "text": "start by scaffolding out a website now we could scaffold out a website in anything but U Net's kind of fun so",
    "start": "167640",
    "end": "173519"
  },
  {
    "text": "let's say net new I'm going to do an MVC site I'll say name is level up Dev Ops",
    "start": "173519",
    "end": "181319"
  },
  {
    "text": "thank you GitHub co-pilot it knows where I'm going here output into the current",
    "start": "181319",
    "end": "186959"
  },
  {
    "text": "folder now both name and output are optional parameters if I didn't put in those parameters it would use my folder",
    "start": "186959",
    "end": "193159"
  },
  {
    "text": "name and create a new folder inside of it so I would have a demo folder and a second demo folder inside the demo",
    "start": "193159",
    "end": "199159"
  },
  {
    "text": "folder with my site there but I just scaffolded it right here so we've got",
    "start": "199159",
    "end": "204760"
  },
  {
    "text": "that there let's open it up in vs code and we'll take a look at it excellent so",
    "start": "204760",
    "end": "210920"
  },
  {
    "text": "we've got this full site we've got controllers here's our home controller we've got views here's our home View and",
    "start": "210920",
    "end": "219239"
  },
  {
    "text": "it says welcome let's say welcome to NDC Oslo",
    "start": "219239",
    "end": "226319"
  },
  {
    "text": "excellent so now that we've got our website built let's see if we can put it",
    "start": "226319",
    "end": "231560"
  },
  {
    "text": "inside of a get repository so I'm going to create a dog ignore file dog ignore",
    "start": "231560",
    "end": "240040"
  },
  {
    "text": "and let's start talking about the things that we need in our get ignore file this is everything that we don't want to",
    "start": "240040",
    "end": "245480"
  },
  {
    "text": "commit to our repository because it'll change frequently or we could download it again it will just create CFT in our",
    "start": "245480",
    "end": "252959"
  },
  {
    "text": "repository there's five groups of things here downloaded",
    "start": "252959",
    "end": "257959"
  },
  {
    "text": "content built content temp",
    "start": "257959",
    "end": "264400"
  },
  {
    "text": "files user files and secrets",
    "start": "264400",
    "end": "270759"
  },
  {
    "text": "cool those are the five things that I don't want to commit to my repository so let's take a look at each group and make",
    "start": "270759",
    "end": "277000"
  },
  {
    "text": "sure that we've ignored the things that we need to downloaded content well if I'm in a Net Framework project I would",
    "start": "277000",
    "end": "283639"
  },
  {
    "text": "have the packages folder if I'm in a node project I have the node modules",
    "start": "283639",
    "end": "289360"
  },
  {
    "text": "folder in net core well we have neither of those so I'll just leave that section blank cool next up built content well I",
    "start": "289360",
    "end": "299440"
  },
  {
    "text": "have the bin and obge folders here those are both built content I don't want to",
    "start": "299440",
    "end": "305080"
  },
  {
    "text": "commit those to Source control temp files well um actually let me move temp",
    "start": "305080",
    "end": "311000"
  },
  {
    "text": "files down here let's talk about user specific files I have the vs folder",
    "start": "311000",
    "end": "316960"
  },
  {
    "text": "star. suo star. user these are all files generated specifically for my",
    "start": "316960",
    "end": "323039"
  },
  {
    "text": "environment that starts talking about my use of Visual Studio or vs code and I don't want to commit those if I'm using",
    "start": "323039",
    "end": "329240"
  },
  {
    "text": "another ID IDE I might want to ignore for example the idea folder maybe I want",
    "start": "329240",
    "end": "336360"
  },
  {
    "text": "to ignore the vs code folder U depends on what conventions we use there now all",
    "start": "336360",
    "end": "342880"
  },
  {
    "text": "these are user specific files so I don't want to inflict my preferences on you or your preferences on me if I move things",
    "start": "342880",
    "end": "349440"
  },
  {
    "text": "around or happen to change different settings in my ID that isn't necessarily",
    "start": "349440",
    "end": "354479"
  },
  {
    "text": "the a thing that you may want to accept next up temp files so start st. log",
    "start": "354479",
    "end": "361280"
  },
  {
    "text": "star. TMP star. back yeah definitely don't want to commit this SQL database backups",
    "start": "361280",
    "end": "368240"
  },
  {
    "text": "star. arig that's where we have um merge files from git any of these starts to",
    "start": "368240",
    "end": "375120"
  },
  {
    "text": "Temp files if you get to a commit window and there's files that look like they're really odd you might want to add to this",
    "start": "375120",
    "end": "381840"
  },
  {
    "text": "list and then next up Secrets now I might have aend file so I'll add that",
    "start": "381840",
    "end": "387199"
  },
  {
    "text": "here but let's actually look at where we would put secrets so I have this uh app",
    "start": "387199",
    "end": "392840"
  },
  {
    "text": "settings. Json file and I'll probably put my connection strings in here so let's put in connection strings and",
    "start": "392840",
    "end": "400560"
  },
  {
    "text": "we'll do my",
    "start": "400560",
    "end": "404199"
  },
  {
    "text": "DB and let's create the server and we would put in our secret there but let's",
    "start": "408039",
    "end": "414000"
  },
  {
    "text": "not put Secrets there let's instead use environment variables in production use",
    "start": "414000",
    "end": "420479"
  },
  {
    "text": "andar and that's my cue so that when I start up the website and it fails and it",
    "start": "420479",
    "end": "426000"
  },
  {
    "text": "says I can't connect to use nvar it's like oh let me go check in the environment",
    "start": "426000",
    "end": "431240"
  },
  {
    "text": "variables okay so that's the one that I'll use in production in development I'll probably want to put my local",
    "start": "431240",
    "end": "438599"
  },
  {
    "text": "connection string right here so I'll start doing the server game again",
    "start": "438599",
    "end": "444840"
  },
  {
    "text": "and again that's a secret let's not do that let's say use user",
    "start": "444840",
    "end": "451240"
  },
  {
    "text": "secrets and I love that user Secrets is built into asp.net core so that we can",
    "start": "451240",
    "end": "456840"
  },
  {
    "text": "just grab the things now I have an extension here I have the net user",
    "start": "456840",
    "end": "462120"
  },
  {
    "text": "Secrets extension which allows me to come in here to my CSR and I'll say",
    "start": "462120",
    "end": "468520"
  },
  {
    "text": "manage user Secrets now the first time it's going to say hey you don't have a",
    "start": "468520",
    "end": "473680"
  },
  {
    "text": "setting in your CSR file so it just added it for me right here now it just",
    "start": "473680",
    "end": "479840"
  },
  {
    "text": "needs to be a unique string by default it creates a guid and that's interesting",
    "start": "479840",
    "end": "485319"
  },
  {
    "text": "but not super discoverable so I'm going to change that to level up Dev",
    "start": "485319",
    "end": "491599"
  },
  {
    "text": "Ops and um now if I manage user Secrets",
    "start": "491599",
    "end": "496919"
  },
  {
    "text": "again you can see that well last time I did this demo I set the connection string this file you can see is in my",
    "start": "496919",
    "end": "504520"
  },
  {
    "text": "local app data roaming folder it's in my user profile so it'll definitely not end",
    "start": "504520",
    "end": "509759"
  },
  {
    "text": "up in Source control so excellent we were able to move our settings outside of app",
    "start": "509759",
    "end": "515719"
  },
  {
    "text": "settings. development. Json app settings. Json and so here in our G ignore we probably don't need to ignore",
    "start": "515719",
    "end": "522919"
  },
  {
    "text": "those app settings things it doesn't have secrets in it now we do want to double check and make sure as we're",
    "start": "522919",
    "end": "528800"
  },
  {
    "text": "committing things that we don't accidentally commit our secrets there but I think we're good cool so we've got",
    "start": "528800",
    "end": "535320"
  },
  {
    "text": "our G ignore file let's close to close",
    "start": "535320",
    "end": "540360"
  },
  {
    "text": "others next up we want to get this into a container let's build up the docker",
    "start": "540360",
    "end": "546320"
  },
  {
    "text": "file and Docker ignore that we'll need to be able to get this in place so I'm going to start with the docker",
    "start": "546320",
    "end": "553160"
  },
  {
    "text": "ignore and this Docker ignore file has nearly the same syntax as a g ignore",
    "start": "553160",
    "end": "558720"
  },
  {
    "text": "file so I'm actually just going to grab that g ignore file and set it into place now I say nearly the same because",
    "start": "558720",
    "end": "566880"
  },
  {
    "text": "in a doer ignore it as assumes that it's relative to the beginning of the",
    "start": "566880",
    "end": "572000"
  },
  {
    "text": "repository where in a g ignore it's in any directory so if I have nested",
    "start": "572000",
    "end": "578120"
  },
  {
    "text": "folders I might want to say well in any folder the bin and OB folders now I'm",
    "start": "578120",
    "end": "584000"
  },
  {
    "text": "just going to do that for those two but we might want to run around to all of them maybe that one needs to go in",
    "start": "584000",
    "end": "589160"
  },
  {
    "text": "folders maybe these ones need to go in folders and so we can walk through all of these places ensuring that we've got",
    "start": "589160",
    "end": "597040"
  },
  {
    "text": "the the settings set just so now we've got",
    "start": "597040",
    "end": "604120"
  },
  {
    "text": "those five places downloaded files built files temp files user specific files and",
    "start": "604120",
    "end": "611560"
  },
  {
    "text": "secrets inside of a Docker ignore file there's a six setting and it is nonproduction files so let's add that",
    "start": "611560",
    "end": "620399"
  },
  {
    "text": "nonproduction files now in this section we'll do um",
    "start": "620399",
    "end": "626640"
  },
  {
    "text": "app settings. development. Json GitHub co-pilot knows where I'm going",
    "start": "626640",
    "end": "631880"
  },
  {
    "text": "there and we'll also add here",
    "start": "631880",
    "end": "637079"
  },
  {
    "text": "this launch settings. Json this is all of the settings that we would use locally to start it up inside IAS or",
    "start": "637079",
    "end": "644000"
  },
  {
    "text": "from the command line and we definitely don't want that inside of our container so that one is in a folder we'll say",
    "start": "644000",
    "end": "650760"
  },
  {
    "text": "launch settings. Json and now we're ignoring that file",
    "start": "650760",
    "end": "656959"
  },
  {
    "text": "too these are all the things that we don't want to copy into our production container now the cool part here is that",
    "start": "656959",
    "end": "663839"
  },
  {
    "text": "will ensure that we have a clean unique environment to be able to build this one",
    "start": "663839",
    "end": "669040"
  },
  {
    "text": "of the principles of devops is that we always build in this neutral environment and a Docker container will be exactly",
    "start": "669040",
    "end": "675880"
  },
  {
    "text": "that we've excluded everything that might be user specific or temporary or not production so that we can have this",
    "start": "675880",
    "end": "682000"
  },
  {
    "text": "clean environment every time you have aor I have a spelling error where",
    "start": "682000",
    "end": "690399"
  },
  {
    "text": "yes I do thank you it is not lunch settings it is launch settings",
    "start": "692399",
    "end": "699600"
  },
  {
    "text": "better thank you that was",
    "start": "699600",
    "end": "703279"
  },
  {
    "text": "awesome thank you co-pilot for giving me that spelling error I love it Docker",
    "start": "705079",
    "end": "710440"
  },
  {
    "text": "file the next one we want to build is the docker file now it's important that this is Docker file and not Docker",
    "start": "710440",
    "end": "716240"
  },
  {
    "text": "file.txt so if your editor created it is Docker file.txt easy enough to rename it",
    "start": "716240",
    "end": "721959"
  },
  {
    "text": "and just make it Docker file yeah file without an extension Windows loves that",
    "start": "721959",
    "end": "728079"
  },
  {
    "text": "part now I do have the docker extension installed and so because of that I get",
    "start": "728079",
    "end": "733800"
  },
  {
    "text": "these nice icons I get some autocomplete help and that's pretty cool so with there's four main verbs",
    "start": "733800",
    "end": "740720"
  },
  {
    "text": "here in a Docker file there's from copy run and CMD and if you understand these",
    "start": "740720",
    "end": "749199"
  },
  {
    "text": "four main verbs you can read and write most Docker files pretty much in their entirety and that's really cool we'll",
    "start": "749199",
    "end": "754959"
  },
  {
    "text": "see a few more today but these four verbs are the things that do that Docker",
    "start": "754959",
    "end": "760760"
  },
  {
    "text": "content so let's start with from we want to stand on the shoulders of giants we want to start with a base image that has",
    "start": "760760",
    "end": "767079"
  },
  {
    "text": "the tools that we need but not too many so let's head off to Docker Hub and we'll search for",
    "start": "767079",
    "end": "774560"
  },
  {
    "text": "net and we'll land here on this repository that is a meta reposit",
    "start": "774560",
    "end": "779639"
  },
  {
    "text": "of all the other net repositories now net samples is great",
    "start": "779639",
    "end": "784760"
  },
  {
    "text": "lots of different Docker files that we can use for examples to pull from monitor is fun monitoring a net app",
    "start": "784760",
    "end": "791519"
  },
  {
    "text": "runtime depths is everything that we would need to install net but net isn't installed yet built on top of that is",
    "start": "791519",
    "end": "798920"
  },
  {
    "text": "the runtime it allows us to run console apps but not web servers built on top of",
    "start": "798920",
    "end": "804959"
  },
  {
    "text": "that is ASP net that allows us to run web servers but doesn't have the build Tools in installed and then SDK is the",
    "start": "804959",
    "end": "811040"
  },
  {
    "text": "one with the build tools well we want to build so let's start there let's open up this one and take a look at the base",
    "start": "811040",
    "end": "818959"
  },
  {
    "text": "image here's that base image and I'm using net 8 so I'll pull",
    "start": "818959",
    "end": "824839"
  },
  {
    "text": "that one scrolling down we can see various tags and there's one uh if we",
    "start": "824839",
    "end": "831440"
  },
  {
    "text": "just use 8 net 8 we're building on top of Debian but Alpine is significantly",
    "start": "831440",
    "end": "837040"
  },
  {
    "text": "smaller so let's use 8.0 Alpine and that'll give us a smaller base image so",
    "start": "837040",
    "end": "843480"
  },
  {
    "text": "from this Das Alpine and we now have all of the build Tools in our base image so",
    "start": "843480",
    "end": "850399"
  },
  {
    "text": "that we can start to compile our asp.net application excellent let's copy",
    "start": "850399",
    "end": "856000"
  },
  {
    "text": "everything from the directory where we'll run our Docker build command into the current directory in",
    "start": "856000",
    "end": "862759"
  },
  {
    "text": "our image what is that current directory let's set worker to slsrc",
    "start": "862759",
    "end": "869639"
  },
  {
    "text": "now that could be anything I could say VAR lib Fu bar and it will recursively",
    "start": "869639",
    "end": "875639"
  },
  {
    "text": "create and change into those directories to be able to build there but in this case ah SRC is completely fine that's",
    "start": "875639",
    "end": "882759"
  },
  {
    "text": "descriptive enough for me I'm copying everything into place now that I've copied everything into the place now",
    "start": "882759",
    "end": "889399"
  },
  {
    "text": "let's run some build commands if I was in uh shell maybe I'm in bash or maybe",
    "start": "889399",
    "end": "896639"
  },
  {
    "text": "I'm in Powers shell then what are the the commands that I would run well let's do a net restore and I'll do demo. sln",
    "start": "896639",
    "end": "906240"
  },
  {
    "text": "the uh I have the new C devkit extension so it automatically generated for me",
    "start": "906240",
    "end": "912240"
  },
  {
    "text": "demo. sln that's pretty coolnet build I'll build in release",
    "start": "912240",
    "end": "919440"
  },
  {
    "text": "mode demo. sln new in.net eight it now builds in release",
    "start": "919440",
    "end": "925839"
  },
  {
    "text": "mode by default if it notices it's in a container that's pretty cool but I'll be explicit here net test I'm also going to",
    "start": "925839",
    "end": "934240"
  },
  {
    "text": "test in release mode just to make sure that I don't end up with one debug build and one release",
    "start": "934240",
    "end": "941600"
  },
  {
    "text": "build when I go to try and publish it and then finally",
    "start": "941600",
    "end": "946880"
  },
  {
    "text": "net publish I'll publish in release mode",
    "start": "946880",
    "end": "952440"
  },
  {
    "text": "I'll go to the app folder and I'm going to do level up devops. CS G that's the",
    "start": "952440",
    "end": "960199"
  },
  {
    "text": "project that I want to publish cool so those would be all the commands that I would run from the",
    "start": "960199",
    "end": "966120"
  },
  {
    "text": "command line if I was going to do this in uh shell script and so maybe I might",
    "start": "966120",
    "end": "971319"
  },
  {
    "text": "want to move this to build.sh and just call it but I kind of like it right here",
    "start": "971319",
    "end": "976600"
  },
  {
    "text": "so now how do we run these as Docker commands well let's do this let's run",
    "start": "976600",
    "end": "982959"
  },
  {
    "text": "this one let's run this one and this one one and this one and",
    "start": "982959",
    "end": "991360"
  },
  {
    "text": "now they are Docker commands cool so to be able to get this",
    "start": "991360",
    "end": "997440"
  },
  {
    "text": "built container I need to run my test correctly I also need to build correctly",
    "start": "997440",
    "end": "1002880"
  },
  {
    "text": "so if I have a build error then my build will stop here and I won't get farther",
    "start": "1002880",
    "end": "1008079"
  },
  {
    "text": "if my test fail I'll stop here and I won't get farther and that's really cool because now I know if I have a published",
    "start": "1008079",
    "end": "1015560"
  },
  {
    "text": "image I know that my build succeeded I know all my tests passed",
    "start": "1015560",
    "end": "1020800"
  },
  {
    "text": "next let's set some environment variables like aspet core URLs we'll go to port 8080 in this case the plus means",
    "start": "1020800",
    "end": "1029079"
  },
  {
    "text": "all uh IP addresses so not just the loop back IP address or um but I want to grab",
    "start": "1029079",
    "end": "1035640"
  },
  {
    "text": "the public address as well let's do ASP net core environment equals production",
    "start": "1035640",
    "end": "1041839"
  },
  {
    "text": "that looks great and let's expose port 8080 now that doesn't actually expose it",
    "start": "1041839",
    "end": "1049400"
  },
  {
    "text": "it's just metadata on my image that says if you start you probably want to forward traffic in on this",
    "start": "1049400",
    "end": "1056360"
  },
  {
    "text": "port great so I've got all of these in place I probably also want to say",
    "start": "1056360",
    "end": "1063200"
  },
  {
    "text": "inv um connection string uncore uncore my DB and I'm going",
    "start": "1063200",
    "end": "1071919"
  },
  {
    "text": "to set that to blank because I want the people consuming my app to set this",
    "start": "1071919",
    "end": "1077000"
  },
  {
    "text": "environment variable so that they can then connect to the database",
    "start": "1077000",
    "end": "1083080"
  },
  {
    "text": "successfully excellent now CMD is that last thing and",
    "start": "1083080",
    "end": "1088400"
  },
  {
    "text": "it's the only one that runs at runtime all the rest of these commands ran at build time and so by the time I've",
    "start": "1088400",
    "end": "1095320"
  },
  {
    "text": "finished my build by the time I've pushed my image up to Docker Hub or another registry then all of that part",
    "start": "1095320",
    "end": "1101960"
  },
  {
    "text": "is done but as I pull it down and I start it as a container what do I want to do I want to start LevelUp devops.",
    "start": "1101960",
    "end": "1110200"
  },
  {
    "text": "dll and I'm going to set work dur to slapp to ensure that I'm now in the",
    "start": "1110200",
    "end": "1115720"
  },
  {
    "text": "correct directory excellent we've got a Docker file now this Docker file would work",
    "start": "1115720",
    "end": "1122240"
  },
  {
    "text": "great in production we could use this today but there are some best practices that we can leverage here so let's add",
    "start": "1122240",
    "end": "1128200"
  },
  {
    "text": "some best practices well one of the things that we want to do is avoid build",
    "start": "1128200",
    "end": "1133240"
  },
  {
    "text": "tools inside of our production image if for example this container got popped",
    "start": "1133240",
    "end": "1139280"
  },
  {
    "text": "and somebody uploaded their own source code they could compile it they could add that to my project and now I'm",
    "start": "1139280",
    "end": "1145559"
  },
  {
    "text": "starting to run their code let me see if I can remove the build tools from the production",
    "start": "1145559",
    "end": "1151559"
  },
  {
    "text": "image now I could definitely build outside the container and copy into it but then I lose my neutral environment",
    "start": "1151559",
    "end": "1157720"
  },
  {
    "text": "we definitely want to keep a neutral environment here so let's head back over to the to dockerhub and we'll find the",
    "start": "1157720",
    "end": "1166159"
  },
  {
    "text": "aspnet runtime so let's pop up in the ASP net runtime and we will take a look at",
    "start": "1166159",
    "end": "1173039"
  },
  {
    "text": "exactly that and then we will have there's that image that we want to grab scrolling",
    "start": "1173039",
    "end": "1180440"
  },
  {
    "text": "down a bit we can see that it definitely has an Alpine variant as well and",
    "start": "1180440",
    "end": "1186760"
  },
  {
    "text": "so the Alpine variant is the one that we'll use oh welcome to exactly that",
    "start": "1186760",
    "end": "1195520"
  },
  {
    "text": "time so I want to split my file in half now I want to have one side that is my",
    "start": "1196360",
    "end": "1202400"
  },
  {
    "text": "build server and one side that is my production runtime so I'm going to say",
    "start": "1202400",
    "end": "1207559"
  },
  {
    "text": "this is from this new base image- Alpine and",
    "start": "1207559",
    "end": "1213400"
  },
  {
    "text": "I've now split my build in half I now have a multi-stage build now this stage",
    "start": "1213400",
    "end": "1221080"
  },
  {
    "text": "at the top will be my build",
    "start": "1221080",
    "end": "1226280"
  },
  {
    "text": "server image and this one will be my production",
    "start": "1226280",
    "end": "1232600"
  },
  {
    "text": "runtime server image and I put server and air quotes here because it's not a",
    "start": "1232600",
    "end": "1238039"
  },
  {
    "text": "server it's a Docker container but we can kind of pretend it's a build server",
    "start": "1238039",
    "end": "1243280"
  },
  {
    "text": "and so we'll do that here's my build server here's my production runtime server cool we just built two different",
    "start": "1243280",
    "end": "1250880"
  },
  {
    "text": "images at the same time that's cool now here work dur is app and we",
    "start": "1250880",
    "end": "1258159"
  },
  {
    "text": "want to copy the files let's switch this over to the disc folder we want to copy",
    "start": "1258159",
    "end": "1263640"
  },
  {
    "text": "from the disc folder into the current folder and so now we'll get those",
    "start": "1263640",
    "end": "1269559"
  },
  {
    "text": "resources into place now the interesting thing here is that right now it's going to go look in this base in this uh host",
    "start": "1269559",
    "end": "1278279"
  },
  {
    "text": "folder for the disc folder probably ought to add that to my Docker ignore file we definitely don't want the disc",
    "start": "1278279",
    "end": "1285440"
  },
  {
    "text": "folder leaking into place and so really I want to copy it from up",
    "start": "1285440",
    "end": "1291200"
  },
  {
    "text": "here let's say copy-- from equals build",
    "start": "1291200",
    "end": "1296400"
  },
  {
    "text": "now where is build let's call this one as build now I could call it as Foo or",
    "start": "1296400",
    "end": "1303520"
  },
  {
    "text": "as bar but I don't know I think build is much more descriptive let's call this as",
    "start": "1303520",
    "end": "1308640"
  },
  {
    "text": "build nice so this is the build stage and we could also then rename the other stage",
    "start": "1308640",
    "end": "1315320"
  },
  {
    "text": "the U as prod or as run time or as Fu",
    "start": "1315320",
    "end": "1322080"
  },
  {
    "text": "but we're not going to use that name so I'll just leave that off cool so now here in this build stage",
    "start": "1322080",
    "end": "1331039"
  },
  {
    "text": "we'll have all of our source code and at the very end of this stage we will go",
    "start": "1331039",
    "end": "1337640"
  },
  {
    "text": "copy the published assets into place in this new image that does not have the",
    "start": "1337640",
    "end": "1343679"
  },
  {
    "text": "source code also does not have the build tools excellent if you upload source",
    "start": "1343679",
    "end": "1349640"
  },
  {
    "text": "code into my image and try to compile it there is no",
    "start": "1349640",
    "end": "1354799"
  },
  {
    "text": "compiler there's one more best practice that we can do let's imagine that we pop open this CSS file or this Javascript",
    "start": "1354799",
    "end": "1362600"
  },
  {
    "text": "file and we start making changes well that will invalidate the cache of this copy layer and then it will run this",
    "start": "1362600",
    "end": "1370440"
  },
  {
    "text": "layer which will redownload all of the new get packages I just changed the CSS file why",
    "start": "1370440",
    "end": "1377000"
  },
  {
    "text": "do I have to redownload all the pack packages really what I want to do is I want to put this first and then copy all",
    "start": "1377000",
    "end": "1385840"
  },
  {
    "text": "the things and then do the build publish and release excellent well I still do need to know what I need to restore so",
    "start": "1385840",
    "end": "1392440"
  },
  {
    "text": "let's copy in the demo. sln into place and copy level up devops.",
    "start": "1392440",
    "end": "1401679"
  },
  {
    "text": "cspr into place and now I've got the Manifest that",
    "start": "1401679",
    "end": "1408600"
  },
  {
    "text": "I need to be able to enumerate my dependencies and download those dependencies into",
    "start": "1408600",
    "end": "1414159"
  },
  {
    "text": "place so I'll grab my dependencies I'll net restore cache that layer and then",
    "start": "1414159",
    "end": "1422000"
  },
  {
    "text": "copy in everything else except for what I chose to ignore and then I'll build",
    "start": "1422000",
    "end": "1427600"
  },
  {
    "text": "test and publish and then finally copy those published results into place in",
    "start": "1427600",
    "end": "1433320"
  },
  {
    "text": "this really thin image that only includes that bundled and published content it doesn't include my source",
    "start": "1433320",
    "end": "1440360"
  },
  {
    "text": "code now if I didn't do this and I just said well let me run RM minus RF",
    "start": "1440360",
    "end": "1449400"
  },
  {
    "text": "SRC that's deleting the content out of this layer but it's still exists in this",
    "start": "1449480",
    "end": "1455320"
  },
  {
    "text": "base layer so my image is still going to be very large so we've now separated",
    "start": "1455320",
    "end": "1460400"
  },
  {
    "text": "this into two pieces to maintain that um that separation and ensure the",
    "start": "1460400",
    "end": "1465600"
  },
  {
    "text": "production image is as small as possible excellent so we now have a Docker file",
    "start": "1465600",
    "end": "1471640"
  },
  {
    "text": "using our best practices we don't have source code in our uh built image our",
    "start": "1471640",
    "end": "1476840"
  },
  {
    "text": "built image only has the runtime we're also leveraging caching to make our builds faster",
    "start": "1476840",
    "end": "1482640"
  },
  {
    "text": "locally now let's add a readme file new",
    "start": "1482640",
    "end": "1488120"
  },
  {
    "text": "file readme.md o they really like us",
    "start": "1488120",
    "end": "1497120"
  },
  {
    "text": "here's some read me content for our repository that'll help us help our users understand how to use our",
    "start": "1499240",
    "end": "1505200"
  },
  {
    "text": "repository okay now that we've done the docker bits and the GitHub bits the git",
    "start": "1505200",
    "end": "1510480"
  },
  {
    "text": "bits let's do the kubernetes bits I'm going to create a new file ks.",
    "start": "1510480",
    "end": "1518120"
  },
  {
    "text": "yaml and let's build some kubernetes content now the first thing uh I've got",
    "start": "1518120",
    "end": "1524000"
  },
  {
    "text": "this get this VSS code extension the uh kubernetes extension right here and that",
    "start": "1524000",
    "end": "1532120"
  },
  {
    "text": "that allows me to use some some Snippets it will pull in some interesting things",
    "start": "1532120",
    "end": "1537880"
  },
  {
    "text": "straight away so I can say will you create a deployment please it knows that it's a yaml file and so now I can just",
    "start": "1537880",
    "end": "1546360"
  },
  {
    "text": "scaffold out that level up Dev Ops perfect I want uh replicas to be one",
    "start": "1546360",
    "end": "1553520"
  },
  {
    "text": "that looks good I also want to add another label let's say image",
    "start": "1553520",
    "end": "1558799"
  },
  {
    "text": "is image",
    "start": "1558799",
    "end": "1564799"
  },
  {
    "text": "name image",
    "start": "1565000",
    "end": "1568480"
  },
  {
    "text": "label there we go and here in the image I'll also do that I'll say ACR URL",
    "start": "1572440",
    "end": "1579720"
  },
  {
    "text": "LevelUp devops image label this will be a replacement expression that will change",
    "start": "1579720",
    "end": "1586360"
  },
  {
    "text": "at build time to match the details associated with our application what is",
    "start": "1586360",
    "end": "1591399"
  },
  {
    "text": "the port the port is 8080 that's what we chose to do here in our Docker file 8080",
    "start": "1591399",
    "end": "1597200"
  },
  {
    "text": "is right there and we also want to set our",
    "start": "1597200",
    "end": "1604440"
  },
  {
    "text": "environment and so let's say the name is",
    "start": "1604480",
    "end": "1610240"
  },
  {
    "text": "connection strings uncore uncore my DB and that matches our",
    "start": "1610240",
    "end": "1619440"
  },
  {
    "text": "app settings where it says connection strings I could do two colons but environment variables don't like two",
    "start": "1619440",
    "end": "1624840"
  },
  {
    "text": "colons and so that'll set that that nicely matches here in the docker file",
    "start": "1624840",
    "end": "1630440"
  },
  {
    "text": "where I've got that connection strings now I probably want some",
    "start": "1630440",
    "end": "1637640"
  },
  {
    "text": "server equals some",
    "start": "1637640",
    "end": "1643039"
  },
  {
    "text": "server and the user and the password I definitely don't want those Secret here",
    "start": "1643360",
    "end": "1648799"
  },
  {
    "text": "so I probably want to either do this DB user and",
    "start": "1648799",
    "end": "1656120"
  },
  {
    "text": "DB password or even better I want to move that secret into a kubernetes",
    "start": "1656120",
    "end": "1662840"
  },
  {
    "text": "secret and reference it from here instead so I'll leave that as a exercise",
    "start": "1662840",
    "end": "1670399"
  },
  {
    "text": "for the reader let's create a service kubernetes service level up Dev",
    "start": "1670399",
    "end": "1677600"
  },
  {
    "text": "Ops I want the selector to be my app let's",
    "start": "1677600",
    "end": "1683039"
  },
  {
    "text": "double check that that's the selector here yep and the port is 8080 and the Target",
    "start": "1683039",
    "end": "1690240"
  },
  {
    "text": "Port is also port 8080 and now I have my service let's",
    "start": "1690240",
    "end": "1695760"
  },
  {
    "text": "create an Ingress as well kubernetes ingress level up Dev Ops I'll set the",
    "start": "1695760",
    "end": "1702960"
  },
  {
    "text": "app to level up devops there my host will be level up",
    "start": "1702960",
    "end": "1709200"
  },
  {
    "text": "devops. AKs URL and I'll forward that off to the",
    "start": "1709200",
    "end": "1715000"
  },
  {
    "text": "level up Dev Ops service on port",
    "start": "1715000",
    "end": "1720840"
  },
  {
    "text": "8080 cool now one more thing that I want to do I want to set",
    "start": "1720840",
    "end": "1728200"
  },
  {
    "text": "my Ingress class name to engine X now I",
    "start": "1728200",
    "end": "1734960"
  },
  {
    "text": "know that engine X is my Ingress controller and it can be able to catch that and put the content into",
    "start": "1734960",
    "end": "1742600"
  },
  {
    "text": "place excellent so now we've got our kubernetes yaml file I'm just going to",
    "start": "1747039",
    "end": "1753320"
  },
  {
    "text": "go double check it and make sure I didn't typo things let's grab this",
    "start": "1753320",
    "end": "1759320"
  },
  {
    "text": "one and we'll use beyond compare to go look at the one that I built last",
    "start": "1759320",
    "end": "1765480"
  },
  {
    "text": "time and check for typos oh I called it version",
    "start": "1765480",
    "end": "1771720"
  },
  {
    "text": "last time that's",
    "start": "1771720",
    "end": "1774679"
  },
  {
    "text": "fine I had a typo in that part too that's cool we'll come back to TLS if we have a",
    "start": "1779200",
    "end": "1785000"
  },
  {
    "text": "moment cool excellent so we've got our cetes content we've built our website we've",
    "start": "1785000",
    "end": "1792919"
  },
  {
    "text": "built theg ignore file we've built the docker ignore file and Docker file get",
    "start": "1792919",
    "end": "1798200"
  },
  {
    "text": "it into a Docker container we've built the kubernetes content to be able to launch it in kubernetes and now let's",
    "start": "1798200",
    "end": "1804440"
  },
  {
    "text": "commit it to our source code repository now I'm going to very specifically look",
    "start": "1804440",
    "end": "1809760"
  },
  {
    "text": "at our G ignore file and see how we did uh do we have any downloaded",
    "start": "1809760",
    "end": "1815799"
  },
  {
    "text": "content um well actually we do we have uh a bunch of this bootstrap",
    "start": "1815799",
    "end": "1823279"
  },
  {
    "text": "content let's actually head over to cdnjs and see if we can reference those",
    "start": "1823279",
    "end": "1829039"
  },
  {
    "text": "from the cloud instead let's look for bootstrap and we'll take a look at the",
    "start": "1829039",
    "end": "1835120"
  },
  {
    "text": "bootstrap oh yep let's use bootstrap.min.css I'm going to copy that",
    "start": "1835120",
    "end": "1840880"
  },
  {
    "text": "tag and we'll come here into our view into our shared layout View and here in",
    "start": "1840880",
    "end": "1849600"
  },
  {
    "text": "this bootstrap reference we'll just reference that as a CDN",
    "start": "1849600",
    "end": "1854760"
  },
  {
    "text": "resource now I don't need it in my project anymore excellent let's also come down here at",
    "start": "1854760",
    "end": "1861679"
  },
  {
    "text": "the bottom and we'll uh do a similar lookup inside of cdnjs to be able to",
    "start": "1861679",
    "end": "1867639"
  },
  {
    "text": "grab the two scripts we've got um bootstrap and uh jury for some reason",
    "start": "1867639",
    "end": "1875679"
  },
  {
    "text": "let's use those from a CDN here in our validate scripts partial let's replace",
    "start": "1875679",
    "end": "1880960"
  },
  {
    "text": "these with CDN resources as well and so now I've got that the other way to go",
    "start": "1880960",
    "end": "1887720"
  },
  {
    "text": "here would be to create a package Json and npm install them um at that point",
    "start": "1887720",
    "end": "1892960"
  },
  {
    "text": "then I have two dependencies i' I'd need to modify my G ignore to U do that and we'd also need to modify our um Docker",
    "start": "1892960",
    "end": "1901679"
  },
  {
    "text": "file to be able to do the npm install but now that we've got these",
    "start": "1901679",
    "end": "1907919"
  },
  {
    "text": "outside of the repository we can come back here into our www rout and all of",
    "start": "1907919",
    "end": "1915000"
  },
  {
    "text": "these folders we no longer need anymore we're those libraries from somewhere else",
    "start": "1915000",
    "end": "1922639"
  },
  {
    "text": "excellent so now that we've got that solved let's come back here into our",
    "start": "1922639",
    "end": "1928480"
  },
  {
    "text": "commit window do we have downloaded content nope very",
    "start": "1928480",
    "end": "1934760"
  },
  {
    "text": "nice do we have built content no excellent user",
    "start": "1934760",
    "end": "1944080"
  },
  {
    "text": "files no temp files any Secret let's pop open our launch not launch settings our",
    "start": "1944080",
    "end": "1953159"
  },
  {
    "text": "app settings. Json and app settings. development. Json nope no secrets there",
    "start": "1953159",
    "end": "1958320"
  },
  {
    "text": "very nice let's stage all these changes level up Dev",
    "start": "1958320",
    "end": "1966480"
  },
  {
    "text": "Ops is it okay if I don't call it initial",
    "start": "1966480",
    "end": "1971120"
  },
  {
    "text": "commit Okay so we've got our website and now let's get push origin Main",
    "start": "1971840",
    "end": "1978639"
  },
  {
    "text": "and push that up to GitHub if you now come back to this GitHub repository and refresh it you",
    "start": "1978639",
    "end": "1985799"
  },
  {
    "text": "should now see the content great our repository isn't empty anymore now let's",
    "start": "1985799",
    "end": "1991360"
  },
  {
    "text": "build up a devops pipeline to be able to get this into the place I'm going to come into GitHub actions and forget to",
    "start": "1991360",
    "end": "1998240"
  },
  {
    "text": "delete the practice",
    "start": "1998240",
    "end": "2001200"
  },
  {
    "text": "runs and let's take a look at GitHub actions now the cool part here with GitHub actions is we can pick from lots",
    "start": "2006279",
    "end": "2012720"
  },
  {
    "text": "of different templates here's ones that it decided were relevant here's deployment things security things",
    "start": "2012720",
    "end": "2019360"
  },
  {
    "text": "continuous integration automation Pages or we can even start with a completely",
    "start": "2019360",
    "end": "2025039"
  },
  {
    "text": "empty workflow and it will get us going there I'm going to go back here and I'm",
    "start": "2025039",
    "end": "2030559"
  },
  {
    "text": "going to choose a simple workflow that'll get us started here's our simple workflow and",
    "start": "2030559",
    "end": "2037960"
  },
  {
    "text": "start configuring from there cool so I'm going to do this",
    "start": "2037960",
    "end": "2044480"
  },
  {
    "text": "Docker build kubernetes run that's what my",
    "start": "2044480",
    "end": "2050079"
  },
  {
    "text": "build will do let's clean up some of this we want to do it on push to the",
    "start": "2050079",
    "end": "2056720"
  },
  {
    "text": "main branch that's great we'll come back to pull request let's remove that",
    "start": "2056720",
    "end": "2062638"
  },
  {
    "text": "workflow dispatch is great have you ever done a thing where you you want to kick off the build so you commit well a space",
    "start": "2062639",
    "end": "2069158"
  },
  {
    "text": "in some random file if you have workflow dispatch you're able",
    "start": "2069159",
    "end": "2075240"
  },
  {
    "text": "to uh there that's happy you're able to kick off the build directly from inside",
    "start": "2075240",
    "end": "2080320"
  },
  {
    "text": "GitHub we'll see that in a minute now what do I want it to do well I would like it",
    "start": "2080320",
    "end": "2086760"
  },
  {
    "text": "to do these steps it'll run on auntu that's excellent it starts out by",
    "start": "2086760",
    "end": "2093040"
  },
  {
    "text": "checking out my content and then I can choose to run one line script or a",
    "start": "2093040",
    "end": "2098400"
  },
  {
    "text": "multi-line script I like that let's start with a multi-line script and build up all the steps that we need to do",
    "start": "2098400",
    "end": "2104440"
  },
  {
    "text": "let's say Docker build and push C cuber nit Cube CTL apply those will be",
    "start": "2104440",
    "end": "2114880"
  },
  {
    "text": "the steps that we do excellent so Docker build I'll tag this right away level up",
    "start": "2114880",
    "end": "2122000"
  },
  {
    "text": "Dev Ops version and in the current directory",
    "start": "2122000",
    "end": "2127720"
  },
  {
    "text": "well I want to tag it with my container registry we did have that secret that we",
    "start": "2127720",
    "end": "2133599"
  },
  {
    "text": "built previously and so let's go take a look at that secret here's my secrets that I created",
    "start": "2133599",
    "end": "2142160"
  },
  {
    "text": "and so my container registry I just happen to call this environment variable um ACR URL well how did we",
    "start": "2142160",
    "end": "2150400"
  },
  {
    "text": "build those Secrets let's come into using Secrets inside of GitHub actions we start off by creating the Secrets go",
    "start": "2150400",
    "end": "2158280"
  },
  {
    "text": "into settings click on secrets we will add a secret we did",
    "start": "2158280",
    "end": "2164760"
  },
  {
    "text": "that and then when we use it in the code we can use it like this dollar curly",
    "start": "2164760",
    "end": "2170440"
  },
  {
    "text": "curly secrets. that secret name and then that will reference our secret so let's",
    "start": "2170440",
    "end": "2176160"
  },
  {
    "text": "do that here too I want to say I want to reference my ACR URL and that then will",
    "start": "2176160",
    "end": "2185280"
  },
  {
    "text": "be the tag there and here I'm going to tag it with GitHub",
    "start": "2185280",
    "end": "2191200"
  },
  {
    "text": "do sha my GitHub my git hash now I could",
    "start": "2191200",
    "end": "2197440"
  },
  {
    "text": "use any version I could use the build number but what I like about the GitHub sha is it's going to be unique for this",
    "start": "2197440",
    "end": "2203560"
  },
  {
    "text": "source code and that will just create a natural mapping of if this is the image running in production I can get back to",
    "start": "2203560",
    "end": "2210680"
  },
  {
    "text": "the source code that created it cool so we've got that Docker build",
    "start": "2210680",
    "end": "2216480"
  },
  {
    "text": "let's say dock push this image into our container",
    "start": "2216480",
    "end": "2221960"
  },
  {
    "text": "registry of choice not there there and that will push it well",
    "start": "2221960",
    "end": "2228880"
  },
  {
    "text": "actually what it'll do right now is it will fail authentication we need to log into uh",
    "start": "2228880",
    "end": "2236119"
  },
  {
    "text": "dockerhub uh in this case aure container registry so let's do a Docker login and",
    "start": "2236119",
    "end": "2243440"
  },
  {
    "text": "we'll take a look at oh here's a cool task we can go go view the marketplace",
    "start": "2243440",
    "end": "2248680"
  },
  {
    "text": "listing and we can see how this task works we could take a look at the GitHub",
    "start": "2248680",
    "end": "2254079"
  },
  {
    "text": "repository that builds this task we can take a look at various use",
    "start": "2254079",
    "end": "2261520"
  },
  {
    "text": "cases and we can get a really cool setup here of how we might use",
    "start": "2262800",
    "end": "2268599"
  },
  {
    "text": "this that's great or the shortcut here here's the",
    "start": "2268599",
    "end": "2276440"
  },
  {
    "text": "content of how we use it right here I'll just copy that and I'll set that into place right here and unfortunately we",
    "start": "2276440",
    "end": "2283119"
  },
  {
    "text": "need to indent it very carefully because well yaml there we go now we've got this",
    "start": "2283119",
    "end": "2289480"
  },
  {
    "text": "Docker login in place and let's set it in place now we've got this registry we",
    "start": "2289480",
    "end": "2296359"
  },
  {
    "text": "have nope not that one we have this secret ACR URL and that'll get us",
    "start": "2296359",
    "end": "2302000"
  },
  {
    "text": "straight into that registry if we were in Docker Hub we wouldn't need that what is our username well let's put in the",
    "start": "2302000",
    "end": "2309680"
  },
  {
    "text": "ACR username and then we'll look at the",
    "start": "2309680",
    "end": "2316760"
  },
  {
    "text": "password we have a secret for that too ACR",
    "start": "2316760",
    "end": "2322519"
  },
  {
    "text": "password excellent we'll leave ACR off and then let's talk about log out now if",
    "start": "2324800",
    "end": "2331440"
  },
  {
    "text": "we're on a shared host we probably want to remove our secrets after this use and",
    "start": "2331440",
    "end": "2337520"
  },
  {
    "text": "so let's definitely log out part of GitHub actions this hosted Runner is it's just going to destroy the whole VM",
    "start": "2337520",
    "end": "2343599"
  },
  {
    "text": "after we're done and so our secret will definitely be gone but it's good code hygiene if we're using a local Runner or",
    "start": "2343599",
    "end": "2351040"
  },
  {
    "text": "we have a corporate Runner then maybe this is more important but let's do good code hygiene will remove our secret that",
    "start": "2351040",
    "end": "2358000"
  },
  {
    "text": "doesn't remove it after this step runs but rather after the entire build runs",
    "start": "2358000",
    "end": "2363480"
  },
  {
    "text": "it will clean out that secret excellent so now that we're logged into",
    "start": "2363480",
    "end": "2369839"
  },
  {
    "text": "Docker now we can Docker push and get that into our Azure container registry perfect the next thing we want",
    "start": "2369839",
    "end": "2378040"
  },
  {
    "text": "to do is Cube C apply DF ks. yaml and",
    "start": "2378040",
    "end": "2383720"
  },
  {
    "text": "that will run our kubernetes yl file into our kubernetes cluster well in a",
    "start": "2383720",
    "end": "2388920"
  },
  {
    "text": "similar way we need to log into kubernetes so we do have a secret here",
    "start": "2388920",
    "end": "2394240"
  },
  {
    "text": "that is our Cube config that Cube config came from inside",
    "start": "2394240",
    "end": "2402319"
  },
  {
    "text": "of the uh inside my user profile inside thecube folder there's a config file and",
    "start": "2402319",
    "end": "2409680"
  },
  {
    "text": "I'm definitely not going to open that one it has actual secrets in here but there's that base 64 encoded CT and the",
    "start": "2409680",
    "end": "2416319"
  },
  {
    "text": "base 64 encoded CT and key and so I just need to pick out those parts of that",
    "start": "2416319",
    "end": "2423359"
  },
  {
    "text": "that Cube config that represents my production deployment so I grabbed that I set that in the",
    "start": "2423359",
    "end": "2430240"
  },
  {
    "text": "secret and so now let's go reference that as we log in so let's come back to",
    "start": "2430240",
    "end": "2437400"
  },
  {
    "text": "the marketplace and we'll search for kubernetes set",
    "start": "2437400",
    "end": "2444240"
  },
  {
    "text": "context that one looks great let's grab that yaml right there and indent it a",
    "start": "2444240",
    "end": "2452000"
  },
  {
    "text": "little bit differently the there we go and so what",
    "start": "2452000",
    "end": "2459960"
  },
  {
    "text": "is our method well Cube config we've got that Cube config secret there and because we have the cube config we can",
    "start": "2459960",
    "end": "2467160"
  },
  {
    "text": "set the secret here to secrets. cube",
    "start": "2467160",
    "end": "2474440"
  },
  {
    "text": "config and then we can remove all the rest of these These are parameters for the other methods of authenticating and",
    "start": "2474440",
    "end": "2480920"
  },
  {
    "text": "now we are authenticated into our kubernetes cluster we're able to now run kubernetes commands on that cluster as",
    "start": "2480920",
    "end": "2487319"
  },
  {
    "text": "part of our build now one of the things that we had done here inside this kubernetes EML",
    "start": "2487319",
    "end": "2494040"
  },
  {
    "text": "file is we have these replacement Expressions dbuser we have image label",
    "start": "2494040",
    "end": "2501000"
  },
  {
    "text": "ACR URL AKs URL is down here and we want to be able to leverage these secrets or",
    "start": "2501000",
    "end": "2508480"
  },
  {
    "text": "these configuration values inside of our build so we could definitely use Helm",
    "start": "2508480",
    "end": "2513920"
  },
  {
    "text": "and Helm might be a great solution here but it might be a little little bit overkill for this small project so",
    "start": "2513920",
    "end": "2520079"
  },
  {
    "text": "instead I'm going to grab this said",
    "start": "2520079",
    "end": "2525200"
  },
  {
    "text": "expression that will do some of that work for us here's that set expression and I'm",
    "start": "2525200",
    "end": "2532599"
  },
  {
    "text": "going to wrap so that we can see it I'm going to said without backup the text",
    "start": "2532599",
    "end": "2538599"
  },
  {
    "text": "ACR URL with the value of that secret the text AKs URL with the value of that",
    "start": "2538599",
    "end": "2544960"
  },
  {
    "text": "secret the text image label with the GitHub Shaw and I will do all that",
    "start": "2544960",
    "end": "2550480"
  },
  {
    "text": "inside the kubernetes yl file cool so just a quick said to be able to replace",
    "start": "2550480",
    "end": "2557000"
  },
  {
    "text": "the the find and replace inside that text file to be able to get the actual values in place that we need for this",
    "start": "2557000",
    "end": "2563359"
  },
  {
    "text": "kubernetes yaml file so here's our build we'll run on",
    "start": "2563359",
    "end": "2569480"
  },
  {
    "text": "auntu we'll check out our latest code we'll log into Docker using all those secrets we don't have any secrets",
    "start": "2569480",
    "end": "2576000"
  },
  {
    "text": "embedded in our Dev pipeline they're all secrets inside of github's secret",
    "start": "2576000",
    "end": "2581119"
  },
  {
    "text": "manager we'll log into kubernetes we are still not putting secrets in our build file we'll Docker build that will run",
    "start": "2581119",
    "end": "2589200"
  },
  {
    "text": "all of the steps here in this Docker file build test and publish we have",
    "start": "2589200",
    "end": "2595200"
  },
  {
    "text": "those multi-stage builds in place then we will push that to our container registry we will replace those",
    "start": "2595200",
    "end": "2602319"
  },
  {
    "text": "expressions and we'll finally run that inside of kubernetes",
    "start": "2602319",
    "end": "2607440"
  },
  {
    "text": "now I chose specifically to put this said line here because if I put this said line here and if say for example we",
    "start": "2607440",
    "end": "2615280"
  },
  {
    "text": "come back into our Docker ignore and somebody forgot to put in the uh the",
    "start": "2615280",
    "end": "2622520"
  },
  {
    "text": "k8s yaml file here in the nonproduction files then we might copy those secrets",
    "start": "2622520",
    "end": "2629200"
  },
  {
    "text": "into our container and now if you were able to pop my production container you could get my deployment Secrets as well",
    "start": "2629200",
    "end": "2636400"
  },
  {
    "text": "so let's not do that let's instead move this said line down to after we've",
    "start": "2636400",
    "end": "2642800"
  },
  {
    "text": "pushed this to the registry the secrets don't even exist in",
    "start": "2642800",
    "end": "2647839"
  },
  {
    "text": "that file until after the container is already gone and in our container",
    "start": "2647839",
    "end": "2653040"
  },
  {
    "text": "registry perfect so now let's come here let's commit this change",
    "start": "2653040",
    "end": "2659400"
  },
  {
    "text": "create Dev Ops Pipeline and we will commit that change",
    "start": "2659400",
    "end": "2667760"
  },
  {
    "text": "now the cool part is that oh I I called it blank. yl that's entertaining this is just one of the",
    "start": "2667760",
    "end": "2674960"
  },
  {
    "text": "regular files inside of my repository so I can do a git pull and then I will see",
    "start": "2674960",
    "end": "2682319"
  },
  {
    "text": "this file appear inside my repository there's that file and I can just",
    "start": "2682319",
    "end": "2688040"
  },
  {
    "text": "interact with it as a regular file along with all the other things that I'm doing",
    "start": "2688040",
    "end": "2695640"
  },
  {
    "text": "cool now that means I can continue editing it here but I can also continue editing it here I can just pop open this",
    "start": "2695640",
    "end": "2703119"
  },
  {
    "text": "file I can click edit I'm back in that developer experience with the marketplace and I can start to drag in",
    "start": "2703119",
    "end": "2709079"
  },
  {
    "text": "additional tasks but because it's in the GitHub workflows folder and because I've",
    "start": "2709079",
    "end": "2715119"
  },
  {
    "text": "enabled it then we get a build the kicks off which by the way failed why did it",
    "start": "2715119",
    "end": "2723000"
  },
  {
    "text": "fail because I type the CSR file in my Docker file let's go",
    "start": "2724720",
    "end": "2732960"
  },
  {
    "text": "fix that typo yeah it's not nested in a",
    "start": "2732960",
    "end": "2741000"
  },
  {
    "text": "folder fix typo let's commit that and push it get",
    "start": "2742920",
    "end": "2750800"
  },
  {
    "text": "push and we'll kick off another build",
    "start": "2753400",
    "end": "2758640"
  },
  {
    "text": "cool so this build is going to then do each of the steps in our devop pipeline so let's take a look at that it logs",
    "start": "2758640",
    "end": "2765359"
  },
  {
    "text": "into Docker it logs into kubernetes it's going to run each of the steps of our",
    "start": "2765359",
    "end": "2771079"
  },
  {
    "text": "Docker file and once it finishes that task it's going to push that up to kubernetes so right",
    "start": "2771079",
    "end": "2781480"
  },
  {
    "text": "now Cube C Cube CTL get all",
    "start": "2782119",
    "end": "2787359"
  },
  {
    "text": "I don't have anything in kubernetes yet so it will create new resources that's",
    "start": "2787359",
    "end": "2794200"
  },
  {
    "text": "perfect let's see what the build's going to do the build's going to wait for a runner oh there we go so we did all of",
    "start": "2794200",
    "end": "2802800"
  },
  {
    "text": "those steps we pushed that up to our container registry we started that in kubernetes and so if we come back over",
    "start": "2802800",
    "end": "2809559"
  },
  {
    "text": "here we can see those resources are now in kubernetes",
    "start": "2809559",
    "end": "2815359"
  },
  {
    "text": "cool now netes and DNS DN DNS takes a while to propagate so instead of waiting",
    "start": "2815359",
    "end": "2822599"
  },
  {
    "text": "for this host to show up I'm just going to jump straight in place we can take a look at how we might use kubernetes uh",
    "start": "2822599",
    "end": "2830119"
  },
  {
    "text": "port forwarding to D dig directly into that now we could definitely port",
    "start": "2830119",
    "end": "2835960"
  },
  {
    "text": "forward into a pod um there we go port forward into a",
    "start": "2835960",
    "end": "2843480"
  },
  {
    "text": "pod or we could port forward into a deployment it'll pick a random pod we can port forward into a service uh we",
    "start": "2843480",
    "end": "2850920"
  },
  {
    "text": "can't port forward into an Ingress but um skipping the Ingress because you know DNS takes a while let's port forward",
    "start": "2850920",
    "end": "2858000"
  },
  {
    "text": "straight into this service Cube CTL port forward",
    "start": "2858000",
    "end": "2865240"
  },
  {
    "text": "service SL LevelUp devops we'll go from port 8080 in our local machine to port 8080 inside that service now this isn't",
    "start": "2865240",
    "end": "2872599"
  },
  {
    "text": "going to return right away because it it's got that connection live to it and let's come over here and we'll go to",
    "start": "2872599",
    "end": "2879280"
  },
  {
    "text": "Local Host 8080 and we see our website running in the cloud right now the one",
    "start": "2879280",
    "end": "2885800"
  },
  {
    "text": "that didn't exist an hour ago wo that was",
    "start": "2885800",
    "end": "2891310"
  },
  {
    "text": "[Applause] awesome we did a devops pipeline from start to finish and got this deployed",
    "start": "2891310",
    "end": "2898400"
  },
  {
    "text": "into a container running in kubernetes now let's take a look at uh",
    "start": "2898400",
    "end": "2903760"
  },
  {
    "text": "pull request because we set that one aside for a bit um I want to come back here into my uh",
    "start": "2903760",
    "end": "2911760"
  },
  {
    "text": "build and let's copy this build and create a new build I'm going to create",
    "start": "2911760",
    "end": "2917040"
  },
  {
    "text": "this new build that is Docker pr.",
    "start": "2917040",
    "end": "2923640"
  },
  {
    "text": "yaml and I could definitely create conditions here I could say um condition",
    "start": "2923720",
    "end": "2931480"
  },
  {
    "text": "or uh if the um build was on certain branch",
    "start": "2931480",
    "end": "2937559"
  },
  {
    "text": "and I could you know jump around there but in this case our build will be substantively different so we'll do this",
    "start": "2937559",
    "end": "2944079"
  },
  {
    "text": "as a separate build file instead build a PR and so I want to run this on branches",
    "start": "2944079",
    "end": "2951440"
  },
  {
    "text": "that are not Main and I also want to do this on Polar",
    "start": "2951440",
    "end": "2956760"
  },
  {
    "text": "request that uh I'll do this on any polar request Branch now why do we have both well for",
    "start": "2956760",
    "end": "2965520"
  },
  {
    "text": "internal collaboration people who are part of our project they're probably going to create a new Branch maybe it's",
    "start": "2965520",
    "end": "2971720"
  },
  {
    "text": "feature SL something and then they'll want to uh merge that back in So this top one will grab that build for",
    "start": "2971720",
    "end": "2979319"
  },
  {
    "text": "external collaborators people on the internet who Fork the repository create a pull request back into our repository",
    "start": "2979319",
    "end": "2986119"
  },
  {
    "text": "they'll come in through this reference and so they'll create pull requests into our repository and it'll kick off the",
    "start": "2986119",
    "end": "2992720"
  },
  {
    "text": "build here so we have one for internal collaborators and one for external",
    "start": "2992720",
    "end": "2998040"
  },
  {
    "text": "collaborators excellent now what do we want to do well",
    "start": "2998040",
    "end": "3003480"
  },
  {
    "text": "we probably don't want to run this P request in kubernetes because well that's our production environment so",
    "start": "3003480",
    "end": "3009760"
  },
  {
    "text": "let's not do that well if we're not going to log in if we're not going to run stuff in kubernetes we don't need to",
    "start": "3009760",
    "end": "3015400"
  },
  {
    "text": "log into kubernetes which probably means we also don't need to set the secrets in our kubernetes Amo file our build is",
    "start": "3015400",
    "end": "3021920"
  },
  {
    "text": "getting simpler that's cool let's also not push this image to our Azure",
    "start": "3021920",
    "end": "3027280"
  },
  {
    "text": "container registry we don't want some random PR image to accidentally get pushed into production someday we",
    "start": "3027280",
    "end": "3033000"
  },
  {
    "text": "probably want to rebuild it and so we probably don't even need to log into Docker",
    "start": "3033000",
    "end": "3040000"
  },
  {
    "text": "either so let's remove that to that end I'm not even going to reference this secret right here I will just say that",
    "start": "3040960",
    "end": "3047720"
  },
  {
    "text": "your container is named level up devops PR we're not going to push it anywhere",
    "start": "3047720",
    "end": "3053760"
  },
  {
    "text": "we don't need that registry name it just eliminates another secet secret cool so we've got this new build",
    "start": "3053760",
    "end": "3060559"
  },
  {
    "text": "file and let's also come back into this read me and let's add a a tag so let's",
    "start": "3060559",
    "end": "3067760"
  },
  {
    "text": "go back into that build and we'll take a look at this",
    "start": "3067760",
    "end": "3073880"
  },
  {
    "text": "build run and we'll come here and we'll say I would like to create a status",
    "start": "3073880",
    "end": "3079000"
  },
  {
    "text": "badge copy that status badge and let's set that",
    "start": "3079000",
    "end": "3084040"
  },
  {
    "text": "right there cool so we've got our status badge we've got",
    "start": "3084040",
    "end": "3090119"
  },
  {
    "text": "our pull request build and we're going to commit this then to our main branch so oh we've also got that changes good",
    "start": "3090119",
    "end": "3097359"
  },
  {
    "text": "thing that somebody remembered to ignore that kubernetes yl file so we don't accidentally deploy that and so we're",
    "start": "3097359",
    "end": "3104319"
  },
  {
    "text": "going to say add PR build and Status badge and commit that now last time we",
    "start": "3104319",
    "end": "3112920"
  },
  {
    "text": "pushed from the command line this time let's push from vs code and so we'll push that into our GitHub",
    "start": "3112920",
    "end": "3121200"
  },
  {
    "text": "repository and so now there's that new run there and it's going to kick off a",
    "start": "3121200",
    "end": "3126880"
  },
  {
    "text": "build last time we went in this way this time let's come in this way here's that",
    "start": "3126880",
    "end": "3131960"
  },
  {
    "text": "new build and so it's going to do each of those steps it's going to start off logging into Docker then it will log",
    "start": "3131960",
    "end": "3138799"
  },
  {
    "text": "into kubernetes then it will start doing all of those steps in our Docker file and so it will kick off a Docker build",
    "start": "3138799",
    "end": "3147200"
  },
  {
    "text": "oh it's copying the stuff is it going to succeed in our build yep our build succeeded we have no",
    "start": "3147200",
    "end": "3154000"
  },
  {
    "text": "test so we have no failing test so that succeeded let's publish our thing into the other image and we'll push that",
    "start": "3154000",
    "end": "3160440"
  },
  {
    "text": "image up to our GitHub uh our Azure container registry we will now start",
    "start": "3160440",
    "end": "3165559"
  },
  {
    "text": "that image um inside of kubernetes and now our build",
    "start": "3165559",
    "end": "3172000"
  },
  {
    "text": "succeeded great we've got our new version inside of kubernetes well how do we know that the new version",
    "start": "3172000",
    "end": "3178240"
  },
  {
    "text": "got deployed well let's take a look at this Cube CTL get all now one of the",
    "start": "3178240",
    "end": "3185720"
  },
  {
    "text": "things that we did was we very specifically created this",
    "start": "3185720",
    "end": "3190839"
  },
  {
    "text": "label on our on our pod that said that image label and in our devops pipeline",
    "start": "3190839",
    "end": "3199520"
  },
  {
    "text": "we went and found that um image label",
    "start": "3199520",
    "end": "3206720"
  },
  {
    "text": "um and we replaced it with the GitHub hash so let's take a look at that resource Cube C describe pod slash this",
    "start": "3206720",
    "end": "3218160"
  },
  {
    "text": "level up devops one the one that's running oh nope the One That's",
    "start": "3218160",
    "end": "3223599"
  },
  {
    "text": "pending right here I bet it's running by now though and let's take a look at that",
    "start": "3223599",
    "end": "3230240"
  },
  {
    "text": "content well we have a bunch of stuff it's triggered it's looking for an",
    "start": "3230240",
    "end": "3235359"
  },
  {
    "text": "available node it's uh here's our limits on it and here's our version 8849 be if",
    "start": "3235359",
    "end": "3243880"
  },
  {
    "text": "we come back into our source code we can see 8849 be is the git commit that we",
    "start": "3243880",
    "end": "3249880"
  },
  {
    "text": "just pushed so now we can really easily get from the running resources to the",
    "start": "3249880",
    "end": "3256319"
  },
  {
    "text": "source code that created it I would even go a step further and put it on the web page down in the legal things that get",
    "start": "3256319",
    "end": "3263920"
  },
  {
    "text": "hashed so that if somebody sends me a screen shot of the website I can say oh I know exactly what G commit I need to",
    "start": "3263920",
    "end": "3270960"
  },
  {
    "text": "check out to be able to replicate your issue excellent so we have that running",
    "start": "3270960",
    "end": "3277960"
  },
  {
    "text": "um and we also have that uh PR build in",
    "start": "3277960",
    "end": "3283480"
  },
  {
    "text": "place and this code is now up on GitHub starting with our empty repo we did it",
    "start": "3283480",
    "end": "3289920"
  },
  {
    "text": "thanks for [Applause]",
    "start": "3289920",
    "end": "3295319"
  },
  {
    "text": "coming for",
    "start": "3295319",
    "end": "3299359"
  }
]