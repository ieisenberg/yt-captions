[
  {
    "start": "0",
    "end": "90000"
  },
  {
    "text": "okay hello good morning that's that's the spirit yeah come on good morning oh",
    "start": "2260",
    "end": "10080"
  },
  {
    "text": "thank you sir so welcome my name is Dominic that's",
    "start": "10080",
    "end": "16810"
  },
  {
    "text": "Brock and for those who don't know us or for those who know us we kind of have",
    "start": "16810",
    "end": "23740"
  },
  {
    "text": "luxury and not everybody agrees on the word luxury of doing you know security",
    "start": "23740",
    "end": "29109"
  },
  {
    "text": "stuff full-time like every day you know and since security is such a broad field",
    "start": "29109",
    "end": "36160"
  },
  {
    "text": "we kind of specialize on authentication prime you know what is these days called",
    "start": "36160",
    "end": "43719"
  },
  {
    "text": "identity and access control they are which is basically building authentication architectures and you",
    "start": "43719",
    "end": "50079"
  },
  {
    "text": "know single sign-on and and these things so and it turns out when you do that",
    "start": "50079",
    "end": "57640"
  },
  {
    "text": "like every single day it's important it gets really easy yes because you kind of seen almost everything and it's very you",
    "start": "57640",
    "end": "64448"
  },
  {
    "text": "know it becomes easy to map the architecture to the right you know like cookbook style solution right but once",
    "start": "64449",
    "end": "73780"
  },
  {
    "text": "you're done with authentication then inevitably you will hit the problem of okay so now I know who the user is but",
    "start": "73780",
    "end": "80200"
  },
  {
    "text": "what is he allowed to do in my application right and that turns out it's much much harder then then just",
    "start": "80200",
    "end": "88450"
  },
  {
    "text": "figuring out who the user is so for many",
    "start": "88450",
    "end": "94120"
  },
  {
    "start": "90000",
    "end": "90000"
  },
  {
    "text": "many years yeah our standard answer was yeah you know that it's very application specific and you know identity server",
    "start": "94120",
    "end": "102370"
  },
  {
    "text": "which is the open source project we're working on kind of it's like a like a turnkey style solution already for most",
    "start": "102370",
    "end": "108850"
  },
  {
    "text": "of indication scenarios so people were asking us I can you do the same thing for authorization you know just do",
    "start": "108850",
    "end": "115420"
  },
  {
    "text": "episode use authorization and I'm done and it turns out that it's not that easy",
    "start": "115420",
    "end": "120670"
  },
  {
    "text": "right the first observation is anytime",
    "start": "120670",
    "end": "125680"
  },
  {
    "text": "somebody asked me that question I said okay so how does authorization work at your company right and then you know you",
    "start": "125680",
    "end": "132129"
  },
  {
    "text": "ask 10 people you get 15 arms after that and it turns out you know everybody does it",
    "start": "132129",
    "end": "138910"
  },
  {
    "text": "a little bit differently and and that there's a really blurry line between what is authorization and what is",
    "start": "138910",
    "end": "143920"
  },
  {
    "text": "business logic and what are business rules and what is security related and",
    "start": "143920",
    "end": "150310"
  },
  {
    "text": "what is just you know the way your company works and we identified a couple",
    "start": "150310",
    "end": "157270"
  },
  {
    "text": "of common approaches you know like something like Rose for example you know like I'm a I'm a doctor I'm allowed to",
    "start": "157270",
    "end": "164140"
  },
  {
    "text": "do this yeah permissions right so Brock is allowed to stand on a wobbly stage",
    "start": "164140",
    "end": "171400"
  },
  {
    "text": "for example yeah some people use apples you know inspired",
    "start": "171400",
    "end": "176470"
  },
  {
    "text": "by how Windows works you know that you attach you have objects in a database",
    "start": "176470",
    "end": "182170"
  },
  {
    "text": "for example and you attach to who is allowed to do what to the object there which has its own own issues right or",
    "start": "182170",
    "end": "188500"
  },
  {
    "text": "inheritance and orphans and these things communities versus commands right so",
    "start": "188500",
    "end": "195340"
  },
  {
    "text": "commands are basically I I do something am I allowed to do that there vs. communities you you get some data but",
    "start": "195340",
    "end": "203350"
  },
  {
    "text": "you only want to show the data that the user is allowed to see right and you don't want to do the filtering ideally",
    "start": "203350",
    "end": "208690"
  },
  {
    "text": "not in the front end right and don't get all the data first and then hide the",
    "start": "208690",
    "end": "213880"
  },
  {
    "text": "data that he's not not supposed to see but you know do it more clever so you",
    "start": "213880",
    "end": "219519"
  },
  {
    "text": "know these are some common observations and I'm you know I'm here you all know that and then people ask that you know",
    "start": "219519",
    "end": "226930"
  },
  {
    "text": "like is there a standard solution to that yeah and you know who has used X a",
    "start": "226930",
    "end": "233350"
  },
  {
    "text": "camel in his life well a couple of people well one hand it's even hard to",
    "start": "233350",
    "end": "240430"
  },
  {
    "text": "pronounce right it's then for extensible authorization",
    "start": "240430",
    "end": "246910"
  },
  {
    "text": "markup Oh extensible access control markup language yeah",
    "start": "246910",
    "end": "252579"
  },
  {
    "text": "and that was an attempt to to to fill the standard framework for authorization",
    "start": "252579",
    "end": "258700"
  },
  {
    "text": "and as you can see with one hand going up it wasn't very successful man it was",
    "start": "258700",
    "end": "265330"
  },
  {
    "text": "really hard you can tell that something is too hard when people BSL on top of it that could use the XML",
    "start": "265330",
    "end": "271240"
  },
  {
    "text": "under the cover right and then put it as an eclipse plug-in so so broken ah you",
    "start": "271240",
    "end": "279100"
  },
  {
    "text": "know always like kind of yeah we could if we go to think about that next year or next year and then we finally sat",
    "start": "279100",
    "end": "286030"
  },
  {
    "text": "down a couple of months ago and and you know like okay let's let's try to build",
    "start": "286030",
    "end": "291550"
  },
  {
    "text": "something okay and that's something is what is talking about there it's maybe not you know it might not be that the",
    "start": "291550",
    "end": "297790"
  },
  {
    "text": "best solution ever or the you know just something we came up with and we're going to show it to you and maybe that's",
    "start": "297790",
    "end": "303460"
  },
  {
    "text": "an inspiration of how how you can do it yeah okay so the first problem we're",
    "start": "303460",
    "end": "312040"
  },
  {
    "start": "308000",
    "end": "308000"
  },
  {
    "text": "seeing is you know once you're moving into this modern application architecture you know you have this distributed systems you have all these",
    "start": "312040",
    "end": "318280"
  },
  {
    "text": "different client types and you know you have your browsers and your mobile devices and your your servers and your",
    "start": "318280",
    "end": "324669"
  },
  {
    "text": "web applications and your api's and all kinds of permutations of call patterns",
    "start": "324669",
    "end": "330100"
  },
  {
    "text": "you like delegation and trust the subsystem and it's getting already pretty complicated so the thing that",
    "start": "330100",
    "end": "336669"
  },
  {
    "text": "helps yeah is introducing the notion of an identity provider or a security token service right where you at the top of",
    "start": "336669",
    "end": "344560"
  },
  {
    "text": "this thing is to provide a stable identity for the user across all the",
    "start": "344560",
    "end": "349600"
  },
  {
    "text": "parts in your system yeah and that helps a lot right I mean now that wherever that same user goes to",
    "start": "349600",
    "end": "356440"
  },
  {
    "text": "he used the same user right and we can abstract that logic into a box so to",
    "start": "356440",
    "end": "365440"
  },
  {
    "text": "speak right and reuse that for all of",
    "start": "365440",
    "end": "370479"
  },
  {
    "text": "our you know parts of the application so you know that kind of like a",
    "start": "370479",
    "end": "375930"
  },
  {
    "text": "subconscious idea that everybody has oh now we have this central thing right and",
    "start": "375930",
    "end": "381190"
  },
  {
    "text": "it's issuing tokens and huh we can put stuff into tokens yeah that might be the solution to our permission problem yeah",
    "start": "381190",
    "end": "387640"
  },
  {
    "text": "so why not be just you know the user logs in in addition to just putting in",
    "start": "387640",
    "end": "393010"
  },
  {
    "text": "the identity of the user why not just put in the roles and the permissions and all that stuff into there as well and",
    "start": "393010",
    "end": "398169"
  },
  {
    "text": "that's how we see identity server our project often",
    "start": "398169",
    "end": "403210"
  },
  {
    "text": "being abused yeah and this might sound like a good idea to start with but once",
    "start": "403210",
    "end": "410169"
  },
  {
    "text": "you go down that road there are many many issues you're hitting and that's why we don't recommend that at all yeah",
    "start": "410169",
    "end": "418440"
  },
  {
    "text": "so that's my you know my the way I remember that is identity is not",
    "start": "418440",
    "end": "425919"
  },
  {
    "text": "permissions okay identity is you know my",
    "start": "425919",
    "end": "431949"
  },
  {
    "text": "name right on all my date of birth yeah a permission is for example you are",
    "start": "431949",
    "end": "437770"
  },
  {
    "text": "allowed to drink alcohol in the bar yeah but you know your your passport doesn't",
    "start": "437770",
    "end": "444130"
  },
  {
    "text": "say you are allowed to drink alcohol right because every country handles these things differently you have your passport has the date of birth on it and",
    "start": "444130",
    "end": "450880"
  },
  {
    "text": "then it's up to the end point to apply a local rule right that's how I remember",
    "start": "450880",
    "end": "457509"
  },
  {
    "text": "it it lives there it doesn't work for yourself okay so so you know when we",
    "start": "457509",
    "end": "465039"
  },
  {
    "start": "462000",
    "end": "462000"
  },
  {
    "text": "come to these customers they show us what they did like sit oh I think we have solved the Commission problem yeah",
    "start": "465039",
    "end": "470800"
  },
  {
    "text": "and they show us what they put into the tokens now and that is a good example of",
    "start": "470800",
    "end": "476289"
  },
  {
    "text": "a problematic token okay so the first thing we have is you know that makes",
    "start": "476289",
    "end": "481840"
  },
  {
    "text": "total sense we have authentication metadata where the token coming from how long does it live where can it be used",
    "start": "481840",
    "end": "488680"
  },
  {
    "text": "which is the first problematic thing as we'll see in a second there how did the",
    "start": "488680",
    "end": "494320"
  },
  {
    "text": "use authenticate who is to use a right of subject ID the name and then the",
    "start": "494320",
    "end": "499599"
  },
  {
    "text": "trouble starts right permissions so you know he can delete data okay he can",
    "start": "499599",
    "end": "505750"
  },
  {
    "text": "manage customer so that that's all like a hospital scenario yeah that's our little playground project he can change",
    "start": "505750",
    "end": "511599"
  },
  {
    "text": "a treatment plan now and then there are roles as well yeah and roles is also can",
    "start": "511599",
    "end": "520719"
  },
  {
    "text": "be problematic not necessarily so the way I like to think about roles is there",
    "start": "520719",
    "end": "526390"
  },
  {
    "text": "are identity roles and there are authorization roles now so an identity",
    "start": "526390",
    "end": "531490"
  },
  {
    "text": "role for you so we have discussed my appeals hospital software and every user is in one of three roles",
    "start": "531490",
    "end": "539830"
  },
  {
    "text": "it's either a doctor a nurse or a patient that is identity in my mind",
    "start": "539830",
    "end": "545440"
  },
  {
    "text": "right regardless where where this user is going to he will always be a doctor",
    "start": "545440",
    "end": "552610"
  },
  {
    "text": "or a nurse or a patient and there won't be situations where in one system he's the doctor and the other one he's a",
    "start": "552610",
    "end": "557920"
  },
  {
    "text": "nurse yeah it just doesn't happen okay so that that's okay and if you're",
    "start": "557920",
    "end": "565180"
  },
  {
    "text": "using these identity roles as includes to figuring out what this person is allowed to do for example the doctor is",
    "start": "565180",
    "end": "571450"
  },
  {
    "text": "allowed to change the treatment and the nurse isn't that's fine right but the",
    "start": "571450",
    "end": "579040"
  },
  {
    "text": "audience field yeah in in in tokens",
    "start": "579040",
    "end": "584260"
  },
  {
    "text": "tells tells you where is this token allowed to be used and in our scenario here it's API 1 and API - ok so now this",
    "start": "584260",
    "end": "593230"
  },
  {
    "text": "guy has the permission to delete data huh what does that mean in API one that",
    "start": "593230",
    "end": "601390"
  },
  {
    "text": "doesn't mean the same thing as an API - does he have the same permission in both api's yeah so the problem is really the",
    "start": "601390",
    "end": "610630"
  },
  {
    "start": "609000",
    "end": "609000"
  },
  {
    "text": "model in Olaf is not that you're getting one token per API you're getting one",
    "start": "610630",
    "end": "615730"
  },
  {
    "text": "token for all of your API it's right you don't want to go to the token service every single time you want to talk to it",
    "start": "615730",
    "end": "621970"
  },
  {
    "text": "to an API you ask for the token and say like you give me a token that that's good for API one two and three and you",
    "start": "621970",
    "end": "628630"
  },
  {
    "text": "get one token back and then you can use that right and what is the data that the",
    "start": "628630",
    "end": "634600"
  },
  {
    "text": "claims are ambiguous now yeah like a delete data yeah in one API that means",
    "start": "634600",
    "end": "640120"
  },
  {
    "text": "something else in India as in the other ma'am the roles you know if they are identity roles they will have to say",
    "start": "640120",
    "end": "647140"
  },
  {
    "text": "meaning in all api's but if they are authorization roles you know like I don't know what's notation role can",
    "start": "647140",
    "end": "654700"
  },
  {
    "text": "prescribe or prescriber prescribe medication prescriber whatever yeah",
    "start": "654700",
    "end": "660610"
  },
  {
    "text": "which also it which is are already the outcome of the authorization policy again there's a chance that this is",
    "start": "660610",
    "end": "666910"
  },
  {
    "text": "different in the patient data API or Indian ecology API as opposed to the cardiac",
    "start": "666910",
    "end": "671950"
  },
  {
    "text": "API for example okay so that's why I think it's it's a bad idea to put these",
    "start": "671950",
    "end": "678640"
  },
  {
    "text": "things into tokens the other thing is tokens are a very handy data structure to convey you know data from a token",
    "start": "678640",
    "end": "687160"
  },
  {
    "text": "service to and to an API because it's signed right so nobody can tamper with it that the recipient knows that it's",
    "start": "687160",
    "end": "693970"
  },
  {
    "text": "coming from a trusted issuer but the only way to get a new token is to go",
    "start": "693970",
    "end": "699490"
  },
  {
    "text": "back to the token service right of what if these permissions change during the lifetime often of a session what if you",
    "start": "699490",
    "end": "706540"
  },
  {
    "text": "want to remove the permission from this nurse to do I don't know take the",
    "start": "706540",
    "end": "711850"
  },
  {
    "text": "temperature right you're the only way she did this permission change will",
    "start": "711850",
    "end": "717370"
  },
  {
    "text": "become effective it's by getting a new token to me which means logging in and logging off and logging in again okay so",
    "start": "717370",
    "end": "724959"
  },
  {
    "text": "like like in Windows Yahoo Jim you might know that you are in Windows at logon time that the domain controller puts all",
    "start": "724959",
    "end": "731260"
  },
  {
    "text": "the ad group memberships into the Kerberos service ticket here and when the when the admin changes your group",
    "start": "731260",
    "end": "737050"
  },
  {
    "text": "memberships the only way to Det to become effective is you have to log out and log in again yeah and what if you",
    "start": "737050",
    "end": "743589"
  },
  {
    "text": "remove one too what if you what if he puts you in admin by accident and I said",
    "start": "743589",
    "end": "748600"
  },
  {
    "text": "please log out don't don't be an admin anymore yeah so yeah that's why we think",
    "start": "748600",
    "end": "755740"
  },
  {
    "text": "that security tokens are good for conveying identity and details about the",
    "start": "755740",
    "end": "760959"
  },
  {
    "text": "authentication but not good for conveying application data which authorization in my mind ultimately is",
    "start": "760959",
    "end": "768089"
  },
  {
    "text": "okay that's just what I just said so",
    "start": "768089",
    "end": "776040"
  },
  {
    "text": "which which led us to the conclusion added that there needs to be a separation of concerns now and that",
    "start": "776040",
    "end": "783339"
  },
  {
    "text": "might sound totally logical to you but it's not for everyone because we've seen these things mixed up a lot ma'am so",
    "start": "783339",
    "end": "790360"
  },
  {
    "text": "there there's a reason why authentication authorization are two different words right because they are",
    "start": "790360",
    "end": "795610"
  },
  {
    "text": "two different things so so we think identity is is the input to Europe",
    "start": "795610",
    "end": "804220"
  },
  {
    "text": "system and the outcome of mixing identity and permission that's your authorization data okay so",
    "start": "804220",
    "end": "812530"
  },
  {
    "text": "the way we like to think about it is you introduce another component in your system and you know lack of lack of a",
    "start": "812530",
    "end": "819310"
  },
  {
    "text": "better word I call it authorization provider they are like like an identity provider but for authorization data so",
    "start": "819310",
    "end": "825550"
  },
  {
    "text": "to speak and then what we think is a",
    "start": "825550",
    "end": "833470"
  },
  {
    "text": "good approach is you know when the user logs on to the ED to the system he goes first to the identity provider",
    "start": "833470",
    "end": "839040"
  },
  {
    "text": "authenticate with the provider gets back an identity token right or an access",
    "start": "839040",
    "end": "844330"
  },
  {
    "text": "token that represents the the access to or to a resource or to an API or ap is",
    "start": "844330",
    "end": "850060"
  },
  {
    "text": "and represents the identity of that user at these API and then the authorization",
    "start": "850060",
    "end": "856150"
  },
  {
    "text": "provider is more like more like a system that knows now about the various",
    "start": "856150",
    "end": "863070"
  },
  {
    "text": "applications in your architecture you know like your your client application the UI might have different",
    "start": "863070",
    "end": "869050"
  },
  {
    "text": "authorization requirements than an API right or you know maybe you want to make",
    "start": "869050",
    "end": "875680"
  },
  {
    "text": "it easy for the UI developer to not know or have to infer that not having the",
    "start": "875680",
    "end": "881110"
  },
  {
    "text": "prescribed medication permission means he has to gray out that button maybe you want to have a permission call you know",
    "start": "881110",
    "end": "887620"
  },
  {
    "text": "a height prescribe button right which is much more tailored to the needs of that",
    "start": "887620",
    "end": "893890"
  },
  {
    "text": "specific client application yeah so you know why not have a system that knows exactly what the client needs right",
    "start": "893890",
    "end": "902410"
  },
  {
    "text": "all these API is right so we going to call this api's with the identity and then the API is intern will pass on the",
    "start": "902410",
    "end": "911200"
  },
  {
    "text": "identity of the incoming user to this authorization provider say hey I am the",
    "start": "911200",
    "end": "916830"
  },
  {
    "text": "oncology API that's my user gives me back the permissions that applied to me",
    "start": "916830",
    "end": "922200"
  },
  {
    "text": "right which makes much more sense because then you know you can maintain",
    "start": "922200",
    "end": "928660"
  },
  {
    "text": "these permissions separately you don't mix them up in a separate token and you know it's actually really a different",
    "start": "928660",
    "end": "934810"
  },
  {
    "text": "concern so we should separate it and then combined I guess with a really",
    "start": "934810",
    "end": "943040"
  },
  {
    "text": "good UI right that that kind of like fulfills the dream of many architects",
    "start": "943040",
    "end": "949010"
  },
  {
    "text": "right so somebody can go to a UI and graphically configure roles and",
    "start": "949010",
    "end": "954080"
  },
  {
    "text": "permissions and so on and the developer just calls an API gets the data in its",
    "start": "954080",
    "end": "959090"
  },
  {
    "text": "application and works with that and if these things change you know somebody can just go there make the change don't",
    "start": "959090",
    "end": "966800"
  },
  {
    "text": "have to redeploy the application don't have to get rid of crappy authorized attributes on your controllers or change",
    "start": "966800",
    "end": "972920"
  },
  {
    "text": "them or whatever yeah and you know just just be happy I guess are you happy very happy good good next slide so yeah so we",
    "start": "972920",
    "end": "983180"
  },
  {
    "text": "came up with you know a prototype which roughly looks like this it's it's recorded your operation provider it",
    "start": "983180",
    "end": "989720"
  },
  {
    "text": "basically has two endpoints one is give the management API that's the thing where people can then you know Trek and",
    "start": "989720",
    "end": "995300"
  },
  {
    "text": "drop their roles and permissions or tracking dropping is outright it's not working very well on an iPad yeah",
    "start": "995300",
    "end": "1001740"
  },
  {
    "text": "configure whatever and then there's a",
    "start": "1001740",
    "end": "1006760"
  },
  {
    "text": "client endpoint and that that's the thing that that that can be called by anyone who's interested in authorization",
    "start": "1006760",
    "end": "1013120"
  },
  {
    "text": "data and the way we think it is most",
    "start": "1013120",
    "end": "1018130"
  },
  {
    "text": "useful is that you know you get data about that user in Wyatt the identity",
    "start": "1018130",
    "end": "1023710"
  },
  {
    "text": "token or the access token and you pass that identity on to the authorization provider and then there that there's",
    "start": "1023710",
    "end": "1030130"
  },
  {
    "text": "going to be a rules engine that knows how to map from identity to permissions yeah that might be static rules like you",
    "start": "1030130",
    "end": "1036730"
  },
  {
    "text": "know user one is a doctor and user free the nurse or that might be you know if",
    "start": "1036730",
    "end": "1042220"
  },
  {
    "text": "he has a gmail email address he must be a contractor you know like like you know that some some dynamic evaluation you",
    "start": "1042220",
    "end": "1049390"
  },
  {
    "text": "have a based on the incoming claims creating outgoing Commission's that kind of like claims transformation is there",
    "start": "1049390",
    "end": "1055680"
  },
  {
    "text": "we have roles so we can map your throws we can map permissions to roles right",
    "start": "1055680",
    "end": "1062170"
  },
  {
    "text": "and at the end of the day what the client application gets back is a list of permissions or a list of roles",
    "start": "1062170",
    "end": "1067600"
  },
  {
    "text": "depends on what you prefer you know some people like to work with rolls more like cross-grain some people",
    "start": "1067600",
    "end": "1072850"
  },
  {
    "text": "like more the permission-based approach and that's basically how it works okay so next slide so now brought will",
    "start": "1072850",
    "end": "1081999"
  },
  {
    "text": "walk you through a couple of well first of all shoulder showed us the server mapping style and then we have a look at",
    "start": "1081999",
    "end": "1089559"
  },
  {
    "text": "how we tried a couple of options how to integrate that into today's applications",
    "start": "1089559",
    "end": "1096549"
  },
  {
    "text": "frameworks like HP dotnet for example and and what we can do there yeah so the idea is that we have these primitive",
    "start": "1096549",
    "end": "1104710"
  },
  {
    "text": "constructs that you have to then piece together your authorization provider system and so we have a host application",
    "start": "1104710",
    "end": "1112299"
  },
  {
    "text": "that you know is your centralized authorization provider as we saw on the slides and this happens to just be a",
    "start": "1112299",
    "end": "1119580"
  },
  {
    "text": "good old you know asp.net core who does good well yeah it'll all change next",
    "start": "1119580",
    "end": "1125679"
  },
  {
    "text": "week next year so next month sorry yes just a web api project and so the idea",
    "start": "1125679",
    "end": "1133179"
  },
  {
    "text": "is that we're going to load in into this Web API project this this authorization engine that we've prototyped and we need",
    "start": "1133179",
    "end": "1140679"
  },
  {
    "text": "to configure this authorization engine and so this is where those primitives come in where you are going to model",
    "start": "1140679",
    "end": "1146859"
  },
  {
    "text": "your application domain if you will so we have some primitives in here the",
    "start": "1146859",
    "end": "1152049"
  },
  {
    "text": "first concept is this notion of an application so this application could be the UI project or the API project like",
    "start": "1152049",
    "end": "1157989"
  },
  {
    "text": "one could be the oncology the other one could be the cardiac api's for example and so we give them the name so in this",
    "start": "1157989",
    "end": "1164950"
  },
  {
    "text": "case is generic sort of a hospital application and then the idea is that within those application domains again",
    "start": "1164950",
    "end": "1172869"
  },
  {
    "text": "you want to model the users authorization behind roles and permissions so what we have is we're",
    "start": "1172869",
    "end": "1178299"
  },
  {
    "text": "listing for this application this has three roles and again the idea is that these are application specific roles",
    "start": "1178299",
    "end": "1184149"
  },
  {
    "text": "kind of like the authorization roles that the Dominic was mentioning and then we also have this notion of permissions",
    "start": "1184149",
    "end": "1190480"
  },
  {
    "text": "so for this application it needs doctors nurses and patients and these various permissions based on the the actions",
    "start": "1190480",
    "end": "1197200"
  },
  {
    "text": "that the user is going to be taking so then for these two different concepts we have a mapping mechanism so",
    "start": "1197200",
    "end": "1203539"
  },
  {
    "text": "for the role mechanism we have mappings and so there are various conditions that",
    "start": "1203539",
    "end": "1209149"
  },
  {
    "text": "will indicate that the user is in one of these particular roles so as Dominic",
    "start": "1209149",
    "end": "1214460"
  },
  {
    "text": "mentioned we have some static mapping user number 1 and user number 2 they're both going to be part of the doctor role",
    "start": "1214460",
    "end": "1220700"
  },
  {
    "text": "in this application also maybe if the centralized identity provider provides",
    "start": "1220700",
    "end": "1226669"
  },
  {
    "text": "an identity role of doc that also means for this application they are a doctor so you can have sort of a you know you",
    "start": "1226669",
    "end": "1233749"
  },
  {
    "text": "can choose where to do your mapping it can come from the centralized identity system or within the specific app you",
    "start": "1233749",
    "end": "1239330"
  },
  {
    "text": "can choose the map based on individual users so we have something similar for nurses and then patients and then this",
    "start": "1239330",
    "end": "1246169"
  },
  {
    "text": "is showing an example of a dynamic condition so based on the identity of the user right they are happened to be",
    "start": "1246169",
    "end": "1253039"
  },
  {
    "text": "sick so that obviously puts them into the patient role in our application ok and we do have a very sick user in the",
    "start": "1253039",
    "end": "1259999"
  },
  {
    "text": "system so we'll see that in a minute even request multi nine yes he does so",
    "start": "1259999",
    "end": "1267169"
  },
  {
    "text": "that's how we can do role mappings ok so that's pretty straightforward we are going to map identity to roles for the",
    "start": "1267169",
    "end": "1273679"
  },
  {
    "text": "purposes of authorization we also then if you want to work in a more action-oriented style for doing your",
    "start": "1273679",
    "end": "1278960"
  },
  {
    "text": "authorization permissions and for this model what it seemed to make sense is to simply say ok well if you're in a",
    "start": "1278960",
    "end": "1284539"
  },
  {
    "text": "particular role then we allow you to perform a particular type of action or have that permission so that's the basic",
    "start": "1284539",
    "end": "1291499"
  },
  {
    "text": "mapping here you know we could give then this being a centralized server could",
    "start": "1291499",
    "end": "1297080"
  },
  {
    "text": "host many different mappings for lots of different applications and in a centralized location we don't quite have",
    "start": "1297080",
    "end": "1303679"
  },
  {
    "text": "a UI yet again because we just kind of prototype this up so that's why we have code only config for now all right so",
    "start": "1303679",
    "end": "1310789"
  },
  {
    "text": "this is just an API I'm just going to run this so there's not much to see here but we then have our consuming",
    "start": "1310789",
    "end": "1317539"
  },
  {
    "text": "application so here's our good old MVC consuming application the idea is that",
    "start": "1317539",
    "end": "1324200"
  },
  {
    "text": "we're going to authenticate the user so we're just doing standard cookie based authentication and then here on our",
    "start": "1324200",
    "end": "1329479"
  },
  {
    "text": "account controller we just hard-coded some users just for the prototype so",
    "start": "1329479",
    "end": "1335690"
  },
  {
    "text": "Alice look Gallus is subject ID one so according to our mappings earlier it looks like alice",
    "start": "1335690",
    "end": "1342210"
  },
  {
    "text": "is probably going to be a doctor and then for user bob user bob is subject ID",
    "start": "1342210",
    "end": "1347910"
  },
  {
    "text": "11 so i think bob falls under the nurse category and then i think we have anybody else comes in is going to be",
    "start": "1347910",
    "end": "1354630"
  },
  {
    "text": "very sick so they'll be they'll be in the patient role okay so we get the ideas that we run this and right now we",
    "start": "1354630",
    "end": "1365610"
  },
  {
    "text": "can login to the application right we'll login as Alice and as of right now we're not involving the permission the",
    "start": "1365610",
    "end": "1371670"
  },
  {
    "text": "authorization provider in any way we're just logging the user in and showing their claims so the next thing is to",
    "start": "1371670",
    "end": "1378480"
  },
  {
    "start": "1377000",
    "end": "1377000"
  },
  {
    "text": "find out how now it's in this application start to incorporate based",
    "start": "1378480",
    "end": "1383610"
  },
  {
    "text": "on the authenticated identity of the user incorporate the authorization provider okay do you want like with us",
    "start": "1383610",
    "end": "1389370"
  },
  {
    "text": "or no it just shows okay so what we have then is another project in here which is",
    "start": "1389370",
    "end": "1396000"
  },
  {
    "text": "the client library so this is a library that you would load into the MVC application and it's really just a think",
    "start": "1396000",
    "end": "1402690"
  },
  {
    "text": "of it as a proxy you take in the identity of the user and this authorization library then can contact",
    "start": "1402690",
    "end": "1408330"
  },
  {
    "text": "the authorization provider running so this actually just ends up as a service",
    "start": "1408330",
    "end": "1413490"
  },
  {
    "text": "in dependency injection so we have this authorization provider client class that",
    "start": "1413490",
    "end": "1418860"
  },
  {
    "text": "we need to stick into di so back down to the actual consuming MVC app what we can",
    "start": "1418860",
    "end": "1424680"
  },
  {
    "text": "do is do services that the authorization provider all right we have just a really",
    "start": "1424680",
    "end": "1430740"
  },
  {
    "text": "simple configuration here so again imagine this is your UI project or the API project it knows it's the hospital",
    "start": "1430740",
    "end": "1438000"
  },
  {
    "text": "application and then we need to know the ural of the actual service which I",
    "start": "1438000",
    "end": "1444840"
  },
  {
    "text": "actually have already forgotten so that was that URL okay so we pop this in here",
    "start": "1444840",
    "end": "1454090"
  },
  {
    "text": "so what this does is it registers in di our authorization provider client and so",
    "start": "1454090",
    "end": "1459910"
  },
  {
    "text": "as you know standard asp.net core what we can do is in our controller and we",
    "start": "1459910",
    "end": "1468490"
  },
  {
    "text": "can do authorization provider clients right and put this in via dependency",
    "start": "1468490",
    "end": "1475810"
  },
  {
    "text": "injection okay and then now in our secure method right we have the user",
    "start": "1475810",
    "end": "1480820"
  },
  {
    "text": "right that's made available from the cookie and we can invoke our client and we have get authorization where we",
    "start": "1480820",
    "end": "1489130"
  },
  {
    "text": "basically pass in the user so this method is invoking the centralized",
    "start": "1489130",
    "end": "1494410"
  },
  {
    "text": "authorization provider passing in the current users identity sends it to that thing and then what we get back are a",
    "start": "1494410",
    "end": "1500650"
  },
  {
    "text": "list of the roles and permissions like this okay and now you just put in the",
    "start": "1500650",
    "end": "1506020"
  },
  {
    "text": "weight there so what I'm doing then in my view is I can take the view data and",
    "start": "1506020",
    "end": "1516520"
  },
  {
    "text": "I shall grab it this way both of those and I can simply pop these in here like",
    "start": "1516520",
    "end": "1523180"
  },
  {
    "text": "this and that should show that data so if I",
    "start": "1523180",
    "end": "1529200"
  },
  {
    "text": "rerun this my user I think should still be logged in as Alice yeah there we go",
    "start": "1529200",
    "end": "1536850"
  },
  {
    "text": "okay so that basically invokes the the the provider and now we have the mapped",
    "start": "1536850",
    "end": "1543840"
  },
  {
    "text": "information so we can now perform authorization in our application there",
    "start": "1543840",
    "end": "1548940"
  },
  {
    "text": "are a couple other convenience methods here just for for show there's a shortcut methods basically where you can",
    "start": "1548940",
    "end": "1555840"
  },
  {
    "text": "say is the user in the role or does the user have a particular permission and",
    "start": "1555840",
    "end": "1562230"
  },
  {
    "text": "again since these are application specific the app is going to know which role it needs to look for or which",
    "start": "1562230",
    "end": "1567769"
  },
  {
    "text": "permission it needs to check for whatever operation is being performed so",
    "start": "1567769",
    "end": "1574320"
  },
  {
    "text": "yeah let's go back to slides oh nice so yeah so we showed that to people in the city okay that looks good but you know I",
    "start": "1574320",
    "end": "1581610"
  },
  {
    "text": "will develop a state they want to use like the authorized attribute yeah or you know something that they they know",
    "start": "1581610",
    "end": "1587340"
  },
  {
    "text": "about from from MVC let's go our next",
    "start": "1587340",
    "end": "1595350"
  },
  {
    "text": "one okay so you know like something like authorized roles equals doctor yeah and",
    "start": "1595350",
    "end": "1600840"
  },
  {
    "text": "we thought about that and and how can we",
    "start": "1600840",
    "end": "1607259"
  },
  {
    "text": "make that work and there is a way to make it work and I'll show it to you in a second yeah but who really likes this",
    "start": "1607259",
    "end": "1612809"
  },
  {
    "text": "style of authorization code enforcement of right attribute so on Alicia who uses",
    "start": "1612809",
    "end": "1620490"
  },
  {
    "text": "it actually who uses it right okay who likes it yeah okay so yeah many people",
    "start": "1620490",
    "end": "1629759"
  },
  {
    "text": "like it yeah miss mystery number one to",
    "start": "1629759",
    "end": "1634860"
  },
  {
    "text": "me is why are those net developers so crazy about attribute it code right it's",
    "start": "1634860",
    "end": "1642330"
  },
  {
    "text": "called a faster method it's the famous code below the message what's the benefit of doing it declaratively I",
    "start": "1642330",
    "end": "1648450"
  },
  {
    "text": "don't know that but much much bigger problem I have is that obviously you",
    "start": "1648450",
    "end": "1655950"
  },
  {
    "text": "know what what that kind of pushes you to is kind of like mixing up two concerned in a single place like yo your",
    "start": "1655950",
    "end": "1661460"
  },
  {
    "text": "controller logic and your authorization load sugar and the active magic strings your roles equals doctor and what",
    "start": "1661460",
    "end": "1668150"
  },
  {
    "text": "happens if now some other people need to have access to this method you need to go back to your source code and find all",
    "start": "1668150",
    "end": "1674210"
  },
  {
    "text": "the places where it says rows equals doctor and updated through comma nurse whatever what if you miss one of those",
    "start": "1674210",
    "end": "1682430"
  },
  {
    "text": "or what what if you if you change the wrong one you create a security hole in your application that is hard to find",
    "start": "1682430",
    "end": "1688520"
  },
  {
    "text": "right how do you test these produce this attribute there you have to invoke every",
    "start": "1688520",
    "end": "1694910"
  },
  {
    "text": "single action method right and make sure it returns the right thing don't forget to add your test when you add new action",
    "start": "1694910",
    "end": "1700730"
  },
  {
    "text": "methods right I have a customer you know like five hundred controllers or",
    "start": "1700730",
    "end": "1706940"
  },
  {
    "text": "something and they have all these authorized attributes and they are like you know the the visits in regular",
    "start": "1706940",
    "end": "1712580"
  },
  {
    "text": "expressions in search and replace these days right because anytime a requirement changes right they did right there the",
    "start": "1712580",
    "end": "1719210"
  },
  {
    "text": "automated the update of the permissions right we are we are all engineers slide we spend a couple of weeks writing a",
    "start": "1719210",
    "end": "1724880"
  },
  {
    "text": "search and replace engine for our authorized attributes here so in short in short we we don't really",
    "start": "1724880",
    "end": "1734240"
  },
  {
    "text": "want you to use this model right but if you want you that there's a built in thing in a single core that makes it",
    "start": "1734240",
    "end": "1740630"
  },
  {
    "text": "really easy and that's called claims transformation right so what you can do if you plug into the pipeline and and if",
    "start": "1740630",
    "end": "1747830"
  },
  {
    "text": "that's what you want is you take the roles and the permission is coming from our server and just put them into the",
    "start": "1747830",
    "end": "1754220"
  },
  {
    "text": "claims principle on the fly right so it's not in the cookie it's not in the identity token it's just in the claims",
    "start": "1754220",
    "end": "1760820"
  },
  {
    "text": "principle in memory so to speak okay so just do that quick right so we basically",
    "start": "1760820",
    "end": "1765860"
  },
  {
    "text": "want this line of code to be done automatically on every single request okay so we can do that is as part of the the",
    "start": "1765860",
    "end": "1773300"
  },
  {
    "text": "client library we wrote this claim transformation middleware so after the cookie meddler what we'll do is we'll",
    "start": "1773300",
    "end": "1779840"
  },
  {
    "text": "use our authorization provider and so what this does is again takes the outcome of the cookie invokes this",
    "start": "1779840",
    "end": "1786980"
  },
  {
    "text": "method for you right gets the result adds it to the current claims of the current user",
    "start": "1786980",
    "end": "1793070"
  },
  {
    "text": "and now in our rendered page we should see both the same I showed earlier but",
    "start": "1793070",
    "end": "1800570"
  },
  {
    "text": "also now notice that within the claims of the user in memory we have for example roles and permissions so this",
    "start": "1800570",
    "end": "1808730"
  },
  {
    "text": "means that if you really want to use the authorized attribute you could do something like roles equals that and",
    "start": "1808730",
    "end": "1815750"
  },
  {
    "text": "that should work okay one of that decimal are we a doctor no I mean",
    "start": "1815750",
    "end": "1821240"
  },
  {
    "text": "technically speaking anyways oh yeah that's another style now as I",
    "start": "1821240",
    "end": "1827210"
  },
  {
    "text": "said we don't like that too much for all the reasons I've given you already so you know like many years ago I mean we",
    "start": "1827210",
    "end": "1835610"
  },
  {
    "text": "spoke to that to Microsoft about that many years ago already and told them that I think the authorized attribute is",
    "start": "1835610",
    "end": "1842060"
  },
  {
    "text": "is just not good yeah and and people",
    "start": "1842060",
    "end": "1847580"
  },
  {
    "text": "prototype something and gave it to them we didn't have the time to make it really good and we gave it to them and they listened to us and they're finally",
    "start": "1847580",
    "end": "1854750"
  },
  {
    "text": "in a third car there there's a new authorization API built into the",
    "start": "1854750",
    "end": "1859910"
  },
  {
    "start": "1859000",
    "end": "1859000"
  },
  {
    "text": "platform which which you know promotes some of the things that that we before",
    "start": "1859910",
    "end": "1868250"
  },
  {
    "text": "are much better than having this type coupling of attributes and code and so on and it's called a speed Co",
    "start": "1868250",
    "end": "1877130"
  },
  {
    "text": "authorization has anyone used that already or try it played around with it yeah okay so it has two parts roughly",
    "start": "1877130",
    "end": "1885530"
  },
  {
    "text": "one the one we the one we like better it's called the policy based framework and the idea of the policy based",
    "start": "1885530",
    "end": "1891770"
  },
  {
    "text": "framework is that you are you can decouple your authorization logic from the actual controller right so have a",
    "start": "1891770",
    "end": "1898580"
  },
  {
    "text": "good separation of concerns it's extensible so you can you know write your own custom policies and we'll see",
    "start": "1898580",
    "end": "1907100"
  },
  {
    "text": "in a second how that works but let's just do a really simple policy now so the idea is that you put your policy",
    "start": "1907100",
    "end": "1913400"
  },
  {
    "text": "into the DI container yeah give it a name prescribe medication in this case and and you can encapsulate all of the",
    "start": "1913400",
    "end": "1921830"
  },
  {
    "text": "logic around what this policy means for you in the central place and then just",
    "start": "1921830",
    "end": "1926840"
  },
  {
    "text": "sir to it from your controller and if your if that policy that requirements",
    "start": "1926840",
    "end": "1932000"
  },
  {
    "text": "change over time we just changed the policy in one place yeah and then all",
    "start": "1932000",
    "end": "1937550"
  },
  {
    "text": "your controllers get that for free or you know automatically right muscle free yeah nothing's free it's just prepaid",
    "start": "1937550",
    "end": "1945880"
  },
  {
    "text": "okay so what we can do is add this to our application because we're doing",
    "start": "1945880",
    "end": "1953360"
  },
  {
    "text": "claims transformation now and the in-memory user has these mapped permissions from our centralized system",
    "start": "1953360",
    "end": "1959150"
  },
  {
    "text": "we can key off of that as our as our claim the permission claim to see if the",
    "start": "1959150",
    "end": "1964280"
  },
  {
    "text": "user has and then now that this is in the DI system back over in our home controller we could now apply the",
    "start": "1964280",
    "end": "1971210"
  },
  {
    "text": "authorize attribute just passing in that policy name okay so if we rerun this and",
    "start": "1971210",
    "end": "1982970"
  },
  {
    "text": "I think if we go here we'll login as Alice again and yeah we were able to get",
    "start": "1982970",
    "end": "1988040"
  },
  {
    "text": "in because Alice can prescribe medication if we use a different user like Bob okay looks like Bob can also",
    "start": "1988040",
    "end": "1995300"
  },
  {
    "text": "prescribe medication but if we log in as some not so good you're sick very yes",
    "start": "1995300",
    "end": "2005190"
  },
  {
    "text": "can you also show quickly how to invoke them imperative lis because I think that's that's even the eisah but yeah",
    "start": "2005190",
    "end": "2011290"
  },
  {
    "text": "you know you you don't have to use the declarative approach anymore with policies yeah that's what I think is",
    "start": "2011290",
    "end": "2017110"
  },
  {
    "text": "also a big improvement asp.net puts in an AI authorization",
    "start": "2017110",
    "end": "2023200"
  },
  {
    "text": "service into the I container at startup time and then you can get that from your controller and then you can invoke them",
    "start": "2023200",
    "end": "2029050"
  },
  {
    "text": "imperatively by name okay and basically you pass in the user the user you want",
    "start": "2029050",
    "end": "2036430"
  },
  {
    "text": "to run that policy against and you pass in the policy name yeah and then you get",
    "start": "2036430",
    "end": "2043060"
  },
  {
    "text": "back a true or false and this is now the key to making your policy for the unit you a unit testable right so you write",
    "start": "2043060",
    "end": "2049360"
  },
  {
    "text": "all your your policies and then you can write unit tests you please create a claims principle that has the shape and",
    "start": "2049360",
    "end": "2055030"
  },
  {
    "text": "form that you want to test against there and then run the policy and you know if it's a nurse that",
    "start": "2055030",
    "end": "2060490"
  },
  {
    "text": "should sail if it's a doctor that should succeed right so you can prove that these policies actually work in an automated way and if the requirements",
    "start": "2060490",
    "end": "2067750"
  },
  {
    "text": "change down the line and people change things around and you know you have your",
    "start": "2067750",
    "end": "2073240"
  },
  {
    "text": "test framework to prove that the policies still do what they should do okay so I like that approach really good",
    "start": "2073240",
    "end": "2078849"
  },
  {
    "text": "really nice I'm I'm a fan of this one oh and challenge that's also a new feature in a student core challenge",
    "start": "2078849",
    "end": "2086138"
  },
  {
    "text": "basically tells the underlying platform that something is not allowed and then 18 court can decide between do I have to",
    "start": "2086139",
    "end": "2093099"
  },
  {
    "text": "send into a login page if he's anonymous or do I have to send into a forbidding page but if it's already authenticated",
    "start": "2093099",
    "end": "2098220"
  },
  {
    "text": "that's also a useful abstraction to not having to make this distinction on your",
    "start": "2098220",
    "end": "2103990"
  },
  {
    "text": "own in your code over and over again right that was subtle here in the demo right the very first time we go there were not authenticated so you have to",
    "start": "2103990",
    "end": "2110260"
  },
  {
    "text": "authenticate actually I'll do dahm again so now then we go back and now we go the",
    "start": "2110260",
    "end": "2115690"
  },
  {
    "text": "second time we had it we are authenticated just not allowed we get the forbidden page yeah cool so deep I",
    "start": "2115690",
    "end": "2123700"
  },
  {
    "text": "like it approach you only mmm seeing that feeling yeah well I should mention",
    "start": "2123700",
    "end": "2130359"
  },
  {
    "text": "that what's also new in MVC cause it that you can do a dependency injection",
    "start": "2130359",
    "end": "2136060"
  },
  {
    "text": "in infuse now okay so if you want to conditionally render your UI based on",
    "start": "2136060",
    "end": "2141070"
  },
  {
    "text": "the permissions or of the user that's how you would do it ma'am I'm personally",
    "start": "2141070",
    "end": "2146440"
  },
  {
    "text": "not a huge fan of that because I think that just pushes you into adding more code to your to your views right if I",
    "start": "2146440",
    "end": "2154240"
  },
  {
    "text": "personally think if you want to if you have to condition to render something in a you know interview put it on a few",
    "start": "2154240",
    "end": "2159700"
  },
  {
    "text": "model right but you know but you're still taking advantage of the centralized offer yeah yeah that's the main thing okay so go on back sorry No",
    "start": "2159700",
    "end": "2169510"
  },
  {
    "text": "one more yeah so that's nice the only thing that's now a little bit weird is now right because you're",
    "start": "2169510",
    "end": "2176109"
  },
  {
    "text": "writing a policy that looks up a claim now you have to create one policy permission in your system right and that",
    "start": "2176109",
    "end": "2183849"
  },
  {
    "text": "feels weird ma'am so a nice thing about now not go forwards and I think about",
    "start": "2183849",
    "end": "2189940"
  },
  {
    "text": "this policy system is they have something called the policy provider so you can basically tap in - the way they resolve the policy name -",
    "start": "2189940",
    "end": "2197920"
  },
  {
    "text": "the actual policy which means if you do that you can now basically have a policy",
    "start": "2197920",
    "end": "2203920"
  },
  {
    "text": "called prescribe medication this doesn't exist this policy is at least not aesthetically defined but we can on the",
    "start": "2203920",
    "end": "2210190"
  },
  {
    "text": "fly create that policy in memory so to speak which maps to the to the to the permission claim called you know",
    "start": "2210190",
    "end": "2216069"
  },
  {
    "text": "prescribe medication so let's do that or show show it quickly so what we'll do is we'll go back and take this out yeah of",
    "start": "2216069",
    "end": "2222940"
  },
  {
    "text": "the authorization system so it's not we don't have to want to define one of these for anyway and we can remove the claims transformation as well we don't",
    "start": "2222940",
    "end": "2229059"
  },
  {
    "text": "need that anymore in the claims collection okay right and so we then",
    "start": "2229059",
    "end": "2237930"
  },
  {
    "text": "after we're adding our authorization provider this extension method on our",
    "start": "2237930",
    "end": "2243250"
  },
  {
    "text": "service registration knows to say okay we're going to use the policy based authorization system so",
    "start": "2243250",
    "end": "2249819"
  },
  {
    "text": "register the right extensibility you know register in di the right extensibility point to dynamically",
    "start": "2249819",
    "end": "2256839"
  },
  {
    "text": "extend the policy system you want to try to provide us well we could it's not",
    "start": "2256839",
    "end": "2264099"
  },
  {
    "text": "hard to build it sounds hot but it isn't so this policy providers just another",
    "start": "2264099",
    "end": "2269980"
  },
  {
    "text": "service in DI we are simply accessing the authorization provider client that's",
    "start": "2269980",
    "end": "2275859"
  },
  {
    "text": "the one to hit the centralized API and so when we say get a policy all we're doing is dynamically building a policy",
    "start": "2275859",
    "end": "2283210"
  },
  {
    "text": "based on our you know requirement so in other words it's just dynamic right this",
    "start": "2283210",
    "end": "2288279"
  },
  {
    "text": "method get policy gets passed in a name you return a policy and the Microsoft",
    "start": "2288279",
    "end": "2293500"
  },
  {
    "text": "provides a really simple class which is the authorization policy builder to build up your policy NRS is just being",
    "start": "2293500",
    "end": "2300369"
  },
  {
    "text": "built off of our you know the policy string that's being passed in fact cool",
    "start": "2300369",
    "end": "2306520"
  },
  {
    "text": "that's a little bit more involved but that's okay we should be able to run this now wrong project so yeah we should we have",
    "start": "2306520",
    "end": "2313960"
  },
  {
    "text": "the same the same behavior now but without having to aesthetically define the policies and without having to dump",
    "start": "2313960",
    "end": "2319119"
  },
  {
    "text": "all of the permissions in into the Claims collection yeah which is an improvement so we're Dominic and now we are back to",
    "start": "2319119",
    "end": "2325480"
  },
  {
    "text": "Alice and Alice can get in okay and now Alice doesn't have all the claims that are in memory can claims transformation",
    "start": "2325480",
    "end": "2331540"
  },
  {
    "text": "the the dynamic policy providers querying the centralized system one",
    "start": "2331540",
    "end": "2337240"
  },
  {
    "text": "thing we should probably note about this is that the the use then of this client obviously every call every time we call",
    "start": "2337240",
    "end": "2343750"
  },
  {
    "text": "this get authorization to call the centralized authorization system you know that may be an expensive call so",
    "start": "2343750",
    "end": "2350350"
  },
  {
    "text": "behind this client you would build you know whatever kind of caching was was appropriate for your type of non fatal",
    "start": "2350350",
    "end": "2356080"
  },
  {
    "text": "ever yeah I have a non fatal error wonderful so okay good anyway",
    "start": "2356080",
    "end": "2361900"
  },
  {
    "text": "there's a lot of a you know features behind this client library to abstract access and make that properly efficient",
    "start": "2361900",
    "end": "2369810"
  },
  {
    "text": "cool so I mentioned earlier that it is",
    "start": "2369810",
    "end": "2374830"
  },
  {
    "start": "2371000",
    "end": "2371000"
  },
  {
    "text": "also expensive so you can also write your custom requirements for for these policies so but if you think of a policy as a list of requirements yeah so don't",
    "start": "2374830",
    "end": "2381700"
  },
  {
    "text": "the one we just showed was it was a very simple policy it just has one requirement which requires that you have basically has a permission yeah but if",
    "start": "2381700",
    "end": "2388930"
  },
  {
    "text": "you you know want to extend the policy system in agent core oh by the way I should mention the the most common",
    "start": "2388930",
    "end": "2395380"
  },
  {
    "text": "question we get when we show that is like does it also work with NBC five yeah and indeed it does on the slides",
    "start": "2395380",
    "end": "2402160"
  },
  {
    "text": "which we'll put up later there's a link to a guy who backed part of the whole framework to NBC size and the bet API so",
    "start": "2402160",
    "end": "2409960"
  },
  {
    "text": "that's that's totally possible but yeah you can extend the policy system so in",
    "start": "2409960",
    "end": "2415359"
  },
  {
    "text": "that case you know maybe that the name of the medication and the amount should go into the the authorization evaluation",
    "start": "2415359",
    "end": "2423670"
  },
  {
    "text": "so to speak yeah so make it a little bit more complicated all right so we have",
    "start": "2423670",
    "end": "2430119"
  },
  {
    "text": "some other wrong one so we have some other method being invoked here the",
    "start": "2430119",
    "end": "2435910"
  },
  {
    "text": "ideas that actually should be show the the policy first yes okay so the way we",
    "start": "2435910",
    "end": "2441970"
  },
  {
    "text": "build these policies with these custom requirements is you create a class that",
    "start": "2441970",
    "end": "2447010"
  },
  {
    "text": "represents the data structure that will dynamically change based on the",
    "start": "2447010",
    "end": "2453070"
  },
  {
    "text": "condition based on the situation so maybe today the medication is aspirin tomorrow its morphine and BAE",
    "start": "2453070",
    "end": "2458840"
  },
  {
    "text": "on that user maybe if you're a nurse you can only do prescribed one only a doctor can prescribe the other and maybe the",
    "start": "2458840",
    "end": "2464270"
  },
  {
    "text": "amount is also important here I think it is yes yeah so to build custom logic",
    "start": "2464270",
    "end": "2471950"
  },
  {
    "text": "around this more dynamic requirement you build what's called a handler the handler has the space class but the",
    "start": "2471950",
    "end": "2478760"
  },
  {
    "text": "point is it is a generic off of the custom requirement class and so this handle method gets invoked dynamically",
    "start": "2478760",
    "end": "2485660"
  },
  {
    "text": "and parameters to this method pass in the actual requirement object so at the",
    "start": "2485660",
    "end": "2491060"
  },
  {
    "text": "call location you would construct the requirement object populate it with the contextual data based on the operation",
    "start": "2491060",
    "end": "2497240"
  },
  {
    "text": "being performed passed it into the authorization system and then this particular implementation is you know",
    "start": "2497240",
    "end": "2503210"
  },
  {
    "text": "checking well it's whatever custom logic is is appropriate for the hospital so the user has to leave to be able to",
    "start": "2503210",
    "end": "2509390"
  },
  {
    "text": "prescribe medication if the amount is low then we can let them in if they're a",
    "start": "2509390",
    "end": "2514970"
  },
  {
    "text": "doctor they can prescribe anything you know so there's some logic in here whatever that logic may be okay so then",
    "start": "2514970",
    "end": "2521660"
  },
  {
    "text": "at the call location what we would do is then create the custom requirement",
    "start": "2521660",
    "end": "2526820"
  },
  {
    "text": "object okay right let's say that the",
    "start": "2526820",
    "end": "2533120"
  },
  {
    "text": "medication name is aspirin ASP IRM they",
    "start": "2533120",
    "end": "2540620"
  },
  {
    "text": "get it right that time wonderful and actually our call is going to look very",
    "start": "2540620",
    "end": "2545780"
  },
  {
    "text": "much like this now yeah right we passing",
    "start": "2545780",
    "end": "2552200"
  },
  {
    "text": "the user and now we pass in the requirement and I think we need to know here yeah like that so you're going to",
    "start": "2552200",
    "end": "2559340"
  },
  {
    "text": "dynamically evaluate this based on some varying amount of you know parameter",
    "start": "2559340",
    "end": "2566660"
  },
  {
    "text": "coming in so actually I've already forgotten what our logic was so who",
    "start": "2566660",
    "end": "2572570"
  },
  {
    "text": "should be able to do what it looks like if you first have to be able to prescribe medication if it's below 10",
    "start": "2572570",
    "end": "2580160"
  },
  {
    "text": "anybody can do it above 10 a doctor needs to be able to do it so I proceeded room for placebo",
    "start": "2580160",
    "end": "2587230"
  },
  {
    "text": "okay so who are we logged in as we're the doctor right now so the prescribed medication okay past",
    "start": "2588079",
    "end": "2596310"
  },
  {
    "text": "ten in right the doctor can do ten or twenty that looks good so if we then log",
    "start": "2596310",
    "end": "2602220"
  },
  {
    "text": "out and log in l Bob's the nurse okay so",
    "start": "2602220",
    "end": "2608670"
  },
  {
    "text": "here amount 20 okay now what's my logic",
    "start": "2608670",
    "end": "2615410"
  },
  {
    "text": "so of course you have unit tests overall it is to make sure that they actually are working the way you want and then",
    "start": "2615710",
    "end": "2622170"
  },
  {
    "text": "that actually is a valid point that's one of the benefits or the whole point of putting this requirement into a separate class because you can in fact",
    "start": "2622170",
    "end": "2628290"
  },
  {
    "text": "test this oh you know what it's not getting called at all you know what I forgot to do yeah I forgot to put in the",
    "start": "2628290",
    "end": "2634829"
  },
  {
    "text": "DI system so that's actually probably not a good default behavior so what I",
    "start": "2634829",
    "end": "2641310"
  },
  {
    "text": "did was you need to stick this into the DI system so services dot transient",
    "start": "2641310",
    "end": "2649339"
  },
  {
    "text": "offers a shin handler I'll put in my custom Handler like this we probably",
    "start": "2649339",
    "end": "2656480"
  },
  {
    "text": "guess that doesn't matter now we're mining that one all right but that doesn't interfere yeah I think all right",
    "start": "2656480",
    "end": "2667020"
  },
  {
    "text": "let's go back to our so right now we are we can prescribe medication the Bob is a nurse okay so 20 so they rebuild",
    "start": "2667020",
    "end": "2679970"
  },
  {
    "text": "now I want to put a breakpoint here to see if this is in vacuum called",
    "start": "2680340",
    "end": "2686309"
  },
  {
    "text": "okay and it's not I'm creating the medication requirement",
    "start": "2696900",
    "end": "2704310"
  },
  {
    "text": "where's my home controller Oh am I going to this method",
    "start": "2704310",
    "end": "2709890"
  },
  {
    "text": "maybe that's probably what's happening",
    "start": "2709890",
    "end": "2714559"
  },
  {
    "text": "it doesn't even help does it okay one more time live debugging in",
    "start": "2715340",
    "end": "2725700"
  },
  {
    "text": "front of 100 people okay no it's prescribed about med no thank",
    "start": "2725700",
    "end": "2736740"
  },
  {
    "text": "you I was going to the wrong line okay all right here we are we finally hit the correct method okay we're hitting our",
    "start": "2736740",
    "end": "2743520"
  },
  {
    "text": "handle as you can see now we're going through our authorization logic so the other benefit about this is that this",
    "start": "2743520",
    "end": "2748590"
  },
  {
    "text": "class is in the DI system this class itself can take dependencies and what does it take in dependency on the",
    "start": "2748590",
    "end": "2755520"
  },
  {
    "text": "author's they can provide a client object so all anything else you want or yeah your custom DB contacts or some web",
    "start": "2755520",
    "end": "2761460"
  },
  {
    "text": "service you want to invoke so again this is calling out to our centralized service to figure out if the user can do",
    "start": "2761460",
    "end": "2767160"
  },
  {
    "text": "these various things in addition based on that authorization okay so hopefully",
    "start": "2767160",
    "end": "2773100"
  },
  {
    "text": "no we're not allowed so now we should get the forbidden page good code okay",
    "start": "2773100",
    "end": "2779510"
  },
  {
    "text": "okay yes okay so that's the policy based",
    "start": "2779510",
    "end": "2786090"
  },
  {
    "text": "system yeah a student co-author ization api has another approach they call resource based authorization and the",
    "start": "2786090",
    "end": "2793230"
  },
  {
    "text": "idea is now you know so far we kind of only took into account the permissions",
    "start": "2793230",
    "end": "2798660"
  },
  {
    "text": "of the user that is performing the action right we haven't taken into account the object on which he is",
    "start": "2798660",
    "end": "2806730"
  },
  {
    "text": "performing the action right so in our scenario that would be the patient right so you're prescribing some medication to",
    "start": "2806730",
    "end": "2813080"
  },
  {
    "text": "a patient so what if the properties of the patient changed the outcome of your",
    "start": "2813080",
    "end": "2820500"
  },
  {
    "text": "decision right so for example he has allergies that maybe he's allergic against morphine who knows yeah so so",
    "start": "2820500",
    "end": "2829890"
  },
  {
    "start": "2822000",
    "end": "2822000"
  },
  {
    "text": "that the whole resource based API that that Microsoft put in there is a way basically to",
    "start": "2829890",
    "end": "2835620"
  },
  {
    "text": "to take one more input right so you already have the requirement and you",
    "start": "2835620",
    "end": "2840690"
  },
  {
    "text": "have the user and now one more input comes in which is the resource that you're trying to manipulate so to speak",
    "start": "2840690",
    "end": "2847320"
  },
  {
    "text": "yeah which is not a very nice word for a patient and they also offers the operation yep yeah which is the",
    "start": "2847320",
    "end": "2853530"
  },
  {
    "text": "requirement and oh okay so I have anyone",
    "start": "2853530",
    "end": "2858990"
  },
  {
    "text": "try this API already in agent for now okay so you know we were pondering if",
    "start": "2858990",
    "end": "2867320"
  },
  {
    "text": "how useful that is really and if it can be generalized and if it would fit into",
    "start": "2867320",
    "end": "2872940"
  },
  {
    "text": "anything that can be done as a reusable component so you know just quickly show how that works actually okay yeah okay",
    "start": "2872940",
    "end": "2880070"
  },
  {
    "text": "so now you basically what once you go down this is level deep where the",
    "start": "2880070",
    "end": "2886740"
  },
  {
    "text": "properties of the thing you are manipulating changes the outcome of an",
    "start": "2886740",
    "end": "2891750"
  },
  {
    "text": "authorization decision you are very very close to Quartermaine business logic",
    "start": "2891750",
    "end": "2896940"
  },
  {
    "text": "right so yeah just show it yeah so here's our now our new requirement has to do with",
    "start": "2896940",
    "end": "2903540"
  },
  {
    "text": "prescribing the medication in this case the you know the the action is the action of prescribing now the resource",
    "start": "2903540",
    "end": "2910290"
  },
  {
    "text": "being prescribed to the patient we're going to model some allergies and that this version is same as the previous",
    "start": "2910290",
    "end": "2915870"
  },
  {
    "text": "handler where for a custom requirement you build a custom handler this version though now takes two generic arguments",
    "start": "2915870",
    "end": "2922560"
  },
  {
    "text": "right which is the operation and the actual resource so the version of handle",
    "start": "2922560",
    "end": "2927780"
  },
  {
    "text": "here takes now three arguments which is the context which really has our user the context like I said and now the",
    "start": "2927780",
    "end": "2935310"
  },
  {
    "text": "patient so now again you have to go through all the same you know bits of",
    "start": "2935310",
    "end": "2940740"
  },
  {
    "text": "logic to figure out if the current user is allowed to prescribe this amount of medication on this patient and as you",
    "start": "2940740",
    "end": "2947430"
  },
  {
    "text": "can imagine you know we have to kind of repeat that same logic that we had before we see if the user is allowed to simply prescribe we have to repeat our",
    "start": "2947430",
    "end": "2954800"
  },
  {
    "text": "prior limits you know the amount of medication and then we continue on and",
    "start": "2954800",
    "end": "2960720"
  },
  {
    "text": "now finally can look at the patient yeah and you know the well the reason that we have to repeat this logic is because one",
    "start": "2960720",
    "end": "2967950"
  },
  {
    "text": "handler can to use another handler you might think oh right I already have half of this",
    "start": "2967950",
    "end": "2973230"
  },
  {
    "text": "logic in the other handler it turns out because these are all in the DI system they all get injected as one big array",
    "start": "2973230",
    "end": "2980280"
  },
  {
    "text": "or one big collection so they can't take dependencies on one another unfortunately so so so just to think",
    "start": "2980280",
    "end": "2987510"
  },
  {
    "text": "that either did occur to me if you know like this line here line 16 you know Ted is where the real domain logic is right",
    "start": "2987510",
    "end": "2995010"
  },
  {
    "text": "I mean you're not just saying I'm allergic against aspirin by the vu you pass in the name of the medication and then some",
    "start": "2995010",
    "end": "3001160"
  },
  {
    "text": "some some service needs to know what is inside of that medication and figure you know I mean and that now is you know",
    "start": "3001160",
    "end": "3007760"
  },
  {
    "text": "that's not even authorization anymore right it's just like a core domain knowledge like if you're building a",
    "start": "3007760",
    "end": "3015140"
  },
  {
    "text": "hospital application you probably have very very smart people figuring out which combination of medications is it's",
    "start": "3015140",
    "end": "3022220"
  },
  {
    "text": "good for a certain patient right so yeah",
    "start": "3022220",
    "end": "3027400"
  },
  {
    "text": "so just go back to the Google go to the last slide the big witches are kind of our conclusion here yeah so you know",
    "start": "3027400",
    "end": "3034520"
  },
  {
    "start": "3032000",
    "end": "3032000"
  },
  {
    "text": "like when all these people asked us can you build something reusable for authorization we we we were pretty sure",
    "start": "3034520",
    "end": "3041630"
  },
  {
    "text": "we can build something for cost cranes authorization like if someone allowed to",
    "start": "3041630",
    "end": "3047900"
  },
  {
    "text": "access an API that's easy right if someone allowed to use a certain feature of an API that can be done with",
    "start": "3047900",
    "end": "3055490"
  },
  {
    "text": "roles and permissions but once you are inside that feature you know like figuring out if this",
    "start": "3055490",
    "end": "3061910"
  },
  {
    "text": "medication if if a nurse is allowed to prescribe this medication based on the",
    "start": "3061910",
    "end": "3067880"
  },
  {
    "text": "allergies of that user I don't even I don't even sure if that authorization anymore right that might be just",
    "start": "3067880",
    "end": "3075320"
  },
  {
    "text": "business logic you know and pretty pretty sensitive one in that case as well yeah well that's the whole point of",
    "start": "3075320",
    "end": "3081740"
  },
  {
    "text": "your system right is to build that that logic around how to run a hospital first and I think that that's why X agonal",
    "start": "3081740",
    "end": "3088400"
  },
  {
    "text": "failed as well because they try to force people to now formulate they're launching in XML right I mean why",
    "start": "3088400",
    "end": "3094040"
  },
  {
    "text": "wouldn't you just write some good old C shop code or call an API that already exists because that's our core business",
    "start": "3094040",
    "end": "3101090"
  },
  {
    "text": "right so our initial question was when we sat",
    "start": "3101090",
    "end": "3106270"
  },
  {
    "text": "down is like can we write at one framework to rule them all they are like the one authorization framework that",
    "start": "3106270",
    "end": "3111820"
  },
  {
    "text": "just works for everyone and I think our answer at the end was no right you can",
    "start": "3111820",
    "end": "3117430"
  },
  {
    "text": "go up to a certain level they are role permissions maybe get a little bit more fine-grained even but once you are",
    "start": "3117430",
    "end": "3123760"
  },
  {
    "text": "inside the feature as we call it here I think it's a not authorization anymore",
    "start": "3123760",
    "end": "3129100"
  },
  {
    "text": "and B it's indeed so application specific that I don't think it makes sense to write a framework for it write",
    "start": "3129100",
    "end": "3135760"
  },
  {
    "text": "your own framework that's the conclusion any questions yep",
    "start": "3135760",
    "end": "3143940"
  },
  {
    "text": "so that the question is you were missing the authentication piece yeah right",
    "start": "3159210",
    "end": "3166140"
  },
  {
    "text": "that's authentication yeah so yeah we didn't do that because we do it every",
    "start": "3166140",
    "end": "3172109"
  },
  {
    "text": "year this year we thought this was a big difference yeah nobody know that you go",
    "start": "3172109",
    "end": "3177930"
  },
  {
    "text": "right here maybe go back to that yet to this picture here so before we can",
    "start": "3177930",
    "end": "3184470"
  },
  {
    "text": "authorize something you have to know who the user is right so and that data can",
    "start": "3184470",
    "end": "3189869"
  },
  {
    "text": "come from a local database it can come from Active Directory it can come from external identity providers like Google",
    "start": "3189869",
    "end": "3196980"
  },
  {
    "text": "or maybe have a business business-to-business like like hospitals that irate with each other these days actually maybe that's a doctor from a",
    "start": "3196980",
    "end": "3204180"
  },
  {
    "text": "different Hospital right and depending on which claims he has in that origin",
    "start": "3204180",
    "end": "3211170"
  },
  {
    "text": "hospital he might have different qualifications in the current Hospital things like that yes that's a whole",
    "start": "3211170",
    "end": "3217140"
  },
  {
    "text": "other topic right but the way we designed our engine is just go to the",
    "start": "3217140",
    "end": "3223650"
  },
  {
    "text": "the one with the input data yes no no's in the next next slide the way we",
    "start": "3223650",
    "end": "3231109"
  },
  {
    "text": "designed our engine no next one and one more yeah the way we thought about is",
    "start": "3231109",
    "end": "3239040"
  },
  {
    "text": "yeah is that you hand us identity claims",
    "start": "3239040",
    "end": "3244799"
  },
  {
    "text": "into the system's right and where they come from they might come from your local identity provider it might come",
    "start": "3244799",
    "end": "3249809"
  },
  {
    "text": "from an external identity provider which typically means they get transformed at the edge before they enter your system",
    "start": "3249809",
    "end": "3255150"
  },
  {
    "text": "right and then you hand us this list of claims about that user and then the",
    "start": "3255150",
    "end": "3261260"
  },
  {
    "text": "rules engine maps them to permissions right",
    "start": "3261260",
    "end": "3267559"
  },
  {
    "text": "for what exactly that that's what",
    "start": "3270039",
    "end": "3275149"
  },
  {
    "text": "identity wise doing right that's what it's good at authenticating users",
    "start": "3275149",
    "end": "3280269"
  },
  {
    "text": "transforming identity data into tokens and then once you have that token this",
    "start": "3280269",
    "end": "3286729"
  },
  {
    "text": "thing would take over and change it into authorization data okay yeah OOP louder",
    "start": "3286729",
    "end": "3299349"
  },
  {
    "text": "yeah what's the code in the slides not",
    "start": "3302739",
    "end": "3311239"
  },
  {
    "text": "yet let us do a little bit more a nicer version of that and then figure out how we exactly pack it to that but yeah I",
    "start": "3311239",
    "end": "3318589"
  },
  {
    "text": "don't think the code is the most important part of this talk it's more like the pattern well but yeah we will",
    "start": "3318589",
    "end": "3325579"
  },
  {
    "text": "get to that okay cool one more question or two or",
    "start": "3325579",
    "end": "3330889"
  },
  {
    "text": "are we done like a head start to the buffet I think we're done okay thank you",
    "start": "3330889",
    "end": "3337369"
  },
  {
    "text": "for your time and enjoy the rest of the week thank you",
    "start": "3337369",
    "end": "3341349"
  }
]