[
  {
    "text": "I guess this time its 11:14 so let's get started I guess I'll start with no good",
    "start": "5340",
    "end": "10469"
  },
  {
    "text": "morning everyone welcome to any support oh and welcome also welcome to this talk on how to build a social network on",
    "start": "10469",
    "end": "16860"
  },
  {
    "text": "server less so my name is entre Prince Imagineer at the company cortizone we do",
    "start": "16860",
    "end": "23400"
  },
  {
    "text": "is post streaming the same time and also one of the eight best service heroes so for those of you who are not familiar",
    "start": "23400",
    "end": "28890"
  },
  {
    "text": "with what that actually means is essentially Amazon's the equivalent to Microsoft's MVP program and also doing",
    "start": "28890",
    "end": "35730"
  },
  {
    "text": "some independent consulting work on the side as well since I've been working part time at the zone which as I mentioned it's in the sports gym in",
    "start": "35730",
    "end": "42090"
  },
  {
    "text": "business we call ourselves the Netflix for sports partly because we have a very similar business model in that we offer",
    "start": "42090",
    "end": "48870"
  },
  {
    "text": "a subscription-based platform that allows to watch any sports that we have on our platform but also kind of because",
    "start": "48870",
    "end": "55920"
  },
  {
    "text": "we kind of slow stolen the Netflix that you are as you can probably tell from the from the screenshot I'm showing you here and we have offices in London",
    "start": "55920",
    "end": "62820"
  },
  {
    "text": "Amsterdam late and catalyser and we have over 40 different sports and over 300",
    "start": "62820",
    "end": "69150"
  },
  {
    "text": "different leagues all around the world in last six months alone we have launched in the Italy including",
    "start": "69150",
    "end": "74310"
  },
  {
    "text": "streaming Serie A and Serie B and the first weekend we accounted for something",
    "start": "74310",
    "end": "79469"
  },
  {
    "text": "like 50 percent of the Internet traffic in Italy when we first launched there since then we've also launched in the US",
    "start": "79469",
    "end": "86100"
  },
  {
    "text": "with boxing and as we speak we launched in the in Spain yesterday so that makes",
    "start": "86100",
    "end": "91229"
  },
  {
    "text": "it eight countries and over 30 different different platforms and devices a peak",
    "start": "91229",
    "end": "97049"
  },
  {
    "text": "we have around a million concurrent viewers on our platform which as you can imagine has some interesting technical",
    "start": "97049",
    "end": "102899"
  },
  {
    "text": "challenges which right now we are tackling those challenges using both servers but also containers as well so",
    "start": "102899",
    "end": "110459"
  },
  {
    "text": "as a company we are we very much are service first but there's many cases where serve lets you know good fit for",
    "start": "110459",
    "end": "116459"
  },
  {
    "text": "every single use case so we are using containers as part of architecture as well but as you can see from the title",
    "start": "116459",
    "end": "122880"
  },
  {
    "text": "of my talk I'm not here to talk about sports streaming that would be a different talk at a different time what I want to talk about today is some of",
    "start": "122880",
    "end": "129869"
  },
  {
    "text": "the work that I did in one of my previous companies where I was building a social network that you can think of",
    "start": "129869",
    "end": "135750"
  },
  {
    "text": "as a mix of Instagram Twitter and Facebook and was really did that I'll learn an",
    "start": "135750",
    "end": "140909"
  },
  {
    "text": "awful lot about it was lambda and what it takes to run a service architecture",
    "start": "140909",
    "end": "145920"
  },
  {
    "text": "in production so when I joined yabo the social network we had a pretty",
    "start": "145920",
    "end": "151890"
  },
  {
    "text": "monolithic system that is very simple on paper but under the hood there have we",
    "start": "151890",
    "end": "157200"
  },
  {
    "text": "had a lot of complexity and problems hidden inside each one of those boxes and about six months later after we",
    "start": "157200",
    "end": "164459"
  },
  {
    "text": "started ghost fully service we ended up with architecture that's both event-driven as well as service-oriented",
    "start": "164459",
    "end": "170549"
  },
  {
    "text": "and lambda is a centerpiece that glues everything together at this point you might be you might be tempted to ask",
    "start": "170549",
    "end": "176540"
  },
  {
    "text": "just why why did you feel the need to take on such undertaking what is the",
    "start": "176540",
    "end": "182609"
  },
  {
    "text": "benefit so I want to take you back bit further so yeah both being an early age",
    "start": "182609",
    "end": "187920"
  },
  {
    "text": "early stage social network we have many we do have dominant users so our baseline traffic is fairly low but we",
    "start": "187920",
    "end": "195209"
  },
  {
    "text": "didn't manage to attract the fuze influences from other platforms like Instagram and this influencers had a big",
    "start": "195209",
    "end": "201780"
  },
  {
    "text": "influence on our traffic pattern so whenever they would run say a social media campaign and people like Emily",
    "start": "201780",
    "end": "209549"
  },
  {
    "text": "whose was one of our top users at a time when the whole platform had about a hundred thousand or million subscriber",
    "start": "209549",
    "end": "215209"
  },
  {
    "text": "users she had about 400,000 followers already when she often would write the",
    "start": "215209",
    "end": "221549"
  },
  {
    "text": "post and say hey guys please vote on this and I'm gonna announce the lucky winner for this beautiful designer",
    "start": "221549",
    "end": "227760"
  },
  {
    "text": "handbag at 10 p.m. tonight so as you can imagine all throughout the",
    "start": "227760",
    "end": "232889"
  },
  {
    "text": "day traffic is nice and stable and very low and just about ten o'clock you have",
    "start": "232889",
    "end": "239069"
  },
  {
    "text": "a massive spike in traffic as everybody the who follows an Emily comes back to see whether or not they were able to win",
    "start": "239069",
    "end": "245459"
  },
  {
    "text": "her price so we get these all these unpredictable spikes in traffic throughout the day which has some",
    "start": "245459",
    "end": "252090"
  },
  {
    "text": "serious implications in terms of how do we do capacity planning and scaling our vacations we end up having much larger",
    "start": "252090",
    "end": "259139"
  },
  {
    "text": "you cluster than we've like running a very low utilization so that we have a lot of room to handle these spikes and",
    "start": "259139",
    "end": "265260"
  },
  {
    "text": "because scaling takes a few minutes before server is actually ready to serve requests so we tend to scare up a lot",
    "start": "265260",
    "end": "271890"
  },
  {
    "text": "earlier will time with I guess whoa I put two things together it means that we are spending a lot of",
    "start": "271890",
    "end": "277009"
  },
  {
    "text": "money resources that we're not even using by my estimate we'll put paper on average",
    "start": "277009",
    "end": "282860"
  },
  {
    "text": "throughout the whole day you think about five percent of what we pay for and that is dice that's bad and we all know that",
    "start": "282860",
    "end": "290780"
  },
  {
    "text": "an even bigger problem was that at a time deployment was taking 30 minutes and required downtime the whole system",
    "start": "290780",
    "end": "297470"
  },
  {
    "text": "have to go down and then back up with nothing in between so that if you come into the app during the deployment all",
    "start": "297470",
    "end": "303530"
  },
  {
    "text": "you see is a buffer face that's not even message that says sorry guys we are deploying and that features",
    "start": "303530",
    "end": "310099"
  },
  {
    "text": "often took months to implement something even something simple was taking a very very long time and many people to",
    "start": "310099",
    "end": "316250"
  },
  {
    "text": "actually develop and what my favorite speakers that no off once said that the lead time to someone saying thank you is",
    "start": "316250",
    "end": "322580"
  },
  {
    "text": "the only reputation of metric that matters and it's a message that has really resonated with me has stuck with",
    "start": "322580",
    "end": "327860"
  },
  {
    "text": "me ever since and as engineers to get a thank you we need to first provide some value to",
    "start": "327860",
    "end": "333500"
  },
  {
    "text": "people we tend to do that we need to shape our software until our software is as you ship them running production as",
    "start": "333500",
    "end": "339710"
  },
  {
    "text": "far as our users are concerned we haven't done anything yet so in terms of our motivation to take this drastic",
    "start": "339710",
    "end": "346280"
  },
  {
    "text": "overhaul of architecture and our approach was first and foremost to really deliver a better product one that",
    "start": "346280",
    "end": "353509"
  },
  {
    "text": "our users actually love to use and as a team we want to be able to deliver value",
    "start": "353509",
    "end": "359990"
  },
  {
    "text": "to our business quicker faster and as a company we also want to cut down a dress",
    "start": "359990",
    "end": "366050"
  },
  {
    "text": "cost to be more cost efficient just to be clear here I'm not saying that the goal the goal is not to spend less per",
    "start": "366050",
    "end": "372229"
  },
  {
    "text": "se but to spend better if it's something is expensive but delivers a lot of value that's fine by me but I'm not happy with",
    "start": "372229",
    "end": "379430"
  },
  {
    "text": "paying or carrying all this wastage is about return on investment if I'm spending money and not get any return",
    "start": "379430",
    "end": "385729"
  },
  {
    "text": "dice bad and once the Y is clear to us we need to decide on the how what we",
    "start": "385729",
    "end": "392569"
  },
  {
    "text": "need to figure out what the good architecture would look like for us and having sat down the team we decided that",
    "start": "392569",
    "end": "398599"
  },
  {
    "text": "we want deployment to be small to be fast to have no downtime and we also don't want to be in a situation where we",
    "start": "398599",
    "end": "405259"
  },
  {
    "text": "have to do blocks deployment with the client applications because of the sheer amount of coordination and stresses involved we",
    "start": "405259",
    "end": "412890"
  },
  {
    "text": "also want features to be independently deployable we want them to be loosely coupled so that every component can",
    "start": "412890",
    "end": "419220"
  },
  {
    "text": "evolve at their own pace and we don't want everything to have the evolve at a pace of the slowest component and as a",
    "start": "419220",
    "end": "427410"
  },
  {
    "text": "team we also want to minimize the amount of fat that we have in a diverse bill and there was plenty of it and we want",
    "start": "427410",
    "end": "433860"
  },
  {
    "text": "to minimize the amount of time that we spend just babysitting our infrastructure as far as I'm concerned the infrastructures you work for me and",
    "start": "433860",
    "end": "440790"
  },
  {
    "text": "if I understand all of my time just keeping an eye on infrastructure is that a high working I'm looking after him for",
    "start": "440790",
    "end": "447240"
  },
  {
    "text": "sure he I'm working for infrastructure and we also want to reduce the amount of technical mess that we inherited as a",
    "start": "447240",
    "end": "453780"
  },
  {
    "text": "team and that's a very conscious choice of wording I often hear people talk about telling quartets but that implies",
    "start": "453780",
    "end": "459600"
  },
  {
    "text": "a decision to make some trade-off so that future work is required but you get a ship earlier and what I found right",
    "start": "459600",
    "end": "465960"
  },
  {
    "text": "took over the architecture wasn't that and once we fix all this mess that we inherited we also want to be able to",
    "start": "465960",
    "end": "471690"
  },
  {
    "text": "deliver things faster as well is not acceptable for the team to take months to deliver simple features so",
    "start": "471690",
    "end": "478530"
  },
  {
    "text": "intentionally approach we decided to go on we wanted to build a event-driven micro-services architecture and since",
    "start": "478530",
    "end": "484770"
  },
  {
    "text": "we're not even funny we're not a infrastructure company so the time we spent on managing our infrastructure",
    "start": "484770",
    "end": "489930"
  },
  {
    "text": "it's time that we take away from us during the stuff that we actually benefit our users so as a company as a",
    "start": "489930",
    "end": "496590"
  },
  {
    "text": "team we also decided to go serve less first and this talk is part of what what do we actually do to get there you may",
    "start": "496590",
    "end": "504120"
  },
  {
    "text": "also recognize this as a golden circle with some ensign like Fox by an awful lot even read his book yet I highly",
    "start": "504120",
    "end": "510330"
  },
  {
    "text": "recommend it is amazing so by the time the whole transformation finish we have",
    "start": "510330",
    "end": "515339"
  },
  {
    "text": "somewhere around 200 lambda functions running production and even the cost wasn't our main driver for this whole",
    "start": "515339",
    "end": "521729"
  },
  {
    "text": "migration we defined that we made a significant amount of cost saving we were spending about 5% on lambda",
    "start": "521729",
    "end": "528990"
  },
  {
    "text": "compared to what we spend on ec2 for comparable amount of compute because we're able to cut out all the ways that",
    "start": "528990",
    "end": "534990"
  },
  {
    "text": "we had a run are easy to it cost usage but more importantly for me we went from doing maybe four to six",
    "start": "534990",
    "end": "541749"
  },
  {
    "text": "deployment to production a month too easy doing 100 a month by within a few months and we had the same sized team we",
    "start": "541749",
    "end": "549309"
  },
  {
    "text": "just have to we just made everybody more productive we talked about all the shackles I stopped them from him to iterate quickly and we gave them their",
    "start": "549309",
    "end": "556149"
  },
  {
    "text": "superpower back and oftentimes feature would take days instead of months and sometimes we can they were discussed",
    "start": "556149",
    "end": "562899"
  },
  {
    "text": "they were implemented and deployed the production in the same day so for a moment we decided that Lander or serve",
    "start": "562899",
    "end": "569439"
  },
  {
    "text": "less is good fit for a direction that we want to move towards to actually having something run in production we need to",
    "start": "569439",
    "end": "575709"
  },
  {
    "text": "be responsible we need to understand how we are actually going to operate this service architecture and that means we",
    "start": "575709",
    "end": "582069"
  },
  {
    "text": "to answer questions around how do we do continuous delivery what about testing and logging and",
    "start": "582069",
    "end": "587619"
  },
  {
    "text": "monitoring and alerting and so on and as architecture expanded to include more",
    "start": "587619",
    "end": "592749"
  },
  {
    "text": "services and more functions many of which are have interdependencies as well we also need to answer questions around",
    "start": "592749",
    "end": "599589"
  },
  {
    "text": "how do we do this Jubilee tracing what about comping management and security all of that is super",
    "start": "599589",
    "end": "607089"
  },
  {
    "text": "interesting to me I spend a lot of time looking at those technical problems for service but they're not what I'm here to",
    "start": "607089",
    "end": "612579"
  },
  {
    "text": "talk about today I cover that in previous code talks on NBC and also have a video course with many that covers",
    "start": "612579",
    "end": "619240"
  },
  {
    "text": "specifically how do you tackle those challenges with service and instead",
    "start": "619240",
    "end": "624399"
  },
  {
    "text": "today I want to talk about how we use servers to essentially rebuild our entire architecture and one of the first",
    "start": "624399",
    "end": "630819"
  },
  {
    "text": "a perhaps most important thing we did was the chain was up there our monolith so that you record all state changes as",
    "start": "630819",
    "end": "637629"
  },
  {
    "text": "events and publish them into a keynesian stream now event this event of an",
    "start": "637629",
    "end": "642669"
  },
  {
    "text": "approach allows you to have great composability and build systems in a really loosely coupled way and you can",
    "start": "642669",
    "end": "649119"
  },
  {
    "text": "use lambda or any kind of functional service offering as a glue or connectivity tissue that compose",
    "start": "649119",
    "end": "654819"
  },
  {
    "text": "different services together to deliver some business value to your users in this case Canisius is my sink where",
    "start": "654819",
    "end": "663249"
  },
  {
    "text": "different services many of which are REST API that are implemented with API",
    "start": "663249",
    "end": "668589"
  },
  {
    "text": "gateway and lambda and when the state changes as happening in those systems they there publish them as events into my",
    "start": "668589",
    "end": "675100"
  },
  {
    "text": "Canisius dreams where other systems are a different boundary context they are interesting very different events they",
    "start": "675100",
    "end": "682030"
  },
  {
    "text": "can subscribe the stream and react to those events to lambda functions and each one of those guys would do their",
    "start": "682030",
    "end": "688450"
  },
  {
    "text": "own thing some will probably keep a copy of the data they care about in their own database others might send out real-time",
    "start": "688450",
    "end": "695140"
  },
  {
    "text": "updates route to the clients using WebSockets you say maybe Amazon IOT and",
    "start": "695140",
    "end": "700720"
  },
  {
    "text": "so on and those are the services that are reacting to events they can also",
    "start": "700720",
    "end": "706210"
  },
  {
    "text": "have state changes internally and they can also publish those events back into the stream to tell everyone else that",
    "start": "706210",
    "end": "712180"
  },
  {
    "text": "hey I've just done a thing so that other services that are interesting those events can then react to those and do",
    "start": "712180",
    "end": "718420"
  },
  {
    "text": "their own thing as well so using events you can build systems in a very very loosely kappa way so you go",
    "start": "718420",
    "end": "725830"
  },
  {
    "text": "to the process of dividing your system into bounded context and micro services and then instead of having one service",
    "start": "725830",
    "end": "733480"
  },
  {
    "text": "have to tell everybody else when some state changes happened which creates of course a lot of coupling between",
    "start": "733480",
    "end": "739060"
  },
  {
    "text": "different services and it is not a large company this often translates into inter-team dependencies as well which I",
    "start": "739060",
    "end": "746380"
  },
  {
    "text": "can tell you right now is easily the top thing that's gonna cure a project dead in water",
    "start": "746380",
    "end": "751770"
  },
  {
    "text": "so instead with events everyone just look after what happens inside their own boundary context and publish their state",
    "start": "751770",
    "end": "758950"
  },
  {
    "text": "changes to the stream and you can they can listen to the stream for state changes happening elsewhere in the",
    "start": "758950",
    "end": "764650"
  },
  {
    "text": "system of course this idea is not new to serve less it's been around for quite a",
    "start": "764650",
    "end": "770290"
  },
  {
    "text": "long time databases have the same ideas with transaction logs and you also find",
    "start": "770290",
    "end": "775300"
  },
  {
    "text": "it is to me systems this similar idea called the unified log processing that's been around for quite some time as well",
    "start": "775300",
    "end": "782550"
  },
  {
    "text": "now I love building event-driven systems and it's my it's definitely my preferred",
    "start": "782550",
    "end": "787840"
  },
  {
    "text": "way of building things but it's by no means the Silver Bullet it so some problems but it also comes with its own",
    "start": "787840",
    "end": "794830"
  },
  {
    "text": "baggage and complexities and I definitely think that there are many cases where this kind of event driven",
    "start": "794830",
    "end": "800350"
  },
  {
    "text": "architecture is a really bad fit for some problems so you have all these",
    "start": "800350",
    "end": "806080"
  },
  {
    "text": "different subsystems or publishing events into a share stream and this consumer events from the stream",
    "start": "806080",
    "end": "812120"
  },
  {
    "text": "and the comment challenge you find is how do you make sure that when you update your contract the the contract",
    "start": "812120",
    "end": "818660"
  },
  {
    "text": "for your events you don't accidentally end up breaking some other system somewhere else who is depending on your",
    "start": "818660",
    "end": "824240"
  },
  {
    "text": "events we personally have to now mostly just rely on having this plane and never",
    "start": "824240",
    "end": "830780"
  },
  {
    "text": "introduce any breaking changes but it's as I imagine is fairly brittle approach and it's very hard to maintain as the",
    "start": "830780",
    "end": "838310"
  },
  {
    "text": "team grows its Dupree early days but I really like what the a Seng API spec is trying to do try to give you a way to to",
    "start": "838310",
    "end": "846020"
  },
  {
    "text": "to define your your specification for events and being with you control took",
    "start": "846020",
    "end": "851690"
  },
  {
    "text": "the manage to break into any kind of changes to your you to your contract another problem of an or mistake often",
    "start": "851690",
    "end": "858980"
  },
  {
    "text": "fine is when you try to implement a workflow inside a particular boundary context using events in this case you're",
    "start": "858980",
    "end": "867860"
  },
  {
    "text": "making debugging much more difficult for yourself there's a lot of unnecessary complexity involved with logging tracing",
    "start": "867860",
    "end": "874730"
  },
  {
    "text": "and more important ease NTN reporting becomes very difficult because the",
    "start": "874730",
    "end": "880490"
  },
  {
    "text": "workflow itself doesn't actually exist as a standalone concept in your kotecha is the abstract some of the different",
    "start": "880490",
    "end": "887810"
  },
  {
    "text": "parts so different event posting logic you have and it only comes together as a whole inside the mental model that you",
    "start": "887810",
    "end": "894530"
  },
  {
    "text": "hold in your head so I think a better way to do this is use a workflow engine",
    "start": "894530",
    "end": "899630"
  },
  {
    "text": "such as step functions or as your logic app where you can capture the workflow itself explicitly and it also gives you",
    "start": "899630",
    "end": "906590"
  },
  {
    "text": "more control around retries error handling and branching logic and so on the trade of elizabeth's the step",
    "start": "906590",
    "end": "913160"
  },
  {
    "text": "functions is that cost is quite is quite expensive service 1 million transfer",
    "start": "913160",
    "end": "918830"
  },
  {
    "text": "state transitions in this case will cost you about $25 which is probably 50 times",
    "start": "918830",
    "end": "925130"
  },
  {
    "text": "what you will pay for the land invocations themselves so even as you",
    "start": "925130",
    "end": "930140"
  },
  {
    "text": "transition to using a workflow engine whenever you make state changes as part of your workflow also don't forget to",
    "start": "930140",
    "end": "936440"
  },
  {
    "text": "publish them as event as well so they're elsewhere some other systems somes in your some other microservices",
    "start": "936440",
    "end": "943130"
  },
  {
    "text": "might be interested and be able to react to those state changes that are husband hath has happened as part of your",
    "start": "943130",
    "end": "949520"
  },
  {
    "text": "workflow and the probably the biggest question I get from people that's trying to adopt surveys is well we're still",
    "start": "949520",
    "end": "957140"
  },
  {
    "text": "doing micro services by the sound of it and we're doing this health this whole know large does event-driven",
    "start": "957140",
    "end": "962750"
  },
  {
    "text": "architecture how do we actually then organize our functions into repositories do we put everything all my functions",
    "start": "962750",
    "end": "969800"
  },
  {
    "text": "inside a single repository there's definitely pros and cons to this amount",
    "start": "969800",
    "end": "975230"
  },
  {
    "text": "of repro approach which is beyond would like to cover in this particular talk since it's not the path that I've I've",
    "start": "975230",
    "end": "982100"
  },
  {
    "text": "normally gone down with I just want to make sure that you understand that even when you do go down this path of having",
    "start": "982100",
    "end": "987680"
  },
  {
    "text": "more repo it doesn't mean that you have to put everything inside the same stack as well if you're talking about AWS and",
    "start": "987680",
    "end": "995150"
  },
  {
    "text": "Confirmation you actually count because there's a 200 resources limit for a particular stack the approach that have",
    "start": "995150",
    "end": "1003190"
  },
  {
    "text": "gone that are normally used is having one repository per service but we still need to identify those service",
    "start": "1003190",
    "end": "1009339"
  },
  {
    "text": "boundaries this is my quick mind map for the social network yeah Bo and there you",
    "start": "1009339",
    "end": "1015130"
  },
  {
    "text": "can are you can very quickly identify a number of distinct features in this system for example we had a timeline",
    "start": "1015130",
    "end": "1022120"
  },
  {
    "text": "feature just like what you'll find other social networks like Twitter and Facebook but then there's also things",
    "start": "1022120",
    "end": "1028390"
  },
  {
    "text": "like search notifications suggestion child and so on and all of these",
    "start": "1028390",
    "end": "1033550"
  },
  {
    "text": "features in your system offers a good starting point for identifying your service boundaries and you find that all",
    "start": "1033550",
    "end": "1040300"
  },
  {
    "text": "these features they evolve around a number of entities or concepts in your domain such as users relationships",
    "start": "1040300",
    "end": "1047530"
  },
  {
    "text": "brands content and so on so all of these things can be used to identify your",
    "start": "1047530",
    "end": "1052600"
  },
  {
    "text": "service boundaries and each one of them can be managed by a single micro service and implemented using the most",
    "start": "1052600",
    "end": "1058720"
  },
  {
    "text": "appropriate set of technologies it could be containers you could be running on servers and in terms of database and",
    "start": "1058720",
    "end": "1064690"
  },
  {
    "text": "queues and streams for example if you're talking about relationships to store the",
    "start": "1064690",
    "end": "1070480"
  },
  {
    "text": "relationship data in a way that makes it easy for you to do complex is like finding a second or third degree",
    "start": "1070480",
    "end": "1077200"
  },
  {
    "text": "connections or to find people in your network there has a shared interest you probably want to consider putting the",
    "start": "1077200",
    "end": "1082880"
  },
  {
    "text": "data and store them in a graph database such as near for J and here every",
    "start": "1082880",
    "end": "1088760"
  },
  {
    "text": "service cannot get its own repository and all the functions that have to work together as part of those micro-services",
    "start": "1088760",
    "end": "1094550"
  },
  {
    "text": "they also belong in the same repository as well and I typically set up one",
    "start": "1094550",
    "end": "1101300"
  },
  {
    "text": "sea-ice in the pipeline for every single service and therefore every repo that we",
    "start": "1101300",
    "end": "1106310"
  },
  {
    "text": "deploy all the function as a single stack so if there are ads also if there are other resources like dynamic TV",
    "start": "1106310",
    "end": "1113240"
  },
  {
    "text": "tables that are only used it only makes sense and relevant to those particular particular service then we also include",
    "start": "1113240",
    "end": "1119630"
  },
  {
    "text": "them as the same confirmation stack as well and from there we can use this",
    "start": "1119630",
    "end": "1124670"
  },
  {
    "text": "triangular pattern to incrementally move functionalities from our monolith to our new micro service architecture",
    "start": "1124670",
    "end": "1130630"
  },
  {
    "text": "piece-by-piece since search was our first and first",
    "start": "1130630",
    "end": "1137870"
  },
  {
    "text": "target because it was an isolated feature it was easy to implement and I actually managed to implement and deploy",
    "start": "1137870",
    "end": "1143300"
  },
  {
    "text": "the whole thing in just a couple of days and we were able to use that to give us quick feedback on how our approach is",
    "start": "1143300",
    "end": "1149390"
  },
  {
    "text": "working with this server socket service and how dark and how to help guide us towards how we migrate the rest of our",
    "start": "1149390",
    "end": "1156320"
  },
  {
    "text": "system over at a time the search feature was essentially one big complex rhetorics against MongoDB",
    "start": "1156320",
    "end": "1164510"
  },
  {
    "text": "which as you can imagine just didn't perform or scale to turn into any satisfactory degree in fact we were",
    "start": "1164510",
    "end": "1171470"
  },
  {
    "text": "struggling for performance with a very large MongoDB instance for about 100,000",
    "start": "1171470",
    "end": "1176990"
  },
  {
    "text": "users and for social network to aspire to have millions and millions of users globally that's just clearly not good",
    "start": "1176990",
    "end": "1183230"
  },
  {
    "text": "enough and it was also very difficult for us to implement any anything beyond with the mentoring ranking on the search",
    "start": "1183230",
    "end": "1189350"
  },
  {
    "text": "results so since we have our more leaf publishing all state changes to a",
    "start": "1189350",
    "end": "1194360"
  },
  {
    "text": "keynesian stream so in terms of rewriting the search feature I can just have a lambda function they'll listen to",
    "start": "1194360",
    "end": "1200450"
  },
  {
    "text": "user registrations when remember user follows one another or whenever they update their profile",
    "start": "1200450",
    "end": "1207440"
  },
  {
    "text": "for those events I can use I can react to them to update a user index in Amazon's",
    "start": "1207440",
    "end": "1212840"
  },
  {
    "text": "cow search which is essentially a hosted version of solar and I was able to temp",
    "start": "1212840",
    "end": "1219200"
  },
  {
    "text": "you a new search API in front of that soul at a cloud search using API gateway",
    "start": "1219200",
    "end": "1224630"
  },
  {
    "text": "and lambda and as part of a migration instead of waiting for the cloud the mobile applications to then migrate to a",
    "start": "1224630",
    "end": "1231500"
  },
  {
    "text": "new services which then have taken even more time we typically just update them on a leaf at the same time to them proxy",
    "start": "1231500",
    "end": "1238190"
  },
  {
    "text": "the request to the search endpoints in this case the search endpoint to our new service so that we can deliver value to",
    "start": "1238190",
    "end": "1244910"
  },
  {
    "text": "our customers right away and when the mobile teams have the time in their backlog they can then move to use the",
    "start": "1244910",
    "end": "1250580"
  },
  {
    "text": "new search end points directly at the time we also decided to build a new",
    "start": "1250580",
    "end": "1256930"
  },
  {
    "text": "analytics pipeline pretty soon after that so for some reason we were you",
    "start": "1256930",
    "end": "1262190"
  },
  {
    "text": "saying mixed pano and even though we are just starting out we didn't have that much data to begin with we sign a contract an",
    "start": "1262190",
    "end": "1269540"
  },
  {
    "text": "O for the top tier and which is about $3,000 per month and our bi guy doesn't",
    "start": "1269540",
    "end": "1276530"
  },
  {
    "text": "actually know how to work with they are complicated they're JavaScript based the query language and because Mixpanel",
    "start": "1276530",
    "end": "1282890"
  },
  {
    "text": "is no designed for collecting generic against mobile usage events no people",
    "start": "1282890",
    "end": "1287960"
  },
  {
    "text": "logging in people standing out moving from one screen to another they don't actually understand our domain in that",
    "start": "1287960",
    "end": "1293780"
  },
  {
    "text": "it's a social graph oftentimes when we want to query we want to find people's that no followers may be Tinie Tempah or",
    "start": "1293780",
    "end": "1301220"
  },
  {
    "text": "someone in the influencer and we don't just want to target know people that hire son in the last couple of days we",
    "start": "1301220",
    "end": "1307550"
  },
  {
    "text": "want to look at our social graph as well so in this case we were able to add",
    "start": "1307550",
    "end": "1312860"
  },
  {
    "text": "another lambda function that consumes all of our street the event has been published by our legacy system and we",
    "start": "1312860",
    "end": "1319370"
  },
  {
    "text": "just live stream all those events into Google bigquery which lets you run ad hoc queries against X file size data set",
    "start": "1319370",
    "end": "1326990"
  },
  {
    "text": "and still return results within seconds and also Google bigquery like many other",
    "start": "1326990",
    "end": "1332000"
  },
  {
    "text": "services that we're going to talk about today it's all paper use so you only get charged for the data that bigquery has a",
    "start": "1332000",
    "end": "1338960"
  },
  {
    "text": "process plus a minimal amount for story this whole pipeline took several",
    "start": "1338960",
    "end": "1344420"
  },
  {
    "text": "iterations the first iteration took just one developer two days to go from initial discussion to running something",
    "start": "1344420",
    "end": "1351320"
  },
  {
    "text": "in production and that was his first project with server as a lambda as well and our PR analyst we just join us from",
    "start": "1351320",
    "end": "1359450"
  },
  {
    "text": "Skype at a time came to us afterward and said Jesus guys nothing ever got done this faster Skype which is of course no",
    "start": "1359450",
    "end": "1366260"
  },
  {
    "text": "offense to Skype but yo goes back to the point of the lead time for someone to someone 15 say thank you to the value",
    "start": "1366260",
    "end": "1372770"
  },
  {
    "text": "that you've delivered is the this is the metric that we should be optimized towards and also since cost wasn't our",
    "start": "1372770",
    "end": "1380360"
  },
  {
    "text": "main driver for any of this work we're doing it really nice to find that based",
    "start": "1380360",
    "end": "1385610"
  },
  {
    "text": "on the amount data we actually had we're able to do everything we use we use Mixpanel for with bigquery and you as",
    "start": "1385610",
    "end": "1392120"
  },
  {
    "text": "well as you can see there's like 10,000 difference in terms of cost between",
    "start": "1392120",
    "end": "1398690"
  },
  {
    "text": "using bigquery for the workload we had to using mixed Panos so it's great to",
    "start": "1398690",
    "end": "1404270"
  },
  {
    "text": "see we managed to deliver a lot of cost saving while also delivering more capabilities to our bi analyst as well",
    "start": "1404270",
    "end": "1411010"
  },
  {
    "text": "of course since then amazon also announced a new service called Athena well not new anymore it was announced in",
    "start": "1411010",
    "end": "1417770"
  },
  {
    "text": "2016 as the direct competition to bigquery and you have to do this whole thing all over again I will probably go",
    "start": "1417770",
    "end": "1424700"
  },
  {
    "text": "with Athena in which case Kinesis is still my sink for all my events and I",
    "start": "1424700",
    "end": "1430700"
  },
  {
    "text": "can have for Canisius fire host which then can then collect and batch events from kinases and then dump them into s3",
    "start": "1430700",
    "end": "1438670"
  },
  {
    "text": "which is my data Lake and from there I can run a crawler in the a diverse glue",
    "start": "1438670",
    "end": "1445040"
  },
  {
    "text": "which basically just runs periodically look at the data you you have in your free bucket",
    "start": "1445040",
    "end": "1450890"
  },
  {
    "text": "analyze the schema automatically to derive a table and catalog the data into",
    "start": "1450890",
    "end": "1456110"
  },
  {
    "text": "tables that you can then query using a thinner so like bigquery you can run ad",
    "start": "1456110",
    "end": "1461780"
  },
  {
    "text": "hoc queries against a very large set of data and still get answers back within seconds",
    "start": "1461780",
    "end": "1466790"
  },
  {
    "text": "and unlike bigquery as well Athena is also pay per use so you only pay for data that you process with your query",
    "start": "1466790",
    "end": "1472970"
  },
  {
    "text": "and with Athena you can and also hook up the result of your queries to quick site which then allows",
    "start": "1472970",
    "end": "1479780"
  },
  {
    "text": "you to create dashboards and visualization to see very quickly see those surgeries that there was a query",
    "start": "1479780",
    "end": "1485720"
  },
  {
    "text": "results and also quick sites also pay per use as well and the nice thing about",
    "start": "1485720",
    "end": "1491420"
  },
  {
    "text": "this whole thing is that I don't have to write any business logic myself oh it is just know a few resources in Adrienne I",
    "start": "1491420",
    "end": "1498410"
  },
  {
    "text": "can provision weave terraform with confirmation whatever I decide to use and all the things you see here they're",
    "start": "1498410",
    "end": "1504980"
  },
  {
    "text": "all paper use as well so that when I don't have data when I'm not using it I don't pay anything for them either so I",
    "start": "1504980",
    "end": "1512240"
  },
  {
    "text": "can capture user actions and report them into this nice bi dashboard with pretty",
    "start": "1512240",
    "end": "1517310"
  },
  {
    "text": "much minimal effort and it can all be done very very quickly as as well just with a few resources that provision as",
    "start": "1517310",
    "end": "1524030"
  },
  {
    "text": "part of my CI CD pipeline and I mentioned we had this Timeline feature",
    "start": "1524030",
    "end": "1530210"
  },
  {
    "text": "which when I joined the company was already there and it was running as part",
    "start": "1530210",
    "end": "1535850"
  },
  {
    "text": "of the monolithic system and in fact it was one of the core features of the app the problem was that it just didn't work",
    "start": "1535850",
    "end": "1542510"
  },
  {
    "text": "at least not in the way that it was designed there was the details back in terms of how when you create posts how you should",
    "start": "1542510",
    "end": "1549860"
  },
  {
    "text": "get distributed to your followers and so on and the QA team has put together very good test case very thorough test case",
    "start": "1549860",
    "end": "1557270"
  },
  {
    "text": "and for some reason the implementation fail every single test and the whole QA",
    "start": "1557270",
    "end": "1563090"
  },
  {
    "text": "team declare the feature as untestable and it was when we came in we try to",
    "start": "1563090",
    "end": "1568430"
  },
  {
    "text": "understand what was actually going on we also find that it was very much over engineered how over engineered well it",
    "start": "1568430",
    "end": "1575180"
  },
  {
    "text": "was already doing so using events to separate you posting a new content to disability content to your followers",
    "start": "1575180",
    "end": "1582530"
  },
  {
    "text": "which is good thing but the way you was doing it was with this this module star",
    "start": "1582530",
    "end": "1588470"
  },
  {
    "text": "named 1 2 3 4 5 6 7 8 9 10 30 years and",
    "start": "1588470",
    "end": "1593540"
  },
  {
    "text": "get this they all do something slightly different which of course I can't tell what they're doing by looking at the",
    "start": "1593540",
    "end": "1598550"
  },
  {
    "text": "module name and the naming actually matters because it dictates the order and you've got this handle and what",
    "start": "1598550",
    "end": "1604040"
  },
  {
    "text": "you'll find that then requires all these other guys so that they are used notes pretty detect that what autumn which",
    "start": "1604040",
    "end": "1610710"
  },
  {
    "text": "means a proper process and I think is short-circuits on the first process that he finds the action is doing what",
    "start": "1610710",
    "end": "1616500"
  },
  {
    "text": "initiative as you can imagine it's crazy trying to figure out what is actually going on here and the people - you put",
    "start": "1616500",
    "end": "1623670"
  },
  {
    "text": "the system together that you couldn't debug it and worst of all the system didn't scale at all every post that you",
    "start": "1623670",
    "end": "1631530"
  },
  {
    "text": "receive in your feet have to reconstruct your entire feed and that's why singing",
    "start": "1631530",
    "end": "1636720"
  },
  {
    "text": "okay to put on a graph a glove on my hand I have to construct a brand new hand with the glove a touch to the new",
    "start": "1636720",
    "end": "1643260"
  },
  {
    "text": "hand so that I can then reattach to get to my body which sounds crazy and as of",
    "start": "1643260",
    "end": "1648990"
  },
  {
    "text": "course at that time a new CPU has come in and fired the entire team that was involved the old system so for the",
    "start": "1648990",
    "end": "1655290"
  },
  {
    "text": "better worse me and my friends we came in to the project and we have no one that we can talk to to figure out why was done the",
    "start": "1655290",
    "end": "1662190"
  },
  {
    "text": "way that way before so instead of trying to reverse a broken system we set down",
    "start": "1662190",
    "end": "1667530"
  },
  {
    "text": "the product team to figure out what it was that they actually wanted to deliver and we rebuild a system from the ground",
    "start": "1667530",
    "end": "1674430"
  },
  {
    "text": "up using again events because the first thing we did the whole thing the whole migration was make sure our legacy",
    "start": "1674430",
    "end": "1681210"
  },
  {
    "text": "system is publishing state changes into Canisius streams so in this case we can",
    "start": "1681210",
    "end": "1686430"
  },
  {
    "text": "then have lambda functions that subscribe to various events like I just posted something and then based on that",
    "start": "1686430",
    "end": "1692940"
  },
  {
    "text": "figure out who my followers are our store where my posse be distributed to put them in two batches of about a",
    "start": "1692940",
    "end": "1699840"
  },
  {
    "text": "hundred or couple hundred I can remember the detail the exact number and for each batch publish a message into as an S",
    "start": "1699840",
    "end": "1706440"
  },
  {
    "text": "which then triggers another lambda function to the accident take that post and add it to my followers feed and as a",
    "start": "1706440",
    "end": "1714360"
  },
  {
    "text": "part of already salty set and the reason we were we practiced you ask you as an S",
    "start": "1714360",
    "end": "1719820"
  },
  {
    "text": "here is that between s and s and lambda you get retry out of the box you get a",
    "start": "1719820",
    "end": "1725850"
  },
  {
    "text": "fixed RiRi choice even when when the when your function fails and you also get the letter Q support out of the box",
    "start": "1725850",
    "end": "1732390"
  },
  {
    "text": "as well and the reason why that's important for us is because we need to optimize for surviving the worst case",
    "start": "1732390",
    "end": "1739380"
  },
  {
    "text": "scenario what you find in all social network is that say 90% of people on Twitter would have",
    "start": "1739380",
    "end": "1744930"
  },
  {
    "text": "less than 100 followers but then you have that 1% that's got 5 10 million followers so in the worst sinner what",
    "start": "1744930",
    "end": "1752520"
  },
  {
    "text": "worst case scenario when something fails when one of those when say Obama published a new post you don't you want",
    "start": "1752520",
    "end": "1758670"
  },
  {
    "text": "to avoid repeating the expensive piece of work here which is figuring out all of his followers and then try to dispute",
    "start": "1758670",
    "end": "1765600"
  },
  {
    "text": "message to them and once we have data in Redis we can then create a new API in",
    "start": "1765600",
    "end": "1772050"
  },
  {
    "text": "front of ready state by this cluster with API gateway and lamda and as part",
    "start": "1772050",
    "end": "1778080"
  },
  {
    "text": "of our usual migration strategy we update the legacy system to proxy any requests to fetch your timeline and",
    "start": "1778080",
    "end": "1785100"
  },
  {
    "text": "forward them to your new systems in this",
    "start": "1785100",
    "end": "1790320"
  },
  {
    "text": "case we have a number of lambda functions all working together as a cohesive unit that to provide this",
    "start": "1790320",
    "end": "1796230"
  },
  {
    "text": "timeline feature we wanted and so they're all we saw in the same repo and that already put together even though",
    "start": "1796230",
    "end": "1803220"
  },
  {
    "text": "some of them as part of our API others are stream processing listening to",
    "start": "1803220",
    "end": "1809280"
  },
  {
    "text": "various different Canisius events and different event sources but it doesn't matter where you went sources are using",
    "start": "1809280",
    "end": "1814740"
  },
  {
    "text": "ultimately die is one cohesive unit they have to work together to deliver some feature and then the small very",
    "start": "1814740",
    "end": "1821490"
  },
  {
    "text": "important detail to note here is that I try to keep this when you're using the service framework for a particular stack",
    "start": "1821490",
    "end": "1827700"
  },
  {
    "text": "that you're describing very different functions you can also give it a service name which is then used to form the name",
    "start": "1827700",
    "end": "1835470"
  },
  {
    "text": "of your function when is it deployed because the service framework enforces the naming convention so making sure",
    "start": "1835470",
    "end": "1841380"
  },
  {
    "text": "that the API itself has got the same name as a service name just makes it life a bit easier when I'm trying to figure out what functions are used as",
    "start": "1841380",
    "end": "1847980"
  },
  {
    "text": "part of that micro service and pretty much like every other social network you",
    "start": "1847980",
    "end": "1854190"
  },
  {
    "text": "find on a planet we also have a recommendation feature which unfortunately also didn't work the way",
    "start": "1854190",
    "end": "1860460"
  },
  {
    "text": "that you expect them to and when I take down to figure out what is actually doing it turns out it was just returning",
    "start": "1860460",
    "end": "1866220"
  },
  {
    "text": "the first 30 user from a database by account creation time which when I figured that I were just a case of what",
    "start": "1866220",
    "end": "1872580"
  },
  {
    "text": "why how is this ever why okay so understandably we decided to",
    "start": "1872580",
    "end": "1880440"
  },
  {
    "text": "rebuild a certain recommendation feature again using lambda and built on top of events and since we have everything",
    "start": "1880440",
    "end": "1888090"
  },
  {
    "text": "that's happening a season or stream to pick up a query and that I can run complicated queries against Google",
    "start": "1888090",
    "end": "1893970"
  },
  {
    "text": "bigquery and still get answers back within a few seconds so I can have a conjure up that once a once every hour",
    "start": "1893970",
    "end": "1900600"
  },
  {
    "text": "that make a query against Google pay query where we apply some time decay",
    "start": "1900600",
    "end": "1905670"
  },
  {
    "text": "formula so that when we're trying to figure out who's currently trending on a platform if someone who's got mass of",
    "start": "1905670",
    "end": "1913080"
  },
  {
    "text": "money follower recently that counts hi towards their trendiness and then once I run this query I can",
    "start": "1913080",
    "end": "1919320"
  },
  {
    "text": "freaking out the trending users put them in the DynamoDB table and then put an API in front of that at the same time",
    "start": "1919320",
    "end": "1926340"
  },
  {
    "text": "whenever you follow or unfollow anyone those events are then subscribed by and lambda function and used to update a",
    "start": "1926340",
    "end": "1933210"
  },
  {
    "text": "social graph that we store as a graph database in neo4j in this case we using",
    "start": "1933210",
    "end": "1938400"
  },
  {
    "text": "graph in DB which just offers new for J as a hosted service and then we're able to create a new suggestion API that can",
    "start": "1938400",
    "end": "1946290"
  },
  {
    "text": "return you people that you might be interested in following based on your social graph so this often includes your",
    "start": "1946290",
    "end": "1953400"
  },
  {
    "text": "second or third degree connected connections so people that follow the people that follows you or the people",
    "start": "1953400",
    "end": "1959250"
  },
  {
    "text": "that are followed by the people that you follow and so on and that's again as",
    "start": "1959250",
    "end": "1965070"
  },
  {
    "text": "part of a migration strategy we will update the legacy endpoints she then whenever someone asks for give me",
    "start": "1965070",
    "end": "1971130"
  },
  {
    "text": "suggestions for my people as you follow instead of returning the first 30 people in the database in MongoDB we will make",
    "start": "1971130",
    "end": "1977730"
  },
  {
    "text": "a call to these two new NPAPI ice malcolm a the results together do some randomization and then return you people",
    "start": "1977730",
    "end": "1984090"
  },
  {
    "text": "that you may actually be interested in following a nice list of caveats to this",
    "start": "1984090",
    "end": "1989130"
  },
  {
    "text": "whole thing was that it was mostly done in one night cuz I had trouble sleeping and I thought this feature doesn't work",
    "start": "1989130",
    "end": "1994890"
  },
  {
    "text": "we wanted to fix it for a long time so let's get cracking so with all the events that's already in place I was",
    "start": "1994890",
    "end": "2000830"
  },
  {
    "text": "able to get this thing rolling very very quickly and the last feature I want to",
    "start": "2000830",
    "end": "2006260"
  },
  {
    "text": "talk about in terms of how do we do it was we also wanted to build a system for sending our personal vacation to",
    "start": "2006260",
    "end": "2012779"
  },
  {
    "text": "reengage uses that potential the potential lapse from the system and that's actually one of the things that",
    "start": "2012779",
    "end": "2018090"
  },
  {
    "text": "makes panel also gives you as well four thousand three thousand dollars a month we were paying the downtown is as I",
    "start": "2018090",
    "end": "2024000"
  },
  {
    "text": "mentioned before it didn't understand the fact that we are such a network we have a social graph so that was easy for",
    "start": "2024000",
    "end": "2031350"
  },
  {
    "text": "them for you to target anyone who signed in the last day or the last a scheme",
    "start": "2031350",
    "end": "2037740"
  },
  {
    "text": "some time period you you can't say I want to send a push the vacation to anyone that follows the Tinie Tempah",
    "start": "2037740",
    "end": "2044220"
  },
  {
    "text": "whenever he published a new post so since we have everything that's",
    "start": "2044220",
    "end": "2050040"
  },
  {
    "text": "happening the system already recorded in to go back query and is a very very powerful query engine that allows us to",
    "start": "2050040",
    "end": "2056730"
  },
  {
    "text": "run very complicated create complicated queries so it just makes sense for us to then build a system on top of that data",
    "start": "2056730",
    "end": "2063960"
  },
  {
    "text": "we already have in terms of the code that we have for this new system we're building it was the case of we wanted to",
    "start": "2063960",
    "end": "2071310"
  },
  {
    "text": "build to you at how queries which are often driven by the marketing team who will say okay we're working with some",
    "start": "2071310",
    "end": "2078358"
  },
  {
    "text": "influencer they are doing a campaign so whenever they publish a new post we want to tell all their followers or people",
    "start": "2078359",
    "end": "2084210"
  },
  {
    "text": "that follow the music for example that hey honey temple just join a platform",
    "start": "2084210",
    "end": "2089520"
  },
  {
    "text": "maybe you want to come and follow them at the same time we also want to build",
    "start": "2089520",
    "end": "2094679"
  },
  {
    "text": "to schedule notifications this is often driven by the product team that want to say when someone started the signup",
    "start": "2094679",
    "end": "2101280"
  },
  {
    "text": "process but in a finish so we start to keep them nod to say hey please come back and finish signing up or once they",
    "start": "2101280",
    "end": "2108420"
  },
  {
    "text": "have say haven't logged in for 21 days give them a little push to vacation to say please come back here some",
    "start": "2108420",
    "end": "2114089"
  },
  {
    "text": "interesting things has happened that you may have missed for this system we also",
    "start": "2114089",
    "end": "2119700"
  },
  {
    "text": "want to be able to do AP testing to test the different messaging or different layout for the messages as well so we",
    "start": "2119700",
    "end": "2125819"
  },
  {
    "text": "want to be able to say take take some message you want to send out have a control group where we don't send them",
    "start": "2125819",
    "end": "2132060"
  },
  {
    "text": "anything and then different variants that were going to test different messages that goes out to our users and",
    "start": "2132060",
    "end": "2139430"
  },
  {
    "text": "we also wanted system to be scalable to be capable of sending our millions of notifications",
    "start": "2139430",
    "end": "2145650"
  },
  {
    "text": "as a system as our network a social network grows and we of course we also",
    "start": "2145650",
    "end": "2151050"
  },
  {
    "text": "wanted to be cost effective again it's not about now spending less it's about spending better so for the scheduler",
    "start": "2151050",
    "end": "2159480"
  },
  {
    "text": "vacations like we did before we have a cron job which is cloud watch event that runs regularly based on the",
    "start": "2159480",
    "end": "2166470"
  },
  {
    "text": "schedule cost a lambda function which then runs a query against Google bigquery to find anyone who started the",
    "start": "2166470",
    "end": "2172860"
  },
  {
    "text": "signup process but didn't finish and then construct the JSON payload that were multiple traits and payloads that",
    "start": "2172860",
    "end": "2179130"
  },
  {
    "text": "put them into s3 which can then trigger an in the lambda function to then actually send our provocations by",
    "start": "2179130",
    "end": "2185250"
  },
  {
    "text": "talking to Google Cloud messaging and apples the messaging system of course",
    "start": "2185250",
    "end": "2190500"
  },
  {
    "text": "Cornell and since is ultimately two separate sub systems I want to decide",
    "start": "2190500",
    "end": "2196680"
  },
  {
    "text": "what to send the other one to actually send out the protein vacation means that it was easy forward to extend this",
    "start": "2196680",
    "end": "2202050"
  },
  {
    "text": "system to allow other subsystems to then be able to also send out push new vacations as well at this point you may",
    "start": "2202050",
    "end": "2208710"
  },
  {
    "text": "have a good question that you know why do you talk to the platform's the native messaging systems and why not just use",
    "start": "2208710",
    "end": "2215100"
  },
  {
    "text": "something like SNS and the reason for that was when the ad was first launched we didn't have integration with SNS so",
    "start": "2215100",
    "end": "2222450"
  },
  {
    "text": "to use SNS we had to do quite a bit of work on the client but also there's additional charges in what we're sending",
    "start": "2222450",
    "end": "2228630"
  },
  {
    "text": "our push notifications through as an S as well so given the things that we have we decided that was easy and cheaper to",
    "start": "2228630",
    "end": "2235800"
  },
  {
    "text": "just use GCM s & apos navigation system directly and for the ad hoc notification",
    "start": "2235800",
    "end": "2243510"
  },
  {
    "text": "because that driven by the marketing team which have got their own metrics for success to drive engagement so we",
    "start": "2243510",
    "end": "2251160"
  },
  {
    "text": "had this dynamic a how much oversight we put in place versus just letting them do",
    "start": "2251160",
    "end": "2257190"
  },
  {
    "text": "what they wanted to do the problem here is that the market the product team is very concerned about marketing team just",
    "start": "2257190",
    "end": "2264000"
  },
  {
    "text": "spending the user because they want to drive retention they want to drive engagement and usage by the same time we",
    "start": "2264000",
    "end": "2270360"
  },
  {
    "text": "want to maintain their overall user experience so the header product is very concern about just know",
    "start": "2270360",
    "end": "2276150"
  },
  {
    "text": "Marketing themes famine and user it's difficult I guess it's difficult balance to see to me to maintain and the",
    "start": "2276150",
    "end": "2282559"
  },
  {
    "text": "eventually we decided on a workflow whereby the marketing team will work with analysts on what query they can use",
    "start": "2282559",
    "end": "2289260"
  },
  {
    "text": "to target the right users and that's just a simple approval process that goes through the chief product officer as a",
    "start": "2289260",
    "end": "2295980"
  },
  {
    "text": "city or CTO and in that as part of process the the approver can see how",
    "start": "2295980",
    "end": "2302069"
  },
  {
    "text": "many people is going to be targeted and also sent out test vacation to the on mobile so that they can see what it",
    "start": "2302069",
    "end": "2307829"
  },
  {
    "text": "looks like before we actually decided to go ahead and send that push notification in this case I have created very simple",
    "start": "2307829",
    "end": "2314910"
  },
  {
    "text": "I'm into a simple UI as a single page application for a marketing team to use",
    "start": "2314910",
    "end": "2320130"
  },
  {
    "text": "which you serve out of three as a single page application that integrates with of",
    "start": "2320130",
    "end": "2325799"
  },
  {
    "text": "zero so that you go in there you put in your to put on your you pick query query",
    "start": "2325799",
    "end": "2331020"
  },
  {
    "text": "and a few messages and notes for the approver click a button and then when",
    "start": "2331020",
    "end": "2336150"
  },
  {
    "text": "you do that it's going to hit API which then stores your request in the",
    "start": "2336150",
    "end": "2341160"
  },
  {
    "text": "tournament DB by the same time also send an email by Amazon's a simple email service or SES to the approvers which",
    "start": "2341160",
    "end": "2350099"
  },
  {
    "text": "looks something like this where you can see who requested it and how many people",
    "start": "2350099",
    "end": "2355289"
  },
  {
    "text": "is going to be targeted in this case 45,000 people would be receive this notification and you have some know some",
    "start": "2355289",
    "end": "2362069"
  },
  {
    "text": "messages with the messaging don't have it here but there's button to approve or reject the request for so to say please",
    "start": "2362069",
    "end": "2369270"
  },
  {
    "text": "send me a test notification to see how this message actually renders on my phone and once the approval decides to",
    "start": "2369270",
    "end": "2377940"
  },
  {
    "text": "approve or reject the request then again his API Gateway lambda then updates the",
    "start": "2377940",
    "end": "2383609"
  },
  {
    "text": "data and for the request in tournament EP and then send out an email to confirm",
    "start": "2383609",
    "end": "2389299"
  },
  {
    "text": "what's happened and in the case of a request being approved it then runs the",
    "start": "2389299",
    "end": "2395160"
  },
  {
    "text": "queries against Google bigquery again puts out this output the same JSON payload which we can use the thing we",
    "start": "2395160",
    "end": "2401849"
  },
  {
    "text": "saw earlier to them to actually send out those push vacations to our users so",
    "start": "2401849",
    "end": "2407460"
  },
  {
    "text": "this case is not once Micra surveys as you three separate micro-services or working together so that's just a summary",
    "start": "2407460",
    "end": "2417240"
  },
  {
    "text": "examples that four things that we able to do very very quickly as we rebuild",
    "start": "2417240",
    "end": "2422370"
  },
  {
    "text": "our system but also building building new features well on top of events and also using servlets there's also other",
    "start": "2422370",
    "end": "2429030"
  },
  {
    "text": "things that we've done we shot lists in this talk I am NOT going to include it",
    "start": "2429030",
    "end": "2434640"
  },
  {
    "text": "in terms of how do you do monitoring alerting all of that there's a talk at it for and it's in London last year we",
    "start": "2434640",
    "end": "2441360"
  },
  {
    "text": "are going to those things in more detail so with that as you finished bit earlier than I expected",
    "start": "2441360",
    "end": "2446910"
  },
  {
    "text": "so fingers very much for your time if you got any questions I'm happy to take them now as well okay yes George so the",
    "start": "2446910",
    "end": "2467070"
  },
  {
    "text": "question is how to handle latency well with Co starts so with co-stars I find that depending it is how long a co-star",
    "start": "2467070",
    "end": "2474000"
  },
  {
    "text": "is depends a lot on the number of factors around memory size and you're using for your function because that",
    "start": "2474000",
    "end": "2479820"
  },
  {
    "text": "determines how much CPU and bandwidth you never family if your function gets and also depends on awful lot on what",
    "start": "2479820",
    "end": "2485430"
  },
  {
    "text": "language you use so I find that we've no G is in production I see anything between 300 to 500 milliseconds of",
    "start": "2485430",
    "end": "2492270"
  },
  {
    "text": "co-star time so that is well within what is acceptable for most of all for all of our api's so we've co-star you have to",
    "start": "2492270",
    "end": "2499920"
  },
  {
    "text": "think about the frequency how often you see it which is not something that you can really control because it's all children by traffic coming into your",
    "start": "2499920",
    "end": "2506400"
  },
  {
    "text": "system I can't tell a user when to use the API so that when there's a spike there's gonna be a spike in terms of the",
    "start": "2506400",
    "end": "2512850"
  },
  {
    "text": "number of co-stars I'm gonna see but what I can do is make sure that when those posters happen the host activation",
    "start": "2512850",
    "end": "2519930"
  },
  {
    "text": "is still within my acceptable response time so that's what it does what we do",
    "start": "2519930",
    "end": "2525320"
  },
  {
    "text": "we basically to make sure that for functions that are sitting on a pop API use the facing API is that they are fast",
    "start": "2525320",
    "end": "2532650"
  },
  {
    "text": "enough where it does not we can't do that for various different reasons then we just don't use service and that's",
    "start": "2532650",
    "end": "2538710"
  },
  {
    "text": "correct you currently what we do for for the zone as well where we see much bigger spike",
    "start": "2538710",
    "end": "2543810"
  },
  {
    "text": "we talked about I talked about how we have up to a million different people or concurrent viewers on an event and the",
    "start": "2543810",
    "end": "2549390"
  },
  {
    "text": "thing the funny thing about live events is that everybody locks in like five seconds before the match starts so",
    "start": "2549390",
    "end": "2555210"
  },
  {
    "text": "that's why it is too steep actually for land at the handle that's another thing to keep in mind intentional concurrency is that even",
    "start": "2555210",
    "end": "2562020"
  },
  {
    "text": "though we've landed you can say what no I want a maximum concurrency to be say fifty thousand so I can run fifty",
    "start": "2562020",
    "end": "2568560"
  },
  {
    "text": "thousand requests concurrently what you can't change and this is the HAR limit is how fast you can go up to that from",
    "start": "2568560",
    "end": "2574980"
  },
  {
    "text": "zero to know five thousand five thousand concurrent executions the limit is five hundred so because the spike is too",
    "start": "2574980",
    "end": "2581730"
  },
  {
    "text": "steep so we actually can't use lambda for the zone as part of our critical",
    "start": "2581730",
    "end": "2587280"
  },
  {
    "text": "path and we have to use containers where we can pre scale the number of times we're running our ACS tasks for",
    "start": "2587280",
    "end": "2593550"
  },
  {
    "text": "everything else lambda now we're using no chair so the cosine such is not that bad cool",
    "start": "2593550",
    "end": "2601080"
  },
  {
    "text": "any other questions if no I'm gonna hang around here for a bit so feel free to",
    "start": "2601080",
    "end": "2607680"
  },
  {
    "text": "just come and grab me if you're any have any questions you have as well again thank you guys very much of being here for for listening",
    "start": "2607680",
    "end": "2614620"
  },
  {
    "text": "[Applause]",
    "start": "2614620",
    "end": "2620989"
  }
]