[
  {
    "text": "let's get started yes morning everyone",
    "start": "6980",
    "end": "12599"
  },
  {
    "text": "day three of the conference last day how's everyone feeling yeah yeah I know that feeling",
    "start": "12599",
    "end": "20580"
  },
  {
    "text": "um they're gonna close the door this is the first conference I've been at I think where they closed the doors on you",
    "start": "20580",
    "end": "27480"
  },
  {
    "text": "during the talk it's like we're doing this in person and there's no way back out",
    "start": "27480",
    "end": "34820"
  },
  {
    "text": "um hello everyone my name is Chris Jenkins I work for a company called confluent",
    "start": "35460",
    "end": "40500"
  },
  {
    "text": "um who are not the wiki people we are the other one we end in A T it's a",
    "start": "40500",
    "end": "46140"
  },
  {
    "text": "really really awkward distinction but we mostly concern ourselves with Kafka and",
    "start": "46140",
    "end": "51719"
  },
  {
    "text": "running Kafka in the cloud and so this raises the obvious question which I hope you're here to get an",
    "start": "51719",
    "end": "57180"
  },
  {
    "text": "answer to what is Kafka um it's an interesting Beast it's",
    "start": "57180",
    "end": "63180"
  },
  {
    "text": "interesting enough that it lured me in and I ended up working for confluent",
    "start": "63180",
    "end": "68280"
  },
  {
    "text": "um but at the heart it's really really simple it's a really simple idea",
    "start": "68280",
    "end": "73799"
  },
  {
    "text": "you take events you take things that have happened in the real world and you just write them down in a log right uh",
    "start": "73799",
    "end": "80520"
  },
  {
    "text": "someone does something on your website uh GPS thing sends you a location piece",
    "start": "80520",
    "end": "85979"
  },
  {
    "text": "of data um something comes from a process and you",
    "start": "85979",
    "end": "91259"
  },
  {
    "text": "just write it down the log right thing happen thing happen thing happened and you keep adding on to the end and you",
    "start": "91259",
    "end": "96960"
  },
  {
    "text": "never go back and changed what happened in the past you just keep adding and adding and adding to the log",
    "start": "96960",
    "end": "102060"
  },
  {
    "text": "as we go very simple idea but I don't know if you've ever considered this but logs are",
    "start": "102060",
    "end": "108960"
  },
  {
    "text": "great they have some really really interesting properties as a data structure first thing is they're really",
    "start": "108960",
    "end": "114899"
  },
  {
    "text": "cheap and fast to write to because you only ever add to the end of a file that's one of the cheapest file",
    "start": "114899",
    "end": "120780"
  },
  {
    "text": "operations you can do is just add to the end and just keep adding you never go back and rewrite",
    "start": "120780",
    "end": "126960"
  },
  {
    "text": "they're also really easy to read they're just a long file you just go through start to end and you get all the data",
    "start": "126960",
    "end": "133680"
  },
  {
    "text": "that happened right because because they you just read them you",
    "start": "133680",
    "end": "139739"
  },
  {
    "text": "never need to get because they're just written as a long log and you never need to go back and write them and you never need to go back and read what you've",
    "start": "139739",
    "end": "145140"
  },
  {
    "text": "already read they become really easy to replicate you just copy what's happened so far if",
    "start": "145140",
    "end": "151500"
  },
  {
    "text": "you were to take a photo of this log this list of three things more people coming in",
    "start": "151500",
    "end": "158280"
  },
  {
    "text": "pretend you've heard the bit I've already said just come on in and pretend I've already said it logs are great",
    "start": "158280",
    "end": "163680"
  },
  {
    "text": "people at the back did you know log is great right you take a photo of this list of",
    "start": "163680",
    "end": "169680"
  },
  {
    "text": "three things it's a log if I promise I'm never going to change that list then your copy your photograph will never be",
    "start": "169680",
    "end": "176220"
  },
  {
    "text": "wrong it will always be right the only thing it can be is slightly out of date as I add a new thing to the end",
    "start": "176220",
    "end": "182220"
  },
  {
    "text": "log files are really cheap to replicate and they are great at showing you what's new",
    "start": "182220",
    "end": "188340"
  },
  {
    "text": "if you've ever gone to command line and typed tail minus F to follow a file you",
    "start": "188340",
    "end": "193739"
  },
  {
    "text": "know that log files are really easy to watch for the new events the new things have just happened",
    "start": "193739",
    "end": "200040"
  },
  {
    "text": "so they make for a really interesting data structures um and you'll find that actually if you",
    "start": "200040",
    "end": "207420"
  },
  {
    "text": "look inside pretty much any modern database at the heart of it there's a log because of these interesting",
    "start": "207420",
    "end": "212879"
  },
  {
    "text": "properties of log files if you look at the way most modern databases do replication",
    "start": "212879",
    "end": "220580"
  },
  {
    "text": "they used to do it really badly they used to try and either sync individual blocks on disk copy a block on disk to",
    "start": "220580",
    "end": "227280"
  },
  {
    "text": "the other machine and then it's already changed you need to go back and copy it again and it really didn't work very well or they did the same thing at the",
    "start": "227280",
    "end": "233640"
  },
  {
    "text": "table level and tried to copy rows but then the row had changed by the time you copy it it was a mess",
    "start": "233640",
    "end": "238860"
  },
  {
    "text": "I lived through that mess we had a lot of downtime the way most databases do replication these days is with a log",
    "start": "238860",
    "end": "245340"
  },
  {
    "text": "what they do is before they do any operation they write down what they were going to do to a log file just an append",
    "start": "245340",
    "end": "252239"
  },
  {
    "text": "Only log file that keeps growing and then they do the operation and then the replicas are free to just",
    "start": "252239",
    "end": "259620"
  },
  {
    "text": "copy that file it never it never changes it just grows so it's a cheap easy copy",
    "start": "259620",
    "end": "265440"
  },
  {
    "text": "that can fail and resume where it left off and you end up with this sort of thing right all the replicas are just",
    "start": "265440",
    "end": "271740"
  },
  {
    "text": "reading from a log file which they keep watching for new things and copying those and then they build up",
    "start": "271740",
    "end": "277979"
  },
  {
    "text": "um they build up the Old State using their state machine if the primary has the same list of events and is running",
    "start": "277979",
    "end": "284280"
  },
  {
    "text": "the same state machine as the replica which has the same list of events and the same state machine they end up",
    "start": "284280",
    "end": "289919"
  },
  {
    "text": "perfectly in sync that's how database replication tends to work these days and it's straightforward and it works",
    "start": "289919",
    "end": "296759"
  },
  {
    "text": "and it survives the replication process crashing and coming back up really easily so what is Kafka I think Kafka is the",
    "start": "296759",
    "end": "306419"
  },
  {
    "text": "answer to an interesting question if all databases start with a log if all",
    "start": "306419",
    "end": "311820"
  },
  {
    "text": "databases start with a state machine and end up building a log for application what if we started with a log file and",
    "start": "311820",
    "end": "318660"
  },
  {
    "text": "then started building up our state machines on top of that what would that look like would it look more like a database or",
    "start": "318660",
    "end": "325680"
  },
  {
    "text": "would it more look more like a log file we know it would probably be really cheap to write things to disk we could",
    "start": "325680",
    "end": "332220"
  },
  {
    "text": "expect writing to desk to be fast we know it would be really easy to replicate if we started from that",
    "start": "332220",
    "end": "338759"
  },
  {
    "text": "fundamental point we know it would probably be really good at dealing with the new data for watching for new things",
    "start": "338759",
    "end": "344340"
  },
  {
    "text": "that have happened but would it be a database or if not what kind of Beast would it be",
    "start": "344340",
    "end": "351139"
  },
  {
    "text": "this is one of my favorite questions to ask in the Kafka Community because it's always really polarizing and I'm a",
    "start": "351139",
    "end": "357120"
  },
  {
    "text": "little bit combustive at times the theoretical questions so I say to Kafka people Kafka is a",
    "start": "357120",
    "end": "362940"
  },
  {
    "text": "database and they say no it's not it's absolutely not a database a database is",
    "start": "362940",
    "end": "367979"
  },
  {
    "text": "tables and indexes views into update delete",
    "start": "367979",
    "end": "373979"
  },
  {
    "text": "Cod anyone old enough to remember Cod relational database Theory just me",
    "start": "373979",
    "end": "380160"
  },
  {
    "text": "uh Amy at the back you're doing computer science degree I expect you to learn about Cod before the end of it right",
    "start": "380160",
    "end": "386039"
  },
  {
    "text": "that's what a database is it's my sequel postgres Oracle SQL Server that's what databases are right",
    "start": "386039",
    "end": "392699"
  },
  {
    "text": "yes but also no I think our definition of databases it's got a lot wider in the",
    "start": "392699",
    "end": "397979"
  },
  {
    "text": "past 15 years I'm going to say we now accept that a document database isn't a",
    "start": "397979",
    "end": "405120"
  },
  {
    "text": "relational database but it is a database um we accept the key value stores are a",
    "start": "405120",
    "end": "412440"
  },
  {
    "text": "kind of database and I would say that Kafka is a database from a certain point",
    "start": "412440",
    "end": "418080"
  },
  {
    "text": "of view it just depends on your definition of database if you date and so I'm going to give you a definition of",
    "start": "418080",
    "end": "423840"
  },
  {
    "text": "database which I think Kafka fits in I think a database is anything that can",
    "start": "423840",
    "end": "429479"
  },
  {
    "text": "reliably let you store structured data and query it out in multiple ways",
    "start": "429479",
    "end": "436638"
  },
  {
    "text": "that's my definition of a database I think that includes document databases and relational databases and key value",
    "start": "436860",
    "end": "441900"
  },
  {
    "text": "databases and search based databases I think it includes get",
    "start": "441900",
    "end": "448319"
  },
  {
    "text": "I think git is a database I think blockchain is a database it may be a questionable business proposition but I",
    "start": "448319",
    "end": "453960"
  },
  {
    "text": "think it's a database so this is the point I want to get to",
    "start": "453960",
    "end": "461220"
  },
  {
    "text": "what kind of database is Kafka what is Kafka nature",
    "start": "461220",
    "end": "467340"
  },
  {
    "text": "um which is a really abstract question and if you're anything like me",
    "start": "467340",
    "end": "472580"
  },
  {
    "text": "I find the way I learn the answer to abstract questions and the way I grapple",
    "start": "472580",
    "end": "477960"
  },
  {
    "text": "with abstract Concepts is to build things um to actually get my hands dirty and",
    "start": "477960",
    "end": "484080"
  },
  {
    "text": "write some code so let's build some answers to this question and then look back and see what",
    "start": "484080",
    "end": "489120"
  },
  {
    "text": "kind of thing we've got at the end when I decided to do this I asked myself",
    "start": "489120",
    "end": "495020"
  },
  {
    "text": "what kind of thing should I build I could build another Java pet store the",
    "start": "495020",
    "end": "500039"
  },
  {
    "text": "world needs one of those I could put another to-do list manager the world needs one of those um one thing often gets done in the",
    "start": "500039",
    "end": "507300"
  },
  {
    "text": "Kafka world is order processing because it's important and interesting in real time",
    "start": "507300",
    "end": "513419"
  },
  {
    "text": "but I was a bit tired of that so I thought I could it's a bit cliche it's almost a cliche in the way the Java pet",
    "start": "513419",
    "end": "518760"
  },
  {
    "text": "store is a cliche so I thought I'd try and build something more fun and I built a text adventure",
    "start": "518760",
    "end": "524099"
  },
  {
    "text": "game a couple of people smile I know you played text Adventure Games in your childhood",
    "start": "524099",
    "end": "530040"
  },
  {
    "text": "I gave this talk once before and I realized there are some people in the audience who won't know what a text Adventure game is",
    "start": "530040",
    "end": "535800"
  },
  {
    "text": "which allow me to introduce you to another great Concept in the history of computing text Adventure Games so they",
    "start": "535800",
    "end": "542940"
  },
  {
    "text": "cut they kind of survived today they've gone out of fashion but they kind of still survived today if you look on the",
    "start": "542940",
    "end": "548640"
  },
  {
    "text": "steam store or wherever sells you your computer games um they kind of survive like this in",
    "start": "548640",
    "end": "554040"
  },
  {
    "text": "narrative adventure games right you wander around the world you talk to characters you make decisions and and",
    "start": "554040",
    "end": "560220"
  },
  {
    "text": "the story unfolds before the age of narrative adventure games we had my own personal",
    "start": "560220",
    "end": "567959"
  },
  {
    "text": "golden age of computer gaming which is the secret of Monkey Island which it was a high point in human",
    "start": "567959",
    "end": "575100"
  },
  {
    "text": "civilization um and and this was the same idea right you would go around the world you would find",
    "start": "575100",
    "end": "582000"
  },
  {
    "text": "objects pick them up wander around the world talk to people eventually find the right place to use this object with that",
    "start": "582000",
    "end": "587880"
  },
  {
    "text": "thing to progressed the story it's one of the few computer games of that era that was both massive and I",
    "start": "587880",
    "end": "594480"
  },
  {
    "text": "actually completed so before that things were even less sophisticated we had this",
    "start": "594480",
    "end": "601560"
  },
  {
    "text": "it was mostly text few high resolution images to illustrate what's going on",
    "start": "601560",
    "end": "607980"
  },
  {
    "text": "but mostly you just type in things and get responses back it turns out this is a really this is a",
    "start": "607980",
    "end": "615240"
  },
  {
    "text": "really nice project to build if you're learning a new piece of technology or a new programming",
    "start": "615240",
    "end": "621120"
  },
  {
    "text": "language because it's it's just text there's not much display work but it does as you'll see",
    "start": "621120",
    "end": "628440"
  },
  {
    "text": "exercise quite a lot of the system and force you to make some interesting design choices",
    "start": "628440",
    "end": "634380"
  },
  {
    "text": "so let's have a demo time for a demo if I can find out which window my keyboard is reacting to there",
    "start": "634380",
    "end": "641399"
  },
  {
    "text": "we go okay I'm gonna make that touch larger",
    "start": "641399",
    "end": "648079"
  },
  {
    "text": "show you how this works and then we'll break down how it's built so I have a prompt I'm connected",
    "start": "648600",
    "end": "655800"
  },
  {
    "text": "um I don't know what to type so let me just type that unknown command as I'm not going to try",
    "start": "655800",
    "end": "663000"
  },
  {
    "text": "and pronounce that try asking for help okay I'll ask for help available commands are look go north go",
    "start": "663000",
    "end": "670860"
  },
  {
    "text": "south go east go west pick up an item use an item inventory and help command",
    "start": "670860",
    "end": "676380"
  },
  {
    "text": "we just typed okay let's look you are standing on stage NDC Melbourne",
    "start": "676380",
    "end": "682860"
  },
  {
    "text": "it's not much of a stage but the audience bask in the soothing glow of a terminal window",
    "start": "682860",
    "end": "688920"
  },
  {
    "text": "Corner sits a computer noisily spitting out data it needs to be processed but you have no idea how to do it you can",
    "start": "688920",
    "end": "695820"
  },
  {
    "text": "see data and a lanyard okay",
    "start": "695820",
    "end": "700980"
  },
  {
    "text": "um why don't we try going west and see what's happening there you step into the",
    "start": "700980",
    "end": "706200"
  },
  {
    "text": "toilets there's nothing to do here at least nothing I want to describe okay yuck uh let's go east again uh",
    "start": "706200",
    "end": "714660"
  },
  {
    "text": "should we go east one more time see what's happening you're backstage an old rock band is hiding here refusing to go",
    "start": "714660",
    "end": "721019"
  },
  {
    "text": "on you look at their equipment with Envy you can see a microphone and a guitar I don't think I need that I'm going to go",
    "start": "721019",
    "end": "726540"
  },
  {
    "text": "back West again okay um this is where the the talk gets its title I'm going to pick up the data",
    "start": "726540",
    "end": "734399"
  },
  {
    "text": "you pick up data let me check that in the entry",
    "start": "734399",
    "end": "741000"
  },
  {
    "text": "your knapsack contains some data all right okay let me pick up the lanyard",
    "start": "741000",
    "end": "747839"
  },
  {
    "text": "yeah let's just double check that yeah now I've got data in the lanyard okay",
    "start": "747839",
    "end": "754260"
  },
  {
    "text": "let's carry on let's go north you enter the main hallway",
    "start": "754260",
    "end": "759480"
  },
  {
    "text": "it is bustling with life and coffee true okay uh let me just track it using a couple",
    "start": "759480",
    "end": "765360"
  },
  {
    "text": "of those objects let me use my cat you do not have that item to use true I",
    "start": "765360",
    "end": "772920"
  },
  {
    "text": "cheated use the data can I use the data you cannot use that item here okay how",
    "start": "772920",
    "end": "779579"
  },
  {
    "text": "about I use the lanyard you wave your lanyard in the air like a fool someone's in the distance shouts",
    "start": "779579",
    "end": "786660"
  },
  {
    "text": "hey that looks like fun and pretty soon you've started a flash mob of lanyard waivers you dance for hours and then the",
    "start": "786660",
    "end": "792420"
  },
  {
    "text": "party subsides and as the mob leaves the dancer drops his conference t-shirt you pick it up",
    "start": "792420",
    "end": "798420"
  },
  {
    "text": "and if I just check the inventory you're an app set contains data and a t-shirt",
    "start": "798420",
    "end": "804240"
  },
  {
    "text": "and so the game continues right that's how these games progress you",
    "start": "804240",
    "end": "809579"
  },
  {
    "text": "wander around you grab items you use them somewhere and eventually you find",
    "start": "809579",
    "end": "814740"
  },
  {
    "text": "your path through to the last golden item that lets you into the last golden location that completes the game",
    "start": "814740",
    "end": "821519"
  },
  {
    "text": "so that's enough of a demo let's see how it's put together um quick warning",
    "start": "821519",
    "end": "828540"
  },
  {
    "text": "there is a lot of code we're about to fall into um and I do that for a couple of reasons",
    "start": "828540",
    "end": "834480"
  },
  {
    "text": "I think firstly if anyone wants to pause the video later and get look through the",
    "start": "834480",
    "end": "839880"
  },
  {
    "text": "code you can uh we'll take screen photos now that can be useful secondly I think it's the way",
    "start": "839880",
    "end": "846000"
  },
  {
    "text": "we communicate right it is our second languages program as code so I actually like to see some code on a",
    "start": "846000",
    "end": "852600"
  },
  {
    "text": "screen to like show me what's really going on and what this will actually look like to build I will say the third",
    "start": "852600",
    "end": "858180"
  },
  {
    "text": "day of the conference don't get too bogged down in the code it's the shape of the code that I'm really trying to",
    "start": "858180",
    "end": "863880"
  },
  {
    "text": "show you so just get the feel for how this is put together that's what I want to communicate",
    "start": "863880",
    "end": "870839"
  },
  {
    "text": "so how did I build this I started off with two very simple logs",
    "start": "870839",
    "end": "877200"
  },
  {
    "text": "in Kafka and a web server that would just write to them and read from them so",
    "start": "877200",
    "end": "883199"
  },
  {
    "text": "I've got a command log every time I type something it goes to Kafka and it just gets appended to a log called commands",
    "start": "883199",
    "end": "891420"
  },
  {
    "text": "something happens on the right and then the web server is also watching a log called responses which that's",
    "start": "891420",
    "end": "898620"
  },
  {
    "text": "something we'll write to it watches that and sends it back out to the user so if I did that uh if I show you that",
    "start": "898620",
    "end": "905639"
  },
  {
    "text": "as SQL I Define these two streams of data the log streams are slightly",
    "start": "905639",
    "end": "912480"
  },
  {
    "text": "interchangeable um a stream is the higher level thing that the log is using right it's a tight",
    "start": "912480",
    "end": "917639"
  },
  {
    "text": "log so I've got a stream of commands that's keyed by user ID which is just ueuid",
    "start": "917639",
    "end": "924060"
  },
  {
    "text": "and then I've got almost exactly the same stream of string responses I just added a source on because that's",
    "start": "924060",
    "end": "929760"
  },
  {
    "text": "slightly easier for debugging but it's basically a log of things coming in and a lot of things going out keyed by the",
    "start": "929760",
    "end": "936300"
  },
  {
    "text": "user that should hear them and um funnily enough once I wrote this I",
    "start": "936300",
    "end": "942180"
  },
  {
    "text": "pretty much left the front end and the web server just running because all the intelligent processing is happening on",
    "start": "942180",
    "end": "948660"
  },
  {
    "text": "the back end of the Kafka side and this is just a very dumb web server",
    "start": "948660",
    "end": "954480"
  },
  {
    "text": "so the interesting thing becomes what do we do at do stuff so let's start going with the simplest",
    "start": "954480",
    "end": "961380"
  },
  {
    "text": "possible way of processing One log of incoming stuff into a log of outgoing stuff uh we'll just do an echo server",
    "start": "961380",
    "end": "969240"
  },
  {
    "text": "right if you've ever written any kind of back-end server to check the networking",
    "start": "969240",
    "end": "974399"
  },
  {
    "text": "this is probably what you did to get to make sure it was actually working hello hello",
    "start": "974399",
    "end": "980279"
  },
  {
    "text": "in code now this is Java I know there are a lot of c-sharp people here there is a C sharp open source equivalent of",
    "start": "980279",
    "end": "986699"
  },
  {
    "text": "this Library I'm using um I've not used it so I can't vouch for it but I know it exists you might want to check it out if you're more a c-sharp",
    "start": "986699",
    "end": "993420"
  },
  {
    "text": "person so it looks like this you create a object for building and working with",
    "start": "993420",
    "end": "999420"
  },
  {
    "text": "streams of data and you say I would like to look at the stream of things called",
    "start": "999420",
    "end": "1004820"
  },
  {
    "text": "command I wonder if I can get my shadow up onto that no not quite not that top you just tell it which stream of stuff",
    "start": "1004820",
    "end": "1011839"
  },
  {
    "text": "you want and you give it some information about serialization which I'm going to gloss over it's just like",
    "start": "1011839",
    "end": "1018620"
  },
  {
    "text": "this is how you serialize your new ID to Binary and back so just read it like this we want to consume some commands",
    "start": "1018620",
    "end": "1025699"
  },
  {
    "text": "and do something with them and then once we've got that stream of commands as command stream",
    "start": "1025699",
    "end": "1031459"
  },
  {
    "text": "we can say Okay um every map a function over it you know",
    "start": "1031459",
    "end": "1036620"
  },
  {
    "text": "every time you get a new line do something with that line um you're probably familiar from this",
    "start": "1036620",
    "end": "1042620"
  },
  {
    "text": "with this from any kind of stream processing Library that's making its way into just about every programming",
    "start": "1042620",
    "end": "1048558"
  },
  {
    "text": "language these days has been in Python for ages but it basically says give me a function that can handle one element and",
    "start": "1048559",
    "end": "1055280"
  },
  {
    "text": "I'll turn it into a function that can handle the entire list that's what mapping is so what we do is just for every command",
    "start": "1055280",
    "end": "1062120"
  },
  {
    "text": "we get we build a string that says echo in that command we tag it with the source for my",
    "start": "1062120",
    "end": "1068539"
  },
  {
    "text": "debugging and we stream that out to the responses thing that's the simplest possible Echo processor using Kafka and",
    "start": "1068539",
    "end": "1076039"
  },
  {
    "text": "Kafka streams in Java so",
    "start": "1076039",
    "end": "1081140"
  },
  {
    "text": "with that infrastructure all in place we can build out a game we're going to need three things we need",
    "start": "1081140",
    "end": "1088460"
  },
  {
    "text": "to support General commands like the help and the I didn't I don't know what",
    "start": "1088460",
    "end": "1094760"
  },
  {
    "text": "you just said the ad stuff I typed in the start we need to be able to move around the map and keep track of where",
    "start": "1094760",
    "end": "1100640"
  },
  {
    "text": "we are and see the descriptions of the map and we need to deal with holding and using items",
    "start": "1100640",
    "end": "1107360"
  },
  {
    "text": "so for part one for different commands the first thing we need to do is split",
    "start": "1107360",
    "end": "1112460"
  },
  {
    "text": "that stream of commands up into different kinds of commands or interested in processing separately",
    "start": "1112460",
    "end": "1117799"
  },
  {
    "text": "so you do this you say uh you've got this thing that splits One log file into",
    "start": "1117799",
    "end": "1123500"
  },
  {
    "text": "many sub-log files splits one stream into many sub streams",
    "start": "1123500",
    "end": "1129080"
  },
  {
    "text": "but and the way it does it is by testing it and if you say I'm I'm looking for",
    "start": "1129080",
    "end": "1135140"
  },
  {
    "text": "these kinds of things if I return true I'll handle it otherwise let the next person in the chain handle it you could",
    "start": "1135140",
    "end": "1141140"
  },
  {
    "text": "call it an in an if lcflc if else if else or if you want to get points in a job",
    "start": "1141140",
    "end": "1147500"
  },
  {
    "text": "interview you call this the chain of responsibility pattern gang of four bless you from on high",
    "start": "1147500",
    "end": "1154640"
  },
  {
    "text": "so in code that looks like this um you just call split on the string",
    "start": "1154640",
    "end": "1159799"
  },
  {
    "text": "and then the game becomes you are going to define a branch you get a key and a",
    "start": "1159799",
    "end": "1165020"
  },
  {
    "text": "value for that row you return a Boolean and if your Boolean returns true you",
    "start": "1165020",
    "end": "1170120"
  },
  {
    "text": "tell it how to handle the ones you've selected and otherwise you let the chain worry about it",
    "start": "1170120",
    "end": "1176120"
  },
  {
    "text": "so our first real command will look like this have a look at the command and is it equal to the string help",
    "start": "1176120",
    "end": "1182720"
  },
  {
    "text": "and if it is then we do this we just build up a nice uh nice long response string we've already seen we type in",
    "start": "1182720",
    "end": "1189140"
  },
  {
    "text": "help it just spits out the help response and we tag it with the source and we string that out to responses and we're",
    "start": "1189140",
    "end": "1195559"
  },
  {
    "text": "done the next bit that's right at the top then I'm going to show you the bit right",
    "start": "1195559",
    "end": "1201679"
  },
  {
    "text": "at the bottom because it's the fallback if none of our other processing works then our full back position our",
    "start": "1201679",
    "end": "1208039"
  },
  {
    "text": "final else it's just going to say unknown command and then we build out the game in the",
    "start": "1208039",
    "end": "1213919"
  },
  {
    "text": "middle by selecting different types of commands and processing them so",
    "start": "1213919",
    "end": "1219620"
  },
  {
    "text": "let's do some parsing another computer science Classic this is really really basic parsing it doesn't need much",
    "start": "1219620",
    "end": "1227860"
  },
  {
    "text": "so let's have a look at the directions for moving around the map",
    "start": "1228200",
    "end": "1234559"
  },
  {
    "text": "start with a list of valid directions go north go south and I'll just do this if",
    "start": "1234559",
    "end": "1241460"
  },
  {
    "text": "if you give me a if I'm allowed to test the key in a value and the values command is in that list of things then",
    "start": "1241460",
    "end": "1248780"
  },
  {
    "text": "this is a movement command I'm interested in processing it here and I'm just gonna instead of actually",
    "start": "1248780",
    "end": "1254960"
  },
  {
    "text": "doing much work with it I'm just going to ship it off to a sub stream called movement streams a separate log file and",
    "start": "1254960",
    "end": "1261020"
  },
  {
    "text": "I'll let someone else worry about it Downstream and this cracks open the possibility of",
    "start": "1261020",
    "end": "1266720"
  },
  {
    "text": "doing processing all in one process or as microservices that just root and",
    "start": "1266720",
    "end": "1271940"
  },
  {
    "text": "shunt and transform later or I could do something a bit more fancy",
    "start": "1271940",
    "end": "1277640"
  },
  {
    "text": "I could actually start to properly parse the command and split them out so let me",
    "start": "1277640",
    "end": "1282679"
  },
  {
    "text": "show you that this is how we're handling the um the pickup and news commands I'm",
    "start": "1282679",
    "end": "1288679"
  },
  {
    "text": "just splitting the string into two parts into a verb and a noun",
    "start": "1288679",
    "end": "1293840"
  },
  {
    "text": "and if the first part is pick up then that's an inventory command or if the first part is used that's an inventory",
    "start": "1293840",
    "end": "1300260"
  },
  {
    "text": "command and I can just and I can just with that parsing object a very basic",
    "start": "1300260",
    "end": "1305840"
  },
  {
    "text": "parting object I can construct both my test does it pass and if it does parse I can",
    "start": "1305840",
    "end": "1313940"
  },
  {
    "text": "send that more structured object that's been split into two things and I can create a stream of structured data",
    "start": "1313940",
    "end": "1319820"
  },
  {
    "text": "Downstream and send that off to inventory commands so as a diagram that will look like this",
    "start": "1319820",
    "end": "1326360"
  },
  {
    "text": "right all the go north go south stuff goes onto our movement command stream all the pickup stuff goes onto our",
    "start": "1326360",
    "end": "1332780"
  },
  {
    "text": "inventory command stream and the rest we can just go straight back out to responses",
    "start": "1332780",
    "end": "1338260"
  },
  {
    "text": "so we're just building an architecture of stuff comes in we think about it we push it on somewhere else maybe it's",
    "start": "1338600",
    "end": "1344840"
  },
  {
    "text": "going back to the user maybe there's more to do with it first but it's just stuff comes in transform it stuff goes",
    "start": "1344840",
    "end": "1350539"
  },
  {
    "text": "out so how do you do movement in that well",
    "start": "1350539",
    "end": "1356780"
  },
  {
    "text": "we've got all these movement commands go north go south and what we'd like to end up with is the first thing that looks a",
    "start": "1356780",
    "end": "1362539"
  },
  {
    "text": "bit more like a database we want what we really want is a table that says the user ID and where they are in the world",
    "start": "1362539",
    "end": "1367940"
  },
  {
    "text": "right so processing those go north south east west commands into this is your place in",
    "start": "1367940",
    "end": "1374780"
  },
  {
    "text": "two-dimensional space so the first thing you do is I'm going",
    "start": "1374780",
    "end": "1381200"
  },
  {
    "text": "to change all those strings into a Delta so North is X 0 and Y is one I don't",
    "start": "1381200",
    "end": "1389840"
  },
  {
    "text": "always forget which direction I've done x and y y is it going up or down uh",
    "start": "1389840",
    "end": "1395059"
  },
  {
    "text": "North is up right coordinates up um turn it into so again turning a",
    "start": "1395059",
    "end": "1402679"
  },
  {
    "text": "string into more structured data which is just Delta and then we need to somehow roll up all those Deltas by user",
    "start": "1402679",
    "end": "1408860"
  },
  {
    "text": "to get their current position which you can just do like with this uh you group it by the key so we're just",
    "start": "1408860",
    "end": "1415700"
  },
  {
    "text": "considering individual users and then you reduce it by adding the X's together and adding the Y's together",
    "start": "1415700",
    "end": "1422419"
  },
  {
    "text": "and that's how you make a table that's how you roll up a series of events into a summary table that looks a lot like a",
    "start": "1422419",
    "end": "1430700"
  },
  {
    "text": "regular um relational database table",
    "start": "1430700",
    "end": "1436000"
  },
  {
    "text": "but the interesting thing about tables in Kafka is yes they're Roll-Ups their",
    "start": "1437120",
    "end": "1444320"
  },
  {
    "text": "summer is there are Aggregates but you can also treat them as streams in themselves so every time this updates we",
    "start": "1444320",
    "end": "1452059"
  },
  {
    "text": "can get a notification coming out we can tail a table for new changes",
    "start": "1452059",
    "end": "1458360"
  },
  {
    "text": "so as well as looking up where you are now I can subscribe to alerts for when you move and we can use that to announce",
    "start": "1458360",
    "end": "1465440"
  },
  {
    "text": "where you've moved back to the user to do this just take that user's position table turn it into a stream of",
    "start": "1465440",
    "end": "1472580"
  },
  {
    "text": "new changes and announce them back to the user as a position response right",
    "start": "1472580",
    "end": "1479059"
  },
  {
    "text": "and actually I'll show you this I over here have this is actually in the",
    "start": "1479059",
    "end": "1485720"
  },
  {
    "text": "demo I've just filtered it out on the UI but all these position changes there's one you move to position zero zero",
    "start": "1485720",
    "end": "1494179"
  },
  {
    "text": "they're all in the UI I just hide them but all these processes are running in the background",
    "start": "1494179",
    "end": "1499658"
  },
  {
    "text": "but you will notice the reason I've hidden them is that on its own isn't",
    "start": "1499700",
    "end": "1505280"
  },
  {
    "text": "terribly interesting moving to you move to position zero zero what we really need is a description",
    "start": "1505280",
    "end": "1511880"
  },
  {
    "text": "so we need to somehow enrich these positions with a description of where that puts you on the map we need to talk",
    "start": "1511880",
    "end": "1518600"
  },
  {
    "text": "about locations which introduces another idea in Kafka which is in any database really you need",
    "start": "1518600",
    "end": "1525380"
  },
  {
    "text": "the idea of standing data we need to draw a map and encode it and store it in the system",
    "start": "1525380",
    "end": "1531020"
  },
  {
    "text": "and they just start life off as a strain stream keyed by its X Y position",
    "start": "1531020",
    "end": "1536539"
  },
  {
    "text": "uh we'll have a description of it and we'll have the objects available as an array and we just insert into it like this",
    "start": "1536539",
    "end": "1543980"
  },
  {
    "text": "so you're on a bridge you're in a forest you're at home with your television and fish good evening in",
    "start": "1543980",
    "end": "1550159"
  },
  {
    "text": "right and then we can build that up as a kind of standing data table with some",
    "start": "1550159",
    "end": "1555799"
  },
  {
    "text": "code like this now this is more detail than I want to go into there are a couple of different kinds of tables in Kafka you can have",
    "start": "1555799",
    "end": "1562940"
  },
  {
    "text": "them sharded if you need to scale horizontally or you can have a kind of table where there's a full copy on every",
    "start": "1562940",
    "end": "1569299"
  },
  {
    "text": "single node you need them for different reasons but this is a small table and I do want it",
    "start": "1569299",
    "end": "1576080"
  },
  {
    "text": "available in every possible processing node so I'm using a global table and then with that I've got two tables",
    "start": "1576080",
    "end": "1582140"
  },
  {
    "text": "now I've got one key by user ID that has a position and one key by position that has all the data I need about where you",
    "start": "1582140",
    "end": "1588919"
  },
  {
    "text": "are I just need to join those and spit that out to the responses",
    "start": "1588919",
    "end": "1595159"
  },
  {
    "text": "and in code that looks like this take the user's position table and turn it into a stream of notifications so I'm",
    "start": "1595159",
    "end": "1601279"
  },
  {
    "text": "reacting to changes and then do a left join on the location data",
    "start": "1601279",
    "end": "1607279"
  },
  {
    "text": "when you do left join I will give you the thing that you uh user ID",
    "start": "1607279",
    "end": "1613240"
  },
  {
    "text": "where they are and you have to tell me how to get the key of the thing you're joining to",
    "start": "1613240",
    "end": "1618679"
  },
  {
    "text": "so in this case I just give you the position I get the uuid in the position and if I give you the position you can",
    "start": "1618679",
    "end": "1624500"
  },
  {
    "text": "left join right and then we get back the two rows that match and we just manage them together",
    "start": "1624500",
    "end": "1630980"
  },
  {
    "text": "into a Java object which would look like me to code if we didn't have to do null handling but we do so it doesn't array",
    "start": "1630980",
    "end": "1639559"
  },
  {
    "text": "no she'll always be with us",
    "start": "1639559",
    "end": "1643658"
  },
  {
    "text": "I've tried to resist but I'm gonna there are languages that don't have nulls and it's really good",
    "start": "1644779",
    "end": "1650059"
  },
  {
    "text": "you know we we don't have to keep inventing languages with null pointers we really don't",
    "start": "1650059",
    "end": "1655279"
  },
  {
    "text": "that's a rant for a different talk um okay where does that put us",
    "start": "1655279",
    "end": "1662179"
  },
  {
    "text": "um let me have a look so now we have this um stream of user location changes right",
    "start": "1662179",
    "end": "1669380"
  },
  {
    "text": "we've joined it together we've got the data so we can just split it out as a response again we're watching for nulls",
    "start": "1669380",
    "end": "1676039"
  },
  {
    "text": "you might have fallen off the edge of the map I didn't do an infinitely sized map you can walk off the edge if you",
    "start": "1676039",
    "end": "1681080"
  },
  {
    "text": "want to and we'll tell you to just run back where you came from but it's pretty simple right this is",
    "start": "1681080",
    "end": "1686419"
  },
  {
    "text": "mostly again mapping values to a stream mapping a function to a stream of values and turning into a string that goes back",
    "start": "1686419",
    "end": "1692900"
  },
  {
    "text": "to the user congratulations we built a walking simulator this is you know we can walk around the",
    "start": "1692900",
    "end": "1699140"
  },
  {
    "text": "world and we can see where we are and if you don't play computer games it may surprise you but there are games",
    "start": "1699140",
    "end": "1704840"
  },
  {
    "text": "where this is where they stop development and ship there are some games that just walk",
    "start": "1704840",
    "end": "1710299"
  },
  {
    "text": "around the world and read the lovely text they may be great I've never got them it's it's not quite my definition of a",
    "start": "1710299",
    "end": "1718100"
  },
  {
    "text": "game if you like them please tell me one that's good to get into first because I can't get it we need more than this to",
    "start": "1718100",
    "end": "1724760"
  },
  {
    "text": "consider it a game in my opinion so let's do that firstly I have a feeling",
    "start": "1724760",
    "end": "1732559"
  },
  {
    "text": "that that uses Lou I have a feeling I've seen ahead to the end I have a feeling that that uses location stream is going",
    "start": "1732559",
    "end": "1740419"
  },
  {
    "text": "to be useful later so we can turn tables into streams let's turn the stream back into a table",
    "start": "1740419",
    "end": "1746690"
  },
  {
    "text": "[Music] um and the way we can turn that rich stream of user location data is to just group",
    "start": "1746690",
    "end": "1751940"
  },
  {
    "text": "it by key again and call that reduce function but this time instead of adding the two together we'll just forget the",
    "start": "1751940",
    "end": "1758179"
  },
  {
    "text": "old one right once you move to somewhere new forget where you were so now we've got a table we had a table",
    "start": "1758179",
    "end": "1765200"
  },
  {
    "text": "of where you are now we have a rich table of where you are and what you can see and what the description is",
    "start": "1765200",
    "end": "1770720"
  },
  {
    "text": "we can work with that that takes us too we have live streaming data going around in a cqrs style system",
    "start": "1770720",
    "end": "1778840"
  },
  {
    "text": "we have we can fan out the data and hand it off to other processors we've got the notion of standing data we have stateful",
    "start": "1778840",
    "end": "1785899"
  },
  {
    "text": "tables which give you live notifications when they change we have joins",
    "start": "1785899",
    "end": "1791720"
  },
  {
    "text": "we've actually accomplished quite a lot by this stage to finish off the game we need to be able to pick things up see what we've",
    "start": "1791720",
    "end": "1798440"
  },
  {
    "text": "picked up do our inventory command and use the object and then we're done",
    "start": "1798440",
    "end": "1803840"
  },
  {
    "text": "so let's take those one by one and we'll be good to pick stuff up",
    "start": "1803840",
    "end": "1809000"
  },
  {
    "text": "I just looked at my watch it's like 10 to 11 it's like I've only got 10 minutes left no we started at 20 past thank God",
    "start": "1809000",
    "end": "1815919"
  },
  {
    "text": "because uh those three things are going to take slightly more than 10 minutes to get through okay picking stuff up should be easy if",
    "start": "1815919",
    "end": "1823760"
  },
  {
    "text": "you see the command pick it up then um check it's in the location and if it is spit down to a new",
    "start": "1823760",
    "end": "1832039"
  },
  {
    "text": "inventory stream stuff you're actually holding and if it's not complain right",
    "start": "1832039",
    "end": "1837740"
  },
  {
    "text": "there's code that'll look like this stream out the inventory commands filter for where the action in our structured",
    "start": "1837740",
    "end": "1845179"
  },
  {
    "text": "inventory command object is pick up and join that to the user's location",
    "start": "1845179",
    "end": "1851419"
  },
  {
    "text": "table I told you it would come in handy right and if that locate if the item",
    "start": "1851419",
    "end": "1856820"
  },
  {
    "text": "they're looking for is at that location then create a new object called pickup which says what you're trying to pick up",
    "start": "1856820",
    "end": "1862880"
  },
  {
    "text": "and whether or not it's available right",
    "start": "1862880",
    "end": "1869600"
  },
  {
    "text": "so it's a request for the thing and whether or not it's going to work and then from that we can do and we can",
    "start": "1869600",
    "end": "1875419"
  },
  {
    "text": "do our split processing trick again we can split it out into the branches where it is available",
    "start": "1875419",
    "end": "1881659"
  },
  {
    "text": "and that's going to generate a new holding an item thing onto the inventory commands",
    "start": "1881659",
    "end": "1887120"
  },
  {
    "text": "and then a failure branch which says it's not available it's falling back to saying you can't pick that up",
    "start": "1887120",
    "end": "1895100"
  },
  {
    "text": "right that should do it except we haven't let people know they've picked something up so let's",
    "start": "1895100",
    "end": "1900200"
  },
  {
    "text": "just quickly do this every time the inventory actually changes this is a real change the inventory not in request",
    "start": "1900200",
    "end": "1906679"
  },
  {
    "text": "every time it actually changes stream that out as a response and that should look pretty easy by this",
    "start": "1906679",
    "end": "1913039"
  },
  {
    "text": "stage stream for this stream out the inventory look for the things we were saying yes we're holding it and turn",
    "start": "1913039",
    "end": "1919760"
  },
  {
    "text": "that into a string to spit back at the user so we can pick stuff up how do we see",
    "start": "1919760",
    "end": "1926360"
  },
  {
    "text": "what we're holding the classic Dungeons and Dragons bag of holding",
    "start": "1926360",
    "end": "1932000"
  },
  {
    "text": "this introduces a slightly New Concept of rolling up um things into a state and then just",
    "start": "1932000",
    "end": "1938779"
  },
  {
    "text": "adding new stuff to that state as it comes in so in code what we're going to do stream out the inventory",
    "start": "1938779",
    "end": "1944299"
  },
  {
    "text": "Group by the user ID again and then say okay I start with an empty array and",
    "start": "1944299",
    "end": "1950779"
  },
  {
    "text": "empties knapsack and every time a new new holding an item thing comes in",
    "start": "1950779",
    "end": "1958220"
  },
  {
    "text": "I want to say that the computer's going to say here's the current state of your knapsack here's your array here's the",
    "start": "1958220",
    "end": "1965419"
  },
  {
    "text": "new thing what do you do all right and I either add it in or take it out",
    "start": "1965419",
    "end": "1972100"
  },
  {
    "text": "so the code that looks like this we say if the item's held and the current",
    "start": "1972919",
    "end": "1980240"
  },
  {
    "text": "object available at that location are the item then we just add it sorry if",
    "start": "1980240",
    "end": "1985820"
  },
  {
    "text": "the if the if the item um we're trying to if we're trying to",
    "start": "1985820",
    "end": "1991399"
  },
  {
    "text": "hold the item and it's not in your current list of objects then add it right",
    "start": "1991399",
    "end": "1997340"
  },
  {
    "text": "otherwise take it out again this is one of these places where the code would be a lot simpler if Java",
    "start": "1997340",
    "end": "2002799"
  },
  {
    "text": "a little more friendly for some reason there's no good arraylist dot remove call",
    "start": "2002799",
    "end": "2008500"
  },
  {
    "text": "I don't know C sharp fans can you remove things from an array easily",
    "start": "2008500",
    "end": "2014519"
  },
  {
    "text": "good right okay um I was horrified by this but other",
    "start": "2014519",
    "end": "2020380"
  },
  {
    "text": "than that bit being stupidly painful it's just add it to the list or take it from the list depending on whether or",
    "start": "2020380",
    "end": "2026559"
  },
  {
    "text": "not whether they're picking it up or losing it so we roll over and we're just",
    "start": "2026559",
    "end": "2032559"
  },
  {
    "text": "aggregating changes into our knapsack object and keeping and maintaining the state of that",
    "start": "2032559",
    "end": "2039159"
  },
  {
    "text": "now that we have this knapsack that's keyed by user we can do stuff with it right we",
    "start": "2039159",
    "end": "2045820"
  },
  {
    "text": "can see what things we have so look through the commands and find ones that say inventory",
    "start": "2045820",
    "end": "2052179"
  },
  {
    "text": "join them onto the knapsack table Key by user and then every time something happens",
    "start": "2052179",
    "end": "2058540"
  },
  {
    "text": "that changes every time someone says what's my inventory we can join to what",
    "start": "2058540",
    "end": "2064480"
  },
  {
    "text": "they're holding and just split back out the response I say inventory we're already",
    "start": "2064480",
    "end": "2071080"
  },
  {
    "text": "maintaining this arraylist of what you're holding so we join and announce",
    "start": "2071080",
    "end": "2077020"
  },
  {
    "text": "we're almost there we're almost there we can pick things up we just need to be able to use them and we've got a game",
    "start": "2077020",
    "end": "2082599"
  },
  {
    "text": "but how do items work right we need some rules we need a table of rules for how items work",
    "start": "2082599",
    "end": "2088658"
  },
  {
    "text": "it's exactly the same as our map we just create a standing data table and roll it up so we say okay we'll keep it on the",
    "start": "2088659",
    "end": "2096398"
  },
  {
    "text": "name of the item we'll give it a position a description and when you use it it generates some other item",
    "start": "2096399",
    "end": "2103500"
  },
  {
    "text": "uh so you can do something like this you can say there's an object called a drink you can use it at position five eight",
    "start": "2103599",
    "end": "2108820"
  },
  {
    "text": "and when you use it I shall demonstrate live this is how glasses work",
    "start": "2108820",
    "end": "2114760"
  },
  {
    "text": "sorry I'm thirsty um you take a drink and you're left in The Empty Glass and then you'll get back the glass object right so it's a very",
    "start": "2114760",
    "end": "2121540"
  },
  {
    "text": "simple standing data table of rules but we can create with that and again we use a global table so the rules for",
    "start": "2121540",
    "end": "2127960"
  },
  {
    "text": "every item are available on every distributed node and then",
    "start": "2127960",
    "end": "2133240"
  },
  {
    "text": "I think we're almost there we just need to do a whole bunch of joins um",
    "start": "2133240",
    "end": "2138820"
  },
  {
    "text": "and we'll just build it up and this is it's three steps we've already seen being pushed together in one one system",
    "start": "2138820",
    "end": "2145900"
  },
  {
    "text": "so if someone says use an X join into the knapsack join it to their location",
    "start": "2145900",
    "end": "2151420"
  },
  {
    "text": "join us to the rules about the item they're trying to use and then we can make a decision on whether or not this",
    "start": "2151420",
    "end": "2156820"
  },
  {
    "text": "is going to work so stream out the inventory commands and filter for Stuff where the action is",
    "start": "2156820",
    "end": "2163119"
  },
  {
    "text": "used join that to the knapsack table",
    "start": "2163119",
    "end": "2168160"
  },
  {
    "text": "um and I'll create an intermediary object called a pair I don't know if you use Java there's a two pause Library",
    "start": "2168160",
    "end": "2173619"
  },
  {
    "text": "which has pair and triple and I don't know quartet Quintet",
    "start": "2173619",
    "end": "2179859"
  },
  {
    "text": "I don't know how high I can go but yeah okay so intermediary object join that to",
    "start": "2179859",
    "end": "2186220"
  },
  {
    "text": "the user's location that gives you a triplet join it to the item rules and finally",
    "start": "2186220",
    "end": "2192579"
  },
  {
    "text": "now we'll produce a proper structured object because those were just temporary objects for the join and you end up",
    "start": "2192579",
    "end": "2199060"
  },
  {
    "text": "every time someone says use something you end up with one of these records it's got the inventory command uh sorry",
    "start": "2199060",
    "end": "2206500"
  },
  {
    "text": "it's got the um it's that's going to have views and the noun it's going to have the location the",
    "start": "2206500",
    "end": "2212680"
  },
  {
    "text": "person is at what they're currently holding and the rules about the thing they're trying to pick up all in one",
    "start": "2212680",
    "end": "2218920"
  },
  {
    "text": "object so we can branch on that and make our final decision so split that up right and test it the",
    "start": "2218920",
    "end": "2228160"
  },
  {
    "text": "first test is is it actually available here right is the thing sorry is it",
    "start": "2228160",
    "end": "2233680"
  },
  {
    "text": "available is the thing they're trying to use actually in their knapsack and if it's not say you don't have the thing to",
    "start": "2233680",
    "end": "2240460"
  },
  {
    "text": "use we've seen that in the demo next test uh can you use it here so",
    "start": "2240460",
    "end": "2248800"
  },
  {
    "text": "look at check there's a rule for the item and if there is is the rules X and Y the same as your X",
    "start": "2248800",
    "end": "2256060"
  },
  {
    "text": "and Y and if they're not say you can't use that item here stream that out to responses",
    "start": "2256060",
    "end": "2263680"
  },
  {
    "text": "if all those tests failed then we must be able to actually use it so we can just say we can just stream over and say okay",
    "start": "2263680",
    "end": "2271119"
  },
  {
    "text": "you use the item send that out as a response you've got",
    "start": "2271119",
    "end": "2276579"
  },
  {
    "text": "an and now we say um remove the old item from the inventory and add in the new item to the",
    "start": "2276579",
    "end": "2283480"
  },
  {
    "text": "inventory and stream that out the inventory thing right the only two pieces that are different",
    "start": "2283480",
    "end": "2288820"
  },
  {
    "text": "about this code are we're actually doing because it fits on a slide note we're actually doing two reactions to one",
    "start": "2288820",
    "end": "2295780"
  },
  {
    "text": "event what the when someone says use we respond to them directly and to the",
    "start": "2295780",
    "end": "2302680"
  },
  {
    "text": "inventory system in one piece of code which is fine you can you can respond to an incoming piece of data",
    "start": "2302680",
    "end": "2310960"
  },
  {
    "text": "with one or more outgoing pieces of data and indeed we do a similar trick there because we're actually generating two",
    "start": "2310960",
    "end": "2317260"
  },
  {
    "text": "different pieces of inventory data you drop this and you pick this up thing in one piece of code",
    "start": "2317260",
    "end": "2324420"
  },
  {
    "text": "but again it just the whole system is built out of stuff comes in analyze it",
    "start": "2324460",
    "end": "2331359"
  },
  {
    "text": "make a decision and stuff goes out something like that those are the",
    "start": "2331359",
    "end": "2337300"
  },
  {
    "text": "streams we used data comes in deal with it in real time react to it spit it out to another piece",
    "start": "2337300",
    "end": "2344079"
  },
  {
    "text": "of data and eventually the answer Finds Its way to the user that's what most event stream",
    "start": "2344079",
    "end": "2350680"
  },
  {
    "text": "programming ends up looking like and that's what programming Kafka ends up looking like data and decisions",
    "start": "2350680",
    "end": "2358200"
  },
  {
    "text": "so you could ask is this a is this a toy or is it useful piece of code and I think I think the honest answer is a bit",
    "start": "2358900",
    "end": "2365500"
  },
  {
    "text": "of both it's it's fun to play with technology but there are actually a lot of patterns in use that work out into",
    "start": "2365500",
    "end": "2371320"
  },
  {
    "text": "real real world code um if you look at the inventory system I",
    "start": "2371320",
    "end": "2377859"
  },
  {
    "text": "think it doesn't take much imagination to see that as like a shopping cart people add things to their shopping cart and remove them and they eventually",
    "start": "2377859",
    "end": "2384040"
  },
  {
    "text": "consume the whole shopping cart and becomes empty inventory system and Adventure game is just like programming",
    "start": "2384040",
    "end": "2390579"
  },
  {
    "text": "for a shopping cart tracking if you look at the rules for the way items work",
    "start": "2390579",
    "end": "2396520"
  },
  {
    "text": "that's the backbone of building uh workflow management system where rules allow different events to progress to",
    "start": "2396520",
    "end": "2402880"
  },
  {
    "text": "the next level the next stage if you look at the way we've enriched",
    "start": "2402880",
    "end": "2408820"
  },
  {
    "text": "the stream of users position with the map data you get something like Parcel tracking where you need to know not only",
    "start": "2408820",
    "end": "2415480"
  },
  {
    "text": "where it is in the world but what its status is you need to join it with information about the depot perhaps to",
    "start": "2415480",
    "end": "2420940"
  },
  {
    "text": "track items moving through the world or a fleet of trucks moving through your",
    "start": "2420940",
    "end": "2426280"
  },
  {
    "text": "delivery Network if you look at the way we've tracked people moving through the world you've",
    "start": "2426280",
    "end": "2431920"
  },
  {
    "text": "got the basis of an analytics command tool you know you can watch people",
    "start": "2431920",
    "end": "2437980"
  },
  {
    "text": "moving through your it's not that bad calm down",
    "start": "2437980",
    "end": "2445420"
  },
  {
    "text": "you can watch people moving through the world of a game or you can watch people moving through your website and track",
    "start": "2445420",
    "end": "2450820"
  },
  {
    "text": "what they're doing and generate intelligence based off those movements so it's a toy because it's a fun game",
    "start": "2450820",
    "end": "2457839"
  },
  {
    "text": "but it uses all the same patterns you can use in real world work",
    "start": "2457839",
    "end": "2463359"
  },
  {
    "text": "and I think that's interesting and you can build up tables and joins and a lot of the things you're used to in a",
    "start": "2463359",
    "end": "2470320"
  },
  {
    "text": "real-time data streaming world that's why I think kafka's interesting",
    "start": "2470320",
    "end": "2477400"
  },
  {
    "text": "it's built up from a different from the same Foundation but it builds up in a different way and ends up in this kind",
    "start": "2477400",
    "end": "2484300"
  },
  {
    "text": "of architectural system where data comes in you deal with it you make",
    "start": "2484300",
    "end": "2490839"
  },
  {
    "text": "decisions on it and you spit data out it's it's actually once you get used to a very simple programming model",
    "start": "2490839",
    "end": "2496599"
  },
  {
    "text": "and I also think it's an interesting part if I can step back and see a bigger picture I think it's an interesting part",
    "start": "2496599",
    "end": "2502960"
  },
  {
    "text": "of the way programming is slightly shifting in the past I don't know 10 20 years I'm going to",
    "start": "2502960",
    "end": "2511240"
  },
  {
    "text": "say as to the point where we where where we reach the point the process has stopped",
    "start": "2511240",
    "end": "2517300"
  },
  {
    "text": "getting faster data got more valuable and storage got really cheap we've",
    "start": "2517300",
    "end": "2523359"
  },
  {
    "text": "started changing the way we program instead of saying I'm going to build systems where data",
    "start": "2523359",
    "end": "2530920"
  },
  {
    "text": "can change data mutates we do updates on data and then our job is to protect it",
    "start": "2530920",
    "end": "2537520"
  },
  {
    "text": "we protect individual pieces of data with objects which Guard from change",
    "start": "2537520",
    "end": "2544440"
  },
  {
    "text": "or we build microservices that have a database and Guard from you changing them and just proxy that access",
    "start": "2544440",
    "end": "2550900"
  },
  {
    "text": "instead of do programming like that we say well facts are just facts let's just",
    "start": "2550900",
    "end": "2556180"
  },
  {
    "text": "record them they don't change new facts come in we just store them we don't need to guard them because no one can change",
    "start": "2556180",
    "end": "2562119"
  },
  {
    "text": "them have a copy it's fine all we need to do is take that data make decisions",
    "start": "2562119",
    "end": "2567880"
  },
  {
    "text": "on it and produce new facts right you see this I think you see this in the",
    "start": "2567880",
    "end": "2573820"
  },
  {
    "text": "move in programming from object orientation to functional programming or immutable data structures instead of",
    "start": "2573820",
    "end": "2580119"
  },
  {
    "text": "dealing with mutation and then trying to build up structures around it to cope",
    "start": "2580119",
    "end": "2585460"
  },
  {
    "text": "with that mutation don't do mutation at all store facts and build up systems on",
    "start": "2585460",
    "end": "2591579"
  },
  {
    "text": "top of storing facts that's I think that's the the spiritual",
    "start": "2591579",
    "end": "2597160"
  },
  {
    "text": "difference between object orientation and immutable functional programming I also think it's the difference between",
    "start": "2597160",
    "end": "2602920"
  },
  {
    "text": "doing something like jQuery where we manipulate individual pieces of the Dom",
    "start": "2602920",
    "end": "2608740"
  },
  {
    "text": "and something like react and Redux or Elm that inspired it where you just have streams of facts coming in you roll up",
    "start": "2608740",
    "end": "2615700"
  },
  {
    "text": "and make a decision based on it and you display that out to the user I also think we do it in devops as well",
    "start": "2615700",
    "end": "2622180"
  },
  {
    "text": "where instead of instead of having like individual snowflake servers that we manage and",
    "start": "2622180",
    "end": "2628480"
  },
  {
    "text": "manipulate individually we just write something like a Docker file which is a recipe of events that have to happen to",
    "start": "2628480",
    "end": "2634720"
  },
  {
    "text": "your base state to generate a final state I think this whole pattern of",
    "start": "2634720",
    "end": "2641200"
  },
  {
    "text": "eliminate mutation just record the facts and process those for new facts so I get",
    "start": "2641200",
    "end": "2648339"
  },
  {
    "text": "the sense this is sweeping through our industry and I think this is uh I think Kafka is part of that when you take that",
    "start": "2648339",
    "end": "2653560"
  },
  {
    "text": "idea to persistence and databases that's my hypothesis I also think it's",
    "start": "2653560",
    "end": "2658839"
  },
  {
    "text": "terribly interesting so I hope you found this interesting uh if you'd like to see some more code I do have a video on",
    "start": "2658839",
    "end": "2664060"
  },
  {
    "text": "YouTube which you can find um which is a complete walkthrough of building a a kafka-based system with a",
    "start": "2664060",
    "end": "2671800"
  },
  {
    "text": "portable synthesizer my music composition skills which are kind of around me and the 3D Graphics Library",
    "start": "2671800",
    "end": "2680400"
  },
  {
    "text": "which goes into more code and more detail if you fancy that there's a QR code to it that QR code will also take",
    "start": "2680400",
    "end": "2687579"
  },
  {
    "text": "you to the source code for this project it will take you to our company's",
    "start": "2687579",
    "end": "2692980"
  },
  {
    "text": "developer resources for learning Kafka we'll take you to the podcast that I host if you're not sick of the sound of",
    "start": "2692980",
    "end": "2698319"
  },
  {
    "text": "my voice already um uh yeah QR code um I hope you found that interesting I",
    "start": "2698319",
    "end": "2704500"
  },
  {
    "text": "will happily take any questions you've got thank you foreign",
    "start": "2704500",
    "end": "2711700"
  },
  {
    "text": "so the question is what would you do if you want to query for all users that have a particular item in their",
    "start": "2724200",
    "end": "2730359"
  },
  {
    "text": "inventory or just your general query pattern generally what you do um",
    "start": "2730359",
    "end": "2735700"
  },
  {
    "text": "is you would build up you you define a process that says",
    "start": "2735700",
    "end": "2740740"
  },
  {
    "text": "um give it two ways if you're doing an ad hoc you would probably pick a point in",
    "start": "2740740",
    "end": "2746500"
  },
  {
    "text": "time that wasn't was fairly recent and just roll forward through that history data and just scan through it when you",
    "start": "2746500",
    "end": "2752380"
  },
  {
    "text": "decided that was a useful query that you wanted to have fast and permanent then you would create a process that",
    "start": "2752380",
    "end": "2759839"
  },
  {
    "text": "transforms that list of inventory into something keyed by the item you're interested in",
    "start": "2759839",
    "end": "2766380"
  },
  {
    "text": "and contains the users that have that currently that would remain live as new data comes in and you can do fast key",
    "start": "2766380",
    "end": "2773619"
  },
  {
    "text": "value access on it so you can get ad hoc queries",
    "start": "2773619",
    "end": "2778020"
  },
  {
    "text": "and we've got on time okay thank you very much I'll be around for the rest of the day please",
    "start": "2781480",
    "end": "2787480"
  },
  {
    "text": "have a chat if you fancy it thank you",
    "start": "2787480",
    "end": "2791640"
  }
]