[
  {
    "start": "0",
    "end": "46000"
  },
  {
    "text": "I'm standing between you and lunch and I respect that but I think we have a fairly interesting topic here I'm going",
    "start": "4620",
    "end": "12000"
  },
  {
    "text": "to talk about design patterns for scalability and availability especially in the context or in the context of",
    "start": "12000",
    "end": "18840"
  },
  {
    "text": "trading systems but these patterns design patterns I guess are generally usable but there are some constraints",
    "start": "18840",
    "end": "25380"
  },
  {
    "text": "when it comes to trading systems which makes them applicable and and and maybe",
    "start": "25380",
    "end": "32910"
  },
  {
    "text": "they are used in more extreme versions in a trading systems than they would be",
    "start": "32910",
    "end": "38910"
  },
  {
    "text": "used in in other software systems but you will see some of them in in other",
    "start": "38910",
    "end": "44100"
  },
  {
    "text": "systems as well so I'm going to start to give you a very crash course of what",
    "start": "44100",
    "end": "52140"
  },
  {
    "start": "46000",
    "end": "121000"
  },
  {
    "text": "kind of system what we're solving for so saxy back is a global online investment",
    "start": "52140",
    "end": "58710"
  },
  {
    "text": "bank which is a broker we have offices in 25 countries we have clients in 188",
    "start": "58710",
    "end": "65190"
  },
  {
    "text": "countries trading both over UIs and api's we offer access to the global",
    "start": "65190",
    "end": "72180"
  },
  {
    "text": "financial markets so we're essentially connected to two broadly each and any",
    "start": "72180",
    "end": "77700"
  },
  {
    "text": "exchange any market you can imagine we",
    "start": "77700",
    "end": "85049"
  },
  {
    "text": "are on the third generation of a technical platform and involving its Microsoft based mostly developed",
    "start": "85049",
    "end": "90600"
  },
  {
    "text": "in-house and most of the components and whatnot I will show you on the screen are actually in-house we're serving tens",
    "start": "90600",
    "end": "97140"
  },
  {
    "text": "of thousands of concurrent users and more than actually I will get into more of detail on the numbers but essentially",
    "start": "97140",
    "end": "106170"
  },
  {
    "text": "very high transaction Peaks both in terms of online users that's also the time where we need to be responding even",
    "start": "106170",
    "end": "112859"
  },
  {
    "text": "more timely than when it's silent so there isn't really a trade off so the",
    "start": "112859",
    "end": "122039"
  },
  {
    "start": "121000",
    "end": "153000"
  },
  {
    "text": "business model is essentially we're taking liquidity or things from the market and we're providing that to end",
    "start": "122039",
    "end": "129000"
  },
  {
    "text": "client globally a lot of products and there is also back-office risk",
    "start": "129000",
    "end": "135750"
  },
  {
    "text": "management and other stuff so that's broadly the business model and then we",
    "start": "135750",
    "end": "141650"
  },
  {
    "text": "essentially make money on on on commissions and and other fees related",
    "start": "141650",
    "end": "150049"
  },
  {
    "text": "to your to your trading so this is just",
    "start": "150049",
    "end": "155420"
  },
  {
    "start": "153000",
    "end": "173000"
  },
  {
    "text": "to show you that it's a we're covering a very broad range of asset types and",
    "start": "155420",
    "end": "161420"
  },
  {
    "text": "instruments I'm not going to go into detail but its its global and very wide",
    "start": "161420",
    "end": "167480"
  },
  {
    "text": "variety of products so in the workflow",
    "start": "167480",
    "end": "174950"
  },
  {
    "start": "173000",
    "end": "469000"
  },
  {
    "text": "and service requirements for being able to deliver this globally is obviously",
    "start": "174950",
    "end": "180169"
  },
  {
    "text": "based on a some some fundamentals king out indications authorization",
    "start": "180169",
    "end": "185750"
  },
  {
    "text": "subscriptions setting profiles and configuration but then you have the",
    "start": "185750",
    "end": "190819"
  },
  {
    "text": "different legs of trading and execute trading execution where you have",
    "start": "190819",
    "end": "196430"
  },
  {
    "text": "tradable quotes requests for quotes DMA different kinds of way to interact with",
    "start": "196430",
    "end": "201530"
  },
  {
    "text": "with the markets you have the order management where you receive in process",
    "start": "201530",
    "end": "207949"
  },
  {
    "text": "orders you route the orders to the market you might bundle orders and send",
    "start": "207949",
    "end": "213379"
  },
  {
    "text": "them in batches and you get execution specs on orders then you have the whole",
    "start": "213379",
    "end": "218419"
  },
  {
    "text": "risk management aspect of it and it's actually more than just when you want to",
    "start": "218419",
    "end": "224419"
  },
  {
    "text": "trade checking that you have money on your account because your current positions might be in deficit you",
    "start": "224419",
    "end": "231079"
  },
  {
    "text": "actually might hold more positions or more assets than you have money on your",
    "start": "231079",
    "end": "237530"
  },
  {
    "text": "accounts that's called leveraged trading and the actual value of your portfolio is not",
    "start": "237530",
    "end": "245959"
  },
  {
    "text": "yes the linear function of you know the current profit losses on each and every",
    "start": "245959",
    "end": "252859"
  },
  {
    "text": "of your assets but it's a it's it's a nonlinear function so you essentially",
    "start": "252859",
    "end": "259009"
  },
  {
    "text": "need to look to the whole portfolio of the client every time he trades there",
    "start": "259009",
    "end": "265940"
  },
  {
    "text": "because of currency exposures and whatnot then you have a pricing and",
    "start": "265940",
    "end": "271790"
  },
  {
    "text": "and reference orders price formation price distribution and the reference",
    "start": "271790",
    "end": "277550"
  },
  {
    "text": "date around the instrument you have on the platform and then you have the content which is short news analysis and",
    "start": "277550",
    "end": "285590"
  },
  {
    "text": "research I will largely today talk mostly about the trading and execution and the",
    "start": "285590",
    "end": "293210"
  },
  {
    "text": "pricing side because that's where those more extreme requirements emerge and and",
    "start": "293210",
    "end": "301010"
  },
  {
    "text": "to maybe to some extent risk that's where the extreme requirements for throughput and latency occurs that that",
    "start": "301010",
    "end": "308120"
  },
  {
    "text": "have given rise to some of these may be non-traditional patterns so we are",
    "start": "308120",
    "end": "317810"
  },
  {
    "text": "seeing in excess of 20,000 concurrent online users we operational and open",
    "start": "317810",
    "end": "324200"
  },
  {
    "text": "five and a half days our twenty five hours a day which means there is no",
    "start": "324200",
    "end": "329870"
  },
  {
    "text": "downtime there is no time to apart from the weekend to upgrade the system we",
    "start": "329870",
    "end": "339260"
  },
  {
    "text": "process in excess of 500 thousand price updates per second that's essentially",
    "start": "339260",
    "end": "345350"
  },
  {
    "text": "price coming in and we might need to react to that price in a very short",
    "start": "345350",
    "end": "351590"
  },
  {
    "text": "amount of time route and order do something on behalf of a client and so",
    "start": "351590",
    "end": "358100"
  },
  {
    "text": "forth reevaluate the clients holdings based on on the play price the creation",
    "start": "358100",
    "end": "365860"
  },
  {
    "text": "we are doing intraday execution of two thousand trades per second in two",
    "start": "365860",
    "end": "372230"
  },
  {
    "text": "thousand trades per second and that's business trades but each and every trade",
    "start": "372230",
    "end": "377240"
  },
  {
    "text": "is also at least you know coming with with an order request and some state may",
    "start": "377240",
    "end": "385280"
  },
  {
    "text": "change azan the actual order that that trade generated so this is actually real",
    "start": "385280",
    "end": "391070"
  },
  {
    "text": "trades but a trade generates a lot more",
    "start": "391070",
    "end": "396710"
  },
  {
    "text": "messages in the system actually say roughly maybe three to five messages per",
    "start": "396710",
    "end": "405490"
  },
  {
    "text": "trade just for that trade to come into life so to say we booked over 1 million",
    "start": "405490",
    "end": "416800"
  },
  {
    "text": "trades per day 160 unique users and",
    "start": "416800",
    "end": "423700"
  },
  {
    "text": "we're trying to maintain latencies in the scenes in single-digit millisecond",
    "start": "423700",
    "end": "429040"
  },
  {
    "text": "range throughout from we receive",
    "start": "429040",
    "end": "434380"
  },
  {
    "text": "something until we react to it essentially so that was he have to give",
    "start": "434380",
    "end": "441460"
  },
  {
    "text": "you a small crash course in in the kind",
    "start": "441460",
    "end": "446830"
  },
  {
    "text": "of technical challenges we have so here",
    "start": "446830",
    "end": "451870"
  },
  {
    "text": "you can see one of our clients sitting in the platform and doing and this is obviously a end-user sitting on a tablet",
    "start": "451870",
    "end": "458440"
  },
  {
    "text": "but there might be an API which in turn has a lot of other users or he might sit",
    "start": "458440",
    "end": "465370"
  },
  {
    "text": "on a web or a desktop application so the",
    "start": "465370",
    "end": "470740"
  },
  {
    "start": "469000",
    "end": "559000"
  },
  {
    "text": "business challenges also is to provide a unified and compelling client experience",
    "start": "470740",
    "end": "475870"
  },
  {
    "text": "across devices platforms and across the world do that in a cost-efficient way by",
    "start": "475870",
    "end": "484150"
  },
  {
    "text": "using as low as much technology sharing as possible reuse trying to avoid",
    "start": "484150",
    "end": "489880"
  },
  {
    "text": "duplication and proliferation of technologies so essentially we serve all our system from it from a single system",
    "start": "489880",
    "end": "498250"
  },
  {
    "text": "so we don't have multiple systems across geographic locations but it's a single",
    "start": "498250",
    "end": "503590"
  },
  {
    "text": "instance systems where we host all the tenants in the same infrastructure",
    "start": "503590",
    "end": "511890"
  },
  {
    "text": "faster time-to-market and flexibility adding new products features and sophisticated or of 16 products and",
    "start": "511890",
    "end": "519250"
  },
  {
    "text": "entering new geographies is typically also what comes up compliance and",
    "start": "519250",
    "end": "524890"
  },
  {
    "text": "regulation Financial Services is a heavily regulated market and we also",
    "start": "524890",
    "end": "532810"
  },
  {
    "text": "face the challenges of multiple regulators as we operate in 25 countries and we will white label this",
    "start": "532810",
    "end": "539350"
  },
  {
    "text": "platform for other financial services providers to use it which means we're",
    "start": "539350",
    "end": "544930"
  },
  {
    "text": "indirectly regulated in even more markets and that's that that is the",
    "start": "544930",
    "end": "552250"
  },
  {
    "text": "challenge when it comes to having audit ability and traceability and your",
    "start": "552250",
    "end": "557710"
  },
  {
    "text": "process is in order and stuff like that so what are the critical business flows where milliseconds matter it doesn't",
    "start": "557710",
    "end": "564790"
  },
  {
    "start": "559000",
    "end": "684000"
  },
  {
    "text": "really if it's creating a client it's okay if it takes more that can take some",
    "start": "564790",
    "end": "571590"
  },
  {
    "text": "longer time but essentially you have the markets here we have the liquidity and therefore two flows we get some price in",
    "start": "571590",
    "end": "579100"
  },
  {
    "text": "from the market and we need to get that out to the client in in in either clean",
    "start": "579100",
    "end": "584740"
  },
  {
    "text": "form or in some kind of manipulated form and then the client makes an order and",
    "start": "584740",
    "end": "592120"
  },
  {
    "text": "and wants a trade and we might or might not want to go out in the market here",
    "start": "592120",
    "end": "597730"
  },
  {
    "text": "and get that back to the end client if he's sitting on a UI but these these are essentially the",
    "start": "597730",
    "end": "606900"
  },
  {
    "text": "flows we're optimizing for so price comes in through some feed handler where",
    "start": "606900",
    "end": "612370"
  },
  {
    "text": "you normalize it might be different protocols it goes to some level of",
    "start": "612370",
    "end": "617710"
  },
  {
    "text": "aggregation then we do some calculation and then send a price out to the client",
    "start": "617710",
    "end": "624570"
  },
  {
    "text": "so they're multiple steps here and then yes we get five hundred thousand in here",
    "start": "624570",
    "end": "630610"
  },
  {
    "text": "this price might also hit downstream services for them to react to so it's",
    "start": "630610",
    "end": "636220"
  },
  {
    "text": "not just going out to the end client here but we have in internal services that need to react to the price route an",
    "start": "636220",
    "end": "643210"
  },
  {
    "text": "order will do whatever and then you have the actual client he wants to trade you",
    "start": "643210",
    "end": "650470"
  },
  {
    "text": "he sends an order we do some calculation you do some handling you decide if you",
    "start": "650470",
    "end": "656170"
  },
  {
    "text": "want to go out in the market you get the order back you get the trade back and",
    "start": "656170",
    "end": "661570"
  },
  {
    "text": "you need to get it back to the client the B's and before we accept your order",
    "start": "661570",
    "end": "668560"
  },
  {
    "text": "we do a margin or risk SEC essentially saying and if you're allowed to take",
    "start": "668560",
    "end": "676730"
  },
  {
    "text": "this position or not so crash course in",
    "start": "676730",
    "end": "684080"
  },
  {
    "start": "684000",
    "end": "714000"
  },
  {
    "text": "in bangbang or going trading and you can",
    "start": "684080",
    "end": "691190"
  },
  {
    "text": "see there is also a challenge here of exponential business growth this is a",
    "start": "691190",
    "end": "697700"
  },
  {
    "text": "generic measure of number of business events per day over a period of time so",
    "start": "697700",
    "end": "704950"
  },
  {
    "text": "the new system needs to scale it needs to be resilient and and and and so forth",
    "start": "704950",
    "end": "713890"
  },
  {
    "start": "714000",
    "end": "886000"
  },
  {
    "text": "so trading systems I don't know if you have read about the reactive manifesto",
    "start": "714610",
    "end": "721130"
  },
  {
    "text": "but trading systems are actually I would say the definition of a reactive system",
    "start": "721130",
    "end": "729410"
  },
  {
    "text": "so if we look at the core tenets core design principle map to the tenets of",
    "start": "729410",
    "end": "735950"
  },
  {
    "text": "reactive you would see reactive systems should be responsive I they should",
    "start": "735950",
    "end": "741590"
  },
  {
    "text": "respond to the user in a in any condition so we use casual and mental",
    "start": "741590",
    "end": "751090"
  },
  {
    "text": "consistency to allow to be responsive we use horizontal scaling massively or",
    "start": "751090",
    "end": "759130"
  },
  {
    "text": "partitioning sharding segmenting of workloads work sets to be able to scale",
    "start": "759130",
    "end": "764870"
  },
  {
    "text": "and be responsive asynchronous kind of fire forget action where it can be",
    "start": "764870",
    "end": "772520"
  },
  {
    "text": "supported and we are very high throughput and tight latency",
    "start": "772520",
    "end": "778280"
  },
  {
    "text": "requirements elastic we strive to be able to scale out on commodity hardware",
    "start": "778280",
    "end": "785170"
  },
  {
    "text": "using horizontal scaling of work set and and be able to grow capacity swiftly by",
    "start": "785170",
    "end": "794660"
  },
  {
    "text": "by horizontal scaling resilient",
    "start": "794660",
    "end": "800560"
  },
  {
    "text": "redundant no single points of failure running fully active active",
    "start": "800560",
    "end": "805870"
  },
  {
    "text": "so there is no passive passive service",
    "start": "805870",
    "end": "813170"
  },
  {
    "text": "it's actually active and maintaining the state that the active one has with",
    "start": "813170",
    "end": "819980"
  },
  {
    "text": "automatic seamless failover in some instances when we do risk chef sex for",
    "start": "819980",
    "end": "826520"
  },
  {
    "text": "example we actually send the risk checks to two servers and we take the one that",
    "start": "826520",
    "end": "833750"
  },
  {
    "text": "responds first back because we know they're eventually in casually consistent and we're good enough with",
    "start": "833750",
    "end": "839960"
  },
  {
    "text": "one of them responding because the other one might be garbage collecting for example or whatever at that point in",
    "start": "839960",
    "end": "846590"
  },
  {
    "text": "time it's very unlikely that the two of them dude at the same time we need to be",
    "start": "846590",
    "end": "857630"
  },
  {
    "text": "able to survive with a reduced service if we have a massive break out of a full",
    "start": "857630",
    "end": "863600"
  },
  {
    "text": "data center or a communication line or whatever message driven it's",
    "start": "863600",
    "end": "871610"
  },
  {
    "text": "event-driven and message driven at heart loosely coupled systems using a topic",
    "start": "871610",
    "end": "880190"
  },
  {
    "text": "based publish/subscribe messaging essentially so a little bit about the",
    "start": "880190",
    "end": "888200"
  },
  {
    "start": "886000",
    "end": "960000"
  },
  {
    "text": "technical environment I'm not going to go into deep we are we running purely on",
    "start": "888200",
    "end": "893960"
  },
  {
    "text": "Microsoft its dotnet c-sharp which was to do TFS so for most of the",
    "start": "893960",
    "end": "902030"
  },
  {
    "text": "applications you see in here actually Windows services or is hosted apps we",
    "start": "902030",
    "end": "907340"
  },
  {
    "text": "have a lot of shared components for business logic and and and caching",
    "start": "907340",
    "end": "912740"
  },
  {
    "text": "that's used throughout the system we use",
    "start": "912740",
    "end": "918730"
  },
  {
    "text": "last Ashok's a cabana for feature tracking and and some monitoring scum",
    "start": "918730",
    "end": "924940"
  },
  {
    "text": "and so forth we're running large parts",
    "start": "924940",
    "end": "930710"
  },
  {
    "text": "of the critical infrastructure on bare metal because we cannot get the performance when processing 500,000",
    "start": "930710",
    "end": "938590"
  },
  {
    "text": "price updates per second on virtualized environment let allow let alone in the",
    "start": "938590",
    "end": "946780"
  },
  {
    "text": "cloud it starts breaking down and even",
    "start": "946780",
    "end": "952360"
  },
  {
    "text": "doing multicast is a challenge in in in those environments actually so the",
    "start": "952360",
    "end": "962530"
  },
  {
    "start": "960000",
    "end": "1261000"
  },
  {
    "text": "architecture very high level we have the end clients here we have an open API we",
    "start": "962530",
    "end": "968560"
  },
  {
    "text": "have another API we have some shared components we have a message pass high",
    "start": "968560",
    "end": "975820"
  },
  {
    "text": "performance through some infrastructure services I will go into some of those there are some core services around",
    "start": "975820",
    "end": "982270"
  },
  {
    "text": "order management and risk management there is some connectivity to the market",
    "start": "982270",
    "end": "989080"
  },
  {
    "text": "and then in the end there is some databases here as well and as I said",
    "start": "989080",
    "end": "994930"
  },
  {
    "text": "we're going to focus on core and trading and execution there is also back office",
    "start": "994930",
    "end": "1000780"
  },
  {
    "text": "system and money going in out of the bank as well I won't cover that in in",
    "start": "1000780",
    "end": "1007320"
  },
  {
    "text": "this talk and so essentially the front ends are html5 rich very rich single",
    "start": "1007320",
    "end": "1015120"
  },
  {
    "text": "page applications and they're hosted in native shelves so we can distribute them",
    "start": "1015120",
    "end": "1022140"
  },
  {
    "text": "in in in app stores but essentially it's the same codebase",
    "start": "1022140",
    "end": "1027569"
  },
  {
    "text": "running whether you do whether you log in on Android or on iOS or on your",
    "start": "1027570",
    "end": "1036390"
  },
  {
    "text": "tablet it's just essentially different layouts and we are in in developing a",
    "start": "1036390",
    "end": "1046430"
  },
  {
    "text": "this html5 to be in the desktop application as well essentially the same",
    "start": "1046430",
    "end": "1051740"
  },
  {
    "text": "components will be repackaged in in an electron shell in that instance and all",
    "start": "1051740",
    "end": "1060480"
  },
  {
    "text": "those applications are served by a open rest-based API",
    "start": "1060480",
    "end": "1067100"
  },
  {
    "text": "and here you also use sticky sessions because there is a lot of session state",
    "start": "1069620",
    "end": "1075770"
  },
  {
    "text": "you need to maintain which instruments are declined watching and so forth a lot",
    "start": "1075770",
    "end": "1082010"
  },
  {
    "text": "of business logic is actually front loaded and executed already in this layer in this process so an API is rest",
    "start": "1082010",
    "end": "1092870"
  },
  {
    "text": "based with streaming over WebSockets out to the client we don't use that",
    "start": "1092870",
    "end": "1099020"
  },
  {
    "text": "internally that we use multicast there",
    "start": "1099020",
    "end": "1104300"
  },
  {
    "text": "is a high performance messaging middleware with with horizontally scalable persistence so we don't need to",
    "start": "1104300",
    "end": "1112179"
  },
  {
    "text": "write every transaction to the database but we can SM essentially just publish it and and and be rest assured that it",
    "start": "1112179",
    "end": "1121309"
  },
  {
    "text": "soon enough will hit the database or the downstream services interested there are",
    "start": "1121309",
    "end": "1129230"
  },
  {
    "text": "some back-back in infrastructure services they are a horizontally",
    "start": "1129230",
    "end": "1135110"
  },
  {
    "text": "partition fault tolerant with fully redundant running in multiple data centers and also traditional databases",
    "start": "1135110",
    "end": "1145880"
  },
  {
    "text": "but running in mirroring high available high availability mode those are single",
    "start": "1145880",
    "end": "1152510"
  },
  {
    "text": "instance as we do a lot of the scaling actually up in in this layer and I will",
    "start": "1152510",
    "end": "1162590"
  },
  {
    "text": "come back to that because we actually want to avoid the database as much as possible because that's usually a performance bottleneck in any in any",
    "start": "1162590",
    "end": "1171380"
  },
  {
    "text": "system when when you hit a specific scale but definitely it adds some",
    "start": "1171380",
    "end": "1178730"
  },
  {
    "text": "complexity or a lot of complexity so",
    "start": "1178730",
    "end": "1184750"
  },
  {
    "text": "there is active active messages of segmented partitioned workload and these",
    "start": "1184750",
    "end": "1191600"
  },
  {
    "text": "might be partitioned on different axis so for orders it might be around the",
    "start": "1191600",
    "end": "1199220"
  },
  {
    "text": "actual instrument for the risk it might be in dividual client residing in one segment",
    "start": "1199220",
    "end": "1207970"
  },
  {
    "text": "and then some large grade shared components they encapsulate some core",
    "start": "1207970",
    "end": "1217990"
  },
  {
    "text": "business logic around trade capture order capture and some of them are just",
    "start": "1217990",
    "end": "1225159"
  },
  {
    "text": "essentially caching data in a way that's optimized for the actual use so it's not",
    "start": "1225159",
    "end": "1232429"
  },
  {
    "text": "generic caching but actually data read up and kept consistent and structured in",
    "start": "1232429",
    "end": "1238700"
  },
  {
    "text": "a way that's optimized for the specific use whether it be finding Commission rules or deciding where to route an",
    "start": "1238700",
    "end": "1246139"
  },
  {
    "text": "order which is all semi static configuration that you can change intraday but you don't need millisecond",
    "start": "1246139",
    "end": "1252679"
  },
  {
    "text": "it can take some time before that actually gets through in the system so",
    "start": "1252679",
    "end": "1261860"
  },
  {
    "start": "1261000",
    "end": "1589000"
  },
  {
    "text": "what are some of the interesting pattern if you look at all this well we use",
    "start": "1261860",
    "end": "1267789"
  },
  {
    "text": "asynchronous transaction logging so we actually accept the business transaction",
    "start": "1267789",
    "end": "1276950"
  },
  {
    "text": "whether it being an order what not before we have written it to database",
    "start": "1276950",
    "end": "1285039"
  },
  {
    "text": "we're pretty sure that it will at some point in time hit the database and and",
    "start": "1285039",
    "end": "1291049"
  },
  {
    "text": "be secure it's it's it's actually tracked at multiple levels levels and",
    "start": "1291049",
    "end": "1297230"
  },
  {
    "text": "there is a replay restore mechanism on on this message pass as well we use",
    "start": "1297230",
    "end": "1307039"
  },
  {
    "text": "publish subscribe message messaging heavily using multicast over using an",
    "start": "1307039",
    "end": "1312499"
  },
  {
    "text": "optimized binary protocol so there will be no angle brackets there will be no YES on there will be no it's it's it's",
    "start": "1312499",
    "end": "1320480"
  },
  {
    "text": "bikes paired down to the metal so we take everything coming in normalize it and and in an optimized manner for this",
    "start": "1320480",
    "end": "1330889"
  },
  {
    "text": "use case that goes for both of those flows we saw",
    "start": "1330889",
    "end": "1336860"
  },
  {
    "text": "on the screen both getting prizes in and handling transactions we use meshes of",
    "start": "1336860",
    "end": "1349370"
  },
  {
    "text": "partitioned serving service they execute real-time alternate automated business",
    "start": "1349370",
    "end": "1355250"
  },
  {
    "text": "processes an action that might be routing in order to the market or sending in push notification to client",
    "start": "1355250",
    "end": "1363980"
  },
  {
    "text": "that you're a little bit too close to to being stopped out now or even in the end",
    "start": "1363980",
    "end": "1370309"
  },
  {
    "text": "actually protecting the end customer and and and and and closing his position if if it goes that far and that needs to be",
    "start": "1370309",
    "end": "1378140"
  },
  {
    "text": "fairly quickly done so we cut the losses for and protect the client and ourselves",
    "start": "1378140",
    "end": "1387530"
  },
  {
    "text": "from from any losses we use a witness",
    "start": "1387530",
    "end": "1393410"
  },
  {
    "text": "server to achieve the seamless failover here between two essentially active",
    "start": "1393410",
    "end": "1399980"
  },
  {
    "text": "active instances of a component they are",
    "start": "1399980",
    "end": "1406250"
  },
  {
    "text": "essentially receiving the same stream of information they maintain the same state",
    "start": "1406250",
    "end": "1411620"
  },
  {
    "text": "and one of them is deemed active using",
    "start": "1411620",
    "end": "1417440"
  },
  {
    "text": "the witness server or if they are con contact with each other and it's only",
    "start": "1417440",
    "end": "1424160"
  },
  {
    "text": "the active one so they go through all the hoops and loops and and process",
    "start": "1424160",
    "end": "1429200"
  },
  {
    "text": "everything they even make the decision but it's only one of them that then actually executes the decision and sends",
    "start": "1429200",
    "end": "1437840"
  },
  {
    "text": "out this is the way it's going to be and that can flip very quickly if if one of",
    "start": "1437840",
    "end": "1445010"
  },
  {
    "text": "them goes down and both of them can actually respond to requests you can",
    "start": "1445010",
    "end": "1450260"
  },
  {
    "text": "even have more than two actually in a if you want to scale out but only one of",
    "start": "1450260",
    "end": "1458030"
  },
  {
    "text": "them will actually generate the business the automated business transaction based",
    "start": "1458030",
    "end": "1464750"
  },
  {
    "text": "on some input also a lot of monitoring",
    "start": "1464750",
    "end": "1472340"
  },
  {
    "text": "and tracking going on it becomes crucial when you're all message based when things goes fast so",
    "start": "1472340",
    "end": "1478549"
  },
  {
    "text": "we and and that use both just bespoke",
    "start": "1478549",
    "end": "1485289"
  },
  {
    "text": "logging of data and but also using log",
    "start": "1485289",
    "end": "1492740"
  },
  {
    "text": "stash in Cabana to do tracking and and and so forth on the back the open API",
    "start": "1492740",
    "end": "1504500"
  },
  {
    "text": "actually also has scalable in-memory session management and is now it looks",
    "start": "1504500",
    "end": "1513110"
  },
  {
    "text": "like a large monolith but but it's actually divided in in in relevant micro",
    "start": "1513110",
    "end": "1521090"
  },
  {
    "text": "services or service groups hosting specific functionality one that can be",
    "start": "1521090",
    "end": "1527299"
  },
  {
    "text": "deployed and independently one can be",
    "start": "1527299",
    "end": "1532610"
  },
  {
    "text": "order and trade management one can be portfolio one can be charts for example",
    "start": "1532610",
    "end": "1538659"
  },
  {
    "text": "and and there is a range of those but these all share a common sessions or the",
    "start": "1538659",
    "end": "1544190"
  },
  {
    "text": "client logs in once using the single sign-on system and he can use that token",
    "start": "1544190",
    "end": "1550760"
  },
  {
    "text": "to access any endpoints and all these sessions also share a common streaming",
    "start": "1550760",
    "end": "1557299"
  },
  {
    "text": "channel so any of these services can actually given knowing your session ID",
    "start": "1557299",
    "end": "1562730"
  },
  {
    "text": "can stream a message to you over a single shallow channel because we don't want to end client here to need to",
    "start": "1562730",
    "end": "1570429"
  },
  {
    "text": "understand the underlying architecture and have like 25 streaming connections",
    "start": "1570429",
    "end": "1577970"
  },
  {
    "text": "for each and every service that or endpoint that needs to do streaming so there is a common framework around that",
    "start": "1577970",
    "end": "1584269"
  },
  {
    "text": "but then it's it's fairly common compartmentalized so in the humble",
    "start": "1584269",
    "end": "1592010"
  },
  {
    "start": "1589000",
    "end": "1725000"
  },
  {
    "text": "beginnings some of people in the room here have",
    "start": "1592010",
    "end": "1598850"
  },
  {
    "text": "been been with it essentially you write it a system fairly traditionally the",
    "start": "1598850",
    "end": "1606590"
  },
  {
    "text": "client comes in he makes a request you register it in a database you send a",
    "start": "1606590",
    "end": "1612220"
  },
  {
    "text": "message back to to the end user and now we need to get this out to the system",
    "start": "1612220",
    "end": "1619580"
  },
  {
    "text": "whether it be a risk system or some sort",
    "start": "1619580",
    "end": "1624590"
  },
  {
    "text": "and then it needs to get out end users so back office there might be multiple so now you have a guy here essentially",
    "start": "1624590",
    "end": "1631970"
  },
  {
    "text": "pulling the database for new things and pushing it out and this polling",
    "start": "1631970",
    "end": "1638000"
  },
  {
    "text": "obviously introduces a latency and wait time and then if the more layers you",
    "start": "1638000",
    "end": "1644870"
  },
  {
    "text": "have here the more polling you have so here you can say there might be another round of polling and if you compound",
    "start": "1644870",
    "end": "1650330"
  },
  {
    "text": "that up from the time something is done here until someone can react to it a",
    "start": "1650330",
    "end": "1656059"
  },
  {
    "text": "system or human a long time can have a post and actually the market might have",
    "start": "1656059",
    "end": "1661309"
  },
  {
    "text": "moved against you or the information is too old the database here becomes a",
    "start": "1661309",
    "end": "1669080"
  },
  {
    "text": "bottleneck you can obviously short a database that's also complex but this",
    "start": "1669080",
    "end": "1674659"
  },
  {
    "text": "little spindle here again it's not a spindle anymore but the disk where you",
    "start": "1674659",
    "end": "1680389"
  },
  {
    "text": "keep the transaction log on will will become your scaling point and this",
    "start": "1680389",
    "end": "1687639"
  },
  {
    "text": "polling there is only so much you can get that down to and and and the more",
    "start": "1687639",
    "end": "1694610"
  },
  {
    "text": "you squeeze it the less throughput you get in this end so you need to give key",
    "start": "1694610",
    "end": "1701690"
  },
  {
    "text": "you need to give the writer some chance to get in for the readers so so you",
    "start": "1701690",
    "end": "1711760"
  },
  {
    "text": "throughput here and latencies are essentially capped by this lump here in",
    "start": "1711760",
    "end": "1717230"
  },
  {
    "text": "in in in the middle yes I've been",
    "start": "1717230",
    "end": "1723590"
  },
  {
    "text": "through this so instead what we do is we use",
    "start": "1723590",
    "end": "1730409"
  },
  {
    "start": "1725000",
    "end": "2025000"
  },
  {
    "text": "something called as a a synchronous transaction registrations and essentially try to abolish any say no I",
    "start": "1730409",
    "end": "1740909"
  },
  {
    "text": "oh but any database IO in the in the transaction part at least and we try to",
    "start": "1740909",
    "end": "1746580"
  },
  {
    "text": "avoid even even Network IO to do to the",
    "start": "1746580",
    "end": "1752269"
  },
  {
    "text": "extent possible I mean that's always a balance but essentially in this case the",
    "start": "1752269",
    "end": "1760500"
  },
  {
    "text": "client makes an order or trade request it hits some front end open API or whatever that generates a new trade",
    "start": "1760500",
    "end": "1767490"
  },
  {
    "text": "message that goes that is essentially a single write on the network in an",
    "start": "1767490",
    "end": "1772740"
  },
  {
    "text": "optimized binary format if someone is",
    "start": "1772740",
    "end": "1779070"
  },
  {
    "text": "having a birthday congratulations Darren and so it's a single write a",
    "start": "1779070",
    "end": "1791490"
  },
  {
    "text": "single network write on a socket and then all downstream services here",
    "start": "1791490",
    "end": "1798389"
  },
  {
    "text": "needing that reads that message and consumes it and does whatever it wants",
    "start": "1798389",
    "end": "1803519"
  },
  {
    "text": "with it so this is fairly close to what",
    "start": "1803519",
    "end": "1810210"
  },
  {
    "text": "you would see events or seeing or whatever you call it and and they take",
    "start": "1810210",
    "end": "1818580"
  },
  {
    "text": "this message put it into their a internal in their internal structure and",
    "start": "1818580",
    "end": "1824009"
  },
  {
    "text": "start reacting to it or process it or do whatever and in this case so essentially",
    "start": "1824009",
    "end": "1834840"
  },
  {
    "text": "the transaction is fully verified and accepted very early on here and essentially when this message goes out",
    "start": "1834840",
    "end": "1841440"
  },
  {
    "text": "it's a fact it has happened now it's",
    "start": "1841440",
    "end": "1846929"
  },
  {
    "text": "just for the downstream system to consume it and we have confirmed the",
    "start": "1846929",
    "end": "1854309"
  },
  {
    "text": "client actually [Music] so the transaction message is actually",
    "start": "1854309",
    "end": "1862310"
  },
  {
    "text": "persisted in memory in two in two of at",
    "start": "1862310",
    "end": "1868110"
  },
  {
    "text": "least two of three machines if so we can replay and and and and apply some",
    "start": "1868110",
    "end": "1874260"
  },
  {
    "text": "resilience this is essentially a transaction log or buffer of whatever",
    "start": "1874260",
    "end": "1882750"
  },
  {
    "text": "has transpired during a last week or so",
    "start": "1882750",
    "end": "1888060"
  },
  {
    "text": "so any service here can be down and do a",
    "start": "1888060",
    "end": "1893850"
  },
  {
    "text": "replay off of what's happening and then come up to speed so this means that that",
    "start": "1893850",
    "end": "1905040"
  },
  {
    "text": "these guys that were in in the previous pictures they were kind of two layers down with two rounds of polling now",
    "start": "1905040",
    "end": "1913800"
  },
  {
    "text": "essentially get the message immediately and can reactivate me immediately and more often than they're not this person",
    "start": "1913800",
    "end": "1921750"
  },
  {
    "text": "here actually reacting to it is not a person but a computer or an algorithm",
    "start": "1921750",
    "end": "1927120"
  },
  {
    "text": "you could argue that if it was a human it it didn't matter that much I think",
    "start": "1927120",
    "end": "1934350"
  },
  {
    "text": "humans start seeing delays of maybe",
    "start": "1934350",
    "end": "1939500"
  },
  {
    "text": "hundred to 200 milliseconds if they're consistent but yes",
    "start": "1939500",
    "end": "1948380"
  },
  {
    "text": "no the client sends in a request to request is processed in the front-end",
    "start": "1954710",
    "end": "1962909"
  },
  {
    "text": "and and and and and accept it so you verify basically everything using",
    "start": "1962909",
    "end": "1970080"
  },
  {
    "text": "in process caches and and whatnot all the state is there to be able to fully you know validate and verify the",
    "start": "1970080",
    "end": "1977100"
  },
  {
    "text": "transaction with really with the only acceptance of the actual pre-trade check",
    "start": "1977100",
    "end": "1983850"
  },
  {
    "text": "which which actually or the risk check which which is a which is a single",
    "start": "1983850",
    "end": "1989389"
  },
  {
    "text": "single round-trip that's still there you could remove that as well but that is a",
    "start": "1989389",
    "end": "1996389"
  },
  {
    "text": "bit more complex and then the message is now now the transaction has happened but",
    "start": "1996389",
    "end": "2005149"
  },
  {
    "text": "we try to minimize process yawns IO I",
    "start": "2005149",
    "end": "2010220"
  },
  {
    "text": "mean that even goes for simple logging",
    "start": "2010220",
    "end": "2016149"
  },
  {
    "text": "actually which is you've done asynchronously in in in here as well in",
    "start": "2016149",
    "end": "2022309"
  },
  {
    "text": "to the extent it's done and then the",
    "start": "2022309",
    "end": "2028519"
  },
  {
    "text": "transaction is picked up processed and aggregate is is sent out and then you",
    "start": "2028519",
    "end": "2035269"
  },
  {
    "text": "have the critical piece here of actually you know getting the transaction to rest is essentially you have a set of trade",
    "start": "2035269",
    "end": "2042049"
  },
  {
    "text": "ready station services which asynchronously writes the transaction to",
    "start": "2042049",
    "end": "2049700"
  },
  {
    "text": "the database yes",
    "start": "2049700",
    "end": "2053618"
  },
  {
    "text": "the entire state is actually it's or the entire state or state changes is kept in",
    "start": "2062419",
    "end": "2069210"
  },
  {
    "text": "this message so this message is it's a message so actually when this message",
    "start": "2069210",
    "end": "2075658"
  },
  {
    "text": "hits the database it will update multiple tables from you know your",
    "start": "2075659",
    "end": "2082589"
  },
  {
    "text": "orders tables to your audit logs to whatever so so that's also key these",
    "start": "2082589",
    "end": "2089279"
  },
  {
    "text": "these messages they are you know real business level events they carry a fair",
    "start": "2089279",
    "end": "2095249"
  },
  {
    "text": "amount of context and data with them",
    "start": "2095249",
    "end": "2101089"
  },
  {
    "text": "yeah yeah the messages here from it from",
    "start": "2101089",
    "end": "2113160"
  },
  {
    "text": "a single source they come in order so if you if you followed from the beginning",
    "start": "2113160",
    "end": "2119400"
  },
  {
    "text": "we have sticky sessions so each request will end up in the same server so the",
    "start": "2119400",
    "end": "2127230"
  },
  {
    "text": "message is from a single se single session or single user will actually be",
    "start": "2127230",
    "end": "2132299"
  },
  {
    "text": "processed in in order broadly so then which means that this guy actually knows",
    "start": "2132299",
    "end": "2139140"
  },
  {
    "text": "that even if this message hasn't hit the database it knows that I've sent this",
    "start": "2139140",
    "end": "2145920"
  },
  {
    "text": "message and incorporated it in whatever state he has up there so which means",
    "start": "2145920",
    "end": "2152309"
  },
  {
    "text": "when the next message comes that is taken into account and the same goes for",
    "start": "2152309",
    "end": "2158849"
  },
  {
    "text": "these guys down here they will see the messages from from a single session in",
    "start": "2158849",
    "end": "2166109"
  },
  {
    "text": "in order lo and behold there are raised",
    "start": "2166109",
    "end": "2171359"
  },
  {
    "text": "conditions here so because that guarantee essentially only holds from",
    "start": "2171359",
    "end": "2177900"
  },
  {
    "text": "for a single source so so there are some",
    "start": "2177900",
    "end": "2184289"
  },
  {
    "text": "raised conditions you need to solve in this a scenario as well which is usually if",
    "start": "2184289",
    "end": "2191290"
  },
  {
    "text": "you look at the problem something you can do because the messages or the",
    "start": "2191290",
    "end": "2198690"
  },
  {
    "text": "entities usually either partially owned by parts of the system or there is one",
    "start": "2198690",
    "end": "2205390"
  },
  {
    "text": "owner right now of that entity actually",
    "start": "2205390",
    "end": "2210640"
  },
  {
    "text": "the one that sends out the messages all you need to serialize some some stuff",
    "start": "2210640",
    "end": "2219760"
  },
  {
    "text": "and good questions and I like that you speak up because inter interaction is",
    "start": "2219760",
    "end": "2226330"
  },
  {
    "text": "good yes the actual transaction happens",
    "start": "2226330",
    "end": "2235810"
  },
  {
    "text": "when we have accept accepted here the rest of the system is essentially",
    "start": "2235810",
    "end": "2242160"
  },
  {
    "text": "eventually or casually consistent I know once I publish this message that it will",
    "start": "2242160",
    "end": "2249550"
  },
  {
    "text": "hit the dancer it will hit the database it will hit their modern server my risk",
    "start": "2249550",
    "end": "2255940"
  },
  {
    "text": "system in in in the correct order and and these guys they're essentially as",
    "start": "2255940",
    "end": "2262480"
  },
  {
    "text": "keeping an in-memory state of of your of",
    "start": "2262480",
    "end": "2267930"
  },
  {
    "text": "what's in the database in in in in",
    "start": "2267930",
    "end": "2273250"
  },
  {
    "text": "essence which means that that these guys down here they have any memory state so",
    "start": "2273250",
    "end": "2280270"
  },
  {
    "text": "they don't go to the database either normally because they essentially yes",
    "start": "2280270",
    "end": "2286180"
  },
  {
    "text": "that's why I have this snapshot service here so they start up they read the",
    "start": "2286180",
    "end": "2291190"
  },
  {
    "text": "snapshot and then they join this message box and say they look at this map shot",
    "start": "2291190",
    "end": "2296320"
  },
  {
    "text": "and see to some sequence numbers there and then they joined this message bus and say the snapshot I've Gordon has the",
    "start": "2296320",
    "end": "2304540"
  },
  {
    "text": "sequence number please replay from that that gets replayed you incorporate that",
    "start": "2304540",
    "end": "2311590"
  },
  {
    "text": "into your state now you're online and new messages will come in and so they",
    "start": "2311590",
    "end": "2318490"
  },
  {
    "text": "don't touch the database either in a in a running State they essentially just",
    "start": "2318490",
    "end": "2325600"
  },
  {
    "text": "use the database used through the snapshot service to prime prime their",
    "start": "2325600",
    "end": "2333670"
  },
  {
    "text": "initial state and then get a replay and be online with the current state of the",
    "start": "2333670",
    "end": "2342340"
  },
  {
    "text": "system yes you can that's a good Anna",
    "start": "2342340",
    "end": "2353050"
  },
  {
    "text": "analogy and actually and yes could you",
    "start": "2353050",
    "end": "2384760"
  },
  {
    "text": "could you repeat the question the state",
    "start": "2384760",
    "end": "2393880"
  },
  {
    "text": "in the message was consistent I'm not",
    "start": "2393880",
    "end": "2398950"
  },
  {
    "text": "sure I fully follow the message process it's essentially just a transport layer",
    "start": "2398950",
    "end": "2407620"
  },
  {
    "text": "something built on top of multicast so",
    "start": "2407620",
    "end": "2413940"
  },
  {
    "text": "not fully because they did the message bus essentially it's just you know",
    "start": "2415620",
    "end": "2422440"
  },
  {
    "text": "transporting bytes the state is kept there is a buffer here of",
    "start": "2422440",
    "end": "2429700"
  },
  {
    "text": "the recent state changes these guys have",
    "start": "2429700",
    "end": "2435070"
  },
  {
    "text": "their state in in RAM and these this essentially has to have the persistent",
    "start": "2435070",
    "end": "2441580"
  },
  {
    "text": "state of the system yes",
    "start": "2441580",
    "end": "2448830"
  },
  {
    "text": "yes yes that's why I say the whole",
    "start": "2449279",
    "end": "2456999"
  },
  {
    "start": "2454000",
    "end": "2506000"
  },
  {
    "text": "system is built around casual and eventual consistency but casual and",
    "start": "2456999",
    "end": "2462339"
  },
  {
    "text": "eventual here is is is sub-millisecond which means it's it's it's very unlikely",
    "start": "2462339",
    "end": "2471400"
  },
  {
    "text": "that you and and and usually also one",
    "start": "2471400",
    "end": "2479079"
  },
  {
    "text": "guy it will hit the same note typically",
    "start": "2479079",
    "end": "2484319"
  },
  {
    "text": "but one service speaking to this guy will typically hit the same node so yeah",
    "start": "2484319",
    "end": "2499499"
  },
  {
    "text": "they are their position most of them are actually in copenhagen there is also",
    "start": "2506910",
    "end": "2514839"
  },
  {
    "text": "service in in in in closer proximity to the marketing in london for example so",
    "start": "2514839",
    "end": "2522440"
  },
  {
    "text": "[Music]",
    "start": "2522440",
    "end": "2525578"
  },
  {
    "start": "2530000",
    "end": "2609000"
  },
  {
    "text": "yeah the transport ladies is obviously something you need to take into account",
    "start": "2530110",
    "end": "2535700"
  },
  {
    "text": "as well when when you do all this but I",
    "start": "2535700",
    "end": "2542030"
  },
  {
    "text": "don't think that's the largest latency SP I mean it's going the lot the last",
    "start": "2542030",
    "end": "2550700"
  },
  {
    "text": "mile out to the end-user you know if I have a client that that is a sheep",
    "start": "2550700",
    "end": "2556250"
  },
  {
    "text": "farmer in New Zealand wanting to hedge for his sheeps or whatever he's far away",
    "start": "2556250",
    "end": "2567740"
  },
  {
    "text": "from from from a lot of it but this is",
    "start": "2567740",
    "end": "2572840"
  },
  {
    "text": "mostly also to protect to also also",
    "start": "2572840",
    "end": "2578960"
  },
  {
    "text": "protection for for us not to take too much risk so we're actually good with",
    "start": "2578960",
    "end": "2587040"
  },
  {
    "text": "[Music] measuring the internal latency here but",
    "start": "2587040",
    "end": "2594290"
  },
  {
    "text": "the clients it's also about the clients because he might get reactions or he might not get the prices so on the",
    "start": "2594290",
    "end": "2600710"
  },
  {
    "text": "screen and so forth so if that last mile also becomes too long then it's it's a",
    "start": "2600710",
    "end": "2607190"
  },
  {
    "text": "problem yeah yeah in the end did the",
    "start": "2607190",
    "end": "2614750"
  },
  {
    "text": "kind of things we do it's not this is not high frequency it's not high frequency algo training we do some",
    "start": "2614750",
    "end": "2622700"
  },
  {
    "text": "algorithmic trading but I wouldn't label it as or and we let some of our clients",
    "start": "2622700",
    "end": "2629510"
  },
  {
    "text": "do as well but I wouldn't label it as high frequency that's why consciously",
    "start": "2629510",
    "end": "2635570"
  },
  {
    "text": "here talked about milliseconds and not microseconds or nanoseconds there are",
    "start": "2635570",
    "end": "2644510"
  },
  {
    "text": "some parts of the systems where we talk microseconds but that's usually within a",
    "start": "2644510",
    "end": "2650210"
  },
  {
    "text": "box in London somewhere",
    "start": "2650210",
    "end": "2656470"
  },
  {
    "text": "but that's very small Micro Micro workflows in this large scheme of things",
    "start": "2657730",
    "end": "2669369"
  },
  {
    "start": "2671000",
    "end": "2696000"
  },
  {
    "text": "so scalable resilient we can have a very",
    "start": "2671319",
    "end": "2677240"
  },
  {
    "text": "high throughput low latency and and be purely event-driven using this approach",
    "start": "2677240",
    "end": "2683030"
  },
  {
    "text": "we have talked about some of the flip sides like yes you have some race",
    "start": "2683030",
    "end": "2688549"
  },
  {
    "text": "conditions you need to handle in some cases that can be a mind-boggling and",
    "start": "2688549",
    "end": "2697000"
  },
  {
    "start": "2696000",
    "end": "2763000"
  },
  {
    "text": "but that's also inherent in some in some way with with the market that's like on",
    "start": "2697000",
    "end": "2705829"
  },
  {
    "text": "the micro level if I order something you know from from Amazon I cannot cancel",
    "start": "2705829",
    "end": "2712039"
  },
  {
    "text": "that order because it might actually be on the way to me I might be able to",
    "start": "2712039",
    "end": "2718609"
  },
  {
    "text": "cancel it if they haven't sent start sending it to me and this happens here at the microsecond level so you have",
    "start": "2718609",
    "end": "2724549"
  },
  {
    "text": "some inherent inherent race conditions yes in there in the business domain but",
    "start": "2724549",
    "end": "2733940"
  },
  {
    "text": "it's on a different scale than when you order something from Amazon but there",
    "start": "2733940",
    "end": "2739190"
  },
  {
    "text": "might be a trade actually on the way on the wire to you when you want to cancel a transaction that will obviously get",
    "start": "2739190",
    "end": "2746359"
  },
  {
    "text": "reacted that canceled transaction and we",
    "start": "2746359",
    "end": "2751760"
  },
  {
    "text": "might even say we have accepted your cancel request we're we're forwarding it on and then someone says sorry we",
    "start": "2751760",
    "end": "2758930"
  },
  {
    "text": "couldn't cancel so there is a bit of a",
    "start": "2758930",
    "end": "2767569"
  },
  {
    "start": "2763000",
    "end": "2912000"
  },
  {
    "text": "final twist here I want to go through with the and such a asynchronous",
    "start": "2767569",
    "end": "2773029"
  },
  {
    "text": "transaction registration and and that it's it's it's fully active which means",
    "start": "2773029",
    "end": "2779180"
  },
  {
    "text": "essentially you have two failures owns or server rooms or data centers where",
    "start": "2779180",
    "end": "2786319"
  },
  {
    "text": "you have front ends receiving X setting transactions sending them out on",
    "start": "2786319",
    "end": "2791490"
  },
  {
    "text": "this message path which is spread over both of them then you have the transaction logger which essentially",
    "start": "2791490",
    "end": "2799830"
  },
  {
    "text": "receives the transaction and one of the guys actually write the transaction to",
    "start": "2799830",
    "end": "2804990"
  },
  {
    "text": "the database in then it gets shipped to the mirror database and get successful",
    "start": "2804990",
    "end": "2810630"
  },
  {
    "text": "and the other guy essentially so these messages also here needs to be Edom",
    "start": "2810630",
    "end": "2817320"
  },
  {
    "text": "potent or so writing two of them shouldn't should still leave the",
    "start": "2817320",
    "end": "2823850"
  },
  {
    "text": "database in the same state which is very easy in this case because you",
    "start": "2823850",
    "end": "2829530"
  },
  {
    "text": "essentially does have a unique ID on each message and if it's been processed you say this means they're very easily",
    "start": "2829530",
    "end": "2840210"
  },
  {
    "text": "there is no there's no failover there is",
    "start": "2840210",
    "end": "2847830"
  },
  {
    "text": "no everything is running all the time I can add multiple of these I can restart",
    "start": "2847830",
    "end": "2854550"
  },
  {
    "text": "these guys without having zero impact which is a very nice property because",
    "start": "2854550",
    "end": "2860640"
  },
  {
    "text": "always when you have this failover of of any kind there is always a chance that",
    "start": "2860640",
    "end": "2868109"
  },
  {
    "text": "it might not work when you need it to work so this is actually exercising the",
    "start": "2868109",
    "end": "2876450"
  },
  {
    "text": "same code path all the time all the day every day obviously we're",
    "start": "2876450",
    "end": "2882510"
  },
  {
    "text": "hitting this guy quite a lot but in the end we have also said that we're not so",
    "start": "2882510",
    "end": "2892320"
  },
  {
    "text": "dependent on the throughput here that that you tend to be so we are happy to",
    "start": "2892320",
    "end": "2900150"
  },
  {
    "text": "take that hit for the simplicity so to say",
    "start": "2900150",
    "end": "2906980"
  },
  {
    "start": "2912000",
    "end": "2947000"
  },
  {
    "text": "yes yes Terry I mean fail theory it's a it's a bold word but in in in essence if",
    "start": "2912609",
    "end": "2920930"
  },
  {
    "text": "this guy has won the race you essentially get a message back saying",
    "start": "2920930",
    "end": "2927740"
  },
  {
    "text": "message was already there but if if the connectivity to the database is down and",
    "start": "2927740",
    "end": "2933650"
  },
  {
    "text": "none of these guys can get to the database those kinds of failures stay at sense they retry it's a good point right",
    "start": "2933650",
    "end": "2943150"
  },
  {
    "start": "2947000",
    "end": "2992000"
  },
  {
    "text": "now we're using that's a commercial product there are several products out there we're using a informatica lbm",
    "start": "2947920",
    "end": "2956810"
  },
  {
    "text": "format 29 West TIBCO has something iBM has something there is also open source",
    "start": "2956810",
    "end": "2962930"
  },
  {
    "text": "one called Aaron right now out there that you can use to get these very high",
    "start": "2962930",
    "end": "2968619"
  },
  {
    "text": "low latency predictable latency speeds and they're also I mean more 0 mq and",
    "start": "2968619",
    "end": "2977839"
  },
  {
    "text": "other stuff that you can use to implement this pattern but you might not",
    "start": "2977839",
    "end": "2983660"
  },
  {
    "text": "be able to scale it to distribute 500-thousand price updates per second",
    "start": "2983660",
    "end": "2988670"
  },
  {
    "text": "but that might not be your use case yes that's 500,000 price updates per second",
    "start": "2988670",
    "end": "2996290"
  },
  {
    "start": "2992000",
    "end": "3017000"
  },
  {
    "text": "that's what we essentially pump out through the system and and and reactive",
    "start": "2996290",
    "end": "3003390"
  },
  {
    "text": "so and they are essentially multicast it",
    "start": "3003599",
    "end": "3009880"
  },
  {
    "text": "out over on the network yes I think",
    "start": "3009880",
    "end": "3019750"
  },
  {
    "start": "3017000",
    "end": "3041000"
  },
  {
    "text": "we've gone through this so here you have",
    "start": "3019750",
    "end": "3026680"
  },
  {
    "text": "the transaction fails gracefully there are two levels of failure one is graceful and one is an graceful and on",
    "start": "3026680",
    "end": "3033310"
  },
  {
    "text": "an ungrateful failure you retry",
    "start": "3033310",
    "end": "3037290"
  },
  {
    "start": "3041000",
    "end": "3072000"
  },
  {
    "text": "so and then on the on the on the",
    "start": "3041210",
    "end": "3047160"
  },
  {
    "text": "database layer we use traditional mirroring or high-availability that's available in you know a lot of",
    "start": "3047160",
    "end": "3055160"
  },
  {
    "text": "sequel or oracle or my sequel or in a no",
    "start": "3055160",
    "end": "3061050"
  },
  {
    "text": "sequel database there are different ways to to achieve this but the same",
    "start": "3061050",
    "end": "3068730"
  },
  {
    "text": "principles can be applied that's why I've also chosen to keep this",
    "start": "3068730",
    "end": "3075540"
  },
  {
    "start": "3072000",
    "end": "3133000"
  },
  {
    "text": "fairly technology agnostic and free from",
    "start": "3075540",
    "end": "3081240"
  },
  {
    "text": "code because this is actually generally it just depends on what what are your",
    "start": "3081240",
    "end": "3087150"
  },
  {
    "text": "business requirements you can design a system like this and get some of the",
    "start": "3087150",
    "end": "3092220"
  },
  {
    "text": "benefits by applying different technologies on the different layers depending on on on we might have some",
    "start": "3092220",
    "end": "3100560"
  },
  {
    "text": "very extreme requirements but there are the use cases where you actually can do similar things and and achieve some of",
    "start": "3100560",
    "end": "3109530"
  },
  {
    "text": "the benefits and you might not be as hardcore with your serialization",
    "start": "3109530",
    "end": "3116520"
  },
  {
    "text": "deserialization you might actually also do some more i/o in there in a in a path",
    "start": "3116520",
    "end": "3123810"
  },
  {
    "text": "but in general it's applicable as a design eye level design pattern so it's",
    "start": "3123810",
    "end": "3134100"
  },
  {
    "start": "3133000",
    "end": "3186000"
  },
  {
    "text": "not it's not it's not all about architecture and technology and and and",
    "start": "3134100",
    "end": "3139290"
  },
  {
    "text": "people or architecture and technology and patterns and so forth",
    "start": "3139290",
    "end": "3144780"
  },
  {
    "text": "it's also the people try to hire best cultivate the performance and winning",
    "start": "3144780",
    "end": "3151980"
  },
  {
    "text": "culture cultivate engineering mindset it's very I mean because yes we're",
    "start": "3151980",
    "end": "3161490"
  },
  {
    "text": "solving a business problem here but maybe not in the in the most",
    "start": "3161490",
    "end": "3167490"
  },
  {
    "text": "straightforward way because we have some extreme requirements which means you",
    "start": "3167490",
    "end": "3172770"
  },
  {
    "text": "need to have engineering culture not yes I'm going to take the shortest path to solve this problem to",
    "start": "3172770",
    "end": "3179130"
  },
  {
    "text": "the business kind of way so supporting management through some process tights",
    "start": "3179130",
    "end": "3188970"
  },
  {
    "start": "3186000",
    "end": "3270000"
  },
  {
    "text": "changed in relief management processes testing quality processes automated",
    "start": "3188970",
    "end": "3197249"
  },
  {
    "text": "testing and so forth and when she hits production you need to have a incident",
    "start": "3197249",
    "end": "3204180"
  },
  {
    "text": "management process in place that allows you to respond very quickly when there",
    "start": "3204180",
    "end": "3210720"
  },
  {
    "text": "are issues and we get worried I mean you can say yeah we're fully resilient and",
    "start": "3210720",
    "end": "3217259"
  },
  {
    "text": "redundant but if one of the nodes is down that's still cause for an incident",
    "start": "3217259",
    "end": "3222859"
  },
  {
    "text": "because we don't want to run with a single point of failure that goes for",
    "start": "3222859",
    "end": "3228690"
  },
  {
    "text": "any layer in the stack so it's not just relaxing when yeah we still have a",
    "start": "3228690",
    "end": "3236670"
  },
  {
    "text": "failover so and because you're when when",
    "start": "3236670",
    "end": "3242430"
  },
  {
    "text": "that guy is down you're you're essentially running or not as you",
    "start": "3242430",
    "end": "3249779"
  },
  {
    "text": "intended it with reduced resilience that",
    "start": "3249779",
    "end": "3255390"
  },
  {
    "text": "goes all the way through the stack from from Network lines to hardware to",
    "start": "3255390",
    "end": "3260549"
  },
  {
    "text": "applications monitoring it goes without",
    "start": "3260549",
    "end": "3265650"
  },
  {
    "text": "saying real-time and reactive cooperate",
    "start": "3265650",
    "end": "3271319"
  },
  {
    "start": "3270000",
    "end": "3314000"
  },
  {
    "text": "closely with the gate business agile mythology hamper complexity I mean this",
    "start": "3271319",
    "end": "3278130"
  },
  {
    "text": "is complex but there is still some",
    "start": "3278130",
    "end": "3283700"
  },
  {
    "text": "simplicity in in the design and and and if you try to stick to some few core",
    "start": "3283700",
    "end": "3291569"
  },
  {
    "text": "principles then you essentially yes it's complex but you have some very high-level constructs that you apply in",
    "start": "3291569",
    "end": "3298980"
  },
  {
    "text": "and and reuse to solve some of the challenges you have throughout",
    "start": "3298980",
    "end": "3307400"
  },
  {
    "start": "3314000",
    "end": "3457000"
  },
  {
    "text": "so some learning points well if you are designing an architecture that needs",
    "start": "3314390",
    "end": "3320970"
  },
  {
    "text": "facility and scalability monitoring that needs to built-in and taking care from",
    "start": "3320970",
    "end": "3327540"
  },
  {
    "text": "the start because it's fairly complex and it's huge estate there is also a I",
    "start": "3327540",
    "end": "3335490"
  },
  {
    "text": "don't know if you have listened to Martin Thomson but there is a and and he",
    "start": "3335490",
    "end": "3344880"
  },
  {
    "text": "speaks about mechanical sympathy that's that's really optimization and and",
    "start": "3344880",
    "end": "3349980"
  },
  {
    "text": "understanding things how things hang hang together from from the CPU down when you optimized code but that also",
    "start": "3349980",
    "end": "3357030"
  },
  {
    "text": "goes on a macro level so which means you actually need synchronize things so it's",
    "start": "3357030",
    "end": "3363480"
  },
  {
    "text": "optimal all the way from the way you have your network firewalls the way you",
    "start": "3363480",
    "end": "3369420"
  },
  {
    "text": "divide multicast groups down to your application how your applications is",
    "start": "3369420",
    "end": "3375240"
  },
  {
    "text": "structured and all those strings actually need to tie together because if",
    "start": "3375240",
    "end": "3381780"
  },
  {
    "text": "you at one layer introduce something that breaks that everything need go to the single firewall or you design your",
    "start": "3381780",
    "end": "3393940"
  },
  {
    "text": "topic space in such a way that all messages even if they are on an application-level nicely divided into",
    "start": "3393940",
    "end": "3401200"
  },
  {
    "text": "topics they will actually hit your hit your CPU on a single core and need to be",
    "start": "3401200",
    "end": "3409750"
  },
  {
    "text": "processed and then discarded so they actually they go into the tadhana",
    "start": "3409750",
    "end": "3414880"
  },
  {
    "text": "machine they go into your network or they go up to the operating system they get delivered to your application and",
    "start": "3414880",
    "end": "3421630"
  },
  {
    "text": "someone here says I'm not going to use it and if you do that and and and and a",
    "start": "3421630",
    "end": "3428349"
  },
  {
    "text": "logical design might be very beautiful because you I'm just subscribing to",
    "start": "3428349",
    "end": "3433809"
  },
  {
    "text": "updates for Apple here but in the background you're getting hit by five hundred thousand messages per second so",
    "start": "3433809",
    "end": "3441250"
  },
  {
    "text": "it needs to hang together all the way not yet the logical design actually",
    "start": "3441250",
    "end": "3448150"
  },
  {
    "text": "because this goes down to physical design as well and so forth so do",
    "start": "3448150",
    "end": "3458829"
  },
  {
    "start": "3457000",
    "end": "3489000"
  },
  {
    "text": "gradual rollout provide rollback and backwards compatibility to decrease operational risk when you do large",
    "start": "3458829",
    "end": "3466079"
  },
  {
    "text": "architectural changes comes as a cost test and verify very thoroughly and then",
    "start": "3466079",
    "end": "3478049"
  },
  {
    "text": "last but not least this might happen to you while you're trying to do this so be",
    "start": "3478049",
    "end": "3485500"
  },
  {
    "text": "careful and I think that's it for me if",
    "start": "3485500",
    "end": "3491049"
  },
  {
    "start": "3489000",
    "end": "3520000"
  },
  {
    "text": "you have any further questions",
    "start": "3491049",
    "end": "3494609"
  },
  {
    "text": "please in yes yes it's it's holding up I",
    "start": "3498200",
    "end": "3513540"
  },
  {
    "text": "can tell you two to two best days we've",
    "start": "3513540",
    "end": "3523650"
  },
  {
    "start": "3520000",
    "end": "3600000"
  },
  {
    "text": "had from a from a from from both I I would say a business perspective and and",
    "start": "3523650",
    "end": "3531440"
  },
  {
    "text": "the technology perspective was actually",
    "start": "3531440",
    "end": "3537349"
  },
  {
    "text": "the Trump election and brexit days where the system actually hold up very good",
    "start": "3537349",
    "end": "3544170"
  },
  {
    "text": "both technically and and and for our clients and these were record days by",
    "start": "3544170",
    "end": "3549630"
  },
  {
    "text": "all by all standards actually I think we",
    "start": "3549630",
    "end": "3556290"
  },
  {
    "text": "have seen in in terms of number of transactions and throughput of the top",
    "start": "3556290",
    "end": "3562910"
  },
  {
    "text": "of the top 10 days eight of them has been the last years the last 365 days",
    "start": "3562910",
    "end": "3570569"
  },
  {
    "text": "and and we have maintained response times and up times and and and kept our",
    "start": "3570569",
    "end": "3577319"
  },
  {
    "text": "availability at a very high level during those so today continually we're",
    "start": "3577319",
    "end": "3590700"
  },
  {
    "text": "continually optimizing and redoing things in the in in the small the",
    "start": "3590700",
    "end": "3599910"
  },
  {
    "text": "fundamental architecture is holding up what we continually tweak and optimize and find things and from a you know in",
    "start": "3599910",
    "end": "3609450"
  },
  {
    "text": "efficiency standpoint that that we need to do but usually the problems are not",
    "start": "3609450",
    "end": "3620550"
  },
  {
    "text": "you know macro structural they are local more more local than then when you have",
    "start": "3620550",
    "end": "3629070"
  },
  {
    "text": "and not a kind of design where where where some of the problems you face are",
    "start": "3629070",
    "end": "3635400"
  },
  {
    "text": "more very structural on the macro level I mean there might be structural issues",
    "start": "3635400",
    "end": "3641220"
  },
  {
    "text": "within the component as well obviously",
    "start": "3641220",
    "end": "3644750"
  },
  {
    "text": "we it's it's a mix actually the most",
    "start": "3654650",
    "end": "3660990"
  },
  {
    "text": "parts of the state is released weekly on Saturdays which is very good for being a",
    "start": "3660990",
    "end": "3668310"
  },
  {
    "text": "regulated bank and we do a lot of releases and a lot of changes some of the components you see there can",
    "start": "3668310",
    "end": "3674850"
  },
  {
    "text": "actually be released where we have the best you know resiliency and so forth",
    "start": "3674850",
    "end": "3680910"
  },
  {
    "text": "they can be released intraday as well we",
    "start": "3680910",
    "end": "3686630"
  },
  {
    "text": "don't we typically don't do it unless we don't really have to but if we have to",
    "start": "3686630",
    "end": "3693630"
  },
  {
    "text": "we do that and we can do that do rolling upgrades without is significantly",
    "start": "3693630",
    "end": "3700190"
  },
  {
    "text": "interrupting the business on on on on most of the layers",
    "start": "3700190",
    "end": "3707660"
  },
  {
    "text": "yes yeah but but that's why I say",
    "start": "3716579",
    "end": "3723880"
  },
  {
    "text": "feature flags continuous delivery be",
    "start": "3723880",
    "end": "3730749"
  },
  {
    "text": "backwards compatible handle missing fields gracefully all that needs to be",
    "start": "3730749",
    "end": "3737859"
  },
  {
    "text": "in place if you're going to run those amount of components on on that scale so",
    "start": "3737859",
    "end": "3744039"
  },
  {
    "text": "you can roll back roll forward with with some certainty so it's not we very",
    "start": "3744039",
    "end": "3753999"
  },
  {
    "text": "seldom do Big Bang forcing changes where",
    "start": "3753999",
    "end": "3761229"
  },
  {
    "text": "we need to you know push something out in the weekend over everything that's",
    "start": "3761229",
    "end": "3768579"
  },
  {
    "text": "guess not or it's feasible but it's not it's too risky",
    "start": "3768579",
    "end": "3775359"
  },
  {
    "text": "and also rolling it back is very risky so that's more than on a on a component",
    "start": "3775359",
    "end": "3781979"
  },
  {
    "text": "service level",
    "start": "3781979",
    "end": "3785430"
  },
  {
    "text": "that in this weekly release cycle thing",
    "start": "3798789",
    "end": "3808720"
  },
  {
    "text": "there is actually a release test environment where we do both automated",
    "start": "3808809",
    "end": "3816230"
  },
  {
    "text": "and semi-automated and manual tests on what is going to be deployed in the",
    "start": "3816230",
    "end": "3823400"
  },
  {
    "text": "weekend where you so a lot of their",
    "start": "3823400",
    "end": "3828940"
  },
  {
    "text": "testing is done you know both using unit testing and some integration testing in",
    "start": "3828940",
    "end": "3835039"
  },
  {
    "text": "your continuous deployment pipeline but that's obviously for your component or",
    "start": "3835039",
    "end": "3840140"
  },
  {
    "text": "for you module so a lot of things happen there before you decide but then there is a a track for for doing a full more",
    "start": "3840140",
    "end": "3850490"
  },
  {
    "text": "full-scale release test that's less than",
    "start": "3850490",
    "end": "3857869"
  },
  {
    "text": "a week so actually the cutoff time for getting someone something in to the next",
    "start": "3857869",
    "end": "3866720"
  },
  {
    "text": "weekend's release I think it's Thursdays so then there is some position and then there's",
    "start": "3866720",
    "end": "3873500"
  },
  {
    "text": "baselining on off of that environment and then there's tests going on and then there is essentially a change board on",
    "start": "3873500",
    "end": "3884630"
  },
  {
    "text": "the next Thursday which decides that what goes in so it's less than a week",
    "start": "3884630",
    "end": "3889880"
  },
  {
    "text": "and that's also something that we continuously try to compress with automation and and so forth yes we",
    "start": "3889880",
    "end": "3902359"
  },
  {
    "text": "verify I mean every we do we say cannery releases or being able to enable",
    "start": "3902359",
    "end": "3909260"
  },
  {
    "text": "features for a specific user or release something for just one broker out of our",
    "start": "3909260",
    "end": "3916549"
  },
  {
    "text": "whatever number of brokers and then so",
    "start": "3916549",
    "end": "3921829"
  },
  {
    "text": "so we're yeah that's that happens a lot throughout",
    "start": "3921829",
    "end": "3927548"
  },
  {
    "text": "good thank you now it's lunch I guess",
    "start": "3930320",
    "end": "3936520"
  },
  {
    "text": "[Applause]",
    "start": "3936520",
    "end": "3942010"
  }
]