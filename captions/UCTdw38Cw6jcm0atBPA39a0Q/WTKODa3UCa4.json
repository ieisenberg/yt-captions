[
  {
    "text": "good afternoon ladies and gentlemen welcome were designed for tests so first",
    "start": "5459",
    "end": "15400"
  },
  {
    "text": "of all why why this talk I almost always start my presentations with this which",
    "start": "15400",
    "end": "21100"
  },
  {
    "text": "is why what I talk about this particular subject well I've seen a lot of people doing testing or not doing testing I've",
    "start": "21100",
    "end": "28390"
  },
  {
    "text": "seen people thinking that TDD is gonna solve all the problems and have found out that it hasn't they'd actually made",
    "start": "28390",
    "end": "33820"
  },
  {
    "text": "things worse for themselves I found ways of people though testing the wrong",
    "start": "33820",
    "end": "38890"
  },
  {
    "text": "things they're not actually testing the things of value what I'm gonna try and do here is to say well look here is",
    "start": "38890",
    "end": "45429"
  },
  {
    "text": "where the value is here's how to design for that here's how to make your software your product valuable and let's",
    "start": "45429",
    "end": "51969"
  },
  {
    "text": "ignore some of the other stuff I've got a number of war stories for you a number of examples which we'll go",
    "start": "51969",
    "end": "56979"
  },
  {
    "text": "through so here's the one slide if you want to do this one and then go that's fine I will I'll probably heading out",
    "start": "56979",
    "end": "64119"
  },
  {
    "text": "afterwards anyway what is valuable in your domain that's actually the key",
    "start": "64119",
    "end": "69640"
  },
  {
    "text": "question what is it that's valuable in what you do in your software it's strangely absent from most people's",
    "start": "69640",
    "end": "76690"
  },
  {
    "text": "minds as well what what is it actually that people buy our software for we use it for what is the bit that's actually",
    "start": "76690",
    "end": "83260"
  },
  {
    "text": "worthwhile how many times have you been working on a bit of software that's communicating this here and working this",
    "start": "83260",
    "end": "88600"
  },
  {
    "text": "one and I got this thing that's actually the real logic the bit that people pay for where's the money nowhere that is",
    "start": "88600",
    "end": "98910"
  },
  {
    "text": "next what is stable in your domain what",
    "start": "98910",
    "end": "103930"
  },
  {
    "text": "is it that's not changing people go on about all the tests are going to change it such as will this stuff that doesn't change very quickly",
    "start": "103930",
    "end": "111010"
  },
  {
    "text": "in a domain and you better find out what that is because guess what that's going to be a really good place to test you're",
    "start": "111010",
    "end": "118270"
  },
  {
    "text": "gonna substitute what are you going to change things are going to change over",
    "start": "118270",
    "end": "124720"
  },
  {
    "text": "time they're also going to change as you go through things like environments",
    "start": "124720",
    "end": "130110"
  },
  {
    "text": "separating environmentally dependent code from non environmentally dependent code very very important because you are",
    "start": "130140",
    "end": "136780"
  },
  {
    "text": "going to be changing environments whether you like it or not it's called dev test production they are going to",
    "start": "136780",
    "end": "144220"
  },
  {
    "text": "change one of the key factors to make things testable is separating object",
    "start": "144220",
    "end": "151150"
  },
  {
    "text": "graph construction from object use I'm going to that more detail later you are",
    "start": "151150",
    "end": "157150"
  },
  {
    "text": "actually building multiple applications it's not just the one you're putting into production but all the small ones",
    "start": "157150",
    "end": "164170"
  },
  {
    "text": "that you're building whenever you're doing unit testing they're all actually small little applications they've this little main called the unit test",
    "start": "164170",
    "end": "169870"
  },
  {
    "text": "framework lots of those what is that",
    "start": "169870",
    "end": "175090"
  },
  {
    "text": "value roll from the top there where is the code that does that that's high value code get it out get it out and",
    "start": "175090",
    "end": "181569"
  },
  {
    "text": "separate and test it because that's where the money is okay I'm going to go through some of these and that's the sort of kind of",
    "start": "181569",
    "end": "188769"
  },
  {
    "text": "summary of what we're going to talk about design is actually the key aspect",
    "start": "188769",
    "end": "194560"
  },
  {
    "text": "here it's in the middle there are the three aspects of it so understanding the",
    "start": "194560",
    "end": "200319"
  },
  {
    "text": "business domain if you don't understand about what is valuable in your business",
    "start": "200319",
    "end": "205480"
  },
  {
    "text": "so this is about value and about stability and about change points what's going to change your building software",
    "start": "205480",
    "end": "211690"
  },
  {
    "text": "for a reason not just because you've got a job it's because somebody somewhere is",
    "start": "211690",
    "end": "217000"
  },
  {
    "text": "going to do this one here ask a programmer what their job is I say writing code I say no it's making profit for your company sometimes it means not",
    "start": "217000",
    "end": "224079"
  },
  {
    "text": "writing code you've got testing you've also saying how do I know what that is",
    "start": "224079",
    "end": "229989"
  },
  {
    "text": "well I want to know about where stability is because I don't want to write tests that change all the time I want to make my tests run quickly I",
    "start": "229989",
    "end": "236160"
  },
  {
    "text": "don't want to I have to spend a lot of time setting things up and doing all these long clickety-clack things and",
    "start": "236160",
    "end": "242440"
  },
  {
    "text": "lots of environmental stuff don't want that and where do I use mocks so I'm going to be talking about why use mocks",
    "start": "242440",
    "end": "248139"
  },
  {
    "text": "and where I think you shouldn't use mocks and then the third thing deployment you are going to be moving",
    "start": "248139",
    "end": "255040"
  },
  {
    "text": "your code between different environments make sure you understand about that and",
    "start": "255040",
    "end": "262360"
  },
  {
    "text": "multiple versions so actually the design comes in the middle and what is it about that design that helps you dependency",
    "start": "262360",
    "end": "269320"
  },
  {
    "text": "management object graphs isolating that so that really is a kind of picture",
    "start": "269320",
    "end": "275289"
  },
  {
    "text": "that's somehow this design in the middle here has significant effect in all",
    "start": "275289",
    "end": "280419"
  },
  {
    "text": "possible directions on your business on your deployment on your testing I'm",
    "start": "280419",
    "end": "285580"
  },
  {
    "text": "going to use four examples here I've got some numeric engineering and this is for some guys who were doing thermodynamics",
    "start": "285580",
    "end": "293129"
  },
  {
    "text": "I've got some e-commerce stuff that was some co-op and I've got some computer",
    "start": "293129",
    "end": "299830"
  },
  {
    "text": "telephony integration stuff a little example there and a network server so",
    "start": "299830",
    "end": "305529"
  },
  {
    "text": "I'll go through these ones in in some detail some parts of them and they're quite different they all bring up",
    "start": "305529",
    "end": "311710"
  },
  {
    "text": "different parts of this story so let's take the first one here this is the one",
    "start": "311710",
    "end": "318430"
  },
  {
    "text": "with the people doing thermodynamics so these people came to me and they said right okay we've got this old code here",
    "start": "318430",
    "end": "325599"
  },
  {
    "text": "so we got some C code we've used an external framework to do this one here",
    "start": "325599",
    "end": "330699"
  },
  {
    "text": "and we want to try and you want to rewrite it all well haha stop stop stop yeah there's always that everybody wants",
    "start": "330699",
    "end": "337060"
  },
  {
    "text": "to rewrite everything it might be the right thing but let's actually have a look whether this is the right thing",
    "start": "337060",
    "end": "342449"
  },
  {
    "text": "well we have these hard to find bugs and so is one of these ones you kind of have to do something out here and try and get",
    "start": "342449",
    "end": "348669"
  },
  {
    "text": "that bug over there so these were really kind of hard to find bugs one of the bugs for instance was they had they were",
    "start": "348669",
    "end": "354699"
  },
  {
    "text": "doing in bubbles in liquids etc and one of the bugs turned out to be that the bubbles",
    "start": "354699",
    "end": "359740"
  },
  {
    "text": "actually converged exactly floating point peril and with the quality you",
    "start": "359740",
    "end": "365110"
  },
  {
    "text": "know it's not in not a epsilon apart but exactly equal and that one calls him a division by zero that was hard to find",
    "start": "365110",
    "end": "370990"
  },
  {
    "text": "he said right okay well maybe we can do some unit tests on that so I got out Doc's journal you sort of kind of went",
    "start": "370990",
    "end": "376629"
  },
  {
    "text": "look through the structure and says oh if I want to chest this bit here I just create one of those and that's got a pointer to this that's got a point to so",
    "start": "376629",
    "end": "383620"
  },
  {
    "text": "that let's cut up from it just kept on pulling on this piece of string like this and I ended up with about 50",
    "start": "383620",
    "end": "389379"
  },
  {
    "text": "objects now I could have kind of cut my way through and gone well we're not using that nulls and here not created",
    "start": "389379",
    "end": "394749"
  },
  {
    "text": "that and the end went well this is not designed for unit testing one of the reasons is because everything had a pointer to everything else so that",
    "start": "394749",
    "end": "401709"
  },
  {
    "text": "became really was lots of doubly linked list and everything that it was really nightmare to do okay that's really not gonna work very",
    "start": "401709",
    "end": "407380"
  },
  {
    "text": "well okay so perhaps we are gonna rewrite it or look at that so I say bolt if we're going to design",
    "start": "407380",
    "end": "413620"
  },
  {
    "text": "it this design is properly so what are the valuable parts of what you're doing there oh that's easy these algorithms",
    "start": "413620",
    "end": "419110"
  },
  {
    "text": "here bob riemann solver blah blah blah etc okay right so we'll write unit tests",
    "start": "419110",
    "end": "425080"
  },
  {
    "text": "for those we said we have no idea how to build these things okay right we don't",
    "start": "425080",
    "end": "431260"
  },
  {
    "text": "now design them so could you write tests for these women oh yes they're fine",
    "start": "431260",
    "end": "436480"
  },
  {
    "text": "there's you know all this stuff about physics etc and that's that's that's good we can do that we can find something now said so we've now defined",
    "start": "436480",
    "end": "443620"
  },
  {
    "text": "a valuable interface we don't know how the implementation is how they're going to implement the grid on the three",
    "start": "443620",
    "end": "449380"
  },
  {
    "text": "dimensional grid that's across multiple machines with MPI and all that sort of stuff we weren't let's just just get the",
    "start": "449380",
    "end": "454960"
  },
  {
    "text": "tests in place where are we going to test where is it valuable to do this these tests going to change them you",
    "start": "454960",
    "end": "461530"
  },
  {
    "text": "know because the physics doesn't change laws of physics are not due for change so we'll probably keep them there nice",
    "start": "461530",
    "end": "468700"
  },
  {
    "text": "stable interface refactoring independent good place to be putting tests I thought",
    "start": "468700",
    "end": "473980"
  },
  {
    "text": "valuable and stable so how are we going to put parts together well so we sat",
    "start": "473980",
    "end": "480310"
  },
  {
    "text": "down and we worked out when we came up with an acyclic dependency tree nice bottom up no nasty sort of kind of this",
    "start": "480310",
    "end": "486400"
  },
  {
    "text": "depends upon that we've worked out how to do that one that gave us a nice wave we could then do this bottom-up were",
    "start": "486400",
    "end": "492790"
  },
  {
    "text": "test each one independently hmm what's going to change over time they said well",
    "start": "492790",
    "end": "499180"
  },
  {
    "text": "the academic research is going over here and this is what people are doing here and these algorithms won't change so we",
    "start": "499180",
    "end": "504520"
  },
  {
    "text": "went right okay so it's that component there that component there that component there these are the ones are going to need virtual interfaces because",
    "start": "504520",
    "end": "510190"
  },
  {
    "text": "that's where you're putting a substitution points ah right okay so we",
    "start": "510190",
    "end": "515320"
  },
  {
    "text": "work that bit out which paths depend upon the environment ah well I went okay",
    "start": "515320",
    "end": "521320"
  },
  {
    "text": "this bit here that does the parallel decomposition there here because we need to copy a bit of that bit over here and this one heavy here so we can do our",
    "start": "521320",
    "end": "527080"
  },
  {
    "text": "relaxation algorithms etc so we kind of worked that bit out and went well you know we can probably get away with that",
    "start": "527080",
    "end": "533140"
  },
  {
    "text": "bit for this one here because we'd handle the edges so we'd worked out that part as well so we worked out a bunch of",
    "start": "533140",
    "end": "538839"
  },
  {
    "text": "things there that all relate to these so having gone through that one in some ways this talk",
    "start": "538839",
    "end": "545590"
  },
  {
    "text": "is a way of me summarizing this the conversation I had because I realized I",
    "start": "545590",
    "end": "550870"
  },
  {
    "text": "had this conversation but I realized I'd actually created a process in my head for how to of the right questions to ask",
    "start": "550870",
    "end": "556750"
  },
  {
    "text": "that I'd never seen anybody write down so this is me writing down these",
    "start": "556750",
    "end": "561790"
  },
  {
    "text": "questions and showing toward people right here is a nice little graph this",
    "start": "561790",
    "end": "568810"
  },
  {
    "text": "is from the ghooost book growing object-oriented software with tests by Freeman and price so Steve Freeman and",
    "start": "568810",
    "end": "576430"
  },
  {
    "text": "that price the Freeman is was one of the sort of original people creating mock",
    "start": "576430",
    "end": "581800"
  },
  {
    "text": "objects from London the XT extreme Tuesday Club etcetera we've got two",
    "start": "581800",
    "end": "587020"
  },
  {
    "text": "lines here we got testing along the bottom from system test all the way through to unit tests and two lines so",
    "start": "587020",
    "end": "594130"
  },
  {
    "text": "the line that's going down from the top right to the bottom left and quality going on the side says right system test",
    "start": "594130",
    "end": "599980"
  },
  {
    "text": "that gives us a measure of quality how does this actually work does this do",
    "start": "599980",
    "end": "605080"
  },
  {
    "text": "what the customer wants acceptance test kind of stuff yeah that's high because yeah either does or it doesn't",
    "start": "605080",
    "end": "610530"
  },
  {
    "text": "unit tests on the other hand gives us absolutely no indication of whether it",
    "start": "610530",
    "end": "616000"
  },
  {
    "text": "does what the customer wants it can be perfectly wrong system test tells you",
    "start": "616000",
    "end": "622660"
  },
  {
    "text": "it's perfectly whether it's right unit test just tells you it does what it does so that's actually not that helpful in",
    "start": "622660",
    "end": "629590"
  },
  {
    "text": "that sense but then we got the other line and the other line says system test",
    "start": "629590",
    "end": "634810"
  },
  {
    "text": "tells you nothing about the quality of the internals of your system it doesn't tell you that you haven't spent years",
    "start": "634810",
    "end": "640840"
  },
  {
    "text": "debugging this thing into existence it's really nasty you don't ever want to see this code again you can't possibly",
    "start": "640840",
    "end": "646990"
  },
  {
    "text": "change it unit tests on the other hand say yeah look we can test this one we",
    "start": "646990",
    "end": "652450"
  },
  {
    "text": "can change it we can refactor it do all that law guess what you need both and I",
    "start": "652450",
    "end": "658300"
  },
  {
    "text": "have seen people go yeah we have unit tests that'll be enough and I said no well and if you're just",
    "start": "658300",
    "end": "663700"
  },
  {
    "text": "doing system tests that's gonna hurt now what's interesting is what I added to this picture was the thing that the",
    "start": "663700",
    "end": "670300"
  },
  {
    "text": "external quality tells you about the past it tells you how you got here and tells you nothing about",
    "start": "670300",
    "end": "675810"
  },
  {
    "text": "the future unit on the other hand don't tell you how you got to you they say look this is my future yes I can evolve",
    "start": "675810",
    "end": "683640"
  },
  {
    "text": "yes I can change and that's why you need both of those the arrow at the top is my",
    "start": "683640",
    "end": "690600"
  },
  {
    "text": "attempt to say ah look you know this thing we've got system test that tells you I want this thing I want this high",
    "start": "690600",
    "end": "696540"
  },
  {
    "text": "indication of quality of something doing doing something for the user they want I want to be able to short-circuit that",
    "start": "696540",
    "end": "702990"
  },
  {
    "text": "into my unit tests if my unit tests are testing sort of kind of bit to the",
    "start": "702990",
    "end": "708690"
  },
  {
    "text": "implementation that's not what I want I want my unit tests to relate directly to what is valuable to your business what",
    "start": "708690",
    "end": "714600"
  },
  {
    "text": "the client wants because if you do that you go well look I've got that there and what's all the rest of this stuff that's",
    "start": "714600",
    "end": "721020"
  },
  {
    "text": "all accidental complexity and it's the one thing that just drains resources",
    "start": "721020",
    "end": "726600"
  },
  {
    "text": "your will to live et cetera is just all this framework and stuff that gets in",
    "start": "726600",
    "end": "732029"
  },
  {
    "text": "the way so Janet Gregory and simplicity same kind of thing let's make it simple look that's what we want their unit",
    "start": "732029",
    "end": "737760"
  },
  {
    "text": "tests tell us we do that bit there what's left to do what are a few things",
    "start": "737760",
    "end": "743040"
  },
  {
    "text": "but we'll come back to that so this is some basic dependency management kind of stuff for those who haven't seen it I",
    "start": "743040",
    "end": "750209"
  },
  {
    "text": "will just introduce these some couple of patterns so if you have a client class and a server class the client class will",
    "start": "750209",
    "end": "755850"
  },
  {
    "text": "call so everyone and we have a dependency so in UML you can use a dotted line to say dependencies so this",
    "start": "755850",
    "end": "762750"
  },
  {
    "text": "case the class C depends on what class s if you change SC will change not the other way round if I put an interface in",
    "start": "762750",
    "end": "770610"
  },
  {
    "text": "here abstract base class in C++ interface in other languages I now have the ability to say look okay I have",
    "start": "770610",
    "end": "777810"
  },
  {
    "text": "taken one dependency that way and inverted it so now I can put this big stake in the middle ago yeah I can",
    "start": "777810",
    "end": "783870"
  },
  {
    "text": "change this bit here no change on that side I can this bit and there's no change on this side I've isolated change",
    "start": "783870",
    "end": "792320"
  },
  {
    "text": "it also happens to be a substitution point ah great we got a couple of things",
    "start": "792320",
    "end": "797490"
  },
  {
    "text": "at the same time how do we bundle this one up so at the component level I've",
    "start": "797490",
    "end": "803550"
  },
  {
    "text": "got two patterns here I want you to remember because I'm going to be using later on so the top one here is the",
    "start": "803550",
    "end": "810750"
  },
  {
    "text": "facade patent the client here talks to an interface and there's a load of stuff behind it I don't know what that is I",
    "start": "810750",
    "end": "817560"
  },
  {
    "text": "don't care it has to talk to hardware databases big whatever I've got this nice little interface makes it very easy",
    "start": "817560",
    "end": "824250"
  },
  {
    "text": "for me to hide stuff and to mock it out we'll come back to the mocking thing the",
    "start": "824250",
    "end": "831390"
  },
  {
    "text": "one on the bottom that one's facade pattern gang a for pattern the one on the bottom is not a gang of for pattern plug-in pattern",
    "start": "831390",
    "end": "837840"
  },
  {
    "text": "call-out interface exported interface whatever you want to call that one it looks very odd but actually is very",
    "start": "837840",
    "end": "844440"
  },
  {
    "text": "common if I were to say C is like that C's like web browser I is plugin",
    "start": "844440",
    "end": "849840"
  },
  {
    "text": "interface and s would be flash plug-in or something like that it's that kind of thing Java web server servlet interface my",
    "start": "849840",
    "end": "857850"
  },
  {
    "text": "servlet the important thing is that the dependency is inbound but I can make an",
    "start": "857850",
    "end": "864780"
  },
  {
    "text": "outbound call it's very useful for defer for inverting dependencies between",
    "start": "864780",
    "end": "869940"
  },
  {
    "text": "components giving you a dependency graph you can deal with very useful for up",
    "start": "869940",
    "end": "875670"
  },
  {
    "text": "calls callbacks event listeners those kind of things we'll come back to those",
    "start": "875670",
    "end": "882420"
  },
  {
    "text": "patterns in a dependency tree dependencies are what kill you the",
    "start": "882420",
    "end": "888450"
  },
  {
    "text": "things at the bottom they're nice and easy to test they have bound dependencies you go yeah I can create one of these ones here beat it up and go",
    "start": "888450",
    "end": "894990"
  },
  {
    "text": "yeah yes yeah that one works it's harder to deal with ones in the middle you can",
    "start": "894990",
    "end": "901650"
  },
  {
    "text": "do bottom up but also things in the middle may not actually have any state how do you test an algorithm or web",
    "start": "901650",
    "end": "909780"
  },
  {
    "text": "controller or something like that that has no state where you can go yeah I do all this stuff and then you say yeah require or assert what can we assert",
    "start": "909780",
    "end": "916910"
  },
  {
    "text": "there's nothing to test actually its correctness is based upon the things",
    "start": "916910",
    "end": "922260"
  },
  {
    "text": "that make it calls and this is where we may come into mocking some other",
    "start": "922260",
    "end": "928680"
  },
  {
    "text": "patterns to look at input process output that's been around for a very long time",
    "start": "928680",
    "end": "935340"
  },
  {
    "text": "and I really can't see getting some information in doing something with it putting out that patterns",
    "start": "935340",
    "end": "940980"
  },
  {
    "text": "going to change notice that in terms of dependencies process is fine it's the",
    "start": "940980",
    "end": "948329"
  },
  {
    "text": "input bit whatever I can do the process but it's in fact that the processing depends upon the output output is the",
    "start": "948329",
    "end": "953940"
  },
  {
    "text": "problem here I have a dependency and that output is guess what that's environmental code so one of the",
    "start": "953940",
    "end": "962610"
  },
  {
    "text": "patterns you can use on the bottom left there you say well I've got this processing bit here you know all that",
    "start": "962610",
    "end": "968220"
  },
  {
    "text": "logic why don't they just sort of kind of drop it down into a function drop it down a separate class or separate",
    "start": "968220",
    "end": "973440"
  },
  {
    "text": "function or parse all the stuff in and get the parameters back hey look I've got this nice isolated thing here I've",
    "start": "973440",
    "end": "979860"
  },
  {
    "text": "got an isolated thing like into I can unit test this is great for legacy code by the way you've got a big function",
    "start": "979860",
    "end": "985320"
  },
  {
    "text": "that says well I'll go and get some stuff from a from Dave place over here and stick it onto a network all the bit in between you can pull out an unit test",
    "start": "985320",
    "end": "992370"
  },
  {
    "text": "cuz it's all in memory other techniques are to use an interface on the right",
    "start": "992370",
    "end": "999630"
  },
  {
    "text": "hand side there so you can make a call to the you can invert that dependency using one of these pans like that you",
    "start": "999630",
    "end": "1007699"
  },
  {
    "text": "could also use some other inversion techniques such as streams or function pointers or lambdas those are useful",
    "start": "1007699",
    "end": "1015440"
  },
  {
    "text": "ways and this is for handling IO I",
    "start": "1015440",
    "end": "1020350"
  },
  {
    "text": "mentioned multiple applications your production application is well here's a",
    "start": "1021670",
    "end": "1026780"
  },
  {
    "text": "big set of these are all the classes I'm gonna use lots of them when you're testing you want to be testing small",
    "start": "1026780",
    "end": "1033530"
  },
  {
    "text": "ones well actually what you've got here is one unit test for the things on the bottom and other one here etc you've got",
    "start": "1033530",
    "end": "1039140"
  },
  {
    "text": "lots of little unit tests this means you need to be able to change the wiring so",
    "start": "1039140",
    "end": "1045829"
  },
  {
    "text": "one of the things you have to watch out for when you're building systems is how can you rewire the components if you",
    "start": "1045829",
    "end": "1052460"
  },
  {
    "text": "hardwired into it this depends upon that guess what you've made it hard to do that and we're going to look at things",
    "start": "1052460",
    "end": "1059030"
  },
  {
    "text": "like dependency injection to help you with that maybe I've got this thing down",
    "start": "1059030",
    "end": "1066110"
  },
  {
    "text": "on the bottom here with the i/o which is that's the thing it's going to cause me all the trouble that's the thing is slow",
    "start": "1066110",
    "end": "1071809"
  },
  {
    "text": "if you start doing things with i/o you get results that you don't don't",
    "start": "1071809",
    "end": "1077360"
  },
  {
    "text": "always work because you got oh I forgot to delete the file or if a fellow because the file I created last time",
    "start": "1077360",
    "end": "1083120"
  },
  {
    "text": "hasn't been deleted the date is not in the database all those other things and guess what it's nice and slow yeah so I",
    "start": "1083120",
    "end": "1089330"
  },
  {
    "text": "want to be able to cut that off so if I see environmentally dependent code I'm going to want to mock it out like this",
    "start": "1089330",
    "end": "1095690"
  },
  {
    "text": "so in my unit test I can mock it that means it now runs in memory it runs",
    "start": "1095690",
    "end": "1100700"
  },
  {
    "text": "faster its orders of magnitude faster",
    "start": "1100700",
    "end": "1106330"
  },
  {
    "text": "memory is about five four five maybe even six times faster than I oh that magnitude not factors orders of",
    "start": "1106330",
    "end": "1114259"
  },
  {
    "text": "magnitude if you want to have fast running tests get rid of the i/o it's",
    "start": "1114259",
    "end": "1122029"
  },
  {
    "text": "also all the states that goes with it be very careful about that one and here is an absolutely classic use of mocks mock",
    "start": "1122029",
    "end": "1129649"
  },
  {
    "text": "out environmental code because you are going to have to change that point",
    "start": "1129649",
    "end": "1135340"
  },
  {
    "text": "remember I talked about object graphs and we went back here and say well you know I'm creating I'm creating multiple",
    "start": "1135610",
    "end": "1142580"
  },
  {
    "text": "different graphs like that well I need to have some way of doing that I need have some way of saying I'll create an",
    "start": "1142580",
    "end": "1148070"
  },
  {
    "text": "object graph here's all the arrangement and then I press the button and say go when the application runs and then at",
    "start": "1148070",
    "end": "1154879"
  },
  {
    "text": "some point I need to tidy it up so that thing at the top here a timeline here I've got something that says set all",
    "start": "1154879",
    "end": "1159889"
  },
  {
    "text": "your stuff up yeah right okay that's fine that's different to do all the testing and then there's some tap down",
    "start": "1159889",
    "end": "1167509"
  },
  {
    "text": "that's usually trivial if I've",
    "start": "1167509",
    "end": "1172580"
  },
  {
    "text": "introduced interfaces between classes like this how do those things talk how do they know about each other",
    "start": "1172580",
    "end": "1178039"
  },
  {
    "text": "my scene my client my server like that if they talk you through an interface",
    "start": "1178039",
    "end": "1183980"
  },
  {
    "text": "how do they and they depend on then interface where do they get created people often forget about how things",
    "start": "1183980",
    "end": "1190159"
  },
  {
    "text": "actually get wired up so I need some form of creation and wiring thing this",
    "start": "1190159",
    "end": "1195559"
  },
  {
    "text": "can be as simple as a function like main there's all right okay create one of those create one of those C dot set s",
    "start": "1195559",
    "end": "1203299"
  },
  {
    "text": "yes and do it that way that's very simple you just plug them together it could be an injection dependency",
    "start": "1203299",
    "end": "1210529"
  },
  {
    "text": "injection container if you want to go all that way if you're if you're working something like spring or unity so",
    "start": "1210529",
    "end": "1217279"
  },
  {
    "text": "there's a wide range of those ones but thinking about how you create objects and how you wire them up such that you",
    "start": "1217279",
    "end": "1223279"
  },
  {
    "text": "can pull them apart and test them separately so what are the",
    "start": "1223279",
    "end": "1229340"
  },
  {
    "text": "right and wrong ways of wiring things up so I've got four here and then going one",
    "start": "1229340",
    "end": "1236480"
  },
  {
    "text": "two three four along the top along the bottom in increasing order of testability at the",
    "start": "1236480",
    "end": "1241970"
  },
  {
    "text": "top I've got new new is a horrible thing new completely an utterly kills any",
    "start": "1241970",
    "end": "1250759"
  },
  {
    "text": "substitution that says X simple that's it it can't be anything else and plus or",
    "start": "1250759",
    "end": "1259009"
  },
  {
    "text": "minus macro tricks you can't substitute their new is like kryptonite to be very",
    "start": "1259009",
    "end": "1264679"
  },
  {
    "text": "careful with it you've completely eliminated in substitution on the other",
    "start": "1264679",
    "end": "1270289"
  },
  {
    "text": "hand you think oh well maybe I'll just go to bottom left there I'll go to a singleton because that's obviously the",
    "start": "1270289",
    "end": "1276220"
  },
  {
    "text": "answer to everything really so singleton down the bottom there I can do that one there that's really not much",
    "start": "1276220",
    "end": "1283700"
  },
  {
    "text": "better at all how do you change that how do you change the type how do i rewire it how to say",
    "start": "1283700",
    "end": "1290240"
  },
  {
    "text": "look you you give me an X there but actually I want to use something else for this particularly object creation",
    "start": "1290240",
    "end": "1295370"
  },
  {
    "text": "I can't it's still hardwired in there yes in languages like Java or whatever",
    "start": "1295370",
    "end": "1302269"
  },
  {
    "text": "you can say blow Clark class for name and you can do link time stuff but it's",
    "start": "1302269",
    "end": "1308149"
  },
  {
    "text": "a bit hacky oh maybe I go to a service locator some sort of kind of factory go",
    "start": "1308149",
    "end": "1313460"
  },
  {
    "text": "and find me this thing I want one of these please can you go and find it that will allow you to do some stuff but the",
    "start": "1313460",
    "end": "1319519"
  },
  {
    "text": "problem with that one is you go I could get anything it's going to come back and",
    "start": "1319519",
    "end": "1325370"
  },
  {
    "text": "go well I have no idea what I'm going to get here and I may need to I need to talk to him to get something else",
    "start": "1325370",
    "end": "1331730"
  },
  {
    "text": "I now have too much visibility in my system I've I've wired in too much",
    "start": "1331730",
    "end": "1337250"
  },
  {
    "text": "knowledge at that point whereas on the bottom right I go direct injection if Y wants an axe just give it an X it's",
    "start": "1337250",
    "end": "1347390"
  },
  {
    "text": "that simple I see people doing all these other complicated things and say look if it just wants one create one and give it",
    "start": "1347390",
    "end": "1353570"
  },
  {
    "text": "to it so simplicity please this makes it much easier to test because if I want to",
    "start": "1353570",
    "end": "1359030"
  },
  {
    "text": "put in some mark or some substitute for that one I can do it it's much harder on",
    "start": "1359030",
    "end": "1364790"
  },
  {
    "text": "the other ones so bottom right very simple environmentally dependent code so",
    "start": "1364790",
    "end": "1374870"
  },
  {
    "text": "here is this is the c-sharp one time",
    "start": "1374870",
    "end": "1381049"
  },
  {
    "text": "line in the sense of code going through from unit test all the way through into life and this is for a payment service",
    "start": "1381049",
    "end": "1388450"
  },
  {
    "text": "so in unit test I want to mock out the payment service payments obviously very",
    "start": "1388450",
    "end": "1393860"
  },
  {
    "text": "important in e-commerce and I go what I want to be able to mock that but in my",
    "start": "1393860",
    "end": "1399410"
  },
  {
    "text": "continuous integration one I need to actually do some stuff I'll have a stub service that does this one and if you give it a credit card for one or on one",
    "start": "1399410",
    "end": "1406010"
  },
  {
    "text": "it passes for two for two for two it fails and give it some other credit card it'll it'll fail the the loan credit",
    "start": "1406010",
    "end": "1412970"
  },
  {
    "text": "card algorithm so I might have a stub service maybe I'll have some smoke test that just says yeah okay it seems to be",
    "start": "1412970",
    "end": "1419210"
  },
  {
    "text": "working enough to even start looking at doing a system test system test I want to start doing performance stuff well",
    "start": "1419210",
    "end": "1425750"
  },
  {
    "text": "unsurprisingly PayPal don't like it if you low test their service so I probably",
    "start": "1425750",
    "end": "1431360"
  },
  {
    "text": "need to be able to have some way of load testing this myself load testing my code",
    "start": "1431360",
    "end": "1436370"
  },
  {
    "text": "not there but then we get to you eighty use acceptance test we want to be using",
    "start": "1436370",
    "end": "1441710"
  },
  {
    "text": "the PayPal sandbox one in staging we're also doing that one cuz it's not real money we don't want to do that one",
    "start": "1441710",
    "end": "1447980"
  },
  {
    "text": "whereas in live we got PayPal so you can see look I have four different things so",
    "start": "1447980",
    "end": "1453559"
  },
  {
    "text": "the PayPal one that's probably a URL change you may find the stub is also URL change but you may need some different",
    "start": "1453559",
    "end": "1459049"
  },
  {
    "text": "drivers at different points in the mock here is very much closer to your code you are going to have to change these",
    "start": "1459049",
    "end": "1464660"
  },
  {
    "text": "things so let's put in a place where you can change it where you can configure it",
    "start": "1464660",
    "end": "1470929"
  },
  {
    "text": "and make it much easier because if you just hardwire these things in here it's going be hard I don't know how many of you've",
    "start": "1470929",
    "end": "1476690"
  },
  {
    "text": "tried doing this one and fine oh I can't how do I test this thing and how do I move it to a production environment it's",
    "start": "1476690",
    "end": "1483170"
  },
  {
    "text": "unnecessarily complex planned for that it's going to happen your configuration",
    "start": "1483170",
    "end": "1492770"
  },
  {
    "text": "information is also environmentally specific your external libraries are",
    "start": "1492770",
    "end": "1500660"
  },
  {
    "text": "properly platform specific if you want to have portable code guess where the",
    "start": "1500660",
    "end": "1506120"
  },
  {
    "text": "portability is going to be what's not shouldn't be in your course II plus Java kind of thing it's going to be in the",
    "start": "1506120",
    "end": "1511460"
  },
  {
    "text": "external libraries because they're the pasture change it's sort of kind of sitting on a plate waiting for you to go",
    "start": "1511460",
    "end": "1517670"
  },
  {
    "text": "yeah that bits kind of core and then these other bits depend where I'm doing what I'm doing a key thing that people",
    "start": "1517670",
    "end": "1526490"
  },
  {
    "text": "forget is time time is a highly important environmental factor make sure",
    "start": "1526490",
    "end": "1534290"
  },
  {
    "text": "you have some way of controlling time I worked on a piece of code which was",
    "start": "1534290",
    "end": "1539720"
  },
  {
    "text": "sending out it was written in PHP for various reasons and it's sending out emails and then reminders after",
    "start": "1539720",
    "end": "1545360"
  },
  {
    "text": "fortnight and replied and then another reminder after that after how am I going to test something that requires to wait",
    "start": "1545360",
    "end": "1551690"
  },
  {
    "text": "a fortnight well I just I'm just testing you know you may seen the xkcd compiling",
    "start": "1551690",
    "end": "1557360"
  },
  {
    "text": "I can't really do the same thing for testing so I had to have some way of jumping the time it's one way time is",
    "start": "1557360",
    "end": "1567740"
  },
  {
    "text": "one of those things underneath if you go back to these things like this there whoops sorry these ones here like",
    "start": "1567740",
    "end": "1576040"
  },
  {
    "text": "Singleton's everything else in Global's they're wiring from underneath you can't see and you can't change it looks from",
    "start": "1576040",
    "end": "1581840"
  },
  {
    "text": "on top you got that looks nice and clean well there's all this stuff underneath time is one of those ones that's also",
    "start": "1581840",
    "end": "1588200"
  },
  {
    "text": "underneath make sure you have some way of controlling it and I will show you in",
    "start": "1588200",
    "end": "1593450"
  },
  {
    "text": "one of the examples later on how to do that technology free call this is a",
    "start": "1593450",
    "end": "1601040"
  },
  {
    "text": "pattern which is really a just an example of that outbound interface it says right okay you've got my I have my",
    "start": "1601040",
    "end": "1607940"
  },
  {
    "text": "core code like this inbound calls not a problem I'm Pro may have some layer on the outside some",
    "start": "1607940",
    "end": "1615080"
  },
  {
    "text": "adapter or whatever that says yeah I'm working in this particular environment if I want to make an outbound call to a",
    "start": "1615080",
    "end": "1620900"
  },
  {
    "text": "GUI or whatever like that if I do it through an interface I can provide the",
    "start": "1620900",
    "end": "1625910"
  },
  {
    "text": "adapter for that one to isolate this technology free call logging if you log",
    "start": "1625910",
    "end": "1636830"
  },
  {
    "text": "stuff you have a logger then you go I'm gonna write that log and keep doing this one here and you sort of kind of hardwired in that logger well what",
    "start": "1636830",
    "end": "1644090"
  },
  {
    "text": "happens if you then want to change the logo where you have to change in lots of different places what happens if you want to do lifecycle kind of things well",
    "start": "1644090",
    "end": "1650960"
  },
  {
    "text": "one of the options there is to say well I'll just make outbound calls I'll make events calls up and oh look so we'll",
    "start": "1650960",
    "end": "1658309"
  },
  {
    "text": "observe a pattern something similar and your logger is just an observer for that event so event-driven code more and more",
    "start": "1658309",
    "end": "1666950"
  },
  {
    "text": "when I do stuff in the cloud I'm seeing that actually we need to have responsive products not products that just do one",
    "start": "1666950",
    "end": "1672770"
  },
  {
    "text": "application but they respond oh I'm under attack oh I've seen this those kind of things are having events",
    "start": "1672770",
    "end": "1679039"
  },
  {
    "text": "oh this system isn't working anymore I've haven't had this I haven't had anything coming in through on this",
    "start": "1679039",
    "end": "1685549"
  },
  {
    "text": "channel for you know five minutes or whatever it is so up-bound events if you write your stuff with event these",
    "start": "1685549",
    "end": "1692179"
  },
  {
    "text": "logging observe and calls up bound that's a way of doing it okay let's combine all these things then see what",
    "start": "1692179",
    "end": "1698630"
  },
  {
    "text": "happens so this is a combination I've got my creation and wiring on the top that says yeah I have these things like",
    "start": "1698630",
    "end": "1703820"
  },
  {
    "text": "create the things that I want for my input in my output so they're creating the concur input and output those are",
    "start": "1703820",
    "end": "1710360"
  },
  {
    "text": "isolated by your interfaces here which do that one there and I've got this piece of code this is right okay the",
    "start": "1710360",
    "end": "1716179"
  },
  {
    "text": "actual main processing is kind of dropped out like that so I can now test this independently so that works as a",
    "start": "1716179",
    "end": "1722990"
  },
  {
    "text": "sort of kind of combination of all these patterns so remember that picture and",
    "start": "1722990",
    "end": "1728720"
  },
  {
    "text": "then go here's the UML diagram for uh something I wrote which is a test driven",
    "start": "1728720",
    "end": "1734390"
  },
  {
    "text": "GUI this is the computer telephony integration project I mentioned what",
    "start": "1734390",
    "end": "1740210"
  },
  {
    "text": "have I got here well in the middle here is my finite state machine here's the thing that says oh I was on a call not on a call doing this",
    "start": "1740210",
    "end": "1746749"
  },
  {
    "text": "one here all the actual business logic which is am I doing this why am i",
    "start": "1746749",
    "end": "1752509"
  },
  {
    "text": "waiting for that etc on the left I have got an interface that says it hides so",
    "start": "1752509",
    "end": "1758330"
  },
  {
    "text": "that's the facade pattern on the left one in the middle is the plugin pattern and then facade pattern again on the right what does this one do it hides",
    "start": "1758330",
    "end": "1766489"
  },
  {
    "text": "this Java messaging thing so I was using apache mq what happened here is that",
    "start": "1766489",
    "end": "1771559"
  },
  {
    "text": "this is I had a an asterisk server for telephony somebody would make an inbound",
    "start": "1771559",
    "end": "1776600"
  },
  {
    "text": "call that would work out who picked up the phone and so if extension 2 3 4 pick",
    "start": "1776600",
    "end": "1782179"
  },
  {
    "text": "up it would then send a message on cue 2 3 4 to somebody saying here was the phone number that just rang you comes up",
    "start": "1782179",
    "end": "1789499"
  },
  {
    "text": "into the application that then goes down the right-hand side off to a database to",
    "start": "1789499",
    "end": "1794690"
  },
  {
    "text": "say do you know what this number is and get me back a list of people who have this phone number that's what he was",
    "start": "1794690",
    "end": "1801230"
  },
  {
    "text": "doing so that is how I do that one so how do I actually test this right ok",
    "start": "1801230",
    "end": "1806539"
  },
  {
    "text": "well the first thing I can do is I can test the bit in the middle first thing I want to test the valuable business logic",
    "start": "1806539",
    "end": "1813080"
  },
  {
    "text": "by itself I've managed to isolate that bit in the middle aware the state machine and that actions interface",
    "start": "1813080",
    "end": "1818509"
  },
  {
    "text": "notice that's a callback because if you normally what would happen here is that all that code would be in the GUI and",
    "start": "1818509",
    "end": "1823879"
  },
  {
    "text": "button handlers and other stuff like that I've dropped it down and I've inverted the dependency so it's completely separate now I can test that",
    "start": "1823879",
    "end": "1830809"
  },
  {
    "text": "by itself now I can go through all the possible combinations and have I got",
    "start": "1830809",
    "end": "1836299"
  },
  {
    "text": "missing transitions or hidden transitions etc is it making all the",
    "start": "1836299",
    "end": "1841429"
  },
  {
    "text": "right calls at the right time etc my core business logic is right once I've",
    "start": "1841429",
    "end": "1848359"
  },
  {
    "text": "got that I'm now doing bottom-up integration on this one here notice I've got my interfaces and the left and right",
    "start": "1848359",
    "end": "1854480"
  },
  {
    "text": "because I'm now going to mock them the Java messaging on this side and mocking",
    "start": "1854480",
    "end": "1859820"
  },
  {
    "text": "the web service on the other side why am i mocking that it's environmentally dependent and slow and requires setup",
    "start": "1859820",
    "end": "1867529"
  },
  {
    "text": "and all those other things so now my GUI test can actually push the GUI and actually in this case it was started off",
    "start": "1867529",
    "end": "1872629"
  },
  {
    "text": "as QT who's using Google mock and I pushed off all the things here's all the signals I even started pushing keys on the thing",
    "start": "1872629",
    "end": "1880849"
  },
  {
    "text": "to check that it would do go up and down I got a whole pile of tests that that did that one that an ad enabled me to do",
    "start": "1880849",
    "end": "1887179"
  },
  {
    "text": "a test driven GUI was all of that all what it doesn't allow me to test of",
    "start": "1887179",
    "end": "1892249"
  },
  {
    "text": "course it doesn't allow me to test the actual JMS messaging and the actual web",
    "start": "1892249",
    "end": "1898190"
  },
  {
    "text": "search on the other side but all the core the bit that actually you're paying for and the customer wants is now under",
    "start": "1898190",
    "end": "1905749"
  },
  {
    "text": "test here is another one this is this is",
    "start": "1905749",
    "end": "1913519"
  },
  {
    "text": "the c-plus networking server I mentioned there are a number of aspects to this so",
    "start": "1913519",
    "end": "1919909"
  },
  {
    "text": "this was a networking server receive messages and it would then look in its",
    "start": "1919909",
    "end": "1926779"
  },
  {
    "text": "cache to say okay have I got the answer for that if not it would send off to other distributed systems can you go and",
    "start": "1926779",
    "end": "1933200"
  },
  {
    "text": "get that for me so it was an awful lot of protocol handling of sending stuff out is it in the cache etc the cache is",
    "start": "1933200",
    "end": "1938659"
  },
  {
    "text": "not sewn on here but doesn't particularly matter what was the",
    "start": "1938659",
    "end": "1944570"
  },
  {
    "text": "important part the part that I really wanted to test that's the bit at the bottom here that's all the finite state machines is it sending this one out and",
    "start": "1944570",
    "end": "1951320"
  },
  {
    "text": "no need to wait for this and then come back here oh if I haven't had a response within a certain time I need to do",
    "start": "1951320",
    "end": "1956899"
  },
  {
    "text": "something and we'll come back to the timeout in a moment so I could manage to isolate all of that business logic and",
    "start": "1956899",
    "end": "1962840"
  },
  {
    "text": "get it under test because it was separate it's all derives from",
    "start": "1962840",
    "end": "1968119"
  },
  {
    "text": "essentially this this base class FSM what have I got coming up on the rest of",
    "start": "1968119",
    "end": "1973970"
  },
  {
    "text": "this one here well okay I've got main loop right on the right-hand side what",
    "start": "1973970",
    "end": "1978979"
  },
  {
    "text": "didn't main so main des said right create all the objects so I'm using direct injection and then said right",
    "start": "1978979",
    "end": "1985729"
  },
  {
    "text": "wire them all together and then go make all main loop what else have I got in",
    "start": "1985729",
    "end": "1994129"
  },
  {
    "text": "here remember I said about sort of import processing and how do you do with",
    "start": "1994129",
    "end": "1999559"
  },
  {
    "text": "output well surprising unsurprisingly these state machines send out messages",
    "start": "1999559",
    "end": "2005220"
  },
  {
    "text": "so how do I send out messages without causing myself an outbound dependency well what I did is",
    "start": "2005220",
    "end": "2010990"
  },
  {
    "text": "on the top sort of top towards the right there's an outbound message list so I basically end up giving it says right",
    "start": "2010990",
    "end": "2017350"
  },
  {
    "text": "here is a blank piece of paper state machine if you want to send any messages",
    "start": "2017350",
    "end": "2022480"
  },
  {
    "text": "let me know and I'll write in one piece of paper so you can write on piece of paper you want to send these three messages and these are the timeout",
    "start": "2022480",
    "end": "2028480"
  },
  {
    "text": "actions that you want okay fine right now I'm at the top because I know about the i/o I'll go and do that for you",
    "start": "2028480",
    "end": "2034330"
  },
  {
    "text": "but all of your state machines just go yeah okay I've got this one here here's what you do you've passed me that thing",
    "start": "2034330",
    "end": "2040330"
  },
  {
    "text": "I filled it out it means that I've got my dependencies completely under control I haven't got machines making outbound",
    "start": "2040330",
    "end": "2047230"
  },
  {
    "text": "calls which is the real problem which would be hard to deal with timeout how",
    "start": "2047230",
    "end": "2055720"
  },
  {
    "text": "do I do was something it has a 30 second I mad why you do fast unit tests when it has a 30-second timeout well I needed to",
    "start": "2055720",
    "end": "2062618"
  },
  {
    "text": "be able to control time and I need to be able to have some way of centralizing all my timeout management so I had a",
    "start": "2062619",
    "end": "2068648"
  },
  {
    "text": "timeout key that said well okay if you're going to send a message with a timeout on it I'll put it on the queue and then all as I go around I'll pick",
    "start": "2068649",
    "end": "2075878"
  },
  {
    "text": "off the queue and go is there an action for me to do if you receive that before I'll take it out the queue so we're not",
    "start": "2075879",
    "end": "2081340"
  },
  {
    "text": "going to hit on that all the i/o is",
    "start": "2081340",
    "end": "2089200"
  },
  {
    "text": "going through the network interface which is abstract nothing to do with that one and there's this thing in the middle called time message handler so",
    "start": "2089200",
    "end": "2097869"
  },
  {
    "text": "what I did is I completely abstracted time there is no time in this this is a completely single threaded passive",
    "start": "2097869",
    "end": "2103060"
  },
  {
    "text": "system other than so it gets messages coming in one of those messages happened",
    "start": "2103060",
    "end": "2109900"
  },
  {
    "text": "to say time is T T plus 1 T plus 2 T plus 3 there's a separate thread that",
    "start": "2109900",
    "end": "2115119"
  },
  {
    "text": "indeed that will send in the time to this application this makes it very easy",
    "start": "2115119",
    "end": "2120970"
  },
  {
    "text": "to unit test because I can say time is T do this time is T plus 29 and it didn't do this one time is T send the message",
    "start": "2120970",
    "end": "2127840"
  },
  {
    "text": "time is with a timeout 30 time T plus 30 bang it did this message so I can run",
    "start": "2127840",
    "end": "2133090"
  },
  {
    "text": "all those unit tests all those timeouts at accelerated time because I can jump time forward as fast as I like",
    "start": "2133090",
    "end": "2142020"
  },
  {
    "text": "the Constructors there everything's wired up with constructors there's no factories is none of that it's really",
    "start": "2144100",
    "end": "2150470"
  },
  {
    "text": "simple it's straightforward it's all top-down business logic nice control",
    "start": "2150470",
    "end": "2155660"
  },
  {
    "text": "visible dependencies no Global's no Singleton's no locators no factories nothing 450 unit tests for the whole",
    "start": "2155660",
    "end": "2162110"
  },
  {
    "text": "thing 94% line coverage and they ran in 250 milliseconds this meant that I could",
    "start": "2162110",
    "end": "2168410"
  },
  {
    "text": "just save the file and run the entire thing all the unit tests against mine every time I saved a file so that's a",
    "start": "2168410",
    "end": "2177350"
  },
  {
    "text": "blue brevet from a testability point of view all the messages going in and out I logged them so I could see what was",
    "start": "2177350",
    "end": "2184040"
  },
  {
    "text": "going on in a human form but I also then used that human form then to replay the",
    "start": "2184040",
    "end": "2189140"
  },
  {
    "text": "messages so if I had a problem I could say ah he was the message and now I can replay that back in to recreate the",
    "start": "2189140",
    "end": "2195140"
  },
  {
    "text": "message single-threaded event-driven so didn't have to worry",
    "start": "2195140",
    "end": "2200300"
  },
  {
    "text": "about threading that's a whole other story which if you if you get me sober enough I'll tell you about and I",
    "start": "2200300",
    "end": "2207830"
  },
  {
    "text": "externalize the time as I mentioned back",
    "start": "2207830",
    "end": "2213560"
  },
  {
    "text": "to this internal versus external quality if we do this in this approach then what",
    "start": "2213560",
    "end": "2220760"
  },
  {
    "text": "do we do well we're basically we're saying look that unit testing here I'm isolating the valuable code I want to",
    "start": "2220760",
    "end": "2225920"
  },
  {
    "text": "get as much of my unit test and bottom-up integration coming this way as",
    "start": "2225920",
    "end": "2231950"
  },
  {
    "text": "I can so I can get as close to the to the system test level as possible",
    "start": "2231950",
    "end": "2236980"
  },
  {
    "text": "without getting there because that system test that's where I'm going to end up testing my JMS message server and",
    "start": "2236980",
    "end": "2243440"
  },
  {
    "text": "all the file import etc I will have to do that at some point and I am going to",
    "start": "2243440",
    "end": "2248510"
  },
  {
    "text": "test those things but and they're they're separate tests but I've got us closest I can to doing this one without",
    "start": "2248510",
    "end": "2254210"
  },
  {
    "text": "that I've got I have deferred all that environmental stuff all the technical issues of threading and volume and drop",
    "start": "2254210",
    "end": "2262040"
  },
  {
    "text": "connections etc as late as possible I've got as much as I can under unit test so",
    "start": "2262040",
    "end": "2269150"
  },
  {
    "text": "that's essentially what I'm trying to do right okay how much do how much does",
    "start": "2269150",
    "end": "2274220"
  },
  {
    "text": "this solve well fragile tests I don't know if you",
    "start": "2274220",
    "end": "2279229"
  },
  {
    "text": "ever worked on a thing where you've got some fragility in your test and they sort of kind of pass sometimes and not other times well what I'm doing here are",
    "start": "2279229",
    "end": "2286699"
  },
  {
    "text": "all where they break because of refactoring stable domain level tests",
    "start": "2286699",
    "end": "2292160"
  },
  {
    "text": "that are about what customers care about not internal aspects that's stable interfaces that aren't going to change",
    "start": "2292160",
    "end": "2298160"
  },
  {
    "text": "and less than a chrome is change how did you even start well let's work out what",
    "start": "2298160",
    "end": "2304489"
  },
  {
    "text": "we wanted to do in terms of examples and tests isolating sections of code can I",
    "start": "2304489",
    "end": "2312140"
  },
  {
    "text": "take that part out so as an example I often use in e-commerce the shopping",
    "start": "2312140",
    "end": "2318829"
  },
  {
    "text": "basket is the most important part of working out the price of that if I have",
    "start": "2318829",
    "end": "2324380"
  },
  {
    "text": "a shopping basket that's right okay it's 50 pounds over 50 pounds for free shipping you got three for the price of",
    "start": "2324380",
    "end": "2330170"
  },
  {
    "text": "two four on this particular item and you give me a ten pound discount voucher what is the price it's a business",
    "start": "2330170",
    "end": "2338539"
  },
  {
    "text": "decision somebody has to say well that's what happens in this case wouldn't it be really nice if you got that out and then",
    "start": "2338539",
    "end": "2344119"
  },
  {
    "text": "could just get all the examples and keep bashing it up rather than having the middle of a big piece of code like this and trying to do it from the outside",
    "start": "2344119",
    "end": "2349910"
  },
  {
    "text": "through the web interface what happens if you've got three for the price of two",
    "start": "2349910",
    "end": "2355039"
  },
  {
    "text": "and you return one how much money do I give you back these are decisions that actually we have to deal with do you",
    "start": "2355039",
    "end": "2363140"
  },
  {
    "text": "have slow running tests well why I think slow running because they deal with i/o because they deal with environmental code so let's chop",
    "start": "2363140",
    "end": "2369499"
  },
  {
    "text": "that off let's mock it out let's get our unit tests under working in memory so",
    "start": "2369499",
    "end": "2375739"
  },
  {
    "text": "the classic Michael feathers it doesn't touch the network it doesn't touch the database it doesn't touch the disk ah",
    "start": "2375739",
    "end": "2382299"
  },
  {
    "text": "deployment well we've going to get around our deployment thing by saying we know that we're going to be deploying it",
    "start": "2382299",
    "end": "2387859"
  },
  {
    "text": "we know that these are the substitution points because that's where the environmental code is we've already planned that bit are you gonna have",
    "start": "2387859",
    "end": "2395509"
  },
  {
    "text": "disruptive change well quite possibly here are where the plans substitution points are you may get changed that that",
    "start": "2395509",
    "end": "2402289"
  },
  {
    "text": "doesn't fit with that that network server I had suddenly had to had some very disruptive change that's a another",
    "start": "2402289",
    "end": "2407390"
  },
  {
    "text": "talk how many of you work on things we're actually the technical issues like",
    "start": "2407390",
    "end": "2412820"
  },
  {
    "text": "threading and networks and other things seem to dominate and you somehow don't seem to have enough time left for",
    "start": "2412820",
    "end": "2418640"
  },
  {
    "text": "actually the real application in the real code I've seen way to project that",
    "start": "2418640",
    "end": "2424010"
  },
  {
    "text": "just get caught up in there isolate the unit test valuable code business logic over there and let's leave all that",
    "start": "2424010",
    "end": "2430220"
  },
  {
    "text": "framework stuff to later let's see if we can push it away get rid of it big large unwieldy tests well yes let's",
    "start": "2430220",
    "end": "2437570"
  },
  {
    "text": "see if we can we can deal with those and by refactoring this some of those ones what do you mock there is this do i mock",
    "start": "2437570",
    "end": "2445550"
  },
  {
    "text": "do i do bottom-up do i do top-down inside out if you start inside out and then coming in here you will find that",
    "start": "2445550",
    "end": "2452450"
  },
  {
    "text": "there are people who just end up mocking everything the mock astaire known i'm not a fan of that at all you end up with",
    "start": "2452450",
    "end": "2460520"
  },
  {
    "text": "with working on too many assumptions i would far rather work on bottom-up and",
    "start": "2460520",
    "end": "2466160"
  },
  {
    "text": "cut off the environmental code that's what use mocks too many interfaces",
    "start": "2466160",
    "end": "2471590"
  },
  {
    "text": "that's usually a symptom that you're doing you're over mocking or you're",
    "start": "2471590",
    "end": "2476810"
  },
  {
    "text": "using a framework that's not necessary to do nasty angled object graph well yes",
    "start": "2476810",
    "end": "2484370"
  },
  {
    "text": "let's just pass things in through the constructor let's look and work out what our dependency should be perhaps",
    "start": "2484370",
    "end": "2490610"
  },
  {
    "text": "interfaces are a way of doing that one the callback interfaces etc I'm not",
    "start": "2490610",
    "end": "2496340"
  },
  {
    "text": "really going to be helping you much with legacy code other than here's that drop-down pattern which is take that piece take the processing code away from",
    "start": "2496340",
    "end": "2503150"
  },
  {
    "text": "the i/o and drop it down so you can then make a pure function or at least accessible low value tests let's not",
    "start": "2503150",
    "end": "2511730"
  },
  {
    "text": "spend our time on that let's focus on the important stuff so this leads us to",
    "start": "2511730",
    "end": "2516860"
  },
  {
    "text": "an architectural focus on business value it's not it's more than testability it's",
    "start": "2516860",
    "end": "2525410"
  },
  {
    "text": "saying this is what we want this is why we want it let's focus on getting that in place with a minimum amount of glue",
    "start": "2525410",
    "end": "2533480"
  },
  {
    "text": "in order to be able to get that out I think that this adds significantly to develop a productivity because you can",
    "start": "2533480",
    "end": "2541130"
  },
  {
    "text": "then say right I can actually the useful things I'm not working on stuff that's not a value to the business",
    "start": "2541130",
    "end": "2549070"
  },
  {
    "text": "time to getting it working correctly so the feedback is much faster your unit tests deployment you've already worked",
    "start": "2549070",
    "end": "2555710"
  },
  {
    "text": "out that these are the areas where you need to deploy time to port it to somewhere else okay look that's",
    "start": "2555710",
    "end": "2561560"
  },
  {
    "text": "environmentally dependent code you know where that's going to be it's not in your core application because you pushed the side outside those interfaces and",
    "start": "2561560",
    "end": "2568520"
  },
  {
    "text": "mocks and you're separating the technical interface so first slide",
    "start": "2568520",
    "end": "2574850"
  },
  {
    "text": "repeated backed in at the beginning what's valuable your domain make sure",
    "start": "2574850",
    "end": "2580880"
  },
  {
    "text": "you can take that part out and get that under test know what is stable what's going to change and what's not well what",
    "start": "2580880",
    "end": "2589400"
  },
  {
    "text": "is going to change and work out how you're going to substitute those parts when you can see them coming get rid of",
    "start": "2589400",
    "end": "2594980"
  },
  {
    "text": "the environmental code behind some interfaces mock it out separate that stuff out be careful about object",
    "start": "2594980",
    "end": "2600890"
  },
  {
    "text": "construction because you're building lots of those ones don't hardwire in new in the middle of things nice constructor dependency or something",
    "start": "2600890",
    "end": "2607940"
  },
  {
    "text": "similar and separate out the high value code and isolate it so you can do that",
    "start": "2607940",
    "end": "2614360"
  },
  {
    "text": "one that is it really now anybody got",
    "start": "2614360",
    "end": "2621140"
  },
  {
    "text": "any questions shocked silence falling asleep just",
    "start": "2621140",
    "end": "2627260"
  },
  {
    "text": "thinking when's the coffee down is there any soft life left",
    "start": "2627260",
    "end": "2632530"
  },
  {
    "text": "hi",
    "start": "2632530",
    "end": "2635530"
  },
  {
    "text": "okay okay so the question was about",
    "start": "2649100",
    "end": "2654870"
  },
  {
    "text": "mocking time I went quite quickly over that because there's quite a lot of things in this how do you control time",
    "start": "2654870",
    "end": "2663380"
  },
  {
    "text": "so you have to make it's quite a subtle subject in a sense because you go well okay I need to have some way I need",
    "start": "2663380",
    "end": "2669840"
  },
  {
    "text": "reallt sometimes you need real time coming in in there for this particular application that network server I chose to say I'm",
    "start": "2669840",
    "end": "2676950"
  },
  {
    "text": "not going to use the system time at all I'm actually going to pass it in from the top that's not always possible it",
    "start": "2676950",
    "end": "2684150"
  },
  {
    "text": "also limited what I was trying to do because in terms of timeouts because I",
    "start": "2684150",
    "end": "2690420"
  },
  {
    "text": "was only sending a once per message once per second message if you need finer granularity than that you will need to",
    "start": "2690420",
    "end": "2696090"
  },
  {
    "text": "be looking at the clock I have seen people saying well okay I can add or I",
    "start": "2696090",
    "end": "2702990"
  },
  {
    "text": "can jump the clock forward which is yes it's a real-time clock a normal wall time clock and I'm adding zero to it",
    "start": "2702990",
    "end": "2709980"
  },
  {
    "text": "zero seconds to it unless you make a call to that interface and say add 30 seconds to it or whatever you can do",
    "start": "2709980",
    "end": "2716730"
  },
  {
    "text": "that as one thing to jump things forward the one of the alternatives is just",
    "start": "2716730",
    "end": "2724860"
  },
  {
    "text": "having a mocking and just an interface there it is environmental code so I have an interface I mock that and I can then",
    "start": "2724860",
    "end": "2730830"
  },
  {
    "text": "set the time so get time of day or whatever you can mock that in your tests and then in the real one you just have",
    "start": "2730830",
    "end": "2737340"
  },
  {
    "text": "the real time but that ability to be able to just add a certain amount of time offset it can be a youthful one",
    "start": "2737340",
    "end": "2743250"
  },
  {
    "text": "even in production systems I have seen people doing that anyone else hi",
    "start": "2743250",
    "end": "2754880"
  },
  {
    "text": "right so I've been having an interesting discussion with John Jagger about this one",
    "start": "2775740",
    "end": "2780990"
  },
  {
    "text": "pushing dependencies rather than pulling dependencies so let's learn a question",
    "start": "2780990",
    "end": "2786520"
  },
  {
    "text": "of stability on that you go where do I get my dependencies from who calls that",
    "start": "2786520",
    "end": "2793180"
  },
  {
    "text": "constructor who knows that this one I mean if it's you can do it all the top",
    "start": "2793180",
    "end": "2799270"
  },
  {
    "text": "level and that was a relatively simple small application of you know twenty thirty thousand lines or whatever it was",
    "start": "2799270",
    "end": "2804700"
  },
  {
    "text": "so you could actually do that if you're in if you're in a million line application it's gonna be very different if you have multiple components it's",
    "start": "2804700",
    "end": "2810220"
  },
  {
    "text": "going to be very different are you going to have to have multiple constructors",
    "start": "2810220",
    "end": "2816040"
  },
  {
    "text": "we've got one with two one with three one with four possibly who knows where",
    "start": "2816040",
    "end": "2821200"
  },
  {
    "text": "that comes from who makes that policy decision one of my favorite patterns is a is called escalate policy demote",
    "start": "2821200",
    "end": "2828940"
  },
  {
    "text": "mechanism that says right okay I try to push all the choices on my in my application up and everything below just",
    "start": "2828940",
    "end": "2836800"
  },
  {
    "text": "gets told what to do or just implements mechanisms it doesn't I don't embed policy below because that makes reuse",
    "start": "2836800",
    "end": "2844090"
  },
  {
    "text": "difficult I can't see I can't tell what's going on I can reuse components more easily when they're when they're parameterised there are options for",
    "start": "2844090",
    "end": "2852910"
  },
  {
    "text": "making context objects and passing those in and saying okay I pass in a context",
    "start": "2852910",
    "end": "2857920"
  },
  {
    "text": "object and this code all the services you need in it but you then essentially just move to sort of kind of service",
    "start": "2857920",
    "end": "2864010"
  },
  {
    "text": "locator and other ways of hiding it another so another possible point there",
    "start": "2864010",
    "end": "2873340"
  },
  {
    "text": "is if you need that thing give him the thing make it clear that you actually need this having explicit code that says",
    "start": "2873340",
    "end": "2880270"
  },
  {
    "text": "I no need for things not three things actually from an understandability point of view is really good what I don't want",
    "start": "2880270",
    "end": "2886480"
  },
  {
    "text": "to do is suddenly find I've got a fourth one underneath here that I forgot to start that I forgot to do this because I can't see it hiding",
    "start": "2886480",
    "end": "2893950"
  },
  {
    "text": "things with global variables and Singleton's is a it's convenient but it's not easy to understand it makes",
    "start": "2893950",
    "end": "2899800"
  },
  {
    "text": "testing harder so you may just go look yeah it's a pain I have to work out that",
    "start": "2899800",
    "end": "2905620"
  },
  {
    "text": "I have to put this one in here and who's the guy creating this one is it up here is it appears up here where's that",
    "start": "2905620",
    "end": "2910780"
  },
  {
    "text": "policy decision made if you have centralized configuration in a dependency injection container yes you",
    "start": "2910780",
    "end": "2916390"
  },
  {
    "text": "can do it there if you're not using one of those you're gonna have to work out what that what that is but that's also",
    "start": "2916390",
    "end": "2921700"
  },
  {
    "text": "sort of kind of thinking ahead with substitution points and what sort of kind of change to think you're gonna have you don't always get it right I",
    "start": "2921700",
    "end": "2927360"
  },
  {
    "text": "wish I did I'd be rich if I did but I don't anybody else okay thank you very",
    "start": "2927360",
    "end": "2936700"
  },
  {
    "text": "much [Applause]",
    "start": "2936700",
    "end": "2945040"
  }
]