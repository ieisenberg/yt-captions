[
  {
    "text": "so hi welcome everyone welcome to multitalent software architecture or as I like to call it keeping the noisy",
    "start": "2800",
    "end": "8440"
  },
  {
    "text": "neighbors happy the first question which I'm trying to answer is why are you all here",
    "start": "8440",
    "end": "14920"
  },
  {
    "text": "why are you sitting here listening to me and what I want you to take out of it so",
    "start": "14920",
    "end": "19960"
  },
  {
    "text": "let me tell you a little story I'm a software consultant for the past few years I've worked for a lot of companies",
    "start": "19960",
    "end": "26160"
  },
  {
    "text": "doing quite a l things but the common thing about most of these companies is that they",
    "start": "26160",
    "end": "32640"
  },
  {
    "text": "built a product now this product could be something very simple could be a very",
    "start": "32640",
    "end": "39520"
  },
  {
    "text": "complex goldplated expensive system it can be",
    "start": "39520",
    "end": "44719"
  },
  {
    "text": "some Legacy system which should have been burnt long time ago but you're still maintaining it and selling it because it brings in the money okay so",
    "start": "44719",
    "end": "51800"
  },
  {
    "text": "it doesn't really matter what the system does it's a product and the company sold",
    "start": "51800",
    "end": "57920"
  },
  {
    "text": "a product now the customers when they buy this product",
    "start": "57920",
    "end": "63399"
  },
  {
    "text": "they know what else do they have to do except for buying your license usually",
    "start": "63399",
    "end": "68560"
  },
  {
    "text": "they need to buy the hardware to run your your software they need to configure it they need to install it",
    "start": "68560",
    "end": "74360"
  },
  {
    "text": "they need to maintain it they need to upgrade it they need to do a whole bunch of it related stuff just to run your",
    "start": "74360",
    "end": "81479"
  },
  {
    "text": "software and guess what they don't like to do it they don't like doing that they",
    "start": "81479",
    "end": "86960"
  },
  {
    "text": "just want to go click a button get your software up and run and that's renter the world of the cloud",
    "start": "86960",
    "end": "94119"
  },
  {
    "text": "customers today come to vendors and they say well I want not a product but I want",
    "start": "94119",
    "end": "99560"
  },
  {
    "text": "a service I want to go to a website click a couple of buttons tweak a couple",
    "start": "99560",
    "end": "105119"
  },
  {
    "text": "of knobs the number of users the fruit put I need or whatever else that's required enter my credit card number",
    "start": "105119",
    "end": "112360"
  },
  {
    "text": "because I need to pay for it click go and then something automatically happens",
    "start": "112360",
    "end": "117799"
  },
  {
    "text": "behind the scenes and I get myself running no it no Hardware no installation no monitoring no anything now since that's",
    "start": "117799",
    "end": "126399"
  },
  {
    "text": "what the customers want a lot of vendors want to do that so vendors say hey let's",
    "start": "126399",
    "end": "132360"
  },
  {
    "text": "take our system whatever it is doesn't really matter let's throw it up into the cloud let's get in grunning sell it as a",
    "start": "132360",
    "end": "138599"
  },
  {
    "text": "service and off we go make bundles of money but you know what happens",
    "start": "138599",
    "end": "144160"
  },
  {
    "text": "next something like this reality hits them they come and say this something",
    "start": "144160",
    "end": "151519"
  },
  {
    "text": "like customers come and say okay how do I know you're secure how do I know that you that you're properly securing my",
    "start": "151519",
    "end": "158000"
  },
  {
    "text": "stuff how when new customers come in how do they provision new resources the",
    "start": "158000",
    "end": "164159"
  },
  {
    "text": "company the vendor how does the vendor the vendor monitor it now because now they now they're not in the business of",
    "start": "164159",
    "end": "170239"
  },
  {
    "text": "selling products now they're in the business of maintaining a running system a live system which probably needs to",
    "start": "170239",
    "end": "176599"
  },
  {
    "text": "run 24/7 and maybe serve customers poti around the globe that brings in an",
    "start": "176599",
    "end": "182400"
  },
  {
    "text": "entire new operation to this vendor and that's where I came in or the",
    "start": "182400",
    "end": "188080"
  },
  {
    "text": "software architect to try and show them how much they should do and what they",
    "start": "188080",
    "end": "193239"
  },
  {
    "text": "should work on in order to get their software running up in the cloud so what are we going to talk about",
    "start": "193239",
    "end": "200159"
  },
  {
    "text": "today first off we're going to start with a couple of definitions we're going to Define what is a multi-tenant",
    "start": "200159",
    "end": "205920"
  },
  {
    "text": "software uh system we'll Define what is a tenant we're going to talk about who is the",
    "start": "205920",
    "end": "211840"
  },
  {
    "text": "tenant the bulk of the talk will be around architectural issues involved in",
    "start": "211840",
    "end": "217159"
  },
  {
    "text": "creating multitenant software as a service systems in the last couple of minutes",
    "start": "217159",
    "end": "222920"
  },
  {
    "text": "we're going to discuss a couple of devops issues which you probably which you should probably take into account as",
    "start": "222920",
    "end": "229760"
  },
  {
    "text": "well but before I start I have a question for you how many of you are software Architects or Define yourself",
    "start": "229760",
    "end": "234959"
  },
  {
    "text": "as software Architects raise a hand okay let's say half I have a question for you",
    "start": "234959",
    "end": "241000"
  },
  {
    "text": "what is the best answer a software architect can give to any question yeah",
    "start": "241000",
    "end": "247239"
  },
  {
    "text": "right have you seen me before no probably haven't it depends okay what technology stch should",
    "start": "247239",
    "end": "254000"
  },
  {
    "text": "I use it depends should I write a web mobile client it depends which Cloud vendor should I use it depends you get a",
    "start": "254000",
    "end": "261560"
  },
  {
    "text": "picture so I have a short disclaimer to give you in this session I will not give",
    "start": "261560",
    "end": "267600"
  },
  {
    "text": "you the answers or not give you all the answers is how you should build your system and take it up to the cloud not",
    "start": "267600",
    "end": "273560"
  },
  {
    "text": "as a multitenant software as a service system but what I will attempt to give you is give you the questions you should",
    "start": "273560",
    "end": "281320"
  },
  {
    "text": "ask and some tips some pointers we have a couple of demos of how you can solve",
    "start": "281320",
    "end": "286600"
  },
  {
    "text": "these questions usually but again there's no there's no one size fits all for these kind of scenarios because",
    "start": "286600",
    "end": "293080"
  },
  {
    "text": "again it depends remember that uh so I hope you get the most out of this",
    "start": "293080",
    "end": "298520"
  },
  {
    "text": "session my name is Aran steer I'm the cloud division I'm the cloud division leader of a company called code value we",
    "start": "298520",
    "end": "304960"
  },
  {
    "text": "software consultant in Israel I'm a software architect a Microsoft Azure MVP",
    "start": "304960",
    "end": "310080"
  },
  {
    "text": "and also founder one of the biggest meetups for Azure in Israel one of our products is O code we",
    "start": "310080",
    "end": "317120"
  },
  {
    "text": "have a booth outside if any of your cop developers I do encourage you to go out there and check out the booth to make",
    "start": "317120",
    "end": "322160"
  },
  {
    "text": "your life much more better so let's get started what is multi tency okay I said",
    "start": "322160",
    "end": "328960"
  },
  {
    "text": "a lot of time multi ten software as a service system but what is multi",
    "start": "328960",
    "end": "335000"
  },
  {
    "text": "tendency okay the term software multi tendency okay and this is from Wikipedia",
    "start": "335919",
    "end": "341840"
  },
  {
    "text": "Wikipedia sometimes has pretty good definitions and we're going to go with that the term software multi tency",
    "start": "341840",
    "end": "347360"
  },
  {
    "text": "refers to a software architecture in which a single instance of software runs",
    "start": "347360",
    "end": "353120"
  },
  {
    "text": "on server and serves multiple tenants okay the key thing here is what you have",
    "start": "353120",
    "end": "358360"
  },
  {
    "text": "a single instance of software one system which gives service to a lot of tenants",
    "start": "358360",
    "end": "365680"
  },
  {
    "text": "we'll get back to the single instance later on but what is a tenant a tenant",
    "start": "365680",
    "end": "371319"
  },
  {
    "text": "is a group of users who share a common access with specific privileges to the software instance let me give you an",
    "start": "371319",
    "end": "378199"
  },
  {
    "text": "example to my company code value we use Office 365 office 3 365 is",
    "start": "378199",
    "end": "384759"
  },
  {
    "text": "Microsoft's uh service with exchange online SharePoint online Microsoft teams",
    "start": "384759",
    "end": "390639"
  },
  {
    "text": "all kind of productivity tools for organizations and Enterprises so if we look at that as an",
    "start": "390639",
    "end": "396560"
  },
  {
    "text": "example why is it bothering me right now sorry for that if you look at Office 365 as an",
    "start": "396560",
    "end": "405880"
  },
  {
    "text": "example all the users of code value my company are a tenant why because we",
    "start": "405880",
    "end": "411080"
  },
  {
    "text": "share access to the same files on SharePoint online we share access to the same teams on Microsoft teams to the",
    "start": "411080",
    "end": "418319"
  },
  {
    "text": "same channels to the same data not all of us necessarily have access to exactly",
    "start": "418319",
    "end": "423840"
  },
  {
    "text": "the same information but we share the permissions on the same items if we have",
    "start": "423840",
    "end": "429000"
  },
  {
    "text": "now an employee from another organization who's using Office 365 he won't see this data he won't see this",
    "start": "429000",
    "end": "434879"
  },
  {
    "text": "files he won't see these channels why because it's from another tenant okay so a tenant is a group of users who are",
    "start": "434879",
    "end": "440120"
  },
  {
    "text": "related to each other in some way and they usually have access to the same resources or they have permissions to",
    "start": "440120",
    "end": "445280"
  },
  {
    "text": "access to the same resources with a multitalent architecture a software application is designed to",
    "start": "445280",
    "end": "451919"
  },
  {
    "text": "provide every tenant a dedicated share of the instance including its data",
    "start": "451919",
    "end": "457039"
  },
  {
    "text": "configuration user management 10 individual functionality and nonfunctional properties and could be a",
    "start": "457039",
    "end": "462360"
  },
  {
    "text": "lot of things but all the tenants users have access to the same things as I said",
    "start": "462360",
    "end": "468879"
  },
  {
    "text": "now the last part is interesting multi- tency contrasts with",
    "start": "468879",
    "end": "474039"
  },
  {
    "text": "multi- instance architectures where separate software instances operate on behalf of different",
    "start": "474039",
    "end": "480840"
  },
  {
    "text": "let's go back to the system I told you at the beginning let's say we have the Software System running on permise we",
    "start": "480840",
    "end": "486120"
  },
  {
    "text": "take it to the clowd we want to take it to the cloud a valid solution would be is to say let's create some sort of",
    "start": "486120",
    "end": "493759"
  },
  {
    "text": "portal for customers to log in and let's say a customer comes in and buys our product then we can say okay when a",
    "start": "493759",
    "end": "499960"
  },
  {
    "text": "customer buys our product we'll spin up an instance of the system when another",
    "start": "499960",
    "end": "505000"
  },
  {
    "text": "customer comes in we spin up another instance of the system dedicated for that",
    "start": "505000",
    "end": "510080"
  },
  {
    "text": "customer and so on is it better or worse",
    "start": "510080",
    "end": "515200"
  },
  {
    "text": "what do you think what's the answer it depends right",
    "start": "515200",
    "end": "521159"
  },
  {
    "text": "it really depends on your requirements and we'll talk about it very soon but the key thing here is if",
    "start": "521159",
    "end": "527040"
  },
  {
    "text": "everything is separated then it's not really a multi-tenant system it might be a software service system but I like to",
    "start": "527040",
    "end": "533000"
  },
  {
    "text": "call it multiple single instance software as a service because we have a",
    "start": "533000",
    "end": "538360"
  },
  {
    "text": "lot of single tent instances and that's fine that's a valid solution I've done this before but you",
    "start": "538360",
    "end": "544320"
  },
  {
    "text": "should bear this in mind when when we talk in our talk today so we describe what for multi",
    "start": "544320",
    "end": "551000"
  },
  {
    "text": "tenant systems but we describe what is the tenant but who is the tenant and",
    "start": "551000",
    "end": "556760"
  },
  {
    "text": "let's say this is our system these are our customers and let's say that the building that's now marked on the slide",
    "start": "556760",
    "end": "563600"
  },
  {
    "text": "is an organization is an organization necessarily our tenant",
    "start": "563600",
    "end": "569920"
  },
  {
    "text": "what's the answer you should remember it by now it depends right sometimes it's",
    "start": "569920",
    "end": "575920"
  },
  {
    "text": "the C it's an organization sometimes it's a division inside the organization who is the",
    "start": "575920",
    "end": "582360"
  },
  {
    "text": "tenant and sometime it's a Department inside the division who is the tenant but how do we decide let me tell you a",
    "start": "582360",
    "end": "588600"
  },
  {
    "text": "story a couple of years ago I worked for a big ER multinational corporation and",
    "start": "588600",
    "end": "594600"
  },
  {
    "text": "they had this on premise software product which they sold to customers and it was very successful",
    "start": "594600",
    "end": "599920"
  },
  {
    "text": "they didn't want to replace it because what it did it it was managing a couple of machines on a manufacturing floor so",
    "start": "599920",
    "end": "606120"
  },
  {
    "text": "it can't be done from the cloud for many reasons but they wanted to add some additional value added services from the",
    "start": "606120",
    "end": "613200"
  },
  {
    "text": "cloud which are subscription based which will interact with the Ser with the software and they'll give additional",
    "start": "613200",
    "end": "619120"
  },
  {
    "text": "services so initially thought I thought well every organization who buys this product is a",
    "start": "619120",
    "end": "625480"
  },
  {
    "text": "tenant but then the product people came in and told me that actually when",
    "start": "625480",
    "end": "630600"
  },
  {
    "text": "they're dealing with large multinational customers then lot of the times each",
    "start": "630600",
    "end": "635880"
  },
  {
    "text": "division at that customer will buy the software separately they will get a",
    "start": "635880",
    "end": "640920"
  },
  {
    "text": "separate bill they have a separate customer ID in the vendor's database so",
    "start": "640920",
    "end": "646920"
  },
  {
    "text": "they're not really connected to each other so well okay so if we have small",
    "start": "646920",
    "end": "652240"
  },
  {
    "text": "customers then the organization is the tenant if we have large customers then each division or each entity which",
    "start": "652240",
    "end": "659639"
  },
  {
    "text": "corresponds to a client ID in the vendor's database is a tenant and that's Define that defines the scope of the",
    "start": "659639",
    "end": "667440"
  },
  {
    "text": "users but then they came in told me well if we sell this service to multiple",
    "start": "667440",
    "end": "673440"
  },
  {
    "text": "divisions at the same company their managers will definitely want to see a report across all the divisions because",
    "start": "673440",
    "end": "680560"
  },
  {
    "text": "otherwise we're not giving them a lot of value and what wait you can't do that because because no one can have access",
    "start": "680560",
    "end": "687880"
  },
  {
    "text": "to a lot of tents at the same time we have a lot of data so it's the same tenant but then you came back to the",
    "start": "687880",
    "end": "692920"
  },
  {
    "text": "first position and we had a lot of discussions there eventually we built a higher key there of tenant so it was a",
    "start": "692920",
    "end": "698000"
  },
  {
    "text": "more complicated case but I just want to tell you that who is the tent is a question that you should ask your",
    "start": "698000",
    "end": "703839"
  },
  {
    "text": "product your product teams whoever is defining the product but let me give you another",
    "start": "703839",
    "end": "710360"
  },
  {
    "text": "question let's say we have tenant a in blue and 10 B in red now let's say we",
    "start": "710360",
    "end": "717800"
  },
  {
    "text": "have a user who is is an employee of organization a and he's using our system and he has his user account he's using",
    "start": "717800",
    "end": "724320"
  },
  {
    "text": "the system everything's great then one Bright Day decides to leave what does he",
    "start": "724320",
    "end": "729560"
  },
  {
    "text": "do he's moving to organization B now what do you think when an organization",
    "start": "729560",
    "end": "737199"
  },
  {
    "text": "is using the same system the same software as a service system should that user that employee get a new set of",
    "start": "737199",
    "end": "743720"
  },
  {
    "text": "credentials and basically have a new user account or should his existing user",
    "start": "743720",
    "end": "749880"
  },
  {
    "text": "account migrate with him and just give him permissions to the new tenant what do you think which is better",
    "start": "749880",
    "end": "757399"
  },
  {
    "text": "it depends right again because this is not a technical question this is a a",
    "start": "757399",
    "end": "762560"
  },
  {
    "text": "mark not a marketing question again a product question what is the requirement both for valid cases if for example the",
    "start": "762560",
    "end": "770199"
  },
  {
    "text": "account is let's say in my case I work with code value so my account is RS Cod value.net and it's an organizational",
    "start": "770199",
    "end": "776720"
  },
  {
    "text": "account then if I work for another company it makes sense that I'll get another account but if I'm using let's",
    "start": "776720",
    "end": "783480"
  },
  {
    "text": "say a Google account or Facebook account or something doesn't make sense for me to open a new Facebook account just",
    "start": "783480",
    "end": "788839"
  },
  {
    "text": "because I moved to another organization right so it's more of a permission issue so this is the requirement and sometimes",
    "start": "788839",
    "end": "794600"
  },
  {
    "text": "you have to support both by the way and we can complicate this let's say that this user is not a full-time employee",
    "start": "794600",
    "end": "801360"
  },
  {
    "text": "let's say he's a consultant like me and now it needs to work for both organizations at the same time does he",
    "start": "801360",
    "end": "807560"
  },
  {
    "text": "have two separate users account or one user account with permission to both tenants at the same time that's a good",
    "start": "807560",
    "end": "813320"
  },
  {
    "text": "question again question for the client that's a question you should ask yourselves and whoever is defining the",
    "start": "813320",
    "end": "818800"
  },
  {
    "text": "requirements for a product okay so we talk about multi-tenant systems we talk about who",
    "start": "818800",
    "end": "825560"
  },
  {
    "text": "is the T we talk about who does the user belong to these are three basic questions that you should be keep in mind ask",
    "start": "825560",
    "end": "831440"
  },
  {
    "text": "yourselves let's go talk a little bit about architecture and now as opposed to what",
    "start": "831440",
    "end": "838120"
  },
  {
    "text": "he said here you should take the time and get the architecture right when you're migrating to the cloud and we're",
    "start": "838120",
    "end": "844320"
  },
  {
    "text": "going to discuss a a couple of questions we should you should really ask yourselves now as we go along we'll have",
    "start": "844320",
    "end": "850959"
  },
  {
    "text": "a couple of reference architectures which will see we'll see how they evolve",
    "start": "850959",
    "end": "856279"
  },
  {
    "text": "as I answer more and more questions so let's say we're talking about a messaging system for an organization",
    "start": "856279",
    "end": "862399"
  },
  {
    "text": "something like slack or Microsoft teams or whatever but it doesn't really matter the domain and let's say it's Implement",
    "start": "862399",
    "end": "868240"
  },
  {
    "text": "as a monolith so usually we'll have like this in the middle the back and API a big maybe it's a ball of mud maybe it's",
    "start": "868240",
    "end": "874519"
  },
  {
    "text": "something organized but it's a big something with all the business logic we have clients on top of it and we have",
    "start": "874519",
    "end": "880839"
  },
  {
    "text": "multiple data stores below whether it's SQL for relational data uh blob storage",
    "start": "880839",
    "end": "886040"
  },
  {
    "text": "for maybe attachments pictures stuff like that and ready cash to make things work faster so that's one possible",
    "start": "886040",
    "end": "892240"
  },
  {
    "text": "implementation another implementation maybe a microservice oriented implementation maybe on docker",
    "start": "892240",
    "end": "899560"
  },
  {
    "text": "will look like this we have a reverse proxy maybe engine X or something else",
    "start": "899560",
    "end": "905440"
  },
  {
    "text": "we have client on top clients coming in are authenticated using some sort of authentication Service which is right",
    "start": "905440",
    "end": "913519"
  },
  {
    "text": "here we have a user service for managing all the users their properties the",
    "start": "913519",
    "end": "918880"
  },
  {
    "text": "relationships who is a friend of who and so on and some sort of message service for",
    "start": "918880",
    "end": "925000"
  },
  {
    "text": "storing the messages themselves the detachments and so on so this is the possib implementation in micros service or in",
    "start": "925000",
    "end": "931440"
  },
  {
    "text": "the architecture for an on premise system and let's see how it",
    "start": "931440",
    "end": "937279"
  },
  {
    "text": "evolves so first of all let's talk about the first question that you should ask",
    "start": "937279",
    "end": "942480"
  },
  {
    "text": "yourself shared resources versus dedicated resources the first type of resource is",
    "start": "942480",
    "end": "948319"
  },
  {
    "text": "shared resources in here we have a space it could be a compute space like a web",
    "start": "948319",
    "end": "954040"
  },
  {
    "text": "application or it could be a data space a storage space like a database or storage account or",
    "start": "954040",
    "end": "960399"
  },
  {
    "text": "whatnot where multiple tenants get the requests served at the same time in the",
    "start": "960399",
    "end": "965959"
  },
  {
    "text": "same place those are shared resources the other type of resource",
    "start": "965959",
    "end": "972040"
  },
  {
    "text": "that we might have are dedicated resources where each tenant gets their own dedicated space so for example if",
    "start": "972040",
    "end": "979519"
  },
  {
    "text": "it's a database we might have a database per tenant or if it's a web application",
    "start": "979519",
    "end": "984560"
  },
  {
    "text": "we might have a web application instance per tenant and then then we need to figure out where to routee the requests",
    "start": "984560",
    "end": "991519"
  },
  {
    "text": "so we have shared resources and we have dedicated resources when you have your architecture like I showed you before",
    "start": "991519",
    "end": "997959"
  },
  {
    "text": "you need to go over each and every resource and decide is this a shared",
    "start": "997959",
    "end": "1003839"
  },
  {
    "text": "resource or a dedicated resource if all resources are dedicated then we said it's not a multi tenant system anymore",
    "start": "1003839",
    "end": "1010360"
  },
  {
    "text": "it's a single tenant system but assuming some are shared and some are dedicated we need to figure out which is who and",
    "start": "1010360",
    "end": "1017399"
  },
  {
    "text": "how do we manage it so why should we favor it why do you",
    "start": "1017399",
    "end": "1022839"
  },
  {
    "text": "think we should favor shared resources anyone what's the major benefit of sh of a shared",
    "start": "1022839",
    "end": "1028880"
  },
  {
    "text": "resource cost right exactly the major benefit of a shared resource is cost and",
    "start": "1028880",
    "end": "1035918"
  },
  {
    "text": "why is that assuming let's say we have multiple tenants we have tens or hundreds it doesn't",
    "start": "1035919",
    "end": "1041480"
  },
  {
    "text": "matter and if we give a dedicated resource for each and every one of them",
    "start": "1041480",
    "end": "1048199"
  },
  {
    "text": "we need to prepare for the maximum expected capacity of that tenant we need to over provision for each and every",
    "start": "1048199",
    "end": "1053960"
  },
  {
    "text": "tenant for the expected maximum capacity obviously we can scale each resource if we using the cloud but still we need to",
    "start": "1053960",
    "end": "1060640"
  },
  {
    "text": "provision enough capacity if we're talking about a single instance which serves multiple tenants let's say a web",
    "start": "1060640",
    "end": "1068520"
  },
  {
    "text": "app or something like that then assuming that not all tenants do their operations",
    "start": "1068520",
    "end": "1074080"
  },
  {
    "text": "at the exact same time and reach the peak load at the exact same time the load the load averages over time so we",
    "start": "1074080",
    "end": "1082440"
  },
  {
    "text": "don't need let's say we have 100 n we don't need 100 n time resources we might",
    "start": "1082440",
    "end": "1087600"
  },
  {
    "text": "need 70n or 50n it really depends on how the load distributes but it will be cheaper and",
    "start": "1087600",
    "end": "1095080"
  },
  {
    "text": "we get advantages for SES so this is main reason why to use shared",
    "start": "1095080",
    "end": "1100679"
  },
  {
    "text": "resources we'll use dedicated resources for security and privacy obviously let's",
    "start": "1100679",
    "end": "1106760"
  },
  {
    "text": "say we have a database per tenant if we connect the correct database for",
    "start": "1106760",
    "end": "1112240"
  },
  {
    "text": "request and that's a big F okay we'll get to that but let's say we connect to the correct database for a given request",
    "start": "1112240",
    "end": "1119760"
  },
  {
    "text": "and we got we know the correct tenant then no matter how bad our query is we",
    "start": "1119760",
    "end": "1125559"
  },
  {
    "text": "can't get data from another tenant and that's the biggest thing you should be scared of giving access to one tenant to",
    "start": "1125559",
    "end": "1133159"
  },
  {
    "text": "another tenant's data okay that's something you should be really afraid of that can take you out of business",
    "start": "1133159",
    "end": "1138200"
  },
  {
    "text": "literally if that happens to and let me tell you a story a good friend of mine is using a",
    "start": "1138200",
    "end": "1145480"
  },
  {
    "text": "multi service from a big corporation which you all know but I won't name them right now and he was using it and one",
    "start": "1145480",
    "end": "1152799"
  },
  {
    "text": "day he got a bill like usually does but the bill had information for another",
    "start": "1152799",
    "end": "1159480"
  },
  {
    "text": "customer now you can assume that if that gets public that's pretty bad because",
    "start": "1159480",
    "end": "1165559"
  },
  {
    "text": "you sent one t information maybe sensitive information what they you using what prices are they paying and so",
    "start": "1165559",
    "end": "1170640"
  },
  {
    "text": "on you send it to the wrong person at another organization okay so you need to be",
    "start": "1170640",
    "end": "1175799"
  },
  {
    "text": "really careful when you're working with a dedicated resource you minimize the risk okay so these are the reasons of",
    "start": "1175799",
    "end": "1182679"
  },
  {
    "text": "why should we favor each but how do we decide how do we decide for which resource what we should",
    "start": "1182679",
    "end": "1189679"
  },
  {
    "text": "use now the first thing we can use is the requirements go to product team and",
    "start": "1189679",
    "end": "1196159"
  },
  {
    "text": "ask what is our versioning or deployment strategy and now think about that that if we have",
    "start": "1196159",
    "end": "1201919"
  },
  {
    "text": "a shared resource anywhere then that really makes it harder for us to version or deploy",
    "start": "1201919",
    "end": "1207880"
  },
  {
    "text": "separately for tenants so if all our resources are dedicated for a single",
    "start": "1207880",
    "end": "1213039"
  },
  {
    "text": "tenant okay so it's not a multi tenant system I told you but then you can deploy a vers or give a version for each",
    "start": "1213039",
    "end": "1219360"
  },
  {
    "text": "tenant separately and then you can cater for various requests of various tenants",
    "start": "1219360",
    "end": "1225039"
  },
  {
    "text": "obviously this turns into a management nightmare because you have to support multiple versions at once but sometimes",
    "start": "1225039",
    "end": "1231720"
  },
  {
    "text": "if you don't have a lot of customers this is a good choice another option would be that if",
    "start": "1231720",
    "end": "1238640"
  },
  {
    "text": "we have shared resources across a region or deployment let's say where a system is deployed in the United States in",
    "start": "1238640",
    "end": "1245679"
  },
  {
    "text": "Europe and in Asia for example so if we have shared resources at the regional",
    "start": "1245679",
    "end": "1251440"
  },
  {
    "text": "level at the deployment level that means we can deploy only a single region at once we need to update all tenants in",
    "start": "1251440",
    "end": "1258000"
  },
  {
    "text": "that deployment at the same time we can't give separate versions to the separate",
    "start": "1258000",
    "end": "1264559"
  },
  {
    "text": "tenants the same thing happens across the global scale if we have a shared",
    "start": "1264559",
    "end": "1270120"
  },
  {
    "text": "resource which is global let's say we have a replicated database across all the globe let's say using Cosmos DB or",
    "start": "1270120",
    "end": "1277320"
  },
  {
    "text": "some sort of mongod DB replication or whatever it is then you pretty much tying yourself",
    "start": "1277320",
    "end": "1284760"
  },
  {
    "text": "together across the globe and you need to update the entire system at once now that's usually means that you need to",
    "start": "1284760",
    "end": "1290000"
  },
  {
    "text": "have an operating system for 24/7 that raises the question how do I update my application while it is still",
    "start": "1290000",
    "end": "1295840"
  },
  {
    "text": "running how do I update my database schema while is still rning but that's another set of question which is not specific for multitenant systems but you",
    "start": "1295840",
    "end": "1304039"
  },
  {
    "text": "can go to a product teams you can ask what is our deployment or versioning strategy and that will give you a hint",
    "start": "1304039",
    "end": "1309480"
  },
  {
    "text": "as to where can the shared resources and what scope can they be shared or",
    "start": "1309480",
    "end": "1315360"
  },
  {
    "text": "dedicated Another thing you can look at is the state manager of the resource so for example if we have a stateless",
    "start": "1315360",
    "end": "1322320"
  },
  {
    "text": "resource it could be let's say web application and we built it stateless because we were always thought that",
    "start": "1322320",
    "end": "1327520"
  },
  {
    "text": "stateful services are bad so let's say we built it stateless then if it doesn't",
    "start": "1327520",
    "end": "1332880"
  },
  {
    "text": "have any state it's a good candidate to be shared across multiple tenants",
    "start": "1332880",
    "end": "1337919"
  },
  {
    "text": "because no state is kept between request we still have to be careful though a lot",
    "start": "1337919",
    "end": "1343080"
  },
  {
    "text": "of the times we have you know like static variables or all kinds of thread context which move move around and stay",
    "start": "1343080",
    "end": "1349880"
  },
  {
    "text": "in all kinds of places we really need to be be aware of those and find those out to make sure we are really really",
    "start": "1349880",
    "end": "1355679"
  },
  {
    "text": "stateless so again so there's no no case that a thread which served one tenant",
    "start": "1355679",
    "end": "1361880"
  },
  {
    "text": "will be used to serve another tenant and they have something on the Fred context and you're pretty much done so you have",
    "start": "1361880",
    "end": "1369640"
  },
  {
    "text": "to be careful but again stateless services are usually good candidate for being sh",
    "start": "1369640",
    "end": "1376159"
  },
  {
    "text": "resources on the other hand if we have stateful resources like a database or a",
    "start": "1376159",
    "end": "1381960"
  },
  {
    "text": "stateful web up that's a good candidate for being a dedicated resource for the",
    "start": "1381960",
    "end": "1387080"
  },
  {
    "text": "tenant and it's obvious because if we have state and we know the state is coped to a single tenant then if the",
    "start": "1387080",
    "end": "1394159"
  },
  {
    "text": "request arrives at the correct instance then we're good again it doesn't always",
    "start": "1394159",
    "end": "1399640"
  },
  {
    "text": "say that needs to be the case sometimes if I tell you for example for a database",
    "start": "1399640",
    "end": "1405919"
  },
  {
    "text": "and my recommendation for database almost always almost always is to create a database per tenant because it gives",
    "start": "1405919",
    "end": "1411919"
  },
  {
    "text": "you good security a counter argument to that would be it's too expensive we now",
    "start": "1411919",
    "end": "1417200"
  },
  {
    "text": "need to create hundreds of databases or thousands of databases not only expensive we need to manage it manage it",
    "start": "1417200",
    "end": "1423279"
  },
  {
    "text": "all so these are all correct arguments and I'll give you a a tip on how you can",
    "start": "1423279",
    "end": "1428360"
  },
  {
    "text": "do that in a couple of slides but again there are good candidates for becoming dedicated",
    "start": "1428360",
    "end": "1435720"
  },
  {
    "text": "resources because I personally in my opinion I believe that the security and the privacy concerns are more important",
    "start": "1435720",
    "end": "1441600"
  },
  {
    "text": "here but again it depends like I told you on the other hand if you have something like a cach let's say red cach",
    "start": "1441600",
    "end": "1448279"
  },
  {
    "text": "or any other in memory cache if I tell you to set up a red cach for each tenant",
    "start": "1448279",
    "end": "1455080"
  },
  {
    "text": "let's say you hundred you have hundreds or thousands tenants that would definitely be way more expensive than you probably want to spend because it",
    "start": "1455080",
    "end": "1462000"
  },
  {
    "text": "will cost your customers a lot more because this is in memory and memory cost a lot of money so in that case",
    "start": "1462000",
    "end": "1468880"
  },
  {
    "text": "usually go with keep the single ready sket just make it bigger use the size",
    "start": "1468880",
    "end": "1474039"
  },
  {
    "text": "but you can use all kinds of tricks for example when you access a ready cash if you if you're access it through some",
    "start": "1474039",
    "end": "1480440"
  },
  {
    "text": "sort of infrastructure you control you can always concatenate the tenant ID to the key which you're accessing so you",
    "start": "1480440",
    "end": "1486919"
  },
  {
    "text": "know if all of your code accesses the ready cash through the same infrastructure and we talk about the",
    "start": "1486919",
    "end": "1492679"
  },
  {
    "text": "infrastructure later on but if all the code ex through the same infrastructure and the infrastructure you know that",
    "start": "1492679",
    "end": "1499120"
  },
  {
    "text": "it's tested and it always adds the tent ID if the tent ID is not there to for an exception for example then you can be",
    "start": "1499120",
    "end": "1505399"
  },
  {
    "text": "pretty sure that the data in the red Cas should be separated so if you look at the monolith",
    "start": "1505399",
    "end": "1511600"
  },
  {
    "text": "targ we saw before it can turn into something like this where we can say",
    "start": "1511600",
    "end": "1516720"
  },
  {
    "text": "that the back end API is stateless for example so it will be shell and the SQL",
    "start": "1516720",
    "end": "1521880"
  },
  {
    "text": "and blob storage are stateful and we want to create one per tenant so there'll be multiple of them and the red",
    "start": "1521880",
    "end": "1528679"
  },
  {
    "text": "caset we create some sort of logical uh regions for using appropriate keys or if",
    "start": "1528679",
    "end": "1535360"
  },
  {
    "text": "we look at the multi sorry the microservice architecture it can look something like this we can say that for example in this",
    "start": "1535360",
    "end": "1542600"
  },
  {
    "text": "case the user service is common because a user might be might belong to a lot of tenants because that's the requirement I",
    "start": "1542600",
    "end": "1548760"
  },
  {
    "text": "told you it depends on the requirement but the message service we can decide that it would be per tenant and then we",
    "start": "1548760",
    "end": "1556080"
  },
  {
    "text": "turn it into a rounting issue because when when a request comes in and let's say the ref first proxy is aware of the",
    "start": "1556080",
    "end": "1561200"
  },
  {
    "text": "tenant like maybe it's in a header or in a sign token or something like that then",
    "start": "1561200",
    "end": "1566720"
  },
  {
    "text": "the reverse proxy can route the request to the appropriate instant of the message service and then it becomes a simpler problem okay so that's the idea",
    "start": "1566720",
    "end": "1574559"
  },
  {
    "text": "of what you can do now it doesn't have to be always one",
    "start": "1574559",
    "end": "1579840"
  },
  {
    "text": "or the other there are types of resources which can help you get the best of both FS both cost and security",
    "start": "1579840",
    "end": "1587799"
  },
  {
    "text": "so for example if we have the Azure app Service as you might know in an app",
    "start": "1587799",
    "end": "1593240"
  },
  {
    "text": "hosting plan you only pay for the resources but you can provision as many web applications as you want obviously",
    "start": "1593240",
    "end": "1598399"
  },
  {
    "text": "provisioning many web applications has its cost because you're using resources but you only pay once for the poor of",
    "start": "1598399",
    "end": "1604320"
  },
  {
    "text": "resources that you have the same thing goes to storage accounts you only pay for the storage it doesn't really matter",
    "start": "1604320",
    "end": "1610520"
  },
  {
    "text": "how many containers do you have or how many storage accounts do you have there is a limit on the number of storage accounts but it doesn't but it doesn't",
    "start": "1610520",
    "end": "1616679"
  },
  {
    "text": "matter on the building itself so you can separate for containers for storage accounts depending on number of",
    "start": "1616679",
    "end": "1622399"
  },
  {
    "text": "tenants you have and the one the one I want to demonstrate is the SQL server in Azure",
    "start": "1622399",
    "end": "1629360"
  },
  {
    "text": "SQL we have a mechanism it's called elastic pools how many of you have heard of it raise of hand okay few okay great",
    "start": "1629360",
    "end": "1638039"
  },
  {
    "text": "so elastic pools or mechanism in which was built specifically for",
    "start": "1638039",
    "end": "1643720"
  },
  {
    "text": "isvs where you can buy a pool of resources instead of buying a database",
    "start": "1643720",
    "end": "1649120"
  },
  {
    "text": "one by one and paying one by one you can buy a pool of resources and you can deploy as many",
    "start": "1649120",
    "end": "1656320"
  },
  {
    "text": "databases as you want obviously there is a limit but you can deploy multiple databases in that pool and all these",
    "start": "1656320",
    "end": "1662799"
  },
  {
    "text": "databases will share a pool much like like a logical server let's say you have a logical server you can run multiple",
    "start": "1662799",
    "end": "1668440"
  },
  {
    "text": "databases on top of it so using this abstraction we can pay once for the pool",
    "start": "1668440",
    "end": "1674760"
  },
  {
    "text": "of resources and assuming not all tenants have the operations at the same time the load will be spread but we'll",
    "start": "1674760",
    "end": "1681480"
  },
  {
    "text": "get one database per tenant or one database per several tenants we can",
    "start": "1681480",
    "end": "1686720"
  },
  {
    "text": "decide so let's see how it works okay let's get out of",
    "start": "1686720",
    "end": "1692679"
  },
  {
    "text": "PowerPoint now all the code I'm showing you today it's all on GitHub on public",
    "start": "1692679",
    "end": "1698159"
  },
  {
    "text": "repository I'll make sure to post it the URL when the slides or up but if you",
    "start": "1698159",
    "end": "1703360"
  },
  {
    "text": "want to you can look in GitHub R stealer it's called noisy neighbors you'll find their all the code",
    "start": "1703360",
    "end": "1708679"
  },
  {
    "text": "so let's see what we have here we I have a script here a small",
    "start": "1708679",
    "end": "1714080"
  },
  {
    "text": "poell script this can be done for arm templates for the portal it doesn't really matter it creates a resource",
    "start": "1714080",
    "end": "1719679"
  },
  {
    "text": "Group it creates a SQL Server we have here a new Azure RM SQL Server creates",
    "start": "1719679",
    "end": "1725200"
  },
  {
    "text": "the firewall rules to open up the the the ports in the firewall sorry the IP addresses so far it's pretty simple and",
    "start": "1725200",
    "end": "1732799"
  },
  {
    "text": "then we create something which is called Azure M elastic pool so which is what I told you so we can see I specify the",
    "start": "1732799",
    "end": "1739640"
  },
  {
    "text": "tier this defines the all kinds of features that you can get and the DTU is",
    "start": "1739640",
    "end": "1745559"
  },
  {
    "text": "database transaction units this defines the scale of the pool okay so we can start from 50 50 is the lowest one you",
    "start": "1745559",
    "end": "1752159"
  },
  {
    "text": "can go higher as much as you need the limitations for each tier now I can also",
    "start": "1752159",
    "end": "1759000"
  },
  {
    "text": "specify database DTU mean and database DTU Max I can guarantee that each",
    "start": "1759000",
    "end": "1764559"
  },
  {
    "text": "database will get at least 10 dtus in this case so that no database no tenant",
    "start": "1764559",
    "end": "1770039"
  },
  {
    "text": "will be starved because other tenants have a lot of operation can Define the",
    "start": "1770039",
    "end": "1775360"
  },
  {
    "text": "maximum okay so no one tenant will get a lot of resources While others again",
    "start": "1775360",
    "end": "1781240"
  },
  {
    "text": "don't so I already ran the script and if I'll go to the portal I open the elastic",
    "start": "1781240",
    "end": "1787360"
  },
  {
    "text": "pool it created a resource called an elastic pool okay we can configure it we",
    "start": "1787360",
    "end": "1793960"
  },
  {
    "text": "can see that every database has 10 to 20 edus it has 50 elastic Ed is elastic DTU",
    "start": "1793960",
    "end": "1800760"
  },
  {
    "text": "in total this one already has four databases I'll show you how they're created but you can see here and you can",
    "start": "1800760",
    "end": "1806360"
  },
  {
    "text": "see the resource utilization right now it's doing nothing because I didn't run anything on the",
    "start": "1806360",
    "end": "1811880"
  },
  {
    "text": "pool and once I have databases which will show in a moment we can see the utilization per",
    "start": "1811880",
    "end": "1818799"
  },
  {
    "text": "database so let's say I run the script I created the elastic pool but how do I use it now I can use the elastic pool",
    "start": "1818799",
    "end": "1827320"
  },
  {
    "text": "just like any other SQL Server I can create a database with Powershell with t SQL with ado.net with whatever you want",
    "start": "1827320",
    "end": "1835399"
  },
  {
    "text": "and it works you just need to specify there's a way to specify that the database should be as part of a a",
    "start": "1835399",
    "end": "1841200"
  },
  {
    "text": "specific pool so that'll work I'm not showing that what I want to show you here is a small application which is",
    "start": "1841200",
    "end": "1847039"
  },
  {
    "text": "based on the uh elastic SQL samples as you can see it uses some sort",
    "start": "1847039",
    "end": "1853919"
  },
  {
    "text": "of Library so Microsoft Azure SQL database elastic scale Shard management",
    "start": "1853919",
    "end": "1859639"
  },
  {
    "text": "some of you might have heard the term Shard Shard usually refers to when you have a database and you split it up due to scale it's part of the database is",
    "start": "1859639",
    "end": "1866720"
  },
  {
    "text": "really called aard now A Shard can be on a regional basis it can be on a date",
    "start": "1866720",
    "end": "1872720"
  },
  {
    "text": "basis on a Time basis in our case it will be on a tenant ID basis we'll sh the database according to tenant IDs",
    "start": "1872720",
    "end": "1879279"
  },
  {
    "text": "because that's what I want to do so this utility what it gives us the SDK it",
    "start": "1879279",
    "end": "1884799"
  },
  {
    "text": "gives us a class it's called Shard map manager which allows us to create shs and create",
    "start": "1884799",
    "end": "1890840"
  },
  {
    "text": "the mappings for the shs so I'm not going to go into the details of how this code is built you can download later and",
    "start": "1890840",
    "end": "1897080"
  },
  {
    "text": "it's pretty much straightforward but we create this sh map manager then we create the",
    "start": "1897080",
    "end": "1902600"
  },
  {
    "text": "shards I already run this because it will take uh two or three minutes to for it to run so you have to believe me this",
    "start": "1902600",
    "end": "1908840"
  },
  {
    "text": "code Works before the session what we have here is that we create a sh map the sh map manager can",
    "start": "1908840",
    "end": "1915080"
  },
  {
    "text": "create several Maps it can it can control several Shard sets if you'd like",
    "start": "1915080",
    "end": "1921000"
  },
  {
    "text": "or Shard maps how they called here and then we create the tenants we run across the number of T we want to create in our",
    "start": "1921000",
    "end": "1927080"
  },
  {
    "text": "case it's four then we create a Shard what does it do for creating a Shard as you can see it gets an ID and the",
    "start": "1927080",
    "end": "1934120"
  },
  {
    "text": "existing map it's create an empty Shard if I go into this code all it does it as you can",
    "start": "1934120",
    "end": "1940080"
  },
  {
    "text": "see is it creates the database there's a SQL script here for initializing a database an empty database A Shard",
    "start": "1940080",
    "end": "1946480"
  },
  {
    "text": "here's what it looks like it has a region table and a products table and a customers tables and this is the what we",
    "start": "1946480",
    "end": "1953080"
  },
  {
    "text": "want to initialize a new tenant with so it creates the database let's go",
    "start": "1953080",
    "end": "1960200"
  },
  {
    "text": "back and here we go here and then it creates something called Point mapping",
    "start": "1960200",
    "end": "1965559"
  },
  {
    "text": "on the sh map what do we tell it we tell it that this is the ID that you want to",
    "start": "1965559",
    "end": "1970720"
  },
  {
    "text": "associate with the database and this is dat data the database we just created so",
    "start": "1970720",
    "end": "1975919"
  },
  {
    "text": "we created a mapping we told it 10 one this is the database 10 and two this is the database and so for and this is",
    "start": "1975919",
    "end": "1982120"
  },
  {
    "text": "stored behind the scen it's stored in a SQL database a separate database for controlling this and it's all done for",
    "start": "1982120",
    "end": "1988279"
  },
  {
    "text": "you behind the scenes you don't need you don't need to touch it in the in the application config there's a connection",
    "start": "1988279",
    "end": "1993440"
  },
  {
    "text": "string there to where it should connect where it should store this data but how do we use it in runtime so this is",
    "start": "1993440",
    "end": "1999679"
  },
  {
    "text": "called right now this code creates four tenants in advanced where is that here",
    "start": "1999679",
    "end": "2004720"
  },
  {
    "text": "just that in advance when it starts if it don't exist obviously in the real application you would call this every time you create a new",
    "start": "2004720",
    "end": "2011799"
  },
  {
    "text": "tenant now once you have these tenants up and running and as you saw earlier we have four databases in the elastic pool",
    "start": "2011799",
    "end": "2019760"
  },
  {
    "text": "they are called tenants 0 1 2 3 and four as they're defined in the code let's",
    "start": "2019760",
    "end": "2025240"
  },
  {
    "text": "hope it'll load soon okay here they are here are those",
    "start": "2025240",
    "end": "2030279"
  },
  {
    "text": "databases you can see the peak for everyone the average their size right now there's not a lot of data in there but if I run this code",
    "start": "2030279",
    "end": "2039279"
  },
  {
    "text": "after after I create the shm manager create the shells if they don't already exist there's a small matter it's called",
    "start": "2039279",
    "end": "2046120"
  },
  {
    "text": "execute data dependent routing query now this method what it does it mimics the",
    "start": "2046120",
    "end": "2052440"
  },
  {
    "text": "behavior TR time where you have a request you know the 10 ID for that request how do you know that's again",
    "start": "2052440",
    "end": "2058358"
  },
  {
    "text": "that's out of scope right now but usually it's in the property of a sign token or something like that that you uh",
    "start": "2058359",
    "end": "2064398"
  },
  {
    "text": "some claim you give to the user and why it does this is not it entered",
    "start": "2064399",
    "end": "2070638"
  },
  {
    "text": "the get connection string that's not what I wanted here we go so in our case I just randomly generate a customer ID",
    "start": "2070639",
    "end": "2077480"
  },
  {
    "text": "let's say three that's the 10 ID I want to update usually again this will come from the request from the context of the",
    "start": "2077480",
    "end": "2083280"
  },
  {
    "text": "request and once I have it let's say I want to add a customer to that tenant so",
    "start": "2083280",
    "end": "2088960"
  },
  {
    "text": "if I go in here and this is the interesting code and there's a retry",
    "start": "2088960",
    "end": "2094358"
  },
  {
    "text": "policy here it doesn't really matter but what I want you to look at is this line of code see here sh map open connection",
    "start": "2094359",
    "end": "2101560"
  },
  {
    "text": "for key free and the connection sync for the controller database so what happened",
    "start": "2101560",
    "end": "2107480"
  },
  {
    "text": "here is I don't really care about the separate databases and the connection strings and their names and everything I",
    "start": "2107480",
    "end": "2113200"
  },
  {
    "text": "have a mapping I went to the shap I told him I want to open a connection to the database of tenant ID X once I have that",
    "start": "2113200",
    "end": "2121400"
  },
  {
    "text": "connection string I'm connected to that specific database okay and I can run queries and I know that I won't get the",
    "start": "2121400",
    "end": "2128320"
  },
  {
    "text": "wrong data from the wrong tenant because I'm Bound by the scope of the database okay so this is quite a",
    "start": "2128320",
    "end": "2135440"
  },
  {
    "text": "powerful tool imagine you don't need to manage the sh yourselves you can have a runtime which manages for you manages it",
    "start": "2135440",
    "end": "2141560"
  },
  {
    "text": "for you and then it does the query and goes to the correct tenant but not only that you might say that when we run this",
    "start": "2141560",
    "end": "2149160"
  },
  {
    "text": "when let's say we have 100 databases 1,000 databases how do we manage it let's say we need to update your schema",
    "start": "2149160",
    "end": "2155720"
  },
  {
    "text": "do you imagine going database one by one and updating the scheme and everyone coordinated it no that's a lot of work",
    "start": "2155720",
    "end": "2161960"
  },
  {
    "text": "so luckily for us another thing that we got from Azure with elastic pools is something it's called elastic",
    "start": "2161960",
    "end": "2168400"
  },
  {
    "text": "jobs and now I have a small script oops now I have a small script",
    "start": "2168400",
    "end": "2173680"
  },
  {
    "text": "here what this does it gets a credential for connecting to the pool and then I",
    "start": "2173680",
    "end": "2179440"
  },
  {
    "text": "want to run this script for example this script creates a table I want to update the schema and I want to run it across",
    "start": "2179440",
    "end": "2185920"
  },
  {
    "text": "all of my tenants so I create something that's called a",
    "start": "2185920",
    "end": "2191319"
  },
  {
    "text": "job I create a job content with the script and then I create new I specify",
    "start": "2191319",
    "end": "2196720"
  },
  {
    "text": "the Target in this case the target is The Shard map itself you know I'm using The Shard map but I can specify any",
    "start": "2196720",
    "end": "2203599"
  },
  {
    "text": "custom set of databases that I like or the all database in the pool I can play around with it I create a Target and",
    "start": "2203599",
    "end": "2210599"
  },
  {
    "text": "then I create the job and I tell it to run and once I run this let's run this",
    "start": "2210599",
    "end": "2216200"
  },
  {
    "text": "code it ask for my credentials and let me enter my super secret",
    "start": "2216200",
    "end": "2222119"
  },
  {
    "text": "password here and it should run hopefully relatively fast and this will go ahead and start the job now when I",
    "start": "2222119",
    "end": "2231000"
  },
  {
    "text": "want to print out the execution status let's see where it stands you can see",
    "start": "2231000",
    "end": "2236560"
  },
  {
    "text": "that it's still in progress we have one one job the parent job which we created",
    "start": "2236560",
    "end": "2242440"
  },
  {
    "text": "and that that job went ahead and scheduled four other jobs for the four databases",
    "start": "2242440",
    "end": "2247920"
  },
  {
    "text": "and it we will go in coord to retry it to do all the operations required for updating the schema and when I R again",
    "start": "2247920",
    "end": "2254359"
  },
  {
    "text": "it should be completed by now so here you go it succeeded we successfully updated the schema across all the",
    "start": "2254359",
    "end": "2260839"
  },
  {
    "text": "databases in the pool and you can do both scheme updates you can do queries across multiple database in the pool you",
    "start": "2260839",
    "end": "2267319"
  },
  {
    "text": "can do all types of things with elastic jobs so for good",
    "start": "2267319",
    "end": "2273520"
  },
  {
    "text": "great let's get back to the session",
    "start": "2273520",
    "end": "2279000"
  },
  {
    "text": "so we saw an example of how we can get both resource separation but still get",
    "start": "2279280",
    "end": "2285119"
  },
  {
    "text": "the benefits of the cost for the scale now one thing you can do is let the",
    "start": "2285119",
    "end": "2292440"
  },
  {
    "text": "customer decide have you heard the word premium tier or ultimate or Enterprise",
    "start": "2292440",
    "end": "2297720"
  },
  {
    "text": "or whatever you can go with a shared uh architecture shed resource",
    "start": "2297720",
    "end": "2304119"
  },
  {
    "text": "architecture where you share resources for cost and you you know that you risk privacy sometimes but you do the you do",
    "start": "2304119",
    "end": "2310480"
  },
  {
    "text": "your best to test it and you know it's okay for your customers sometimes it's okay best effort they won't ask but",
    "start": "2310480",
    "end": "2317640"
  },
  {
    "text": "sometimes there will come that customer and say hey I don't want my data stored with all of them I don't care about them",
    "start": "2317640",
    "end": "2323480"
  },
  {
    "text": "I want to make sure that my data sits alone it's not with anyone else and I'm willing to pay for it so so a lot of",
    "start": "2323480",
    "end": "2330079"
  },
  {
    "text": "times you can have solve it as a premium tal the customer decide if the customer pays for the decade resources they can",
    "start": "2330079",
    "end": "2336040"
  },
  {
    "text": "have their own instance of the application as far as you just need to manage it into the cost okay so this is",
    "start": "2336040",
    "end": "2342599"
  },
  {
    "text": "again this is not a technical question this is a question for the marketing for the product team but you can definitely raise it and offer it maybe not for",
    "start": "2342599",
    "end": "2350040"
  },
  {
    "text": "starters but later on is the product Progressive now what happens if we need",
    "start": "2350040",
    "end": "2357920"
  },
  {
    "text": "operations which are cross tenants okay we need to run some sort of query let's say we're running a and again this is",
    "start": "2357920",
    "end": "2365400"
  },
  {
    "text": "another customer that I have what they have they have a multitenant system and as part of the system they're running a",
    "start": "2365400",
    "end": "2371400"
  },
  {
    "text": "machine learning algorithm which outputs all kinds of events for the tenants but what they need is they need to get",
    "start": "2371400",
    "end": "2377400"
  },
  {
    "text": "statistical information about the algorithm about its performance across all tenants so they can tweak it so they",
    "start": "2377400",
    "end": "2385040"
  },
  {
    "text": "can make it work better so they can develop things more sophisticated you get it across all tenants now the best",
    "start": "2385040",
    "end": "2392040"
  },
  {
    "text": "thing I can tell in this case is first of all be careful you don't want to cross from one to another just like that",
    "start": "2392040",
    "end": "2400079"
  },
  {
    "text": "but something else you can do that's something I usually do the tip I give you can you can you should try and",
    "start": "2400079",
    "end": "2408079"
  },
  {
    "text": "separate and isolate the problem as much as you can meaning for this example if",
    "start": "2408079",
    "end": "2413200"
  },
  {
    "text": "we have let's say a database per tenant with all the information we need to gather we can set up some sort of ETL",
    "start": "2413200",
    "end": "2420079"
  },
  {
    "text": "process which extracts data from all the databases automatically into another",
    "start": "2420079",
    "end": "2426119"
  },
  {
    "text": "separated database with only the data we need only the statistics maybe it's anonymized it has only the information",
    "start": "2426119",
    "end": "2432200"
  },
  {
    "text": "we require and then govern the access to that database separately that will probably be used only by internal",
    "start": "2432200",
    "end": "2437520"
  },
  {
    "text": "employees and and stuff like that so you should really isolate it as much as you",
    "start": "2437520",
    "end": "2443800"
  },
  {
    "text": "can another example I gave you is with the customer at the beginning with the sub tenants to build the hierarchy again",
    "start": "2443800",
    "end": "2450599"
  },
  {
    "text": "this was another case that we need to have cross tent operations so in that case we had we had a let's call it a",
    "start": "2450599",
    "end": "2458960"
  },
  {
    "text": "super tenant which had its own database in that case and the sub tenants they",
    "start": "2458960",
    "end": "2464480"
  },
  {
    "text": "were sharing a database so it was a hierarchy so we need to be careful inside the tenant but we could at least get the reports we wanted across the",
    "start": "2464480",
    "end": "2471359"
  },
  {
    "text": "what we call subtenant eventually so this is the question of shared versus dedicated let's talk a",
    "start": "2471359",
    "end": "2478400"
  },
  {
    "text": "little bit about unboarding uh onboarding and provisioning when you Pro when you build",
    "start": "2478400",
    "end": "2486440"
  },
  {
    "text": "such a system you need to remember that as opposed to an on premise system you need a way to unboard new customers new",
    "start": "2486440",
    "end": "2492359"
  },
  {
    "text": "customers come in and they want this they want a way to log into the portal",
    "start": "2492359",
    "end": "2497599"
  },
  {
    "text": "put the credit cards pay you the money you want and use your system and that's another functionality which you need to",
    "start": "2497599",
    "end": "2503760"
  },
  {
    "text": "think of you need to think about the web portal you need to think about the business logic behind the scenes which",
    "start": "2503760",
    "end": "2508960"
  },
  {
    "text": "Provisions new resources because if we have a database per tenant we need to build create the database if you have",
    "start": "2508960",
    "end": "2515240"
  },
  {
    "text": "some sort of tenant configuration we need to update upd it that's the entire process onboarding and also tenants who",
    "start": "2515240",
    "end": "2521079"
  },
  {
    "text": "are leaving you need to think about if someone is done or someone is updating their usage plan you you think about all",
    "start": "2521079",
    "end": "2527200"
  },
  {
    "text": "these things a lot of customers you'll be surprised they don't think about it when they on to the cloud ask them well",
    "start": "2527200",
    "end": "2533040"
  },
  {
    "text": "how the customer is going to start using your software and say um we didn't think about that it's a good question we",
    "start": "2533040",
    "end": "2538560"
  },
  {
    "text": "really need do need to think about it so here we have some example code for",
    "start": "2538560",
    "end": "2543720"
  },
  {
    "text": "example this is using the Azure RMS DEC for example to create a storage account",
    "start": "2543720",
    "end": "2549520"
  },
  {
    "text": "if you have a storage account per tenant so we're creating a storage management client go do storage account code create",
    "start": "2549520",
    "end": "2555240"
  },
  {
    "text": "a sync then we go and provision the required resources this is behind the",
    "start": "2555240",
    "end": "2560640"
  },
  {
    "text": "scenes now obviously you need to we to charge your customers again billing this",
    "start": "2560640",
    "end": "2566599"
  },
  {
    "text": "is not specific for multi-tenant systems in it's it's generic software as a",
    "start": "2566599",
    "end": "2571680"
  },
  {
    "text": "service problem but it's still something you need to keep in your mind so if we",
    "start": "2571680",
    "end": "2576920"
  },
  {
    "text": "have this monolit architecture from before now we have a new provisioning portal",
    "start": "2576920",
    "end": "2582200"
  },
  {
    "text": "and a new section of business Logic for tenant provisioning the same thing goes to microservices we need another",
    "start": "2582200",
    "end": "2587760"
  },
  {
    "text": "provisioning portal which is another UI it's a separate client and with another service to handle all of this business",
    "start": "2587760",
    "end": "2594920"
  },
  {
    "text": "Logic for us another thing which you which we should consider is global reach where",
    "start": "2594920",
    "end": "2602119"
  },
  {
    "text": "are our tenants located and this is a requirements question are our tenants located in specific region America",
    "start": "2602119",
    "end": "2609400"
  },
  {
    "text": "Europe whatever or are they Global if we",
    "start": "2609400",
    "end": "2614480"
  },
  {
    "text": "have a company which all of it is located in Europe for example then great when they sign up they can tell us they",
    "start": "2614480",
    "end": "2621040"
  },
  {
    "text": "want to be in Europe and then we can provision the resources in Europe but we if we have a company with offices in",
    "start": "2621040",
    "end": "2626880"
  },
  {
    "text": "both Europe and North America we can't really ask them in which data set they want to be you need to be Global again",
    "start": "2626880",
    "end": "2633559"
  },
  {
    "text": "this goes back to the shared resources question and the version in question now one thing to keep in mind is data",
    "start": "2633559",
    "end": "2640559"
  },
  {
    "text": "residency I don't know if your systems fall under it but there are a lot of countries and namely a lot of them in",
    "start": "2640559",
    "end": "2647200"
  },
  {
    "text": "the EU specifically German Germany and France and the UK they have all kinds of",
    "start": "2647200",
    "end": "2652720"
  },
  {
    "text": "rules that if you gather sensitive user information you need to store it in that country when you operate such a multi",
    "start": "2652720",
    "end": "2660359"
  },
  {
    "text": "system and you have customers especially if they're Global but part of their users are let's say in Germany they need to store the data in Germany think about",
    "start": "2660359",
    "end": "2667480"
  },
  {
    "text": "it when you build your provisioning process where do you provision the database the storage account does your",
    "start": "2667480",
    "end": "2672640"
  },
  {
    "text": "Cloud vendor give you a solution for your requirements and this is a product question do you need to think about it",
    "start": "2672640",
    "end": "2678440"
  },
  {
    "text": "or not this is a product question but it should be in your mind let me skip encryption for a",
    "start": "2678440",
    "end": "2687319"
  },
  {
    "text": "while let's talk a little bit about infrastructure as I said before if you",
    "start": "2687839",
    "end": "2694680"
  },
  {
    "text": "have shared resource sorry dedicated resources you need to know where to Route the request I told you if you're",
    "start": "2694680",
    "end": "2700319"
  },
  {
    "text": "going to the red cash have infrastructure which makes you to add the tent ID and if you have multiple",
    "start": "2700319",
    "end": "2708319"
  },
  {
    "text": "message Services you need to know where to route that request these are all infrastructures and these",
    "start": "2708319",
    "end": "2714520"
  },
  {
    "text": "infrastructures the common thing between them is that they handle cases in concurrent concurrently of multiple",
    "start": "2714520",
    "end": "2721839"
  },
  {
    "text": "tenants and these places need to be well well well secured so it won't get up in",
    "start": "2721839",
    "end": "2728480"
  },
  {
    "text": "this situation where the story I told you before with the uh customer getting the wrong bill so my recommendation here",
    "start": "2728480",
    "end": "2735800"
  },
  {
    "text": "in this case is have some sort of tenant Management Service have this one place",
    "start": "2735800",
    "end": "2741800"
  },
  {
    "text": "this one location it could be a service it can be a component if it's a monol it doesn't really matter but it's one place",
    "start": "2741800",
    "end": "2747800"
  },
  {
    "text": "where you can go give it your token for example it return you the tent ID and",
    "start": "2747800",
    "end": "2753040"
  },
  {
    "text": "all the configuration that will be one place which will store connection stre IDs of encryption Keys storage account",
    "start": "2753040",
    "end": "2760359"
  },
  {
    "text": "identifiers various Secrets related to specific tenants so we have one place and one place",
    "start": "2760359",
    "end": "2765640"
  },
  {
    "text": "alone where this functionality exists where you need to test this functionality okay to test it and which",
    "start": "2765640",
    "end": "2772079"
  },
  {
    "text": "you need to secure okay this obviously be a very basic component in your",
    "start": "2772079",
    "end": "2777280"
  },
  {
    "text": "system so if we go back to the architecture instead of having the tenant provisioning now we have some",
    "start": "2777280",
    "end": "2782559"
  },
  {
    "text": "sort of tenant management logic with maybe a database or a data store it doesn't really matter which type the",
    "start": "2782559",
    "end": "2789280"
  },
  {
    "text": "same thing the microservices we don't want just to provision it provision is part of managing a tenant we want to",
    "start": "2789280",
    "end": "2795240"
  },
  {
    "text": "have the tent Management Service with its",
    "start": "2795240",
    "end": "2800480"
  },
  {
    "text": "data okay let's talk a little bit about devops and devops is a lot of things to",
    "start": "2801000",
    "end": "2807960"
  },
  {
    "text": "many things to many people and I have a couple things I would like to say about",
    "start": "2807960",
    "end": "2813640"
  },
  {
    "text": "Dev which are specific to multi tendy so one word of advice and it's a very",
    "start": "2813640",
    "end": "2820480"
  },
  {
    "text": "important word of advice and it's not specific to multitan system but it's emphasized in multi system is this",
    "start": "2820480",
    "end": "2828480"
  },
  {
    "text": "automate I always tell customers or tell people if you do something twice",
    "start": "2828480",
    "end": "2834319"
  },
  {
    "text": "manually in the portal then you're doing it wrong okay it's very good to do",
    "start": "2834319",
    "end": "2839640"
  },
  {
    "text": "something one time to try it out in the portal it's very easy to experiment to do to try out a couple of things to test",
    "start": "2839640",
    "end": "2846640"
  },
  {
    "text": "things but then you should really consider automating it because when you have",
    "start": "2846640",
    "end": "2852079"
  },
  {
    "text": "manual processes especially in this kind of system where you have multiple resources multiple instances of each",
    "start": "2852079",
    "end": "2858640"
  },
  {
    "text": "resource then if you get an error and I've had cases where customers had errors in the deployment process because",
    "start": "2858640",
    "end": "2864960"
  },
  {
    "text": "it wasn't fully it wasn't all manual but was wasn't fully automated then reverting back rolling",
    "start": "2864960",
    "end": "2870960"
  },
  {
    "text": "back is much harder because you need to find out where was the error which tenants were affected and how I roll it",
    "start": "2870960",
    "end": "2876079"
  },
  {
    "text": "back so this is very important the other thing which i' like to say and I'll close with this and this",
    "start": "2876079",
    "end": "2883000"
  },
  {
    "text": "demo is monitoring obviously every system needs",
    "start": "2883000",
    "end": "2888160"
  },
  {
    "text": "to be monitored all right it's no secret I'm sure all of you do it but in a",
    "start": "2888160",
    "end": "2893400"
  },
  {
    "text": "multi-end system it's very important that you not only monitor the entire system you know the respon the response",
    "start": "2893400",
    "end": "2900520"
  },
  {
    "text": "time the failure rate the exceptions and so on it's very important that you monitor each and every",
    "start": "2900520",
    "end": "2907400"
  },
  {
    "text": "tenant because you don't want a case where let's say some tenant has a problem in this case the one in the",
    "start": "2907400",
    "end": "2913359"
  },
  {
    "text": "middle turned red you want to be able to identify it for yourselves you don't want to wait for the customer for the",
    "start": "2913359",
    "end": "2918559"
  },
  {
    "text": "tenant to call you and say well we have a problem and if you only have like this big dashboard you know it's averaged",
    "start": "2918559",
    "end": "2925079"
  },
  {
    "text": "inside all the data and then say no I don't see anything it should work I know what's the problem but that specific",
    "start": "2925079",
    "end": "2931880"
  },
  {
    "text": "tent might be his database might be in a specific server his web app might be experience exping some sort of failure",
    "start": "2931880",
    "end": "2939160"
  },
  {
    "text": "and you really would like to identify it at the tenant level before the tenant calls you it would be much better so how",
    "start": "2939160",
    "end": "2945599"
  },
  {
    "text": "can we do that again it really depends on what your technology stack on what you're using but I like to offer one one",
    "start": "2945599",
    "end": "2952240"
  },
  {
    "text": "option uh have any of you heard of application insights in Azure okay",
    "start": "2952240",
    "end": "2957920"
  },
  {
    "text": "you're already nodding your hands okay that's great application insights is a very powerful tool for monitoring your",
    "start": "2957920",
    "end": "2963960"
  },
  {
    "text": "application it can collect information regarding resp response time failure rates exception can collect your logs",
    "start": "2963960",
    "end": "2969280"
  },
  {
    "text": "you can do a whole lot of things but a lot what a lot of people don't know is that they can add their own custom data",
    "start": "2969280",
    "end": "2976280"
  },
  {
    "text": "or what they call Custom dimensions on top of each Telemetry which is being sent to application insight and you can",
    "start": "2976280",
    "end": "2982000"
  },
  {
    "text": "do it from the infrastructure point of view and let's take a look at an example again all the code is open source on",
    "start": "2982000",
    "end": "2987599"
  },
  {
    "text": "GitHub you can look at it later so what we have here for open up this monitoring",
    "start": "2987599",
    "end": "2992640"
  },
  {
    "text": "demo I have a very simple spnet core web app you see it's just upload it just",
    "start": "2992640",
    "end": "2998559"
  },
  {
    "text": "starts Castrol and in the startup we wire up a",
    "start": "2998559",
    "end": "3003880"
  },
  {
    "text": "couple of things which I'll go through in a second and our controller what it",
    "start": "3003880",
    "end": "3008960"
  },
  {
    "text": "does it goes to the HTTP context of the specific of the current request it gets the tent ID this is an extension method",
    "start": "3008960",
    "end": "3016240"
  },
  {
    "text": "which I'll show you in a second this is we just place it on the uh HTTP context in this example we take the tent ID from",
    "start": "3016240",
    "end": "3023839"
  },
  {
    "text": "one of the HTTP headers which is totally unsecure usually will take it from some sort of sign token or claiming a sign",
    "start": "3023839",
    "end": "3029680"
  },
  {
    "text": "token but for example this is good enough and what is code does it checks",
    "start": "3029680",
    "end": "3035799"
  },
  {
    "text": "if this is a bad tenant ID in our case Fe five because that's what I decided we punish it what is punishment we delay it",
    "start": "3035799",
    "end": "3042559"
  },
  {
    "text": "we we randomly choose a number between one and thousand and we delay the request this could be a database delay",
    "start": "3042559",
    "end": "3049040"
  },
  {
    "text": "this could be a lot of things that could happen in our case it's PR trivial but in real world this could really happen",
    "start": "3049040",
    "end": "3055319"
  },
  {
    "text": "if let's say 10 3 and five on a specific server had a specific issue would cause them",
    "start": "3055319",
    "end": "3060760"
  },
  {
    "text": "problems now we have a c we have a client application here which I want I ran it",
    "start": "3060760",
    "end": "3067160"
  },
  {
    "text": "before the session started it just starts up a loop and it just keeps",
    "start": "3067160",
    "end": "3072400"
  },
  {
    "text": "sending more and more requests with a random tenant ID and getting back the answers now but what do we do on the",
    "start": "3072400",
    "end": "3079280"
  },
  {
    "text": "server we have here some sort of middleware which I call the tenant ID middleware is like I told you it looks",
    "start": "3079280",
    "end": "3085480"
  },
  {
    "text": "at the authorization head from the HTTP and if it's a tenant authorization gets the tenant ID they told you this is",
    "start": "3085480",
    "end": "3091319"
  },
  {
    "text": "unsecure but this is not the point the more important thing is that we have",
    "start": "3091319",
    "end": "3097520"
  },
  {
    "text": "this little guy tenant ID Telemetry initializer and it implements I Telemetry initializer which is something",
    "start": "3097520",
    "end": "3104920"
  },
  {
    "text": "that comes out of the application insights SDK now what we have here we have one",
    "start": "3104920",
    "end": "3111760"
  },
  {
    "text": "method okay it's called initialize which we need to implement it gets the telemetry a Telemetry is every piece of",
    "start": "3111760",
    "end": "3118839"
  },
  {
    "text": "information which application insights send the SDK sends to the server to the",
    "start": "3118839",
    "end": "3124359"
  },
  {
    "text": "application inside server and what we do that we get the",
    "start": "3124359",
    "end": "3129440"
  },
  {
    "text": "the tent ID for that specific request if it exists and if we have a tent ID we",
    "start": "3129440",
    "end": "3135359"
  },
  {
    "text": "attach it to the Telemetry item we have context which is H it has a property bag",
    "start": "3135359",
    "end": "3140720"
  },
  {
    "text": "and we have a property Nam 10 and we place this number inside so when I run this code and I run the client which",
    "start": "3140720",
    "end": "3147160"
  },
  {
    "text": "creates a lot of request a lot of information will be sent to application inside so I can run it",
    "start": "3147160",
    "end": "3152640"
  },
  {
    "text": "now this will build it here we have the console client and I'll run it it doesn't show a lot but if I open my task",
    "start": "3152640",
    "end": "3160400"
  },
  {
    "text": "manager you'll see that it's using almost all my CPU so it's doing",
    "start": "3160400",
    "end": "3166559"
  },
  {
    "text": "something it's working it's calling this the server and the server is handling the request and tet is being sent to application insights which I created",
    "start": "3166559",
    "end": "3172920"
  },
  {
    "text": "before the session and the data I'm going to show you right now is data which from right",
    "start": "3172920",
    "end": "3179359"
  },
  {
    "text": "before the session because it takes two or three minutes for data to appear in application insight and they didn't want to wait for",
    "start": "3179359",
    "end": "3184839"
  },
  {
    "text": "it so if I open up application insights let's close it here it is the",
    "start": "3184839",
    "end": "3192040"
  },
  {
    "text": "one I created then we can see okay this is",
    "start": "3192040",
    "end": "3197079"
  },
  {
    "text": "from previous Suns I had before today so you can see that the average response time is 23 milliseconds H that looks",
    "start": "3197079",
    "end": "3204000"
  },
  {
    "text": "great 23 milliseconds response time for web servers that's that's perfect but if that's all I look at then",
    "start": "3204000",
    "end": "3211799"
  },
  {
    "text": "customers 3 and five will call me and tell me I have a problem something is not working right but if I drill down in",
    "start": "3211799",
    "end": "3218520"
  },
  {
    "text": "here we can see that the operation inde the median is 014 milliseconds which is",
    "start": "3218520",
    "end": "3223760"
  },
  {
    "text": "great but the 95th percentile is 183 milliseconds now that could be okay that could not be okay that really depends on",
    "start": "3223760",
    "end": "3230839"
  },
  {
    "text": "your application but if I build down I can add Charts at every level so",
    "start": "3230839",
    "end": "3237200"
  },
  {
    "text": "I drill down into that specific operation and I can add a chart I can",
    "start": "3237200",
    "end": "3242839"
  },
  {
    "text": "configure multiple types of charts and let's say if I add a grid",
    "start": "3242839",
    "end": "3248319"
  },
  {
    "text": "oops where it is no if I add the grid for example I can",
    "start": "3248319",
    "end": "3255079"
  },
  {
    "text": "Group by notice tenant ID because this is the dimension we sent it's a custom",
    "start": "3255079",
    "end": "3261000"
  },
  {
    "text": "Dimension now if you do it from the start it will take again two 3 4 minutes until disappears in the drop down so",
    "start": "3261000",
    "end": "3266480"
  },
  {
    "text": "don't so don't be worried if it doesn't appear right away but if I add this chart then we can see here that indeed",
    "start": "3266480",
    "end": "3274440"
  },
  {
    "text": "for all the tenants we get very good performance these two are anomalies so if I have this on a",
    "start": "3274440",
    "end": "3281040"
  },
  {
    "text": "dashboard let's say across all operations for each tenant or the Worst Tenants then I can detect if there is",
    "start": "3281040",
    "end": "3287000"
  },
  {
    "text": "some sort of anomaly or not another nice things I can do with application insights it has this nice little feature",
    "start": "3287000",
    "end": "3293960"
  },
  {
    "text": "it's called application insights Analytics well it's like a dashboard where you",
    "start": "3293960",
    "end": "3299280"
  },
  {
    "text": "can full forbi for analyzing your analytic information it has a query",
    "start": "3299280",
    "end": "3306839"
  },
  {
    "text": "language it's called application Insight query language AQL it's very similar to SQL it reminds it but you can see it",
    "start": "3306839",
    "end": "3313799"
  },
  {
    "text": "also has Intelligence in here so I say requests where timestamp equals 30",
    "start": "3313799",
    "end": "3321280"
  },
  {
    "text": "minutes ago or something like that and I can continue but I have the query here",
    "start": "3321280",
    "end": "3326440"
  },
  {
    "text": "already made so let me type it here so if I run",
    "start": "3326440",
    "end": "3331559"
  },
  {
    "text": "this section right here so I told it give me all the request from the last 60",
    "start": "3331559",
    "end": "3336760"
  },
  {
    "text": "Minutes take the T Define something called tenant ID from the custom Dimensions which I sent summarize the",
    "start": "3336760",
    "end": "3344520"
  },
  {
    "text": "average of the duration by 10 ID and Al by 10 ID so here we go and can see need",
    "start": "3344520",
    "end": "3349559"
  },
  {
    "text": "three and five let me increase the size of it a bit if it will doesn't want to zoom in",
    "start": "3349559",
    "end": "3356640"
  },
  {
    "text": "for some reason I don't know why oh here we go so inde we can see inde that three",
    "start": "3356640",
    "end": "3361680"
  },
  {
    "text": "and five got worse results but we can also chart it so if I run the entire query we can create a nice chart we can",
    "start": "3361680",
    "end": "3369280"
  },
  {
    "text": "see that 3 five I did higher this is undefined this from a previous S I had and you can take this you can put it",
    "start": "3369280",
    "end": "3376960"
  },
  {
    "text": "in a dashboard you can put in powerbi you can build alerts on top of it you can do many many things and get what I",
    "start": "3376960",
    "end": "3382880"
  },
  {
    "text": "want you to remember is to get the analytics at the tenant level okay don't forget that it's very",
    "start": "3382880",
    "end": "3388160"
  },
  {
    "text": "important you don't want the customer to call you you want the call to customer",
    "start": "3388160",
    "end": "3393119"
  },
  {
    "text": "first get",
    "start": "3393720",
    "end": "3397000"
  },
  {
    "text": "back okay so what do I want you to remember from this session okay you",
    "start": "3399680",
    "end": "3406079"
  },
  {
    "text": "really need to define the ten boundaries it can be an organization it could be a division organization it's not a simple",
    "start": "3406079",
    "end": "3411760"
  },
  {
    "text": "question sometimes it will be simple sometimes it won't it's not a technical question okay ask the product or Define",
    "start": "3411760",
    "end": "3418720"
  },
  {
    "text": "yourself if you're in the position to do that invest in your architecture",
    "start": "3418720",
    "end": "3424240"
  },
  {
    "text": "okay when you go to the cloud and when you have a system running 24/7 if you've done something wrong wrong it's greatly",
    "start": "3424240",
    "end": "3431200"
  },
  {
    "text": "exaggerated it's true for every system but from my experience when you go to the car when you have a multi system",
    "start": "3431200",
    "end": "3436960"
  },
  {
    "text": "these things tend to show up pretty fast consider which resources are shared",
    "start": "3436960",
    "end": "3443000"
  },
  {
    "text": "or dedicated according or maybe both according to what we talk about don't forget all the things",
    "start": "3443000",
    "end": "3449319"
  },
  {
    "text": "related to onboarding provisioning billing you want to get paid in the end",
    "start": "3449319",
    "end": "3455440"
  },
  {
    "text": "have a rock solid infrastructure okay test it if you have like I recommended one place where this is like a where",
    "start": "3455440",
    "end": "3462079"
  },
  {
    "text": "this is isolated maybe a 10 man service test it well and you know you're in a much better position than you were",
    "start": "3462079",
    "end": "3467839"
  },
  {
    "text": "before doesn't mean you don't need to check other things but you're in a much better position monitor each and every tant",
    "start": "3467839",
    "end": "3474760"
  },
  {
    "text": "like I just show you and and the most important thing earn a lot of cash so uh",
    "start": "3474760",
    "end": "3481039"
  },
  {
    "text": "thank you everyone my work is done go and ruin some systems for your enjoyment",
    "start": "3481039",
    "end": "3486440"
  },
  {
    "text": "and that's about it so thank you very much [Applause]",
    "start": "3486440",
    "end": "3493269"
  }
]