[
  {
    "text": "okay hi people welcome to this talk about the running System test with active authentication and authorization",
    "start": "299",
    "end": "8040"
  },
  {
    "text": "thank you for showing up I hope we can get some value of this together I'm the",
    "start": "8040",
    "end": "14759"
  },
  {
    "text": "one standing between you and lunch so I'll try to make this as pleasant as possible",
    "start": "14759",
    "end": "21480"
  },
  {
    "text": "we are gonna cover quite a lot of ground when when it comes to Technologies and questions and whatnot in in this kind of",
    "start": "21480",
    "end": "28800"
  },
  {
    "text": "short session so if you want to kind of dig deeper into the the problems the Technologies",
    "start": "28800",
    "end": "34800"
  },
  {
    "text": "whatever I'll be around for the day and tomorrow so just grab me in the hall and I love to have a chat with you guys",
    "start": "34800",
    "end": "41879"
  },
  {
    "text": "topic of the day running system tests with active authentication and authorization",
    "start": "41879",
    "end": "47940"
  },
  {
    "text": "so this story starts with well-known security well-known slash security txt",
    "start": "47940",
    "end": "54899"
  },
  {
    "text": "so a security researcher has identified a potential issue in a system it digs",
    "start": "54899",
    "end": "62640"
  },
  {
    "text": "out this file he gets information about how to contact our security department and sends us a little report",
    "start": "62640",
    "end": "70080"
  },
  {
    "text": "we get these reports we thank him I sincerely hope that we'll be able to",
    "start": "70080",
    "end": "75479"
  },
  {
    "text": "provide some bug Bounties in the future but not yet and",
    "start": "75479",
    "end": "80520"
  },
  {
    "text": "we contact the team that owned the system and start digging in to what is this so it seems to be a test system",
    "start": "80520",
    "end": "88700"
  },
  {
    "text": "that seems to be open on the internet and quite a few of the security features are disabled",
    "start": "88700",
    "end": "96720"
  },
  {
    "text": "and it also contains recent data from production so it's not like fake or synthetic data that data shouldn't be",
    "start": "96720",
    "end": "103500"
  },
  {
    "text": "out there the endpoint should be protected and so on and then when we kind of process the",
    "start": "103500",
    "end": "108780"
  },
  {
    "text": "information we typically do a post-mortem with our team and try to figure out what went wrong what can we",
    "start": "108780",
    "end": "114119"
  },
  {
    "text": "do differently and so on and the teams tells us well we should maybe do more security testing",
    "start": "114119",
    "end": "120180"
  },
  {
    "text": "you should do it differently but doing this kind of security testing and making this properly is super hard",
    "start": "120180",
    "end": "126600"
  },
  {
    "text": "and then from the access team that I'm joining me typically dig into this and see if we can create some patterns that",
    "start": "126600",
    "end": "131879"
  },
  {
    "text": "the teams can use to make things a bit more secure and that's the contents of this talk",
    "start": "131879",
    "end": "138000"
  },
  {
    "text": "so the objective is to make teams more Curious on diverting more effort into",
    "start": "138000",
    "end": "143459"
  },
  {
    "text": "system testing with authentication authorization and other security features activated",
    "start": "143459",
    "end": "150840"
  },
  {
    "text": "um why do we pursue this objective but it will have an impact on mitigating",
    "start": "150840",
    "end": "156300"
  },
  {
    "text": "well-known security risks stuff that you see in the west of 10 both for the for web apps and apis and so on but broken",
    "start": "156300",
    "end": "163560"
  },
  {
    "text": "access control misconfiguration and so on most of these kind of things were in",
    "start": "163560",
    "end": "169200"
  },
  {
    "text": "play in our scenario a disclaimer the more I learn about this",
    "start": "169200",
    "end": "175980"
  },
  {
    "text": "topic at hand the more I realize how complex it is I am not an expert and",
    "start": "175980",
    "end": "181140"
  },
  {
    "text": "life is not simple and all solutions have trade-off and there are always more than one solution to a problem and your",
    "start": "181140",
    "end": "187680"
  },
  {
    "text": "context really really matters so my kind of goal on application security there is",
    "start": "187680",
    "end": "193379"
  },
  {
    "text": "no end State I just learn and I improve and that's how I roll and that's how I kind of tackle these kind of things as",
    "start": "193379",
    "end": "199440"
  },
  {
    "text": "well so in this presentation you may see a patterns that are kind of a risky and",
    "start": "199440",
    "end": "205739"
  },
  {
    "text": "you have questions I'd love to get your questions and I'll look it love to get your Insight on these kind of things if",
    "start": "205739",
    "end": "211860"
  },
  {
    "text": "you have other ways of doing it so please share you will get access to this lighting",
    "start": "211860",
    "end": "218280"
  },
  {
    "text": "code and everything afterwards but this code is not a production quality so don't just put it in production and say",
    "start": "218280",
    "end": "224400"
  },
  {
    "text": "it was good because the presenter said so I use these kind of code bases as teaching Security application security",
    "start": "224400",
    "end": "230120"
  },
  {
    "text": "and the deliberately contains some bad stuff so don't use it without thinking and some",
    "start": "230120",
    "end": "236700"
  },
  {
    "text": "of the patterns that we discuss are risky so be cautious what my really recommendation is that you do a threat",
    "start": "236700",
    "end": "242400"
  },
  {
    "text": "modeling exercise on your test test system as well so when we have set of all the kind of stuff and automated",
    "start": "242400",
    "end": "248760"
  },
  {
    "text": "everything do a threat model ask yourself the question what could possibly go wrong",
    "start": "248760",
    "end": "255060"
  },
  {
    "text": "so I'm laughing that's Norwegian stuff so last we'll do just fine I'm a soft",
    "start": "255060",
    "end": "261419"
  },
  {
    "text": "developer and I'm an application security advocate in Equinox application security team fpnor is a Norwegian",
    "start": "261419",
    "end": "268979"
  },
  {
    "text": "Energy company on the west coast of Norway one wife three grandkids the hobbies that I have",
    "start": "268979",
    "end": "276120"
  },
  {
    "text": "besides coding is Gran font was cycling I know that it doesn't look like that but I really enjoy that and then fly",
    "start": "276120",
    "end": "283860"
  },
  {
    "text": "fishing so that's one of my kind of my passions as well I'm not scored on LinkedIn Twitter GitHub and recently",
    "start": "283860",
    "end": "290280"
  },
  {
    "text": "Mastodon info second change not very active just trying to figure out what's going to happen in that space so I kind",
    "start": "290280",
    "end": "297720"
  },
  {
    "text": "of grabbed my handle there as well if you don't want to learn more about what we do in app second entrepreneur",
    "start": "297720",
    "end": "303620"
  },
  {
    "text": "appsec.econ.com is the page you want to visit the outline for this talk is some",
    "start": "303620",
    "end": "309419"
  },
  {
    "text": "observations we're going to have a look at the demo system then we're going to discuss test",
    "start": "309419",
    "end": "315240"
  },
  {
    "text": "principle and Technical challenges and then we're going to explore a Hands-On solution how we can tackle a few of the",
    "start": "315240",
    "end": "321900"
  },
  {
    "text": "problems and then we go in for wrap up and QA and Q a at the end",
    "start": "321900",
    "end": "327479"
  },
  {
    "text": "so some observations that I did with in this incident but all over at our",
    "start": "327479",
    "end": "332820"
  },
  {
    "text": "company and other companies as well is that team report to us that 80 of their",
    "start": "332820",
    "end": "337860"
  },
  {
    "text": "test effort is spent on unit testing very little ontegration testing and system testing",
    "start": "337860",
    "end": "344759"
  },
  {
    "text": "they also tell us that authentication authorizations are either mocked or stubbed and disabled when testing",
    "start": "344759",
    "end": "352919"
  },
  {
    "text": "they also say that security features are often disabled or mocked with stuff when we do testing as well",
    "start": "352919",
    "end": "358919"
  },
  {
    "text": "and of course that is hard we don't write a lot of security related",
    "start": "358919",
    "end": "364380"
  },
  {
    "text": "tests most of our tests have a functional kind of perspective",
    "start": "364380",
    "end": "369600"
  },
  {
    "text": "most of the teams also say that we really really would like to do more integration and system testing",
    "start": "369600",
    "end": "375660"
  },
  {
    "text": "but they say it's super hard and it's time consuming and they also say that or have this kind",
    "start": "375660",
    "end": "381300"
  },
  {
    "text": "of perception that these tests are fragile and they're hard to maintain",
    "start": "381300",
    "end": "386759"
  },
  {
    "text": "to some level they are right but it's a lot better than it used to be back in the days",
    "start": "386759",
    "end": "392639"
  },
  {
    "text": "the challenges have obviously multiple perspectives we have the technical side with personal skills proficiency team",
    "start": "392639",
    "end": "400800"
  },
  {
    "text": "composition and team capacity and so on so I can't really go into a two-person",
    "start": "400800",
    "end": "406440"
  },
  {
    "text": "team and tell them to do all these advanced stuff they don't have the capacity to do that and team composition",
    "start": "406440",
    "end": "412259"
  },
  {
    "text": "if you want to do the testing properly you need to have not only developers developers they can do everything you",
    "start": "412259",
    "end": "418680"
  },
  {
    "text": "need all these kind of skills in the teams and not the least the team or company",
    "start": "418680",
    "end": "424919"
  },
  {
    "text": "culture I work with teams and some of them states that the product owner really",
    "start": "424919",
    "end": "430620"
  },
  {
    "text": "doesn't want us to spend a lot of time on testing fish out the features so all these kind of things matter when you're",
    "start": "430620",
    "end": "436380"
  },
  {
    "text": "going to solve this problem at home and don't think there is any Quick Fix because there isn't",
    "start": "436380",
    "end": "442740"
  },
  {
    "text": "so presenting our demo system the one we're going to look at in a little while that is This brilliant modern web",
    "start": "442740",
    "end": "447900"
  },
  {
    "text": "application called Game of Thrones episodes so what you basically can do you can log in you can show your inbox",
    "start": "447900",
    "end": "454080"
  },
  {
    "text": "getting that from The Office 365 graph and you can show",
    "start": "454080",
    "end": "459800"
  },
  {
    "text": "basic system but basic systems typically are pretty much advanced in these kind of days so",
    "start": "470160",
    "end": "477060"
  },
  {
    "text": "this is how it looks from a schematic drawing so there is a client a backend that is serving the front end to to the",
    "start": "477060",
    "end": "484500"
  },
  {
    "text": "to the browser this backend or this application is using the the backend for front-end",
    "start": "484500",
    "end": "490080"
  },
  {
    "text": "pattern so there are no tokens stored in the in the client they are kind of handling the back end and we have a",
    "start": "490080",
    "end": "495660"
  },
  {
    "text": "token cache and we have a session store that one is the memory this backend talks to the authentication",
    "start": "495660",
    "end": "501660"
  },
  {
    "text": "authorization stuff through Azure ad to get the ID tokens you get the um",
    "start": "501660",
    "end": "507720"
  },
  {
    "text": "the access tokens and so on and for that part we're using open ID connect and UI 2 towards Azure ad",
    "start": "507720",
    "end": "515959"
  },
  {
    "text": "and the code in the backend client is using msol Microsoft authentication",
    "start": "515959",
    "end": "521159"
  },
  {
    "text": "library to do the magic and it's talking to the episodes API and",
    "start": "521159",
    "end": "528180"
  },
  {
    "text": "codes API which are kind of self-sufficient so I typically flow would be okay you hit the application",
    "start": "528180",
    "end": "535019"
  },
  {
    "text": "the back end serves the from page user clicks login it's kind of sent back to",
    "start": "535019",
    "end": "540720"
  },
  {
    "text": "the back end the backend says okay this is a login thing I will use the award to openly connect and redirect you back to",
    "start": "540720",
    "end": "547980"
  },
  {
    "text": "Azure ID or you can answer your username or password and do MFA and all that kind of stuff if that's kind of good stuff",
    "start": "547980",
    "end": "554160"
  },
  {
    "text": "you redirect it back to the to the back end the back end is getting a code and it changes that code for an access token",
    "start": "554160",
    "end": "560820"
  },
  {
    "text": "for Azure ID and store that in the token cache so now we have we are authenticated we have the ID token as",
    "start": "560820",
    "end": "567899"
  },
  {
    "text": "proof of that and we also have an access token to read the Microsoft graph because we are asked for the scope",
    "start": "567899",
    "end": "573300"
  },
  {
    "text": "mail.read so when I then click reading in the inbox uh the app kind of uh takes this",
    "start": "573300",
    "end": "580080"
  },
  {
    "text": "access token hits the Office 365 graph and gets the content of my inbox when I'm talking to the API similar",
    "start": "580080",
    "end": "587339"
  },
  {
    "text": "thing happens I am authenticated so that's no problem but this app backend talks to Azure ID and request an access",
    "start": "587339",
    "end": "594420"
  },
  {
    "text": "token to read the episode's API if that kind of goes okay it gets the",
    "start": "594420",
    "end": "600000"
  },
  {
    "text": "access token back and I send that to the episodes API the episode's API received this access tokens and verifies the",
    "start": "600000",
    "end": "608040"
  },
  {
    "text": "signature the claims and everything to make sure it's kind of okay and if it's if if access is granted to put it like",
    "start": "608040",
    "end": "614220"
  },
  {
    "text": "that it can raise a list of Game of Thrones episode from a database or whatever but it also this pattern has",
    "start": "614220",
    "end": "621180"
  },
  {
    "text": "API chaining which is also pretty normal so then this episode's API want to grab",
    "start": "621180",
    "end": "626220"
  },
  {
    "text": "an access token to access the quote API on behalf of the user that is kind of logged in some kind of get complicated",
    "start": "626220",
    "end": "632820"
  },
  {
    "text": "but anyways episodes API request this token from Azure ID hopefully get it sends it to the codes API which verifies",
    "start": "632820",
    "end": "640500"
  },
  {
    "text": "the token and the access and so on if everything is okay it returns a random quote that is sent to the episode's API",
    "start": "640500",
    "end": "647220"
  },
  {
    "text": "to the client and back to the front so this is a pretty normal pattern for a",
    "start": "647220",
    "end": "653220"
  },
  {
    "text": "lot of vs applications that we have talked we are talking to a lot of apis the API chaining we need to do that",
    "start": "653220",
    "end": "658500"
  },
  {
    "text": "authorization for all kind of access and so on and it's kind of hard to test in",
    "start": "658500",
    "end": "664140"
  },
  {
    "text": "my opinion it does it isn't sufficient to only focus the unit test inside the episode's API I think that is good",
    "start": "664140",
    "end": "670680"
  },
  {
    "text": "enough I would really like to spend more effort on testing this as the system from a user perspective",
    "start": "670680",
    "end": "677640"
  },
  {
    "text": "as a little heads up when we're going to put this in test mode uh we're going to switch to using a different flow for the",
    "start": "677640",
    "end": "684980"
  },
  {
    "text": "authentication stuff so we're going to use the flow in the back end call the resource owner password credential",
    "start": "684980",
    "end": "690000"
  },
  {
    "text": "rather than the code Grant right now that it's working beautifully but I see some evidence or discussions",
    "start": "690000",
    "end": "697860"
  },
  {
    "text": "in the upcoming standards of what 2.1 that this flow might be deprecated but for now it's kind of okay",
    "start": "697860",
    "end": "705000"
  },
  {
    "text": "so we'll have to solve that problem for another day later on then the feature we're going to test focus on",
    "start": "705000",
    "end": "710399"
  },
  {
    "text": "testing on is one specific use case that from the browser the user logs in and gets a list of Game of Thrones episodes",
    "start": "710399",
    "end": "717860"
  },
  {
    "text": "and this test will be a system test so it will utilize all our kind of components",
    "start": "717860",
    "end": "725300"
  },
  {
    "text": "so let's look at some test principle and some technical challenges so I really benefit teams for creating test",
    "start": "725579",
    "end": "732240"
  },
  {
    "text": "principle for their work and they should guide their testing a few of them could be stuff like okay we should automate",
    "start": "732240",
    "end": "738480"
  },
  {
    "text": "more or less all of our testing I say most more or less all because I really",
    "start": "738480",
    "end": "743640"
  },
  {
    "text": "acknowledge that a good tester that that does this properly He codes automated",
    "start": "743640",
    "end": "749160"
  },
  {
    "text": "tests and so on but he also spent time on doing heuristic testing and so on that is super kind of beneficial so more",
    "start": "749160",
    "end": "756300"
  },
  {
    "text": "all effort on to automated testing non-function tests are as important as",
    "start": "756300",
    "end": "762060"
  },
  {
    "text": "the functional ones so testing performance usability reliability and security should be equally important to",
    "start": "762060",
    "end": "768120"
  },
  {
    "text": "the functional stuff I set that as a test principle for myself now I don't want to test in production",
    "start": "768120",
    "end": "776220"
  },
  {
    "text": "I use synthetic test data I can't risk export exposing data that shouldn't be",
    "start": "776220",
    "end": "782040"
  },
  {
    "text": "there so let's keep it all synthetic running code should not know that is under a test that's another principle",
    "start": "782040",
    "end": "789600"
  },
  {
    "text": "and testing should not involve components that I don't own or control",
    "start": "789600",
    "end": "794639"
  },
  {
    "text": "so this list is not exhaustive just an example your team should have their own That's my kind of a take on that",
    "start": "794639",
    "end": "802620"
  },
  {
    "text": "looking into a few technical challenges if this if you have this kind of pattern in in the back of your head we must do",
    "start": "802620",
    "end": "809760"
  },
  {
    "text": "the logging through the browser to create a valid session it's creative has a few issues on its own but more often",
    "start": "809760",
    "end": "817019"
  },
  {
    "text": "than not handing the authentication over to a different site that is driving the test in our case to log in Microsoft",
    "start": "817019",
    "end": "824459"
  },
  {
    "text": "something will break the web drivers I can't control that I don't have control over that domain",
    "start": "824459",
    "end": "832200"
  },
  {
    "text": "uh there are no tokens in the browser as because we are utilizing the backend for",
    "start": "832200",
    "end": "837720"
  },
  {
    "text": "front-end pattern so that brings some challenges to to this uh thing uh when",
    "start": "837720",
    "end": "843540"
  },
  {
    "text": "you have the client in the browser a lot of people will do system testing by getting access token behind the scenes",
    "start": "843540",
    "end": "849959"
  },
  {
    "text": "and injecting them into the token cache in the browser and take it from there we can't do this in this pattern and this",
    "start": "849959",
    "end": "855779"
  },
  {
    "text": "backend for front-end pattern in my view is more secure than keeping everything in the client",
    "start": "855779",
    "end": "861899"
  },
  {
    "text": "because the client could be seen as a kind of protected client could we acquire tokens in the test and",
    "start": "861899",
    "end": "869459"
  },
  {
    "text": "manipulated token cache remember that the client backend had the token cash yes that could be doable we can get the",
    "start": "869459",
    "end": "875360"
  },
  {
    "text": "uh the access tokens the other tokens from other places and figure out how the",
    "start": "875360",
    "end": "881220"
  },
  {
    "text": "token cache works and inject the tokens into that phone and I've tried it and it",
    "start": "881220",
    "end": "886740"
  },
  {
    "text": "works but it's it's super dirty and not where I want to spend my money to put it like that and if in our case Microsoft",
    "start": "886740",
    "end": "894420"
  },
  {
    "text": "changed the implementation of their cache I'm screwed I have to figure it all out again so not for me",
    "start": "894420",
    "end": "900959"
  },
  {
    "text": "could you mess around with the session object in the back end yes we could do that we could create a fake session and",
    "start": "900959",
    "end": "906420"
  },
  {
    "text": "so on but it will bring challenges to the browser if we don't use the browser because we still need to support this",
    "start": "906420",
    "end": "912899"
  },
  {
    "text": "kind of a session cookies going back and forth and so on but yes that could be done again 30 not where I want to spend",
    "start": "912899",
    "end": "919980"
  },
  {
    "text": "my money in corporate environments we users have MFA it makes more or less",
    "start": "919980",
    "end": "927360"
  },
  {
    "text": "yeah impossible to automate login for traditional users ordinary users so it's",
    "start": "927360",
    "end": "932639"
  },
  {
    "text": "kind of super hard and I've seen quite the few interesting approaches to handle that",
    "start": "932639",
    "end": "938760"
  },
  {
    "text": "one approach that I saw was a camera monitoring like a key device and some code reading that picture and",
    "start": "938760",
    "end": "945839"
  },
  {
    "text": "translating the image to code and injecting it I don't want to go that way no way",
    "start": "945839",
    "end": "952560"
  },
  {
    "text": "but then another question that it might be equally important so our Azure ad should I even use that as a production",
    "start": "952560",
    "end": "959459"
  },
  {
    "text": "device so if I if that is the case our production Azure ID the identity",
    "start": "959459",
    "end": "964980"
  },
  {
    "text": "provider will be full of production stuff test stuff and you know what and",
    "start": "964980",
    "end": "971220"
  },
  {
    "text": "it's so hard to make a configuration changes I thought I was updating",
    "start": "971220",
    "end": "976339"
  },
  {
    "text": "development but I was hitting production and that's not nice so I would like to",
    "start": "976339",
    "end": "982500"
  },
  {
    "text": "challenge that as well could we mock the Azure ID with an",
    "start": "982500",
    "end": "987839"
  },
  {
    "text": "overtook mock server component that is a good question and it's actually doable knob creates a very good mock service",
    "start": "987839",
    "end": "995160"
  },
  {
    "text": "that we can use you can spin up a new container it will provide the necessarily and necessary endpoints it",
    "start": "995160",
    "end": "1001880"
  },
  {
    "text": "will sign tokens you can configure it to re to send you the claims that you want or it's really great",
    "start": "1001880",
    "end": "1008720"
  },
  {
    "text": "I can't use this in this case because I'm using Amazon from Microsoft and M solver Microsoft at least in the current",
    "start": "1008720",
    "end": "1015259"
  },
  {
    "text": "state is uber2 openery connect plus Microsoft so if you investigate all the",
    "start": "1015259",
    "end": "1021380"
  },
  {
    "text": "flows going back and forth there is a ton of additional kind of parameters and so on used to drive the framework so if",
    "start": "1021380",
    "end": "1028880"
  },
  {
    "text": "I try Amazon again this mock server if it just kind of break down it will not work and I don't intend to implement",
    "start": "1028880",
    "end": "1035839"
  },
  {
    "text": "that stuff in the mock server because that one's not where I want to spend my money",
    "start": "1035839",
    "end": "1041660"
  },
  {
    "text": "additional consideration that I think is worth making the choices that we make should as far as possible not disabled",
    "start": "1041660",
    "end": "1048079"
  },
  {
    "text": "security features of our system and I would like to develop as little as",
    "start": "1048079",
    "end": "1053360"
  },
  {
    "text": "possible of test supporting code so this is this is my kind of a starting",
    "start": "1053360",
    "end": "1058700"
  },
  {
    "text": "point and it's time to make some decisions and like I said all choices have",
    "start": "1058700",
    "end": "1065419"
  },
  {
    "text": "trade-off and we try to balance the risk and impact and so on and we acknowledge that there's a life cycle in question",
    "start": "1065419",
    "end": "1071780"
  },
  {
    "text": "both for the code I create for my system and my test scores code and also for",
    "start": "1071780",
    "end": "1077240"
  },
  {
    "text": "test supporting code I can't forget about Apple all code that I create",
    "start": "1077240",
    "end": "1082780"
  },
  {
    "text": "needs regular TLC tender loving care not to become my worst enemy That's my kind",
    "start": "1082780",
    "end": "1088220"
  },
  {
    "text": "of take on these things so for this example I or we decides to",
    "start": "1088220",
    "end": "1094460"
  },
  {
    "text": "use the Microsoft Office 365 developer program to acquire acquire a separate",
    "start": "1094460",
    "end": "1100460"
  },
  {
    "text": "Azure ID test environment and by that I break one of my principles it's kind of",
    "start": "1100460",
    "end": "1107059"
  },
  {
    "text": "okay to break it if you know that you're breaking it so I say that I'm going to use a component in my testing that I",
    "start": "1107059",
    "end": "1113059"
  },
  {
    "text": "don't control so when registering an account at that program I get access to an Azure ID",
    "start": "1113059",
    "end": "1119059"
  },
  {
    "text": "environment for free and it's uh it's it's really really useful",
    "start": "1119059",
    "end": "1125240"
  },
  {
    "text": "I create syntactic test users without MFA to support my automated tests so now",
    "start": "1125240",
    "end": "1130940"
  },
  {
    "text": "I am in my own Azure ID and I can script the creation of various test users roles",
    "start": "1130940",
    "end": "1136700"
  },
  {
    "text": "groups whatever to make sure that I get the proper claims and stuff inside my",
    "start": "1136700",
    "end": "1142100"
  },
  {
    "text": "tokens but it's it's everything is synthetic I will let our client know that it's",
    "start": "1142100",
    "end": "1148880"
  },
  {
    "text": "under test so again I'm breaking a principle but I do it deliberately so maybe it makes sense",
    "start": "1148880",
    "end": "1156380"
  },
  {
    "text": "the test first print should be as little as possible if I am in test I use a different flow",
    "start": "1156380",
    "end": "1162500"
  },
  {
    "text": "to do login to Resource owner password credential is the one I use not the code Grant",
    "start": "1162500",
    "end": "1168760"
  },
  {
    "text": "I use Docker and Docker compose to build and serve the infrastructure for the whole system",
    "start": "1168760",
    "end": "1174740"
  },
  {
    "text": "that's why Docker is it basically and I want to drive the test from end",
    "start": "1174740",
    "end": "1180980"
  },
  {
    "text": "user perspective through the browser and to do this I use Cypress Cypress is a tool that I got",
    "start": "1180980",
    "end": "1187640"
  },
  {
    "text": "acquainted with a few years ago and the more I use it the more I love it I think it's super great to drive things from",
    "start": "1187640",
    "end": "1192799"
  },
  {
    "text": "the browser but these are the decision I or we make for our system I'm not sure you guys",
    "start": "1192799",
    "end": "1200120"
  },
  {
    "text": "guys can make all the kind of things for your kind of things but there may be points there that you can take back home and make sense of in your context",
    "start": "1200120",
    "end": "1207980"
  },
  {
    "text": "yeah everything must be fully automated and be able to execute in a pipeline like GitHub actions or whatever that is",
    "start": "1207980",
    "end": "1214640"
  },
  {
    "text": "also a premise here so exploring one solution",
    "start": "1214640",
    "end": "1220160"
  },
  {
    "text": "uh let me put my glasses so I can see the screen but not you guys so that's kind of okay",
    "start": "1220160",
    "end": "1228039"
  },
  {
    "text": "I'm putting the stuff into containers this is how the repo looks you get access to that one",
    "start": "1228620",
    "end": "1234679"
  },
  {
    "text": "um I'm authorizing my use of my SSH key through one password it's a super great",
    "start": "1234679",
    "end": "1240620"
  },
  {
    "text": "feature by the way so that I don't store any private keys on my disk uh anyway",
    "start": "1240620",
    "end": "1245720"
  },
  {
    "text": "um scenario contains the codes it has the clients the episodes API the quote API",
    "start": "1245720",
    "end": "1251840"
  },
  {
    "text": "and so on and I put it in Docker so this is the Dockery ml file it defines the",
    "start": "1251840",
    "end": "1256880"
  },
  {
    "text": "services that I have put in you so one service for the client one service for the episodes API one for",
    "start": "1256880",
    "end": "1264440"
  },
  {
    "text": "the quote API and also an additional one for for the site press",
    "start": "1264440",
    "end": "1270020"
  },
  {
    "text": "and in addition I have created objects to secure this in the Azure ID that I",
    "start": "1270020",
    "end": "1275299"
  },
  {
    "text": "have for my project the the private one to put it like that I use Docker composter on it so this is",
    "start": "1275299",
    "end": "1282200"
  },
  {
    "text": "the Run command sets the node environment and this is node.js backend by the way to to",
    "start": "1282200",
    "end": "1287240"
  },
  {
    "text": "production and do Docker compose up on the client episodes in quotes services",
    "start": "1287240",
    "end": "1292340"
  },
  {
    "text": "so get this running what I typically would do is go inside the scenario directory I would",
    "start": "1292340",
    "end": "1300020"
  },
  {
    "text": "Source the file with my configuration it follows",
    "start": "1300020",
    "end": "1305799"
  },
  {
    "text": "this kind of template of the stuff that you would put in these config files would be like the client ID client",
    "start": "1305900",
    "end": "1312320"
  },
  {
    "text": "Secrets the username of the test users and so on I put this in a configuration file in a real-life production",
    "start": "1312320",
    "end": "1319460"
  },
  {
    "text": "environment I wouldn't have not have put the client Secret in like this this is just for minimizing the number of",
    "start": "1319460",
    "end": "1325880"
  },
  {
    "text": "components to kind of show you guys how I do this if I did this in production I would have put the client Secrets inside",
    "start": "1325880",
    "end": "1332240"
  },
  {
    "text": "the national keywords and stuff like that and extract it uh while running the tests so that's the best way of doing",
    "start": "1332240",
    "end": "1339559"
  },
  {
    "text": "that okay so if I then um run the application",
    "start": "1339559",
    "end": "1347140"
  },
  {
    "text": "it fires up everything in Docker compose render three services and I can",
    "start": "1347179",
    "end": "1353900"
  },
  {
    "text": "go to a local host 3000 which I told any config files if I can hit the zero this",
    "start": "1353900",
    "end": "1360740"
  },
  {
    "text": "would be good one so this is the beautiful application I sign in I'm using a synthetic user that I have",
    "start": "1360740",
    "end": "1366860"
  },
  {
    "text": "created um and for this is at the elevance so she",
    "start": "1366860",
    "end": "1373220"
  },
  {
    "text": "is great I picked the password for my password manager and I sign in and you notice",
    "start": "1373220",
    "end": "1378980"
  },
  {
    "text": "that now I'm at the login Microsoft com not to my old page so typically web",
    "start": "1378980",
    "end": "1384020"
  },
  {
    "text": "drivers would not be able to mess around here typically I don't want to stay signed in there's",
    "start": "1384020",
    "end": "1389419"
  },
  {
    "text": "just a demo okay I don't want to save this password in one password either so show inbox you know what happened I",
    "start": "1389419",
    "end": "1396919"
  },
  {
    "text": "have gotten the access token I send that to the Office 365 graph and get the content of my inbox back",
    "start": "1396919",
    "end": "1404539"
  },
  {
    "text": "the same show Game of Thrones episodes same thing happening getting access tokens signing the episodes episodes",
    "start": "1404539",
    "end": "1410840"
  },
  {
    "text": "getting another access token on behalf of the logged in user sending it to the quote and getting a quote back if",
    "start": "1410840",
    "end": "1417080"
  },
  {
    "text": "everything is okay and validated and I can log out so that's the basic thing of our kind of",
    "start": "1417080",
    "end": "1423799"
  },
  {
    "text": "test system with all these kind of components running then I'm putting the system into test",
    "start": "1423799",
    "end": "1430340"
  },
  {
    "text": "mode um I I said that I I did some changes there and these changes were",
    "start": "1430340",
    "end": "1438880"
  },
  {
    "text": "let me see um I run the system in test mode so I",
    "start": "1439760",
    "end": "1444860"
  },
  {
    "text": "changed this environment variable to test to tell the code that now you are on the test and then I start the same",
    "start": "1444860",
    "end": "1450919"
  },
  {
    "text": "services so what does it mean to be under test well I'll show you how it works but behind the scenes what is",
    "start": "1450919",
    "end": "1458120"
  },
  {
    "text": "happening is that for this is the code for the endpoint login so when the user hits that the login",
    "start": "1458120",
    "end": "1464299"
  },
  {
    "text": "endpoint the code will sense if I am in test and if I am a test I will call one",
    "start": "1464299",
    "end": "1470000"
  },
  {
    "text": "authentication function if I'm not in test mode it will call the the the better one with code Grant and so on",
    "start": "1470000",
    "end": "1477740"
  },
  {
    "text": "and to look a little bit about the test code as well this is the authenticator",
    "start": "1477740",
    "end": "1483559"
  },
  {
    "text": "test function it basically uses a function in msol",
    "start": "1483559",
    "end": "1489260"
  },
  {
    "text": "called acquire token by username password and then I read those from the environment and I send them to to Azure",
    "start": "1489260",
    "end": "1496100"
  },
  {
    "text": "ID and if everything is okay I get the ID tokens the access token back so everything is kind of msoles M cells",
    "start": "1496100",
    "end": "1504080"
  },
  {
    "text": "take caring of taking the code and updating the ass the the token cache the session is kind of a handling in in the",
    "start": "1504080",
    "end": "1510320"
  },
  {
    "text": "normal way so this is basically the only test code I have in my application but I have broken one",
    "start": "1510320",
    "end": "1517100"
  },
  {
    "text": "principle I told the system that is under test so how does this behave if if I if I run",
    "start": "1517100",
    "end": "1524120"
  },
  {
    "text": "it looks pretty and pretty uh similar to",
    "start": "1524120",
    "end": "1530480"
  },
  {
    "text": "what you have seen but the difference is when I sign in",
    "start": "1530480",
    "end": "1536299"
  },
  {
    "text": "here now designing is taken care of from the back end so I I went to the site I established a",
    "start": "1536299",
    "end": "1542600"
  },
  {
    "text": "session cookie I did the login from the back inside using this new flow updated the token cache and so on and refresh",
    "start": "1542600",
    "end": "1548539"
  },
  {
    "text": "the page and now I'm logged in as the same user but I didn't have to go",
    "start": "1548539",
    "end": "1554059"
  },
  {
    "text": "through the the code Grant and and to Microsoft side to do the login",
    "start": "1554059",
    "end": "1559940"
  },
  {
    "text": "so now I have the system typically running in the docker file is unable to log in in a way no MFA and so on because",
    "start": "1559940",
    "end": "1566960"
  },
  {
    "text": "I control the test users and I think that's kind of okay because everything is fantastic",
    "start": "1566960",
    "end": "1573140"
  },
  {
    "text": "um and that reduces the risk for information exposure and so on",
    "start": "1573140",
    "end": "1578539"
  },
  {
    "text": "okay so now the system is running in test mode um and so on",
    "start": "1578539",
    "end": "1584440"
  },
  {
    "text": "let's explore how to run do the testing again let's",
    "start": "1584440",
    "end": "1589760"
  },
  {
    "text": "open a new window go to scenario",
    "start": "1589760",
    "end": "1595220"
  },
  {
    "text": "I should do like that scenario and then decline Cypress folder and don't expect everyone knows Cyprus",
    "start": "1595220",
    "end": "1602539"
  },
  {
    "text": "but it's stored in this folder and personal scaffolding but my tests are",
    "start": "1602539",
    "end": "1608120"
  },
  {
    "text": "basically stored here so I have installed all the modules previously so if I open the Cypress now and I have my",
    "start": "1608120",
    "end": "1615980"
  },
  {
    "text": "application running in Docker behind the scenes it's open the Cyprus client",
    "start": "1615980",
    "end": "1622480"
  },
  {
    "text": "I select the end-to-end testing module this is Cypress version toll by the way if you want to know that in Cyprus I can",
    "start": "1622700",
    "end": "1630980"
  },
  {
    "text": "use and test my application over multiple browser that's kind of a nice opportunity but now I'll just go for the",
    "start": "1630980",
    "end": "1637580"
  },
  {
    "text": "electron one and start end-to-end testing in that I have one test script it's here let's",
    "start": "1637580",
    "end": "1643520"
  },
  {
    "text": "click that one and start the test running so now it's running the system test that I'd like to call it it's",
    "start": "1643520",
    "end": "1649159"
  },
  {
    "text": "driving the experience through the browser logging in exactly how we did",
    "start": "1649159",
    "end": "1654700"
  },
  {
    "text": "getting the episodes verify that information is kind of correct and so on and it's working pretty nice",
    "start": "1654700",
    "end": "1662600"
  },
  {
    "text": "not too slow either and to give an idea about how I developed tests with Cyprus I will",
    "start": "1662600",
    "end": "1669679"
  },
  {
    "text": "typically go and have this kind of open running and go into my test script which is basically JavaScript and you can do",
    "start": "1669679",
    "end": "1676159"
  },
  {
    "text": "a lot of interesting things both on the fracking front-end story but also in the back end so it is pretty nice but anyway",
    "start": "1676159",
    "end": "1682400"
  },
  {
    "text": "I do a change I save it Cyprus picks up to change and reruns all the tests if",
    "start": "1682400",
    "end": "1688880"
  },
  {
    "text": "the test fails I get good information if I do that in an in another Pace I could take snapshots of the failing test I can",
    "start": "1688880",
    "end": "1695779"
  },
  {
    "text": "record videos and so on so I have Goods kind of forensic data if my tests are failing to start debugging and so on",
    "start": "1695779",
    "end": "1703760"
  },
  {
    "text": "but anyways I put this fix this arrow and my test should be kind of completely",
    "start": "1703760",
    "end": "1712720"
  },
  {
    "text": "and be okay unless there are some big surprises coming up",
    "start": "1713059",
    "end": "1718760"
  },
  {
    "text": "will be let me grab some water",
    "start": "1718760",
    "end": "1723039"
  },
  {
    "text": "from the system in the browser but the next step would be to run them in like in headless mode and in Cypress supports",
    "start": "1730400",
    "end": "1736640"
  },
  {
    "text": "that as well so I can I can do the npm",
    "start": "1736640",
    "end": "1743659"
  },
  {
    "text": "run command like this to do run Cyprus in headless",
    "start": "1743659",
    "end": "1748940"
  },
  {
    "text": "mode so then I don't need a browser anymore it will run in a headless but the same test I kind of executed and of course",
    "start": "1748940",
    "end": "1755299"
  },
  {
    "text": "there's a lot of options to format the output and all that kind of stuff I haven't put my effort into that one but",
    "start": "1755299",
    "end": "1760940"
  },
  {
    "text": "now I had run all the same tests against the system running in Docker and yeah you can see the results of that as well",
    "start": "1760940",
    "end": "1768380"
  },
  {
    "text": "so it can work in headless and the next challenge or not necessarily challenge but nothing to do is to put the test",
    "start": "1768380",
    "end": "1775460"
  },
  {
    "text": "into Docker containers as well so this is the command for running the",
    "start": "1775460",
    "end": "1781399"
  },
  {
    "text": "things inside Docker I mount up the current directory which contains the",
    "start": "1781399",
    "end": "1786440"
  },
  {
    "text": "test and so on Cyprus provides a lot of pre-baked images for Docker for various",
    "start": "1786440",
    "end": "1792620"
  },
  {
    "text": "browsers and so on so I just kind of pull down one of the official ones and I'm running this on Apple silicon that's working",
    "start": "1792620",
    "end": "1800360"
  },
  {
    "text": "great these days and I tell it to run this test with the electron and give us",
    "start": "1800360",
    "end": "1806299"
  },
  {
    "text": "information where you should find the the the the system that is kind of running so I will",
    "start": "1806299",
    "end": "1812840"
  },
  {
    "text": "Source in some configuration again and then I will do the D test to run the",
    "start": "1812840",
    "end": "1819380"
  },
  {
    "text": "things inside Docker so now I'm running the Cypress test inside the docker container",
    "start": "1819380",
    "end": "1827740"
  },
  {
    "text": "and the output looks pretty familiar I guess",
    "start": "1827840",
    "end": "1833740"
  },
  {
    "text": "okay not too bad I have the system now I can run the test I can work one of the components the system and still do my",
    "start": "1842000",
    "end": "1847940"
  },
  {
    "text": "testing system testing will give me information about how this system as a whole is actually working from a user",
    "start": "1847940",
    "end": "1853700"
  },
  {
    "text": "perspective so that's a good place to be so the next step will be to bring everything together uh like I should be",
    "start": "1853700",
    "end": "1861200"
  },
  {
    "text": "able to run it in a pipeline fully automatic and to do that I continue to use Docker compose",
    "start": "1861200",
    "end": "1867440"
  },
  {
    "text": "killing this one examining the docker compose file a",
    "start": "1867440",
    "end": "1872720"
  },
  {
    "text": "little bit here so you can see that I'm defining the",
    "start": "1872720",
    "end": "1878299"
  },
  {
    "text": "various Services the client that's the uh the the serving the uh the front page",
    "start": "1878299",
    "end": "1884360"
  },
  {
    "text": "and so on I have the episodes API and I have the quotes API and I have",
    "start": "1884360",
    "end": "1891080"
  },
  {
    "text": "Cyprus as well so I can Define all those as services and I pull down the official image for Cypress double and Cyprus",
    "start": "1891080",
    "end": "1898100"
  },
  {
    "text": "there's one thing that's kind of interesting here and that's the dependent on because a typical challenge is that",
    "start": "1898100",
    "end": "1903980"
  },
  {
    "text": "you fire it up the test but the the decision that your test is not ready so this this will help me because it starts",
    "start": "1903980",
    "end": "1910720"
  },
  {
    "text": "oops it starts the uh the client service the episodes API and the quotes API and",
    "start": "1910720",
    "end": "1916700"
  },
  {
    "text": "Cypress will not start until they are reported ready so we are ready to go and",
    "start": "1916700",
    "end": "1921740"
  },
  {
    "text": "have some action and then Cypress is is doing his stuff that is that is taking care of some synchronization things",
    "start": "1921740",
    "end": "1929120"
  },
  {
    "text": "in addition I run it with this Docker compose so I set the system into test",
    "start": "1929120",
    "end": "1934700"
  },
  {
    "text": "mode I run Docker compose and it gives them additional values like a board on container exit so that tell that's teles",
    "start": "1934700",
    "end": "1942020"
  },
  {
    "text": "Docker composed to start off the whole thing client episodes quotes and then Cyprus",
    "start": "1942020",
    "end": "1947779"
  },
  {
    "text": "when they are ready and then I bought when a container exits and you got to",
    "start": "1947779",
    "end": "1953120"
  },
  {
    "text": "get the exit code from Cyprus so Cyprus is gonna do all the testing when it's",
    "start": "1953120",
    "end": "1958279"
  },
  {
    "text": "done and it's going to exit when it's done and dockerco post is also going to",
    "start": "1958279",
    "end": "1963740"
  },
  {
    "text": "exit when it's done take down all the kind of the system and the exit code will be from the",
    "start": "1963740",
    "end": "1971120"
  },
  {
    "text": "from the Cypress testing so to run this now I've put it in the",
    "start": "1971120",
    "end": "1978020"
  },
  {
    "text": "script basically simple stuff but it's it's running this in Docker compose now it's starting up the whole ecosystem",
    "start": "1978020",
    "end": "1984740"
  },
  {
    "text": "it's talking to Azure ID but this might developer ashtray either put it like that it's running all the tests and this is",
    "start": "1984740",
    "end": "1991580"
  },
  {
    "text": "in test mode and of course if you are paying attention you you see that hey you're dumping a lot of access",
    "start": "1991580",
    "end": "1997399"
  },
  {
    "text": "tokens into the log and so on and you shouldn't do that I totally agree I told you it was a bad pattern so be cautious",
    "start": "1997399",
    "end": "2005080"
  },
  {
    "text": "and do a threat modeling on your test system as well because if I do this and store these logs in a place that",
    "start": "2005080",
    "end": "2010659"
  },
  {
    "text": "shouldn't be this a good opportunity for abuse so threat modeling on test system is a good thing as well",
    "start": "2010659",
    "end": "2017620"
  },
  {
    "text": "the test finished and everything was kind of okay and if I",
    "start": "2017620",
    "end": "2022659"
  },
  {
    "text": "Echo the exit code from the previous command I get zero and this is the exit code from side press and then I can use",
    "start": "2022659",
    "end": "2029380"
  },
  {
    "text": "that in my pipeline I can set on the configuration and run the test and if this kind of zero I will continue if",
    "start": "2029380",
    "end": "2036640"
  },
  {
    "text": "it's different than zero a test has not passed and I can break the build or the pr or whatever you like to put it into",
    "start": "2036640",
    "end": "2044919"
  },
  {
    "text": "so to wrap things up the current status is for our complex",
    "start": "2044919",
    "end": "2050320"
  },
  {
    "text": "and super modern system we now have a fully automated system test scenario affiliate synthetic test environment",
    "start": "2050320",
    "end": "2058300"
  },
  {
    "text": "a system with active authentication authorization is is rolling more or less like it will in production besides what",
    "start": "2058300",
    "end": "2064780"
  },
  {
    "text": "these different flow initially system has most of the security controls",
    "start": "2064780",
    "end": "2069878"
  },
  {
    "text": "activated if you paid attention the only thing that is not activated is the https or",
    "start": "2069879",
    "end": "2075820"
  },
  {
    "text": "localhost so if I was just doing this in practice maybe that's what the next one I would attack to make sure that that",
    "start": "2075820",
    "end": "2082419"
  },
  {
    "text": "was okay as well uh we have very little test support code",
    "start": "2082419",
    "end": "2088358"
  },
  {
    "text": "um 15 lines maybe and that's the stuff that I need to maintain and of course there are some risks related to having",
    "start": "2088359",
    "end": "2094060"
  },
  {
    "text": "that in the code but I can inject that code in different way so that could be handled as well",
    "start": "2094060",
    "end": "2100540"
  },
  {
    "text": "we have broken a few principles to reach this state but maybe the trades of",
    "start": "2100540",
    "end": "2105640"
  },
  {
    "text": "Traders are acceptable and again I can't emphasize enough this stuff about threat modeling your uh your",
    "start": "2105640",
    "end": "2112300"
  },
  {
    "text": "test system as well objective of these talks were to get you",
    "start": "2112300",
    "end": "2118420"
  },
  {
    "text": "guys more curious about diverting some of your unit test effort into do system testing because I think it's uh super",
    "start": "2118420",
    "end": "2126220"
  },
  {
    "text": "important and when you do that keep the security features on as far as possible",
    "start": "2126220",
    "end": "2132280"
  },
  {
    "text": "I know it's hard it's not only a technical challenge but it's definitely doable in my humble opinion I also think",
    "start": "2132280",
    "end": "2138940"
  },
  {
    "text": "it's necessary for a lot of our system no I'm ready for questions",
    "start": "2138940",
    "end": "2147780"
  },
  {
    "text": "yes do we have a mic or do you there's a mic coming hang on a sec",
    "start": "2148060",
    "end": "2153660"
  },
  {
    "text": "you're you're maintaining the Azure ID separately",
    "start": "2155020",
    "end": "2160240"
  },
  {
    "text": "yeah yeah and how are you automating that or yes yeah okay so I go into",
    "start": "2160240",
    "end": "2166839"
  },
  {
    "text": "Office 365 developer portal I registered an account and when I do that I get my",
    "start": "2166839",
    "end": "2173020"
  },
  {
    "text": "own Azure ad instance it's a level files five something so it's quite okay and",
    "start": "2173020",
    "end": "2178900"
  },
  {
    "text": "then the creation of the test users the objects whatever you would like to do you automate that",
    "start": "2178900",
    "end": "2184780"
  },
  {
    "text": "uh the only challenge in that area of the caveat is that this Office 365",
    "start": "2184780",
    "end": "2190240"
  },
  {
    "text": "developer thing is connected to me as a person I don't think that's ideally but I'll take that now and we try to challenge",
    "start": "2190240",
    "end": "2197680"
  },
  {
    "text": "Microsoft if it could be any way of making this a bit more like corporate I don't know if that's the right word",
    "start": "2197680",
    "end": "2203760"
  },
  {
    "text": "assigning it to Ecuador for instance something like that yeah but this is it",
    "start": "2203760",
    "end": "2209140"
  },
  {
    "text": "isn't a super problem because if a user leaves and I have to switch to another one the only thing that I do is",
    "start": "2209140",
    "end": "2215619"
  },
  {
    "text": "actually run my scripts and update the tenant ID in my config and I'm good to go",
    "start": "2215619",
    "end": "2221020"
  },
  {
    "text": "so it's not it's not too too much work no thank you yeah",
    "start": "2221020",
    "end": "2227460"
  },
  {
    "text": "um thank you that was really really interesting talk um one thing that I see with",
    "start": "2231880",
    "end": "2237760"
  },
  {
    "text": "um distributed systems is that when you want to run an integration test for",
    "start": "2237760",
    "end": "2244060"
  },
  {
    "text": "example in a GitHub action and in this example you have your entire environment running in Docker compose oftentimes",
    "start": "2244060",
    "end": "2252640"
  },
  {
    "text": "um you'll end up with a single component that is being deployed and changed and",
    "start": "2252640",
    "end": "2257740"
  },
  {
    "text": "then um if you're lucky if you've done the work you're going to have an integration or a testing environment right so you",
    "start": "2257740",
    "end": "2266920"
  },
  {
    "text": "get a single component that is going to be building uh which you can signal is",
    "start": "2266920",
    "end": "2271960"
  },
  {
    "text": "and test and then that GitHub action that environment has to go and talk with 20 different services to make how do you",
    "start": "2271960",
    "end": "2279820"
  },
  {
    "text": "think about that um I would typically think what are the",
    "start": "2279820",
    "end": "2286420"
  },
  {
    "text": "opportunities yeah what are the risk factors because I'm from Ecuador we talk",
    "start": "2286420",
    "end": "2291940"
  },
  {
    "text": "about risks all the time so I would wait my options and obviously things could",
    "start": "2291940",
    "end": "2297400"
  },
  {
    "text": "take time to run these tests and I also have problems with stuff that I don't I don't control Me Maybe I'm not allowed",
    "start": "2297400",
    "end": "2305079"
  },
  {
    "text": "to test them the way I'm doing so there are a few considerations that you need to make and maybe putting that test not",
    "start": "2305079",
    "end": "2310420"
  },
  {
    "text": "to run every time there is a change but you kind of put them into an action and start that manually when you want to get",
    "start": "2310420",
    "end": "2315820"
  },
  {
    "text": "the status of the system so I'm sorry to say but yeah yeah it depends there are no there are no like",
    "start": "2315820",
    "end": "2322480"
  },
  {
    "text": "easy answer to this one I just want us to use more effort on system testing of",
    "start": "2322480",
    "end": "2327520"
  },
  {
    "text": "the whole system because I've seen in our area yeah people get tired of mocking and it's",
    "start": "2327520",
    "end": "2334839"
  },
  {
    "text": "super hard to do it so is there any other Alternatives that's what we're exploring here",
    "start": "2334839",
    "end": "2340180"
  },
  {
    "text": "thank you other questions or people have done this",
    "start": "2340180",
    "end": "2346000"
  },
  {
    "text": "differently want to share I'm super happy about that as well",
    "start": "2346000",
    "end": "2351059"
  },
  {
    "text": "so what the question was what is the solution for two-factor authentication and tests so the pattern that we used",
    "start": "2354940",
    "end": "2362260"
  },
  {
    "text": "was to use a different flow that did and we have turned off the two-factor authentication for users",
    "start": "2362260",
    "end": "2370180"
  },
  {
    "text": "turning it off but doing it on a test system with syntastic test data so if everything is",
    "start": "2370180",
    "end": "2376180"
  },
  {
    "text": "exposed it shouldn't be a real big problem um I don't know if there is this it's a",
    "start": "2376180",
    "end": "2382900"
  },
  {
    "text": "nice solution for test users with MFA and something turned on and I also",
    "start": "2382900",
    "end": "2390280"
  },
  {
    "text": "question if we should really do those things in our production Azure ID because that's a production environment",
    "start": "2390280",
    "end": "2396220"
  },
  {
    "text": "I I would I would try to avoid mixing testing users and production users and",
    "start": "2396220",
    "end": "2402339"
  },
  {
    "text": "test config with production config because I see that it's so easy for us as humans to mess up running one command",
    "start": "2402339",
    "end": "2409180"
  },
  {
    "text": "thinking I was updating the QA environment and certainly users are calling in to say everything is down",
    "start": "2409180",
    "end": "2415119"
  },
  {
    "text": "so whatever I can do to reduce that risk and to me that is synthetic test data",
    "start": "2415119",
    "end": "2420720"
  },
  {
    "text": "separate production and testing seriously",
    "start": "2420720",
    "end": "2425579"
  },
  {
    "text": "thank you for asking all right hi I'd just like to take the opportunity",
    "start": "2428320",
    "end": "2434800"
  },
  {
    "text": "to um yeah tell my version of it or another",
    "start": "2434800",
    "end": "2440680"
  },
  {
    "text": "approach that I have went to solve please similar do you mind standing up",
    "start": "2440680",
    "end": "2446740"
  },
  {
    "text": "yeah no worries hi yeah and it's regarding mock uses and",
    "start": "2446740",
    "end": "2455260"
  },
  {
    "text": "app registration within the production Azure environment not establishing an Office 365",
    "start": "2455260",
    "end": "2462960"
  },
  {
    "text": "Development Area and requesting and gaining access also using Cyprus to",
    "start": "2462960",
    "end": "2469780"
  },
  {
    "text": "authenticate and making an absolute organization that is allowed to authenticate against",
    "start": "2469780",
    "end": "2475359"
  },
  {
    "text": "a system or our web application and also uh",
    "start": "2475359",
    "end": "2480880"
  },
  {
    "text": "yeah bypassing the two-factor part of it so then you're creating a",
    "start": "2480880",
    "end": "2487720"
  },
  {
    "text": "source principle yeah correct and using that one to authenticate not the user yeah so we're fetching a token or a key",
    "start": "2487720",
    "end": "2496119"
  },
  {
    "text": "for that and using that to authenticate to our uh the API yeah",
    "start": "2496119",
    "end": "2501339"
  },
  {
    "text": "and it's working yeah but um it's still in proof of concept state but uh I am",
    "start": "2501339",
    "end": "2508180"
  },
  {
    "text": "able to access our application yep is that okay",
    "start": "2508180",
    "end": "2514180"
  },
  {
    "text": "uh uh yeah why not yeah so so if it works for you guys yes it should be okay but",
    "start": "2514180",
    "end": "2521800"
  },
  {
    "text": "then I would really encourage you to have a look at the test principles and then the retract modeling on your system",
    "start": "2521800",
    "end": "2527800"
  },
  {
    "text": "and ask yourself what are the questions what could possibly go wrong with this sector yeah and if you have some things",
    "start": "2527800",
    "end": "2534040"
  },
  {
    "text": "that you think are risky or change challenging or some threats around what",
    "start": "2534040",
    "end": "2539380"
  },
  {
    "text": "do we do to mitigate them uh as long as you do that um and there are no governance saying",
    "start": "2539380",
    "end": "2545859"
  },
  {
    "text": "that we shall not yeah why not I see a security things",
    "start": "2545859",
    "end": "2551020"
  },
  {
    "text": "that we need to check out then governance and things like that before going all the way but also keeping track",
    "start": "2551020",
    "end": "2556900"
  },
  {
    "text": "of roles and access it to different environments and stuff will be more challenging this approach I think rather",
    "start": "2556900",
    "end": "2563619"
  },
  {
    "text": "than having uh office 369 having a self-contained and controlled",
    "start": "2563619",
    "end": "2569440"
  },
  {
    "text": "environment it's correct but I've I've been around for a while and I've messed up so many times because I yeah I do",
    "start": "2569440",
    "end": "2577180"
  },
  {
    "text": "stuff in various hours of the day and Miss mistaking production for being developed and so on I had done it too",
    "start": "2577180",
    "end": "2583960"
  },
  {
    "text": "many times yeah so I really want to encourage people to explore the syntactic test start as well as much as",
    "start": "2583960",
    "end": "2591400"
  },
  {
    "text": "possible I think text testing on production data and all",
    "start": "2591400",
    "end": "2597400"
  },
  {
    "text": "that kind of thing is this huge security risk like I mentioned initially with this incident that we had it was an air copy",
    "start": "2597400",
    "end": "2605020"
  },
  {
    "text": "of production which is pretty useful I you know normal for us to do but if data",
    "start": "2605020",
    "end": "2611140"
  },
  {
    "text": "is exposed then yeah it could be business data gdpr you name it",
    "start": "2611140",
    "end": "2616720"
  },
  {
    "text": "I like to avoid that I don't want to be on the front page of vehicle because I agreed",
    "start": "2616720",
    "end": "2622020"
  },
  {
    "text": "but uh yeah good Insight thank you yeah kind of a follow-up question on the",
    "start": "2622020",
    "end": "2628780"
  },
  {
    "text": "same we are also running a system test with the the production Azure ID using a",
    "start": "2628780",
    "end": "2636400"
  },
  {
    "text": "service principle uh but uh in your case I'm wondering when you are supposed to",
    "start": "2636400",
    "end": "2643440"
  },
  {
    "text": "verify the access token in your API yeah won't the issue be something different",
    "start": "2643440",
    "end": "2649240"
  },
  {
    "text": "than it would otherwise be when you use the developer program ID so so the",
    "start": "2649240",
    "end": "2654579"
  },
  {
    "text": "question was when I do this pattern and I get the token to the episodes API I'm",
    "start": "2654579",
    "end": "2659859"
  },
  {
    "text": "going to verify it want the issue be different right so the way my episodes",
    "start": "2659859",
    "end": "2664900"
  },
  {
    "text": "API works is that I it has a configuration parameter which tells it which issue issue it should expect",
    "start": "2664900",
    "end": "2672520"
  },
  {
    "text": "so that is part of my configuration and that's part of my token validation so I I pulled down the token I verified the",
    "start": "2672520",
    "end": "2678880"
  },
  {
    "text": "signature by getting the keys and that kind of stuff and then I do a few other things and that is to verify the issue",
    "start": "2678880",
    "end": "2684940"
  },
  {
    "text": "but the issue is like a configurable parameter I just have to adapt that to each of the environments and so on so",
    "start": "2684940",
    "end": "2691359"
  },
  {
    "text": "that's how we handle that one that makes sense or yes as long as it's",
    "start": "2691359",
    "end": "2697660"
  },
  {
    "text": "through configuration and not two different parts in your verification logic oh it's it's true configuration I",
    "start": "2697660",
    "end": "2704440"
  },
  {
    "text": "have told this API that we should only accept access token from and that is configurable",
    "start": "2704440",
    "end": "2711110"
  },
  {
    "text": "[Music] thank you",
    "start": "2711110",
    "end": "2716220"
  },
  {
    "text": "yes in my company we use a Blazer webassembly combined with B unit because",
    "start": "2722260",
    "end": "2727599"
  },
  {
    "text": "that gives us the capabilities to actually mock the authentication State fine so we can run unit tests very",
    "start": "2727599",
    "end": "2734140"
  },
  {
    "text": "easily to verify the behavior of our client applications given the various authentication States",
    "start": "2734140",
    "end": "2739720"
  },
  {
    "text": "also using the backend for front-end pattern okay but at the end of the day it is still a unit test that does not",
    "start": "2739720",
    "end": "2746020"
  },
  {
    "text": "leave the unit on the test there is no pipeline testing no end-to-end testing would you still emphasize system testing",
    "start": "2746020",
    "end": "2753760"
  },
  {
    "text": "even though it initialized and it introduces secondary ades less secure",
    "start": "2753760",
    "end": "2760119"
  },
  {
    "text": "code in order to facilitate actually testing the system into end in my experience I would strongly",
    "start": "2760119",
    "end": "2769140"
  },
  {
    "text": "Advocate exploring it at least because I I see the way things have involved but",
    "start": "2769140",
    "end": "2775960"
  },
  {
    "text": "how we code and we do test driven development and so on everything is focused on the unit and assuming the",
    "start": "2775960",
    "end": "2781180"
  },
  {
    "text": "rest of the stuff it kind of is working together but then I see in real life when we are deploying",
    "start": "2781180",
    "end": "2786280"
  },
  {
    "text": "the application and so on we get curious problems and incidents and it's typically because yeah some component",
    "start": "2786280",
    "end": "2791800"
  },
  {
    "text": "down the road had changed and we didn't pick that up so whatever we can do to test the whole system in the perspective of the end",
    "start": "2791800",
    "end": "2798099"
  },
  {
    "text": "user because he or she doesn't matter if the the unit test works or not they want to use it on",
    "start": "2798099",
    "end": "2803920"
  },
  {
    "text": "a daily basis so I still think that's a good idea and I acknowledge the culture",
    "start": "2803920",
    "end": "2810400"
  },
  {
    "text": "and the context and so on but if people would spend some energy on exploring that route finding what makes sense and",
    "start": "2810400",
    "end": "2817540"
  },
  {
    "text": "so on that is my objective thank you",
    "start": "2817540",
    "end": "2823839"
  },
  {
    "text": "and I would like to learn more about that assembly it sounds really cool well we haven't looked back since we",
    "start": "2823839",
    "end": "2831220"
  },
  {
    "text": "haven't how long I've been doing that we started back when they released place a",
    "start": "2831220",
    "end": "2836380"
  },
  {
    "text": "web server and then the second they released webassembly we pretty much was there from the go live okay of it and",
    "start": "2836380",
    "end": "2843520"
  },
  {
    "text": "are now currently porting everything we have to it because it has just been a",
    "start": "2843520",
    "end": "2848920"
  },
  {
    "text": "wonderful yeah and we looked at it like some years ago in the infancy but it",
    "start": "2848920",
    "end": "2854319"
  },
  {
    "text": "really I didn't catch up that they got a lot of attention and adoption but maybe",
    "start": "2854319",
    "end": "2859599"
  },
  {
    "text": "that is changing now currently there is a lot of Steam on it both in the adoption of it but also Implement",
    "start": "2859599",
    "end": "2865720"
  },
  {
    "text": "implementing features and all that stuff to it and that is both for the front end now and also for the back end right",
    "start": "2865720",
    "end": "2871540"
  },
  {
    "text": "there are companies like we are using doing the identity server for our authentication login and all that and",
    "start": "2871540",
    "end": "2877300"
  },
  {
    "text": "they are partnered with Microsoft and developing specific nougat Frameworks for enforcing back-end for front-end",
    "start": "2877300",
    "end": "2883780"
  },
  {
    "text": "development patterns okay Blazer interesting I have to create another",
    "start": "2883780",
    "end": "2889180"
  },
  {
    "text": "explore task for myself do that kind of stuff",
    "start": "2889180",
    "end": "2895020"
  },
  {
    "text": "okay I think we'll wrap it up it's almost lunch uh maybe you can btq that's always a good thing so thank you guys",
    "start": "2896079",
    "end": "2902680"
  },
  {
    "text": "I'm Los Cora this is if you want to get more information we love to share and to",
    "start": "2902680",
    "end": "2908079"
  },
  {
    "text": "hear from you guys and this is where you find everything with the slides and stuff and I promised you this QR code is not my attempt to",
    "start": "2908079",
    "end": "2916300"
  },
  {
    "text": "hack you guys honestly so thank you",
    "start": "2916300",
    "end": "2922490"
  },
  {
    "text": "[Applause]",
    "start": "2922490",
    "end": "2928020"
  }
]