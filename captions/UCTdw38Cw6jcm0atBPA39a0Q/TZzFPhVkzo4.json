[
  {
    "start": "0",
    "end": "120000"
  },
  {
    "text": "I'll be on can you hear me definitely here Oh excellent good",
    "start": "5630",
    "end": "12240"
  },
  {
    "text": "morning come on guys good morning yeah",
    "start": "12240",
    "end": "20420"
  },
  {
    "text": "welcome to NBC I think we are the first talk after the keynote right so who do",
    "start": "20420",
    "end": "28470"
  },
  {
    "text": "you think I am a spirit core version - okay and who do you think I'd NT server",
    "start": "28470",
    "end": "34380"
  },
  {
    "text": "version to a couple of people so basically Brock and I run this this",
    "start": "34380",
    "end": "41730"
  },
  {
    "text": "open source project and thanks for - NDC for forgiving us you know them the space",
    "start": "41730",
    "end": "48030"
  },
  {
    "text": "and time to you know do open source here and not only you know commercial stuff",
    "start": "48030",
    "end": "54620"
  },
  {
    "text": "so once a year roughly you know HP nerdcore has a big release right or net",
    "start": "54620",
    "end": "60899"
  },
  {
    "text": "cause a big release and and identity server is a library which sits you know",
    "start": "60899",
    "end": "66360"
  },
  {
    "text": "very closely close to the metal in a spinet core on the HTTP runtime so it",
    "start": "66360",
    "end": "73350"
  },
  {
    "text": "turns out that whenever taken a big release we also have a big release as well right because they tend to change",
    "start": "73350",
    "end": "81270"
  },
  {
    "text": "stuff yeah I'm not using the word break here maybe okay so that's that's what",
    "start": "81270",
    "end": "93420"
  },
  {
    "text": "happened so basically this talk is about giving you an update of everything that happened so to speak in the last year in",
    "start": "93420",
    "end": "99180"
  },
  {
    "text": "in identity server and and the ecosystem around that oh by the way because I always forget to say that at the end we",
    "start": "99180",
    "end": "106230"
  },
  {
    "text": "have stickers so if you want stickers come come here at the end of the talk there are plenty of them I think just",
    "start": "106230",
    "end": "113160"
  },
  {
    "text": "that I got that out of the way let's proc by the way I'm Dominic if you could",
    "start": "113160",
    "end": "122450"
  },
  {
    "start": "120000",
    "end": "220000"
  },
  {
    "text": "so we have a lot of things to go through a lot of little improvement sort of big",
    "start": "122450",
    "end": "127980"
  },
  {
    "text": "improvements a lot of you know new things and so on but the the one thing I",
    "start": "127980",
    "end": "134700"
  },
  {
    "text": "want to really focus on which is what effects everyone when moving to a SP nerdcore version 2 is the",
    "start": "134700",
    "end": "141180"
  },
  {
    "text": "new authentication system yeah so as I said identity server itself think of it",
    "start": "141180",
    "end": "146310"
  },
  {
    "text": "as an extension to the authentication system of a spinet core to give you you know protocols like Open ID Connect",
    "start": "146310",
    "end": "152280"
  },
  {
    "text": "support and ooofff and you know that the server side of these things so we are",
    "start": "152280",
    "end": "157560"
  },
  {
    "text": "really as I said very very close to the authentication system so and when we had",
    "start": "157560",
    "end": "163920"
  },
  {
    "text": "to rewrite that again last year actually that the funny story was that you know",
    "start": "163920",
    "end": "170850"
  },
  {
    "text": "Microsoft typically is very vocal about when they gonna release stuff and it typically coincides with some Scott",
    "start": "170850",
    "end": "177210"
  },
  {
    "text": "Caffrey keynote that they release new things this time it was different so",
    "start": "177210",
    "end": "182370"
  },
  {
    "text": "that was actually at NBC in Sydney so in the morning I came from breakfast I went to the elevator and I met Damien and",
    "start": "182370",
    "end": "188910"
  },
  {
    "text": "Barry from the agent that team and I said oh here's a USB stick here's the new version for a spirit core we just released it we didn't tell anyone so",
    "start": "188910",
    "end": "197010"
  },
  {
    "text": "that was kind of short notice yeah so I think somewhere in between would be a good anyways so yeah we had to rewrite",
    "start": "197010",
    "end": "204000"
  },
  {
    "text": "our stuff so when I thought about that how often we had to rewrite our stuff I",
    "start": "204000",
    "end": "209280"
  },
  {
    "text": "thought I give you a little you know next door Richard Campbell is doing the history of dotnet let's give you a",
    "start": "209280",
    "end": "214470"
  },
  {
    "text": "little history of dotnet core of a split authentication okay so who has seen this",
    "start": "214470",
    "end": "221340"
  },
  {
    "start": "220000",
    "end": "300000"
  },
  {
    "text": "in his life so the the free sticker",
    "start": "221340",
    "end": "227550"
  },
  {
    "text": "question how many of these authentication methods that you see on the screen actually work",
    "start": "227550",
    "end": "233989"
  },
  {
    "text": "well if you don't count none only two right so has anyone ever used passport",
    "start": "238209",
    "end": "244510"
  },
  {
    "text": "authentication there was a thing that actually got pulled before asp.net 1.0",
    "start": "244510",
    "end": "250450"
  },
  {
    "text": "but it was too late remove it from the enum okay separated came in in dotnet",
    "start": "250450",
    "end": "260739"
  },
  {
    "text": "four point five where they had plans to make federated of indication of first-class citizen in asp.net but they",
    "start": "260739",
    "end": "267490"
  },
  {
    "text": "changed their mind but it was too late to change the enum so actually you know",
    "start": "267490",
    "end": "273849"
  },
  {
    "text": "in asp.net you only had really two chances or choices forms authentication or Windows authentication and if you",
    "start": "273849",
    "end": "281139"
  },
  {
    "text": "wanted to do both basically you were out of luck and if you wanted to do anything that is not forms or Windows you had to",
    "start": "281139",
    "end": "287650"
  },
  {
    "text": "go back to none and re-implement the whole thing okay and that is just an",
    "start": "287650",
    "end": "293050"
  },
  {
    "text": "artifact of how did the HTTP modules architecture worked in a spirit net so",
    "start": "293050",
    "end": "298449"
  },
  {
    "text": "when they move from a to a net to katana right they changed the whole architecture and suddenly everything was",
    "start": "298449",
    "end": "303580"
  },
  {
    "start": "300000",
    "end": "344000"
  },
  {
    "text": "middleware yeah you can have as many middlewares in your pipeline and one attempt in katana was which was the the",
    "start": "303580",
    "end": "311770"
  },
  {
    "text": "biggest limitation of asp.net is to support more than one authentication method at the same time right which is",
    "start": "311770",
    "end": "317710"
  },
  {
    "text": "something that in identity server you really want right you want to have a server that can send out to as many",
    "start": "317710",
    "end": "323650"
  },
  {
    "text": "external identity providers you want right so we need support for more than",
    "start": "323650",
    "end": "328750"
  },
  {
    "text": "one authentication method so you know all I had to learn middleware is is so",
    "start": "328750",
    "end": "334240"
  },
  {
    "text": "easy right it's a linked list of modules running in the exact order in which you",
    "start": "334240",
    "end": "340120"
  },
  {
    "text": "wire them up right so when they came up",
    "start": "340120",
    "end": "345520"
  },
  {
    "start": "344000",
    "end": "417000"
  },
  {
    "text": "with their new authentication architecture they present it as something called passive middleware so",
    "start": "345520",
    "end": "352360"
  },
  {
    "text": "it's middleware in the pipeline right and all we know is little bear runs in the exact same order as you wire it up",
    "start": "352360",
    "end": "357460"
  },
  {
    "text": "unless it's passive then it doesn't run okay so the idea was to basically have",
    "start": "357460",
    "end": "364419"
  },
  {
    "text": "one active of indication middleware which is your primary authentication method like cookies for example and then",
    "start": "364419",
    "end": "370779"
  },
  {
    "text": "as many if once as you want which you know can be alternative of indication methods and",
    "start": "370779",
    "end": "377539"
  },
  {
    "text": "this made my head hurt pretty bad right because then these things were in the",
    "start": "377539",
    "end": "383069"
  },
  {
    "text": "pipeline but didn't run but you can call back to them like like go back in time from your code and invoke them you know",
    "start": "383069",
    "end": "389699"
  },
  {
    "text": "after the fact and guess what happened if by accident you configure to",
    "start": "389699",
    "end": "394949"
  },
  {
    "text": "middlewares to be active it was pretty much undefined behavior it depended on",
    "start": "394949",
    "end": "401370"
  },
  {
    "text": "the order in which they are wired up on in the pipeline okay so this was not",
    "start": "401370",
    "end": "406409"
  },
  {
    "text": "very very very intuitive to use so you know in HP nerdcore they had the chance",
    "start": "406409",
    "end": "415169"
  },
  {
    "text": "to make everything better right so that's when they came up in a spirit core instead of just having active and",
    "start": "415169",
    "end": "421860"
  },
  {
    "text": "passive you could now make them active on the way in and pass it on the way out which made my head hurt even more even",
    "start": "421860",
    "end": "428370"
  },
  {
    "text": "more yeah so they had something like automatic authenticate equals true means",
    "start": "428370",
    "end": "433469"
  },
  {
    "text": "that's your default authentication method an automatic challenge was basically the thing that sent the user",
    "start": "433469",
    "end": "440039"
  },
  {
    "text": "to a place where he can authenticate and they changed his default values over",
    "start": "440039",
    "end": "445710"
  },
  {
    "text": "time many many times that I in the end even didn't know anymore which mittelmeer was passive which one was",
    "start": "445710",
    "end": "451409"
  },
  {
    "text": "active and which one was true or false and so on and guess what what happened if by accident you said to",
    "start": "451409",
    "end": "457650"
  },
  {
    "text": "bitl where's meter has to be automatic authenticate undefined behavior again it",
    "start": "457650",
    "end": "464909"
  },
  {
    "text": "depended on the order they wired up right and but this time it was even",
    "start": "464909",
    "end": "471449"
  },
  {
    "text": "worse because the order was affected by in in both directions okay so yeah now",
    "start": "471449",
    "end": "476669"
  },
  {
    "text": "we complained about that a lot and and finally between 1801 and 1802 they had a",
    "start": "476669",
    "end": "484169"
  },
  {
    "text": "time to actually rewrite the thing from scratch yeah and this looks much better",
    "start": "484169",
    "end": "489840"
  },
  {
    "start": "488000",
    "end": "520000"
  },
  {
    "text": "now because in HTML core to what we now have basically is a support for",
    "start": "489840",
    "end": "495650"
  },
  {
    "text": "dependency injection in the authentication system so the idea is you have a hand",
    "start": "495650",
    "end": "501340"
  },
  {
    "text": "a so-called handler which takes care of one of indication method right there's a cookie handler and there's a Windows",
    "start": "501340",
    "end": "507610"
  },
  {
    "text": "handler and a Google handler and Facebook handler and a nobody connect handler and so on and you just throw",
    "start": "507610",
    "end": "513580"
  },
  {
    "text": "everything into the di container that you want to support okay and then you",
    "start": "513580",
    "end": "520409"
  },
  {
    "start": "520000",
    "end": "544000"
  },
  {
    "text": "have exactly one middleware in the pipeline which is the authentication",
    "start": "520409",
    "end": "525820"
  },
  {
    "text": "middleware and this will basically go at runtime to to the DI container to get",
    "start": "525820",
    "end": "531990"
  },
  {
    "text": "your default handler okay that the one that you want to use as your default",
    "start": "531990",
    "end": "537520"
  },
  {
    "text": "authentication method so that means you have to configure basically that the AI",
    "start": "537520",
    "end": "542800"
  },
  {
    "text": "container okay and that's what that looks like now so it turns out it's not",
    "start": "542800",
    "end": "549610"
  },
  {
    "start": "544000",
    "end": "609000"
  },
  {
    "text": "a trivial problem to solve okay so you now have a default authenticate scheme a default forbid scheme a default",
    "start": "549610",
    "end": "555730"
  },
  {
    "text": "challenge scheme a default sign-in scheme and I forgot one right and the sign out scheme okay and this",
    "start": "555730",
    "end": "564310"
  },
  {
    "text": "actually is not an uncommon configuration right so you have your",
    "start": "564310",
    "end": "569770"
  },
  {
    "text": "cookie handler being the primary of indication handler in asp.net core - you",
    "start": "569770",
    "end": "574959"
  },
  {
    "text": "know like issue cookies validate the cookies coming back but when you wanna",
    "start": "574959",
    "end": "581070"
  },
  {
    "text": "send the user to a login page the login page is not local it's on your open ID connect provider so you have to set the",
    "start": "581070",
    "end": "587650"
  },
  {
    "text": "challenge scheme to OID C right but when you come back from the OID C provider you might not want to sign him directly",
    "start": "587650",
    "end": "593740"
  },
  {
    "text": "into the cookie but in into a second cookie that's why the sign-in scheme is 10 okay does that make your head hurt",
    "start": "593740",
    "end": "600640"
  },
  {
    "text": "you good yeah the other thing they change in",
    "start": "600640",
    "end": "608260"
  },
  {
    "text": "every single version was how you interact with that okay and you know",
    "start": "608260",
    "end": "614410"
  },
  {
    "start": "609000",
    "end": "1070000"
  },
  {
    "text": "despite making fun of that I think what we have today is it's the best thing that we had so far okay we ordering",
    "start": "614410",
    "end": "621580"
  },
  {
    "text": "issues are almost gone Microsoft banished to add ordering issues to the DI container which is a different",
    "start": "621580",
    "end": "626740"
  },
  {
    "text": "problem but basically they you now have five methods hanging off the HTTP context",
    "start": "626740",
    "end": "634180"
  },
  {
    "text": "yeah for the five verbs if you will that you need to interact with with the education",
    "start": "634180",
    "end": "641470"
  },
  {
    "text": "system sign in sign out challenge for bid and authenticate okay",
    "start": "641470",
    "end": "646570"
  },
  {
    "text": "signing in the user signing out the user sending a user to somewhere where he can sign in sending a user to somewhere",
    "start": "646570",
    "end": "653920"
  },
  {
    "text": "where you can tell him that he is forbidden now and authenticate means basically take a credential and turn it into a",
    "start": "653920",
    "end": "660070"
  },
  {
    "text": "claims principal okay these are the five the five methods you have you can see",
    "start": "660070",
    "end": "665200"
  },
  {
    "text": "that every method here has two versions yeah one way you pass in a scheme right every",
    "start": "665200",
    "end": "670960"
  },
  {
    "text": "handler needs to have a unique name that's what they call the authentication scheme or if you don't pass in the",
    "start": "670960",
    "end": "677260"
  },
  {
    "text": "scheme just go on back it basically uses whatever you have said as a default scheme okay and that works pretty well",
    "start": "677260",
    "end": "687150"
  },
  {
    "text": "okay so that was the big change we had to basically react attack the dentist",
    "start": "687150",
    "end": "692440"
  },
  {
    "text": "service or maybe you just want to show how we deal with that sure so here's an",
    "start": "692440",
    "end": "698260"
  },
  {
    "text": "example of identity server being hosted in and they s been at core application here's our startup file where we're",
    "start": "698260",
    "end": "704890"
  },
  {
    "text": "configuring our di container and then here what we do is our configuring identity server right now we're just",
    "start": "704890",
    "end": "710950"
  },
  {
    "text": "pulling in some some test users and some configuration and what we can do is then",
    "start": "710950",
    "end": "717520"
  },
  {
    "text": "if you want to control the cookie because it is confusing yeah we when you",
    "start": "717520",
    "end": "725380"
  },
  {
    "text": "run on the console we actually print out all the scheme configurations okay so that you actually know what you're",
    "start": "725380",
    "end": "731620"
  },
  {
    "text": "getting yeah so if you don't configure anything related to authentication then",
    "start": "731620",
    "end": "736780"
  },
  {
    "text": "we'll basically use an an internal scheme name called ID server right okay",
    "start": "736780",
    "end": "742180"
  },
  {
    "text": "so we're gonna wire up a cookie handler for you by default with some default settings and we're gonna fire up a",
    "start": "742180",
    "end": "748570"
  },
  {
    "text": "second cookie handler that you can use for external authentication and we made it the decision to only expose you know",
    "start": "748570",
    "end": "757390"
  },
  {
    "text": "rudimentary configuration options yes so quickly show that so basically all you can do while by our configuration system",
    "start": "757390",
    "end": "764080"
  },
  {
    "text": "is basically set the cookie lifetime and if it's a sliding cookie or not okay and that's totally fine because by using",
    "start": "764080",
    "end": "771490"
  },
  {
    "text": "this new of indication system from a spirit core you can easily buy up your own cookie handler and just replace ours",
    "start": "771490",
    "end": "777610"
  },
  {
    "text": "that that's the beauty of being di based now okay right so these are our own",
    "start": "777610",
    "end": "783790"
  },
  {
    "text": "built in cookie if you don't want that then and want to control things like the cookie name for example what I have is",
    "start": "783790",
    "end": "790510"
  },
  {
    "text": "some snippets I can paste in here and if you go configure this now or you're",
    "start": "790510",
    "end": "796420"
  },
  {
    "text": "adding your own custom cookie handler to the DI system alright this is the cookie",
    "start": "796420",
    "end": "801730"
  },
  {
    "text": "you want for your login page at identity server you have all the options that you want to configure with the cookie give the name your own sliding expiration or",
    "start": "801730",
    "end": "808570"
  },
  {
    "text": "wire into any of the other plumbing that they provide you here and then what you're doing is by using this version of",
    "start": "808570",
    "end": "814300"
  },
  {
    "text": "add authentication right this is the shorthand version where you're setting what you want the scheme to be by",
    "start": "814300",
    "end": "820120"
  },
  {
    "text": "default for everything so that's not only sign in but sign out and so on and so forth okay so now we run this so now",
    "start": "820120",
    "end": "830290"
  },
  {
    "text": "we're using our custom cookie instead of the built in identity server cookie at this point the identity server cookies not used at all and then if we go to the",
    "start": "830290",
    "end": "837340"
  },
  {
    "text": "local identity server and actually log in you know if if you have requirements",
    "start": "837340",
    "end": "843730"
  },
  {
    "text": "like custom domains custom paths you know things that you know you want to directly configure on the cookie handler",
    "start": "843730",
    "end": "850540"
  },
  {
    "text": "just just insert your own in the DI container replace ours and we just want to use yours yeah so you have total",
    "start": "850540",
    "end": "857350"
  },
  {
    "text": "control over the cookie that gets used that identity server in that that login process cool so let's say we want to add",
    "start": "857350",
    "end": "865480"
  },
  {
    "text": "something that Google sign-in okay same idea just just to show them the pattern here basically what you do is you go to",
    "start": "865480",
    "end": "872230"
  },
  {
    "text": "your di container you throw in a Google handler right you configure it Google",
    "start": "872230",
    "end": "878530"
  },
  {
    "text": "you know every handler has like provider specific configuration options and in that case you have to set your your",
    "start": "878530",
    "end": "884800"
  },
  {
    "text": "client ID and your client secret from from Google and also can just fill out the first parameter before the options",
    "start": "884800",
    "end": "891450"
  },
  {
    "text": "the first parameter after before the options is basically the unique name of",
    "start": "891450",
    "end": "896500"
  },
  {
    "text": "the handler because later on in your code you want to call it by name right you want to send user to Google",
    "start": "896500",
    "end": "902019"
  },
  {
    "text": "and that is the name of the so called authentication scheme okay the Google Handler happens to default to",
    "start": "902019",
    "end": "908679"
  },
  {
    "text": "Google internally but if you want to give it your own unique name you can pass in whatever you want foo whatever",
    "start": "908679",
    "end": "914739"
  },
  {
    "text": "and the second one actually there's a second parameter as well that that's a display name yeah so if you want to",
    "start": "914739",
    "end": "920319"
  },
  {
    "text": "basically give the UI a hint how it should maybe dynamically render the",
    "start": "920319",
    "end": "925929"
  },
  {
    "text": "Google pattern for example you can set a display name as well and again that is not specific to Google it's just how the",
    "start": "925929",
    "end": "932499"
  },
  {
    "text": "new of indication system works you can you know scheme and display name and options and that's how you you know wire",
    "start": "932499",
    "end": "939429"
  },
  {
    "text": "up your authentication handlers so what what our UI actually does this maybe you",
    "start": "939429",
    "end": "945639"
  },
  {
    "text": "wanna quickly show that there's something in the DI container called the eye authentication scheme provider and that is and that that's an API that you",
    "start": "945639",
    "end": "953470"
  },
  {
    "text": "can use at runtime to query the authentication system so maybe you know",
    "start": "953470",
    "end": "958480"
  },
  {
    "text": "you you want to dynamically render your UI based on who what handlers are wired",
    "start": "958480",
    "end": "964449"
  },
  {
    "text": "up in in the DI container so you can use this API to get all the hair the scheme",
    "start": "964449",
    "end": "970480"
  },
  {
    "text": "names the display names and so on so you basically need to know everything at runtime how to invoke the handlers",
    "start": "970480",
    "end": "977049"
  },
  {
    "text": "dynamically okay and that's actually what our UI is doing so just",
    "start": "977049",
    "end": "981868"
  },
  {
    "text": "so this login page is basically just querying that interface querying the authentication system and showing what",
    "start": "990760",
    "end": "996339"
  },
  {
    "text": "we need to show dynamically to the user that's our just boilerplate code you can totally come in here take this over and",
    "start": "996339",
    "end": "1002370"
  },
  {
    "text": "show it however however you want to for your login page and now Brock signed in",
    "start": "1002370",
    "end": "1012209"
  },
  {
    "text": "using Google okay so we can even show the Diagnostics sure yeah so this in",
    "start": "1012209",
    "end": "1020790"
  },
  {
    "text": "shows fact in fact shows that I've come logging in from Google okay so yeah so",
    "start": "1020790",
    "end": "1027540"
  },
  {
    "text": "yeah and actually their Microsoft ships with support for Google Twitter",
    "start": "1027540",
    "end": "1033928"
  },
  {
    "text": "MSDN account and Facebook okay so these",
    "start": "1033929",
    "end": "1040079"
  },
  {
    "text": "four come from Microsoft they're dead there is a contra project on on github it's something HP dotnet dot contrib dot",
    "start": "1040079",
    "end": "1048000"
  },
  {
    "text": "o off providers I think it's called and they have like thirty plus more handlers that all follow the same pattern so if",
    "start": "1048000",
    "end": "1054570"
  },
  {
    "text": "you if you know how to wire up on hands are you know how to wire up them all okay and there you'll find essential",
    "start": "1054570",
    "end": "1060960"
  },
  {
    "text": "things like you know betel net untapped and other really important identity",
    "start": "1060960",
    "end": "1066330"
  },
  {
    "text": "providers okay so what else is new one of the biggest",
    "start": "1066330",
    "end": "1073500"
  },
  {
    "start": "1070000",
    "end": "1254000"
  },
  {
    "text": "you know like that the most common question we got from customers is you know especially the enterprise customers",
    "start": "1073500",
    "end": "1079410"
  },
  {
    "text": "that that had that have a TFS deployed is what about a DFS support and it's",
    "start": "1079410",
    "end": "1087750"
  },
  {
    "text": "actually to be honest really a shame that Microsoft took so long to build off",
    "start": "1087750",
    "end": "1094190"
  },
  {
    "text": "indication support for their own product okay so lwith Federation was the thing",
    "start": "1094190",
    "end": "1099780"
  },
  {
    "text": "that was missing ever since ya know no one had time to to port that or it wasn't per prioritized high enough",
    "start": "1099780",
    "end": "1106530"
  },
  {
    "text": "because hey you could you could go to a show instead right so we have W",
    "start": "1106530",
    "end": "1112320"
  },
  {
    "text": "Federation support finally okay so if you're running a working a company like like to be banks you know insurance",
    "start": "1112320",
    "end": "1117630"
  },
  {
    "text": "companies these kind of companies they have double use Federation in use it's",
    "start": "1117630",
    "end": "1123900"
  },
  {
    "text": "finally there almost promised really is really soon really promised yeah and if you are not",
    "start": "1123900",
    "end": "1130220"
  },
  {
    "text": "seeing it anytime soon just tweet blow dad he is in charge for that but yeah it should be it was",
    "start": "1130220",
    "end": "1137720"
  },
  {
    "text": "promised to be released last year I think they are really really close now so you just want to show them yeah it's",
    "start": "1137720",
    "end": "1144410"
  },
  {
    "text": "unfortunate that that's been the blocker for many people adopting actually that was the plaka for many people moving to",
    "start": "1144410",
    "end": "1151370"
  },
  {
    "text": "a through net core in general yeah because their their enterprise of indication system wasn't supported you",
    "start": "1151370",
    "end": "1159800"
  },
  {
    "text": "know same concept you basically say add double use Federation give this guy a name some provide a specific",
    "start": "1159800",
    "end": "1167260"
  },
  {
    "text": "configuration and by virtue of this I of",
    "start": "1167260",
    "end": "1172310"
  },
  {
    "text": "indication scheme provider it automatically shows up on the login page you can click the button so I have a hyper-v here running with a you know",
    "start": "1172310",
    "end": "1180530"
  },
  {
    "text": "ad FS server so that's what we're gonna use assuming my network connections gonna get there go back into identity",
    "start": "1180530",
    "end": "1188120"
  },
  {
    "text": "server which oh you're right we do actually the one thing we do need is to run under HTTP for this to work because",
    "start": "1188120",
    "end": "1196220"
  },
  {
    "text": "a DFS won't let us use that otherwise good okay we can go login here",
    "start": "1196220",
    "end": "1206410"
  },
  {
    "text": "now our WS Federation shows up again you could change that display name and the same approach is the other one and now",
    "start": "1206410",
    "end": "1212660"
  },
  {
    "text": "here we are my good corporate login like",
    "start": "1212660",
    "end": "1222110"
  },
  {
    "text": "that I should hand us back to identity server beautiful here we are yeah there",
    "start": "1222110",
    "end": "1227930"
  },
  {
    "text": "you go yeah yeah I think that that's the",
    "start": "1227930",
    "end": "1233600"
  },
  {
    "text": "that's the second biggest blocker for many companies the first biggest blocker",
    "start": "1233600",
    "end": "1238970"
  },
  {
    "text": "for well they're equally big I think is support for sam'l to P right that's the",
    "start": "1238970",
    "end": "1245120"
  },
  {
    "text": "other enterprise protocol that that companies are using again especially banks government yeah insurance",
    "start": "1245120",
    "end": "1254030"
  },
  {
    "start": "1254000",
    "end": "1612000"
  },
  {
    "text": "companies you know assemble sam'l is a really really popular protocol and saml used to be only popular in the",
    "start": "1254030",
    "end": "1260389"
  },
  {
    "text": "java space for a while because Microsoft was favoring WS Federation right so they'd equated their own version of",
    "start": "1260389",
    "end": "1266179"
  },
  {
    "text": "sam'l which was not well conceived perceived by the Java community so and",
    "start": "1266179",
    "end": "1272989"
  },
  {
    "text": "Microsoft will never ever support Cemil because they that's just not what they want to do right but there's luckily as",
    "start": "1272989",
    "end": "1279830"
  },
  {
    "text": "a guy from Sweden we all have to thank him under a blow and he's mr. mr. Sam oh yeah so whenever I have a similar",
    "start": "1279830",
    "end": "1286460"
  },
  {
    "text": "question I am I I haven't been Skype so I can ask him Ian so he's working on",
    "start": "1286460",
    "end": "1291889"
  },
  {
    "text": "assemble handler for a spirit core version two so that means you can now plug in this guy in a spirit core and",
    "start": "1291889",
    "end": "1299149"
  },
  {
    "text": "connect to your sam'l providers like education use a similar lot right like universities and so on a healthcare I",
    "start": "1299149",
    "end": "1306139"
  },
  {
    "text": "use it a lot that's why he actually wrote it in the first place let's show that so we have his nougat package",
    "start": "1306139",
    "end": "1312710"
  },
  {
    "text": "installed already the configuration again same pattern as everything else",
    "start": "1312710",
    "end": "1318519"
  },
  {
    "text": "pop this in here we have to get the indenting right so there's some you know",
    "start": "1318519",
    "end": "1326899"
  },
  {
    "text": "configuration about which identity provider you want to use I'm actually using his he has a test one up in the",
    "start": "1326899",
    "end": "1332239"
  },
  {
    "text": "cloud that Anders rotes wrote and maintains so we can check this",
    "start": "1332239",
    "end": "1337279"
  },
  {
    "text": "guy out",
    "start": "1337279",
    "end": "1339549"
  },
  {
    "text": "hang in here and now same l2p shows up okay and that has now crafted the you",
    "start": "1345070",
    "end": "1351409"
  },
  {
    "text": "know sam'l 2p authentication request over to this provider he has a little test UI that you can use to to say who",
    "start": "1351409",
    "end": "1358279"
  },
  {
    "text": "you want to be you can even say hey my name is uh my name is Joe their claim",
    "start": "1358279",
    "end": "1367549"
  },
  {
    "text": "here email is Joe Joe calm of course login right sends us back and there we",
    "start": "1367549",
    "end": "1375950"
  },
  {
    "text": "are we're logged in as Joe now into your app or identity server is anyone you think's",
    "start": "1375950",
    "end": "1383929"
  },
  {
    "text": "mo to appear at work",
    "start": "1383929",
    "end": "1386919"
  },
  {
    "text": "okay cool the last thing we want to show is",
    "start": "1389279",
    "end": "1395859"
  },
  {
    "text": "support for open that you connect right so more and more companies are moving to open early connect so assemble and W set",
    "start": "1395859",
    "end": "1402519"
  },
  {
    "text": "are actually legacy protocols if you think about it part they are widely used",
    "start": "1402519",
    "end": "1407649"
  },
  {
    "text": "still right and they won't go away anytime soon but more and more companies are moving to actually using Open ID",
    "start": "1407649",
    "end": "1414700"
  },
  {
    "text": "Connect and one one example would be a char ID but there are many many others out there that now use OpenID Connect so",
    "start": "1414700",
    "end": "1420460"
  },
  {
    "text": "let's add that as well okay should we actually use identity server with one of",
    "start": "1420460",
    "end": "1426039"
  },
  {
    "text": "our client applications yep yeah so actually over here in our sample we",
    "start": "1426039",
    "end": "1431379"
  },
  {
    "text": "actually have some some actual clients going through identity server and again this is a very common configuration is",
    "start": "1431379",
    "end": "1437710"
  },
  {
    "text": "to have your app only trust your identity server and then identity server deals with going to sam'l or to Azure",
    "start": "1437710",
    "end": "1443769"
  },
  {
    "text": "Active Directory for example so just quickly in our sample just to show you how that's configured the beauty is",
    "start": "1443769",
    "end": "1449320"
  },
  {
    "text": "again same thing asp net core - really simple the the consuming app the the",
    "start": "1449320",
    "end": "1455710"
  },
  {
    "text": "beauty of this architecture is that the consuming app only cares about your local identity server so in terms of",
    "start": "1455710",
    "end": "1461320"
  },
  {
    "text": "getting your users logged in so I'll run the sample app it's gonna go to identity",
    "start": "1461320",
    "end": "1467320"
  },
  {
    "text": "server to log in okay when I hit secure identity server then this is the same",
    "start": "1467320",
    "end": "1472570"
  },
  {
    "text": "login page that we've been using for the last few minutes and so now in this one maybe the user wants to go to Azure",
    "start": "1472570",
    "end": "1479799"
  },
  {
    "text": "Active Directory oh I'm gonna need to get my one password out okay I'll pick",
    "start": "1479799",
    "end": "1485470"
  },
  {
    "text": "my account and Oh bit of a problem okay and have you ever seen this problem",
    "start": "1485470",
    "end": "1491409"
  },
  {
    "text": "before okay yeah a couple people so it",
    "start": "1491409",
    "end": "1496869"
  },
  {
    "text": "turns out that especially so the way these protocols work you see that",
    "start": "1496869",
    "end": "1501999"
  },
  {
    "text": "basically one is calling yadda and it's calling the other and you might have a bigger chain that there is some state",
    "start": "1501999",
    "end": "1508149"
  },
  {
    "text": "keeping necessary and by default Microsoft in the open MediConnect handler uses the URL for state keeping",
    "start": "1508149",
    "end": "1515289"
  },
  {
    "text": "it as a special parameter called state on openly connect where you basically can round-trip state now if you only",
    "start": "1515289",
    "end": "1521259"
  },
  {
    "text": "have one hope that's good but if you have to Hobbs it turns out there's a magic number we just",
    "start": "1521259",
    "end": "1527970"
  },
  {
    "text": "hit what do you think that is two kilobytes okay so a couple of problems",
    "start": "1527970",
    "end": "1537070"
  },
  {
    "text": "with two kilobytes yeah one is our favorite browser from the North West of",
    "start": "1537070",
    "end": "1542290"
  },
  {
    "text": "the u.s. right the one with the two letters only supports two kilobytes in the query string okay that is you know",
    "start": "1542290",
    "end": "1552610"
  },
  {
    "text": "they're interested okay just don't use IE but the other problem is as it turns",
    "start": "1552610",
    "end": "1558400"
  },
  {
    "text": "out that when you're opening when you are creating a HIV M or Asha web app",
    "start": "1558400",
    "end": "1564160"
  },
  {
    "text": "they are wiring up a little firewall basically in front of your application and guess to what the maximum URL length",
    "start": "1564160",
    "end": "1572710"
  },
  {
    "text": "defaults to two kilobytes guess on which",
    "start": "1572710",
    "end": "1578680"
  },
  {
    "text": "clouds a charade is running I think so",
    "start": "1578680",
    "end": "1585550"
  },
  {
    "text": "that's not an Asha only problem but we found it with Asha yeah and you know",
    "start": "1585550",
    "end": "1592720"
  },
  {
    "text": "that the root cause is really that abusing the URL it's not really the best",
    "start": "1592720",
    "end": "1598630"
  },
  {
    "text": "way of doing state management okay so we we told Microsoft they I don't know they",
    "start": "1598630",
    "end": "1605800"
  },
  {
    "text": "didn't care because they didn't fix it so I guess that's what it means so that's what we did okay so what",
    "start": "1605800",
    "end": "1612850"
  },
  {
    "start": "1612000",
    "end": "1777000"
  },
  {
    "text": "Microsoft gives you is an extensibility point when you're using like Open ID Connect and instead of serializing",
    "start": "1612850",
    "end": "1620170"
  },
  {
    "text": "everything into this parameter in the URL they can call in to your code and then you can be responsible for managing",
    "start": "1620170",
    "end": "1626470"
  },
  {
    "text": "the state okay so what you do is you store it on your server somewhere and you return a grid or an identifier for",
    "start": "1626470",
    "end": "1633190"
  },
  {
    "text": "that state and so they will then put that in the URL instead so that's a way to shorten up the URL writing that code",
    "start": "1633190",
    "end": "1640000"
  },
  {
    "text": "is you know and not trivial I would say so but it's you know it's a hassle and",
    "start": "1640000",
    "end": "1647680"
  },
  {
    "text": "that that goes along with another feature in a speed core which i think is quite nice is that by default you have support for caching okay that there's an",
    "start": "1647680",
    "end": "1655030"
  },
  {
    "text": "interface called I do spirit cache and they have a default implementation for that which defaults to in memory right so that you you can",
    "start": "1655030",
    "end": "1663140"
  },
  {
    "text": "assume that there will always be an implementation of this caching thing available to you and then you can plug",
    "start": "1663140",
    "end": "1668510"
  },
  {
    "text": "in your sequel server or your Redis or whatever and you will have a proper disappeared cache so in other words the",
    "start": "1668510",
    "end": "1675020"
  },
  {
    "text": "right bit right way to do that is actually take that big URL and just",
    "start": "1675020",
    "end": "1680300"
  },
  {
    "text": "cache it right instead of sending it around the globe so for this particular provider aad",
    "start": "1680300",
    "end": "1686450"
  },
  {
    "text": "the azure one what we're gonna do is we've provided a little helper that will implement that extensibility point for",
    "start": "1686450",
    "end": "1693890"
  },
  {
    "text": "you okay so all you have to do is go up somewhere in the DI system and use our",
    "start": "1693890",
    "end": "1698960"
  },
  {
    "text": "little ad open ID connect state data format or cache nice name yeah exactly tell us exactly what it's doing you",
    "start": "1698960",
    "end": "1706040"
  },
  {
    "text": "indicate which providers that you want to register this for and now when we use Azure Active Directory we should have",
    "start": "1706040",
    "end": "1713990"
  },
  {
    "text": "more optimized URLs so if we go back to our client or just in general right if",
    "start": "1713990",
    "end": "1719090"
  },
  {
    "text": "you have to the scenario of having multiple hops from between the client to the final identity provider that's",
    "start": "1719090",
    "end": "1725450"
  },
  {
    "text": "something you might want to use to not run into problems because maybe your customers are actually using ie right or",
    "start": "1725450",
    "end": "1731240"
  },
  {
    "text": "you don't know up front which oh there we go now it works I just don't own my password excuse me",
    "start": "1731240",
    "end": "1740510"
  },
  {
    "text": "well I click the wrong button there we",
    "start": "1740510",
    "end": "1757100"
  },
  {
    "text": "go excellent okay so that's another nice thing actually now you know it's pretty",
    "start": "1757100",
    "end": "1763910"
  },
  {
    "text": "cool yeah that you can just add hand right hand left hand right hand line and it all keeps working right I think",
    "start": "1763910",
    "end": "1769520"
  },
  {
    "text": "that's that's quite nice that was way harder to achieve in in pre eight-minute",
    "start": "1769520",
    "end": "1775070"
  },
  {
    "text": "core two days cool oh yeah so welcome",
    "start": "1775070",
    "end": "1780800"
  },
  {
    "start": "1777000",
    "end": "1836000"
  },
  {
    "text": "back so regarding Sam oh and us Hestia handler which is available on github we",
    "start": "1780800",
    "end": "1788720"
  },
  {
    "text": "have partner company here in the UK that produced the other half of the same l2p support yeah so let's say you have an",
    "start": "1788720",
    "end": "1795500"
  },
  {
    "text": "old application that only speaks ml to pee and you want to hook it up to your new opener econnect based infrastructure",
    "start": "1795500",
    "end": "1801679"
  },
  {
    "text": "you need something that implements the IDP di di di dental provider part of of",
    "start": "1801679",
    "end": "1806900"
  },
  {
    "text": "Cemil and they have a plug-in now for identity server that you can basically plug in well and that gives you the",
    "start": "1806900",
    "end": "1814309"
  },
  {
    "text": "service life support which means now you can basically have a single sign-on session across oak MIDI Connect based",
    "start": "1814309",
    "end": "1821419"
  },
  {
    "text": "applications similar to Pia applications and on github we have a plug-in for double use Federation as well so you can",
    "start": "1821419",
    "end": "1828110"
  },
  {
    "text": "have one big single sign-on session across all free protocols now with identity server which i think is pretty",
    "start": "1828110",
    "end": "1833570"
  },
  {
    "text": "useful good next one the other one that we got asked about very very often is",
    "start": "1833570",
    "end": "1839809"
  },
  {
    "start": "1836000",
    "end": "2237000"
  },
  {
    "text": "how can we extend identity server with our own API endpoints okay and again",
    "start": "1839809",
    "end": "1846679"
  },
  {
    "text": "that wasn't easy to do in Prior versions because of the because of how the",
    "start": "1846679",
    "end": "1852049"
  },
  {
    "text": "authentication system work right default authenticate default challenge if you messed with these parameters in the",
    "start": "1852049",
    "end": "1857059"
  },
  {
    "text": "wrong wrong they were like you know unforeseeable side-effects okay given",
    "start": "1857059",
    "end": "1864770"
  },
  {
    "text": "the new of indication system it's now super easy to basically add support for API endpoints which are protected by",
    "start": "1864770",
    "end": "1872120"
  },
  {
    "text": "identity server itself okay and all you have to do is add a handler right we",
    "start": "1872120",
    "end": "1878419"
  },
  {
    "text": "used to say just middleware for that there's a handler for that now okay oh",
    "start": "1878419",
    "end": "1884380"
  },
  {
    "text": "good and and it's basically that the handler for Chase and web token based",
    "start": "1884380",
    "end": "1889610"
  },
  {
    "text": "authentication know so again this scenario what we have is an API that we",
    "start": "1889610",
    "end": "1895190"
  },
  {
    "text": "want a co-host with identity server rather than setting up your own project alright here's an example of this",
    "start": "1895190",
    "end": "1900260"
  },
  {
    "text": "particular API and it wants to use bearer tokens for their authentication as opposed to the cookie that the UI",
    "start": "1900260",
    "end": "1906140"
  },
  {
    "text": "would be using for identity server so great there's an API I have it's already",
    "start": "1906140",
    "end": "1912950"
  },
  {
    "text": "registered as part of MVC so that's all ready to go I actually have a I guess",
    "start": "1912950",
    "end": "1917960"
  },
  {
    "text": "this JavaScript client here that's gonna invoke this already nope I didn't have the handler let's go",
    "start": "1917960",
    "end": "1924320"
  },
  {
    "text": "do that good point that's a subtle point yeah remember that you have to give",
    "start": "1924320",
    "end": "1930080"
  },
  {
    "text": "every handler a name right the authentication scheme so we called his handler bearer but you can call it",
    "start": "1930080",
    "end": "1936650"
  },
  {
    "text": "whatever you want yeah and then on the authorized attribute as Brock just said",
    "start": "1936650",
    "end": "1942500"
  },
  {
    "text": "you can say explicitly use this specific authentication handler from the DI system and not whatever is configured as",
    "start": "1942500",
    "end": "1949520"
  },
  {
    "text": "to default for the application which would be cookies right and dad what's what's allowing to you know make api's",
    "start": "1949520",
    "end": "1956630"
  },
  {
    "text": "and web applications coexist now in the same host having separate off indication",
    "start": "1956630",
    "end": "1961730"
  },
  {
    "text": "methods that's quite nice so this helper extension method that we have to register the bearer token scheme",
    "start": "1961730",
    "end": "1968690"
  },
  {
    "text": "so this will register bearer which is the one again as Dominic just said we are indicating we want to use here like",
    "start": "1968690",
    "end": "1974600"
  },
  {
    "text": "so you specifically don't want the cookie at the API you want the bearer token so that's now registered we should",
    "start": "1974600",
    "end": "1980660"
  },
  {
    "text": "be able to invoke this run this and then go find my JavaScript application I think that evokes this directly so what",
    "start": "1980660",
    "end": "1987620"
  },
  {
    "text": "I have here is a JavaScript application actually let me just run the UI and then I'll look at the code real quick so this",
    "start": "1987620",
    "end": "1995600"
  },
  {
    "text": "JavaScript application is going to go log into identity server come back get an access token and when I click one of",
    "start": "1995600",
    "end": "2001570"
  },
  {
    "text": "these buttons here call service this is gonna actually invoke the the Web API which I have the code here real quick so",
    "start": "2001570",
    "end": "2009540"
  },
  {
    "text": "the URL is I here it is there's the URL hosted an identity server and again the",
    "start": "2009540",
    "end": "2015940"
  },
  {
    "text": "important thing I want to do is send along the access token to secure that call right so I will go login I think",
    "start": "2015940",
    "end": "2024820"
  },
  {
    "text": "I'm actually already logged in because I did Azure ad a minute ago oh no maybe not who are local user and",
    "start": "2024820",
    "end": "2034510"
  },
  {
    "text": "then I can now invoke the service accept",
    "start": "2034510",
    "end": "2042750"
  },
  {
    "text": "JavaScript applications trying to call api's that are running somewhere else yeah yeah the same origin policy in the",
    "start": "2045610",
    "end": "2052868"
  },
  {
    "text": "browser so yeah of course yeah right so yeah that's not going to be allowed",
    "start": "2052869",
    "end": "2058179"
  },
  {
    "text": "by default so you do have to set up cores in the API to to make that work now again this is all hosted and right",
    "start": "2058179",
    "end": "2066429"
  },
  {
    "text": "now an identity server we decided to put the API there that's fine you can set up the cores middleware in asp net core",
    "start": "2066429",
    "end": "2074108"
  },
  {
    "text": "like you normally would in any other API project identity server though already has support for cores because that",
    "start": "2074109",
    "end": "2079929"
  },
  {
    "text": "javascript client had to connect to it and you know to do the protocol work so",
    "start": "2079929",
    "end": "2085240"
  },
  {
    "text": "what we could do is actually just leverage identity servers existing course feature to configure that",
    "start": "2085240",
    "end": "2091330"
  },
  {
    "text": "so in identity server we already handle cores at certain endpoints that that spa",
    "start": "2091330",
    "end": "2097270"
  },
  {
    "text": "application might want it and you know interact with so you can just come into the identity over configuration say oh",
    "start": "2097270",
    "end": "2102850"
  },
  {
    "text": "by the way include this other path into this hosting application for the your",
    "start": "2102850",
    "end": "2107920"
  },
  {
    "text": "built-in core support so our cores paths or things like the the discovery document and things like that so this",
    "start": "2107920",
    "end": "2116500"
  },
  {
    "text": "just adds your custom endpoint as one of the other you know cores endpoints in other words you can leverage our",
    "start": "2116500",
    "end": "2121780"
  },
  {
    "text": "configuration system to to create a cause policy so you don't have to specify the origins again because they",
    "start": "2121780",
    "end": "2127930"
  },
  {
    "text": "are already yeah we already have this for the spa application in our configuration over here somewhere",
    "start": "2127930",
    "end": "2134430"
  },
  {
    "text": "so I've already done that for the spa location okay so it's kind of a poor man's version of",
    "start": "2134430",
    "end": "2140980"
  },
  {
    "text": "using the built in middleware and the coolest thing ever just one thing to show you it off off script surprise what",
    "start": "2140980",
    "end": "2147100"
  },
  {
    "text": "is this go go to startup and identity service yeah okay and go to the options",
    "start": "2147100",
    "end": "2152530"
  },
  {
    "text": "and do option start discovery dot yeah add a custom entries or add and you can",
    "start": "2152530",
    "end": "2164109"
  },
  {
    "text": "now also add your custom API endpoints to the discovery document of omadi connect so that your clients can",
    "start": "2164109",
    "end": "2170200"
  },
  {
    "text": "basically programmatically find these and if you do tilde something then it will actually also",
    "start": "2170200",
    "end": "2177839"
  },
  {
    "text": "use the base URL then chose a redneck or beauty at the end hey hey wait all the",
    "start": "2178990",
    "end": "2198040"
  },
  {
    "text": "API so where's my spa here we are I guess this guy I should now just be able",
    "start": "2198040",
    "end": "2203140"
  },
  {
    "text": "to hit this ah there we go here are the results a refresh that have to call the",
    "start": "2203140",
    "end": "2210040"
  },
  {
    "text": "service UD so yeah so the back the background is that some people want to add you know additional inputs maybe",
    "start": "2210040",
    "end": "2216309"
  },
  {
    "text": "maybe you know that they have applications that need to download a list of you of users you know something like that where you think that that",
    "start": "2216309",
    "end": "2223420"
  },
  {
    "text": "actually should belong to the identity system so in Prior versions you tended",
    "start": "2223420",
    "end": "2229150"
  },
  {
    "text": "to create new API for that now you can just put them into the identity server make it one deployment I think it's it's",
    "start": "2229150",
    "end": "2234609"
  },
  {
    "text": "useful for certain things okay Wow yeah",
    "start": "2234609",
    "end": "2240180"
  },
  {
    "start": "2237000",
    "end": "2337000"
  },
  {
    "text": "lookout is hard did you know that so it turns out that",
    "start": "2240180",
    "end": "2246609"
  },
  {
    "text": "lock out is so much harder than then doing log on right not everybody",
    "start": "2246609",
    "end": "2252760"
  },
  {
    "text": "realizes that because you know Oh Logan it's working job done right but we have many customers where you know they had",
    "start": "2252760",
    "end": "2259000"
  },
  {
    "text": "their assumption is if you log in to five of the applications and they press the logout button in one of them if you",
    "start": "2259000",
    "end": "2264010"
  },
  {
    "text": "want to make sure that all of the data is getting cleaned up right and I heard a really wise saying recently it says",
    "start": "2264010",
    "end": "2272859"
  },
  {
    "text": "the data is the pollution of the information age right it's much harder to delete it than to accumulate it and",
    "start": "2272859",
    "end": "2279819"
  },
  {
    "text": "that's exactly why logout is hard it's much harder to get rid of all that state floating around then just create new one",
    "start": "2279819",
    "end": "2287230"
  },
  {
    "text": "right so that's why the oak MediConnect",
    "start": "2287230",
    "end": "2292240"
  },
  {
    "text": "spec actually has free specifications talking about logout yeah and why free",
    "start": "2292240",
    "end": "2298569"
  },
  {
    "text": "well because some one or the other might work better for the type of application you're building yeah so one is for",
    "start": "2298569",
    "end": "2304540"
  },
  {
    "text": "travel as sparse as we call him today right JavaScript based applications that",
    "start": "2304540",
    "end": "2310059"
  },
  {
    "text": "was the actual actually at the very first one day Road and then people said yeah but I'm not I'm not doing spas I'm just doing",
    "start": "2310059",
    "end": "2315780"
  },
  {
    "text": "conventional you know server-side render web applications like MVC so the Edit is",
    "start": "2315780",
    "end": "2321310"
  },
  {
    "text": "thing called front channel notifications which was very much how seminal and WS Federation did things and then some",
    "start": "2321310",
    "end": "2327880"
  },
  {
    "text": "people said yeah but there were some issues with front channels where they added a third one which is called back channel so we we used to have support",
    "start": "2327880",
    "end": "2334060"
  },
  {
    "text": "for the first to just show the front Channel real quick so that the way the front Channel works is is that in",
    "start": "2334060",
    "end": "2340570"
  },
  {
    "start": "2337000",
    "end": "2709000"
  },
  {
    "text": "identity server we basically keep a list of all the applications you locked in and when D and then Ed logout time you",
    "start": "2340570",
    "end": "2346750"
  },
  {
    "text": "tell the server to lock out the user we actually on the log out page where it",
    "start": "2346750",
    "end": "2353290"
  },
  {
    "text": "says you are now locked out basically yeah we have to render under the covers",
    "start": "2353290",
    "end": "2358660"
  },
  {
    "text": "an iframe for each client application you logged in in in that iframe we have",
    "start": "2358660",
    "end": "2363910"
  },
  {
    "text": "to hit their log out end point so they have a chance to clean up all of their cookies and data and caches whatever",
    "start": "2363910",
    "end": "2373650"
  },
  {
    "text": "does that look like a hack well you",
    "start": "2374910",
    "end": "2383410"
  },
  {
    "text": "probably right but that that's the way it works yeah it's officially how the spec says you should do it okay now",
    "start": "2383410",
    "end": "2390840"
  },
  {
    "text": "there are a couple of issues with this approach it's a best-effort approach right what happens if you you know like",
    "start": "2390840",
    "end": "2397869"
  },
  {
    "text": "that the browser only has a limited number of outgoing connections at once right I think six ma'am so let's say",
    "start": "2397869",
    "end": "2405100"
  },
  {
    "text": "you're locked into ten client applications then we will render the first six iframes we have to wait until",
    "start": "2405100",
    "end": "2411940"
  },
  {
    "text": "the day they come back right and then we can render one after the other so we have to queue it up what happens if the",
    "start": "2411940",
    "end": "2417460"
  },
  {
    "text": "user is like nervous or impatient and goes away from that page before it's completely loaded it will not be logged",
    "start": "2417460",
    "end": "2424359"
  },
  {
    "text": "out everywhere right so that there's a chance that some application you are still logged in IE again has this weird",
    "start": "2424359",
    "end": "2431980"
  },
  {
    "text": "feature of sones network zones right so when let's say your IDP is in the",
    "start": "2431980",
    "end": "2437920"
  },
  {
    "text": "internet zone and your application is in the intranet zone you are not allowed to open an iframe across that zone for",
    "start": "2437920",
    "end": "2444369"
  },
  {
    "text": "example solo god will fail okay any other problems as this",
    "start": "2444369",
    "end": "2450330"
  },
  {
    "text": "problematic all over so it's they call that a best-effort approach you know",
    "start": "2450330",
    "end": "2456930"
  },
  {
    "text": "what to be honest with you that the best lockout feature is built into every browser it has a like a red cross in the",
    "start": "2456930",
    "end": "2462930"
  },
  {
    "text": "top but you can close it that's the my my preferred one yeah now there's a",
    "start": "2462930",
    "end": "2468750"
  },
  {
    "text": "third approach which is called the back-channel notifications and that is considered to be more reliable generally",
    "start": "2468750",
    "end": "2475109"
  },
  {
    "text": "speaking because you're not relying on the user's browser doing the right thing",
    "start": "2475109",
    "end": "2480119"
  },
  {
    "text": "for you okay and the idea is that an application in its back-end provides a",
    "start": "2480119",
    "end": "2487619"
  },
  {
    "text": "lock out API endpoint okay and then at logout time we can call this Lookout API",
    "start": "2487619",
    "end": "2493770"
  },
  {
    "text": "server to server so to speak yeah send a special Chase in depth token that tells",
    "start": "2493770",
    "end": "2499170"
  },
  {
    "text": "the the application which exact user the subject claim in which exact logon",
    "start": "2499170",
    "end": "2504420"
  },
  {
    "text": "session you want to log out and then what the claw at the backend has to do is it needs to remember that and",
    "start": "2504420",
    "end": "2510839"
  },
  {
    "text": "basically that the next time it sees that user coming in kick him out okay",
    "start": "2510839",
    "end": "2516420"
  },
  {
    "text": "it's more work for the client application but it's generally considered more reliable if you have",
    "start": "2516420",
    "end": "2523589"
  },
  {
    "text": "this strict requirement of a clean logout okay the other problem I mean the",
    "start": "2523589",
    "end": "2531780"
  },
  {
    "text": "problem you have with this approach here is obviously there must not be a firewall between your IDP and the client",
    "start": "2531780",
    "end": "2537930"
  },
  {
    "text": "application right otherwise this won't work okay so I guess the summary is none",
    "start": "2537930",
    "end": "2546150"
  },
  {
    "text": "of them are perfect right you have to use whatever works best for your situation so just one note about this is",
    "start": "2546150",
    "end": "2553650"
  },
  {
    "text": "that the Microsoft in if you're building the client the MVC application that's using the Open ID Connect provider and",
    "start": "2553650",
    "end": "2559380"
  },
  {
    "text": "you're using ASP net core the Microsoft Open ID Connect handler supports the front Channel but the back channel again",
    "start": "2559380",
    "end": "2566820"
  },
  {
    "text": "came along later this just recently got completed as a specification so unfortunately you have to implement this",
    "start": "2566820",
    "end": "2573390"
  },
  {
    "text": "manually yourself in an MVC application okay we do have some sample code for this do we have time to show that",
    "start": "2573390",
    "end": "2579569"
  },
  {
    "text": "or not we have 15 minutes yeah so",
    "start": "2579569",
    "end": "2587209"
  },
  {
    "text": "identity server when you're configuring your clients okay we have a couple of different clients here so we have one",
    "start": "2587209",
    "end": "2593999"
  },
  {
    "text": "that is doing the implicit flow and if you want this to participate in the single logout event you can configure",
    "start": "2593999",
    "end": "2601259"
  },
  {
    "text": "the front channel logout URI and if you see here it follows kind of the pattern that Microsoft's done for all of their",
    "start": "2601259",
    "end": "2606420"
  },
  {
    "text": "authentication system sign-in - Google sign-in - whatever so this is the sign out endpoint and then for this other",
    "start": "2606420",
    "end": "2613890"
  },
  {
    "text": "sample that we have here we don't have a front channel oh actually it looks like we did configure front Channel but we",
    "start": "2613890",
    "end": "2619380"
  },
  {
    "text": "also configure a back channel and this is would just be some custom endpoint that you would have to write yourself at",
    "start": "2619380",
    "end": "2624809"
  },
  {
    "text": "least today in asp.net core so our back channel logout endpoint basically gets",
    "start": "2624809",
    "end": "2633119"
  },
  {
    "text": "this logout token there's some validation that you have to go through and our sample does all the validation",
    "start": "2633119",
    "end": "2639599"
  },
  {
    "text": "but ultimately what we do then is once we validated it like Dominic said we keep track of who the user is and what",
    "start": "2639599",
    "end": "2645299"
  },
  {
    "text": "their session identifier was and we keep some state in the server because I'm this back channel call we can't clear",
    "start": "2645299",
    "end": "2651630"
  },
  {
    "text": "the cookie that's in the user's browser so we have to store this information and then the next time the user comes in",
    "start": "2651630",
    "end": "2658880"
  },
  {
    "text": "what we've done here then is on the cookie plumbing we register for an event",
    "start": "2658880",
    "end": "2665519"
  },
  {
    "text": "and whenever the cookie comes in we handle this validate event to make sure",
    "start": "2665519",
    "end": "2672479"
  },
  {
    "text": "that the user is not on the recently logged out list so the incoming user",
    "start": "2672479",
    "end": "2677729"
  },
  {
    "text": "from the cookie the cookie as far as the built-in plumbing is concerned the user is fine and then we look and say oh that",
    "start": "2677729",
    "end": "2683339"
  },
  {
    "text": "user from this cookie does it match our recent logout list if so we have to reject the principle which says ignore",
    "start": "2683339",
    "end": "2689609"
  },
  {
    "text": "the cookie as if it's not there and then we actually have to explicitly remove the cookie so sign them out get rid of",
    "start": "2689609",
    "end": "2696479"
  },
  {
    "text": "that cookie in the browser this would also work for API backends why do you would just reject to call it in yeah",
    "start": "2696479",
    "end": "2701660"
  },
  {
    "text": "okay so a little bit of work but that codes at least a starting point for you",
    "start": "2701660",
    "end": "2709430"
  },
  {
    "start": "2709000",
    "end": "3109000"
  },
  {
    "text": "cool next thing templates so we've been extending the",
    "start": "2709430",
    "end": "2716130"
  },
  {
    "text": "templates again we got feedback that it's sometimes a little bit hard to get",
    "start": "2716130",
    "end": "2722310"
  },
  {
    "text": "started because there were so many moving parts right you have to do protocols and the token server and the UI bits and an a spirit koi itself right",
    "start": "2722310",
    "end": "2729690"
  },
  {
    "text": "which we just sit on top and leverage and so on so we created some templates",
    "start": "2729690",
    "end": "2735320"
  },
  {
    "text": "that you can just install from the command line you think dotnet new and then we think",
    "start": "2735320",
    "end": "2742230"
  },
  {
    "text": "we have a good mix of what's useful one is empty just gives you a basic identity",
    "start": "2742230",
    "end": "2748080"
  },
  {
    "text": "server with all the hosting pips but no UI okay then we have one which has only",
    "start": "2748080",
    "end": "2753330"
  },
  {
    "text": "the UI and if you would put them together you would get something that was working actually yeah we have one",
    "start": "2753330",
    "end": "2760740"
  },
  {
    "text": "with a spirit core identity as its backing store now so again that's a very",
    "start": "2760740",
    "end": "2765870"
  },
  {
    "text": "common scenario and we have one where all the configuration you know like clients and resources are now in in a",
    "start": "2765870",
    "end": "2771540"
  },
  {
    "text": "database as well again common configuration so you just when they install sure so right now if we do net",
    "start": "2771540",
    "end": "2783870"
  },
  {
    "text": "new on the command line these are all the built-in templates provided by the SDK from asp net core so we don't yet",
    "start": "2783870",
    "end": "2790140"
  },
  {
    "text": "have the identity server templates so i have the URL for that so i can copy and paste it so actually this is up on",
    "start": "2790140",
    "end": "2796440"
  },
  {
    "text": "github all of these templates you can go take a look at them if you find a bug feel free to submit a PR and templates are",
    "start": "2796440",
    "end": "2802080"
  },
  {
    "text": "actually just NuGet packages so if and i think they are really useful so like if you want to in your own company create",
    "start": "2802080",
    "end": "2808470"
  },
  {
    "text": "some internal templates for certain project types you're creating over and over again like api so yeah just have a",
    "start": "2808470",
    "end": "2814560"
  },
  {
    "text": "look how that works it's actually pretty simple it's just a normal project with a with an extra file that has metadata in",
    "start": "2814560",
    "end": "2821850"
  },
  {
    "text": "it basically so the name that we're passing here is the NuGet package alright and so this is going to go",
    "start": "2821850",
    "end": "2826890"
  },
  {
    "text": "download the new get package and cross my fingers that the connection works yeah looks good right",
    "start": "2826890",
    "end": "2837650"
  },
  {
    "text": "and now we have alright any server templates here just for giggles open to",
    "start": "2837650",
    "end": "2843079"
  },
  {
    "text": "the born with a teen identity for example this first creates the template",
    "start": "2843079",
    "end": "2855829"
  },
  {
    "text": "and then we can basically create a sample database which has test users like Edison Bob obviously right and",
    "start": "2855829",
    "end": "2864230"
  },
  {
    "text": "justice graves at their database and then you can just do torrent run and",
    "start": "2864230",
    "end": "2869480"
  },
  {
    "text": "that's it I tell you you have something to play with am i running elsewhere already yeah good",
    "start": "2869480",
    "end": "2885038"
  },
  {
    "text": "so that's a new copy of identity server running and I should be able to log in",
    "start": "2885609",
    "end": "2892520"
  },
  {
    "text": "now Ellis Oh Bob alright so just let you",
    "start": "2892520",
    "end": "2897980"
  },
  {
    "text": "know you thought the to test queues as we put in there good that's working and they live right now",
    "start": "2897980",
    "end": "2904819"
  },
  {
    "text": "in sequel like database okay if you want",
    "start": "2904819",
    "end": "2911599"
  },
  {
    "text": "sequel server just can't change the connection string and the provider you're using okay so it's just using",
    "start": "2911599",
    "end": "2916640"
  },
  {
    "text": "entity framework so you can plug in anything else Postgres they all work yeah the other thing we've heard a lot",
    "start": "2916640",
    "end": "2922579"
  },
  {
    "text": "is that especially for you know development time the number of options",
    "start": "2922579",
    "end": "2927740"
  },
  {
    "text": "we have like configuring a client you know configuring resources it's a bit overwhelming and I'm sorry for that",
    "start": "2927740",
    "end": "2935319"
  },
  {
    "text": "that's just the way it is I guess we have many options we are pretty flexible",
    "start": "2935319",
    "end": "2940690"
  },
  {
    "text": "so there's a company in here in Crystal that have a commercial product called",
    "start": "2940690",
    "end": "2947599"
  },
  {
    "text": "admin UI and think of it as a full-featured basically web-based UI",
    "start": "2947599",
    "end": "2953119"
  },
  {
    "text": "tool where you can do user management create users you know reset passwords",
    "start": "2953119",
    "end": "2959000"
  },
  {
    "text": "assign users to roles assign users to claims and on the other end setup client",
    "start": "2959000",
    "end": "2964760"
  },
  {
    "text": "applications like you know and the day they've like a little wizard interface for sparse and native and",
    "start": "2964760",
    "end": "2969860"
  },
  {
    "text": "the one 4/4 so we asked them basically if they were OK to create a Community Edition for that last it says something",
    "start": "2969860",
    "end": "2975620"
  },
  {
    "text": "for free and basically they did that it has some limits right I mean they want",
    "start": "2975620",
    "end": "2982400"
  },
  {
    "text": "to actually you know sell the thing as well so but for development time you know you have some test users to work",
    "start": "2982400",
    "end": "2987980"
  },
  {
    "text": "with you can set up some clients to actually and you know don't have to learn the configuration system first",
    "start": "2987980",
    "end": "2994670"
  },
  {
    "text": "before you can do anything useful with identity server and the nicest thing is I guess it's also part of the templates",
    "start": "2994670",
    "end": "3001270"
  },
  {
    "text": "right so you can just basically to.net new is for admin and you're basically",
    "start": "3001270",
    "end": "3008770"
  },
  {
    "text": "getting the same identities of a part with an embedded admin UI ok and when we",
    "start": "3008770",
    "end": "3017560"
  },
  {
    "text": "run that it does all the necessary sequel magic under the covers yep",
    "start": "3017560",
    "end": "3028260"
  },
  {
    "text": "yes the admin you I'm just pretty quite a user maybe just to see how that looks like that's one thing you can do the",
    "start": "3033620",
    "end": "3054420"
  },
  {
    "text": "other thing that's very common is you want to create a client application for example yeah so let's add a spa whatever",
    "start": "3054420",
    "end": "3062030"
  },
  {
    "text": "okay and here basically is your UI client ID display name I think that's",
    "start": "3062030",
    "end": "3069210"
  },
  {
    "text": "that's all that's all optional that is",
    "start": "3069210",
    "end": "3075900"
  },
  {
    "text": "not optional",
    "start": "3075900",
    "end": "3078470"
  },
  {
    "text": "look how do you arrive well whatever okay and then now you can configure to which resources does this client",
    "start": "3081590",
    "end": "3087390"
  },
  {
    "text": "application have access to and and you know all the things basically yeah you can create new resources and so on so",
    "start": "3087390",
    "end": "3093810"
  },
  {
    "text": "yeah if that's something useful to you you know just want to play around with that without having to learn all the little nitty-gritty details of the",
    "start": "3093810",
    "end": "3100260"
  },
  {
    "text": "config system I think that's that's that's something nice okay next one so",
    "start": "3100260",
    "end": "3109200"
  },
  {
    "start": "3109000",
    "end": "3225000"
  },
  {
    "text": "the very last thing is again we got feedback from people saying we'd love to contribute to identity' part it it's",
    "start": "3109200",
    "end": "3118290"
  },
  {
    "text": "very hard and yeah again I'm sorry I'm it is definitely a difficult topic but",
    "start": "3118290",
    "end": "3125280"
  },
  {
    "text": "also to be honest we didn't make it super easy because you know we are used",
    "start": "3125280",
    "end": "3130470"
  },
  {
    "text": "to work together for so many years we will be sometimes just added some github issue as a reminder for ourselves",
    "start": "3130470",
    "end": "3137100"
  },
  {
    "text": "basically like oh yeah we have to do this so now we for you know our New Year's resolution if you want is to",
    "start": "3137100",
    "end": "3143820"
  },
  {
    "text": "break up the tasks into smaller pieces we registered at up for craps that's a",
    "start": "3143820",
    "end": "3149430"
  },
  {
    "text": "website which takes care of basically all the open source projects out there that invite new contributors basically",
    "start": "3149430",
    "end": "3155790"
  },
  {
    "text": "we have a label called Help Wanted so if you wanna you know just play around and maybe look how it's how it is like",
    "start": "3155790",
    "end": "3163160"
  },
  {
    "text": "contributing look for that label there were there were right now five or",
    "start": "3163160",
    "end": "3168180"
  },
  {
    "text": "six issues that we think are good to get started so that's one thing if you wanna",
    "start": "3168180",
    "end": "3174450"
  },
  {
    "text": "help other people Stack Overflow is a really good place there are many many",
    "start": "3174450",
    "end": "3179910"
  },
  {
    "text": "people are having questions or on addenda server and there are already a number of people actually really really active so if you know if that's",
    "start": "3179910",
    "end": "3187290"
  },
  {
    "text": "something you want to do that's appreciated you get also points and patches you know that's really the",
    "start": "3187290",
    "end": "3194310"
  },
  {
    "text": "important part here and if you work for a company that uses identity but commercially you might want to talk to",
    "start": "3194310",
    "end": "3201120"
  },
  {
    "text": "your boss or whoever and ask him if he wants to sponsor the project right because we make you know we need to find",
    "start": "3201120",
    "end": "3207120"
  },
  {
    "text": "a way to make that sustainable with the crowing number of users we have so there's a patreon page where you can",
    "start": "3207120",
    "end": "3213300"
  },
  {
    "text": "basically officially sponsor the project and actually there are also some nice advertising options so if your company",
    "start": "3213300",
    "end": "3219360"
  },
  {
    "text": "wants to be you know presented as open-source friendly and the very last",
    "start": "3219360",
    "end": "3225990"
  },
  {
    "start": "3225000",
    "end": "3290000"
  },
  {
    "text": "thing is how can we help you we do training and consulting which I see the workshop yesterday and the day before we",
    "start": "3225990",
    "end": "3233760"
  },
  {
    "text": "have a brand new website because many people said like yeah it's really hard to sell identity server to my company",
    "start": "3233760",
    "end": "3239160"
  },
  {
    "text": "because you don't have a list of reference customers we finally fixed that because you know normally these",
    "start": "3239160",
    "end": "3244650"
  },
  {
    "text": "projects are under NDA so we asked all of our customers do you want are you okay with you know being publicly named",
    "start": "3244650",
    "end": "3250920"
  },
  {
    "text": "so to speak so if that helps you making the project you know more attractive to your company you can go there and and",
    "start": "3250920",
    "end": "3258330"
  },
  {
    "text": "also related to that if they want to be listed as well I mean that's okay yeah and the last thing is if you are running",
    "start": "3258330",
    "end": "3266460"
  },
  {
    "text": "identi server in in production or if that is something that is you know you know you want to do we have an",
    "start": "3266460",
    "end": "3273720"
  },
  {
    "text": "infrastructure now to give you basically production support with an SLA you know",
    "start": "3273720",
    "end": "3279030"
  },
  {
    "text": "like guaranteed response time and and these things okay I think that's it that was",
    "start": "3279030",
    "end": "3285960"
  },
  {
    "text": "the last year work thank you [Applause]",
    "start": "3285960",
    "end": "3292699"
  }
]