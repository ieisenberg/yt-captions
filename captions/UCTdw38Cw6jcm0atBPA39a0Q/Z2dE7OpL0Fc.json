[
  {
    "start": "0",
    "end": "62000"
  },
  {
    "text": "all right so talk today about nginx and this talk is",
    "start": "6270",
    "end": "12020"
  },
  {
    "text": "mainly aimed at people who are not net developers particularly moving to that dotnet core running things on the UNIX",
    "start": "12020",
    "end": "19880"
  },
  {
    "text": "platform who need to understand what nginx is and what it can do for them for",
    "start": "19880",
    "end": "24980"
  },
  {
    "text": "generally if you're not developer P once know about nginx we will probably cover enough of what nginx does without you",
    "start": "24980",
    "end": "31250"
  },
  {
    "text": "having to know anything much about what that actually does to feel comfortable you'd get something out of it and it's",
    "start": "31250",
    "end": "38210"
  },
  {
    "text": "designed to really be if you like an introductory talk we will cover off some of the basic scenarios that you need",
    "start": "38210",
    "end": "43969"
  },
  {
    "text": "reverse proxy load balancing there's a lot of depth or something like nginx we can spend three or four hours talking",
    "start": "43969",
    "end": "50450"
  },
  {
    "text": "about all the options but hopefully this will get you started and getting you enough to basically be able to deploy into production environments and then",
    "start": "50450",
    "end": "57800"
  },
  {
    "text": "you can start tweaking things to your heart's content Who am I most of this slide is really",
    "start": "57800",
    "end": "65330"
  },
  {
    "start": "62000",
    "end": "140000"
  },
  {
    "text": "quite unimportant the only bit you really care about I mentioned at the",
    "start": "65330",
    "end": "70700"
  },
  {
    "text": "bottom is this kind no smart guys rule those of you by the way the Bacchus you",
    "start": "70700",
    "end": "76759"
  },
  {
    "text": "know there are monitors are there hopefully you can see stuff but I will read bits on the bomb and slide just has no smart guys only the guys in this room",
    "start": "76759",
    "end": "83890"
  },
  {
    "text": "there is my challenge to you guys is I'm not smarter than you I just happened to",
    "start": "83890",
    "end": "89119"
  },
  {
    "text": "be confident enough to come and stand here and speak and I did that because I overcame my lack of confidence by just",
    "start": "89119",
    "end": "95509"
  },
  {
    "text": "speaking starting out with he's on lightning talks and user groups etc and all of you could be up here doing what I",
    "start": "95509",
    "end": "101959"
  },
  {
    "text": "do and I encourage you to have a go and participate and it's really good for I",
    "start": "101959",
    "end": "107300"
  },
  {
    "text": "think you as a developer because it helps you to structure and organize your thoughts a lot about what you're about",
    "start": "107300",
    "end": "115700"
  },
  {
    "text": "your practice and I think the other thing to bear in mind from people say I haven't anything to talk about",
    "start": "115700",
    "end": "120800"
  },
  {
    "text": "that's because you talk to your peers and they know what you do but many people don't know what you what you know",
    "start": "120800",
    "end": "126800"
  },
  {
    "text": "and any of you are not you know more experienced developers you have wisdom and understanding to pass on touching your developers we need people out there",
    "start": "126800",
    "end": "133280"
  },
  {
    "text": "still doing talks about the basics of TDD and those kind of things for new guys to learn right so please do speak",
    "start": "133280",
    "end": "140620"
  },
  {
    "start": "140000",
    "end": "148000"
  },
  {
    "text": "that's where I work you don't really care apart from the fact that another consultant I have nothing to sell you right and this is just a plug for bright",
    "start": "140620",
    "end": "149860"
  },
  {
    "start": "148000",
    "end": "196000"
  },
  {
    "text": "so how many of you done that developers right so this I mean if you've heard of brighter okay fine so this is a CTRs",
    "start": "149860",
    "end": "157420"
  },
  {
    "text": "framework I work on it also does basically tasks use I'm messaging",
    "start": "157420",
    "end": "162819"
  },
  {
    "text": "basically between your web app and a worker process so that you can offload work to work a process and you can use",
    "start": "162819",
    "end": "169540"
  },
  {
    "text": "it for communication between micro services via basically messaging and we",
    "start": "169540",
    "end": "175420"
  },
  {
    "text": "build it built in a huddle and we've open sourced it and people outside huddle as well work on it with us so",
    "start": "175420",
    "end": "181660"
  },
  {
    "text": "it's alternative to things like and service bus and mass transit so please",
    "start": "181660",
    "end": "188260"
  },
  {
    "text": "check us out you can find us by just searching for practicum and on Twitter or go searching for brighter command on",
    "start": "188260",
    "end": "193269"
  },
  {
    "text": "github and you'll find us what's today's agenda agenda first of all what I'm going to do",
    "start": "193269",
    "end": "199690"
  },
  {
    "start": "196000",
    "end": "269000"
  },
  {
    "text": "is do a little demo right and we will start with dog demo of a little web app",
    "start": "199690",
    "end": "205630"
  },
  {
    "text": "and I will show you it running without any kind of proxy in it and then I will show you running with a proxy and expect",
    "start": "205630",
    "end": "211480"
  },
  {
    "text": "to be a bit confused I'll show you basically the engine etc running without explaining everything in detail but I want to give you a feel for",
    "start": "211480",
    "end": "218379"
  },
  {
    "text": "the hot walk were actually building to what understanding and then we'll start digging a little bit into some detail",
    "start": "218379",
    "end": "223930"
  },
  {
    "text": "we'll talk about cache turtle what it is and what it isn't I'll talk about nginx itself what it does for you how it works",
    "start": "223930",
    "end": "229419"
  },
  {
    "text": "and then we'll talk about some key scenarios reverse proxy and load balancing and we'll come back to doing",
    "start": "229419",
    "end": "234940"
  },
  {
    "text": "demos and we get to reverse proxy and low back sink run show you a whole range of different scenarios okay then we have",
    "start": "234940",
    "end": "241060"
  },
  {
    "text": "a kind of Q&A at the end and I'll probably hopefully have time to mention a few things we didn't cover the nginx we'll do for you",
    "start": "241060",
    "end": "246579"
  },
  {
    "text": "I don't know given the amount of time it'll take to run through all of that what we'll have much time for questions",
    "start": "246579",
    "end": "252040"
  },
  {
    "text": "in the session but we the police prefer to cache we turn it down afterwards okay so let's do this a quick look",
    "start": "252040",
    "end": "262349"
  },
  {
    "text": "right so this is a s pertinent core application and it's based Web API so",
    "start": "269330",
    "end": "276379"
  },
  {
    "text": "we're going to basically create an API that we can serve this is the world's most over complicated hello world",
    "start": "276379",
    "end": "283669"
  },
  {
    "text": "application and what we can do you this is basically far what we can do we can say I can post a given greeting to the",
    "start": "283669",
    "end": "290479"
  },
  {
    "text": "send point say basically with my message hello world and then effectively I can go and get my list of greetings back",
    "start": "290479",
    "end": "296780"
  },
  {
    "text": "okay and I will show you a little bit of how it works but we're not really that interested in that",
    "start": "296780",
    "end": "302750"
  },
  {
    "text": "so you can see there I've got HTT p-- o stand what we're actually using is never",
    "start": "302750",
    "end": "307940"
  },
  {
    "text": "once see by the way anyone need it bigger good okay just shout if basically",
    "start": "307940",
    "end": "313129"
  },
  {
    "text": "things are not visible or not audible shouts and I will fix it okay so you actually using brighter and",
    "start": "313129",
    "end": "319969"
  },
  {
    "text": "darker here or the framework see I can explain to very quickly what's happening so the command processor just says we are sending the command to do something",
    "start": "319969",
    "end": "326090"
  },
  {
    "text": "here we're going to add a greeting and the query processor says it returned us and results and what happens is they map",
    "start": "326090",
    "end": "332259"
  },
  {
    "text": "over to handlers and this is what lets us do is build a pipeline such that we",
    "start": "332259",
    "end": "339050"
  },
  {
    "text": "can insert things in between for things like retry semantics circuit-breakers",
    "start": "339050",
    "end": "344199"
  },
  {
    "text": "logging etc we document all of that else why but just go to ports and down here",
    "start": "344199",
    "end": "355669"
  },
  {
    "text": "for example you can find a greeting command we just basically spin up a",
    "start": "355669",
    "end": "361629"
  },
  {
    "start": "359000",
    "end": "403000"
  },
  {
    "text": "framework or do be context and we just basically add everything into their database obviously we're all a sink our",
    "start": "361629",
    "end": "369050"
  },
  {
    "text": "way through obviously nowadays please try and be a sink if you can and this for example is a greetings by ID query",
    "start": "369050",
    "end": "375699"
  },
  {
    "text": "and we'd go into that context and great to me you can see some attributes there query rich reliable and you can see some",
    "start": "375699",
    "end": "382159"
  },
  {
    "text": "here that's essentially those actual pieces of the pipeline were inserting to do some work beforehand that's not the",
    "start": "382159",
    "end": "388009"
  },
  {
    "text": "solution of this talk but you are going to have a look at what we're doing a bride to that'd be interesting okay so",
    "start": "388009",
    "end": "393430"
  },
  {
    "text": "let me just switch this and get help to a standalone version all right",
    "start": "393430",
    "end": "400970"
  },
  {
    "text": "sir this version is standalone all right so no other we got here is a docker",
    "start": "400970",
    "end": "407480"
  },
  {
    "start": "403000",
    "end": "553000"
  },
  {
    "text": "compose file who's familiar with docker mostiy okay those either are I'm",
    "start": "407480",
    "end": "413240"
  },
  {
    "text": "probably going to not do a digital introduction of the docker as part of this hopefully you'll be able to follow anyway so what we're saying is we're",
    "start": "413240",
    "end": "419930"
  },
  {
    "text": "going to build two services here basically the web service which is been a bit gonna be our actual web application that we want to launch and",
    "start": "419930",
    "end": "425900"
  },
  {
    "text": "essentially a database we're using my sequel just because it's a lighter footprint in darker than sequel server",
    "start": "425900",
    "end": "432050"
  },
  {
    "text": "for Linux which requires a lot of memory on my box we're spinning up with those applications okay and then this tests",
    "start": "432050",
    "end": "439370"
  },
  {
    "text": "HTTP file will let us fire some requests against that application so we're going to go over here I don't know whether to",
    "start": "439370",
    "end": "450350"
  },
  {
    "text": "keep what setup assistant it's a very disturbing thing to see in the middle of the demo but I'm let's hope there's",
    "start": "450350",
    "end": "457430"
  },
  {
    "text": "nothing there that this one's let me just get this bit bigger okay and then",
    "start": "457430",
    "end": "464180"
  },
  {
    "text": "we're gonna just do docker compose up to",
    "start": "464180",
    "end": "469220"
  },
  {
    "text": "bring up basically all those servers actually pretty why should just check I",
    "start": "469220",
    "end": "474680"
  },
  {
    "text": "had need to do first",
    "start": "474680",
    "end": "477669"
  },
  {
    "text": "our this technique to build it first sometimes do and I might as well do that first rather than get an error so what",
    "start": "483309",
    "end": "491049"
  },
  {
    "text": "we're doing is building and publishing to an out directly so effectively we're not using the whole of the SDK and then",
    "start": "491049",
    "end": "498369"
  },
  {
    "text": "we're fetching when we build our docker container we will take the build a lot effects from there out directory and",
    "start": "498369",
    "end": "504089"
  },
  {
    "text": "load them into the container that runs the web app just like watching paint dry",
    "start": "504089",
    "end": "517930"
  },
  {
    "text": "and then we're going to bring those servers up",
    "start": "517930",
    "end": "522120"
  },
  {
    "text": "and you'll see we basically pull down images we've actually got them more locally and I'm just spending on the",
    "start": "528930",
    "end": "534819"
  },
  {
    "text": "various containers and you should see a final message at the end after my sequels finish doing its thing we will",
    "start": "534819",
    "end": "541329"
  },
  {
    "text": "see a final message that says basically we're listening on port 5000 which is kind of the default for an expert in it",
    "start": "541329",
    "end": "548709"
  },
  {
    "text": "some of you can't see that maybe they're back we're just saying I'm listening on port 5000 don't worry about that okay",
    "start": "548709",
    "end": "554079"
  },
  {
    "start": "553000",
    "end": "587000"
  },
  {
    "text": "and then I can send a request whoops-a-daisy I don't know why that's",
    "start": "554079",
    "end": "560889"
  },
  {
    "text": "not running on standalone the minute it used to run all the time yeah me just have a quick check if I can fix it if",
    "start": "560889",
    "end": "566949"
  },
  {
    "text": "not we'll move on to the next bit of demo and I'm running on five thousand right okay sorry dude it did to do I",
    "start": "566949",
    "end": "575939"
  },
  {
    "text": "don't know why this file is they won't just shut that father visitor from a",
    "start": "575939",
    "end": "581050"
  },
  {
    "text": "book okay right so the only trouble with switching between github files and",
    "start": "581050",
    "end": "589089"
  },
  {
    "text": "changing addresses and stuff is if you get too close that you're wanting it so complete their own location right so",
    "start": "589089",
    "end": "594100"
  },
  {
    "text": "this is the one we want to point to if initially there's a few heart-stopping moments while basically it figures that had to do that so I've got nothing in",
    "start": "594100",
    "end": "599800"
  },
  {
    "text": "there currently send a message of operating in there and I can pull back",
    "start": "599800",
    "end": "606579"
  },
  {
    "text": "that great thing I can send another message in another message and I just played like a whole other greetings all",
    "start": "606579",
    "end": "611709"
  },
  {
    "text": "right so I booked this fabulous hello world application all I need now is an",
    "start": "611709",
    "end": "617019"
  },
  {
    "start": "612000",
    "end": "685000"
  },
  {
    "text": "initial coin offering and I will effectively be rich okay but maybe I've",
    "start": "617019",
    "end": "623379"
  },
  {
    "text": "read some documentation and it says to me you know you don't really care as an HTTP server but you don't really want to",
    "start": "623379",
    "end": "629649"
  },
  {
    "text": "use kestrel as effectively the edge server for your application because it",
    "start": "629649",
    "end": "635410"
  },
  {
    "text": "although it can will actually do HTTP processing it lacks maybe the features you and I might want for example",
    "start": "635410",
    "end": "640740"
  },
  {
    "text": "compression it lacks essentially ability to do proper proxy cache URL rewriting",
    "start": "640740",
    "end": "646949"
  },
  {
    "text": "it does do SSL but not really in a sense that you would want to rely on for your",
    "start": "646949",
    "end": "651999"
  },
  {
    "text": "actual application so I want something to stick in front of that and that's essentially what nginx will deform injects we're sitting in front of that",
    "start": "651999",
    "end": "658089"
  },
  {
    "text": "and let me",
    "start": "658089",
    "end": "662819"
  },
  {
    "text": "deploy my application to live so I'm gonna choose this one because it's",
    "start": "663209",
    "end": "671670"
  },
  {
    "text": "fairly clear and easy so what you'll notice are than this will shut these down you don't really care about the",
    "start": "671670",
    "end": "677079"
  },
  {
    "text": "code anymore right now what I've got",
    "start": "677079",
    "end": "686350"
  },
  {
    "start": "685000",
    "end": "769000"
  },
  {
    "text": "here is an engine X folder named engine X folder now I've basically got a docker file for building nginx it's just very",
    "start": "686350",
    "end": "691779"
  },
  {
    "text": "straightforward the main thing to note that is what just a copy over a configuration file and the configuration file and nginx is the heart of what I'm",
    "start": "691779",
    "end": "698589"
  },
  {
    "text": "essentially trying to do here which is to provide by city labor to an edge web",
    "start": "698589",
    "end": "705970"
  },
  {
    "text": "server so you can see I'm doing a few things in here don't worry about them too much I'll do some things to modify TCP I'm doing some stuff to provide some",
    "start": "705970",
    "end": "712870"
  },
  {
    "text": "compression and I'm turning off server tokens to security I'm adding a few",
    "start": "712870",
    "end": "718569"
  },
  {
    "text": "security headers but the key thing basically to have a quick look at is what I'm doing an exposing effectively a",
    "start": "718569",
    "end": "724180"
  },
  {
    "text": "server and that server is listening on port 80 and the location is listening out effectively as root so it's getting",
    "start": "724180",
    "end": "730509"
  },
  {
    "text": "all my requests coming in to local host on port 80 and then it's saying when you get those do a proxy pass same pass that",
    "start": "730509",
    "end": "737050"
  },
  {
    "text": "across to a group basically HTTP app servers what HTTP out service well you can see how to find some called upstream",
    "start": "737050",
    "end": "743470"
  },
  {
    "text": "lab systems actually you use for load balancing but we've come back to that a little bit later but in there I'm saying",
    "start": "743470",
    "end": "748779"
  },
  {
    "text": "fine basically on port 5,000 something running with basically your DNS actually",
    "start": "748779",
    "end": "753939"
  },
  {
    "text": "matches a web and direct the traffic to them okay as a lot to take it at once we will explain all this more slowly to go",
    "start": "753939",
    "end": "759939"
  },
  {
    "text": "through I wanted to show you running into end but we're going to essentially be able to talk to us and it took this thing now effectively on a different",
    "start": "759939",
    "end": "766569"
  },
  {
    "text": "port so it might docker compose file you'll see what my reverse proxy doing",
    "start": "766569",
    "end": "772300"
  },
  {
    "text": "is saying while I listen to basically externally on port 8080 to the docker host internet like port 80 but I don't",
    "start": "772300",
    "end": "779350"
  },
  {
    "text": "listening on to put 8080 you can see the web no longer has a ports it's no longer",
    "start": "779350",
    "end": "784839"
  },
  {
    "text": "possible to access that web container from from outside the docker host we do have an expose which says the container",
    "start": "784839",
    "end": "792160"
  },
  {
    "text": "is exposing 5,000 to other applications is in the network that composes crating but you couldn't get to this directly",
    "start": "792160",
    "end": "798560"
  },
  {
    "text": "you have to now go through my proxy okay I should really have shut still so I'm",
    "start": "798560",
    "end": "810920"
  },
  {
    "text": "gonna bring up this one what we're gonna",
    "start": "810920",
    "end": "821960"
  },
  {
    "text": "do is get the test HTTP file open again and you'll see now rather than 5,000",
    "start": "821960",
    "end": "828950"
  },
  {
    "start": "826000",
    "end": "832000"
  },
  {
    "text": "we're actually hitting on 8080 and we'll run that and get back you'll notice now we've got a few extra few extra headers",
    "start": "828950",
    "end": "835400"
  },
  {
    "start": "832000",
    "end": "886000"
  },
  {
    "text": "it tells us the server is nginx we so",
    "start": "835400",
    "end": "847010"
  },
  {
    "text": "server than nginx so you can see we've got some so many security as we talked about so we're saying same-origin four frames don't sniff content-type",
    "start": "847010",
    "end": "853930"
  },
  {
    "text": "practically except tradition XSS protection encode this basically is a zip right so we're compressing the",
    "start": "853930",
    "end": "859190"
  },
  {
    "text": "content on the wire effectively in some other settings so we've added a few bits of robustness to the HTTP sub we got out",
    "start": "859190",
    "end": "867650"
  },
  {
    "text": "of the box with kestrel okay and we're just proxying from the call to nginx",
    "start": "867650",
    "end": "872900"
  },
  {
    "text": "over to our application server okay what",
    "start": "872900",
    "end": "880640"
  },
  {
    "text": "we'll do now is we will go back through",
    "start": "880640",
    "end": "886850"
  },
  {
    "text": "that and a little bit more slowly so that you guys can figure out what the hell we're actually talking about and",
    "start": "886850",
    "end": "893090"
  },
  {
    "text": "most of that okay so I wanted to give you a feel for what the whole thing looks like and now explain all those",
    "start": "893090",
    "end": "899240"
  },
  {
    "start": "895000",
    "end": "1093000"
  },
  {
    "text": "concepts bit by bit won't blow it up and put up on the ways to understand it so but the end everything I showed you there should be really clear to you so",
    "start": "899240",
    "end": "906290"
  },
  {
    "text": "let's talk about Kestrel Kestrel is a HTTP server their cameras basically",
    "start": "906290",
    "end": "913640"
  },
  {
    "text": "their speed are not cool and essentially what Kestrel will do for you is listen on a poor parlours basically the content coming into that",
    "start": "913640",
    "end": "920960"
  },
  {
    "text": "TCP port into a HTTP request and then essentially spin up a hand",
    "start": "920960",
    "end": "926670"
  },
  {
    "text": "manage code and direct effectively that particular request to your handler and then send the response back out right",
    "start": "926670",
    "end": "933560"
  },
  {
    "text": "but it doesn't do all the other things that we may come to think about and being needed effectively form a web",
    "start": "933560",
    "end": "939030"
  },
  {
    "text": "application and certainly if we're used to using something like is it doesn't do",
    "start": "939030",
    "end": "945120"
  },
  {
    "text": "any of the things that we've come to suspect out of I asked like you know URL rewriting caching etc okay so um guess",
    "start": "945120",
    "end": "955230"
  },
  {
    "text": "was built around lib of sola bob is essentially the library that also drives things like no js' and what happens with",
    "start": "955230",
    "end": "962430"
  },
  {
    "text": "lib of is we say what I want to do is listen on a port for say a tcp/ip",
    "start": "962430",
    "end": "969330"
  },
  {
    "text": "connection when I get one what I then want to do essentially is execute some",
    "start": "969330",
    "end": "974700"
  },
  {
    "text": "code and I will execute that code until such a point effectively is that piece of code decides it's going to do",
    "start": "974700",
    "end": "980070"
  },
  {
    "text": "activity some kind of i/o which point I will then say right while I'm waiting for you again then I will execute with",
    "start": "980070",
    "end": "985530"
  },
  {
    "text": "that original thread some other requests I see there's now waiting okay so what happens is you can use one thread to",
    "start": "985530",
    "end": "992760"
  },
  {
    "text": "successively serve requests that are coming in and every time essentially that's read pauses to do some kind of",
    "start": "992760",
    "end": "999420"
  },
  {
    "text": "i/o or other asynchronous work use that thread to service the next request in sequence and that leaves you with one",
    "start": "999420",
    "end": "1004700"
  },
  {
    "text": "thread a several large number of requests and that is the underlying technology become behind say no js' and",
    "start": "1004700",
    "end": "1011840"
  },
  {
    "text": "why when it came out it was a kind of bit of a revolution in server performance okay",
    "start": "1011840",
    "end": "1018830"
  },
  {
    "text": "it's cross-platform so one of the big",
    "start": "1018830",
    "end": "1023870"
  },
  {
    "text": "things about espadrille net core is essentially we can run on multiple platforms in particularly you're",
    "start": "1023870",
    "end": "1029480"
  },
  {
    "text": "interested at a lot of cases and running on the Linux and effectively either a Linux server or effectively a container",
    "start": "1029480",
    "end": "1035300"
  },
  {
    "text": "within docker and all that yes it's not cross-platform so you're not gonna be able to use our is in those scenarios",
    "start": "1035300",
    "end": "1042790"
  },
  {
    "text": "and essentially it's the production of surf right has been a cool okay",
    "start": "1042790",
    "end": "1049030"
  },
  {
    "text": "so Kestrel basically uses Liberty valve but it actually uses multiple level",
    "start": "1049440",
    "end": "1056130"
  },
  {
    "text": "above lips so what it does it says effect Felicity well the trouble is I'm only using one throat and they have",
    "start": "1056130",
    "end": "1061200"
  },
  {
    "text": "multiple threats so what something like no Jess forces you to do is run multiple no Jess instances on the Box to use the Box",
    "start": "1061200",
    "end": "1067410"
  },
  {
    "text": "resources what Cashville says is well I just basically use multiple threads and each one of those straits will affect you on a lip of leap for you the only",
    "start": "1067410",
    "end": "1075930"
  },
  {
    "text": "thing it's doing on the lip of loop is i/o right so essentially it's the requests coming in and any i/o you're",
    "start": "1075930",
    "end": "1082470"
  },
  {
    "text": "doing otherwise you're a managed code so it's basically calling into managed code stuff switch shots and manage codes",
    "start": "1082470",
    "end": "1087810"
  },
  {
    "text": "right to execute your code right let's optimize for low number sis calls and",
    "start": "1087810",
    "end": "1094340"
  },
  {
    "start": "1093000",
    "end": "1157000"
  },
  {
    "text": "it's fast right kind of anything you've seen these kind of this is detecting",
    "start": "1094340",
    "end": "1099360"
  },
  {
    "text": "power plane take plain text benchmark and as you can see this is basically yet",
    "start": "1099360",
    "end": "1106260"
  },
  {
    "text": "done that call enix that's pretty raw slower with basically when you put the NVC routing in but it's right up there",
    "start": "1106260",
    "end": "1112800"
  },
  {
    "text": "at the top basically of the list and you can see just behind some of the very fast ones like Nettie and it's way ahead",
    "start": "1112800",
    "end": "1118860"
  },
  {
    "text": "of things that fall come which is a really fast Python server many of you",
    "start": "1118860",
    "end": "1126120"
  },
  {
    "text": "may have seen a lot of interest recently in the c-sharp language in things like",
    "start": "1126120",
    "end": "1131730"
  },
  {
    "text": "span and refs essentially vertical thing a lot of the motivation as far as I can tell for that it's around reducing the",
    "start": "1131730",
    "end": "1138270"
  },
  {
    "text": "allocations and enabling you to work with effectively memory in such a way that essentially they can push the",
    "start": "1138270",
    "end": "1144000"
  },
  {
    "text": "performance of kestrel up to the same levels as nettie okay that's really your",
    "start": "1144000",
    "end": "1149550"
  },
  {
    "text": "gold standard because Nattie is what drives a lot of Java micro-services for example because it's",
    "start": "1149550",
    "end": "1154770"
  },
  {
    "text": "very very fast okay well she said the problem is it's not a fully featured web",
    "start": "1154770",
    "end": "1161520"
  },
  {
    "start": "1157000",
    "end": "1278000"
  },
  {
    "text": "server so you've got to stick it behind something which is where is comes in if you're on Windows or nginx",
    "start": "1161520",
    "end": "1167220"
  },
  {
    "text": "or a patch if you're in the UNIX world I don't really know it's about Apache so I'm just going talk about your next today",
    "start": "1167220",
    "end": "1174230"
  },
  {
    "text": "zangetsu puffle whistling it comes on Windows as well if you want if you're interested and it sells content response",
    "start": "1175490",
    "end": "1182930"
  },
  {
    "text": "to HTTP or HTTPS he also has some mail features I don't even wear any one that actually uses those but it will support",
    "start": "1182930",
    "end": "1189200"
  },
  {
    "text": "doing mail for you so it's a webserver standalone out-of-the-box it can serve",
    "start": "1189200",
    "end": "1195260"
  },
  {
    "text": "static content so if you have static HTML files you can effectively use nginx basis web server to serve those up for",
    "start": "1195260",
    "end": "1201650"
  },
  {
    "text": "you right but it can also call your",
    "start": "1201650",
    "end": "1207830"
  },
  {
    "text": "application right so it can do that by doing proxy parse it just takes the HTTP that comes into it and it basically",
    "start": "1207830",
    "end": "1213890"
  },
  {
    "text": "forwards that HTTP application it can also do things that we call fast CGI so",
    "start": "1213890",
    "end": "1219410"
  },
  {
    "text": "if your application supports fast CGI it can pass to you ever file CGI and that's quite common in the Python world a lot",
    "start": "1219410",
    "end": "1225440"
  },
  {
    "text": "of Python bases platysanic or new WSGI people basically passed it over it's a TCP level basically to the other server",
    "start": "1225440",
    "end": "1234610"
  },
  {
    "text": "generally speaking what you're doing with nginx is essentially you're always doing its respective doing i/o right so",
    "start": "1234640",
    "end": "1243050"
  },
  {
    "text": "it's not an application container in the way that I is is it doesn't host your code anyway what it does essentially it",
    "start": "1243050",
    "end": "1249410"
  },
  {
    "text": "says as I receive an i/o as a web server and I know how to service that I'd rather read a file off disk and serve it",
    "start": "1249410",
    "end": "1254450"
  },
  {
    "text": "to you or I will call another IO endpoint be that your application",
    "start": "1254450",
    "end": "1259610"
  },
  {
    "text": "essentially or something else and get content out of that so it treats essentially reading your content your",
    "start": "1259610",
    "end": "1265280"
  },
  {
    "text": "application because that's not really something from disk just no operation is performing okay as a result it can be very fast by",
    "start": "1265280",
    "end": "1273710"
  },
  {
    "text": "optimizing around basically the fact that it's only delivering i/o okay and",
    "start": "1273710",
    "end": "1280190"
  },
  {
    "start": "1278000",
    "end": "1590000"
  },
  {
    "text": "when we talk about I think like nginx one of the things to understand a little",
    "start": "1280190",
    "end": "1285650"
  },
  {
    "text": "bit I think it's helpful is a comparison between the world say of IIAs and the",
    "start": "1285650",
    "end": "1292130"
  },
  {
    "text": "world of nginx so typically what used to happen to us when we were using is on Windows was we",
    "start": "1292130",
    "end": "1298460"
  },
  {
    "text": "get a request in from the user to it to be sis and basically we get Windows",
    "start": "1298460",
    "end": "1304370"
  },
  {
    "text": "activation service basically spins out and says I can look in the application host config and get a find an",
    "start": "1304370",
    "end": "1311240"
  },
  {
    "text": "application to deal with this request and essentially what it does is it looks a list of the detail in there and it",
    "start": "1311240",
    "end": "1317420"
  },
  {
    "text": "says I'm going to spin up basically an app pool and it's put up a worker process to service that up or I'm going",
    "start": "1317420",
    "end": "1322640"
  },
  {
    "text": "to handle your request and under is 7 or later with the integrated pipeline everything goes through our aspect on",
    "start": "1322640",
    "end": "1329150"
  },
  {
    "text": "that including trust with static files and this and it's essentially important",
    "start": "1329150",
    "end": "1334700"
  },
  {
    "text": "to think about are is less as a web server than as an application container right it's a it hosts your application",
    "start": "1334700",
    "end": "1344620"
  },
  {
    "text": "this is the water docker right in da core we have the docker host which runs a docker demon and what we do is then",
    "start": "1344620",
    "end": "1351650"
  },
  {
    "text": "say ok I'm gonna go and basically to find some containers and I put an image out of a registry somewhere I'm going to",
    "start": "1351650",
    "end": "1358400"
  },
  {
    "text": "basically build that container and I create a network they can all talk to each other and have some data volumes",
    "start": "1358400",
    "end": "1363470"
  },
  {
    "text": "they can all share ok and that model is increasingly a lot happy by deploying",
    "start": "1363470",
    "end": "1368780"
  },
  {
    "text": "give them a bit darker directly be communities running basically on AWS",
    "start": "1368780",
    "end": "1374330"
  },
  {
    "text": "that's becoming increasingly common model and the problem is is doesn't make",
    "start": "1374330",
    "end": "1379460"
  },
  {
    "text": "sense in that scenario and there are two reasons for that one is essentially quite often and then",
    "start": "1379460",
    "end": "1385250"
  },
  {
    "text": "I'm going to run something like nano I don't want to run containers they're basically are windows because they are huge",
    "start": "1385250",
    "end": "1390920"
  },
  {
    "text": "I want something small and I want something is essentially a sandbox wrap around a process is what containers are",
    "start": "1390920",
    "end": "1397870"
  },
  {
    "text": "and second this is a container model there is no point to be running a",
    "start": "1397870",
    "end": "1403850"
  },
  {
    "text": "container model inside a container model right putting is on my container does",
    "start": "1403850",
    "end": "1410750"
  },
  {
    "text": "not make any sense because I'm putting a container model inside of container right so as soon as I get here I want",
    "start": "1410750",
    "end": "1416810"
  },
  {
    "text": "something else I want something effectively that's going to deal with that issue basically of serving the web",
    "start": "1416810",
    "end": "1422720"
  },
  {
    "text": "for me without bringing in there need to be an application container on top so advantage of nginx is I separate these",
    "start": "1422720",
    "end": "1429470"
  },
  {
    "text": "concerns I'm not being application contained that and a web server and just",
    "start": "1429470",
    "end": "1434480"
  },
  {
    "text": "being web server",
    "start": "1434480",
    "end": "1437140"
  },
  {
    "text": "all right quick discussion we basically have web servers work nowadays so you",
    "start": "1441649",
    "end": "1447779"
  },
  {
    "text": "might think and it's not an unreasonable search and how the web server would work is I receive a request from web browser",
    "start": "1447779",
    "end": "1456330"
  },
  {
    "text": "says you know here's a connect to connect to you I accept the connection and then I use a thread to say okay hate",
    "start": "1456330",
    "end": "1463409"
  },
  {
    "text": "connection give me your data I will then use that thread to go and process your request by",
    "start": "1463409",
    "end": "1469320"
  },
  {
    "text": "creating some connections to be handler and I always wanted to request with you okay the problem is that's pretty nigh",
    "start": "1469320",
    "end": "1474779"
  },
  {
    "text": "even wouldn't Ashley scale what happens is when you receive a certain number of connections you can spend all your time",
    "start": "1474779",
    "end": "1481399"
  },
  {
    "text": "switching between threads and context switching because you're going to run out by Steve capacity on your server",
    "start": "1481399",
    "end": "1486779"
  },
  {
    "text": "you've only got 70 cores once you see the number of cores you're gonna start doing context switching and eventually",
    "start": "1486779",
    "end": "1492059"
  },
  {
    "text": "your website would spend more time context switching it does actually serving requests and eventually you'll run out of memory as well because each",
    "start": "1492059",
    "end": "1498929"
  },
  {
    "text": "request these thread will take a set amount of memory and I bet effectively eventually you'll start queuing requesting your circle then will start",
    "start": "1498929",
    "end": "1504899"
  },
  {
    "text": "spitting out 500 hours cuz it can't take any more low okay so we don't build web servers that way we actually a bit more",
    "start": "1504899",
    "end": "1511950"
  },
  {
    "text": "complicated so this is the way that a modern web server works I receive I accept the connection coming in and what",
    "start": "1511950",
    "end": "1517769"
  },
  {
    "text": "they do is I actually say right what I'm gonna wait on effectively the operating",
    "start": "1517769",
    "end": "1522990"
  },
  {
    "text": "system telling me effectively its buffered all basically the bytes that I need to read so I basically puts it 50",
    "start": "1522990",
    "end": "1528419"
  },
  {
    "text": "to make of a completion dispatcher which says hey I'm gonna wait on you being done when you're done signal to me and I",
    "start": "1528419",
    "end": "1534690"
  },
  {
    "text": "will then process the work okay and you have a kind of single thread here for",
    "start": "1534690",
    "end": "1539789"
  },
  {
    "text": "something like Lib of but you can have effectively multiple threads if you have a selector from model so cache was effectively using multiple threads that",
    "start": "1539789",
    "end": "1546480"
  },
  {
    "text": "multiple live are loops yet what will work by search engine experts here a second so affect you when something complete to",
    "start": "1546480",
    "end": "1552480"
  },
  {
    "text": "spin up a thread and then I say go away of actively and handle that now down here you can see as I talk too much to",
    "start": "1552480",
    "end": "1557549"
  },
  {
    "text": "be handler I may find there are points where I'm doing IO in that process I'm reading from disk I'm talking to the",
    "start": "1557549",
    "end": "1562830"
  },
  {
    "text": "database and what I can do there is essentially the same thing I can say effectively right while I hand control",
    "start": "1562830",
    "end": "1567929"
  },
  {
    "text": "back and essentially I'll wait till you're complete I use this strategy going Serbs another request and what that means is an",
    "start": "1567929",
    "end": "1574710"
  },
  {
    "text": "individual thread can their service multiple requests right about that only above model effectively you know Jess",
    "start": "1574710",
    "end": "1580320"
  },
  {
    "text": "but all web service now they tend to work this way right so you're constantly handing off control when you're doing IO",
    "start": "1580320",
    "end": "1586470"
  },
  {
    "text": "so you have a smaller number of threads so we can do then is see kind of how",
    "start": "1586470",
    "end": "1594950"
  },
  {
    "start": "1590000",
    "end": "1670000"
  },
  {
    "text": "nginx is built this is nginx diagram since this is a master processes that supervisors are quite a worker from",
    "start": "1594950",
    "end": "1600090"
  },
  {
    "text": "patent mustard spins up and says I'm they're running nginx and there's a",
    "start": "1600090",
    "end": "1605310"
  },
  {
    "text": "spread up number of worker processes and there's worker processes are things that actually handle requests for you and it",
    "start": "1605310",
    "end": "1611520"
  },
  {
    "text": "is as a kind of model of saying right when I'm going to listen basically on a completion port when things are ready to be dealt with that thread will deal with",
    "start": "1611520",
    "end": "1617790"
  },
  {
    "text": "them and it will deal with them until they do some IO again and then I get queued on the completion pool and then",
    "start": "1617790",
    "end": "1622800"
  },
  {
    "text": "effectively our service them when they're ready again right so a small number of threads can service a high number requests because in theory most",
    "start": "1622800",
    "end": "1628860"
  },
  {
    "text": "web applications tend to be i/o bound rather than CPU bound suffer here",
    "start": "1628860",
    "end": "1634530"
  },
  {
    "text": "basically I'm a talk to a property cash so effectively nginx comes to support basically in processing I will show you",
    "start": "1634530",
    "end": "1639960"
  },
  {
    "text": "all that later okay you can a mixture for CGI HTTP so essentially if I'm not doing i/o or seven from the cache I can",
    "start": "1639960",
    "end": "1646440"
  },
  {
    "text": "go and get it basically from your web server I can also talk by far CGI to something but we're so there's support",
    "start": "1646440",
    "end": "1652590"
  },
  {
    "text": "for plugins to talk directly things out Redis and then cache so rather than necessarily having to talk to you have",
    "start": "1652590",
    "end": "1658800"
  },
  {
    "text": "to do that I can actually say I'll go and get the results basically for this thing live in Redis so I can use those as distributed caches I won't show you",
    "start": "1658800",
    "end": "1666510"
  },
  {
    "text": "that today but it's worth thinking about if you basically use those technologies okay the heart of nginx",
    "start": "1666510",
    "end": "1672840"
  },
  {
    "start": "1670000",
    "end": "2164000"
  },
  {
    "text": "is essentially a configuration file and we saw that earlier I showed you that",
    "start": "1672840",
    "end": "1678810"
  },
  {
    "text": "nginx conf right so you need to learn how to write one of those that's really that we need to understand in order to",
    "start": "1678810",
    "end": "1684360"
  },
  {
    "text": "use nginx in your environment and then - essentially its configure files went for",
    "start": "1684360",
    "end": "1690030"
  },
  {
    "text": "a series of directives so you got a syntax analysis for all units for a comment and essentially we have a",
    "start": "1690030",
    "end": "1695430"
  },
  {
    "text": "setting and a value and a semicolon and we just set hole in our directors and",
    "start": "1695430",
    "end": "1700670"
  },
  {
    "text": "NGH is modular so we won't show had to do it today but you can",
    "start": "1700670",
    "end": "1706020"
  },
  {
    "text": "effectively build nginx some source and you can change the modules that you have in your nginx deployment and NEX that's",
    "start": "1706020",
    "end": "1714090"
  },
  {
    "text": "you each module that you bring in essentially brings in the Signet and you said directives that you can use to manage our nginx so and then directives",
    "start": "1714090",
    "end": "1722730"
  },
  {
    "text": "can be grouped as a block structure so you can crib directives so done I'll come back explain what all these groups",
    "start": "1722730",
    "end": "1727800"
  },
  {
    "text": "are you can see we've got placing HTT block a server block and a listen block within those blocks we are setting",
    "start": "1727800",
    "end": "1733380"
  },
  {
    "text": "directive values okay so your config file effectively looks just like that",
    "start": "1733380",
    "end": "1738980"
  },
  {
    "text": "okay so the three modules that you essentially always get when you build an",
    "start": "1738980",
    "end": "1744330"
  },
  {
    "text": "engine X are effectively call that basically says where's my master process how many workers have I got how am i",
    "start": "1744330",
    "end": "1751230"
  },
  {
    "text": "listening for things events and that says basically I want to listen for events on completion port what's how am",
    "start": "1751230",
    "end": "1757320"
  },
  {
    "text": "i doing that you can control the actual technology used it varies between the operating system which one is best",
    "start": "1757320",
    "end": "1762540"
  },
  {
    "text": "there's a default and called poll but you may want to use the e polar or cage depending on your operating system and",
    "start": "1762540",
    "end": "1767820"
  },
  {
    "text": "the configuration configuration I want to show you much today but just so you know it exists effectively when you get a big config file I'll show some big",
    "start": "1767820",
    "end": "1774330"
  },
  {
    "text": "config files because it's easy to have one file to show you guys you can take a section of that put another config fun",
    "start": "1774330",
    "end": "1779670"
  },
  {
    "text": "just include it so you can essentially break up your config file and make it easier to read there are a few key",
    "start": "1779670",
    "end": "1788340"
  },
  {
    "text": "models we want to think about using and I should try to explain to you today that are really key to using this web",
    "start": "1788340",
    "end": "1794670"
  },
  {
    "text": "server to be cool and that lets us basically configure what's called virtual hosts so a virtual host is",
    "start": "1794670",
    "end": "1801210"
  },
  {
    "text": "really just your downstream that we're talking to rewrite and let you do you",
    "start": "1801210",
    "end": "1807270"
  },
  {
    "text": "are rewriting upstream so basically that's used to do load balancing that's saying actually services request with a",
    "start": "1807270",
    "end": "1813660"
  },
  {
    "text": "pool or servers and proxy module which basically doesn't need load balancing at",
    "start": "1813660",
    "end": "1818910"
  },
  {
    "text": "all but that's just access basically like a star bless your act function is a reverse proxy so she do things like caching practica tetra fioor so okay you",
    "start": "1818910",
    "end": "1829260"
  },
  {
    "text": "can build it from source if you want you options there's pretty good instructions out there essentially it's all about creating a using configure to say what",
    "start": "1829260",
    "end": "1836370"
  },
  {
    "text": "modules I warn that generates a make file you build the makefile right there's instructions out there if you do that",
    "start": "1836370",
    "end": "1841909"
  },
  {
    "text": "Sherman if you want too hard or you want to basically add additional modules that don't come and say the apt-get or doc a",
    "start": "1841909",
    "end": "1847460"
  },
  {
    "text": "default set you'll want to do that we don't do that today okay and that modular system means it's very",
    "start": "1847460",
    "end": "1853940"
  },
  {
    "text": "extensible so third parties create modules that you can then plug into engine exit additional things there's a",
    "start": "1853940",
    "end": "1860869"
  },
  {
    "text": "protocol open rusty he said open rusty basically brings in a lower module into",
    "start": "1860869",
    "end": "1866149"
  },
  {
    "text": "nginx and that lets you convert Internet into an application server because you can then write lower code that runs in",
    "start": "1866149",
    "end": "1872929"
  },
  {
    "text": "response to HTTP requests and on top of that people have built something called",
    "start": "1872929",
    "end": "1878119"
  },
  {
    "text": "calm so Kong is an API gateway built above nginx that uses essentially modules in nginx and and lower to",
    "start": "1878119",
    "end": "1884989"
  },
  {
    "text": "effectively help you do things at the Perimeter for example rate limiting",
    "start": "1884989",
    "end": "1890739"
  },
  {
    "text": "authorization under parameter constructor concerns okay people have a calm or over rusty okay",
    "start": "1890739",
    "end": "1898479"
  },
  {
    "text": "open Trustees our module that you add you build intervention acts - lets you do lower Kong is essentially a set of",
    "start": "1901160",
    "end": "1907530"
  },
  {
    "text": "modules that basically let you use open resti to effectively produce an api",
    "start": "1907530",
    "end": "1912720"
  },
  {
    "text": "gateway so effectively it's all nginx as its engine at the bottom but effectively",
    "start": "1912720",
    "end": "1918480"
  },
  {
    "text": "it's just a set of modules to which have been built by that project to let you use it in that particular role we said",
    "start": "1918480",
    "end": "1926840"
  },
  {
    "text": "okay so every nginx config file has a",
    "start": "1926840",
    "end": "1932490"
  },
  {
    "text": "kind of like the route if you like something that's basically not with another block and generally at the root of the file are you're defining how",
    "start": "1932490",
    "end": "1938910"
  },
  {
    "text": "nginx is going to run so you're saying I've got nuts Daisy saying saying I've got a number of worker processes right so I'm just",
    "start": "1938910",
    "end": "1946230"
  },
  {
    "text": "saying for you can choose auto generally you want the number of cores that you have if you say auto will figure it out",
    "start": "1946230",
    "end": "1952980"
  },
  {
    "text": "for you and how I'm gonna listen so here I'm saying I'm running on UNIX so I'm going to use a poll those two comps see",
    "start": "1952980",
    "end": "1959310"
  },
  {
    "text": "at the bottom it just says you use a poll and worker connections 204 right I'm limiting the number of connections that's essentially that I will run",
    "start": "1959310",
    "end": "1965100"
  },
  {
    "text": "basically on one give an engine X in this instance to 204 right the next",
    "start": "1965100",
    "end": "1976140"
  },
  {
    "text": "station put the most important one to understand is the HTTP block HTTP block says I want to listen for HTTP requests",
    "start": "1976140",
    "end": "1983130"
  },
  {
    "text": "socially the pretty fundamental thing we want to do with our web server right within the HTTP block we define a number",
    "start": "1983130",
    "end": "1989760"
  },
  {
    "text": "of virtual server blocks and the virtual server blocks essentially will tell us how to respond to requests so a virtual",
    "start": "1989760",
    "end": "1996690"
  },
  {
    "text": "server block is basically a listen directive listen on this port and a server name on this particular object",
    "start": "1996690",
    "end": "2004220"
  },
  {
    "text": "adjust to this host okay so I get a request in to address to a host and a port on that host and I listen to those",
    "start": "2004220",
    "end": "2011390"
  },
  {
    "text": "requests okay and within that server",
    "start": "2011390",
    "end": "2016520"
  },
  {
    "text": "block and then we have another number of location blocks so the location block says after that portion of the URI there",
    "start": "2016520",
    "end": "2022880"
  },
  {
    "text": "may be additional parts of the URI and I can use those two routes essentially the incoming HTTP request to a given",
    "start": "2022880",
    "end": "2030380"
  },
  {
    "text": "provider so maybe I just serve that big file I'm subbing straight off disk but I may be passing that essentially",
    "start": "2030380",
    "end": "2036980"
  },
  {
    "text": "violation to be proxy to your application or far CGI to an application to actually build instead okay",
    "start": "2036980",
    "end": "2044600"
  },
  {
    "text": "locations can be internal or external so external just means this is a URI coming",
    "start": "2044600",
    "end": "2049850"
  },
  {
    "text": "into the nginx from basically the outside and the internal means I've",
    "start": "2049850",
    "end": "2055220"
  },
  {
    "text": "actually done some rewriting in tonally and nginx and now created basically a mapping to an internal location which",
    "start": "2055220",
    "end": "2061608"
  },
  {
    "text": "tells you how to handle it but see example that is the second okay so this is a typical HTTP block you can",
    "start": "2061609",
    "end": "2069740"
  },
  {
    "text": "see that I'm saying effectively that I'm going to I've got somewhat I got some",
    "start": "2069740",
    "end": "2074810"
  },
  {
    "text": "things here to say I want to optimize how TCP works the TCP is a protocol is",
    "start": "2074810",
    "end": "2081740"
  },
  {
    "text": "designed for things that other than HTTP and so in this case we just say actually we want to really basically modify the",
    "start": "2081740",
    "end": "2087590"
  },
  {
    "text": "way we're listening to make sure that we're listening in a way that's effective for HTTP not for SMTP cetera",
    "start": "2087590",
    "end": "2093770"
  },
  {
    "text": "okay and then I'm saying effectively here I want to listen on port 80 I'm on localhost because nothing has to find",
    "start": "2093770",
    "end": "2099710"
  },
  {
    "text": "John 17 and I'm a double doors aren't become something that the example combo 18 and this is the sake I'm at the root",
    "start": "2099710",
    "end": "2106550"
  },
  {
    "text": "location and the root location I'm going to use this thing called try files it's actually rewrite directive and it says",
    "start": "2106550",
    "end": "2111680"
  },
  {
    "text": "try things in this order first of all just try serving that address off the",
    "start": "2111680",
    "end": "2117410"
  },
  {
    "text": "disk is a static file I'll try something off the disk basically with a slash after it's at a default it says she bit further down right or send them to thing",
    "start": "2117410",
    "end": "2125570"
  },
  {
    "text": "called Kestrel weather and kessaris and then another location are defined in that location essentially I'm saying",
    "start": "2125570",
    "end": "2131740"
  },
  {
    "text": "proxy to pass this through to basically app 5,000 writes basically is my Kestrel",
    "start": "2131740",
    "end": "2139400"
  },
  {
    "text": "hosted s Bennett not Cora right the request comes in and port 84 mm I'll become I look in silicon serve off disk",
    "start": "2139400",
    "end": "2146380"
  },
  {
    "text": "he's a maintenance page here as well right so it's quite common thing is to put slash maintenance or HTML that",
    "start": "2146380",
    "end": "2151730"
  },
  {
    "text": "exists you go to the maintenance page if not it doesn't exist you get you keep going down the line right so you can put easy to put up my",
    "start": "2151730",
    "end": "2157430"
  },
  {
    "text": "mind to this patient say I'm under maintenance before you get to it I think I'll show you that later on and then essentially a passing up the proxy",
    "start": "2157430",
    "end": "2165590"
  },
  {
    "start": "2164000",
    "end": "2624000"
  },
  {
    "text": "all right let's have a look at reverse proxy",
    "start": "2165590",
    "end": "2174210"
  },
  {
    "text": "shutdown before I get confused reverse",
    "start": "2178320",
    "end": "2186550"
  },
  {
    "text": "proxy",
    "start": "2186550",
    "end": "2189090"
  },
  {
    "text": "let's fix that problem when I've altered something we can easily fix that right",
    "start": "2202810",
    "end": "2214120"
  },
  {
    "text": "[Music] what are you thinking you're going to",
    "start": "2214120",
    "end": "2220130"
  },
  {
    "text": "overwrite to be announced directory somewhere mm-hmm",
    "start": "2220130",
    "end": "2227170"
  },
  {
    "text": "let's just kill that for a second",
    "start": "2227800",
    "end": "2235480"
  },
  {
    "text": "Jesse did all the cashing in it reminds me right it's happy again while we talk",
    "start": "2242630",
    "end": "2249480"
  },
  {
    "text": "about that let's just build this yeah I've got this one open that's why so",
    "start": "2249480",
    "end": "2259230"
  },
  {
    "text": "just complaining I think because I had that open out of locked it wasn't killing it for me so I'm just gonna rebuild this server so why it's just",
    "start": "2259230",
    "end": "2267900"
  },
  {
    "text": "shutting down so here we have a basic CV docker compose file again we've got a reverse proxy here you can see you are",
    "start": "2267900",
    "end": "2274350"
  },
  {
    "text": "basically saying to nginx basically exposed 80 ATM did expose we mentioned that kind of earlier and we're saying",
    "start": "2274350",
    "end": "2279980"
  },
  {
    "text": "and a push through here and and the nginx config file I've got a",
    "start": "2279980",
    "end": "2291420"
  },
  {
    "text": "lot more in okay so we talked about this earlier what I'm doing here essentially is saying I want",
    "start": "2291420",
    "end": "2297360"
  },
  {
    "text": "to optimize House and Senate file works in UNIX so I want to talk to my son the TCP for HTTP this is saying I want to",
    "start": "2297360",
    "end": "2303360"
  },
  {
    "text": "limit the number of requests that I am receiving from any one IP address in our window of time and I'm limiting some",
    "start": "2303360",
    "end": "2311910"
  },
  {
    "text": "stuff about how much space you can use to store that history of requests and I can also basically allow forgiven to",
    "start": "2311910",
    "end": "2318360"
  },
  {
    "text": "place you forgiving bursts of activity right that's just the example of the kind of thing you can get out of a proxy like this and doing compression and",
    "start": "2318360",
    "end": "2325110"
  },
  {
    "text": "compression for all those given types I'm turning seven tokens off so you can't see the version it's really hard",
    "start": "2325110",
    "end": "2330410"
  },
  {
    "text": "to stop nginx reporting that it is nginx but the best you can do is turn the cert",
    "start": "2330410",
    "end": "2335520"
  },
  {
    "text": "and turn the version officer people can't exploit given version based exploits I'm doing some basic security",
    "start": "2335520",
    "end": "2341490"
  },
  {
    "text": "staff in terms of the headers I'm adjusting some of the defaults around the keeper lives and the collections and",
    "start": "2341490",
    "end": "2349950"
  },
  {
    "text": "I'm defining basically here a proxy and I'll come back and talk about proxies in a second mister saw me having to",
    "start": "2349950",
    "end": "2356310"
  },
  {
    "text": "basically switch things but the key thing to understand down here is I say right listen basically on port 80 you're",
    "start": "2356310",
    "end": "2364470"
  },
  {
    "text": "all requests than the words once at the root location so there's an order which we match locations it's worth reading up",
    "start": "2364470",
    "end": "2369960"
  },
  {
    "text": "on nginx I'm not there trying to run through that with you today but an order in which location blocks are matched given that they're effectively",
    "start": "2369960",
    "end": "2376660"
  },
  {
    "text": "could overlap and there there's there are given directives you can in location blocks you can use things like regular",
    "start": "2376660",
    "end": "2382509"
  },
  {
    "text": "expressions you can use things like equals to say exactly match this you'll want to go away and have a look at the",
    "start": "2382509",
    "end": "2388420"
  },
  {
    "text": "documentation and nginx around that to understand both what your options are in terms of matching and how it figures out",
    "start": "2388420",
    "end": "2395589"
  },
  {
    "text": "when there are conflicts which one to choose okay then this is try files line",
    "start": "2395589",
    "end": "2400690"
  },
  {
    "text": "which basically says have a look in citizen maintenance HTML if so serve that if not see if you can basically",
    "start": "2400690",
    "end": "2405970"
  },
  {
    "text": "serve this request by looking up a location on disk if you can't pass it through basically to this location",
    "start": "2405970",
    "end": "2411220"
  },
  {
    "text": "kestrel that's an internal basic location internal location kestrel just",
    "start": "2411220",
    "end": "2416920"
  },
  {
    "text": "says okay pass it through basically to greetings we have 5,000 so I'm just effectively using the internal DNS",
    "start": "2416920",
    "end": "2424059"
  },
  {
    "text": "basically on the docker host to look up greetings to a web and fine bye see their port 5,000 and I'm setting a few",
    "start": "2424059",
    "end": "2430119"
  },
  {
    "text": "headers essentially on the proxy port okay let me just build this",
    "start": "2430119",
    "end": "2437789"
  },
  {
    "text": "what we'll do is we just talk a little bit about some of these cache headers will come to torment and what I'm build",
    "start": "2444440",
    "end": "2450319"
  },
  {
    "text": "in there we'll talk about caching in a second you can see here where the fourth defining something called proxy cache path so we're saying essentially cache",
    "start": "2450319",
    "end": "2457579"
  },
  {
    "text": "some stuff and put it here so any annexed by default will cache on disk for you right but you can do stuff to",
    "start": "2457579",
    "end": "2464030"
  },
  {
    "text": "basically offload caching this after way seeds or things like um ready so memcached and here we're saying set a",
    "start": "2464030",
    "end": "2470900"
  },
  {
    "text": "number of headers up how long the cache should be valid proxy these up these",
    "start": "2470900",
    "end": "2476690"
  },
  {
    "text": "settings proxy revalidate all means you should always essentially check with the origin server if I turn that on with",
    "start": "2476690",
    "end": "2482390"
  },
  {
    "text": "saying if modified since header or if none match header depending whether you using kind of last modified @e tags to",
    "start": "2482390",
    "end": "2488750"
  },
  {
    "text": "the time whether the content is stale minimum uses down here says only cache",
    "start": "2488750",
    "end": "2494690"
  },
  {
    "text": "after a certain number of hits you stay Lehrer says in the event that the what",
    "start": "2494690",
    "end": "2500480"
  },
  {
    "text": "the origin server returns you basically one of these errors like a 500 just serve results out of the cache very very",
    "start": "2500480",
    "end": "2507140"
  },
  {
    "text": "useful and background update says when I get a requesting and the cache is kind",
    "start": "2507140",
    "end": "2513050"
  },
  {
    "text": "of basically invalid then serve the stale results and then go to the origin server and refresh so this first person",
    "start": "2513050",
    "end": "2519890"
  },
  {
    "text": "gets the stare result subsequent requests get refreshed in the background and lock on says if I receive a whole",
    "start": "2519890",
    "end": "2525200"
  },
  {
    "text": "burst of traffic asking for the same page which is cashable then what I want you to do is to lock take that the first",
    "start": "2525200",
    "end": "2533839"
  },
  {
    "text": "person go to the origin server first request bring back by see the cached result serve it out basically and then",
    "start": "2533839",
    "end": "2539210"
  },
  {
    "text": "everybody else then hits the cache and serves the cached result that stops you otherwise continually revalidating your",
    "start": "2539210",
    "end": "2547240"
  },
  {
    "text": "the cache and say everyone now a whole burst says I'm gonna get it replaced one",
    "start": "2548109",
    "end": "2553819"
  },
  {
    "text": "in the cache I'm gonna get a place to run the cache that doesn't work so what you want to do is it use the lock on okay right let me do this stuck a",
    "start": "2553819",
    "end": "2561410"
  },
  {
    "text": "composer so we're gonna bring up docket compose at this point okay",
    "start": "2561410",
    "end": "2569539"
  },
  {
    "text": "so the most basic use of this we kind of showed you earlier which is around the",
    "start": "2569539",
    "end": "2579979"
  },
  {
    "text": "idea effects when you're saying well I want to basically hit 88 year other than 5,000 oh that's no longer exposed we",
    "start": "2579979",
    "end": "2585469"
  },
  {
    "text": "just reminds you of that and then we're talking a little bit about caching so",
    "start": "2585469",
    "end": "2593029"
  },
  {
    "text": "this essentially is going away effectively and hitting our endpoint that gets us multiple greetings can you",
    "start": "2593029",
    "end": "2598039"
  },
  {
    "text": "see those the sunlight killing you guys",
    "start": "2598039",
    "end": "2601509"
  },
  {
    "text": "okay so you can see here I've got a header back and the header basis you've",
    "start": "2604719",
    "end": "2610249"
  },
  {
    "text": "got a lot more information in it now it's talking about basically things like cache control price protections that we",
    "start": "2610249",
    "end": "2615739"
  },
  {
    "text": "identified and we're selling everything back but you can see we're hitting 188 okay so you know jump away for that",
    "start": "2615739",
    "end": "2624859"
  },
  {
    "start": "2624000",
    "end": "3004000"
  },
  {
    "text": "slide for a second how comfortable are you all about HTTP caching who thinks",
    "start": "2624859",
    "end": "2631219"
  },
  {
    "text": "they know law about it who thinks they don't know much about it comfortable",
    "start": "2631219",
    "end": "2636279"
  },
  {
    "text": "okay and we'll do some slides on this way okay",
    "start": "2636279",
    "end": "2641859"
  },
  {
    "text": "and then wish I had that reverse caching stuff works",
    "start": "2646060",
    "end": "2651460"
  },
  {
    "text": "right so intense it's often described as a reverse proxy what does that mean that means it sits in front of your server as",
    "start": "2665980",
    "end": "2671810"
  },
  {
    "text": "opposed to a forward proxy that sits essentially say in the enterprise and sits between clients and the enterprise",
    "start": "2671810",
    "end": "2677360"
  },
  {
    "text": "in the outside world right in most cases effectively it disguises effectively where those requests originally came",
    "start": "2677360",
    "end": "2683540"
  },
  {
    "text": "from but also has mainly used for things like caching so you're for proxy server let's your administrator cache the BBC's",
    "start": "2683540",
    "end": "2690290"
  },
  {
    "text": "website so that essentially you're not continually using bandwidth when everyone at lunchtime decides to have a look at the news right the reverse proxy",
    "start": "2690290",
    "end": "2697580"
  },
  {
    "text": "server lets you cache basically your responses from your application so that you're not constantly hitting the origin",
    "start": "2697580",
    "end": "2703280"
  },
  {
    "text": "server and you can then effectively scale more easily right the thing to",
    "start": "2703280",
    "end": "2709730"
  },
  {
    "text": "understand about if your caching is essentially the way it really works is you cast downstream whether your application server and a lot of cases",
    "start": "2709730",
    "end": "2716810"
  },
  {
    "text": "you'll see things like a speed on that core having middleware that talks about doing caching in the middleware right",
    "start": "2716810",
    "end": "2721880"
  },
  {
    "text": "and it's useful essentially in your application to cache things like I don't want to walk to the database etc but the",
    "start": "2721880",
    "end": "2727490"
  },
  {
    "text": "way that the web sky Atlas is to cache basically using proxies or your browse that you cast downstream from the origin",
    "start": "2727490",
    "end": "2733100"
  },
  {
    "text": "server and what we're doing is we're trading performance for the risk of becoming stale right so we say I'm gonna",
    "start": "2733100",
    "end": "2739760"
  },
  {
    "text": "get a faster response if it's in your forward proxy server or my browser it's much closer to me and the latency is",
    "start": "2739760",
    "end": "2745580"
  },
  {
    "text": "lower right if it's in my online the",
    "start": "2745580",
    "end": "2751300"
  },
  {
    "text": "providers basically site it's essentially provide pred to be having to go to the database acceptor effectively",
    "start": "2751300",
    "end": "2757550"
  },
  {
    "text": "so the latency is still okay well trading opt for consistency in some",
    "start": "2757550",
    "end": "2763100"
  },
  {
    "text": "cases essentially we may find that basically we are have more availability through using a cache in other words we can get some results even event of an",
    "start": "2763100",
    "end": "2769460"
  },
  {
    "text": "error but we may be inconsistent may be serving stale results the browser cache",
    "start": "2769460",
    "end": "2776390"
  },
  {
    "text": "is very low latency because it's where I am so nothing basically that's cached in my browser makes me look very responsive",
    "start": "2776390",
    "end": "2783080"
  },
  {
    "text": "but it's not shared so everybody has a copy okay and a reverse proxy cache is",
    "start": "2783080",
    "end": "2788630"
  },
  {
    "text": "shared because essentially everyone that goes to that proxy can effectively use the cached version so typical kind of",
    "start": "2788630",
    "end": "2796940"
  },
  {
    "text": "thing we used in caching saij so what we're saying here is when we make a browser request we use a cache",
    "start": "2796940",
    "end": "2802569"
  },
  {
    "text": "control header with a max age of 30 and we say essentially well look at the",
    "start": "2802569",
    "end": "2807760"
  },
  {
    "text": "response initially we say max age of 30 on the get response right and so what we're saying is this now lives with",
    "start": "2807760",
    "end": "2813130"
  },
  {
    "text": "basically 30 seconds when you request it from the browser in future you can skip",
    "start": "2813130",
    "end": "2819630"
  },
  {
    "text": "going to the origin server provided it was in 30 seconds the last window that you got that right so the first request",
    "start": "2819630",
    "end": "2825400"
  },
  {
    "text": "says put in the browser for 30 seconds this essentially responds and then the",
    "start": "2825400",
    "end": "2830740"
  },
  {
    "text": "next 30 seconds if you do another get request just surf within the browser it's so important that it expires and",
    "start": "2830740",
    "end": "2836470"
  },
  {
    "text": "what then happens you didn't necessarily have to go all the way to the origin server and get a new version it can ask the origin server why I basically have",
    "start": "2836470",
    "end": "2842829"
  },
  {
    "text": "modified since or if none match if it's still valid and continue to extend that time slice and serve it expires is very",
    "start": "2842829",
    "end": "2849490"
  },
  {
    "text": "similar to max age rather than giving your window it just says there's a specific top point in time when it's going to actually expire last modified",
    "start": "2849490",
    "end": "2857980"
  },
  {
    "text": "so what happens is this effectively when you get response from the server it says this is the last modified date otherwise",
    "start": "2857980",
    "end": "2863319"
  },
  {
    "text": "this is basically when it was created and you can then essentially pass across a if modified since from the browser",
    "start": "2863319",
    "end": "2869500"
  },
  {
    "text": "that says this is the version I have traction on this date do you have a later version if the proxy and the proxy",
    "start": "2869500",
    "end": "2876430"
  },
  {
    "text": "server can say there's no later version basically right so if actually you have the current correct version you can also",
    "start": "2876430",
    "end": "2885569"
  },
  {
    "text": "force revalidation so you can tell the proxy server you to ask the origin server if the version you've got it's",
    "start": "2885569",
    "end": "2891190"
  },
  {
    "text": "still current and what happens is you can say with a last modified date across the what if I'd sent star to the origin",
    "start": "2891190",
    "end": "2896619"
  },
  {
    "text": "server if you support it in your code base hey is this still valid and you can return a 304 which basically says it's",
    "start": "2896619",
    "end": "2902380"
  },
  {
    "text": "not modified to the proxy cache is to say you can serve this version back out to customers right this is where the web",
    "start": "2902380",
    "end": "2908200"
  },
  {
    "text": "scales and that's the way that the web coats for temporal coupler and temporal coupling is the notion that it needs to be up in order to basically serve",
    "start": "2908200",
    "end": "2913900"
  },
  {
    "text": "requests but actually if I can hear a proxy I can offload that right we can",
    "start": "2913900",
    "end": "2920559"
  },
  {
    "text": "always use the cache control header for privacy so public means your proxies can store it private means only the browser",
    "start": "2920559",
    "end": "2926380"
  },
  {
    "text": "can store it sensitive information right I don't want anyone store it in between no store means nobody can",
    "start": "2926380",
    "end": "2932980"
  },
  {
    "text": "a copy right please don't keep it it's too sensitive even in the browser because someone might get onto that machine and basically looking at it",
    "start": "2932980",
    "end": "2939130"
  },
  {
    "text": "looking the cash no cash no cash is normal people think no cash is not intended to be no one gets a copy",
    "start": "2939130",
    "end": "2945070"
  },
  {
    "text": "no cash is intended to be that you must revalidate the copy you have with the origin server virus modified since or if",
    "start": "2945070",
    "end": "2951190"
  },
  {
    "text": "not match unfortunately no cash has been badly implemented by developers and so",
    "start": "2951190",
    "end": "2956650"
  },
  {
    "text": "no cash has actually come in most cases to mean the same thing as no store so most proxies and browsers now don't keep",
    "start": "2956650",
    "end": "2962950"
  },
  {
    "text": "a copy if you say no cash so if you want the behavior that no cash used to have you start using things that mastery",
    "start": "2962950",
    "end": "2969520"
  },
  {
    "text": "validate instead right just they we as developers Google got all got that wrong this is a typical basically property",
    "start": "2969520",
    "end": "2976390"
  },
  {
    "text": "cash statement so I'm saying at the top basically an engine X define my proxy cash and I'm saying further down",
    "start": "2976390",
    "end": "2982720"
  },
  {
    "text": "essentially what I want you to do is property cash to my cash and I've turned them by our settings I want you to",
    "start": "2982720",
    "end": "2988330"
  },
  {
    "text": "revalidate with a server minimum number of uses surf style surf stale pages for errors update your cache in the",
    "start": "2988330",
    "end": "2995650"
  },
  {
    "text": "background and only the first person in a whole burst of traffic goes to the",
    "start": "2995650",
    "end": "3001020"
  },
  {
    "text": "origin server to fill the cache okay let me show you caching so this version",
    "start": "3001020",
    "end": "3009630"
  },
  {
    "start": "3004000",
    "end": "3229000"
  },
  {
    "text": "essentially has caching in it so if I do this what I can see you want to do that",
    "start": "3009630",
    "end": "3016320"
  },
  {
    "text": "particular response is a whole load of IDs for these particular greetings so if",
    "start": "3016320",
    "end": "3022859"
  },
  {
    "text": "I grab that and go to here so this is",
    "start": "3022859",
    "end": "3029190"
  },
  {
    "text": "request a specific ID and I'm all",
    "start": "3029190",
    "end": "3034560"
  },
  {
    "text": "fingers and thumbs that isn't really what I wanted is it",
    "start": "3034560",
    "end": "3041450"
  },
  {
    "text": "driving a lectin with a trackpad is not",
    "start": "3045360",
    "end": "3050950"
  },
  {
    "text": "the best skill in the world that I own come on in a minute I'll invite one of",
    "start": "3050950",
    "end": "3059230"
  },
  {
    "text": "you have to drive for me okay great so",
    "start": "3059230",
    "end": "3064650"
  },
  {
    "text": "oops so again sorry yeah oh yeah thank you",
    "start": "3064650",
    "end": "3078970"
  },
  {
    "text": "very much okay so I can send a request",
    "start": "3078970",
    "end": "3085180"
  },
  {
    "text": "for that greeting to the back end and say give me that one specifically okay",
    "start": "3085180",
    "end": "3091230"
  },
  {
    "text": "there we go so basically what's happened is this has gone over to the browser can",
    "start": "3091230",
    "end": "3096460"
  },
  {
    "text": "you see there's a head of there which basically I've asked the proxy cats to give us and say did you conserve this",
    "start": "3096460",
    "end": "3102340"
  },
  {
    "text": "from the cache or not and first round time around obviously it's saying miss it's saying that wasn't in the cache I went to the",
    "start": "3102340",
    "end": "3107950"
  },
  {
    "text": "origin server to get it you can also see over here in the output basically from docker that effectively I've gone to the",
    "start": "3107950",
    "end": "3114130"
  },
  {
    "text": "origin server okay next time around when I request it because I've asked it to cache and I'll show you how we do that a",
    "start": "3114130",
    "end": "3119800"
  },
  {
    "text": "second it's going to change that status to hit so this time around it's said",
    "start": "3119800",
    "end": "3125740"
  },
  {
    "text": "that directly out of the cache rather than going to my application server and you can see probably those of you that",
    "start": "3125740",
    "end": "3131170"
  },
  {
    "text": "it's at right at the bottom the line unfortunately but you can see it's just calling basically straight to the proxy",
    "start": "3131170",
    "end": "3136360"
  },
  {
    "text": "those you can actually see that line at the bottom from docker all you have to do to really enable that is on your",
    "start": "3136360",
    "end": "3143260"
  },
  {
    "text": "controller in within let's just shut",
    "start": "3143260",
    "end": "3149050"
  },
  {
    "text": "that down that life and a better way for you",
    "start": "3149050",
    "end": "3153089"
  },
  {
    "text": "right so you can see here that effectively there is a response cache",
    "start": "3158640",
    "end": "3167980"
  },
  {
    "text": "attributes basically placed on that get this one says never because to get all of them so that will keep updating and",
    "start": "3167980",
    "end": "3174370"
  },
  {
    "text": "I'm not doing any kind of cache invalidation and this one and get greeting says basically what I want you to do is cash with a given profile we",
    "start": "3174370",
    "end": "3180940"
  },
  {
    "text": "set up the profiles in this file and you",
    "start": "3180940",
    "end": "3187090"
  },
  {
    "text": "can see effectively and it's basically built into Web API you can see I'm setting up basically one",
    "start": "3187090",
    "end": "3193120"
  },
  {
    "text": "that says hold this basically for sixty seconds and one that's essentially saying don't hold it at all and with",
    "start": "3193120",
    "end": "3198430"
  },
  {
    "text": "that on essentially I will return the correct cache control headers when I'm cold which are picked up by nginx which",
    "start": "3198430",
    "end": "3205360"
  },
  {
    "text": "then essentially will basically serve those results from the cache that we just saw okay make sense slides whatever",
    "start": "3205360",
    "end": "3219670"
  },
  {
    "text": "time great okay",
    "start": "3219670",
    "end": "3222569"
  },
  {
    "text": "let me show you a little bouncing",
    "start": "3225210",
    "end": "3230059"
  },
  {
    "start": "3229000",
    "end": "3600000"
  },
  {
    "text": "okay so the other thing which we showed we kind of leave it at the beginning was well I may want to do essentially is",
    "start": "3232100",
    "end": "3237960"
  },
  {
    "text": "behind my proxy not just have the one application server but the one instance of my application what I may want to do",
    "start": "3237960",
    "end": "3242970"
  },
  {
    "text": "is have multiple instances of my application and so that's where",
    "start": "3242970",
    "end": "3249240"
  },
  {
    "text": "effectively we come to this upstream directive so we defined by see this block called upstream and an upstream we",
    "start": "3249240",
    "end": "3255300"
  },
  {
    "text": "basically put either the IP address listing them one by one of every app of",
    "start": "3255300",
    "end": "3260310"
  },
  {
    "text": "every application server that we have or essentially were using something that can be picked up by basically domain",
    "start": "3260310",
    "end": "3266070"
  },
  {
    "text": "name servers to say okay go away and find me basically that particular app",
    "start": "3266070",
    "end": "3271890"
  },
  {
    "text": "server and I will then push request to that collection map service and you can",
    "start": "3271890",
    "end": "3277080"
  },
  {
    "text": "generally it defaults to round-robin but you can use a vote you can set a variety of ways in which nginx will",
    "start": "3277080",
    "end": "3283020"
  },
  {
    "text": "basically talk to that pool so you can say things like basically lease connection etc okay I won't show you",
    "start": "3283020",
    "end": "3288210"
  },
  {
    "text": "today but you can basically use health checks there as well to determine which servers basically are viable just about",
    "start": "3288210",
    "end": "3293820"
  },
  {
    "text": "to load balance across T okay let me just stop this one okay and I'm going to",
    "start": "3293820",
    "end": "3305070"
  },
  {
    "text": "move to use this one I think so I can",
    "start": "3305070",
    "end": "3312540"
  },
  {
    "text": "show you that okay so in its nginx calm",
    "start": "3312540",
    "end": "3318630"
  },
  {
    "text": "file you're gonna find essentially you don't I need to rebuild that you just do",
    "start": "3318630",
    "end": "3324020"
  },
  {
    "text": "I've got a little trick here so the resolver here and the set upstream so",
    "start": "3325340",
    "end": "3330480"
  },
  {
    "text": "resolvers basically saying to engineers well where should you go to find the names you don't have to do this all the time but this is a trick for Dhaka and",
    "start": "3330480",
    "end": "3336960"
  },
  {
    "text": "this essentially the address refers to basically Dockers internal domain name server that it's built basically to use",
    "start": "3336960",
    "end": "3342780"
  },
  {
    "text": "of that network and what this means is that as you add new containers in because I've got a variable that gets",
    "start": "3342780",
    "end": "3348720"
  },
  {
    "text": "evaluated at run time set upstream here it will always go to the resolver and say well what service do you have",
    "start": "3348720",
    "end": "3354060"
  },
  {
    "text": "available in order to resolve that request okay otherwise you may find that docker where were some doctor winners",
    "start": "3354060",
    "end": "3359430"
  },
  {
    "text": "and doctor for Mac when you add a new container it automatically knows you don't to do this but he's a docker",
    "start": "3359430",
    "end": "3364680"
  },
  {
    "text": "toolbox to do this because it doesn't pick up the fact the better than you container otherwise alternatively you can just use",
    "start": "3364680",
    "end": "3370890"
  },
  {
    "text": "an upstream group to do this as you saw in the slide deck okay now what I'm gonna do is do docker compose app but",
    "start": "3370890",
    "end": "3378930"
  },
  {
    "text": "I'm going to add a scale parameter so",
    "start": "3378930",
    "end": "3386340"
  },
  {
    "text": "now docker compose I want three instances on my web app hang on the site they will clear this screen so you guys",
    "start": "3386340",
    "end": "3392430"
  },
  {
    "text": "can see that at the back",
    "start": "3392430",
    "end": "3395869"
  },
  {
    "text": "so Saint bring up three inches of my web server when I built that what I'm gonna",
    "start": "3407890",
    "end": "3416090"
  },
  {
    "text": "do is then run the same sonars been running all along basically to follow",
    "start": "3416090",
    "end": "3422030"
  },
  {
    "text": "HTTP but what we're gonna do is see which web servers handle those requests",
    "start": "3422030",
    "end": "3428710"
  },
  {
    "text": "well I just seen that to run because running close towards end of time all right so a couple things I haven't I",
    "start": "3429880",
    "end": "3435080"
  },
  {
    "text": "haven't shown you you can do your writing I don't have time to show you yet show you that today essentially it's",
    "start": "3435080",
    "end": "3440210"
  },
  {
    "text": "a regular expression based and essentially you can say I'm going to take this location when I get the result",
    "start": "3440210",
    "end": "3445970"
  },
  {
    "text": "into this match send it to basically this address instead right so you saw those we had external blocks and",
    "start": "3445970",
    "end": "3451880"
  },
  {
    "text": "internal blocks from the location so if I match location essentially with external block I can then say well",
    "start": "3451880",
    "end": "3458120"
  },
  {
    "text": "they're sent to this internal address in other words effectively rewriting that URL to be posted elsewhere okay so if",
    "start": "3458120",
    "end": "3464060"
  },
  {
    "text": "you direct expressions to pick out parts of that given URI and repass them through to another uri health checks we",
    "start": "3464060",
    "end": "3471740"
  },
  {
    "text": "haven't talked about monitoring is the other thing you can do a lot to actually monitor and the debug locks are pretty",
    "start": "3471740",
    "end": "3477500"
  },
  {
    "text": "comprehensive and we turn them on they're very handy particularly for doing things like URL rewriting and you want to understand why isn't it working",
    "start": "3477500",
    "end": "3484160"
  },
  {
    "text": "it will tell you basically what process is using to try and match the URL you've",
    "start": "3484160",
    "end": "3489290"
  },
  {
    "text": "generated against stuff okay this is inordinately slow for some reason that I",
    "start": "3489290",
    "end": "3496400"
  },
  {
    "text": "don't understand which is worrying what are you being so slow that time alright",
    "start": "3496400",
    "end": "3503570"
  },
  {
    "text": "let me just show you a couple of slides while that filters through I don't think",
    "start": "3503570",
    "end": "3512240"
  },
  {
    "text": "I have time to do SSL so surly straightforward you just basically generate certificate I need to tell",
    "start": "3512240",
    "end": "3518360"
  },
  {
    "text": "basically nginx where that certificate lives and it will do as a cell for you right it's very straightforward you just",
    "start": "3518360",
    "end": "3523970"
  },
  {
    "text": "had enter a reverse proxy I do not know why this is taking so long to bring up three web servers it never takes this",
    "start": "3523970",
    "end": "3530210"
  },
  {
    "text": "long he said the demo gods have decided to hate me well there we go",
    "start": "3530210",
    "end": "3537030"
  },
  {
    "text": "okay great so you can see I've got some color coding there and I've got basically at least two web servers if",
    "start": "3537030",
    "end": "3542640"
  },
  {
    "text": "seem to have appeared no I happens web server number three let's figure that out later when I send this request what you'll see is",
    "start": "3542640",
    "end": "3551640"
  },
  {
    "text": "essentially that was served by web 2 and",
    "start": "3551640",
    "end": "3558510"
  },
  {
    "text": "then if we do it again a few times hopefully what we'll see is that",
    "start": "3558510",
    "end": "3563780"
  },
  {
    "text": "eventually we said enough times to see different yeah so you can see in the color coding different web servers are",
    "start": "3563780",
    "end": "3570480"
  },
  {
    "text": "now responding to that request so have essentially load-balanced across that collection of web service that we set up",
    "start": "3570480",
    "end": "3576810"
  },
  {
    "text": "all right well I'll also just show you is if you're not on docker toolbox",
    "start": "3576810",
    "end": "3589050"
  },
  {
    "text": "the simplest syntax for this is just to",
    "start": "3589050",
    "end": "3595110"
  },
  {
    "text": "use this upstream group right so it",
    "start": "3595110",
    "end": "3600690"
  },
  {
    "text": "figures out that basically web is saying look in the DNS for something called web so there'll be a greetings where one or",
    "start": "3600690",
    "end": "3606750"
  },
  {
    "text": "get to it that's how they see docker crates them and it will find one of those round-robin to basically on port 5000 all right I have two slides more to",
    "start": "3606750",
    "end": "3621180"
  },
  {
    "text": "show you I am probably slightly over time apologies right so I'm fine to me",
    "start": "3621180",
    "end": "3629100"
  },
  {
    "text": "I've got some other but there's some bits of demos like if you if you're desperate to see it come and follow me and I will sit down at table together",
    "start": "3629100",
    "end": "3634440"
  },
  {
    "text": "and I'll show you things like I've got an SSL demo and are you are re writing down where you can see so that's really",
    "start": "3634440",
    "end": "3639750"
  },
  {
    "text": "important to you just find me during the day and we'll sit down at a table together and our charity or questions or",
    "start": "3639750",
    "end": "3645750"
  },
  {
    "text": "things didn't show you today we didn't share the build from source that's something you're probably gonna want to do when you want to harden the nginx",
    "start": "3645750",
    "end": "3652020"
  },
  {
    "text": "using fuel production servers we didn't show you health checks which are useful essentially where things like load",
    "start": "3652020",
    "end": "3657660"
  },
  {
    "text": "balancing you effectively define a health check endpoint or a page essentially for your app server and say",
    "start": "3657660",
    "end": "3663930"
  },
  {
    "text": "talk to this to determine whether or not effectively that that web server is viable for you read to it",
    "start": "3663930",
    "end": "3669900"
  },
  {
    "text": "we showed you what every talkback include speak to break up the configuration file take a whole section like for example the gzip compression",
    "start": "3669900",
    "end": "3676720"
  },
  {
    "text": "section put it in a gzip confident just to include gzip comp in your master helps clean your files up make them",
    "start": "3676720",
    "end": "3683079"
  },
  {
    "text": "easier to read and it lets you reuse standard configuration elements in your organization we didn't show you passing",
    "start": "3683079",
    "end": "3689500"
  },
  {
    "text": "through requests to register memcached but you can do that you can essentially say serve this thing at our Edison",
    "start": "3689500",
    "end": "3695079"
  },
  {
    "text": "memcached right and we didn't show you how to do monitoring it comes with a lot of options monitoring and there's also",
    "start": "3695079",
    "end": "3701200"
  },
  {
    "text": "basically commercials and go to nginx Plus which is the nginx incorporate to do and they have our whole range of",
    "start": "3701200",
    "end": "3706540"
  },
  {
    "text": "commercial tools built-in type of nginx for things we have talking about monitoring and also using this in a",
    "start": "3706540",
    "end": "3712839"
  },
  {
    "text": "micro services environment as a proxy for a micro cells which is nginx a human I think all right thank you don't forget",
    "start": "3712839",
    "end": "3721359"
  },
  {
    "text": "to vote on the way out feedback is very helpful thank you for coming and I appreciate you can tell you came to see",
    "start": "3721359",
    "end": "3727240"
  },
  {
    "text": "me and not Scott building Q medicine Raspberry Pi I thought might have nobody hopefully that gave you some idea of why",
    "start": "3727240",
    "end": "3735220"
  },
  {
    "text": "you what nginx does how you use it why you might want to it's a there's a bit",
    "start": "3735220",
    "end": "3741099"
  },
  {
    "text": "of a learning curve to it start simple right just start doing by saying here's my website what I want to do is stick a",
    "start": "3741099",
    "end": "3747180"
  },
  {
    "text": "proxy just to pass straight through to it in front and then I would and then build up more and more at a time that's",
    "start": "3747180",
    "end": "3752319"
  },
  {
    "text": "the way I would do it because you will find things go wrong and investigate how",
    "start": "3752319",
    "end": "3758470"
  },
  {
    "text": "you basically which you saw the line once but you pretty much don't remember how you put in an error log with debug",
    "start": "3758470",
    "end": "3763660"
  },
  {
    "text": "on it and you can start a debug version docker comes with a pre-built nginx debug you can use which will let you",
    "start": "3763660",
    "end": "3770410"
  },
  {
    "text": "essentially build debug output and that helps you trace things that you are already writing and get your",
    "start": "3770410",
    "end": "3775690"
  },
  {
    "text": "configuration file right it doesn't come with an engine it's debug if you want Energex debug deployed actually to you",
    "start": "3775690",
    "end": "3783280"
  },
  {
    "text": "know an on docker environment you have to build it yourself unfortunately okay thanks very much",
    "start": "3783280",
    "end": "3788810"
  },
  {
    "text": "[Applause]",
    "start": "3788810",
    "end": "3795860"
  }
]