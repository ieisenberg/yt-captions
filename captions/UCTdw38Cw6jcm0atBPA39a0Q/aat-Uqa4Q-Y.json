[
  {
    "start": "0",
    "end": "60000"
  },
  {
    "text": "all right so hopefully you're all here because uh your kubernetes clusters are ridiculously insecure",
    "start": "60",
    "end": "6839"
  },
  {
    "text": "um and I'm going to try and help you to fix that right in the next hour so",
    "start": "6839",
    "end": "13799"
  },
  {
    "text": "firstly I want to introduce myself my name is Steve Wade I'm uh director of engineering at a company called k-stock",
    "start": "13799",
    "end": "19260"
  },
  {
    "text": "Labs we do kubernetes security uh I've contributed to a number of Upstream",
    "start": "19260",
    "end": "24539"
  },
  {
    "text": "projects maybe some of these you've heard of maybe some of these you haven't uh I was running kubernetes in production at 1.2 uh for any of you who",
    "start": "24539",
    "end": "32880"
  },
  {
    "text": "are familiar with a release that old deployments weren't a thing at that point uh Jimmy beats me he actually was",
    "start": "32880",
    "end": "39600"
  },
  {
    "text": "running it at 0.8 Jimmy's my boss um I actually played professional football until I was 18 and then I had a",
    "start": "39600",
    "end": "47700"
  },
  {
    "text": "bad injury and now I'm up here doing this and I blog a lot about the things that we're currently working on from a",
    "start": "47700",
    "end": "53579"
  },
  {
    "text": "security standpoint but also from a platform engineering and uh you know self-service delivery to Developers",
    "start": "53579",
    "end": "61500"
  },
  {
    "start": "60000",
    "end": "225000"
  },
  {
    "text": "so I want to start with a question how secure is your kubernetes cluster",
    "start": "61500",
    "end": "67820"
  },
  {
    "text": "you're going with average good all right most people say this nothing to say here",
    "start": "68340",
    "end": "74700"
  },
  {
    "text": "move along you know who cares about security uh you know my application developers can deploy 20 100 times a day",
    "start": "74700",
    "end": "81900"
  },
  {
    "text": "that they forget all of this other major ecosystem with inside kubernetes",
    "start": "81900",
    "end": "87479"
  },
  {
    "text": "so we're here to talk about oh wasp and kubernetes and you know there's a collaboration an effort that's been",
    "start": "87479",
    "end": "94080"
  },
  {
    "text": "going on between our wasp and kubernetes now for just under a year there's some links here the top one is the actual uh",
    "start": "94080",
    "end": "101640"
  },
  {
    "text": "top 10 for kubernetes that we're going to spend most of our time talking about but there's also others here from a Docker perspective a nice cheat sheet",
    "start": "101640",
    "end": "108180"
  },
  {
    "text": "there and also uh kubernetes security cheat sheet as well",
    "start": "108180",
    "end": "113700"
  },
  {
    "text": "this is the beautiful repository on the iOS organization on GitHub that contains the top 10 and what we're going to do",
    "start": "113700",
    "end": "120240"
  },
  {
    "text": "today is we're going to digest that top 10 and go into them in a bit more detail",
    "start": "120240",
    "end": "125520"
  },
  {
    "text": "so yes unfortunately it's it's another top ten uh there's many of these top tens around however kubernetes now is",
    "start": "125520",
    "end": "132780"
  },
  {
    "text": "starting to become very mature right there's a lot of companies running it and if you were here earlier to hear",
    "start": "132780",
    "end": "138900"
  },
  {
    "text": "Jimmy's talk about untangling our back you'll notice and remember he was saying you know they were running kubernetes in",
    "start": "138900",
    "end": "145620"
  },
  {
    "text": "rocks right to to um review and look at weather conditions",
    "start": "145620",
    "end": "151140"
  },
  {
    "text": "but also to uh to hear what other people are saying in the desert another interesting example is a company called",
    "start": "151140",
    "end": "157860"
  },
  {
    "text": "Chick-fil-A I don't know hands up if you're familiar with Chick-fil-A it's an it's an American chicken shop",
    "start": "157860",
    "end": "164519"
  },
  {
    "text": "I'm probably saying that incorrectly and Jimmy's going to kill me um but essentially they run kubernetes in every single one of their stores",
    "start": "164519",
    "end": "170580"
  },
  {
    "text": "right so they have a little miniature cluster that they run and they half of their restaurant functions from messages",
    "start": "170580",
    "end": "177540"
  },
  {
    "text": "flowing in and out of this kubernetes uh this local kubernetes cluster so kubernetes is everywhere right but",
    "start": "177540",
    "end": "185160"
  },
  {
    "text": "it's such a complex ecosystem that people focus on the ability and ease to",
    "start": "185160",
    "end": "190920"
  },
  {
    "text": "be able to deploy their applications right that's why kubernetes is so successful it makes it easy for you to be able to deploy applications into your",
    "start": "190920",
    "end": "197400"
  },
  {
    "text": "kubernetes cluster and scale them quickly and easily but you know that at",
    "start": "197400",
    "end": "202620"
  },
  {
    "text": "scale there are a lot of security concerns and things to consider and that's what we're going to discuss today",
    "start": "202620",
    "end": "208980"
  },
  {
    "text": "so here is the beautiful top 10 uh I was for kubernetes so all the way starting",
    "start": "208980",
    "end": "214019"
  },
  {
    "text": "at the top with workload configurations and kind of ending at the bottom uh yes some of the kubernetes components may be",
    "start": "214019",
    "end": "220019"
  },
  {
    "text": "insecure and we'll get into that as well don't just trust everything you know that you pull off the internet",
    "start": "220019",
    "end": "226080"
  },
  {
    "start": "225000",
    "end": "502000"
  },
  {
    "text": "so we're going to start with insecure workload configurations and unfortunately there is some yaml in this",
    "start": "226080",
    "end": "232739"
  },
  {
    "text": "talk I apologize uh but that's just the world we're living with kubernetes everything's yaml right everyone becomes",
    "start": "232739",
    "end": "238980"
  },
  {
    "text": "a yaml engineer so I'm going to start with this quote misconfigurations Top of the chart when",
    "start": "238980",
    "end": "245280"
  },
  {
    "text": "it comes to security issues in 2021 the kubernetes security survey from uh red",
    "start": "245280",
    "end": "252120"
  },
  {
    "text": "hat stated that 60 of residents have experienced a misconfiguration incident",
    "start": "252120",
    "end": "257459"
  },
  {
    "text": "in the kubernetes cluster in the last 12 months 60 of a lot of people that are",
    "start": "257459",
    "end": "262620"
  },
  {
    "text": "running kubernetes probably a pretty big problem right the reason why it's number one so",
    "start": "262620",
    "end": "269040"
  },
  {
    "text": "if anyone is familiar with the kubernetes templating language and the ammo in general you end up with manifest",
    "start": "269040",
    "end": "275280"
  },
  {
    "text": "files that could be 100 150 200 if you're running istio that number goes to about ten thousand uh lines of yaml and",
    "start": "275280",
    "end": "283320"
  },
  {
    "text": "it's extremely easy to miss the key parts of the yaml Manifest because you're so focused on the bit that's very",
    "start": "283320",
    "end": "290759"
  },
  {
    "text": "specific to your application so how can we prevent it well there are",
    "start": "290759",
    "end": "295919"
  },
  {
    "text": "a number of sections within a kubernetes manifest where we can start to secure",
    "start": "295919",
    "end": "301800"
  },
  {
    "text": "things so the prime example here is that we have a block called the security context this is the context that",
    "start": "301800",
    "end": "308580"
  },
  {
    "text": "everyone forgets about and if you're in the training that Jimmy and I did for the last two days we spent quite a lot",
    "start": "308580",
    "end": "313919"
  },
  {
    "text": "of time talking about this security context so the kind of things that we can do is we can make sure that you're",
    "start": "313919",
    "end": "319860"
  },
  {
    "text": "not running as a root so you know running his route pretty bad and we'll get into the reasons for that",
    "start": "319860",
    "end": "325080"
  },
  {
    "text": "later we can also make sure that we have a read-only root file system right we",
    "start": "325080",
    "end": "330419"
  },
  {
    "text": "don't want if I manage to get inside your pod you know if I can start to pull binaries",
    "start": "330419",
    "end": "335639"
  },
  {
    "text": "down to the root file system you know I can start to run them I could be doing anything I could be bit Bitcoin mining uh or I could be",
    "start": "335639",
    "end": "342539"
  },
  {
    "text": "making random requests to uh to erroneous websites and there are a number of other security",
    "start": "342539",
    "end": "348479"
  },
  {
    "text": "contexts that are available to you that stop you from having insecure",
    "start": "348479",
    "end": "354840"
  },
  {
    "text": "Docker containers or images and running them in an insecure Way new kubernetes Foster right and the way I talk about",
    "start": "354840",
    "end": "361919"
  },
  {
    "text": "kubernetes is it kind of Blends and forces developers and operators to have to talk to each other right so the",
    "start": "361919",
    "end": "367500"
  },
  {
    "text": "developer is responsible for their image and maybe or maybe not the developer is not responsible for the configuration of",
    "start": "367500",
    "end": "374100"
  },
  {
    "text": "their kubernetes cluster or their manifest that they're currently deploying to kubernetes and this is where we can start to set",
    "start": "374100",
    "end": "379919"
  },
  {
    "text": "some standards right so in a previous life I spent a lot of time uh working as",
    "start": "379919",
    "end": "385380"
  },
  {
    "text": "a platform engineer building self-service tooling for developers this security context kind of becomes a",
    "start": "385380",
    "end": "390960"
  },
  {
    "text": "contract between you and the application team so I'm we're going to set some standards we're going to allow you to be",
    "start": "390960",
    "end": "396180"
  },
  {
    "text": "able to do certain things and essentially if you do not conform to them we're not going to allow you in right security context is key to be able",
    "start": "396180",
    "end": "403500"
  },
  {
    "text": "to do that so what tools do we have to offer right",
    "start": "403500",
    "end": "408720"
  },
  {
    "text": "because that's a that's a load of yaml there's a load of different key value pairs that I have to try and remember and figure out so there's a tool",
    "start": "408720",
    "end": "415380"
  },
  {
    "text": "uh called Opa gatekeeper and up if you're familiar with the term IPA gatekeeper okay a number of you so",
    "start": "415380",
    "end": "422520"
  },
  {
    "text": "its job is to stop bad things getting into your kubernetes cluster and the way",
    "start": "422520",
    "end": "427680"
  },
  {
    "text": "you do that is you enforce policy so we say if a deployment enters into the",
    "start": "427680",
    "end": "433680"
  },
  {
    "text": "kubernetes cluster so the request here is coming from somebody on their laptop the first thing that it touches is the API server and there is where we start",
    "start": "433680",
    "end": "440699"
  },
  {
    "text": "to enforce policy so we can say things such as are you running as a group if you are",
    "start": "440699",
    "end": "445800"
  },
  {
    "text": "and you're still running as root in your kubernetes manifest reject the deployment or specify the user and group",
    "start": "445800",
    "end": "452639"
  },
  {
    "text": "that you want to run with inside your um your pod if that's not set or it's set too high or it's not set to the one that",
    "start": "452639",
    "end": "459300"
  },
  {
    "text": "you you want it to be set to then also reject that deployment as well right so this kind of becomes the gatekeeper",
    "start": "459300",
    "end": "465539"
  },
  {
    "text": "hence the term uh for entry into the kubernetes cluster right and at scale when you're dealing",
    "start": "465539",
    "end": "472259"
  },
  {
    "text": "with potentially hundreds maybe thousands of different product teams this is the way that we can start to",
    "start": "472259",
    "end": "478020"
  },
  {
    "text": "enforce standards in our kubernetes cluster right if we allow everybody to go Rogue and developers to be deploying",
    "start": "478020",
    "end": "484919"
  },
  {
    "text": "uh applications that are having completely different configurations we start to get",
    "start": "484919",
    "end": "491460"
  },
  {
    "text": "in the consistency when we get into consistency we start to get problems so this is just a tool that is available",
    "start": "491460",
    "end": "498120"
  },
  {
    "text": "to you at your disposal for you to start to set some standards next one number two is supply chain",
    "start": "498120",
    "end": "506160"
  },
  {
    "start": "502000",
    "end": "809000"
  },
  {
    "text": "vulnerabilities so a single container as I put here you know has hundreds of",
    "start": "506160",
    "end": "511860"
  },
  {
    "text": "different third-party components and we pull images off the internet",
    "start": "511860",
    "end": "517200"
  },
  {
    "text": "right everyone everyone's done that before I've done it hundreds of times and we just assume they're secure right",
    "start": "517200",
    "end": "523860"
  },
  {
    "text": "and even ones that I pull from my own registry or a registry that I think is",
    "start": "523860",
    "end": "529019"
  },
  {
    "text": "um you know secure it may not be so as an example the first",
    "start": "529019",
    "end": "535260"
  },
  {
    "text": "five to ten most pulled Docker images on Docker Hub they all have cves right as an example",
    "start": "535260",
    "end": "542160"
  },
  {
    "text": "so we need a way of being able to make sure that the things that we're running",
    "start": "542160",
    "end": "547320"
  },
  {
    "text": "inside our kubernetes cluster are actually validated somehow right we don't want CVS entering our system we",
    "start": "547320",
    "end": "552720"
  },
  {
    "text": "also want to make sure that where we're pulling those images from are actually the images that we created right so just",
    "start": "552720",
    "end": "560880"
  },
  {
    "text": "because I uploaded an image to my registry and I tagged it as 1.2.3 it doesn't mean a week later that 1.2.3 is",
    "start": "560880",
    "end": "568019"
  },
  {
    "text": "the image that I created right because those tags are uh ephemeral I can I can upload a new image with exactly the same",
    "start": "568019",
    "end": "575339"
  },
  {
    "text": "tag and overwrite the previous one so the next person pulls the image down they're running a Bitcoin miner rather",
    "start": "575339",
    "end": "581100"
  },
  {
    "text": "than running my application so what can we do to prevent this we can",
    "start": "581100",
    "end": "587279"
  },
  {
    "text": "perform a software bill of materials so if you're familiar with kubernetes in 2022 and 2023 this is the biggest",
    "start": "587279",
    "end": "593640"
  },
  {
    "text": "buzzword going in supply chain Security in kubernetes so an s-bomb essentially defines",
    "start": "593640",
    "end": "599399"
  },
  {
    "text": "a file that states all of the components that make up your build hence the term",
    "start": "599399",
    "end": "604980"
  },
  {
    "text": "bill of materials you can also sign your images so",
    "start": "604980",
    "end": "610260"
  },
  {
    "text": "we can sign them upload them to the registry with a signature and then when we pull them down we can validate that",
    "start": "610260",
    "end": "616560"
  },
  {
    "text": "signature therefore knowing that what I actually uploaded to the registry is what I expect when I pull the when I",
    "start": "616560",
    "end": "622140"
  },
  {
    "text": "pull the image down image composition so hands up if you're currently running",
    "start": "622140",
    "end": "629339"
  },
  {
    "text": "Docker in production in some form okay keep your hands up if you're using an image such as Ubuntu as your base",
    "start": "629339",
    "end": "636660"
  },
  {
    "text": "image or uh Debian or Centos",
    "start": "636660",
    "end": "642420"
  },
  {
    "text": "okay so have you seen how many vulnerabilities those have just on their own right there's a load of vulnerabilities do you truly need a",
    "start": "642420",
    "end": "649440"
  },
  {
    "text": "Centos operating system to be able to run your binary probably not small web server now inside my inside my",
    "start": "649440",
    "end": "655860"
  },
  {
    "text": "pod I get inside my pod I have a fully fledged web server I can just go crazy right I've got curl I've got wget I've",
    "start": "655860",
    "end": "661560"
  },
  {
    "text": "got everything by default so when we talk about image composition I talk about the term just enough",
    "start": "661560",
    "end": "668220"
  },
  {
    "text": "just enough for my image to be able to run and nothing else right do I need",
    "start": "668220",
    "end": "673440"
  },
  {
    "text": "curl inside my application that is currently an API server no I probably don't there's a hacker yes he does or",
    "start": "673440",
    "end": "680040"
  },
  {
    "text": "yes she does so some operating systems or some images that I'd recommend if you're running a",
    "start": "680040",
    "end": "686940"
  },
  {
    "text": "statically compiled binary scratch right scratch is basically absolutely nothing right you can't do anything apart from",
    "start": "686940",
    "end": "692220"
  },
  {
    "text": "running your application or there's uh images such as uh distributors",
    "start": "692220",
    "end": "699180"
  },
  {
    "text": "destroyless is a much uh smaller uh Linux distribution that has again the",
    "start": "699180",
    "end": "706560"
  },
  {
    "text": "absolute bare minimum sometimes those base images are not going to work in your in your instance because you",
    "start": "706560",
    "end": "712440"
  },
  {
    "text": "require packages that can't run on these types of images so my starting point in that instance would be something like",
    "start": "712440",
    "end": "718380"
  },
  {
    "text": "Alpine right Alpine is extremely small Alpine for example out the box doesn't come with curl it does come with wget",
    "start": "718380",
    "end": "725040"
  },
  {
    "text": "which is you know questionable but at least it doesn't come with curl",
    "start": "725040",
    "end": "730160"
  },
  {
    "text": "so I would start I would start smaller and then go larger so I'd start with scratch shift scratch",
    "start": "733860",
    "end": "739620"
  },
  {
    "text": "doesn't work for my you know my application I'd move to distriblist doesn't work for my application I'd go",
    "start": "739620",
    "end": "744779"
  },
  {
    "text": "to Alpine for the stuff that we're currently doing at k-soc we're heavy users of of Kafka Kafka needs Liberty",
    "start": "744779",
    "end": "751560"
  },
  {
    "text": "Kafka which is a c binary so it kind of it already takes out scratch and",
    "start": "751560",
    "end": "756600"
  },
  {
    "text": "destroyless and we have to be we're forced to use Alpine right and then we then we embed the the package that we",
    "start": "756600",
    "end": "762300"
  },
  {
    "text": "require okay so for you for those of you who are using docker how many of you are",
    "start": "762300",
    "end": "768240"
  },
  {
    "text": "scanning your images okay how many of you have a policy to make sure that that image can't get into",
    "start": "768240",
    "end": "773820"
  },
  {
    "text": "production if it doesn't conform to some kind of standard all the hands go down so",
    "start": "773820",
    "end": "780779"
  },
  {
    "text": "what we need to make sure of is that we don't just do this as a tick box exercise right we actually use it and that's where policy enforcement comes in",
    "start": "780779",
    "end": "787019"
  },
  {
    "text": "so we can say okay on the entry door to kubernetes can you make sure that this",
    "start": "787019",
    "end": "792839"
  },
  {
    "text": "image doesn't have any critical cves and if it does kick it back right so gatekeeper and this uh open policy agent",
    "start": "792839",
    "end": "800459"
  },
  {
    "text": "starts to become a really powerful mechanism for us to be able to stop bad configuration or bad images from making",
    "start": "800459",
    "end": "807120"
  },
  {
    "text": "their way into kubernetes overly permissive R back configuration",
    "start": "807120",
    "end": "813180"
  },
  {
    "start": "809000",
    "end": "1167000"
  },
  {
    "text": "so for anyone that wasn't here this morning when Jimmy gave his talk about overly",
    "start": "813180",
    "end": "819360"
  },
  {
    "text": "permissive R back permissions um our back is a way that we can uh create",
    "start": "819360",
    "end": "825420"
  },
  {
    "text": "and allow for fine-grained access to your kubernetes cluster right so we can",
    "start": "825420",
    "end": "830459"
  },
  {
    "text": "say allow Steve to have access to the development namespace and allow someone",
    "start": "830459",
    "end": "836220"
  },
  {
    "text": "else to have access to the production namespace right no one ever trusts me to do anything in production",
    "start": "836220",
    "end": "842100"
  },
  {
    "text": "um however the arbuck ecosystem is so vast and it",
    "start": "842100",
    "end": "847139"
  },
  {
    "text": "can become extremely difficult to be able to work out who has access to what",
    "start": "847139",
    "end": "852720"
  },
  {
    "text": "who needs access to what and thirdly what one of my components that",
    "start": "852720",
    "end": "859380"
  },
  {
    "text": "I'm currently running in my cluster what access does it need right people forget that there's also",
    "start": "859380",
    "end": "865680"
  },
  {
    "text": "workloads that are inside kubernetes they can also have access to the kubernetes API it's not just humans",
    "start": "865680",
    "end": "871019"
  },
  {
    "text": "right there's the difference between humans and service accounts service accounts are workloads that you're",
    "start": "871019",
    "end": "877260"
  },
  {
    "text": "currently running within kubernetes that need access to the API server so a prime",
    "start": "877260",
    "end": "882360"
  },
  {
    "text": "example is a tool like a git Ops tool who is syncing the contents of the",
    "start": "882360",
    "end": "889860"
  },
  {
    "text": "cluster from a git repository into kubernetes and is then responsible for deploying it it needs to know what's",
    "start": "889860",
    "end": "896339"
  },
  {
    "text": "currently running in order to be able to make the decision of what it needs to apply to the kubernetes cluster",
    "start": "896339",
    "end": "902720"
  },
  {
    "text": "so here is an example there are there's four main kinds within the rbat",
    "start": "902880",
    "end": "908220"
  },
  {
    "text": "configuration inside kubernetes you've got roll and cluster role cluster role",
    "start": "908220",
    "end": "913740"
  },
  {
    "text": "is scopes at the cluster role is scoped a namespace and we'll come on to namespaces shortly and a role binding",
    "start": "913740",
    "end": "920940"
  },
  {
    "text": "and a cluster role binding and a binding binds a user that user could be a human",
    "start": "920940",
    "end": "927779"
  },
  {
    "text": "could be a group or it can also be a service account and it binds it to a cluster role or role",
    "start": "927779",
    "end": "935220"
  },
  {
    "text": "essentially what permissions does this have this block here is the first dangerous block so",
    "start": "935220",
    "end": "943199"
  },
  {
    "text": "cluster admin is one of the default cluster roles that is installed into the",
    "start": "943199",
    "end": "948420"
  },
  {
    "text": "kubernetes cluster and it provides you with what I call the five star review",
    "start": "948420",
    "end": "953579"
  },
  {
    "text": "right the five star review is not the review you actually want you actually want something like a one star review in",
    "start": "953579",
    "end": "958740"
  },
  {
    "text": "this instance what do I mean by five star review I mean every API version",
    "start": "958740",
    "end": "963779"
  },
  {
    "text": "every API version every kind every verb uh every non-resource and every URL so",
    "start": "963779",
    "end": "972120"
  },
  {
    "text": "essentially absolutely everything when you create a namespace inside of",
    "start": "972120",
    "end": "977220"
  },
  {
    "text": "kubernetes you get a default service account the default service account is added to",
    "start": "977220",
    "end": "983579"
  },
  {
    "text": "every single workload within your kubernetes cluster in that namespace if you don't specify a different service",
    "start": "983579",
    "end": "988980"
  },
  {
    "text": "account so every workload that we currently deploy using this configuration to the default namespace gets complete cluster",
    "start": "988980",
    "end": "995699"
  },
  {
    "text": "admin so if I can get into one of your pods I can install Cube CTL which is a binary that allows us to be able to",
    "start": "995699",
    "end": "1001699"
  },
  {
    "text": "interact with the kubernetes cluster I can essentially do anything list all your secrets start deploying random workloads start",
    "start": "1001699",
    "end": "1008600"
  },
  {
    "text": "deploying random jobs we don't want to be doing this",
    "start": "1008600",
    "end": "1013940"
  },
  {
    "text": "this is again taken from Jimmy's talk it essentially is saying that when I allow",
    "start": "1013940",
    "end": "1020540"
  },
  {
    "text": "you to be able to list secrets if I get inside of a pod that is currently running in kubernetes and I do",
    "start": "1020540",
    "end": "1026780"
  },
  {
    "text": "a call request the call request at the bottom you don't just get to list the secret as in like this is the secret name you",
    "start": "1026780",
    "end": "1033380"
  },
  {
    "text": "actually get the whole entire contents of the secret as well so be careful when you use the word list and watch in in a",
    "start": "1033380",
    "end": "1040880"
  },
  {
    "text": "curl instance it gives you much more data than you would expect right config Maps also does the same thing you can",
    "start": "1040880",
    "end": "1046938"
  },
  {
    "text": "get the data out of them so how do we prevent it so we should",
    "start": "1046939",
    "end": "1052400"
  },
  {
    "text": "prevent direct access uh from end users as much as possible",
    "start": "1052400",
    "end": "1058580"
  },
  {
    "text": "right if we can limit the scope of who has access to the kubernetes cluster it's going to make our life much much",
    "start": "1058580",
    "end": "1064160"
  },
  {
    "text": "easier right sometimes this is not possible but with tools such as uh githubs you don't need to be able to",
    "start": "1064160",
    "end": "1070820"
  },
  {
    "text": "allow some kind of centralized CI CD system access to your kubernetes cluster that thing will definitely need a",
    "start": "1070820",
    "end": "1076340"
  },
  {
    "text": "five-star review because you don't know what you're going to be deploying don't use service accounts outside of",
    "start": "1076340",
    "end": "1082340"
  },
  {
    "text": "the cluster so people do this regularly uh they never get rotated right they",
    "start": "1082340",
    "end": "1088580"
  },
  {
    "text": "just live forever and work forever so once you've got that service account token you're good to go right you can do",
    "start": "1088580",
    "end": "1094400"
  },
  {
    "text": "whatever you want third one is avoid Auto mounting that default service account token that we",
    "start": "1094400",
    "end": "1100760"
  },
  {
    "text": "currently just talked about one accidental slip there every single pod in your namespace you know has terrible",
    "start": "1100760",
    "end": "1106460"
  },
  {
    "text": "access fourth one down audit are back so",
    "start": "1106460",
    "end": "1112940"
  },
  {
    "text": "kubernetes is really uh verbose in the way it presents audit logs from your",
    "start": "1112940",
    "end": "1118700"
  },
  {
    "text": "kubernetes cluster you can leverage those logs and not a lot of people actually leverage them to be able to",
    "start": "1118700",
    "end": "1124100"
  },
  {
    "text": "tell you what is going on in your kubernetes cluster and what people actually use not what people think they",
    "start": "1124100",
    "end": "1129500"
  },
  {
    "text": "need to use right so as a prime example one of the things that I'd recommend you start doing is locking down your R back",
    "start": "1129500",
    "end": "1136160"
  },
  {
    "text": "and having annoying conversations with developers because they want more rbac and then there's a little collaboration",
    "start": "1136160",
    "end": "1141919"
  },
  {
    "text": "between the two of you and then you agree on probably something in the middle and then you can figure their art back like that right rather than just",
    "start": "1141919",
    "end": "1148280"
  },
  {
    "text": "giving them everything and then finding out they only use a small Slither of it and finally to use role bindings rather",
    "start": "1148280",
    "end": "1156440"
  },
  {
    "text": "than cluster role bindings right cluster role bindings can be really dangerous I don't need to be able to see like seven",
    "start": "1156440",
    "end": "1162080"
  },
  {
    "text": "other product teams namespaces and be able to interact with them I only care about the one that I'm currently running in",
    "start": "1162080",
    "end": "1168820"
  },
  {
    "start": "1167000",
    "end": "1299000"
  },
  {
    "text": "lack of centralized policy enforcement so we kind of talked about this before but now what we were talking about",
    "start": "1169580",
    "end": "1175700"
  },
  {
    "text": "previously was one cluster now imagine like 10 or 15 or 20 clusters right how",
    "start": "1175700",
    "end": "1180740"
  },
  {
    "text": "do we make sure that we've got consistency in what's getting deployed to those 20 clusters",
    "start": "1180740",
    "end": "1187700"
  },
  {
    "text": "the team that's responsible for managing kubernetes may be relatively small in comparison to the number of developers that you currently have in your",
    "start": "1187700",
    "end": "1193340"
  },
  {
    "text": "organization so we need a way of being able to firstly detect there's a problem",
    "start": "1193340",
    "end": "1199039"
  },
  {
    "text": "and secondly remediate that problem right as quickly as we possibly can consistency is key when it comes to",
    "start": "1199039",
    "end": "1204440"
  },
  {
    "text": "kubernetes and we're going to get onto that at the end and there are ways to be able to start",
    "start": "1204440",
    "end": "1209960"
  },
  {
    "text": "to drive consistency a prime example so let's imagine we have",
    "start": "1209960",
    "end": "1216260"
  },
  {
    "text": "all the policies that we've added to gatekeeper and we don't allow people to run images that are off the internet we",
    "start": "1216260",
    "end": "1222679"
  },
  {
    "text": "make sure that they have good security contexts with this single command here that I think it's leak because it fits",
    "start": "1222679",
    "end": "1229100"
  },
  {
    "text": "in a tweet which is just incredible um you are essentially running a pod in",
    "start": "1229100",
    "end": "1234799"
  },
  {
    "text": "the kubernetes cluster so that's the first line adding a set of overrides so uh host",
    "start": "1234799",
    "end": "1241340"
  },
  {
    "text": "appeared true basically means now I've got access to the pids that are currently running on the underlying host",
    "start": "1241340",
    "end": "1247160"
  },
  {
    "text": "I run an Alpine container I then mount mount",
    "start": "1247160",
    "end": "1252620"
  },
  {
    "text": "if I switch the namespace and now I've essentially done a total container Breakout from a pod that is running in my",
    "start": "1252620",
    "end": "1259640"
  },
  {
    "text": "kubernetes cluster and see where it says restart never as soon as as soon as uh Duffy exited",
    "start": "1259640",
    "end": "1266660"
  },
  {
    "text": "that party you'd never see it again right so they can it runs for the life cycle of the time that pods up he could",
    "start": "1266660",
    "end": "1273320"
  },
  {
    "text": "do whatever he wanted he removes that we can no longer see it right it's kind of it's blind to us",
    "start": "1273320",
    "end": "1280640"
  },
  {
    "text": "so a number of tools that we can use to prevent this at scale we kind of touched a little bit on open policy agent with",
    "start": "1280640",
    "end": "1286940"
  },
  {
    "text": "with gatekeeper but there are others available to us you can use cubeboard and okavono they're essentially doing",
    "start": "1286940",
    "end": "1292039"
  },
  {
    "text": "the same kind of thing they're enforcing policies at the API level that's what",
    "start": "1292039",
    "end": "1297080"
  },
  {
    "text": "they're responsible for inadequate logging and monitoring so",
    "start": "1297080",
    "end": "1303740"
  },
  {
    "start": "1299000",
    "end": "1476000"
  },
  {
    "text": "kubernetes like as a system logs a lot right but so do your applications",
    "start": "1303740",
    "end": "1310760"
  },
  {
    "text": "so do things that are communicating with kubernetes kubernetes works on an event stream there's thousands and thousands",
    "start": "1310760",
    "end": "1317480"
  },
  {
    "text": "of events that are going on like all the time within kubernetes kubernetes is basically just a giant reconcile Loop",
    "start": "1317480",
    "end": "1323360"
  },
  {
    "text": "that continuously works but we don't use the logs enough or we don't",
    "start": "1323360",
    "end": "1331700"
  },
  {
    "text": "store them in a centralized location in order for us to really truly understand what's going on",
    "start": "1331700",
    "end": "1337640"
  },
  {
    "text": "so what can we do to prevent this right we can start reviewing the kubernetes audit logs like we were talking about",
    "start": "1337640",
    "end": "1342740"
  },
  {
    "text": "before like you know Jane is trying to access a secret and keeps getting denied",
    "start": "1342740",
    "end": "1348559"
  },
  {
    "text": "or if James constantly keeps trying to access a secret from an IP address that you don't you don't recognize it's",
    "start": "1348559",
    "end": "1354559"
  },
  {
    "text": "probably not a great thing or Jenkins is currently trying to you know list all of",
    "start": "1354559",
    "end": "1360620"
  },
  {
    "text": "the secrets in name any random namespace uh from the outside world from a",
    "start": "1360620",
    "end": "1366620"
  },
  {
    "text": "publicly accessible IP address well if Jenkins is running inside your cluster and the IP address is outside your",
    "start": "1366620",
    "end": "1372380"
  },
  {
    "text": "cluster someone's trying to get in from the outside right it's so rich the kubernetes audit logs",
    "start": "1372380",
    "end": "1378919"
  },
  {
    "text": "if you're not looking at them you're really losing a lot of context about what's going on in your kubernetes cluster",
    "start": "1378919",
    "end": "1385460"
  },
  {
    "text": "now we've got those Vlogs we kind of need to centralize all of the logs together so we've got kind of event logs",
    "start": "1385460",
    "end": "1391159"
  },
  {
    "text": "we've got the logs that are coming from your container application we've got Cloud logs like who's",
    "start": "1391159",
    "end": "1396799"
  },
  {
    "text": "accessing what with cloudtrail or Cloud watch um you know who's accessing your load balancer etc etc or like traces that are",
    "start": "1396799",
    "end": "1404360"
  },
  {
    "text": "going all the way through your system right and once we collate these all together it allows us to be able to tell",
    "start": "1404360",
    "end": "1409640"
  },
  {
    "text": "a good overall holistic picture of what on Earth's going on right there's thousands hundreds or thousands of",
    "start": "1409640",
    "end": "1415520"
  },
  {
    "text": "workloads potentially that are running in your kubernetes cluster and you need to try and plot the story of what's going on",
    "start": "1415520",
    "end": "1422480"
  },
  {
    "text": "the other thing that people seem to miss as well is this runtime detection piece so using tools such as Falco which",
    "start": "1422480",
    "end": "1429080"
  },
  {
    "text": "essentially is a way of us being able to say okay what process is currently",
    "start": "1429080",
    "end": "1434360"
  },
  {
    "text": "running you know what is that process trying to do and if you remember if I go back you know a couple of slides when I",
    "start": "1434360",
    "end": "1441080"
  },
  {
    "text": "was talking about setting standardized user IDs and group IDs I could write a rule in Falco that says",
    "start": "1441080",
    "end": "1448940"
  },
  {
    "text": "if I have any process in this namespace that's not running as this user and this",
    "start": "1448940",
    "end": "1454220"
  },
  {
    "text": "group why like what's going on like put my attention there right with you",
    "start": "1454220",
    "end": "1460940"
  },
  {
    "text": "know kubernetes cluster that has loads and loads going on I don't want noise right and this is where standardization",
    "start": "1460940",
    "end": "1467240"
  },
  {
    "text": "tries to starts to come in if we don't standardize at the lowest level we're going to make our lives much much easier",
    "start": "1467240",
    "end": "1472820"
  },
  {
    "text": "on a on a bigger scale broken authentication so there are a",
    "start": "1472820",
    "end": "1480260"
  },
  {
    "start": "1476000",
    "end": "1640000"
  },
  {
    "text": "number of different ways that you can authenticate with kubernetes kubernetes is essentially bring your own",
    "start": "1480260",
    "end": "1485480"
  },
  {
    "text": "authentication mechanism you can't Cube CTL get users you can't Cube CTL get pods how you get users into the system",
    "start": "1485480",
    "end": "1493220"
  },
  {
    "text": "is totally up to you and once they're there you can use our back to be able to",
    "start": "1493220",
    "end": "1498740"
  },
  {
    "text": "you know set those permissions wow that's really bright",
    "start": "1498740",
    "end": "1505700"
  },
  {
    "text": "um so here is the flow as if you were a human or a service account that we talked to before the flow in which your",
    "start": "1505700",
    "end": "1511640"
  },
  {
    "text": "request goes until it gets stored in etcd so etcd is the kind of database everything gets stored there and then",
    "start": "1511640",
    "end": "1517460"
  },
  {
    "text": "the reconcile Loop happens from that perspective so there's a number of gates that we currently have we've been talking kind",
    "start": "1517460",
    "end": "1523640"
  },
  {
    "text": "of at the third gate there about admission control with gatekeeper and caverno and stuff like that what we're",
    "start": "1523640",
    "end": "1529159"
  },
  {
    "text": "talking about now is authentication and authorization those are the first two gates that you're going to go through before you",
    "start": "1529159",
    "end": "1535279"
  },
  {
    "text": "get to the policy or the admission control so what can we do to make sure that you",
    "start": "1535279",
    "end": "1543980"
  },
  {
    "text": "know we we don't cause ourselves a problem when it comes to Authentication so",
    "start": "1543980",
    "end": "1549260"
  },
  {
    "text": "number one for me personally is to avoid certificates certificates are like difficult to",
    "start": "1549260",
    "end": "1555679"
  },
  {
    "text": "rotate right quickly if we get you know if we get hacked or somebody starts to own the kubernetes cluster or even worse",
    "start": "1555679",
    "end": "1561980"
  },
  {
    "text": "than that someone commits their Cube config to get I have actually seen that before and you have a publicly",
    "start": "1561980",
    "end": "1568039"
  },
  {
    "text": "accessible kubernetes cluster this is like game over right I have to rotate the whole entire kubernetes cluster and",
    "start": "1568039",
    "end": "1573620"
  },
  {
    "text": "all the certificates or I have to delete the cluster and bring it all the way back up both of those are not great in",
    "start": "1573620",
    "end": "1579320"
  },
  {
    "text": "that instance and the time it takes could potentially be unknown",
    "start": "1579320",
    "end": "1584419"
  },
  {
    "text": "Force MFA wherever possible you know it's just a good practice that we should be doing anyway just because we do it",
    "start": "1584419",
    "end": "1589880"
  },
  {
    "text": "when we log into websites doesn't mean we shouldn't be doing it when we're accessing you know kubernetes",
    "start": "1589880",
    "end": "1596000"
  },
  {
    "text": "if I haven't said this enough don't use service accounts outside of the kubernetes cluster those tokens last forever once I have them I can do",
    "start": "1596000",
    "end": "1602779"
  },
  {
    "text": "whatever I want the standard should be to use short-lived tokens that allow us to be",
    "start": "1602779",
    "end": "1610220"
  },
  {
    "text": "able to validate whether that person should have access to the kubernetes cluster as I said before",
    "start": "1610220",
    "end": "1615919"
  },
  {
    "text": "the way that you bring users into the system is Plug and Play you can choose your oidc adventure",
    "start": "1615919",
    "end": "1623000"
  },
  {
    "text": "essentially plug that into your kubernetes cluster choose the part of the JWT that you care",
    "start": "1623000",
    "end": "1628940"
  },
  {
    "text": "about to use as your user or group once you've defined that user and group",
    "start": "1628940",
    "end": "1634100"
  },
  {
    "text": "you can then configure your rbac setup with Insider kubernetes cluster",
    "start": "1634100",
    "end": "1641200"
  },
  {
    "start": "1640000",
    "end": "1709000"
  },
  {
    "text": "missing Network segmentation so we've kind of talked about ways that",
    "start": "1641360",
    "end": "1647059"
  },
  {
    "text": "we can configure the kubernetes cluster and configure all these yaml files all right",
    "start": "1647059",
    "end": "1652279"
  },
  {
    "text": "but what about like can application a talk to application B right",
    "start": "1652279",
    "end": "1657460"
  },
  {
    "text": "namespaces by themselves are not isolation boundaries right they're just",
    "start": "1657460",
    "end": "1662659"
  },
  {
    "text": "not people think of them as vertical columns that have tiny little holes in them I call them a sponge right any namespace",
    "start": "1662659",
    "end": "1669740"
  },
  {
    "text": "can talk to any other namespace by default people end up putting Dev staging and",
    "start": "1669740",
    "end": "1674900"
  },
  {
    "text": "production in different name spaces unfortunately if you go to the kubernetes documentation they actually say that's a good idea which is",
    "start": "1674900",
    "end": "1680539"
  },
  {
    "text": "unbelievable without this network segmentation any pod has the ability to be able to",
    "start": "1680539",
    "end": "1687440"
  },
  {
    "text": "talk to any other pod so as a hacker once I'm inside your pod all I'm going to do is start scanning all of the",
    "start": "1687440",
    "end": "1692539"
  },
  {
    "text": "kubernetes cluster for all of your other services once I have all of your other services you know I might find a you",
    "start": "1692539",
    "end": "1698179"
  },
  {
    "text": "know I might find a redis service for example probably because it's running in kubernetes and someone's lazy that's not",
    "start": "1698179",
    "end": "1703520"
  },
  {
    "text": "going to be authenticated and now I start to just suck data out of the kubernetes cluster from the inside",
    "start": "1703520",
    "end": "1709460"
  },
  {
    "start": "1709000",
    "end": "1810000"
  },
  {
    "text": "so prime example here is exactly what I just said so WordPress get pod gets",
    "start": "1709460",
    "end": "1715400"
  },
  {
    "text": "compromised you start to scan for ports on the you know that are open inside of kubernetes",
    "start": "1715400",
    "end": "1720919"
  },
  {
    "text": "you find you know 6379 you notice it's redis you start running call requests because",
    "start": "1720919",
    "end": "1727159"
  },
  {
    "text": "you're running you know you're running Ubuntu as an example because and you've got curl installed",
    "start": "1727159",
    "end": "1732260"
  },
  {
    "text": "data can start to be stolen get modified put on the dark web etc etc so how do we prevent this so the first",
    "start": "1732260",
    "end": "1740179"
  },
  {
    "text": "most obvious one is to use multiple different clusters have a Dev cluster have a staging cluster have a production",
    "start": "1740179",
    "end": "1746419"
  },
  {
    "text": "cluster yes it's a little bit of overhead but it allows us to have cluster boundaries",
    "start": "1746419",
    "end": "1752240"
  },
  {
    "text": "right and this is what I was talking about before with making sure that we've got consistency all those policies that",
    "start": "1752240",
    "end": "1758240"
  },
  {
    "text": "are running in staging and and development should also be running in production right standardization is key",
    "start": "1758240",
    "end": "1765679"
  },
  {
    "text": "um we can use a Resources with inside kubernetes that allow us to truly make",
    "start": "1765679",
    "end": "1772700"
  },
  {
    "text": "namespaces uh an isolation boundary and the way we do",
    "start": "1772700",
    "end": "1778220"
  },
  {
    "text": "that is with network policies so unfortunately yes it's a bit more yaml that you have to configure",
    "start": "1778220",
    "end": "1783919"
  },
  {
    "text": "but you know you're all going to become yaml engineers if you start to leverage kubernetes and then the final one is a",
    "start": "1783919",
    "end": "1790640"
  },
  {
    "text": "service mesh hands up if you're familiar with the term service mesh hands up if you're using a service mesh hands up if",
    "start": "1790640",
    "end": "1796700"
  },
  {
    "text": "you're using a service mesh in production iffy Okay so",
    "start": "1796700",
    "end": "1802820"
  },
  {
    "text": "there are a number of different ways that we can allow and deny certain workloads from being able to talk to",
    "start": "1802820",
    "end": "1809179"
  },
  {
    "text": "each other so as an example here on the left hand side we have a network policy these are",
    "start": "1809179",
    "end": "1814940"
  },
  {
    "start": "1810000",
    "end": "1918000"
  },
  {
    "text": "default Resources with inside kubernetes you can do Cube CTL get network policy in this example here",
    "start": "1814940",
    "end": "1821480"
  },
  {
    "text": "we're saying take the pod that uh has a label tier back end",
    "start": "1821480",
    "end": "1829700"
  },
  {
    "text": "and allow it to be able to egress to other pods that also have the tier back",
    "start": "1829700",
    "end": "1834860"
  },
  {
    "text": "end right so we're going to allow all the back end services within the default namespace to be able to talk to each",
    "start": "1834860",
    "end": "1840260"
  },
  {
    "text": "other we could also switch this to Ingress and we can have the opposite right and this just allows",
    "start": "1840260",
    "end": "1846200"
  },
  {
    "text": "us to start to configure and choose what pods are able to access other pods",
    "start": "1846200",
    "end": "1852799"
  },
  {
    "text": "labels are going to become extremely important right I'm going to talk about labels at the end but it it underpins",
    "start": "1852799",
    "end": "1858080"
  },
  {
    "text": "almost everything you're going to do with inside kubernetes if you don't have a good labeling taxonomy this whole",
    "start": "1858080",
    "end": "1863480"
  },
  {
    "text": "thing becomes very messy on the right hand side we have an istio",
    "start": "1863480",
    "end": "1869059"
  },
  {
    "text": "configuration which essentially says I want you to",
    "start": "1869059",
    "end": "1874340"
  },
  {
    "text": "find all of our pods that currently have the label app shoes and",
    "start": "1874340",
    "end": "1880940"
  },
  {
    "text": "has the service account inventory essay right so if you remember before we were talking about the default",
    "start": "1880940",
    "end": "1887600"
  },
  {
    "text": "service account and how I got way too much access istio allows us to be able to specify the exact service account that it should",
    "start": "1887600",
    "end": "1893840"
  },
  {
    "text": "be using and I'm going to allow it to do Post by default all the rest of the HTV verbs uh",
    "start": "1893840",
    "end": "1900860"
  },
  {
    "text": "get denied so these are just two possible options if you install SEO you do have like a",
    "start": "1900860",
    "end": "1906919"
  },
  {
    "text": "hundred thousand lines of yaml that you have to deal with so just bear that in mind I would start with the one on the left and then gradually make your way to",
    "start": "1906919",
    "end": "1913700"
  },
  {
    "text": "the run on the right",
    "start": "1913700",
    "end": "1916299"
  },
  {
    "start": "1918000",
    "end": "2040000"
  },
  {
    "text": "secret management failures is is number eight oh",
    "start": "1918919",
    "end": "1924980"
  },
  {
    "text": "so what's the problem well let's take an example of where we have a compromised",
    "start": "1924980",
    "end": "1930260"
  },
  {
    "text": "web application and we know when we just talked about how service accounts get you know",
    "start": "1930260",
    "end": "1935899"
  },
  {
    "text": "mounted inside of Cuba inside of your kubernetes pods to allow the Pod to be",
    "start": "1935899",
    "end": "1941000"
  },
  {
    "text": "able to talk to the kubernetes API they all get mounted at the same directory so I I get inside of one of",
    "start": "1941000",
    "end": "1948260"
  },
  {
    "text": "your pods I do an LF here I now have the service account token once I have the service account token I",
    "start": "1948260",
    "end": "1955460"
  },
  {
    "text": "know that I have some permissions to the kubernetes API I don't know what they are but I know that I have some",
    "start": "1955460",
    "end": "1962000"
  },
  {
    "text": "then because I don't have a very locked down uh operating system I decide to install Cube CTL",
    "start": "1962000",
    "end": "1968000"
  },
  {
    "text": "because why not I want to make my life easier I don't want to be writing call requests and I start to you know Cube",
    "start": "1968000",
    "end": "1974240"
  },
  {
    "text": "CTL less Secrets or cube CTL describe secret or even worse than that Cube CTL",
    "start": "1974240",
    "end": "1980539"
  },
  {
    "text": "run pod or cube CTL run deployment if I can get inside of your uh your",
    "start": "1980539",
    "end": "1986299"
  },
  {
    "text": "application that's currently got a service account uh token mounted",
    "start": "1986299",
    "end": "1991340"
  },
  {
    "text": "it puts me in a better position to be able to start to run workloads that shouldn't be running inside your kubernetes cluster",
    "start": "1991340",
    "end": "1998059"
  },
  {
    "text": "now if we go back to me talking about labeling taxonomy and how I said it's really important",
    "start": "1998059",
    "end": "2003460"
  },
  {
    "text": "if you've got a thousand workloads currently running in your kubernetes cluster how are you going to find mine",
    "start": "2003460",
    "end": "2009039"
  },
  {
    "text": "if I make it just slightly different from one of your applications that are currently running you'd probably never see it",
    "start": "2009039",
    "end": "2015880"
  },
  {
    "text": "right but now if I have certain policies that won't allow me to be able to create pods",
    "start": "2015880",
    "end": "2022059"
  },
  {
    "text": "if they don't match some kind of labeling taxonomy I'm never going to be able to create it and what will you get you'll get audit logs that tell you that",
    "start": "2022059",
    "end": "2029140"
  },
  {
    "text": "I'm trying to create a workload that doesn't meet your specification right and now you know where it's coming from",
    "start": "2029140",
    "end": "2035019"
  },
  {
    "text": "what the person what the service account is currently trying to do",
    "start": "2035019",
    "end": "2040200"
  },
  {
    "text": "so what can we do and how can we make this better so we can encrypt Secrets at",
    "start": "2040779",
    "end": "2046059"
  },
  {
    "text": "rest both inside of kubernetes and outside of kubernetes so hands up if",
    "start": "2046059",
    "end": "2052118"
  },
  {
    "text": "you're uh you're applying your kubernetes secrets from some kind of centralized build system like Jenkins",
    "start": "2052119",
    "end": "2059200"
  },
  {
    "text": "nope oh yeah okay uh I'm glad there's less hands down than up",
    "start": "2059200",
    "end": "2065080"
  },
  {
    "text": "in that instance um but we need to make sure they're encrypted",
    "start": "2065080",
    "end": "2070658"
  },
  {
    "text": "both wherever they're being stored before they enter kubernetes and also when they get to kubernetes as well",
    "start": "2070659",
    "end": "2078220"
  },
  {
    "text": "we've just talked about it then the reason why we should ensure logging and auditing is in place because in the",
    "start": "2078220",
    "end": "2084099"
  },
  {
    "text": "instance where I do get inside I need to be able to understand what's going on",
    "start": "2084099",
    "end": "2089320"
  },
  {
    "text": "and then also start to think about leveraging run runtime detection right if certain you know Services inside of",
    "start": "2089320",
    "end": "2096580"
  },
  {
    "text": "your kubernetes cluster are performing an LS on that very specific directory",
    "start": "2096580",
    "end": "2101920"
  },
  {
    "text": "that is extremely suspicious right and you have the ability to be able to write rules that can detect that from",
    "start": "2101920",
    "end": "2107859"
  },
  {
    "text": "happening so everybody makes mistakes right you could mount a service account token",
    "start": "2107859",
    "end": "2113920"
  },
  {
    "text": "inside of your pod by complete accident and then someone comes in there LS is",
    "start": "2113920",
    "end": "2120640"
  },
  {
    "text": "the token uh your location and we have a nice rule that posts a",
    "start": "2120640",
    "end": "2126520"
  },
  {
    "text": "message to slack or pagerduty or wherever you want it saying somebody is doing something that they shouldn't be",
    "start": "2126520",
    "end": "2131619"
  },
  {
    "text": "doing what you can do with Insight kubernetes is when you configure your deployments",
    "start": "2131619",
    "end": "2137500"
  },
  {
    "text": "you can set the Auto Mount service account token to off right it's like this hidden feature because there's",
    "start": "2137500",
    "end": "2144339"
  },
  {
    "text": "hundreds of possible options and that one's not very well uh talked about that by default",
    "start": "2144339",
    "end": "2150339"
  },
  {
    "text": "stops the default service account from getting mounted inside your pod nine times out of ten you do not need a",
    "start": "2150339",
    "end": "2157300"
  },
  {
    "text": "service account inside your application your API doesn't need your actual API or your microservice does not need access",
    "start": "2157300",
    "end": "2164079"
  },
  {
    "text": "to the kubernetes API so by default set that thing to off right and then even if by accident you create a service account",
    "start": "2164079",
    "end": "2170440"
  },
  {
    "text": "token it's not going to get added so some useful tools with regards to",
    "start": "2170440",
    "end": "2176500"
  },
  {
    "text": "Secrets you can use Mozilla Sops it's a tool by Mozilla that allows you to be able to encrypt your secrets using a",
    "start": "2176500",
    "end": "2183099"
  },
  {
    "text": "number of different tools and Technologies such as KMS gpg etc etc",
    "start": "2183099",
    "end": "2188440"
  },
  {
    "text": "um you can use silt Secrets there which allows you to uh",
    "start": "2188440",
    "end": "2195160"
  },
  {
    "text": "encrypt your kubernetes secrets as plain yaml with your public key",
    "start": "2195160",
    "end": "2201880"
  },
  {
    "text": "have a controller that's sitting inside of your kubernetes cluster with your private key the private key decrypts etc",
    "start": "2201880",
    "end": "2208119"
  },
  {
    "text": "etc you get the kubernetes cluster and then the final one there is is volts which allows you to be able to inject",
    "start": "2208119",
    "end": "2215140"
  },
  {
    "text": "from volt directly into your kubernetes into your application or your pod so you don't have this kind of concept of",
    "start": "2215140",
    "end": "2221079"
  },
  {
    "text": "Secrets just floating around in your kubernetes ecosystem you have to try and figure out",
    "start": "2221079",
    "end": "2226740"
  },
  {
    "start": "2226000",
    "end": "2335000"
  },
  {
    "text": "so now we get on to some some bad ones right so now we've kind of worked out that our own ecosystem and our",
    "start": "2227320",
    "end": "2234579"
  },
  {
    "text": "kubernetes configuration is insecure now we're starting to get to the bits which are a bit more worrying so what uh",
    "start": "2234579",
    "end": "2241780"
  },
  {
    "text": "what parts or components that make up your kubernetes cluster could potentially be misconfigured so",
    "start": "2241780",
    "end": "2249880"
  },
  {
    "text": "there are a number of different components in the kubernetes cluster this this is more for the managed",
    "start": "2249880",
    "end": "2254980"
  },
  {
    "text": "kubernetes cluster than it uh sorry for the uh self-managed kubernetes cluster or the DIY clusters than it is for your",
    "start": "2254980",
    "end": "2262240"
  },
  {
    "text": "managed to keep an fuse clusters so there are a number of components unlike anything in kubernetes there's also hundreds of flags that you can",
    "start": "2262240",
    "end": "2269200"
  },
  {
    "text": "configure on each of these components and no one's going to remember every single",
    "start": "2269200",
    "end": "2275920"
  },
  {
    "text": "flag I know they're going to remember the correct configuration to set for every single flag however one of the most important",
    "start": "2275920",
    "end": "2283359"
  },
  {
    "text": "components in the kubernetes cluster is the cubelet hands up if you know what the keyboard",
    "start": "2283359",
    "end": "2288640"
  },
  {
    "text": "does so the cubelet's job is to interact with",
    "start": "2288640",
    "end": "2296140"
  },
  {
    "text": "um the container runtime so Docker for example um",
    "start": "2296140",
    "end": "2302200"
  },
  {
    "text": "and create containers delete containers pull your images from your registries",
    "start": "2302200",
    "end": "2307420"
  },
  {
    "text": "uh but it also acts as an agent that talks back to the kubernetes API so guess what",
    "start": "2307420",
    "end": "2313540"
  },
  {
    "text": "if you configure this wrong and I get I can start to do you know bad things in that instance so as an example",
    "start": "2313540",
    "end": "2320380"
  },
  {
    "text": "one of the things that you can do with the cubelet configuration is you can set Anonymous auth to true right that's not",
    "start": "2320380",
    "end": "2327220"
  },
  {
    "text": "good you don't want to be doing that uh if you do that I can you know the cubelet is talking to the API you know",
    "start": "2327220",
    "end": "2333700"
  },
  {
    "text": "unauthenticated luckily enough if you're running you know your own DIY clusters you can use",
    "start": "2333700",
    "end": "2339880"
  },
  {
    "start": "2335000",
    "end": "2395000"
  },
  {
    "text": "tools such as cube bench and what this does is it runs the CIS Benchmark against your kubernetes cluster and",
    "start": "2339880",
    "end": "2346780"
  },
  {
    "text": "tells you how bad the overall configuration is you can run this as a one-off job you can run it constantly every week you can",
    "start": "2346780",
    "end": "2352900"
  },
  {
    "text": "run it every month you know whatever Cadence you want they have the yaml description in this",
    "start": "2352900",
    "end": "2359079"
  },
  {
    "text": "repository for managed kubernetes clusters as well right so just because you're using manage",
    "start": "2359079",
    "end": "2365320"
  },
  {
    "text": "kubernetes clusters does not necessarily mean they're secure they're probably more secure than",
    "start": "2365320",
    "end": "2370420"
  },
  {
    "text": "we would configure out the box but it's just something to uh to think about it's",
    "start": "2370420",
    "end": "2375700"
  },
  {
    "text": "it's an interesting uh exercise to run the CIS benchmarks against your managed",
    "start": "2375700",
    "end": "2381220"
  },
  {
    "text": "kubernetes cluster right and see the results for example eks in Amazon does not come back completely clean there are",
    "start": "2381220",
    "end": "2387400"
  },
  {
    "text": "some warnings there um I haven't tested uh gke in Google or AKs",
    "start": "2387400",
    "end": "2393160"
  },
  {
    "text": "in uh in azure so we have components in that make up the",
    "start": "2393160",
    "end": "2400119"
  },
  {
    "start": "2395000",
    "end": "2540000"
  },
  {
    "text": "kubernetes cluster that can be insecure vulnerable misconfigured right but",
    "start": "2400119",
    "end": "2407020"
  },
  {
    "text": "there's also like this outdated element so hands up who knows how many times",
    "start": "2407020",
    "end": "2412900"
  },
  {
    "text": "kubernetes release every year okay what number",
    "start": "2412900",
    "end": "2420780"
  },
  {
    "text": "four yup correct so it's four releases one every quarter",
    "start": "2421359",
    "end": "2427839"
  },
  {
    "text": "next question how many versions does kubernetes tell you that you can be behind if your API",
    "start": "2427839",
    "end": "2434140"
  },
  {
    "text": "if your kind of control plane which is the main uh interface with the kubernetes cluster is",
    "start": "2434140",
    "end": "2440740"
  },
  {
    "text": "a higher version than the nodes that are currently running at your your workloads",
    "start": "2440740",
    "end": "2445960"
  },
  {
    "text": "so what's the skew one two three or four any guesses",
    "start": "2445960",
    "end": "2453119"
  },
  {
    "text": "so the answer is two so that means and they they don't they",
    "start": "2453460",
    "end": "2459640"
  },
  {
    "text": "also don't do long-term support right so they just if there's a problem they just go upgrade your kubernetes cluster like",
    "start": "2459640",
    "end": "2464920"
  },
  {
    "text": "everyone you know it just it's just a five minute job um so one of the things that's really",
    "start": "2464920",
    "end": "2470619"
  },
  {
    "text": "important is to try is to have an upgrade process within your organization right don't sit on 121 when we're",
    "start": "2470619",
    "end": "2477460"
  },
  {
    "text": "currently on 126 right that's quite a large gap there's a number of cves that have been fixed there",
    "start": "2477460",
    "end": "2483339"
  },
  {
    "text": "the other thing they do is they deprecate API versions so you could be if you remember before I",
    "start": "2483339",
    "end": "2489760"
  },
  {
    "text": "was showing the the deployment of apps V1 between like 121 and 122 as an example",
    "start": "2489760",
    "end": "2496780"
  },
  {
    "text": "they deprecated six apis so or they um completely removed them so things that",
    "start": "2496780",
    "end": "2503440"
  },
  {
    "text": "used to work no longer work right including all your rbat configuration so you say you create a nice policy that",
    "start": "2503440",
    "end": "2510400"
  },
  {
    "text": "says Steve can access this Ingress resource that has the API version",
    "start": "2510400",
    "end": "2515500"
  },
  {
    "text": "extensions V1 and then they decide that that's no longer going to be supported and it's now Network V1 well guess what",
    "start": "2515500",
    "end": "2522220"
  },
  {
    "text": "all of your application developers come piling into your room and say what on Earth is going on I've lost all my access right and the larger you leave",
    "start": "2522220",
    "end": "2529839"
  },
  {
    "text": "that Gap the more headache it's going to be to upgrade so try and get in this process of upgrading your kubernetes cluster on a regular Cadence including",
    "start": "2529839",
    "end": "2537040"
  },
  {
    "text": "manage kubernetes as well unfortunately kubernetes itself isn't",
    "start": "2537040",
    "end": "2543339"
  },
  {
    "start": "2540000",
    "end": "2598000"
  },
  {
    "text": "secure neither are a bunch of workloads that you probably run on your kubernetes cluster right prime example recently",
    "start": "2543339",
    "end": "2549099"
  },
  {
    "text": "Argo CD with the first uh zero day cve you can see over there as well the",
    "start": "2549099",
    "end": "2555400"
  },
  {
    "text": "kubernetes also has a number of cves we don't just have to upgrade our",
    "start": "2555400",
    "end": "2561339"
  },
  {
    "text": "kubernetes cluster we have to have a process of upgrading the workloads that currently running our kubernetes cluster",
    "start": "2561339",
    "end": "2566380"
  },
  {
    "text": "not just your apps right if you've got things like Prometheus or grafana for for observability or you've got kind of",
    "start": "2566380",
    "end": "2573460"
  },
  {
    "text": "fluent bit or fluent d That's being used to ship all of your uh your logs to your centralized logging system these things",
    "start": "2573460",
    "end": "2580000"
  },
  {
    "text": "need upgrading right they need caring you know there's a there's a lot to deal with just with this alone right because",
    "start": "2580000",
    "end": "2586180"
  },
  {
    "text": "there's so there could be potentially so many applications that you're currently running within your kubernetes cluster",
    "start": "2586180",
    "end": "2592119"
  },
  {
    "text": "that no product team managers and then there's this awful like oh well whose problem is it to upgrade",
    "start": "2592119",
    "end": "2599380"
  },
  {
    "start": "2598000",
    "end": "3062000"
  },
  {
    "text": "so some questions to ask yourself from an image perspective which is like",
    "start": "2599380",
    "end": "2606040"
  },
  {
    "text": "the lowest level that we can possibly go with problems are you using hardened base images well",
    "start": "2606040",
    "end": "2612280"
  },
  {
    "text": "people are using Ubuntu and Debian so maybe that's something that you go back to your organization and think about how do we get off of those how do we move to",
    "start": "2612280",
    "end": "2618819"
  },
  {
    "text": "something that's smaller are they running as root potentially are you leveraging consistent users and",
    "start": "2618819",
    "end": "2625599"
  },
  {
    "text": "groups within uh within your applications your applications that you currently run and you're responsible for",
    "start": "2625599",
    "end": "2630940"
  },
  {
    "text": "right more consistency the consistency that we have across the board the easier it is",
    "start": "2630940",
    "end": "2636220"
  },
  {
    "text": "to put some of these configurations into place do you have a labeling taxonomy right",
    "start": "2636220",
    "end": "2642099"
  },
  {
    "text": "does the whole organization have a labeling taxonomy that makes like logging alerting writing policies",
    "start": "2642099",
    "end": "2647859"
  },
  {
    "text": "writing rules does it make it easy like imagine you've got a number of Engineers",
    "start": "2647859",
    "end": "2653319"
  },
  {
    "text": "that work across four or five product teams and they all use different labels well all of your network policies are",
    "start": "2653319",
    "end": "2658599"
  },
  {
    "text": "going to look completely different right there's no consistency there makes it very difficult then we talked about admission control",
    "start": "2658599",
    "end": "2666520"
  },
  {
    "text": "are we are you leveraging or creating any policies to stop bad workloads from entering a kubernetes cluster yes you",
    "start": "2666520",
    "end": "2673180"
  },
  {
    "text": "could go back to your organization you could do a review of the current cluster but that current cluster that you've just reviewed is going to probably be",
    "start": "2673180",
    "end": "2679060"
  },
  {
    "text": "completely different to when you started reviewing it right we need to stop things from entering the kubernetes cluster and build up some standards",
    "start": "2679060",
    "end": "2686740"
  },
  {
    "text": "I've said the same thing Jimmy said the same thing this morning are we auditing there are about configuration or I'll",
    "start": "2686740",
    "end": "2691780"
  },
  {
    "text": "just are we allowing a bunch of people to have these five star reviews that I keep going on about so go back to your",
    "start": "2691780",
    "end": "2697839"
  },
  {
    "text": "uh your organization go to your kubernetes cluster start looking for things with stars",
    "start": "2697839",
    "end": "2703839"
  },
  {
    "text": "stars are not great right they're not great everywhere um but especially in your Arabic configuration and then finally do you have processes",
    "start": "2703839",
    "end": "2710980"
  },
  {
    "text": "for regularly upgrading kubernetes and also your third-party tools that's extremely important the longer you lag",
    "start": "2710980",
    "end": "2717040"
  },
  {
    "text": "behind there you know the more difficult the upgrade path is going to be and uh that's all for me I'll open out",
    "start": "2717040",
    "end": "2723880"
  },
  {
    "text": "for questions [Applause]",
    "start": "2723880",
    "end": "2732700"
  },
  {
    "text": "hey",
    "start": "2732700",
    "end": "2735180"
  },
  {
    "text": "yeah so it's actually interesting you asked that at the workshop that we put on uh yesterday and and Monday that",
    "start": "2739420",
    "end": "2745660"
  },
  {
    "text": "question got brought up so for those of you who are not familiar with G visor G",
    "start": "2745660",
    "end": "2750760"
  },
  {
    "text": "Vine is a kind of sits in between your uh your workload or your pod and the",
    "start": "2750760",
    "end": "2756099"
  },
  {
    "text": "underlying kernel and can block and allow you know system calls to happen at that level",
    "start": "2756099",
    "end": "2762280"
  },
  {
    "text": "so the number of system calls that you get in G visor by default is it is a heck of a lot smaller than the ones you",
    "start": "2762280",
    "end": "2768099"
  },
  {
    "text": "get in the underlying kernel for sure um and you know there's a nice isolation boundary that you've got there however",
    "start": "2768099",
    "end": "2773980"
  },
  {
    "text": "there's an overhead because everything is going through G visor before it really makes its way to the kernel so in",
    "start": "2773980",
    "end": "2779619"
  },
  {
    "text": "at large scale that could become pretty disruptive but I think for small scale it's a great starting place for sure",
    "start": "2779619",
    "end": "2785260"
  },
  {
    "text": "right it makes it even if you do allow uh privilege escalation if you have something that's sat you know between",
    "start": "2785260",
    "end": "2791800"
  },
  {
    "text": "your workload in the kernel that's blocking potentially a large number of ciscals that you can make I think that's",
    "start": "2791800",
    "end": "2797140"
  },
  {
    "text": "a win I personally haven't used it um but it looks pretty interesting",
    "start": "2797140",
    "end": "2804420"
  },
  {
    "text": "yeah so I I talk about when I when I talk to customers I talk you've got pre-deployment at deployment and post",
    "start": "2814119",
    "end": "2821079"
  },
  {
    "text": "deployment right what we've talked about is we've kind of talked about you know during deployment with our admission",
    "start": "2821079",
    "end": "2827740"
  },
  {
    "text": "control but the language that you use to write a mission control normally is going to be",
    "start": "2827740",
    "end": "2833740"
  },
  {
    "text": "Rego right and there are tools that allow you to be able to run Rego in CI so if if your yaml configuration",
    "start": "2833740",
    "end": "2841359"
  },
  {
    "text": "or the resources that you currently Define to be deployed to kubernetes are stored in git you can run tools such as",
    "start": "2841359",
    "end": "2847900"
  },
  {
    "text": "competest right a prime example comp test is a way for you to be able to run Rego against your kubernetes class",
    "start": "2847900",
    "end": "2854260"
  },
  {
    "text": "against your kubernetes manifests pre-deployment there are also other tools such as cube",
    "start": "2854260",
    "end": "2861160"
  },
  {
    "text": "eval so k-u-b-e-v-a-l which makes sure that you",
    "start": "2861160",
    "end": "2866380"
  },
  {
    "text": "match up against the schema right so it doesn't necessarily mean that you've configured it successfully but from a",
    "start": "2866380",
    "end": "2872319"
  },
  {
    "text": "from a security standpoint but validates that the yaml that you currently have uh",
    "start": "2872319",
    "end": "2877839"
  },
  {
    "text": "in your in your git repository matches the schema that you're currently going to be deployed to",
    "start": "2877839",
    "end": "2884380"
  },
  {
    "text": "was that was that your question with regards to the analogy there's also ones you can do with images as well right so",
    "start": "2884380",
    "end": "2889660"
  },
  {
    "text": "there's trivia or gripe or you know there's a number of other tools that you know allow you to be able to be able to",
    "start": "2889660",
    "end": "2896020"
  },
  {
    "text": "do that but I think the important thing to do is choose a tool that allows you to do pre and during right if you have a",
    "start": "2896020",
    "end": "2903460"
  },
  {
    "text": "different tool for pre and then another one for doing like during the uh the API request inside your",
    "start": "2903460",
    "end": "2909460"
  },
  {
    "text": "kubernetes cluster you get disparity in a kind of false sense of security when",
    "start": "2909460",
    "end": "2915040"
  },
  {
    "text": "you're doing CI and then by the time you hit the kubernetes cluster you just reject all your deployments so what you think was going to work it doesn't",
    "start": "2915040",
    "end": "2921640"
  },
  {
    "text": "actually work and that's even more annoying to you know an engineer or a developer any other questions",
    "start": "2921640",
    "end": "2929099"
  },
  {
    "text": "Jimmy",
    "start": "2930280",
    "end": "2932760"
  },
  {
    "text": "you can join the GitHub repository add issues commit back uh Upstream add PRS",
    "start": "2936760",
    "end": "2944560"
  },
  {
    "text": "you know there are there are 10 points on the iOS top 10. you know as a prime",
    "start": "2944560",
    "end": "2951460"
  },
  {
    "text": "example when when it was written the the issue that I showed where you could list",
    "start": "2951460",
    "end": "2956619"
  },
  {
    "text": "Secrets by a curl that was actually a contribution to the Upstream o wasp top 10. that wasn't something that we",
    "start": "2956619",
    "end": "2962680"
  },
  {
    "text": "created someone actually committed that back as a pull request so yeah join in on",
    "start": "2962680",
    "end": "2968020"
  },
  {
    "text": "github.com Project kubernetes top 10.",
    "start": "2968020",
    "end": "2973980"
  },
  {
    "text": "another one",
    "start": "2974020",
    "end": "2976740"
  },
  {
    "text": "yeah so there's actually a repository called uh or a URL called securecubernetes.com",
    "start": "2998260",
    "end": "3003720"
  },
  {
    "text": "which is essentially a CTF that you know shows how if you don't configure some of this stuff successfully you are",
    "start": "3003720",
    "end": "3011220"
  },
  {
    "text": "you can do bad things so we actually went through that in the training uh the last couple of days",
    "start": "3011220",
    "end": "3018140"
  },
  {
    "text": "it will ruin your kubernetes cluster so like create a brand new kubernetes cluster and then deploy it don't go and",
    "start": "3037920",
    "end": "3043079"
  },
  {
    "text": "deploy that to one in your organization because it's not a good look",
    "start": "3043079",
    "end": "3048800"
  },
  {
    "text": "okay if that's all I'll be around for the rest of the day I'm happy to fill the questions thanks so much",
    "start": "3050520",
    "end": "3056140"
  },
  {
    "text": "[Applause]",
    "start": "3056140",
    "end": "3062390"
  }
]