[
  {
    "start": "0",
    "end": "24000"
  },
  {
    "text": "so thanks everyone for coming to my talk I will be talking about something about",
    "start": "4920",
    "end": "10330"
  },
  {
    "text": "I'm really passionate about and I've been working with this for the last at least three years sometimes more",
    "start": "10330",
    "end": "16690"
  },
  {
    "text": "sometimes less different technologies but this talk is about terraform which",
    "start": "16690",
    "end": "21970"
  },
  {
    "text": "I've been using for exactly three years so my name is Antone LaBianca I am",
    "start": "21970",
    "end": "28859"
  },
  {
    "start": "24000",
    "end": "122000"
  },
  {
    "text": "having a lot of fun working with open source communities and making my best",
    "start": "28859",
    "end": "35800"
  },
  {
    "text": "efforts into adoption of terraform and AWS so I'm actively contributing and",
    "start": "35800",
    "end": "44560"
  },
  {
    "text": "maintaining terraform AWS modules which were downloaded more than 1 million of",
    "start": "44560",
    "end": "50860"
  },
  {
    "text": "times during last 8 months I will talk about this in details what is it and I",
    "start": "50860",
    "end": "57670"
  },
  {
    "text": "also contribute to different terraform projects which all of them hosted an",
    "start": "57670",
    "end": "64780"
  },
  {
    "text": "open source of my account and modules TF",
    "start": "64780",
    "end": "70749"
  },
  {
    "text": "is one of my project which I started quite recently to see if there is a need",
    "start": "70749",
    "end": "75999"
  },
  {
    "text": "for people to actually convert the diagram from visual diagram into infrastructure as code which they can",
    "start": "75999",
    "end": "82840"
  },
  {
    "text": "use so I'm going to open source this approximately in two weeks and if you",
    "start": "82840",
    "end": "89770"
  },
  {
    "text": "have questions after the talk or any time during the talk never hesitate to",
    "start": "89770",
    "end": "95170"
  },
  {
    "text": "tweet or to send me an email I always reply to emails and in my spare time I",
    "start": "95170",
    "end": "101380"
  },
  {
    "text": "organize different events related to Hoshi Corp user group AWS DevOps norway",
    "start": "101380",
    "end": "108459"
  },
  {
    "text": "and devops days in Auslan and by the way their web stays in Oslo is today's event",
    "start": "108459",
    "end": "115060"
  },
  {
    "text": "and COFA papers is open so if you want to visit Oslo one more time and have",
    "start": "115060",
    "end": "120219"
  },
  {
    "text": "something to say don't hesitate to submit paper so the agenda of this talk is going to be that first we look into",
    "start": "120219",
    "end": "126609"
  },
  {
    "start": "122000",
    "end": "139000"
  },
  {
    "text": "what is infrastructures code just from the top level what is terraform and how",
    "start": "126609",
    "end": "132610"
  },
  {
    "text": "difficulty ICD pipeline may look like and what era form can be used and what",
    "start": "132610",
    "end": "137680"
  },
  {
    "text": "are the channel just so if you're doing DevOps today you",
    "start": "137680",
    "end": "142790"
  },
  {
    "text": "are probably doing infrastructure as code so JC Robbins who is founder of",
    "start": "142790",
    "end": "148520"
  },
  {
    "text": "chess told it quite clearly that enable of reconstruction of the business from",
    "start": "148520",
    "end": "153890"
  },
  {
    "text": "nothing but the source code and backup and bare metal that's definition so why it is so",
    "start": "153890",
    "end": "163040"
  },
  {
    "text": "important actually is that you can definitely treat infrastructure exactly the same way as code apply exactly the",
    "start": "163040",
    "end": "170330"
  },
  {
    "text": "same principles as you've been doing for the code and more importantly is that",
    "start": "170330",
    "end": "176840"
  },
  {
    "text": "you can validate that infrastructure changes are going to be exactly what you expect and you know what's going to be",
    "start": "176840",
    "end": "183230"
  },
  {
    "text": "changed so this is how a typical multi tier infrastructure looks like so this",
    "start": "183230",
    "end": "192560"
  },
  {
    "start": "184000",
    "end": "223000"
  },
  {
    "text": "is traditional website with a load balancer and CloudFront",
    "start": "192560",
    "end": "197570"
  },
  {
    "text": "which is content delivery network s3 bucket to store some static resources",
    "start": "197570",
    "end": "203570"
  },
  {
    "text": "couple levels of auto scaling groups and relational database servers all these",
    "start": "203570",
    "end": "210170"
  },
  {
    "text": "can be created visually or you you can visualize it using any other tools but",
    "start": "210170",
    "end": "216700"
  },
  {
    "text": "how to actually make infrastructure based on this nice drawing is sometimes",
    "start": "216700",
    "end": "223580"
  },
  {
    "start": "223000",
    "end": "281000"
  },
  {
    "text": "hard so in this talk I'll be talking about tool called terraform and I want",
    "start": "223580",
    "end": "231710"
  },
  {
    "text": "to know who is who can raise hands and say that they're using terraform in",
    "start": "231710",
    "end": "236840"
  },
  {
    "text": "production or no what is it about so it just helped me to figure out who is the",
    "start": "236840",
    "end": "243350"
  },
  {
    "text": "audience who use terraform in production right so a couple hands that's good",
    "start": "243350",
    "end": "249460"
  },
  {
    "text": "so for those who don't know what is terraform terraform allows to describe",
    "start": "249460",
    "end": "254980"
  },
  {
    "text": "infrastructure in text files with extension TF which looks like this",
    "start": "254980",
    "end": "262340"
  },
  {
    "text": "so in this file we describe what kind of a doubles provider we want to use in which region what kind of resource we",
    "start": "262340",
    "end": "269360"
  },
  {
    "text": "want to create it is s3 bucket and we want to get outputs like which bucket was created so we want to get an",
    "start": "269360",
    "end": "277790"
  },
  {
    "text": "output as a string ID of s3 buckets in order to get this infrastructure created",
    "start": "277790",
    "end": "284810"
  },
  {
    "start": "281000",
    "end": "289000"
  },
  {
    "text": "we first run terraform in it which downloads some dependencies and then we",
    "start": "284810",
    "end": "290960"
  },
  {
    "text": "run terraform apply to see what's going to be changed so we can see that s3",
    "start": "290960",
    "end": "296780"
  },
  {
    "text": "bucket is going to be created and then we confirm that that's what we want and",
    "start": "296780",
    "end": "301900"
  },
  {
    "text": "bucket is being created as you can see at the very end the bucket my bucket see",
    "start": "301900",
    "end": "309020"
  },
  {
    "text": "snail was created so that's exactly the purpose of infrastructure you describe",
    "start": "309020",
    "end": "315350"
  },
  {
    "text": "it in text file you see what's current happens and you get an output as bucket",
    "start": "315350",
    "end": "320360"
  },
  {
    "text": "was created that's it you can do this procedure for all other resources",
    "start": "320360",
    "end": "325490"
  },
  {
    "text": "introduced dependencies and so this is very well described in official",
    "start": "325490",
    "end": "331490"
  },
  {
    "text": "documentation and that's not the purpose of the talk so CI CD pipeline is really",
    "start": "331490",
    "end": "338930"
  },
  {
    "start": "334000",
    "end": "353000"
  },
  {
    "text": "important as an indicator of bottlenecks which likely to occur and as soon as you",
    "start": "338930",
    "end": "346190"
  },
  {
    "text": "know what are the bottlenecks then you can fix them and doing this in automated fashion is again important so typical CI",
    "start": "346190",
    "end": "354800"
  },
  {
    "start": "353000",
    "end": "388000"
  },
  {
    "text": "CD pipeline may look like this where code is being pushed your version",
    "start": "354800",
    "end": "361430"
  },
  {
    "text": "control system then code is built some unit test run integration test run",
    "start": "361430",
    "end": "368570"
  },
  {
    "text": "then developers and some other decision maker people review it and this code is",
    "start": "368570",
    "end": "375770"
  },
  {
    "text": "then deployed to some stage environment and some production environment if",
    "start": "375770",
    "end": "380900"
  },
  {
    "text": "things go well so this is a whole deployment pipeline with infrastructure",
    "start": "380900",
    "end": "388520"
  },
  {
    "start": "388000",
    "end": "404000"
  },
  {
    "text": "changes it is similar well how to get started with terraform so first you read",
    "start": "388520",
    "end": "394490"
  },
  {
    "text": "documentation you write some code you run terraform apply on your local machine it works quite easy in the same",
    "start": "394490",
    "end": "401120"
  },
  {
    "text": "way as I just showed which creation of history buckets but it's not always like this because it",
    "start": "401120",
    "end": "407200"
  },
  {
    "text": "works approximately 60% of the time deployment works every time so then you",
    "start": "407200",
    "end": "414460"
  },
  {
    "start": "412000",
    "end": "502000"
  },
  {
    "text": "figure out that change in your code in one file and actually multiplying the",
    "start": "414460",
    "end": "420640"
  },
  {
    "text": "same resources and if you need to create similar resources you just have to copy",
    "start": "420640",
    "end": "425770"
  },
  {
    "text": "paste this multiple time doesn't make too much sense because you're literally duplicating code and when you figure out",
    "start": "425770",
    "end": "434350"
  },
  {
    "text": "that you're going to create infrastructure for resources which were already created by someone else",
    "start": "434350",
    "end": "440200"
  },
  {
    "text": "it is smart way to actually look into registry where more than four hundred modules are already hosted for common",
    "start": "440200",
    "end": "447550"
  },
  {
    "text": "infrastructure and architectural patterns like how to set up networking on AWS or how to set up high",
    "start": "447550",
    "end": "456700"
  },
  {
    "text": "availability elastic container cluster on AWS or something else there are more",
    "start": "456700",
    "end": "463630"
  },
  {
    "text": "than 400 modules already they're maintained some of them tested some not",
    "start": "463630",
    "end": "471400"
  },
  {
    "text": "I personally maintain the one of the biggest collection of these modules",
    "start": "471400",
    "end": "477580"
  },
  {
    "text": "which are verified and trusted by lots of lots of different customers worldwide",
    "start": "477580",
    "end": "483610"
  },
  {
    "text": "and in all ways well so this typical modules for virtual private or VPC auto",
    "start": "483610",
    "end": "493840"
  },
  {
    "text": "scaling group relational database service and many other services which you are likely to use in your AWS",
    "start": "493840",
    "end": "501610"
  },
  {
    "text": "project so when it comes to CICE tools and what can be used you know for",
    "start": "501610",
    "end": "508290"
  },
  {
    "start": "502000",
    "end": "551000"
  },
  {
    "text": "application we typically use jenkins travis circle CI lots of different",
    "start": "508290",
    "end": "515680"
  },
  {
    "text": "options are available and when we are talking about terraform there are",
    "start": "515680",
    "end": "521650"
  },
  {
    "text": "exactly the same tools available so you essentially have to run these Commons",
    "start": "521650",
    "end": "526660"
  },
  {
    "text": "somewhere there are still plugins which some people find beneficial because they",
    "start": "526660",
    "end": "531850"
  },
  {
    "text": "write some code output from terraform or provide some input to terraform so there",
    "start": "531850",
    "end": "536860"
  },
  {
    "text": "are plugins exist for concourse drawn some integrations with sensible some integration with",
    "start": "536860",
    "end": "543880"
  },
  {
    "text": "Jenkins but Bash is the king still you have to write a lot of bash around it",
    "start": "543880",
    "end": "549010"
  },
  {
    "text": "and that's unavoidable another tool which is made specifically for terraform",
    "start": "549010",
    "end": "556120"
  },
  {
    "start": "551000",
    "end": "619000"
  },
  {
    "text": "which is going to be a shiny and soon I think or I hope the tool was made by",
    "start": "556120",
    "end": "564370"
  },
  {
    "text": "people who are using terraform in pretty big set of about hundred different",
    "start": "564370",
    "end": "570490"
  },
  {
    "text": "developers lots of project lots of environments and people wanted to get",
    "start": "570490",
    "end": "575709"
  },
  {
    "text": "confidence how this change will actually be applied in production like can I",
    "start": "575709",
    "end": "583240"
  },
  {
    "text": "guarantee that this change will not break something so Atlantis gives you an",
    "start": "583240",
    "end": "588430"
  },
  {
    "text": "unified workflow through a pull request so you open pull request you commit some",
    "start": "588430",
    "end": "596019"
  },
  {
    "text": "terraform changes there and you allow the reform to be executed by Atlantis",
    "start": "596019",
    "end": "601480"
  },
  {
    "text": "and you can see output so you don't have to distribute credentials to your AWS",
    "start": "601480",
    "end": "606970"
  },
  {
    "text": "environments to individual developers and give them access to production like",
    "start": "606970",
    "end": "613300"
  },
  {
    "text": "to everyone just to be able to do their changes Atlantis does it for you in",
    "start": "613300",
    "end": "621370"
  },
  {
    "start": "619000",
    "end": "672000"
  },
  {
    "text": "Russia Corp there is product for people who are friendly with the enterprise they find this very great tool because",
    "start": "621370",
    "end": "629110"
  },
  {
    "text": "it allows you to run traditional terraform operations from a graphical",
    "start": "629110",
    "end": "636010"
  },
  {
    "text": "user interface they have their own private modules registry which allows to",
    "start": "636010",
    "end": "641980"
  },
  {
    "text": "share there are four modules between developers and different teams and see",
    "start": "641980",
    "end": "647440"
  },
  {
    "text": "what kind of modules are used across the whole organization it's all good and it's all great and I highly recommend to",
    "start": "647440",
    "end": "654850"
  },
  {
    "text": "use it with only one exception that it has Enterprise pricing so take it with",
    "start": "654850",
    "end": "660160"
  },
  {
    "text": "kind of enterprises keyboard here so I don't really know how much they will ask",
    "start": "660160",
    "end": "666519"
  },
  {
    "text": "you if you approach them but I have not met any single customer who is using it",
    "start": "666519",
    "end": "672040"
  },
  {
    "start": "672000",
    "end": "688000"
  },
  {
    "text": "action so as a pre summary we saw how to reform code can be written on developers",
    "start": "672040",
    "end": "678910"
  },
  {
    "text": "machine how it looks like to create small things like a three bucket or a CI",
    "start": "678910",
    "end": "684250"
  },
  {
    "text": "CD options are there and specifically for terraform and there are few gorgeous",
    "start": "684250",
    "end": "691029"
  },
  {
    "start": "688000",
    "end": "828000"
  },
  {
    "text": "about implemented terraform in CI CD pipeline for example when working with",
    "start": "691029",
    "end": "699209"
  },
  {
    "text": "with centralized system like where telephone code is executing the only",
    "start": "699209",
    "end": "706089"
  },
  {
    "text": "option where state terraform state is json file which contains information about resources which were created by",
    "start": "706089",
    "end": "713949"
  },
  {
    "text": "terraform so there are a few options with it one is local state where you",
    "start": "713949",
    "end": "720130"
  },
  {
    "text": "save this file on the machine where it was run a remote state where you save it",
    "start": "720130",
    "end": "725889"
  },
  {
    "text": "outside of developers machine and the remote state option is only option for",
    "start": "725889",
    "end": "731279"
  },
  {
    "text": "such setups also terraform is being a",
    "start": "731279",
    "end": "737220"
  },
  {
    "text": "new project and it has a lot of a lot of",
    "start": "737220",
    "end": "742750"
  },
  {
    "text": "things which you have to practice and see how it works and why it doesn't work so error handling is one of that",
    "start": "742750",
    "end": "749230"
  },
  {
    "text": "scenario where the best solution is to actually try it one more time retry it again retry it again and see that",
    "start": "749230",
    "end": "755949"
  },
  {
    "text": "problem will be fixed the reason for that is that reform does not roll back when there were an error so terraform",
    "start": "755949",
    "end": "763690"
  },
  {
    "text": "plan was going to be changed it planned the whole graph of execution so it knows this resource first then output from",
    "start": "763690",
    "end": "770470"
  },
  {
    "text": "this resource should be passed to another resources parameter and so on so if there were some delays or some",
    "start": "770470",
    "end": "779279"
  },
  {
    "text": "inconsistencies because it's often eventual consistency so eventually it",
    "start": "779279",
    "end": "784389"
  },
  {
    "text": "will be consistent but you better try it one more time and also as a solution is",
    "start": "784389",
    "end": "790209"
  },
  {
    "text": "to tell force terraform to execute not more than one parallel execution while",
    "start": "790209",
    "end": "797050"
  },
  {
    "text": "terraform always try to execute the whole graph of changes as fast as",
    "start": "797050",
    "end": "802240"
  },
  {
    "text": "possible so if you are creating resources which are not connected between themselves in any way",
    "start": "802240",
    "end": "807459"
  },
  {
    "text": "and terraform will issue several requests at once up to six by default and they will be executed and detailed",
    "start": "807459",
    "end": "818350"
  },
  {
    "text": "exit code can be very helpful if you need to know what exactly is going to be changed and whether it has changed or",
    "start": "818350",
    "end": "825910"
  },
  {
    "text": "whether it's an error so when heaven",
    "start": "825910",
    "end": "831670"
  },
  {
    "start": "828000",
    "end": "919000"
  },
  {
    "text": "telephone running on central place like Atlantis or CIS or it's important that",
    "start": "831670",
    "end": "837970"
  },
  {
    "text": "the content of dot telephone directory which is temporary is shared between",
    "start": "837970",
    "end": "843009"
  },
  {
    "text": "execution so that each executor doesn't have new copy of something what may be",
    "start": "843009",
    "end": "850449"
  },
  {
    "text": "miss mentioned it's often when people are using code which is publicly",
    "start": "850449",
    "end": "858639"
  },
  {
    "text": "available but they just fork it and keep their own Fork themselves inside their",
    "start": "858639",
    "end": "864910"
  },
  {
    "text": "organization so that they don't have to be afraid that somebody pushed something",
    "start": "864910",
    "end": "871209"
  },
  {
    "text": "unstable and they're called breaks or somebody delete the whole repository and",
    "start": "871209",
    "end": "876339"
  },
  {
    "text": "then my project has gone completely the important thing is that if your fork in",
    "start": "876339",
    "end": "883839"
  },
  {
    "text": "private github repository and then owner of this private github repository",
    "start": "883839",
    "end": "889209"
  },
  {
    "text": "decided to delete him your Fork is also gone at some times big surprise for people because they think that if",
    "start": "889209",
    "end": "895420"
  },
  {
    "text": "they're for consumption private then it will be there forever no it's not that's",
    "start": "895420",
    "end": "901480"
  },
  {
    "text": "a I mean I was in situation where this was kind of crisis once so that's why",
    "start": "901480",
    "end": "908800"
  },
  {
    "text": "people sometimes tend to fork it on sea",
    "start": "908800",
    "end": "914110"
  },
  {
    "text": "ice or maintain their copy completely isolated from github so when it comes to",
    "start": "914110",
    "end": "922240"
  },
  {
    "start": "919000",
    "end": "990000"
  },
  {
    "text": "secret it's naturally part of CI system using environment variables or some",
    "start": "922240",
    "end": "928569"
  },
  {
    "text": "other things in terraform Secrets will eventually be stored in state file which",
    "start": "928569",
    "end": "935199"
  },
  {
    "text": "is again JSON file so it means that if you have full access to this state file you",
    "start": "935199",
    "end": "942850"
  },
  {
    "text": "can get secrets in plain text in some situations it is possible to use PGP or",
    "start": "942850",
    "end": "950230"
  },
  {
    "text": "key base to make sure that if it is I am access key which is very important key",
    "start": "950230",
    "end": "958089"
  },
  {
    "text": "to get access to a SS API then it will be encrypted and RDS is also having some",
    "start": "958089",
    "end": "965410"
  },
  {
    "text": "features the important thing which is hopefully gonna to come later this year",
    "start": "965410",
    "end": "971440"
  },
  {
    "text": "is that the implementation of secret is not going to be part of providers",
    "start": "971440",
    "end": "977800"
  },
  {
    "text": "themselves but it's going to be implemented as level up in Seraphim core which is much better so that you can",
    "start": "977800",
    "end": "985420"
  },
  {
    "text": "simply say that yes please encrypt this stuff it doesn't matter if provider support it or not so if you look in this",
    "start": "985420",
    "end": "994260"
  },
  {
    "start": "990000",
    "end": "1062000"
  },
  {
    "text": "specific very teeny example of resource",
    "start": "994260",
    "end": "999339"
  },
  {
    "text": "which generate random password and I want this password to be random I keep",
    "start": "999339",
    "end": "1004350"
  },
  {
    "text": "my terraform state file secret it is an s3 bucket which no one has access to and",
    "start": "1004350",
    "end": "1011070"
  },
  {
    "text": "very happy the only thing which people can access is my CI hosted CI tool where",
    "start": "1011070",
    "end": "1018300"
  },
  {
    "text": "it's not a big problem they can look into what what I'm working on but they will not see the password because it's",
    "start": "1018300",
    "end": "1024660"
  },
  {
    "text": "it's here I'm not outputting password so yes in fact when you run terraform apply",
    "start": "1024660",
    "end": "1030300"
  },
  {
    "text": "you're not outputting password but terraform does it for you so be careful when you see a random string and it will",
    "start": "1030300",
    "end": "1039600"
  },
  {
    "text": "be output it as in this example ID j q less - less this is password which was",
    "start": "1039600",
    "end": "1045870"
  },
  {
    "text": "generated by terraform in some cases it can be problem if you render something",
    "start": "1045870",
    "end": "1050940"
  },
  {
    "text": "and too many people have access then they have password here so quite obvious",
    "start": "1050940",
    "end": "1058410"
  },
  {
    "text": "is it just don't deal with passwords that's pretty easy access control",
    "start": "1058410",
    "end": "1065220"
  },
  {
    "start": "1062000",
    "end": "1103000"
  },
  {
    "text": "principles which were which were described many times in many",
    "start": "1065220",
    "end": "1070970"
  },
  {
    "text": "different security related papers and in particular this one I took from a SS",
    "start": "1070970",
    "end": "1079270"
  },
  {
    "text": "documentation yes grant only the permissions required to perform a task which is common sense but",
    "start": "1079270",
    "end": "1086690"
  },
  {
    "text": "in terms of terraform you if you're working on developer machine it's likely",
    "start": "1086690",
    "end": "1092960"
  },
  {
    "text": "that you have full access or admin access to the whole infrastructure for",
    "start": "1092960",
    "end": "1098390"
  },
  {
    "text": "some small setups it may be good for big setups where you have lots of developers the best approach which I can recommend",
    "start": "1098390",
    "end": "1106309"
  },
  {
    "start": "1103000",
    "end": "1175000"
  },
  {
    "text": "is that you actually use different types of access key and different types of roles so you as a user may belong may",
    "start": "1106309",
    "end": "1114620"
  },
  {
    "text": "have access to two to two different a SS I am roles one is read-only and another",
    "start": "1114620",
    "end": "1120169"
  },
  {
    "text": "is admin role which allows to do destroy and change operations terraform has",
    "start": "1120169",
    "end": "1128270"
  },
  {
    "text": "several commands which use just I mean which is enough to use just read-only",
    "start": "1128270",
    "end": "1134149"
  },
  {
    "text": "roles which is in neutral fresh validate plan which means that you will never",
    "start": "1134149",
    "end": "1139700"
  },
  {
    "text": "touch resources and you will never change anything there that's in most",
    "start": "1139700",
    "end": "1144799"
  },
  {
    "text": "situation enough so this is something what you can safely give to developers",
    "start": "1144799",
    "end": "1151730"
  },
  {
    "text": "if they need to just plan something to see what's going to happen to validate",
    "start": "1151730",
    "end": "1157309"
  },
  {
    "text": "that syntaxes is correct and so on but if your CI CI CD 2 is actually doing",
    "start": "1157309",
    "end": "1164779"
  },
  {
    "text": "something more than it's better to to use multi-factor authentication in order",
    "start": "1164779",
    "end": "1172909"
  },
  {
    "text": "to assume admin role so access control",
    "start": "1172909",
    "end": "1178429"
  },
  {
    "text": "is one thing and in some situations you may also think that when developers",
    "start": "1178429",
    "end": "1186409"
  },
  {
    "text": "submit a code for the review you think that that's exactly what he wants",
    "start": "1186409",
    "end": "1191919"
  },
  {
    "text": "usually it's it's it's not always the case sometimes he has to have some more",
    "start": "1191919",
    "end": "1199520"
  },
  {
    "text": "like opinion some more discussions and Capital One has a tool to simplify",
    "start": "1199520",
    "end": "1205549"
  },
  {
    "text": "pull request approval and make more sophisticated rules like who has to be",
    "start": "1205549",
    "end": "1211460"
  },
  {
    "text": "able to say that this is good code and who should not say that this is bad code",
    "start": "1211460",
    "end": "1217340"
  },
  {
    "text": "so you count plus plus one and minus one and then see based on complicated rule",
    "start": "1217340",
    "end": "1224629"
  },
  {
    "text": "that this code is actually correct for those who worked with Garrett this is similar thing and it's it's heavily",
    "start": "1224629",
    "end": "1231950"
  },
  {
    "text": "dependent on how you structure your code so there will be some information about",
    "start": "1231950",
    "end": "1237379"
  },
  {
    "start": "1235000",
    "end": "1274000"
  },
  {
    "text": "this so telephone design patterns is related to how you structure your code yeah if",
    "start": "1237379",
    "end": "1243349"
  },
  {
    "text": "reading documentation terraform website you may think that it's okay to create",
    "start": "1243349",
    "end": "1248659"
  },
  {
    "text": "just resources individually then you figure out that it's better to group them by modules and if you think more",
    "start": "1248659",
    "end": "1255320"
  },
  {
    "text": "about this then you can think about what kind of modules are there so resource modules infrastructure models and",
    "start": "1255320",
    "end": "1261320"
  },
  {
    "text": "compositions this three big concepts big patterns I would say which helps us to",
    "start": "1261320",
    "end": "1269539"
  },
  {
    "text": "make really reusable infrastructure as code so resource modules job is only to",
    "start": "1269539",
    "end": "1278869"
  },
  {
    "start": "1274000",
    "end": "1323000"
  },
  {
    "text": "create resources they're flexible they have no relations to anything else and they support your Shannon that's the",
    "start": "1278869",
    "end": "1284989"
  },
  {
    "text": "main idea of resource modules most of terraform a diverse models which I maintain are exactly these kind of",
    "start": "1284989",
    "end": "1292129"
  },
  {
    "text": "things so it's it's very hard to make something new in VPC and it's unlikely",
    "start": "1292129",
    "end": "1299570"
  },
  {
    "text": "that you need to maintain your own VPC module because it's it's it simply has",
    "start": "1299570",
    "end": "1305389"
  },
  {
    "text": "all possibilities already if it doesn't have people contribute codes and we",
    "start": "1305389",
    "end": "1311059"
  },
  {
    "text": "maintain it it has about 200 of stars right now and lots of pull requests",
    "start": "1311059",
    "end": "1317749"
  },
  {
    "text": "issues and discussions so it's pretty active projects on terraform a SS models",
    "start": "1317749",
    "end": "1323259"
  },
  {
    "start": "1323000",
    "end": "1366000"
  },
  {
    "text": "another side is terraform infrastructure modules the difference is that this is",
    "start": "1323259",
    "end": "1328309"
  },
  {
    "text": "like parent four resource modules they often enforced company-wide standards",
    "start": "1328309",
    "end": "1334099"
  },
  {
    "text": "like tagging name they may fulfill missing features of terraform by using JSON net to generate",
    "start": "1334099",
    "end": "1340750"
  },
  {
    "text": "some pieces of code or cookie cutter to generate some more complicated structure and they always version according to",
    "start": "1340750",
    "end": "1349090"
  },
  {
    "text": "some schema semantic versioning is not always good but versioning it by date",
    "start": "1349090",
    "end": "1355059"
  },
  {
    "text": "months here months and date is often good because it gives you an indication",
    "start": "1355059",
    "end": "1361690"
  },
  {
    "text": "when this when this module was lost released composition on another side is",
    "start": "1361690",
    "end": "1369159"
  },
  {
    "start": "1366000",
    "end": "1400000"
  },
  {
    "text": "parent from infrastructure and resource modules so it is something what describes the whole infrastructure which",
    "start": "1369159",
    "end": "1376450"
  },
  {
    "text": "is valid for the whole region or for the whole environment or for the whole",
    "start": "1376450",
    "end": "1381490"
  },
  {
    "text": "project or module module is probably bad word here but project region AWS account",
    "start": "1381490",
    "end": "1388750"
  },
  {
    "text": "something more global and Tara grant I wouldn't go about this but Tara grant",
    "start": "1388750",
    "end": "1393880"
  },
  {
    "text": "you can search about it as two to describe composition in in very nice way",
    "start": "1393880",
    "end": "1399880"
  },
  {
    "text": "so basic pipeline for the code looks like this and when I say for the code",
    "start": "1399880",
    "end": "1405309"
  },
  {
    "start": "1400000",
    "end": "1445000"
  },
  {
    "text": "you can replace world code for infrastructure code application code it's it has to look exactly the same",
    "start": "1405309",
    "end": "1411429"
  },
  {
    "text": "there is no reason so you say that you're gonna to work a new feature so you make a branch you commit code to",
    "start": "1411429",
    "end": "1417640"
  },
  {
    "text": "this branch you push this branch you open pull request then people review this code and once it's approved then",
    "start": "1417640",
    "end": "1425710"
  },
  {
    "text": "this branch is merged into master and we just run tariff on apply in the master",
    "start": "1425710",
    "end": "1432880"
  },
  {
    "text": "branch and we have this change implemented so for infrastructure again and for application it should be exactly",
    "start": "1432880",
    "end": "1440890"
  },
  {
    "text": "the same of course the last step is different for application so it looks",
    "start": "1440890",
    "end": "1448059"
  },
  {
    "start": "1445000",
    "end": "1486000"
  },
  {
    "text": "something like this is that this is an example of how pipeline looked for",
    "start": "1448059",
    "end": "1453130"
  },
  {
    "text": "circle CI circle CI is just managed service which allows to describe",
    "start": "1453130",
    "end": "1458380"
  },
  {
    "text": "workflows in a synonym of pipeline and it has certain steps",
    "start": "1458380",
    "end": "1463720"
  },
  {
    "text": "it has possibility to run it in parallel or sequentially and it has",
    "start": "1463720",
    "end": "1469240"
  },
  {
    "text": "old approval so that before applying infrastructure you can actually see this",
    "start": "1469240",
    "end": "1477430"
  },
  {
    "text": "yourself and say yes that's a want so then it applies so it it's one of many",
    "start": "1477430",
    "end": "1484090"
  },
  {
    "text": "many tools so pipeline for modules can",
    "start": "1484090",
    "end": "1491470"
  },
  {
    "start": "1486000",
    "end": "1576000"
  },
  {
    "text": "look a little bit different because Moodle essentially in something what you share in the organization and it should",
    "start": "1491470",
    "end": "1499150"
  },
  {
    "text": "be able to do something what you don't want your users or users of your modules",
    "start": "1499150",
    "end": "1505180"
  },
  {
    "text": "to do for example you often have to implement some mission features of",
    "start": "1505180",
    "end": "1510700"
  },
  {
    "text": "terraform just there and don't let your developers who don't know what is",
    "start": "1510700",
    "end": "1515710"
  },
  {
    "text": "terraform for example to be to be scattered by this so just hide this away",
    "start": "1515710",
    "end": "1522130"
  },
  {
    "text": "from them and wait to run tests on",
    "start": "1522130",
    "end": "1528610"
  },
  {
    "text": "modules is there are different providers and different different tools this is",
    "start": "1528610",
    "end": "1535960"
  },
  {
    "text": "very new area a lot of people are doing it just by comparing plan of the module",
    "start": "1535960",
    "end": "1544840"
  },
  {
    "text": "and see what kind of resources are gonna to be created and that's what they want",
    "start": "1544840",
    "end": "1550930"
  },
  {
    "text": "another type of this is to actually spin up the whole infrastructure based on",
    "start": "1550930",
    "end": "1556330"
  },
  {
    "text": "tech based on fixtures which were provided by the module and then ask",
    "start": "1556330",
    "end": "1561840"
  },
  {
    "text": "provider which is a device provider or Google cloud provider and ask if this",
    "start": "1561840",
    "end": "1568600"
  },
  {
    "text": "instance or if this resource was actually created and then compare this answers there are a few tools which I",
    "start": "1568600",
    "end": "1579340"
  },
  {
    "start": "1576000",
    "end": "1657000"
  },
  {
    "text": "want to share with you so some of them",
    "start": "1579340",
    "end": "1584610"
  },
  {
    "text": "are very helpful to make sure that your code which you're writing is actually",
    "start": "1584610",
    "end": "1591250"
  },
  {
    "text": "correct before applying it and looks for formatting and looks for very easy to",
    "start": "1591250",
    "end": "1598990"
  },
  {
    "text": "catch errors for example if you're specifying wrong or and for example you specify security",
    "start": "1598990",
    "end": "1606659"
  },
  {
    "text": "group which does not exist so TF Flint who will be able to tell you and will",
    "start": "1606659",
    "end": "1612499"
  },
  {
    "text": "will be able to say this before you actually run terraform apply and terraform apply and see oh it doesn't",
    "start": "1612499",
    "end": "1619619"
  },
  {
    "text": "exist so it's very good idea to execute this early on also it can tell you that",
    "start": "1619619",
    "end": "1625499"
  },
  {
    "text": "you are referring let's say instance type which does not exist or something",
    "start": "1625499",
    "end": "1632159"
  },
  {
    "text": "like this terraform dogs is another tool which allows to generate telephone",
    "start": "1632159",
    "end": "1637259"
  },
  {
    "text": "modules documentation by by getting information about variables and outputs",
    "start": "1637259",
    "end": "1645059"
  },
  {
    "text": "which is very good idea if you make a module and want it to be sharable so",
    "start": "1645059",
    "end": "1650849"
  },
  {
    "text": "people have to understand what kind of inputs and what kind of outputs modules except so what we are talking about",
    "start": "1650849",
    "end": "1662839"
  },
  {
    "start": "1657000",
    "end": "1672000"
  },
  {
    "text": "infrastructure has code we think that yes let's automate everything put everything in pipeline it will work",
    "start": "1663109",
    "end": "1669089"
  },
  {
    "text": "nicely it's not always like this because of course there are a lot of things",
    "start": "1669089",
    "end": "1674309"
  },
  {
    "text": "which we cannot do with pipelines even if they look good and work usually much",
    "start": "1674309",
    "end": "1680849"
  },
  {
    "text": "much better for application code there are a lot of things which we have to do",
    "start": "1680849",
    "end": "1686749"
  },
  {
    "text": "outside of pipeline manually things like",
    "start": "1686749",
    "end": "1691859"
  },
  {
    "text": "refactoring or upgrading versions of different dependencies or if we discover",
    "start": "1691859",
    "end": "1697679"
  },
  {
    "text": "some rollback or if somebody quite often happened somebody executes terraform",
    "start": "1697679",
    "end": "1706139"
  },
  {
    "text": "apply on his laptop and didn't want to wait forever so he just closed laptop",
    "start": "1706139",
    "end": "1711179"
  },
  {
    "text": "and go home then it means that infrastructure is locked and you can do changes so you",
    "start": "1711179",
    "end": "1716519"
  },
  {
    "text": "have to force unlock it this happens quite often when people don't think that",
    "start": "1716519",
    "end": "1722579"
  },
  {
    "text": "it's actually working from your machine so it's important that you have connections open you have to make sure",
    "start": "1722579",
    "end": "1729629"
  },
  {
    "text": "that it's still on until it finish so there are a lot of telephone problems",
    "start": "1729629",
    "end": "1737850"
  },
  {
    "start": "1734000",
    "end": "1747000"
  },
  {
    "text": "which I was experienced in myself and a lot of them which I got from different",
    "start": "1737850",
    "end": "1745140"
  },
  {
    "text": "sources like Reddit and Stack Overflow and emails as well sometimes people send",
    "start": "1745140",
    "end": "1750300"
  },
  {
    "start": "1747000",
    "end": "1883000"
  },
  {
    "text": "me piece of code which I would never think that people can run but yeah it works so refactoring is a refactoring is",
    "start": "1750300",
    "end": "1760860"
  },
  {
    "text": "actually adding new feature or moving one module to another place or renaming",
    "start": "1760860",
    "end": "1768210"
  },
  {
    "text": "something the definition of refactoring which are like most is a refactoring is",
    "start": "1768210",
    "end": "1775490"
  },
  {
    "text": "making incremental changes into the infrastructure or into the code which",
    "start": "1775490",
    "end": "1780630"
  },
  {
    "text": "brings you to the desired State closer and closer so normally refactoring has to be small like",
    "start": "1780630",
    "end": "1787130"
  },
  {
    "text": "incremental and you have to accept some temporary temporary ugliness but the end",
    "start": "1787130",
    "end": "1794580"
  },
  {
    "text": "goal is to have code properly structured and terraform State MV is one of the",
    "start": "1794580",
    "end": "1800280"
  },
  {
    "text": "most powerful comment which allows to move definition or configuration of",
    "start": "1800280",
    "end": "1807060"
  },
  {
    "text": "resource between different modules or it can allow to rename resources and also",
    "start": "1807060",
    "end": "1814590"
  },
  {
    "text": "if you have lots of different modules in one project you may have to have some",
    "start": "1814590",
    "end": "1821180"
  },
  {
    "text": "some need to update versions of all of them for example you want to run latest",
    "start": "1821180",
    "end": "1827700"
  },
  {
    "text": "version of your modules and so on so for the probably for the name I decided to",
    "start": "1827700",
    "end": "1836550"
  },
  {
    "text": "start I used ansible before and I used terraform as well so I just decided to",
    "start": "1836550",
    "end": "1842910"
  },
  {
    "text": "combine this into one tool called terrible and it works for me mainly",
    "start": "1842910",
    "end": "1850050"
  },
  {
    "text": "because I can write Commons like make terrible plan or make terrible update",
    "start": "1850050",
    "end": "1856350"
  },
  {
    "text": "and then it goes recursively in all projects where terraform was found and",
    "start": "1856350",
    "end": "1862710"
  },
  {
    "text": "do something for it so ansible turn out to be not the best",
    "start": "1862710",
    "end": "1867850"
  },
  {
    "text": "tool for working with files and updating some files and running things",
    "start": "1867850",
    "end": "1873130"
  },
  {
    "text": "sequentially it is extremely complicated and I'm really glad that I pick up and",
    "start": "1873130",
    "end": "1879340"
  },
  {
    "text": "Sybil for the name that's it so terraform upgrade is very tricky part",
    "start": "1879340",
    "end": "1888070"
  },
  {
    "start": "1883000",
    "end": "2033000"
  },
  {
    "text": "of it one new version of terraform comes up and you start using it you don't",
    "start": "1888070",
    "end": "1893890"
  },
  {
    "text": "really know that it will work hundred percent for your infrastructure or not it's very often that very small bug",
    "start": "1893890",
    "end": "1900580"
  },
  {
    "text": "which will be revealed after two or three days of usage in some small use",
    "start": "1900580",
    "end": "1905920"
  },
  {
    "text": "case in some strange situation the thing is that when you start now it's not so",
    "start": "1905920",
    "end": "1912430"
  },
  {
    "text": "big problem anymore because release cycle is every three months and if you are not willing to use the latest",
    "start": "1912430",
    "end": "1920380"
  },
  {
    "text": "version it's ok you can wait for two week after lease when another version will be released with more fixes but if",
    "start": "1920380",
    "end": "1927340"
  },
  {
    "text": "you are in situation where new version has been roll out your developers start making changes into your infrastructure",
    "start": "1927340",
    "end": "1935470"
  },
  {
    "text": "and deploy applied these changes the state file contains meta information",
    "start": "1935470",
    "end": "1940660"
  },
  {
    "text": "which says which version of terraform was used and this meta information is",
    "start": "1940660",
    "end": "1947730"
  },
  {
    "text": "verified every time when you try to run terraform on new machine if version if",
    "start": "1947730",
    "end": "1954580"
  },
  {
    "text": "state file was updated with a latest version of terraform later than the one",
    "start": "1954580",
    "end": "1959770"
  },
  {
    "text": "which you have a new machine it will not let you execute it it will say that oh this file was modified with newest",
    "start": "1959770",
    "end": "1966790"
  },
  {
    "text": "version so you have to update it and you figure out that this version is not the",
    "start": "1966790",
    "end": "1974020"
  },
  {
    "text": "one which i want so i want to roll back the roll back means that you have to download a previous version of your",
    "start": "1974020",
    "end": "1979930"
  },
  {
    "text": "state file from s3 bucket and tell terraform to use that one instead because you want to stick to the",
    "start": "1979930",
    "end": "1988000"
  },
  {
    "text": "previous version until the bug is fixed so they specific three comments download",
    "start": "1988000",
    "end": "1993790"
  },
  {
    "text": "previous version from s3 bucket and push it by overwrite an existing",
    "start": "1993790",
    "end": "2001140"
  },
  {
    "text": "existing state file this is a pretty scary command to do if you have a lot of",
    "start": "2001140",
    "end": "2007179"
  },
  {
    "text": "state files or if you have one big state file where lots of developers are",
    "start": "2007179",
    "end": "2012640"
  },
  {
    "text": "managing so one thing related to terraform upgrade which I really recommend is to have a lot of small files where you you",
    "start": "2012640",
    "end": "2021309"
  },
  {
    "text": "change small things you have very few resources in these files then when you",
    "start": "2021309",
    "end": "2026440"
  },
  {
    "text": "run into trouble like this it would be much easier to revert just small subsets",
    "start": "2026440",
    "end": "2031539"
  },
  {
    "text": "of resources so terraform log says it can is happening when developer closed",
    "start": "2031539",
    "end": "2038950"
  },
  {
    "start": "2033000",
    "end": "2091000"
  },
  {
    "text": "his laptop do your an execution and go home so then the rest of the team has to",
    "start": "2038950",
    "end": "2044049"
  },
  {
    "text": "do something luckily there is common to do a force unlock and as I mentioned earlier there",
    "start": "2044049",
    "end": "2050710"
  },
  {
    "text": "is tool called Atlantis which allows to run terraform commons from full requests",
    "start": "2050710",
    "end": "2056730"
  },
  {
    "text": "a couple weeks ago I open source module for run in Atlantis because I want",
    "start": "2056730",
    "end": "2063190"
  },
  {
    "text": "people to actually use it to get confirmation for the changes which",
    "start": "2063190",
    "end": "2068800"
  },
  {
    "text": "they're gonna to work to implement in terraform is actually what they want so",
    "start": "2068800",
    "end": "2074378"
  },
  {
    "text": "I made this module and these telephone configurations which you can run in I",
    "start": "2074379",
    "end": "2080320"
  },
  {
    "text": "don't know in couple minutes just by providing a few very few parameters and",
    "start": "2080320",
    "end": "2085419"
  },
  {
    "text": "get production ready Atlantis up and running so are there any questions",
    "start": "2085419",
    "end": "2094750"
  },
  {
    "start": "2091000",
    "end": "2520000"
  },
  {
    "text": "before I show something else no ok then",
    "start": "2094750",
    "end": "2100510"
  },
  {
    "text": "I will show something something is",
    "start": "2100510",
    "end": "2105270"
  },
  {
    "text": "[Music]",
    "start": "2106450",
    "end": "2109540"
  },
  {
    "text": "so I want to show how this pipeline looks like so I can you see it yeah you",
    "start": "2112960",
    "end": "2122780"
  },
  {
    "text": "can see it's good so I'm using circle CI to execute certain steps so I'm",
    "start": "2122780",
    "end": "2134540"
  },
  {
    "text": "executing steps to validate infrastructure to plan infrastructure and to apply infrastructure I also ask",
    "start": "2134540",
    "end": "2144950"
  },
  {
    "text": "for confirmation that things which are planned is actually what you want",
    "start": "2144950",
    "end": "2150100"
  },
  {
    "text": "so this syntax is is part of circle CI",
    "start": "2150100",
    "end": "2156320"
  },
  {
    "text": "and it doesn't have anything to do with terraform itself so the configuration",
    "start": "2156320",
    "end": "2162350"
  },
  {
    "text": "for this example looks like this so that starting from the top I'm making I'm",
    "start": "2162350",
    "end": "2171710"
  },
  {
    "text": "defining which version of a SS provider I want to use and then I'm getting",
    "start": "2171710",
    "end": "2177200"
  },
  {
    "text": "information about existing default V PC and default subnet or existing subnets",
    "start": "2177200",
    "end": "2184490"
  },
  {
    "text": "and then I'm going to create security group by invoking security group module",
    "start": "2184490",
    "end": "2190970"
  },
  {
    "text": "and then I'm going to create ec2 instance with this name and this",
    "start": "2190970",
    "end": "2198290"
  },
  {
    "text": "instance type so that's all what it does nothing very special what I want to show",
    "start": "2198290",
    "end": "2206420"
  },
  {
    "text": "is that this this code can be executed in multiple different ways so I put it",
    "start": "2206420",
    "end": "2215300"
  },
  {
    "text": "in github can you see the screen okay",
    "start": "2215300",
    "end": "2222390"
  },
  {
    "text": "so yeah so this main TF file is executed",
    "start": "2222390",
    "end": "2231810"
  },
  {
    "text": "when when you run terraform actually all TF files are combined so you don't have",
    "start": "2231810",
    "end": "2237060"
  },
  {
    "text": "to care about names of them so all of them will be combined and resolved",
    "start": "2237060",
    "end": "2242450"
  },
  {
    "text": "simultaneously so in the example which i want to do is that if I run this",
    "start": "2242450",
    "end": "2250610"
  },
  {
    "text": "terraform init from my local then it will download dependencies and it will see what has to be done it says that",
    "start": "2250610",
    "end": "2259430"
  },
  {
    "text": "everything is good and I have to be able to run terraform plan and terraform apply so if I now run",
    "start": "2259430",
    "end": "2269390"
  },
  {
    "text": "[Music]",
    "start": "2269390",
    "end": "2272469"
  },
  {
    "text": "so it says that that instance has been",
    "start": "2276600",
    "end": "2283240"
  },
  {
    "text": "created because I launched it before and here we can see what the Torah form is",
    "start": "2283240",
    "end": "2288369"
  },
  {
    "text": "telling what exactly is going to be changed in order to apply this configuration against existing AWS",
    "start": "2288369",
    "end": "2296350"
  },
  {
    "text": "infrastructure which are on previously so it tells that this yellow lines means",
    "start": "2296350",
    "end": "2302860"
  },
  {
    "text": "that information will be changed in place but at the moment elastic IP is",
    "start": "2302860",
    "end": "2308950"
  },
  {
    "text": "assigned to this instance and it will get instance ID from this launched",
    "start": "2308950",
    "end": "2317080"
  },
  {
    "text": "instance the sequence and which comments will be executed in which holder is up",
    "start": "2317080",
    "end": "2323350"
  },
  {
    "text": "to terraform to define telephone knows about this very well it's very seldom what we have to tell it to actually do",
    "start": "2323350",
    "end": "2330970"
  },
  {
    "text": "one thing before another so this code will create ec2 instance of specified",
    "start": "2330970",
    "end": "2338290"
  },
  {
    "text": "instance type with this name and it will delete the previous one so we can see",
    "start": "2338290",
    "end": "2345160"
  },
  {
    "text": "that it has to add instance then it has to change the elastic IP to assign it to the new instance and it will destroy the",
    "start": "2345160",
    "end": "2352270"
  },
  {
    "text": "old instance so that's what I want I can run this code here that if I do this it",
    "start": "2352270",
    "end": "2360940"
  },
  {
    "text": "will again show me the plan and it will ask me if that's what I want normally if I'm single developer or if I",
    "start": "2360940",
    "end": "2368680"
  },
  {
    "text": "don't have continuous integration pipeline around that's what I would do but in this case I don't need to run it",
    "start": "2368680",
    "end": "2377230"
  },
  {
    "text": "so I can just say no or type anything else because I don't want to run it from",
    "start": "2377230",
    "end": "2382240"
  },
  {
    "text": "my local machine this would be this would be too boring if I mean it works for my machine works on my computer",
    "start": "2382240",
    "end": "2388000"
  },
  {
    "text": "that's too bad let's try to get it up and running from",
    "start": "2388000",
    "end": "2393640"
  },
  {
    "text": "the CI and imagine that there are many developers working on the same code so",
    "start": "2393640",
    "end": "2400390"
  },
  {
    "text": "the first thing is that I want to do real change and see see that really",
    "start": "2400390",
    "end": "2407859"
  },
  {
    "text": "Clyde so let's say I want to have instance type not do to learn about t2",
    "start": "2407859",
    "end": "2414609"
  },
  {
    "text": "micron so that's a real change which I want to make so check out type check out yeah I wrote",
    "start": "2414609",
    "end": "2432309"
  },
  {
    "text": "it correct but almost so",
    "start": "2432309",
    "end": "2437190"
  },
  {
    "text": "you",
    "start": "2439160",
    "end": "2442030"
  },
  {
    "text": "so I'm trying to work exactly the same way as was cold so there are a couple",
    "start": "2449160",
    "end": "2455160"
  },
  {
    "text": "pre-commit hooks which were executed on my coat because I really don't like developers to talk about hey there",
    "start": "2455160",
    "end": "2462310"
  },
  {
    "text": "should be spaces or here should be tabs there is one canonical way to from a",
    "start": "2462310",
    "end": "2467530"
  },
  {
    "text": "telephone code which is called terraform FMT that's done the configuration for",
    "start": "2467530",
    "end": "2473310"
  },
  {
    "text": "for this is in pre-commit config where i'm invoking pre-commit hook called",
    "start": "2473310",
    "end": "2480220"
  },
  {
    "text": "terraform fmt and that's what i want i also want to make sure that there are no",
    "start": "2480220",
    "end": "2485590"
  },
  {
    "text": "norge conflicts so that's that is also verified so this commit has happened and",
    "start": "2485590",
    "end": "2492970"
  },
  {
    "text": "I can now push [Music]",
    "start": "2492970",
    "end": "2500470"
  },
  {
    "text": "cool so now I'm making pull requests to the master branch time to start the text",
    "start": "2504600",
    "end": "2513100"
  },
  {
    "text": "editor good idea yeah time to download updates excellent okay",
    "start": "2513100",
    "end": "2521050"
  },
  {
    "start": "2520000",
    "end": "2957000"
  },
  {
    "text": "so poor request has been created and if I go there I can see that",
    "start": "2521050",
    "end": "2528360"
  },
  {
    "text": "this is exactly what what I made and now",
    "start": "2528360",
    "end": "2534670"
  },
  {
    "text": "see I Circle CI has been triggered to run certain steps so let's look into",
    "start": "2534670",
    "end": "2540570"
  },
  {
    "text": "circle CI circle CI is it's very I would say strange product because it was",
    "start": "2540570",
    "end": "2548170"
  },
  {
    "text": "working for years in chrome and stopped working for in chrome just couple weeks",
    "start": "2548170",
    "end": "2553330"
  },
  {
    "text": "ago so that's the only reason why I use Safari I think it is because they use",
    "start": "2553330",
    "end": "2559420"
  },
  {
    "text": "approximately 12 social trackers just for fun and the pipeline here looks like",
    "start": "2559420",
    "end": "2567240"
  },
  {
    "text": "like this so the simplified way is that I ran tariffs or invalidate comment on",
    "start": "2567240",
    "end": "2572920"
  },
  {
    "text": "the first step and then I run plan so that's that's I can see that in it was",
    "start": "2572920",
    "end": "2580540"
  },
  {
    "text": "happening and validate comments happened and it says good so everything was",
    "start": "2580540",
    "end": "2587050"
  },
  {
    "text": "formatted correctly so let's see steps like plan was executed and I can explain",
    "start": "2587050",
    "end": "2596170"
  },
  {
    "text": "that this is change which I wanted to do yes in fact that's it she to nano and he to micron excellent",
    "start": "2596170",
    "end": "2603130"
  },
  {
    "text": "so as you can see I made pull request I work in branch and I can see what what",
    "start": "2603130",
    "end": "2611710"
  },
  {
    "text": "circle see I just reported that green so I was using circle CI to work on feature",
    "start": "2611710",
    "end": "2617890"
  },
  {
    "text": "branch that's fine this worked 100% well for application code but with",
    "start": "2617890",
    "end": "2625210"
  },
  {
    "text": "infrastructure changes again there is Atlantis Atlantis would allow me to run",
    "start": "2625210",
    "end": "2630310"
  },
  {
    "text": "this code right from this pull request where I can just type",
    "start": "2630310",
    "end": "2635720"
  },
  {
    "text": "at lunches plan and if I run Atlantis",
    "start": "2635720",
    "end": "2641510"
  },
  {
    "text": "plan and if I would provide a fish or",
    "start": "2641510",
    "end": "2646780"
  },
  {
    "text": "sufficient credentials for IDEs right now then it will output in in the right",
    "start": "2646780",
    "end": "2654200"
  },
  {
    "text": "way what is the output of this comment so what it does is that it runs",
    "start": "2654200",
    "end": "2659230"
  },
  {
    "text": "terraform any telephone plan on the Fargate service and output from there",
    "start": "2659230",
    "end": "2666109"
  },
  {
    "text": "into this into this pull request the reason why it is failing now is that",
    "start": "2666109",
    "end": "2672619"
  },
  {
    "text": "this is public repository literally everyone can go there and write Atlantis",
    "start": "2672619",
    "end": "2678440"
  },
  {
    "text": "plan or one of the security holes which is not fixed yet but I'm working on it",
    "start": "2678440",
    "end": "2684500"
  },
  {
    "text": "quite actively is that if you commit your code which literally echo AWS",
    "start": "2684500",
    "end": "2694089"
  },
  {
    "text": "secret key and access key you would get them that's not what I want so the way",
    "start": "2694089",
    "end": "2701089"
  },
  {
    "text": "to do this is to use very short leave temporary credentials which are valid",
    "start": "2701089",
    "end": "2706250"
  },
  {
    "text": "just for this plan so you assume valid credentials for a very short time not",
    "start": "2706250",
    "end": "2711770"
  },
  {
    "text": "for time but you explicitly revoke them at the end of execution of Atlantis so",
    "start": "2711770",
    "end": "2717050"
  },
  {
    "text": "you don't have one minute of 20 seconds you have just how much a plant is running and the correct output would",
    "start": "2717050",
    "end": "2725450"
  },
  {
    "text": "look here like this if that's what I want then another comment which I can run at",
    "start": "2725450",
    "end": "2731990"
  },
  {
    "text": "lunch is apply and again Atlantis is",
    "start": "2731990",
    "end": "2737030"
  },
  {
    "text": "listening to github webhook and that lunges would execute this code now it will fail by exactly the same",
    "start": "2737030",
    "end": "2743270"
  },
  {
    "text": "reason because I didn't give enough credentials to it I'm working on it and",
    "start": "2743270",
    "end": "2749300"
  },
  {
    "text": "I think I will fix it during this week to make it actually usable for the",
    "start": "2749300",
    "end": "2755240"
  },
  {
    "text": "public repositories but developers of Atlantis are not recommending this",
    "start": "2755240",
    "end": "2760520"
  },
  {
    "text": "exactly for this reason that you can steal credentials so we'll see what happens I try to work on it on very",
    "start": "2760520",
    "end": "2767480"
  },
  {
    "text": "isolated environment without Tennyson shared so I hope nobody will",
    "start": "2767480",
    "end": "2773119"
  },
  {
    "text": "submit to terraform code for mining bitcoins but nevertheless it's good idea",
    "start": "2773119",
    "end": "2778190"
  },
  {
    "text": "we can make Terra for models for mining bitcoins openly so so when we run",
    "start": "2778190",
    "end": "2786349"
  },
  {
    "text": "Atlanta supply it will fail because plan was executed but plan was not approved",
    "start": "2786349",
    "end": "2793010"
  },
  {
    "text": "so now as as an approval of this code imagine that you see a terraform plan",
    "start": "2793010",
    "end": "2799880"
  },
  {
    "text": "and you say yes I approve this so you have to actually click somewhere here",
    "start": "2799880",
    "end": "2806150"
  },
  {
    "text": "reviewers there would be named some of somebody and he says yes I approve it so",
    "start": "2806150",
    "end": "2811490"
  },
  {
    "text": "then it's it means that it's not possible to apply code but it's possible to plan for everyone there are some",
    "start": "2811490",
    "end": "2820010"
  },
  {
    "text": "workarounds necessary to implement multi-factor education in order to apply",
    "start": "2820010",
    "end": "2825020"
  },
  {
    "text": "changes in sensitive environments or with sensitive settings but it's not",
    "start": "2825020",
    "end": "2831410"
  },
  {
    "text": "part of Atlantis yet so as you can see",
    "start": "2831410",
    "end": "2837310"
  },
  {
    "text": "this worked for pipeline in this work for pipeline in pull request let's say",
    "start": "2837310",
    "end": "2845900"
  },
  {
    "text": "if I'm your today's code now there should be another type of pipeline which is executed so now code is in master",
    "start": "2845900",
    "end": "2854300"
  },
  {
    "text": "branch which means that pipeline has started",
    "start": "2854300",
    "end": "2860980"
  },
  {
    "text": "so yes this is view for the pipeline and",
    "start": "2863670",
    "end": "2870640"
  },
  {
    "text": "this pipeline has two more steps so after the plan phase it will ask for",
    "start": "2870640",
    "end": "2876550"
  },
  {
    "text": "approval and approval is valid for I think one day or maybe maybe even",
    "start": "2876550",
    "end": "2884350"
  },
  {
    "text": "several months I don't remember which means that you can take a look and see",
    "start": "2884350",
    "end": "2890170"
  },
  {
    "text": "that's what you want to apply and you have to manually click here and say yes",
    "start": "2890170",
    "end": "2895360"
  },
  {
    "text": "I want it and if if plan succeed so plan",
    "start": "2895360",
    "end": "2901690"
  },
  {
    "text": "should succeed",
    "start": "2901690",
    "end": "2904530"
  },
  {
    "text": "so then approval will be visible and once I click apply the changes are",
    "start": "2909950",
    "end": "2916260"
  },
  {
    "text": "actually applied so now it says on hold it asked me to verify imagine that I",
    "start": "2916260",
    "end": "2924000"
  },
  {
    "text": "checked plan and yes that's have one so I approve and now from this phase it",
    "start": "2924000",
    "end": "2930060"
  },
  {
    "text": "goes to apply infrastructure phase proof",
    "start": "2930060",
    "end": "2939230"
  },
  {
    "text": "almost",
    "start": "2939230",
    "end": "2942230"
  },
  {
    "text": "right so now it's applying changes and it will be soon finished so going back",
    "start": "2945590",
    "end": "2953720"
  },
  {
    "text": "to couple slides which I have here so at",
    "start": "2953720",
    "end": "2959150"
  },
  {
    "start": "2957000",
    "end": "2993000"
  },
  {
    "text": "the final summary ci City is good for automated things but a lot of things are",
    "start": "2959150",
    "end": "2964640"
  },
  {
    "text": "still necessarily related to refactoring upgrade rollbacks force unlock are still",
    "start": "2964640",
    "end": "2971020"
  },
  {
    "text": "better to be done by humans especially a refactoring it's not like with code",
    "start": "2971020",
    "end": "2976970"
  },
  {
    "text": "where you build some binary and that's it when using minimum roles is important",
    "start": "2976970",
    "end": "2985670"
  },
  {
    "text": "then you have to use it and MFA is used to deploy to production or do some destructive changes so yeah the question",
    "start": "2985670",
    "end": "2995750"
  },
  {
    "start": "2993000",
    "end": "3113000"
  },
  {
    "text": "if the first question is about stickers and the answer is yes and do you have any other questions so yeah",
    "start": "2995750",
    "end": "3008070"
  },
  {
    "text": "did you roll back by check out earlier commits is that how you do robux so the",
    "start": "3009510",
    "end": "3017770"
  },
  {
    "text": "question is how do i do roll backs roll backs of the code for like a state for",
    "start": "3017770",
    "end": "3024910"
  },
  {
    "text": "terraform yeah so there are all things which I've been talkin can't be and",
    "start": "3024910",
    "end": "3031570"
  },
  {
    "text": "should be possible to roll back it can be version of terraform version of providin state file configurations",
    "start": "3031570",
    "end": "3038800"
  },
  {
    "text": "values version of modules so if everything is in code then it means that",
    "start": "3038800",
    "end": "3045070"
  },
  {
    "text": "just check out latest version of the code and run apply again on it when it",
    "start": "3045070",
    "end": "3052090"
  },
  {
    "text": "comes to state then the best option which I which I normally do is that I",
    "start": "3052090",
    "end": "3058210"
  },
  {
    "text": "simply check out that known state which which was before and just manually",
    "start": "3058210",
    "end": "3065740"
  },
  {
    "text": "verify that there are no obsolete resources laying around having a lot of",
    "start": "3065740",
    "end": "3070780"
  },
  {
    "text": "small states file simplify it very much so I have I know that there are like",
    "start": "3070780",
    "end": "3076960"
  },
  {
    "text": "five resources or two resources or one resource in one state file that's very",
    "start": "3076960",
    "end": "3082600"
  },
  {
    "text": "easy to verify and you don't have to think too much about downloading previous version of this state file",
    "start": "3082600",
    "end": "3089200"
  },
  {
    "text": "applying it same way as I showed with s/3 s/3",
    "start": "3089200",
    "end": "3094740"
  },
  {
    "text": "api calls",
    "start": "3094780",
    "end": "3097620"
  },
  {
    "text": "yeah",
    "start": "3101190",
    "end": "3103910"
  },
  {
    "text": "how common is it to use test automation in the pipeline using those testing",
    "start": "3107230",
    "end": "3112510"
  },
  {
    "text": "tools you mentioned yeah that's a great question about testing so testing of infrastructure changes is so new that",
    "start": "3112510",
    "end": "3120850"
  },
  {
    "start": "3113000",
    "end": "3582000"
  },
  {
    "text": "not even all providers are supporting it and taking it as a key concept so for",
    "start": "3120850",
    "end": "3126550"
  },
  {
    "text": "example on my observation there are a lot of people working with AWS and thinking about testing of infrastructure",
    "start": "3126550",
    "end": "3133750"
  },
  {
    "text": "change and using kitchen terraform so you write your own your own what is it",
    "start": "3133750",
    "end": "3140980"
  },
  {
    "text": "Ruby ya know inspect code in Ruby you define",
    "start": "3140980",
    "end": "3147220"
  },
  {
    "text": "your different different things which you want to test against you run it and",
    "start": "3147220",
    "end": "3154200"
  },
  {
    "text": "create a create infrastructure and then take one by one if this instance had",
    "start": "3154200",
    "end": "3159970"
  },
  {
    "text": "this tag or if this instance belong to create place so it's very advanced it has a lot of possibilities the only",
    "start": "3159970",
    "end": "3166690"
  },
  {
    "text": "downside you have to write it in Ruby inspect a few other things have to be around so I would say this is way WAY",
    "start": "3166690",
    "end": "3175020"
  },
  {
    "text": "complicated and very powerful there are few tools which came up recently for",
    "start": "3175020",
    "end": "3181990"
  },
  {
    "text": "more general general tests and like infrastructure testing framework called",
    "start": "3181990",
    "end": "3188500"
  },
  {
    "text": "terror spec which is which is the framework where certain steps are",
    "start": "3188500",
    "end": "3196330"
  },
  {
    "text": "defined you have to write it in gold so this means that you just write you a",
    "start": "3196330",
    "end": "3201700"
  },
  {
    "text": "nice HDL code for terraform you then",
    "start": "3201700",
    "end": "3207190"
  },
  {
    "text": "think that you have to you have to execute this code and you have to do",
    "start": "3207190",
    "end": "3213970"
  },
  {
    "text": "certain assertion to verify that things were created in correct order which",
    "start": "3213970",
    "end": "3220090"
  },
  {
    "text": "means that instead of using Ruby you have to just write a lot of things and",
    "start": "3220090",
    "end": "3225820"
  },
  {
    "text": "go yes there are a lot of helpers which simplify some of these things but these",
    "start": "3225820",
    "end": "3233140"
  },
  {
    "text": "things so what terror test gives you is certain",
    "start": "3233140",
    "end": "3238270"
  },
  {
    "text": "functions which for example connect to SSH instance or connect to from this",
    "start": "3238270",
    "end": "3247819"
  },
  {
    "text": "instance to RDS instance so they have lots of helpers the biggest downside is",
    "start": "3247819",
    "end": "3253609"
  },
  {
    "text": "that suddenly you have to teach people who write in telephone codes that they",
    "start": "3253609",
    "end": "3260420"
  },
  {
    "text": "have to write go code and this go code is not very I would say developer",
    "start": "3260420",
    "end": "3268670"
  },
  {
    "text": "friendly or see soaps friendly hey I mean its developer friendly right it has all features of programming language but",
    "start": "3268670",
    "end": "3275329"
  },
  {
    "text": "it's not foresee sobs or for people who who were affected with the idea that",
    "start": "3275329",
    "end": "3281930"
  },
  {
    "text": "everything is code you write lots of small nice beautiful code but you have",
    "start": "3281930",
    "end": "3287210"
  },
  {
    "text": "to put a lot of go code on top of it so my personal opinion on that is that it's",
    "start": "3287210",
    "end": "3292549"
  },
  {
    "text": "easier and it has to be implemented in certain phases is that you test thinks",
    "start": "3292549",
    "end": "3298880"
  },
  {
    "text": "which you really care about so you have to make sure that your infrastructure is",
    "start": "3298880",
    "end": "3305450"
  },
  {
    "text": "created short using certain policies like instance was launched in this",
    "start": "3305450",
    "end": "3311599"
  },
  {
    "text": "region this can be verified by launching instance and chicken where it was so",
    "start": "3311599",
    "end": "3317059"
  },
  {
    "text": "that's what kitchen teleport does terror test is doing much bigger scope of this",
    "start": "3317059",
    "end": "3323240"
  },
  {
    "text": "it's not just testing we're instance was launched but it also helps you to test",
    "start": "3323240",
    "end": "3328430"
  },
  {
    "text": "whether certain package was installed on this instance and to my opinion that's",
    "start": "3328430",
    "end": "3333980"
  },
  {
    "text": "not job of terraform at all telephone stops where user data starts right so",
    "start": "3333980",
    "end": "3339859"
  },
  {
    "text": "when you have user data and installing a bunch of packages use whatever else but",
    "start": "3339859",
    "end": "3345140"
  },
  {
    "text": "not terraform so there are also a few things which simplify adoption of",
    "start": "3345140",
    "end": "3352099"
  },
  {
    "text": "kitchen terraform which are allowing to generate tests based on state file which",
    "start": "3352099",
    "end": "3359450"
  },
  {
    "text": "is for me it seems very cool idea that first you create your infrastructure so you know what kind of state is the and",
    "start": "3359450",
    "end": "3367160"
  },
  {
    "text": "then it just generate inspector controls for your infrastructure so literally a lot of them for each thing",
    "start": "3367160",
    "end": "3374210"
  },
  {
    "text": "which knows about and then just run it and you see that everything is good so I",
    "start": "3374210",
    "end": "3379430"
  },
  {
    "text": "think it's important that testing is actually making things easier and not",
    "start": "3379430",
    "end": "3384490"
  },
  {
    "text": "not testing for the sake of testing Microsoft is doing slightly different",
    "start": "3384490",
    "end": "3391070"
  },
  {
    "text": "with Azure they're testing framework is I would say mocked in docker containers",
    "start": "3391070",
    "end": "3397520"
  },
  {
    "text": "so they run terraform on specific environment and then they just say that",
    "start": "3397520",
    "end": "3403340"
  },
  {
    "text": "if it was created then it's good so it's",
    "start": "3403340",
    "end": "3408590"
  },
  {
    "text": "different types of I have never seen anything related to Google so I have no",
    "start": "3408590",
    "end": "3414020"
  },
  {
    "text": "clue how Google people are testing their stuff maybe in production that because that's a place where traffic exists so",
    "start": "3414020",
    "end": "3423260"
  },
  {
    "text": "any other questions yeah",
    "start": "3423260",
    "end": "3428620"
  },
  {
    "text": "all right thank you for the speech have you got any idea if terraform are",
    "start": "3431820",
    "end": "3437820"
  },
  {
    "text": "planning to to let the the user decide",
    "start": "3437820",
    "end": "3443010"
  },
  {
    "text": "what to do if there is an error do we stick around and wait for and do it a",
    "start": "3443010",
    "end": "3448170"
  },
  {
    "text": "hundred times or do we feel fast right so to clarify",
    "start": "3448170",
    "end": "3454410"
  },
  {
    "text": "the question from user perspective what is the best way to handle this failures",
    "start": "3454410",
    "end": "3461550"
  },
  {
    "text": "right yeah because it may vary a lot",
    "start": "3461550",
    "end": "3466830"
  },
  {
    "text": "between different applications and it's impossible for a she cords you know",
    "start": "3466830",
    "end": "3471890"
  },
  {
    "text": "right okay I think I think I go to your question correct me if I'm wrong but the",
    "start": "3471890",
    "end": "3477620"
  },
  {
    "text": "there are few things which can be wrong with execution of terraform like",
    "start": "3477620",
    "end": "3483320"
  },
  {
    "text": "historically the most famous answer was to just restart right rerun it again and in 90% of cases",
    "start": "3483320",
    "end": "3491760"
  },
  {
    "text": "problem was gone this was a problem related to its eventual consistency of certain services",
    "start": "3491760",
    "end": "3497520"
  },
  {
    "text": "of certain providers now this problem so this was even to the extreme that there",
    "start": "3497520",
    "end": "3503430"
  },
  {
    "text": "were shell rappers and they still exist shell writers which which checks for",
    "start": "3503430",
    "end": "3508590"
  },
  {
    "text": "output from terraform and if there is string which says that you see this error then oh yeah just restarted again",
    "start": "3508590",
    "end": "3516020"
  },
  {
    "text": "so that was pretty funny to see a execution of terraform in a loop unless",
    "start": "3516020",
    "end": "3521940"
  },
  {
    "text": "it meets this error so normally the way",
    "start": "3521940",
    "end": "3527970"
  },
  {
    "text": "how to reform handled this error is that you you allow developer themselves to",
    "start": "3527970",
    "end": "3534900"
  },
  {
    "text": "decide what to do its telephone will unlikely to do like not unlikely but",
    "start": "3534900",
    "end": "3540720"
  },
  {
    "text": "will never I would say do roll back even if it can because roll back essentially",
    "start": "3540720",
    "end": "3546300"
  },
  {
    "text": "is the same operation as roll forward but just roll back so you have previous state which you have physically in file",
    "start": "3546300",
    "end": "3553230"
  },
  {
    "text": "you have previous configurations so just run it should be easy but telephone will",
    "start": "3553230",
    "end": "3559500"
  },
  {
    "text": "not do anything like that so terraform allows you to handle the",
    "start": "3559500",
    "end": "3565210"
  },
  {
    "text": "Saros yourself and by splitting your code into something smaller it should be",
    "start": "3565210",
    "end": "3571230"
  },
  {
    "text": "it should be not so often now yeah okay thanks so yeah I think if you have any",
    "start": "3571230",
    "end": "3583690"
  },
  {
    "start": "3582000",
    "end": "3600000"
  },
  {
    "text": "questions don't hesitate to ask me any",
    "start": "3583690",
    "end": "3589780"
  },
  {
    "text": "time anywhere I'm Anton de Leon calm almost all places where it's possible to be and yeah the code for the talk is",
    "start": "3589780",
    "end": "3598720"
  },
  {
    "text": "here so thanks",
    "start": "3598720",
    "end": "3602400"
  }
]