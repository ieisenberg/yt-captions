[
  {
    "text": "hello hello hello excellent thank you so much for coming everybody although I actually can't see",
    "start": "4460",
    "end": "11639"
  },
  {
    "text": "any of you all I can see is the backs of my retinas because the amount of light that is shining directly in my eyes",
    "start": "11639",
    "end": "18300"
  },
  {
    "text": "uh so thank you so much for coming I hope you've all had an amazing day so far and an amazing conference the thing",
    "start": "18300",
    "end": "25199"
  },
  {
    "text": "that I am going to talk to you today about is this thing right here it is a",
    "start": "25199",
    "end": "32220"
  },
  {
    "text": "wearable live captioning display and it's made up of a flexible LED that",
    "start": "32220",
    "end": "38219"
  },
  {
    "text": "can be mounted inside a mask which live captions what I'm saying as I'm saying",
    "start": "38219",
    "end": "43320"
  },
  {
    "text": "it but before we dive into the tech let me introduce myself my name is Joe",
    "start": "43320",
    "end": "49500"
  },
  {
    "text": "franketti and I am a developer Advocate at abley we're an edge messaging",
    "start": "49500",
    "end": "55020"
  },
  {
    "text": "platform that helps developers like yourself to build live and collaborative experiences we have an ever-evolving",
    "start": "55020",
    "end": "62640"
  },
  {
    "text": "Suite of apis and sdks that give you the freedom and flexibility to build",
    "start": "62640",
    "end": "68460"
  },
  {
    "text": "collaborative apps like chat apps or order delivery tracking or multiplayer",
    "start": "68460",
    "end": "75060"
  },
  {
    "text": "experiences or things like this where stuff is happening in real time and I'm",
    "start": "75060",
    "end": "81240"
  },
  {
    "text": "primarily a web developer but I do occasionally dabble in iot I put LEDs in",
    "start": "81240",
    "end": "87840"
  },
  {
    "text": "my wedding dress so that people at my wedding could tweet a color at my dress and would change the whole color of the",
    "start": "87840",
    "end": "94020"
  },
  {
    "text": "dress I made a Christmas jumper that changes what emoji it's playing it's showing",
    "start": "94020",
    "end": "100200"
  },
  {
    "text": "based on what Christmas song is playing and I have to admit to a personal desire",
    "start": "100200",
    "end": "106619"
  },
  {
    "text": "for seeing more products like wearable captions on the market and that reason is my mum so this is her",
    "start": "106619",
    "end": "114600"
  },
  {
    "text": "this is Mama francetti and she's a smiley quick-witted sociable",
    "start": "114600",
    "end": "119640"
  },
  {
    "text": "woman and she loves to have a good natter with her friends but she's also been steadily",
    "start": "119640",
    "end": "125700"
  },
  {
    "text": "losing her hearing over the last few years and it's a very isolating experience for her",
    "start": "125700",
    "end": "132780"
  },
  {
    "text": "as I'm sure it is for many other people she relies heavily on lip reading and",
    "start": "132780",
    "end": "137819"
  },
  {
    "text": "people enunciating clearly and you know what makes clear enunciation and lip",
    "start": "137819",
    "end": "143220"
  },
  {
    "text": "reading completely impossible is mass querying and obviously we want people",
    "start": "143220",
    "end": "148800"
  },
  {
    "text": "especially vulnerable people and you know as much as she would hate me to say it older people to be wearing masks to stay",
    "start": "148800",
    "end": "156060"
  },
  {
    "text": "safe these days it makes it really difficult for her to interact with people on a day-to-day",
    "start": "156060",
    "end": "161400"
  },
  {
    "text": "basis she can't understand what people are saying to her in shops she gets very self-conscious if she has to ask people",
    "start": "161400",
    "end": "167879"
  },
  {
    "text": "to repeat themselves and she misses out on jokes that her social group are making",
    "start": "167879",
    "end": "173519"
  },
  {
    "text": "so people have a tendency I don't know if you've noticed it when you ask someone to repeat themselves more than",
    "start": "173519",
    "end": "179459"
  },
  {
    "text": "once people have a tendency to become rude and they'll just say oh you know what never mind it doesn't matter so my f I have a couple of asks of you",
    "start": "179459",
    "end": "187140"
  },
  {
    "text": "during this talk and my first ask is if somebody ever asks you to repeat yourself just repeat yourself it's",
    "start": "187140",
    "end": "195000"
  },
  {
    "text": "really difficult for people who are hard of hearing to only be in on half the conversation so please",
    "start": "195000",
    "end": "201180"
  },
  {
    "text": "be thoughtful try and include people where you can",
    "start": "201180",
    "end": "206760"
  },
  {
    "text": "and as we've traversed her hearing loss one thing has really struck me and it's",
    "start": "206760",
    "end": "212519"
  },
  {
    "text": "that we as developers we're really not doing a very good job at making assistive and aging technology",
    "start": "212519",
    "end": "220140"
  },
  {
    "text": "my mom has a cochlear implant which is a device that is implanted literally into",
    "start": "220140",
    "end": "226080"
  },
  {
    "text": "her head and it can stream sounds from her devices directly basically directly",
    "start": "226080",
    "end": "232379"
  },
  {
    "text": "into her brain and it has a little battery that Clips over her ear and it's super cool like my mum has technology",
    "start": "232379",
    "end": "238980"
  },
  {
    "text": "literally embedded in her head like she's a cyborg and",
    "start": "238980",
    "end": "245580"
  },
  {
    "text": "there's quite a few problems with this device the first thing is it only runs the the app for this only runs on iOS",
    "start": "245580",
    "end": "253019"
  },
  {
    "text": "and she's always been an Android User so she's had to entirely swap phones learn a new operating system",
    "start": "253019",
    "end": "259799"
  },
  {
    "text": "and not only that iOS released an update a year or so ago that for everybody who",
    "start": "259799",
    "end": "267180"
  },
  {
    "text": "had this particular brand of Cochlear implants they heard screaming streamed directly into their ear for hours",
    "start": "267180",
    "end": "275520"
  },
  {
    "text": "they all had to take their Cochlear implants off turn them off they were unable to hear",
    "start": "275520",
    "end": "280620"
  },
  {
    "text": "iOS basically turned off hundreds of people's hearing for a few hours which",
    "start": "280620",
    "end": "285840"
  },
  {
    "text": "is just really it's not acceptable we need to be better at testing we need to be better at thinking about accessible",
    "start": "285840",
    "end": "292620"
  },
  {
    "text": "technology when we're building and I know assistive and aging Technologies aren't very sexy and they",
    "start": "292620",
    "end": "299580"
  },
  {
    "text": "don't get the attention that the more glamorous Tech gets but we can really do better than this",
    "start": "299580",
    "end": "305520"
  },
  {
    "text": "and honestly in 40 50 years that's going to be us that need the",
    "start": "305520",
    "end": "312300"
  },
  {
    "text": "assistive technology so you know let's do our future selves a favor so my second ask of the talk is this",
    "start": "312300",
    "end": "320340"
  },
  {
    "text": "let's put some effort into assistive and aging technology we are all brilliant",
    "start": "320340",
    "end": "325380"
  },
  {
    "text": "humans and I think that we can really make a difference so Story Time and lecture is almost over",
    "start": "325380",
    "end": "331380"
  },
  {
    "text": "I promise we will get to the tech but I was really worried for my mum she felt",
    "start": "331380",
    "end": "336660"
  },
  {
    "text": "even more isolated than the rest of us did during lockdown and assistive technologies that run on",
    "start": "336660",
    "end": "343139"
  },
  {
    "text": "her phone things that she already had meant that she had to be looking down at her phone while she was talking to",
    "start": "343139",
    "end": "348479"
  },
  {
    "text": "people and people thought that she'd Switched Off from the conversation or that she wasn't listening to them and they'd go and talk to somebody else",
    "start": "348479",
    "end": "355740"
  },
  {
    "text": "so I wanted to build something that I could wear rather than that she had to",
    "start": "355740",
    "end": "360780"
  },
  {
    "text": "wear that would mean that she could look directly at my face when I was speaking to her and we'd be able to hold a",
    "start": "360780",
    "end": "366600"
  },
  {
    "text": "conversation and I'm a developer we all love to fix problems I thought this has",
    "start": "366600",
    "end": "371759"
  },
  {
    "text": "to be something that I can build and inspiration struck me in the strangest of places",
    "start": "371759",
    "end": "378539"
  },
  {
    "text": "so if you've ever been to London uh or if you're coming to NDC London uh next",
    "start": "378539",
    "end": "384780"
  },
  {
    "text": "year I highly recommend you check this place out it's called cyberdog and it is",
    "start": "384780",
    "end": "390060"
  },
  {
    "text": "it basically sells Rave clothing so stuff with a lot of lights on it that",
    "start": "390060",
    "end": "395340"
  },
  {
    "text": "you can wear to parties and they were selling this thing here which I have one",
    "start": "395340",
    "end": "400979"
  },
  {
    "text": "of here which is a mask which has LEDs in it and it has a reasonably high resolution",
    "start": "400979",
    "end": "409259"
  },
  {
    "text": "display that can do all kinds of fun animations and I bought one immediately thinking this is perfect this is exactly",
    "start": "409259",
    "end": "415919"
  },
  {
    "text": "what I need I can display text on that and I'll be able to wear it so my mum can look at my face when we're speaking",
    "start": "415919",
    "end": "422340"
  },
  {
    "text": "to each other however it wasn't quite that easy the display that comes in The Mask",
    "start": "422340",
    "end": "429060"
  },
  {
    "text": "has little tiny chips built into it which you very much cannot write to",
    "start": "429060",
    "end": "435000"
  },
  {
    "text": "um I couldn't backwards it came with a very dodgy app which was written in",
    "start": "435000",
    "end": "440880"
  },
  {
    "text": "Chinese and completely obfuscated because it was clearly full of spyware and all sorts of awfulness",
    "start": "440880",
    "end": "446580"
  },
  {
    "text": "couldn't reverse engineer it couldn't work out how it was working tried to sniff the Bluetooth packets that were",
    "start": "446580",
    "end": "453180"
  },
  {
    "text": "being sent and just it I just really couldn't reverse engineer this thing so not wanting to be beaten I thought",
    "start": "453180",
    "end": "460500"
  },
  {
    "text": "I could make that myself how hard can it be so let's do that now if we break down",
    "start": "460500",
    "end": "466259"
  },
  {
    "text": "the mask into its component parts what we really need is we need a flexible LED",
    "start": "466259",
    "end": "471599"
  },
  {
    "text": "array of some kind which will contain something called addressable LEDs and",
    "start": "471599",
    "end": "477539"
  },
  {
    "text": "addressable just means that we can send data to each LED individually to tell it",
    "start": "477539",
    "end": "482880"
  },
  {
    "text": "what color to turn how bright to turn how long to turn on for",
    "start": "482880",
    "end": "488039"
  },
  {
    "text": "then we need a way to control that display so we're going to need some sort of microprocessor board and we're going",
    "start": "488039",
    "end": "493979"
  },
  {
    "text": "to need a small battery something you know about this size that can power the",
    "start": "493979",
    "end": "499020"
  },
  {
    "text": "board and it all needs to be able to fit inside a mask really",
    "start": "499020",
    "end": "504720"
  },
  {
    "text": "and the final thing that we will need is a microphone and some sort of speech recognition software",
    "start": "504720",
    "end": "511440"
  },
  {
    "text": "and the addressable LED display looks a little",
    "start": "511440",
    "end": "516839"
  },
  {
    "text": "bit like this so I've got a larger version here which you might be able to see",
    "start": "516839",
    "end": "522060"
  },
  {
    "text": "it's nice and flexible it has these very small LEDs on it that have their own little tiny processes",
    "start": "522060",
    "end": "529019"
  },
  {
    "text": "and we can put small holes in it so that you can breathe through it and it's",
    "start": "529019",
    "end": "534060"
  },
  {
    "text": "powered by a very small microprocessor I don't know if you can see the size of",
    "start": "534060",
    "end": "539820"
  },
  {
    "text": "that but it's teeny tiny and the brilliant thing is it's small enough to fit inside a mask or inside",
    "start": "539820",
    "end": "546060"
  },
  {
    "text": "your pocket it can be powered by a USB battery and it has Wi-Fi on it so we can",
    "start": "546060",
    "end": "552060"
  },
  {
    "text": "hopefully easily send data between the mask and other devices",
    "start": "552060",
    "end": "558120"
  },
  {
    "text": "and I could put a tiny little microphone on the board and have that inside the",
    "start": "558120",
    "end": "563220"
  },
  {
    "text": "mask listening to me but we all carry microphones around in our pockets with",
    "start": "563220",
    "end": "568380"
  },
  {
    "text": "us every day attached to our phones and as I mentioned before the board has Wi-Fi so",
    "start": "568380",
    "end": "574560"
  },
  {
    "text": "I can communicate between my phone and the board by using a web app for example",
    "start": "574560",
    "end": "582260"
  },
  {
    "text": "there's a microphone so if I made a web app I can use web apis which make it really easy to use",
    "start": "583260",
    "end": "590760"
  },
  {
    "text": "the phone's microphone we Grant permissions it listens to what",
    "start": "590760",
    "end": "595920"
  },
  {
    "text": "I'm saying and then it's going to use a service to translate the speech that is picked up and return it",
    "start": "595920",
    "end": "602040"
  },
  {
    "text": "to the phone in text form and I used Azure cognitive services for this if",
    "start": "602040",
    "end": "607680"
  },
  {
    "text": "you've not used Azure cognitive Services before I'm sure at NDC many people are",
    "start": "607680",
    "end": "612959"
  },
  {
    "text": "familiar with them already it's a suite of apis that allow you to add AI",
    "start": "612959",
    "end": "618000"
  },
  {
    "text": "capabilities to your apps and one of those capabilities is speech to text",
    "start": "618000",
    "end": "623459"
  },
  {
    "text": "so the web app is just a simple node app that uses a few different packages so we're using the Azure cognitive Services",
    "start": "623459",
    "end": "630180"
  },
  {
    "text": "speech SDK we're using a driver for the LED display that I actually wrote for a different",
    "start": "630180",
    "end": "636899"
  },
  {
    "text": "project and I will talk about that later and we need some sort of transport protocol so that we can send data from",
    "start": "636899",
    "end": "643560"
  },
  {
    "text": "the phone to the mask the app itself has some really basic UI",
    "start": "643560",
    "end": "648899"
  },
  {
    "text": "it looks like this we have a button which when you press you can get permission to use the",
    "start": "648899",
    "end": "655620"
  },
  {
    "text": "microphone and start streaming audio then we have a text box which actually shows The Returned text that comes back",
    "start": "655620",
    "end": "661860"
  },
  {
    "text": "from Azure cognitive services and along with that we have this visual representation of the LEDs in the array",
    "start": "661860",
    "end": "669660"
  },
  {
    "text": "which are just divs on the page and then we also have some settings so I can",
    "start": "669660",
    "end": "675120"
  },
  {
    "text": "change the color of the text and I can change the speed that the text is scrolling at",
    "start": "675120",
    "end": "681180"
  },
  {
    "text": "so let's start by hooking up the start listening button and sending data to Azure cognitive services",
    "start": "681180",
    "end": "686940"
  },
  {
    "text": "so here what I've done is I've wrapped the cognitive Services speech SDK with this code here",
    "start": "686940",
    "end": "692700"
  },
  {
    "text": "and under the hood Azure cognitive Services is using get user media to",
    "start": "692700",
    "end": "698940"
  },
  {
    "text": "listen to the microphone get user media's bin in the browser for ages it allows us to prompt the user to",
    "start": "698940",
    "end": "705360"
  },
  {
    "text": "get permissions for their microphone and their camera in this case we only need the mic so that's great the fewer",
    "start": "705360",
    "end": "710880"
  },
  {
    "text": "permissions we ask for the better and then we get a stream of their data",
    "start": "710880",
    "end": "715920"
  },
  {
    "text": "from their media devices so when the user clicks on the start listening button that we saw on the UI",
    "start": "715920",
    "end": "722339"
  },
  {
    "text": "earlier a function called stream speech from browser is called",
    "start": "722339",
    "end": "728120"
  },
  {
    "text": "and this uses the Azure from default microphone input along with the with an",
    "start": "728760",
    "end": "734820"
  },
  {
    "text": "authorization token which will allow us to authenticate with Azure and it will initialize a speech recognizer",
    "start": "734820",
    "end": "742140"
  },
  {
    "text": "and this speech recognizer is what is going to actually perform the speech recognition on the data which is coming",
    "start": "742140",
    "end": "747600"
  },
  {
    "text": "from the mic and it returns an object which contains the text of what has been said it's great it's a really nice easy",
    "start": "747600",
    "end": "753959"
  },
  {
    "text": "to use API and in the main app I wrapped the Azure confidence services with the class which",
    "start": "753959",
    "end": "760740"
  },
  {
    "text": "allows me to provide it with an API key and then we register on text recognized",
    "start": "760740",
    "end": "767399"
  },
  {
    "text": "and this callback subsequently calls The Matrix LED driver which I will I will",
    "start": "767399",
    "end": "772680"
  },
  {
    "text": "talk through in a bit but first let's talk about actually communicating with the hardware itself so how do we get",
    "start": "772680",
    "end": "779220"
  },
  {
    "text": "this transcription which we now have on the phone to the mask",
    "start": "779220",
    "end": "784620"
  },
  {
    "text": "we need some sort of messaging protocol and the one that is usually used for iot",
    "start": "784620",
    "end": "790019"
  },
  {
    "text": "is called mqtt the message queuing Telemetry transport",
    "start": "790019",
    "end": "797100"
  },
  {
    "text": "and it's a lightweight publish And subscribe protocol specifically designed for iot devices it's optimized for high",
    "start": "797100",
    "end": "804839"
  },
  {
    "text": "latency and unreliable networks and it's perfect for this kind of project where",
    "start": "804839",
    "end": "810060"
  },
  {
    "text": "the wearer might be on a dodgy 3g connection in order to use mqtt we need some kind",
    "start": "810060",
    "end": "817019"
  },
  {
    "text": "of broker and this is a service which is responsible for dispatching the messages",
    "start": "817019",
    "end": "822779"
  },
  {
    "text": "between the sender and the rightful recipients the web app",
    "start": "822779",
    "end": "828899"
  },
  {
    "text": "uh in this case is the client and the recipient is the microcontroller that is",
    "start": "828899",
    "end": "833940"
  },
  {
    "text": "attached to the LED display and I'm using the ably mqtt broker for",
    "start": "833940",
    "end": "839700"
  },
  {
    "text": "this uh this is great because I can use the ably JavaScript SDK in my web app",
    "start": "839700",
    "end": "846480"
  },
  {
    "text": "and ably will automatically send all the messages out over mqtt as well as over",
    "start": "846480",
    "end": "852660"
  },
  {
    "text": "websockets so I can not only connect the iot devices to it but I can also connect",
    "start": "852660",
    "end": "858540"
  },
  {
    "text": "other phones to it so if my mask happens to break or if I'm speaking to a lot of",
    "start": "858540",
    "end": "864600"
  },
  {
    "text": "people who would like to see the live captions they absolutely can on their own phones",
    "start": "864600",
    "end": "870980"
  },
  {
    "text": "as I mentioned before the microprocessor is really small and therefore it has very limited memory limited power",
    "start": "871740",
    "end": "878940"
  },
  {
    "text": "limited processing power which means that we need to optimize the code that runs on it as much as possible and be as",
    "start": "878940",
    "end": "886019"
  },
  {
    "text": "efficient as possible we want to avoid doing things like text parsing which is actually quite complicated and memory",
    "start": "886019",
    "end": "893399"
  },
  {
    "text": "intensive parsing and splitting strings is especially costly and it involves quite",
    "start": "893399",
    "end": "899339"
  },
  {
    "text": "a large buffer we don't want to be using up all of the memory on the board processing the text",
    "start": "899339",
    "end": "906680"
  },
  {
    "text": "so to solve this problem I created a binary message format which talks to the",
    "start": "906959",
    "end": "912720"
  },
  {
    "text": "hardware the browser app creates a specifically encoded message to send the",
    "start": "912720",
    "end": "917760"
  },
  {
    "text": "text strings to the device so let's have a look at those so most of the time you know when we're",
    "start": "917760",
    "end": "923699"
  },
  {
    "text": "sending data we're used to sending Json we might want to send something that looks like this",
    "start": "923699",
    "end": "929459"
  },
  {
    "text": "but instead we're going to use this binary format to encode this data in a",
    "start": "929459",
    "end": "934860"
  },
  {
    "text": "much more packed down format so for example we might have a message",
    "start": "934860",
    "end": "940620"
  },
  {
    "text": "like this where we want to be able to tell the browser that we are scrolling",
    "start": "940620",
    "end": "946260"
  },
  {
    "text": "so we want to be able to tell the sorry the um device that we are scrolling text we want to be able to tell it what the",
    "start": "946260",
    "end": "952920"
  },
  {
    "text": "text is so in this case my line of text and we want to be able to tell it how fast to scroll it and what color to",
    "start": "952920",
    "end": "958500"
  },
  {
    "text": "scroll it in so we're going to try packing it down into a binary message to make it as",
    "start": "958500",
    "end": "965399"
  },
  {
    "text": "small as possible and the way that we do that is uh packing it down as raw bytes and using",
    "start": "965399",
    "end": "972839"
  },
  {
    "text": "control codes from the ASCII standard to provide Header information about the messages",
    "start": "972839",
    "end": "978779"
  },
  {
    "text": "and because the message is a raw bite stream we then don't need to actually pass it on the hardware we can just Loop",
    "start": "978779",
    "end": "985380"
  },
  {
    "text": "over each individual byte and run a different process depending on what the byte says",
    "start": "985380",
    "end": "991740"
  },
  {
    "text": "and this takes all of the complexity of parsing text away from the microprocessor and moves it into the",
    "start": "991740",
    "end": "998040"
  },
  {
    "text": "JavaScript code which is running on the phone instead which is much easier to debug much easier to test and just the",
    "start": "998040",
    "end": "1004880"
  },
  {
    "text": "phone has a much higher processing power than the tiny little micro processor does",
    "start": "1004880",
    "end": "1011680"
  },
  {
    "text": "so if you have a look at this table here uh the byte offset 8 could represent a",
    "start": "1011839",
    "end": "1018019"
  },
  {
    "text": "single text character but the parser on the hardware is looking for the start text and the end",
    "start": "1018019",
    "end": "1025938"
  },
  {
    "text": "text markers so these two here and what this means is we can send any",
    "start": "1025939",
    "end": "1032780"
  },
  {
    "text": "number of ASCII characters in between STX and etx to form full sentences to",
    "start": "1032780",
    "end": "1040040"
  },
  {
    "text": "send in the message so that is how we can send messages we've now packed them down into this",
    "start": "1040040",
    "end": "1045918"
  },
  {
    "text": "binary format let's look at actually hooking up the speech recognition",
    "start": "1045919",
    "end": "1051140"
  },
  {
    "text": "so earlier on WE registered a callback to on text recognized that called The",
    "start": "1051140",
    "end": "1056240"
  },
  {
    "text": "Matrix LED driver what we didn't look at is how we created connection between the",
    "start": "1056240",
    "end": "1061640"
  },
  {
    "text": "browser and the LED driver using abley's mqtt broker",
    "start": "1061640",
    "end": "1067520"
  },
  {
    "text": "and there's a few things going on in this code sample so first of all We Make an instance of the ably SDK",
    "start": "1067520",
    "end": "1074539"
  },
  {
    "text": "next we knew up an instance of the remote Matrix LED driver which is part",
    "start": "1074539",
    "end": "1080419"
  },
  {
    "text": "of the display driver package and it takes a display config which",
    "start": "1080419",
    "end": "1087020"
  },
  {
    "text": "changes how we encode the pixel data so it needs information about what size of",
    "start": "1087020",
    "end": "1092179"
  },
  {
    "text": "display we are showing on and it also needs a device adapter which",
    "start": "1092179",
    "end": "1097580"
  },
  {
    "text": "is the implementation of that encoding protocol that I just described",
    "start": "1097580",
    "end": "1103660"
  },
  {
    "text": "the Arduino device adapter that you see here implements that call binary",
    "start": "1105740",
    "end": "1110960"
  },
  {
    "text": "encoding protocol that we talked about and it requires a transport which in",
    "start": "1110960",
    "end": "1116240"
  },
  {
    "text": "this case is a wrapper for the a b JavaScript SDK which is how data is being sent out when the data is sent out",
    "start": "1116240",
    "end": "1122720"
  },
  {
    "text": "by over websockets by the AP JavaScript SDK we get the obli mqt data for free as",
    "start": "1122720",
    "end": "1130039"
  },
  {
    "text": "well so this is a lot of information and I'm sorry to sort of just dump all my code",
    "start": "1130039",
    "end": "1136580"
  },
  {
    "text": "on you all but what we have here means that when we call the functions available to",
    "start": "1136580",
    "end": "1143660"
  },
  {
    "text": "The Matrix driver it knows how to convert pixel locations to Absolute",
    "start": "1143660",
    "end": "1149539"
  },
  {
    "text": "numbers on the uh display it understands how to encode those",
    "start": "1149539",
    "end": "1156140"
  },
  {
    "text": "numbers in a wire format and it knows how to transmit the data over mqtt",
    "start": "1156140",
    "end": "1162860"
  },
  {
    "text": "so if we were to visualize the entire process it looks like this so now we have a way to send nice",
    "start": "1162860",
    "end": "1170360"
  },
  {
    "text": "compact messages let's take a look at the display driver itself and how it actually reads those messages",
    "start": "1170360",
    "end": "1178120"
  },
  {
    "text": "so the device driver was written for a previous project I made a little t-shirt",
    "start": "1178160",
    "end": "1183679"
  },
  {
    "text": "that had a square 16 by 16 array of pixels and I made a little web app that",
    "start": "1183679",
    "end": "1189799"
  },
  {
    "text": "was kind of like very small Ms paint and you could color each of the pixels and people could",
    "start": "1189799",
    "end": "1196460"
  },
  {
    "text": "color in what was on my t-shirt so the driver has a few different API calls",
    "start": "1196460",
    "end": "1203419"
  },
  {
    "text": "so one of the things it can do is it can set individual pixel colors either in a hex or RGB format it can",
    "start": "1203419",
    "end": "1211100"
  },
  {
    "text": "also set single pixels imagine if we just had a single strip instead of an array",
    "start": "1211100",
    "end": "1216799"
  },
  {
    "text": "we can also set the entire display at once by using these nice visual coordinates so each LED that is",
    "start": "1216799",
    "end": "1223820"
  },
  {
    "text": "illuminated with a hash there will show up bright on the LED display",
    "start": "1223820",
    "end": "1229340"
  },
  {
    "text": "I can even send entire images to the LED display as long as those images match",
    "start": "1229340",
    "end": "1235720"
  },
  {
    "text": "the number of pixels in the display so if we have a 16 by 16 image it has to",
    "start": "1235720",
    "end": "1241220"
  },
  {
    "text": "have 16 by 16 pixels but for the mask the driver needed to be extended to include text and scrolling",
    "start": "1241220",
    "end": "1249200"
  },
  {
    "text": "text and also an optional color and a speed setting",
    "start": "1249200",
    "end": "1255140"
  },
  {
    "text": "so that's going to potentially look like this and then like this with our color and speed setting and as you'd imagine",
    "start": "1255140",
    "end": "1261460"
  },
  {
    "text": "scrolling text is a bit more complicated than setting individual pixels on a",
    "start": "1261460",
    "end": "1267260"
  },
  {
    "text": "display so let's take a look at how to do it I'm going to take a drink of water",
    "start": "1267260",
    "end": "1273919"
  },
  {
    "text": "so the first thing to do was to design this pixel font right here",
    "start": "1273919",
    "end": "1279919"
  },
  {
    "text": "yeah and what I've done is I've chosen a set",
    "start": "1279919",
    "end": "1285140"
  },
  {
    "text": "of alphanumeric characters that I think I'm most likely to use in day-to-day speech",
    "start": "1285140",
    "end": "1291740"
  },
  {
    "text": "and I need to convert these into an array of binary values so I took a",
    "start": "1291740",
    "end": "1297679"
  },
  {
    "text": "guesstimate at what I think I would use the letters of the alphabet a couple of",
    "start": "1297679",
    "end": "1303200"
  },
  {
    "text": "bits of um what else have we got there some symbols some numbers some punctuation",
    "start": "1303200",
    "end": "1310960"
  },
  {
    "text": "and what I'm going to do is convert this pixel font into an array of pixels",
    "start": "1311179",
    "end": "1318380"
  },
  {
    "text": "so let's start with the letter N for example visually represented the N looks",
    "start": "1318380",
    "end": "1323720"
  },
  {
    "text": "like this and if we give a value to e0 the pixels that makes up the N then the",
    "start": "1323720",
    "end": "1329240"
  },
  {
    "text": "values would look like this so we have zeros for any LEDs that are turned off and one for any LEDs that are turned on",
    "start": "1329240",
    "end": "1336860"
  },
  {
    "text": "and if we then look at what that array actually looks like it's like this and",
    "start": "1336860",
    "end": "1342080"
  },
  {
    "text": "if we put it all in a long line it looks like this so this is the letter N represented as an array of bytes",
    "start": "1342080",
    "end": "1349280"
  },
  {
    "text": "we've encoded it into a four by eight block basically",
    "start": "1349280",
    "end": "1355460"
  },
  {
    "text": "and instead of encoding the entire alphabet by hand which would have taken absolutely ages luckily there is a",
    "start": "1355460",
    "end": "1361940"
  },
  {
    "text": "JavaScript image manipulation Library which will actually do this for you and it's called there's a link to it",
    "start": "1361940",
    "end": "1367820"
  },
  {
    "text": "right there so I was able to convert the font sheet that I made into an array of",
    "start": "1367820",
    "end": "1373600"
  },
  {
    "text": "individual pixels so if you I've taken Liberty with this",
    "start": "1373600",
    "end": "1379340"
  },
  {
    "text": "for screen design but if you imagine this whole font as one long line",
    "start": "1379340",
    "end": "1385658"
  },
  {
    "text": "you may have noticed that the characters aren't all the same width",
    "start": "1386240",
    "end": "1392000"
  },
  {
    "text": "um I personally think it looks nicer I find uh mono space fonts much more",
    "start": "1392000",
    "end": "1397640"
  },
  {
    "text": "difficult to read but what this means is that the array of bits that we just created will need a",
    "start": "1397640",
    "end": "1405320"
  },
  {
    "text": "list of indices to say at what point each letter starts so that we know where",
    "start": "1405320",
    "end": "1411740"
  },
  {
    "text": "in the array that letter is and we also need to know the width of",
    "start": "1411740",
    "end": "1417380"
  },
  {
    "text": "each letter so that we know when that letter ends but that's just another array of bytes",
    "start": "1417380",
    "end": "1425179"
  },
  {
    "text": "and honestly they're both the embed the encoded uh font and the array that says",
    "start": "1425179",
    "end": "1432919"
  },
  {
    "text": "the indices and the width this is a really small amount of information and it's small enough to be embedded on the",
    "start": "1432919",
    "end": "1439520"
  },
  {
    "text": "microprocessor which is great and this means that instead of computing all of the individual pixel positions in",
    "start": "1439520",
    "end": "1446179"
  },
  {
    "text": "the browser app and sending them one by one the microcontroller can actually just handle that translation itself",
    "start": "1446179",
    "end": "1452600"
  },
  {
    "text": "which saves us a lot of data when we're sending over mqtt",
    "start": "1452600",
    "end": "1458179"
  },
  {
    "text": "so cool we have a font uh now we need to work out how to display it on the array",
    "start": "1458179",
    "end": "1464960"
  },
  {
    "text": "and as always I don't know how many of you have worked with Hardware projects before it's never as simple as you would like",
    "start": "1464960",
    "end": "1472460"
  },
  {
    "text": "it to be so I learned that there are multiple different ways that led displays can be",
    "start": "1472460",
    "end": "1479659"
  },
  {
    "text": "wired up so uh this one here if you want to come and",
    "start": "1479659",
    "end": "1486980"
  },
  {
    "text": "have a look at it at the end of the talk feel free you probably can't see but on the back you can see how the wiring",
    "start": "1486980",
    "end": "1492620"
  },
  {
    "text": "works and it's going up and down like this vertically up and down the display",
    "start": "1492620",
    "end": "1498799"
  },
  {
    "text": "but there's also a whole load of other options so when we talk about uh arrays",
    "start": "1498799",
    "end": "1505460"
  },
  {
    "text": "of addressable LEDs what we're saying is each LED has its own number it has its",
    "start": "1505460",
    "end": "1510559"
  },
  {
    "text": "own address the first led on the Strip is Led zero and so on as we move through",
    "start": "1510559",
    "end": "1516140"
  },
  {
    "text": "the array and we need to know not only how many",
    "start": "1516140",
    "end": "1522320"
  },
  {
    "text": "LEDs there are but also how they're wired up so some common wiring patterns that I've",
    "start": "1522320",
    "end": "1527779"
  },
  {
    "text": "seen are like number one here which is reading order where we start at the left we move to the right the wires go back",
    "start": "1527779",
    "end": "1535340"
  },
  {
    "text": "again we start at the left we move to the right there's also um these two other modes two and three",
    "start": "1535340",
    "end": "1541460"
  },
  {
    "text": "which I have named snake mode because the way is snake uh so we have snaking",
    "start": "1541460",
    "end": "1547520"
  },
  {
    "text": "horizontally and we have snaking vertically um not only that but I don't know again",
    "start": "1547520",
    "end": "1553700"
  },
  {
    "text": "if you can see on the back of here but these connectors can be connected at either end so the data could be going in",
    "start": "1553700",
    "end": "1561020"
  },
  {
    "text": "at the right hand side it could be going in at the left hand side so we need to make sure that we are",
    "start": "1561020",
    "end": "1569020"
  },
  {
    "text": "accommodating these physical constraints so that any different kind of display",
    "start": "1569020",
    "end": "1574760"
  },
  {
    "text": "can be used with our microprocessor so I need to ensure that any operations",
    "start": "1574760",
    "end": "1581360"
  },
  {
    "text": "in the JavaScript that refer to a pixel location understand that they're using a",
    "start": "1581360",
    "end": "1588440"
  },
  {
    "text": "coordinate system rather than a pixel ID",
    "start": "1588440",
    "end": "1593500"
  },
  {
    "text": "but that's all very doable we can calculate if we know the width and the height of the Matrix and we know what",
    "start": "1594080",
    "end": "1601520"
  },
  {
    "text": "type of wiring mode it is we can do that math so once the coordinates are sent to the",
    "start": "1601520",
    "end": "1608299"
  },
  {
    "text": "hardware it will then translate these coordinates into the correct pixel ID based on what configuration we've given",
    "start": "1608299",
    "end": "1615860"
  },
  {
    "text": "it so our configuration looks like this I need to give a little bit of",
    "start": "1615860",
    "end": "1621860"
  },
  {
    "text": "information to the board to tell it what display it's powering",
    "start": "1621860",
    "end": "1627260"
  },
  {
    "text": "um so the microcontroller has a this single configuration file",
    "start": "1627260",
    "end": "1633440"
  },
  {
    "text": "which allows me to set up things like the Wi-Fi name the password the mqtt",
    "start": "1633440",
    "end": "1640520"
  },
  {
    "text": "settings but also I need to tell it which pin on the microprocessor board",
    "start": "1640520",
    "end": "1645559"
  },
  {
    "text": "the data is coming out of that's the gpio pin a general purpose IO",
    "start": "1645559",
    "end": "1651860"
  },
  {
    "text": "then I need to tell it the dimensions of the display so in this case it's 8 by 28 and then I need to tell it which",
    "start": "1651860",
    "end": "1660740"
  },
  {
    "text": "kind of carriage return mode we've got so is it which direction is it snaking",
    "start": "1660740",
    "end": "1666640"
  },
  {
    "text": "uh which end the data is being sent into and also and this one has caught me out",
    "start": "1666640",
    "end": "1674419"
  },
  {
    "text": "on a project before what type of LEDs we're using so if you've ever worked",
    "start": "1674419",
    "end": "1679820"
  },
  {
    "text": "with RGB LEDs you may have discovered that there are two different types there's RGB and",
    "start": "1679820",
    "end": "1686240"
  },
  {
    "text": "there's rgbw RGB takes three colors very similar to how we're used to setting",
    "start": "1686240",
    "end": "1691880"
  },
  {
    "text": "colors in CSS rgbw takes an extra value an extra fourth value which is the",
    "start": "1691880",
    "end": "1698779"
  },
  {
    "text": "whiteness so how bright you want the color to be if you send three values to a LED that's",
    "start": "1698779",
    "end": "1705740"
  },
  {
    "text": "expecting four values it's not going to display as you want it to on the mask so just double check when you are working",
    "start": "1705740",
    "end": "1712159"
  },
  {
    "text": "with LEDs which ones you've got because I spent many hours debugging that one",
    "start": "1712159",
    "end": "1719840"
  },
  {
    "text": "so when the message arrives at our device it runs through this initial passing block and interprets what the",
    "start": "1719840",
    "end": "1727580"
  },
  {
    "text": "message said so what was sent by the LED driver it checks the first byte for the",
    "start": "1727580",
    "end": "1734179"
  },
  {
    "text": "control code and then the second byte for the control mode so is it a pixel is",
    "start": "1734179",
    "end": "1740000"
  },
  {
    "text": "it some text is it scrolling text the Arduino device driver then needs to be updated to send messages using the",
    "start": "1740000",
    "end": "1747980"
  },
  {
    "text": "correct control mode so either text or scrolling text so let's have a look at that",
    "start": "1747980",
    "end": "1756399"
  },
  {
    "text": "so we know already that we are able to set a display size and we have the font",
    "start": "1756740",
    "end": "1763220"
  },
  {
    "text": "array stored on the microprocessor already the missing piece is to write",
    "start": "1763220",
    "end": "1768260"
  },
  {
    "text": "some message handlers which are going to process the incoming binary messages and",
    "start": "1768260",
    "end": "1773299"
  },
  {
    "text": "these handlers going to look up that font data and push the appropriate",
    "start": "1773299",
    "end": "1778340"
  },
  {
    "text": "pixels to the display so when we get a message that says I've",
    "start": "1778340",
    "end": "1784039"
  },
  {
    "text": "got some text I want you to display some text the code will Loop through each character in the message and look up",
    "start": "1784039",
    "end": "1790640"
  },
  {
    "text": "that character in our embedded font array and it will then return the array of",
    "start": "1790640",
    "end": "1796279"
  },
  {
    "text": "bytes that we saw earlier prefixed by the width of each character and because the font data includes the",
    "start": "1796279",
    "end": "1803299"
  },
  {
    "text": "width when the code iterates over subsequent characters it can work out where it has to place them next it can",
    "start": "1803299",
    "end": "1809840"
  },
  {
    "text": "calculate the location that it needs to start drawing at and if we call this location X position",
    "start": "1809840",
    "end": "1816200"
  },
  {
    "text": "so the position that we're going to start drawing at each time a character is",
    "start": "1816200",
    "end": "1821600"
  },
  {
    "text": "drawn on the display we know the character's width so we move the X position Along by the width of the",
    "start": "1821600",
    "end": "1827000"
  },
  {
    "text": "character and also by one pixel so we have a nice Gap in between each letter",
    "start": "1827000",
    "end": "1833120"
  },
  {
    "text": "and this continues until the loop reaches the width of the display and then it stops drawing because the extra",
    "start": "1833120",
    "end": "1839480"
  },
  {
    "text": "characters are just going to flow off the end of the they're not going to show on the display so that's how we display text",
    "start": "1839480",
    "end": "1847159"
  },
  {
    "text": "but how do we scroll it then so writing scrolling text is mostly the",
    "start": "1847159",
    "end": "1853399"
  },
  {
    "text": "same with one subtle change so if we think about how we calculated our X position what we're going to do is start",
    "start": "1853399",
    "end": "1860840"
  },
  {
    "text": "off with the X position on the right hand side of the display and when that message is first received",
    "start": "1860840",
    "end": "1867260"
  },
  {
    "text": "the exposition is going to therefore be equal to the width of the display so in this case 28. we can then write a loop",
    "start": "1867260",
    "end": "1875120"
  },
  {
    "text": "that will decrement that X position until the total number of characters has",
    "start": "1875120",
    "end": "1881120"
  },
  {
    "text": "been run through the entire display so if the texturing has a total width of",
    "start": "1881120",
    "end": "1887240"
  },
  {
    "text": "100 pixels it'll keep on drawing and decrementing that X position until the X",
    "start": "1887240",
    "end": "1892580"
  },
  {
    "text": "position equals minus a hundred and this will gently scroll the text across the",
    "start": "1892580",
    "end": "1897620"
  },
  {
    "text": "screen which is super awesome you could see the code for that here so if the message mode indicates that",
    "start": "1897620",
    "end": "1905360"
  },
  {
    "text": "we've got scrolling text we start a while loop which will update the scrolling position in the byte array",
    "start": "1905360",
    "end": "1912080"
  },
  {
    "text": "that represents the entire fonted string it starts looping and displaying a",
    "start": "1912080",
    "end": "1917480"
  },
  {
    "text": "subset of the total data to the string until all of the pixels are scrolled off",
    "start": "1917480",
    "end": "1923059"
  },
  {
    "text": "the screen and the nice thing about this is we can then really easy Implement a scrolling",
    "start": "1923059",
    "end": "1929360"
  },
  {
    "text": "speed by just changing the delay that happens in between each Loop",
    "start": "1929360",
    "end": "1935120"
  },
  {
    "text": "and another cool thing about this is that because we've got this loop we're preventing control being returned to the",
    "start": "1935120",
    "end": "1942500"
  },
  {
    "text": "main Arduino code which would then trigger receiving more mqtt messages so",
    "start": "1942500",
    "end": "1948440"
  },
  {
    "text": "we can actually use mqtt as a buffer for our messages rather than having to for",
    "start": "1948440",
    "end": "1954140"
  },
  {
    "text": "example store them on the board",
    "start": "1954140",
    "end": "1957520"
  },
  {
    "text": "so once it finishes scrolling the last piece of text that it receives it then goes back and checks",
    "start": "1960559",
    "end": "1967279"
  },
  {
    "text": "whether any subsequent messages have been sent and start scrolling the next piece of text",
    "start": "1967279",
    "end": "1974260"
  },
  {
    "text": "and that is it that is how we build a live caption",
    "start": "1974299",
    "end": "1980600"
  },
  {
    "text": "display that's how I built a live caption display and here is the finished result this is me uh showing it to my",
    "start": "1980600",
    "end": "1988220"
  },
  {
    "text": "incredibly bemused mother who was really unsure that this was actually the solution that she needed but you know I",
    "start": "1988220",
    "end": "1995179"
  },
  {
    "text": "tried and there is some more if you are still interested",
    "start": "1995179",
    "end": "2000880"
  },
  {
    "text": "there are a few parts of the app that I've not spoken about because otherwise we'd be here all day",
    "start": "2000880",
    "end": "2006460"
  },
  {
    "text": "one of which is you know obviously not everybody has a wearable LED mask with them so no",
    "start": "2006460",
    "end": "2014500"
  },
  {
    "text": "problem the app itself also shows the return text as text so we can go back to",
    "start": "2014500",
    "end": "2021100"
  },
  {
    "text": "the situation where we're just reading from our phone if we need to",
    "start": "2021100",
    "end": "2026320"
  },
  {
    "text": "and this is this is just it comes for free because we're using the ably",
    "start": "2026320",
    "end": "2031480"
  },
  {
    "text": "JavaScript SDK everything's being sent over websockets so if you visit",
    "start": "2031480",
    "end": "2037120"
  },
  {
    "text": "live caption.ably.dev you will be able to see what I'm saying as I'm saying it although so saying uh Azure cognitive",
    "start": "2037120",
    "end": "2045460"
  },
  {
    "text": "Services was having a 503 earlier today which is I think why this keeps turning off and back on so if anyone from the",
    "start": "2045460",
    "end": "2052118"
  },
  {
    "text": "Azure team is here can you tell me what's going on um but yes in future you will be able to",
    "start": "2052119",
    "end": "2058419"
  },
  {
    "text": "visit live caption.ably.dev for all of your captioning needs",
    "start": "2058419",
    "end": "2064800"
  },
  {
    "text": "um another things that I've not mentioned is the visual representation of the board in the app and this is",
    "start": "2065020",
    "end": "2070599"
  },
  {
    "text": "super cool so behind this is a full Arduino emulator which runs the exact same code",
    "start": "2070599",
    "end": "2078040"
  },
  {
    "text": "that the Arduino itself is running and outputs it to divs instead of two",
    "start": "2078040",
    "end": "2083200"
  },
  {
    "text": "individual pixels the reason why I built this is because",
    "start": "2083200",
    "end": "2088780"
  },
  {
    "text": "again if any of you have ever worked with Hardware it's such a slow debug cycle you know it",
    "start": "2088780",
    "end": "2095919"
  },
  {
    "text": "takes sometimes three minutes to push the code to the board you then have",
    "start": "2095919",
    "end": "2101920"
  },
  {
    "text": "to you know plug in your serial Monitor and double check what's happening and it's just slow and frustrating so I",
    "start": "2101920",
    "end": "2108460"
  },
  {
    "text": "built this visual emulator so that I could debug in the browser without having to have all of this plugged in on",
    "start": "2108460",
    "end": "2115839"
  },
  {
    "text": "my desk the good news is that all of this code for this project is on GitHub you can",
    "start": "2115839",
    "end": "2122859"
  },
  {
    "text": "absolutely take it and make it your own it is all open source if you would like to see any of it you can find it at",
    "start": "2122859",
    "end": "2128980"
  },
  {
    "text": "github.com ably labs live captiondemo and there's a whole load of other",
    "start": "2128980",
    "end": "2135099"
  },
  {
    "text": "projects there in ably Labs as well so if you want to build a chat app if you've got other iot projects if you",
    "start": "2135099",
    "end": "2141760"
  },
  {
    "text": "want to build multiplayer games and quizzes there's whole there's a whole load of free open source demos for you",
    "start": "2141760",
    "end": "2148660"
  },
  {
    "text": "there please check them out and please make them your own and if you do decide to build something",
    "start": "2148660",
    "end": "2155680"
  },
  {
    "text": "with this project if you want to build your own LED devices or Christmas jumper",
    "start": "2155680",
    "end": "2161020"
  },
  {
    "text": "or wedding dress or anything let me know I I really would love to",
    "start": "2161020",
    "end": "2166720"
  },
  {
    "text": "work with you on it um tell me about what you're making I like making sparkly things so I'm really",
    "start": "2166720",
    "end": "2173560"
  },
  {
    "text": "happy to do that with you you can help me on Twitter I am at this is Joe Frank or you can join the ably Discord where",
    "start": "2173560",
    "end": "2180460"
  },
  {
    "text": "you can chat with me in real time I'm always happy to talk about any",
    "start": "2180460",
    "end": "2185619"
  },
  {
    "text": "real-time projects so do give me a shout uh if you've enjoyed this talk please give a tweet to at ably real time so",
    "start": "2185619",
    "end": "2193480"
  },
  {
    "text": "that my boss knows that I'm hard at work today and I also have some cute little",
    "start": "2193480",
    "end": "2200500"
  },
  {
    "text": "stickers down here so if you would like some stickers please come and grab some thank you all for listening uh if you",
    "start": "2200500",
    "end": "2207280"
  },
  {
    "text": "have any questions I don't know if we have a mic or if you just want to come and talk to me at the end feel free if",
    "start": "2207280",
    "end": "2213280"
  },
  {
    "text": "you want to come and have a play with any of the bits of Hardware also come have a look but yes thank you so much",
    "start": "2213280",
    "end": "2219700"
  },
  {
    "text": "for listening [Applause]",
    "start": "2219700",
    "end": "2224809"
  }
]