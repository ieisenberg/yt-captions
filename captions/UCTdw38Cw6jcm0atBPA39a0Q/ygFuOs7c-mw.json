[
  {
    "start": "0",
    "end": "55000"
  },
  {
    "text": "well uh thanks for coming everyone it's uh it's great i know it's one of the last sessions of the day so i",
    "start": "5680",
    "end": "11200"
  },
  {
    "text": "appreciate you being here with me today we're going to be talking about service principles and master identity",
    "start": "11200",
    "end": "16880"
  },
  {
    "text": "if you don't know what these are i'll the whole point of this session is to explain to you what they they do what",
    "start": "16880",
    "end": "22320"
  },
  {
    "text": "they are and how you can use them and why you should be using them right uh so my name is uh christos i work for",
    "start": "22320",
    "end": "29119"
  },
  {
    "text": "microsoft progress my next slide i'm a program manager for the microsoft identity team i work",
    "start": "29119",
    "end": "34559"
  },
  {
    "text": "in the developer advocacy i like to join user groups conferences blogs",
    "start": "34559",
    "end": "41680"
  },
  {
    "text": "podcasts whatever to help inspire developers to write better and more secure software using our tools",
    "start": "41680",
    "end": "47760"
  },
  {
    "text": "i'm also a father and a husband i love open source and i'm also the greek kick",
    "start": "47760",
    "end": "53280"
  },
  {
    "text": "so if you know any greeks then i'm one anyway why are we here we are here",
    "start": "53280",
    "end": "59120"
  },
  {
    "start": "55000",
    "end": "104000"
  },
  {
    "text": "because um we want to uh explain how we should be authenticating service today",
    "start": "59120",
    "end": "64239"
  },
  {
    "text": "especially in the uh in the cloud era and how things have changed over the last few",
    "start": "64239",
    "end": "69680"
  },
  {
    "text": "years uh why is this a pain in the backside because a lot of people try to do it and they don't always do it",
    "start": "69680",
    "end": "75280"
  },
  {
    "text": "right and it is something that i failed multiple times as well then we're gonna we're going to look at what our managed",
    "start": "75280",
    "end": "81759"
  },
  {
    "text": "identities and service principles in the azure space which are part of the microsoft identity",
    "start": "81759",
    "end": "87520"
  },
  {
    "text": "and then how can we use them ourselves through demos and some slides and walking out of the session today",
    "start": "87520",
    "end": "94159"
  },
  {
    "text": "you will know at least how and why you should be using them in your solutions and how they can help you write more",
    "start": "94159",
    "end": "99520"
  },
  {
    "text": "secure software um so uh without further ado",
    "start": "99520",
    "end": "104880"
  },
  {
    "start": "104000",
    "end": "143000"
  },
  {
    "text": "if we were in the room together uh i would be asking you to uh to answer this question how many of you",
    "start": "104880",
    "end": "110880"
  },
  {
    "text": "here believe that you're identity developer pros i would uh raise my hand i see a um",
    "start": "110880",
    "end": "117119"
  },
  {
    "text": "that can there is raising like weight waving his head i i know that not many people",
    "start": "117119",
    "end": "123439"
  },
  {
    "text": "like to write identity in fact everybody hates identity i don't know anyone who's like hey i'm excited i'm going to write a login",
    "start": "123439",
    "end": "129599"
  },
  {
    "text": "page today it's going to be awesome so identity is hard unfortunately not many people realize how hard it can get especially uh",
    "start": "129599",
    "end": "136879"
  },
  {
    "text": "going beyond just a simple signing sign out and what have you and lots of people get wrong in fact uh",
    "start": "136879",
    "end": "143680"
  },
  {
    "start": "143000",
    "end": "212000"
  },
  {
    "text": "if you if you search for uh password reset for in asp.net",
    "start": "143680",
    "end": "148959"
  },
  {
    "text": "uh one of the top uh answers that come on google or bing whatever you use for",
    "start": "148959",
    "end": "154080"
  },
  {
    "text": "searching is one of the one blog that uh contains such inaccurate information and so much uh",
    "start": "154080",
    "end": "160720"
  },
  {
    "text": "insecure code like i highlighted here like storing passwords in clear text and you know doing the password in such",
    "start": "160720",
    "end": "167920"
  },
  {
    "text": "a wrong way that um not only like people like troy hunt went and commented that this is not a",
    "start": "167920",
    "end": "173519"
  },
  {
    "text": "good advice but you know as a new developer you do a search you find something like oh that looks uh easy i understand what the code",
    "start": "173519",
    "end": "179280"
  },
  {
    "text": "is doing i'm going to use this one and guess what lots of companies in fact many many",
    "start": "179280",
    "end": "184319"
  },
  {
    "text": "companies that uh over the last few years have made the news every week we got somebody else making",
    "start": "184319",
    "end": "190640"
  },
  {
    "text": "the news because they're either storing data and securely they're accessing data insecurely or the front door",
    "start": "190640",
    "end": "196319"
  },
  {
    "text": "the sign-in out process is um is insecure and i don't want you to be there i don't want you to be one of",
    "start": "196319",
    "end": "201920"
  },
  {
    "text": "these people i want you to fall in the pit of success when it comes to working with identity",
    "start": "201920",
    "end": "208319"
  },
  {
    "text": "ah now you might say well what does that have to do with uh mastering but we'll talk about that now uh back in 2007 i wrote the system",
    "start": "208319",
    "end": "214799"
  },
  {
    "start": "212000",
    "end": "307000"
  },
  {
    "text": "for a customer and you know i hand rolled my own artisan uh signing identity code and guess what",
    "start": "214799",
    "end": "221120"
  },
  {
    "text": "this is this what happens when you write an application and you put in the public domain you you upload something on azure or aws",
    "start": "221120",
    "end": "228480"
  },
  {
    "text": "or whatever and then suddenly it becomes a target you might say well i'm only writing a forum for",
    "start": "228480",
    "end": "233920"
  },
  {
    "text": "my friends right who who's going to be the street but you'd be surprised how many bots and",
    "start": "233920",
    "end": "239360"
  },
  {
    "text": "tools and malicious code is out there running and scanning anything that has a public",
    "start": "239360",
    "end": "245040"
  },
  {
    "text": "endpoint in order to find vulnerabilities and it might not might your code or your data may not be the target but your machine or your",
    "start": "245040",
    "end": "251200"
  },
  {
    "text": "resources could become the you know the trojan horse that will allow somebody else to use your resources to launch attacks so",
    "start": "251200",
    "end": "257280"
  },
  {
    "text": "it's not always about getting access to your data is uh is by providing a less",
    "start": "257280",
    "end": "264160"
  },
  {
    "text": "secure front door it means that other things could be compromised as well so uh i've made the mistakes in 2007 and",
    "start": "264160",
    "end": "271600"
  },
  {
    "text": "in fact i spent days if not weeks if not months trying to work out what is oauth how the flow works why",
    "start": "271600",
    "end": "280400"
  },
  {
    "text": "why it works in such a way how can i you know create a password he said without",
    "start": "280400",
    "end": "286080"
  },
  {
    "text": "compromising my users how can protect against brute force attacks what happens if there's a rainbow attack how where am i storing my",
    "start": "286080",
    "end": "292320"
  },
  {
    "text": "data there's so many different components that we don't realize today that could be used to compromise our",
    "start": "292320",
    "end": "298400"
  },
  {
    "text": "solutions so back then i was naive uh now i know better not to do it myself and hopefully",
    "start": "298400",
    "end": "303919"
  },
  {
    "text": "walking out of this session today you'll know that you shouldn't be doing it yourselves either now i work for microsoft identity and we",
    "start": "303919",
    "end": "311600"
  },
  {
    "start": "307000",
    "end": "577000"
  },
  {
    "text": "do have a couple of flavors when it comes to authenticating or allowing users to access a service and then",
    "start": "311600",
    "end": "318160"
  },
  {
    "text": "allowing that service to go and pull information azure active directory uh you'll probably love my",
    "start": "318160",
    "end": "324720"
  },
  {
    "text": "awesome handwriting here azure active directory is one of these services that underpins identity for us so with azure active",
    "start": "324720",
    "end": "331440"
  },
  {
    "text": "directory which is neither azure or active directory it's it's an identity service that allows you to authenticate users and do a few",
    "start": "331440",
    "end": "339280"
  },
  {
    "text": "other things allows you to go and register an application you register an app that",
    "start": "339280",
    "end": "344639"
  },
  {
    "text": "shows the intent of using azure identity as your identity provider it usually comes with a client id and a",
    "start": "344639",
    "end": "350880"
  },
  {
    "text": "tenant id it says this is the azure active directory instance i want to use and then we sometimes provide scopes",
    "start": "350880",
    "end": "357360"
  },
  {
    "text": "like i want to access azure resources once i sign in or i want to grab scopes for my apis",
    "start": "357360",
    "end": "363840"
  },
  {
    "text": "or i want to go and call azure services in some cases you may have to add the",
    "start": "363840",
    "end": "369840"
  },
  {
    "text": "secret the identity secret somewhere that allows your service to authenticate against",
    "start": "369840",
    "end": "374960"
  },
  {
    "text": "israeli so it's not just the user's authenticating but it's also the application identifying itself as",
    "start": "374960",
    "end": "380240"
  },
  {
    "text": "the service the problem there is that somehow we have to store that secret somewhere and that becomes a target",
    "start": "380240",
    "end": "386000"
  },
  {
    "text": "um now let's say four years ago when i was working with a customer i walked in and one of the things that",
    "start": "386000",
    "end": "392720"
  },
  {
    "text": "we did was looking at all wasps and how their solutions were secure and i said how did you guys",
    "start": "392720",
    "end": "399039"
  },
  {
    "text": "manage your secrets well they said we have an excel spreadsheet that is password protected i was like okay that's perfect i i like",
    "start": "399039",
    "end": "404800"
  },
  {
    "text": "the file they have a central location but how do your applications consume api keys and connection strings or what have",
    "start": "404800",
    "end": "410639"
  },
  {
    "text": "you i'll just put them in there in a web config okay and now you might think well that",
    "start": "410639",
    "end": "417360"
  },
  {
    "text": "doesn't that's standard practice that's what microsoft has been telling us to do or you know uh app settings location or you know",
    "start": "417360",
    "end": "423840"
  },
  {
    "text": "config.js or whatever file you use for your solution whether it's dot net or something else the problem there is that um let's say",
    "start": "423840",
    "end": "430479"
  },
  {
    "text": "you know the secrets and that's absolutely fine they're secure like you can secure your web config section so",
    "start": "430479",
    "end": "436479"
  },
  {
    "text": "you know they can be encrypted when they're running on the server fantastic what happens to uh those developers that",
    "start": "436479",
    "end": "441599"
  },
  {
    "text": "have access to production systems think about that you as a company trust your developers to",
    "start": "441599",
    "end": "447440"
  },
  {
    "text": "um to write codes and to access resources but uh it's not uncommon for these",
    "start": "447440",
    "end": "453599"
  },
  {
    "text": "developers to turn against the the company or to you know they're let go somebody was let go at the san francisco",
    "start": "453599",
    "end": "460639"
  },
  {
    "text": "public services i think that he was working at the public transport uh he got pissed off but he uh he got fired now he was",
    "start": "460639",
    "end": "468080"
  },
  {
    "text": "allowed to go back into his desk so he sat there nicely he encrypted the the production database",
    "start": "468080",
    "end": "474160"
  },
  {
    "text": "because he had access to that and then um that meant that he locked down all public services",
    "start": "474160",
    "end": "479520"
  },
  {
    "text": "uh systems for san francisco so for about two weeks everything was running for free because",
    "start": "479520",
    "end": "485440"
  },
  {
    "text": "there was no way for the system to charge um people that were coming in and going",
    "start": "485440",
    "end": "490720"
  },
  {
    "text": "to uh the tram and other public services now this guy was let go uh they made the",
    "start": "490720",
    "end": "496160"
  },
  {
    "text": "mistake to give him access to production systems and then he was able to go and encrypt data in fact he was taken to court and",
    "start": "496160",
    "end": "501759"
  },
  {
    "text": "he was uh he was fine and he was put in jail but he never disclosed the uh the actual",
    "start": "501759",
    "end": "506960"
  },
  {
    "text": "secret the the actual encryption decryption key so um they had to restore the system from some backup and that took me two weeks",
    "start": "506960",
    "end": "514399"
  },
  {
    "text": "what i'm saying here is by giving developers access to production systems or production",
    "start": "514399",
    "end": "520240"
  },
  {
    "text": "code willy-nilly like that can become a target or imagine if as a developer i'm testing",
    "start": "520240",
    "end": "525839"
  },
  {
    "text": "locally on my machine and my mission gets compromised now i don't have any bad intentions of",
    "start": "525839",
    "end": "531120"
  },
  {
    "text": "breaking production code or stealing data but my machine gets compromised i have the sequence in some files somewhere",
    "start": "531120",
    "end": "537120"
  },
  {
    "text": "maybe that never makes it into production but me having access to those things and these files and being",
    "start": "537120",
    "end": "542720"
  },
  {
    "text": "available to my local machine that also becomes a tiger for somebody else and many times most of the attacks are",
    "start": "542720",
    "end": "548640"
  },
  {
    "text": "not launched externally i'm not gonna try to brute force github to get access to your repo i will go via one of your users that has",
    "start": "548640",
    "end": "556720"
  },
  {
    "text": "something compromising on their machine that i can get access to and then use their information to go and launch an attack to your uh",
    "start": "556720",
    "end": "564640"
  },
  {
    "text": "or scan your code or a lot of attack to your internal systems so these id seekers is these are secrets",
    "start": "564640",
    "end": "570560"
  },
  {
    "text": "that we want you to not have to worry about neither as a developer or as a company",
    "start": "570560",
    "end": "576320"
  },
  {
    "text": "yeah that's the secret and this is bad because how many times do you rotate data in",
    "start": "576320",
    "end": "581360"
  },
  {
    "start": "577000",
    "end": "772000"
  },
  {
    "text": "fact i've been at customers that had production systems that were accessible by people i had left the",
    "start": "581360",
    "end": "587200"
  },
  {
    "text": "company two years after they had left the company because they never rotated their secrets somebody had the admin username and",
    "start": "587200",
    "end": "593760"
  },
  {
    "text": "password to some website and they were able to sign in because these uh access to those systems were obviously",
    "start": "593760",
    "end": "600080"
  },
  {
    "text": "uh was managed by an identity system that was not centrally managed like azure ad",
    "start": "600080",
    "end": "605600"
  },
  {
    "text": "or some other identity provider and the second one was like there's no there was no good practice for actually",
    "start": "605600",
    "end": "611120"
  },
  {
    "text": "rotating the secrets and that meant that you know people had access to that in fact i i did it i i was thinking about that last night in",
    "start": "611120",
    "end": "617760"
  },
  {
    "text": "my first job uh after i graduated from university i went as a tech support guy and uh one of the things i thought",
    "start": "617760",
    "end": "625600"
  },
  {
    "text": "was like maybe we should be rotating our domain secrets right the main passwords for our admins because you",
    "start": "625600",
    "end": "631519"
  },
  {
    "text": "know everything is running on a domain somewhere and sometimes you need to have elevated permissions and we had",
    "start": "631519",
    "end": "637120"
  },
  {
    "text": "web apps that were running on our servers back then we still had racks inside the office so physical servers in the office and i",
    "start": "637120",
    "end": "644880"
  },
  {
    "text": "wrote a bus script that would go and uh increment the password every month uh to the month",
    "start": "644880",
    "end": "650160"
  },
  {
    "text": "of the so it was like some random word and then zero one zero two zero three zero four zero five",
    "start": "650160",
    "end": "656880"
  },
  {
    "text": "so for every month i was just rotating that was my rotation and it was easy to get so if you knew",
    "start": "656880",
    "end": "661920"
  },
  {
    "text": "monday so if you knew january you knew february and march it was the such such a basic pattern",
    "start": "661920",
    "end": "667440"
  },
  {
    "text": "always there was an exclamation mark in the end so it was obviously more secure but that was my rotation i mean that was",
    "start": "667440",
    "end": "673120"
  },
  {
    "text": "better than not rotating the keys but at the same time it was an awful practice so rotation is something",
    "start": "673120",
    "end": "678320"
  },
  {
    "text": "that if you are managing keys today you know how tricky it is we have to remember how often to rotate them and when they",
    "start": "678320",
    "end": "683839"
  },
  {
    "text": "expire the other thing is exposure obviously i did mention that as a developer i should not have access to production",
    "start": "683839",
    "end": "690079"
  },
  {
    "text": "systems you as a company you don't want your developers to have access to production systems well i still need to write code for that",
    "start": "690079",
    "end": "696560"
  },
  {
    "text": "but is there a better way absolutely i will show you how and that minimizes the exposure to you as a developer and responsibility and as",
    "start": "696560",
    "end": "703200"
  },
  {
    "text": "a company scaling as well like what happens if you have 10 000 users in your app today how do you manage it",
    "start": "703200",
    "end": "709600"
  },
  {
    "text": "when they come and when they go if you have 10 000 employees accessing internal systems if they're not managed by azure ad",
    "start": "709600",
    "end": "715360"
  },
  {
    "text": "and have some random authentication attached to your solution how do you manage those users leaving the the company right",
    "start": "715360",
    "end": "721839"
  },
  {
    "text": "and as i said i've seen this happening before and finally it's definitely error prone code my bus scripts did not work well the first time",
    "start": "721839",
    "end": "728399"
  },
  {
    "text": "so i managed to look out everybody every admin account in the domain for the first month while i was",
    "start": "728399",
    "end": "734320"
  },
  {
    "text": "trying to figure out why uh you know i wasn't the best at writing baskets but then i'm not better any now",
    "start": "734320",
    "end": "739680"
  },
  {
    "text": "but at least i don't have to do them anymore i'm just saying that error prone and by error pronoun also i mean having",
    "start": "739680",
    "end": "746240"
  },
  {
    "text": "access to production systems can also do major things i had people wiping out production databases because they",
    "start": "746240",
    "end": "752720"
  },
  {
    "text": "thought it was they were in the different subscription on azure so they went into their oh let's let's wipe out the developer database",
    "start": "752720",
    "end": "759600"
  },
  {
    "text": "and obviously you can recover from that but you have to erase a support ticket it takes a couple of days",
    "start": "759600",
    "end": "764639"
  },
  {
    "text": "so you know it's one of the things that we want to avoid people from doing and security comes in layers",
    "start": "764639",
    "end": "773360"
  },
  {
    "start": "772000",
    "end": "805000"
  },
  {
    "text": "what do we recommend what is the solution for um against this how do we protect you as",
    "start": "773360",
    "end": "780079"
  },
  {
    "text": "a developer how do we protect your company from malicious access well obviously it's a",
    "start": "780079",
    "end": "786399"
  },
  {
    "text": "uh it's the minus identity solution we have something called the azure mass identity which is an",
    "start": "786399",
    "end": "793279"
  },
  {
    "text": "account that is managed by azure av and allows you to uh you know offload",
    "start": "793279",
    "end": "799279"
  },
  {
    "text": "that responsibility of storing the secrets or the keys to something else in fact you don't even have to store secrets",
    "start": "799279",
    "end": "804480"
  },
  {
    "text": "right because master identity handles the service principles for you so service principle is a",
    "start": "804480",
    "end": "810000"
  },
  {
    "start": "805000",
    "end": "939000"
  },
  {
    "text": "it's it's a cloud account i will explain that in a bit but it does the secret rotation for you so it's perfect it offers simple",
    "start": "810000",
    "end": "816720"
  },
  {
    "text": "abstractions from uh requiring tokens so technically your application is saying i'm going to use my managed identity to go and acquire",
    "start": "816720",
    "end": "823839"
  },
  {
    "text": "token from azure id behind the scenes you don't have to do that and then um it will come back and",
    "start": "823839",
    "end": "828880"
  },
  {
    "text": "provide me the access token to go and speak to my database or my storage account it works like like every other app or",
    "start": "828880",
    "end": "835680"
  },
  {
    "text": "service principle on azure id so you can actually use it in your code to do uh things as well you can go and",
    "start": "835680",
    "end": "842000"
  },
  {
    "text": "acquire the document manually there's a well-known endpoint in one habit it allows you to assign",
    "start": "842000",
    "end": "847120"
  },
  {
    "text": "rights to service principles via rbac which means that if you are using him as identity you can say i want this master",
    "start": "847120",
    "end": "852959"
  },
  {
    "text": "then to only be able to go and get a key from key vault and nothing else so",
    "start": "852959",
    "end": "859360"
  },
  {
    "text": "with that you don't have to worry about that account being compromised and then going and",
    "start": "859360",
    "end": "864720"
  },
  {
    "text": "spinning up resources or deleting resources from wherever it is available for many other services",
    "start": "864720",
    "end": "870480"
  },
  {
    "text": "in fact i love the because um azure id underpins almost everything and because managed",
    "start": "870480",
    "end": "875839"
  },
  {
    "text": "identities are so important there's a major effort driving the let's make as many",
    "start": "875839",
    "end": "881360"
  },
  {
    "text": "services uh compatible with smartest identity as possible so it started with web apps and storage and key vault and then it",
    "start": "881360",
    "end": "887680"
  },
  {
    "text": "expanded to support things like containers kubernetes uh data lakes sql server and",
    "start": "887680",
    "end": "893519"
  },
  {
    "text": "what have you so you have your front end using a manual identity and i will show you how it works",
    "start": "893519",
    "end": "899839"
  },
  {
    "text": "it gives a man's identity to go and authenticate against azure id behind the scenes it acquires appropriate tokens and goes",
    "start": "899839",
    "end": "905680"
  },
  {
    "text": "and speaks to the services that needs to without you having to add anything what does that mean it means that my web app",
    "start": "905680",
    "end": "911600"
  },
  {
    "text": "can speak to my sql server without having a a connection stream right i don't have to provide a secret to that sql server",
    "start": "911600",
    "end": "918399"
  },
  {
    "text": "i don't have to provide a secret to my storage account or my keyboard it will know how to go and do it for me",
    "start": "918399",
    "end": "924639"
  },
  {
    "text": "uh it is exposed as a local endpoint which is fantastic i can call it myself through code i can do an http",
    "start": "924639",
    "end": "929920"
  },
  {
    "text": "call to that end point it will give me my talking back automatically as long as i'm running at the context of",
    "start": "929920",
    "end": "934959"
  },
  {
    "text": "that service and it provides end-to-end security now msi or miles identity is not just",
    "start": "934959",
    "end": "942240"
  },
  {
    "text": "used for uh for what the dogs are saying right because the dogs are like oh you can access services on azure and that's all you",
    "start": "942240",
    "end": "948880"
  },
  {
    "text": "need but there are other things they can do you can actually go and call into graph and office 365 and other services",
    "start": "948880",
    "end": "954399"
  },
  {
    "text": "that are part of your tenants as a part of your organization so it's a fantastic way to extend",
    "start": "954399",
    "end": "960880"
  },
  {
    "text": "access to other resources securely and the best one that we don't really talk about too much",
    "start": "960880",
    "end": "966480"
  },
  {
    "text": "is the ability to actually go from your service your front end into another",
    "start": "966480",
    "end": "973199"
  },
  {
    "text": "service that you own another api both secure with mass identity so don't be leaving docs as the",
    "start": "973199",
    "end": "979040"
  },
  {
    "text": "slide says because the the capabilities there are um are quite wide you can do quite a few",
    "start": "979040",
    "end": "985120"
  },
  {
    "text": "things if you want to uh if you employ miles identity",
    "start": "985120",
    "end": "990480"
  },
  {
    "start": "990000",
    "end": "1021000"
  },
  {
    "text": "how does it work right uh you have your application that needs to speak to another service let's say keyboard right",
    "start": "990480",
    "end": "996480"
  },
  {
    "text": "now i need to go and grab a secret from keyboard and i will show this my demo uh using some kind of a connection now i only",
    "start": "996480",
    "end": "1003040"
  },
  {
    "text": "know where my key all i need to know is where my keyboard is what miles identity will do or my app will do",
    "start": "1003040",
    "end": "1008320"
  },
  {
    "text": "is go to azure id via msi uh call into azure the azure id will issue",
    "start": "1008320",
    "end": "1013600"
  },
  {
    "text": "the appropriate token with the appropriate permissions and then i can go and speak to keyboard as long as key vault is aware of that",
    "start": "1013600",
    "end": "1019519"
  },
  {
    "text": "identity if i am thinking about the other scenarios like office and graph and what",
    "start": "1019519",
    "end": "1025120"
  },
  {
    "start": "1021000",
    "end": "1038000"
  },
  {
    "text": "have you then i can use again a month identity behind the scenes to go and grab my token and then as long as my",
    "start": "1025120",
    "end": "1030319"
  },
  {
    "text": "manage identity has the right permissions to go and speak to graph or office or sharepoint or whatever",
    "start": "1030319",
    "end": "1036079"
  },
  {
    "text": "then i can do that as well and finally the exact same pattern can be used for me to",
    "start": "1036079",
    "end": "1041600"
  },
  {
    "start": "1038000",
    "end": "1064000"
  },
  {
    "text": "throw my application my front end say my single page app uh written with typescript and",
    "start": "1041600",
    "end": "1046798"
  },
  {
    "text": "javascript can go and speak into azure id grab the appropriate tokens and then go and speak to my other service my other",
    "start": "1046799",
    "end": "1052880"
  },
  {
    "text": "api which is also secured and there they will both be aware of that and we'll both be able to",
    "start": "1052880",
    "end": "1058240"
  },
  {
    "text": "authenticate their tokens and let each other stick i don't have to configure anything uh beyond that let's jump into a demo",
    "start": "1058240",
    "end": "1065440"
  },
  {
    "start": "1064000",
    "end": "1071000"
  },
  {
    "text": "because i've been speaking for the last 50 minutes and my voice is multiple right so let's see what we have here i",
    "start": "1065440",
    "end": "1072320"
  },
  {
    "start": "1071000",
    "end": "1375000"
  },
  {
    "text": "i'm going to be using a net core as the example but what i'm showing you here is not limit.net or you can use any of",
    "start": "1072320",
    "end": "1079120"
  },
  {
    "text": "the azure sdks that we have available today whether it's java javascript",
    "start": "1079120",
    "end": "1085039"
  },
  {
    "text": "go python ruby whatever you like to actually uh achieve the same things however",
    "start": "1085039",
    "end": "1090400"
  },
  {
    "text": "dotnet comes with some nice features here so i have a standard web application that uh",
    "start": "1090400",
    "end": "1095679"
  },
  {
    "text": "that has two things here uh obviously i'm on my local machine right now so uh manage identity is is a notion",
    "start": "1095679",
    "end": "1102559"
  },
  {
    "text": "that only exists on azure technically but we are faking the mouse and the the",
    "start": "1102559",
    "end": "1108000"
  },
  {
    "text": "libraries allow you to say well if i'm running locally i still don't want to have access to the seekers what i want to do let me just",
    "start": "1108000",
    "end": "1113919"
  },
  {
    "text": "make this bigger because i see that struggling and let me hide this one because that's totally relevant to what we're showing here",
    "start": "1113919",
    "end": "1120000"
  },
  {
    "text": "uh hide hide let's go into our code in fact let's go",
    "start": "1120000",
    "end": "1125919"
  },
  {
    "text": "to program so what i want to do is i want to pull some secrets from kibble this is what my",
    "start": "1125919",
    "end": "1130960"
  },
  {
    "text": "code is doing here but you'll notice that in my app settings i have nothing with regards to",
    "start": "1130960",
    "end": "1136640"
  },
  {
    "text": "where the the keyboard is or where uh well any secrets or the keys to my keyboard",
    "start": "1136640",
    "end": "1142000"
  },
  {
    "text": "all i have here is just some logging information so how does the application know what to",
    "start": "1142000",
    "end": "1147120"
  },
  {
    "text": "do in dotnet we have uh a couple of things let me let me show you the libraries that we're using",
    "start": "1147120",
    "end": "1152320"
  },
  {
    "text": "we have the azure identity that is responsible for authenticating the service we have uh the keyboard secrets which",
    "start": "1152320",
    "end": "1157919"
  },
  {
    "text": "allows us to go and add runtime we can pull those stickers live but we also have a configuration",
    "start": "1157919",
    "end": "1165039"
  },
  {
    "text": "extension that allows us to bootstrap the solution it allows us to butcher our solution",
    "start": "1165039",
    "end": "1170880"
  },
  {
    "text": "with um with kibble so when my my dot net core application is starting up",
    "start": "1170880",
    "end": "1176960"
  },
  {
    "text": "if i have something in my secrets i have some config from some config",
    "start": "1176960",
    "end": "1183520"
  },
  {
    "text": "value from keyboard right it's actually no secret it is a secret but we don't want to populate",
    "start": "1183520",
    "end": "1189039"
  },
  {
    "text": "this here it could be left blank at runtime it was a startup a startup at bootstrap",
    "start": "1189039",
    "end": "1195280"
  },
  {
    "text": "it will replace whatever value is here with what it finds in keyboard so if if in my keyboard in my azure keyboard",
    "start": "1195280",
    "end": "1201440"
  },
  {
    "text": "which is a service that allows us to store secrets and keys i have that same value it will actually place on the fly and do",
    "start": "1201440",
    "end": "1208159"
  },
  {
    "text": "it for us and so i have these three libraries that i need to use",
    "start": "1208159",
    "end": "1213280"
  },
  {
    "text": "then in my bootstrap in my program and one of the things i'm doing is i'm saying as i'm building my my",
    "start": "1213280",
    "end": "1218880"
  },
  {
    "text": "conflict let me try this one and let me make the code slightly bigger as i am bootstrapping my code right",
    "start": "1218880",
    "end": "1225520"
  },
  {
    "text": "what i want to do here is i want to add my keyboard now i'm pointing to my keyboard but you notice i don't have any secrets",
    "start": "1225520",
    "end": "1231039"
  },
  {
    "text": "and what i'm doing down here is i'm using the azure identity library to say well first i",
    "start": "1231039",
    "end": "1236640"
  },
  {
    "text": "want to try my local credentials which is my azure cli and that can be anything could be your visual studio code so right now you're",
    "start": "1236640",
    "end": "1242400"
  },
  {
    "text": "not saying my visual studio i'm signed in as my domain account that my that domain account as long as it has access to key",
    "start": "1242400",
    "end": "1248000"
  },
  {
    "text": "vault it will it would also work that's what i'm saying i want to use my azure cli credentials first and if if he doesn't find anything",
    "start": "1248000",
    "end": "1255120"
  },
  {
    "text": "i want to go and use my mouse identity as i said mass identity does not exist on my local",
    "start": "1255120",
    "end": "1261520"
  },
  {
    "text": "but machine will i will mention that there's a nice caveat there now i could also be doing something like new uh visual studio credential visual",
    "start": "1261600",
    "end": "1269360"
  },
  {
    "text": "studio code credentials uh so i can if i'm running inside visual studio i can also use those i don't have",
    "start": "1269360",
    "end": "1274880"
  },
  {
    "text": "to use the cli and the caveat here is as long as i have signed into my cli",
    "start": "1274880",
    "end": "1280159"
  },
  {
    "text": "and and i have a valid token somewhere in my cask then it will use that one to run the",
    "start": "1280159",
    "end": "1285600"
  },
  {
    "text": "application so that's the first feed this one is going to bootstrap my application and populate the key there",
    "start": "1285600",
    "end": "1291679"
  },
  {
    "text": "let me close this one i don't want this one anymore don't save and now there's another file i have which is in the views and we will",
    "start": "1291679",
    "end": "1298400"
  },
  {
    "text": "see this running in a little bit called keyboard secrets and here what i'm doing is not only am i pulling the config value",
    "start": "1298400",
    "end": "1305200"
  },
  {
    "text": "but i also want to a runtime go and get something from kibble and to achieve this the code is",
    "start": "1305200",
    "end": "1310640"
  },
  {
    "text": "very very similar i have a secret client it's a keyboard secret client it's part of the the azure sd case right and in here what",
    "start": "1310640",
    "end": "1318320"
  },
  {
    "text": "i'm saying is a point to my keyboard and then use the exact same credentials to go and um and you know get my",
    "start": "1318320",
    "end": "1324960"
  },
  {
    "text": "credentials to authenticate the keyboard and grab my value which in this case is uh my kv secret",
    "start": "1324960",
    "end": "1332480"
  },
  {
    "text": "let's see this running by the way right so let's uh let's ping this up terminal new terminal",
    "start": "1332480",
    "end": "1340240"
  },
  {
    "text": "right it's building lots of 5001 just thinking about",
    "start": "1345120",
    "end": "1351440"
  },
  {
    "text": "it where's the chat i don't know if there's any time where can i see myself",
    "start": "1351440",
    "end": "1361039"
  },
  {
    "text": "fat oh i found it nice no question so far which is good",
    "start": "1361039",
    "end": "1366080"
  },
  {
    "text": "uh please let me know if you have any questions more than i have to answer them so right now the application is running let's launch it",
    "start": "1366080",
    "end": "1372480"
  },
  {
    "text": "loads check checks out populated during startup and then if i go to my secrets hello mdc",
    "start": "1372480",
    "end": "1381360"
  },
  {
    "start": "1375000",
    "end": "1508000"
  },
  {
    "text": "oh you rock should be you rock but this is the information that is coming directly from kibo where's that key",
    "start": "1381360",
    "end": "1387919"
  },
  {
    "text": "vault let's go and find it",
    "start": "1387919",
    "end": "1391200"
  },
  {
    "text": "find the right uh we know that there you go so here if i go into my secrets session",
    "start": "1393360",
    "end": "1399280"
  },
  {
    "text": "expired something about tokens authentication right",
    "start": "1399280",
    "end": "1404720"
  },
  {
    "text": "so here i have my key vault and i have my secrets so you'll notice that there is the kv",
    "start": "1406559",
    "end": "1412000"
  },
  {
    "text": "secret that i mentioned before and there's the sum config value from keyboard",
    "start": "1412000",
    "end": "1417440"
  },
  {
    "text": "so as you can see this one is running locally in my machine i didn't have to have any seekers whatsoever",
    "start": "1417440",
    "end": "1423200"
  },
  {
    "text": "and then i was able to run it and authenticate against the azure cables now if you were in an organization if you're",
    "start": "1423200",
    "end": "1429600"
  },
  {
    "text": "running code as a team you'll probably have a number of keyboards one would be a developer key vault where you may have access to those",
    "start": "1429600",
    "end": "1436000"
  },
  {
    "text": "secrets so you can actually configure them and run them and then in production there will be another keyboard where",
    "start": "1436000",
    "end": "1442240"
  },
  {
    "text": "you know in your application you replace the hard-coded bad practice crystals key vault with",
    "start": "1442240",
    "end": "1447919"
  },
  {
    "text": "some dynamic value that comes from your config and then again because that's not sensitive information it can be",
    "start": "1447919",
    "end": "1453360"
  },
  {
    "text": "something that can be stored in a config file somewhere and then you say when i'm running production i want to use a different",
    "start": "1453360",
    "end": "1458400"
  },
  {
    "text": "um keyboard instance so not always using the same keyboard instance and that allows you to",
    "start": "1458400",
    "end": "1463840"
  },
  {
    "text": "see when the keys are rotated who rotated them why it happened so if something is not working",
    "start": "1463840",
    "end": "1469200"
  },
  {
    "text": "or it's broken the keyboard auditing capabilities allow you to go and find what's happening with your secrets you",
    "start": "1469200",
    "end": "1475200"
  },
  {
    "text": "can also find out who's reading those secrets and why they're not coming from your application if you're only expecting your application to be using",
    "start": "1475200",
    "end": "1481360"
  },
  {
    "text": "them so a lot of tight security now what happens when i publish this to azure",
    "start": "1481360",
    "end": "1486400"
  },
  {
    "text": "like what how is this running on azure because we said this is local which is brilliant now i want to see how that",
    "start": "1486400",
    "end": "1493200"
  },
  {
    "text": "manifest manifests itself on azure because on azure i don't have other cli writing in my service",
    "start": "1493200",
    "end": "1498400"
  },
  {
    "text": "well i could i could have a vm running other cli so that's a lot okay let's see what happens when we go",
    "start": "1498400",
    "end": "1504000"
  },
  {
    "text": "into azure so if i come here uh i have this this application was",
    "start": "1504000",
    "end": "1509919"
  },
  {
    "text": "deployed some time ago it's the same exact application so if i browse into this god man why did my sessions expire",
    "start": "1509919",
    "end": "1518799"
  },
  {
    "text": "it's fine it's fine are you authenticating it's good it's about security so in my overview if",
    "start": "1518960",
    "end": "1525039"
  },
  {
    "text": "i browse to my website it's exactly the same i could also go",
    "start": "1525039",
    "end": "1530320"
  },
  {
    "text": "here and change it in fact we can go and change the secrets so i can prove that i'm online let's see new version",
    "start": "1530320",
    "end": "1539679"
  },
  {
    "text": "now because i don't want to mistype it i'll say change dynamically",
    "start": "1540640",
    "end": "1549600"
  },
  {
    "text": "i'm going to copy this i don't ask myself to type in the blinds i will create that",
    "start": "1550159",
    "end": "1556320"
  },
  {
    "text": "one so you see that the current version now so if i go back to my application and refresh the page",
    "start": "1556320",
    "end": "1561760"
  },
  {
    "text": "check that out settings dynamically it's working right so this is my web app running in production",
    "start": "1561760",
    "end": "1568240"
  },
  {
    "text": "using mouse identity to go into keyboard no secrets whatsoever so how does this work obviously for the",
    "start": "1568240",
    "end": "1573840"
  },
  {
    "text": "website to be able to do that we need some kind of identity something that identifies this exact instance to kibble",
    "start": "1573840",
    "end": "1581919"
  },
  {
    "start": "1574000",
    "end": "1708000"
  },
  {
    "text": "and this is my identity right inside certain services and i'll say more and more services are",
    "start": "1581919",
    "end": "1587520"
  },
  {
    "text": "becoming aware of that get the ability to uh to have an identity that identity uh has two flavors there's a system",
    "start": "1587520",
    "end": "1594480"
  },
  {
    "text": "assigned which is something that you can provision as part of your resource and it's tied to your issues as well so",
    "start": "1594480",
    "end": "1600000"
  },
  {
    "text": "if i were to wipe out this website today it will automatically kill off my my managed identity",
    "start": "1600000",
    "end": "1606720"
  },
  {
    "text": "it's nice right it's short-lived the keys are managed by me i just said on and save and when it created",
    "start": "1606720",
    "end": "1612080"
  },
  {
    "text": "everything for me so this identity if i were to go into my keyboard i should be able to find it in",
    "start": "1612080",
    "end": "1617840"
  },
  {
    "text": "my permissions so if i go into the root and i go into my access policies this is where i define who has access to",
    "start": "1617840",
    "end": "1624159"
  },
  {
    "text": "my keyboard i should be able to find it somewhere here",
    "start": "1624159",
    "end": "1631840"
  },
  {
    "text": "this is the same one so uh this is the identity that we're currently running the website under",
    "start": "1633200",
    "end": "1638480"
  },
  {
    "text": "and you know so it picked up the the same name which is great i can easily identify that and it only has two permissions it has",
    "start": "1638480",
    "end": "1644960"
  },
  {
    "text": "the ability to list and get secrets that's all it has and create secrets can change anything else",
    "start": "1644960",
    "end": "1650000"
  },
  {
    "text": "which is brilliant slot down and that identity which is tied to my web app can now go and access things now in",
    "start": "1650000",
    "end": "1656240"
  },
  {
    "text": "some cases you might say well i don't want my identity to be uh to be assigned and only live with the",
    "start": "1656240",
    "end": "1663840"
  },
  {
    "text": "resource because that's the system assigned identity i want it to be something i define because i might be setting that identity",
    "start": "1663840",
    "end": "1669600"
  },
  {
    "text": "with other services or i might want to have somebody else in the it team assigning those identities to me",
    "start": "1669600",
    "end": "1675679"
  },
  {
    "text": "and then me as a developer just tying the two together so in that instance i could go and actually add an existing",
    "start": "1675679",
    "end": "1681039"
  },
  {
    "text": "one here and then let the website run under that identity",
    "start": "1681039",
    "end": "1686399"
  },
  {
    "text": "easy peasy right so manage identities allow us to uh to have one service calling into another",
    "start": "1686399",
    "end": "1692000"
  },
  {
    "text": "service whether it's our services or other services and authenticate against them grabbing a",
    "start": "1692000",
    "end": "1698399"
  },
  {
    "text": "talking and being able to pass the token and authenticate the token and we don't have to share any secrets anywhere which is brilliant",
    "start": "1698399",
    "end": "1704399"
  },
  {
    "text": "now uh the other piece of my talk it's it's focusing on service",
    "start": "1704399",
    "end": "1709520"
  },
  {
    "start": "1708000",
    "end": "1716000"
  },
  {
    "text": "principles and this is usually a tiki subject or a consensus so as i said before",
    "start": "1709520",
    "end": "1717279"
  },
  {
    "text": "i was working for a company i had to manage the domain accounts and the local accounts but it was all nice and easy to work",
    "start": "1717279",
    "end": "1724159"
  },
  {
    "text": "with because i was in my own network we had a lan with the main service",
    "start": "1724159",
    "end": "1729679"
  },
  {
    "text": "with an active directory and i was managing all the accounts from there and that was brilliant but you know at",
    "start": "1729679",
    "end": "1735360"
  },
  {
    "text": "some point everybody moved the cloud so suddenly we don't have that mode we don't have that network uh we",
    "start": "1735360",
    "end": "1741360"
  },
  {
    "text": "don't have that kind of domain where i manage everything and i became tricky because how do you create a",
    "start": "1741360",
    "end": "1746640"
  },
  {
    "text": "service accounts that need to run services right i need i need a function or some web job or some",
    "start": "1746640",
    "end": "1753360"
  },
  {
    "text": "the daemon service running on a vm being able to call other services securely in the in the cloud world this doesn't",
    "start": "1753360",
    "end": "1760720"
  },
  {
    "text": "exist so how do we make it happen well this is where service principles come into play i talked about operations a little bit",
    "start": "1760720",
    "end": "1767360"
  },
  {
    "text": "and this is where it gets confusing so an app registration always creates a service principle behind the scene so i",
    "start": "1767360",
    "end": "1772480"
  },
  {
    "text": "go into azure id i create an operating station that also creates a service principle that service principle is the account",
    "start": "1772480",
    "end": "1778399"
  },
  {
    "text": "that runs behind the scenes and you can think of an operating system as the base class and then the service",
    "start": "1778399",
    "end": "1784640"
  },
  {
    "text": "principles as the instances of that class where i can go and have copies of that the nice thing is that",
    "start": "1784640",
    "end": "1791279"
  },
  {
    "text": "i can lock the permissions for each service principle independently of the of each other so i could have one",
    "start": "1791279",
    "end": "1796799"
  },
  {
    "text": "service principle that maps to an app registration that has slightly different permissions to another",
    "start": "1796799",
    "end": "1801919"
  },
  {
    "text": "uh no so uh service business are your service accounts",
    "start": "1801919",
    "end": "1807039"
  },
  {
    "start": "1804000",
    "end": "1849000"
  },
  {
    "text": "for the cloud you know era they allow you to create automated tasks",
    "start": "1807039",
    "end": "1812559"
  },
  {
    "text": "for powershell or cli they even allow you to sign in as these accounts when you need to run things",
    "start": "1812559",
    "end": "1818000"
  },
  {
    "text": "you can pass them into your daemon apps and these demon apps can authenticate based on the account from",
    "start": "1818000",
    "end": "1823440"
  },
  {
    "text": "azure id and then acquire the appropriate tokens they're going to speak to other services you can use them for ci cd i will show",
    "start": "1823440",
    "end": "1829120"
  },
  {
    "text": "you today how to use them and then we have machine learning and every other service that supports these capabilities you can write",
    "start": "1829120",
    "end": "1835279"
  },
  {
    "text": "let's say a python task and upload into uh",
    "start": "1835279",
    "end": "1842240"
  },
  {
    "text": "into service and run under the service principle and we'll only have certain permissions which i i love",
    "start": "1843039",
    "end": "1848480"
  },
  {
    "text": "so uh the easiest way to create it is through the cli you can do it through powershell you can do it in",
    "start": "1848480",
    "end": "1853919"
  },
  {
    "start": "1849000",
    "end": "1889000"
  },
  {
    "text": "the portal but first you create a service principle account and you you give it a name and then you",
    "start": "1853919",
    "end": "1859200"
  },
  {
    "text": "go and assign it certain permissions now the nice thing here is i can lock it down to a very very",
    "start": "1859200",
    "end": "1865440"
  },
  {
    "text": "small subset of resources in fact it can be at the subscription level can be at the resource group level or it",
    "start": "1865440",
    "end": "1870640"
  },
  {
    "text": "can be at a very specific resource level so i can have a service principle that can only speak to a storage account",
    "start": "1870640",
    "end": "1876320"
  },
  {
    "text": "and a very specific storage account within a service uh sorry resource group and in that there maybe i",
    "start": "1876320",
    "end": "1882799"
  },
  {
    "text": "can only give it permissions to read the blobs and nothing else so that's very nice as we can lock things down",
    "start": "1882799",
    "end": "1888559"
  },
  {
    "text": "ourselves now one of the things i really love about service principle is that it allows me to create",
    "start": "1888559",
    "end": "1894080"
  },
  {
    "text": "uh ci cd tasks that run securely and i have a couple of demos for you here the first demo is in azure devops",
    "start": "1894080",
    "end": "1903120"
  },
  {
    "start": "1898000",
    "end": "2085000"
  },
  {
    "text": "and i don't know how many of you here use azure devops but it is one of the options if you want to run uh",
    "start": "1903120",
    "end": "1909760"
  },
  {
    "text": "something in uh like ci cd right i upload my codes and my repo is here in",
    "start": "1909760",
    "end": "1916240"
  },
  {
    "text": "fact i only have infrastructures code here so i'm using arm and then inside my arm i have a template",
    "start": "1916240",
    "end": "1922799"
  },
  {
    "text": "which only does a sql database deployment so it has my my",
    "start": "1922799",
    "end": "1930240"
  },
  {
    "text": "parameters if you haven't seen them before and then in here it says i'm going to go and create as a server and add a database",
    "start": "1930240",
    "end": "1938480"
  },
  {
    "text": "and this is nice the the problem is that for creating a database or for creating a sql server you need an",
    "start": "1938480",
    "end": "1944000"
  },
  {
    "text": "admin login and an admin password and it's been many times when i walked into a company and i saw this",
    "start": "1944000",
    "end": "1950000"
  },
  {
    "text": "hey we're using arm we're doing our deployment and i was like okay where do you store your secrets",
    "start": "1950000",
    "end": "1955360"
  },
  {
    "text": "in the arm templates but they're inside azure devops why would that be a problem think about that we mentioned this",
    "start": "1955360",
    "end": "1961360"
  },
  {
    "text": "before as a developer as an id admin as a devops person i should not have access to production",
    "start": "1961360",
    "end": "1966480"
  },
  {
    "text": "secrets because that allows me now to go and manage that sql server somehow and you might say well how do we manage these",
    "start": "1966480",
    "end": "1972720"
  },
  {
    "text": "things well you can still have secrets obviously you can still have the username and password but um we we recommend that only very few",
    "start": "1972720",
    "end": "1980159"
  },
  {
    "text": "people have access to that you use the break class approach where you have a vault a physical vault in your company that",
    "start": "1980159",
    "end": "1986399"
  },
  {
    "text": "somebody has to physically go and open with the right combination pick them out and crack the",
    "start": "1986399",
    "end": "1992240"
  },
  {
    "text": "the keys so they can have access to them that kind of security we're talking about now i don't want you to ever i don't",
    "start": "1992240",
    "end": "1997679"
  },
  {
    "text": "want to see you ever doing this what i want you to see what i want to see from you guys doing is this",
    "start": "1997679",
    "end": "2004799"
  },
  {
    "text": "using keyboard check this out i can actually say add deployment time go and grab my",
    "start": "2004799",
    "end": "2011279"
  },
  {
    "text": "secrets from key vault populate my my parameters and then pass these parameters into my arm template",
    "start": "2011279",
    "end": "2017360"
  },
  {
    "text": "to make it happen and that means that i don't have to worry about that again we're using the same kind of secrets and",
    "start": "2017360",
    "end": "2023679"
  },
  {
    "text": "then the way that this works is if i go into my yaml file",
    "start": "2023679",
    "end": "2029519"
  },
  {
    "text": "in here i am what this yaml file is doing in effect is saying go and deploy this uh",
    "start": "2029519",
    "end": "2034880"
  },
  {
    "text": "this arm template uh with the uh the parameters well this is the insecure one so we want the secure one",
    "start": "2034880",
    "end": "2041039"
  },
  {
    "text": "here with a keyboard parameters are coming from this file and for the task to authenticate i'm",
    "start": "2041039",
    "end": "2047120"
  },
  {
    "text": "using service principles that service principle likely devos will instantiate one for me so if i say i want to create a",
    "start": "2047120",
    "end": "2052638"
  },
  {
    "text": "connection to my azure then it will say well let me create an account for you sure not the",
    "start": "2052639",
    "end": "2057679"
  },
  {
    "text": "settings it's in the service connections and this service connection this cm internal",
    "start": "2057679",
    "end": "2063040"
  },
  {
    "text": "also exists in my keyboard",
    "start": "2063040",
    "end": "2066879"
  },
  {
    "text": "it might have a deployment principle here right different name but this is what is doing the in fico things this one this is the",
    "start": "2069359",
    "end": "2076878"
  },
  {
    "text": "one that actually authenticates due to azure id acquires the permissions to go and speak",
    "start": "2076879",
    "end": "2082560"
  },
  {
    "text": "to key vault and then comes back and runs my task i'm gonna i'm not gonna run the task because it's gonna",
    "start": "2082560",
    "end": "2088000"
  },
  {
    "start": "2085000",
    "end": "2118000"
  },
  {
    "text": "take five minutes but i want to show you something else right you said azure devops works great thank you but you know we're writing on",
    "start": "2088000",
    "end": "2094158"
  },
  {
    "text": "github fine github in fact you can be running on anything you can have jenkins can have any other tools that you want to uh",
    "start": "2094159",
    "end": "2100640"
  },
  {
    "text": "work with but i have uh my repos if i load this before but it's fine",
    "start": "2100640",
    "end": "2108079"
  },
  {
    "text": "so here i have a very similar task i have my github action and inside my",
    "start": "2108079",
    "end": "2114800"
  },
  {
    "text": "workflows i have a main so my main does the exact same",
    "start": "2114800",
    "end": "2120079"
  },
  {
    "start": "2118000",
    "end": "2160000"
  },
  {
    "text": "thing although it's using uh github to deploy things so what i have here is uh i have my branches i'm pulling",
    "start": "2120079",
    "end": "2128880"
  },
  {
    "text": "from main the exact same code and then down here i am authenticating with",
    "start": "2128880",
    "end": "2134240"
  },
  {
    "text": "the azure cli so i'm grabbing the appropriate producers but in this sense i'm not using my own",
    "start": "2134240",
    "end": "2139280"
  },
  {
    "text": "account i'm using a service principle account which i created and assigned to this",
    "start": "2139280",
    "end": "2145920"
  },
  {
    "text": "github repo and then from there i'm deploying things using that account so this one is",
    "start": "2145920",
    "end": "2153119"
  },
  {
    "text": "deploying my arm templates you'll see it using the keyboard version and i don't have to pass secrets anywhere at all which is awesome",
    "start": "2153119",
    "end": "2160480"
  },
  {
    "start": "2160000",
    "end": "2336000"
  },
  {
    "text": "but the the other option obviously would be to uh you can do with terraform as well so",
    "start": "2160480",
    "end": "2165839"
  },
  {
    "text": "let's go and see how terraform works by going to my route i have another deployment option here",
    "start": "2165839",
    "end": "2172000"
  },
  {
    "text": "and then in my terraform i have my variables which are not secrets right resource group is not a",
    "start": "2172000",
    "end": "2177680"
  },
  {
    "text": "secret or the location is not a secret i need to protect but i also have a sql server need deploy and i need to have some kind",
    "start": "2177680",
    "end": "2183839"
  },
  {
    "text": "of a way to protect them so my admin username and my admin password are using the azure key vault",
    "start": "2183839",
    "end": "2191440"
  },
  {
    "text": "provider to go and grab the secrets so i'm instantiating this with a terraform then i say to my terraform go and use my",
    "start": "2191440",
    "end": "2197920"
  },
  {
    "text": "service principle account and securely go and pull these two secrets from my",
    "start": "2197920",
    "end": "2203520"
  },
  {
    "text": "from my keyboard and then down here i'm passing those secrets into my deployment so you can see azure devops github",
    "start": "2203520",
    "end": "2210640"
  },
  {
    "text": "github actions and then terraform can all benefit from removing all the secrets all together",
    "start": "2210640",
    "end": "2216720"
  },
  {
    "text": "and mounting them now you might say well chris uh it's fine i mean we can stick them into our secrets here",
    "start": "2216720",
    "end": "2223119"
  },
  {
    "text": "right the the challenge here is that you don't really have auditing on who's using the secrets and when whereas if you do it via keyboard you",
    "start": "2223119",
    "end": "2229440"
  },
  {
    "text": "know exactly how often and when and by what uh secrets are being accessed now i",
    "start": "2229440",
    "end": "2234880"
  },
  {
    "text": "had to put azure credentials here because it is the lowest denominator that could have the minimum",
    "start": "2234880",
    "end": "2241839"
  },
  {
    "text": "denominator i could have to store things however uh me and my partner have uh jp that",
    "start": "2241839",
    "end": "2247200"
  },
  {
    "text": "will work in the same team without an azure cli extension that allows you to remotely",
    "start": "2247200",
    "end": "2253040"
  },
  {
    "text": "run this github actions and not have any secrets because they're using the managed identity",
    "start": "2253040",
    "end": "2258480"
  },
  {
    "text": "of those of that machine so right now here i have uh here",
    "start": "2258480",
    "end": "2266320"
  },
  {
    "text": "here i have a linux vm that has the the task running and if i wanted to find my endpoint",
    "start": "2266320",
    "end": "2274240"
  },
  {
    "text": "you'll notice that i'm saying here go and find me the mana identity uh that is currently assigned to this",
    "start": "2274240",
    "end": "2280320"
  },
  {
    "text": "machine and go and grab the token for me and if i were to look into this token then",
    "start": "2280320",
    "end": "2286160"
  },
  {
    "text": "let's grab this it's going to jwt.net and then here",
    "start": "2286160",
    "end": "2293599"
  },
  {
    "text": "if i paste this you'll notice that it came from my azure id the audience's management azure so i can",
    "start": "2293599",
    "end": "2299680"
  },
  {
    "text": "go and deploy things to azure and it has all the things i need in",
    "start": "2299680",
    "end": "2305040"
  },
  {
    "text": "order to be able to authenticate and run that mastery so i also have a job that",
    "start": "2305040",
    "end": "2310160"
  },
  {
    "text": "is pointing to that remotely so if i go back into my github is this the one i came from no uh again here",
    "start": "2310160",
    "end": "2317760"
  },
  {
    "text": "so here i have back in my code and i know we're almost out of time",
    "start": "2317760",
    "end": "2324160"
  },
  {
    "text": "so inside my deployment inside my oh no no sorry it's one level",
    "start": "2324160",
    "end": "2331599"
  },
  {
    "text": "up it's my workflows i have a remote workflow i think it's this one and in here what i'm saying is rather",
    "start": "2331599",
    "end": "2338079"
  },
  {
    "start": "2336000",
    "end": "2414000"
  },
  {
    "text": "than using my local uh the hosted one i want to use a self-hosted service that runs on my vm",
    "start": "2338079",
    "end": "2345119"
  },
  {
    "text": "my linux vm and then i'm using a different flavor of that login which is going to make it",
    "start": "2345119",
    "end": "2351280"
  },
  {
    "text": "into the main repo so eventually you won't have to use the custom flavor of this login but",
    "start": "2351280",
    "end": "2356560"
  },
  {
    "text": "this will allow you to use the manus identity and deploy things",
    "start": "2356560",
    "end": "2361680"
  },
  {
    "text": "so again i should be able to grab the stickers from there authenticate and then run any tasks i want against azure",
    "start": "2361680",
    "end": "2368240"
  },
  {
    "text": "so miles identities and service principles allow you to do quite a few things in effect i call them",
    "start": "2368240",
    "end": "2373920"
  },
  {
    "text": "secretless apps and secure devops because you don't have to worry about storing stickers in your",
    "start": "2373920",
    "end": "2379040"
  },
  {
    "text": "application and configs you don't have to have stickers files somewhere in your machine",
    "start": "2379040",
    "end": "2384240"
  },
  {
    "text": "you as a developer don't have to worry about that somebody in the iit team will manage everything for you and then uh you can",
    "start": "2384240",
    "end": "2390640"
  },
  {
    "text": "run all the tasks that you need in azure by removing all the secrets so uh",
    "start": "2390640",
    "end": "2399599"
  },
  {
    "text": "there you go you should start using service principles naturally is it 45 minutes or an hour",
    "start": "2399599",
    "end": "2406078"
  },
  {
    "text": "remember it's an hour",
    "start": "2406640",
    "end": "2411838"
  },
  {
    "text": "okay so what did we learn today that authentication is hard but we make",
    "start": "2412640",
    "end": "2419920"
  },
  {
    "start": "2414000",
    "end": "2452000"
  },
  {
    "text": "it easy for you hopefully one hour okay good we have one hour perfect the uh you know the amount of dentists",
    "start": "2419920",
    "end": "2427040"
  },
  {
    "text": "are great for end-to-end security right so that means that um again as i showed you",
    "start": "2427040",
    "end": "2432560"
  },
  {
    "text": "you start with the uh the azure identity library so if you haven't used the azure identity library we haven't used the",
    "start": "2432560",
    "end": "2438000"
  },
  {
    "text": "azure sdks at all the easiest way to get started is by going into",
    "start": "2438000",
    "end": "2443920"
  },
  {
    "text": "here aka.ms azsdk",
    "start": "2444480",
    "end": "2450240"
  },
  {
    "text": "and from here you can choose the language that you want to use uh we have dotnet java javascript python",
    "start": "2450640",
    "end": "2456960"
  },
  {
    "start": "2452000",
    "end": "2552000"
  },
  {
    "text": "c so everything i showed you today is applicable to all the other services the the key library here obviously is",
    "start": "2456960",
    "end": "2463520"
  },
  {
    "text": "identity this is the one that manages the authentication component inside your uh your library and then from there all",
    "start": "2463520",
    "end": "2470880"
  },
  {
    "text": "the other services that we have as you can see you know um we have cognitive services in fact i did",
    "start": "2470880",
    "end": "2475920"
  },
  {
    "text": "a demo the other day uh i we streamed quite a bit on on twitch so i did a demo the other day where i",
    "start": "2475920",
    "end": "2481040"
  },
  {
    "text": "showed you how you can write a dotnet core app that speaks into code into services using azure id to authenticate things so",
    "start": "2481040",
    "end": "2488079"
  },
  {
    "text": "as long as you have an azure id backed up a cognitive service because you have to",
    "start": "2488079",
    "end": "2495040"
  },
  {
    "text": "deploy that you have to have a custom domain there's like a limitation there you can actually go and call most of these services using mouse dentist which",
    "start": "2495040",
    "end": "2501760"
  },
  {
    "text": "is great i think that doesn't cover mass identity yet is cosmos db and that's because there's a requirement",
    "start": "2501760",
    "end": "2508240"
  },
  {
    "text": "for the slas we have a very very tight sla so doing a round trip to us really to",
    "start": "2508240",
    "end": "2513680"
  },
  {
    "text": "get a token and come back means that uh doing a call to cosmos to authenticate the us ready",
    "start": "2513680",
    "end": "2519839"
  },
  {
    "text": "would slow things down but we are working on towards enabling that and lighting that up",
    "start": "2519839",
    "end": "2525440"
  },
  {
    "text": "inside cosmos db as well so if you say well i don't really want sub 9 millisecond performance i'm okay with 12 or 11",
    "start": "2525440",
    "end": "2532480"
  },
  {
    "text": "then you can use azure id to back things up so that will be an option to you in the future i think we are working towards that and",
    "start": "2532480",
    "end": "2539920"
  },
  {
    "text": "then um storage and everything else can also be backed up by azure identity which is great",
    "start": "2539920",
    "end": "2547920"
  },
  {
    "text": "ah let's see what else so we have the azure sdk i talked about the uh how you enable them",
    "start": "2547920",
    "end": "2554240"
  },
  {
    "start": "2552000",
    "end": "2664000"
  },
  {
    "text": "i told you how to spin up one so in fact it's going to be cli",
    "start": "2554240",
    "end": "2561119"
  },
  {
    "text": "there you go z cls clear sorry i mean i'm in a",
    "start": "2561119",
    "end": "2568960"
  },
  {
    "text": "i'm in a linux vm so i need to remember my commands so here if i were to create a new",
    "start": "2568960",
    "end": "2574960"
  },
  {
    "text": "service principle a z a d s b create",
    "start": "2574960",
    "end": "2580240"
  },
  {
    "text": "that for",
    "start": "2580240",
    "end": "2584079"
  },
  {
    "text": "power i think it's uh",
    "start": "2590839",
    "end": "2597200"
  },
  {
    "text": "it's my name we need that",
    "start": "2599119",
    "end": "2606160"
  },
  {
    "text": "and we'll say nbc london",
    "start": "2606160",
    "end": "2611440"
  },
  {
    "text": "what what did i do wrong there",
    "start": "2615040",
    "end": "2621839"
  },
  {
    "text": "i'll go help there you go why not okay ah it was",
    "start": "2622560",
    "end": "2630400"
  },
  {
    "text": "create for our back i'm just talking about there you go i'm",
    "start": "2631119",
    "end": "2636319"
  },
  {
    "text": "back and",
    "start": "2636319",
    "end": "2640400"
  },
  {
    "text": "oh i need to sign it obviously sorry guys",
    "start": "2643119",
    "end": "2649839"
  },
  {
    "text": "first before i use that i need to sign in so there you go that's authenticated",
    "start": "2650480",
    "end": "2656960"
  },
  {
    "text": "you know what would be if i do it inside the portal",
    "start": "2657760",
    "end": "2663680"
  },
  {
    "text": "so if you haven't used the cli before uh rather than doing the remote vm because now it will be out of",
    "start": "2663680",
    "end": "2669599"
  },
  {
    "text": "context what i'm doing here is requesting cloud soul if you haven't used cloudsol it's",
    "start": "2669599",
    "end": "2674640"
  },
  {
    "text": "the building uh cli or power cell that we have for working with azure the nice thing is that i can authenticate it so i don't",
    "start": "2674640",
    "end": "2680800"
  },
  {
    "text": "have to do it from scratch connecting to it and now i can do az",
    "start": "2680800",
    "end": "2691839"
  },
  {
    "text": "crickets",
    "start": "2702839",
    "end": "2705839"
  },
  {
    "text": "foreign",
    "start": "2709000",
    "end": "2712000"
  },
  {
    "text": "so now this one is giving contributor rights to my whole subscription which is not good but you can go and change the role",
    "start": "2715359",
    "end": "2721280"
  },
  {
    "text": "assignment afterwards the nice thing here is that it created everything i need",
    "start": "2721280",
    "end": "2726560"
  },
  {
    "text": "you notice that it actually gives me a password that password it will be rotated for me i can go and",
    "start": "2726560",
    "end": "2732160"
  },
  {
    "text": "change it if i want to um in fact i should change it if i will delete the whole thing but it created an app id for me so now i",
    "start": "2732160",
    "end": "2738880"
  },
  {
    "text": "can take this one and start using it everywhere i want if you were to use it inside uh something like uh",
    "start": "2738880",
    "end": "2745040"
  },
  {
    "text": "github also you have to also say just as sdk auth and that will create a different",
    "start": "2745040",
    "end": "2752880"
  },
  {
    "text": "sp type which will be uh you'll note that the output is",
    "start": "2752880",
    "end": "2758720"
  },
  {
    "text": "slightly or somewhat different there you go thinking about it trying to",
    "start": "2758720",
    "end": "2765200"
  },
  {
    "text": "do it all assignment again it will be a full contributor to my whole subscription which is not best practice",
    "start": "2765200",
    "end": "2770640"
  },
  {
    "text": "you can say you can define exactly which scope you want to give it",
    "start": "2770640",
    "end": "2775838"
  },
  {
    "text": "eventually we'll come back any questions with regards to mast identities or like a lot more information here now",
    "start": "2776640",
    "end": "2782800"
  },
  {
    "text": "right so your client secret cloud id uh in in github i would grab this whole thing and add it as my",
    "start": "2782800",
    "end": "2789520"
  },
  {
    "text": "azure credentials so i don't know if anyone here has used",
    "start": "2789520",
    "end": "2796560"
  },
  {
    "text": "service principles or miles identities but i hope that it gave you a nice insight on why you should be",
    "start": "2796560",
    "end": "2802160"
  },
  {
    "text": "using them and how you can you know get started with them and which libraries to use obviously you don't have to use the libraries but libraries",
    "start": "2802160",
    "end": "2808160"
  },
  {
    "text": "make your life a lot easier so the sdks that we have for azure make the your life a lot easier and the",
    "start": "2808160",
    "end": "2813280"
  },
  {
    "text": "reason why i'm saying that is because for everything to start with you need a token credential or a credential",
    "start": "2813280",
    "end": "2819599"
  },
  {
    "text": "provider and uh you know there are options here you can use the default",
    "start": "2819599",
    "end": "2825680"
  },
  {
    "text": "azure credential and with that you don't even have to say what you're going to use we'll try uh one at a time to find the signing",
    "start": "2825680",
    "end": "2833520"
  },
  {
    "text": "credential so we'll try to find the mouse identity we'll try to find the um the other ones so as soon as he",
    "start": "2833520",
    "end": "2840720"
  },
  {
    "text": "finds one that is authenticated then you're good to go one thing that we didn't have enough time to cover yet was",
    "start": "2840720",
    "end": "2847119"
  },
  {
    "text": "right i have i have mastered in the clouds i have my local identity running on my machine we have service",
    "start": "2847119",
    "end": "2853119"
  },
  {
    "text": "principles running tasks but what if i wanted to actually use madas identity on a machine that is",
    "start": "2853119",
    "end": "2858800"
  },
  {
    "text": "not part of azure because we've been talking about azure azure arc which is a service that allows",
    "start": "2858800",
    "end": "2864079"
  },
  {
    "text": "you to add machines into your tenant",
    "start": "2864079",
    "end": "2869119"
  },
  {
    "text": "and make them look and feel like actual azure vms is a service that you can run anywhere so you can have a",
    "start": "2869119",
    "end": "2874319"
  },
  {
    "text": "vm running on aws that needs to access other services via managed identity i could have my",
    "start": "2874319",
    "end": "2879520"
  },
  {
    "text": "local machine um being arc joined into azure id and that allows you actually to uh",
    "start": "2879520",
    "end": "2886240"
  },
  {
    "text": "not only be part of the azure but also have a local managed identity instance which means that in aws you could have a",
    "start": "2886240",
    "end": "2893760"
  },
  {
    "text": "task running like this authenticating guest azure id and then calling azure services",
    "start": "2893760",
    "end": "2899200"
  },
  {
    "text": "without you having to pass any secrets so arc is the extension of all these things that we talked about",
    "start": "2899200",
    "end": "2905040"
  },
  {
    "text": "that bring the azure identity component into any machine so rather than using my",
    "start": "2905040",
    "end": "2911200"
  },
  {
    "text": "local cli credentials if my machine was adjoining to us rock i could just and it's a very simple task",
    "start": "2911200",
    "end": "2917440"
  },
  {
    "text": "you run a parcel script and we'll attach it to an arc allows you to manage that device",
    "start": "2917440",
    "end": "2922640"
  },
  {
    "text": "as if it was inside azure and the whole point there is that you get the the benefits of having",
    "start": "2922640",
    "end": "2929359"
  },
  {
    "text": "a vm mouse by azure and that identity available to you which i find it's a it's a great",
    "start": "2929359",
    "end": "2934960"
  },
  {
    "text": "extension to everything that we talked about because you can go outside the azure ecosystem",
    "start": "2934960",
    "end": "2940559"
  },
  {
    "text": "and still be part of the azure family so there you have it uh we covered everything that i wanted",
    "start": "2940559",
    "end": "2946400"
  },
  {
    "text": "to cover today if you have any questions feel free to reach out to me on twitter feel free to reach out to me on email in",
    "start": "2946400",
    "end": "2954000"
  },
  {
    "text": "fact i can send you my contact information if you want to i will add them to the chat and if you",
    "start": "2954000",
    "end": "2962319"
  },
  {
    "text": "are working with microsoft identity if you have any questions about how to work with our technologies then i'll be more than",
    "start": "2962319",
    "end": "2968160"
  },
  {
    "text": "happy to help you out we also have a stream that we do every uh every tuesday and friday at 8 am pacific",
    "start": "2968160",
    "end": "2976000"
  },
  {
    "text": "time where we show you how to build things like that if you are into tweets if you are",
    "start": "2976000",
    "end": "2981040"
  },
  {
    "text": "into stream we're on youtube on twitch and we have everything on youtube as well after that",
    "start": "2981040",
    "end": "2987359"
  },
  {
    "text": "we talk about how identi can help you write more secure solutions whether it's authentication authorization devops security",
    "start": "2987359",
    "end": "2995200"
  },
  {
    "text": "other services we cover everything and if you have ideas for the show or questions feel free to join us i appreciate",
    "start": "2995200",
    "end": "3001200"
  },
  {
    "text": "everyone for coming i know it's the end of the day for some of you maybe quite late in europe so",
    "start": "3001200",
    "end": "3006240"
  },
  {
    "text": "thank you very much for attending my session i'll share the slides the demos are actually live uh on",
    "start": "3006240",
    "end": "3013760"
  },
  {
    "text": "youtube sorry on on github so if you go into github uh you can find all the demos here uh we",
    "start": "3013760",
    "end": "3020319"
  },
  {
    "text": "have blog posts as well that explain how to do things so um it was great",
    "start": "3020319",
    "end": "3025440"
  },
  {
    "text": "thank you i was nice being part of the ndc as well and i appreciate your time thank you very much",
    "start": "3025440",
    "end": "3041838"
  },
  {
    "text": "you",
    "start": "3043599",
    "end": "3045680"
  }
]