[
  {
    "text": "all right so good morning everyone they did not tell me that the walkway by",
    "start": "1520",
    "end": "6960"
  },
  {
    "text": "uh parliament was closed so i had to go all the way around so that's why i'm just a little late getting here no worries",
    "start": "6960",
    "end": "12719"
  },
  {
    "text": "though um so yes my name is jimmy bogard you can find me on twitter at jbogard um you",
    "start": "12719",
    "end": "19279"
  },
  {
    "text": "can find this code this probably the the presentation and all the slides on my github at github.comguard there's a",
    "start": "19279",
    "end": "26000"
  },
  {
    "text": "presentations repository there um i blog about this and a lot of other topics on my blog at jimmybogart.com",
    "start": "26000",
    "end": "33280"
  },
  {
    "text": "so yes before we get too far into",
    "start": "33280",
    "end": "39280"
  },
  {
    "text": "domain different refactoring i want to talk a little bit about what domain-driven design is",
    "start": "39280",
    "end": "44879"
  },
  {
    "text": "um just if you had to do a little bit of level sets um actually let me see if i can",
    "start": "44879",
    "end": "51360"
  },
  {
    "text": "one second",
    "start": "55520",
    "end": "59000"
  },
  {
    "text": "now",
    "start": "62800",
    "end": "65039"
  },
  {
    "text": "and trying to extend there we go so i can actually read my",
    "start": "70840",
    "end": "76320"
  },
  {
    "text": "notes and",
    "start": "76320",
    "end": "80759"
  },
  {
    "text": "okay yes there we go so from the domain driven design book",
    "start": "86080",
    "end": "91360"
  },
  {
    "text": "although it's um you know that domain driven design book has a lot of great definitions of things it doesn't",
    "start": "91360",
    "end": "96799"
  },
  {
    "text": "actually provide a great definition of domain driven design so this is one where i kind of had to like glom things",
    "start": "96799",
    "end": "101840"
  },
  {
    "text": "together from a couple sources just to try to get it in one single sentence but domain driven design in one sentence is",
    "start": "101840",
    "end": "107759"
  },
  {
    "text": "an architectural design strategy in which we selectively distill organize",
    "start": "107759",
    "end": "112799"
  },
  {
    "text": "and abstract the body of knowledge from the users to the software and there's kind of three key words there one is to",
    "start": "112799",
    "end": "120079"
  },
  {
    "text": "selectively distill so we're not trying to take like everything that's possible in the real world everything is possible",
    "start": "120079",
    "end": "126479"
  },
  {
    "text": "that the users are doing everything that's possible in the business and try to put that in software because that's impossible we never finish writing",
    "start": "126479",
    "end": "132480"
  },
  {
    "text": "software so we're trying to pick and choose what are the most important things to be able to represent in our software",
    "start": "132480",
    "end": "140400"
  },
  {
    "text": "the second one is to organize so trying to avoid the big ball of mud mess um and",
    "start": "140400",
    "end": "146160"
  },
  {
    "text": "trying to organize it in such a way that also makes sense to the business as well maybe not from like a complete software",
    "start": "146160",
    "end": "151519"
  },
  {
    "text": "perspective but at least like that they under like the things that how things relate to each other the different kind",
    "start": "151519",
    "end": "156879"
  },
  {
    "text": "of components that those have somewhat analogs in the real world as well and the final one is to abstract",
    "start": "156879",
    "end": "163599"
  },
  {
    "text": "and the reason why we need to abstract is the real world can be really really complicated",
    "start": "163599",
    "end": "168720"
  },
  {
    "text": "and so you probably know when you talk to your business or users and they they start talking about how the you know how they do their business and how they",
    "start": "168720",
    "end": "174480"
  },
  {
    "text": "accomplish certain tasks and they'll just start like rambling on and on and on and going on and on forever and like",
    "start": "174480",
    "end": "179680"
  },
  {
    "text": "well we can't do all of that so we need to kind of like take a step back and say well what are the kind of main themes that do we have here and that's that",
    "start": "179680",
    "end": "186080"
  },
  {
    "text": "that third part is abstraction and so the three things here we're trying to",
    "start": "186080",
    "end": "192159"
  },
  {
    "text": "distill organize and abstract is really what domain-driven design is all about",
    "start": "192159",
    "end": "197680"
  },
  {
    "text": "and one of the big key components of domain driven design is this domain model that represents the kind of object",
    "start": "197680",
    "end": "204720"
  },
  {
    "text": "model of the business so even the idea of a domain model",
    "start": "204720",
    "end": "210799"
  },
  {
    "text": "actually predates domain-driven design in the martin fowler book patterns of",
    "start": "210799",
    "end": "215920"
  },
  {
    "text": "enterprise application architecture he describes a a domain model as an object model of the",
    "start": "215920",
    "end": "222319"
  },
  {
    "text": "domain that incorporates both behavior and data and so there's two key components there",
    "start": "222319",
    "end": "228000"
  },
  {
    "text": "there's the data parts which i think all of us kind of get more or less right the second part is the more complicated",
    "start": "228000",
    "end": "234159"
  },
  {
    "text": "part the behavior part because most systems i see that",
    "start": "234159",
    "end": "239680"
  },
  {
    "text": "like try to get the names right and try to get the data rights they don't have the behavior part of it",
    "start": "239680",
    "end": "245840"
  },
  {
    "text": "and so uh that's okay um this talk all is all about what are those systems look like that we don't have the behavior in",
    "start": "245840",
    "end": "252720"
  },
  {
    "text": "the right parts we don't have the behavior in the domain model itself instead the behavior is kind of scattered all around",
    "start": "252720",
    "end": "258239"
  },
  {
    "text": "the system and so that's what most of my systems i see uh wind up is like okay",
    "start": "258239",
    "end": "263360"
  },
  {
    "text": "yes the maybe the names aren't even right but uh the the behaviors there just kind of",
    "start": "263360",
    "end": "269680"
  },
  {
    "text": "all scattered about but that's okay um we can follow the the normal test driven design steps of red",
    "start": "269680",
    "end": "277199"
  },
  {
    "text": "green refactor um or most legacy code that i see is just like what tests",
    "start": "277199",
    "end": "283120"
  },
  {
    "text": "and then just refactor now this is where",
    "start": "283120",
    "end": "289280"
  },
  {
    "text": "in terms of techniques and how to accomplish this these are none of the things i'm going to be showing today are things that i",
    "start": "289280",
    "end": "294960"
  },
  {
    "text": "made up myself although i guess i could take credit for them someone would call me out on twitter and then it'd be a whole thing",
    "start": "294960",
    "end": "300400"
  },
  {
    "text": "these are all things that have been and all techniques that have been well documented over the years and there's three main books that i work",
    "start": "300400",
    "end": "307440"
  },
  {
    "text": "from to pull together techniques to to build out my domain models uh the main",
    "start": "307440",
    "end": "312720"
  },
  {
    "text": "one i work with is working effectively with legacy code um which really is just like how do you refactor code without",
    "start": "312720",
    "end": "318960"
  },
  {
    "text": "tests which is a lot of legacy code that i see these days and by the way he defines legacy code as just code without",
    "start": "318960",
    "end": "324080"
  },
  {
    "text": "tests because it's hard to change the other two great books uh of course are martin fowler's refactoring book",
    "start": "324080",
    "end": "330479"
  },
  {
    "text": "over there on the left uh the second edition is javascript so yeah whatever and then um one that's actually out of",
    "start": "330479",
    "end": "336720"
  },
  {
    "text": "print unfortunately but it's my favorite design patterns book is joshua foreski's book on refactoring to patterns and all",
    "start": "336720",
    "end": "343600"
  },
  {
    "text": "these books take the concept of instead of like gang of four having like here is",
    "start": "343600",
    "end": "348639"
  },
  {
    "text": "like the here's just the list of patterns and you just kind of pick and choose whatever you want to go from or",
    "start": "348639",
    "end": "354240"
  },
  {
    "text": "like more of these prescriptive styles it said if you just get your code and this structure and this organization",
    "start": "354240",
    "end": "359440"
  },
  {
    "text": "then everything's going to be fantastic but i i found that in like real world applications there's no there's no",
    "start": "359440",
    "end": "365600"
  },
  {
    "text": "structure or organizational style or set of patterns you can blindly apply to have good code at the end instead we",
    "start": "365600",
    "end": "371840"
  },
  {
    "text": "have to get good at these techniques described in these books to build out good domain models",
    "start": "371840",
    "end": "378080"
  },
  {
    "text": "so i'm going to be working with a a a current system or current application that more or less represented one that i was working with",
    "start": "378080",
    "end": "384720"
  },
  {
    "text": "uh years ago so just want to walk through the current state of this application this the sample code that we",
    "start": "384720",
    "end": "390560"
  },
  {
    "text": "have right now so this sample code is dealing with a uh a loyalty reward system and in a loyalty",
    "start": "390560",
    "end": "397759"
  },
  {
    "text": "reward system we have uh we have a few major components and some of you are probably like actually probably all of",
    "start": "397759",
    "end": "403600"
  },
  {
    "text": "you are part of one of these things like uh you go to boots and they're like are you part of our preferred club member or",
    "start": "403600",
    "end": "408960"
  },
  {
    "text": "whatever in exchange for like your personal information um and like all your spending habits and all your data",
    "start": "408960",
    "end": "415440"
  },
  {
    "text": "they'll give you like a discount every other month or so so there's a little bit of an exchange there of like give up a little bit of privacy and here's some",
    "start": "415440",
    "end": "422080"
  },
  {
    "text": "discounts or whatever and that's what this system was represented so this is just a class diagram of our",
    "start": "422080",
    "end": "429680"
  },
  {
    "text": "our current quote domain model over on the left here we have our member object",
    "start": "429680",
    "end": "435199"
  },
  {
    "text": "and so right away we we can see like we're not uh we're not trying to represent everyone in the world so we",
    "start": "435199",
    "end": "440319"
  },
  {
    "text": "don't have like a person object here or a human object and so there's that again that distillation we",
    "start": "440319",
    "end": "446479"
  },
  {
    "text": "have a member object that is representative of a member in this system not just any person walking down",
    "start": "446479",
    "end": "452400"
  },
  {
    "text": "the street because not every person in the world is a member of this system only people that have like opted in and",
    "start": "452400",
    "end": "458240"
  },
  {
    "text": "said i will give you my personal information are part of the system we also have offers",
    "start": "458240",
    "end": "464560"
  },
  {
    "text": "now offers are those like discounts given to individual members and so as part of this",
    "start": "464560",
    "end": "470879"
  },
  {
    "text": "each offer can have some kind of type and this is kind of like the the metadata associated with an individual",
    "start": "470879",
    "end": "476000"
  },
  {
    "text": "offers so offer types are things that someone's going into some kind of back-end management application and and",
    "start": "476000",
    "end": "481280"
  },
  {
    "text": "configuring and saying we're going to have this opera this time and oh it's a jubilee so we're going to do a jubilee",
    "start": "481280",
    "end": "487120"
  },
  {
    "text": "offer or whatever so those are all configured in the offer types and then when i go to actually assign an offer to a member that's one",
    "start": "487120",
    "end": "493840"
  },
  {
    "text": "of these these offers popped into play so from this we can also uh we can also",
    "start": "493840",
    "end": "500160"
  },
  {
    "text": "infer that the offer is associated with an individual member and we can see that by those different",
    "start": "500160",
    "end": "506400"
  },
  {
    "text": "associations there that a member has a collection of assigned offers and an offer can only be",
    "start": "506400",
    "end": "512399"
  },
  {
    "text": "assigned to one member and so the idea there is that if i uh assign a single",
    "start": "512399",
    "end": "517440"
  },
  {
    "text": "offer to a single member then no one else can then use that offer so i could show this to the business",
    "start": "517440",
    "end": "524880"
  },
  {
    "text": "and even though they don't kind of understand like like what does class mean necessarily and what do these weird",
    "start": "524880",
    "end": "530160"
  },
  {
    "text": "carrots mean and what is a little i don't even know what that little gear means but whatever",
    "start": "530160",
    "end": "535519"
  },
  {
    "text": "that they they can look at the names of these things and the relationships and that makes it would make sense to them",
    "start": "535519",
    "end": "541440"
  },
  {
    "text": "like oh yes we have offers assigned to a member um we have member information there everything",
    "start": "541440",
    "end": "547440"
  },
  {
    "text": "looks great right even the names of the associations match the names of the relationships in the",
    "start": "547440",
    "end": "553760"
  },
  {
    "text": "real world it's not just member has offers well what like what is the nature of that relationship their assigned",
    "start": "553760",
    "end": "559200"
  },
  {
    "text": "offers so they could look at this and say yep that looks that looks all correct and by the way if it doesn't look correct in your domain model that's",
    "start": "559200",
    "end": "565120"
  },
  {
    "text": "still possible to like refactor towards i won't go to that in this talk but it's still perfectly possible to take names",
    "start": "565120",
    "end": "571360"
  },
  {
    "text": "that don't match and then make them match um through a series of steps so they could look at this and say yep everything",
    "start": "571360",
    "end": "577600"
  },
  {
    "text": "looks great so ship it but there's one problem here you'll notice that",
    "start": "577600",
    "end": "583360"
  },
  {
    "text": "my domain model only has properties there's no methods",
    "start": "583360",
    "end": "589680"
  },
  {
    "text": "there are methods but i hid them from the picture there's like equals and git hash code and those",
    "start": "589680",
    "end": "595200"
  },
  {
    "text": "aren't really like domain behaviors but they're they're technically methods but i hit them because it would be confusing here but there's no actual like beha",
    "start": "595200",
    "end": "601440"
  },
  {
    "text": "like domain behavior on these objects whatsoever but that's not like that's not the whole",
    "start": "601440",
    "end": "607920"
  },
  {
    "text": "behavior does exist in this system but where is the behavior well it could be in",
    "start": "607920",
    "end": "614800"
  },
  {
    "text": "let's see member controller dot post it could be in uh button click dot save or",
    "start": "614800",
    "end": "621200"
  },
  {
    "text": "button save dot click or button save underscore click if you're gosh and webford's lan it could be in like",
    "start": "621200",
    "end": "628000"
  },
  {
    "text": "uh react code it could be in like uh member manager member helper member you",
    "start": "628000",
    "end": "633440"
  },
  {
    "text": "know insert you know generic object here um so that that that behavior definitely exists in the system my system is not",
    "start": "633440",
    "end": "639760"
  },
  {
    "text": "doing nothing it's not just like showing data on the screen and that's it um there's going to be some behavior associated with the system",
    "start": "639760",
    "end": "646560"
  },
  {
    "text": "but it's just not in the domain model instead it's scattered about the application so i have to go find where the behavior",
    "start": "646560",
    "end": "653600"
  },
  {
    "text": "is in this case i've got like a services folder and that's wrong like just dumping ground of all the logic of my",
    "start": "653600",
    "end": "659360"
  },
  {
    "text": "application and that's where i'll actually find the real behavior all right so now let's switch over to",
    "start": "659360",
    "end": "665440"
  },
  {
    "text": "the code and walk the refactoring of some of these services",
    "start": "665440",
    "end": "671480"
  },
  {
    "text": "okay so over here on the right i've got my model that we showed earlier so the names all match blah blah blah",
    "start": "679519",
    "end": "686160"
  },
  {
    "text": "and then the services folder that's where like the real behavior of my application is and if you want to get technical like",
    "start": "686160",
    "end": "691920"
  },
  {
    "text": "the the design pattern being used for my current services is known as a transaction script and let's look at one",
    "start": "691920",
    "end": "698079"
  },
  {
    "text": "of these different actions to see what's going on here and what i look at first is this one says assign offer handler so",
    "start": "698079",
    "end": "704880"
  },
  {
    "text": "that sounds like it's the handling the logic of assigning an offer probably to a member",
    "start": "704880",
    "end": "711600"
  },
  {
    "text": "nope there we go all right i'll go ahead and hide that",
    "start": "713839",
    "end": "721440"
  },
  {
    "text": "all right so the first thing i like to do in one of these kind of like i'm looking at a class for the first time is",
    "start": "721680",
    "end": "727200"
  },
  {
    "text": "to look at the using statements to understand what are the what are the typical what are the things that this this class is working with",
    "start": "727200",
    "end": "734000"
  },
  {
    "text": "um and so you see kind of the normal ones like using system well it's hard to get away from that um then we see using",
    "start": "734000",
    "end": "739120"
  },
  {
    "text": "system net http so that's telling me that it's using web services or some kind of http directly here right it's",
    "start": "739120",
    "end": "745920"
  },
  {
    "text": "like using http client probably directly inside of here not probably i know it is um now it's using system text json okay",
    "start": "745920",
    "end": "753200"
  },
  {
    "text": "so it's calling a web service and probably having to deserialize some junk as well threading threading tasks like can't get",
    "start": "753200",
    "end": "759839"
  },
  {
    "text": "away from that anymore that's all over the place it's also using the model and it's also",
    "start": "759839",
    "end": "764880"
  },
  {
    "text": "using mediator but that's like immaterial for all of this the next thing i like to do is then look",
    "start": "764880",
    "end": "770320"
  },
  {
    "text": "at the constructor and hopefully it's using dependency injection so i can see what are the different classes that",
    "start": "770320",
    "end": "776720"
  },
  {
    "text": "this object uses in order to perform its work and i saw the one piece which was http",
    "start": "776720",
    "end": "782959"
  },
  {
    "text": "client so yes that confirmed their suspicions that it's calling out to a web service and the other thing of course it's going",
    "start": "782959",
    "end": "788399"
  },
  {
    "text": "to be using is entity framework so it's got this app db context and that's where that before model namespace came from is",
    "start": "788399",
    "end": "794720"
  },
  {
    "text": "it's giving us that db context there so it's calling web services and it's doing",
    "start": "794720",
    "end": "800880"
  },
  {
    "text": "data access that's like you know 95 of the actions in the system probably it's doing data access and maybe calling out",
    "start": "800880",
    "end": "807120"
  },
  {
    "text": "to a web service all right so this class has one single method",
    "start": "807120",
    "end": "813040"
  },
  {
    "text": "called handle and you can kind of imagine that this class is like this is the main action that executes when",
    "start": "813040",
    "end": "819440"
  },
  {
    "text": "someone like clicks a button on a screen or whatever so i've tried to remove it a little bit from like controllery stuff",
    "start": "819440",
    "end": "824880"
  },
  {
    "text": "or or front any stuff and just like kind of meat of the actual request work being done here",
    "start": "824880",
    "end": "831279"
  },
  {
    "text": "so it takes an input of a request object so this represents like all the input parameters to do this work and that",
    "start": "831279",
    "end": "836720"
  },
  {
    "text": "request object has just two properties the member id and the offer type id so",
    "start": "836720",
    "end": "843440"
  },
  {
    "text": "i'm i am assigning an offer to a member so i need to know what kind of offer i'm needing to assign and who should i",
    "start": "843440",
    "end": "850000"
  },
  {
    "text": "assign it to so those are those two things then finally we get to the actual meet",
    "start": "850000",
    "end": "856320"
  },
  {
    "text": "of the request so the first two lines here",
    "start": "856320",
    "end": "861600"
  },
  {
    "text": "uh those are just any framework junk i need to load up the actual member object and load up the offer type object um",
    "start": "861600",
    "end": "867199"
  },
  {
    "text": "that's going to be like again like 99 of the actions in my system i first have to like load the data up to be able to work",
    "start": "867199",
    "end": "873199"
  },
  {
    "text": "with it and so that's going to be pretty much the same everywhere and now i see the actual meat of the",
    "start": "873199",
    "end": "879279"
  },
  {
    "text": "method and the first kind of clue that maybe this method is a little too long are code comments",
    "start": "879279",
    "end": "885760"
  },
  {
    "text": "code comments are a good clue of like okay if this method got too long someone was like someone had the",
    "start": "885760",
    "end": "891360"
  },
  {
    "text": "foresight enough to like try to break it up into individual parts of the app of the method and try to document okay",
    "start": "891360",
    "end": "897760"
  },
  {
    "text": "these are the here are the different steps that are happening so step one it looks like it's to calculate offer value",
    "start": "897760",
    "end": "904160"
  },
  {
    "text": "and as part of calculating the offer value it oh here we go here's where it's actually calling out to some made-up web",
    "start": "904160",
    "end": "909839"
  },
  {
    "text": "service to pass in the member's email and the offer type and it'll give me back the",
    "start": "909839",
    "end": "914959"
  },
  {
    "text": "actual value of the offer maybe there's some third party system that you know keep strike has like data",
    "start": "914959",
    "end": "921040"
  },
  {
    "text": "aggregation machine learning blah blah blah i don't know what's going on behind the scenes but i do know give it the email",
    "start": "921040",
    "end": "926560"
  },
  {
    "text": "give it the type and will give me the offer offer value so at the very end",
    "start": "926560",
    "end": "932480"
  },
  {
    "text": "the end result is i get a value for the offer next up is calculating the expiration",
    "start": "932480",
    "end": "939360"
  },
  {
    "text": "dates all right so this looks like uh based on the expiration type",
    "start": "939360",
    "end": "944399"
  },
  {
    "text": "there's two different kinds there's an assignment type and a fixed type uh it looks like assignment type is",
    "start": "944399",
    "end": "950800"
  },
  {
    "text": "based on when i sign the offer to you you have x number of days to use it and then it's",
    "start": "950800",
    "end": "957040"
  },
  {
    "text": "no longer valid like maybe it's your birthday and you have 20 days from your birthday i don't know to be able to use it and so that one uh",
    "start": "957040",
    "end": "964240"
  },
  {
    "text": "goes up based on when you sign it and then there was a fixed expiration type so that is",
    "start": "964240",
    "end": "969279"
  },
  {
    "text": "it's good for the month of may so it's it's done may 30th",
    "start": "969279",
    "end": "974399"
  },
  {
    "text": "and finally we have like the actual interesting part which is assigning an offer to a member so we have a first",
    "start": "976639",
    "end": "983279"
  },
  {
    "text": "where it's uh instantiating the offer object then we assign the offer to the well no",
    "start": "983279",
    "end": "989600"
  },
  {
    "text": "actually we add the offer to the assign offers collection on the member",
    "start": "989600",
    "end": "994639"
  },
  {
    "text": "and then this is kind of a weird thing where we're keeping track of the number of active offers and it's probably because we displayed that in a lot of",
    "start": "994639",
    "end": "1001279"
  },
  {
    "text": "places or we use it for calculations or something like that and so we want to pre-calculate that uh so it makes it",
    "start": "1001279",
    "end": "1006560"
  },
  {
    "text": "much easier for us to be able to display it or use that information instead of having to actually you know join all the",
    "start": "1006560",
    "end": "1012240"
  },
  {
    "text": "time to be able to get that information and finally the boring ef core stuff",
    "start": "1012240",
    "end": "1019360"
  },
  {
    "text": "where i have to add the offer to the db set thing i guess and then save the changes",
    "start": "1019360",
    "end": "1025839"
  },
  {
    "text": "using the db context so looking at this when i see this like",
    "start": "1025839",
    "end": "1034558"
  },
  {
    "text": "this kind of long method that has a bunch of stuff going on my first kind of instinct is to try to",
    "start": "1034559",
    "end": "1040720"
  },
  {
    "text": "break up this method into individual smaller components so i can better reason about it now this isn't",
    "start": "1040720",
    "end": "1046319"
  },
  {
    "text": "necessarily something i keep all the time like i don't necessarily like put it in and keep it forever but just to",
    "start": "1046319",
    "end": "1051760"
  },
  {
    "text": "kind of help help me to reason about what are these different steps that are going on here and how do they relate to each other",
    "start": "1051760",
    "end": "1058799"
  },
  {
    "text": "so let's do that first i want to break apart each of these like major sections of the of the method and",
    "start": "1058799",
    "end": "1065360"
  },
  {
    "text": "just extract these into individual methods so i'm going to be using by the way i'm using resharper i saw an advertisement",
    "start": "1065360",
    "end": "1071760"
  },
  {
    "text": "for a resharper there are certain things in here that are only achievable via resharper and paid tools i'll highlight",
    "start": "1071760",
    "end": "1077760"
  },
  {
    "text": "those when i get to them but i don't get paid by them whatsoever it's just i can't refactor with the hungry sharper these days so here we are",
    "start": "1077760",
    "end": "1086640"
  },
  {
    "text": "all right so we have member and offer type and",
    "start": "1087120",
    "end": "1092400"
  },
  {
    "text": "cancellation token of course we need a name or method so i'm going to call it c um oh that's a good click a good who",
    "start": "1092400",
    "end": "1098960"
  },
  {
    "text": "clue hint um the code comment said calculate offer value so maybe we just called method",
    "start": "1098960",
    "end": "1104799"
  },
  {
    "text": "that calculate calculate offer value",
    "start": "1104799",
    "end": "1110399"
  },
  {
    "text": "okay that was reasonable enough let's do the same for the second method",
    "start": "1111440",
    "end": "1117120"
  },
  {
    "text": "the second section here to extract this into let's see that code comment was",
    "start": "1117120",
    "end": "1122640"
  },
  {
    "text": "calculate expiration date let's do the same thing expiration date",
    "start": "1122640",
    "end": "1129919"
  },
  {
    "text": "all right and finally the assign offer part",
    "start": "1129919",
    "end": "1134919"
  },
  {
    "text": "assign offer",
    "start": "1137120",
    "end": "1140480"
  },
  {
    "text": "so all this helps me do is just be a little bit more",
    "start": "1144000",
    "end": "1149200"
  },
  {
    "text": "to have a little bit more understanding about what are the different steps is in each of these different uh parts of the method",
    "start": "1149200",
    "end": "1155200"
  },
  {
    "text": "and also to understand what do each of those different steps use as part of their logic",
    "start": "1155200",
    "end": "1160640"
  },
  {
    "text": "so each of these methods has parameters being input into them so that's like here are the things i need",
    "start": "1160640",
    "end": "1165679"
  },
  {
    "text": "to run um when i look at the individual methods also notice like is it using any of the",
    "start": "1165679",
    "end": "1170720"
  },
  {
    "text": "dependencies being passed in the constructor and then how do the different steps relate to each other so does one value",
    "start": "1170720",
    "end": "1176559"
  },
  {
    "text": "feed into the next one and we can see that here that the first value feeds into the third method the second value",
    "start": "1176559",
    "end": "1183360"
  },
  {
    "text": "also feeds into the third method and the third method then does all the work",
    "start": "1183360",
    "end": "1189280"
  },
  {
    "text": "so this pattern right here is known as the transaction script pattern the ideas that have individual methods of representative",
    "start": "1190960",
    "end": "1197120"
  },
  {
    "text": "classes that represent the overall actions in my application and each of those actions",
    "start": "1197120",
    "end": "1202720"
  },
  {
    "text": "has a transaction around it and then the inside part is in all the business logic",
    "start": "1202720",
    "end": "1208320"
  },
  {
    "text": "now for a lot of applications and systems that i deal with this is good enough like it's it's okay not to make",
    "start": "1208320",
    "end": "1214240"
  },
  {
    "text": "it any better than this if the code smells inside of the application or inside the method don't",
    "start": "1214240",
    "end": "1220640"
  },
  {
    "text": "lead us down those different uh different directions so i in my systems i always still start",
    "start": "1220640",
    "end": "1226640"
  },
  {
    "text": "with with this exact pattern just make it as dumb and as simple as possible but when things start to get more complex",
    "start": "1226640",
    "end": "1233440"
  },
  {
    "text": "and i start to see more behavior as part of that that's when i start to use these refactoring techniques",
    "start": "1233440",
    "end": "1238799"
  },
  {
    "text": "so if i just stopped here this would be a very short talk so let's keep going",
    "start": "1238799",
    "end": "1244880"
  },
  {
    "text": "so i'm going to do is take each of these methods one by one look at the logic inside of it and we're",
    "start": "1247039",
    "end": "1252640"
  },
  {
    "text": "going to decide where should that logic belong does it belong here in this class does it belong in a different class does",
    "start": "1252640",
    "end": "1258720"
  },
  {
    "text": "it belong in the domain model let's take a look all right the first one is calculate",
    "start": "1258720",
    "end": "1264720"
  },
  {
    "text": "offer value okay so as the parameters i see member",
    "start": "1264720",
    "end": "1271280"
  },
  {
    "text": "offer type and cancellation token of course because it's an async method",
    "start": "1271280",
    "end": "1277799"
  },
  {
    "text": "the other thing i noticed is that this method is not static which means it's using some",
    "start": "1278240",
    "end": "1283440"
  },
  {
    "text": "instance field dependency of this class and so i would see that because i've got",
    "start": "1283440",
    "end": "1289039"
  },
  {
    "text": "you know this handy little underscore to help indicate which of the ones that are private fields here so that's the http",
    "start": "1289039",
    "end": "1295679"
  },
  {
    "text": "client dependency so looking at this method i want to",
    "start": "1295679",
    "end": "1301679"
  },
  {
    "text": "figure out where should this logic belong and the way i can decide that is looking at",
    "start": "1301679",
    "end": "1306880"
  },
  {
    "text": "what is this method most related to one of these things being passed in",
    "start": "1306880",
    "end": "1312960"
  },
  {
    "text": "or something else entirely so i look at member and i say okay",
    "start": "1312960",
    "end": "1318640"
  },
  {
    "text": "how is this method using member well it's only using to get the email so",
    "start": "1318640",
    "end": "1324559"
  },
  {
    "text": "like just to get a piece of data out of it and then call some other web service members probably not a good",
    "start": "1324559",
    "end": "1330720"
  },
  {
    "text": "choice for me to move this method to also it's using a web service like web services and domain models don't really",
    "start": "1330720",
    "end": "1337039"
  },
  {
    "text": "mix very well so that's probably not a good place to go offer type is going to have the same",
    "start": "1337039",
    "end": "1343760"
  },
  {
    "text": "sort of issue they're like it's just grabbing one piece of data out of there so that's probably not a good candidate",
    "start": "1343760",
    "end": "1348799"
  },
  {
    "text": "for me to move this method to so that's probably not a good thing so okay if it doesn't belong in",
    "start": "1348799",
    "end": "1357600"
  },
  {
    "text": "the member object doesn't belong the offer type object could i leave it here",
    "start": "1357600",
    "end": "1362720"
  },
  {
    "text": "i could but that would make that that would make unit testing this method more",
    "start": "1363840",
    "end": "1368960"
  },
  {
    "text": "challenging because because mocking out like this individual",
    "start": "1368960",
    "end": "1375039"
  },
  {
    "text": "http client is a bit more challenging than say trying to encapsulate this entire method in some single thing so",
    "start": "1375039",
    "end": "1382240"
  },
  {
    "text": "let's do that let's encapsulate and extract this method into some other",
    "start": "1382240",
    "end": "1387520"
  },
  {
    "text": "object that would make our lives a bit easier to test so i'm going to extract a class",
    "start": "1387520",
    "end": "1395760"
  },
  {
    "text": "from this individual method and it's got some let's see we want to",
    "start": "1395760",
    "end": "1403840"
  },
  {
    "text": "first name this and the name of the method was calculate offer value if we're going to turn that around and name it give that a noun",
    "start": "1404080",
    "end": "1411520"
  },
  {
    "text": "we would call it the offer value calculator so let's call it that offer value",
    "start": "1411520",
    "end": "1417360"
  },
  {
    "text": "calculator it's got some red here saying like uh",
    "start": "1417360",
    "end": "1423039"
  },
  {
    "text": "do not let's see how to extract that",
    "start": "1423039",
    "end": "1427760"
  },
  {
    "text": "so uh the tar the desk the original class had this http client field",
    "start": "1428240",
    "end": "1434159"
  },
  {
    "text": "i don't want this new class to reach back over and grab that hp client i want to be passing it through to the class",
    "start": "1434159",
    "end": "1441360"
  },
  {
    "text": "itself so i'll do that and the other next thing is this method",
    "start": "1441360",
    "end": "1446559"
  },
  {
    "text": "is private and so we'd want to make that public because of course we do",
    "start": "1446559",
    "end": "1453039"
  },
  {
    "text": "all right so that method just disappeared and then if i scroll to the top",
    "start": "1453440",
    "end": "1459840"
  },
  {
    "text": "aha now we have our offer value calculator with our private read-only http client field being passed our",
    "start": "1460000",
    "end": "1466559"
  },
  {
    "text": "parameter being passed in a sign there and then the method itself looks exactly the same with the slight",
    "start": "1466559",
    "end": "1473600"
  },
  {
    "text": "difference that's this method is now public now coming down to my assign offer",
    "start": "1473600",
    "end": "1480400"
  },
  {
    "text": "handler it still takes an http client and then",
    "start": "1480400",
    "end": "1486480"
  },
  {
    "text": "here it will new up the offer value calculator",
    "start": "1486480",
    "end": "1490960"
  },
  {
    "text": "so what i've just done though is i've it created a class from this one method and",
    "start": "1492400",
    "end": "1498799"
  },
  {
    "text": "this right now is going to be a domain service so domain service is one of those classes that deals with domain",
    "start": "1498799",
    "end": "1505360"
  },
  {
    "text": "objects it's it's coordinating between them but it's not like uh it's not like",
    "start": "1505360",
    "end": "1510400"
  },
  {
    "text": "necessarily mutating them directly or it's not mainly dealing with that so that's what i've just created here is",
    "start": "1510400",
    "end": "1516720"
  },
  {
    "text": "one of those domain services now this hasn't helped me in my unit testing yet",
    "start": "1516720",
    "end": "1522320"
  },
  {
    "text": "so in order to make it easy for us to use and test we want to extract an interface from this class so let's do that now",
    "start": "1522320",
    "end": "1529120"
  },
  {
    "text": "i'm going to extract it oh no not super class extract an interface",
    "start": "1529120",
    "end": "1535520"
  },
  {
    "text": "i offer value calculator sounds good to me",
    "start": "1535520",
    "end": "1539919"
  },
  {
    "text": "all right so now we have the interface i offer value calculator and this class implements it i'm going to change the",
    "start": "1540880",
    "end": "1546480"
  },
  {
    "text": "name of this though i hate class names that implement an interface that just have the same name minus the i",
    "start": "1546480",
    "end": "1553200"
  },
  {
    "text": "it doesn't tell me any clue about how this implementation of this interface is different than anything else or what the",
    "start": "1553200",
    "end": "1560080"
  },
  {
    "text": "kind of special thing it's doing so this one i'm going to be calling the web service offer value calculator",
    "start": "1560080",
    "end": "1567200"
  },
  {
    "text": "if i actually no let's not rename that",
    "start": "1567200",
    "end": "1571799"
  },
  {
    "text": "if that was tied to an actual specific third-party web service i would put it as part of that like i don't know",
    "start": "1573200",
    "end": "1578720"
  },
  {
    "text": "there's salesforce opera value calculator whatever i would i would put that in the name to",
    "start": "1578720",
    "end": "1584480"
  },
  {
    "text": "tell me you know this is the strategy in which this class implements this interface",
    "start": "1584480",
    "end": "1590799"
  },
  {
    "text": "okay so we've got this interface so the next i'm going to",
    "start": "1591440",
    "end": "1596840"
  },
  {
    "text": "do is this class in the original transaction script doodad is still using",
    "start": "1596840",
    "end": "1603679"
  },
  {
    "text": "the derived implementation so i want to fix that i want to say",
    "start": "1603679",
    "end": "1609919"
  },
  {
    "text": "right here by highlighting the type there's this",
    "start": "1609919",
    "end": "1615039"
  },
  {
    "text": "refactoring and resharper that says use base type where possible so it will look to see the usages of",
    "start": "1615039",
    "end": "1620720"
  },
  {
    "text": "this field and say wait a minute can we use a lower type if if possible and what this will tell",
    "start": "1620720",
    "end": "1627360"
  },
  {
    "text": "me though is um like i guess the old way i would do this i would just change the type of that to the i offer value",
    "start": "1627360",
    "end": "1633039"
  },
  {
    "text": "calculator and see what breaks this is a little bit more intelligent about that",
    "start": "1633039",
    "end": "1638080"
  },
  {
    "text": "probably not system.object that would be silly we'll use the i offer value calculator",
    "start": "1638480",
    "end": "1643760"
  },
  {
    "text": "leave the other options alone all right so i was able to do that safely",
    "start": "1643760",
    "end": "1649520"
  },
  {
    "text": "now the last thing we want to do is it's not passing it in as a parameter so let's fix that",
    "start": "1649520",
    "end": "1654720"
  },
  {
    "text": "so i'm going to say introduce parameter",
    "start": "1654720",
    "end": "1661360"
  },
  {
    "text": "and we'll still call it the i offer oh no",
    "start": "1661520",
    "end": "1667120"
  },
  {
    "text": "offer value calculator it also tells me that there are parameters that can safely be",
    "start": "1667120",
    "end": "1672559"
  },
  {
    "text": "removed again because i don't have any tests around this so there's no actual usages of this constructor so",
    "start": "1672559",
    "end": "1678720"
  },
  {
    "text": "we'll fix that here in a second click next",
    "start": "1678720",
    "end": "1684240"
  },
  {
    "text": "value yes it's warning me i need to fix that i will and the last thing i need to do is",
    "start": "1684640",
    "end": "1691919"
  },
  {
    "text": "make that the interface type and i'm good to go almost there is a way we can fix this so i am",
    "start": "1691919",
    "end": "1698399"
  },
  {
    "text": "using dependency injection so i'll go real quick over here into startup",
    "start": "1698399",
    "end": "1703600"
  },
  {
    "text": "and say services.add.http",
    "start": "1703600",
    "end": "1709880"
  },
  {
    "text": "clients of the i offer value calculator to the web service offer value",
    "start": "1710240",
    "end": "1717039"
  },
  {
    "text": "calculator and then i might have to fill in like the actual you know host information there but i'll leave",
    "start": "1717039",
    "end": "1723679"
  },
  {
    "text": "that i'll leave it blank for just to be easy on ourselves",
    "start": "1723679",
    "end": "1730080"
  },
  {
    "text": "okay so we took that one method that was dealing with some external web service",
    "start": "1732559",
    "end": "1738960"
  },
  {
    "text": "we extracted it into a class thereby making a domain service and then created an interface around that one",
    "start": "1738960",
    "end": "1745679"
  },
  {
    "text": "method so that uh in order to unit test this i could then mock out that one single method",
    "start": "1745679",
    "end": "1753840"
  },
  {
    "text": "if i had unit tests but i don't that would make this talk go way too long so just pretend like i do",
    "start": "1753840",
    "end": "1760480"
  },
  {
    "text": "all right so that fixed this one method now i've got these other two",
    "start": "1760480",
    "end": "1768320"
  },
  {
    "text": "so let's go into the first one calculate expiration date",
    "start": "1768320",
    "end": "1773120"
  },
  {
    "text": "okay so looking at this i see that there's one parameter being passed in offer type",
    "start": "1773919",
    "end": "1781679"
  },
  {
    "text": "i also see that it's static which means there are no",
    "start": "1781679",
    "end": "1787360"
  },
  {
    "text": "there are no dependencies that this method uses so everything that it needs to do is contained inside this method",
    "start": "1787360",
    "end": "1793679"
  },
  {
    "text": "using that one single parameter now the first thing i see is a little squiggly note here that says",
    "start": "1793679",
    "end": "1800240"
  },
  {
    "text": "uh use switch expression so let's do that because that's that probably oh that's much nicer isn't",
    "start": "1800240",
    "end": "1805760"
  },
  {
    "text": "it uh let's see can i can make this even better can i do this",
    "start": "1805760",
    "end": "1811600"
  },
  {
    "text": "oh yeah inline that can i do this oh okay so it that whole thing could be converted into one single expression",
    "start": "1811600",
    "end": "1818799"
  },
  {
    "text": "pretty nice now um looking at you know where could this method live",
    "start": "1818799",
    "end": "1826000"
  },
  {
    "text": "again it could stay right here there's no uh i don't i don't have to move this method",
    "start": "1826000",
    "end": "1831520"
  },
  {
    "text": "somewhere else i feel like that this logic really belongs to this class however i do notice that it's static so",
    "start": "1831520",
    "end": "1839039"
  },
  {
    "text": "it's not using any of the instance properties and this method only deals with that offer type object",
    "start": "1839039",
    "end": "1846640"
  },
  {
    "text": "and in fact it deals with it quite a lot one two three four four places that it's",
    "start": "1846640",
    "end": "1853360"
  },
  {
    "text": "using that object and so this is a code smell this is called inappropriate intimacy i",
    "start": "1853360",
    "end": "1859440"
  },
  {
    "text": "wish there were a better name for that but it's a method like touching another one a whole lot um",
    "start": "1859440",
    "end": "1864960"
  },
  {
    "text": "and so i see this when it's when it's when it's when it's poking into this other object for all of",
    "start": "1864960",
    "end": "1870240"
  },
  {
    "text": "its information to perform some logic that's a clue that like maybe this logic better belongs over there so let's put",
    "start": "1870240",
    "end": "1877519"
  },
  {
    "text": "it over there now i used to do this where i would like",
    "start": "1877519",
    "end": "1883600"
  },
  {
    "text": "go through several steps to eventually get over there but i'm going to go like the cheat mode and make this much faster there's a refactoring and resharper",
    "start": "1883600",
    "end": "1890080"
  },
  {
    "text": "called make method non-static and this is a kind of like a supercharged like perform multiple refactorings all at",
    "start": "1890080",
    "end": "1896480"
  },
  {
    "text": "once and so what this what this does it says okay you have a method that's static right so how do you make a method",
    "start": "1896480",
    "end": "1901679"
  },
  {
    "text": "non-static you convert it into an instance method but where should that instance method",
    "start": "1901679",
    "end": "1906880"
  },
  {
    "text": "belong what we'll do is look at each of the parameters and say you know do you want to move it to this individual",
    "start": "1906880",
    "end": "1912720"
  },
  {
    "text": "parameter as the destination for this non-static method",
    "start": "1912720",
    "end": "1917919"
  },
  {
    "text": "now if i make this method non-static on the uh instance parameter here",
    "start": "1917919",
    "end": "1924159"
  },
  {
    "text": "then it can also convert all those usages of calling into that object it",
    "start": "1924159",
    "end": "1929360"
  },
  {
    "text": "can make this now just like instance property references instead so let's do this and see what happens",
    "start": "1929360",
    "end": "1935039"
  },
  {
    "text": "make method non-static i have to select one of the instance parameters here",
    "start": "1935039",
    "end": "1942000"
  },
  {
    "text": "there's only one so that makes it easy oh method disappeared where did it go",
    "start": "1944000",
    "end": "1951278"
  },
  {
    "text": "over to offer type so a few things it did one it made it",
    "start": "1952000",
    "end": "1958480"
  },
  {
    "text": "public because it had to in order for us to call into it from somewhere else and notice that all the offer type dot",
    "start": "1958480",
    "end": "1966240"
  },
  {
    "text": "went away instead of like calling out into the other object asking it for all this data and said",
    "start": "1966240",
    "end": "1971679"
  },
  {
    "text": "it's calling just directly into itself which means that all the cat this uh this this logic is now encapsulated",
    "start": "1971679",
    "end": "1979120"
  },
  {
    "text": "inside of the thing that it most deals with that it's most concerned with",
    "start": "1979120",
    "end": "1985760"
  },
  {
    "text": "so that's a fairly like safe refactoring and fairly straightforward like now i actually have a behavioral domain model",
    "start": "1987760",
    "end": "1993200"
  },
  {
    "text": "because i've got a method on my domain object that that deals with its own behavior like all the logic to",
    "start": "1993200",
    "end": "2000000"
  },
  {
    "text": "calculate this expiration date is now on the thing that has all the information about how to calculate the expiration",
    "start": "2000000",
    "end": "2005600"
  },
  {
    "text": "date so i think that's pretty cool all right so let's go back over to",
    "start": "2005600",
    "end": "2012159"
  },
  {
    "text": "assign offer handler",
    "start": "2012159",
    "end": "2016919"
  },
  {
    "text": "all right um this is kind of a little weird now um i'm getting to the point where i'm by",
    "start": "2019919",
    "end": "2026320"
  },
  {
    "text": "the way that this this original refactoring where i had method method method uh that i've extracted out that was",
    "start": "2026320",
    "end": "2032159"
  },
  {
    "text": "known as the compose method refactoring where i i kind of take you kind of think it's like a table of contents of a story",
    "start": "2032159",
    "end": "2038720"
  },
  {
    "text": "where instead of having like a big wall of text like reading charles dickens or something then it said you break those",
    "start": "2038720",
    "end": "2044240"
  },
  {
    "text": "individual parts into like the the major components that they're dealing with and then the method names kind of have those",
    "start": "2044240",
    "end": "2049599"
  },
  {
    "text": "like title chapters um that give you the clue of like what this logic is all about um but we know so kind of we're",
    "start": "2049599",
    "end": "2056320"
  },
  {
    "text": "kind of moving away from that because now the methods are somewhere else so what i often like to do here",
    "start": "2056320",
    "end": "2062158"
  },
  {
    "text": "when looking at the assign offer method is saying well now i'm not really following the composed method refactoring because these methods no",
    "start": "2062159",
    "end": "2068560"
  },
  {
    "text": "longer all exist here they're kind of scattered about instead let's do a little bit of d factoring",
    "start": "2068560",
    "end": "2073599"
  },
  {
    "text": "now d factoring is just simply the reverse of a refactoring so if i have a refactoring of extract method",
    "start": "2073599",
    "end": "2081679"
  },
  {
    "text": "the d factoring would be to inline the method if i wanted to extract a parameter the",
    "start": "2081679",
    "end": "2087358"
  },
  {
    "text": "inverse would be to inline the parameter and so each refactoring will have a inverse to to or a reverse inverse a",
    "start": "2087359",
    "end": "2094960"
  },
  {
    "text": "logical undo to kind of get it back to where it was before or just to just undo or or or",
    "start": "2094960",
    "end": "2102560"
  },
  {
    "text": "not really undo because i could maybe not have done in the first place but in any case um i i feel like this is no longer like",
    "start": "2102560",
    "end": "2109599"
  },
  {
    "text": "the same level of uh complexity for each of these methods so let's let's inline this assign offer",
    "start": "2109599",
    "end": "2115119"
  },
  {
    "text": "method so we can kind of take a step back to see all the things that are going on so for that i will say inline method inline all",
    "start": "2115119",
    "end": "2122240"
  },
  {
    "text": "usages remove the inline method declaration and i don't know what always does this but",
    "start": "2122240",
    "end": "2128480"
  },
  {
    "text": "it does we're going to get rid of that one",
    "start": "2128480",
    "end": "2133599"
  },
  {
    "text": "there's a reason why i did that why there are two parameters just because the method originally had one inside of",
    "start": "2136720",
    "end": "2142000"
  },
  {
    "text": "it and so this is just still preserving that behavior just in case there was some difference between those two",
    "start": "2142000",
    "end": "2147920"
  },
  {
    "text": "okay so looking at this",
    "start": "2147920",
    "end": "2153680"
  },
  {
    "text": "i can see like well there are a few things going on here i've got again the calculating the offer value that's separated out in its own method i've got",
    "start": "2153680",
    "end": "2160400"
  },
  {
    "text": "calculating the expiration date and i've got then the assigning of the offer itself",
    "start": "2160400",
    "end": "2166400"
  },
  {
    "text": "so if i were to look at this and then say well what should we then extract into a method to eventually move",
    "start": "2166400",
    "end": "2173440"
  },
  {
    "text": "somewhere else you could say let's do all three like maybe i can maybe i can get all of",
    "start": "2173440",
    "end": "2180720"
  },
  {
    "text": "these out into its own its own method and then put that into",
    "start": "2180720",
    "end": "2185839"
  },
  {
    "text": "like refactor that somewhere else or i could say maybe just this stuff because this is all dealing with like",
    "start": "2185839",
    "end": "2191839"
  },
  {
    "text": "just in memory stuff i'm not reaching out to some other web service that seems like the most appropriate",
    "start": "2191839",
    "end": "2197440"
  },
  {
    "text": "choice for now but we will we will actually try in a second to pull it all together to see what that looks like",
    "start": "2197440",
    "end": "2204078"
  },
  {
    "text": "so i'm going to pull all of these together extract a method",
    "start": "2204560",
    "end": "2211039"
  },
  {
    "text": "assign offer and what we'll just say is like calculating the expiration expiration date is just another step in",
    "start": "2211520",
    "end": "2217760"
  },
  {
    "text": "assigning offer to a member so let's just like pull that in as part of it and the parameters being passed in are",
    "start": "2217760",
    "end": "2223359"
  },
  {
    "text": "the offer type i'm going to move that up because i like it the member the offer type and then the value of the offer",
    "start": "2223359",
    "end": "2231759"
  },
  {
    "text": "all right now the reason why i'm doing this where i'm extracting the method first is again because i just want to",
    "start": "2233680",
    "end": "2239680"
  },
  {
    "text": "understand what is the data that's being used what are the objects being used by this block of code and it's really hard",
    "start": "2239680",
    "end": "2245920"
  },
  {
    "text": "for me to just look at a block of code and just kind of think that i understand all the things that are going on but by extracting a",
    "start": "2245920",
    "end": "2251920"
  },
  {
    "text": "method it kind of sets it in stone that says yes this is actually what's being used um this is what this is the inputs",
    "start": "2251920",
    "end": "2258320"
  },
  {
    "text": "being passed in these are the outputs being passed out and these are any kind of dependencies being used by having",
    "start": "2258320",
    "end": "2263920"
  },
  {
    "text": "this intermediate step of extracting into a method makes it much easier for me to grok and understand",
    "start": "2263920",
    "end": "2268960"
  },
  {
    "text": "what is the what is the logic of this section of code here",
    "start": "2268960",
    "end": "2274400"
  },
  {
    "text": "okay so we're going to have the same exercise we did before we're going to look at each of these objects it's being",
    "start": "2274800",
    "end": "2281359"
  },
  {
    "text": "used and ask ourselves are any of these a good candidate for us to move this behavior to",
    "start": "2281359",
    "end": "2287920"
  },
  {
    "text": "now this one's a little bit different in that it also has an output value that is also part of the domain so",
    "start": "2287920",
    "end": "2294800"
  },
  {
    "text": "that is also a valid choice to look at for where should this behavior live",
    "start": "2294800",
    "end": "2301680"
  },
  {
    "text": "so i've got member we can count one two three usages",
    "start": "2302800",
    "end": "2310839"
  },
  {
    "text": "okay offer type two usages and one of them is just part",
    "start": "2310839",
    "end": "2316400"
  },
  {
    "text": "of an assignment to something else so that's probably not a great one and then finally offer down here",
    "start": "2316400",
    "end": "2323440"
  },
  {
    "text": "so it instantiates it then then assigns it to the other thing and then returns it",
    "start": "2323440",
    "end": "2331359"
  },
  {
    "text": "so member and offer both look like decent candidates because they have a similar number of usages like member had three",
    "start": "2331440",
    "end": "2337440"
  },
  {
    "text": "usages one two three and then offer as kind of three well two usages really and",
    "start": "2337440",
    "end": "2343200"
  },
  {
    "text": "admitted returning it so then i look at what is the nature of this operation like who who should own",
    "start": "2343200",
    "end": "2350160"
  },
  {
    "text": "this operation of assigning an offer to a member should an offer be responsible for",
    "start": "2350160",
    "end": "2355359"
  },
  {
    "text": "assigning itself to a member i mean that's kind of i guess it could but it's a little bit backwards in my",
    "start": "2355359",
    "end": "2360640"
  },
  {
    "text": "head instead i think of like if i want to assign an offer to a member i see a member there and i'm going to",
    "start": "2360640",
    "end": "2366720"
  },
  {
    "text": "hand them the offer and say now you you sir uh you sir now have the offer",
    "start": "2366720",
    "end": "2372000"
  },
  {
    "text": "and so that's how it kind of matches in my head and so that's where we'll try to do it",
    "start": "2372000",
    "end": "2378160"
  },
  {
    "text": "so again what we'll do is do a refactoring to say make method non-static",
    "start": "2378720",
    "end": "2384640"
  },
  {
    "text": "it asks us which of the instance parameters we want to try to move it to and again we can actually try each of these we could go offer type what does",
    "start": "2384640",
    "end": "2391359"
  },
  {
    "text": "that look like it looks horrible undo what we'll do instead is just pick the one that makes sense remember",
    "start": "2391359",
    "end": "2399280"
  },
  {
    "text": "it went away all right so going over to our member",
    "start": "2399760",
    "end": "2405839"
  },
  {
    "text": "object",
    "start": "2405839",
    "end": "2408839"
  },
  {
    "text": "now we have all the logic to enco to assign an offer uh to a member all fully encapsulated",
    "start": "2411040",
    "end": "2417680"
  },
  {
    "text": "inside of this one single method we give it the offer type we give it the value and then it does all the logic in order",
    "start": "2417680",
    "end": "2424319"
  },
  {
    "text": "to assign that offer to the member",
    "start": "2424319",
    "end": "2428000"
  },
  {
    "text": "and now our method looks pretty small now we have just one thing that says calculate offer",
    "start": "2430079",
    "end": "2436560"
  },
  {
    "text": "value and another thing is to assign the offer to the member",
    "start": "2436560",
    "end": "2442160"
  },
  {
    "text": "now i'm going to do a controversial step here some people like it some people don't but i just want to show it",
    "start": "2442160",
    "end": "2448160"
  },
  {
    "text": "just in case some people like it so right now the the public quote interface",
    "start": "2448160",
    "end": "2455680"
  },
  {
    "text": "of this object says you give me the offer type and you give me a value and then i will assign that",
    "start": "2455680",
    "end": "2462400"
  },
  {
    "text": "offer type to that member but it doesn't calcul doesn't encapsulate the nature of",
    "start": "2462400",
    "end": "2468400"
  },
  {
    "text": "how it calculates the offer value and how it should calculate the offer value for an individual member",
    "start": "2468400",
    "end": "2475280"
  },
  {
    "text": "instead i can give it anything like in 32. max value like i could do",
    "start": "2475280",
    "end": "2481520"
  },
  {
    "text": "whatever i want here um it's not enforcing any kind of constraints about",
    "start": "2481520",
    "end": "2486640"
  },
  {
    "text": "how the offer value should be calculated so there is a way around this",
    "start": "2486640",
    "end": "2493640"
  },
  {
    "text": "and what we'll do is i'm going to first inline this value here as a trick",
    "start": "2495280",
    "end": "2502319"
  },
  {
    "text": "to make my next step easier and i'm going to go to the assign offer",
    "start": "2502319",
    "end": "2507920"
  },
  {
    "text": "method i'm going to say i want to inline that parameter value and by inlining it it will instead of",
    "start": "2507920",
    "end": "2514880"
  },
  {
    "text": "that you passing in the value directly it will take the places where it's actually",
    "start": "2514880",
    "end": "2520480"
  },
  {
    "text": "calculating the value and use that as the way to put it pass it instead",
    "start": "2520480",
    "end": "2526079"
  },
  {
    "text": "so inline parameter",
    "start": "2526160",
    "end": "2530160"
  },
  {
    "text": "and it's telling me that two new parameters have to be created i have to pass in now the offer value calculator",
    "start": "2531680",
    "end": "2537599"
  },
  {
    "text": "and i also have to pass in the cancellation token because async",
    "start": "2537599",
    "end": "2542318"
  },
  {
    "text": "and i also need to do this as async task not",
    "start": "2544160",
    "end": "2549359"
  },
  {
    "text": "tag structure i don't know what that is of offer",
    "start": "2549359",
    "end": "2554960"
  },
  {
    "text": "okay so what did this do probably something like half of you all",
    "start": "2558640",
    "end": "2563760"
  },
  {
    "text": "hate which is now i'm passing a a service into a domain object this is",
    "start": "2563760",
    "end": "2568960"
  },
  {
    "text": "known as a double dispatch pattern in which i'm passing now in a service",
    "start": "2568960",
    "end": "2574160"
  },
  {
    "text": "object to a domain object and then that domain object would then call back out to the service object",
    "start": "2574160",
    "end": "2581440"
  },
  {
    "text": "passing in the exact parameters it needs to to be able to interact with that domain service",
    "start": "2581440",
    "end": "2586640"
  },
  {
    "text": "so what this allows us to do is encapsulate the interaction of our domain model with these domain services",
    "start": "2586640",
    "end": "2592400"
  },
  {
    "text": "instead of having like calling code doing whatever it wants with these domain services this is all about like i",
    "start": "2592400",
    "end": "2598000"
  },
  {
    "text": "as a domain object really need to be in charge of how i'm performing this operation and so you give me the you",
    "start": "2598000",
    "end": "2604400"
  },
  {
    "text": "give me the thing that can call the thing and then i will pass in all the correct values in order to calculate",
    "start": "2604400",
    "end": "2610000"
  },
  {
    "text": "that value",
    "start": "2610000",
    "end": "2612560"
  },
  {
    "text": "and now we await the assign offer uh method to",
    "start": "2615119",
    "end": "2622720"
  },
  {
    "text": "get the offer object and now we can say like this operation is now fully encapsulated",
    "start": "2622720",
    "end": "2628400"
  },
  {
    "text": "i just want to highlight this as like a possibility i don't recommend it in most cases unless you really need to have",
    "start": "2628400",
    "end": "2634880"
  },
  {
    "text": "control over like what you're calling there or especially if you look at a set of logic they're like you're",
    "start": "2634880",
    "end": "2641359"
  },
  {
    "text": "calling the domain service like somewhere in the middle here and you got stuff above it and stuff below it so",
    "start": "2641359",
    "end": "2646400"
  },
  {
    "text": "it's really hard to like extract out that one piece from all the others so if it's really difficult for you to like",
    "start": "2646400",
    "end": "2652560"
  },
  {
    "text": "you know either pass in all those values of parameters or there's a lot of interdependency that's gonna say well just pass in that domain service to your",
    "start": "2652560",
    "end": "2658240"
  },
  {
    "text": "domain model itself and let it do the work rather than you trying to like like jingle the thing out of there to to make",
    "start": "2658240",
    "end": "2664400"
  },
  {
    "text": "it happen again it's not something i do often but it is something i keep them kind of my back pocket",
    "start": "2664400",
    "end": "2670560"
  },
  {
    "text": "in cases where the logic is just too intertwined with domain services",
    "start": "2670560",
    "end": "2676079"
  },
  {
    "text": "some people don't like this and then a domain model",
    "start": "2676079",
    "end": "2681680"
  },
  {
    "text": "i don't care like async is the thing that we do these days so it doesn't bother me if i'm",
    "start": "2681680",
    "end": "2688240"
  },
  {
    "text": "if i'm not depending directly on like you know the uh salesforce offer value calculator it's going through this",
    "start": "2688240",
    "end": "2693680"
  },
  {
    "text": "interface this is just a way of encapsulating the full and complete logic of what does it take to assign an offer to a member in",
    "start": "2693680",
    "end": "2700880"
  },
  {
    "text": "one single method okay so what's next",
    "start": "2700880",
    "end": "2707200"
  },
  {
    "text": "we've got everything encapsulated but i wouldn't say that our domain model is a quote fully encapsulated domain model",
    "start": "2707200",
    "end": "2712400"
  },
  {
    "text": "because over here i can do like wonky things like",
    "start": "2712400",
    "end": "2718960"
  },
  {
    "text": "uh member that's a number of active offers equals",
    "start": "2718960",
    "end": "2724480"
  },
  {
    "text": "n32.min value probably not something we want to let happen right like",
    "start": "2724480",
    "end": "2730079"
  },
  {
    "text": "that's an important value that needs to stay correct it's one of those invariants in my domain model that",
    "start": "2730079",
    "end": "2736079"
  },
  {
    "text": "always needs to be consistent and by just letting anyone do anything with this then uh i'm not able to",
    "start": "2736079",
    "end": "2743440"
  },
  {
    "text": "ensure that that value is always correct now you could say well you know if we just are really diligent about pull",
    "start": "2743440",
    "end": "2748880"
  },
  {
    "text": "requests and code or views then that should never be incorrect and like i i would say to a point but but again like",
    "start": "2748880",
    "end": "2755680"
  },
  {
    "text": "if i'm trying to describe for uh my fellow developers like here is the",
    "start": "2755680",
    "end": "2761599"
  },
  {
    "text": "here's the there's the capabilities offered by my domain model and there's no guard rails about what you can or cannot do then we",
    "start": "2761599",
    "end": "2768880"
  },
  {
    "text": "have to rely on like tribal knowledge to understand what is possible in our domain so instead of like having this",
    "start": "2768880",
    "end": "2774319"
  },
  {
    "text": "tribal knowledge i want to really codify that in our code itself and not have it just",
    "start": "2774319",
    "end": "2780319"
  },
  {
    "text": "be like in our heads so the first thing we'll do to to fully encapsulate our domain model is try to",
    "start": "2780319",
    "end": "2786400"
  },
  {
    "text": "decide what are those invariants in each of these different objects what are the things in those objects that if i took",
    "start": "2786400",
    "end": "2791520"
  },
  {
    "text": "one of those things away they would no longer be that thing like when does a zebra become a horse",
    "start": "2791520",
    "end": "2798240"
  },
  {
    "text": "when you remove its stripes and so we try to find those things in the model that if we took it away it would could no longer represent that concept",
    "start": "2798240",
    "end": "2806240"
  },
  {
    "text": "of our model to our business so going back to our member object",
    "start": "2806240",
    "end": "2812880"
  },
  {
    "text": "i would go to the business and ask them looking at each of these different data properties here each of these different",
    "start": "2812880",
    "end": "2818880"
  },
  {
    "text": "pieces of information which one of these could i take away and it'd still be a quote member",
    "start": "2818880",
    "end": "2825520"
  },
  {
    "text": "now i will play the act of the business owner um and so looking at this to say um okay",
    "start": "2826720",
    "end": "2834160"
  },
  {
    "text": "first name and last name we do need to know who you are because we have to put your name in the email um you know like",
    "start": "2834160",
    "end": "2839680"
  },
  {
    "text": "a little header there uh so we do need to know your first and last name we also need to know your email as well because",
    "start": "2839680",
    "end": "2846400"
  },
  {
    "text": "that's part of the you know part of you signing up as you give us your email you get you know added to this mailing list",
    "start": "2846400",
    "end": "2852079"
  },
  {
    "text": "that if you cancel it takes you know 21 business days to get off of and so you need these three pieces of data in order",
    "start": "2852079",
    "end": "2858319"
  },
  {
    "text": "to be a quote valid member now the other two a little bit more technical like they don't understand like oh i have to have this assigned",
    "start": "2858319",
    "end": "2864160"
  },
  {
    "text": "offers property but we know like well you know you have to have those other two as well",
    "start": "2864160",
    "end": "2869680"
  },
  {
    "text": "so let's codify that as part of this to say when i",
    "start": "2869839",
    "end": "2875440"
  },
  {
    "text": "create a member actually it's not do let's create a constructor create a constructor",
    "start": "2875440",
    "end": "2881760"
  },
  {
    "text": "and the things that you need as part of being a member our first name last name and email",
    "start": "2881760",
    "end": "2889040"
  },
  {
    "text": "and we'll do this thing where if the first name is uh no then we'll throw an argumental exception i guess if we're going to be",
    "start": "2893520",
    "end": "2899359"
  },
  {
    "text": "in c sharp 11 we can do this right",
    "start": "2899359",
    "end": "2905040"
  },
  {
    "text": "grumble but if you didn't understand that by oh god it's coming",
    "start": "2905440",
    "end": "2912559"
  },
  {
    "text": "all right so you have to have a first name you have to have a last name you have to have an email and the last thing we'll do is get rid of these public",
    "start": "2912559",
    "end": "2917599"
  },
  {
    "text": "setters because we don't want anyone just go mucking around with all these values do private set private set",
    "start": "2917599",
    "end": "2923040"
  },
  {
    "text": "private set now right now you don't see usage of this like in a fully fledged application",
    "start": "2923040",
    "end": "2928400"
  },
  {
    "text": "you would see usages of these setters because there's probably a screen somewhere of changing your first name",
    "start": "2928400",
    "end": "2933520"
  },
  {
    "text": "last name there's probably a separate section for changing your email so we'd have to go fix those as well but because it's only a couple use cases",
    "start": "2933520",
    "end": "2940160"
  },
  {
    "text": "that's all we get here similarly like here uh we'll get to this one later all right so we got first name",
    "start": "2940160",
    "end": "2947040"
  },
  {
    "text": "last name and email um okay let's also do then do the offer",
    "start": "2947040",
    "end": "2952559"
  },
  {
    "text": "object let's go to offer",
    "start": "2952559",
    "end": "2957838"
  },
  {
    "text": "all right so we have member assigned offer type expiration date and value so i asked the business like well what of",
    "start": "2960960",
    "end": "2967119"
  },
  {
    "text": "these is like necessary for you to for you to be an offer they look at to",
    "start": "2967119",
    "end": "2972400"
  },
  {
    "text": "say well all four of those all four of those are absolutely required for us to have an offer i can't have an offer like",
    "start": "2972400",
    "end": "2977440"
  },
  {
    "text": "not assigned to a member it's just like floating in the ether um it needs to have a value they can't like write in their own value later they can't expire",
    "start": "2977440",
    "end": "2984960"
  },
  {
    "text": "forever so we need to have an expiration date so all these things are required",
    "start": "2984960",
    "end": "2990240"
  },
  {
    "text": "check branch no why not and then the last thing is let's go",
    "start": "2991839",
    "end": "2997280"
  },
  {
    "text": "ahead and make these private setters because we don't want anyone coming around and mucking with our junk",
    "start": "2997280",
    "end": "3003119"
  },
  {
    "text": "all right the last one is going to be offer type similar exercise",
    "start": "3008559",
    "end": "3014400"
  },
  {
    "text": "they would need all four of these things so i'm just going to leave that alone because in addition to time you get the",
    "start": "3016720",
    "end": "3021760"
  },
  {
    "text": "idea all right so to make sure everything works let's go ahead and compile",
    "start": "3021760",
    "end": "3028319"
  },
  {
    "text": "oh no we have lots of things messed up now",
    "start": "3030720",
    "end": "3036559"
  },
  {
    "text": "okay so first thing we have is the property or index or date expiring cannot be using a good as no said okay",
    "start": "3036559",
    "end": "3042240"
  },
  {
    "text": "uh oh that's something else we'll come back and fix this um oh yes we needed to convert this to a",
    "start": "3042240",
    "end": "3047280"
  },
  {
    "text": "constructor so let's just do that real quick so we have new offer that is let's see this",
    "start": "3047280",
    "end": "3052960"
  },
  {
    "text": "then offer type then date expiring and then",
    "start": "3052960",
    "end": "3058000"
  },
  {
    "text": "value oh no not that one",
    "start": "3058000",
    "end": "3063200"
  },
  {
    "text": "let's extract a",
    "start": "3063839",
    "end": "3068040"
  },
  {
    "text": "value here extract a variable",
    "start": "3069040",
    "end": "3074720"
  },
  {
    "text": "and then now this is going to be value okay so that wasn't too bad",
    "start": "3074720",
    "end": "3083078"
  },
  {
    "text": "um okay let's compile again oops so this one's a oh this is a totally",
    "start": "3083680",
    "end": "3089440"
  },
  {
    "text": "different a totally different transaction script we have going on here so this is one we actually did need to",
    "start": "3089440",
    "end": "3095440"
  },
  {
    "text": "mutate the expiration date so let's do the same",
    "start": "3095440",
    "end": "3100559"
  },
  {
    "text": "exercise we did before look at this method seeing what are the different steps involved see what methods we want",
    "start": "3100559",
    "end": "3106640"
  },
  {
    "text": "to extract and then move those methods to the appropriate location so we first see",
    "start": "3106640",
    "end": "3112880"
  },
  {
    "text": "data access junk like not gonna get away from this that's okay i just i never really refactor that it's fine whatever",
    "start": "3112880",
    "end": "3120559"
  },
  {
    "text": "so it's going and getting outs item members it's going to go load up the member object",
    "start": "3120559",
    "end": "3126960"
  },
  {
    "text": "next it's going to find the individual offer out of the member assigned offers",
    "start": "3127200",
    "end": "3132480"
  },
  {
    "text": "okay it's going to set the expiration date for today oh yes",
    "start": "3132480",
    "end": "3139280"
  },
  {
    "text": "so this is the expire offer handler so this is also about expiring an offer now expire the offer",
    "start": "3139280",
    "end": "3145440"
  },
  {
    "text": "i guess because like if it's a bad offer or something like that they'll say okay it's it's expiring today and you can't use it anymore",
    "start": "3145440",
    "end": "3152880"
  },
  {
    "text": "and then finally it goes around with the number of active offers so let's extract this into a method",
    "start": "3152880",
    "end": "3159040"
  },
  {
    "text": "to see what information it uses now i'll call this the expire",
    "start": "3159040",
    "end": "3164559"
  },
  {
    "text": "offer method okay so it's still dealing with this you",
    "start": "3164559",
    "end": "3171119"
  },
  {
    "text": "know red squiggly we'll fix that here in a second um but it's also let's see it's got this request oh i don't like that i don't",
    "start": "3171119",
    "end": "3176960"
  },
  {
    "text": "like it when it's like dealing with this request thing let's see if i can extract a parameter for the places that uses",
    "start": "3176960",
    "end": "3183680"
  },
  {
    "text": "this one value so we'll call it offer id and it tells me i can safely remove",
    "start": "3183680",
    "end": "3189520"
  },
  {
    "text": "the request object i'm doing this because i don't if i'm going to move this method somewhere else i don't want to necessarily deal with these like dto",
    "start": "3189520",
    "end": "3196559"
  },
  {
    "text": "things so let's convert these to parameters to make our lives a little bit easier here okay so now it just passes in the offer",
    "start": "3196559",
    "end": "3203440"
  },
  {
    "text": "id property there and now this method is a little bit more like like simple here we're just doing member and the offer id",
    "start": "3203440",
    "end": "3213200"
  },
  {
    "text": "okay so looking at this we have the member object i see two usages",
    "start": "3213760",
    "end": "3220079"
  },
  {
    "text": "well i'm i can't move this method to a guide that doesn't make any sense um",
    "start": "3220079",
    "end": "3225359"
  },
  {
    "text": "and so i could also look at well what about the offer object i would have to extract a method for just that one part",
    "start": "3225359",
    "end": "3230880"
  },
  {
    "text": "and then but that that would be kind of weird to have this like chain set of methods here so",
    "start": "3230880",
    "end": "3236720"
  },
  {
    "text": "doing refactoring here i say make method non-static i select the instance parameter member",
    "start": "3236720",
    "end": "3243760"
  },
  {
    "text": "click next okay that went away",
    "start": "3243760",
    "end": "3247280"
  },
  {
    "text": "now it's still red here and this is because this date expiring uh is still a private uh",
    "start": "3249040",
    "end": "3255440"
  },
  {
    "text": "still private setter on that object so what it can do here",
    "start": "3255440",
    "end": "3261760"
  },
  {
    "text": "is refactor this one single line of code",
    "start": "3261760",
    "end": "3266400"
  },
  {
    "text": "and then i will move this i don't need this question mark go away",
    "start": "3269280",
    "end": "3275519"
  },
  {
    "text": "do this again make method non-static because it's just dealing with the offer object",
    "start": "3276799",
    "end": "3283759"
  },
  {
    "text": "so now this member object says okay firstly to load up the offer i'm interested in expiring i will tell the offer expire",
    "start": "3284960",
    "end": "3293200"
  },
  {
    "text": "and then finally i will decrement my own number of active offers so it's this aggregate is then like",
    "start": "3293200",
    "end": "3299359"
  },
  {
    "text": "interacting with its own child entities in order to perform this overall operation uh first finding the",
    "start": "3299359",
    "end": "3305200"
  },
  {
    "text": "offer i'm interested in and then doing all the logic necessary to expire",
    "start": "3305200",
    "end": "3311200"
  },
  {
    "text": "that offer which includes interacting with another thing as well as interacting with my own stuff as well",
    "start": "3311200",
    "end": "3318480"
  },
  {
    "text": "do we ever make this oh this should have been private too that would have also made our red squiggly before",
    "start": "3319680",
    "end": "3325838"
  },
  {
    "text": "all right so at this point offer now has a fully encapsulated model like",
    "start": "3328079",
    "end": "3333760"
  },
  {
    "text": "everything's private and the only way allowed to mutate are through the public methods or public instructors as part of",
    "start": "3333760",
    "end": "3340400"
  },
  {
    "text": "it yes there's like the like this compiler gets confused with",
    "start": "3340400",
    "end": "3345920"
  },
  {
    "text": "the private sets i'm probably i'm using in any framework so i still need these private setters that's just a small concession uh in persistence ignorance",
    "start": "3345920",
    "end": "3354000"
  },
  {
    "text": "it's fine with me i don't care and the last thing is in my member object",
    "start": "3354000",
    "end": "3361240"
  },
  {
    "text": "all those operations are now 100 uh fully encapsulated with the exception of",
    "start": "3362640",
    "end": "3368480"
  },
  {
    "text": "this thing so this is the last thing we're going to fix is this public list because we don't want people to do this",
    "start": "3368480",
    "end": "3374079"
  },
  {
    "text": "member dot offers dot clear like that would freak our business owner",
    "start": "3374079",
    "end": "3380319"
  },
  {
    "text": "out like what do you mean you can just like wipe a person's records of all their different offers like that",
    "start": "3380319",
    "end": "3385599"
  },
  {
    "text": "shouldn't be ever possible so the last thing we want to do is encapsulate all the usages of",
    "start": "3385599",
    "end": "3391680"
  },
  {
    "text": "someone just going in and setting everything here and instead making all those operations against that collection",
    "start": "3391680",
    "end": "3398079"
  },
  {
    "text": "completely encapsulated inside this model so in order to do that we need to convert this from this like auto",
    "start": "3398079",
    "end": "3404000"
  },
  {
    "text": "property thing to have an actual backing backing field so let's do that",
    "start": "3404000",
    "end": "3410720"
  },
  {
    "text": "and somewhere i need to do the magic",
    "start": "3411040",
    "end": "3419838"
  },
  {
    "text": "refactoring maybe i do this",
    "start": "3422000",
    "end": "3429599"
  },
  {
    "text": "nope if i can't get in the next two minutes that's fine here we go uh we'll just do it manually there's",
    "start": "3430160",
    "end": "3435920"
  },
  {
    "text": "like a magic place i put my carrots in order to create a static or create a um",
    "start": "3435920",
    "end": "3441119"
  },
  {
    "text": "uh convert this auto property to oh there it is god i got it finally it's",
    "start": "3441119",
    "end": "3446480"
  },
  {
    "text": "your property with backing field ah finally okay um so now i have a property with a",
    "start": "3446480",
    "end": "3453040"
  },
  {
    "text": "backing field um i want to remove this setter because i don't want anyone to be able to do",
    "start": "3453040",
    "end": "3458480"
  },
  {
    "text": "this so i'll have a yeah we won't allow anyone to set this to expression body property",
    "start": "3458480",
    "end": "3465200"
  },
  {
    "text": "and this will now become whatever we want like i enumerable is okay we can do",
    "start": "3465200",
    "end": "3470960"
  },
  {
    "text": "i read only collection maybe that's better for folks and then",
    "start": "3470960",
    "end": "3477359"
  },
  {
    "text": "this is now a private read-only read-only list of offer that i'll only",
    "start": "3479760",
    "end": "3485440"
  },
  {
    "text": "allow this one class to be able to mutate the assigned offers",
    "start": "3485440",
    "end": "3492319"
  },
  {
    "text": "and so down here where was going to that property instead i go to",
    "start": "3492319",
    "end": "3497760"
  },
  {
    "text": "that instead and now i can say yes indeed",
    "start": "3497760",
    "end": "3504079"
  },
  {
    "text": "this domain model is now 100 uh fully encapsulated",
    "start": "3504079",
    "end": "3509680"
  },
  {
    "text": "how many of you like hated this part this this part right there",
    "start": "3512880",
    "end": "3518079"
  },
  {
    "text": "i figured so so you don't have to do that it's just throwing out there is a possibility it's okay",
    "start": "3518079",
    "end": "3524400"
  },
  {
    "text": "all right so we took an application that was using just plain",
    "start": "3524799",
    "end": "3531200"
  },
  {
    "text": "transaction script patterns where it was just database database access database access",
    "start": "3531200",
    "end": "3536640"
  },
  {
    "text": "a bunch of business logic and by using the techniques of these two books we lit we we found code smells and used these",
    "start": "3536640",
    "end": "3543920"
  },
  {
    "text": "refactoring techniques to slowly push our business logic down into our domain model whether it's in the domain",
    "start": "3543920",
    "end": "3549839"
  },
  {
    "text": "services or in the actual domain model itself and then once we're able to push that behavior down and found that all",
    "start": "3549839",
    "end": "3555520"
  },
  {
    "text": "the usage of the domain logic was in the domain that then led us to be able to incorporate this fully encapsulated",
    "start": "3555520",
    "end": "3562400"
  },
  {
    "text": "domain model where everything was private and only the operations that are possible through the domain",
    "start": "3562400",
    "end": "3567599"
  },
  {
    "text": "are exposed on the domain so thank you all very much if you want to see the code behind here the before",
    "start": "3567599",
    "end": "3573680"
  },
  {
    "text": "and after you can go by my github github.com presentations otherwise uh",
    "start": "3573680",
    "end": "3579599"
  },
  {
    "text": "have a great rest of the conference and thanks for coming",
    "start": "3579599",
    "end": "3584680"
  },
  {
    "text": "you",
    "start": "3602319",
    "end": "3604400"
  }
]