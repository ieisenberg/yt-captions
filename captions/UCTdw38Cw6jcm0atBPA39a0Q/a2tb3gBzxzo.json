[
  {
    "text": "okay so my watch says 10 20. so i guess it's time to get started",
    "start": "240",
    "end": "5440"
  },
  {
    "text": "um hi everyone i hope you're having a good day and that the conference has been good so far and",
    "start": "5440",
    "end": "11200"
  },
  {
    "text": "if you do think that it's weird attending a conference online i tell you",
    "start": "11200",
    "end": "16320"
  },
  {
    "text": "doing a presentation online is really weird uh you're sitting at home in your study",
    "start": "16320",
    "end": "21760"
  },
  {
    "text": "talking to yourself with headset on and you're hoping that somebody's listening so hopefully there's somebody at the",
    "start": "21760",
    "end": "27439"
  },
  {
    "text": "other end watching what i'm saying so the talk today is building a better github pages",
    "start": "27439",
    "end": "33680"
  },
  {
    "text": "experience using ushered services how hard can it be before we get started with that i guess",
    "start": "33680",
    "end": "40000"
  },
  {
    "text": "i'll just do a quick little thing about i'm chris klogg i work as a company called active solution here in stockholm",
    "start": "40000",
    "end": "46559"
  },
  {
    "text": "where i do a bunch of different things mostly i am a developer and i do",
    "start": "46559",
    "end": "52079"
  },
  {
    "text": "software development and architecture but i also do a bunch of public speaking and community work and try to stay",
    "start": "52079",
    "end": "58000"
  },
  {
    "text": "up with the stuff that is interesting in tech i've been doing it since 96 i've been doing it for a while and i think",
    "start": "58000",
    "end": "63920"
  },
  {
    "text": "asher is kind of one of the biggest changes in the way that i work it's not something i talk a lot about",
    "start": "63920",
    "end": "69200"
  },
  {
    "text": "i tend to focus on other things than actually in most of my talks because azure has just become that one thing that's always there everything",
    "start": "69200",
    "end": "75759"
  },
  {
    "text": "i build is azure based and i thought this talk is kind of a fun take on how azure has changed the things that we do",
    "start": "75759",
    "end": "84000"
  },
  {
    "text": "so according to some people there are only two problems hard problems in computer science that's cache invalidation and naming things um",
    "start": "84000",
    "end": "91119"
  },
  {
    "text": "but actually there are three things i figured out there are three hard things in computer",
    "start": "91119",
    "end": "96479"
  },
  {
    "text": "science cache invalidation naming things off by one errors and choosing a blog",
    "start": "96479",
    "end": "101840"
  },
  {
    "text": "platform so i've been blogging for many many years and i had a down period and then",
    "start": "101840",
    "end": "107439"
  },
  {
    "text": "came back and said i'm gonna start blogging again and i asked the the interwebs i asked on twitter what's",
    "start": "107439",
    "end": "113119"
  },
  {
    "text": "the uh what's the uh go to blogging platform of the day what should i be using",
    "start": "113119",
    "end": "118159"
  },
  {
    "text": "i got a lot of different suggestions um ghost uh and obviously you get",
    "start": "118159",
    "end": "126240"
  },
  {
    "text": "a bunch of different tools out there you get net blog engine and so on and there are",
    "start": "126240",
    "end": "133440"
  },
  {
    "text": "lots of them and i want to stick within what i know and what i feel like because i do feel like tinkering with it",
    "start": "133440",
    "end": "138879"
  },
  {
    "text": "um and wordpress is not really my thing so i ended up actually choosing github",
    "start": "138879",
    "end": "144400"
  },
  {
    "text": "pages and i really like github pages um because it's it's very simple",
    "start": "144400",
    "end": "149440"
  },
  {
    "text": "and as it says it transfers it transforms your plain text into static websites and that's kind of what it does",
    "start": "149440",
    "end": "155040"
  },
  {
    "text": "for us and i started blogging on the pages and i thought um wonder if i can't do that on my own and",
    "start": "155040",
    "end": "161920"
  },
  {
    "text": "and remove some of the caveats that you have with github pages but i guess before we get started we get",
    "start": "161920",
    "end": "167360"
  },
  {
    "text": "our pages i'm not sure that or sorry my version of github pages i'm not sure that all of you have have worked with github pages so i",
    "start": "167360",
    "end": "173599"
  },
  {
    "text": "thought we'd just go through and say what are pages what am i actually talking about well the way that github pages works is",
    "start": "173599",
    "end": "179760"
  },
  {
    "text": "that you get a git git repo and in your repo you put templates as basically html with",
    "start": "179760",
    "end": "187120"
  },
  {
    "text": "some mustache handlebar syntax inside of it um and then you put your blog posts or",
    "start": "187120",
    "end": "192879"
  },
  {
    "text": "whatever content you want on your site inside of markdown and then you push that repo",
    "start": "192879",
    "end": "198080"
  },
  {
    "text": "to github and github then has some magic it just picks it up magically does stuff",
    "start": "198080",
    "end": "204799"
  },
  {
    "text": "to it and generates a website for you so it generates a static html website and then",
    "start": "204799",
    "end": "210640"
  },
  {
    "text": "they put that website on a static website hosting plan that they've got so it's basically you get your own free",
    "start": "210640",
    "end": "217200"
  },
  {
    "text": "website and they do all the builds for you and that's kind of cool it is um and and the magic part like the",
    "start": "217200",
    "end": "224720"
  },
  {
    "text": "book here is actually jekyll so jekyll is this ruby based static",
    "start": "224720",
    "end": "229760"
  },
  {
    "text": "website generator it takes as i said templates with markdown in it so html and handlebar syntax",
    "start": "229760",
    "end": "237439"
  },
  {
    "text": "and your markdown files uh and merges them in and generates a static website for you",
    "start": "237439",
    "end": "243200"
  },
  {
    "text": "which you can use for websites or you can use it for blogs which which is where i'm using it",
    "start": "243200",
    "end": "248799"
  },
  {
    "text": "so jekyll is kind of cool um so if we look at github pages the features that you're getting you get automatic static",
    "start": "248799",
    "end": "255200"
  },
  {
    "text": "site generation so basically you push your code to github and github will just go and",
    "start": "255200",
    "end": "260799"
  },
  {
    "text": "generate a website for you that is nice very nice feature free website hosting so they don't",
    "start": "260799",
    "end": "266720"
  },
  {
    "text": "charge you uh so hosting my blog on github is literally 100 free there is no cost involved in running",
    "start": "266720",
    "end": "273199"
  },
  {
    "text": "github pages which i really like i'm cheap um they do support custom domains so",
    "start": "273199",
    "end": "279040"
  },
  {
    "text": "i'm not running it on a github pages domain i'm actually running it on my own domain so they do support custom domains",
    "start": "279040",
    "end": "286400"
  },
  {
    "text": "and they also support which i really really like automatic tls support so basically you",
    "start": "286400",
    "end": "291919"
  },
  {
    "text": "just tick a box and say i want to support ssl and they will generate a certificate for you and they will even generate a",
    "start": "291919",
    "end": "297120"
  },
  {
    "text": "certificate for you for your custom domain so even though i'm running on a domain called fear of oblivion.com",
    "start": "297120",
    "end": "305280"
  },
  {
    "text": "they will generate a certificate for me to do ssl encryption for my website which is really like but what i don't like",
    "start": "305280",
    "end": "313360"
  },
  {
    "text": "the caveats of running into pages is the reaper must be on github not a big problem i i don't mind that i",
    "start": "313360",
    "end": "319520"
  },
  {
    "text": "use github anyway so i but i also use devops but and bitbucket",
    "start": "319520",
    "end": "324560"
  },
  {
    "text": "but i don't care github would be fine my my main problem is that it has to be",
    "start": "324560",
    "end": "330560"
  },
  {
    "text": "named so the repo that we're using must be username.github.io",
    "start": "330560",
    "end": "336000"
  },
  {
    "text": "so that means that there can only be one repo with that name for each account which means that you",
    "start": "336000",
    "end": "343120"
  },
  {
    "text": "have to have you can only have one website per account you can have multiple ones you can actually do multiple pages as far as i",
    "start": "343120",
    "end": "349680"
  },
  {
    "text": "understand one per project but uh not if you want to have a custom domain that actually ends up at a slash",
    "start": "349680",
    "end": "355680"
  },
  {
    "text": "something so you can't really have one default website more more than one default website for your",
    "start": "355680",
    "end": "361680"
  },
  {
    "text": "your account and you cannot customize the jekyll pipeline so when you start doing",
    "start": "361680",
    "end": "367120"
  },
  {
    "text": "github pages you get some some templates for jekyll so you can just",
    "start": "367120",
    "end": "372800"
  },
  {
    "text": "choose the template that you want but if you want to want to you can go and say hey i want to have my own custom template which is good and that's what i did i",
    "start": "372800",
    "end": "379840"
  },
  {
    "text": "found a template i really like the problem is that a lot of these third-party templates that people have built",
    "start": "379840",
    "end": "385759"
  },
  {
    "text": "use little plug-ins so to enable different features and since we can't modify the jekyll",
    "start": "385759",
    "end": "391360"
  },
  {
    "text": "pipeline in pages it means that we can't really use all the template features that we want so i actually had",
    "start": "391360",
    "end": "397840"
  },
  {
    "text": "to take a template and run it through github pages a couple of times and remove things and figure out what i could and could not",
    "start": "397840",
    "end": "404080"
  },
  {
    "text": "use because some things are supported and some are not so being that we don't control the jekyll stuff it gives us",
    "start": "404080",
    "end": "410800"
  },
  {
    "text": "some some limitations so i thought i can build that with azure right",
    "start": "410800",
    "end": "415919"
  },
  {
    "text": "i should be able to do that so i went and looked so automatic static site generation yep can do that azure devops",
    "start": "415919",
    "end": "422800"
  },
  {
    "text": "with some jekyll sprinkles on top of it that's not a problem free website hosting well pretty much",
    "start": "422800",
    "end": "429520"
  },
  {
    "text": "almost free at least because azure blob storage supports us putting stuff in there and you pay",
    "start": "429520",
    "end": "435199"
  },
  {
    "text": "almost nothing for for your website support for custom domains yes not a",
    "start": "435199",
    "end": "440479"
  },
  {
    "text": "problem blob storage supports custom domains as well can do that as well doesn't cost anything extra",
    "start": "440479",
    "end": "446880"
  },
  {
    "text": "automatic tls support so blob storage kind of supports tls but",
    "start": "446880",
    "end": "454319"
  },
  {
    "text": "only if you use the blob storage generated domain name for it so if you want to have custom domains",
    "start": "454319",
    "end": "459840"
  },
  {
    "text": "then tls support is not built in however azure cdn supports fronting blob storage",
    "start": "459840",
    "end": "466319"
  },
  {
    "text": "and adding tls with custom domains so cdn will solve that ripa must be on github nope can put it",
    "start": "466319",
    "end": "473440"
  },
  {
    "text": "wherever i want that's not a problem at all repo must be named username.github.io",
    "start": "473440",
    "end": "479520"
  },
  {
    "text": "nope not at all we're not even stuck with github as i said so that's not a problem and no",
    "start": "479520",
    "end": "484639"
  },
  {
    "text": "customization of the jekyll pipeline that's gone as well because we now run the jekyll stuff on our own we're doing",
    "start": "484639",
    "end": "490400"
  },
  {
    "text": "the static website generation in our own pipeline so we have full control so we remove a bunch of the caveats and",
    "start": "490400",
    "end": "497440"
  },
  {
    "text": "we fulfill all the the things that we are getting almost it's not completely free but it's",
    "start": "497440",
    "end": "502560"
  },
  {
    "text": "almost free so what i'm going to be building today and i want to show you how to build this",
    "start": "502560",
    "end": "507680"
  },
  {
    "text": "is it's going to be the same thing i do a git repo i push that i push that to some form of git repo in",
    "start": "507680",
    "end": "513839"
  },
  {
    "text": "my case i'm going to use devops to store my code then azure page sorry devops pipelines picks that up",
    "start": "513839",
    "end": "521919"
  },
  {
    "text": "and says hey it's been a push the pipeline then goes ahead and uses jekyll to do the static site generation",
    "start": "521919",
    "end": "528640"
  },
  {
    "text": "but i don't i'm i'm not a ruby person so i don't know really honestly how to run jekyll",
    "start": "528640",
    "end": "533760"
  },
  {
    "text": "but there's a docker image for that so i'm going to have the pipeline run jekyll through a docker image",
    "start": "533760",
    "end": "540480"
  },
  {
    "text": "because i know how to use docker and then once it's generated a static file i'm going to push the resulting",
    "start": "540480",
    "end": "546320"
  },
  {
    "text": "files to blob storage to do my website hosting and if we look at the web request it's",
    "start": "546320",
    "end": "551920"
  },
  {
    "text": "going to be you come from the internet you're going to hit azure cdn and the azure cdn is then powered by",
    "start": "551920",
    "end": "558080"
  },
  {
    "text": "azure dns because i have my dns lying in azure so i can control my ds dns up there",
    "start": "558080",
    "end": "563519"
  },
  {
    "text": "and we're going to have ssl enabled because i should be cdn actually supports um creation of",
    "start": "563519",
    "end": "570560"
  },
  {
    "text": "ssl certificates even for custom domains and then that is going to front my blob",
    "start": "570560",
    "end": "576320"
  },
  {
    "text": "storage that contains my website that was generated by devops however i'm also going to extend my blog",
    "start": "576320",
    "end": "581920"
  },
  {
    "text": "beyond just static website hosting so i'm actually going to add commenting functionality using azure functions",
    "start": "581920",
    "end": "587360"
  },
  {
    "text": "so when you add a comment or you go to a blog post and you look at the comments it's going to use azure functions",
    "start": "587360",
    "end": "595040"
  },
  {
    "text": "to get the blog posts sorry no get the blog comments and also be able to add comments and",
    "start": "595040",
    "end": "601600"
  },
  {
    "text": "those functions are going to add and and read comments from azure table storage because i've already got a",
    "start": "601600",
    "end": "607839"
  },
  {
    "text": "storage account for my files i might as well just use table storage as well",
    "start": "607839",
    "end": "612959"
  },
  {
    "text": "so yeah that is a lot of stuff but that's kind of cool stuff with with azure you take the little pieces you put them together you configure them and all",
    "start": "612959",
    "end": "619440"
  },
  {
    "text": "of a sudden you have this much bigger cooler solution so in the end we're going to have something like this i'm going to use devops repos and",
    "start": "619440",
    "end": "625760"
  },
  {
    "text": "pipelines docker jekyll blob storage table storage functions cdn dns we're going to be working with html",
    "start": "625760",
    "end": "631519"
  },
  {
    "text": "javascript css we're going to have some markdown in there typescript yaml no i'm going to use some node as",
    "start": "631519",
    "end": "636560"
  },
  {
    "text": "well so node in npm and also git and i'm also going to use the tool called pollumi to generate",
    "start": "636560",
    "end": "642320"
  },
  {
    "text": "all of my uh all of my infrastructure because i",
    "start": "642320",
    "end": "647600"
  },
  {
    "text": "really like the idea of pollumion infrastructure's code so let's just go ahead and start",
    "start": "647600",
    "end": "652800"
  },
  {
    "text": "building something because i um i have a lot of stuff to show you so let's go ahead and just build something",
    "start": "652800",
    "end": "659040"
  },
  {
    "text": "so i'm going to go over to my terminal here um and the first thing i'm going to do is i'm going to create a directory for my pollumi stuff so i'm going to mk",
    "start": "659040",
    "end": "665519"
  },
  {
    "text": "dear palumi and i'm going to step into pollumi and in here i'm going to say pollumi",
    "start": "665519",
    "end": "670560"
  },
  {
    "text": "login file colon slash dot so plummy has this idea of",
    "start": "670560",
    "end": "677040"
  },
  {
    "text": "infrastructure's code but it's actually real code not not dsl not markup not xml it's it's literal",
    "start": "677040",
    "end": "683760"
  },
  {
    "text": "code so i'm going to use typescript to generate my things and then pollu me stores its state so",
    "start": "683760",
    "end": "689360"
  },
  {
    "text": "basically what is already available it doesn't poll or and ask asher what what's up",
    "start": "689360",
    "end": "694480"
  },
  {
    "text": "there but it it keeps track of what it's done before and then whenever i make a change to my infrastructure it compares",
    "start": "694480",
    "end": "700880"
  },
  {
    "text": "what it did before with the new state and then makes all the necessary changes and to do that you need to store that",
    "start": "700880",
    "end": "707360"
  },
  {
    "text": "state so what i'm telling pullum here with preliminary login file is that please store your state locally",
    "start": "707360",
    "end": "713200"
  },
  {
    "text": "in this folder i wouldn't recommend doing this normally um if you want to do this",
    "start": "713200",
    "end": "718240"
  },
  {
    "text": "for real you should probably store your state in some backing store like uh amazon s3",
    "start": "718240",
    "end": "724320"
  },
  {
    "text": "or azure blob storage or even use polumi's service where they host the state for",
    "start": "724320",
    "end": "729600"
  },
  {
    "text": "you but for this demo i'm going to store it locally in my project then i'm going to say pollumi new asher",
    "start": "729600",
    "end": "738639"
  },
  {
    "text": "typescript because that's what i'm going to be running i'm going to build some usher stuff using typescript name of my project",
    "start": "738639",
    "end": "744720"
  },
  {
    "text": "azure pages demo description of the project really don't care",
    "start": "744720",
    "end": "750320"
  },
  {
    "text": "stack so stack is literally one setup of infrastructure so you can have many different stacks to set up your",
    "start": "750320",
    "end": "756959"
  },
  {
    "text": "production environment in your dev environment your uat environment and they can all have different configuration",
    "start": "756959",
    "end": "762320"
  },
  {
    "text": "i just need one stack i'm going to call it dev that works fine in the password",
    "start": "762320",
    "end": "768720"
  },
  {
    "text": "and we do that again",
    "start": "769360",
    "end": "773839"
  },
  {
    "text": "so so for the password you can store",
    "start": "780800",
    "end": "787839"
  },
  {
    "text": "secrets inside of your states um and it also any any secrets that come",
    "start": "787839",
    "end": "793040"
  },
  {
    "text": "out or sorry inside your configuration but also inside your state that might be secret things so everything that should be secret that",
    "start": "793040",
    "end": "799839"
  },
  {
    "text": "you generate and create and things like that like if you generate passwords and things those are actually the state",
    "start": "799839",
    "end": "805920"
  },
  {
    "text": "is encrypted using your own passphrase so not everybody can just pull down the",
    "start": "805920",
    "end": "811040"
  },
  {
    "text": "state and figure out all of your secrets then we need to tell it where to go i'm going to go with azure public",
    "start": "811040",
    "end": "816800"
  },
  {
    "text": "and i want to put it in north europe about that right then it's going to",
    "start": "816800",
    "end": "822720"
  },
  {
    "text": "install a bunch of node stuff because i'm doing touchscript as i said that should be",
    "start": "822720",
    "end": "827920"
  },
  {
    "text": "pretty fast there is it's installed ready to go and then i'm going to say pollumi",
    "start": "827920",
    "end": "833760"
  },
  {
    "text": "stack select dev to select that i'm going to be working with the dev stack at the moment",
    "start": "833760",
    "end": "839440"
  },
  {
    "text": "and then i'm going to do one more thing so instead of having to put in my passphrase every time i do a pollumi thing",
    "start": "839440",
    "end": "844560"
  },
  {
    "text": "what we can do is we can say uh we can do that so i can set an environment",
    "start": "844560",
    "end": "851120"
  },
  {
    "text": "variable called pollumi config passphrase and now i don't need to input the passwords every time i do something",
    "start": "851120",
    "end": "856639"
  },
  {
    "text": "which is quite nice and then i happen to know that i need a couple of more npm packages so i'm going",
    "start": "856639",
    "end": "861680"
  },
  {
    "text": "to install npm install at azure slash arm cdn because i'm going to do some cdm work",
    "start": "861680",
    "end": "869360"
  },
  {
    "text": "let's install that package for me and then i'm going to install also azure storage because i'm going to",
    "start": "869360",
    "end": "876720"
  },
  {
    "text": "be doing storage stuff that's installed and then i'm going to",
    "start": "876720",
    "end": "882560"
  },
  {
    "text": "open up code so that i can do my coding",
    "start": "882560",
    "end": "887920"
  },
  {
    "text": "so what we get here i'm going to make let's see here we open up the polymer thing um i'm just going to make one change",
    "start": "887920",
    "end": "893440"
  },
  {
    "text": "there's a strict thing in here that i actually like to remove because it causes some issues with some of my my simpler scripts that i'm doing um",
    "start": "893440",
    "end": "900000"
  },
  {
    "text": "because i'm doing a demo not production code i'm just going to remove the strict to simplify the demands on my",
    "start": "900000",
    "end": "905519"
  },
  {
    "text": "my typescript so what we've got here is we've got a plumaguml file that contains the information about the project",
    "start": "905519",
    "end": "910959"
  },
  {
    "text": "telling us like this this is what the project is all about so you can see the name and the uh",
    "start": "910959",
    "end": "916560"
  },
  {
    "text": "description that i didn't put in and then there's a dev pollumi.dev.yaml that is a stack so basically a stack here it",
    "start": "916560",
    "end": "923839"
  },
  {
    "text": "has a yaml file and for each one of the stacks there are different settings and then i can go back out here and we",
    "start": "923839",
    "end": "930160"
  },
  {
    "text": "can say pollumi config set project",
    "start": "930160",
    "end": "935519"
  },
  {
    "text": "name azure pages demo like that and all that really does it",
    "start": "935519",
    "end": "941920"
  },
  {
    "text": "adds that here so it basically gets project name prefixes it with my project name and then adds the value",
    "start": "941920",
    "end": "948399"
  },
  {
    "text": "in here and if you don't want to do it through the terminal and go polo move config set you can actually just go in here",
    "start": "948399",
    "end": "954000"
  },
  {
    "text": "and add the text in here the good cool thing about doing it with the the",
    "start": "954000",
    "end": "959759"
  },
  {
    "text": "terminal is that you can actually add a secret and it actually encrypts the values for you so if you have secrets in there you can do that as well",
    "start": "959759",
    "end": "967440"
  },
  {
    "text": "and the final part i need to check before i get started i'm just going to ash i see accounts show",
    "start": "967440",
    "end": "974000"
  },
  {
    "text": "nope so ac account show so balloon me actually",
    "start": "974000",
    "end": "980399"
  },
  {
    "text": "piggybacks locally on my machine using the azure cli so i'm just going to verify that i am using my the correct",
    "start": "980399",
    "end": "986160"
  },
  {
    "text": "azure account which i am so i should now be good to go to start doing my coding",
    "start": "986160",
    "end": "991759"
  },
  {
    "text": "in here in my index that i get when i generate the site we get we see that it imports some azure stuff that's in pollumi it",
    "start": "991759",
    "end": "997680"
  },
  {
    "text": "creates a resource group and a storage account it exports a connection string i'm actually going to",
    "start": "997680",
    "end": "1002720"
  },
  {
    "text": "go and delete that and that and just keep that and i'm going to go ahead and say",
    "start": "1002720",
    "end": "1008320"
  },
  {
    "text": "add this so palumi config basically pulls out the current configuration",
    "start": "1008320",
    "end": "1014079"
  },
  {
    "text": "which is what's in this dev jaml file here because it knows that i'm running with",
    "start": "1014079",
    "end": "1019519"
  },
  {
    "text": "the stack dev because i selected that so if you have many stacks it's going to pull out the",
    "start": "1019519",
    "end": "1024959"
  },
  {
    "text": "corresponding yaml file and then i'm going to pull out the project name from my yaml file so i have that and",
    "start": "1024959",
    "end": "1032000"
  },
  {
    "text": "then to create something in azure you just go and say hey azure.com.newasher.com.in this case",
    "start": "1032000",
    "end": "1037360"
  },
  {
    "text": "resource group but i'm going to name it project name however i'm also going to do this and i",
    "start": "1037360",
    "end": "1043360"
  },
  {
    "text": "know that people might not agree with me but i'm going to add project name here",
    "start": "1043360",
    "end": "1049039"
  },
  {
    "text": "as a name as well so the first part is the name that pollumi uses to",
    "start": "1049039",
    "end": "1054640"
  },
  {
    "text": "recognize that what i'm creating and remember what i created and this is the name of the resource that gets generated in the cloud",
    "start": "1054640",
    "end": "1061120"
  },
  {
    "text": "if i don't set that manually it actually uses this name plus some random characters because we",
    "start": "1061120",
    "end": "1066559"
  },
  {
    "text": "should treat infrastructures cattle not as pets so we've got that and then i'm going to",
    "start": "1066559",
    "end": "1072559"
  },
  {
    "text": "need two environments because i want to have a blog that is serious right so i want to have a staging environment and a production environment so to do",
    "start": "1072559",
    "end": "1079120"
  },
  {
    "text": "that i'm going to add a new file in here and called website website environment dot ts like that",
    "start": "1079120",
    "end": "1087520"
  },
  {
    "text": "and inside the website environment i'm going to go and create a very basic outline so it's just a class",
    "start": "1087520",
    "end": "1092640"
  },
  {
    "text": "here imports pollumi azure creates a class that's it then i'm going to go and add a",
    "start": "1092640",
    "end": "1098160"
  },
  {
    "text": "bit of code i know there's a lot here and i don't want to type it so creating a constructor that takes a resource group",
    "start": "1098160",
    "end": "1104640"
  },
  {
    "text": "the project name and a potential suffix that's nullable it generates the name of the web",
    "start": "1104640",
    "end": "1109840"
  },
  {
    "text": "website environment using the project name and then if there is a suffix it goes dash suffix otherwise nothing and then i",
    "start": "1109840",
    "end": "1116880"
  },
  {
    "text": "tell it hey i need a storage account so azure storage account this is the name of it here is the name of the storage account which cannot",
    "start": "1116880",
    "end": "1123360"
  },
  {
    "text": "contain dashes and it cannot cannot be uh it's case sensitive can only be lowercase i tell",
    "start": "1123360",
    "end": "1130240"
  },
  {
    "text": "you to put it in the same resource group that i just passed in um i tell it to be a standard local redundant",
    "start": "1130240",
    "end": "1136160"
  },
  {
    "text": "https traffic only and then i tell it to be a static website and here is the index document in my 404",
    "start": "1136160",
    "end": "1141840"
  },
  {
    "text": "and then i give a couple of properties here so that i can get information about my environment and since it won't know the primary web",
    "start": "1141840",
    "end": "1149840"
  },
  {
    "text": "endpoint and the primary connection string until azure has actually created the resource those values are asynchronous and to be",
    "start": "1149840",
    "end": "1157120"
  },
  {
    "text": "able to get those values out through this thing here you can see that it uses something called pollumi.output",
    "start": "1157120",
    "end": "1163039"
  },
  {
    "text": "of string and that means that it knows how to handle the fact that these values are",
    "start": "1163039",
    "end": "1168240"
  },
  {
    "text": "not done and not available until the resource has been created in the cloud there's a little bit helper stuff from",
    "start": "1168240",
    "end": "1174480"
  },
  {
    "text": "pollumi to get the asynchronous stuff working i'm gonna go back out here and i'm gonna do",
    "start": "1174480",
    "end": "1179600"
  },
  {
    "text": "import from dot slash website environment",
    "start": "1179600",
    "end": "1186480"
  },
  {
    "text": "website environment and then down here i'm just gonna go and do",
    "start": "1186480",
    "end": "1191520"
  },
  {
    "text": "so i'm going to create two website environments and that is then going to create two two storage accounts for me one that's",
    "start": "1191520",
    "end": "1197280"
  },
  {
    "text": "just named the same thing as the project and one that's for the name dash staging",
    "start": "1197280",
    "end": "1203120"
  },
  {
    "text": "that's the storage part of my website but as i said i cannot add custom domains and tls on top of that so",
    "start": "1203120",
    "end": "1208880"
  },
  {
    "text": "i do need cdn as well and to do that i'm going to go ahead and i'm going to create a cdn",
    "start": "1208880",
    "end": "1214400"
  },
  {
    "text": "profile so once again it's just new azure cdn profile name where to put it and what",
    "start": "1214400",
    "end": "1221760"
  },
  {
    "text": "sku to use for my cdn profile so i'm going to use the microsoft standard sku that works fine for me for this demo",
    "start": "1221760",
    "end": "1228400"
  },
  {
    "text": "and then once i have my cdm profile i'm going to say prod environment dot add cdn",
    "start": "1228400",
    "end": "1235679"
  },
  {
    "text": "endpoint i'm going to pass in the cdn profile and i'm going to pass in 0 10",
    "start": "1235679",
    "end": "1243600"
  },
  {
    "text": "so basically please use the cdn and please cache it for 10 minutes",
    "start": "1243600",
    "end": "1248720"
  },
  {
    "text": "let me go ahead and create that endpoint or that sorry that method move that down there",
    "start": "1248720",
    "end": "1257200"
  },
  {
    "text": "and i'm going to change that to duration and i'm going to make it optional like that so now i have a method on my",
    "start": "1257200",
    "end": "1263600"
  },
  {
    "text": "environment so i'm really building code here even if i'm creating infrastructure so in here i'm going to do this there's",
    "start": "1263600",
    "end": "1271039"
  },
  {
    "text": "a lot of code here i just need to create that property make it private",
    "start": "1271039",
    "end": "1277840"
  },
  {
    "text": "so what i'm doing here is i'm creating a cdn endpoint giving it a name putting it in my resource group telling",
    "start": "1278000",
    "end": "1283600"
  },
  {
    "text": "it what profile to use telling it what host header to use i'm telling it that hey",
    "start": "1283600",
    "end": "1288640"
  },
  {
    "text": "when people request stuff you can find it in blob storage here is the the blob storage account",
    "start": "1288640",
    "end": "1293760"
  },
  {
    "text": "that you should use so the web endpoint and then here's a global delivery rule saying that",
    "start": "1293760",
    "end": "1298799"
  },
  {
    "text": "if i passed in the duration use that duration no matter what you're getting from the back end when it comes to caching",
    "start": "1298799",
    "end": "1304320"
  },
  {
    "text": "and if i didn't pass it in just bypass it so for my staging environment i won't be caching but for my production",
    "start": "1304320",
    "end": "1309440"
  },
  {
    "text": "environment i will and then there's a delivery rule down here saying that hey if you're coming in",
    "start": "1309440",
    "end": "1314559"
  },
  {
    "text": "on hdp could you please do a permanent redirect to hps so i can have the cdn automatically",
    "start": "1314559",
    "end": "1322080"
  },
  {
    "text": "change from http to hps using a delivery rule and then i'm just going to go down here",
    "start": "1322080",
    "end": "1328799"
  },
  {
    "text": "and expose some more information so once again i have a couple of properties here they use prelim interpolate",
    "start": "1328799",
    "end": "1334880"
  },
  {
    "text": "to basically figure out the information i need so i get the url to the cdn and then if i ever want to purge the cdn",
    "start": "1334880",
    "end": "1341840"
  },
  {
    "text": "i need to run this azure cli command because i can't purge it from pollumi at current point at least so for",
    "start": "1341840",
    "end": "1349200"
  },
  {
    "text": "that i'm going to use this this ac cdn endpoint purge command and to make that a little bit easier to work with",
    "start": "1349200",
    "end": "1355520"
  },
  {
    "text": "i'm actually exposing that as a property as well with all the names filled in the resource groups and the profile names",
    "start": "1355520",
    "end": "1361600"
  },
  {
    "text": "and all of that so that when i've run my my pollumi stuff i get this command on screen that i can just",
    "start": "1361600",
    "end": "1367679"
  },
  {
    "text": "copy and paste and use whenever i want to purge it so that's kind of neat",
    "start": "1367679",
    "end": "1372880"
  },
  {
    "text": "and with icdn in place go back out here we'll do staging pro environment dot add cdn",
    "start": "1372880",
    "end": "1379200"
  },
  {
    "text": "profile i'm gonna pass in a c or cdn endpoint and i'm gonna pass in a cdn profile but i don't want a duration for my staging",
    "start": "1379200",
    "end": "1385679"
  },
  {
    "text": "environment because i don't need that to cache anything it doesn't need to be high performance",
    "start": "1385679",
    "end": "1392559"
  },
  {
    "text": "so that's now we've got storage we've got cdn in front of it but we don't",
    "start": "1392559",
    "end": "1397679"
  },
  {
    "text": "have a custom domain so i need to go and create a custom domain for my uh my uh cdn endpoint",
    "start": "1397679",
    "end": "1404640"
  },
  {
    "text": "and so what i'm going to do is i'm going to go back in here to my add cdn endpoints i'm going to add a bit more code in here",
    "start": "1404640",
    "end": "1409840"
  },
  {
    "text": "it's going to add this make that a private property sorry about scrolling up and down so what i'm",
    "start": "1409840",
    "end": "1417440"
  },
  {
    "text": "creating here is once again asher's dns cname record telling azure that i want a new cname",
    "start": "1417440",
    "end": "1423120"
  },
  {
    "text": "record this is the name of the record that i want which is going to be the the name of the environment and then i",
    "start": "1423120",
    "end": "1428960"
  },
  {
    "text": "happen to have my dns in azure already and the dns zone that i'm working with is placed",
    "start": "1428960",
    "end": "1434080"
  },
  {
    "text": "in the resource group called dns set the time to live so name is going to be xerocode.com for this so so my",
    "start": "1434080",
    "end": "1440400"
  },
  {
    "text": "address is going to be azurepagesdemo.0call and then i tell it what target resource",
    "start": "1440400",
    "end": "1447039"
  },
  {
    "text": "to use so basically point towards my cdn endpoint and finally i tell it that the",
    "start": "1447039",
    "end": "1453039"
  },
  {
    "text": "parent for this thing is the the endpoint so unless i have the endpoint this thing can't be used so i",
    "start": "1453039",
    "end": "1458320"
  },
  {
    "text": "need to wait for that to be created so that's automatically going to create a cnn record for me so now i have the",
    "start": "1458320",
    "end": "1463360"
  },
  {
    "text": "cname record and i've got the cdn but i need to connect those two and there's a little problem with that",
    "start": "1463360",
    "end": "1468880"
  },
  {
    "text": "that is not supported by kaloomi out of the box but i googled it and there's a demo for that so on github there's a bit of code",
    "start": "1468880",
    "end": "1475440"
  },
  {
    "text": "that demos how to connect those two using pollumi stuff so i copied that code i was going to",
    "start": "1475440",
    "end": "1482159"
  },
  {
    "text": "create a new class here cdncustomdomain.ts so i just copied that code and yes i'm",
    "start": "1482159",
    "end": "1488320"
  },
  {
    "text": "sorry there's a lot of code here but it's all just copied from from a github page i just googled cdn custom",
    "start": "1488320",
    "end": "1494960"
  },
  {
    "text": "domain bloomy and i got this so i copied this code here and it shows us how we can create custom",
    "start": "1494960",
    "end": "1501440"
  },
  {
    "text": "things in gloomy as well so if it's not supported we can add our own implementation which is really cool",
    "start": "1501440",
    "end": "1506799"
  },
  {
    "text": "and once i've got that in place we can go and use that so i'm just going to do bloomy",
    "start": "1506799",
    "end": "1514240"
  },
  {
    "text": "me 10. i'm going to create a new custom domain resource that needs to be imported so we'll do",
    "start": "1514240",
    "end": "1520720"
  },
  {
    "text": "import from dot slash",
    "start": "1520720",
    "end": "1525919"
  },
  {
    "text": "it doesn't find it for some reason cdn custom domain dot just like that and then we'll do",
    "start": "1525919",
    "end": "1533200"
  },
  {
    "text": "cdn custom domain resource so this is a custom domain resource thing is it's a custom built",
    "start": "1533200",
    "end": "1538960"
  },
  {
    "text": "below me resource it says what domain to use the cdn profile the cdn endpoint the",
    "start": "1538960",
    "end": "1544640"
  },
  {
    "text": "https enabled because i only want to https what resource group everything",
    "start": "1544640",
    "end": "1549760"
  },
  {
    "text": "is put in and then adds a parent on that one as well saying that hey this cannot run without the cname record",
    "start": "1549760",
    "end": "1556320"
  },
  {
    "text": "so this actually defines everything i need i got the storage i've got the cdn i've got the the cname record i got the",
    "start": "1556320",
    "end": "1563600"
  },
  {
    "text": "cdn custom domain set up that's all i need from from from my blooming stuff except for",
    "start": "1563600",
    "end": "1571039"
  },
  {
    "text": "one thing down here at the end oh i need one more thing sorry i need one",
    "start": "1571039",
    "end": "1577520"
  },
  {
    "text": "thing here i need pollumi that thing so i need the urls i just want the cname records fully qualified",
    "start": "1577520",
    "end": "1583039"
  },
  {
    "text": "domain name adding https colon slash slash to it and removing the last point last thing because it adds a dot",
    "start": "1583039",
    "end": "1590240"
  },
  {
    "text": "at the end for some reason and then out here in my index i'm going to go",
    "start": "1590240",
    "end": "1595279"
  },
  {
    "text": "i'm just going to go and export some some properties and everything you export from your index.ps file in",
    "start": "1595279",
    "end": "1601200"
  },
  {
    "text": "pollumi is going to get added to the state for for your stack so that you can then go and say hey",
    "start": "1601200",
    "end": "1606799"
  },
  {
    "text": "for my stackdev can you please give me the latest staging storage url or can you give me the staging url and so on it",
    "start": "1606799",
    "end": "1613679"
  },
  {
    "text": "all gets saved with your state which is nice and it gets output on screen now that i",
    "start": "1613679",
    "end": "1619919"
  },
  {
    "text": "have my polymer stuff i can go back out here and i can say pull me up basically bring up my environment for me",
    "start": "1619919",
    "end": "1627840"
  },
  {
    "text": "it's now going to go through all of my code and it's going to look at the code right generator so it's going to run my",
    "start": "1628080",
    "end": "1635278"
  },
  {
    "text": "typescript and see whatever my touchscreen generates and compare that to the current state",
    "start": "1635360",
    "end": "1640640"
  },
  {
    "text": "which is nothing and it figures out hey i need to create this and 11 other resources so here's a bunch",
    "start": "1640640",
    "end": "1647039"
  },
  {
    "text": "of resources that we need to create we can look at the details or we can just go yes please create those for me",
    "start": "1647039",
    "end": "1652159"
  },
  {
    "text": "and then bloom is going to go into the background and do its thing and and just create all the resources",
    "start": "1652159",
    "end": "1658000"
  },
  {
    "text": "that we need and that's going to take a little while so while that runs i'm going to go back to visual studio code",
    "start": "1658000",
    "end": "1663200"
  },
  {
    "text": "and i'm going to go and i'm going to pull up the terminal here i need another terminal then i'm going",
    "start": "1663200",
    "end": "1668880"
  },
  {
    "text": "to say git clone and i do think i've got that in here that's the one so i'm going to clone my actual website",
    "start": "1668880",
    "end": "1675360"
  },
  {
    "text": "this is my regular website that i run today on github io i'm going to move it over to this",
    "start": "1675360",
    "end": "1680720"
  },
  {
    "text": "at some point and that downloads the whole website for me i'm just going to do",
    "start": "1680720",
    "end": "1687039"
  },
  {
    "text": "i'm going to remove the dot git folder",
    "start": "1687039",
    "end": "1691919"
  },
  {
    "text": "recurse so i'm just going to remove because i don't want that to be git repo um it just it comes with my package so",
    "start": "1692640",
    "end": "1699039"
  },
  {
    "text": "this is my website it has the markdown for my posts it's got the layouts for my my the looks and feel of my website",
    "start": "1699039",
    "end": "1707760"
  },
  {
    "text": "i just need to make one little change here and that's by default the links in my in in jekyll doesn't",
    "start": "1707760",
    "end": "1714799"
  },
  {
    "text": "contain html at the end which causes some problems with running it in uh storage so i'm just going to say",
    "start": "1714799",
    "end": "1722399"
  },
  {
    "text": "hey can you please add html to all the links inside of your application on this application that makes life a lot easier for me so that's the",
    "start": "1722399",
    "end": "1730320"
  },
  {
    "text": "only change i'm doing i'm changing that link thing and then i'm going to go and i'm going to create a new repo",
    "start": "1730320",
    "end": "1737440"
  },
  {
    "text": "there it is and i'm just going to do an initial initial commit like that",
    "start": "1737440",
    "end": "1744320"
  },
  {
    "text": "add that um so now i've got my code i've got polomi setting up the",
    "start": "1744320",
    "end": "1750000"
  },
  {
    "text": "res infrastructure i've got my code for my website what i'm going to do is i'm going to go ahead and add an azure pipeline",
    "start": "1750000",
    "end": "1756080"
  },
  {
    "text": "so azure pipelines are yaml based for good and bad i'm not a big fan but",
    "start": "1756080",
    "end": "1761200"
  },
  {
    "text": "that's the way it works so inside here i'm going to go and i'm going to create a pipeline and it's going to have a",
    "start": "1761200",
    "end": "1767520"
  },
  {
    "text": "trigger so basically whenever i push to master it's going to run this pipeline i i set up this variable",
    "start": "1767520",
    "end": "1774000"
  },
  {
    "text": "called azure pages demo because i can use that in different places because that's a variable i'm using in a few places and then i set up three",
    "start": "1774000",
    "end": "1780720"
  },
  {
    "text": "different stages i have a build stage where it generates the website and creates the website static website for me then",
    "start": "1780720",
    "end": "1786320"
  },
  {
    "text": "there's a release to staging that releases it to the staging environment and then there's release to production which will run once i've approved the",
    "start": "1786320",
    "end": "1793360"
  },
  {
    "text": "application running in staging so for building it that's actually not that hard so the",
    "start": "1793360",
    "end": "1800159"
  },
  {
    "text": "build part is going to contain a single job called run jekyll and it has a display name and i'm going",
    "start": "1800159",
    "end": "1806080"
  },
  {
    "text": "to run it on ubuntu i could run it on windows as well because it's still docker it doesn't matter but i'm really",
    "start": "1806080",
    "end": "1811520"
  },
  {
    "text": "running ubuntu in this case because it's default and then i'm going to add some steps in here",
    "start": "1811520",
    "end": "1817440"
  },
  {
    "text": "so we'll do first step run docker and this is this i want to",
    "start": "1817440",
    "end": "1822880"
  },
  {
    "text": "show you this there's a long command in here so what i'm doing is i'm running docker and i'm mapping a couple of volumes in",
    "start": "1822880",
    "end": "1828720"
  },
  {
    "text": "here so i'm mapping the sources directory site which is then obviously going to be my",
    "start": "1828720",
    "end": "1835279"
  },
  {
    "text": "this site here i'm mapping that to a path",
    "start": "1835279",
    "end": "1840799"
  },
  {
    "text": "that's srv jekyll source then i'm mapping another docker volume which is the artifact",
    "start": "1840799",
    "end": "1846880"
  },
  {
    "text": "staging directory in my pipeline to srv jekyll destination",
    "start": "1846880",
    "end": "1852320"
  },
  {
    "text": "then i'm telling jekyll to run rootless otherwise i'm getting some permission issues",
    "start": "1852320",
    "end": "1857840"
  },
  {
    "text": "i'm telling you to run the jekyll docker container docker image i'm telling you",
    "start": "1857840",
    "end": "1863840"
  },
  {
    "text": "the command to run is jekyll build and please build using the sources located in this url",
    "start": "1863840",
    "end": "1869679"
  },
  {
    "text": "which happens to be this that i mapped in so basically it's using the site",
    "start": "1869679",
    "end": "1874880"
  },
  {
    "text": "from my from my repo and destination is srv jekyll",
    "start": "1874880",
    "end": "1880320"
  },
  {
    "text": "destination which is what i've got here so basically i'm telling the container to read from this folder and",
    "start": "1880320",
    "end": "1886320"
  },
  {
    "text": "output it to this folder my artifact staging directory but it does it using a container",
    "start": "1886320",
    "end": "1893200"
  },
  {
    "text": "then once it's been built i'm going to publish my artifacts i'm running a published artifacts telling it to publish the artifact staging directory",
    "start": "1893200",
    "end": "1900000"
  },
  {
    "text": "and i'm naming it site so basically here's the site i put that as an artifact for me once i",
    "start": "1900000",
    "end": "1907039"
  },
  {
    "text": "have my artifact i'm going to go to my release to staging and i'm going to run",
    "start": "1907039",
    "end": "1912240"
  },
  {
    "text": "a job in here but it's actually a deployment job in this case not a build job and it's called deploy",
    "start": "1912240",
    "end": "1918080"
  },
  {
    "text": "to staging i'm running it on windows and the reason for that is that for my releases i am running the azure",
    "start": "1918080",
    "end": "1925360"
  },
  {
    "text": "cli at least for the production one and that doesn't work on linux today so i need to run it on",
    "start": "1925360",
    "end": "1931919"
  },
  {
    "text": "windows so i'm changing vms here so i'm going from ubuntu to windows between my things i'm deploying it to staging which",
    "start": "1931919",
    "end": "1939600"
  },
  {
    "text": "is an environment which is just a tag name of something and i'm going to run a run once deployment",
    "start": "1939600",
    "end": "1946159"
  },
  {
    "text": "with a couple of steps and i'm gonna run it's actually just one step so for so for",
    "start": "1946159",
    "end": "1953600"
  },
  {
    "text": "uh the the staging deployment um i'm actually just doing a published",
    "start": "1953600",
    "end": "1958720"
  },
  {
    "text": "website so i'm doing an azure file copy copying everything from my workspace site",
    "start": "1958720",
    "end": "1964080"
  },
  {
    "text": "which is the stuff that i generated up here this thing here and i'm popping that to an azure blob",
    "start": "1964080",
    "end": "1969519"
  },
  {
    "text": "storage to a the name of the uh the storage account",
    "start": "1969519",
    "end": "1974960"
  },
  {
    "text": "is gonna our storage service is gonna be that and i'm using an azure subscription which i'm gonna",
    "start": "1974960",
    "end": "1980480"
  },
  {
    "text": "set up in devops to say that here is how you access this thing and please copy it to this magical",
    "start": "1980480",
    "end": "1985679"
  },
  {
    "text": "container which you have to use when you use building a a website or a static website in your container",
    "start": "1985679",
    "end": "1991760"
  },
  {
    "text": "or in your storage sorry that's all i have to do so one thing builds it puts it into state",
    "start": "1991760",
    "end": "1996799"
  },
  {
    "text": "and an artifact these publish the staging copies it to uh to my blob storage account and for",
    "start": "1996799",
    "end": "2004720"
  },
  {
    "text": "for production i'm doing pretty much the same thing this this task here is pretty much identical except that i'm copying it to",
    "start": "2004720",
    "end": "2010240"
  },
  {
    "text": "not to a staging name storage account but to the the normal one and then at the end of production i",
    "start": "2010240",
    "end": "2016320"
  },
  {
    "text": "actually do a purge cdn so in here and go back out here now you can see here pelumi is done",
    "start": "2016320",
    "end": "2023039"
  },
  {
    "text": "and one of the things that preliminated it outputs all of my outputs from my exports here and one of those",
    "start": "2023039",
    "end": "2028080"
  },
  {
    "text": "is azure production cdn purge command that was the one that i set up as a property if i copy that and add that in there",
    "start": "2028080",
    "end": "2035200"
  },
  {
    "text": "this thing now knows that once i've deployed to production please purge this cdn which is going to be it takes a while trust me",
    "start": "2035200",
    "end": "2043360"
  },
  {
    "text": "so that's about it that's actually all i need build push to staging push to production",
    "start": "2043360",
    "end": "2050000"
  },
  {
    "text": "purge my my uh cdn i'm gonna go to this and i'm gonna do added um",
    "start": "2050000",
    "end": "2058000"
  },
  {
    "text": "release pipeline because that's what i did yes it now i'm checking in the uh",
    "start": "2058000",
    "end": "2064800"
  },
  {
    "text": "paloomi state as well which is probably not a great idea but hey it works um now i've got that",
    "start": "2064800",
    "end": "2072320"
  },
  {
    "text": "i need to push that somewhere but i don't have anywhere i don't have a repo so i'm going to head out to",
    "start": "2072320",
    "end": "2077760"
  },
  {
    "text": "azure devops i'm going to create a new project in devops a sure pages demo",
    "start": "2077760",
    "end": "2084878"
  },
  {
    "text": "that's going to be private i'm going to create that and hope it doesn't take too long",
    "start": "2084879",
    "end": "2090398"
  },
  {
    "text": "hope it doesn't take too long there it is i'm going to go to my repos it's nice enough to tell me everything i",
    "start": "2091359",
    "end": "2097040"
  },
  {
    "text": "need i'm going to use ssh so i'm going to copy those ssh commands to add my github repo",
    "start": "2097040",
    "end": "2102400"
  },
  {
    "text": "i'm going to go back to my terminal paste in that thing to add my remote to be visual studio and it's",
    "start": "2102400",
    "end": "2109839"
  },
  {
    "text": "going to use push everything for me as well and if we go back to the repost we refresh that you cannot",
    "start": "2109839",
    "end": "2116320"
  },
  {
    "text": "see all of my code is up here sweet so now i have everything in place infrastructure's up and running i've got",
    "start": "2116320",
    "end": "2122880"
  },
  {
    "text": "my code in here my pipeline is written i just need to add it so i'm going to go to pipelines create pipeline and this is a",
    "start": "2122880",
    "end": "2129760"
  },
  {
    "text": "bit weird yeah you go azure private you choose that thing and then as part of your",
    "start": "2129760",
    "end": "2135520"
  },
  {
    "text": "configure you do existing i would have liked that to be the first thing that you select but i don't get to",
    "start": "2135520",
    "end": "2141599"
  },
  {
    "text": "choose i choose my azure pipeline yaml file do continue",
    "start": "2141599",
    "end": "2146640"
  },
  {
    "text": "it's going to look like this so this is what i created and that's all good i'm going to save that while i remember",
    "start": "2146640",
    "end": "2152240"
  },
  {
    "text": "it forgetting to save it and one thing that i mentioned before is that i'm using a couple of things i'm",
    "start": "2152240",
    "end": "2158240"
  },
  {
    "text": "using environments in here and i'm using um an azure subscription i need to",
    "start": "2158240",
    "end": "2164880"
  },
  {
    "text": "configure those in my my devops to get that to work so what i'm going to do is i'm going to go to project settings i'm going to go to",
    "start": "2164880",
    "end": "2173359"
  },
  {
    "text": "service connections and i'm going to create a service connection for azure resource manager service",
    "start": "2173359",
    "end": "2179680"
  },
  {
    "text": "principal automatic i'm going to name it as sure pages demo",
    "start": "2179680",
    "end": "2186079"
  },
  {
    "text": "going to load all of my usher subscriptions and i'm going to use that one i'm going to choose my resource group",
    "start": "2186079",
    "end": "2192079"
  },
  {
    "text": "i'm not switching that that's the one that i want you'd be me and this is now going to",
    "start": "2192079",
    "end": "2199280"
  },
  {
    "text": "identify me and i have rights in that azure account so it's going to set up the connection now i can go and say look at that azure",
    "start": "2199280",
    "end": "2205520"
  },
  {
    "text": "pages demo that's the stuff that that's the resource group that pollumi created for me",
    "start": "2205520",
    "end": "2210640"
  },
  {
    "text": "save that now i have that service connection that my my uh azure pipeline expects to be there",
    "start": "2210640",
    "end": "2220000"
  },
  {
    "text": "hopefully so there it is so now i have my uh my service connection and the second",
    "start": "2220000",
    "end": "2226400"
  },
  {
    "text": "thing that i was using inside my pipeline if you look at the pipeline here we're going to this",
    "start": "2226400",
    "end": "2231760"
  },
  {
    "text": "so that would be me setting up this thing here so azure subscription is",
    "start": "2231760",
    "end": "2236880"
  },
  {
    "text": "now there's one called azure pages demo which is fine the second part is that i'm deploying to production and staging",
    "start": "2236880",
    "end": "2244079"
  },
  {
    "text": "and i don't want to deploy to production straight away i want to have a manual intervention here so i'm going to go to environments and",
    "start": "2244079",
    "end": "2249839"
  },
  {
    "text": "it's already picked up production and staging from my build script or my pipeline so",
    "start": "2249839",
    "end": "2254880"
  },
  {
    "text": "for the production one i'm going to go and i'm going to select approvals and checks",
    "start": "2254880",
    "end": "2260240"
  },
  {
    "text": "i'm going to add an approval and i'm going to add myself in here great that means that before anybody",
    "start": "2260240",
    "end": "2267839"
  },
  {
    "text": "sends anything or deploys anything to production it needs to be approved by all approvers which is made",
    "start": "2267839",
    "end": "2273680"
  },
  {
    "text": "which basically means hey deploy it to to staging that's fine but then once you want to deploy it to",
    "start": "2273680",
    "end": "2278880"
  },
  {
    "text": "production then it needs to be checked first with that in place i should be able to go in here press run pipeline",
    "start": "2278880",
    "end": "2286400"
  },
  {
    "text": "master run that's now going to run generate the websites deploy to staging and then it should stop there and then",
    "start": "2286400",
    "end": "2292800"
  },
  {
    "text": "do deploy to site or display to production while it's doing that which takes a little while i'm actually going to go and fix that",
    "start": "2292800",
    "end": "2299040"
  },
  {
    "text": "last thing i was talking about i want to have commenting in here so i want to be able to add comments to my my blog posts",
    "start": "2299040",
    "end": "2305040"
  },
  {
    "text": "so i'm going to go to my my site um actually no i'm going to go to pollumi first and inside blooming i'm going to",
    "start": "2305040",
    "end": "2311760"
  },
  {
    "text": "create a new file now i'm going to create a get comments handler.ts and the cool thing here is",
    "start": "2311760",
    "end": "2319040"
  },
  {
    "text": "pollumi can set up azure functions for us so that's built into pollumi which i really really",
    "start": "2319040",
    "end": "2324480"
  },
  {
    "text": "really like uh it's a little bit dirty um and and for a real production thing i would probably build my",
    "start": "2324480",
    "end": "2330320"
  },
  {
    "text": "my uh functions separately in its own project but for quick little things like this this is actually quite",
    "start": "2330320",
    "end": "2336560"
  },
  {
    "text": "cool so what i'm going to do is i'm going to create an azure function here as you see i import http request from",
    "start": "2336560",
    "end": "2342480"
  },
  {
    "text": "azure functions azure storage then i'm creating a constant export here",
    "start": "2342480",
    "end": "2347599"
  },
  {
    "text": "for get comments handler which is a function that takes a context and a request and returns a promise with",
    "start": "2347599",
    "end": "2353599"
  },
  {
    "text": "the response of a status code and some body so i'm creating a new promise",
    "start": "2353599",
    "end": "2358800"
  },
  {
    "text": "getting my connection string to my table storage i'm going to look if it is staging i'll",
    "start": "2358800",
    "end": "2364880"
  },
  {
    "text": "create that method in a second and then depending if it's staging i'm using that environment variable it's",
    "start": "2364880",
    "end": "2370079"
  },
  {
    "text": "going to contain the connection string to my staging environment and for production it's going to be that environment variable",
    "start": "2370079",
    "end": "2375760"
  },
  {
    "text": "then i create a table service so i can talk to table storage then i verify if the table comments",
    "start": "2375760",
    "end": "2381599"
  },
  {
    "text": "exists if it doesn't then i just return empty array because nobody has added a comment yet to the entire web",
    "start": "2381599",
    "end": "2386880"
  },
  {
    "text": "application but if there is a tables com a table called comments i'm going to call this",
    "start": "2386880",
    "end": "2393280"
  },
  {
    "text": "helper method to basically go and recursively get all of the comments for that blog",
    "start": "2393280",
    "end": "2398880"
  },
  {
    "text": "post based on a parameter called post id and then i'm going to return that as an",
    "start": "2398880",
    "end": "2405280"
  },
  {
    "text": "array of json objects containing the comment body the who commented and a",
    "start": "2405280",
    "end": "2410400"
  },
  {
    "text": "timestamp and little helper methods i need here",
    "start": "2410400",
    "end": "2415440"
  },
  {
    "text": "is i got is staging and this is ugly i know but it actually works so basically if there is a header called",
    "start": "2415440",
    "end": "2421280"
  },
  {
    "text": "referrer which there is going to be if the website is making this request uh from a website if it contains staging",
    "start": "2421280",
    "end": "2429040"
  },
  {
    "text": "um as part of the referrer then i'm in the staging environment so i return whether or not that is",
    "start": "2429040",
    "end": "2434319"
  },
  {
    "text": "available if there isn't a referrer then it's going to be true because i don't know that might make sense it could be false",
    "start": "2434319",
    "end": "2440720"
  },
  {
    "text": "as well i don't know i just chose true and to get comments recursively is literally that the problem is that with",
    "start": "2440720",
    "end": "2446880"
  },
  {
    "text": "table service if there's a lot of comments it will not get you all comments straight away so it's going to give you",
    "start": "2446880",
    "end": "2452640"
  },
  {
    "text": "a a set of comments and then you might get a continuation token so basically here",
    "start": "2452640",
    "end": "2457680"
  },
  {
    "text": "is x amount of comments but i'm not going to give you all because there are too many and then i have to go and get them once again",
    "start": "2457680",
    "end": "2462960"
  },
  {
    "text": "so basically recursively every time there's a continuation token i go and ask for the next set and the",
    "start": "2462960",
    "end": "2468240"
  },
  {
    "text": "next set and the next set until i get all the the entries from uh from table storage",
    "start": "2468240",
    "end": "2474240"
  },
  {
    "text": "so that's my comments handler that's going to be one part of it i'm just going to call that and it's going to return all of my um",
    "start": "2474240",
    "end": "2480800"
  },
  {
    "text": "comments as json objects and then i need a add comments",
    "start": "2480800",
    "end": "2488359"
  },
  {
    "text": "handler.ts to actually add stuff because i need to be able to add comments to be able to read them right",
    "start": "2488359",
    "end": "2493760"
  },
  {
    "text": "so i have this handler here it's still once again lots of code but it's it's very very similar",
    "start": "2493760",
    "end": "2498800"
  },
  {
    "text": "add comments handler all of this is exactly the same connection string is the same create table service is the",
    "start": "2498800",
    "end": "2503920"
  },
  {
    "text": "same but it calls a create table if not exist because i always want that table to be",
    "start": "2503920",
    "end": "2509760"
  },
  {
    "text": "there so that i can add my comments to it and once it's added the table i generate",
    "start": "2509760",
    "end": "2515040"
  },
  {
    "text": "this entity to put into my table where the partition key is the the post",
    "start": "2515040",
    "end": "2520240"
  },
  {
    "text": "id so i partition it based on the the identifier of the post that i'm looking",
    "start": "2520240",
    "end": "2525440"
  },
  {
    "text": "at row key is the current date so that i can get them in order",
    "start": "2525440",
    "end": "2530800"
  },
  {
    "text": "and then i have a body and a commenter so my comments are really really simple they're just two strings it's like who",
    "start": "2530800",
    "end": "2536000"
  },
  {
    "text": "commented and what did they say then i insert that into my comments table and once it gets inserted i return to",
    "start": "2536000",
    "end": "2543119"
  },
  {
    "text": "200 and i return my comments in the same format that i would when i get them all in an array that makes it",
    "start": "2543119",
    "end": "2549440"
  },
  {
    "text": "easier for me to work with and it uses the same as staking function down here so now that i have two handers like that",
    "start": "2549440",
    "end": "2556079"
  },
  {
    "text": "they are really nice i love the fact that i can just quickly whip these up and make functions work in azure in a very nice",
    "start": "2556079",
    "end": "2562000"
  },
  {
    "text": "and simple way last thing we need to do is we need to add them to blooming so what we'll do is we'll go to index",
    "start": "2562000",
    "end": "2568160"
  },
  {
    "text": "here and we'll go in i think here and this",
    "start": "2568160",
    "end": "2573920"
  },
  {
    "text": "nope functions functions test one oh need to import them so we're gonna do",
    "start": "2573920",
    "end": "2582000"
  },
  {
    "text": "uh get comments handler that didn't come out why right",
    "start": "2582000",
    "end": "2588319"
  },
  {
    "text": "get comments handler and that's gonna be a get comments handler and then i'm going to add a",
    "start": "2588319",
    "end": "2593920"
  },
  {
    "text": "add comments handler which is going to be add comments okay so i'm just importing what i just created and then you can create",
    "start": "2593920",
    "end": "2599440"
  },
  {
    "text": "http functions using polumi so hey polumi i won't have an azure http function it should be called",
    "start": "2599440",
    "end": "2605359"
  },
  {
    "text": "that so you remember it the route for it should be comments so when somebody posts",
    "start": "2605359",
    "end": "2610400"
  },
  {
    "text": "to that endpoint call this handler here and i want to have a get one as you can see",
    "start": "2610400",
    "end": "2615520"
  },
  {
    "text": "here and it's going to be the route is going to be comments slash and then the post id so i'm going to add the id at the end here",
    "start": "2615520",
    "end": "2621200"
  },
  {
    "text": "and then when if anybody does it get here please call this method here very very simple once i've defined my",
    "start": "2621200",
    "end": "2627839"
  },
  {
    "text": "functions i can then go and say this is another one of these slightly longer pieces but it's not much",
    "start": "2627839",
    "end": "2634480"
  },
  {
    "text": "code it's just very verbose i'm creating what is called a multi-callback function app so that's a",
    "start": "2634480",
    "end": "2640560"
  },
  {
    "text": "thing that pollumi has that supports us to create multiple functions in one app and pollumi will do all the work for us",
    "start": "2640560",
    "end": "2646880"
  },
  {
    "text": "so i'm going to tell it here's the name name the app function app in azure this thing here put it into",
    "start": "2646880",
    "end": "2652560"
  },
  {
    "text": "this resource group that i created up here so my default resource group that thing up here let's name the product name and then here are my",
    "start": "2652560",
    "end": "2659520"
  },
  {
    "text": "functions please add these functions in there set it to only support https because i don't want stuff to fly over http it",
    "start": "2659520",
    "end": "2666640"
  },
  {
    "text": "should always be tls encoded i'm adding some connection strings in here and the cool thing here is when you",
    "start": "2666640",
    "end": "2672079"
  },
  {
    "text": "create a connection string in a function app this name here is going to be the name of the connection string but then",
    "start": "2672079",
    "end": "2677839"
  },
  {
    "text": "depending on what type you're putting in here you end up with as you can see here",
    "start": "2677839",
    "end": "2683119"
  },
  {
    "text": "custom conster underscore that is going to be so it uses that",
    "start": "2683119",
    "end": "2688480"
  },
  {
    "text": "with conster underscore and then the name of the connection string to create the",
    "start": "2688480",
    "end": "2694960"
  },
  {
    "text": "environment variable for you so i'm setting up an environment variable for production one for staging",
    "start": "2694960",
    "end": "2700319"
  },
  {
    "text": "i get the storage connection strings from my pollumi stuff so basically my",
    "start": "2700319",
    "end": "2706160"
  },
  {
    "text": "production environment has a storage connection string so i don't need to know anything i just pick up whatever azure gave me",
    "start": "2706160",
    "end": "2712640"
  },
  {
    "text": "then i i do some configuration here because by default there's no course so i'm telling it that allowed origins",
    "start": "2712640",
    "end": "2718480"
  },
  {
    "text": "are is the production url and the production environment and the staging environment their urls so https colon slash",
    "start": "2718480",
    "end": "2727240"
  },
  {
    "text": "azurepagesdemo.zerocode.com and finally i just make this little change here telling you hey for http",
    "start": "2727240",
    "end": "2733520"
  },
  {
    "text": "functions please don't add a route prefix for me but by default it does add a route prefix which is kind of annoying",
    "start": "2733520",
    "end": "2739119"
  },
  {
    "text": "i don't want that so this is then gonna so what it's gonna do is gonna package up",
    "start": "2739119",
    "end": "2744240"
  },
  {
    "text": "all of these functions into a zip file or a some form of compressed file add it to a",
    "start": "2744240",
    "end": "2749839"
  },
  {
    "text": "blob storage account create a function app and set everything up for me if i go back out here i can bounce again",
    "start": "2749839",
    "end": "2756720"
  },
  {
    "text": "go pollu me up pollumi will now look at",
    "start": "2756720",
    "end": "2761839"
  },
  {
    "text": "what happens when it runs the code i just created and it's going to compare whatever that thing creates compared to",
    "start": "2761839",
    "end": "2768800"
  },
  {
    "text": "what was in state it's going to figure out that hey wait wait these things are new so it's",
    "start": "2768800",
    "end": "2773920"
  },
  {
    "text": "going to say the multi callback function app the it needs a storage account to store the the functions in it",
    "start": "2773920",
    "end": "2779839"
  },
  {
    "text": "it needs an app service plan uh it needs an app service to be able to run them these are automatically configured to",
    "start": "2779839",
    "end": "2785920"
  },
  {
    "text": "the pay as you go paper cpu thingy then it needs a container storage container and a blob storage",
    "start": "2785920",
    "end": "2791680"
  },
  {
    "text": "container or a storage blob to store my my things in i'm just going to go yes this is now",
    "start": "2791680",
    "end": "2798480"
  },
  {
    "text": "going to create my function app for me that's going to take a little while to do and while that run",
    "start": "2798480",
    "end": "2804000"
  },
  {
    "text": "let's look at this so now i'm back in devops and we can see that actually deployed to staging that is kind of cool so what we can do",
    "start": "2804000",
    "end": "2810640"
  },
  {
    "text": "now is go back out here we can say azure pages demo",
    "start": "2810640",
    "end": "2816079"
  },
  {
    "text": "staging serialcolo.com and if i browse to that you can see there are a couple of really cool things here if i refresh",
    "start": "2816079",
    "end": "2821440"
  },
  {
    "text": "this first of all i just generated this this is what i just built",
    "start": "2821440",
    "end": "2826480"
  },
  {
    "text": "i had pollumi built the resources of the infrastructure for me i had azure create the website for me and",
    "start": "2826480",
    "end": "2832079"
  },
  {
    "text": "deployed to to blob storage and as you can see here it's even using tls",
    "start": "2832079",
    "end": "2838319"
  },
  {
    "text": "using a custom domain name and that was azure sorting all that out for me and i can go around here and i can have",
    "start": "2838319",
    "end": "2843520"
  },
  {
    "text": "a look at my my blog posts and they're all working and the links are working and all the code is in here",
    "start": "2843520",
    "end": "2848559"
  },
  {
    "text": "um but the commenting section is missing right so in the background now polumi is setting",
    "start": "2848559",
    "end": "2854000"
  },
  {
    "text": "up we can see that it's setting up my my function app and and almost done",
    "start": "2854000",
    "end": "2859359"
  },
  {
    "text": "what is missing now is the html for my functions or sorry for my comments so i'm going to go into my site i'm",
    "start": "2859359",
    "end": "2865200"
  },
  {
    "text": "going to go to my layouts and to my post this is going to be the layouts that's used for",
    "start": "2865200",
    "end": "2870480"
  },
  {
    "text": "my blog post though um and in here i'm just going to add a few",
    "start": "2870480",
    "end": "2875599"
  },
  {
    "text": "little things i'm going to scroll down here and this is where the content is being added so i'm going down here",
    "start": "2875599",
    "end": "2880960"
  },
  {
    "text": "after my content after my actual blog post i'm going to go ahead and i'm going to add some html i'm adding a section in here",
    "start": "2880960",
    "end": "2888079"
  },
  {
    "text": "comments it's a little form it contains a name and a comment yes people can spam my blog but this is",
    "start": "2888079",
    "end": "2894160"
  },
  {
    "text": "a demo for real purposes i would probably do some capture or something like that in here",
    "start": "2894160",
    "end": "2899280"
  },
  {
    "text": "then i have a little loading thing that's going to be shown before it shows the comments field so basically it's loading comments because that takes a",
    "start": "2899280",
    "end": "2904319"
  },
  {
    "text": "little while because it needs to ask the function then there's a thank you thing that says thank you for a comment that will be",
    "start": "2904319",
    "end": "2909359"
  },
  {
    "text": "shown once it's done with doing the com a comment and then there's a container that contains all of my comments so this is",
    "start": "2909359",
    "end": "2915040"
  },
  {
    "text": "where i'm going to render my comments in there this is going to look pretty crap so i'm going to go and add some styles in here",
    "start": "2915040",
    "end": "2920720"
  },
  {
    "text": "and yes this is all the css that i need just ignore it it makes it look less than ugly at least",
    "start": "2920720",
    "end": "2926839"
  },
  {
    "text": "hopefully and then i'm going to go ahead and i'm going to add a little polyfill in here",
    "start": "2926839",
    "end": "2934079"
  },
  {
    "text": "so in here you see i'm adding a polyfill for fetch so not all browsers supports the fetch",
    "start": "2937119",
    "end": "2943280"
  },
  {
    "text": "api so to be able to support that i'm pulling in a polyfill that will make sure that it works in ie as well",
    "start": "2943280",
    "end": "2949839"
  },
  {
    "text": "it works well in chrome and edge and so on and the page id i was talking about the post id is called in the handler",
    "start": "2949839",
    "end": "2956480"
  },
  {
    "text": "unfortunately is actually this is jekyll syntax for saying get the path to this page which is going to be like the",
    "start": "2956480",
    "end": "2963119"
  },
  {
    "text": "domain name removed and then slash whatever the url is going to be but remove the first slash because i",
    "start": "2963119",
    "end": "2969520"
  },
  {
    "text": "don't want to start with slash so it's just going to be the post name so if i go back out here it's going to be i'm pulling out that as being the",
    "start": "2969520",
    "end": "2975599"
  },
  {
    "text": "identifier for my uh my post and in here i'm going to go and",
    "start": "2975599",
    "end": "2980800"
  },
  {
    "text": "say the first thing that happens when it comes in here it calls fetch to the endpoint slash page id",
    "start": "2980800",
    "end": "2987680"
  },
  {
    "text": "and when i get my my comments back it's going to go and it's going to remove the loading thing so it doesn't",
    "start": "2987680",
    "end": "2993839"
  },
  {
    "text": "say loading comments anymore it's going to show the query form because that's hidden by the css by",
    "start": "2993839",
    "end": "2999040"
  },
  {
    "text": "default and then it's going to go through each one of the comments and add them to the page and the way that it adds it to the page",
    "start": "2999040",
    "end": "3005839"
  },
  {
    "text": "is by running this thing here so it pulls out the the comments container which is",
    "start": "3005839",
    "end": "3011280"
  },
  {
    "text": "that div here and then it calls add pages for the comment and then for each comment it creates a little section",
    "start": "3011280",
    "end": "3017920"
  },
  {
    "text": "adds a css class adds the date at the top so we know when people somebody commented it adds the the body",
    "start": "3017920",
    "end": "3025680"
  },
  {
    "text": "and the commenter to to each one of the comments and it uses this simple html and code thingy to",
    "start": "3025680",
    "end": "3031760"
  },
  {
    "text": "basically remove dangerous characters so we don't get cross-site scripting and stuff like that",
    "start": "3031760",
    "end": "3037760"
  },
  {
    "text": "and then finally i call comments commentscontainer.insertbefore to add the top so it basically fills it from",
    "start": "3037760",
    "end": "3042880"
  },
  {
    "text": "above and pushes everything down so the latest comment is going to be at the top which i find to be the most logical thing in my",
    "start": "3042880",
    "end": "3049200"
  },
  {
    "text": "opinion it might not be who cares it's my blog i decide and finally",
    "start": "3049200",
    "end": "3054960"
  },
  {
    "text": "for this thing here is what was that is what i posted pasted in so for",
    "start": "3054960",
    "end": "3061440"
  },
  {
    "text": "posting so basically adding a comment i'm going to go when the page loads i'm pulling out the query form and i'm going to listen to",
    "start": "3061440",
    "end": "3067359"
  },
  {
    "text": "the submit events because i have a form there's a submit event but i don't want it to submit i want to",
    "start": "3067359",
    "end": "3072480"
  },
  {
    "text": "prevent that from happening so whenever somebody tries to submit the form thus adding a post i'm disabling the submit",
    "start": "3072480",
    "end": "3079839"
  },
  {
    "text": "i'm disabling the form by basically setting all the fields in the form to disabled then i use fetch again to do http calls",
    "start": "3079839",
    "end": "3087760"
  },
  {
    "text": "i do a post i post my my comment the post id the body and the",
    "start": "3087760",
    "end": "3094319"
  },
  {
    "text": "commenter to my azure function and once that comes back and says oh it's been added",
    "start": "3094319",
    "end": "3100400"
  },
  {
    "text": "um that response contains json that is a comment so then i can",
    "start": "3100400",
    "end": "3106240"
  },
  {
    "text": "just go and say hey in that response please go ahead and add the comment i just got back",
    "start": "3106240",
    "end": "3112480"
  },
  {
    "text": "and then also yeah i removed the query form so once you've added a comment i remove the form and i display the thank you note so that",
    "start": "3112480",
    "end": "3119920"
  },
  {
    "text": "anybody who's done added a form or either comment can get a um",
    "start": "3119920",
    "end": "3125760"
  },
  {
    "text": "a thank you okay so that should be good to go oh i need to do one thing why sorry um i",
    "start": "3127359",
    "end": "3133760"
  },
  {
    "text": "forgot this i need to approve this obviously so i'm going to go into this thing i'm going to review it because i",
    "start": "3133760",
    "end": "3138880"
  },
  {
    "text": "think it was okay i'm going to prove that to to deploy to production okay sorry about that so now my my old",
    "start": "3138880",
    "end": "3144400"
  },
  {
    "text": "version is going to production this is going to be my new version this is my my version with comment and",
    "start": "3144400",
    "end": "3150000"
  },
  {
    "text": "support so i'm going to go to this thing here i'm going to add the commenting support",
    "start": "3150000",
    "end": "3158079"
  },
  {
    "text": "like that and then i'm going to go out here and i'm going to say git push",
    "start": "3158079",
    "end": "3166480"
  },
  {
    "text": "that's going to push everything through and unfortunately i now obviously should",
    "start": "3166480",
    "end": "3171839"
  },
  {
    "text": "have done this a little bit earlier because this takes a little while for it to run but what's going to happen now if we look at the pipelines i'm going to have my azure",
    "start": "3171839",
    "end": "3178319"
  },
  {
    "text": "pages pipeline one of them is currently deploying to production so that will be the one without",
    "start": "3178319",
    "end": "3184720"
  },
  {
    "text": "commenting functionality and then i have another run waiting here to deploy to staging",
    "start": "3184720",
    "end": "3190000"
  },
  {
    "text": "which is queued because this thing is running here i go into this i look into this it is",
    "start": "3190000",
    "end": "3195839"
  },
  {
    "text": "now going into purge cdn which is kind of annoying because that does take a few minutes and because of that i'm actually going",
    "start": "3195839",
    "end": "3201200"
  },
  {
    "text": "to see if i can cancel this so it doesn't purge the cdn because i don't need that for this",
    "start": "3201200",
    "end": "3207119"
  },
  {
    "text": "hopefully i can get this to to stop doing the purge and instead go ahead and deploy my new version in here but while that",
    "start": "3207119",
    "end": "3214960"
  },
  {
    "text": "i'm waiting for this thing to deploy my new version to production i can go back out here we can go",
    "start": "3214960",
    "end": "3220400"
  },
  {
    "text": "to azurepagesdemo.tyrocal.com and there it is here i have my production version of my",
    "start": "3220400",
    "end": "3226880"
  },
  {
    "text": "website up and running and i can click on things i can navigate around but once again as i said it doesn't have",
    "start": "3226880",
    "end": "3233040"
  },
  {
    "text": "the commenting so i do need my comments to go out and i should have had that down here in",
    "start": "3233040",
    "end": "3238720"
  },
  {
    "text": "my staging so hopefully now we can see that my my new version is",
    "start": "3238720",
    "end": "3244079"
  },
  {
    "text": "is up and running so we've got running jekyll here now that should",
    "start": "3244079",
    "end": "3249200"
  },
  {
    "text": "hopefully pretty soon come on",
    "start": "3249200",
    "end": "3255200"
  },
  {
    "text": "do a little dance here um come on so this is now going to run jekyll it's going to generate my code add my code to",
    "start": "3257280",
    "end": "3264720"
  },
  {
    "text": "a a build artifact",
    "start": "3264720",
    "end": "3270078"
  },
  {
    "text": "see if i can oh there it is it locks up for some reason so now generated aside and then deploying to production",
    "start": "3271200",
    "end": "3277280"
  },
  {
    "text": "we can see that is now starting it's funny how this thing kind of locks",
    "start": "3277280",
    "end": "3283040"
  },
  {
    "text": "up once in a while which i don't really know why this is doing pre-job publish site",
    "start": "3283040",
    "end": "3293760"
  },
  {
    "text": "it downloads my artifact for me which is done automatically here is all of this dust that was generated for me by",
    "start": "3293760",
    "end": "3299119"
  },
  {
    "text": "my jekyll script or my jekyll container now it does a published site which",
    "start": "3299119",
    "end": "3304160"
  },
  {
    "text": "should be pretty fast come on",
    "start": "3304160",
    "end": "3308880"
  },
  {
    "text": "come on i i'm kind of jealous of people who work in",
    "start": "3312160",
    "end": "3317440"
  },
  {
    "text": "devops and can for in in some way accept to sit and",
    "start": "3317440",
    "end": "3322559"
  },
  {
    "text": "watch the screen while it's doing things because i i'm doing been doing devops stuff for a while now uh",
    "start": "3322559",
    "end": "3328079"
  },
  {
    "text": "for different projects and it it's kind of this wait period when you just sit there and you look at the thing and you go come on",
    "start": "3328079",
    "end": "3334640"
  },
  {
    "text": "it shouldn't be that hard it should be done by now but apparently i should just calm down and accept the",
    "start": "3334640",
    "end": "3341040"
  },
  {
    "text": "fact that things do take a little bit of time as soon as this starts running it's",
    "start": "3341040",
    "end": "3346720"
  },
  {
    "text": "actually very very fast because the file copy is fast but it needs to run it for me",
    "start": "3346720",
    "end": "3353839"
  },
  {
    "text": "come on",
    "start": "3353839",
    "end": "3356240"
  },
  {
    "text": "okay um generally it doesn't take this long",
    "start": "3360839",
    "end": "3368880"
  },
  {
    "text": "that part should be like really really fast because all it should really do is run a publish to",
    "start": "3369440",
    "end": "3376720"
  },
  {
    "text": "my container and it should be done publish to my blob blob storage here it",
    "start": "3376720",
    "end": "3382960"
  },
  {
    "text": "is notice it's installed my my powershell stuff that i need sets up the ushers",
    "start": "3382960",
    "end": "3391280"
  },
  {
    "text": "resource manager context it does an ac copy copies my entire website to",
    "start": "3391280",
    "end": "3397599"
  },
  {
    "text": "the end and there it is now it's deployed and if we go back out here we can now see that there's a deploy to",
    "start": "3397599",
    "end": "3403040"
  },
  {
    "text": "site deploy site to production waiting if i go back out here and here i can show you this as well so",
    "start": "3403040",
    "end": "3408799"
  },
  {
    "text": "what we can do is we can do bloomy stack output and we can pull up",
    "start": "3408799",
    "end": "3414400"
  },
  {
    "text": "the values so everything that was exported from my paloma script is now available in here and the production or staging",
    "start": "3414400",
    "end": "3421119"
  },
  {
    "text": "url is that i can copy that so we can get all of these old values so when you get order generated things you can just",
    "start": "3421119",
    "end": "3427280"
  },
  {
    "text": "output them like this we can pull them out again and there it is it's all safe it's secure tls is turned on and if i scroll",
    "start": "3427280",
    "end": "3433359"
  },
  {
    "text": "down through my web application here at the end here there are my comments somebody has",
    "start": "3433359",
    "end": "3440880"
  },
  {
    "text": "already added a comment that was really really fast of you chuck norris is ridiculously fast so for",
    "start": "3440880",
    "end": "3446240"
  },
  {
    "text": "the rest of you i can show you that",
    "start": "3446240",
    "end": "3450160"
  },
  {
    "text": "i'm i'm gonna get killed now i know but uh chuck norris is gonna find me in my sleep and freddy krueger me but there it",
    "start": "3451280",
    "end": "3457520"
  },
  {
    "text": "is so and i get this thank you for your comment thing and if i reload you can",
    "start": "3457520",
    "end": "3462880"
  },
  {
    "text": "see here it takes a little while but it's actually really really fast it does take a little while once your your",
    "start": "3462880",
    "end": "3468960"
  },
  {
    "text": "functions have spun down because they haven't been used in a while it does take a few seconds for it to show the comments but it's it's pretty fast and",
    "start": "3468960",
    "end": "3474720"
  },
  {
    "text": "now it's it's really really fast in here so that is everything and if i ever wanted to run this uh you do get an",
    "start": "3474720",
    "end": "3481440"
  },
  {
    "text": "email as well and you just go in you look at the email you go hey review this was fine approve and then all of a sudden it's",
    "start": "3481440",
    "end": "3486880"
  },
  {
    "text": "going to start deploying to production with that nice feature of doing a cdn purge at the end so even if",
    "start": "3486880",
    "end": "3493440"
  },
  {
    "text": "there's a 10 minute cdn delay on it it will purge that cdn which takes about",
    "start": "3493440",
    "end": "3498720"
  },
  {
    "text": "10 minutes so i don't know if it's actually valuable but if you add a longer timeout to your cdn",
    "start": "3498720",
    "end": "3504880"
  },
  {
    "text": "then purging it at the end actually makes a lot of sense so basically we have now seen that using",
    "start": "3504880",
    "end": "3512319"
  },
  {
    "text": "pollumi we can create our infrastructure as real code which is really nice it gives us a lot of flexibility and cool things",
    "start": "3512319",
    "end": "3517760"
  },
  {
    "text": "we can do and then once we had pollumi set up our our infrastructure we could then use",
    "start": "3517760",
    "end": "3523839"
  },
  {
    "text": "azure pipelines to build things for us and since i don't know jekyll very well there's a nice docker container i'll",
    "start": "3523839",
    "end": "3529599"
  },
  {
    "text": "just use that and that will do this static generation for me so i really love this new idea of hey i've",
    "start": "3529599",
    "end": "3536640"
  },
  {
    "text": "got this thing that i want to build let's look at what services we have how we can plug them together and how we",
    "start": "3536640",
    "end": "3541680"
  },
  {
    "text": "can get them to build whatever we need by just plugging things together and configuring them",
    "start": "3541680",
    "end": "3548079"
  },
  {
    "text": "and a little bit less code which is i guess both good and bad that was pretty much my entire demo uh",
    "start": "3548079",
    "end": "3555359"
  },
  {
    "text": "my presentation i hope you enjoyed it i hope it gave you some ideas of what you can do if you have any questions feel free to",
    "start": "3555359",
    "end": "3561359"
  },
  {
    "text": "reach out um i don't know if we have any questions let's see is there a chat in here",
    "start": "3561359",
    "end": "3568640"
  }
]