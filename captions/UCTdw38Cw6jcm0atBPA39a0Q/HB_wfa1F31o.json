[
  {
    "text": "all right welcome so in this talk uh we are going to have some fun with frida and we are",
    "start": "6319",
    "end": "12719"
  },
  {
    "text": "going to be implementing a debugger what you see on the left here and we're going to",
    "start": "12719",
    "end": "18400"
  },
  {
    "text": "inject code into a process on the right we don't have the source code for or we",
    "start": "18400",
    "end": "23840"
  },
  {
    "text": "we do in this case in the first case and we don't necessarily have the source code for the one on the right",
    "start": "23840",
    "end": "30640"
  },
  {
    "text": "and what frida is going to do is going to um allocate a bootstrapper some",
    "start": "30640",
    "end": "37280"
  },
  {
    "text": "some memory in the remote process that's going to contain some code",
    "start": "37280",
    "end": "42320"
  },
  {
    "text": "then it's going to start thread that runs our code and then that thread is going to load",
    "start": "42320",
    "end": "47520"
  },
  {
    "text": "a library for the agent that establishes a communications channel back to us",
    "start": "47520",
    "end": "53680"
  },
  {
    "text": "and over that communications channel we can tell it to to evaluate scripts",
    "start": "53680",
    "end": "60160"
  },
  {
    "text": "and those scripts can observe or change behavior so that's kind of friday in a nutshell",
    "start": "60160",
    "end": "66799"
  },
  {
    "text": "i don't have time to do a more thorough intro than that in this talk but you'll",
    "start": "66799",
    "end": "71840"
  },
  {
    "text": "see later in the talk that we will",
    "start": "71840",
    "end": "76960"
  },
  {
    "text": "have some failures along the way",
    "start": "76960",
    "end": "80640"
  },
  {
    "text": "all right so one of the new features in frida 15 is",
    "start": "82400",
    "end": "87840"
  },
  {
    "text": "that there is moved the protocols",
    "start": "87840",
    "end": "93280"
  },
  {
    "text": "to websocket [Music] and this means you can actually write",
    "start": "93280",
    "end": "98320"
  },
  {
    "text": "that debugger with web technologies without having to write any middleware",
    "start": "98320",
    "end": "104079"
  },
  {
    "text": "so you can just go straight and then do prototyping and it also opens up",
    "start": "104079",
    "end": "110320"
  },
  {
    "text": "that means you can build collaborative applications as well but anyway",
    "start": "110320",
    "end": "115360"
  },
  {
    "text": "let's just dive in and try to build a single page app",
    "start": "115360",
    "end": "121920"
  },
  {
    "text": "so we'll start with uh let's add boilerplate so npx knocks it in the demo",
    "start": "122079",
    "end": "129679"
  },
  {
    "text": "uh we're going to use knox js which is similar to next.js for those familiar with that but for vue instead of",
    "start": "129679",
    "end": "136400"
  },
  {
    "text": "react so that gives us a tiny plate",
    "start": "136400",
    "end": "143040"
  },
  {
    "text": "so i'm gonna cheat and copy in a log file",
    "start": "143040",
    "end": "148800"
  },
  {
    "text": "this means that my system won't have to",
    "start": "148800",
    "end": "156640"
  },
  {
    "text": "it can use the dependencies or it has in its cache so this will go a bit faster",
    "start": "156640",
    "end": "162160"
  },
  {
    "text": "right so then we're going to add some things some ui components and ui",
    "start": "162160",
    "end": "169280"
  },
  {
    "text": "libraries ui toolkit libraries",
    "start": "169280",
    "end": "173200"
  },
  {
    "text": "and there we go and then let's have a look at this code that it generated reverse the spoiler",
    "start": "179760",
    "end": "185840"
  },
  {
    "text": "plate um",
    "start": "185840",
    "end": "189440"
  },
  {
    "text": "what is this um yeah so it generates a package json",
    "start": "191920",
    "end": "197959"
  },
  {
    "text": "uh yeah pretty minimal um and uh there's a typescript config for",
    "start": "198640",
    "end": "205360"
  },
  {
    "text": "the touchscreen compiler it's empty just higher some defaults but it has a tiny app so",
    "start": "205360",
    "end": "211519"
  },
  {
    "text": "uh remove it yeah so let's just do fire it up and okay we'll have a look at",
    "start": "211519",
    "end": "218640"
  },
  {
    "text": "what it looks like so yeah that's it we can now drop in some actual code here",
    "start": "218640",
    "end": "227400"
  },
  {
    "text": "so let's start by adding a ui toolkit not ui toolkit [Music]",
    "start": "227840",
    "end": "234879"
  },
  {
    "text": "to a component library i mean so we're gonna just pick",
    "start": "234879",
    "end": "241840"
  },
  {
    "text": "element plus in this case these choices are kind of arbitrary i've",
    "start": "242159",
    "end": "247519"
  },
  {
    "text": "just had fun playing with new things before the conference and",
    "start": "247519",
    "end": "252720"
  },
  {
    "text": "this worked in the end so i went for that so we're gonna install an exact version",
    "start": "252720",
    "end": "258799"
  },
  {
    "text": "of that package since uh uh i don't want any surprises uh",
    "start": "258799",
    "end": "264720"
  },
  {
    "text": "okay uh yeah so we've added that uh now we're just gonna need",
    "start": "264720",
    "end": "271040"
  },
  {
    "text": "to drop in the plugin to plug that into the",
    "start": "271040",
    "end": "276160"
  },
  {
    "text": "the client side so element plus uh and that's gonna import define next",
    "start": "276160",
    "end": "284240"
  },
  {
    "text": "plugin from [Music]",
    "start": "284240",
    "end": "288909"
  },
  {
    "text": "import element plus from plus import",
    "start": "289680",
    "end": "296080"
  },
  {
    "text": "element plus slash theme chalk slash index.css okay boring boilerplate export",
    "start": "296080",
    "end": "302560"
  },
  {
    "text": "default define next plugin and that gives us context",
    "start": "302560",
    "end": "308960"
  },
  {
    "text": "and contextview app use element plus",
    "start": "308960",
    "end": "315120"
  },
  {
    "text": "uh so now we have plugged the component library into vu",
    "start": "315120",
    "end": "320720"
  },
  {
    "text": "so the the components are available here in the mark up here and also the css is",
    "start": "320720",
    "end": "326080"
  },
  {
    "text": "included um we will also need to do one more thing and disable server side rendering in",
    "start": "326080",
    "end": "332160"
  },
  {
    "text": "this case because this component kit is not compatible with it yet",
    "start": "332160",
    "end": "338160"
  },
  {
    "text": "and now let's go and add a component from this so we'll do it",
    "start": "338160",
    "end": "343400"
  },
  {
    "text": "[Music] l button so element button type",
    "start": "343400",
    "end": "350560"
  },
  {
    "text": "primary uh hello",
    "start": "350880",
    "end": "357520"
  },
  {
    "text": "okay let's talk look at that i think i'll have to restart the dev",
    "start": "357520",
    "end": "364000"
  },
  {
    "text": "server since i had its plugin",
    "start": "364000",
    "end": "367840"
  },
  {
    "text": "maybe i messed up something nope",
    "start": "370319",
    "end": "375160"
  },
  {
    "text": "yeah that's our button so we have that",
    "start": "382720",
    "end": "388240"
  },
  {
    "text": "now now let's create a ui skeleton before we",
    "start": "388240",
    "end": "394000"
  },
  {
    "text": "actually implement the logic um so we're going to add a bunch of more",
    "start": "394000",
    "end": "400319"
  },
  {
    "text": "stuff so",
    "start": "400319",
    "end": "405640"
  },
  {
    "text": "[Music] have a div and uh if we are uh",
    "start": "405640",
    "end": "413120"
  },
  {
    "text": "disconnected uh then we're gonna have some logic here that logic and we're gonna have to",
    "start": "413360",
    "end": "418479"
  },
  {
    "text": "mark up here um and then else",
    "start": "418479",
    "end": "424720"
  },
  {
    "text": "this should be in loading if we're connecting and the loading text",
    "start": "425520",
    "end": "432000"
  },
  {
    "text": "should be connecting um",
    "start": "432000",
    "end": "437440"
  },
  {
    "text": "and then um yeah",
    "start": "437440",
    "end": "443520"
  },
  {
    "text": "so let's actually say a bit of time i'm not just copying",
    "start": "443520",
    "end": "450800"
  },
  {
    "text": "so we're going to have a view top view uh we were where we handled the",
    "start": "450800",
    "end": "455919"
  },
  {
    "text": "disconnected state when we're not connected to free a server and we're going to have a connected or connecting",
    "start": "455919",
    "end": "461599"
  },
  {
    "text": "part here and then we're going to show a table or some metrics and then we're going to divide her in a button",
    "start": "461599",
    "end": "467919"
  },
  {
    "text": "and the button has now as a label with attack so you might already have guessed that",
    "start": "467919",
    "end": "473759"
  },
  {
    "text": "this is a game we're going to be instrumenting that is the process on the right",
    "start": "473759",
    "end": "479840"
  },
  {
    "text": "so we're going to need some logic so wire that up",
    "start": "481199",
    "end": "488240"
  },
  {
    "text": "and um [Music]",
    "start": "488240",
    "end": "494160"
  },
  {
    "text": "so we're gonna import define component from",
    "start": "494160",
    "end": "499919"
  },
  {
    "text": "uh [Music] and um we're gonna yeah we're gonna actually",
    "start": "499919",
    "end": "507360"
  },
  {
    "text": "define the component our own component so we're gonna do export default define component",
    "start": "507360",
    "end": "515120"
  },
  {
    "text": "uh name up uh and then now this uh them",
    "start": "515120",
    "end": "520640"
  },
  {
    "text": "here uh our ui components actually refer to things that don't exist so we're gonna wire those up",
    "start": "520640",
    "end": "526800"
  },
  {
    "text": "uh so we're gonna have some computed properties uh so we're gonna have a store where",
    "start": "526800",
    "end": "533600"
  },
  {
    "text": "actually the data is coming from so we're going to do import map state map actions",
    "start": "533600",
    "end": "540240"
  },
  {
    "text": "from vrx and pretend that we have a store we're going",
    "start": "540240",
    "end": "546080"
  },
  {
    "text": "to implement it next the computed ones we're going to just map the state that",
    "start": "546080",
    "end": "551200"
  },
  {
    "text": "we're going to have in the store so we're going to show status some metrics",
    "start": "551200",
    "end": "556640"
  },
  {
    "text": "and uh if there's an error and methods so that like when you hit the",
    "start": "556640",
    "end": "563200"
  },
  {
    "text": "attack button here uh we're gonna expose some of those so we're gonna map actions meaning that",
    "start": "563200",
    "end": "569279"
  },
  {
    "text": "when there's when one of those events fires it turns into an action on the store",
    "start": "569279",
    "end": "576480"
  },
  {
    "text": "so we can implement that so it transforms the state or does something useful um",
    "start": "577200",
    "end": "584399"
  },
  {
    "text": "and when we're setting up we're gonna get the store and we're gonna actually dispatch",
    "start": "584720",
    "end": "590160"
  },
  {
    "text": "a connect action to it so it starts connecting to the server automatically",
    "start": "590160",
    "end": "596640"
  },
  {
    "text": "yeah so we just need to now implement the store",
    "start": "596640",
    "end": "601360"
  },
  {
    "text": "so let's do that um so there's some boilerplate uh that has",
    "start": "602399",
    "end": "609760"
  },
  {
    "text": "to do with typings okay we're type script uh use star space",
    "start": "609760",
    "end": "616079"
  },
  {
    "text": "star create star",
    "start": "616079",
    "end": "619839"
  },
  {
    "text": "um that means we need to have an injection",
    "start": "622160",
    "end": "627279"
  },
  {
    "text": "key to start our state uh",
    "start": "627279",
    "end": "633120"
  },
  {
    "text": "but yeah we have need the function view store which we are which we imported from the the component",
    "start": "633120",
    "end": "640000"
  },
  {
    "text": "the app component uh and that's gonna do base return base use store key which is going to get",
    "start": "640000",
    "end": "646560"
  },
  {
    "text": "look up the instance of the store and now let's actually implement the state define the state that we want in the",
    "start": "646560",
    "end": "652320"
  },
  {
    "text": "store so we have a status we're either disconnected connecting",
    "start": "652320",
    "end": "658399"
  },
  {
    "text": "or we're connected and we have some metrics",
    "start": "658399",
    "end": "663440"
  },
  {
    "text": "perhaps and we'll have an error maybe and",
    "start": "663440",
    "end": "669760"
  },
  {
    "text": "the metrics they have a label and a",
    "start": "671760",
    "end": "678560"
  },
  {
    "text": "value so each metric has a label on the value and then we'll actually have the store",
    "start": "678640",
    "end": "688040"
  },
  {
    "text": "so yeah and the store",
    "start": "688959",
    "end": "694079"
  },
  {
    "text": "needs to initialize the state that we defined above so the status there will be disconnected",
    "start": "694079",
    "end": "699839"
  },
  {
    "text": "initially and the metrics will be empty and they probably know",
    "start": "699839",
    "end": "706879"
  },
  {
    "text": "and then we'll have some actions so when you click a button in the ui like the attack button or the component",
    "start": "708079",
    "end": "715600"
  },
  {
    "text": "starts up it will do the connect action so that will commit",
    "start": "715600",
    "end": "720639"
  },
  {
    "text": "so actually actions connect",
    "start": "720639",
    "end": "726020"
  },
  {
    "text": "[Music] it's given a context here",
    "start": "726020",
    "end": "732639"
  },
  {
    "text": "and then that is given a state and a commit meaning it can look at the state and commit",
    "start": "732639",
    "end": "739839"
  },
  {
    "text": "mutations mutations change the state",
    "start": "739839",
    "end": "744240"
  },
  {
    "text": "so now",
    "start": "745360",
    "end": "750720"
  },
  {
    "text": "um right so we're going to need some",
    "start": "750720",
    "end": "756720"
  },
  {
    "text": "some mutations um and those uh actually change the state so set",
    "start": "756720",
    "end": "762880"
  },
  {
    "text": "disconnected disconnected set connection so",
    "start": "762880",
    "end": "768720"
  },
  {
    "text": "um i'll spare you the the boring typing",
    "start": "768720",
    "end": "774480"
  },
  {
    "text": "and copy little rest there",
    "start": "774480",
    "end": "779199"
  },
  {
    "text": "and i'm going to walk through it so we'll define some mutations we're",
    "start": "779680",
    "end": "785040"
  },
  {
    "text": "going to change to the state that we have the state is here",
    "start": "785040",
    "end": "790880"
  },
  {
    "text": "that's a metric not a matrix and the state is initialized here we",
    "start": "790880",
    "end": "796480"
  },
  {
    "text": "have some actions and we have some mutations we have",
    "start": "796480",
    "end": "801519"
  },
  {
    "text": "so we implement the connect action with just a stub that changes the commits",
    "start": "801519",
    "end": "809200"
  },
  {
    "text": "mutation set connecting uh then it waits one second and sets connected and then another second and",
    "start": "809200",
    "end": "816000"
  },
  {
    "text": "set some dummy metrics just so we can see that the ui actually is wired up correctly",
    "start": "816000",
    "end": "821600"
  },
  {
    "text": "and we also define an attack implementation for the other action that the button that we wired up",
    "start": "821600",
    "end": "828079"
  },
  {
    "text": "and that will take the metrics and uh uh yeah",
    "start": "828079",
    "end": "833839"
  },
  {
    "text": "decrement the value of each and uh when there's less than two",
    "start": "833839",
    "end": "839040"
  },
  {
    "text": "a rows left then it will wait two seconds and just pretend that we disconnected and the mutations are just",
    "start": "839040",
    "end": "844480"
  },
  {
    "text": "changing the state depending on the mutation yeah and we have a sleep helper here and",
    "start": "844480",
    "end": "851920"
  },
  {
    "text": "we have declared uh and this part is just so the",
    "start": "851920",
    "end": "857839"
  },
  {
    "text": "we get type checking so",
    "start": "857839",
    "end": "862880"
  },
  {
    "text": "yeah let's uh maybe try this now",
    "start": "862880",
    "end": "867800"
  },
  {
    "text": "so kind of reproduce on the fire we dispatch some team",
    "start": "876000",
    "end": "883720"
  },
  {
    "text": "i messed up myself this time",
    "start": "893199",
    "end": "897480"
  },
  {
    "text": "so uh let's look at the error so oh the setup function",
    "start": "904320",
    "end": "911519"
  },
  {
    "text": "can reproduce undefined or in dispatch oh okay so store here is returning undefined view store",
    "start": "911519",
    "end": "918399"
  },
  {
    "text": "i forgot something yes yes of course we also need to",
    "start": "918399",
    "end": "924720"
  },
  {
    "text": "plug in this store so it's used actually used so we'll add another client-side plug-in",
    "start": "924720",
    "end": "931450"
  },
  {
    "text": "[Music] same thing we did earlier with the l1",
    "start": "931450",
    "end": "938399"
  },
  {
    "text": "plus and just copy that code but this time we're not going to plug in",
    "start": "938399",
    "end": "944000"
  },
  {
    "text": "that we're going to plug in storing the key from",
    "start": "944000",
    "end": "949839"
  },
  {
    "text": "from our store and then we're gonna",
    "start": "950320",
    "end": "956000"
  },
  {
    "text": "do like use storing key okay and here we go uh",
    "start": "956000",
    "end": "962320"
  },
  {
    "text": "so as you can see it's connecting waiting a bit and then pretending there's some metrics and we can attack",
    "start": "962320",
    "end": "968639"
  },
  {
    "text": "and that just decrements and then now we yeah simulate the disconnection",
    "start": "968639",
    "end": "974800"
  },
  {
    "text": "okay so now we have some boil plate to start and actually add the interesting part uh",
    "start": "974800",
    "end": "980480"
  },
  {
    "text": "our actual instrumentation um but one thing first uh we could maybe",
    "start": "980480",
    "end": "988160"
  },
  {
    "text": "add some styling to make it look a little bit better so we'll just uh quickly",
    "start": "988160",
    "end": "994820"
  },
  {
    "text": "[Music] do that",
    "start": "994820",
    "end": "1000680"
  },
  {
    "text": "so we'll wrap this in another div and we're going to do",
    "start": "1014720",
    "end": "1020480"
  },
  {
    "text": "on a disconnected one we're going to have a class disconnected view and uh",
    "start": "1020480",
    "end": "1026798"
  },
  {
    "text": "then we're gonna add some css just to make it look better uh i won't bother typing that i'll",
    "start": "1026799",
    "end": "1033678"
  },
  {
    "text": "explain it so we'll have an app container that's the outer one we display flex and just",
    "start": "1033679",
    "end": "1039438"
  },
  {
    "text": "center the div inside of it and the cell and then we also for that i have display flex and we have",
    "start": "1039439",
    "end": "1045918"
  },
  {
    "text": "disconnected views and tweaks there and uh now it looks like this",
    "start": "1045919",
    "end": "1051039"
  },
  {
    "text": "it's a bit better [Music] yeah so now we're ready to",
    "start": "1051039",
    "end": "1058480"
  },
  {
    "text": "get to the more interesting bits",
    "start": "1058480",
    "end": "1062919"
  },
  {
    "text": "okay uh so we're going to need some a couple of libraries now",
    "start": "1067600",
    "end": "1074480"
  },
  {
    "text": "so we're going to do yarn at frida web client and frida web shims",
    "start": "1074559",
    "end": "1081440"
  },
  {
    "text": "and that's",
    "start": "1087679",
    "end": "1090559"
  },
  {
    "text": "we're going to use a library here in our dependencies that also runs on node.js so we need a some shims to",
    "start": "1093200",
    "end": "1098960"
  },
  {
    "text": "run in a browser [Music] so we'll just wire that up",
    "start": "1098960",
    "end": "1107559"
  },
  {
    "text": "yeah configuring the build system so we import the shims and then yeah we wire those up",
    "start": "1108160",
    "end": "1115919"
  },
  {
    "text": "meaning that if it imports the fs module node.js module for example it will use a shim for the browser and it's not using",
    "start": "1115919",
    "end": "1122160"
  },
  {
    "text": "that module and now",
    "start": "1122160",
    "end": "1127919"
  },
  {
    "text": "we can actually start wiring this up so",
    "start": "1127919",
    "end": "1135080"
  },
  {
    "text": "all right so we're in the store uh we're gonna just now add the actual logic here",
    "start": "1138799",
    "end": "1146080"
  },
  {
    "text": "so we're gonna import for the web client and we're gonna import later also",
    "start": "1146720",
    "end": "1154400"
  },
  {
    "text": "an agent some code that we will inject into the other process some javascript we'll have that as a separate file",
    "start": "1155200",
    "end": "1161760"
  },
  {
    "text": "to make life a bit easier than having inline javascript inside javascript which gets very confusing it's actually",
    "start": "1161760",
    "end": "1167120"
  },
  {
    "text": "very different code and then now in our state here we're going to have",
    "start": "1167120",
    "end": "1174960"
  },
  {
    "text": "afrida client and we're going to have a script for the script or null and when we're not connected",
    "start": "1174960",
    "end": "1182559"
  },
  {
    "text": "uh so that's the script that gets injected in on the other side represented by that object",
    "start": "1182559",
    "end": "1188559"
  },
  {
    "text": "and now i need to initialize the um so we have the friday client",
    "start": "1188559",
    "end": "1196080"
  },
  {
    "text": "we're going to use localhost on this port that's the default freda",
    "start": "1196880",
    "end": "1202000"
  },
  {
    "text": "server port and script saturn know",
    "start": "1202000",
    "end": "1207360"
  },
  {
    "text": "okay so now we have this connect implementation uh that doesn't do anything right now it's just the dummy",
    "start": "1207360",
    "end": "1212960"
  },
  {
    "text": "so we're gonna remove all that actually we can keep the set connecting part um and same with attack we'll just make",
    "start": "1212960",
    "end": "1220400"
  },
  {
    "text": "it empty so we'll start here um and um now let's",
    "start": "1220400",
    "end": "1226960"
  },
  {
    "text": "do this uh so um",
    "start": "1226960",
    "end": "1232000"
  },
  {
    "text": "on our try catch um and then uh commit",
    "start": "1232000",
    "end": "1238720"
  },
  {
    "text": "if this fails in any way we'll just uh uh well propagate the error let's go to",
    "start": "1238720",
    "end": "1245600"
  },
  {
    "text": "disconnect the state with the error setting the error however",
    "start": "1245600",
    "end": "1251039"
  },
  {
    "text": "let's do let quake free the process or undefined",
    "start": "1251039",
    "end": "1258159"
  },
  {
    "text": "and then have a loop where we do",
    "start": "1258159",
    "end": "1264080"
  },
  {
    "text": "client dot enumerate processes so we'll ask the frida server for the list of processes",
    "start": "1264080",
    "end": "1269840"
  },
  {
    "text": "and then we're going to try to find quake in that list uh i chose this pretty old game because",
    "start": "1269840",
    "end": "1278159"
  },
  {
    "text": "uh things were simple back then so i didn't have to spend much time uh figuring out how to connect to the",
    "start": "1278159",
    "end": "1284640"
  },
  {
    "text": "internals most new games are using unity or something big and complex",
    "start": "1284640",
    "end": "1289840"
  },
  {
    "text": "so save some time there by using quake",
    "start": "1289840",
    "end": "1296080"
  },
  {
    "text": "and if we don't find it",
    "start": "1296080",
    "end": "1301039"
  },
  {
    "text": "yeah this could be improved i mean we could listen to three minutes so uh so uh",
    "start": "1302080",
    "end": "1308080"
  },
  {
    "text": "and then we'll keep doing this while uh quake is undefined so it'll stay in connecting state we could have a",
    "start": "1308080",
    "end": "1313840"
  },
  {
    "text": "different state there to have a better user experience but won't",
    "start": "1313840",
    "end": "1319039"
  },
  {
    "text": "and now that we have found the process we can do",
    "start": "1319200",
    "end": "1325350"
  },
  {
    "text": "[Music] client dot attach to quake speed",
    "start": "1325350",
    "end": "1331520"
  },
  {
    "text": "process id and then once we have a session we can also",
    "start": "1331520",
    "end": "1338480"
  },
  {
    "text": "create a script so now we have established the communications channel",
    "start": "1338480",
    "end": "1343679"
  },
  {
    "text": "and over the communications channel we can do the session create script and here we have the agent",
    "start": "1343679",
    "end": "1350000"
  },
  {
    "text": "that we imported from here so that would be a separate file that we will inject into quake",
    "start": "1350000",
    "end": "1357440"
  },
  {
    "text": "and yeah of course we need to load the script",
    "start": "1357440",
    "end": "1362960"
  },
  {
    "text": "and then set connected",
    "start": "1363360",
    "end": "1369039"
  },
  {
    "text": "with the script we'll also need a little bit of extra",
    "start": "1369039",
    "end": "1374320"
  },
  {
    "text": "logic uh like to handle network errors so",
    "start": "1374320",
    "end": "1380720"
  },
  {
    "text": "we'll hook up a handler to the detached signal on the session and if if we're in connected then",
    "start": "1380960",
    "end": "1390000"
  },
  {
    "text": "well yeah we're gonna turn that enum into",
    "start": "1390000",
    "end": "1395600"
  },
  {
    "text": "a string so and then when we have that",
    "start": "1395600",
    "end": "1403320"
  },
  {
    "text": "i'm going to create a new error with that message",
    "start": "1405600",
    "end": "1410000"
  },
  {
    "text": "so we have that hooked up and for the script before we load it we",
    "start": "1411360",
    "end": "1417200"
  },
  {
    "text": "should also have a message handler because the script can send us messages so if we make a mistake in our javascript there",
    "start": "1417200",
    "end": "1423440"
  },
  {
    "text": "that will turn into a message that we can handle we can also send messages to ourselves like we would want to do here for the",
    "start": "1423440",
    "end": "1429360"
  },
  {
    "text": "metrics that we're going to deliver to the ui uh just bear with me this will get",
    "start": "1429360",
    "end": "1434720"
  },
  {
    "text": "clearer in a bit when we implement that logic we're trying to do this top down so a lot of things are not clear yet",
    "start": "1434720",
    "end": "1443559"
  },
  {
    "text": "so the message callback has a message and",
    "start": "1450880",
    "end": "1456000"
  },
  {
    "text": "if the message type is freedom message type send",
    "start": "1456000",
    "end": "1462080"
  },
  {
    "text": "um then yeah get the payload of that",
    "start": "1462080",
    "end": "1467840"
  },
  {
    "text": "and if the payload type is metrics",
    "start": "1467840",
    "end": "1473760"
  },
  {
    "text": "then we're going to commit set matrix metrics with the payloads metrics",
    "start": "1473760",
    "end": "1482320"
  },
  {
    "text": "um so we handle this message so if we didn't handle it",
    "start": "1482320",
    "end": "1488720"
  },
  {
    "text": "then just console warren",
    "start": "1489600",
    "end": "1493919"
  },
  {
    "text": "okay um yeah uh we load uh we got connected",
    "start": "1498559",
    "end": "1505760"
  },
  {
    "text": "uh and um yeah and for the attack action we're",
    "start": "1505760",
    "end": "1512159"
  },
  {
    "text": "going to do state script exports attack so we're going to call a function on the",
    "start": "1512159",
    "end": "1518240"
  },
  {
    "text": "remote script we'll see in a bit how that is defined",
    "start": "1518240",
    "end": "1524559"
  },
  {
    "text": "and now we also need to update the mutations so we go to the disconnected state",
    "start": "1525279",
    "end": "1531919"
  },
  {
    "text": "um we set the script to null",
    "start": "1531919",
    "end": "1536960"
  },
  {
    "text": "and when we go connected we also",
    "start": "1536960",
    "end": "1542880"
  },
  {
    "text": "need to set the script so that this here attack can actually",
    "start": "1542880",
    "end": "1549760"
  },
  {
    "text": "use this script okay",
    "start": "1549760",
    "end": "1554880"
  },
  {
    "text": "and now we also need to now we're going to implement the code that we inject into the other process",
    "start": "1554880",
    "end": "1562559"
  },
  {
    "text": "so that will be our agent and this agent will",
    "start": "1562720",
    "end": "1567840"
  },
  {
    "text": "have some knowledge of quakes internals and",
    "start": "1567840",
    "end": "1572640"
  },
  {
    "text": "give that to us give acts give us access to those i'm just setting up some",
    "start": "1572960",
    "end": "1579600"
  },
  {
    "text": "type definitions here so the well type definition so that when typical compiler looks at this import",
    "start": "1580480",
    "end": "1587919"
  },
  {
    "text": "agent from it knows what it is and here",
    "start": "1587919",
    "end": "1594720"
  },
  {
    "text": "we'll have the [Music] agent.js",
    "start": "1594720",
    "end": "1602159"
  },
  {
    "text": "um so yeah now we can start with the actual",
    "start": "1602799",
    "end": "1608240"
  },
  {
    "text": "logic that we inject i'm going to switch editor here because",
    "start": "1608240",
    "end": "1613760"
  },
  {
    "text": "uh the completion is all wrong because it's a different context and i haven't set it up correctly",
    "start": "1613760",
    "end": "1620400"
  },
  {
    "text": "so this now we're running code inside the other process inside quake",
    "start": "1621440",
    "end": "1627039"
  },
  {
    "text": "so we're going to export a function called attack so when you hit the button it's going to",
    "start": "1627039",
    "end": "1633120"
  },
  {
    "text": "call this and that's going to perform",
    "start": "1633120",
    "end": "1638640"
  },
  {
    "text": "attack down it's gonna hit like press the button down and then it's going to sleep for 50",
    "start": "1638640",
    "end": "1644159"
  },
  {
    "text": "milliseconds and then it's going to attack up so release the button",
    "start": "1644159",
    "end": "1649760"
  },
  {
    "text": "uh so we we keep it pressed for 50 milliseconds roughly",
    "start": "1649760",
    "end": "1655180"
  },
  {
    "text": "[Music] and then we actually need this attack down and",
    "start": "1655180",
    "end": "1661279"
  },
  {
    "text": "attack up and this is code from a while ago so these",
    "start": "1661279",
    "end": "1666640"
  },
  {
    "text": "are actually global variables that happen to be exported so we can just",
    "start": "1666640",
    "end": "1671679"
  },
  {
    "text": "access them normally things are not this simple",
    "start": "1671679",
    "end": "1676880"
  },
  {
    "text": "in modern software but you could use debug symbols or other ways to get those",
    "start": "1676880",
    "end": "1683120"
  },
  {
    "text": "um so what we're doing here is that we're using frida's",
    "start": "1683120",
    "end": "1689279"
  },
  {
    "text": "native function to be able to call a native function uh and uh we're getting a couple of symbols",
    "start": "1689279",
    "end": "1695440"
  },
  {
    "text": "and we'd say that the return type is void and there's no argument there are no arguments",
    "start": "1695440",
    "end": "1701200"
  },
  {
    "text": "and um and then we also need this import symbol that we used up there",
    "start": "1701200",
    "end": "1708080"
  },
  {
    "text": "that will find the memory address of that function that we want to call so we'll do module get",
    "start": "1708080",
    "end": "1714799"
  },
  {
    "text": "export by name and we know the name of the library",
    "start": "1714799",
    "end": "1721760"
  },
  {
    "text": "actually the executables and that's it",
    "start": "1721760",
    "end": "1726720"
  },
  {
    "text": "and yeah we we're using sleep so we can define that that's the same code as we had on the other side",
    "start": "1727760",
    "end": "1735600"
  },
  {
    "text": "and now um bear in mind that the code we in going to inject uh is uh actually running in",
    "start": "1736640",
    "end": "1743520"
  },
  {
    "text": "frida's javascript script thread because we we start a new thread in there so quake will not be happy if we",
    "start": "1743520",
    "end": "1749600"
  },
  {
    "text": "suddenly call functions from a different flat or well it will be undefined behavior or fun things will happen so we",
    "start": "1749600",
    "end": "1756720"
  },
  {
    "text": "should actually make sure we schedule those on the right thread",
    "start": "1756720",
    "end": "1762320"
  },
  {
    "text": "um so we'll define a function perform",
    "start": "1765120",
    "end": "1770880"
  },
  {
    "text": "it performs a function f that does",
    "start": "1770880",
    "end": "1776720"
  },
  {
    "text": "returns a promise and [Music]",
    "start": "1779279",
    "end": "1786470"
  },
  {
    "text": "that's a function to the queue of things to run",
    "start": "1786960",
    "end": "1793600"
  },
  {
    "text": "that will do like call the function and resolve the promise with the result",
    "start": "1793600",
    "end": "1800080"
  },
  {
    "text": "otherwise uh reject it with the error if it throws an exception",
    "start": "1800080",
    "end": "1806640"
  },
  {
    "text": "and that's it now something needs to process this queue of course so we're going to do",
    "start": "1806640",
    "end": "1813440"
  },
  {
    "text": "that next and now we're going to use a different api in freeda called interceptor",
    "start": "1813440",
    "end": "1818559"
  },
  {
    "text": "that allows us to intercept function calls as they happen by modifying the function in memory so we",
    "start": "1818559",
    "end": "1825520"
  },
  {
    "text": "get like a detour back to us to javascript so we can do something",
    "start": "1825520",
    "end": "1830559"
  },
  {
    "text": "so we're going to use interceptor attach and",
    "start": "1830559",
    "end": "1836559"
  },
  {
    "text": "um so that whenever i n send key events meaning input send key",
    "start": "1836559",
    "end": "1842880"
  },
  {
    "text": "events gets uh called that happens like every frame uh we will get control here that we get",
    "start": "1842880",
    "end": "1848559"
  },
  {
    "text": "a callback and then we can do while pending ui thread ups",
    "start": "1848559",
    "end": "1854320"
  },
  {
    "text": "length greater than zero get the next operation",
    "start": "1854320",
    "end": "1860960"
  },
  {
    "text": "and call it [Music] and one more thing we also want to show",
    "start": "1861519",
    "end": "1867760"
  },
  {
    "text": "some metrics in our ui so right after",
    "start": "1867760",
    "end": "1873760"
  },
  {
    "text": "right after the attack implementation here we're going to call push metrics and",
    "start": "1876720",
    "end": "1882320"
  },
  {
    "text": "each seconds we're going to push the metrics again um and after attack",
    "start": "1882320",
    "end": "1888880"
  },
  {
    "text": "you might you'll probably use the bullet so that's also a good point to actually push the matrix at that point",
    "start": "1888880",
    "end": "1895679"
  },
  {
    "text": "i'm doing a thing yeah and um",
    "start": "1897039",
    "end": "1901600"
  },
  {
    "text": "yeah we need one more thing here so there's a global variable another",
    "start": "1902480",
    "end": "1908080"
  },
  {
    "text": "global variable called cl which is the client state so we'll just make that available here",
    "start": "1908080",
    "end": "1914399"
  },
  {
    "text": "that's a pointer to the data and if we were to look at the structs",
    "start": "1914399",
    "end": "1921360"
  },
  {
    "text": "yeah i don't have time to look at that right now but basically we have the different",
    "start": "1921360",
    "end": "1926880"
  },
  {
    "text": "metrics in an array of metrics in there",
    "start": "1926880",
    "end": "1932320"
  },
  {
    "text": "so the health is at index zero in that area and shells is index six",
    "start": "1932320",
    "end": "1937679"
  },
  {
    "text": "um so uh um",
    "start": "1937679",
    "end": "1943919"
  },
  {
    "text": "now and let's just implement these things that push metrics",
    "start": "1943919",
    "end": "1949840"
  },
  {
    "text": "so we're going to get the metrics somehow by calling read metrics and then we're going to call send to send that as",
    "start": "1951039",
    "end": "1958399"
  },
  {
    "text": "a message to the other side to the browser and in this message we'll have a type",
    "start": "1958399",
    "end": "1963519"
  },
  {
    "text": "metrics and the payload oh and then just the metrics",
    "start": "1963519",
    "end": "1969440"
  },
  {
    "text": "and to implement the read metrics we'll use",
    "start": "1970159",
    "end": "1977600"
  },
  {
    "text": "the perform primitives so we run this code on the right thread and then we turn an array and",
    "start": "1977600",
    "end": "1985440"
  },
  {
    "text": "as like label health value read metric metric health",
    "start": "1985440",
    "end": "1993360"
  },
  {
    "text": "and similarly for the shells",
    "start": "1996320",
    "end": "2000080"
  },
  {
    "text": "and finally we'll implement readmetric which is calls",
    "start": "2001840",
    "end": "2007679"
  },
  {
    "text": "and this will do client state pointer to the start of the struct it will add 28 bytes which is",
    "start": "2012240",
    "end": "2019840"
  },
  {
    "text": "past some other fields and that's where the array starts and then we do matrix times four so the size",
    "start": "2019840",
    "end": "2025760"
  },
  {
    "text": "of int and then read in to read the actual metric",
    "start": "2025760",
    "end": "2031600"
  },
  {
    "text": "and yeah that's it we're hopefully done",
    "start": "2031600",
    "end": "2036398"
  },
  {
    "text": "okay so now we need to start the server",
    "start": "2042399",
    "end": "2046679"
  },
  {
    "text": "um so i'll do that here it's running",
    "start": "2049919",
    "end": "2056320"
  },
  {
    "text": "yeah and we also well we can just connect it will be",
    "start": "2056320",
    "end": "2061599"
  },
  {
    "text": "spinning now because their quake process is not there yet so it's just gonna get the processes this quake there now get",
    "start": "2061599",
    "end": "2068158"
  },
  {
    "text": "them again each second poll to do that and uh quake and now we're going to start quick",
    "start": "2068159",
    "end": "2077119"
  },
  {
    "text": "and there we go now it's live went into connected state",
    "start": "2078399",
    "end": "2085200"
  },
  {
    "text": "and start and let's start a game",
    "start": "2085200",
    "end": "2093200"
  },
  {
    "text": "and you can see the the health is hundreds on the shells 25",
    "start": "2093440",
    "end": "2099200"
  },
  {
    "text": "and if i hit the attack button it fires and you can see the shells counting down",
    "start": "2099599",
    "end": "2108240"
  },
  {
    "text": "and if i go here and commit suicide you can see the health goes down as well",
    "start": "2109440",
    "end": "2116400"
  },
  {
    "text": "to minus 10 for some reason",
    "start": "2116400",
    "end": "2120078"
  },
  {
    "text": "so how am i on time now",
    "start": "2122240",
    "end": "2130440"
  },
  {
    "text": "yeah so uh i quit quake and it went to the disconnected recent process terminated",
    "start": "2131359",
    "end": "2137520"
  },
  {
    "text": "um so that that is working okay",
    "start": "2137520",
    "end": "2143440"
  },
  {
    "text": "um",
    "start": "2143440",
    "end": "2145838"
  },
  {
    "text": "let's see okay still have some time uh so now we're going to do a bit of a",
    "start": "2153920",
    "end": "2160480"
  },
  {
    "text": "more risky demo uh we won't code to this demo live because it's too much",
    "start": "2160480",
    "end": "2166160"
  },
  {
    "text": "and this was written last night uh some of it with red wine in the beginning and i go the code is not super",
    "start": "2166160",
    "end": "2173119"
  },
  {
    "text": "pretty but i got it working in the end so i'll just",
    "start": "2173119",
    "end": "2179838"
  },
  {
    "text": "okay",
    "start": "2181119",
    "end": "2184119"
  },
  {
    "text": "uh so [Music] i think",
    "start": "2187280",
    "end": "2192320"
  },
  {
    "text": "so what you saw now was uh was frida server",
    "start": "2192880",
    "end": "2198079"
  },
  {
    "text": "that is like a headless frida uh that uh you can put somewhere like on a phone like",
    "start": "2198079",
    "end": "2204320"
  },
  {
    "text": "um and i started on my system here um but there's also something called a",
    "start": "2204320",
    "end": "2209680"
  },
  {
    "text": "portal that's a new thing in friday 15. and that's um that's looks like a server",
    "start": "2209680",
    "end": "2216560"
  },
  {
    "text": "but it doesn't give you any processes there's no processes there until something connects into it",
    "start": "2216560",
    "end": "2222320"
  },
  {
    "text": "and then those become exposed so so you can make an existing process join",
    "start": "2222320",
    "end": "2227920"
  },
  {
    "text": "that portal so the portal could be running in the u.s and you could have a process on your",
    "start": "2227920",
    "end": "2234400"
  },
  {
    "text": "phone in norway and that could be sent to the us or exposed there and the co-worker could connect to it and",
    "start": "2234400",
    "end": "2240800"
  },
  {
    "text": "actually access that process so you're giving them remote code execution is super dangerous",
    "start": "2240800",
    "end": "2246160"
  },
  {
    "text": "obviously you need to know what you're doing so you might want to sandbox it heavily",
    "start": "2246160",
    "end": "2251839"
  },
  {
    "text": "yeah but we can actually do that use that here so",
    "start": "2251839",
    "end": "2259040"
  },
  {
    "text": "let's see",
    "start": "2259280",
    "end": "2261680"
  },
  {
    "text": "so i'm going to go to downloads and run the freda portal that's just a binary you can download",
    "start": "2264720",
    "end": "2270720"
  },
  {
    "text": "from the releases page of frida it's 4.4 megabytes um it's also something you can use from the",
    "start": "2270720",
    "end": "2276800"
  },
  {
    "text": "api to customize the behavior like authentication and",
    "start": "2276800",
    "end": "2281920"
  },
  {
    "text": "other things um so i need to find my ip address i have a",
    "start": "2281920",
    "end": "2287839"
  },
  {
    "text": "like a a hotspot here and uh",
    "start": "2287839",
    "end": "2293599"
  },
  {
    "text": "yeah probably [Music]",
    "start": "2293599",
    "end": "2299359"
  },
  {
    "text": "maybe not",
    "start": "2299359",
    "end": "2301920"
  },
  {
    "text": "probably this one um i don't know oh okay i'm on the wrong one okay that's",
    "start": "2304640",
    "end": "2310480"
  },
  {
    "text": "why so i'll use my hotspot so have some more control",
    "start": "2310480",
    "end": "2317480"
  },
  {
    "text": "hmm",
    "start": "2362560",
    "end": "2365560"
  },
  {
    "text": "so i just probably got the stale password",
    "start": "2376880",
    "end": "2381960"
  },
  {
    "text": "uh",
    "start": "2393040",
    "end": "2396040"
  },
  {
    "text": "okay um",
    "start": "2406640",
    "end": "2410279"
  },
  {
    "text": "okay the thing i least expected to fail was this",
    "start": "2419280",
    "end": "2425078"
  },
  {
    "text": "hmm",
    "start": "2444400",
    "end": "2447400"
  },
  {
    "text": "okay uh this one i found the saved password it's probably outdated",
    "start": "2456240",
    "end": "2465079"
  },
  {
    "text": "okay can this one join them",
    "start": "2487839",
    "end": "2492760"
  },
  {
    "text": "okay",
    "start": "2502720",
    "end": "2505720"
  },
  {
    "text": "anyone could volunteer to set up a hotspot",
    "start": "2513200",
    "end": "2517960"
  },
  {
    "text": "uh does anyone know if this choice guest network isolates the clients",
    "start": "2525040",
    "end": "2530640"
  },
  {
    "text": "like can they talk to each other it does they can't talk to each other hmm so i need a network where they can",
    "start": "2530640",
    "end": "2539680"
  },
  {
    "text": "oh that'd be awesome thanks",
    "start": "2540079",
    "end": "2545040"
  },
  {
    "text": "i feel it's amateur hour here right now with me sorry",
    "start": "2546000",
    "end": "2551359"
  },
  {
    "text": "let's see",
    "start": "2551359",
    "end": "2553759"
  },
  {
    "text": "all right so",
    "start": "2559359",
    "end": "2567240"
  },
  {
    "text": "okay so that's connected let's connect this one too",
    "start": "2581040",
    "end": "2586480"
  },
  {
    "text": "yeah wish i had time to deploy this last night so i wouldn't have to do this",
    "start": "2589359",
    "end": "2594560"
  },
  {
    "text": "okay they're on the same network now please this one",
    "start": "2594560",
    "end": "2603000"
  },
  {
    "text": "[Music] okay so i'm going to run the 3d portal",
    "start": "2606000",
    "end": "2612160"
  },
  {
    "text": "and we're going to tell it to have that the cluster endpoint that's meaning that",
    "start": "2612160",
    "end": "2617200"
  },
  {
    "text": "means the process is connecting to it to be exposed uh",
    "start": "2617200",
    "end": "2622480"
  },
  {
    "text": "will be uh it will be listening on this interface and uh",
    "start": "2622480",
    "end": "2628400"
  },
  {
    "text": "um yeah and the control endpoint that's like the web app will be on the same one",
    "start": "2628400",
    "end": "2634160"
  },
  {
    "text": "actually uh by default it will only listen on localhost loop that look back interface",
    "start": "2634160",
    "end": "2641920"
  },
  {
    "text": "and i couldn't spell endpoint correctly so there okay so now if i do free.ps",
    "start": "2643359",
    "end": "2650560"
  },
  {
    "text": "and the tello to connect to localhost um",
    "start": "2650560",
    "end": "2655599"
  },
  {
    "text": "no we're not listing a localhost on this ip address then it tells us there's no running processes",
    "start": "2656480",
    "end": "2662960"
  },
  {
    "text": "okay so now if i",
    "start": "2662960",
    "end": "2668960"
  },
  {
    "text": "look at my phone here and do 3.ps on on",
    "start": "2670800",
    "end": "2676480"
  },
  {
    "text": "usb to see the processors there um we're actually going to now start",
    "start": "2676480",
    "end": "2684400"
  },
  {
    "text": "an app here which is this app",
    "start": "2684400",
    "end": "2689520"
  },
  {
    "text": "um",
    "start": "2689520",
    "end": "2691839"
  },
  {
    "text": "so okay let's first launch the",
    "start": "2697040",
    "end": "2703880"
  },
  {
    "text": "the the web app so this is just the same app but i just can't replace the agent with",
    "start": "2704880",
    "end": "2710960"
  },
  {
    "text": "an agent adapted to this particular app and this is a synthesizer app",
    "start": "2710960",
    "end": "2718000"
  },
  {
    "text": "so if we try to connect",
    "start": "2718000",
    "end": "2723119"
  },
  {
    "text": "[Music]",
    "start": "2724210",
    "end": "2727449"
  },
  {
    "text": "i have a hard-coded ip address in there uh so if we go into the store",
    "start": "2732000",
    "end": "2737200"
  },
  {
    "text": "and where we set up the client uh yeah we it will use",
    "start": "2737200",
    "end": "2742880"
  },
  {
    "text": "no it's not hardcoded we use the hostname plus the port the full port so",
    "start": "2742880",
    "end": "2748480"
  },
  {
    "text": "as long as i access it through the same click this it should be able to connect",
    "start": "2748480",
    "end": "2754880"
  },
  {
    "text": "and now it's waiting for the process to appear um and because as you saw",
    "start": "2754880",
    "end": "2763200"
  },
  {
    "text": "um well there's no running processes so now we're gonna use something else called",
    "start": "2763200",
    "end": "2769280"
  },
  {
    "text": "free to join so we're gonna tell it to use usb and the name of the pro process is morph",
    "start": "2769280",
    "end": "2776319"
  },
  {
    "text": "wiz that's the synthesizer over here",
    "start": "2776319",
    "end": "2783680"
  },
  {
    "text": "and we also need to tell it to connect to this portal",
    "start": "2783680",
    "end": "2790319"
  },
  {
    "text": "and there we go now it's joined so if we do ps again you'll see that there's one process",
    "start": "2790319",
    "end": "2796480"
  },
  {
    "text": "so now this app on the phone has joined this portal on my laptop um and now this web app is happy and if",
    "start": "2796480",
    "end": "2805040"
  },
  {
    "text": "we do this hopefully",
    "start": "2805040",
    "end": "2809520"
  },
  {
    "text": "oh yeah the audio is not working anymore here uh",
    "start": "2814960",
    "end": "2821520"
  },
  {
    "text": "excuse me um the the the jack is dead right now",
    "start": "2821520",
    "end": "2827359"
  },
  {
    "text": "i think",
    "start": "2827359",
    "end": "2830599"
  },
  {
    "text": "huh okay it's working okay thanks",
    "start": "2844000",
    "end": "2849838"
  },
  {
    "text": "so uh now you could do this from from the web app",
    "start": "2850319",
    "end": "2855660"
  },
  {
    "text": "[Music] so if if one of you could join the same hotspot",
    "start": "2855660",
    "end": "2861200"
  },
  {
    "text": "with your phone maybe that will work then we can like",
    "start": "2861200",
    "end": "2866319"
  },
  {
    "text": "create live music with several inputs at the same time",
    "start": "2866319",
    "end": "2872400"
  },
  {
    "text": "so could you pass it to someone with an iphone android with",
    "start": "2872400",
    "end": "2877680"
  },
  {
    "text": "some recent browser that supports webrtc",
    "start": "2877680",
    "end": "2882680"
  },
  {
    "text": "so i'll show you the code in the meantime",
    "start": "2889440",
    "end": "2893640"
  },
  {
    "text": "um yeah so now the connecting connected view is empty it just has a bunch of",
    "start": "2903839",
    "end": "2909280"
  },
  {
    "text": "handlers for mouse down mouse move mouse up touch start touch move touch end",
    "start": "2909280",
    "end": "2914400"
  },
  {
    "text": "and those are just given to the view there to the store",
    "start": "2914400",
    "end": "2919839"
  },
  {
    "text": "and like down is sent",
    "start": "2919839",
    "end": "2925280"
  },
  {
    "text": "by calling an export on the script down and move as well but we're throttling the moves",
    "start": "2925280",
    "end": "2931520"
  },
  {
    "text": "to each up to once every 50 milliseconds",
    "start": "2931520",
    "end": "2936880"
  },
  {
    "text": "and up just when you release the button or um so the ip was 172 20",
    "start": "2936880",
    "end": "2946960"
  },
  {
    "text": "10.",
    "start": "2948000",
    "end": "2951000"
  },
  {
    "text": "yeah and port 3000 sorry",
    "start": "2966720",
    "end": "2971000"
  },
  {
    "text": "are you on there as well okay",
    "start": "2976800",
    "end": "2981200"
  },
  {
    "text": "well anyway uh what happens here is uh that uh we have the same logic as before",
    "start": "2984880",
    "end": "2990640"
  },
  {
    "text": "we're looking for the process instead of quake we look for more wiz uh same logic for the disconnection",
    "start": "2990640",
    "end": "2998400"
  },
  {
    "text": "and we're not handling any messages because nothing is coming back from it",
    "start": "2998400",
    "end": "3003359"
  },
  {
    "text": "but we're doing one thing between here we're doing setup peer connection and this will set up a",
    "start": "3003520",
    "end": "3009920"
  },
  {
    "text": "direct connection between your phone or laptop and the uh",
    "start": "3009920",
    "end": "3015280"
  },
  {
    "text": "the app here so that doesn't have to go through my laptop so if this portal running on my laptop",
    "start": "3015280",
    "end": "3021040"
  },
  {
    "text": "was in a data center in the u.s you wouldn't need the cross-atlantic",
    "start": "3021040",
    "end": "3026480"
  },
  {
    "text": "delay you wouldn't have the cross-atlantic delay for the input that's pretty important for an application like this",
    "start": "3026480",
    "end": "3032000"
  },
  {
    "text": "uh but it's also something you want to avoid for bandwidth cost reasons obviously",
    "start": "3032000",
    "end": "3038319"
  },
  {
    "text": "and the agent uh is um basically",
    "start": "3038319",
    "end": "3044480"
  },
  {
    "text": "when you hit down when you call the down export it will schedule you some code on the",
    "start": "3044480",
    "end": "3050079"
  },
  {
    "text": "main thread and if it doesn't have a window we'll get",
    "start": "3050079",
    "end": "3055119"
  },
  {
    "text": "that and uh then it will uh turn that into a point and then it's",
    "start": "3055119",
    "end": "3061040"
  },
  {
    "text": "gonna use some code that i wrote a while ago which is in frida ui kit it's an open source",
    "start": "3061040",
    "end": "3067200"
  },
  {
    "text": "library for dealing with for ui automation i just copied out the",
    "start": "3067200",
    "end": "3073920"
  },
  {
    "text": "touch injection and modified it so you can start a touch and then",
    "start": "3073920",
    "end": "3079440"
  },
  {
    "text": "keep it open work because this particular implementation is",
    "start": "3079440",
    "end": "3085440"
  },
  {
    "text": "just hardwired to only support one click and one tap so so here we're streaming new touches as",
    "start": "3085440",
    "end": "3092800"
  },
  {
    "text": "it's running um and yeah that's",
    "start": "3092800",
    "end": "3098240"
  },
  {
    "text": "uh let's start [Music] still works",
    "start": "3098240",
    "end": "3103280"
  },
  {
    "text": "okay so um um any questions so far",
    "start": "3103280",
    "end": "3110119"
  },
  {
    "text": "uh let's see how one more time oh yeah i will publish the code",
    "start": "3111280",
    "end": "3118720"
  },
  {
    "text": "we can do that now",
    "start": "3118720",
    "end": "3122359"
  },
  {
    "text": "a minute",
    "start": "3144640",
    "end": "3147880"
  },
  {
    "text": "okay so it's uh this address github.com slash only avr slash ndc 2021",
    "start": "3159760",
    "end": "3168000"
  },
  {
    "text": "and i've what i've done is that there's each commit is a part and i have a pdf",
    "start": "3168000",
    "end": "3174160"
  },
  {
    "text": "with a more detailed script if you want to look at that i can add that also um",
    "start": "3174160",
    "end": "3181280"
  },
  {
    "text": "and um yeah so what you saw here since i have like five minutes left uh there's",
    "start": "3181280",
    "end": "3186319"
  },
  {
    "text": "uh the portal um is uh normally just",
    "start": "3186319",
    "end": "3191599"
  },
  {
    "text": "a binary uh that you run but you can also instantiate it from",
    "start": "3191599",
    "end": "3196800"
  },
  {
    "text": "through a language binding like the python and node.js",
    "start": "3196800",
    "end": "3202000"
  },
  {
    "text": "bindings",
    "start": "3202000",
    "end": "3205000"
  },
  {
    "text": "so you can for example do this",
    "start": "3209599",
    "end": "3216880"
  },
  {
    "text": "so um by default it will have a",
    "start": "3217760",
    "end": "3226079"
  },
  {
    "text": "cluster interface and a control interface so it's listing on two different ports uh one for the incoming",
    "start": "3226079",
    "end": "3231920"
  },
  {
    "text": "processes and the other one is the control interface which we talked to here from the web browser but you can disable the control",
    "start": "3231920",
    "end": "3237920"
  },
  {
    "text": "interface and actually just control it from python or directly here so you don't actually need that part if you",
    "start": "3237920",
    "end": "3244319"
  },
  {
    "text": "don't want it and you can also wire up your own authentication",
    "start": "3244319",
    "end": "3251200"
  },
  {
    "text": "and that's given a token and that token can mean arbitrary things to applications so",
    "start": "3251200",
    "end": "3256720"
  },
  {
    "text": "it could be like an oauth token from github for example that you use on your ba on this backend then to look up the",
    "start": "3256720",
    "end": "3262960"
  },
  {
    "text": "user details so and you can also since we already have a channel we might as well allow",
    "start": "3262960",
    "end": "3269520"
  },
  {
    "text": "you to post messages to it so you can also define message handlers so here in this example which is in",
    "start": "3269520",
    "end": "3274960"
  },
  {
    "text": "frida python in the examples i've implemented a tiny irc",
    "start": "3274960",
    "end": "3281040"
  },
  {
    "text": "like thing where you have a chat implementation on top of this but you could imagine building",
    "start": "3281040",
    "end": "3288480"
  },
  {
    "text": "your own collaborative experiences in the browser for example",
    "start": "3288480",
    "end": "3294319"
  },
  {
    "text": "using this with custom back-end code but for prototyping like we did now it's",
    "start": "3294319",
    "end": "3299680"
  },
  {
    "text": "great to just not have to write the back-end code initially but you can add it later or you could have have it back in less",
    "start": "3299680",
    "end": "3307839"
  },
  {
    "text": "as well um and then have the clients well you would need a tiny bit of you need to",
    "start": "3307839",
    "end": "3313760"
  },
  {
    "text": "instantiate the portal to be able to to allow the client to pass messages to each other because you still need to",
    "start": "3313760",
    "end": "3320240"
  },
  {
    "text": "have to hook up a message handler because nothing will happen otherwise um but that's the idea you can just",
    "start": "3320240",
    "end": "3326559"
  },
  {
    "text": "instantiate it and customize it to adapt it to your application",
    "start": "3326559",
    "end": "3331760"
  },
  {
    "text": "and what i wanted to build was like a collaborative reverse engineering experience for example when you have",
    "start": "3331760",
    "end": "3336960"
  },
  {
    "text": "multiple colleagues looking at something together and you would want to maybe have a shared",
    "start": "3336960",
    "end": "3342559"
  },
  {
    "text": "editor and look at the outputs from the scripts and so on but it could also be",
    "start": "3342559",
    "end": "3348720"
  },
  {
    "text": "something else like uh development tools for your internal products uh for example",
    "start": "3348720",
    "end": "3355440"
  },
  {
    "text": "so instead of building tracing into your application you can have a tracing tool externally that knows the internals of",
    "start": "3355440",
    "end": "3362319"
  },
  {
    "text": "your application and has access to debug symbols so it doesn't need to look at use hardcoded offsets or scan memory and",
    "start": "3362319",
    "end": "3369359"
  },
  {
    "text": "things like that so yeah that's about it any questions",
    "start": "3369359",
    "end": "3377839"
  },
  {
    "text": "what's a good way to find like in the equation for example you use some symbols",
    "start": "3379440",
    "end": "3384799"
  },
  {
    "text": "yeah but what's a good way to like discover right ah that's a good question so how",
    "start": "3384799",
    "end": "3391200"
  },
  {
    "text": "to discover symbols uh um so let's see say i",
    "start": "3391200",
    "end": "3399760"
  },
  {
    "text": "i'll start an app on my phone and i can use the friller rappel so if you do pip install for your tools you",
    "start": "3400160",
    "end": "3406559"
  },
  {
    "text": "get the repo then i can tell to use dash u for usb and f capital f to attach to the",
    "start": "3406559",
    "end": "3412640"
  },
  {
    "text": "foreground application um and now you'll see some more widths on",
    "start": "3412640",
    "end": "3418400"
  },
  {
    "text": "the iphone and then you can do process enumerate modules example",
    "start": "3418400",
    "end": "3425200"
  },
  {
    "text": "get all the libraries and then you could filter those",
    "start": "3425200",
    "end": "3432400"
  },
  {
    "text": "or map just to the path for example",
    "start": "3432400",
    "end": "3436558"
  },
  {
    "text": "and uh say you have more",
    "start": "3438559",
    "end": "3443119"
  },
  {
    "text": "okay this this library here let's pretend it belongs to the application",
    "start": "3444400",
    "end": "3449839"
  },
  {
    "text": "you can do in module enumerate exports for example so you start out with the exports and look at what symbols are globally",
    "start": "3449839",
    "end": "3456559"
  },
  {
    "text": "visible or visible that's the best if they are uh if",
    "start": "3456559",
    "end": "3461599"
  },
  {
    "text": "they're not then you have something called memory scan so then you can get the",
    "start": "3461599",
    "end": "3468240"
  },
  {
    "text": "like say the module process",
    "start": "3468240",
    "end": "3473520"
  },
  {
    "text": "get module by name then we have the base address",
    "start": "3473520",
    "end": "3481680"
  },
  {
    "text": "and then you can do memory scan the base address",
    "start": "3481680",
    "end": "3487119"
  },
  {
    "text": "and we also have the size there so we could use that and then you could have a pattern",
    "start": "3487119",
    "end": "3494240"
  },
  {
    "text": "like this so if you know the instruction sequence of a function internally you could find",
    "start": "3495680",
    "end": "3502640"
  },
  {
    "text": "it this way um and then you can use question marks uh to have the for bytes that can be any",
    "start": "3502640",
    "end": "3509119"
  },
  {
    "text": "value so if you have offsets and instructions like instructions on the part that is the offset",
    "start": "3509119",
    "end": "3514640"
  },
  {
    "text": "then you can mask those out there's also masking support so you can have a bit mask like to match on arm",
    "start": "3514640",
    "end": "3520880"
  },
  {
    "text": "you typically want that and um",
    "start": "3520880",
    "end": "3526160"
  },
  {
    "text": "and yeah there's the debug symbol api so debug symbol",
    "start": "3526160",
    "end": "3532480"
  },
  {
    "text": "from [Music] find functions named uh star",
    "start": "3532480",
    "end": "3540799"
  },
  {
    "text": "or matching i think you can glob actually so yeah you have",
    "start": "3540799",
    "end": "3547280"
  },
  {
    "text": "you have the modules you have scanning memory and you can use debug symbols if you have them",
    "start": "3547280",
    "end": "3552480"
  },
  {
    "text": "and if you use a static analysis tool like either radar ida",
    "start": "3552480",
    "end": "3558799"
  },
  {
    "text": "to look at the binary to decompile it or disassemble it then you could explore it and find some internals",
    "start": "3558799",
    "end": "3566559"
  },
  {
    "text": "and then you would typically find look at the offset relative to the start of the module and here you can do",
    "start": "3566559",
    "end": "3575520"
  },
  {
    "text": "a get module by name you have the base address then you just add the offset and you",
    "start": "3575520",
    "end": "3581680"
  },
  {
    "text": "compute the address of the function and call it or the variable if it's the variable you want to read or write to",
    "start": "3581680",
    "end": "3589680"
  },
  {
    "text": "uh it's a bit tedious but that's that's how you do it and but by combining it with frida you can",
    "start": "3589680",
    "end": "3596720"
  },
  {
    "text": "you know use for your trace a bit to explore and learn a bit and then go to the",
    "start": "3596720",
    "end": "3602160"
  },
  {
    "text": "static analysis tool and apply that knowledge and back and forth and",
    "start": "3602160",
    "end": "3607119"
  },
  {
    "text": "yeah oh yeah and there's also an objective c integration so you can do",
    "start": "3608559",
    "end": "3614079"
  },
  {
    "text": "obviously the class of stuff and the class name to get wrappers for objective c classes you have the same for java and swift",
    "start": "3614079",
    "end": "3620480"
  },
  {
    "text": "so if an application is written in one of those using one of those runtimes you can already get just the classes and",
    "start": "3620480",
    "end": "3627839"
  },
  {
    "text": "that's great but it's a lot more work if it's native code obviously or where we don't have",
    "start": "3627839",
    "end": "3633040"
  },
  {
    "text": "runtime type information any more questions",
    "start": "3633040",
    "end": "3641160"
  },
  {
    "text": "all right thank you",
    "start": "3642400",
    "end": "3645960"
  }
]