[
  {
    "text": "all right we're gonna get started so good morning everyone or i guess um",
    "start": "560",
    "end": "5680"
  },
  {
    "text": "good morning where i'm sitting um uh i think for for where most of for where most of you are sitting it's",
    "start": "5680",
    "end": "11679"
  },
  {
    "text": "probably it's probably a good um so thanks for joining me at the end of the day here",
    "start": "11679",
    "end": "17359"
  },
  {
    "text": "um this is navigating microservices with.net core and tai so if you're here for a",
    "start": "17359",
    "end": "23279"
  },
  {
    "text": "different talk you're in the wrong room um so physically get up and move yourself to another room",
    "start": "23279",
    "end": "28400"
  },
  {
    "text": "just kidding so we'll get started so a little bit about me uh i'm",
    "start": "28400",
    "end": "36079"
  },
  {
    "text": "i've worked on asp.net core for many many years as architect and developer",
    "start": "36079",
    "end": "41280"
  },
  {
    "text": "mvc routing client factory health checks razor blazer and something new called",
    "start": "41280",
    "end": "47520"
  },
  {
    "text": "project high which we'll be talking about in quite a lot of detail today",
    "start": "47520",
    "end": "52640"
  },
  {
    "text": "and so that's that's normally how i would introduce myself except uh as of about a month ago i'm",
    "start": "52640",
    "end": "58719"
  },
  {
    "text": "part of the azure incubations team so this is probably my last conference talk ever uh representing the.net core team",
    "start": "58719",
    "end": "65198"
  },
  {
    "text": "which is a sort of a bittersweet uh bitter sweet end and a bittersweet farewell but it's been a",
    "start": "65199",
    "end": "70560"
  },
  {
    "text": "it's been an awesome journey doing decor and asp.net core and i'll always holds i'll always hold that",
    "start": "70560",
    "end": "76080"
  },
  {
    "text": "in my heart um so what are we going to do today we're going to talk about your developer productivity",
    "start": "76080",
    "end": "81520"
  },
  {
    "text": "um and specifically i'm speaking to developer productivity for you building services",
    "start": "81520",
    "end": "87360"
  },
  {
    "text": "building back ends building microservices and i don't really care if you like to use the term microservices to",
    "start": "87360",
    "end": "93759"
  },
  {
    "text": "describe what you're doing i don't think it matters that much if you feel like you're really doing microservices or you're just building",
    "start": "93759",
    "end": "100240"
  },
  {
    "text": "modern backend and modern web sorts of applications the truth is that really like every application is a",
    "start": "100240",
    "end": "107360"
  },
  {
    "text": "multi-tier application every application these days has got multiple multiple components to it and",
    "start": "107360",
    "end": "112799"
  },
  {
    "text": "multiple layers to it and it's very rare that we're actually building applications that are just one component these days",
    "start": "112799",
    "end": "119200"
  },
  {
    "text": "if you're there like you're lucky because you're you're developing your development process probably pretty simple",
    "start": "119200",
    "end": "126880"
  },
  {
    "text": "so we're going to talk about how to accelerate your productivity um with the focus being on a new tool",
    "start": "126880",
    "end": "132720"
  },
  {
    "text": "that we're building called on a tie and how you can become more productive and more successful by trying to make",
    "start": "132720",
    "end": "138879"
  },
  {
    "text": "development more like production and we'll show how you can easily containerize and deploy.net core services",
    "start": "138879",
    "end": "146160"
  },
  {
    "text": "so a little bit about dot-net tie we're going to jump in with a lot of demos by the way pretty",
    "start": "146160",
    "end": "151840"
  },
  {
    "text": "much right away so a little bit about donna tai what we're referring to",
    "start": "151840",
    "end": "157040"
  },
  {
    "text": "as a public experiment for dot-net five um we'll talk a little bit about what that means but",
    "start": "157040",
    "end": "162160"
  },
  {
    "text": "it basically means that we're we're building creating and innovating on a tool in the open",
    "start": "162160",
    "end": "167280"
  },
  {
    "text": "on github with the community um that sort of has an unclear destination we're",
    "start": "167280",
    "end": "172959"
  },
  {
    "text": "just trying to build some cool tech we're trying to learn as much as we can along the way um",
    "start": "172959",
    "end": "178000"
  },
  {
    "text": "and we'll talk a little bit more about what that means in the future and it's a.net core focus cloud development tool",
    "start": "178000",
    "end": "184319"
  },
  {
    "text": "focusing probably on your local development but also a little bit on sort of deployment publishing in your overall",
    "start": "184319",
    "end": "190080"
  },
  {
    "text": "microservices workflow and if you haven't checked it out already you can find it on github hopefully what you're going to see today",
    "start": "190080",
    "end": "196480"
  },
  {
    "text": "is going to wet your whistle a little bit and make you make you interested to go look at that and tell us what you think",
    "start": "196480",
    "end": "203280"
  },
  {
    "text": "so with that i'm going to i'm going to drop doubt of the slides new personal best of three minutes",
    "start": "203280",
    "end": "208959"
  },
  {
    "text": "slides and we're just going to go right into some demos here",
    "start": "208959",
    "end": "214000"
  },
  {
    "text": "so i've got my terminal here and i'm going to load up the first demo",
    "start": "214000",
    "end": "219440"
  },
  {
    "text": "and where better to start with demos than a sort of hello world kind of application really simple little",
    "start": "219440",
    "end": "227519"
  },
  {
    "text": "thing and we're really going to get to the essence here of what it means to do to do",
    "start": "227519",
    "end": "233840"
  },
  {
    "text": "microservices development or to do multi-service development so i've got a front-end project and i've",
    "start": "233840",
    "end": "239439"
  },
  {
    "text": "got a back-end project and i've got a.net i've got them in a.net solution here using vs code by the way if you haven't",
    "start": "239439",
    "end": "246239"
  },
  {
    "text": "figured that out and i'll just show you all the code in these projects there's a really small",
    "start": "246239",
    "end": "251760"
  },
  {
    "text": "amount of code here and there's absolutely nothing tricky going on um so here's here's a front-end project",
    "start": "251760",
    "end": "258239"
  },
  {
    "text": "it's got no dependencies other than asp.net core and here's my back-end project it's got",
    "start": "258239",
    "end": "264240"
  },
  {
    "text": "no dependencies other than asp.net core and it's got a program cs and it's got a startup cs and",
    "start": "264240",
    "end": "270160"
  },
  {
    "text": "configuration and other than that there is nothing going on so let's take a look at the code and i'm",
    "start": "270160",
    "end": "276080"
  },
  {
    "text": "trying to build basically the simplest thing that gets to the essence of what you're doing if you're doing",
    "start": "276080",
    "end": "281840"
  },
  {
    "text": "microservices over http or just you know web app and api tier style development",
    "start": "281840",
    "end": "287840"
  },
  {
    "text": "so i've got the standard boilerplate startup cs i've got adjacent serializer options and",
    "start": "287840",
    "end": "294320"
  },
  {
    "text": "i've got one little endpoint here and i'm just going to respond to the root url and i'm going to respond with some",
    "start": "294320",
    "end": "299759"
  },
  {
    "text": "information about myself so what is my um what is my local ip",
    "start": "299759",
    "end": "305680"
  },
  {
    "text": "address what is my local host name and what is my content type and serialized adjacent",
    "start": "305680",
    "end": "312720"
  },
  {
    "text": "to the response that's the backend app and my frontend app",
    "start": "312720",
    "end": "317919"
  },
  {
    "text": "we'll take a look there and in my frontend app i've got health checks and i've got i've got one",
    "start": "317919",
    "end": "325120"
  },
  {
    "text": "endpoint here i'm going to respond to the root url and",
    "start": "325120",
    "end": "330479"
  },
  {
    "text": "i'm going to do some service to service communication so i'm going to do i'm going to do sort of the first most basic thing here",
    "start": "330479",
    "end": "337360"
  },
  {
    "text": "i'm going to get an http client and i'm going to call into my back end api",
    "start": "337360",
    "end": "342560"
  },
  {
    "text": "and i've got a little helper method here to get the back end get the uri of the backend service and then i'll deserialize the json and",
    "start": "342560",
    "end": "349199"
  },
  {
    "text": "i'm going to print out basically the same information for myself so where is my back end i p address what is",
    "start": "349199",
    "end": "354320"
  },
  {
    "text": "my back end host name so just demonstrating really that i can communicate between these two services",
    "start": "354320",
    "end": "359600"
  },
  {
    "text": "so let's we're really doing fundamentals here but if i wanted to run these two projects like what would i do",
    "start": "359600",
    "end": "366720"
  },
  {
    "text": "think about what you would do if you'd run these projects if you're in vs code you might open two",
    "start": "366720",
    "end": "372800"
  },
  {
    "text": "terminals and launch two projects at two terminals i have heard legend",
    "start": "372800",
    "end": "378000"
  },
  {
    "text": "tell that it's possible to write a launch config for vs code that will launch them um that will",
    "start": "378000",
    "end": "384960"
  },
  {
    "text": "launch them in both at the same time some people i know would open like two vs code windows",
    "start": "384960",
    "end": "391919"
  },
  {
    "text": "the other thing that you could do if you're in visual studio is that you could use visual studio to",
    "start": "391919",
    "end": "397520"
  },
  {
    "text": "configure a multi a multi-project launch which is kind of a kind of hidden in the menus but it",
    "start": "397520",
    "end": "403199"
  },
  {
    "text": "seems to work pretty well and you can get an experience where you launch multiple projects but i guess what i want to impress upon you is that most of",
    "start": "403199",
    "end": "410080"
  },
  {
    "text": "our solutions most of our tools and technologies that we use today are really oriented around",
    "start": "410080",
    "end": "415280"
  },
  {
    "text": "the idea of running one thing at a time but when we do microservices development or we do",
    "start": "415280",
    "end": "420639"
  },
  {
    "text": "multi-service development in general we're really talking about running multiple things at a time",
    "start": "420639",
    "end": "426000"
  },
  {
    "text": "the other thing that i would mention is if i'm doing this in vs code i will get a port conflict in vs code by",
    "start": "426000",
    "end": "432240"
  },
  {
    "text": "default by default these services are both going to want to use port 5000",
    "start": "432240",
    "end": "437280"
  },
  {
    "text": "and that's going to conflict in vs code and it's going to cause a problem now in visual studio by default again",
    "start": "437280",
    "end": "444560"
  },
  {
    "text": "you would get different ports because iis would use different ports by default but maybe you're not using visual studio",
    "start": "444560",
    "end": "451039"
  },
  {
    "text": "maybe you're not even on windows maybe you're not using iis in production and so you're not using iis as part of",
    "start": "451039",
    "end": "457199"
  },
  {
    "text": "your development all these factors come into play and you have to play this game of",
    "start": "457199",
    "end": "462560"
  },
  {
    "text": "how do i choose ports that i can remember that don't conflict with each other so that i can launch my apps at the same",
    "start": "462560",
    "end": "469120"
  },
  {
    "text": "time and everything can work in harmony so we're now to the first thing that ty can do for you",
    "start": "469120",
    "end": "474879"
  },
  {
    "text": "and let's let's go ahead and run some code sorry my prompt is taking over the world so we'll do a tie",
    "start": "474879",
    "end": "481120"
  },
  {
    "text": "run and i'm in the same directory as my front-end back-end solution",
    "start": "481120",
    "end": "487120"
  },
  {
    "text": "and so over here we can see loads application details launches tie host runs a dashboard builds projects and",
    "start": "487120",
    "end": "493919"
  },
  {
    "text": "then there's a whole bunch of spew which you can probably ignore if i click that link that's this link",
    "start": "493919",
    "end": "498960"
  },
  {
    "text": "right here it's the thai dashboard the dashboard is always going to launch on a predictable",
    "start": "498960",
    "end": "504240"
  },
  {
    "text": "port and what i can see when i come to the dashboard right away is well it's got a list of services it's",
    "start": "504240",
    "end": "510560"
  },
  {
    "text": "got my front end my back end where they came from um what urls they're listening on",
    "start": "510560",
    "end": "516320"
  },
  {
    "text": "replicas restarts and logs so it's pretty cool so this is like you should sort of think of this like your developer console for multi-service",
    "start": "516320",
    "end": "523599"
  },
  {
    "text": "development you need a you need a sort of status dashboard or sort of like here's the state of what's going on",
    "start": "523599",
    "end": "530000"
  },
  {
    "text": "let's let's go ahead and try this let's try my back-end service and see if that's working so just open that url",
    "start": "530000",
    "end": "536399"
  },
  {
    "text": "and you can see that we got a response from the backend service this is my my host name where i'm sat and then",
    "start": "536399",
    "end": "542480"
  },
  {
    "text": "let's try the front end project and uh oh so the front end project is crashing um because the",
    "start": "542480",
    "end": "548720"
  },
  {
    "text": "request uri must be an absolute uri or base address must be set i've done a lot with",
    "start": "548720",
    "end": "554399"
  },
  {
    "text": "http client but i'm not really sure what that means so um i think what i want to do is debug",
    "start": "554399",
    "end": "560240"
  },
  {
    "text": "and so i'm going to come back over here and i'm going to do tie run again but this time i'm going to say debug",
    "start": "560240",
    "end": "565600"
  },
  {
    "text": "and i'm going to add front end this is confusing me front end there",
    "start": "565600",
    "end": "572320"
  },
  {
    "text": "so now what it's going to do um is it's going to do tie run again and it's going to launch the processes but it's going to",
    "start": "572320",
    "end": "580800"
  },
  {
    "text": "halt the front end process from starting so if we did open the dashboard and we did try to visit this",
    "start": "580800",
    "end": "586160"
  },
  {
    "text": "visit this app via its http url it would just block effectively because we've injected code",
    "start": "586160",
    "end": "592800"
  },
  {
    "text": "into the process that's going to trigger basically a weight loop and it's just going to wait for a debugger to attach",
    "start": "592800",
    "end": "598800"
  },
  {
    "text": "so this is a nice way to be able to get your startup errors and things like that when you're doing a multi-process launch",
    "start": "598800",
    "end": "604160"
  },
  {
    "text": "which is a nice little convenience so if i come over here and i say attach you can see i've got my back-end and",
    "start": "604160",
    "end": "609360"
  },
  {
    "text": "front-end processes running if i choose front-end it's going to tell me everything about",
    "start": "609360",
    "end": "616079"
  },
  {
    "text": "all the symbols and every dll that's ever existed thanks um and i'm right here at",
    "start": "616079",
    "end": "621680"
  },
  {
    "text": "my get back in uri call let's make sure that that's working oh it's null okay so that's the problem so i'm not",
    "start": "621680",
    "end": "628800"
  },
  {
    "text": "getting the uri of my back end and i know i lied to you i tricked you that was mean i said that we would be able to get the",
    "start": "628800",
    "end": "634959"
  },
  {
    "text": "uri of the back end but we can't actually do it let's take a look at the implementation",
    "start": "634959",
    "end": "640240"
  },
  {
    "text": "of this function yeah sorry i've got a i've got a to do here that i didn't quite address and somebody",
    "start": "640240",
    "end": "646000"
  },
  {
    "text": "let that through code review so we need to now know if we're going to do service to service communication",
    "start": "646000",
    "end": "651839"
  },
  {
    "text": "we now need to know how we're going to get the uri of that other service and it's not really as straightforward",
    "start": "651839",
    "end": "658320"
  },
  {
    "text": "as it sounds because maybe the uri of your other service is going to be different in development from production from staging",
    "start": "658320",
    "end": "665120"
  },
  {
    "text": "from you know your machine from the way your friend likes to debug and it could be it could be different",
    "start": "665120",
    "end": "671360"
  },
  {
    "text": "right it could be subtle and there could be lots of complexity to it so i have a sort of",
    "start": "671360",
    "end": "677440"
  },
  {
    "text": "you know thought in my brain that as a developer as an engineer we like to solve problems",
    "start": "677440",
    "end": "683040"
  },
  {
    "text": "and we like to build conventions and solutions about how to solve problems so one of the things that i might do or i",
    "start": "683040",
    "end": "689200"
  },
  {
    "text": "think that you might do if you needed to solve this problem is you might say well i'll use environment variables i'll",
    "start": "689200",
    "end": "695200"
  },
  {
    "text": "use environment variables to pass in the host name and the port and the protocol and things",
    "start": "695200",
    "end": "700640"
  },
  {
    "text": "like that and then i can build a url from those things or you might choose to use an environment variable to pass it all",
    "start": "700640",
    "end": "705920"
  },
  {
    "text": "in one so i'm going to take a stab at that so let's say i use some environment",
    "start": "705920",
    "end": "713920"
  },
  {
    "text": "variables here and i'm going to read these environment variables and i'm going to combine them into uri",
    "start": "713920",
    "end": "719600"
  },
  {
    "text": "and then i'll log the results so let's give this try",
    "start": "719600",
    "end": "725199"
  },
  {
    "text": "tyron again",
    "start": "725279",
    "end": "730480"
  },
  {
    "text": "let's bring up our dashboard so everything seems to have started",
    "start": "730480",
    "end": "736240"
  },
  {
    "text": "everything seems to have been working let's give this a try and it worked so we got the front end",
    "start": "736240",
    "end": "742240"
  },
  {
    "text": "and listening ip we got the we got the host name of ourselves we got the listening ip and hostname of the",
    "start": "742240",
    "end": "748399"
  },
  {
    "text": "backend and they're the same but the fact that i can print this out proves that i actually did call through to the back",
    "start": "748399",
    "end": "754880"
  },
  {
    "text": "end and get that information if we come to the dashboard and look at the logs you can see that we've actually",
    "start": "754880",
    "end": "760880"
  },
  {
    "text": "logged the back end url so we did get the back end url and environment variables and we did",
    "start": "760880",
    "end": "766639"
  },
  {
    "text": "feed it out into these logs so that's working but this is still kind of this is still",
    "start": "766639",
    "end": "772160"
  },
  {
    "text": "kind of grunge um compared to what i'd really like to do so you know if we're asp.net developers uh",
    "start": "772160",
    "end": "778639"
  },
  {
    "text": "one of the things that we have that's really nice is configuration right a bunch of different sources of",
    "start": "778639",
    "end": "783839"
  },
  {
    "text": "data feed into configuration including environment variables by default could be json files could be",
    "start": "783839",
    "end": "788959"
  },
  {
    "text": "environment variables could be command line flags it could be lots of things it's extensible so can we",
    "start": "788959",
    "end": "794639"
  },
  {
    "text": "leverage configuration to do the same thing and spoilers yes um so the reason why i",
    "start": "794639",
    "end": "801120"
  },
  {
    "text": "chose these particular environment variables is that these particular environment variables",
    "start": "801120",
    "end": "806639"
  },
  {
    "text": "map to some configuration keys so it's not a mistake not a typo double underscore for kind of bizarre",
    "start": "806639",
    "end": "814000"
  },
  {
    "text": "reasons that you can ask me about later if you want maps the configuration key separator so if i",
    "start": "814000",
    "end": "820959"
  },
  {
    "text": "wanted to i could replace that with this and so i could say",
    "start": "820959",
    "end": "826000"
  },
  {
    "text": "get get the service node from configuration get the back end node from configuration and get the protocol node",
    "start": "826000",
    "end": "832000"
  },
  {
    "text": "from configuration and that's like if this you know it's like if i used this",
    "start": "832000",
    "end": "840639"
  },
  {
    "text": "configuration style and so on right it those separators those colons there",
    "start": "840639",
    "end": "846399"
  },
  {
    "text": "represent a nested configuration structure like you would see in json",
    "start": "846399",
    "end": "851519"
  },
  {
    "text": "so if you were code reviewing this i hope i hope you would say this if you're code reviewing this maybe you would",
    "start": "851519",
    "end": "856639"
  },
  {
    "text": "maybe you wouldn't um but if you're code reviewing this you might say you know that's kind of messy and it really seems",
    "start": "856639",
    "end": "864079"
  },
  {
    "text": "like this code could be extracted into a library or into helper method",
    "start": "864079",
    "end": "869199"
  },
  {
    "text": "so that we don't end up with 50 different versions of this code copy pasted really the only thing you care about",
    "start": "869199",
    "end": "876720"
  },
  {
    "text": "is diff is this and if you've got a lot of services and you've got a lot of different touch points of communication",
    "start": "876720",
    "end": "881839"
  },
  {
    "text": "you're going to have a lot of versions of this code copy paste it around right so let's do that let's write a little",
    "start": "881839",
    "end": "888800"
  },
  {
    "text": "helper method for it and i i will tell you that we have written that helper method for you",
    "start": "888800",
    "end": "895519"
  },
  {
    "text": "and the reason why it's not showing up is that we've shipped it in a nuget package so if i come over here to my project",
    "start": "895519",
    "end": "901839"
  },
  {
    "text": "file i can add this package microsoft tie extensions configuration",
    "start": "901839",
    "end": "907279"
  },
  {
    "text": "save and then any moment now",
    "start": "907279",
    "end": "913839"
  },
  {
    "text": "there we go and we should be okay yeah good job vs code",
    "start": "914079",
    "end": "921760"
  },
  {
    "text": "um so let me jump to this and i will tell you that this is this is basically the code um this is",
    "start": "921760",
    "end": "927440"
  },
  {
    "text": "basically the code that is in that uh in that block that i showed you",
    "start": "927440",
    "end": "932800"
  },
  {
    "text": "before and this is like the world's smallest nuget library it's not literally the world's smallest but it you get a",
    "start": "932800",
    "end": "939839"
  },
  {
    "text": "it's got one type and it's got two methods in it and we've got additional we've got an overload of get",
    "start": "939839",
    "end": "945519"
  },
  {
    "text": "service uri we've got an additional overload of get connection string and these are all ties opinions about",
    "start": "945519",
    "end": "953120"
  },
  {
    "text": "how to get data from one service to another we call this service discovery ty's opinions about how to do service",
    "start": "953120",
    "end": "959519"
  },
  {
    "text": "discovery are that we set environment variables those environment variables follow a",
    "start": "959519",
    "end": "964959"
  },
  {
    "text": "predictable convention and those environment variables can flow into configuration so that you can query",
    "start": "964959",
    "end": "970720"
  },
  {
    "text": "them using anything that has access to configuration which is pretty cool and there's no trickery this looks like",
    "start": "970720",
    "end": "978560"
  },
  {
    "text": "and really sort of feels like to me a convention that somebody else would design",
    "start": "978560",
    "end": "983839"
  },
  {
    "text": "so if you decide you don't want to do it this way you could do something different but having a built-in convention helps us",
    "start": "983839",
    "end": "989759"
  },
  {
    "text": "and makes us really productive so if we walk through what we've seen",
    "start": "989759",
    "end": "995279"
  },
  {
    "text": "the fact that we have these two projects in the same solution means that thai will generate",
    "start": "995279",
    "end": "1001519"
  },
  {
    "text": "environment variables when it runs them inject them into each process so that the processes can know how to find each",
    "start": "1001519",
    "end": "1007759"
  },
  {
    "text": "other those environment variables get read into configuration using the built-in sort of defaults of",
    "start": "1007759",
    "end": "1013759"
  },
  {
    "text": "asp.net core configuration and then you can use this helper method to query them but at the end of the day",
    "start": "1013759",
    "end": "1019279"
  },
  {
    "text": "it's just environment variables and configuration there's nothing really tricky or magical happening here it's just",
    "start": "1019279",
    "end": "1024959"
  },
  {
    "text": "because they're all part of the same they're all part of the same thing so",
    "start": "1024959",
    "end": "1030079"
  },
  {
    "text": "um let's see something else that's kind of interesting about this and that's that's the question of",
    "start": "1030079",
    "end": "1037360"
  },
  {
    "text": "like well i said let's make production let's make development like production one of the ways that we can help make",
    "start": "1037360",
    "end": "1043360"
  },
  {
    "text": "development like production is giving you access to your production tools in development",
    "start": "1043360",
    "end": "1049360"
  },
  {
    "text": "and giving you patterns that encourage flexibility so that you can you can leverage all",
    "start": "1049360",
    "end": "1055280"
  },
  {
    "text": "that so one thing i want to highlight that i think i forgot to highlight before is if we look at the dashboard you can",
    "start": "1055280",
    "end": "1061679"
  },
  {
    "text": "see that these ports are auto assigned right these are these are you'll notice that",
    "start": "1061679",
    "end": "1067760"
  },
  {
    "text": "they're sequential you won't find these hard-coded anywhere in the code tai is assigning these ports and handing",
    "start": "1067760",
    "end": "1073360"
  },
  {
    "text": "them off to asp.net and saying hey please use these ports to run on and that's not a mistake it's on purpose",
    "start": "1073360",
    "end": "1079919"
  },
  {
    "text": "there there is you can configure that and you can use uh specified ports if you want to",
    "start": "1079919",
    "end": "1085120"
  },
  {
    "text": "but maybe your production system needs to assign them for you or maybe you routinely use different",
    "start": "1085120",
    "end": "1091120"
  },
  {
    "text": "ports in dev than you do in production we're trying to encourage you to do more portable things and more flexible things",
    "start": "1091120",
    "end": "1098400"
  },
  {
    "text": "so that you know your application is going to work the first time that you run in production so to that end let's do something let's",
    "start": "1098400",
    "end": "1105760"
  },
  {
    "text": "let's show off something else that we can do and i'm going to massage these windows a little bit so that my",
    "start": "1105760",
    "end": "1111840"
  },
  {
    "text": "beautiful face is not covering up my command prompt there we go so i'm going to do tie run dash",
    "start": "1111840",
    "end": "1118799"
  },
  {
    "text": "docker which i guess is going to be just shocking so can we can we just run these in",
    "start": "1118799",
    "end": "1125760"
  },
  {
    "text": "docker just as one of my favorite software words why don't you just do that can we just run these in docker",
    "start": "1125760",
    "end": "1134160"
  },
  {
    "text": "and you can see there's lots of docker things that are happening here let's take a look uh appears we can",
    "start": "1134160",
    "end": "1141200"
  },
  {
    "text": "just run these in docker so instead of our projects now we used to see projects here now we see",
    "start": "1141200",
    "end": "1146960"
  },
  {
    "text": "containers and we see a base image let's give it a try so that's our back",
    "start": "1146960",
    "end": "1152880"
  },
  {
    "text": "end and that's our front end and with our front end",
    "start": "1152880",
    "end": "1158559"
  },
  {
    "text": "we've got a different listening ip and we've got a different hostname and we've got a different listening ip",
    "start": "1158559",
    "end": "1164880"
  },
  {
    "text": "and a different host name for our backend let's check out one more thing docker ps",
    "start": "1164880",
    "end": "1170559"
  },
  {
    "text": "which if you're a docker head not a docker head list list running containers like psax but",
    "start": "1170559",
    "end": "1176400"
  },
  {
    "text": "for docker and you can see that we've got container ids images done at front-end dll done at back-end",
    "start": "1176400",
    "end": "1183039"
  },
  {
    "text": "dll that's our code so my hypothesis here these container ids",
    "start": "1183039",
    "end": "1189120"
  },
  {
    "text": "this one's 106 8 this one's d366 they show up here because inside the",
    "start": "1189120",
    "end": "1196960"
  },
  {
    "text": "container that's what the operating system says the hostname is so inside the container the operating",
    "start": "1196960",
    "end": "1203280"
  },
  {
    "text": "system says the hostname is this we're reporting that in our code and it's flowing all the way out",
    "start": "1203280",
    "end": "1208720"
  },
  {
    "text": "now i would remind you that we don't have any docker files we haven't done",
    "start": "1208720",
    "end": "1213919"
  },
  {
    "text": "anything to do docker here we just ran stuff in docker which i think is pretty neat",
    "start": "1213919",
    "end": "1219840"
  },
  {
    "text": "and we don't lose the ability to do things like c logs because we're running in docker and",
    "start": "1219840",
    "end": "1225360"
  },
  {
    "text": "you can see some of those environment variables there one more little trick here that i think",
    "start": "1225360",
    "end": "1230559"
  },
  {
    "text": "is kind of cool we'll shut this down i'm gonna do a",
    "start": "1230559",
    "end": "1236080"
  },
  {
    "text": "tie run again and show off one more little thing um dashboard by the way is a blazer",
    "start": "1236080",
    "end": "1243600"
  },
  {
    "text": "server application so you see the overlay of gray telling you the the process has gone away is a hallmark of a",
    "start": "1243600",
    "end": "1250640"
  },
  {
    "text": "blazer server application that uh when something shuts down we shut down a lot one of the big enhancements that we're",
    "start": "1250640",
    "end": "1257440"
  },
  {
    "text": "working on and i'll come back to this again in the future because i think it's pretty important we're working on a watch mode for tie so",
    "start": "1257440",
    "end": "1264159"
  },
  {
    "text": "that you can do thai run and leave 15 services running and then iterate on one of them",
    "start": "1264159",
    "end": "1270799"
  },
  {
    "text": "sort of while you're going and not have to shut down everything so let me bring get this window",
    "start": "1270799",
    "end": "1278480"
  },
  {
    "text": "and i'm going to shrink this down so if i click on the name of a service",
    "start": "1278480",
    "end": "1286880"
  },
  {
    "text": "what it's going to take me to is the metrics dashboard and this is effectively done at counters",
    "start": "1286880",
    "end": "1292000"
  },
  {
    "text": "if you've seen donna counters a little diagnostic command line tool to read performance counter like things this is done at counters",
    "start": "1292000",
    "end": "1299440"
  },
  {
    "text": "in a web ui so it's not a not a mistake that we're using or not an accident that we're using blazer server",
    "start": "1299440",
    "end": "1305200"
  },
  {
    "text": "you can see we've got two total requests let's do let's do some more let's do some more requests and just",
    "start": "1305200",
    "end": "1311520"
  },
  {
    "text": "prove that this is that this is really happening so you can see our number of total requests and",
    "start": "1311520",
    "end": "1317520"
  },
  {
    "text": "active requests per second is going up as i spam the refresh button so we're getting real counters it's really",
    "start": "1317520",
    "end": "1323039"
  },
  {
    "text": "happening it's this is all really happening to us so",
    "start": "1323039",
    "end": "1328320"
  },
  {
    "text": "let's let's try something else so we were able to write an app that easily runs locally to sort of easily solve service",
    "start": "1328320",
    "end": "1335200"
  },
  {
    "text": "discovery and communication locally what if we want and we could do the same thing in docker because",
    "start": "1335200",
    "end": "1340720"
  },
  {
    "text": "we've written our app in a way that's flexible about where it's running um can we run it in kubernetes i'm gonna",
    "start": "1340720",
    "end": "1347360"
  },
  {
    "text": "check one thing because i think i failed to clean up after myself which is a sin um",
    "start": "1347360",
    "end": "1354159"
  },
  {
    "text": "let me cl just ex pretend that this is not happening um and i will clean up after myself",
    "start": "1354159",
    "end": "1361200"
  },
  {
    "text": "and then we'll get on with this okay you can stop pretending that that",
    "start": "1361200",
    "end": "1366400"
  },
  {
    "text": "didn't happen all right so let's see can we run this",
    "start": "1366400",
    "end": "1371520"
  },
  {
    "text": "in kubernetes i'm going to do a tie deploy dash i",
    "start": "1371520",
    "end": "1377440"
  },
  {
    "text": "and dash i is for interactive the reason being that i'm going to push this to a real kubernetes cluster",
    "start": "1377440",
    "end": "1383360"
  },
  {
    "text": "running in azure so i need a container registry to push the images to",
    "start": "1383360",
    "end": "1388559"
  },
  {
    "text": "i'm going to use my docker hub if you have docker on your machine i'm going to guess that you already have a docker account i think they require",
    "start": "1388559",
    "end": "1395200"
  },
  {
    "text": "you to have one it's a good little sort of scratch pad place to push images and things that you are experimenting with",
    "start": "1395200",
    "end": "1401039"
  },
  {
    "text": "or that don't have anything sensitive in them but this could work with any container registry that docker can use",
    "start": "1401039",
    "end": "1407919"
  },
  {
    "text": "we effectively just piggyback on top of docker so breaking this down for each service",
    "start": "1407919",
    "end": "1414320"
  },
  {
    "text": "so i entered the container registry for each service i compiled the service i published the",
    "start": "1414320",
    "end": "1420559"
  },
  {
    "text": "project i built a docker image i pushed the docker image and i generated manifest",
    "start": "1420559",
    "end": "1425840"
  },
  {
    "text": "and i've now got this running in kubernetes so coupe ctl get pods is",
    "start": "1425840",
    "end": "1431440"
  },
  {
    "text": "like list the things that are running there and then by default things that are in kubernetes are not going to be",
    "start": "1431440",
    "end": "1437120"
  },
  {
    "text": "accessible to the internet so if i want to talk to it i'm going to have to do a port forward",
    "start": "1437120",
    "end": "1444159"
  },
  {
    "text": "so i'll port forward the front end and then this syntax is local port to remote port i happen to",
    "start": "1444159",
    "end": "1450320"
  },
  {
    "text": "know that it's going to be listening on port 80 because that's like the most sensible thing so that's what we do by default so local 5000",
    "start": "1450320",
    "end": "1456880"
  },
  {
    "text": "is now going to 80 in the cloud and you can see i've got different",
    "start": "1456880",
    "end": "1462720"
  },
  {
    "text": "listening ips different host names and so on this front end with a horrible thing",
    "start": "1462720",
    "end": "1468000"
  },
  {
    "text": "after it this back end with a horrible thing after it these are the names of our pods so",
    "start": "1468000",
    "end": "1473679"
  },
  {
    "text": "inside the container inside the pod that's what the operating system says the hostname is and that's what we're",
    "start": "1473679",
    "end": "1478880"
  },
  {
    "text": "repeating and these two services are able to communicate with each other in the cloud",
    "start": "1478880",
    "end": "1484240"
  },
  {
    "text": "in kubernetes without us having to really learn anything about kubernetes without us having to hard code anything",
    "start": "1484240",
    "end": "1491360"
  },
  {
    "text": "and we're able to deploy them without us writing any yaml so there's",
    "start": "1491360",
    "end": "1496559"
  },
  {
    "text": "actually no yaml anywhere in here there's no manifests or docker files or",
    "start": "1496559",
    "end": "1502159"
  },
  {
    "text": "arcane arcane anything that had to be learned or had to be customized",
    "start": "1502159",
    "end": "1507520"
  },
  {
    "text": "so i think that's pretty cool i'm going to go ahead and clean this up tie undeploy is how you which i've i've",
    "start": "1507520",
    "end": "1513600"
  },
  {
    "text": "seen earlier but you all forgot about tie on deploy is how you remove something basically we tag the",
    "start": "1513600",
    "end": "1519200"
  },
  {
    "text": "kubernetes objects in a way that we can associate them with the application so that we can easily just sort of tear",
    "start": "1519200",
    "end": "1524799"
  },
  {
    "text": "it all down so whatever we publish we can also unpublish so",
    "start": "1524799",
    "end": "1530000"
  },
  {
    "text": "i think that's pretty cool um let's talk a little bit let's wrap up a little bit about how this works right and let's think about like what",
    "start": "1530000",
    "end": "1537120"
  },
  {
    "text": "goes into a docker file or what goes into a kubernetes manifest so typically what goes into a docker",
    "start": "1537120",
    "end": "1543520"
  },
  {
    "text": "file is like well the base image right where are you starting from",
    "start": "1543520",
    "end": "1548960"
  },
  {
    "text": "and your base image is usually going to be something like the asp.net core base image version 31 or asp.net core version two one or",
    "start": "1548960",
    "end": "1556960"
  },
  {
    "text": "dot-net core version three one or two one if it's a worker or five-o hopefully five-o",
    "start": "1556960",
    "end": "1562159"
  },
  {
    "text": "so like could we could we guess like could we figure it out and the answer is yeah we can figure it",
    "start": "1562159",
    "end": "1568400"
  },
  {
    "text": "out docker files for the most part or boilerplate in the common case for net because.net has a rich project",
    "start": "1568400",
    "end": "1574640"
  },
  {
    "text": "system so we can look at this we can write tools that look at this and say oh this is a web project",
    "start": "1574640",
    "end": "1580960"
  },
  {
    "text": "we can write tools that look at this and say oh this is a 3-1 application so if you",
    "start": "1580960",
    "end": "1586320"
  },
  {
    "text": "think about like the docker tools in visual studio the docker tools in visual studio can generate a templated docker file for you",
    "start": "1586320",
    "end": "1592960"
  },
  {
    "text": "the next evolution of generating a file is to make the file go away completely on the side of",
    "start": "1592960",
    "end": "1599440"
  },
  {
    "text": "kubernetes i'm not going to assume that everybody here knows kubernetes but effectively what goes into a",
    "start": "1599440",
    "end": "1604960"
  },
  {
    "text": "kubernetes manifest is um what port am i listening on what image am i running things like that",
    "start": "1604960",
    "end": "1612080"
  },
  {
    "text": "just another layer higher than what goes into a docker image and the truth is that most of the time",
    "start": "1612080",
    "end": "1617760"
  },
  {
    "text": "there's a boilerplate not all the time but most of the time they're boilerplate so we can generate what you would want",
    "start": "1617760",
    "end": "1624080"
  },
  {
    "text": "for the common case uh just sort of trivially and without making too many assumptions we actually",
    "start": "1624080",
    "end": "1629919"
  },
  {
    "text": "haven't had too many feature requests uh from people to try and add those things so again because we're building a",
    "start": "1629919",
    "end": "1636080"
  },
  {
    "text": "dotnetfocus tool and we know about.net and donna has a rich project system we can sort of easily accelerate all",
    "start": "1636080",
    "end": "1643039"
  },
  {
    "text": "these things for you and you can use them without having to care about them or know about them working of course we do have",
    "start": "1643039",
    "end": "1650159"
  },
  {
    "text": "options for things like using your own docker file or customizing how that works customizing the base image we've had a",
    "start": "1650159",
    "end": "1656880"
  },
  {
    "text": "couple contributions on that from community people which has been awesome and like we do have those things but the",
    "start": "1656880",
    "end": "1662080"
  },
  {
    "text": "point is care about them when you need to care about them don't care about them for the common the super common cases",
    "start": "1662080",
    "end": "1668240"
  },
  {
    "text": "i talked to a lot of people who say things to me like well nobody really knows how to use",
    "start": "1668240",
    "end": "1674640"
  },
  {
    "text": "docker here we know how to use the command line but we don't really know how to write docker files and so the way that we use docker is",
    "start": "1674640",
    "end": "1682480"
  },
  {
    "text": "somebody who doesn't work here anymore wrote a docker file a year ago and we've copy pasted it into 100 different repos",
    "start": "1682480",
    "end": "1688159"
  },
  {
    "text": "right you don't really want to end up there right so you can choose to invest um we're",
    "start": "1688159",
    "end": "1694720"
  },
  {
    "text": "we're sort of on the line of like well don't don't write something down if it doesn't have any meaning",
    "start": "1694720",
    "end": "1700159"
  },
  {
    "text": "and most of the time for donut projects dockerfile doesn't have a ton of meaning so don't write it down",
    "start": "1700159",
    "end": "1705679"
  },
  {
    "text": "so uh one thing this is this is admittedly a very simple very fake kind of demo",
    "start": "1705679",
    "end": "1712080"
  },
  {
    "text": "right um because we don't have any data stores or any external dependencies it's just",
    "start": "1712080",
    "end": "1717360"
  },
  {
    "text": "your code and like how many really truly useful applications out there",
    "start": "1717360",
    "end": "1722480"
  },
  {
    "text": "have been written with just your code usually you're going to have something more sophisticated or some data stores",
    "start": "1722480",
    "end": "1728480"
  },
  {
    "text": "and things to talk to and tai can do that too i wouldn't bring it up if we couldn't it'd be",
    "start": "1728480",
    "end": "1733840"
  },
  {
    "text": "embarrassing so let's take a look at more reasonable bigger projects so i've got three.net",
    "start": "1733840",
    "end": "1741120"
  },
  {
    "text": "projects here and they're in a.net solution and this is a sample that i think docker",
    "start": "1741120",
    "end": "1747279"
  },
  {
    "text": "produced a long time ago and it is a voting application where you can settle the eternal question of which is best",
    "start": "1747279",
    "end": "1754480"
  },
  {
    "text": "cats and dogs and our architecture here i'll just run through it there's a there's a voting application",
    "start": "1754480",
    "end": "1760320"
  },
  {
    "text": "which is i think a razor pages application where it's going to put votes it's going to take your vote and put it in redis",
    "start": "1760320",
    "end": "1767039"
  },
  {
    "text": "and then there's a worker that's going to listen to that redis instance and it's going to process your votes and put them in",
    "start": "1767039",
    "end": "1772559"
  },
  {
    "text": "a postgres database and then there's a results page that's going to display the",
    "start": "1772559",
    "end": "1778159"
  },
  {
    "text": "aggregate number of votes so that we can really get to the bottom of this important question",
    "start": "1778159",
    "end": "1783200"
  },
  {
    "text": "so we've got redis and we've got postgres here and we've got our lovely3.net projects",
    "start": "1783200",
    "end": "1788240"
  },
  {
    "text": "so let's go ahead and do a tie run and see what happens",
    "start": "1788240",
    "end": "1794799"
  },
  {
    "text": "so i'll bring up the dashboard again close some of these i always end up with this like graveyard",
    "start": "1794799",
    "end": "1800000"
  },
  {
    "text": "of tabs when i do these demos so something seems off right away right we've got we've gotten",
    "start": "1800000",
    "end": "1807600"
  },
  {
    "text": "up to 20 restarts of the voting project and um you can see there's an error i i",
    "start": "1807600",
    "end": "1813279"
  },
  {
    "text": "lovingly crafted this error message need a connection string for postgresql um the reason why this is failing",
    "start": "1813279",
    "end": "1820320"
  },
  {
    "text": "is that we haven't told anybody how to configure where to get a",
    "start": "1820320",
    "end": "1825760"
  },
  {
    "text": "postgresql instance we need to run one um but we don't have one",
    "start": "1825760",
    "end": "1831039"
  },
  {
    "text": "so that's obviously a problem so if you were if you were living this life today what would you do",
    "start": "1831039",
    "end": "1837600"
  },
  {
    "text": "well you would install postgres on your machine and run it right or you would have a staging",
    "start": "1837600",
    "end": "1842799"
  },
  {
    "text": "instance in the cloud you would copy a connection string and put it in user secrets or you might run if you're pretty savvy",
    "start": "1842799",
    "end": "1849520"
  },
  {
    "text": "you might run postgres in a container but now you're orchestrating external tools so i need to remember to docker",
    "start": "1849520",
    "end": "1855360"
  },
  {
    "text": "run my postgres before i launch my application you might build some tooling or some scripts around that",
    "start": "1855360",
    "end": "1861120"
  },
  {
    "text": "well it's no surprise that like tai can manage this for you too because it's one of the most common things that we have to deal with as",
    "start": "1861120",
    "end": "1867600"
  },
  {
    "text": "service developers is where do my data where do my data stores come from and how do i manage their lifetimes",
    "start": "1867600",
    "end": "1873440"
  },
  {
    "text": "so let's do a tie init tie init is a command that is going to just like",
    "start": "1873440",
    "end": "1878960"
  },
  {
    "text": "scaffold out for you a configuration file and tie does have a configuration file uh the reason being that",
    "start": "1878960",
    "end": "1885200"
  },
  {
    "text": "it's not needed for cases like what we saw before but it's really helpful when your app goes beyond like one or two projects or",
    "start": "1885200",
    "end": "1892320"
  },
  {
    "text": "one or two dependencies and it's needed for dependencies in general so you shouldn't be too scared about it because",
    "start": "1892320",
    "end": "1897760"
  },
  {
    "text": "too scary tie init will by the way tie a knit will scaffold for",
    "start": "1897760",
    "end": "1903279"
  },
  {
    "text": "you what we would generate by default so this is effectively what ti sees by",
    "start": "1903279",
    "end": "1909120"
  },
  {
    "text": "default if you just give us a solution file or a directory we do have a schema and we do have",
    "start": "1909120",
    "end": "1915679"
  },
  {
    "text": "schema validation and there is a bug with it and the bug has been fixed but not",
    "start": "1915679",
    "end": "1920720"
  },
  {
    "text": "published out to the version of the schema that i'm using so i am aware of these little squiggles",
    "start": "1920720",
    "end": "1925919"
  },
  {
    "text": "um they're here to help um and there is some there is some completion and things like that for this file",
    "start": "1925919",
    "end": "1931919"
  },
  {
    "text": "as well but you shouldn't be too scared about this because it's not as complicated as something",
    "start": "1931919",
    "end": "1937360"
  },
  {
    "text": "like a helm chart if you've seen those so going back to what we were doing we",
    "start": "1937360",
    "end": "1942720"
  },
  {
    "text": "were going to add postgres and redis here so let's go ahead and do that so here's my here's my redis i've just got snippets",
    "start": "1942720",
    "end": "1949279"
  },
  {
    "text": "so you don't have to watch me remember this and let's talk through this so i'm adding a service",
    "start": "1949279",
    "end": "1954960"
  },
  {
    "text": "to my list of services called redis we're introducing some of the concepts here right all your projects or services now we",
    "start": "1954960",
    "end": "1961919"
  },
  {
    "text": "have a service that comes from an image and this is just the docker image so this is just the name of the docker",
    "start": "1961919",
    "end": "1967600"
  },
  {
    "text": "image yeah redis and then something else that's cool that's going on here is this binding",
    "start": "1967600",
    "end": "1972640"
  },
  {
    "text": "section so the way that tai thinks about bindings and the way that tai thinks",
    "start": "1972640",
    "end": "1977919"
  },
  {
    "text": "about composition is that you have a list of services services have what we call bindings and",
    "start": "1977919",
    "end": "1985679"
  },
  {
    "text": "bindings are like here's what i have right so if you're redis you're saying here's",
    "start": "1985679",
    "end": "1991919"
  },
  {
    "text": "what i have i have port 6379 where i'm going to be listening for tcp",
    "start": "1991919",
    "end": "1998880"
  },
  {
    "text": "and i also have a connection string that people should use if they want to connect to me",
    "start": "1998880",
    "end": "2005519"
  },
  {
    "text": "and the way to sort of think about the difference between like a uri and a connection string is uris are",
    "start": "2005519",
    "end": "2011440"
  },
  {
    "text": "always uris they always have a port uh or an optional port a protocol and a like hostname",
    "start": "2011440",
    "end": "2018240"
  },
  {
    "text": "whereas connection strings are just text so like your database has a password it's probably not a uri right",
    "start": "2018240",
    "end": "2025440"
  },
  {
    "text": "your redis connection string might have a password in this case it doesn't because we haven't configured one",
    "start": "2025440",
    "end": "2030799"
  },
  {
    "text": "but it might just be arbitrary key value pairs it's arbitrary text right so the fact that we've declared redis",
    "start": "2030799",
    "end": "2038320"
  },
  {
    "text": "as part of this application and the fact that we've declared a binding with a connection string",
    "start": "2038320",
    "end": "2043519"
  },
  {
    "text": "as part of this application means that inside my voting application",
    "start": "2043519",
    "end": "2051679"
  },
  {
    "text": "i can call configuration.getconnectionstring now this is a built-in in the box",
    "start": "2052639",
    "end": "2058240"
  },
  {
    "text": "asp.net core method or microsoft extensions configuration method we're actually using the same",
    "start": "2058240",
    "end": "2064638"
  },
  {
    "text": "configuration or the same conventions around connection strings that you would get today if you scaffold",
    "start": "2064639",
    "end": "2070720"
  },
  {
    "text": "an asp.net core website with a sql database so it's not actually different than some",
    "start": "2070720",
    "end": "2075919"
  },
  {
    "text": "of the things you're doing today we're just automating it for you and then the way that this works is where we're using",
    "start": "2075919",
    "end": "2082480"
  },
  {
    "text": "like text substitution in here to substitute in the port and the host name that redis",
    "start": "2082480",
    "end": "2088000"
  },
  {
    "text": "is running on um the reason why we recommend doing this there's a long dock that i wrote about it that's",
    "start": "2088000",
    "end": "2094320"
  },
  {
    "text": "amazing and you should read um but the reason why we do stuff like this like instead of hard-coding localhost is",
    "start": "2094320",
    "end": "2101599"
  },
  {
    "text": "you can't use localhost inside of docker to refer to something else inside of another docker container so",
    "start": "2101599",
    "end": "2108880"
  },
  {
    "text": "the actual connection string for redis depends on who's asking which is an incredibly subtle",
    "start": "2108880",
    "end": "2114560"
  },
  {
    "text": "thing to understand but for now just say you know what we don't like hard coding we're not going to hard code",
    "start": "2114560",
    "end": "2120960"
  },
  {
    "text": "the other thing that's going on here is this postgres container so when we initialize this postgres",
    "start": "2120960",
    "end": "2127200"
  },
  {
    "text": "container we need to tell postgres it's going to create a user for you by default called postgres",
    "start": "2127200",
    "end": "2132640"
  },
  {
    "text": "and we need to tell it what password to use for that user and we can actually use the same sort of",
    "start": "2132640",
    "end": "2137920"
  },
  {
    "text": "like string substitution to say like let's not repeat ourselves with that password so",
    "start": "2137920",
    "end": "2143040"
  },
  {
    "text": "using i'm going to both set it as an environment variable for the container and feed it in here as my password",
    "start": "2143040",
    "end": "2151359"
  },
  {
    "text": "so i've now got postgres and redis as part of this part of this sort of service topology",
    "start": "2151359",
    "end": "2157200"
  },
  {
    "text": "and i'll go ahead and run this and again when we do this all of the services that are part of",
    "start": "2157200",
    "end": "2163520"
  },
  {
    "text": "this application are all going to be offered the connection strings for both of these things through environment variables",
    "start": "2163520",
    "end": "2169280"
  },
  {
    "text": "so we take the approach by default of assuming that everything's in a thai yaml are like buds with each other like their",
    "start": "2169280",
    "end": "2175599"
  },
  {
    "text": "friends you can control the visibility of these things if you want to you can be explicit about the",
    "start": "2175599",
    "end": "2181200"
  },
  {
    "text": "dependencies if you want to we don't do it by default just because it's complicated and maybe you don't want that one or need that",
    "start": "2181200",
    "end": "2187760"
  },
  {
    "text": "level of complication in your life i know i don't so we've got our services running we've got our two containers and",
    "start": "2187760",
    "end": "2194000"
  },
  {
    "text": "we've got our three projects if we go ahead and look at the redis service you can see there's log messages here",
    "start": "2194000",
    "end": "2200880"
  },
  {
    "text": "from redis and we can see the same for postgres except my face is in the way",
    "start": "2200880",
    "end": "2206480"
  },
  {
    "text": "so we've got everything working here and let's go ahead and give this application a try so the first thing i'm going to do is go",
    "start": "2206480",
    "end": "2212400"
  },
  {
    "text": "to my voting application and i'm going to vote for dogs of course because i'm a dog person and",
    "start": "2212400",
    "end": "2217760"
  },
  {
    "text": "then i'm going to go to the results screen and hopefully this should work so we can see we've got one vote for dogs that's pretty cool you can actually",
    "start": "2217760",
    "end": "2224240"
  },
  {
    "text": "change your vote if you're having a really hard time deciding i'm only doing it because of a demo i",
    "start": "2224240",
    "end": "2229440"
  },
  {
    "text": "changed it and it's cats now i can change it back and it goes back to dogs so this is all kind of working as you'd",
    "start": "2229440",
    "end": "2236320"
  },
  {
    "text": "expect if we go to the dashboard here we can see some log messages from our worker our worker is listening on a queue in",
    "start": "2236320",
    "end": "2243119"
  },
  {
    "text": "redis says got a new vote from redis it's identifying me as a user via my session",
    "start": "2243119",
    "end": "2248400"
  },
  {
    "text": "and then writing the results to postgres and then it's sort of broadcast to the to the results service and says hey by",
    "start": "2248400",
    "end": "2255280"
  },
  {
    "text": "the way the results have changed and that's how that all comes together so that's kind of neat we can see how",
    "start": "2255280",
    "end": "2261040"
  },
  {
    "text": "tai can manage dependencies and how tai can get external dependencies working and things like",
    "start": "2261040",
    "end": "2267040"
  },
  {
    "text": "that let's think about how we can get this to kubernetes because we've now got",
    "start": "2267040",
    "end": "2272640"
  },
  {
    "text": "redis and we've now got postgres and things like that and so it's one thing to deploy your code it's",
    "start": "2272640",
    "end": "2278720"
  },
  {
    "text": "another thing to say i'm going to run postgres or i'm going to run redis for you in in kubernetes",
    "start": "2278720",
    "end": "2284400"
  },
  {
    "text": "um because that's kind of complicated and so we don't actually um tie doesn't tai has support for",
    "start": "2284400",
    "end": "2290720"
  },
  {
    "text": "deploying some containers if it's a container that you built from source so let's say you had the source code and",
    "start": "2290720",
    "end": "2297280"
  },
  {
    "text": "you told us to build a container for you we have support for deploying that but we don't by default sort of by",
    "start": "2297280",
    "end": "2303359"
  },
  {
    "text": "convention we don't deploy containers for things that you depend on as pre-built images if that makes sense",
    "start": "2303359",
    "end": "2310000"
  },
  {
    "text": "the reason being that it's probably not something you actually want to do um like in my case like it could be it",
    "start": "2310000",
    "end": "2316880"
  },
  {
    "text": "could be helpful for a demo to deploy postgres directly to kubernetes but like i'm not actually going to go to",
    "start": "2316880",
    "end": "2322960"
  },
  {
    "text": "production that way because i don't really know how to run postgres in production",
    "start": "2322960",
    "end": "2328480"
  },
  {
    "text": "on kubernetes what i would opt for is something like a hosted azure service or hosted aws service if you like aws",
    "start": "2328480",
    "end": "2336720"
  },
  {
    "text": "hosted services are probably a simpler way to go and so we're kind of optimized for that right now",
    "start": "2336720",
    "end": "2342480"
  },
  {
    "text": "so when i do a tie deploy i'm doing an interactive deploy again i've put in my username",
    "start": "2342480",
    "end": "2348480"
  },
  {
    "text": "it's asking me for a connection string for redis because the assumption is redis lives somewhere out the outside of",
    "start": "2348480",
    "end": "2354560"
  },
  {
    "text": "the cluster and that's pretty cool so i've actually got i've actually got a connection string for redis i need",
    "start": "2354560",
    "end": "2362240"
  },
  {
    "text": "to bring up another window sorry",
    "start": "2362240",
    "end": "2368160"
  },
  {
    "text": "you will by the way um i have a presentations repo where i put all of my presentation content um for",
    "start": "2368160",
    "end": "2375440"
  },
  {
    "text": "for ndc as well as for other things so um you will be able to see all my presentation materials later they're not",
    "start": "2375440",
    "end": "2382160"
  },
  {
    "text": "super up to date yet so here's my this will not get checked in by the way in case you're wondering and i will be",
    "start": "2382160",
    "end": "2388000"
  },
  {
    "text": "deleting these databases but here's my very secure storage for my connection strength so i've put in my",
    "start": "2388000",
    "end": "2393839"
  },
  {
    "text": "redis connection string come back to my very did i do that wrong",
    "start": "2393839",
    "end": "2398960"
  },
  {
    "text": "no i did it right okay let's get my redis connection string here's my redis connection string cool",
    "start": "2398960",
    "end": "2407040"
  },
  {
    "text": "so i'm i'm just going to let that scroll ah i'll let this let this deploy and not",
    "start": "2407040",
    "end": "2413359"
  },
  {
    "text": "leave it up on the screen for too long um in case people feel like being spicy but",
    "start": "2413359",
    "end": "2418480"
  },
  {
    "text": "i i know y'all are mature people so there we've done a deployment it took two minutes because i was talking over",
    "start": "2418480",
    "end": "2423520"
  },
  {
    "text": "it but we've deployed all three of our applications and we've taken the configuration",
    "start": "2423520",
    "end": "2430240"
  },
  {
    "text": "information about redis and postgres and put that in kubernetes secrets so if i do a kubectl",
    "start": "2430240",
    "end": "2436319"
  },
  {
    "text": "get pods you can see my three pods are running if i do a cube ctl get secret",
    "start": "2436319",
    "end": "2443839"
  },
  {
    "text": "you can see that i've got a secret for postgres and a secret for redis so let's test",
    "start": "2443839",
    "end": "2450079"
  },
  {
    "text": "this out and cube ctl port forward",
    "start": "2450079",
    "end": "2455760"
  },
  {
    "text": "service i think it's called vote yeah it's",
    "start": "2455760",
    "end": "2461839"
  },
  {
    "text": "called vote 5000 to 80. hopefully this works i was having",
    "start": "2461839",
    "end": "2467359"
  },
  {
    "text": "a little bit of trouble with the redis one last night",
    "start": "2467359",
    "end": "2471838"
  },
  {
    "text": "let's see i'll vote for dogs and then we have to come back here and let's do the same port forward but",
    "start": "2472960",
    "end": "2479680"
  },
  {
    "text": "let's do it for results okay that's up refresh cancel that's not",
    "start": "2479680",
    "end": "2486160"
  },
  {
    "text": "what i want yeah so you can see you can see my vote",
    "start": "2486160",
    "end": "2491920"
  },
  {
    "text": "and there are some existing votes here because this is a long lived postgrads that i've left running so we've got some votes here",
    "start": "2491920",
    "end": "2498160"
  },
  {
    "text": "everything seems to be going okay the other thing that i can do is i can do cubectl logs",
    "start": "2498160",
    "end": "2504880"
  },
  {
    "text": "and let's look at the logs for our worker and make sure that that's all going okay",
    "start": "2504880",
    "end": "2511200"
  },
  {
    "text": "so yeah you can see we got the vote we wrote it to postgrads other clients updated that's pretty cool that's working pretty",
    "start": "2511200",
    "end": "2516400"
  },
  {
    "text": "well one of the other things that i might want to do here that's kind of interesting is the port forwarding aspect of this has",
    "start": "2516400",
    "end": "2523040"
  },
  {
    "text": "just got me like super fatigued right like it's kind of repetitive and slow and lame like",
    "start": "2523040",
    "end": "2529440"
  },
  {
    "text": "i want to expose the voting service to be publicly accessible so that people can party on it and tell me what they really think about",
    "start": "2529440",
    "end": "2536640"
  },
  {
    "text": "cats versus dogs right um we've talked a little bit about making production",
    "start": "2536640",
    "end": "2541839"
  },
  {
    "text": "like making development like production let's see if we can leverage that where",
    "start": "2541839",
    "end": "2547760"
  },
  {
    "text": "did it go i don't know i nuked my vs code i knew to the vs code that i wanted",
    "start": "2547760",
    "end": "2555040"
  },
  {
    "text": "let's go ahead and do that so one of the things that i would use if i'm doing kubernetes is",
    "start": "2555040",
    "end": "2561440"
  },
  {
    "text": "i would create something called an ingress we've mentioned before that services are internal by default in kubernetes if i",
    "start": "2561440",
    "end": "2568880"
  },
  {
    "text": "wanted to expose something to the public what i would typically do is have an ip address associated with my cluster",
    "start": "2568880",
    "end": "2575359"
  },
  {
    "text": "i'd have a bunch of dns records pointing at that ip address and then i'd have something like an nginx proxy running there that's feeding",
    "start": "2575359",
    "end": "2582400"
  },
  {
    "text": "traffic to the different services well i normally wouldn't be able to do that sort of thing in my local",
    "start": "2582400",
    "end": "2588400"
  },
  {
    "text": "development but with tai i can so i can actually add an ingress here to my tie.yaml",
    "start": "2588400",
    "end": "2595839"
  },
  {
    "text": "and then i'll here and i'll do tyron and this is actually going to spin up a",
    "start": "2595839",
    "end": "2602079"
  },
  {
    "text": "local proxy it's not nginx in our case by the way it's it's um some of the guts of yarp um but it is",
    "start": "2602079",
    "end": "2609359"
  },
  {
    "text": "engine x when we deploy it so in my list of services you can see that i've actually got an ingress",
    "start": "2609359",
    "end": "2615040"
  },
  {
    "text": "so i've configured this ingress to listen on port 8080 and forward all traffic to the voting",
    "start": "2615040",
    "end": "2620960"
  },
  {
    "text": "service now the listening port is just basically just for local development probably should be renamed",
    "start": "2620960",
    "end": "2626720"
  },
  {
    "text": "to like local development port or something but uh the idea with this is that",
    "start": "2626720",
    "end": "2632160"
  },
  {
    "text": "you wanna you want to be able to test that your ingress is configured correctly so you can see i got to the",
    "start": "2632160",
    "end": "2637520"
  },
  {
    "text": "voting service which is what i wanted you want to be able to test and interact with your ingress in local development",
    "start": "2637520",
    "end": "2642640"
  },
  {
    "text": "because if you're doing more complicated things like path-based routing which with this does support you want to be able to",
    "start": "2642640",
    "end": "2648319"
  },
  {
    "text": "test that you want to be able to make that part of your development workflow and there aren't a lot of tools out there that can do that so we we felt",
    "start": "2648319",
    "end": "2654800"
  },
  {
    "text": "like that was pretty important so let's go ahead and deploy this to kubernetes",
    "start": "2654800",
    "end": "2660000"
  },
  {
    "text": "now since i'm deploying something that's already running um you'll notice that this time it's not",
    "start": "2660000",
    "end": "2665680"
  },
  {
    "text": "going to prompt me for any of those connection strings or configuration data it is going to prompt me for my registry",
    "start": "2665680",
    "end": "2671599"
  },
  {
    "text": "it's not going to prompt me for any of that info because uh it's already got that saved so it creates those kubernetes secrets",
    "start": "2671599",
    "end": "2678319"
  },
  {
    "text": "and and backs them and you can see right here found existing secret binding production redis secret so on",
    "start": "2678319",
    "end": "2684079"
  },
  {
    "text": "so it's gonna back those it's gonna back those connection strings with a with a kubernetes secret",
    "start": "2684079",
    "end": "2689440"
  },
  {
    "text": "and then the next time we deploy it's going to use that same thing now in order to sort of save time here i",
    "start": "2689440",
    "end": "2696000"
  },
  {
    "text": "have pre-deployed an ingress controller so if we do ctl get pods a",
    "start": "2696000",
    "end": "2703119"
  },
  {
    "text": "you can see that there's an nginx ingress engine x namespace with some pods running in it or one one running in",
    "start": "2703119",
    "end": "2709680"
  },
  {
    "text": "it so i have already deployed engine x um ty can do that for you not doing it because it takes about 45",
    "start": "2709680",
    "end": "2716480"
  },
  {
    "text": "seconds for it to start um there is a tutorial for ingress that sort of explains how this stuff works",
    "start": "2716480",
    "end": "2721520"
  },
  {
    "text": "and walks you through all the concepts and really gives a good explanation of it if you're curious about it um but in",
    "start": "2721520",
    "end": "2727359"
  },
  {
    "text": "order to save your time i've not done that so the way that i would get that ingress",
    "start": "2727359",
    "end": "2732400"
  },
  {
    "text": "we're going to do a cube ctl get service i need to do dash a for all",
    "start": "2732400",
    "end": "2740640"
  },
  {
    "text": "and we can see that i've got this ip address so this ip address 52 143",
    "start": "2740640",
    "end": "2747760"
  },
  {
    "text": "84 28 let's go to it i can cast my vote and i would invite",
    "start": "2747760",
    "end": "2754240"
  },
  {
    "text": "all of y'all to go 52 143 84",
    "start": "2754240",
    "end": "2759599"
  },
  {
    "text": "28 somebody wants to paste that in the chat for me you feel free to go hit that and and",
    "start": "2759599",
    "end": "2766640"
  },
  {
    "text": "and express yourself and i'm going to i'm going to port forward the voting",
    "start": "2766640",
    "end": "2773920"
  },
  {
    "text": "service the results service and we can see we can see some of the",
    "start": "2773920",
    "end": "2779040"
  },
  {
    "text": "votes coming in hopefully so this will be localhost 5000.",
    "start": "2779040",
    "end": "2788480"
  },
  {
    "text": "so we've got seven for dogs so i know some of you are doing it because i can see that this is higher the cat people are taking over and the",
    "start": "2788480",
    "end": "2794640"
  },
  {
    "text": "battle the battle is is joined i don't know why i chose these terrible colors this is really",
    "start": "2794640",
    "end": "2801599"
  },
  {
    "text": "brown and brown and light green it's terrible so we've created an ingress we've made",
    "start": "2801599",
    "end": "2807599"
  },
  {
    "text": "something publicly exposed to the internet um we've shown that we can we can use",
    "start": "2807599",
    "end": "2813599"
  },
  {
    "text": "containers and dependencies for local development and we can deploy an app with ingress to",
    "start": "2813599",
    "end": "2818960"
  },
  {
    "text": "the cluster and actually see something public so we're starting to aim towards towards towards doing a fairly complete end to",
    "start": "2818960",
    "end": "2825280"
  },
  {
    "text": "end here i'm going to go ahead and i'll go ahead and leave that up",
    "start": "2825280",
    "end": "2830560"
  },
  {
    "text": "um because i don't think i'm using kubernetes for anything else today so let me jump back to my slides and",
    "start": "2830560",
    "end": "2836640"
  },
  {
    "text": "we'll talk a little bit more so what we saw we saw a multi-project",
    "start": "2836640",
    "end": "2843359"
  },
  {
    "text": "multi-service oriented development environment where you can you can work on more than",
    "start": "2843359",
    "end": "2850559"
  },
  {
    "text": "one at a time we saw some really simple patterns around service discovery and how you",
    "start": "2850559",
    "end": "2856319"
  },
  {
    "text": "identify and manage dependencies we saw using dependencies in docker and then like really easily",
    "start": "2856319",
    "end": "2862160"
  },
  {
    "text": "putting your own stuff in docker or putting your own stuff in kubernetes those are some of the basic things that",
    "start": "2862160",
    "end": "2867280"
  },
  {
    "text": "tai can do for you i want to shift gears a little bit and talk about diagnostics because diagnostics is a",
    "start": "2867280",
    "end": "2873520"
  },
  {
    "text": "is a is a con is a topic that's very near and dear to my heart basically the problem is the more",
    "start": "2873520",
    "end": "2880000"
  },
  {
    "text": "services you have the more problems you have i like to say that you know what used to be a method call is now an http request",
    "start": "2880000",
    "end": "2886800"
  },
  {
    "text": "or a message queue message right so you're used to something failing and seeing a call stack",
    "start": "2886800",
    "end": "2892319"
  },
  {
    "text": "and now something fails in another service at some point in the future or maybe it doesn't get to the other",
    "start": "2892319",
    "end": "2898160"
  },
  {
    "text": "service which is the worst feeling you send an http request and it seems like it's a success",
    "start": "2898160",
    "end": "2903280"
  },
  {
    "text": "and it fails in some other boundary so we need good diagnostics features for cloud native applications otherwise",
    "start": "2903280",
    "end": "2909680"
  },
  {
    "text": "we're just sort of blind and the the way that i sort of think about these topics is broken into three",
    "start": "2909680",
    "end": "2915359"
  },
  {
    "text": "categories there's logs how do we combine all the logs that you have and make it easy for",
    "start": "2915359",
    "end": "2920480"
  },
  {
    "text": "you to query across them there's metrics how do we look at what's going on on your computers",
    "start": "2920480",
    "end": "2925680"
  },
  {
    "text": "and what's going on inside your application and then there's distributed tracing which is how do we stitch together events and",
    "start": "2925680",
    "end": "2932240"
  },
  {
    "text": "transactions and communication across different parts of your application that are not part of the same code base",
    "start": "2932240",
    "end": "2937920"
  },
  {
    "text": "or even on the same same machine so to that end i've got an app that we're going to use as a sample for diagnostics",
    "start": "2937920",
    "end": "2944880"
  },
  {
    "text": "um we're not going to spend a lot of time talking through the app or the code or anything like that if",
    "start": "2944880",
    "end": "2950640"
  },
  {
    "text": "you've done the blazer workshop which i believe the blazer workshop has been taught at this conference by some friends of mine this is",
    "start": "2950640",
    "end": "2957599"
  },
  {
    "text": "basically a microservices version of the blazer workshop using heavy use of grpc so i'll share the link",
    "start": "2957599",
    "end": "2964160"
  },
  {
    "text": "for that source code later and you can check that out if you're interested and we're going to talk about some diagnostics functionality with that and",
    "start": "2964160",
    "end": "2970640"
  },
  {
    "text": "the tie the sort of tie angle to this so let's go back to some demos and i'm going to let's do",
    "start": "2970640",
    "end": "2978240"
  },
  {
    "text": "this i've got another repo here i'm going to bring up vs code",
    "start": "2978240",
    "end": "2983599"
  },
  {
    "text": "and then i'm going to immediately do a tie run and i'll start talking over this while that's starting up so there's a",
    "start": "2983599",
    "end": "2991599"
  },
  {
    "text": "lot of projects here um reason why there's a lot of projects is because the way the blazer workshop is taught we teach you to",
    "start": "2991599",
    "end": "2998240"
  },
  {
    "text": "create projects for blazer so don't worry about that but let's look at the thai.yaml so the",
    "start": "2998240",
    "end": "3004640"
  },
  {
    "text": "thai.yaml is kind of interesting because we've got in ingress here we've got our services",
    "start": "3004640",
    "end": "3011040"
  },
  {
    "text": "we've got three databases my friend glenn helped me put this together for an earlier uh demo",
    "start": "3011040",
    "end": "3016319"
  },
  {
    "text": "we've got three databases in this case we're using sql server and this is these are custom made as the",
    "start": "3016319",
    "end": "3022240"
  },
  {
    "text": "glenn built but they're based on sql server and we've got a redis here so there are three databases",
    "start": "3022240",
    "end": "3027599"
  },
  {
    "text": "a reddit five projects five five like web apps and ingress and then these extensions",
    "start": "3027599",
    "end": "3035280"
  },
  {
    "text": "so the extensions are kind of neat we've got an extension for zipkin an extension for elastic or for elastic",
    "start": "3035280",
    "end": "3041760"
  },
  {
    "text": "stack formerly known as elk zipkin is a fairly popular and well-known distributed",
    "start": "3041760",
    "end": "3047359"
  },
  {
    "text": "tracing database distributed tracing dashboard jager is another one which we don't have",
    "start": "3047359",
    "end": "3052400"
  },
  {
    "text": "direct support for but we do we do have zipkin and we could add jaeger at some point",
    "start": "3052400",
    "end": "3057839"
  },
  {
    "text": "elasticstack is a popular like log search aggregation thing built on elasticsearch",
    "start": "3057839",
    "end": "3065440"
  },
  {
    "text": "and kibana so the reason why i've been explaining all this is this is a massive amount of stuff to",
    "start": "3065440",
    "end": "3071200"
  },
  {
    "text": "start up in particular elasticsearch takes a very long time to start up and um these sql servers use kind of a",
    "start": "3071200",
    "end": "3079119"
  },
  {
    "text": "massive amount of resources but true to doing microservices each service has its",
    "start": "3079119",
    "end": "3084240"
  },
  {
    "text": "database which is why there's so many so i think we've kind of got everything going here",
    "start": "3084240",
    "end": "3089760"
  },
  {
    "text": "we'll check in we'll check in on elastic before we do anything and make sure that that's",
    "start": "3089760",
    "end": "3094960"
  },
  {
    "text": "working so my dashboard is starting and it's being slow",
    "start": "3094960",
    "end": "3100400"
  },
  {
    "text": "running running webex and all this stuff together i've got a new macbook and it's still it's still kind of a lot um let's check",
    "start": "3100400",
    "end": "3107440"
  },
  {
    "text": "in on elastic and make sure that that's working okay so we are working here great so let's",
    "start": "3107440",
    "end": "3113680"
  },
  {
    "text": "run through the app and just do something so i'll go ahead and go to our ingress so we're loading up the blazing",
    "start": "3113680",
    "end": "3123599"
  },
  {
    "text": "blazing pizza app it's gonna i'm already signed in because",
    "start": "3123599",
    "end": "3129520"
  },
  {
    "text": "dedication is fake um in this version of the demo and uh let's go ahead and let's put together a",
    "start": "3129520",
    "end": "3136079"
  },
  {
    "text": "pizza now it is it is like 9 30 where i am so i think the most appropriate pizza",
    "start": "3136079",
    "end": "3143280"
  },
  {
    "text": "for morning is probably a classic pepperoni um extra large with uh fresh baked",
    "start": "3143280",
    "end": "3150240"
  },
  {
    "text": "scones because this is breakfast time so let's go ahead i'm going to move my face",
    "start": "3150240",
    "end": "3155839"
  },
  {
    "text": "let's go ahead and order that it's in british this is this is all the all the currency and everything here is in british because",
    "start": "3155839",
    "end": "3162000"
  },
  {
    "text": "this is a london-based uh pizzeria but they do deliver internationally so i would love to get notifications",
    "start": "3162000",
    "end": "3168559"
  },
  {
    "text": "which won't work because i'm in uh do not disturb mode and i'm gonna very carefully enter my",
    "start": "3168559",
    "end": "3174640"
  },
  {
    "text": "uh my contact information here for the delivery they do contact this contactless delivery which is great they",
    "start": "3174640",
    "end": "3180240"
  },
  {
    "text": "send you a browser notification and just leave the pizza on the steps then you come out and get it so",
    "start": "3180240",
    "end": "3185760"
  },
  {
    "text": "i'm not actually here i'm in seattle by the way i'm not at the house of parliament in london but anyway i've placed my",
    "start": "3185760",
    "end": "3192000"
  },
  {
    "text": "pizza order and it's communicating with these different services we've got an order service we've got a delivery service",
    "start": "3192000",
    "end": "3197599"
  },
  {
    "text": "we've got a toppings or sort of inventory service which is where that pizza info comes from and then my pizza goes out for delivery",
    "start": "3197599",
    "end": "3204240"
  },
  {
    "text": "and it's on it's on its way via drone from london to my location uh so let's",
    "start": "3204240",
    "end": "3210160"
  },
  {
    "text": "we we said that this was about diagnostics let's diagnose some diagnostics",
    "start": "3210160",
    "end": "3215520"
  },
  {
    "text": "so i'll open up zip can now and zipkin i mentioned is a distributed tracing dashboard and so if i do a search",
    "start": "3215520",
    "end": "3222960"
  },
  {
    "text": "here and do this search here you see a bunch of traces and you should think about traces in",
    "start": "3222960",
    "end": "3229520"
  },
  {
    "text": "zipkin as like this is an end to end of a request this is a request that came in and",
    "start": "3229520",
    "end": "3236160"
  },
  {
    "text": "everything else that that request did so i'll pick this one which was i think getting the like order status so a request",
    "start": "3236160",
    "end": "3244319"
  },
  {
    "text": "let's let's talk through this a request came in to the front end and then the front end",
    "start": "3244319",
    "end": "3252079"
  },
  {
    "text": "made a grpc call to the order service so this is this is a data tracing data created by",
    "start": "3252079",
    "end": "3258559"
  },
  {
    "text": "http client this is tracing data created by asp.net core this is tracing data created by http",
    "start": "3258559",
    "end": "3263680"
  },
  {
    "text": "client so you can see that it's front end and it's got a url of another service and that's a very grpc looking url if",
    "start": "3263680",
    "end": "3270000"
  },
  {
    "text": "you haven't looked at grpc before and then it goes to the order service this is created by asp.net core",
    "start": "3270000",
    "end": "3276319"
  },
  {
    "text": "the order service did something and returned some data um the front-end service then after doing that it gives us a timeline",
    "start": "3276319",
    "end": "3282880"
  },
  {
    "text": "view said okay let's contact the delivery service and made a call to the delivery service and sort of the same thing happen",
    "start": "3282880",
    "end": "3289440"
  },
  {
    "text": "so you can see the end-to-end process of servicing this request and you could",
    "start": "3289440",
    "end": "3294720"
  },
  {
    "text": "imagine that this would get better over time like there there are ways to plug in redis to this which i haven't done in the",
    "start": "3294720",
    "end": "3300400"
  },
  {
    "text": "example but you could also imagine a way to plug in sql server to this you could see my sql server query show up here as well",
    "start": "3300400",
    "end": "3307200"
  },
  {
    "text": "which would be really cool and that's sort of what distributed tracing does for you so the next thing i'll do is i'm going",
    "start": "3307200",
    "end": "3314319"
  },
  {
    "text": "to take this trace id and the trace id you can think of as sort of the identifier for the full",
    "start": "3314319",
    "end": "3319599"
  },
  {
    "text": "end-to-end request now asp.net core and http client have code",
    "start": "3319599",
    "end": "3324960"
  },
  {
    "text": "built in that flow those things across requests for you so you don't have to do this sort of like manual",
    "start": "3324960",
    "end": "3332079"
  },
  {
    "text": "manual propagation of those things manual management of headers now this is my elastic dashboard in",
    "start": "3332079",
    "end": "3337680"
  },
  {
    "text": "cabana and this has collected all of the logs of everything so i can now do queries",
    "start": "3337680",
    "end": "3345280"
  },
  {
    "text": "across all the logs of everything that i have and it remembers what i like to do last time which is",
    "start": "3345280",
    "end": "3351599"
  },
  {
    "text": "i i want the message i want the trace id and i want the application that was involved",
    "start": "3351599",
    "end": "3357359"
  },
  {
    "text": "and then let's go ahead and i'm going to going to do a filter i don't know what filter by type is oh",
    "start": "3357359",
    "end": "3362880"
  },
  {
    "text": "this is the one i want i'll do a filter and i'm going to filter on the trace id",
    "start": "3362880",
    "end": "3368160"
  },
  {
    "text": "so i grab that trace id from my zip can and i'm going to save it here and hopefully i chose a good one and you",
    "start": "3368160",
    "end": "3374640"
  },
  {
    "text": "can see i've got log messages here i've got a consistent view of all the log messages across the",
    "start": "3374640",
    "end": "3380480"
  },
  {
    "text": "front end the order service the front end the order service and i don't know why i don't have the",
    "start": "3380480",
    "end": "3385920"
  },
  {
    "text": "delivery service here i kind of expect that but i don't see it i have seen issues with this in the",
    "start": "3385920",
    "end": "3391839"
  },
  {
    "text": "local configuration where it seems like events and logs are being dropped and it might be due to just slow uh i'm",
    "start": "3391839",
    "end": "3398480"
  },
  {
    "text": "not totally sure because it's a kind of a crush to run all these things on my machine especially elastic",
    "start": "3398480",
    "end": "3404640"
  },
  {
    "text": "so anyway sort of unpacking what we've seen here you can",
    "start": "3404640",
    "end": "3410160"
  },
  {
    "text": "have a request that failed you can have a you can get the trace id",
    "start": "3410160",
    "end": "3415599"
  },
  {
    "text": "you can see where in the system it failed you can take that trace id back here and you can see all the log",
    "start": "3415599",
    "end": "3421440"
  },
  {
    "text": "messages across all the services that participated in that transaction and have this nice sort of query",
    "start": "3421440",
    "end": "3426720"
  },
  {
    "text": "dashboard so if you've ever wondered about structured logging and why asp.net logging sort of is the",
    "start": "3426720",
    "end": "3432480"
  },
  {
    "text": "way it is with key value pairs instead of a string dot format well it's this right all these fields",
    "start": "3432480",
    "end": "3438640"
  },
  {
    "text": "are searchable so we get the name of the controller action that was being executed we get the amount of time taken in the",
    "start": "3438640",
    "end": "3445599"
  },
  {
    "text": "request and a whole bunch of other information this this came from mvc we had a whole bunch of other information here and this is all",
    "start": "3445599",
    "end": "3451680"
  },
  {
    "text": "queryable by systems like this and they're really powerful when you combine distributed tracing",
    "start": "3451680",
    "end": "3457200"
  },
  {
    "text": "with logging into one big happy thing now we haven't talked about how this works",
    "start": "3457200",
    "end": "3463359"
  },
  {
    "text": "and i think that that's probably the best part here so i've got these two extensions here which is probably not surprising that",
    "start": "3463359",
    "end": "3470160"
  },
  {
    "text": "tai is starting and running these things for you when you put them as an extensions but the other thing that this is doing",
    "start": "3470160",
    "end": "3476640"
  },
  {
    "text": "is it's wiring up our collector to send the data to these things so we use something in donet called",
    "start": "3476640",
    "end": "3484400"
  },
  {
    "text": "event pipe which is pretty new i think it was new in 3.0 and it's what powers tools like donet",
    "start": "3484400",
    "end": "3489599"
  },
  {
    "text": "counters and it's what power is the thai dashboard so if you've wondered about how the log collection works for the",
    "start": "3489599",
    "end": "3495280"
  },
  {
    "text": "thai dashboard or how the metrics collection works for the thai dashboard any net process you can effectively",
    "start": "3495280",
    "end": "3501280"
  },
  {
    "text": "attach to it and get a stream of diagnostics information that stream of diagnostics information",
    "start": "3501280",
    "end": "3507280"
  },
  {
    "text": "includes all of this and all of this if you know how to ask for it and you",
    "start": "3507280",
    "end": "3513280"
  },
  {
    "text": "know how to put it together so tai can without any changes to your application without any sdks",
    "start": "3513280",
    "end": "3519760"
  },
  {
    "text": "or configuration that sits inside your app we can attach to your process we can get",
    "start": "3519760",
    "end": "3524960"
  },
  {
    "text": "all that information and we can export it for you so that you don't have to do it we can do the same thing with metrics we",
    "start": "3524960",
    "end": "3531200"
  },
  {
    "text": "haven't implemented that yet there's probably some big gaps to fill around metrics because",
    "start": "3531200",
    "end": "3536720"
  },
  {
    "text": "the matrix collection packages that people have written for metrics collection for like prometheus",
    "start": "3536720",
    "end": "3541760"
  },
  {
    "text": "are very very good so we have some gaps to fill there which is why we're not talking about metrics",
    "start": "3541760",
    "end": "3547040"
  },
  {
    "text": "too so that's kind of that in a nutshell i've got a couple slides that sort of",
    "start": "3547040",
    "end": "3552799"
  },
  {
    "text": "unpack this in a little bit more detail i'll get my face out of the way just i don't know there's got to be some",
    "start": "3552799",
    "end": "3558880"
  },
  {
    "text": "there's got to be some physical law that describes how oh i i know what i need to do i need to shut",
    "start": "3558880",
    "end": "3564400"
  },
  {
    "text": "this down because this is using a huge amount of memory um it's got to be some physical law about how your face is always in the way",
    "start": "3564400",
    "end": "3570640"
  },
  {
    "text": "and one of these calls of the button you need so when we do this in production we can",
    "start": "3570640",
    "end": "3576400"
  },
  {
    "text": "deploy to kubernetes and we can do the same thing what we actually do in kubernetes and",
    "start": "3576400",
    "end": "3581680"
  },
  {
    "text": "i'm not going to show it today just because of time is you can we deploy what's called a sidecar in your pods",
    "start": "3581680",
    "end": "3588559"
  },
  {
    "text": "so we can run our collector in a separate process next to your application and then we can forward all that data or",
    "start": "3588559",
    "end": "3594640"
  },
  {
    "text": "we can exfiltrate all that data for you so you don't have to put any code in your application you don't have to configure anything in",
    "start": "3594640",
    "end": "3600799"
  },
  {
    "text": "your application to get these nice features so that's kind of the end to end of",
    "start": "3600799",
    "end": "3606160"
  },
  {
    "text": "where we are with tai um i think we're kind of about at time i haven't seen i haven't",
    "start": "3606160",
    "end": "3613280"
  },
  {
    "text": "seen anybody really like having a lot of questions or anything like that",
    "start": "3613280",
    "end": "3618480"
  },
  {
    "text": "but if you've got if you've got questions i'd be happy to answer them i'm going to quickly run through some of my own q a",
    "start": "3618480",
    "end": "3625359"
  },
  {
    "text": "because i've answered many questions about tai in the past and so i've chosen the good ones to kind",
    "start": "3625359",
    "end": "3630799"
  },
  {
    "text": "of snipe you guys so what does it mean the ties in experiment it means that",
    "start": "3630799",
    "end": "3636480"
  },
  {
    "text": "we have an uncertain future for what we're building and what we're doing here we see this as a sort of two-way",
    "start": "3636480",
    "end": "3642400"
  },
  {
    "text": "collaboration and we really don't know like we really don't",
    "start": "3642400",
    "end": "3647760"
  },
  {
    "text": "have a plan yet as far as what the future is of what we're doing with tai it might be the case that all the",
    "start": "3647760",
    "end": "3654079"
  },
  {
    "text": "technology and all the investments in thai get turned into like other things",
    "start": "3654079",
    "end": "3659839"
  },
  {
    "text": "you could imagine that docker building functionality getting just baked into the sdk you could",
    "start": "3659839",
    "end": "3665440"
  },
  {
    "text": "imagine the multi-launch multi-debug dashboard kind of functionality baking into vs code or",
    "start": "3665440",
    "end": "3672960"
  },
  {
    "text": "visual studio so we don't know the ultimate destination we're just sort of trying to learn as",
    "start": "3672960",
    "end": "3678160"
  },
  {
    "text": "much as we can about what people really want and what they're like what",
    "start": "3678160",
    "end": "3683200"
  },
  {
    "text": "adds value what makes your life better guillaume asks uh guillerm asks adding",
    "start": "3683200",
    "end": "3689040"
  },
  {
    "text": "thai to an existing project is an easy process i would say that it's the easiest process",
    "start": "3689040",
    "end": "3694960"
  },
  {
    "text": "because the things that the only thing that tai really wants in your project is there's one method",
    "start": "3694960",
    "end": "3703119"
  },
  {
    "text": "to read like urls right there's there's some opinionated use of",
    "start": "3703119",
    "end": "3708240"
  },
  {
    "text": "configuration but you've already got configuration i would say that thai is something you use to automate your process rather than",
    "start": "3708240",
    "end": "3714640"
  },
  {
    "text": "add to your process unless you're talking about a development process or a like devops process in which case you",
    "start": "3714640",
    "end": "3720880"
  },
  {
    "text": "know tell me more so i would say if you're already if you're already doing.net",
    "start": "3720880",
    "end": "3726000"
  },
  {
    "text": "today like it's one of the easiest things that you could start using that will probably really give you",
    "start": "3726000",
    "end": "3732160"
  },
  {
    "text": "a boost in terms of your productivity if you don't think that it helps you i'm really interested to know",
    "start": "3732160",
    "end": "3738559"
  },
  {
    "text": "um what you're doing that makes you so satisfied with your development workflow",
    "start": "3738559",
    "end": "3743839"
  },
  {
    "text": "so who's this for ties for developers we do some publishing and we do some kubernetes stuff",
    "start": "3743839",
    "end": "3750240"
  },
  {
    "text": "but tai is a developer oriented developer focused tools i think for a lot of people they look at",
    "start": "3750240",
    "end": "3756000"
  },
  {
    "text": "the kubernetes functionality and they say wow i didn't know i could do kubernetes that's kind of cool and they move on",
    "start": "3756000",
    "end": "3761280"
  },
  {
    "text": "with their life or they use it as like a learning tool for kubernetes i think for a lot of people on the other end that are very experienced with",
    "start": "3761280",
    "end": "3767599"
  },
  {
    "text": "devops and kubernetes would say you know i've already solved these problems it doesn't add a lot to me",
    "start": "3767599",
    "end": "3772880"
  },
  {
    "text": "i think that the deployment in kubernetes aspects of tai is the part that's like really experimental so we're looking for",
    "start": "3772880",
    "end": "3779839"
  },
  {
    "text": "feedback there to be honest like we're looking for ideas and we're looking for feedback about you know i would use this i",
    "start": "3779839",
    "end": "3786160"
  },
  {
    "text": "wouldn't use this and here's why to help shape future direction i think there's a spectrum that people",
    "start": "3786160",
    "end": "3792400"
  },
  {
    "text": "fall on as far as their organizational maturity with devops and their organizational maturity with those",
    "start": "3792400",
    "end": "3798319"
  },
  {
    "text": "those practices so you can sort of think of what you've seen today as like right click publish but for uh",
    "start": "3798319",
    "end": "3805760"
  },
  {
    "text": "but for kubernetes um which there aren't a lot of examples of in the industry",
    "start": "3805760",
    "end": "3811440"
  },
  {
    "text": "we do we do have the idea that something like tai could be part of a git ops workflow but we haven't really done the work to",
    "start": "3811440",
    "end": "3817760"
  },
  {
    "text": "prove that out yet it does tai does play with things like versioning so if you have a versioning",
    "start": "3817760",
    "end": "3823440"
  },
  {
    "text": "scheme set up for your projects already that's ms build based tai can already work with that all",
    "start": "3823440",
    "end": "3829039"
  },
  {
    "text": "because my stuff was demos everything was 100 but thai can already work with those kinds of things it only",
    "start": "3829039",
    "end": "3835119"
  },
  {
    "text": "does kubernetes can it do other things so i really like the idea that we would",
    "start": "3835119",
    "end": "3840240"
  },
  {
    "text": "be able to do other things kubernetes is kubernetes is where we",
    "start": "3840240",
    "end": "3845680"
  },
  {
    "text": "started i think for a variety of reasons namely that we wanted to expose dot-net",
    "start": "3845680",
    "end": "3851039"
  },
  {
    "text": "developers to kubernetes the more we've talked to down at developers about kubernetes the more we found pockets of people who",
    "start": "3851039",
    "end": "3857760"
  },
  {
    "text": "are being very successful very quietly which has been interesting for us to talk to and to learn from",
    "start": "3857760",
    "end": "3864480"
  },
  {
    "text": "you might have access to kubernetes and if you don't you can easily get access you can run it locally",
    "start": "3864480",
    "end": "3869760"
  },
  {
    "text": "with mini cube or something like that and so it's a good way to get your feet wet in this technology if you're new to",
    "start": "3869760",
    "end": "3874880"
  },
  {
    "text": "it and then lastly kubernetes is powerful enough for us to do really powerful stuff like",
    "start": "3874880",
    "end": "3880240"
  },
  {
    "text": "diagnostic sidecars and ingresses and things um i think we're interested in ideas about",
    "start": "3880240",
    "end": "3886880"
  },
  {
    "text": "where else we could do publishing and deployment but without turning tai into an azure",
    "start": "3886880",
    "end": "3892640"
  },
  {
    "text": "specific tool specifically despite the fact that i now work on azure um why did we build this",
    "start": "3892640",
    "end": "3899839"
  },
  {
    "text": "uh that's actually one of the most most favorite questions that a lot of people have",
    "start": "3899839",
    "end": "3905119"
  },
  {
    "text": "i think we're looking in this the microservices and back-end development space and saying what can we add here",
    "start": "3905119",
    "end": "3911839"
  },
  {
    "text": "and our frameworks are fairly mature uh we hear success stories and happy stories from users every day about",
    "start": "3911839",
    "end": "3917839"
  },
  {
    "text": "how they're thrilled with the platform or they're thrilled with the latest upgrade and the truth is like we can't just keep",
    "start": "3917839",
    "end": "3924720"
  },
  {
    "text": "churning stuff we can't just keep changing stuff um there's a there's a cool down period",
    "start": "3924720",
    "end": "3930079"
  },
  {
    "text": "after doing like a dramatic change something and so we can't just keep tweaking and changing and modifying and",
    "start": "3930079",
    "end": "3936400"
  },
  {
    "text": "updating it becomes a treadmill after a while so we're looking for other ways to add value",
    "start": "3936400",
    "end": "3942559"
  },
  {
    "text": "turns out very few people are happy with their dev productivity for microservices there aren't a lot of tools that solve",
    "start": "3942559",
    "end": "3948559"
  },
  {
    "text": "it really well so some stuff that's unique about tai is first of all the philosophy of being",
    "start": "3948559",
    "end": "3954240"
  },
  {
    "text": "a tool that goes through the existing process with you you start from the moment you decide",
    "start": "3954240",
    "end": "3959920"
  },
  {
    "text": "to write code and tai continues to live with you until you've got something fully automated",
    "start": "3959920",
    "end": "3965440"
  },
  {
    "text": "with the ci cd system that's the sort of vision for it there aren't a lot of tools that try to solve",
    "start": "3965440",
    "end": "3970480"
  },
  {
    "text": "that most tools try to focus on doing one thing well we're trying to do everything pretty well",
    "start": "3970480",
    "end": "3976880"
  },
  {
    "text": "and we also think that there's a lot of value out of building something dotnet focused for download developers",
    "start": "3976880",
    "end": "3983520"
  },
  {
    "text": "that is to say it's not uh that is not to say that everything has to be a.net project",
    "start": "3983520",
    "end": "3989200"
  },
  {
    "text": "we immediately heard from a lot of people when we started working on thai that they wanted they wanted support for",
    "start": "3989200",
    "end": "3996319"
  },
  {
    "text": "non-dotnet projects because everybody out there has got like one angular app",
    "start": "3996319",
    "end": "4002160"
  },
  {
    "text": "and five asp.net backends so we do support building and publishing",
    "start": "4002160",
    "end": "4008000"
  },
  {
    "text": "sort of arbitrary docker images as well as donna projects from thai which is a fairly recent edition so that's the end",
    "start": "4008000",
    "end": "4017359"
  },
  {
    "text": "you can find me on twitter if you want um these materials will be uploaded to my presentations repo",
    "start": "4017359",
    "end": "4023359"
  },
  {
    "text": "at some point um and thanks everybody for your attention i'll probably be hanging around i'll",
    "start": "4023359",
    "end": "4030480"
  },
  {
    "text": "probably be hanging around the conference for a couple more minutes if people have that they want to ask or things that",
    "start": "4030480",
    "end": "4036720"
  },
  {
    "text": "they want to say but other than that thanks for your attention and have a have a great rest of the conference",
    "start": "4036720",
    "end": "4045119"
  }
]