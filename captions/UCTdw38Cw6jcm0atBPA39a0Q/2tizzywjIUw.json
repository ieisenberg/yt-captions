[
  {
    "text": "hello thank you and thank you for turning up so early in the morning so",
    "start": "5779",
    "end": "13320"
  },
  {
    "text": "bright looking I know it's the second day of the conference and you probably all had a big night last night so I'd",
    "start": "13320",
    "end": "18600"
  },
  {
    "text": "like you to get yourselves in your bit of headspace for me I'd like you to pretend that it's nine o'clock in the",
    "start": "18600",
    "end": "24300"
  },
  {
    "text": "morning which shouldn't be hard because it is but I would like you to think you've just gotten into the office",
    "start": "24300",
    "end": "30320"
  },
  {
    "text": "you've sat down you know your office might be in your house it might be",
    "start": "30320",
    "end": "35340"
  },
  {
    "text": "at the office it might be a coffee shop it doesn't really matter where it is but you've just sat down and you're thinking",
    "start": "35340",
    "end": "40440"
  },
  {
    "text": "in your head maybe I should get a coffee before I start working then your phone goes ding",
    "start": "40440",
    "end": "46920"
  },
  {
    "text": "it's a CEO it goes ding ding ding and the CEO is out on the golf course",
    "start": "46920",
    "end": "53340"
  },
  {
    "text": "they're having fun they're out with their friends and they've been talking up this new",
    "start": "53340",
    "end": "59039"
  },
  {
    "text": "feature you've been working on this new feature that is going to change the game that is going to reset everything and it",
    "start": "59039",
    "end": "64739"
  },
  {
    "text": "is going to absolutely make them lots of money so they want to brag to their friends they pull out their phone they",
    "start": "64739",
    "end": "71100"
  },
  {
    "text": "go to stage.myapp.com and nothing happens",
    "start": "71100",
    "end": "77280"
  },
  {
    "text": "the website's broken or at least staging is that's what he thinks so the CEO",
    "start": "77280",
    "end": "83580"
  },
  {
    "text": "sends you this message can you fix this can you fix it now and you look at your phone",
    "start": "83580",
    "end": "90360"
  },
  {
    "text": "and you sigh and you say sorry the",
    "start": "90360",
    "end": "97140"
  },
  {
    "text": "staging environment is only available inside the network it's not going to work for you I can't change this",
    "start": "97140",
    "end": "104540"
  },
  {
    "text": "the CEO is flabbergasted is surprised and you know that you're",
    "start": "104759",
    "end": "111479"
  },
  {
    "text": "going to hear about this when they get in back to this golf game so you've got to go get that coffee",
    "start": "111479",
    "end": "117659"
  },
  {
    "text": "because that's going to be a hard conversation later today just quickly my name is Clay Thomas",
    "start": "117659",
    "end": "124680"
  },
  {
    "text": "I'm a software developer by night I organize the Newcastle coders group",
    "start": "124680",
    "end": "129720"
  },
  {
    "text": "I like a bright loud print shirt so you'll see me around the conference long before I get close to you I am part of",
    "start": "129720",
    "end": "137580"
  },
  {
    "text": "the all zero ambassador program and you can find me on Twitter at kleut",
    "start": "137580",
    "end": "143700"
  },
  {
    "text": "I'd love to hear what you think about this talk or anything else so hit me up",
    "start": "143700",
    "end": "149420"
  },
  {
    "text": "today I will go a little bit over staging environments a little bit over zero trust",
    "start": "150180",
    "end": "157020"
  },
  {
    "text": "a little bit over cloudflare workers and then I'll bring it all together you know down over the end",
    "start": "157020",
    "end": "164120"
  },
  {
    "text": "so I was staging got to talk about staging staging is your production-like",
    "start": "164160",
    "end": "170160"
  },
  {
    "text": "environment this is where you have something set up that is as close to production as you can get",
    "start": "170160",
    "end": "176459"
  },
  {
    "text": "so you can thoroughly test it and it's important that it's production like you",
    "start": "176459",
    "end": "182280"
  },
  {
    "text": "need staging to be in a way that you can't make excuses oh that's just staging it'll be fine when it goes to",
    "start": "182280",
    "end": "189060"
  },
  {
    "text": "production if you've got that set up then you can't trust it and it's no good all that",
    "start": "189060",
    "end": "194159"
  },
  {
    "text": "testing you do isn't worth anything in this environment we can test hard we",
    "start": "194159",
    "end": "200280"
  },
  {
    "text": "can go and push it until it falls over we can find out what our limits are so",
    "start": "200280",
    "end": "205500"
  },
  {
    "text": "that as our company scales we can deliver value to our customers without those big outages that we worry about",
    "start": "205500",
    "end": "214400"
  },
  {
    "text": "here is where we can bring in external people to come in and hack the system",
    "start": "214860",
    "end": "220860"
  },
  {
    "text": "they can break it apart without you know actually exposing customer data",
    "start": "220860",
    "end": "227459"
  },
  {
    "text": "staging is really important for testing and it's important for review because",
    "start": "227459",
    "end": "234720"
  },
  {
    "text": "in staging is where you're going to put up the new terms of service and get legal to read over it and make sure that",
    "start": "234720",
    "end": "240599"
  },
  {
    "text": "everything's okay and that you're not going to be accidentally giving away your product for free or breaching some",
    "start": "240599",
    "end": "246299"
  },
  {
    "text": "bizarre law it's where marketing can come in and check that your system and the marketing",
    "start": "246299",
    "end": "253920"
  },
  {
    "text": "Pages you're putting out matches the paper marketing that's going out later that day matches the SMS marketing so",
    "start": "253920",
    "end": "260340"
  },
  {
    "text": "you're not actually you know sending out different messages so staging is really important",
    "start": "260340",
    "end": "267479"
  },
  {
    "text": "but by virtue of everything that I said staging is also",
    "start": "267479",
    "end": "273180"
  },
  {
    "text": "where you've got a lot of half finished work you don't want people just stumbling",
    "start": "273180",
    "end": "278460"
  },
  {
    "text": "into staging because they might see that terms of service and then that terms of service is now valid because you",
    "start": "278460",
    "end": "284280"
  },
  {
    "text": "published out to users they might see the financial reports before they go out to the ASX and",
    "start": "284280",
    "end": "291240"
  },
  {
    "text": "expose you to a whole bunch of pain so we need to make sure staging is secured",
    "start": "291240",
    "end": "296820"
  },
  {
    "text": "there because that pre-marked information is valuable it's valuable to your competitors it's valuable to your",
    "start": "296820",
    "end": "303060"
  },
  {
    "text": "investors and it could mean the difference between your company continuing and your company falling",
    "start": "303060",
    "end": "308280"
  },
  {
    "text": "apart and finally",
    "start": "308280",
    "end": "314639"
  },
  {
    "text": "even if not that's the case everything is just exactly the same if you have Google indexing you twice you're going",
    "start": "314639",
    "end": "321180"
  },
  {
    "text": "to get SEO damage Google doesn't like the idea that there is two copies of the same website out there so it'll downrank",
    "start": "321180",
    "end": "327180"
  },
  {
    "text": "you and throw you away because it's like oh this is no good you'll end up on page two of Google and nobody knows what's on",
    "start": "327180",
    "end": "333960"
  },
  {
    "text": "page talk Google because no one's ever actually been there and you might say to me but clay my",
    "start": "333960",
    "end": "341280"
  },
  {
    "text": "website is entirely behind a login page everything is secure everything's off",
    "start": "341280",
    "end": "346620"
  },
  {
    "text": "from the public and I will say first of all I don't believe you why would anybody sign off to a service",
    "start": "346620",
    "end": "353400"
  },
  {
    "text": "that has no information about what it is or why you can use it",
    "start": "353400",
    "end": "358440"
  },
  {
    "text": "but even in the case you are working on some weird back office application that nobody actually has access to it's still",
    "start": "358440",
    "end": "365520"
  },
  {
    "text": "important to protect it because you know what's not behind that login page",
    "start": "365520",
    "end": "372380"
  },
  {
    "text": "the login page and at some point you're going to have to test out that you have",
    "start": "372419",
    "end": "378000"
  },
  {
    "text": "alert messaging for if the system's down to explain to people why they can't log in you're going to have to check that",
    "start": "378000",
    "end": "384660"
  },
  {
    "text": "that Rebrand that's coming down the pipe is all set up and it's all working well you have to make sure all this stuff is",
    "start": "384660",
    "end": "391259"
  },
  {
    "text": "ready and that's pre-market information again that you don't want just getting",
    "start": "391259",
    "end": "396300"
  },
  {
    "text": "out there but",
    "start": "396300",
    "end": "401940"
  },
  {
    "text": "staging is more than that as well I'm willing to bet that everyone in this",
    "start": "401940",
    "end": "407880"
  },
  {
    "text": "room in their staging environment has seen bad passwords maybe they've optimized their testing at",
    "start": "407880",
    "end": "414960"
  },
  {
    "text": "some point so they can log in and out of accounts really fast so all the accounts",
    "start": "414960",
    "end": "420180"
  },
  {
    "text": "are have the password test one two three four five so it's really easy you can jump in and jump out everyone knows the",
    "start": "420180",
    "end": "426539"
  },
  {
    "text": "passwords everyone can test quickly it's a really good workflow for the developers and the qas",
    "start": "426539",
    "end": "433440"
  },
  {
    "text": "but that also leaves you really open to anyone who wants to come in and try and break into that environment find out the",
    "start": "433440",
    "end": "440580"
  },
  {
    "text": "information that's there and there's always that possibility that",
    "start": "440580",
    "end": "445860"
  },
  {
    "text": "you've taken data from production real customer data and maybe you've done some",
    "start": "445860",
    "end": "451620"
  },
  {
    "text": "sort of little de-identification process over it but in reality it still looks really like a",
    "start": "451620",
    "end": "459240"
  },
  {
    "text": "real customer data hey if that daughter is extracted out by some script could he dumped out onto the",
    "start": "459240",
    "end": "466380"
  },
  {
    "text": "paste bin then you're still going to end up sitting in",
    "start": "466380",
    "end": "471840"
  },
  {
    "text": "Chromecast have I been put in database because that is real customer data that has been exposed and you have had a data",
    "start": "471840",
    "end": "477840"
  },
  {
    "text": "breach at this point that CEO while she was really unhappy",
    "start": "477840",
    "end": "483240"
  },
  {
    "text": "that she couldn't play golf with her friends and show off your new app she is also going to be really really",
    "start": "483240",
    "end": "490440"
  },
  {
    "text": "unhappy when she has to stand up in front of the media and say yeah we had a data breach and it was because we just",
    "start": "490440",
    "end": "497160"
  },
  {
    "text": "had bad practices so we need to protect staging",
    "start": "497160",
    "end": "504000"
  },
  {
    "text": "but with everything that I've just said you might think why not get rid of it why not soft staging in the bin maybe",
    "start": "504000",
    "end": "509940"
  },
  {
    "text": "we'll just go back to testing on our own laptops that'll work well right well staging is important because",
    "start": "509940",
    "end": "516599"
  },
  {
    "text": "staging staging is where we collaborate staging is where",
    "start": "516599",
    "end": "522120"
  },
  {
    "text": "the market is in their nice fancy clothing and their clean shaving faces come and collaborate with someone who",
    "start": "522120",
    "end": "527580"
  },
  {
    "text": "looks like me who wears Hawaiian shirts and has a beard that sort of sticks out every which way it's really you'll come down in their",
    "start": "527580",
    "end": "534000"
  },
  {
    "text": "Armani suits and talk to the developer wearing an NDC hoodie and says okay great this is good we can get this out",
    "start": "534000",
    "end": "541740"
  },
  {
    "text": "it's where our company can come together and collaborate it's where we can do that testing that you can only do in a",
    "start": "541740",
    "end": "547320"
  },
  {
    "text": "production-like environment staging is so important you have to have a staging environment but staging needs",
    "start": "547320",
    "end": "555360"
  },
  {
    "text": "protecting because staging is important and it's a vulnerability",
    "start": "555360",
    "end": "562200"
  },
  {
    "text": "so we know how to protect it right it's easy",
    "start": "562200",
    "end": "567360"
  },
  {
    "text": "we just throw up a Roblox text now it says don't go to staging and Google",
    "start": "567360",
    "end": "572700"
  },
  {
    "text": "looks at that and doesn't index staging now you can't find staging by Googling",
    "start": "572700",
    "end": "577920"
  },
  {
    "text": "and all of a sudden everything's good right and that really relies on the fact that",
    "start": "577920",
    "end": "585000"
  },
  {
    "text": "you trust Google you trust Google to not look past that robot's text and index things every",
    "start": "585000",
    "end": "591300"
  },
  {
    "text": "anyway but just not show up to the customers relies on the fact that you trust that",
    "start": "591300",
    "end": "597480"
  },
  {
    "text": "Google is the only bought out there scraping the internet and there's nobody else",
    "start": "597480",
    "end": "602519"
  },
  {
    "text": "just looking through to find some vulnerable system and I don't trust Google I definitely",
    "start": "602519",
    "end": "608700"
  },
  {
    "text": "don't trust there's no other robot out there so we know the next answer right",
    "start": "608700",
    "end": "614279"
  },
  {
    "text": "we're all in the office we build a big firewall everyone over that side is trusted",
    "start": "614279",
    "end": "621839"
  },
  {
    "text": "it's like it's trusted everyone over that side is untrusted because the people in the office are",
    "start": "621839",
    "end": "628560"
  },
  {
    "text": "fine we know they're there they've had to badge in they're secure and we'll just let only people in the office",
    "start": "628560",
    "end": "634380"
  },
  {
    "text": "access staging that works really well Google's on the outside our script kiddies they're on",
    "start": "634380",
    "end": "640560"
  },
  {
    "text": "the outside they can't get in great staging is protected everything works well we can sleep well at night",
    "start": "640560",
    "end": "649699"
  },
  {
    "text": "but then you've got that one developer who has a few reasons why they need to work from home",
    "start": "650000",
    "end": "656160"
  },
  {
    "text": "so we make a VPN server for them we let them in and yeah that works well enough",
    "start": "656160",
    "end": "663600"
  },
  {
    "text": "then we find a few cloud services using other organizations are going to",
    "start": "663600",
    "end": "669000"
  },
  {
    "text": "work with and they need access as well but can't come in through the VPN because it's a SAS product so we add",
    "start": "669000",
    "end": "676260"
  },
  {
    "text": "their address to our Noel list and we point your little hole through the network and that gives them access to staging",
    "start": "676260",
    "end": "682079"
  },
  {
    "text": "but yeah this group could use the Googles they're still on the outside they can't get to staging everything's",
    "start": "682079",
    "end": "687660"
  },
  {
    "text": "okay but then Coke it happens and all of a sudden the number of people on the",
    "start": "687660",
    "end": "694200"
  },
  {
    "text": "untrusted side of the network is getting really big all their teams all those marketers all",
    "start": "694200",
    "end": "699720"
  },
  {
    "text": "those developers all those lawyers they've had to work from home so that's VPN server it's gotten big it's gotten",
    "start": "699720",
    "end": "705540"
  },
  {
    "text": "expensive and it's fallen over a few times and it's costing the company money and the Assassins are still there",
    "start": "705540",
    "end": "712620"
  },
  {
    "text": "they're still coming in we've got more and more of them so we're adding more addresses to this all our list",
    "start": "712620",
    "end": "718440"
  },
  {
    "text": "but then because covert did funny things for Tech all of a sudden how business is growing it's getting bigger it's getting",
    "start": "718440",
    "end": "724019"
  },
  {
    "text": "bigger fast and we can't hire fast enough because there's just not enough developers out",
    "start": "724019",
    "end": "730019"
  },
  {
    "text": "there so we go and we bring in some consultancies you know your security consultancy a testing consultancy and",
    "start": "730019",
    "end": "737040"
  },
  {
    "text": "another Dev consultancy and they're all coming in from their private Network so they're more more holes are adding to",
    "start": "737040",
    "end": "743640"
  },
  {
    "text": "that firewall and our allow list is growing and all of this is managed by the",
    "start": "743640",
    "end": "749339"
  },
  {
    "text": "developers and it's taking time and at some point we sit down and we say we need to assess how this allowance is",
    "start": "749339",
    "end": "757380"
  },
  {
    "text": "going is this system working for us is it scaling with us",
    "start": "757380",
    "end": "762600"
  },
  {
    "text": "and I start writing down these pros and cons",
    "start": "762600",
    "end": "767639"
  },
  {
    "text": "so a column for the allowance is difficult to manage",
    "start": "767639",
    "end": "774480"
  },
  {
    "text": "in order to update it we need developers those developers have to deploy an update to a router and that router then",
    "start": "774480",
    "end": "779579"
  },
  {
    "text": "has to build it has to deploy out and all that takes time and those developers are busy because there's features and",
    "start": "779579",
    "end": "785639"
  },
  {
    "text": "there's bugs so that's the backlog that just keeps growing so that's not working great for",
    "start": "785639",
    "end": "791940"
  },
  {
    "text": "us and relies on consistent IP addresses so the CEO out in the golf course",
    "start": "791940",
    "end": "798959"
  },
  {
    "text": "their mobile phone is dynamic 100 IP address it's going through and it's just",
    "start": "798959",
    "end": "804360"
  },
  {
    "text": "not able to have that one IP all the time you know sure they've got a consistent",
    "start": "804360",
    "end": "810180"
  },
  {
    "text": "IP at home they can give them access from home so that they don't have to worry but this stuff builds up and it",
    "start": "810180",
    "end": "816180"
  },
  {
    "text": "takes time and our testers are having trouble with mobile testing because again they're on",
    "start": "816180",
    "end": "822180"
  },
  {
    "text": "these Dynamic networks and this stuff just starts to add friction to the whole process",
    "start": "822180",
    "end": "829459"
  },
  {
    "text": "the whole thing's opaque to non-tech people that's the they're a fantastic CEO as I said they're leverage covered",
    "start": "829980",
    "end": "837240"
  },
  {
    "text": "in order to grow that business it's growing it's making money it's doing fantastically but",
    "start": "837240",
    "end": "843600"
  },
  {
    "text": "they do people they do business and they do their job really well they're not a developer they're not a",
    "start": "843600",
    "end": "849839"
  },
  {
    "text": "techie they're not someone who has spent time understanding what an IP address is or what an old out list is and you know",
    "start": "849839",
    "end": "856740"
  },
  {
    "text": "the firewall doesn't really make sense to them they just want to sit down and do their work and sell the product",
    "start": "856740",
    "end": "862139"
  },
  {
    "text": "so this opacity is not great and it doesn't pass you know",
    "start": "862139",
    "end": "867360"
  },
  {
    "text": "what I think of as my parents test they're in the 60s and they just don't",
    "start": "867360",
    "end": "873000"
  },
  {
    "text": "understand these things so if I have to get them to test something if I want to get the third party testers in they're",
    "start": "873000",
    "end": "878579"
  },
  {
    "text": "not going to understand so not great",
    "start": "878579",
    "end": "883680"
  },
  {
    "text": "and now we're making the assumption that anyone connected to that IP address",
    "start": "883680",
    "end": "888779"
  },
  {
    "text": "is allowed in which seems like an odd choice",
    "start": "888779",
    "end": "893880"
  },
  {
    "text": "as I said we're working with consultancies now and one of them is big consultancy big consultancy by their",
    "start": "893880",
    "end": "899639"
  },
  {
    "text": "very name is big they have a lot of staff and they have a lot of customers because we're not the only ones that are",
    "start": "899639",
    "end": "905760"
  },
  {
    "text": "struggling to hire in this market and the other day you went and you went",
    "start": "905760",
    "end": "911940"
  },
  {
    "text": "to their office and sat down to do a planning session you clocked any laptop connected to their Wi-Fi flipped it open",
    "start": "911940",
    "end": "919260"
  },
  {
    "text": "Ed onto the staging vibe to show them something you didn't connect to the VPN you didn't do anything else there you just",
    "start": "919260",
    "end": "926760"
  },
  {
    "text": "we're able to because their IP address is all our listed hmm",
    "start": "926760",
    "end": "933500"
  },
  {
    "text": "Dave who used to work for you and the consultancy is overworking the competition of the",
    "start": "934920",
    "end": "941579"
  },
  {
    "text": "consultancy because they're hiring the same consultancy now does that mean that Dave who used to",
    "start": "941579",
    "end": "949800"
  },
  {
    "text": "work for you can still access your staging environment does that mean the competition can go and sit down in the consultancy office",
    "start": "949800",
    "end": "957959"
  },
  {
    "text": "connect to the Wi-Fi type in your staging address and start poking around your pre-mark information",
    "start": "957959",
    "end": "964860"
  },
  {
    "text": "probably does and that's because IP address allow",
    "start": "964860",
    "end": "970560"
  },
  {
    "text": "lists are not connected to a user account management system they're just trusting that anyone on that IP",
    "start": "970560",
    "end": "977699"
  },
  {
    "text": "address is okay it's a trust-based network and that's not really where we want to be",
    "start": "977699",
    "end": "985399"
  },
  {
    "text": "so what's in the price column the produce column is pretty much just",
    "start": "987660",
    "end": "993899"
  },
  {
    "text": "this is how we've always done it and just because the status quo isn't a",
    "start": "993899",
    "end": "999420"
  },
  {
    "text": "good reason to keep doing it that way we want to grow we want to improve and",
    "start": "999420",
    "end": "1004639"
  },
  {
    "text": "we want to realize that allow this suck and there's nothing we can do to make them",
    "start": "1004639",
    "end": "1010579"
  },
  {
    "text": "scale in the way we want to move in the future so",
    "start": "1010579",
    "end": "1015880"
  },
  {
    "text": "the answer is zero trust not working so zero trust networking is built on top",
    "start": "1016519",
    "end": "1022639"
  },
  {
    "text": "of Three core principles the first one is",
    "start": "1022639",
    "end": "1028040"
  },
  {
    "text": "never trust always verify so we want to make sure that we don't cross someone just because",
    "start": "1028040",
    "end": "1035240"
  },
  {
    "text": "they're coming in for an IP address we don't trust someone just because they're inside a network",
    "start": "1035240",
    "end": "1041240"
  },
  {
    "text": "we verify that they are who they say they are we check that they should have",
    "start": "1041240",
    "end": "1046579"
  },
  {
    "text": "access to these things because just because your Insider network doesn't mean that you should have access to",
    "start": "1046579",
    "end": "1051620"
  },
  {
    "text": "everything I should not have access to your payroll information this is just simple facts I",
    "start": "1051620",
    "end": "1057260"
  },
  {
    "text": "shouldn't be able to go in there and go yeah you get a peak up this year that's fine that's not how we want to do things",
    "start": "1057260",
    "end": "1063740"
  },
  {
    "text": "we need to verify this one has the access before they're able to do something",
    "start": "1063740",
    "end": "1069380"
  },
  {
    "text": "the second principle is that we need to assume breach we need to assume that our network has",
    "start": "1069380",
    "end": "1077059"
  },
  {
    "text": "previously been breached by someone there is someone who is a malicious actor hanging around inside our Network",
    "start": "1077059",
    "end": "1084080"
  },
  {
    "text": "someone who shouldn't be there someone who is going to try and do things they shouldn't be allowed to do",
    "start": "1084080",
    "end": "1090380"
  },
  {
    "text": "so we need to have good logging good monitoring good maintenance we had to keep things up to date we need to be",
    "start": "1090380",
    "end": "1096559"
  },
  {
    "text": "aware of who's using more service and who should be using what service again I should not access payroll if I",
    "start": "1096559",
    "end": "1103640"
  },
  {
    "text": "start suddenly accessing payroll there should be alarms going off saying hey this isn't right what's going on here if",
    "start": "1103640",
    "end": "1109820"
  },
  {
    "text": "someone should go and have a look and I've done this before tried to log into something using the wrong password three",
    "start": "1109820",
    "end": "1114980"
  },
  {
    "text": "or four times and the next day security turns off maybe I'll say hey what's going on why'd you do this and I",
    "start": "1114980",
    "end": "1122900"
  },
  {
    "text": "said I'm idiot and I put the wrong password I said good that's fine but",
    "start": "1122900",
    "end": "1128720"
  },
  {
    "text": "they were checking they were aware and they had assumed that there would be malicious actors in the network so they",
    "start": "1128720",
    "end": "1135320"
  },
  {
    "text": "were checking on things that weren't wrong the final principle is one that has been",
    "start": "1135320",
    "end": "1142039"
  },
  {
    "text": "really well advertised by companies like AWS and azure is selling this idea of",
    "start": "1142039",
    "end": "1150200"
  },
  {
    "text": "adopting the least privilege you should only have the Privileges you need to do your job",
    "start": "1150200",
    "end": "1157340"
  },
  {
    "text": "if you need extra privileges there should be a way for you to get them it shouldn't be saying that you're locked down on some machine and you can't",
    "start": "1157340",
    "end": "1163640"
  },
  {
    "text": "install vs code that's not what we're talking about we're talking about saying that if you need access to production",
    "start": "1163640",
    "end": "1169700"
  },
  {
    "text": "if you go to after access get access have everything that you do when you get to production recorded have every had",
    "start": "1169700",
    "end": "1176720"
  },
  {
    "text": "the reason that you needed access to production recorded we want to make sure that if you're working a company that",
    "start": "1176720",
    "end": "1182179"
  },
  {
    "text": "has marketing and developers and call center people that marketing and developers have access to staging",
    "start": "1182179",
    "end": "1188419"
  },
  {
    "text": "because they need access to staging they need to do that collaboration but the call center the call center",
    "start": "1188419",
    "end": "1194299"
  },
  {
    "text": "doesn't need access to staging list not only ever there every day the call center has no reason to go and",
    "start": "1194299",
    "end": "1200780"
  },
  {
    "text": "see what next year's Financial results are because that's not their job what they do need to be able to do",
    "start": "1200780",
    "end": "1207440"
  },
  {
    "text": "please make changes to user accounts and the developers and marketers should never be going and making changes to",
    "start": "1207440",
    "end": "1214100"
  },
  {
    "text": "production user accounts if there is times where those those roles need to change then great we're",
    "start": "1214100",
    "end": "1220100"
  },
  {
    "text": "given that privilege and eventually we take it away we do this all because",
    "start": "1220100",
    "end": "1226340"
  },
  {
    "text": "we've assumed that we've been breached so we need to adopt less privilege we need to adopt this privilege because",
    "start": "1226340",
    "end": "1232340"
  },
  {
    "text": "we don't trust anyone we always verified they are who they say they are and",
    "start": "1232340",
    "end": "1237799"
  },
  {
    "text": "they're trying to do things that they should have access to do",
    "start": "1237799",
    "end": "1242080"
  },
  {
    "text": "so with this model change our Network starts look a little bit more like this",
    "start": "1243520",
    "end": "1248660"
  },
  {
    "text": "each service is pinned off has its own little protective layer and",
    "start": "1248660",
    "end": "1255440"
  },
  {
    "text": "the developers the mobile testers the marketers they can all access our staging environment",
    "start": "1255440",
    "end": "1261200"
  },
  {
    "text": "Google script kiddies they can't access a safe environment they're hanging out there on the side they're getting",
    "start": "1261200",
    "end": "1266720"
  },
  {
    "text": "rejected and a little alien who's been sitting there for a few slides now",
    "start": "1266720",
    "end": "1272960"
  },
  {
    "text": "is no longer able to have free reign within the network because they can't verify who they say they are and because",
    "start": "1272960",
    "end": "1280220"
  },
  {
    "text": "we see in breach we're going to find them we're going to kick them out and say you know no purple aliens here this",
    "start": "1280220",
    "end": "1285799"
  },
  {
    "text": "is a no alien workplace and",
    "start": "1285799",
    "end": "1291740"
  },
  {
    "text": "then the next question I think you're going to ask me release the next one in your head is",
    "start": "1291740",
    "end": "1297500"
  },
  {
    "text": "this is great but how do we protect staging in a zero trust network if we don't have ipll lists looks like we've",
    "start": "1297500",
    "end": "1303799"
  },
  {
    "text": "got these little boundaries everywhere and we need some way to secure them",
    "start": "1303799",
    "end": "1308919"
  },
  {
    "text": "and the answer to that is open ID connect and proof key code exchange so",
    "start": "1309700",
    "end": "1316159"
  },
  {
    "text": "open ID connect or oidc is an extension on top of the oauth 2 or",
    "start": "1316159",
    "end": "1322159"
  },
  {
    "text": "2.1 protocols oauth 2 or 2.1 fantastic way to",
    "start": "1322159",
    "end": "1329720"
  },
  {
    "text": "share your conditions with someone so the idea of oauth 2 was that you would have",
    "start": "1329720",
    "end": "1335900"
  },
  {
    "text": "I'll log into LinkedIn I log into Gmail and you would want",
    "start": "1335900",
    "end": "1341179"
  },
  {
    "text": "LinkedIn to be able to go and read your contacts in Gmail to try and build up your network",
    "start": "1341179",
    "end": "1347500"
  },
  {
    "text": "on LinkedIn going and sending email as you you want LinkedIn to send email as",
    "start": "1347600",
    "end": "1352880"
  },
  {
    "text": "LinkedIn saying hey come and join LinkedIn so you want to give LinkedIn definitions to go and read your contacts",
    "start": "1352880",
    "end": "1360200"
  },
  {
    "text": "but not to send email on your behalf before I walked to",
    "start": "1360200",
    "end": "1366200"
  },
  {
    "text": "the only way to do that was to actually give them your login credentials and they would log in as you and then you",
    "start": "1366200",
    "end": "1372080"
  },
  {
    "text": "just trusted them to do things but we don't like trust so that's not a good idea I was too gave us a way to give",
    "start": "1372080",
    "end": "1379400"
  },
  {
    "text": "those conditions in a secure way but it didn't give us a way to actually",
    "start": "1379400",
    "end": "1385640"
  },
  {
    "text": "know the user identity that was sort of shooting in it worked",
    "start": "1385640",
    "end": "1391280"
  },
  {
    "text": "well enough but eventually smarter people than I came up with openid connect as a way to securely",
    "start": "1391280",
    "end": "1398600"
  },
  {
    "text": "exchange information between two parties who don't particularly trust each other",
    "start": "1398600",
    "end": "1404559"
  },
  {
    "text": "and the key for us here is this uses an external authentication server as I mentioned back at the start that",
    "start": "1404659",
    "end": "1411500"
  },
  {
    "text": "you want your staging environment to be production like you want to be as close as possible to production and you want",
    "start": "1411500",
    "end": "1417020"
  },
  {
    "text": "to avoid anybody having an excuse that says don't worry it'll work fine when it gets to production it's just staging",
    "start": "1417020",
    "end": "1423260"
  },
  {
    "text": "staging is slow staging doesn't work properly so we can't go and build some big",
    "start": "1423260",
    "end": "1430039"
  },
  {
    "text": "infrastructure that just exists to protect staging because if we do that the staging will be slowly staging will",
    "start": "1430039",
    "end": "1436220"
  },
  {
    "text": "be complex it'll have all these reasons that we can just say no don't worry that's just staging just go to",
    "start": "1436220",
    "end": "1442880"
  },
  {
    "text": "production anyway and that's how we get bugs that's how we get problems in production that's how we get outages and",
    "start": "1442880",
    "end": "1449200"
  },
  {
    "text": "that's how the CEO gets up there and is unhappy",
    "start": "1449200",
    "end": "1454960"
  },
  {
    "text": "and a key element of oidc is it's going to allow you to know the user identity so it's going to allow you to actually",
    "start": "1455720",
    "end": "1461240"
  },
  {
    "text": "synchronize with your staff accounts so",
    "start": "1461240",
    "end": "1466700"
  },
  {
    "text": "one of the pieces of good news is that you probably already have a server inside your network that speaks oidc it",
    "start": "1466700",
    "end": "1473900"
  },
  {
    "text": "might be called ping Federate it might be called Azure ID might be called OCTA cyber Arc",
    "start": "1473900",
    "end": "1480559"
  },
  {
    "text": "one of any number of things because open ID connect is open it's a protocol that",
    "start": "1480559",
    "end": "1486440"
  },
  {
    "text": "anyone can Implement it's not particularly complicated to implement and there are plenty of services out there and if you're anywhere along the",
    "start": "1486440",
    "end": "1493100"
  },
  {
    "text": "lines to zero trust you've already got something that is a portal you log into and then you click",
    "start": "1493100",
    "end": "1499280"
  },
  {
    "text": "on that to get into slack and you click on that to get into AWS and you have that in your system but you",
    "start": "1499280",
    "end": "1505100"
  },
  {
    "text": "just may not have thought to use to protect staging or you may not know how to",
    "start": "1505100",
    "end": "1511960"
  },
  {
    "text": "and I'll go through that in a minute unfortunately so proof key code exchange is the other",
    "start": "1512059",
    "end": "1517640"
  },
  {
    "text": "part this is the way that the flow actually works so proof key",
    "start": "1517640",
    "end": "1523460"
  },
  {
    "text": "code exchange also called pixie or pkce is a way for us to be able to",
    "start": "1523460",
    "end": "1531799"
  },
  {
    "text": "do that exchange so it goes back and forth between the two servers and gets that data across the line in a nice",
    "start": "1531799",
    "end": "1537980"
  },
  {
    "text": "secure fashion it looks a little bit like this your client",
    "start": "1537980",
    "end": "1543380"
  },
  {
    "text": "they want to get onto stage.myapp.com so enter into the browser it hits your",
    "start": "1543380",
    "end": "1549980"
  },
  {
    "text": "client your client says I don't know who you are I'm going to generate a proof and a key",
    "start": "1549980",
    "end": "1558320"
  },
  {
    "text": "also called a code verifier and a code challenge hit the wrong button",
    "start": "1558320",
    "end": "1564140"
  },
  {
    "text": "perfect key code verifier or a code challenge the proof just being random goggled data",
    "start": "1564140",
    "end": "1570799"
  },
  {
    "text": "Just Junk something that when you generate again won't be the same",
    "start": "1570799",
    "end": "1576200"
  },
  {
    "text": "the key is a sharp 256 hash between base64 URL encoded of that data and",
    "start": "1576200",
    "end": "1583640"
  },
  {
    "text": "we're going to store our proof so that we can use that later and we're going to take our key we're going to put it into",
    "start": "1583640",
    "end": "1589279"
  },
  {
    "text": "a query parameter and send it over to our authentication server so I'll be using all zero but it could be anything",
    "start": "1589279",
    "end": "1596179"
  },
  {
    "text": "of any number or one year Even build yourself don't build yourself authentication itself other people have",
    "start": "1596179",
    "end": "1601880"
  },
  {
    "text": "done it and they can do better than you but I'm going to send that over zero all zero is going to say cool",
    "start": "1601880",
    "end": "1608659"
  },
  {
    "text": "I'm going to see whether I know who this user is if they don't they're going to push them through that authentication pipeline so",
    "start": "1608659",
    "end": "1615380"
  },
  {
    "text": "they're going to go through username password multi-factor authentication we're probably using multi-factor authentication in all of our apps all",
    "start": "1615380",
    "end": "1621260"
  },
  {
    "text": "the time please yes and we're going to take that we're going",
    "start": "1621260",
    "end": "1626360"
  },
  {
    "text": "to generate a code on all zero so that'll just be again red and data and we're going to store that proof",
    "start": "1626360",
    "end": "1633679"
  },
  {
    "text": "we're then going to redirect that user back again to the client with that code so now our",
    "start": "1633679",
    "end": "1641179"
  },
  {
    "text": "client has the bit of data reviews originally to generate the proof and",
    "start": "1641179",
    "end": "1646640"
  },
  {
    "text": "it's got the code it's going to take those bundle them up and post them in a post",
    "start": "1646640",
    "end": "1652820"
  },
  {
    "text": "request back to all xero all zero is going to then verify that all this matches so it's going to take",
    "start": "1652820",
    "end": "1659779"
  },
  {
    "text": "the proof you sent over shelter 56 b64 encode URL encoded and say is this the",
    "start": "1659779",
    "end": "1667100"
  },
  {
    "text": "same as the key they sent over earlier thus proving that they were the ones that originally requested the",
    "start": "1667100",
    "end": "1672440"
  },
  {
    "text": "Authentication and they're going to take that code and compare it and if the client has",
    "start": "1672440",
    "end": "1679640"
  },
  {
    "text": "provided a client secret they're going to verify that that matches as well if all of that is correct",
    "start": "1679640",
    "end": "1685039"
  },
  {
    "text": "then they'll send back an access token and an identity token possibly refresh",
    "start": "1685039",
    "end": "1690799"
  },
  {
    "text": "tokens apply it will then act on those and then log the user in",
    "start": "1690799",
    "end": "1698080"
  },
  {
    "text": "so all this is an improvement on top of the authorization code flow that was",
    "start": "1698900",
    "end": "1704059"
  },
  {
    "text": "available in oauth 2.1 il2 or 2.1 pushes for you should never use authorization",
    "start": "1704059",
    "end": "1710900"
  },
  {
    "text": "code flow you should always use proof key code exchange because you get that additional security",
    "start": "1710900",
    "end": "1716539"
  },
  {
    "text": "so if you were to do this as authorization code flow you would log in",
    "start": "1716539",
    "end": "1721580"
  },
  {
    "text": "use skip generating the proof and key you could then go straight to all zero where",
    "start": "1721580",
    "end": "1726919"
  },
  {
    "text": "they would just generate the code authenticate the user send you back",
    "start": "1726919",
    "end": "1732380"
  },
  {
    "text": "you would do retrieving the proof or you skip retrieving the proof and then they",
    "start": "1732380",
    "end": "1738080"
  },
  {
    "text": "would verify that you have that client secret so you had to have a",
    "start": "1738080",
    "end": "1743360"
  },
  {
    "text": "client secret which means that you couldn't do this for a mobile apps you couldn't do this from a web app",
    "start": "1743360",
    "end": "1749360"
  },
  {
    "text": "finally you're not on the audio token and for your these are so we just lose a",
    "start": "1749360",
    "end": "1755299"
  },
  {
    "text": "bit with authorization code flow it's a bit less secure and generating it in pkc doing pkc doesn't",
    "start": "1755299",
    "end": "1762020"
  },
  {
    "text": "add a lot of complexity so I'm going to implement all this on top",
    "start": "1762020",
    "end": "1770120"
  },
  {
    "text": "of my environment using cloudflare workers cloudflow workers are a fantastic platform they're up and coming",
    "start": "1770120",
    "end": "1777500"
  },
  {
    "text": "they are a serverless application platform and they are really serverless you can build entire applications in",
    "start": "1777500",
    "end": "1783860"
  },
  {
    "text": "here without having an origin server it's going to run on top of the cloudflare edge Network which is 250",
    "start": "1783860",
    "end": "1790640"
  },
  {
    "text": "nodes well more than 250 it was 270 I think yesterday when I checked that's probably 280 now they're adding them",
    "start": "1790640",
    "end": "1796820"
  },
  {
    "text": "every day and they're all around the world in Australia they've got nodes in all the",
    "start": "1796820",
    "end": "1804140"
  },
  {
    "text": "mainland Capital Cities and when you compare that to what I think of as a competition with",
    "start": "1804140",
    "end": "1811340"
  },
  {
    "text": "uh Azure and AWS they've got Donna centers in two locations Sydney",
    "start": "1811340",
    "end": "1818539"
  },
  {
    "text": "and Melbourne so you can get a lot closer to your workers particularly if you are coming all the way over from Perth",
    "start": "1818539",
    "end": "1824659"
  },
  {
    "text": "they claim that clever has nodes within 50 milliseconds of 95 of the world's",
    "start": "1824659",
    "end": "1831080"
  },
  {
    "text": "Internet connected population so if you're running out there on the edge you can serve things really fast to users",
    "start": "1831080",
    "end": "1836899"
  },
  {
    "text": "right where they are rather than having to go all the way back to origin servers and taking all of that time",
    "start": "1836899",
    "end": "1844480"
  },
  {
    "text": "these are also faster than Land Drive they spin up almost instantly there's no cold start problem because they're",
    "start": "1845120",
    "end": "1850760"
  },
  {
    "text": "working in a Thing Called V8 isolates this is a web worker style environment",
    "start": "1850760",
    "end": "1856520"
  },
  {
    "text": "where you're sharing an already running container fortunately they've done a whole bunch",
    "start": "1856520",
    "end": "1861740"
  },
  {
    "text": "of work to ensure that things are secure and that everything is working if you",
    "start": "1861740",
    "end": "1867320"
  },
  {
    "text": "are worried you can go and read the paper on it it's big this long and cloudflare are great security so they",
    "start": "1867320",
    "end": "1875600"
  },
  {
    "text": "are willing to tell you why it's secure and I can't explain it well enough",
    "start": "1875600",
    "end": "1881080"
  },
  {
    "text": "the thing is going to catch you out or at least the thing that caught me out is this is a web worker environment so it's",
    "start": "1881419",
    "end": "1886520"
  },
  {
    "text": "not node it's JavaScript or typescript still but it doesn't have all the node apis so if",
    "start": "1886520",
    "end": "1894980"
  },
  {
    "text": "you try and import crypto try and import FS it's going to blow up on you it doesn't give you access to those things",
    "start": "1894980",
    "end": "1901399"
  },
  {
    "text": "it's much closer to a service worker but really there's nothing you can't do as",
    "start": "1901399",
    "end": "1906860"
  },
  {
    "text": "long as you don't need to write to a file system and because it is in that environment it",
    "start": "1906860",
    "end": "1913159"
  },
  {
    "text": "gives you wasn't out of the box if you're a rough head if you're really keen on uh raster or a few of the other",
    "start": "1913159",
    "end": "1919100"
  },
  {
    "text": "languages go there available pretty much out of the box running inside the web of",
    "start": "1919100",
    "end": "1924380"
  },
  {
    "text": "web inside the Wiseman platform and it's part of a whole platform so",
    "start": "1924380",
    "end": "1932899"
  },
  {
    "text": "in order to run it you can use the console but pretty quickly you're going to decide you want to use configure's",
    "start": "1932899",
    "end": "1938539"
  },
  {
    "text": "code because you're a good developer so Wrangler is the CLI it's a",
    "start": "1938539",
    "end": "1944779"
  },
  {
    "text": "way to automate your confidence code it can run inside workers site actions",
    "start": "1944779",
    "end": "1950779"
  },
  {
    "text": "and you can do all your secret management and upload all that sort of thing without having to go into the",
    "start": "1950779",
    "end": "1956179"
  },
  {
    "text": "console copy and paste things and do all that manual work that is error prone and a waste of time honestly",
    "start": "1956179",
    "end": "1963919"
  },
  {
    "text": "it's known for your module so you need to install at cloudflare Wrangler",
    "start": "1963919",
    "end": "1969080"
  },
  {
    "text": "don't install just Wrangler it's another package something somebody built",
    "start": "1969080",
    "end": "1974419"
  },
  {
    "text": "years ago fortunately they're not typo squatting they're not doing a",
    "start": "1974419",
    "end": "1979460"
  },
  {
    "text": "supply chain attack they've put up a whole bunch of warnings saying hey this isn't what you want go and install our",
    "start": "1979460",
    "end": "1986600"
  },
  {
    "text": "cloudflare Wrangler I know because I've made this mistake and was trying to work out why these",
    "start": "1986600",
    "end": "1993200"
  },
  {
    "text": "things wouldn't work for me in addition to just compute cloudflare",
    "start": "1993200",
    "end": "1999140"
  },
  {
    "text": "have also added Pages this is a way that you can host your study page out on the",
    "start": "1999140",
    "end": "2004960"
  },
  {
    "text": "edge Network again no need for an origin server no need to go back to S3 you can run it all the way from out there",
    "start": "2004960",
    "end": "2012100"
  },
  {
    "text": "and this will work with Hugo gutsby create reactor just playing HTML spell",
    "start": "2012100",
    "end": "2017440"
  },
  {
    "text": "kit any other fancy service that you want to use it'll just work out of the box because",
    "start": "2017440",
    "end": "2023320"
  },
  {
    "text": "it's just selling static assets the platform also includes a thing",
    "start": "2023320",
    "end": "2029559"
  },
  {
    "text": "called R2 one list and S3 or a panel and R2D2 I don't know",
    "start": "2029559",
    "end": "2035019"
  },
  {
    "text": "but it's the way to do object storage it's S3 compatible it's still in beta",
    "start": "2035019",
    "end": "2040360"
  },
  {
    "text": "but it's a big selling point is there's no aggress fees so if you're hosting big videos in S3 you'll know that one of",
    "start": "2040360",
    "end": "2047559"
  },
  {
    "text": "those big costs is actually getting that data back out to your customers this is a great way to avoid that",
    "start": "2047559",
    "end": "2053138"
  },
  {
    "text": "entirely they've got a durable objects option for in-memory storage",
    "start": "2053139",
    "end": "2060520"
  },
  {
    "text": "this does some really fancy stuff to provide transactional low latency storage across the world it does this by",
    "start": "2060520",
    "end": "2068260"
  },
  {
    "text": "moving that data around to where your users are and maybe sitting it really fast and transactional which is a bit",
    "start": "2068260",
    "end": "2076118"
  },
  {
    "text": "amazing but it's a paid feature and I'm really cheap so I haven't actually played with that",
    "start": "2076119",
    "end": "2082179"
  },
  {
    "text": "I have played with KV which is even faster for reads slower for rights it's",
    "start": "2082179",
    "end": "2088599"
  },
  {
    "text": "absolutely optimized for reading it's key value storage and it's cage based so",
    "start": "2088599",
    "end": "2094118"
  },
  {
    "text": "it's going to put those values into the cloud location and once you've read it once it's going to be there for you to",
    "start": "2094119",
    "end": "2100420"
  },
  {
    "text": "read but it is eventually consistent if somebody writes to it in Perth and you want to read it in Melbourne you may",
    "start": "2100420",
    "end": "2106780"
  },
  {
    "text": "have a little bit of time where you're still reading the old value that's not really a problem if you're",
    "start": "2106780",
    "end": "2112300"
  },
  {
    "text": "used to working that way if you're not used to working in that way I think it's the way of the future and it will make",
    "start": "2112300",
    "end": "2118420"
  },
  {
    "text": "everything a lot faster and it does have a very generous three tier so I've had a bit of a play with that and we'll have a",
    "start": "2118420",
    "end": "2124480"
  },
  {
    "text": "look at in a minute so the solution architecture that I'm going",
    "start": "2124480",
    "end": "2130839"
  },
  {
    "text": "to put together here I'm going to show you is a worker running in task groups a GitHub action to deploy it KV to store",
    "start": "2130839",
    "end": "2138579"
  },
  {
    "text": "things and An Origin server that is none of your business because that shouldn't matter you should be able to have any",
    "start": "2138579",
    "end": "2144820"
  },
  {
    "text": "origin server hidden behind your staging protection it should be a big Java Model S",
    "start": "2144820",
    "end": "2151780"
  },
  {
    "text": "a thousand.net microservices things written in node static websites that shouldn't matter because this should be",
    "start": "2151780",
    "end": "2158859"
  },
  {
    "text": "independent of that and it should be super fast so I'm going to build just a really",
    "start": "2158859",
    "end": "2163960"
  },
  {
    "text": "basic session store that hangs on top of it but before that you're going to ask me",
    "start": "2163960",
    "end": "2170260"
  },
  {
    "text": "about pricing so how much does workers cost you're very little",
    "start": "2170260",
    "end": "2176440"
  },
  {
    "text": "very very little there is a really generous freak here so 100 000 requests",
    "start": "2176440",
    "end": "2181720"
  },
  {
    "text": "per day free up to 30 workers groups",
    "start": "2181720",
    "end": "2187960"
  },
  {
    "text": "up to 250 engine or all 250 plus Edge locations",
    "start": "2187960",
    "end": "2193240"
  },
  {
    "text": "free worker cell domains for when you're testing and up to 10 milliseconds I'll say a few",
    "start": "2193240",
    "end": "2200380"
  },
  {
    "text": "time that's important because I told you we don't want our things to be slow so it means that everything I build in",
    "start": "2200380",
    "end": "2206440"
  },
  {
    "text": "this demo will run in less than 10 milliseconds and I know more than 10 milliseconds to",
    "start": "2206440",
    "end": "2212440"
  },
  {
    "text": "your execution time during your login and because it is free here you'll have",
    "start": "2212440",
    "end": "2219339"
  },
  {
    "text": "low latency after the first request but that's fine our first request will either use the logging in anyway",
    "start": "2219339",
    "end": "2225700"
  },
  {
    "text": "and it includes on KV so KV is 100 000",
    "start": "2225700",
    "end": "2232060"
  },
  {
    "text": "reads per day a thousand rights would tell you a thousand deletes a thousand lists and up",
    "start": "2232060",
    "end": "2238000"
  },
  {
    "text": "to one gigabyte of data so if you're going over this then the",
    "start": "2238000",
    "end": "2243460"
  },
  {
    "text": "pricing still stays really really low for workers we're talking 15 cents per",
    "start": "2243460",
    "end": "2249280"
  },
  {
    "text": "million requests per month so really very little if you're hitting",
    "start": "2249280",
    "end": "2254320"
  },
  {
    "text": "that then you're probably making enough money to afford it for",
    "start": "2254320",
    "end": "2261160"
  },
  {
    "text": "KV again what 10 million requests per month for 50 cents this stuff is really cheap it's",
    "start": "2261160",
    "end": "2269500"
  },
  {
    "text": "really fast and there's no reason not to at least have a play with it",
    "start": "2269500",
    "end": "2275400"
  },
  {
    "text": "all right let's have a little bit of a look at some demo code here",
    "start": "2275500",
    "end": "2280920"
  },
  {
    "text": "so this is what the entry point for a cloudflare worker looks like it's going",
    "start": "2282820",
    "end": "2288820"
  },
  {
    "text": "to listen add an event listener which is coming from the cloudflare platform and it's going to listen for the fetch event",
    "start": "2288820",
    "end": "2295480"
  },
  {
    "text": "then inside the factory van in this case I've got to do a little bit of type coercion because the typing is",
    "start": "2295480",
    "end": "2302079"
  },
  {
    "text": "not going to work Straight Out of the Box but I'm going to create an event handler",
    "start": "2302079",
    "end": "2307359"
  },
  {
    "text": "that will deal with all that and eventually we just return response with the whatever Handler returns so",
    "start": "2307359",
    "end": "2317339"
  },
  {
    "text": "oh sorry yep that was something I forgot this morning when I was getting set up",
    "start": "2317339",
    "end": "2323740"
  },
  {
    "text": "it's what you get for having me coming at 9am in the morning all right so the next thing is going to be to",
    "start": "2323740",
    "end": "2331900"
  },
  {
    "text": "actually set up that Handler out here we're going to grab the client",
    "start": "2331900",
    "end": "2336940"
  },
  {
    "text": "secret client ID all this data which is stored in the global global scope it's",
    "start": "2336940",
    "end": "2343060"
  },
  {
    "text": "put there through the Wrangler platform it provides us with a way to do configuration based on environment and",
    "start": "2343060",
    "end": "2349839"
  },
  {
    "text": "testing as well we've also got this All-Star which is a key value namespace that is also",
    "start": "2349839",
    "end": "2357400"
  },
  {
    "text": "injected based on the config in Wrangler so if we want to use something different for staging something else we can hook",
    "start": "2357400",
    "end": "2363520"
  },
  {
    "text": "that up well in this case we're testing staging but if we want to use it in a different",
    "start": "2363520",
    "end": "2369160"
  },
  {
    "text": "application so we have to type these to get them to work with all zero or zero with",
    "start": "2369160",
    "end": "2376119"
  },
  {
    "text": "cloudflare so do setting these things off the strings and then the KV news face is a type that",
    "start": "2376119",
    "end": "2384640"
  },
  {
    "text": "comes from the cloudflow package and we just tell",
    "start": "2384640",
    "end": "2389980"
  },
  {
    "text": "time script that these things are available on the global namespace and what types they are",
    "start": "2389980",
    "end": "2396280"
  },
  {
    "text": "our Wrangler document is using a markup language called Tamil or Tom's obvious",
    "start": "2396280",
    "end": "2402579"
  },
  {
    "text": "markup language I don't know why everything needs and other things it looks like gamble but",
    "start": "2402579",
    "end": "2407920"
  },
  {
    "text": "apparently we do so it's got a name is staging auth we've",
    "start": "2407920",
    "end": "2413619"
  },
  {
    "text": "got a type JavaScript I've got a Zone ID and an account ID so account ID is for",
    "start": "2413619",
    "end": "2419260"
  },
  {
    "text": "everything under your login in cloudflare and the Zone ID refers to the",
    "start": "2419260",
    "end": "2424420"
  },
  {
    "text": "particular now website that you're running against or domain name and we set up a route so",
    "start": "2424420",
    "end": "2431800"
  },
  {
    "text": "this week anything that's going to Stage dot saladsimulator.com we'll go through this what's a salad simulator we'll have",
    "start": "2431800",
    "end": "2438700"
  },
  {
    "text": "a look at that in a minute we're going to build it before it runs",
    "start": "2438700",
    "end": "2444220"
  },
  {
    "text": "up so the build command just says hey we're going to run into install npm build and get all this working so that",
    "start": "2444220",
    "end": "2450460"
  },
  {
    "text": "when we hit Wrangler publish it knows what to do and the format will be server Swagger",
    "start": "2450460",
    "end": "2458819"
  },
  {
    "text": "here's those values that I said I'd set up so this just configures the different things you need so you could run this in",
    "start": "2459040",
    "end": "2466000"
  },
  {
    "text": "different environments and it shows how we have these four values that are there",
    "start": "2466000",
    "end": "2472240"
  },
  {
    "text": "but we don't have the secret the secret was defined previously in the console you can also use Wrangler to Define them",
    "start": "2472240",
    "end": "2479380"
  },
  {
    "text": "but that keeps the secret strategy or GitHub repository that allows you to",
    "start": "2479380",
    "end": "2485680"
  },
  {
    "text": "have different things and you can configure these per environments so you can have them set offers production staging Etc",
    "start": "2485680",
    "end": "2493619"
  },
  {
    "text": "and the kvna space that set up here again you need to create the KV namespace through Wrangler or through",
    "start": "2494560",
    "end": "2500140"
  },
  {
    "text": "the console and it'll give you these IDs as good as it tell you about that storage",
    "start": "2500140",
    "end": "2506400"
  },
  {
    "text": "so moving on I've just got some very basic powerful based routing in the Handler",
    "start": "2508240",
    "end": "2515200"
  },
  {
    "text": "there I'll logout endpoint a callback endpoint and the session required Handler so the user will land into the",
    "start": "2515200",
    "end": "2520960"
  },
  {
    "text": "session required Handler if they need to go out to log in they'll go out to all zero then get redirected back to all",
    "start": "2520960",
    "end": "2527320"
  },
  {
    "text": "slash callback where we'll handle their values",
    "start": "2527320",
    "end": "2532540"
  },
  {
    "text": "in here we handle this request so in order to set up the session store I've got a cookie that's on the request",
    "start": "2535420",
    "end": "2542740"
  },
  {
    "text": "and we're going to check whether that cookie exists so that's just sort of General browser stuff",
    "start": "2542740",
    "end": "2549640"
  },
  {
    "text": "okay cool here just a basically off the browser go through let's start the string Etc",
    "start": "2549640",
    "end": "2556660"
  },
  {
    "text": "nothing exciting there if there's no old cookie we redirect you out to authentication and say hey this request",
    "start": "2556660",
    "end": "2562540"
  },
  {
    "text": "we don't know who it is we need you to authenticate but if there is authentication if there",
    "start": "2562540",
    "end": "2568660"
  },
  {
    "text": "is a cookie we go to our kvna space so our throughpo which has the KV news",
    "start": "2568660",
    "end": "2575079"
  },
  {
    "text": "first passed into it just goes through and does this dot store.get token and gives the type the",
    "start": "2575079",
    "end": "2582819"
  },
  {
    "text": "type is text and then we pass it out as a JWT so just",
    "start": "2582819",
    "end": "2589900"
  },
  {
    "text": "go ahead of body in a signature and if that's there then",
    "start": "2589900",
    "end": "2596740"
  },
  {
    "text": "we're good and the user can come in if it's not there we redirect to auth",
    "start": "2596740",
    "end": "2602140"
  },
  {
    "text": "and if the user can come in we just call fetch that's just the same old fixture used to on the browser and pass the",
    "start": "2602140",
    "end": "2608440"
  },
  {
    "text": "request that came in and then I'll go through your origin and then get returned back to the user",
    "start": "2608440",
    "end": "2614818"
  },
  {
    "text": "so if the user isn't authenticated then we just redirect tools this is where the",
    "start": "2617980",
    "end": "2624040"
  },
  {
    "text": "complexity comes in but we're going to generate that code verifier we're going to do that URL base64",
    "start": "2624040",
    "end": "2631180"
  },
  {
    "text": "encoding the basics for encoded string over random code our random code is just",
    "start": "2631180",
    "end": "2637180"
  },
  {
    "text": "a urinate array that's been filled full of random data so Random data just comes",
    "start": "2637180",
    "end": "2642940"
  },
  {
    "text": "from get crypto which is just Global this or window dot crypto so the same",
    "start": "2642940",
    "end": "2649359"
  },
  {
    "text": "stuff you're used to in the browser it's available there because it's effectively a service worker",
    "start": "2649359",
    "end": "2655440"
  },
  {
    "text": "so then base64 in code that's just B Tower good old it's actually a bit up and URL",
    "start": "2656800",
    "end": "2664440"
  },
  {
    "text": "a64 encoded just means that we're going to take all the plus characters replaced",
    "start": "2664440",
    "end": "2669579"
  },
  {
    "text": "with minus characters all the slash characters replace them with underscores all the equals replacing with nothing",
    "start": "2669579",
    "end": "2676540"
  },
  {
    "text": "and that will give us our code verifier we",
    "start": "2676540",
    "end": "2682420"
  },
  {
    "text": "then generate the challenge which we'll just use that same library from crypto",
    "start": "2682420",
    "end": "2687760"
  },
  {
    "text": "from the browser and password 356 then we just",
    "start": "2687760",
    "end": "2693700"
  },
  {
    "text": "take that buffer that's returned and do URL base64 encoding on it again",
    "start": "2693700",
    "end": "2699460"
  },
  {
    "text": "and that gives us the value that we want to send to all zeros so build up that URL",
    "start": "2699460",
    "end": "2706599"
  },
  {
    "text": "just adds a response type of code that's required so that's for authorization code flow or pkce",
    "start": "2706599",
    "end": "2713260"
  },
  {
    "text": "the client ID the redirect URL so where it wants to come back to after it's logged in",
    "start": "2713260",
    "end": "2718599"
  },
  {
    "text": "the audience that we're asking for the Scopes the Scopes have to at least be open ID connect and profile open ID and",
    "start": "2718599",
    "end": "2725500"
  },
  {
    "text": "profile we're adding that code challenge so that's our sharp 256 hash and the code",
    "start": "2725500",
    "end": "2732160"
  },
  {
    "text": "challenge method has to be s256 the spec does provide support for symmetric",
    "start": "2732160",
    "end": "2738579"
  },
  {
    "text": "caching but we don't want that we want to create s256 and that's the only one",
    "start": "2738579",
    "end": "2744280"
  },
  {
    "text": "all zero supports so I'll bring that over and then we just serve a couple of",
    "start": "2744280",
    "end": "2751599"
  },
  {
    "text": "cookies so we're going to log store our code verifier as a HTTP only cookie",
    "start": "2751599",
    "end": "2757480"
  },
  {
    "text": "and we're going to set it to redirect through to that URL is created",
    "start": "2757480",
    "end": "2763540"
  },
  {
    "text": "we're going to set an additional cookie which is our callback URL because I want a user to end up where they wanted to go",
    "start": "2763540",
    "end": "2770020"
  },
  {
    "text": "in the first place and finally we return that which will bring it back to that top Handler and",
    "start": "2770020",
    "end": "2777040"
  },
  {
    "text": "send the user over to all xero",
    "start": "2777040",
    "end": "2781079"
  },
  {
    "text": "at all zero they're going to spend their time do their thing do their MFA and then get redirected back to here",
    "start": "2782079",
    "end": "2790500"
  },
  {
    "text": "here the URL is going to be parsed out and we're going to grab that code so",
    "start": "2791079",
    "end": "2796480"
  },
  {
    "text": "it'll come through as a request parameter no code will just be sure so six or",
    "start": "2796480",
    "end": "2802300"
  },
  {
    "text": "eight characters and will be Ascend back to the client back to all",
    "start": "2802300",
    "end": "2807880"
  },
  {
    "text": "zero we're going to get our cookie from our code cookie which will have our random",
    "start": "2807880",
    "end": "2814900"
  },
  {
    "text": "string in it and then we're going to go back to wall zero and exchange our code for a token",
    "start": "2814900",
    "end": "2821200"
  },
  {
    "text": "so we're just passing section there because it makes everything easier to test if you don't rely on the browser apis directly",
    "start": "2821200",
    "end": "2828520"
  },
  {
    "text": "so this is going to get post requests type is authorization code let's go have our client ID our secret",
    "start": "2828520",
    "end": "2835420"
  },
  {
    "text": "our code verifier our code that came from all zero and our redirect URI that",
    "start": "2835420",
    "end": "2842260"
  },
  {
    "text": "we used in the first place because we need to make sure that's just one of",
    "start": "2842260",
    "end": "2847480"
  },
  {
    "text": "those other things all serious using to check to make sure we are who we say we are and then our audience in our scope so that we get the right values",
    "start": "2847480",
    "end": "2855460"
  },
  {
    "text": "we'll ping that off it'll come back through and presuming",
    "start": "2855460",
    "end": "2860980"
  },
  {
    "text": "everything's okay which should be we'll just pause out the response and",
    "start": "2860980",
    "end": "2866619"
  },
  {
    "text": "that will be a token response so in this case it'll have an access token a refresh token an ID token and a type",
    "start": "2866619",
    "end": "2876000"
  },
  {
    "text": "we can then use that here",
    "start": "2877720",
    "end": "2881640"
  },
  {
    "text": "we can use that here decode it so that we can see that the ID token looks how",
    "start": "2884440",
    "end": "2889480"
  },
  {
    "text": "we want it to we don't necessarily need to validate it here because we have gone through using",
    "start": "2889480",
    "end": "2894880"
  },
  {
    "text": "the post request to a known endpoint this isn't a token coming in from an untrusted location",
    "start": "2894880",
    "end": "2901319"
  },
  {
    "text": "I'm going to take that plain string token I'm going to Hash it and save that into the repository so that becomes our",
    "start": "2901480",
    "end": "2908980"
  },
  {
    "text": "Kohinoor becomes our key so we don't have to do that hashing every time that's just done once on the first login",
    "start": "2908980",
    "end": "2914319"
  },
  {
    "text": "and then from here on out we just have to check whether it exists we're also going to use the expiry from the past",
    "start": "2914319",
    "end": "2921880"
  },
  {
    "text": "token to set up a lifetime for this session so now cloudflare will take care",
    "start": "2921880",
    "end": "2927880"
  },
  {
    "text": "of deleting that after the token expires and we now have a time-based session to",
    "start": "2927880",
    "end": "2934480"
  },
  {
    "text": "auth that exists without us having to do any work on each request",
    "start": "2934480",
    "end": "2940060"
  },
  {
    "text": "so there we know auth repository we're then just going to get our cookie set up",
    "start": "2940060",
    "end": "2946480"
  },
  {
    "text": "a request that uses it and we're going to set our auth cookie with our hash token as",
    "start": "2946480",
    "end": "2954400"
  },
  {
    "text": "the value so they don't have a request we can see that's there pull it out of the cookie",
    "start": "2954400",
    "end": "2959680"
  },
  {
    "text": "check whether it exists inside the repository and validate that our user exists so we never trust our user we're",
    "start": "2959680",
    "end": "2965680"
  },
  {
    "text": "always verifying who they are all right and the last thing is just to",
    "start": "2965680",
    "end": "2972280"
  },
  {
    "text": "make sure we can actually deploy this into production so it's really complicated right here this",
    "start": "2972280",
    "end": "2977980"
  },
  {
    "text": "is the build and deploy GitHub workflow you need you just need when you push to",
    "start": "2977980",
    "end": "2983079"
  },
  {
    "text": "main then run this one job and it take as takes care of everything for you",
    "start": "2983079",
    "end": "2990040"
  },
  {
    "text": "so cloudflare API token you've got to get from the console put it into the secrets and",
    "start": "2990040",
    "end": "2996040"
  },
  {
    "text": "GitHub other than that the cloudflare action will take care of everything for you deployment is as easy",
    "start": "2996040",
    "end": "3002400"
  },
  {
    "text": "as that so you get basically free deployment free security and without having to do a whole lot of",
    "start": "3002400",
    "end": "3009180"
  },
  {
    "text": "work so I told you I'd tell you what salad simulator was so",
    "start": "3009180",
    "end": "3017099"
  },
  {
    "text": "what is it like to eat salad maybe it's dire",
    "start": "3017099",
    "end": "3024660"
  },
  {
    "text": "maybe it's just sad face this came out of one day I was at the",
    "start": "3024660",
    "end": "3030000"
  },
  {
    "text": "pub I was trying to eat healthy everyone else is eating burgers schnitzels wonderful looking food and I'm sitting",
    "start": "3030000",
    "end": "3035400"
  },
  {
    "text": "there with a pub salad and I just felt sad so I thought I",
    "start": "3035400",
    "end": "3040980"
  },
  {
    "text": "should make a stupid website about that but I'd love for my stupid website to be",
    "start": "3040980",
    "end": "3046380"
  },
  {
    "text": "more popular so I want to do a collaboration with a guy called Nigel Allman Nigel young has",
    "start": "3046380",
    "end": "3052800"
  },
  {
    "text": "a character called Uncle Roger Uncle Roger famously does not like vegetables he thinks they taste like sad",
    "start": "3052800",
    "end": "3060119"
  },
  {
    "text": "so I started to set up a little bit of an example page about how how we could work together how",
    "start": "3060119",
    "end": "3066540"
  },
  {
    "text": "everything could be fantastic but I don't want anyone to see it just yet because it's still a work in progress so if you go to",
    "start": "3066540",
    "end": "3073940"
  },
  {
    "text": "staged.sellersimulator.com you'll be redirected to this all serial login page where we can log in using the very",
    "start": "3073940",
    "end": "3081000"
  },
  {
    "text": "secure test at mail linear.com",
    "start": "3081000",
    "end": "3087059"
  },
  {
    "text": "if you don't know what melonater is you should look it up it's a fantastic service and it's got a really secure password which is capital P A oh that's",
    "start": "3087059",
    "end": "3094079"
  },
  {
    "text": "not your ID one super secure you can go and log in and try it out for",
    "start": "3094079",
    "end": "3100079"
  },
  {
    "text": "yourself so now I've got Nigel there he thinks Angela",
    "start": "3100079",
    "end": "3105660"
  },
  {
    "text": "says like sad but I think my web design skills also taste like sad and maybe",
    "start": "3105660",
    "end": "3110700"
  },
  {
    "text": "you'll need to do a little bit more work before I start talking to an international comedian about getting onto my joke website",
    "start": "3110700",
    "end": "3117300"
  },
  {
    "text": "so we might just leave that one secure for now all right cool",
    "start": "3117300",
    "end": "3125339"
  },
  {
    "text": "so with that I was running close to time we should finish up so",
    "start": "3125339",
    "end": "3132000"
  },
  {
    "text": "I have gone through here how do you talk about zero trust environments where we",
    "start": "3132000",
    "end": "3138000"
  },
  {
    "text": "are always going to verify people when they're going to trust them we're going to assume that we have been",
    "start": "3138000",
    "end": "3143280"
  },
  {
    "text": "breached and that people shouldn't be allowed to just go willy-nilly within our system we need to make sure that",
    "start": "3143280",
    "end": "3149819"
  },
  {
    "text": "we're keeping little purple aliens out and that people are only doing what they need to do to do their job and we're",
    "start": "3149819",
    "end": "3156119"
  },
  {
    "text": "going to do that by adopting police privilege across everything",
    "start": "3156119",
    "end": "3161780"
  },
  {
    "text": "we know that IP allow lists are a problem they're hard to maintain",
    "start": "3163440",
    "end": "3168780"
  },
  {
    "text": "they're open to abuse and we're going to solve that by adding",
    "start": "3168780",
    "end": "3174059"
  },
  {
    "text": "in open ID connect and proof key code exchange so we're",
    "start": "3174059",
    "end": "3179220"
  },
  {
    "text": "going to use our existing providers the existing our Network that are synchronized up to our systems that say",
    "start": "3179220",
    "end": "3186300"
  },
  {
    "text": "we are secure because we know these are our current users when our users move to",
    "start": "3186300",
    "end": "3191700"
  },
  {
    "text": "work to the competition their accounts disappear and they can no longer access our staging environment or anything else",
    "start": "3191700",
    "end": "3197520"
  },
  {
    "text": "that matter it's open so you can jump in and you can",
    "start": "3197520",
    "end": "3203160"
  },
  {
    "text": "use any number of things like OCTA or zero pink Ferro active Azure active",
    "start": "3203160",
    "end": "3209480"
  },
  {
    "text": "Azure active directory all of these things are great ways to make sure you keep your system secure and because it",
    "start": "3209480",
    "end": "3217200"
  },
  {
    "text": "is open a whole lot of things can actually talk to them that gives you access to making use of",
    "start": "3217200",
    "end": "3224339"
  },
  {
    "text": "that Federated identity and I'll show you a little bit about",
    "start": "3224339",
    "end": "3229559"
  },
  {
    "text": "cloudflare and how it's an emerging and already capable application development",
    "start": "3229559",
    "end": "3234599"
  },
  {
    "text": "platform where you can build little things like this but you can go a lot bigger and build your entire application",
    "start": "3234599",
    "end": "3239819"
  },
  {
    "text": "without needing an origin server I showed you how you can build a really",
    "start": "3239819",
    "end": "3245460"
  },
  {
    "text": "basic session store that sits on top of your staging environment to protect things",
    "start": "3245460",
    "end": "3251220"
  },
  {
    "text": "it used workers for logic which were running in JavaScript that could be running in wasn't",
    "start": "3251220",
    "end": "3259280"
  },
  {
    "text": "and it used TV for storage which is a fantastic really fast lightweight system again that whole thing reading from the",
    "start": "3259500",
    "end": "3267359"
  },
  {
    "text": "database right into the database is going to take less than 10 milliseconds on each request so it's not adding any",
    "start": "3267359",
    "end": "3272400"
  },
  {
    "text": "time and with that that's about everything I have for you today I want you to",
    "start": "3272400",
    "end": "3278280"
  },
  {
    "text": "remember that ipll this suck and if you are interested in having a look at that code it's up there on GitHub or you can",
    "start": "3278280",
    "end": "3284400"
  },
  {
    "text": "hit me up on kleut and I can point to point you to it anytime my DMs are open",
    "start": "3284400",
    "end": "3289680"
  },
  {
    "text": "there all right thank you very much I've got a couple of minutes for questions I think",
    "start": "3289680",
    "end": "3295319"
  },
  {
    "text": "um or I'm happy to talk to you probably around all week hello so is your advantage to implementing",
    "start": "3295319",
    "end": "3302700"
  },
  {
    "text": "yourself versus just using cloudflare access directly uh probably not you're probably able to I can play with cluster",
    "start": "3302700",
    "end": "3309839"
  },
  {
    "text": "access but if it's going to work for you and work with the correct accounts it sounds like a good idea as a general rule you",
    "start": "3309839",
    "end": "3317339"
  },
  {
    "text": "probably shouldn't build any authentication yourself if you don't have to because it's not what your customers are paying you for right I",
    "start": "3317339",
    "end": "3324720"
  },
  {
    "text": "really like to push everyone towards all zero or other things because no one ever goes to your your software to say hey",
    "start": "3324720",
    "end": "3330599"
  },
  {
    "text": "how good is the login system yeah you're there to deliver value and authentication is bombing in the end",
    "start": "3330599",
    "end": "3338000"
  },
  {
    "text": "right other than that I'm going to go and get a coffee so thank you very much",
    "start": "3339300",
    "end": "3346520"
  }
]