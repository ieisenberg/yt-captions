[
  {
    "start": "0",
    "end": "46000"
  },
  {
    "text": "hello everyone thanks for coming this afternoon my name is Jimmy and uh today",
    "start": "8519",
    "end": "14120"
  },
  {
    "text": "I want to talk a little bit about avoiding microservice Mega disasters is everyone ready for story",
    "start": "14120",
    "end": "19240"
  },
  {
    "text": "time I love afternoon story time so this talk is mainly uh a story of a company I",
    "start": "19240",
    "end": "24640"
  },
  {
    "text": "worked with uh for about a year and a half or so to help turn around their ship from the uh impending iceberg that",
    "start": "24640",
    "end": "31800"
  },
  {
    "text": "was their microservice Mega disaster so in order for me to tell the story properly we have to really go back in",
    "start": "31800",
    "end": "37160"
  },
  {
    "text": "time and talk about how the company started and how their it infrastructure grew over time now to protect the names",
    "start": "37160",
    "end": "43280"
  },
  {
    "text": "of the innocent I've changed the name of the company so we'll be talking about Bell computers not any other computer",
    "start": "43280",
    "end": "49120"
  },
  {
    "start": "46000",
    "end": "46000"
  },
  {
    "text": "company you may be associated with it's totally unrelated so uh what we have here is a",
    "start": "49120",
    "end": "54960"
  },
  {
    "text": "picture of their it system in the mid 90s does anyone recognize what this is",
    "start": "54960",
    "end": "61640"
  },
  {
    "text": "it's a main frame it's an HP tandem main frame and I guess they actually still",
    "start": "62480",
    "end": "68159"
  },
  {
    "text": "make these things because you didn't still go buy them and get support from them and things like that um so uh Bell",
    "start": "68159",
    "end": "73640"
  },
  {
    "text": "computers as they started to grow over time they needed to build a system to help manage all of their orders all of",
    "start": "73640",
    "end": "79479"
  },
  {
    "text": "their really their entire company and so they went with the most common solution at the time in the ' 8S and 90s which",
    "start": "79479",
    "end": "84720"
  },
  {
    "text": "was a gigantic Mainframe and this Mainframe held every single piece of information about the company everything",
    "start": "84720",
    "end": "91479"
  },
  {
    "text": "that could possibly be transacted through the company was held inside of this one single main frame uh so we had",
    "start": "91479",
    "end": "97119"
  },
  {
    "text": "sales catalog information about the different products they had uh orders information their serum like everything",
    "start": "97119",
    "end": "103240"
  },
  {
    "text": "to do with anything with a company was in this one system and that was okay because they didn't have any other",
    "start": "103240",
    "end": "108360"
  },
  {
    "text": "system to Pro or place in order except for mail order catalogs or you could call them up and place an order over the",
    "start": "108360",
    "end": "115600"
  },
  {
    "text": "phone now of course over time the system got larger and larger and more junk was",
    "start": "115600",
    "end": "120640"
  },
  {
    "text": "put in there and of course Cobalt is not the most expressive Lang language in the world so this eventually became the uh",
    "start": "120640",
    "end": "127159"
  },
  {
    "text": "what's known as the big ball of mud big ball of who or the monolith so around the uh around the",
    "start": "127159",
    "end": "133879"
  },
  {
    "text": "year 2000 they just decided you know what a lot of other companies have uh websites that actually do stuff maybe",
    "start": "133879",
    "end": "139360"
  },
  {
    "text": "ours should be a little bit more than just call us to place your order and so they decided to build their first actual.com e-commerce website now the",
    "start": "139360",
    "end": "146120"
  },
  {
    "text": "design of this initially was I thought pretty good um the original uh bell.com design uh consisted of a number of top",
    "start": "146120",
    "end": "153360"
  },
  {
    "text": "level uh top level websites or subdomains of an individual uh of of the",
    "start": "153360",
    "end": "158760"
  },
  {
    "text": "entire application so you had catalog. bell.com you had account. bell.com you had orders. bell.com and search.",
    "start": "158760",
    "end": "164879"
  },
  {
    "text": "bell.com all these distinct asp.net 1.0 webforms applications uh built each with",
    "start": "164879",
    "end": "171000"
  },
  {
    "text": "their own individual database and at some point they all to communicate with the backend system uh all fulfillment",
    "start": "171000",
    "end": "176599"
  },
  {
    "text": "and all the orders actually getting processed still had to go inside the this single Mainframe so all the supply",
    "start": "176599",
    "end": "182080"
  },
  {
    "text": "chain all that other junk was still going to be inside that main frame but the front end website these had individual applications and individual",
    "start": "182080",
    "end": "187959"
  },
  {
    "text": "databases now this is how they designed the system the reality was more like",
    "start": "187959",
    "end": "193040"
  },
  {
    "text": "this where everything called every every everything else through API calls or",
    "start": "193040",
    "end": "198799"
  },
  {
    "text": "soap calls or just embedding someone else's dll in your uh in your project or",
    "start": "198799",
    "end": "205080"
  },
  {
    "text": "what what was very hen uh happened very often with uh these kinds of source Control Systems I would just grab other",
    "start": "205080",
    "end": "210159"
  },
  {
    "text": "people's code and just shove it into my project and then complain when it broke uh later on uh SQL 2005 introduced a",
    "start": "210159",
    "end": "217200"
  },
  {
    "text": "concept of linked servers so I didn't show it here but there's also arrows between each of these databases as well",
    "start": "217200",
    "end": "222599"
  },
  {
    "text": "because what's wrong with joining tables against different physical databases if you can do it if you weren't allowed you",
    "start": "222599",
    "end": "228519"
  },
  {
    "text": "weren't supposed to do it then why did they give you the feature it doesn't make any sense so uh while they had some",
    "start": "228519",
    "end": "235599"
  },
  {
    "text": "separation now between the different logical areas of the system this again turned into to now a distributed ball of",
    "start": "235599",
    "end": "241640"
  },
  {
    "text": "mud where I had different little balls of mud in each my different applications and of course the big one was still",
    "start": "241640",
    "end": "247159"
  },
  {
    "text": "actually back over there now the funny thing was this uh this main frame was not built by Bell computers was built by",
    "start": "247159",
    "end": "253959"
  },
  {
    "text": "competitor so it was really fun to see the competitors Consultants come in when they ever had to maintain this Mainframe",
    "start": "253959",
    "end": "261079"
  },
  {
    "text": "because like that's kind of embarrassing if your competitor has to support the system that your entire company has built on that's pretty",
    "start": "261079",
    "end": "267759"
  },
  {
    "text": "ridiculous so looking at this application they decided of course let's throw it all away and let's do the",
    "start": "267759",
    "end": "274039"
  },
  {
    "text": "rewrite now this existing application uh was in production for about 15 years",
    "start": "274039",
    "end": "279320"
  },
  {
    "text": "which is a very long time for an asp.net webforms application uh it accepted orders",
    "start": "279320",
    "end": "284639"
  },
  {
    "text": "worldwide so you can place an order in one country and have it shipped to another things like that uh generated",
    "start": "284639",
    "end": "289840"
  },
  {
    "text": "billions of dollars of year in Revenue through this one application very significant portion of uh the company's",
    "start": "289840",
    "end": "296560"
  },
  {
    "text": "Revenue came through their their DOC website millions of orders a day at its peak uh Black Friday typically but they",
    "start": "296560",
    "end": "303560"
  },
  {
    "text": "found that there is really no way forward with this exist existing application design that because everything was talking to each other and",
    "start": "303560",
    "end": "309800"
  },
  {
    "text": "everything referenced each other it was really really hard to make any sort of meaningful change in this application",
    "start": "309800",
    "end": "315240"
  },
  {
    "text": "and they found there was one particular business request that they just could not fulfill that was going to force them to really uh uh throw away the entire",
    "start": "315240",
    "end": "323199"
  },
  {
    "text": "application and start something new and it was this idea that although it supported the ability to accept orders",
    "start": "323199",
    "end": "329319"
  },
  {
    "text": "in Al you cannot place an order in one country bill it from a second country and have it shipped to a third country",
    "start": "329319",
    "end": "336280"
  },
  {
    "text": "which is pretty common for global companies but you could not do it through the existing website and so they",
    "start": "336280",
    "end": "341520"
  },
  {
    "text": "were forcing you to go through the phone to do so and so if you're a big uh big corporation that needs to order",
    "start": "341520",
    "end": "347080"
  },
  {
    "text": "computers over the phone you probably try to find a competitor as well so this is about the time you started to see",
    "start": "347080",
    "end": "353120"
  },
  {
    "text": "more and more people talk about service oriented architecture and microservice uh microservice architectures as well so",
    "start": "353120",
    "end": "359000"
  },
  {
    "text": "naturally they did the a smart thing and just read blogs of other people and just try to blindly do what those other people did one of the pictures they",
    "start": "359000",
    "end": "365360"
  },
  {
    "text": "really like was this concept of a Netflix oriented architecture where I have very small microservices that can connect to each other via apis standards",
    "start": "365360",
    "end": "372560"
  },
  {
    "start": "366000",
    "end": "366000"
  },
  {
    "text": "based approached and they saw that's great let's go ahead and build this architecture they want to have some core",
    "start": "372560",
    "end": "379240"
  },
  {
    "text": "principles around building this architecture uh first of all they used to have a really big problem with data",
    "start": "379240",
    "end": "384960"
  },
  {
    "start": "381000",
    "end": "381000"
  },
  {
    "text": "being shared between M multiple different places so they had a core tenant of no data dup application I",
    "start": "384960",
    "end": "390319"
  },
  {
    "text": "cannot go to I cannot ship data to somewhere else and if you need some information you have to come to me to",
    "start": "390319",
    "end": "395680"
  },
  {
    "text": "get it because I am the source of Truth we're going to see this one come back in a little bit about how that really screwed things up for",
    "start": "395680",
    "end": "401720"
  },
  {
    "text": "them they wanted to follow those service oriented architecture principles of isolation and autonomy that Individual",
    "start": "401720",
    "end": "407560"
  },
  {
    "text": "Services uh were isolated from each other I didn't have people sharing code back and forth things things like that",
    "start": "407560",
    "end": "413440"
  },
  {
    "text": "uh they wanted to use web apis for absolutely everything so if you needed to get data or needed to affect change",
    "start": "413440",
    "end": "418680"
  },
  {
    "text": "in another system you must go through a web API and the last big one was to get off that main frame with a project",
    "start": "418680",
    "end": "424440"
  },
  {
    "text": "called Bell on Bell as opposed to Bell on competitor Hardware so 18 months they built a",
    "start": "424440",
    "end": "432199"
  },
  {
    "text": "system around these sort of core principles and had a pre-production go",
    "start": "432199",
    "end": "437840"
  },
  {
    "text": "live where all the developers came in over the weekend and they turned on all the servers connected everything up and",
    "start": "437840",
    "end": "443479"
  },
  {
    "text": "flip the switch so after 18 months hundreds of developers on Bell's top Hardware they",
    "start": "443479",
    "end": "451479"
  },
  {
    "text": "flipped the switch went to the website and nothing showed up which was rather embarrassing for",
    "start": "451479",
    "end": "457759"
  },
  {
    "text": "quite a lot of people so I said okay um that's odd we expected to have some",
    "start": "457759",
    "end": "464080"
  },
  {
    "text": "response because we've been running this application on our laptops for so long why is it failing now so they did the",
    "start": "464080",
    "end": "469720"
  },
  {
    "text": "simple sensible thing and threw money at the problem so okay let's go ahead and put everything on one single gigabit",
    "start": "469720",
    "end": "476759"
  },
  {
    "text": "fiber back plane ethernet rack everything super connected to each other very low latency and let's upgrade all",
    "start": "476759",
    "end": "482919"
  },
  {
    "text": "the servers to you know you've done this on their website right where you go to the servers and try to make the most expensive machine you can or is that",
    "start": "482919",
    "end": "489080"
  },
  {
    "text": "just me so they did that they said let's just go you know let's go make the most expensive machines we can with an insane",
    "start": "489080",
    "end": "494560"
  },
  {
    "text": "amount of ram connect all these things up reinstall everything get it all configured and still nothing",
    "start": "494560",
    "end": "500599"
  },
  {
    "text": "happened so they had a suspicion that maybe there's some timeouts that were happening so they decided to go to all",
    "start": "500599",
    "end": "506479"
  },
  {
    "text": "the web configuration all the API configuration and update all the timeout settings to a maximum Infinity timeout",
    "start": "506479",
    "end": "514240"
  },
  {
    "text": "so we're just going to sit and wait for something to happen on this website and they waited and they waited and they",
    "start": "514240",
    "end": "521200"
  },
  {
    "text": "waited and they waited for n and a half minutes until the website finally loaded this is just a simple page showing a",
    "start": "521200",
    "end": "527880"
  },
  {
    "text": "list of products for one of the catalogs around this time they also said maybe we did something wrong so that's",
    "start": "527880",
    "end": "534480"
  },
  {
    "text": "when uh that's when we got involved to try to help them try to fix this situation now the first thing we had was",
    "start": "534480",
    "end": "539640"
  },
  {
    "text": "uh 18 to months to ship anything is not not micro if you if you have to take a year and a half to ship an application",
    "start": "539640",
    "end": "546480"
  },
  {
    "text": "then it's probably not a micr service or micro anything it's probably something much larger so we had a postmortem after",
    "start": "546480",
    "end": "554320"
  },
  {
    "text": "this also known as a regret rospective also known as a blamestorming session to figure out exactly what went wrong",
    "start": "554320",
    "end": "561760"
  },
  {
    "text": "here and we had a few few Clues one was they were completely Satur they were completely saturating their Network",
    "start": "561760",
    "end": "567839"
  },
  {
    "text": "traffic with all the API call is going on and by the way with a normal application uh like a normal monolith if",
    "start": "567839",
    "end": "573959"
  },
  {
    "text": "you will if something goes wrong there's an exception or crash it's really easy to figure out what went wrong because you have a single stack Trace that tells",
    "start": "573959",
    "end": "580160"
  },
  {
    "text": "you everything that's executing at once with this kind of architecture where everything is an API call there's",
    "start": "580160",
    "end": "586120"
  },
  {
    "text": "no one stack Trace i instead have to go through tools like wire shark uh or other network monitoring tools to figure",
    "start": "586120",
    "end": "591959"
  },
  {
    "text": "out okay for this one request what in the world happened with this one single request so we took uh just at one simple",
    "start": "591959",
    "end": "598480"
  },
  {
    "text": "page and and in about 2 weeks time we pieced together the puzzle of exactly all the different calls that were being",
    "start": "598480",
    "end": "605079"
  },
  {
    "text": "made and we found that they sort of misinterpreted this picture slightly so",
    "start": "605079",
    "end": "610920"
  },
  {
    "text": "in this picture we have the idea of that there's one single external request that hits a service and then I make a number of internal service request calls and",
    "start": "610920",
    "end": "617320"
  },
  {
    "text": "they get and they get back to me now what's not supposed to happen is that any of those other service calls can't",
    "start": "617320",
    "end": "623079"
  },
  {
    "text": "make additional hops that is they have to be able to service that request all by themselves and they can't go anywhere",
    "start": "623079",
    "end": "628279"
  },
  {
    "text": "else to get that information well that's not what they did this picture looked like some sort of",
    "start": "628279",
    "end": "633959"
  },
  {
    "text": "cascading insane graph of calls because every single one would call additional services and those Services would call",
    "start": "633959",
    "end": "640200"
  },
  {
    "text": "additional Services those Services would call additional services and uh almost to Affinity well not to about a thousand",
    "start": "640200",
    "end": "646399"
  },
  {
    "text": "different network calls for that one single request so this picture for them was just basically a filled in green",
    "start": "646399",
    "end": "652720"
  },
  {
    "text": "circle because everything was calling each other we also found cases where Services would call each other as well",
    "start": "652720",
    "end": "659959"
  },
  {
    "text": "service a would call service B service B would call service C and then service C would also call service a and now I have",
    "start": "659959",
    "end": "667040"
  },
  {
    "text": "a distributed deadlock it was really really fun so this picture they had where they had a single request uh calling",
    "start": "667040",
    "end": "674519"
  },
  {
    "text": "thousands of API calls and we looked to see if they had any resiliency bu built in things like the service break or the",
    "start": "674519",
    "end": "680800"
  },
  {
    "text": "circuit breaker pattern no of course not if any one of those API calls failed the entire request failed so we're doing",
    "start": "680800",
    "end": "688000"
  },
  {
    "text": "some math for them say you have uh each API call has an SLA",
    "start": "688000",
    "end": "693079"
  },
  {
    "start": "689000",
    "end": "689000"
  },
  {
    "text": "of 150 milliseconds now because they were using uh Windows communication Foundation WCF that pretty much already",
    "start": "693079",
    "end": "700519"
  },
  {
    "text": "any any one request already hit that SLA because there's no WCF call that can take less than 150 milliseconds it turns",
    "start": "700519",
    "end": "706639"
  },
  {
    "text": "out and they wanted to have a a 99.9% up time which is only 39 that's really not",
    "start": "706639",
    "end": "711959"
  },
  {
    "text": "that great but they thought they could achieve that at least so in this uh one",
    "start": "711959",
    "end": "717760"
  },
  {
    "text": "request that made a see 200 different requests the absolute best case scenario they could have was 30 second response",
    "start": "717760",
    "end": "724800"
  },
  {
    "text": "time to get that page to be shown so immediately that's just absolutely impossible but if we all look also look",
    "start": "724800",
    "end": "731720"
  },
  {
    "text": "at the 99.9% uptime and do some probability math around this if you look",
    "start": "731720",
    "end": "736760"
  },
  {
    "text": "at 99.9% up time times 200 200 calls through my probabilities class that I took in college we find that that site",
    "start": "736760",
    "end": "744399"
  },
  {
    "text": "has a a 0% chance of ever being up",
    "start": "744399",
    "end": "749600"
  },
  {
    "text": "so this architecture was doomed from the start the original architect was",
    "start": "750440",
    "end": "755639"
  },
  {
    "text": "naturally fired ah just kidding he left before this went to production to spread",
    "start": "755639",
    "end": "760880"
  },
  {
    "text": "his mess somewhere else and we went and asked the developers like what how could you",
    "start": "760880",
    "end": "766839"
  },
  {
    "text": "possibly make it 18 months without ever seeing this one problem I said well look our we're we're all adhering to our our",
    "start": "766839",
    "end": "773160"
  },
  {
    "text": "150 millisecond um SLA and they had the charge to prove it with from that from",
    "start": "773160",
    "end": "778600"
  },
  {
    "text": "that uh from that one single request and I found that the way they were calculating their SLA was only calculating the code that they ran but",
    "start": "778600",
    "end": "785279"
  },
  {
    "text": "if their service called another another service they wouldn't count that time in terms of their SLA so of course",
    "start": "785279",
    "end": "791720"
  },
  {
    "text": "everything running in their one process was going to be under 150 milliseconds but having to call to someone else was",
    "start": "791720",
    "end": "797120"
  },
  {
    "text": "going to add time that they just didn't calculate so the first lesson was you either have to own your SLA or your SLA",
    "start": "797120",
    "end": "803560"
  },
  {
    "text": "is going to own you and of course they were completely owned by their SLA the next thing we found is they had",
    "start": "803560",
    "end": "811639"
  },
  {
    "text": "understood the whole concept of the fallacies to distributed computing but they missed the first part there the",
    "start": "811639",
    "end": "817560"
  },
  {
    "text": "fallacies they actually thought that all these were just things that were okay to to pretend like they're they're true so",
    "start": "817560",
    "end": "823399"
  },
  {
    "start": "818000",
    "end": "818000"
  },
  {
    "text": "Network being reliable they just assume that was true latency being zero we assume that's true as well bandwidth is",
    "start": "823399",
    "end": "829839"
  },
  {
    "text": "infinite absolutely it's true because again everything worked on their",
    "start": "829839",
    "end": "834920"
  },
  {
    "text": "machine why did it work on their machine because when they were doing local development they never ever hooked up external Services they faked out all of",
    "start": "834920",
    "end": "841839"
  },
  {
    "text": "those external service calls mocked them out of whatever you want to do so that they never had any network cops when",
    "start": "841839",
    "end": "847320"
  },
  {
    "text": "they're developing locally they would just have some local cash so of course it work great locally because I never made anyone Network hops but as soon as",
    "start": "847320",
    "end": "854360"
  },
  {
    "text": "you Tred to build a system that has to make those Network cops it would been immediately apparent so for 18 months they never actually uh tested locally to",
    "start": "854360",
    "end": "862560"
  },
  {
    "text": "even see like what will this be like if I have to actually uh hit those other services nope worked on their machine",
    "start": "862560",
    "end": "869240"
  },
  {
    "text": "let's go ahead and ship it now this picture they they had here even looking at the service boundaries",
    "start": "869240",
    "end": "875560"
  },
  {
    "text": "they drew were all Incorrect and we'll come back a little bit later about how they got into those incorrect service",
    "start": "875560",
    "end": "880959"
  },
  {
    "text": "boundaries but I can kind of see why if you look at some of the literature out there uh trying to give you some advice",
    "start": "880959",
    "end": "888240"
  },
  {
    "text": "about how to draw the service boundaries some of them are terribly terribly wrong um naturally the one from Microsoft is",
    "start": "888240",
    "end": "893560"
  },
  {
    "start": "892000",
    "end": "892000"
  },
  {
    "text": "the one that's terribly terribly wrong this is the picture they had of their first application and this is is from a",
    "start": "893560",
    "end": "899800"
  },
  {
    "text": "uh this is from a Blog on uh Microsoft about how to build microservices so",
    "start": "899800",
    "end": "904959"
  },
  {
    "text": "pretend like you have a a normal uh single interior application that has the web your business Logic box and your",
    "start": "904959",
    "end": "911279"
  },
  {
    "text": "data cylinder over there and a normal request just goes up and down I can have one server for the website maybe the one",
    "start": "911279",
    "end": "917560"
  },
  {
    "text": "server has my web and business logic and then another server has my database now if I get more traffic then this picture",
    "start": "917560",
    "end": "924399"
  },
  {
    "text": "needs to change a little bit I probably have to have a load balancer here to be able to go to different fronted web",
    "start": "924399",
    "end": "929759"
  },
  {
    "text": "servers and then there's probably some sort of cach layer between that and my business logic and there's probably some sort of cach layer between my business",
    "start": "929759",
    "end": "936199"
  },
  {
    "text": "logic and the database and in fact this is the picture when I used to work at that company this",
    "start": "936199",
    "end": "942240"
  },
  {
    "text": "is the picture we had for our applications everything was load balanced uh we were been doing blue green deployments in the mid 2000s being",
    "start": "942240",
    "end": "948519"
  },
  {
    "text": "able to take things out of the load balancer upgrade them and put them back in switching the other ones out and this all worked absolutely great with this",
    "start": "948519",
    "end": "954399"
  },
  {
    "text": "the only thing we didn't get right was we were just directly using other people's code in our code base and directly their database from our",
    "start": "954399",
    "end": "959920"
  },
  {
    "text": "database but otherwise uh this picture worked out for us well now the blog post says from here in",
    "start": "959920",
    "end": "967040"
  },
  {
    "text": "order to build microservices you need to break each one of these tiers down into Individual Services this is where they",
    "start": "967040",
    "end": "973240"
  },
  {
    "text": "got uh their pieces wrong on the Bell side they broke all of their services into different",
    "start": "973240",
    "end": "979680"
  },
  {
    "text": "layers and then each in each one of those layers they built out different boxes for each individual service so on",
    "start": "979680",
    "end": "985480"
  },
  {
    "text": "the website they had different microservices for just rendering cont content they had microservices for",
    "start": "985480",
    "end": "991120"
  },
  {
    "text": "authentication on the business logic side they had orders and uh account information things like that and then of",
    "start": "991120",
    "end": "997319"
  },
  {
    "text": "course on the data side they had completely different microservices for all the different data pieces they had so that the business logic was stateless",
    "start": "997319",
    "end": "1003519"
  },
  {
    "text": "the web was stateless and then here's all my data down there now the reason why this picture",
    "start": "1003519",
    "end": "1009199"
  },
  {
    "text": "was completely wrong for them was this did not actually map to any sort of business units or any sort of business",
    "start": "1009199",
    "end": "1015880"
  },
  {
    "text": "uh need on the other side of it if if we showed this picture to it or uh to the",
    "start": "1015880",
    "end": "1021120"
  },
  {
    "text": "actual business side they would like I don't know what usage analytics means there's no there's no corresponding business unit over here they had a uh",
    "start": "1021120",
    "end": "1028640"
  },
  {
    "text": "they had a number of services that were just made up just to further individuals careers because you get more money if",
    "start": "1028640",
    "end": "1035000"
  },
  {
    "text": "you manage more people so let's invent a service so I can have people to manage and then that's how I can further my",
    "start": "1035000",
    "end": "1040280"
  },
  {
    "text": "career there true story so microservices was not just taking",
    "start": "1040280",
    "end": "1049280"
  },
  {
    "text": "their inter system and then putting Docker on it that is exactly the opposite of what they needed to do now",
    "start": "1049280",
    "end": "1055760"
  },
  {
    "text": "looking at a traditional interor application with my UI layer my business logic layer my data access layer in the",
    "start": "1055760",
    "end": "1061039"
  },
  {
    "start": "1056000",
    "end": "1056000"
  },
  {
    "text": "database or the much better DDD style interior where I have domain objects and a repository instead I try to look at",
    "start": "1061039",
    "end": "1068160"
  },
  {
    "text": "the different areas of change and different areas of responsibility so in a normal interior",
    "start": "1068160",
    "end": "1073240"
  },
  {
    "start": "1071000",
    "end": "1071000"
  },
  {
    "text": "application I have different areas of change and these are these are typically categorized by these different big",
    "start": "1073240",
    "end": "1078280"
  },
  {
    "text": "vertical s devices of the application so in the original.com website we had the catalog side we had the configuration",
    "start": "1078280",
    "end": "1085120"
  },
  {
    "text": "side so when I clicked on a individual computer and said okay go ahead and configure this uh carton checkout which",
    "start": "1085120",
    "end": "1090559"
  },
  {
    "text": "is that was the team I was actually on while I worked there and the key thing we have to",
    "start": "1090559",
    "end": "1096480"
  },
  {
    "text": "remind ourselves here is that for each of these different vertical slices in order for them to maintain their",
    "start": "1096480",
    "end": "1102039"
  },
  {
    "text": "autonomy this this boundary has to extend not only down to uh all the",
    "start": "1102039",
    "end": "1107280"
  },
  {
    "text": "different business logic layers but also all the way down to the",
    "start": "1107280",
    "end": "1111919"
  },
  {
    "text": "database so we had to do a little bit of a reset said okay to clearly you try to",
    "start": "1112840",
    "end": "1117919"
  },
  {
    "text": "build a service oriented microservice architecture but you got something completely off so first of all let's",
    "start": "1117919",
    "end": "1124120"
  },
  {
    "text": "just reset what it means to be a service and there's three sources I typically uh typically go to for uh trying to define",
    "start": "1124120",
    "end": "1131480"
  },
  {
    "text": "a service the first is the original service oriented architecture definition of a service and in that definition we",
    "start": "1131480",
    "end": "1138080"
  },
  {
    "start": "1133000",
    "end": "1133000"
  },
  {
    "text": "have a service is software that is owned and built and run by organization it's responsible for holding processing and",
    "start": "1138080",
    "end": "1144600"
  },
  {
    "text": "distributing particular kinds of information within the scope of a system uh can be built deployed and run",
    "start": "1144600",
    "end": "1150320"
  },
  {
    "text": "independently meeting defined operational objectives the independently there being one of the key",
    "start": "1150320",
    "end": "1156240"
  },
  {
    "text": "words it communicates with other consumers presenting information using conventions or contract assurances and",
    "start": "1156240",
    "end": "1162440"
  },
  {
    "text": "then finally or not finally protects itself against unwanted access and its information against lost and finally",
    "start": "1162440",
    "end": "1167679"
  },
  {
    "text": "handles faor conditions so that failure conditions cannot lead to information corruption if you can kind of sum all these different pieces up in one word",
    "start": "1167679",
    "end": "1174919"
  },
  {
    "text": "it's autonomy the services can be run independently of each other they are",
    "start": "1174919",
    "end": "1180760"
  },
  {
    "text": "able to meet certain constraints and they Define the contracts in which people can get information in and out of",
    "start": "1180760",
    "end": "1186039"
  },
  {
    "text": "course the nowhere here actually says a specific technology and that's kind of the point now on the microservice side uh",
    "start": "1186039",
    "end": "1193720"
  },
  {
    "start": "1192000",
    "end": "1192000"
  },
  {
    "text": "from the uh microservices book the definition is a little bit simpler it's a Ser a service is small and focused on",
    "start": "1193720",
    "end": "1200679"
  },
  {
    "text": "doing one thing well and it's autonomous again we have that autonomous word coming back up and they'd like to use",
    "start": "1200679",
    "end": "1206320"
  },
  {
    "text": "the town planning metaphor this is from the microservices book uh by Sam Newman and then the final uh the final",
    "start": "1206320",
    "end": "1213679"
  },
  {
    "text": "definition I like to get to sort of round out what the service means is from the Dainer and design book now the DDD",
    "start": "1213679",
    "end": "1220799"
  },
  {
    "start": "1218000",
    "end": "1218000"
  },
  {
    "text": "book is really long and there's a lot of really uh useful information but it's",
    "start": "1220799",
    "end": "1226360"
  },
  {
    "text": "actually towards the end of the book that no one really gets to so if you're going to read the DD dbook start at the",
    "start": "1226360",
    "end": "1231559"
  },
  {
    "text": "part that talks about bound and context and kind of ignore the rest because all that stuff about entities and Aggregates",
    "start": "1231559",
    "end": "1236679"
  },
  {
    "text": "and stuff like that is really just not that important the bound and context piece are the most important",
    "start": "1236679",
    "end": "1242200"
  },
  {
    "text": "pieces the bound and context idea in domain driven design says uh I have a",
    "start": "1242200",
    "end": "1247440"
  },
  {
    "text": "particular model and uh that model may not make sense in different contexts so",
    "start": "1247440",
    "end": "1253760"
  },
  {
    "text": "abounded context says this is the uh this is the uh boundary in in which uh",
    "start": "1253760",
    "end": "1259600"
  },
  {
    "text": "this particular model can be applied inside that context we have a",
    "start": "1259600",
    "end": "1265159"
  },
  {
    "text": "logically unified model and you can kind of see this in your in the business domain as well if you go to your",
    "start": "1265159",
    "end": "1270640"
  },
  {
    "text": "business and ask any one person what's a customer if you talk to the orders people they'll have one definition of a",
    "start": "1270640",
    "end": "1276360"
  },
  {
    "text": "customer if you talk to the salese they'll have another definition and if you talk to fulfillment they'll have yet",
    "start": "1276360",
    "end": "1281520"
  },
  {
    "text": "another definition of what a customer is so boundary Contex says right we can't all agree on what a customer means so",
    "start": "1281520",
    "end": "1286880"
  },
  {
    "text": "let's define boundaries in which we can reason about what that term means and then have translation points between",
    "start": "1286880",
    "end": "1293799"
  },
  {
    "text": "those different pieces when I say Oh you mean we're talking about a customer oh in terms of an order that means this a",
    "start": "1293799",
    "end": "1299159"
  },
  {
    "text": "customer in terms of sales okay that means",
    "start": "1299159",
    "end": "1303120"
  },
  {
    "text": "that and of course it encapsulates any sort of internal operations so that I'm might leaking those details to the",
    "start": "1304279",
    "end": "1309720"
  },
  {
    "text": "outside world and uh we also Define explicit contracts for external communication so again we have the idea",
    "start": "1309720",
    "end": "1316159"
  },
  {
    "text": "of contracts that comes back in from uh away and they typically use the cell metaphor where a cell has a kind of a",
    "start": "1316159",
    "end": "1322880"
  },
  {
    "text": "completely encapsulated set of operations and has specific receptors in order to be able to communicate to the",
    "start": "1322880",
    "end": "1329320"
  },
  {
    "text": "outside world so we came in and said right we",
    "start": "1329320",
    "end": "1334640"
  },
  {
    "text": "cannot fix this entire mess although you can pay us to do so they didn't have the money for that but we'll fix just one",
    "start": "1334640",
    "end": "1341200"
  },
  {
    "text": "single service to make it say and from here and out we'll be talking about that story of how we fixed at least that one",
    "start": "1341200",
    "end": "1347799"
  },
  {
    "text": "service to make it actually respond to requests in a little less than nine and a half minutes",
    "start": "1347799",
    "end": "1353159"
  },
  {
    "text": "hopefully so this is our search story first let's look at the",
    "start": "1353159",
    "end": "1358400"
  },
  {
    "text": "microservice bell.com search approach this was their design now any external requests coming into",
    "start": "1358400",
    "end": "1365279"
  },
  {
    "text": "the search site would have to go out to a number of different internal services to be able to pull those pieces together",
    "start": "1365279",
    "end": "1371840"
  },
  {
    "text": "and actually present something to the end user I only Drew four boxes in reality there were about 12 and there's four errors here but again in reality",
    "start": "1371840",
    "end": "1378559"
  },
  {
    "text": "were about 200 arrows of things calling everywhere and going all over the",
    "start": "1378559",
    "end": "1384360"
  },
  {
    "text": "place so in this uh in this approach they had arrest API uh times about a thousand or so different API",
    "start": "1384360",
    "end": "1391200"
  },
  {
    "text": "calls and the interesting thing about about here is that the search site itself really didn't do anything it just",
    "start": "1391200",
    "end": "1397760"
  },
  {
    "text": "passed through all the requests to all these external places so if I needed to search something I would go and call the",
    "start": "1397760",
    "end": "1403360"
  },
  {
    "text": "catalog site and say okay right someone's looking for Windows 10 laptops and naturally the catalog site didn't",
    "start": "1403360",
    "end": "1410120"
  },
  {
    "text": "have a search capability so it said right we'll just select the top 10 where name like percent thing and then those",
    "start": "1410120",
    "end": "1416400"
  },
  {
    "text": "are the things we're going to return so around this time if you wanted to go search if you search Windows 10 laptop",
    "start": "1416400",
    "end": "1421840"
  },
  {
    "text": "on their search site the first things that would come up were t-shirts and mugs because those product SKS were",
    "start": "1421840",
    "end": "1427679"
  },
  {
    "text": "alphabetically the first thing in the list not extremely helpful uh in order for to if someone's actually trying to",
    "start": "1427679",
    "end": "1433559"
  },
  {
    "text": "buy some laptops here so we went back to the original picture of their AR architecture and",
    "start": "1433559",
    "end": "1438960"
  },
  {
    "text": "said right so we have this catalog site we've got this config site this card check out what you actually need is this",
    "start": "1438960",
    "end": "1444720"
  },
  {
    "text": "fourth service here for search search is his own individual thing I said but we",
    "start": "1444720",
    "end": "1450120"
  },
  {
    "text": "can't have a search service because one of our key tenants was we cannot duplicate",
    "start": "1450120",
    "end": "1455440"
  },
  {
    "text": "data so how can I build a search service on top of this concept of no duplication",
    "start": "1455440",
    "end": "1460799"
  },
  {
    "text": "of data well you can't because none of those other services have any idea how",
    "start": "1460799",
    "end": "1466600"
  },
  {
    "text": "search is supposed to work so you have to build a specific search service to be able to service those requests",
    "start": "1466600",
    "end": "1472399"
  },
  {
    "text": "appropriately so we went back to the drawing board in terms of their data ownership and said right so you've got this search service",
    "start": "1472399",
    "end": "1480640"
  },
  {
    "start": "1473000",
    "end": "1473000"
  },
  {
    "text": "that needs to have data in a very specific format but it doesn't own the data but it needs to it actually needs",
    "start": "1480640",
    "end": "1487480"
  },
  {
    "text": "to own the shape of the data because the shape of the data is very important about how I need to be able to search",
    "start": "1487480",
    "end": "1493440"
  },
  {
    "text": "it search also needs to own the SLA of the response not just in terms of how",
    "start": "1493440",
    "end": "1499399"
  },
  {
    "text": "quickly responses get returned but also the relevance of the different pieces",
    "start": "1499399",
    "end": "1504840"
  },
  {
    "text": "that are being shown so it needs to own the order in which things are being shown none of the other services know or",
    "start": "1504840",
    "end": "1510240"
  },
  {
    "text": "care about all that relevance information so really needs to be searched to be able to do so however it",
    "start": "1510240",
    "end": "1516799"
  },
  {
    "text": "doesn't own any of the data that actually exists in those other systems so from this we realize you know",
    "start": "1516799",
    "end": "1525080"
  },
  {
    "text": "we can't we can't have a system in which we don't duplicate data and in fact if",
    "start": "1525080",
    "end": "1530320"
  },
  {
    "text": "you look at the real world the real world duplicates data constantly if you look at uh you're just looking at a",
    "start": "1530320",
    "end": "1536039"
  },
  {
    "text": "website that is duplicating some data in the server and showing it in the browser via HTML so immediately I have stale",
    "start": "1536039",
    "end": "1541919"
  },
  {
    "text": "duplicated data yet we're able to function just fine as a uh as a society",
    "start": "1541919",
    "end": "1547159"
  },
  {
    "text": "knowing that I have information shown on my screen that may be a little bit old or duplicated and that's",
    "start": "1547159",
    "end": "1552600"
  },
  {
    "text": "fine so we went back and said okay let's go back to some of the kind of core books that around here and start to",
    "start": "1552600",
    "end": "1559159"
  },
  {
    "text": "build a solution that's building off of some of these Concepts these are my three favorite uh uh books about these",
    "start": "1559159",
    "end": "1564960"
  },
  {
    "text": "different subjects first Enterprise Integration patterns uh which is kind of a lousy name for messaging patterns but",
    "start": "1564960",
    "end": "1570399"
  },
  {
    "text": "it's really about messaging uh the Sam Newman building microservices book so we could say like uh okay don't believe us",
    "start": "1570399",
    "end": "1576520"
  },
  {
    "text": "but here's a book about it and then finally a little bit older book uh that's still relevant in microservices which is SOA patterns by Aron rodm gas I",
    "start": "1576520",
    "end": "1585039"
  },
  {
    "text": "don't know how to pronounce that but that's good enough and what we needed to do was perform service dependency",
    "start": "1585039",
    "end": "1591240"
  },
  {
    "start": "1590000",
    "end": "1590000"
  },
  {
    "text": "inversion and I put that in there just to troll Rob that's just for",
    "start": "1591240",
    "end": "1596360"
  },
  {
    "text": "you so in service dependency inversion in our original picture we have one service depending on a lot of other ones",
    "start": "1596360",
    "end": "1603440"
  },
  {
    "text": "and it's depending on lot a lot of those other ones uh not because uh it's wrong depend on them that's okay that my",
    "start": "1603440",
    "end": "1609679"
  },
  {
    "text": "service can depend on these other ones it is wrong though that my uptime is completely dependent on the up time of all those other services so we could",
    "start": "1609679",
    "end": "1617399"
  },
  {
    "text": "take this picture and say right let's build the resiliency in so if I call catalog and catalog slow or if I call",
    "start": "1617399",
    "end": "1623960"
  },
  {
    "text": "catalog and it's slow three times in a row let's Implement a circuit breaker pattern and then we can have some sort of other cache locally so we could do",
    "start": "1623960",
    "end": "1630039"
  },
  {
    "text": "that we could put caches and circuit breakers in front front of all these different pieces but that doesn't mean they can still service an appropriate",
    "start": "1630039",
    "end": "1636360"
  },
  {
    "text": "search response because they still have to worry about the relevancy of the",
    "start": "1636360",
    "end": "1641559"
  },
  {
    "text": "information so we decided we wanted to flip these individual arrows around so instead of a single request from the",
    "start": "1641559",
    "end": "1647279"
  },
  {
    "text": "outside world calling a multitude Myriad of internal sources we flipped all those arrows so",
    "start": "1647279",
    "end": "1654279"
  },
  {
    "text": "that each of those other box was would be pushing information somehow into our search. uh bell.com website so that when",
    "start": "1654279",
    "end": "1661919"
  },
  {
    "text": "an external request came in I only ever had to go to a local database that was",
    "start": "1661919",
    "end": "1667760"
  },
  {
    "text": "specifically built for the purpose of search and no external service requests needed to",
    "start": "1667760",
    "end": "1674600"
  },
  {
    "text": "happen the biggest thing this did for us will be that remove any sort of temporal coupling that is I don't have to worry",
    "start": "1675080",
    "end": "1681480"
  },
  {
    "text": "about any sort of timing on any of these other external systems if they can give me the information ahead of time I only",
    "start": "1681480",
    "end": "1686960"
  },
  {
    "text": "have to worry about my local database I don't have to worry about any other person's uh uptime or latency or anything like that so we just needed to",
    "start": "1686960",
    "end": "1694360"
  },
  {
    "text": "break all those arrows uh and not piss anyone off that was the other kind of thing we we wanted to make sure we",
    "start": "1694360",
    "end": "1699480"
  },
  {
    "text": "didn't do U there was a lot of people's careers on the line and this kind of architecture so I said okay well you can",
    "start": "1699480",
    "end": "1705519"
  },
  {
    "text": "still do whatever you're doing but we're going to try to make it a better over here by not having a 9 and a half minute",
    "start": "1705519",
    "end": "1711240"
  },
  {
    "text": "latency and if it works then you know maybe other people can do it as well so we went to each service one by",
    "start": "1711240",
    "end": "1718760"
  },
  {
    "text": "one and said okay how can we break that arrow and reverse it to the other",
    "start": "1718760",
    "end": "1724000"
  },
  {
    "text": "direction and the Enterprise Integration patterns book really told us the right way to do",
    "start": "1724000",
    "end": "1729399"
  },
  {
    "text": "so our first service we were looking at was the catalog service now the catalog service is interesting because if you go",
    "start": "1729399",
    "end": "1736200"
  },
  {
    "start": "1730000",
    "end": "1730000"
  },
  {
    "text": "to shop online for some of these laptops you know there's like a just insane number of configuration options available to you you can have different",
    "start": "1736200",
    "end": "1743200"
  },
  {
    "text": "processors different Ram different hard drives different colors uh any virus or not all this all this insane number of",
    "start": "1743200",
    "end": "1749840"
  },
  {
    "text": "options which is all done by uh a couple different Services um in the catalog",
    "start": "1749840",
    "end": "1755760"
  },
  {
    "text": "side though catalog was all about taking those complex configuration and saying right we need to print a catalog for",
    "start": "1755760",
    "end": "1761440"
  },
  {
    "text": "someone so why don't we have some standard configurations we can show people so they can say yes this laptop",
    "start": "1761440",
    "end": "1766679"
  },
  {
    "text": "is $7.99 and that laptop has some standard configuration options you can change but",
    "start": "1766679",
    "end": "1772480"
  },
  {
    "text": "there's always some sort of default configuration so although we had uh a",
    "start": "1772480",
    "end": "1777679"
  },
  {
    "text": "lot of complex configuration behind the scenes there were standard configurations that you could just go and click purchase and those standard",
    "start": "1777679",
    "end": "1783679"
  },
  {
    "text": "configurations are what get showed up on any sort of catalog browse page when I go look at okay what are all the laptops",
    "start": "1783679",
    "end": "1790120"
  },
  {
    "text": "for um education or for home office there's a certain set of standard ones",
    "start": "1790120",
    "end": "1795399"
  },
  {
    "text": "they they typically show there there there's a known quantity of these different standard configurations and",
    "start": "1795399",
    "end": "1801720"
  },
  {
    "text": "our uh in our investigations we found there was roughly about a thousand or so of these well-known ones if I tried to",
    "start": "1801720",
    "end": "1809120"
  },
  {
    "text": "sprider out and cach all the different different configurations possible um it's probably more than the number of",
    "start": "1809120",
    "end": "1814760"
  },
  {
    "text": "atoms in the universe sort of number but if I had the known quantity of these specific top thousand that they just",
    "start": "1814760",
    "end": "1820320"
  },
  {
    "text": "show on the website that's something I can actually work with so conveniently the catalog site",
    "start": "1820320",
    "end": "1827279"
  },
  {
    "text": "still had an old soap web service still up for internal applications so we decided right what we can do is just",
    "start": "1827279",
    "end": "1833919"
  },
  {
    "text": "once a day ping that soap web service get those list of standard configurations and then store those",
    "start": "1833919",
    "end": "1840320"
  },
  {
    "text": "results in our local document database and if we need to change them more than once a day then we'll have",
    "start": "1840320",
    "end": "1848159"
  },
  {
    "text": "some backend application be able like go go ahead and update that one right",
    "start": "1848159",
    "end": "1853360"
  },
  {
    "text": "now so it was a rather easy one for us because they already exposed a service uh exist the next one was a little bit",
    "start": "1853360",
    "end": "1859200"
  },
  {
    "text": "more difficult this was in pricing pricing is one of the services that if we went to the business there",
    "start": "1859200",
    "end": "1864880"
  },
  {
    "start": "1860000",
    "end": "1860000"
  },
  {
    "text": "was no business unit associated with pricing pricing was done typically by sales or if not by sales by a marketing",
    "start": "1864880",
    "end": "1871880"
  },
  {
    "text": "group as well they would work with multiple different organizations underneath the covers but it it still",
    "start": "1871880",
    "end": "1877120"
  },
  {
    "text": "all went down to I need to have some some really standard configurations of of products I need to work with supply",
    "start": "1877120",
    "end": "1882679"
  },
  {
    "text": "chain to understand what's the good price to sell these at what profit margins do we need to hit but if I will",
    "start": "1882679",
    "end": "1888200"
  },
  {
    "text": "in the uh rest of the organization there was nothing there was no organization called pricing it was it was something that was done by different groups that",
    "start": "1888200",
    "end": "1895559"
  },
  {
    "text": "was our first clue that something is wrong with the service because there was no analog to the rest of the uh analog",
    "start": "1895559",
    "end": "1901720"
  },
  {
    "text": "to the in the rest of the business it's always funny to talk to some of the managers there about so how do you get",
    "start": "1901720",
    "end": "1906760"
  },
  {
    "text": "your requirements who are you talking to or they just kind of made them up themselves again that was another red flag if you have a microservice that is",
    "start": "1906760",
    "end": "1913200"
  },
  {
    "text": "really making up its own requirements without any connection to the business it probably doesn't need to exist",
    "start": "1913200",
    "end": "1919279"
  },
  {
    "text": "so pricing you might imagine is pretty complicated it depends on the configuration that you have so as you",
    "start": "1919279",
    "end": "1924679"
  },
  {
    "text": "select different options the pricing changes it depends on the region which is by the way a trick in these websites",
    "start": "1924679",
    "end": "1930200"
  },
  {
    "text": "you could if you go change a region through like VPN and things like that you may get better prices hint",
    "start": "1930200",
    "end": "1935679"
  },
  {
    "text": "hint also if you pick like home office versus uh or business versus home you'll",
    "start": "1935679",
    "end": "1941320"
  },
  {
    "text": "get different prices as well something else to to think about and also dependent on the",
    "start": "1941320",
    "end": "1946559"
  },
  {
    "text": "individual catalog like I said home versus uh business we also found that it was",
    "start": "1946559",
    "end": "1951720"
  },
  {
    "text": "actually served with the catalog information so that previous web service we were hitting to get catalog information we happen to look through",
    "start": "1951720",
    "end": "1957679"
  },
  {
    "text": "the response like oh wait a second there's a price there let's just use that so we severed the connection and",
    "start": "1957679",
    "end": "1964399"
  },
  {
    "text": "never called pricing ever again and pricing said that's great suddenly our our our uh API can",
    "start": "1964399",
    "end": "1971480"
  },
  {
    "text": "respond well we didn't actually tell them we were doing this they just suddenly had much better latency because very few people were calling them",
    "start": "1971480",
    "end": "1977320"
  },
  {
    "text": "actually",
    "start": "1977320",
    "end": "1979840"
  },
  {
    "start": "1983000",
    "end": "1983000"
  },
  {
    "text": "the next one we had to deal with was localization this one was a bit tricky because uh even though the information",
    "start": "1984120",
    "end": "1990600"
  },
  {
    "text": "rarely changed there was a lot of it so localization for us was basically uh not",
    "start": "1990600",
    "end": "1995919"
  },
  {
    "text": "just showing things in the right local and region for people but also all the titles and descriptions and things like",
    "start": "1995919",
    "end": "2001519"
  },
  {
    "text": "that need to be correctly shown to each individual country and region so although that information rarely changed",
    "start": "2001519",
    "end": "2007200"
  },
  {
    "text": "it was pretty large we also saw that it it uh this localization service already served many",
    "start": "2007200",
    "end": "2013679"
  },
  {
    "text": "many internal clients so there were already exist there already some existing sales applications and things",
    "start": "2013679",
    "end": "2019000"
  },
  {
    "text": "like that that had to use that localization information and there's no way that all those different applications could change to use this",
    "start": "2019000",
    "end": "2024880"
  },
  {
    "text": "new web API so we have to look to see what are all those different applications using in order to get this information",
    "start": "2024880",
    "end": "2031320"
  },
  {
    "text": "out well it turns out we could just use an existing integration method that",
    "start": "2031320",
    "end": "2036360"
  },
  {
    "text": "everyone else was already using because they' forced the team to do so in which once a day they would put out a file on",
    "start": "2036360",
    "end": "2042960"
  },
  {
    "text": "a share drive that was just a flat file dump of their database that said here's all the SKS and all the translations of",
    "start": "2042960",
    "end": "2048800"
  },
  {
    "text": "every single product detail information so we said right we'll use that then we'll go get that file once a",
    "start": "2048800",
    "end": "2055440"
  },
  {
    "text": "day and just do a kind of bulk insert and shove that into our document database and call it a",
    "start": "2055440",
    "end": "2062839"
  },
  {
    "text": "day now final one was the most fun one the content One content one was uh was",
    "start": "2064760",
    "end": "2071320"
  },
  {
    "text": "also tough because it changed fairly frequently and those changes actually needed to make it out to production",
    "start": "2071320",
    "end": "2076480"
  },
  {
    "text": "pretty quickly as well so it's important for us that when someone changed something in the existing service we",
    "start": "2076480",
    "end": "2082200"
  },
  {
    "text": "need to have it pretty soon afterwards in our database as well this is what the business already expected so we knew that the the content",
    "start": "2082200",
    "end": "2090720"
  },
  {
    "text": "service really wasn't going to change anything to give us like a feed of information there was no atom feed or",
    "start": "2090720",
    "end": "2096040"
  },
  {
    "text": "something like that for us to subscribe to to say give us this information as it happens but we knew the DBA pretty well",
    "start": "2096040",
    "end": "2103640"
  },
  {
    "text": "and after a bottle whiskey we uh were able to convince him that he could put some triggers inside the database for us",
    "start": "2103640",
    "end": "2110680"
  },
  {
    "text": "so an individual table changed we would get a message generated to feed into our search",
    "start": "2110680",
    "end": "2117400"
  },
  {
    "text": "service that we would then take that message and then update our local document database I don't know if the",
    "start": "2117400",
    "end": "2122760"
  },
  {
    "text": "rest of the team still knows that this happened they're just again the DBA is a pretty good person and we bribed him",
    "start": "2122760",
    "end": "2128880"
  },
  {
    "text": "with some good whiskey so that seems to work well now this kind of looks like a weird",
    "start": "2128880",
    "end": "2134839"
  },
  {
    "text": "uh weird approach and that we have database triggers generating messages that we consume on the other side but",
    "start": "2134839",
    "end": "2140760"
  },
  {
    "text": "for something like this where I didn't want to touch the existing application I didn't want to go put something on their scrum board to have developed six months",
    "start": "2140760",
    "end": "2147560"
  },
  {
    "text": "from now I just want to have something done pretty soon uh this is a fairly good approach so for applications where",
    "start": "2147560",
    "end": "2152640"
  },
  {
    "text": "I have an existing system where I can't really change that well um I'll will resort to whatever means necessary to be",
    "start": "2152640",
    "end": "2157880"
  },
  {
    "text": "able to get that information out so what do this picture look like at",
    "start": "2157880",
    "end": "2163400"
  },
  {
    "text": "the end whenever you did a search from the outside world it only ever hit that one",
    "start": "2163400",
    "end": "2170280"
  },
  {
    "text": "single internal document database and then outside of that on an",
    "start": "2170280",
    "end": "2175359"
  },
  {
    "text": "offline set of processes each of the other services would generate some sort of messages in some format whether it",
    "start": "2175359",
    "end": "2180760"
  },
  {
    "text": "was document messages or whether it's file kind of messages whether it's trigger kind of messages push these into",
    "start": "2180760",
    "end": "2186520"
  },
  {
    "text": "a den normalizer that we take all the information process it and put into our local document database that way any",
    "start": "2186520",
    "end": "2192920"
  },
  {
    "text": "request from the outside again did not have to talk to any of the external services and as long as we didn't change",
    "start": "2192920",
    "end": "2198119"
  },
  {
    "text": "the data significantly those coming in we knew that okay for that data coming in I didn't it even though I didn't own",
    "start": "2198119",
    "end": "2204200"
  },
  {
    "text": "it I could still have a cach of it locally in our document database so we did this put into",
    "start": "2204200",
    "end": "2212119"
  },
  {
    "text": "production uh the search website started behaving normally again it went from a latency of 9 and a half minutes to a",
    "start": "2212119",
    "end": "2219040"
  },
  {
    "text": "more reasonable second or two something like that and everyone lived happily ever after the",
    "start": "2219040",
    "end": "2225760"
  },
  {
    "text": "end well that's not true so now for the not so happy ending of the rest of the story",
    "start": "2225760",
    "end": "2232240"
  },
  {
    "text": "here one of the things i' I found over and over again with service style architectures is that it it you can have",
    "start": "2232240",
    "end": "2240119"
  },
  {
    "text": "success in one individual area but that does not necessarily mean that you can spread that success throughout the rest",
    "start": "2240119",
    "end": "2245359"
  },
  {
    "text": "of the organization so I went back later and talked to some of the teams involved and said okay it's been about a year how",
    "start": "2245359",
    "end": "2252480"
  },
  {
    "text": "are things going now oh it's great we've got all these different Individual Services each of these individual teams",
    "start": "2252480",
    "end": "2260359"
  },
  {
    "text": "that uh have ownership over the application uh they have ownership of the database um they're all collated",
    "start": "2260359",
    "end": "2266160"
  },
  {
    "text": "together uh they heard devops was a good thing so they brought operations into these groups as well um and everything",
    "start": "2266160",
    "end": "2271839"
  },
  {
    "text": "was great they said but the problem was they still had the similar HR structure they used to have",
    "start": "2271839",
    "end": "2277760"
  },
  {
    "text": "before so even though each of these teams was able to build their own application independently they were",
    "start": "2277760",
    "end": "2283640"
  },
  {
    "text": "still run by crap managers because the only way you could get promoted in this",
    "start": "2283640",
    "end": "2288880"
  },
  {
    "text": "company was again to manage more and more people so that meant that the",
    "start": "2288880",
    "end": "2294160"
  },
  {
    "text": "product teams had to keep growing and the products themselves had to keep growing because that fit into the",
    "start": "2294160",
    "end": "2300040"
  },
  {
    "text": "motivations of the individual managers of these different of these different teams and to a fa every single one we",
    "start": "2300040",
    "end": "2306599"
  },
  {
    "text": "talked to said the the work is great man just uh man we just keep adding new people to our team and it just really",
    "start": "2306599",
    "end": "2312800"
  },
  {
    "text": "sucks that everything used to be really small and focused and now it just keeps growing and growing and growing and again that was because of the",
    "start": "2312800",
    "end": "2319359"
  },
  {
    "text": "motivations uh external motivations placed on each of these different",
    "start": "2319359",
    "end": "2324960"
  },
  {
    "text": "managers so there's not a lot of different ways you can fix this uh if you look at applications like this uh",
    "start": "2324960",
    "end": "2331280"
  },
  {
    "text": "you'll typically see them built around uh what's known as Conway's law which you'll see this a lot in microservice",
    "start": "2331280",
    "end": "2338359"
  },
  {
    "text": "discussions K laa said any or organization that designs a system will produce a design who structures a copy",
    "start": "2338359",
    "end": "2345040"
  },
  {
    "text": "of the organization's communication structure and I see this absolutely all the time that the systems we build more",
    "start": "2345040",
    "end": "2352480"
  },
  {
    "text": "or less match the the human systems that exist in the company I don't think",
    "start": "2352480",
    "end": "2357520"
  },
  {
    "text": "that's a bad thing but you have to make sure that the motivations of the teams can allow this to be set up for Success",
    "start": "2357520",
    "end": "2364280"
  },
  {
    "text": "so I have a Corel corollary to this uh law which is a broken dysfunctional",
    "start": "2364280",
    "end": "2370319"
  },
  {
    "text": "organization driven by meeting unhealthy goals and metrics will produce broken and dysfunctional",
    "start": "2370319",
    "end": "2377160"
  },
  {
    "text": "systems this is exactly what we saw with them uh at the at in the Bell example uh",
    "start": "2377160",
    "end": "2383560"
  },
  {
    "text": "even though individual uh developers were all good people because they were put into a broken dysfunctional system",
    "start": "2383560",
    "end": "2390160"
  },
  {
    "text": "with bad goals and metrics then they will optimize the wrong things and build",
    "start": "2390160",
    "end": "2395480"
  },
  {
    "text": "the wrong systems which is very strange for me because when I first worked there about 10 years ago I was on the cart",
    "start": "2395480",
    "end": "2401000"
  },
  {
    "text": "checkout team and our bonus for our team was decided on how many people came",
    "start": "2401000",
    "end": "2407839"
  },
  {
    "text": "into the cart checkout process and completed the entire process so my my bonus wasn't based on",
    "start": "2407839",
    "end": "2415599"
  },
  {
    "text": "uptime or slas or number deployments or lines of code it was strictly business oriented that said the better car",
    "start": "2415599",
    "end": "2422119"
  },
  {
    "text": "checkout process you make the fewer people will stop trying to check out so we did a lot of fun things things with",
    "start": "2422119",
    "end": "2427599"
  },
  {
    "text": "this like turned off all validations because any red you put up in front of a customer will make them stop checking",
    "start": "2427599",
    "end": "2433359"
  },
  {
    "text": "out we used to have something that would check your credit card you know like the The Loon check that checks the digits",
    "start": "2433359",
    "end": "2438960"
  },
  {
    "text": "turn that off as well confuses people you put something in and there's like oh you put the credit card you in is wrong",
    "start": "2438960",
    "end": "2444839"
  },
  {
    "text": "no you're wrong slam the laptop shut go away well if you turn that off they're more likely to go ahead and complete the",
    "start": "2444839",
    "end": "2450880"
  },
  {
    "text": "checkout process the minimum stuff we did for meeting those operational goals of making sure everyone could check out",
    "start": "2450880",
    "end": "2457319"
  },
  {
    "text": "was just did they fill in all the forms did they fill in the first name last name did there did it exist uh do they",
    "start": "2457319",
    "end": "2464839"
  },
  {
    "text": "do they have all the required Fields actually filled out that was it because again our motivation was just to get",
    "start": "2464839",
    "end": "2470560"
  },
  {
    "text": "people through the checkout process now that meant of course that we had to do further processing after we got the",
    "start": "2470560",
    "end": "2476760"
  },
  {
    "text": "information to say o actually that credit card is invalid oh actually that is a date in the past ooh actually",
    "start": "2476760",
    "end": "2483000"
  },
  {
    "text": "that's uh not a valid shipping address but we had all these things offline because again were trying to optimize",
    "start": "2483000",
    "end": "2488040"
  },
  {
    "text": "for getting people through the process so we'd have uh help desk people call",
    "start": "2488040",
    "end": "2493359"
  },
  {
    "text": "people after the door and said o looks like uh you may have mistyped that and they were trained to be able to be nice and things like that so that they could",
    "start": "2493359",
    "end": "2499520"
  },
  {
    "text": "fix all the information and then go on from there so if you have this crappy",
    "start": "2499520",
    "end": "2505200"
  },
  {
    "text": "organization and you want to build systems for it you're going to build crappy systems because Conway's law is",
    "start": "2505200",
    "end": "2510680"
  },
  {
    "text": "the law so what you need to do is perform what's known as the inverse Conway maneuver which is to design the",
    "start": "2510680",
    "end": "2517240"
  },
  {
    "text": "organization you want and then the the rest of the architecture will follow kicking and",
    "start": "2517240",
    "end": "2523559"
  },
  {
    "text": "screaming now this this is daunting right because it says basically in order",
    "start": "2524400",
    "end": "2529560"
  },
  {
    "text": "for you to build good systems you may have to reorganize your company and who else who's done that",
    "start": "2529560",
    "end": "2536240"
  },
  {
    "text": "before you're just a company of One S does that count okay so this uh building building an",
    "start": "2536480",
    "end": "2544040"
  },
  {
    "text": "application architecture like this can sometimes require Buy in to the at the highest level to say you know it's not",
    "start": "2544040",
    "end": "2550480"
  },
  {
    "text": "just our it systems that are that are bad it's our entire structure that's bad we need to organize our company",
    "start": "2550480",
    "end": "2555640"
  },
  {
    "text": "differently we need to organize not just the IT people together we need to have the business people in there we we have",
    "start": "2555640",
    "end": "2560800"
  },
  {
    "text": "to have the operations people together and have those different groups aligned towards specific business goals we need",
    "start": "2560800",
    "end": "2566079"
  },
  {
    "text": "to make sure those business goals are not harmful and can cause bad things like building big teams because that's",
    "start": "2566079",
    "end": "2572040"
  },
  {
    "text": "the only way you can get ahead in in the company and it's only if that organization is healthy can you build",
    "start": "2572040",
    "end": "2577960"
  },
  {
    "text": "good systems based on those organizational",
    "start": "2577960",
    "end": "2581640"
  },
  {
    "text": "structures so that was my story of avoiding microservice Mega disasters I",
    "start": "2583280",
    "end": "2589119"
  },
  {
    "start": "2585000",
    "end": "2585000"
  },
  {
    "text": "thank you for coming here and I hope you enjoy the rest of the uh rest of the conference and if you have any questions",
    "start": "2589119",
    "end": "2595480"
  },
  {
    "text": "I'll be happy to take",
    "start": "2595480",
    "end": "2598200"
  },
  {
    "text": "them any questions yes",
    "start": "2603839",
    "end": "2609119"
  },
  {
    "text": "so the question was what do I need to do if my service actually needs to make calls to multiple things we had we had one Golden Rule that says I can only",
    "start": "2614119",
    "end": "2620000"
  },
  {
    "text": "make one hop I can make one hop from one service to another but that service can't call anyone",
    "start": "2620000",
    "end": "2625160"
  },
  {
    "text": "else so if I have that case where I have to make multiple hops either I've drawn my boundaries wrong my service is not a",
    "start": "2625160",
    "end": "2631839"
  },
  {
    "text": "a correct service because I have too many dependencies amongst other things or I need to invert those dependen and",
    "start": "2631839",
    "end": "2637640"
  },
  {
    "text": "start pushing that information to myself so that I can have it locally and not have to call those other",
    "start": "2637640",
    "end": "2645200"
  },
  {
    "text": "people question how did I convince people that",
    "start": "2646880",
    "end": "2653960"
  },
  {
    "text": "duplication of data is good well one way to go about that is to recognize that we",
    "start": "2653960",
    "end": "2659760"
  },
  {
    "text": "live in a world of data duplication and in fact their original business was built on data duplication because it",
    "start": "2659760",
    "end": "2666480"
  },
  {
    "text": "used to be a order catalog business and that's millions of copies of the exact same duplicated data they've pushed out",
    "start": "2666480",
    "end": "2672680"
  },
  {
    "text": "to hundreds of or millions of homes all over the world so they've already duplicated data and built a business",
    "start": "2672680",
    "end": "2679280"
  },
  {
    "text": "around it so why is it any different now so that was it like you've already",
    "start": "2679280",
    "end": "2685040"
  },
  {
    "text": "your business is already built around this it's not like when you duplicate the data they said well someone can",
    "start": "2685040",
    "end": "2690359"
  },
  {
    "text": "change it it's like right so when someone calls in saying they want to buy a computer and they said yeah the price isn't $7.99 it's $3.99 that's what it",
    "start": "2690359",
    "end": "2696680"
  },
  {
    "text": "says I'm my catalog because they crossed it out and wrote something else like no you say no that's it's",
    "start": "2696680",
    "end": "2703559"
  },
  {
    "text": "$7.99 so you can duplicate it just fine as long as you don't change",
    "start": "2703559",
    "end": "2709040"
  },
  {
    "text": "it also the 9 and a half minute latency is like yeah you tried it it didn't work",
    "start": "2710079",
    "end": "2715280"
  },
  {
    "text": "so let's try something that actually works that helps too any other",
    "start": "2715280",
    "end": "2721680"
  },
  {
    "text": "questions all right thanks I'll be hanging out afterwards uh have a great rest of the conference",
    "start": "2721680",
    "end": "2728079"
  }
]