[
  {
    "start": "0",
    "end": "47000"
  },
  {
    "text": "all right excellent thank you so uh welcome to this session about devops with azure kubernetes",
    "start": "6319",
    "end": "12960"
  },
  {
    "text": "service here at nbc london i hope you had a great conference so far",
    "start": "12960",
    "end": "18960"
  },
  {
    "text": "my name is jokopian and i'm a microsoft azure mvp working at",
    "start": "18960",
    "end": "26000"
  },
  {
    "text": "the active solution based here in snowy stockholm sweden and we work a lot with",
    "start": "26000",
    "end": "32960"
  },
  {
    "text": "mainly applications based on azure and we see a growing interest in kubernetes",
    "start": "32960",
    "end": "39360"
  },
  {
    "text": "specifically around azure communities services the last couple of years so i want to share some experiences",
    "start": "39360",
    "end": "46079"
  },
  {
    "text": "around the kind of devops related topics around kubernetes so the topic about this session is really",
    "start": "46079",
    "end": "52879"
  },
  {
    "text": "so you created a kubernetes cluster you deployed your first applications there perhaps uh now what",
    "start": "52879",
    "end": "59359"
  },
  {
    "text": "you know what are the things that you need to think about and solve uh that's not strictly related to your",
    "start": "59359",
    "end": "64799"
  },
  {
    "text": "application in itself more related to the cluster to the health and the devops practices so to speak",
    "start": "64799",
    "end": "72720"
  },
  {
    "text": "so i want to talk to you about a little bit about the infrastructure's code how you can provision not just your",
    "start": "72720",
    "end": "78479"
  },
  {
    "text": "application but also the cluster itself using infrastructure as code and related",
    "start": "78479",
    "end": "84159"
  },
  {
    "text": "to that automated deployments again not just for the applications but also for the",
    "start": "84159",
    "end": "89680"
  },
  {
    "text": "cluster to make sure that we have a consistent set of cluster infrastructure that you can",
    "start": "89680",
    "end": "95439"
  },
  {
    "text": "deploy in a safe and repeatable way",
    "start": "95439",
    "end": "100799"
  },
  {
    "text": "getting feedback back from the cluster back from the application about the health performance and so on is of course super",
    "start": "100799",
    "end": "107439"
  },
  {
    "text": "important so i'm going to talk a bit about how you can you know deal with this in",
    "start": "107439",
    "end": "112479"
  },
  {
    "text": "azure using azure monitor and how ats integrates with that and then we have",
    "start": "112479",
    "end": "118399"
  },
  {
    "text": "the topics of availability and scalability so you know making sure the application actually",
    "start": "118399",
    "end": "124159"
  },
  {
    "text": "stays alive stays respondent even though maybe your applications are",
    "start": "124159",
    "end": "129520"
  },
  {
    "text": "being uh you know getting a high load or perhaps you get some could be a problem with",
    "start": "129520",
    "end": "135120"
  },
  {
    "text": "you know one of the data centers in asher so you want to make sure that you can fail over for example to another",
    "start": "135120",
    "end": "140239"
  },
  {
    "text": "data center to another region perhaps and still be respondent",
    "start": "140239",
    "end": "145360"
  },
  {
    "text": "and available to your end users so just a quick word about azure",
    "start": "145360",
    "end": "150800"
  },
  {
    "text": "kubernetes service this is the managed service in azure for kubernetes where microsoft",
    "start": "150800",
    "end": "156160"
  },
  {
    "text": "or you know azure handles uh all the things related to to the control plane so that is that the master nodes you",
    "start": "156160",
    "end": "162560"
  },
  {
    "text": "don't really see them you can't access them you don't pay for them you only pay for the for the nodes so",
    "start": "162560",
    "end": "168239"
  },
  {
    "text": "these are the virtual machines that will be running your applications and uh aks",
    "start": "168239",
    "end": "174160"
  },
  {
    "text": "handles things like upgrades patching on the nodes uh autoscaling and those kind of things uh",
    "start": "174160",
    "end": "180239"
  },
  {
    "text": "so this is a huge benefit of course uh compared to running kubernetes on-premise where you have to deal with",
    "start": "180239",
    "end": "186080"
  },
  {
    "text": "things yourself and you know kubernetes can be run",
    "start": "186080",
    "end": "191360"
  },
  {
    "text": "in you know everywhere both on-premise and i think all the cloud providers have their offering so some things are of",
    "start": "191360",
    "end": "198319"
  },
  {
    "text": "course specific to azure if you run it in aks so first up the virtual machines you're",
    "start": "198319",
    "end": "204959"
  },
  {
    "text": "your nodes they when you deploy a cluster in azure they will be part of a virtual machine scale set",
    "start": "204959",
    "end": "210879"
  },
  {
    "text": "so this is what allows aks in your cluster up and down based on how you configure",
    "start": "210879",
    "end": "216319"
  },
  {
    "text": "the auto scaling when you want to expose your application uh in kubernetes you create",
    "start": "216319",
    "end": "223040"
  },
  {
    "text": "what's called a service and you can configure that service to be a type of load balancer",
    "start": "223040",
    "end": "228560"
  },
  {
    "text": "when you do this in aks that will automatically configure the azure load balancer",
    "start": "228560",
    "end": "234560"
  },
  {
    "text": "to to route the traffic from the outside of the cluster into that cluster to the correct ip and",
    "start": "234560",
    "end": "240319"
  },
  {
    "text": "so on so that's something something that is handled automatically for you",
    "start": "240319",
    "end": "245840"
  },
  {
    "text": "with kubernetes you also very often use something that's called an ingress which is for for more powerful http",
    "start": "245840",
    "end": "252799"
  },
  {
    "text": "based routing to route traffic based on url paths and so on and if you",
    "start": "252799",
    "end": "259840"
  },
  {
    "text": "do this in aks you can have that also automatically configuring after dns records for you",
    "start": "259840",
    "end": "266960"
  },
  {
    "text": "so you can you can access various parts of your system based on dns records so this can also be handled automatically",
    "start": "266960",
    "end": "272639"
  },
  {
    "text": "for you uh in terms of uh authentication identity every time you create a cluster you need",
    "start": "272639",
    "end": "279120"
  },
  {
    "text": "to provide this it with an identity so this can either be a service principle or better yet",
    "start": "279120",
    "end": "285680"
  },
  {
    "text": "a managed identity which is a fairly recent addition to aks so either way you you define an",
    "start": "285680",
    "end": "293280"
  },
  {
    "text": "identity for this cluster and that is important when you need to access other resources",
    "start": "293280",
    "end": "298880"
  },
  {
    "text": "other services in azure a very common example is that you need to pull your docker images from a",
    "start": "298880",
    "end": "304000"
  },
  {
    "text": "container registry in this case the azure container registry and when you do that you need to make sure that the cluster",
    "start": "304000",
    "end": "310000"
  },
  {
    "text": "has the necessary permissions to do so so you will give that to the identity or the service principle or the cluster",
    "start": "310000",
    "end": "318080"
  },
  {
    "text": "aks also supports kubernetes rule based access control and this then integrates with the azure",
    "start": "318080",
    "end": "324160"
  },
  {
    "text": "active directory meaning that you can when you need to provide access to the cluster uh you can do that based on the users",
    "start": "324160",
    "end": "330560"
  },
  {
    "text": "and group in azure active directory and still use the standard role-based uh access controlling kubernetes to do so",
    "start": "330560",
    "end": "337440"
  },
  {
    "text": "you can map that to typically to groups then to so you can give for example cluster",
    "start": "337440",
    "end": "342479"
  },
  {
    "text": "admins uh the necessary permissions to administrate the clusters and so on when you need some kind of",
    "start": "342479",
    "end": "349520"
  },
  {
    "text": "external storage for your containers in kubernetes this is called a persistent volume",
    "start": "349520",
    "end": "355360"
  },
  {
    "text": "and when you do this in azure uh you can map this to either an azure file that's a storage account or to an",
    "start": "355360",
    "end": "362880"
  },
  {
    "text": "azure disk so a disk attached to your virtual machines um so so this is configurable how you",
    "start": "362880",
    "end": "369440"
  },
  {
    "text": "want to persist that storage and finally azure monitor as i mentioned before uh",
    "start": "369440",
    "end": "375280"
  },
  {
    "text": "this is a service in azure that basically all resources integrates with and so does aks",
    "start": "375280",
    "end": "380800"
  },
  {
    "text": "um so everything that you run either your applications and also the nodes",
    "start": "380800",
    "end": "387199"
  },
  {
    "text": "everything related to cluster will send data to azure monitor if you tell it to do so",
    "start": "387199",
    "end": "392720"
  },
  {
    "text": "and that will give you a lot of insight into the health and the state of your applications and the cluster so let's talk a little",
    "start": "392720",
    "end": "400560"
  },
  {
    "start": "400000",
    "end": "569000"
  },
  {
    "text": "bit about infrastructure as codon so you know this means that",
    "start": "400560",
    "end": "405759"
  },
  {
    "text": "instead of just creating a cluster manually through the portal for example and you know switch with some settings there",
    "start": "405759",
    "end": "413360"
  },
  {
    "text": "you define the cluster in in source code and you have a various options here how",
    "start": "413360",
    "end": "419280"
  },
  {
    "text": "you do this but the important thing that this is called you check that into source control either together with your application or",
    "start": "419280",
    "end": "425840"
  },
  {
    "text": "maybe as you know in a separate infrastructure repository and by doing this",
    "start": "425840",
    "end": "431599"
  },
  {
    "text": "you will get a consistent infrastructure it's very common to actually deploy not just one cluster with multiple clusters",
    "start": "431599",
    "end": "438319"
  },
  {
    "text": "it could be clusters for various environments so that's just prod or you can have",
    "start": "438319",
    "end": "444479"
  },
  {
    "text": "multiple clusters where you dedicate a cluster to a particular application for example",
    "start": "444479",
    "end": "450000"
  },
  {
    "text": "so either way you want to make sure that these clusters actually are consistent and the only really way to do this is to actually",
    "start": "450000",
    "end": "455280"
  },
  {
    "text": "position it using code there so of course this will now also give you repeatable deployments you can deploy",
    "start": "455280",
    "end": "461360"
  },
  {
    "text": "this over and over again making sure that you have the correct state and also making sure that you don't get configuration drifts",
    "start": "461360",
    "end": "467919"
  },
  {
    "text": "whereby someone actually modifies some cluster on the fly somewhere um that is not a",
    "start": "467919",
    "end": "474400"
  },
  {
    "text": "good thing to do and you shouldn't really give the permission to do so everything should go through a deployment pipeline and this also",
    "start": "474400",
    "end": "482240"
  },
  {
    "text": "allows you to spin up clusters on demand which is actually quite common thing to do a common example is",
    "start": "482240",
    "end": "489199"
  },
  {
    "text": "to if you're working with pull requests you know you will create a separate branch or you develop some new functionality",
    "start": "489199",
    "end": "496479"
  },
  {
    "text": "and then you have a pipeline uh creating a cluster for that particular pull request branch uh deploying the application into the",
    "start": "496479",
    "end": "503360"
  },
  {
    "text": "cluster doing some automated testing perhaps or rather some other kinds of testing",
    "start": "503360",
    "end": "508960"
  },
  {
    "text": "and then when you're done you can you know just remove the cluster and delete it uh so this is actually a very efficient",
    "start": "508960",
    "end": "515518"
  },
  {
    "text": "way to to work with the uh work with kubernetes and actually",
    "start": "515519",
    "end": "520640"
  },
  {
    "text": "allows you to do this pretty fast as well and of course it will save you some costs by not having",
    "start": "520640",
    "end": "525839"
  },
  {
    "text": "clusters run all the time unless you actually need it so you have multiple options here to how",
    "start": "525839",
    "end": "532000"
  },
  {
    "text": "you want to implement this arm templates is of course a native option in azure",
    "start": "532000",
    "end": "537600"
  },
  {
    "text": "actual resource manager templates and this is what i'm going to show you but there are also other options and i",
    "start": "537600",
    "end": "543360"
  },
  {
    "text": "highly recommend you to look into both the terraform and pollute me as two other options for doing uh",
    "start": "543360",
    "end": "550640"
  },
  {
    "text": "you know infrastructures code not just for azure that these are cross-cloud",
    "start": "550640",
    "end": "557120"
  },
  {
    "text": "supported you can also use the azure cli in fact to implement this",
    "start": "557120",
    "end": "563440"
  },
  {
    "text": "so so multiple options you need to kind of decide for yourself which options is best for you now",
    "start": "563440",
    "end": "570720"
  },
  {
    "text": "when we talk about deploying uh the infrastructure in aks we're not just talking about the cluster",
    "start": "570720",
    "end": "577040"
  },
  {
    "text": "because you can see kubernetes as a platform where on where you then would deploy your different applications from",
    "start": "577040",
    "end": "582959"
  },
  {
    "text": "different teams and typically that requires more than just creating a variable cluster so",
    "start": "582959",
    "end": "589680"
  },
  {
    "text": "first up uh every cluster needs to run in a virtual network so typically you will make sure that you",
    "start": "589680",
    "end": "596240"
  },
  {
    "text": "have a virtual network setup before you create the cluster and configure it properly",
    "start": "596240",
    "end": "601680"
  },
  {
    "text": "next up you deploy the cluster itself and once that is done some more things",
    "start": "601680",
    "end": "606959"
  },
  {
    "text": "that you typically want to do as part of the infrastructure pipeline is you create namespaces so you know",
    "start": "606959",
    "end": "612320"
  },
  {
    "text": "namespaces in kubernetes this is how you can divide the cluster into multiple parts",
    "start": "612320",
    "end": "617360"
  },
  {
    "text": "for example divide it up to you could potentially have a test namespace in the same cluster or",
    "start": "617360",
    "end": "623920"
  },
  {
    "text": "you can have separate namespaces for multiple applications if you have multiple applications running in the same cluster",
    "start": "623920",
    "end": "630320"
  },
  {
    "text": "you can divide it up or you should divide them up using name spaces so consider this as part of the",
    "start": "630320",
    "end": "635680"
  },
  {
    "text": "infrastructure and create them at the same time that you create the cluster",
    "start": "635680",
    "end": "640959"
  },
  {
    "text": "next up you typically want to have some kind of ingest controller and related to that the certificate",
    "start": "640959",
    "end": "646480"
  },
  {
    "text": "manager so this is for you know handling http traffic or https traffic going from",
    "start": "646480",
    "end": "652000"
  },
  {
    "text": "the outside in into your cluster so again this is often considered as part of the",
    "start": "652000",
    "end": "657920"
  },
  {
    "text": "underlying infrastructure and not really part of the application that you deploy later on so instead",
    "start": "657920",
    "end": "664000"
  },
  {
    "text": "you want to make sure that you when you're creating your cluster you already have this set up so the application can just deploy and",
    "start": "664000",
    "end": "669839"
  },
  {
    "text": "then use these these resources also you want to set up the necessary permissions",
    "start": "669839",
    "end": "675920"
  },
  {
    "text": "so you know you create service accounts and fibonitus you create necessary azure ad groups and",
    "start": "675920",
    "end": "681680"
  },
  {
    "text": "the rows and role bindings including this so that is in place so",
    "start": "681680",
    "end": "687279"
  },
  {
    "text": "you know for each team you you need to set up permissions for them to actually be able",
    "start": "687279",
    "end": "692320"
  },
  {
    "text": "to deploy their applications using some kind of the public pipeline and also if they need access to the",
    "start": "692320",
    "end": "698320"
  },
  {
    "text": "cluster you should provision that's this as part of the infrastructure pipeline",
    "start": "698320",
    "end": "704720"
  },
  {
    "start": "705000",
    "end": "814000"
  },
  {
    "text": "so let's talk about automated deployment then um so let's say that you have two",
    "start": "705600",
    "end": "712639"
  },
  {
    "text": "clusters first you have a dev test cluster where you have separated them into two different name spaces",
    "start": "712639",
    "end": "718320"
  },
  {
    "text": "and then you have a separate production cluster which might be typically running more nodes uh maybe more powerful nodes and so on",
    "start": "718320",
    "end": "726160"
  },
  {
    "text": "uh then if we're looking at a typical deployment pipeline for your applications",
    "start": "726160",
    "end": "731279"
  },
  {
    "text": "you would have some kind of build first which will then produce the necessary container images and you will push them",
    "start": "731279",
    "end": "738639"
  },
  {
    "text": "off into the azure container registry you can actually you can select which bridges you want to use here uh and then",
    "start": "738639",
    "end": "745200"
  },
  {
    "text": "you have a you know a staged deployment pipeline here where you first deploy uh the new version into the",
    "start": "745200",
    "end": "752160"
  },
  {
    "text": "dev namespace run some testing might go into the test namespace and so on and finally you will deploy into",
    "start": "752160",
    "end": "758800"
  },
  {
    "text": "production so so this this is part of the application pipeline",
    "start": "758800",
    "end": "764079"
  },
  {
    "text": "but again you should have a pipeline also for the infrastructure",
    "start": "764079",
    "end": "769120"
  },
  {
    "text": "which actually creates the clusters to start with as i talked about and doing all the steps that i just mentioned here",
    "start": "769120",
    "end": "775600"
  },
  {
    "text": "now if you have clusters dedicated to a single application you might consider this to be the same pipeline",
    "start": "775600",
    "end": "782079"
  },
  {
    "text": "you can actually combine these two into into the same pipeline so at the same time when you deploy a new application you will also make sure that",
    "start": "782079",
    "end": "789120"
  },
  {
    "text": "the cluster is is up to date uh otherwise it's quite common to kind of consider the cluster to be part of",
    "start": "789120",
    "end": "795519"
  },
  {
    "text": "the infrastructure this is located in an infrastructure repository and you have a separate pipeline there",
    "start": "795519",
    "end": "800720"
  },
  {
    "text": "it might be a separate team that actually owns that repository and any changes going out to the cluster",
    "start": "800720",
    "end": "806240"
  },
  {
    "text": "is done through that pipeline to make sure that they are up to date and consistent and so on",
    "start": "806240",
    "end": "814320"
  },
  {
    "start": "814000",
    "end": "952000"
  },
  {
    "text": "so talking about application pipelines i'm going to use azure pipelines for this this session to show you how",
    "start": "814320",
    "end": "820480"
  },
  {
    "text": "you can set this up and of course you can do you can use any kind of ci cd automation tool here but",
    "start": "820480",
    "end": "826800"
  },
  {
    "text": "there are some some things uh specifically for kubernetes electric pipelines i want to show you so when you do set up",
    "start": "826800",
    "end": "833839"
  },
  {
    "text": "a pipeline in azure pipelines they are typically consist of a set of",
    "start": "833839",
    "end": "839600"
  },
  {
    "text": "stages so each stage typically correspond to an environment so you could have that test",
    "start": "839600",
    "end": "844959"
  },
  {
    "text": "group for example and each stage then running multiple jobs you know one or more jobs",
    "start": "844959",
    "end": "850880"
  },
  {
    "text": "on some agent somewhere and so if you want to have this pipeline",
    "start": "850880",
    "end": "855920"
  },
  {
    "text": "deploy into a cluster into a specific namespace then in your cluster uh what you do in actual pipelines is",
    "start": "855920",
    "end": "862000"
  },
  {
    "text": "that you create uh something called an environment here so the environment really encapsulates",
    "start": "862000",
    "end": "867120"
  },
  {
    "text": "a namespace in kubernetes in a specific cluster and it contains them a service",
    "start": "867120",
    "end": "872880"
  },
  {
    "text": "connection which really is the necessary credentials to be able to deploy into that namespace",
    "start": "872880",
    "end": "879199"
  },
  {
    "text": "and this environment concept also gives you great visibility into that cluster and i will show you how that looks in",
    "start": "879199",
    "end": "885120"
  },
  {
    "text": "azure pipelines so it lets for example the developers through azure pipelines actually take a look",
    "start": "885120",
    "end": "890880"
  },
  {
    "text": "inside your cluster to see for example troubleshooting deployments and so on that's a great addition also something",
    "start": "890880",
    "end": "898480"
  },
  {
    "text": "that it provides is a functionality related to pull requests as i mentioned before that",
    "start": "898480",
    "end": "904639"
  },
  {
    "text": "it's very common to for every pull request to actually create a separate deployment to test",
    "start": "904639",
    "end": "910399"
  },
  {
    "text": "this pull request not just doing code review but actually deploying little request brush",
    "start": "910399",
    "end": "915680"
  },
  {
    "text": "and perhaps running automated tests and so on so there is a specific functionality",
    "start": "915680",
    "end": "920800"
  },
  {
    "text": "here in azure pipelines related to kubernetes that we can use that",
    "start": "920800",
    "end": "926240"
  },
  {
    "text": "in the case if this is the code request deployment it will automatically create a new environment and a new namespace",
    "start": "926240",
    "end": "934000"
  },
  {
    "text": "and then we can deploy into that environment so this can then be set up automatically which is a",
    "start": "934000",
    "end": "939360"
  },
  {
    "text": "very powerful flow then we also create a new pull request administrator we will have a new namespace uh within with that",
    "start": "939360",
    "end": "946160"
  },
  {
    "text": "particular version running in the cluster and we can access it and wrap tests against it so i want to show you a",
    "start": "946160",
    "end": "953759"
  },
  {
    "start": "952000",
    "end": "1205000"
  },
  {
    "text": "little bit of demos around this to start with so let's start with the",
    "start": "953759",
    "end": "959600"
  },
  {
    "text": "infrastructure as code and uh so for this demo let's",
    "start": "959600",
    "end": "964959"
  },
  {
    "text": "smoke literature i have a i have a sample application",
    "start": "964959",
    "end": "970000"
  },
  {
    "text": "called the quiz box or qbox with a simple quiz application and i have two repositories here it's",
    "start": "970000",
    "end": "975680"
  },
  {
    "text": "the q box that's the action application and then i have a separate uh repository for the environment so",
    "start": "975680",
    "end": "982399"
  },
  {
    "text": "this is where i store my my arm templates and so on so let's take a look at a few of these",
    "start": "982399",
    "end": "987920"
  },
  {
    "text": "arm templates and and all this code will be available uh on on github after the session so you",
    "start": "987920",
    "end": "993360"
  },
  {
    "text": "can take a look there for so first up let's take a look at the the network this is the first part",
    "start": "993360",
    "end": "999759"
  },
  {
    "text": "as i mentioned before that we need to create and uh so i just want to point out a few",
    "start": "999759",
    "end": "1006240"
  },
  {
    "text": "things on this one this is using the virtual network uh type here and uh you know when you",
    "start": "1006240",
    "end": "1012959"
  },
  {
    "text": "create a network you need to make sure that it has the the correct the ip address prefix so",
    "start": "1012959",
    "end": "1018160"
  },
  {
    "text": "that you have you know enough i addresses for your cluster and for the posts running in that cluster",
    "start": "1018160",
    "end": "1024400"
  },
  {
    "text": "i also create uh two different subnets and this is a subnet then the first one",
    "start": "1024400",
    "end": "1030079"
  },
  {
    "text": "that's the one that we're going to deploy the cluster into so i want to make sure that that's uh that's available on the stockton",
    "start": "1030079",
    "end": "1037600"
  },
  {
    "text": "so that's the network but then the more interesting part perhaps is the cluster itself so this is a separate uh arm template so",
    "start": "1037600",
    "end": "1044880"
  },
  {
    "text": "this is actually two different arm templates that i do and uh might be easy to look in little",
    "start": "1044880",
    "end": "1050720"
  },
  {
    "text": "the temp outline here so let's take a look at the cluster here so",
    "start": "1050720",
    "end": "1055919"
  },
  {
    "text": "this is then using the managed cluster type and let's just point out a few",
    "start": "1055919",
    "end": "1062480"
  },
  {
    "text": "a few interesting things here first up your your application will run in on the",
    "start": "1062480",
    "end": "1068080"
  },
  {
    "text": "nodes and this is actually in what's called a node pool so down here we have the the profile for",
    "start": "1068080",
    "end": "1075280"
  },
  {
    "text": "that node pulse this specifies uh what your nose should look like when you create the virtual",
    "start": "1075280",
    "end": "1081120"
  },
  {
    "text": "underlying virtual machines here so here you specify first up you know how many how many",
    "start": "1081120",
    "end": "1086400"
  },
  {
    "text": "virtual machines do i need to talk with uh what size should i be using so you know the number of cores and",
    "start": "1086400",
    "end": "1092240"
  },
  {
    "text": "memory and so on what type of operating system should it be uh specify",
    "start": "1092240",
    "end": "1097360"
  },
  {
    "text": "the subnet id so this is the subnet that i just showed you before so we're going to deploy into that",
    "start": "1097360",
    "end": "1103280"
  },
  {
    "text": "subnet and then we have a lot of more options here so i'll come back to later on things like auto scaling",
    "start": "1103280",
    "end": "1109360"
  },
  {
    "text": "availability zones and so on also important now that when you create",
    "start": "1109360",
    "end": "1114799"
  },
  {
    "text": "a cluster talk about identity so in this case i am using a managed identity",
    "start": "1114799",
    "end": "1121600"
  },
  {
    "text": "so and this is done with this i'm just specifying that the identity is used to design so now azure will",
    "start": "1121600",
    "end": "1128720"
  },
  {
    "text": "create a managed entity for me and this will now be the identity of the cluster so then i need to give that identity",
    "start": "1128720",
    "end": "1137280"
  },
  {
    "text": "the necessary permissions to do a few things so i have three different role",
    "start": "1137280",
    "end": "1142559"
  },
  {
    "text": "assignments down here the first one is i want to make sure that this cluster",
    "start": "1142559",
    "end": "1147600"
  },
  {
    "text": "has the permissions to send data to azure monitor this is a specific role here the",
    "start": "1147600",
    "end": "1154000"
  },
  {
    "text": "monitoring metrics publisher that's the first one i also need to give permissions into that",
    "start": "1154000",
    "end": "1160160"
  },
  {
    "text": "the subnet that i just created to have it it needs permission to you know",
    "start": "1160160",
    "end": "1165679"
  },
  {
    "text": "create new nodes dynamically and assign it to that subnet so it needs to have the permission as well and finally",
    "start": "1165679",
    "end": "1174720"
  },
  {
    "text": "i need to give it the permission to pull images from the container registry",
    "start": "1174720",
    "end": "1181120"
  },
  {
    "text": "so in this case i'm giving it the role assignments uh as part of the container registry namespace",
    "start": "1181120",
    "end": "1186480"
  },
  {
    "text": "and i'm giving it the role uh acr cool azure container relative tool",
    "start": "1186480",
    "end": "1191760"
  },
  {
    "text": "so this is actually what then allows the cluster to pull images the images that i'm building",
    "start": "1191760",
    "end": "1197760"
  },
  {
    "text": "and publishing to that registry and you know you know to run the",
    "start": "1197760",
    "end": "1203039"
  },
  {
    "text": "application so these are the arm templates let's take a look at the pipeline",
    "start": "1203039",
    "end": "1210559"
  },
  {
    "start": "1205000",
    "end": "1376000"
  },
  {
    "text": "for actually running these things so i again i have two different pipelines one for the environment and one for their",
    "start": "1210640",
    "end": "1216799"
  },
  {
    "text": "actual application so let's take a look at the environment pipeline first",
    "start": "1216799",
    "end": "1222720"
  },
  {
    "text": "and let's start just looking at the latest pipeline here so you can see here that i'm having a",
    "start": "1222720",
    "end": "1230320"
  },
  {
    "text": "staged deployment here where the first one is deploying you know either creating or updating the",
    "start": "1230320",
    "end": "1237120"
  },
  {
    "text": "dev test cluster and after this uh i have two more stages where i deploy uh one cluster in",
    "start": "1237120",
    "end": "1245200"
  },
  {
    "text": "europe and another cluster in u.s so this is my production environment which is running in",
    "start": "1245200",
    "end": "1250720"
  },
  {
    "text": "in two regions but the dev test cluster is just one cluster that i can use for",
    "start": "1250720",
    "end": "1258640"
  },
  {
    "text": "you know for multiple teams uh let's take a look at the the pipeline",
    "start": "1258640",
    "end": "1265440"
  },
  {
    "text": "it looks underneath so this is a yamaha pipeline which is",
    "start": "1265440",
    "end": "1270880"
  },
  {
    "text": "what we use nowadays in azure national pipelines and here you can just you know you can see the stages here",
    "start": "1270880",
    "end": "1276320"
  },
  {
    "text": "i can collapse a little bit so you can see it so this is just my stages and if we look",
    "start": "1276320",
    "end": "1282799"
  },
  {
    "text": "inside here we can actually see that i'm using a job template here and the reason for this is that i i want",
    "start": "1282799",
    "end": "1290000"
  },
  {
    "text": "to make sure that i'm deploying in this case the cluster in exactly the same way in all environments here i",
    "start": "1290000",
    "end": "1295600"
  },
  {
    "text": "don't want to have specific things going on in a specific environment and then template of course is a great",
    "start": "1295600",
    "end": "1302480"
  },
  {
    "text": "thing to do so i don't have to repeat it and i can make sure it's the same same set of steps so this is a separate",
    "start": "1302480",
    "end": "1309760"
  },
  {
    "text": "file and i'm just going to show you what this looks like so it's a lot of details here i was going to go through this in details but",
    "start": "1309760",
    "end": "1315840"
  },
  {
    "text": "here you can see that i'm doing all the things that i talked about before on the slide so i'm first up i'm",
    "start": "1315840",
    "end": "1322559"
  },
  {
    "text": "creating uh the azure active directory groups i'm creating one called cluster reader and another one called cluster admins",
    "start": "1322559",
    "end": "1329120"
  },
  {
    "text": "so i can make sure that those actually exist and then later on i can assign permissions",
    "start": "1329120",
    "end": "1334240"
  },
  {
    "text": "for for the groups and to to be part of the sorry for for users to",
    "start": "1334240",
    "end": "1339840"
  },
  {
    "text": "be part of that group and get the necessary permissions next up i'm running the",
    "start": "1339840",
    "end": "1346000"
  },
  {
    "text": "the the arm template for the network the arm time before the cluster and creating namespaces permissions and",
    "start": "1346000",
    "end": "1352640"
  },
  {
    "text": "finally i installed the traffic english controller here so again this is typically you know",
    "start": "1352640",
    "end": "1358320"
  },
  {
    "text": "various steps in the pipeline uh this is the arm temple step where i deployed the network",
    "start": "1358320",
    "end": "1363679"
  },
  {
    "text": "you know i deployed the cluster and so on and so on but the the details here are not you know super",
    "start": "1363679",
    "end": "1369120"
  },
  {
    "text": "important it's more the fact that what we're actually doing as part of this pipeline interesting here",
    "start": "1369120",
    "end": "1376240"
  },
  {
    "start": "1376000",
    "end": "1494000"
  },
  {
    "text": "so again this is the the environment pipeline and uh let's take a look at the other",
    "start": "1376880",
    "end": "1383360"
  },
  {
    "text": "one the application pipeline it's the one so",
    "start": "1383360",
    "end": "1389679"
  },
  {
    "text": "this is run then every time i make a change to the application and let's take a look at the latest run here",
    "start": "1389679",
    "end": "1395919"
  },
  {
    "text": "so down here you can see that this is also of course at the stage the pipeline where the first stage now is",
    "start": "1395919",
    "end": "1401600"
  },
  {
    "text": "the build part so you know you can you can consider build just being the first part uh of your of your python really at the",
    "start": "1401600",
    "end": "1408400"
  },
  {
    "text": "first stage of your pipeline so this is where i'm you know building the the docker images and pushing them to a container industry",
    "start": "1408400",
    "end": "1414720"
  },
  {
    "text": "and then i'm deploying it to the dev test cluster and after this it will actually wait for",
    "start": "1414720",
    "end": "1420240"
  },
  {
    "text": "approval and then when i approve it it will go on and run to deploy it into my production",
    "start": "1420240",
    "end": "1425760"
  },
  {
    "text": "cluster here",
    "start": "1425760",
    "end": "1431200"
  },
  {
    "text": "so again let's take a look at this uh the pipeline and then do an edit here",
    "start": "1431200",
    "end": "1437840"
  },
  {
    "text": "just to see what this looks like and this is actually you know it's simpler",
    "start": "1437840",
    "end": "1443039"
  },
  {
    "text": "although you know the first stage here is the build so this is i'm using token compose here",
    "start": "1443039",
    "end": "1448559"
  },
  {
    "text": "for building and pushing the images and next up we have again the various",
    "start": "1448559",
    "end": "1454799"
  },
  {
    "text": "stages here for for europe us and the delta's cluster here and again",
    "start": "1454799",
    "end": "1460400"
  },
  {
    "text": "i'm using a template here for action for the actual steps in the deployment and let's take a quick look here to",
    "start": "1460400",
    "end": "1468480"
  },
  {
    "text": "show you what this looks like switch repository here",
    "start": "1468480",
    "end": "1473760"
  },
  {
    "text": "and put a template so this one is actually a little simpler i'm just using a helm here which is a common way to",
    "start": "1473760",
    "end": "1480720"
  },
  {
    "text": "package and deploy the application so i'm just doing a help me install to make sure i have it on the build server and then i'm",
    "start": "1480720",
    "end": "1487039"
  },
  {
    "text": "deploying the helm charge which is also an output from the build pipeline",
    "start": "1487039",
    "end": "1493039"
  },
  {
    "text": "so one interesting thing here now let's go back to",
    "start": "1493840",
    "end": "1499279"
  },
  {
    "start": "1494000",
    "end": "1619000"
  },
  {
    "text": "the run here and if we look at the latest run though",
    "start": "1499279",
    "end": "1505278"
  },
  {
    "text": "uh we have this concept here of the environments so that's the one i talked about before",
    "start": "1505919",
    "end": "1511679"
  },
  {
    "text": "so here we can see that this this particular run of this pipeline was deployed into these environments",
    "start": "1511679",
    "end": "1517919"
  },
  {
    "text": "and i can now view the actual environment here and this is also available here in the",
    "start": "1517919",
    "end": "1523440"
  },
  {
    "text": "pipeline hub you have the environments so here you can see the dev test for the eu and the product us environments",
    "start": "1523440",
    "end": "1529200"
  },
  {
    "text": "and this is where you get the visibility actually into the cluster so first up you see the deployment so i",
    "start": "1529200",
    "end": "1534559"
  },
  {
    "text": "can go in here and i can see all the deployments to this particular environment into the depth test",
    "start": "1534559",
    "end": "1543200"
  },
  {
    "text": "but even more so i can actually go kind of drill into this environment now so this is",
    "start": "1543200",
    "end": "1548240"
  },
  {
    "text": "actually a view into the cluster so when i click on this i actually get to see live information coming from the",
    "start": "1548240",
    "end": "1554400"
  },
  {
    "text": "cluster this is it's a great feature for in particular for for the development teams uh you know to",
    "start": "1554400",
    "end": "1561679"
  },
  {
    "text": "make sure that the deployments are working smoothly and it gets some kind of deployment related error you can go in here",
    "start": "1561679",
    "end": "1568000"
  },
  {
    "text": "and look at the status of the the various deployments and you can even drill down into these",
    "start": "1568000",
    "end": "1574480"
  },
  {
    "text": "uh pulse you know the actual containers running in the cluster and make sure that the the details and",
    "start": "1574480",
    "end": "1580400"
  },
  {
    "text": "the you know the amplifier that were deployed actually was correct uh and you can even go and see live logs",
    "start": "1580400",
    "end": "1587039"
  },
  {
    "text": "coming from the cluster like this and of course this information as you will see soon is also available",
    "start": "1587039",
    "end": "1592720"
  },
  {
    "text": "through the portal and through the kubernetes cli tools but it's quite common to not give all",
    "start": "1592720",
    "end": "1598080"
  },
  {
    "text": "the developers you know access to to the cluster itself um",
    "start": "1598080",
    "end": "1604240"
  },
  {
    "text": "and even if you do so you need you need to have some some more knowledge about the question itself",
    "start": "1604240",
    "end": "1609440"
  },
  {
    "text": "this is actually a great way for for developers to easily get access without giving them",
    "start": "1609440",
    "end": "1615200"
  },
  {
    "text": "access to the cluster specifically so and the other feature i talked about",
    "start": "1615200",
    "end": "1621039"
  },
  {
    "start": "1619000",
    "end": "1800000"
  },
  {
    "text": "was the fact that we can now automatically deploy pull requests and have these environments created for us",
    "start": "1621039",
    "end": "1627039"
  },
  {
    "text": "and i'm going to show you this so i'm actually prepared a pull request here it's a draft pull request",
    "start": "1627039",
    "end": "1632880"
  },
  {
    "text": "so i'm going to just publish it uh and that's with this one i'll kick off a pipeline here so it will actually",
    "start": "1632880",
    "end": "1640159"
  },
  {
    "text": "run a new round of this pipeline against this particular branch then to",
    "start": "1640159",
    "end": "1646240"
  },
  {
    "text": "make sure that this branch is okay but it will also deploy it into a new namespace",
    "start": "1646240",
    "end": "1652080"
  },
  {
    "text": "and while this is running let's just show you how this actually is implemented",
    "start": "1652080",
    "end": "1657279"
  },
  {
    "text": "because if we go back to our pipeline that i showed you before let's screen up",
    "start": "1657279",
    "end": "1664080"
  },
  {
    "text": "here so we can see now that we actually had uh in addition to the dev test stage",
    "start": "1664080",
    "end": "1671679"
  },
  {
    "text": "here i also have a stage that called dev test pr so this is a specific stage for",
    "start": "1671679",
    "end": "1678559"
  },
  {
    "text": "the pull request builds and there's a there's a condition here",
    "start": "1678559",
    "end": "1683600"
  },
  {
    "text": "to make sure that i'm only running this uh if the source branch is you know it's a pull request forth punch",
    "start": "1683600",
    "end": "1690080"
  },
  {
    "text": "and in this case i'm using another template here that is mostly the same as the the first",
    "start": "1690080",
    "end": "1696320"
  },
  {
    "text": "one that i showed you but it has an extra step here",
    "start": "1696320",
    "end": "1701679"
  },
  {
    "text": "so in addition to doing the the helm install and help deploy uh it has this special step called a",
    "start": "1702320",
    "end": "1708399"
  },
  {
    "text": "review app and in addition then we have a step for creating a namespace so this uh task this is a built-in test",
    "start": "1708399",
    "end": "1715440"
  },
  {
    "text": "you can just add here and it will this is the one that will actually create this environment",
    "start": "1715440",
    "end": "1720480"
  },
  {
    "text": "dynamically for us and set up all the permissions to be able to deploy into that namespace that",
    "start": "1720480",
    "end": "1725520"
  },
  {
    "text": "we're creating here so this is what kind of uh does the magic behind this into",
    "start": "1725520",
    "end": "1730720"
  },
  {
    "text": "creating a new namespace creating an environment initial pipelines that points to that namespace and then",
    "start": "1730720",
    "end": "1737120"
  },
  {
    "text": "we can just do the normal steps here so let's see what happens to the pipeline",
    "start": "1737120",
    "end": "1744240"
  },
  {
    "text": "it can take a little while sometime to build it",
    "start": "1744240",
    "end": "1749279"
  },
  {
    "text": "hopefully it should be done fairly soon",
    "start": "1749279",
    "end": "1753840"
  },
  {
    "text": "so yes it's built in the images now it's pushing it to the container registry and",
    "start": "1754559",
    "end": "1760640"
  },
  {
    "text": "as soon as this is done uh it will start deploying it into that new name space",
    "start": "1760640",
    "end": "1767840"
  },
  {
    "text": "so and this you know working with protocols like this is really really powerful we do this all the time so the ability",
    "start": "1768000",
    "end": "1775360"
  },
  {
    "text": "to just create new new pull requests push it and then a few minutes later have it available in an isolated namespace in the cluster",
    "start": "1775360",
    "end": "1782559"
  },
  {
    "text": "and then we can run tests against it we can have stakeholders looking at the functionality and they can be part of the approval process for the",
    "start": "1782559",
    "end": "1789039"
  },
  {
    "text": "pull request so it's a really powerful workflow uh and just maybe this just makes the",
    "start": "1789039",
    "end": "1795200"
  },
  {
    "text": "whole thing uh easier for for actually implementing it so",
    "start": "1795200",
    "end": "1801200"
  },
  {
    "text": "let's see if the if we're done here so it builds and you can see now that it skipped the",
    "start": "1801200",
    "end": "1806320"
  },
  {
    "text": "test it doesn't go here because this is a pull request instead it triggered the deploy to to the polar",
    "start": "1806320",
    "end": "1812000"
  },
  {
    "text": "to the pull request stage which is now done so interesting thing now is if we go",
    "start": "1812000",
    "end": "1818000"
  },
  {
    "text": "back to our environments here we have the dev test called eu and ws if i now drill down into the dev test",
    "start": "1818000",
    "end": "1824240"
  },
  {
    "text": "you will see that now we actually have an additional resource here it's now called review app dash one two",
    "start": "1824240",
    "end": "1831039"
  },
  {
    "text": "two one two two is actually the id of the pull request but the name here is something that you can you can configure",
    "start": "1831039",
    "end": "1837120"
  },
  {
    "text": "of course but this resource will now create it for us automatically",
    "start": "1837120",
    "end": "1843200"
  },
  {
    "text": "and if we drill down in here we can now see the the deployments that was just created",
    "start": "1843200",
    "end": "1848799"
  },
  {
    "text": "into this namespace and again i can drill all the way down here without the troubleshooting any",
    "start": "1848799",
    "end": "1854960"
  },
  {
    "text": "issues and so on but again now i have a new namespace in my cluster i have the new version deployed into the",
    "start": "1854960",
    "end": "1860720"
  },
  {
    "text": "namespace and i still have this functionality related to environments in national",
    "start": "1860720",
    "end": "1865919"
  },
  {
    "text": "pipelines so this is a really nice integration between azure pipelines and",
    "start": "1865919",
    "end": "1872960"
  },
  {
    "text": "and strongly if you are doing community deployment i strongly recommend you to",
    "start": "1872960",
    "end": "1878080"
  },
  {
    "text": "look into it",
    "start": "1878080",
    "end": "1880720"
  },
  {
    "start": "1883000",
    "end": "2109000"
  },
  {
    "text": "all right",
    "start": "1884080",
    "end": "1886480"
  },
  {
    "text": "so next up let's talk about monitoring and feedback so if you are working with azure uh if",
    "start": "1889120",
    "end": "1894799"
  },
  {
    "text": "you're running things in azure you definitely have come in touch with azure monitor which is the kind of",
    "start": "1894799",
    "end": "1900960"
  },
  {
    "text": "umbrella service for everything related to the monitoring to logs to analytics and so on so so",
    "start": "1900960",
    "end": "1907279"
  },
  {
    "text": "basically all things in running azure will send data into azure monitor",
    "start": "1907279",
    "end": "1912799"
  },
  {
    "text": "uh so this could be both your applications uh the guest operating systems in addition and all the various",
    "start": "1912799",
    "end": "1919120"
  },
  {
    "text": "resources and services and so on even subscriptions and tenants and so on send",
    "start": "1919120",
    "end": "1925039"
  },
  {
    "text": "different types of analytics information to these stores so azure monitor basically consists of",
    "start": "1925039",
    "end": "1932320"
  },
  {
    "text": "two different stores you have the metric store and then the log store and to the right you can see all the",
    "start": "1932320",
    "end": "1938399"
  },
  {
    "text": "options that you have once you have this data what you can do with it so first up you have the different types",
    "start": "1938399",
    "end": "1945120"
  },
  {
    "text": "of insight tooling so for specific purposes uh there is also a specific",
    "start": "1945120",
    "end": "1951200"
  },
  {
    "text": "uh type of insight that you can use so for example application insights is something for you know giving a lot",
    "start": "1951200",
    "end": "1957200"
  },
  {
    "text": "of insight into your applications so there's a specific tool for that and then you have the",
    "start": "1957200",
    "end": "1962720"
  },
  {
    "text": "the container which is the one that we're going to look at in this session so this is actually monitor for containers so again this is specific tooling for",
    "start": "1962720",
    "end": "1970159"
  },
  {
    "text": "for kubernetes to give you even more insight in addition to being able to you know to view the metrics and the logs",
    "start": "1970159",
    "end": "1976399"
  },
  {
    "text": "and so on we have this additional functionality going on here and then you can use of course you can",
    "start": "1976399",
    "end": "1981519"
  },
  {
    "text": "visualize all the information here using dashboard using power bi and so on and you can yourself analyze the data",
    "start": "1981519",
    "end": "1988159"
  },
  {
    "text": "using those the metric analytics which goes against the metric store and then you have log analytics which",
    "start": "1988159",
    "end": "1993519"
  },
  {
    "text": "allows you to run queries against the log store and you know doing",
    "start": "1993519",
    "end": "1998559"
  },
  {
    "text": "charts doing uh alerts uh working with",
    "start": "1998559",
    "end": "2004240"
  },
  {
    "text": "dashboards as well so again azure monitor for containers",
    "start": "2004240",
    "end": "2009519"
  },
  {
    "text": "this is a kind of a self-settle for azure monitor so this will now pick up when you enable this",
    "start": "2009519",
    "end": "2015519"
  },
  {
    "text": "you will get a lot of data coming from both your containers so anything your container logs will be",
    "start": "2015519",
    "end": "2020640"
  },
  {
    "text": "sent to the log store and in addition azure monitor will then pick up metrics from your containers so",
    "start": "2020640",
    "end": "2026880"
  },
  {
    "text": "things like cpu usage memory usage and so on and send this into the data stores",
    "start": "2026880",
    "end": "2032559"
  },
  {
    "text": "and in addition to your containers uh also everything related to the kubernetes cluster itself so the nodes",
    "start": "2032559",
    "end": "2039200"
  },
  {
    "text": "uh the system parts running inside there everything and the guest operating system everything will also go in here",
    "start": "2039200",
    "end": "2044640"
  },
  {
    "text": "and be available to you in terms of queries and dashboards and alerts and so on",
    "start": "2044640",
    "end": "2050638"
  },
  {
    "text": "so again when you do enable this for your cluster this is optional you don't have to use it but when you do",
    "start": "2050639",
    "end": "2056800"
  },
  {
    "text": "aks will deploy the the log analytics agent uh in a containerized version so it will",
    "start": "2056800",
    "end": "2062560"
  },
  {
    "text": "be running inside the cluster and you connect it to the log analytics workspace so the workspace is where all",
    "start": "2062560",
    "end": "2068480"
  },
  {
    "text": "the information is stored in those data stores you can have multiple workspaces",
    "start": "2068480",
    "end": "2073599"
  },
  {
    "text": "if you want to and then again it collects the memory processor metrics through the kubernetes metrics api",
    "start": "2073599",
    "end": "2079679"
  },
  {
    "text": "everything from your controllers to nodes containers and this is written to the metric store and then it picks up also the the loads",
    "start": "2079679",
    "end": "2086320"
  },
  {
    "text": "of simultaneously to the log store and enabling this is",
    "start": "2086320",
    "end": "2092000"
  },
  {
    "text": "really easy either way how you create the cluster itself using arm templates we can just specify",
    "start": "2092000",
    "end": "2098640"
  },
  {
    "text": "that we want to enable this and we give it the resource id of the of the log analytics workspace where",
    "start": "2098640",
    "end": "2105920"
  },
  {
    "text": "it's just where it should send the data so let's take a look at the azure",
    "start": "2105920",
    "end": "2111280"
  },
  {
    "start": "2109000",
    "end": "2587000"
  },
  {
    "text": "monitor and specifically then for for aks so",
    "start": "2111280",
    "end": "2117119"
  },
  {
    "text": "this is the start page for azure monitor and uh you can you can see here the the",
    "start": "2117119",
    "end": "2123119"
  },
  {
    "text": "different insights that i talked about so you have the application insights for for your application information you",
    "start": "2123119",
    "end": "2128560"
  },
  {
    "text": "have the four version machines storage accounts and so on and then you have the containers hub",
    "start": "2128560",
    "end": "2134560"
  },
  {
    "text": "here so this is the functionality built on top of the ats monitoring so here i actually get a kind of a",
    "start": "2134560",
    "end": "2141359"
  },
  {
    "text": "overview of all my clusters so i have three clusters that i showed before i have the the test cluster and then i match your",
    "start": "2141359",
    "end": "2148640"
  },
  {
    "text": "production clusters and i can get a quick glimpse here of the status and the health of these",
    "start": "2148640",
    "end": "2153760"
  },
  {
    "text": "clusters so if anything it would be faulty here i would get another status here",
    "start": "2153760",
    "end": "2159520"
  },
  {
    "text": "and then and then of course now i can drill down into these clusters to to get more",
    "start": "2159520",
    "end": "2164640"
  },
  {
    "text": "insights here so let's go into the the dev test cluster here",
    "start": "2164640",
    "end": "2170480"
  },
  {
    "text": "and this will now give me a quick overview of the nodes the cpu and memory utilization the",
    "start": "2170480",
    "end": "2177200"
  },
  {
    "text": "number of nodes the node count and also the number of",
    "start": "2177200",
    "end": "2182720"
  },
  {
    "text": "ports running also in various states here so you can see now that it looks pretty good i have currently",
    "start": "2182720",
    "end": "2190400"
  },
  {
    "text": "around 28 or something pots running in these clusters",
    "start": "2190400",
    "end": "2195599"
  },
  {
    "text": "i can actually also turn on the the live interval which now you switch to a live view so it will",
    "start": "2195599",
    "end": "2200800"
  },
  {
    "text": "just show me information coming in",
    "start": "2200800",
    "end": "2205440"
  },
  {
    "text": "and of course i can also you know select different time periods here so this is a nice",
    "start": "2206079",
    "end": "2211920"
  },
  {
    "text": "overview and another thing you can do here and should do here is related to alerts so you can create all types of",
    "start": "2211920",
    "end": "2219599"
  },
  {
    "text": "alerts here i will show you that in a minute as well but in addition to this you have a lot of",
    "start": "2219599",
    "end": "2225680"
  },
  {
    "text": "predefined alerts so recommended alerts which is things that you typically want to be",
    "start": "2225680",
    "end": "2230720"
  },
  {
    "text": "alerted on and this feature just makes it super simple to just enable these types alerts",
    "start": "2230720",
    "end": "2237040"
  },
  {
    "text": "so for example if i have containers having cpu being you know greater than",
    "start": "2237040",
    "end": "2242480"
  },
  {
    "text": "95 percent over a certain period of time uh i can enable this alert to this sentence to",
    "start": "2242480",
    "end": "2248240"
  },
  {
    "text": "the srt for example also if i have the number of ports in a failed state are greater than zero",
    "start": "2248240",
    "end": "2253680"
  },
  {
    "text": "so if i post failing i can also set up this alert just by you know flipping this switch so so",
    "start": "2253680",
    "end": "2261599"
  },
  {
    "text": "you know this is something that you really want to enable and again then you can build more customized more advanced looks if you",
    "start": "2261599",
    "end": "2267920"
  },
  {
    "text": "want to so now what i can do now is so this is",
    "start": "2267920",
    "end": "2274160"
  },
  {
    "text": "kind of an overview but then i can drill down here into into my cluster to get more specific",
    "start": "2274160",
    "end": "2279920"
  },
  {
    "text": "information so these are my nodes they're running and actually it's kind of small here but you",
    "start": "2279920",
    "end": "2285839"
  },
  {
    "text": "can actually see the trend here in terms of cpu usage for each of these",
    "start": "2285839",
    "end": "2292400"
  },
  {
    "text": "resources so this is a the node it's kind of under under utilize here so",
    "start": "2292400",
    "end": "2298000"
  },
  {
    "text": "it's hard to see it here but then when i drill down here i see the the controllers and all the way down to the containers here",
    "start": "2298000",
    "end": "2305680"
  },
  {
    "text": "and so you know i can drill down into the specific container i can see you know the cpu usage i can",
    "start": "2305680",
    "end": "2312880"
  },
  {
    "text": "switch to to the memory view see how is the memory going over time and this is really good information when",
    "start": "2312880",
    "end": "2318320"
  },
  {
    "text": "you're troubleshooting something that has happened you can kind of look back see what has the trend been like how",
    "start": "2318320",
    "end": "2324640"
  },
  {
    "text": "we've seen you know increasing memory or increasing cpu and so on",
    "start": "2324640",
    "end": "2330319"
  },
  {
    "text": "and again i don't have to you know go all the way from those down to containers i can you know go",
    "start": "2330400",
    "end": "2336960"
  },
  {
    "text": "directly to these containers and in addition i can also filter this because we have in a community customer",
    "start": "2336960",
    "end": "2343520"
  },
  {
    "text": "you always have a lot of system parts running and you might only be interested in in your application so i can filter it on",
    "start": "2343520",
    "end": "2350480"
  },
  {
    "text": "on my namespace so now i only see the my containers here so these are my three",
    "start": "2350480",
    "end": "2356560"
  },
  {
    "text": "deployments i have a front and a back and a database right here so look at looking at one of these",
    "start": "2356560",
    "end": "2364560"
  },
  {
    "text": "containers i can get some information about this container status environment variables and so on and i",
    "start": "2364560",
    "end": "2371599"
  },
  {
    "text": "can also actually get the live data view here similar to what we saw in azure pipelines here",
    "start": "2371599",
    "end": "2377440"
  },
  {
    "text": "it's also great for for troubleshooting and running instance so actually we could go to the",
    "start": "2377440",
    "end": "2384400"
  },
  {
    "text": "application",
    "start": "2384400",
    "end": "2387119"
  },
  {
    "text": "it looks good and actually every time i select the category here there is something that",
    "start": "2393040",
    "end": "2398560"
  },
  {
    "text": "should uh turn the log here so you can see now that i i load just the",
    "start": "2398560",
    "end": "2403839"
  },
  {
    "text": "uh the selected category just as an example so you can see now that the logs are live streaming there",
    "start": "2403839",
    "end": "2410079"
  },
  {
    "text": "which is great for troubleshooting i can also see the events related to the pod itself so i can see things like the image was",
    "start": "2410079",
    "end": "2416400"
  },
  {
    "text": "cool which version it was great it started and scheduled to a specific node and so on",
    "start": "2416400",
    "end": "2421680"
  },
  {
    "text": "the great information available here in this view now then we can work with",
    "start": "2421680",
    "end": "2428400"
  },
  {
    "text": "the two different data stores that i talked about we have the metric store so this is where all type of metrics",
    "start": "2428400",
    "end": "2434160"
  },
  {
    "text": "are stored so i can easily do charts uh type like showing the the number of poles across",
    "start": "2434160",
    "end": "2441599"
  },
  {
    "text": "different states uh i can add multiple metrics and i can create charts here",
    "start": "2441599",
    "end": "2447440"
  },
  {
    "text": "and then i can i can pin these charts uh to a dashboard i can build dashboards with the",
    "start": "2447440",
    "end": "2452640"
  },
  {
    "text": "information that i want to have and basically all the resources all services in azure have this metrics uh",
    "start": "2452640",
    "end": "2459280"
  },
  {
    "text": "store available on the startup so you can easily create your own metrics and you also you always",
    "start": "2459280",
    "end": "2466160"
  },
  {
    "text": "have this type of standard uh metrics chart that i showed you sorry on on this page",
    "start": "2466160",
    "end": "2472560"
  },
  {
    "text": "so if you go into the virtual machine for example you will see here you will see a similar charts based on the metrics for virtual",
    "start": "2472560",
    "end": "2479040"
  },
  {
    "text": "machines then in addition you have the the log analytics",
    "start": "2479040",
    "end": "2484720"
  },
  {
    "text": "so this is where all the logs information are stored and here we can run a lot of different",
    "start": "2484720",
    "end": "2492720"
  },
  {
    "text": "queries using a language called kusto so like for example let's do a",
    "start": "2492720",
    "end": "2498800"
  },
  {
    "text": "container cpu query so this is a sql like query so i'm selecting information from the",
    "start": "2498800",
    "end": "2504319"
  },
  {
    "text": "performance table and then i'm doing some filtering and i'm doing some",
    "start": "2504319",
    "end": "2509680"
  },
  {
    "text": "aggregating so i can view the results here either as a table or a charge you can see this is a huge",
    "start": "2509680",
    "end": "2517440"
  },
  {
    "text": "amount of data but even so it runs really really fast",
    "start": "2517440",
    "end": "2522480"
  },
  {
    "text": "and once i've created this this chart so these queries i can again i can pin it to dashboard",
    "start": "2522480",
    "end": "2528640"
  },
  {
    "text": "but i can also create you know an alert here so this is how you can build more",
    "start": "2528640",
    "end": "2533839"
  },
  {
    "text": "advanced alerts by by using these as these queries and then you can create an alert for",
    "start": "2533839",
    "end": "2540079"
  },
  {
    "text": "example saying that if the number of results coming from this is greater than a specific",
    "start": "2540079",
    "end": "2545280"
  },
  {
    "text": "threshold value over a specific period of time then send an alert a typical example",
    "start": "2545280",
    "end": "2551200"
  },
  {
    "text": "here so really really powerful and the the",
    "start": "2551200",
    "end": "2557520"
  },
  {
    "text": "query syntax take a little bit of time to get used to it but once you know it it's quite",
    "start": "2557520",
    "end": "2562640"
  },
  {
    "text": "simple to write this queries and again everything related everything running in azure will send data here so",
    "start": "2562640",
    "end": "2569280"
  },
  {
    "text": "you can you know do queries across multiple resources so you can combine information",
    "start": "2569280",
    "end": "2574720"
  },
  {
    "text": "from other applications for example application insights in the same query so it's a really",
    "start": "2574720",
    "end": "2579839"
  },
  {
    "text": "really powerful thing",
    "start": "2579839",
    "end": "2584079"
  },
  {
    "text": "all right so left part availability and scalability i'll talk you to talk about as well",
    "start": "2586880",
    "end": "2594400"
  },
  {
    "start": "2587000",
    "end": "2724000"
  },
  {
    "text": "uh when you're doing talking about availability in asher you have the concept of regions you know",
    "start": "2594400",
    "end": "2600880"
  },
  {
    "text": "we have the west europe east us and so on the radius around the world",
    "start": "2600880",
    "end": "2606560"
  },
  {
    "text": "and inside each of these regions you have something called availability zones",
    "start": "2606560",
    "end": "2611680"
  },
  {
    "text": "so each of these zones they are they are you know physically distributed",
    "start": "2611680",
    "end": "2617200"
  },
  {
    "text": "so they are not really close to each other and the reason for that is of course that the space should not be",
    "start": "2617200",
    "end": "2625760"
  },
  {
    "text": "for example if you have a major thing like an earthquake or a thunderstorm should not be able to",
    "start": "2625920",
    "end": "2632160"
  },
  {
    "text": "wipe all these uh availability also at the same time so each availability zone in addition",
    "start": "2632160",
    "end": "2637839"
  },
  {
    "text": "doesn't have multiple physical data centers which in turn have independent power the water supply",
    "start": "2637839",
    "end": "2643599"
  },
  {
    "text": "and cooling as well so so this is make it available to build highly available",
    "start": "2643599",
    "end": "2650079"
  },
  {
    "text": "applications that are not um susceptible for",
    "start": "2650079",
    "end": "2655280"
  },
  {
    "text": "for uh problems that can occur i mean data centers can go down or they can be you know target of a",
    "start": "2655280",
    "end": "2661920"
  },
  {
    "text": "denial of service attacks for example which by a particular region or",
    "start": "2661920",
    "end": "2666960"
  },
  {
    "text": "availability zone will actually have a degraded performance so when",
    "start": "2666960",
    "end": "2672480"
  },
  {
    "text": "you're deploying something into azure and you want to make use of that availability zones so then you want to",
    "start": "2672480",
    "end": "2677599"
  },
  {
    "text": "just make sure that you're distributing it across multiple availability cells so for example if you're doing virtual machines",
    "start": "2677599",
    "end": "2683680"
  },
  {
    "text": "or virtual machine scale sets you want to deploy the machines into multiple availability zones and then you have a",
    "start": "2683680",
    "end": "2690400"
  },
  {
    "text": "load balancer in front of it that will direct traffic to it so with aks you can take advantage of it",
    "start": "2690400",
    "end": "2696560"
  },
  {
    "text": "and specify that you want to have multiple availability zones so in this case if i'm deploying",
    "start": "2696560",
    "end": "2701839"
  },
  {
    "text": "three nodes and i say i want to have three different availability zones aks will automatically distribute these",
    "start": "2701839",
    "end": "2708079"
  },
  {
    "text": "nodes uh in in these these three availability",
    "start": "2708079",
    "end": "2713280"
  },
  {
    "text": "zones so if i have three nodes i will have one in each availability zone and then if i",
    "start": "2713280",
    "end": "2718640"
  },
  {
    "text": "create more nodes of course they will be you know distributed across these zones",
    "start": "2718640",
    "end": "2724640"
  },
  {
    "text": "again this is very easy to enable just specifying here in our template how many availability zones i want to have",
    "start": "2725440",
    "end": "2730720"
  },
  {
    "text": "or which ones actually and so when you do this you you can set this",
    "start": "2730720",
    "end": "2738160"
  },
  {
    "text": "up then so you can deploy this into multiple region as well so within the region you have multiple availability zones",
    "start": "2738160",
    "end": "2743680"
  },
  {
    "text": "so you have a high availability there but then you know a whole region you",
    "start": "2743680",
    "end": "2748800"
  },
  {
    "text": "know doesn't really tend to go down but you know in addition to this you might want to be",
    "start": "2748800",
    "end": "2755440"
  },
  {
    "text": "able to actually have a performance cluster [Music] no matter where where the user is you",
    "start": "2755440",
    "end": "2761680"
  },
  {
    "text": "might have users across the world and you want to send them to the closest one",
    "start": "2761680",
    "end": "2767440"
  },
  {
    "text": "or you might have some kind of networking issue that actually causes problems in one of the regions so to do this you",
    "start": "2767440",
    "end": "2773200"
  },
  {
    "text": "actually set up multiple regions you deploy the same cluster into multiple regions and then you put",
    "start": "2773200",
    "end": "2778800"
  },
  {
    "text": "something like the traffic value in front of it and the traffic manager can then direct the users to the clusters either by",
    "start": "2778800",
    "end": "2785760"
  },
  {
    "text": "geography so sends you to the closest one or by performance so you can detect",
    "start": "2785760",
    "end": "2791680"
  },
  {
    "text": "which one has the the best response time currently so you will send it to the tester that actually performs",
    "start": "2791680",
    "end": "2797680"
  },
  {
    "text": "the best at the moment when you do this you also want to make",
    "start": "2797680",
    "end": "2803359"
  },
  {
    "text": "sure that you are replicating your container industry so if you have your if you're pushing",
    "start": "2803359",
    "end": "2809599"
  },
  {
    "text": "images to the container industry in your primary region then when you have a cluster running in",
    "start": "2809599",
    "end": "2815839"
  },
  {
    "text": "a secondary region uh it would be not optimal to have it pull images from from the other region",
    "start": "2815839",
    "end": "2822160"
  },
  {
    "text": "across the world it can do that of course but it tends to to increase the time it",
    "start": "2822160",
    "end": "2828000"
  },
  {
    "text": "takes for it to for example deploy new versions so instead you can enable your replication",
    "start": "2828000",
    "end": "2833599"
  },
  {
    "text": "on the container registry so when you push a new image to the to the registration primary it will automatically replicate it to",
    "start": "2833599",
    "end": "2839680"
  },
  {
    "text": "the secondary region so that cluster can upload from the registry",
    "start": "2839680",
    "end": "2844800"
  },
  {
    "text": "that is close to it so related to availability is of course",
    "start": "2844800",
    "end": "2851359"
  },
  {
    "start": "2848000",
    "end": "2909000"
  },
  {
    "text": "scalability and the different types of skating you can do with aks",
    "start": "2851359",
    "end": "2857280"
  },
  {
    "text": "the first one is is called when you talk about horizontal scaling so you want to scale up the number of instances",
    "start": "2857280",
    "end": "2862880"
  },
  {
    "text": "running and this is something that has you know it's built it's a built-in feature in kubernetes that you can enable and configure",
    "start": "2862880",
    "end": "2869280"
  },
  {
    "text": "and it's called the horizontal port auto scaling hpa so if you enable and configure this now",
    "start": "2869280",
    "end": "2875280"
  },
  {
    "text": "you can then scale up the number of pods depending on how you configure it to handle an increased load",
    "start": "2875280",
    "end": "2882480"
  },
  {
    "text": "now the next part is scaling the cluster itself so you know you can scale up uh or scale out the number of pots to a",
    "start": "2882480",
    "end": "2889040"
  },
  {
    "text": "certain amount but at some point in time you will run out of resources on your nodes and then you can enable the",
    "start": "2889040",
    "end": "2895839"
  },
  {
    "text": "cluster autoscaler which would then add additional nodes to your cluster and then automatically",
    "start": "2895839",
    "end": "2901680"
  },
  {
    "text": "schedule the new ports onto that node and therefore balancing the load over these",
    "start": "2901680",
    "end": "2907920"
  },
  {
    "text": "nodes and the pod autoscaler it works like",
    "start": "2907920",
    "end": "2913920"
  },
  {
    "text": "this you have a deployment in kubernetes where you specify which ports and how many ports you want to run",
    "start": "2913920",
    "end": "2921280"
  },
  {
    "text": "you you can create the hp and configure it so this is one way of configuring it",
    "start": "2921280",
    "end": "2926319"
  },
  {
    "text": "by using the auto scale command so here i'm saying that uh if my pods are are running above 80",
    "start": "2926319",
    "end": "2933040"
  },
  {
    "text": "cpu um then it should kind of enable the the auto scaling",
    "start": "2933040",
    "end": "2938240"
  },
  {
    "text": "and i'm specifying here that i want to have at least three nodes three quads running and i wanted to scale up to a maximum of",
    "start": "2938240",
    "end": "2945119"
  },
  {
    "text": "10 pulse so i don't run the risk of totally consuming all resources in my cluster",
    "start": "2945119",
    "end": "2951119"
  },
  {
    "text": "but i want to have the the autoscaler to scale between three and ten here depending on the cpu load here and all pods running in the",
    "start": "2951119",
    "end": "2959760"
  },
  {
    "text": "cables cluster they send data to the metrics server api and this is what the port autoscaler",
    "start": "2959760",
    "end": "2966960"
  },
  {
    "text": "reads and bases the decisions to then either scale up or scale down your deployments",
    "start": "2966960",
    "end": "2972319"
  },
  {
    "text": "based on the cpu so and if you want to for example scale on on cpu percentage you also need to make",
    "start": "2972319",
    "end": "2979520"
  },
  {
    "text": "sure that you're actually defining in your deployment what your your application actually",
    "start": "2979520",
    "end": "2986079"
  },
  {
    "text": "requests so here i'm saying i'm requesting at least 250 millicourse of cpu",
    "start": "2986079",
    "end": "2991760"
  },
  {
    "text": "and also at the top limiter and this is actually used by the auto scaler to to",
    "start": "2991760",
    "end": "2999440"
  },
  {
    "text": "in the algorithm that it uses to to calculate whether to scale up or scale down and how much to scale up",
    "start": "2999440",
    "end": "3005280"
  },
  {
    "text": "it uses this information to do so the cluster auto scaling is uh simple to",
    "start": "3005280",
    "end": "3012640"
  },
  {
    "start": "3009000",
    "end": "3092000"
  },
  {
    "text": "enable you can just you know enable it and specify i mean again the minimum number of nodes here",
    "start": "3012640",
    "end": "3018640"
  },
  {
    "text": "there are more things you can configure but this is the basic of it and it's hard to demo",
    "start": "3018640",
    "end": "3024960"
  },
  {
    "text": "cluster auto scaling live because it's not you know takes a few minutes to set everything up so",
    "start": "3024960",
    "end": "3030079"
  },
  {
    "text": "actually i ran this this yesterday",
    "start": "3030079",
    "end": "3035119"
  },
  {
    "text": "and just to show you what it is actually would look like after the fact is on the top there you",
    "start": "3035119",
    "end": "3041839"
  },
  {
    "text": "can see the number of pots running the cluster and on the bottom left you see the account of nodes here",
    "start": "3041839",
    "end": "3048319"
  },
  {
    "text": "and if you if you see over here to when the pod start arrives here this is when i added some loads to the cluster",
    "start": "3048319",
    "end": "3054960"
  },
  {
    "text": "and you can also see here that the number of pending posts are increasing errors this means that",
    "start": "3054960",
    "end": "3062000"
  },
  {
    "text": "the autoscaler wants to create more pods but there's not enough resources in the cluster to do so",
    "start": "3062000",
    "end": "3068240"
  },
  {
    "text": "so this is a trigger for the cluster auto scale it's actually create a new node and once that is up",
    "start": "3068240",
    "end": "3073440"
  },
  {
    "text": "and running you can see that now we can scale the box here and we don't have any more coming pods here and finally when the load has",
    "start": "3073440",
    "end": "3080559"
  },
  {
    "text": "gone down after a while the javascript scale will then also remove the node and go back to the minimum here which is",
    "start": "3080559",
    "end": "3088640"
  },
  {
    "text": "three nodes and there's a final type of scaling in a",
    "start": "3088640",
    "end": "3096079"
  },
  {
    "start": "3092000",
    "end": "3132000"
  },
  {
    "text": "guest which is kind of cool it's we call it serverless scaling and this uses the concept of a virtual",
    "start": "3096079",
    "end": "3103040"
  },
  {
    "text": "node and so in azure we can take advantage of a thing called azure container instance",
    "start": "3103040",
    "end": "3108800"
  },
  {
    "text": "which is a very fast and simple way of running containers so instead of creating new",
    "start": "3108800",
    "end": "3114400"
  },
  {
    "text": "nodes which takes you know a couple of minutes we can instead use a virtual node",
    "start": "3114400",
    "end": "3122079"
  },
  {
    "text": "which under the hood then well instead of creating a physical virtual machine it will actually",
    "start": "3122079",
    "end": "3127200"
  },
  {
    "text": "uh schedule my called inside of azure inside an azure container instance instead and this is actually",
    "start": "3127200",
    "end": "3133280"
  },
  {
    "start": "3132000",
    "end": "3216000"
  },
  {
    "text": "based on uh something called the virtual it's actually an open source project and",
    "start": "3133280",
    "end": "3139760"
  },
  {
    "text": "this is integrated into aks and the virtual cube it registers itself",
    "start": "3139760",
    "end": "3144960"
  },
  {
    "text": "as a node so for communities it looks like a normal node but what happens when the",
    "start": "3144960",
    "end": "3150880"
  },
  {
    "text": "communities schedule support onto that node what happens under the hood is that uh the cubelet will now instead",
    "start": "3150880",
    "end": "3158160"
  },
  {
    "text": "uh create actual container instances but this is really powerful in certain",
    "start": "3158160",
    "end": "3163280"
  },
  {
    "text": "scenarios when you have some type of burst though so let's say that you have a cubase system",
    "start": "3163280",
    "end": "3169119"
  },
  {
    "text": "where you have some workers that are you know pulling messages from a cube and suddenly you get a lot of messages",
    "start": "3169119",
    "end": "3174880"
  },
  {
    "text": "that you need to handle then instead of either having a huge cluster or scaling up new nodes",
    "start": "3174880",
    "end": "3180640"
  },
  {
    "text": "you can instead use these version nodes which is much faster because it's much faster to start a",
    "start": "3180640",
    "end": "3187839"
  },
  {
    "text": "container instance compared to creating new virtual machines and so you can scale up from zero and",
    "start": "3187839",
    "end": "3194800"
  },
  {
    "text": "you know process those messages and then it can scale down to zero again and of course this also means that you",
    "start": "3194800",
    "end": "3200559"
  },
  {
    "text": "don't really you don't have to pay for nodes running unless you you really need them so if",
    "start": "3200559",
    "end": "3205839"
  },
  {
    "text": "you are running take a look at these virtual nodes this is something that you can just enable",
    "start": "3205839",
    "end": "3212720"
  },
  {
    "text": "and then use when you when you find a need to",
    "start": "3212720",
    "end": "3218240"
  },
  {
    "start": "3216000",
    "end": "3599000"
  },
  {
    "text": "so let's finish up with some demos on on this autoscaling availability and",
    "start": "3219200",
    "end": "3226880"
  },
  {
    "text": "first up let me just look at the take a look at the availability part so this is the",
    "start": "3227599",
    "end": "3235040"
  },
  {
    "text": "cluster again and again we have uh the node tools here so it says i have two instances here in",
    "start": "3235040",
    "end": "3242000"
  },
  {
    "text": "my in my notepad so under under the hood as i talked about before this is a",
    "start": "3242000",
    "end": "3247520"
  },
  {
    "text": "vector machine scale set which you can drill into if you want to like this",
    "start": "3247520",
    "end": "3253280"
  },
  {
    "text": "so each in my cluster has a scale set and if i go into my notepad here you can see here that the location is multiple",
    "start": "3253280",
    "end": "3259839"
  },
  {
    "text": "zones and looking at the instances actually i i can't see this in this level but if i",
    "start": "3259839",
    "end": "3266160"
  },
  {
    "text": "go into the actual virtual machine i can see that this one is running in zone one uh in west europe and if i go",
    "start": "3266160",
    "end": "3274400"
  },
  {
    "text": "into the other one you can see this running in seoul too in west europe so again aks has automatically distributed",
    "start": "3274400",
    "end": "3280640"
  },
  {
    "text": "my node on top of multiple availability zones and if i",
    "start": "3280640",
    "end": "3285680"
  },
  {
    "text": "would add one more node here it will actually be placed in the third cell so again this is",
    "start": "3285680",
    "end": "3291359"
  },
  {
    "text": "what we can do to make it highly available and then to support the the multi-region",
    "start": "3291359",
    "end": "3298000"
  },
  {
    "text": "functionality i talked about before you can set this up using traffic manager",
    "start": "3298000",
    "end": "3303520"
  },
  {
    "text": "so when you're using a traffic manager this is the this is the end point that your users",
    "start": "3303520",
    "end": "3309920"
  },
  {
    "text": "will browse to and then it will uh redirect the traffic uh based on how you configure it in this",
    "start": "3309920",
    "end": "3316640"
  },
  {
    "text": "case i configured the geographic routing method meaning that it will send traffic to the closest one so",
    "start": "3316640",
    "end": "3324559"
  },
  {
    "text": "you know this is the url so if i go to this url i will be automatically routed",
    "start": "3324559",
    "end": "3332000"
  },
  {
    "text": "to the closest one this can be seen here as well if i do a thing",
    "start": "3332000",
    "end": "3338640"
  },
  {
    "text": "like this you can see you can see that it results to the eu cluster but if you know if i",
    "start": "3340799",
    "end": "3346160"
  },
  {
    "text": "would be in the us or close to the u.s it would automatically direct me to that cluster",
    "start": "3346160",
    "end": "3352880"
  },
  {
    "text": "but i could also i could also use it on the performance routing instead to actually make sure",
    "start": "3352880",
    "end": "3358640"
  },
  {
    "text": "that i always come to the cluster that is most performant in",
    "start": "3358640",
    "end": "3363680"
  },
  {
    "text": "the current time span",
    "start": "3363680",
    "end": "3366720"
  },
  {
    "text": "so last up uh let's download the autoscaling part",
    "start": "3370079",
    "end": "3376480"
  },
  {
    "text": "and let's take a look inside my cluster here if i do i get the deployment here",
    "start": "3376480",
    "end": "3385440"
  },
  {
    "text": "that's all right get deployments in my namespace",
    "start": "3386480",
    "end": "3394880"
  },
  {
    "text": "so again you can see that i have three deployments the front and the back end and database and i'm running",
    "start": "3395599",
    "end": "3400720"
  },
  {
    "text": "uh only one instance here at this point of every pod there so it's not really you know",
    "start": "3400720",
    "end": "3407119"
  },
  {
    "text": "it's not really suitable now for for a high load so i'm gonna enable the auto scaling",
    "start": "3407119",
    "end": "3415119"
  },
  {
    "text": "so uh i'm doing cubecat autoscale um i want to scale my my front and my web",
    "start": "3415119",
    "end": "3420480"
  },
  {
    "text": "app of course i could also scale the autoscale back end if i want to and here i'm specifying that the cpu",
    "start": "3420480",
    "end": "3427440"
  },
  {
    "text": "percentage should be just 10 this is not really realistic but for the demo purpose the next easier to actually",
    "start": "3427440",
    "end": "3433599"
  },
  {
    "text": "show you this and specifying that the minimum should be 3 and the maximum should be 10 here so",
    "start": "3433599",
    "end": "3441040"
  },
  {
    "text": "let's uh let's do this and",
    "start": "3441040",
    "end": "3446799"
  },
  {
    "text": "then i want to add some load to it so i'm using this tool called bombardier to just",
    "start": "3446799",
    "end": "3453440"
  },
  {
    "text": "give it a a lot of hp requests coming from my machine here and",
    "start": "3453440",
    "end": "3460319"
  },
  {
    "text": "actually we can go back to see the",
    "start": "3460319",
    "end": "3464720"
  },
  {
    "text": "inside view here so if we lock you you can also see this",
    "start": "3465440",
    "end": "3470880"
  },
  {
    "text": "scaling here so as it comes in here so if we switch to",
    "start": "3470880",
    "end": "3476400"
  },
  {
    "text": "last 30 minutes and enable the live view here",
    "start": "3476400",
    "end": "3482079"
  },
  {
    "text": "we should be able to see the the pod going up here in a few few seconds so basically now the the",
    "start": "3482079",
    "end": "3488640"
  },
  {
    "text": "autoscaler will look at the at the cpu load of my pulse and what it sees that the",
    "start": "3488640",
    "end": "3496960"
  },
  {
    "text": "you know the average cpu is about ten percent uh it will increase the the number of replicas here",
    "start": "3496960",
    "end": "3505040"
  },
  {
    "text": "i can also monitor this using uh just the status so you can see now that",
    "start": "3505040",
    "end": "3510880"
  },
  {
    "text": "it's actually currently 60 so it's already actually scaled",
    "start": "3510880",
    "end": "3516000"
  },
  {
    "text": "up to six instances here which then uh you should be able to see this",
    "start": "3516000",
    "end": "3521359"
  },
  {
    "text": "here coming in but it actually increased the number of pots here uh it",
    "start": "3521359",
    "end": "3526640"
  },
  {
    "text": "might be hard to see on this scale unfortunately but you can see now that it's scaled up to six replicas",
    "start": "3526640",
    "end": "3532480"
  },
  {
    "text": "and if the load continues it will go all the way up to you know 10 instances based on the cpu load here",
    "start": "3532480",
    "end": "3539280"
  },
  {
    "text": "so you can see now that the average is 31 because we kind of scale up a bit",
    "start": "3539280",
    "end": "3544319"
  },
  {
    "text": "so but as long as it's above 10 it should continue to scale uh even more so yeah so now it's",
    "start": "3544319",
    "end": "3552160"
  },
  {
    "text": "actually skinned up to 10 instances so",
    "start": "3552160",
    "end": "3557440"
  },
  {
    "text": "if i do get the deployment q box you can again see that i'm",
    "start": "3557440",
    "end": "3563200"
  },
  {
    "text": "actually having 10 instances here on my front this is completely done now",
    "start": "3563200",
    "end": "3568640"
  },
  {
    "text": "by by the horizontal port of the and yeah now we can see also here that the",
    "start": "3568640",
    "end": "3574720"
  },
  {
    "text": "pod count is going up here so this is how you can handle uh increased demand",
    "start": "3574720",
    "end": "3580640"
  },
  {
    "text": "and again the auto scale will then run and if you configure it to you know eventually you will run out of",
    "start": "3580640",
    "end": "3587599"
  },
  {
    "text": "resources in the node and that at that point the the cluster of the scale will begin",
    "start": "3587599",
    "end": "3592720"
  },
  {
    "text": "and we increase the number of nodes here as well uh but i just show you that on the slide as well because you can't really",
    "start": "3592720",
    "end": "3599359"
  },
  {
    "text": "wait for that now all right i think i'm actually out of",
    "start": "3599359",
    "end": "3605440"
  },
  {
    "text": "time but that is what i wanted to show you so [Music] talk about the infrastructure's code and",
    "start": "3605440",
    "end": "3611680"
  },
  {
    "text": "deployment to make sure you have a safe repeatable way of provisioning both",
    "start": "3611680",
    "end": "3616960"
  },
  {
    "text": "the cluster and your application uh how you can use azure monitoring to get insights into",
    "start": "3616960",
    "end": "3622640"
  },
  {
    "text": "the cluster application creating alerts creating charts and so on and how you can think and and work with",
    "start": "3622640",
    "end": "3630000"
  },
  {
    "text": "the availability zones and regions and also the scalability functions and both in kubernetes itself but also",
    "start": "3630000",
    "end": "3637520"
  },
  {
    "text": "in aks to make sure that your application cluster is available at all times to your end users",
    "start": "3637520",
    "end": "3646640"
  },
  {
    "text": "so with that i want to say thank you i hope you picked up some some good knowledge and please uh if you have any questions",
    "start": "3646640",
    "end": "3653119"
  },
  {
    "text": "just ask them in the slack channel so i'll hang around there for a while after the session",
    "start": "3653119",
    "end": "3658480"
  },
  {
    "text": "and uh i'll answer them as good as i can and hope you have a continuing great",
    "start": "3658480",
    "end": "3664720"
  },
  {
    "text": "conference and hope to see you soon somewhere on the internet or physically thank you",
    "start": "3664720",
    "end": "3671839"
  }
]