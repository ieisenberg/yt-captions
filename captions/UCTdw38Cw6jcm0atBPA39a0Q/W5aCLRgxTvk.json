[
  {
    "text": "okay did you guys get enough food this week so far yeah that's one thing in DC does well right okay so thanks for",
    "start": "30",
    "end": "8519"
  },
  {
    "text": "coming to my session here on authorization for your web apps and your web api's my name is Brock Allen I guess",
    "start": "8519",
    "end": "18150"
  },
  {
    "text": "you'd call me an application security architect I do consulting and help",
    "start": "18150",
    "end": "23970"
  },
  {
    "text": "companies and customers through a company called Szalai ins and it's Alliance we have a security practice",
    "start": "23970",
    "end": "29910"
  },
  {
    "text": "where we help our customers with their you know identity management architecture getting things like single",
    "start": "29910",
    "end": "37110"
  },
  {
    "text": "sign-on set up and protecting web api's I also work on something called identity",
    "start": "37110",
    "end": "44280"
  },
  {
    "text": "server which is an open source project and framework for helping achieve those",
    "start": "44280",
    "end": "51920"
  },
  {
    "text": "architectures and it helps out with implementing the Open ID Connect and",
    "start": "51920",
    "end": "57210"
  },
  {
    "text": "both two protocols that you would you know set up if you're building that kind of architecture and it's really good",
    "start": "57210",
    "end": "65010"
  },
  {
    "text": "about you know kind of giving you out-of-the-box authentication and protection for your",
    "start": "65010",
    "end": "70140"
  },
  {
    "text": "api's for the most common scenarios but it's also very very flexible such that",
    "start": "70140",
    "end": "75240"
  },
  {
    "text": "if you have some you know odd requirements that it doesn't just kind of do automatically for you there's",
    "start": "75240",
    "end": "80520"
  },
  {
    "text": "enough extensibility in there where you can go and and tweak it and get it to do which what you need to do so for you",
    "start": "80520",
    "end": "88439"
  },
  {
    "text": "know many many years I've been helping customers with these identity solutions and when we go into customers obviously",
    "start": "88439",
    "end": "95670"
  },
  {
    "text": "you know identity server right does the job of the authentication piece and great your users are logged in to your",
    "start": "95670",
    "end": "102329"
  },
  {
    "text": "apps but once you've done the authentication piece right you know who the user is the obvious next thing or the next",
    "start": "102329",
    "end": "108990"
  },
  {
    "text": "problem that you run into or that your application is going to want to know is now what does that user allowed to do",
    "start": "108990",
    "end": "114890"
  },
  {
    "text": "and so you know for a long time customers have been happy with identity",
    "start": "114890",
    "end": "120960"
  },
  {
    "text": "server and they say that was great you know easy to put that in get that going can you got to do the same thing for authorization to write can we just put",
    "start": "120960",
    "end": "127890"
  },
  {
    "text": "some middleware or something in my application and you know you just take care of sir ization so we've been you know",
    "start": "127890",
    "end": "133720"
  },
  {
    "text": "having customers ask us for this for a long long time and you know we've built",
    "start": "133720",
    "end": "139990"
  },
  {
    "text": "custom solutions for customers over the years but we never had anything that kind of productized it if that made",
    "start": "139990",
    "end": "145300"
  },
  {
    "text": "sense kind of like identity server product eise's identity so we've been",
    "start": "145300",
    "end": "151150"
  },
  {
    "text": "wanting to work on this for a very long time and we finally did spent a lot of",
    "start": "151150",
    "end": "156250"
  },
  {
    "text": "time last year thinking about this problem and we worked on a commercial product called policy server to help out",
    "start": "156250",
    "end": "162760"
  },
  {
    "text": "with this now this talks not really about policy server it's about the sort",
    "start": "162760",
    "end": "169150"
  },
  {
    "text": "of the conclusions and the patterns that we learned while building it in how we think you should be or how a lot of",
    "start": "169150",
    "end": "177550"
  },
  {
    "text": "applications probably should be modeling their authorization and so that's pretty much what we're gonna talk about I",
    "start": "177550",
    "end": "183940"
  },
  {
    "text": "should mention that the policy server is basically a combination of myself",
    "start": "183940",
    "end": "190270"
  },
  {
    "text": "Michelle LaRue Bustamante who's also from Szalai ins and Dominic buyer who's",
    "start": "190270",
    "end": "195370"
  },
  {
    "text": "my colleague that I work on with identity server and the three of us have been really really you know thinking",
    "start": "195370",
    "end": "201100"
  },
  {
    "text": "about this problem and so again this talk is basically trying to show you",
    "start": "201100",
    "end": "207160"
  },
  {
    "text": "guys those conclusions that we came to about the right way to model authorization in our applications so",
    "start": "207160",
    "end": "214840"
  },
  {
    "text": "policy server is a product that implements this pattern and it has a bunch of you know kind of standard",
    "start": "214840",
    "end": "220930"
  },
  {
    "text": "commercial features right centralization of authorization and multi-tenant support and administrative UIs for",
    "start": "220930",
    "end": "227799"
  },
  {
    "text": "building policies various other things auditing multi-tenancy stuff like that",
    "start": "227799",
    "end": "234040"
  },
  {
    "text": "you know commercial stuff we also built a open source reference implementation",
    "start": "234040",
    "end": "240280"
  },
  {
    "text": "of the exact same pattern as well so that's actually what I'm gonna be showing you here is all the samples or",
    "start": "240280",
    "end": "245739"
  },
  {
    "text": "on the open source implementation and you know so you'll be able to go and",
    "start": "245739",
    "end": "251079"
  },
  {
    "text": "take the samples and run them and get a feel for the this pattern that were that we're promoting so we spent you know",
    "start": "251079",
    "end": "259090"
  },
  {
    "text": "last year going around to all of our customers and trying to you know find out for them",
    "start": "259090",
    "end": "265010"
  },
  {
    "text": "you know how do you today do authorization we're trying to kind of survey and figure out what we would need to build in to this product and it",
    "start": "265010",
    "end": "272990"
  },
  {
    "text": "actually turns out that you know you go into a company and they're actually doing it many different ways even within",
    "start": "272990",
    "end": "278660"
  },
  {
    "text": "the same project they might be doing authorization a couple different ways so we you know saw all kinds of different",
    "start": "278660",
    "end": "286400"
  },
  {
    "text": "patterns that the customers were using roles and permissions are very very",
    "start": "286400",
    "end": "291740"
  },
  {
    "text": "common there's like the notion of Acts control lists or Ackles that that",
    "start": "291740",
    "end": "298190"
  },
  {
    "text": "companies have kind of invented for their own you know systems ackles are kind of like in Windows when you",
    "start": "298190",
    "end": "304340"
  },
  {
    "text": "right-click a file you get the properties go to the Security tab and you can based on an individual user or",
    "start": "304340",
    "end": "310340"
  },
  {
    "text": "group you can you know add a permission like read or write or deny one so you",
    "start": "310340",
    "end": "315800"
  },
  {
    "text": "know there are lots of different ways of modeling authorization another example is something called exact Amol so that",
    "start": "315800",
    "end": "323780"
  },
  {
    "text": "was another like something we looked at is kind of hey is this a good model to to you know build this this",
    "start": "323780",
    "end": "329600"
  },
  {
    "text": "authorization product and I think when we looked at exactly well if you guys ever used exactly anybody I can actually",
    "start": "329600",
    "end": "336320"
  },
  {
    "text": "barely see you guys but so nobody raised their hand as far as I can tell that shows me how popular it was right it",
    "start": "336320",
    "end": "342680"
  },
  {
    "text": "really fixed the problem what exactly was was a extensible access",
    "start": "342680",
    "end": "348230"
  },
  {
    "text": "control markup language so this was kind of grew out of you know the heyday of XML you know a long time ago when",
    "start": "348230",
    "end": "354590"
  },
  {
    "text": "everyone thought XML would would solve all of our problems and the idea was in exact mo you would model your",
    "start": "354590",
    "end": "362050"
  },
  {
    "text": "authorization rules in this XML dialect right and as you can imagine it was",
    "start": "362050",
    "end": "368120"
  },
  {
    "text": "incredibly you know verbose the problem I think that we ran into and by the way",
    "start": "368120",
    "end": "373490"
  },
  {
    "text": "if you haven't heard authorization is really hard because there are these variety of ways with exact amal they I",
    "start": "373490",
    "end": "381650"
  },
  {
    "text": "think fell into the trap of trying to do too much so when thinking about trying to build a product we're trying to",
    "start": "381650",
    "end": "387770"
  },
  {
    "text": "figure out what we can generalize into a product you know that it can encapsulate",
    "start": "387770",
    "end": "393380"
  },
  {
    "text": "and provide you this functionality and there's a blurry line at which point you cry",
    "start": "393380",
    "end": "398400"
  },
  {
    "text": "so ver and now your authorization logic is really business logic okay and I",
    "start": "398400",
    "end": "404370"
  },
  {
    "text": "think that's the problem that exact Amal sort of the trap they fell into is that they were trying to make you do all of",
    "start": "404370",
    "end": "411000"
  },
  {
    "text": "the authorization in this XML dialect and so you know you would spew out this",
    "start": "411000",
    "end": "416850"
  },
  {
    "text": "page long XML you know 30 lines of XML code to model your problem domain your",
    "start": "416850",
    "end": "424380"
  },
  {
    "text": "business domain of your authorization logic okay and I don't think I want to",
    "start": "424380",
    "end": "430259"
  },
  {
    "text": "model you know my business logic often this weird DSL version of XML especially",
    "start": "430259",
    "end": "436410"
  },
  {
    "text": "when the business itself is written in whatever technology you know say c-sharp",
    "start": "436410",
    "end": "441990"
  },
  {
    "text": "and it might just be that much easier to write that logic in the native programming environment where the",
    "start": "441990",
    "end": "448949"
  },
  {
    "text": "business logic is so maybe five lines of c-sharp rather than exporting a bunch of data sending it over to this exact level",
    "start": "448949",
    "end": "454410"
  },
  {
    "text": "system and having it try to you know run this rules engine I mean you can kind of kind of tell how complicated it is when",
    "start": "454410",
    "end": "460949"
  },
  {
    "text": "actually people were building you know DSL is for exact more like higher order",
    "start": "460949",
    "end": "465960"
  },
  {
    "text": "sort of a tooling to make that smell easier to write okay so fundamentally",
    "start": "465960",
    "end": "472220"
  },
  {
    "text": "that was the thing we were drugged you know struggling with was what's the what can you generalize and put into some",
    "start": "472220",
    "end": "479280"
  },
  {
    "text": "sort of package and make you know give some amount of security or authorization into an application and there's some",
    "start": "479280",
    "end": "486180"
  },
  {
    "text": "line at which you cross where you know that's not really general authorization instead that's actually the business",
    "start": "486180",
    "end": "492000"
  },
  {
    "text": "logic of your application so actually that's kind of the conclusion of this",
    "start": "492000",
    "end": "497699"
  },
  {
    "text": "talk thanks for coming right but we you know we realized there there's several",
    "start": "497699",
    "end": "502710"
  },
  {
    "text": "different layers of authorization and what we decided to model in the product",
    "start": "502710",
    "end": "508380"
  },
  {
    "text": "that we build was basically using roles and permissions right it was kind of the common theme across pretty much every",
    "start": "508380",
    "end": "514289"
  },
  {
    "text": "system that we saw people understood it and it does a good job of being sort of a generalized mechanism for modeling us",
    "start": "514289",
    "end": "520260"
  },
  {
    "text": "so we use roles and permissions a couple different ways because again authorization in a system they're",
    "start": "520260",
    "end": "526770"
  },
  {
    "text": "actually very many different like tiers or levels of where authorization will be checked and this could even be within a",
    "start": "526770",
    "end": "532320"
  },
  {
    "text": "a single request into your web server right so we've kind of realized roles are a really good kind of coarse-grained",
    "start": "532320",
    "end": "539970"
  },
  {
    "text": "mechanism for doing authorization for maybe the entire product that your end user is trying to use right so one of",
    "start": "539970",
    "end": "547350"
  },
  {
    "text": "the customers that we worked with in coming up with these this modeling and in this product is a healthcare related",
    "start": "547350",
    "end": "554190"
  },
  {
    "text": "company and basically they have doctors nurses and patients right that's that's their roles for all the users in their",
    "start": "554190",
    "end": "560850"
  },
  {
    "text": "system so you know there's certain types of apps where you have to be a doctor or nurse to get in and if you're patient",
    "start": "560850",
    "end": "566310"
  },
  {
    "text": "you shouldn't get in ok so that's nice easy top-level kind of coarse-grained you know authorization logic so we",
    "start": "566310",
    "end": "573960"
  },
  {
    "text": "figured rolls made it good make good sense for that then within the application you might be going to different feature areas right maybe a",
    "start": "573960",
    "end": "580020"
  },
  {
    "text": "component within the software or a particular function in the software and you know you could use roles to model",
    "start": "580020",
    "end": "585840"
  },
  {
    "text": "those but we found permissions also are a really good model so permissions do a",
    "start": "585840",
    "end": "591090"
  },
  {
    "text": "decent job of kind of giving you the the notion of if the users allowed to you",
    "start": "591090",
    "end": "597210"
  },
  {
    "text": "know perform some sort of action ok and you know again that's still kind of general you can have an external system",
    "start": "597210",
    "end": "603030"
  },
  {
    "text": "where you configure this roles and permissions you know you map users into roles and then roles are granted access",
    "start": "603030",
    "end": "609090"
  },
  {
    "text": "to permissions and that made sense that felt good when we were building this product but then there's the line that I",
    "start": "609090",
    "end": "616890"
  },
  {
    "text": "talked about where you start to cross where well now the logic that you're talking about in terms of authorization",
    "start": "616890",
    "end": "623010"
  },
  {
    "text": "is very business specific and that's where we decided to stop we said you know what that is you know domain logic",
    "start": "623010",
    "end": "629940"
  },
  {
    "text": "right about you know maybe in the medical system about prescribing",
    "start": "629940",
    "end": "636240"
  },
  {
    "text": "medication right so your can can this user prescribe medication Oh to this patient but maybe this patient actually",
    "start": "636240",
    "end": "642930"
  },
  {
    "text": "has allergies to the medication that feels like business logic to me right if you're building some some medical",
    "start": "642930",
    "end": "648930"
  },
  {
    "text": "software that's the value of your software that's the business that you're in so building that logic outside of",
    "start": "648930",
    "end": "655440"
  },
  {
    "text": "that system itself like I said didn't make sense to me so like I said this is kind of our conclusion about how",
    "start": "655440",
    "end": "661370"
  },
  {
    "text": "authorization at least in this you know generalized system we were trying to build where it should stop and",
    "start": "661370",
    "end": "667089"
  },
  {
    "text": "where the rest of the logic is like I said just your business logic all right",
    "start": "667089",
    "end": "673839"
  },
  {
    "text": "we built this thing and we're actually still working on it and kind of at the end of building it we",
    "start": "673839",
    "end": "680100"
  },
  {
    "text": "we said hey you know what we've just built something called as man okay so",
    "start": "680100",
    "end": "685300"
  },
  {
    "text": "you know no not not the fusilli Jerry Seinfeld sort of as man it's a different",
    "start": "685300",
    "end": "691810"
  },
  {
    "text": "one did you guys remember this tool man from like 10 or 15 years ago that people's gray hair remember right so",
    "start": "691810",
    "end": "697750"
  },
  {
    "text": "this was a tool that Microsoft built and it was actually kind of a nice tool because what it allowed to do is define",
    "start": "697750",
    "end": "703389"
  },
  {
    "text": "a set of roles and you could map users into the roles and then this tool knew about your comm components and at the",
    "start": "703389",
    "end": "710110"
  },
  {
    "text": "class level the interface level or the method level you could then assign what",
    "start": "710110",
    "end": "715630"
  },
  {
    "text": "roles had access or what have what permissions to use those functions and this is a nice tool because it was",
    "start": "715630",
    "end": "722139"
  },
  {
    "text": "visual you know somebody could go and sort of from an administrative standpoint not a developer go and map",
    "start": "722139",
    "end": "728170"
  },
  {
    "text": "users to the right roles or permissions to give them access to the functionality they needed okay so it's actually it's",
    "start": "728170",
    "end": "734529"
  },
  {
    "text": "kind of funny because when we're building us we didn't really kind of think of as man but we then in retrospect realized okay that we model",
    "start": "734529",
    "end": "741160"
  },
  {
    "text": "worked well and so we've kind of reinvented pretty much that all right so",
    "start": "741160",
    "end": "749620"
  },
  {
    "text": "here's the general architecture that we end up having when we are you know",
    "start": "749620",
    "end": "755230"
  },
  {
    "text": "building these identity systems and what you end up with is several different types of applications you know depending",
    "start": "755230",
    "end": "760810"
  },
  {
    "text": "on what you're trying to build you could have server-side web applications JavaScript browser-based",
    "start": "760810",
    "end": "766149"
  },
  {
    "text": "spa style applications you know native applications mobile mobile apps for example and of course",
    "start": "766149",
    "end": "772720"
  },
  {
    "text": "you have users using those apps and so what you typically do is if you want to know who the user is the authentication",
    "start": "772720",
    "end": "779260"
  },
  {
    "text": "then you you know go set up some sort of identity as a service right you set up a",
    "start": "779260",
    "end": "784389"
  },
  {
    "text": "security token service that implements protocols like open ID connect and OAuth and this gives you the benefit of single",
    "start": "784389",
    "end": "790779"
  },
  {
    "text": "sign-on centralized identity management and then all the apps they don't have to",
    "start": "790779",
    "end": "795910"
  },
  {
    "text": "worry about authenticating the sort of outsource it to the identity provider and that also then protects your web",
    "start": "795910",
    "end": "801940"
  },
  {
    "text": "api's that's great so again that's the authentication architecture the trap",
    "start": "801940",
    "end": "808420"
  },
  {
    "text": "that most people fall at fall into or fallen into that I've seen of kind of like the wrong way to go about doing",
    "start": "808420",
    "end": "814600"
  },
  {
    "text": "authorization is that they say you know I've already done all this work and effort of setting up this identity",
    "start": "814600",
    "end": "820180"
  },
  {
    "text": "system centralized that's awesome you know what now I need to do my authorization why don't I make that",
    "start": "820180",
    "end": "826540"
  },
  {
    "text": "thing also do my authorization right somehow Jam authorization information permissions whatever into this identity",
    "start": "826540",
    "end": "833710"
  },
  {
    "text": "system and then that'll take care of both its security right take care of both okay and that's very much the cup",
    "start": "833710",
    "end": "841750"
  },
  {
    "text": "of the few customers that we ended up seeing that that had gone down that path ended up being you know problematic",
    "start": "841750",
    "end": "847900"
  },
  {
    "text": "there are several different issues that come up and I'm going to talk about those here in a second so this is kind",
    "start": "847900",
    "end": "853750"
  },
  {
    "text": "of the the reminder that not to do that right the identity system is not your",
    "start": "853750",
    "end": "860020"
  },
  {
    "text": "authorization system right I mean those semantically mean different things okay so it's generally a bad idea to try to",
    "start": "860020",
    "end": "866530"
  },
  {
    "text": "overload your authentication system with permission data here's an example of",
    "start": "866530",
    "end": "871930"
  },
  {
    "text": "that so the job of your identity system your centralized identity system is to issue tokens and the tokens represent",
    "start": "871930",
    "end": "879190"
  },
  {
    "text": "the identity of the user and these get sent around to your apps and or your api's and in the tokens go claims okay",
    "start": "879190",
    "end": "886840"
  },
  {
    "text": "so we see a token here looks like a JSON web token and in here are several",
    "start": "886840",
    "end": "892450"
  },
  {
    "text": "groupings if you will of claims so one grouping up here is the fact that",
    "start": "892450",
    "end": "897850"
  },
  {
    "text": "we have some sort of protocol and authentication related claims or",
    "start": "897850",
    "end": "903070"
  },
  {
    "text": "information Thanks so who issued this token right that's needed for trust things like that we also have",
    "start": "903070",
    "end": "909550"
  },
  {
    "text": "information about the user metadata about their authentication like when they authenticated and what they use to",
    "start": "909550",
    "end": "916000"
  },
  {
    "text": "authenticate they used a password and then there's also this thing called the audience and the audience indicates",
    "start": "916000",
    "end": "922060"
  },
  {
    "text": "where this token is allowed to be used okay so this actually looks like an Access touken to me that means this is a token",
    "start": "922060",
    "end": "928210"
  },
  {
    "text": "that we used to call api's and this tokens job or can be used at both maybe",
    "start": "928210",
    "end": "933730"
  },
  {
    "text": "api 1 and api - okay great that's totally normal what a token looks like of course we'll also have information",
    "start": "933730",
    "end": "940870"
  },
  {
    "text": "about the user right their identity information so we'll have a subject identifier that's the unique ID of the user and then maybe other attributes",
    "start": "940870",
    "end": "947890"
  },
  {
    "text": "about the user like their name you know their email if you need that things like that so these other claims are where it",
    "start": "947890",
    "end": "954550"
  },
  {
    "text": "starts to get a little blurry okay sometimes I've seen people put permissions into these tokens okay and",
    "start": "954550",
    "end": "960940"
  },
  {
    "text": "that's like very obvious authorization information not identity information right and these permissions may be",
    "start": "960940",
    "end": "967330"
  },
  {
    "text": "things like oh yeah the user can delete data and manage customers and so on and so forth okay so there's a bit of a",
    "start": "967330",
    "end": "974589"
  },
  {
    "text": "problem with that right the problem here is this token can get used at API 1 an",
    "start": "974589",
    "end": "980680"
  },
  {
    "text": "API - ok the permission called delete data which of those is that appropriate",
    "start": "980680",
    "end": "988690"
  },
  {
    "text": "for ok usually applications have the notion of application specific permissions because",
    "start": "988690",
    "end": "995920"
  },
  {
    "text": "maybe they just do different things but now if we're overloading this token that's meant to convey the identity of",
    "start": "995920",
    "end": "1002040"
  },
  {
    "text": "the user with permission data now it's not clear you know which context that",
    "start": "1002040",
    "end": "1007950"
  },
  {
    "text": "permission makes sense okay that's a little bit of a problem",
    "start": "1007950",
    "end": "1013050"
  },
  {
    "text": "another type of thing we have in here are also roles and roles are really kind",
    "start": "1013050",
    "end": "1019950"
  },
  {
    "text": "of in the gray area here when you're talking about identity versus authorization or permissions right so",
    "start": "1019950",
    "end": "1025740"
  },
  {
    "text": "the role of doctor well let me take a step back when I think about roles I kind of think roles in one of two ways",
    "start": "1025740",
    "end": "1031740"
  },
  {
    "text": "role could be used for identity data or it could be used to model permissions or",
    "start": "1031740",
    "end": "1036990"
  },
  {
    "text": "authorization so the roll call doctor to me feels like identity data so for me",
    "start": "1036990",
    "end": "1043020"
  },
  {
    "text": "I'm ok with doctor being in here ok but the role called approver that sounds",
    "start": "1043020",
    "end": "1048900"
  },
  {
    "text": "more like a permission to me right so it sounds you know ambiguous as to what that really means and in what context",
    "start": "1048900",
    "end": "1055140"
  },
  {
    "text": "does that mean so if you have a role if you're using roles and they have like verbs in there chances are you're",
    "start": "1055140",
    "end": "1061419"
  },
  {
    "text": "using that as a permission or an authorization role as opposed to an identity role okay",
    "start": "1061419",
    "end": "1066840"
  },
  {
    "text": "so again these because the token can be used at multiple places it may be",
    "start": "1066840",
    "end": "1072399"
  },
  {
    "text": "ambiguous if these permissions are applicable at those locations what about if you get removed from one of these",
    "start": "1072399",
    "end": "1080019"
  },
  {
    "text": "roles or you have one of these permissions you know denied what's the",
    "start": "1080019",
    "end": "1085210"
  },
  {
    "text": "problem well the the app will still have",
    "start": "1085210",
    "end": "1090220"
  },
  {
    "text": "access to these permissions right it can still use these because these permissions are embedded into the token",
    "start": "1090220",
    "end": "1095320"
  },
  {
    "text": "you have a copy of that data so if you actually end up deleting in the database your role or permission or whatever the",
    "start": "1095320",
    "end": "1100869"
  },
  {
    "text": "token you know it's out of date so the the kind of like solution to this is",
    "start": "1100869",
    "end": "1105940"
  },
  {
    "text": "kind of what Windows does is if you're you know domain admin adds you to a",
    "start": "1105940",
    "end": "1111129"
  },
  {
    "text": "group you have to log out and log in again okay so maybe that's not terribly",
    "start": "1111129",
    "end": "1117070"
  },
  {
    "text": "desirable another problem with this is of course the amount of size or the",
    "start": "1117070",
    "end": "1123279"
  },
  {
    "text": "number of roles or permissions that you might try to put in here right you could have a thousand roles or a thousand",
    "start": "1123279",
    "end": "1128499"
  },
  {
    "text": "permissions or probably both permissions and infinite number of permissions so there is a physical limit to this you",
    "start": "1128499",
    "end": "1134769"
  },
  {
    "text": "know token size because it's being sent over the network right HTTP headers and whatnot so again the various reasons why",
    "start": "1134769",
    "end": "1142299"
  },
  {
    "text": "putting permissions and roles in here are problematic okay so again this is",
    "start": "1142299",
    "end": "1148239"
  },
  {
    "text": "just showing the same thing the idea is that this token is meant to be used on multiple api's all right so yeah here's",
    "start": "1148239",
    "end": "1155350"
  },
  {
    "text": "your your summary of that for authorization what you really want to do",
    "start": "1155350",
    "end": "1160690"
  },
  {
    "text": "is have the token represent the identity of the user and then you pass that into",
    "start": "1160690",
    "end": "1166299"
  },
  {
    "text": "something else to actually figure out your authorization and that's something else is some sort of permissioning",
    "start": "1166299",
    "end": "1173320"
  },
  {
    "text": "system okay so permissions might just be like logic based on the identity or permissions",
    "start": "1173320",
    "end": "1180460"
  },
  {
    "text": "might actually be things like in a database like flags in a database and the thing that that is needed to",
    "start": "1180460",
    "end": "1186309"
  },
  {
    "text": "understand here is that this equation has to have context in what scenario are",
    "start": "1186309",
    "end": "1192279"
  },
  {
    "text": "you trying to do something right is it in API one or API two or you know I can do certain things in the oncology app but",
    "start": "1192279",
    "end": "1198660"
  },
  {
    "text": "not in you know the the other part of the app okay all right so that's",
    "start": "1198660",
    "end": "1203970"
  },
  {
    "text": "fundamentally our thinking on this your tokens your identity should just be identity and permissions should be a",
    "start": "1203970",
    "end": "1210390"
  },
  {
    "text": "separate thing so our proposal is to introduce something else in your ecosystem which",
    "start": "1210390",
    "end": "1217680"
  },
  {
    "text": "allows you to model these permissions and we're calling this a policy provider of some sort it's basically some sort of",
    "start": "1217680",
    "end": "1224160"
  },
  {
    "text": "engine that knows how to take the identity as an input as well as the",
    "start": "1224160",
    "end": "1229350"
  },
  {
    "text": "context of where the identity is trying to be used and then returned to you as a",
    "start": "1229350",
    "end": "1234750"
  },
  {
    "text": "result the set of roles and permissions that you're allowed to to be in okay so",
    "start": "1234750",
    "end": "1240480"
  },
  {
    "text": "here's the kind of workflow that we're thinking here as the user logs in from the identity system you'll of course get",
    "start": "1240480",
    "end": "1247350"
  },
  {
    "text": "their identity in whatever token you have and then as that application wants to go and you know determine the",
    "start": "1247350",
    "end": "1253590"
  },
  {
    "text": "authorization for the user you go and contact some sort of policy system and",
    "start": "1253590",
    "end": "1259680"
  },
  {
    "text": "again this is I'm kind of hand waving here this could be a centralized system or just could be a database lookup right",
    "start": "1259680",
    "end": "1265020"
  },
  {
    "text": "whatever whatever you want that to be the point is it's separate from the identity system it's some engine that",
    "start": "1265020",
    "end": "1270900"
  },
  {
    "text": "will do some sort of mapping for the identity of the user and the context in which the user is trying to perform",
    "start": "1270900",
    "end": "1276900"
  },
  {
    "text": "their operation okay so then based on that information if this is like the front end maybe the",
    "start": "1276900",
    "end": "1282510"
  },
  {
    "text": "front end could then say uh you don't have this permission therefore you know all hi to hide or show a button or menu",
    "start": "1282510",
    "end": "1287970"
  },
  {
    "text": "in the application and then as that application calls out to other parts of your system same thing these all will",
    "start": "1287970",
    "end": "1294690"
  },
  {
    "text": "get the context will get the identity of the user they each have their own context and they will then do their own",
    "start": "1294690",
    "end": "1300330"
  },
  {
    "text": "mapping for that particular system of what the roles and permissions are for the user and then what would be really",
    "start": "1300330",
    "end": "1307530"
  },
  {
    "text": "nice is on top of this some sort of nice administrative tool where your sis at",
    "start": "1307530",
    "end": "1314130"
  },
  {
    "text": "men could go and manage this right your sis at minka go and say hey we have this",
    "start": "1314130",
    "end": "1319200"
  },
  {
    "text": "new hire there a doctor you know to put them in that appropriate role or grant them the appropriate permission",
    "start": "1319200",
    "end": "1325340"
  },
  {
    "text": "okay that's the idea so this is actually what we ended up building we ended up",
    "start": "1325340",
    "end": "1332389"
  },
  {
    "text": "building the this policy server product it has internally this engine that does",
    "start": "1332389",
    "end": "1338659"
  },
  {
    "text": "this mapping that's context to where based on the identity of the user and the application that they are trying to",
    "start": "1338659",
    "end": "1343820"
  },
  {
    "text": "access and then what we have are a few Web API s1 Web API is a management web",
    "start": "1343820",
    "end": "1349580"
  },
  {
    "text": "api so of course you could build some sort of management tooling management UI to go manage these policies these",
    "start": "1349580",
    "end": "1355129"
  },
  {
    "text": "mappings of users the other thing about the API is that maybe if you built your",
    "start": "1355129",
    "end": "1360139"
  },
  {
    "text": "own your own custom user management workflow or you already have your own",
    "start": "1360139",
    "end": "1365990"
  },
  {
    "text": "user management tools then you could simply tap into the API to augment the underlying policy system and then what",
    "start": "1365990",
    "end": "1372619"
  },
  {
    "text": "we have is another API which is the client API which is what your app or API would connect to to map the user into",
    "start": "1372619",
    "end": "1380330"
  },
  {
    "text": "their roles and permissions so the parameter that we pass along here is we're gonna pass along the claims for",
    "start": "1380330",
    "end": "1386090"
  },
  {
    "text": "the user and which application cares you know which which context we're in and you'll get back these roles and policies",
    "start": "1386090",
    "end": "1392629"
  },
  {
    "text": "roles and permissions excuse me okay that's the high level the high level",
    "start": "1392629",
    "end": "1398809"
  },
  {
    "text": "idea now this probably you're like thinking this is not rocket science right we'll probably done this yourselves or done this ourselves you",
    "start": "1398809",
    "end": "1405590"
  },
  {
    "text": "know but that's fundamentally the the problem that we saw is we went to our customers and saw that they had already",
    "start": "1405590",
    "end": "1411320"
  },
  {
    "text": "driven this and written their own version and then some other project within the same company Oh they'd",
    "start": "1411320",
    "end": "1416539"
  },
  {
    "text": "written their own kind of flavor of this as well so that's the motivation behind sort of standardizing this so from a",
    "start": "1416539",
    "end": "1424369"
  },
  {
    "text": "programming model and a modeling of authorization that's fundamentally what we have is now this this model where the",
    "start": "1424369",
    "end": "1433039"
  },
  {
    "text": "user comes in we're gonna map them to roles and permissions based on the app or the context that they are accessing",
    "start": "1433039",
    "end": "1440080"
  },
  {
    "text": "so how can your application actually now tap into this and now once you know the roles and permissions how do you",
    "start": "1440080",
    "end": "1446179"
  },
  {
    "text": "actually enforce them within the application so there are a couple things we can do here so I have some code to",
    "start": "1446179",
    "end": "1452990"
  },
  {
    "text": "illustrate this and first and foremost what I have is if your application wants",
    "start": "1452990",
    "end": "1458629"
  },
  {
    "text": "to know you know the roles and permissions as the user gets mapped to then you need to have access to this engine of some sort",
    "start": "1458629",
    "end": "1465350"
  },
  {
    "text": "so what we have here oops actually first is a application where I",
    "start": "1465350",
    "end": "1472010"
  },
  {
    "text": "log the user in that was actually a pretty important important feature to us is that we wanted this policy system to",
    "start": "1472010",
    "end": "1479780"
  },
  {
    "text": "be decoupled from the identity system obviously for the architectural reasons I mentioned but we didn't want to force",
    "start": "1479780",
    "end": "1485750"
  },
  {
    "text": "you to use identity server for example so this policy system and this programming model obviously couldn't",
    "start": "1485750",
    "end": "1490880"
  },
  {
    "text": "work for anything if you're using Azure ad or something else as well so what I",
    "start": "1490880",
    "end": "1496190"
  },
  {
    "text": "have here is just a really simple login page to model login the user so you know if you're type in the username Alice",
    "start": "1496190",
    "end": "1502460"
  },
  {
    "text": "then hey you're Atlas and so what we're doing is when we log Alice in will see that Alice has a unique ID of one that's",
    "start": "1502460",
    "end": "1508520"
  },
  {
    "text": "the subject claim sub that's Alice is a user ID if you will right Bob is gonna",
    "start": "1508520",
    "end": "1513980"
  },
  {
    "text": "be I guess user ID 11 and we have a third type of user who is user ID 21 I",
    "start": "1513980",
    "end": "1520910"
  },
  {
    "text": "guess if you're not Alice or Bob you're somebody else and the idea I think is this person is going to be end up being",
    "start": "1520910",
    "end": "1526160"
  },
  {
    "text": "a patient in our hospital system so I think Alice ultimately I'll map it to a doctor and Bob will be mapped to a nurse",
    "start": "1526160",
    "end": "1533710"
  },
  {
    "text": "okay so I'll run this real quick hit secure login as Alice great I'm logged in I",
    "start": "1533710",
    "end": "1541160"
  },
  {
    "text": "have two claims subject and name so now this application wants to know okay for",
    "start": "1541160",
    "end": "1546710"
  },
  {
    "text": "this application for the you know this is going to be my emergency room application what are the users roles and",
    "start": "1546710",
    "end": "1553040"
  },
  {
    "text": "permissions so to model that in the you know reference implementation that I have here what we have is the policy",
    "start": "1553040",
    "end": "1560420"
  },
  {
    "text": "provider is just in memory and it is driven in terms of the mapping rules based on some configuration out of our",
    "start": "1560420",
    "end": "1568100"
  },
  {
    "text": "JSON file so what we have is just some really simple jason that allows us to to",
    "start": "1568100",
    "end": "1575150"
  },
  {
    "text": "define what roles we are gonna have for this application so this particular application has a doctor role and it allows me to",
    "start": "1575150",
    "end": "1581840"
  },
  {
    "text": "map which subject identifier to them okay and we have a nurse for with some subject identifiers and we have a",
    "start": "1581840",
    "end": "1588260"
  },
  {
    "text": "patient as well so in the the way we've done the simple implementation Frank's implementation here you can map",
    "start": "1588260",
    "end": "1594529"
  },
  {
    "text": "users based on their user ID or you can map users based on their identity roles",
    "start": "1594529",
    "end": "1599809"
  },
  {
    "text": "so remember I was saying we made the distinction between roles being used for identity and roles being used for",
    "start": "1599809",
    "end": "1606109"
  },
  {
    "text": "authorization or permissions so the assumption here is that if the user logs",
    "start": "1606109",
    "end": "1611210"
  },
  {
    "text": "in and the identity system says they're a surgeon okay that's fine the centralized you know Active Directory",
    "start": "1611210",
    "end": "1616789"
  },
  {
    "text": "knows that Alice is a surgeon great maybe that's a group though she's in that identity information will come to",
    "start": "1616789",
    "end": "1622340"
  },
  {
    "text": "this application this particular application maybe it's the emergency room application it doesn't care if",
    "start": "1622340",
    "end": "1627649"
  },
  {
    "text": "you're a surgeon or an oncologist or whatever we just want a model users in terms of",
    "start": "1627649",
    "end": "1633169"
  },
  {
    "text": "these three roles doctor nurse and patient so the role doctor nurse and patient in this particular application",
    "start": "1633169",
    "end": "1639499"
  },
  {
    "text": "those are application specific roles okay and that's how the app is decided to model its authorization so we're",
    "start": "1639499",
    "end": "1648440"
  },
  {
    "text": "mapping identity data using identity data whether it's your unique ID or",
    "start": "1648440",
    "end": "1653509"
  },
  {
    "text": "maybe your identity roles to an application specific role then once you",
    "start": "1653509",
    "end": "1660259"
  },
  {
    "text": "have these application specific roles we have also the ability to model permissions so the permissions are the",
    "start": "1660259",
    "end": "1666590"
  },
  {
    "text": "operations that a user might be performing in this application and then as you can see it's a really simple mapping oh you are gonna map to this",
    "start": "1666590",
    "end": "1673129"
  },
  {
    "text": "application specific role therefore you get this application specific permission",
    "start": "1673129",
    "end": "1678820"
  },
  {
    "text": "so how does your app at runtime now actually run the mapping okay so that's",
    "start": "1678820",
    "end": "1685309"
  },
  {
    "text": "the first thing that we have here is you need some way to be able to invoke this mapping engine and what we have is the",
    "start": "1685309",
    "end": "1694190"
  },
  {
    "text": "notion of a service that can go into the dependency injection system for you to",
    "start": "1694190",
    "end": "1700809"
  },
  {
    "text": "trigger that so what I have is a policy server client interface this will go",
    "start": "1700809",
    "end": "1708200"
  },
  {
    "text": "into the DI system so I gotta go configure that in a second but the idea is that your page if you're running",
    "start": "1708200",
    "end": "1713509"
  },
  {
    "text": "along you just want to know and you say hey I want to pass this user in wherever I came from my authentication and I want",
    "start": "1713509",
    "end": "1720109"
  },
  {
    "text": "to get back the the authorization results for them and you know again it's not rock",
    "start": "1720109",
    "end": "1725660"
  },
  {
    "text": "science here we're just returning a list of roles and permissions okay so that's one way to do it so let me go down here",
    "start": "1725660",
    "end": "1731620"
  },
  {
    "text": "go into my application call my client",
    "start": "1731620",
    "end": "1737870"
  },
  {
    "text": "I'm gonna say evaluate a sync and then I'll pass in the user object that will have been populated from the in this",
    "start": "1737870",
    "end": "1743750"
  },
  {
    "text": "case the cookie come into my application and I actually will just show that then in my view okay",
    "start": "1743750",
    "end": "1750860"
  },
  {
    "text": "but again the result has like I said the roles and the permissions so you could",
    "start": "1750860",
    "end": "1757340"
  },
  {
    "text": "simply take these two collections look for the one that you need for the context that you're in in this particular bit of code and then do your",
    "start": "1757340",
    "end": "1763580"
  },
  {
    "text": "you know allowed or denied okay so for this thing to work here I need to put it",
    "start": "1763580",
    "end": "1769340"
  },
  {
    "text": "into the DI system so I can go to my startup code and what I have is an",
    "start": "1769340",
    "end": "1775070"
  },
  {
    "text": "extension method here that will populate the policy server client service into di",
    "start": "1775070",
    "end": "1780490"
  },
  {
    "text": "loaded from the data from my configuration file okay so I run this",
    "start": "1780490",
    "end": "1787210"
  },
  {
    "text": "assuming Visual Studio complies and it's",
    "start": "1789460",
    "end": "1794720"
  },
  {
    "text": "not you guys seen that new feature in Visual Studio the one where it locks all your files and then you can't actually",
    "start": "1794720",
    "end": "1800240"
  },
  {
    "text": "rerun yeah you gotta wait no and then",
    "start": "1800240",
    "end": "1805550"
  },
  {
    "text": "start again okay networked so again I think I'm logged in as Alice user ID one",
    "start": "1805550",
    "end": "1811520"
  },
  {
    "text": "if I go to my secure page yeah look at",
    "start": "1811520",
    "end": "1816590"
  },
  {
    "text": "that so what we are now doing is this is the data the claims that are coming from your cookie we take those and we invoke",
    "start": "1816590",
    "end": "1823010"
  },
  {
    "text": "the policy server engine and we get back our app specific roles and permissions okay real simple right okay so that's",
    "start": "1823010",
    "end": "1835160"
  },
  {
    "text": "one way to tap into the policy system is you just call it you get back these two lists and then your application logic",
    "start": "1835160",
    "end": "1841310"
  },
  {
    "text": "you know does whatever it needs to based on that okay another very common pattern though the people would like so this is",
    "start": "1841310",
    "end": "1847400"
  },
  {
    "text": "a different way to react from the or have your application you know respond",
    "start": "1847400",
    "end": "1853760"
  },
  {
    "text": "to the authorization information is we can use the good old authorized attribute okay so the authorized",
    "start": "1853760",
    "end": "1859740"
  },
  {
    "text": "right with rolls equals people use this all the time all right this is kind of your coarse-grained role based authorization so how do we do that well",
    "start": "1859740",
    "end": "1868140"
  },
  {
    "text": "for this to work this authorized attribute is calling the is in roll",
    "start": "1868140",
    "end": "1873750"
  },
  {
    "text": "method for the current user in the application right well does my current user have a claim for the roll no write",
    "start": "1873750",
    "end": "1883559"
  },
  {
    "text": "the code down here this is just showing what came back from the mapping right but for the isn't roll check to work my",
    "start": "1883559",
    "end": "1889049"
  },
  {
    "text": "claims off of the current user object have to have a roll so what I kind of need to do is take the results of this",
    "start": "1889049",
    "end": "1896520"
  },
  {
    "text": "and populate the claims on the current user for the current request okay so if",
    "start": "1896520",
    "end": "1903149"
  },
  {
    "text": "you guys were my workshop the other day we talked about the concept of claims transformation right the cookie only has",
    "start": "1903149",
    "end": "1908850"
  },
  {
    "text": "a couple claims you're now running the policy engine mapping those to a bunch of new claims and merging them together",
    "start": "1908850",
    "end": "1914220"
  },
  {
    "text": "and then for the duration of this request you have them all kind of in one place so for this to work we need some",
    "start": "1914220",
    "end": "1920880"
  },
  {
    "text": "sort of claims transformation and that's another little widget we've added here",
    "start": "1920880",
    "end": "1925950"
  },
  {
    "text": "into our our little library okay so what we can do is do a use policy server claims transformation and it will go off",
    "start": "1925950",
    "end": "1934500"
  },
  {
    "text": "and do that mapping so if I rerun this now we should see then on the secure",
    "start": "1934500",
    "end": "1945210"
  },
  {
    "text": "page yeah look at this so now we have the original two claims that came from",
    "start": "1945210",
    "end": "1951330"
  },
  {
    "text": "the cookie and what we're doing is we're running the policy engine mapping to roles and permissions and then we're",
    "start": "1951330",
    "end": "1957630"
  },
  {
    "text": "actually creating a new identity and merging into the principle if you guys are know are familiar with the identity",
    "start": "1957630",
    "end": "1965130"
  },
  {
    "text": "and I principle interfaces and the claims identity and claims principle that a principal is the user object it",
    "start": "1965130",
    "end": "1970830"
  },
  {
    "text": "can have multiple identities so we're just putting in two two different identities one from the original cookie",
    "start": "1970830",
    "end": "1976380"
  },
  {
    "text": "and a new one that we created coming from this claims transformation so now",
    "start": "1976380",
    "end": "1981659"
  },
  {
    "text": "that we do have a role of doctor I probably should have done this a second ago I should be able to go into my app",
    "start": "1981659",
    "end": "1988230"
  },
  {
    "text": "and now do the you know nurses only action for example okay and I don't want to",
    "start": "1988230",
    "end": "1994600"
  },
  {
    "text": "leave that comment uncommented okay cool so now I should be able to do the nurses",
    "start": "1994600",
    "end": "2001080"
  },
  {
    "text": "only action and actually because I'm a",
    "start": "2001080",
    "end": "2008639"
  },
  {
    "text": "doctor right now I don't think this will work yeah exactly we got access tonight but if we log out log back in and say",
    "start": "2008639",
    "end": "2015600"
  },
  {
    "text": "Bob okay Bob different identity bob has different set of roles and permissions",
    "start": "2015600",
    "end": "2020730"
  },
  {
    "text": "then great that one works okay so that's",
    "start": "2020730",
    "end": "2026730"
  },
  {
    "text": "just a different way to capitalize upon this mapping layer this abstraction that",
    "start": "2026730",
    "end": "2032039"
  },
  {
    "text": "we're setting up to map the user to roles and permissions specific to this application another approach for",
    "start": "2032039",
    "end": "2038580"
  },
  {
    "text": "utilizing the authorization is to actually tap into something more sophisticated so asp.net core has a",
    "start": "2038580",
    "end": "2045299"
  },
  {
    "text": "brand new authorization system and unfortunately it's called the policy",
    "start": "2045299",
    "end": "2050490"
  },
  {
    "text": "based authorization system so we now have the term being used in two contexts",
    "start": "2050490",
    "end": "2056010"
  },
  {
    "text": "here so my apologies for the confusion as we all know naming is hard so the idea is that the the mapping layer that",
    "start": "2056010",
    "end": "2062730"
  },
  {
    "text": "we have in the JSON file that's the policy server feature and what we want to do then is take the results of those",
    "start": "2062730",
    "end": "2069480"
  },
  {
    "text": "policies the the roles and permissions and run it against this more sophisticated policy based authorization",
    "start": "2069480",
    "end": "2075510"
  },
  {
    "text": "what makes the policy based authorization system a little bit more appealing than the role based is that it",
    "start": "2075510",
    "end": "2082530"
  },
  {
    "text": "gives you a level of indirection it gives you a place to put some code that has your rules if the users allowed or",
    "start": "2082530",
    "end": "2088319"
  },
  {
    "text": "denied and you put that in a centralized place rather than you putting nurse and",
    "start": "2088319",
    "end": "2094050"
  },
  {
    "text": "doctor and then oh I also have to put the nurse and doctor string into the UI and any other place I need to run this",
    "start": "2094050",
    "end": "2099569"
  },
  {
    "text": "rule you're duplicating that sort of logic here the policy based system form",
    "start": "2099569",
    "end": "2104640"
  },
  {
    "text": "asp net core allows you to build your logic by defining what's called the policy right and so what we can do is we",
    "start": "2104640",
    "end": "2112290"
  },
  {
    "text": "can build a policy in this case prescribe medication and what I want this policy to do is first check to see",
    "start": "2112290",
    "end": "2119160"
  },
  {
    "text": "if the users authenticated right you shouldn't be prescribing medication if we don't know who you are and then second of all we're now",
    "start": "2119160",
    "end": "2125060"
  },
  {
    "text": "depending on a claim that was produced by the user mapping layer right so that's the policy server or Jason",
    "start": "2125060",
    "end": "2131630"
  },
  {
    "text": "mapping that I talked about okay so we're merging an asp net core policy with the results of the policy",
    "start": "2131630",
    "end": "2137870"
  },
  {
    "text": "server mapping so i can build this policy and then the beauty here is that down on the bottom right if you can see",
    "start": "2137870",
    "end": "2143690"
  },
  {
    "text": "that is that the authorized attribute allows you to just put the name of the",
    "start": "2143690",
    "end": "2149300"
  },
  {
    "text": "asp.net core policy and it will basically give you that level of indirection to run that authorization so",
    "start": "2149300",
    "end": "2157730"
  },
  {
    "text": "i think i have this code somewhere in here yeah here we go so I have a perform",
    "start": "2157730",
    "end": "2164390"
  },
  {
    "text": "surgery let's call it well I'll just",
    "start": "2164390",
    "end": "2169730"
  },
  {
    "text": "leave it there so perform surgery asp net core policy and it is triggered off",
    "start": "2169730",
    "end": "2175280"
  },
  {
    "text": "of the perform surgery mapping that had come from my you know my my policies",
    "start": "2175280",
    "end": "2183080"
  },
  {
    "text": "here in the jason file okay so now that I have a perform surgery I can go back",
    "start": "2183080",
    "end": "2188480"
  },
  {
    "text": "to my home controller and now here we go we have another action method that",
    "start": "2188480",
    "end": "2194960"
  },
  {
    "text": "presumably I think only doctors can do okay so if I run this",
    "start": "2194960",
    "end": "2202840"
  },
  {
    "text": "secur let's see let's do Bob first okay if I scroll down Bob should not be able",
    "start": "2207299",
    "end": "2212920"
  },
  {
    "text": "to perform surgery okay make sense come back in Alice right and Alice should be",
    "start": "2212920",
    "end": "2221859"
  },
  {
    "text": "good to go there we go okay all right so",
    "start": "2221859",
    "end": "2226900"
  },
  {
    "text": "that's just a quick look at the asp.net core policy system like I said it's kind of nice you have a nice little place to",
    "start": "2226900",
    "end": "2232599"
  },
  {
    "text": "put your logic about the user centralized one place and then you can just reference it from your your",
    "start": "2232599",
    "end": "2238420"
  },
  {
    "text": "application code another way to reference this from the application code is obviously we can use the authorized",
    "start": "2238420",
    "end": "2244509"
  },
  {
    "text": "attribute one of the complaints though is that the authorized attribute doesn't help you with the unit testing so if",
    "start": "2244509",
    "end": "2250329"
  },
  {
    "text": "this code right here needs to be unit testable you need to you know it would be nice to be to go in and and you know",
    "start": "2250329",
    "end": "2257289"
  },
  {
    "text": "write your unit test and pick up this logic so one more thing you can do actually I won't bother writing the code",
    "start": "2257289",
    "end": "2262450"
  },
  {
    "text": "it's in the slides is that you can actually inject a service called the authorization service this is coming",
    "start": "2262450",
    "end": "2267970"
  },
  {
    "text": "from asp.net core and this asp.net core service authorization service allows you",
    "start": "2267970",
    "end": "2274150"
  },
  {
    "text": "to programmatically check with this authorized call and you can say authorize the user and you say the name",
    "start": "2274150",
    "end": "2279729"
  },
  {
    "text": "of the policy okay so again the string on the right there prescribed medication is basically then",
    "start": "2279729",
    "end": "2285430"
  },
  {
    "text": "going finding the policy up on the top left which is then checking a permission which we mapped from our our JSON file",
    "start": "2285430",
    "end": "2292469"
  },
  {
    "text": "okay the nice thing about now that you can do this programmatically is that you could also then not only enforce your",
    "start": "2292469",
    "end": "2300160"
  },
  {
    "text": "authorization logic at the action method that's really performing the action but you can also then leverage this other",
    "start": "2300160",
    "end": "2308140"
  },
  {
    "text": "places in your application and the UI is probably a good obvious choice here because you about you know if the user",
    "start": "2308140",
    "end": "2314079"
  },
  {
    "text": "is not allowed to perform the action why don't we hide the button in the first place okay or the menu so this",
    "start": "2314079",
    "end": "2321130"
  },
  {
    "text": "particular style of doing this is you know debatable whether or no it's the best way but this is a you can do",
    "start": "2321130",
    "end": "2327789"
  },
  {
    "text": "dependency injection in your razor views right so you can inject the exact same interface I just showed you or probably",
    "start": "2327789",
    "end": "2334960"
  },
  {
    "text": "if you were really trying to do this in a cleaner way you would inject this still into your control and then when you're building up your",
    "start": "2334960",
    "end": "2341280"
  },
  {
    "text": "view model just have a flag that says to them to the raiser page whether the button should be you know shown or",
    "start": "2341280",
    "end": "2347190"
  },
  {
    "text": "hidden okay so what I've shown you is",
    "start": "2347190",
    "end": "2355530"
  },
  {
    "text": "kind of a nice little you know combining of the two patterns the policy server mapping engine to give you roles and",
    "start": "2355530",
    "end": "2363060"
  },
  {
    "text": "permissions and then tapping into the asp net core policy system to get the",
    "start": "2363060",
    "end": "2368220"
  },
  {
    "text": "benefit of you know using the attribute or using the authorization service okay",
    "start": "2368220",
    "end": "2373340"
  },
  {
    "text": "the only downside about doing that this way is I think in my JSON file I had like four or five permissions but for",
    "start": "2373340",
    "end": "2380880"
  },
  {
    "text": "anything real right you could probably imagine 20 or more permissions and I don't want to have to come in here and",
    "start": "2380880",
    "end": "2386490"
  },
  {
    "text": "define a policy in the asp.net core policy system for every one of my permissions that's you know in my",
    "start": "2386490",
    "end": "2393240"
  },
  {
    "text": "permission system so it turns out that the authorization system itself from",
    "start": "2393240",
    "end": "2398910"
  },
  {
    "text": "Microsoft is extensible they actually have a policy provider I think is the",
    "start": "2398910",
    "end": "2404100"
  },
  {
    "text": "name of it and what happens is at runtime whenever your application like",
    "start": "2404100",
    "end": "2409140"
  },
  {
    "text": "for example down here when we trigger the pot the asp net core policy with",
    "start": "2409140",
    "end": "2416100"
  },
  {
    "text": "that string in this case perform surgery what happens is the asp net core system",
    "start": "2416100",
    "end": "2421290"
  },
  {
    "text": "goes and looks for the service and di that will find the policy and by default",
    "start": "2421290",
    "end": "2427140"
  },
  {
    "text": "it finds the policies based on the the static mapping i've done here well that interface that policy provider",
    "start": "2427140",
    "end": "2433410"
  },
  {
    "text": "itself itself is replaceable in the DI system so what you can do is instead of",
    "start": "2433410",
    "end": "2438540"
  },
  {
    "text": "using the built in policy definitions you can implement it yourself or you can",
    "start": "2438540",
    "end": "2444060"
  },
  {
    "text": "leverage the one that we've done that will implement it for you so what we have is off of our di system where we",
    "start": "2444060",
    "end": "2451580"
  },
  {
    "text": "configure the fact that we want to use policy server we then have a little",
    "start": "2451580",
    "end": "2457020"
  },
  {
    "text": "authorization permission policy so this registers our custom policy provider and",
    "start": "2457020",
    "end": "2463260"
  },
  {
    "text": "now our custom policy provider what happens is when the policy is being",
    "start": "2463260",
    "end": "2469170"
  },
  {
    "text": "requested ok we go and basically look for matching permission name from the claims",
    "start": "2469170",
    "end": "2476670"
  },
  {
    "text": "okay and also we do this not by looking at the user claims the in-memory user",
    "start": "2476670",
    "end": "2482640"
  },
  {
    "text": "claims instead we do this by actually calling directly into the the policy",
    "start": "2482640",
    "end": "2488430"
  },
  {
    "text": "server client interface which is the same one I showed you here that you could call directly what that basically",
    "start": "2488430",
    "end": "2494430"
  },
  {
    "text": "means is that it's actually calling this is still running I don't think it is",
    "start": "2494430",
    "end": "2501049"
  },
  {
    "text": "that means I don't need to do the claims transformation anymore okay so actually for this to work I can even",
    "start": "2501049",
    "end": "2508710"
  },
  {
    "text": "take the claims transformation out okay so I'm just showing you different styles about how you can you know actually",
    "start": "2508710",
    "end": "2515130"
  },
  {
    "text": "enforce this authorization so you know maybe one you want to trigger off the user the other you want to do this",
    "start": "2515130",
    "end": "2521279"
  },
  {
    "text": "policy system so if I ruin that correctly just double check that I didn't miss anything so I took up the",
    "start": "2521279",
    "end": "2527789"
  },
  {
    "text": "claims transformation I wired up the policy provider and now I got rid of the the one I statically did the mapping for",
    "start": "2527789",
    "end": "2534180"
  },
  {
    "text": "I come back in here and I'm still Alice so I should still be able to perform",
    "start": "2534180",
    "end": "2539910"
  },
  {
    "text": "surgery yep and again checking Bob here",
    "start": "2539910",
    "end": "2546500"
  },
  {
    "text": "yeah good all right okay",
    "start": "2548210",
    "end": "2555210"
  },
  {
    "text": "one last idea one last technique I suppose for tapping into the asp.net",
    "start": "2555210",
    "end": "2560970"
  },
  {
    "text": "core policy system is they actually provide a mechanism for being a little",
    "start": "2560970",
    "end": "2567450"
  },
  {
    "text": "bit more sophisticated with your your asp net core policies so let me go back here so this policy that we defined in",
    "start": "2567450",
    "end": "2573150"
  },
  {
    "text": "the top left this asp net core policy the main input into the logic is the",
    "start": "2573150",
    "end": "2579300"
  },
  {
    "text": "user so the logic only is looking at what claims the user has to decide if",
    "start": "2579300",
    "end": "2585150"
  },
  {
    "text": "you are allowed or denied to prescribe medication that may be fine for some logic but in other scenarios you might",
    "start": "2585150",
    "end": "2592260"
  },
  {
    "text": "actually need more information okay so what asp net core provides is the",
    "start": "2592260",
    "end": "2598020"
  },
  {
    "text": "ability to create what's called a custom requirement and a custom requirement allows you to model additional data that",
    "start": "2598020",
    "end": "2605760"
  },
  {
    "text": "is an input into your authorization logic so in this case we have an example of a medication requirement and so this",
    "start": "2605760",
    "end": "2613380"
  },
  {
    "text": "is where what we want to do is you know we said oh maybe nurses or doctors can",
    "start": "2613380",
    "end": "2618840"
  },
  {
    "text": "prescribe medication but maybe depending on the type of medication and the amount of medication that's not good enough",
    "start": "2618840",
    "end": "2625410"
  },
  {
    "text": "okay so maybe for you know non you know aspirin or something a nurse can",
    "start": "2625410",
    "end": "2630900"
  },
  {
    "text": "prescribe that but for morphine the doctor has to prescribe it something like that okay so s peanut core actually has a way to",
    "start": "2630900",
    "end": "2637710"
  },
  {
    "text": "do this you create this class called a requirement it models your dynamic data",
    "start": "2637710",
    "end": "2642990"
  },
  {
    "text": "that needs to be this input into the authorization you create what's called a handler and this handler is an",
    "start": "2642990",
    "end": "2650070"
  },
  {
    "text": "authorization Handler of your custom requirement class that's up here in the top right and then there's a method in",
    "start": "2650070",
    "end": "2657180"
  },
  {
    "text": "the middle here that you have to implement it called handle requirement async okay and what gets handed in to",
    "start": "2657180",
    "end": "2663180"
  },
  {
    "text": "this method is the user and then that requirement object and that requirement object is what has the medication and",
    "start": "2663180",
    "end": "2669570"
  },
  {
    "text": "the amount so now you have the user and that additional data and you can go run",
    "start": "2669570",
    "end": "2674580"
  },
  {
    "text": "whatever logic you want to so now this is actually an interesting combination of we're kind of beginning on the",
    "start": "2674580",
    "end": "2680820"
  },
  {
    "text": "borderline of using the role and permission mapping from the JSON file but then",
    "start": "2680820",
    "end": "2686609"
  },
  {
    "text": "sprinkling in some additional application logic here we're kind of mixing the two okay so in this case I",
    "start": "2686609",
    "end": "2693900"
  },
  {
    "text": "don't know what do we have here if you have the permission to prescribe the medication great and it's a low amount",
    "start": "2693900",
    "end": "2699930"
  },
  {
    "text": "fine you're good but if it's a high amount you need to be in this case a doctor for example okay and I guess if",
    "start": "2699930",
    "end": "2707640"
  },
  {
    "text": "the medication is a placebo then yeah sure you can prescribe that too okay so that's the idea now the way this",
    "start": "2707640",
    "end": "2714119"
  },
  {
    "text": "actually gets triggered in the application is one this class has to go into the dependency injection system",
    "start": "2714119",
    "end": "2720510"
  },
  {
    "text": "okay so this goes into the DI system and then from your application you can only",
    "start": "2720510",
    "end": "2726750"
  },
  {
    "text": "trigger these programmatically right you can't use the declarative authorized attribute because you need to create the",
    "start": "2726750",
    "end": "2732750"
  },
  {
    "text": "the requirements object on the fly so you would in your action method where we're prescribing medication create the",
    "start": "2732750",
    "end": "2738960"
  },
  {
    "text": "requirement object call in to the authorized method if it comes back and says you're good to go the method",
    "start": "2738960",
    "end": "2744210"
  },
  {
    "text": "succeeds if not you tell the user to go away okay and you can either use challenge or forbid those are the two",
    "start": "2744210",
    "end": "2750540"
  },
  {
    "text": "built-in methods in asp net core so that's an example of kind of mixing the",
    "start": "2750540",
    "end": "2755849"
  },
  {
    "text": "two the two styles if you will okay I think what's really interesting about",
    "start": "2755849",
    "end": "2761460"
  },
  {
    "text": "this is that if you notice how we actually implemented this how did I know if you could just do the kind of the",
    "start": "2761460",
    "end": "2768000"
  },
  {
    "text": "coarse-grained prescribed medication check well if you look because this class is in the DI system itself can",
    "start": "2768000",
    "end": "2775680"
  },
  {
    "text": "take dependencies on other services from the DI system so you can actually take a dependency on the policy server client",
    "start": "2775680",
    "end": "2782400"
  },
  {
    "text": "interface and call into it to do the mapping or again you could may even have",
    "start": "2782400",
    "end": "2787589"
  },
  {
    "text": "other stuff in the database right other Flags permissions columns in the",
    "start": "2787589",
    "end": "2792780"
  },
  {
    "text": "database that have you know yes as a knows and says whether or not the user is allowed to so kind of an interesting",
    "start": "2792780",
    "end": "2800070"
  },
  {
    "text": "mix of the two any more than this though",
    "start": "2800070",
    "end": "2805950"
  },
  {
    "text": "I mean even this I'm actually a little on the fence about personally because now we're really starting to blend some",
    "start": "2805950",
    "end": "2812130"
  },
  {
    "text": "business logic in here and this is where like I said that we decided deliberately",
    "start": "2812130",
    "end": "2817230"
  },
  {
    "text": "policy server to stop we realized that you know would it make sense to",
    "start": "2817230",
    "end": "2823290"
  },
  {
    "text": "externalize this type of logic would it make sense to take this type of logic and go put it in some other system in",
    "start": "2823290",
    "end": "2828720"
  },
  {
    "text": "some XML file that have these rules yeah I don't know because then what would have to happen is if at runtime when",
    "start": "2828720",
    "end": "2835290"
  },
  {
    "text": "you're invoking the business logic to prescribe medication then you have to take all the data of the context not",
    "start": "2835290",
    "end": "2841800"
  },
  {
    "text": "only the user but now the amount and the medication and maybe even some more data out of your database export all of that",
    "start": "2841800",
    "end": "2848700"
  },
  {
    "text": "to this other system and have it run the logic to produce a yes or a No okay and that's why we thought that in building a",
    "start": "2848700",
    "end": "2857580"
  },
  {
    "text": "product or building any kind of framework to satisfy this pattern I think there's a point at which the",
    "start": "2857580",
    "end": "2863040"
  },
  {
    "text": "framework can generalize only so much and anything beyond that is probably a",
    "start": "2863040",
    "end": "2868320"
  },
  {
    "text": "mistake and it makes more sense to put that kind of logic like I said right here in your business code okay one last",
    "start": "2868320",
    "end": "2877770"
  },
  {
    "text": "thing just to mention a very common pattern that I think tends to be a nice",
    "start": "2877770",
    "end": "2882960"
  },
  {
    "text": "thing to do is making sure that if the user is not authenticated at all they're",
    "start": "2882960",
    "end": "2890130"
  },
  {
    "text": "not allowed to get into your application so in MVC in asp net core you can set up",
    "start": "2890130",
    "end": "2895800"
  },
  {
    "text": "a global policy asp.net core policy where you basically require that the",
    "start": "2895800",
    "end": "2902040"
  },
  {
    "text": "user be logged in when you build that policy you could add any additional requirements on the user such as being",
    "start": "2902040",
    "end": "2909359"
  },
  {
    "text": "in a particular role so this is another good example of where you know for the coarse-grained check like do you have",
    "start": "2909359",
    "end": "2915330"
  },
  {
    "text": "access to the app or not maybe the you know only in the emergency room software the the doctor and the nurse should be",
    "start": "2915330",
    "end": "2921630"
  },
  {
    "text": "accessing it so you can set up a global authorization policy for asp.net MVC",
    "start": "2921630",
    "end": "2928800"
  },
  {
    "text": "core it's a little weird how you do it unfortunately but you have to build this",
    "start": "2928800",
    "end": "2933869"
  },
  {
    "text": "builder in your MVC options when you're loading up MVC in the DI system and you",
    "start": "2933869",
    "end": "2940080"
  },
  {
    "text": "pop in your requirements there and then you set that up as a global authorized filter still I think this is a generally",
    "start": "2940080",
    "end": "2946380"
  },
  {
    "text": "a good practice to put in so like I said we kind of already talked",
    "start": "2946380",
    "end": "2952690"
  },
  {
    "text": "about the conclusion here but this is basically the conclusion that we had is that for coarse-grained type of logic",
    "start": "2952690",
    "end": "2958900"
  },
  {
    "text": "rolls make make a lot of sense for feature access within an application roles or permissions combination of the",
    "start": "2958900",
    "end": "2965440"
  },
  {
    "text": "two make a lot of sense to externalize into some you know helper library to help you out but beyond that it really",
    "start": "2965440",
    "end": "2973390"
  },
  {
    "text": "starts to feel forced to try to have an external system you know incorporate",
    "start": "2973390",
    "end": "2979809"
  },
  {
    "text": "whatever your business logic might be so that's the conclusion we came to and",
    "start": "2979809",
    "end": "2985210"
  },
  {
    "text": "that pretty much is sort of the the mental progression and that we went through when building policy server",
    "start": "2985210",
    "end": "2992319"
  },
  {
    "text": "there a couple of resources here my colleague Dominic has a blog post that kind of talks about the background of",
    "start": "2992319",
    "end": "2998380"
  },
  {
    "text": "this there's some more information about the asp.net core authorization system",
    "start": "2998380",
    "end": "3005369"
  },
  {
    "text": "and there is the link to the github repo for the sample code that I just showed",
    "start": "3005369",
    "end": "3011040"
  },
  {
    "text": "you I think we have a few minutes left i if there are any questions yeah question",
    "start": "3011040",
    "end": "3020299"
  },
  {
    "text": "right so I think the comment is about administration of this so if you really are built using different components for",
    "start": "3034060",
    "end": "3041030"
  },
  {
    "text": "your authorization that feels scattered okay well if you build an administrative",
    "start": "3041030",
    "end": "3046460"
  },
  {
    "text": "UI to aggregate all that together then from the end users perspective it won't",
    "start": "3046460",
    "end": "3052520"
  },
  {
    "text": "seem scattered we do that all the time and that's one of the reasons why the main in the product that we build our",
    "start": "3052520",
    "end": "3057890"
  },
  {
    "text": "management piece has an API so that you can then call that so your aggregated UI",
    "start": "3057890",
    "end": "3063800"
  },
  {
    "text": "can call one system for one type of thing and one type of you know another system for another type of thing again I",
    "start": "3063800",
    "end": "3071630"
  },
  {
    "text": "think that's the nature of the beast right because authorization like I said is it done at many tiers even within a",
    "start": "3071630",
    "end": "3078350"
  },
  {
    "text": "single request into a web server there's lots of different stages where different authorization might need to run and it's",
    "start": "3078350",
    "end": "3084560"
  },
  {
    "text": "different like scope if that makes sense okay yeah I can just show you real",
    "start": "3084560",
    "end": "3090890"
  },
  {
    "text": "quickly the the the policy server product kind of a thinking behind it",
    "start": "3090890",
    "end": "3097480"
  },
  {
    "text": "here is the admin UI that we have for",
    "start": "3097480",
    "end": "3102500"
  },
  {
    "text": "managing policies in the policy server product and this is the the pattern is",
    "start": "3102500",
    "end": "3108050"
  },
  {
    "text": "exactly the same I just described the idea is that we are gonna have policies and you can then for a policy you",
    "start": "3108050",
    "end": "3114740"
  },
  {
    "text": "typically use a policy to model and applications authorization requirements so here's the exact emergency room",
    "start": "3114740",
    "end": "3121490"
  },
  {
    "text": "sample that we had from before and you can come in here and define roles and permissions and when you define roles",
    "start": "3121490",
    "end": "3127430"
  },
  {
    "text": "and permissions you can come in here and say you know what identities map to this",
    "start": "3127430",
    "end": "3133190"
  },
  {
    "text": "particular application specific role and then based on that application specific role you then map which you know app",
    "start": "3133190",
    "end": "3140390"
  },
  {
    "text": "roles can access various permissions so it's pretty much the same thing I just showed you this is just centralized in a",
    "start": "3140390",
    "end": "3146900"
  },
  {
    "text": "database there's an API behind this management UI that API is the same one",
    "start": "3146900",
    "end": "3153230"
  },
  {
    "text": "that you could call from your aggregated UI if you wanted and they're auditing features as well on this as well as",
    "start": "3153230",
    "end": "3160550"
  },
  {
    "text": "multi tendancy support you know you may have two different tenants with different sets of users that you obviously map differently another",
    "start": "3160550",
    "end": "3167150"
  },
  {
    "text": "interesting feature we have though is the ability to build a hierarchy of policies so it might be very common that",
    "start": "3167150",
    "end": "3174920"
  },
  {
    "text": "you have a couple different applications that actually have shared roles so the",
    "start": "3174920",
    "end": "3180619"
  },
  {
    "text": "idea is that when we built this we needed to be able to support that so you can define a policy and at the root",
    "start": "3180619",
    "end": "3187700"
  },
  {
    "text": "policy you define the shared roles you know all your applications in the hospital system have these roles and",
    "start": "3187700",
    "end": "3194089"
  },
  {
    "text": "these users map to it okay but at the top level you don't really have any permissions because what's being modeled",
    "start": "3194089",
    "end": "3199190"
  },
  {
    "text": "is the hospital not any one app and so then we can do is create a child policy underneath it and the child policy is",
    "start": "3199190",
    "end": "3206450"
  },
  {
    "text": "what actually models the application it by virtue of being a child policy you",
    "start": "3206450",
    "end": "3211460"
  },
  {
    "text": "inherit all the role mappings but then it's at the child policy where you define your permissions and do your",
    "start": "3211460",
    "end": "3219140"
  },
  {
    "text": "assignments of roles to these features okay so like I said an important feature to implement once we realize that these",
    "start": "3219140",
    "end": "3226250"
  },
  {
    "text": "policies have this hierarchy and that the nodes and the hierarchy don't have",
    "start": "3226250",
    "end": "3232910"
  },
  {
    "text": "to model an application it can be really modeled whatever you want it to so we took this one step further and started",
    "start": "3232910",
    "end": "3238520"
  },
  {
    "text": "prototyping and saying hey what if the actual policy is modeling a resource in",
    "start": "3238520",
    "end": "3244640"
  },
  {
    "text": "your system so let's say you have a medical record system and you have rules about you know which roles can can do",
    "start": "3244640",
    "end": "3252260"
  },
  {
    "text": "which permissions to you know operations on medical records and then you actually create a policy in here to represent an",
    "start": "3252260",
    "end": "3259520"
  },
  {
    "text": "instance of a room in a medical record in this system and at this particular instance you then map particular users",
    "start": "3259520",
    "end": "3267440"
  },
  {
    "text": "into roles then you have the ability to have two different medical records with two different users having different",
    "start": "3267440",
    "end": "3273770"
  },
  {
    "text": "levels of permission for example okay so that's kind of an interesting feature here now the interesting thing is when",
    "start": "3273770",
    "end": "3280010"
  },
  {
    "text": "the application connects when it invokes the policy it has to pass a path to the",
    "start": "3280010",
    "end": "3285710"
  },
  {
    "text": "policy so the users in the app they're trying to access policy you know one two three and so the app will connect and",
    "start": "3285710",
    "end": "3292190"
  },
  {
    "text": "say hey I need to execute under the hospital system the medical records app what are the permissions for this user",
    "start": "3292190",
    "end": "3298809"
  },
  {
    "text": "for you know record one two three for example anyway just a little bit of",
    "start": "3298809",
    "end": "3303969"
  },
  {
    "text": "thinking behind the commercial product and and what that offers beyond just",
    "start": "3303969",
    "end": "3310059"
  },
  {
    "text": "what I showed you here and the really simple you know role and permission mapping okay yes question",
    "start": "3310059",
    "end": "3318179"
  },
  {
    "text": "so so the way I think about this is that rolls and there's an exception to this",
    "start": "3326970",
    "end": "3334720"
  },
  {
    "text": "but rolls generally are owned by the application right that might in my emergency room software knows about the",
    "start": "3334720",
    "end": "3341710"
  },
  {
    "text": "rolls because it knows the types of users doctor nurse and patient it also owns the permissions okay right because",
    "start": "3341710",
    "end": "3348550"
  },
  {
    "text": "it's it's implementing these features right when you go into then manage what you're doing is you're mapping users",
    "start": "3348550",
    "end": "3354940"
  },
  {
    "text": "onto the rolls okay and we have multi-tenancy support so if I'm the manager or the admin of ten at one I'm",
    "start": "3354940",
    "end": "3362560"
  },
  {
    "text": "only going to map my users to these to these roles and if I'm the admin of tenant to map different you know my ten",
    "start": "3362560",
    "end": "3368619"
  },
  {
    "text": "or two users to those roles you might also want to create a grouping of users",
    "start": "3368619",
    "end": "3373810"
  },
  {
    "text": "for that tenant so instead of mapping one by one you create your own grouping and assign that's also possible that's",
    "start": "3373810",
    "end": "3379990"
  },
  {
    "text": "also done with a role but it's a tenant specific role as opposed to an application specific role anyway that's",
    "start": "3379990",
    "end": "3385480"
  },
  {
    "text": "detail so that's how the mapping happens so I'm kind of missing your question oh",
    "start": "3385480",
    "end": "3393839"
  },
  {
    "text": "and see everything that there yes yeah so actually I should mention the UI were showing you we have a couple different",
    "start": "3396570",
    "end": "3402850"
  },
  {
    "text": "you know versions of the product we have the basic version and we have the Enterprise version this is just the",
    "start": "3402850",
    "end": "3407859"
  },
  {
    "text": "basic version the more the back-end is all implemented for that kind of slicing",
    "start": "3407859",
    "end": "3413380"
  },
  {
    "text": "and dicing of queries the Enterprise version of our UI is just not done yet okay yeah okay so that's basically like",
    "start": "3413380",
    "end": "3423970"
  },
  {
    "text": "I said our conclusion on how authorization you know could be done it's definitely a challenge and a",
    "start": "3423970",
    "end": "3430570"
  },
  {
    "text": "complicated processor or a requirement to meet but the idea behind can a",
    "start": "3430570",
    "end": "3436240"
  },
  {
    "text": "generalizing and in building something out of it is so that you know everybody doesn't have to reinvent this wheel you",
    "start": "3436240",
    "end": "3441369"
  },
  {
    "text": "know over and over okay all right well thank you have a good party tonight",
    "start": "3441369",
    "end": "3446770"
  },
  {
    "text": "right this is our party night okay [Applause]",
    "start": "3446770",
    "end": "3453629"
  }
]