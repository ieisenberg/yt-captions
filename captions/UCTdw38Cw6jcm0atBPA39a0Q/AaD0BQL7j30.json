[
  {
    "text": "okay I'll get started ABC I view streams thousands of",
    "start": "8000",
    "end": "15000"
  },
  {
    "text": "Catch-Up TV programs to millions of Australians every",
    "start": "15000",
    "end": "19840"
  },
  {
    "text": "year oh this is going",
    "start": "20519",
    "end": "24199"
  },
  {
    "text": "well that is better okay uh the ABC which is a public broadcaster",
    "start": "27240",
    "end": "34600"
  },
  {
    "text": "it's over 80 years old but I view is a relative newcomer we first launched in",
    "start": "34600",
    "end": "40840"
  },
  {
    "text": "2008 and it's now one of the most popular streaming Platforms in the country I can only say that because I",
    "start": "40840",
    "end": "46640"
  },
  {
    "text": "really don't know how many of you use Netflix today is going to introduce you",
    "start": "46640",
    "end": "51760"
  },
  {
    "text": "to Metro which is the ABC's new video transcoding service which is the service behind the scenes of iew and it's the",
    "start": "51760",
    "end": "58879"
  },
  {
    "text": "one that's processing all the content to make available and that's you know everything from play school to Doctor",
    "start": "58879",
    "end": "65080"
  },
  {
    "text": "Who Metro was built by a small team mid last year and it was launched in",
    "start": "65080",
    "end": "70280"
  },
  {
    "text": "December and it's been transcoding all the content since so things that we're going to",
    "start": "70280",
    "end": "75920"
  },
  {
    "text": "specifically cover about Metro one what do we mean when we talk",
    "start": "75920",
    "end": "81079"
  },
  {
    "text": "about uh video transcoding we're going to go through the process and show you",
    "start": "81079",
    "end": "86960"
  },
  {
    "text": "why video transcoding is really important for I view",
    "start": "86960",
    "end": "91840"
  },
  {
    "text": "there are a lot of options available to actually transcode video why did the ABC decide that we were actually going to",
    "start": "92159",
    "end": "98320"
  },
  {
    "text": "build our own system we're going to cover those reasons and how it's actually turned out to be really advantageous for",
    "start": "98320",
    "end": "105119"
  },
  {
    "text": "us what does this system actually look like I'm going to be walking through a Metro architecture which is a workflow",
    "start": "105119",
    "end": "111840"
  },
  {
    "text": "system and I'm going to be showing you the steps that a media file goes as it FL flows through our",
    "start": "111840",
    "end": "118360"
  },
  {
    "text": "system uh four is uh what technology choices",
    "start": "118840",
    "end": "124000"
  },
  {
    "text": "did we actually make when we were deciding to build our system um I'm going to show you the language choices",
    "start": "124000",
    "end": "129599"
  },
  {
    "text": "that we've made and also the specific sort of AWS services that we've decided to plug together to form the",
    "start": "129599",
    "end": "136280"
  },
  {
    "text": "system this is my favorite part which is autoscaling how do we scale and how do",
    "start": "136280",
    "end": "142519"
  },
  {
    "text": "we actually uh C up for all the the different demand of content throughout the",
    "start": "142519",
    "end": "148440"
  },
  {
    "text": "day how much much does it cost to run we're going to go through what a typical",
    "start": "148440",
    "end": "153879"
  },
  {
    "text": "uh day of transcoding costs for Metro and also how much it's going to cost for a whole year of IV content and the",
    "start": "153879",
    "end": "160400"
  },
  {
    "text": "numbers were really surprising to us so I hope you find them uh interesting as",
    "start": "160400",
    "end": "165879"
  },
  {
    "text": "well lastly is what are we actually planning for the future of Metro we're going to take a look at other features",
    "start": "165879",
    "end": "172280"
  },
  {
    "text": "that we can Implement in future so first off uh what is",
    "start": "172280",
    "end": "179040"
  },
  {
    "text": "transcoding come on um it's a process right we take an",
    "start": "179040",
    "end": "186680"
  },
  {
    "text": "initial input video or audio file and we convert it to a variety of output formats which we call Renditions",
    "start": "186680",
    "end": "193239"
  },
  {
    "text": "Renditions are a really important Concept in uh Metro's architecture and system so I'm going to be referring to",
    "start": "193239",
    "end": "199159"
  },
  {
    "text": "them a lot throughout this talk what kind of actually you know what changes are we actually making to these",
    "start": "199159",
    "end": "205440"
  },
  {
    "text": "videos uh we create a lot of different Renditions here and there's a lot of changes that we make which is things",
    "start": "205440",
    "end": "211480"
  },
  {
    "text": "like the resolution so the size of the video um the bit rate which is the amount of data that you download per",
    "start": "211480",
    "end": "217040"
  },
  {
    "text": "second in order to actually play the video um we've got the video encoding so",
    "start": "217040",
    "end": "223200"
  },
  {
    "text": "uh you know the file format of the actual video that you're playing back we can add logos to the video and we can",
    "start": "223200",
    "end": "229799"
  },
  {
    "text": "also do things like change the audio levels which is a a really necessary part of uh transcoding for I",
    "start": "229799",
    "end": "236720"
  },
  {
    "text": "VI so our goal is to really produce a standard set of Renditions stuff that's",
    "start": "236720",
    "end": "241920"
  },
  {
    "text": "all uh consistent for each uh video for I view we've got six different",
    "start": "241920",
    "end": "248200"
  },
  {
    "text": "rendition types and we've got five uh five video versions and one Audio Only",
    "start": "248200",
    "end": "255840"
  },
  {
    "text": "version it's not Netflix scale but we really don't have Netflix's budget this",
    "start": "255840",
    "end": "261680"
  },
  {
    "text": "is what we do for uh the ABC now that video on the left is what we receive in Metro and through the",
    "start": "261680",
    "end": "267919"
  },
  {
    "text": "transcoding process we turn it into additions that are on the right why do you have so many",
    "start": "267919",
    "end": "274479"
  },
  {
    "text": "sizes we optimize that video size for the device size so you know large formats are really good for things like",
    "start": "274479",
    "end": "280960"
  },
  {
    "text": "desktop machines or your TVs and smaller versions are much better for things like mobile",
    "start": "280960",
    "end": "287120"
  },
  {
    "text": "devices you're going to get a different rendition depending on your network speed um you know it's also capable you",
    "start": "287120",
    "end": "295160"
  },
  {
    "text": "know what your device is actually capable of playing so uh the higher bit rate versions the",
    "start": "295160",
    "end": "301280"
  },
  {
    "text": "larger Renditions are obviously going to require a lot more data to download um and it's not going to be ideal for",
    "start": "301280",
    "end": "307120"
  },
  {
    "text": "mobile devices you won't even be able to tell the difference when it's playing back on your mobile device as well so um",
    "start": "307120",
    "end": "313199"
  },
  {
    "text": "we change these rendition sizes depending on the speed and it's your video player that's",
    "start": "313199",
    "end": "319039"
  },
  {
    "text": "actually responsible for uh selecting which rendition to play so it's the one that detects your network speed and",
    "start": "319039",
    "end": "324759"
  },
  {
    "text": "changes uh changes it accordingly and it will do that mid playay as well so it'll adjust according to what you're",
    "start": "324759",
    "end": "330880"
  },
  {
    "text": "currently using is I's current highest quality",
    "start": "330880",
    "end": "336479"
  },
  {
    "text": "version is, 1500k or kilobits per second our lowest quality is",
    "start": "336479",
    "end": "342319"
  },
  {
    "text": "220k you'll notice that's not HD but hopefully that's coming in",
    "start": "342319",
    "end": "348680"
  },
  {
    "text": "future for IV distribution we convert everything to h264 MP4 and it's really important that Metro",
    "start": "349479",
    "end": "356800"
  },
  {
    "text": "standardizes all that video uh to do the same encoding so that the player doesn't really have to worry about different",
    "start": "356800",
    "end": "362759"
  },
  {
    "text": "codecs and trying to deal with you know different um codecs so as an example of a couple of",
    "start": "362759",
    "end": "369400"
  },
  {
    "text": "different sources that we receive we get um a file format from broadcast format",
    "start": "369400",
    "end": "374880"
  },
  {
    "text": "called gxf it's a gxf container it contains an M2 video and four raw audio",
    "start": "374880",
    "end": "380479"
  },
  {
    "text": "streams we also receive files in apples uh mauve format and those two are all",
    "start": "380479",
    "end": "387520"
  },
  {
    "text": "normalized down to this standard h264 MP4 so let's walk through an example to",
    "start": "387520",
    "end": "394560"
  },
  {
    "text": "actually you know show you what we're doing so first we prepare a watermark that we're going to end up putting on",
    "start": "394560",
    "end": "400680"
  },
  {
    "text": "the bottom of the video this is the abc1 logo here we make it about 30%",
    "start": "400680",
    "end": "406639"
  },
  {
    "text": "transparent so that we don't burn on your TV and we also don't uh be so distracting in the",
    "start": "406639",
    "end": "413400"
  },
  {
    "text": "corner and then we resize that down we resize it to a size that is actually",
    "start": "413400",
    "end": "420680"
  },
  {
    "text": "relative to each rendition and that's because when we switch between different Renditions we don't want the logo to be",
    "start": "420680",
    "end": "426560"
  },
  {
    "text": "moving around or to change in intensity so if we take this input video",
    "start": "426560",
    "end": "433840"
  },
  {
    "text": "file now which is the uh episode of Utopia which the an ABC series and it's",
    "start": "433840",
    "end": "439840"
  },
  {
    "text": "in gxf format this black bar that we've got at the top of the file is a thing that's",
    "start": "439840",
    "end": "446879"
  },
  {
    "text": "used in broadcast it's got time code information in it and it's also got a bunch of um captions information in it I",
    "start": "446879",
    "end": "455360"
  },
  {
    "text": "doesn't use any of these so we actually want to crop it off so that's the first thing we do",
    "start": "455360",
    "end": "461639"
  },
  {
    "text": "here and next you'll notice that they're in 43 format they're they're a bit stretched and we really want to actually",
    "start": "461639",
    "end": "468280"
  },
  {
    "text": "play that back in 16 by9 so we adjust that format and set it in",
    "start": "468280",
    "end": "475919"
  },
  {
    "text": "the header of the file as well and the reason it's actually stored in 43 is historic it's called anamorphic WID",
    "start": "475919",
    "end": "481879"
  },
  {
    "text": "screen you can actually store more information in that format and then stretch it out to WID screen than just",
    "start": "481879",
    "end": "488000"
  },
  {
    "text": "by storying in WID screen itself it's also really good for a lot of uh historical uh",
    "start": "488000",
    "end": "494199"
  },
  {
    "text": "TV equipment that's been produced for",
    "start": "494199",
    "end": "499199"
  },
  {
    "text": "43 so we've adjusted now the ratio everybody looks great we're going to now add that waterm Mark that we uh prepared",
    "start": "499879",
    "end": "507319"
  },
  {
    "text": "earlier and we position it very precisely as I said according to each rendition size to make sure that when we",
    "start": "507319",
    "end": "513320"
  },
  {
    "text": "flip we don't notice it moving around we're now ready to stream at",
    "start": "513320",
    "end": "518440"
  },
  {
    "text": "1500k which is our highest quality version and these are the other rendition sizes that we also produce",
    "start": "518440",
    "end": "524720"
  },
  {
    "text": "there is a 1,000 650 500 220 and that Audio Only",
    "start": "524720",
    "end": "531519"
  },
  {
    "text": "version so that's the audio in terms of video uh we have to do",
    "start": "531839",
    "end": "538160"
  },
  {
    "text": "a bit of preparation to actually make that available as",
    "start": "538160",
    "end": "542480"
  },
  {
    "text": "well so this is the audio for the same video Utopia it's a half hour show and",
    "start": "543600",
    "end": "550279"
  },
  {
    "text": "you can see that there's a block at the start and the end which is the uh more intense than the others sorry this is",
    "start": "550279",
    "end": "555880"
  },
  {
    "text": "this is audio intensity so the height of the bar you know indicates how loud it is the taller the bar the louder the",
    "start": "555880",
    "end": "562600"
  },
  {
    "text": "volume and at the start and the end you know the credits are usually covered with music so they're they're louder than the rest of the episode",
    "start": "562600",
    "end": "571120"
  },
  {
    "text": "this is what the previous transcoder for ivu used to produce it's much more intense than",
    "start": "571800",
    "end": "579240"
  },
  {
    "text": "what's in the gxf file if I flip back and forth you can you can really see that and what we want to do is actually",
    "start": "579240",
    "end": "586079"
  },
  {
    "text": "make sure that Metro produces the same level of audio intensity than uh as this our previous",
    "start": "586079",
    "end": "592079"
  },
  {
    "text": "transcoder and that's because we've actually got a few different reasons why first is that we do have some old",
    "start": "592079",
    "end": "598399"
  },
  {
    "text": "content that's still still in the system that's been transcoded by the previous transcoder and we want you viewers to",
    "start": "598399",
    "end": "605079"
  },
  {
    "text": "not notice a difference when you play an old version of a show and something that's been transcoded newly in",
    "start": "605079",
    "end": "611560"
  },
  {
    "text": "Metro number two is that um between different uh shows they might be",
    "start": "611560",
    "end": "617720"
  },
  {
    "text": "recorded with different audio audio levels so we want to actually normalize everything so that if you watch one show",
    "start": "617720",
    "end": "623800"
  },
  {
    "text": "here and then another show here you're not having to adjust your volume so that you know you you watch different shows",
    "start": "623800",
    "end": "630480"
  },
  {
    "text": "and that's also important between the Renditions of the same show right if if the player ends up flipping between a",
    "start": "630480",
    "end": "636279"
  },
  {
    "text": "different rendition you don't want to notice that the audio levels are jumping around so audio normalization is really",
    "start": "636279",
    "end": "643519"
  },
  {
    "text": "critical for us this is Metro's new uh output of the same thing so it's much more intense",
    "start": "643519",
    "end": "650399"
  },
  {
    "text": "than the original version and it's pretty close to the uh previous",
    "start": "650399",
    "end": "655720"
  },
  {
    "text": "transcoder so if we didn't process that audio at all you would really notice the difference if you were playing uh",
    "start": "655720",
    "end": "661279"
  },
  {
    "text": "different things as it was uh coming back through the player so that's a lot of changes that",
    "start": "661279",
    "end": "667800"
  },
  {
    "text": "we've made to these videos right we've adjusted the audio we've adjusted the enod encoding we've done some cropping",
    "start": "667800",
    "end": "674680"
  },
  {
    "text": "and and and bit rate changing how do we keep track of where",
    "start": "674680",
    "end": "679800"
  },
  {
    "text": "all these changes should go ideally we want all the changes to be listed in the same place so that you",
    "start": "679800",
    "end": "685959"
  },
  {
    "text": "know I get a gxf file I know okay I've got to do all this stuff to it so that I can get this standard",
    "start": "685959",
    "end": "693240"
  },
  {
    "text": "output so we encapsulate all of that somewhere in something called a profile",
    "start": "693240",
    "end": "698680"
  },
  {
    "text": "and that's a set of instructions that we can look up uh and we can apply universally to everything that is of",
    "start": "698680",
    "end": "704360"
  },
  {
    "text": "this type of content and the way that we work out how to match a profile is uh through",
    "start": "704360",
    "end": "712440"
  },
  {
    "text": "location folders source source folders Metro's got a source location and that's where all the content gets dropped and",
    "start": "712440",
    "end": "719480"
  },
  {
    "text": "inside that location we've got different folders this is a pretty MVP sort of solution but for our MVP here we map",
    "start": "719480",
    "end": "728120"
  },
  {
    "text": "each folder to a specific profile so all gxf content here like Utopia that has",
    "start": "728120",
    "end": "734040"
  },
  {
    "text": "all the similar properties to Utopia gets dropped in there and has that same level of instructions applied to it to",
    "start": "734040",
    "end": "739600"
  },
  {
    "text": "get all the output out so here we perform all those changes",
    "start": "739600",
    "end": "745399"
  },
  {
    "text": "we get Utopia otherwise if we have a different set of content this here is for the",
    "start": "745399",
    "end": "750760"
  },
  {
    "text": "Apple prores content we only have to do uh we have to do less changes to it basically it's",
    "start": "750760",
    "end": "757199"
  },
  {
    "text": "already pre-water marked it's already in the right format in terms of uh sorry it's already in the right uh we don't",
    "start": "757199",
    "end": "763160"
  },
  {
    "text": "have to crop and uh we end up with this content here which is from the ABC Arts",
    "start": "763160",
    "end": "769959"
  },
  {
    "text": "channel so the next question then is is with all those changes that we've actually just listed right how are they",
    "start": "771320",
    "end": "777320"
  },
  {
    "text": "actually applied how does this magic work and our answer is",
    "start": "777320",
    "end": "784240"
  },
  {
    "text": "ffmpeg it's an open- Source media transcoding tool that's been around for 15 years it is incredibly",
    "start": "784240",
    "end": "792720"
  },
  {
    "text": "powerful this is a really simple example of what you can do you can take an input",
    "start": "792720",
    "end": "798040"
  },
  {
    "text": "file in gxf and convert it to an output file and Metro or sorry ffmpeg will do a",
    "start": "798040",
    "end": "806160"
  },
  {
    "text": "huge amount of uh assumptions on this right it'll it'll assume what you want",
    "start": "806160",
    "end": "811360"
  },
  {
    "text": "in terms of like encoding quality levels that kind of thing but really this is what it looks",
    "start": "811360",
    "end": "818560"
  },
  {
    "text": "like in our system this is a real ffmpeg command that we use and this command is linked to the",
    "start": "818560",
    "end": "825160"
  },
  {
    "text": "profile we've got six commands here um to produce each of the six Renditions",
    "start": "825160",
    "end": "830320"
  },
  {
    "text": "and and every profile has its own list of uh FFM commands to produce the Renditions that we",
    "start": "830320",
    "end": "836399"
  },
  {
    "text": "want so that control control R things like you know encoding cropping de",
    "start": "836399",
    "end": "842680"
  },
  {
    "text": "interlacing scaling aspect ratios some stuff to do with the watermark video",
    "start": "842680",
    "end": "848759"
  },
  {
    "text": "quality audio and just some other settings for a good measure so I'm not going to go into",
    "start": "848759",
    "end": "855040"
  },
  {
    "text": "detail because ffmpeg is incredibly powerful and huge there is a lot of information available through its",
    "start": "855040",
    "end": "861519"
  },
  {
    "text": "official documentation and the community is also um really quite helpful to um",
    "start": "861519",
    "end": "867519"
  },
  {
    "text": "with any kind of inquiry that you've got so just emphasizing here that basically",
    "start": "867519",
    "end": "874079"
  },
  {
    "text": "it's a it's such an incredible piece of Open Source software that we really could not have built Metro",
    "start": "874079",
    "end": "881600"
  },
  {
    "text": "without so that's an overview of transcoding that we do with Metro and we",
    "start": "881600",
    "end": "887240"
  },
  {
    "text": "take input videos and we do a bunch of changes and we end up with a standard set of Renditions at the",
    "start": "887240",
    "end": "893399"
  },
  {
    "text": "end so let's talk now about why we decided to build a system ourselves",
    "start": "893399",
    "end": "900279"
  },
  {
    "text": "we've got three main reasons here and the first is",
    "start": "900279",
    "end": "905360"
  },
  {
    "text": "costs we had a really good opportunity with IV there are a lot of commercial",
    "start": "905360",
    "end": "910480"
  },
  {
    "text": "transcoding options that are geared to producing content really quickly right now you have a piece of content you",
    "start": "910480",
    "end": "917519"
  },
  {
    "text": "submit that file it spins up 10 million things for you transcod it quickly and then sends it back to",
    "start": "917519",
    "end": "923399"
  },
  {
    "text": "you so that's what the previous transcoder for IU did but the the thing",
    "start": "923399",
    "end": "929000"
  },
  {
    "text": "is IU gets a lot of its content in advance we've already recorded these dramas and shows you know we're going to",
    "start": "929000",
    "end": "935680"
  },
  {
    "text": "get them weeks or days or sometime in advance so we really don't need to pay",
    "start": "935680",
    "end": "942040"
  },
  {
    "text": "for that content to be transcoded immediately we could choose to batch it or queue it and and process it in a",
    "start": "942040",
    "end": "948639"
  },
  {
    "text": "bunch and do it later at night or you know on some cheap kind of computing Hardware in the",
    "start": "948639",
    "end": "955759"
  },
  {
    "text": "cloud so where the ABC we love saving money sounds like a good",
    "start": "955800",
    "end": "960959"
  },
  {
    "text": "idea to us I can't go into the cost of what the previous transcoder costs but I can give",
    "start": "960959",
    "end": "967519"
  },
  {
    "text": "you an analogy we were previously paying for the transcoding Porsche of the world",
    "start": "967519",
    "end": "974199"
  },
  {
    "text": "right it had a lot of features and it was very fast but we really needed",
    "start": "974199",
    "end": "979839"
  },
  {
    "text": "something like a mini we needed something to just be reliable and get our content from A to B we just need to",
    "start": "979839",
    "end": "986319"
  },
  {
    "text": "know that our content is going to be there and available before it goes live so a reason to build this system",
    "start": "986319",
    "end": "992759"
  },
  {
    "text": "was to actually help reduce costs by sacrificing a little bit of speed and",
    "start": "992759",
    "end": "998839"
  },
  {
    "text": "paying for uh building something that was going to service needs that we",
    "start": "998839",
    "end": "1004199"
  },
  {
    "text": "wanted features that we wanted we also have a large R range of",
    "start": "1004199",
    "end": "1011120"
  },
  {
    "text": "uh content we've got a large scale of content I view is just one of our",
    "start": "1011120",
    "end": "1017160"
  },
  {
    "text": "products we also have videos on our news sites and we have a commercial arm of",
    "start": "1017160",
    "end": "1022319"
  },
  {
    "text": "the ABC which produces content for third parties things like iTunes you can go and buy ABC series off",
    "start": "1022319",
    "end": "1029079"
  },
  {
    "text": "there if we could handle I view content efficiently then why wouldn't we use",
    "start": "1029079",
    "end": "1034678"
  },
  {
    "text": "this on all the other areas of the ABC as well and that suddenly becomes like a much more uh attractive",
    "start": "1034679",
    "end": "1042918"
  },
  {
    "text": "proposition so we could also build this in the cloud everybody loves the cloud",
    "start": "1042919",
    "end": "1048480"
  },
  {
    "text": "it scales as far as you want it to and there are no restrictions you know requiring a certain physical number of",
    "start": "1048480",
    "end": "1055039"
  },
  {
    "text": "transcoders to actually transcode your content or there's no uh amount of hours",
    "start": "1055039",
    "end": "1061120"
  },
  {
    "text": "of transcode that you need to buy in advance to be able to process all of your content we can actually just uh pay",
    "start": "1061120",
    "end": "1069640"
  },
  {
    "text": "for as much as we use and that applies both if if our content grows for example",
    "start": "1069640",
    "end": "1074679"
  },
  {
    "text": "if we add new types of Renditions higher quality Renditions or you know if we're having a quiet month and it turns out",
    "start": "1074679",
    "end": "1080640"
  },
  {
    "text": "that we're not actually producing as much content as our contract is required so the last reason is also",
    "start": "1080640",
    "end": "1089520"
  },
  {
    "text": "flexibility as I mentioned the ABC is 80 years old our content has a lot of",
    "start": "1089520",
    "end": "1095520"
  },
  {
    "text": "quirks we have a lot of custom broadcast settings and",
    "start": "1095520",
    "end": "1101320"
  },
  {
    "text": "formats if we have our own system we can customize a lot of features to suit our",
    "start": "1103120",
    "end": "1109280"
  },
  {
    "text": "own uh systems and formats and I'm going to give you an example of a quirky thing",
    "start": "1109280",
    "end": "1114640"
  },
  {
    "text": "that we have so this black bar at the top that uh has broadcast information in",
    "start": "1114640",
    "end": "1119799"
  },
  {
    "text": "it it requires asymmetrical cropping and there's not a lot of commercial",
    "start": "1119799",
    "end": "1125159"
  },
  {
    "text": "transcoders around that will actually provide that system that that feature we",
    "start": "1125159",
    "end": "1130799"
  },
  {
    "text": "would have to pay extra to be able to do this the black bar also contains",
    "start": "1130799",
    "end": "1136840"
  },
  {
    "text": "captions in a format called op 47 and op 47 is a an obscure caption",
    "start": "1136840",
    "end": "1143480"
  },
  {
    "text": "format it turns out and again there aren't that many commercial transcoders who provide that so we would be paying",
    "start": "1143480",
    "end": "1149840"
  },
  {
    "text": "extra for this support instead if we build our own system we can actually uh",
    "start": "1149840",
    "end": "1156280"
  },
  {
    "text": "cater to these specific requirements using software like ffmpeg or plugins to",
    "start": "1156280",
    "end": "1162760"
  },
  {
    "text": "ffmpeg and we can deal with our content specifically",
    "start": "1162760",
    "end": "1169039"
  },
  {
    "text": "so by building our own system we can save money by sacrificing a bit of speed",
    "start": "1169039",
    "end": "1174120"
  },
  {
    "text": "we can benefit from the scale of our content and we can also be flexible with the ABC specific requirements in",
    "start": "1174120",
    "end": "1182880"
  },
  {
    "text": "future so having decided decided to build our own system let's take a look",
    "start": "1183000",
    "end": "1188400"
  },
  {
    "text": "at how it's actually designed Metro is a workflow we uh all the content that goes",
    "start": "1188400",
    "end": "1195159"
  },
  {
    "text": "in will follow these steps so each file gets transferred into AWS we then log",
    "start": "1195159",
    "end": "1201240"
  },
  {
    "text": "and cue that file and make it ready for processing we transcode it by running FFM on it we then move that those",
    "start": "1201240",
    "end": "1209039"
  },
  {
    "text": "resulting Renditions out to the CDN and then uh excuse me and then we",
    "start": "1209039",
    "end": "1214960"
  },
  {
    "text": "notify I view and say that that content is now ready for publishing so here's what that workflow",
    "start": "1214960",
    "end": "1221440"
  },
  {
    "text": "looks like from an architecture point of view all of our incoming media gets uploaded to an S3 bucket",
    "start": "1221440",
    "end": "1229000"
  },
  {
    "text": "uh when that media is finished uploading we use S3's inbuilt notifications to uh",
    "start": "1229000",
    "end": "1234840"
  },
  {
    "text": "put a notification onto an Amazon sqsq so uh it tells us that a new file",
    "start": "1234840",
    "end": "1241320"
  },
  {
    "text": "is available for processing we' have written several small queue listeners here um one of",
    "start": "1241320",
    "end": "1247159"
  },
  {
    "text": "which monitors this q and it's only got one task which is to send an HTTP notification to another component in our",
    "start": "1247159",
    "end": "1253159"
  },
  {
    "text": "system and say hey something happened so as soon as our message is put on the Q This Q listener picks it up",
    "start": "1253159",
    "end": "1260840"
  },
  {
    "text": "and it tells another component in our system which is an API called the",
    "start": "1260840",
    "end": "1266320"
  },
  {
    "text": "orchestrator that this new content's available the orchestrator is the brains of our system it's the only component",
    "start": "1266320",
    "end": "1273159"
  },
  {
    "text": "that is State aware and it has a data store in it it's responsible where track for",
    "start": "1273159",
    "end": "1278600"
  },
  {
    "text": "tracking where every single piece of content is in the system it also controls the number of transcoders that",
    "start": "1278600",
    "end": "1284880"
  },
  {
    "text": "we've got in flight so while it's saving uh this job in the",
    "start": "1284880",
    "end": "1294000"
  },
  {
    "text": "database it also looks up that Master list of uh profiles that we've",
    "start": "1294000",
    "end": "1299440"
  },
  {
    "text": "got it matches the new video that's been dropped uh to a profile and then that profile tells us a few really important",
    "start": "1299440",
    "end": "1307320"
  },
  {
    "text": "things the first is how many Renditions we're actually creating here the second is that FFM P command that we use per",
    "start": "1307320",
    "end": "1314679"
  },
  {
    "text": "per rendition third the location of the source file and fourth is where to save",
    "start": "1314679",
    "end": "1320960"
  },
  {
    "text": "all those output files we've got extra metadata that we send along with that but those are really the four things",
    "start": "1320960",
    "end": "1327279"
  },
  {
    "text": "that we need to know in order to be able to actually transcode something so now we have enough",
    "start": "1327279",
    "end": "1332960"
  },
  {
    "text": "information to actually save our trans code begin our trans code so the orchestrator enes a new",
    "start": "1332960",
    "end": "1339799"
  },
  {
    "text": "message per rendition onto uh a transcoding queue so if there's six",
    "start": "1339799",
    "end": "1345080"
  },
  {
    "text": "Renditions to produce we put six messages onto this queue it also calculates whether we actually",
    "start": "1345080",
    "end": "1352000"
  },
  {
    "text": "need to uh spin up more transcoding instances to process this content or if",
    "start": "1352000",
    "end": "1358120"
  },
  {
    "text": "in fact there's any transcoders running if there's not then we start one",
    "start": "1358120",
    "end": "1363080"
  },
  {
    "text": "up all those transcoding instances that are start up that are started up will",
    "start": "1363480",
    "end": "1368600"
  },
  {
    "text": "look at this Quee they'll take a message off one at a time and actually do the",
    "start": "1368600",
    "end": "1373679"
  },
  {
    "text": "transcoding with that content so one rendition goes to one machine",
    "start": "1373679",
    "end": "1379000"
  },
  {
    "text": "so this is where all the really intensive work with ffmpeg is done in our system and it takes the most time",
    "start": "1379000",
    "end": "1385000"
  },
  {
    "text": "you know like up to 90% 95% of the time is completely done with FFM Pig the length to transcode is going to",
    "start": "1385000",
    "end": "1392679"
  },
  {
    "text": "depend on how long the original content length is and also the quality of it",
    "start": "1392679",
    "end": "1398279"
  },
  {
    "text": "high quality rendition is going to take much longer to transcode than a lower quality",
    "start": "1398279",
    "end": "1403760"
  },
  {
    "text": "rendition once that transcode is done it's sent to uh S3 location that we",
    "start": "1403760",
    "end": "1409279"
  },
  {
    "text": "specify so that output location for the uh ffmp the resulting rendition from the",
    "start": "1409279",
    "end": "1415440"
  },
  {
    "text": "ffmp command so the orchestrator will then",
    "start": "1415440",
    "end": "1420559"
  },
  {
    "text": "update that job to say that the transcoding is done and it will send a message onto our CDN transfer",
    "start": "1420559",
    "end": "1429399"
  },
  {
    "text": "queue that process then will take those finished Renditions and send them up to",
    "start": "1429880",
    "end": "1435320"
  },
  {
    "text": "our CDN securely and that means that they will now be ready to publish on I",
    "start": "1435320",
    "end": "1440559"
  },
  {
    "text": "view so the orchestrator then logs the fact that they're they're done and uploaded to the CDN",
    "start": "1440559",
    "end": "1446960"
  },
  {
    "text": "and then also chooses to examine the rest of the system and if there's no",
    "start": "1446960",
    "end": "1453320"
  },
  {
    "text": "content left there it can choose to spin down any other transcoders that it's got running because when we no longer",
    "start": "1453320",
    "end": "1459600"
  },
  {
    "text": "processing any content once that's done we notify iew",
    "start": "1459600",
    "end": "1465440"
  },
  {
    "text": "and say okay all these videos are now ready to publish on night",
    "start": "1465440",
    "end": "1470480"
  },
  {
    "text": "view on average it takes uh just shy of 8 and a half minutes to process all the",
    "start": "1470480",
    "end": "1476440"
  },
  {
    "text": "content through the pipeline so that figure encompasses everything from file upload to S3 to",
    "start": "1476440",
    "end": "1483200"
  },
  {
    "text": "notifying I view we've got a variety of different content though so things like five",
    "start": "1483200",
    "end": "1489720"
  },
  {
    "text": "minute children's videos and documentaries that can be like an hour or two hours long so uh the time spent",
    "start": "1489720",
    "end": "1496880"
  },
  {
    "text": "in the system is is really going to be dependent on how long the original Source content is and how high quality",
    "start": "1496880",
    "end": "1502600"
  },
  {
    "text": "that rendition is so here's a bit of information on some",
    "start": "1502600",
    "end": "1507799"
  },
  {
    "text": "averages the lowest quality rendition that we produce here uh is the audio track and it tends to take around 12% of",
    "start": "1507799",
    "end": "1514120"
  },
  {
    "text": "the time of the original content length highest is 1500k and it'll take around uh 70% of real time so for a 1",
    "start": "1514120",
    "end": "1522080"
  },
  {
    "text": "hour piece of content the audio will take around 7 minutes and the highest",
    "start": "1522080",
    "end": "1527320"
  },
  {
    "text": "quality video will take around 42 so that's a summary of our workflow",
    "start": "1527320",
    "end": "1533559"
  },
  {
    "text": "architecture built in AWS now we're going to dive a little deeper into the system and look at the",
    "start": "1533559",
    "end": "1539640"
  },
  {
    "text": "language and infrastructure choices that we've made while building it our code components are written in",
    "start": "1539640",
    "end": "1547120"
  },
  {
    "text": "two different languages node and go this is where the code sits in our",
    "start": "1547120",
    "end": "1552760"
  },
  {
    "text": "system and uh here's the orchestrator again that that's the brains of our system it's the only component that we",
    "start": "1552760",
    "end": "1559159"
  },
  {
    "text": "decided to write in node why did we choose it one is that we had existing team",
    "start": "1559159",
    "end": "1566279"
  },
  {
    "text": "experience before the ABC we'd actually had a team a backend team that was experienced in noge and we'd written",
    "start": "1566279",
    "end": "1572520"
  },
  {
    "text": "several apis before there are also quite a good",
    "start": "1572520",
    "end": "1577960"
  },
  {
    "text": "collection of good quality modules available to help you write things quickly in node so Express for example",
    "start": "1577960",
    "end": "1585039"
  },
  {
    "text": "which is a great framework uh and there's a lot of middle that's been supplied for it as well the orchestrator isn't that",
    "start": "1585039",
    "end": "1592559"
  },
  {
    "text": "complicated the most responsibility it's got is to actually look at the number of transcoders that are running and decide",
    "start": "1592559",
    "end": "1599600"
  },
  {
    "text": "uh whether or not we need to increase that and that does that every time a new piece of contents dropped into the",
    "start": "1599600",
    "end": "1606520"
  },
  {
    "text": "system H the sad part is that JavaScript isn't typed and so that makes it you know kind",
    "start": "1606840",
    "end": "1612480"
  },
  {
    "text": "of crappy to refactor um it also means that there's a lot of boilerplate testing code",
    "start": "1612480",
    "end": "1618799"
  },
  {
    "text": "it's also you know not great for the other kind of components we've got in our system which are much more uh",
    "start": "1618799",
    "end": "1624840"
  },
  {
    "text": "longlived polling apps that just watch a queue so we decided to look at another",
    "start": "1624840",
    "end": "1631240"
  },
  {
    "text": "language for those components and these are C listeners here and they're written in go so",
    "start": "1631240",
    "end": "1638960"
  },
  {
    "text": "they're small independent longlived programs they each monitor a queue and they do one thing every time they",
    "start": "1638960",
    "end": "1645320"
  },
  {
    "text": "receive a message from that queue so there's three different types here one is the step to register a new file",
    "start": "1645320",
    "end": "1651120"
  },
  {
    "text": "that's dropped in S3 number two is to actually transcode the content using ffmpeg and the third one is to send the",
    "start": "1651120",
    "end": "1658440"
  },
  {
    "text": "content to the CDN now um go is an experiment and this",
    "start": "1658440",
    "end": "1664360"
  },
  {
    "text": "is the first time we'd really used it uh at the Abc so the typing was uh really nice for",
    "start": "1664360",
    "end": "1671360"
  },
  {
    "text": "us compared to JavaScript yay uh it's also compiled to compiled to",
    "start": "1671360",
    "end": "1678399"
  },
  {
    "text": "a binary and you can actually select the uh platform that you're targeting at",
    "start": "1678399",
    "end": "1683840"
  },
  {
    "text": "build time so you don't need a runtime like net or jvm you can just take this",
    "start": "1683840",
    "end": "1689279"
  },
  {
    "text": "binary and drop it somewhere so that makes it really really easy to deploy as",
    "start": "1689279",
    "end": "1694640"
  },
  {
    "text": "long as you've got a consistent kind of architecture you're good the downside is um go has quite a",
    "start": "1694640",
    "end": "1702080"
  },
  {
    "text": "hefty learning curve the way it does sort of interfaces object de ations and how to actually",
    "start": "1702080",
    "end": "1709039"
  },
  {
    "text": "design your code well um can be a little daunting and and challenging uh at first",
    "start": "1709039",
    "end": "1715640"
  },
  {
    "text": "I personally found it quite uh hard to find uh how to design patterns of success in go so we ended up uh doing",
    "start": "1715640",
    "end": "1725000"
  },
  {
    "text": "things quite a few different ways in our system here but",
    "start": "1725000",
    "end": "1731480"
  },
  {
    "text": "um yeah we ended up doing quite a few different things and ultimately we've taken some some learnings away from",
    "start": "1732120",
    "end": "1738679"
  },
  {
    "text": "Metro to other projects within the",
    "start": "1738679",
    "end": "1742240"
  },
  {
    "text": "ABC we also use quite a lot of AWS technology and we're going to walk through some of that now so I'm going to",
    "start": "1744559",
    "end": "1750519"
  },
  {
    "text": "focus on things that we use slightly differently or that have sort of a more unusual U challenge with",
    "start": "1750519",
    "end": "1757760"
  },
  {
    "text": "them so E2 is Amazon's hosted service for machines on demand aside from our",
    "start": "1757760",
    "end": "1763440"
  },
  {
    "text": "transcoding instances we don't do anything too unusual with that we're using it fairly ordinarily we've got",
    "start": "1763440",
    "end": "1769000"
  },
  {
    "text": "autoscaling groups for redundancy and it also helps us to scale horizontally so anything we deploy code",
    "start": "1769000",
    "end": "1776159"
  },
  {
    "text": "on here is in an autoscaling group The really nice part we like",
    "start": "1776159",
    "end": "1782480"
  },
  {
    "text": "obviously is any unhealthy instances get replaced and we don't really have to worry about",
    "start": "1782480",
    "end": "1788320"
  },
  {
    "text": "it however our transcoders here have unpredictable demand and we frequently",
    "start": "1788799",
    "end": "1794880"
  },
  {
    "text": "change the number of instances running for cost efficiency so I'm going to expand a bit more of that in the next",
    "start": "1794880",
    "end": "1801559"
  },
  {
    "text": "section um looking at Amazon's Q service sqs we have a few cu's in our system and",
    "start": "1801559",
    "end": "1807760"
  },
  {
    "text": "we really like them for data resiliency if you're not familiar with Amazon's cu's they operate on a first in",
    "start": "1807760",
    "end": "1813919"
  },
  {
    "text": "first out system basis so a single message can only be processed by um one",
    "start": "1813919",
    "end": "1820080"
  },
  {
    "text": "consumer at a time each message also has a visibility",
    "start": "1820080",
    "end": "1825360"
  },
  {
    "text": "timeout and that's a kind of a flag saying hey I've got this message whenever you pull one from from the",
    "start": "1825360",
    "end": "1831440"
  },
  {
    "text": "queue I've got this message for the next X time period And if you pick it up but",
    "start": "1831440",
    "end": "1837399"
  },
  {
    "text": "then you happen to die uh that message reservation ticket will eventually expire and uh the message will return",
    "start": "1837399",
    "end": "1843720"
  },
  {
    "text": "back to the queue after that's done that time out's",
    "start": "1843720",
    "end": "1848760"
  },
  {
    "text": "configurable we originally had it set for a really long time which is 2 hours",
    "start": "1848760",
    "end": "1853919"
  },
  {
    "text": "and that was because we needed um the machine the ticket to actually last as long as our longest transcoding instance",
    "start": "1853919",
    "end": "1860760"
  },
  {
    "text": "would go so we needed to be able to to handle high quality transcode for a long piece of",
    "start": "1860760",
    "end": "1867080"
  },
  {
    "text": "content uh this is obviously not ideal because if something uh dies one minute",
    "start": "1867080",
    "end": "1872200"
  },
  {
    "text": "after it's picked it up then you've got to wait two hours for that message to expire to return to the",
    "start": "1872200",
    "end": "1877480"
  },
  {
    "text": "queue uh we later changed this because we experienced it a little too often uh",
    "start": "1877480",
    "end": "1882519"
  },
  {
    "text": "to be an adjusted timeout extended periodically so uh every 5 minutes we now say yeah I'm still working on it",
    "start": "1882519",
    "end": "1888559"
  },
  {
    "text": "please update and extend the visibility time out for 5 minutes so that now means we have no upper limit on the uh length",
    "start": "1888559",
    "end": "1895120"
  },
  {
    "text": "of content that we can process it also means that we can recue unsuccessful jobs much faster so that that was a",
    "start": "1895120",
    "end": "1902200"
  },
  {
    "text": "win-win for us in terms of file storage we uh use S3",
    "start": "1902200",
    "end": "1910120"
  },
  {
    "text": "nothing too surprising here we purle this content after 7 days and we keep a rolling window open if we ever need to",
    "start": "1910120",
    "end": "1917159"
  },
  {
    "text": "to rcode something we just make the content providers reupload it",
    "start": "1917159",
    "end": "1923158"
  },
  {
    "text": "again in terms of our database uh we originally started with Dynamo",
    "start": "1923760",
    "end": "1929480"
  },
  {
    "text": "DB but we later moved to mySQL Dynamo was probably the biggest",
    "start": "1929480",
    "end": "1935720"
  },
  {
    "text": "mistake of our build and we'll first look at what it does and then I'll",
    "start": "1935720",
    "end": "1940960"
  },
  {
    "text": "explain why it turned out it wasn't suitable for us dynamos is no ql um and it's a key",
    "start": "1940960",
    "end": "1948399"
  },
  {
    "text": "value storage sort of mechanism it's ideal uh just for user key and value",
    "start": "1948399",
    "end": "1955600"
  },
  {
    "text": "pair storage user ID session data you can only retrieve objects by this key",
    "start": "1955600",
    "end": "1962320"
  },
  {
    "text": "and this key has to be unique so if there's something in the session data that you really wanted to retrieve things by like for example I don't know",
    "start": "1962320",
    "end": "1969000"
  },
  {
    "text": "a user has a preferred language and you want to pull out all records where they have a preferred language of French you",
    "start": "1969000",
    "end": "1974799"
  },
  {
    "text": "can't do that Dynam doesn't let you do that you can only retrieve an object by ID that's",
    "start": "1974799",
    "end": "1980639"
  },
  {
    "text": "it so uh that's obviously not ideal if you're trying to aggregate things which",
    "start": "1980639",
    "end": "1987399"
  },
  {
    "text": "we like to do and it's not like something like elastic search for example which is no SQL but you still",
    "start": "1987399",
    "end": "1993240"
  },
  {
    "text": "can query things by all stuff in in the uh in the content",
    "start": "1993240",
    "end": "1998399"
  },
  {
    "text": "here you also pay for the number of Records you retrieve per second right so uh if you retrieve a single record per",
    "start": "1999000",
    "end": "2005559"
  },
  {
    "text": "second Dynamo is cheap if you retrieve thousands of Records per second it's not so good for you",
    "start": "2005559",
    "end": "2013039"
  },
  {
    "text": "anymore as I said this didn't really work for us because we rely on",
    "start": "2013039",
    "end": "2019039"
  },
  {
    "text": "aggregations things like what jobs are being transed right now right what it's a current Q wait time we we want we want",
    "start": "2019039",
    "end": "2026240"
  },
  {
    "text": "to know because you know we want to take an action if it's slow trying to aggregate data in a nosql",
    "start": "2026240",
    "end": "2032919"
  },
  {
    "text": "system where you can only query by IDs really sucks we either have to retrieve",
    "start": "2032919",
    "end": "2038519"
  },
  {
    "text": "all the records and then manually aggregate them which sucks or we have to store that same information in multiple",
    "start": "2038519",
    "end": "2045679"
  },
  {
    "text": "places multiple sources of truth right for every single piece of aggregate data that we want and that sucks too so we",
    "start": "2045679",
    "end": "2053520"
  },
  {
    "text": "opted to go with retrieving all the records which as you can imagine is not",
    "start": "2053520",
    "end": "2058760"
  },
  {
    "text": "not not cheap and it doesn't really scale well this is 100% our fault we did not",
    "start": "2058760",
    "end": "2065320"
  },
  {
    "text": "uh do our homework when we were looking at Dynamo I think it's a fine thing if you if you know all the data you want is",
    "start": "2065320",
    "end": "2072440"
  },
  {
    "text": "a key value information things like user ID with session data that's actually fine but our system doesn't really suit",
    "start": "2072440",
    "end": "2080000"
  },
  {
    "text": "that and we made that mistake so bad luck for",
    "start": "2080000",
    "end": "2087358"
  },
  {
    "text": "us however if you decide to go with Dynamo there is something that you should know it doesn't scale",
    "start": "2087359",
    "end": "2093760"
  },
  {
    "text": "automatically things like ec2 you can say hey if if my machines hit a certain threshold of CPU I would really like you",
    "start": "2093760",
    "end": "2100760"
  },
  {
    "text": "to take an action at that point like spin up another instance for me Dynamo however doesn't do that you",
    "start": "2100760",
    "end": "2108800"
  },
  {
    "text": "can say I would like you to allow me to do a thousand records per a second as a query if you breach it Dynamo will send",
    "start": "2108800",
    "end": "2116240"
  },
  {
    "text": "you a message saying hey you breached it but it won't do anything for you so you have to actually take control of",
    "start": "2116240",
    "end": "2122040"
  },
  {
    "text": "monitoring that situation and you have to decide what action you want to take with that so it's a much more Hands-On",
    "start": "2122040",
    "end": "2128480"
  },
  {
    "text": "system than ec2 or any a lot of the other Amazon Services it's not an automatic",
    "start": "2128480",
    "end": "2135078"
  },
  {
    "text": "scaling having gone to uh nosql we retreated to the relative safety of a",
    "start": "2136520",
    "end": "2142599"
  },
  {
    "text": "relational database hosted on Amazon and we made that switch in February we still get managed hosting",
    "start": "2142599",
    "end": "2149839"
  },
  {
    "text": "because Amazon offers that we get automatic failover between availability",
    "start": "2149839",
    "end": "2155119"
  },
  {
    "text": "zones it's all great we also get aggregations because we get",
    "start": "2155119",
    "end": "2160560"
  },
  {
    "text": "SQL the unfortunate thing for us is that because we just ported our data straight As is B from Dynamo to mySQL uh our",
    "start": "2160560",
    "end": "2168280"
  },
  {
    "text": "design probably would have been different our data design would have been different from the start if we'd done",
    "start": "2168280",
    "end": "2174480"
  },
  {
    "text": "this on to cloud formation uh we deploy 95% of the system using cloud formation",
    "start": "2175200",
    "end": "2182599"
  },
  {
    "text": "templates cloud formation is Amazon's uh templated system for cre creating AWS",
    "start": "2182599",
    "end": "2188079"
  },
  {
    "text": "components so uh basically it's like infrastructure configuration as code everything on our architecture",
    "start": "2188079",
    "end": "2195440"
  },
  {
    "text": "diagram obviously excluding the CDN is templated using cloud",
    "start": "2195440",
    "end": "2200880"
  },
  {
    "text": "formation we can we also uh deploy it through a a build server so everything",
    "start": "2200880",
    "end": "2206800"
  },
  {
    "text": "in here can be deployed with just a few uh button clicks the templates are defined in Json",
    "start": "2206800",
    "end": "2214400"
  },
  {
    "text": "uh like this one as an example having everything in that template lets you build things really repeatably which",
    "start": "2214400",
    "end": "2220920"
  },
  {
    "text": "is very convenient for us and it you know also they're versionable you can check them",
    "start": "2220920",
    "end": "2226160"
  },
  {
    "text": "in it's good our real templates are many many sizes larger than that example um",
    "start": "2226160",
    "end": "2233520"
  },
  {
    "text": "but we also reference one of them uh one reference them by one another and so",
    "start": "2233520",
    "end": "2238760"
  },
  {
    "text": "ultimately you end up with a few really high top level templates that can deploy entire sections of the system just by",
    "start": "2238760",
    "end": "2245599"
  },
  {
    "text": "themselves so we've defined things like all of our ec2 instance settings our Auto scaling",
    "start": "2245599",
    "end": "2251760"
  },
  {
    "text": "settings regions ports tags security settings vpcs that's all done in Cloud",
    "start": "2251760",
    "end": "2258720"
  },
  {
    "text": "formotion most things that you can configure through the AWS console we've made available in our cloud formation",
    "start": "2258720",
    "end": "2264160"
  },
  {
    "text": "templates there are some things that aren't available through there so we do have to do a few steps manually and",
    "start": "2264160",
    "end": "2270480"
  },
  {
    "text": "that's unfortunate um not everything is available uh in cloud formation that way",
    "start": "2270480",
    "end": "2277880"
  },
  {
    "text": "and you you also have to kind of take a balance they can be hard to maintain we've kind of opted to go for",
    "start": "2277880",
    "end": "2285040"
  },
  {
    "text": "templating as much as possible which means that we can repeatedly and easily keep deploying and know that it's it's a",
    "start": "2285040",
    "end": "2290960"
  },
  {
    "text": "reliable thing um but there is an option to you know do some more manual",
    "start": "2290960",
    "end": "2296280"
  },
  {
    "text": "configuration and have more more kind of uh less pain with the cloud formation",
    "start": "2296280",
    "end": "2303599"
  },
  {
    "text": "templates so that's a look at the different language and infrastructure choices for Metro we use a node and go",
    "start": "2304200",
    "end": "2310440"
  },
  {
    "text": "for their relative strengths and we use quite a lot of different AWS technology that we work",
    "start": "2310440",
    "end": "2316359"
  },
  {
    "text": "through now we'll start to look at one of the really interesting pieces which is um how to transcode all the content",
    "start": "2316359",
    "end": "2322160"
  },
  {
    "text": "in a really sort of timely manner as mentioned earlier we Chang the",
    "start": "2322160",
    "end": "2327599"
  },
  {
    "text": "number of transcoding instances that we've got running very frequently so this is really useful for us because if",
    "start": "2327599",
    "end": "2332880"
  },
  {
    "text": "we've got a lot of content we can spin up a lot of transcoders but we can you can also go to zero to save",
    "start": "2332880",
    "end": "2338920"
  },
  {
    "text": "costs but how and you know when should you decide to spin up or tear down an instance there's there's a lot of",
    "start": "2338920",
    "end": "2345280"
  },
  {
    "text": "different factors here at play AWS has got hourly billing so as soon as you've started an instance for 2",
    "start": "2345280",
    "end": "2351720"
  },
  {
    "text": "minutes you have paid for an hour and you might as well get your whole money's worth there's also a balance between",
    "start": "2351720",
    "end": "2358280"
  },
  {
    "text": "cost and speed if you uh have a large instance size then that transcod is much faster",
    "start": "2358280",
    "end": "2364880"
  },
  {
    "text": "but it costs more so if you spun up an instance and it's only you know you're only using 5 minutes you're actually",
    "start": "2364880",
    "end": "2370680"
  },
  {
    "text": "better off kind of paying for a cheaper instance that's going to take much longer percentage wise of an hour to",
    "start": "2370680",
    "end": "2376359"
  },
  {
    "text": "transcode so that balance is going to be affected by the type of content you've got and uh the quality that you're",
    "start": "2376359",
    "end": "2384839"
  },
  {
    "text": "producing how quickly does the content need to actually be available we get a lot of content in",
    "start": "2384839",
    "end": "2390359"
  },
  {
    "text": "advance but uh there are some things that we transcode and make available like live shows so the news for instance",
    "start": "2390359",
    "end": "2396079"
  },
  {
    "text": "you know we can't get that in advance we only get it once it's finished broadcasting",
    "start": "2396079",
    "end": "2401160"
  },
  {
    "text": "so those things ideally we want to process quickly once they've been added to our",
    "start": "2401160",
    "end": "2408160"
  },
  {
    "text": "pipeline sometimes we also get things like a takedown request for a show so somebody wants to update a version of a",
    "start": "2408160",
    "end": "2415520"
  },
  {
    "text": "four corners or something because we we get a a a request to remove",
    "start": "2415520",
    "end": "2421599"
  },
  {
    "text": "that so because we have one Q if a high priority piece of content get sent down",
    "start": "2421599",
    "end": "2427800"
  },
  {
    "text": "all the content that's in the queue before that actually needs to be processed quickly before we get to this high priority piece of",
    "start": "2427800",
    "end": "2435240"
  },
  {
    "text": "content we also really don't know when people are going to put things in the in the pipeline people will batch things up",
    "start": "2435240",
    "end": "2441680"
  },
  {
    "text": "to go at random times of the day they also then just um you know add things in dribbles whenever we want if we knew",
    "start": "2441680",
    "end": "2448599"
  },
  {
    "text": "when it was all going to go in on a regular basis we could you know spin things up in advance so that it's ready",
    "start": "2448599",
    "end": "2453720"
  },
  {
    "text": "but we don't we also get a variety of different content length from you know 5 minute",
    "start": "2453720",
    "end": "2459760"
  },
  {
    "text": "videos to those uh 2hour documentaries so you can process a lot",
    "start": "2459760",
    "end": "2465160"
  },
  {
    "text": "of five minute videos in one hour but uh those documentaries might take one hour by themselves to to",
    "start": "2465160",
    "end": "2473078"
  },
  {
    "text": "process AWS uh also takes a little longer to react right it normally takes",
    "start": "2474760",
    "end": "2480160"
  },
  {
    "text": "5 minutes for autoscaling metrics to react when you monitoring something you",
    "start": "2480160",
    "end": "2485920"
  },
  {
    "text": "can can tell it to actually monitor a queue and say once it gets past a certain size spin something up that's fine for most of our content",
    "start": "2485920",
    "end": "2493160"
  },
  {
    "text": "but um if there's something high priority going through our queue that's probably not as fast as we would like um",
    "start": "2493160",
    "end": "2499720"
  },
  {
    "text": "we would like to react faster and particularly ec2 instances themselves take an additional few minutes to spin",
    "start": "2499720",
    "end": "2505960"
  },
  {
    "text": "up so we really want to react as soon as we know something's gone in the pipeline that's high",
    "start": "2505960",
    "end": "2511240"
  },
  {
    "text": "priority there's also no automatic shutdown instance that at the",
    "start": "2511240",
    "end": "2516400"
  },
  {
    "text": "1 hour mark you've got to keep track of how long an instance has been running and then choose to take an action once",
    "start": "2516400",
    "end": "2522440"
  },
  {
    "text": "the time is close to to running out at the time we built this as well um",
    "start": "2522440",
    "end": "2529359"
  },
  {
    "text": "you really didn't have control over which instances in an Autos scaling group would get shut down Amazon would",
    "start": "2529359",
    "end": "2534599"
  },
  {
    "text": "just pick the oldest ones and turn them off for you but that was really not ideal for us because that that instance",
    "start": "2534599",
    "end": "2540359"
  },
  {
    "text": "could actually be processing content at the time right we don't want that to happen uh they've just released",
    "start": "2540359",
    "end": "2547440"
  },
  {
    "text": "something or they have now released something called instance protection which means you can you know add a put a",
    "start": "2547440",
    "end": "2553800"
  },
  {
    "text": "lock on this instance and say please don't shut this down it's busy doing work and then once it's finished you can",
    "start": "2553800",
    "end": "2559000"
  },
  {
    "text": "release re release that lock that was pretty much my face when",
    "start": "2559000",
    "end": "2564119"
  },
  {
    "text": "trying to decide how to solve this problem right there are a lot of variables here and they all kind of",
    "start": "2564119",
    "end": "2570240"
  },
  {
    "text": "counteract with each other which one of these actually gets priority so instead of of tackling",
    "start": "2570240",
    "end": "2576640"
  },
  {
    "text": "everything we decided to just focus on our MVP we have one q and we have both",
    "start": "2576640",
    "end": "2582839"
  },
  {
    "text": "regular and priority content in there so don't make things wait too long because",
    "start": "2582839",
    "end": "2588760"
  },
  {
    "text": "uh we always want the priority videos to flow through as soon as possible so to do that we have to be",
    "start": "2588760",
    "end": "2594280"
  },
  {
    "text": "really proactive about supplying enough capacity to handle everything in the queue at any given time so that's how we",
    "start": "2594280",
    "end": "2601079"
  },
  {
    "text": "know we know that it's all going to be processed within a you know a particular time frame a given time frame",
    "start": "2601079",
    "end": "2608078"
  },
  {
    "text": "our best way to calculate capacity is to actually look at the profile when you drop the content in the",
    "start": "2608720",
    "end": "2615000"
  },
  {
    "text": "system so if you remember this slide from earlier uh this drop folder tells us the priority of content and that's",
    "start": "2615000",
    "end": "2621559"
  },
  {
    "text": "because we created specific folders to say hey this is high priority content please do something with this but it",
    "start": "2621559",
    "end": "2627640"
  },
  {
    "text": "also tells us the quality of the Renditions through the ffmp commands and",
    "start": "2627640",
    "end": "2632760"
  },
  {
    "text": "how many Renditions are being produced so we know know those three information pieces of information the priority the",
    "start": "2632760",
    "end": "2639280"
  },
  {
    "text": "quality and the number of additions from that information uh we",
    "start": "2639280",
    "end": "2645160"
  },
  {
    "text": "know situations when we'd want to proactively spin up new instances to be able to actually handle the content or",
    "start": "2645160",
    "end": "2650800"
  },
  {
    "text": "to process the content and keep the pipeline moving so particularly for priority and slow content that's when we",
    "start": "2650800",
    "end": "2657400"
  },
  {
    "text": "want to take some action so that particular folder wasn't high priority but it did produce two",
    "start": "2657400",
    "end": "2664640"
  },
  {
    "text": "high quality Renditions and they take a long time to transcode so we want to add",
    "start": "2664640",
    "end": "2670119"
  },
  {
    "text": "extra transcoders to the autoscaling group one per rendition so that uh we don't have stuff waiting behind those",
    "start": "2670119",
    "end": "2676359"
  },
  {
    "text": "two really long Renditions on the other hand if we have",
    "start": "2676359",
    "end": "2681440"
  },
  {
    "text": "high priority content we check to see how many Renditions there are normally for a lot of strange",
    "start": "2681440",
    "end": "2687599"
  },
  {
    "text": "business reasons um our high priority content actually produces only four Renditions and that's the four lower",
    "start": "2687599",
    "end": "2692640"
  },
  {
    "text": "quality Renditions so we only need to start up one transcoder and all those four Renditions",
    "start": "2692640",
    "end": "2699400"
  },
  {
    "text": "can be processed by that one transcoder they actually flow through really quickly there if it's neither high priority nor",
    "start": "2699400",
    "end": "2706839"
  },
  {
    "text": "high quality we check to see the ratio of the jobs in the queue to the available transcoders if the ratio is fine we",
    "start": "2706839",
    "end": "2714160"
  },
  {
    "text": "don't take any action we just leave it as is otherwise if the ratio is too high",
    "start": "2714160",
    "end": "2719280"
  },
  {
    "text": "we spin up another transcoder if there's no transcoders running we spin one up to ensure that",
    "start": "2719280",
    "end": "2725640"
  },
  {
    "text": "the pipeline is actually moving so there's never there should never be an instance where there's stuff in the queue and nothing to process",
    "start": "2725640",
    "end": "2733318"
  },
  {
    "text": "it to adjust the number of transcoders it is one line of code right we calculate how many",
    "start": "2733640",
    "end": "2741240"
  },
  {
    "text": "transcoders we've got in service and starting up so launching plus the number of transits",
    "start": "2741240",
    "end": "2747240"
  },
  {
    "text": "that we want to add and that gives us a desired capacity that we want for our Auto scaling",
    "start": "2747240",
    "end": "2753680"
  },
  {
    "text": "group however before we issue this command and we check to see how many transcoders we've got that are idle so",
    "start": "2753680",
    "end": "2759599"
  },
  {
    "text": "how many jobs are actually uh need to be processed versus how many transcoders do we have running and if we've got jobs in",
    "start": "2759599",
    "end": "2766440"
  },
  {
    "text": "Flight sorry more transcoders running than jobs in flight and those idle transcoders you know less than the",
    "start": "2766440",
    "end": "2772480"
  },
  {
    "text": "number of extra ones we want to spin up then we don't take any action if we do need extra uh capacity",
    "start": "2772480",
    "end": "2780240"
  },
  {
    "text": "and we execute this command AWS will process it within seconds and a new new",
    "start": "2780240",
    "end": "2785960"
  },
  {
    "text": "Trans code to start spinning up pretty much immediately so that is much faster for us than waiting for those automatic",
    "start": "2785960",
    "end": "2792240"
  },
  {
    "text": "5 minute scaling checks that AWS provides you on autoscaling",
    "start": "2792240",
    "end": "2798079"
  },
  {
    "text": "groups we build a machine with custom configuration of ffmpeg on it um and",
    "start": "2798599",
    "end": "2804000"
  },
  {
    "text": "that helps us a lot because ffmpeg takes 15 minutes to compile we don't want to pay that cost every single time so we",
    "start": "2804000",
    "end": "2809960"
  },
  {
    "text": "have an image and we use that for all of our autoscaling uh instances so they spin up as soon as possible",
    "start": "2809960",
    "end": "2817800"
  },
  {
    "text": "which instance size should we be using in an a scaling group you can kind",
    "start": "2819200",
    "end": "2824599"
  },
  {
    "text": "of specify like one instance size you can't really kind of mix it up so for us for simp Simplicity we decided to choose",
    "start": "2824599",
    "end": "2831240"
  },
  {
    "text": "just one transcoding is CPU heavy as well so we want something with a lot of CPU",
    "start": "2831240",
    "end": "2837319"
  },
  {
    "text": "power we decided to Target the AWS C4 series of instances which are quite high",
    "start": "2837319",
    "end": "2843720"
  },
  {
    "text": "on a price to compute power ratio this is a graph of all the instances",
    "start": "2843720",
    "end": "2849760"
  },
  {
    "text": "inside the C4 range and we uh our Benchmark machine was a MacBook Pro and",
    "start": "2849760",
    "end": "2855319"
  },
  {
    "text": "that's my colleague Nick MC's machine you can kind of see that's about",
    "start": "2855319",
    "end": "2860839"
  },
  {
    "text": "equivalent to a c42 extra large but in terms of trying to decide which one we",
    "start": "2860839",
    "end": "2866040"
  },
  {
    "text": "want we want something with a reasonable uh level of power for cost we really",
    "start": "2866040",
    "end": "2871319"
  },
  {
    "text": "don't want to pay a huge amount of cost and not get that much benefit in terms of extra CPU power",
    "start": "2871319",
    "end": "2877119"
  },
  {
    "text": "we decided to go with a C4 extra large for ours it's slightly less than the",
    "start": "2877119",
    "end": "2883000"
  },
  {
    "text": "next instant size on that graph sorry each each step there is actually twice",
    "start": "2883000",
    "end": "2888480"
  },
  {
    "text": "as much as the previous one so scaling up there is easy right if",
    "start": "2888480",
    "end": "2894480"
  },
  {
    "text": "you've got a lot of content and you think that it's high priority or you don't have enough comfortable capacity",
    "start": "2894480",
    "end": "2899520"
  },
  {
    "text": "you add more instances to the group we step up in those increments right",
    "start": "2899520",
    "end": "2905119"
  },
  {
    "text": "however scaling down requires knowing which instances are busy so that you're not stopping a trans code that's in",
    "start": "2905119",
    "end": "2911720"
  },
  {
    "text": "process so how do we know which trans transcoders are actually busy and our",
    "start": "2911720",
    "end": "2917000"
  },
  {
    "text": "answer is we don't for our MVP um we need to wait until that entire pipeline is clear so that we know that",
    "start": "2917000",
    "end": "2924520"
  },
  {
    "text": "none of them are busy and turn them down instead this is an example of the number",
    "start": "2924520",
    "end": "2931359"
  },
  {
    "text": "of transcoders that we've got running in action over a 4-Hour window",
    "start": "2931359",
    "end": "2936400"
  },
  {
    "text": "and you can see quite a lot of scaling up and down activity here um you can particularly see the inefficiency of",
    "start": "2936400",
    "end": "2942720"
  },
  {
    "text": "kind of waiting to see all of the uh content flow through before we decide to turn them off so there's always these",
    "start": "2942720",
    "end": "2949960"
  },
  {
    "text": "Cliffs right we can because we can scale up in steps but then we wait till everything's gone before we turn",
    "start": "2949960",
    "end": "2956040"
  },
  {
    "text": "off you can also see the effect of us tearing things down immediately and then triggering new transcoders to spin up",
    "start": "2956119",
    "end": "2962480"
  },
  {
    "text": "when we got new content in so there's times and we've SP everything down and we only we started up like a minute",
    "start": "2962480",
    "end": "2967799"
  },
  {
    "text": "later ideally we would tear everything down after when only uh you know when an hour was up and get the most out of our",
    "start": "2967799",
    "end": "2974319"
  },
  {
    "text": "instances here that's probably something that we're looking to do as an optimization in",
    "start": "2974319",
    "end": "2980559"
  },
  {
    "text": "future so here's another view of those transcoding instances this is a graph of instance lifetime over a 4-Hour window",
    "start": "2980559",
    "end": "2987160"
  },
  {
    "text": "and that's not just current instances that's that's everything that was in that previous graph it's heavily skewed",
    "start": "2987160",
    "end": "2992720"
  },
  {
    "text": "to shortlived instances um which is pretty in efficient we're paying for a whole hour of compute time but we're you",
    "start": "2992720",
    "end": "2999359"
  },
  {
    "text": "know only using a fraction of it these ones in blue are actually what you would consider efficient right",
    "start": "2999359",
    "end": "3005440"
  },
  {
    "text": "they're running more than over 30 minutes of an hour and everything else is underutilized this is probably a much",
    "start": "3005440",
    "end": "3012799"
  },
  {
    "text": "worse average picture than normal because there was a lot of short content dropped in on this this this particular day but you can see we do have",
    "start": "3012799",
    "end": "3021359"
  },
  {
    "text": "inefficiency so the Autos scaling part though it's not complete but it is a really interesting puzzle we've taken a",
    "start": "3021359",
    "end": "3028119"
  },
  {
    "text": "very minimal approach to profiles at the moment and that roughly indicates how long a a piece of content takes to",
    "start": "3028119",
    "end": "3034040"
  },
  {
    "text": "transcode um or how high priority it is and that tells us when we can scale so",
    "start": "3034040",
    "end": "3039799"
  },
  {
    "text": "we trigger scaling whenever new content gets added to the system and we shut all the instances down once the pipeline is",
    "start": "3039799",
    "end": "3047000"
  },
  {
    "text": "clear it's an area of the system where the tweaks can have a big impact on",
    "start": "3047000",
    "end": "3052160"
  },
  {
    "text": "throughput or on costs So speaking of the costs now we're going",
    "start": "3052160",
    "end": "3058000"
  },
  {
    "text": "to have a look at how much it actually cost to run Metro on this architecture this is a sample day in our",
    "start": "3058000",
    "end": "3063640"
  },
  {
    "text": "system we get a lot of different variety uh of usage patents and we just I'm just going to show you a couple of examples",
    "start": "3063640",
    "end": "3070240"
  },
  {
    "text": "here this is a view of Renditions per hour um 10: a.m. to 10: a.m. so",
    "start": "3070240",
    "end": "3076520"
  },
  {
    "text": "daytime's actually mostly on the left there we got a lot of uh content here dropped in by um a lot of our content",
    "start": "3076520",
    "end": "3084359"
  },
  {
    "text": "producers down towards the end there's there's kind of uh some of the content that you",
    "start": "3084359",
    "end": "3090119"
  },
  {
    "text": "would get from news broadcasts or live shows like Q&A this was a Monday night",
    "start": "3090119",
    "end": "3095920"
  },
  {
    "text": "how much did it cost",
    "start": "3095920",
    "end": "3100839"
  },
  {
    "text": "$572 looks even better in US Dollars uh this is what Amazon you know",
    "start": "3102160",
    "end": "3107359"
  },
  {
    "text": "shows you in the cost centers so uh this analysis here is also in US",
    "start": "3107359",
    "end": "3112880"
  },
  {
    "text": "dollars so this is a breakdown of all of our the different service costs 90% of",
    "start": "3112880",
    "end": "3118240"
  },
  {
    "text": "our costs is related to ec2 that's things like Auto scaling the actual instances",
    "start": "3118240",
    "end": "3124119"
  },
  {
    "text": "running our database takes 6% of the costs S3 file storage takes 4% and",
    "start": "3124119",
    "end": "3130720"
  },
  {
    "text": "because you pay for sqs messages by the millions we don't even register on the scale at all it's totally",
    "start": "3130720",
    "end": "3137119"
  },
  {
    "text": "free to show you the varied nature of our output uh this next 24 hours this",
    "start": "3137119",
    "end": "3142839"
  },
  {
    "text": "the next day has a really different uh usage pattern somebody batched a whole bunch of content to go at 3 in the",
    "start": "3142839",
    "end": "3148960"
  },
  {
    "text": "morning and um it kind of just shows you that we can't run instances at any like we can't predict and we can't preempt",
    "start": "3148960",
    "end": "3156280"
  },
  {
    "text": "and know when people are going to put things in because these two days had just really different usage",
    "start": "3156280",
    "end": "3162400"
  },
  {
    "text": "pattern that was $34 so you might be wondering what it",
    "start": "3162400",
    "end": "3168720"
  },
  {
    "text": "costs for a whole year of I content assuming that the current bit rates and the current number of",
    "start": "3168720",
    "end": "3174400"
  },
  {
    "text": "Renditions we prod uce stays the same we've estimated it's going to be",
    "start": "3174400",
    "end": "3179839"
  },
  {
    "text": "165,000 uh Australian dollars to produce the whole IV catalog for a whole year but it also",
    "start": "3179839",
    "end": "3187400"
  },
  {
    "text": "looks better in US dollars so this is a massive deal for us",
    "start": "3187400",
    "end": "3192480"
  },
  {
    "text": "right our costs are so reasonable that suddenly a lot of the inefficiency problems we have with those those you",
    "start": "3192480",
    "end": "3198720"
  },
  {
    "text": "know uh scaling with transcoding it's sort of less of a problem it starts",
    "start": "3198720",
    "end": "3204160"
  },
  {
    "text": "becoming something we want to solve when we when we look at producing extra um",
    "start": "3204160",
    "end": "3209720"
  },
  {
    "text": "ABC content like news or the commercial things or if we start to produce higher Renditions with ivu which are going to",
    "start": "3209720",
    "end": "3216079"
  },
  {
    "text": "take longer going back to our car analogy for this we you know we managed to change",
    "start": "3216079",
    "end": "3222400"
  },
  {
    "text": "the cost of the system from this Porsche here to something more like a bike but",
    "start": "3222400",
    "end": "3228040"
  },
  {
    "text": "we still meet a really reasonable time frame right and that makes us all really",
    "start": "3228040",
    "end": "3234160"
  },
  {
    "text": "happy looking at some future features that we would look add for here um at the moment",
    "start": "3234160",
    "end": "3241799"
  },
  {
    "text": "again we cater for just I VI content and Metro works just fine for that but if we needed you know higher Renditions or",
    "start": "3241799",
    "end": "3248319"
  },
  {
    "text": "more quality Renditions then we can look at some more",
    "start": "3248319",
    "end": "3254280"
  },
  {
    "text": "optimizations we could introduce a priority Q instead of you know juggling one Q with a lot of different types of",
    "start": "3254280",
    "end": "3260480"
  },
  {
    "text": "content so the idea that you would pay extra to have um different time uh to be",
    "start": "3260480",
    "end": "3267760"
  },
  {
    "text": "able to actually process your content faster so um stuff that's priority would",
    "start": "3267760",
    "end": "3273280"
  },
  {
    "text": "instantly spin up a larger transcoder box that would process its FFM Peg content faster but everything else could",
    "start": "3273280",
    "end": "3279359"
  },
  {
    "text": "sit and wait and be batched overnight when it's cheap we could use things like spot instances in AWS which are eight",
    "start": "3279359",
    "end": "3285640"
  },
  {
    "text": "times cheaper than uh regular on demand it would also help us solve our",
    "start": "3285640",
    "end": "3292000"
  },
  {
    "text": "problem with underutilized instances because that batch can you know obviously collapse and be processed by",
    "start": "3292000",
    "end": "3297319"
  },
  {
    "text": "one instance rather than all these separate ones we could also start transcoding in",
    "start": "3297319",
    "end": "3303079"
  },
  {
    "text": "segments you know at the moment we take one file and we process that on one machine if it's a long piece of content",
    "start": "3303079",
    "end": "3309280"
  },
  {
    "text": "it's going to take a long piece of time and if it's 1 hour and 1 second then that's",
    "start": "3309280",
    "end": "3316319"
  },
  {
    "text": "annoying so instead we could kind of look at things like transcoding 10-second batches FFM Peg is capable of",
    "start": "3316319",
    "end": "3323440"
  },
  {
    "text": "breaking a file out um transing it we could transcode that in sections and then push it back together again we",
    "start": "3323440",
    "end": "3329319"
  },
  {
    "text": "actually looked at AWS Lambda when we were doing this initially as something",
    "start": "3329319",
    "end": "3335480"
  },
  {
    "text": "that we could try it was uh in its infancy then this is about you mid last",
    "start": "3335480",
    "end": "3341200"
  },
  {
    "text": "year and also not available in Australia so we would be using all that Australian",
    "start": "3341200",
    "end": "3346240"
  },
  {
    "text": "internet fast internet connection to send stuff to the US and everyone's been paying it out today so you can see that",
    "start": "3346240",
    "end": "3352720"
  },
  {
    "text": "that wouldn't be a really good solution for us",
    "start": "3352720",
    "end": "3357000"
  },
  {
    "text": "doing it in segments would obviously be really beneficial in terms of um an ETA you know we would know the there would",
    "start": "3357799",
    "end": "3364280"
  },
  {
    "text": "be a constant transer time basically to actually produce this content we're splitting it up into 10c chunks split up",
    "start": "3364280",
    "end": "3370039"
  },
  {
    "text": "into as many 10c chunks as we need and tell you that your content is going to be available in 2 minutes or however",
    "start": "3370039",
    "end": "3375200"
  },
  {
    "text": "long it's going to take you also really don't get stuck behind content that takes longer than",
    "start": "3375200",
    "end": "3381079"
  },
  {
    "text": "others everything takes two minutes then you're just going to get your content soon",
    "start": "3381079",
    "end": "3386920"
  },
  {
    "text": "the last thing we could do is actually or a third thing we could do is to remove our Reliance on that hardcoded",
    "start": "3387039",
    "end": "3392520"
  },
  {
    "text": "trans uh profiles we could use something uh so sorry just to remind you here",
    "start": "3392520",
    "end": "3398359"
  },
  {
    "text": "these uh profiles are hardcoded with our folders so they're not ideal right every",
    "start": "3398359",
    "end": "3404039"
  },
  {
    "text": "new type of content that we get is another permutation in our profiles and another hardcoded",
    "start": "3404039",
    "end": "3410160"
  },
  {
    "text": "folder so how do we get around it we can use something called FF probe which is part of",
    "start": "3410160",
    "end": "3416000"
  },
  {
    "text": "ffmpeg it actually uh tells you everything about the source file when it comes in you can just run it against the",
    "start": "3416000",
    "end": "3422000"
  },
  {
    "text": "file and you get all these this information so things like um the",
    "start": "3422000",
    "end": "3427240"
  },
  {
    "text": "resolution that we've got here if we looked at it um I can look at that and go that's not one of our standard",
    "start": "3427240",
    "end": "3432280"
  },
  {
    "text": "resolution sizes so I know it's something that has this black bar at the top that I need to crop",
    "start": "3432280",
    "end": "3438039"
  },
  {
    "text": "off things like the frames per second hey I know I need to actually change that to 25 frames per second because",
    "start": "3438520",
    "end": "3443640"
  },
  {
    "text": "that's what we want for I what we're producing this here is our um stream",
    "start": "3443640",
    "end": "3451119"
  },
  {
    "text": "five which is unknown that's our caption stream that's our uh subtitles track and",
    "start": "3451119",
    "end": "3457359"
  },
  {
    "text": "um if we saw that in a file we could go oh great I'm going to take that and process it and actually produce captions",
    "start": "3457359",
    "end": "3462760"
  },
  {
    "text": "which which would be available in iew as well that's something we could add to our um system that would be incredibly",
    "start": "3462760",
    "end": "3468640"
  },
  {
    "text": "useful so all this information that we're hardcoding in profiles um we could actually derive from the video using FF",
    "start": "3468640",
    "end": "3475839"
  },
  {
    "text": "probe rather than putting it in the in the profile and that's definitely some features that we would like to add in",
    "start": "3475839",
    "end": "3483078"
  },
  {
    "text": "future so just in closing now uh the ABC was really looking for ways to improve",
    "start": "3483359",
    "end": "3489240"
  },
  {
    "text": "our cost efficiency for transcoding we had some pretty odd requirements things like the cropping or",
    "start": "3489240",
    "end": "3496760"
  },
  {
    "text": "captions and we really don't need everything to be instantly processed we can afford to wait and pay pay less for",
    "start": "3496760",
    "end": "3504160"
  },
  {
    "text": "them so we designed a new system using uh node go ffmpeg and a lot of AWS",
    "start": "3504160",
    "end": "3511839"
  },
  {
    "text": "components we're taking advantage of a lot of autoscaling techniques so that we can meet changing levels of demand but",
    "start": "3511839",
    "end": "3518000"
  },
  {
    "text": "pay for only what we need and our system can handle unique requirements for",
    "start": "3518000",
    "end": "3523839"
  },
  {
    "text": "things like cropping or filing coding from different sources that aren't",
    "start": "3523839",
    "end": "3529119"
  },
  {
    "text": "standard we can also still do this in a really reasonable time frame so our",
    "start": "3529119",
    "end": "3534960"
  },
  {
    "text": "costs have dropped dramatically and we are really happy with that so thank you very much for",
    "start": "3534960",
    "end": "3542119"
  },
  {
    "text": "following through this journey and I really hope you've enjoyed watching uh an insight into a new video transcoding",
    "start": "3542119",
    "end": "3549079"
  },
  {
    "text": "service for the ABC's",
    "start": "3549079",
    "end": "3552079"
  },
  {
    "text": "future how's our time we are up one question yeah",
    "start": "3556200",
    "end": "3562680"
  },
  {
    "text": "isas is there reason why we didn't use elastic transr yes um a it was more",
    "start": "3563359",
    "end": "3568920"
  },
  {
    "text": "expensive than doing it with FFM ourself particularly for the volume we've got elastic trans Al elastic transc also",
    "start": "3568920",
    "end": "3574799"
  },
  {
    "text": "doesn't do the cropping and and things that we need so yeah there was just extra",
    "start": "3574799",
    "end": "3581838"
  },
  {
    "text": "qu so for the existing content we had did we have to write we didn't have to",
    "start": "3585000",
    "end": "3590280"
  },
  {
    "text": "write any extensions no for FFM p no so everything that we wanted was available of the Box um I am happy to continue",
    "start": "3590280",
    "end": "3597280"
  },
  {
    "text": "answering questions but um I might just do that off the side so thanks very",
    "start": "3597280",
    "end": "3603640"
  },
  {
    "text": "much",
    "start": "3603640",
    "end": "3606640"
  }
]