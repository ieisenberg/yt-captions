[
  {
    "start": "0",
    "end": "135000"
  },
  {
    "text": "so welcome everybody thank you for coming into my session i",
    "start": "6319",
    "end": "11519"
  },
  {
    "text": "just wanted to present here a strange idea i had some time ago it's a kind of automating",
    "start": "11519",
    "end": "18960"
  },
  {
    "text": "the diagnostic process but in production which is i mean something that you shouldn't",
    "start": "18960",
    "end": "25279"
  },
  {
    "text": "really be care not to mess up your entire production website",
    "start": "25279",
    "end": "32480"
  },
  {
    "text": "and i am rafale uh i'm a software architect i",
    "start": "32480",
    "end": "38640"
  },
  {
    "text": "all usually travel around the world to go and give talks in conferences",
    "start": "38640",
    "end": "45200"
  },
  {
    "text": "i have been in many places many nice places around the world and i am a consultant in many industries",
    "start": "45200",
    "end": "52559"
  },
  {
    "text": "usually i i really love to compare the different",
    "start": "52559",
    "end": "58879"
  },
  {
    "text": "kind of problematics that are in production so different between i mean",
    "start": "58879",
    "end": "65518"
  },
  {
    "text": "financial and the healthcare or racing cars like formula one",
    "start": "65519",
    "end": "70640"
  },
  {
    "text": "and then manufacturing environment so so many different things that have to be done in different",
    "start": "70640",
    "end": "76320"
  },
  {
    "text": "ways depending on the context and i really love that so",
    "start": "76320",
    "end": "82159"
  },
  {
    "text": "you can find me on twitter on github and we will talk a little bit of my last project that i",
    "start": "82159",
    "end": "88880"
  },
  {
    "text": "wrote to you for automating diagnostics so let's go on and and then we will see",
    "start": "88880",
    "end": "95759"
  },
  {
    "text": "uh first of all my editor just uh created me yesterday this uh",
    "start": "95759",
    "end": "101840"
  },
  {
    "text": "discount code for a book that i wrote with the other smart guys and it's about c sharp eight and dot net",
    "start": "101840",
    "end": "108960"
  },
  {
    "text": "core of course there is already c sharp nine but you know there are many things uh every year so",
    "start": "108960",
    "end": "116719"
  },
  {
    "text": "let's stick with this one and then maybe we will update uh the title",
    "start": "116719",
    "end": "121759"
  },
  {
    "text": "in in the future and uh well if you want uh this is the the super code that they",
    "start": "121759",
    "end": "128080"
  },
  {
    "text": "produced to have a nice discount let's go on and let's start about",
    "start": "128080",
    "end": "133840"
  },
  {
    "text": "this presentation what's the goal for today so the goal is automating the diagnostic process in",
    "start": "133840",
    "end": "140239"
  },
  {
    "start": "135000",
    "end": "191000"
  },
  {
    "text": "production this is a very delicate",
    "start": "140239",
    "end": "145520"
  },
  {
    "text": "topic because i mean in production you should not want to install anything that can disrupt the",
    "start": "146080",
    "end": "152000"
  },
  {
    "text": "environment and so on but we will see how to do and basically this is a two-step process",
    "start": "152000",
    "end": "158640"
  },
  {
    "text": "so the first one is triggering a diagnostic so understanding what's the",
    "start": "158640",
    "end": "165200"
  },
  {
    "text": "best time a moment in time where you want to start your diagnostic process and",
    "start": "165200",
    "end": "171840"
  },
  {
    "text": "we will do this using the diagnostic client library which is pretty new in in.net and then we will programmatically",
    "start": "171840",
    "end": "179200"
  },
  {
    "text": "analyze and diagnose the application using tlrmd which is a historical",
    "start": "179200",
    "end": "185200"
  },
  {
    "text": "library uh similar to what sos does okay",
    "start": "185200",
    "end": "191519"
  },
  {
    "text": "so normally you you you make the annual stick at development time of course so in at that time frame your home your",
    "start": "191519",
    "end": "199440"
  },
  {
    "text": "best perfect your best friend at developing time is the debugger maybe visual studio maybe uh windy bg if",
    "start": "199440",
    "end": "207360"
  },
  {
    "text": "you are in windows or lldb uh with the sos sos is a very very important fundamental",
    "start": "207360",
    "end": "215120"
  },
  {
    "text": "uh plugin for those debuggers because they it's a plugin that can give",
    "start": "215120",
    "end": "222319"
  },
  {
    "text": "you a clear idea on how the memory of a manager the process",
    "start": "222319",
    "end": "227840"
  },
  {
    "text": "is structured so uh it it's easier to investigate on a net",
    "start": "227840",
    "end": "234239"
  },
  {
    "text": "application because you know exactly how an object is made what are the metadata",
    "start": "234239",
    "end": "240879"
  },
  {
    "text": "and you can walk the tree you can go to the roots of the garbage collector and so on so",
    "start": "240879",
    "end": "246239"
  },
  {
    "text": "there are many specific details that otherwise if you see just the memory from a native",
    "start": "246239",
    "end": "252480"
  },
  {
    "text": "perspective it's a mess but unless you're analyzing a dump",
    "start": "252480",
    "end": "258000"
  },
  {
    "text": "please don't use them in production i mean it's something that you don't want to and also if you want to use a dump you",
    "start": "258000",
    "end": "264960"
  },
  {
    "text": "know that dumping a process can take a while and so you don't want to stop uh the application in process just to to",
    "start": "264960",
    "end": "272560"
  },
  {
    "text": "to bring a snapshot and and say oh oh my god and now i am shutting almost down everyone just to",
    "start": "272560",
    "end": "280400"
  },
  {
    "text": "take the the dump in production there are of course other tools and uh",
    "start": "280400",
    "end": "287600"
  },
  {
    "text": "profilers of course are one of the best i mean there are two kind of",
    "start": "287600",
    "end": "293199"
  },
  {
    "text": "profilers the one that you can even use in production and or the one that you can use at",
    "start": "293199",
    "end": "299680"
  },
  {
    "text": "development time you normally you want to provide to see the performance of the application and the memory profiling",
    "start": "299680",
    "end": "306080"
  },
  {
    "text": "on your development machine of course if you can reproduce the problem and the issue but i mean",
    "start": "306080",
    "end": "314160"
  },
  {
    "text": "there are two different uh categories the first one is the classical uh performance that profiler that you",
    "start": "314160",
    "end": "321120"
  },
  {
    "text": "can just install your machine and monitor what's what's happening",
    "start": "321120",
    "end": "326320"
  },
  {
    "text": "and the other one is just to test this very small portion of your code to understand",
    "start": "326320",
    "end": "332160"
  },
  {
    "text": "whether they can hit the performance in the overall performance but at the very last moment",
    "start": "332160",
    "end": "339440"
  },
  {
    "text": "when you are in production and you get a problem i mean you all kind of uh i mean",
    "start": "339440",
    "end": "346000"
  },
  {
    "text": "are you you make it you you probably are i feel like all lost",
    "start": "346000",
    "end": "352160"
  },
  {
    "text": "because there is something that you may still not understand you may still",
    "start": "352160",
    "end": "358800"
  },
  {
    "text": "was not in your goals and so you you don't know exactly what to do",
    "start": "358800",
    "end": "363840"
  },
  {
    "text": "by the way there are other things that you can do i worked a lot in the net debugging",
    "start": "363840",
    "end": "370240"
  },
  {
    "text": "infrastructure which is a different topic but i mean how to build a debugger",
    "start": "370240",
    "end": "376000"
  },
  {
    "text": "and the language the dsl and so on code generation and if you're interested please let me",
    "start": "376000",
    "end": "381199"
  },
  {
    "text": "know because i'm very proficient in that space",
    "start": "381199",
    "end": "386800"
  },
  {
    "start": "386000",
    "end": "510000"
  },
  {
    "text": "so but what about troubleshooting in production this is the problem and of course you",
    "start": "386800",
    "end": "392800"
  },
  {
    "text": "starts with the lock and the locks are super important but must be balanced and not too much",
    "start": "392800",
    "end": "398800"
  },
  {
    "text": "not too few i mean there are many uh discussions about this and requires a",
    "start": "398800",
    "end": "404319"
  },
  {
    "text": "lot of wisdom because it depends from the information that you want to log",
    "start": "404319",
    "end": "410319"
  },
  {
    "text": "and not always the logs are so clear and i mean how many times i face it to this",
    "start": "410319",
    "end": "416800"
  },
  {
    "text": "issue with the customers it's a very tough problem so uh creating a dump is",
    "start": "416800",
    "end": "424400"
  },
  {
    "text": "definitely a huge help because you have like a photo of your process in that",
    "start": "424400",
    "end": "431039"
  },
  {
    "text": "moment but uh when you want to catch this spot",
    "start": "431039",
    "end": "437280"
  },
  {
    "text": "and there are many tools to to take a dump you may know netdump is the global tool that you may",
    "start": "437280",
    "end": "444160"
  },
  {
    "text": "install and very lightweight to capture the dump but there are many other alternatives",
    "start": "444160",
    "end": "449520"
  },
  {
    "text": "you probably knows all of them and catching the perfect moment to take this",
    "start": "449520",
    "end": "456880"
  },
  {
    "text": "photo is difficult you have to make your process smile before taking the photo and this is a",
    "start": "456880",
    "end": "464639"
  },
  {
    "text": "big problem so the other",
    "start": "464639",
    "end": "470879"
  },
  {
    "text": "possibility that you have is to install the performance counters monitors",
    "start": "470960",
    "end": "476240"
  },
  {
    "text": "in production like netrace.net counters and so on and for example.net monitoring is very",
    "start": "476240",
    "end": "483280"
  },
  {
    "text": "valuable because it expose directly a website and then you can go with your browser",
    "start": "483280",
    "end": "490879"
  },
  {
    "text": "and visit certain endpoints and they will show you the memory status",
    "start": "490879",
    "end": "496240"
  },
  {
    "text": "and what's going on with the cpu and the memory pages and so on so everything is very good",
    "start": "496240",
    "end": "504000"
  },
  {
    "text": "but still you may i mean uh miss the perfect moment",
    "start": "504000",
    "end": "511039"
  },
  {
    "start": "510000",
    "end": "621000"
  },
  {
    "text": "so the challenges with dump analysis are very high because picking the right moment is super",
    "start": "511039",
    "end": "517440"
  },
  {
    "text": "challenging and certain events we know are sporadics or something that rarely happens and you cannot stay hours",
    "start": "517440",
    "end": "525040"
  },
  {
    "text": "in front of your machine to understand what's the best moment so the other uh point is",
    "start": "525040",
    "end": "531680"
  },
  {
    "text": "that once you have the dump you may have been lucky in capturing the right moment",
    "start": "531680",
    "end": "537360"
  },
  {
    "text": "you know there are problems that managing investigating the memory with the sos it's boring it's",
    "start": "537360",
    "end": "545200"
  },
  {
    "text": "hard because the comments are not that easy it's very repetitive because you may",
    "start": "545200",
    "end": "551040"
  },
  {
    "text": "have hundreds of allocations or even thousands or",
    "start": "551040",
    "end": "556399"
  },
  {
    "text": "even more and repeating all over and over all the comments to",
    "start": "556399",
    "end": "561440"
  },
  {
    "text": "catch the perfect moment it's definitely very very hard and it's of course an expensive",
    "start": "561440",
    "end": "568720"
  },
  {
    "text": "process that i mean not many companies want to to afford also when this investigation",
    "start": "568720",
    "end": "576320"
  },
  {
    "text": "is made by the human there are also legal problems so there may be",
    "start": "576320",
    "end": "582560"
  },
  {
    "text": "sensitive data let's take in the health care environment there are many issues about that and the",
    "start": "582560",
    "end": "588560"
  },
  {
    "text": "privacy constraints so you may have you may require a uh",
    "start": "588560",
    "end": "594080"
  },
  {
    "text": "to be delegated to act on that particular content you may want that you don't have",
    "start": "594080",
    "end": "602800"
  },
  {
    "text": "of course sensitive data they may be the hash of the sensitive data instead of the",
    "start": "602800",
    "end": "609600"
  },
  {
    "text": "clear data in memory but before or later you may catch the moment in which the",
    "start": "609600",
    "end": "617120"
  },
  {
    "text": "the data is clear visible and so it's not that good so uh what's our scenario for today and",
    "start": "617120",
    "end": "625600"
  },
  {
    "start": "621000",
    "end": "999000"
  },
  {
    "text": "let's see how does it work this strange idea that i had you i have normally an application that",
    "start": "625600",
    "end": "633600"
  },
  {
    "text": "is in process on your right that is an asp.net core where the clr of",
    "start": "633600",
    "end": "638880"
  },
  {
    "text": "course controllers services whatever else and this is our process that you want to investigate and",
    "start": "638880",
    "end": "645760"
  },
  {
    "text": "normally we have a lot of clients that hits this application and",
    "start": "645760",
    "end": "651200"
  },
  {
    "text": "something may go wrong and we don't know exactly what so in the scenario of today we i",
    "start": "651200",
    "end": "659040"
  },
  {
    "text": "replaced of course the the clients the browsers with the stress application which",
    "start": "659040",
    "end": "667440"
  },
  {
    "text": "you can see from this menu is a console application and you have many possibilities you can",
    "start": "667440",
    "end": "672880"
  },
  {
    "text": "make guests and post on web apis with even a",
    "start": "672880",
    "end": "678320"
  },
  {
    "text": "concurrent number of requests so here the simple post for example is executed",
    "start": "678320",
    "end": "684160"
  },
  {
    "text": "at the same exact time in a 1000 requests so that you can create a certain load to",
    "start": "684160",
    "end": "690480"
  },
  {
    "text": "stress the application maybe you have other ways to see and to stress your application which is",
    "start": "690480",
    "end": "696800"
  },
  {
    "text": "good there are many good tools to do that but just this is just for our demo our purposes",
    "start": "696800",
    "end": "702000"
  },
  {
    "text": "and they can do several things a simple get a single post",
    "start": "702000",
    "end": "707200"
  },
  {
    "text": "causing some exception on on the on the server side causing something that goes very very",
    "start": "707200",
    "end": "714399"
  },
  {
    "text": "slow on the server side and so you want to see what really happens and then you can",
    "start": "714399",
    "end": "721360"
  },
  {
    "text": "leak just blobs so byte arrays or entire graph in memory and we will see",
    "start": "721360",
    "end": "727040"
  },
  {
    "text": "that and also if you want to repeat the test you can free the leaks and then",
    "start": "727040",
    "end": "732480"
  },
  {
    "text": "gc collect if you want to see the differences and cpu stress of course slow down",
    "start": "732480",
    "end": "737839"
  },
  {
    "text": "everything which is not very practical when you have to to stream your demo uh over the internet but",
    "start": "737839",
    "end": "745279"
  },
  {
    "text": "but that's good and also there isn't one important thing so we can also trigger",
    "start": "745279",
    "end": "752320"
  },
  {
    "text": "uh our diagnostic with the custom header so one of these we will see in a moment can",
    "start": "752320",
    "end": "758240"
  },
  {
    "text": "also uh trigger a diagnostic in so that we add an x",
    "start": "758240",
    "end": "766240"
  },
  {
    "text": "dash something and this will be recognized from the application and we we can",
    "start": "766240",
    "end": "772880"
  },
  {
    "text": "trigger the diagnostic that so okay this is the scenario let's",
    "start": "772880",
    "end": "779279"
  },
  {
    "text": "let's uh make a hypothesis for a moment that everything is is okay it's up and",
    "start": "779279",
    "end": "784959"
  },
  {
    "text": "running and and we run this and the idea is to run a second application let's",
    "start": "784959",
    "end": "791680"
  },
  {
    "text": "call it like a sidecar application that lives on the same machine of course",
    "start": "791680",
    "end": "798800"
  },
  {
    "text": "and just has the duty to monitor our process number one and we want to",
    "start": "798800",
    "end": "806079"
  },
  {
    "text": "subscribe the trace events which are basically the same that every profile subscribes so it's not invasive it's",
    "start": "806079",
    "end": "812480"
  },
  {
    "text": "something very lightweight it's um something that you may want to",
    "start": "812480",
    "end": "818079"
  },
  {
    "text": "use in order to have the perfect moment to know the perfect moment that you want to investigate",
    "start": "818079",
    "end": "825839"
  },
  {
    "text": "why the the the process is is making something wrong and so our dynastic application will run",
    "start": "825839",
    "end": "833920"
  },
  {
    "text": "the diagnostic client which is able to open this channel with directly the clr so you don't have",
    "start": "833920",
    "end": "839920"
  },
  {
    "text": "to prepare anything else in your application just the clr that is from net core 3.0",
    "start": "839920",
    "end": "847760"
  },
  {
    "text": "is ready to be diagnosed in local thanks to a local named pipe",
    "start": "847760",
    "end": "854079"
  },
  {
    "text": "and you can connect to this server and you can directly talk with the clr",
    "start": "854079",
    "end": "861360"
  },
  {
    "text": "of any application if you have the permission of course and investigate on what's going on",
    "start": "861360",
    "end": "868480"
  },
  {
    "text": "and when you subscribe to events you receive just the same events you can see with",
    "start": "868480",
    "end": "874399"
  },
  {
    "text": "the various performance monitoring what else okay it's a very similar mechanism to",
    "start": "874399",
    "end": "879680"
  },
  {
    "text": "etw but it's on that.net core so this inter mechanism of the trace events is",
    "start": "879680",
    "end": "885519"
  },
  {
    "text": "something the run also cross-platform and then we will diagnose",
    "start": "885519",
    "end": "890639"
  },
  {
    "text": "the issues using clrm d2o but also some extension that i wrote to this purpose",
    "start": "890639",
    "end": "897839"
  },
  {
    "text": "first thing that i want to do is that when i see that the memory is too high maybe i have",
    "start": "897839",
    "end": "904880"
  },
  {
    "text": "a very high number of http requests in a second and whatever else you can",
    "start": "904880",
    "end": "910800"
  },
  {
    "text": "think about so memory and threads and blah blah blah or first time exceptions for for example",
    "start": "910800",
    "end": "918880"
  },
  {
    "text": "you can like take a snapshot not a dump because the dump is heavier and but you can take a snapshot",
    "start": "918880",
    "end": "926480"
  },
  {
    "text": "with it takes which takes about 100 milliseconds maybe 200 milliseconds",
    "start": "926480",
    "end": "933680"
  },
  {
    "text": "at maximum it's not super lightweight but in sometimes it can takes even",
    "start": "933680",
    "end": "940800"
  },
  {
    "text": "lower than 100 milliseconds so you don't want to make this",
    "start": "940800",
    "end": "946320"
  },
  {
    "text": "continuously and this is why we have to monitor these trace",
    "start": "946320",
    "end": "951360"
  },
  {
    "text": "events and take just the snapshot at the at the right moment in the moment that you really believe",
    "start": "951360",
    "end": "957440"
  },
  {
    "text": "that there is something that is going very strange and when you take the snapshot we can",
    "start": "957440",
    "end": "964399"
  },
  {
    "text": "literally forget about the application because we will do every investigation not on the",
    "start": "964399",
    "end": "970160"
  },
  {
    "text": "process but just on the snapshot and so the clrmd is able to snapshot the",
    "start": "970160",
    "end": "976399"
  },
  {
    "text": "application and this is never a step to shut the application is investigated uh just forgetting",
    "start": "976399",
    "end": "984000"
  },
  {
    "text": "uh all uh whatever else meanwhile you can continue to monitor",
    "start": "984000",
    "end": "989519"
  },
  {
    "text": "the application so if you want to take a second snapshot and third snapshot you can so it's something that literally",
    "start": "989519",
    "end": "996639"
  },
  {
    "text": "you absolutely can do so at the very end uh the idea is not to",
    "start": "996639",
    "end": "1003600"
  },
  {
    "start": "999000",
    "end": "1089000"
  },
  {
    "text": "have a new cool tool generic for all your applications that can diagnose",
    "start": "1003600",
    "end": "1010880"
  },
  {
    "text": "everything the idea that i want to give you is that you should create your",
    "start": "1010880",
    "end": "1018399"
  },
  {
    "text": "own diagnostic application but of course this is a demo this is a session and so i created a generic application a",
    "start": "1018399",
    "end": "1025280"
  },
  {
    "text": "kind of generic debugging post-mortem debugging that can investigate",
    "start": "1025280",
    "end": "1030640"
  },
  {
    "text": "in the snapshot just to show you what kind of features do you have at your",
    "start": "1030640",
    "end": "1037120"
  },
  {
    "text": "fingertips so you want to investigate so i create a just for this demo but",
    "start": "1037120",
    "end": "1042240"
  },
  {
    "text": "i mean again it's something that it's it's not the point in production uh",
    "start": "1042240",
    "end": "1048160"
  },
  {
    "text": "diagnostic process which is a wpf application",
    "start": "1048160",
    "end": "1053360"
  },
  {
    "text": "where you can just take the snapshot and investigate it and every uh items",
    "start": "1053360",
    "end": "1061760"
  },
  {
    "text": "every item you see in the in this combo box is a query on the memory or in the",
    "start": "1061760",
    "end": "1067520"
  },
  {
    "text": "thread on the modules that is inside the dump so this is",
    "start": "1067520",
    "end": "1072720"
  },
  {
    "text": "extra important in a real scenario of course you don't want the ui you want to",
    "start": "1072720",
    "end": "1078000"
  },
  {
    "text": "automate the process the idea is that you can leverage the same library i",
    "start": "1078000",
    "end": "1083120"
  },
  {
    "text": "used to create this tool in order to diagnose your application so",
    "start": "1083120",
    "end": "1089440"
  },
  {
    "start": "1089000",
    "end": "1304000"
  },
  {
    "text": "let's see now the point and i want to very very to be very very clear you have almost",
    "start": "1089440",
    "end": "1096160"
  },
  {
    "text": "the same power of this sos but you don't have to type anything okay and all the sources",
    "start": "1096160",
    "end": "1104320"
  },
  {
    "text": "are inside this repository so that you can poke it and open an issue if you want",
    "start": "1104320",
    "end": "1110799"
  },
  {
    "text": "collaborate send me a pull request and let's talk about it is",
    "start": "1110799",
    "end": "1116240"
  },
  {
    "text": "the conversation so let's go straight to visual studio and",
    "start": "1116240",
    "end": "1124400"
  },
  {
    "text": "and see what we have here the first thing that i want to to show you is that i have this terminal",
    "start": "1124400",
    "end": "1132480"
  },
  {
    "text": "window so this is the windows terminal with a couple of sub window which it's very",
    "start": "1132480",
    "end": "1140000"
  },
  {
    "text": "nice to be able to split it and i want to run dot net run this is",
    "start": "1140000",
    "end": "1145440"
  },
  {
    "text": "our test application so it's a website the asp.net core application",
    "start": "1145440",
    "end": "1151360"
  },
  {
    "text": "here is the process id and on this part we have the stress application",
    "start": "1151360",
    "end": "1159919"
  },
  {
    "text": "okay and so i can make a high number of requests of course the",
    "start": "1159919",
    "end": "1166799"
  },
  {
    "text": "first time is lower because you have to jit the code",
    "start": "1166799",
    "end": "1172240"
  },
  {
    "text": "and you see i can make a simple post and you see that there is some",
    "start": "1172240",
    "end": "1179360"
  },
  {
    "text": "response on the other side and okay pretty normal nothing cool to see i mean it's uh",
    "start": "1179360",
    "end": "1186240"
  },
  {
    "text": "it's okay and then we can open our wpf application our the angiospec",
    "start": "1186240",
    "end": "1194640"
  },
  {
    "text": "application and i can monitor a process",
    "start": "1194640",
    "end": "1199760"
  },
  {
    "text": "you see here is the whole list i take the test web application i press ok",
    "start": "1199760",
    "end": "1206400"
  },
  {
    "text": "and i start seeing here all the trace events that happen inside",
    "start": "1206400",
    "end": "1213120"
  },
  {
    "text": "our aisp.net core application and every time i take my",
    "start": "1213120",
    "end": "1219600"
  },
  {
    "text": "controller and i hit something you see that there is a reaction so the",
    "start": "1219600",
    "end": "1225520"
  },
  {
    "text": "number of http requested for per seconds is going on and the cpu begin growing and",
    "start": "1225520",
    "end": "1234080"
  },
  {
    "text": "the the memory is is going up and down and so on and we can for example make a leak",
    "start": "1234080",
    "end": "1242000"
  },
  {
    "text": "graph so that you see i have 1 000 request of something that will",
    "start": "1242000",
    "end": "1248000"
  },
  {
    "text": "leak some memory will go in a static dictionary which is of course a common way to make clicks inside",
    "start": "1248000",
    "end": "1256720"
  },
  {
    "text": "a managed application and maybe you also have exceptions and of course the second",
    "start": "1256720",
    "end": "1265360"
  },
  {
    "text": "the second chance exceptions does not make sense because it it will cause would cause the the crash",
    "start": "1265360",
    "end": "1272720"
  },
  {
    "text": "of the of the application but of course the first uh chance exception are very important to",
    "start": "1272720",
    "end": "1279360"
  },
  {
    "text": "monitor because they can really slow down a lot of your entire application and so",
    "start": "1279360",
    "end": "1285200"
  },
  {
    "text": "this is a good opportunity to see what happens and maybe if you discover that you have more than",
    "start": "1285200",
    "end": "1292320"
  },
  {
    "text": "100 exceptions per second you may want to to investigate in",
    "start": "1292320",
    "end": "1300080"
  },
  {
    "text": "what is the code that is causing this and and so on so now that we have some link",
    "start": "1300080",
    "end": "1306240"
  },
  {
    "start": "1304000",
    "end": "1734000"
  },
  {
    "text": "in memory i want to take a snapshot so if you go to the status bar here you",
    "start": "1306240",
    "end": "1311760"
  },
  {
    "text": "see i it took 185 milliseconds also because the code was not just jittered and so if",
    "start": "1311760",
    "end": "1318720"
  },
  {
    "text": "i repeat you see that in reality the snapshot is taking a very short amount of time",
    "start": "1318720",
    "end": "1327280"
  },
  {
    "text": "and so from now on we can run query just on the on the memory and the",
    "start": "1327280",
    "end": "1334480"
  },
  {
    "text": "snapshot that i created and so the the one of the if you are familiar with the sos",
    "start": "1334480",
    "end": "1340400"
  },
  {
    "text": "you know that there is a comment called the dump heap stat and this is a the exact replication of that",
    "start": "1340400",
    "end": "1347120"
  },
  {
    "text": "and so we collect the statistics seeing the method table and the type",
    "start": "1347120",
    "end": "1354320"
  },
  {
    "text": "and we you may have many of these objects and they are ordered by graph",
    "start": "1354320",
    "end": "1359520"
  },
  {
    "text": "sites this is something that i added because it's not very clear",
    "start": "1359520",
    "end": "1365760"
  },
  {
    "text": "in in sos but it's the whole the overall size of all the",
    "start": "1365760",
    "end": "1372080"
  },
  {
    "text": "objects and so if you go to the very last since they are ordered this way you can see that i have a lot of byte",
    "start": "1372080",
    "end": "1380240"
  },
  {
    "text": "arrays and i mean this number is suspect and so we can see the details here you see the",
    "start": "1380240",
    "end": "1386960"
  },
  {
    "text": "first chance exception are coming just because we have a number of interrupted",
    "start": "1386960",
    "end": "1394480"
  },
  {
    "text": "communication with the http client that is causing the i operation has been aborted",
    "start": "1394480",
    "end": "1399760"
  },
  {
    "text": "this is part of this is what happens on the server side when a client interrupted",
    "start": "1399760",
    "end": "1408080"
  },
  {
    "text": "the communication and did not close the dhtp communication okay but i can clear the the message",
    "start": "1408080",
    "end": "1415840"
  },
  {
    "text": "here with with this button and and you see there there are a lot of byte arrays so this is the",
    "start": "1415840",
    "end": "1422400"
  },
  {
    "text": "overall size and this is each individual size and if i go",
    "start": "1422400",
    "end": "1427840"
  },
  {
    "text": "down down down you can see there are many of them and i can do a lot of things",
    "start": "1427840",
    "end": "1437120"
  },
  {
    "text": "the amount of memory it's really huge we have for example this",
    "start": "1437520",
    "end": "1445200"
  },
  {
    "text": "allocation and when we click something that is not",
    "start": "1446159",
    "end": "1452240"
  },
  {
    "text": "too big uh the tool automatically show what what's the the condition and",
    "start": "1452240",
    "end": "1459600"
  },
  {
    "text": "we have this uh this pain below that will give you a very",
    "start": "1459600",
    "end": "1466960"
  },
  {
    "text": "important report on what's happening basically this is the allocation it's a",
    "start": "1466960",
    "end": "1472400"
  },
  {
    "text": "byte array whose address is blah blah blah the method table is the one we have seen",
    "start": "1472400",
    "end": "1477919"
  },
  {
    "text": "in this column before and the size is of course the same but",
    "start": "1477919",
    "end": "1483039"
  },
  {
    "text": "now we want to find who is taking a reference to it so why this byte array is in memory",
    "start": "1483039",
    "end": "1491120"
  },
  {
    "text": "and the root for this object is the system object here is a pin",
    "start": "1491120",
    "end": "1496720"
  },
  {
    "text": "handle and when you have an array which is a pinner handle this is not normally something that",
    "start": "1496720",
    "end": "1503279"
  },
  {
    "text": "is inside a static and we may have a different path of",
    "start": "1503279",
    "end": "1508799"
  },
  {
    "text": "course because there are many possible paths that i can of an object that can be referenced from",
    "start": "1508799",
    "end": "1515600"
  },
  {
    "text": "multiple parts we have an object array and then a graph root so this list of objects is something",
    "start": "1515600",
    "end": "1523919"
  },
  {
    "text": "that is holding it and in my report also i try to understand what which is the name",
    "start": "1523919",
    "end": "1532159"
  },
  {
    "text": "of the field in the object that that is holding this reference and you",
    "start": "1532159",
    "end": "1538400"
  },
  {
    "text": "can decode it and it is telling me that is hold on memory pressure service",
    "start": "1538400",
    "end": "1546400"
  },
  {
    "text": "underscore roots is the name of the field so let's go to visual studio and",
    "start": "1546400",
    "end": "1552960"
  },
  {
    "text": "go to the memory pressure service and you can see here roots and this is static and",
    "start": "1552960",
    "end": "1559200"
  },
  {
    "text": "this is why this by the raise is holding memory so it's not that bad i mean it's really",
    "start": "1559200",
    "end": "1566559"
  },
  {
    "text": "amazing to see that you can investigate stun starting from a dump",
    "start": "1566559",
    "end": "1571840"
  },
  {
    "text": "uh exactly what is causing your memory leak or you can",
    "start": "1571840",
    "end": "1578159"
  },
  {
    "text": "i mean pick whatever else in in your in your dump and investigate exactly",
    "start": "1578159",
    "end": "1585120"
  },
  {
    "text": "what's going on and you see for example this string is that does not have any reference maybe it's going to be",
    "start": "1585120",
    "end": "1591679"
  },
  {
    "text": "garbage collected and then others of course there are",
    "start": "1591679",
    "end": "1597679"
  },
  {
    "text": "the tool is now a pretty slower than normal of course because there are uh the communication the",
    "start": "1597679",
    "end": "1604480"
  },
  {
    "text": "sharing screen that is going on uh with uh with our conference",
    "start": "1604480",
    "end": "1610000"
  },
  {
    "text": "but of course there are many other uh i mean it can be also very very",
    "start": "1610000",
    "end": "1617919"
  },
  {
    "text": "uh slow so that i had to add a account in order that for example if",
    "start": "1617919",
    "end": "1624799"
  },
  {
    "text": "you click here and it's too expensive the operation you you are warned you can click yes and",
    "start": "1624799",
    "end": "1632799"
  },
  {
    "text": "go on it will take time um and it will take time but",
    "start": "1632799",
    "end": "1640559"
  },
  {
    "text": "um i mean it's up to you if you want to to wait uh or not you want to to show",
    "start": "1640559",
    "end": "1647440"
  },
  {
    "text": "the error people sorry i don't get uh",
    "start": "1647440",
    "end": "1655840"
  },
  {
    "text": "the the question from the chat is can you show the code again",
    "start": "1655840",
    "end": "1662159"
  },
  {
    "text": "the like in error root okay yes of course",
    "start": "1662159",
    "end": "1669600"
  },
  {
    "text": "and this is uh exactly uh the problem",
    "start": "1669600",
    "end": "1675679"
  },
  {
    "text": "so we have something that is static it's a list and i accumulate with an add some roots",
    "start": "1675679",
    "end": "1683600"
  },
  {
    "text": "and these roots are objects that i created a",
    "start": "1683600",
    "end": "1689919"
  },
  {
    "text": "very it's very straightforward with with a graph that also have childs and then you have",
    "start": "1689919",
    "end": "1696080"
  },
  {
    "text": "grandchilds and there are a lot of memory that you may want to investigate but the point is",
    "start": "1696080",
    "end": "1702399"
  },
  {
    "text": "that this is a root because it's static and it will never go away until you",
    "start": "1702399",
    "end": "1707600"
  },
  {
    "text": "put roots equal null and since i made it on purpose",
    "start": "1707600",
    "end": "1714080"
  },
  {
    "text": "of course you can easily understand how to visualize this kind of errors so what's",
    "start": "1714080",
    "end": "1722159"
  },
  {
    "text": "the entire point of this application and then away i will go back to the demo",
    "start": "1722159",
    "end": "1728240"
  },
  {
    "text": "because i have other important things to show you before going on the the point is that on the",
    "start": "1728240",
    "end": "1736559"
  },
  {
    "start": "1734000",
    "end": "2029000"
  },
  {
    "text": "wpf application i did not use onpurpose mvdm pattern because i want that",
    "start": "1736559",
    "end": "1745360"
  },
  {
    "text": "the code is can be compressed understood completely from anyone even those that",
    "start": "1745360",
    "end": "1751760"
  },
  {
    "text": "are not familiar with wpf so it's extremely straight word straightforward",
    "start": "1751760",
    "end": "1757200"
  },
  {
    "text": "so for example the query in the combo our dumphip stats for example is just",
    "start": "1757200",
    "end": "1763440"
  },
  {
    "text": "this query on the on the memory and and you can easily understand what's",
    "start": "1763440",
    "end": "1769440"
  },
  {
    "text": "going on and this gets static filled with graphing size and so on so you have all the queries and in many",
    "start": "1769440",
    "end": "1776080"
  },
  {
    "text": "cases i can i use something that is not inside the diagnostic application",
    "start": "1776080",
    "end": "1784880"
  },
  {
    "text": "but this other project it's a library called clr diagnostics which",
    "start": "1784880",
    "end": "1792559"
  },
  {
    "text": "has this huge diagnostic analyzer and has a lot of prepared",
    "start": "1792559",
    "end": "1799919"
  },
  {
    "text": "queries and and things to do so capturing from that from snapshot from process and you can",
    "start": "1799919",
    "end": "1806799"
  },
  {
    "text": "load a dump from the filer then you can analyze the statics",
    "start": "1806799",
    "end": "1812399"
  },
  {
    "text": "and you see a lot of queries so you can dig go deep dive and analyze what what's",
    "start": "1812399",
    "end": "1818559"
  },
  {
    "text": "going on there and for example our sos can can do a lot of things if you want",
    "start": "1818559",
    "end": "1825200"
  },
  {
    "text": "to see how the reports was created for example this is the method that",
    "start": "1825200",
    "end": "1830960"
  },
  {
    "text": "count the number of references that are there if there are too many i give you the",
    "start": "1830960",
    "end": "1836159"
  },
  {
    "text": "message box and this is the guy who prepares all the reports that you have in the",
    "start": "1836159",
    "end": "1842240"
  },
  {
    "text": "lower pane of the application and find referencing is the one that search in the graph for",
    "start": "1842240",
    "end": "1848799"
  },
  {
    "text": "every possible reference should you have the uh to do it manually",
    "start": "1848799",
    "end": "1854720"
  },
  {
    "text": "finding references is a nightmare because you have to poke in the memory for all the possible",
    "start": "1854720",
    "end": "1861679"
  },
  {
    "text": "addresses which is impossible during it manually and so it's absolutely",
    "start": "1861679",
    "end": "1868240"
  },
  {
    "text": "astonishing to see how powerful is crm did and giving you this opportunity and",
    "start": "1868240",
    "end": "1873600"
  },
  {
    "text": "so this is very clearly important to do automatically and i still want to to",
    "start": "1873600",
    "end": "1881200"
  },
  {
    "text": "show you in the demo other few other queries and the getting static fields with graph",
    "start": "1881200",
    "end": "1888240"
  },
  {
    "text": "and size give you all the static fields that you may have these are can be the",
    "start": "1888240",
    "end": "1894640"
  },
  {
    "text": "source of leaks for example and uh starts from the biggest one",
    "start": "1894640",
    "end": "1900399"
  },
  {
    "text": "for example one of the biggest one is this back in field because i use for for the demo some timer cues",
    "start": "1900399",
    "end": "1907760"
  },
  {
    "text": "and and then you have the other uh conceal callback rules and you",
    "start": "1907760",
    "end": "1914000"
  },
  {
    "text": "see here my field roots because this is the entire sides of the things that i leaked",
    "start": "1914000",
    "end": "1921679"
  },
  {
    "text": "and is here so it's a different way to see",
    "start": "1921679",
    "end": "1926799"
  },
  {
    "text": "uh if there are links and these are this comes from the code that i run and from the",
    "start": "1926799",
    "end": "1932960"
  },
  {
    "text": "infrastructure you may find a lot of things coming from kestrel and and so on but it is",
    "start": "1932960",
    "end": "1938640"
  },
  {
    "text": "basically a good query to understand if you have leaks and then duplicate strings this is",
    "start": "1938640",
    "end": "1944080"
  },
  {
    "text": "the source of many problems in in real world application and you see that there are",
    "start": "1944080",
    "end": "1950320"
  },
  {
    "text": "many duplicate strings it doesn't make sense of having duplicate strings",
    "start": "1950320",
    "end": "1955360"
  },
  {
    "text": "has uh you know the strings are our value types so they are copied",
    "start": "1955360",
    "end": "1962960"
  },
  {
    "text": "every time you uh and sorry they are treated as value types",
    "start": "1962960",
    "end": "1968960"
  },
  {
    "text": "they are reference type but they are treated like many types because they are read only they are immutable and and so",
    "start": "1968960",
    "end": "1975440"
  },
  {
    "text": "uh if you happen to copy the string because of various operations that you can do in it maybe a",
    "start": "1975440",
    "end": "1981760"
  },
  {
    "text": "trim without success or maybe other things like that you obtain copies not references and",
    "start": "1981760",
    "end": "1989200"
  },
  {
    "text": "this can i mean push the the the the total overall performance and give",
    "start": "1989200",
    "end": "1997919"
  },
  {
    "text": "you uh problems of course this kind of numbers are pretty normal so you",
    "start": "1997919",
    "end": "2004080"
  },
  {
    "text": "don't have to care too much but i saw in production a lot of problems like that and you maybe want to",
    "start": "2004080",
    "end": "2009679"
  },
  {
    "text": "see the strings by side so the longest streams strings come from here",
    "start": "2009679",
    "end": "2014720"
  },
  {
    "text": "which is probably the environment there are 30k of paths used to hold the stuff that i installed",
    "start": "2014720",
    "end": "2021679"
  },
  {
    "text": "then i have the modules which are important to see what is exactly the dll that was loaded",
    "start": "2021679",
    "end": "2028320"
  },
  {
    "text": "in the process and also the thread stacks this is something that is not working",
    "start": "2028320",
    "end": "2034799"
  },
  {
    "start": "2029000",
    "end": "2169000"
  },
  {
    "text": "really very well and you you may see also uh the frame name if they are not native",
    "start": "2034799",
    "end": "2041760"
  },
  {
    "text": "in this case you see there are empty uh empty",
    "start": "2041760",
    "end": "2047360"
  },
  {
    "text": "frames just because uh these are uh things that are coming from the",
    "start": "2047360",
    "end": "2053599"
  },
  {
    "text": "infrastructure but there are documented issues on clrmd at the moment on this and this is the complete list of the",
    "start": "2053599",
    "end": "2060720"
  },
  {
    "text": "roots uh in the same way that they are proposed by",
    "start": "2060720",
    "end": "2068799"
  },
  {
    "text": "by the sos and you have a lot of object here of course and object by size",
    "start": "2068960",
    "end": "2076638"
  },
  {
    "text": "is another good query because you can see what is the object that is uh of course i mean not the",
    "start": "2076639",
    "end": "2084800"
  },
  {
    "text": "method table so not the entire category and as you see so in the dump hipster this is the",
    "start": "2084800",
    "end": "2091760"
  },
  {
    "text": "biggest object of all that you have in in your memory and you can see here",
    "start": "2091760",
    "end": "2096960"
  },
  {
    "text": "what is the route that is keeping this object on and this is in infrastructure and you",
    "start": "2096960",
    "end": "2103520"
  },
  {
    "text": "have much other you see here this object the second one has uh oh my god an",
    "start": "2103520",
    "end": "2110240"
  },
  {
    "text": "incred very huge number of references i don't want to continue because",
    "start": "2110240",
    "end": "2115920"
  },
  {
    "text": "it's going to take too much for the demo but of course if you really need it you",
    "start": "2115920",
    "end": "2122079"
  },
  {
    "text": "can you can proceed and do it and then non-system object by",
    "start": "2122079",
    "end": "2127680"
  },
  {
    "text": "size this is just a filter over the the the system names",
    "start": "2127680",
    "end": "2133200"
  },
  {
    "text": "namespaces so you just see your own objects and you want to see just your own models and",
    "start": "2133200",
    "end": "2141280"
  },
  {
    "text": "services and whatever else and by the way i can also",
    "start": "2141280",
    "end": "2148400"
  },
  {
    "text": "return at the very beginning like dump if start and then put something here",
    "start": "2148400",
    "end": "2155359"
  },
  {
    "text": "and you see that test web app i am filtering by test web app or even here and so you",
    "start": "2155359",
    "end": "2162480"
  },
  {
    "text": "it's very it's very practical to to have a quick filter on it and then there is",
    "start": "2162480",
    "end": "2169200"
  },
  {
    "start": "2169000",
    "end": "2334000"
  },
  {
    "text": "this last get object grouped by a locator and you are not going to see anything",
    "start": "2169200",
    "end": "2175040"
  },
  {
    "text": "here but just because there is just the default allocator but if i load a dump file",
    "start": "2175040",
    "end": "2182560"
  },
  {
    "text": "uh that i created using two different assembly load context which is a the new",
    "start": "2182560",
    "end": "2188720"
  },
  {
    "text": "way of unloading assemblies in dot net core you can see that i loaded the the damp",
    "start": "2188720",
    "end": "2196160"
  },
  {
    "text": "and now i can go here and you see there are two different uh add-ons the two different assembly",
    "start": "2196160",
    "end": "2203440"
  },
  {
    "text": "load context this is very important because sometimes since the assembly load context are",
    "start": "2203440",
    "end": "2209200"
  },
  {
    "text": "collaborative so they need all the references to the objects laying inside the assembly line context",
    "start": "2209200",
    "end": "2217040"
  },
  {
    "text": "gets freed there is no more references because is is the garbage collector that throws away this",
    "start": "2217040",
    "end": "2224320"
  },
  {
    "text": "when you want to unload the assembly load context if there is any object that is still",
    "start": "2224320",
    "end": "2229440"
  },
  {
    "text": "referenced you will not obtain the unload so this is",
    "start": "2229440",
    "end": "2235760"
  },
  {
    "text": "collaborative and so i can investigate what are the object objects that are inside it",
    "start": "2235760",
    "end": "2243680"
  },
  {
    "text": "and if i then follow the roads i can understand who is keeping the route and then again",
    "start": "2243680",
    "end": "2249359"
  },
  {
    "text": "i will find that i have a sort of leak that is preventing me to",
    "start": "2249359",
    "end": "2255040"
  },
  {
    "text": "investigate and unload the assembly load context that's a lot of information",
    "start": "2255040",
    "end": "2262960"
  },
  {
    "text": "let's go back for a while and here and i will show the custom header here and",
    "start": "2262960",
    "end": "2269280"
  },
  {
    "text": "if you repeat the two for example you will see that",
    "start": "2269280",
    "end": "2274960"
  },
  {
    "text": "i have this custom header that is triggering a higher number and this",
    "start": "2275200",
    "end": "2281440"
  },
  {
    "text": "is basically the idea that if you want from the external maybe with",
    "start": "2281440",
    "end": "2288880"
  },
  {
    "text": "your web application authenticate on the test web app and say oh it's",
    "start": "2288880",
    "end": "2294720"
  },
  {
    "text": "responding like crappy i don't i want to understand i wish i could make a snapshot now i want to trigger",
    "start": "2294720",
    "end": "2302720"
  },
  {
    "text": "my own diagnostic investigation now because i'm seeing that application",
    "start": "2302720",
    "end": "2308240"
  },
  {
    "text": "is not working correctly you can use a custom header just to trigger",
    "start": "2308240",
    "end": "2314320"
  },
  {
    "text": "the um the the diagnostic process and the you you of course are going to",
    "start": "2314320",
    "end": "2320960"
  },
  {
    "text": "investigate it and make it making the snapshot only if the application is really",
    "start": "2320960",
    "end": "2327680"
  },
  {
    "text": "uh i mean in a condition that is not good and if you are authenticated of",
    "start": "2327680",
    "end": "2334240"
  },
  {
    "start": "2334000",
    "end": "2444000"
  },
  {
    "text": "course so uh let's go back for a moment on the slides and uh beyond all the code that you can",
    "start": "2334240",
    "end": "2340960"
  },
  {
    "text": "see on on github of course that is very very interesting you may i want to give you a glimpse so",
    "start": "2340960",
    "end": "2349119"
  },
  {
    "text": "the diagnostic client is very simple to use just take the process id and you",
    "start": "2349119",
    "end": "2356000"
  },
  {
    "text": "create this event pi provider and just telling which are the main provider that",
    "start": "2356000",
    "end": "2361599"
  },
  {
    "text": "are well known so so you don't have to invent anything or write anything special",
    "start": "2361599",
    "end": "2367040"
  },
  {
    "text": "i want to subscribe the system on time and having all the informational events",
    "start": "2367040",
    "end": "2374800"
  },
  {
    "text": "no special keywords because they can give you some filters and i want to be notified",
    "start": "2374800",
    "end": "2382880"
  },
  {
    "text": "once uh in a second and then i open the session client okay with the",
    "start": "2382880",
    "end": "2388960"
  },
  {
    "text": "list of providers and then also uh you can put more than one of course",
    "start": "2388960",
    "end": "2394480"
  },
  {
    "text": "this is just one these are many because you can have multiple providers",
    "start": "2394480",
    "end": "2399520"
  },
  {
    "text": "and then you create this even pipe even source which receive the event streams from the",
    "start": "2399520",
    "end": "2405760"
  },
  {
    "text": "named pipes that are is opened when the clr server that",
    "start": "2405760",
    "end": "2410880"
  },
  {
    "text": "is pushing the events and you can subscribe either dynamically everything or there",
    "start": "2410880",
    "end": "2417599"
  },
  {
    "text": "are also typed events and and so you you can process them just be warned that the source dot",
    "start": "2417599",
    "end": "2424640"
  },
  {
    "text": "process is a synchronous call so you may have to uh task run or put in a separate thread",
    "start": "2424640",
    "end": "2431040"
  },
  {
    "text": "in order to uh not to block uh the rest of the application that's it i mean it's super simple and",
    "start": "2431040",
    "end": "2437920"
  },
  {
    "text": "these are triggers you know this way is the way that you can receive the",
    "start": "2437920",
    "end": "2444079"
  },
  {
    "start": "2444000",
    "end": "2552000"
  },
  {
    "text": "triggers and what can what triggers you have memory cpus first chance exceptions",
    "start": "2444079",
    "end": "2452319"
  },
  {
    "text": "http requests or whatever else and of course custom events counters",
    "start": "2452319",
    "end": "2458800"
  },
  {
    "text": "and just to show you the example of the custom event counters",
    "start": "2458800",
    "end": "2463839"
  },
  {
    "text": "extremely simple you just derive the even source with your own name you",
    "start": "2463839",
    "end": "2471119"
  },
  {
    "text": "put this attribute here okay and then there are a very small",
    "start": "2471119",
    "end": "2478160"
  },
  {
    "text": "boilerplate that you have to to use in order to push it and then",
    "start": "2478160",
    "end": "2485359"
  },
  {
    "text": "inside the test web application so my um web application i created a",
    "start": "2485359",
    "end": "2493040"
  },
  {
    "text": "middleware okay this middleware which is of course the clarity in the startup application",
    "start": "2493040",
    "end": "2499680"
  },
  {
    "text": "okay so in the startup you may see uh where they put here",
    "start": "2499680",
    "end": "2507359"
  },
  {
    "text": "request hook okay so f12 and use middleware request hook and then",
    "start": "2507359",
    "end": "2513680"
  },
  {
    "text": "f12 and here we are and every time i get an invoke you can",
    "start": "2513680",
    "end": "2519920"
  },
  {
    "text": "use http context to decide what are the condition to trigger this",
    "start": "2519920",
    "end": "2524960"
  },
  {
    "text": "counter and every time you trigger this you will see the number that i showed before on the",
    "start": "2524960",
    "end": "2531280"
  },
  {
    "text": "w3pf application that is increasing and that's it so i decided to",
    "start": "2531280",
    "end": "2536880"
  },
  {
    "text": "use it with the construct header you can decide to trigger in a different way i",
    "start": "2536880",
    "end": "2542560"
  },
  {
    "text": "mean it's up to you it's just this is just an example and um i mean we have",
    "start": "2542560",
    "end": "2550319"
  },
  {
    "text": "all the ingredients to make it work but there is something more the",
    "start": "2550319",
    "end": "2557599"
  },
  {
    "start": "2552000",
    "end": "2697000"
  },
  {
    "text": "diagnostic client is improving and with dotnet 5 in the clr there is also",
    "start": "2557599",
    "end": "2564720"
  },
  {
    "text": "a reverse channel communication so basically instead of being the",
    "start": "2564720",
    "end": "2571599"
  },
  {
    "text": "your debugger let's say that communicate with the clr of the dnozed application which",
    "start": "2571599",
    "end": "2578640"
  },
  {
    "text": "is acting as a server the process here is totally inversed",
    "start": "2578640",
    "end": "2584480"
  },
  {
    "text": "and so basically you start your own diagnostic server and listen to an epc port at this point",
    "start": "2584480",
    "end": "2591520"
  },
  {
    "text": "you specify this part with the diagnostic parts environment variable from which you",
    "start": "2591520",
    "end": "2597119"
  },
  {
    "text": "start the application and this practically tells the clr so you don't have to do anything with",
    "start": "2597119",
    "end": "2603680"
  },
  {
    "text": "your code it's just the clr that understand this in datum 5 that",
    "start": "2603680",
    "end": "2609119"
  },
  {
    "text": "there is something happening there and he should start talking in this ipc channel",
    "start": "2609119",
    "end": "2616480"
  },
  {
    "text": "before the application bootstrap and now the application connects with",
    "start": "2616480",
    "end": "2623440"
  },
  {
    "text": "your local server that you open it here and goes in a wait state so it's kind of suspended",
    "start": "2623440",
    "end": "2629680"
  },
  {
    "text": "but only if they find a good communication",
    "start": "2629680",
    "end": "2634720"
  },
  {
    "text": "at this point you subscribe any event you are interested in okay and then you resume the application",
    "start": "2634720",
    "end": "2642079"
  },
  {
    "text": "uh using this special communication protocol and finally the event the events that",
    "start": "2642079",
    "end": "2648640"
  },
  {
    "text": "you subscribed start flowing and you receive everything normally and why do you can you do you want to",
    "start": "2648640",
    "end": "2656480"
  },
  {
    "text": "use this method and it's terribly useful because this is the way you can replicate the",
    "start": "2656480",
    "end": "2663599"
  },
  {
    "text": "famous tool the fusion lock viewer and so if you have bootstrapping issues if you",
    "start": "2663599",
    "end": "2670640"
  },
  {
    "text": "want to monitor which are the assemblies that are loaded uh",
    "start": "2670640",
    "end": "2676240"
  },
  {
    "text": "from within uh your application and which other can't",
    "start": "2676240",
    "end": "2681680"
  },
  {
    "text": "be uh loaded because the the resolution that the the the probes directory failed",
    "start": "2681680",
    "end": "2690079"
  },
  {
    "text": "you uh want to really capture the initial bootstrapping uh life",
    "start": "2690079",
    "end": "2696560"
  },
  {
    "text": "of your application and i have a separate tool for this",
    "start": "2696560",
    "end": "2701680"
  },
  {
    "text": "which in the same repository which is cause they call it i mean let me collapse all the others",
    "start": "2701680",
    "end": "2708560"
  },
  {
    "text": "so that you can see exactly so uh practically this is the fashion",
    "start": "2708560",
    "end": "2715200"
  },
  {
    "text": "fusion debuggie which is the let's say our application and it is run directly",
    "start": "2715200",
    "end": "2721839"
  },
  {
    "text": "from this which is the tool and i had to fork the dotnet core client because",
    "start": "2721839",
    "end": "2729119"
  },
  {
    "text": "they still don't have the final the version that can be used broadly in public so there are internal",
    "start": "2729119",
    "end": "2736720"
  },
  {
    "text": "methods instead of public and so i wanted really to test and show you here what's going on and in this tool i",
    "start": "2736720",
    "end": "2745280"
  },
  {
    "text": "basically replicate the exact points i told you in",
    "start": "2745280",
    "end": "2750400"
  },
  {
    "text": "inside the slide so i want to explain again here and if i just run this guy",
    "start": "2750400",
    "end": "2758560"
  },
  {
    "text": "uh he will run the application of course and you can see that subscribing to",
    "start": "2759280",
    "end": "2767039"
  },
  {
    "text": "those events i can really see exactly what are the path of the dlls that since the very first",
    "start": "2767280",
    "end": "2776560"
  },
  {
    "text": "moment of the bootstrap process of the application are loaded in memory so this is an exceptional",
    "start": "2776560",
    "end": "2784400"
  },
  {
    "text": "way to make tools that can diagnose the the startup the bootstrap of your",
    "start": "2784400",
    "end": "2791440"
  },
  {
    "text": "application and so this",
    "start": "2791440",
    "end": "2797280"
  },
  {
    "text": "is basically what you would expect from the older fusion lab viewer",
    "start": "2797280",
    "end": "2804880"
  },
  {
    "text": "which which was a very well known tool in that framework and",
    "start": "2804880",
    "end": "2811680"
  },
  {
    "text": "show the assembly being loaded from dotnet process the hard work of our diane using process",
    "start": "2811680",
    "end": "2819920"
  },
  {
    "start": "2815000",
    "end": "2967000"
  },
  {
    "text": "is made from clrmd which is in version 2 it supports dotnet framework as well as",
    "start": "2819920",
    "end": "2827359"
  },
  {
    "text": "net core and it is improving a lot over the months because they i",
    "start": "2827359",
    "end": "2834160"
  },
  {
    "text": "by the way also gave my contribution with the pr to make",
    "start": "2834160",
    "end": "2841040"
  },
  {
    "text": "something better and specifically the assembly load context requested the chain",
    "start": "2841040",
    "end": "2846319"
  },
  {
    "text": "a change in um in the dac which is a special native module c plus",
    "start": "2846319",
    "end": "2852400"
  },
  {
    "text": "plus that expose the information that can be investigated in that world that allowed to retrieve the",
    "start": "2852400",
    "end": "2860640"
  },
  {
    "text": "name of the assembly load context that is the terrible in memory and by the way",
    "start": "2860640",
    "end": "2868079"
  },
  {
    "text": "the assembly load context had major improvements in the very latest",
    "start": "2868079",
    "end": "2873200"
  },
  {
    "text": "in 5.0 i discovered just just running my own tests on the on the",
    "start": "2873200",
    "end": "2881040"
  },
  {
    "text": "on the tool and things are getting better and better so it's a very very good way to work",
    "start": "2881040",
    "end": "2888319"
  },
  {
    "text": "with and by the way the information that you can diagnose",
    "start": "2888319",
    "end": "2894880"
  },
  {
    "text": "with clrmd are just managed so if you have interoperability issues",
    "start": "2894880",
    "end": "2900559"
  },
  {
    "text": "or want to investigate on c plus plus subject that's totally different job you'd",
    "start": "2900559",
    "end": "2907119"
  },
  {
    "text": "have to use other structures they are of course easier to investigate",
    "start": "2907119",
    "end": "2913359"
  },
  {
    "text": "because uh native uh is just the way you design it so it's a c plus all object is easier to",
    "start": "2913359",
    "end": "2921520"
  },
  {
    "text": "investigate but you know don't have metadata so you of course have to provide the correct",
    "start": "2921520",
    "end": "2926720"
  },
  {
    "text": "pdbs in order to to get enough information not to get crazy and",
    "start": "2926720",
    "end": "2931760"
  },
  {
    "text": "do all the bad reverse engineering by yourself also the information that can be",
    "start": "2931760",
    "end": "2938640"
  },
  {
    "text": "retrieved are very very very wide i mean there are a lot of you can read some of them here",
    "start": "2938640",
    "end": "2946079"
  },
  {
    "text": "uh there is also support for the com stuff that i didn't put inside my tool because i",
    "start": "2946079",
    "end": "2951920"
  },
  {
    "text": "focused specifically on.net core and on windows 10",
    "start": "2951920",
    "end": "2956960"
  },
  {
    "text": "64 bits because this is just something that for a demo i believe",
    "start": "2956960",
    "end": "2962000"
  },
  {
    "text": "it's more than enough to to give the idea of how it works and",
    "start": "2962000",
    "end": "2968800"
  },
  {
    "text": "there are many new things that are are coming i mean the clrmd is improving",
    "start": "2968800",
    "end": "2975599"
  },
  {
    "text": "version of the version there is a separate uh utility because uh the outdoors the team",
    "start": "2975599",
    "end": "2981760"
  },
  {
    "text": "that is currently writing the clrmd doesn't want",
    "start": "2981760",
    "end": "2986880"
  },
  {
    "text": "uh to put too much helper functions inside the main library",
    "start": "2986880",
    "end": "2992319"
  },
  {
    "text": "because there are many possible use cases and they don't want to make it grow too much so there is a",
    "start": "2992319",
    "end": "2999359"
  },
  {
    "text": "microsoft diagnostic and time utilities where there are others that can be used useful but you",
    "start": "2999359",
    "end": "3005839"
  },
  {
    "text": "don't they wanted to keep it separate and basically my library is very similar to this one in fact i",
    "start": "3005839",
    "end": "3013359"
  },
  {
    "text": "had contributed also to this project with some of the queries that",
    "start": "3013359",
    "end": "3019599"
  },
  {
    "text": "uh that i wrote inside the salar they announced and they plan to add more if they want i can put them all of",
    "start": "3019599",
    "end": "3026400"
  },
  {
    "text": "course but i don't know if uh how much is the trade-off",
    "start": "3026400",
    "end": "3031599"
  },
  {
    "text": "of the amount of code i have put in there and so anyway this is public you can go",
    "start": "3031599",
    "end": "3037760"
  },
  {
    "text": "there and give me feedback at the moment i didn't care too much",
    "start": "3037760",
    "end": "3044160"
  },
  {
    "text": "about the i mean how heavy is a query how long",
    "start": "3044160",
    "end": "3051119"
  },
  {
    "text": "can it take i didn't propagate all the cancellation tokens and so on because this is a demo so",
    "start": "3051119",
    "end": "3058800"
  },
  {
    "text": "you have to uh make a balance by yourself and deciding okay it's going to take too much if it's",
    "start": "3058800",
    "end": "3066000"
  },
  {
    "text": "a if it's too heavy maybe i want to",
    "start": "3066000",
    "end": "3071200"
  },
  {
    "text": "suspend or interrupt and block or conceal the query because it's too heavy",
    "start": "3071200",
    "end": "3077920"
  },
  {
    "text": "and you have several examples there by the way because uh in in the code if we come back",
    "start": "3077920",
    "end": "3087760"
  },
  {
    "text": "on the clr diagnostic you have you see a lot of queries this group buys",
    "start": "3087760",
    "end": "3096000"
  },
  {
    "text": "are going to take a while also the order by descending and to dictionary and so on so",
    "start": "3096000",
    "end": "3102880"
  },
  {
    "text": "here you have to balance exactly what you are going to do how large is your memory space maybe",
    "start": "3102880",
    "end": "3109440"
  },
  {
    "text": "your working set is very large and you want to balance the usage the good thing is that your",
    "start": "3109440",
    "end": "3116000"
  },
  {
    "text": "diagnostic application which is the one running this kind of queries is a separate process so",
    "start": "3116000",
    "end": "3122240"
  },
  {
    "text": "anything that should go wrong from some reason will not impact the production",
    "start": "3122240",
    "end": "3129440"
  },
  {
    "text": "application it will just eventually crash but alone without",
    "start": "3129440",
    "end": "3136319"
  },
  {
    "text": "having too much disturbance to to to the to the broad public",
    "start": "3136319",
    "end": "3141520"
  },
  {
    "text": "and this is i find a very nice thing uh someone asked me if i can",
    "start": "3141520",
    "end": "3148160"
  },
  {
    "text": "run this tool on or this library in a sidecar application",
    "start": "3148160",
    "end": "3155280"
  },
  {
    "text": "and the result that the point is that the ipc communication sorry",
    "start": "3155280",
    "end": "3166000"
  },
  {
    "text": "ipc communication that talks between uh this library and the clr",
    "start": "3166000",
    "end": "3174240"
  },
  {
    "text": "is ipc with named pipes the end is limited on localhost",
    "start": "3174240",
    "end": "3182640"
  },
  {
    "text": "for security reasons so either you have a kind of um",
    "start": "3182640",
    "end": "3189440"
  },
  {
    "text": "agent and then you can run the diagnostic application in a sidecar",
    "start": "3189440",
    "end": "3194559"
  },
  {
    "text": "a container otherwise of course this is not possible but eventually running both the process",
    "start": "3194559",
    "end": "3202079"
  },
  {
    "text": "inside the same container is not that bad i mean there are separate processes you may give some constraints in terms",
    "start": "3202079",
    "end": "3209599"
  },
  {
    "text": "of memory and avoid they they give you problems of",
    "start": "3209599",
    "end": "3214640"
  },
  {
    "text": "any other types there and",
    "start": "3214640",
    "end": "3219680"
  },
  {
    "text": "with regards on the the other things there are some things on the allocator side",
    "start": "3219680",
    "end": "3224960"
  },
  {
    "text": "that i made some experiments you may find some code that it's not really",
    "start": "3224960",
    "end": "3232559"
  },
  {
    "text": "used anymore because this was before the changes that occurred in uh",
    "start": "3232559",
    "end": "3239920"
  },
  {
    "text": "with the latest iteration thanks to the dac the dac that has been changed with net",
    "start": "3239920",
    "end": "3246880"
  },
  {
    "text": "five but i mean the code is there uh please take a look at it if you are interested",
    "start": "3246880",
    "end": "3252720"
  },
  {
    "text": "in this kind of topic and give me uh some feedback i would appreciate that",
    "start": "3252720",
    "end": "3258400"
  },
  {
    "text": "uh a lot so let's go back to and and go to the conclusion",
    "start": "3258400",
    "end": "3264559"
  },
  {
    "text": "uh this is exactly the the main idea of automating the stuff and if you have",
    "start": "3264559",
    "end": "3271119"
  },
  {
    "text": "question i will answer to all of you either here for the five minutes that are still left",
    "start": "3271119",
    "end": "3277119"
  },
  {
    "text": "or eventually after the session on track one on zlac",
    "start": "3277119",
    "end": "3283440"
  },
  {
    "text": "and thank you very much for your time and participating to this",
    "start": "3283440",
    "end": "3291440"
  },
  {
    "text": "session i am eager to visit your conference as soon as",
    "start": "3291440",
    "end": "3298000"
  },
  {
    "text": "possible in person i am talking to a camera is not the best thing",
    "start": "3298000",
    "end": "3303920"
  },
  {
    "text": "that i can do but certainly in person we can have great conversations and",
    "start": "3303920",
    "end": "3310960"
  },
  {
    "text": "great discussions and i love that so much thank you very much",
    "start": "3310960",
    "end": "3321839"
  },
  {
    "text": "you",
    "start": "3326559",
    "end": "3328640"
  }
]