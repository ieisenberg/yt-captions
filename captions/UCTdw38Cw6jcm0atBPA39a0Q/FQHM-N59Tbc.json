[
  {
    "text": "and uh thank you for joining my session my name is mikhail brigiden i run a security department at pgs software but",
    "start": "6080",
    "end": "13360"
  },
  {
    "text": "also i'm a white hot security researcher and today i want to share my",
    "start": "13360",
    "end": "19840"
  },
  {
    "text": "findings with you so that you can fix it in your projects",
    "start": "19840",
    "end": "24880"
  },
  {
    "text": "and i want to show you how a small vulnerabilities may lead to a full cloud",
    "start": "24880",
    "end": "33040"
  },
  {
    "text": "account take over let's start with something simple html how to hack your cloud using html",
    "start": "33040",
    "end": "40559"
  },
  {
    "text": "that's very simple just look at the source code and uh",
    "start": "40559",
    "end": "45760"
  },
  {
    "text": "i don't know why but there are many many cases in which",
    "start": "45760",
    "end": "51360"
  },
  {
    "text": "people just hard code credentials to their cloud in a source",
    "start": "51360",
    "end": "56800"
  },
  {
    "text": "code either in javascript or like like here",
    "start": "56800",
    "end": "62640"
  },
  {
    "text": "in a comment for someone to remove later but",
    "start": "62640",
    "end": "68240"
  },
  {
    "text": "why do you hard code it if you want it to be removed instead of putting it",
    "start": "68240",
    "end": "73360"
  },
  {
    "text": "somewhere in a documentation so we have this source code and this",
    "start": "73360",
    "end": "78560"
  },
  {
    "text": "scenario is really simple because we just extracted valid aws credentials from the source",
    "start": "78560",
    "end": "85360"
  },
  {
    "text": "code and hey these were admin credentials because someone don't know how to",
    "start": "85360",
    "end": "90799"
  },
  {
    "text": "configure their users cloud users and what went wrong here",
    "start": "90799",
    "end": "96640"
  },
  {
    "text": "first of all sensitive data in a source code there are many different ways to share",
    "start": "96640",
    "end": "104560"
  },
  {
    "text": "a part of documentation with your team you don't have to hard code it in",
    "start": "104560",
    "end": "109759"
  },
  {
    "text": "in in your source code you can just put it on confluence or somewhere else if you want to say that",
    "start": "109759",
    "end": "116159"
  },
  {
    "text": "there is a set of credentials to use on there on the non-product on dev environment",
    "start": "116159",
    "end": "121600"
  },
  {
    "text": "something like that now uh let's move to something more complicated kubernetes who knows",
    "start": "121600",
    "end": "127920"
  },
  {
    "text": "kubernetes who is using kubernetes nice and uh how to hack your cloud",
    "start": "127920",
    "end": "135360"
  },
  {
    "text": "using kubernetes it all starts with kubernetes api",
    "start": "135360",
    "end": "140720"
  },
  {
    "text": "like phil mentioned on his presentation before there are many built-in security",
    "start": "140720",
    "end": "146080"
  },
  {
    "text": "features and developers uh i don't know why but uh want to disable these features and uh like here",
    "start": "146080",
    "end": "153280"
  },
  {
    "text": "there are many kubernetes apis available publicly in public subnets with public",
    "start": "153280",
    "end": "158560"
  },
  {
    "text": "ips and role-based access control for them is disabled this means that anyone",
    "start": "158560",
    "end": "164640"
  },
  {
    "text": "can just connect to that api and ask for anything like secrets like config maps",
    "start": "164640",
    "end": "172000"
  },
  {
    "text": "like a list of pods with the configuration secrets are only base64 encoded so it's",
    "start": "172000",
    "end": "180239"
  },
  {
    "text": "quite easy to decode them and if you ask correctly you can get something like",
    "start": "180239",
    "end": "186400"
  },
  {
    "text": "that a list of pods uh with uh a time how how long they are running what state",
    "start": "186400",
    "end": "193360"
  },
  {
    "text": "they are in config maps so the content maps are just a configuration files",
    "start": "193360",
    "end": "198959"
  },
  {
    "text": "that are later pushed to containers and secrets simple secrets username",
    "start": "198959",
    "end": "205360"
  },
  {
    "text": "password etc you can you can see that we already have s3 access",
    "start": "205360",
    "end": "212080"
  },
  {
    "text": "the secret key on on the secrets list so this is our first",
    "start": "212080",
    "end": "217360"
  },
  {
    "text": "uh this is this is our first way into the cloud but it's only s3 access s3 services uh",
    "start": "217360",
    "end": "226239"
  },
  {
    "text": "it's used to store files on aws cloud flat files you can extract something interesting",
    "start": "226239",
    "end": "232720"
  },
  {
    "text": "from these files okay but we are aiming for more so uh what else i was able to extract",
    "start": "232720",
    "end": "239439"
  },
  {
    "text": "from one of these kubernetes secrets jenkins admin credentials",
    "start": "239439",
    "end": "246640"
  },
  {
    "text": "jenkins is the automation server that you use to run your jobs to build something and",
    "start": "246640",
    "end": "253120"
  },
  {
    "text": "there were credentials for admin user so in the next step i was trying to find a way to log into",
    "start": "253120",
    "end": "260320"
  },
  {
    "text": "that jenkins app and there are two ways to log in first of all you can find a",
    "start": "260320",
    "end": "265440"
  },
  {
    "text": "public public endpoint for that jenkins like jenkins.example.com and then using these credentials you can",
    "start": "265440",
    "end": "272479"
  },
  {
    "text": "log in but sometimes companies hide these these tools like development tools and",
    "start": "272479",
    "end": "279040"
  },
  {
    "text": "there is no way to access them from the internet but you already have access to kubernetes cluster that",
    "start": "279040",
    "end": "285919"
  },
  {
    "text": "runs this jenkins so you can easily forward port 8080 of that",
    "start": "285919",
    "end": "292080"
  },
  {
    "text": "jenkins app jenkins pod to your local host and then you just simply open your browser",
    "start": "292080",
    "end": "298639"
  },
  {
    "text": "and go to localhost and on port 8080 and that's the same jenkins application so",
    "start": "298639",
    "end": "304479"
  },
  {
    "text": "you can log into that jenkins application but what then first of all uh as admin you have access",
    "start": "304479",
    "end": "311199"
  },
  {
    "text": "everywhere you can start digging in workspaces if your job runs at least",
    "start": "311199",
    "end": "317520"
  },
  {
    "text": "once there is a source code for that job uh for of the from the repository that the",
    "start": "317520",
    "end": "322960"
  },
  {
    "text": "that job depends on and that source code is there available for you so you can just see if",
    "start": "322960",
    "end": "328639"
  },
  {
    "text": "there are any hard-coded credentials or something that you may use to dig deeper",
    "start": "328639",
    "end": "334560"
  },
  {
    "text": "in my scenario there was a config file with another pair of access keys for aws this time i got",
    "start": "334560",
    "end": "342080"
  },
  {
    "text": "access to sqsq and lampdas and other services but still not enough",
    "start": "342080",
    "end": "348560"
  },
  {
    "text": "then second place in jenkins it was in jenkins credentials",
    "start": "348560",
    "end": "354960"
  },
  {
    "text": "service if you use jenkins you know that you can store your credentials in jenkins credentials but if you have more access",
    "start": "354960",
    "end": "362000"
  },
  {
    "text": "to jenkins you also know that you can easily decode all these credentials so i",
    "start": "362000",
    "end": "367759"
  },
  {
    "text": "just took a look at the credentials list and found a github or gitlab credentials there so",
    "start": "367759",
    "end": "374400"
  },
  {
    "text": "after the coding i had access to all repositories of that company",
    "start": "374400",
    "end": "379759"
  },
  {
    "text": "but also i still didn't have access to full admin account on on aws",
    "start": "379759",
    "end": "386240"
  },
  {
    "text": "so the next step was to check build logs console logs from different",
    "start": "386240",
    "end": "391520"
  },
  {
    "text": "projects on jenkins and in one of these jobs i noticed",
    "start": "391520",
    "end": "397039"
  },
  {
    "text": "api calls for for aws using aws cli this means that",
    "start": "397039",
    "end": "404319"
  },
  {
    "text": "the pod that runs this job has access to aws either",
    "start": "404319",
    "end": "410479"
  },
  {
    "text": "uh on using hard-coded credentials or using a role",
    "start": "410479",
    "end": "415520"
  },
  {
    "text": "so i used cubectl exec to run bash on that pod",
    "start": "415520",
    "end": "421199"
  },
  {
    "text": "and uh thanks to that i i was able to run any command and this pod had",
    "start": "421199",
    "end": "428160"
  },
  {
    "text": "iam roll aws iam role with admin access policy attached and that was what i",
    "start": "428160",
    "end": "434240"
  },
  {
    "text": "wanted to achieve admin access on that account but what went wrong here first of all",
    "start": "434240",
    "end": "440400"
  },
  {
    "text": "public resources why kubernetes apis are public i have no idea",
    "start": "440400",
    "end": "446000"
  },
  {
    "text": "these are not endpoints that should be accessible by customers by your end customers so",
    "start": "446000",
    "end": "452160"
  },
  {
    "text": "if it's not something interesting for your customers but just for developers just hide it hide it behind behind a vpn if there is",
    "start": "452160",
    "end": "459280"
  },
  {
    "text": "a security feature use it also usually",
    "start": "459280",
    "end": "464720"
  },
  {
    "text": "your production environments are covered by penetration tests but many companies decide to",
    "start": "464720",
    "end": "470720"
  },
  {
    "text": "exclude non-profit environments from pentests to lower the bill for for this",
    "start": "470720",
    "end": "476479"
  },
  {
    "text": "penetration test and these nonprofit environments are",
    "start": "476479",
    "end": "482319"
  },
  {
    "text": "exposed and sometimes vulnerable also risky design",
    "start": "482319",
    "end": "487680"
  },
  {
    "text": "maybe it's not that we don't know that it's public maybe we decided to make it public because",
    "start": "487680",
    "end": "495120"
  },
  {
    "text": "we are a startup we just started to develop anything and we don't have vpn",
    "start": "495120",
    "end": "500400"
  },
  {
    "text": "it costs so let's just make it public and hope nobody finds it",
    "start": "500400",
    "end": "507599"
  },
  {
    "text": "and then what else went wrong security features if there is a role",
    "start": "507599",
    "end": "513039"
  },
  {
    "text": "base access control enabled by default just use it if you",
    "start": "513039",
    "end": "518399"
  },
  {
    "text": "want to disable it okay but why and sometimes uh",
    "start": "518399",
    "end": "523599"
  },
  {
    "text": "the responses were okay but it's our cluster it's a random ip who knows our random ip it's only for",
    "start": "523599",
    "end": "530880"
  },
  {
    "text": "our team to use and nope it's not there are many search engines",
    "start": "530880",
    "end": "536160"
  },
  {
    "text": "that scans the whole internet all ips and all ports on these ips and",
    "start": "536160",
    "end": "542240"
  },
  {
    "text": "they record responses they record banners from from these ports and when",
    "start": "542240",
    "end": "548240"
  },
  {
    "text": "you create a new new resource on the internet with new ip it will be scanned in two minutes so",
    "start": "548240",
    "end": "554720"
  },
  {
    "text": "after three minutes i will have access to it without making any noise in your infrastructure because i will know that",
    "start": "554720",
    "end": "561600"
  },
  {
    "text": "you have something vulnerable vulnerable and i can hit you right there and uh",
    "start": "561600",
    "end": "567600"
  },
  {
    "text": "what else uh encryption if there is a way to encrypt sensitive data just do it and",
    "start": "567600",
    "end": "575760"
  },
  {
    "text": "don't forget that base64 is not an encryption and",
    "start": "575760",
    "end": "581040"
  },
  {
    "text": "yeah so if you have to store your sensitive information",
    "start": "581040",
    "end": "587040"
  },
  {
    "text": "in tools other than password managers or secret managers be sure that they are",
    "start": "587040",
    "end": "594160"
  },
  {
    "text": "these are encrypted that way if i get access to for example kubernetes secrets",
    "start": "594160",
    "end": "599600"
  },
  {
    "text": "i don't get access to plain text credential credentials but ciphertext and i will not be able to",
    "start": "599600",
    "end": "606320"
  },
  {
    "text": "decrypt it easily or i will be i will show you later",
    "start": "606320",
    "end": "612160"
  },
  {
    "text": "and then uh firewalls same as before we have developers everywhere different",
    "start": "612160",
    "end": "617279"
  },
  {
    "text": "countries and we are poor we don't have vpn we just want them to work for us and",
    "start": "617279",
    "end": "623600"
  },
  {
    "text": "that's why everything is in public why not okay and then principle of least",
    "start": "623600",
    "end": "630560"
  },
  {
    "text": "privilege a very very common scenario every single developer is admin in our",
    "start": "630560",
    "end": "636640"
  },
  {
    "text": "tools because maybe one day they will need to do something more than just",
    "start": "636640",
    "end": "642720"
  },
  {
    "text": "doing what they are usually doing so yeah let let's give them admin access for",
    "start": "642720",
    "end": "648399"
  },
  {
    "text": "everything because then they will not need to contact us for",
    "start": "648399",
    "end": "655200"
  },
  {
    "text": "for higher higher permissions then we have our cicd tools we have",
    "start": "655200",
    "end": "661519"
  },
  {
    "text": "these tools that we use to build our cloud so these tools have full access to our cloud they can create resources they",
    "start": "661519",
    "end": "668800"
  },
  {
    "text": "can manage resources and delete resources that's okay but then why do we give admin access",
    "start": "668800",
    "end": "677920"
  },
  {
    "text": "to these tools for our developers if they are admins on our tool that is",
    "start": "677920",
    "end": "683040"
  },
  {
    "text": "admin on our cloud hey what's the problem to deploy malicious resources and",
    "start": "683040",
    "end": "688560"
  },
  {
    "text": "get the same access level so uh yeah if if you have a tool with higher",
    "start": "688560",
    "end": "694399"
  },
  {
    "text": "permission permissions just be sure that your developers cannot exploit this tool",
    "start": "694399",
    "end": "700560"
  },
  {
    "text": "and uh yeah last but not least uh running apps as a root user because yeah my app sometimes uh",
    "start": "700560",
    "end": "707279"
  },
  {
    "text": "needs access to different uh different places and uh it's it's easier to just give it a",
    "start": "707279",
    "end": "713440"
  },
  {
    "text": "root user instead of setting correct permissions but when i get access to that app i am",
    "start": "713440",
    "end": "719279"
  },
  {
    "text": "also doing anything as a route there so i can install new",
    "start": "719279",
    "end": "724639"
  },
  {
    "text": "new library i can install new app i can get access to every single piece of information on that machine thank you",
    "start": "724639",
    "end": "732639"
  },
  {
    "text": "then we are ready for the next uh for the next scenario",
    "start": "732880",
    "end": "738240"
  },
  {
    "text": "symphony profiler who knows symphony who works on symphony",
    "start": "738240",
    "end": "743600"
  },
  {
    "text": "okay symphony is a php framework it's a a really good framework with different",
    "start": "743600",
    "end": "751120"
  },
  {
    "text": "versions and every single version is vulnerable in its own way",
    "start": "751120",
    "end": "756959"
  },
  {
    "text": "and profiler is a development tool used by php developers to see what's going on",
    "start": "756959",
    "end": "763200"
  },
  {
    "text": "with their app usually it's turned on on non-pro environments and you can see",
    "start": "763200",
    "end": "769680"
  },
  {
    "text": "different different parameters of your application you can see what's going on there for example",
    "start": "769680",
    "end": "775360"
  },
  {
    "text": "you can check server parameters environment variables used by the application but you can also",
    "start": "775360",
    "end": "782240"
  },
  {
    "text": "check all requests and uh parameters of all requests that",
    "start": "782240",
    "end": "788160"
  },
  {
    "text": "that your users are making in this application",
    "start": "788160",
    "end": "793519"
  },
  {
    "text": "this includes login requests with login post login request with uh",
    "start": "793600",
    "end": "800880"
  },
  {
    "text": "username and password and some versions of symfony also allows you to",
    "start": "800880",
    "end": "807680"
  },
  {
    "text": "open uh any file in a project structure this can be parameters yaml file with",
    "start": "807680",
    "end": "813120"
  },
  {
    "text": "all your other configs not available in server parameters on environment variables",
    "start": "813120",
    "end": "818880"
  },
  {
    "text": "but let's stick to to our request history but first this is how it looks like if",
    "start": "818880",
    "end": "825839"
  },
  {
    "text": "you open the provider tool you can see that there are some environment variables",
    "start": "825839",
    "end": "832639"
  },
  {
    "text": "and we have our aws keys already there but these keys only",
    "start": "832639",
    "end": "839120"
  },
  {
    "text": "allow you to access s3 again but then i found a post request to a login endpoint with",
    "start": "839120",
    "end": "847440"
  },
  {
    "text": "plain text login and password okay let's use it",
    "start": "847440",
    "end": "852480"
  },
  {
    "text": "when i use that there are of course there's an endpoint defined for this uh for this request i",
    "start": "852720",
    "end": "859519"
  },
  {
    "text": "know where this request was made and i was able to reuse the login and password",
    "start": "859519",
    "end": "864800"
  },
  {
    "text": "to log into that internal application of that company it was uh admin account because who else",
    "start": "864800",
    "end": "870959"
  },
  {
    "text": "is using nonprotein environments non-profit apps and uh it was of course uh",
    "start": "870959",
    "end": "876880"
  },
  {
    "text": "dev environment okay but dev environment had a dev",
    "start": "876880",
    "end": "882880"
  },
  {
    "text": "a subdomain so instead of going to dev.example.com i decided to use to example.com and use",
    "start": "882880",
    "end": "889040"
  },
  {
    "text": "the same login and password and guess what it worked so i was in it was internal application",
    "start": "889040",
    "end": "897440"
  },
  {
    "text": "custom internal application different features there and there was a single sign-on page with different",
    "start": "897440",
    "end": "904880"
  },
  {
    "text": "apps available for that user there was a crm there was",
    "start": "904880",
    "end": "909920"
  },
  {
    "text": "webmail so i didn't need to access any customer data so i decided to",
    "start": "909920",
    "end": "916240"
  },
  {
    "text": "use the webmail to see what's there on this webmail i found a lot of aws",
    "start": "916240",
    "end": "923199"
  },
  {
    "text": "related emails like invoices like trusted advisor reports and uh",
    "start": "923199",
    "end": "929040"
  },
  {
    "text": "this made me thinking that maybe this is a root user email for that aws account why",
    "start": "929040",
    "end": "934880"
  },
  {
    "text": "not let's check that i tried to log in using that email and",
    "start": "934880",
    "end": "940639"
  },
  {
    "text": "i didn't have password but i have access to that inbox so why don't you use",
    "start": "940639",
    "end": "945839"
  },
  {
    "text": "rested password functionality and guess what it worked i got my new password by clicking on the",
    "start": "945839",
    "end": "953600"
  },
  {
    "text": "link that i got on that email and i was in why because there was no mfa so just",
    "start": "953600",
    "end": "958880"
  },
  {
    "text": "login password and you're in and this was really aws root user so",
    "start": "958880",
    "end": "965440"
  },
  {
    "text": "i had full access to that account there was no mfa etc but",
    "start": "965440",
    "end": "970880"
  },
  {
    "text": "that wasn't the only nice thing there it was the account used for the whole organization",
    "start": "970880",
    "end": "978320"
  },
  {
    "text": "it was organizational management account so instead of getting access to one",
    "start": "978320",
    "end": "983360"
  },
  {
    "text": "account i got access to 40 or 50 different aws accounts on admin",
    "start": "983360",
    "end": "988480"
  },
  {
    "text": "level because this route account was a trusted account for admin roles on all other accounts",
    "start": "988480",
    "end": "997040"
  },
  {
    "text": "yeah why not so what went wrong here first of all production data on a",
    "start": "997040",
    "end": "1003759"
  },
  {
    "text": "non-production environment it's a common scenario where a customer asks",
    "start": "1003759",
    "end": "1009600"
  },
  {
    "text": "developers to [Music] find to find a bug somewhere and they just",
    "start": "1009600",
    "end": "1015920"
  },
  {
    "text": "copy copy the production database to a nonprofit to work on a non-profit on the production data but",
    "start": "1015920",
    "end": "1022959"
  },
  {
    "text": "it's not a good idea because then first of all you break many many rules",
    "start": "1022959",
    "end": "1029360"
  },
  {
    "text": "gdpr doesn't like you etc but you also have your production data on the",
    "start": "1029360",
    "end": "1035280"
  },
  {
    "text": "non-profit which is not that secure because you excluded it from pen tests and if i get to a non-pro then i can",
    "start": "1035280",
    "end": "1042880"
  },
  {
    "text": "simply using the same credentials get to prod so this is the second point here",
    "start": "1042880",
    "end": "1048160"
  },
  {
    "text": "reusing passwords for the same users on different environments even if you don't",
    "start": "1048160",
    "end": "1053360"
  },
  {
    "text": "copy the whole database you want to remember the same password single password for all environments in this",
    "start": "1053360",
    "end": "1059919"
  },
  {
    "text": "app and the word remember is underlined here because if you",
    "start": "1059919",
    "end": "1065200"
  },
  {
    "text": "remember your password is already bad instead of remembering it just keep it in the password manager",
    "start": "1065200",
    "end": "1071760"
  },
  {
    "text": "but if you have many different environments your app runs on different environments",
    "start": "1071760",
    "end": "1077120"
  },
  {
    "text": "be sure to use different passwords on each environment that way if one leaks it will only expose this environment and",
    "start": "1077120",
    "end": "1084480"
  },
  {
    "text": "not non not the prod one and sometimes",
    "start": "1084480",
    "end": "1090240"
  },
  {
    "text": "i also found different architectures where prod and non-prod were running on the same cloud",
    "start": "1090240",
    "end": "1096720"
  },
  {
    "text": "okay it's easier to manage and for small companies it's better to have",
    "start": "1096720",
    "end": "1101840"
  },
  {
    "text": "one account that's how they were explaining themselves but",
    "start": "1101840",
    "end": "1107280"
  },
  {
    "text": "when you have both on single account and you have your non-profit not that secure",
    "start": "1107280",
    "end": "1113679"
  },
  {
    "text": "then getting into that account means that someone gets into your account with pro data that's not good",
    "start": "1113679",
    "end": "1121120"
  },
  {
    "text": "and uh sharing email for different uh for different services",
    "start": "1121120",
    "end": "1127760"
  },
  {
    "text": "when i found this uh webmail it was not only for aws but",
    "start": "1127760",
    "end": "1132880"
  },
  {
    "text": "other services were also registered on that email and it was office 365 administration account it was",
    "start": "1132880",
    "end": "1140799"
  },
  {
    "text": "a github organization main account because they wanted to have everything",
    "start": "1140799",
    "end": "1146160"
  },
  {
    "text": "in a single place to manage everything from a single place and thanks to that i",
    "start": "1146160",
    "end": "1151760"
  },
  {
    "text": "got access to every single place and also",
    "start": "1151760",
    "end": "1157120"
  },
  {
    "text": "sometimes companies try to explain themselves that",
    "start": "1157120",
    "end": "1162799"
  },
  {
    "text": "this account is being used by different uh different team members and if someone goes on vacation we want to",
    "start": "1162799",
    "end": "1169840"
  },
  {
    "text": "be sure that others also have access to that but hey have you heard about distribution list instead of a",
    "start": "1169840",
    "end": "1176960"
  },
  {
    "text": "single inbox for that maybe you can use a different uh",
    "start": "1176960",
    "end": "1182080"
  },
  {
    "text": "you can use different uh emails for different services but then they can",
    "start": "1182080",
    "end": "1188320"
  },
  {
    "text": "all point to one distribution list where you have your team members",
    "start": "1188320",
    "end": "1193440"
  },
  {
    "text": "underneath and uh also uh also it's a good idea to change your",
    "start": "1193440",
    "end": "1199200"
  },
  {
    "text": "password from time to time because if it deletes today it will not be valid uh in",
    "start": "1199200",
    "end": "1204720"
  },
  {
    "text": "three three to six months depends on your policy and uh use mfa wherever possible why",
    "start": "1204720",
    "end": "1213039"
  },
  {
    "text": "because if your password leaks then i will try to use it and if you have",
    "start": "1213039",
    "end": "1218640"
  },
  {
    "text": "mfi enabled then it will be a bit harder for me to use it a bit harder because",
    "start": "1218640",
    "end": "1224880"
  },
  {
    "text": "as one of the evil hackers group showed us recently it's also",
    "start": "1224880",
    "end": "1232640"
  },
  {
    "text": "not impossible to bypass mfa by for example finding",
    "start": "1232640",
    "end": "1238240"
  },
  {
    "text": "where the guy whose password we go to where where he lives and",
    "start": "1238240",
    "end": "1243919"
  },
  {
    "text": "we know that he lives for example in poland and we know that now in poland there's 2 a.m",
    "start": "1243919",
    "end": "1249760"
  },
  {
    "text": "at night and we will just push a lot of a lot of mfa requests to his phone",
    "start": "1249760",
    "end": "1255679"
  },
  {
    "text": "and uh if it's not on silent mode it will pink and pink and pink and pink and finally he decides to",
    "start": "1255679",
    "end": "1263760"
  },
  {
    "text": "press ok allow and that's how they bypassed a lot of mfa",
    "start": "1263760",
    "end": "1271120"
  },
  {
    "text": "multi-factor authentications just because they bombed the mfa",
    "start": "1271200",
    "end": "1277000"
  },
  {
    "text": "also sometimes teams decide not to enable mfa because the account",
    "start": "1277120",
    "end": "1282559"
  },
  {
    "text": "is being used by many people it's it's a third account and that's a red light if it's a shard",
    "start": "1282559",
    "end": "1289360"
  },
  {
    "text": "account just don't do that and create dedicated dedicated accounts for your developers",
    "start": "1289360",
    "end": "1297360"
  },
  {
    "text": "now the last one the last scenario it starts from github",
    "start": "1297360",
    "end": "1304640"
  },
  {
    "text": "who uses github who uses public repositories on github",
    "start": "1304640",
    "end": "1312080"
  },
  {
    "text": "okay let's start there public github repositories this this can be the only step here",
    "start": "1312080",
    "end": "1318559"
  },
  {
    "text": "because if you look for different credentials you can just get a",
    "start": "1318559",
    "end": "1323679"
  },
  {
    "text": "lot of results with different credentials not only aws but",
    "start": "1323679",
    "end": "1328960"
  },
  {
    "text": "many different clouds and you can just find it grab it and use it",
    "start": "1328960",
    "end": "1334879"
  },
  {
    "text": "but let's make it a bit more interesting so",
    "start": "1335840",
    "end": "1341360"
  },
  {
    "text": "for this scenario i found the repository with interesting variable names but",
    "start": "1341360",
    "end": "1347760"
  },
  {
    "text": "the values for these variables were encrypted wow someone used encryption in that in their",
    "start": "1347760",
    "end": "1354720"
  },
  {
    "text": "hard coded credentials in the file in repository okay so i decided to dig deeper into that",
    "start": "1354720",
    "end": "1361679"
  },
  {
    "text": "repository to find a way to decrypt them and then i found a java class",
    "start": "1361679",
    "end": "1367360"
  },
  {
    "text": "with the whole decryption logic okay still",
    "start": "1367360",
    "end": "1373280"
  },
  {
    "text": "not that bad because you need a a secret key to decrypt it but it was",
    "start": "1373280",
    "end": "1379039"
  },
  {
    "text": "hardcoded in the decryption class because it's easier it's the only place where it's used so yeah why not",
    "start": "1379039",
    "end": "1385200"
  },
  {
    "text": "so i was able to decode these credentials and i got access to office 365 account",
    "start": "1385200",
    "end": "1393360"
  },
  {
    "text": "here we can see different different examples of what to extract from public repositories",
    "start": "1393760",
    "end": "1399360"
  },
  {
    "text": "you can see different credentials",
    "start": "1399360",
    "end": "1404720"
  },
  {
    "text": "for smtp for databases yeah whatever you want just",
    "start": "1404720",
    "end": "1410559"
  },
  {
    "text": "pick one and then how to how to proceed with that we",
    "start": "1410559",
    "end": "1417120"
  },
  {
    "text": "have access to office 365 account and using that you can see what",
    "start": "1417120",
    "end": "1423360"
  },
  {
    "text": "what subscriptions are or what plans are available for that user and this user had all plans available so for example",
    "start": "1423360",
    "end": "1430080"
  },
  {
    "text": "there was a team space api available and this means that you can log in using that credentials to teams",
    "start": "1430080",
    "end": "1436559"
  },
  {
    "text": "and on teams you can just find a c levels for example ceo and say hi",
    "start": "1436559",
    "end": "1443200"
  },
  {
    "text": "and this accounts these accounts are usually service accounts so the ceo will",
    "start": "1443200",
    "end": "1449360"
  },
  {
    "text": "get a message from no reply at mycompany.com okay hi",
    "start": "1449360",
    "end": "1455039"
  },
  {
    "text": "but that's not what we are looking for we want to get access to cloud accounts so other cloud cloud",
    "start": "1455039",
    "end": "1460799"
  },
  {
    "text": "accounts so instead of just saying hello to a ceo i decided to",
    "start": "1460799",
    "end": "1466320"
  },
  {
    "text": "open sharepoint and on sharepoint i got access to many different",
    "start": "1466320",
    "end": "1471440"
  },
  {
    "text": "files and one of these files was a pdf file and this pdf file was called a jira",
    "start": "1471440",
    "end": "1478400"
  },
  {
    "text": "installation guide or something like that it was a step-by-step configuration guide",
    "start": "1478400",
    "end": "1485360"
  },
  {
    "text": "that was created by some juniors to document what they were doing step by",
    "start": "1485360",
    "end": "1491760"
  },
  {
    "text": "step to install the jira new jira for the company and the last step was and",
    "start": "1491760",
    "end": "1497120"
  },
  {
    "text": "now we created admin user with login and password okay thank you",
    "start": "1497120",
    "end": "1502880"
  },
  {
    "text": "so uh i got a login password for admin user on jira",
    "start": "1502880",
    "end": "1508320"
  },
  {
    "text": "and jira usually it is a public service so jira jira.example.com and voila there was a",
    "start": "1508320",
    "end": "1515679"
  },
  {
    "text": "login page for that thank you and i was able to login to that jira and",
    "start": "1515679",
    "end": "1521279"
  },
  {
    "text": "as admin i can access everything so i looked for interesting projects",
    "start": "1521279",
    "end": "1527279"
  },
  {
    "text": "a few with aws in name and one of these projects had tasks to create iam user for",
    "start": "1527279",
    "end": "1535919"
  },
  {
    "text": "external service it was a vulnerability scanner or something like that",
    "start": "1535919",
    "end": "1541440"
  },
  {
    "text": "and uh this task had a comment and in this comment it was uh",
    "start": "1541440",
    "end": "1546480"
  },
  {
    "text": "access and secret key in plain text someone someone finished that task by posting",
    "start": "1546480",
    "end": "1552000"
  },
  {
    "text": "these credentials in a comment so yeah thank you i just grabbed this uh",
    "start": "1552000",
    "end": "1557279"
  },
  {
    "text": "the credentials and i'm admin on your cloud what doing what went wrong here",
    "start": "1557279",
    "end": "1563360"
  },
  {
    "text": "first of all do not hard code any sensitive data into your source code there are other better",
    "start": "1563360",
    "end": "1569840"
  },
  {
    "text": "ways to store passwords to store keys you don't have to",
    "start": "1569840",
    "end": "1574960"
  },
  {
    "text": "put them in your config files stored next to your classes etc and",
    "start": "1574960",
    "end": "1580720"
  },
  {
    "text": "if you say that you don't use any secret management tools secret managers password managers etc just start do it",
    "start": "1580720",
    "end": "1588400"
  },
  {
    "text": "start doing it because you need it it's a bit safer and",
    "start": "1588400",
    "end": "1593760"
  },
  {
    "text": "if you encrypt something be sure to keep the encryption key the secret key",
    "start": "1593760",
    "end": "1600400"
  },
  {
    "text": "secure and do not put it just next to the logic because then there is no logic",
    "start": "1600400",
    "end": "1605440"
  },
  {
    "text": "in that and uh when you",
    "start": "1605440",
    "end": "1610720"
  },
  {
    "text": "push something to the repository and you know that oh i shouldn't do that it's okay it's too late",
    "start": "1610720",
    "end": "1618400"
  },
  {
    "text": "then it's not enough just to overwrite it with with a new new version with some dummy",
    "start": "1618400",
    "end": "1624799"
  },
  {
    "text": "value because it's git it's version control you can return to previous version you can check git history and",
    "start": "1624799",
    "end": "1632240"
  },
  {
    "text": "guess what it's there so instead of just overwriting it be sure that",
    "start": "1632240",
    "end": "1637279"
  },
  {
    "text": "your credentials are rotated password is changed key is invalidated and",
    "start": "1637279",
    "end": "1643440"
  },
  {
    "text": "it will not give any access to someone who finds it",
    "start": "1643440",
    "end": "1648880"
  },
  {
    "text": "then we have bot tools selection for this public github repository it was",
    "start": "1648880",
    "end": "1656000"
  },
  {
    "text": "a support team working on jira tickets they decided to",
    "start": "1656000",
    "end": "1663279"
  },
  {
    "text": "create some script that will reply to any new ticket in 10 minutes because",
    "start": "1663279",
    "end": "1668720"
  },
  {
    "text": "they had a sla that they have to reply to every single ticket in 10 minutes so instead of doing it manually they",
    "start": "1668720",
    "end": "1674559"
  },
  {
    "text": "decided to automate it okay that's a great idea but as they were not developers they didn't",
    "start": "1674559",
    "end": "1680240"
  },
  {
    "text": "know how developers work and where they store their code so they created a free public",
    "start": "1680240",
    "end": "1685679"
  },
  {
    "text": "repository and pushed everything there and also",
    "start": "1685679",
    "end": "1691360"
  },
  {
    "text": "if you don't know how to share credentials in a secure way for example sharing it from",
    "start": "1691360",
    "end": "1696799"
  },
  {
    "text": "your password manager and but you need to share your credentials because there is a new team",
    "start": "1696799",
    "end": "1702480"
  },
  {
    "text": "member and you just created the account for him it's not a good idea to share both login",
    "start": "1702480",
    "end": "1708159"
  },
  {
    "text": "and password on the same channel for example on teams or on slack why",
    "start": "1708159",
    "end": "1713360"
  },
  {
    "text": "imagine a situation where your new team member shares his screen",
    "start": "1713360",
    "end": "1718720"
  },
  {
    "text": "right now because he presents something to a customer or to",
    "start": "1718720",
    "end": "1725039"
  },
  {
    "text": "other people from different projects and uh instead of sharing just the single uh",
    "start": "1725039",
    "end": "1730960"
  },
  {
    "text": "application window he's sharing the whole screen but uh he'll he only",
    "start": "1730960",
    "end": "1736799"
  },
  {
    "text": "only shows what's there on part of the screen on one of the applications and then on the rest of the screen there's a",
    "start": "1736799",
    "end": "1742960"
  },
  {
    "text": "slack in in background oops sorry there's a slag in background and when he's doing his presentation",
    "start": "1742960",
    "end": "1750320"
  },
  {
    "text": "you just send him the login and password and it's there anyone",
    "start": "1750320",
    "end": "1756080"
  },
  {
    "text": "on that call can just grab this and copy this and try to use it while he is presenting",
    "start": "1756080",
    "end": "1761760"
  },
  {
    "text": "something so instead of doing that send one thing on teams one thing on",
    "start": "1761760",
    "end": "1767039"
  },
  {
    "text": "email or if you really need to use only a single channel you can use a tool like a one time",
    "start": "1767039",
    "end": "1774240"
  },
  {
    "text": "that's a web tool where you generate a one-time link with your secret uh phrase",
    "start": "1774240",
    "end": "1782080"
  },
  {
    "text": "and uh be sure that the person you are sharing it with uh is focused on what",
    "start": "1782080",
    "end": "1787279"
  },
  {
    "text": "you will just what we will send to him just right now and send the login and the link",
    "start": "1787279",
    "end": "1793840"
  },
  {
    "text": "then he clicks the link he gets the secret value moves it to password manager and if",
    "start": "1793840",
    "end": "1800000"
  },
  {
    "text": "anyone clicks the link again or copies that the link open in their window it will be invalid because it's one time",
    "start": "1800000",
    "end": "1807200"
  },
  {
    "text": "link and uh then we have uh",
    "start": "1807200",
    "end": "1812480"
  },
  {
    "text": "lack of security awareness that's the biggest problem everywhere because usually developers don't know that",
    "start": "1812480",
    "end": "1818320"
  },
  {
    "text": "something bad may happen if they use it that way or in other so",
    "start": "1818320",
    "end": "1823440"
  },
  {
    "text": "not only developers but in this case we had a support team",
    "start": "1823440",
    "end": "1829120"
  },
  {
    "text": "who had access to our aws account to create a new user and then",
    "start": "1829120",
    "end": "1835919"
  },
  {
    "text": "they just decided to post this uh accessing secret key as a comment uh",
    "start": "1835919",
    "end": "1841919"
  },
  {
    "text": "in uh in this in this ticket okay this was",
    "start": "1841919",
    "end": "1847279"
  },
  {
    "text": "okay from their perspective because the ticket was done we can move to another one but it",
    "start": "1847279",
    "end": "1853840"
  },
  {
    "text": "can be done a bit better instead of doing that they can share it in a secure way because",
    "start": "1853840",
    "end": "1859919"
  },
  {
    "text": "the place that they decided to to use can be opened by not only the",
    "start": "1859919",
    "end": "1865919"
  },
  {
    "text": "the guy who created this ticket but all other team members who have access to the same",
    "start": "1865919",
    "end": "1871279"
  },
  {
    "text": "same project also if you",
    "start": "1871279",
    "end": "1876799"
  },
  {
    "text": "create documentation it's not a good idea to put valid",
    "start": "1876799",
    "end": "1882799"
  },
  {
    "text": "user credentials into the in this documentation because that's not not required it's not needed to to be",
    "start": "1882799",
    "end": "1890399"
  },
  {
    "text": "there and i asked them why they did that and they said that",
    "start": "1890399",
    "end": "1896159"
  },
  {
    "text": "we were told to document every single step and that was one of the steps so we documented it",
    "start": "1896159",
    "end": "1902559"
  },
  {
    "text": "okay that's a nice explanation but still",
    "start": "1902559",
    "end": "1908000"
  },
  {
    "text": "you can think before doing something that may be risky and uh",
    "start": "1908000",
    "end": "1914480"
  },
  {
    "text": "last thing here if you really have to send emails from your application there are better ways",
    "start": "1914480",
    "end": "1921279"
  },
  {
    "text": "than using your own your own directory user credentials because if",
    "start": "1921279",
    "end": "1927200"
  },
  {
    "text": "you use your own office 365 login and password just to send emails then anyone with access to that",
    "start": "1927200",
    "end": "1933200"
  },
  {
    "text": "repository will get your login and password and they can log in as you to to this service and here it",
    "start": "1933200",
    "end": "1940799"
  },
  {
    "text": "was office 365 but it can be any other mailing service and uh that's not really",
    "start": "1940799",
    "end": "1946480"
  },
  {
    "text": "what you want that was the last slide thank you for uh for joining this",
    "start": "1946480",
    "end": "1953600"
  },
  {
    "text": "session maybe you have questions that's the right time to",
    "start": "1953600",
    "end": "1959360"
  },
  {
    "text": "ask you were talking about a scenario where you managed to get the access to the white mail",
    "start": "1960840",
    "end": "1967120"
  },
  {
    "text": "and when you went through the password sorry you obviously have access to",
    "start": "1967120",
    "end": "1973039"
  },
  {
    "text": "how long it took the company to actually realize",
    "start": "1973039",
    "end": "1977200"
  },
  {
    "text": "okay the question is uh how long it took the company to realize that i changed",
    "start": "1978640",
    "end": "1983679"
  },
  {
    "text": "the password for a cloud account the thing is that when i find something i report it to the",
    "start": "1983679",
    "end": "1992000"
  },
  {
    "text": "data owner it's not like i want to dig into your cloud account and then just maybe publish it or move on i do it",
    "start": "1992000",
    "end": "1999360"
  },
  {
    "text": "to uh to find a way in and then to tell the company hey you have a problem there's a",
    "start": "1999360",
    "end": "2005360"
  },
  {
    "text": "hole so i told them immediately that when this was possible at the same the same night i shared",
    "start": "2005360",
    "end": "2011519"
  },
  {
    "text": "the report with them saying that hey you have a big hole here and the password is changed so i don't know how long it",
    "start": "2011519",
    "end": "2018960"
  },
  {
    "text": "would take but there are other cases where i am completely ignored by by these companies",
    "start": "2018960",
    "end": "2024880"
  },
  {
    "text": "so uh i still have valid access to different uh cloud accounts",
    "start": "2024880",
    "end": "2031519"
  },
  {
    "text": "that i found uh in june or july still they're still working so yeah",
    "start": "2031519",
    "end": "2039518"
  },
  {
    "text": "would you suggest that this ship is like some sort of alerts oh yeah alerts um now the question is if",
    "start": "2041679",
    "end": "2047840"
  },
  {
    "text": "they should use some some kind of alerts uh yes and uh for example uh the the",
    "start": "2047840",
    "end": "2053599"
  },
  {
    "text": "scenario with kubernetes you don't usually want your developers",
    "start": "2053599",
    "end": "2058720"
  },
  {
    "text": "to login to these containers and you don't want them to be there because they have everything streamed to the cloud",
    "start": "2058720",
    "end": "2064240"
  },
  {
    "text": "logs are in different place so if something appears in bash history or ssh log",
    "start": "2064240",
    "end": "2071118"
  },
  {
    "text": "then you can get a notification that something bad is going on because usually they shouldn't do that",
    "start": "2071119",
    "end": "2077040"
  },
  {
    "text": "also if you use guard duty on aws it can scan",
    "start": "2077040",
    "end": "2084480"
  },
  {
    "text": "your logs your api calls on aws and it can find a weird behavior because uh",
    "start": "2084480",
    "end": "2092240"
  },
  {
    "text": "i here in my scenario i logged into jenkins machine to communicate with the cloud and this was",
    "start": "2092240",
    "end": "2099440"
  },
  {
    "text": "okay from the perspective of guard duty because i was i was still on that machine but it's possible to extract a",
    "start": "2099440",
    "end": "2106000"
  },
  {
    "text": "temporary access secret key from that machine and run it from my laptop and then uh this",
    "start": "2106000",
    "end": "2112800"
  },
  {
    "text": "this will be successful as well but it will be marked as uh something weird",
    "start": "2112800",
    "end": "2117839"
  },
  {
    "text": "in guard duty so you will get your notification that ec2 credentials were used outside of the",
    "start": "2117839",
    "end": "2123920"
  },
  {
    "text": "ec2 and you can have automating automated responses to that to block this this",
    "start": "2123920",
    "end": "2130400"
  },
  {
    "text": "role to remove that that access etc",
    "start": "2130400",
    "end": "2135200"
  },
  {
    "text": "if you have other questions you can reach me on linkedin i will",
    "start": "2139359",
    "end": "2144400"
  },
  {
    "text": "try to answer every single one of your questions future questions",
    "start": "2144400",
    "end": "2150079"
  },
  {
    "text": "thank you [Applause]",
    "start": "2150079",
    "end": "2157920"
  },
  {
    "text": "you",
    "start": "2164240",
    "end": "2166320"
  }
]