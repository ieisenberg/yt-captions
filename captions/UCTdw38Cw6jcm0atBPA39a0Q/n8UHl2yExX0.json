[
  {
    "text": "good morning welcome to the first session after keynote keynote uh the first session of NDC",
    "start": "5240",
    "end": "12759"
  },
  {
    "text": "security um I hope uh like you like you like keynote did you of course of course",
    "start": "12759",
    "end": "19199"
  },
  {
    "text": "of course um I I was also there very nice I",
    "start": "19199",
    "end": "24519"
  },
  {
    "text": "love it um and I hope this session won't be disappointing uh so my name is Sergey",
    "start": "24519",
    "end": "31599"
  },
  {
    "text": "and I will be a presenter for for for this session this session is called pentesting Azure container services",
    "start": "31599",
    "end": "37640"
  },
  {
    "text": "where I'm going to show you how can we uh like find misconfigurations in different in in",
    "start": "37640",
    "end": "44520"
  },
  {
    "text": "this in containers when you run containers in the cloud uh to be fair it could be done in any other Cloud it",
    "start": "44520",
    "end": "52399"
  },
  {
    "text": "could be done even on premises uh because initially this session was created for premis",
    "start": "52399",
    "end": "58079"
  },
  {
    "text": "environment but it works in Azure and I will use Azure examples uh to show you",
    "start": "58079",
    "end": "63960"
  },
  {
    "text": "how it can be misconfigured uh so before I start let me say a few words about myself uh so",
    "start": "63960",
    "end": "70400"
  },
  {
    "text": "I'm a I'm a consultant instructor conference speaker you can find my sessions at black hat uh black hat in",
    "start": "70400",
    "end": "77720"
  },
  {
    "text": "London uh black hat Europe uh Wild West hack in fast hack in Paris and many many",
    "start": "77720",
    "end": "83360"
  },
  {
    "text": "other conferences uh I also work with customers uh what usually what I what",
    "start": "83360",
    "end": "89040"
  },
  {
    "text": "what I what I deliver is something I found when I work with customers so I work in consultant um and I also like",
    "start": "89040",
    "end": "96720"
  },
  {
    "text": "provide trainings to customers as well I have SS a",
    "start": "96720",
    "end": "102960"
  },
  {
    "text": "few um I have SS MVP and many others um",
    "start": "102960",
    "end": "108240"
  },
  {
    "text": "but the key here what I want to point you point here is that I prefer life demos so you won't see many slides in",
    "start": "108240",
    "end": "115880"
  },
  {
    "text": "this session is that okay so I have few slides most of the time I will show you",
    "start": "115880",
    "end": "122719"
  },
  {
    "text": "live demos um so just slides to show you General picture then jump to",
    "start": "122719",
    "end": "128479"
  },
  {
    "text": "demos of course when we when I show live demos when everyone show live demos",
    "start": "128479",
    "end": "133800"
  },
  {
    "text": "something could go wrong right just in case so I hope everything will be fine",
    "start": "133800",
    "end": "139760"
  },
  {
    "text": "but uh once uh when I delivered the session I made one one stupid mistake I",
    "start": "139760",
    "end": "145920"
  },
  {
    "text": "decided to just right through the session restart kubernetes",
    "start": "145920",
    "end": "151599"
  },
  {
    "text": "it took 10 minutes when I had 40 minute session uh this time I will not repeat",
    "start": "151599",
    "end": "157560"
  },
  {
    "text": "this this this mistake but just in case something might might happen um all right so um anyone here work with",
    "start": "157560",
    "end": "164800"
  },
  {
    "text": "containers probably if you are here yeah and those containers probably hosted in",
    "start": "164800",
    "end": "170959"
  },
  {
    "text": "Azure good so what I would like to show you what can go wrong if we work with",
    "start": "170959",
    "end": "176480"
  },
  {
    "text": "containers in Azure before I show you that probably this slide will be very very very simple for you but just in",
    "start": "176480",
    "end": "183120"
  },
  {
    "text": "case for those who doesn't work with containers I want to just give you complete like like like brief picture",
    "start": "183120",
    "end": "189000"
  },
  {
    "text": "how containers work in Azure um so first of all we before we deploy a container",
    "start": "189000",
    "end": "194480"
  },
  {
    "text": "we need to create an image so the deploy container we need an image um after that we push this image to container registry",
    "start": "194480",
    "end": "201760"
  },
  {
    "text": "in Azure which is called ACR uh then oh it will be stored there then when we",
    "start": "201760",
    "end": "207440"
  },
  {
    "text": "want to deploy container we want to deploy it somewhere on container instance or container apps which like",
    "start": "207440",
    "end": "213879"
  },
  {
    "text": "new new kind of new service or kubernetes um more often we use",
    "start": "213879",
    "end": "218959"
  },
  {
    "text": "kubernetes that's the most common and like production rating also what we what we like about kubernetes that we can",
    "start": "218959",
    "end": "225480"
  },
  {
    "text": "move containers between locations and if you have like kubernetes install somewhere else you can also like it like",
    "start": "225480",
    "end": "233439"
  },
  {
    "text": "it will it will be more portable so is that clear I'm not talking here about",
    "start": "233439",
    "end": "239319"
  },
  {
    "text": "pipeline and automation right so just the basic basic steps we like we need to take yeah of course normally we automate",
    "start": "239319",
    "end": "246599"
  },
  {
    "text": "with pipelines now what can go wrong if we work with containers in the cloud let me",
    "start": "246599",
    "end": "252840"
  },
  {
    "text": "show you first one of the the most typical thing the most like low hanging fruits we can find when we pentest by",
    "start": "252840",
    "end": "259359"
  },
  {
    "text": "the way um quite often I pentest and in pentest first of all we're trying to find something which is really easy easy",
    "start": "259359",
    "end": "266400"
  },
  {
    "text": "to compromise um and the first thing that quite commonly can be found is uh Cube",
    "start": "266400",
    "end": "272639"
  },
  {
    "text": "CTL credentials so anyone use Cube CTL yeah",
    "start": "272639",
    "end": "278600"
  },
  {
    "text": "yeah yes me what oh",
    "start": "278600",
    "end": "286039"
  },
  {
    "text": "yeah no",
    "start": "288199",
    "end": "292240"
  },
  {
    "text": "better yeah",
    "start": "293919",
    "end": "301639"
  },
  {
    "text": "near come here and help is it",
    "start": "304039",
    "end": "310960"
  },
  {
    "text": "perfect if not all right so uh so so so ql",
    "start": "310960",
    "end": "318800"
  },
  {
    "text": "credentials ql credentials uh anyone work with ql or you do from the portal",
    "start": "318800",
    "end": "324560"
  },
  {
    "text": "course no so ql um that's the tool we have on the machine",
    "start": "324560",
    "end": "330520"
  },
  {
    "text": "so let me just try to do some basic things with ql I'm going to go to the folder called",
    "start": "330520",
    "end": "336479"
  },
  {
    "text": "Cube uh Zoom it for you and let's run something like",
    "start": "336479",
    "end": "341680"
  },
  {
    "text": "cctl uh get pods and I can see pods right away no",
    "start": "341680",
    "end": "349520"
  },
  {
    "text": "authentication no asking for credentials nothing all right let's try to do the",
    "start": "349520",
    "end": "356120"
  },
  {
    "text": "same on a different machine",
    "start": "356120",
    "end": "361639"
  },
  {
    "text": "oops uh oh a this",
    "start": "366240",
    "end": "371560"
  },
  {
    "text": "time and let's wait it should fail so it will take a bit",
    "start": "373919",
    "end": "379599"
  },
  {
    "text": "longer still better than the restart kubernetes but takes time and so yeah but it's not working so",
    "start": "379599",
    "end": "387240"
  },
  {
    "text": "it's not working uh similar machines but on one machine I was able to run command",
    "start": "387240",
    "end": "392960"
  },
  {
    "text": "without any authentication without any questions uh on a second machine it asked me for and doesn't even ask me",
    "start": "392960",
    "end": "398960"
  },
  {
    "text": "about credential just say that I cannot do it so somewhere credentials are stored right",
    "start": "398960",
    "end": "407680"
  },
  {
    "text": "nowhere yep so if you go to uh user",
    "start": "409080",
    "end": "416120"
  },
  {
    "text": "profile um so here I can't really have really good zoom but after I find it I will",
    "start": "418520",
    "end": "425639"
  },
  {
    "text": "Zoom it so uh I go I'm going to user folders current user and so here we have",
    "start": "425639",
    "end": "431879"
  },
  {
    "text": "a folder called cube in the user profile so if I just simply copy and paste this",
    "start": "431879",
    "end": "438080"
  },
  {
    "text": "folder from one machine to another so copy that Cube",
    "start": "438080",
    "end": "444680"
  },
  {
    "text": "to uh another machine shouldn't take",
    "start": "444680",
    "end": "451759"
  },
  {
    "text": "one not that bad all right try",
    "start": "457879",
    "end": "463919"
  },
  {
    "text": "again yep it's working now after that when I can see those all of those pods",
    "start": "463919",
    "end": "472560"
  },
  {
    "text": "what I can do I can let me find out the new name um aure front",
    "start": "472560",
    "end": "481319"
  },
  {
    "text": "oops connect to",
    "start": "481319",
    "end": "485039"
  },
  {
    "text": "it",
    "start": "489080",
    "end": "492080"
  },
  {
    "text": "and um so I'm inside of container uh that's the that's the easiest let's",
    "start": "494240",
    "end": "499520"
  },
  {
    "text": "called hack not really hack but something that pester or attacker can find on the",
    "start": "499520",
    "end": "505520"
  },
  {
    "text": "machine so um I will give you a bit later recommendations what do but I",
    "start": "505520",
    "end": "510759"
  },
  {
    "text": "guess you have some ideas so first of all the workstation itself that you use to connect to kubernetes must be well",
    "start": "510759",
    "end": "516560"
  },
  {
    "text": "protected all right so this is the most simple simple compromise that I can I",
    "start": "516560",
    "end": "522518"
  },
  {
    "text": "I'm trying to find right away um when when I start to work with uh like",
    "start": "522519",
    "end": "528000"
  },
  {
    "text": "customer but um I don't want to finish conf my my session right now it should",
    "start": "528000",
    "end": "534000"
  },
  {
    "text": "be something else so another one another example um of compromise will be more",
    "start": "534000",
    "end": "539440"
  },
  {
    "text": "more complicated and most like for the rest of my session I will show you that is how container image container image",
    "start": "539440",
    "end": "548279"
  },
  {
    "text": "uh if container register is not is not pred perfectly how container image can be compromised modified and then uh can",
    "start": "548279",
    "end": "556600"
  },
  {
    "text": "get can give all keys to cuber indus environment so uh if container registry",
    "start": "556600",
    "end": "563920"
  },
  {
    "text": "doesn't have correct permissions so for example user may have permissions assign",
    "start": "563920",
    "end": "569560"
  },
  {
    "text": "on the subscription level or Resource Group level and inherited on container registry so if someone can pull images",
    "start": "569560",
    "end": "577800"
  },
  {
    "text": "so download images from container Registries what they can do they can modify them it's quite easy if you can",
    "start": "577800",
    "end": "584800"
  },
  {
    "text": "download image you can modify this image as well then you can push those images back",
    "start": "584800",
    "end": "591040"
  },
  {
    "text": "to container registry not you but attackers so after that company just",
    "start": "591040",
    "end": "598320"
  },
  {
    "text": "normally with their pop pipelines deploy containers in kubernetes or container",
    "start": "598320",
    "end": "604920"
  },
  {
    "text": "instance or container apps doesn't matter but in all of those cases containers on those environments will be",
    "start": "604920",
    "end": "612040"
  },
  {
    "text": "trojanized as the result as the result attacker will be able to have",
    "start": "612040",
    "end": "617800"
  },
  {
    "text": "access to that",
    "start": "617800",
    "end": "620800"
  },
  {
    "text": "environment from here",
    "start": "626880",
    "end": "631320"
  },
  {
    "text": "demo so let me close that close",
    "start": "632880",
    "end": "639880"
  },
  {
    "text": "that close that all right so let me show you what I have let's start from",
    "start": "639880",
    "end": "646079"
  },
  {
    "text": "container registry was there",
    "start": "646079",
    "end": "653079"
  },
  {
    "text": "already oops that's too much so I have container regist called a",
    "start": "654399",
    "end": "661240"
  },
  {
    "text": "hack here I have a repository call uh hello W on purpose I",
    "start": "664200",
    "end": "673680"
  },
  {
    "text": "made a mistake just to make sure it's mine uh hello",
    "start": "673680",
    "end": "679600"
  },
  {
    "text": "W um and oh you know what you know what",
    "start": "679600",
    "end": "685240"
  },
  {
    "text": "probably it's already rized I think I forgot to remove the pre version um H all right anyway so it's",
    "start": "685240",
    "end": "693600"
  },
  {
    "text": "quite similar um then on my workstation that's my terer machine I have Docker I have",
    "start": "693600",
    "end": "701440"
  },
  {
    "text": "Docker Docker install now let me start from from the beginning First Step First",
    "start": "701440",
    "end": "710720"
  },
  {
    "text": "Step um is to navigate to the folder and download container image from",
    "start": "710720",
    "end": "718639"
  },
  {
    "text": "Repository so let's do it real quick first of all I would like to pull and save it as the",
    "start": "718639",
    "end": "727839"
  },
  {
    "text": "file save it as the",
    "start": "727839",
    "end": "731480"
  },
  {
    "text": "file and it says no such image authentication required so in this",
    "start": "736880",
    "end": "742760"
  },
  {
    "text": "case uh because I wasn't authenticated let me say ACR",
    "start": "742760",
    "end": "748160"
  },
  {
    "text": "login",
    "start": "748160",
    "end": "751160"
  },
  {
    "text": "and after that yeah now I can uh",
    "start": "755120",
    "end": "760920"
  },
  {
    "text": "download container it might take time it might take",
    "start": "760920",
    "end": "766399"
  },
  {
    "text": "time let me grate that and one more time oh come",
    "start": "766800",
    "end": "775680"
  },
  {
    "text": "on",
    "start": "778120",
    "end": "781120"
  },
  {
    "text": "I don't believe you oh let me check maybe it's downloading in",
    "start": "786279",
    "end": "793120"
  },
  {
    "text": "fact nope but still waiting for",
    "start": "795040",
    "end": "801360"
  },
  {
    "text": "something uh oh finally no yeah no",
    "start": "801360",
    "end": "811079"
  },
  {
    "text": "yeah probably now it's downloading the image yeah it is so as I mentioned",
    "start": "811079",
    "end": "816480"
  },
  {
    "text": "before it takes time so now we're downloading the image in",
    "start": "816480",
    "end": "821880"
  },
  {
    "text": "the uh in the file so we need to wait like maybe around a minute or so and",
    "start": "821880",
    "end": "827360"
  },
  {
    "text": "then you will find out the image anyone tried to do that before like download images as the file uh because quite",
    "start": "827360",
    "end": "835440"
  },
  {
    "text": "often when you know developers or Engineers they work with images is they don't really know how it looks",
    "start": "835440",
    "end": "842680"
  },
  {
    "text": "like after after it was already pushed into registry so if you look at the the",
    "start": "842680",
    "end": "848639"
  },
  {
    "text": "file now I download that without any extensions without any extensions but if",
    "start": "848639",
    "end": "854519"
  },
  {
    "text": "I add an extension or I can just open with seven zip without even",
    "start": "854519",
    "end": "860279"
  },
  {
    "text": "extensions look at that it it can be open with uh like seven zip me uh",
    "start": "860279",
    "end": "867440"
  },
  {
    "text": "extract it real quick",
    "start": "867440",
    "end": "871040"
  },
  {
    "text": "all right so uh now and I know you can",
    "start": "878120",
    "end": "884440"
  },
  {
    "text": "see it well but there's a number of folders if I open any of those folders",
    "start": "884440",
    "end": "889880"
  },
  {
    "text": "let me just open this folder for example uh in any every folder I will find out layer.",
    "start": "889880",
    "end": "897160"
  },
  {
    "text": "tar let's open layer.",
    "start": "897160",
    "end": "901040"
  },
  {
    "text": "and here I can find the actual content so here I have HTML page of my container",
    "start": "903880",
    "end": "911800"
  },
  {
    "text": "of my container image so all the files can be found there if you download the",
    "start": "911800",
    "end": "918839"
  },
  {
    "text": "image uh by the way also I have here a backup of original and thiz just in case",
    "start": "918839",
    "end": "925240"
  },
  {
    "text": "uh so if you don't mind I'm going to to to remove move this original because",
    "start": "925240",
    "end": "932240"
  },
  {
    "text": "that was probably already thoed and probably already thoed let me just keep it for for now",
    "start": "932240",
    "end": "938959"
  },
  {
    "text": "but I'm going to what's",
    "start": "938959",
    "end": "944680"
  },
  {
    "text": "called um one and this one will be",
    "start": "945480",
    "end": "951440"
  },
  {
    "text": "also one no okay it's already opened and let",
    "start": "951440",
    "end": "957839"
  },
  {
    "text": "me open this hello original it's definitely not not rized",
    "start": "957839",
    "end": "964079"
  },
  {
    "text": "yet so and let me extract it as well to to folder like here with the name hello",
    "start": "964079",
    "end": "972560"
  },
  {
    "text": "or original one two all right so let's take a look um",
    "start": "972560",
    "end": "979199"
  },
  {
    "text": "every folder I open I can find out layer. Tire which",
    "start": "979199",
    "end": "984800"
  },
  {
    "text": "contains file",
    "start": "984800",
    "end": "990480"
  },
  {
    "text": "that makes sense so that will be our container image and all the kind of container image",
    "start": "990480",
    "end": "997360"
  },
  {
    "text": "so what I can do next I can take any of those layers so for example let's take",
    "start": "997360",
    "end": "1003120"
  },
  {
    "text": "uh that one I can take any of those layers open it up and let me extract",
    "start": "1003120",
    "end": "1013600"
  },
  {
    "text": "it extract uh uh layer",
    "start": "1016000",
    "end": "1021759"
  },
  {
    "text": "tar what do you think what what can we do next if I extract this folder what can be my next step if I would like to",
    "start": "1021759",
    "end": "1029240"
  },
  {
    "text": "troge this container this container",
    "start": "1029240",
    "end": "1034360"
  },
  {
    "text": "imageware yeah so inject malware I need to drop something that will run",
    "start": "1036480",
    "end": "1042280"
  },
  {
    "text": "automatically some kind of malware depends what I want something that should run automatically so what I did I",
    "start": "1042280",
    "end": "1050080"
  },
  {
    "text": "create shared Library shared object um let me show you that real",
    "start": "1050080",
    "end": "1056000"
  },
  {
    "text": "quick so here's my shared object called reverse uncore shell. shared object so",
    "start": "1056000",
    "end": "1063400"
  },
  {
    "text": "that will that should give me what is called reverse shell we hear all in security right you know you you all know what reverse shell is",
    "start": "1063400",
    "end": "1070160"
  },
  {
    "text": "right no okay um so",
    "start": "1070160",
    "end": "1077840"
  },
  {
    "text": "um did you hear about command control center C2 um so attackers when they when",
    "start": "1077840",
    "end": "1085320"
  },
  {
    "text": "they want to um control their victims they need somehow they they must do they",
    "start": "1085320",
    "end": "1091039"
  },
  {
    "text": "must do it it somehow so U most the most common way to control the victim is to",
    "start": "1091039",
    "end": "1096760"
  },
  {
    "text": "run something on the victim side so like motivate your victim to open the malware",
    "start": "1096760",
    "end": "1103360"
  },
  {
    "text": "Trojan like macros and then uh the the victim will",
    "start": "1103360",
    "end": "1109600"
  },
  {
    "text": "give you a shell to his or her computer this is called reverse shell because not",
    "start": "1109600",
    "end": "1114919"
  },
  {
    "text": "from attacker to victim but from victim to attacker so I'm a victim and I call",
    "start": "1114919",
    "end": "1120320"
  },
  {
    "text": "and I send a call to attacker that's called the reverse shell so I allow uh to control myself from outside that's",
    "start": "1120320",
    "end": "1128240"
  },
  {
    "text": "that's that's a reverse shell so I developed this object reverse shell that I that shared object um I'm going to",
    "start": "1128240",
    "end": "1135400"
  },
  {
    "text": "take this folder take this folder copy it and place to where it was uh",
    "start": "1135400",
    "end": "1144720"
  },
  {
    "text": "here yeah to here doesn't really matter where to one of those",
    "start": "1144720",
    "end": "1151360"
  },
  {
    "text": "folders now before I before um I zip it",
    "start": "1151360",
    "end": "1156520"
  },
  {
    "text": "again I need to find out the hash of the old layer thear you",
    "start": "1156520",
    "end": "1163400"
  },
  {
    "text": "will see soon why for now it may not be very clear but soon you will see why",
    "start": "1163400",
    "end": "1170720"
  },
  {
    "text": "um layer. tar so let me copy this hash copy this",
    "start": "1182080",
    "end": "1190360"
  },
  {
    "text": "hash um and now I can safely remove this",
    "start": "1191440",
    "end": "1196600"
  },
  {
    "text": "file old layer and let me zip like not really zip but in a tire",
    "start": "1196600",
    "end": "1204240"
  },
  {
    "text": "format um new",
    "start": "1204240",
    "end": "1208880"
  },
  {
    "text": "layer and remove the folder all right so now we have layer.",
    "start": "1211720",
    "end": "1217559"
  },
  {
    "text": "let me open up with",
    "start": "1217559",
    "end": "1222400"
  },
  {
    "text": "Trojan the tro um that's not enough now we need to run this Thro trojen somehow",
    "start": "1223159",
    "end": "1230600"
  },
  {
    "text": "because for at this moment Trojan just was placed on the disc physically on the disc but uh we need to run also that",
    "start": "1230600",
    "end": "1237919"
  },
  {
    "text": "that trojen as well so next step is to go to uh the",
    "start": "1237919",
    "end": "1245679"
  },
  {
    "text": "root uh no I don't want and",
    "start": "1248799",
    "end": "1254640"
  },
  {
    "text": "open not really this one but this file and open this",
    "start": "1254640",
    "end": "1260480"
  },
  {
    "text": "file so I know it's it looks a bit messy but if you look at the uh at this line",
    "start": "1260480",
    "end": "1267320"
  },
  {
    "text": "this line you will find what is going to run with this image so if I add more",
    "start": "1267320",
    "end": "1275240"
  },
  {
    "text": "commands if I add more commands it should also run my image um",
    "start": "1275240",
    "end": "1282080"
  },
  {
    "text": "so my uh how's it called Trojan one moment I'm going",
    "start": "1282080",
    "end": "1287520"
  },
  {
    "text": "to copy that from existing uh from example",
    "start": "1287520",
    "end": "1293960"
  },
  {
    "text": "Jason come on damn",
    "start": "1299720",
    "end": "1305440"
  },
  {
    "text": "it so look right after Apache PID I had",
    "start": "1305720",
    "end": "1311600"
  },
  {
    "text": "LD preload plus my reverse shell accept arguments there's a first argument my IP",
    "start": "1311600",
    "end": "1319120"
  },
  {
    "text": "address so that's the IP address of attacker so my IP address of of attacker um and oh where is that remote",
    "start": "1319120",
    "end": "1328400"
  },
  {
    "text": "Port that's the port number that attacker listening on to accept connection of course in the real world",
    "start": "1328400",
    "end": "1334720"
  },
  {
    "text": "we don't use port 4444 it's only for demos why we don't use",
    "start": "1334720",
    "end": "1341039"
  },
  {
    "text": "4444 nonstandard non-standard port there's a high chance first of all it could be",
    "start": "1345720",
    "end": "1351440"
  },
  {
    "text": "blocked plus um it looks suspicious right so when you monitor the network",
    "start": "1351440",
    "end": "1356520"
  },
  {
    "text": "like or maybe not you but like some of the from your colleagues when they monitor the traffic they find Port 4444",
    "start": "1356520",
    "end": "1363240"
  },
  {
    "text": "oh what is that so it's not standard so usually we use 443 which is the most common Port anyway let me copy",
    "start": "1363240",
    "end": "1370640"
  },
  {
    "text": "that let me copy that and paste",
    "start": "1370640",
    "end": "1377440"
  },
  {
    "text": "to my file we're almost done we're almost done",
    "start": "1377440",
    "end": "1383279"
  },
  {
    "text": "there's a one more thing we we have left do you remember we copy and paste um",
    "start": "1383279",
    "end": "1388880"
  },
  {
    "text": "this hash so if you look down down below you will find out that some kind of",
    "start": "1388880",
    "end": "1395919"
  },
  {
    "text": "hashes so those all of the hashes of previous of previous layers but because",
    "start": "1395919",
    "end": "1401200"
  },
  {
    "text": "I made a new layer uh hash is different let's find out the old hash so this one",
    "start": "1401200",
    "end": "1406919"
  },
  {
    "text": "is the old hash so we need to change this hash to my new",
    "start": "1406919",
    "end": "1415039"
  },
  {
    "text": "hash let's do it real quick so first of all I need to find out the new",
    "start": "1415039",
    "end": "1421919"
  },
  {
    "text": "hash um also you may notice that my hash that was Powershell gave me in",
    "start": "1424080",
    "end": "1429960"
  },
  {
    "text": "uppercase um and here hashes are in lower case if I leave it in the upper case it will give an error later on so",
    "start": "1429960",
    "end": "1437320"
  },
  {
    "text": "let me switch to um lower case let me change it to",
    "start": "1437320",
    "end": "1445039"
  },
  {
    "text": "uh change case to",
    "start": "1445039",
    "end": "1451519"
  },
  {
    "text": "lower oh Convert",
    "start": "1453000",
    "end": "1457000"
  },
  {
    "text": "case um where is that",
    "start": "1458600",
    "end": "1464840"
  },
  {
    "text": "here convert lower case copy",
    "start": "1466760",
    "end": "1472000"
  },
  {
    "text": "that paste here that's my new hash and now let me place this hash into the file",
    "start": "1472000",
    "end": "1478159"
  },
  {
    "text": "instead of the previous hash that's it we are all",
    "start": "1478159",
    "end": "1485600"
  },
  {
    "text": "set image is completely thorized let me save",
    "start": "1485600",
    "end": "1492000"
  },
  {
    "text": "it um and the first thing I want to do I would like to test it locally in my dock",
    "start": "1492000",
    "end": "1498360"
  },
  {
    "text": "enironment so before I push it to registry before I before I do anything else I would like to test it let me",
    "start": "1498360",
    "end": "1504600"
  },
  {
    "text": "close that uh close let me test it so first",
    "start": "1504600",
    "end": "1509840"
  },
  {
    "text": "I'm going to run my listener on the port",
    "start": "1509840",
    "end": "1514960"
  },
  {
    "text": "4444 and let's try to build uh the image here let me close everything",
    "start": "1516000",
    "end": "1521679"
  },
  {
    "text": "here um oh sorry before we build anything what I need to do I need to",
    "start": "1521679",
    "end": "1529159"
  },
  {
    "text": "of course zip",
    "start": "1529159",
    "end": "1532559"
  },
  {
    "text": "it let's call that um hello",
    "start": "1538679",
    "end": "1544559"
  },
  {
    "text": "Thro TI and now we have it go back",
    "start": "1544559",
    "end": "1552360"
  },
  {
    "text": "oops so now let's open CMD",
    "start": "1552360",
    "end": "1558799"
  },
  {
    "text": "Zoom for you go to containers and now what I would like to do I would like to import",
    "start": "1558799",
    "end": "1566320"
  },
  {
    "text": "this container image so that's why I would like to to to to use Docker",
    "start": "1566320",
    "end": "1575240"
  },
  {
    "text": "l oh yeah forgot",
    "start": "1587240",
    "end": "1594720"
  },
  {
    "text": "extension and let's see so now we have now we have a container",
    "start": "1594720",
    "end": "1601240"
  },
  {
    "text": "image container image and the next step is to deploy",
    "start": "1601240",
    "end": "1609120"
  },
  {
    "text": "container okay so uh next step is deploy container I'm I'm going to say docker",
    "start": "1612240",
    "end": "1620240"
  },
  {
    "text": "run and fingers",
    "start": "1624360",
    "end": "1627960"
  },
  {
    "text": "crossed nothing uh",
    "start": "1634480",
    "end": "1640919"
  },
  {
    "text": "air oh pool ax is denied",
    "start": "1640919",
    "end": "1645960"
  },
  {
    "text": "what unable to find image low W oh sorry my bad um there's a different",
    "start": "1645960",
    "end": "1654840"
  },
  {
    "text": "name I didn't change it in my in my notes so that's the right",
    "start": "1656240",
    "end": "1664158"
  },
  {
    "text": "name because it was pulled from from container registry it has the different name so let's try Docker",
    "start": "1669399",
    "end": "1677120"
  },
  {
    "text": "run and yeah look at",
    "start": "1677120",
    "end": "1684480"
  },
  {
    "text": "that where am I in container if you look at the IP address",
    "start": "1688440",
    "end": "1695320"
  },
  {
    "text": "172 uh1 and so on so you may compare that",
    "start": "1695320",
    "end": "1702679"
  },
  {
    "text": "with my current IP address that's the same so now Lo I have a remote access to",
    "start": "1702679",
    "end": "1710279"
  },
  {
    "text": "container hosted on that machine make",
    "start": "1710279",
    "end": "1715320"
  },
  {
    "text": "sense all right what will the next step let me go back to slides so now we are here oh no sorry",
    "start": "1715320",
    "end": "1723600"
  },
  {
    "text": "not not yet here so almost here we pull the image from container registry we",
    "start": "1723600",
    "end": "1729120"
  },
  {
    "text": "toize the image now it's time to push this container image back of course if we have permissions but I assume we have",
    "start": "1729120",
    "end": "1735880"
  },
  {
    "text": "permissions uh because that's one of the things to convince you that you should be careful with permissions um all right",
    "start": "1735880",
    "end": "1741679"
  },
  {
    "text": "let me go back now uh let me close that or just",
    "start": "1741679",
    "end": "1747880"
  },
  {
    "text": "close it uh let me kill the",
    "start": "1747880",
    "end": "1752039"
  },
  {
    "text": "container all right now next step I would like to do I let take is",
    "start": "1754039",
    "end": "1760600"
  },
  {
    "text": "to push this image to be fair this image should be",
    "start": "1760600",
    "end": "1766240"
  },
  {
    "text": "already in the cloud but let's let's push",
    "start": "1766240",
    "end": "1770320"
  },
  {
    "text": "it it's exist something was pushed but not a big difference uh now it was pushed to container registry if I go",
    "start": "1771399",
    "end": "1778919"
  },
  {
    "text": "back to container registry now um let's go back to repository click",
    "start": "1778919",
    "end": "1784600"
  },
  {
    "text": "a refresh click on that and I can see that the latest version was pushed just uh",
    "start": "1784600",
    "end": "1792679"
  },
  {
    "text": "just a minute ago by the way uh I live in Portugal so my time zone a bit",
    "start": "1792679",
    "end": "1797840"
  },
  {
    "text": "different is a bit different all right so what should we do",
    "start": "1797840",
    "end": "1804960"
  },
  {
    "text": "next next step is to deploy container so this part normally should be oh they",
    "start": "1805519",
    "end": "1811640"
  },
  {
    "text": "they told me not to go too far because I will be out of camera um",
    "start": "1811640",
    "end": "1816840"
  },
  {
    "text": "so uh this part can be done by company without attacker so now you have you",
    "start": "1816840",
    "end": "1822880"
  },
  {
    "text": "have pipelines or maybe you want to do it manually I don't know probably pipeline so now now your pipeline can do",
    "start": "1822880",
    "end": "1829760"
  },
  {
    "text": "it for you automatically yeah of course normally pipeline should also start from the building images but it depends uh",
    "start": "1829760",
    "end": "1837480"
  },
  {
    "text": "all right so let's try to run it first on something small like container instance because that's the fastest way",
    "start": "1837480",
    "end": "1843440"
  },
  {
    "text": "to deploy container let me quickly deploy container",
    "start": "1843440",
    "end": "1849519"
  },
  {
    "text": "instance click on create uh anyone here use container instances yeah not not too many so it's",
    "start": "1852240",
    "end": "1859480"
  },
  {
    "text": "more for Dev test small projects or maybe extension of",
    "start": "1859480",
    "end": "1864919"
  },
  {
    "text": "kubernetes uh so but then we'll switch to kubernetes Let's but let's start from container instance I'm going to deploy",
    "start": "1864919",
    "end": "1872559"
  },
  {
    "text": "new new ACI um so my image source will be",
    "start": "1872559",
    "end": "1878360"
  },
  {
    "text": "container registry take an image and the latest",
    "start": "1878360",
    "end": "1884159"
  },
  {
    "text": "yeah latest is fine I have only only this one click on create oh one more before I do it let me configure The",
    "start": "1884159",
    "end": "1892600"
  },
  {
    "text": "Listener",
    "start": "1896039",
    "end": "1899039"
  },
  {
    "text": "create let's see cross your fingers because now we should get access to this",
    "start": "1905000",
    "end": "1911399"
  },
  {
    "text": "time Azure part of um Azure infrastructure Azure pass service um",
    "start": "1911399",
    "end": "1919120"
  },
  {
    "text": "let's see it's still",
    "start": "1919120",
    "end": "1922679"
  },
  {
    "text": "creating nothing so far oh here we go so this is definitely a address from",
    "start": "1926559",
    "end": "1934519"
  },
  {
    "text": "aure let's let's let's check who",
    "start": "1934519",
    "end": "1939519"
  },
  {
    "text": "is. uh Microsoft this time we got a reverse shell to pass",
    "start": "1943960",
    "end": "1951440"
  },
  {
    "text": "service um from from container instance let's see uh what I can do here whatever",
    "start": "1951440",
    "end": "1957760"
  },
  {
    "text": "I like to be fair um I can navigate I can check what is around um like if we have this tool",
    "start": "1957760",
    "end": "1967480"
  },
  {
    "text": "yeah we do um so here's the IP address of the container instance",
    "start": "1967480",
    "end": "1972600"
  },
  {
    "text": "itself the problem of container instance for for me at least container instance most of the time the deployed Standalone",
    "start": "1972600",
    "end": "1979159"
  },
  {
    "text": "right that's how you use it Standalone so D test we don't deploy that as the",
    "start": "1979159",
    "end": "1985840"
  },
  {
    "text": "part of infrastructure most of the time so if I compromise container instance it won't give me much that's why I told you",
    "start": "1985840",
    "end": "1993440"
  },
  {
    "text": "I just want to test I just want to test uh my goal is to get access to",
    "start": "1993440",
    "end": "1999399"
  },
  {
    "text": "kubernetes so now let's do the same in kubernetes um let me switch to the",
    "start": "1999399",
    "end": "2005440"
  },
  {
    "text": "machine I prepared y file for you uh where is",
    "start": "2005440",
    "end": "2014440"
  },
  {
    "text": "that I think this one yeah this one and let's try now",
    "start": "2020559",
    "end": "2027639"
  },
  {
    "text": "to deploy on",
    "start": "2027639",
    "end": "2031200"
  },
  {
    "text": "cuberes come on create",
    "start": "2034639",
    "end": "2039720"
  },
  {
    "text": "create",
    "start": "2039880",
    "end": "2042880"
  },
  {
    "text": "yo apply fingers crossed now I would like",
    "start": "2045720",
    "end": "2051720"
  },
  {
    "text": "to get access to cuberes hopefully",
    "start": "2051720",
    "end": "2057358"
  },
  {
    "text": "yep cuberes now our application deployed on cuberes and let's take a look what we",
    "start": "2059079",
    "end": "2065358"
  },
  {
    "text": "can do with that so hello W on kubernetes oh by the way what is what is also important for",
    "start": "2065359",
    "end": "2072040"
  },
  {
    "text": "companies for users it will look just pretty standard so for example I can just find out container instance real",
    "start": "2072040",
    "end": "2077720"
  },
  {
    "text": "quick um if I take an IP address and just open in the",
    "start": "2077720",
    "end": "2084878"
  },
  {
    "text": "browser um nothing so oh yeah just a hello world I mean the application itself is working um so for companies",
    "start": "2086399",
    "end": "2093240"
  },
  {
    "text": "that will not look suspicious will not break the application um now I have access to",
    "start": "2093240",
    "end": "2099040"
  },
  {
    "text": "kubernetes what should we do here first of all uh let me just try to explore I",
    "start": "2099040",
    "end": "2105160"
  },
  {
    "text": "don't need anymore I let me try to explore what do we have in kubernetes so first of all I need to add path path",
    "start": "2105160",
    "end": "2113720"
  },
  {
    "text": "variables um so my commands will work",
    "start": "2113720",
    "end": "2119000"
  },
  {
    "text": "properly next up I would like to install oh I would like to check if any tokens",
    "start": "2119000",
    "end": "2126000"
  },
  {
    "text": "can be found locally in the con container so when you work at kubernetes in every container you will find this",
    "start": "2126000",
    "end": "2132880"
  },
  {
    "text": "token so if you look at them if you look at the this path run",
    "start": "2132880",
    "end": "2139000"
  },
  {
    "text": "Secrets kubernetes service accounts and tokens you will find jdb token um let's quickly explore this",
    "start": "2139000",
    "end": "2149359"
  },
  {
    "text": "token place here here now we can see this this token",
    "start": "2156200",
    "end": "2161359"
  },
  {
    "text": "audience is only this kubernetes",
    "start": "2161359",
    "end": "2167240"
  },
  {
    "text": "okay so um I can also check oh none",
    "start": "2167240",
    "end": "2172440"
  },
  {
    "text": "before yeah pretty hard to calculate yourself but if you look at the claims",
    "start": "2172440",
    "end": "2177760"
  },
  {
    "text": "you can find out that oh not before but expiration will be next year so this",
    "start": "2177760",
    "end": "2183040"
  },
  {
    "text": "token will be valid for for a year all right let's take a look what can we do with this token with this",
    "start": "2183040",
    "end": "2189599"
  },
  {
    "text": "token uh let me take the token oh",
    "start": "2189599",
    "end": "2195760"
  },
  {
    "text": "and oh before that let me install curl into container because I I need a curl",
    "start": "2195760",
    "end": "2201800"
  },
  {
    "text": "to use it should be pretty",
    "start": "2201800",
    "end": "2208079"
  },
  {
    "text": "quick and while waiting for the for the curl let",
    "start": "2208079",
    "end": "2214119"
  },
  {
    "text": "me add this token so next next my next step will be add variable called",
    "start": "2214119",
    "end": "2222440"
  },
  {
    "text": "token oh come on Carl I told you it might take",
    "start": "2223160",
    "end": "2229920"
  },
  {
    "text": "time finished nope not yet by the way also",
    "start": "2231640",
    "end": "2239160"
  },
  {
    "text": "one more thing since you told me that you don't know much about reverse shell uh reverse shells are not perfect so",
    "start": "2239160",
    "end": "2245760"
  },
  {
    "text": "input output in Reverse shells Maybe not perfect so um sometimes I even don't know when the installation finished just",
    "start": "2245760",
    "end": "2252280"
  },
  {
    "text": "because reverse sh is not the same as the normal Administration all right let me add this token and by the way I",
    "start": "2252280",
    "end": "2258240"
  },
  {
    "text": "cannot clear the screen I know I would like to clear the screen for you but I cannot um so I add the token variable",
    "start": "2258240",
    "end": "2267680"
  },
  {
    "text": "and next step is to try to use this token to access apis on",
    "start": "2267680",
    "end": "2275560"
  },
  {
    "text": "kubernetes",
    "start": "2276440",
    "end": "2279440"
  },
  {
    "text": "and and no no it used to be but no not anymore",
    "start": "2289520",
    "end": "2296880"
  },
  {
    "text": "so mic also make some progress on that um because like for some some time ago I",
    "start": "2296880",
    "end": "2303880"
  },
  {
    "text": "was able to do to do it um through curve using internal IP address let's try this",
    "start": "2303880",
    "end": "2311280"
  },
  {
    "text": "external",
    "start": "2311280",
    "end": "2313720"
  },
  {
    "text": "name and forbidden forbidden so in the past just just want to why why I'm",
    "start": "2330680",
    "end": "2337119"
  },
  {
    "text": "showing you that because in the past it it was possible but now Microsoft make",
    "start": "2337119",
    "end": "2342280"
  },
  {
    "text": "make changes and for and restrict to enumerate apis uh with service account",
    "start": "2342280",
    "end": "2348000"
  },
  {
    "text": "so they make changes all right so I couldn't find anything on the API note with this with",
    "start": "2348000",
    "end": "2355359"
  },
  {
    "text": "my credentials but what what else I can do um I may find other",
    "start": "2355359",
    "end": "2361440"
  },
  {
    "text": "containers on This kubernetes Server so for example let me just show you that in the interface so you will see it better",
    "start": "2361440",
    "end": "2368000"
  },
  {
    "text": "if I look at the services real quick I can see here there is",
    "start": "2368000",
    "end": "2373880"
  },
  {
    "text": "application Azure vote Azure vote do you know Azure vot",
    "start": "2373880",
    "end": "2379640"
  },
  {
    "text": "application oh come",
    "start": "2379640",
    "end": "2383000"
  },
  {
    "text": "on never heard of that because this application Microsoft",
    "start": "2387079",
    "end": "2392720"
  },
  {
    "text": "used for years to to to demonstrate kubernetes yeah never",
    "start": "2392720",
    "end": "2398319"
  },
  {
    "text": "yeah if you just Google real quick uh as you're Ving up you'll find you'll find the like step by step byep instruction",
    "start": "2398319",
    "end": "2403720"
  },
  {
    "text": "how to deploy it and you can find out the image in the micos repository so what I would like to do what I would",
    "start": "2403720",
    "end": "2410680"
  },
  {
    "text": "like to do I would like to find internally these containers in kubernetes from my compromise container",
    "start": "2410680",
    "end": "2418400"
  },
  {
    "text": "so if you see here um we have internal IP addresses internal IP addresses what",
    "start": "2418400",
    "end": "2425000"
  },
  {
    "text": "I would like to do now I would like to install tool and map quite famous tool for",
    "start": "2425000",
    "end": "2433480"
  },
  {
    "text": "enumeration by the way it might take some time might take some time but while",
    "start": "2434160",
    "end": "2439960"
  },
  {
    "text": "we're installing so you can see here um by default all containers in on",
    "start": "2439960",
    "end": "2445720"
  },
  {
    "text": "kubernetes they will just have um private IP addresses and possibly they can access",
    "start": "2445720",
    "end": "2452800"
  },
  {
    "text": "each other maybe we we we'll we'll see so um we have private IP addresses for",
    "start": "2452800",
    "end": "2458640"
  },
  {
    "text": "uh my hello world I have private IP address for Azure front Azure Azure vote",
    "start": "2458640",
    "end": "2464200"
  },
  {
    "text": "back end front end um so they all have they are all in the same network so",
    "start": "2464200",
    "end": "2470200"
  },
  {
    "text": "maybe maybe I will be able to access other containers from my from my",
    "start": "2470200",
    "end": "2475359"
  },
  {
    "text": "compromise container Let's test um",
    "start": "2475359",
    "end": "2480880"
  },
  {
    "text": "hopefully oh um this socket is working anyway I hope",
    "start": "2480880",
    "end": "2489359"
  },
  {
    "text": "I hope I'll have enough power we'll",
    "start": "2489359",
    "end": "2496240"
  },
  {
    "text": "see ID okay so probably",
    "start": "2500400",
    "end": "2507280"
  },
  {
    "text": "probably let's see something else yeah so it was installed next up is to run",
    "start": "2507280",
    "end": "2513280"
  },
  {
    "text": "nmap scan anyone try nmap yeah oh this one this this this tool you know so",
    "start": "2513280",
    "end": "2518640"
  },
  {
    "text": "normally of course um in a normal environment I me normally I need to run in the whole network and find out all of",
    "start": "2518640",
    "end": "2525359"
  },
  {
    "text": "the IP addresses like you know nmap with network DSN to find out all live hosts",
    "start": "2525359",
    "end": "2531800"
  },
  {
    "text": "but for now because this demo I don't want to make it too long uh let me just assume we we already found IP address of",
    "start": "2531800",
    "end": "2539000"
  },
  {
    "text": "the victim all right so that will be our backend um and for the sake of time I",
    "start": "2539000",
    "end": "2544599"
  },
  {
    "text": "will specify the port which is open and also we need to turn off pingin",
    "start": "2544599",
    "end": "2551440"
  },
  {
    "text": "probin so let me run that and look at this so I was",
    "start": "2551440",
    "end": "2558240"
  },
  {
    "text": "able to access uh I mean I was able to find another host another host and I found that this",
    "start": "2558240",
    "end": "2565880"
  },
  {
    "text": "port was open anyone knows what this port",
    "start": "2565880",
    "end": "2570640"
  },
  {
    "text": "is no no ideas",
    "start": "2571760",
    "end": "2579119"
  },
  {
    "text": "uh Port",
    "start": "2579160",
    "end": "2582480"
  },
  {
    "text": "6379 uh known as for radius for radius so that's the database",
    "start": "2584880",
    "end": "2591400"
  },
  {
    "text": "radius database now next step is to get some quick um R",
    "start": "2591400",
    "end": "2599240"
  },
  {
    "text": "tools come on shouldn't take tool",
    "start": "2603720",
    "end": "2609200"
  },
  {
    "text": "on and connect to radius here authentication won't be required so let",
    "start": "2609200",
    "end": "2615160"
  },
  {
    "text": "me copy that uh let's see",
    "start": "2615160",
    "end": "2620599"
  },
  {
    "text": "yeah so maybe already there let's type",
    "start": "2620599",
    "end": "2626359"
  },
  {
    "text": "info yes that this is from radi let's type keys so we have two keys let's see",
    "start": "2626359",
    "end": "2633520"
  },
  {
    "text": "both keys and we have keys cats and dogs let's let's let's check",
    "start": "2633520",
    "end": "2641200"
  },
  {
    "text": "uh cats and dogs let me vote for",
    "start": "2641640",
    "end": "2650480"
  },
  {
    "text": "cats and say get cats I can see one all right let's W one",
    "start": "2650480",
    "end": "2659200"
  },
  {
    "text": "more time two so now I have access to R this",
    "start": "2659200",
    "end": "2666680"
  },
  {
    "text": "database and so before we finish this offensive demo because we need to reserve some time for like what to do with that let",
    "start": "2666680",
    "end": "2674040"
  },
  {
    "text": "me ask you for help can you please uh go to this",
    "start": "2674040",
    "end": "2680800"
  },
  {
    "text": "application and start",
    "start": "2680800",
    "end": "2683960"
  },
  {
    "text": "voting sockets sockets",
    "start": "2692240",
    "end": "2699040"
  },
  {
    "text": "nothing oh yeah I can sit in the real",
    "start": "2706400",
    "end": "2713039"
  },
  {
    "text": "time let's check what we have here huh not too much some press res",
    "start": "2713680",
    "end": "2722319"
  },
  {
    "text": "that um all right so so so so so thank you thank you very",
    "start": "2722319",
    "end": "2729319"
  },
  {
    "text": "much all right that was the offensive part of the of",
    "start": "2729319",
    "end": "2735839"
  },
  {
    "text": "stop all right that was the offensive part of the of of the",
    "start": "2737000",
    "end": "2742400"
  },
  {
    "text": "demonstration um and now the the last question we have is like all right cool",
    "start": "2742400",
    "end": "2747599"
  },
  {
    "text": "what should we do how can we fix it and there are some mitigations I can offer",
    "start": "2747599",
    "end": "2753640"
  },
  {
    "text": "you um to fix the problem first first of all first of",
    "start": "2753640",
    "end": "2758880"
  },
  {
    "text": "all uh you should always always always consider the principle of list privileges I know you can hear it",
    "start": "2758880",
    "end": "2764520"
  },
  {
    "text": "everywhere right you can you go to Every conference you listen any web webinar",
    "start": "2764520",
    "end": "2770040"
  },
  {
    "text": "they they tell you principle of list Privileges and you always say yes of course yeah we know that's important but",
    "start": "2770040",
    "end": "2777160"
  },
  {
    "text": "to be honest all right I'm I'm not going to",
    "start": "2777160",
    "end": "2782440"
  },
  {
    "text": "ask you personally but um to be honest when I work with customers and every customer customer say yeah yeah yeah we",
    "start": "2782440",
    "end": "2787920"
  },
  {
    "text": "know about principle of L privileges but when we start to test uh we find that",
    "start": "2787920",
    "end": "2793079"
  },
  {
    "text": "they have so many misconfigurations and so many violations of this principle I know it's quite hard to",
    "start": "2793079",
    "end": "2799800"
  },
  {
    "text": "configure everything according to this principle because in that case you you you should",
    "start": "2799800",
    "end": "2805160"
  },
  {
    "text": "be very very granular you need to test a lot because sometimes you will not not have enough permissions you need to test",
    "start": "2805160",
    "end": "2810640"
  },
  {
    "text": "again and something may get fail in real in in in in like in the production um",
    "start": "2810640",
    "end": "2815760"
  },
  {
    "text": "and that just in case you configure more permissions because it will definitely work",
    "start": "2815760",
    "end": "2821240"
  },
  {
    "text": "right but from the SEC SEC stand Point that's not the best idea uh next one and that",
    "start": "2821240",
    "end": "2828119"
  },
  {
    "text": "will be the the best that like the easiest fix you can you can have uh right away is to use private",
    "start": "2828119",
    "end": "2835920"
  },
  {
    "text": "links just turn off public access to container registry um so let me go back",
    "start": "2835920",
    "end": "2842400"
  },
  {
    "text": "to container register real quick",
    "start": "2842400",
    "end": "2848839"
  },
  {
    "text": "and if I look at the networking so here I can see that by default I can access container register",
    "start": "2850160",
    "end": "2856760"
  },
  {
    "text": "from every Network so from all networks um the question do you really",
    "start": "2856760",
    "end": "2863640"
  },
  {
    "text": "need that from every single Network there are a few options you can",
    "start": "2863640",
    "end": "2869119"
  },
  {
    "text": "have so option number one you can completely disable Public Access I would say that's the best",
    "start": "2869119",
    "end": "2875520"
  },
  {
    "text": "option that's the most sec your option and only configure private access I guess you heard about private links",
    "start": "2875520",
    "end": "2881319"
  },
  {
    "text": "right so in that case um only your kubernetes or whatever it can be that",
    "start": "2881319",
    "end": "2886760"
  },
  {
    "text": "integrated virtual network will be able to access this container registry so that will be very quick fix",
    "start": "2886760",
    "end": "2895079"
  },
  {
    "text": "for most of the problem so in that case attacker needs to compromise your virtual Network first before they can",
    "start": "2895079",
    "end": "2901000"
  },
  {
    "text": "access to your container registry so that that's much much much much harder",
    "start": "2901000",
    "end": "2906240"
  },
  {
    "text": "compared to just have Public Access so if you can but if you have",
    "start": "2906240",
    "end": "2911800"
  },
  {
    "text": "something like you know on premises on on premises Docker or kubernetes so",
    "start": "2911800",
    "end": "2917559"
  },
  {
    "text": "something outside of azure that you can integrate virtual Network what you can also do you can wh list your public IP",
    "start": "2917559",
    "end": "2925240"
  },
  {
    "text": "addresses in that manner and from only those public IP",
    "start": "2925240",
    "end": "2930640"
  },
  {
    "text": "addresses you will be able to access you'll be able to have access to container",
    "start": "2930640",
    "end": "2935720"
  },
  {
    "text": "registry still better than than all",
    "start": "2935720",
    "end": "2940440"
  },
  {
    "text": "networks that make sense yep question was just the range oh oh",
    "start": "2942119",
    "end": "2948280"
  },
  {
    "text": "yeah yeah of course you can you can the range um 62 not the best idea of course",
    "start": "2948280",
    "end": "2954000"
  },
  {
    "text": "but doable you can do it like that or let's make it",
    "start": "2954000",
    "end": "2962440"
  },
  {
    "text": "useless oh no it's not working nice I can do it I can't make it useless um all",
    "start": "2962960",
    "end": "2969599"
  },
  {
    "text": "right so there's a one big downside of this feature this feature will work only",
    "start": "2969599",
    "end": "2974839"
  },
  {
    "text": "if you have only if you have uh premium price interor for your",
    "start": "2974839",
    "end": "2981280"
  },
  {
    "text": "container registry so with basic and even standard it won't be",
    "start": "2981280",
    "end": "2987400"
  },
  {
    "text": "available with basic definitely standard I think so I think either um and so you",
    "start": "2987400",
    "end": "2993040"
  },
  {
    "text": "must have premium tier for your container registry all right so next fix I can offer you is",
    "start": "2993040",
    "end": "3001160"
  },
  {
    "text": "to um have separate workstation uh what which is called paw",
    "start": "3001160",
    "end": "3006960"
  },
  {
    "text": "usually we called for for stations for administrators paw um privilege access",
    "start": "3006960",
    "end": "3013359"
  },
  {
    "text": "workstation to deploy CU to work with Cube C and in general work with",
    "start": "3013359",
    "end": "3018720"
  },
  {
    "text": "kubernetes so do you remember in the beginning I show you this easy hack with stealing",
    "start": "3018720",
    "end": "3024359"
  },
  {
    "text": "credentials so the workstation you use to access kubernetes must be really well",
    "start": "3024359",
    "end": "3029920"
  },
  {
    "text": "protected not the workstation you use to access Facebook or whatever it may be so separate workstation to access highly",
    "start": "3029920",
    "end": "3037200"
  },
  {
    "text": "sensitive service so so developers administrators that that work with kubernetes they should have separate",
    "start": "3037200",
    "end": "3044280"
  },
  {
    "text": "workstation and this workstation of course must be well protected all right uh oh",
    "start": "3044280",
    "end": "3052119"
  },
  {
    "text": "sorry um where's that slideshow",
    "start": "3052520",
    "end": "3058079"
  },
  {
    "text": "show all right so next one will be a bit more complicated more complicated and I will",
    "start": "3058079",
    "end": "3064000"
  },
  {
    "text": "not I will not show you full demo otherwise we will run out of time um content thrust and image signing what",
    "start": "3064000",
    "end": "3070720"
  },
  {
    "text": "you can do you may sign your images with certificate and only those images will",
    "start": "3070720",
    "end": "3076240"
  },
  {
    "text": "be trusted so your container registry won't be able so you won't be able to push",
    "start": "3076240",
    "end": "3082839"
  },
  {
    "text": "something that but what which which wasn't signed so you need to go to it also must",
    "start": "3082839",
    "end": "3088319"
  },
  {
    "text": "have premium tier for your container registry you go to to to content",
    "start": "3088319",
    "end": "3094079"
  },
  {
    "text": "trust um you must enable um content trust here that's that",
    "start": "3094079",
    "end": "3099720"
  },
  {
    "text": "only will be a first step then you also must issue Keys you also when when you",
    "start": "3099720",
    "end": "3105000"
  },
  {
    "text": "build the images you must sign it so it will be more hustles I know more hustles but as the next step you can you can",
    "start": "3105000",
    "end": "3112400"
  },
  {
    "text": "consider that quick fix will be just block network access from outside but",
    "start": "3112400",
    "end": "3117640"
  },
  {
    "text": "that will be the like a Next Step sign your images anyone is have images signing",
    "start": "3117640",
    "end": "3125359"
  },
  {
    "text": "process one thank you so hopefully next time I see I I'll see more hands all",
    "start": "3125440",
    "end": "3133240"
  },
  {
    "text": "right uh next one will not be like really the fix for the problems I show",
    "start": "3133240",
    "end": "3138559"
  },
  {
    "text": "you but the fender for containers has vulnerability scanner built in yeah it",
    "start": "3138559",
    "end": "3144559"
  },
  {
    "text": "will not find the Troon CU it it wasn't a vulnerability but if the image is",
    "start": "3144559",
    "end": "3149960"
  },
  {
    "text": "vulnerable in general it will be able to find it so let me show real",
    "start": "3149960",
    "end": "3155040"
  },
  {
    "text": "quick um I'm going to go to Defender for cloud because that's the part of Defender for",
    "start": "3155040",
    "end": "3161440"
  },
  {
    "text": "cloud uh workload",
    "start": "3161440",
    "end": "3166200"
  },
  {
    "text": "protection come on uh contain your image scanning",
    "start": "3169680",
    "end": "3178440"
  },
  {
    "text": "and now I have I see some vulnerabilities so my container image for example is based on the really old",
    "start": "3185880",
    "end": "3192760"
  },
  {
    "text": "operating system Ubuntu 1604 which of course is deprecated so we need to",
    "start": "3192760",
    "end": "3199440"
  },
  {
    "text": "change the base for my image so it can find vulnerabilities not really the",
    "start": "3199440",
    "end": "3204480"
  },
  {
    "text": "mitogen but vulnerabilities then avoid root permissions root",
    "start": "3204480",
    "end": "3209799"
  },
  {
    "text": "permissions that's obvious when you build containers and finally one last thing Network policies so I think we",
    "start": "3209799",
    "end": "3215480"
  },
  {
    "text": "have five minutes left for Q&A Network policies so Network policies allows me to uh control which container can access",
    "start": "3215480",
    "end": "3223079"
  },
  {
    "text": "other containers how containers can access each other because by by by default all containers will be in a",
    "start": "3223079",
    "end": "3228960"
  },
  {
    "text": "plain flat Network like just in the flat Network so I will be able to access from one container I will be able to access",
    "start": "3228960",
    "end": "3234599"
  },
  {
    "text": "other containers so with network policy you can control it so you may say this group of containers can access another",
    "start": "3234599",
    "end": "3240599"
  },
  {
    "text": "group of containers so you may just build the layers between them um in",
    "start": "3240599",
    "end": "3246000"
  },
  {
    "text": "kuber uh that will require you to to to use um how's it",
    "start": "3246000",
    "end": "3251720"
  },
  {
    "text": "called um um network kuber kuber network must",
    "start": "3251720",
    "end": "3258680"
  },
  {
    "text": "be integrated with with a aure virtual network but it worth it from security",
    "start": "3258680",
    "end": "3263720"
  },
  {
    "text": "standpoint all right so that's what I that's some recommendations I can give",
    "start": "3263720",
    "end": "3269160"
  },
  {
    "text": "you and we have also five minutes left for your questions so your",
    "start": "3269160",
    "end": "3275920"
  },
  {
    "text": "questions",
    "start": "3276200",
    "end": "3279200"
  },
  {
    "text": "yes yeah so in in the pipeline itself you can also have additional controls",
    "start": "3291400",
    "end": "3297119"
  },
  {
    "text": "um exactly so when you have a pipeline um here I'm just consider that like a",
    "start": "3297119",
    "end": "3302280"
  },
  {
    "text": "bit out of pipeline for the manual process but yeah in the pipeline you can also add add more verifications thank",
    "start": "3302280",
    "end": "3308640"
  },
  {
    "text": "you yes your first and then your hand was was first so the L movement within",
    "start": "3308640",
    "end": "3318359"
  },
  {
    "text": "a it would be limited to the name space right by default yep so yeah yeah um in",
    "start": "3318359",
    "end": "3328599"
  },
  {
    "text": "my case was was everything in the default namespace and they they could everyone can see each other as long as",
    "start": "3328599",
    "end": "3335520"
  },
  {
    "text": "you separ yeah then then you can physically isolate them that that that would be definitely",
    "start": "3335520",
    "end": "3342119"
  },
  {
    "text": "better thank you you have experience with open um what do you mean if I have",
    "start": "3342119",
    "end": "3349400"
  },
  {
    "text": "kubernetes in in in open shift or any other locations um I would say less",
    "start": "3349400",
    "end": "3356880"
  },
  {
    "text": "experience than with Azure but uh initially with open shift specifically",
    "start": "3356880",
    "end": "3362240"
  },
  {
    "text": "no but with kubernetes on premises yes so not not not not deployed not open",
    "start": "3362240",
    "end": "3368440"
  },
  {
    "text": "shift but in but but just Deploy on the server so kubernetes kubernetes uh in",
    "start": "3368440",
    "end": "3375440"
  },
  {
    "text": "the uh on premises work in the same matter so I show you with Docker right so when I was able to deploy in Docker",
    "start": "3375440",
    "end": "3382440"
  },
  {
    "text": "and I get a shell so the same will be in kubernetes on premise if you deploy the troed image in the kubernetes and",
    "start": "3382440",
    "end": "3388079"
  },
  {
    "text": "premises you will get a shell in the same manner you're",
    "start": "3388079",
    "end": "3393599"
  },
  {
    "text": "welcome yes",
    "start": "3393599",
    "end": "3397400"
  },
  {
    "text": "you uh do you mean uh the hash of the docker",
    "start": "3415240",
    "end": "3420480"
  },
  {
    "text": "image you you want to do it with what what do you want to do with that Docker",
    "start": "3420480",
    "end": "3425798"
  },
  {
    "text": "image um could be but hash will be will be different um every time when you",
    "start": "3435920",
    "end": "3443440"
  },
  {
    "text": "push",
    "start": "3445160",
    "end": "3448160"
  },
  {
    "text": "could be could be so yeah because sub substitute hash will be pretty pretty",
    "start": "3451160",
    "end": "3457200"
  },
  {
    "text": "hard I would say impossible thank you",
    "start": "3457200",
    "end": "3463039"
  },
  {
    "text": "um two minutes left if you have questions you may have them oh yeah yeah",
    "start": "3463280",
    "end": "3468839"
  },
  {
    "text": "one more question would using a script down container image prevent any",
    "start": "3468839",
    "end": "3478119"
  },
  {
    "text": "don't have any access to RPM so uh I would say",
    "start": "3482119",
    "end": "3488839"
  },
  {
    "text": "the um the best you can do in the container instance it's instance right",
    "start": "3488839",
    "end": "3494359"
  },
  {
    "text": "container instance uh the same as kubernetes when you deploy",
    "start": "3494359",
    "end": "3500440"
  },
  {
    "text": "container instance in networking you can also",
    "start": "3501920",
    "end": "3507280"
  },
  {
    "text": "say if that's a public or private uh but that's probably it so",
    "start": "3507280",
    "end": "3513440"
  },
  {
    "text": "it's more about like access control and network control and not too",
    "start": "3513440",
    "end": "3518920"
  },
  {
    "text": "much you can do here um if it if attacker already own the image um then",
    "start": "3518920",
    "end": "3524839"
  },
  {
    "text": "there's not too much you can do because you cannot really predict everything that attacker could do so if they Place",
    "start": "3524839",
    "end": "3531079"
  },
  {
    "text": "file here or there or it will be reverse shell or some other kind of Trojans so",
    "start": "3531079",
    "end": "3537160"
  },
  {
    "text": "um you must step you must make steps before your con instance was",
    "start": "3537160",
    "end": "3544160"
  },
  {
    "text": "compromised and maybe the last question if you still have them if not you can just grab your",
    "start": "3545520",
    "end": "3552640"
  },
  {
    "text": "fruits and coffee all",
    "start": "3552640",
    "end": "3556519"
  },
  {
    "text": "right",
    "start": "3558359",
    "end": "3561359"
  }
]