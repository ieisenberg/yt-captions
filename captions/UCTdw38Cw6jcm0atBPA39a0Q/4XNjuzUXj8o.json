[
  {
    "start": "0",
    "end": "105000"
  },
  {
    "text": "okay so Tokyo today is the whirlwind tour of authentication and authorization in asp.net core 2 I want",
    "start": "5790",
    "end": "13580"
  },
  {
    "text": "highlight that we are in core tool and hopefully you're not on core 1 because anything that I show you here will not work in core 1 between 1 and 2 they",
    "start": "13580",
    "end": "20770"
  },
  {
    "text": "rewrote the entire world of authentication in asp.net it's all about",
    "start": "20770",
    "end": "25970"
  },
  {
    "text": "core 2 so my name is Chris Klug I work as a software developer at a company",
    "start": "25970",
    "end": "32300"
  },
  {
    "text": "called cut on 30 clue which means 1337 in Swedish in Stockholm I've been doing",
    "start": "32300",
    "end": "38449"
  },
  {
    "text": "web development for the last 18 20 years something and basically on the microf",
    "start": "38449",
    "end": "45050"
  },
  {
    "text": "platform all the way so I've been started out in the good old days when it was classical ASP when it was just",
    "start": "45050",
    "end": "50930"
  },
  {
    "text": "everything in one file and it was it was interesting and then through web forms which was interesting and then MVC and",
    "start": "50930",
    "end": "58760"
  },
  {
    "text": "now it's come back and it's basically on full turn again and we're back into something that I recognize again and",
    "start": "58760",
    "end": "63920"
  },
  {
    "text": "it's getting lighter and lighter I'm not gonna do a whole bunch about slides and everything because I won't have time to",
    "start": "63920",
    "end": "69110"
  },
  {
    "text": "do my demo so I'm just gonna go and go demo so we're going to demo for the next 59 minutes before I die I will mention",
    "start": "69110",
    "end": "79400"
  },
  {
    "text": "that my nama remember it code that I'm demoing will be is available so you",
    "start": "79400",
    "end": "84500"
  },
  {
    "text": "can actually go and download it of these lengths here so there's the code for days today's demo and if I forget to",
    "start": "84500",
    "end": "90320"
  },
  {
    "text": "mention it then the recession available here and did that demos and all the stuff I'm talking about today as well as",
    "start": "90320",
    "end": "96350"
  },
  {
    "text": "a bunch of other stuff is available as a floral side course if you're on Pluralsight there is a course built",
    "start": "96350",
    "end": "102440"
  },
  {
    "text": "around what I'm going to show you today other than that I'm gonna do pretty much what I do in the course of course which",
    "start": "102440",
    "end": "107870"
  },
  {
    "start": "105000",
    "end": "146000"
  },
  {
    "text": "is show you step by step how you integrate different forms of authentication in asp.net core so I'm",
    "start": "107870",
    "end": "113750"
  },
  {
    "text": "not going to show you the underpinnings of how authentication works in a spec or I'm going to show you the big picture",
    "start": "113750",
    "end": "119479"
  },
  {
    "text": "I'm gonna show you if you need authentication to do local authentication do this if you need to do",
    "start": "119479",
    "end": "125150"
  },
  {
    "text": "Twitter do this if you need to do Facebook do this if you need to do as your ad b2c do this and finally if you",
    "start": "125150",
    "end": "131150"
  },
  {
    "text": "want to do identity server do this so I'm going to be very practical but this is the stuff you need to type together",
    "start": "131150",
    "end": "136760"
  },
  {
    "text": "to work not a bunch of fluff if you want fluff there are other sessions probably really good fluff but this is going to",
    "start": "136760",
    "end": "143840"
  },
  {
    "text": "be pretty down to what you need to do so I just realized that you cannot see what I've got on screen right let's",
    "start": "143840",
    "end": "151599"
  },
  {
    "start": "146000",
    "end": "166000"
  },
  {
    "text": "change this so you see a bit more",
    "start": "151599",
    "end": "155250"
  },
  {
    "text": "try that and you see that in the back",
    "start": "157210",
    "end": "162450"
  },
  {
    "text": "ish there's a one thumb up I'm gonna go with that so I've got a couple of demos",
    "start": "162450",
    "end": "168400"
  },
  {
    "start": "166000",
    "end": "207000"
  },
  {
    "text": "here I've got a web project and the web project is ridiculously simple I haven't done anything to it it's a very simple",
    "start": "168400",
    "end": "175720"
  },
  {
    "text": "asp.net core mbc website if we have a look at it you'll see my amazing design",
    "start": "175720",
    "end": "182170"
  },
  {
    "text": "skills like that it looks like the rest of the",
    "start": "182170",
    "end": "187430"
  },
  {
    "text": "internet does it's just a bootstrap website very very simple it's got a register button a login button and if I",
    "start": "187430",
    "end": "193519"
  },
  {
    "text": "go to a place called user info there is an endpoint here that I can't",
    "start": "193519",
    "end": "199810"
  },
  {
    "text": "access because it requires authentication that's it I don't care about the website I don't care what it looks like I want to show you how we do",
    "start": "199810",
    "end": "205660"
  },
  {
    "text": "a syndication right but the application if you are wondering it looks like this",
    "start": "205660",
    "end": "211800"
  },
  {
    "start": "207000",
    "end": "253000"
  },
  {
    "text": "it has an 8:00 p.m. at MBC it's using static files and MBC it's got two",
    "start": "211800",
    "end": "218320"
  },
  {
    "text": "controllers there's a home controller that shows a view user importing that shows a view that requires authorization",
    "start": "218320",
    "end": "224770"
  },
  {
    "text": "and it has an earth controller that has all of the views and stuff to do the authentication but none of it is",
    "start": "224770",
    "end": "230920"
  },
  {
    "text": "implemented or parts of it is but the important stuff is not my first demo is",
    "start": "230920",
    "end": "237070"
  },
  {
    "text": "and just to make sure that the room is active in here how many of you are doing local logins today and actually taking",
    "start": "237070",
    "end": "243820"
  },
  {
    "text": "care of your own user database with username and passwords",
    "start": "243820",
    "end": "249060"
  },
  {
    "text": "a ton of really brave people I tried to get away from that but we'll start out",
    "start": "249940",
    "end": "256480"
  },
  {
    "start": "253000",
    "end": "425000"
  },
  {
    "text": "in that area because I know that a lot of people still do that and then we'll move into other forms of authentication",
    "start": "256480",
    "end": "261760"
  },
  {
    "text": "afterwards the cool thing is that it doesn't matter what kind of authentication you're setting up it all",
    "start": "261760",
    "end": "266800"
  },
  {
    "text": "starts in the same way you go up to your services or your configure services hear you say services",
    "start": "266800",
    "end": "273990"
  },
  {
    "text": "and authentication so it's done not quite but we're good good way on the way",
    "start": "275520",
    "end": "281759"
  },
  {
    "text": "to actually getting authentication our authentication will give us the basic services we need for authentication",
    "start": "281759",
    "end": "286889"
  },
  {
    "text": "these are like the foundational services that we need and after that out of a",
    "start": "286889",
    "end": "291900"
  },
  {
    "text": "doth indication we get an interface called the or a class called authentication builder this is what we",
    "start": "291900",
    "end": "298620"
  },
  {
    "text": "need to use to configure the different forms of authentication that we want to use so I'm going to use local logins so",
    "start": "298620",
    "end": "305819"
  },
  {
    "text": "that means cookie so I'm just going to go and say dot add cookie like that cook your authentication configured and done",
    "start": "305819",
    "end": "312590"
  },
  {
    "text": "you can go in and make more modifications in here we can go in and do",
    "start": "312590",
    "end": "319520"
  },
  {
    "text": "in my case I'm going to do this so I add some configuration in here just telling",
    "start": "319740",
    "end": "325020"
  },
  {
    "text": "it that when the user is required to login if I go to a webpage that requires",
    "start": "325020",
    "end": "330510"
  },
  {
    "text": "authorization and authentication send the user off to slash auth slash login",
    "start": "330510",
    "end": "336150"
  },
  {
    "text": "to do the login parts and if I get to a page this is nice I like this if you",
    "start": "336150",
    "end": "341340"
  },
  {
    "text": "come to a page and you haven't logged in you're not authenticated at all you get sent to the login page if you come to a",
    "start": "341340",
    "end": "348240"
  },
  {
    "text": "page and you don't have access which basically means you are logged in but you don't have the right requirements or",
    "start": "348240",
    "end": "354570"
  },
  {
    "text": "the right claims to access that resource you can get sent to another place previously you would always be scented",
    "start": "354570",
    "end": "361620"
  },
  {
    "text": "login page so didn't matter if you didn't have the right credentials the fact that you or that you weren't logged",
    "start": "361620",
    "end": "367170"
  },
  {
    "text": "in you will end up in the same place all the time now you can split them out so I have these two different ones if you want to",
    "start": "367170",
    "end": "372780"
  },
  {
    "text": "login go to all slash login otherwise go to all slash access tonight",
    "start": "372780",
    "end": "378669"
  },
  {
    "text": "next once I've got my services configured and this is the step that I continuously forget even though I do",
    "start": "378669",
    "end": "384280"
  },
  {
    "text": "this on a fairly regular basis go down to your configure method and do app dot",
    "start": "384280",
    "end": "391360"
  },
  {
    "text": "use authentication that adds authentication to the request pipeline",
    "start": "391360",
    "end": "398379"
  },
  {
    "text": "just configuring the services to actually handle authentication it's not enough we need to get into the request",
    "start": "398379",
    "end": "404620"
  },
  {
    "text": "pipeline to make sure that people get authenticated as they go in and out of the system that is what we do I am now a",
    "start": "404620",
    "end": "411969"
  },
  {
    "text": "done with all my configuration I don't need to do anything else to make this work because I have cheated I have an AI",
    "start": "411969",
    "end": "418150"
  },
  {
    "text": "user service I have a stupid service that contains username and passwords you will need to authenticate users somehow",
    "start": "418150",
    "end": "424870"
  },
  {
    "text": "right once I've got that we can go over to my oath controller will just outline",
    "start": "424870",
    "end": "430990"
  },
  {
    "start": "425000",
    "end": "502000"
  },
  {
    "text": "that you'll see that it has methods or endpoints for a login login so there are",
    "start": "430990",
    "end": "436870"
  },
  {
    "text": "two for logins that that's the one that presents the login form that's the one that takes care of post getting their",
    "start": "436870",
    "end": "442900"
  },
  {
    "text": "credentials north indicating the user this is the register endpoint so basically this shows the registration serve page this handles the registration",
    "start": "442900",
    "end": "451800"
  },
  {
    "text": "logout well obviously log you out and there's two access denied one so all of these",
    "start": "451800",
    "end": "457569"
  },
  {
    "text": "are already implemented so there's already a view for registration because I don't want to show you how to write HTML what I want to show you is the",
    "start": "457569",
    "end": "464050"
  },
  {
    "text": "second step which is once the user is filled in the registration stuff and wants to register a user I take a look",
    "start": "464050",
    "end": "471370"
  },
  {
    "text": "at this and it goes it looks at the view state or a model state rather to see that that is valid so I've filled out",
    "start": "471370",
    "end": "476710"
  },
  {
    "text": "all of the fields if I filled out all the fields I don't do a bunch of validation in here I'm just gonna trust",
    "start": "476710",
    "end": "482469"
  },
  {
    "text": "that everything is fine it once again it's a demo my suggestion would be to never trust your user and actually",
    "start": "482469",
    "end": "488560"
  },
  {
    "text": "validate stuff but for the demo I'm just accepting any input that's fine then I",
    "start": "488560",
    "end": "493990"
  },
  {
    "text": "go to my user service and I say can you please add a new user this is the name the email and the password that the",
    "start": "493990",
    "end": "499180"
  },
  {
    "text": "person wants to use that's it I get a user back once I got that you",
    "start": "499180",
    "end": "506160"
  },
  {
    "start": "502000",
    "end": "618000"
  },
  {
    "text": "I can go and create a list of flames so everything in a straight-leg core and",
    "start": "507729",
    "end": "513698"
  },
  {
    "text": "actually earlier versions of a spirit as well yes asp.net as well that has to do with",
    "start": "513699",
    "end": "518888"
  },
  {
    "text": "authentication is based on claims so I create a list of claims that for this user I'm saying that the users identity",
    "start": "518889",
    "end": "524949"
  },
  {
    "text": "or name identifier is the email address the name of the user is the username and",
    "start": "524949",
    "end": "531130"
  },
  {
    "text": "the email is the email so I'll give it three claims that's it fairly simple",
    "start": "531130",
    "end": "537100"
  },
  {
    "text": "then once I got my claims I can take those claims and I can create a claims",
    "start": "537100",
    "end": "543250"
  },
  {
    "text": "identity saying that here are the claims for the user can you please please create an identity for me with those",
    "start": "543250",
    "end": "549100"
  },
  {
    "text": "claims and I'm doing it using cookie authentication that second parameter is",
    "start": "549100",
    "end": "554650"
  },
  {
    "text": "for some reason not mandatory so you can actually skip passing that in like that",
    "start": "554650",
    "end": "560260"
  },
  {
    "text": "if you do that everything works and then breaks so it will compile and it will",
    "start": "560260",
    "end": "567400"
  },
  {
    "text": "run but it won't actually authenticate user so that thing needs to be filled",
    "start": "567400",
    "end": "573010"
  },
  {
    "text": "out as well telling it this is the authentication method and I'm using finally I create a principle by passing",
    "start": "573010",
    "end": "580150"
  },
  {
    "text": "in my identity and once I got that I can go ahead and say HTTP context or sign-in",
    "start": "580150",
    "end": "588310"
  },
  {
    "text": "they sync which is an extension method passing in the principal for the user and after that I can just go and say",
    "start": "588310",
    "end": "595060"
  },
  {
    "text": "what cool the user is now signed in can you please redirect to the user information action on the home home",
    "start": "595060",
    "end": "600280"
  },
  {
    "text": "controller this will make sure or rather cooling this will make sure that the services that I registered",
    "start": "600280",
    "end": "606790"
  },
  {
    "text": "before goes ahead and sets the cookies and validates it and all of that stuff validating incoming cookies setting the",
    "start": "606790",
    "end": "613300"
  },
  {
    "text": "cookies and all that all we need to do is call this and we sign in the user take that go back out here",
    "start": "613300",
    "end": "622840"
  },
  {
    "text": "you and we load up the page again",
    "start": "622840",
    "end": "628940"
  },
  {
    "text": "register I get my oath slash register endpoint I get my registration page so I",
    "start": "629310",
    "end": "635250"
  },
  {
    "text": "fill out my information here I give it a password let's register and it complains",
    "start": "635250",
    "end": "643650"
  },
  {
    "text": "because I am a actually kind of good to show it because if you might run into it",
    "start": "643650",
    "end": "651470"
  },
  {
    "text": "I configured where is it you I configure my authentication but I didn't actually",
    "start": "651470",
    "end": "657680"
  },
  {
    "text": "tell it I registered my authentication service and I registered my cookie authentication but it didn't actually",
    "start": "657680",
    "end": "663410"
  },
  {
    "text": "tell the system what authentication provider I wanted to use I didn't say that I wanted to use cookie I just said",
    "start": "663410",
    "end": "668660"
  },
  {
    "text": "there is a cookie authentication thing that can be used but I'm not telling it",
    "start": "668660",
    "end": "674360"
  },
  {
    "text": "specifically to use it so I need to go in and say there's a couple of ways to do this if you look here I can either call it using a string telling it this",
    "start": "674360",
    "end": "682010"
  },
  {
    "text": "is the scheme you should be using at all times or you can go in and have a much more complicated configuration in my",
    "start": "682010",
    "end": "688250"
  },
  {
    "text": "case I want use cookie so I'm going to go cookie authentication this full",
    "start": "688250",
    "end": "696610"
  },
  {
    "text": "vacations game so all of our authentication key x-games in this case cookie will have a name if I don't",
    "start": "698580",
    "end": "705029"
  },
  {
    "text": "specifically set the name in my options here they will get a default name the default name is available in this case",
    "start": "705029",
    "end": "711839"
  },
  {
    "text": "under cookie authentication default dot authentication scheme so all of our schemes will have a default class that",
    "start": "711839",
    "end": "718680"
  },
  {
    "text": "contains the default name of that scheme so by setting this I'm telling the system that whenever I try to register a",
    "start": "718680",
    "end": "725820"
  },
  {
    "text": "user do it using the cookie authentication scheme whenever a user comes to my web page and tries to access",
    "start": "725820",
    "end": "732060"
  },
  {
    "text": "something look at the cookie authentication handler to see if that handler can authenticate the user in",
    "start": "732060",
    "end": "737940"
  },
  {
    "text": "some way in this case cookies so I'm telling it to always just cook your authentication the annoying thing that I think I",
    "start": "737940",
    "end": "745200"
  },
  {
    "start": "740000",
    "end": "888000"
  },
  {
    "text": "managed to do now is that I managed to put my application in a screwed up",
    "start": "745200",
    "end": "750540"
  },
  {
    "text": "situation because I now have a user registered so I can register a new one",
    "start": "750540",
    "end": "756029"
  },
  {
    "text": "and I can't log in if I go and put myself in here again",
    "start": "756029",
    "end": "761030"
  },
  {
    "text": "actually if I just do Chris one yes I have a check that alone only allows one",
    "start": "761030",
    "end": "767150"
  },
  {
    "text": "email address that works so I come in here now I am signed in you can see here",
    "start": "767150",
    "end": "772220"
  },
  {
    "text": "my user name is Chris Klug you can see my claims there are three of them I've got the name identifier the name",
    "start": "772220",
    "end": "777560"
  },
  {
    "text": "and the email address so all you need to do is register the services and pull",
    "start": "777560",
    "end": "782810"
  },
  {
    "text": "that sign in a sink and you're done you don't have to do anything else pretty simple way to get local logins working",
    "start": "782810",
    "end": "788830"
  },
  {
    "text": "but I can't log out because the log out button is not there yet it's it's if we",
    "start": "788830",
    "end": "795260"
  },
  {
    "text": "look at the UI for it my log out page if we go to home user information my log",
    "start": "795260",
    "end": "801920"
  },
  {
    "text": "out page is a little form I'm using forms and posts on my part for my log",
    "start": "801920",
    "end": "807710"
  },
  {
    "text": "outs there is a suite feature in for example chrome that will make chrome",
    "start": "807710",
    "end": "812720"
  },
  {
    "text": "follow certain urls to pre cache pages for you and if it goes in pre caches",
    "start": "812720",
    "end": "820070"
  },
  {
    "text": "your log out page means that it actually log the user out for you so if you do a",
    "start": "820070",
    "end": "826070"
  },
  {
    "text": "get to your log out endpoint you might end up with the use of getting logged out every time he logs into your page",
    "start": "826070",
    "end": "831560"
  },
  {
    "text": "with you said fairly crappy user experience so by putting it as a post I",
    "start": "831560",
    "end": "836810"
  },
  {
    "text": "require it to be pushed as a button and do HTTP post instead and I'm posting to",
    "start": "836810",
    "end": "842540"
  },
  {
    "text": "log out action on the auth controller if you look at the earth controller we look",
    "start": "842540",
    "end": "849050"
  },
  {
    "text": "at the logout method it it's an HTTP POST it's called logout and",
    "start": "849050",
    "end": "854360"
  },
  {
    "text": "implementation is actually pretty simple all I have to do in here is I didn't",
    "start": "854360",
    "end": "859820"
  },
  {
    "text": "even need a sign I didn't need one of these this is all I need to do I wait",
    "start": "859820",
    "end": "867710"
  },
  {
    "text": "HTTP context don't sign out async redirect action all of this stuff of removing the cookie and all of that",
    "start": "867710",
    "end": "874190"
  },
  {
    "text": "stuff that you might want to do to get this working if you just call sign out async that will make sure that the",
    "start": "874190",
    "end": "879290"
  },
  {
    "text": "cookie authentication handler goes and what does whatever it needs to clear out the currently logged in user so in this",
    "start": "879290",
    "end": "885680"
  },
  {
    "text": "case that thing will remove your cookie for you so with that in place I should be able to just go out here press logout and",
    "start": "885680",
    "end": "894260"
  },
  {
    "start": "888000",
    "end": "967000"
  },
  {
    "text": "and asp.net core is really fast by the way",
    "start": "894750",
    "end": "900970"
  },
  {
    "text": "once you've built it it takes about four mil so there it is I'm not logged out so login registering and logging out fairly",
    "start": "900970",
    "end": "907720"
  },
  {
    "text": "simple right logging in is my next part which is actually not much harder I'm",
    "start": "907720",
    "end": "914140"
  },
  {
    "text": "just gonna take us it's very similar to this called code here I'm going to take that code I'm going to do extract method",
    "start": "914140",
    "end": "920530"
  },
  {
    "text": "and call it sign in user and I have a",
    "start": "920530",
    "end": "926200"
  },
  {
    "text": "serious case of OCD I'm going to move this to the end",
    "start": "926200",
    "end": "932310"
  },
  {
    "text": "just because my private method should be at the bottom and yes I do have issues",
    "start": "932580",
    "end": "938010"
  },
  {
    "text": "and in my login here in my post what I do in that is I check my wallet model",
    "start": "938010",
    "end": "944580"
  },
  {
    "text": "state valid then I check authenticate the email and password using my service if the user has been the email and",
    "start": "944580",
    "end": "951900"
  },
  {
    "text": "password is correct I get a user back otherwise I I set up a model error and send it back and finally",
    "start": "951900",
    "end": "958320"
  },
  {
    "text": "down here I just do return a weight sign-in user passing in the user and",
    "start": "958320",
    "end": "966780"
  },
  {
    "text": "that then that takes the user just sit down here sets up the claims logs the",
    "start": "966780",
    "end": "971880"
  },
  {
    "start": "967000",
    "end": "1272000"
  },
  {
    "text": "user in using sign I sign in I think if I go to login",
    "start": "971880",
    "end": "976820"
  },
  {
    "text": "this should give me a login page I should be able to",
    "start": "977430",
    "end": "983579"
  },
  {
    "text": "set this up and I should be able to log in my got my user account so it took me",
    "start": "983579",
    "end": "988889"
  },
  {
    "text": "I've been speaking for fifteen minutes I introduced myself it takes less than 10 minutes to in actually set up",
    "start": "988889",
    "end": "995370"
  },
  {
    "text": "authentication in a through out net using local logins as long as you have a way to authenticate a user in my world",
    "start": "995370",
    "end": "1002660"
  },
  {
    "text": "that means that I actually weirdly enough in a lot of my applications don't ask me why have hard-coded things where",
    "start": "1002660",
    "end": "1008480"
  },
  {
    "text": "I basically just check the user name and password against a thing in my app settings because I only need one you through for",
    "start": "1008480",
    "end": "1014600"
  },
  {
    "text": "a simple rule thing that takes this long to implement but the thing is nobody",
    "start": "1014600",
    "end": "1020689"
  },
  {
    "text": "really does local logins anymore right it's all about doing social logins how many of you guys are doing the Facebook",
    "start": "1020689",
    "end": "1027770"
  },
  {
    "text": "logins or Twitter login or Gmail or something like that today that was way less it's like you okay",
    "start": "1027770",
    "end": "1035558"
  },
  {
    "text": "come see me after the session and I will explain to you why it's awesome to do social logins but I'll show you at least",
    "start": "1035559",
    "end": "1042260"
  },
  {
    "text": "how simple it is and maybe you'll do it in the future there are some benefits of doing it using social and it seems like",
    "start": "1042260",
    "end": "1048110"
  },
  {
    "text": "more and more people are moving in that rate that direction lucky enough that is just as simple to implement as this all",
    "start": "1048110",
    "end": "1055070"
  },
  {
    "text": "you have to do is you go into your after the outer tenth occation part you go in and we'll do an add one of these",
    "start": "1055070",
    "end": "1061900"
  },
  {
    "text": "external just adding in a call to add Facebook",
    "start": "1061900",
    "end": "1067059"
  },
  {
    "text": "and a call to Twitter add Twitter and also a little tip if you are doing",
    "start": "1067059",
    "end": "1072850"
  },
  {
    "text": "social logins your secrets the app secret and consumer secrets are not supposed to be shown to anyone but your",
    "start": "1072850",
    "end": "1079029"
  },
  {
    "text": "own team and preferably as few of those as possible so a big screen at a conference while also being recorded is",
    "start": "1079029",
    "end": "1085509"
  },
  {
    "text": "definitely not the right place you cannot use this for anything it's a demo application and I might I might reset my",
    "start": "1085509",
    "end": "1092019"
  },
  {
    "text": "secrets after showing it like this but they're supposed to be secret so we just call this and that adds all we need that",
    "start": "1092019",
    "end": "1098799"
  },
  {
    "text": "adds all of the functionality we need to do authentication using using Facebook and using Twitter next step I need to go",
    "start": "1098799",
    "end": "1106419"
  },
  {
    "text": "to my let's go to my register page now actually let's go to my login page which",
    "start": "1106419",
    "end": "1112990"
  },
  {
    "text": "is up here and in my login page I'm going to go ahead and I'm gonna add I can find right",
    "start": "1112990",
    "end": "1120870"
  },
  {
    "text": "snippet that I want I'm going to add this piece of code here",
    "start": "1120870",
    "end": "1126000"
  },
  {
    "text": "first of all I'm going ahead and injecting an eye authentication scheme provider that is one of those services",
    "start": "1126000",
    "end": "1132850"
  },
  {
    "text": "that we get by calling out authentication and it gives us a service that allows me to access all of the",
    "start": "1132850",
    "end": "1138070"
  },
  {
    "text": "different authentication schemes that are registered at the current point so I'm taking that and down here I'm",
    "start": "1138070",
    "end": "1144190"
  },
  {
    "text": "setting up and saying for one every one of these schemes that's available in get",
    "start": "1144190",
    "end": "1149230"
  },
  {
    "text": "request handler schemes I think basically give me all this games I want to put up a a tag link I want to call",
    "start": "1149230",
    "end": "1156730"
  },
  {
    "text": "log in external on the authentication or on the auth controller and I want to pass in the name of this game so it's",
    "start": "1156730",
    "end": "1163630"
  },
  {
    "text": "gonna pass in in this case Twitter and it's gonna pass in Facebook and then I'm",
    "start": "1163630",
    "end": "1168910"
  },
  {
    "text": "gonna write out the scheme display name here so it's gonna say Twitter and Facebook on the web page",
    "start": "1168910",
    "end": "1175720"
  },
  {
    "text": "once that is in place I need to go to my earth controller and somewhere up here under login let's do it here I'm gonna",
    "start": "1175720",
    "end": "1186309"
  },
  {
    "text": "add this thing here so I'm adding another route here that's called slash",
    "start": "1186309",
    "end": "1192700"
  },
  {
    "text": "login external slash ID so the ID is going to be the name of the",
    "start": "1192700",
    "end": "1198000"
  },
  {
    "text": "authentication handler that I want to use as I said Twitter Facebook in this case but it could be any other provider",
    "start": "1198000",
    "end": "1203139"
  },
  {
    "text": "that you've registered as well and then I'm calling HTTP context or challenge async basically saying send a challenge",
    "start": "1203139",
    "end": "1210070"
  },
  {
    "text": "to the user and get the user to log in and I want to use I want to login using",
    "start": "1210070",
    "end": "1215799"
  },
  {
    "text": "this thing here I want to use sign-in using the one that user has defined and one other little thing I need to pass in",
    "start": "1215799",
    "end": "1224169"
  },
  {
    "text": "an authentication properties and say when you're done signing in redirect the user to slash user info if you don't",
    "start": "1224169",
    "end": "1232000"
  },
  {
    "text": "pass this in which might potentially have happened once or twice while I've been doing it it is smart enough to say",
    "start": "1232000",
    "end": "1237850"
  },
  {
    "text": "redirect back to where I am right now so it means I click the link I get to this page here this thing shoves me off to",
    "start": "1237850",
    "end": "1244840"
  },
  {
    "text": "Facebook i authenticate myself at Facebook it redirects me back to this link here which then sends me back to",
    "start": "1244840",
    "end": "1252129"
  },
  {
    "text": "Facebook which says I'm already authenticated and sent me back to this endpoint which sends me back to Facebook",
    "start": "1252129",
    "end": "1258519"
  },
  {
    "text": "and then it goes on and on and on until Chrome builds and says that you were  and stops allowing redirect and I",
    "start": "1258519",
    "end": "1264549"
  },
  {
    "text": "think it's like 25 redirects before it stops or something like that so adding this will make sure that I don't end up",
    "start": "1264549",
    "end": "1269980"
  },
  {
    "text": "back here which I really don't want to save that and we go out here we press",
    "start": "1269980",
    "end": "1275649"
  },
  {
    "text": "login you'll see now that it just adds",
    "start": "1275649",
    "end": "1280289"
  },
  {
    "text": "basically can't we're down here and I could have gone in and I can just go back to my services and I can just call",
    "start": "1282840",
    "end": "1287909"
  },
  {
    "text": "add Google and I only need to take that change in the service registration and",
    "start": "1287909",
    "end": "1293610"
  },
  {
    "text": "all of a sudden Google will pop up here and all the sudden I can authenticate using Google's I can I can configure my different service providers using the",
    "start": "1293610",
    "end": "1300570"
  },
  {
    "text": "services without having to make any changes to my UI I press Facebook",
    "start": "1300570",
    "end": "1307398"
  },
  {
    "text": "get sent off to Facebook it asks me if I want to let earth demo receive my public",
    "start": "1307490",
    "end": "1312980"
  },
  {
    "text": "profile and my email address and since I know the guy who built this application and he's really nice",
    "start": "1312980",
    "end": "1318590"
  },
  {
    "text": "I'm gonna say yes I come back here and you can see that",
    "start": "1318590",
    "end": "1324340"
  },
  {
    "text": "I'm not getting a bunch of new claims so I'm getting other claims because I'm not doing my own claims in this case I'm getting facebook claims and Facebook",
    "start": "1324340",
    "end": "1331059"
  },
  {
    "text": "will give me a name identifier an email address a name a given name and a surname if I were to do the same thing",
    "start": "1331059",
    "end": "1337090"
  },
  {
    "text": "using Twitter I will get other claims and that is kind of a problem that I'm getting different claims for different",
    "start": "1337090",
    "end": "1343899"
  },
  {
    "text": "providers so I would always say all the time in my application have to look at what claims are available right now so",
    "start": "1343899",
    "end": "1350230"
  },
  {
    "text": "if I want to use an email address that's fine if the user is logged in using Facebook but Twitter doesn't actually give you an email address so if the user",
    "start": "1350230",
    "end": "1357039"
  },
  {
    "text": "signs in using or logs in using your Twitter I can't use the email address and so on so it because it'll be",
    "start": "1357039",
    "end": "1362590"
  },
  {
    "text": "complicated with different social providers right so what we normally do is we put in a step in between and say I",
    "start": "1362590",
    "end": "1369309"
  },
  {
    "text": "will make sure that the user provides at least enough for me to know what I need and then basically normalize the claims",
    "start": "1369309",
    "end": "1376929"
  },
  {
    "text": "that are available and the way that we do that I'm just going to log out here the way that we do that is we go back",
    "start": "1376929",
    "end": "1383889"
  },
  {
    "text": "here to the start up the bottom here I'm actually going to call ad cookie again I'm going to add",
    "start": "1383889",
    "end": "1390720"
  },
  {
    "text": "another cookie authentication handler but I'm going to call it temp cookie so",
    "start": "1390720",
    "end": "1396720"
  },
  {
    "text": "that's a new handler it's there it will handle cook your authentication in all of it but it will never be called right",
    "start": "1396720",
    "end": "1402690"
  },
  {
    "text": "now it's never going to be used by anyone so what I can do is I can go in",
    "start": "1402690",
    "end": "1407700"
  },
  {
    "text": "here and I can say to the Twitter one",
    "start": "1407700",
    "end": "1412429"
  },
  {
    "text": "whenever somebody signs in or authenticates using Twitter sign in the use of using the temp cookie one not the",
    "start": "1416850",
    "end": "1423870"
  },
  {
    "text": "real one don't sign them in use in the cookie authentication one which is the the true one for the application sign",
    "start": "1423870",
    "end": "1429690"
  },
  {
    "text": "them in using this other thing over here and I will do the same thing for",
    "start": "1429690",
    "end": "1435410"
  },
  {
    "text": "Facebook so both of them will sign them in using another provider that I'm not",
    "start": "1435410",
    "end": "1441510"
  },
  {
    "text": "using at the moment so they will get a cookie but they will not get the cookie that's automatically identified so the",
    "start": "1441510",
    "end": "1447450"
  },
  {
    "text": "user won't actually be properly logged into the system but I will still have a cookie above that with information about",
    "start": "1447450",
    "end": "1454050"
  },
  {
    "text": "them and then I'm going to go over to [Music]",
    "start": "1454050",
    "end": "1460290"
  },
  {
    "text": "this thing here and I'm gonna change the login external thing here to both slash",
    "start": "1460290",
    "end": "1468590"
  },
  {
    "text": "register external like that and I'm",
    "start": "1468590",
    "end": "1474360"
  },
  {
    "text": "gonna go so that means that once the user is logged in they'll come back they'll get logged in with the temporary cookie and then get redirected to",
    "start": "1474360",
    "end": "1481040"
  },
  {
    "text": "register external to look at register external",
    "start": "1481040",
    "end": "1486770"
  },
  {
    "text": "you that is basically an endpoint here that",
    "start": "1486960",
    "end": "1492650"
  },
  {
    "text": "says can you please HTTP context authenticate async says can you",
    "start": "1492650",
    "end": "1497690"
  },
  {
    "text": "authenticate this user using the temp cookie specifically can you go and see if the temp cookie handler can give me",
    "start": "1497690",
    "end": "1504650"
  },
  {
    "text": "information about this user if that doesn't succeed somebody is obviously ended up at this",
    "start": "1504650",
    "end": "1510590"
  },
  {
    "text": "endpoint without being in the right state so I'm just redirecting them back to home if that is the case that",
    "start": "1510590",
    "end": "1517190"
  },
  {
    "text": "somebody is temporarily signed in at the moment I take that user information that auth",
    "start": "1517190",
    "end": "1522710"
  },
  {
    "text": "result dot principle and I go ahead and call my user service",
    "start": "1522710",
    "end": "1528690"
  },
  {
    "text": "and say can you please register this user",
    "start": "1528690",
    "end": "1533360"
  },
  {
    "text": "using this name identifier here",
    "start": "1533880",
    "end": "1538039"
  },
  {
    "text": "oh sorry can you find this user I'm reading it wrong can I find this user using this this thing here is the unique",
    "start": "1538960",
    "end": "1545409"
  },
  {
    "text": "identifier for the user for Facebook so can you find this Facebook user in my application if that is the case if I can",
    "start": "1545409",
    "end": "1551950"
  },
  {
    "text": "find the user in my system that has logged in before using Facebook the Facebook identifier then I basically",
    "start": "1551950",
    "end": "1557919"
  },
  {
    "text": "sign the user in if not it's a new user so I have clicked on it I've never been to the application",
    "start": "1557919",
    "end": "1564270"
  },
  {
    "text": "before the application don't know who I am what I need to do is I need to show them a web page where they can input the",
    "start": "1564270",
    "end": "1570480"
  },
  {
    "text": "information that I need so I want to collect the name and the email and what I do is I use the temporary information",
    "start": "1570480",
    "end": "1577890"
  },
  {
    "text": "and say if there is an email claim please pre populate the email input box with the email if there is a name pre",
    "start": "1577890",
    "end": "1584820"
  },
  {
    "text": "populate that with the name and then I have another one here register external",
    "start": "1584820",
    "end": "1591270"
  },
  {
    "text": "post once you've filled that thing in you come back to this page again and",
    "start": "1591270",
    "end": "1596640"
  },
  {
    "text": "once again we check is there a temporary cookie for this user to have this uses temporarily signed in if not go off to",
    "start": "1596640",
    "end": "1604200"
  },
  {
    "text": "the home page I don't care if there is check that the model state is valid after that add an external user to this",
    "start": "1604200",
    "end": "1612300"
  },
  {
    "text": "system so I'm telling the system that I want to register a user his name histor",
    "start": "1612300",
    "end": "1617880"
  },
  {
    "text": "her name is that email is that and the unique identifier is this value here",
    "start": "1617880",
    "end": "1623910"
  },
  {
    "text": "which is the name identifier I got from the social identity provider and finally I sign in the user signing in an",
    "start": "1623910",
    "end": "1631770"
  },
  {
    "text": "external user is pretty much what you'd expect why did I order sudden zoom in",
    "start": "1631770",
    "end": "1640520"
  },
  {
    "text": "we have this thing here called sign-in external so all I do when I sign in an",
    "start": "1640750",
    "end": "1647290"
  },
  {
    "text": "external user is I first ask them to sign in sign out the temporary cookie so",
    "start": "1647290",
    "end": "1653110"
  },
  {
    "text": "I'm signing out the temporary sign in that we've got and then I sign in them sign them in for real so for a period of",
    "start": "1653110",
    "end": "1660160"
  },
  {
    "text": "time they're going to be temporarily signed into the system using a cookie but once they provided all of the",
    "start": "1660160",
    "end": "1666940"
  },
  {
    "text": "information that I need I transfer that temporary sign in to a proper real sign in and they're welcome into my system",
    "start": "1666940",
    "end": "1673980"
  },
  {
    "text": "that means that if I go back out here or we press register",
    "start": "1673980",
    "end": "1680730"
  },
  {
    "start": "1674000",
    "end": "1786000"
  },
  {
    "text": "actually if I press register we need to have one of these",
    "start": "1683050",
    "end": "1690430"
  },
  {
    "text": "you",
    "start": "1692220",
    "end": "1694280"
  },
  {
    "text": "that wasn't what I wanted and we want to have external providers",
    "start": "1699260",
    "end": "1707470"
  },
  {
    "text": "just one so we need to provide the buttons out here right so I'm just putting the buttons in here as well so I'll go Facebook I get sent off to",
    "start": "1707470",
    "end": "1713920"
  },
  {
    "text": "Facebook but I've already logged into Facebook and already accepted that missed my this application gets access",
    "start": "1713920",
    "end": "1719380"
  },
  {
    "text": "right so I get sent straight back I don't have to go and sign into Facebook again because Facebook knows that I",
    "start": "1719380",
    "end": "1724450"
  },
  {
    "text": "trust this awesome developer that's built this application so I come back here I get that temporary cookie so I'm",
    "start": "1724450",
    "end": "1731440"
  },
  {
    "text": "temporarily signed in now but I won't actually be able to access anything because I'm not signed in I'm only",
    "start": "1731440",
    "end": "1736510"
  },
  {
    "text": "temporarily signed in using a temporary cookie I get this form here which pre-populates my information here with",
    "start": "1736510",
    "end": "1743170"
  },
  {
    "text": "the information that I got from Facebook and then I press register that register",
    "start": "1743170",
    "end": "1749050"
  },
  {
    "text": "me in the system as a local user as well or my information in the local system and signs me in properly and issues only",
    "start": "1749050",
    "end": "1756450"
  },
  {
    "text": "declaimed I'm expecting so I've now normalized it so no matter if I log in with Twitter or Facebook or some other",
    "start": "1756450",
    "end": "1762730"
  },
  {
    "text": "provider in the end I'm going to end up with these three claims and whenever somebody registers I can make sure that",
    "start": "1762730",
    "end": "1768940"
  },
  {
    "text": "I collect the information that I need independently of what provider that I'm using does that make sense",
    "start": "1768940",
    "end": "1775150"
  },
  {
    "text": "ish at least this has been built into asp.net MVC for ages it's just that",
    "start": "1775150",
    "end": "1780880"
  },
  {
    "text": "their template is a little bit hard to follow along according to me",
    "start": "1780880",
    "end": "1785900"
  },
  {
    "text": "okay so we've got local logins and we've seen social providers right there's no",
    "start": "1785900",
    "end": "1793760"
  },
  {
    "start": "1786000",
    "end": "2191000"
  },
  {
    "text": "way apparently to go to a conference and not show you a sure stuff I've heard so",
    "start": "1793760",
    "end": "1799880"
  },
  {
    "text": "I'm gonna go ahead and set up this thing here's a starter project and I'm gonna show you how to use Azure ad b2c so",
    "start": "1799880",
    "end": "1807170"
  },
  {
    "text": "Azure ad b2c is business-to-consumer it's not an azure active directory as such it kind of is but it kind of isn't",
    "start": "1807170",
    "end": "1814480"
  },
  {
    "text": "but it offers the ability to do what I just did it offers us to local do local logins using email address but it also",
    "start": "1814480",
    "end": "1821150"
  },
  {
    "text": "allows us to register social identity providers and all of that but we don't have to care we can just click things in",
    "start": "1821150",
    "end": "1828770"
  },
  {
    "text": "the azure portal and set things up and then we let asher handle all the stuff of collecting information and",
    "start": "1828770",
    "end": "1834620"
  },
  {
    "text": "communicating with Facebook and all of that all we do is we make sure we communicate with Facebook with Asher so",
    "start": "1834620",
    "end": "1841700"
  },
  {
    "text": "to do that I have an empty up to empty application again I go to the startup",
    "start": "1841700",
    "end": "1847059"
  },
  {
    "text": "say here it's pretty much the same thing I had before before I started adding all of my crud to it we do services but an authentication",
    "start": "1847059",
    "end": "1856390"
  },
  {
    "text": "same thing as before no difference but this time I actually want to use open ID",
    "start": "1856390",
    "end": "1861800"
  },
  {
    "text": "connect so open ID connect the standard protocol that we can use to authenticate",
    "start": "1861800",
    "end": "1868190"
  },
  {
    "text": "users using different services unfortunately Microsoft decided that they were not going to support open ID",
    "start": "1868190",
    "end": "1874580"
  },
  {
    "text": "Connect default like everyone else is doing they added some stuff on top of it which makes it a bit harder to use they",
    "start": "1874580",
    "end": "1882800"
  },
  {
    "text": "support what they call profiles so normally you just send off the user to an endpoint and say can you please autentic eight this user what Microsoft",
    "start": "1882800",
    "end": "1890840"
  },
  {
    "text": "is offering with b2c is they don't only do authentication they Oaks also support",
    "start": "1890840",
    "end": "1896600"
  },
  {
    "text": "registration profile updating and things like that they offer other services than",
    "start": "1896600",
    "end": "1902929"
  },
  {
    "text": "just authentication using something they call profiles so a profile is an action",
    "start": "1902929",
    "end": "1908750"
  },
  {
    "text": "that you can do using Open ID connect at Microsoft so I'm going to go ahead and",
    "start": "1908750",
    "end": "1914510"
  },
  {
    "text": "I'm going to name my provider here weirdly enough b2c underscore one under",
    "start": "1914510",
    "end": "1919610"
  },
  {
    "text": "sign underscore in reason for that is that this mimics the name of my profile",
    "start": "1919610",
    "end": "1926480"
  },
  {
    "text": "that I have set up in Asher B to C underscore one underscore is something",
    "start": "1926480",
    "end": "1931880"
  },
  {
    "text": "that Microsoft adds automatically so you can't decide that why I have no clue",
    "start": "1931880",
    "end": "1937299"
  },
  {
    "text": "B to C I can understand the underscore one underscore I have no clue and then I",
    "start": "1937299",
    "end": "1942620"
  },
  {
    "text": "named it sign in because this profile supports signing in users it doesn't allow users to sign up or change their",
    "start": "1942620",
    "end": "1949760"
  },
  {
    "text": "profile information anything it only does sign in",
    "start": "1949760",
    "end": "1954549"
  },
  {
    "text": "once I've named it and I named it the same thing as my profile because later on I need them to be named the same thing wait to work and then I'm gonna go",
    "start": "1954929",
    "end": "1962669"
  },
  {
    "text": "in here and I'm gonna say options and then I can configure stuff I'm gonna need to configure one open ID Connect",
    "start": "1962669",
    "end": "1969659"
  },
  {
    "text": "authentication handler for every profile that I support so if I support sign in/sign up",
    "start": "1969659",
    "end": "1976049"
  },
  {
    "text": "sign in and up edit profile and whatever so I'm going to end up with like three",
    "start": "1976049",
    "end": "1981629"
  },
  {
    "text": "or four or five different profiles I need to register three or four or five different endpoints or handlers and that",
    "start": "1981629",
    "end": "1989609"
  },
  {
    "text": "means repetition and I really dislike repetition so what I'm going to do is I'm going to create this helper method that looked like this ad b2c options",
    "start": "1989609",
    "end": "2000200"
  },
  {
    "text": "config that's the one so this method here it takes and options are open ID",
    "start": "2000200",
    "end": "2006499"
  },
  {
    "text": "Connect options object and the name of the policy and then it configures all of",
    "start": "2006499",
    "end": "2013099"
  },
  {
    "text": "the things that we need to get it to configured to work with a sure which means it gives it an address of where my",
    "start": "2013099",
    "end": "2018859"
  },
  {
    "text": "metadata endpoint is with the policy at the end and it sets up some redirects it",
    "start": "2018859",
    "end": "2025129"
  },
  {
    "text": "says once you signed out with right here when you come back from a sure use this address so every one of these needs to",
    "start": "2025129",
    "end": "2030710"
  },
  {
    "text": "have a different endpoint address and a few little things so this helps me set everything up and all it does it",
    "start": "2030710",
    "end": "2037369"
  },
  {
    "text": "basically sets up a unique callback path and signed out callback path for every",
    "start": "2037369",
    "end": "2043009"
  },
  {
    "text": "one of the policies this needs to be there for it to work using that I can then go ahead here and",
    "start": "2043009",
    "end": "2049750"
  },
  {
    "text": "I can call configure open ID options pass in my options object and my magical",
    "start": "2049750",
    "end": "2057780"
  },
  {
    "text": "b2c under school underscore one underscore sign underscore in and then",
    "start": "2057780",
    "end": "2064120"
  },
  {
    "text": "we just need to do that for my other ones as well but I'm not going to type that out I'm really sorry that's just",
    "start": "2064120",
    "end": "2069820"
  },
  {
    "text": "about me so we're gonna do a D D to C up",
    "start": "2069820",
    "end": "2074860"
  },
  {
    "text": "and I get no intellisense let's try this",
    "start": "2074860",
    "end": "2080040"
  },
  {
    "text": "ad b2c config that's going on so I do",
    "start": "2080040",
    "end": "2085600"
  },
  {
    "text": "the same thing for one policy called b2c underscore one underscore sign underscore in underscore or underscore",
    "start": "2085600",
    "end": "2092560"
  },
  {
    "text": "up and one cold yeah you get it for sign up right so I have three different end points one for signing in",
    "start": "2092560",
    "end": "2098560"
  },
  {
    "text": "one for signing up and one for either signing in or signing up and these will",
    "start": "2098560",
    "end": "2104560"
  },
  {
    "text": "only do authentication so they will only authenticate users they won't sign anybody in so I need to use my add my",
    "start": "2104560",
    "end": "2111100"
  },
  {
    "text": "cookie here so I needed a cookie middle where it could be authentication to actually sign the user into my",
    "start": "2111100",
    "end": "2116530"
  },
  {
    "text": "application and keep them signed in in my end so open ID Connect will authenticate users cookie will keep the",
    "start": "2116530",
    "end": "2122890"
  },
  {
    "text": "user signed in and instead of just telling it one thing here I'm gonna go ahead and say ad b2c",
    "start": "2122890",
    "end": "2129130"
  },
  {
    "text": "Oh defaults that's the one and I'm going",
    "start": "2129130",
    "end": "2134170"
  },
  {
    "text": "to tell it here say that whenever somebody comes to this way comes in authenticates themselves so once they've",
    "start": "2134170",
    "end": "2140890"
  },
  {
    "text": "been to Azure ad and they come back sign them in using the cookie authentication middleware that's fine when somebody",
    "start": "2140890",
    "end": "2147400"
  },
  {
    "text": "asks to be signed out sign them out using the cookie authentication handler whenever somebody asks to be signed in",
    "start": "2147400",
    "end": "2154270"
  },
  {
    "text": "rather I go to an endpoint where the user is not authenticated send them somewhere using this scheme here to the",
    "start": "2154270",
    "end": "2161020"
  },
  {
    "text": "sign in or sign up one and finally when a user comes to the webpage please have",
    "start": "2161020",
    "end": "2167110"
  },
  {
    "text": "a look at their cookie using the cookie authentication middle air handler to see if the user is authenticated at this",
    "start": "2167110",
    "end": "2172480"
  },
  {
    "text": "moment when you can give them all these different configuration things in this case I'm telling it to use cook your",
    "start": "2172480",
    "end": "2177730"
  },
  {
    "text": "authentication for everything except when I need to challenge the user to login and finally I need to make sure",
    "start": "2177730",
    "end": "2185380"
  },
  {
    "text": "that I add this thing here use authentication like that so it's a bunch",
    "start": "2185380",
    "end": "2192430"
  },
  {
    "start": "2191000",
    "end": "2381000"
  },
  {
    "text": "of configuration but that's about it and all of this confirmation stuff here down here is available on the Asha website",
    "start": "2192430",
    "end": "2197590"
  },
  {
    "text": "it's pretty well-documented and after that I can go to my oath controller and",
    "start": "2197590",
    "end": "2203530"
  },
  {
    "text": "my oath controller is obviously going to be a lot simpler because it doesn't have any forms it doesn't handling handle you",
    "start": "2203530",
    "end": "2208690"
  },
  {
    "text": "through post backs and stuff like that all I need to do is add the functionality to send the user to the",
    "start": "2208690",
    "end": "2214150"
  },
  {
    "text": "right endpoint at in Azure so in here I'm gonna add ad b2c login challenge so",
    "start": "2214150",
    "end": "2222280"
  },
  {
    "text": "I'm going to return a challenge here and tell it that can you please login the user and can you lock them in you used",
    "start": "2222280",
    "end": "2230080"
  },
  {
    "text": "to be b2c underscore one under closed sign sign underscore in to sign in users",
    "start": "2230080",
    "end": "2236770"
  },
  {
    "text": "so that's the name of my authentication Handler and if you want a register that",
    "start": "2236770",
    "end": "2243100"
  },
  {
    "text": "is actually a different one so it's going to be sign up that's my other handler that handles signing up and for",
    "start": "2243100",
    "end": "2250090"
  },
  {
    "text": "signing out we'll do a wait HTTP context God sign",
    "start": "2250090",
    "end": "2256900"
  },
  {
    "text": "out a sink to sign out the user that will sign out the user from my local cookie but I actually want to sign out",
    "start": "2256900",
    "end": "2264220"
  },
  {
    "text": "the user in Azure as well I don't want to keep the user signed in so what I'm gonna do is I'm gonna say ad b2c sign",
    "start": "2264220",
    "end": "2271420"
  },
  {
    "text": "out and here is the whole thing of me naming my handlers a bit weirdly when",
    "start": "2271420",
    "end": "2278680"
  },
  {
    "text": "you sign in or get a user authenticated using Azure ad b2c there will be a claim",
    "start": "2278680",
    "end": "2284470"
  },
  {
    "text": "in the claims collection with the name of the profile that I used when I sign",
    "start": "2284470",
    "end": "2290080"
  },
  {
    "text": "the user in or authenticated user so if I go ahead and sent ik eight the user using the profile called b2c underscore",
    "start": "2290080",
    "end": "2297369"
  },
  {
    "text": "one underscore sign underscore in Asscher will authenticate the user and send the user back with a claim",
    "start": "2297369",
    "end": "2303880"
  },
  {
    "text": "containing that value so I know which endpoint I need to use when I sign out",
    "start": "2303880",
    "end": "2308950"
  },
  {
    "text": "the user because I need to sign out the user at the same endpoint",
    "start": "2308950",
    "end": "2313990"
  },
  {
    "text": "that name the name of the profile I used is available in a claim called TFP so I",
    "start": "2313990",
    "end": "2321400"
  },
  {
    "text": "pull out the name of the profile that was used when I authenticated the user I take that name and then I say can you",
    "start": "2321400",
    "end": "2328330"
  },
  {
    "text": "please sign out at this user using this profile here and that profile is the",
    "start": "2328330",
    "end": "2334210"
  },
  {
    "text": "name as same name as my authentication handler that make sense issued list yes",
    "start": "2334210",
    "end": "2342150"
  },
  {
    "text": "you yes so it's yes you remove the",
    "start": "2344079",
    "end": "2352660"
  },
  {
    "text": "possibility of doing single sign on a if you want to skip that you can sign the youth rod locally only but that",
    "start": "2352660",
    "end": "2359300"
  },
  {
    "text": "means that when you click login again you're going to bounce off Asher and Asher is going to say you already logged",
    "start": "2359300",
    "end": "2365150"
  },
  {
    "text": "in and it will send a cookie back so if you have yeah if you have two applications using the same as your ad",
    "start": "2365150",
    "end": "2370370"
  },
  {
    "text": "b2c there will be cite single sign-on between those two applications which I",
    "start": "2370370",
    "end": "2375470"
  },
  {
    "text": "guess is a good thing and a really crap thing depending on how you see it I think it's supposed to be a good thing",
    "start": "2375470",
    "end": "2382480"
  },
  {
    "text": "so taking this pressing register because I don't actually have a user in uh sure",
    "start": "2382480",
    "end": "2388400"
  },
  {
    "text": "which is BS because I actually demoed this before I forgot to delete my user so I can't press Facebook we're gonna",
    "start": "2388400",
    "end": "2395779"
  },
  {
    "text": "try something here this might fail I'm really sorry if it does but I'm gonna press email this means I'm actually",
    "start": "2395779",
    "end": "2402170"
  },
  {
    "text": "signing up and creating a local user in my asher ad here when you sign in using",
    "start": "2402170",
    "end": "2407960"
  },
  {
    "text": "Facebook or Twitter in this case you also get a local user in an ad in Azure",
    "start": "2407960",
    "end": "2413140"
  },
  {
    "text": "but I'm going to create my own user here and what I like about this is that if I go here and I press send verification",
    "start": "2413140",
    "end": "2419240"
  },
  {
    "text": "code and I wait there it is this is",
    "start": "2419240",
    "end": "2425270"
  },
  {
    "text": "dangerous because I've gone down here and started typing my password and not looked at my screen and then all the",
    "start": "2425270",
    "end": "2430940"
  },
  {
    "text": "sudden it shows up the verification code box and oh listen I'm typing my password in clear text to the entire audience",
    "start": "2430940",
    "end": "2437380"
  },
  {
    "text": "pretty crappy solution cool thing about this if I I create a new you use new",
    "start": "2437380",
    "end": "2442490"
  },
  {
    "text": "password and let's create something semi-serious like that and a display",
    "start": "2442490",
    "end": "2448520"
  },
  {
    "text": "name verification code I used have a phone",
    "start": "2448520",
    "end": "2455360"
  },
  {
    "text": "actually let's just this is another one of those I should probably not what can",
    "start": "2455360",
    "end": "2460820"
  },
  {
    "text": "go wrong we join your personal email folder to the entire audience there is look at that verify your email address",
    "start": "2460820",
    "end": "2467030"
  },
  {
    "text": "here's my code I copy that out so Microsoft will take care of verifying",
    "start": "2467030",
    "end": "2473030"
  },
  {
    "text": "did that not work there is verifying my email address as well so I",
    "start": "2473030",
    "end": "2478170"
  },
  {
    "text": "don't have to do all that stuff Microsoft does it for me automatically I go create",
    "start": "2478170",
    "end": "2483860"
  },
  {
    "text": "I get sent back here and I get all of these claims to this in my user yes",
    "start": "2484660",
    "end": "2493048"
  },
  {
    "text": "I have no idea what the upper limit is but you can probably shove in a couple of hundred thousand before actually croaks then I assume you're paying for",
    "start": "2493770",
    "end": "2500670"
  },
  {
    "text": "it as well because I haven't looked at the payment model because I don't need that for one user for a demo but I don't",
    "start": "2500670",
    "end": "2508500"
  },
  {
    "text": "see that there being a reasonable upper limit that will cause a problem for you just remember that once you make it an",
    "start": "2508500",
    "end": "2514080"
  },
  {
    "text": "azure ad b2c it's not a regular ad there are two different things so they need to be handled differently",
    "start": "2514080",
    "end": "2521750"
  },
  {
    "text": "I sign out from this you don't see it but I'm actually being sent off to Asher",
    "start": "2522040",
    "end": "2527260"
  },
  {
    "text": "to sign out and then I come back here again and if I press login now and I",
    "start": "2527260",
    "end": "2533290"
  },
  {
    "text": "press Facebook because I already have a Facebook user I'm going to get thrown into Facebook I've already proved that",
    "start": "2533290",
    "end": "2539560"
  },
  {
    "text": "user usually comes back to Asher ad which sends me back here with all my claims last thing I want to show you I'm",
    "start": "2539560",
    "end": "2545530"
  },
  {
    "text": "not going to go all the way through but if I go for register and I select Twitter it asks me if I want to",
    "start": "2545530",
    "end": "2552730"
  },
  {
    "text": "authorize this demo here to access my Twitter account and I will say authorize the reason I want to show you this is",
    "start": "2552730",
    "end": "2558640"
  },
  {
    "text": "because you end up at this so what the stuff that I had about actually collecting information using a temp cookie and all of that is handled for me",
    "start": "2558640",
    "end": "2565720"
  },
  {
    "text": "up here so they will do all of this and store all of the information securely in",
    "start": "2565720",
    "end": "2570970"
  },
  {
    "text": "an ad and I don't have to care and yes you can change the image on image on the left hand side I think you should be",
    "start": "2570970",
    "end": "2578200"
  },
  {
    "text": "able to I just never tried it um okay so I should I needed me to see is awesome",
    "start": "2578200",
    "end": "2584170"
  },
  {
    "start": "2581000",
    "end": "2833000"
  },
  {
    "text": "and I sure ad babe works as well I must",
    "start": "2584170",
    "end": "2589210"
  },
  {
    "text": "admit though that I tend to gravitate towards not using Azure ad b2c or local",
    "start": "2589210",
    "end": "2594940"
  },
  {
    "text": "logins I tend to gravitate towards using identity server so Brock Allen who is",
    "start": "2594940",
    "end": "2600400"
  },
  {
    "text": "here as the speaker builds a product called identity server it's an open-source identity server that sounds",
    "start": "2600400",
    "end": "2606940"
  },
  {
    "text": "really stupid when you say it but you get what I mean it's it's a thing you just install it's really easy you get",
    "start": "2606940",
    "end": "2612760"
  },
  {
    "text": "the it's a middleware you download into your application you register it it's a",
    "start": "2612760",
    "end": "2618160"
  },
  {
    "text": "nougat package you download the UI because uy is separate that's something you can download it's completely",
    "start": "2618160",
    "end": "2624130"
  },
  {
    "text": "scalable you can do whatever you are you want to it but it has all of the stuff you need for an open ID Connect endpoint",
    "start": "2624130",
    "end": "2630250"
  },
  {
    "text": "so it is a fully working identity provider that supports a bunch of protocols out of the box and your effort",
    "start": "2630250",
    "end": "2637540"
  },
  {
    "text": "to set it up is get a new get package",
    "start": "2637540",
    "end": "2643410"
  },
  {
    "text": "go into your startup",
    "start": "2645000",
    "end": "2648839"
  },
  {
    "text": "say that is nice copyrighted to rock Allen so they own my",
    "start": "2650619",
    "end": "2655800"
  },
  {
    "text": "computer now in here you'll see that I set up some identity service identity",
    "start": "2655800",
    "end": "2661680"
  },
  {
    "text": "service services stuff so I say services dot add identity server I set up some",
    "start": "2661680",
    "end": "2667350"
  },
  {
    "text": "stuff about my identity server regarding errors and stuff and the issuer URI which is obviously supposed to be a URI",
    "start": "2667350",
    "end": "2672810"
  },
  {
    "text": "not that spring I in this case I just add a test user normally you'll have a",
    "start": "2672810",
    "end": "2678810"
  },
  {
    "text": "service that's backed by a database with all of your users and stuff so you can plug in your user store it's called add",
    "start": "2678810",
    "end": "2685740"
  },
  {
    "text": "test user for the simple reason that it's supposed to be for tests not for you using it in production and then it's",
    "start": "2685740",
    "end": "2691890"
  },
  {
    "text": "got things here like identity resources API resources so if you want to know more about resource management and IP I",
    "start": "2691890",
    "end": "2699540"
  },
  {
    "text": "resource and stuff talk broke but basically it's a way to say what can I use to request from this endpoint so",
    "start": "2699540",
    "end": "2705660"
  },
  {
    "text": "what can I ask and all of that is configured in this case in a JSON file",
    "start": "2705660",
    "end": "2711570"
  },
  {
    "text": "out here so out here we can find a bunch of other profile stuff the things that up so yes there's a bit of conflict",
    "start": "2711570",
    "end": "2716970"
  },
  {
    "text": "going on in here but in the big picture it's actually quite easy to set up nicely enough and I you need a key you",
    "start": "2716970",
    "end": "2727650"
  },
  {
    "text": "need a public private key to sign your tokens",
    "start": "2727650",
    "end": "2733010"
  },
  {
    "text": "if you don't want to sit around for dev purposes and just want to quickly get this started you can actually just call",
    "start": "2733010",
    "end": "2738230"
  },
  {
    "text": "ad developer signing credentials and it will generate credentials it will generate a certificate for you and store",
    "start": "2738230",
    "end": "2744530"
  },
  {
    "text": "it I've got mine here in your project and it will basically have a key for you",
    "start": "2744530",
    "end": "2750320"
  },
  {
    "text": "so it will sign and do everything properly with the developer level thing so you don't have to go and create case",
    "start": "2750320",
    "end": "2757070"
  },
  {
    "text": "and stuff just to get started so it's very easy to get started with and finally we just add identity server to",
    "start": "2757070",
    "end": "2763130"
  },
  {
    "text": "our request pipeline and we're done I have a fully working identity server and",
    "start": "2763130",
    "end": "2768430"
  },
  {
    "text": "I have a web here which is going to be a relying party so this thing is going to be the one that uses identity server to",
    "start": "2768430",
    "end": "2775310"
  },
  {
    "text": "authenticate users it looks fairly much like the application I've shown you so far which means it looks like crap it",
    "start": "2775310",
    "end": "2784760"
  },
  {
    "text": "has one little feature change and it has a spa so I have a single page application in here and calling it a spa",
    "start": "2784760",
    "end": "2792650"
  },
  {
    "text": "when it's about 15 lines of JavaScript my web page is probably overstating it a bit but it's it's there and if I go to",
    "start": "2792650",
    "end": "2799430"
  },
  {
    "text": "that it has a cool API method that calls a web api in my application so to sign",
    "start": "2799430",
    "end": "2806000"
  },
  {
    "text": "in the user we're back to doing what we've done before pretty much I open up my empty thing here we call services dot",
    "start": "2806000",
    "end": "2812720"
  },
  {
    "text": "add authentication to add authentication services we do add open ID connect",
    "start": "2812720",
    "end": "2819890"
  },
  {
    "text": "because we wanted to open how do you connect authentication because as I said identity server supports open ID Connect",
    "start": "2819890",
    "end": "2825560"
  },
  {
    "text": "which is a standard so you can just use the default open ID connect Handler and then we'll do ideas config and we set",
    "start": "2825560",
    "end": "2835160"
  },
  {
    "text": "some configuration parameters in here there are a couple of things I want to mention in here one is we need to set up",
    "start": "2835160",
    "end": "2843680"
  },
  {
    "text": "the client ID for example to be the same client ID that's configured in the identity server and all of that but the",
    "start": "2843680",
    "end": "2850490"
  },
  {
    "text": "main important thing to mention here is this I am for the sake of being a demo",
    "start": "2850490",
    "end": "2858249"
  },
  {
    "text": "hosting my identity provider without SSL encryption so it's on HTTP port 5000 I",
    "start": "2858249",
    "end": "2865470"
  },
  {
    "text": "have to manually go in and tell my configuration that I do not require",
    "start": "2865470",
    "end": "2871920"
  },
  {
    "text": "HTTPS by default it is gonna tell you that I'm not gonna go there because it's",
    "start": "2871920",
    "end": "2877479"
  },
  {
    "text": "not using HTTPS if any of you use and identity provided without HTTPS at any",
    "start": "2877479",
    "end": "2882910"
  },
  {
    "text": "point in your life I will hunt you down I will find you in your sleep and I will",
    "start": "2882910",
    "end": "2890140"
  },
  {
    "text": "Freddy Kreuger your ass to the point where you will never forget to do this again you do not at any point put",
    "start": "2890140",
    "end": "2897309"
  },
  {
    "text": "identity stuff online without SSL are we okay can we agree on that if there's one",
    "start": "2897309",
    "end": "2903579"
  },
  {
    "text": "thing you take away from this is that you don't do what I'm doing now which might be a bad thing to demo but it's it",
    "start": "2903579",
    "end": "2910450"
  },
  {
    "text": "it causes problems moving things around with an SSL cert for a demo on different",
    "start": "2910450",
    "end": "2916839"
  },
  {
    "text": "ports and stuff so I've left it like this but I do want to highlight don't do this the second part that I want to",
    "start": "2916839",
    "end": "2923019"
  },
  {
    "text": "mention that's interesting is save tokens if you don't set this to true what save tokens does is that it saves",
    "start": "2923019",
    "end": "2928719"
  },
  {
    "text": "the original issued token from the identity provider in a cookie if you",
    "start": "2928719",
    "end": "2934630"
  },
  {
    "text": "don't save that token which is the default the default is good because it means that you're not sending an extra",
    "start": "2934630",
    "end": "2940269"
  },
  {
    "text": "cookie back and forth with a bunch of information if you don't save it once you redirect the user to identity server",
    "start": "2940269",
    "end": "2946960"
  },
  {
    "text": "to sign out identity server won't actually redirect the user back to your application because it's gonna say I have no idea",
    "start": "2946960",
    "end": "2953739"
  },
  {
    "text": "who this user is I'm not going to allow him to be redirected somewhere that I don't know is safe so you need to turn",
    "start": "2953739",
    "end": "2959469"
  },
  {
    "text": "this on for automatic redirects to work and finally I hook this events thing up",
    "start": "2959469",
    "end": "2964630"
  },
  {
    "text": "here and say on remote failure redirect the user to slash if the user gets to",
    "start": "2964630",
    "end": "2970210"
  },
  {
    "text": "the sign-in page and decides to press cancel instead of okay and signing in the user actually comes back and gets an",
    "start": "2970210",
    "end": "2976779"
  },
  {
    "text": "on remote failure which gives you a yellow screen of death in your page if you don't handle it and I don't believe",
    "start": "2976779",
    "end": "2981999"
  },
  {
    "text": "that the user pressing cancel is actually a mistake so this thing just says if the user comes back",
    "start": "2981999",
    "end": "2988460"
  },
  {
    "text": "through a remote failure redirecting to the homepage again",
    "start": "2988460",
    "end": "2993400"
  },
  {
    "text": "and once again it's only authentication for actual keeping the user authenticated or user signed in I need",
    "start": "2993490",
    "end": "3000510"
  },
  {
    "text": "to add the cookie authentication to them I need to have cookie once again and I need to go up here and we need to say I",
    "start": "3000510",
    "end": "3009170"
  },
  {
    "text": "is once again I'm just telling it that for",
    "start": "3009170",
    "end": "3015770"
  },
  {
    "text": "every scenario except challenging the user to sign in use copy authentication",
    "start": "3015770",
    "end": "3022160"
  },
  {
    "text": "if the user needs to be challenged to sign in use the Open ID connect one I'm",
    "start": "3022160",
    "end": "3028010"
  },
  {
    "text": "just telling it what to use that's okay and once we got that we need to remember",
    "start": "3028010",
    "end": "3034160"
  },
  {
    "text": "this which I'm obviously about forget use authentication to get into the",
    "start": "3034160",
    "end": "3041180"
  },
  {
    "text": "request pipeline as you can see it's pretty repetitive no battery if we're using open I do connect or as your ad",
    "start": "3041180",
    "end": "3046490"
  },
  {
    "text": "b2c or Twitter or Facebook or local it's pretty much the same steps it's it's all a pretty nice API for that go to the",
    "start": "3046490",
    "end": "3054590"
  },
  {
    "start": "3053000",
    "end": "3245000"
  },
  {
    "text": "auth controller I need to do some stuff here well first of all",
    "start": "3054590",
    "end": "3060460"
  },
  {
    "text": "I need to challenge the user when you log in please just go ahead and log in",
    "start": "3061110",
    "end": "3066300"
  },
  {
    "text": "course a challenge to redirect user to user input when you've done to sign out",
    "start": "3066300",
    "end": "3072980"
  },
  {
    "text": "first sign up the user using the default authentication handler using here just sign out that's the cookie one and then",
    "start": "3074530",
    "end": "3081220"
  },
  {
    "text": "after that go ahead and sign out the user using Open ID connect as well",
    "start": "3081220",
    "end": "3086220"
  },
  {
    "text": "and we run this you",
    "start": "3086410",
    "end": "3093170"
  },
  {
    "text": "that's good so far slogan there is no registration in this demo there is no registration because",
    "start": "3095860",
    "end": "3102410"
  },
  {
    "text": "registering a user means making sure that the user gets registered in the",
    "start": "3102410",
    "end": "3107470"
  },
  {
    "text": "identity server and that's not part of my demo so once again I've out sourced all of my authentication needs to",
    "start": "3107470",
    "end": "3113780"
  },
  {
    "text": "identity server so if a user needs to register they will have to register on the identity server that's not a concern",
    "start": "3113780",
    "end": "3119060"
  },
  {
    "text": "of mine it's a concern of the identity server the identity provider so press login",
    "start": "3119060",
    "end": "3125950"
  },
  {
    "text": "but login I end up here look at that identity server before it is not the",
    "start": "3128790",
    "end": "3134220"
  },
  {
    "text": "most beautiful sign-in page I've ever seen I must admit blame broke or Dominic I don't know who is actually built it",
    "start": "3134220",
    "end": "3139830"
  },
  {
    "text": "this is only this is literally a a demo thing off their github account so I just",
    "start": "3139830",
    "end": "3145140"
  },
  {
    "text": "downloaded some demo stuff all of the UI stuff that you're seeing here with signing in and registering and all that",
    "start": "3145140",
    "end": "3150750"
  },
  {
    "text": "you might want to do as a UI part of identity server is you building completely on your own the only thing",
    "start": "3150750",
    "end": "3156330"
  },
  {
    "text": "that they're giving you is a starter kit which looks like this and then you can rewrite everything and it's all just",
    "start": "3156330",
    "end": "3161630"
  },
  {
    "text": "c-sharp code in MVC controllers and you can go in them and do your worst so I'm going to sign in here using zero",
    "start": "3161630",
    "end": "3168720"
  },
  {
    "text": "call and my magic short password and I come back here and I'm signed in and",
    "start": "3168720",
    "end": "3173880"
  },
  {
    "text": "everything is awesome right it is kind of awesome I have all my claims I have",
    "start": "3173880",
    "end": "3179490"
  },
  {
    "text": "the user I've issued everything that I need and I have my spouse if I go to my spa it's gonna look like this I call my",
    "start": "3179490",
    "end": "3185580"
  },
  {
    "text": "API my API response this is ID one my spa my my API endpoint is not fantastic",
    "start": "3185580",
    "end": "3192570"
  },
  {
    "text": "in any way but it works however do not use cookie authentication for your API",
    "start": "3192570",
    "end": "3200010"
  },
  {
    "text": "so there are issues with using cookie authentication with API ice core site request forgery and across out your",
    "start": "3200010",
    "end": "3206520"
  },
  {
    "text": "scripting and stuff like that causes problems so for API is we don't actually want to use to cook your authentication",
    "start": "3206520",
    "end": "3212970"
  },
  {
    "text": "we only want to use something called bearer token so we want to make sure that our JavaScript gets a token adds",
    "start": "3212970",
    "end": "3219270"
  },
  {
    "text": "that token to a header and explicitly send my authentication to the API and",
    "start": "3219270",
    "end": "3225180"
  },
  {
    "text": "the API authenticates that token in the header and not the cookie if we accept",
    "start": "3225180",
    "end": "3230610"
  },
  {
    "text": "the cookie anyone can force the user to go to an endpoint and that cookie will be sent but if we do it explicitly",
    "start": "3230610",
    "end": "3237120"
  },
  {
    "text": "through a header it becomes much more secure so just to demo how dangerous",
    "start": "3237120",
    "end": "3242700"
  },
  {
    "text": "that can be the demo I did now I can call it just using my cookie I've left my API inside of my same application if",
    "start": "3242700",
    "end": "3249210"
  },
  {
    "text": "you leave your app dad out and you put your API in a day on a different domain or a different sub domain you don't have",
    "start": "3249210",
    "end": "3256380"
  },
  {
    "text": "the problem because that's a your cookie won't be sent there so you'll be stuck in not being able to use cookies anyway",
    "start": "3256380",
    "end": "3262270"
  },
  {
    "text": "but I've left it in here so it still uses authorized it still tries the user but I want to make sure that this API",
    "start": "3262270",
    "end": "3268570"
  },
  {
    "text": "uses bearer tokens so I'm gonna go in here and besides my ad open ID",
    "start": "3268570",
    "end": "3274090"
  },
  {
    "text": "connecting here I'm gonna call ad JWT Bearer so I'm going to support bearer",
    "start": "3274090",
    "end": "3279730"
  },
  {
    "text": "tokens as well jason web tokens over Barrett bearer authorization header and",
    "start": "3279730",
    "end": "3285160"
  },
  {
    "text": "I'm going to configure that that was the wrong keyword combination I want to configure that using IDs",
    "start": "3285160",
    "end": "3294440"
  },
  {
    "text": "J that's the one once again I set up the authority who is going to be the person",
    "start": "3294440",
    "end": "3300200"
  },
  {
    "text": "who has issued that token that the user is going to be sending to me well that's localhost port 5000 and once again don't",
    "start": "3300200",
    "end": "3308390"
  },
  {
    "text": "you freaking go ahead and set that once again doing it for demo purposes and",
    "start": "3308390",
    "end": "3314450"
  },
  {
    "text": "then I'm saying that only audience only users that are allowed to access the API one API resource is allowed to access",
    "start": "3314450",
    "end": "3321950"
  },
  {
    "text": "this thing with that in place I can go back to my API controller in my authorized here I can actually go and",
    "start": "3321950",
    "end": "3329180"
  },
  {
    "text": "say authentication schemes and I can",
    "start": "3329180",
    "end": "3334849"
  },
  {
    "text": "tell it that dude for this thing I'm only going to allow authorization using",
    "start": "3334849",
    "end": "3340760"
  },
  {
    "text": "JSON web tokens and bearer tokens so by adding that I'm saying that anyone",
    "start": "3340760",
    "end": "3346039"
  },
  {
    "text": "coming to this endpoint I don't care if they've given me a cookie or if the",
    "start": "3346039",
    "end": "3351740"
  },
  {
    "text": "cookie middleware says it'll cook your handler says that I'm signed in unless they are specifically authenticating",
    "start": "3351740",
    "end": "3357349"
  },
  {
    "text": "using JSON web tokens I'm not gonna accepted",
    "start": "3357349",
    "end": "3362490"
  },
  {
    "text": "to get that to work I need to make one final change I need to go to my view home spa and to do that I'm going to",
    "start": "3362490",
    "end": "3370800"
  },
  {
    "text": "just activate a sign-in and sign-out button and I'm adding some code in here",
    "start": "3370800",
    "end": "3376650"
  },
  {
    "text": "using another one of Brock's libraries called a YDC client so oh I DC client is",
    "start": "3376650",
    "end": "3381690"
  },
  {
    "text": "a JavaScript client to handle authentication stuff so what I'm doing in here is basically when we come into",
    "start": "3381690",
    "end": "3387660"
  },
  {
    "text": "the page I check to see if the user is already signed in if that is the case then I activate some buttons when",
    "start": "3387660",
    "end": "3394230"
  },
  {
    "text": "signing in I tell the user manager from the OID C client library to sign in the user signing out I tell them to sign out",
    "start": "3394230",
    "end": "3402030"
  },
  {
    "text": "using the OID C client manager and calling the API says that if there is a",
    "start": "3402030",
    "end": "3407430"
  },
  {
    "text": "sign-in user at the moment add an authorization header and a bearer token",
    "start": "3407430",
    "end": "3413640"
  },
  {
    "text": "to my request and make my request to the web server I save that and I go out here",
    "start": "3413640",
    "end": "3420090"
  },
  {
    "text": "i refresh this and yes as I said all the code is available for you to download and play with excluding my secrets from",
    "start": "3420090",
    "end": "3427670"
  },
  {
    "text": "Twitter and Facebook which you will have in the recording if I call the API now",
    "start": "3427670",
    "end": "3433440"
  },
  {
    "text": "it's actually going to give me a 401 unauthorized because even though I am signed in if i refresh this page you'll",
    "start": "3433440",
    "end": "3439920"
  },
  {
    "text": "see that I am signed in with my cookie but the API is still saying you suck you're not signed in so I'm Lee just",
    "start": "3439920",
    "end": "3448070"
  },
  {
    "text": "explicitly say sign in which pops up a window that window shows me a sign-in",
    "start": "3448070",
    "end": "3453780"
  },
  {
    "text": "page on the identity server but I'm already signed in so identity server",
    "start": "3453780",
    "end": "3458880"
  },
  {
    "text": "just closest touch page for me and sign me in we can do this in a safe way",
    "start": "3458880",
    "end": "3464840"
  },
  {
    "text": "silently as well so we can actually ask open I do ID C client ojs to say can you",
    "start": "3464840",
    "end": "3470609"
  },
  {
    "text": "go and see if the user is already signed in and give me a user and it will do it in a hidden iframe instead which is",
    "start": "3470609",
    "end": "3477060"
  },
  {
    "text": "quite nice so the user doesn't have to click login and all of that we can do it silently then I call the call API it now",
    "start": "3477060",
    "end": "3483720"
  },
  {
    "text": "sends my access token in the authorization header to the server the server authenticates that sees that I'm",
    "start": "3483720",
    "end": "3490200"
  },
  {
    "text": "worth indicating allows me to call it and if I sign out my cookie gets removed",
    "start": "3490200",
    "end": "3496660"
  },
  {
    "text": "but I can still go to the spa and dispersed Elsa's still says that I'm signed in and if I call this my",
    "start": "3496660",
    "end": "3503360"
  },
  {
    "text": "authorization cookie my authorization header is still being sent so I can still go ahead and call it using a",
    "start": "3503360",
    "end": "3508940"
  },
  {
    "text": "bearer token you",
    "start": "3508940",
    "end": "3514130"
  },
  {
    "text": "that was pretty much all of my demos I've got two minutes if you have any questions",
    "start": "3514460",
    "end": "3521410"
  },
  {
    "text": "not a single question I know there's a lot to take in I would suggest going and",
    "start": "3521500",
    "end": "3526720"
  },
  {
    "text": "having a look at the code and playing around with it all you need to get to do to get all of these things working in",
    "start": "3526720",
    "end": "3532930"
  },
  {
    "text": "the demo that you can download there is to go to Facebook and Twitter register an app and get the user a big key and",
    "start": "3532930",
    "end": "3539260"
  },
  {
    "text": "the am app ID and add those into the code and all of my demos are pre-built and you can just play around and see how",
    "start": "3539260",
    "end": "3545619"
  },
  {
    "text": "it redirects and play around with it and I said if there's anything else you have the poor side Court as well other than",
    "start": "3545619",
    "end": "3551500"
  },
  {
    "text": "that thank you so much for listening feel free to come up and grab me if you have any question inside an hour",
    "start": "3551500",
    "end": "3556690"
  },
  {
    "text": "throughout the conference I will be run the entire time [Applause]",
    "start": "3556690",
    "end": "3565699"
  }
]