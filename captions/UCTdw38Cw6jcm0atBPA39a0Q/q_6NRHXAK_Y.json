[
  {
    "text": "uh so welcome everyone um i hope you're having a great day and i'm going to be talking about",
    "start": "2879",
    "end": "8880"
  },
  {
    "text": "asp.net core and i'm calling it beyond the introduction because",
    "start": "8880",
    "end": "14240"
  },
  {
    "text": "i want to show you some of the things that they don't show you in the let's get started with asp.net core sessions",
    "start": "14240",
    "end": "20720"
  },
  {
    "text": "uh there's gonna be a little bit of high and a little bit of low stuff there's gonna be some things that you might have seen before and i can pretty much",
    "start": "20720",
    "end": "27680"
  },
  {
    "text": "guarantee you i will show you something you have never seen in a core at the end of the session so",
    "start": "27680",
    "end": "33680"
  },
  {
    "text": "let's just see what we can do my name is",
    "start": "33680",
    "end": "38960"
  },
  {
    "text": "my name is chris klogg i work for a company called active solution in stockholm i go around the world talking at",
    "start": "38960",
    "end": "45280"
  },
  {
    "text": "conferences when i'm not paid to do software development development and architecturing um for different",
    "start": "45280",
    "end": "51440"
  },
  {
    "text": "companies so i have a consultancy background also i've got some mvp stuffy thingies i've i've seen",
    "start": "51440",
    "end": "57360"
  },
  {
    "text": "asp.net core being developed internally a little bit more than most people which is interesting",
    "start": "57360",
    "end": "62559"
  },
  {
    "text": "but that's all the slides i have for you so i'm going to try for about 59 minutes",
    "start": "62559",
    "end": "69040"
  },
  {
    "text": "code in front of you live on a stage built for a tiny oompa loompa",
    "start": "69040",
    "end": "74080"
  },
  {
    "text": "but i'll do my best i can't see anything because of the lights and i can't see my keyboard because i have to stand like",
    "start": "74080",
    "end": "80080"
  },
  {
    "text": "this but i'll do my best sorry about that but hopefully there are no other technical issues so i've built this",
    "start": "80080",
    "end": "86880"
  },
  {
    "text": "website it is beautiful it shows off my talent as a designer",
    "start": "86880",
    "end": "92240"
  },
  {
    "text": "once upon a time i was firstly an art director i went into coding",
    "start": "92240",
    "end": "98240"
  },
  {
    "text": "so what i've got in here is a little website you can click on view details so you can come in you can see information about hidden lamar um",
    "start": "98960",
    "end": "105600"
  },
  {
    "text": "so one of the things i don't like about this website it's a it's a plain old aspect that the asp.net core website",
    "start": "105600",
    "end": "111759"
  },
  {
    "text": "standard nothing changed impressive at all and one thing i don't like about this is my urls up here right so i don't",
    "start": "111759",
    "end": "117759"
  },
  {
    "text": "know if you see it in the back but it says slash users one not the greatest urls if you want to do",
    "start": "117759",
    "end": "123759"
  },
  {
    "text": "search engine optimization not the greatest url in general it's just not great so i want to fix that",
    "start": "123759",
    "end": "129679"
  },
  {
    "text": "and i want to do that using something that some of you might have seen some of you haven't because a lot of people get",
    "start": "129679",
    "end": "135360"
  },
  {
    "text": "started with a core and they they look at the startup thing and it's like yeah in this configure method here we call",
    "start": "135360",
    "end": "141520"
  },
  {
    "text": "can the people in the back say that by the way i can increase the fund a bit",
    "start": "141520",
    "end": "146959"
  },
  {
    "text": "so how how old are you let's see if i can find a con apparently couldn't couldn't do plus",
    "start": "146959",
    "end": "153920"
  },
  {
    "text": "let's do is is that old enough sweet i'm just kidding obviously i'm probably",
    "start": "153920",
    "end": "159680"
  },
  {
    "text": "older than you so mostly you go in here you go that configure thing you call app dot and",
    "start": "159680",
    "end": "166160"
  },
  {
    "text": "then use something something and then magic happens most people don't think too much about what happens inside here",
    "start": "166160",
    "end": "171760"
  },
  {
    "text": "but it's actually a pretty cool pipeline in here where we can go in and do things on our own so we could for example go in",
    "start": "171760",
    "end": "177760"
  },
  {
    "text": "here when wanting to fix the thing that i want to fix and add a little i've got some snippets here because i don't want to code in",
    "start": "177760",
    "end": "183200"
  },
  {
    "text": "front of you so i'm just going to pull in and i have an injection of eye users",
    "start": "183200",
    "end": "190560"
  },
  {
    "text": "repository like that so the configure method is is fully dependency injectable so that's fine so",
    "start": "190560",
    "end": "197519"
  },
  {
    "text": "what i do here is that i do an app use and i give it a a callback and that's basically an inline thing",
    "start": "197519",
    "end": "203840"
  },
  {
    "text": "that's going to run after it it looks for static files but before it does request routing and all",
    "start": "203840",
    "end": "209920"
  },
  {
    "text": "i'm doing in here is i go in and i look at the path and i take the path making sure that it's longer than just one",
    "start": "209920",
    "end": "215120"
  },
  {
    "text": "which is slash making sure that it's not more than one flash so it's basically something that's it and then",
    "start": "215120",
    "end": "222720"
  },
  {
    "text": "if that's the case i look into the user's repo figuring out if there's a user with that name based on the path so",
    "start": "222720",
    "end": "229040"
  },
  {
    "text": "that path remove the dash with the space instead if i find the user",
    "start": "229040",
    "end": "234720"
  },
  {
    "text": "i actually change and this is the important part here context.request.path equals so the http",
    "start": "234720",
    "end": "241280"
  },
  {
    "text": "context in aspect core is read write it's not read only like it used to be so we can go ahead and change it",
    "start": "241280",
    "end": "247519"
  },
  {
    "text": "so i can actually go in i can change the path to slash user slash user id so if i go and do slash heady dash lamar",
    "start": "247519",
    "end": "255840"
  },
  {
    "text": "up until that middleware is going to be slash headlamar but after that it's going to be slash user slash one and",
    "start": "255840",
    "end": "261919"
  },
  {
    "text": "then it just carries on with await next and then on the way back out again i'm changing the path back if there's any",
    "start": "261919",
    "end": "267919"
  },
  {
    "text": "other pipeline thing before me that wants the the original path with that in place",
    "start": "267919",
    "end": "274240"
  },
  {
    "text": "we should be able to we should be able to hear this",
    "start": "274240",
    "end": "281000"
  },
  {
    "text": "go heady lamar and i get to this instead so i've got",
    "start": "282240",
    "end": "288000"
  },
  {
    "text": "now the ability to do changes to my urls and it's the actual functionality of url rewrites not very important it's",
    "start": "288000",
    "end": "294720"
  },
  {
    "text": "actually quite performance intensive to do what i'm doing so resource intensive might not be useful but i wanted to show",
    "start": "294720",
    "end": "301360"
  },
  {
    "text": "this idea that we can plug into the pipeline in these really rudimentary low-level ways and do stuff that we",
    "start": "301360",
    "end": "307520"
  },
  {
    "text": "couldn't do before because it being read writes so if anybody wants to listen to event",
    "start": "307520",
    "end": "312960"
  },
  {
    "text": "sourcing my company has a presentation on that right now so but it doesn't generally look like",
    "start": "312960",
    "end": "318880"
  },
  {
    "text": "this right if you start writing your middlewares like this your startup method is going to grow and just be this",
    "start": "318880",
    "end": "324400"
  },
  {
    "text": "massive thousands of lines long thing and whenever you have a method that is thousands of lines long",
    "start": "324400",
    "end": "330320"
  },
  {
    "text": "you need to use regions no sorry you need to refactor right so what we can do here if i can",
    "start": "330320",
    "end": "337199"
  },
  {
    "text": "come up here and say new add there it is",
    "start": "337199",
    "end": "342960"
  },
  {
    "text": "folder there it is i'm just going to go middlewares and in the middlewares folder i'm going",
    "start": "342960",
    "end": "349120"
  },
  {
    "text": "to add a new middleware and in the middle where it's just a class right so i'm going to create a class in here and i'm going to call it",
    "start": "349120",
    "end": "355360"
  },
  {
    "text": "name name routing middleware",
    "start": "355360",
    "end": "360800"
  },
  {
    "text": "was that's that didn't spell right where like that so i created this class name right in middleware and then i replace it",
    "start": "360800",
    "end": "368960"
  },
  {
    "text": "always work with code you have snippets for don't take on projects where you don't have predefined snippets just",
    "start": "368960",
    "end": "374240"
  },
  {
    "text": "sucks so a middleware is just a class doesn't need to inherit from any interface in",
    "start": "374240",
    "end": "379840"
  },
  {
    "text": "higher from a base class or sorry implement any interfaces or inherit from your base classes all it needs is a",
    "start": "379840",
    "end": "385680"
  },
  {
    "text": "constructor that takes a request delegate which is a reference to the next middleware in the pipeline and an",
    "start": "385680",
    "end": "391199"
  },
  {
    "text": "async or it's public task invoke a sync method that takes an hp context that's",
    "start": "391199",
    "end": "396479"
  },
  {
    "text": "it and it is fully dependence injected so we can do our users here",
    "start": "396479",
    "end": "402960"
  },
  {
    "text": "and add our users like that after that we can go out here we can take this piece of code here",
    "start": "402960",
    "end": "411680"
  },
  {
    "text": "put that in the invoke async and replace the next call with one that passes on the",
    "start": "411759",
    "end": "417680"
  },
  {
    "text": "context once we have that we can go ahead and change this into",
    "start": "417680",
    "end": "423280"
  },
  {
    "text": "use middleware and say name routing middleware like",
    "start": "423280",
    "end": "429120"
  },
  {
    "text": "that and we're good slightly better removes a lot of lines",
    "start": "429120",
    "end": "435440"
  },
  {
    "text": "of code still doesn't look quite as good as use routing right it should just be used name routing so",
    "start": "435440",
    "end": "441599"
  },
  {
    "text": "easy fix we just go create another class i'm going to add another class in here i'm going to call it",
    "start": "441599",
    "end": "447680"
  },
  {
    "text": "middleware i can't spell middleware extensions",
    "start": "447680",
    "end": "455400"
  },
  {
    "text": "i'm going to blame my poor typing for being non-native not a native english speaker not that it matters but like",
    "start": "455440",
    "end": "461919"
  },
  {
    "text": "i'm gonna blame that static making it static adding a another little thing in here",
    "start": "461919",
    "end": "468240"
  },
  {
    "text": "so i'm creating this extension method called username routing very fine what most people do in here is they go to",
    "start": "468240",
    "end": "474080"
  },
  {
    "text": "this thing here and they go say hey add using statement you're good to go don't",
    "start": "474080",
    "end": "479280"
  },
  {
    "text": "go up here and change this to microsoft dot asp.net core dot builder",
    "start": "479280",
    "end": "487919"
  },
  {
    "text": "and add a using statement to this thing here instead when you go back out here",
    "start": "487919",
    "end": "494400"
  },
  {
    "text": "and you go and you go app.use name routing that's always going to pop",
    "start": "494400",
    "end": "501520"
  },
  {
    "text": "up because microsoft asp.net core builder net interface sorry namespace is",
    "start": "501520",
    "end": "507919"
  },
  {
    "text": "always going to be included in your startup file because it's part of the store file so by adding it to the same",
    "start": "507919",
    "end": "513200"
  },
  {
    "text": "namespace you always get when you go app.use and everything will pop up otherwise you need to go",
    "start": "513200",
    "end": "519560"
  },
  {
    "text": "namewritingmiddleware it's not there ctrl dot include namespace blah blah blah much easier to do like this",
    "start": "519560",
    "end": "527839"
  },
  {
    "text": "so that's kind of cool there's one problem with this that is uh it still works right so if we",
    "start": "527839",
    "end": "535040"
  },
  {
    "text": "can go to uh slash gracehopper that works what i don't like",
    "start": "535040",
    "end": "540800"
  },
  {
    "text": "in my application now and now i'm going to show you something that you you you really really really shouldn't be doing",
    "start": "540800",
    "end": "547200"
  },
  {
    "text": "in any way or form but i want to show it as you can do other things with it that might be useful what i am specifically",
    "start": "547200",
    "end": "553839"
  },
  {
    "text": "doing is bad but what i've got here is those urls can't really see it but they",
    "start": "553839",
    "end": "559680"
  },
  {
    "text": "still point to slash user slash one what if i could rewrite all of those",
    "start": "559680",
    "end": "565040"
  },
  {
    "text": "urls dynamically just make them be what they should be",
    "start": "565040",
    "end": "570240"
  },
  {
    "text": "sweet not that hard we just go back to our trusty old startup class we go in",
    "start": "570240",
    "end": "575680"
  },
  {
    "text": "here and we say bti we add another middleware",
    "start": "575680",
    "end": "581200"
  },
  {
    "text": "and this is one of those interesting ones that people also miss is that",
    "start": "581200",
    "end": "586279"
  },
  {
    "text": "response.body is defined as a stream and it's writable it has get set",
    "start": "586279",
    "end": "592480"
  },
  {
    "text": "so i can take the the body stream and store that in a variable and replace it",
    "start": "592480",
    "end": "597600"
  },
  {
    "text": "with a memory stream so it means that anybody down the line from this goes body dot writes is going",
    "start": "597600",
    "end": "604160"
  },
  {
    "text": "to write to my memory stream nothing is going to be returned to the user it's going into my memory stream i've hijacked the whole thing",
    "start": "604160",
    "end": "610480"
  },
  {
    "text": "sweet with that in place we can go and we can replace this part",
    "start": "610480",
    "end": "616720"
  },
  {
    "text": "with another little blog thing here and this is ugly this is why i'm saying don't do this because what i'm doing is",
    "start": "616720",
    "end": "622959"
  },
  {
    "text": "is really really really ugly really really poor performance but what i will show is that it's quite easy to do",
    "start": "622959",
    "end": "630560"
  },
  {
    "text": "so what i do is i i replace the mem the stream i call the rest of the pipeline and have",
    "start": "630560",
    "end": "636000"
  },
  {
    "text": "the rest of the pipeline right to my memory stream then it comes back and i take my memory stream and i turn it into a string i run",
    "start": "636000",
    "end": "643040"
  },
  {
    "text": "a regex because you obviously want to run regex over every single thing that comes out of your application",
    "start": "643040",
    "end": "650880"
  },
  {
    "text": "to make it even better you take the respond returned regex all the places",
    "start": "651360",
    "end": "656640"
  },
  {
    "text": "where it finds the regex you do a for loop of that or for each loop and then",
    "start": "656640",
    "end": "661920"
  },
  {
    "text": "for each one of them actually sorry this one is a bit simpler this this just replaced no sorry sorry",
    "start": "661920",
    "end": "668079"
  },
  {
    "text": "it does say users all pulls out all the users then figures out all the users based on whatever the regex is and and",
    "start": "668079",
    "end": "675040"
  },
  {
    "text": "replaces the things in the string and then writes the string out instead so this is this is nice because it means",
    "start": "675040",
    "end": "681440"
  },
  {
    "text": "that if i run this these urls out here are now updated to",
    "start": "681440",
    "end": "687360"
  },
  {
    "text": "go to slash head lmr with a massive performance hit",
    "start": "687360",
    "end": "693600"
  },
  {
    "text": "having that said in ashu you just pulled this slider says more instances and you're good to go",
    "start": "693600",
    "end": "699600"
  },
  {
    "text": "completely fine no so it is obviously a performance problem so i'll fix that for you in another ugly fix i'm saying ugly i'm",
    "start": "699600",
    "end": "706320"
  },
  {
    "text": "just once again i'm saying you shouldn't do it and that's really i mean that but i and people might go why is that idiot on",
    "start": "706320",
    "end": "713760"
  },
  {
    "text": "stage saying showing us things while he's saying don't do this it's because what i'm saying is don't",
    "start": "713760",
    "end": "719279"
  },
  {
    "text": "specifically do this because it's dumb but the ability to replace the memory stream or replace the stream might be",
    "start": "719279",
    "end": "726480"
  },
  {
    "text": "useful for other things than stupid regular expressions and and loops inside of it i'm just",
    "start": "726480",
    "end": "732000"
  },
  {
    "text": "potentially so what i'm going to do is to to make this a little bit better i'm going to",
    "start": "732000",
    "end": "737600"
  },
  {
    "text": "add a i distributed cache in here so that i distributed",
    "start": "737600",
    "end": "743200"
  },
  {
    "text": "cache is an interface that's always available in asnet core and the default implementation is of i distributed cache",
    "start": "743200",
    "end": "749760"
  },
  {
    "text": "is immemory cache or sorry memory cache which basically means it's not distributed at all",
    "start": "749760",
    "end": "755519"
  },
  {
    "text": "the name is in there but it has nothing to do with distributed it's it's an in-memory thing in your machine but you",
    "start": "755519",
    "end": "760560"
  },
  {
    "text": "can replace it with something that's distributed so what i'm going to do is i'm going to go in here",
    "start": "760560",
    "end": "766480"
  },
  {
    "text": "i'm going to add this so i'm going to do and i'm going to look into my cache to see is there anything",
    "start": "766480",
    "end": "773760"
  },
  {
    "text": "that's cached with this path if there is i return that otherwise i carry on and i let the rest of the",
    "start": "773760",
    "end": "779360"
  },
  {
    "text": "pipeline do its work and when it comes back if there is an item in the hp context item collection that's called",
    "start": "779360",
    "end": "785839"
  },
  {
    "text": "add to cache i'm going to cache that byte array on coming back and then i can go down here and in here",
    "start": "785839",
    "end": "792320"
  },
  {
    "text": "we can say ctx dot item",
    "start": "792320",
    "end": "798480"
  },
  {
    "text": "dot items and not that kind of braces like that add to cache",
    "start": "798480",
    "end": "806800"
  },
  {
    "text": "equals bytes like that and then we can add a",
    "start": "806800",
    "end": "815200"
  },
  {
    "text": "add a breakpoint say there press f5 run this",
    "start": "815200",
    "end": "822639"
  },
  {
    "text": "it comes in here obviously run that again refresh this page",
    "start": "827279",
    "end": "833120"
  },
  {
    "text": "and it refreshes because i now have a cache in front of it once again stupid stupid stupid cache but easily explains",
    "start": "833120",
    "end": "840480"
  },
  {
    "text": "that we can do really cool things in line so one of the first things i looked at asp.net core and i was like how did they",
    "start": "840480",
    "end": "845839"
  },
  {
    "text": "implement that you know the use developer exceptions thing where it gives you an exception page that i'm",
    "start": "845839",
    "end": "851760"
  },
  {
    "text": "like how do they manage to do exception handling all the way through the pipeline and just magically catches",
    "start": "851760",
    "end": "857040"
  },
  {
    "text": "everything very very simple what they do is you add a thing in here you basically",
    "start": "857040",
    "end": "862880"
  },
  {
    "text": "add a a middleware and you do a try catch around that call and in the catch you return what you want to do and it",
    "start": "862880",
    "end": "868480"
  },
  {
    "text": "basically catches any exception being done downstream very very simple so don't get away from",
    "start": "868480",
    "end": "874079"
  },
  {
    "text": "don't underestimate the abilities of doing your own middleware so you can do a lot of really cool stuff",
    "start": "874079",
    "end": "881040"
  },
  {
    "text": "um the next thing i want to show you is around apis right because i've built this awesome system",
    "start": "881040",
    "end": "886560"
  },
  {
    "text": "every awesome system needs to be api available right so my little website with three people in it they need an api",
    "start": "886560",
    "end": "893519"
  },
  {
    "text": "so i have this api here where i can run and i might be able to assume this as well look at that",
    "start": "893519",
    "end": "898639"
  },
  {
    "text": "and i can send requests to api slash user slash one and i get hedy lamar but",
    "start": "898639",
    "end": "904480"
  },
  {
    "text": "in json and for those of you who were at hardy's talk previously xml is the business",
    "start": "904480",
    "end": "910160"
  },
  {
    "text": "right we should all be doing xml instead so to do xml i don't think that was what he said but i'm paraphrasing",
    "start": "910160",
    "end": "917199"
  },
  {
    "text": "we should be able to pass in accept text html and press send and it should come back as",
    "start": "917199",
    "end": "923839"
  },
  {
    "text": "xml it doesn't it used to in asp.net before it did in asmet core not so much",
    "start": "923839",
    "end": "930399"
  },
  {
    "text": "that is because they've they don't add that ability to by default so what we can do is we can go up here and we can",
    "start": "930399",
    "end": "936160"
  },
  {
    "text": "say options and then we do options dot output",
    "start": "936160",
    "end": "941759"
  },
  {
    "text": "formatters dot add and i'm gonna spell this horribly wrong in this weird",
    "start": "941759",
    "end": "947199"
  },
  {
    "text": "position that i am new xml serializer output",
    "start": "947199",
    "end": "952839"
  },
  {
    "text": "formatter didn't come out quite right but i think it's going to fix it",
    "start": "952839",
    "end": "958000"
  },
  {
    "text": "that didn't no no no i it did not fix it xml serializer output format or there it",
    "start": "958000",
    "end": "965600"
  },
  {
    "text": "is it's scary when you go oh yes control dot enter it probably fixes it no no no",
    "start": "965600",
    "end": "971680"
  },
  {
    "text": "no no that was not the fix that i wanted so by adding that and building this we should be able to go out here and",
    "start": "971680",
    "end": "977519"
  },
  {
    "text": "send this in here and it comes back as xml sweet not a big thing but",
    "start": "977519",
    "end": "984560"
  },
  {
    "text": "i i like building apis i i build a lot of apis it's kind of most of my work is building apis and one thing i kind of",
    "start": "984560",
    "end": "992320"
  },
  {
    "text": "like is the ability to return different types of resources and a lot of people don't read rest and don't figure out",
    "start": "992320",
    "end": "998079"
  },
  {
    "text": "that except header is there for multiple things we could have things like with the accept header if you ever ask",
    "start": "998079",
    "end": "1004160"
  },
  {
    "text": "for an image your browser will automatically add an accept header that's image star and basically says at",
    "start": "1004160",
    "end": "1009920"
  },
  {
    "text": "this resource i want you to return an image and then the web browser will figure out what to return",
    "start": "1009920",
    "end": "1015199"
  },
  {
    "text": "the thing here is that we can use that to our advantage not just for images and for html json and xml we can actually",
    "start": "1015199",
    "end": "1023199"
  },
  {
    "text": "have the endpoint return different things in different with different accept headers so we can use this for versioning for",
    "start": "1023199",
    "end": "1029678"
  },
  {
    "text": "example so in my case i want to show you this so i'm going to go into my controllers",
    "start": "1029679",
    "end": "1036240"
  },
  {
    "text": "api i have this very simple usage controller here and what i want to do is i have this user object uh which is it",
    "start": "1036240",
    "end": "1042959"
  },
  {
    "text": "does contain a few properties right i want to have a basic version of that i want to have a smaller version of that that can",
    "start": "1042959",
    "end": "1048480"
  },
  {
    "text": "be returned so i don't need to get all of that information about my user so i'm going to go and i'm going to add another",
    "start": "1048480",
    "end": "1054559"
  },
  {
    "text": "folder in here i'm going to go and add another folder in here come on there it is new folder",
    "start": "1054559",
    "end": "1060000"
  },
  {
    "text": "models but chris you can't put the models folder in the control yes i can shut up",
    "start": "1060000",
    "end": "1067039"
  },
  {
    "text": "um then we go add new item a new class i'm going to call it a basic user",
    "start": "1067039",
    "end": "1073600"
  },
  {
    "text": "i'm going to replace that with that so it's just a simple class and all",
    "start": "1074000",
    "end": "1080400"
  },
  {
    "text": "it really does it filters away some of the properties and it reduces the number of properties to just id first name last",
    "start": "1080400",
    "end": "1086080"
  },
  {
    "text": "name um once i have that i'm going back to my usage controller and down here i'm going",
    "start": "1086080",
    "end": "1091120"
  },
  {
    "text": "to go ahead and i'm going to add a an action called get basic user",
    "start": "1091120",
    "end": "1097120"
  },
  {
    "text": "and all it really does it pulls out the user by with with id user id and then it it returns a basic user so it returns",
    "start": "1097120",
    "end": "1104720"
  },
  {
    "text": "less information just removing some stuff and you look at this and you go chris that's not going to work and i go nope",
    "start": "1104720",
    "end": "1111280"
  },
  {
    "text": "that's very true it's not going to work because if i run this it's going to give me a http 500 and it's going to say you suck",
    "start": "1111280",
    "end": "1117600"
  },
  {
    "text": "server error there are two endpoints that can respond to slash user id",
    "start": "1117600",
    "end": "1123520"
  },
  {
    "text": "it's true and what i want to do one thing we often do in in rest apis is we",
    "start": "1123520",
    "end": "1128640"
  },
  {
    "text": "have this idea of being able to pass in and the standard is generally application slash vnd dot something so",
    "start": "1128640",
    "end": "1135280"
  },
  {
    "text": "it's an application specific resource type it's vendor based and it's a user in this case it should probably have",
    "start": "1135280",
    "end": "1140960"
  },
  {
    "text": "been vnd.basic user but who cares i chose that so what i want to do is i want to take",
    "start": "1140960",
    "end": "1146720"
  },
  {
    "text": "care of that and make sure that that thing causes this task this action to be run not the other thing",
    "start": "1146720",
    "end": "1153200"
  },
  {
    "text": "that's easy to do which is quite fun because all you have to do",
    "start": "1153200",
    "end": "1158240"
  },
  {
    "text": "is go ahead i went a bit too far in my notes go ahead and add another folder in here once again you don't need to add a",
    "start": "1158240",
    "end": "1164720"
  },
  {
    "text": "folder you can put stuff wherever you want but infrastructure",
    "start": "1164720",
    "end": "1171880"
  },
  {
    "text": "straw i'm getting i'm getting too old for this structure that didn't come out right did it struck",
    "start": "1172480",
    "end": "1180000"
  },
  {
    "text": "whole room listening to a guy not being able to type sorry",
    "start": "1180559",
    "end": "1185840"
  },
  {
    "text": "class new class ex accept header attribute",
    "start": "1185840",
    "end": "1193600"
  },
  {
    "text": "like that replace that with an implementation that looks like this so i'm creating a class here called",
    "start": "1193600",
    "end": "1199280"
  },
  {
    "text": "accept header attribute inherits from attribute so it's an attribute the does the name and i implement i action",
    "start": "1199280",
    "end": "1205679"
  },
  {
    "text": "constraint i action constraint defines two things it defines a method called accept that",
    "start": "1205679",
    "end": "1211120"
  },
  {
    "text": "returns a boolean and takes an action constraint context and it takes an order order i don't really care about it's",
    "start": "1211120",
    "end": "1217280"
  },
  {
    "text": "it's the way that it evaluates actions if there are multiple of them and so on but what the accept does it says that if",
    "start": "1217280",
    "end": "1223440"
  },
  {
    "text": "it returns true it means that this action can can run based on the context if it returns false this action is not",
    "start": "1223440",
    "end": "1230159"
  },
  {
    "text": "valid for the current context so in here i just go and i look at hp context request the headers and i say is there",
    "start": "1230159",
    "end": "1236080"
  },
  {
    "text": "an accept header that starts with whatever i passed into the constructor",
    "start": "1236080",
    "end": "1241600"
  },
  {
    "text": "okay if i take that go back to my user controller go in and i say accept",
    "start": "1241600",
    "end": "1248320"
  },
  {
    "text": "header like that",
    "start": "1248320",
    "end": "1255039"
  },
  {
    "text": "so you can remove the attribute part when it's an attribute so you just go accept header and you give it an acceptation",
    "start": "1255039",
    "end": "1260799"
  },
  {
    "text": "it's going to be application slash vnd.user like that",
    "start": "1260799",
    "end": "1267840"
  },
  {
    "text": "go back out here run this again",
    "start": "1267840",
    "end": "1271520"
  },
  {
    "text": "and we restart the server still haven't figured out when i need to restart the server so i'm going to do this 16 times",
    "start": "1272880",
    "end": "1279440"
  },
  {
    "text": "during the presentation it's going to respond cannot contact server it's fine it's just me being done so run that",
    "start": "1279440",
    "end": "1284799"
  },
  {
    "text": "always under return smaller so i can now go ahead and say i want it in json",
    "start": "1284799",
    "end": "1290960"
  },
  {
    "text": "i want it in xml i want it in a smaller version",
    "start": "1290960",
    "end": "1296480"
  },
  {
    "text": "but what if i want it in a smaller version in xml i'm a very demanding person i know so",
    "start": "1296480",
    "end": "1302080"
  },
  {
    "text": "what we normally do in rest cases is we do application v vnd.user plus xml so",
    "start": "1302080",
    "end": "1308240"
  },
  {
    "text": "plus whatever thing we need so xml plus json whatever once again we can fix this it's not even",
    "start": "1308240",
    "end": "1314000"
  },
  {
    "text": "that complicated what we do is we go back into our infrastructure folder we add a new class",
    "start": "1314000",
    "end": "1319919"
  },
  {
    "text": "in here the class is going to be called i'm going to misspell this as well accept header output",
    "start": "1319919",
    "end": "1326720"
  },
  {
    "text": "formatter form wrapper formatter",
    "start": "1326720",
    "end": "1332760"
  },
  {
    "text": "output format so like that looks one single typo in all of that",
    "start": "1334720",
    "end": "1339919"
  },
  {
    "text": "so the implementation for that is it's an it inherits from output formatter selector the output format selected in",
    "start": "1339919",
    "end": "1347280"
  },
  {
    "text": "my case is going to it has a method or sorry it has to that it overrides a select formatter and all it really does",
    "start": "1347280",
    "end": "1352480"
  },
  {
    "text": "it tells this the system uses it to figure out which formatter should i use should i how should i format this on the",
    "start": "1352480",
    "end": "1358720"
  },
  {
    "text": "way back and i'm going to go ahead and i'm going to add a constructor in here because i need some",
    "start": "1358720",
    "end": "1364400"
  },
  {
    "text": "some parameters so i need the mvc options thing which is actually if we are sort of picky it's it's that options you",
    "start": "1364400",
    "end": "1371360"
  },
  {
    "text": "do out here so when you configure that options thing there that is what you're going to get if you ever request eye options of mvc options",
    "start": "1371360",
    "end": "1377840"
  },
  {
    "text": "then i get a logger factory i create a default output formatter selector as a fallback so basically",
    "start": "1377840",
    "end": "1383760"
  },
  {
    "text": "that's the one that the people in redmond gives us it's the default one so i'm going to use that as a fallback if i can't figure out how to",
    "start": "1383760",
    "end": "1390240"
  },
  {
    "text": "do it then hey you fix it and then i'm going to have a list of four matters that's available in the",
    "start": "1390240",
    "end": "1396640"
  },
  {
    "text": "system and then in my select format or select formatter i'm going to do an",
    "start": "1396640",
    "end": "1402240"
  },
  {
    "text": "implementation that looks like this so first of all it checks to see if the accept there is an except header that",
    "start": "1402240",
    "end": "1408000"
  },
  {
    "text": "starts with application vnd dot if not ask the default back selector i don't",
    "start": "1408000",
    "end": "1413600"
  },
  {
    "text": "really care because i only care about that specific for except header and then it checks for some formatters",
    "start": "1413600",
    "end": "1420000"
  },
  {
    "text": "and then it calls get content type from accept header i'll explain to you what that is and if we go in here",
    "start": "1420000",
    "end": "1428080"
  },
  {
    "text": "so what this thing does it looks at the accept header and it gets the first response of the accept header",
    "start": "1428240",
    "end": "1434320"
  },
  {
    "text": "and then it it looks for a plus sign if there's a plus sign in there it takes anything on the right hand side of the",
    "start": "1434320",
    "end": "1440320"
  },
  {
    "text": "plus character and then it takes that value and uses this content type map here to say if",
    "start": "1440320",
    "end": "1446080"
  },
  {
    "text": "somebody passed in that then it should be application json if it's xml it should be text xml",
    "start": "1446080",
    "end": "1451440"
  },
  {
    "text": "so what i do in here is i i take the content type and i replace it with the like the real pro content type so xml",
    "start": "1451440",
    "end": "1458559"
  },
  {
    "text": "becomes applications like xml becomes text.xml then i ask the formatters hey which is",
    "start": "1458559",
    "end": "1465360"
  },
  {
    "text": "the first of you that knows how to handle this request and then after that i reset the content",
    "start": "1465360",
    "end": "1470799"
  },
  {
    "text": "type back again to whatever it was before i started messing about with it so with that in place",
    "start": "1470799",
    "end": "1477679"
  },
  {
    "text": "we should be able to go to the startup class in here and say",
    "start": "1477679",
    "end": "1483360"
  },
  {
    "text": "services.add singleton we want to do an output formatter",
    "start": "1483360",
    "end": "1489679"
  },
  {
    "text": "selector there it is and i want to set accept",
    "start": "1489679",
    "end": "1496720"
  },
  {
    "text": "header output formatter selector",
    "start": "1496720",
    "end": "1505480"
  },
  {
    "text": "like that we rebuild the application",
    "start": "1506960",
    "end": "1512159"
  },
  {
    "text": "go back to insomnia run this and now i get this short version in xml i got this short",
    "start": "1512159",
    "end": "1519520"
  },
  {
    "text": "version in json uh and that's it so that's kind of cool and it's this",
    "start": "1519520",
    "end": "1525600"
  },
  {
    "text": "specific implementation it's you can use it for anything very common scenario is versioning because this is kind of cool",
    "start": "1525600",
    "end": "1531279"
  },
  {
    "text": "because i could have application slash vnd use vnds application slash vnd.user",
    "start": "1531279",
    "end": "1538080"
  },
  {
    "text": "and then have maybe user.1.0 user.1 1.1 1.2 and so on and the the client",
    "start": "1538080",
    "end": "1546640"
  },
  {
    "text": "requesting my api could if they didn't pass it in they would get the latest version but if they did pass it in they",
    "start": "1546640",
    "end": "1551760"
  },
  {
    "text": "could upgrade and get newer versions of my api and i could still have the old implementation and the new implementation in the same code base",
    "start": "1551760",
    "end": "1559279"
  },
  {
    "text": "sweet i like that if you don't like that you're wrong um i i have opinions i know",
    "start": "1559279",
    "end": "1567279"
  },
  {
    "text": "somebody's going to write that up and give me a red note out there and i'm going to get like a formal complaint from the organizer sorry about that",
    "start": "1567600",
    "end": "1574400"
  },
  {
    "text": "stuff happens um one thing i dislike about this and this is another one of those this is fun to",
    "start": "1574400",
    "end": "1580240"
  },
  {
    "text": "do i'm not sure i would do it in the real world but i don't like the fact that i'm doing two",
    "start": "1580240",
    "end": "1586000"
  },
  {
    "text": "of these right i get a user id in and i have to go and ask reaper for it wouldn't it be nice if i could just go",
    "start": "1586000",
    "end": "1591600"
  },
  {
    "text": "and say user and user and since that's now not needed",
    "start": "1591600",
    "end": "1596960"
  },
  {
    "text": "that part it also means that my application it doesn't need to be a sync",
    "start": "1596960",
    "end": "1602720"
  },
  {
    "text": "so all of a sudden my code looks like this instead i actually tried this yesterday i'm not going to do it now but you can turn this into like a nice",
    "start": "1602720",
    "end": "1609440"
  },
  {
    "text": "little fat arrow function instead and make it a one-liner and you don't need a bunch of stuff but this is kind of neat",
    "start": "1609440",
    "end": "1614799"
  },
  {
    "text": "it would be nice if i could just get the user passed in instead of the user id right so what we'll do here is we'll fix that",
    "start": "1614799",
    "end": "1622320"
  },
  {
    "text": "so to do that once again in my infrastructure project i'm going to say a folder i'm going to say new class",
    "start": "1622320",
    "end": "1628799"
  },
  {
    "text": "i'm going to create a user model binder that didn't come out right but when i",
    "start": "1628799",
    "end": "1634880"
  },
  {
    "text": "snippet this in it's going to get fixed anyway so there it is and i think if i go",
    "start": "1634880",
    "end": "1642080"
  },
  {
    "text": "rename file there is look at that look at that okay so user model binder is a",
    "start": "1642080",
    "end": "1647120"
  },
  {
    "text": "class that implements imodelbinder imodelbinder's only responsibility is to bind some form of information that comes",
    "start": "1647120",
    "end": "1653760"
  },
  {
    "text": "in from the client into some form of something else",
    "start": "1653760",
    "end": "1660159"
  },
  {
    "text": "it has dependence injection so i pull in my user's repo and it has this bind model async method that we need to",
    "start": "1660159",
    "end": "1666159"
  },
  {
    "text": "implement so i'm going to go and implement that by saying first of all null check for the binding",
    "start": "1666159",
    "end": "1672399"
  },
  {
    "text": "context which is completely useless because there's always going to be one but it's there because",
    "start": "1672399",
    "end": "1677440"
  },
  {
    "text": "safe programming then it looks at the binding context so binding context model metadata.name",
    "start": "1677440",
    "end": "1685760"
  },
  {
    "text": "is actually the name of the parameter that you're trying to bind to",
    "start": "1685760",
    "end": "1691039"
  },
  {
    "text": "so when i add this this is going to be called with the string user as the name",
    "start": "1691039",
    "end": "1696640"
  },
  {
    "text": "so i take user and i add id to the end and then i basically go and ask what's called the value provider say did",
    "start": "1696640",
    "end": "1703200"
  },
  {
    "text": "somebody pass in a value that was called user id and it's going to look at the query string and the form",
    "start": "1703200",
    "end": "1709679"
  },
  {
    "text": "if it's a form post and so on and if it doesn't find it it just returns if it does find it",
    "start": "1709679",
    "end": "1716799"
  },
  {
    "text": "you you ask it for the first value if it doesn't find the first value that would be odd but if it doesn't it returns it",
    "start": "1716799",
    "end": "1722399"
  },
  {
    "text": "and then it tries to parse the input and get the id if that doesn't work it adds a model error and returns otherwise it",
    "start": "1722399",
    "end": "1729200"
  },
  {
    "text": "gets the user based on the id and it returns a bindingresult.success",
    "start": "1729200",
    "end": "1734880"
  },
  {
    "text": "passing in the user so now i know how to handle the binding stuff we just need",
    "start": "1734880",
    "end": "1740159"
  },
  {
    "text": "one fantastic little class more and most people find this quite interesting because you do a user model",
    "start": "1740159",
    "end": "1747279"
  },
  {
    "text": "binder provider this is starting to sound like java right",
    "start": "1747279",
    "end": "1752480"
  },
  {
    "text": "factories and providers and stuff like that it's not quite that bad",
    "start": "1752480",
    "end": "1757679"
  },
  {
    "text": "it's an imodel binder provider it takes a context and it returns a binder if you",
    "start": "1757679",
    "end": "1763120"
  },
  {
    "text": "know how to bind it so in my case i look to see are you trying to bind a user",
    "start": "1763120",
    "end": "1768559"
  },
  {
    "text": "in that case return a binder type model binder type of user model binder what",
    "start": "1768559",
    "end": "1777200"
  },
  {
    "text": "the user or the binder type model binder provides dependency in injection into",
    "start": "1777919",
    "end": "1783440"
  },
  {
    "text": "your model binders so you basically just you wrap your model binder into another model binder and magically dependence",
    "start": "1783440",
    "end": "1789360"
  },
  {
    "text": "injection works don't know why but it does um so now that i have that i can go back",
    "start": "1789360",
    "end": "1796159"
  },
  {
    "text": "out to my no wrong place i can go to my startup class we can go to the options here we can say",
    "start": "1796159",
    "end": "1802080"
  },
  {
    "text": "options dot use cert no model binder providers dot and not add",
    "start": "1802080",
    "end": "1809039"
  },
  {
    "text": "because they were run in order and there's always a default one that will say i know how to do it and then it fails so we do insert",
    "start": "1809039",
    "end": "1817279"
  },
  {
    "text": "insert zero new user model binder provider",
    "start": "1817279",
    "end": "1823679"
  },
  {
    "text": "like that we put a breakpoint in there and in there and we press f5 and the reason i put two",
    "start": "1823679",
    "end": "1830240"
  },
  {
    "text": "breakpoints is because i don't know which one of them i'm going to hit we run that it",
    "start": "1830240",
    "end": "1837519"
  },
  {
    "text": "we go back to some insomnia we run that again it comes in here and my user object is actually",
    "start": "1839360",
    "end": "1845840"
  },
  {
    "text": "prepared and i have that already fixed for me that's kind of nice model binding is is really neat there is",
    "start": "1845840",
    "end": "1852640"
  },
  {
    "text": "a comment somewhere in the documentation that says never ever use model binding for things like run into the database",
    "start": "1852640",
    "end": "1858480"
  },
  {
    "text": "and fetching things which is exactly what i showed you so before you do this don't just take my",
    "start": "1858480",
    "end": "1864080"
  },
  {
    "text": "talk and go and do it read the docs just a smidge and see what i was doing wrong",
    "start": "1864080",
    "end": "1869279"
  },
  {
    "text": "and don't do that we agree with that cool next thing i have another application",
    "start": "1869279",
    "end": "1875679"
  },
  {
    "text": "here so i have this application here called let's say set a startup project",
    "start": "1875679",
    "end": "1881360"
  },
  {
    "text": "i'm showing off my magic skills when it comes to um application building so i've got this",
    "start": "1881360",
    "end": "1886960"
  },
  {
    "text": "application here i'm going to log in as grace i look like a grace",
    "start": "1886960",
    "end": "1892399"
  },
  {
    "text": "log in like that so i've got this thing here where you manage users and they've got john doe who's just dead weight",
    "start": "1892399",
    "end": "1897679"
  },
  {
    "text": "but they've got ad profile picture and you want to upload a picture of of john",
    "start": "1897679",
    "end": "1903120"
  },
  {
    "text": "the problem with uploading pictures is that it can be quite resource intensive right so we don't want to do that as",
    "start": "1903120",
    "end": "1908240"
  },
  {
    "text": "you're uploading it i want to do that in a background thing that runs in the background of my application so it",
    "start": "1908240",
    "end": "1913600"
  },
  {
    "text": "doesn't bog down the thread and i don't have to sit there and wait for it to be resized into a thumbnail and things like",
    "start": "1913600",
    "end": "1918640"
  },
  {
    "text": "that normally somebody doing this would say oh you just put in hang fire just nougat",
    "start": "1918640",
    "end": "1923919"
  },
  {
    "text": "get hang fire and then go and read massive amounts of documentation on how to run hang fire",
    "start": "1923919",
    "end": "1930000"
  },
  {
    "text": "or you go into your application create a new folder actually that's not mandatory the folder is me",
    "start": "1930000",
    "end": "1936880"
  },
  {
    "text": "i'm going to add infrastructure like that",
    "start": "1936880",
    "end": "1943200"
  },
  {
    "text": "i'm going to add a class in here so i'm going to call it thumbnail",
    "start": "1943200",
    "end": "1949760"
  },
  {
    "text": "generator like that and i'm going to go ahead and make that",
    "start": "1949760",
    "end": "1956320"
  },
  {
    "text": "implement i hosted service which is really neat it's just a very",
    "start": "1956320",
    "end": "1962559"
  },
  {
    "text": "simple interface that has start async and stop async so all we need to do it will tell us",
    "start": "1962559",
    "end": "1967919"
  },
  {
    "text": "when the application starts and it will tell us when the application stops and whatever you do in that time span is up",
    "start": "1967919",
    "end": "1974720"
  },
  {
    "text": "to you so with that in place all i need to do is say",
    "start": "1974720",
    "end": "1980398"
  },
  {
    "text": "nope 18. oops sorry that was my constructor that needs to be up here",
    "start": "1980559",
    "end": "1987200"
  },
  {
    "text": "there is so i create a constructor that takes in a hosting environment some employees",
    "start": "1987200",
    "end": "1993440"
  },
  {
    "text": "and i'm going to create a file system watcher and then in my start async",
    "start": "1993440",
    "end": "1999360"
  },
  {
    "text": "i'm going to go and create this little method here and all it really does it it creates a folder",
    "start": "1999360",
    "end": "2004559"
  },
  {
    "text": "in my root called images or images employees and then if it doesn't exist it creates it and then it creates a file",
    "start": "2004559",
    "end": "2010480"
  },
  {
    "text": "system watcher and it starts listening for files created that's it when a file is created",
    "start": "2010480",
    "end": "2016799"
  },
  {
    "text": "it runs this bit of code my at 20 yes i am so it runs this bit of code",
    "start": "2016799",
    "end": "2022960"
  },
  {
    "text": "here and to run that i actually need to go and say manage nougat packages",
    "start": "2022960",
    "end": "2029120"
  },
  {
    "text": "i need to add do i have internet connection i do so all of you who are downloading stuff of pirate bay play",
    "start": "2029120",
    "end": "2034960"
  },
  {
    "text": "stop uh i need six labors",
    "start": "2034960",
    "end": "2040320"
  },
  {
    "text": "image sharp there it is install that so i don't wanna they have a fantastic library for",
    "start": "2040320",
    "end": "2047360"
  },
  {
    "text": "modifying images ignore the errors down there just going to import this",
    "start": "2047360",
    "end": "2053358"
  },
  {
    "text": "import that this is the reason why you put your extension methods in the right namespace so you don't have to use a",
    "start": "2053359",
    "end": "2058720"
  },
  {
    "text": "specific namespace to get your extension message to work so what it does it basically when a file is created if it",
    "start": "2058720",
    "end": "2064398"
  },
  {
    "text": "doesn't include end with dash thumb it's not it's it's not a thumbnail so i need to create a",
    "start": "2064399",
    "end": "2069599"
  },
  {
    "text": "thumbnail based on the name of the file i can figure out what tenant it is what employee it is i can pull out the",
    "start": "2069599",
    "end": "2075919"
  },
  {
    "text": "employee i can change my thumbnail create my thumbnail and store the thumbnail the",
    "start": "2075919",
    "end": "2081200"
  },
  {
    "text": "cool part about this is once you haven't hosted service you can go into your application and just say services dot",
    "start": "2081200",
    "end": "2087839"
  },
  {
    "text": "add hosted service thumbnail",
    "start": "2087839",
    "end": "2093200"
  },
  {
    "text": "generator like that",
    "start": "2093200",
    "end": "2099200"
  },
  {
    "text": "put a break point in here sort of hereish",
    "start": "2099200",
    "end": "2104880"
  },
  {
    "text": "run the application and every time i do this i realize that",
    "start": "2104880",
    "end": "2110640"
  },
  {
    "text": "i should have prepared a picture so when i don't press when i press this it doesn't open up some weird folder on my",
    "start": "2110640",
    "end": "2116800"
  },
  {
    "text": "machine okay i did actually put it there there's a picture of me i do upload",
    "start": "2116800",
    "end": "2123359"
  },
  {
    "text": "it comes in here and it asks to do the picture resize",
    "start": "2123359",
    "end": "2129599"
  },
  {
    "text": "i can't actually see the result out here it's locked and that is only because i",
    "start": "2129599",
    "end": "2134640"
  },
  {
    "text": "this breaks all the threads at the moment so it stops everything but if i run this through once it's going to come again a second time because it when it",
    "start": "2134640",
    "end": "2141200"
  },
  {
    "text": "created a file you create a thumbnail so this this time it's actually the thumb file but if i go back out here i already got",
    "start": "2141200",
    "end": "2147200"
  },
  {
    "text": "the response so we can see that this was running in the background so while i was redoing and creating the the thumbnails this thing",
    "start": "2147200",
    "end": "2154240"
  },
  {
    "text": "ran in the background and if i go back out here and i refresh this the picture is now up there",
    "start": "2154240",
    "end": "2159920"
  },
  {
    "text": "so we can do these background tasks we got start async stop async that's and all we need and then we can do whatever",
    "start": "2159920",
    "end": "2165520"
  },
  {
    "text": "we want in the background without blocking up threads from the from the foreground to run on",
    "start": "2165520",
    "end": "2172560"
  },
  {
    "text": "cool um anybody feeling that they're slightly",
    "start": "2172560",
    "end": "2177680"
  },
  {
    "text": "out of the water yet nope you're all so comfortable about this level cool because now we're gonna",
    "start": "2177680",
    "end": "2183040"
  },
  {
    "text": "go down a rabbit hole of weird stuff and this is weird stuff",
    "start": "2183040",
    "end": "2189520"
  },
  {
    "text": "okay i sat down and i started thinking about i use azure a lot so",
    "start": "2189520",
    "end": "2195839"
  },
  {
    "text": "in azure when you create a web application there's a little tick box that says add application insights you",
    "start": "2195839",
    "end": "2200880"
  },
  {
    "text": "tick that and magically you get a bunch of logs from your application without having added anything to your",
    "start": "2200880",
    "end": "2205920"
  },
  {
    "text": "application and i went how did they touch my application in that way",
    "start": "2205920",
    "end": "2210960"
  },
  {
    "text": "so i had to figure this out so i'm now going to show you how you can build that exact feature and inject your own functionality into any",
    "start": "2210960",
    "end": "2219599"
  },
  {
    "text": "asp.net core application that runs on a server without the application knowing",
    "start": "2219599",
    "end": "2224880"
  },
  {
    "text": "anything about the fact that you are injecting things into it this is going to be awesome",
    "start": "2224880",
    "end": "2231119"
  },
  {
    "text": "so what i've got is i've got a project here called runtime store i don't care about runtime store the",
    "start": "2231119",
    "end": "2237040"
  },
  {
    "text": "runtime store project at all honestly it is it has a it does have a program cs",
    "start": "2237040",
    "end": "2242400"
  },
  {
    "text": "file that looks like that i don't care the reason i have that is because it needs to compile for one of",
    "start": "2242400",
    "end": "2248320"
  },
  {
    "text": "my later steps what i'm interested in is the cs proj file so my cs project file has an item group",
    "start": "2248320",
    "end": "2255440"
  },
  {
    "text": "that defines my package references so what nougat packages am i dependent on that's the important part and i've also",
    "start": "2255440",
    "end": "2262079"
  },
  {
    "text": "updated the the nougat endpoints to use nougat and also sort of the request diagnostic bin debug which is my project",
    "start": "2262079",
    "end": "2269920"
  },
  {
    "text": "i've got here which is called request diagnostics if i build that and we do like that we're going to see",
    "start": "2269920",
    "end": "2276640"
  },
  {
    "text": "that in bin debug there's going to be a request diagnostics 1.0.0.nbc",
    "start": "2276640",
    "end": "2282000"
  },
  {
    "text": "so it's a nougat package you might not see it but it's there just trust me um",
    "start": "2282000",
    "end": "2288160"
  },
  {
    "text": "that's why i have this little thing in my cs profile that basically points to that folder so that i can load when i build this i can actually load new git",
    "start": "2288160",
    "end": "2295119"
  },
  {
    "text": "packages from my local folder that's all it does okay so what i want to do well the first step",
    "start": "2295119",
    "end": "2301359"
  },
  {
    "text": "in doing this is to create something called a runtime store i need to put stuff on my server",
    "start": "2301359",
    "end": "2308000"
  },
  {
    "text": "that an application can load without bringing it itself so it needs to have",
    "start": "2308000",
    "end": "2314000"
  },
  {
    "text": "stuff that it didn't know about you can use this for not stuff it's stuff that it knows about as well so in my case",
    "start": "2314000",
    "end": "2319920"
  },
  {
    "text": "this this runtime store it had references to bcrypt newtonsoft",
    "start": "2319920",
    "end": "2325359"
  },
  {
    "text": "and six labels image sharp as well which happens to be the same thing that my enterprise employee management inc",
    "start": "2325359",
    "end": "2331680"
  },
  {
    "text": "application has as well so with that cs project file i can go out here and this is where it",
    "start": "2331680",
    "end": "2337920"
  },
  {
    "text": "gets arcane can you guys in the background see that okay so i'm going to write let's see if i i hope i have this sort of",
    "start": "2337920",
    "end": "2345200"
  },
  {
    "text": "there it is i'm going to use that code so netstore is saying i want to create something",
    "start": "2345200",
    "end": "2350960"
  },
  {
    "text": "called a runtime store and i want to create it based on the runtime pro store dot cs project file and when i run this",
    "start": "2350960",
    "end": "2357920"
  },
  {
    "text": "command it's going to create what is called a runtime store for those nougat packages runtime store",
    "start": "2357920",
    "end": "2363599"
  },
  {
    "text": "is a folder that contains nougat package or sorry it contains assemblies that generally",
    "start": "2363599",
    "end": "2369520"
  },
  {
    "text": "come out of nuget packages i give it a run time i'm running on windows 10 x64 i tell it where to place",
    "start": "2369520",
    "end": "2376480"
  },
  {
    "text": "the output and you add dash skip dash optimization so chris why do you add dash skip dash",
    "start": "2376480",
    "end": "2383280"
  },
  {
    "text": "optimization because if you don't it doesn't work uh",
    "start": "2383280",
    "end": "2388880"
  },
  {
    "text": "i know that that sounds really really dumb and i have googled the heck out of this i have googled this because i want",
    "start": "2388880",
    "end": "2394400"
  },
  {
    "text": "to know what that parameter does and nobody so far has been able to explain",
    "start": "2394400",
    "end": "2399599"
  },
  {
    "text": "on github it just says add it because if you don't it doesn't work so i take that as the official",
    "start": "2399599",
    "end": "2405920"
  },
  {
    "text": "explanation just add it you run that",
    "start": "2405920",
    "end": "2411520"
  },
  {
    "text": "it downloads the nougat packages and it creates it and it stores a list of packages in this address at this address",
    "start": "2411520",
    "end": "2418240"
  },
  {
    "text": "here so let's do explorer and let's go to c colon backslash demo backslash runtime",
    "start": "2418240",
    "end": "2424960"
  },
  {
    "text": "store like that so sorry i can't really well i could probably assume this but you'll just",
    "start": "2424960",
    "end": "2430480"
  },
  {
    "text": "have to trust me it says x64 in here and in there it says net 5.0 and in there it",
    "start": "2430480",
    "end": "2436240"
  },
  {
    "text": "has one folder for each one of the nougat packages and inside of each one of those there is 1.1.6.0",
    "start": "2436240",
    "end": "2443880"
  },
  {
    "text": "and then inside that there's a lib folder and inside that there's a net standard 2.0 and inside there there's a dll",
    "start": "2444079",
    "end": "2449760"
  },
  {
    "text": "this whole net x64 net five blah blah blah makes sense and it has to be like that",
    "start": "2449760",
    "end": "2455520"
  },
  {
    "text": "and the runtime store creates that and it also creates this artifact.xml file",
    "start": "2455520",
    "end": "2460720"
  },
  {
    "text": "the artifact.xml file looks like that and it basically says in this runtime store that you're looking at right now",
    "start": "2460720",
    "end": "2466960"
  },
  {
    "text": "basically this folder of folders of folders of folders of assemblies this is what you can find",
    "start": "2466960",
    "end": "2473839"
  },
  {
    "text": "sweet what can i do with that well what we can do now and i need to have this because i need to remember all of",
    "start": "2473839",
    "end": "2480079"
  },
  {
    "text": "my arcane weird things here we go back out to my application and we go i'm just going to see if i'm",
    "start": "2480079",
    "end": "2486960"
  },
  {
    "text": "in the right place i am so what we're going to do is we're going to say dot net",
    "start": "2486960",
    "end": "2492079"
  },
  {
    "text": "dot dot net publish and i think i've got that look at that no no the wrong one that one",
    "start": "2492079",
    "end": "2499040"
  },
  {
    "text": "very important so i'm going to run this you all recognize this code i guess in some form most of you probably don't run",
    "start": "2499040",
    "end": "2504160"
  },
  {
    "text": "it on a console you go into visual studio and you press f5 or you press ctrl shift",
    "start": "2504160",
    "end": "2509440"
  },
  {
    "text": "b or whatever you do but dotnet publish release build output to demo publish and",
    "start": "2509440",
    "end": "2514560"
  },
  {
    "text": "use that folder for the project i run that it builds my application",
    "start": "2514560",
    "end": "2519599"
  },
  {
    "text": "it builds my application there it is it's amazing then we open up another",
    "start": "2519599",
    "end": "2526560"
  },
  {
    "text": "powershell window we zoom in so you guys in the back can see it cdc colon backslash demo",
    "start": "2526560",
    "end": "2533440"
  },
  {
    "text": "als cd publish ls there it is that's my application",
    "start": "2533440",
    "end": "2538960"
  },
  {
    "text": "and as you can see it has the bcrypt.net core it has the",
    "start": "2538960",
    "end": "2546400"
  },
  {
    "text": "newtonsoft.json and so on and so on and if i run this application it's going to run let's just",
    "start": "2546400",
    "end": "2552480"
  },
  {
    "text": "okay let's say that it actually does run i might be wrong but if we go enterprise",
    "start": "2552480",
    "end": "2557599"
  },
  {
    "text": "there it is dll and the application runs fine sweet so that's fine",
    "start": "2557599",
    "end": "2563599"
  },
  {
    "text": "don't let's let's just do that it's fine",
    "start": "2563599",
    "end": "2568800"
  },
  {
    "text": "um but what happens if we say cd dot dot and we do explorer",
    "start": "2568800",
    "end": "2575760"
  },
  {
    "text": "dot and just remove that folder we remove the publish folder",
    "start": "2575760",
    "end": "2581359"
  },
  {
    "text": "and then we go back in here and we say we run that same thing again",
    "start": "2581359",
    "end": "2586720"
  },
  {
    "text": "but we add actually let's let's do it like this because i had the code already let's do f",
    "start": "2586720",
    "end": "2593680"
  },
  {
    "text": "that didn't that all work let's do dotnet publish",
    "start": "2593680",
    "end": "2600318"
  },
  {
    "text": "that's what i want so let's do the same code the only difference here the same",
    "start": "2600400",
    "end": "2606079"
  },
  {
    "text": "command the only difference is i'm adding dash dash manifest dash manifest and then i give it the",
    "start": "2606079",
    "end": "2612720"
  },
  {
    "text": "address or the path to my artifact.xml file if i run this now",
    "start": "2612720",
    "end": "2619359"
  },
  {
    "text": "it builds the thing again and if i go back to this other powershell window and we do ls",
    "start": "2619359",
    "end": "2626640"
  },
  {
    "text": "and we go into the publish folder and we do ls again we do that you can read it",
    "start": "2626640",
    "end": "2632240"
  },
  {
    "text": "all of those assemblies are gone now right so it's only my own assemblies none of",
    "start": "2632240",
    "end": "2637280"
  },
  {
    "text": "this stuff that was defined in that artifact xml file is included in my build at all",
    "start": "2637280",
    "end": "2643200"
  },
  {
    "text": "so once we've got that it's really cool because then you do net and you do enterprise dll and you run it and it",
    "start": "2643200",
    "end": "2648960"
  },
  {
    "text": "goes uh you suck i paraphrase it it does actually say package not found or something like that",
    "start": "2648960",
    "end": "2656880"
  },
  {
    "text": "obviously it's not finding my package but chris you said you had a runtime store what happened well it you have to",
    "start": "2656880",
    "end": "2662000"
  },
  {
    "text": "tell it that there's a runtime story it doesn't just magically know that somewhere on your machine there's a folder that happens to be called x64 and",
    "start": "2662000",
    "end": "2668400"
  },
  {
    "text": "underneath that well it doesn't do that would be cool if it did and it would also be really really slow so what we",
    "start": "2668400",
    "end": "2674079"
  },
  {
    "text": "need to do is we need to go in and give it an environment variable that looks like this it's called",
    "start": "2674079",
    "end": "2680000"
  },
  {
    "text": "dot i think i've got that one as well so we had not that one that one",
    "start": "2680000",
    "end": "2685839"
  },
  {
    "text": "so you have this environment variable called dotnet shared store once you add one of those pointing to a",
    "start": "2685839",
    "end": "2691680"
  },
  {
    "text": "shared store or a runtime store and then you go ahead and you run your application again",
    "start": "2691680",
    "end": "2698640"
  },
  {
    "text": "it runs because once you do dot when you run.net and give it to dll it's going to look",
    "start": "2698640",
    "end": "2704640"
  },
  {
    "text": "for that environment variable it's going to look for that address that path and inside that path is going to look for all of",
    "start": "2704640",
    "end": "2711599"
  },
  {
    "text": "your added your assemblies so my wife calling right now is just not a good time sorry about that",
    "start": "2711599",
    "end": "2718480"
  },
  {
    "text": "um and then it basically goes do you want to load stuff you can now",
    "start": "2718480",
    "end": "2725040"
  },
  {
    "text": "load it from here as well and it does a combination of loading of what's local to your thing and whatever folder you",
    "start": "2725040",
    "end": "2731040"
  },
  {
    "text": "have so wait that is step number one of touching your applications in an",
    "start": "2731040",
    "end": "2737359"
  },
  {
    "text": "inappropriate way that your colleagues don't know about that sounds so much worse when i say it",
    "start": "2737359",
    "end": "2743760"
  },
  {
    "text": "right it sounded much better in my head okay so now and this is kind of cool",
    "start": "2743760",
    "end": "2749040"
  },
  {
    "text": "because we can do this for more stuff it's not just for what i want to show this is actually a cool step in if you've got your own servers this is a",
    "start": "2749040",
    "end": "2755280"
  },
  {
    "text": "little bit harder to do if you go to web application web apps in azure for example but if you have control over your server you can pre-load your server",
    "start": "2755280",
    "end": "2763119"
  },
  {
    "text": "with a ton of nougat packages that your application needs so that when you build your app you only deploy your little",
    "start": "2763119",
    "end": "2769920"
  },
  {
    "text": "piece you don't need to deploy 100 megs of nougat packages it just goes here this is the xml file with within the",
    "start": "2769920",
    "end": "2777040"
  },
  {
    "text": "runtime store that's going to be on the server when you get there and then you set up the environment variable on the",
    "start": "2777040",
    "end": "2782319"
  },
  {
    "text": "server and when you deploy there it's going to go i've got two dlls here and i got 600 dlls over here that was already",
    "start": "2782319",
    "end": "2788160"
  },
  {
    "text": "on the server sounds a lot like something called the global assembly cache",
    "start": "2788160",
    "end": "2794160"
  },
  {
    "text": "it is nothing at all like the global assembly cache it's like feature-wise yes it does the same thing without all",
    "start": "2794160",
    "end": "2801280"
  },
  {
    "text": "the really crappy ideas around it the next step is to",
    "start": "2801280",
    "end": "2806800"
  },
  {
    "text": "touch my application uh in sort of plug into it so i've created this little",
    "start": "2806800",
    "end": "2811839"
  },
  {
    "text": "project called request diagnostics it has a really stupid diagnostics log",
    "start": "2811839",
    "end": "2818079"
  },
  {
    "text": "has an interface called i diagnostics log has a log method and a get content method and the implementation is really",
    "start": "2818079",
    "end": "2824240"
  },
  {
    "text": "dumb when you run log it adds it to a list of string and when you call get content it returns all the list of",
    "start": "2824240",
    "end": "2830800"
  },
  {
    "text": "strings so over time it's going to basically use up all the memory on your machine and then it's going to crash",
    "start": "2830800",
    "end": "2837680"
  },
  {
    "text": "and that's fine because it can restart yes because when the application dies it writes everything to file so when it",
    "start": "2838319",
    "end": "2844480"
  },
  {
    "text": "starts up again it reads in that file and fills up the the list again with all the yeah",
    "start": "2844480",
    "end": "2850800"
  },
  {
    "text": "i don't work with diagnostics i'm pretty sure they do it in a different way somehow but",
    "start": "2850800",
    "end": "2856640"
  },
  {
    "text": "yeah bear with me it shows my point um and then i have a",
    "start": "2856640",
    "end": "2862800"
  },
  {
    "text": "an a middleware where here that i've written called diagnostics middleware and all it really does is it adds a",
    "start": "2862800",
    "end": "2869040"
  },
  {
    "text": "slash diagnostics endpoint to the application and when you go to slash diagnostics it shows you the log",
    "start": "2869040",
    "end": "2875359"
  },
  {
    "text": "everything in the log is being output for you that's all i've got so i need to inject this into my",
    "start": "2875359",
    "end": "2881440"
  },
  {
    "text": "application and the way that we do that is that we go ahead and say",
    "start": "2881440",
    "end": "2886480"
  },
  {
    "text": "add a new class in here add class",
    "start": "2886480",
    "end": "2892000"
  },
  {
    "text": "it's going to be called diagnostics startup",
    "start": "2892000",
    "end": "2898960"
  },
  {
    "text": "start up filter like that and it looks like this",
    "start": "2898960",
    "end": "2906240"
  },
  {
    "text": "so and a startup filter is a class that implements i start a filter",
    "start": "2906960",
    "end": "2914640"
  },
  {
    "text": "and i start filter has a method called configure and this is funky this is this is the kind of c-sharp syntax that if",
    "start": "2914640",
    "end": "2920559"
  },
  {
    "text": "you'd shown me this 10 years ago my head would have gone i don't want to work with this anymore i'm going to work with javascript um",
    "start": "2920559",
    "end": "2927599"
  },
  {
    "text": "it yeah i know i was weird back then um it's a configure method that takes an",
    "start": "2927599",
    "end": "2934960"
  },
  {
    "text": "action so a callback of application builder and returns an action of",
    "start": "2934960",
    "end": "2940559"
  },
  {
    "text": "application builder so to be able to inject myself into the application builder i return a method",
    "start": "2940559",
    "end": "2947680"
  },
  {
    "text": "or a callback that uses app.use middleware to inject my requests or",
    "start": "2947680",
    "end": "2953040"
  },
  {
    "text": "request diagnostic diagnostics middleware so an eye startup filter any class that implements i startup",
    "start": "2953040",
    "end": "2959520"
  },
  {
    "text": "filter that you add to a asp.net core's dependency injection will be run",
    "start": "2959520",
    "end": "2967280"
  },
  {
    "text": "exactly there",
    "start": "2968160",
    "end": "2974079"
  },
  {
    "text": "so basically if you put stuff into ioc and that implements i start a filter",
    "start": "2974319",
    "end": "2981520"
  },
  {
    "text": "when you get to the configure method it will run those startup filters before and give you access to that app thing",
    "start": "2981520",
    "end": "2988880"
  },
  {
    "text": "here which means that my diagnostic startup filter can go ahead and add itself add the middleware inside of",
    "start": "2988880",
    "end": "2995839"
  },
  {
    "text": "that step one how do i get the sort of filter into ioc",
    "start": "2995839",
    "end": "3001760"
  },
  {
    "text": "is i guess step two that you do by adding another class",
    "start": "3001760",
    "end": "3006800"
  },
  {
    "text": "so you go add class and this one is supposed to be called diagnostics",
    "start": "3006800",
    "end": "3014400"
  },
  {
    "text": "diagnostics hosting startup",
    "start": "3014400",
    "end": "3020480"
  },
  {
    "text": "like that and implementation that was spelt like i was drunk and i promise you i am not",
    "start": "3020880",
    "end": "3027040"
  },
  {
    "text": "yet wrong um it implements i hosting startup",
    "start": "3027040",
    "end": "3032880"
  },
  {
    "text": "so i hosting startup is something you add to a class it implements a configure method but instead of getting access to",
    "start": "3032880",
    "end": "3038640"
  },
  {
    "text": "the app builder it gets a hold of the iweb host builder so basically it allows",
    "start": "3038640",
    "end": "3043680"
  },
  {
    "text": "me to plug in to this which means that when the application",
    "start": "3043680",
    "end": "3048880"
  },
  {
    "text": "starts up i can inject stuff into the isa container thus i can inject my",
    "start": "3048880",
    "end": "3053920"
  },
  {
    "text": "diagnostics log and i can inject my startup filter and you then have to add a hosting",
    "start": "3053920",
    "end": "3060240"
  },
  {
    "text": "startup attribute to it which is assembly level so that the system knows that where to find my hosting startup",
    "start": "3060240",
    "end": "3067119"
  },
  {
    "text": "thing with that in place i can go ahead and build this request diagnostics package",
    "start": "3067119",
    "end": "3073040"
  },
  {
    "text": "but before i can do that i have to go to properties and i need to create a new version of it",
    "start": "3073040",
    "end": "3079040"
  },
  {
    "text": "so i'm going to go to package i'm going to update the version to 1.0.1 save that",
    "start": "3079040",
    "end": "3085920"
  },
  {
    "text": "i'm going to build my request diagnostics build",
    "start": "3085920",
    "end": "3091599"
  },
  {
    "text": "like that i'm going to rebuild my runtime store so that it updates with",
    "start": "3091599",
    "end": "3096800"
  },
  {
    "text": "with my 1.0 because in this thing it actually says uh 1.0.star",
    "start": "3096800",
    "end": "3104440"
  },
  {
    "text": "okay so now i've got my package and everything so the first thing i need to do is let's see i've just done",
    "start": "3104480",
    "end": "3109599"
  },
  {
    "text": "everything i need to update that rebuild it to generate the package okay so we go back out here",
    "start": "3109599",
    "end": "3115839"
  },
  {
    "text": "i'm going to recreate my package store so i'm going to go and say that",
    "start": "3115839",
    "end": "3122480"
  },
  {
    "text": "and if we go to the folder where it was located the runtime store we can now see that",
    "start": "3122480",
    "end": "3128240"
  },
  {
    "text": "under the request diagnostics folder which is there there are now two folders",
    "start": "3128240",
    "end": "3133359"
  },
  {
    "text": "one for 1.00 and one for 1.01",
    "start": "3133359",
    "end": "3138119"
  },
  {
    "text": "step one done i have my runtime store and i have my nasty little injection things that will go in and jump into",
    "start": "3139119",
    "end": "3145920"
  },
  {
    "text": "your application now i need it to load it and the problem with loading it is yes i",
    "start": "3145920",
    "end": "3152720"
  },
  {
    "text": "could probably tell it somehow to load request diagnostics but request diagnostics will also",
    "start": "3152720",
    "end": "3158240"
  },
  {
    "text": "potentially need other assemblies so to load that i will actually need it to load other assemblies into memory and",
    "start": "3158240",
    "end": "3164559"
  },
  {
    "text": "things like that and you can do that of course i wouldn't be here otherwise",
    "start": "3164559",
    "end": "3169839"
  },
  {
    "text": "but if you go into your application if you go to any application and you open up the bin folder and the debug folder and",
    "start": "3169839",
    "end": "3176720"
  },
  {
    "text": "your application which down here they all have this thing called a a depth.json file",
    "start": "3176720",
    "end": "3182960"
  },
  {
    "text": "the depth.json file defines what dependencies should be loaded into memory for this application to work",
    "start": "3182960",
    "end": "3190400"
  },
  {
    "text": "if i take the depth.json version from runtime store and i remove the actual",
    "start": "3190400",
    "end": "3195599"
  },
  {
    "text": "runtime store from it because i don't want to load that but i do want to load bcrypt json request diagnostics and",
    "start": "3195599",
    "end": "3202400"
  },
  {
    "text": "image sharp and the compiler services and i remove that like that",
    "start": "3202400",
    "end": "3208559"
  },
  {
    "text": "i can then take that this is this is where it starts getting ish",
    "start": "3208559",
    "end": "3214400"
  },
  {
    "text": "if i take that and we say let's see if i remember everything we can say x copy",
    "start": "3214400",
    "end": "3221200"
  },
  {
    "text": "that so i copied the runtime stores back actually that was hard to read let's do it",
    "start": "3221200",
    "end": "3228318"
  },
  {
    "text": "x copy there it is so if i copy the runtimestore.debs.json",
    "start": "3229200",
    "end": "3234240"
  },
  {
    "text": "into a folder called additional depths and then under additional depth you have to have a very specific folder structure",
    "start": "3234240",
    "end": "3239520"
  },
  {
    "text": "which is shared microsoft asp.net core app which is saying that any application",
    "start": "3239520",
    "end": "3245200"
  },
  {
    "text": "on your machine that starts with a that uses asp.net core version",
    "start": "3245200",
    "end": "3250440"
  },
  {
    "text": "5.0.0 should also load these dependencies so any application that uses a smart",
    "start": "3250440",
    "end": "3257359"
  },
  {
    "text": "core app should load their dependencies i put into my depth file so that includes",
    "start": "3257359",
    "end": "3264160"
  },
  {
    "text": "loading my extra request diagnostics file into memory so it's available",
    "start": "3264160",
    "end": "3271040"
  },
  {
    "text": "okay that's a good start the next part is a bit more complicated and we need to go over here",
    "start": "3271040",
    "end": "3276960"
  },
  {
    "text": "so it won't just work that's the little checkbox in in azure as well you need to do some more so what",
    "start": "3276960",
    "end": "3283119"
  },
  {
    "text": "you need to do is you need to say dot n and set up an environment variable call and it should be called",
    "start": "3283119",
    "end": "3289920"
  },
  {
    "text": "that so on your server you need to have an environment variable called net",
    "start": "3289920",
    "end": "3295680"
  },
  {
    "text": "additional depth that tells dot net core that when you start an application",
    "start": "3295680",
    "end": "3301839"
  },
  {
    "text": "whatever application that starts from this machine that sees this environment variable we'll go to that folder",
    "start": "3301839",
    "end": "3308160"
  },
  {
    "text": "it will look into that shared folder and see if there's a folder name based on the same app type that you're starting",
    "start": "3308160",
    "end": "3314400"
  },
  {
    "text": "up in this moment which in my case is going to be an html core app in version 5.0.0 and it's going to find my little",
    "start": "3314400",
    "end": "3320960"
  },
  {
    "text": "dependencies json file and it's going to load those dependencies in so i'm actually loading in assemblies that the",
    "start": "3320960",
    "end": "3327680"
  },
  {
    "text": "actual application hasn't asked for i'm just loading the extra stuff that i want on top of the application",
    "start": "3327680",
    "end": "3334799"
  },
  {
    "text": "and then you have to go and say dot and colon and asp.net core hosting startup",
    "start": "3334799",
    "end": "3341520"
  },
  {
    "text": "assemblies because you need to tell asp.net core what assemblies that have to be loaded",
    "start": "3341520",
    "end": "3348000"
  },
  {
    "text": "into memory it should look into to find hosting startup assemblies so basically where do",
    "start": "3348000",
    "end": "3354640"
  },
  {
    "text": "you find that hosting startup thing that starts up to inject things into the isa once you have that in place",
    "start": "3354640",
    "end": "3361680"
  },
  {
    "text": "you run.net enterprise dll",
    "start": "3361680",
    "end": "3367119"
  },
  {
    "text": "and if you look here it says adding generic diagnostics to system diagnostics available at slash",
    "start": "3367119",
    "end": "3373680"
  },
  {
    "text": "diagnostics if i run my application i did run it if i surf to it and i browse to localhost",
    "start": "3373680",
    "end": "3381440"
  },
  {
    "text": "and it's not that addresses it's 5000 it it answers nice i can log in",
    "start": "3381440",
    "end": "3388798"
  },
  {
    "text": "like that and that works and if i go to slash diagnostics i get my diagnostics",
    "start": "3389200",
    "end": "3395119"
  },
  {
    "text": "output and if i stop this application",
    "start": "3395119",
    "end": "3400240"
  },
  {
    "text": "i'm apparently doing something wrong oh i know what why this is not working okay so",
    "start": "3400400",
    "end": "3407040"
  },
  {
    "text": "i i could fix that i can just show you what i did wrong so if you don't sit there and go he did something wrong and he failed um i think i forgot to",
    "start": "3407040",
    "end": "3413680"
  },
  {
    "text": "implement that yes so that should be",
    "start": "3413680",
    "end": "3419640"
  },
  {
    "text": "that sorry i just forgot to stop async stuff to my my thumbnail generator that's why it felt but that was not the",
    "start": "3422799",
    "end": "3427920"
  },
  {
    "text": "important part if you go back out here we go ls",
    "start": "3427920",
    "end": "3433319"
  },
  {
    "text": "diagnostics.log because the last thing that happens in my my thing is that when the application shuts down",
    "start": "3433319",
    "end": "3439920"
  },
  {
    "text": "which is also a nice thing that i probably forgot to mention inside of the log",
    "start": "3439920",
    "end": "3445680"
  },
  {
    "text": "i used this thing i didn't actually know existed either which is i host application lifetime which is an",
    "start": "3445680",
    "end": "3451280"
  },
  {
    "text": "interface that tells you when your application is starting and when your application is stopping so if you want",
    "start": "3451280",
    "end": "3457359"
  },
  {
    "text": "to know when your asp.net core application is about to stop and do something you can go ahead and you can listen to the application stopping",
    "start": "3457359",
    "end": "3464319"
  },
  {
    "text": "event and basically say when it stops go and write all the file to disk and that is kind of what happened happened here",
    "start": "3464319",
    "end": "3470319"
  },
  {
    "text": "so if we go that's my log",
    "start": "3470319",
    "end": "3475760"
  },
  {
    "text": "so i managed to inject myself into my application without the application knowing by",
    "start": "3475760",
    "end": "3481839"
  },
  {
    "text": "creating a runtime store to store my nougat packages create an additional depth folder to have my additional",
    "start": "3481839",
    "end": "3487280"
  },
  {
    "text": "dependencies that should be loaded with all applications created and i host start heart hosting startup to be able",
    "start": "3487280",
    "end": "3492880"
  },
  {
    "text": "to access my ioc container to inject my startup filter that goes ahead and injects things into",
    "start": "3492880",
    "end": "3499920"
  },
  {
    "text": "swait um and i did that with less than two minutes to go",
    "start": "3500160",
    "end": "3506480"
  },
  {
    "text": "so um i want to thank you all for listening i hope you got something out of it",
    "start": "3506480",
    "end": "3512400"
  },
  {
    "text": "somewhere around here i did actually have a powerpoint slide where you could find my contact details if you ever want to talk",
    "start": "3512400",
    "end": "3518880"
  },
  {
    "text": "to me um i have a minute or two if anybody has any questions oh yeah the code is available as well at",
    "start": "3518880",
    "end": "3525440"
  },
  {
    "text": "that address so if you want to download it code and have a look at it it's all there my blog",
    "start": "3525440",
    "end": "3530799"
  },
  {
    "text": "which i think is on that address as well uh is is has a bunch of documentation about how to do it it's fairly",
    "start": "3530799",
    "end": "3536400"
  },
  {
    "text": "undocumented in some parts uh so if anybody has any questions um i'm happy to say that take them if you want to",
    "start": "3536400",
    "end": "3542079"
  },
  {
    "text": "leave and go out and have some food or whatever go ahead and do that thank you all for coming don't forget if you like the session there are green little notes",
    "start": "3542079",
    "end": "3548799"
  },
  {
    "text": "out there if you didn't like the session just look to the right when you go out the door and keep walking",
    "start": "3548799",
    "end": "3554880"
  },
  {
    "text": "thank you everyone",
    "start": "3554880",
    "end": "3558200"
  },
  {
    "text": "you",
    "start": "3565920",
    "end": "3568000"
  }
]