[
  {
    "text": "all right so let's start with the most boring slide we have today right",
    "start": "480",
    "end": "6240"
  },
  {
    "text": "so yeah well actually oh yeah you're staying on the wrong side here it's gonna be bad yeah",
    "start": "6240",
    "end": "13019"
  },
  {
    "text": "so uh I guess uh this is Daniel dorgan yes but you couldn't quote the defender",
    "start": "13019",
    "end": "19380"
  },
  {
    "text": "yeah that's uh well nowadays I'm a solution architect I tend not to code",
    "start": "19380",
    "end": "24960"
  },
  {
    "text": "that much anymore that's really terrible and apart from PowerPoint yeah but but",
    "start": "24960",
    "end": "30260"
  },
  {
    "text": "my heart is in code so I really love coding building software with the good",
    "start": "30260",
    "end": "37079"
  },
  {
    "text": "design been in in the business for more than 20 years uh built everything from high",
    "start": "37079",
    "end": "44879"
  },
  {
    "text": "performance systems to um data mining stuff to pacemakers",
    "start": "44879",
    "end": "51239"
  },
  {
    "text": "pacemakers pacemakers all sort of things out there but Dan you're the secure",
    "start": "51239",
    "end": "56579"
  },
  {
    "text": "domain philosopher yeah if there's any philosophical content in this presentation I might be guilted to to",
    "start": "56579",
    "end": "63660"
  },
  {
    "text": "some of it I'm also Coda it started engineering physics and computer science and since",
    "start": "63660",
    "end": "71580"
  },
  {
    "text": "then I I mean coding is my craft and apart from that I've got an old interest in in",
    "start": "71580",
    "end": "78420"
  },
  {
    "text": "security which we have in common uh but also in organizations like agile but",
    "start": "78420",
    "end": "85740"
  },
  {
    "text": "on organization level how do you make an entire organization work well together we're keeping the kind of like",
    "start": "85740",
    "end": "92520"
  },
  {
    "text": "engineering happiness and fund uh that we want to to keep",
    "start": "92520",
    "end": "97979"
  },
  {
    "text": "so what's in common for us is that we both come from the coding perspective but has always had an interest in",
    "start": "97979",
    "end": "104579"
  },
  {
    "text": "security and it turns out that we actually wrote a book called secure by Design which you",
    "start": "104579",
    "end": "109740"
  },
  {
    "text": "will probably learn more about as a company Omega point is a cyber security telestation firm we are actually located",
    "start": "109740",
    "end": "117479"
  },
  {
    "text": "here in Oslo as well under the name so yeah please visit them if you have",
    "start": "117479",
    "end": "124439"
  },
  {
    "text": "the chance anyhow if you want to learn more about this please google it yeah yeah can we",
    "start": "124439",
    "end": "129899"
  },
  {
    "text": "get on this interesting stuff good stuff yeah so anyway in case you should fall asleep or",
    "start": "129899",
    "end": "136800"
  },
  {
    "text": "have to leave or just zoom out uh these are the conclusions that we'll return to",
    "start": "136800",
    "end": "141840"
  },
  {
    "text": "in the end they did not make much sense now perhaps but they might make it when we get to them so we're talking about a",
    "start": "141840",
    "end": "149099"
  },
  {
    "text": "little bit of who should be in control of logging some conclusions about the main Primitives",
    "start": "149099",
    "end": "156260"
  },
  {
    "text": "what HTTP says about it how we could use",
    "start": "156260",
    "end": "161760"
  },
  {
    "text": "look at logging as subsystems and perhaps with all these things together",
    "start": "161760",
    "end": "167099"
  },
  {
    "text": "then type the Battle of lung fujay might have been avoidable yeah but we'll get",
    "start": "167099",
    "end": "175200"
  },
  {
    "text": "back to that so how do we get here well we have of course an agenda we have an agenda we're going to cover the universe",
    "start": "175200",
    "end": "181200"
  },
  {
    "text": "so relieving so now we know we're actually have a plan so that we will be finished here and not keep you from",
    "start": "181200",
    "end": "188940"
  },
  {
    "text": "next presentation um of course we're going to cover the autonomy of the attack itself so everybody on the same page do everybody",
    "start": "188940",
    "end": "196739"
  },
  {
    "text": "remember that there wasn't load for Jai the battle like the 9th of the December",
    "start": "196739",
    "end": "202200"
  },
  {
    "text": "yoga everyone also I mean we're at security conference so I just assume everyone remembers all the details of it",
    "start": "202200",
    "end": "210920"
  },
  {
    "text": "I will brush it up right that's very good we're going to cover 20 of all of",
    "start": "210920",
    "end": "215940"
  },
  {
    "text": "us top ten yeah yeah so uh which will lead us to talk about",
    "start": "215940",
    "end": "221220"
  },
  {
    "text": "what we mean with the secure by Design like yesterday not today but just describe what we mean when we talk about",
    "start": "221220",
    "end": "229019"
  },
  {
    "text": "that mindset and then of course we're going to cover some patterns with the insecure by",
    "start": "229019",
    "end": "234420"
  },
  {
    "text": "Design and see how they actually um address the issues we saw with log4j",
    "start": "234420",
    "end": "240180"
  },
  {
    "text": "and see how this could have been used to mitigate the attack and we think the word mitigate is is important because in",
    "start": "240180",
    "end": "248760"
  },
  {
    "text": "in true security never totally close or guarantees something it's not subtraction it's kind of it's division",
    "start": "248760",
    "end": "256019"
  },
  {
    "text": "you make it less likely and less likely until the risk is acceptable",
    "start": "256019",
    "end": "261419"
  },
  {
    "text": "right so what did the actual log for J report say it's interesting if we look at the the",
    "start": "261419",
    "end": "268560"
  },
  {
    "text": "CV this is the second second sentence it says an attacker who can control log",
    "start": "268560",
    "end": "276720"
  },
  {
    "text": "messages or log message parameters can execute",
    "start": "276720",
    "end": "281960"
  },
  {
    "text": "arbitrary code loaded from ldap service when message",
    "start": "281960",
    "end": "287880"
  },
  {
    "text": "lookup substitution is enabled since TalkBack message substitution look",
    "start": "287880",
    "end": "293940"
  },
  {
    "text": "at something that ldap service serves and that it can execute we can make",
    "start": "293940",
    "end": "300720"
  },
  {
    "text": "the target execute arbitrary code that sounds pretty severe doesn't it there's",
    "start": "300720",
    "end": "307979"
  },
  {
    "text": "so many wrongs in this sentence I I don't know but but okay for the sake of argument",
    "start": "307979",
    "end": "313620"
  },
  {
    "text": "let's have a look at the innocent example",
    "start": "313620",
    "end": "320220"
  },
  {
    "text": "right this is how we build things client server right",
    "start": "320220",
    "end": "326400"
  },
  {
    "text": "and we have a client that will send some kind of request which will promote some",
    "start": "326400",
    "end": "333600"
  },
  {
    "text": "data over to the server in this case you have to make a simple example we say it's an X API version header in",
    "start": "333600",
    "end": "340919"
  },
  {
    "text": "the request which will be some kind of string on the server",
    "start": "340919",
    "end": "346560"
  },
  {
    "text": "yeah but the important thing on the server is that there at least somewhere in the logic there is a one line where",
    "start": "346560",
    "end": "353460"
  },
  {
    "text": "you log the input right there might be business logic",
    "start": "353460",
    "end": "359039"
  },
  {
    "text": "before and after but the essentials of this is that the input from the client",
    "start": "359039",
    "end": "366000"
  },
  {
    "text": "is and adverb item to the login so how do we attack this well",
    "start": "366000",
    "end": "373080"
  },
  {
    "text": "the interesting thing is to try to provoke the log4j framework to do",
    "start": "373080",
    "end": "380460"
  },
  {
    "text": "something that the developer did not think about so uh we'll send an evil attraction and",
    "start": "380460",
    "end": "388860"
  },
  {
    "text": "this will be the X API version dollar curly brace yendi",
    "start": "388860",
    "end": "395340"
  },
  {
    "text": "ldap evil example com basic command base64 blah blah blah blah blah curl",
    "start": "395340",
    "end": "400560"
  },
  {
    "text": "brace and you all know that the dollar sign that means you know execute something or do that substitution right",
    "start": "400560",
    "end": "406500"
  },
  {
    "text": "and this is the peculiarity of log4j that not everybody was aware of",
    "start": "406500",
    "end": "414199"
  },
  {
    "text": "so what happens then on the vulnerable server is that of course you saw the log",
    "start": "414240",
    "end": "419940"
  },
  {
    "text": "statement earlier that you know we replaced API version variable by this string so then from naive perspective if",
    "start": "419940",
    "end": "428580"
  },
  {
    "text": "I send this string to log for J as an infer message what do",
    "start": "428580",
    "end": "434100"
  },
  {
    "text": "you expect to learn4j to do well as a developer I expected to end up in the",
    "start": "434100",
    "end": "440400"
  },
  {
    "text": "log this way right so your expertise receive the request for API version dollar curler brace j d n d i colon ldap",
    "start": "440400",
    "end": "449699"
  },
  {
    "text": "Etc yeah it kind of makes sense doesn't it if I send the string",
    "start": "449699",
    "end": "455220"
  },
  {
    "text": "it will just take that string and put it into log everyone agrees",
    "start": "455220",
    "end": "460500"
  },
  {
    "text": "if I take a string and in my bash terminal say Echo",
    "start": "460500",
    "end": "466139"
  },
  {
    "text": "double quote and put in some kind of string like that what we expect it to do",
    "start": "466139",
    "end": "473060"
  },
  {
    "text": "execute expect it to just Echo it back",
    "start": "473060",
    "end": "478500"
  },
  {
    "text": "unless unless we have a dollar because then we are aware that the dollar sign has got a",
    "start": "478500",
    "end": "485759"
  },
  {
    "text": "special meaning but Dan I'm not I'm not in the Shell I'm in the server I'm just doing logging oh yes you are in the",
    "start": "485759",
    "end": "493259"
  },
  {
    "text": "shell and I we think that this is one of the core problems that log4j has got",
    "start": "493259",
    "end": "499919"
  },
  {
    "text": "peculiarities that developers are not aware of",
    "start": "499919",
    "end": "505139"
  },
  {
    "text": "if you're not aware of the peculiarities of your login framework or of your SQL",
    "start": "505139",
    "end": "510599"
  },
  {
    "text": "database or of your then mistakes will happen and we think that developers in general",
    "start": "510599",
    "end": "518279"
  },
  {
    "text": "care too little about logging it's just something I have to log it's",
    "start": "518279",
    "end": "524940"
  },
  {
    "text": "someone nagging me I have to log say log it so but let's get back to what happens here so of course the server picks this",
    "start": "524940",
    "end": "531660"
  },
  {
    "text": "up and sends that to the log4j framework and what the framework does is of course",
    "start": "531660",
    "end": "537899"
  },
  {
    "text": "act upon the dollar sign and the D and the I command so it will evaluate",
    "start": "537899",
    "end": "544380"
  },
  {
    "text": "so it will say okay it's a giant day command it's using the Elder protocol I",
    "start": "544380",
    "end": "550680"
  },
  {
    "text": "will reach out to the ldap server named evil example.com it will send get",
    "start": "550680",
    "end": "560339"
  },
  {
    "text": "yeah then there's actually a redirect area but okay so it will try to resolve the resource but what will end up with",
    "start": "560339",
    "end": "567060"
  },
  {
    "text": "actually getting back the class that is a class file which with byte",
    "start": "567060",
    "end": "574320"
  },
  {
    "text": "code and that could contain anything right in this particular example it contains the",
    "start": "574320",
    "end": "580140"
  },
  {
    "text": "byte code of the Java command runtime we get runtime execute touch slash TMP",
    "start": "580140",
    "end": "585959"
  },
  {
    "text": "slash",
    "start": "585959",
    "end": "588320"
  },
  {
    "text": "so uh it could be doing something else yes so of course on the server that gets",
    "start": "591260",
    "end": "597839"
  },
  {
    "text": "executed and there you go gosh hmm",
    "start": "597839",
    "end": "603959"
  },
  {
    "text": "oh shoot okay so if we look back on this description",
    "start": "603959",
    "end": "610260"
  },
  {
    "text": "it says an attacker who can control log messages an attacker that can control log",
    "start": "610260",
    "end": "617459"
  },
  {
    "text": "messages yeah I mean you can all hear it right and this is insane Edgar can",
    "start": "617459",
    "end": "622980"
  },
  {
    "text": "control long messages I would say that you know",
    "start": "622980",
    "end": "630000"
  },
  {
    "text": "an attacker should never be in charge of the log right who on Earth designed",
    "start": "630000",
    "end": "637620"
  },
  {
    "text": "an application so that the attacker is in control of the log messages",
    "start": "637620",
    "end": "643920"
  },
  {
    "text": "isn't that kind of like weird who should be in charge of logging",
    "start": "643920",
    "end": "650820"
  },
  {
    "text": "the application the application itself it doesn't make sense that that you kind",
    "start": "650820",
    "end": "656640"
  },
  {
    "text": "of like design your application to have some kind of tunnel from the the outside",
    "start": "656640",
    "end": "662519"
  },
  {
    "text": "and into your backend infrastructure and say hey I'll just shovel them",
    "start": "662519",
    "end": "668760"
  },
  {
    "text": "so we can all conclude I think that the design is broken",
    "start": "668760",
    "end": "674700"
  },
  {
    "text": "something is wrong with how we have built it of course we could argue a lot about",
    "start": "674700",
    "end": "680459"
  },
  {
    "text": "whether log4j has got an appropriate design or not whether this inclusion of the",
    "start": "680459",
    "end": "686399"
  },
  {
    "text": "um execution uh functionality is a good idea or not",
    "start": "686399",
    "end": "692880"
  },
  {
    "text": "we can argue well that should be feature flagged and if that feature should be Default true or false but taking all",
    "start": "692880",
    "end": "699839"
  },
  {
    "text": "those things aside if we look at how we produced log4j",
    "start": "699839",
    "end": "706079"
  },
  {
    "text": "something is broken yeah so this brings up the idea that perhaps we have to look",
    "start": "706079",
    "end": "713579"
  },
  {
    "text": "at ourselves and see and go to maybe ovasp for guidance right",
    "start": "713579",
    "end": "719279"
  },
  {
    "text": "so let's say what has ovas to say about this kind of of problem we've got well",
    "start": "719279",
    "end": "725160"
  },
  {
    "text": "as we know there was an attack Vector coming in there was an injection attack",
    "start": "725160",
    "end": "730399"
  },
  {
    "text": "it's an injection it takes data and promotes it to code which is run so yes",
    "start": "730399",
    "end": "736740"
  },
  {
    "text": "it's an injection attack no doubt but at the same time the design was broken right because we enabled someone else to",
    "start": "736740",
    "end": "744899"
  },
  {
    "text": "do stuff with our log so this is an example of an insecure design it has not been designed in such",
    "start": "744899",
    "end": "751920"
  },
  {
    "text": "a way that it's resilient attacks so uvasp has got good guidance here they",
    "start": "751920",
    "end": "757980"
  },
  {
    "text": "say you should use secure designs instead okay it's sort of like saying you know",
    "start": "757980",
    "end": "765300"
  },
  {
    "text": "don't write bugs or to avoid going into the ditch one",
    "start": "765300",
    "end": "770820"
  },
  {
    "text": "driving your car please stay on the road yeah it's a good advice it's good advice",
    "start": "770820",
    "end": "777300"
  },
  {
    "text": "that's mean it's true but it's not again it's a correct advice it's correct yeah",
    "start": "777300",
    "end": "782459"
  },
  {
    "text": "it's correct the interesting theist is if you dig it a little bit into to",
    "start": "782459",
    "end": "787740"
  },
  {
    "text": "design secure design you can say that security sign kind of like falls into two categories",
    "start": "787740",
    "end": "793860"
  },
  {
    "text": "one is that you got designs that are intended for security purposes",
    "start": "793860",
    "end": "800579"
  },
  {
    "text": "they are intended to make things more secure the other one our observation from other",
    "start": "800579",
    "end": "807380"
  },
  {
    "text": "from before is that there are a lot of designs that are good but for other",
    "start": "807380",
    "end": "813180"
  },
  {
    "text": "purposes but also is beneficial for design and for security sorry for",
    "start": "813180",
    "end": "818880"
  },
  {
    "text": "security so they have good security as a nice side effect",
    "start": "818880",
    "end": "823980"
  },
  {
    "text": "so that sort of brings us in to the idea of secure by Design",
    "start": "823980",
    "end": "831959"
  },
  {
    "text": "Okay so we've got a lot of squares and triangles here yeah what is that I guess",
    "start": "831959",
    "end": "837899"
  },
  {
    "text": "the squares are normal bugs okay so this is 10 that the realm of functionality",
    "start": "837899",
    "end": "845100"
  },
  {
    "text": "for a system yeah and some of that functionality might not be wanted we",
    "start": "845100",
    "end": "850380"
  },
  {
    "text": "call that kind of functionality buggies right misbehaving code or additional features or I don't know yeah accidental",
    "start": "850380",
    "end": "859019"
  },
  {
    "text": "features okay so again we've got some kind of normal bugs what's a normal bug uh I don't know could it be wrong color",
    "start": "859019",
    "end": "866040"
  },
  {
    "text": "on a button or could it be I don't know it's working might be out",
    "start": "866040",
    "end": "872519"
  },
  {
    "text": "of order uh Scandinavian characters ending up in wrong places whatever",
    "start": "872519",
    "end": "878940"
  },
  {
    "text": "are these security problems in some contexts it could be a security problem",
    "start": "878940",
    "end": "885000"
  },
  {
    "text": "right I mean I guess if somebody has a you know alarm button and that's green it's kind of bad",
    "start": "885000",
    "end": "892560"
  },
  {
    "text": "to push that one right okay everything can be turned into a problem but I mean",
    "start": "892560",
    "end": "897959"
  },
  {
    "text": "a list that is not sorted in correct order that we do not generally consider that the security but",
    "start": "897959",
    "end": "905040"
  },
  {
    "text": "however if the the list contains stuff you shouldn't be shouldn't see",
    "start": "905040",
    "end": "911040"
  },
  {
    "text": "it's important confidentiality or against your integrity or against availability or traceability then we",
    "start": "911040",
    "end": "917940"
  },
  {
    "text": "have a security but so we could probably say that there are bugs that have a very enclosed coupling with security right",
    "start": "917940",
    "end": "925680"
  },
  {
    "text": "losing money or allowing access or whatever right note here that we do not",
    "start": "925680",
    "end": "931260"
  },
  {
    "text": "make any uh any distinction between security and the normal bugs in essence",
    "start": "931260",
    "end": "937980"
  },
  {
    "text": "we say they are in essence the same thing but those bugs that happens to",
    "start": "937980",
    "end": "945740"
  },
  {
    "text": "degrade security concerns we call vulnerabilities",
    "start": "945740",
    "end": "950820"
  },
  {
    "text": "so that's real no distinction availability is nothing different really than a just misbehaving code",
    "start": "950820",
    "end": "957720"
  },
  {
    "text": "so yeah how do we how do we address Banks how do we avoid bugs well I know",
    "start": "957720",
    "end": "963779"
  },
  {
    "text": "that you guys are doing this as well we apply some sort of design pattern on top of this right okay so what design",
    "start": "963779",
    "end": "968880"
  },
  {
    "text": "patterns have you got a favorite I don't know let's say immutability okay immutability okay it's a nice",
    "start": "968880",
    "end": "976380"
  },
  {
    "text": "design I like it that's got a lot of benefits but does it have a security benefit well yes it does okay so what",
    "start": "976380",
    "end": "984120"
  },
  {
    "text": "what what is the benefit from a security perspective if you can't mutate something it won't change and if it",
    "start": "984120",
    "end": "990899"
  },
  {
    "text": "won't change you have preserved Integrity of it right okay so it makes",
    "start": "990899",
    "end": "996079"
  },
  {
    "text": "Integrity concerns more likely to be addressed",
    "start": "996079",
    "end": "1001160"
  },
  {
    "text": "less likely to have mistakes in okay so but this uh in immutability does it",
    "start": "1001160",
    "end": "1007399"
  },
  {
    "text": "address all bugs in the world I wish but that's not the case right so yes uh one",
    "start": "1007399",
    "end": "1013100"
  },
  {
    "text": "design tattoo address a class of bugs making them less likely",
    "start": "1013100",
    "end": "1018440"
  },
  {
    "text": "Essence is always in security there's no guarantee and of course we can distinguish between",
    "start": "1018440",
    "end": "1025400"
  },
  {
    "text": "what we call secure by Design patterns and other design patterns okay that so",
    "start": "1025400",
    "end": "1031280"
  },
  {
    "text": "what's the distinction here you got one that is not uh well that one only covers",
    "start": "1031280",
    "end": "1037040"
  },
  {
    "text": "those um those uh non-security normal bugs which means",
    "start": "1037040",
    "end": "1043040"
  },
  {
    "text": "that you know it's a good pattern but it's not particularly secure by design pattern so a pattern that we call secure",
    "start": "1043040",
    "end": "1050780"
  },
  {
    "text": "by Design is something that even if it was original not the devised for secured",
    "start": "1050780",
    "end": "1056840"
  },
  {
    "text": "purposes IT addresses security concerns yeah so make something that we want to",
    "start": "1056840",
    "end": "1062000"
  },
  {
    "text": "keep in our back pocket and use more deliberately so but in a book you can't draw it like",
    "start": "1062000",
    "end": "1069320"
  },
  {
    "text": "this you have to write something like that you have to have password in a book there needs to be buzzwords so basically",
    "start": "1069320",
    "end": "1075919"
  },
  {
    "text": "what we say or what we claim is that secure by Design is a mindset and strategy right and it's for creating",
    "start": "1075919",
    "end": "1082280"
  },
  {
    "text": "secure software by focusing on good design at least for buzzwords yeah",
    "start": "1082280",
    "end": "1087740"
  },
  {
    "text": "so which means it's a good sentence the the idea is of course that if we if we",
    "start": "1087740",
    "end": "1093860"
  },
  {
    "text": "choose good design patterns that helps us build great software we're going to get security sort of as a benefit or a",
    "start": "1093860",
    "end": "1101360"
  },
  {
    "text": "implicit side effect right okay so and we would like a little",
    "start": "1101360",
    "end": "1107000"
  },
  {
    "text": "bit to turn this table around and say that if you think about when you are developing how many hair like crafting",
    "start": "1107000",
    "end": "1113780"
  },
  {
    "text": "code on a more or less daily basis yeah fantastic fantastic I mean if you think",
    "start": "1113780",
    "end": "1119419"
  },
  {
    "text": "about what you do on a daily basis you'll find a lot of designs that you think are nice",
    "start": "1119419",
    "end": "1124520"
  },
  {
    "text": "and you think about a little bit more you'll soon realize that oh actually these and these designs actually has got",
    "start": "1124520",
    "end": "1131360"
  },
  {
    "text": "to secure the benefit voila you're doing secure by Design",
    "start": "1131360",
    "end": "1136820"
  },
  {
    "text": "take that run with it speak with your colleagues try to put together your own pattern catalogs or nice designs and",
    "start": "1136820",
    "end": "1143780"
  },
  {
    "text": "then start using them more deliberately and you'll just end up with more secure software which is fantastic since this",
    "start": "1143780",
    "end": "1150200"
  },
  {
    "text": "was a log for Jay talk we figured that okay let's see what designs we can bring in in order to address these log4j",
    "start": "1150200",
    "end": "1157880"
  },
  {
    "text": "problems so we are actually going to focus on these",
    "start": "1157880",
    "end": "1162919"
  },
  {
    "text": "parts domain Primitives is a very interesting Concept in Secure by Design we're also going to look at HTTP to sort",
    "start": "1162919",
    "end": "1170299"
  },
  {
    "text": "of guide us where to log that's kind of weird but yes that's what we're going to do",
    "start": "1170299",
    "end": "1175700"
  },
  {
    "text": "um we'll have a look at one way one of our patterns about making logging",
    "start": "1175700",
    "end": "1183140"
  },
  {
    "text": "domain oriented logging API and then there's actually not a pattern",
    "start": "1183140",
    "end": "1188360"
  },
  {
    "text": "I think in the hexagonal Security in depth it's not a it's not a pattern",
    "start": "1188360",
    "end": "1193460"
  },
  {
    "text": "coding pattern as per se it's more an observation on how this pattern interact and creates Security in depth so yeah",
    "start": "1193460",
    "end": "1202100"
  },
  {
    "text": "sure so uh",
    "start": "1202100",
    "end": "1206559"
  },
  {
    "text": "let's get started the main Primitives all right okay let's jump into that one uh anyone have been on our previous",
    "start": "1207640",
    "end": "1214280"
  },
  {
    "text": "presentations on the main Primitives we have anyone yeah excellent",
    "start": "1214280",
    "end": "1219380"
  },
  {
    "text": "um we're not going to cover it in depth now we see how it's going to cover enough of it for for how it applies to",
    "start": "1219380",
    "end": "1225500"
  },
  {
    "text": "log for J so but what is the domain primitive the basic idea or or the core core of it is",
    "start": "1225500",
    "end": "1234080"
  },
  {
    "text": "that if we capture Concepts in our business domain they have a very precise meaning and",
    "start": "1234080",
    "end": "1242240"
  },
  {
    "text": "capturing that Precision is something that's going to be very efficient or",
    "start": "1242240",
    "end": "1247760"
  },
  {
    "text": "effective in in reducing uh injection attacks for example if you are in the",
    "start": "1247760",
    "end": "1254600"
  },
  {
    "text": "hospitality domain if you go into a hotel bar reception or talk with uh housekeeping they all know",
    "start": "1254600",
    "end": "1262039"
  },
  {
    "text": "what a room number is there's no need to explain the concept of room number",
    "start": "1262039",
    "end": "1267679"
  },
  {
    "text": "so when we say a room number is an integer a room number is a string we're not making anything clearer we're making",
    "start": "1267679",
    "end": "1274580"
  },
  {
    "text": "it a disservice it's just opening up a broader range of",
    "start": "1274580",
    "end": "1279919"
  },
  {
    "text": "her own numbers because the sentence I just spoke is not room number but it is",
    "start": "1279919",
    "end": "1284960"
  },
  {
    "text": "a string so let's bring that Clarity into our code say that we will not use the",
    "start": "1284960",
    "end": "1291559"
  },
  {
    "text": "language Primitives of the programming language we'll do use the Primitives of the domain such as",
    "start": "1291559",
    "end": "1298159"
  },
  {
    "text": "we take the room number here and we have now taken the type system to our",
    "start": "1298159",
    "end": "1303500"
  },
  {
    "text": "advantage basically what we're saying is that we're only going to accept a particular range of numbers of different",
    "start": "1303500",
    "end": "1310580"
  },
  {
    "text": "structure of them and such so we sort of tightening the definition of what they",
    "start": "1310580",
    "end": "1315620"
  },
  {
    "text": "call the room number in this particular application and we hinge about upon the",
    "start": "1315620",
    "end": "1320840"
  },
  {
    "text": "concept of immutability we're using the same kind of construct that in domain",
    "start": "1320840",
    "end": "1327380"
  },
  {
    "text": "driven designs establish value object what we want to put a Twist on is that this is an intelligent object it can do",
    "start": "1327380",
    "end": "1335360"
  },
  {
    "text": "its own validation for example it can do a lot of other things as well but in",
    "start": "1335360",
    "end": "1340700"
  },
  {
    "text": "particular we want to stress that it will do its own validation and we'll do it in the Constructor",
    "start": "1340700",
    "end": "1346700"
  },
  {
    "text": "so if you're trying to construct a room number on",
    "start": "1346700",
    "end": "1352600"
  },
  {
    "text": "378 it might be a valid floor but it will not be between 1 and 50 on that",
    "start": "1352600",
    "end": "1358940"
  },
  {
    "text": "floor so it will throw an exception and you will never get to the point where",
    "start": "1358940",
    "end": "1364039"
  },
  {
    "text": "you can talk about room number 376. because that object will never exist",
    "start": "1364039",
    "end": "1371179"
  },
  {
    "text": "so the idea here is that you have validated building blocks right that are",
    "start": "1371179",
    "end": "1376640"
  },
  {
    "text": "immutable very nice but what this you mentioned that the benefit for injection tax yes",
    "start": "1376640",
    "end": "1382640"
  },
  {
    "text": "if you look at it this way it means that if you have user input negative 101 that",
    "start": "1382640",
    "end": "1388100"
  },
  {
    "text": "is of course not an acceptable range because room numbers apparently could be between 1 and 49 between floor one and",
    "start": "1388100",
    "end": "1395000"
  },
  {
    "text": "seven what could room number minus 101 do in the system",
    "start": "1395000",
    "end": "1401919"
  },
  {
    "text": "I don't know perhaps if I put a bar tab on minus",
    "start": "1402860",
    "end": "1409659"
  },
  {
    "text": "346 it might just deduct the amount for my bill",
    "start": "1409659",
    "end": "1415039"
  },
  {
    "text": "perhaps I don't know it could there's a lot of weird things that can",
    "start": "1415039",
    "end": "1420440"
  },
  {
    "text": "happen if you are if you're able to manipulate it through weird values but",
    "start": "1420440",
    "end": "1426140"
  },
  {
    "text": "putting on the glasses of you know from a security perspective what we say here is that we are actually reducing the",
    "start": "1426140",
    "end": "1432440"
  },
  {
    "text": "attack vectors right to only acceptable values everything else will be rejected",
    "start": "1432440",
    "end": "1439159"
  },
  {
    "text": "right do you remember the the Amazon bug they had from starting around 2008 if",
    "start": "1439159",
    "end": "1447200"
  },
  {
    "text": "you added if you had a cart with a lot of books and a lot of quantities and then you could add",
    "start": "1447200",
    "end": "1452419"
  },
  {
    "text": "secure by Design but okay it was not published by then but look at that it's secure by Design and then say I want",
    "start": "1452419",
    "end": "1459020"
  },
  {
    "text": "minus one copy it would like to deduct that amount from the total of your order that was a",
    "start": "1459020",
    "end": "1465860"
  },
  {
    "text": "discount feature but yeah so real handing out the fun part was that you also got the book because the the the",
    "start": "1465860",
    "end": "1472760"
  },
  {
    "text": "the uh inventory system did not know how to",
    "start": "1472760",
    "end": "1478280"
  },
  {
    "text": "handle negative numbers so they just assumed they were posters so you would get the books but have to",
    "start": "1478280",
    "end": "1484340"
  },
  {
    "text": "unpay for it all right so if you look at this from a sort of a logging perspective then right returning to our",
    "start": "1484340",
    "end": "1491179"
  },
  {
    "text": "previous example so that means that we would then wrap the API version inside",
    "start": "1491179",
    "end": "1497299"
  },
  {
    "text": "of a something called The Domain primitive API version with all those rules for whatever a API version is",
    "start": "1497299",
    "end": "1503780"
  },
  {
    "text": "apparently this is kind of weird they only accept a version 3.4 yeah a digit between zero",
    "start": "1503780",
    "end": "1512780"
  },
  {
    "text": "nine and it's only two digits yeah you can you can't have 3.4.6 you can't have",
    "start": "1512780",
    "end": "1519340"
  },
  {
    "text": "3.12 but whatever this API versioning scheme only allows for that we type that",
    "start": "1519340",
    "end": "1525620"
  },
  {
    "text": "as a design they have done their domain modeling the interesting part about the",
    "start": "1525620",
    "end": "1530779"
  },
  {
    "text": "domain Primitives is note that we insist on creating an domain primitive object as early as",
    "start": "1530779",
    "end": "1539179"
  },
  {
    "text": "possible so we get it as a string from the web we",
    "start": "1539179",
    "end": "1546559"
  },
  {
    "text": "can't do much about it but this possibly we're trying to wrap it up it's a little bit like unboxing but with that",
    "start": "1546559",
    "end": "1553159"
  },
  {
    "text": "way around you've read it and you make a nice stamp on saying this is a API",
    "start": "1553159",
    "end": "1558559"
  },
  {
    "text": "version object uh and then we can log it the problem here",
    "start": "1558559",
    "end": "1565279"
  },
  {
    "text": "though is that as soon as you did that and you passed in something that",
    "start": "1565279",
    "end": "1570500"
  },
  {
    "text": "violated the validation rules of this API version like the log4j attack string",
    "start": "1570500",
    "end": "1576620"
  },
  {
    "text": "it doesn't fit that pattern it will throw an exception so validate matches",
    "start": "1576620",
    "end": "1581960"
  },
  {
    "text": "will throw an exception the API version constructed through an exception and the",
    "start": "1581960",
    "end": "1587779"
  },
  {
    "text": "entire request will break and it will return to the client it'll be a 500 I",
    "start": "1587779",
    "end": "1593960"
  },
  {
    "text": "guess right yeah which is not good but at least we have protected our log it's a good start so",
    "start": "1593960",
    "end": "1601279"
  },
  {
    "text": "yeah we need to come back to this I think right but the interesting part here since we did reduce the attack",
    "start": "1601279",
    "end": "1608539"
  },
  {
    "text": "Vector to only valid inputs",
    "start": "1608539",
    "end": "1614539"
  },
  {
    "text": "it brings this uh sort of takeaway right",
    "start": "1614539",
    "end": "1620539"
  },
  {
    "text": "that we could only have valid data entering",
    "start": "1620539",
    "end": "1625760"
  },
  {
    "text": "our application so from all strings we have reduced it to all the strings that fit dig it",
    "start": "1625760",
    "end": "1632720"
  },
  {
    "text": "period dig it but it might be possible to launch an",
    "start": "1632720",
    "end": "1637880"
  },
  {
    "text": "attack through that hole possibly but at least all the other attacks are not possible and longer",
    "start": "1637880",
    "end": "1644059"
  },
  {
    "text": "but then it also opens up this question could we then simply",
    "start": "1644059",
    "end": "1650720"
  },
  {
    "text": "avoided the entire log4j debacle by using domain Primitives",
    "start": "1650720",
    "end": "1658720"
  },
  {
    "text": "or or okay let's see if we if we talk about things that input that take numerical",
    "start": "1659419",
    "end": "1666620"
  },
  {
    "text": "values they would be restricted so we would not be able to pass in the",
    "start": "1666620",
    "end": "1673700"
  },
  {
    "text": "Genji a text ring if we look at names like personal names",
    "start": "1673700",
    "end": "1679779"
  },
  {
    "text": "probably now they will be rejected don't know when the naming standard in the",
    "start": "1679779",
    "end": "1685820"
  },
  {
    "text": "world that allows for weird characters like that if we think about addresses shipping address",
    "start": "1685820",
    "end": "1692200"
  },
  {
    "text": "so so basically I think we we can conclude that we can reduce the",
    "start": "1692200",
    "end": "1697659"
  },
  {
    "text": "vulnerability now to input fields or whatever you have forms where",
    "start": "1697659",
    "end": "1703520"
  },
  {
    "text": "you accept all characters or at least free text",
    "start": "1703520",
    "end": "1708559"
  },
  {
    "text": "like if you've got free text on a website that discuss programming then",
    "start": "1708559",
    "end": "1713840"
  },
  {
    "text": "you need to allow dollar signs and curly braces you might want to restrict the way emojis you might want to restrict",
    "start": "1713840",
    "end": "1720919"
  },
  {
    "text": "the way other alphabets uh like the Hindi alphabet stuff like that but at",
    "start": "1720919",
    "end": "1728480"
  },
  {
    "text": "least now the texturing will still fit into that into that home but think of this now",
    "start": "1728480",
    "end": "1734900"
  },
  {
    "text": "that what we have done simply by using this construct we have reduced it to only those places",
    "start": "1734900",
    "end": "1741440"
  },
  {
    "text": "I don't know what the percentage is but it should be significant right",
    "start": "1741440",
    "end": "1746600"
  },
  {
    "text": "on a side note just one point out the trick we used making an API version object will have huge",
    "start": "1746600",
    "end": "1753440"
  },
  {
    "text": "benefits on the design on the inside it will no longer be as strings flying around it will be an API version object",
    "start": "1753440",
    "end": "1759559"
  },
  {
    "text": "you don't need to revalidate it anywhere you can write more intelligent methods",
    "start": "1759559",
    "end": "1765919"
  },
  {
    "text": "that will work on top of that abstraction Etc so it's really there for a lot of other purposes so rather the",
    "start": "1765919",
    "end": "1771980"
  },
  {
    "text": "benefits but it also gives this benefit of the security",
    "start": "1771980",
    "end": "1777440"
  },
  {
    "text": "so I think we need to do something more yeah so domain Primitives could have",
    "start": "1777440",
    "end": "1783080"
  },
  {
    "text": "been seen as a perimeter-based solution right we added this layer of",
    "start": "1783080",
    "end": "1789559"
  },
  {
    "text": "of Primitives and but then we sort of are vulnerable as soon as we get past",
    "start": "1789559",
    "end": "1795020"
  },
  {
    "text": "those Primitives right but in fact they are used throughout the entire application so we are getting more and",
    "start": "1795020",
    "end": "1801260"
  },
  {
    "text": "more towards what nist talks about you know uh security and depth or defense in",
    "start": "1801260",
    "end": "1806360"
  },
  {
    "text": "depth right you all have seen this right we all move from parameter defense to Security in depth in various ways so how",
    "start": "1806360",
    "end": "1813080"
  },
  {
    "text": "does that this apply to design thinking well um in fact what we actually do is that",
    "start": "1813080",
    "end": "1820039"
  },
  {
    "text": "we we don't have a layered cake we we have a hexagonal structure of this so",
    "start": "1820039",
    "end": "1825260"
  },
  {
    "text": "these design patterns we are going to continue the benefit of them is that they are connected and interact and",
    "start": "1825260",
    "end": "1831500"
  },
  {
    "text": "support each other so it's not like an onion where you're able to get through the first defense and then you don't",
    "start": "1831500",
    "end": "1837799"
  },
  {
    "text": "have to care about it like the domain Primitives they will be all over the place they will also come",
    "start": "1837799",
    "end": "1843860"
  },
  {
    "text": "back in the domain oriented logging apis so there's no way around them they will",
    "start": "1843860",
    "end": "1849380"
  },
  {
    "text": "as soon as you get through that first layer you will encounter them over and over again",
    "start": "1849380",
    "end": "1854419"
  },
  {
    "text": "the interesting thing now then is that we need something else then to sort of uh",
    "start": "1854419",
    "end": "1860919"
  },
  {
    "text": "expand the idea of domain Primitives perhaps or add to this type of security",
    "start": "1860919",
    "end": "1866539"
  },
  {
    "text": "part so let's have a look at HTTP and",
    "start": "1866539",
    "end": "1871760"
  },
  {
    "text": "see what they say about logging right okay but I've read the https back anyone has read this back like all of it or",
    "start": "1871760",
    "end": "1879440"
  },
  {
    "text": "most of it well most of it yeah does it say anything about logging it doesn't it doesn't even mention",
    "start": "1879440",
    "end": "1886580"
  },
  {
    "text": "logging so how can we get so what does http say about logging nothing we're",
    "start": "1886580",
    "end": "1892340"
  },
  {
    "text": "done okay so if we're leaving or yeah not really okay so let's just you",
    "start": "1892340",
    "end": "1898580"
  },
  {
    "text": "know HTTP is really about request and response right and the status codes so we've got an HTTP client it might be a",
    "start": "1898580",
    "end": "1905240"
  },
  {
    "text": "browser single page application an app or a batch job somewhere sending this",
    "start": "1905240",
    "end": "1911179"
  },
  {
    "text": "HTTP get post put head whatever over to the server",
    "start": "1911179",
    "end": "1917779"
  },
  {
    "text": "and there's a response either went okay or went bad to 200 bad no well you've",
    "start": "1917779",
    "end": "1925100"
  },
  {
    "text": "all seen this really weird interpretations of HTTP codes but yeah anyhow there are different codes coming",
    "start": "1925100",
    "end": "1930919"
  },
  {
    "text": "back indicating how it went with that resource okay so it talks about the",
    "start": "1930919",
    "end": "1936380"
  },
  {
    "text": "interaction so if we drill a little bit into this uh situations what does it say",
    "start": "1936380",
    "end": "1942500"
  },
  {
    "text": "about this error error situation so that work that occur okay so when the server errors so when the",
    "start": "1942500",
    "end": "1949039"
  },
  {
    "text": "server errors this means that it says that server five responses indicate cases in which the",
    "start": "1949039",
    "end": "1957200"
  },
  {
    "text": "server is aware that it has earned I love the word urge it seems like",
    "start": "1957200",
    "end": "1964340"
  },
  {
    "text": "quaint it's like I love it okay so when is the server aware that this has heard",
    "start": "1964340",
    "end": "1970279"
  },
  {
    "text": "well something has gone wrong inside of the server right we have uh it tries to",
    "start": "1970279",
    "end": "1977179"
  },
  {
    "text": "connect to an upstream resource and it can connect to it so 5 200 502 I think",
    "start": "1977179",
    "end": "1983899"
  },
  {
    "text": "is that we've got the service unavailable 503 uh get out of storage that's got a",
    "start": "1983899",
    "end": "1992240"
  },
  {
    "text": "load of of situation or just 500 something messed up",
    "start": "1992240",
    "end": "1997340"
  },
  {
    "text": "anyone has had a 500 coming out of their server",
    "start": "1997340",
    "end": "2002740"
  },
  {
    "text": "oh I just accidentally happened to of course a null pointer exception and then",
    "start": "2002740",
    "end": "2008080"
  },
  {
    "text": "but then if the server airs who should log then",
    "start": "2008080",
    "end": "2014559"
  },
  {
    "text": "well it makes sense that the server will need to log because there's something",
    "start": "2014559",
    "end": "2020500"
  },
  {
    "text": "there that has messed up a null Point exception or whatever so it needs to to to log for several",
    "start": "2020500",
    "end": "2029320"
  },
  {
    "text": "different top sets one for example for operational recovery someone will look at that log and say oh I need to do",
    "start": "2029320",
    "end": "2035140"
  },
  {
    "text": "something about it I need to bump Upstream server or whatever it is",
    "start": "2035140",
    "end": "2040299"
  },
  {
    "text": "they need to do it for some kind of like forensic also fancy name for debugging",
    "start": "2040299",
    "end": "2046500"
  },
  {
    "text": "to see what actually happened that course that null pointer exception to be able to reproduce it but then does it",
    "start": "2046500",
    "end": "2052720"
  },
  {
    "text": "actually say you need to log input data not necessarily I mean you need to",
    "start": "2052720",
    "end": "2060158"
  },
  {
    "text": "capture the data that is relevant for reproducing the situation or understanding the reviews and there's no",
    "start": "2060159",
    "end": "2066760"
  },
  {
    "text": "need to actually just log input data adverb at him without any",
    "start": "2066760",
    "end": "2072339"
  },
  {
    "text": "encoding what about the client then can it log oh I mean the client has got all",
    "start": "2072339",
    "end": "2077618"
  },
  {
    "text": "options it can turn back to its user and say hey something messed up on the service sorry that nothing I could do",
    "start": "2077619",
    "end": "2083500"
  },
  {
    "text": "about it please try again in a while or something like that if it's running a batch job it makes sense that it will do",
    "start": "2083500",
    "end": "2090520"
  },
  {
    "text": "some logging saying this particular line couldn't be processed but I will continue with the next one so there will",
    "start": "2090520",
    "end": "2097720"
  },
  {
    "text": "be some kind of logging okay so you're saying if the servers air the server should log right and the client might",
    "start": "2097720",
    "end": "2104320"
  },
  {
    "text": "log so is this that situation for log4j attack no why not okay let's have a look at this",
    "start": "2104320",
    "end": "2111160"
  },
  {
    "text": "case then when the client airs okay so here we've got a client mistake it sends",
    "start": "2111160",
    "end": "2117339"
  },
  {
    "text": "the API version 4.2.6 unaware or should be aware that",
    "start": "2117339",
    "end": "2123400"
  },
  {
    "text": "this particular versioning scheme only allows for major minor so",
    "start": "2123400",
    "end": "2129460"
  },
  {
    "text": "in that case what will the server do I should send back you know a bad request right but well we sent the 500 but yeah",
    "start": "2129460",
    "end": "2137560"
  },
  {
    "text": "yeah that's that's a mistake we need to get back to that later but if this is the situation that the 400s are for and",
    "start": "2137560",
    "end": "2145000"
  },
  {
    "text": "it says also that it should contain an explanation of their situation",
    "start": "2145000",
    "end": "2151300"
  },
  {
    "text": "so bad request this doesn't fit the required format or spell out which",
    "start": "2151300",
    "end": "2158140"
  },
  {
    "text": "format it is at some level you've got documentation if this is an open API this is the",
    "start": "2158140",
    "end": "2163900"
  },
  {
    "text": "documentation documentation guiding the client to making a correct request",
    "start": "2163900",
    "end": "2172359"
  },
  {
    "text": "which is okay okay you should not say we have encountered a problem with our",
    "start": "2172359",
    "end": "2179280"
  },
  {
    "text": "log4j black connection and this could be exploited in this or this way so please",
    "start": "2179280",
    "end": "2185140"
  },
  {
    "text": "don't do that that's a bad response so Dan you're saying if the client airs",
    "start": "2185140",
    "end": "2190780"
  },
  {
    "text": "and we send that 4.6 4.2.6 well",
    "start": "2190780",
    "end": "2195820"
  },
  {
    "text": "okay so we're saying that that was the problem it was actually intended that the API can only have two digits so it",
    "start": "2195820",
    "end": "2202000"
  },
  {
    "text": "is actually a client error and then it should be the client that logs makes",
    "start": "2202000",
    "end": "2207099"
  },
  {
    "text": "sense okay I mean is there a reason for the server to log this no it's like someone coming into",
    "start": "2207099",
    "end": "2214240"
  },
  {
    "text": "Pharmacy and say I want a beer no no way",
    "start": "2214240",
    "end": "2219579"
  },
  {
    "text": "there's no reason for the pharmacy to log that event I mean okay they might get a customer",
    "start": "2219579",
    "end": "2225099"
  },
  {
    "text": "complaint later saying I was not served okay what did you because I requested a beer well that's your pro that's the",
    "start": "2225099",
    "end": "2231160"
  },
  {
    "text": "problem and the client is aware what it sent so in",
    "start": "2231160",
    "end": "2236920"
  },
  {
    "text": "the response it can contextualize so that's actually no need for the server to log this situation",
    "start": "2236920",
    "end": "2244060"
  },
  {
    "text": "at all so let's bring in the the dndi",
    "start": "2244060",
    "end": "2249240"
  },
  {
    "text": "attack Vector again okay the client air first of all it's",
    "start": "2249240",
    "end": "2256420"
  },
  {
    "text": "definitely the client that error I would say that the client airs um intentionally even this is so",
    "start": "2256420",
    "end": "2264400"
  },
  {
    "text": "obviously crafted in a malicious way there's no way to say that it had good",
    "start": "2264400",
    "end": "2269859"
  },
  {
    "text": "intentions but the server is then tricked into thinking it actually made an error",
    "start": "2269859",
    "end": "2277240"
  },
  {
    "text": "so this is our basic observation this attack string is so obviously",
    "start": "2277240",
    "end": "2283240"
  },
  {
    "text": "maliciously crafted that it's the obviously the client who's in ER so",
    "start": "2283240",
    "end": "2288460"
  },
  {
    "text": "there's actually no reason at all from an http perspective",
    "start": "2288460",
    "end": "2294400"
  },
  {
    "text": "to make that kind of logging so the takeaway from HTTP should really be that you know",
    "start": "2294400",
    "end": "2302020"
  },
  {
    "text": "this malicious attack tricked our server but at the same time",
    "start": "2302020",
    "end": "2308140"
  },
  {
    "text": "our design should never log user input at verbatim",
    "start": "2308140",
    "end": "2314260"
  },
  {
    "text": "or faulty at least we'd like to add a little shout out we had a discussion",
    "start": "2314260",
    "end": "2319300"
  },
  {
    "text": "with at the time with our colleagues especially the best instead who has got a",
    "start": "2319300",
    "end": "2327579"
  },
  {
    "text": "presentation later today uh a really deep discussion on are there any",
    "start": "2327579",
    "end": "2334440"
  },
  {
    "text": "situation where this could arise and we were we were diving quite deep and then we came up with that well in some cases",
    "start": "2334440",
    "end": "2341140"
  },
  {
    "text": "you might have a customer relationship with you sitting on the server and you",
    "start": "2341140",
    "end": "2347500"
  },
  {
    "text": "want to help them and for political reasons they are bad at logging so you",
    "start": "2347500",
    "end": "2353079"
  },
  {
    "text": "end up in a situation where you actually need to do the logging for political reasons to maintain these customer",
    "start": "2353079",
    "end": "2359140"
  },
  {
    "text": "relationships okay yeah you might end up there but it's not for technical reason it's",
    "start": "2359140",
    "end": "2365980"
  },
  {
    "text": "kind of like you might end up there in different situations but if you just",
    "start": "2365980",
    "end": "2371020"
  },
  {
    "text": "look at how the HTTP specification guides us there's no real technical or conceptual reason to to do that so as a",
    "start": "2371020",
    "end": "2378460"
  },
  {
    "text": "disclaimer when we say never contextualize it a little bit Yeah there's also an interesting word they're",
    "start": "2378460",
    "end": "2385480"
  },
  {
    "text": "faulty if you know that the data is good you should be allowed to log right",
    "start": "2385480",
    "end": "2392020"
  },
  {
    "text": "uh at least if it is compliant to all those regulations and so on right but the",
    "start": "2392020",
    "end": "2398619"
  },
  {
    "text": "we have to get back to that I think so if you revise the domain Primitives again we can see that well we should not",
    "start": "2398619",
    "end": "2406240"
  },
  {
    "text": "have thrown a 500 back to to the client which should have actually tested our",
    "start": "2406240",
    "end": "2412000"
  },
  {
    "text": "validation rules beforehand right because if we just end up in this way the API version Constructor will throw",
    "start": "2412000",
    "end": "2419260"
  },
  {
    "text": "an exception which will cause a 500. so we need to test it before which is why",
    "start": "2419260",
    "end": "2425260"
  },
  {
    "text": "we have this kind of static Boolean is valid helper method so if we look at this from",
    "start": "2425260",
    "end": "2432700"
  },
  {
    "text": "a logging perspective we see that okay so what if we pass the requirements of a",
    "start": "2432700",
    "end": "2438520"
  },
  {
    "text": "domain primitive and for some reason we tricked our our validation rules in",
    "start": "2438520",
    "end": "2446380"
  },
  {
    "text": "accepting the G and the I String then that data should be considered as",
    "start": "2446380",
    "end": "2451780"
  },
  {
    "text": "valid right and it should be safe for us to look but then it means we need to treat the",
    "start": "2451780",
    "end": "2460359"
  },
  {
    "text": "logging sort of as a separate system right it's a different context",
    "start": "2460359",
    "end": "2467140"
  },
  {
    "text": "it would zoom out a little bit we have got we don't want to look at the",
    "start": "2467140",
    "end": "2472180"
  },
  {
    "text": "architecture as a layered cake but rather as a hexagonal structure with connectors so you've got a client",
    "start": "2472180",
    "end": "2479740"
  },
  {
    "text": "accessing the application that's a switch of context this",
    "start": "2479740",
    "end": "2485320"
  },
  {
    "text": "or switch of domains when the application connects to the database it's a switch of domain so switch of",
    "start": "2485320",
    "end": "2491560"
  },
  {
    "text": "subsystems and we need to be aware of that otherwise we end up with SQL",
    "start": "2491560",
    "end": "2496660"
  },
  {
    "text": "injections and we want to apply the same thinking when talking about the logging that's actually a subsystem of its own",
    "start": "2496660",
    "end": "2504700"
  },
  {
    "text": "so so if you look at the 12 Factor Manifesto is that familiar",
    "start": "2504700",
    "end": "2510220"
  },
  {
    "text": "if if it's not check it out 12 Factor one two factor.net it's a it's a setup",
    "start": "2510220",
    "end": "2518740"
  },
  {
    "text": "of advice how to survive in the cloud with 12 pieces of advice and one of them",
    "start": "2518740",
    "end": "2524440"
  },
  {
    "text": "being treat backing services as attached resources that is as a",
    "start": "2524440",
    "end": "2530440"
  },
  {
    "text": "separate subsystem if we apply that we see that we have got in our",
    "start": "2530440",
    "end": "2538240"
  },
  {
    "text": "application we have got processing that's going on some of that processing is then delegated to other systems like",
    "start": "2538240",
    "end": "2545500"
  },
  {
    "text": "the database it might be delegated back to the human",
    "start": "2545500",
    "end": "2551920"
  },
  {
    "text": "which sits on a browser and then back to the application again and some of them is put into logging and",
    "start": "2551920",
    "end": "2560020"
  },
  {
    "text": "whenever we move over these subsystem boundaries we need to be aware of a few things oh",
    "start": "2560020",
    "end": "2568480"
  },
  {
    "text": "you're saying that if you go from to the browser space you have to be aware of xss",
    "start": "2568480",
    "end": "2574300"
  },
  {
    "text": "for example I could not evenly think that if I'm sending HTML back to the",
    "start": "2574300",
    "end": "2579460"
  },
  {
    "text": "browse it will be rendered safe assumption isn't it duh it happens that browser have got the",
    "start": "2579460",
    "end": "2587079"
  },
  {
    "text": "peculiarity that if you're sending script if you like should start executing it it will not render it",
    "start": "2587079",
    "end": "2593980"
  },
  {
    "text": "so we need to be aware of that peculiarity of the browser and not long",
    "start": "2593980",
    "end": "2600099"
  },
  {
    "text": "ago we you know had to do it nowadays we have Frameworks taking care of that",
    "start": "2600099",
    "end": "2605859"
  },
  {
    "text": "in the same way if we're logging that subsystem has got it it's",
    "start": "2605859",
    "end": "2612160"
  },
  {
    "text": "peculiarities and we might have a framework that take care of those peculiarities or",
    "start": "2612160",
    "end": "2619260"
  },
  {
    "text": "in this case add peculiarities yeah so if you just do bare metal logging",
    "start": "2619260",
    "end": "2626319"
  },
  {
    "text": "right see we're just going to sort of write",
    "start": "2626319",
    "end": "2631420"
  },
  {
    "text": "whatever we we um we have to the logs basically we're",
    "start": "2631420",
    "end": "2637599"
  },
  {
    "text": "using log4j out of the box means that you know we're going to trust",
    "start": "2637599",
    "end": "2643000"
  },
  {
    "text": "log for the a to do whatever right and it could be you know gndi lookups it",
    "start": "2643000",
    "end": "2649300"
  },
  {
    "text": "could be other protocols they support it could be you know whatever features they have decided to enable",
    "start": "2649300",
    "end": "2655000"
  },
  {
    "text": "has any one of you anywhere and log4j dot info somewhere in your code logging",
    "start": "2655000",
    "end": "2661359"
  },
  {
    "text": "something have you got several of them that are logging basically the same thing like an order number and the",
    "start": "2661359",
    "end": "2667780"
  },
  {
    "text": "customer address and something like that are you sure that all those are",
    "start": "2667780",
    "end": "2672819"
  },
  {
    "text": "consistent to each other that they actually format the same data and same format",
    "start": "2672819",
    "end": "2678359"
  },
  {
    "text": "whoops inconsistent logging is what's actually on the overs risk so we tend to",
    "start": "2678359",
    "end": "2685480"
  },
  {
    "text": "end up producing this barometer logger in a little bit different ways and sometimes we allow free string sometimes",
    "start": "2685480",
    "end": "2691720"
  },
  {
    "text": "we add them sometimes we do stuff so the solution to that is of course to",
    "start": "2691720",
    "end": "2697599"
  },
  {
    "text": "use domain oriented logging if the logging is a separate subsystem",
    "start": "2697599",
    "end": "2704619"
  },
  {
    "text": "it's worth of having an API and on top of that as developers we",
    "start": "2704619",
    "end": "2711940"
  },
  {
    "text": "should also restrict ourselves to saying hey what should I log right in different contexts you have sort of educate have",
    "start": "2711940",
    "end": "2720400"
  },
  {
    "text": "an educated idea of what should we log here right",
    "start": "2720400",
    "end": "2726040"
  },
  {
    "text": "we should instead of producing log for J bare metal",
    "start": "2726040",
    "end": "2731200"
  },
  {
    "text": "we will hide log4j behind this logging API and the client code will say what",
    "start": "2731200",
    "end": "2739780"
  },
  {
    "text": "happened in this case there was a reservation being made now over to the",
    "start": "2739780",
    "end": "2744880"
  },
  {
    "text": "log API to decide what aspects of this reservation needs to be logged",
    "start": "2744880",
    "end": "2751180"
  },
  {
    "text": "and behind the scenes there you can say all right from this I don't know a reservation object or whatever it could",
    "start": "2751180",
    "end": "2756940"
  },
  {
    "text": "be it's going to pick out data out of that object and then this goes to the audit log this goes into the metrics and",
    "start": "2756940",
    "end": "2763540"
  },
  {
    "text": "such right so we can actually control whatever we write into these different log systems do you log for different",
    "start": "2763540",
    "end": "2770319"
  },
  {
    "text": "purposes in your systems like sometimes you log for traceability sometimes you",
    "start": "2770319",
    "end": "2775359"
  },
  {
    "text": "log for performance yeah yeah do you put those into the same",
    "start": "2775359",
    "end": "2780640"
  },
  {
    "text": "log file or in different logs you don't have to say let's think about it yeah I know",
    "start": "2780640",
    "end": "2787740"
  },
  {
    "text": "log4j.log whatever crap it is so but what we really want to do is of course",
    "start": "2787740",
    "end": "2793119"
  },
  {
    "text": "to separate those because for example the audit logs who accessed what record",
    "start": "2793119",
    "end": "2799359"
  },
  {
    "text": "we need to score storage for JDP or reasons and how long do we need to keep that",
    "start": "2799359",
    "end": "2805079"
  },
  {
    "text": "well in some in some domains you have to keep log data for you know Financial",
    "start": "2805079",
    "end": "2810700"
  },
  {
    "text": "transactions it's like 10 years here in Norway or is it seven years or 15 years it depends on where you are right",
    "start": "2810700",
    "end": "2815920"
  },
  {
    "text": "personal sensitive information access on those we need to keep indefinitely",
    "start": "2815920",
    "end": "2822400"
  },
  {
    "text": "and metrics state that how long do you usually need to store metrics data oh",
    "start": "2822400",
    "end": "2829000"
  },
  {
    "text": "see it it's a it's something that you care about for I don't know a week or so and then you have new metrics so how",
    "start": "2829000",
    "end": "2835900"
  },
  {
    "text": "often do you go back and look at the last months response times",
    "start": "2835900",
    "end": "2842079"
  },
  {
    "text": "yeah perhaps not Aggregate and put them into table through them and Excel sheet threw away",
    "start": "2842079",
    "end": "2848859"
  },
  {
    "text": "the logs or something like that so the idea here is of course that you can you",
    "start": "2848859",
    "end": "2853960"
  },
  {
    "text": "can add another security benefit here saying oh the application is the only one that can write to these logs and",
    "start": "2853960",
    "end": "2860800"
  },
  {
    "text": "reading logs is only possible through you know from another other way of accessing the data the",
    "start": "2860800",
    "end": "2867400"
  },
  {
    "text": "application can't read the logs so log tampering becomes much trickier as well",
    "start": "2867400",
    "end": "2872920"
  },
  {
    "text": "as you can have different purging strategies for these and you can say audit audit logs need to be saved for",
    "start": "2872920",
    "end": "2878800"
  },
  {
    "text": "you know forever and it has to be really expensive it has to be you know redundant and such whereas the metrics",
    "start": "2878800",
    "end": "2885040"
  },
  {
    "text": "can be on a desktop under your you know that's an interest uh desktop",
    "start": "2885040",
    "end": "2890920"
  },
  {
    "text": "under your desk yeah no no that's not a computer so so",
    "start": "2890920",
    "end": "2897099"
  },
  {
    "text": "um if we take this and go back to the code what would that look like okay sorry uh",
    "start": "2897099",
    "end": "2903819"
  },
  {
    "text": "so in in in in in in in instead we would have some kind of hello world vlogger",
    "start": "2903819",
    "end": "2910359"
  },
  {
    "text": "this is our domain oriented logging API it will contain methods that talk about",
    "start": "2910359",
    "end": "2916960"
  },
  {
    "text": "this Hello World um domain and there might be events that are",
    "start": "2916960",
    "end": "2924880"
  },
  {
    "text": "interesting to log like log API requests",
    "start": "2924880",
    "end": "2930838"
  },
  {
    "text": "and now it's the inside of that method that will",
    "start": "2931020",
    "end": "2936040"
  },
  {
    "text": "decide exactly how that log is formatted and where it is put but anyway how can",
    "start": "2936040",
    "end": "2941140"
  },
  {
    "text": "that this was the same thing how can that be more safe now than you know isn't this the same as logging the",
    "start": "2941140",
    "end": "2948040"
  },
  {
    "text": "domain primitive well to some extent it is we have uh we have",
    "start": "2948040",
    "end": "2956260"
  },
  {
    "text": "got the the possibility if we want to extend this we will extend it with domain oriented",
    "start": "2956260",
    "end": "2962980"
  },
  {
    "text": "Concepts and we know that this domain oriented objects will be validated",
    "start": "2962980",
    "end": "2970960"
  },
  {
    "text": "so we can't pass any garbage into this logging API it will just say that that",
    "start": "2970960",
    "end": "2978040"
  },
  {
    "text": "doesn't make sense I can't even accept it but if we tricked the API version into accepting the G and the I String",
    "start": "2978040",
    "end": "2984640"
  },
  {
    "text": "but we would have also implemented inside of the HW logger service would",
    "start": "2984640",
    "end": "2991599"
  },
  {
    "text": "have been proper encoding for using log4j because that's the",
    "start": "2991599",
    "end": "2996819"
  },
  {
    "text": "peculiarities of log4j so remember when we were moving from",
    "start": "2996819",
    "end": "3002540"
  },
  {
    "text": "the application to the browser then we are responsible to do the appropriate",
    "start": "3002540",
    "end": "3009680"
  },
  {
    "text": "HTML encoding nowadays that's embedded into our Frameworks but in the days of",
    "start": "3009680",
    "end": "3016560"
  },
  {
    "text": "your it wasn't so we had to do it ourselves same way here if we're using a login",
    "start": "3016560",
    "end": "3022500"
  },
  {
    "text": "framework we need to be aware of its peculiarities and do the proper output",
    "start": "3022500",
    "end": "3027960"
  },
  {
    "text": "encoding I know if we should backslash all the dollar signs something like that",
    "start": "3027960",
    "end": "3034020"
  },
  {
    "text": "so the takeaway for domain oriented logging is actually if you treat it as a",
    "start": "3034020",
    "end": "3039119"
  },
  {
    "text": "separate subsystem then you can you can design what to log",
    "start": "3039119",
    "end": "3044280"
  },
  {
    "text": "to different parts of it and you can also have it in one place to take care of the peculiarities of that particular",
    "start": "3044280",
    "end": "3051000"
  },
  {
    "text": "subsystem great so if we wrap this up yeah uh and",
    "start": "3051000",
    "end": "3059339"
  },
  {
    "text": "look at our conclusions from our different perspectives first observation is that that",
    "start": "3059339",
    "end": "3065339"
  },
  {
    "text": "application shouldn't be in control it should be in control of vlogging that",
    "start": "3065339",
    "end": "3071220"
  },
  {
    "text": "the attackers shouldn't and it's the design that should ensure that the",
    "start": "3071220",
    "end": "3078300"
  },
  {
    "text": "interesting part of combining you know domain Primitives that sort of enforces you to only accepting a semantically",
    "start": "3078300",
    "end": "3086940"
  },
  {
    "text": "correct input and combining that then with you know never",
    "start": "3086940",
    "end": "3093000"
  },
  {
    "text": "logging faulty user input and in case you have to log you do that by designing",
    "start": "3093000",
    "end": "3100760"
  },
  {
    "text": "the interaction accordingly to that subsystem and we really want to stress",
    "start": "3100760",
    "end": "3106440"
  },
  {
    "text": "the uh the state of logging we think it's a really important thing that's",
    "start": "3106440",
    "end": "3112740"
  },
  {
    "text": "important for operation uh but it's so mistreated by developers",
    "start": "3112740",
    "end": "3118460"
  },
  {
    "text": "developers in general do not take care on what they log and how they log it and",
    "start": "3118460",
    "end": "3124500"
  },
  {
    "text": "structure it and they do not even care about the peculiarities of one of the",
    "start": "3124500",
    "end": "3131220"
  },
  {
    "text": "most used Frameworks in this world which is log4j it's used all over the place",
    "start": "3131220",
    "end": "3136680"
  },
  {
    "text": "but almost no developers know how that works",
    "start": "3136680",
    "end": "3141920"
  },
  {
    "text": "I need to log okay yeah I'll use that one I'll throw a string at it",
    "start": "3141920",
    "end": "3146940"
  },
  {
    "text": "so take some care of about logging so we think that if if we had applied these",
    "start": "3146940",
    "end": "3155099"
  },
  {
    "text": "kind of design ideas not for security reasons but for good design reasons",
    "start": "3155099",
    "end": "3160980"
  },
  {
    "text": "most applications in world would have been in a much better position Yeah so basically the entire debacle of almost",
    "start": "3160980",
    "end": "3168420"
  },
  {
    "text": "closing down internet would have been avoided simply by using secure by Design and with those words we'd like to open",
    "start": "3168420",
    "end": "3174420"
  },
  {
    "text": "up for some q a because this could freshen something or comments how does this align to your experiences please",
    "start": "3174420",
    "end": "3181440"
  },
  {
    "text": "yeah",
    "start": "3181440",
    "end": "3183859"
  },
  {
    "text": "uh but",
    "start": "3187440",
    "end": "3193400"
  },
  {
    "text": "I always advocate for your way of doing uh domain-driven validation right but I",
    "start": "3194400",
    "end": "3201960"
  },
  {
    "text": "don't think logging is a particularly good example where this is",
    "start": "3201960",
    "end": "3207839"
  },
  {
    "text": "the most useful Because the Internet and the HTTP browsers and servers is a messy",
    "start": "3207839",
    "end": "3214740"
  },
  {
    "text": "place and not logging um why is something",
    "start": "3214740",
    "end": "3219960"
  },
  {
    "text": "what causes some sort of issue um",
    "start": "3219960",
    "end": "3226380"
  },
  {
    "text": "isn't really realistic you know um that what's not logging the the uh",
    "start": "3226380",
    "end": "3235920"
  },
  {
    "text": "the payload that causes something to go wrong in clear text",
    "start": "3235920",
    "end": "3242180"
  },
  {
    "text": "and that sounds very difficult you know but not logging you know avoid logging",
    "start": "3242180",
    "end": "3247920"
  },
  {
    "text": "yeah and I don't want to log the user agent because that's user inputs well",
    "start": "3247920",
    "end": "3253160"
  },
  {
    "text": "you're going to have a rough time finding browser bugs or some browser bug",
    "start": "3253160",
    "end": "3258960"
  },
  {
    "text": "causing some issue or um knowing why you reject customers",
    "start": "3258960",
    "end": "3265760"
  },
  {
    "text": "knowing that you reject customers with say a certain character in their name",
    "start": "3265760",
    "end": "3271380"
  },
  {
    "text": "you'd probably want to know about that we might make a small point I think with",
    "start": "3271380",
    "end": "3276540"
  },
  {
    "text": "men I think it was a small sign on one of the slides that we said that uh one",
    "start": "3276540",
    "end": "3281640"
  },
  {
    "text": "reasonable thing to do server-side logging of client faults is to to",
    "start": "3281640",
    "end": "3287099"
  },
  {
    "text": "capture that it has happened for example uh operational logging like what is the",
    "start": "3287099",
    "end": "3293520"
  },
  {
    "text": "balance between 400 400 3 4001 404s versus 200s is very sensible thing to do",
    "start": "3293520",
    "end": "3300780"
  },
  {
    "text": "and we we expect that to be a part of of our HTTP logs",
    "start": "3300780",
    "end": "3306660"
  },
  {
    "text": "it might be that the user agents might be a way of doing it we think that uh",
    "start": "3306660",
    "end": "3315259"
  },
  {
    "text": "why a certain client is making the mistake of add of sending erroneous data",
    "start": "3315440",
    "end": "3323220"
  },
  {
    "text": "it's not necessarily something that the server should log yeah but to take an access log you can't",
    "start": "3323220",
    "end": "3331020"
  },
  {
    "text": "do access logging with this approach well in terms of what what you put in",
    "start": "3331020",
    "end": "3336839"
  },
  {
    "text": "your access log of course like yeah sure so is it really needed let's say oh you",
    "start": "3336839",
    "end": "3343079"
  },
  {
    "text": "were denied access this no no no no no no no audit all the talk but yeah what",
    "start": "3343079",
    "end": "3349740"
  },
  {
    "text": "how do the the uh the basic HTTP requests look when it reached the proxy",
    "start": "3349740",
    "end": "3355920"
  },
  {
    "text": "how does it look when it reaches the next server yeah how are my customers misbehaving because",
    "start": "3355920",
    "end": "3364200"
  },
  {
    "text": "I expect some of them to misbehave I want to know about that yeah let's",
    "start": "3364200",
    "end": "3369260"
  },
  {
    "text": "contextualize a little bit one thing we want to be clear but when we say never that's it's not a hard never we think",
    "start": "3369260",
    "end": "3376559"
  },
  {
    "text": "that everything we do are because we have good reasons and if you have a compelling case that you want to capture",
    "start": "3376559",
    "end": "3382319"
  },
  {
    "text": "the entire HTTP request well do so as long as you are aware of",
    "start": "3382319",
    "end": "3387780"
  },
  {
    "text": "what you're doing and perhaps some of the other guidelines and this is a little bit why we think that's kind of",
    "start": "3387780",
    "end": "3393119"
  },
  {
    "text": "like hexagonal uh take on design patterns is important that if you pick away one of them you will still have a",
    "start": "3393119",
    "end": "3400079"
  },
  {
    "text": "lot of supporting practices that keep you sane for example the ensure that you",
    "start": "3400079",
    "end": "3406200"
  },
  {
    "text": "have the proper encoding on that logging when you capture all of it so that you're actually capture it in clear",
    "start": "3406200",
    "end": "3412800"
  },
  {
    "text": "plain text and not as something that will trigger an execution",
    "start": "3412800",
    "end": "3417900"
  },
  {
    "text": "and a little bit like if you're if you are storing potentially her sadrus user",
    "start": "3417900",
    "end": "3425280"
  },
  {
    "text": "input somewhere ensure to put a big one triangle on that system and ensure that",
    "start": "3425280",
    "end": "3430740"
  },
  {
    "text": "you're wearing rubber gloves whenever you're touching it because it might contain",
    "start": "3430740",
    "end": "3435980"
  },
  {
    "text": "delayed attacks so basically store the tax but if you're aware of that",
    "start": "3435980",
    "end": "3443160"
  },
  {
    "text": "and you think you need that for the purpose of what you're doing",
    "start": "3443160",
    "end": "3448859"
  },
  {
    "text": "if there's a sensible thing to do yeah and again I agree but I just",
    "start": "3448859",
    "end": "3454859"
  },
  {
    "text": "disagree with some of the conclusions here yeah you couldn't avoid and that could be an excellent long discussion uh",
    "start": "3454859",
    "end": "3461160"
  },
  {
    "text": "later on this day any other question question or comments on how this align",
    "start": "3461160",
    "end": "3466260"
  },
  {
    "text": "with what you've been doing",
    "start": "3466260",
    "end": "3471380"
  },
  {
    "text": "in that case thanks for attention and I hope to see you around the venue today and",
    "start": "3472980",
    "end": "3481200"
  },
  {
    "text": "yep thanks for doing thanks for listening",
    "start": "3481200",
    "end": "3485119"
  }
]