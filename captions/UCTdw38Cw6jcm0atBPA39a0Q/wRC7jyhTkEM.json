[
  {
    "text": "cameraman are you ready let's do this i have about 130 slides i'm going to go",
    "start": "2960",
    "end": "8400"
  },
  {
    "text": "through them all keep up are you ready are you ready to keep up 130 slides on cross-site",
    "start": "8400",
    "end": "13840"
  },
  {
    "text": "scripting let's do this so by the way my name is jim maniko i'm",
    "start": "13840",
    "end": "19359"
  },
  {
    "text": "gonna going to be your presenter today i'm a former global board member of the owasp nonprofit foundation i wrote a",
    "start": "19359",
    "end": "25599"
  },
  {
    "text": "book on security web security for the java ecosystem you know the language that that all the dot-net languages were",
    "start": "25599",
    "end": "32320"
  },
  {
    "text": "based off of and made a lot better thank you.net for fixing java i also work on",
    "start": "32320",
    "end": "37360"
  },
  {
    "text": "several open source projects the cheat sheet series java and html sanitizer for",
    "start": "37360",
    "end": "42559"
  },
  {
    "text": "xss defense and the owasp application security verification standard i work",
    "start": "42559",
    "end": "48320"
  },
  {
    "text": "with large teams of volunteers around the world to promote application",
    "start": "48320",
    "end": "53600"
  },
  {
    "text": "security i'm going to show you some attacks don't hack without legal permission penalties include loss of job",
    "start": "53600",
    "end": "60800"
  },
  {
    "text": "jail time and possible imprisonment what's your name sir what's your name andre how you doing jail was horrible",
    "start": "60800",
    "end": "67920"
  },
  {
    "text": "wasn't it he he's like no jail trust me the food is terrible the wine is bad",
    "start": "67920",
    "end": "74159"
  },
  {
    "text": "small rooms you don't want jail also free and open source software i'm going",
    "start": "74159",
    "end": "80080"
  },
  {
    "text": "to talk about this presentation please use a proper vetting process and keep your third-party libraries up to date",
    "start": "80080",
    "end": "87119"
  },
  {
    "text": "buckle on to buckle up we're gonna move fast you're late you're late to my talk you're late",
    "start": "87119",
    "end": "93439"
  },
  {
    "text": "to my talk i was late to get started so we're even it's okay i was a little late getting started it's okay we're going to",
    "start": "93439",
    "end": "100240"
  },
  {
    "text": "learn how to test your apps for cross-site scripting we're going to learn how to defend against xss without",
    "start": "100240",
    "end": "106240"
  },
  {
    "text": "putting coding input validation html sanitization we're going to learn about",
    "start": "106240",
    "end": "111680"
  },
  {
    "text": "javascript safe functions and unsafe functions and apply content security",
    "start": "111680",
    "end": "117360"
  },
  {
    "text": "policy to our pages a little bit of bonus we'll talk about the new technology trusted types which is a way",
    "start": "117360",
    "end": "123840"
  },
  {
    "text": "to configure how javascript runs in a browser we have a lot to get through this is my level one defense grid if",
    "start": "123840",
    "end": "131200"
  },
  {
    "text": "you're gonna display data exactly as a user typed it in output encoding if",
    "start": "131200",
    "end": "136800"
  },
  {
    "text": "you're gonna let a user author html you need an html sanitizer to render that",
    "start": "136800",
    "end": "142000"
  },
  {
    "text": "safely you have to use safe javascript apis and be ready to sandbox third-party",
    "start": "142000",
    "end": "147120"
  },
  {
    "text": "content that is going to be insecure so what is xss xss is a misnomer it's a",
    "start": "147120",
    "end": "153519"
  },
  {
    "text": "wrong name it's nothing cross-site about this per se a better name is content",
    "start": "153519",
    "end": "159200"
  },
  {
    "text": "injection or if you want javascript injection it's the most common web vulnerability it's easy to exploit and",
    "start": "159200",
    "end": "166560"
  },
  {
    "text": "by using scanners i can find xss easily now any individual xss problem it's",
    "start": "166560",
    "end": "174640"
  },
  {
    "text": "straightforward to fix but it's difficult to fix at scale that's why",
    "start": "174640",
    "end": "180080"
  },
  {
    "text": "it's so hard think of all the software in your company how many user interface",
    "start": "180080",
    "end": "185760"
  },
  {
    "text": "templates do you have how many variables do you add to a user interface across an",
    "start": "185760",
    "end": "192000"
  },
  {
    "text": "organization millions of variables and every one of those needs the right defense",
    "start": "192000",
    "end": "198400"
  },
  {
    "text": "that's why this is so hard there's many ways to fix xss and we need to surgically know the right way",
    "start": "198400",
    "end": "205360"
  },
  {
    "text": "watch this presentation i'm going to show you so the impact to your business is significant this is basic xss i have",
    "start": "205360",
    "end": "213519"
  },
  {
    "text": "a url with the parameter that's rendered in the user interface called a reflective feature how do i abuse this",
    "start": "213519",
    "end": "221040"
  },
  {
    "text": "well i just i just change the comment to some script i i somehow send it to a",
    "start": "221040",
    "end": "227200"
  },
  {
    "text": "victim they click on it and because that comment parameter lands in the ui i can",
    "start": "227200",
    "end": "233040"
  },
  {
    "text": "now trick a user into rendering my script that's really bad this is called reflect",
    "start": "233040",
    "end": "240720"
  },
  {
    "text": "how can an attacker misuse this we're going to look at that in a second but with reflected xss i send a link to a",
    "start": "240720",
    "end": "246640"
  },
  {
    "text": "user they click on it it activates evil javascript and i can steal data from the",
    "start": "246640",
    "end": "253439"
  },
  {
    "text": "browser great bearded one i am honored to see you again good sir",
    "start": "253439",
    "end": "259040"
  },
  {
    "text": "everyone honor his beard bow to the great beard i i i'm working on it sir i'm a little",
    "start": "259040",
    "end": "264880"
  },
  {
    "text": "goatee-ish but anyway so let's get back to it we could steal data with cross-site scripting pretty easily one",
    "start": "264880",
    "end": "271120"
  },
  {
    "text": "more thing stored xss this is implanting some kind of content in your database",
    "start": "271120",
    "end": "276880"
  },
  {
    "text": "like a message system or like i'll edit my profile change my description and",
    "start": "276880",
    "end": "282160"
  },
  {
    "text": "save it to your database then somebody else looks at my profile description and my javascript as the attacker lands in",
    "start": "282160",
    "end": "289919"
  },
  {
    "text": "the victim's browser and i can steal data so how do we test for cross-site",
    "start": "289919",
    "end": "295280"
  },
  {
    "text": "scripting right how do we test first of all what are our testing goals",
    "start": "295280",
    "end": "300320"
  },
  {
    "text": "can an attacker get their own content into your website so special characters render raw in a",
    "start": "300320",
    "end": "308720"
  },
  {
    "text": "web page less than greater than and similar can an attacker get their own",
    "start": "308720",
    "end": "314400"
  },
  {
    "text": "javascript html or style or other markup to execute in a web page not your code",
    "start": "314400",
    "end": "321280"
  },
  {
    "text": "developers but a co code from the attacker who's injecting this into your",
    "start": "321280",
    "end": "327039"
  },
  {
    "text": "software now when i'm testing for xss i submit javascript through your normal",
    "start": "327039",
    "end": "332160"
  },
  {
    "text": "form parameters to your api through a cookie whatever data you're reading and",
    "start": "332160",
    "end": "337759"
  },
  {
    "text": "i'll put javascript in there i'll then check web pages that render that content",
    "start": "337759",
    "end": "343759"
  },
  {
    "text": "and this is my typical test script alert script this is not dangerous but if i",
    "start": "343759",
    "end": "349360"
  },
  {
    "text": "can get this to execute what did i just do i proved that i can get javascript",
    "start": "349360",
    "end": "355440"
  },
  {
    "text": "that's evil to run in your website and i've proven that you have an xss",
    "start": "355440",
    "end": "361360"
  },
  {
    "text": "vulnerability in your application so far so good now let's care so carry on so first of all",
    "start": "361360",
    "end": "368960"
  },
  {
    "text": "we it's really hard to filter xss or javascript attacks on input there",
    "start": "368960",
    "end": "376319"
  },
  {
    "text": "are thousands of ways that i can bypass your filters by encoding and",
    "start": "376319",
    "end": "383199"
  },
  {
    "text": "and confusing my and uh manipulating my attacks in a variety of different ways",
    "start": "383199",
    "end": "388720"
  },
  {
    "text": "so i don't think that filtering xss is the right answer we have to build user",
    "start": "388720",
    "end": "394720"
  },
  {
    "text": "interfaces with security built in to do this correctly no question about it and",
    "start": "394720",
    "end": "399840"
  },
  {
    "text": "by the way please use caution when using these real world attack payloads i've had not one not two but three students",
    "start": "399840",
    "end": "407039"
  },
  {
    "text": "go to jail as a professional instructor based on these next ten slides so i'm",
    "start": "407039",
    "end": "412639"
  },
  {
    "text": "not even joking i've had students use these real world attacks against websites without legal permission",
    "start": "412639",
    "end": "418479"
  },
  {
    "text": "without hiding their tracks using a you know anonymizing service and they got caught and did jail time so take this",
    "start": "418479",
    "end": "424960"
  },
  {
    "text": "seriously this is cookie theft remember where does the attack launch",
    "start": "424960",
    "end": "431360"
  },
  {
    "text": "in my browser as the attacker no on the attacker i submit this attack to your",
    "start": "431360",
    "end": "437360"
  },
  {
    "text": "website this is submitted some to one of your features and it then lands in the",
    "start": "437360",
    "end": "443039"
  },
  {
    "text": "user interface of the victim so i submit the attack and then someone else reads",
    "start": "443039",
    "end": "449120"
  },
  {
    "text": "that webpage and lands on this code the victim's browser i build a url from to",
    "start": "449120",
    "end": "456160"
  },
  {
    "text": "my website with the cookie of the victim in it i then load an image on the dom",
    "start": "456160",
    "end": "461360"
  },
  {
    "text": "it's invisible when i do image dot source it goes and does a get request to",
    "start": "461360",
    "end": "466720"
  },
  {
    "text": "load the image and it sends your cookie to my server what if i steal your cookie",
    "start": "466720",
    "end": "472240"
  },
  {
    "text": "what is that what does that mean what can i do if i steal a cookie i can compromise your account by",
    "start": "472240",
    "end": "479120"
  },
  {
    "text": "hijacking your session i like you you got the right answer so that's good so i",
    "start": "479120",
    "end": "484160"
  },
  {
    "text": "can use this to steal his session now i can always flag well go back i can",
    "start": "484160",
    "end": "489759"
  },
  {
    "text": "always flag a cookie as http only this is a cookie setting that stops me from reading the cookie",
    "start": "489759",
    "end": "497280"
  },
  {
    "text": "how good is this defense it's crap now you should still do it but all it does is stop",
    "start": "497280",
    "end": "503919"
  },
  {
    "text": "that one line of code and returns an empty string it doesn't stop the script from fully running so we should use http",
    "start": "503919",
    "end": "511440"
  },
  {
    "text": "only but don't depend on it because if i want to attack you i'll just do something like this i can deface the",
    "start": "511440",
    "end": "516959"
  },
  {
    "text": "website i can do any weird code i want and once i get to document body inner",
    "start": "516959",
    "end": "522560"
  },
  {
    "text": "html i deface the whole body virtual site defacement",
    "start": "522560",
    "end": "528240"
  },
  {
    "text": "there you go let's move on i can steal everything from local storage i just walk through",
    "start": "528240",
    "end": "534959"
  },
  {
    "text": "every local storage item and go image.source to send a get request to",
    "start": "534959",
    "end": "540240"
  },
  {
    "text": "steal every local storage item out of your website i can also fetch a login",
    "start": "540240",
    "end": "546399"
  },
  {
    "text": "page and walk through the entire login page and replace any action",
    "start": "546399",
    "end": "553200"
  },
  {
    "text": "with evil.com so it will be an exact copy of your login page and when you hit",
    "start": "553200",
    "end": "558880"
  },
  {
    "text": "submit it's going to send your credentials to my collection server and then log you back in so you look like",
    "start": "558880",
    "end": "565600"
  },
  {
    "text": "you logged in but i got your password in a redirect or how about this is a keystroke logger i send the socket to my",
    "start": "565600",
    "end": "572560"
  },
  {
    "text": "website into this function and every time you do a keystroke i get a copy of",
    "start": "572560",
    "end": "577600"
  },
  {
    "text": "it what else can i do there's a polyglot this is an attack that's a javascript",
    "start": "577600",
    "end": "583440"
  },
  {
    "text": "url and no matter where i submit this attack it's going to execute a potential",
    "start": "583440",
    "end": "589760"
  },
  {
    "text": "payload this is a a testing url here's a better one this url right here it's",
    "start": "589760",
    "end": "597440"
  },
  {
    "text": "going to bypass a lot of firewalls and no matter where this lands on a page",
    "start": "597440",
    "end": "603600"
  },
  {
    "text": "it's going to execute on mouse over and on load it's called again a polyglot xss",
    "start": "603600",
    "end": "609920"
  },
  {
    "text": "attack if you're a security tester take a picture of this this is a great little",
    "start": "609920",
    "end": "615600"
  },
  {
    "text": "security test to have in your back pocket you just submit this to every single form field every cookie every",
    "start": "615600",
    "end": "621519"
  },
  {
    "text": "data entry point and see if it renders anywhere and executes that alert this is",
    "start": "621519",
    "end": "627920"
  },
  {
    "text": "how we test for xss and the thing is you may have firewalls",
    "start": "627920",
    "end": "633279"
  },
  {
    "text": "trying to block me but i can represent javascript in a lot of weird ways this",
    "start": "633279",
    "end": "639040"
  },
  {
    "text": "is xss with no letters this is xss with no letters or numbers",
    "start": "639040",
    "end": "645360"
  },
  {
    "text": "um and so there's just a lot of ways i can off you skate javascript here's a",
    "start": "645360",
    "end": "650959"
  },
  {
    "text": "weaponized payload set of attacks specific to wordpress and drupal so i",
    "start": "650959",
    "end": "658079"
  },
  {
    "text": "can attack administrators on some of the most common content platforms in the world",
    "start": "658079",
    "end": "665440"
  },
  {
    "text": "and so here is also a professional payload from a real high end attacker",
    "start": "665440",
    "end": "671600"
  },
  {
    "text": "who has several thousand xss payloads to use in security testing do you believe",
    "start": "671600",
    "end": "677440"
  },
  {
    "text": "me that cross-site scripting is a serious issue that you need to fix as a developer are you with me on this",
    "start": "677440",
    "end": "684399"
  },
  {
    "text": "let's talk the real reason we're here the one more before we do defense",
    "start": "684399",
    "end": "690160"
  },
  {
    "text": "here we have here's a real world problem with xss this is apple telling us that",
    "start": "690160",
    "end": "696000"
  },
  {
    "text": "apple air tags have stored xss now this is a lie apple is",
    "start": "696000",
    "end": "701040"
  },
  {
    "text": "apple is trying to shift the conversation here because air tags are not that important to the enterprise and",
    "start": "701040",
    "end": "708160"
  },
  {
    "text": "the problem was the attack goes in the air tag and then the air tag sends the attack to the",
    "start": "708160",
    "end": "714839"
  },
  {
    "text": "found.apple.com page that rendered air tag data raw so it really was apple's",
    "start": "714839",
    "end": "722240"
  },
  {
    "text": "what part of apple's software is found.apple.com a part of that's their",
    "start": "722240",
    "end": "727760"
  },
  {
    "text": "login system so the reality is apple's login system had a cross-site scripting",
    "start": "727760",
    "end": "734800"
  },
  {
    "text": "vulnerability that's not good that is not cool one of the biggest companies in",
    "start": "734800",
    "end": "741200"
  },
  {
    "text": "the world their main login page for their entire identity system had",
    "start": "741200",
    "end": "746480"
  },
  {
    "text": "cross-site scripting in it and they were like oh i don't want the world to know",
    "start": "746480",
    "end": "751519"
  },
  {
    "text": "about this so they blamed the air tags which received the input",
    "start": "751519",
    "end": "756720"
  },
  {
    "text": "but that input was sent to apple's login page which rendered it raw you don't",
    "start": "756720",
    "end": "762399"
  },
  {
    "text": "render data raw anywhere on the web let alone the login page of the biggest",
    "start": "762399",
    "end": "768240"
  },
  {
    "text": "company in the world and apple's got the marketing to shift the conversation",
    "start": "768240",
    "end": "773680"
  },
  {
    "text": "i called a couple media to talk about this i was like this is a lie what's going on you know what the tech media",
    "start": "773680",
    "end": "779120"
  },
  {
    "text": "told me hey man let me level with you apple's our biggest investor and biggest biggest",
    "start": "779120",
    "end": "784480"
  },
  {
    "text": "advertiser there's no way i'm writing the story hey man apple gives us 10 million in like ad revenue a year i'm",
    "start": "784480",
    "end": "790959"
  },
  {
    "text": "not running the story apple no no call someone else that's what i got from the tech press they don't want to hear about it let's move",
    "start": "790959",
    "end": "796480"
  },
  {
    "text": "on why do we come here not to hear about attacks yes yes mr great bearded one",
    "start": "796480",
    "end": "803440"
  },
  {
    "text": "yeah you don't the only side to protect is the user interface you do not i'll",
    "start": "810160",
    "end": "817360"
  },
  {
    "text": "talk about this in just a moment but you can't really you can't reliably build a filter that blocks javascript when it",
    "start": "817360",
    "end": "824399"
  },
  {
    "text": "comes to rich content because i can have a legal url with xss i can have a legal email address with xss so legal input is",
    "start": "824399",
    "end": "833760"
  },
  {
    "text": "often vulnerable so we don't solve this problem on input we solve this problem on output where we're adding data to a",
    "start": "833760",
    "end": "841440"
  },
  {
    "text": "web page that's the only way to solve this problem reliably in any software system sir",
    "start": "841440",
    "end": "848399"
  },
  {
    "text": "that is well it's not what's not which side has the problem the side that has the problem is the user interface",
    "start": "852480",
    "end": "858560"
  },
  {
    "text": "because that's where you take the content and render it so the problem is always in the ui that's where the",
    "start": "858560",
    "end": "865199"
  },
  {
    "text": "injection happens it may enter your system from different points of input from a cookie from an api from a request",
    "start": "865199",
    "end": "871680"
  },
  {
    "text": "parameter from a header but that data gets to a ui that ui renders and that's",
    "start": "871680",
    "end": "878079"
  },
  {
    "text": "where the problem happens so my philosophy here is i'll talk about in a second you build reliable user",
    "start": "878079",
    "end": "883600"
  },
  {
    "text": "interfaces that that know how to render content safely and it doesn't matter what the input is we're going to be okay",
    "start": "883600",
    "end": "891040"
  },
  {
    "text": "and this is a this is not just my opinion this is pretty conventional wisdom and application security around",
    "start": "891040",
    "end": "897199"
  },
  {
    "text": "how to really as a developer doing doing writing code how to build secure secure software",
    "start": "897199",
    "end": "903440"
  },
  {
    "text": "is that a fair fair at least from my perspective is that a fair answer sir",
    "start": "903440",
    "end": "908800"
  },
  {
    "text": "partner",
    "start": "910240",
    "end": "913240"
  },
  {
    "text": "yeah i i swear to you sincerely i don't see this as naive i've been a professional developer for 25 years i've",
    "start": "919839",
    "end": "926480"
  },
  {
    "text": "approached this problem from a dozen different angles i've been a professional professor for about 10 years and i focus my study on this so i",
    "start": "926480",
    "end": "934079"
  },
  {
    "text": "think it's the opposite of naive i think it's sophisticated we'll see if you agree in a few minutes so all of these",
    "start": "934079",
    "end": "940399"
  },
  {
    "text": "different strategies remove a script tag eliminate special characters trying to",
    "start": "940399",
    "end": "945920"
  },
  {
    "text": "detect and block evil javascript without blocking good data just",
    "start": "945920",
    "end": "951600"
  },
  {
    "text": "all these are bad strategies because this is almost impossible first of all the entire web application firewall",
    "start": "951600",
    "end": "958320"
  },
  {
    "text": "industry a multi-billion dollar industry tries to do this and fails because if i",
    "start": "958320",
    "end": "963920"
  },
  {
    "text": "tighten the blocking rules too much i'm going to block complex good content like",
    "start": "963920",
    "end": "968959"
  },
  {
    "text": "json if i make the rules even a little bit too lacks i got xss there's no",
    "start": "968959",
    "end": "974959"
  },
  {
    "text": "middle ground here you're not going to pull this off at least up to today's technology so what does that leave me",
    "start": "974959",
    "end": "981680"
  },
  {
    "text": "with these strategies just don't work overall we spent 20 years trying to make them work so this is my principle ensure all",
    "start": "981680",
    "end": "989199"
  },
  {
    "text": "protection from xss is done at the ui layer that's where the rubber hits the",
    "start": "989199",
    "end": "994880"
  },
  {
    "text": "road that's where your variable is put in danger just like where a variable enters a sql query i don't stop sql",
    "start": "994880",
    "end": "1002240"
  },
  {
    "text": "injection on input i stop sql injection with the parameterized query so this is",
    "start": "1002240",
    "end": "1007839"
  },
  {
    "text": "about injection resistance the best place to stop re injection is where the",
    "start": "1007839",
    "end": "1014000"
  },
  {
    "text": "dangerous variable hits the parser in a sql statement it's when you parameterize",
    "start": "1014000",
    "end": "1019040"
  },
  {
    "text": "a query with xss it's when you're building a ui so when i start adding variables to a ui i assume every",
    "start": "1019040",
    "end": "1027600"
  },
  {
    "text": "variable is dangerous and i protect every variable i add to a ui template no",
    "start": "1027600",
    "end": "1033199"
  },
  {
    "text": "variable gets a free raw ride that's why apple had xss they made that mistake",
    "start": "1033199",
    "end": "1038480"
  },
  {
    "text": "and i never depend on server side protections like validation protect me from xss i build user interfaces that",
    "start": "1038480",
    "end": "1045918"
  },
  {
    "text": "are 100 robust to xss defense strategy let's do this so here's my defense grid if i want",
    "start": "1045919",
    "end": "1054000"
  },
  {
    "text": "to display data exactly like the user typed it in i'm going to do output",
    "start": "1054000",
    "end": "1059039"
  },
  {
    "text": "encoding if i'm going to let a user author html in a wysiwyg editor for example i'm going to use an html",
    "start": "1059039",
    "end": "1065919"
  },
  {
    "text": "sanitizer and i'm also going to learn which functions in javascript are safe and which are not we'll sprinkle in some",
    "start": "1065919",
    "end": "1072640"
  },
  {
    "text": "framework tips as well in every major language there's an encoding library",
    "start": "1072640",
    "end": "1078400"
  },
  {
    "text": "this allows you to convert input from a dangerous form",
    "start": "1078400",
    "end": "1083440"
  },
  {
    "text": "why is this character dangerous why is the less than symbol a super",
    "start": "1083440",
    "end": "1089679"
  },
  {
    "text": "dangerous character to add to a web page what do you think",
    "start": "1089679",
    "end": "1096720"
  },
  {
    "text": "why is this character thoroughly dangerous to add to a web page as user content",
    "start": "1096720",
    "end": "1103600"
  },
  {
    "text": "it starts a tag so does the browser think of this as display data or code",
    "start": "1104799",
    "end": "1111520"
  },
  {
    "text": "code how do i add this variable to a web page so it's just display data",
    "start": "1111520",
    "end": "1119360"
  },
  {
    "text": "i use an encoding function that encodes this as an html entity",
    "start": "1119360",
    "end": "1125600"
  },
  {
    "text": "this is the less than symbol html entity and if i just take your your input maybe",
    "start": "1125600",
    "end": "1131600"
  },
  {
    "text": "your physical address and i encode like six characters into their encoded form",
    "start": "1131600",
    "end": "1137760"
  },
  {
    "text": "it will now display on the screen without executing",
    "start": "1137760",
    "end": "1143520"
  },
  {
    "text": "that's the heart of xss defense this is built into sebelt react",
    "start": "1143520",
    "end": "1149280"
  },
  {
    "text": "view uh angular every other major javascript template java server pages active server",
    "start": "1149280",
    "end": "1156000"
  },
  {
    "text": "pages and almost in python templates they take variables and escape them from",
    "start": "1156000",
    "end": "1161039"
  },
  {
    "text": "pretty much by default this is a common defense across the entire application stack industry and so these are the main",
    "start": "1161039",
    "end": "1168160"
  },
  {
    "text": "characters that i want to escape or encode these are the characters that let me build dangerous chunks of javascript",
    "start": "1168160",
    "end": "1175520"
  },
  {
    "text": "and if i convert them from code to display data for all input i add to a",
    "start": "1175520",
    "end": "1181200"
  },
  {
    "text": "web page it's not going to pop anymore it's not going to execute it's going to render",
    "start": "1181200",
    "end": "1186799"
  },
  {
    "text": "the data and display the attack but by doing this i neutralize it and i can't do this on input properly i don't know",
    "start": "1186799",
    "end": "1194960"
  },
  {
    "text": "how to encode until i know where the variable is added to a web",
    "start": "1194960",
    "end": "1200160"
  },
  {
    "text": "page because what makes this difficult is i i what makes this difficult is i need",
    "start": "1200160",
    "end": "1206400"
  },
  {
    "text": "to just i need to encode the data differently based on where i add it to a",
    "start": "1206400",
    "end": "1213039"
  },
  {
    "text": "web page so i don't know how to encode it on input am i doing html entity encoding attribute coding css hex",
    "start": "1213039",
    "end": "1220799"
  },
  {
    "text": "encoding javascript text encoding url encoding i don't know and i don't know",
    "start": "1220799",
    "end": "1226320"
  },
  {
    "text": "until i add it to the user interface in some way this is my world java server pages it's an old technology but this is",
    "start": "1226320",
    "end": "1233280"
  },
  {
    "text": "the vulnerability i'm adding a variable to all these different locations in a",
    "start": "1233280",
    "end": "1238640"
  },
  {
    "text": "web page without any encoding every example here is cross-site scripting",
    "start": "1238640",
    "end": "1244080"
  },
  {
    "text": "we're going to come back to this later and fix it so what we do is we encode we either use a framework that does it for",
    "start": "1244080",
    "end": "1250240"
  },
  {
    "text": "us or we use these encoding functions and code for html and code for attribute and code for javascript and code for css",
    "start": "1250240",
    "end": "1256480"
  },
  {
    "text": "and code for url let's look at and we have the same thing in dotnet in every other major language like the microsoft",
    "start": "1256480",
    "end": "1262559"
  },
  {
    "text": "encoder library and so what does this mean this means if i'm",
    "start": "1262559",
    "end": "1268000"
  },
  {
    "text": "going to add data to the body of html like this then i need to properly encode it like",
    "start": "1268000",
    "end": "1274640"
  },
  {
    "text": "that and code for html in fact if you're using react and you got your mustaches it will do it for you",
    "start": "1274640",
    "end": "1280880"
  },
  {
    "text": "if you got angular got your double mustaches it does it for you the same in view the same in svelt since that's",
    "start": "1280880",
    "end": "1287280"
  },
  {
    "text": "usually what we're developing on if you're still managing older technologies you need to do some of the encoding",
    "start": "1287280",
    "end": "1293679"
  },
  {
    "text": "yourself and again when i'm in here's the attack here is the dangerous attack",
    "start": "1293679",
    "end": "1299919"
  },
  {
    "text": "that's going to steal cookies from your browser and if i encode it in the user interface",
    "start": "1299919",
    "end": "1305679"
  },
  {
    "text": "this is what i get this will display the attack but will not execute it it effectively",
    "start": "1305679",
    "end": "1312080"
  },
  {
    "text": "neutralizes the attack we have the same kind of issue in the world of attributes like right there",
    "start": "1312080",
    "end": "1319280"
  },
  {
    "text": "here i have untrusted data there a data that the attacker can edit and send to",
    "start": "1319280",
    "end": "1325120"
  },
  {
    "text": "your system and it lands right here either a width or some kind of preset value that was",
    "start": "1325120",
    "end": "1331200"
  },
  {
    "text": "driven by user data and i'm going to fix this by encoding i make sure my attributes are double quoted i encode",
    "start": "1331200",
    "end": "1338480"
  },
  {
    "text": "for html attribute when i'm building urls like this in a",
    "start": "1338480",
    "end": "1344320"
  },
  {
    "text": "web page it's a little tricky i have this variable that i'm adding to the middle of an anchor tag href",
    "start": "1344320",
    "end": "1351600"
  },
  {
    "text": "attribute so i do this all the time or how about this rest the black code is",
    "start": "1351600",
    "end": "1356640"
  },
  {
    "text": "hard coded only the variable is untrusted now how do you encode this properly this",
    "start": "1356640",
    "end": "1361919"
  },
  {
    "text": "is where it gets a little tricky it's double context so i first build the url safely with url encoding and then i have",
    "start": "1361919",
    "end": "1369919"
  },
  {
    "text": "this url i make sure it's a quoted attribute and i encode for attribute so",
    "start": "1369919",
    "end": "1375039"
  },
  {
    "text": "i'm double encoding here because that variable is in two locations it's a little bit tricky this is exactly how go",
    "start": "1375039",
    "end": "1382559"
  },
  {
    "text": "templates do their automatic escaping one of the best in the industry what",
    "start": "1382559",
    "end": "1387600"
  },
  {
    "text": "else do we got yeah go templates so look at this right here they're saying if i have an anchor tag with an href",
    "start": "1387600",
    "end": "1395039"
  },
  {
    "text": "attribute and i have a query parameter you can see some html escaping or",
    "start": "1395039",
    "end": "1400720"
  },
  {
    "text": "encoding as well as some url encoding because they're double encoding as they should you encode for url so the",
    "start": "1400720",
    "end": "1409039"
  },
  {
    "text": "url is of a pro so the url is a proper standard it's a legal url and then i",
    "start": "1409039",
    "end": "1415360"
  },
  {
    "text": "don't trust the url so i attribute and code it before i add it to an attribute",
    "start": "1415360",
    "end": "1421039"
  },
  {
    "text": "and i'm good to go no pun intended see did you get that you get that joke",
    "start": "1421039",
    "end": "1426240"
  },
  {
    "text": "i'm good to go right sorry it's pretty bad pretty bad i know thank you thank you",
    "start": "1426240",
    "end": "1431600"
  },
  {
    "text": "all right what do we got here so here okay let's bypass view and react",
    "start": "1431600",
    "end": "1437120"
  },
  {
    "text": "both of these javascript framework technologies they uh what do they do",
    "start": "1437120",
    "end": "1442400"
  },
  {
    "text": "they use jsx the template language and so here's how i bypass it suppose we have a",
    "start": "1442400",
    "end": "1448640"
  },
  {
    "text": "social media feature and i ask you give me your home page a common feature you",
    "start": "1448640",
    "end": "1454400"
  },
  {
    "text": "enter in your home page i make sure it's a valid url then i'll put your home page in an",
    "start": "1454400",
    "end": "1460480"
  },
  {
    "text": "anchor tag visit users facebook page or whatever and i just send a url that",
    "start": "1460480",
    "end": "1466480"
  },
  {
    "text": "looks like this is this a legal url yes it is try it in the browser with the page open it will",
    "start": "1466480",
    "end": "1472400"
  },
  {
    "text": "execute javascript document body enter html and i defaced your website",
    "start": "1472400",
    "end": "1477919"
  },
  {
    "text": "virtually that's and i just bypassed jsx by default in react and view",
    "start": "1477919",
    "end": "1484000"
  },
  {
    "text": "angular will not accept this angular will detect and block it but all the other frameworks will let this ride",
    "start": "1484000",
    "end": "1490720"
  },
  {
    "text": "because this is why we really should have frameworks that solve this problem but they don't so in react i'll do this",
    "start": "1490720",
    "end": "1497520"
  },
  {
    "text": "same thing with view i'll say here's a secure link class i'm going to render an",
    "start": "1497520",
    "end": "1502559"
  },
  {
    "text": "anchor tag and i'm only going to render the href attribute if it's safe and all that safe",
    "start": "1502559",
    "end": "1508880"
  },
  {
    "text": "is saying it must be a legal url it must be either http or https",
    "start": "1508880",
    "end": "1515760"
  },
  {
    "text": "otherwise i'm not going to render it so a javascript url or a data url is going",
    "start": "1515760",
    "end": "1522000"
  },
  {
    "text": "to be rejected this is a weakness in react that should not be there",
    "start": "1522000",
    "end": "1527600"
  },
  {
    "text": "and it's at least it's easy to deal with problem with jsx what else do we got",
    "start": "1527600",
    "end": "1534159"
  },
  {
    "text": "here let's take a look at this if you're doing inline javascript here i am adding",
    "start": "1534159",
    "end": "1540400"
  },
  {
    "text": "a variable in the middle of a script block well i can do all kinds of attacks against that right like i can do double",
    "start": "1540400",
    "end": "1547440"
  },
  {
    "text": "quote semicolon and do a defacement and this is what that new line of code would look like with this attack var name",
    "start": "1547440",
    "end": "1554559"
  },
  {
    "text": "empty string new statement then to face so brutal how do we deal with this with an",
    "start": "1554559",
    "end": "1561360"
  },
  {
    "text": "encoder i do this even to this day some less so but some i just encode for javascript",
    "start": "1561360",
    "end": "1569039"
  },
  {
    "text": "and i make sure they're quoted variables as well now look let me let me jump ahead here a bit",
    "start": "1569039",
    "end": "1576320"
  },
  {
    "text": "a few final thoughts on basic encoding is that there are just certain places in a web",
    "start": "1576320",
    "end": "1581679"
  },
  {
    "text": "page you can't safely add data like you can't put data in an eval function",
    "start": "1581679",
    "end": "1586799"
  },
  {
    "text": "you're basically telling the user please let me know and i'll execute any javascript you want",
    "start": "1586799",
    "end": "1593039"
  },
  {
    "text": "not good or i can't put data in a tag block it needs to be in a quoted",
    "start": "1593039",
    "end": "1599520"
  },
  {
    "text": "attribute to provide safety also be careful of angular bypass security",
    "start": "1599520",
    "end": "1605520"
  },
  {
    "text": "functions they turn off the security of angular look out for dangerously set",
    "start": "1605520",
    "end": "1610720"
  },
  {
    "text": "inner html and react what's your name sir andres if you're using the react",
    "start": "1610720",
    "end": "1617440"
  },
  {
    "text": "function dangerously set inner html what kind of life are you living",
    "start": "1617440",
    "end": "1623679"
  },
  {
    "text": "you're living yes thank high five so don't live dangerously as a developer go buy a",
    "start": "1623679",
    "end": "1630400"
  },
  {
    "text": "motorcycle and go drive fast but don't use that function or use it safely i'll be right back remember the first page",
    "start": "1630400",
    "end": "1637520"
  },
  {
    "text": "earlier in the day let's secure it boom by encoding these variables properly",
    "start": "1637520",
    "end": "1645279"
  },
  {
    "text": "no matter what attack gets to the database no matter what attack gets you user",
    "start": "1645279",
    "end": "1653120"
  },
  {
    "text": "interface any possible attack is neutralized because we're doing proper",
    "start": "1653120",
    "end": "1659440"
  },
  {
    "text": "encoding on that page so i can get the input validation wrong i can get the the web firewall wrong i",
    "start": "1659440",
    "end": "1667279"
  },
  {
    "text": "could have a corrupt database as long as i'm doing proper encoding it's impossible to get evil script to",
    "start": "1667279",
    "end": "1675120"
  },
  {
    "text": "run in that page that takes us to here remember what i'm saying here is if you want to display",
    "start": "1675120",
    "end": "1682320"
  },
  {
    "text": "data exactly like the user typed it in then rely on encoding",
    "start": "1682320",
    "end": "1688480"
  },
  {
    "text": "but what happens if you want to do html rendering of a user i use this a",
    "start": "1688480",
    "end": "1695360"
  },
  {
    "text": "lot like i use either either tiny mce this is a wizzy wig",
    "start": "1695360",
    "end": "1701120"
  },
  {
    "text": "editor well go back what you go back i either use tiny mce",
    "start": "1701120",
    "end": "1706320"
  },
  {
    "text": "this is a whizzy okay i'm sorry i got i got animation problems it's okay we'll we'll just go",
    "start": "1706320",
    "end": "1711760"
  },
  {
    "text": "with sorry sorry animation trouble so there we go",
    "start": "1711760",
    "end": "1717919"
  },
  {
    "text": "what this is is work with me it's a ouija week editor this is a text area in",
    "start": "1717919",
    "end": "1724159"
  },
  {
    "text": "html i applied the tiny mce library and now i have a rich text editor different",
    "start": "1724159",
    "end": "1730240"
  },
  {
    "text": "font sizes links tables when i hit submit on this content",
    "start": "1730240",
    "end": "1736080"
  },
  {
    "text": "it submits a chunk of html i could ease and we want that html to",
    "start": "1736080",
    "end": "1741200"
  },
  {
    "text": "render what if i escape the html in an encoding function what happens",
    "start": "1741200",
    "end": "1746960"
  },
  {
    "text": "it will display the code on screen safely but it's not going to render like",
    "start": "1746960",
    "end": "1752159"
  },
  {
    "text": "the real intention so how and the other replacement that tinymce is froala this",
    "start": "1752159",
    "end": "1758240"
  },
  {
    "text": "is a way better whizzywig editor but my question and look every major framework",
    "start": "1758240",
    "end": "1764080"
  },
  {
    "text": "has tried to build an html cleaner and has failed at some level he'll here at",
    "start": "1764080",
    "end": "1770480"
  },
  {
    "text": "the html sanitizer of node i can bypass an early version with this here is a",
    "start": "1770480",
    "end": "1775760"
  },
  {
    "text": "bypass to wordpress with the javascript link here's and here is how we solve the",
    "start": "1775760",
    "end": "1781919"
  },
  {
    "text": "problem in java or net we use the java html sanitizer or the dotnet fork by mr",
    "start": "1781919",
    "end": "1788960"
  },
  {
    "text": "gantz who maintains a fork of this project this lets me set up a programmatic policy around what html i'm",
    "start": "1788960",
    "end": "1797120"
  },
  {
    "text": "going to accept and i just say sanitize and any tag i don't accept gets ripped",
    "start": "1797120",
    "end": "1802720"
  },
  {
    "text": "out i don't like doing this on the server side though it doesn't fit into modern frameworks very well what i'd",
    "start": "1802720",
    "end": "1809279"
  },
  {
    "text": "rather do is do html sanitizing in the browser itself",
    "start": "1809279",
    "end": "1814399"
  },
  {
    "text": "so remember living dangerously now i can say dom purify.sanitized",
    "start": "1814399",
    "end": "1821360"
  },
  {
    "text": "by the cure 53 dom purify library and i can basically take any dangerous chunk",
    "start": "1821360",
    "end": "1827840"
  },
  {
    "text": "of html sanitize it and what's left is safe to render anywhere on a web page",
    "start": "1827840",
    "end": "1834640"
  },
  {
    "text": "and so this is a really popular library it's so popular that google and the",
    "start": "1834640",
    "end": "1840000"
  },
  {
    "text": "ecmascript standard body has agreed to integrate the dom purify dot sanitize",
    "start": "1840000",
    "end": "1845600"
  },
  {
    "text": "function into the core of javascript it's so important and here we have",
    "start": "1845600",
    "end": "1851279"
  },
  {
    "text": "what's this this is react how are you living dangerously but i if i'm going to",
    "start": "1851279",
    "end": "1856640"
  },
  {
    "text": "use dangerously set inner html i'm turning off react security and if i",
    "start": "1856640",
    "end": "1862320"
  },
  {
    "text": "apply dom purify dot sanitize problem solved it will clean up the html",
    "start": "1862320",
    "end": "1867919"
  },
  {
    "text": "before it renders this is also available inside of inside of angular but this is",
    "start": "1867919",
    "end": "1873440"
  },
  {
    "text": "native you just say ng bind html it's part of angular and it runs an html",
    "start": "1873440",
    "end": "1879919"
  },
  {
    "text": "sanitizer to clean up any bad content the same thing in view this is how i'm",
    "start": "1879919",
    "end": "1885840"
  },
  {
    "text": "integrating view into integrating dom purify into view",
    "start": "1885840",
    "end": "1891600"
  },
  {
    "text": "and again react is the most popular framework anytime you use dangerously set inner",
    "start": "1891600",
    "end": "1898320"
  },
  {
    "text": "html make sure you sanitize the contents so where does that leave us",
    "start": "1898320",
    "end": "1904240"
  },
  {
    "text": "if you want let me go back to here if you want to display data exactly like the user entered it then",
    "start": "1904240",
    "end": "1911840"
  },
  {
    "text": "you should be encoding if you want user data to render html safely then use an",
    "start": "1911840",
    "end": "1918480"
  },
  {
    "text": "html sanitizer preferably one that's built into your user interface not server-side stuff",
    "start": "1918480",
    "end": "1925519"
  },
  {
    "text": "and so let's go deeper and look at javascript functions every single one of these javascript",
    "start": "1925519",
    "end": "1931840"
  },
  {
    "text": "functions is dangerous hey camera guy how you doing are you having a good time",
    "start": "1931840",
    "end": "1937919"
  },
  {
    "text": "how much time do i speaking of time how much time do i have left",
    "start": "1937919",
    "end": "1943679"
  },
  {
    "text": "i'm sorry 50 5-0 awesome",
    "start": "1944480",
    "end": "1950159"
  },
  {
    "text": "that's not true is it how much time what 15 show me how much time i have left with",
    "start": "1950159",
    "end": "1955279"
  },
  {
    "text": "hands he said 50 minutes and we don't have 8 minutes do we",
    "start": "1955279",
    "end": "1962320"
  },
  {
    "text": "how much time do we have please i'm alone here i'm gonna get some water",
    "start": "1962320",
    "end": "1968799"
  },
  {
    "text": "do you ever see the show rick and morty remember when the time lord went and beat up einstein",
    "start": "1968799",
    "end": "1975519"
  },
  {
    "text": "don't mess with time don't mess with time i will mess with time sorry sorry best episode ever",
    "start": "1975519",
    "end": "1983278"
  },
  {
    "text": "seven minutes oh 27 minutes oh we're good how are you having a good time i need a",
    "start": "1984159",
    "end": "1990080"
  },
  {
    "text": "little break i need a little break a little break time",
    "start": "1990080",
    "end": "1994158"
  },
  {
    "text": "all right do you see why all of these javascript functions are dangerous why is inner",
    "start": "1995679",
    "end": "2002799"
  },
  {
    "text": "html so dangerous why i just did 100 slides in 15 minutes",
    "start": "2002799",
    "end": "2008559"
  },
  {
    "text": "that's bad so why is inner html such a dangerous",
    "start": "2008559",
    "end": "2013919"
  },
  {
    "text": "function anybody",
    "start": "2013919",
    "end": "2018760"
  },
  {
    "text": "what if i get what if i have javascript in a variable and i send it to inner html what will happen",
    "start": "2021679",
    "end": "2030360"
  },
  {
    "text": "yeah so that's the problem if i know that a user variable that i submit to your api",
    "start": "2035679",
    "end": "2042880"
  },
  {
    "text": "ends up in the user interface in inner html i can sneak javascript into that input",
    "start": "2042880",
    "end": "2050320"
  },
  {
    "text": "and it will execute when you get to enter html these are all javascript",
    "start": "2050320",
    "end": "2056320"
  },
  {
    "text": "syncs that affect the user interface that will execute javascript if it gets to that",
    "start": "2056320",
    "end": "2063358"
  },
  {
    "text": "variable it makes most of the javascript language pretty dangerous and these are safe all of these are safe",
    "start": "2063359",
    "end": "2071280"
  },
  {
    "text": "text content insert adjacent text even if i have evil javascript in that",
    "start": "2071280",
    "end": "2078000"
  },
  {
    "text": "variable it is not going to execute i also have form field.value",
    "start": "2078000",
    "end": "2083919"
  },
  {
    "text": "this is not going to execute script it's commonly used in javascript create text note create element these are ways to",
    "start": "2083919",
    "end": "2090960"
  },
  {
    "text": "program it programmatically add something to the dom they're going to be safe as well",
    "start": "2090960",
    "end": "2096079"
  },
  {
    "text": "and i can make all the other functions in the world safe by using dom purify",
    "start": "2096079",
    "end": "2103119"
  },
  {
    "text": "inner html is going to populate html raw but if i sanitize the content it's",
    "start": "2103119",
    "end": "2110400"
  },
  {
    "text": "suddenly safe this is really important to the future of the web and again it's",
    "start": "2110400",
    "end": "2115520"
  },
  {
    "text": "going to be native in ecmascript in the next version so what else how about jquery",
    "start": "2115520",
    "end": "2121440"
  },
  {
    "text": "jquery is an insecure antiquated piece of filth as a library that nobody should",
    "start": "2121440",
    "end": "2128079"
  },
  {
    "text": "use don't use it we should be moving to react or smelt or view or if you don't",
    "start": "2128079",
    "end": "2134640"
  },
  {
    "text": "like yourself and like to maintain code in a painful way than angular sorry angular sorry sorry",
    "start": "2134640",
    "end": "2141040"
  },
  {
    "text": "that's just real anybody here maintain a lot of angular code how are you feeling today sir",
    "start": "2141040",
    "end": "2148320"
  },
  {
    "text": "everybody everybody stop everyone raise your hands for a second what's your name sir",
    "start": "2149920",
    "end": "2156079"
  },
  {
    "text": "what's that cold beer hey everyone everyone do me a favor just",
    "start": "2156079",
    "end": "2162960"
  },
  {
    "text": "give him a little shake a little shake he's maintaining anger no get a point ahead and put it at him ready go go get",
    "start": "2162960",
    "end": "2168800"
  },
  {
    "text": "a little woo come on help me out so we're sorry you're suffering all of us here",
    "start": "2168800",
    "end": "2174240"
  },
  {
    "text": "feel your pain of having to maintain angular code do you know your boss's phone number by any chance i'll call him",
    "start": "2174240",
    "end": "2180560"
  },
  {
    "text": "right now no can we call your boss i'll do this",
    "start": "2180560",
    "end": "2187838"
  },
  {
    "text": "okay what is your what what is it what is your boss's number can you type it in for me really quick i don't have a lot of time but here come",
    "start": "2188480",
    "end": "2195440"
  },
  {
    "text": "go type it in you don't have",
    "start": "2195440",
    "end": "2200920"
  },
  {
    "text": "by the way but do you think i would actually call your boss in the middle of the talk yeah yes i would this is for the record",
    "start": "2200960",
    "end": "2208160"
  },
  {
    "text": "i would totally do that let me see if i can get philip on the phone for a second",
    "start": "2208160",
    "end": "2214960"
  },
  {
    "text": "philippe let's see if he's here come on philip answer come on buddy",
    "start": "2214960",
    "end": "2221599"
  },
  {
    "text": "philippe is one of the one of the best angular instructors in the world",
    "start": "2221599",
    "end": "2227359"
  },
  {
    "text": "and he likes angular i don't know why hey phillip are you there",
    "start": "2227359",
    "end": "2233359"
  },
  {
    "text": "hey phillip he's here he's there hey hey dr rick are you there",
    "start": "2233920",
    "end": "2242599"
  },
  {
    "text": "i'm in the middle of a talk right now i have you on speakerphone is that okay",
    "start": "2242640",
    "end": "2247920"
  },
  {
    "text": "one of my students is maintaining angular code and he says he hates himself and he does nothing but suffer",
    "start": "2250640",
    "end": "2257359"
  },
  {
    "text": "and he wants out of this suffering so he he really hates angular you know and i know that you love angular i'm trying to",
    "start": "2257359",
    "end": "2263760"
  },
  {
    "text": "understand why what should i say to this developer who maintains angler for a living and hates himself that's my",
    "start": "2263760",
    "end": "2270800"
  },
  {
    "text": "questions professor taylor",
    "start": "2270800",
    "end": "2277200"
  },
  {
    "text": "you do by default so it's supposed to make your life easier",
    "start": "2277200",
    "end": "2283280"
  },
  {
    "text": "okay i'll tell him that i'll i'm gonna stop torturing you i'll let you go thank you doctor okay",
    "start": "2283280",
    "end": "2288880"
  },
  {
    "text": "so dr derek just said hey angular is largely secure by default so even though",
    "start": "2288880",
    "end": "2295520"
  },
  {
    "text": "you're experiencing a lot of pain and suffering you're helping the world be more secure and he's right i give",
    "start": "2295520",
    "end": "2301520"
  },
  {
    "text": "angular a hard time i do think it's hard to maintain i do think it's a pain to",
    "start": "2301520",
    "end": "2306800"
  },
  {
    "text": "deal with but look at all the frameworks out there who has automatic html",
    "start": "2306800",
    "end": "2312480"
  },
  {
    "text": "sanitization built into it not react not not view not svelte not native",
    "start": "2312480",
    "end": "2318320"
  },
  {
    "text": "javascript only one framework on the planet has us built in and that's angular so while i feel your pain we",
    "start": "2318320",
    "end": "2325920"
  },
  {
    "text": "must listen to dr derek who says really it is by far the most secure framework",
    "start": "2325920",
    "end": "2332800"
  },
  {
    "text": "on the planet so your suffering is our security and we thank you for your sacrifice",
    "start": "2332800",
    "end": "2338880"
  },
  {
    "text": "all right that didn't come out as funny as i wanted it to but i want to get back to work i'm just going to burn some time",
    "start": "2338880",
    "end": "2343920"
  },
  {
    "text": "so i'm a little bit ahead so these this is how we do jquery safely i've had",
    "start": "2343920",
    "end": "2349520"
  },
  {
    "text": "several projects where one of my friends in india who's a developer i go to india to teach couple times a year he's like",
    "start": "2349520",
    "end": "2356560"
  },
  {
    "text": "jim we we've been using jquery and we have like a million xss vulnerabilities",
    "start": "2356560",
    "end": "2362640"
  },
  {
    "text": "and i'm like help i'm like all right so i look at his code base and i see that they're doing just a",
    "start": "2362640",
    "end": "2368400"
  },
  {
    "text": "couple a lot of these lines here really neat code but we have this stuff in here a lot of use of html and append and i",
    "start": "2368400",
    "end": "2375200"
  },
  {
    "text": "look at how they're doing it it's just html so i'm like i can secure this whole system in like a day",
    "start": "2375200",
    "end": "2381839"
  },
  {
    "text": "i need like two interns and i need your mom to send me her curry as a frozen",
    "start": "2381839",
    "end": "2387839"
  },
  {
    "text": "package to my house and i'll do it for free and he's like is it mother",
    "start": "2387839",
    "end": "2393280"
  },
  {
    "text": "talking in hindi is that jim hello jim you like my curry you're a smart man my son will do it",
    "start": "2393280",
    "end": "2400000"
  },
  {
    "text": "right son he's like yeah yeah mom okay so i got the deal a frozen package of really good curry and two interns to",
    "start": "2400000",
    "end": "2407200"
  },
  {
    "text": "work for me for a few days we went through a million lines of jquery crap and imported dom purify and sanitized in",
    "start": "2407200",
    "end": "2415680"
  },
  {
    "text": "about 400 000 locations every use of the html rendering engines",
    "start": "2415680",
    "end": "2421280"
  },
  {
    "text": "and we were live within a week we had a few things broken we fixed it up and in a matter of a week",
    "start": "2421280",
    "end": "2427280"
  },
  {
    "text": "we were able to fit we were able to fix several million lines of",
    "start": "2427280",
    "end": "2432800"
  },
  {
    "text": "of jquery advance code by using dom purify did i get my curry yes i did it showed",
    "start": "2432800",
    "end": "2440800"
  },
  {
    "text": "up in a dhl a german courier in a multiple layer dry ice package with a",
    "start": "2440800",
    "end": "2447520"
  },
  {
    "text": "few inner layers were still frozen the outer ones were not and frozen block of curry from like this gourmet chef oh oh",
    "start": "2447520",
    "end": "2455760"
  },
  {
    "text": "my god i remember eating it my girlfriend's like are you gonna share any of this with me i'm like",
    "start": "2455760",
    "end": "2461760"
  },
  {
    "text": "okay let's let's just move on let's just move on so so do we have a good idea of our",
    "start": "2461760",
    "end": "2466960"
  },
  {
    "text": "strategy now let's think through this all jokes aside let's think through this if you're gonna display data just like",
    "start": "2466960",
    "end": "2473920"
  },
  {
    "text": "the user typed it in you need to use an encoding function angular's",
    "start": "2473920",
    "end": "2479119"
  },
  {
    "text": "mustache reacts double mustache or whatever the basic encoding function is for that framework number one number two",
    "start": "2479119",
    "end": "2486880"
  },
  {
    "text": "if you're going to use urls in an attribute you got to validate that url",
    "start": "2486880",
    "end": "2493680"
  },
  {
    "text": "to make sure it's not a javascript or data url you make sure it's illegal html",
    "start": "2493680",
    "end": "2498960"
  },
  {
    "text": "https url preferably if you're going to let a user author their own html that you want to render",
    "start": "2498960",
    "end": "2505680"
  },
  {
    "text": "safely then you need to use a formal html sanitizer i only recommend one dom purify by the",
    "start": "2505680",
    "end": "2513680"
  },
  {
    "text": "cure 53 team they're working with the standard body to integrate their technique into ecmascript also if you're",
    "start": "2513680",
    "end": "2521200"
  },
  {
    "text": "doing low-level javascript programming you need to understand which javascript",
    "start": "2521200",
    "end": "2526480"
  },
  {
    "text": "functions are dangerous and which ones are not if the function is dangerous dom",
    "start": "2526480",
    "end": "2531680"
  },
  {
    "text": "purify or just use the safe functions this is our basic uh design and",
    "start": "2531680",
    "end": "2538640"
  },
  {
    "text": "architecture guide to doing xss defense properly now here's a few other things",
    "start": "2538640",
    "end": "2544160"
  },
  {
    "text": "suppose you need to deploy content from a third party and you have no trust over that content well you can then use an",
    "start": "2544160",
    "end": "2551040"
  },
  {
    "text": "iframe sandbox this is pretty robust but it locks things down too much sometimes",
    "start": "2551040",
    "end": "2556720"
  },
  {
    "text": "if i have an iframe with content from a third party i can set up a sandbox",
    "start": "2556720",
    "end": "2561760"
  },
  {
    "text": "attribute and that will stop scripts from running so if i'm given like an advertisement and i want to neutralize",
    "start": "2561760",
    "end": "2568000"
  },
  {
    "text": "the javascript in it i'll just drop it in iframe sandbox or if marketing gives me a tracking widget",
    "start": "2568000",
    "end": "2574560"
  },
  {
    "text": "that has no security in it i'll just put it in iframe sandbox until they complain i i got a big fight with marketing at",
    "start": "2574560",
    "end": "2581680"
  },
  {
    "text": "one of my customers they were like um please put this marketing widget on the home page and i'm like it's http",
    "start": "2581680",
    "end": "2588960"
  },
  {
    "text": "it's from a fly by night company i'm looking at the javascript with tracking vulnerabilities i'm not going to do this",
    "start": "2588960",
    "end": "2594800"
  },
  {
    "text": "and they're like we are your boss we are the marketing team we know what we're doing i'm like no problem so i put their",
    "start": "2594800",
    "end": "2601200"
  },
  {
    "text": "tracking widget in an iframe sandbox and i said no script is allowed and they're",
    "start": "2601200",
    "end": "2606240"
  },
  {
    "text": "like and i show here here there it is they're like great thanks six months later they were like yeah",
    "start": "2606240",
    "end": "2612720"
  },
  {
    "text": "we're not getting data from that tracking widget i'm like well maybe maybe it's broken they're like no no go look at your code",
    "start": "2612720",
    "end": "2618880"
  },
  {
    "text": "so all i did was i turned on allow scripts and now this",
    "start": "2618880",
    "end": "2623920"
  },
  {
    "text": "the tracking script would run but only in the sandbox and it wouldn't affect the rest of the page they were",
    "start": "2623920",
    "end": "2630160"
  },
  {
    "text": "getting very little data but they went away for another year and the app was protected all right that's not a great",
    "start": "2630160",
    "end": "2635680"
  },
  {
    "text": "story but all right content security policy hey camera guy",
    "start": "2635680",
    "end": "2642960"
  },
  {
    "text": "16 minutes thank you sir let's talk about content security policy i'm going to use slides",
    "start": "2644160",
    "end": "2650640"
  },
  {
    "text": "with permission from lucas weichelbaum and michelle spagniolo these are both uh",
    "start": "2650640",
    "end": "2656560"
  },
  {
    "text": "senior security engineers for one of the largest software companies in the world i know we all have opinions about google",
    "start": "2656560",
    "end": "2664079"
  },
  {
    "text": "in europe right yeah like let's sue them for billions of euros for stealing and violating the",
    "start": "2664079",
    "end": "2670160"
  },
  {
    "text": "privacy of all eu citizens gdpr okay okay can we get that out of the way now the",
    "start": "2670160",
    "end": "2676000"
  },
  {
    "text": "individuals that work for google are some extraordinary professionals who really care about web security so",
    "start": "2676000",
    "end": "2682800"
  },
  {
    "text": "is that mango hey he's leaving all right bye so these gentlemen",
    "start": "2682800",
    "end": "2688319"
  },
  {
    "text": "they they didn't write the standard they're not managers they're not developers they're research scientists",
    "start": "2688319",
    "end": "2694800"
  },
  {
    "text": "and they're experts in content security policy they went to about a thousand different google websites",
    "start": "2694800",
    "end": "2701200"
  },
  {
    "text": "and they applied content security policy and studied the effectiveness of their",
    "start": "2701200",
    "end": "2706319"
  },
  {
    "text": "defense from a scientific study point of view and what they tell us is this is",
    "start": "2706319",
    "end": "2711440"
  },
  {
    "text": "the only good way to deploy csp is with nonces so what is content security",
    "start": "2711440",
    "end": "2717200"
  },
  {
    "text": "policy content security policy is a response header",
    "start": "2717200",
    "end": "2723280"
  },
  {
    "text": "and this header the name of the and you can what is a response header anytime you",
    "start": "2723280",
    "end": "2729040"
  },
  {
    "text": "deliver a page to a browser you have the response object and you go add header",
    "start": "2729040",
    "end": "2735040"
  },
  {
    "text": "name value so it's a trivial thing it's metadata that i can add to any response",
    "start": "2735040",
    "end": "2741280"
  },
  {
    "text": "to any web page so i'll say in this in this response i'll say content security policy to activate the standard and i'll",
    "start": "2741280",
    "end": "2748880"
  },
  {
    "text": "say script source when it comes to javascript only run it if it includes",
    "start": "2748880",
    "end": "2754240"
  },
  {
    "text": "that nonce now that nonce should not be r4nd0m it should be",
    "start": "2754240",
    "end": "2760400"
  },
  {
    "text": "an actual random value different with every page load and so i got that random",
    "start": "2760400",
    "end": "2766240"
  },
  {
    "text": "value and now if the attacker injects this script it's not going to run if the",
    "start": "2766240",
    "end": "2772079"
  },
  {
    "text": "attacker injects this script it's not going to run only that script from the developer with the proper nonce is going",
    "start": "2772079",
    "end": "2778480"
  },
  {
    "text": "to run only that script with the proper knots is going to run so this is a way for me to set a policy",
    "start": "2778480",
    "end": "2785200"
  },
  {
    "text": "to specifically not the script blocks that i care about so if the attacker",
    "start": "2785200",
    "end": "2790880"
  },
  {
    "text": "injects into the page he don't got the nonce so it's their attack is not going to run",
    "start": "2790880",
    "end": "2797359"
  },
  {
    "text": "this is by far one of the most effective ways to stop xss in any modern browser even safari",
    "start": "2797359",
    "end": "2804960"
  },
  {
    "text": "picks this up as a 15.4 so so so so what's wrong with this",
    "start": "2804960",
    "end": "2811200"
  },
  {
    "text": "how many dependencies could this file have this one javascript could have a hundred",
    "start": "2811200",
    "end": "2817520"
  },
  {
    "text": "dependencies and in this case they're not gonna run i have to take the nonce",
    "start": "2817520",
    "end": "2823040"
  },
  {
    "text": "and apply it to every single library i need and when you have complicated",
    "start": "2823040",
    "end": "2828720"
  },
  {
    "text": "hierarchies that's almost impossible to do so in the world of content security",
    "start": "2828720",
    "end": "2834880"
  },
  {
    "text": "policy three we have strict dynamic strict dynamic and a script source block",
    "start": "2834880",
    "end": "2842480"
  },
  {
    "text": "will will allow javascript execution via document create elements so what that",
    "start": "2842480",
    "end": "2848880"
  },
  {
    "text": "means is if your library is adding dependencies programmatically this is",
    "start": "2848880",
    "end": "2854880"
  },
  {
    "text": "what you should do this is the only proper way to add a dependency to a",
    "start": "2854880",
    "end": "2860079"
  },
  {
    "text": "library in fact let me show it to you this way here i am with the script knots block",
    "start": "2860079",
    "end": "2865760"
  },
  {
    "text": "they're building a string that's a script block as a dependency and then writing that to the document",
    "start": "2865760",
    "end": "2872000"
  },
  {
    "text": "this is not the right way to use javascript this is wrong same thing here i have a not",
    "start": "2872000",
    "end": "2878079"
  },
  {
    "text": "i have a script lock that's building a script block that's a string and adding it to the body that's the wrong way to",
    "start": "2878079",
    "end": "2884960"
  },
  {
    "text": "do javascript that is not proper javascript programming it hasn't been for over a decade you want to do this",
    "start": "2884960",
    "end": "2891160"
  },
  {
    "text": "programmatic dom javascript use this is proper javascript create element script",
    "start": "2891160",
    "end": "2896720"
  },
  {
    "text": "there's my source add it to the body and if you add your dependencies to your",
    "start": "2896720",
    "end": "2901760"
  },
  {
    "text": "libraries this way when strict dynamic sees a nonce right there it will automatically load",
    "start": "2901760",
    "end": "2909920"
  },
  {
    "text": "that dependency if it's added programmatically now i can do a crazy",
    "start": "2909920",
    "end": "2916079"
  },
  {
    "text": "positive policy not strict dynamic i just need to not",
    "start": "2916079",
    "end": "2921440"
  },
  {
    "text": "the libraries i'm using the dependencies load automatically and i block any",
    "start": "2921440",
    "end": "2926559"
  },
  {
    "text": "plug-in or base jumping attack i'll look at that in a second so what does that mean this is the way to pull off content",
    "start": "2926559",
    "end": "2932960"
  },
  {
    "text": "security policy script source not strict dynamic if you",
    "start": "2932960",
    "end": "2938559"
  },
  {
    "text": "need to use the eval function unsafe eval object source will stop object tag",
    "start": "2938559",
    "end": "2945280"
  },
  {
    "text": "injection base uri will stop base jumping i'm going to pass on those for now now even better",
    "start": "2945280",
    "end": "2952640"
  },
  {
    "text": "if you don't need the eval function then just do this you got a notch and you got strict dynamic and now you and then you",
    "start": "2952640",
    "end": "2959760"
  },
  {
    "text": "nonce each are you taking a picture of this sir wait wait wait let me get in on this come on come on",
    "start": "2959760",
    "end": "2964800"
  },
  {
    "text": "one more time thank you so",
    "start": "2964800",
    "end": "2970400"
  },
  {
    "text": "this is like not strict dynamic this means any library nonced it will load the",
    "start": "2970400",
    "end": "2976240"
  },
  {
    "text": "dependencies even better don't use strict dynamic have a much more discreet",
    "start": "2976240",
    "end": "2982960"
  },
  {
    "text": "and limited list of javascript libraries and not",
    "start": "2982960",
    "end": "2988240"
  },
  {
    "text": "every library and every dependency with the knots and then you don't need strict",
    "start": "2988240",
    "end": "2993440"
  },
  {
    "text": "dynamic this is by far the best way to roll it's much more difficult to deploy",
    "start": "2993440",
    "end": "2999040"
  },
  {
    "text": "because you need to know every single dependency in your javascript family",
    "start": "2999040",
    "end": "3004559"
  },
  {
    "text": "that's content security policy in a nutshell i recommend go google these two",
    "start": "3004559",
    "end": "3010480"
  },
  {
    "text": "googlers and these gentlemen are have several presentations on how to deploy content",
    "start": "3010480",
    "end": "3017040"
  },
  {
    "text": "security policy that's by far the best in the world that i've seen and i'm",
    "start": "3017040",
    "end": "3022400"
  },
  {
    "text": "using their slides with permission i appreciate the being allowed to use it let's finish up this presentation this",
    "start": "3022400",
    "end": "3028559"
  },
  {
    "text": "is the now we're almost done the latest technology to try to stop cross-site scripting is something called",
    "start": "3028559",
    "end": "3035200"
  },
  {
    "text": "trusted types this is really impressive when i enable content security policy",
    "start": "3035200",
    "end": "3040960"
  },
  {
    "text": "require trusted types for script all of a sudden these dangerous functions enter html outer html they all",
    "start": "3040960",
    "end": "3050480"
  },
  {
    "text": "stop working any function in javascript that will execute script is disabled",
    "start": "3050480",
    "end": "3057440"
  },
  {
    "text": "when you enable require trusted types for the way that we solve this and the",
    "start": "3057440",
    "end": "3062640"
  },
  {
    "text": "way that we use it is like this i can for there's content security policy require trusted types for script",
    "start": "3062640",
    "end": "3070800"
  },
  {
    "text": "and now inner html if i if when i do create html it's going",
    "start": "3070800",
    "end": "3078000"
  },
  {
    "text": "to automatically on the sanitizer and if i run inner html by itself it's going to",
    "start": "3078000",
    "end": "3083760"
  },
  {
    "text": "reject it it's not going to run because it's not properly configured right so up here i say the constant sanitizer anyway",
    "start": "3083760",
    "end": "3091359"
  },
  {
    "text": "if type of trusted types is undefined sanitizer is create policy foo",
    "start": "3091359",
    "end": "3098240"
  },
  {
    "text": "and create html says dom purify sanitize the input for any html create function",
    "start": "3098240",
    "end": "3106079"
  },
  {
    "text": "so if i go sanitizer create html then i got a safe use of inner html and",
    "start": "3106079",
    "end": "3113680"
  },
  {
    "text": "if i use inner html by itself it's not going to run anymore because trusted",
    "start": "3113680",
    "end": "3119040"
  },
  {
    "text": "type says you may not do that this is a it's a really advanced standard it lets me",
    "start": "3119040",
    "end": "3125160"
  },
  {
    "text": "programmatically define how individual dangerous functions in javascript work",
    "start": "3125160",
    "end": "3132079"
  },
  {
    "text": "and i do believe this is the end of the line for xss defense and my hope is",
    "start": "3132079",
    "end": "3138480"
  },
  {
    "text": "a hope i've had for many many years and i've tried been trying hard i want",
    "start": "3138480",
    "end": "3144720"
  },
  {
    "text": "one thing out of life i want to give the last xss defense talk and have this problem be resolved i've been given this",
    "start": "3144720",
    "end": "3151440"
  },
  {
    "text": "talk for many years and i'm hoping this is the last time i am hoping that trusted types is the final defense layer",
    "start": "3151440",
    "end": "3159359"
  },
  {
    "text": "and that we can put this problem to bed and move on to other problems i am done",
    "start": "3159359",
    "end": "3164800"
  },
  {
    "text": "with the talk we talked about how to test for cross-site scripting we looked at output encoding input validation for",
    "start": "3164800",
    "end": "3171599"
  },
  {
    "text": "urls html sanitization what is safe in javascript in some of",
    "start": "3171599",
    "end": "3177200"
  },
  {
    "text": "our frameworks and last we looked at content security policy 3.0 and the new",
    "start": "3177200",
    "end": "3182480"
  },
  {
    "text": "trusted types initiative giving you a complete discourse on what xsf defense",
    "start": "3182480",
    "end": "3188400"
  },
  {
    "text": "is today and what the state of the art is today if you have questions for me hit me up on twitter please twitter.com",
    "start": "3188400",
    "end": "3195599"
  },
  {
    "text": "manaco and most importantly thank you all for being here and caring about security and i salute you all go",
    "start": "3195599",
    "end": "3203040"
  },
  {
    "text": "forth and write secure code go forth and write secure user interfaces if you have",
    "start": "3203040",
    "end": "3208480"
  },
  {
    "text": "questions let me know enjoy the rest of the conference thank you for coming to my talk have a great day everybody cheers",
    "start": "3208480",
    "end": "3216400"
  },
  {
    "text": "how much time do we have left how much time do we have left by the way any i'll do q a any questions about xss",
    "start": "3219599",
    "end": "3227839"
  },
  {
    "text": "or about you know security in general hey gb great bearded one there's my argument what do you think",
    "start": "3227839",
    "end": "3235680"
  },
  {
    "text": "thank you",
    "start": "3235680",
    "end": "3238838"
  },
  {
    "text": "that's my take on it yes sir i can get a lot of defense on input don't get me wrong like if i can say",
    "start": "3253920",
    "end": "3260240"
  },
  {
    "text": "in a validation layer letters and numbers only that stops xss or if i say",
    "start": "3260240",
    "end": "3265359"
  },
  {
    "text": "this may only be a number that stops xss it's really the like the big paragraphs of text open text html urls email",
    "start": "3265359",
    "end": "3275119"
  },
  {
    "text": "addresses all of those are impossible to validate thank you for coming here sir i appreciate i appreciate your your",
    "start": "3275119",
    "end": "3281760"
  },
  {
    "text": "comments and being here any questions yes sir",
    "start": "3281760",
    "end": "3287799"
  },
  {
    "text": "oh yeah uh well what do you cash first of all if",
    "start": "3297520",
    "end": "3303119"
  },
  {
    "text": "the page is if the page is static you don't need xss defense if the page",
    "start": "3303119",
    "end": "3309440"
  },
  {
    "text": "is dynamic and you're adding variables to a page that can't be static now the",
    "start": "3309440",
    "end": "3316000"
  },
  {
    "text": "template might be static and the json is dynamic right so you got",
    "start": "3316000",
    "end": "3321200"
  },
  {
    "text": "you so you have a static template like react that loads json dynamically so in",
    "start": "3321200",
    "end": "3326640"
  },
  {
    "text": "that case you build json securely but the question is about content security policy and nonces right",
    "start": "3326640",
    "end": "3333599"
  },
  {
    "text": "so what i would recommend is i wouldn't if generating random numbers at scale is",
    "start": "3333599",
    "end": "3340079"
  },
  {
    "text": "becoming a bottleneck then you can make the page bigger but static by using",
    "start": "3340079",
    "end": "3346400"
  },
  {
    "text": "hashes by using csp hashes let me show you this real quick sir",
    "start": "3346400",
    "end": "3352559"
  },
  {
    "text": "and this is something that will cache better but it increases the page size significantly that's i tend to not use",
    "start": "3352559",
    "end": "3359040"
  },
  {
    "text": "it so but it's definitely an option where's my mouse",
    "start": "3359040",
    "end": "3364318"
  },
  {
    "text": "there we go so let me go to csb hashes so he wants something that doesn't",
    "start": "3364880",
    "end": "3370480"
  },
  {
    "text": "require a lot of random number generation so i can have a script here that i like",
    "start": "3370480",
    "end": "3376559"
  },
  {
    "text": "and i'll generate the sha 256 hash of that script and then i'll say script source and content security policy sha",
    "start": "3376559",
    "end": "3384160"
  },
  {
    "text": "and that hash and i have a list of them okay i'm sorry i was really excited",
    "start": "3384160",
    "end": "3390960"
  },
  {
    "text": "there we go i'm almost out of here so i have a script that's legal",
    "start": "3390960",
    "end": "3396640"
  },
  {
    "text": "i generate the hash of it and in csp i say script source shot 36 and a hash value i have a unique",
    "start": "3396640",
    "end": "3404079"
  },
  {
    "text": "hash value for every script block i need to accept and that way it's static",
    "start": "3404079",
    "end": "3410640"
  },
  {
    "text": "i don't need to do a random number anymore but i'm going to have a list of hashes for every single script lock and",
    "start": "3410640",
    "end": "3417119"
  },
  {
    "text": "that could get big fast so there's your answer you want something more cachable content security policy script source",
    "start": "3417119",
    "end": "3424640"
  },
  {
    "text": "hashing is your solution thank you sir i'm done hey thank you again enjoy the",
    "start": "3424640",
    "end": "3431599"
  },
  {
    "text": "rest of the conference have a great night everybody",
    "start": "3431599",
    "end": "3435960"
  }
]