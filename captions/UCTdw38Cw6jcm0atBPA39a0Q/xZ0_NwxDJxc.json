[
  {
    "text": "hello everybody and welcome to the last session of the day where",
    "start": "6560",
    "end": "13360"
  },
  {
    "text": "i am going to talk about migrating your web apps to asp.net core one page at a time",
    "start": "13360",
    "end": "20480"
  },
  {
    "text": "and this technique works for any kind of web app you can do it with",
    "start": "20480",
    "end": "27439"
  },
  {
    "text": "asp.net web forms asp.net mvc theoretically classic asp",
    "start": "27439",
    "end": "35440"
  },
  {
    "text": "if you have a classic asp application what else rails django pretty much",
    "start": "35440",
    "end": "41920"
  },
  {
    "text": "anything but mainly web forms because",
    "start": "41920",
    "end": "47920"
  },
  {
    "text": "reasons um i'm mark rendell and uh i have been working with net since",
    "start": "47920",
    "end": "54399"
  },
  {
    "text": "the first.net actually since the first.net beta i downloaded the first ever beta of dot net 1.0 and then wrote a c sharp",
    "start": "54399",
    "end": "61840"
  },
  {
    "text": "program to run reflection over the entire base class library and give me all the",
    "start": "61840",
    "end": "68159"
  },
  {
    "text": "classes and methods and everything and i've been really excited about all",
    "start": "68159",
    "end": "74479"
  },
  {
    "text": "the new.net stuff um i was there with uh when it was called project",
    "start": "74479",
    "end": "79680"
  },
  {
    "text": "k um and i actually put something into production with project k way back in the day in a docker",
    "start": "79680",
    "end": "85759"
  },
  {
    "text": "container um and it was a micro micro service",
    "start": "85759",
    "end": "91119"
  },
  {
    "text": "that generated a guide you hit an end point and it generated to give it",
    "start": "91119",
    "end": "96159"
  },
  {
    "text": "and it gave it back to you and the only reason it existed was because uh almost everything was written in node",
    "start": "96159",
    "end": "102240"
  },
  {
    "text": "and node is terribly slow at generating goods and it locks while it's doing it uh",
    "start": "102240",
    "end": "108720"
  },
  {
    "text": "mick mate could you mute yourself please can i mute you there we go thanks very",
    "start": "108720",
    "end": "114159"
  },
  {
    "text": "much um unless you were kind of going node is very fast at generating viewings in",
    "start": "114159",
    "end": "119920"
  },
  {
    "text": "which case no it isn't wrong um but yes so i pulled gui generation out into a",
    "start": "119920",
    "end": "126719"
  },
  {
    "text": "microservice so that load didn't have to work so hard and could keep tracking people's movements over some",
    "start": "126719",
    "end": "131760"
  },
  {
    "text": "web pages um but yes and now we're onto net 5.0",
    "start": "131760",
    "end": "137680"
  },
  {
    "text": "and now microsoft have essentially gone all in and said we are this is now.net the",
    "start": "137680",
    "end": "144800"
  },
  {
    "text": "old.net is the old.net and this is new.net going forwards and everything else and so",
    "start": "144800",
    "end": "150239"
  },
  {
    "text": "they haven't brought over various things",
    "start": "150239",
    "end": "155200"
  },
  {
    "text": "and one of the things they haven't brought over is web forms and a bunch of people are obviously quite",
    "start": "155680",
    "end": "160879"
  },
  {
    "text": "upset about this people have got big complicated applications written in asp.net web forms and we're talking",
    "start": "160879",
    "end": "167760"
  },
  {
    "text": "like hundreds of thousands or millions of lines of code around the world there are probably billions of lines of",
    "start": "167760",
    "end": "174720"
  },
  {
    "text": "code all wrapped up in asp.net web forms and microsoft is not bringing it over and i",
    "start": "174720",
    "end": "181599"
  },
  {
    "text": "think that's a good thing and the reason i think that is a good thing is because i have worked with a lot of",
    "start": "181599",
    "end": "189120"
  },
  {
    "text": "asp.net web forms applications over the years and",
    "start": "189120",
    "end": "194319"
  },
  {
    "text": "after 20 years when you've got an application that's started in net 1.0 or net 2.0 and has been",
    "start": "194319",
    "end": "202000"
  },
  {
    "text": "maintained for the past 20 years by a succession of different people trying to maintain an asp.net web forms",
    "start": "202000",
    "end": "208799"
  },
  {
    "text": "application in 2021 is a dumpster fire yes it is you might be saying",
    "start": "208799",
    "end": "214319"
  },
  {
    "text": "not all web forms applications you can write clean web forms code and you can",
    "start": "214319",
    "end": "219519"
  },
  {
    "text": "use proper programming practices and dependency injection and all this sort of stuff not all web forms applications",
    "start": "219519",
    "end": "225760"
  },
  {
    "text": "are bad to which i reply i have seen things you people wouldn't believe",
    "start": "225760",
    "end": "233599"
  },
  {
    "text": "i firmly believe that in this day and age the worst c-sharp code still in",
    "start": "233599",
    "end": "240239"
  },
  {
    "text": "production exists entirely inside web forms applications",
    "start": "240239",
    "end": "245519"
  },
  {
    "text": "i am not going to show any examples because they all come",
    "start": "245519",
    "end": "250720"
  },
  {
    "text": "from real places but recently i found a method in an asp.net web forms",
    "start": "250720",
    "end": "258320"
  },
  {
    "text": "application where they wanted they were trying to correct common spelling mistakes um if you spelled",
    "start": "258320",
    "end": "265600"
  },
  {
    "text": "document wrong they would try and correct it and so they had a huge if statement that contained all",
    "start": "265600",
    "end": "274560"
  },
  {
    "text": "the possible um misspellings of the word document",
    "start": "274560",
    "end": "279680"
  },
  {
    "text": "and i mean there were like 300 and something or pipes in this",
    "start": "279680",
    "end": "287280"
  },
  {
    "text": "if statement and um and on every single one of those all",
    "start": "287280",
    "end": "293840"
  },
  {
    "text": "statements they called dot trim on the variable that contained the document name",
    "start": "293840",
    "end": "298880"
  },
  {
    "text": "so they created 300 strings in the process of running this if statement and that's just just one example you",
    "start": "298880",
    "end": "305759"
  },
  {
    "text": "know it's it's like it's like a whole daily wtf and it's all inside web forms code so",
    "start": "305759",
    "end": "313840"
  },
  {
    "text": "why would you want to move i mean let's let's assume that you are one of the people who are not all web forms and actually yes",
    "start": "313840",
    "end": "319199"
  },
  {
    "text": "you've got a really really nice web forms application and it's a joy to maintain and and you absolutely love it and you",
    "start": "319199",
    "end": "326080"
  },
  {
    "text": "wouldn't trade it for anything at all why would you want to move to asp.net core",
    "start": "326080",
    "end": "331199"
  },
  {
    "text": "well a variety of reasons first it runs on linux now that might not sound like a",
    "start": "331199",
    "end": "338400"
  },
  {
    "text": "particular um reason to switch over but consider that the hosting costs for linux",
    "start": "338400",
    "end": "345280"
  },
  {
    "text": "tend to be less than the hosting costs for windows servers especially in a cloud environment also",
    "start": "345280",
    "end": "350800"
  },
  {
    "text": "the fact that it runs on linux means that it runs in containers which means you can use",
    "start": "350800",
    "end": "355840"
  },
  {
    "text": "docker and kubernetes or azure container services or the digital ocean",
    "start": "355840",
    "end": "363280"
  },
  {
    "text": "droplets where you just go here's my image run me that as a docker container",
    "start": "363280",
    "end": "368560"
  },
  {
    "text": "and all that good stuff and then you can also get into service meshes and all kinds of bunkers things that make",
    "start": "368560",
    "end": "374960"
  },
  {
    "text": "kubernetes so much fun also asp.net core is stupid far and i",
    "start": "374960",
    "end": "380319"
  },
  {
    "text": "mean it is really stupid fast um there's a great little anecdote from waybacker",
    "start": "380319",
    "end": "387759"
  },
  {
    "text": "at ndc i think ndc oslo a few years ago um where uh damien edwards and david",
    "start": "387759",
    "end": "395360"
  },
  {
    "text": "fowler did a talk um on asp.net core and how they were working on making the",
    "start": "395360",
    "end": "402080"
  },
  {
    "text": "performance better and it was a deep dive into some of the things like did you know for example that when asp.net call checks the",
    "start": "402080",
    "end": "410479"
  },
  {
    "text": "http verb get put post delete that sort of thing it actually converts the utf-8 bytes",
    "start": "410479",
    "end": "417520"
  },
  {
    "text": "into a 64-bit integer and then just maps against those um to do a really quick look up of what",
    "start": "417520",
    "end": "424479"
  },
  {
    "text": "verb it is which is much better than what node used to do when it wanted to check where it just checked the first letter of the",
    "start": "424479",
    "end": "432639"
  },
  {
    "text": "method instead and so patch put and post were all treated as the same thing brilliant um but yes anyway they were",
    "start": "432639",
    "end": "440800"
  },
  {
    "text": "trying to make it fast and when they first came out with the kestrel http server",
    "start": "440800",
    "end": "445919"
  },
  {
    "text": "um kelly uh kelabite kelly summers i think her name is on linux was building her own http",
    "start": "445919",
    "end": "453199"
  },
  {
    "text": "server in c and she benchmarked it and she benchmarked kestrel and her server could",
    "start": "453199",
    "end": "458240"
  },
  {
    "text": "do like a million requests a second and kestrel on the same hardware could do 70 000 requests a second",
    "start": "458240",
    "end": "464400"
  },
  {
    "text": "and so she was come making fun of of kestrel and apparently damian went",
    "start": "464400",
    "end": "469919"
  },
  {
    "text": "into the the room where the developers on kestrel were working and went why why do we only do 70 000 requests a",
    "start": "469919",
    "end": "476639"
  },
  {
    "text": "second this is this is ridiculous and they said you didn't say you wanted it to be fast",
    "start": "476639",
    "end": "482400"
  },
  {
    "text": "and so he went yes make it fast please that would be really good and so they",
    "start": "482400",
    "end": "487840"
  },
  {
    "text": "went off and they did and now it's basically it's up near the top of the benchmarks on the tech and power",
    "start": "487840",
    "end": "493199"
  },
  {
    "text": "benchmarks for the plain text so the kestrel server itself is fast",
    "start": "493199",
    "end": "498400"
  },
  {
    "text": "and there's a huge amount of effort still going into things like making database access fast and making json",
    "start": "498400",
    "end": "503919"
  },
  {
    "text": "serialization fast so that it can climb further up the benchmarks on things like fortunes and database",
    "start": "503919",
    "end": "511360"
  },
  {
    "text": "updates and so forth but the number one reason why you want to move to asp.net core from asp.net",
    "start": "511360",
    "end": "518399"
  },
  {
    "text": "is that asp.net core is being actively developed people are working on it it is having",
    "start": "518399",
    "end": "524560"
  },
  {
    "text": "features added it is supported by microsoft it's also open source so if you run into a problem and you",
    "start": "524560",
    "end": "531120"
  },
  {
    "text": "know how to fix it you can fix it and send them a pull request and you know so that's good too but the",
    "start": "531120",
    "end": "536160"
  },
  {
    "text": "fact is that asp.net core is getting all the attention and love on asp.net web forms",
    "start": "536160",
    "end": "542000"
  },
  {
    "text": "is getting none and this is a problem because web forms is",
    "start": "542000",
    "end": "547760"
  },
  {
    "text": "not supported in dotnet or 5.0 because it would be really really really",
    "start": "547760",
    "end": "553120"
  },
  {
    "text": "difficult to migrate all of web forms across quite a lot of what happens inside web forms",
    "start": "553120",
    "end": "558320"
  },
  {
    "text": "is actually windows components and so making it cross-platform they'd have to rewrite a bunch of stuff",
    "start": "558320",
    "end": "563600"
  },
  {
    "text": "as dot-net components and they don't want to do that so you can't just bring your web forms",
    "start": "563600",
    "end": "568959"
  },
  {
    "text": "over to net core and then start migrating it to mvc or whatever you want to do",
    "start": "568959",
    "end": "574320"
  },
  {
    "text": "but also asp.net core doesn't run on net4 it used to um the first version",
    "start": "574320",
    "end": "581200"
  },
  {
    "text": "of asp net core did run on.net 4.6 and higher i believe but as they started",
    "start": "581200",
    "end": "589279"
  },
  {
    "text": "adding more things for performance and everything else to.net core um like span and memory and buffers and",
    "start": "589279",
    "end": "596080"
  },
  {
    "text": "all sorts of things where they were actually changing the runtime to make these things work um and they",
    "start": "596080",
    "end": "602160"
  },
  {
    "text": "were using these features a lot of these features were driven by asp.net core and so they had to make the decision say",
    "start": "602160",
    "end": "609040"
  },
  {
    "text": "asp.net core is going to only run on.net core and now.net five",
    "start": "609040",
    "end": "614560"
  },
  {
    "text": "and so there's no sort of a bit at a time path really to go from asp.net web forms",
    "start": "614560",
    "end": "622800"
  },
  {
    "text": "or asp.net mvc to asp.net core and when you've got a million lines of",
    "start": "622800",
    "end": "631040"
  },
  {
    "text": "code in an application that's a big problem because you can't just go we're not adding any",
    "start": "631040",
    "end": "637200"
  },
  {
    "text": "new features and we're not doing any support and we're not making any changes to this existing application until we have rewritten the whole thing",
    "start": "637200",
    "end": "643600"
  },
  {
    "text": "in asp.net core we don't know asp net core we've never used razer we don't know mvc we don't understand the pattern",
    "start": "643600",
    "end": "649440"
  },
  {
    "text": "we're going to have to stop we're going to have to learn that and then we're going to have to migrate a million lines of code",
    "start": "649440",
    "end": "654560"
  },
  {
    "text": "so come back in three years and we'll add your feature then not an option what you want is a way to",
    "start": "654560",
    "end": "660720"
  },
  {
    "text": "do it a page at a time a little bit at a time now i know of one solution to this and that",
    "start": "660720",
    "end": "668560"
  },
  {
    "text": "is a framework that is quite a lot like web forms it looks a lot like web forms",
    "start": "668560",
    "end": "675360"
  },
  {
    "text": "it's syntax it's aspx style pages are a lot like web forms but it's not",
    "start": "675360",
    "end": "680560"
  },
  {
    "text": "web forms it's a new open source framework that is completely different and this one does run on both net four",
    "start": "680560",
    "end": "688160"
  },
  {
    "text": "and dot net call 3.1 and net five and so you can add this into your",
    "start": "688160",
    "end": "695600"
  },
  {
    "text": "visual studio there's a visual studio extension and then you open your web forms project",
    "start": "695600",
    "end": "702320"
  },
  {
    "text": "and you add vvm to it and then you just start migrating pages",
    "start": "702320",
    "end": "707519"
  },
  {
    "text": "and you can do quite a lot of copying and pasting um into the new thing and so that that",
    "start": "707519",
    "end": "713279"
  },
  {
    "text": "actually works um apparently i don't really know uh exactly how it works i don't",
    "start": "713279",
    "end": "719760"
  },
  {
    "text": "know what the support situation is and you're kind of signing up for this new um",
    "start": "719760",
    "end": "727680"
  },
  {
    "text": "framework to build your web application on and it's not from microsoft and so you don't know whether it's going",
    "start": "727680",
    "end": "733120"
  },
  {
    "text": "to be supported and i don't know if they charge for it and all this sort of stuff so you know it's a possibility but it's not",
    "start": "733120",
    "end": "739360"
  },
  {
    "text": "a particularly um it's not the obvious solution it's not a kind of",
    "start": "739360",
    "end": "746880"
  },
  {
    "text": "yeah let's do that what could possibly go wrong and then i was just reading through my daily dose",
    "start": "746880",
    "end": "753360"
  },
  {
    "text": "of um of rss feed newsletter things and i saw a",
    "start": "753360",
    "end": "760959"
  },
  {
    "text": "blog post from somebody who's working on something and i happen to be working on a web",
    "start": "760959",
    "end": "766800"
  },
  {
    "text": "forms application at the moment and not enjoying it and those two things",
    "start": "766800",
    "end": "772079"
  },
  {
    "text": "came together in my head and i went hang on a minute i've got a great idea",
    "start": "772079",
    "end": "779120"
  },
  {
    "text": "um i didn't go hang on a minute lads because of the code of conduct i went hang on a minute",
    "start": "779120",
    "end": "785040"
  },
  {
    "text": "i've got a great idea and if you haven't seen the italian job you don't know what i'm talking about",
    "start": "785040",
    "end": "790480"
  },
  {
    "text": "and you should watch the italian job like just stop watching me and go and watch the italian job now trust me",
    "start": "790480",
    "end": "796480"
  },
  {
    "text": "um it's much better than listening to me waffle on i promise you okay um",
    "start": "796480",
    "end": "804160"
  },
  {
    "text": "a few people at home there i've got a whole sort of screen here dedicated to showing people who are in the room at",
    "start": "804160",
    "end": "811360"
  },
  {
    "text": "the moment um and if you can turn on your webcam",
    "start": "811360",
    "end": "816480"
  },
  {
    "text": "um it would be really appreciated it's really nice to be able to see people's faces and little lego engineers that they've",
    "start": "816480",
    "end": "823680"
  },
  {
    "text": "got in front of the webcam and stuff like that hey tom it's also really weird being able to see everybody's name",
    "start": "823680",
    "end": "829199"
  },
  {
    "text": "when you're doing a talk at ndc you've just got an audience you see your faces and yet you might know sort of people",
    "start": "829199",
    "end": "834560"
  },
  {
    "text": "and go hey um but yeah when you can actually see people's names",
    "start": "834560",
    "end": "839839"
  },
  {
    "text": "and you sort of go oh i used to work with you at um morgan stanley um i i didn't know you",
    "start": "839839",
    "end": "845839"
  },
  {
    "text": "were here that's awesome so yes um you know who you are",
    "start": "845839",
    "end": "850880"
  },
  {
    "text": "uh so yeah i had a great idea i thought what about if because the thing that i",
    "start": "850880",
    "end": "858079"
  },
  {
    "text": "found in my rss feeds was about something called yap and yarp stands for yet another reverse",
    "start": "858079",
    "end": "864320"
  },
  {
    "text": "proxy and it's a microsoft project to build a reverse proxy using",
    "start": "864320",
    "end": "872000"
  },
  {
    "text": "um",
    "start": "872000",
    "end": "874399"
  },
  {
    "text": "kestrel so you have a customizable codable reverse proxy using kestrel",
    "start": "878240",
    "end": "883519"
  },
  {
    "text": "and so i thought and it just sits in basically an asp.net core application and so i thought well what if i made an",
    "start": "883519",
    "end": "890399"
  },
  {
    "text": "asp.net core application that had mvc or razer pages or blazer or",
    "start": "890399",
    "end": "896560"
  },
  {
    "text": "whatever in it and it also had this reverse proxy in there and so if it got asked for a page it",
    "start": "896560",
    "end": "903600"
  },
  {
    "text": "didn't know about it would just proxy it on and then if i point the proxy",
    "start": "903600",
    "end": "909040"
  },
  {
    "text": "at the web forms application then it will just serve the web forms application completely normally",
    "start": "909040",
    "end": "915839"
  },
  {
    "text": "but if um i then in add a page to the mvc application",
    "start": "915839",
    "end": "923199"
  },
  {
    "text": "which matches the path that's being looked for then it'll serve it from asp.net core and then i could just i",
    "start": "923199",
    "end": "929120"
  },
  {
    "text": "could literally replace one page at a time so the thing that i was thinking of",
    "start": "929120",
    "end": "935279"
  },
  {
    "text": "using yap yet another reverse proxy supports dotnet core 3.1 and net 5.0 and it's currently",
    "start": "935279",
    "end": "943440"
  },
  {
    "text": "in preview um it's open source it's on github microsoft slash reverse proxy",
    "start": "943440",
    "end": "948560"
  },
  {
    "text": "it's on nougat and we're on preview versions of it at the moment but i'm expecting it to be sort of stable",
    "start": "948560",
    "end": "956240"
  },
  {
    "text": "and it certainly seems to work okay and so this is a great idea i've had a fantastic idea i have invented this",
    "start": "956240",
    "end": "963440"
  },
  {
    "text": "um i am a genius and then i found out that this is actually an established pattern",
    "start": "963440",
    "end": "970079"
  },
  {
    "text": "for doing this sort of thing um coined by martin fowler in 2004 it's called the",
    "start": "970079",
    "end": "975360"
  },
  {
    "text": "strangler fig pattern",
    "start": "975360",
    "end": "979440"
  },
  {
    "text": "it was originally called the strangler pattern has the same sort of origin and then",
    "start": "980880",
    "end": "986720"
  },
  {
    "text": "people pointed out that's a really nasty word why would you call something that please change it and so he changed it to",
    "start": "986720",
    "end": "992079"
  },
  {
    "text": "strangler fig and it comes from the a whole",
    "start": "992079",
    "end": "998880"
  },
  {
    "text": "breed of plants called um strangler figs or banyan trees and these things",
    "start": "998880",
    "end": "1005920"
  },
  {
    "text": "actually germinate they germinate in other trees and then they grow and they roots and",
    "start": "1005920",
    "end": "1011440"
  },
  {
    "text": "they go down and down until they take root and then they basically kill the tree",
    "start": "1011440",
    "end": "1016480"
  },
  {
    "text": "that they have um that they've grown on and and taken the nutrients from and all",
    "start": "1016480",
    "end": "1022160"
  },
  {
    "text": "this sort of stuff and so you end up with this new tree that's bigger than the old tree",
    "start": "1022160",
    "end": "1027600"
  },
  {
    "text": "and fresher and all this sort of stuff and the old tree just dies and i thought that's that's a really good",
    "start": "1027600",
    "end": "1032640"
  },
  {
    "text": "analogy for what i'm doing um and so i started messing about with this",
    "start": "1032640",
    "end": "1038000"
  },
  {
    "text": "and i've just i also started streaming and i thought this is a good opportunity i'm going to go on twitch and people can",
    "start": "1038000",
    "end": "1043360"
  },
  {
    "text": "just watch me and and laugh at me as i try and build this thing and so",
    "start": "1043360",
    "end": "1048400"
  },
  {
    "text": "and i'm still doing it and i'm still building it on twitch and so you can go there and watch me tuesdays and thursdays 7 pm uk",
    "start": "1048400",
    "end": "1055440"
  },
  {
    "text": "time yes that was a massive plug no i don't care shut up um so let's do a quick demo",
    "start": "1055440",
    "end": "1062720"
  },
  {
    "text": "um i went onto twitter and i said what's uh what the sample applications for um",
    "start": "1062720",
    "end": "1069360"
  },
  {
    "text": "asp.net web forms and somebody pointed me at this the wingtip toys application",
    "start": "1069360",
    "end": "1078480"
  },
  {
    "text": "um this is wing tip toys",
    "start": "1079440",
    "end": "1086320"
  },
  {
    "text": "you can tell it's web forms there you go so yeah and we've got cars and planes and trucks",
    "start": "1086720",
    "end": "1093200"
  },
  {
    "text": "and boats and rockets and all this sort of stuff and i thought okay i'm going to try and stick an asp.net",
    "start": "1093200",
    "end": "1099600"
  },
  {
    "text": "mvc application in front of that and so i'm going to show you roughly how this",
    "start": "1099600",
    "end": "1104799"
  },
  {
    "text": "went so i've got my solution here and i mean dotnet 5.0 dot new mvc minus so src",
    "start": "1104799",
    "end": "1112720"
  },
  {
    "text": "backslash demo dotnet sln add",
    "start": "1112720",
    "end": "1120240"
  },
  {
    "text": "src backslash demo and then we can ryder and open this up in here",
    "start": "1120240",
    "end": "1128159"
  },
  {
    "text": "so here is my completely empty boilerplate",
    "start": "1132720",
    "end": "1137840"
  },
  {
    "text": "asp.net mvc application which has got all this stuff in it",
    "start": "1137840",
    "end": "1144000"
  },
  {
    "text": "okay so to this i am going to add a new get package and i'm going to",
    "start": "1144000",
    "end": "1152080"
  },
  {
    "text": "have pre-release turned on and search for microsoft dot reverse proxy",
    "start": "1152080",
    "end": "1159520"
  },
  {
    "text": "and there it is a 1.0 preview eight two one six 82106.5.1 let's add that in",
    "start": "1159520",
    "end": "1166000"
  },
  {
    "text": "here",
    "start": "1166000",
    "end": "1168240"
  },
  {
    "text": "and then you need to add some configuration",
    "start": "1171520",
    "end": "1179520"
  },
  {
    "text": "to this i'm just going to open this one up which is my sort of crib sheet",
    "start": "1179520",
    "end": "1186879"
  },
  {
    "text": "so we go into appsettings.development.json and we're going to add in",
    "start": "1188000",
    "end": "1194480"
  },
  {
    "text": "this configuration here",
    "start": "1194480",
    "end": "1198160"
  },
  {
    "text": "so this basically says uh creator root route 1 cluster 1 catch all define a cluster and we're",
    "start": "1200480",
    "end": "1206720"
  },
  {
    "text": "going to get this to point at localhost 2401.9 which is our backend application",
    "start": "1206720",
    "end": "1215760"
  },
  {
    "text": "and then in startup i'm just going to say endpoints dot",
    "start": "1216720",
    "end": "1224559"
  },
  {
    "text": "map reverse proxy i'm going to leave that like that",
    "start": "1224559",
    "end": "1231520"
  },
  {
    "text": "and i think that is basically all of it um oh no we need",
    "start": "1232720",
    "end": "1240159"
  },
  {
    "text": "services so we do services dot add reverse proxy",
    "start": "1240159",
    "end": "1248080"
  },
  {
    "text": "dot load from config configuration dot get section",
    "start": "1248080",
    "end": "1254399"
  },
  {
    "text": "reverse proxy like so so now i've got my wingtip toys",
    "start": "1255039",
    "end": "1262240"
  },
  {
    "text": "application running now i'm going to run my asp.net core application",
    "start": "1262240",
    "end": "1267919"
  },
  {
    "text": "and it's going to boot up like this i'm going to go to here i'm going to go",
    "start": "1275520",
    "end": "1281679"
  },
  {
    "text": "to https localhost 5001. and there you go that is my asp.net core",
    "start": "1281679",
    "end": "1287280"
  },
  {
    "text": "application um which is pretending to be my wingtip toys application",
    "start": "1287280",
    "end": "1292480"
  },
  {
    "text": "except it's a little bit weird because i would expect this to have caught the index page because i",
    "start": "1292480",
    "end": "1299919"
  },
  {
    "text": "know my asp.net core application has an index page so why isn't it able to see it so a little bit of",
    "start": "1299919",
    "end": "1306320"
  },
  {
    "text": "experimentation with this and it turned out that to get it to work",
    "start": "1306320",
    "end": "1311360"
  },
  {
    "text": "properly you have to put explicit roots on every single endpoint in your asp.net",
    "start": "1311360",
    "end": "1319679"
  },
  {
    "text": "core application so if i now do this",
    "start": "1319679",
    "end": "1333840"
  },
  {
    "text": "and go back to here and do refresh you see i get my default page from my asp.net core",
    "start": "1334159",
    "end": "1341440"
  },
  {
    "text": "application so that's that's what we wanted there so now i need to figure out how to make",
    "start": "1341440",
    "end": "1348159"
  },
  {
    "text": "my asp.net core application look like my um so i need this",
    "start": "1348159",
    "end": "1353360"
  },
  {
    "text": "sort of bootstrap bar up at the top here now",
    "start": "1353360",
    "end": "1358320"
  },
  {
    "text": "if i were doing this properly if i were doing this um in a real situation",
    "start": "1358480",
    "end": "1366320"
  },
  {
    "text": "i would probably go to the trouble of trying to create a new bootstrap theme using bootstrap 5",
    "start": "1366320",
    "end": "1374640"
  },
  {
    "text": "that matched the old bootstrap theme but this is quick and dirty so i'm not",
    "start": "1374640",
    "end": "1380559"
  },
  {
    "text": "going to do that so i'm going to go into wingtip toys",
    "start": "1380559",
    "end": "1385840"
  },
  {
    "text": "and i'm going to actually you know what this is going to take too long i'm going to stop trying to write this",
    "start": "1386320",
    "end": "1393039"
  },
  {
    "text": "on the fly and i am instead terminate that process",
    "start": "1393039",
    "end": "1398960"
  },
  {
    "text": "and i'm just going to jump into my",
    "start": "1398960",
    "end": "1403840"
  },
  {
    "text": "project that i'm using for testing my thing at the moment and i'm going to run this",
    "start": "1408480",
    "end": "1417840"
  },
  {
    "text": "and this is now going to show up in here",
    "start": "1420640",
    "end": "1426240"
  },
  {
    "text": "so in the immortal words of blue peter presenters here's one i prepared earlier",
    "start": "1426480",
    "end": "1433039"
  },
  {
    "text": "um something went running at me so yes this is an",
    "start": "1434480",
    "end": "1441679"
  },
  {
    "text": "actual asp.net core application this is coming from the front end",
    "start": "1441679",
    "end": "1449200"
  },
  {
    "text": "the proxy application and you can tell because if i go to about",
    "start": "1449200",
    "end": "1456320"
  },
  {
    "text": "you can see it says wingtip toys and down here it says so this is the old thing which has",
    "start": "1456320",
    "end": "1461840"
  },
  {
    "text": "wingtip toys in the title bar and this is the new thing which has wingtip toys too",
    "start": "1461840",
    "end": "1468480"
  },
  {
    "text": "and also has this admin link here and all i basically did for this",
    "start": "1468480",
    "end": "1474159"
  },
  {
    "text": "was i copied um the stuff out of the site master",
    "start": "1474159",
    "end": "1480720"
  },
  {
    "text": "on the old website and you can actually see where i did it here i've brought some old asp things across",
    "start": "1480720",
    "end": "1488320"
  },
  {
    "text": "and i turned it into a new um",
    "start": "1488320",
    "end": "1493440"
  },
  {
    "text": "mvc sort of turned it and put it into the layout page and copied this the bootstrap files across and all this",
    "start": "1493840",
    "end": "1500240"
  },
  {
    "text": "sort of stuff and it essentially it worked except",
    "start": "1500240",
    "end": "1505440"
  },
  {
    "text": "with a couple of downsides which is what i want to talk",
    "start": "1505440",
    "end": "1511600"
  },
  {
    "text": "about for the rest of this talk because um",
    "start": "1511600",
    "end": "1518720"
  },
  {
    "text": "what's going on in an application is not just with um tracy island i know",
    "start": "1519520",
    "end": "1526480"
  },
  {
    "text": "i i the thing is i was too old for tracy island um somebody asked about tracy island in",
    "start": "1526480",
    "end": "1531840"
  },
  {
    "text": "the chat and uh if you are um a millennial or a zoomer",
    "start": "1531840",
    "end": "1537039"
  },
  {
    "text": "you will not know what we're talking about but um blue peter which was a children's program back in the day um there was a toy",
    "start": "1537039",
    "end": "1544880"
  },
  {
    "text": "released for christmas uh tracy island from the thunderbirds show and everybody wanted the toy and it sold out",
    "start": "1544880",
    "end": "1552320"
  },
  {
    "text": "everywhere and people were like completely cut up about it and blue peter which showed you how to make",
    "start": "1552320",
    "end": "1557760"
  },
  {
    "text": "things showed you over the course of about a month how to make your own tracy island",
    "start": "1557760",
    "end": "1563120"
  },
  {
    "text": "and it was epic it was huge and so everybody of my generation still remembers",
    "start": "1563120",
    "end": "1569919"
  },
  {
    "text": "blue peter and tracy island nice thing about doing conferences at",
    "start": "1569919",
    "end": "1575919"
  },
  {
    "text": "home is you can drink tea which you've made yourself",
    "start": "1575919",
    "end": "1580960"
  },
  {
    "text": "so yes integration there are things that are going on on the server side that you need to be",
    "start": "1581360",
    "end": "1588799"
  },
  {
    "text": "able to communicate between these two services and the first one of these is session so web forms applications",
    "start": "1588799",
    "end": "1598159"
  },
  {
    "text": "um certainly most of the ones i work on make an awful lot of use of session um",
    "start": "1598159",
    "end": "1605279"
  },
  {
    "text": "and you know i see web forms applications where they don't know about query parameters",
    "start": "1605279",
    "end": "1610400"
  },
  {
    "text": "and so the way that they pass query parameters from one page to another is that they put them into session and",
    "start": "1610400",
    "end": "1617279"
  },
  {
    "text": "then they redirect to the other page and then they pull them out of session again and",
    "start": "1617279",
    "end": "1625919"
  },
  {
    "text": "quite a lot of web forms applications actually use in process session because they just",
    "start": "1625919",
    "end": "1634159"
  },
  {
    "text": "they want to stick objects in there they've got lovely objects which they've defined which are",
    "start": "1634159",
    "end": "1640480"
  },
  {
    "text": "millions of miles deep and probably multiple megabytes on the heap and have self references circling all",
    "start": "1640480",
    "end": "1648720"
  },
  {
    "text": "over the place that you just have no hope of serializing which means you can't use out of process",
    "start": "1648720",
    "end": "1654080"
  },
  {
    "text": "session because there's no way of getting the object from there to there so they use in process session and they use sticky load balancing to",
    "start": "1654080",
    "end": "1661360"
  },
  {
    "text": "make sure that people always get directed to the same server or",
    "start": "1661360",
    "end": "1666880"
  },
  {
    "text": "in some cases they just run one server yes they really do",
    "start": "1666880",
    "end": "1673440"
  },
  {
    "text": "and so we need a way for the asp.net core app to be able to go to the",
    "start": "1674159",
    "end": "1680720"
  },
  {
    "text": "web forms app and say hey i need a value that you keep in session or",
    "start": "1680720",
    "end": "1686000"
  },
  {
    "text": "you know that value you keep in session you need to change it and so we need an api that goes",
    "start": "1686000",
    "end": "1692559"
  },
  {
    "text": "from the asp.net core app to the web forms app and so the first thing i did in my sort",
    "start": "1692559",
    "end": "1699120"
  },
  {
    "text": "of adventures in coding that i was doing on twitch",
    "start": "1699120",
    "end": "1704480"
  },
  {
    "text": "was i wrote a session sharer and it eventually made its way",
    "start": "1704480",
    "end": "1710799"
  },
  {
    "text": "into a library which i will tell you more about later on",
    "start": "1710799",
    "end": "1717200"
  },
  {
    "text": "but in this application here actually let's go to wingtip toys first",
    "start": "1717440",
    "end": "1723679"
  },
  {
    "text": "of all so in this application here we are using this package and we have a session api",
    "start": "1723679",
    "end": "1731600"
  },
  {
    "text": "handler so the easiest way to put end points into a web forms application",
    "start": "1731600",
    "end": "1739919"
  },
  {
    "text": "if you are just really set against using web forms or creating asmx",
    "start": "1739919",
    "end": "1746880"
  },
  {
    "text": "pages or whatever however people used to do services in web forms you just create an",
    "start": "1746880",
    "end": "1752880"
  },
  {
    "text": "http handler and plug it into the pipeline and then you can distribute that in a nuget package which is really nice",
    "start": "1752880",
    "end": "1759120"
  },
  {
    "text": "and so we create this api handler that gets the http context in and it",
    "start": "1759120",
    "end": "1765679"
  },
  {
    "text": "just goes do i have this value in session and if i don't um then or if you haven't specified a",
    "start": "1765679",
    "end": "1773279"
  },
  {
    "text": "key then we'll just return 400 and if i can't find it in session then i'm just going to return 404",
    "start": "1773279",
    "end": "1779679"
  },
  {
    "text": "otherwise we'll serialize it to bytes and we'll pass it back across the line",
    "start": "1779679",
    "end": "1785279"
  },
  {
    "text": "i remember what i said before about um objects that you can't serialize",
    "start": "1785279",
    "end": "1790480"
  },
  {
    "text": "people are going to have to fix that there's not a lot i can do about it but for the most part we sort",
    "start": "1790480",
    "end": "1796000"
  },
  {
    "text": "of go if it's a string then just doing coding dot get bytes so if it's one of these things we can use",
    "start": "1796000",
    "end": "1801960"
  },
  {
    "text": "bitconverter.getbytes um decimals and",
    "start": "1801960",
    "end": "1807279"
  },
  {
    "text": "dates and times are a bit more complicated but for those objects that people are",
    "start": "1807279",
    "end": "1813679"
  },
  {
    "text": "just going i just want to stick this in session and have it there um i thought about using binary converter",
    "start": "1813679",
    "end": "1821279"
  },
  {
    "text": "and then i looked and microsoft have binary converter exists in net",
    "start": "1821279",
    "end": "1829600"
  },
  {
    "text": "core i think they put it in in.net call 2.0 or 2.1",
    "start": "1829600",
    "end": "1834720"
  },
  {
    "text": "and there was much rejoicing because people wanted to use it but now they're kind of backing away",
    "start": "1834720",
    "end": "1840320"
  },
  {
    "text": "from it and going we really really hate binary converter there are all sorts of security issues with it",
    "start": "1840320",
    "end": "1846320"
  },
  {
    "text": "barry dorens gets very very upset um and so we're kind of deprecating it",
    "start": "1846320",
    "end": "1852640"
  },
  {
    "text": "we're basically we're not promising to support it for any length of time and so ah and then uh",
    "start": "1852640",
    "end": "1861039"
  },
  {
    "text": "what i actually use when i want to serialize things to bytes and pass them across things very quickly is message back message pack is a",
    "start": "1861039",
    "end": "1867760"
  },
  {
    "text": "lovely binary serialization format it's a bit like protobuf but it's much",
    "start": "1867760",
    "end": "1874399"
  },
  {
    "text": "easier to integrate to a net application because there's a brilliant message back library",
    "start": "1874399",
    "end": "1879519"
  },
  {
    "text": "that does it for you and it will serialize objects that it doesn't recognize it doesn't you",
    "start": "1879519",
    "end": "1885760"
  },
  {
    "text": "don't have to have a decorated object and so i've just gone hey let's just use message back so anything that we don't",
    "start": "1885760",
    "end": "1891679"
  },
  {
    "text": "know how to deal with we'll just use message pack and serialize that back across the wire and then on the",
    "start": "1891679",
    "end": "1898159"
  },
  {
    "text": "facade side we just have a cocoon session",
    "start": "1898159",
    "end": "1903440"
  },
  {
    "text": "and this we register with dependency injection not in here though",
    "start": "1903440",
    "end": "1911039"
  },
  {
    "text": "um and then in here we can just say hey um",
    "start": "1911039",
    "end": "1918000"
  },
  {
    "text": "we've got a cache we'll keep a local cache of the session um so we only have to get each",
    "start": "1918000",
    "end": "1923840"
  },
  {
    "text": "value once um but we'll do this get async otherwise we will talk to the",
    "start": "1923840",
    "end": "1930159"
  },
  {
    "text": "web app at the back end and we will go and get that session value out of there",
    "start": "1930159",
    "end": "1936720"
  },
  {
    "text": "um and so in this particular application um i just go to here",
    "start": "1936720",
    "end": "1944960"
  },
  {
    "text": "and if i go to rocket so this page is being served from the web forms application and i do",
    "start": "1944960",
    "end": "1952080"
  },
  {
    "text": "add to cart and that takes me to the cart page here and now",
    "start": "1952080",
    "end": "1957279"
  },
  {
    "text": "the cart is actually in the in a sql database that's being used by the backend application",
    "start": "1957279",
    "end": "1962320"
  },
  {
    "text": "but when i go to my home page here the key for that cart is stored in",
    "start": "1962320",
    "end": "1969120"
  },
  {
    "text": "session and so just to make this cart brackets one thing work in my asp.net",
    "start": "1969120",
    "end": "1976080"
  },
  {
    "text": "core mvc application it had to talk to the backend application and say what's the cart id",
    "start": "1976080",
    "end": "1982960"
  },
  {
    "text": "for the current session get that back and then i've just created a link to the database",
    "start": "1982960",
    "end": "1990159"
  },
  {
    "text": "and i am recreating what was entity framework in the web forms application",
    "start": "1990159",
    "end": "1998399"
  },
  {
    "text": "and i'm basically just copying the entity classes across so i've got cart item and category",
    "start": "1998399",
    "end": "2004320"
  },
  {
    "text": "and product but i've created a standard entity framework core 5.0",
    "start": "2004320",
    "end": "2010960"
  },
  {
    "text": "context just created these db sets for those classes and it just",
    "start": "2010960",
    "end": "2018399"
  },
  {
    "text": "worked i didn't have to do anything i didn't have to change anything on the",
    "start": "2018399",
    "end": "2026320"
  },
  {
    "text": "classes here i just left everything as it was i could even link to those classes",
    "start": "2026320",
    "end": "2031360"
  },
  {
    "text": "um rather than import them in but i thought no i don't want to do that so yes and then i created a tag helper",
    "start": "2031360",
    "end": "2038880"
  },
  {
    "text": "so um in wingtip toys in sight.master that cart link",
    "start": "2038880",
    "end": "2046000"
  },
  {
    "text": "is done we've got this cart count here i have no idea where that gets set from",
    "start": "2046000",
    "end": "2054799"
  },
  {
    "text": "but let's do a ctrl shift f",
    "start": "2055280",
    "end": "2060320"
  },
  {
    "text": "there we go we've got a pre-render and that creates a new shopping cart actions and gets the cart count",
    "start": "2067760",
    "end": "2074480"
  },
  {
    "text": "and then renders that in there so of course it does because this is asp.net web forms um",
    "start": "2074480",
    "end": "2081200"
  },
  {
    "text": "so yes that's how that does that whereas i have a cartlink tag helper",
    "start": "2081200",
    "end": "2086638"
  },
  {
    "text": "that basically says uh",
    "start": "2086639",
    "end": "2090720"
  },
  {
    "text": "in my layout code here i can just have a cart link see",
    "start": "2092000",
    "end": "2099520"
  },
  {
    "text": "razer asp.net call razer mvc tag helpers are epic so this cart link is a tag helper",
    "start": "2099520",
    "end": "2106079"
  },
  {
    "text": "that gets turned into an ae href equals and has the date the amount of",
    "start": "2106079",
    "end": "2114960"
  },
  {
    "text": "things you've got in your cart added to it and all this is done um so we have the shopping cart there",
    "start": "2114960",
    "end": "2123200"
  },
  {
    "text": "and the shopping cart is another thing that gets pulled in and you can see we've got cocoon session gets pulled in",
    "start": "2123200",
    "end": "2128480"
  },
  {
    "text": "here and db context gets pulled in here and that drags that across and then",
    "start": "2128480",
    "end": "2133839"
  },
  {
    "text": "returns the count back out considering it's having to do all that",
    "start": "2133839",
    "end": "2139440"
  },
  {
    "text": "it actually loads really quickly i'm quite impressed so that was authentication",
    "start": "2139440",
    "end": "2148640"
  },
  {
    "text": "that was um session rather so the next thing is authentication because",
    "start": "2150400",
    "end": "2157200"
  },
  {
    "text": "um logging in to the site at the back",
    "start": "2157200",
    "end": "2163680"
  },
  {
    "text": "um you want that person to be logged in with the same identifier on the site on",
    "start": "2163680",
    "end": "2169280"
  },
  {
    "text": "the front and so that was uh challenging and so for that i had to write uh",
    "start": "2169280",
    "end": "2177040"
  },
  {
    "text": "another section to this set of libraries and we have an",
    "start": "2177040",
    "end": "2184960"
  },
  {
    "text": "auth api handler um and this one just it gets the hcp context",
    "start": "2184960",
    "end": "2191520"
  },
  {
    "text": "and says if it's a claims principle then if it's not authenticated we'll just return 401",
    "start": "2191520",
    "end": "2198079"
  },
  {
    "text": "to say it's not authenticated otherwise we're going to serialize a claims",
    "start": "2198079",
    "end": "2203680"
  },
  {
    "text": "principle has anyone ever tried serializing a claims principle",
    "start": "2203680",
    "end": "2209359"
  },
  {
    "text": "in.net for shout out in the in the chat and tell people why it doesn't work um circular",
    "start": "2209359",
    "end": "2217520"
  },
  {
    "text": "references fundamentally there are many many circular references in a claims principle but i was not",
    "start": "2217520",
    "end": "2223599"
  },
  {
    "text": "deterred i will not be stopped from doing crazy things just because dotnet doesn't",
    "start": "2223599",
    "end": "2230720"
  },
  {
    "text": "want to play with me so turning back to message pack again",
    "start": "2230720",
    "end": "2235839"
  },
  {
    "text": "and this time i have control i know what the object i want to serialize is i know it won't serialize so i can",
    "start": "2235839",
    "end": "2242240"
  },
  {
    "text": "actually create proper message pack objects um with a list of identities and i can",
    "start": "2242240",
    "end": "2248560"
  },
  {
    "text": "convert between a claims principle and a message pack version of claims",
    "start": "2248560",
    "end": "2253920"
  },
  {
    "text": "principle and i can serialize that back across as well and i can also i can remember to call",
    "start": "2253920",
    "end": "2263200"
  },
  {
    "text": "context.response.flushandcontext.response.end every single time otherwise i lose two hours just going around in circles",
    "start": "2263960",
    "end": "2269599"
  },
  {
    "text": "trying to find out why things aren't working and then on the facade side this is",
    "start": "2269599",
    "end": "2275839"
  },
  {
    "text": "different from session this is um not just i need a value from the back",
    "start": "2275839",
    "end": "2281599"
  },
  {
    "text": "end this is actually a key part of the whole web application",
    "start": "2281599",
    "end": "2286640"
  },
  {
    "text": "experience and so i need to get this integrated properly and so i had to create my own",
    "start": "2286640",
    "end": "2295040"
  },
  {
    "text": "authentication handler for asp.net core",
    "start": "2295040",
    "end": "2302400"
  },
  {
    "text": "and so we have a cocoon authentication handler here which derives from authentication",
    "start": "2302400",
    "end": "2308800"
  },
  {
    "text": "handler which is built into asp.net core so this is authentication handler is the same place",
    "start": "2308800",
    "end": "2314240"
  },
  {
    "text": "that cookie authentication handler and basic authentication handler all of those derive from this",
    "start": "2314240",
    "end": "2320160"
  },
  {
    "text": "so actually quite a lot of the work is already done for you and so we have um",
    "start": "2320160",
    "end": "2327599"
  },
  {
    "text": "a uh we have to override handle authenticate async and we have to override handle challenge",
    "start": "2327599",
    "end": "2334720"
  },
  {
    "text": "async and this uses configuration to say where it's going to send you to if",
    "start": "2334720",
    "end": "2340800"
  },
  {
    "text": "there's a login url and set the return url and all this sort of stuff but this",
    "start": "2340800",
    "end": "2346320"
  },
  {
    "text": "authenticate async",
    "start": "2346320",
    "end": "2349680"
  },
  {
    "text": "has an http client injected into it and it goes off and it passes over the",
    "start": "2352160",
    "end": "2357839"
  },
  {
    "text": "key thing with all of this is we have to pass over the cookies",
    "start": "2357839",
    "end": "2363040"
  },
  {
    "text": "um and we pass over all the cookies because session comes from a cookie and i know what it's called but i worry",
    "start": "2363040",
    "end": "2370320"
  },
  {
    "text": "that you can change it and people might have changed it so i just send all the cookies for",
    "start": "2370320",
    "end": "2376079"
  },
  {
    "text": "authorization i send all cookies and also the authorization header if it's got one and then i'm basically going to to the",
    "start": "2376079",
    "end": "2382880"
  },
  {
    "text": "back end application going hey run your authentication and then tell me what happens and then",
    "start": "2382880",
    "end": "2388640"
  },
  {
    "text": "if we get that back here um we can say",
    "start": "2388640",
    "end": "2394480"
  },
  {
    "text": "uh deserialize that principle into an actual claims principle and then",
    "start": "2394839",
    "end": "2400079"
  },
  {
    "text": "we can create an authentication ticket and then that sets the user property on the http context for the rest of this",
    "start": "2400079",
    "end": "2406400"
  },
  {
    "text": "request to a claims principle that has all the same claims roles all that sort of stuff as it did on the",
    "start": "2406400",
    "end": "2413520"
  },
  {
    "text": "back end now one thing this won't handle at the moment is windows authentication",
    "start": "2413520",
    "end": "2419359"
  },
  {
    "text": "um it does not like serializing windows identities because they're even",
    "start": "2419359",
    "end": "2424880"
  },
  {
    "text": "worse than just normal claims identities and there are two",
    "start": "2424880",
    "end": "2429920"
  },
  {
    "text": "aspects to this one is this is all going to be on an open",
    "start": "2429920",
    "end": "2435599"
  },
  {
    "text": "source project and if somebody really needs it then they can submit it and go if it's a",
    "start": "2435599",
    "end": "2440800"
  },
  {
    "text": "windows identity then then do it like this two is stop using windows authentication",
    "start": "2440800",
    "end": "2447520"
  },
  {
    "text": "seriously just just stop stop doing it it's it doesn't work anymore",
    "start": "2447520",
    "end": "2453280"
  },
  {
    "text": "uh things windows authentication doesn't work properly with linux for a start mac that doesn't work",
    "start": "2453280",
    "end": "2460640"
  },
  {
    "text": "there we've got kerberos um which is just people trying to disguise the fact that this is a proprietary authentication",
    "start": "2460640",
    "end": "2467280"
  },
  {
    "text": "protocol by giving it an open name and blaming mit",
    "start": "2467280",
    "end": "2472560"
  },
  {
    "text": "but more important than that windows authentication doesn't work with http 2.",
    "start": "2474079",
    "end": "2480560"
  },
  {
    "text": "it just doesn't there's something about http 2 that's you they cannot make windows authentication work over http 2",
    "start": "2480560",
    "end": "2487520"
  },
  {
    "text": "and you want to be moving everything to http 2. actually you want to be moving everything to http 3 sometime this year because that's",
    "start": "2487520",
    "end": "2495280"
  },
  {
    "text": "already supported in some browsers and cloudflare and other places so yes if you're using windows",
    "start": "2495280",
    "end": "2501760"
  },
  {
    "text": "authentication stand up an active directory federation server and start using it to get tokens",
    "start": "2501760",
    "end": "2507760"
  },
  {
    "text": "and then use those tokens to authenticate your web services or grpc services and everything else that is the way to",
    "start": "2507760",
    "end": "2513599"
  },
  {
    "text": "go so yes anyway so i've i've authenticated",
    "start": "2513599",
    "end": "2518720"
  },
  {
    "text": "people in my uh front-end application as well as in my back-end application so",
    "start": "2518720",
    "end": "2524960"
  },
  {
    "text": "if i go here and i log in i'm going to log it no go away",
    "start": "2524960",
    "end": "2531760"
  },
  {
    "text": "admin and p a dollar dollar word don't blame me that's the password it",
    "start": "2531760",
    "end": "2539040"
  },
  {
    "text": "came with out of the git repository and we log in here and you can see that",
    "start": "2539040",
    "end": "2544800"
  },
  {
    "text": "over here we've got hello admin and logout and we've switched to a different cart",
    "start": "2544800",
    "end": "2550960"
  },
  {
    "text": "now because i'm logged in i've got three items in my cart from the last time i logged in so look there we go shopping cart's not",
    "start": "2550960",
    "end": "2557599"
  },
  {
    "text": "found though so not everything is working beautifully i need to fix that but if i get that tilde out of there",
    "start": "2557599",
    "end": "2565920"
  },
  {
    "text": "then that works um and if i go to admin i can get to the admin page because i am",
    "start": "2565920",
    "end": "2571920"
  },
  {
    "text": "logged in and this is under wingtip toys too if i go to admin",
    "start": "2571920",
    "end": "2577520"
  },
  {
    "text": "uh let me log in here and do admin",
    "start": "2577520",
    "end": "2582560"
  },
  {
    "text": "and p word i can have both of these at the same",
    "start": "2582560",
    "end": "2588240"
  },
  {
    "text": "time because the cookies some of the cookies are being set for two four oh one nine and",
    "start": "2588240",
    "end": "2593839"
  },
  {
    "text": "the cookies that are set for five zero zero one are completely separate cookies so if i go into admin here",
    "start": "2593839",
    "end": "2599839"
  },
  {
    "text": "you can see this was the product admin page in this web forms application and",
    "start": "2599839",
    "end": "2607280"
  },
  {
    "text": "it's just it's really really web forms you can tell that it's where you can tell that this was made by somebody who thought",
    "start": "2607280",
    "end": "2613359"
  },
  {
    "text": "they were writing a windows forms application and so to",
    "start": "2613359",
    "end": "2618480"
  },
  {
    "text": "illustrate why sort of doing these things is a good idea i've made a lovely shiny bootstrappy um",
    "start": "2618480",
    "end": "2626960"
  },
  {
    "text": "admin page so this overrides this page here and adds all sorts of goodness into it",
    "start": "2626960",
    "end": "2633119"
  },
  {
    "text": "and does that do it yes this sentence does do something and so i can i can add pages there and i need a cancel button",
    "start": "2633119",
    "end": "2639040"
  },
  {
    "text": "and all this sort of stuff so yeah but that admin page um in my",
    "start": "2639040",
    "end": "2646640"
  },
  {
    "text": "proxy application let me just go to here and go to controllers and go to my admin",
    "start": "2647359",
    "end": "2653760"
  },
  {
    "text": "controller and you can see i do actually have the authorize attribute on there so this is being authorized using",
    "start": "2653760",
    "end": "2661599"
  },
  {
    "text": "the authentication that was done by the back end using whatever the back end is and so",
    "start": "2661599",
    "end": "2668240"
  },
  {
    "text": "now we have authentication being handled as well now i may have forgotten",
    "start": "2668240",
    "end": "2676000"
  },
  {
    "text": "something but i think that's pretty much it um",
    "start": "2676000",
    "end": "2683280"
  },
  {
    "text": "and i can't think of anything else if anyone can think of anything else just shout me in the chat or hit me up",
    "start": "2683280",
    "end": "2689760"
  },
  {
    "text": "on twitter or what about data protection well theoretically data protection",
    "start": "2689760",
    "end": "2695839"
  },
  {
    "text": "um because you're relying on the web forms application and saying um you stole this",
    "start": "2695839",
    "end": "2704560"
  },
  {
    "text": "you just all you put this in session you do all that side of things",
    "start": "2704560",
    "end": "2709839"
  },
  {
    "text": "um it should just be transparent so because this is so let's say",
    "start": "2709839",
    "end": "2716560"
  },
  {
    "text": "we the back end servers using sql server for session storage um and so it",
    "start": "2716560",
    "end": "2722160"
  },
  {
    "text": "encrypts things that are going into sql server using its own data protection key and so if i just went write another",
    "start": "2722160",
    "end": "2728960"
  },
  {
    "text": "session provider for asp.net core that talks to that same sql server thing",
    "start": "2728960",
    "end": "2735040"
  },
  {
    "text": "i would have to find some way to share keys between the front-end application and",
    "start": "2735040",
    "end": "2741040"
  },
  {
    "text": "the back-end application but most of the stuff that's in",
    "start": "2741040",
    "end": "2746800"
  },
  {
    "text": "because we're just going to the back and going give me this value out of selection um we i don't think we have to worry",
    "start": "2747119",
    "end": "2753599"
  },
  {
    "text": "about it i think it's probably okay um talk to me offline and and explain",
    "start": "2753599",
    "end": "2760000"
  },
  {
    "text": "why i'm wrong um you know you want to we'll have beers um",
    "start": "2760000",
    "end": "2765920"
  },
  {
    "text": "but yes so i think this this covers most of it um and the only",
    "start": "2766640",
    "end": "2774000"
  },
  {
    "text": "other issue that i did run into was when uh",
    "start": "2774000",
    "end": "2780560"
  },
  {
    "text": "the back end did a redirect so if you try to access",
    "start": "2780560",
    "end": "2785839"
  },
  {
    "text": "a controlled page and it did a redirect to the login page um",
    "start": "2785839",
    "end": "2792640"
  },
  {
    "text": "for some reason it used the fully qualified so used an absolute url and so you may find yourself browsing",
    "start": "2792640",
    "end": "2799839"
  },
  {
    "text": "http localhost 2401 and i could not figure out how to get",
    "start": "2799839",
    "end": "2805359"
  },
  {
    "text": "the back end to stop doing that because it's buried somewhere in the depths of its login system and so",
    "start": "2805359",
    "end": "2813200"
  },
  {
    "text": "what i ended up having to do was write a custom wrapper around",
    "start": "2813200",
    "end": "2819359"
  },
  {
    "text": "microsoft's reverse proxy it's not particularly custom",
    "start": "2819359",
    "end": "2825838"
  },
  {
    "text": "but this is and the code to do this is on the microsoft reverse proxy github repo so",
    "start": "2826240",
    "end": "2833760"
  },
  {
    "text": "they know that you want to do it but this",
    "start": "2833760",
    "end": "2841359"
  },
  {
    "text": "does exactly the same stuff as map reverse proxy does except it adds in a transformer",
    "start": "2841920",
    "end": "2848720"
  },
  {
    "text": "and a transformer is just something where uh when the proxy gets the response",
    "start": "2848720",
    "end": "2855359"
  },
  {
    "text": "before it sends it further sends it back out to the client it goes here's the response we",
    "start": "2855359",
    "end": "2862480"
  },
  {
    "text": "got do things with it and then we can carry on and so i just put this transformer in",
    "start": "2862480",
    "end": "2868240"
  },
  {
    "text": "there to say does the response have a location if the location",
    "start": "2868240",
    "end": "2873280"
  },
  {
    "text": "is an absolute uri and it starts with our destination prefix",
    "start": "2873280",
    "end": "2878720"
  },
  {
    "text": "which we've got from our proxy then just turn it into a relative uri instead and so that stopped that from",
    "start": "2878720",
    "end": "2884839"
  },
  {
    "text": "happening now all of this niceness",
    "start": "2884839",
    "end": "2891440"
  },
  {
    "text": "all of this hacking around and mapping things to",
    "start": "2891440",
    "end": "2896720"
  },
  {
    "text": "bites and sharing things between the new app and the old app once i got it",
    "start": "2896720",
    "end": "2902720"
  },
  {
    "text": "working and and i figured out that it was actually viable and i thought it would be something that people could actually use",
    "start": "2902720",
    "end": "2910160"
  },
  {
    "text": "um i wrapped it up into a new get a couple of new get packages",
    "start": "2910160",
    "end": "2917599"
  },
  {
    "text": "and i actually asked people to help me name it on twitter because i'm terrible at naming things if",
    "start": "2917599",
    "end": "2923599"
  },
  {
    "text": "i named it it would be called randomizer and that wouldn't work and someone suggested",
    "start": "2923599",
    "end": "2930559"
  },
  {
    "text": "strangler i was like no people don't want to use things that are called strangler",
    "start": "2930559",
    "end": "2937838"
  },
  {
    "text": "i don't know martin talk to me afterwards um but i thought cocoon",
    "start": "2940960",
    "end": "2948240"
  },
  {
    "text": "cocoon is a nice thing that wraps itself around something that's usually quite fugly actually um the",
    "start": "2948240",
    "end": "2956079"
  },
  {
    "text": "things that go into cocoons tend not to be very pretty i'm just saying nothing against",
    "start": "2956079",
    "end": "2962160"
  },
  {
    "text": "caterpillars but yeah and then the things that come out of cocoons",
    "start": "2962160",
    "end": "2967280"
  },
  {
    "text": "six months later or however long that takes beautiful flappy things that flit around the place",
    "start": "2967280",
    "end": "2974480"
  },
  {
    "text": "and do lovely things and also moths which are just stupid and just fly at what did moths fly at",
    "start": "2974480",
    "end": "2982480"
  },
  {
    "text": "before light bulbs were invented inquiring minds need to know so anyway",
    "start": "2982480",
    "end": "2989680"
  },
  {
    "text": "this is now what i'm doing on my twitch stream is i'm i'm kind of writing cocoon and and building it and stuff and",
    "start": "2989680",
    "end": "2997359"
  },
  {
    "text": "i'm doing it it's sort of related to what i've been doing with things like uh",
    "start": "2997359",
    "end": "3002880"
  },
  {
    "text": "gr converting wcf to grpc uh with the commercial product that i work on which is visual recode",
    "start": "3002880",
    "end": "3009760"
  },
  {
    "text": "um but visual recode is uh it doesn't have any runtime stuff it",
    "start": "3009760",
    "end": "3015839"
  },
  {
    "text": "just changes your code and so i didn't want to kind of mix the two things up um this is components this is stuff that",
    "start": "3015839",
    "end": "3023680"
  },
  {
    "text": "you're actually expecting to pick up and put into your application and put into your runtime and so i wanted this to be open source",
    "start": "3023680",
    "end": "3030079"
  },
  {
    "text": "and so it is and it's on github under the visual recode organization at cocoon",
    "start": "3030079",
    "end": "3035359"
  },
  {
    "text": "it's apache 2.0 which is i think the right license for it",
    "start": "3035359",
    "end": "3042160"
  },
  {
    "text": "if someone tells me i'm wrong and it should be mit then they can talk to me um but it is open",
    "start": "3042160",
    "end": "3048000"
  },
  {
    "text": "source it's on there preview packages have started to go up onto nougat although honestly i i wouldn't start",
    "start": "3048000",
    "end": "3054559"
  },
  {
    "text": "trying to use it just yet um i'm going to try and stand it up in front of a couple of",
    "start": "3054559",
    "end": "3060800"
  },
  {
    "text": "gnarly web forms applications that i've been working on and seeing if i can get it to work there and at that point i will sort of mark it",
    "start": "3060800",
    "end": "3067440"
  },
  {
    "text": "as beta and say if it works for this it may very well work for whatever it is",
    "start": "3067440",
    "end": "3072720"
  },
  {
    "text": "you're doing um so the other sort of question",
    "start": "3072720",
    "end": "3077839"
  },
  {
    "text": "that comes up about this is you can we i have established that you",
    "start": "3077839",
    "end": "3084480"
  },
  {
    "text": "can replace um web forms with mvc views from an asp.net core mvc",
    "start": "3084480",
    "end": "3091599"
  },
  {
    "text": "application i have checked um and it is also possible to do it with razer pages",
    "start": "3091599",
    "end": "3099599"
  },
  {
    "text": "if you put razor pages into your pipeline before the proxy it will find those as well um and i asked today on twitter",
    "start": "3099599",
    "end": "3107680"
  },
  {
    "text": "um whether you could mix blazer into a normal asp.net application or",
    "start": "3107680",
    "end": "3114160"
  },
  {
    "text": "because i wasn't sure i thought maybe blazer was purely a single page a spa kind of thing and once you're in blazer",
    "start": "3114160",
    "end": "3120960"
  },
  {
    "text": "you stay in blazer but it turns out that you can make blazer components and then just host them",
    "start": "3120960",
    "end": "3126079"
  },
  {
    "text": "in regular uh razer pages just using the component tag helper and so if you wanted to rewrite your web",
    "start": "3126079",
    "end": "3132800"
  },
  {
    "text": "forms application into blazer then you could do that as well and you can use blazer server",
    "start": "3132800",
    "end": "3139520"
  },
  {
    "text": "side or blazer web assembly and so pretty much any pattern you could want to use and obviously",
    "start": "3139520",
    "end": "3146559"
  },
  {
    "text": "you can also create uh mvc pages or razor pages that use something like",
    "start": "3146559",
    "end": "3152960"
  },
  {
    "text": "spelt or view.js or react and as long as it's not like a single",
    "start": "3152960",
    "end": "3160079"
  },
  {
    "text": "page a spa you should be okay and once you've got it all migrated across if you want to turn it into a spa",
    "start": "3160079",
    "end": "3166079"
  },
  {
    "text": "then you can but the docs for that",
    "start": "3166079",
    "end": "3173839"
  },
  {
    "text": "where are they let me just grab them for you because that's quite a long link",
    "start": "3173839",
    "end": "3181440"
  },
  {
    "text": "i'm going to put the link to the blazer bit in the chat there there you go",
    "start": "3181440",
    "end": "3188720"
  },
  {
    "text": "so yes um that is essentially all i had to show you and um i hope that",
    "start": "3192240",
    "end": "3200160"
  },
  {
    "text": "it looks like something that people might go oh you know what i i could potentially see us doing that",
    "start": "3200160",
    "end": "3206960"
  },
  {
    "text": "because the first step of just creating the reverse proxy and spinning",
    "start": "3206960",
    "end": "3213040"
  },
  {
    "text": "it up and you can have your reverse proxy running on on a linux instance or you can just",
    "start": "3213040",
    "end": "3218640"
  },
  {
    "text": "run it in the same iis that the ht the web forms application is running in um",
    "start": "3218640",
    "end": "3223839"
  },
  {
    "text": "but yeah that first step is essentially zero risk um you're just kind of going i now have",
    "start": "3223839",
    "end": "3230079"
  },
  {
    "text": "a reverse proxy in front of my application and and everything should just continue",
    "start": "3230079",
    "end": "3235280"
  },
  {
    "text": "to work um and then you can just go well maybe i'll just read with the privacy page or",
    "start": "3235280",
    "end": "3240559"
  },
  {
    "text": "i'll just redo the amount we've got we've got these static pages maybe i'll just redo those and just ease into it gradually and then",
    "start": "3240559",
    "end": "3247920"
  },
  {
    "text": "you know do do the admin pages for your website um because people are more forgiving",
    "start": "3247920",
    "end": "3255200"
  },
  {
    "text": "uh if something goes wrong in the admin pages and it's not customer facing and gradually build up to the point",
    "start": "3255200",
    "end": "3260720"
  },
  {
    "text": "where you're kind of going yes we can now replace the home page with our new asp.net core",
    "start": "3260720",
    "end": "3268480"
  },
  {
    "text": "mvc razer rendered view page and do all that sort of thing i will",
    "start": "3268480",
    "end": "3274960"
  },
  {
    "text": "stick that in the slack as well where is the slack i've lost the slack",
    "start": "3274960",
    "end": "3282960"
  },
  {
    "text": "i know it's over here somewhere hello slack there we go uh what track are we i don't know what",
    "start": "3284480",
    "end": "3291119"
  },
  {
    "text": "track i'm in track four there we go",
    "start": "3291119",
    "end": "3296559"
  },
  {
    "text": "so yes there's the link in the slack as well and once i'm done i will also put all",
    "start": "3302559",
    "end": "3309599"
  },
  {
    "text": "the links to all the things into the slack",
    "start": "3309599",
    "end": "3314640"
  },
  {
    "text": "for people to pick up from there so in summary the idea is to use microsoft reverse",
    "start": "3314640",
    "end": "3321119"
  },
  {
    "text": "proxy stick it in front of a web forms application and intercept some of the page requests",
    "start": "3321119",
    "end": "3326319"
  },
  {
    "text": "uh to do this you have to deal with session and authentication and a couple of other sort of issues",
    "start": "3326319",
    "end": "3333040"
  },
  {
    "text": "that are specific to doing this oh track five",
    "start": "3333040",
    "end": "3338240"
  },
  {
    "text": "let's put it in track five then there we go yeah that looks more like it with your cookie monster gif well done",
    "start": "3340160",
    "end": "3346839"
  },
  {
    "text": "um track four is proxy of track five now nice um",
    "start": "3346839",
    "end": "3352640"
  },
  {
    "text": "so yeah to do this i am creating cocoon to handle things like session and authentication and all this sort of",
    "start": "3352640",
    "end": "3357680"
  },
  {
    "text": "stuff also you can follow me on twitter uh twitter.com and you can come and watch me work on",
    "start": "3357680",
    "end": "3364319"
  },
  {
    "text": "cocoon and talk nonsense pretty much like i have for the last hour",
    "start": "3364319",
    "end": "3369680"
  },
  {
    "text": "but live and improvised and um and generally even more tired uh on",
    "start": "3369680",
    "end": "3376000"
  },
  {
    "text": "my twitch stream at twitch.tv.markfrindle um i will be around in the",
    "start": "3376000",
    "end": "3382160"
  },
  {
    "text": "i'll stay in the track room for 10 minutes to answer questions if anybody has them",
    "start": "3382160",
    "end": "3388240"
  },
  {
    "text": "or you can ping me at twitter and ask me on there as well uh thank you so much for coming to this",
    "start": "3388240",
    "end": "3393599"
  },
  {
    "text": "talk i really hope it was very helpful and i really really really hope i will see you",
    "start": "3393599",
    "end": "3399440"
  },
  {
    "text": "in person at some time soon maybe next year um uh or maybe before that",
    "start": "3399440",
    "end": "3406960"
  },
  {
    "text": "take care of yourselves and i will hopefully see you with the quiz tonight as well me and dylan doing a quiz eight o'clock",
    "start": "3406960",
    "end": "3413280"
  },
  {
    "text": "be there or don't cheers bye",
    "start": "3413280",
    "end": "3419839"
  }
]