[
  {
    "text": "good morning folks yes that's on very definitely on okay uh welcome was the",
    "start": "9200",
    "end": "15480"
  },
  {
    "text": "party good last night good I went to see um Aladdin which was fantastic um I know",
    "start": "15480",
    "end": "22199"
  },
  {
    "text": "Scott Hanselman went to see it as well I didn't see him there but uh hopefully he had a good time as well um before I get",
    "start": "22199",
    "end": "28560"
  },
  {
    "text": "into my talk just to notice I'm sad again uh I go to conferences and I get",
    "start": "28560",
    "end": "34160"
  },
  {
    "text": "very sad when I look at the uh gender diversity or lack of it um in conference",
    "start": "34160",
    "end": "40079"
  },
  {
    "text": "Halls can I just remind everyone it's our problem to fix okay we should not be",
    "start": "40079",
    "end": "46160"
  },
  {
    "text": "asking women and other underrepresented people to fix the problem themselves and go out and be women in Tech at",
    "start": "46160",
    "end": "53120"
  },
  {
    "text": "conferences strangely enough the women in Tech want to do the tech stuff as well right rant over",
    "start": "53120",
    "end": "61920"
  },
  {
    "text": "okay so uh today is the first time I've presented this talk and it's the first",
    "start": "62239",
    "end": "68040"
  },
  {
    "text": "time I have um talked since taking on a new project at work um and this is",
    "start": "68040",
    "end": "74960"
  },
  {
    "text": "basically the new project this is partly you I'm sure my",
    "start": "74960",
    "end": "81280"
  },
  {
    "text": "manager or my product manager at least um would like me to be showing off how easy it now is to uh connect to Google",
    "start": "81280",
    "end": "88920"
  },
  {
    "text": "Cloud platform Services uh with C that is a small aspect of today's talk and I",
    "start": "88920",
    "end": "96759"
  },
  {
    "text": "hope you do go away and if you hadn't thought of looking at Google Cloud platform which I will call gcp after",
    "start": "96759",
    "end": "103159"
  },
  {
    "text": "this because it's much simpler um if you hadn't looked at gcp before have a look",
    "start": "103159",
    "end": "108280"
  },
  {
    "text": "try the beater of uh the code that I'll be showing today please give us feedback but that's not really the point okay the",
    "start": "108280",
    "end": "115399"
  },
  {
    "text": "the point is I've been writing C professionally for a bit hrah",
    "start": "115399",
    "end": "120840"
  },
  {
    "text": "um and the context in which I'm writing code uh is fairly interesting in itself",
    "start": "120840",
    "end": "128440"
  },
  {
    "text": "and we've been having to make various design decisions um which have not been easy wouldn't it be lovely if",
    "start": "128440",
    "end": "135400"
  },
  {
    "text": "programming involved think think think get the right answer move on to next problem um it's clearly not that way",
    "start": "135400",
    "end": "143080"
  },
  {
    "text": "there are tradeoffs all through uh we'll be looking at some of those trade-offs",
    "start": "143080",
    "end": "148760"
  },
  {
    "text": "um and basically I want you to think about how the same trade-offs may be relevant in your projects um think about",
    "start": "148760",
    "end": "156519"
  },
  {
    "text": "where you don't have to think about these decisions because you're in a simpler situation or maybe you have to",
    "start": "156519",
    "end": "162040"
  },
  {
    "text": "think about the same decisions but with completely different inputs um and if",
    "start": "162040",
    "end": "168480"
  },
  {
    "text": "you've got different inputs if you've got different stakeholders then don't expect the same output so this is in no",
    "start": "168480",
    "end": "175239"
  },
  {
    "text": "way meant to be a guide for how to do things if you go away away and take all",
    "start": "175239",
    "end": "181040"
  },
  {
    "text": "of our decision points and apply them in your own projects um that would be a bad thing if you go away and think about um",
    "start": "181040",
    "end": "188879"
  },
  {
    "text": "all the design decisions we've made and how you might make them the same way or might make them differently that's",
    "start": "188879",
    "end": "195720"
  },
  {
    "text": "good so a little bit about me um You",
    "start": "195879",
    "end": "201239"
  },
  {
    "text": "probably how many of you use stack Overflow yeah right uh so you probably know me from that other community things",
    "start": "201239",
    "end": "208720"
  },
  {
    "text": "uh you know blogging writing book um I'm also a an armchair language designer um",
    "start": "208720",
    "end": "215400"
  },
  {
    "text": "I'm fortunate enough to be the convenor of the ecma standardization committee for um for C which means I get to hang",
    "start": "215400",
    "end": "223120"
  },
  {
    "text": "out with uh experts on C and the C language designers um which is great",
    "start": "223120",
    "end": "230000"
  },
  {
    "text": "fun but I'm not really a language designer I can sort ofit nitpick holes in what other people have done um now",
    "start": "230000",
    "end": "237000"
  },
  {
    "text": "I've been in Google for eight years and out of that eight years I've been working in Java mostly for seven of them",
    "start": "237000",
    "end": "245519"
  },
  {
    "text": "but I've still been going to conferences and speaking about C and I've normally had to say uh I am not speaking on",
    "start": "245519",
    "end": "252560"
  },
  {
    "text": "behalf of Google so please anything I say uh that's stupid assume that's just me and not Google um the L latter bit is",
    "start": "252560",
    "end": "261359"
  },
  {
    "text": "still true so when I say stupid things because it's bound to happen um assume that's me not Google but I am sort of",
    "start": "261359",
    "end": "267680"
  },
  {
    "text": "speaking on behalf of Google uh today because I get to talk about my work for the last year I have been uh on a team",
    "start": "267680",
    "end": "276720"
  },
  {
    "text": "within Google whose basic mission is to make gcp uh better for net developers in",
    "start": "276720",
    "end": "283199"
  },
  {
    "text": "all kinds of different ways um I happen to be working mostly in the client Library side of things and my mission my",
    "start": "283199",
    "end": "292000"
  },
  {
    "text": "personal mission stated sort of informally is if you're a c developer",
    "start": "292000",
    "end": "297600"
  },
  {
    "text": "looking for a cloud to build an app appliation on then I want to make gcp the most obvious Natural Choice because",
    "start": "297600",
    "end": "305400"
  },
  {
    "text": "that's where you will succeed best because we provide great C support and the services we support we provide",
    "start": "305400",
    "end": "311759"
  },
  {
    "text": "support for are fantastic as well from the opposite point of view if",
    "start": "311759",
    "end": "317280"
  },
  {
    "text": "you're a gcp developer you know if you know that you want to be running on gcp",
    "start": "317280",
    "end": "322560"
  },
  {
    "text": "in one of the various flavors um and you're thinking which language should I use to code then I want to make it that",
    "start": "322560",
    "end": "328360"
  },
  {
    "text": "c is the obvious choice because we all know it's a fabulous language and when it's properly supported and you know",
    "start": "328360",
    "end": "335880"
  },
  {
    "text": "deployment a dole and debugging Works end to end and it's all lovely um that should just be the obvious choice for",
    "start": "335880",
    "end": "343800"
  },
  {
    "text": "everyone so all of that can be summed up as I want to make gcp rock for C developers that is my",
    "start": "343800",
    "end": "352319"
  },
  {
    "text": "mission now to take a little bit of a step back um I will try to use",
    "start": "353240",
    "end": "358919"
  },
  {
    "text": "terminology consistently in this talk when I say",
    "start": "358919",
    "end": "365800"
  },
  {
    "text": "API I mean a cloud service so something",
    "start": "365800",
    "end": "370880"
  },
  {
    "text": "that you talk to such as Google Cloud Storage or data store or stack driver",
    "start": "370880",
    "end": "376479"
  },
  {
    "text": "logging something like that so that's the API which can be accessed from",
    "start": "376479",
    "end": "382520"
  },
  {
    "text": "various different uh platforms languages Etc when I talk about a class Library",
    "start": "382520",
    "end": "390440"
  },
  {
    "text": "that's your know a specific usually C for this talk um code that is running on",
    "start": "390440",
    "end": "396199"
  },
  {
    "text": "your machine that will talk to the service sort of via the",
    "start": "396199",
    "end": "401240"
  },
  {
    "text": "API the only uh Cav to that is when I talk about API reference",
    "start": "401240",
    "end": "406800"
  },
  {
    "text": "documentation that's just class Library documentation but it's so commonly known as API reference docs uh that I'll I'll",
    "start": "406800",
    "end": "414039"
  },
  {
    "text": "stick that way so apis in Google out of Interest uh how many of",
    "start": "414039",
    "end": "420080"
  },
  {
    "text": "you have used apis from Google yeah uh from",
    "start": "420080",
    "end": "427000"
  },
  {
    "text": "c a few how's it been it's been okay okay that's probably about as good as I",
    "start": "427000",
    "end": "434520"
  },
  {
    "text": "could have expected um how many of you remember something called G",
    "start": "434520",
    "end": "440720"
  },
  {
    "text": "data oh just one uh a couple um so there have been a few iterations of apis in in",
    "start": "440720",
    "end": "449000"
  },
  {
    "text": "Google um there are probably various iterations that I'm not aware of but G datas quite a long time ago we",
    "start": "449000",
    "end": "457759"
  },
  {
    "text": "then had quite a lot of rest apis uh Beyond Gata um which all used the same sort of",
    "start": "457759",
    "end": "465000"
  },
  {
    "text": "code Generation Um and were aimed to be restful and very resource oriented and",
    "start": "465000",
    "end": "472720"
  },
  {
    "text": "the uh client libraries were resource oriented but a bit of a pain to use to",
    "start": "472720",
    "end": "478280"
  },
  {
    "text": "be honest uh relative to where we want to get to let's say you can definitely",
    "start": "478280",
    "end": "483360"
  },
  {
    "text": "be successful with them but it doesn't feel like sort of rowing a boat down a",
    "start": "483360",
    "end": "489199"
  },
  {
    "text": "river with a gentle breeze on your face it's more like sort of paddling a bit um bit hard in a",
    "start": "489199",
    "end": "494599"
  },
  {
    "text": "kayak so Google Cloud Storage is still available as a rest",
    "start": "494599",
    "end": "499919"
  },
  {
    "text": "API then the new hotness is what are called grpc apis uh so they can be",
    "start": "499919",
    "end": "507840"
  },
  {
    "text": "accessed via Google 's RPC um new RPC protocol which is not Google specific so",
    "start": "507840",
    "end": "516120"
  },
  {
    "text": "the G ofg RPC yes is Google um at least as far as I'm aware it could be General",
    "start": "516120",
    "end": "521880"
  },
  {
    "text": "RPC um you can use it it's open source you can set up your own grpc server you",
    "start": "521880",
    "end": "528640"
  },
  {
    "text": "can talk to it from entirely non- gooogle code uh it's basically an RPC",
    "start": "528640",
    "end": "534560"
  },
  {
    "text": "protocol typically over http2 it's one of these things where the protocol",
    "start": "534560",
    "end": "539720"
  },
  {
    "text": "itself doesn't mandate http2 it just so happens that it aligns",
    "start": "539720",
    "end": "544800"
  },
  {
    "text": "really really well with http2 and I don't know any other transport that's actually used so you know take from that",
    "start": "544800",
    "end": "552120"
  },
  {
    "text": "what you will uh likewise you don't have to use protocol buffers um how many of",
    "start": "552120",
    "end": "557880"
  },
  {
    "text": "you are familiar with protocol buffers to some extent okay I'll talk about them a bit more later on they're basically a",
    "start": "557880",
    "end": "563839"
  },
  {
    "text": "serialization format that Google has used for many many years um so you don't",
    "start": "563839",
    "end": "569800"
  },
  {
    "text": "have to use Google's PR practical buffers with grpc but every example I've",
    "start": "569800",
    "end": "575200"
  },
  {
    "text": "ever seen does so now more apis are being exposed",
    "start": "575200",
    "end": "581560"
  },
  {
    "text": "over grpc and when they're exposed via grpc they're also exposed uh as restful",
    "start": "581560",
    "end": "589279"
  },
  {
    "text": "resources so that you can access them and typically from JavaScript you would access them as restful resources um so",
    "start": "589279",
    "end": "595680"
  },
  {
    "text": "there's this sort of Duality between uh do we want to be as restful as we can",
    "start": "595680",
    "end": "600760"
  },
  {
    "text": "but it's still access via RPC as well so an example of this is Google",
    "start": "600760",
    "end": "606959"
  },
  {
    "text": "Cloud Pub sub which is about what you'd expect you create a topic and then you",
    "start": "606959",
    "end": "612800"
  },
  {
    "text": "or someone else creates a subscriber for that topic uh a subscription and when",
    "start": "612800",
    "end": "618839"
  },
  {
    "text": "something publishes a message to the topic the subscriber gets to see the message and all the other subscribers",
    "start": "618839",
    "end": "625040"
  },
  {
    "text": "for the same topic do as well I will be using pubsub um in some of the examples",
    "start": "625040",
    "end": "630720"
  },
  {
    "text": "just because it's really really easy to to get scripts with um there aren't very many grpc apis at the moment um but more",
    "start": "630720",
    "end": "639320"
  },
  {
    "text": "will be coming on stream and uh in the spirit of Open Source um you can see the",
    "start": "639320",
    "end": "647480"
  },
  {
    "text": "service definitions for uh these grpc apis um everything's on GitHub but we",
    "start": "647480",
    "end": "653160"
  },
  {
    "text": "have at least three different organizations uh on GitHub so if you go to github.com",
    "start": "653160",
    "end": "659959"
  },
  {
    "text": "/ googleapis googleapis then you'll find a bunch of Proto Buffs in there um don't",
    "start": "659959",
    "end": "666800"
  },
  {
    "text": "worry about remembering that come and ask me afterwards I'll show you I would show you now but I don't think I've got any kind of network connection worth a",
    "start": "666800",
    "end": "673920"
  },
  {
    "text": "worth a damn okay so we do have code gen already for the",
    "start": "673920",
    "end": "681360"
  },
  {
    "text": "restful apis over hp11 they work and I'm still responsible",
    "start": "681360",
    "end": "688399"
  },
  {
    "text": "for Main maintaining both the code generator for that and the sort of",
    "start": "688399",
    "end": "693839"
  },
  {
    "text": "support Library one pattern you'll see here many times is code gen with support",
    "start": "693839",
    "end": "700839"
  },
  {
    "text": "library that provides things that the generated code talks to um so they they still work we still",
    "start": "700839",
    "end": "707959"
  },
  {
    "text": "support them uh but we think we can do better partly by looking at the patterns",
    "start": "707959",
    "end": "713079"
  },
  {
    "text": "that we're using in API design um to get a better semantic",
    "start": "713079",
    "end": "719839"
  },
  {
    "text": "understanding of what these rpcs and what these resources actually",
    "start": "719839",
    "end": "726000"
  },
  {
    "text": "mean I will get to code fairly soon I promise so we're mostly going to be",
    "start": "727040",
    "end": "733360"
  },
  {
    "text": "talking about the grpc stuff today because uh that's the new hotness and that's where I've been spending most of",
    "start": "733360",
    "end": "739519"
  },
  {
    "text": "my time and obviously in Greenfield development that's where you tend to be",
    "start": "739519",
    "end": "744639"
  },
  {
    "text": "able to make design Decisions by the time you've got something that's been going for a few years years there aren't",
    "start": "744639",
    "end": "750079"
  },
  {
    "text": "very many design decisions other than um how few people can I break to get more",
    "start": "750079",
    "end": "755760"
  },
  {
    "text": "people new goodness so within here the uh blue",
    "start": "755760",
    "end": "762600"
  },
  {
    "text": "parts are code generation or generated code the orange bits are per API",
    "start": "762600",
    "end": "771760"
  },
  {
    "text": "manually written code uh that's me and my team and all of you because as I say",
    "start": "771760",
    "end": "778639"
  },
  {
    "text": "this is is all open source it's lovely being able to work in open source because later on I can just bring up the code that I've been working on and show",
    "start": "778639",
    "end": "784839"
  },
  {
    "text": "it to you all um and you can say hey I'd like to fix that and say right send me a poll request um so the orange bits are",
    "start": "784839",
    "end": "791800"
  },
  {
    "text": "per API things and the green set over on the left um are the support",
    "start": "791800",
    "end": "798279"
  },
  {
    "text": "libraries so google. protuff is the supports for protocol",
    "start": "798279",
    "end": "804560"
  },
  {
    "text": "buffers so the actual serialization part um grpc core and Google apis or and",
    "start": "804560",
    "end": "811399"
  },
  {
    "text": "Google apis core um are used by the grpc uh",
    "start": "811399",
    "end": "816440"
  },
  {
    "text": "layer and Google API gxs that gxs is Google API",
    "start": "816440",
    "end": "821800"
  },
  {
    "text": "extensions um which is I realize somewhat torist in this uh situation um",
    "start": "821800",
    "end": "829800"
  },
  {
    "text": "that provides things like support for um extra call settings for",
    "start": "829800",
    "end": "835639"
  },
  {
    "text": "retries um for uh uh page streaming which we'll look at in a little bit um",
    "start": "835639",
    "end": "843160"
  },
  {
    "text": "the idea is you should relatively rarely when using these apis you should relatively rarely need to do anything",
    "start": "843160",
    "end": "849759"
  },
  {
    "text": "with the code on the left it needs to be there and for your likely to see google.",
    "start": "849759",
    "end": "855800"
  },
  {
    "text": "protuff bits um because you'll get repeated fields that you want to add",
    "start": "855800",
    "end": "860839"
  },
  {
    "text": "elements to but most of the stuff on the left you don't need to care about the middle part grpc services most",
    "start": "860839",
    "end": "869240"
  },
  {
    "text": "of the time I hope you won't need to care about you will need to care about the Proto protuff",
    "start": "869240",
    "end": "875839"
  },
  {
    "text": "messages you probably want to care about the pattern aware resource oriented um",
    "start": "875839",
    "end": "881839"
  },
  {
    "text": "layer that we're generating and if there is a handwritten abstraction over the top then you will definitely want to",
    "start": "881839",
    "end": "888079"
  },
  {
    "text": "care about that",
    "start": "888079",
    "end": "894040"
  },
  {
    "text": "okay probably relatively little of that makes sense until I show you an example",
    "start": "894040",
    "end": "899440"
  },
  {
    "text": "so let's skip to visual",
    "start": "899440",
    "end": "903160"
  },
  {
    "text": "studio so we're going to show you I'll show you three ways of getting a",
    "start": "905519",
    "end": "912000"
  },
  {
    "text": "subscription in from pubsub and this is the lowest",
    "start": "912000",
    "end": "918720"
  },
  {
    "text": "level so this is using uh still using generated grpc code so I guess in theory",
    "start": "918720",
    "end": "925240"
  },
  {
    "text": "you could do all of this without any code generation at all um by manually poking bits down a socket um",
    "start": "925240",
    "end": "933079"
  },
  {
    "text": "you definitely definitely don't want to be doing that um but let's just show you",
    "start": "933079",
    "end": "938440"
  },
  {
    "text": "the bits that are required for a single get subscription call so a subscription",
    "start": "938440",
    "end": "943759"
  },
  {
    "text": "knows its own resource name and the resource name for the topic that it's subscribed",
    "start": "943759",
    "end": "948839"
  },
  {
    "text": "to nothing in the pub sub side of things actually matters for the purposes of",
    "start": "948839",
    "end": "954639"
  },
  {
    "text": "this talk you I'm I'm only explaining enough to explain the examples um obviously if you want to know more",
    "start": "954639",
    "end": "960800"
  },
  {
    "text": "about pubsub come and talk to me afterwards so uh we create some",
    "start": "960800",
    "end": "966199"
  },
  {
    "text": "credentials and the fact that this is five lines of code is slightly annoying",
    "start": "966199",
    "end": "972079"
  },
  {
    "text": "but boy is it simpler than it used to be um this is finding the default application credentials from your",
    "start": "972079",
    "end": "978360"
  },
  {
    "text": "context which is um if you are running on a Dev machine you will probably have",
    "start": "978360",
    "end": "983800"
  },
  {
    "text": "downloaded the g-cloud SDK and then run gcloud off login or G Cloud application",
    "start": "983800",
    "end": "989639"
  },
  {
    "text": "default login I think um we're sort of moving from one to the other",
    "start": "989639",
    "end": "995680"
  },
  {
    "text": "and uh if you're running on cloud platform in some form or other so",
    "start": "995680",
    "end": "1002000"
  },
  {
    "text": "compute engine or app engine Flex um or kubernetes then it will use a metadata",
    "start": "1002000",
    "end": "1008480"
  },
  {
    "text": "server to find out basically who your project is and it will connect on behalf",
    "start": "1008480",
    "end": "1014000"
  },
  {
    "text": "of your project to pubsub",
    "start": "1014000",
    "end": "1019240"
  },
  {
    "text": "so that's getting some credentials we then create a channel which is sort of a",
    "start": "1019240",
    "end": "1025079"
  },
  {
    "text": "socket it's not necessarily exactly one socket because it will lazily connect",
    "start": "1025079",
    "end": "1030360"
  },
  {
    "text": "and it will reconnect if things drop and in some situations which I've never actually tried myself yet um it could",
    "start": "1030360",
    "end": "1036959"
  },
  {
    "text": "use multiple sockets for lad balancing and things um but mostly you don't need",
    "start": "1036959",
    "end": "1042079"
  },
  {
    "text": "to care so we create a channel um by saying where we're connecting to um as",
    "start": "1042079",
    "end": "1048079"
  },
  {
    "text": "you can over htps um and converting these credentials",
    "start": "1048079",
    "end": "1054160"
  },
  {
    "text": "which are generic Google credentials that could be used in the restful apis",
    "start": "1054160",
    "end": "1059240"
  },
  {
    "text": "as well and we want grpc Channel credentials so we want to have a call",
    "start": "1059240",
    "end": "1066360"
  },
  {
    "text": "invoker you never need to see this when you're not looking at this low level you will never need to see this call invoker",
    "start": "1066360",
    "end": "1073120"
  },
  {
    "text": "business likewise the marshallers so I mentioned that um prot buff was sort of optional in",
    "start": "1073120",
    "end": "1080480"
  },
  {
    "text": "grpc um you need to tell grpc when you're trying to create when you're",
    "start": "1080480",
    "end": "1086000"
  },
  {
    "text": "trying to serialize a uh a request then call to bite array on it um and when",
    "start": "1086000",
    "end": "1094039"
  },
  {
    "text": "you're trying to deserialize um a request which okay it's not going to have to um then use this",
    "start": "1094039",
    "end": "1101640"
  },
  {
    "text": "paa and likewise for the response so having set up serialization",
    "start": "1101640",
    "end": "1107720"
  },
  {
    "text": "of request and response we now work out there's a un method so a un method is",
    "start": "1107720",
    "end": "1113159"
  },
  {
    "text": "one that takes one input and gives one output um and it's to this uh Google",
    "start": "1113159",
    "end": "1119159"
  },
  {
    "text": "pubsub V1 subscriber API and it's the get subscription method",
    "start": "1119159",
    "end": "1125280"
  },
  {
    "text": "and it takes a request sorry it takes the request Marshal and the response marshaler so that sets up the method",
    "start": "1125280",
    "end": "1131000"
  },
  {
    "text": "that we're going to call then we can create the the request um and the the request is fairly",
    "start": "1131000",
    "end": "1137840"
  },
  {
    "text": "simple it's itself this get subscription request just says um fetch the subscription with this",
    "start": "1137840",
    "end": "1144880"
  },
  {
    "text": "resource name Depending on time I may talk more about resource names and resource IDs later on we'll see see",
    "start": "1144880",
    "end": "1151679"
  },
  {
    "text": "where we get to so this is an existing subscription and then finally after all",
    "start": "1151679",
    "end": "1157679"
  },
  {
    "text": "of that I can call the method uh asynchronously and await it um",
    "start": "1157679",
    "end": "1164360"
  },
  {
    "text": "the null here is uh for yeah I can't remember I was say it was the call options oh no there the the host so you",
    "start": "1164360",
    "end": "1171280"
  },
  {
    "text": "can override even though I would normally call into this channel um you",
    "start": "1171280",
    "end": "1176520"
  },
  {
    "text": "can say for this call I want to call a different host pass in the request get the",
    "start": "1176520",
    "end": "1183520"
  },
  {
    "text": "response and the response um is in this case just a",
    "start": "1183520",
    "end": "1189640"
  },
  {
    "text": "subscription that's all a bit painful I think you'd agree um you definitely don't want to be doing all of that work",
    "start": "1190760",
    "end": "1197240"
  },
  {
    "text": "every time you you make an API call let's have a look at the uh with",
    "start": "1197240",
    "end": "1205360"
  },
  {
    "text": "the generated code for grpc so that was using you could get away with that by",
    "start": "1205360",
    "end": "1210960"
  },
  {
    "text": "using the generated protuff code for get subscription request and subscription but other than that just plain grpc you",
    "start": "1210960",
    "end": "1219520"
  },
  {
    "text": "would never do that if you wanted to um use just the uh the grpc generated code",
    "start": "1219520",
    "end": "1229080"
  },
  {
    "text": "then it's slightly simpler um I haven't bothered with all the the setup of the",
    "start": "1229080",
    "end": "1234280"
  },
  {
    "text": "channel because that's exactly as it would have been before um but you can create a subscriber a",
    "start": "1234280",
    "end": "1240080"
  },
  {
    "text": "client and the client has generated code that says hey I know that I'm going to be given a get subscription request and",
    "start": "1240080",
    "end": "1247120"
  },
  {
    "text": "I'm going to return a subscription as the response so we can just await it and we",
    "start": "1247120",
    "end": "1254919"
  },
  {
    "text": "have uh a pub Sub sub subscription good still slightly painful",
    "start": "1254919",
    "end": "1262679"
  },
  {
    "text": "you know why am I having to create this get subscription request it's all a bit annoying so let let me just switch back",
    "start": "1262679",
    "end": "1269919"
  },
  {
    "text": "to the slide very briefly what I've seen what I've shown you so far is using just the protobuf",
    "start": "1269919",
    "end": "1278279"
  },
  {
    "text": "messages and grpc docor and then the second example was using the grpc",
    "start": "1278279",
    "end": "1285720"
  },
  {
    "text": "services and then when we use the",
    "start": "1287039",
    "end": "1295520"
  },
  {
    "text": "uh the actual rapper Library I the bit that I'm more",
    "start": "1296159",
    "end": "1301480"
  },
  {
    "text": "responsible for so I'm not on the grpc team um so so far I've done the protuff",
    "start": "1301480",
    "end": "1307919"
  },
  {
    "text": "stuff uh but the grpc team is responsible for the previous example you",
    "start": "1307919",
    "end": "1313279"
  },
  {
    "text": "showed using the library that that you can just download from nugat you can say",
    "start": "1313279",
    "end": "1318480"
  },
  {
    "text": "I want a subscriber a client confusingly this is not the subscriber client class that you just",
    "start": "1318480",
    "end": "1324640"
  },
  {
    "text": "saw I'll talk a little bit about naming later on um the good news is you're unlikely to get confused because the",
    "start": "1324640",
    "end": "1331559"
  },
  {
    "text": "grpc generated one is a nested class within subscriber so it should stay out of your way this is a top level class so",
    "start": "1331559",
    "end": "1339120"
  },
  {
    "text": "just create me a subscriber client notice how there's nothing about channels nothing about credentials it",
    "start": "1339120",
    "end": "1346520"
  },
  {
    "text": "just I assume assume that most of the time you want to use the default credentials if you don't you can pass in",
    "start": "1346520",
    "end": "1352799"
  },
  {
    "text": "a channel here um it's a little bit of a pain if you just want to pass in a credential I'm going to fix that but",
    "start": "1352799",
    "end": "1359559"
  },
  {
    "text": "basically I just want a client we then have this next line for",
    "start": "1359559",
    "end": "1366720"
  },
  {
    "text": "the subscription name if you remember the big long string",
    "start": "1366720",
    "end": "1373159"
  },
  {
    "text": "here this project joh Sky tuber project subscriptions demo subscription that's quite big and hairy um we still need",
    "start": "1373159",
    "end": "1382559"
  },
  {
    "text": "that but we can use generated code to get the full name from the bits that",
    "start": "1382559",
    "end": "1390159"
  },
  {
    "text": "we're likely to care about which are the project ID and the subscription ID so we're saying format subscription name",
    "start": "1390159",
    "end": "1397000"
  },
  {
    "text": "John SK Tu project demo subscription and then we just say I",
    "start": "1397000",
    "end": "1402880"
  },
  {
    "text": "would like the subscription please nothing else okay so it's gone down",
    "start": "1402880",
    "end": "1409880"
  },
  {
    "text": "from quite a lot of code not just in terms of lines but hairiness",
    "start": "1409919",
    "end": "1415480"
  },
  {
    "text": "to uh four lines including a console. right line which are reasonably",
    "start": "1415480",
    "end": "1423279"
  },
  {
    "text": "straightforward I don't personally like the fact that we have to do this but we",
    "start": "1423279",
    "end": "1428600"
  },
  {
    "text": "can talk about that later on so any questions so far on you know what that",
    "start": "1428600",
    "end": "1435200"
  },
  {
    "text": "abstraction looks like I haven't shown you yet um any handwritten layers over the top",
    "start": "1435200",
    "end": "1442480"
  },
  {
    "text": "because for pubsub it's sufficiently simple that we have decided having looked at it that we probably don't need",
    "start": "1442480",
    "end": "1448559"
  },
  {
    "text": "an extra layer over the top for data store which is another grpc enabled API",
    "start": "1448559",
    "end": "1454080"
  },
  {
    "text": "now we do have a layer over the top I'll have a little uh I'll show you that a little bit later but do you get the",
    "start": "1454080",
    "end": "1460640"
  },
  {
    "text": "general idea of what we're trying to do okay back to",
    "start": "1460640",
    "end": "1466799"
  },
  {
    "text": "slides so what decisions have we had to make uh",
    "start": "1466799",
    "end": "1474360"
  },
  {
    "text": "even in what you've seen so far we've found that there are various",
    "start": "1474360",
    "end": "1482320"
  },
  {
    "text": "tensions in API Design This is not massively a surprise you know it's not like I came into mid 2015 and thought",
    "start": "1482320",
    "end": "1489360"
  },
  {
    "text": "API Design's really easy uh or Library design is really easy um but it's been",
    "start": "1489360",
    "end": "1494919"
  },
  {
    "text": "interesting to me to see exactly where the difficult ities lie and it's mostly",
    "start": "1494919",
    "end": "1500399"
  },
  {
    "text": "several different flavors of the same kind of problem which is that there's no",
    "start": "1500399",
    "end": "1506080"
  },
  {
    "text": "one size fits all we've kind of concentrated on making",
    "start": "1506080",
    "end": "1511360"
  },
  {
    "text": "you productive in five minutes so the last example that you saw you should be",
    "start": "1511360",
    "end": "1516559"
  },
  {
    "text": "able to see that sample copy paste it get going you know it it will probably",
    "start": "1516559",
    "end": "1522520"
  },
  {
    "text": "take you longer to sign up for Google Cloud platform and get an account and you know maybe download the gcloud SDK",
    "start": "1522520",
    "end": "1528720"
  },
  {
    "text": "that should take you longer than running the sample and by the time you've done that once um when you use the next API",
    "start": "1528720",
    "end": "1537640"
  },
  {
    "text": "it should be just like that but does that necessarily mean that",
    "start": "1537640",
    "end": "1544720"
  },
  {
    "text": "it's going to be entirely useful uh for your real application how many of you",
    "start": "1544720",
    "end": "1549880"
  },
  {
    "text": "have seen great demos of some platform or API and then thought I'm going to go",
    "start": "1549880",
    "end": "1556279"
  },
  {
    "text": "and use that at home or rather you know at work and then found you know it",
    "start": "1556279",
    "end": "1561559"
  },
  {
    "text": "doesn't quite do what I want and it turns out that it's been built for",
    "start": "1561559",
    "end": "1566919"
  },
  {
    "text": "demos it's remarkably easy to do and maybe I'm just naive but I don't think",
    "start": "1566919",
    "end": "1572960"
  },
  {
    "text": "it's actually um a cynical Ploy on the part of tech companies I think it's",
    "start": "1572960",
    "end": "1578279"
  },
  {
    "text": "because when we've been trying to make API decisions we we've looked at fairly",
    "start": "1578279",
    "end": "1584520"
  },
  {
    "text": "small examples thinking how does that look versus something else and we",
    "start": "1584520",
    "end": "1591520"
  },
  {
    "text": "haven't been building you my job is building a class Library it's not building an application that uses pubsub",
    "start": "1591520",
    "end": "1598159"
  },
  {
    "text": "in the real world in a hardened way Etc and I haven't got time to do that for",
    "start": "1598159",
    "end": "1604120"
  },
  {
    "text": "every API that I want to cover which is a shame it would be lovely if I did have the time to do that um but it it does",
    "start": "1604120",
    "end": "1612279"
  },
  {
    "text": "make it tricky so we try to make something that is simple and not scary you you",
    "start": "1612279",
    "end": "1619480"
  },
  {
    "text": "shouldn't look at anything within the samples and go wow that's hairy there's no way I could come up with that for",
    "start": "1619480",
    "end": "1625799"
  },
  {
    "text": "myself or modify it to do exactly what I want um or understand it later on it's",
    "start": "1625799",
    "end": "1631240"
  },
  {
    "text": "got to be simple enough to look at for the simple situations but also flexible",
    "start": "1631240",
    "end": "1636440"
  },
  {
    "text": "enough for real world use so chances are in a production app if you are writing",
    "start": "1636440",
    "end": "1644039"
  },
  {
    "text": "Pokemon go and calling into the API you may very well want to tweak the retry",
    "start": "1644039",
    "end": "1650200"
  },
  {
    "text": "settings did I show any retry settings up there not at all but they should be sufficiently",
    "start": "1650200",
    "end": "1658480"
  },
  {
    "text": "discoverable however that manifests itself that when you need it it's",
    "start": "1658480",
    "end": "1665720"
  },
  {
    "text": "there so part of that Discovery is working out how who our users are um and",
    "start": "1668559",
    "end": "1677200"
  },
  {
    "text": "when we we're talking about Google we have a huge variety of users um you may well be in a simpler situation um most",
    "start": "1677200",
    "end": "1685360"
  },
  {
    "text": "companies this is not bragging but most companies are smaller than Google I think that's fairly simple statement uh",
    "start": "1685360",
    "end": "1692600"
  },
  {
    "text": "so you you may well know your users better um if you're providing a service to them you may well have a better",
    "start": "1692600",
    "end": "1698559"
  },
  {
    "text": "feedback loop than we do um so you can judge how experienced they",
    "start": "1698559",
    "end": "1705000"
  },
  {
    "text": "are one thing that I found very interesting is trying to work out how",
    "start": "1705000",
    "end": "1710360"
  },
  {
    "text": "much documentation someone is prepared to read and have have any of you done user studies uh for",
    "start": "1710360",
    "end": "1718799"
  },
  {
    "text": "developers where you've um shown someone a class library and and given them an an",
    "start": "1718799",
    "end": "1725039"
  },
  {
    "text": "example and said right you now have a task to you know get a subscription or list the subscriptions for a topic or",
    "start": "1725039",
    "end": "1731480"
  },
  {
    "text": "something like that any of you done that if you have users who are using",
    "start": "1731480",
    "end": "1737159"
  },
  {
    "text": "your your code do it it will scare The Living Daylights out of you right I",
    "start": "1737159",
    "end": "1743200"
  },
  {
    "text": "shall take this example remove all the useful lines and then say I don't know what's going on ah yeah you removed all",
    "start": "1743200",
    "end": "1750320"
  },
  {
    "text": "the useful lines so how much documentation are they going to read if you could get them to",
    "start": "1750320",
    "end": "1757720"
  },
  {
    "text": "read for one minute what is the absolute most important thing that you want to",
    "start": "1757720",
    "end": "1763120"
  },
  {
    "text": "tell them Beyond the the",
    "start": "1763120",
    "end": "1769320"
  },
  {
    "text": "people what are they trying to do in terms of portability know we don't currently",
    "start": "1769320",
    "end": "1776600"
  },
  {
    "text": "support Unity there's a trade-off there in terms of the resources we could spend to support Unity for these apis and that's",
    "start": "1776600",
    "end": "1784039"
  },
  {
    "text": "in terms of my class Library you can definitely call these apis from Unity um",
    "start": "1784039",
    "end": "1790559"
  },
  {
    "text": "probably with the HTP 1.1 stuff that's all fine these particular class libraries we don't support Unity right",
    "start": "1790559",
    "end": "1797120"
  },
  {
    "text": "now uh we don't support net core this Beta release I'm hoping the next Beta release",
    "start": "1797120",
    "end": "1803880"
  },
  {
    "text": "we will um you know how much does that matter to your users are we actually",
    "start": "1803880",
    "end": "1809760"
  },
  {
    "text": "only talking about asp.net asp.net devs who are running servers",
    "start": "1809760",
    "end": "1815559"
  },
  {
    "text": "maybe from Azure you know we're not we're not proud it's fine you can call our stuff from Azure or from AWS we'd",
    "start": "1815559",
    "end": "1822240"
  },
  {
    "text": "like you to be calling it from gcp from compute engine um but no we're not going to stop you from calling it from",
    "start": "1822240",
    "end": "1828960"
  },
  {
    "text": "wherever um what are they trying to accomplish and what's going to be helpful and",
    "start": "1828960",
    "end": "1834559"
  },
  {
    "text": "what's going to really get in their way back to the user perspective so that",
    "start": "1834559",
    "end": "1841919"
  },
  {
    "text": "there are I think it's worth distinguishing when you make design decisions think about the application",
    "start": "1841919",
    "end": "1849519"
  },
  {
    "text": "they're trying to build which is a hard thing so it's it's not a soft",
    "start": "1849519",
    "end": "1855440"
  },
  {
    "text": "skills business and then think about the person who is using your code and those are very very different things aside",
    "start": "1855440",
    "end": "1862919"
  },
  {
    "text": "from anything else there could be a hundred people all building the same application some of whom are interns who",
    "start": "1862919",
    "end": "1870880"
  },
  {
    "text": "are learning C for the first time and some of whom are industry veterans who've seen all of this",
    "start": "1870880",
    "end": "1877480"
  },
  {
    "text": "before how can you make a class library that works for both of them are some of them using the same",
    "start": "1877480",
    "end": "1885440"
  },
  {
    "text": "apis so using pubsub for example also from Python and from java and from go",
    "start": "1885440",
    "end": "1892960"
  },
  {
    "text": "and from PHP and Ruby or you know some subset of that so they would like",
    "start": "1892960",
    "end": "1898519"
  },
  {
    "text": "consistency they would like to see things that look kind of the same in every",
    "start": "1898519",
    "end": "1904039"
  },
  {
    "text": "language versus other developers may be using pubsub and cloud storage for",
    "start": "1904039",
    "end": "1909519"
  },
  {
    "text": "example so Scott hansan in his talk yesterday no it was just before his talk he was showing bits of azure monitoring",
    "start": "1909519",
    "end": "1916440"
  },
  {
    "text": "he was saying he had a queue and when a an image was uploaded into Azure storage",
    "start": "1916440",
    "end": "1924919"
  },
  {
    "text": "he would get something on a queue and he would run something to uh run P crush or",
    "start": "1924919",
    "end": "1930600"
  },
  {
    "text": "whatever to to compress the image and then pop it into somewhere else so the",
    "start": "1930600",
    "end": "1935720"
  },
  {
    "text": "equivalent of that for gcp would be um uploading to Google cloud storage and",
    "start": "1935720",
    "end": "1942080"
  },
  {
    "text": "then you have a pubsub queue and then something notices hey I've got something to do fetches from GC uh GCS cloud",
    "start": "1942080",
    "end": "1949919"
  },
  {
    "text": "storage runs pun Crush uploads it to Google Cloud Storage so we've got two",
    "start": "1949919",
    "end": "1955159"
  },
  {
    "text": "apis there um I believe that many of our users use multiple apis so if you're",
    "start": "1955159",
    "end": "1960919"
  },
  {
    "text": "using multiple apis from one language you want those to be consistent with each other and ideally idiomatic for the",
    "start": "1960919",
    "end": "1967960"
  },
  {
    "text": "language that you're using but someone else might be just using the one API from multiple",
    "start": "1967960",
    "end": "1973279"
  },
  {
    "text": "languages and they have kind of different not requirements um but different",
    "start": "1973279",
    "end": "1980679"
  },
  {
    "text": "desires let's talk briefly about documentation I would show you to let's",
    "start": "1982960",
    "end": "1989240"
  },
  {
    "text": "let's just see whether internet is working and I can show you the docs that",
    "start": "1989240",
    "end": "1996000"
  },
  {
    "text": "we've got um how many people here publish whether",
    "start": "1996000",
    "end": "2002960"
  },
  {
    "text": "it's open source or for work um have some like library that they publish documentation",
    "start": "2002960",
    "end": "2009519"
  },
  {
    "text": "for how happy are you with your documentation mediumly oh fairly right",
    "start": "2009519",
    "end": "2016360"
  },
  {
    "text": "I'm never happy with documentation um so whether that's for NOA time the open",
    "start": "2016360",
    "end": "2021840"
  },
  {
    "text": "source project that I write um or our uh class libraries here Jo this isn't going",
    "start": "2021840",
    "end": "2028399"
  },
  {
    "text": "to work um but there are again competing",
    "start": "2028399",
    "end": "2036559"
  },
  {
    "text": "concerns do you want your Java documentation to look like Java do and then if you're",
    "start": "2036559",
    "end": "2044440"
  },
  {
    "text": "using the same thing from python it looks completely different or do you want some sort of",
    "start": "2044440",
    "end": "2050440"
  },
  {
    "text": "consistency between those two even though at that point it's not fully idiomatic for either the Java user or",
    "start": "2050440",
    "end": "2057000"
  },
  {
    "text": "the python user okay these are not obvious questions that can be answered",
    "start": "2057000",
    "end": "2062118"
  },
  {
    "text": "with a yes no answer um what tldr do you provide that that",
    "start": "2062119",
    "end": "2069440"
  },
  {
    "text": "sort of one minute if you read nothing else please read this what level of conceptual",
    "start": "2069440",
    "end": "2075919"
  },
  {
    "text": "documentation do you provide and how high do you aim that you no one is going",
    "start": "2075919",
    "end": "2082280"
  },
  {
    "text": "to read documentation or very few people are going to read documentation and say I'm not an advanced user so if there's a",
    "start": "2082280",
    "end": "2089000"
  },
  {
    "text": "simplified version that's that's what I'll read everyone's gonna say no I'm really smart I will read the the smart",
    "start": "2089000",
    "end": "2095200"
  },
  {
    "text": "people's Advanced documentation and quite possibly get lost so how do you",
    "start": "2095200",
    "end": "2100839"
  },
  {
    "text": "provide things that work for advanced and inexperience users what do you give",
    "start": "2100839",
    "end": "2107200"
  },
  {
    "text": "us samples I mentioned earlier on I haven't built a full um pubsub",
    "start": "2107200",
    "end": "2112760"
  },
  {
    "text": "application I did build a sample little chat application which I gather Now isn't really the aim of uh the pubsub",
    "start": "2112760",
    "end": "2119680"
  },
  {
    "text": "API um but I haven't written a full application but what kind of samples can",
    "start": "2119680",
    "end": "2125880"
  },
  {
    "text": "we give we have I have colleagues who are writing um sample web applications",
    "start": "2125880",
    "end": "2132880"
  },
  {
    "text": "that do use a variety of apis so that's kind of useful to see it all in a big",
    "start": "2132880",
    "end": "2138040"
  },
  {
    "text": "context but then to get the full benefit of that you need to clone the repo and",
    "start": "2138040",
    "end": "2143320"
  },
  {
    "text": "run it yourself and then you know maybe step through relevant bits tweak it a bit versus here's a sample that's",
    "start": "2143320",
    "end": "2151520"
  },
  {
    "text": "unrealistic you know it does one thing it says I will list all the subscriptions in this project",
    "start": "2151520",
    "end": "2158160"
  },
  {
    "text": "okay well that's not terribly useful in itself but it is good as a if you know",
    "start": "2158160",
    "end": "2164119"
  },
  {
    "text": "that you want to list the the subscriptions just seeing that one thing is great the other thing that we've been",
    "start": "2164119",
    "end": "2171119"
  },
  {
    "text": "exploring is what to do in terms of examples within an API reference so I'll",
    "start": "2171119",
    "end": "2177079"
  },
  {
    "text": "show you an example of this um how many of you have used doc effects at all or",
    "start": "2177079",
    "end": "2182760"
  },
  {
    "text": "heard of it no okay well if nothing else I can provide you value today by saying go explore doc effects um it's I believe",
    "start": "2182760",
    "end": "2191240"
  },
  {
    "text": "it's what's used for uh the asp.net core documentation um it's from Microsoft",
    "start": "2191240",
    "end": "2197240"
  },
  {
    "text": "it's sort of think of it as a successor to Sandcastle is um and it it works with",
    "start": "2197240",
    "end": "2204920"
  },
  {
    "text": "net core projects it works with uh CS Pro projects um we've had to do a little",
    "start": "2204920",
    "end": "2210560"
  },
  {
    "text": "bit of work ourselves to uh add a bit more flexib ibility but",
    "start": "2210560",
    "end": "2218200"
  },
  {
    "text": "basically we wanted to provide examples within our reference documentation which we knew",
    "start": "2218200",
    "end": "2223720"
  },
  {
    "text": "worked if you write uh code within XML comments it will fail it's bound to it's",
    "start": "2223720",
    "end": "2231560"
  },
  {
    "text": "not refactoring proof um it's just not going to work so we have a bunch of uh",
    "start": "2231560",
    "end": "2237319"
  },
  {
    "text": "examples here so let's uh okay these are written as tests some of them genuinely",
    "start": "2237319",
    "end": "2245319"
  },
  {
    "text": "are tests in that they will ERT things at the end they will all run they will all compile um so if if I run these now",
    "start": "2245319",
    "end": "2254880"
  },
  {
    "text": "they would fail because I've got no internet connection but that's good because it means that it proves they're trying to exercise something and they're",
    "start": "2254880",
    "end": "2261480"
  },
  {
    "text": "exercising something that would fail um within this room and then we've got the snippet here",
    "start": "2261480",
    "end": "2270040"
  },
  {
    "text": "and end snippet and that means um I run a little",
    "start": "2270040",
    "end": "2275440"
  },
  {
    "text": "tool it extracts just that chunk of text and puts it somewhere else that can be",
    "start": "2275440",
    "end": "2281480"
  },
  {
    "text": "extracted later on by another bit of the process um the pipeline and so if you",
    "start": "2281480",
    "end": "2287280"
  },
  {
    "text": "look at um the list topics method within publisher client you will see that",
    "start": "2287280",
    "end": "2294280"
  },
  {
    "text": "example okay that's quite nice in the future because hey this is C",
    "start": "2294280",
    "end": "2301880"
  },
  {
    "text": "and we've got Roslin um just showing that snippet isn't terribly useful you want to know what using directives are",
    "start": "2301880",
    "end": "2307960"
  },
  {
    "text": "used so in the future I'm hoping to take that snippet take all the using",
    "start": "2307960",
    "end": "2313240"
  },
  {
    "text": "directives at the top um create in memory a program that just contains that",
    "start": "2313240",
    "end": "2319240"
  },
  {
    "text": "see you know it should compile and then I can see which using directives are actually required and then put all of",
    "start": "2319240",
    "end": "2326119"
  },
  {
    "text": "those into the snippet as well things like this um using the good stuff that",
    "start": "2326119",
    "end": "2331800"
  },
  {
    "text": "is coming in the net ecosystem really can help us build better documentation so I would",
    "start": "2331800",
    "end": "2338440"
  },
  {
    "text": "encourage you to look at Doc effects um and think about how you might use that it's still sort of a bit preview is the",
    "start": "2338440",
    "end": "2345000"
  },
  {
    "text": "default template doesn't have the greatest Styles in the world for example but really think about your",
    "start": "2345000",
    "end": "2351880"
  },
  {
    "text": "documentation it's it's one of those things that is very rarely anyone's top",
    "start": "2351880",
    "end": "2358240"
  },
  {
    "text": "priority if you can persuade your company to get someone whose sole mission in life is to make your",
    "start": "2358240",
    "end": "2365119"
  },
  {
    "text": "documentation awesome and not this isn't sort of application documentation this is if you're exposing",
    "start": "2365119",
    "end": "2371359"
  },
  {
    "text": "an API um then your users will love you for it okay so onto sort of less soft",
    "start": "2371359",
    "end": "2380400"
  },
  {
    "text": "things another design decision we had to make early on um with protobuffers as",
    "start": "2380400",
    "end": "2387720"
  },
  {
    "text": "well not just these client libraries but we knew from the start that uh protocol",
    "start": "2387720",
    "end": "2393240"
  },
  {
    "text": "buffers would be used within our client Library",
    "start": "2393240",
    "end": "2398400"
  },
  {
    "text": "I have a proto2 we've recently moved from Proto 2 to Proto 3 um and ages ago",
    "start": "2398680",
    "end": "2406640"
  },
  {
    "text": "as a 20% project I had an open- source project supporting Proto 2 for C and it",
    "start": "2406640",
    "end": "2413280"
  },
  {
    "text": "was pretty much a port of the Java code with some C idioms and the Java code is",
    "start": "2413280",
    "end": "2419160"
  },
  {
    "text": "all based on immutability we love immutability within Google um how many of you are basically familiar with the",
    "start": "2419160",
    "end": "2425400"
  },
  {
    "text": "benefits of IM mutability yeah so we went a different way for",
    "start": "2425400",
    "end": "2430720"
  },
  {
    "text": "Proto 3 because we looked at the Simplicity for getting going versus",
    "start": "2430720",
    "end": "2436680"
  },
  {
    "text": "long-term benefits and we thought do you know what there aren't quite enough long-term benefits to justify it being a",
    "start": "2436680",
    "end": "2443640"
  },
  {
    "text": "pain to get going and frankly it being a pain all the time that it's an ongoing",
    "start": "2443640",
    "end": "2449680"
  },
  {
    "text": "source of lowlevel friction there are definite benefits and",
    "start": "2449680",
    "end": "2456400"
  },
  {
    "text": "maybe in future version versions of C I gather that records are no longer part of c 7 um come to my talk later on to",
    "start": "2456400",
    "end": "2464480"
  },
  {
    "text": "find out more about c 7 um but you know it's highly likely that a future version of C will have better support for",
    "start": "2464480",
    "end": "2471760"
  },
  {
    "text": "immutability but at the moment it's just a bit of a pain so we",
    "start": "2471760",
    "end": "2477480"
  },
  {
    "text": "decided basic rewrite of our C code for Proto 3 which is now no longer a 20%",
    "start": "2477480",
    "end": "2484839"
  },
  {
    "text": "project it's fully orted part of the Google protobuf GitHub repo um it it's",
    "start": "2484839",
    "end": "2492960"
  },
  {
    "text": "full um Google supported code let's have a look no go away um",
    "start": "2492960",
    "end": "2501640"
  },
  {
    "text": "I'll just show you the difference so these are not quite the same protos because the underlying um Proto has",
    "start": "2501640",
    "end": "2509319"
  },
  {
    "text": "changed this is a sample Proto for an address book where an address book",
    "start": "2509319",
    "end": "2514920"
  },
  {
    "text": "consists of people and and each person has an email and a name and also a mobile phone number but I haven't shown",
    "start": "2514920",
    "end": "2521640"
  },
  {
    "text": "that so we get all of this annoyance so just to build an address",
    "start": "2521640",
    "end": "2528720"
  },
  {
    "text": "list to start with an address book we have to say a create an addressbook Builder and then set some properties on",
    "start": "2528720",
    "end": "2535640"
  },
  {
    "text": "it with an object initializer and you know we can still do things this is a collection initializer",
    "start": "2535640",
    "end": "2541480"
  },
  {
    "text": "within it I'm trying to use as much C goodness as I can but we still got build",
    "start": "2541480",
    "end": "2547680"
  },
  {
    "text": "all over the place I could have added an implicit conversion from the Builder to the non-b",
    "start": "2547680",
    "end": "2552880"
  },
  {
    "text": "Builder but that feels like that would be a step too far and would surprise people too often and would stop you from",
    "start": "2552880",
    "end": "2559720"
  },
  {
    "text": "using VAR where you basically wanted to so we have all of that and suppose we",
    "start": "2559720",
    "end": "2565520"
  },
  {
    "text": "wanted to set the ID for this single person well we've got to convert it back",
    "start": "2565520",
    "end": "2570640"
  },
  {
    "text": "to a builder and get the person that we've created and convert them to a",
    "start": "2570640",
    "end": "2575760"
  },
  {
    "text": "builder as well change their ID rebuild it set it back in the list and then rebuild the whole address",
    "start": "2575760",
    "end": "2582000"
  },
  {
    "text": "book that's not fun I don't like having to do this kind of",
    "start": "2582000",
    "end": "2587160"
  },
  {
    "text": "code in the new in proto 3 we",
    "start": "2587160",
    "end": "2593680"
  },
  {
    "text": "have this so you obviously you could squish this code up if you wanted to um",
    "start": "2593680",
    "end": "2600400"
  },
  {
    "text": "but the main thing is no Builders anywhere and we just have um a",
    "start": "2600400",
    "end": "2606640"
  },
  {
    "text": "collection initializer and when you want to mutate something you just do",
    "start": "2606640",
    "end": "2612599"
  },
  {
    "text": "and this would make me sad for some scenarios because there are again",
    "start": "2612599",
    "end": "2618760"
  },
  {
    "text": "definite um benefits of immutability thread safety all kinds of",
    "start": "2618760",
    "end": "2623920"
  },
  {
    "text": "stuff but it makes me very happy that we can write something as simple as",
    "start": "2623920",
    "end": "2629480"
  },
  {
    "text": "this this was hotly debated within the team um I was personally resisting for",
    "start": "2629480",
    "end": "2635720"
  },
  {
    "text": "quite aot long time partly because and this is a lesson that I want to pass on",
    "start": "2635720",
    "end": "2641160"
  },
  {
    "text": "and it's it's not an easy lesson we have biases okay when you have written V1 of",
    "start": "2641160",
    "end": "2648400"
  },
  {
    "text": "the code and someone is suggesting a complete change of direction for v2 you will resist it because that's human",
    "start": "2648400",
    "end": "2655559"
  },
  {
    "text": "nature we we like what we've built and I resisted for a long time I think this",
    "start": "2655559",
    "end": "2660599"
  },
  {
    "text": "was the right decision right now as I said when C gets better support",
    "start": "2660599",
    "end": "2666359"
  },
  {
    "text": "for immutability um in later versions we might make a different decision any questions on immutability",
    "start": "2666359",
    "end": "2673440"
  },
  {
    "text": "before the next design point no",
    "start": "2673440",
    "end": "2679640"
  },
  {
    "text": "okay page streaming okay this is one of the features that we support I mentioned",
    "start": "2682000",
    "end": "2687200"
  },
  {
    "text": "before that the generated code above the grpc service",
    "start": "2687200",
    "end": "2692359"
  },
  {
    "text": "layer is sort of pattern oriented so we have a style guide which",
    "start": "2692359",
    "end": "2698680"
  },
  {
    "text": "is either public or going to be public for grpc for for the services that we will",
    "start": "2698680",
    "end": "2705480"
  },
  {
    "text": "Expose and one of the patterns that we have is if you're listing resources such",
    "start": "2705480",
    "end": "2710920"
  },
  {
    "text": "as subscriptions in a project um you may have thousands of subscriptions we don't want to",
    "start": "2710920",
    "end": "2717240"
  },
  {
    "text": "necessarily return all of those in one RPC so we have a pattern where you do a",
    "start": "2717240",
    "end": "2722559"
  },
  {
    "text": "list subscriptions request and you can say how many items",
    "start": "2722559",
    "end": "2728040"
  },
  {
    "text": "you want per page and it will come back and say here are the that many items or maybe a bit",
    "start": "2728040",
    "end": "2735280"
  },
  {
    "text": "fewer uh and here's a next page token and then you can make another request",
    "start": "2735280",
    "end": "2740319"
  },
  {
    "text": "and say I would like to do the same kind of thing I still want 10 per page here's the next page token and you get back",
    "start": "2740319",
    "end": "2746960"
  },
  {
    "text": "another page and you keep going until the next page token is empty a little bit like calling in fact",
    "start": "2746960",
    "end": "2753960"
  },
  {
    "text": "very much like calling stream not read um you know you you can detect when",
    "start": "2753960",
    "end": "2759559"
  },
  {
    "text": "you've reached the End by there's no next page token you don't actually have to make an RPC that returns no results",
    "start": "2759559",
    "end": "2765480"
  },
  {
    "text": "you we we've got one fewer RPC that you than you would make stream. read calls",
    "start": "2765480",
    "end": "2770520"
  },
  {
    "text": "um but if you've asked for 10 results you may get back five before the server",
    "start": "2770520",
    "end": "2776400"
  },
  {
    "text": "May notice ah I'm about to overflow your timeout so I'll return you what I've got",
    "start": "2776400",
    "end": "2782640"
  },
  {
    "text": "in the next page token and you can continue if you want to",
    "start": "2782640",
    "end": "2787800"
  },
  {
    "text": "does that sound like a fun API to use directly from your application",
    "start": "2788000",
    "end": "2794480"
  },
  {
    "text": "code the answer is no okay I'll show you what I",
    "start": "2794480",
    "end": "2800838"
  },
  {
    "text": "mean so manual page streaming okay so it's not so bad okay it's the kind of",
    "start": "2803240",
    "end": "2810800"
  },
  {
    "text": "thing that if you do once you don't mind too much so this is just printing the",
    "start": "2810800",
    "end": "2817240"
  },
  {
    "text": "subscription name and the topic name for each subscription in the project and",
    "start": "2817240",
    "end": "2822839"
  },
  {
    "text": "it's a do while loop and this is not terribly",
    "start": "2822839",
    "end": "2828760"
  },
  {
    "text": "difficult but it is I wouldn't say it's a page of code because you know clearly I've got a massive font but it's it's 15",
    "start": "2828839",
    "end": "2835760"
  },
  {
    "text": "lines of code it's annoying so we want to make that simpler for you so in the",
    "start": "2835760",
    "end": "2841559"
  },
  {
    "text": "generated layer above we and we knew right from the start that we wanted to",
    "start": "2841559",
    "end": "2846720"
  },
  {
    "text": "do this we will just expose some sort of iterator and you can just iterate over",
    "start": "2846720",
    "end": "2852040"
  },
  {
    "text": "things and we'll do this next page token stuff in the background for you",
    "start": "2852040",
    "end": "2857319"
  },
  {
    "text": "great so what design decisions does that throw up the first one that I honestly",
    "start": "2857319",
    "end": "2863880"
  },
  {
    "text": "actually now can't remember the uh answer to Is what do you do about a",
    "start": "2863880",
    "end": "2868920"
  },
  {
    "text": "timeout if you're saying list subscriptions and you give me a timeout",
    "start": "2868920",
    "end": "2874400"
  },
  {
    "text": "of 30 seconds is that per request is it in order to get to the end what is it in",
    "start": "2874400",
    "end": "2881800"
  },
  {
    "text": "our case I believe we treat it as a per request and because everything's lazy",
    "start": "2881800",
    "end": "2887599"
  },
  {
    "text": "you know this this returns let me show you the actual thing",
    "start": "2887599",
    "end": "2893119"
  },
  {
    "text": "uh the return value from list subscriptions here is lazy so actually",
    "start": "2893119",
    "end": "2900079"
  },
  {
    "text": "calling this subscriptions does almost nothing out of Interest how many of you",
    "start": "2900079",
    "end": "2907160"
  },
  {
    "text": "are surprised by that a few come and talk to me later and say",
    "start": "2907160",
    "end": "2915400"
  },
  {
    "text": "how how we could make that more obvious so from a link point of view it shouldn't you know if you've used link",
    "start": "2915400",
    "end": "2921160"
  },
  {
    "text": "and used um data tables or whatever sorry not data tables but uh the tables",
    "start": "2921160",
    "end": "2926480"
  },
  {
    "text": "you get from EF or link SQL or whatever it shouldn't feel",
    "start": "2926480",
    "end": "2932520"
  },
  {
    "text": "surprising but I can see that you're calling a method saying listen this subscription it should do something damn it um it's even worse with data store",
    "start": "2932520",
    "end": "2940480"
  },
  {
    "text": "where we have run query which doesn't run a query it gets ready to run a query",
    "start": "2940480",
    "end": "2946119"
  },
  {
    "text": "as soon as you start iterating over the results I'm fairly confident that it's the behavior we",
    "start": "2946119",
    "end": "2951599"
  },
  {
    "text": "want but for a while we called this list subscriptions page streaming and it was pointed out that no",
    "start": "2951599",
    "end": "2959400"
  },
  {
    "text": "one really wants that no one wants the the extra hustle so this is one of those",
    "start": "2959400",
    "end": "2965040"
  },
  {
    "text": "things that if I could if I could tell developers like five small things it",
    "start": "2965040",
    "end": "2971280"
  },
  {
    "text": "would be when you're doing a list it's deferred evaluation you're almost certainly not going to see the",
    "start": "2971280",
    "end": "2977079"
  },
  {
    "text": "difference because why would you call list subscriptions and then not use the result but it does matter in that you",
    "start": "2977079",
    "end": "2984359"
  },
  {
    "text": "don't want to call list subscriptions and then call count on the result and say there are count of suppose I did",
    "start": "2984359",
    "end": "2994520"
  },
  {
    "text": "um listing subscriptions.",
    "start": "2994520",
    "end": "3000440"
  },
  {
    "text": "count subscriptions okay then you may expect",
    "start": "3000440",
    "end": "3006640"
  },
  {
    "text": "that to list them once sorry just needs syst link uh you",
    "start": "3006640",
    "end": "3012960"
  },
  {
    "text": "may expect that to list them once in terms of rpcs and then display the count",
    "start": "3012960",
    "end": "3018559"
  },
  {
    "text": "and display the data but no just as it would in link um link SQL or whatever",
    "start": "3018559",
    "end": "3024640"
  },
  {
    "text": "that would run through everything to get the count and then run through it all it's it's preparing a query it's not",
    "start": "3024640",
    "end": "3031440"
  },
  {
    "text": "actually doing it but beyond that this feels kind of",
    "start": "3031440",
    "end": "3037440"
  },
  {
    "text": "nice I'm listing the subscriptions great but that may not be the only use",
    "start": "3037440",
    "end": "3045520"
  },
  {
    "text": "case so if you just want all the subscriptions that's fine what if you're",
    "start": "3045520",
    "end": "3051119"
  },
  {
    "text": "doing a web API sorry a web application and you're trying to list the sub descriptions and you want to list them",
    "start": "3051119",
    "end": "3057319"
  },
  {
    "text": "one page at a time this doesn't help you at all it seems okay because you're",
    "start": "3057319",
    "end": "3064160"
  },
  {
    "text": "trying to display the next 50 well we've no way of saying in what I've shown you",
    "start": "3064160",
    "end": "3070240"
  },
  {
    "text": "so far okay just give me the first 50 and",
    "start": "3070240",
    "end": "3075480"
  },
  {
    "text": "then I'll display the next 50 after that and how do you display the next 50 well",
    "start": "3075480",
    "end": "3081359"
  },
  {
    "text": "we do have a way of doing that",
    "start": "3081359",
    "end": "3086440"
  },
  {
    "text": "we still call list subscriptions but then whereas the the",
    "start": "3086440",
    "end": "3092040"
  },
  {
    "text": "type of subscriptions I'll just make it explicit here so that you can see it in decent",
    "start": "3092040",
    "end": "3098799"
  },
  {
    "text": "font come on ah no uh sorry I had to launch Visual Studio in safe mode",
    "start": "3098799",
    "end": "3105559"
  },
  {
    "text": "because for some reason it crashes when it launches without a network um and it",
    "start": "3105559",
    "end": "3110720"
  },
  {
    "text": "looks like the autocomplete to to do um uh EXP explicit declaration doesn't",
    "start": "3110720",
    "end": "3118040"
  },
  {
    "text": "work um but anyway this is an i paged",
    "start": "3118040",
    "end": "3123319"
  },
  {
    "text": "inumerable of T response T resource where T response is a list subscriptions",
    "start": "3123319",
    "end": "3128559"
  },
  {
    "text": "response and the T resource is subscription and that I page enumerable",
    "start": "3128559",
    "end": "3133960"
  },
  {
    "text": "has an as Pages method and the idea is this basically gives you back instead of",
    "start": "3133960",
    "end": "3139520"
  },
  {
    "text": "a sequence of the subscriptions it gives you back a sequence of the RPC responses",
    "start": "3139520",
    "end": "3144920"
  },
  {
    "text": "so it's still doing the page streaming for you it's still providing value but it's sort of a little bit",
    "start": "3144920",
    "end": "3151839"
  },
  {
    "text": "lower level and this way you can look at the uh page tokens",
    "start": "3151839",
    "end": "3158280"
  },
  {
    "text": "yourself and that's kind of useful is it's still not great for a web",
    "start": "3158280",
    "end": "3166000"
  },
  {
    "text": "application anyone think why if you're doing a web application",
    "start": "3166000",
    "end": "3172359"
  },
  {
    "text": "you probably want to display 10 20 at a time and if the API happens to give you back",
    "start": "3172359",
    "end": "3177880"
  },
  {
    "text": "five you don't want to display a page of five you want to display the next 20 so this was another use case that we",
    "start": "3177880",
    "end": "3185319"
  },
  {
    "text": "considered and we can actually do after doing as",
    "start": "3185319",
    "end": "3191760"
  },
  {
    "text": "Pages we can currently do with fixed size 10 whatever it",
    "start": "3191760",
    "end": "3197920"
  },
  {
    "text": "is and this will make sure yeah ignore the compiler as it changes the return",
    "start": "3197920",
    "end": "3203000"
  },
  {
    "text": "type obviously um at this point there may be extra",
    "start": "3203000",
    "end": "3208119"
  },
  {
    "text": "properties within each response that we no longer give you because we're doing extra work on your behalf so it could be",
    "start": "3208119",
    "end": "3216359"
  },
  {
    "text": "that one fixed page that we return you with 10 results came from two different",
    "start": "3216359",
    "end": "3221960"
  },
  {
    "text": "responses so we're not going to give you the response anymore but you will get exactly 10 items until you reach the end",
    "start": "3221960",
    "end": "3228480"
  },
  {
    "text": "of the list obviously and you will get a next page token that will let you get",
    "start": "3228480",
    "end": "3233559"
  },
  {
    "text": "the next one so that should work for web",
    "start": "3233559",
    "end": "3238760"
  },
  {
    "text": "applications so those are the use cases that we've come up with of I want to see",
    "start": "3238760",
    "end": "3243920"
  },
  {
    "text": "the responses I want to just see the resources because I'm dumping them in a console app or I'm doing some batch",
    "start": "3243920",
    "end": "3249960"
  },
  {
    "text": "processing or I want to get them with a fixed size and it took us it's taken me five",
    "start": "3249960",
    "end": "3256960"
  },
  {
    "text": "minutes to explain it all it took us a good few days of working out how do we",
    "start": "3256960",
    "end": "3262119"
  },
  {
    "text": "want to expose that we're still not sure is it better to have as Pages do with",
    "start": "3262119",
    "end": "3267880"
  },
  {
    "text": "fixed size or should we just have subscriptions do as fixed size",
    "start": "3267880",
    "end": "3274880"
  },
  {
    "text": "Pages aside from anything else if we did this we could get away with I think two",
    "start": "3275680",
    "end": "3281880"
  },
  {
    "text": "fewer interfaces which I don't care about having more interfaces in terms of my",
    "start": "3281880",
    "end": "3287400"
  },
  {
    "text": "code maintainability it's it's simple but I don't want to pass that conceptual",
    "start": "3287400",
    "end": "3292440"
  },
  {
    "text": "burden onto you folks so there are reasons either way okay I'm running out",
    "start": "3292440",
    "end": "3298799"
  },
  {
    "text": "of time do you know I came this morning thinking I do hope I've got enough material for an hour whenever I watch",
    "start": "3298799",
    "end": "3304680"
  },
  {
    "text": "someone else's presentation an hour feels like a long time even if I'm having a great time um but it's amazing",
    "start": "3304680",
    "end": "3311119"
  },
  {
    "text": "how things change when suddenly you're um presenting right",
    "start": "3311119",
    "end": "3318319"
  },
  {
    "text": "so I will go back to the slides and work out which of the slides we should look",
    "start": "3318319",
    "end": "3324000"
  },
  {
    "text": "at uh so naming versing inheritance right I",
    "start": "3324000",
    "end": "3329119"
  },
  {
    "text": "can probably cover both quickly so naming and versioning uh when you download the",
    "start": "3329119",
    "end": "3337599"
  },
  {
    "text": "pubsub N package that is called google. pubsub",
    "start": "3337599",
    "end": "3343079"
  },
  {
    "text": "dov1 and the current version of it is V1",
    "start": "3343079",
    "end": "3348559"
  },
  {
    "text": "beta1 is that confusing okay darn it's still the right",
    "start": "3348559",
    "end": "3355599"
  },
  {
    "text": "thing to do I think because the API version is Google Pub sub V1 we may come",
    "start": "3355599",
    "end": "3362079"
  },
  {
    "text": "up with a much better way of accessing it with all different code gen that is a completely breaking",
    "start": "3362079",
    "end": "3368039"
  },
  {
    "text": "change and that would be Google Pub sub V1 version",
    "start": "3368039",
    "end": "3374000"
  },
  {
    "text": "two unfortunately in theory it wouldn't finish there because we could be using",
    "start": "3374599",
    "end": "3379640"
  },
  {
    "text": "different versions of the protuff codee Gen different versions of the grpc code gen there are ious orthogonal axes here",
    "start": "3379640",
    "end": "3387440"
  },
  {
    "text": "for versioning but we've decided that the the client Library version you get",
    "start": "3387440",
    "end": "3393160"
  },
  {
    "text": "is separated from the API version that you're accessing that's bad in terms of it's",
    "start": "3393160",
    "end": "3399559"
  },
  {
    "text": "confusing it's good in terms of flexibility at some point I'm sure there",
    "start": "3399559",
    "end": "3405200"
  },
  {
    "text": "will be a Google pubsub V2 you don't want to automatically",
    "start": "3405200",
    "end": "3410799"
  },
  {
    "text": "update to that from nugat because it may be breaking it may have some different",
    "start": "3410799",
    "end": "3418079"
  },
  {
    "text": "uh features they may remove some features or rename bits and pieces we've",
    "start": "3418079",
    "end": "3423559"
  },
  {
    "text": "had an interesting discussion about what counts as a breaking change within an",
    "start": "3423559",
    "end": "3429200"
  },
  {
    "text": "API that seems like it should be obvious and I mean an RPC API it feels like it",
    "start": "3429200",
    "end": "3434839"
  },
  {
    "text": "should be obvious but it's really not if I have an enumeration uh I don't think there were",
    "start": "3434839",
    "end": "3440920"
  },
  {
    "text": "any in pubsub but in data store for example there are read options and you could say I would like my read to be um",
    "start": "3440920",
    "end": "3448200"
  },
  {
    "text": "read consistent eventually consistent or have a transaction um what if they add a fourth",
    "start": "3448200",
    "end": "3454640"
  },
  {
    "text": "one is that a breaking change or not like well if it's only something that",
    "start": "3454640",
    "end": "3460640"
  },
  {
    "text": "the client's going to give then it's fine to add stuff because if you don't know that the option exists it's not",
    "start": "3460640",
    "end": "3467000"
  },
  {
    "text": "going to hurt you if it's added if you're getting something back",
    "start": "3467000",
    "end": "3472079"
  },
  {
    "text": "then you might have a switch statement that will break if it doesn't see any of the options that it",
    "start": "3472079",
    "end": "3479039"
  },
  {
    "text": "expected in that particular case we've decided that the backward compatibility",
    "start": "3479039",
    "end": "3484280"
  },
  {
    "text": "requirements of making enums sort of a closed set is so limiting for API",
    "start": "3484280",
    "end": "3490240"
  },
  {
    "text": "producers that no you as clients should always understand that there might be",
    "start": "3490240",
    "end": "3496480"
  },
  {
    "text": "new values coming back deal with it it's kind of a pain but it's better than",
    "start": "3496480",
    "end": "3501599"
  },
  {
    "text": "stifling The Innovation on the on the server side there are other things things that obviously you know if",
    "start": "3501599",
    "end": "3507000"
  },
  {
    "text": "someone makes a typo in a field name and that's generated if if you had um MCS",
    "start": "3507000",
    "end": "3513559"
  },
  {
    "text": "instead of milliseconds well that's that until the next major version we're not going to break people just because we",
    "start": "3513559",
    "end": "3520160"
  },
  {
    "text": "made a",
    "start": "3520160",
    "end": "3522440"
  },
  {
    "text": "typo I mentioned inheritance um it may not be entirely obvious how inheritance",
    "start": "3526039",
    "end": "3532039"
  },
  {
    "text": "maps onto this versioning thing but one of the things you can do in",
    "start": "3532039",
    "end": "3538920"
  },
  {
    "text": "um uh in a version 1.1 of pubsub would be",
    "start": "3538920",
    "end": "3545319"
  },
  {
    "text": "which would still be so I I should go back google. pubsub dov1 would include",
    "start": "3545319",
    "end": "3550839"
  },
  {
    "text": "anything v1.1 v1.2 Etc until we get to V2 or V2 beta 1 or whatever um so it",
    "start": "3550839",
    "end": "3558680"
  },
  {
    "text": "we're aligning on major version numbers of the API so I've referred to publish a client and",
    "start": "3558680",
    "end": "3566240"
  },
  {
    "text": "subscribe a client various times sorry I haven't realized I hadn't switched away uh B",
    "start": "3566240",
    "end": "3574400"
  },
  {
    "text": "right initially we wanted to have I publish a client and then an",
    "start": "3575799",
    "end": "3581000"
  },
  {
    "text": "implementation of it yay I love interfaces they're great",
    "start": "3581000",
    "end": "3586160"
  },
  {
    "text": "uh they're mockable if you really want to mock or we could provide you some fakes all would be",
    "start": "3586160",
    "end": "3591720"
  },
  {
    "text": "good unfortunately it breaks so so suppose we have this I cool API client",
    "start": "3591720",
    "end": "3597760"
  },
  {
    "text": "with a look funky method and then version 1.1 adds a new method you can't",
    "start": "3597760",
    "end": "3604839"
  },
  {
    "text": "add methods to interfaces that's a breaking change because you you while we could provide you a fake you may have",
    "start": "3604839",
    "end": "3611760"
  },
  {
    "text": "written your own fake that implements the interface I don't want version",
    "start": "3611760",
    "end": "3617599"
  },
  {
    "text": "1.1 of my client library to cause your applications to fail to",
    "start": "3617599",
    "end": "3623000"
  },
  {
    "text": "compile so interface are out okay what about abstract classes then so we could",
    "start": "3623000",
    "end": "3629000"
  },
  {
    "text": "create an abstract class with the methods and that's still breaks BEC for",
    "start": "3629000",
    "end": "3634200"
  },
  {
    "text": "exactly the same reason if we add a new abstract method to a public class that is a breaking",
    "start": "3634200",
    "end": "3641799"
  },
  {
    "text": "change so the pattern that we have come up with and this is largely to do with",
    "start": "3641799",
    "end": "3646960"
  },
  {
    "text": "code gen Bas bear in mind that these are sort of examples of things that we're going to generate and we don't want to",
    "start": "3646960",
    "end": "3654079"
  },
  {
    "text": "have to look over every single change that's added to check that it's not breaking we need to design for",
    "start": "3654079",
    "end": "3660039"
  },
  {
    "text": "non-breaking in the code generation this is what we've ended up",
    "start": "3660039",
    "end": "3666359"
  },
  {
    "text": "with we have the base class which is what you will all talk to and that's",
    "start": "3667079",
    "end": "3673160"
  },
  {
    "text": "what you should fake and there are there's a static method on it to create",
    "start": "3673160",
    "end": "3679000"
  },
  {
    "text": "an instance and then there's the implementation",
    "start": "3679000",
    "end": "3685720"
  },
  {
    "text": "and the default behavior of any of these virtual methods everything's virtual and",
    "start": "3685720",
    "end": "3691680"
  },
  {
    "text": "it all throws an exception and then in the real implementation it doesn't you",
    "start": "3691680",
    "end": "3697200"
  },
  {
    "text": "may ask well why not just have the implementation class well because then you've got to have a grpc client and a",
    "start": "3697200",
    "end": "3703680"
  },
  {
    "text": "channel and all kinds of things that don't make sense for a fake so I'm not sure has anyone seen",
    "start": "3703680",
    "end": "3712079"
  },
  {
    "text": "this pattern before in other class libraries",
    "start": "3712079",
    "end": "3718440"
  },
  {
    "text": "no that is a concern to me I haven't either by the way this isn't that you're missing",
    "start": "3718440",
    "end": "3724079"
  },
  {
    "text": "something but when we've come up with a pattern that no one else has come up with before that's always a concern a it",
    "start": "3724079",
    "end": "3731079"
  },
  {
    "text": "means it's unfamiliar to you so I need to explain it and B it means maybe there's something that we've missed",
    "start": "3731079",
    "end": "3739039"
  },
  {
    "text": "um it may be too late to change this now if you think that this is a really bad idea we have thought about it quite hard",
    "start": "3739039",
    "end": "3746760"
  },
  {
    "text": "but um I would certainly rather know if you've got a better idea for something that um wouldn't end up breaking if we",
    "start": "3746760",
    "end": "3753440"
  },
  {
    "text": "add new methods um but is still testable fak where necessary that would be",
    "start": "3753440",
    "end": "3759520"
  },
  {
    "text": "great right I am now already three minutes over time uh I have I have more",
    "start": "3759520",
    "end": "3766240"
  },
  {
    "text": "stuff I would love to talk about uh I will take two minutes for questions now sort of wide open and then obviously",
    "start": "3766240",
    "end": "3772880"
  },
  {
    "text": "come and talk to me afterwards",
    "start": "3772880",
    "end": "3776359"
  },
  {
    "text": "yeah oh so for the paging why not use take and Skip um you can you can",
    "start": "3779720",
    "end": "3785559"
  },
  {
    "text": "absolutely use uh if you call list subscriptions and then say skip 50 then",
    "start": "3785559",
    "end": "3792640"
  },
  {
    "text": "we will make the API calls to fetch those 50 and then ignore them and then because it's just link so it's just an",
    "start": "3792640",
    "end": "3799119"
  },
  {
    "text": "inumerable it will all work but that makes RPC calls that you don't want um",
    "start": "3799119",
    "end": "3804880"
  },
  {
    "text": "if you if you've got to page a thousand and are getting the 10,000th subscription you don't want to",
    "start": "3804880",
    "end": "3811839"
  },
  {
    "text": "make all those API calls behind the scenes um I don't think it would be",
    "start": "3811839",
    "end": "3817400"
  },
  {
    "text": "quite hard for us to intercept Skip and take calls in order to do exactly the",
    "start": "3817400",
    "end": "3823000"
  },
  {
    "text": "right thing um and the raw RPC apis don't provide um numeric access you",
    "start": "3823000",
    "end": "3830760"
  },
  {
    "text": "can't say I want to skip to result 30 um um so we would have to work out",
    "start": "3830760",
    "end": "3836079"
  },
  {
    "text": "you we've got to have a page token um we are limited by what the rpcs provide and",
    "start": "3836079",
    "end": "3842680"
  },
  {
    "text": "there are there are good reasons to not provide numeric access um I think some apis do but yeah generally we don't any",
    "start": "3842680",
    "end": "3850839"
  },
  {
    "text": "other general questions nope do come and talk to me if either you want to see the rest of my",
    "start": "3850839",
    "end": "3856680"
  },
  {
    "text": "slides um or want to ask something that you didn't want to ask publicly thank you very",
    "start": "3856680",
    "end": "3862319"
  },
  {
    "text": "much",
    "start": "3863200",
    "end": "3866200"
  }
]