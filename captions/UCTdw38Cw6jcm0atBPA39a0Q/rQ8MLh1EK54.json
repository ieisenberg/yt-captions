[
  {
    "text": "all righty it is 20 past 10:00 on what apparently you all call a cold winter's",
    "start": "9950",
    "end": "16139"
  },
  {
    "text": "day I have no idea what is wrong with you people this is this is summer for me",
    "start": "16139",
    "end": "21710"
  },
  {
    "text": "although I was told that if I presented in shorts everyone would look at me stranger than they normally do because",
    "start": "21710",
    "end": "28230"
  },
  {
    "text": "of these shirts thank you all for coming my name is Barry dorans I am the",
    "start": "28230",
    "end": "33809"
  },
  {
    "text": "security PM for dotnet which is a generally very unhappy job this is my",
    "start": "33809",
    "end": "39420"
  },
  {
    "text": "fun presentation if you want actual technical content that's going to be on Friday so is the security p.m. it",
    "start": "39420",
    "end": "48360"
  },
  {
    "text": "basically means I get to lecture everybody in.net try and tell them how to do things properly hopefully they do",
    "start": "48360",
    "end": "54289"
  },
  {
    "text": "do things properly and then I have the unfortunate but the the unfortunate role",
    "start": "54289",
    "end": "62460"
  },
  {
    "text": "of trying to deal with things when everything goes wrong when security bugs are reported to us if you want to follow",
    "start": "62460",
    "end": "68550"
  },
  {
    "text": "me on Twitter I am at blow-dart there is even less technical content on my Twitter feed then I do in this",
    "start": "68550",
    "end": "75330"
  },
  {
    "text": "presentation so just be warned you can see a complete rant about Australia when I was jet-lagged on Thursday which",
    "start": "75330",
    "end": "81570"
  },
  {
    "text": "apparently some people find very funny so today I am going to go through four",
    "start": "81570",
    "end": "87479"
  },
  {
    "text": "nsrc bulletins nsrc is the Microsoft security Research Center and the code",
    "start": "87479",
    "end": "93210"
  },
  {
    "text": "mistakes that caused them and then I'm going to talk about a few things that we have caught in various pieces of dotnet",
    "start": "93210",
    "end": "99899"
  },
  {
    "text": "or in code that uses dotnet before they created an nsrc so the the rare cases",
    "start": "99899",
    "end": "107130"
  },
  {
    "text": "are actually doing my job right and these are going to be things that you may indeed be doing in your own software",
    "start": "107130",
    "end": "114360"
  },
  {
    "text": "right now and then I'm going to follow up with a couple of scary demos that our lawyers say I have to warn you about now",
    "start": "114360",
    "end": "121500"
  },
  {
    "text": "so if you are a nervous disposition you should leave I will warn you again before it happens so it takes a long",
    "start": "121500",
    "end": "131070"
  },
  {
    "text": "time for us to produce patches as I'm sure some of you are aware and you may be asking yourself why does it take such",
    "start": "131070",
    "end": "137970"
  },
  {
    "text": "a long time to produce patches sometimes it's because I'm spending a week in Australia",
    "start": "137970",
    "end": "143250"
  },
  {
    "text": "and I'm just not answering emails but generally what happens if someone will report a vulnerability to secure Microsoft comm an MS RC open a kiss in",
    "start": "143250",
    "end": "151470"
  },
  {
    "text": "their security database which is in dynamics anyone that has used dynamics will realize that this is completely",
    "start": "151470",
    "end": "157320"
  },
  {
    "text": "horrible and that does slow things down because the UI is awful but never mind I get an email from the product group",
    "start": "157320",
    "end": "164850"
  },
  {
    "text": "security rep in nsrc and they email the product group security rep for dotnet",
    "start": "164850",
    "end": "169920"
  },
  {
    "text": "which is me and only me which is why me doing conferences does delay things and so what I do is I look",
    "start": "169920",
    "end": "176820"
  },
  {
    "text": "at the vulnerability I look at the description hopefully the finder has produced some code that I can use to",
    "start": "176820",
    "end": "183840"
  },
  {
    "text": "reproduce the problem otherwise I have to try and remember to code again because when I move from being a",
    "start": "183840",
    "end": "188880"
  },
  {
    "text": "developer to a PM they basically cut the developer parts out of my brand",
    "start": "188880",
    "end": "193920"
  },
  {
    "text": "it's the scars have healed though so it's fine so I attempt to reproduce it and when it",
    "start": "193920",
    "end": "200070"
  },
  {
    "text": "reproduces I swear loudly I panic and then I go find the guilty developer and",
    "start": "200070",
    "end": "205410"
  },
  {
    "text": "stand over them and go what have you done so they then try to reproduce it",
    "start": "205410",
    "end": "211080"
  },
  {
    "text": "and then comes the first part of the lag we have to reproduce it against every",
    "start": "211080",
    "end": "217800"
  },
  {
    "text": "single supported operating system and software version of.net now when I say",
    "start": "217800",
    "end": "224100"
  },
  {
    "text": "every single operating system I don't just mean Windows 7 Windows 8 Windows 8.1 Windows 10 and server no I mean in",
    "start": "224100",
    "end": "231239"
  },
  {
    "text": "every single language that we support and again we have to try it against",
    "start": "231239",
    "end": "238290"
  },
  {
    "text": "every single version of.net on those languages so as you can imagine the test matrix for this is huge",
    "start": "238290",
    "end": "245310"
  },
  {
    "text": "I have a desktop that runs about 64 VMs and that is not enough so I have a bunch",
    "start": "245310",
    "end": "251400"
  },
  {
    "text": "of VM servers sitting there that have you know Australian English versus u.s. English because sometimes that does make",
    "start": "251400",
    "end": "257609"
  },
  {
    "text": "a difference so that reproduction can take honestly a week then the fix is",
    "start": "257609",
    "end": "262919"
  },
  {
    "text": "developed and that's the quick part developing the fix maybe takes a day to a week depending on how complicated it",
    "start": "262919",
    "end": "269160"
  },
  {
    "text": "is and then we go away and we look for variants of the same thing and that may add another week so two weeks to develop",
    "start": "269160",
    "end": "275220"
  },
  {
    "text": "the fix we test it we honestly do tests I know that some of the quality of the things",
    "start": "275220",
    "end": "280360"
  },
  {
    "text": "that come my over windows update might indicate that we don't but it is tested then I spend a day trying to write",
    "start": "280360",
    "end": "287949"
  },
  {
    "text": "instructions on how to update things which is easy for dotnet framework I'm really stupidly complicated for dotnet",
    "start": "287949",
    "end": "293199"
  },
  {
    "text": "core we then deploy defects internally to selected machines within the Redmond",
    "start": "293199",
    "end": "300220"
  },
  {
    "text": "Amman probably about ninety percent of workstations in the Redmond demand will get forcibly rebooted about three weeks",
    "start": "300220",
    "end": "306639"
  },
  {
    "text": "before Patch Tuesday just to make sure that nothing breaks and at the same time we will give the patch externally to two",
    "start": "306639",
    "end": "314229"
  },
  {
    "text": "or three victims or as they'd like to see themselves trusted partners to see whether we will break their stuff as",
    "start": "314229",
    "end": "320560"
  },
  {
    "text": "well and then finally on Patch Tuesday a button is pressed and everything",
    "start": "320560",
    "end": "325600"
  },
  {
    "text": "magically goes live because we had uploaded it the week before so that's",
    "start": "325600",
    "end": "331150"
  },
  {
    "text": "why it takes about six months I am going to go through four security bulletins",
    "start": "331150",
    "end": "337560"
  },
  {
    "text": "only one of which I am responsible for",
    "start": "337560",
    "end": "344070"
  },
  {
    "text": "the rest were before I joined the team although I'm not convinced I would have",
    "start": "344070",
    "end": "350680"
  },
  {
    "text": "caught them either so the first one we have is a glorious denial of service",
    "start": "350680",
    "end": "356590"
  },
  {
    "text": "attack through our hashing functions and dictionaries which was in 2011 and this",
    "start": "356590",
    "end": "363340"
  },
  {
    "text": "was hilarious this one got Scott Guthrie involved which is never good it is",
    "start": "363340",
    "end": "369099"
  },
  {
    "text": "caused by the way we calculated hashes in the.net dictionary classes and so",
    "start": "369099",
    "end": "375280"
  },
  {
    "text": "when you send a forum post or a simple get request to asp.net we will split",
    "start": "375280",
    "end": "381400"
  },
  {
    "text": "things apart we will take the the form input and we will use the title and that",
    "start": "381400",
    "end": "387729"
  },
  {
    "text": "will go into a hash table we will use the title of parameters and it will go into a hash table and the problem was",
    "start": "387729",
    "end": "393910"
  },
  {
    "text": "that the hashing function that we used was easily calculated so you could do hash collisions now I'm sure some of you",
    "start": "393910",
    "end": "402099"
  },
  {
    "text": "have gone into job interviews and I've been asked to write a hash table from scratch at which point I generally walk",
    "start": "402099",
    "end": "409450"
  },
  {
    "text": "out with the interviews cos if you're not gonna use the ones that are in the library seriously what is the point so for those",
    "start": "409450",
    "end": "415720"
  },
  {
    "text": "of you that haven't I'm gonna try and explain this using cats now I make this perfectly clear that I am a dog person how many people here are cat people you",
    "start": "415720",
    "end": "424150"
  },
  {
    "text": "are wrong so when you go on holiday you",
    "start": "424150",
    "end": "429850"
  },
  {
    "text": "cannot leave your cat in the house alone because cats are evil and they will destroy everything so you take your cat",
    "start": "429850",
    "end": "438550"
  },
  {
    "text": "- a cat vacation home and you go to the vacation home and go here is my cat",
    "start": "438550",
    "end": "444640"
  },
  {
    "text": "please store my cat for the week that I'm away and I will come back in a week and I will get my cat back and hopefully",
    "start": "444640",
    "end": "449710"
  },
  {
    "text": "it will be the same cat so there has to be a way of classifying and labeling the",
    "start": "449710",
    "end": "454780"
  },
  {
    "text": "cat's so you can make sure that you get the right one back again so I'm gonna give a simple example where the cat",
    "start": "454780",
    "end": "460450"
  },
  {
    "text": "holiday home has 26 rooms and if your cat's name is a it will go into the room",
    "start": "460450",
    "end": "466330"
  },
  {
    "text": "labeled a if your cat's name begins with B it will go into the room labeled B and so on and so forth we are taking the",
    "start": "466330",
    "end": "473170"
  },
  {
    "text": "name of the cat and we are hashing it to a common value so we know roughly where",
    "start": "473170",
    "end": "479740"
  },
  {
    "text": "in the home or in the hash table our cat is located so when we come back we can",
    "start": "479740",
    "end": "485620"
  },
  {
    "text": "get it quicker rather than just shoving everything in one room and having to go through every single cat when I want to",
    "start": "485620",
    "end": "493210"
  },
  {
    "text": "try and find a cat named Allan does that make sense yep okay we're good with that so far",
    "start": "493210",
    "end": "499990"
  },
  {
    "text": "this is them where I show my disgust with cats so an attacker comes along and",
    "start": "499990",
    "end": "505150"
  },
  {
    "text": "he has 756 cats in a bag and he says they're all named Allan and now you have",
    "start": "505150",
    "end": "511930"
  },
  {
    "text": "a problem because you're hashing function goes okay well I'm gonna take Allan and he's gonna be reduced to a and I need to put him in the a room so in a",
    "start": "511930",
    "end": "519580"
  },
  {
    "text": "room you shove 726 cats and you are",
    "start": "519580",
    "end": "525430"
  },
  {
    "text": "scratched and you are bitten and the room is very full and you have to push a tail in before you can close the door so",
    "start": "525430",
    "end": "533890"
  },
  {
    "text": "this causes problems because it takes a long time to shove all those cats into the a room and this illustrates our",
    "start": "533890",
    "end": "541690"
  },
  {
    "text": "denial attack because a hash collision spikes cpu so you can think of the amount of",
    "start": "541690",
    "end": "548279"
  },
  {
    "text": "time shoving your cats in as being equivalent to CPU time and then when the",
    "start": "548279",
    "end": "555540"
  },
  {
    "text": "attacker comes back and says hi I'd like Alan ight you have to go back into the a room which has 726 unhappy cats hissing",
    "start": "555540",
    "end": "563339"
  },
  {
    "text": "and spitting and scratching and you have to pick up each one and take it back and go is this Alan no okay put it back pick",
    "start": "563339",
    "end": "570720"
  },
  {
    "text": "up the next one and if you're unlucky you'll get it right the first time if you're unlucky you're gonna have to go through all 726 cats again spikes in CPU",
    "start": "570720",
    "end": "580790"
  },
  {
    "text": "so I can demonstrate this oh here is a",
    "start": "580790",
    "end": "586410"
  },
  {
    "text": "link well a description of the original paper which was in from the chaos communication congress which is a",
    "start": "586410",
    "end": "592050"
  },
  {
    "text": "horrible hackers conference that takes place over Christmas with no respect for",
    "start": "592050",
    "end": "597060"
  },
  {
    "text": "anyone's holiday so when things happen at that conference I generally get a",
    "start": "597060",
    "end": "602670"
  },
  {
    "text": "phone call when I am trying to stay upright on the ski slopes because I am NOT a very good skier but I still try",
    "start": "602670",
    "end": "608220"
  },
  {
    "text": "because the wife likes it so yes I've had to come down off the ski slopes for things from this conference this",
    "start": "608220",
    "end": "614190"
  },
  {
    "text": "conference originally it talks about PHP security vulnerabilities and PHP should",
    "start": "614190",
    "end": "620250"
  },
  {
    "text": "not be a shock to anyone Java Python and JavaScript the same for JavaScript",
    "start": "620250",
    "end": "625500"
  },
  {
    "text": "security problems in JavaScript should be well known by now and then someone decided that wasn't enough and they",
    "start": "625500",
    "end": "631529"
  },
  {
    "text": "decided they wanted to make me unhappy and they ported it to c-sharp and asp.net this is why I Qin smoke because",
    "start": "631529",
    "end": "638730"
  },
  {
    "text": "I want my pin to end so I got a demo this you will see my wonderful UI skills",
    "start": "638730",
    "end": "648360"
  },
  {
    "text": "with each of these demos so let's switch to the hash dos one and we will start it",
    "start": "648360",
    "end": "654779"
  },
  {
    "text": "and I'll show what we're doing here we are taking a string and we are going",
    "start": "654779",
    "end": "660149"
  },
  {
    "text": "to shove it into a dictionary which is a hash table and then we are taking another string and we're going to shove",
    "start": "660149",
    "end": "666029"
  },
  {
    "text": "it in but the other string is really stupid how many of you override get hash",
    "start": "666029",
    "end": "672779"
  },
  {
    "text": "code in some of your classes yeah I'm about to make you really unhappy so get hash code here returns a",
    "start": "672779",
    "end": "680750"
  },
  {
    "text": "fixed value because this is the dumbest string ever so if I run my little demo",
    "start": "680750",
    "end": "687370"
  },
  {
    "text": "and we can see my wonderful UI skills so as I was talking it had gone through",
    "start": "687370",
    "end": "693260"
  },
  {
    "text": "putting the the million strings into the hash table and it took that long and now instead of putting a string in we are",
    "start": "693260",
    "end": "700310"
  },
  {
    "text": "going to put our bad string in and if I leave this running this will run throughout the entirety of this talk and",
    "start": "700310",
    "end": "706190"
  },
  {
    "text": "beyond I used to present from a surface pro 3 and I could put my hand there and I",
    "start": "706190",
    "end": "711230"
  },
  {
    "text": "could feel everything get warm and you could hear the fan come on every time I did this so we fix this eventually and",
    "start": "711230",
    "end": "721340"
  },
  {
    "text": "what we did is we now use a randomized hash code for a string when a process",
    "start": "721340",
    "end": "728300"
  },
  {
    "text": "starts up we will set a random value just for that process and we will merge it into the hash for the string so you",
    "start": "728300",
    "end": "733760"
  },
  {
    "text": "cannot precompute because that seeding key is going to be random each time I",
    "start": "733760",
    "end": "738820"
  },
  {
    "text": "guarantee none of you who put your hands up saying yes I override get hash code or doing this are you I don't want to",
    "start": "738820",
    "end": "747170"
  },
  {
    "text": "say that they are oh good none of you're gonna like okay so if you have",
    "start": "747170",
    "end": "753620"
  },
  {
    "text": "overridden get hash code and you are constructing these classes solely from",
    "start": "753620",
    "end": "760100"
  },
  {
    "text": "user input and you're shoving them in a dictionary you have a problem and you need to do this randomization if you're",
    "start": "760100",
    "end": "766520"
  },
  {
    "text": "constructing them but not taking them from user input it doesn't matter so much",
    "start": "766520",
    "end": "772390"
  },
  {
    "text": "so the hashing algorithm that you should use is probably an authenticated Mac Shou on H Mac is the one that we use it",
    "start": "774250",
    "end": "782090"
  },
  {
    "text": "doesn't have to be particularly secure you don't have to go to char to five six or a 512 just as long as there's enough",
    "start": "782090",
    "end": "788150"
  },
  {
    "text": "randomization there that an attacker cannot pre compute so that is nsrc case",
    "start": "788150",
    "end": "794480"
  },
  {
    "text": "number one which was glorious number two",
    "start": "794480",
    "end": "800510"
  },
  {
    "text": "is a padding Oracle attack let me start off by saying encryption is hard",
    "start": "800510",
    "end": "805940"
  },
  {
    "text": "we have crypto people we have an entire crypto including people that write the own algorithms for fun and then get them",
    "start": "805940",
    "end": "813690"
  },
  {
    "text": "approved for use by pushing them out through the the cryptographic community",
    "start": "813690",
    "end": "818790"
  },
  {
    "text": "and frankly my meetings with those guys are never Pleasant because they will sit and they will pick holes in every",
    "start": "818790",
    "end": "825209"
  },
  {
    "text": "implementation or how we want to use things and then I have to go away and redo stuff and then come back a week",
    "start": "825209",
    "end": "830220"
  },
  {
    "text": "later and they pick more holes and so on and so forth the only time it's fun is when I'm sitting there but I'm not the",
    "start": "830220",
    "end": "836220"
  },
  {
    "text": "one with the use and I'm just sitting there in the audience going that could be me",
    "start": "836220",
    "end": "841370"
  },
  {
    "text": "so a padding Oracle attack we're not talking about the database here an",
    "start": "841370",
    "end": "847470"
  },
  {
    "text": "Oracle is something that gives information away in a cryptic form like",
    "start": "847470",
    "end": "855029"
  },
  {
    "text": "the Oracles at Delfy like ministers and priests anyone that wants to speak on",
    "start": "855029",
    "end": "862470"
  },
  {
    "text": "behalf of a higher power you will notice that the answers that they give never really are straightforward so appalling",
    "start": "862470",
    "end": "869399"
  },
  {
    "text": "Oracle in this case give away information that the padding on an",
    "start": "869399",
    "end": "874800"
  },
  {
    "text": "encrypted string was wrong so I should explain what padding is a lot of",
    "start": "874800",
    "end": "881300"
  },
  {
    "text": "encryption algorithms are block algorithms and what they do is they split things into blocks and so it takes",
    "start": "881300",
    "end": "888959"
  },
  {
    "text": "the first block of data encrypts that and then feasts the results into the second block and then the third block",
    "start": "888959",
    "end": "894959"
  },
  {
    "text": "and it goes like a little sine wave and the blocks have to all be of even size so if they're not the right size there",
    "start": "894959",
    "end": "901709"
  },
  {
    "text": "is always padding at the end and so what an encryption algorithm when it tries to decrypt first is it looks for padding at",
    "start": "901709",
    "end": "908009"
  },
  {
    "text": "the end and if the padding is wrong it stops and that operation is really",
    "start": "908009",
    "end": "913769"
  },
  {
    "text": "really quick in terms of time so you can detect that there is invalid padding",
    "start": "913769",
    "end": "919559"
  },
  {
    "text": "just by watching how quickly you get an error back and because you can detect",
    "start": "919559",
    "end": "926279"
  },
  {
    "text": "this what you can do is you can use this speedy return to start trying to craft",
    "start": "926279",
    "end": "932990"
  },
  {
    "text": "strings that will eventually be decrypted properly and so you take that",
    "start": "932990",
    "end": "939029"
  },
  {
    "text": "padding byte at the end and you tweak each individual bit and until you get no know the timings",
    "start": "939029",
    "end": "945739"
  },
  {
    "text": "slightly different so that bite must be right and what's what someone did was",
    "start": "945739",
    "end": "952279"
  },
  {
    "text": "they use this capability and they fed it into a file called script resource ax D",
    "start": "952279",
    "end": "957529"
  },
  {
    "text": "which was part of web forms how many of you are still using web forms how many",
    "start": "957529",
    "end": "963709"
  },
  {
    "text": "of you are still using web forms who are not in government banking or health yeah okay I am so sorry by the way really",
    "start": "963709",
    "end": "973279"
  },
  {
    "text": "just try and force them to move with the times so script resource that IX D was",
    "start": "973279",
    "end": "980660"
  },
  {
    "text": "supposed to be an asp net handler that would allow you to serve javascript out",
    "start": "980660",
    "end": "987410"
  },
  {
    "text": "of dll's where they were embedded as resources 'm fortunately it was a bit stupid and it would allow you to serve",
    "start": "987410",
    "end": "994189"
  },
  {
    "text": "any file whatsoever which didn't seem that bad because we were encrypting the",
    "start": "994189",
    "end": "999410"
  },
  {
    "text": "parameter that was sent to it using the machine key that's in your web configured a bunch of other stuff",
    "start": "999410",
    "end": "1005790"
  },
  {
    "text": "unfortunately it was just encrypting the right way to do encryption is you encrypt and then you sign and you in",
    "start": "1005790",
    "end": "1012759"
  },
  {
    "text": "sign with a authenticated mechanism that shall one edge Mac that I talked about",
    "start": "1012759",
    "end": "1018249"
  },
  {
    "text": "slightly earlier but we were not doing that so we exposed the Oracle because we",
    "start": "1018249",
    "end": "1024038"
  },
  {
    "text": "had no signature and we just took what we were given and shoved it straight into the decryption methods if we had",
    "start": "1024039",
    "end": "1030699"
  },
  {
    "text": "had a signature the first thing you do is you check the signature and you compute what has been sent to you in for",
    "start": "1030699",
    "end": "1037270"
  },
  {
    "text": "the signature does not match someone's tried to change it and you just reject it entirely and then you don't have a",
    "start": "1037270",
    "end": "1043659"
  },
  {
    "text": "padding Oracle attack so what this guy did was he attack script resource dot a XD and he managed to get it so he could",
    "start": "1043659",
    "end": "1051760"
  },
  {
    "text": "have the file path encrypted correctly for web config and so script resource 2",
    "start": "1051760",
    "end": "1059409"
  },
  {
    "text": "XD because of this padding article he could script the encrypted string for",
    "start": "1059409",
    "end": "1064419"
  },
  {
    "text": "web config without knowing the encryption keys just detecting this slight change and the change in speed",
    "start": "1064419",
    "end": "1070539"
  },
  {
    "text": "and he feeds that in script resource dot XD and lo and behold it served up your web config file",
    "start": "1070539",
    "end": "1076010"
  },
  {
    "text": "so that means all your connection strings that are in there including your usernames and passwords are now exposed",
    "start": "1076010",
    "end": "1081860"
  },
  {
    "text": "to the Internet and if that wasn't bad enough if you have set a machine key",
    "start": "1081860",
    "end": "1087220"
  },
  {
    "text": "well the machine key was used to encrypt not just the script resource to XD stuff",
    "start": "1087220",
    "end": "1094370"
  },
  {
    "text": "but it was used to encrypt viewstate and we'll talk about why that's bad in a minute but it's also used to provide the",
    "start": "1094370",
    "end": "1101270"
  },
  {
    "text": "protections for cookie authentication so once I've got your machine key I can pretend to be whoever I like in your",
    "start": "1101270",
    "end": "1108679"
  },
  {
    "text": "application because I can craft a valid authentication cookie for that user",
    "start": "1108679",
    "end": "1113900"
  },
  {
    "text": "because I know what key is being used this is a bit of a big deal so we fixed",
    "start": "1113900",
    "end": "1121010"
  },
  {
    "text": "it by finally doing the right thing and shoving a signature on the end of the parameter the ghost of script resource",
    "start": "1121010",
    "end": "1127160"
  },
  {
    "text": "to XD and we fixed it so it would only ever serve up JavaScript and no more web config just in case we messed up the",
    "start": "1127160",
    "end": "1133940"
  },
  {
    "text": "first half of the fix so this was originally presented as an attack on SSL",
    "start": "1133940",
    "end": "1142610"
  },
  {
    "text": "which is great and then someone made me really unhappy and expanded it out to",
    "start": "1142610",
    "end": "1149809"
  },
  {
    "text": "asp.net and you can go and look at their presentations and the the papers and the",
    "start": "1149809",
    "end": "1155330"
  },
  {
    "text": "very heavy mathematics behind this thing so the way to fix this is you just don't",
    "start": "1155330",
    "end": "1161030"
  },
  {
    "text": "expose any of these padding Oracle's and you add signatures to all of your encrypted data and I will keep saying",
    "start": "1161030",
    "end": "1167720"
  },
  {
    "text": "this again and again when you are encrypting encryption it's not enough you need to add an authenticated signature to your data sharepoint",
    "start": "1167720",
    "end": "1176290"
  },
  {
    "text": "sharepoint is the bane of my security life because they base themselves in asp.net and when they do something dumb",
    "start": "1176290",
    "end": "1181760"
  },
  {
    "text": "they blame us this was the dumbest thing I have ever",
    "start": "1181760",
    "end": "1187040"
  },
  {
    "text": "seen I love it when the SharePoint people watch recordings of these presentations because I get emails so",
    "start": "1187040",
    "end": "1193580"
  },
  {
    "text": "this was remote code execution via serialization those of you that are",
    "start": "1193580",
    "end": "1199160"
  },
  {
    "text": "still on web forms and those of you that have used web forms in the past will be aware that there is an enormous hidden",
    "start": "1199160",
    "end": "1205070"
  },
  {
    "text": "input field inside every single web forms page called viewstate and what you said is is",
    "start": "1205070",
    "end": "1216310"
  },
  {
    "text": "binary data that has been pushed through binary formatter or other types of",
    "start": "1216310",
    "end": "1223190"
  },
  {
    "text": "serialization and for matters that Holst it for a bunch of other things when we",
    "start": "1223190",
    "end": "1229280"
  },
  {
    "text": "read the page we deserialize that and we can't restrict it to individual objects because we don't know what you've put in",
    "start": "1229280",
    "end": "1235070"
  },
  {
    "text": "there so we DC realize it and say okay tell us what you are we'll create that object for you and then we'll populate",
    "start": "1235070",
    "end": "1241430"
  },
  {
    "text": "all the properties that you need to have that was an incredibly stupid idea to be",
    "start": "1241430",
    "end": "1249110"
  },
  {
    "text": "perfectly honest however we protected it by signing views there with a view step",
    "start": "1249110",
    "end": "1255530"
  },
  {
    "text": "Mac SharePoint in their infinite wisdom decided they did not want the performance hit of having view step max",
    "start": "1255530",
    "end": "1263630"
  },
  {
    "text": "turned on and they didn't want to have the complications of setting keys in web config so they turned it off and I can",
    "start": "1263630",
    "end": "1270860"
  },
  {
    "text": "demonstrate what happens when you turn this off so let's see if you stick so",
    "start": "1270860",
    "end": "1282020"
  },
  {
    "text": "the donor framework has a bunch of classes that are marked serializable that frankly should not have been and",
    "start": "1282020",
    "end": "1288620"
  },
  {
    "text": "one of my favorite ones is temp file collection which hides away inside code um and what temp file collection is used",
    "start": "1288620",
    "end": "1295010"
  },
  {
    "text": "for is when code um is compiling code it creates a bunch of temporary files in",
    "start": "1295010",
    "end": "1302090"
  },
  {
    "text": "your temp directory then spawns off the compiler rather than doing everything in",
    "start": "1302090",
    "end": "1307520"
  },
  {
    "text": "memory but that's what we have Roslyn for now and then it cleans itself up so it's a way of tracking all the temporary",
    "start": "1307520",
    "end": "1312680"
  },
  {
    "text": "files that it has created and the way it does that is there as a property for all",
    "start": "1312680",
    "end": "1317990"
  },
  {
    "text": "the temporary files and when that object gets disposed it goes and deletes all the temporary files which is great until",
    "start": "1317990",
    "end": "1326560"
  },
  {
    "text": "you say that one of my temporary file names is web.config and so what happens",
    "start": "1326560",
    "end": "1333050"
  },
  {
    "text": "is eventually when this object exists with web.config and its temporary file name and the garbage collector gets to",
    "start": "1333050",
    "end": "1339530"
  },
  {
    "text": "it it deletes web.config and your sharepoint psycho starting which let's",
    "start": "1339530",
    "end": "1345039"
  },
  {
    "text": "be honest is a blessing because it's sharepoint so here's what we're going to",
    "start": "1345039",
    "end": "1350350"
  },
  {
    "text": "do I'm going to create a temp file collection I'm going to add web configure to it and then I'm going to",
    "start": "1350350",
    "end": "1358059"
  },
  {
    "text": "just serialized that temp file collection and then I'm going to bring it back in again",
    "start": "1358059",
    "end": "1363759"
  },
  {
    "text": "and refused it just does a straightforward binary format or D serialization and then I'm gonna force",
    "start": "1363759",
    "end": "1370210"
  },
  {
    "text": "garbage collection which of course you never do in your own code but no one wants to wait 20 to 25 minutes for this",
    "start": "1370210",
    "end": "1375519"
  },
  {
    "text": "thing to actually work so let me bring up Explorer and you will see that there",
    "start": "1375519",
    "end": "1384639"
  },
  {
    "text": "are three files in here and I'm gonna hit start and it's gonna create a",
    "start": "1384639",
    "end": "1394539"
  },
  {
    "text": "temporary web config which is here and here is my view state and I'm gonna do",
    "start": "1394539",
    "end": "1401980"
  },
  {
    "text": "what view state does I am going to read it in deserialize stuff and then I'm",
    "start": "1401980",
    "end": "1408460"
  },
  {
    "text": "gonna force garbage collection and lo and behold my web config has vanished as it's my attack file because I like to",
    "start": "1408460",
    "end": "1414190"
  },
  {
    "text": "clean up after myself and your SharePoint site goes down",
    "start": "1414190",
    "end": "1420240"
  },
  {
    "text": "so we fix this by introducing the first",
    "start": "1424560",
    "end": "1430350"
  },
  {
    "text": "ever breaking change in asp.net for security which made me very happy when",
    "start": "1430350",
    "end": "1437460"
  },
  {
    "text": "you try and tell asp.net now that know you don't want view step Mac on your view stick we ignore you it's always",
    "start": "1437460",
    "end": "1444840"
  },
  {
    "text": "going to be there whether you like it or not so when SharePoint turns it off it doesn't matter it has no effect so we",
    "start": "1444840",
    "end": "1451380"
  },
  {
    "text": "will have this signature so we will know that the data that has been put interviews there and round-trip to run",
    "start": "1451380",
    "end": "1457980"
  },
  {
    "text": "tripped to the user and has come back again has not been tampered with so when",
    "start": "1457980",
    "end": "1464340"
  },
  {
    "text": "you run trip stuff to a user you need to sign it and you need to sign it with an authenticated signature because",
    "start": "1464340",
    "end": "1470610"
  },
  {
    "text": "otherwise someone can just compute you know a straightforward md5 appended on the end and it doesn't matter it has to",
    "start": "1470610",
    "end": "1476850"
  },
  {
    "text": "be authenticated you have to have a private key that feeds into your authentication mechanism",
    "start": "1476850",
    "end": "1484190"
  },
  {
    "text": "the other interesting thing to know is you should not publish your signing key I love github so much because I can",
    "start": "1487100",
    "end": "1495780"
  },
  {
    "text": "search for web config and look for machine keys that are fixed in web config after the viewstate stuff came up",
    "start": "1495780",
    "end": "1504980"
  },
  {
    "text": "someone expanded this to point out that it didn't really matter if we turned",
    "start": "1504980",
    "end": "1510540"
  },
  {
    "text": "everything on by default if you have published your signing key so lots and",
    "start": "1510540",
    "end": "1516030"
  },
  {
    "text": "lots of software delivered themselves with web config with fixed machine keys",
    "start": "1516030",
    "end": "1521370"
  },
  {
    "text": "so everyone's machine key no matter who they wear for this individual piece of",
    "start": "1521370",
    "end": "1526530"
  },
  {
    "text": "software was the same so we had six months of going around and telling people this was an incredibly bad idea",
    "start": "1526530",
    "end": "1532440"
  },
  {
    "text": "and they needed to remove it and we would demonstrate what the problem was and bring their websites down and then",
    "start": "1532440",
    "end": "1538050"
  },
  {
    "text": "they go oops and they'd have to redo everything and reissue stuff and it was a lovely cascading set of security",
    "start": "1538050",
    "end": "1545700"
  },
  {
    "text": "bulletins from various other manufacturers it's nice when I can share",
    "start": "1545700",
    "end": "1551430"
  },
  {
    "text": "the pin to be honest regular expressions",
    "start": "1551430",
    "end": "1556540"
  },
  {
    "text": "this one I was responsible for or at least for not catching how many of you use regular expressions in your everyday",
    "start": "1556540",
    "end": "1563920"
  },
  {
    "text": "code you are bad bad people how many of",
    "start": "1563920",
    "end": "1570580"
  },
  {
    "text": "you use regular expressions to validate user input you are even worse people",
    "start": "1570580",
    "end": "1578380"
  },
  {
    "text": "I despise regular expressions when we",
    "start": "1578380",
    "end": "1585010"
  },
  {
    "text": "redid everything for dotnet core I went on a crusade against regular expressions",
    "start": "1585010",
    "end": "1591700"
  },
  {
    "text": "and got every single one removed except for the one in routing where you can set",
    "start": "1591700",
    "end": "1597520"
  },
  {
    "text": "a regular expression for matching routing because we didn't want to drop the feature simple regular expressions",
    "start": "1597520",
    "end": "1605110"
  },
  {
    "text": "are fine well they're not fine because they're still really hard to read and understand but complicated regular",
    "start": "1605110",
    "end": "1612280"
  },
  {
    "text": "expressions that go backwards and forwards and backtrack and forward track they are basically a program and with",
    "start": "1612280",
    "end": "1621670"
  },
  {
    "text": "certain types of regular expressions you can send that program into an infinite loop and that's not something you want",
    "start": "1621670",
    "end": "1628930"
  },
  {
    "text": "to happen when you're validating data so you can guess what happened here we will",
    "start": "1628930",
    "end": "1636610"
  },
  {
    "text": "skip across to regular expressions",
    "start": "1636610",
    "end": "1640500"
  },
  {
    "text": "here we have an email address and I'm going to split it into a regular",
    "start": "1644990",
    "end": "1651170"
  },
  {
    "text": "expression that someone thought was a good idea to put in our data validation",
    "start": "1651170",
    "end": "1656600"
  },
  {
    "text": "classes we should probably look at the regular expression would would anyone",
    "start": "1656600",
    "end": "1664400"
  },
  {
    "text": "who said that they were using regular expressions for validating user input care to explain what this does let me",
    "start": "1664400",
    "end": "1677960"
  },
  {
    "text": "keep going still still well yeah okay",
    "start": "1677960",
    "end": "1689890"
  },
  {
    "text": "that's that's longer than the break between England winning the ashes each time so this is a bad regular expression",
    "start": "1689890",
    "end": "1698330"
  },
  {
    "text": "any of you have written something like this you need to be ashamed of yourself",
    "start": "1698330",
    "end": "1705190"
  },
  {
    "text": "so what I am going to do is I'm going to put a valid email in and then I'm gonna",
    "start": "1705190",
    "end": "1713240"
  },
  {
    "text": "put in an invalid email and you can guess where this is going by now testing",
    "start": "1713240",
    "end": "1723710"
  },
  {
    "text": "is good value testing against the bad value again like the hash code this will",
    "start": "1723710",
    "end": "1735230"
  },
  {
    "text": "pretty much run for the entirety of the presentation but unlike the hash code",
    "start": "1735230",
    "end": "1740300"
  },
  {
    "text": "which would eventually end this will not because I have sent the regular expression into an infinite loop this is",
    "start": "1740300",
    "end": "1747920"
  },
  {
    "text": "why regular expressions are bad because it is incredibly easy to write a regular expression that can do this but really",
    "start": "1747920",
    "end": "1755870"
  },
  {
    "text": "really hard to spot at least that's my excuse for not spotting it so this was",
    "start": "1755870",
    "end": "1765380"
  },
  {
    "text": "reported to us by someone that worked for Nitto which is really embarrassing",
    "start": "1765380",
    "end": "1770660"
  },
  {
    "text": "when you get an email from Widow I think it's Nate ODU and you're like it",
    "start": "1770660",
    "end": "1776960"
  },
  {
    "text": "starts with security vulnerability am I oh so that's that's not good so there",
    "start": "1776960",
    "end": "1784849"
  },
  {
    "text": "are ways to fix this find something other than regular expressions to validate your input yes it may take more",
    "start": "1784849",
    "end": "1793639"
  },
  {
    "text": "code but I guarantee you it will be more readable than something like that monstrosity if you feel you have to use",
    "start": "1793639",
    "end": "1802789"
  },
  {
    "text": "regular expressions because you're the only person in your company that understands them and it gives you job security which is the only reason for",
    "start": "1802789",
    "end": "1809899"
  },
  {
    "text": "using them you should set a time out on your regular expressions now dotnet is",
    "start": "1809899",
    "end": "1815599"
  },
  {
    "text": "dumb it does not set a time out by default and I cannot change that because",
    "start": "1815599",
    "end": "1821690"
  },
  {
    "text": "of backwards compatibility because every time I try and improve something that breaks backwards compatibility I",
    "start": "1821690",
    "end": "1827599"
  },
  {
    "text": "guarantee you that a large customer will shout at me and then management gets very upset I upset management enough",
    "start": "1827599",
    "end": "1835219"
  },
  {
    "text": "without having customers do it as well so you should go through all your time",
    "start": "1835219",
    "end": "1840469"
  },
  {
    "text": "are all your regular expressions and make sure there is a timeout that is work for all of you that raised your",
    "start": "1840469",
    "end": "1846440"
  },
  {
    "text": "hand earlier there is a shortcut if you are using the.net framework not dotnet",
    "start": "1846440",
    "end": "1852079"
  },
  {
    "text": "core but if you're using the.net framework you can set a default timeout for all your regular expressions by",
    "start": "1852079",
    "end": "1858199"
  },
  {
    "text": "using an abdomen setting up there this does not exist internet core because we",
    "start": "1858199",
    "end": "1863329"
  },
  {
    "text": "don't have abdomens because they were silly but you can set that the problem",
    "start": "1863329",
    "end": "1870289"
  },
  {
    "text": "being of course that some of your regular expressions may need to run slightly longer than others so you're",
    "start": "1870289",
    "end": "1875419"
  },
  {
    "text": "gonna have to go through and fix those and if you're going through and fixing those you should just set a timeout for each individual one anyway so we're",
    "start": "1875419",
    "end": "1885979"
  },
  {
    "text": "gonna move on to mistakes that we have seen putting user input into HTML is",
    "start": "1885979",
    "end": "1896629"
  },
  {
    "text": "easy we all know that we should call HTML and code right we're all anyone want to",
    "start": "1896629",
    "end": "1902869"
  },
  {
    "text": "admit to not calling HTML and code ever if you do want to admit to that could I have your website address as well the",
    "start": "1902869",
    "end": "1910729"
  },
  {
    "text": "problem comes when you to put user input into JavaScript into",
    "start": "1910729",
    "end": "1916230"
  },
  {
    "text": "an HTML page so this looks like it's doing the right thing because we are calling HTML and code but all Mouse out",
    "start": "1916230",
    "end": "1926150"
  },
  {
    "text": "the the pieces between the quotes and almost out is JavaScript so I'm HTML and coding but I should be",
    "start": "1926150",
    "end": "1934590"
  },
  {
    "text": "JavaScript encoding and we can't detect when you're inside JavaScript not even a",
    "start": "1934590",
    "end": "1939929"
  },
  {
    "text": "razor so really that should be JavaScript encode and then it should be",
    "start": "1939929",
    "end": "1946169"
  },
  {
    "text": "HTML encoded because you're pregnant into an HTML page and if you get the",
    "start": "1946169",
    "end": "1951539"
  },
  {
    "text": "order wrong well then the encoding can fail miserably and you either get JavaScript errors or worse you get XSS",
    "start": "1951539",
    "end": "1957690"
  },
  {
    "text": "because you haven't got them in the right order so encoding is contact specific you have to use the right",
    "start": "1957690",
    "end": "1963360"
  },
  {
    "text": "encoding method depending on when you are putting data and so if you want to take user input and put it into",
    "start": "1963360",
    "end": "1968760"
  },
  {
    "text": "JavaScript do this instead have a div tag have a bunch of data parameters on it and shove the value into the data",
    "start": "1968760",
    "end": "1977730"
  },
  {
    "text": "parameter now immediately this gives you a little more work because you have to write some JavaScript to pull that out",
    "start": "1977730",
    "end": "1983940"
  },
  {
    "text": "before you can then use it elsewhere but this is the safe way to do it URL abuse",
    "start": "1983940",
    "end": "1992340"
  },
  {
    "text": "I like this one so I I call this rest",
    "start": "1992340",
    "end": "1998130"
  },
  {
    "text": "abuse because I like annoying everyone that gets religious about what rest is and that's a lot of people but you can",
    "start": "1998130",
    "end": "2006020"
  },
  {
    "text": "imagine that you have a site that has a user administration page and because you're trying to have pretty URLs and",
    "start": "2006020",
    "end": "2011929"
  },
  {
    "text": "beer estephe ID you can hit a delete URL which is great and you can struck the",
    "start": "2011929",
    "end": "2019490"
  },
  {
    "text": "delete URL like that so if I create a",
    "start": "2019490",
    "end": "2024590"
  },
  {
    "text": "username with dot slash admin what happens is when the browser gets that URL it knows there's a dot slash and it",
    "start": "2024590",
    "end": "2031400"
  },
  {
    "text": "knows it has to never get up so it removes it before it sends it dying so now I'm ending up actually deleting my",
    "start": "2031400",
    "end": "2038539"
  },
  {
    "text": "admin user which is nice if you were constructing URLs some user input only",
    "start": "2038539",
    "end": "2044360"
  },
  {
    "text": "do it for the Roman character set anything that is",
    "start": "2044360",
    "end": "2049580"
  },
  {
    "text": "going to be fancy anything that has weird characters or exclamation marks or",
    "start": "2049580",
    "end": "2055070"
  },
  {
    "text": "any sort of punctuation or accented letters or Russian or Japanese or",
    "start": "2055070",
    "end": "2061669"
  },
  {
    "text": "whatever stick it in the query string I know people like having fancy URLs but",
    "start": "2061670",
    "end": "2067429"
  },
  {
    "text": "fancy URLs are sometimes not safe anyone Turkish in the room I've had",
    "start": "2067430",
    "end": "2075590"
  },
  {
    "text": "someone say yes to this once so what",
    "start": "2075590",
    "end": "2081950"
  },
  {
    "text": "would we like to guess that little snippet of code does there are only two answers so come on someone can check out",
    "start": "2081950",
    "end": "2089389"
  },
  {
    "text": "something you're not european europeans do not interact especially Scandinavians",
    "start": "2089390",
    "end": "2094550"
  },
  {
    "text": "in presentations someone chart out your false false in Turkey well done because",
    "start": "2094550",
    "end": "2100910"
  },
  {
    "text": "I mentioned Turkey I'm what then is it in Australia true well it's true but it's upside died",
    "start": "2100910",
    "end": "2107500"
  },
  {
    "text": "okay so people make security decisions based on string comparisons and let's prove this you see Turkey is a very",
    "start": "2107500",
    "end": "2114080"
  },
  {
    "text": "strange language it has multiple ways of doing an uppercase will you stop there",
    "start": "2114080",
    "end": "2121490"
  },
  {
    "text": "we go look denial of service attack on myself said a startup code so I am just",
    "start": "2121490",
    "end": "2136460"
  },
  {
    "text": "going to do a compare an a nice waste of Turkish and as you can imagine because all my demos end up doing the right",
    "start": "2136460",
    "end": "2142460"
  },
  {
    "text": "thing first and then something that goes horribly wrong they're equal and then",
    "start": "2142460",
    "end": "2147620"
  },
  {
    "text": "they're not because Turkey has three different ways of up or kissing the eye which has actually caused murders not",
    "start": "2147620",
    "end": "2155660"
  },
  {
    "text": "kidding that the person actually said yes I am Turkish then went on to describe this to me where there are",
    "start": "2155660",
    "end": "2162980"
  },
  {
    "text": "certain words in Turkish where the change of the capital letter I changes",
    "start": "2162980",
    "end": "2168800"
  },
  {
    "text": "from a compliment to an insult and someone had texted his",
    "start": "2168800",
    "end": "2174110"
  },
  {
    "text": "girlfriend's brother to say something nice about his sister and it used the",
    "start": "2174110",
    "end": "2179530"
  },
  {
    "text": "I and the brother seriously got upset and stabbed the sender Soho yeah",
    "start": "2179530",
    "end": "2187620"
  },
  {
    "text": "globalization is complicated and you're gonna get stabbed so when you're doing string comparisons always compare using",
    "start": "2187620",
    "end": "2194380"
  },
  {
    "text": "ordinal ignore kiss because that will get away from all the globalization and",
    "start": "2194380",
    "end": "2199810"
  },
  {
    "text": "just use very simple upper case things so you know interesting and interesting would be equal my name if you turn on",
    "start": "2199810",
    "end": "2208210"
  },
  {
    "text": "your code analysis rules in Visual Studio pretty sure at least fifty",
    "start": "2208210",
    "end": "2215590"
  },
  {
    "text": "percent with people at risk our hands are lying because my god they're annoying I know that people turn them",
    "start": "2215590",
    "end": "2220870"
  },
  {
    "text": "off because they're very annoying but there is a specific code analysis rule for this so I would suggest to you that",
    "start": "2220870",
    "end": "2227170"
  },
  {
    "text": "you turn on CA one 309 recompile absolutely everything and then put your",
    "start": "2227170",
    "end": "2233170"
  },
  {
    "text": "head in your hands because you've done lots of string comparisons that aren't using ordinal ignore case and then go",
    "start": "2233170",
    "end": "2240970"
  },
  {
    "text": "and fix them once you stop solving Unicode I had this one emailed to me",
    "start": "2240970",
    "end": "2251080"
  },
  {
    "text": "from one of our developers of Microsoft IT Unicode has this weird thing called",
    "start": "2251080",
    "end": "2258490"
  },
  {
    "text": "full-width characters or as I like to call them American characters because know that I live there I'm getting a lot",
    "start": "2258490",
    "end": "2265270"
  },
  {
    "text": "more full-width so I know it's a little bit hard to see but on the left hand",
    "start": "2265270",
    "end": "2271240"
  },
  {
    "text": "side we have a normal less than and on the right hand side we have a full-width less than that is bigger and wider that",
    "start": "2271240",
    "end": "2279010"
  },
  {
    "text": "actually is two Unicode code points because you don't have characters in",
    "start": "2279010",
    "end": "2284170"
  },
  {
    "text": "Unicode you have code points browsers will ignore it so this script which is written in full width will not execute",
    "start": "2284170",
    "end": "2290440"
  },
  {
    "text": "as JavaScript however yri people were doing was they were storing this input",
    "start": "2290440",
    "end": "2297910"
  },
  {
    "text": "in a bar chart field in sequel not an N varchar' feel like anyone sensible but a",
    "start": "2297910",
    "end": "2303700"
  },
  {
    "text": "varchar' field and sequel rather than say i'm going to lose some information here and stop it decides to be really",
    "start": "2303700",
    "end": "2311830"
  },
  {
    "text": "helpful and it took those white characters and switched them to their skinny characters so someone",
    "start": "2311830",
    "end": "2318890"
  },
  {
    "text": "could do a white character script sequel woods convert it you would not have persisted XSS within your database so",
    "start": "2318890",
    "end": "2326599"
  },
  {
    "text": "don't use Unicode columns our non Unicode columns to store Unicode characters I don't trust anything that",
    "start": "2326599",
    "end": "2334130"
  },
  {
    "text": "comes from a database look I know you may feel the DNA base is underneath you there is um under your control you still",
    "start": "2334130",
    "end": "2341479"
  },
  {
    "text": "shouldn't trust it because it may not be someone could have inserted things into your database that you are not expecting",
    "start": "2341479",
    "end": "2347719"
  },
  {
    "text": "it to be their crypto mistakes this is",
    "start": "2347719",
    "end": "2354710"
  },
  {
    "text": "from an email that I was sent which now everyone does because they think it's",
    "start": "2354710",
    "end": "2360529"
  },
  {
    "text": "funny because I got absolutely furious I get furious a lot this was from a p.m.",
    "start": "2360529",
    "end": "2367369"
  },
  {
    "text": "on an azure product team who will rename that the team will remain nameless only",
    "start": "2367369",
    "end": "2374150"
  },
  {
    "text": "because their developers followed up three seconds later went no that's not right this is how we encrypt it so",
    "start": "2374150",
    "end": "2381170"
  },
  {
    "text": "people make mistakes between encoding and encryption people also do this that",
    "start": "2381170",
    "end": "2387979"
  },
  {
    "text": "interesting was the same as your team about six months later in a different developer that product was fun",
    "start": "2387979",
    "end": "2398048"
  },
  {
    "text": "people reused their keys far too often and they were reuse their initialization",
    "start": "2398769",
    "end": "2403849"
  },
  {
    "text": "vectors so you know I was talking to how blocks work with the little sine wave if we take the first we split everything",
    "start": "2403849",
    "end": "2410390"
  },
  {
    "text": "into little blocks we take the result of the first encryption of the block and feed it into the second one which is",
    "start": "2410390",
    "end": "2416059"
  },
  {
    "text": "then a seed in that waves like that but there's kind of something missing is what feeds into the first block because",
    "start": "2416059",
    "end": "2422719"
  },
  {
    "text": "there's nothing before that and what feeds into the first block is called an IV or initialization vector and it is a",
    "start": "2422719",
    "end": "2427729"
  },
  {
    "text": "bunch of cryptographically secure random data which means don't use the random",
    "start": "2427729",
    "end": "2432799"
  },
  {
    "text": "class use the ones and systems or cryptography but people reuse this you shouldn't reuse it it needs to be unique",
    "start": "2432799",
    "end": "2439809"
  },
  {
    "text": "for every single value that you are encrypting in much the same way like if",
    "start": "2439809",
    "end": "2446660"
  },
  {
    "text": "you are hashing you need to use a unique salt each time so people reuse their IVs and",
    "start": "2446660",
    "end": "2453180"
  },
  {
    "text": "that's a huge no-no and people reuse their keys for different things it's like well I have one master encryption",
    "start": "2453180",
    "end": "2459420"
  },
  {
    "text": "key I don't want to manage having 37 so I'm just gonna use the same key for absolutely everything which is also a",
    "start": "2459420",
    "end": "2466230"
  },
  {
    "text": "bad idea what we do in asp.net is we have a master key and then we have this thing called purposes so going back to",
    "start": "2466230",
    "end": "2473250"
  },
  {
    "text": "web forms we used the key in web config for signing your authentication cookie",
    "start": "2473250",
    "end": "2479940"
  },
  {
    "text": "and for signing viewstate but what we did was we took our master key and then we added a purpose to it and we derived",
    "start": "2479940",
    "end": "2485339"
  },
  {
    "text": "a key from the master key in the purpose so the keys would actually be different depending on what they were going to be",
    "start": "2485339",
    "end": "2490530"
  },
  {
    "text": "used for so don't reuse keys and like",
    "start": "2490530",
    "end": "2495570"
  },
  {
    "text": "I've said encrypted did it needs to be signed with a message authentication checks if you're gonna concatenate",
    "start": "2495570",
    "end": "2502500"
  },
  {
    "text": "strings and encrypt them stick the length in because otherwise while built-in and securely is equal to",
    "start": "2502500",
    "end": "2509670"
  },
  {
    "text": "built-in securely if you can kinda get the two together you're never gonna be able to tell a difference so if your",
    "start": "2509670",
    "end": "2515040"
  },
  {
    "text": "concatenate put the length thing and if you're validating signatures never",
    "start": "2515040",
    "end": "2520109"
  },
  {
    "text": "validate by hostname alone we all have certain in our browsers now even an edge and I believe in IE you should be",
    "start": "2520109",
    "end": "2528450"
  },
  {
    "text": "looking at the issuer of the certificate and in the sample code for this I have a",
    "start": "2528450",
    "end": "2533940"
  },
  {
    "text": "little console app that will take a certificate and calculate the spki which",
    "start": "2533940",
    "end": "2540390"
  },
  {
    "text": "is what generally people pin on so you can see the code to do this in your own code hash comparison should be tank",
    "start": "2540390",
    "end": "2548910"
  },
  {
    "text": "assistance and when you are comparing things that are hashed you don't want to exit early just because something",
    "start": "2548910",
    "end": "2555960"
  },
  {
    "text": "doesn't match because now we're getting into timing Oracle's not just patting Oracle's there are timing articles so",
    "start": "2555960",
    "end": "2561420"
  },
  {
    "text": "that is a correct way to do hash comparisons honestly you don't need to take photographs of all of this the",
    "start": "2561420",
    "end": "2566880"
  },
  {
    "text": "presentation will be on my website in about 30 minutes if I can get the darn Wi-Fi to work which is really hard here",
    "start": "2566880",
    "end": "2574970"
  },
  {
    "text": "mass assignment MVC and web api use binders and binders take the input that",
    "start": "2574970",
    "end": "2580050"
  },
  {
    "text": "is coming in and quest and bind it to an individual object for heaven's sake use view models",
    "start": "2580050",
    "end": "2586230"
  },
  {
    "text": "because if there is a property that you which is on your class an entity frame",
    "start": "2586230",
    "end": "2592600"
  },
  {
    "text": "where classes are great for this even though there's not an input field on your HTML page if I know what that",
    "start": "2592600",
    "end": "2599140"
  },
  {
    "text": "property is an ID is usually a good one or owner I can just insert a hidden form",
    "start": "2599140",
    "end": "2605050"
  },
  {
    "text": "field of ID or owner and the binder for MVC will bind to it even though you've",
    "start": "2605050",
    "end": "2611410"
  },
  {
    "text": "not got it as a displayed input form so you use view models use something like",
    "start": "2611410",
    "end": "2616480"
  },
  {
    "text": "Auto mapper to copy your properties over between your view models and your actual entities if you don't want to do that",
    "start": "2616480",
    "end": "2622660"
  },
  {
    "text": "and you should if you want to be Lizzie you can use bind include so you can say",
    "start": "2622660",
    "end": "2628450"
  },
  {
    "text": "that I only ever want to bind to these properties on my model don't use bind or exclude because I will",
    "start": "2628450",
    "end": "2636280"
  },
  {
    "text": "tell you why how many of you trust your co-workers yeah no one all right see",
    "start": "2636280",
    "end": "2642820"
  },
  {
    "text": "that's that's right if you use bind or exclude and you say okay so I know which things in this class are unsafe to bind",
    "start": "2642820",
    "end": "2649510"
  },
  {
    "text": "to and your coworker comes along and adds a new field and you don't know about it and they haven't updated banged",
    "start": "2649510",
    "end": "2656110"
  },
  {
    "text": "or exclude well then you're buying dot screwed so always use safe lists use",
    "start": "2656110",
    "end": "2665380"
  },
  {
    "text": "include path transversal if you how many",
    "start": "2665380",
    "end": "2672130"
  },
  {
    "text": "of you are accepting uploads in your websites yeah I'm gonna make all of you",
    "start": "2672130",
    "end": "2677350"
  },
  {
    "text": "unhappy you don't ever believe the file name that comes through of course I'm not",
    "start": "2677350",
    "end": "2683140"
  },
  {
    "text": "even gonna ask even though that the RFC says that you should only ever get a file name that does not have pass well",
    "start": "2683140",
    "end": "2689080"
  },
  {
    "text": "you can just ignore that and use something like fiddler to send dot slash dot dot slash dot dot slash and the path",
    "start": "2689080",
    "end": "2695530"
  },
  {
    "text": "name so if you believe that you're the mess how many of you who are accepting",
    "start": "2695530",
    "end": "2701110"
  },
  {
    "text": "file uploads are accepting zips and unzips yeah so",
    "start": "2701110",
    "end": "2707800"
  },
  {
    "text": "I have something for you guys to do against your development environment not",
    "start": "2707800",
    "end": "2714760"
  },
  {
    "text": "your life environment I want you to go back search the internet for 42 dots if",
    "start": "2714760",
    "end": "2721410"
  },
  {
    "text": "turn off your antivirus which I never recommend normally and download it",
    "start": "2721410",
    "end": "2726640"
  },
  {
    "text": "because it will upset your antivirus well $42 is is a 42 case it file and",
    "start": "2726640",
    "end": "2732880"
  },
  {
    "text": "because zip files are recursive it expands into 4.5 petabytes of data so",
    "start": "2732880",
    "end": "2741730"
  },
  {
    "text": "you to that put your hands up really need to think about different ways to",
    "start": "2741730",
    "end": "2746890"
  },
  {
    "text": "unzip the way we do it in Azure and the way that we do it and you get as we have",
    "start": "2746890",
    "end": "2752020"
  },
  {
    "text": "detonation chambers we spin up VMs specifically for unzipping we copy the zip file into it we tell the VM to unzip",
    "start": "2752020",
    "end": "2758770"
  },
  {
    "text": "it and if it hasn't done it after five seconds we just throw the damn thing away because it's just not trustable now",
    "start": "2758770",
    "end": "2764110"
  },
  {
    "text": "okay you may laugh at those two that we're accepting zip files how many of you are accepting XML files because it",
    "start": "2764110",
    "end": "2769750"
  },
  {
    "text": "has exactly the same problem this is ten entities which are defined of tenancies",
    "start": "2769750",
    "end": "2776410"
  },
  {
    "text": "of the previous NT and so on and so forth this when you parse XML will turn",
    "start": "2776410",
    "end": "2781570"
  },
  {
    "text": "into 1 billion entities that contained lol this is preventable by turning off",
    "start": "2781570",
    "end": "2789700"
  },
  {
    "text": "DTD parsing so you should do that when you're parsing XML so great you're gonna",
    "start": "2789700",
    "end": "2795010"
  },
  {
    "text": "run through cuz I only have a couple more minutes now like I said I can't break as many things as I want because",
    "start": "2795010",
    "end": "2802300"
  },
  {
    "text": "of back compatibility and the same people that are on web forms probably have employers that would be upset if I",
    "start": "2802300",
    "end": "2808420"
  },
  {
    "text": "broke things due to security so with each version of the.net framework we add",
    "start": "2808420",
    "end": "2816010"
  },
  {
    "text": "more security in and we fix stuff but a lot of these things are what we call",
    "start": "2816010",
    "end": "2821380"
  },
  {
    "text": "quirks and you have to opt in to using them so for example we added a bunch of stuff in Internet 4.5 but you have to",
    "start": "2821380",
    "end": "2829390"
  },
  {
    "text": "move the framework that you are targeting to 4.5 to get them and it's",
    "start": "2829390",
    "end": "2835480"
  },
  {
    "text": "same for 4.5 point one four point five point two and so on and so forth so when we release a new framework",
    "start": "2835480",
    "end": "2841609"
  },
  {
    "text": "either update your targeting framework or change your compatibility mode and",
    "start": "2841609",
    "end": "2847039"
  },
  {
    "text": "that will opt you in to all the latest offenses that we have added which includes string string hash code",
    "start": "2847039",
    "end": "2853999"
  },
  {
    "text": "randomization despite us saying in all our documentation that hash codes may be different from one run to the next some",
    "start": "2853999",
    "end": "2862009"
  },
  {
    "text": "people do not read our documentation especially things where we say don't do this it's dangerous and so we can't turn",
    "start": "2862009",
    "end": "2868730"
  },
  {
    "text": "that one on by default but all of you should go back and turn on that runtime",
    "start": "2868730",
    "end": "2874789"
  },
  {
    "text": "switch for the.net framework in dotnet core because I could break things",
    "start": "2874789",
    "end": "2880309"
  },
  {
    "text": "because we were breaking the world with on that core this is owned by default and you can't turn it off so haha stated",
    "start": "2880309",
    "end": "2888739"
  },
  {
    "text": "protection um asp.net for had machine",
    "start": "2888739",
    "end": "2893749"
  },
  {
    "text": "key to encode a machine key decode which were silly they would actually allow you to do encryption without signing which",
    "start": "2893749",
    "end": "2899269"
  },
  {
    "text": "is why SharePoint go in such a state so we've replaced those with machine keys don't protect some machine key to UM",
    "start": "2899269",
    "end": "2905420"
  },
  {
    "text": "protect so you should use those to run trip data to user space and validate it when it comes back and don't Annette",
    "start": "2905420",
    "end": "2911239"
  },
  {
    "text": "core we have a data protector which replaces everything you don't have machine key anymore you have a keyring",
    "start": "2911239",
    "end": "2916910"
  },
  {
    "text": "that you can store in various places be it sequel be at this local file system be at Redis via a jerk evil I like as",
    "start": "2916910",
    "end": "2923119"
  },
  {
    "text": "your key vote for these things how many of you have encountered partial trust in",
    "start": "2923119",
    "end": "2931069"
  },
  {
    "text": "your websites not if you oh okay I can skipper for that it doesn't work we",
    "start": "2931069",
    "end": "2937249"
  },
  {
    "text": "killed that five or six years ago and again no one reads the documentation but",
    "start": "2937249",
    "end": "2942829"
  },
  {
    "text": "what it was doing it was supposed to remove certain types of permissions so",
    "start": "2942829",
    "end": "2948079"
  },
  {
    "text": "people would say okay go run this website in medium trust because I don't trust some of the code and that's not gonna be able to start a process or go",
    "start": "2948079",
    "end": "2955249"
  },
  {
    "text": "wandering around the internet on its own it is broken it is not getting fixed it is not",
    "start": "2955249",
    "end": "2960319"
  },
  {
    "text": "internet core request validation should be part of defense-in-depth that should never be what you solely rely on and",
    "start": "2960319",
    "end": "2968119"
  },
  {
    "text": "again we throw it away and down that court because it's kind of broken and we can't fix it",
    "start": "2968119",
    "end": "2973930"
  },
  {
    "text": "so I can show you breaking partial trust because this is funny and hopefully it",
    "start": "2976420",
    "end": "2984560"
  },
  {
    "text": "gets the the point home because I'm sure some of you know someone who does this so here we have a good old web forms app",
    "start": "2984560",
    "end": "2994040"
  },
  {
    "text": "because they're really easy to demo with and I'm going to do process that start and try and pop a Comanche and then I'm",
    "start": "2994040",
    "end": "3002920"
  },
  {
    "text": "going to do it in another way so partial Trust is set up in your web config and here we go the trust level is",
    "start": "3002920",
    "end": "3011350"
  },
  {
    "text": "medium and that should not allow me to start a process so I hit launch a shell",
    "start": "3011350",
    "end": "3021940"
  },
  {
    "text": "and I get a security exception from partial trust if I go you know do it",
    "start": "3021940",
    "end": "3029110"
  },
  {
    "text": "then we have problems partial trust was a great idea however it was implemented in the wrong place",
    "start": "3029110",
    "end": "3035290"
  },
  {
    "text": "permissions should frankly be enforced by the operating system which is why containers are good all right let's stop",
    "start": "3035290",
    "end": "3042160"
  },
  {
    "text": "that okay so I have one last demo it's",
    "start": "3042160",
    "end": "3049840"
  },
  {
    "text": "not bad enough that you can delete files via serialization this demo is taken",
    "start": "3049840",
    "end": "3055330"
  },
  {
    "text": "from a presentation at blackhat this year which is the security conference to go to which is full of the grit and unwashed",
    "start": "3055330",
    "end": "3062020"
  },
  {
    "text": "I'm not even kidding it's literally unwashed people sometimes you can find it on YouTube by searching",
    "start": "3062020",
    "end": "3069340"
  },
  {
    "text": "for Friday the 13th juice and attacks it",
    "start": "3069340",
    "end": "3075270"
  },
  {
    "text": "even mentions just and done that the owner is nodding I told you to remove",
    "start": "3075270",
    "end": "3082510"
  },
  {
    "text": "that switch but they did point out that I will be fair Jason dotnet is secured by default you just have to set an",
    "start": "3082510",
    "end": "3089800"
  },
  {
    "text": "option that basically says I'm throwing caution to the wind and if you do that it's your own fault so I I warn you that",
    "start": "3089800",
    "end": "3097990"
  },
  {
    "text": "this is not going to be pretty okay and I because I've warned you I do not want",
    "start": "3097990",
    "end": "3104380"
  },
  {
    "text": "to see any red things in the bowl just because this",
    "start": "3104380",
    "end": "3109770"
  },
  {
    "text": "demo has upset you okay so normally what I do in a country that has decent",
    "start": "3109770",
    "end": "3116010"
  },
  {
    "text": "internet is this talks to the internet cannot do that here so I spent last",
    "start": "3116010",
    "end": "3121770"
  },
  {
    "text": "night basically spending 15 minutes downloading a single image and then",
    "start": "3121770",
    "end": "3127710"
  },
  {
    "text": "running it on a little host web server so I'm gonna start my little web server",
    "start": "3127710",
    "end": "3132930"
  },
  {
    "text": "up but you know in a country with decent internet this would talk to an untrusted",
    "start": "3132930",
    "end": "3139290"
  },
  {
    "text": "web site all this is doing is it's gonna serve up some code nothing very exciting",
    "start": "3139290",
    "end": "3145940"
  },
  {
    "text": "alright so we'll just minimize that and",
    "start": "3145940",
    "end": "3152240"
  },
  {
    "text": "then we have serialization exploit demo",
    "start": "3152240",
    "end": "3159530"
  },
  {
    "text": "binary formatter is bad in all seriousness go through your code",
    "start": "3160010",
    "end": "3166200"
  },
  {
    "text": "and look for instances of binary for matter and then rethink and regret your",
    "start": "3166200",
    "end": "3171630"
  },
  {
    "text": "decisions because I see this far too often binary formatter and Jason formatting if you have turned on the",
    "start": "3171630",
    "end": "3177690"
  },
  {
    "text": "really silly unsafe option what they do is they include information on what of",
    "start": "3177690",
    "end": "3183690"
  },
  {
    "text": "what an object is and then the data so like I said with the temp file",
    "start": "3183690",
    "end": "3188910"
  },
  {
    "text": "collection I can say what type of object you're going to deserialize into so here",
    "start": "3188910",
    "end": "3195000"
  },
  {
    "text": "we have a payload file and I have a file stream and I'm basically just going to",
    "start": "3195000",
    "end": "3201600"
  },
  {
    "text": "deserialize it so let's debug this start",
    "start": "3201600",
    "end": "3211380"
  },
  {
    "text": "new instance so one web server is running look no hands powershell started",
    "start": "3211380",
    "end": "3217290"
  },
  {
    "text": "it's doing oh my god that's horrible i tried to think of the most shocking",
    "start": "3217290",
    "end": "3224490"
  },
  {
    "text": "and disgusting thing for an australian audience and that was either this or a link to the BBC article that proves that",
    "start": "3224490",
    "end": "3231750"
  },
  {
    "text": "pavlova comes from new zealand which is apparently where you all stole",
    "start": "3231750",
    "end": "3237420"
  },
  {
    "text": "flat whites from as well just stick to",
    "start": "3237420",
    "end": "3242640"
  },
  {
    "text": "claiming that you invented lamingtons because frankly no one else wants to claim those okay so binary for matter is",
    "start": "3242640",
    "end": "3251910"
  },
  {
    "text": "bad trusting data that comes from an untrusted user is bad sign everything",
    "start": "3251910",
    "end": "3258930"
  },
  {
    "text": "sign it with an authenticated signature and keep the key for that authenticated",
    "start": "3258930",
    "end": "3265050"
  },
  {
    "text": "signature private don't publish it on github okay so and like I say opt into",
    "start": "3265050",
    "end": "3282120"
  },
  {
    "text": "all the new protections that we give you by changing your framework version every time that we release one don't use",
    "start": "3282120",
    "end": "3287460"
  },
  {
    "text": "regular expressions don't opt out of all the protections that we give you by turning view stamp back off because it",
    "start": "3287460",
    "end": "3293880"
  },
  {
    "text": "makes me very unhappy all right so as you can see this is slide from I think jacket there is no microphone we have",
    "start": "3293880",
    "end": "3301350"
  },
  {
    "text": "five minutes for questions which is better than normal because I normally waffle on for an hour and a half but",
    "start": "3301350",
    "end": "3307440"
  },
  {
    "text": "I've actually kept time does anyone apart from James have a question hello",
    "start": "3307440",
    "end": "3316590"
  },
  {
    "text": "sir oh there is a mic oh my goodness thank",
    "start": "3316590",
    "end": "3321890"
  },
  {
    "text": "you just to clarify when you're talking about keeping your signing keys secret",
    "start": "3321890",
    "end": "3327109"
  },
  {
    "text": "you're talking about sort of certificates you're not talking about strong signing okay the question is when",
    "start": "3327109",
    "end": "3333920"
  },
  {
    "text": "I'm talking about signing keys what am I actually talking about honestly it's everything in this case I'm talking",
    "start": "3333920",
    "end": "3340579"
  },
  {
    "text": "about signing keys for your check sums so you use message authentication code",
    "start": "3340579",
    "end": "3346970"
  },
  {
    "text": "and what that does is it checks um sure did it but it also takes a key and it merges the two things together because",
    "start": "3346970",
    "end": "3352250"
  },
  {
    "text": "if I just use a normal md5 as a way of validating stuff well the attacker can calculate the md5 there's no secret",
    "start": "3352250",
    "end": "3360619"
  },
  {
    "text": "there but if I use an H Mac I have a key that feeds into that H Mac so an",
    "start": "3360619",
    "end": "3367099"
  },
  {
    "text": "attacker cannot reproduce the check sum because they don't know the key unless",
    "start": "3367099",
    "end": "3372140"
  },
  {
    "text": "you publish it on github which is roughly what machine key does in web",
    "start": "3372140",
    "end": "3379040"
  },
  {
    "text": "forms also yeah you shouldn't you know upload your certificates to github",
    "start": "3379040",
    "end": "3385819"
  },
  {
    "text": "certainly not with a private key strong naming strong naming is one of",
    "start": "3385819",
    "end": "3391250"
  },
  {
    "text": "those security things that we've gone yeah this is not security anymore and it is just used for identity and if you",
    "start": "3391250",
    "end": "3397069"
  },
  {
    "text": "will notice if you look at the dotnet core repos we actually publish our strong name keys because they're not for",
    "start": "3397069",
    "end": "3403609"
  },
  {
    "text": "security they're just for name resolution so I honestly don't care if you up let us upload those to github",
    "start": "3403609",
    "end": "3409520"
  },
  {
    "text": "does that answer your question anyone else have a question",
    "start": "3409520",
    "end": "3416319"
  },
  {
    "text": "no okay you're all too shocked by seeing England win the ashes all right in that",
    "start": "3416319",
    "end": "3423380"
  },
  {
    "text": "case thank you very much everybody remember no red post-it notes just because England won the ashes a few",
    "start": "3423380",
    "end": "3429770"
  },
  {
    "text": "times I'm Irish I honestly don't care all I care about is the rugby and I'm not gonna talk about Ireland versus",
    "start": "3429770",
    "end": "3436220"
  },
  {
    "text": "anyone else in the rugby thank you very much for coming I hope you have a great rest of your conference if you want to",
    "start": "3436220",
    "end": "3442040"
  },
  {
    "text": "see something that actually has proper technical content I will be talking about security in asp.net core 2 at some",
    "start": "3442040",
    "end": "3447650"
  },
  {
    "text": "point on Friday unless a drop bear gets me thank you very much you",
    "start": "3447650",
    "end": "3453860"
  }
]