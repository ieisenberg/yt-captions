[
  {
    "text": "alright looks like it's time to go how's everyone feeling last session on Friday spent rip brain fried okay that's good",
    "start": "9620",
    "end": "17900"
  },
  {
    "text": "um I'm just gonna be telling a story today so hopefully it's a nice easy out for you guys I'm gonna tell you a story",
    "start": "17900",
    "end": "24950"
  },
  {
    "text": "about how my team not just any old team but might the team I was on I'm built our first micro service so first of all",
    "start": "24950",
    "end": "34309"
  },
  {
    "text": "just Who am I that's me - beard my name",
    "start": "34309",
    "end": "39440"
  },
  {
    "text": "is Jim Pelletier I've been a dev for about 10 years down in Melbourne working",
    "start": "39440",
    "end": "44600"
  },
  {
    "text": "on teams have been playing the the tech role on the tech lead role on teams for about five years or so and the moment I",
    "start": "44600",
    "end": "52250"
  },
  {
    "text": "work for a team called a company called page up to make a HR product suite and my team specifically makes a performance",
    "start": "52250",
    "end": "59540"
  },
  {
    "text": "management product within that suite of software so those yearly reviews that",
    "start": "59540",
    "end": "64789"
  },
  {
    "text": "you have with your managers that everyone loves you know you get reduced to a number every year for everyone to look at let's",
    "start": "64789",
    "end": "71330"
  },
  {
    "text": "start that's the product we make a few other things about me just to a bit of background I run a I use a group the",
    "start": "71330",
    "end": "77869"
  },
  {
    "text": "ultimate user group down in Melbourne and involved in the DDD conference down there if you know of it I used to do a",
    "start": "77869",
    "end": "84679"
  },
  {
    "text": "bit of training for what was then called in-service bus that's now the particular software stuff so I've been building",
    "start": "84679",
    "end": "91959"
  },
  {
    "text": "distributed message-based systems for a while sort of since before they were called micro services so yeah what I'm",
    "start": "91959",
    "end": "100849"
  },
  {
    "text": "going to talk about today is like I said literally just a story so what my team set out to achieve and why we decided to",
    "start": "100849",
    "end": "106580"
  },
  {
    "text": "go about building our first micro service how we plan to go about doing",
    "start": "106580",
    "end": "111649"
  },
  {
    "text": "that and the decisions we made before we started what we actually built at a really high level anyway or some some",
    "start": "111649",
    "end": "118190"
  },
  {
    "text": "key parts of what we built and then how things turned out at the end of the day",
    "start": "118190",
    "end": "124000"
  },
  {
    "text": "who I'm expecting you guys to be so this is where our avoidance participation to check a few things I am expecting you",
    "start": "124509",
    "end": "132050"
  },
  {
    "text": "guys to sort of have at least a passing familiarity with what a micro service is and some of the domain driven design",
    "start": "132050",
    "end": "137480"
  },
  {
    "text": "concepts that are often associated with it like aggregate routes and bounded context whose roughly familiar with all those",
    "start": "137480",
    "end": "145040"
  },
  {
    "text": "okay well we do cover it a little bit as well so hopefully we don't lose you a",
    "start": "145040",
    "end": "150630"
  },
  {
    "text": "long way if I do I'm more than happy for you to stop me but I'm expecting most",
    "start": "150630",
    "end": "157110"
  },
  {
    "text": "people probably haven't built one am i who's built a micro service okay perfect",
    "start": "157110",
    "end": "163590"
  },
  {
    "text": "sounds like I've got it about right okay cool so what i hopes in this story for",
    "start": "163590",
    "end": "171090"
  },
  {
    "text": "you it's mainly a little bit of inspiration a little bit of reassurance that this is a journey you can embark",
    "start": "171090",
    "end": "177990"
  },
  {
    "text": "upon and what it might look like if you do given the knowledge that we've just established because most of my team also",
    "start": "177990",
    "end": "185520"
  },
  {
    "text": "only had a passing familiarity with some of that stuff i knew a little bit more but a lot of them had never done a lot",
    "start": "185520",
    "end": "191910"
  },
  {
    "text": "of this stuff before some learnings from the specific mistakes we made everyone's going to make specific you know their",
    "start": "191910",
    "end": "197430"
  },
  {
    "text": "own set of mistakes and it's very hard to learn from other peoples but I'll tell you mine and you can take out of them what you can as well as some",
    "start": "197430",
    "end": "205800"
  },
  {
    "text": "examples of how we used some concepts out of demand-driven design in order to make sure that we manage the complexity",
    "start": "205800",
    "end": "212459"
  },
  {
    "text": "in our software as it sort of as its split and as a group because of the",
    "start": "212459",
    "end": "219120"
  },
  {
    "text": "nature of the of the talk I'm giving it's a very high-level overview of a long journey it's about six months worth",
    "start": "219120",
    "end": "225239"
  },
  {
    "text": "of time that elapses in this so I'm not really going to dig down into any details unless you guys put your hand up",
    "start": "225239",
    "end": "230370"
  },
  {
    "text": "and ask me to at which point I'm happy to so I'm time permitting I'm definitely willing to take questions along the way",
    "start": "230370",
    "end": "236310"
  },
  {
    "text": "so please do do shout out I those sorts of interactions anyway so let's start",
    "start": "236310",
    "end": "242459"
  },
  {
    "text": "with what we wanted to achieve so why we went about building this micro service and making some of the decisions we did",
    "start": "242459",
    "end": "247709"
  },
  {
    "text": "and first let me introduce you to the page up dev team this isn't actually",
    "start": "247709",
    "end": "252959"
  },
  {
    "text": "them but it's about the right size so so",
    "start": "252959",
    "end": "258450"
  },
  {
    "text": "when I did a Google image search for 40 people this is what came up so this is this is the page up dev team there's 40",
    "start": "258450",
    "end": "263790"
  },
  {
    "text": "of them and these are the Wahoo's the Wahoo's is the name of my team",
    "start": "263790",
    "end": "269010"
  },
  {
    "text": "it's named after a fish I've got no idea where teams are named after fishers that's not actually them either but it",
    "start": "269010",
    "end": "274620"
  },
  {
    "text": "again it is the right size that guy's beers not big enough to be me",
    "start": "274620",
    "end": "279630"
  },
  {
    "text": "and this is the size of the teams that we compete against so not the page up",
    "start": "279630",
    "end": "285040"
  },
  {
    "text": "team but the the wires themselves those five people we saw on the last slide we compete against people that make",
    "start": "285040",
    "end": "290110"
  },
  {
    "text": "performance management products with teams this size some of our biggest competitors are people like Oracle and s ap and those kinds of people who who",
    "start": "290110",
    "end": "297850"
  },
  {
    "text": "make really really big performance management products and the way our",
    "start": "297850",
    "end": "303040"
  },
  {
    "text": "performance management products often sold into an enterprise is basically you get compared on a feature matrix right",
    "start": "303040",
    "end": "309160"
  },
  {
    "text": "so big list of features who checks the most boxes wins so when that happens and",
    "start": "309160",
    "end": "317110"
  },
  {
    "text": "when you're compared on how many features you've got versus them it becomes really important to be able to get new features out quickly when",
    "start": "317110",
    "end": "322960"
  },
  {
    "text": "they're uncovered that someone else's gotta check in a box that you don't check yet so time to mark it's becoming",
    "start": "322960",
    "end": "328750"
  },
  {
    "text": "more and more important to us as our markets getting more and more competitive so this being a developer",
    "start": "328750",
    "end": "336550"
  },
  {
    "text": "conference the part of the time to market I'm going to focus on is this you guys is everyone used JIRA at some point",
    "start": "336550",
    "end": "342670"
  },
  {
    "text": "in time awesome well even if you haven't basic it's a pretty simple concept stuffs not done then at some point you",
    "start": "342670",
    "end": "350440"
  },
  {
    "text": "start doing it and then at some point it's done so just moving cards from left to right and today for the purposes of",
    "start": "350440",
    "end": "355840"
  },
  {
    "text": "the talk that I'm doing and a lot of the goals I'm going to be talking about time",
    "start": "355840",
    "end": "361150"
  },
  {
    "text": "to market it's just gonna mean that so",
    "start": "361150",
    "end": "366730"
  },
  {
    "text": "that's cool we sort of define what time to market is and we need to improve it and it's a little bit hard to see on",
    "start": "366730",
    "end": "375220"
  },
  {
    "text": "this but this is actually a screenshot out of JIRA and it's something that comes out of the box with JIRA and it'll",
    "start": "375220",
    "end": "381550"
  },
  {
    "text": "do it by itself if you if you just focus on moving the cards left to right jr. will make this graph for you what this graph is it's called a control chart and",
    "start": "381550",
    "end": "388480"
  },
  {
    "text": "what it tells you it tells you the cycle time of your work at any period of time so what it means is on the 9th of",
    "start": "388480",
    "end": "394810"
  },
  {
    "text": "October it was about one and a half days from someone to take something from not started to done and you can do all sorts",
    "start": "394810",
    "end": "402190"
  },
  {
    "text": "of things like those little check boxes here to decide the cycle time between two columns so you can see how long",
    "start": "402190",
    "end": "408070"
  },
  {
    "text": "things I'm taking to move between columns and how long they're moving overall and I'm not this",
    "start": "408070",
    "end": "413720"
  },
  {
    "text": "is just when I pulled off the internet so we'll come back to the control graph later but what I did was able to do",
    "start": "413720",
    "end": "420680"
  },
  {
    "text": "because of this feature of JIRA is build this and this is got a value stream map",
    "start": "420680",
    "end": "428170"
  },
  {
    "text": "value stream maps are tool that sort of came out of lean and and Toyota and I think that kind of area but it basically",
    "start": "428170",
    "end": "435470"
  },
  {
    "text": "is a graphical representation of how long it takes for us to do work and the different stages it's moving through and",
    "start": "435470",
    "end": "441890"
  },
  {
    "text": "how we add value along the way so you can see if I if I include everything from the moment that we select an idea",
    "start": "441890",
    "end": "448760"
  },
  {
    "text": "is something that we want to do and sort of elaborate it into a bunch of cards or stories in JIRA so we can start tracking",
    "start": "448760",
    "end": "455510"
  },
  {
    "text": "the time on it then we do a bit of work on it we test it and we deploy it and you can",
    "start": "455510",
    "end": "463190"
  },
  {
    "text": "see here most of that times actually it's sitting there waiting for people to pick it up so that's not really useful",
    "start": "463190",
    "end": "468500"
  },
  {
    "text": "where you need to address that in other ways that's not got to do with how quickly we can build software so I'm",
    "start": "468500",
    "end": "475490"
  },
  {
    "text": "gonna focus on basically if I blow up just this section here we get something",
    "start": "475490",
    "end": "481790"
  },
  {
    "text": "that looks like this so now we're just looking at a representation at the time it takes when the developer you know",
    "start": "481790",
    "end": "489800"
  },
  {
    "text": "everyday sitting at their desk picks up a card and gets it to done and I'll explain a little bit about what's going",
    "start": "489800",
    "end": "495470"
  },
  {
    "text": "on here um there's all I'll get to the absolute numbers as well at the end of the talk",
    "start": "495470",
    "end": "500480"
  },
  {
    "text": "but for now it's just interesting to see the the relative sizes of things so it took you know a fair chunk of time for",
    "start": "500480",
    "end": "506990"
  },
  {
    "text": "the developer actually write the card so think about what they want to do write their unit test all the stuff that goes along with that and then they have to",
    "start": "506990",
    "end": "514669"
  },
  {
    "text": "wait for a little while because we've got a code review there and someone else has to look at the code and someone else has to be really look at it and all that",
    "start": "514669",
    "end": "520490"
  },
  {
    "text": "sort of stuff now get another big period of waiting and then we actually test it",
    "start": "520490",
    "end": "525710"
  },
  {
    "text": "and then another big period of waiting before it's in the users hands so the",
    "start": "525710",
    "end": "532820"
  },
  {
    "text": "reason for all this is is got to do a lot with our current architecture so the current architecture is it's a it's a 15",
    "start": "532820",
    "end": "539690"
  },
  {
    "text": "year old codebase it's a model it's got a lot of different technology in there it was definitely written well",
    "start": "539690",
    "end": "544700"
  },
  {
    "text": "before unit testing was a thing so we need to make sure ensure quality and to",
    "start": "544700",
    "end": "550280"
  },
  {
    "text": "do that we have a test environment that we were released to and developers can",
    "start": "550280",
    "end": "555740"
  },
  {
    "text": "manually test their their code during a production like environment now it's quite a big deployment as well it's sort",
    "start": "555740",
    "end": "561470"
  },
  {
    "text": "of a whole server farm full of Windows servers to take a while to stand up and at the time of this it's gotten a bit",
    "start": "561470",
    "end": "567500"
  },
  {
    "text": "faster than by the time that we embarked on this journey to about four hours for",
    "start": "567500",
    "end": "572570"
  },
  {
    "text": "us to deploy and you serve a farm into production and when something's taking",
    "start": "572570",
    "end": "577610"
  },
  {
    "text": "that long to do it sort of gets painful to try and do it on demand so what we ended up doing is we get a release train",
    "start": "577610",
    "end": "583940"
  },
  {
    "text": "going and we deploy once a day on a nightly build to our QA environment for the developers to test in so that's",
    "start": "583940",
    "end": "589610"
  },
  {
    "text": "what's going on here once the code review is done we wait for a day for the next day for it to be built and we test",
    "start": "589610",
    "end": "595310"
  },
  {
    "text": "it and then once it passes that it takes another day to get out to production that's what's going on there and that's",
    "start": "595310",
    "end": "601550"
  },
  {
    "text": "sort of what's some of the forces that are creating this value stream map which",
    "start": "601550",
    "end": "607550"
  },
  {
    "text": "sucks right waiting is one of the most wasteful activities you can do there's no value",
    "start": "607550",
    "end": "612890"
  },
  {
    "text": "being at it you know the only time that we're actually adding a lot of value here is is during this period all this stuff's waste so we really want to get",
    "start": "612890",
    "end": "619250"
  },
  {
    "text": "rid of that so we want to move from this to this and we can do that really easily",
    "start": "619250",
    "end": "625850"
  },
  {
    "text": "just with going to continuous deployment right so being able to deploy stuff straight away verify it and then get it",
    "start": "625850",
    "end": "632090"
  },
  {
    "text": "into our customers hands this is one of the main reasons we chose to build a",
    "start": "632090",
    "end": "637220"
  },
  {
    "text": "micro service because we can't fix a lot of the model this stuff but if we build something separate we can at least avoid",
    "start": "637220",
    "end": "642890"
  },
  {
    "text": "all this wait time we can get to this continuous cycle of getting value out to our users is that to really be part but",
    "start": "642890",
    "end": "652370"
  },
  {
    "text": "there are other reasons as well sometimes I know that writing code feels",
    "start": "652370",
    "end": "657380"
  },
  {
    "text": "a little bit like this you remember there were these guys before they're a really small lean team right we can we",
    "start": "657380",
    "end": "663380"
  },
  {
    "text": "can do things we can move fast but the thing is that every time we write code",
    "start": "663380",
    "end": "668860"
  },
  {
    "text": "these guys kind of get in our way right because we're in a shared codebase we",
    "start": "668860",
    "end": "674720"
  },
  {
    "text": "have shared components that they might change affect us and we might change stuff that affects them and worst of all we might",
    "start": "674720",
    "end": "680869"
  },
  {
    "text": "have to actually talk to them who's talking to people takes forever and the more people you have to talk to they're",
    "start": "680869",
    "end": "686419"
  },
  {
    "text": "actually the lines of communication grow exponentially as well so it's a really time-consuming thing the more people you",
    "start": "686419",
    "end": "691729"
  },
  {
    "text": "have to work with as well you can kind of think of this there's a good analogy we use when we're inducting people at",
    "start": "691729",
    "end": "698929"
  },
  {
    "text": "page up talking about sort of teams of mountain climbers right you sort of got all these guys climbing up the mountain",
    "start": "698929",
    "end": "704509"
  },
  {
    "text": "some going fast some going slow until you realize actually this guy up there is not moving any faster because they're",
    "start": "704509",
    "end": "710569"
  },
  {
    "text": "all tied together they can only ever move as fast as the slowest guy so we",
    "start": "710569",
    "end": "715819"
  },
  {
    "text": "want to cut that dependency that we've got between the teams they're not going",
    "start": "715819",
    "end": "721069"
  },
  {
    "text": "to fall off the mountain necessarily but then we can all climb at different speeds we can all go as fast as each",
    "start": "721069",
    "end": "727759"
  },
  {
    "text": "team is able to and of course by that logic you know the wahoos will be the people up at the top by the time we're",
    "start": "727759",
    "end": "733339"
  },
  {
    "text": "done right so cutting dependencies",
    "start": "733339",
    "end": "738589"
  },
  {
    "text": "decoupling these are terms you hear about people talk about a lot when they talk about microservices I'm gonna just",
    "start": "738589",
    "end": "744559"
  },
  {
    "text": "introduce a different term for it today and I think it's important I hope I hope",
    "start": "744559",
    "end": "749600"
  },
  {
    "text": "I can convey why decoupling if you completely decoupled something it",
    "start": "749600",
    "end": "755659"
  },
  {
    "text": "actually becomes useless right the end of the day things need to be coupled together to either receive information",
    "start": "755659",
    "end": "761239"
  },
  {
    "text": "from other places to make decisions on or to give information back to other people to make sense on if you can't receive all or send information out of a",
    "start": "761239",
    "end": "768139"
  },
  {
    "text": "service it's it's useless it actually can't do anything so what I'm going to talk about today is autonomous and I'll",
    "start": "768139",
    "end": "774229"
  },
  {
    "text": "go into hopefully along the way of that I'll explain to you why autonomy is an important property and when you think",
    "start": "774229",
    "end": "780919"
  },
  {
    "text": "about it that way you'll make some different decisions than when you're just trying to reduce coupling as much",
    "start": "780919",
    "end": "785989"
  },
  {
    "text": "as you can I guess it's sort of time to talk about exactly what we were building this is our product this is a sort of",
    "start": "785989",
    "end": "792289"
  },
  {
    "text": "the main the crux of the interaction between a manager employee and a performance review in our system so you",
    "start": "792289",
    "end": "800479"
  },
  {
    "text": "can kind of see basically there's a goal there and it would have some description of what the goal is and then these two",
    "start": "800479",
    "end": "805789"
  },
  {
    "text": "people basically come in of the year or along the way they're supposed to actually update with progress manager right here",
    "start": "805789",
    "end": "814040"
  },
  {
    "text": "and the employee writes there and they do that along the way and then at the end of the year or whatever the period of time they're using is they give each",
    "start": "814040",
    "end": "820340"
  },
  {
    "text": "other a rating and then that's used to calculate your overall score and what we",
    "start": "820340",
    "end": "825680"
  },
  {
    "text": "heard from our users was that people weren't using this all year people were forgetting about it all year then at the",
    "start": "825680",
    "end": "831560"
  },
  {
    "text": "end writing a big long essay trying to justify why they deserve four stars and they really hadn't done anything towards",
    "start": "831560",
    "end": "836960"
  },
  {
    "text": "the goal so we were trying to actually affect our users behavior through the UI design and basically just took a page",
    "start": "836960",
    "end": "844130"
  },
  {
    "text": "right out of social media and turned what was too big essay documents and I",
    "start": "844130",
    "end": "849410"
  },
  {
    "text": "know you can't see it as well here this is a little bit washed out this projector but each of these is a",
    "start": "849410",
    "end": "854860"
  },
  {
    "text": "individual comment in a feed so what we're going for is a back and forth conversation between the manager and the",
    "start": "854860",
    "end": "860120"
  },
  {
    "text": "employee so when we look at how that was",
    "start": "860120",
    "end": "865580"
  },
  {
    "text": "implemented in our system it's sort of what's going to look like this right so we'd have sorry I'm not talking about",
    "start": "865580",
    "end": "873230"
  },
  {
    "text": "that yet what I'm talking about now is once we've got these two systems is how they want to talk to each other so one",
    "start": "873230",
    "end": "878750"
  },
  {
    "text": "way we could do it like I said a manager and an employee commenting on this goal",
    "start": "878750",
    "end": "884380"
  },
  {
    "text": "and you don't want other people to be able to comment on it basically so that's one of the conditions we have if",
    "start": "884380",
    "end": "890210"
  },
  {
    "text": "you're commenting on this thing I need to know that you're either the manager of the employee on the review so we could do it like this where basically",
    "start": "890210",
    "end": "895960"
  },
  {
    "text": "every time someone tries to put a comment I call over there and check who",
    "start": "895960",
    "end": "900980"
  },
  {
    "text": "the manager is I get a response and I check who the employees and I get a response and we definitely did not want to do this if we do this if we need to",
    "start": "900980",
    "end": "909560"
  },
  {
    "text": "call another service in order to be able to fulfill our capability so in order to",
    "start": "909560",
    "end": "914900"
  },
  {
    "text": "be able to let people comment on things we needed to talk to another service then we can't operate if they're not",
    "start": "914900",
    "end": "922339"
  },
  {
    "text": "available so if for some reason that thing goes down if that changes if they change their interface and we haven't",
    "start": "922339",
    "end": "927980"
  },
  {
    "text": "updated yet if any of these things happen we can't operate and that's when the different distinction between",
    "start": "927980",
    "end": "934190"
  },
  {
    "text": "autonomy and coupling comes in so I want to be able to operate no matter what the",
    "start": "934190",
    "end": "939230"
  },
  {
    "text": "state of this and that's why we definitely didn't choose synchronous stuff I'll talk about what we did in a second",
    "start": "939230",
    "end": "945270"
  },
  {
    "text": "before I just want to talk about another reason we chose not to do this sort of synchronous coupling it's bad if you've",
    "start": "945270",
    "end": "953640"
  },
  {
    "text": "got synchronous coupling between two things but if I have to talk to this service to get information in order to",
    "start": "953640",
    "end": "959520"
  },
  {
    "text": "do what I need to do and it needs to talk to that and it needs to talk to that then the latency is gonna build up",
    "start": "959520",
    "end": "964920"
  },
  {
    "text": "across all this I'm gonna become really slow I'm also going to have with each extra service in the chain a higher and",
    "start": "964920",
    "end": "972060"
  },
  {
    "text": "higher chance that something's going to be wrong whether that be that service is down all that service has changed its",
    "start": "972060",
    "end": "977580"
  },
  {
    "text": "contract or something like that it really sort of starts to compound as you have these synchronous calls rippling all out through your system so",
    "start": "977580",
    "end": "984480"
  },
  {
    "text": "though it's bad to have it between two services but the reason you don't have it between two services is because if",
    "start": "984480",
    "end": "989970"
  },
  {
    "text": "you have it between two then you'll have it between more than two when these things start to expand so what we do",
    "start": "989970",
    "end": "996540"
  },
  {
    "text": "instead basically is we we're going to use a pub sub model over a bus where all of the services that do things in the",
    "start": "996540",
    "end": "1003710"
  },
  {
    "text": "world will publish information onto this bus and we'll sit here sucking the information off the end and it will get",
    "start": "1003710",
    "end": "1010430"
  },
  {
    "text": "it as soon as it's available and then we'll have it when we need it is the concept instead of asking for it at the",
    "start": "1010430",
    "end": "1016280"
  },
  {
    "text": "time we need it so if we've got our existing monolith over here and we've",
    "start": "1016280",
    "end": "1021890"
  },
  {
    "text": "got the new micro service over there and a bus between the two that's great but it's gonna take us a really long time to",
    "start": "1021890",
    "end": "1027410"
  },
  {
    "text": "build that bus we've got to stand up a bus and understand all the properties of hosting and running a bus and all that",
    "start": "1027410",
    "end": "1033020"
  },
  {
    "text": "sort of stuff so we're actually not going to do that we're lucky that when we were just building two things we",
    "start": "1033020",
    "end": "1038600"
  },
  {
    "text": "don't actually need to do real publish/subscribe between stuff so we're just going to run two queues and these things can put messages on each other's",
    "start": "1038600",
    "end": "1045079"
  },
  {
    "text": "queues for each other to process so",
    "start": "1045080",
    "end": "1050720"
  },
  {
    "text": "that's great we've sort of we've decided that we want to build this thing in",
    "start": "1050720",
    "end": "1056510"
  },
  {
    "text": "order to deploy continuously we want to",
    "start": "1056510",
    "end": "1062260"
  },
  {
    "text": "make sure we we don't couple synchronously to anything it's gonna be something that allow us to operate",
    "start": "1062260",
    "end": "1067790"
  },
  {
    "text": "autonomously and move faster but just working in a Greenfield thing that's going to give us a bonus to write just",
    "start": "1067790",
    "end": "1074150"
  },
  {
    "text": "new things are easier and it allows us to do I hold a lot of stuff we can't do",
    "start": "1074150",
    "end": "1079580"
  },
  {
    "text": "already when things are small and when things are new they're necessarily",
    "start": "1079580",
    "end": "1084710"
  },
  {
    "text": "faster we haven't had time to accrue tech debt yet if it's small enough that one person can just fit it inside their",
    "start": "1084710",
    "end": "1090740"
  },
  {
    "text": "head and immediately reason about the whole thing then they're going to be able to make decisions about what to do quicker there",
    "start": "1090740",
    "end": "1097310"
  },
  {
    "text": "are some downsides so our existing monolith has got a lot of plumbing right it's got a lot of infrastructure support",
    "start": "1097310",
    "end": "1103400"
  },
  {
    "text": "there with it there's things like you know authors multi-tenancy in there there's really reliable logging there's",
    "start": "1103400",
    "end": "1110930"
  },
  {
    "text": "a whole host of stuff in there that we're going to be giving up but we made the decision that we thought by giving",
    "start": "1110930",
    "end": "1117770"
  },
  {
    "text": "it up even though we'd have to rebuild some of that stuff we'd still get again and because we wanted to just use all",
    "start": "1117770",
    "end": "1124550"
  },
  {
    "text": "the new cool things and it you know it might sound like you know this is just what developers always want to do but",
    "start": "1124550",
    "end": "1130400"
  },
  {
    "text": "we've got a really in the might in our model this code we're tied to a really old version of an RM that has some real",
    "start": "1130400",
    "end": "1138140"
  },
  {
    "text": "implications on the kind of code we can write and how productive we can be and it's really going to be expensive for us",
    "start": "1138140",
    "end": "1143240"
  },
  {
    "text": "to change because it's used in so many places so sometimes just even being out to use new libraries is really helpful",
    "start": "1143240",
    "end": "1149830"
  },
  {
    "text": "but specifically we were gonna choose these three docker AWS elastic container",
    "start": "1149830",
    "end": "1157820"
  },
  {
    "text": "service and then dotnet core on top of that and I'll explain why like I said a",
    "start": "1157820",
    "end": "1164600"
  },
  {
    "text": "big part of this change was us moving to continuous deployment and when you move to continuous deployment a few new",
    "start": "1164600",
    "end": "1171590"
  },
  {
    "text": "things become true basically because you're deploying so often you need to be sure that each change will work in a",
    "start": "1171590",
    "end": "1179090"
  },
  {
    "text": "automated in quick way so one of the one",
    "start": "1179090",
    "end": "1185810"
  },
  {
    "text": "of the the things you'll need to be able to do is ensure it works in a production environment which is why we chose da car",
    "start": "1185810",
    "end": "1191330"
  },
  {
    "text": "we chose docker because docker allows you to develop and run locally what is very close to your production",
    "start": "1191330",
    "end": "1196790"
  },
  {
    "text": "environment by running inside a container so everyone familiar with docker yeah cool all right awesome so",
    "start": "1196790",
    "end": "1202700"
  },
  {
    "text": "that's why we chose docker first of all as well as the fact that as we deploy",
    "start": "1202700",
    "end": "1209810"
  },
  {
    "text": "more you want your deployments to faster and faster if deployments take four hours and you're deploying ten times a day you're gonna actually be",
    "start": "1209810",
    "end": "1215570"
  },
  {
    "text": "growing the queue of code that needs to get out and it'll take forever to actually get out to production and",
    "start": "1215570",
    "end": "1220700"
  },
  {
    "text": "you'll eat up thousands and thousands of server farms that are constantly swapping out so deployments also have to be quick",
    "start": "1220700",
    "end": "1226580"
  },
  {
    "text": "and we chose darker because and this is but well before Windows containers were",
    "start": "1226580",
    "end": "1232310"
  },
  {
    "text": "available but a container on a Linux container or Linux host spins up like",
    "start": "1232310",
    "end": "1237800"
  },
  {
    "text": "that whereas standing up a Windows VM can take forever sometimes so we chose",
    "start": "1237800",
    "end": "1242930"
  },
  {
    "text": "that because it will allow us to deploy more quickly as well and then once we've",
    "start": "1242930",
    "end": "1249710"
  },
  {
    "text": "chosen docker and Linux dotnet core sort of your wet wet on it we're done that",
    "start": "1249710",
    "end": "1255680"
  },
  {
    "text": "team so don't their core is just sort of where we go from there so that's why we chose those sort of three main pieces of tech at the same time we deliberately",
    "start": "1255680",
    "end": "1267500"
  },
  {
    "text": "did made some choices not to choose some things so we are going to do dde we're",
    "start": "1267500",
    "end": "1272900"
  },
  {
    "text": "going to use events between our services publishing to each other's queue we're going to you see QRS inside our service",
    "start": "1272900",
    "end": "1280460"
  },
  {
    "text": "and we're gonna use all these things to manage our complexity deliberately decided not to use event sourcing I",
    "start": "1280460",
    "end": "1286010"
  },
  {
    "text": "thought the team has never done a lot of this stuff before let's you know just",
    "start": "1286010",
    "end": "1291140"
  },
  {
    "text": "leave it with that for them to learn for now and and we'll worry about event sourcing later I don't I thought I",
    "start": "1291140",
    "end": "1296540"
  },
  {
    "text": "thought we could we could get away with not using I didn't think it wasn't necessary we also decided to use jQuery",
    "start": "1296540",
    "end": "1301820"
  },
  {
    "text": "on the front end it's not a huge front end it's not a really big deal so jQuery",
    "start": "1301820",
    "end": "1307400"
  },
  {
    "text": "adding web pack to it to allow a little bit of composability and we sort of stuck with that so a balance of new",
    "start": "1307400",
    "end": "1315320"
  },
  {
    "text": "technology for specific reasons as well as some pragmatic choices in order to try and get things out so I'm gonna dig",
    "start": "1315320",
    "end": "1326030"
  },
  {
    "text": "into a little bit now what we actually built and how we laid it out I'm only going to do diagrams I'm not going to show any code so new it was a last",
    "start": "1326030",
    "end": "1331670"
  },
  {
    "text": "session on Friday but there are a few Givens when we sort of started",
    "start": "1331670",
    "end": "1337070"
  },
  {
    "text": "architecting this solution one is that we're in AWS so we're working with AWS services",
    "start": "1337070",
    "end": "1344140"
  },
  {
    "text": "as a as a development team in general we believe DDD is a good way of managing complexity in our software so we're",
    "start": "1344140",
    "end": "1350410"
  },
  {
    "text": "gonna sort of get that for free HTTP is is sort of the level at which we're",
    "start": "1350410",
    "end": "1356020"
  },
  {
    "text": "willing to couple things together at everything good - okay CDP so when you when you talk HTTP you're not limiting",
    "start": "1356020",
    "end": "1361480"
  },
  {
    "text": "your choices in any other way it's like we've got some stuff that runs in elasticsearch and Scala and if we had to",
    "start": "1361480",
    "end": "1366970"
  },
  {
    "text": "chosen any kind of other technology perhaps they couldn't have talked that and we have got our existing monolith as",
    "start": "1366970",
    "end": "1372760"
  },
  {
    "text": "well so that model is not going away anytime soon we've got some really valuable code that our customers like in",
    "start": "1372760",
    "end": "1379240"
  },
  {
    "text": "there that's written in VB script right it's not going away we're not going to refactor that anytime soon so we need to",
    "start": "1379240",
    "end": "1386230"
  },
  {
    "text": "sort of keep into account that the bunless gonna stay for a long time so",
    "start": "1386230",
    "end": "1391630"
  },
  {
    "text": "before we started it looked the part of the product that we're talking about looked roughly like this there's a review and a review has a bunch of goals",
    "start": "1391630",
    "end": "1398290"
  },
  {
    "text": "hanging off it and those goals have comments on them and then there's a manager and an",
    "start": "1398290",
    "end": "1403510"
  },
  {
    "text": "employee assigned to each review as I think it's an MVC front-end a bunch of code in between that implements their",
    "start": "1403510",
    "end": "1409630"
  },
  {
    "text": "business logic and what we want to do is turn it into this like I said before right so they've got the old stuff over",
    "start": "1409630",
    "end": "1415330"
  },
  {
    "text": "here and the morale lifts and you stuff over there with queues the browser's going to compose the two together in",
    "start": "1415330",
    "end": "1420550"
  },
  {
    "text": "order to make it all work so we're going to take this stuff here I'm going to",
    "start": "1420550",
    "end": "1426370"
  },
  {
    "text": "take that goal in the comment and we're gonna page up new project and create",
    "start": "1426370",
    "end": "1432160"
  },
  {
    "text": "this thing over there this is a template that we've developed amongst our teams every time this is it's the default",
    "start": "1432160",
    "end": "1438490"
  },
  {
    "text": "choice when people make a micro service now at page up basically you get a bunch of terraform",
    "start": "1438490",
    "end": "1443830"
  },
  {
    "text": "scripts Tara forms a DevOps tool that allows you to create infrastructure in code and deploy it and so we we spin up",
    "start": "1443830",
    "end": "1451300"
  },
  {
    "text": "an instance of this infrastructure and needs each instance and then you also have a bunch of c-sharp project",
    "start": "1451300",
    "end": "1457510"
  },
  {
    "text": "templates that go with it they're pretty pretty simple ones a Web API the other",
    "start": "1457510",
    "end": "1462640"
  },
  {
    "text": "one is just a little console app that runs and reads off a queue so we've got",
    "start": "1462640",
    "end": "1468400"
  },
  {
    "text": "our SP AR jQuery SP a there we've got our API but it's going to talk to we've",
    "start": "1468400",
    "end": "1473500"
  },
  {
    "text": "got the process it's going to read off the queue and in dynamo we're just going to use the key value store there to store",
    "start": "1473500",
    "end": "1479860"
  },
  {
    "text": "this goal and then once we do that the",
    "start": "1479860",
    "end": "1485440"
  },
  {
    "text": "idea is that we can iterate on this really quickly to implement new features so we're not just aiming to go to this",
    "start": "1485440",
    "end": "1492370"
  },
  {
    "text": "this feed of comments the idea was that this is one of the core interactions of our system and over time we want to go",
    "start": "1492370",
    "end": "1497830"
  },
  {
    "text": "to iterate on it quickly and build new rich functionality in there with why we we chose to do this part of the project",
    "start": "1497830",
    "end": "1504690"
  },
  {
    "text": "so I started trying to lay out how all this looked in AWS and how elastic",
    "start": "1504690",
    "end": "1510190"
  },
  {
    "text": "container service worked and all that sort of stuff and it got a little bit crazy and I don't think it's all also",
    "start": "1510190",
    "end": "1516430"
  },
  {
    "text": "that interesting I think we can learn a lot for a lot about roughly how this stuff works by just looking at our build",
    "start": "1516430",
    "end": "1521980"
  },
  {
    "text": "pipeline right so a big part of this is doing continuous deployment so I'll just talk to you about how a continuous",
    "start": "1521980",
    "end": "1528040"
  },
  {
    "text": "deployment pipeline works and hopefully that gives you enough insight into how elastic container service works we've",
    "start": "1528040",
    "end": "1534730"
  },
  {
    "text": "got two repositories one for the backend one for the front-end basically whenever",
    "start": "1534730",
    "end": "1541000"
  },
  {
    "text": "a developer pushes code up there and then merges it to masters we'd deploy we start deploying Travis watches that",
    "start": "1541000",
    "end": "1547690"
  },
  {
    "text": "repository for us and has a little bash script that it runs in order to build",
    "start": "1547690",
    "end": "1552730"
  },
  {
    "text": "our code so it just run some unit tests and starts building a docker container from it for us from an image that",
    "start": "1552730",
    "end": "1559690"
  },
  {
    "text": "Microsoft provides that Scott dotnet core on it once the containers built it",
    "start": "1559690",
    "end": "1564730"
  },
  {
    "text": "pushes into the elastic container repository elastic container repositories a docker image repository",
    "start": "1564730",
    "end": "1571540"
  },
  {
    "text": "hosted by AWS on your behalf you just push your image up there and",
    "start": "1571540",
    "end": "1576610"
  },
  {
    "text": "then you tell the elastic container service that there's a new version of it and then the cluster of machines that it",
    "start": "1576610",
    "end": "1584020"
  },
  {
    "text": "runs just automatically go off and start pulling in new versions of this image it",
    "start": "1584020",
    "end": "1589210"
  },
  {
    "text": "manages rolling Bluegreen deployments for you it basically will make sure there's a certain number of your tasks",
    "start": "1589210",
    "end": "1596230"
  },
  {
    "text": "running at any one time and you specify all this by configuration you'll get any",
    "start": "1596230",
    "end": "1601690"
  },
  {
    "text": "questions about that before I go on a sort of breeze over it pretty quickly cool the front ends very simple to just",
    "start": "1601690",
    "end": "1608410"
  },
  {
    "text": "push to a repository Travis web pack build into it a file storage bucket that then updates",
    "start": "1608410",
    "end": "1615330"
  },
  {
    "text": "a CD and it's all pretty straightforward on the front end so that's cool we've",
    "start": "1615330",
    "end": "1623010"
  },
  {
    "text": "sort of seen how the backend looks and it's going to communicate now and on the front end we've got this screen and we",
    "start": "1623010",
    "end": "1631860"
  },
  {
    "text": "need to process a command so I'm going to show you what it looked like to post a comment how we structure the code news",
    "start": "1631860",
    "end": "1637279"
  },
  {
    "text": "Dedede in order to try and maintain our container our complexity when I click",
    "start": "1637279",
    "end": "1643950"
  },
  {
    "text": "that button sorry it's going red there basically what's going to happen is the browser after having whoo having a",
    "start": "1643950",
    "end": "1657960"
  },
  {
    "text": "little space here the browser's going to",
    "start": "1657960",
    "end": "1663120"
  },
  {
    "text": "load the user interface and then at some point that single page applications going to post a request to our API the",
    "start": "1663120",
    "end": "1670980"
  },
  {
    "text": "API just performed some really really high level validation on it to make sure that it's not a garbage request and at",
    "start": "1670980",
    "end": "1676769"
  },
  {
    "text": "that point we sort of say that it's a validated command and it pushes it up into this command handler thing so we",
    "start": "1676769",
    "end": "1682799"
  },
  {
    "text": "used the the mediator library in there at Jimmy Borges mediator library to sort of do a lot of this stuff but what",
    "start": "1682799",
    "end": "1690179"
  },
  {
    "text": "happens in the command handler and this is sort of gonna happen in anything that the model itself on CQRS is first we",
    "start": "1690179",
    "end": "1696000"
  },
  {
    "text": "load the current state from dynamo we just process that command through our domain and then that's going to produce",
    "start": "1696000",
    "end": "1702990"
  },
  {
    "text": "some new state we need to say back there as well as a bunch of events so one of the events will go out through these",
    "start": "1702990",
    "end": "1708720"
  },
  {
    "text": "projectors into a view model that view model is another representation of the",
    "start": "1708720",
    "end": "1715260"
  },
  {
    "text": "same state that can be used by the front end in a very simple fashion as well as it's going to go back into the monolith",
    "start": "1715260",
    "end": "1721230"
  },
  {
    "text": "and what happens when it goes back in the monolith is these things remember when I showed you before they there were",
    "start": "1721230",
    "end": "1726630"
  },
  {
    "text": "tables we took out of the modern list to put our new microservice it needs we need to put the data back in there we've",
    "start": "1726630",
    "end": "1732450"
  },
  {
    "text": "got all sorts of places where people are running custom sequel queries through you know direct access we've given them",
    "start": "1732450",
    "end": "1738120"
  },
  {
    "text": "from you know customers and stuff and so we can't decommission those tables we're going to project all the information",
    "start": "1738120",
    "end": "1743580"
  },
  {
    "text": "back into there as an array only way so that we don't have to update all of that at the same time so the point of",
    "start": "1743580",
    "end": "1751830"
  },
  {
    "text": "all this though is that this is a seekers pattern the pattern of the plan",
    "start": "1751830",
    "end": "1757830"
  },
  {
    "text": "of it is that each one of these things becomes very simple all this API does is know how to validate commands all this",
    "start": "1757830",
    "end": "1763560"
  },
  {
    "text": "thing does is know how to pull in save state then there you've got your whole domain model that encapsulates just the",
    "start": "1763560",
    "end": "1769920"
  },
  {
    "text": "business rules so that's a really valuable part and this view model here is in exactly the state that this guy",
    "start": "1769920",
    "end": "1775710"
  },
  {
    "text": "needs it so he just goes get and select star from and it all becomes very simple these are the patterns that are supposed",
    "start": "1775710",
    "end": "1782130"
  },
  {
    "text": "to make this quick to moving to do that we need to get the right state in here",
    "start": "1782130",
    "end": "1788610"
  },
  {
    "text": "in the first place and we do that by this is now the events between these two bounded contexts so one thing is sending",
    "start": "1788610",
    "end": "1796140"
  },
  {
    "text": "events to another in order to make sure we know who the manager or an employee is when we go to add a comment to this",
    "start": "1796140",
    "end": "1801720"
  },
  {
    "text": "thing so you know at some time some state changes here the managers say gets updated and we publish an event over",
    "start": "1801720",
    "end": "1808290"
  },
  {
    "text": "there when that event comes over it's going to be called something like the",
    "start": "1808290",
    "end": "1814010"
  },
  {
    "text": "manager on review changed right now something we did that was really",
    "start": "1814010",
    "end": "1819810"
  },
  {
    "text": "important to making sure that our code remained clean was introduced this anti-corruption layer this thing over",
    "start": "1819810",
    "end": "1828450"
  },
  {
    "text": "here this code doesn't know anything about reviews at all right we don't want to have to let it know anything about",
    "start": "1828450",
    "end": "1834510"
  },
  {
    "text": "reviews because it knows anything about reviews it's gonna need to know about users it's gonna need to know it like and it's just gonna grow and grow and",
    "start": "1834510",
    "end": "1840570"
  },
  {
    "text": "grow and the amount of concepts we're gonna have in our domain will become the monolith itself so by doing this",
    "start": "1840570",
    "end": "1848280"
  },
  {
    "text": "anti-corruption layer here we transform that and we transform it into something like manager changed on goal and now",
    "start": "1848280",
    "end": "1854250"
  },
  {
    "text": "this thing understands it perfectly and we've maintained and made sure the size of this code stays really small so",
    "start": "1854250",
    "end": "1864300"
  },
  {
    "text": "that's how we keep the backend autonomous and small simple parts the front ends got some patterns were used",
    "start": "1864300",
    "end": "1870930"
  },
  {
    "text": "as well what we've got here is the UI but this is to you eyes we've got some",
    "start": "1870930",
    "end": "1878250"
  },
  {
    "text": "that's loaded from the model it and that's coming out of MVC and then we've got our little chunk of single",
    "start": "1878250",
    "end": "1883260"
  },
  {
    "text": "page application hosted in the middle there now that's cool there's no interaction between these two things so those things do things that are",
    "start": "1883260",
    "end": "1889110"
  },
  {
    "text": "completely decoupled and that's fine they just talk to their own backends um but like I said before it gets a little",
    "start": "1889110",
    "end": "1894389"
  },
  {
    "text": "bit more complicated we want to enrich this feed with a whole lot of other data so we've got this thing in our system",
    "start": "1894389",
    "end": "1900510"
  },
  {
    "text": "called journal I won't go into what it is or where it is but it looks like this basically I can pop up a list of",
    "start": "1900510",
    "end": "1906090"
  },
  {
    "text": "journals that have been created by me and other people and I might want to put this into my feet of stuff to show that",
    "start": "1906090",
    "end": "1912630"
  },
  {
    "text": "I've made some progress towards this goal and the complicated thing from here is that that's in another micro service",
    "start": "1912630",
    "end": "1919110"
  },
  {
    "text": "as well so we've got the purple stuff coming from the monolith we've got the red stuff coming from the micro service",
    "start": "1919110",
    "end": "1924630"
  },
  {
    "text": "we're building we've got the yellow stuff and that's coming from an existing micro service so we want to be able to do this in a way that all these things",
    "start": "1924630",
    "end": "1930929"
  },
  {
    "text": "are actually deployed updated and operate completely independently and autonomously and the way that we do that",
    "start": "1930929",
    "end": "1936899"
  },
  {
    "text": "is something along the lines of this so when the monolith first loads up it loads first and it loads itself into the",
    "start": "1936899",
    "end": "1943649"
  },
  {
    "text": "browser there's a little bit of JavaScript that's sitting in there and when that loads it loads our single page",
    "start": "1943649",
    "end": "1949049"
  },
  {
    "text": "application this other things going to load as well but it's going to be hidden in the background for now and we load",
    "start": "1949049",
    "end": "1956220"
  },
  {
    "text": "our state from our service so these things are paired and those guys are paired as well and once we've loaded our",
    "start": "1956220",
    "end": "1962070"
  },
  {
    "text": "state someone's going to click that button click the button to pop up the other UI and we're going to fire a Dom",
    "start": "1962070",
    "end": "1967289"
  },
  {
    "text": "event right we've got events in the back end let's use events on the front end as well and that events going to going to",
    "start": "1967289",
    "end": "1972539"
  },
  {
    "text": "say hey someone clicked this button and when they click that they clicked it on a goal of this ID and then this thing's",
    "start": "1972539",
    "end": "1978630"
  },
  {
    "text": "going to the the list of journals is going to show up and it's going to know what state to load because it's been",
    "start": "1978630",
    "end": "1985620"
  },
  {
    "text": "passed a little bit of initialization state through that event and then someone's going to select which one they",
    "start": "1985620",
    "end": "1991889"
  },
  {
    "text": "want to link and that sends a command back to its micro service and when that",
    "start": "1991889",
    "end": "1997260"
  },
  {
    "text": "happens we publish events out to all the other services that might be interested in it that means that when we go to load",
    "start": "1997260",
    "end": "2003980"
  },
  {
    "text": "our feed of stuff back up the thing will be linked it in there except not really",
    "start": "2003980",
    "end": "2010659"
  },
  {
    "text": "now we've introduced a little bit of a race addition right because all this stuff's happening asynchronously those two",
    "start": "2010659",
    "end": "2016730"
  },
  {
    "text": "things might happen in any order so the way we get around that without having the tile is back up together is again",
    "start": "2016730",
    "end": "2023540"
  },
  {
    "text": "with just another event so we just fire a Dom event back into the window and then other things gonna listen for it",
    "start": "2023540",
    "end": "2029240"
  },
  {
    "text": "and make a little cheeky update to its UI so it can do everything a little bit of time to catch up success no not",
    "start": "2029240",
    "end": "2042680"
  },
  {
    "text": "really so at this point we've managed to get",
    "start": "2042680",
    "end": "2049550"
  },
  {
    "text": "something deployed any into production and that's great it's you know that's in treatment itself and doing all this new",
    "start": "2049550",
    "end": "2055790"
  },
  {
    "text": "stuff fantastic that's not what we're really trying to do so let's talk about how things really turned out and what",
    "start": "2055790",
    "end": "2062659"
  },
  {
    "text": "winning really looked like for us in this situation so remember the start of",
    "start": "2062660",
    "end": "2067879"
  },
  {
    "text": "the talk I was saying that really what we're trying to do here is move fast and we've got to keep up with you know our",
    "start": "2067880",
    "end": "2073310"
  },
  {
    "text": "competitors here so let's check JIRA right remember the control graph that's",
    "start": "2073310",
    "end": "2079520"
  },
  {
    "text": "what it actually ended up looking like this is the whole year the whole of last",
    "start": "2079520",
    "end": "2085070"
  },
  {
    "text": "year and we started the project I think somewhere around here and then finished",
    "start": "2085070",
    "end": "2091399"
  },
  {
    "text": "it somewhere around there so it's a little bit hard to see because of the scale of this of this graph but this is",
    "start": "2091400",
    "end": "2097129"
  },
  {
    "text": "what happens so the average cycle time the average time it took us to get something done before we started was",
    "start": "2097130",
    "end": "2102980"
  },
  {
    "text": "about four days and then we started at work and we started doing all these new things and using all those new things",
    "start": "2102980",
    "end": "2108350"
  },
  {
    "text": "and standing up terraform the elastic container services and docker and dotnet core all that sort of stuff and our time",
    "start": "2108350",
    "end": "2115760"
  },
  {
    "text": "went up dramatically it went up to about eight days so about doubled at this point in time it's taking us twice as long to get stuff done there was a bit",
    "start": "2115760",
    "end": "2124220"
  },
  {
    "text": "of a support spike in there as well we have a every time of year when people work trying to close off their",
    "start": "2124220",
    "end": "2129890"
  },
  {
    "text": "performance reviews at the end of financial year it sort of we had a lot more support cases come through so it's a little bit inflated by that but most",
    "start": "2129890",
    "end": "2135800"
  },
  {
    "text": "importantly once we got over all of the learnings we did get down to two days so",
    "start": "2135800",
    "end": "2141530"
  },
  {
    "text": "that's sort of we doubled the speed at what which we could get things done by doing this",
    "start": "2141530",
    "end": "2147079"
  },
  {
    "text": "to sort of blow that graph up a little bit and give you a better idea of the scale of the improvements we made over",
    "start": "2147079",
    "end": "2152119"
  },
  {
    "text": "that time looks like that so that's the four days the eight days in the two days",
    "start": "2152119",
    "end": "2159219"
  },
  {
    "text": "now if you remember when we looked at our value stream map we kind of could",
    "start": "2159219",
    "end": "2164569"
  },
  {
    "text": "have guessed that would have happened right I mean we're going from this to this it's pretty much half I would have",
    "start": "2164569",
    "end": "2170420"
  },
  {
    "text": "been surprised if if by going to continuous deployment alone we would have really seen the full hundred",
    "start": "2170420",
    "end": "2175789"
  },
  {
    "text": "percent so I think it's probably about my guess anyways it's probably about eighty percent due to the fact we're now continuously deploying and then maybe",
    "start": "2175789",
    "end": "2182119"
  },
  {
    "text": "twenty percent due to the sort of the DDD and the other patterns and stuff that we were able to employ during that",
    "start": "2182119",
    "end": "2188799"
  },
  {
    "text": "so that's all well and good but how did",
    "start": "2188799",
    "end": "2194180"
  },
  {
    "text": "it actually go down with the business and I would lie if I said to you the",
    "start": "2194180",
    "end": "2200499"
  },
  {
    "text": "during that time when things were going up that everything was going smoothly there was definitely some friction with",
    "start": "2200499",
    "end": "2206869"
  },
  {
    "text": "the business as we did this you know things like this is taking longer than I expected were not directly said to me",
    "start": "2206869",
    "end": "2213650"
  },
  {
    "text": "but I heard secondhand through other people and that sort of stuff as well and we clearly lost a bit of trust and",
    "start": "2213650",
    "end": "2219759"
  },
  {
    "text": "there was a bit of a communication breakdown there and I think that like that was definitely our fault I think",
    "start": "2219759",
    "end": "2227359"
  },
  {
    "text": "it's really important to make sure that you tell the story about why doing this why things are taking a bit longer for",
    "start": "2227359",
    "end": "2232969"
  },
  {
    "text": "now you know I've just shown you all these really pretty grass but I only made them once I knew I was gonna come and talk to you guys about it it would",
    "start": "2232969",
    "end": "2239930"
  },
  {
    "text": "have been really good if I had to made those graphs to talk to the business about it now I couldn't have shown them the JIRA stuff before it happened but",
    "start": "2239930",
    "end": "2246079"
  },
  {
    "text": "those value stream maps would have been a really useful tool to explain why we needed to make the change that we did",
    "start": "2246079",
    "end": "2252109"
  },
  {
    "text": "and now that I have made these graphs and I have shown them to some people in the business they're really happy with",
    "start": "2252109",
    "end": "2257269"
  },
  {
    "text": "the changes we've made and they understand why a lot more now so I think the biggest learning and the biggest takeaway that I got out of all this was",
    "start": "2257269",
    "end": "2264920"
  },
  {
    "text": "to make sure you tell that story and make sure you've got people along the way if you don't want to you know have",
    "start": "2264920",
    "end": "2270859"
  },
  {
    "text": "that those trust issues come up now all the things so we've docker",
    "start": "2270859",
    "end": "2277920"
  },
  {
    "text": "remember we're docking we had AWS elastic container service and we had dotnet core how did they all go oh we're",
    "start": "2277920",
    "end": "2284789"
  },
  {
    "text": "all terrible none of those helped at all so that idea that docker gives you a",
    "start": "2284789",
    "end": "2292049"
  },
  {
    "text": "production like environment in order to test your changes early on the development machine everyone once needs",
    "start": "2292049",
    "end": "2298109"
  },
  {
    "text": "wouldn't be a studio right they want to hit play so no one ran it locally on",
    "start": "2298109",
    "end": "2303299"
  },
  {
    "text": "their development machine and then when dotnet core change their cryptographic libraries at some point we deployed a",
    "start": "2303299",
    "end": "2310259"
  },
  {
    "text": "version that couldn't decode our I war tokens anymore and everything went down so we definitely didn't realize the",
    "start": "2310259",
    "end": "2317459"
  },
  {
    "text": "benefit from that we reuse the last two contain service and one of the reasons reasons we're using containers on Linux was because",
    "start": "2317459",
    "end": "2324269"
  },
  {
    "text": "they would deploy quickly the way we set it up because we didn't really understand what we're doing we pushed an",
    "start": "2324269",
    "end": "2330509"
  },
  {
    "text": "image out to each region and then it took basically an hour and a half to push all these images out I think we had",
    "start": "2330509",
    "end": "2337799"
  },
  {
    "text": "a structure differently we could have made it quicker but it was a really slow deployment process who was still hours and hours to get a together change out",
    "start": "2337799",
    "end": "2344959"
  },
  {
    "text": "and if you remember that period of time that I was talking about there during last year dotnet core was you know",
    "start": "2344959",
    "end": "2352099"
  },
  {
    "text": "changing underneath us every day and so elastic container service was new as",
    "start": "2352099",
    "end": "2357420"
  },
  {
    "text": "well so there was breaking changes underneath us all the time and that really hurt us a lot as well so yeah",
    "start": "2357420",
    "end": "2364469"
  },
  {
    "text": "life on the bleeding edge wasn't fun as well as some of the properties that we chose those things weren't great not",
    "start": "2364469",
    "end": "2369749"
  },
  {
    "text": "only when things broke did we have to fix them we had to work out how I spent a lot of time in github threads on",
    "start": "2369749",
    "end": "2376680"
  },
  {
    "text": "the.net core project trying to work out why my stuff was broken because no it was broke it it broke today and people",
    "start": "2376680",
    "end": "2382289"
  },
  {
    "text": "are just realizing it's broken no one even knows why it's broken yet so that wasn't that wasn't cool but we did have",
    "start": "2382289",
    "end": "2389969"
  },
  {
    "text": "a lot of wins um you know the anti-corruption layer worked really well that was one of the the things that went",
    "start": "2389969",
    "end": "2396539"
  },
  {
    "text": "up when we talked to other teams at page up who tried to use dynamo who tried to do this sort of stuff and just ended up",
    "start": "2396539",
    "end": "2402359"
  },
  {
    "text": "with their own little mess or they couldn't even persist their stuff properly that seemed to be one of the big wins that we had it made our domain",
    "start": "2402359",
    "end": "2408630"
  },
  {
    "text": "model really more and easy to reason about and the way we structured our events and just using events made things really easy and",
    "start": "2408630",
    "end": "2415590"
  },
  {
    "text": "of course read stores again were a massive wind I'm gonna call jQuery and web Packer a half half like it was cool it was fine",
    "start": "2415590",
    "end": "2422460"
  },
  {
    "text": "before what it didn't I think we did make the right choice or not taking on something else new but I'd probably want",
    "start": "2422460",
    "end": "2430110"
  },
  {
    "text": "to rewrite it now but I probably can too because it's really tiny so but we had a couple of really big issues not",
    "start": "2430110",
    "end": "2438480"
  },
  {
    "text": "transactionally publishing and processing messages so that we could guarantee our system was eventually",
    "start": "2438480",
    "end": "2443910"
  },
  {
    "text": "consistent I'll talk a little bit in a second about what happened there and and how you might avoid it but the biggest",
    "start": "2443910",
    "end": "2451230"
  },
  {
    "text": "one that I'd probably like to do over on if I could was not event sourcing things and why that became really important is",
    "start": "2451230",
    "end": "2461190"
  },
  {
    "text": "because because we had problems where things would get out of sync between our",
    "start": "2461190",
    "end": "2466440"
  },
  {
    "text": "monolith and our micro service basically what was happening is we lose updates",
    "start": "2466440",
    "end": "2471540"
  },
  {
    "text": "too when the managers changed then the real manager wouldn't be able to leave a",
    "start": "2471540",
    "end": "2477060"
  },
  {
    "text": "comment on the review and that's that was bad on its own but without event",
    "start": "2477060",
    "end": "2482520"
  },
  {
    "text": "sourcing things became really hard to get that back into what's right state we're not running in sequel we can't just run a sequel script against dynamo",
    "start": "2482520",
    "end": "2488520"
  },
  {
    "text": "got to manually run code against it now so it became really hard to repair the state that we did have when things got",
    "start": "2488520",
    "end": "2494010"
  },
  {
    "text": "out of sync and thinking back on everything we went through now if we had to chose an event sourcing and just go",
    "start": "2494010",
    "end": "2499650"
  },
  {
    "text": "on with you know elastic Beanstalk or something on AWS that was just running dotnet 4 or 5 and sort of ran out of the",
    "start": "2499650",
    "end": "2505290"
  },
  {
    "text": "box for you I think we would have would have had a lot nicer time so let's talk about how things were getting out of",
    "start": "2505290",
    "end": "2510750"
  },
  {
    "text": "thing for us basically I said before sometimes the manager would get changed",
    "start": "2510750",
    "end": "2517620"
  },
  {
    "text": "inside of our monolith and at that point we needed an event to come over and tell us that that was the case basically this",
    "start": "2517620",
    "end": "2525600"
  },
  {
    "text": "would fail to happen for some reason sometimes it was just a network issue between us and SQS and then sometimes",
    "start": "2525600",
    "end": "2534090"
  },
  {
    "text": "we'd have a programming bug in the anti-corruption layer somewhere and we'd sort of lose the update of something",
    "start": "2534090",
    "end": "2540540"
  },
  {
    "text": "like that what's supposed to happen there is it's",
    "start": "2540540",
    "end": "2547279"
  },
  {
    "text": "supposed to go back on the queue and we'll retry it but because of a program bug didn't even get on there so I",
    "start": "2547279",
    "end": "2552430"
  },
  {
    "text": "actually knew that this could happen like I said a builder of distributed systems before and I knew how important",
    "start": "2552430",
    "end": "2558589"
  },
  {
    "text": "the properties of these systems were but I thought about this team who hadn't",
    "start": "2558589",
    "end": "2563839"
  },
  {
    "text": "done distributed systems before and I thought about what it would take to go",
    "start": "2563839",
    "end": "2568910"
  },
  {
    "text": "through all it's quite difficult to get things to be guaranteed and eventually consistent like that so I thought it's",
    "start": "2568910",
    "end": "2574579"
  },
  {
    "text": "fine we're not going to lose that many messages right like it'll be fine managers don't change that often during",
    "start": "2574579",
    "end": "2582109"
  },
  {
    "text": "the year and then we had one of our biggest clients go through a restructure a week before they ran their performance",
    "start": "2582109",
    "end": "2590029"
  },
  {
    "text": "reviews and when they got into the system and realized they couldn't leave",
    "start": "2590029",
    "end": "2595640"
  },
  {
    "text": "comments anywhere we couldn't rebuild the state quickly because we were an event sourced so all",
    "start": "2595640",
    "end": "2602839"
  },
  {
    "text": "those assumptions and all those decisions did compound to give us some real problems so I think it was probably",
    "start": "2602839",
    "end": "2608599"
  },
  {
    "text": "a really bad assumption of mind system to think that that would be ok I definitely didn't run any numbers on what the likelihood and what the impact",
    "start": "2608599",
    "end": "2614990"
  },
  {
    "text": "and I didn't consider how would recover if it did so it's very least you're gonna make assumptions about the guarantees your system has backed them",
    "start": "2614990",
    "end": "2621769"
  },
  {
    "text": "up a little bit better than I did so this is the overall score we're",
    "start": "2621769",
    "end": "2629089"
  },
  {
    "text": "nearly done now so you know we had a lot of a lot of failures a few wins but this",
    "start": "2629089",
    "end": "2636440"
  },
  {
    "text": "gave us everything we needed at the end of the day so purely just moving out to a micro service for continuous delivery",
    "start": "2636440",
    "end": "2641750"
  },
  {
    "text": "purposes was worth it for us and that's it we're about 10 minutes early but I",
    "start": "2641750",
    "end": "2648380"
  },
  {
    "text": "figure that's ok on a Friday yeah yeah",
    "start": "2648380",
    "end": "2655210"
  },
  {
    "text": "well yeah yeah so let me get the slide",
    "start": "2658430",
    "end": "2664550"
  },
  {
    "text": "yeah I'll repeat the question sorry when I've got the picture to sort of help explain it so the question was the data",
    "start": "2667550",
    "end": "2682920"
  },
  {
    "text": "moving back and forth between the two if basically if all the data is moving back and forth between the two won't",
    "start": "2682920",
    "end": "2689130"
  },
  {
    "text": "they both continue to grow all right so we're not just keeping all the information about comments over here the",
    "start": "2689130",
    "end": "2695130"
  },
  {
    "text": "comments are actually coming back through to here as well the answer is when we continue to grow it'll stay how",
    "start": "2695130",
    "end": "2702540"
  },
  {
    "text": "it was so it won't get simpler so we were pushing the comments back this way",
    "start": "2702540",
    "end": "2708210"
  },
  {
    "text": "and into the table that already existed and the reason we had to do that was",
    "start": "2708210",
    "end": "2713610"
  },
  {
    "text": "because there are a lot of other places reading from that there was reporting being run off it like anyone could wrote",
    "start": "2713610",
    "end": "2718920"
  },
  {
    "text": "it right an ad-hoc query against it there are actually other things like there sometimes has to be a comment on a",
    "start": "2718920",
    "end": "2724560"
  },
  {
    "text": "review before it can be approved for instance so we're kind of with the way",
    "start": "2724560",
    "end": "2730830"
  },
  {
    "text": "we conceived of that is that this is now a read store for the model list to operate off yeah",
    "start": "2730830",
    "end": "2736890"
  },
  {
    "text": "but it will never get any more complicated yeah yeah sure so what it",
    "start": "2736890",
    "end": "2749580"
  },
  {
    "text": "looks like it's it's there right so it's it's the first thing that reads off the queue and",
    "start": "2749580",
    "end": "2755540"
  },
  {
    "text": "like I said so the event that comes in there is called for instance manager changed on a review and it's got a",
    "start": "2755540",
    "end": "2763110"
  },
  {
    "text": "review ID in the manager ID the problem is that we want to update the the manager on this domain model which is",
    "start": "2763110",
    "end": "2768930"
  },
  {
    "text": "just a goal and we don't know what goal is things for so we keep a bunch of",
    "start": "2768930",
    "end": "2774360"
  },
  {
    "text": "mapping tables in dynamo there and all these are as a table is a review ID and",
    "start": "2774360",
    "end": "2779700"
  },
  {
    "text": "a list of goal IDs and then so when that particular event comes in it gets translated into n number of goal",
    "start": "2779700",
    "end": "2787070"
  },
  {
    "text": "managers changed on goal of and now it becomes really simple for this it just gets the goal and says",
    "start": "2787070",
    "end": "2793509"
  },
  {
    "text": "here's your new manager it doesn't this thing doesn't have to remember which goal is we don't have to do a complicated query across this data set",
    "start": "2793509",
    "end": "2800499"
  },
  {
    "text": "in order to know which goals are the right goals because all of those places in the places where the complexity starts to to come back in cut things get",
    "start": "2800499",
    "end": "2808269"
  },
  {
    "text": "coupled together does it make sense a bit ok yeah it's",
    "start": "2808269",
    "end": "2819219"
  },
  {
    "text": "it's just a set of classes it's just a it was a folder with event handlers in",
    "start": "2819219",
    "end": "2826630"
  },
  {
    "text": "it that the event took an event of one type and it published an event of another type on a little internal bus",
    "start": "2826630",
    "end": "2832979"
  },
  {
    "text": "yeah yeah yeah look we're gonna stick",
    "start": "2832979",
    "end": "2843190"
  },
  {
    "text": "with it we know what we're doing with it now and I think we've probably learnt",
    "start": "2843190",
    "end": "2848380"
  },
  {
    "text": "all the lessons we need to in order to use it well so we'll use it differently next time also we're all using it all the teams",
    "start": "2848380",
    "end": "2854619"
  },
  {
    "text": "are using docker so it's something we've kind of standardized on I think we just went there too early too early like in",
    "start": "2854619",
    "end": "2860710"
  },
  {
    "text": "the global sense of it wasn't ready and too early for us in the sense that we weren't ready to go there yeah yeah hmm",
    "start": "2860710",
    "end": "2876869"
  },
  {
    "text": "no we didn't I wasn't interested in it because so streaming is a feature of",
    "start": "2876869",
    "end": "2883299"
  },
  {
    "text": "dynamo that basically publishes events every time you save the event to",
    "start": "2883299",
    "end": "2888519"
  },
  {
    "text": "publishers in the same format as this right so it'll it'll basically publish my domain model every time and that's",
    "start": "2888519",
    "end": "2894400"
  },
  {
    "text": "not what I want to expose to the rest of the world because that's basically giving everyone the wholesale access to",
    "start": "2894400",
    "end": "2900849"
  },
  {
    "text": "my to my object model it's gonna allow everyone a couple to it I wanted to explicitly publish an event with the",
    "start": "2900849",
    "end": "2907180"
  },
  {
    "text": "right semantics and the right level of information in it yeah",
    "start": "2907180",
    "end": "2912989"
  },
  {
    "text": "I'm hoping twos better we still haven't properly upgraded this",
    "start": "2919810",
    "end": "2927050"
  },
  {
    "text": "to the latest version of one before two came out it sort of go to a point where we were done and we went okay we'll just",
    "start": "2927050",
    "end": "2932660"
  },
  {
    "text": "put it down now and step away for a little while look there were no showstoppers in there",
    "start": "2932660",
    "end": "2938540"
  },
  {
    "text": "there were just a lot of surprises going through that we had a little bit of trouble with their certificate support",
    "start": "2938540",
    "end": "2944750"
  },
  {
    "text": "for a little while I don't know if that's something everyone had trouble with but we had almost a you know we're",
    "start": "2944750",
    "end": "2950120"
  },
  {
    "text": "to do something a different way because of that but otherwise we would just have to roll back to the previous version and",
    "start": "2950120",
    "end": "2955490"
  },
  {
    "text": "spend time working out what to do next so it wasn't that it was necessarily unreliable in you know we do strange",
    "start": "2955490",
    "end": "2962360"
  },
  {
    "text": "things in production it was just we didn't know what when it would break and then we didn't know how to fix it at the time consuming yeah how do we put",
    "start": "2962360",
    "end": "2973730"
  },
  {
    "text": "together would ah so yeah right so for",
    "start": "2973730",
    "end": "2981860"
  },
  {
    "text": "instance right so this thing is but it's a div it's just a div so there's a piece",
    "start": "2981860",
    "end": "2987560"
  },
  {
    "text": "of code that sits in the monolith right there's a script tag when that script",
    "start": "2987560",
    "end": "2992810"
  },
  {
    "text": "tag runs on page load it looks for there's a div in this monolith code as well with a special tag on it and it's",
    "start": "2992810",
    "end": "2999680"
  },
  {
    "text": "also got data attributes about the ID of it so this goal has a specific ID so there's a div somewhere that's like",
    "start": "2999680",
    "end": "3006130"
  },
  {
    "text": "class goal I and and data dot goal ID and then the idea the goal and so the",
    "start": "3006130",
    "end": "3013420"
  },
  {
    "text": "the the JavaScript grabs this div and then knows how to load and talk to its back in to get the state to populate it",
    "start": "3013420",
    "end": "3020250"
  },
  {
    "text": "yeah yeah we're putting the auth token",
    "start": "3020250",
    "end": "3026440"
  },
  {
    "text": "through the data ID as well so that's something basically we've got a we've",
    "start": "3026440",
    "end": "3033970"
  },
  {
    "text": "got a less-than-ideal identity server implementation that's been upgraded since so we've got a new solution for that now not quite sure",
    "start": "3033970",
    "end": "3040240"
  },
  {
    "text": "what it is to be honest though we'll be changing that one so shortly yeah",
    "start": "3040240",
    "end": "3045900"
  },
  {
    "text": "yeah yeah we had docker compose I think",
    "start": "3048960",
    "end": "3055839"
  },
  {
    "text": "that the main reason that people didn't do it local is because I wanted the visual studio editing experience so you're sort of would have to you'd have",
    "start": "3055839",
    "end": "3062530"
  },
  {
    "text": "to edit the code and then build a new image to get it to run so there are ways",
    "start": "3062530",
    "end": "3068290"
  },
  {
    "text": "you can do it where you map folders inside the container and all that sort of stuff but we we sort of a little bit",
    "start": "3068290",
    "end": "3073810"
  },
  {
    "text": "beyond us to go that far to get that live code editing experience inside the containers on our local system and so",
    "start": "3073810",
    "end": "3081250"
  },
  {
    "text": "that that was the friction that stopped us using docker properly I think yeah",
    "start": "3081250",
    "end": "3089710"
  },
  {
    "text": "they call yeah right so the question was",
    "start": "3089710",
    "end": "3098170"
  },
  {
    "text": "sorry for everyone else how are we finding the Dom events and and the",
    "start": "3098170",
    "end": "3103660"
  },
  {
    "text": "contract between them is that is it stable enough yeah yeah well I mean it's just like the the contract and our",
    "start": "3103660",
    "end": "3111369"
  },
  {
    "text": "events it is a little bit different because the events the way I like to model my events is that if you make them",
    "start": "3111369",
    "end": "3117450"
  },
  {
    "text": "named after the business concept they'll be stable because the business is stable and if they're not if the business",
    "start": "3117450",
    "end": "3123430"
  },
  {
    "text": "changes then you can incur the cost of changing them yeah we've not had much change between",
    "start": "3123430",
    "end": "3129220"
  },
  {
    "text": "the two yet but I get like they are a lot granular they're sort of like button was clicked so you know if that button",
    "start": "3129220",
    "end": "3135460"
  },
  {
    "text": "goes away then you need to change the other one as well yeah yeah exactly so",
    "start": "3135460",
    "end": "3142750"
  },
  {
    "text": "there's still it there's there is still a shared contract between the two but yeah yeah",
    "start": "3142750",
    "end": "3153240"
  },
  {
    "text": "yet so the question was how did you choose which version of.net core to use",
    "start": "3158449",
    "end": "3164669"
  },
  {
    "text": "and and were you using the latest all the time we weren't using the latest all the time but for instance so we started",
    "start": "3164669",
    "end": "3173429"
  },
  {
    "text": "unlike preview 1 or something like that it was one of the beaters that we started on back when D and VM was still",
    "start": "3173429",
    "end": "3178559"
  },
  {
    "text": "a thing and that sort of stuff and so at that early stage it made sense to be upgrading because they were adding new features and then we sort of stopped for",
    "start": "3178559",
    "end": "3185339"
  },
  {
    "text": "a while and didn't didn't upgrade because we were on something that was stable then they started deprecating things as well behind us so we sort of",
    "start": "3185339",
    "end": "3191189"
  },
  {
    "text": "had to start moving to catch up with them and then there was some specific versions we had to move to correct between because of that certificate",
    "start": "3191189",
    "end": "3197219"
  },
  {
    "text": "support issue that I talked about again so we weren't just trying to keep up with the head that we went that's not",
    "start": "3197219",
    "end": "3202829"
  },
  {
    "text": "why we were doing it but yeah there was still a lot of necessary change at that point the question was how we move to",
    "start": "3202829",
    "end": "3212429"
  },
  {
    "text": "event sourcing since no but I think we will either for the next project or we",
    "start": "3212429",
    "end": "3218069"
  },
  {
    "text": "might rewrite this one at some stage it is pretty small end of the day and I think we can rewrite it quickly now",
    "start": "3218069",
    "end": "3224009"
  },
  {
    "text": "we've got the contract of the event sort it out one thing we are going to be doing",
    "start": "3224009",
    "end": "3230699"
  },
  {
    "text": "really soon is going and fixing all the synchronization issues and making sure everything's guaranteed delivery and that sort of stuff cool all right we'll",
    "start": "3230699",
    "end": "3240479"
  },
  {
    "text": "have about five minutes back and get to the pub with a little belly thanks everybody",
    "start": "3240479",
    "end": "3245599"
  },
  {
    "text": "you",
    "start": "3246289",
    "end": "3248349"
  }
]