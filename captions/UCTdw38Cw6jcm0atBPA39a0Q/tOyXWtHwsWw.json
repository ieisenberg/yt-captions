[
  {
    "text": "so welcome everyone welcome to the session implementing zero downtime application deployments",
    "start": "900",
    "end": "8220"
  },
  {
    "text": "on Azure pass and uh when I woke up this morning",
    "start": "8220",
    "end": "13559"
  },
  {
    "text": "um I got all kinds of messages from uh some of my colleagues that said to me",
    "start": "13559",
    "end": "18600"
  },
  {
    "text": "Marcel you're doing a session on zero downtime but are you aware of the fact",
    "start": "18600",
    "end": "24300"
  },
  {
    "text": "that your cloud provider is actually not um so um I added the subtitle for today",
    "start": "24300",
    "end": "31340"
  },
  {
    "text": "assuming your cloud provider is up and running because apparently this morning they had an outage of about four hours",
    "start": "31340",
    "end": "37320"
  },
  {
    "text": "on networking uh and uh yeah uh I am assuming that our Cloud infrastructure",
    "start": "37320",
    "end": "44460"
  },
  {
    "text": "is there and on top of that we will try to do zero downtime deployments of our",
    "start": "44460",
    "end": "50039"
  },
  {
    "text": "applications uh using uh different past services that we can use within azure my",
    "start": "50039",
    "end": "56219"
  },
  {
    "text": "name is Marcel DeVries I'm the CEO of CBI experience and CEO stands in my",
    "start": "56219",
    "end": "62820"
  },
  {
    "text": "opinion for coding executive officer uh I I strongly believe on in the ABCs of",
    "start": "62820",
    "end": "69720"
  },
  {
    "text": "always decoding uh because yeah I think that that's the best way to uh to work",
    "start": "69720",
    "end": "74760"
  },
  {
    "text": "with your Tech teams to actually bring quality applications to your customers",
    "start": "74760",
    "end": "82460"
  },
  {
    "text": "so let me get started with first what are the ingredients to be successful if",
    "start": "83220",
    "end": "88259"
  },
  {
    "text": "it comes to doing a zero downtime deployment and for that we need a couple of ingredients and uh well in my hobby time",
    "start": "88259",
    "end": "95579"
  },
  {
    "text": "I'm also a hobby and a hobby Chef so I thought why not use just like ingredients that we need so first of all",
    "start": "95579",
    "end": "102240"
  },
  {
    "text": "we need a stateless application and uh apparently uh although this is something",
    "start": "102240",
    "end": "108420"
  },
  {
    "text": "that we've been striving for I think since uh the 1990s or something that that is a good way to scale your",
    "start": "108420",
    "end": "115079"
  },
  {
    "text": "applications um I want to have just a short uh",
    "start": "115079",
    "end": "120659"
  },
  {
    "text": "conversation on what means stateless and what can we do with that state then the next thing that we need is we need to",
    "start": "120659",
    "end": "126180"
  },
  {
    "text": "separate what we call deployment from release and apparently in all the years that",
    "start": "126180",
    "end": "131879"
  },
  {
    "text": "we've been doing it this is not very common for everyone and what I mean by",
    "start": "131879",
    "end": "137180"
  },
  {
    "text": "separating deployment from release is something that we will go into more detail but it has to do with the fact",
    "start": "137180",
    "end": "143099"
  },
  {
    "text": "that we want to get rid of the fact that the moment we install software on a",
    "start": "143099",
    "end": "148200"
  },
  {
    "text": "server that does not mean any downtime right so we need to figure out a way to do it in such a way that we can deploy",
    "start": "148200",
    "end": "156000"
  },
  {
    "text": "while our application is up and running and that's the reason we need to split deployment from release",
    "start": "156000",
    "end": "161099"
  },
  {
    "text": "the other thing that's crucial uh in terms of being zero down is that you",
    "start": "161099",
    "end": "166680"
  },
  {
    "text": "need to add observability to your application and I will go in a little bit more detail there I have a nice and",
    "start": "166680",
    "end": "172860"
  },
  {
    "text": "little demo also to show you what you can do if you're working in for example the.net ecosystem to get uh",
    "start": "172860",
    "end": "179640"
  },
  {
    "text": "observability into your system and I will have a short chat with you on what does it mean in terms of observability",
    "start": "179640",
    "end": "186360"
  },
  {
    "text": "in relation with these past services that also rely on some information they",
    "start": "186360",
    "end": "192120"
  },
  {
    "text": "need to ensure that they can either roll forward or roll back your deployments",
    "start": "192120",
    "end": "197400"
  },
  {
    "text": "the other thing that I need to discuss is infrastructure we need infrastructure to make this happen so we'll have a look",
    "start": "197400",
    "end": "203519"
  },
  {
    "text": "at specifically two types of infrastructure I would say mainly two types of infrastructure within Azure and",
    "start": "203519",
    "end": "210239"
  },
  {
    "text": "that is azure web apps and that is uh AKs Azure kubernetes Services because those are the two most popular parts of",
    "start": "210239",
    "end": "217379"
  },
  {
    "text": "the platform and then I will end with a conversation on grades so now we're doing these zero",
    "start": "217379",
    "end": "224700"
  },
  {
    "text": "downtime deployments but Marcel nobody ever talks about I also have a database schema change so",
    "start": "224700",
    "end": "230819"
  },
  {
    "text": "let's have a conversation on that and how do we make that happen because that is something special and it needs to be",
    "start": "230819",
    "end": "236519"
  },
  {
    "text": "treated with care um and you also need to know what to automate and what not to automate",
    "start": "236519",
    "end": "241620"
  },
  {
    "text": "because there's also important some things just are not I would see economically feasible to automate and",
    "start": "241620",
    "end": "248400"
  },
  {
    "text": "perhaps give you even more control while not automating so it's not always automate everything just be very specific on what you automate",
    "start": "248400",
    "end": "255480"
  },
  {
    "text": "so let's have a short conversation on stateless because when we talk about",
    "start": "255480",
    "end": "260820"
  },
  {
    "text": "status applications what is it that we mean well what we mean is that the",
    "start": "260820",
    "end": "265919"
  },
  {
    "text": "moment we get in a request I can still build up some state if it comes to",
    "start": "265919",
    "end": "271500"
  },
  {
    "text": "processing that request nothing to worry about that because the idea is that we are stateless between",
    "start": "271500",
    "end": "278880"
  },
  {
    "text": "different requests that we have okay so meaning stateless has the meaning of",
    "start": "278880",
    "end": "284580"
  },
  {
    "text": "okay I can accumulate State during the processing of my request for example the",
    "start": "284580",
    "end": "290759"
  },
  {
    "text": "outcomes of calculations the information you retrieve somewhere and and uh yeah made some decisions based on that but",
    "start": "290759",
    "end": "297600"
  },
  {
    "text": "then the moment we start giving the reply we need to ensure that we then get rid of that state in one shape way or",
    "start": "297600",
    "end": "303960"
  },
  {
    "text": "form and we either need to choose then to store that in a state store behind",
    "start": "303960",
    "end": "309300"
  },
  {
    "text": "your application meaning a database a reddish cache a local disk some kind of",
    "start": "309300",
    "end": "316020"
  },
  {
    "text": "storage or you wrap it up and then give it back to",
    "start": "316020",
    "end": "322080"
  },
  {
    "text": "the client so that the next time you get in a request you can pass it along the state that you accumulated so that the",
    "start": "322080",
    "end": "329520"
  },
  {
    "text": "service itself or the API itself is not bothered with the fact that it needs to get the state from somewhere and it",
    "start": "329520",
    "end": "336360"
  },
  {
    "text": "cannot be in memory that's the in yeah just uh something that is not possible because what we're going to do is we're",
    "start": "336360",
    "end": "344100"
  },
  {
    "text": "going to shoot our application through the Hat while we're in production okay and then we need to make sure that that",
    "start": "344100",
    "end": "351720"
  },
  {
    "text": "state is somewhere either in some back-end storage or a new package in something that you give to the client",
    "start": "351720",
    "end": "358080"
  },
  {
    "text": "and then stuff it in a cookie or just push it in the reply and know that you need to pass it along the moment you do",
    "start": "358080",
    "end": "363419"
  },
  {
    "text": "the next request now if you look at separating deployment",
    "start": "363419",
    "end": "369360"
  },
  {
    "text": "from release what we've been used to do and that's been common practice and I",
    "start": "369360",
    "end": "374639"
  },
  {
    "text": "see still I still see it happening I'm not sure if that's the same here in the UK but uh last Friday I wanted to do",
    "start": "374639",
    "end": "380759"
  },
  {
    "text": "something in my bank account and then all of a sudden it goes sorry but we are not available we are doing an upgrade of",
    "start": "380759",
    "end": "385860"
  },
  {
    "text": "our application and go wow it is 2023 and we still have downtime why well what",
    "start": "385860",
    "end": "393180"
  },
  {
    "text": "happens is that people then did not separate release from deployment because what they do is then say Okay first we",
    "start": "393180",
    "end": "400199"
  },
  {
    "text": "need to stop the traffic to my application hence the sign sorry you cannot get in uh so it's more like okay",
    "start": "400199",
    "end": "405900"
  },
  {
    "text": "we said this thing in front of our application and then we ensure that no traffic comes in anymore then we just",
    "start": "405900",
    "end": "412800"
  },
  {
    "text": "uninstall our application next we reinstall version two and then we remove",
    "start": "412800",
    "end": "419220"
  },
  {
    "text": "the barrier and we are back online again and we need to figure out a way to",
    "start": "419220",
    "end": "424500"
  },
  {
    "text": "separate these two concerns of doing the actual deployment versus the traffic that we get in and then redirecting that",
    "start": "424500",
    "end": "430979"
  },
  {
    "text": "in some way shape or form so what we need to do is we need to get started with something that understands the",
    "start": "430979",
    "end": "437580"
  },
  {
    "text": "routing of your traffic so that is the foundational piece that you need to do is narrow down to unemployment you need",
    "start": "437580",
    "end": "443940"
  },
  {
    "text": "to have something that is aware of the fact that something came in as a request and that the reply was sent we cannot",
    "start": "443940",
    "end": "452099"
  },
  {
    "text": "terminate anything that is in Flight we can terminate everything that is not either sent uh or after it's been",
    "start": "452099",
    "end": "459979"
  },
  {
    "text": "returned okay so what we're going to do is we're going to install version two on",
    "start": "459979",
    "end": "466319"
  },
  {
    "text": "some separate piece of Hardware some separate piece of infrastructure that we have and then what we will do is we say okay",
    "start": "466319",
    "end": "472979"
  },
  {
    "text": "let's move the traffic to version two of my application then the next step is of",
    "start": "472979",
    "end": "478199"
  },
  {
    "text": "course we stop the traffic of application number one and then we uninstall the application",
    "start": "478199",
    "end": "484139"
  },
  {
    "text": "rather simple right it's not that difficult well there are some of course",
    "start": "484139",
    "end": "489680"
  },
  {
    "text": "challenges that you need to be aware of now of course we can go for uh further",
    "start": "489680",
    "end": "496020"
  },
  {
    "text": "with it we're saying well we now install version three and then we move the traffic to three and then we stop the traffic on the other one and we can go",
    "start": "496020",
    "end": "501960"
  },
  {
    "text": "back and forth and back and forth this is better known also as blue green deployments perhaps you have heard of those and this is a very common practice",
    "start": "501960",
    "end": "509099"
  },
  {
    "text": "and this got started when we did web applications uh back in the uh what is it 90s and the two the 2000s or the",
    "start": "509099",
    "end": "515700"
  },
  {
    "text": "zeros I should say right but we built the first web application we did the traffic routing and we had on for",
    "start": "515700",
    "end": "521219"
  },
  {
    "text": "example IIs the whole notion of application request routing and those kind of things to get your traffic to",
    "start": "521219",
    "end": "527700"
  },
  {
    "text": "another instance of the application on the server now what we need is we need some way to",
    "start": "527700",
    "end": "534480"
  },
  {
    "text": "Route our traffic and for this in Azure you can use something which is called traffic manager so traffic manager is by",
    "start": "534480",
    "end": "541440"
  },
  {
    "text": "the way something that is not really I would say an active load balancer or something but traffic manager is more or",
    "start": "541440",
    "end": "547500"
  },
  {
    "text": "less some trickery that they are doing with DNS so what's actually going on is somewhere on the DNS servers you ensure",
    "start": "547500",
    "end": "554279"
  },
  {
    "text": "that um yeah it knows where the endpoints are and it will then ensure that the moment",
    "start": "554279",
    "end": "559980"
  },
  {
    "text": "we have some unavailability of our application the traffic is routed to the",
    "start": "559980",
    "end": "565140"
  },
  {
    "text": "other IP addresses underneath um so traffic manager provides four",
    "start": "565140",
    "end": "570720"
  },
  {
    "text": "options that we have it can Route traffic based on availability so if my service up and running it provides",
    "start": "570720",
    "end": "577860"
  },
  {
    "text": "routing based on round robin giving you a little bit of load balancing across",
    "start": "577860",
    "end": "582959"
  },
  {
    "text": "different servers that you might have it can do traffic based uh routing on",
    "start": "582959",
    "end": "589100"
  },
  {
    "text": "weights and that means that you can give percentages so you can say okay let's move ten percent of my traffic to one",
    "start": "589100",
    "end": "595560"
  },
  {
    "text": "server and 90 uh to the to the initial server and you can also do traffic uh",
    "start": "595560",
    "end": "602519"
  },
  {
    "text": "routing base on latency which is of course more interesting if it comes to okay we have people in Australia people",
    "start": "602519",
    "end": "609060"
  },
  {
    "text": "in Europe and people in the United States you have three server farms and you want people to connect to the most",
    "start": "609060",
    "end": "614519"
  },
  {
    "text": "local instance of your of your application now in the context of zero downtime",
    "start": "614519",
    "end": "620760"
  },
  {
    "text": "deployments we are interested in option one the availability of a service and",
    "start": "620760",
    "end": "625800"
  },
  {
    "text": "we're interested in option three we want to move traffic based on a certain weight because when you install a new",
    "start": "625800",
    "end": "632820"
  },
  {
    "text": "application do you want to hammer it all of a sudden with like 100 of traffic or would you like to slowly turn on the",
    "start": "632820",
    "end": "640080"
  },
  {
    "text": "knob if it comes to that traffic now Azure also has the Notions of web",
    "start": "640080",
    "end": "646980"
  },
  {
    "text": "applications and web applications have a capability called a deployment slot now",
    "start": "646980",
    "end": "653279"
  },
  {
    "text": "a deployment slot is nothing more than I would say a second instance of your",
    "start": "653279",
    "end": "658560"
  },
  {
    "text": "server be careful it's on the same application service plan meaning that if you are",
    "start": "658560",
    "end": "664620"
  },
  {
    "text": "hammering the server on the one hand your application or your server yeah is being used so don't start doing load",
    "start": "664620",
    "end": "671820"
  },
  {
    "text": "tests all of a sudden uh on a second instance that you create or a second slot that you have",
    "start": "671820",
    "end": "677519"
  },
  {
    "text": "um but the idea is that it can then help you swap between those different environments so you create more or less",
    "start": "677519",
    "end": "684060"
  },
  {
    "text": "a copy of what you have you can then install the new software on there and then do a so-called VIP swap which is",
    "start": "684060",
    "end": "690360"
  },
  {
    "text": "then the virtual IP swap meaning the traffic will go to the other way now this is something that we want to",
    "start": "690360",
    "end": "696959"
  },
  {
    "text": "use because this will really help us do the installation move the traffic and",
    "start": "696959",
    "end": "702000"
  },
  {
    "text": "then swap around like I just showed you in the picture the other thing is that if you do the",
    "start": "702000",
    "end": "708000"
  },
  {
    "text": "red green deployments it also really helps you on in terms of easy rollback",
    "start": "708000",
    "end": "713779"
  },
  {
    "text": "now to be honest I have the opinion that rollbacks is for chickens because I",
    "start": "713779",
    "end": "719579"
  },
  {
    "text": "think you should roll forward if as long as you have enough Automation and performance in your deployment pipeline",
    "start": "719579",
    "end": "725279"
  },
  {
    "text": "but that said you can roll back because you can just ensure say okay it's not",
    "start": "725279",
    "end": "731279"
  },
  {
    "text": "going that well with my application just move to the previous instance because that one was running okay because it's",
    "start": "731279",
    "end": "736440"
  },
  {
    "text": "still there and still up and running becomes a little bit more difficult if you do the schema change but we'll come to that later",
    "start": "736440",
    "end": "743579"
  },
  {
    "text": "now if you look at Azure app services and the app service plans and then slots",
    "start": "743579",
    "end": "749700"
  },
  {
    "text": "what we can do is we can do traffic routing based on these deployment slots so we can set a percentage of traffic",
    "start": "749700",
    "end": "756180"
  },
  {
    "text": "that needs to go to one of these slots and you can have up to 20 of these different slots so you can even have 20",
    "start": "756180",
    "end": "762120"
  },
  {
    "text": "different versions of your application in production and have like two percent to this and five percent to that and ten",
    "start": "762120",
    "end": "768480"
  },
  {
    "text": "percent to that and then eventually it will add up to 100 of your traffic and it will then ensure that the traffic",
    "start": "768480",
    "end": "774180"
  },
  {
    "text": "will go to one particular server what happens underneath the covers and we'll show you that in a few minutes is that",
    "start": "774180",
    "end": "781500"
  },
  {
    "text": "this is Cookie based meaning that the moment you go to one instance or one",
    "start": "781500",
    "end": "786600"
  },
  {
    "text": "slot that means that you will get a cookie and based on that the application request routing underneath will pick up",
    "start": "786600",
    "end": "793740"
  },
  {
    "text": "the cooking and oh you need to go to that server okay so that way you are sure ensure that you will go to the same",
    "start": "793740",
    "end": "799860"
  },
  {
    "text": "version of the application because you can have multiple versions of your application in production and it might",
    "start": "799860",
    "end": "805139"
  },
  {
    "text": "be strange perhaps if you are going to V1 V2 V3 all the time back and forth",
    "start": "805139",
    "end": "811440"
  },
  {
    "text": "while you're doing just one transaction with your application now what is also nice is that there's",
    "start": "811440",
    "end": "817680"
  },
  {
    "text": "this option that you can add a question mark to your URI and this will then",
    "start": "817680",
    "end": "823980"
  },
  {
    "text": "instruct the routing infrastructure to go to a certain slot and this is",
    "start": "823980",
    "end": "829260"
  },
  {
    "text": "interesting when you have for example uh groups of users uh often called a cohort",
    "start": "829260",
    "end": "834839"
  },
  {
    "text": "of users that you selected to validate certain new features because then you",
    "start": "834839",
    "end": "840540"
  },
  {
    "text": "can send them the email and by the way we have version 2 there nobody will go to version two except when they have",
    "start": "840540",
    "end": "847079"
  },
  {
    "text": "this thing in the header or in the sorry in the URI and that well everybody",
    "start": "847079",
    "end": "852180"
  },
  {
    "text": "clicks emails right so that you just send it in the email and they will click it and after that they have the cookie",
    "start": "852180",
    "end": "858360"
  },
  {
    "text": "and they will go to that particular version now the moment you would take out that version or that slot it will just revert",
    "start": "858360",
    "end": "865620"
  },
  {
    "text": "to production so that it will then get rid of that instance of that version",
    "start": "865620",
    "end": "871200"
  },
  {
    "text": "make sense good let me show you web apps",
    "start": "871200",
    "end": "876360"
  },
  {
    "text": "ion just very shortly so what I did is I created the NDC web",
    "start": "876360",
    "end": "883500"
  },
  {
    "text": "app and you can see over here that this web app is found over here and this is",
    "start": "883500",
    "end": "889079"
  },
  {
    "text": "my Global ticket application you see this is the most fancy application to buy tickets and I made it extremely ugly",
    "start": "889079",
    "end": "896220"
  },
  {
    "text": "so that you can see different versions of my ugly application okay but then at least it's visible what we're doing uh",
    "start": "896220",
    "end": "902820"
  },
  {
    "text": "all the time now this application goes to a back-end store retrieves the ticket",
    "start": "902820",
    "end": "908399"
  },
  {
    "text": "information and then you can buy tickets it's your yeah I would say uh average run-of-the-mill type of application",
    "start": "908399",
    "end": "914699"
  },
  {
    "text": "where we do demos with right there's nobody runs this in production only we on stage",
    "start": "914699",
    "end": "920940"
  },
  {
    "text": "um now this application is deployed to you can see that this is",
    "start": "920940",
    "end": "926699"
  },
  {
    "text": "my production slot because there's nothing special about this URI except that's just the name of this application",
    "start": "926699",
    "end": "932399"
  },
  {
    "text": "but I can go over here and go to my deployment slots you can see that I have two deployment slots here",
    "start": "932399",
    "end": "939180"
  },
  {
    "text": "you can see that I have a deployment slot called production and you see that I have the NDC web app",
    "start": "939180",
    "end": "946620"
  },
  {
    "text": "staging that's the one that I created I can create multiple of these and you can also see that there is traffic",
    "start": "946620",
    "end": "952620"
  },
  {
    "text": "percentage over here so I can State the percentage of traffic I would like to Route into a particular instance of a",
    "start": "952620",
    "end": "960360"
  },
  {
    "text": "slot that I have now be very careful here because you want to use this question mark thing on",
    "start": "960360",
    "end": "966720"
  },
  {
    "text": "the URI the the moment you create these deployment slots you will see the exact",
    "start": "966720",
    "end": "972360"
  },
  {
    "text": "same picture as this but this is then a little bit grayed out and zero that means that even if you send in the",
    "start": "972360",
    "end": "979380"
  },
  {
    "text": "question mark whatever it will not route there because you not allowed it what you need to do is very obvious you need",
    "start": "979380",
    "end": "986160"
  },
  {
    "text": "to punch in the number zero press save you have exactly the same result a",
    "start": "986160",
    "end": "991860"
  },
  {
    "text": "little bit less fake than the gray and then that's the moment you can go to that particular slot you enabled or more",
    "start": "991860",
    "end": "998940"
  },
  {
    "text": "or less made explicit that you can Route traffic there it's in the documentation but I just",
    "start": "998940",
    "end": "1003980"
  },
  {
    "text": "want to mention you because when you do this the first time at home you go like what's going on uh and of course this",
    "start": "1003980",
    "end": "1009980"
  },
  {
    "text": "always takes me some time to remember like oh darn yeah I I had to do the zero in there",
    "start": "1009980",
    "end": "1015620"
  },
  {
    "text": "um so if I go to staging you will see that I see the exact same",
    "start": "1015620",
    "end": "1022339"
  },
  {
    "text": "view within Azure if it comes to my application but the big difference here is when Azure is up and running it",
    "start": "1022339",
    "end": "1029720"
  },
  {
    "text": "should show me here another URI and that other URI shows me then where",
    "start": "1029720",
    "end": "1035120"
  },
  {
    "text": "my URI is if I would like to go to staging luckily I know where that is so I can go",
    "start": "1035120",
    "end": "1041660"
  },
  {
    "text": "here and then say let's go to it's just a naming convention desk and",
    "start": "1041660",
    "end": "1047480"
  },
  {
    "text": "then staging uh oh I need to type that without caps staging",
    "start": "1047480",
    "end": "1053720"
  },
  {
    "text": "I don't want to shout on stage right so um staging enter this",
    "start": "1053720",
    "end": "1060200"
  },
  {
    "text": "oh yeah I delete the P thank you that's why I love",
    "start": "1060200",
    "end": "1065860"
  },
  {
    "text": "an audience that helps me so now you see it's more ugly but now it's blue okay so you see that I have two different",
    "start": "1066140",
    "end": "1071840"
  },
  {
    "text": "versions here I can now go back and forth now what's interesting here is that I can also go again back to",
    "start": "1071840",
    "end": "1080480"
  },
  {
    "text": "this location over here you see the orange one and now I can do the question mark routing staging",
    "start": "1080480",
    "end": "1088220"
  },
  {
    "text": "then I need to do control click because otherwise it's not refreshing my CSS thing but you see that now it picks up",
    "start": "1088220",
    "end": "1095600"
  },
  {
    "text": "the blue one now what I find intriguing is that it now set a cookie",
    "start": "1095600",
    "end": "1101900"
  },
  {
    "text": "so from now on I will go here all the time okay so this is the way you can pin",
    "start": "1101900",
    "end": "1108980"
  },
  {
    "text": "somebody to a specific instance but the moment this one becomes unavailable it will route it back because that's the",
    "start": "1108980",
    "end": "1115220"
  },
  {
    "text": "traffic routing behind the scenes that knows oh it's not available anymore let's route it back to the the initial",
    "start": "1115220",
    "end": "1120380"
  },
  {
    "text": "instance so this is what you can use for zero downtime diplomas at least splitting the deployment and actually",
    "start": "1120380",
    "end": "1126140"
  },
  {
    "text": "the release of your software uh and we will go take that a few steps further uh",
    "start": "1126140",
    "end": "1131480"
  },
  {
    "text": "in just a couple of minutes um or one thing I can show you by the",
    "start": "1131480",
    "end": "1136700"
  },
  {
    "text": "way is here this here are the settings uh if I go to all my cookie data and go to NDC you'll see that I have my",
    "start": "1136700",
    "end": "1145840"
  },
  {
    "text": "websites.net if I go here you can then see that I have the ARR affinity for",
    "start": "1145840",
    "end": "1151460"
  },
  {
    "text": "those that have also worked in the 90s this is still application routing cookies that are used based on the good",
    "start": "1151460",
    "end": "1158720"
  },
  {
    "text": "old IIs infrastructure that was there in the past um yeah so uh those are the cookies that",
    "start": "1158720",
    "end": "1165860"
  },
  {
    "text": "you have and then yeah there's not much that you can see but they are at least here and if I remove them then I will go",
    "start": "1165860",
    "end": "1172520"
  },
  {
    "text": "back to the original instance so there's web apps website web apps are",
    "start": "1172520",
    "end": "1178340"
  },
  {
    "text": "really handy easy to use just deploy a new application move there and you're done okay",
    "start": "1178340",
    "end": "1185980"
  },
  {
    "text": "now then there's this infrastructure that uh everybody loves and hates I think uh if if I go to conferences then",
    "start": "1186380",
    "end": "1194360"
  },
  {
    "text": "there's a lot of talks about kubernetes and the fun thing is that kubernetes has a lot of this stuff that just shows you",
    "start": "1194360",
    "end": "1200780"
  },
  {
    "text": "more or less inside of the box it's just part of the infrastructure that you roll out when you're doing kubernetes of",
    "start": "1200780",
    "end": "1207320"
  },
  {
    "text": "course it's container based it has this notion of Health endpoints which will",
    "start": "1207320",
    "end": "1212600"
  },
  {
    "text": "come to and it can do the traffic routing for me and for that I want to take you on a little bit of a journey on",
    "start": "1212600",
    "end": "1220820"
  },
  {
    "text": "what that implies within kubernetes so that you understand what's going on behind the scenes the moment you're using this stuff okay so just a few",
    "start": "1220820",
    "end": "1228140"
  },
  {
    "text": "Concepts just to get you refreshed on kubernetes so who's using kubernetes today",
    "start": "1228140",
    "end": "1233360"
  },
  {
    "text": "few I see okay so let me give you a refresher and and hopefully yeah",
    "start": "1233360",
    "end": "1239900"
  },
  {
    "text": "it's interesting for everyone but the idea is that we do deployments and we do",
    "start": "1239900",
    "end": "1245480"
  },
  {
    "text": "a deployment and a deployment implies that we have a set of what we call pods a part can contain one container or more",
    "start": "1245480",
    "end": "1253220"
  },
  {
    "text": "containers and those containers together share the same IP range in the the same",
    "start": "1253220",
    "end": "1258740"
  },
  {
    "text": "port range that you have so you can address it on the exact same IP address with the exact same ports and it will go",
    "start": "1258740",
    "end": "1264080"
  },
  {
    "text": "to those containers it also shares storage and uh well-known patterns there",
    "start": "1264080",
    "end": "1270559"
  },
  {
    "text": "people might have used that is the notion of sidecargs so the idea of a side card is for example that you have a",
    "start": "1270559",
    "end": "1277460"
  },
  {
    "text": "container in here that does some Network magic and then for that it can for",
    "start": "1277460",
    "end": "1282500"
  },
  {
    "text": "example do SSL traffic while you are not aware of the fact that you're doing SSL traffic this is what happens when you're",
    "start": "1282500",
    "end": "1288860"
  },
  {
    "text": "using service meshes for example they have a side card that will take care of the certificate exchange and the SSL",
    "start": "1288860",
    "end": "1294980"
  },
  {
    "text": "implementation while you can just roll out your application without any taking taking care of anything of that security",
    "start": "1294980",
    "end": "1301460"
  },
  {
    "text": "thing okay so this is what we call a part so a pot contains one or more",
    "start": "1301460",
    "end": "1306500"
  },
  {
    "text": "containers and we can Route traffic to that particular part now if we would like to let's say host a",
    "start": "1306500",
    "end": "1314299"
  },
  {
    "text": "web application I could say well give me just one container in one pot and I can Route traffic to there but the idea is",
    "start": "1314299",
    "end": "1321200"
  },
  {
    "text": "that we more or less use different types of nodes that we have in our compute",
    "start": "1321200",
    "end": "1326240"
  },
  {
    "text": "cluster that we can then distribute uh traffic amongst and what we can do is",
    "start": "1326240",
    "end": "1332179"
  },
  {
    "text": "you can say well this application needs to be up and running a little bit more than usual so",
    "start": "1332179",
    "end": "1337460"
  },
  {
    "text": "I can up my replica count meaning that I want more parts of the same type but",
    "start": "1337460",
    "end": "1343100"
  },
  {
    "text": "then distribute it across my cluster on different nodes I can even say I want I",
    "start": "1343100",
    "end": "1348200"
  },
  {
    "text": "want it on different nodes I can say well I want it on a specific node set that we had or a node pool because that",
    "start": "1348200",
    "end": "1354559"
  },
  {
    "text": "has for example GPU capabilities in the other is more like a memory optimized or",
    "start": "1354559",
    "end": "1359780"
  },
  {
    "text": "the other is compute optimized you can have different node pools where you can move stuff too now the replica set is",
    "start": "1359780",
    "end": "1366640"
  },
  {
    "text": "responsible of creating enough instances of those parts based on the definition",
    "start": "1366640",
    "end": "1372260"
  },
  {
    "text": "that we created and the definition is what we call the desired state so what",
    "start": "1372260",
    "end": "1378440"
  },
  {
    "text": "we do with the kubernetes Clusters we say hey cluster can you give me three",
    "start": "1378440",
    "end": "1383840"
  },
  {
    "text": "instances of my web application and it will go and fix that for you now",
    "start": "1383840",
    "end": "1389179"
  },
  {
    "text": "those three instances will then be replicated across the different nodes making sure that it lands on the right",
    "start": "1389179",
    "end": "1394760"
  },
  {
    "text": "compute that you want it to be now what it will also do is it will take care of looking at how well is my",
    "start": "1394760",
    "end": "1402080"
  },
  {
    "text": "application doing it has this notion of what we call liveliness probes it can check is is my application still up and",
    "start": "1402080",
    "end": "1409100"
  },
  {
    "text": "running yes or no how healthy is my application which we call Health endpoints it can also probe so-called",
    "start": "1409100",
    "end": "1416120"
  },
  {
    "text": "Readiness endpoint and we'll get back to you in a little bit more detail because the Readiness",
    "start": "1416120",
    "end": "1421340"
  },
  {
    "text": "probe tells me that I as an application am ready to receive traffic",
    "start": "1421340",
    "end": "1428000"
  },
  {
    "text": "now you might see where I'm going here because I can then indicate that I'm ready to receive traffic meaning that",
    "start": "1428000",
    "end": "1434299"
  },
  {
    "text": "the moment my application comes up it can then do some munching perhaps fill some caches reach out to queues get some",
    "start": "1434299",
    "end": "1442280"
  },
  {
    "text": "connectivity to other systems and then signal I'm ready to be used that ensures",
    "start": "1442280",
    "end": "1448039"
  },
  {
    "text": "that initial requests coming into your application are pre-cached are ensured",
    "start": "1448039",
    "end": "1453740"
  },
  {
    "text": "that it will be responsive instead of your first call all of a sudden being hit and yeah waiting like for seconds to",
    "start": "1453740",
    "end": "1460100"
  },
  {
    "text": "for something to happen so that Readiness probe is really important because it is used to",
    "start": "1460100",
    "end": "1466880"
  },
  {
    "text": "determine if traffic can be sent to your instance of your application okay if you",
    "start": "1466880",
    "end": "1473179"
  },
  {
    "text": "do not provide this it will just send traffic the moment the thing comes up okay so that's important to know now",
    "start": "1473179",
    "end": "1480980"
  },
  {
    "text": "furthermore kubernetes has in the desired State configuration a definition of am I doing a so-called rolling update",
    "start": "1480980",
    "end": "1489260"
  },
  {
    "text": "or do I replace now when I do a replace it is compared",
    "start": "1489260",
    "end": "1495919"
  },
  {
    "text": "to what I showed you before we just put the marker in front no traffic allowed you replace your application it comes up",
    "start": "1495919",
    "end": "1502760"
  },
  {
    "text": "again and then we get traffic again okay now if we do a rolling update it",
    "start": "1502760",
    "end": "1510020"
  },
  {
    "text": "will take care of bringing new instances into uh the the note in the into the",
    "start": "1510020",
    "end": "1515419"
  },
  {
    "text": "cluster ensuring that we can send traffic there and after that deleting or",
    "start": "1515419",
    "end": "1520880"
  },
  {
    "text": "removing the old pods and then removing the traffic from those particular instances",
    "start": "1520880",
    "end": "1526640"
  },
  {
    "text": "now this implies that you see that parts are mortal meaning we can spin them up",
    "start": "1526640",
    "end": "1532940"
  },
  {
    "text": "we can spin them down but they have a particular IP address so I need to take care in some in some way of the",
    "start": "1532940",
    "end": "1538880"
  },
  {
    "text": "networking infrastructure to ensure that I'm routing to a certain place so that I'm not all of a sudden confused like oh",
    "start": "1538880",
    "end": "1544700"
  },
  {
    "text": "the part is gone okay because it might have been shot through the head or might have been recycled because my liveliness",
    "start": "1544700",
    "end": "1551539"
  },
  {
    "text": "broke might have said I don't feel so healthy anymore should be through that give me a new instance",
    "start": "1551539",
    "end": "1557299"
  },
  {
    "text": "okay and I will show you uh in a few minutes that um you can program these liveliness",
    "start": "1557299",
    "end": "1563360"
  },
  {
    "text": "probes yourself for example on your memory consumption or other stuff that you think okay this is not healthy give",
    "start": "1563360",
    "end": "1569840"
  },
  {
    "text": "me a new Fresh instance for example now by the way this is not a way to mitigate memory leaks you just need to fix them",
    "start": "1569840",
    "end": "1575299"
  },
  {
    "text": "but it's it's the the cheap way to uh to get yourself into an okay-ish state",
    "start": "1575299",
    "end": "1582559"
  },
  {
    "text": "now this desired State needs to be defined in yaml okay so what we will",
    "start": "1582559",
    "end": "1588740"
  },
  {
    "text": "have is we have what we call the deployment the replica set and the part and we have one or more parts that we",
    "start": "1588740",
    "end": "1593960"
  },
  {
    "text": "have in a deployment now what we do is we Define the end that we do a deployment we specify the number of",
    "start": "1593960",
    "end": "1600919"
  },
  {
    "text": "replicas so I'm saying I just want one part of this particular application then",
    "start": "1600919",
    "end": "1606140"
  },
  {
    "text": "I'm going to define the container comes from some location which is then called the container registry",
    "start": "1606140",
    "end": "1612559"
  },
  {
    "text": "and I'm just in this particular case saying well I want to have Global ticket web which isn't the front end and 433 is",
    "start": "1612559",
    "end": "1619520"
  },
  {
    "text": "then the port number that I'm interested or sorry the the the tag name that I'm interested in",
    "start": "1619520",
    "end": "1624620"
  },
  {
    "text": "now of course I can specify additional configuration information uh and this is",
    "start": "1624620",
    "end": "1630080"
  },
  {
    "text": "then what gets up and running okay yeah yeah",
    "start": "1630080",
    "end": "1636500"
  },
  {
    "text": "stop now what is important is that you know that we have these parts running in our cluster and all these parts are here",
    "start": "1636500",
    "end": "1643700"
  },
  {
    "text": "but I need to find a way to route my traffic to specific instances of those",
    "start": "1643700",
    "end": "1649039"
  },
  {
    "text": "uh applications that we have so for that we use a label so we set a label for example this is the back end and I'm",
    "start": "1649039",
    "end": "1655940"
  },
  {
    "text": "interested in this and then I can define something which is called a service so I can say give me a service pick up any",
    "start": "1655940",
    "end": "1662840"
  },
  {
    "text": "part that has the label backhand and then it will take care of the routing of the traffic to those particular parts",
    "start": "1662840",
    "end": "1670640"
  },
  {
    "text": "it will then on its side give you one IP address that you can go to and that IP address is stable",
    "start": "1670640",
    "end": "1676880"
  },
  {
    "text": "this is also available by name in terms of DNS within your cluster okay so if",
    "start": "1676880",
    "end": "1682580"
  },
  {
    "text": "you would go to a service based on its name it will always resolve to this particular IP address and it will then",
    "start": "1682580",
    "end": "1687860"
  },
  {
    "text": "ensure that underneath it will go to one of these parts that are available based on the label selection this makes it",
    "start": "1687860",
    "end": "1694159"
  },
  {
    "text": "possible that I can say I don't feel so well shoot it through the Hat I get a new instance with the label it gets",
    "start": "1694159",
    "end": "1700760"
  },
  {
    "text": "picked up and the traffic gets routed there and other traffic just gets routed to the other parts that are there giving",
    "start": "1700760",
    "end": "1707240"
  },
  {
    "text": "me the flexibility of switching between instances so you can imagine that I could create something with V1 V2 V3 and",
    "start": "1707240",
    "end": "1715100"
  },
  {
    "text": "in that particular way create different services that have different versions of my application",
    "start": "1715100",
    "end": "1720140"
  },
  {
    "text": "now the one thing that you also can do is can say okay this service needs to be exposed to the outer world and this is",
    "start": "1720140",
    "end": "1727220"
  },
  {
    "text": "where we then go to the interweb and that's why we say the service type is load balancer meaning that it will",
    "start": "1727220",
    "end": "1732260"
  },
  {
    "text": "communicate with the outside load balancer of the cluster and it will then give you the public IP address you go to",
    "start": "1732260",
    "end": "1737360"
  },
  {
    "text": "and then you can put on top of that DNS with a name and you get the name resolved and you are in your cluster",
    "start": "1737360",
    "end": "1743539"
  },
  {
    "text": "make sense okay so that was kubernetes 101.",
    "start": "1743539",
    "end": "1750380"
  },
  {
    "text": "now these services are the things that we are going to use inside our cluster because my front-end",
    "start": "1750380",
    "end": "1757460"
  },
  {
    "text": "application might need some apis that we have so what I will do is I will give my front end give me a replica set of let's",
    "start": "1757460",
    "end": "1764899"
  },
  {
    "text": "say 10 I get 10 of these instances across my different nodes in my cluster I have the same for my pods give me four",
    "start": "1764899",
    "end": "1772220"
  },
  {
    "text": "of those in terms of my API put a service in front of that and then it can",
    "start": "1772220",
    "end": "1777679"
  },
  {
    "text": "call into that service so that my front end parts know where I can find my API and of course on the top side you can",
    "start": "1777679",
    "end": "1785000"
  },
  {
    "text": "then access that through my public IP address this is the way we arrange the traffic within the cluster",
    "start": "1785000",
    "end": "1791840"
  },
  {
    "text": "now you might say okay but then I get all these different IP addresses and IP addresses are expensive and for that we",
    "start": "1791840",
    "end": "1797299"
  },
  {
    "text": "have the notion of an Ingress controller where we can say okay we have one endpoint where things come in and we can then create a routing table which will",
    "start": "1797299",
    "end": "1804260"
  },
  {
    "text": "go to a different service okay so we can say surface front-end service backend and it still comes in on the one and",
    "start": "1804260",
    "end": "1810140"
  },
  {
    "text": "only endpoint that we provide as an Ingress control now what is important is these Ingress",
    "start": "1810140",
    "end": "1816620"
  },
  {
    "text": "controllers are replaceable with different types so you have all kinds of different flavors of these things nginx",
    "start": "1816620",
    "end": "1823820"
  },
  {
    "text": "is more or less the default that you get I more prefer traffic because it adheres",
    "start": "1823820",
    "end": "1830120"
  },
  {
    "text": "better to my uh liveliness and Readiness probes so I've seen uh instances of",
    "start": "1830120",
    "end": "1836000"
  },
  {
    "text": "where nginx all of a sudden routing traffic to my pods why I don't want it because they are not available yet but traffic is uh yeah doing a better job in",
    "start": "1836000",
    "end": "1843980"
  },
  {
    "text": "that in that respect but you can use Kong Ambassador um one of the things that I used lately",
    "start": "1843980",
    "end": "1849740"
  },
  {
    "text": "was a caddy which then takes care of the SSL termination on the front side without me taking any work on that",
    "start": "1849740",
    "end": "1859039"
  },
  {
    "text": "now important are the health checks and we need to have the health checks to",
    "start": "1859039",
    "end": "1864140"
  },
  {
    "text": "Define if we are ready to receive traffic um or if we are still alive",
    "start": "1864140",
    "end": "1870440"
  },
  {
    "text": "now for this it's important to know what the implications are so Readiness means that I get a new instance and am I ready",
    "start": "1870440",
    "end": "1877700"
  },
  {
    "text": "to accept new traffic liveliness is more about okay I am there I'm just doing my work but am I",
    "start": "1877700",
    "end": "1884480"
  },
  {
    "text": "responsive to what I do the implication is that if I say I am not healthy",
    "start": "1884480",
    "end": "1890179"
  },
  {
    "text": "anymore that your pot will get recycled I've seen people in production say",
    "start": "1890179",
    "end": "1896600"
  },
  {
    "text": "my liveliness probe will go to my database oh my database is not available I say I'm unhealthy and what will happen",
    "start": "1896600",
    "end": "1902120"
  },
  {
    "text": "you will get recycled but your database is still unavailable does not help okay so be sure that you test for the stuff",
    "start": "1902120",
    "end": "1908539"
  },
  {
    "text": "that you need to be testing for to get recycled because this is more or less your signal recycle me",
    "start": "1908539",
    "end": "1916179"
  },
  {
    "text": "now if you're using.net core and as part of the.net core framework we",
    "start": "1916279",
    "end": "1922159"
  },
  {
    "text": "have these nuget packages asp.net core Diagnostics Health Jacks we can just add those packages add one statement in our",
    "start": "1922159",
    "end": "1929360"
  },
  {
    "text": "startup code at Health Jacks and give it a routing endpoint and I get all the health information",
    "start": "1929360",
    "end": "1935120"
  },
  {
    "text": "that I need and I can create custom Health endpoint implementations if I want that then go and yeah do stuff that",
    "start": "1935120",
    "end": "1942500"
  },
  {
    "text": "is interesting for my application to Define if I'm healthy or not or if I am ready or not",
    "start": "1942500",
    "end": "1950299"
  },
  {
    "text": "now evident comes to a zero downturn deployment in a kubernetes class so what is going to happen",
    "start": "1950299",
    "end": "1956899"
  },
  {
    "text": "well we have this service and the service then routes traffic to three of my parts",
    "start": "1956899",
    "end": "1962179"
  },
  {
    "text": "in these parts you can see based on their temperature their green so they're healthy they're all happy and they're",
    "start": "1962179",
    "end": "1969140"
  },
  {
    "text": "receiving traffic and now I go and say okay I would like to start version 2 of my application so what I will do is I",
    "start": "1969140",
    "end": "1975860"
  },
  {
    "text": "will say well in my specification I have a replica set that needs three parts so",
    "start": "1975860",
    "end": "1981260"
  },
  {
    "text": "hence the three items here and I'm going to specify I want to do a rolling update now rolling update means I'm going to",
    "start": "1981260",
    "end": "1987559"
  },
  {
    "text": "replace them while the traffic is still going on in my application and I'm going to say that I want to have a Max search",
    "start": "1987559",
    "end": "1994820"
  },
  {
    "text": "of two meaning I can have two more than the three that I already specified and I",
    "start": "1994820",
    "end": "2000880"
  },
  {
    "text": "can say that I want Max unavailable in this particular case I do not want any available unavailability of my three",
    "start": "2000880",
    "end": "2006580"
  },
  {
    "text": "replicas so only add and then remove the",
    "start": "2006580",
    "end": "2011679"
  },
  {
    "text": "moment I route new traffic okay now how does that look so replicas 3 rolling",
    "start": "2011679",
    "end": "2017320"
  },
  {
    "text": "update in the search of two and Max unavailable of zero what will happen is the following so so first of all the",
    "start": "2017320",
    "end": "2023980"
  },
  {
    "text": "cluster will say okay I need to update I cannot take any of the current Parts out of the cluster so",
    "start": "2023980",
    "end": "2030940"
  },
  {
    "text": "first what it will do is we'll create pot with V2 and we'll create another one",
    "start": "2030940",
    "end": "2036039"
  },
  {
    "text": "and these are still unhealthy because they are now probed are you ready are you ready are you ready I'm not ready",
    "start": "2036039",
    "end": "2042399"
  },
  {
    "text": "yet so nothing will happen and this will just still work now the next thing what happened is one",
    "start": "2042399",
    "end": "2048040"
  },
  {
    "text": "of these will become available so V2 becomes available that means now",
    "start": "2048040",
    "end": "2053260"
  },
  {
    "text": "it's ready to accept traffic and what happens in this moment is that all of a sudden it starts to Route traffic to V2",
    "start": "2053260",
    "end": "2060780"
  },
  {
    "text": "this implies that I have multiple versions of my application up and running and you need to be able to deal",
    "start": "2060780",
    "end": "2067179"
  },
  {
    "text": "with this okay no cookie stuff going on here this is just traffic going in and",
    "start": "2067179",
    "end": "2072638"
  },
  {
    "text": "it can just be rerouted anywhere you want for the next call okay so if you want to have some stickiness there you",
    "start": "2072639",
    "end": "2077740"
  },
  {
    "text": "need to take care of that yourself now now it knows that it has four available",
    "start": "2077740",
    "end": "2083740"
  },
  {
    "text": "it can only do two search so maximum of five so it first needs to kill one",
    "start": "2083740",
    "end": "2089740"
  },
  {
    "text": "so it kills one and we will get a new one V2 needs to become healthy the moment it",
    "start": "2089740",
    "end": "2096580"
  },
  {
    "text": "becomes healthy and then this one becomes healthy it starts routing the traffic it can remove another one and",
    "start": "2096580",
    "end": "2102099"
  },
  {
    "text": "finally number three becomes available I can route the traffic and my last part",
    "start": "2102099",
    "end": "2108339"
  },
  {
    "text": "is killed as well so this is the way you zero down to unemployment takes place within the kubernetes cluster and this",
    "start": "2108339",
    "end": "2113859"
  },
  {
    "text": "is part of the default infrastructure when you just do give me an AKs cluster it's there for you it will work simply",
    "start": "2113859",
    "end": "2120940"
  },
  {
    "text": "like this the thing is your application need to be able to take care of that okay it needs to understand that this",
    "start": "2120940",
    "end": "2126099"
  },
  {
    "text": "can happen okay",
    "start": "2126099",
    "end": "2131380"
  },
  {
    "text": "now if it comes to observability I already discussed that we need this information on am I healthy and how am I",
    "start": "2131380",
    "end": "2137740"
  },
  {
    "text": "doing and for this there are different ways of looking at what observability",
    "start": "2137740",
    "end": "2142780"
  },
  {
    "text": "means so we need to know things like logging logging is what is going on in",
    "start": "2142780",
    "end": "2148359"
  },
  {
    "text": "my application is often used for troubleshooting and figuring out what is going on and analyzing unexpected Behavior",
    "start": "2148359",
    "end": "2154420"
  },
  {
    "text": "then we have the notion of tracing and tracing has all to do with the fact that I have all these parts going on in my",
    "start": "2154420",
    "end": "2159520"
  },
  {
    "text": "application all these different micro Services often called that I want to work with",
    "start": "2159520",
    "end": "2165280"
  },
  {
    "text": "um but then I need to have full end-to-end traceability of I get a request in where did the request go",
    "start": "2165280",
    "end": "2170680"
  },
  {
    "text": "which parts did it hit which application Parts did it hit you want to be able to follow that three uh along now",
    "start": "2170680",
    "end": "2178780"
  },
  {
    "text": "um the w3c has this notion of a trace contact specification and this is being",
    "start": "2178780",
    "end": "2183880"
  },
  {
    "text": "used a lot at the moment to stitch all these calls together by floating headers",
    "start": "2183880",
    "end": "2190000"
  },
  {
    "text": "across these calls so that it can then be correlated okay this is what we have in terms of observability then we have",
    "start": "2190000",
    "end": "2196119"
  },
  {
    "text": "the notion of metrics which is completely different Matrix is more about real-time system indicators how",
    "start": "2196119",
    "end": "2202119"
  },
  {
    "text": "healthy am I what are my call times how fast do I respond how much memory am I using how much CPU am I using and all",
    "start": "2202119",
    "end": "2208900"
  },
  {
    "text": "these other things okay so those are what we call metrics it's a constant amount of data is always the same set of",
    "start": "2208900",
    "end": "2214599"
  },
  {
    "text": "data but we're constantly getting more or less Telemetry data out of that and then you can do monitoring based on",
    "start": "2214599",
    "end": "2221560"
  },
  {
    "text": "all these things right so you can then say Okay use Prometheus use grafana use",
    "start": "2221560",
    "end": "2227099"
  },
  {
    "text": "what is it the application insights within Azure for example to get that data now what's interesting at the",
    "start": "2227099",
    "end": "2233020"
  },
  {
    "text": "moment you see that if it comes to these metrics you see open Telemetry now picking up in the market from the cncf",
    "start": "2233020",
    "end": "2239020"
  },
  {
    "text": "which is then the open specification on how we should do metrics tracing and all these other things if it comes to",
    "start": "2239020",
    "end": "2245200"
  },
  {
    "text": "getting this data so how can we add this to our",
    "start": "2245200",
    "end": "2251140"
  },
  {
    "text": "application if you want something that is completely independent of any stack",
    "start": "2251140",
    "end": "2256599"
  },
  {
    "text": "you can use for example dapper.io dapper.io is also by cncf adding these",
    "start": "2256599",
    "end": "2261880"
  },
  {
    "text": "side cards to your parts and it will then take care of the traffic routing it will then add the observability it will",
    "start": "2261880",
    "end": "2268119"
  },
  {
    "text": "add tracing and metrics and all this other information to your application and we can use a service mesh which more",
    "start": "2268119",
    "end": "2273700"
  },
  {
    "text": "or less does the same trick but this is done for the complete I would say cluster well Dapper is more focused on",
    "start": "2273700",
    "end": "2280900"
  },
  {
    "text": "your application okay now.net core tracing has this notion of",
    "start": "2280900",
    "end": "2286780"
  },
  {
    "text": "an activity class where you can trace the data through your application by using this activity class and if you",
    "start": "2286780",
    "end": "2294040"
  },
  {
    "text": "want to publish that information the data you need to specify that in your starter I already talked about open",
    "start": "2294040",
    "end": "2300880"
  },
  {
    "text": "Telemetry and application in size as a way to yeah observe your application",
    "start": "2300880",
    "end": "2306520"
  },
  {
    "text": "now let me show you a little thing that I have here and that is uh let me go",
    "start": "2306520",
    "end": "2313240"
  },
  {
    "text": "here Global ticket and I have my application over here",
    "start": "2313240",
    "end": "2319300"
  },
  {
    "text": "um and what I have here is the solution with the front-end application and what",
    "start": "2319300",
    "end": "2325720"
  },
  {
    "text": "I've done here is in my startup of my application um I have defined that I would like to",
    "start": "2325720",
    "end": "2332619"
  },
  {
    "text": "have these Health endpoints so you see map to health check endpoints",
    "start": "2332619",
    "end": "2339640"
  },
  {
    "text": "for Readiness and here I defined over here that I want health checks for",
    "start": "2339640",
    "end": "2345700"
  },
  {
    "text": "example slow dependency demo that I have which is then a slow dependency health check you can build them yourself so I",
    "start": "2345700",
    "end": "2351339"
  },
  {
    "text": "got a slow dependency health check over here that does nothing more than I will invoke it a couple of times and then I",
    "start": "2351339",
    "end": "2358119"
  },
  {
    "text": "will say I'm healthy okay so it just Waits on those probes to actually give",
    "start": "2358119",
    "end": "2363700"
  },
  {
    "text": "the data um and if I go back to my program over here",
    "start": "2363700",
    "end": "2369339"
  },
  {
    "text": "then you can also add what we call the uh yeah the default provided ones so for",
    "start": "2369339",
    "end": "2375640"
  },
  {
    "text": "example this one you get based on the package that you get so I all of a sudden I can say well I will be gone",
    "start": "2375640",
    "end": "2380980"
  },
  {
    "text": "unhealthy when I have more than 500 megabytes available used",
    "start": "2380980",
    "end": "2387578"
  },
  {
    "text": "and then you see that I want to have the statistics also for HTTP use HTTP client",
    "start": "2387760",
    "end": "2393280"
  },
  {
    "text": "metrics I get all the metrics information on calls that I'm doing to the outside world and get the response",
    "start": "2393280",
    "end": "2398440"
  },
  {
    "text": "times and the data and all those other information um and then you see that I get these",
    "start": "2398440",
    "end": "2403720"
  },
  {
    "text": "routes in here for Readiness and liveliness probes in there now when I start my application here",
    "start": "2403720",
    "end": "2411579"
  },
  {
    "text": "it will just run locally on my machine and if all's well it will just start up",
    "start": "2411579",
    "end": "2420280"
  },
  {
    "text": "a couple of instances so it starts the catalog service the front-end service in",
    "start": "2420280",
    "end": "2425859"
  },
  {
    "text": "my ordering service then I have my application you see the same ugly application and if I go here I can now",
    "start": "2425859",
    "end": "2433359"
  },
  {
    "text": "see okay Mr so I can go to my health endpoint and I can see ready am I ready",
    "start": "2433359",
    "end": "2439900"
  },
  {
    "text": "and if I look at this then you see that I'm unhealthy at the",
    "start": "2439900",
    "end": "2446500"
  },
  {
    "text": "moment and you can see the the details on why I am unhealthy so slow dependency data",
    "start": "2446500",
    "end": "2452760"
  },
  {
    "text": "says well the dependency is still initializing so there's more like a reasoning why I'm unhealthy the moment I",
    "start": "2452760",
    "end": "2458680"
  },
  {
    "text": "refresh this a couple of times see over here and you see that I become",
    "start": "2458680",
    "end": "2465339"
  },
  {
    "text": "healthy and this is then the moment that I start accepting traffic so this is the information I need to know when I can",
    "start": "2465339",
    "end": "2472180"
  },
  {
    "text": "accept the traffic I also have this notion of liveliness",
    "start": "2472180",
    "end": "2477579"
  },
  {
    "text": "probe and here you can see if I'm healthy or not and you see that I am currently healthy you see that the",
    "start": "2477579",
    "end": "2483640"
  },
  {
    "text": "process allocated is available here it's now 15 15 megabytes and what I did is I said well why not",
    "start": "2483640",
    "end": "2491440"
  },
  {
    "text": "create um an endpoint which is called leak memory",
    "start": "2491440",
    "end": "2498099"
  },
  {
    "text": "so now I'm starting to eat 25 Max per second to see what's going on and then I can",
    "start": "2498099",
    "end": "2503800"
  },
  {
    "text": "see over here when I go to Lively that my megabytes are going up to 86 311 you",
    "start": "2503800",
    "end": "2511180"
  },
  {
    "text": "see it's going up and up and up you see I'm I'm currently still healthy but I set it to go above 500 I become",
    "start": "2511180",
    "end": "2517540"
  },
  {
    "text": "unhealthy so now I'm unhealthy and now I'm reporting to my cluster okay",
    "start": "2517540",
    "end": "2522940"
  },
  {
    "text": "kill me because that's actually what you're saying and then it will recycle the part for",
    "start": "2522940",
    "end": "2528579"
  },
  {
    "text": "you it will start again and then well while you're not hitting this endpoint it will be all fine and nice and the",
    "start": "2528579",
    "end": "2534820"
  },
  {
    "text": "moment it will yeah leak memory again it will then get killed again so this is what we can use uh as the",
    "start": "2534820",
    "end": "2541780"
  },
  {
    "text": "endpoints now the other thing that I did is I have a metrics endpoint and this metric endpoint now gives me all kinds",
    "start": "2541780",
    "end": "2548320"
  },
  {
    "text": "of data on what's going on in my application so you can see here for example that the requests that I had was",
    "start": "2548320",
    "end": "2554859"
  },
  {
    "text": "a 200 okay to the in to the different endpoints that I had",
    "start": "2554859",
    "end": "2560020"
  },
  {
    "text": "um and you can see also like what's going on in terms of number of threats and",
    "start": "2560020",
    "end": "2566140"
  },
  {
    "text": "number of handles and use memory and all these other things and this is more like the static data that I can or the the",
    "start": "2566140",
    "end": "2572859"
  },
  {
    "text": "data that I can get all the time and I build pretty graphs out of that with grafana and use Prometheus to accumulate",
    "start": "2572859",
    "end": "2579160"
  },
  {
    "text": "that data for example and this can then give some insights for you okay how is my application doing and it's nothing",
    "start": "2579160",
    "end": "2586240"
  },
  {
    "text": "more than just adding these statements to your.net code and you get this like more or less for free by the way",
    "start": "2586240",
    "end": "2592060"
  },
  {
    "text": "everything is in a GitHub repository this open source if you go to view free smart sales slash NDC London demo you",
    "start": "2592060",
    "end": "2598960"
  },
  {
    "text": "will see all this code and use that as you wish",
    "start": "2598960",
    "end": "2605160"
  },
  {
    "text": "let me stop this one over here um so that is then observability",
    "start": "2606700",
    "end": "2612760"
  },
  {
    "text": "but we were just talking about kubernetes uh all the time so wouldn't it be nice we would just do",
    "start": "2612760",
    "end": "2620020"
  },
  {
    "text": "um deployment now to my kubernetes cluster based on this application and see what",
    "start": "2620020",
    "end": "2625180"
  },
  {
    "text": "it will actually do now for this I need to fiddle around a little bit because what I have here is",
    "start": "2625180",
    "end": "2633099"
  },
  {
    "text": "the following I have um let me go here",
    "start": "2633099",
    "end": "2638200"
  },
  {
    "text": "uh let me see this is not the right one so I will get rid of",
    "start": "2638200",
    "end": "2644500"
  },
  {
    "text": "this one um you see here that I have",
    "start": "2644500",
    "end": "2649660"
  },
  {
    "text": "um a resource Group which then contains my cluster so you see here my demo cluster",
    "start": "2649660",
    "end": "2655900"
  },
  {
    "text": "My Demo cluster is running here it has a couple of workloads in there it has a",
    "start": "2655900",
    "end": "2663160"
  },
  {
    "text": "couple of services in there it has these node pool over here where I have three nodes running at the moment with",
    "start": "2663160",
    "end": "2669940"
  },
  {
    "text": "kubernetes on on a Linux OS um and",
    "start": "2669940",
    "end": "2675339"
  },
  {
    "text": "I configured it as such that if I go here and I go to Global ticket you even see that I have https because I'm using",
    "start": "2675339",
    "end": "2682000"
  },
  {
    "text": "the caddy Ingress so this is my application running here okay and my application running here is defined in",
    "start": "2682000",
    "end": "2688660"
  },
  {
    "text": "kubernetes and if I go to kubernetes here you will see that if you have a dashboard you need to log into the",
    "start": "2688660",
    "end": "2695079"
  },
  {
    "text": "dashboard with this you can generate a token so let me go here and generate a",
    "start": "2695079",
    "end": "2700420"
  },
  {
    "text": "new token because they expire all the time so make it a little bit more secure right everybody can look at that all the",
    "start": "2700420",
    "end": "2707020"
  },
  {
    "text": "time so enter the token sign in and now what you see is that I have my application up and",
    "start": "2707020",
    "end": "2713619"
  },
  {
    "text": "running here I will go to my Global ticket application you see this is my application running front end is then",
    "start": "2713619",
    "end": "2721119"
  },
  {
    "text": "calling into ordering catalog and my SQL Server is also running in the cluster you see everything is up and running",
    "start": "2721119",
    "end": "2726280"
  },
  {
    "text": "everything is green everybody's happy at the moment now if you look at the front-end application you've seen that",
    "start": "2726280",
    "end": "2733060"
  },
  {
    "text": "it's now nicely orange so let's try to do a zero downtown deployment on",
    "start": "2733060",
    "end": "2739900"
  },
  {
    "text": "this thing so what I will do is I will go to let's go to my CSS over here",
    "start": "2739900",
    "end": "2746760"
  },
  {
    "text": "and get some favorite color in there um let's make it uh green",
    "start": "2746760",
    "end": "2755880"
  },
  {
    "text": "lawn green like laundry um save this um and then what I need to do is now",
    "start": "2755880",
    "end": "2763180"
  },
  {
    "text": "build my container push that container to The Container registry and then run a deployment on my",
    "start": "2763180",
    "end": "2769420"
  },
  {
    "text": "cluster to pick up that new container and then deploy it into the cluster okay so those are the steps that I need to take",
    "start": "2769420",
    "end": "2774700"
  },
  {
    "text": "now for that what I will do is I just made the change here to the green one I",
    "start": "2774700",
    "end": "2780220"
  },
  {
    "text": "will go over here and then go to my local directory structure where I will do a",
    "start": "2780220",
    "end": "2787420"
  },
  {
    "text": "Docker build of my Docker file this will now create a Docker container and uh",
    "start": "2787420",
    "end": "2794140"
  },
  {
    "text": "yeah make it ready to be pushed to my container registry I just just take it takes a couple of",
    "start": "2794140",
    "end": "2800079"
  },
  {
    "text": "seconds now what I see here is that there's a hash code that I can use that",
    "start": "2800079",
    "end": "2805599"
  },
  {
    "text": "yeah is more or less my image and what I will do is I will push um",
    "start": "2805599",
    "end": "2811240"
  },
  {
    "text": "my uh sorry I need to tag my image first and give it the right name so I will use",
    "start": "2811240",
    "end": "2818619"
  },
  {
    "text": "this hash give it this name and this will demo life",
    "start": "2818619",
    "end": "2823960"
  },
  {
    "text": "this is just the tag that I'm going to use and now what I'm going to do is I'm going to push this",
    "start": "2823960",
    "end": "2830280"
  },
  {
    "text": "demo live to my registry and this is then the name of",
    "start": "2830280",
    "end": "2837880"
  },
  {
    "text": "the container that I'm using and what I can do is then go over here I have to my solution items I have my",
    "start": "2837880",
    "end": "2845800"
  },
  {
    "text": "front-end definition you see here that I have the replicas is number of three you see that here is the location of my",
    "start": "2845800",
    "end": "2851859"
  },
  {
    "text": "container so it will be pulled and you will see that I have defined that I have these Health ready endpoints",
    "start": "2851859",
    "end": "2859480"
  },
  {
    "text": "or I say well wait five seconds before you try then try every 10 seconds if I'm ready",
    "start": "2859480",
    "end": "2867640"
  },
  {
    "text": "yes or no so you will see that it will take a couple of seconds because after a few tries I will return healthy and",
    "start": "2867640",
    "end": "2873579"
  },
  {
    "text": "that's in the moment it will pick it up if it fills more than five times",
    "start": "2873579",
    "end": "2878980"
  },
  {
    "text": "Let It Be don't bother now I also have here the Lively Pro where I say well",
    "start": "2878980",
    "end": "2884440"
  },
  {
    "text": "every 10 seconds Steve I'm still alive and if I do the health trick then you",
    "start": "2884440",
    "end": "2890079"
  },
  {
    "text": "will see that it will kill my part and it will then remove it from the cluster again",
    "start": "2890079",
    "end": "2895300"
  },
  {
    "text": "so I'm going to save this so now it knows to pick up uh my new container",
    "start": "2895300",
    "end": "2901720"
  },
  {
    "text": "so what I will do is we'll go over here and what I will do is I will do so-called Coupe cuddle apply Dash F of",
    "start": "2901720",
    "end": "2909880"
  },
  {
    "text": "My frontender Demo the file that I just showed you this will apply that to the cluster and then what I will do is I",
    "start": "2909880",
    "end": "2916839"
  },
  {
    "text": "will do an um get parts minus W and you see already that it now",
    "start": "2916839",
    "end": "2924400"
  },
  {
    "text": "created a new two Nuance that are not ready yet because the ready status is zero",
    "start": "2924400",
    "end": "2929920"
  },
  {
    "text": "and if I go to my dashboard you will see that it already starts",
    "start": "2929920",
    "end": "2936880"
  },
  {
    "text": "indicating some some issues there but in the meanwhile and I can go uh to my",
    "start": "2936880",
    "end": "2943440"
  },
  {
    "text": "selenium environment here run the application here and you can see that",
    "start": "2943440",
    "end": "2948640"
  },
  {
    "text": "that my application is still up and running here yeah and uh this is just going very",
    "start": "2948640",
    "end": "2955839"
  },
  {
    "text": "nicely I can see yeah my application just still up and running and then",
    "start": "2955839",
    "end": "2962319"
  },
  {
    "text": "finally it will pick up the new uh the items there if I go to the details",
    "start": "2962319",
    "end": "2968440"
  },
  {
    "text": "here you will then see that it's it is scaling up the replica sets so over here new replica set you can see",
    "start": "2968440",
    "end": "2976240"
  },
  {
    "text": "that if I go to for example one of these pods let me see",
    "start": "2976240",
    "end": "2982420"
  },
  {
    "text": "15 seconds ago this one you can see here that it failed a couple of time on the",
    "start": "2982420",
    "end": "2988300"
  },
  {
    "text": "uh on the probe that's the reason it was not sending traffic there yet",
    "start": "2988300",
    "end": "2995400"
  },
  {
    "text": "and now in the meanwhile you will see that it falls well it will then yeah eventually pick up my uh my application",
    "start": "2995500",
    "end": "3002460"
  },
  {
    "text": "let me see where huh intriguing",
    "start": "3002460",
    "end": "3008700"
  },
  {
    "text": "my selenium test just killed just got killed not sure why um if I go to the deployments here",
    "start": "3008700",
    "end": "3016140"
  },
  {
    "text": "front end load it now states that it is happy and",
    "start": "3016140",
    "end": "3023160"
  },
  {
    "text": "plunking away and it is cream okay so it actually my selenium test for some reason failed I'm",
    "start": "3023160",
    "end": "3029700"
  },
  {
    "text": "not sure why um and this was the way you then all of a sudden do this yeah rolling update of",
    "start": "3029700",
    "end": "3036119"
  },
  {
    "text": "your application now let me get back to you",
    "start": "3036119",
    "end": "3043560"
  },
  {
    "text": "the slides because we've now seen how to make this happen but a couple of things that we can",
    "start": "3043560",
    "end": "3049500"
  },
  {
    "text": "improve on this strategy and uh what we can we have seen this strategy more or",
    "start": "3049500",
    "end": "3055319"
  },
  {
    "text": "less we have an application running we installed a new one which is then the same as deploying a new part in my",
    "start": "3055319",
    "end": "3061020"
  },
  {
    "text": "cluster moving the traffic there it stopped the traffic uninstall and then",
    "start": "3061020",
    "end": "3066780"
  },
  {
    "text": "do the same again right this is what we've been doing now uh in kubernetes and in my web app definition",
    "start": "3066780",
    "end": "3073079"
  },
  {
    "text": "now what I would like to do is take it one step further and say well instead of this",
    "start": "3073079",
    "end": "3078420"
  },
  {
    "text": "install version two but you see it's a little bit of strange version too that I have and the strange version 2 has a",
    "start": "3078420",
    "end": "3084540"
  },
  {
    "text": "reason because what I would like to do is I would like to move the traffic there but have exactly the same results",
    "start": "3084540",
    "end": "3090000"
  },
  {
    "text": "as I have with my initial application so what will happen is it will Route",
    "start": "3090000",
    "end": "3095520"
  },
  {
    "text": "traffic internally in my application to the exact same code that I had in version one",
    "start": "3095520",
    "end": "3102000"
  },
  {
    "text": "and what I will do is then say well let's monitor the behavior of my application did anything change and it",
    "start": "3102000",
    "end": "3107160"
  },
  {
    "text": "falls well application code one and two are the same so nothing should have changed",
    "start": "3107160",
    "end": "3112319"
  },
  {
    "text": "so now I know that I had a stable rollout of my application and what I will do is then release the new feature",
    "start": "3112319",
    "end": "3119099"
  },
  {
    "text": "and this is actually diverting the release because what we're now going to say is I'm going to toggle the traffic",
    "start": "3119099",
    "end": "3124619"
  },
  {
    "text": "inside of my application to a different code base that I have this is a way that",
    "start": "3124619",
    "end": "3130020"
  },
  {
    "text": "we can internally separate release from deployment where we say well let's have the notion of a",
    "start": "3130020",
    "end": "3136500"
  },
  {
    "text": "feature toggle toggling between different variations that I have of my",
    "start": "3136500",
    "end": "3141780"
  },
  {
    "text": "application and then what will happen is we will monitor version 2 behavior and we can",
    "start": "3141780",
    "end": "3147720"
  },
  {
    "text": "also monitor business criteria that I have I can also add metric for example number of items sold number of items in",
    "start": "3147720",
    "end": "3154079"
  },
  {
    "text": "my shopping basket and all these other things to validate if my hypothesis is okay and based on that and say okay stop",
    "start": "3154079",
    "end": "3160680"
  },
  {
    "text": "the traffic there I'm confident of this version and then what I will do is install a new version of this one where",
    "start": "3160680",
    "end": "3167040"
  },
  {
    "text": "the traffic is there because that's then the same as what we have in production and gets rid of the",
    "start": "3167040",
    "end": "3172380"
  },
  {
    "text": "feature toggles with a really important get rid of it because otherwise it's technical debt",
    "start": "3172380",
    "end": "3178280"
  },
  {
    "text": "so feature toggles are on important mechanism to improve the speed of",
    "start": "3178440",
    "end": "3185099"
  },
  {
    "text": "delivery and what I try to do when I work with companies is that I will move to a new mantra and that's what we will",
    "start": "3185099",
    "end": "3191400"
  },
  {
    "text": "do is we are going to have a mantra of releasing at least 30 times a day",
    "start": "3191400",
    "end": "3197099"
  },
  {
    "text": "and you go 30 times why we do not need 30 times but",
    "start": "3197099",
    "end": "3202680"
  },
  {
    "text": "the thing is I need you to be programmed in your brain that it needs to be done 30 times a day because then there is no",
    "start": "3202680",
    "end": "3209940"
  },
  {
    "text": "time to do a change Advisory Board there's no time to do a PowerPoint presentation",
    "start": "3209940",
    "end": "3215220"
  },
  {
    "text": "there's no time to get approval from six layers in the company to actually release something to production so it's",
    "start": "3215220",
    "end": "3221280"
  },
  {
    "text": "that Mantra that you need to make the change from an organizational perspective to make this happen and these are the techniques that you can",
    "start": "3221280",
    "end": "3227700"
  },
  {
    "text": "use because now I can deploy anytime I want businesses never interrupted because it's still the same software",
    "start": "3227700",
    "end": "3233579"
  },
  {
    "text": "going to production in their perspective the only thing I do is now have feature toggles where I can turn things off for",
    "start": "3233579",
    "end": "3240059"
  },
  {
    "text": "specific uses that I have being in my company being in the special group interest group that I have in my user",
    "start": "3240059",
    "end": "3247140"
  },
  {
    "text": "base and that's the way you didn't actually move to production multiple times a day and then you can say",
    "start": "3247140",
    "end": "3252380"
  },
  {
    "text": "rollback is for chickens that's the idea so if you look at feature toggles versus",
    "start": "3252380",
    "end": "3258119"
  },
  {
    "text": "branches because often we're currently using branches to make differences between uh yeah features that you have",
    "start": "3258119",
    "end": "3266000"
  },
  {
    "text": "is that branches um",
    "start": "3266000",
    "end": "3271559"
  },
  {
    "text": "they need to learn live together beside each other and you have different codes that goes to production and that",
    "start": "3271559",
    "end": "3277140"
  },
  {
    "text": "actually is your main line all the time and what you would like to do is always release from me and then move everything",
    "start": "3277140",
    "end": "3283020"
  },
  {
    "text": "in there but when it's not finished yet you guard it with a feature toggle that way you can always move to Main and",
    "start": "3283020",
    "end": "3289619"
  },
  {
    "text": "always deliver to production even if the feature is not finished now there are some pros and cons to this",
    "start": "3289619",
    "end": "3295440"
  },
  {
    "text": "so the pros are that you can release like any time of the day really nicely separated release and deployment from",
    "start": "3295440",
    "end": "3301980"
  },
  {
    "text": "each other because the release is then the feature toggle not even the traffic and you can do multi-level feature",
    "start": "3301980",
    "end": "3308099"
  },
  {
    "text": "toggles while we and that gives us the ability to do a different deployment strategy and I will come to that in my",
    "start": "3308099",
    "end": "3313619"
  },
  {
    "text": "final remarks now the con is here that you need to manage all these toggles and",
    "start": "3313619",
    "end": "3320579"
  },
  {
    "text": "um yeah it can sometimes be a what we call a pain in the neck if it comes to",
    "start": "3320579",
    "end": "3327059"
  },
  {
    "text": "removing them and not forgetting to remove them because that's really important otherwise you're going to make a mess out of things",
    "start": "3327059",
    "end": "3332940"
  },
  {
    "text": "now you have all kinds of toggles that you can use and uh sir Fowler has",
    "start": "3332940",
    "end": "3338460"
  },
  {
    "text": "written a nice post on this the type of feature toggles that you can have uh",
    "start": "3338460",
    "end": "3343800"
  },
  {
    "text": "what I'm talking about is the notion of release toggles something that we only use to release our software and divert",
    "start": "3343800",
    "end": "3350460"
  },
  {
    "text": "that from the deployment that we're doing in moving the traffic okay now you always have these things like permission",
    "start": "3350460",
    "end": "3355740"
  },
  {
    "text": "toggles that's just your authorization model that you have in your application and if you want to do feature toggles the only thing you need to know is an if",
    "start": "3355740",
    "end": "3361680"
  },
  {
    "text": "statement because that's actually what a feature toggle is right it's just how do I toggle the if statement which is then",
    "start": "3361680",
    "end": "3367440"
  },
  {
    "text": "the complexity where we also need to know the dependencies between front and backhand middleware buses",
    "start": "3367440",
    "end": "3374040"
  },
  {
    "text": "etc etc now if you look at deployment strategies if we have all these technologies that I",
    "start": "3374040",
    "end": "3380640"
  },
  {
    "text": "just showed you we can do things like a b testing and a b testing is I have multiple versions in production and I",
    "start": "3380640",
    "end": "3386940"
  },
  {
    "text": "can then based on my Telemetry see how well is my application doing and this application version is doing better than",
    "start": "3386940",
    "end": "3393359"
  },
  {
    "text": "that application version is doing based on the Telemetry based on the traffic that I'm moving and shifting in",
    "start": "3393359",
    "end": "3398700"
  },
  {
    "text": "different ways you then need to have these analytics and get all this data",
    "start": "3398700",
    "end": "3403859"
  },
  {
    "text": "out of your application to actually make decisions on that this what makes sense or what does not make sense",
    "start": "3403859",
    "end": "3410339"
  },
  {
    "text": "one of the things that's really important here is that you need to select your cohorts very well and a cohort is a group of users that you",
    "start": "3410339",
    "end": "3416579"
  },
  {
    "text": "define that need to see the new feature first and that is based on your hypothesis so you you have the idea I",
    "start": "3416579",
    "end": "3422940"
  },
  {
    "text": "will sell more because my background is now green then you need to Define how much do I think you need to measure that",
    "start": "3422940",
    "end": "3429059"
  },
  {
    "text": "and based on that decide we will keep it or we will move on to something else",
    "start": "3429059",
    "end": "3434700"
  },
  {
    "text": "now the other thing that you can do is the notion of a canary release and the canary release is where we say Okay",
    "start": "3434700",
    "end": "3439920"
  },
  {
    "text": "release something to production um and only the specific group of users",
    "start": "3439920",
    "end": "3446040"
  },
  {
    "text": "is going to uh yeah use this particular feature and we're going to validate that",
    "start": "3446040",
    "end": "3451619"
  },
  {
    "text": "things are not breaking and the whole notion of the king memory comes from the previous coal mines where people went in",
    "start": "3451619",
    "end": "3457440"
  },
  {
    "text": "with the canary and the canary has a special trade in difference from a human being that it",
    "start": "3457440",
    "end": "3463260"
  },
  {
    "text": "will die like in a few seconds when it gets toxic fumes and a human being has in like two minutes to run away",
    "start": "3463260",
    "end": "3469740"
  },
  {
    "text": "um and the idea is when the canary dies you need to roll back or roll forward if you're fast enough with a new",
    "start": "3469740",
    "end": "3476099"
  },
  {
    "text": "functionality you do this by using the whole notion of traffic routing with percentages and",
    "start": "3476099",
    "end": "3482640"
  },
  {
    "text": "feature toggles on based on cohorts to make the specific group of users that you want to Target if you're using web",
    "start": "3482640",
    "end": "3489059"
  },
  {
    "text": "apps just use the question mark name of the deployment slot and it will route the traffic to that particular instance",
    "start": "3489059",
    "end": "3496200"
  },
  {
    "text": "now there's also the notion of a dark Lounge and this is more like the canary in jail",
    "start": "3496200",
    "end": "3502920"
  },
  {
    "text": "um the idea here is that we have the feature to production but nobody can",
    "start": "3502920",
    "end": "3508200"
  },
  {
    "text": "actually see the product that the feature is alive this has been invented by Facebook where they had for example Facebook Chat they brought that into the",
    "start": "3508200",
    "end": "3515760"
  },
  {
    "text": "system they tested and said to see what it will do with their infrastructure how much load will it create how much memory",
    "start": "3515760",
    "end": "3522359"
  },
  {
    "text": "pressure do I get and it will just flow the data through there but not actual data the data is just derived from the",
    "start": "3522359",
    "end": "3528660"
  },
  {
    "text": "user interaction that you have on your normal system but you're pushing the data through there evaluating what it's",
    "start": "3528660",
    "end": "3534420"
  },
  {
    "text": "doing based on your Telemetry and information and then finally you can still decide to well take the blanks off",
    "start": "3534420",
    "end": "3541140"
  },
  {
    "text": "and then make it the canary or actually move to production as a full-fledged version of things yeah so you could also",
    "start": "3541140",
    "end": "3547680"
  },
  {
    "text": "say that it's a decapitated canary one thing I want to emphasize is that",
    "start": "3547680",
    "end": "3554160"
  },
  {
    "text": "you really need to be aware of not testing only for errors when you move to production I've seen it go wrong many",
    "start": "3554160",
    "end": "3560339"
  },
  {
    "text": "many times that people think oh there are no errors so we can move forward if you look at these graphs for example",
    "start": "3560339",
    "end": "3565680"
  },
  {
    "text": "then you see this is my happy system and then this is after deployment you",
    "start": "3565680",
    "end": "3572940"
  },
  {
    "text": "see zero errors zero errors this system",
    "start": "3572940",
    "end": "3578099"
  },
  {
    "text": "is in panic because my CPU is spiking my calls are",
    "start": "3578099",
    "end": "3583319"
  },
  {
    "text": "all of a sudden dropping here and I see that the times are going up to 10 to 5 seconds for a call so be aware that",
    "start": "3583319",
    "end": "3589980"
  },
  {
    "text": "memory consumption latency request times and all these things need to be monitored and not only the absence of",
    "start": "3589980",
    "end": "3595440"
  },
  {
    "text": "failure then to conclude this session database schema changes how do we deal",
    "start": "3595440",
    "end": "3602520"
  },
  {
    "text": "with them so it's important that if you make a database schema change you need",
    "start": "3602520",
    "end": "3607619"
  },
  {
    "text": "to follow a certain Playbook The Playbook is rather straightforward but take some tinkering to get right okay",
    "start": "3607619",
    "end": "3614520"
  },
  {
    "text": "you first need to create binaries that understand schema version one and schema",
    "start": "3614520",
    "end": "3620160"
  },
  {
    "text": "version two and you deploy them to production and they can deal with the fact that we have either one of the two",
    "start": "3620160",
    "end": "3626280"
  },
  {
    "text": "schemas then what you will do is you will deploy that to production and then we will",
    "start": "3626280",
    "end": "3632640"
  },
  {
    "text": "update um the database to the new schema because now my",
    "start": "3632640",
    "end": "3638760"
  },
  {
    "text": "application can deal with the new schema and then what I need to do is then",
    "start": "3638760",
    "end": "3643859"
  },
  {
    "text": "migrate the data to the new schema in a slow and graceful way because often I've",
    "start": "3643859",
    "end": "3649140"
  },
  {
    "text": "seen the people also say okay let's Hammer the database just do an update of all my gazillion records and you have",
    "start": "3649140",
    "end": "3654299"
  },
  {
    "text": "like a denial service attack on your own database which is not handy um and be careful with updating your",
    "start": "3654299",
    "end": "3660900"
  },
  {
    "text": "tables because when you update these tables you need to be aware of the fact that if you",
    "start": "3660900",
    "end": "3666240"
  },
  {
    "text": "make a change for example an update column and you do it in the wrong place you will take a table log and nobody can",
    "start": "3666240",
    "end": "3672420"
  },
  {
    "text": "get to the data anymore and it might take like minutes to complete",
    "start": "3672420",
    "end": "3677579"
  },
  {
    "text": "eventually we will then update the binaries to use only the new schema and then you remove the old schema so this",
    "start": "3677579",
    "end": "3683940"
  },
  {
    "text": "is the Playbook that you always go through now some tips that I have for you when you do this",
    "start": "3683940",
    "end": "3689339"
  },
  {
    "text": "um if you add columns to a table regardless of what your DBA wants regardless of your own OCD patterns",
    "start": "3689339",
    "end": "3696839"
  },
  {
    "text": "always do it as the last column do not insert it somewhere in the middle of your table because all of a sudden all",
    "start": "3696839",
    "end": "3703079"
  },
  {
    "text": "your tables need to be split and all the data needs to be rearranged on your disk not a handy thing to do always add it to",
    "start": "3703079",
    "end": "3710220"
  },
  {
    "text": "the end make it a nullable column because that is for example for a SQL Server a zero operation nothing happens",
    "start": "3710220",
    "end": "3717599"
  },
  {
    "text": "you just have all of a sudden the column which is nullable then you can gradually update the column to have values in",
    "start": "3717599",
    "end": "3723599"
  },
  {
    "text": "there and that do that with some nice queries that not Hammer your database all of a sudden and that way you have a",
    "start": "3723599",
    "end": "3729900"
  },
  {
    "text": "nice way to update and we've done this for databases where we had like a billion records in there added columns",
    "start": "3729900",
    "end": "3736799"
  },
  {
    "text": "to it was a zero operation no incidents happened because of that and we added columns to it just by appending nullable",
    "start": "3736799",
    "end": "3743760"
  },
  {
    "text": "columns which is a zero operation and then a good data migration strategy is",
    "start": "3743760",
    "end": "3749099"
  },
  {
    "text": "crucial um and ensure that you make a difference between for example your hot bath and",
    "start": "3749099",
    "end": "3756420"
  },
  {
    "text": "your cold path cold path meaning um users that are not active but your active engage users can be for example",
    "start": "3756420",
    "end": "3762480"
  },
  {
    "text": "updated while you're working with them well in the meanwhile you're running slowly some jobs behind the scenes that",
    "start": "3762480",
    "end": "3768540"
  },
  {
    "text": "then will migrate the data for you gradually okay",
    "start": "3768540",
    "end": "3773579"
  },
  {
    "text": "so separate release from deployment is crucial you need different Technologies",
    "start": "3773579",
    "end": "3779700"
  },
  {
    "text": "like future toggles Telemetry you need web applications traffic management AKs",
    "start": "3779700",
    "end": "3786599"
  },
  {
    "text": "those kind of tools to make this happen make sure you have the whole notion of observability in place get the metrics",
    "start": "3786599",
    "end": "3793799"
  },
  {
    "text": "and and understand what your system is doing then you have different ways of actually deploying your application to",
    "start": "3793799",
    "end": "3799200"
  },
  {
    "text": "production if you want to see a real database schema change in action I also",
    "start": "3799200",
    "end": "3805500"
  },
  {
    "text": "am a plural side author and my course on deploying HP net core three microservice",
    "start": "3805500",
    "end": "3811859"
  },
  {
    "text": "to kubernetes the last chapter is like an hour on how to make a schema change",
    "start": "3811859",
    "end": "3817380"
  },
  {
    "text": "actually happen in a production environment okay so you might want to take some time there but I could spend",
    "start": "3817380",
    "end": "3823260"
  },
  {
    "text": "like a whole session on making that happen I hope you enjoyed this session I will see you later with the green",
    "start": "3823260",
    "end": "3829500"
  },
  {
    "text": "yellows and reds I hope you enjoyed it thank you so much and have a nice further conference",
    "start": "3829500",
    "end": "3837020"
  }
]