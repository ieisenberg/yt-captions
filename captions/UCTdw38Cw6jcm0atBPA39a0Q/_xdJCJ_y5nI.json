[
  {
    "text": "all right welcome everyone thanks for coming uh we're at the home stretch almost there to the end here um so yes",
    "start": "8800",
    "end": "17400"
  },
  {
    "text": "my name is Jimmy Bogard um I guess there's still Twitter so yeah you can find me on Twitter X Formerly Known",
    "start": "17400",
    "end": "23320"
  },
  {
    "text": "whatever at atj Bogard um the code behind this presentation you can find on",
    "start": "23320",
    "end": "28400"
  },
  {
    "text": "my GitHub at github.com slj Bogard there's a presentations repository and so any presentation I give all the",
    "start": "28400",
    "end": "34760"
  },
  {
    "text": "sample code is up there um I usually push to that repository like once a year or so so if it's at a date just Pig me",
    "start": "34760",
    "end": "40800"
  },
  {
    "text": "and I'll push everything up again um and then I blogged about this topic on my blog and my website at Jimmy bard.com um",
    "start": "40800",
    "end": "48640"
  },
  {
    "text": "and so my day job uh is an independent consultant and so I help teams modernize",
    "start": "48640",
    "end": "54559"
  },
  {
    "text": "their systems whether it's uh adding domain driven design or they're doing event driven architecture Ure or um or",
    "start": "54559",
    "end": "62840"
  },
  {
    "text": "in this case I had a team that was wanting to migrate from AET 4 point something application to AET well at the",
    "start": "62840",
    "end": "70240"
  },
  {
    "text": "time is net 6 uh but they've got so many applications that today the the system",
    "start": "70240",
    "end": "75520"
  },
  {
    "text": "actually my standup is like an hour and a half um is to uh migrate uh their apps",
    "start": "75520",
    "end": "80720"
  },
  {
    "text": "toet 8 um now when we were first starting this project uh I had tried to",
    "start": "80720",
    "end": "86880"
  },
  {
    "text": "do this kind of activity a couple times and it was really really hard and uh I",
    "start": "86880",
    "end": "92640"
  },
  {
    "text": "kind of felt like the folks in Microsoft were like focusing way too much on like the the new shiny stuff without",
    "start": "92640",
    "end": "98720"
  },
  {
    "text": "providing any kind of guidance or direction or tooling of how do I get from an existing application that is net",
    "start": "98720",
    "end": "105119"
  },
  {
    "text": "4.8 uh to net you know net core the the new the new good stuff um and what I did",
    "start": "105119",
    "end": "111000"
  },
  {
    "text": "know is that uh in any kind of these kinds of uh architecture Evolutions",
    "start": "111000",
    "end": "116479"
  },
  {
    "text": "we're taking an existing system and migrating to something else what I never want to do is have an",
    "start": "116479",
    "end": "122360"
  },
  {
    "text": "approach or strategy that is let's just build this completely new system to the side for six 9 12 months whatever it is",
    "start": "122360",
    "end": "130000"
  },
  {
    "text": "and then just flip the switch and kind of cross our fingers and hope and pray that everything works but of course hope",
    "start": "130000",
    "end": "135319"
  },
  {
    "text": "is not a strategy we I ideally I would have something that would allow us to gradually migrate from one of these systems to the other and I kind of think",
    "start": "135319",
    "end": "142280"
  },
  {
    "text": "of this uh in my head um I'm from Texas so you might hear a y' every now and again um and so what we do a lot is this",
    "start": "142280",
    "end": "149720"
  },
  {
    "text": "uh which is Highway construction um which is not a great solution for transportation problems but it's what we",
    "start": "149720",
    "end": "155680"
  },
  {
    "text": "do um and so I see this all the time this uh we have we have existing",
    "start": "155680",
    "end": "161080"
  },
  {
    "text": "highways and we're constantly like changing them and and adding to them whatever so what never happens in these",
    "start": "161080",
    "end": "166640"
  },
  {
    "text": "kinds of large scale construction projects is they don't build an entirely new highway to the side and then one day",
    "start": "166640",
    "end": "173519"
  },
  {
    "text": "sometime in the future we just like swap over traffic from one like the old thing to the new thing um instead what we see",
    "start": "173519",
    "end": "179879"
  },
  {
    "text": "is a much more incremental approach where we are building little parts of the system and then the kind of the new",
    "start": "179879",
    "end": "186040"
  },
  {
    "text": "way of doing things or the the new uh the new construction and then over time we have traffic that kind of uh will be",
    "start": "186040",
    "end": "193000"
  },
  {
    "text": "diverted to the new highway um but it's never like we completely shut off traffic and then just one day the flip",
    "start": "193000",
    "end": "199120"
  },
  {
    "text": "the slip and everything's good to go so ideally I can have the same kind of approach as well that it is not a flip",
    "start": "199120",
    "end": "205519"
  },
  {
    "text": "to switch and just hope things work but instead it's more of an incremental strategy now one of the earlier Challen earliest",
    "start": "205519",
    "end": "211920"
  },
  {
    "text": "challenges I had was just to try to uh convince the business that this is a good thing to do um because Microsoft",
    "start": "211920",
    "end": "218400"
  },
  {
    "text": "also did that awesome thing where they changed the name of things where they had net 4. uh five or actually I got a",
    "start": "218400",
    "end": "224640"
  },
  {
    "text": "picture of this these are the the the Microsoft releases and it's very small which is fine because there's so many",
    "start": "224640",
    "end": "230280"
  },
  {
    "text": "things that are released over time so I'm going to kind of zoom into kind of the the more recent uh picture here um",
    "start": "230280",
    "end": "237200"
  },
  {
    "text": "and this is some online diagramming tool where they actually ran out of nodes they could put in this graph so that's",
    "start": "237200",
    "end": "242280"
  },
  {
    "text": "why it stops at doet 7 they just they ran out in the free version and so I couldn't put any more things on here so",
    "start": "242280",
    "end": "247360"
  },
  {
    "text": "somewhere passed over here on 2024 or or into 2023 was the release of net 8 and",
    "start": "247360",
    "end": "253280"
  },
  {
    "text": "of course this year uh they'll release net 9 as well um and so in the light green on the",
    "start": "253280",
    "end": "259160"
  },
  {
    "text": "bottom here there's this Net Framework set of releases so that's the you know windows. Net Framework uh Windows only.",
    "start": "259160",
    "end": "265800"
  },
  {
    "text": "Net Framework and you'll notice that around 2019 those light green little bubbles stop so the last release of net",
    "start": "265800",
    "end": "273479"
  },
  {
    "text": "4.8 was or net you know full NET Framework was net 4.8 I think the 4.8.1",
    "start": "273479",
    "end": "279520"
  },
  {
    "text": "was a security release as well um and initially Microsoft said right the new hotness isnet core so everyone should go",
    "start": "279520",
    "end": "286759"
  },
  {
    "text": "to that and we're no longer going to support NET Framework full NET Framework whatever um naturally people revolted",
    "start": "286759",
    "end": "294280"
  },
  {
    "text": "like there's a lot of existing systems out there that are still using full. netork fullet framework um and so those",
    "start": "294280",
    "end": "301759"
  },
  {
    "text": "systems still need to be supported so Microsoft did relent so don't worry you don't have to do any of the things I'm talking about today you can stay on dnet",
    "start": "301759",
    "end": "308800"
  },
  {
    "text": "4.8 you know basically until the heat death of the Universe I guess um and it'll continue to be supported the",
    "start": "308800",
    "end": "315360"
  },
  {
    "text": "problem is there's a difference between just kind of support from uh a product perspective versus like actually",
    "start": "315360",
    "end": "322080"
  },
  {
    "text": "improving that framework over time and so the story is that the doned framework will still get security updates like yay",
    "start": "322080",
    "end": "329919"
  },
  {
    "text": "updates but no other improvements are going to be put into that framework complicating the story is that",
    "start": "329919",
    "end": "335240"
  },
  {
    "text": "they changed the name of the new net from net core 3.1 uh to Net 5 which was",
    "start": "335240",
    "end": "341280"
  },
  {
    "text": "very confusing for someone saying oh we're on net 4 that should be really simple to upgrade to Net 5",
    "start": "341280",
    "end": "347080"
  },
  {
    "text": "right no it is not simple to upgrade uh from one of these to the next but luckily um in the net 6 release time",
    "start": "347080",
    "end": "354720"
  },
  {
    "text": "frame Microsoft did release some tooling to make this migration process quite a bit easier for specific kinds of",
    "start": "354720",
    "end": "362039"
  },
  {
    "text": "applications so um in this application the clients wanted to migrate from their",
    "start": "362039",
    "end": "368120"
  },
  {
    "text": "net 4. 4.8 application to at the time net 6 and then today they're going to",
    "start": "368120",
    "end": "374120"
  },
  {
    "text": "net 8 so the very first thing I wanted to do as someone coming in and well I have to answer the question how much is",
    "start": "374120",
    "end": "380560"
  },
  {
    "text": "this going to cost I wanted to understand kind of the scope and breadth of the existing system that we were",
    "start": "380560",
    "end": "386199"
  },
  {
    "text": "wanting to migrate so my first thing I was doing was just looking at well what the is this application actually doing now",
    "start": "386199",
    "end": "392560"
  },
  {
    "text": "funnily enough this was actually a system that I helped build like in 2010 so I won't be talking about my",
    "start": "392560",
    "end": "398800"
  },
  {
    "text": "coding practices from back then if you want to hear about that uh you'll have to buy me a beer after this and there",
    "start": "398800",
    "end": "404120"
  },
  {
    "text": "will be no recording devices about my actual opinions um but uh I just want to",
    "start": "404120",
    "end": "409639"
  },
  {
    "text": "understand from just kind of Technology perspective and how big is this thing what the heck is going on here so um in",
    "start": "409639",
    "end": "416400"
  },
  {
    "text": "this application it was mainly a web app that's like mainly most of the stuff that it was doing so it had asp.net MVC",
    "start": "416400",
    "end": "424039"
  },
  {
    "text": "uh HTTP endpoints so these are things that responded to you know HTTP requests and this included MVC like traditional",
    "start": "424039",
    "end": "431560"
  },
  {
    "text": "serers side rendering junk uh as well as API so there were some pages they converted to like some early version of",
    "start": "431560",
    "end": "438560"
  },
  {
    "text": "react and so it was like there was they were trying to move towards modern web and then realized oh this was really",
    "start": "438560",
    "end": "444360"
  },
  {
    "text": "hard to do in this framework back then so they kind of stopped there so it had both server NVC as well as API",
    "start": "444360",
    "end": "451120"
  },
  {
    "text": "controllers and actions um there are also non-mvc HTTP endpoints so these are the old crusty",
    "start": "451120",
    "end": "457639"
  },
  {
    "text": "stuff that I really had tried to forget about and just block out of my memory altogether um but things like aspx you",
    "start": "457639",
    "end": "463840"
  },
  {
    "text": "know web forms uh uh ashx and if you tell me that like component oriented",
    "start": "463840",
    "end": "469039"
  },
  {
    "text": "programming is web forms all over again you're you're wrong I can tell you why later um but no there's like there were",
    "start": "469039",
    "end": "474479"
  },
  {
    "text": "still these kinds of things around uh there was uh asp.net M VC",
    "start": "474479",
    "end": "479879"
  },
  {
    "text": "middleware so they're plugging into the request pipeline in the MVC World um but",
    "start": "479879",
    "end": "485159"
  },
  {
    "text": "there's also just the asp.net middleware so we had multiple different kinds of middleware going on the MVC middleware",
    "start": "485159",
    "end": "491919"
  },
  {
    "text": "was all kind of net C based uh whereas the aspnet middleware that's all that",
    "start": "491919",
    "end": "497080"
  },
  {
    "text": "stuff in the web config that you again I had hoped to forget about but like oh gosh that's right there's all this junk",
    "start": "497080",
    "end": "502280"
  },
  {
    "text": "in there as well um we also had you know dependencies on external libraries so uh",
    "start": "502280",
    "end": "508479"
  },
  {
    "text": "our application was a like inter uh you know web application talking to a database and so we're going to have",
    "start": "508479",
    "end": "514919"
  },
  {
    "text": "library dependencies that we use to help do that as well um some of those dependencies were upgradeable and some",
    "start": "514919",
    "end": "522080"
  },
  {
    "text": "were not and these are the things we had to figure out um we also had component dependencies so um you know we had grid",
    "start": "522080",
    "end": "528640"
  },
  {
    "text": "components uh file upload components like we they they had purchased I think Dev Express or something like that you",
    "start": "528640",
    "end": "533920"
  },
  {
    "text": "know a third party component library to uh you know make their their web app look you know nice and neat and",
    "start": "533920",
    "end": "541079"
  },
  {
    "text": "polished so looking at this application I realized like there's there's a lot",
    "start": "541079",
    "end": "546480"
  },
  {
    "text": "going on here and we weren't trying to improve things as we went we more or less wanted a like for like end result",
    "start": "546480",
    "end": "553880"
  },
  {
    "text": "so that the end user would not notice or tell that something had been migrated from the net 48 app to the to the new",
    "start": "553880",
    "end": "561120"
  },
  {
    "text": "net 678 app so we weren't trying to like quote improve the architecture and any",
    "start": "561120",
    "end": "566640"
  },
  {
    "text": "of these things here we were just trying to migrate the code migrates the uh Mig the application without touching",
    "start": "566640",
    "end": "572959"
  },
  {
    "text": "anything else because this application was so big that it would have been impossible for us to try to you know improve things uh as we",
    "start": "572959",
    "end": "579560"
  },
  {
    "text": "went so uh in order to get an understanding of what was in this application um one of the things we did",
    "start": "579560",
    "end": "586600"
  },
  {
    "text": "was just just some stupid reflection code that said okay just uh go look at the directory structure go look at the",
    "start": "586600",
    "end": "593000"
  },
  {
    "text": "type metadata and just like spit out here are all the HTTP endpoints uh because there isn't really anything",
    "start": "593000",
    "end": "599040"
  },
  {
    "text": "built listen to asp.net the old version they can tell you like here are all the endpoints in your application you",
    "start": "599040",
    "end": "605560"
  },
  {
    "text": "actually have to like kind of reverse engineer well what are all the controllers the actions the apis the SPX",
    "start": "605560",
    "end": "611079"
  },
  {
    "text": "Pages you have to have like you have to kind of go figure that out for yourself so we just wrote a bit of code that",
    "start": "611079",
    "end": "616399"
  },
  {
    "text": "eventually and this is for a sample application would spit out here's all the controllers and then here's some",
    "start": "616399",
    "end": "622040"
  },
  {
    "text": "more other like interesting information about each of those controllers uh so as",
    "start": "622040",
    "end": "627240"
  },
  {
    "text": "as we went down the migration process we were also trying to figure out you know were there dependencies between",
    "start": "627240",
    "end": "633600"
  },
  {
    "text": "different pages in the application um were there certain pages that use some",
    "start": "633600",
    "end": "638680"
  },
  {
    "text": "technology that we would have to have uh some kind of Spike or figure out how to migrate the specific piece of technology",
    "start": "638680",
    "end": "645519"
  },
  {
    "text": "so we were as part of just kind of spitting everything out we were also looking at the sort of characteristics of like well is this one using any kind",
    "start": "645519",
    "end": "651880"
  },
  {
    "text": "of filters is this one using any kind of exotic technologies that would affect how easy it is for us to migrate to one",
    "start": "651880",
    "end": "658279"
  },
  {
    "text": "of these uh one of these controllers and actions over um but eventually we did need to get to like actual Jura tickets to say",
    "start": "658279",
    "end": "666839"
  },
  {
    "text": "you know someone a developer is going to start a set of work and so this also uh just spinning out all the different",
    "start": "666839",
    "end": "672399"
  },
  {
    "text": "pages our migration uh strategy was to try to migrate one page or One",
    "start": "672399",
    "end": "677600"
  },
  {
    "text": "controller at a time so each developer would get a page or a controller they would migrate that then that would be a",
    "start": "677600",
    "end": "684360"
  },
  {
    "text": "poll request that would then get integrated and ideally pushed out all the way to production before we moveed on to the next one that was another kind",
    "start": "684360",
    "end": "690560"
  },
  {
    "text": "of critical thing we looked at was again we don't want big bang migrations as much as possible we want to migrate on",
    "start": "690560",
    "end": "696519"
  },
  {
    "text": "uh the smallest incremental step we could manage and so that really for us was not the individual HTTP endpoints",
    "start": "696519",
    "end": "704399"
  },
  {
    "text": "like the controller action but really the entire controller all at",
    "start": "704399",
    "end": "709519"
  },
  {
    "text": "once the next thing we looked at was okay these are all the pages in the application well what uh what other",
    "start": "709800",
    "end": "716440"
  },
  {
    "text": "things are in the application that are used to support the function of the system and so the first thing we looked at was uh all of the uh MVC features",
    "start": "716440",
    "end": "724200"
  },
  {
    "text": "that were turned on and all of the uh middleware associated with aspnet core or I'm sorry aspnet uh",
    "start": "724200",
    "end": "731680"
  },
  {
    "text": "mbc5 so um in here this is like the application start again I forgot to think this Global asax thing exists um",
    "start": "731680",
    "end": "739959"
  },
  {
    "text": "and so we can see yeah this is like kind of the stock looking thing of uh asp.net",
    "start": "739959",
    "end": "745160"
  },
  {
    "text": "mvc5 where okay this we've got one line here that says register Global filters",
    "start": "745160",
    "end": "750519"
  },
  {
    "text": "and those global filters are the middleware uh written in C for everything in our system there's other",
    "start": "750519",
    "end": "756040"
  },
  {
    "text": "stuff as well that we will have to migrate so some of these things we have to kind of figure out uh what is the",
    "start": "756040",
    "end": "761399"
  },
  {
    "text": "what is the translation of this specific feature in the new world of asp.net core",
    "start": "761399",
    "end": "766920"
  },
  {
    "text": "and sometimes that new feature existed and sometimes it didn't and I'll get into the kind of the sad ones that",
    "start": "766920",
    "end": "773160"
  },
  {
    "text": "didn't exist here in a bit one of the other things we were looking at as well is some of these",
    "start": "773160",
    "end": "779800"
  },
  {
    "text": "pieces we could make the decision should we migrate this thing or not is this custom piece of code that we were",
    "start": "779800",
    "end": "785600"
  },
  {
    "text": "writing as part of the uh aspnet mvc5 application um is that now a quote",
    "start": "785600",
    "end": "791000"
  },
  {
    "text": "solved problem in aspnet corand because there are definitely some cases we hit where hey this feature that a lot of us",
    "start": "791000",
    "end": "797880"
  },
  {
    "text": "had to write custom code for out of like I don't know like not my book I hope I did write a b an book on NVC but I",
    "start": "797880",
    "end": "804320"
  },
  {
    "text": "wouldn't recommend it to anybody um but these are like kind of code Snippets that people had kind of built over the",
    "start": "804320",
    "end": "809639"
  },
  {
    "text": "years of like well MVC can't handle this specific scenario so here's a bit of custom code and a filter you can drop in",
    "start": "809639",
    "end": "815760"
  },
  {
    "text": "to make it do this kind of stuff but sometimes we didn't need to pull those things over um and so a lot of these",
    "start": "815760",
    "end": "821560"
  },
  {
    "text": "things were then decision points of hey is there like a built-in way of doing this now that we don't have to rely on custom code so there still was a little",
    "start": "821560",
    "end": "828199"
  },
  {
    "text": "bit of decision making we uh along the way to see is this code something we actually want to bring over or",
    "start": "828199",
    "end": "835440"
  },
  {
    "text": "not another thing that I had completely blocked out of my head was Owen do you ever remember that yes open oh gosh open",
    "start": "835440",
    "end": "844880"
  },
  {
    "text": "web interface for.net yes no I don't know whatever",
    "start": "844880",
    "end": "850399"
  },
  {
    "text": "it's gone now kind of um so this uh this stuff um was middle of an open source",
    "start": "850399",
    "end": "858120"
  },
  {
    "text": "middleware implementation um that uh looks very very similar to ASP net core as you see",
    "start": "858120",
    "end": "865399"
  },
  {
    "text": "it today and I wonder where the ASP net core team got this idea I don't know um so this uh this set of middleware is",
    "start": "865399",
    "end": "872160"
  },
  {
    "text": "just another set of middleware we had to uh go through to understand should we bring this stuff forward over or not",
    "start": "872160",
    "end": "879120"
  },
  {
    "text": "some things only exist in asp.net MVC middleware but something like signal R",
    "start": "879120",
    "end": "885240"
  },
  {
    "text": "uh that we see here and hangfire uh those are two technologies that are built on top of Owen um and so we did",
    "start": "885240",
    "end": "891639"
  },
  {
    "text": "definitely saw those like oh we definitely want signal R going forward um and hangfire is another kind of",
    "start": "891639",
    "end": "897800"
  },
  {
    "text": "middleware thing pieces where as well and then finally I had to go crack",
    "start": "897800",
    "end": "903399"
  },
  {
    "text": "open that web.config file and be like what the heck is going on inside of here my sample app doesn't have a whole lot",
    "start": "903399",
    "end": "909959"
  },
  {
    "text": "um but yours may have quite a bit and luckily like the idees are pretty good about telling you things that are being",
    "start": "909959",
    "end": "915959"
  },
  {
    "text": "used or not but there's going to be some stuff in there you're like oh this is going to be so simple you crack open the web conveying and like well that that",
    "start": "915959",
    "end": "922680"
  },
  {
    "text": "there goes that Simplicity there's going to be something in there there's going to be a gremlin or something in there that uh May throw Giant wrench into the",
    "start": "922680",
    "end": "930040"
  },
  {
    "text": "uh into the engine here so uh it's something we have to go through kind of step by step and a lot of this will just",
    "start": "930040",
    "end": "936519"
  },
  {
    "text": "be translated into the program CS like middleware and C land and ASP net core",
    "start": "936519",
    "end": "943160"
  },
  {
    "text": "um and some of it just may not have an analog at all and we have to just abandon it it just it really depends I",
    "start": "943160",
    "end": "948680"
  },
  {
    "text": "have to go through this XML lovely XML line by line to understand what everything is going on inside of",
    "start": "948680",
    "end": "955040"
  },
  {
    "text": "here oh gosh of course we have dependencies as well this is another sort of fr trting thing is that there's",
    "start": "955040",
    "end": "960120"
  },
  {
    "text": "not really a good tool out there and if there is please tell me please tell me afterwards there's not a good tool to look at your list of dependencies and",
    "start": "960120",
    "end": "966480"
  },
  {
    "text": "say what is the compatibility uh or path for us to get from the versions being",
    "start": "966480",
    "end": "971920"
  },
  {
    "text": "referenced here to uhet 678 there's no guarantee that any",
    "start": "971920",
    "end": "979199"
  },
  {
    "text": "package here one is even supported in net 678 land that was one of the big",
    "start": "979199",
    "end": "984519"
  },
  {
    "text": "risks that my clients were trying to get away from is that they had hit walls and a lot of their dependencies they said",
    "start": "984519",
    "end": "990440"
  },
  {
    "text": "these dependencies are no longer being updated for the full. framework they're still being supported and updated for",
    "start": "990440",
    "end": "997240"
  },
  {
    "text": "net corand but they are not the authors of those libraries and I have one of I one of them um is no longer supporting",
    "start": "997240",
    "end": "1004519"
  },
  {
    "text": "The full. NET Framework so we have to look at this list and say well what is the kind of path to get over to uh",
    "start": "1004519",
    "end": "1011240"
  },
  {
    "text": "supports for uh asp.net core is it's as simple as upgrading the version and",
    "start": "1011240",
    "end": "1017440"
  },
  {
    "text": "saying I got to go from here to here uh or or is it something else uh completely",
    "start": "1017440",
    "end": "1023240"
  },
  {
    "text": "here so when the client first asked us to investigate the feasibility of us",
    "start": "1023240",
    "end": "1028520"
  },
  {
    "text": "doing this migration this is one of those sort of like lucky you know as fate would have it Microsoft released a",
    "start": "1028520",
    "end": "1035640"
  },
  {
    "text": "new technology in order to assist people to migrate from the full.net framework",
    "start": "1035640",
    "end": "1041240"
  },
  {
    "text": "applications over to uh net 6 at the time and these tools have been updated",
    "start": "1041240",
    "end": "1047160"
  },
  {
    "text": "uh since then to provide more and more features to help you to get from The full. NET Framework over to asp.net",
    "start": "1047160",
    "end": "1054720"
  },
  {
    "text": "core uh and the big technology here uh is uh through this thing called the system.web",
    "start": "1054720",
    "end": "1061120"
  },
  {
    "text": "adapters now back in the day before this the way that we would migrate our",
    "start": "1061120",
    "end": "1066880"
  },
  {
    "text": "applications from Full framework to at the time was like net core 21 or",
    "start": "1066880",
    "end": "1072200"
  },
  {
    "text": "31 um was to put a reverse proxy in front of the applications so that a",
    "start": "1072200",
    "end": "1078880"
  },
  {
    "text": "request would come in and our reverse proxy configuration would say hey um is",
    "start": "1078880",
    "end": "1084159"
  },
  {
    "text": "it in this uh special list of paths that we've already migrated then go to this",
    "start": "1084159",
    "end": "1089200"
  },
  {
    "text": "other you know the the new application otherwise fall back to the existing application so what this did was get rid",
    "start": "1089200",
    "end": "1095320"
  },
  {
    "text": "of that and said instead of you having to put in engine X or whatever um we're going to be using yarp which is yet",
    "start": "1095320",
    "end": "1101240"
  },
  {
    "text": "another reverse proxy to do exactly that but it's we're going to be doing it in a very special way so the application",
    "start": "1101240",
    "end": "1107480"
  },
  {
    "text": "starts off like this right this is our existing uh application where we got incoming requests uh hitting AET",
    "start": "1107480",
    "end": "1113679"
  },
  {
    "text": "framework application and then going to business logic and by the way I'm focusing solely on asp.net applications",
    "start": "1113679",
    "end": "1120440"
  },
  {
    "text": "because that's what I did like all my talks are about experiences on actual projects so if You' got a winforms",
    "start": "1120440",
    "end": "1126320"
  },
  {
    "text": "client or whatever I have no idea like do what I did Google figure it out but",
    "start": "1126320",
    "end": "1132159"
  },
  {
    "text": "the overall approach of trying to make things incremental and do small steps that is uh what I would always try to do",
    "start": "1132159",
    "end": "1138159"
  },
  {
    "text": "um so yeah this this one was a existing DN framework application incoming requests hitting the framework",
    "start": "1138159",
    "end": "1143320"
  },
  {
    "text": "application talking to business logic and then of course talking to a database as well um so the the very first uh step is",
    "start": "1143320",
    "end": "1152280"
  },
  {
    "text": "to introduce an asp.net core application this is going to be the new Target of",
    "start": "1152280",
    "end": "1157520"
  },
  {
    "text": "all of our migrated features this aspet core application but it also hosts yarp",
    "start": "1157520",
    "end": "1164720"
  },
  {
    "text": "so the application is running the business logic and all that stuff but",
    "start": "1164720",
    "end": "1169840"
  },
  {
    "text": "also hosting yarp so if a request comes into this application and it can't handle that request then it will",
    "start": "1169840",
    "end": "1176679"
  },
  {
    "text": "automatically forward that request over to the backend framework application so",
    "start": "1176679",
    "end": "1182200"
  },
  {
    "text": "our very first step was actually I'm deploying an aspnet core application with just this reverse proxy and nothing",
    "start": "1182200",
    "end": "1188600"
  },
  {
    "text": "else like zero zero anything else uh because that was also going to force us to do a bunch of other stuff but the",
    "start": "1188600",
    "end": "1194840"
  },
  {
    "text": "idea is that okay let's let's introduce this new application into this entire ecosystem and uh the nice thing about",
    "start": "1194840",
    "end": "1202320"
  },
  {
    "text": "this yarp uh Yar proxy that's redundant um is that I don't have to have something else I don't have to have",
    "start": "1202320",
    "end": "1207720"
  },
  {
    "text": "engine X or some other reverse proxy put in front of all of our systems instead the asbn core application with this",
    "start": "1207720",
    "end": "1214320"
  },
  {
    "text": "reverse the self-hosted reverse proxy will just seamlessly handle these requests that if one's here call this",
    "start": "1214320",
    "end": "1222200"
  },
  {
    "text": "code if it does if it's not here then just forward it on through to the framework",
    "start": "1222200",
    "end": "1227320"
  },
  {
    "text": "application now in this picture there are more arrows than this picture right that's one Arrow that's",
    "start": "1227320",
    "end": "1236320"
  },
  {
    "text": "two arrows twice as many arrows that also means that there is going to be",
    "start": "1236320",
    "end": "1241799"
  },
  {
    "text": "additional latency to these requests there is a performance penalty for this extra reverse proxy thing in the middle",
    "start": "1241799",
    "end": "1248280"
  },
  {
    "text": "um so you you may have to do some testing to see like what's the um you know like what's the impact to your",
    "start": "1248280",
    "end": "1254039"
  },
  {
    "text": "system for our applications and clients it was absolutely negligible like um you",
    "start": "1254039",
    "end": "1259320"
  },
  {
    "text": "know there these are applications talking to a database so like an extra 10 uh you know nond or 100 nond for this",
    "start": "1259320",
    "end": "1266760"
  },
  {
    "text": "reverse proxy was nothing it was a drop in the bucket of everything else that was going on in the system but depending",
    "start": "1266760",
    "end": "1271880"
  },
  {
    "text": "on your application that may be more or less critical for you so definitely test this out in a production like",
    "start": "1271880",
    "end": "1277760"
  },
  {
    "text": "environment to see if that's okay for you but for any system I've ever worked on um I don't know what that says about",
    "start": "1277760",
    "end": "1283720"
  },
  {
    "text": "me uh this is okay now there",
    "start": "1283720",
    "end": "1289159"
  },
  {
    "text": "uh there are going to be cases where we have things that will live in the",
    "start": "1289159",
    "end": "1294679"
  },
  {
    "text": "framework application that we want to take advantage of are use in the ASP net",
    "start": "1294679",
    "end": "1300559"
  },
  {
    "text": "core application so consider something like session State session state is",
    "start": "1300559",
    "end": "1305640"
  },
  {
    "text": "shared state that lives in the framework application but the session systems of aspet core andet framework aspnet 45 or",
    "start": "1305640",
    "end": "1314120"
  },
  {
    "text": "whatever are incompatible like grossly incompatible they they're not the same at all the most you can do is like you",
    "start": "1314120",
    "end": "1322240"
  },
  {
    "text": "know uh maybe you can share the data protection certificate for the cookies or something but that's about it uh you",
    "start": "1322240",
    "end": "1328960"
  },
  {
    "text": "you cannot share session between these two systems so the adapter part for a",
    "start": "1328960",
    "end": "1334760"
  },
  {
    "text": "lot of things that you need to have like kind of some shared understanding or knowledge or or state between the",
    "start": "1334760",
    "end": "1341640"
  },
  {
    "text": "framework application in the net 6 and 78 application that's the adapter part",
    "start": "1341640",
    "end": "1347400"
  },
  {
    "text": "the adapters will allow us to depending on what technology we're trying to take advantage of seamlessly integrate",
    "start": "1347400",
    "end": "1354080"
  },
  {
    "text": "between the framework application and the aset core application and I'm going to go through these in in detail uh the",
    "start": "1354080",
    "end": "1360360"
  },
  {
    "text": "ones that we hit at least um that was kind of the second piece it was just not a proxy but also these adapters allow us",
    "start": "1360360",
    "end": "1366760"
  },
  {
    "text": "to have these two applications still have for the things that that need to share they can still share those",
    "start": "1366760",
    "end": "1372039"
  },
  {
    "text": "different uh components so the idea is we will",
    "start": "1372039",
    "end": "1378000"
  },
  {
    "text": "migrate controllers actions and Views what or Pages whatever from the framework",
    "start": "1378000",
    "end": "1384600"
  },
  {
    "text": "application over to the core application So eventually like it flips like now I",
    "start": "1384600",
    "end": "1390000"
  },
  {
    "text": "have way more code in the asp.net core application and way less code in The NET",
    "start": "1390000",
    "end": "1395840"
  },
  {
    "text": "Framework application so at some points the aspnet core application is",
    "start": "1395840",
    "end": "1402080"
  },
  {
    "text": "handling all of your requests and is not forwarding anything over to the framework application and that point is",
    "start": "1402080",
    "end": "1409080"
  },
  {
    "text": "like the greatest feeling of like delete delete the framework application get rid of it and now now you're completely",
    "start": "1409080",
    "end": "1415640"
  },
  {
    "text": "migrated over all right so I'm going to show a demo of this uh Upgrade Assistant um for",
    "start": "1415640",
    "end": "1424360"
  },
  {
    "text": "Microsoft let's see can I stop this and can",
    "start": "1424360",
    "end": "1429480"
  },
  {
    "text": "I make sure I am here okay great",
    "start": "1429480",
    "end": "1436600"
  },
  {
    "text": "all right um I've bumped up the font is that big enough for the folks in the back yes okay so this is just file new",
    "start": "1439760",
    "end": "1449760"
  },
  {
    "text": "asp.net uh MVC application so it's mvc5 um but just like Hello World",
    "start": "1449760",
    "end": "1457039"
  },
  {
    "text": "whatever um and let's make sure it actually y still runs um so it's it didn't have all the",
    "start": "1457039",
    "end": "1463080"
  },
  {
    "text": "dependencies like it didn't it's not talk to a database what I just really wanted to show is the upgrade process",
    "start": "1463080",
    "end": "1469279"
  },
  {
    "text": "uh from asp.net mvc5 to aspnet core uh 8 is where it is",
    "start": "1469279",
    "end": "1475919"
  },
  {
    "text": "now okay so this is yeah the old crusty looking file new project from asp.net 45 uh but still aspnet is a free web",
    "start": "1475919",
    "end": "1483720"
  },
  {
    "text": "framework for building great websites um using HTML CSS and JavaScript all three",
    "start": "1483720",
    "end": "1489840"
  },
  {
    "text": "okay so um what I can do here is uh I first have installed an",
    "start": "1489840",
    "end": "1496480"
  },
  {
    "text": "extension installed this is theet Upgrade Assistant you do not have to do",
    "start": "1496480",
    "end": "1502000"
  },
  {
    "text": "this I will show you the code of what this is doing but it's just kind of a nice First Step um and so this is",
    "start": "1502000",
    "end": "1507399"
  },
  {
    "text": "something to help uh that just first process of creating the ASP netet core",
    "start": "1507399",
    "end": "1512720"
  },
  {
    "text": "application that is going to be the upgraded version of this all right so I will rightclick this and select",
    "start": "1512720",
    "end": "1521720"
  },
  {
    "text": "upgrade it's going to ask me uh if I want to upgrade the project to a newer. net version yes I do",
    "start": "1521720",
    "end": "1529760"
  },
  {
    "text": "and then you'll have only one upgrade type there used to be another one which was like do it all at once and then you're faced with like 10,000 compile",
    "start": "1529760",
    "end": "1536279"
  },
  {
    "text": "errors which I love right like let's get cracking on all these 10,000 compile errors um so no they like they got rid",
    "start": "1536279",
    "end": "1542799"
  },
  {
    "text": "of that like it didn't work there was an older Upgrade Assistant that tried tried to automatically migrate and like I've",
    "start": "1542799",
    "end": "1548520"
  },
  {
    "text": "never seen any of those things work for any technology in my career ever um so",
    "start": "1548520",
    "end": "1553600"
  },
  {
    "text": "that's not this this is the side bys side incremental project upgrade next",
    "start": "1553600",
    "end": "1559399"
  },
  {
    "text": "we're going to create a new project as opposed to targeting an existing project and the name is going to be",
    "start": "1559399",
    "end": "1566120"
  },
  {
    "text": "called cph devfest migration example core uh because I like to be specific in",
    "start": "1566120",
    "end": "1571559"
  },
  {
    "text": "the project template you could pick MVC or web API but really that's picking the like file new ASP net core template you",
    "start": "1571559",
    "end": "1577679"
  },
  {
    "text": "know that's just like different nougat packages and different like stuff in your program CS so I just I'm going to leave it with a default here of",
    "start": "1577679",
    "end": "1584840"
  },
  {
    "text": "MVC okay now we get to pick the target framework uh the title of this talk was donet 8",
    "start": "1584840",
    "end": "1591159"
  },
  {
    "text": "migration so let's pick that donet 8 um I will not be picking donet 9 yet to have a client that is okay with wanting",
    "start": "1591159",
    "end": "1597440"
  },
  {
    "text": "to use preview version of.net so next and finish it's going to go through this",
    "start": "1597440",
    "end": "1604679"
  },
  {
    "text": "junk of doing the migration stuff it's going to create a new project actually should be done already oh there it",
    "start": "1604679",
    "end": "1611679"
  },
  {
    "text": "goes okay so now there's a new project down here the CBDs migration example",
    "start": "1611679",
    "end": "1618760"
  },
  {
    "text": "core but it's it's not that exciting or uh like magical it's just a MVC like uh",
    "start": "1618760",
    "end": "1625799"
  },
  {
    "text": "SD web SDK project with a normal junk you put in here um of course you'd want to put the P the other uh package",
    "start": "1625799",
    "end": "1632480"
  },
  {
    "text": "references too but it's got two uh packages it's going to uh reference one is a system",
    "start": "1632480",
    "end": "1639120"
  },
  {
    "text": "web adapter so this is the thing that's going to translate between different server features of asp.net",
    "start": "1639120",
    "end": "1644640"
  },
  {
    "text": "45 and asp.net core um and yarp our reverse proxy",
    "start": "1644640",
    "end": "1650880"
  },
  {
    "text": "here in terms of the actual program CS here you notice there's like no other controllers or anything else here it's",
    "start": "1650880",
    "end": "1657080"
  },
  {
    "text": "just program CS not a you know nothing else exciting going on here um in the",
    "start": "1657080",
    "end": "1662320"
  },
  {
    "text": "actual kind of setup logic here we are uh what's different than kind of your normal application it's it is it's",
    "start": "1662320",
    "end": "1668320"
  },
  {
    "text": "adding the uh Service registration for system web adapters and the HTTP forer",
    "start": "1668320",
    "end": "1673919"
  },
  {
    "text": "so the HTTP for is yarp and then down here",
    "start": "1673919",
    "end": "1679120"
  },
  {
    "text": "I will have used system web adapters critical that that is the last thing in the list right we want the last thing",
    "start": "1679120",
    "end": "1685840"
  },
  {
    "text": "that happens in the application execution pipeline is to map the",
    "start": "1685840",
    "end": "1691320"
  },
  {
    "text": "forwarding over our our used system web adapter so it's the very last thing that happens and the list of things that",
    "start": "1691320",
    "end": "1696760"
  },
  {
    "text": "happens in a web application um and so right here this is the this is the last Middle where we",
    "start": "1696760",
    "end": "1703399"
  },
  {
    "text": "register and then finally for mapping the requests we will first map the default control controller route so",
    "start": "1703399",
    "end": "1708760"
  },
  {
    "text": "that's you know controller action view stuff um and then after that we'll map",
    "start": "1708760",
    "end": "1714000"
  },
  {
    "text": "this forwarder so if this one cannot handle the request then we have a",
    "start": "1714000",
    "end": "1719039"
  },
  {
    "text": "catchall forwarder that will map all those requests to know why it's so ugly",
    "start": "1719039",
    "end": "1725240"
  },
  {
    "text": "with all these lambdas and junk uh it'll map this request to what I've configured",
    "start": "1725240",
    "end": "1731840"
  },
  {
    "text": "as the proxy 2 address so you will have two different applications running with",
    "start": "1731840",
    "end": "1737440"
  },
  {
    "text": "two different ports and now I'm going to be configuring theet core application to",
    "start": "1737440",
    "end": "1743360"
  },
  {
    "text": "forward over to the New Port for the existing framework application uh and then finally there's",
    "start": "1743360",
    "end": "1750000"
  },
  {
    "text": "like a thing that says make sure it's the last one in the list so the max Val the the the the endpoints because this",
    "start": "1750000",
    "end": "1755760"
  },
  {
    "text": "also works with any kind of ASP net core stuff so if you want to if you want to use minimal apis I don't know what other",
    "start": "1755760",
    "end": "1763039"
  },
  {
    "text": "exotic things you might have going on this works with all those things because it's just middleware in the asp core",
    "start": "1763039",
    "end": "1770200"
  },
  {
    "text": "pipeline okay so now let's run this and see what happens uh so I'm going to hit F5 and one of the things we're going to",
    "start": "1770200",
    "end": "1776480"
  },
  {
    "text": "see here is that I'm no longer running one application the doet framework application I need to run both of them",
    "start": "1776480",
    "end": "1782960"
  },
  {
    "text": "now because the doet framework application still needs to handle requests but the kind of main thing",
    "start": "1782960",
    "end": "1788240"
  },
  {
    "text": "that's handling request is going to be the asp.net MV asp.net uh core 8",
    "start": "1788240",
    "end": "1796679"
  },
  {
    "text": "application so that Port is different it's 7029 uh but you'll notice that it looks",
    "start": "1796679",
    "end": "1803919"
  },
  {
    "text": "exactly the same right this is aspnet core and then if I look here we can see",
    "start": "1803919",
    "end": "1809640"
  },
  {
    "text": "that hey uh we we had to uh we were getting all this request for stuff and",
    "start": "1809640",
    "end": "1815519"
  },
  {
    "text": "we've forwarded all these requests over proxying over to the existing asp.net uh",
    "start": "1815519",
    "end": "1823240"
  },
  {
    "text": "48 application in fact if you want to see it",
    "start": "1823240",
    "end": "1828519"
  },
  {
    "text": "if I just pop open one of these requests sure the Fab icon control",
    "start": "1828519",
    "end": "1834240"
  },
  {
    "text": "click and if I get rid of this ah okay so same application right",
    "start": "1834240",
    "end": "1842960"
  },
  {
    "text": "this is the aspet core application transparently proxying my request to the asp.net",
    "start": "1842960",
    "end": "1848640"
  },
  {
    "text": "4.8 application um when I first saw this I",
    "start": "1848640",
    "end": "1854279"
  },
  {
    "text": "was like there's no way this works right there's no way it's this easy to do this kind of proxying where it's just a few",
    "start": "1854279",
    "end": "1859919"
  },
  {
    "text": "lines of code in an hnet core application and it just quote works because I remember those days of hand",
    "start": "1859919",
    "end": "1865679"
  },
  {
    "text": "McKing with engine X config files for oh this in this Sprint we migrated these",
    "start": "1865679",
    "end": "1870919"
  },
  {
    "text": "controllers so go so I'm going go edit the engine X config file and add those paths in there it's like no we got you",
    "start": "1870919",
    "end": "1876880"
  },
  {
    "text": "we got you fam it'll all just be as we migrate things over they'll uh just m",
    "start": "1876880",
    "end": "1882399"
  },
  {
    "text": "like not magically they'll just be uh served by the aspet core application",
    "start": "1882399",
    "end": "1888158"
  },
  {
    "text": "okay so that was like the first sort of initial thing we did was what's the kind of Base technology we're going to be",
    "start": "1889720",
    "end": "1894960"
  },
  {
    "text": "using for this migration process and hey this thing worked so",
    "start": "1894960",
    "end": "1900840"
  },
  {
    "text": "huzzah okay so our very first kind of story after we went through a bit of",
    "start": "1902639",
    "end": "1907679"
  },
  {
    "text": "like uh Discovery and prototyping and spiking uh was simply just to have an",
    "start": "1907679",
    "end": "1913320"
  },
  {
    "text": "empty proxy that did nothing except proxy every single request over to the dinet framework application so it was",
    "start": "1913320",
    "end": "1920000"
  },
  {
    "text": "very empty it like just nothing in there and then um the uh application would",
    "start": "1920000",
    "end": "1925480"
  },
  {
    "text": "just kind of seamlessly serve request over from the underlying framework application but I mean there's a lot",
    "start": "1925480",
    "end": "1931799"
  },
  {
    "text": "that goes into this right because we want to have this very small First Step deployed all the way out to production I",
    "start": "1931799",
    "end": "1939120"
  },
  {
    "text": "want to make sure that all my build and deploy pipelines can handle net 8 and",
    "start": "1939120",
    "end": "1944159"
  },
  {
    "text": "like they probably can't today because you're probably targeting net 4 .8 notet",
    "start": "1944159",
    "end": "1949960"
  },
  {
    "text": "8 and so as part of this process we're like oh right now we got to build this additional application we got to package",
    "start": "1949960",
    "end": "1955559"
  },
  {
    "text": "it up uh we got to make sure our deployed environments and I won't talk much about those this existing client",
    "start": "1955559",
    "end": "1961279"
  },
  {
    "text": "was also going through a migration from on Prem to Azure so we actually had to Target both IIs and Azure app services",
    "start": "1961279",
    "end": "1969519"
  },
  {
    "text": "so that's a whole other mess we had to worry about but the critical thing was we wanted to do like the least the",
    "start": "1969519",
    "end": "1974559"
  },
  {
    "text": "smallest thing possible to be able to get a full build and deploy pipeline up and running and",
    "start": "1974559",
    "end": "1981000"
  },
  {
    "text": "working okay so the next step was like okay let's migrate our first controller oh my God that's going to be a lot of",
    "start": "1981000",
    "end": "1986360"
  },
  {
    "text": "stuff uh so we had to make sure that um there are going to be cases where there's shared code between the existing",
    "start": "1986360",
    "end": "1993039"
  },
  {
    "text": "mvc5 application and the net core8 application so we got to make a shared",
    "start": "1993039",
    "end": "1998320"
  },
  {
    "text": "library to be able to do all this now a lot of you probably already have this right you've got like maybe you're using",
    "start": "1998320",
    "end": "2003639"
  },
  {
    "text": "clean architecture or whatever that's got a shared project with your business logic and you know entities and junk so",
    "start": "2003639",
    "end": "2009120"
  },
  {
    "text": "you might already have this but it's not necessarily guaranteed that uh that is",
    "start": "2009120",
    "end": "2014279"
  },
  {
    "text": "already to run AET 8 so the things that we were putting in there is basically",
    "start": "2014279",
    "end": "2020159"
  },
  {
    "text": "okay go find the guts of your controller actions um and this was using a very early version of my mediator project and",
    "start": "2020159",
    "end": "2026799"
  },
  {
    "text": "so we're like we'll just get like ignore all the asp.net uh mvc5 junk and really",
    "start": "2026799",
    "end": "2032159"
  },
  {
    "text": "I just want like the business logic behind there is the things that need to be shared between um or reference so",
    "start": "2032159",
    "end": "2038000"
  },
  {
    "text": "between both the asp.net uh 4 48 and MV uh too many versions here uhet 8 and",
    "start": "2038000",
    "end": "2045760"
  },
  {
    "text": "donet 45 so this will be like all of our data models right EF core or e ef6 that's one",
    "start": "2045760",
    "end": "2053480"
  },
  {
    "text": "other the thing we found was that this existing system was using ef6 and we thought oh no we're going to have to",
    "start": "2053480",
    "end": "2058760"
  },
  {
    "text": "migrate all those to EF core which is a whole thing but no uh the EF team said right this is a huge blocker for teams",
    "start": "2058760",
    "end": "2065158"
  },
  {
    "text": "migrating toet core um so how about we we you know throw people a bone and say",
    "start": "2065159",
    "end": "2070599"
  },
  {
    "text": "okay we'll go ahead and uh multi-target ef6 to both net modern net 678 as well",
    "start": "2070599",
    "end": "2078560"
  },
  {
    "text": "as net uh 45 whatever so luckily we didn't have to like migrate everything to um EF core something",
    "start": "2078560",
    "end": "2086599"
  },
  {
    "text": "else um this would also be all of our uh business logic so any kind of you know Common logic that things were calling",
    "start": "2086599",
    "end": "2092480"
  },
  {
    "text": "into each other um but it was really any non-ui code UI code is not",
    "start": "2092480",
    "end": "2098440"
  },
  {
    "text": "uh compatible between those different versions if you've got a lot of like custom UI templates",
    "start": "2098440",
    "end": "2106440"
  },
  {
    "text": "helpers uh components um if that's all like asp.net 45 stuff you can't use it",
    "start": "2106440",
    "end": "2113040"
  },
  {
    "text": "in asp.net core the names spaces are all different like the pipelines it's all different so um those you do have to",
    "start": "2113040",
    "end": "2119119"
  },
  {
    "text": "kind of just rewrite uh or like you know reimplement in uh aspnet at",
    "start": "2119119",
    "end": "2125680"
  },
  {
    "text": "corand now in terms of what this project targets um this may not be familiar to a",
    "start": "2125800",
    "end": "2131760"
  },
  {
    "text": "lot of developers but there is this idea that you can uh Target this this this kind of common interface implementation",
    "start": "2131760",
    "end": "2138760"
  },
  {
    "text": "of net standard 2.0 um and when you uh when you compile a library for net",
    "start": "2138760",
    "end": "2144480"
  },
  {
    "text": "standard 2.0 it will use the correct uh Target runtime when that code runs in",
    "start": "2144480",
    "end": "2150640"
  },
  {
    "text": "the final actual runable framework so net standard 2.0 code when running in net 48 does not Run net standard 2 it",
    "start": "2150640",
    "end": "2158200"
  },
  {
    "text": "actually runs donet 4.8 um and so that's kind of the least",
    "start": "2158200",
    "end": "2163960"
  },
  {
    "text": "common um Target framework for donet 48 and donet 8 but uh we hit cases where there was",
    "start": "2163960",
    "end": "2171960"
  },
  {
    "text": "code or dependencies that were not able to be shared between um did not support both of those Frameworks and so you can",
    "start": "2171960",
    "end": "2178400"
  },
  {
    "text": "actually make that project Target multiple Target Frameworks and we do this as well so we'd say if you're on",
    "start": "2178400",
    "end": "2184680"
  },
  {
    "text": "done 48 use this version of the N good package if you're on dinet 8 use this version of",
    "start": "2184680",
    "end": "2190200"
  },
  {
    "text": "the D packages because that was the only way we can get a single code base to handle multiple things that can get",
    "start": "2190200",
    "end": "2195359"
  },
  {
    "text": "super complicated with you know if you're heavily if using apis that aren't compatible with d night 8s um you may",
    "start": "2195359",
    "end": "2202720"
  },
  {
    "text": "have to do some shims or um uh it's kind of workarounds to be able to get this to work luckily we'd had we had very few of",
    "start": "2202720",
    "end": "2209839"
  },
  {
    "text": "those and this was relatively straightforward we want having to upgrade a lot of our packages from the",
    "start": "2209839",
    "end": "2216960"
  },
  {
    "text": "current version they were today to a version that did support net 8 and the",
    "start": "2216960",
    "end": "2222599"
  },
  {
    "text": "full NET Framework and for most of these things it made a lot of sense some things were very specific to the asp.net",
    "start": "2222599",
    "end": "2230040"
  },
  {
    "text": "core uh or asp.net 4.5 runtime so you see down here there's one of them that's",
    "start": "2230040",
    "end": "2235400"
  },
  {
    "text": "fluent validation. mbc5 well that's not going to have an analog in aspet core I'm not going to reference mvc5 package",
    "start": "2235400",
    "end": "2242800"
  },
  {
    "text": "from asp.net core so we just use like well what is the correct thing to use for that specific dependenc and",
    "start": "2242800",
    "end": "2248119"
  },
  {
    "text": "reference that one in the uh appropriate version so our final version was this",
    "start": "2248119",
    "end": "2254400"
  },
  {
    "text": "core application that shared like DB context DB entities um a lot of the as",
    "start": "2254400",
    "end": "2259680"
  },
  {
    "text": "much business logic as we could possibly share uh and then now I can actually do that first controller that is something",
    "start": "2259680",
    "end": "2266720"
  },
  {
    "text": "calling into business logic now I'm not copying and pasting a lot of code um it's it's all leveraging this shared",
    "start": "2266720",
    "end": "2274440"
  },
  {
    "text": "code so the next thing we were looking at is okay now we can finally pick a controller to",
    "start": "2274440",
    "end": "2281560"
  },
  {
    "text": "migrate uh and one of the F first things we saw is that the first controller is really hard to migrate because you think",
    "start": "2281560",
    "end": "2288760"
  },
  {
    "text": "about all the other stuff that's being used in a page like there's all the CSS",
    "start": "2288760",
    "end": "2293920"
  },
  {
    "text": "and JavaScript and all those kind of shared components layout templates blah blah blah it could be pretty big a first",
    "start": "2293920",
    "end": "2300400"
  },
  {
    "text": "lift just to get like just to show a piece of text on the page um and so I kind of liken it to like climbing Mount",
    "start": "2300400",
    "end": "2306040"
  },
  {
    "text": "Everest there like you don't want to be you don't want to try to like Summit uh like be the first person to Summit in",
    "start": "2306040",
    "end": "2312359"
  },
  {
    "text": "one day like you want to pick something that's more manageable and you're not one of those like uh poor poor people",
    "start": "2312359",
    "end": "2318040"
  },
  {
    "text": "that are left on the side of the mountain uh forever um so he said okay we don't want to we want to pick",
    "start": "2318040",
    "end": "2323480"
  },
  {
    "text": "something that is not the most difficult thing to um to migrate that hopefully",
    "start": "2323480",
    "end": "2328800"
  },
  {
    "text": "there's something that is doing something very simple and will force us to um not spend a lot of time on like",
    "start": "2328800",
    "end": "2335119"
  },
  {
    "text": "the business logic stuff but we know that there's going to be a lot of time spent on the all all the UI stuff",
    "start": "2335119",
    "end": "2342000"
  },
  {
    "text": "so um we're going to try to use Microsoft's tooling to do so uh and",
    "start": "2342000",
    "end": "2347920"
  },
  {
    "text": "we'll we'll we'll experience the meh",
    "start": "2347920",
    "end": "2352200"
  },
  {
    "text": "together now a good first controller to migrate I'm looking at things like are there any pages in our system that don't",
    "start": "2355000",
    "end": "2361400"
  },
  {
    "text": "require authentication because that is a whole thing that I'll be talking about here in a minute um is there like a",
    "start": "2361400",
    "end": "2366960"
  },
  {
    "text": "contact us or FAQ or about us right that's just like just static content not",
    "start": "2366960",
    "end": "2372319"
  },
  {
    "text": "doing anything then that's a good uh that's a good example for us to be like the the the first one we migrate because",
    "start": "2372319",
    "end": "2378480"
  },
  {
    "text": "then it doesn't have to bring a bunch of other junk along with it all right so let's go back to our",
    "start": "2378480",
    "end": "2385720"
  },
  {
    "text": "solution and then over here I can rightclick this controller and say",
    "start": "2385720",
    "end": "2391160"
  },
  {
    "text": "upgrade controller this is like you you're you're so hopeful this is going to be great",
    "start": "2391160",
    "end": "2397920"
  },
  {
    "text": "won't this be great I could just go right click control or F5 run okay great next one you know commit blah blah blah",
    "start": "2397920",
    "end": "2403760"
  },
  {
    "text": "um yeah oh that was quick sure um yeah upgrade",
    "start": "2403760",
    "end": "2411480"
  },
  {
    "text": "selection so it's like oh I got this stuff I got these Pages whatever uh these are the views that are coming over",
    "start": "2411480",
    "end": "2417960"
  },
  {
    "text": "and it is complete okay um something cool here is the endpoints Explorer so",
    "start": "2417960",
    "end": "2424119"
  },
  {
    "text": "this tells you all the existing endpoints in your application on the left and the things that have",
    "start": "2424119",
    "end": "2429400"
  },
  {
    "text": "migrated on the right so it is like smart enough to know that here's all the junk you got going on today um mostly",
    "start": "2429400",
    "end": "2435400"
  },
  {
    "text": "like it was it was pretty good um and here here's what it's going to be migrated to on the right okay so we've",
    "start": "2435400",
    "end": "2443440"
  },
  {
    "text": "got a controller here's our home controller okay so this is aspn net",
    "start": "2443440",
    "end": "2448640"
  },
  {
    "text": "core aspet 45 core 4 five core 4 five",
    "start": "2448640",
    "end": "2458160"
  },
  {
    "text": "anyone play The Game Spot the Difference it's just this right the the",
    "start": "2458160",
    "end": "2465520"
  },
  {
    "text": "using statement right that's like oh using system web MVC now it's much better Microsoft aspnet core MVC this is",
    "start": "2465520",
    "end": "2472920"
  },
  {
    "text": "a very dumb controller right yours are probably doing a lot more stuff so there are things that are going to be a little bit different so mostly what I'm doing",
    "start": "2472920",
    "end": "2480560"
  },
  {
    "text": "when i'm migrating controllers is fixing name spaces and type names but there's a very kind of well-known finite list of",
    "start": "2480560",
    "end": "2486560"
  },
  {
    "text": "those things like oh before there was no such thing as I action result or I action result of T so",
    "start": "2486560",
    "end": "2493920"
  },
  {
    "text": "um you know some of those things just have a slight naming change to get them from one to the other all right so let's run",
    "start": "2493920",
    "end": "2501920"
  },
  {
    "text": "this and it's going to be",
    "start": "2501920",
    "end": "2505680"
  },
  {
    "text": "great uh oh this looks like a web app that I would build which is devoid of CSS",
    "start": "2513240",
    "end": "2520359"
  },
  {
    "text": "altogether um okay well what happened here is the existing application still working okay uh let me go find oh what",
    "start": "2520359",
    "end": "2527480"
  },
  {
    "text": "was it 44 something other right what was it um if I go to my app settings here I",
    "start": "2527480",
    "end": "2535160"
  },
  {
    "text": "can actually see the proxy to oh gosh it's actually over here in launch",
    "start": "2535160",
    "end": "2540480"
  },
  {
    "text": "settings that is oh here's the the proxy 2 is this so let's go check this one out",
    "start": "2540480",
    "end": "2546400"
  },
  {
    "text": "see if like I didn't accidentally break the existing application somehow which is you know been known to happen Okay",
    "start": "2546400",
    "end": "2553359"
  },
  {
    "text": "this is the 45 or 48 okay so that looks good this looks less good what's going",
    "start": "2553359",
    "end": "2559839"
  },
  {
    "text": "on here why is it missing all the CSS javascripts all that",
    "start": "2559839",
    "end": "2564920"
  },
  {
    "text": "stuff this is our first like very sad depressing realization because we",
    "start": "2564920",
    "end": "2570359"
  },
  {
    "text": "thought oh we're going to knock this out no time flat and then we hit F5 like oh this may this may take a little longer",
    "start": "2570359",
    "end": "2576720"
  },
  {
    "text": "uh so looks good right like this is this looks almost exactly the same um so we got you know the view starts I don't you",
    "start": "2576720",
    "end": "2583400"
  },
  {
    "text": "know that okay whatever just layout Imports whatever tag hopers we're not using those yet um uh layout how about",
    "start": "2583400",
    "end": "2592000"
  },
  {
    "text": "this oh that's",
    "start": "2592000",
    "end": "2597599"
  },
  {
    "text": "why it's it's it's healthfully commented out the part that that is pulling in the",
    "start": "2597599",
    "end": "2603359"
  },
  {
    "text": "CSS and JavaScript bundling everything else we'll get migrated over so we'll do things like",
    "start": "2603359",
    "end": "2609400"
  },
  {
    "text": "fixing name spaces sometimes the the things won't migrate exactly there'll be some compile errors but those are",
    "start": "2609400",
    "end": "2614760"
  },
  {
    "text": "relatively straightforward but this is a big Mi miss or something that's really a big hole in our approach here is that",
    "start": "2614760",
    "end": "2621720"
  },
  {
    "text": "it's not bringing over any of the bundling and minification so that's the me part is would have been so great for",
    "start": "2621720",
    "end": "2628760"
  },
  {
    "text": "it to be able to migrate that part over but it could not so um that first controller",
    "start": "2628760",
    "end": "2637200"
  },
  {
    "text": "just the controller part is going to force us to bring over all of the dependencies that are part of that",
    "start": "2637200",
    "end": "2643160"
  },
  {
    "text": "Constructor argument so we had to pull over all of the DI configuration as well this is one of those places what that I",
    "start": "2643160",
    "end": "2650040"
  },
  {
    "text": "was like oh my gosh I forgot how terrible it was in mvc5 or really all the old mvc's um where they had to bolt",
    "start": "2650040",
    "end": "2657000"
  },
  {
    "text": "on dependency injection to the aspn Net Framework which did not support dependency injection like everything was",
    "start": "2657000",
    "end": "2663079"
  },
  {
    "text": "static uh properties and static methods and stuff so di is like kind of there in",
    "start": "2663079",
    "end": "2669040"
  },
  {
    "text": "aspnet classic uh but will likely require a manual migration um it's also not really worth",
    "start": "2669040",
    "end": "2676200"
  },
  {
    "text": "trying to share any of this code so when we brought over a new controller we would see what were the dependencies this thing was using how were those",
    "start": "2676200",
    "end": "2682640"
  },
  {
    "text": "dependencies getting registered and then manually pull over that registration in the way that it made sense in our new",
    "start": "2682640",
    "end": "2688960"
  },
  {
    "text": "world um we also saw that the kind of quote stock container for Microsoft may not be possible to use depending on how",
    "start": "2688960",
    "end": "2696160"
  },
  {
    "text": "much you're using in your existing di container um Microsoft's di container",
    "start": "2696160",
    "end": "2701480"
  },
  {
    "text": "tries to take a least common denominator approach except for things that they really need an aspnet core then they'll",
    "start": "2701480",
    "end": "2707920"
  },
  {
    "text": "just bolt stuff on that they need um so we you may or may not be able to just say well let let's not depend on nject",
    "start": "2707920",
    "end": "2715480"
  },
  {
    "text": "because it hasn't been released in eight years anyway um let's use a stock container we couldn't do that there was",
    "start": "2715480",
    "end": "2721160"
  },
  {
    "text": "enough things that we were doing custom that we didn't we didn't want to redesign a rip out um so we just want up like upgrading the container and then",
    "start": "2721160",
    "end": "2727760"
  },
  {
    "text": "manually moving over registration when it made sense so we went from in this case we went from something called",
    "start": "2727760",
    "end": "2733839"
  },
  {
    "text": "structure map to the aspet core version of this which is called Lamar um so if",
    "start": "2733839",
    "end": "2739319"
  },
  {
    "text": "you're using something like autofac that may be fairly straightforward for you to copy that over but I would not try to",
    "start": "2739319",
    "end": "2744800"
  },
  {
    "text": "share the configuration because there's so much difference in the dependency injection uh supports in asp.net 45 that",
    "start": "2744800",
    "end": "2752359"
  },
  {
    "text": "it's not worth trying not worth trying to do the views yes so this is our first major",
    "start": "2752359",
    "end": "2759640"
  },
  {
    "text": "problem is that um aspnet uh MVC uh 54321 whatever um supported bundling and",
    "start": "2759640",
    "end": "2767680"
  },
  {
    "text": "minification as a core feature of the framework so we went here and saw oh",
    "start": "2767680",
    "end": "2773160"
  },
  {
    "text": "right this is where you know we're pulling in the jQuery thing um and doing",
    "start": "2773160",
    "end": "2778640"
  },
  {
    "text": "the bundling stuff for our CSS as well but uh bundling is not a feature in",
    "start": "2778640",
    "end": "2786040"
  },
  {
    "text": "aspnet core and as far as I can tell will never be a feature so what do we do like this is",
    "start": "2786040",
    "end": "2793400"
  },
  {
    "text": "like like we need this feature we we are we we don't want to go back to the dark days and we also didn't necessarily want",
    "start": "2793400",
    "end": "2800079"
  },
  {
    "text": "to reimplement everything so we looked at our options here so the first option and this is you",
    "start": "2800079",
    "end": "2805760"
  },
  {
    "text": "know you can just go to Microsoft's website they have this description there as well for bundling and minification there is an OSS Library called Web",
    "start": "2805760",
    "end": "2812680"
  },
  {
    "text": "Optimizer and it is built by someone from the asp.net core team but is a third- party package right it's like",
    "start": "2812680",
    "end": "2818760"
  },
  {
    "text": "it's a it's a a separate add-on to aspn net.net",
    "start": "2818760",
    "end": "2824079"
  },
  {
    "text": "core and it's very similar to the B Bund bundling and minification of mbc5 but",
    "start": "2824079",
    "end": "2830280"
  },
  {
    "text": "not exactly so you can't copy and paste the code and expect it to work it will",
    "start": "2830280",
    "end": "2835480"
  },
  {
    "text": "not they're like just enough difference uh just enough differences where even like the URLs are different so I can't",
    "start": "2835480",
    "end": "2841240"
  },
  {
    "text": "even use the bundled sources um the like the well I get I have picture here in a",
    "start": "2841240",
    "end": "2847800"
  },
  {
    "text": "second or we say okay let's not do this like server side bundling uh let's do",
    "start": "2847800",
    "end": "2853720"
  },
  {
    "text": "what all the cool JavaScript kids do which is use an external tool to do so I",
    "start": "2853720",
    "end": "2859160"
  },
  {
    "text": "don't even know webpack is that still a thing I don't know if they've gone to like camel. JS or some other noun. JS",
    "start": "2859160",
    "end": "2865640"
  },
  {
    "text": "thing um but to say well let's not use this server side OSS Library let's use",
    "start": "2865640",
    "end": "2872079"
  },
  {
    "text": "something that is like the industry standard but that would require actually a pretty big rearch of frontend assets",
    "start": "2872079",
    "end": "2878079"
  },
  {
    "text": "the existing frontend assets were not designed for uh this external node kind",
    "start": "2878079",
    "end": "2883240"
  },
  {
    "text": "of bundling and minification it would also require like additional Dev tools locally additional build tools on our",
    "start": "2883240",
    "end": "2889319"
  },
  {
    "text": "server like that would be a much bigger lift for us than if we could try to Target the web Optimizer",
    "start": "2889319",
    "end": "2895079"
  },
  {
    "text": "stuff so that one actually looked it looks fairly similar you say you know ADD web web Optimizer and then add in",
    "start": "2895079",
    "end": "2901280"
  },
  {
    "text": "the the different configuration and it kind of translates what it means for the files over here to the files over there",
    "start": "2901280",
    "end": "2907680"
  },
  {
    "text": "but we did find that the the URLs aren't different so our Pages would have to know if they're using the bundled",
    "start": "2907680",
    "end": "2914760"
  },
  {
    "text": "minified files from the new application or from the old application so as we",
    "start": "2914760",
    "end": "2920000"
  },
  {
    "text": "migrated controllers and actions and views we would also change it to say oh yeah and also use this other new URL for",
    "start": "2920000",
    "end": "2927680"
  },
  {
    "text": "the bundling and Min minified files so in this case um Legacy requests would",
    "start": "2927680",
    "end": "2935559"
  },
  {
    "text": "still use the Legacy bundling and minification pipeline built into mvc5",
    "start": "2935559",
    "end": "2940640"
  },
  {
    "text": "and all the donet a requests would use the new pipeline for uh bundling and",
    "start": "2940640",
    "end": "2945880"
  },
  {
    "text": "minification which is web Optimizer but we wanted to make sure that we still shared the same static",
    "start": "2945880",
    "end": "2952760"
  },
  {
    "text": "assets between both applications that is that JS CSS file exists in one place on",
    "start": "2952760",
    "end": "2958400"
  },
  {
    "text": "disk and I'm not copying and pasting JavaScript CSS files between",
    "start": "2958400",
    "end": "2963760"
  },
  {
    "text": "applications so the way we did this um was there's a way",
    "start": "2963760",
    "end": "2970200"
  },
  {
    "text": "you can like share files between projects through this thing called linking files and a linked file has this",
    "start": "2970200",
    "end": "2977079"
  },
  {
    "text": "little like you can barely see it but looks kind of like a shortcut icon with a little arrow thing over there um so",
    "start": "2977079",
    "end": "2983359"
  },
  {
    "text": "that's that's uh me instructing the IDE and the project system that this file like pretend it's here but it's not it's",
    "start": "2983359",
    "end": "2991000"
  },
  {
    "text": "actually over there and it's only going to exist one place on disk but when I actually publish the application",
    "start": "2991000",
    "end": "2997799"
  },
  {
    "text": "then those files are actually duplicated in the final published result which is okay because these are two physically",
    "start": "2997799",
    "end": "3003760"
  },
  {
    "text": "separate applications that are getting deployed but developing locally I want those files in one place so I I blogged",
    "start": "3003760",
    "end": "3010920"
  },
  {
    "text": "about this too so don't worry about copying this approach down but the general idea is that you can use wild cards to say all the files you find over",
    "start": "3010920",
    "end": "3018200"
  },
  {
    "text": "here pretend like they're over here through a link so our typical migration after",
    "start": "3018200",
    "end": "3025720"
  },
  {
    "text": "getting this kind of initial setup going was first we would copy the controller uh over like copy paste uh correct name",
    "start": "3025720",
    "end": "3033000"
  },
  {
    "text": "spaces and migrate any of the filters that were being used so if you see like the attributes at the top of the controller well those have to get",
    "start": "3033000",
    "end": "3039680"
  },
  {
    "text": "migrated to in some form or fashion we'd also uh copy if needed any",
    "start": "3039680",
    "end": "3044920"
  },
  {
    "text": "business logic and models now we went with a shared Library approach so everything was just already where we needed it to be um but we also needed to",
    "start": "3044920",
    "end": "3052040"
  },
  {
    "text": "make sure that if my controllers were uh using additional packages that haven't",
    "start": "3052040",
    "end": "3057839"
  },
  {
    "text": "been pulled in yet I would pull those in as well we did this in a very incremental approach I try not to pull",
    "start": "3057839",
    "end": "3063599"
  },
  {
    "text": "in all the packages all once as I brought a controller over and it needed new library X that's when I would go",
    "start": "3063599",
    "end": "3069760"
  },
  {
    "text": "ahead and pull that Library over um finally so this is like uh you",
    "start": "3069760",
    "end": "3075400"
  },
  {
    "text": "know MVC model view controller so we migrate the controller migrate the m whatever it is to do the M for the model",
    "start": "3075400",
    "end": "3082160"
  },
  {
    "text": "and finally uh copy over the views um so this is where I think can become a",
    "start": "3082160",
    "end": "3087240"
  },
  {
    "text": "little bit more complicated as we saw the bundling and minification right missing feature but you may have a lot",
    "start": "3087240",
    "end": "3092400"
  },
  {
    "text": "of custom code that supports your views you may have HTML helper extensions you",
    "start": "3092400",
    "end": "3097520"
  },
  {
    "text": "might have any of those in their application yeah probably have a lot of them um because you want to you know have one way to render a button and that",
    "start": "3097520",
    "end": "3104160"
  },
  {
    "text": "that one way is in an HTML helper extension for the most part those are just like type name changes and",
    "start": "3104160",
    "end": "3111079"
  },
  {
    "text": "namespace changes so I think before was like it was like an MVC HTML string and now it's like an i MVC HTML string or",
    "start": "3111079",
    "end": "3118319"
  },
  {
    "text": "something like that so just these subtle type changes from asp.net 45 to asp.net core um we kept a a living",
    "start": "3118319",
    "end": "3128480"
  },
  {
    "text": "wiki page which was all these kind of cases for like okay when you hit this thing then this is how you need to",
    "start": "3128480",
    "end": "3134000"
  },
  {
    "text": "migrate it so as we would encounter these scenarios we made sure that we've got something we can go back to and it's",
    "start": "3134000",
    "end": "3139520"
  },
  {
    "text": "not someone's like memory that they'll forget it's like we know we just keep a living document of these lessons we've",
    "start": "3139520",
    "end": "3145559"
  },
  {
    "text": "learned and my ation steps now this was something we actually uh this last one is something that we",
    "start": "3145559",
    "end": "3152760"
  },
  {
    "text": "actually stopped doing which is uh we we we initially deleted the existing code I",
    "start": "3152760",
    "end": "3159400"
  },
  {
    "text": "would go back to the previous 4 five application and delete the controller delete the action and delete the view um",
    "start": "3159400",
    "end": "3166280"
  },
  {
    "text": "because we were having issues where if there was a bug in the dnet a application or me we messed something up",
    "start": "3166280",
    "end": "3173200"
  },
  {
    "text": "it would transparently proxy over to the existing application we thought we were done but we were wrong it was just",
    "start": "3173200",
    "end": "3179359"
  },
  {
    "text": "somehow messed up now we've taken a different approach now which is instead of to instead of us",
    "start": "3179359",
    "end": "3184760"
  },
  {
    "text": "deleting the existing code in all the lower environments what we did was add a little header or indicator to the",
    "start": "3184760",
    "end": "3190799"
  },
  {
    "text": "application code or the the HTML that would just tell you where that code was being served from is this being served",
    "start": "3190799",
    "end": "3197839"
  },
  {
    "text": "from theet a application or is it being served from the net 4 five application",
    "start": "3197839",
    "end": "3202920"
  },
  {
    "text": "and then it's very easy for us to go through as we're clicking through the application which one of these systems is actually running the code versus",
    "start": "3202920",
    "end": "3209920"
  },
  {
    "text": "getting proxied over so that's what we do today just add a little indicator that isn't turned on in production um",
    "start": "3209920",
    "end": "3215720"
  },
  {
    "text": "but is in all the lower environments and locally okay so now we're going to get",
    "start": "3215720",
    "end": "3223119"
  },
  {
    "text": "into like some of the Annoying features that we had to deal with in asp.net and the first one is",
    "start": "3223119",
    "end": "3229119"
  },
  {
    "text": "session ug session is shared state that lives uh it can be in a web Farm",
    "start": "3229119",
    "end": "3235880"
  },
  {
    "text": "scenario could live in a single shared location um or you can have it in memory but it's state that lives throughout",
    "start": "3235880",
    "end": "3241960"
  },
  {
    "text": "multiple life you know multiple requests of an individual user so we had the case of course like if the user is clicking",
    "start": "3241960",
    "end": "3248119"
  },
  {
    "text": "through the system and they introduce session variables on the aspnet 45 application how does a donet a",
    "start": "3248119",
    "end": "3255200"
  },
  {
    "text": "application know that those session variables exist and what are their values there is no shared server for",
    "start": "3255200",
    "end": "3262280"
  },
  {
    "text": "session like I can't like depend on some third party server so the adapter part of the system web adapters also includes",
    "start": "3262280",
    "end": "3270160"
  },
  {
    "text": "a way for us to when an application needs session the asp.net framework",
    "start": "3270160",
    "end": "3275880"
  },
  {
    "text": "application will now expose additional API endpoints to uh serve up uh session",
    "start": "3275880",
    "end": "3282880"
  },
  {
    "text": "details as well as if you need to write session it can it can you can write those session details back as well so in",
    "start": "3282880",
    "end": "3289520"
  },
  {
    "text": "my aspet core application when I need session data it won't go into its own session store it will instead call an Pi",
    "start": "3289520",
    "end": "3297200"
  },
  {
    "text": "Exposed on the asp.net application and if I need to write um it will do a put instead of a get so go ahead and put",
    "start": "3297200",
    "end": "3303599"
  },
  {
    "text": "that session data out so the session data will always live in the asp.net framework application until the very",
    "start": "3303599",
    "end": "3310200"
  },
  {
    "text": "very very end and then we'll transition over to the aset core application the way we have to do this",
    "start": "3310200",
    "end": "3316880"
  },
  {
    "text": "though is because it's an API call now like before you could put any random junk into session right if you did in",
    "start": "3316880",
    "end": "3323520"
  },
  {
    "text": "memory session you could have any kind of binary object object you know anything because it didn't even necessarily need to be serial serialized",
    "start": "3323520",
    "end": "3330720"
  },
  {
    "text": "but now because I have API calls we have to explicitly register that this needs",
    "start": "3330720",
    "end": "3336039"
  },
  {
    "text": "to be uh this the these are the different keys for session variables and",
    "start": "3336039",
    "end": "3341160"
  },
  {
    "text": "also we need to make sure they're serializable via Json so you may be doing some crazy",
    "start": "3341160",
    "end": "3346839"
  },
  {
    "text": "stuff in your session that you probably shouldn't be doing but that that was one of the things we saw like oh my gosh we were just stuffing our database entities",
    "start": "3346839",
    "end": "3353200"
  },
  {
    "text": "in there we should never do that but we were so we had to fix those places as well um migrate them first on the aspnet",
    "start": "3353200",
    "end": "3359640"
  },
  {
    "text": "application and then um expose them out through uh asp.net so in this case what",
    "start": "3359640",
    "end": "3366400"
  },
  {
    "text": "this is uh doing is in the mvc5 application it is now exposing the remote app server with an API key so",
    "start": "3366400",
    "end": "3373200"
  },
  {
    "text": "there is some security associated with it like a shared secret for that API to call into session um and now my 4 five",
    "start": "3373200",
    "end": "3379720"
  },
  {
    "text": "application is also serving up this API endpoint to uh to read and write session",
    "start": "3379720",
    "end": "3385520"
  },
  {
    "text": "data we have to now add a session client for",
    "start": "3385520",
    "end": "3390720"
  },
  {
    "text": "the aspnet core application so I say these are the explicit set of session keys that I support and then I'm also",
    "start": "3390720",
    "end": "3397359"
  },
  {
    "text": "adding here uh the remote app client to say this is the um it's the same as the proxy to address and then here's the API",
    "start": "3397359",
    "end": "3405319"
  },
  {
    "text": "key shared between those two different applications now there are a few",
    "start": "3405319",
    "end": "3411240"
  },
  {
    "text": "different options for like working with session um you can technically do just like every time you had session bracket",
    "start": "3411240",
    "end": "3418160"
  },
  {
    "text": "whatever the aspnet core application would transparently know what to do um but that we didn't want to do that",
    "start": "3418160",
    "end": "3423799"
  },
  {
    "text": "because we wanted to make it very explicit that when you're doing this you are calling an API over on aspnet uh the",
    "start": "3423799",
    "end": "3429960"
  },
  {
    "text": "aspnet 45 so um we wind up saying just make it the explicit version that I have to pull",
    "start": "3429960",
    "end": "3436799"
  },
  {
    "text": "in a session client and then that's where I make the call instead of using a kind of a transparent adapter approach",
    "start": "3436799",
    "end": "3442880"
  },
  {
    "text": "we want to make things kind of uh screaming in your face that hey this is using this remote client and",
    "start": "3442880",
    "end": "3448640"
  },
  {
    "text": "will need to be fixed whenever we migrate over to aspnet",
    "start": "3448640",
    "end": "3453240"
  },
  {
    "text": "core another kind of shared State we had uh was hangfire and if you're not familiar with hangfire it's a job",
    "start": "3454160",
    "end": "3460359"
  },
  {
    "text": "scheduling and queuing extension for aspnet net and aspnet core um yeah supports Forex and aspnet core uh",
    "start": "3460359",
    "end": "3468039"
  },
  {
    "text": "Persistence of jobs is also crossplatform so it can store job details inside of",
    "start": "3468039",
    "end": "3473839"
  },
  {
    "text": "SQL or whatever um and also supports multiple cues but we wanted to make sure that we did not duplicate work so if",
    "start": "3473839",
    "end": "3480280"
  },
  {
    "text": "something initiated a job that it didn't get picked up by both applications and execute the job twice this is kind of",
    "start": "3480280",
    "end": "3487119"
  },
  {
    "text": "that traditional um uh competing consumers for cues problem we want to",
    "start": "3487119",
    "end": "3493000"
  },
  {
    "text": "make sure that the for any any job or message coming off the queue that only one of the applications actually picks",
    "start": "3493000",
    "end": "3499079"
  },
  {
    "text": "it up so a typical usage of hangfire look",
    "start": "3499079",
    "end": "3504160"
  },
  {
    "text": "something like this we would have a uh somewhere that would like do some work and then like uh enq a job which is",
    "start": "3504160",
    "end": "3511359"
  },
  {
    "text": "typically like sending an email or sending out a notification calling twio whatever um that would be off in some",
    "start": "3511359",
    "end": "3517599"
  },
  {
    "text": "other uh the actual background job but um the way the hangfire works is that could just be like another method in",
    "start": "3517599",
    "end": "3523680"
  },
  {
    "text": "your controller action so we're like okay how do we migrate that over when",
    "start": "3523680",
    "end": "3529319"
  },
  {
    "text": "like you know anything could can kind of cue up these jobs so the way we worked it was we would create two different use",
    "start": "3529319",
    "end": "3536680"
  },
  {
    "text": "for one for net 8 and one uh the default one for MBC 5 so an aspet core",
    "start": "3536680",
    "end": "3542280"
  },
  {
    "text": "application which is initiating and and um initiating and also consuming a job",
    "start": "3542280",
    "end": "3548079"
  },
  {
    "text": "from from dnet 8 we would have it go to the default core q but if it the job is",
    "start": "3548079",
    "end": "3554240"
  },
  {
    "text": "over on the net uh 4.8 side we would switch over to the other queue so we",
    "start": "3554240",
    "end": "3559640"
  },
  {
    "text": "just had two separate cues one for jobs that were run in net 8 and one for jobs that would run in net 4",
    "start": "3559640",
    "end": "3568039"
  },
  {
    "text": "4.8 all right um the last piece I want to talk about before we stop is authentication and uh this is this is",
    "start": "3568559",
    "end": "3576079"
  },
  {
    "text": "very much an it depends sort of thing um it's highly dependent on what your authentication scheme is you can do cook",
    "start": "3576079",
    "end": "3582400"
  },
  {
    "text": "if you're doing cook authentication today then that's also kind of a a single signon sort of approach um so if",
    "start": "3582400",
    "end": "3588160"
  },
  {
    "text": "you are doing that today then you may be able to get away from that um or what you can also do is something known as",
    "start": "3588160",
    "end": "3594039"
  },
  {
    "text": "remote authentication which is a similar idea to the shared session which is all the authentication is being done in the",
    "start": "3594039",
    "end": "3600319"
  },
  {
    "text": "existing dinet framework application and then it will expose out API calls from the the donet 8 application to go get",
    "start": "3600319",
    "end": "3606880"
  },
  {
    "text": "those authentication details from the donet 4.8",
    "start": "3606880",
    "end": "3612400"
  },
  {
    "text": "application okay there's definitely uh more things that we had to worry about at migration so this could be like",
    "start": "3613160",
    "end": "3619319"
  },
  {
    "text": "almost a entire workshop for all these different kind of things but I wanted to kind of uh uh just kind of go through",
    "start": "3619319",
    "end": "3626200"
  },
  {
    "text": "the the last piece of the puzzle which is the last sort of migration and turning off the lights so this is like",
    "start": "3626200",
    "end": "3631960"
  },
  {
    "text": "everything is gone there are no more controllers being uh executing code inside of the asp.net uh 48 application",
    "start": "3631960",
    "end": "3639640"
  },
  {
    "text": "um and so for this case be like the final migration which would be one we would enable session on aspnet core and",
    "start": "3639640",
    "end": "3646200"
  },
  {
    "text": "disable it on mvc5 so now aspnet core is now doing session we would remove all",
    "start": "3646200",
    "end": "3651839"
  },
  {
    "text": "the remaining controllers and endpoints in mvc5 we would disable all of the remote",
    "start": "3651839",
    "end": "3657039"
  },
  {
    "text": "client and proxying stuff so no more no more yarp no more remote clients for",
    "start": "3657039",
    "end": "3662319"
  },
  {
    "text": "anything and then remove any of the shims we had put in place to bridging over to",
    "start": "3662319",
    "end": "3667520"
  },
  {
    "text": "mvc5 we would monitor any traffic so push this out to production uh and see",
    "start": "3667520",
    "end": "3673280"
  },
  {
    "text": "if like if we we're having any problems and then finally removed the mvc5 application from code pipelines and",
    "start": "3673280",
    "end": "3679160"
  },
  {
    "text": "deployments this is like the best feeling we had of massive deletion of",
    "start": "3679160",
    "end": "3685240"
  },
  {
    "text": "code of the existing DED 48 this is like an actual P request from an application",
    "start": "3685240",
    "end": "3690640"
  },
  {
    "text": "we were migrating where had 500,000 lines of deleted code from the existing mvc5 application so some parting",
    "start": "3690640",
    "end": "3699200"
  },
  {
    "text": "thoughts um highly recommend doing incremental migrations because you're going to minimize Risk by having those",
    "start": "3699200",
    "end": "3705720"
  },
  {
    "text": "small verifiable deployments all the way out to production we as much as possible made sure that every controller every",
    "start": "3705720",
    "end": "3712680"
  },
  {
    "text": "time we migrated we would test it and push push it out all the way to production and not have these big bang",
    "start": "3712680",
    "end": "3717720"
  },
  {
    "text": "batch based approach except for web forms sorry there is no incremental",
    "start": "3717720",
    "end": "3723680"
  },
  {
    "text": "migration for this this is a rewrite so if you have one of those big web forms applications you are going to be",
    "start": "3723680",
    "end": "3729160"
  },
  {
    "text": "rewriting each one of those pages into something else but that's just the way it is uh system web adapters uh do",
    "start": "3729160",
    "end": "3737359"
  },
  {
    "text": "definitely use that because that uh enables us incremental migration with yarp um but there always be something",
    "start": "3737359",
    "end": "3742599"
  },
  {
    "text": "that I I I definitely didn't cover all the things that you're going to run into but that's fine um there always be",
    "start": "3742599",
    "end": "3748039"
  },
  {
    "text": "something unique to your system that that will need to be migrated but everything that I've seen is going to be",
    "start": "3748039",
    "end": "3753200"
  },
  {
    "text": "overcomable because someone else has had to do this before you um final thing is to avoid any kind",
    "start": "3753200",
    "end": "3759240"
  },
  {
    "text": "of like improvements as you go and this was tough for us because you're like o this one's using a lot of static junk we",
    "start": "3759240",
    "end": "3765359"
  },
  {
    "text": "should migrate this dependen to dependency injection but that just slowed down the train when we're looking at you know looking down the barrel of",
    "start": "3765359",
    "end": "3771400"
  },
  {
    "text": "500 controllers any additional work on any one controller multiplies out to all of them so we said avoid any kind of",
    "start": "3771400",
    "end": "3778240"
  },
  {
    "text": "like helpful fixes as we went so thank you all very much uh if",
    "start": "3778240",
    "end": "3783359"
  },
  {
    "text": "you have any more questions about this I'll be hanging around afterwards otherwise this code in the and the",
    "start": "3783359",
    "end": "3788680"
  },
  {
    "text": "presentation you can find on my GitHub down there github.com J boogard presentations otherwise uh thank youall",
    "start": "3788680",
    "end": "3795119"
  },
  {
    "text": "for coming and uh I had a great conference so um yeah",
    "start": "3795119",
    "end": "3801520"
  }
]