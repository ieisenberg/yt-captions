[
  {
    "text": "good morning it's me between you and like lunch right so hopefully we can have an hour of fun",
    "start": "2879",
    "end": "9440"
  },
  {
    "text": "and be on time for the queue because that's important um so this next hour i'm going to talk to",
    "start": "9440",
    "end": "15839"
  },
  {
    "text": "you about sandboxing.net assemblies for fun profit but most of all it's about security right because that's",
    "start": "15839",
    "end": "20960"
  },
  {
    "text": "my my profession first let me briefly introduce myself so my name is neil stanis and i work as",
    "start": "20960",
    "end": "27279"
  },
  {
    "text": "a security researcher for vera code i have a background in dot-net development started out developing with the",
    "start": "27279",
    "end": "32480"
  },
  {
    "text": "first.net pitch in the early 2000s then i moved to security consultancy and ethical hacking and right now at",
    "start": "32480",
    "end": "38960"
  },
  {
    "text": "varicode i'm mostly researching everything related to net and we do static analysis of applications so we",
    "start": "38960",
    "end": "44160"
  },
  {
    "text": "check applications for vulnerabilities if you want to talk more about varicode come see me afterwards because this is",
    "start": "44160",
    "end": "49280"
  },
  {
    "text": "not a sales pitch of course and i will mention varico once you will notice when it will happen because today the agenda will be",
    "start": "49280",
    "end": "55360"
  },
  {
    "text": "different we're going to talk about as i said sandboxing first we need to briefly touch a bit about",
    "start": "55360",
    "end": "60640"
  },
  {
    "text": "like what are the risks that we're facing if we're developing applications using third party libraries right there are some some different aspects",
    "start": "60640",
    "end": "67520"
  },
  {
    "text": "that we need to look into and i want to give you some broad view on that then we're going to move a bit more to",
    "start": "67520",
    "end": "73280"
  },
  {
    "text": "sandboxing techniques we have technologies like browsers that use sandboxes for specific reasons we",
    "start": "73280",
    "end": "79200"
  },
  {
    "text": "see new technology stacks like for example webassembly also introduces sandbox",
    "start": "79200",
    "end": "85200"
  },
  {
    "text": "has been shown in other presentations in this conference um so there's a lot that we",
    "start": "85200",
    "end": "90560"
  },
  {
    "text": "can talk about but i want you to have a bit of a concept on that then we're going to move to code and",
    "start": "90560",
    "end": "96240"
  },
  {
    "text": "we're going to take a library and we're going to create a sandbox and we're going uh hopefully be successful",
    "start": "96240",
    "end": "101280"
  },
  {
    "text": "i can already set you we're gonna we're gonna have something that that will work but it will be a sandbox of course with",
    "start": "101280",
    "end": "108320"
  },
  {
    "text": "limited capabilities and so on we're gonna dig into that later and then at the end conclusion q a um",
    "start": "108320",
    "end": "114399"
  },
  {
    "text": "i will use references to articles all the links of the articles are in the slides and if you go to the repo that's",
    "start": "114399",
    "end": "120560"
  },
  {
    "text": "at the end of the presentation there's a link and you will find that there's a notes version that will have all the",
    "start": "120560",
    "end": "125600"
  },
  {
    "text": "links in it so if you want to have specific resource then that will be at the end",
    "start": "125600",
    "end": "131039"
  },
  {
    "text": "so third-party libraries i think if you look at the way that we develop libraries or like applications and if we",
    "start": "131039",
    "end": "136640"
  },
  {
    "text": "use libraries and i use myself because i'm i'm a lazy developer right i want to do minimal effort i have maximum results",
    "start": "136640",
    "end": "143840"
  },
  {
    "text": "a big chunk of what we do like almost 80 plus um will consist of three part libraries",
    "start": "143840",
    "end": "149440"
  },
  {
    "text": "that we're using and of course that's efficient in time because why would you reinvent the wheel yourself why would you",
    "start": "149440",
    "end": "157280"
  },
  {
    "text": "run into problems that somebody else already solved right with doing let's say authentication or cryptography right",
    "start": "157280",
    "end": "162959"
  },
  {
    "text": "it's like what don't do it right just take something that's already there but i think if you then put on the",
    "start": "162959",
    "end": "168560"
  },
  {
    "text": "security hat you should always have some consideration like hey how well is it maintained if i look into a library uh",
    "start": "168560",
    "end": "175120"
  },
  {
    "text": "if it has been stale for the last couple of years you can also question like hey what did they do maintenance wise",
    "start": "175120",
    "end": "181360"
  },
  {
    "text": "what do they do if security problems occur they have like open transparent stuff of like saying hey",
    "start": "181360",
    "end": "187120"
  },
  {
    "text": "we found this per problem this this security uh um problem we have fixed it",
    "start": "187120",
    "end": "192319"
  },
  {
    "text": "in this release you need to make sure that you update it right that's of course something you need to be aware of",
    "start": "192319",
    "end": "199360"
  },
  {
    "text": "and also keep in mind like if a project is run by people in their spare time like like they probably don't have a lot",
    "start": "199360",
    "end": "206319"
  },
  {
    "text": "of resources to do security compared to let's say a commercial project that you buy off the shelf from another company",
    "start": "206319",
    "end": "211599"
  },
  {
    "text": "that might have got like a big team that solely focuses on security right so it's a bit of a difference but i think it's",
    "start": "211599",
    "end": "216799"
  },
  {
    "text": "important to be aware of like hey i'm taking this library uh what do i expect from this",
    "start": "216799",
    "end": "221840"
  },
  {
    "text": "library what i had what do i expect to to happen right does it do stuff um",
    "start": "221840",
    "end": "227440"
  },
  {
    "text": "why should a um pdf generator use binary formatting internally like what's what's the exact",
    "start": "227440",
    "end": "233760"
  },
  {
    "text": "reason like why is that in right so there are so there's a couple of things if we then look at",
    "start": "233760",
    "end": "240159"
  },
  {
    "text": "the following piece and this is the only very good i'm going to mention so each year we publish a report which is called state of software security where we take",
    "start": "240159",
    "end": "247360"
  },
  {
    "text": "some of our metrics that we have on customers and we can do some slice and dice and some some some business intelligence on it",
    "start": "247360",
    "end": "253760"
  },
  {
    "text": "and the version of last year v12 showed that almost 9 79",
    "start": "253760",
    "end": "260079"
  },
  {
    "text": "of the liabilities never get updated once they're added to a project which is quite worrisome if you look at",
    "start": "260079",
    "end": "265520"
  },
  {
    "text": "hey stuff happens vulnerabilities are found they are published you need to update right because",
    "start": "265520",
    "end": "271520"
  },
  {
    "text": "um in general like what happens even with dotnet core this is one for march",
    "start": "271520",
    "end": "277520"
  },
  {
    "text": "security problems like are found hopefully disclosed if you do a good job and if you interact",
    "start": "277520",
    "end": "282960"
  },
  {
    "text": "with microsoft you even can get money out of it right with build bounties really cool",
    "start": "282960",
    "end": "288000"
  },
  {
    "text": "and then it needs to be updated right so this is a problem that occurred in.net core that has to do with remote code execution",
    "start": "288000",
    "end": "293840"
  },
  {
    "text": "and it's a cve right you probably have seen that which is like a number that will get assigned to a problem that everybody knows",
    "start": "293840",
    "end": "300160"
  },
  {
    "text": "right so this is already one reason to make sure that you are aware of like what type of libraries",
    "start": "300160",
    "end": "305280"
  },
  {
    "text": "you're using what versions you have right and you need to update it for security problems um",
    "start": "305280",
    "end": "311520"
  },
  {
    "text": "so this is one piece like vulnerabilities i found need to be fixed what else could happen with libraries",
    "start": "311520",
    "end": "318720"
  },
  {
    "text": "libraries could catch hijacked this is one that's related to an npm package called ui ua parser which was",
    "start": "318720",
    "end": "326800"
  },
  {
    "text": "used to pass user agent strings in the npm ecosystem it turned out that somebody grabbed hold",
    "start": "326800",
    "end": "333280"
  },
  {
    "text": "of credentials of one of the maintainers and published a version that had crypto mining stuff inside of it and it would",
    "start": "333280",
    "end": "339360"
  },
  {
    "text": "also steal username passwords right so that's more like a malicious approach of hey if i can get this",
    "start": "339360",
    "end": "344960"
  },
  {
    "text": "library and if it's widely used then there's a lot there's a lot to gain",
    "start": "344960",
    "end": "350240"
  },
  {
    "text": "right and if you have a goal of maybe getting secrets or maybe even grabbing compute having the ability to execute",
    "start": "350240",
    "end": "357280"
  },
  {
    "text": "stuff right that's even that can even be of value of somebody of maybe let's say",
    "start": "357280",
    "end": "362720"
  },
  {
    "text": "an attacker or nation state right you can be as broad as possible it makes sense to um",
    "start": "362720",
    "end": "368240"
  },
  {
    "text": "be aware of this right so this is um something which is more in the trend of like stuff can also become relationships",
    "start": "368240",
    "end": "373759"
  },
  {
    "text": "and in this case npm the credentials of this maintainer was stolen so what did github luckily do is",
    "start": "373759",
    "end": "380880"
  },
  {
    "text": "they saw the problem and this is maybe a bit too small but the article talks about the fact that all maintainers should",
    "start": "380880",
    "end": "387520"
  },
  {
    "text": "have two-factor authentication turned on on their account so meaning multi-factor right so otp like google authenticator",
    "start": "387520",
    "end": "394880"
  },
  {
    "text": "or microsoft authenticator where you have the codes that rotate and your password so if one of those gets stolen",
    "start": "394880",
    "end": "400160"
  },
  {
    "text": "let's say your password then somebody would not have access because he needs to have that second factor which is a good thing they pushed it they start",
    "start": "400160",
    "end": "406800"
  },
  {
    "text": "talking about it in november and in december they said like hey everybody should have this in maintain us so good",
    "start": "406800",
    "end": "412880"
  },
  {
    "text": "step forward at least for the npm ecosystem so",
    "start": "412880",
    "end": "418560"
  },
  {
    "text": "security problems malicious people that have different intentions with libraries right those are the second thing and",
    "start": "418560",
    "end": "424639"
  },
  {
    "text": "that's even with the nuget system there's a third variant so this was a piece of research that was",
    "start": "424639",
    "end": "431840"
  },
  {
    "text": "done by a company called reversing labs and it was published i think somewhere late last year",
    "start": "431840",
    "end": "437599"
  },
  {
    "text": "where they dug into the nougat ecosystem and what they did is they looked into libraries and packages and they saw that",
    "start": "437599",
    "end": "445039"
  },
  {
    "text": "some of the libraries have statically linked dlls or assemblies inside of the package",
    "start": "445039",
    "end": "450880"
  },
  {
    "text": "and what they figured out is that say for example there was a win scp helper that could do some copying right with",
    "start": "450880",
    "end": "456080"
  },
  {
    "text": "the help of ssh which was a library and it had a native library inside of it that would that",
    "start": "456080",
    "end": "461120"
  },
  {
    "text": "will do the sap things of course probably called throughout the interop from.net to that library but",
    "start": "461120",
    "end": "466800"
  },
  {
    "text": "that thing was outdated and that was hardly statically linked inside the package and had vulnerabilities for at",
    "start": "466800",
    "end": "472720"
  },
  {
    "text": "least a couple of years already right so you would say okay i get this nuget package but because it's a dependency",
    "start": "472720",
    "end": "479120"
  },
  {
    "text": "that's statically linked right it's different than i got this new get package and with that comes this whole transitive trees of",
    "start": "479120",
    "end": "485440"
  },
  {
    "text": "dependencies i'll give an example in the demo once we start out you will add one package but you will get like five for",
    "start": "485440",
    "end": "491599"
  },
  {
    "text": "free because it relies on those packages right there's never one single thing it always will add a couple of things but",
    "start": "491599",
    "end": "498160"
  },
  {
    "text": "because they are statically linked inside you cannot see it and this was one problem and there was",
    "start": "498160",
    "end": "503360"
  },
  {
    "text": "even a worse situation where somebody created a library that included a zid-lip z-lib compression library",
    "start": "503360",
    "end": "509919"
  },
  {
    "text": "inside of it compiled and that thing you cannot grab any binaries for but you need to compile it yourself",
    "start": "509919",
    "end": "515279"
  },
  {
    "text": "they were able to look at the heuristics of the of the system of the library itself and they were they were able to",
    "start": "515279",
    "end": "520880"
  },
  {
    "text": "correlate it back to a version of source it turned out that that one was vulnerable since 2005. so that one is inside of a nuget package",
    "start": "520880",
    "end": "527680"
  },
  {
    "text": "you will say hey i'm doing compression stuff but it uses a native library which is outdated has a lot of problems so and",
    "start": "527680",
    "end": "533600"
  },
  {
    "text": "it's not visible i think that's the biggest problem for this for this situation so that's like a third variant of what",
    "start": "533600",
    "end": "540240"
  },
  {
    "text": "what could possibly go wrong with third-party libraries and then the problem itself and",
    "start": "540240",
    "end": "546480"
  },
  {
    "text": "you probably are aware of cartoons that are created by by xka dca dc right we",
    "start": "546480",
    "end": "552080"
  },
  {
    "text": "have the sql injection with bobby drop tables this is one they published and i saw it and i'm literally using it for",
    "start": "552080",
    "end": "557600"
  },
  {
    "text": "every presentation i'm doing about security because this exactly illustrates like what the problem is",
    "start": "557600",
    "end": "563040"
  },
  {
    "text": "and they talk about all modern digital infrastructure but we can just replace it with with any architecture software",
    "start": "563040",
    "end": "568399"
  },
  {
    "text": "architecture right and somewhere underneath there is that small library piece that has been thanklessly",
    "start": "568399",
    "end": "573519"
  },
  {
    "text": "maintained since 2003 by some random person who lives in nebraska right and for some of the open source libraries",
    "start": "573519",
    "end": "579839"
  },
  {
    "text": "that is the case people are doing that and you could probably imagine like hey if that won't get compromised as we have",
    "start": "579839",
    "end": "585279"
  },
  {
    "text": "seen with the previous examples or if something is broken then that will be disastrous right and then",
    "start": "585279",
    "end": "590480"
  },
  {
    "text": "that's something to be aware of that there is a whole chain even with stuff like supply chain and i'm also doing talks on that which is",
    "start": "590480",
    "end": "597200"
  },
  {
    "text": "like a solely different problem getting from source to binaries third-party libraries always play a big role in that",
    "start": "597200",
    "end": "603200"
  },
  {
    "text": "and this is just a nice cartoon that i want to share but getting back to",
    "start": "603200",
    "end": "608800"
  },
  {
    "text": "what we're here for that sandboxing.net assemblies i think the question i asked myself when i started out doing this is that hey is",
    "start": "608800",
    "end": "615120"
  },
  {
    "text": "there a way for us to do a better job right because if you take a nuget package",
    "start": "615120",
    "end": "620160"
  },
  {
    "text": "would there be a possibility for us to take that package and reduce the security risks by doing",
    "start": "620160",
    "end": "625519"
  },
  {
    "text": "that so pull in the library and then use it in a good way and as you",
    "start": "625519",
    "end": "631040"
  },
  {
    "text": "saw in the previous examples i'm just assuming that at some point the library will be compromised or hacked it's just",
    "start": "631040",
    "end": "637120"
  },
  {
    "text": "a matter of like it's not a matter of how but it's more like a matter of like when it will happen it will just happen in the future i think that's good to",
    "start": "637120",
    "end": "642880"
  },
  {
    "text": "assume so based on this what can we do um i also set some of the following goals i",
    "start": "642880",
    "end": "649600"
  },
  {
    "text": "want to be able just to grab the package from nougat and use it as is no modifications right you can probably",
    "start": "649600",
    "end": "654720"
  },
  {
    "text": "grab the source code that somebody else developed which and then put some fixes in or change behavior if that's",
    "start": "654720",
    "end": "660880"
  },
  {
    "text": "something that you want to do but i think that's not what i that's not what i want to achieve with this i just want",
    "start": "660880",
    "end": "665920"
  },
  {
    "text": "to use it as is right i'm modified and then we should look into that so",
    "start": "665920",
    "end": "672399"
  },
  {
    "text": "can we maybe create a restricted sandbox a controlled restricted sandbox with limited capabilities right so with less",
    "start": "672399",
    "end": "679040"
  },
  {
    "text": "stuff to do so it should not be allowed to do certain things a brief side step to sandboxing and",
    "start": "679040",
    "end": "685120"
  },
  {
    "text": "what's sandboxing is because there are different approaches i think the one that everybody probably uses in this room of",
    "start": "685120",
    "end": "690800"
  },
  {
    "text": "course is inside your browser the browser sandbox of let's say chromium or firefox right and",
    "start": "690800",
    "end": "696959"
  },
  {
    "text": "in the past browsers when they were like running on your system and had full access maybe even like to all the system",
    "start": "696959",
    "end": "703200"
  },
  {
    "text": "resources that of course caused the problems in the beginning so they decided like hey",
    "start": "703200",
    "end": "708320"
  },
  {
    "text": "uh if we'd enter the site let's say chrome i believe has a tab each process will have its own like each tab will",
    "start": "708320",
    "end": "714320"
  },
  {
    "text": "have its own process and if it then wants to do something on the system he needs to call an ipc so an inter process communication",
    "start": "714320",
    "end": "721760"
  },
  {
    "text": "channel and ask like hey i want to do a file upload i want to select the file from the system am i allowed to do that",
    "start": "721760",
    "end": "727680"
  },
  {
    "text": "and based on that the browser's got like a policy engine and it will check and that of course reduce the risk right so at",
    "start": "727680",
    "end": "734000"
  },
  {
    "text": "that point the sandbox can decide okay you're not allowed to do it and that of course reduces the risk if some",
    "start": "734000",
    "end": "739279"
  },
  {
    "text": "malicious side gets loaded and it wants to side load some some some malware and",
    "start": "739279",
    "end": "744480"
  },
  {
    "text": "it wants to execute that and it wants to interact with the system then this is probably the first stop where it",
    "start": "744480",
    "end": "749519"
  },
  {
    "text": "hopefully um like stops and the and it's not successful in what they do",
    "start": "749519",
    "end": "755360"
  },
  {
    "text": "firefox in chrome they're competing right they have sandbox technologies themselves which is good because it's",
    "start": "755360",
    "end": "761040"
  },
  {
    "text": "almost the same as java versus c-sharp both are good languages right but if they compete to",
    "start": "761040",
    "end": "766320"
  },
  {
    "text": "watch each other they will have similar features and they will look at each other saying okay i want to have the same",
    "start": "766320",
    "end": "772000"
  },
  {
    "text": "this is similar thing i think firefox has got some concept i think it's like container and side isolation that's",
    "start": "772000",
    "end": "777839"
  },
  {
    "text": "really solid because what you can do you can say like hey i want to only use this container version of firefox",
    "start": "777839",
    "end": "784639"
  },
  {
    "text": "for my banking and that's it and that's the only thing that that browser window will do only for the banking and there's",
    "start": "784639",
    "end": "791519"
  },
  {
    "text": "an analogy with that if you use your mobile app and do mobile banking on your app um i'm always saying like that's",
    "start": "791519",
    "end": "797200"
  },
  {
    "text": "probably by far the securest way of doing banking because it's a controlled app it's developed by the the",
    "start": "797200",
    "end": "803279"
  },
  {
    "text": "the bank itself hopefully with security in mind right but it's highly controlled they can they can publish new versions",
    "start": "803279",
    "end": "808880"
  },
  {
    "text": "if needed but it's a single purpose app it only has one purpose and if you do that with the browser that's exactly the",
    "start": "808880",
    "end": "814720"
  },
  {
    "text": "same you should not have a window banking and then move to facebook or something else that's that's not a good",
    "start": "814720",
    "end": "819920"
  },
  {
    "text": "idea right you maybe want to have some isolation so that's what the browser gives us and i think that's a that's",
    "start": "819920",
    "end": "826000"
  },
  {
    "text": "that's the concept of sandboxing in different ways if we then look at new technology stacks and something like",
    "start": "826000",
    "end": "832560"
  },
  {
    "text": "the web assembly and then it more like a compiled target right so we can write code in rust or c-sharp even and we can",
    "start": "832560",
    "end": "840720"
  },
  {
    "text": "create a webassembly module out of it and we can execute webassembly has pretty strong security",
    "start": "840720",
    "end": "847279"
  },
  {
    "text": "in mind like the way that it deals with modules how they get loaded the memory itself is linear right so it",
    "start": "847279",
    "end": "852959"
  },
  {
    "text": "only has access to its own part of memory it cannot easily access something else unless you say it's allowed to do",
    "start": "852959",
    "end": "858880"
  },
  {
    "text": "so it's pretty cool and with the whole we need to get webassembly out of the browser they",
    "start": "858880",
    "end": "865360"
  },
  {
    "text": "introduced a thing called wazi which stands for webassembly system interface right so",
    "start": "865360",
    "end": "870560"
  },
  {
    "text": "all the cloud loads you see stuff happening um i think that's we're done by i think it's like fairmont support",
    "start": "870560",
    "end": "878320"
  },
  {
    "text": "i'm not going to pronounce that name but they have like different company startups they all do cloud native stuff and they all run web assemblies and i",
    "start": "878320",
    "end": "884959"
  },
  {
    "text": "think it's going to be pretty significant over the next couple of years but the nice thing is that webassembly has its own sandbox",
    "start": "884959",
    "end": "892160"
  },
  {
    "text": "and it has a concept called nanoprocess and the cartoon you see on the right hand side and maybe the text is a bit",
    "start": "892160",
    "end": "897519"
  },
  {
    "text": "too small but that one was created by lynn clark and she's also part of the bytecode alliance and she",
    "start": "897519",
    "end": "902639"
  },
  {
    "text": "works for fastly she used to work for mozilla firefox and she does a lot of stuff with webassembly she has like a",
    "start": "902639",
    "end": "908320"
  },
  {
    "text": "lot of good explanations on those security features if you want to see and if you want to understand go to code",
    "start": "908320",
    "end": "913600"
  },
  {
    "text": "cartoons but what happens there is you see like there's a transitive three of dependencies on the right and the top",
    "start": "913600",
    "end": "919199"
  },
  {
    "text": "one started out the process and then at some point the one on the bottom with the mask on has become malicious and",
    "start": "919199",
    "end": "926480"
  },
  {
    "text": "wants to do a bit more and he wants to maybe have access to some kind of open syscall right that's what it says",
    "start": "926480",
    "end": "932959"
  },
  {
    "text": "and because the first module is in control of what's executed it can say like hey you're not allowed to do that",
    "start": "932959",
    "end": "938480"
  },
  {
    "text": "webassembly nanoprocess can can block that so that that's one of the reasons why they're doing that so",
    "start": "938480",
    "end": "943519"
  },
  {
    "text": "this in essence is a sandbox in a good way and it still depends a bit on how",
    "start": "943519",
    "end": "948959"
  },
  {
    "text": "the runtimes are implemented that happens with let's say wesemere and wesentime",
    "start": "948959",
    "end": "954720"
  },
  {
    "text": "if they fail on implementing this right then we are maybe in a problem but this is i think it's good because it's",
    "start": "954720",
    "end": "961120"
  },
  {
    "text": "been done from from the start and if we even look at net and if we look at the first bitsoft.net even when i started up",
    "start": "961120",
    "end": "966480"
  },
  {
    "text": "my development you would say like hey niels there has been similar things within.net there was a concept called",
    "start": "966480",
    "end": "972639"
  },
  {
    "text": "code access security and it has been around since the first release",
    "start": "972639",
    "end": "978399"
  },
  {
    "text": "so the picture you see on the bottom of this is one of the drawings i took from a writing secure code book which is done",
    "start": "978399",
    "end": "984560"
  },
  {
    "text": "by michael howard written in the early 2000s that book is still applicable it still explains the problems we're facing",
    "start": "984560",
    "end": "990959"
  },
  {
    "text": "right now but with codex security there's like an evidence-based model so code would have",
    "start": "990959",
    "end": "997759"
  },
  {
    "text": "an origin where it's being loaded from which can be of course the internet right it might have been signed by",
    "start": "997759",
    "end": "1004320"
  },
  {
    "text": "somebody that's also a piece of evidence and based on that the intersection could allow somebody to have access to system",
    "start": "1004320",
    "end": "1010639"
  },
  {
    "text": "resources so let's say if you download an app from the internet it might not have",
    "start": "1010639",
    "end": "1015759"
  },
  {
    "text": "file system access you would not allow it that's what codex security was capable of doing and one of the concepts",
    "start": "1015759",
    "end": "1021680"
  },
  {
    "text": "they used is called stack walks and that was against luring attack so that's the same type of attack you saw in the",
    "start": "1021680",
    "end": "1027600"
  },
  {
    "text": "picture before with webassembly with one malicious like module that wants to do something in this case it's about a",
    "start": "1027600",
    "end": "1034000"
  },
  {
    "text": "librarian and carol asks vicky asks sandy to lend a book from the librarian which is quite",
    "start": "1034000",
    "end": "1039760"
  },
  {
    "text": "complicated but you just should see it as method asc calls fee calls s",
    "start": "1039760",
    "end": "1045360"
  },
  {
    "text": "to do something and the policy that the librarian enforces is that everybody needs to be a member",
    "start": "1045360",
    "end": "1050880"
  },
  {
    "text": "of this library in order to do like or like to learn books right i cannot walk into the library over here in porto",
    "start": "1050880",
    "end": "1056480"
  },
  {
    "text": "walken grab a book walk outside that's not how it works um so only those who have a library card",
    "start": "1056480",
    "end": "1062480"
  },
  {
    "text": "should be able to borrow books and in this case carol doesn't have one so what then happens at runtime is that it",
    "start": "1062480",
    "end": "1069840"
  },
  {
    "text": "does a stack walk and it will do a check for each of the colleagues to see like hey are you allowed to do that",
    "start": "1069840",
    "end": "1075520"
  },
  {
    "text": "so overall this model was pretty granular but i",
    "start": "1075520",
    "end": "1080559"
  },
  {
    "text": "think that's also one of the problems it had because it was too complex right and since net four they completely removed",
    "start": "1080559",
    "end": "1086640"
  },
  {
    "text": "it i think there are still a couple of types inside the dcl but it's not like available for you to use anymore and they say like hey just",
    "start": "1086640",
    "end": "1093679"
  },
  {
    "text": "move to the pros move the stuff to a separate process right because that's also a way",
    "start": "1093679",
    "end": "1099760"
  },
  {
    "text": "of isolating things but that's not what i want right i want to use one single code base i think",
    "start": "1099760",
    "end": "1105360"
  },
  {
    "text": "codex is security the most practical example you probably have run into is the medium trust with asp.net",
    "start": "1105360",
    "end": "1110720"
  },
  {
    "text": "right so at some point you could do that in the web config and that would allow people in a shared hosting environment",
    "start": "1110720",
    "end": "1116640"
  },
  {
    "text": "for example not to access temporary files because in the early days a web hoster usually had like one ias running",
    "start": "1116640",
    "end": "1123280"
  },
  {
    "text": "with all customers inside of it and if i put in an asp.net app i could just access all the files of the",
    "start": "1123280",
    "end": "1128960"
  },
  {
    "text": "other uh just like all the other web location web applications as well so that was one of those that was a good",
    "start": "1128960",
    "end": "1134559"
  },
  {
    "text": "feature but as i said it was probably too complex to administer and to work with it there's a",
    "start": "1134559",
    "end": "1139679"
  },
  {
    "text": "book a blue book about net framework security is like i think it's even like this thick shows you all the examples you can do",
    "start": "1139679",
    "end": "1146160"
  },
  {
    "text": "and maybe it was a bit too early even with silverlight they decided not to implement it but silverlight would have",
    "start": "1146160",
    "end": "1152080"
  },
  {
    "text": "been the right analogy to webassembly to do these similar kinds of things right to do that web assembly nano process but",
    "start": "1152080",
    "end": "1158320"
  },
  {
    "text": "then on silverlight with codex security so unfortunately it was a bit too early i",
    "start": "1158320",
    "end": "1164000"
  },
  {
    "text": "think uh yeah i've worked with it myself it's just too complex it didn't work so um",
    "start": "1164000",
    "end": "1170000"
  },
  {
    "text": "enough said let's move to some code and let's do some stuff and let's see if we are able to um get",
    "start": "1170000",
    "end": "1178160"
  },
  {
    "text": "some stuff going so first i want to move to my code vs code",
    "start": "1178160",
    "end": "1183840"
  },
  {
    "text": "in a bit hopefully it's big enough i cannot increase the font because then i have like less space myself and it's maybe even harder",
    "start": "1183840",
    "end": "1190960"
  },
  {
    "text": "to understand as i said the code is all in my github repo so",
    "start": "1190960",
    "end": "1196400"
  },
  {
    "text": "you will you can find it later on if you want to read it in more detail so what i have here is a console app and",
    "start": "1196400",
    "end": "1202080"
  },
  {
    "text": "there is a package and let me quickly show you um",
    "start": "1202080",
    "end": "1207760"
  },
  {
    "text": "the package itself and there's a single package called",
    "start": "1207760",
    "end": "1213440"
  },
  {
    "text": "document processor which is a version which is inside so this package i created for this purpose right for this",
    "start": "1213440",
    "end": "1219679"
  },
  {
    "text": "demo because i don't want to use something that's on the internet i will explain later on why but it has a single pass package right",
    "start": "1219679",
    "end": "1225600"
  },
  {
    "text": "that's how it looks but if we say please show me",
    "start": "1225600",
    "end": "1231120"
  },
  {
    "text": "all packages that come with that one we will see that the list is much larger right aside from all the net stuff we",
    "start": "1232159",
    "end": "1239039"
  },
  {
    "text": "have if we scroll up a bit you will see it also has bouncy castle which is probably some cryptography",
    "start": "1239039",
    "end": "1245520"
  },
  {
    "text": "and we see it also relies on itx7 which is a library you can use to generate pdfs right so you would say single",
    "start": "1245520",
    "end": "1252559"
  },
  {
    "text": "library know there's a lot more underneath and that comes with that so that's like the transitive example",
    "start": "1252559",
    "end": "1258480"
  },
  {
    "text": "so what does this library do it processes documents as the name indicates and",
    "start": "1258480",
    "end": "1264799"
  },
  {
    "text": "it's pretty straightforward it's it's api says like hey you can process a document you will have an input file",
    "start": "1264799",
    "end": "1270720"
  },
  {
    "text": "and it will produce an output file and in this case i'm running this in a console app so it will just refer to two",
    "start": "1270720",
    "end": "1276640"
  },
  {
    "text": "paws let's just run it you will see",
    "start": "1276640",
    "end": "1281840"
  },
  {
    "text": "i'm gonna do it in the console you will see that",
    "start": "1281840",
    "end": "1287290"
  },
  {
    "text": "[Music] it will execute and it will take a file that's the input which in this",
    "start": "1287290",
    "end": "1293600"
  },
  {
    "text": "case is a schedule that shows this session and it will generate a file and",
    "start": "1293600",
    "end": "1298960"
  },
  {
    "text": "it will write that file to the output forward one problem it has or one feature",
    "start": "1298960",
    "end": "1304400"
  },
  {
    "text": "depending on how you look at it is the fact that i can also write full files to other folders so if i just",
    "start": "1304400",
    "end": "1310320"
  },
  {
    "text": "remove the output folder and say let's write this to schedule",
    "start": "1310320",
    "end": "1316080"
  },
  {
    "text": "and do exactly the same again you will see",
    "start": "1316080",
    "end": "1323360"
  },
  {
    "text": "that it will write the file to the root folder so in technical terms if this would happen",
    "start": "1323440",
    "end": "1330000"
  },
  {
    "text": "in a library that runs inside a web application or maybe in a console application for that matter this is",
    "start": "1330000",
    "end": "1335120"
  },
  {
    "text": "something we call a pet reversal so somebody has the ability to control where pads or files get written to and",
    "start": "1335120",
    "end": "1341200"
  },
  {
    "text": "yes this is a console app i'm typing it myself but you could probably imagine if this is running behind let's say an asp.net controller and the data is not",
    "start": "1341200",
    "end": "1348320"
  },
  {
    "text": "probably validated right we should always validate our data before it ends up in any field like we need to make",
    "start": "1348320",
    "end": "1353440"
  },
  {
    "text": "sure that meets all our constraints before we process it but in this case let's assume that that's the case we are",
    "start": "1353440",
    "end": "1358720"
  },
  {
    "text": "able to write files to any arbitrary location throughout this library the second feature or problem it also",
    "start": "1358720",
    "end": "1365200"
  },
  {
    "text": "has is the following let me close this let me minimize the",
    "start": "1365200",
    "end": "1371039"
  },
  {
    "text": "site one again if you pass on file names it will copy files",
    "start": "1371039",
    "end": "1376159"
  },
  {
    "text": "if you pass on urls as the first argument of the source it will go to that website and download",
    "start": "1376159",
    "end": "1383760"
  },
  {
    "text": "the html as we would see over here so if i now do have i save this",
    "start": "1383760",
    "end": "1390240"
  },
  {
    "text": "just to be sure and if i now run it again",
    "start": "1390240",
    "end": "1395279"
  },
  {
    "text": "it's running it's executing we will see it has not generated a file hold on a second",
    "start": "1395679",
    "end": "1404720"
  },
  {
    "text": "where did it write to",
    "start": "1405360",
    "end": "1408400"
  },
  {
    "text": "make sure that we saved this one again let's go back",
    "start": "1413039",
    "end": "1419679"
  },
  {
    "text": "i think i might miss out on internet that's exactly the reason let me quickly connect and see if it",
    "start": "1420240",
    "end": "1426640"
  },
  {
    "text": "works ndc porto",
    "start": "1426640",
    "end": "1431440"
  },
  {
    "text": "now we're going to get all the notifications of people hey what are you doing neil are you like working no i'm presenting and everybody can see this",
    "start": "1433760",
    "end": "1441200"
  },
  {
    "text": "let's hold on a second i think this is good let's try it again",
    "start": "1441200",
    "end": "1445840"
  },
  {
    "text": "and now it works so it will generate an html file always check your connectivity before",
    "start": "1448080",
    "end": "1453840"
  },
  {
    "text": "you do demos this is just html that you get from the first page if you go to nfc portal right so",
    "start": "1453840",
    "end": "1459440"
  },
  {
    "text": "implicitly and that's done by the library so the library does accept file pass as first argument but it also",
    "start": "1459440",
    "end": "1464640"
  },
  {
    "text": "decides to go to the internet if it sees a url and if this is run inside a server",
    "start": "1464640",
    "end": "1469760"
  },
  {
    "text": "context then there is a problem that we call server side request forwarder so assume that this is run in asp.net",
    "start": "1469760",
    "end": "1476400"
  },
  {
    "text": "controller somebody has the ability to control that field i can do requests from that server to other services that",
    "start": "1476400",
    "end": "1483840"
  },
  {
    "text": "are like connected to that machine or that part of that network right and what we have seen in the past is that aws has",
    "start": "1483840",
    "end": "1489840"
  },
  {
    "text": "three bucket keys are stolen like that because you can maybe read out environment variables right you can do a lot more you can maybe see what's what's",
    "start": "1489840",
    "end": "1496799"
  },
  {
    "text": "what else is connected on that machine maybe it's some reverse proxy you get on it but then you can look at the machine",
    "start": "1496799",
    "end": "1502960"
  },
  {
    "text": "itself so it has a lot of possibilities and a lot of the hacks have maybe a chain of stuff that's",
    "start": "1502960",
    "end": "1509039"
  },
  {
    "text": "happening in server side request forgery can be the first one so implicitly this library does that and does those two",
    "start": "1509039",
    "end": "1515200"
  },
  {
    "text": "things and those are in my case i think problematic and yes we could um do a better job by making sure our",
    "start": "1515200",
    "end": "1521600"
  },
  {
    "text": "code deals with it once we get data back but i want to do it a bit differently right so",
    "start": "1521600",
    "end": "1528240"
  },
  {
    "text": "let me quickly just recap um we want to solve the problem we want to",
    "start": "1528240",
    "end": "1534480"
  },
  {
    "text": "say okay i want to use the package as is and this is the disclaimer and this is the reason why i created my own package because if you go to nuget and download",
    "start": "1534480",
    "end": "1541039"
  },
  {
    "text": "something you need to make sure you comply with the license of the package and 9 out of 10 times the license will",
    "start": "1541039",
    "end": "1547039"
  },
  {
    "text": "sell like you're not allowed to reverse or look into its internals for that matter right so if you want to do",
    "start": "1547039",
    "end": "1552400"
  },
  {
    "text": "something with a liability make sure you check it before you do it because it might not be allowed and what i want to",
    "start": "1552400",
    "end": "1557760"
  },
  {
    "text": "achieve is i want to change the behavior of the library i want to use the library as it is but i want to have control over",
    "start": "1557760",
    "end": "1564480"
  },
  {
    "text": "opening documents directly and i don't want it to be able to use urls to go external",
    "start": "1564480",
    "end": "1570640"
  },
  {
    "text": "secondly i also want to have control over where it writes files to and only for",
    "start": "1570640",
    "end": "1575679"
  },
  {
    "text": "that library right so yes for the internet stuff the first thing if you have a docker container that has no",
    "start": "1575679",
    "end": "1581200"
  },
  {
    "text": "egress then you can like no internet access you can probably solve that problem that's a layer of defense this could be an additional layer of defense",
    "start": "1581200",
    "end": "1588159"
  },
  {
    "text": "right that you will put inside your code and those are like the several ways to fix this and i think that that should be",
    "start": "1588159",
    "end": "1593760"
  },
  {
    "text": "the key for this solution so this is not like i'm going to show a concept and this should maybe hopefully be an",
    "start": "1593760",
    "end": "1600000"
  },
  {
    "text": "additional thing that we can do so what are the things that we've got",
    "start": "1600000",
    "end": "1605120"
  },
  {
    "text": "available for this piece so what can we do um in order to fix this so",
    "start": "1605120",
    "end": "1612240"
  },
  {
    "text": "codex's security heavily relied on a concept called app domains but with net",
    "start": "1612240",
    "end": "1617279"
  },
  {
    "text": "core there's only a single app domain from the start they've never done multiples it's probably impossible but",
    "start": "1617279",
    "end": "1622720"
  },
  {
    "text": "that's not the case luckily they did expose one of its internals and that's called assembly load context and that's",
    "start": "1622720",
    "end": "1628960"
  },
  {
    "text": "going to be really important for the next steps we're going to take because an assembly load context can replace the",
    "start": "1628960",
    "end": "1634960"
  },
  {
    "text": "isolation mechanism provided by multiple app domains instances within the net framework but it also allows you to",
    "start": "1634960",
    "end": "1641760"
  },
  {
    "text": "scope and load and unload assemblies and even better it allows you to run",
    "start": "1641760",
    "end": "1648559"
  },
  {
    "text": "multiple versions of the same assembly within a single process and this is probably the demo you have seen so i",
    "start": "1648559",
    "end": "1654880"
  },
  {
    "text": "think david fowler showed it at nbc oslo a couple of years ago where he has like",
    "start": "1654880",
    "end": "1660320"
  },
  {
    "text": "um one part of his program relied on newton jsof newtonsoft json version one",
    "start": "1660320",
    "end": "1665679"
  },
  {
    "text": "and the other one had a different one and he was able to run them next to each other in a single process by",
    "start": "1665679",
    "end": "1671120"
  },
  {
    "text": "implementing his own assembly load context so one key thing and that's also what they",
    "start": "1671120",
    "end": "1676720"
  },
  {
    "text": "mentioned in the documents on assembly load context that it's not a security thing it's not a security feature because keep",
    "start": "1676720",
    "end": "1682880"
  },
  {
    "text": "in mind that the code will still have access to all the system resources similarly as the process right but as i",
    "start": "1682880",
    "end": "1688720"
  },
  {
    "text": "said keep in mind we want to have an additional layer of defense that's my goal but it does allow us to have control",
    "start": "1688720",
    "end": "1695440"
  },
  {
    "text": "over what's get loaded when and i think that's the key and i thought like when i was reading through it",
    "start": "1695440",
    "end": "1700720"
  },
  {
    "text": "reading through the specs i thought like this is potential so what are we going to do next with the project we saw before",
    "start": "1700720",
    "end": "1707840"
  },
  {
    "text": "we need to have a way to use the library and we need to have a",
    "start": "1707840",
    "end": "1714080"
  },
  {
    "text": "way to use the library within the console app but we don't want to reference it so we need to have some kind of contract which of course is an",
    "start": "1714080",
    "end": "1719679"
  },
  {
    "text": "interface that interface will be the shared project between the things that we're going to do",
    "start": "1719679",
    "end": "1725600"
  },
  {
    "text": "then of course we need to get rid of the fact that the console app has no reference to the document processor and",
    "start": "1725600",
    "end": "1731760"
  },
  {
    "text": "it only knows the interface and then we need to have a separate library that will do all the heavy lifting for us for the sandbox we need to add the document",
    "start": "1731760",
    "end": "1739360"
  },
  {
    "text": "processor package and then we're going to focus on a thing which is called self-contained deployment and that's also a key aspect",
    "start": "1739360",
    "end": "1746480"
  },
  {
    "text": "of this concept so what you can do with the net application you can publish an application being",
    "start": "1746480",
    "end": "1751679"
  },
  {
    "text": "self-contained which means that a folder that you publish to which targets in my case targets targets my mac will have",
    "start": "1751679",
    "end": "1758320"
  },
  {
    "text": "all binaries it needs to order to execute right so that folder will have full framework it will have native",
    "start": "1758320",
    "end": "1764640"
  },
  {
    "text": "libraries it uses on my system and it will be there so if we have control over",
    "start": "1764640",
    "end": "1770320"
  },
  {
    "text": "where it loads stuff and we point it to that folder then we might be able to mingle with what's inside that folder",
    "start": "1770320",
    "end": "1775840"
  },
  {
    "text": "right so that's in essence the thing we want to achieve so",
    "start": "1775840",
    "end": "1780960"
  },
  {
    "text": "it's time to get back to some code and i'm just going to talk you through",
    "start": "1780960",
    "end": "1787440"
  },
  {
    "text": "briefly to make sure i'm not going to change the code because",
    "start": "1787440",
    "end": "1793679"
  },
  {
    "text": "that's probably the demo gods will push me back and say like no deals don't do that so we have a solution",
    "start": "1793679",
    "end": "1800559"
  },
  {
    "text": "called middle there's a start spot that's the that's the first demo and then we have a middle piece",
    "start": "1800559",
    "end": "1807520"
  },
  {
    "text": "let me open up that one i already put in all the stuff that i mentioned in the slide before and after",
    "start": "1807520",
    "end": "1813120"
  },
  {
    "text": "we're done i'm going to recap it with a diagram that you have some idea what's inside right so first as i said we need",
    "start": "1813120",
    "end": "1818720"
  },
  {
    "text": "to have a library which is just",
    "start": "1818720",
    "end": "1823760"
  },
  {
    "text": "exactly mimicking the thing that we want to do we want to process documents there are two arguments it will give results",
    "start": "1823760",
    "end": "1828880"
  },
  {
    "text": "back right straightforward nothing fancy if we then look",
    "start": "1828880",
    "end": "1834240"
  },
  {
    "text": "into the console app itself the console app only has",
    "start": "1834240",
    "end": "1839919"
  },
  {
    "text": "a reference to the i interface project that's it that's that's the only thing it needs it needs to know how the interface looks",
    "start": "1839919",
    "end": "1847360"
  },
  {
    "text": "and there's another implementation that we need in order to load it which is our assembly load context but first let me",
    "start": "1847360",
    "end": "1852880"
  },
  {
    "text": "move to the library itself so the document processor has moved to its own",
    "start": "1852880",
    "end": "1858480"
  },
  {
    "text": "class project it also references the interface and that's about it right and inside of",
    "start": "1858480",
    "end": "1865039"
  },
  {
    "text": "this project we will have a call to um to the library and i put in",
    "start": "1865039",
    "end": "1872000"
  },
  {
    "text": "a console right just to show you some stuff once i run this demo what you see over here it will",
    "start": "1872000",
    "end": "1877519"
  },
  {
    "text": "look into the context of my processor because that's how this thing is called and it will show us",
    "start": "1877519",
    "end": "1882640"
  },
  {
    "text": "where http client get loaded gets loaded from what's the assembly location",
    "start": "1882640",
    "end": "1887919"
  },
  {
    "text": "of our http client right because that's the thing we want to like that's the",
    "start": "1887919",
    "end": "1893120"
  },
  {
    "text": "thing i want to show you then we have the processor we instantiate and we return the results",
    "start": "1893120",
    "end": "1898240"
  },
  {
    "text": "right so this is the library itself then we need to do the publish and within the library project i will have",
    "start": "1898240",
    "end": "1904799"
  },
  {
    "text": "the following thing which is just doing that self-contained deployment as i mentioned before and it targets",
    "start": "1904799",
    "end": "1912080"
  },
  {
    "text": "my mac itself right so let's just briefly run this",
    "start": "1912080",
    "end": "1918679"
  },
  {
    "text": "let's run this and we will see a folder appear in this tree",
    "start": "1921679",
    "end": "1928720"
  },
  {
    "text": "in the middle i'm in the end i need to go to the other solution hold on a second",
    "start": "1929360",
    "end": "1935840"
  },
  {
    "text": "make sure that we have this one let's go into library let's say pub",
    "start": "1942799",
    "end": "1948960"
  },
  {
    "text": "publish and then we see a folder appear over",
    "start": "1948960",
    "end": "1954559"
  },
  {
    "text": "here right in this site and you will see it has all the dlls that the library needs it has the library implementation",
    "start": "1954559",
    "end": "1960720"
  },
  {
    "text": "itself it has some of the native stuff my mac needs in order to execute",
    "start": "1960720",
    "end": "1965760"
  },
  {
    "text": "so that's the thing right so this folder will have those files available",
    "start": "1965760",
    "end": "1972559"
  },
  {
    "text": "let me close this one a bit let's go back to the files up",
    "start": "1972559",
    "end": "1978640"
  },
  {
    "text": "and then we need to have the magic of the load contact right and this is a lot of code and i'm not gonna like",
    "start": "1978640",
    "end": "1983919"
  },
  {
    "text": "in detail talk you through what there's two concepts i want you to be aware of right so this is just implementing the",
    "start": "1983919",
    "end": "1989279"
  },
  {
    "text": "assembly load context it also uses the assembly load the assembly dependency resolver which",
    "start": "1989279",
    "end": "1995360"
  },
  {
    "text": "is a default framework thing that we'll just look into fullness and try to resolve this",
    "start": "1995360",
    "end": "2001440"
  },
  {
    "text": "there is some type resolving there's one share type which is our interface so that's you're gonna see how it gets",
    "start": "2001440",
    "end": "2006559"
  },
  {
    "text": "instantiated that's how we look and then it will load assemblies and it will look into",
    "start": "2006559",
    "end": "2012480"
  },
  {
    "text": "the folder of um of the the root in this case the library",
    "start": "2012480",
    "end": "2019120"
  },
  {
    "text": "and if it finds it it returns the path if this is in this case default false if",
    "start": "2019120",
    "end": "2024240"
  },
  {
    "text": "there is no thing found it will throw an exception i'm not able to find this library right",
    "start": "2024240",
    "end": "2029600"
  },
  {
    "text": "so that's what we want we want to have control over what gets loaded when and for managed libraries this is the",
    "start": "2029600",
    "end": "2035200"
  },
  {
    "text": "case for unmanaged libraries right because with our.net framework we also rely on some system libraries in my case",
    "start": "2035200",
    "end": "2040960"
  },
  {
    "text": "for my mac we still need to sometimes rely on what's inside the system but",
    "start": "2040960",
    "end": "2046399"
  },
  {
    "text": "those are the native libraries a bit and you also saw in the publish script i remove one single library for",
    "start": "2046399",
    "end": "2051520"
  },
  {
    "text": "that purpose but that's a native mac thing if you run this on linux that one won't be there but we have the same",
    "start": "2051520",
    "end": "2058240"
  },
  {
    "text": "like try to resolve what's inside the folder give it back to me and then we can continue and then over here you see",
    "start": "2058240",
    "end": "2064560"
  },
  {
    "text": "we need to create an instance and this is taking the load context from an assembly name it will iterate",
    "start": "2064560",
    "end": "2070480"
  },
  {
    "text": "over the types and it will create that instance and use this right so this takes care of our isolated load context and",
    "start": "2070480",
    "end": "2078158"
  },
  {
    "text": "as i said here we have the folder and if we then look into the program",
    "start": "2078159",
    "end": "2084158"
  },
  {
    "text": "itself we will see that there was a couple of differences once again i'm showing you the origin of",
    "start": "2084159",
    "end": "2089599"
  },
  {
    "text": "http client and we saw that inside that library and if we do a good job then the http client loaded here should be",
    "start": "2089599",
    "end": "2096320"
  },
  {
    "text": "different than the one that's loaded in the library then we create the load context i'm just",
    "start": "2096320",
    "end": "2101440"
  },
  {
    "text": "pointing out to this is the library we're starting out with and now i have a share type called iprocessor that's the thing",
    "start": "2101440",
    "end": "2108160"
  },
  {
    "text": "create instance do your thing and do exactly the same with copying those files right so if i",
    "start": "2108160",
    "end": "2114079"
  },
  {
    "text": "now run the console",
    "start": "2114079",
    "end": "2119519"
  },
  {
    "text": "we will see that it",
    "start": "2120160",
    "end": "2126000"
  },
  {
    "text": "shows us that within console app http client that's that call we saw earlier resides",
    "start": "2126000",
    "end": "2132480"
  },
  {
    "text": "in shared folder on my mac and for the my processor it looks into the published folder",
    "start": "2132480",
    "end": "2139200"
  },
  {
    "text": "so that is http client in our library which is the a different one than from the main project right so from that",
    "start": "2139200",
    "end": "2145599"
  },
  {
    "text": "perspective i think we have succeeded and we have gotten the the other framework next to",
    "start": "2145599",
    "end": "2151119"
  },
  {
    "text": "it which is the same that will then use that one right so we can still have",
    "start": "2151119",
    "end": "2156480"
  },
  {
    "text": "our output we still have our schedule right for that matter that file is still the same we can also still do the same",
    "start": "2156480",
    "end": "2163040"
  },
  {
    "text": "traversal with paths that problems are still in because that's the next thing we want to solve but i want to briefly",
    "start": "2163040",
    "end": "2168720"
  },
  {
    "text": "just recap a bit what we just saw so let me get back to the slides and show you",
    "start": "2168720",
    "end": "2176640"
  },
  {
    "text": "so we started out developing this we had a default load context that's our app we",
    "start": "2176640",
    "end": "2183440"
  },
  {
    "text": "have the console app that has the document processor library next to it and underneath that is the whole framework dependencies we rely on which",
    "start": "2183440",
    "end": "2190720"
  },
  {
    "text": "of course is i o we do something with files we need to have http right that's the client of course",
    "start": "2190720",
    "end": "2196560"
  },
  {
    "text": "and what we have done with this abstraction you saw before is we created the second load context and you should",
    "start": "2196560",
    "end": "2202160"
  },
  {
    "text": "also see what we have done with the with the framework bits right so the load context knows the",
    "start": "2202160",
    "end": "2209119"
  },
  {
    "text": "interface that's been defined that interface will then be used by the console app but the",
    "start": "2209119",
    "end": "2215200"
  },
  {
    "text": "isolated load context has its own version of the framework that has access to those files which are",
    "start": "2215200",
    "end": "2221599"
  },
  {
    "text": "in a different folder so we have taken out the document processor and we created",
    "start": "2221599",
    "end": "2227359"
  },
  {
    "text": "that library that does it and it has its own framework version right so that's that's pretty cool so this is the stage we're at right now so",
    "start": "2227359",
    "end": "2233760"
  },
  {
    "text": "what will we be able to do next and with dot net 5 the heavily also focused on",
    "start": "2233760",
    "end": "2241119"
  },
  {
    "text": "removing types right trimming that was done with net five if you look at a blazer app and if the blazer app gets",
    "start": "2241119",
    "end": "2246960"
  },
  {
    "text": "loaded for the first time you want to have minimal assemblies going over the line because the more data people need",
    "start": "2246960",
    "end": "2252480"
  },
  {
    "text": "to load the longer it takes for the app right so could we maybe just use that trimming",
    "start": "2252480",
    "end": "2259839"
  },
  {
    "text": "and cut out the stuff that we don't use right but in my case i want to be more",
    "start": "2259839",
    "end": "2265359"
  },
  {
    "text": "rigorous i want to take out more i don't want to take out the types that i don't use i also want to have control over the",
    "start": "2265359",
    "end": "2271440"
  },
  {
    "text": "types that are used by the library by maybe changing it a bit and the question we could ask ourselves",
    "start": "2271440",
    "end": "2277599"
  },
  {
    "text": "is hey could we achieve that and",
    "start": "2277599",
    "end": "2282640"
  },
  {
    "text": "this is a bit like weird because now i'm going to fix a third-party library problem with another third-party library",
    "start": "2282640",
    "end": "2287839"
  },
  {
    "text": "but this is a really cool one that allows us to patch.net assemblies right so",
    "start": "2287839",
    "end": "2295440"
  },
  {
    "text": "harmony 2 is a library that's done by i think it's a single person",
    "start": "2295440",
    "end": "2301359"
  },
  {
    "text": "that develops it and it allows us to replace and patch replace and decorate",
    "start": "2301359",
    "end": "2308240"
  },
  {
    "text": "that or mono methods during runtime so we can do a patch that's the one you're going to see",
    "start": "2308240",
    "end": "2313920"
  },
  {
    "text": "in my fix or we can do a transpile which is rewriting il and i was really keen on",
    "start": "2313920",
    "end": "2319520"
  },
  {
    "text": "hey i honestly don't want to rely on runtime stuff right that's maybe stuff",
    "start": "2319520",
    "end": "2325200"
  },
  {
    "text": "that can still go wrong for some reason if you want to do a transpile then you will rewrite the il which might be a",
    "start": "2325200",
    "end": "2331359"
  },
  {
    "text": "better solution right so the first the first demos i did with",
    "start": "2331359",
    "end": "2337040"
  },
  {
    "text": "this with assembly load context so nate mcmaster he is a guy who used to work on",
    "start": "2337040",
    "end": "2342320"
  },
  {
    "text": "the asp.net team and he has created a plugins manager that he showed that could use similar",
    "start": "2342320",
    "end": "2349359"
  },
  {
    "text": "like multiple versions of the same assembly within asp.net core and he had a load contact implementation",
    "start": "2349359",
    "end": "2354960"
  },
  {
    "text": "similarly like this and what i did in my first demos let's say i want to take care of http",
    "start": "2354960",
    "end": "2361520"
  },
  {
    "text": "client i just took it out and just implemented a stop for it and then just put that one back which also",
    "start": "2361520",
    "end": "2368240"
  },
  {
    "text": "works um but i thought it's much nicer to have like if we want to do more policy-wide",
    "start": "2368240",
    "end": "2373520"
  },
  {
    "text": "things then it would be better to have something we can program against and harmony is a",
    "start": "2373520",
    "end": "2378720"
  },
  {
    "text": "is a real cool library to do that so let's move into",
    "start": "2378720",
    "end": "2384560"
  },
  {
    "text": "the code again because that's cool and let's dig into",
    "start": "2384560",
    "end": "2389680"
  },
  {
    "text": "how we can use harmony to solve some of the problems we've seen",
    "start": "2389680",
    "end": "2395560"
  },
  {
    "text": "just a second",
    "start": "2400720",
    "end": "2403440"
  },
  {
    "text": "so let me switch to the end you already saw that so",
    "start": "2408960",
    "end": "2415280"
  },
  {
    "text": "let's go up one more that's the end solution let me just get rid of pub",
    "start": "2416720",
    "end": "2422720"
  },
  {
    "text": "let me just open this here",
    "start": "2422720",
    "end": "2426480"
  },
  {
    "text": "so what we hear is all c is all the same right so the isolated load contact same implementation we will see",
    "start": "2432240",
    "end": "2440240"
  },
  {
    "text": "the same types resolving happening there's some additional code i'm going to explain later on because that proves",
    "start": "2440240",
    "end": "2445839"
  },
  {
    "text": "that we have done a good job and there's the library right and as i said the library right now",
    "start": "2445839",
    "end": "2451599"
  },
  {
    "text": "has a an additional reference to harmony and what do we then need to do in order",
    "start": "2451599",
    "end": "2457920"
  },
  {
    "text": "to fix this so first of all as i said we're gonna",
    "start": "2457920",
    "end": "2463599"
  },
  {
    "text": "apply patches and harmony has a declarative model where you can say okay",
    "start": "2463599",
    "end": "2469520"
  },
  {
    "text": "let's patch this type let's take the method copy because i know",
    "start": "2469520",
    "end": "2474640"
  },
  {
    "text": "internally that the library uses this because yeah i wrote it myself but let's say you looked into its internals and you know",
    "start": "2474640",
    "end": "2480480"
  },
  {
    "text": "that it does a file dot copy at some stage and that's causing the file to be written to that folder we saw before",
    "start": "2480480",
    "end": "2487680"
  },
  {
    "text": "i want to have control of that one and say like hey do take this method first argument is string second arguments also",
    "start": "2487680",
    "end": "2493839"
  },
  {
    "text": "string and patch it so what i'm doing here is this is a prefix or this method will be",
    "start": "2493839",
    "end": "2499520"
  },
  {
    "text": "called before it executes so i say hey please give me a canonicalized path name",
    "start": "2499520",
    "end": "2505520"
  },
  {
    "text": "right so get full path it's always good if you look at pet reversal problems",
    "start": "2505520",
    "end": "2511839"
  },
  {
    "text": "dot dot slash or pill right in file names that allows people to have access to different files",
    "start": "2511839",
    "end": "2518000"
  },
  {
    "text": "uh with get full path that will be normalized and you want to create the path itself",
    "start": "2518000",
    "end": "2523040"
  },
  {
    "text": "then you want to normalize and then you want to check it against a folder you expect it to be in and that's",
    "start": "2523040",
    "end": "2528720"
  },
  {
    "text": "exactly what i'm doing here i'm saying like hey in this case i want to be sure that the",
    "start": "2528720",
    "end": "2535040"
  },
  {
    "text": "path that i get will have is part of this folder or is inside of that folder",
    "start": "2535040",
    "end": "2541280"
  },
  {
    "text": "that will fix it and if that's not the case then i'm going to say hey you're not allowed to write files outside of",
    "start": "2541280",
    "end": "2546960"
  },
  {
    "text": "this location right so this is the first patch the second patch as i said before is",
    "start": "2546960",
    "end": "2553119"
  },
  {
    "text": "related to http client and",
    "start": "2553119",
    "end": "2558640"
  },
  {
    "text": "i know for a given fact that the library uses a getstream async to fetch data from the internet and save that file and",
    "start": "2558640",
    "end": "2566160"
  },
  {
    "text": "what i'm doing here is like hey i'm just going to say you're not allowed to use this method and throw a not",
    "start": "2566160",
    "end": "2571760"
  },
  {
    "text": "supported exception which will happen at runtime of course right so you can probably imagine if you have a library inside your organization and you",
    "start": "2571760",
    "end": "2578319"
  },
  {
    "text": "want everybody to use it in the same way but there is behavior inside that library that you have reviewed that you said okay i don't want people to use",
    "start": "2578319",
    "end": "2584560"
  },
  {
    "text": "this then this might be an approach on taking care of that and if everybody then tests their app right and at some",
    "start": "2584560",
    "end": "2590720"
  },
  {
    "text": "point they want to maybe functionally check if everything's okay then you should be able to",
    "start": "2590720",
    "end": "2595920"
  },
  {
    "text": "to cross-check this and limit its capabilities by saying hey you're not allowed to load this",
    "start": "2595920",
    "end": "2602880"
  },
  {
    "text": "right then the other piece if we also need to patch itself and what harmony",
    "start": "2602880",
    "end": "2608640"
  },
  {
    "text": "needs it needs to be instantiated and it needs to be created an instance saying okay this is my processor",
    "start": "2608640",
    "end": "2615839"
  },
  {
    "text": "and then i'm going to say patch all and fix and fix the apply the fixes that we have just identified right this is",
    "start": "2615839",
    "end": "2622960"
  },
  {
    "text": "all still the same we have the type being resolved right",
    "start": "2622960",
    "end": "2628240"
  },
  {
    "text": "so let's move on and let me quickly do one piece in the console before i",
    "start": "2628240",
    "end": "2633599"
  },
  {
    "text": "start it let me just quickly do",
    "start": "2633599",
    "end": "2639040"
  },
  {
    "text": "i want to save this one for after the first run so this is doing exactly the same right",
    "start": "2640960",
    "end": "2646720"
  },
  {
    "text": "it it takes load context it executes it and we're first going to copy a file and",
    "start": "2646720",
    "end": "2652880"
  },
  {
    "text": "we're going to copy it to we're going to copy it to docs news",
    "start": "2652880",
    "end": "2659440"
  },
  {
    "text": "that's first let's try to put it in the root this this is the thing i fixed so",
    "start": "2659440",
    "end": "2666560"
  },
  {
    "text": "am i in the right folder no",
    "start": "2667200",
    "end": "2671040"
  },
  {
    "text": "yeah this is the one console app have i saved this one let me close this",
    "start": "2674480",
    "end": "2681599"
  },
  {
    "text": "for just to be sure",
    "start": "2681599",
    "end": "2684560"
  },
  {
    "text": "and what i i forgot one thing and this is one i also had in the last demo i gave i need to publish the files again",
    "start": "2689280",
    "end": "2695280"
  },
  {
    "text": "because i changed some of the bits right so let me just briefly do that library",
    "start": "2695280",
    "end": "2702480"
  },
  {
    "text": "pub sh run that script",
    "start": "2702839",
    "end": "2708160"
  },
  {
    "text": "we need to see the pub folder appear again here right that's cool",
    "start": "2708160",
    "end": "2713280"
  },
  {
    "text": "so now we should be in a better place console app",
    "start": "2713280",
    "end": "2719359"
  },
  {
    "text": "let me get rid of this one dot net run",
    "start": "2719359",
    "end": "2726680"
  },
  {
    "text": "and what we see over here is i i showed you already this is the call that we're doing right the the copying of the file",
    "start": "2733760",
    "end": "2741440"
  },
  {
    "text": "right so that was it's been written out i should not do this i should just show it we see that it says false you're not",
    "start": "2741440",
    "end": "2746960"
  },
  {
    "text": "allowed to write the file outside of the folder right so that's the patch that we have applied on the library by doing the harmony",
    "start": "2746960",
    "end": "2754079"
  },
  {
    "text": "execution so this worked so and you said like nils are you like",
    "start": "2754079",
    "end": "2759200"
  },
  {
    "text": "faking us are we still allowed to do the file output let's check that again so it should be output",
    "start": "2759200",
    "end": "2767359"
  },
  {
    "text": "and now we can do the same again",
    "start": "2768560",
    "end": "2773480"
  },
  {
    "text": "let's save this yeah just to be sure",
    "start": "2774960",
    "end": "2779680"
  },
  {
    "text": "and if we now look in output we see that the file is created because this is the fault that i'm allowed to write right so we have changed that execution path for",
    "start": "2784640",
    "end": "2791520"
  },
  {
    "text": "that single piece so that worked second the http request that we had the patch for where we're",
    "start": "2791520",
    "end": "2797680"
  },
  {
    "text": "just gonna say you're not allowed to use this anymore all right so let's comment out",
    "start": "2797680",
    "end": "2804079"
  },
  {
    "text": "the first execution let's move into the second one but we're just going to say",
    "start": "2804079",
    "end": "2809359"
  },
  {
    "text": "ndc portal and i want you to write out this file let's see what happens save it close it",
    "start": "2809359",
    "end": "2815200"
  },
  {
    "text": "let's just be paranoid with this and then do dot net run",
    "start": "2815200",
    "end": "2820800"
  },
  {
    "text": "and what we see over here is this line it says our exception management our exception that we've thrown saying like",
    "start": "2824720",
    "end": "2831040"
  },
  {
    "text": "hey you're not allowed to use this method so we have control over over these kinds of things right",
    "start": "2831040",
    "end": "2837440"
  },
  {
    "text": "and when i started out this demo i commented out a couple of lines and maybe some of you have already seen it",
    "start": "2837440",
    "end": "2842559"
  },
  {
    "text": "but those lines are mimicking the exact same functionality i",
    "start": "2842559",
    "end": "2848559"
  },
  {
    "text": "have patched but this is only in the context of the main app so let's do",
    "start": "2848559",
    "end": "2854640"
  },
  {
    "text": "uncomment let's keep this like this so what i'm doing here is i'm doing the getstream async to ndcporto and then i'm",
    "start": "2854640",
    "end": "2861440"
  },
  {
    "text": "doing a file right to that folder or just creating it and copy it",
    "start": "2861440",
    "end": "2866640"
  },
  {
    "text": "right so if i run this",
    "start": "2866640",
    "end": "2871800"
  },
  {
    "text": "again did i save it yes",
    "start": "2874319",
    "end": "2879040"
  },
  {
    "text": "there's nothing that you see over here but it did download",
    "start": "2881359",
    "end": "2886559"
  },
  {
    "text": "the content again but this is of course done in the http client that we haven't patched right this is the same one",
    "start": "2886559",
    "end": "2892160"
  },
  {
    "text": "so in this case i've shown you this is successfully taking an additional framework",
    "start": "2892160",
    "end": "2898240"
  },
  {
    "text": "next to it using it only for that library we have control over stuff that gets loaded by doing the patches we saw",
    "start": "2898240",
    "end": "2904480"
  },
  {
    "text": "before let me go back to the slides and then show you some conceptual drawings",
    "start": "2904480",
    "end": "2910480"
  },
  {
    "text": "and then with 10 minutes left i'm gonna wrap up and then we probably have five minutes left and then we're like five minutes before the queue starts that's",
    "start": "2910480",
    "end": "2916480"
  },
  {
    "text": "good it's all about food as you can see how i look right so um",
    "start": "2916480",
    "end": "2923359"
  },
  {
    "text": "what have we done so you imagine you saw this picture before",
    "start": "2923359",
    "end": "2929200"
  },
  {
    "text": "the only thing i've done with the isolated load contacts that i've taken out the stuff that i don't wanted to use right you should have done a trim i",
    "start": "2929200",
    "end": "2934880"
  },
  {
    "text": "haven't done that because there's one downside harmony relies on a couple of things that still need to be there so",
    "start": "2934880",
    "end": "2940000"
  },
  {
    "text": "hopefully they get rid of it harmony does binary formatter inside of it with some serialization but they're moving it",
    "start": "2940000",
    "end": "2946319"
  },
  {
    "text": "to json so i should be able to get rid of it in the future but as you see in the right side has its",
    "start": "2946319",
    "end": "2951920"
  },
  {
    "text": "own libraries and has the patch ones right so we're able to sandbox it so",
    "start": "2951920",
    "end": "2957359"
  },
  {
    "text": "with that said um i'm just gonna wrap up a bit and conclude",
    "start": "2957359",
    "end": "2963119"
  },
  {
    "text": "as i said before if you look at security problems as a whole and if you talk to me as a security practitioner it's always a good idea to",
    "start": "2963119",
    "end": "2969440"
  },
  {
    "text": "integrate security inside your development life cycle right make sure you update your libraries you do proper",
    "start": "2969440",
    "end": "2976400"
  },
  {
    "text": "input validation you use libraries that's how they were intended to use i would also encourage you to look into",
    "start": "2976400",
    "end": "2982000"
  },
  {
    "text": "hey what do i expect from this library so i've also done a talk on third-party language where i show a tool that you",
    "start": "2982000",
    "end": "2988400"
  },
  {
    "text": "can use to dump what's inside the library pretty easily and you can easily skim over some of the calls it's doing",
    "start": "2988400",
    "end": "2994800"
  },
  {
    "text": "and that's what i use myself if i started reviewing an sdk i would first do that dump myself and look if there are some juicy api calls that i know are",
    "start": "2994800",
    "end": "3001440"
  },
  {
    "text": "pretty like vulnerable or i have possibilities so be aware of what's inside right know",
    "start": "3001440",
    "end": "3008000"
  },
  {
    "text": "what libraries are used and know what's inside integrate",
    "start": "3008000",
    "end": "3013280"
  },
  {
    "text": "those those things and also what you expect from it right and security of course means static analysis maybe some",
    "start": "3013280",
    "end": "3019280"
  },
  {
    "text": "pen testing of course you start out with a trap model like what are the risks that i'm facing because you can throw",
    "start": "3019280",
    "end": "3024640"
  },
  {
    "text": "technology against security problems but if it's too complex then that doesn't help so it's it needs to be all of that",
    "start": "3024640",
    "end": "3031520"
  },
  {
    "text": "if i look at the concept that i created and this sandbox concept i'm honestly gonna say to you like would",
    "start": "3031520",
    "end": "3037839"
  },
  {
    "text": "a developer do it like this probably not because it's too complex like all the steps you need to take in order",
    "start": "3037839",
    "end": "3043280"
  },
  {
    "text": "to get this working what i've done would be cool if i can do a easier developer",
    "start": "3043280",
    "end": "3048319"
  },
  {
    "text": "generation like integration by a source generator for example i wanted to have reliance on a package",
    "start": "3048319",
    "end": "3054800"
  },
  {
    "text": "that i create but i only wanted to generate source and the package should go away that's one of my goals",
    "start": "3054800",
    "end": "3060079"
  },
  {
    "text": "and have some good guidance on how to use it and also i don't want people maybe to write patches it would be cool",
    "start": "3060079",
    "end": "3065280"
  },
  {
    "text": "if you've got some kind of a builder pattern like if you would use this concept in let's say asp.net core and if",
    "start": "3065280",
    "end": "3070800"
  },
  {
    "text": "you if you start out the whole thing and you do your builder it would be cool if you can just like do a policy say like",
    "start": "3070800",
    "end": "3076720"
  },
  {
    "text": "hey it can only access these files because right now i've only patched that single call because that's the one",
    "start": "3076720",
    "end": "3082400"
  },
  {
    "text": "that's being used by my library i know that but it needs to be much broader and that needs to be done with a lot of",
    "start": "3082400",
    "end": "3088240"
  },
  {
    "text": "caution looking at the framework and see like hey this does file operations this one does it as well",
    "start": "3088240",
    "end": "3093359"
  },
  {
    "text": "but it will be cool if we can do that and then have basic patches or policies that you can apply on this",
    "start": "3093359",
    "end": "3099119"
  },
  {
    "text": "so with that said the getter people i mentioned where",
    "start": "3099119",
    "end": "3104400"
  },
  {
    "text": "everything is in including all the build scripts are in this repo in nfc portal on my",
    "start": "3104400",
    "end": "3110480"
  },
  {
    "text": "github if you want to reach out to me there's my email i'm on twitter i have a blog post where you can see also videos",
    "start": "3110480",
    "end": "3116800"
  },
  {
    "text": "of recordings of other talks i've done and i'm going to say to you obrigado thank you for your time enjoy the rest",
    "start": "3116800",
    "end": "3122559"
  },
  {
    "text": "of the conference the rest of the afternoon and i'm going to be around so if you have questions let me know otherwise thank you",
    "start": "3122559",
    "end": "3128700"
  },
  {
    "text": "[Applause]",
    "start": "3128700",
    "end": "3131980"
  },
  {
    "text": "are there any questions or do you want to go to lunch i don't mind either way",
    "start": "3137200",
    "end": "3142480"
  },
  {
    "text": "we also can do lunch and questions at the same time that might be a good alternative",
    "start": "3142480",
    "end": "3148440"
  },
  {
    "text": "technically this is some it's it's it's wrapping right because that additional layer of abstraction it would be cool if that shell is just",
    "start": "3158960",
    "end": "3165119"
  },
  {
    "text": "available for you to use then and don't need to worry about all the additional steps right i think that that should be",
    "start": "3165119",
    "end": "3170480"
  },
  {
    "text": "the the most positive outcome for me at least but",
    "start": "3170480",
    "end": "3176359"
  },
  {
    "text": "that will be a one layer of defense right for sure",
    "start": "3188400",
    "end": "3193558"
  },
  {
    "text": "it makes it more complex yes and i know there's a lot of security products that make it even more complex",
    "start": "3199680",
    "end": "3205680"
  },
  {
    "text": "and then it will work the opposite way for sure right people will try to circumvent stuff in a different way yeah",
    "start": "3205680",
    "end": "3212160"
  },
  {
    "text": "but the concept and that's that's the thing that i'm most interested in cool thank you thank you everyone",
    "start": "3212160",
    "end": "3220359"
  },
  {
    "text": "you",
    "start": "3225359",
    "end": "3227440"
  }
]