[
  {
    "text": "does that mean we're supposed to start okay okay hi",
    "start": "12519",
    "end": "19400"
  },
  {
    "text": "welcome I know you're probably a little bit too excited right now to say anything but it's will be a casual talk",
    "start": "20480",
    "end": "27920"
  },
  {
    "text": "hi hello ah thank you better so who has used identity",
    "start": "27920",
    "end": "35559"
  },
  {
    "text": "server cool so who who's using identi of",
    "start": "35559",
    "end": "42200"
  },
  {
    "text": "three almost no one and you're all using identi of four already so who's using four who's using",
    "start": "42200",
    "end": "50960"
  },
  {
    "text": "three and where are the all the other hands that just said they using it maybe two maybe",
    "start": "50960",
    "end": "56160"
  },
  {
    "text": "two really okay okay good so this talk is mostly",
    "start": "56160",
    "end": "64640"
  },
  {
    "text": "about the Delta between Iden of three and Iden of four um the the things that",
    "start": "64640",
    "end": "69840"
  },
  {
    "text": "have changed if you never used it before you will still get something out of it because you you see how we going to set",
    "start": "69840",
    "end": "76159"
  },
  {
    "text": "it up and all that um at the same time I think it's also a story about how",
    "start": "76159",
    "end": "82799"
  },
  {
    "text": "asp.net core has changed in comparison to Katana and asp.net that allowed us to",
    "start": "82799",
    "end": "89200"
  },
  {
    "text": "Leverage features that are now in the platform which didn't have existed before okay so it's a bit of Lessons",
    "start": "89200",
    "end": "96399"
  },
  {
    "text": "Learned and and what did we do and how maybe even how how did we fail",
    "start": "96399",
    "end": "102360"
  },
  {
    "text": "so um basically like I think one and a half years ago that the Microsoft the",
    "start": "102360",
    "end": "107600"
  },
  {
    "text": "Microsoft HP net team approach us and said you know uh we're going to remove a couple of our components from the system",
    "start": "107600",
    "end": "113520"
  },
  {
    "text": "especially the the ones that produce tokens we're going to focus on the consuming token side of things and they",
    "start": "113520",
    "end": "119159"
  },
  {
    "text": "said like are are you guys willing to fill the Gap and and and update identity server uh in in the same Cadence kind of",
    "start": "119159",
    "end": "126960"
  },
  {
    "text": "as we update AET core so people have something to build their token based",
    "start": "126960",
    "end": "132280"
  },
  {
    "text": "Solutions and you know we were young needed the money I guess there was no money but we were young said yes we're",
    "start": "132280",
    "end": "139640"
  },
  {
    "text": "going to do that and um you know we tried to keep up with the changes that happened in asp.net Corp by the time and",
    "start": "139640",
    "end": "147400"
  },
  {
    "text": "you know build stuff and then they changed some something and we realized oh that's something that's breaking us",
    "start": "147400",
    "end": "152920"
  },
  {
    "text": "build stuff again and you know um uh a couple of months ago it was released I",
    "start": "152920",
    "end": "159560"
  },
  {
    "text": "mean aut core and Iden was released end of December so we we Tred to stay as",
    "start": "159560",
    "end": "164720"
  },
  {
    "text": "close as possible but it's kind of hard if somebody changes the platform all the time you're you're running on to to",
    "start": "164720",
    "end": "170280"
  },
  {
    "text": "write some meaningful software on that so basically yeah this is kind of like uh what has changed between three and",
    "start": "170280",
    "end": "175599"
  },
  {
    "text": "four where where did we end up and we ended up old now right We Were Young before and after all the all all the",
    "start": "175599",
    "end": "182280"
  },
  {
    "text": "gray hair I I didn't have that one year ago so you know so um maybe the first",
    "start": "182280",
    "end": "187360"
  },
  {
    "text": "thing that's new is we have a website yay um that is kind of like the starting",
    "start": "187360",
    "end": "193239"
  },
  {
    "text": "point for everything you want to know about Iden 4 it you know gives you like a high level overview blah blah blah but",
    "start": "193239",
    "end": "198680"
  },
  {
    "text": "really the important things are you can go to the source code from here yeah we have documentation uh you can go from",
    "start": "198680",
    "end": "205680"
  },
  {
    "text": "here we do we do training um on on Ain at core security in general and Iden",
    "start": "205680",
    "end": "211000"
  },
  {
    "text": "server in in particular we just did that on Monday Tuesday so you can see the schedule when this is happening here we",
    "start": "211000",
    "end": "216920"
  },
  {
    "text": "do Consulting we have production support which is New by the way something we worked with um with Partners on that if",
    "start": "216920",
    "end": "223120"
  },
  {
    "text": "you want to put that in in production and you know you can sleep better if you know there's an SLA around that then",
    "start": "223120",
    "end": "228879"
  },
  {
    "text": "that is also possible now um maybe jump to the source code first so that's uh on",
    "start": "228879",
    "end": "236560"
  },
  {
    "text": "GitHub it's in our organization um it's called aen",
    "start": "236560",
    "end": "241760"
  },
  {
    "text": "4 um it's called all the way down it's um all the way down it's a net",
    "start": "241760",
    "end": "249120"
  },
  {
    "text": "Foundation project have you heard about the net Foundation it's basically well a foundation for net based project I guess",
    "start": "249120",
    "end": "256160"
  },
  {
    "text": "that makes sense yeah um and also since a couple of weeks you can um certify",
    "start": "256160",
    "end": "263240"
  },
  {
    "text": "your implementation of open ID so in other words um you can go through a testing process and they make sure that",
    "start": "263240",
    "end": "269199"
  },
  {
    "text": "you implemented the protocol in the right way so you are compatible with other implementations of other vendors",
    "start": "269199",
    "end": "274800"
  },
  {
    "text": "and that also means for you guys that if you use identity server it's not not you're locking into a proprietary",
    "start": "274800",
    "end": "281759"
  },
  {
    "text": "implementation of the protocol you you know this proves basically that we just behave as any other certified",
    "start": "281759",
    "end": "288840"
  },
  {
    "text": "implementation of openconnect okay so I want to show what",
    "start": "288840",
    "end": "293880"
  },
  {
    "text": "we have uh the SCE code sure so to uh sort of model the scenario I that that",
    "start": "293880",
    "end": "300759"
  },
  {
    "text": "you know people moving from Identity server 3 to four is you know people may have put out identity server 3 a year or",
    "start": "300759",
    "end": "306360"
  },
  {
    "text": "two ago you might be using it you might have older uh MVC Katana applications using it but we found you know people",
    "start": "306360",
    "end": "312960"
  },
  {
    "text": "are now starting to build more and more uh asp.net core applications uh and so of course they want to secure those but",
    "start": "312960",
    "end": "320080"
  },
  {
    "text": "you have identi server three in place so what we have is a little bit of which is totally fine by the way yeah absolutely",
    "start": "320080",
    "end": "325639"
  },
  {
    "text": "uh so we have a little bit of a You Know sample here um uh you demonstrating that that uh setup uh so",
    "start": "325639",
    "end": "332759"
  },
  {
    "text": "what we have here is an identity server 3 host uh pretty Bare Bones just to show you the you know the the basic moving",
    "start": "332759",
    "end": "339280"
  },
  {
    "text": "Parts uh we have a uh web API that we're going to be invoking uh and then we have",
    "start": "339280",
    "end": "345039"
  },
  {
    "text": "a couple of applications clients using that API we have a console client that's sort of simulating a a scenario where",
    "start": "345039",
    "end": "351639"
  },
  {
    "text": "you're going to have a server to server communication there's no human involved you just need to to call an API but do it securely and then we also have an MVC",
    "start": "351639",
    "end": "358880"
  },
  {
    "text": "application where a user can log in and then uh you know log into the MVC",
    "start": "358880",
    "end": "364240"
  },
  {
    "text": "application get an access token and then on behalf of the user invoke the the web API so I guess we can just run these",
    "start": "364240",
    "end": "370560"
  },
  {
    "text": "here real quick to illustrate them so here's uh just my web API we're",
    "start": "370560",
    "end": "376440"
  },
  {
    "text": "just hosting them in console applications uh the web API is pretty simple just a straightup controller you",
    "start": "376440",
    "end": "382599"
  },
  {
    "text": "know we're going to Echo back the claims uh that come in uh from the token uh the",
    "start": "382599",
    "end": "387680"
  },
  {
    "text": "these are all by the way aspet core so to protect your web API uh what we're",
    "start": "387680",
    "end": "393319"
  },
  {
    "text": "using is our um authentication middleware uh this basically wraps",
    "start": "393319",
    "end": "398840"
  },
  {
    "text": "Microsoft's uh Json web token middleware but we add a few other features on top of it like uh reference token support so",
    "start": "398840",
    "end": "406080"
  },
  {
    "text": "this is our web API console application is pretty straightforward this is using uh you know what would be known as a",
    "start": "406080",
    "end": "412240"
  },
  {
    "text": "client credential flow so Maine just comes up we're going to go get our token on behalf of our you know server to",
    "start": "412240",
    "end": "418440"
  },
  {
    "text": "server communication uh and then invoke our our API with it so I guess we can actually just run this one first to see that it's",
    "start": "418440",
    "end": "426960"
  },
  {
    "text": "working and really all this did oh I'm not actually running identity server okay let's do that first so here we have",
    "start": "427000",
    "end": "433800"
  },
  {
    "text": "our identity server three actually while I'm here I guess I can poke through the config so we have a registrations for",
    "start": "433800",
    "end": "440039"
  },
  {
    "text": "both our console application and our MVC application and then down below we have",
    "start": "440039",
    "end": "445160"
  },
  {
    "text": "uh the user data that we're going to be uh exposing to our MVC when the user logs in the app may want the name and",
    "start": "445160",
    "end": "452199"
  },
  {
    "text": "the email uh and then of course this models our API so I think if I can run this first",
    "start": "452199",
    "end": "459479"
  },
  {
    "text": "that's identity server three now running good and now I run my console",
    "start": "459479",
    "end": "465759"
  },
  {
    "text": "application okay so basically the console app launches goes to Identity server first gets a token and calls the",
    "start": "465759",
    "end": "471919"
  },
  {
    "text": "web API great that all works and then our MVC application oh by",
    "start": "471919",
    "end": "478159"
  },
  {
    "text": "the way if you have any questions in in between just you know give us a sign so the MVC application now wants to",
    "start": "478159",
    "end": "486199"
  },
  {
    "text": "to log a user in so we'll go to our secure endpoint this is redirecting us then first to Identity server the user",
    "start": "486199",
    "end": "492520"
  },
  {
    "text": "is going to log in there you know get their single sign in or if you want to do your Google",
    "start": "492520",
    "end": "497720"
  },
  {
    "text": "logins we can do that here's our consent screen and then we're back into the MVC",
    "start": "497720",
    "end": "504199"
  },
  {
    "text": "application all right we've now authenticated we know the user their name their unique ID",
    "start": "504199",
    "end": "509960"
  },
  {
    "text": "uh and then we can invoke our web API again on behalf of the user so the web API knows who who is invoking it so",
    "start": "509960",
    "end": "517479"
  },
  {
    "text": "that's the setup we uh you know those are some of the common use case scenarios um so building new",
    "start": "517479",
    "end": "524240"
  },
  {
    "text": "applications this pretty much models that so what we're going to do next is take the identity server 3 as our open",
    "start": "524240",
    "end": "531399"
  },
  {
    "text": "ID connect provider and just move the configuration over to identi server 4 and we can see what's different so I",
    "start": "531399",
    "end": "538200"
  },
  {
    "text": "guess the the the the most fundamental thing that is different is the hosting yeah so in uh in in I did a free was",
    "start": "538200",
    "end": "545360"
  },
  {
    "text": "hosted on Katana right and Katana was this uh add-on thing to asp.net which",
    "start": "545360",
    "end": "550640"
  },
  {
    "text": "had either uh an IIs based hosting model or an uh uh self-hosting model yeah for",
    "start": "550640",
    "end": "556640"
  },
  {
    "text": "n services or you know console applications like like Brock is running here um the fundamental difference in",
    "start": "556640",
    "end": "563839"
  },
  {
    "text": "AET core is that you're always writing a console application yeah that the notion of a web application as we know it from",
    "start": "563839",
    "end": "569720"
  },
  {
    "text": "Visual Studio doesn't exist anymore right um you want to write a web application you basically write a console application which happens to",
    "start": "569720",
    "end": "576079"
  },
  {
    "text": "have a web server okay so let's have a quick look at at the old hosting",
    "start": "576079",
    "end": "581399"
  },
  {
    "text": "code yeah so the old hosting code basically you know you used this thing called web app um you passed in a base",
    "start": "581399",
    "end": "588440"
  },
  {
    "text": "URL you passed in um a type name for for a class that holds the configuration of",
    "start": "588440",
    "end": "594959"
  },
  {
    "text": "that HP Pipeline and then you called uh start on it okay and that was just an",
    "start": "594959",
    "end": "601079"
  },
  {
    "text": "option in Katana if you wanted to do I that you know use the IIs you know web config and the way it works in asp.net",
    "start": "601079",
    "end": "608959"
  },
  {
    "text": "so now switching to oh oh yeah and maybe the other hosting concern that",
    "start": "608959",
    "end": "615440"
  },
  {
    "text": "that is uh that exists here is logging right so logging is a hosting concern uh we had because in Katana or asp.net",
    "start": "615440",
    "end": "623279"
  },
  {
    "text": "itself there was no buil-in locking infrastructure right I mean you all know that if you're building applications you",
    "start": "623279",
    "end": "628360"
  },
  {
    "text": "come up with your own loging mechanism somehow right and there are Frameworks for that and so on and we",
    "start": "628360",
    "end": "634360"
  },
  {
    "text": "used something called libog anyone ever used lip block yeah a couple of people Damian",
    "start": "634360",
    "end": "640920"
  },
  {
    "text": "hickey good guy um and the idea was that basically you as a library developer you",
    "start": "640920",
    "end": "648480"
  },
  {
    "text": "don't want to assume a certain logging framework right uh we just want to log",
    "start": "648480",
    "end": "653639"
  },
  {
    "text": "stuff out but we want to give you the freedom of using your favorite logging framework yeah and that that's kind of a",
    "start": "653639",
    "end": "658800"
  },
  {
    "text": "not so easy thing to to solve and liplock had this approach that you basically uh had an abstraction of a",
    "start": "658800",
    "end": "665639"
  },
  {
    "text": "logger okay because they need more abstractions right um and we were just",
    "start": "665639",
    "end": "671200"
  },
  {
    "text": "logging out and then liplock was picking up whatever at a hosting level the which logging framework was configured and",
    "start": "671200",
    "end": "677880"
  },
  {
    "text": "there was a bit of magic it was poking around in the loaded assemblies and used reflection and all that",
    "start": "677880",
    "end": "683600"
  },
  {
    "text": "stuff so how does that look like now in 8ut core so a minute core is a as I said a",
    "start": "683600",
    "end": "691519"
  },
  {
    "text": "self-hosting model only so your application will always be self-hosted it will always be a console application",
    "start": "691519",
    "end": "699120"
  },
  {
    "text": "and then you can either run it self-hosted like we are doing here in in um in a console window or you run that",
    "start": "699120",
    "end": "705440"
  },
  {
    "text": "same code in an NT service for example or there's a special integration piece",
    "start": "705440",
    "end": "710839"
  },
  {
    "text": "if you want to run it from IIs right but IIs is not special anymore because HP",
    "start": "710839",
    "end": "716800"
  },
  {
    "text": "core is crossplatform so that that the role of IIs could also be taken by Apache or enginex or whatever web server",
    "start": "716800",
    "end": "723959"
  },
  {
    "text": "you want to put in front of your application and that is pretty much the same model as being used by node nodejs",
    "start": "723959",
    "end": "729240"
  },
  {
    "text": "for example these days um you know same same intent different keystrokes I guess",
    "start": "729240",
    "end": "735440"
  },
  {
    "text": "uh you're building a web host Builder you you you tell it where to run which server to use we were using castal here",
    "start": "735440",
    "end": "741720"
  },
  {
    "text": "which is Microsoft's crossplatform built-in web server um we set the working directory we say if there is I",
    "start": "741720",
    "end": "749600"
  },
  {
    "text": "use I integration um again same idea there's a",
    "start": "749600",
    "end": "755480"
  },
  {
    "text": "class called startup um that has the configuration and then we say build and and then run on that and that's a",
    "start": "755480",
    "end": "761560"
  },
  {
    "text": "bloging call and this this will bring up a web server and our application will start taking requests so now how how did",
    "start": "761560",
    "end": "767720"
  },
  {
    "text": "startup look like in free so in free they um in Katana they",
    "start": "767720",
    "end": "773639"
  },
  {
    "text": "have this thing called the app builder the I app builder so you have a class called you know you you you can name it",
    "start": "773639",
    "end": "778880"
  },
  {
    "text": "whatever you want but it must have a method called configuration and it passes in an i app builder and this is",
    "start": "778880",
    "end": "785839"
  },
  {
    "text": "basically the thing that configures your pipeline okay so and then you can wire",
    "start": "785839",
    "end": "792320"
  },
  {
    "text": "up what is called middleware in that Pipeline and one of the middle Wares in that case the only one um is the",
    "start": "792320",
    "end": "798920"
  },
  {
    "text": "identity server middleware so that's a piece of code our code that runs in the HP Pipeline and takes takes um you know",
    "start": "798920",
    "end": "806760"
  },
  {
    "text": "processes the requests going to identity server uh in a very common pattern in",
    "start": "806760",
    "end": "813160"
  },
  {
    "text": "Katana was that you basically pass in uh an options class into the middleware",
    "start": "813160",
    "end": "820279"
  },
  {
    "text": "which configures the whole middleware okay so that's the thing called the identi server options here and that was",
    "start": "820279",
    "end": "826199"
  },
  {
    "text": "basically our only if you like top level configuration object and from that all",
    "start": "826199",
    "end": "832079"
  },
  {
    "text": "of the configuration hang off yeah so for example you know your site name which signing certificate do you want to",
    "start": "832079",
    "end": "837800"
  },
  {
    "text": "use um uh do you require SSL you know all kinds of more options we there there are tons",
    "start": "837800",
    "end": "844240"
  },
  {
    "text": "of options yeah um the point is that and that because we will see that that'll",
    "start": "844240",
    "end": "849720"
  },
  {
    "text": "change all of the configuration in in Katana happened at the middleware layer and this is changing in in AET core the",
    "start": "849720",
    "end": "857680"
  },
  {
    "text": "other thing which is interesting here is is this class called the Iden of service Factory and the factory is our own di",
    "start": "857680",
    "end": "866560"
  },
  {
    "text": "system now you might wonder why why did you guys have an own di system yeah",
    "start": "866560",
    "end": "872639"
  },
  {
    "text": "isn't that a stupid thing the problem was there was nothing built in in Katana right asp.net before or Katana didn't",
    "start": "872639",
    "end": "879680"
  },
  {
    "text": "have a built-in dependency injection container okay so we had basically we",
    "start": "879680",
    "end": "885560"
  },
  {
    "text": "took the one we likeed the best by the time which was autofac and just you know",
    "start": "885560",
    "end": "891000"
  },
  {
    "text": "wrapped that up in our internals kind of and the factory was our abstraction of",
    "start": "891000",
    "end": "897320"
  },
  {
    "text": "that di container so basically on the factory you had like extension methods and you said like okay you know uh",
    "start": "897320",
    "end": "903199"
  },
  {
    "text": "register something that gives us clients and register something that gives us Scopes and users and there are many many",
    "start": "903199",
    "end": "908680"
  },
  {
    "text": "more uh extension methods and oh yeah you can see there are all kinds of things uh basically all the",
    "start": "908680",
    "end": "914399"
  },
  {
    "text": "extensibility points could be pluged into this Factory class and again under the covers this is nothing else as",
    "start": "914399",
    "end": "921120"
  },
  {
    "text": "assembling an autofac container at startup time okay so let let's have a",
    "start": "921120",
    "end": "927399"
  },
  {
    "text": "look how that changed in four",
    "start": "927399",
    "end": "930600"
  },
  {
    "text": "well we don't have anything yet oh right so we're going to we're going to code this up um but yeah so the the big",
    "start": "933440",
    "end": "940560"
  },
  {
    "text": "change here with asp.net core is that dependen the injections built in so what that means is that our Factory object",
    "start": "940560",
    "end": "947800"
  },
  {
    "text": "that we used to have in three goes away right we actually removed a lot of code from Identity server three when porting",
    "start": "947800",
    "end": "953360"
  },
  {
    "text": "over to four because we could rely upon the the platform Services of ASP net core so the logging is also one of them",
    "start": "953360",
    "end": "960600"
  },
  {
    "text": "that went away uh dependency injection that was another big one too so",
    "start": "960600",
    "end": "965680"
  },
  {
    "text": "basically the first thing we can do here is we need to put um uh well actually to",
    "start": "965680",
    "end": "971160"
  },
  {
    "text": "to to talk to the new method here so there's a new method called configure services and this gives you basically",
    "start": "971160",
    "end": "977160"
  },
  {
    "text": "the container that you're going to register um any of your services in and so this is where then you register",
    "start": "977160",
    "end": "983399"
  },
  {
    "text": "things for Di so uh as is the pattern what we have is an add identity server",
    "start": "983399",
    "end": "989079"
  },
  {
    "text": "extension method off of the service collection and it is to uh this one line of code that puts in all the necessary",
    "start": "989079",
    "end": "995800"
  },
  {
    "text": "services that that we need by default so in the past then when you needed to override a feature or you know extend",
    "start": "995800",
    "end": "1003360"
  },
  {
    "text": "the functionality you had to register your own implementation on our Factory now all you have to do is take your",
    "start": "1003360",
    "end": "1009800"
  },
  {
    "text": "implementation of the I client store or whatever the extensibility point is and just stick it into di here as well okay",
    "start": "1009800",
    "end": "1017720"
  },
  {
    "text": "we do have some extension methods off of this for adding you know various things so we have some convenience functions uh",
    "start": "1017720",
    "end": "1024720"
  },
  {
    "text": "to easily you know wire up the right thing but again it's just putting things into di so you can just configure things",
    "start": "1024720",
    "end": "1031319"
  },
  {
    "text": "yourself if you want or use these extension methods and the middleware",
    "start": "1031319",
    "end": "1037319"
  },
  {
    "text": "itself um you know so yeah just to conclude that they split up this startup",
    "start": "1037319",
    "end": "1043438"
  },
  {
    "text": "class in two methods as Brock said one is for just for for configuring the DI system and one is for configuring the",
    "start": "1043439",
    "end": "1048679"
  },
  {
    "text": "pipeline okay so the typical pattern in a core is that that sufficiently complex middleware has two parts one is the",
    "start": "1048679",
    "end": "1055360"
  },
  {
    "text": "upper part where it adds the DI services and the lower part where it inserts itself into the pipeline MVC for example",
    "start": "1055360",
    "end": "1061919"
  },
  {
    "text": "uses the same the same pattern okay so and now it turns out since all of the configuration is happening at the DI",
    "start": "1061919",
    "end": "1068280"
  },
  {
    "text": "level there's actually no not a single config option anymore on The Middle Way",
    "start": "1068280",
    "end": "1073559"
  },
  {
    "text": "itself Okay so we've seen uh in free we had to load an X 59 certificate from",
    "start": "1073559",
    "end": "1079559"
  },
  {
    "text": "somewhere and stick that into our options class and what we internally did is really we we put the options class",
    "start": "1079559",
    "end": "1087280"
  },
  {
    "text": "into the DI system right so at any point in time when we needed to to load the certificate for signing a token we went",
    "start": "1087280",
    "end": "1094400"
  },
  {
    "text": "to the DI system got the options class went to the signing certificate property",
    "start": "1094400",
    "end": "1099880"
  },
  {
    "text": "and got this thing okay so how would that conceptually look like in four now well we're going to put that into di off",
    "start": "1099880",
    "end": "1106280"
  },
  {
    "text": "of our um uh add identity server we have a helper here for add uh signing",
    "start": "1106280",
    "end": "1113400"
  },
  {
    "text": "credential that would be one way okay so again yeah this has several overloads uh",
    "start": "1113400",
    "end": "1119559"
  },
  {
    "text": "depending on where your key material is coming from so you can just uh you know find your own RSA security key um or",
    "start": "1119559",
    "end": "1126880"
  },
  {
    "text": "your own x509 certificate for example and then I think we have even another helper here that even allows us to um",
    "start": "1126880",
    "end": "1133600"
  },
  {
    "text": "fetch the uh certificate in the same way that we were actually doing uh in identity Serv 3 so over here in Iden",
    "start": "1133600",
    "end": "1139840"
  },
  {
    "text": "server 3 uh we had a helper to look that up from the local machine certificate store uh and that pretty much is just",
    "start": "1139840",
    "end": "1147440"
  },
  {
    "text": "wrapped up into this other overload and technically again this implements an i",
    "start": "1147440",
    "end": "1152640"
  },
  {
    "text": "signing credential service in the pipeline in the DI right which which returns you the the certificate you you",
    "start": "1152640",
    "end": "1158679"
  },
  {
    "text": "stick in right um but that's a very common pattern you'll see in a minute core in general there's a there's",
    "start": "1158679",
    "end": "1164200"
  },
  {
    "text": "another method here called add temporary signing credential so we had a lot of we got some feedback saying you know all",
    "start": "1164200",
    "end": "1170760"
  },
  {
    "text": "this certificate stuff is too hard for me can you can't can't you just create a key for me and and I don't have to think",
    "start": "1170760",
    "end": "1175960"
  },
  {
    "text": "about how that works that's this guy okay so when you're saying add temporary signing credential it will create a",
    "start": "1175960",
    "end": "1183720"
  },
  {
    "text": "random key pair at startup time for you that you can use to play around you know you don't you don't have to wait for the",
    "start": "1183720",
    "end": "1189640"
  },
  {
    "text": "admin to hand you the magic you know floppy disc with the certificate on it and um but this is only for for",
    "start": "1189640",
    "end": "1196640"
  },
  {
    "text": "development time really so never ever ever use that in production you will not find that a pleasant experience yeah um",
    "start": "1196640",
    "end": "1203240"
  },
  {
    "text": "okay what else do we have all right so the prior one we had to configure than uh well the other configuration here and",
    "start": "1203240",
    "end": "1209840"
  },
  {
    "text": "again as uh traditional with identity server we had to teach identity server about three things one were your uh",
    "start": "1209840",
    "end": "1216679"
  },
  {
    "text": "clients those are the applications one was the users the users that needed to get authenticated and then the other",
    "start": "1216679",
    "end": "1222559"
  },
  {
    "text": "thing were the Scopes which were the resources that are being protected by identity server",
    "start": "1222559",
    "end": "1228880"
  },
  {
    "text": "so let's start with the Scopes yeah yeah so one of the big changes we made pretty",
    "start": "1228880",
    "end": "1234320"
  },
  {
    "text": "pretty late in the game was uh so so we we've been for the last two years or so",
    "start": "1234320",
    "end": "1240240"
  },
  {
    "text": "we've been teaching opad connect and we've been Consulting people and",
    "start": "1240240",
    "end": "1246080"
  },
  {
    "text": "and people immediately get what a client is people immediately get what a user is but the scope Concept in opconnect is a",
    "start": "1246080",
    "end": "1253280"
  },
  {
    "text": "bit confusing so we found ourselves over and over saying think of a scope as a",
    "start": "1253280",
    "end": "1259840"
  },
  {
    "text": "resource and there are two types of resources identity resources like first name last name and there are API",
    "start": "1259840",
    "end": "1265960"
  },
  {
    "text": "resources and then at some point they're like huh why don't we just call the class resource and we don't have to",
    "start": "1265960",
    "end": "1271679"
  },
  {
    "text": "explain it over and over again and that's what we did okay so we renamed scope to Resource scope is the term that",
    "start": "1271679",
    "end": "1277200"
  },
  {
    "text": "is used in the specification and we just try to be true to the document but it turns out that it it's just in the way",
    "start": "1277200",
    "end": "1284760"
  },
  {
    "text": "when you're modeling your architecture so now we have two types of resources in our system one is called uh an API",
    "start": "1284760",
    "end": "1290679"
  },
  {
    "text": "resource which is an API you want to protect right and one is called an identity resource which is you know things like first name last name yeah",
    "start": "1290679",
    "end": "1297400"
  },
  {
    "text": "and we're going to start with an API resource first now the other thing that hasn't",
    "start": "1297400",
    "end": "1302960"
  },
  {
    "text": "changed is you can still load your configuration data from wherever you want yeah so if you want to use a",
    "start": "1302960",
    "end": "1309520"
  },
  {
    "text": "database we have an Entity framework you know service for that if you want to use a config file then you load from a",
    "start": "1309520",
    "end": "1315799"
  },
  {
    "text": "config file um we have we have a couple of customers who want to use it in code and just use continuous you know",
    "start": "1315799",
    "end": "1321480"
  },
  {
    "text": "integration to update their configuration or something in between yeah and again technically speaking",
    "start": "1321480",
    "end": "1327640"
  },
  {
    "text": "there's an i resource uh store and you implement your favorite implementation",
    "start": "1327640",
    "end": "1334080"
  },
  {
    "text": "of that in the DI container and that's what what we're going to use yeah we have we have we have a built-in one which is useful for testing and for",
    "start": "1334080",
    "end": "1341039"
  },
  {
    "text": "development time and for doing demos like this which is the inmemory resource API resource",
    "start": "1341039",
    "end": "1349960"
  },
  {
    "text": "right okay so you just Define the apis you want to protect you pass them into our",
    "start": "1351080",
    "end": "1359120"
  },
  {
    "text": "configure method and from that point on uh we can now reason about these apis",
    "start": "1359120",
    "end": "1364320"
  },
  {
    "text": "when somebody asks for tokens about um for them and and so if you've been using these protocols and you're familiar with",
    "start": "1364320",
    "end": "1370559"
  },
  {
    "text": "requesting Scopes that's exactly what this is creating right this API resource models your API as a whole and these",
    "start": "1370559",
    "end": "1377240"
  },
  {
    "text": "Constructor param are indicating that's going to be the name of your API resource and the scope that is going to",
    "start": "1377240",
    "end": "1384279"
  },
  {
    "text": "be requested by a client application to access that resource and and and this line of code actually models the most",
    "start": "1384279",
    "end": "1390559"
  },
  {
    "text": "common scenario you have a logical API which you want to assign to a scope name",
    "start": "1390559",
    "end": "1396880"
  },
  {
    "text": "okay this API might might consist of multiple physical endpoints yeah but you want to give it a name that you know",
    "start": "1396880",
    "end": "1403720"
  },
  {
    "text": "clients can ask for um what this model also enables is is a much much easier modeling of more complex scenarios yeah",
    "start": "1403720",
    "end": "1410440"
  },
  {
    "text": "so just quickly create another resource that has multiple scopes for example yeah that was a bit you know sometimes a",
    "start": "1410440",
    "end": "1417039"
  },
  {
    "text": "bit complicated so create a new a more complicated API right maybe the the",
    "start": "1417039",
    "end": "1423440"
  },
  {
    "text": "calendar API whatever or complicated API right um and then you want to have",
    "start": "1423440",
    "end": "1429480"
  },
  {
    "text": "multiple Scopes that refer to the same API but maybe you want to have like a a full access scope and a readon scope for",
    "start": "1429480",
    "end": "1437120"
  },
  {
    "text": "example yeah now and then you can do that [Music]",
    "start": "1437120",
    "end": "1443039"
  },
  {
    "text": "um you can configure when somebody asks for a token for this scope which claims",
    "start": "1443039",
    "end": "1449600"
  },
  {
    "text": "should go into that token by setting the the the um user claims I think it's",
    "start": "1449600",
    "end": "1457600"
  },
  {
    "text": "called collection and the idea is now that when",
    "start": "1457600",
    "end": "1465039"
  },
  {
    "text": "you know regardless of of which scope you're asking for the to will always have name and email but you can also now configure if he's asking for full access",
    "start": "1465039",
    "end": "1472320"
  },
  {
    "text": "in addition to that you know add another claim like one that would would only be",
    "start": "1472320",
    "end": "1477399"
  },
  {
    "text": "able um included if you know um the the client is asking for this for this additional scope okay so yeah this model",
    "start": "1477399",
    "end": "1485399"
  },
  {
    "text": "we think simplifies how you can model apis in in in identity server okay so it",
    "start": "1485399",
    "end": "1491799"
  },
  {
    "text": "just comment it out we don't need it really okay cool so now now we have a",
    "start": "1491799",
    "end": "1498679"
  },
  {
    "text": "resource the next thing we need is a client that can use that",
    "start": "1498679",
    "end": "1504398"
  },
  {
    "text": "resource this configuration didn't change as much so we might be able to",
    "start": "1504480",
    "end": "1509600"
  },
  {
    "text": "get away with copying most of",
    "start": "1509600",
    "end": "1514360"
  },
  {
    "text": "this okay so that looks about right client ID",
    "start": "1516279",
    "end": "1521799"
  },
  {
    "text": "client name flow flow we have renamed flow so so when we when we started",
    "start": "1521799",
    "end": "1528600"
  },
  {
    "text": "learning about openconnect and O we realized that there are certain Flows In",
    "start": "1528600",
    "end": "1533640"
  },
  {
    "text": "These protocols that when used together can create security problems like for example you allowing a client both",
    "start": "1533640",
    "end": "1540120"
  },
  {
    "text": "implicit flow and authorization code flow authorization code being the more restrictive and more secure one but if",
    "start": "1540120",
    "end": "1545559"
  },
  {
    "text": "you allow both for the same client somebody has just fiddle around with the query string parameters and downgrade",
    "start": "1545559",
    "end": "1551520"
  },
  {
    "text": "the security from one flow to the other so we thought a safe default could would be to just allow one flow per client",
    "start": "1551520",
    "end": "1559080"
  },
  {
    "text": "okay and that's what we did in in in ID fre just you know defensively coding all that yeah it turns out there are",
    "start": "1559080",
    "end": "1566120"
  },
  {
    "text": "situations where it it actually makes sense that more more than one flow is allowed per client let's say um uh you",
    "start": "1566120",
    "end": "1574240"
  },
  {
    "text": "know for your for your MVC app it it wants to act both as an um implicit client but also wants to do server to",
    "start": "1574240",
    "end": "1580399"
  },
  {
    "text": "server communication so we need client credentials and implicit flow or wants to use some custom crants whatever so we",
    "start": "1580399",
    "end": "1587960"
  },
  {
    "text": "kind of relax that restriction you can now Define more than one flow per client but still when setting it we make we run",
    "start": "1587960",
    "end": "1595399"
  },
  {
    "text": "some plausibility checks in the background making sure that you don't choose vulnerable combinations of flows",
    "start": "1595399",
    "end": "1602919"
  },
  {
    "text": "okay so for the most part you should be fine if not you will get an exception at startup time saying hey that's not",
    "start": "1602919",
    "end": "1610360"
  },
  {
    "text": "secure okay good okay so I think all we have to do",
    "start": "1610360",
    "end": "1615399"
  },
  {
    "text": "is take this guy and put him into to our M inmemory implementation as",
    "start": "1615399",
    "end": "1623240"
  },
  {
    "text": "well oh couple of more things okay well actually no just just",
    "start": "1623399",
    "end": "1629039"
  },
  {
    "text": "write the client first or look at the client so yeah so that should be it",
    "start": "1629039",
    "end": "1634240"
  },
  {
    "text": "right for for client credentials where there's no human involved",
    "start": "1634240",
    "end": "1640000"
  },
  {
    "text": "yeah okay so let's shut down identity server three let's now run identity server",
    "start": "1640000",
    "end": "1648320"
  },
  {
    "text": "four let's see here actually we'll just kill them",
    "start": "1648320",
    "end": "1652720"
  },
  {
    "text": "all okay there's Iden server four again rerun our a again",
    "start": "1654799",
    "end": "1660880"
  },
  {
    "text": "um go go back to the to the to the client code first before you run it what",
    "start": "1660880",
    "end": "1666080"
  },
  {
    "text": "did we miss no no to the client code console client Yeah couple of things I want to point out that that we also",
    "start": "1666080",
    "end": "1672360"
  },
  {
    "text": "changed here so when you scroll down when you get the token uh uh yeah so there's this you",
    "start": "1672360",
    "end": "1680399"
  },
  {
    "text": "know this class called token client which is our client Library you don't have to use that but basically what what",
    "start": "1680399",
    "end": "1685480"
  },
  {
    "text": "Brock's passing in here is uh in the token client is the address to the Token endpoint uh the client ID and the client",
    "start": "1685480",
    "end": "1691919"
  },
  {
    "text": "secret yeah um another thing that the O of spec allows per specification is",
    "start": "1691919",
    "end": "1697480"
  },
  {
    "text": "having clients without Secrets yeah again being a security guy I thought like n that sounds wrong to",
    "start": "1697480",
    "end": "1705320"
  },
  {
    "text": "me um again turns out time will tell and you you know get more experience there",
    "start": "1705320",
    "end": "1712799"
  },
  {
    "text": "are situations where clients without Secrets actually make sense for example for publicly deployed clients right your",
    "start": "1712799",
    "end": "1719080"
  },
  {
    "text": "JavaScript client well yeah maybe but also your native clients you deploy in the App Store what's the point of adding",
    "start": "1719080",
    "end": "1725559"
  },
  {
    "text": "a secret to that client that secret is in the source code yeah so we just force",
    "start": "1725559",
    "end": "1730679"
  },
  {
    "text": "people to manage more secrets even if they weren't really secret yeah so again a new feature in four is you can you can",
    "start": "1730679",
    "end": "1738039"
  },
  {
    "text": "have clients without Secrets okay that was a lot of feedback we got on that",
    "start": "1738039",
    "end": "1743279"
  },
  {
    "text": "yeah the other thing is um when Brock is requesting the token um he passes in the scope yeah um",
    "start": "1743279",
    "end": "1753440"
  },
  {
    "text": "in free scope was a mandatory parameter if you want to get the token um again we",
    "start": "1753440",
    "end": "1759440"
  },
  {
    "text": "got feedback saying you know in my data center I have all these clients and all these Scopes and whenever I give that",
    "start": "1759440",
    "end": "1765480"
  },
  {
    "text": "client access to another scope I have to update identity server and I have to update the client that he knows to ask",
    "start": "1765480",
    "end": "1771440"
  },
  {
    "text": "for this new scope so what we did now for for client credential flow uh is and",
    "start": "1771440",
    "end": "1777640"
  },
  {
    "text": "for resource owner is um if you don't ask for a scope at all you get all the",
    "start": "1777640",
    "end": "1782679"
  },
  {
    "text": "Scopes which are in the allowed Scopes list okay so this reduces a bit of the the management you know the the ceremony",
    "start": "1782679",
    "end": "1789399"
  },
  {
    "text": "every time you're you're changing a configuration okay good so let me rerun",
    "start": "1789399",
    "end": "1795200"
  },
  {
    "text": "the API which I don't I think I didn't there we go and now our console client",
    "start": "1795200",
    "end": "1800640"
  },
  {
    "text": "we used all the same configuration values and most importantly identi server uh four is now running on the",
    "start": "1800640",
    "end": "1807159"
  },
  {
    "text": "same uh URL so this guy should hey work",
    "start": "1807159",
    "end": "1814960"
  },
  {
    "text": "Co any questions on that that server to server style communication it's pretty much the same just you know a bit more",
    "start": "1815360",
    "end": "1822640"
  },
  {
    "text": "polished and and a bit easier to use cool the Bigg",
    "start": "1822640",
    "end": "1828399"
  },
  {
    "text": "the more complex scenario is interactive applications right where you have a UI",
    "start": "1828399",
    "end": "1833640"
  },
  {
    "text": "and login and users and we have to deal with humans and all that um so I guess",
    "start": "1833640",
    "end": "1839279"
  },
  {
    "text": "the the first thing we should do is add some users to the system okay so we we had a class called",
    "start": "1839279",
    "end": "1846679"
  },
  {
    "text": "inmemory user in in identif free and it served the same purpose kind of as the",
    "start": "1846679",
    "end": "1852480"
  },
  {
    "text": "inmemory stores like if you are in in development mode so to speak right and you don't have a database right here but",
    "start": "1852480",
    "end": "1859639"
  },
  {
    "text": "you want to have some something to work with yeah then you our recommendation was yeah use the in memory user and that",
    "start": "1859639",
    "end": "1867440"
  },
  {
    "text": "simulates a user database yeah now from the the feedback we got and the the the",
    "start": "1867440",
    "end": "1873919"
  },
  {
    "text": "issues that people opened is they started using in memory users for their",
    "start": "1873919",
    "end": "1879360"
  },
  {
    "text": "real users so they ask us like okay uh how can we load uh the inmemory user",
    "start": "1879360",
    "end": "1884559"
  },
  {
    "text": "collection from the database I said that doesn't make any sense so so we we went",
    "start": "1884559",
    "end": "1891399"
  },
  {
    "text": "back and forth back and forth removed it all together brought it back in put it into a different assembly added more",
    "start": "1891399",
    "end": "1897639"
  },
  {
    "text": "comments to it and we ended up with in the end calling it test user I hope this makes it really clear",
    "start": "1897639",
    "end": "1905519"
  },
  {
    "text": "this is not for production okay so it's a test user",
    "start": "1905519",
    "end": "1911039"
  },
  {
    "text": "yeah besides that test users they are very similar to the inmemory users yeah they have a subject ID they have a US",
    "start": "1911039",
    "end": "1917159"
  },
  {
    "text": "username they have a password and they have a list of uh claims",
    "start": "1917159",
    "end": "1923679"
  },
  {
    "text": "okay good we do have to register them as well in",
    "start": "1923679",
    "end": "1929960"
  },
  {
    "text": "di uh ADD test",
    "start": "1931080",
    "end": "1935559"
  },
  {
    "text": "users good okay excellent so it starts to look more and more like the old",
    "start": "1936240",
    "end": "1943600"
  },
  {
    "text": "version just different yeah okay cool what's the next thing we we we we need to let a user log in uh that's a UI okay",
    "start": "1943600",
    "end": "1953480"
  },
  {
    "text": "again one of the maybe the biggest point of feedback is that you know in in when",
    "start": "1953480",
    "end": "1959440"
  },
  {
    "text": "we when we designed I have free our m one of our design goals",
    "start": "1959440",
    "end": "1964480"
  },
  {
    "text": "was to host it outside of IIs right we have many people customers also that oh",
    "start": "1964480",
    "end": "1971519"
  },
  {
    "text": "all they want is is um install an N service on on a server and that is your",
    "start": "1971519",
    "end": "1977080"
  },
  {
    "text": "open ID connect provider no need to install IIs now the problem we were facing is huh how do we implement the UI",
    "start": "1977080",
    "end": "1984960"
  },
  {
    "text": "if we're not running in IAS Because by the time there was no good UI framework",
    "start": "1984960",
    "end": "1990480"
  },
  {
    "text": "for server side stuff that was running outside of I and MVC was tied to IIs and",
    "start": "1990480",
    "end": "1996200"
  },
  {
    "text": "there was no solution inside so what what did we do made it right own we",
    "start": "1996200",
    "end": "2002799"
  },
  {
    "text": "built our own fewu engine fun yeah few engine with templating and and Dey protection",
    "start": "2002799",
    "end": "2010880"
  },
  {
    "text": "and layout templat layout templates and yeah so again the nice thing in this version is because we can now rely upon",
    "start": "2010880",
    "end": "2017919"
  },
  {
    "text": "ASP net core we can assume that MVC is going to work especially across platform and we're removing more code from identi",
    "start": "2017919",
    "end": "2024279"
  },
  {
    "text": "server 4 in other words you now build the UI okay but using your favorite",
    "start": "2024279",
    "end": "2029679"
  },
  {
    "text": "technology right well right now there's only MVC yeah but um you know there might be other UI Frameworks coming um",
    "start": "2029679",
    "end": "2036279"
  },
  {
    "text": "to a and it's up to you really what you want to use to to to build your own UI and to be honest the UI is the thing you",
    "start": "2036279",
    "end": "2043279"
  },
  {
    "text": "will always change yeah that that was the probably the most customized piece in identity server 3 people want their",
    "start": "2043279",
    "end": "2049560"
  },
  {
    "text": "custom workflows at login time and we had a little bit of a UI framework where we would show a a username password",
    "start": "2049560",
    "end": "2055679"
  },
  {
    "text": "screen we could handle dealing with external providers but if you wanted to break out of our predefined workflow you",
    "start": "2055679",
    "end": "2063638"
  },
  {
    "text": "could do it we had a way to exit that workflow but you had to come back and kind of coordinate with us and that was",
    "start": "2063639",
    "end": "2069000"
  },
  {
    "text": "you know a bit of work so we just decided okay no UI that is the most customized piece people have all these",
    "start": "2069000",
    "end": "2075398"
  },
  {
    "text": "different requirements let them write all that code so does that mean you have to write everything from scratch no okay",
    "start": "2075399",
    "end": "2082118"
  },
  {
    "text": "so there are a couple of different ways how you can start building your UI well you can start from scratch yeah so or",
    "start": "2082119",
    "end": "2088919"
  },
  {
    "text": "maybe you have an existing application or maybe an existing login page for example that you just want to carry over",
    "start": "2088919",
    "end": "2095118"
  },
  {
    "text": "then copy it to Identity server we wanted to make it as easy as possible so for example another valid approach would",
    "start": "2095119",
    "end": "2101480"
  },
  {
    "text": "be to just start with the standard MVC template with the login page and just",
    "start": "2101480",
    "end": "2106560"
  },
  {
    "text": "add the um identif middleware to it and that will also work yeah so that the way the the UI works is you know a request",
    "start": "2106560",
    "end": "2113800"
  },
  {
    "text": "comes into to us we just do a redirect to// login and that's configurable of course and behind that URL you can do",
    "start": "2113800",
    "end": "2121359"
  },
  {
    "text": "whatever you want and when you're done with whatever you want you're setting the authentication cookie and direct",
    "start": "2121359",
    "end": "2127200"
  },
  {
    "text": "back to us and then we continue the the protocol work and just do you know issue",
    "start": "2127200",
    "end": "2133000"
  },
  {
    "text": "the tokens and all these things so it's totally up to you now how complex how easy how how look and feel you want to",
    "start": "2133000",
    "end": "2141119"
  },
  {
    "text": "do in between okay now they there used to be a thing called",
    "start": "2141119",
    "end": "2147680"
  },
  {
    "text": "new get content packages you know like you you get a new get and it spits out files static files into your project",
    "start": "2147680",
    "end": "2154880"
  },
  {
    "text": "that's gone yeah I mean in that's like kind of like one of the victims of the",
    "start": "2154880",
    "end": "2160680"
  },
  {
    "text": "the whole change between net core and all that um so what we what we did is we",
    "start": "2160680",
    "end": "2166119"
  },
  {
    "text": "we created a repo on on GitHub called the Iden for UI QuickStart DOI and what",
    "start": "2166119",
    "end": "2171720"
  },
  {
    "text": "this contains is only the UI pieces yeah that there's a sample login page in there there's a sample logout page in",
    "start": "2171720",
    "end": "2177720"
  },
  {
    "text": "there there's a sample consent screen in there and you you can just download that",
    "start": "2177720",
    "end": "2183200"
  },
  {
    "text": "and just copy it into your uh project and use it use as a starting point yeah you know bootstrap and all the bells and",
    "start": "2183200",
    "end": "2190040"
  },
  {
    "text": "whistles yeah um so either that or we have a little script file that you can",
    "start": "2190040",
    "end": "2195880"
  },
  {
    "text": "just execute and it will just download the folders into your into your local",
    "start": "2195880",
    "end": "2202319"
  },
  {
    "text": "directory okay so what do we get",
    "start": "2202319",
    "end": "2207880"
  },
  {
    "text": "here so what we do is we have as Dominic mentioned we have like a login page it's",
    "start": "2208720",
    "end": "2214400"
  },
  {
    "text": "just to get started it's sample code you can go and and this is you know start from here and tailor this as you need",
    "start": "2214400",
    "end": "2220359"
  },
  {
    "text": "but the main pieces of UI that identity server needs are uh you know sign in and sign out capabilities so we have an",
    "start": "2220359",
    "end": "2227280"
  },
  {
    "text": "account controller for those sort of things uh also the account controller helps deal with um integrating with the",
    "start": "2227280",
    "end": "2234599"
  },
  {
    "text": "external providers if you want to plug in Google or Azure active directory and have those users come back and",
    "start": "2234599",
    "end": "2240400"
  },
  {
    "text": "authenticate through identity server you have to have some amount of code to coordinate from the external provider",
    "start": "2240400",
    "end": "2245640"
  },
  {
    "text": "back to your matching account in your database uh and then of course issuing the cookie here so there's code in here",
    "start": "2245640",
    "end": "2251680"
  },
  {
    "text": "that deals with sign in and sign out uh the only other uh pieces of UI we have",
    "start": "2251680",
    "end": "2256880"
  },
  {
    "text": "the consent page as well which may or may not be appropriate for all scenarios but um you know if you need a consent",
    "start": "2256880",
    "end": "2262480"
  },
  {
    "text": "page this will get you started with that and then I think we just have a homepage and an error page so that's pretty",
    "start": "2262480",
    "end": "2267640"
  },
  {
    "text": "minimal UI um and it's the the sort of thing you would build in your um",
    "start": "2267640",
    "end": "2272800"
  },
  {
    "text": "obviously in whatever login system you need to uh we have the associated views here there's not much there we have some",
    "start": "2272800",
    "end": "2278599"
  },
  {
    "text": "styling so there's some dubdub dub root files with CSS um within the uh the account",
    "start": "2278599",
    "end": "2285359"
  },
  {
    "text": "controller because this is the place you'll probably write most of your code um we have uh first of all the",
    "start": "2285359",
    "end": "2291599"
  },
  {
    "text": "Constructor is where we are uh injecting in um the things that the you know login",
    "start": "2291599",
    "end": "2297920"
  },
  {
    "text": "code needs um of course one of them has to do with your test users so this is",
    "start": "2297920",
    "end": "2303160"
  },
  {
    "text": "you know coded to to deal with test users so that's uh one thing that's injected here uh of course you would",
    "start": "2303160",
    "end": "2308599"
  },
  {
    "text": "replace this with your own uh library that did whatever database query to look",
    "start": "2308599",
    "end": "2314119"
  },
  {
    "text": "up your users so if you were using asp.net identity that would be the user manager from asp.net identity okay uh",
    "start": "2314119",
    "end": "2321640"
  },
  {
    "text": "another important thing that we inject here is something called the I identity server interaction service so as part of",
    "start": "2321640",
    "end": "2327359"
  },
  {
    "text": "the login process you might want to know the context of the login of the signin",
    "start": "2327359",
    "end": "2332960"
  },
  {
    "text": "which client application was the user coming from right aspects about whether",
    "start": "2332960",
    "end": "2338319"
  },
  {
    "text": "or not you should be prompting them or other requirements at login like maybe a tenant was passed or maybe a certain",
    "start": "2338319",
    "end": "2344920"
  },
  {
    "text": "expiration on the uh the login uh was passed along or like a you know UI local",
    "start": "2344920",
    "end": "2351319"
  },
  {
    "text": "hint like you have to show the login page in German or English or whatever yeah all these things are made available",
    "start": "2351319",
    "end": "2356480"
  },
  {
    "text": "to you via this um this service here that you can query so this is how you talk to Identity server from your your",
    "start": "2356480",
    "end": "2362760"
  },
  {
    "text": "login code so then the first login is really this is just showing a login page",
    "start": "2362760",
    "end": "2368280"
  },
  {
    "text": "uh when you post back you know valid credentials and you validate them um",
    "start": "2368280",
    "end": "2374000"
  },
  {
    "text": "we're basically going to you know once you've done that you authenticate the user you issue the local cookie and this",
    "start": "2374000",
    "end": "2380319"
  },
  {
    "text": "is just using the standard cookie authentication middleware in ASP net core uh and then the other thing as part",
    "start": "2380319",
    "end": "2386119"
  },
  {
    "text": "of this of course is as Dominic mentioned the workflow is your your application needs the user to log in so",
    "start": "2386119",
    "end": "2391440"
  },
  {
    "text": "they first send the user to Identity server and identity server sends the user to your login page which is this",
    "start": "2391440",
    "end": "2397760"
  },
  {
    "text": "thing we then pass you as a parameter where to send them back once they have signed in so this is back into our uh",
    "start": "2397760",
    "end": "2405680"
  },
  {
    "text": "authorization endpoint so you have to maintain the return URL as part of your",
    "start": "2405680",
    "end": "2411480"
  },
  {
    "text": "you know roundt tripping uh the data in the UI that's basically the last thing once they're signed in you take them",
    "start": "2411480",
    "end": "2417960"
  },
  {
    "text": "back and then we continue the protocol processing and send them back to your client application and again this can be arbitrarily complex yeah this doesn't",
    "start": "2417960",
    "end": "2424599"
  },
  {
    "text": "have to be a single page you can have a compl complete registration workflow two Factor whatever just hold",
    "start": "2424599",
    "end": "2431839"
  },
  {
    "text": "on to that return URL because you're going to need it at the end to go back to us right which is pretty standard in",
    "start": "2431839",
    "end": "2437960"
  },
  {
    "text": "asp.net applications uh so is that good for now we look yeah for now okay we we need to",
    "start": "2437960",
    "end": "2444240"
  },
  {
    "text": "add MVC ah we didn't add MVC so yes this is of course using MVC so we'll just add the normal Services add",
    "start": "2444240",
    "end": "2452200"
  },
  {
    "text": "MVC which is the same thing as us now they're putting their stuff into the that they need oh we need static files",
    "start": "2452200",
    "end": "2459920"
  },
  {
    "text": "and we need MVC I think those are the only few things we need to add okay so let's add",
    "start": "2459920",
    "end": "2466800"
  },
  {
    "text": "the MVC client now oh and by the way one more thing is we um we will register the",
    "start": "2466800",
    "end": "2474520"
  },
  {
    "text": "cookie authentication middleware automatically or if you don't tell us otherwise uh but if you would like to",
    "start": "2474520",
    "end": "2481280"
  },
  {
    "text": "control any aspects of the cookie middleware itself then you can register it yourselves and then it's just part of",
    "start": "2481280",
    "end": "2486599"
  },
  {
    "text": "our configuration up here in our options you just tell us the scheme and we'll just use that one okay so that's another",
    "start": "2486599",
    "end": "2493160"
  },
  {
    "text": "point that people wanted a lot of customization in the past on uh I'm sorry what did you just say um let's",
    "start": "2493160",
    "end": "2499200"
  },
  {
    "text": "have a look at the MVC client for a second how how we invoke",
    "start": "2499200",
    "end": "2504480"
  },
  {
    "text": "that so you see that basically here in the MBC CL we use the open connect middleware for Microsoft so that says",
    "start": "2504480",
    "end": "2512720"
  },
  {
    "text": "that there's a client called MBC it has a secret it has a response type it asks for some Scopes so we now need to",
    "start": "2512720",
    "end": "2519000"
  },
  {
    "text": "recreate the same configuration um in Iden four the first thing we should create are the Scopes and the Scopes",
    "start": "2519000",
    "end": "2525880"
  },
  {
    "text": "don't exist anymore as we just learned so um apis the API scope became an API",
    "start": "2525880",
    "end": "2532599"
  },
  {
    "text": "resource and open ID and profile they are identity resources okay so these are the two types of resources we are",
    "start": "2532599",
    "end": "2538920"
  },
  {
    "text": "guarding um uh with identity server so we need to register",
    "start": "2538920",
    "end": "2544759"
  },
  {
    "text": "them",
    "start": "2545160",
    "end": "2548160"
  },
  {
    "text": "so one is open ID and by the way open ID and profile they are they are standard",
    "start": "2558920",
    "end": "2565079"
  },
  {
    "text": "resources if you like coming from the open spec so we just have them built in but obviously you can create your own uh",
    "start": "2565079",
    "end": "2571640"
  },
  {
    "text": "Scopes and Associate them with any claims you want to issue back to the",
    "start": "2571640",
    "end": "2576839"
  },
  {
    "text": "client application but for now that should be good okay cool and those need to get registered as",
    "start": "2576839",
    "end": "2582960"
  },
  {
    "text": "well",
    "start": "2582960",
    "end": "2585960"
  },
  {
    "text": "yep and let's add the client last step yep I'm probably can copy most of that",
    "start": "2593000",
    "end": "2598599"
  },
  {
    "text": "from the uh prior configuration oh yeah so I don't feel like typing all",
    "start": "2598599",
    "end": "2605119"
  },
  {
    "text": "those URLs in so where did he",
    "start": "2605119",
    "end": "2611400"
  },
  {
    "text": "go okay yeah pretty much pretty much all",
    "start": "2612920",
    "end": "2619640"
  },
  {
    "text": "that's the same the only one is",
    "start": "2619640",
    "end": "2622920"
  },
  {
    "text": "this you can remove 47 this is a something that we changed to default",
    "start": "2627359",
    "end": "2633319"
  },
  {
    "text": "value for that we have the redirect U or where where is it going back to we have the",
    "start": "2633319",
    "end": "2638800"
  },
  {
    "text": "post lout redirect U or where do we going to want to go back to after log out we have the lout cleanup URI we have",
    "start": "2638800",
    "end": "2645880"
  },
  {
    "text": "a secret and we have the allowed Scopes so pretty much the same so the clients haven't changed that much at all it's",
    "start": "2645880",
    "end": "2651680"
  },
  {
    "text": "mostly around Scopes and resources what what we did yeah okay is that it and we",
    "start": "2651680",
    "end": "2657000"
  },
  {
    "text": "made it a little bit nicer yeah yeah cool in other words that should work",
    "start": "2657000",
    "end": "2665520"
  },
  {
    "text": "should good uh let's run our API to have that",
    "start": "2665520",
    "end": "2673559"
  },
  {
    "text": "up and the last one's the MVC",
    "start": "2673559",
    "end": "2677960"
  },
  {
    "text": "client oh I guess he's still logged in let's close",
    "start": "2681839",
    "end": "2686839"
  },
  {
    "text": "that okay and",
    "start": "2690240",
    "end": "2697960"
  },
  {
    "text": "interesting what did we forget add MVC static oh with default route uh thank",
    "start": "2704760",
    "end": "2710760"
  },
  {
    "text": "you there we go and he needs",
    "start": "2710760",
    "end": "2716960"
  },
  {
    "text": "to okay one more time there we go so that's the you know",
    "start": "2724880",
    "end": "2733319"
  },
  {
    "text": "the template UI or the sample UI look pretty much like the old",
    "start": "2733319",
    "end": "2739119"
  },
  {
    "text": "UI that's the Conant screen again you can change that in whatever way you",
    "start": "2739119",
    "end": "2744400"
  },
  {
    "text": "want and here we are",
    "start": "2744400",
    "end": "2748400"
  },
  {
    "text": "back so another thing that has you know that has changed you want to",
    "start": "2749800",
    "end": "2756520"
  },
  {
    "text": "quickly show how you actually get the token now in a core yeah because that is a that that's not not an identifi change",
    "start": "2756520",
    "end": "2762200"
  },
  {
    "text": "but an ac. net change yeah so in in Katana you have to write quite a bit of code you to handle",
    "start": "2762200",
    "end": "2768319"
  },
  {
    "text": "various events of the open connect middleware get the tokens from the request and store them somewhere and",
    "start": "2768319",
    "end": "2775480"
  },
  {
    "text": "contact the user info endpoint and these are now all built in into into the new middleware so they are safe tokens safe",
    "start": "2775480",
    "end": "2781960"
  },
  {
    "text": "tokens by default basically just takes the tokens coming back from identi server and and stores them in your",
    "start": "2781960",
    "end": "2787440"
  },
  {
    "text": "cookie to be honest that's not a really good idea um it's a very convenient demo",
    "start": "2787440",
    "end": "2793839"
  },
  {
    "text": "friendly feature but uh if you store the identity token in there and the access",
    "start": "2793839",
    "end": "2799359"
  },
  {
    "text": "token and the refresh token maybe if you have that your cookie becomes pretty big very quickly and they are kind of",
    "start": "2799359",
    "end": "2806559"
  },
  {
    "text": "masking that problem by having a clever cookie middleware that takes the you know once the cookie gets bigger than 4",
    "start": "2806559",
    "end": "2813359"
  },
  {
    "text": "kilobytes which is the allowed upper upper limit they overflow into a second cookie into a third cookie into a fourth",
    "start": "2813359",
    "end": "2818920"
  },
  {
    "text": "cookie until you know oh basically there's no more cookies left so uh in",
    "start": "2818920",
    "end": "2825359"
  },
  {
    "text": "reality probably uh you want to store these tokens somewhere else maybe in a",
    "start": "2825359",
    "end": "2830599"
  },
  {
    "text": "cash or in a database um depending you know how long you want to keep them that being said if you use the save",
    "start": "2830599",
    "end": "2838040"
  },
  {
    "text": "tokens feature um um there there there there's a an API hanging off the HP",
    "start": "2838040",
    "end": "2844800"
  },
  {
    "text": "context you say get give me a token pass in the name the access token and then",
    "start": "2844800",
    "end": "2850000"
  },
  {
    "text": "they give it to you from this property from from this magic property collection uh and then you can use it to call the",
    "start": "2850000",
    "end": "2857839"
  },
  {
    "text": "API which worked right you showed that I did run it yes did I change something did you touch",
    "start": "2857839",
    "end": "2866040"
  },
  {
    "text": "anything okay okay cool any questions on that that's",
    "start": "2866040",
    "end": "2872720"
  },
  {
    "text": "interactive authentication using a web application and then call calling an API on behalf of a user",
    "start": "2872720",
    "end": "2881400"
  },
  {
    "text": "yeah pixie so your question is what what about pixie pixie is a um a",
    "start": "2881920",
    "end": "2888559"
  },
  {
    "text": "specification which is targeted at Native client applications not native server side applications uh if you want",
    "start": "2888559",
    "end": "2895640"
  },
  {
    "text": "to want to brief well we we mention pixie in the next talk when we talk about clients but pixie doesn't apply to",
    "start": "2895640",
    "end": "2901920"
  },
  {
    "text": "to web applications but we still do support it we we do support",
    "start": "2901920",
    "end": "2907240"
  },
  {
    "text": "yes okay so last thing missing I think is Google right like let's enable in",
    "start": "2907240",
    "end": "2914040"
  },
  {
    "text": "addition to username password let's enable Google authentication how did that work in free I can't even",
    "start": "2914040",
    "end": "2921440"
  },
  {
    "text": "remember ah so in three what we had to do was because we were coordinating a",
    "start": "2923079",
    "end": "2928240"
  },
  {
    "text": "lot of the UI and the cookies we had to um uh be very clever about where",
    "start": "2928240",
    "end": "2936599"
  },
  {
    "text": "external middleware was configured in the identity server 3 pipeline uh because we had a bit of our own UI in",
    "start": "2936599",
    "end": "2942400"
  },
  {
    "text": "there so we had this little callback function where you could register where you would register you know whatever",
    "start": "2942400",
    "end": "2948160"
  },
  {
    "text": "middleware Google middleware or WS Federation or open ID connect to ad um",
    "start": "2948160",
    "end": "2953760"
  },
  {
    "text": "Azure active directory whatever um but again now in identi server 4 um again",
    "start": "2953760",
    "end": "2958920"
  },
  {
    "text": "you can still or you're still going to use the Google middle middleware to connect up to an external provider um",
    "start": "2958920",
    "end": "2965200"
  },
  {
    "text": "but you just put it in the pipeline because now you're entirely in charge of the the UI so we will still need the",
    "start": "2965200",
    "end": "2971160"
  },
  {
    "text": "Google middleware in in four uh the other thing about this is um there's a common pattern when you were using an",
    "start": "2971160",
    "end": "2977599"
  },
  {
    "text": "external provider like Google is that when the Google user came back into your",
    "start": "2977599",
    "end": "2982920"
  },
  {
    "text": "uh application you didn't want them to immediately be logged in with your primary authentication cookie usually",
    "start": "2982920",
    "end": "2990079"
  },
  {
    "text": "you wanted some way to capture the user before you fully log them in so that you could see oh oh this is Dominic from",
    "start": "2990079",
    "end": "2996599"
  },
  {
    "text": "Google uh let's look him up in our database oh there is a record okay good he's allowed to continue or no I've",
    "start": "2996599",
    "end": "3002799"
  },
  {
    "text": "never seen this user before so I need to show a registration screen or something else so what we had is a second cookie",
    "start": "3002799",
    "end": "3010280"
  },
  {
    "text": "middleware to hold that temporary cookie during this sort of process of",
    "start": "3010280",
    "end": "3015920"
  },
  {
    "text": "identifying the user um and um again that's not really necessary anymore um",
    "start": "3015920",
    "end": "3021760"
  },
  {
    "text": "in identi Ser 4 you'll still use like a temporary cookie um but you'll just use",
    "start": "3021760",
    "end": "3027720"
  },
  {
    "text": "your own okay so that's what we need to have in four so let's go over to",
    "start": "3027720",
    "end": "3034280"
  },
  {
    "text": "four startup.cs we can then use the app.",
    "start": "3034280",
    "end": "3040079"
  },
  {
    "text": "usecookie authentication we're going to use a temp cookie of some sort um",
    "start": "3040079",
    "end": "3045880"
  },
  {
    "text": "automatic oops is it below or above uh we need to add it hold on one second",
    "start": "3045880",
    "end": "3053319"
  },
  {
    "text": "here so you know in that in the way the pipeline Works in a core is order is",
    "start": "3053319",
    "end": "3058839"
  },
  {
    "text": "really really important yeah um so I always forget if we need to put the cookies before after identity server",
    "start": "3058839",
    "end": "3066640"
  },
  {
    "text": "well what's going to happen is once they are done authenticating with Google they are going to issue our primary cookie oh",
    "start": "3066640",
    "end": "3072920"
  },
  {
    "text": "yeah right and so our because we're holding the primary cookie they have to run um basically between our cookie and",
    "start": "3072920",
    "end": "3079760"
  },
  {
    "text": "MPC and at the same time our middleware must be before your UI framework yeah which kind makes sense",
    "start": "3079760",
    "end": "3086119"
  },
  {
    "text": "so um now we do have again in our quick start our account controller has a",
    "start": "3086119",
    "end": "3091359"
  },
  {
    "text": "little bit of code to deal with triggering this external authentication so when you come in um well I guess I",
    "start": "3091359",
    "end": "3098400"
  },
  {
    "text": "should scroll back up our our little extension method here to build the view model to show the the UI this will",
    "start": "3098400",
    "end": "3104480"
  },
  {
    "text": "actually go and query um if I can find it here all of",
    "start": "3104480",
    "end": "3109640"
  },
  {
    "text": "the external providers that are configured in your pipeline so in other words uh this already knows how to how",
    "start": "3109640",
    "end": "3115079"
  },
  {
    "text": "to to detect Google or any other ones that you have so our login page will now",
    "start": "3115079",
    "end": "3120760"
  },
  {
    "text": "show buttons for Google Facebook Azure active directory whatever again that's all customizable so um then when we",
    "start": "3120760",
    "end": "3128280"
  },
  {
    "text": "trigger that that is down in our external code here somewhere so this is",
    "start": "3128280",
    "end": "3133640"
  },
  {
    "text": "what triggers the external authentication um basically down here at the bottom we're then triggering uh you",
    "start": "3133640",
    "end": "3139920"
  },
  {
    "text": "know Google or Facebook or or whatever uh and then the call back occurs and on",
    "start": "3139920",
    "end": "3145000"
  },
  {
    "text": "the callback this is where we're assuming the pattern of you having used the temporary cookie so what we'll do is",
    "start": "3145000",
    "end": "3151520"
  },
  {
    "text": "we need to go and query the temporary cookie to look at the uh Google user to",
    "start": "3151520",
    "end": "3157160"
  },
  {
    "text": "find out who they are so there is a little bit of coupling here we need to know what uh name that's going to be so",
    "start": "3157160",
    "end": "3163520"
  },
  {
    "text": "we just have a constant for that and uh that's essentially what uh the name is",
    "start": "3163520",
    "end": "3169280"
  },
  {
    "text": "for this middleware here that we need to register like that so then when we use",
    "start": "3169280",
    "end": "3174599"
  },
  {
    "text": "Google authentic ation we'll do the authentication scheme we'll call this Google we'll then do sign in as same",
    "start": "3174599",
    "end": "3181839"
  },
  {
    "text": "constant and then we need the client ID in secret uh and in fact I think we can just grab the same ones that we already",
    "start": "3181839",
    "end": "3187599"
  },
  {
    "text": "had from here pop those in okay so temporary",
    "start": "3187599",
    "end": "3195400"
  },
  {
    "text": "cookie here to hold the the temporary identity coming from the external provider to really identify them in your",
    "start": "3195400",
    "end": "3201240"
  },
  {
    "text": "system uh and then whatever other external middleware and again this works pretty much the same way for Google and",
    "start": "3201240",
    "end": "3207240"
  },
  {
    "text": "adfs and Facebook and um I'm sorry Azure active directory yeah okay I think",
    "start": "3207240",
    "end": "3214079"
  },
  {
    "text": "that's it all right so run it I think it's still running mayi yeah",
    "start": "3214079",
    "end": "3220760"
  },
  {
    "text": "it is okay let's close these all",
    "start": "3220760",
    "end": "3226200"
  },
  {
    "text": "down okay and there's the MVC client",
    "start": "3228960",
    "end": "3236960"
  },
  {
    "text": "so secure yep Google shows up here I'm already signed into Google so I think",
    "start": "3236960",
    "end": "3242240"
  },
  {
    "text": "it's going to come immediately back maybe not yeah there we go so we",
    "start": "3242240",
    "end": "3247359"
  },
  {
    "text": "came back from Google already and we continue on and now we're back in our app Okay cool so that's it we ped",
    "start": "3247359",
    "end": "3256079"
  },
  {
    "text": "everything over yep so one one very um General thing that we often get",
    "start": "3256079",
    "end": "3262359"
  },
  {
    "text": "questions about this where where can we use that where can we use identi four um",
    "start": "3262359",
    "end": "3267680"
  },
  {
    "text": "it runs on ASP net core right and um Microsoft has a lot of marketing in",
    "start": "3267680",
    "end": "3273480"
  },
  {
    "text": "these names again so it kind of feels like asp.net core is tied to net core",
    "start": "3273480",
    "end": "3280119"
  },
  {
    "text": "right uh but that's not the case yeah so hp. net core despite its name can run on",
    "start": "3280119",
    "end": "3285520"
  },
  {
    "text": "the standard NET Framework starting with 452 I think or something like that or four 4 yeah 452 so um in other words if",
    "start": "3285520",
    "end": "3296559"
  },
  {
    "text": "you have the feeling that jumping to net core and everything new at once is a bit",
    "start": "3296559",
    "end": "3301680"
  },
  {
    "text": "of a you know too long jump and too risky for you you can just use your NET",
    "start": "3301680",
    "end": "3306920"
  },
  {
    "text": "Framework you know and you know love probably and and know how to install and",
    "start": "3306920",
    "end": "3312440"
  },
  {
    "text": "to manage and to troubleshoot and your support staff knows about that and your customers know what what's going on",
    "start": "3312440",
    "end": "3317640"
  },
  {
    "text": "there and you can just run a core on top of that normal NET Framework yeah um so",
    "start": "3317640",
    "end": "3324400"
  },
  {
    "text": "that's that's how fine and that is I think also the the most common scenario how how our customers are using it today",
    "start": "3324400",
    "end": "3330640"
  },
  {
    "text": "you know just take the Net Framework run that on top yeah if you are you know",
    "start": "3330640",
    "end": "3336960"
  },
  {
    "text": "want to make the jump to net core you get some interesting extra features that you won't get from the full framework",
    "start": "3336960",
    "end": "3343039"
  },
  {
    "text": "one of them is obviously crossplatform so we actually build um in in parallel",
    "start": "3343039",
    "end": "3349240"
  },
  {
    "text": "every every single check-in gets built on Windows on OS 10 and on Ubuntu so",
    "start": "3349240",
    "end": "3355280"
  },
  {
    "text": "it's working actually um you get support for things like Docker so if you want to",
    "start": "3355280",
    "end": "3360680"
  },
  {
    "text": "run um identify in a container there's a guy who writes samples for that as well um so that's working as well and",
    "start": "3360680",
    "end": "3370359"
  },
  {
    "text": "maybe um maybe uh one of the my one of my most compelling features is that with",
    "start": "3370359",
    "end": "3377760"
  },
  {
    "text": "net core you can deploy The NET Framework and net core itself with identity server so it's one",
    "start": "3377760",
    "end": "3383839"
  },
  {
    "text": "self-contained install that you bring on a server it doesn't need to have net pre-installed you can run multiple net",
    "start": "3383839",
    "end": "3390039"
  },
  {
    "text": "versions side by side on that server and it's just a minimal impact kind of way to deploy",
    "start": "3390039",
    "end": "3396440"
  },
  {
    "text": "that okay what do you think is it okay good enough good",
    "start": "3396440",
    "end": "3402559"
  },
  {
    "text": "enough good any more questions",
    "start": "3402559",
    "end": "3409359"
  },
  {
    "text": "yeah as a single page application so the the question is can",
    "start": "3413880",
    "end": "3420160"
  },
  {
    "text": "you write the UI as a single page application absolutely yeah again you know what all we do is we do a redirect",
    "start": "3420160",
    "end": "3427280"
  },
  {
    "text": "when you come in to us we we redirect to some URL that you you configure yeah and",
    "start": "3427280",
    "end": "3432839"
  },
  {
    "text": "then you do whatever you want as long as you at the end call a server side endpoint that sets the authentication",
    "start": "3432839",
    "end": "3439200"
  },
  {
    "text": "cookie and does the final redirect back to us I guess is",
    "start": "3439200",
    "end": "3447440"
  },
  {
    "text": "that yeah that's always the problem so so writing a spa is going to be harder I",
    "start": "3456440",
    "end": "3461559"
  },
  {
    "text": "think sure but yeah technically absolutely possible it it's just that you know when",
    "start": "3461559",
    "end": "3467839"
  },
  {
    "text": "you're done you need to somehow trigger something that sets the cookie on the server and then go back to",
    "start": "3467839",
    "end": "3473799"
  },
  {
    "text": "us okay good thank you very much for your",
    "start": "3473799",
    "end": "3479480"
  },
  {
    "text": "time thank you and enjoy the [Applause]",
    "start": "3479480",
    "end": "3485440"
  },
  {
    "text": "rest",
    "start": "3485440",
    "end": "3488440"
  }
]