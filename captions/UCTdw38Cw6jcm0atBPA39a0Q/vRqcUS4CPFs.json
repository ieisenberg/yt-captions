[
  {
    "start": "0",
    "end": "61000"
  },
  {
    "text": "first of it first talk in the morning after a party I hope you're gonna bear",
    "start": "3760",
    "end": "10570"
  },
  {
    "text": "with me in this I'm gonna talk about attacking modern web technologies and when I wrote this title I was trolling a",
    "start": "10570",
    "end": "18310"
  },
  {
    "text": "bit the reason for that is that modern is like a weird word right modern means",
    "start": "18310",
    "end": "23980"
  },
  {
    "text": "probably that it's old and it's so old that people are actually using it so I",
    "start": "23980",
    "end": "29550"
  },
  {
    "text": "will actually try to not talk about like the common ways of attacking something",
    "start": "29550",
    "end": "36909"
  },
  {
    "text": "like sequel injection or exercise I'll try to think about the web application that has thought about a bunch of things",
    "start": "36909",
    "end": "44519"
  },
  {
    "text": "it's such things as sanitizing your input maybe moving over your file upload",
    "start": "44519",
    "end": "50739"
  },
  {
    "text": "to a different domain and probably to a third-party service like a cloud bucket",
    "start": "50739",
    "end": "56979"
  },
  {
    "text": "or or similar so my name is Franz Rosen to begin with when I write the Swedish",
    "start": "56979",
    "end": "63940"
  },
  {
    "start": "61000",
    "end": "61000"
  },
  {
    "text": "Nena it sounds super cocky and the reason I did this was I had this profile",
    "start": "63940",
    "end": "69760"
  },
  {
    "text": "picture from way back and I met some friends outside of Sweden if you know",
    "start": "69760",
    "end": "74950"
  },
  {
    "text": "Sweden it's like this is up north this is in social Al's like 35 - Celsius and",
    "start": "74950",
    "end": "80760"
  },
  {
    "text": "I showed a couple of friends outside of Sweden and they were like yeah yeah",
    "start": "80760",
    "end": "85930"
  },
  {
    "text": "you're you're hacking you dress this in India and I was like no this is how you survive in Sweden I work as a security",
    "start": "85930",
    "end": "93910"
  },
  {
    "text": "round detective find the tech device like we're trying to automate a bunch of security show so we're monitoring your",
    "start": "93910",
    "end": "101200"
  },
  {
    "text": "site we're testing for a bunch of stuff and working as a security adviser that means that I need to advise around",
    "start": "101200",
    "end": "107500"
  },
  {
    "text": "security so I need to know about security so I need to force myself to extend my knowledge beyond what's",
    "start": "107500",
    "end": "114580"
  },
  {
    "text": "already out there so I'm really trying to do that and one of the ways I'm doing it is by researching bugs and using bug",
    "start": "114580",
    "end": "123340"
  },
  {
    "text": "bounty for that there's been some talks earlier on this event about bug bounties",
    "start": "123340",
    "end": "128979"
  },
  {
    "text": "at least like mentioning it bug bounties in in short words is basically a company",
    "start": "128979",
    "end": "134799"
  },
  {
    "text": "puts up bounties based basically money or rewards and they say please",
    "start": "134799",
    "end": "140230"
  },
  {
    "text": "hack us and you go to them and you look for stuff you basically get a like a get-out-of-jail-free card but you don't",
    "start": "140230",
    "end": "147519"
  },
  {
    "text": "go to jail at all so and you get money so it's like it's the reverse Oh",
    "start": "147519",
    "end": "153239"
  },
  {
    "text": "get-out-of-jail-free card I do a blog on lap start to take fire to come also around like new ways of",
    "start": "153239",
    "end": "159790"
  },
  {
    "text": "thinking in terms of security shoes and stuff I also do a bunch of live hacking",
    "start": "159790",
    "end": "165190"
  },
  {
    "text": "events so a bunch of these companies like hacker 1 which is a marketplace they put up like a live hacking event so",
    "start": "165190",
    "end": "172209"
  },
  {
    "text": "we basically we get invited to a city and a company goes there and they say please hack this company and there was a",
    "start": "172209",
    "end": "178900"
  },
  {
    "text": "big event in Vegas last year and I won so I want there mvh oh I have like a boxing belt at home which is awesome we",
    "start": "178900",
    "end": "186760"
  },
  {
    "text": "also competed as teams Sweden in San Francisco earlier this year and we",
    "start": "186760",
    "end": "191769"
  },
  {
    "text": "crushed Team Belgium so hard like we were number one they were number two but",
    "start": "191769",
    "end": "197170"
  },
  {
    "text": "we were like twice as good which was awesome so I started actually as a developer and",
    "start": "197170",
    "end": "203200"
  },
  {
    "start": "203000",
    "end": "203000"
  },
  {
    "text": "this is the logo of HP and I started as a PHP developer in 2004 she probably",
    "start": "203200",
    "end": "208389"
  },
  {
    "text": "looks more like this like it's a that's a it's an evil elephant it's a awesome F",
    "start": "208389",
    "end": "213549"
  },
  {
    "text": "I love this elephant but it's like if you don't know it too well might stab you in the back right and I started as a",
    "start": "213549",
    "end": "220599"
  },
  {
    "text": "developer and I was working as a consultant and I met a couple of friends",
    "start": "220599",
    "end": "225970"
  },
  {
    "text": "and they were doing a lot of security things back then doing security things",
    "start": "225970",
    "end": "231579"
  },
  {
    "text": "means you were smiling behind your computer in the office and suddenly that guy knows all the passwords in the",
    "start": "231579",
    "end": "238060"
  },
  {
    "text": "office that was how he did security but there was something happening so this is",
    "start": "238060",
    "end": "243459"
  },
  {
    "text": "probably four or five years ago that PayPal sent at least me an email saying if you find security issues on PayPal",
    "start": "243459",
    "end": "250660"
  },
  {
    "text": "and tell us about these issues we will pay you money and if we don't need you",
    "start": "250660",
    "end": "256810"
  },
  {
    "text": "to sign a contract or anything we just want you to tell us about the bug please hack us basically and tell us about what",
    "start": "256810",
    "end": "263800"
  },
  {
    "text": "you found and we're gonna pay money and when I saw this and my friends was doing this I tried to ask them like what what",
    "start": "263800",
    "end": "271360"
  },
  {
    "text": "are they like what do they want like what should I look for and they showed me some tricks and so I started looking",
    "start": "271360",
    "end": "278680"
  },
  {
    "text": "into it and like this is super interesting and being a developer from the start I realized that I knew a lot",
    "start": "278680",
    "end": "284530"
  },
  {
    "text": "of these things just I knew the reverse of it like never trust user inputs that",
    "start": "284530",
    "end": "289780"
  },
  {
    "text": "was like one of the things I I thought about but I didn't really know how bad",
    "start": "289780",
    "end": "295030"
  },
  {
    "text": "it could actually get so I took a look at PayPal I registered my account",
    "start": "295030",
    "end": "300400"
  },
  {
    "text": "I made like a business account and a personal account and I sent some money between my both accounts and I was able",
    "start": "300400",
    "end": "308439"
  },
  {
    "text": "to like I actually found a way to trigger a cross-site scripting on PayPal so I could send you money and you would",
    "start": "308439",
    "end": "314800"
  },
  {
    "text": "read it and they would trigger which was like a the perfect place of having a XSS",
    "start": "314800",
    "end": "320169"
  },
  {
    "text": "because you could basically trigger them to send back more money and I sent it to",
    "start": "320169",
    "end": "325629"
  },
  {
    "text": "them back then and I told them like this is the print screen this is what I did this is where I put it in I use this",
    "start": "325629",
    "end": "330969"
  },
  {
    "text": "kind of way to send the money and they came back like a couple of months later",
    "start": "330969",
    "end": "335979"
  },
  {
    "text": "and like hey what's your PayPal account we want to give you $750 and I'm like",
    "start": "335979",
    "end": "341169"
  },
  {
    "text": "what like PayPal asking me for my PayPal account to give me money like the haha that's fake and then like remove it but",
    "start": "341169",
    "end": "348219"
  },
  {
    "text": "that was actually true they wanted to pay you me money because they identified it being a risk so when this happened",
    "start": "348219",
    "end": "354610"
  },
  {
    "text": "and I realized this was not a fake email there were a bunch of companies doing the same thing so I totally freaked out",
    "start": "354610",
    "end": "360819"
  },
  {
    "text": "I was like okay I'm gonna help all of them I'm gonna try to find something at least on all these companies I've never",
    "start": "360819",
    "end": "366789"
  },
  {
    "text": "had that many t-shirts in my life vest back then because that was basically what they were sending out so all these",
    "start": "366789",
    "end": "374229"
  },
  {
    "text": "t-shirts not like probably most of them did not even pay money they just sent",
    "start": "374229",
    "end": "379599"
  },
  {
    "text": "you these t-shirts and this like this evolved into being like something they",
    "start": "379599",
    "end": "386650"
  },
  {
    "text": "call like a human powered marketplace so there are a bunch of these companies hacker one in back crowd trying to get",
    "start": "386650",
    "end": "395500"
  },
  {
    "text": "us bug bounty hunters into their marketplace so we can help their",
    "start": "395500",
    "end": "401229"
  },
  {
    "text": "customers and their customers can like send money over to us so this is like the the evolution of of",
    "start": "401229",
    "end": "408890"
  },
  {
    "text": "this thing where you can actually have a middleman in between so the cool thing",
    "start": "408890",
    "end": "414080"
  },
  {
    "text": "is like we working with automation we realized like we can do the same thing right right so we just okay so all these",
    "start": "414080",
    "end": "421490"
  },
  {
    "text": "researchers as soon as you find issues that we can automate stuff that is like not custom to a specific company but",
    "start": "421490",
    "end": "427940"
  },
  {
    "text": "some like general misconfigurations or easy to spot bugs or like some complex",
    "start": "427940",
    "end": "433610"
  },
  {
    "text": "flows but it's a plug-in that everybody uses or similar they can give them to us",
    "start": "433610",
    "end": "438890"
  },
  {
    "text": "and we're gonna pay them every time we find the bug so it's almost like a royalty thing which is quite cool so the",
    "start": "438890",
    "end": "446060"
  },
  {
    "text": "run down for today is like how did I get here we're done with that that's awesome I love a run down we're gonna care like",
    "start": "446060",
    "end": "451970"
  },
  {
    "start": "447000",
    "end": "447000"
  },
  {
    "text": "take off stuff I'm gonna start off small because you had a rough night yesterday and with an example of like in real life",
    "start": "451970",
    "end": "460370"
  },
  {
    "text": "case scenario and then I'm gonna move over to an old technology but I will",
    "start": "460370",
    "end": "466400"
  },
  {
    "text": "approach it in a modern way in terms of like we can actually use this legacy",
    "start": "466400",
    "end": "471470"
  },
  {
    "text": "things to abuse a properly set up infrastructure and upload policies the",
    "start": "471470",
    "end": "478460"
  },
  {
    "text": "worst thing ever I know a lot of companies are like starting to use them",
    "start": "478460",
    "end": "484130"
  },
  {
    "text": "they have a lot of benefits super easy to do wrong I will try to explain a bunch of stuff with that also",
    "start": "484130",
    "end": "490280"
  },
  {
    "text": "postmessage classic thing which is like it has been a for a long time everybody's using it for all different",
    "start": "490280",
    "end": "496790"
  },
  {
    "text": "reasons nowadays and I will explain a bit how selected it and how they did wrong so work sucked debugger I was",
    "start": "496790",
    "end": "504230"
  },
  {
    "text": "going to event in in Coventry in the UK",
    "start": "504230",
    "end": "509360"
  },
  {
    "text": "and they invited me for a Python conference called Python and before the",
    "start": "509360",
    "end": "514760"
  },
  {
    "text": "Python conference I was like like I know Python but I I don't know exactly what I should approach and like I want to talk",
    "start": "514760",
    "end": "521030"
  },
  {
    "text": "with them on their language right so I approached it in the terms that I want to look for a framework that a lot of",
    "start": "521030",
    "end": "527780"
  },
  {
    "text": "people uses and I want to see if there's anything quite obvious that shouldn't be",
    "start": "527780",
    "end": "534620"
  },
  {
    "text": "done and like trying to like approach it in a very sane way being outside the Python community so I found the",
    "start": "534620",
    "end": "543380"
  },
  {
    "text": "framework called flask flask was like an easy to set up web framework for Python",
    "start": "543380",
    "end": "549410"
  },
  {
    "text": "and when I started reading the documentation I was starting reading okay what what do flask have and one of",
    "start": "549410",
    "end": "557870"
  },
  {
    "text": "the things it has was work suck debugger and when I started reading documentation it said must never be used on production",
    "start": "557870",
    "end": "564920"
  },
  {
    "start": "563000",
    "end": "563000"
  },
  {
    "text": "machines when you read this you think",
    "start": "564920",
    "end": "571220"
  },
  {
    "text": "that a lot of people has done that and the thing is this wording is pretty",
    "start": "571220",
    "end": "578600"
  },
  {
    "text": "wrong there was a big reason why this should not be run but on production like",
    "start": "578600",
    "end": "584180"
  },
  {
    "text": "this should be must never be freaking online ever because the work suck",
    "start": "584180",
    "end": "589759"
  },
  {
    "text": "debugger had a very different component it added a route to your framework",
    "start": "589759",
    "end": "595720"
  },
  {
    "text": "called console and when you went to slash console it the UI was pretty basic",
    "start": "595720",
    "end": "602540"
  },
  {
    "text": "it had an input box and when you wrote something in input box that code was",
    "start": "602540",
    "end": "607819"
  },
  {
    "text": "evaluated in Python so you could basically go to the slash console and",
    "start": "607819",
    "end": "613250"
  },
  {
    "text": "just write code that the server would execute on the server ask the user that",
    "start": "613250",
    "end": "619310"
  },
  {
    "text": "runs Python this is called like a remote code execution they have a scoring system of vulnerabilities this is 10.0",
    "start": "619310",
    "end": "627199"
  },
  {
    "text": "out of 10.0 and this is per design so this is like this is very very",
    "start": "627199",
    "end": "633139"
  },
  {
    "text": "convenient if you're running it locally but it's very very not convenient if you're running it online and so the",
    "start": "633139",
    "end": "639560"
  },
  {
    "text": "wording here is a bit bad I would say because when I saw this I was like okay let's look for it online and the",
    "start": "639560",
    "end": "647180"
  },
  {
    "text": "interesting thing is if you had works like debugger on it would show up in the header as works ugh and when I see show",
    "start": "647180",
    "end": "656689"
  },
  {
    "text": "up in the server I mean whenever you request that a website from this site it would respond with a response headers",
    "start": "656689",
    "end": "664009"
  },
  {
    "text": "saying hello works ugh is all here if you want something so I did what",
    "start": "664009",
    "end": "670339"
  },
  {
    "text": "everybody else would do I went to search engine that looks for metadata called shodhan and i literally like when",
    "start": "670339",
    "end": "679460"
  },
  {
    "text": "thing like work suck and i was presented with a bunch of companies this was so",
    "start": "679460",
    "end": "685190"
  },
  {
    "text": "bad i was like this is not really what's are expecting and before this python conference but one of the companies that",
    "start": "685190",
    "end": "692960"
  },
  {
    "text": "i actually saw was this so first i see like there's a huge sequel error like",
    "start": "692960",
    "end": "698060"
  },
  {
    "start": "693000",
    "end": "693000"
  },
  {
    "text": "that's bad in itself it's probably not an injection or anything it's just that when this scanner of the show done was",
    "start": "698060",
    "end": "705320"
  },
  {
    "text": "visiting this website it had this specific error but this also exposed",
    "start": "705320",
    "end": "711650"
  },
  {
    "text": "that the work shock was enabled and the ssl certificate was very convenient here because when you look at it you see",
    "start": "711650",
    "end": "718040"
  },
  {
    "text": "there's a company called patreon and I knew patron from before patron was",
    "start": "718040",
    "end": "723110"
  },
  {
    "text": "basically or it still is a website for youtubers to get like crowd-sourced",
    "start": "723110",
    "end": "730610"
  },
  {
    "text": "funding so if you're youtuber having 10,000 subscribers and they pay you one dollar a month you get $10,000 a month",
    "start": "730610",
    "end": "736700"
  },
  {
    "text": "and when I saw this I knew that patreon had a responsible disclosure policy meaning I could contact them and tell",
    "start": "736700",
    "end": "743510"
  },
  {
    "text": "them about this issue but when I went to this website this website didn't respond",
    "start": "743510",
    "end": "749060"
  },
  {
    "text": "to me like that was it was offline which was a good thing but just to make sure I",
    "start": "749060",
    "end": "755390"
  },
  {
    "text": "took the IP address that it was pointing to and then I I put like a a loop trying",
    "start": "755390",
    "end": "762620"
  },
  {
    "text": "to ping that IP address so as soon as it would open on for like port 443 or 80 it",
    "start": "762620",
    "end": "768380"
  },
  {
    "text": "would tell me and send me like like a say pure push and I waited for a couple",
    "start": "768380",
    "end": "775160"
  },
  {
    "text": "of days and suddenly in the morning I look at my phone and I have like a say paper saying like this patreon site is",
    "start": "775160",
    "end": "782420"
  },
  {
    "text": "online again and I went to the website and I see the exact same error and I go",
    "start": "782420",
    "end": "788840"
  },
  {
    "text": "to slash console and like pee open Who am I and it says root",
    "start": "788840",
    "end": "796480"
  },
  {
    "text": "and I was like this is this is yep this is pretty bad so they had a responsible",
    "start": "796480",
    "end": "804460"
  },
  {
    "text": "disclosure I wrote them I actually wrote in the wrote in header urgent and remote code execution due to works like",
    "start": "804460",
    "end": "810850"
  },
  {
    "text": "debugger being enabled on an online interface you go to slash console just insert your PHP code and iran-us root",
    "start": "810850",
    "end": "817860"
  },
  {
    "text": "that was everything I could do right I could potentially go inside it as root",
    "start": "817860",
    "end": "823330"
  },
  {
    "text": "to shut it down but I didn't and I let them know everything am and then my case",
    "start": "823330",
    "end": "830020"
  },
  {
    "text": "closed I think it was five days later they send",
    "start": "830020",
    "end": "835360"
  },
  {
    "text": "me a response back oh yeah we know it's pretty bad we've been thinking about moving it the dev environments I'm like",
    "start": "835360",
    "end": "843210"
  },
  {
    "text": "what like this is not how you respond to our remote code execution like without",
    "start": "843210",
    "end": "850570"
  },
  {
    "text": "authorization like I just went to our web site wrote the Python come on you should not react like this and not after",
    "start": "850570",
    "end": "856060"
  },
  {
    "text": "five days so I saw this and I'm like okay hopefully they did a couple of days",
    "start": "856060",
    "end": "862330"
  },
  {
    "text": "later I see on Hacker News that the crowdfunding site patron has been hacked",
    "start": "862330",
    "end": "868050"
  },
  {
    "text": "and when I saw this I'm like that's probably the reason if they reacted like",
    "start": "868050",
    "end": "873250"
  },
  {
    "text": "that for for this specific thing that's is probably the big reason why this happened and when you read the the",
    "start": "873250",
    "end": "879610"
  },
  {
    "text": "security like security announcement it said due to the bug environment being",
    "start": "879610",
    "end": "884710"
  },
  {
    "text": "online and I'm like this is the reason so I sent them an email like hey can you confirm that this is the case because",
    "start": "884710",
    "end": "890470"
  },
  {
    "text": "you need to understand if this is the case someone else knows about this thing of course it was like in the",
    "start": "890470",
    "end": "896860"
  },
  {
    "text": "documentation right but knows about this thing hacks the bouncer website extracts their data and put it puts it",
    "start": "896860",
    "end": "903280"
  },
  {
    "text": "online and nobody responded and I looked at Twitter they are like in the war room sitting there like what the hell what",
    "start": "903280",
    "end": "909430"
  },
  {
    "text": "the hell we need to like fix the media we've been hacked so we took the decision internally at detective I this",
    "start": "909430",
    "end": "916600"
  },
  {
    "text": "must be the reason like this is obvious they had a remote code execution they got hacked must be a correlation so we",
    "start": "916600",
    "end": "922210"
  },
  {
    "text": "put up a blog post without actually having the their confirmation of it just",
    "start": "922210",
    "end": "927610"
  },
  {
    "text": "that the the tiny little signs that this was actually the thing and we",
    "start": "927610",
    "end": "933400"
  },
  {
    "text": "put out how pigeon got hacked and explain what the works like the bugger Wilson what how it is they came after",
    "start": "933400",
    "end": "938950"
  },
  {
    "text": "that and confirmed that this was actually the case and and said that if we could be like the scapegoat of this",
    "start": "938950",
    "end": "945100"
  },
  {
    "text": "it's fine you like hopefully other companies would be getting this fixed also works ugh fixed this so now you",
    "start": "945100",
    "end": "951910"
  },
  {
    "text": "need like a paint code to get to this console another company that that reacted in a different way that was uber",
    "start": "951910",
    "end": "959230"
  },
  {
    "text": "I reported this on a Saturday to them they actually he was at the gym and like",
    "start": "959230",
    "end": "964810"
  },
  {
    "text": "he ran home that's basically how you react they also like pay me like five",
    "start": "964810",
    "end": "969940"
  },
  {
    "text": "thousand dollars which was like pretty nice for uh for uh just this tiny",
    "start": "969940",
    "end": "975940"
  },
  {
    "text": "research for this event and appcache is",
    "start": "975940",
    "end": "982150"
  },
  {
    "text": "something that moving over to that appcache is something that has been been",
    "start": "982150",
    "end": "988030"
  },
  {
    "text": "on the web in the web browser for a really long time but and I can explain",
    "start": "988030",
    "end": "993430"
  },
  {
    "text": "what it is basically it's not modern at all but uh me my friend Matias was trying to use app cache to attack modern",
    "start": "993430",
    "end": "1001020"
  },
  {
    "text": "websites so app cache is basically application cache that means that you",
    "start": "1001020",
    "end": "1007230"
  },
  {
    "text": "can go to a website that website can say please cache these things and as soon as",
    "start": "1007230",
    "end": "1013770"
  },
  {
    "text": "it does it will take all their URLs you ask you to cache and save them locally",
    "start": "1013770",
    "end": "1019260"
  },
  {
    "text": "and that means that as soon as you unplug your Wi-Fi or you don't really unplug your Wi-Fi like this side I don't",
    "start": "1019260",
    "end": "1025829"
  },
  {
    "text": "know how you unplug your Wi-Fi there's no sign for it but as soon as you do that it can actually use your fallback",
    "start": "1025829",
    "end": "1031709"
  },
  {
    "text": "so we can use the files that it was actually downloading so if you would install one of these manifests on your",
    "start": "1031709",
    "end": "1037410"
  },
  {
    "text": "website you would put it in a manifest attribute on your HTML note that one",
    "start": "1037410",
    "end": "1043589"
  },
  {
    "text": "will download the app cache install it in your web browser and it will go through the cache manifest that looks a",
    "start": "1043589",
    "end": "1049350"
  },
  {
    "text": "bit like this and this manifest contains a bunch of URLs that your browser will request and then you're able to you're",
    "start": "1049350",
    "end": "1057030"
  },
  {
    "text": "actually able to also provide a fallback at the fallback is what I mentioned so as soon as you get like",
    "start": "1057030",
    "end": "1063410"
  },
  {
    "text": "404 or like a 500 or an error message it will try to use the fallback instead and",
    "start": "1063410",
    "end": "1071950"
  },
  {
    "text": "the thing was this is pretty interesting because me and Matias was looking at",
    "start": "1071950",
    "end": "1077270"
  },
  {
    "text": "this the last year and there was also another guy called file descriptor which is also like he looks for bugs in",
    "start": "1077270",
    "end": "1083240"
  },
  {
    "text": "browsers and both of us was looking at this in the same way and I I'm pretty sure so I'm not gonna take away the",
    "start": "1083240",
    "end": "1090920"
  },
  {
    "text": "credits from him as well here but but the thing we looked at and we realized was that any web site on your domain can",
    "start": "1090920",
    "end": "1099440"
  },
  {
    "text": "use this manifest and if you point it to a manifest and say fallback you can",
    "start": "1099440",
    "end": "1107450"
  },
  {
    "text": "define what paths in the fallback that should be used in this case there's a",
    "start": "1107450",
    "end": "1112520"
  },
  {
    "text": "dot there but the dot could actually be like a front slash and that would mean everything on this whole domain and if",
    "start": "1112520",
    "end": "1120650"
  },
  {
    "text": "you combine this and I will try to explain exactly what happens here but but remember that the fallback is used",
    "start": "1120650",
    "end": "1127240"
  },
  {
    "text": "when the content or resource is inaccessible so the first approach here",
    "start": "1127240",
    "end": "1132650"
  },
  {
    "text": "to how do we make content inaccessible the whole attack method here is that if",
    "start": "1132650",
    "end": "1138530"
  },
  {
    "text": "we can run this have this HTML manifest on a website we can install an app cache",
    "start": "1138530",
    "end": "1145580"
  },
  {
    "text": "there the app cache would all would make sure that every inaccessible file has a",
    "start": "1145580",
    "end": "1151580"
  },
  {
    "text": "fallback and the fallback is to us meaning if we can make all the files the",
    "start": "1151580",
    "end": "1157970"
  },
  {
    "text": "file URLs inaccessible for the user we can make them trigger the fallback which",
    "start": "1157970",
    "end": "1163280"
  },
  {
    "text": "we control by installing the manifest to their to their browser and and give the",
    "start": "1163280",
    "end": "1168320"
  },
  {
    "text": "data to us so we get the URL that they actually want to want to request sounds sounds crazy right but but it it",
    "start": "1168320",
    "end": "1175070"
  },
  {
    "text": "actually works the reason the first attack is like how do we make every content on a domain inaccessible and the",
    "start": "1175070",
    "end": "1183470"
  },
  {
    "text": "thing is there's something called like a cookie stuffing or a cookie bump and the whole idea with it is that you on the",
    "start": "1183470",
    "end": "1190100"
  },
  {
    "start": "1186000",
    "end": "1186000"
  },
  {
    "text": "client-side with a JavaScript sets a very very very very long cookie or a lot",
    "start": "1190100",
    "end": "1195740"
  },
  {
    "text": "of cookies so this is like ten thousand of thousand",
    "start": "1195740",
    "end": "1201280"
  },
  {
    "text": "characters long cookies and when you do this mostly most of the time if you",
    "start": "1201280",
    "end": "1208070"
  },
  {
    "text": "request the same domain after this it will say five hundred this is the real",
    "start": "1208070",
    "end": "1213350"
  },
  {
    "text": "request header is too large so that's the first idea we can actually if we",
    "start": "1213350",
    "end": "1218539"
  },
  {
    "text": "have a XSS on a domain we can actually do a cookie stuffing and make them not",
    "start": "1218539",
    "end": "1224360"
  },
  {
    "text": "be able to access the website and the thing is okay you need an XSS but then",
    "start": "1224360",
    "end": "1230480"
  },
  {
    "text": "game over right no but we're not attacking their main website here we're attacking their sandbox domain their",
    "start": "1230480",
    "end": "1237950"
  },
  {
    "text": "user content com domain they're at Amazon AWS domain we can't we're",
    "start": "1237950",
    "end": "1244340"
  },
  {
    "text": "attacking their sandbox we're attacking something that is just outside of the things that they care about but that",
    "start": "1244340",
    "end": "1250490"
  },
  {
    "text": "contains all the content everybody else cares about so the bug that we found",
    "start": "1250490",
    "end": "1255980"
  },
  {
    "start": "1255000",
    "end": "1255000"
  },
  {
    "text": "that was existing in every browser was basically that if you would have an HTML",
    "start": "1255980",
    "end": "1261950"
  },
  {
    "text": "file under a path of a let's say User Content domain.com which is like not",
    "start": "1261950",
    "end": "1269210"
  },
  {
    "text": "really the same thing as the main domain but as soon as you download something from the main domain you download data",
    "start": "1269210",
    "end": "1275570"
  },
  {
    "text": "from the sandbox domain it's a very common and good way of like we don't want to host content on our like Acme",
    "start": "1275570",
    "end": "1283700"
  },
  {
    "text": "com so we have Acme User Content com to isolate the user content from the live",
    "start": "1283700",
    "end": "1289070"
  },
  {
    "text": "site but basically if I could run XSS on that and nobody cares about an XSS on",
    "start": "1289070",
    "end": "1294440"
  },
  {
    "text": "our sandbox domain when I use the content domain that's like expected almost if I could run an HTML a website",
    "start": "1294440",
    "end": "1301130"
  },
  {
    "text": "that I can install a manifest that manifest would point to a fallback file",
    "start": "1301130",
    "end": "1306140"
  },
  {
    "text": "and that fallback a file will take the URL it's on and ping my host with it and",
    "start": "1306140",
    "end": "1313030"
  },
  {
    "text": "I will say that it would apply to all the protocols and I will also install",
    "start": "1313030",
    "end": "1319309"
  },
  {
    "text": "the cookie bombing and the thing was",
    "start": "1319309",
    "end": "1324380"
  },
  {
    "start": "1324000",
    "end": "1324000"
  },
  {
    "text": "when I reread the doc specification I was like because this was not expected to do and I will show you how it",
    "start": "1324380",
    "end": "1330350"
  },
  {
    "text": "actually like on our real website so they said like manifest can only specify fall",
    "start": "1330350",
    "end": "1336740"
  },
  {
    "text": "backs that are in the same path as the manifest itself and that was a very",
    "start": "1336740",
    "end": "1342350"
  },
  {
    "text": "stupid description because what we could do was basically to say the manifest is",
    "start": "1342350",
    "end": "1348620"
  },
  {
    "text": "here but I want to fall back of the on of the whole domain so even though I have a user path like user 1 2 3 4 I",
    "start": "1348620",
    "end": "1355910"
  },
  {
    "text": "could say but to fall back for the whole domain should be this specific file and that is allowed during this",
    "start": "1355910",
    "end": "1361549"
  },
  {
    "text": "specification because this one says the manifest should be next to the the one installing the manifest which is which",
    "start": "1361549",
    "end": "1368030"
  },
  {
    "text": "is this so this was confusing and could mean the path to default back and that",
    "start": "1368030",
    "end": "1373280"
  },
  {
    "text": "was what every browser thought and now you're like what the hell is he talking about what is this how does this work so",
    "start": "1373280",
    "end": "1380419"
  },
  {
    "text": "I will try to show you this is actually a live demo from Dropbox and this was",
    "start": "1380419",
    "end": "1386150"
  },
  {
    "start": "1381000",
    "end": "1381000"
  },
  {
    "text": "patched early last year and I will try",
    "start": "1386150",
    "end": "1391340"
  },
  {
    "text": "to show you so the problem is I can't really I can't really do it on the",
    "start": "1391340",
    "end": "1397309"
  },
  {
    "text": "website today because it's not there anymore so I will tell you briefly what's happened here",
    "start": "1397309",
    "end": "1402530"
  },
  {
    "text": "Dropbox had something that that is called Dropbox User Content and you",
    "start": "1402530",
    "end": "1407900"
  },
  {
    "text": "could basically host like stupid websites there but they realized like okay have an XSS on Dropbox User Content",
    "start": "1407900",
    "end": "1414080"
  },
  {
    "text": "is pretty bad so we'll try to prevent that so whenever you went to a HTML website it will download but they forgot",
    "start": "1414080",
    "end": "1421700"
  },
  {
    "text": "that XML can be turned into HTML so I found that you can still like put a",
    "start": "1421700",
    "end": "1426740"
  },
  {
    "text": "website on Dropbox User Content with an XML file XML files could install the app",
    "start": "1426740",
    "end": "1432590"
  },
  {
    "text": "cache so what happened was I made this public URL when you go to it it will",
    "start": "1432590",
    "end": "1440210"
  },
  {
    "text": "install the app cache and manifest the manifest will also run JavaScript installing the cookie bomb so everything",
    "start": "1440210",
    "end": "1447140"
  },
  {
    "text": "on Dropbox User Content will be unavailable for the user and as soon as",
    "start": "1447140",
    "end": "1452540"
  },
  {
    "text": "you go to the real Dropbox and press download what happens you get redirected to the Dropbox User Content which is the",
    "start": "1452540",
    "end": "1459530"
  },
  {
    "text": "one I'm installed the app cache on and I get all the URLs you're trying to download from",
    "start": "1459530",
    "end": "1464730"
  },
  {
    "text": "from Dropbox so that's I will try to show you in the flow what's going on here so this I'm showing the install",
    "start": "1464730",
    "end": "1471600"
  },
  {
    "text": "installation on manna-fest you can see the manifest there and you go to it and it actually installs the manifest and it",
    "start": "1471600",
    "end": "1478049"
  },
  {
    "text": "says in the console the thing is now if I go to a URL anywhere I will just alert",
    "start": "1478049",
    "end": "1485280"
  },
  {
    "text": "them and say I took your URL so going to the real Dropbox anywhere like two days",
    "start": "1485280",
    "end": "1492059"
  },
  {
    "text": "later and pressing download my script is trigger so this is not using a like this",
    "start": "1492059",
    "end": "1498750"
  },
  {
    "text": "is not a store XSS or anything it's just I'm installing this old legacy idea and this is my website showing that I logged",
    "start": "1498750",
    "end": "1505200"
  },
  {
    "text": "the file that I could download and since these were like one-time usage only URLs",
    "start": "1505200",
    "end": "1511650"
  },
  {
    "text": "but due to the fallback there the victim never used the link so I could just take",
    "start": "1511650",
    "end": "1516809"
  },
  {
    "text": "the link and download it myself so the whole bug that I sent to to Dropbox was basically I could run XML on download",
    "start": "1516809",
    "end": "1524610"
  },
  {
    "text": "drop drop box you see content as HTML that's a bad thing I could install a",
    "start": "1524610",
    "end": "1531299"
  },
  {
    "text": "manifest with an XML which is like of course it's exactly like HTML so it's",
    "start": "1531299",
    "end": "1536370"
  },
  {
    "text": "weird but I can stall the manifest from a path through the root of the website",
    "start": "1536370",
    "end": "1541740"
  },
  {
    "text": "and any file downloaded from Dropbox would use default back XML HTML page due",
    "start": "1541740",
    "end": "1547320"
  },
  {
    "text": "to the cookie bombing which would log the current URL to my external logging website and every every secret link",
    "start": "1547320",
    "end": "1554669"
  },
  {
    "text": "would be leaked to the attacker they paid $12,000 like that was the cool",
    "start": "1554669",
    "end": "1560370"
  },
  {
    "text": "thing with this it had no expiration app cache it's a legacy and I'd like serve",
    "start": "1560370",
    "end": "1568049"
  },
  {
    "text": "like it's like serviceworkers little brother or like old father I don't know but it's like the legacy version of",
    "start": "1568049",
    "end": "1574940"
  },
  {
    "text": "service workers and app cache did never expire unless you told it to so you",
    "start": "1574940",
    "end": "1581730"
  },
  {
    "text": "could basically have this silently running there for forever until they like wipe their whole cache or website",
    "start": "1581730",
    "end": "1588750"
  },
  {
    "text": "cache the cool thing also was that the above browsers did stuff so they said",
    "start": "1588750",
    "end": "1594750"
  },
  {
    "text": "like okay Dropbox user content should not have any more XML jemelle websites we're gonna remove the",
    "start": "1594750",
    "end": "1600870"
  },
  {
    "text": "whole functionality of public directories on Dropbox which was pretty interesting and they coordinated",
    "start": "1600870",
    "end": "1607260"
  },
  {
    "text": "together with me and Matias to every browser to make sure that all the browsers were mitigated they mitigated",
    "start": "1607260",
    "end": "1614160"
  },
  {
    "text": "one thing and that was that fallback cannot be installed on the root of a",
    "start": "1614160",
    "end": "1619170"
  },
  {
    "text": "domain from a path and if you see that you can basically think like this okay",
    "start": "1619170",
    "end": "1626190"
  },
  {
    "text": "this means that this bug is still there it's just that it's been mitigated to not break out of a path in the URL and",
    "start": "1626190",
    "end": "1635660"
  },
  {
    "text": "they're all trying to deprecated app cache it's probably gonna take a bunch of more years to do that and Dropbox",
    "start": "1635660",
    "end": "1642150"
  },
  {
    "text": "actually fixed so they have like random subdomains for user files which prevents the whole thing so all the browser's fix",
    "start": "1642150",
    "end": "1647940"
  },
  {
    "text": "that they paid a bunch of like but like browsers actually pay bounties as well",
    "start": "1647940",
    "end": "1653160"
  },
  {
    "text": "which is quite cool this was just our research coming up out of our out of nowhere so that was pretty cool but app",
    "start": "1653160",
    "end": "1659430"
  },
  {
    "text": "cache phones are still possible and the requirements to attack someone with this is that you need HTTPS which is like",
    "start": "1659430",
    "end": "1666390"
  },
  {
    "text": "obvious of course why why not but that's",
    "start": "1666390",
    "end": "1672030"
  },
  {
    "text": "not a problem and files uploaded needs to be able to run HTML meaning this",
    "start": "1672030",
    "end": "1677520"
  },
  {
    "text": "could be a sandbox domain or anywhere and if you can run HTML on it you can",
    "start": "1677520",
    "end": "1682920"
  },
  {
    "text": "install a manifest and the files could be on an isolated sandbox domain meaning",
    "start": "1682920",
    "end": "1688590"
  },
  {
    "text": "you can someone maybe says we don't care about an XSS on this domain because this",
    "start": "1688590",
    "end": "1694830"
  },
  {
    "text": "domain is actually our sandbox domain we don't care about it but if people are downloading stuff from the production",
    "start": "1694830",
    "end": "1701910"
  },
  {
    "text": "website from the sandbox domain and you can steal that content I think they're they gonna care absolutely and the",
    "start": "1701910",
    "end": "1710550"
  },
  {
    "text": "interesting is that the attack you know need to do is that you need to be in the same directory as other users so if you",
    "start": "1710550",
    "end": "1717510"
  },
  {
    "text": "have like a bucket upload thing and you upload user content to the same path in",
    "start": "1717510",
    "end": "1723270"
  },
  {
    "text": "that bucket so multiple users content are in the same directory you're doing it wrong and this is one of the reasons",
    "start": "1723270",
    "end": "1729900"
  },
  {
    "text": "why service workers are appcache piggy bra okay so the little brother was up here",
    "start": "1729900",
    "end": "1735410"
  },
  {
    "start": "1732000",
    "end": "1732000"
  },
  {
    "text": "whatever this relation here okay is like hard for me so but the service workers are similar in terms of how to exploit",
    "start": "1735410",
    "end": "1742730"
  },
  {
    "text": "them but they have the restriction that you can never install a service worker if the service worker is in a path so",
    "start": "1742730",
    "end": "1750800"
  },
  {
    "text": "service workers needs to be installed from the root of our domain so that means that if you have a if you're using",
    "start": "1750800",
    "end": "1757940"
  },
  {
    "text": "an s3 bucket for example to host your content and your sandboxing it but everybody can upload upload files to the",
    "start": "1757940",
    "end": "1764960"
  },
  {
    "text": "root of the bucket so the bucket is there's no paths in the bucket it's just user content inside there someone can if",
    "start": "1764960",
    "end": "1772310"
  },
  {
    "text": "they can upload like arbitrary files they can install a serviceworker which",
    "start": "1772310",
    "end": "1777320"
  },
  {
    "text": "is like just as bad you can you can make like secret requests as the user if it",
    "start": "1777320",
    "end": "1782600"
  },
  {
    "text": "accesses any of the files you can also do like a fallback thing and you can steal the URL so it's just as bad as app",
    "start": "1782600",
    "end": "1789170"
  },
  {
    "text": "cache but it has a restriction that you need to be do you need to put content on the root of the domain and going into",
    "start": "1789170",
    "end": "1796790"
  },
  {
    "text": "this talking about like bucket uploads and stuff I want to move into the upload policies this is a this is a really",
    "start": "1796790",
    "end": "1805220"
  },
  {
    "text": "really interesting technology the reason why it's interesting is that if when you",
    "start": "1805220",
    "end": "1812990"
  },
  {
    "text": "started with web and building a web page back in the days and you needed a file",
    "start": "1812990",
    "end": "1818690"
  },
  {
    "text": "upload you basically thought like okay I will upload a file and I will just keep it in a directory outside on my",
    "start": "1818690",
    "end": "1825140"
  },
  {
    "text": "application and hopefully that works like cross my fingers and then a bunch of cloud service is starting to offer",
    "start": "1825140",
    "end": "1832430"
  },
  {
    "text": "you ways to upload files to them and they had an infinite storage like it was",
    "start": "1832430",
    "end": "1838310"
  },
  {
    "text": "like just put files there no problem will solve it and you're like this is awesome I don't need to change disk or",
    "start": "1838310",
    "end": "1844490"
  },
  {
    "text": "increase my disk space anymore so you move to it but the way you moved it to not build your to not like change your",
    "start": "1844490",
    "end": "1851600"
  },
  {
    "text": "application too much what's that you got the file and then you connect it to s3 and moved it over to them that meaning",
    "start": "1851600",
    "end": "1858170"
  },
  {
    "text": "that instead of taking ten seconds to get the file it's taking 20 seconds because you need to send the file away",
    "start": "1858170",
    "end": "1864350"
  },
  {
    "text": "as from your site to Westry and this content providers or like Amazon s3 and",
    "start": "1864350",
    "end": "1871850"
  },
  {
    "text": "Google cloud they realized like this is probably a bad thing what if we sign a policy and or the user that has the",
    "start": "1871850",
    "end": "1880190"
  },
  {
    "text": "website signs a policy and gives the policy with the signature to the user and if the user uploads directly to us",
    "start": "1880190",
    "end": "1888530"
  },
  {
    "text": "can't we validate the policy then and just allow the upload to be made",
    "start": "1888530",
    "end": "1893600"
  },
  {
    "text": "directly to us that means that you can just upload directly to the to the cloud service and they're like oh this is an",
    "start": "1893600",
    "end": "1899300"
  },
  {
    "text": "awesome idea that should work the problem is so it's actually secure and",
    "start": "1899300",
    "end": "1904400"
  },
  {
    "text": "faster that's awesome but it's super easy to do wrong there's so many ways to actually not do this in a good way so",
    "start": "1904400",
    "end": "1911300"
  },
  {
    "text": "first of the ways it's like this is how it looks like to begin with basically",
    "start": "1911300",
    "end": "1918410"
  },
  {
    "text": "you do a post request to an Amazon AWS bucket inside the request you have a",
    "start": "1918410",
    "end": "1923570"
  },
  {
    "text": "policy and you have AWS access key ID which is like the one that was signing",
    "start": "1923570",
    "end": "1929660"
  },
  {
    "text": "the the policy and right in the bottom you can't see it it's like here you have",
    "start": "1929660",
    "end": "1935300"
  },
  {
    "text": "a signature and the signature is basically used to make sure that the whole request is intact so the only",
    "start": "1935300",
    "end": "1942530"
  },
  {
    "text": "thing that is different is the content because you can sign the policy with the content so the policy tries to explain",
    "start": "1942530",
    "end": "1948320"
  },
  {
    "text": "where the file should be uploaded and how the properties of the file is so",
    "start": "1948320",
    "end": "1955340"
  },
  {
    "start": "1949000",
    "end": "1949000"
  },
  {
    "text": "that means that this policy basically says you were allowed until the 4th of",
    "start": "1955340",
    "end": "1960650"
  },
  {
    "text": "March this year you're allowed to upload to example uploads with a file name that",
    "start": "1960650",
    "end": "1966710"
  },
  {
    "text": "starts with this prefix the file will be able to be read read by anybody when",
    "start": "1966710",
    "end": "1974809"
  },
  {
    "text": "you're done it should redirect redirect to this domain to this URL the content",
    "start": "1974809",
    "end": "1980900"
  },
  {
    "text": "type needs to start with nothing and the content length range of the file that",
    "start": "1980900",
    "end": "1986390"
  },
  {
    "text": "your uploads needs to be between 0 and 5 - 4 - 8 8 if your content together with",
    "start": "1986390",
    "end": "1993320"
  },
  {
    "text": "this policy is correct the file will be uploaded that's how easy it is",
    "start": "1993320",
    "end": "1998630"
  },
  {
    "text": "the problem is basically every line in this policy you can make mistakes that",
    "start": "1998630",
    "end": "2003970"
  },
  {
    "text": "is like not great at all the first thing that is the thing we mentioned before is",
    "start": "2003970",
    "end": "2010960"
  },
  {
    "text": "like when you have a key in the policy and you said it needs to start with something and you don't have a pass",
    "start": "2010960",
    "end": "2018340"
  },
  {
    "start": "2011000",
    "end": "2011000"
  },
  {
    "text": "separator we can play stuff in in the root folder I remember what I just mentioned about",
    "start": "2018340",
    "end": "2023770"
  },
  {
    "text": "service workers in appcache and depend this depends of course on the other",
    "start": "2023770",
    "end": "2029070"
  },
  {
    "text": "other mistakes in this one but this is a first step of actually getting to kind",
    "start": "2029070",
    "end": "2037060"
  },
  {
    "text": "of claim a bunch of stuff in this bucket so path separated is one thing that",
    "start": "2037060",
    "end": "2043720"
  },
  {
    "text": "needs to be there another thing is like if you have a starch with key and doesn't contain anything we can replace",
    "start": "2043720",
    "end": "2051700"
  },
  {
    "text": "anything in the bucket it's quite like you when you see it you're like of course why wouldn't you that's the same",
    "start": "2051700",
    "end": "2058360"
  },
  {
    "text": "thing if you have the same prefix of all the files of course one person can",
    "start": "2058360",
    "end": "2064658"
  },
  {
    "text": "override another one's file because it s3 doesn't care about the file already being there it will just like okay this",
    "start": "2064659",
    "end": "2071770"
  },
  {
    "text": "is the new file and replace it another thing is content-type uses empty",
    "start": "2071770",
    "end": "2078010"
  },
  {
    "text": "starts with and content-disposition and this is what i'm mentioning like so if we have starts with content type and",
    "start": "2078010",
    "end": "2085179"
  },
  {
    "text": "it's empty you can put of course whatever content type you want and now we can like we have Canadian HTML",
    "start": "2085179",
    "end": "2091898"
  },
  {
    "text": "website we can have like run JavaScript on it or or whatever but the thing is",
    "start": "2091899",
    "end": "2096940"
  },
  {
    "text": "that people don't understand is that even though you have content type uses starts with and you force it to be an",
    "start": "2096940",
    "end": "2105490"
  },
  {
    "text": "image JPEG you can actually fool a bunch of browsers that if you give them an",
    "start": "2105490",
    "end": "2110980"
  },
  {
    "text": "invalid image type but then like use a semicolon and give them a proper mime",
    "start": "2110980",
    "end": "2116350"
  },
  {
    "text": "they will use the proper mind instead so this one if you have this content type on a file today in a browser you will",
    "start": "2116350",
    "end": "2123340"
  },
  {
    "text": "get it back to you as text HTML meaning that the starts with on the content type",
    "start": "2123340",
    "end": "2128890"
  },
  {
    "text": "doesn't mean anything it's like whatever you want so even though you're specifying the",
    "start": "2128890",
    "end": "2134530"
  },
  {
    "text": "policy that this kind of makes sense the mind type needs to be a hundred percent strict because you can fool the browser",
    "start": "2134530",
    "end": "2141610"
  },
  {
    "text": "to make stupid assumptions that this should not be image it should be HTML",
    "start": "2141610",
    "end": "2147400"
  },
  {
    "text": "instead another way to do this without having the policies in there is called",
    "start": "2147400",
    "end": "2153220"
  },
  {
    "text": "Amazon or AWS STS and it's like secret token service or similar it's no service",
    "start": "2153220",
    "end": "2159940"
  },
  {
    "start": "2154000",
    "end": "2154000"
  },
  {
    "text": "token service I think it's weird name but the thing is with this is you can",
    "start": "2159940",
    "end": "2164980"
  },
  {
    "text": "generate temporary credentials client-side which is quite cool it's it",
    "start": "2164980",
    "end": "2170350"
  },
  {
    "text": "like it's based on I am so you write the I am role and where you basically write",
    "start": "2170350",
    "end": "2176230"
  },
  {
    "text": "the I am role sign it with another use with the access key and then there's",
    "start": "2176230",
    "end": "2183370"
  },
  {
    "text": "like a AWS STS that you can request to get service tokens which is following so",
    "start": "2183370",
    "end": "2189790"
  },
  {
    "text": "it's the basically the exact same thing as with as with s3 policies but the the",
    "start": "2189790",
    "end": "2197440"
  },
  {
    "text": "only difference is that you can't see the policy that it's using ask the user",
    "start": "2197440",
    "end": "2202810"
  },
  {
    "text": "so client-side you can't see that and kind of makes sense because that would like okay ec2 is accessible now I can",
    "start": "2202810",
    "end": "2209080"
  },
  {
    "text": "access whatever so it's tries to use like security by obscurity and the whole way to not to not do it it's like do",
    "start": "2209080",
    "end": "2217180"
  },
  {
    "text": "never ever use wildcards in if you're doing one of these roles and using this",
    "start": "2217180",
    "end": "2223270"
  },
  {
    "text": "client-side way of generating them never do s3 or ec2 or similar be hundred percent specific and realize that the",
    "start": "2223270",
    "end": "2230950"
  },
  {
    "text": "user can generate how much credentials they want for this specific thing the whole way it works is that as I said you",
    "start": "2230950",
    "end": "2238390"
  },
  {
    "text": "point it to a web identity or no you create a web identity sorry and then you",
    "start": "2238390",
    "end": "2245170"
  },
  {
    "text": "basically have a web identity token that you're generating and this is like to try to hide the policy but in the end",
    "start": "2245170",
    "end": "2251980"
  },
  {
    "text": "you can sign something that specified was what role you should use and by",
    "start": "2251980",
    "end": "2256990"
  },
  {
    "text": "fiddling around with that dance you end up with having this one in the response",
    "start": "2256990",
    "end": "2262390"
  },
  {
    "text": "basically access key secret access key and the session token so using these we can actually use them",
    "start": "2262390",
    "end": "2268570"
  },
  {
    "text": "in AWS CLI we can just like use these tokens we got back and then we can just play around and see what we got so we",
    "start": "2268570",
    "end": "2274630"
  },
  {
    "text": "can like oh we have access to our s3 everything and in this case they had s 3",
    "start": "2274630",
    "end": "2280510"
  },
  {
    "text": "star and ec2 star and we actually found this on on this life hacking event in",
    "start": "2280510",
    "end": "2286180"
  },
  {
    "text": "San Francisco for for a big company and they were like ok this is like you have",
    "start": "2286180",
    "end": "2291370"
  },
  {
    "text": "everything so we're gonna pay you some money for it another way to like another",
    "start": "2291370",
    "end": "2298120"
  },
  {
    "text": "vulnerable flow is that the in this case it was Google Cloud so there's no difference between this these two",
    "start": "2298120",
    "end": "2305560"
  },
  {
    "text": "services in this case basically you posted the to their own website and said",
    "start": "2305560",
    "end": "2311590"
  },
  {
    "text": "oh can you please give me a sign URL please and you give it a file name and a content type and it would give you back",
    "start": "2311590",
    "end": "2318300"
  },
  {
    "text": "storage api's com storage like a storage Google API and it will give you a sign",
    "start": "2318300",
    "end": "2323980"
  },
  {
    "text": "URL the cool thing was you could just select whatever file name you wanted and you could override any file that someone",
    "start": "2323980",
    "end": "2331240"
  },
  {
    "text": "else had and you can just ask for any file that you want and you would give it",
    "start": "2331240",
    "end": "2336850"
  },
  {
    "text": "give it yeah or they would like give it to you so you could basically traverse and that",
    "start": "2336850",
    "end": "2342520"
  },
  {
    "text": "was what I did I could traverse like invoices and stuff and I showed them though I can probably access all your invoices",
    "start": "2342520",
    "end": "2347740"
  },
  {
    "text": "so they were like okay that's like everything we got weird invoicing service so this is this is not great at",
    "start": "2347740",
    "end": "2353740"
  },
  {
    "text": "all so the whole idea with this is like your own policy lobby this is like the worst thing this is like don't learn",
    "start": "2353740",
    "end": "2360130"
  },
  {
    "text": "anything from this slides I'm gonna show you now don't learn of course but verse",
    "start": "2360130",
    "end": "2365350"
  },
  {
    "text": "like don't do this please don't do this at home goal is to reach the bucket root like that's the idea the thing is with",
    "start": "2365350",
    "end": "2371440"
  },
  {
    "start": "2368000",
    "end": "2368000"
  },
  {
    "text": "these services is that if you can ask them the website like please give me a",
    "start": "2371440",
    "end": "2376450"
  },
  {
    "text": "sign URL and they would give you a signed URL of the root of their bucket",
    "start": "2376450",
    "end": "2381490"
  },
  {
    "text": "like the first directory in their bucket you will get the file listing meaning",
    "start": "2381490",
    "end": "2387790"
  },
  {
    "text": "you could basically see everything that is in the bucket and then when you see that even though they're not accessible",
    "start": "2387790",
    "end": "2394000"
  },
  {
    "text": "by anybody you can ask for a signed URL for that file so it's like a",
    "start": "2394000",
    "end": "2399240"
  },
  {
    "text": "more complicated way of doing a file listing structure in on our website like",
    "start": "2399240",
    "end": "2404310"
  },
  {
    "text": "they forgot to to remove the file listing on our on your upload folder this is exactly the same vulnerability",
    "start": "2404310",
    "end": "2410460"
  },
  {
    "text": "just that now they're thinking we're isolated that everything is good we're using this cloud service so writing your",
    "start": "2410460",
    "end": "2416730"
  },
  {
    "text": "own policy logic I've seen scary mistakes and this brings us back to like the 90s this is path traversal",
    "start": "2416730",
    "end": "2424530"
  },
  {
    "text": "welcome back path traversal like where have you been so the whole idea is like if you ask the website please get me a",
    "start": "2424530",
    "end": "2431940"
  },
  {
    "text": "signed URL for an image and you said can you please give me an image for dot dot",
    "start": "2431940",
    "end": "2437099"
  },
  {
    "text": "slash dot slash dot slash and what happens is that that one will just try to normalize the path you gave it and",
    "start": "2437099",
    "end": "2443820"
  },
  {
    "text": "just yeah yeah here's a here's a signed URL for the for the bucket and then you",
    "start": "2443820",
    "end": "2449220"
  },
  {
    "text": "have full read access to every object and you can also list the files another example was basically you post to s3 URL",
    "start": "2449220",
    "end": "2457830"
  },
  {
    "text": "signature but it was actually shaking a bunch of stuff like what the main you have and and like how can you like what",
    "start": "2457830",
    "end": "2466020"
  },
  {
    "text": "you cannot trick us but I was able to find a bypass so as you see here it actually points to s3 Amazon AWS slash",
    "start": "2466020",
    "end": "2473580"
  },
  {
    "text": "slash example better but the thing is that's exactly the same as the root so the Brooke bucket is called example",
    "start": "2473580",
    "end": "2480270"
  },
  {
    "text": "better and I just pointed to that so I could full read access to every object and to every every listing another",
    "start": "2480270",
    "end": "2487200"
  },
  {
    "text": "example like I'm not gonna stop so s3 file and you tell please here's a random",
    "start": "2487200",
    "end": "2493109"
  },
  {
    "text": "key and here's also an s3 key and I'm like okay s3 k slash what do you think",
    "start": "2493109",
    "end": "2498450"
  },
  {
    "text": "about that and he will say oh that's awesome I'm gonna create that so just because you used a random key X X 11 I'm",
    "start": "2498450",
    "end": "2505920"
  },
  {
    "text": "gonna put a URL on secured on example.com slash files like slash X X",
    "start": "2505920",
    "end": "2511530"
  },
  {
    "text": "11 and that one is gonna redirect you to the file called slash so now I have full",
    "start": "2511530",
    "end": "2517109"
  },
  {
    "text": "read access to every object again this bucket was crazy though because this was",
    "start": "2517109",
    "end": "2522660"
  },
  {
    "text": "a company that had one bucket for everything and I have like after my",
    "start": "2522660",
    "end": "2529109"
  },
  {
    "text": "research on that bucket I had a two gigabyte file with only the file listing it was crazy and",
    "start": "2529109",
    "end": "2535650"
  },
  {
    "text": "during my research like there was a bunch of companies that just exposed all their content for all their users you",
    "start": "2535650",
    "end": "2542100"
  },
  {
    "start": "2538000",
    "end": "2538000"
  },
  {
    "text": "could either delete everything modify it as anything or just download anything and one of these companies the ones",
    "start": "2542100",
    "end": "2548730"
  },
  {
    "text": "having the largest pockets they were like okay here's twenty five thousand dollars like we like this is basically",
    "start": "2548730",
    "end": "2555810"
  },
  {
    "text": "game over if this was would get out there this content and remember this is",
    "start": "2555810",
    "end": "2561000"
  },
  {
    "text": "a two gigabyte storage file listing like imagine how much content that is in that",
    "start": "2561000",
    "end": "2566190"
  },
  {
    "text": "one moving over to post message post message if you don't know what post",
    "start": "2566190",
    "end": "2572640"
  },
  {
    "text": "message is it's basically like a very convenient way for iframes in on a website or a website opening another",
    "start": "2572640",
    "end": "2580590"
  },
  {
    "text": "website to talk with each other it kind of makes sense with the iframe thing just open a new tab from another browser",
    "start": "2580590",
    "end": "2588030"
  },
  {
    "text": "getting them to talk with each other I don't really agree it's a it's an awesome thing because you can really",
    "start": "2588030",
    "end": "2594150"
  },
  {
    "text": "exploit that one and I will tell you why but the whole idea is that you can send messages between Windows and the",
    "start": "2594150",
    "end": "2601170"
  },
  {
    "text": "different origins the whole way to use post message secure is that you make",
    "start": "2601170",
    "end": "2606720"
  },
  {
    "text": "sure you know who was sending the message so you need to verify the sender every time when you have a scenario",
    "start": "2606720",
    "end": "2614010"
  },
  {
    "text": "where you need to remember to validate people are gonna forget like that's not",
    "start": "2614010",
    "end": "2620400"
  },
  {
    "text": "secure by default that's that's insecure by default so people are gonna miss this",
    "start": "2620400",
    "end": "2625680"
  },
  {
    "text": "thing and this is what happened all the time with post message you probably know what slack is slack has a desktop app",
    "start": "2625680",
    "end": "2633780"
  },
  {
    "text": "but it also has a really good and similar to the desktop web app so a lot",
    "start": "2633780",
    "end": "2639150"
  },
  {
    "text": "of people are using it in the web browser this was my attack victory I wanted to",
    "start": "2639150",
    "end": "2644340"
  },
  {
    "text": "attack someone using the the web app and slack has a bug bounty so I was thinking",
    "start": "2644340",
    "end": "2650100"
  },
  {
    "text": "let's do it windows may post message actually I'm like emphasizing safely",
    "start": "2650100",
    "end": "2657000"
  },
  {
    "text": "which is not really true but it's more safe than probably like I don't know",
    "start": "2657000",
    "end": "2662430"
  },
  {
    "text": "sending fragments or whatever like it's it's not really safe I just removed that the whole way that",
    "start": "2662430",
    "end": "2669930"
  },
  {
    "text": "it works is that you can actually watch in the browser you can go to elements and event listeners and you will have a",
    "start": "2669930",
    "end": "2675599"
  },
  {
    "text": "section called message and you can go inside there and see all the listeners of the current window you're in the",
    "start": "2675599",
    "end": "2683339"
  },
  {
    "text": "whole way it works this is an example from from a function is that you said",
    "start": "2683339",
    "end": "2688589"
  },
  {
    "start": "2685000",
    "end": "2685000"
  },
  {
    "text": "add event listener message point to this function this function will then as soon",
    "start": "2688589",
    "end": "2693900"
  },
  {
    "text": "as a message is sent we'll get an event and this function as you see this was",
    "start": "2693900",
    "end": "2699000"
  },
  {
    "text": "slacks own post message you can see that the thing that that receiver of the",
    "start": "2699000",
    "end": "2705390"
  },
  {
    "text": "message needs to Val validate is something called origin and the origin is telling you what domain",
    "start": "2705390",
    "end": "2713130"
  },
  {
    "text": "it's sent from and looking at this function we can easily see that it checks if the data a property exists and",
    "start": "2713130",
    "end": "2719700"
  },
  {
    "text": "the message type exists and then it's gonna move move further and then it's",
    "start": "2719700",
    "end": "2724829"
  },
  {
    "text": "going to make sure that another data field you sent is matching the call window which is there when you're gonna",
    "start": "2724829",
    "end": "2731640"
  },
  {
    "text": "make a call so you see that and like there's no origin check at all so",
    "start": "2731640",
    "end": "2736740"
  },
  {
    "text": "basically my website can open slacks web site and then send the message and I",
    "start": "2736740",
    "end": "2742890"
  },
  {
    "text": "could control all the commands in this list so I started looking at that and like this is super exciting what can I",
    "start": "2742890",
    "end": "2748680"
  },
  {
    "text": "do I could probably get like something to steal data the first thing I saw it like I can send notifications like",
    "start": "2748680",
    "end": "2754650"
  },
  {
    "text": "that's so boring like you kidding right to that guy and you will get the same attack so I was like okay this this",
    "start": "2754650",
    "end": "2762150"
  },
  {
    "text": "sucks I want something else I want something more fun so I saw this",
    "start": "2762150",
    "end": "2767250"
  },
  {
    "start": "2767000",
    "end": "2767000"
  },
  {
    "text": "functionality and also in the cold the call function and the call window and I wonder what that was so I pressed on it",
    "start": "2767250",
    "end": "2773910"
  },
  {
    "text": "and an open a new window and it was opening on like if you have a blah blah dot select or comment open on blah blah",
    "start": "2773910",
    "end": "2780420"
  },
  {
    "text": "slacked of course last call this one also had a post message because I went",
    "start": "2780420",
    "end": "2787170"
  },
  {
    "text": "went through the regular ones and they were like super boring you could basically notification was the coolest",
    "start": "2787170",
    "end": "2792299"
  },
  {
    "text": "thing you could do but looking at this call window I found that it was using a",
    "start": "2792299",
    "end": "2797309"
  },
  {
    "text": "quite similar code but but the difference that it was",
    "start": "2797309",
    "end": "2802750"
  },
  {
    "text": "checking if the message type was sent to the call we know not from the call window but when I started looking at",
    "start": "2802750",
    "end": "2808420"
  },
  {
    "text": "this I saw that there was a bunch of like switch cases depending on the message and I found one that was like",
    "start": "2808420",
    "end": "2814900"
  },
  {
    "start": "2813000",
    "end": "2813000"
  },
  {
    "text": "okay message to call window EMS message and I looked at this function message",
    "start": "2814900",
    "end": "2820480"
  },
  {
    "text": "received and I'm like okay that's a lot of things I can simulate and I started looking at",
    "start": "2820480",
    "end": "2826750"
  },
  {
    "text": "it and like what this is a lot of things so this was just a matter of trying to",
    "start": "2826750",
    "end": "2833109"
  },
  {
    "text": "this what this means is that slack connects to a socket and when it",
    "start": "2833109",
    "end": "2838420"
  },
  {
    "text": "connects to a socket it gets a bunch of messages depending on what's happening in your team and depending on what's",
    "start": "2838420",
    "end": "2843970"
  },
  {
    "text": "happening in your team you get different message types so it has like handlers for all these message type this means",
    "start": "2843970",
    "end": "2849880"
  },
  {
    "text": "that if you get like someone changed the purpose of this channel that this one catches that and make something specific",
    "start": "2849880",
    "end": "2857200"
  },
  {
    "text": "for that thing so in in like in the case of call window the call window could",
    "start": "2857200",
    "end": "2862300"
  },
  {
    "text": "actually show you like you're in a call right now you're in a group called you blah blah blah the thing was I am I",
    "start": "2862300",
    "end": "2872319"
  },
  {
    "text": "started looking at these functions and like I need to find something that looks interesting and I found one called",
    "start": "2872319",
    "end": "2877809"
  },
  {
    "start": "2877000",
    "end": "2877000"
  },
  {
    "text": "reconnect reconnect was awesome because what it did was it take a parameter and",
    "start": "2877809",
    "end": "2882970"
  },
  {
    "text": "then it would use the reconnect URL and as I've said slack uses something called",
    "start": "2882970",
    "end": "2888220"
  },
  {
    "text": "WebSocket and in the WebSocket URL there's something called a token and if",
    "start": "2888220",
    "end": "2893680"
  },
  {
    "text": "you know about token token is like the the precious little combination of your user password and two if a combined it's",
    "start": "2893680",
    "end": "2902470"
  },
  {
    "text": "perfect because you can actually do whatever the user can there's a guy with a horse so when I saw that I was like I",
    "start": "2902470",
    "end": "2913000"
  },
  {
    "text": "need to test milk build my own WebSocket send a message saying please reconnect",
    "start": "2913000",
    "end": "2918730"
  },
  {
    "text": "to my socket instead I made like a super easy ratchet I actually like uh nope and",
    "start": "2918730",
    "end": "2923799"
  },
  {
    "text": "looked for the token parameter wrote this code to like okay now I'm gonna point to my socket instead and I'm gonna",
    "start": "2923799",
    "end": "2931359"
  },
  {
    "text": "steal your token and I started my WebSocket server and I sent a message saying please connect to",
    "start": "2931359",
    "end": "2938680"
  },
  {
    "text": "my domain instead with ports which I'm using and this WebSocket and please",
    "start": "2938680",
    "end": "2943930"
  },
  {
    "text": "reconnect to that one and I will get to token and I was sitting there like no did not work I was like why doesn't it",
    "start": "2943930",
    "end": "2952450"
  },
  {
    "text": "just work so I found another function called goodbye and I was thinking okay",
    "start": "2952450",
    "end": "2958300"
  },
  {
    "text": "so I probably first need to disconnect and reconnect so I need to like fiddle",
    "start": "2958300",
    "end": "2964450"
  },
  {
    "text": "with this so let's do goodbye and then reconnect and I tried no no work so I",
    "start": "2964450",
    "end": "2973240"
  },
  {
    "text": "thought to myself let's just stress it I saw that it was doing stuff it was just not connecting to my URL so I thought to",
    "start": "2973240",
    "end": "2981550"
  },
  {
    "text": "myself let's run a bunch of reconnects but then at the same time run a bunch of",
    "start": "2981550",
    "end": "2988000"
  },
  {
    "text": "goodbyes simultaneously and I just like let's make it crazy and just do all",
    "start": "2988000",
    "end": "2993339"
  },
  {
    "text": "these things at the same time and suddenly we have a token yes we have a token the problem was I wanted to attack",
    "start": "2993339",
    "end": "3000210"
  },
  {
    "text": "more than people that I knew of so if you know about slack you have like a team domain so if I want to send a link",
    "start": "3000210",
    "end": "3007470"
  },
  {
    "text": "to a user and I want him to click on the link I want to attack them that's it I",
    "start": "3007470",
    "end": "3013020"
  },
  {
    "text": "want to attack them automatically but I don't know what team they is they are in right so I've tried this a lot and I",
    "start": "3013020",
    "end": "3020250"
  },
  {
    "text": "figure out there is one called my dot slash which is redirecting you to the",
    "start": "3020250",
    "end": "3026400"
  },
  {
    "text": "one that you're currently in and the cool thing was there I wanted to go to",
    "start": "3026400",
    "end": "3031440"
  },
  {
    "text": "the call window that was the one having the reconnect and a goodbye but the problem was as soon as you went to the",
    "start": "3031440",
    "end": "3037230"
  },
  {
    "text": "call window it would say you found a glitch and the reason is you need to say",
    "start": "3037230",
    "end": "3043349"
  },
  {
    "text": "who you want to call no I was trying at",
    "start": "3043349",
    "end": "3048900"
  },
  {
    "text": "least but you need to specify user ID that you want to call the problem is I don't know your user IDs and but there's",
    "start": "3048900",
    "end": "3056670"
  },
  {
    "text": "a easy trick of that and it's the same regular pikers regular trick in api's if",
    "start": "3056670",
    "end": "3061710"
  },
  {
    "text": "you want to look for users look for me so you take call slash me is a brilliant idea trying to call",
    "start": "3061710",
    "end": "3068700"
  },
  {
    "text": "yourself it would redirect you to this is my land called off me and you will get you the call window which is magic",
    "start": "3068700",
    "end": "3075390"
  },
  {
    "text": "so now we can we can combine this we can redirect the user or make a link this",
    "start": "3075390",
    "end": "3081720"
  },
  {
    "text": "link would go to slack comm slash call slash me as soon as that is done that",
    "start": "3081720",
    "end": "3087870"
  },
  {
    "text": "window will get a bunch of messages it will get like every second two seconds it will get a goodbye and every half",
    "start": "3087870",
    "end": "3093810"
  },
  {
    "text": "second will get to reconnect at the same time I will start a WebSocket somewhere else and just wait for a token and we",
    "start": "3093810",
    "end": "3099960"
  },
  {
    "text": "got it and I was like super happy I actually sent this report on my birthday like that's how I spend my birthday's",
    "start": "3099960",
    "end": "3107010"
  },
  {
    "text": "but it was like happy birthday me called me and like yeah that was weird",
    "start": "3107010",
    "end": "3112020"
  },
  {
    "text": "but I sent them a report like this is a funny weird thing I found like I can steal your xox s which is like token",
    "start": "3112020",
    "end": "3119160"
  },
  {
    "text": "slack tokens of of slack and I can redirect it five hours later this was on",
    "start": "3119160",
    "end": "3125130"
  },
  {
    "text": "a Friday night also Friday night at my birthday I'm sitting at home like I sound like a sad person I'm sorry but",
    "start": "3125130",
    "end": "3130320"
  },
  {
    "text": "that's the truth right we're nerds and five hours later they say we pushed out of fix I looked at the fix and they",
    "start": "3130320",
    "end": "3137250"
  },
  {
    "text": "had like a verify origin URL it was sticking and I looked at this and I'm like this looks pretty smart like they",
    "start": "3137250",
    "end": "3143970"
  },
  {
    "text": "take the origin from the message put puts it inside our anchor link and then",
    "start": "3143970",
    "end": "3149580"
  },
  {
    "text": "check if the hostname matches the current hostname like that's pretty smart like why why couldn't you just compare",
    "start": "3149580",
    "end": "3155700"
  },
  {
    "text": "two strings why would you need to do this advanced thing but they wanted to like they had probably some reason for",
    "start": "3155700",
    "end": "3161580"
  },
  {
    "text": "it and I'm like great job have an awesome weekend and the after the weekend they actually paid like 3000",
    "start": "3161580",
    "end": "3167670"
  },
  {
    "text": "bucks and I was like this is impressive five hours patch awesome patch super nice to work with",
    "start": "3167670",
    "end": "3173310"
  },
  {
    "text": "I made a blog post and it like blew up in the media like oh they're free and the good thing with this like they fixed",
    "start": "3173310",
    "end": "3180390"
  },
  {
    "text": "it in under five hours so they got a bunch of positive press like this could",
    "start": "3180390",
    "end": "3186270"
  },
  {
    "text": "have happened but imagine you see how awesome slack is and a cool is they are and then reddit comes and like that's",
    "start": "3186270",
    "end": "3196200"
  },
  {
    "text": "you can bypass that I'm like what I've just like blogged",
    "start": "3196200",
    "end": "3201810"
  },
  {
    "text": "about it scream like slack is awesome they were doing an awesome thing and suddenly I just like totally exposed",
    "start": "3201810",
    "end": "3208200"
  },
  {
    "text": "them being vulnerable to our bypass he's like yeah if you have a no Laura gene the string is just no so if you have a",
    "start": "3208200",
    "end": "3214400"
  },
  {
    "text": "hrf on a website with just a word no that's on the same domain as it's just a",
    "start": "3214400",
    "end": "3219570"
  },
  {
    "text": "slash null so I tested and I did the same thing I did I like on a data URI",
    "start": "3219570",
    "end": "3224960"
  },
  {
    "text": "and when you send it as I said you get like HRF null the host name is the same as your on because it doesn't leave the",
    "start": "3224960",
    "end": "3231570"
  },
  {
    "text": "website so I get to learn something from from a Reddit user and I actually went",
    "start": "3231570",
    "end": "3237330"
  },
  {
    "text": "back to snacking like I'm really sorry so I'm actually done I'd like to walk",
    "start": "3237330",
    "end": "3242430"
  },
  {
    "start": "3242000",
    "end": "3242000"
  },
  {
    "text": "through it's just a bunch of math but it like we do automation we know that crowdsourcing is a cool thing with it",
    "start": "3242430",
    "end": "3248520"
  },
  {
    "text": "modern doesn't mean modern it means widely used developer and security awareness is awesome so be for me being",
    "start": "3248520",
    "end": "3255180"
  },
  {
    "text": "a developer I can just recommend you to also explore the security field that's it thank you very much I don't know how does questions work",
    "start": "3255180",
    "end": "3270270"
  },
  {
    "text": "here but I don't know if someone has questions they could scream them or or come afterwards I think thank you",
    "start": "3270270",
    "end": "3279050"
  }
]