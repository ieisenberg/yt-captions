[
  {
    "text": "well good morning thanks for coming out I know it's early especially after the",
    "start": "3510",
    "end": "11219"
  },
  {
    "text": "party last night I hope you guys enjoyed Dylan and aligned breakers and Love",
    "start": "11219",
    "end": "16470"
  },
  {
    "text": "Shack I know I did but we're here at NDC so let's let's break some things I want",
    "start": "16470",
    "end": "26339"
  },
  {
    "text": "to look at some security holes that we've had in the git project and how they could have been exploited to",
    "start": "26339",
    "end": "33150"
  },
  {
    "text": "perhaps get into your code real quick introduction my name is Edward Thompson",
    "start": "33150",
    "end": "38969"
  },
  {
    "text": "I'm a program manager at Microsoft I work on the visual studio team Services team my focus is git and version control I'm",
    "start": "38969",
    "end": "47579"
  },
  {
    "text": "a p.m. now so most of my job is spent in Outlook or in PowerPoint but before that",
    "start": "47579",
    "end": "54750"
  },
  {
    "text": "I was actually a developer I worked on get tooling at github at Microsoft I",
    "start": "54750",
    "end": "61109"
  },
  {
    "text": "worked at source gear before that so I've been in version control for a really long time so I've worked on a",
    "start": "61109",
    "end": "66810"
  },
  {
    "text": "variety of version control tools on a variety of platforms but now my focus is",
    "start": "66810",
    "end": "73320"
  },
  {
    "text": "on git I you know Microsoft is pretty much all in on get at this point so",
    "start": "73320",
    "end": "81150"
  },
  {
    "text": "that's that's my day job at night I have a podcast called all things get where we",
    "start": "81150",
    "end": "87330"
  },
  {
    "text": "talk about neat things in the git project including these security vulnerabilities and aside from that I",
    "start": "87330",
    "end": "94560"
  },
  {
    "text": "have more stuff to do at night because I don't like spending all of my time in",
    "start": "94560",
    "end": "100100"
  },
  {
    "text": "Outlook in PowerPoint I'm a maintainer on an open source project called Libya -",
    "start": "100100",
    "end": "106250"
  },
  {
    "text": "we'll talk more about what lib gets who is in just a second but you know high-level overview it's a",
    "start": "106250",
    "end": "113520"
  },
  {
    "text": "a reimplementation of yet so it is a",
    "start": "113520",
    "end": "119100"
  },
  {
    "text": "linkable library that you can use to put get into your application so if you were",
    "start": "119100",
    "end": "126030"
  },
  {
    "text": "building a git client like get crackin or G master and you didn't want to run the git commands on the command line",
    "start": "126030",
    "end": "132560"
  },
  {
    "text": "then Lib Gates who might be a really attractive alternative because it's just a linkable library that you can use and there are a bunch",
    "start": "132560",
    "end": "138600"
  },
  {
    "text": "of language bindings so if you want to write Ruby or dotnet you can use rugged",
    "start": "138600",
    "end": "144540"
  },
  {
    "text": "or a little bit too sharp which talk to lib get to building lib get to we took a",
    "start": "144540",
    "end": "150690"
  },
  {
    "text": "lot of the actual source code out of get to make it get if you've ever looked at",
    "start": "150690",
    "end": "157440"
  },
  {
    "text": "the code is a mix of C and Perl and shell scripts and all that fun stuff and",
    "start": "157440",
    "end": "162810"
  },
  {
    "text": "so that doesn't really lend itself to embedding inside an application so Lib get to takes some of the code out and",
    "start": "162810",
    "end": "169920"
  },
  {
    "text": "modular Rises it makes it nice but it shares a lot of the same origin as get",
    "start": "169920",
    "end": "178140"
  },
  {
    "text": "so it is written in C like much of kit",
    "start": "178140",
    "end": "183810"
  },
  {
    "text": "itself is C is I think an incredible programming language it's my favorite",
    "start": "183810",
    "end": "189840"
  },
  {
    "text": "language to write in there's some great reasons to write an application and C first of all it's very powerful right",
    "start": "189840",
    "end": "195720"
  },
  {
    "text": "you can get right down to the metal the only thing you know better is writing a similar so it's kind of like an abstract",
    "start": "195720",
    "end": "201360"
  },
  {
    "text": "version of that incredibly powerful if you want to write a kernel you're gonna do it and see if you want to write a device driver you're gonna do it in C",
    "start": "201360",
    "end": "207150"
  },
  {
    "text": "the other great thing about C is it's really fast the reason it's fast is because it doesn't do things like bounds checking",
    "start": "207150",
    "end": "212640"
  },
  {
    "text": "on arrays or checking on integer overflows which leads us to reason number three that you should use C it's",
    "start": "212640",
    "end": "218820"
  },
  {
    "text": "totally secure nope actually no it's not there is no reason three the reason that",
    "start": "218820",
    "end": "224880"
  },
  {
    "text": "C is so fast is because it issues these things like checking on conditions for",
    "start": "224880",
    "end": "230160"
  },
  {
    "text": "for overflowing arrays so if you allocate I don't know a megabyte and you",
    "start": "230160",
    "end": "235739"
  },
  {
    "text": "try to read two megabytes of a file into it C will let you you know dotnet might",
    "start": "235739",
    "end": "241110"
  },
  {
    "text": "crash it you know some languages might resize a raise that's all great C will just totally let you overwrite that",
    "start": "241110",
    "end": "247440"
  },
  {
    "text": "memory and then you can come back and reference it later so if you expect to have one megabytes",
    "start": "247440",
    "end": "254700"
  },
  {
    "text": "worth of file and an attacker gives you two well now they're writing in two",
    "start": "254700",
    "end": "260100"
  },
  {
    "text": "places in memory that that you didn't expect them to and so they might be able",
    "start": "260100",
    "end": "265350"
  },
  {
    "text": "to stick some code in there that they could then execute so C is really is a",
    "start": "265350",
    "end": "272310"
  },
  {
    "text": "great programming language but you've got to be incredibly careful with it if you're going to build applications in it",
    "start": "272310",
    "end": "277680"
  },
  {
    "text": "that's especially true if you're building a version control application that everybody relies on there are lies",
    "start": "277680",
    "end": "283979"
  },
  {
    "text": "there are damn lies and then there are statistics but if you'll bear with me this is the data from the most recent",
    "start": "283979",
    "end": "290430"
  },
  {
    "text": "Stack Overflow survey of professional developers and it shows that 90% of",
    "start": "290430",
    "end": "296360"
  },
  {
    "text": "professional developers use get at some point in time maybe that's not the only",
    "start": "296360",
    "end": "301440"
  },
  {
    "text": "version control system they use but almost all of us use git at some point",
    "start": "301440",
    "end": "308010"
  },
  {
    "text": "or another so it's pretty important that we get this right from the gets get",
    "start": "308010",
    "end": "313979"
  },
  {
    "text": "community's perspective you know the next runner up is subversion also written in C I might add and team",
    "start": "313979",
    "end": "320580"
  },
  {
    "text": "foundation version control is squeaking in at number three so there's a there's",
    "start": "320580",
    "end": "325740"
  },
  {
    "text": "a pretty important security aspect that we need to consider on the git project",
    "start": "325740",
    "end": "331830"
  },
  {
    "text": "because everybody uses us right financial institutions use us like",
    "start": "331830",
    "end": "337650"
  },
  {
    "text": "Thomson Reuters and PayPal the Nasdaq the Stock Exchange",
    "start": "337650",
    "end": "343010"
  },
  {
    "text": "actual market uses get the Air Force NASA things flying around and going into",
    "start": "343010",
    "end": "350460"
  },
  {
    "text": "space use get so if there's a security hole in get that could be really",
    "start": "350460",
    "end": "355919"
  },
  {
    "text": "problematic if an attacker could get into your code right that's sort of the nightmare doomsday scenario for me is",
    "start": "355919",
    "end": "363840"
  },
  {
    "text": "somebody coming along and being able to figure out a way using get to get their",
    "start": "363840",
    "end": "370500"
  },
  {
    "text": "source code into your project or to run code on your computer I said that this",
    "start": "370500",
    "end": "377970"
  },
  {
    "text": "was you know important to me that's because I'm the maintainer of the liggett to project you may not have ever",
    "start": "377970",
    "end": "385770"
  },
  {
    "text": "heard of Lib get to but we've heard of you we're used in a variety of hosting",
    "start": "385770",
    "end": "391890"
  },
  {
    "text": "providers like github gitlab bitbucket and visual studio team services so if",
    "start": "391890",
    "end": "397410"
  },
  {
    "text": "you are putting your code into a hosting provider it's probably using Lib get to I worked on a function and",
    "start": "397410",
    "end": "405030"
  },
  {
    "text": "look at two called merge and almost all of these providers use Lib get to and",
    "start": "405030",
    "end": "410340"
  },
  {
    "text": "its merge functionality when you click the complete pull request button so my code is changing your repository so this",
    "start": "410340",
    "end": "419970"
  },
  {
    "text": "is really important to me that we get this right because if there was some way",
    "start": "419970",
    "end": "425160"
  },
  {
    "text": "to run arbitrary code or to add arbitrary code to your repository that would be really terrible the first stage",
    "start": "425160",
    "end": "435870"
  },
  {
    "text": "at which we at which we look at security is of course doing the pull requests so",
    "start": "435870",
    "end": "443400"
  },
  {
    "text": "Lib get two we use github to manage the project and so we're very careful about",
    "start": "443400",
    "end": "449040"
  },
  {
    "text": "reviewing every pull request that comes through looking for things like buffer overflows and injur overflows and that",
    "start": "449040",
    "end": "455520"
  },
  {
    "text": "sort of thing the git project itself doesn't use github they get started as a",
    "start": "455520",
    "end": "463290"
  },
  {
    "text": "project from Linus Torvalds he likes to use a mailing list for development he of",
    "start": "463290",
    "end": "470250"
  },
  {
    "text": "course is building the Linux kernel and so there's the Linux kernel mailing list similarly there's the git mailing list",
    "start": "470250",
    "end": "476580"
  },
  {
    "text": "and that's where it gets development goes on but they are no less strict about looking at what comes into the",
    "start": "476580",
    "end": "483930"
  },
  {
    "text": "repository of course they're human I'm human as developers we're human we all",
    "start": "483930",
    "end": "489270"
  },
  {
    "text": "make mistakes sort of mistakes that lead to security vulnerabilities and we make mistakes when we're reviewing code and",
    "start": "489270",
    "end": "495540"
  },
  {
    "text": "miss things so thankfully there are tools that we can rely on to help us we",
    "start": "495540",
    "end": "502860"
  },
  {
    "text": "use Val grind which is good at detecting memory leaks yes but also out of bounds",
    "start": "502860",
    "end": "510660"
  },
  {
    "text": "execution and and out of bounds reads but Coverity is an outstanding tool",
    "start": "510660",
    "end": "516690"
  },
  {
    "text": "sorry it's not an open-source tool but they do have a free tier available for",
    "start": "516690",
    "end": "521849"
  },
  {
    "text": "open source projects and it finds a ton of things that might be security might",
    "start": "521850",
    "end": "528480"
  },
  {
    "text": "be able to be exploited as security vulnerabilities but interestingly",
    "start": "528480",
    "end": "535680"
  },
  {
    "text": "it's not really the buffer overflows or the integer overflows that are usually the problem here generally its",
    "start": "535680",
    "end": "542910"
  },
  {
    "text": "assumptions let's put a pin in that for",
    "start": "542910",
    "end": "548430"
  },
  {
    "text": "just a second and talk about the operating systems that we use when we",
    "start": "548430",
    "end": "556080"
  },
  {
    "text": "are building software there's three big ones Windows Mac and Linux and if we",
    "start": "556080",
    "end": "561810"
  },
  {
    "text": "look again at that same you know set of lies that is a statistic we'll see that",
    "start": "561810",
    "end": "567480"
  },
  {
    "text": "Windows is still the most popular desktop in use by software developers",
    "start": "567480",
    "end": "573260"
  },
  {
    "text": "it's got the lion's share of the market even when you go to Silicon Valley all",
    "start": "573260",
    "end": "578430"
  },
  {
    "text": "you see is Macs and still somehow at least the respondents of this survey are",
    "start": "578430",
    "end": "583440"
  },
  {
    "text": "not Big Mac users and Linux actually shows up so this isn't the year of Linux on the desktop but since it shows up on",
    "start": "583440",
    "end": "590160"
  },
  {
    "text": "this graph you know it actually is software developers but there's an",
    "start": "590160",
    "end": "597149"
  },
  {
    "text": "interesting thing about get like I mentioned it was built by a guy originally named Linus Torvalds Linus",
    "start": "597149",
    "end": "605120"
  },
  {
    "text": "built the Linux kernel of course and he built yet to support the development of the Linux kernel so a lot of the get",
    "start": "605120",
    "end": "613170"
  },
  {
    "text": "developers actually came out of this this background with the Linux kernel",
    "start": "613170",
    "end": "618630"
  },
  {
    "text": "mailing list so most of the people who actually build get the command-line",
    "start": "618630",
    "end": "625410"
  },
  {
    "text": "application that you run when you do version control our Linux users and so",
    "start": "625410",
    "end": "631230"
  },
  {
    "text": "that leads to some interesting assumptions and in particular it led to one called CVE so we don't give fun",
    "start": "631230",
    "end": "640170"
  },
  {
    "text": "names like shattered or heartbleed we don't give fun names to our security vulnerabilities on the gate project so",
    "start": "640170",
    "end": "647250"
  },
  {
    "text": "we just call them by their CVE CVG is a common vulnerability and exposure I",
    "start": "647250",
    "end": "653790"
  },
  {
    "text": "think is the e so when you have a security bug in your project you register for a CVE with a Clearinghouse",
    "start": "653790",
    "end": "660950"
  },
  {
    "text": "that assigns numbers and so they just give you a number the first part is the",
    "start": "660950",
    "end": "666480"
  },
  {
    "text": "year so this happened in 2014 and the next is just a monotonically increasing number so the first big",
    "start": "666480",
    "end": "672370"
  },
  {
    "text": "security hole in get was CBE 2014 - 93 90 I can recite this in my sleep because",
    "start": "672370",
    "end": "678730"
  },
  {
    "text": "this was such a problem for us at the time let's let's take a look at what it",
    "start": "678730",
    "end": "686800"
  },
  {
    "text": "involves so I've got a git repository here it's a pretty simple repository",
    "start": "686800",
    "end": "693070"
  },
  {
    "text": "it's just got one file in it and I've",
    "start": "693070",
    "end": "702580"
  },
  {
    "text": "got this dot git folder here and that's actually what's what makes up my get",
    "start": "702580",
    "end": "708100"
  },
  {
    "text": "repository so if you were here at NDC Oslo last year I unpacked what was in this repository so you know you can",
    "start": "708100",
    "end": "714640"
  },
  {
    "text": "check that out online I don't want to rehash all of that but if you've never looked inside your dot git folder let me",
    "start": "714640",
    "end": "721450"
  },
  {
    "text": "let me just give you a brief rundown on a couple of important things first of all your branches are in here there we",
    "start": "721450",
    "end": "733150"
  },
  {
    "text": "go so they're in a folder called git /r f slash heads so I've got a branch called master and that is just a pointer",
    "start": "733150",
    "end": "741760"
  },
  {
    "text": "to my to the git object at that branch points to I've also got a folder in here",
    "start": "741760",
    "end": "748990"
  },
  {
    "text": "called objects that you can see let's let's take a look in there so I've got a",
    "start": "748990",
    "end": "755770"
  },
  {
    "text": "bunch of folders and most of them are just two hex characters and let's look",
    "start": "755770",
    "end": "764830"
  },
  {
    "text": "at what's inside one of those folders right so this is actually a get object",
    "start": "764830",
    "end": "773080"
  },
  {
    "text": "get object is either a blob which is a file that I've added to my repository or it could be a tree which makes up the",
    "start": "773080",
    "end": "779380"
  },
  {
    "text": "hierarchy of my repository so it's a directory or it could be a commit which",
    "start": "779380",
    "end": "784450"
  },
  {
    "text": "is the information that gets stored when I run git commit that points to the tree in question and it's a git takes the",
    "start": "784450",
    "end": "792010"
  },
  {
    "text": "sha-1 hash of the contents and that's what you see is the object ID it's that",
    "start": "792010",
    "end": "797020"
  },
  {
    "text": "40 character hexadecimal number in this case f9 FC",
    "start": "797020",
    "end": "802720"
  },
  {
    "text": "fzero yada yada yada and it stores it inside the get repository so if I look",
    "start": "802720",
    "end": "808390"
  },
  {
    "text": "in here it's just actually a compressed version of of the the commit or of the",
    "start": "808390",
    "end": "814300"
  },
  {
    "text": "file that got checked in and that's actually the contents of your get",
    "start": "814300",
    "end": "819760"
  },
  {
    "text": "repository when you were on get clone and your you quote-unquote get a full copy of the history from the server this",
    "start": "819760",
    "end": "826030"
  },
  {
    "text": "is where it's stored here in dot get objects it would be bad if I could write",
    "start": "826030",
    "end": "832390"
  },
  {
    "text": "into that right as an attacker that's that's my data and so git goes and take",
    "start": "832390",
    "end": "837940"
  },
  {
    "text": "special precautions so that you can't write into the dot git folder if you ever run get status you won't see you",
    "start": "837940",
    "end": "844420"
  },
  {
    "text": "know all these files and dot git that's gets place you can't touch it if you run",
    "start": "844420",
    "end": "850510"
  },
  {
    "text": "get Ad on a file in here get will refuse to add a file because you can't check",
    "start": "850510",
    "end": "855700"
  },
  {
    "text": "something out into that directory again that's that's gets place okay right so",
    "start": "855700",
    "end": "863280"
  },
  {
    "text": "this is pretty straightforward so far so",
    "start": "863280",
    "end": "868450"
  },
  {
    "text": "let's check out a different branch okay and let's see what's changed no still",
    "start": "868450",
    "end": "877000"
  },
  {
    "text": "just got this file called hello dot txt so it looks like not very much has changed but let's dig a little deeper",
    "start": "877000",
    "end": "884640"
  },
  {
    "text": "right well let's take a look here inside my git folder I've got a new file called",
    "start": "884790",
    "end": "891220"
  },
  {
    "text": "hello repo dot txt that wasn't there before how did we get it there well",
    "start": "891220",
    "end": "899770"
  },
  {
    "text": "let's take a look at the file first just to make sure it's not some git metadata that we we didn't notice before get",
    "start": "899770",
    "end": "906820"
  },
  {
    "text": "hello repo dot txt oh hello a git repository it looks like",
    "start": "906820",
    "end": "913990"
  },
  {
    "text": "it's coming from inside my repository hmm ok so what we've actually done is",
    "start": "913990",
    "end": "919510"
  },
  {
    "text": "we've switched branches and we figured out a way to write files into the dot",
    "start": "919510",
    "end": "924730"
  },
  {
    "text": "git folder that we're not supposed to be able to if we look at the head tree if",
    "start": "924730",
    "end": "933339"
  },
  {
    "text": "we look at the contents of head you might get some insight into how we got here so I've got this folder I've",
    "start": "933339",
    "end": "943190"
  },
  {
    "text": "got a tree inside my repository that is dot get all uppercase remember when I",
    "start": "943190",
    "end": "949970"
  },
  {
    "text": "was talking about assumptions and remember when I was talking about the fact that most of the Linux developers sorry most of the get developers use",
    "start": "949970",
    "end": "956029"
  },
  {
    "text": "Linux you might be piecing together how we got here right so let's look at the",
    "start": "956029",
    "end": "963800"
  },
  {
    "text": "dot git folder dot GI T all caps aha yes it's got a blob or a file called",
    "start": "963800",
    "end": "970760"
  },
  {
    "text": "hello repo dot txt so what git has actually done is it's opened up dot GI T",
    "start": "970760",
    "end": "978410"
  },
  {
    "text": "all caps hello repo dot txt and it's written that hello git repository so",
    "start": "978410",
    "end": "987560"
  },
  {
    "text": "what's happened here is that Linux is a nice case sensitive file system while",
    "start": "987560",
    "end": "995870"
  },
  {
    "text": "Mac and Windows are case insensitive but case preserving so when you open up dot",
    "start": "995870",
    "end": "1003430"
  },
  {
    "text": "get all caps on Mac and on Windows you get the dot git folder and get at least",
    "start": "1003430",
    "end": "1011410"
  },
  {
    "text": "old versions of get free 2014 didn't think about that and didn't check for that so they would happily allow you to",
    "start": "1011410",
    "end": "1018070"
  },
  {
    "text": "write files into the not get folder using this all caps so an attacker could",
    "start": "1018070",
    "end": "1026410"
  },
  {
    "text": "give you a repository that you could then just running git commands and not any of their own code get files placed",
    "start": "1026410",
    "end": "1035290"
  },
  {
    "text": "onto your computer surreptitiously so that's that's sneaky but could we exploit that could we actually take",
    "start": "1035290",
    "end": "1042250"
  },
  {
    "text": "advantage of the fact that get that we can put files into that get directory in",
    "start": "1042250",
    "end": "1048069"
  },
  {
    "text": "order to trick you into I don't know executing code or something",
    "start": "1048069",
    "end": "1053620"
  },
  {
    "text": "well could we change files in your repository without you knowing it let's",
    "start": "1053620",
    "end": "1060309"
  },
  {
    "text": "take a look right so first things first let's try to",
    "start": "1060309",
    "end": "1068690"
  },
  {
    "text": "attack this okay so if I switch back to",
    "start": "1068690",
    "end": "1076309"
  },
  {
    "text": "my master branch let's take a look at the contents of hello dot text here",
    "start": "1076309",
    "end": "1083890"
  },
  {
    "text": "right so it says hello world now can I",
    "start": "1083890",
    "end": "1090440"
  },
  {
    "text": "figure out a way to change this file without you knowing it can I sneak in",
    "start": "1090440",
    "end": "1095600"
  },
  {
    "text": "something that might pass code review and changes this file maybe I could use",
    "start": "1095600",
    "end": "1101929"
  },
  {
    "text": "this to change a source file without you without you even knowing it without seeing it in a diffuse by changing the",
    "start": "1101929",
    "end": "1109610"
  },
  {
    "text": "contents of the dot get directory right well I have a branch here called",
    "start": "1109610",
    "end": "1116269"
  },
  {
    "text": "replacement object that I'll check out and when I do that it gives you a really scary warning the following untracked",
    "start": "1116269",
    "end": "1124610"
  },
  {
    "text": "working tree files would be overwritten by check out and it gives you this crazy",
    "start": "1124610",
    "end": "1130539"
  },
  {
    "text": "file name that's obviously in the docket directory now most people would be",
    "start": "1130539",
    "end": "1136179"
  },
  {
    "text": "frightened by this and you know decide to give up and run away correctly but",
    "start": "1136179",
    "end": "1144440"
  },
  {
    "text": "some people you know will could be perhaps socially engineered hey I really need you to code review this change and",
    "start": "1144440",
    "end": "1151880"
  },
  {
    "text": "if they weren't familiar with git they might look at this and throw up their hands and do what everybody does when",
    "start": "1151880",
    "end": "1157130"
  },
  {
    "text": "faced with a get error message that doesn't make any sense they would go to stack overflow and they would post a",
    "start": "1157130",
    "end": "1162919"
  },
  {
    "text": "question like hey I got this error message the following untracked working tree file yada yada yada and they might",
    "start": "1162919",
    "end": "1169370"
  },
  {
    "text": "think well I don't want to give away this file name that might be important so I'll sanitize it you see this a lot",
    "start": "1169370",
    "end": "1176210"
  },
  {
    "text": "on Stack Overflow where it's where people have carefully edited the question so that they don't you know",
    "start": "1176210",
    "end": "1181760"
  },
  {
    "text": "give away any personal data and then the reply might be well if you don't care",
    "start": "1181760",
    "end": "1186769"
  },
  {
    "text": "about that file then what you want to do is run reset - - hard here are some steps I can I can get check out to",
    "start": "1186769",
    "end": "1195980"
  },
  {
    "text": "create new branch call it replacement object and now I can reset - - hard to point to",
    "start": "1195980",
    "end": "1206679"
  },
  {
    "text": "the origin replacement object great so now I've checked out that branch",
    "start": "1206679",
    "end": "1212390"
  },
  {
    "text": "you know reset - - hard will force the checkout and it will allow me to",
    "start": "1212390",
    "end": "1218260"
  },
  {
    "text": "overwrite those quote unquote untracked working tree files ok so now what well now I don't have that",
    "start": "1218260",
    "end": "1226309"
  },
  {
    "text": "hello world anymore okay but I have done something a little bit evil so I've removed the hello text",
    "start": "1226309",
    "end": "1233330"
  },
  {
    "text": "and I have let's see what's in head clearly I've done something with the dot",
    "start": "1233330",
    "end": "1239150"
  },
  {
    "text": "git directory and if I take a look at this you can see that I've added an",
    "start": "1239150",
    "end": "1246410"
  },
  {
    "text": "object let's look in that tree AF 9 egg",
    "start": "1246410",
    "end": "1255370"
  },
  {
    "text": "right so I've added dot git objects AF 5",
    "start": "1255370",
    "end": "1260450"
  },
  {
    "text": "6 - 6 again this is an object which has",
    "start": "1260450",
    "end": "1266030"
  },
  {
    "text": "a blob which and that's the sha-1 of its contents it turns out that that's",
    "start": "1266030",
    "end": "1272300"
  },
  {
    "text": "actually the sha-1 of the hello dot text that's in my master branch so I'm overriding the object file with my own",
    "start": "1272300",
    "end": "1279740"
  },
  {
    "text": "data and looking at the looking at the diff looking at the the actual git",
    "start": "1279740",
    "end": "1286760"
  },
  {
    "text": "repository you'd never know that I was changing hello dot text you would only think that I'm changing this random file called git objects AF yada yada yada and",
    "start": "1286760",
    "end": "1296260"
  },
  {
    "text": "that's ok because this is a sha-1 and that's a hash and so we should be able to validate when we actually do file",
    "start": "1296260",
    "end": "1304280"
  },
  {
    "text": "operations on this object that it corresponds to what it is right so if I",
    "start": "1304280",
    "end": "1311900"
  },
  {
    "text": "tried to say put that object back on disk it would surely complain right yeah",
    "start": "1311900",
    "end": "1319010"
  },
  {
    "text": "let's take a look at that right so right",
    "start": "1319010",
    "end": "1324380"
  },
  {
    "text": "now I'm on this branch that has introduced this object but I want my hello dot text back",
    "start": "1324380",
    "end": "1329990"
  },
  {
    "text": "so I would do the very logical thing and merge that branch in semester so now",
    "start": "1329990",
    "end": "1338029"
  },
  {
    "text": "I've got hello dot text back we can see it's right there on disk and surely it's the same hello.txt that it was before",
    "start": "1338029",
    "end": "1343340"
  },
  {
    "text": "that just says hello world and no it's in fact not so if we look back at the",
    "start": "1343340",
    "end": "1352460"
  },
  {
    "text": "history of get again it was built by Linus Torvalds it was very much influenced by a project called monotone",
    "start": "1352460",
    "end": "1357830"
  },
  {
    "text": "and monotone introduced the directed acyclic graph had introduced Merkel",
    "start": "1357830",
    "end": "1364190"
  },
  {
    "text": "trees and it introduced sha-1 as the hash for file contents and every",
    "start": "1364190",
    "end": "1370880"
  },
  {
    "text": "operation that monotone did validated sha once it was very important to make",
    "start": "1370880",
    "end": "1377270"
  },
  {
    "text": "sure that there was no corruption and that there was no data integrity losses is perhaps the most polite way to put",
    "start": "1377270",
    "end": "1383419"
  },
  {
    "text": "this caused by your version control system and so monotone validated sha",
    "start": "1383419",
    "end": "1390110"
  },
  {
    "text": "ones at every operation and it was painfully unusable slow at the scale of",
    "start": "1390110",
    "end": "1395690"
  },
  {
    "text": "the Linux kernel so git doesn't get does",
    "start": "1395690",
    "end": "1401120"
  },
  {
    "text": "this when you push or when you pull when you when you basically are bringing objects into your repository it will",
    "start": "1401120",
    "end": "1407539"
  },
  {
    "text": "validate the SHA ones then but once they're there surely you couldn't tamper",
    "start": "1407539",
    "end": "1412730"
  },
  {
    "text": "with them right so we're able to take advantage of that and bring code into",
    "start": "1412730",
    "end": "1418640"
  },
  {
    "text": "this repository bring files into this repository surreptitiously okay so if I",
    "start": "1418640",
    "end": "1426740"
  },
  {
    "text": "check out my master branch that's still true so I was able to poison the object",
    "start": "1426740",
    "end": "1432350"
  },
  {
    "text": "database in this git repository just by having you merge a branch right so",
    "start": "1432350",
    "end": "1439460"
  },
  {
    "text": "that's that's a pretty big deal but you might still notice this you might you",
    "start": "1439460",
    "end": "1446659"
  },
  {
    "text": "might catch this and it's not it's changing a file on disk it's it's not",
    "start": "1446659",
    "end": "1453470"
  },
  {
    "text": "remote code execution could we get remote code execution out of this well",
    "start": "1453470",
    "end": "1458870"
  },
  {
    "text": "let's take a look so I've got a branch here called hooks",
    "start": "1458870",
    "end": "1467240"
  },
  {
    "text": "and okay so I've switched to this branch and now",
    "start": "1467240",
    "end": "1473100"
  },
  {
    "text": "I'm just gonna do I don't know some normal developer things I'm gonna add a file this is a new file and I'm gonna",
    "start": "1473100",
    "end": "1481020"
  },
  {
    "text": "commit it Oh didn't expect that to",
    "start": "1481020",
    "end": "1491190"
  },
  {
    "text": "happen just by running git commit I've got this random dialog box popping up my",
    "start": "1491190",
    "end": "1498390"
  },
  {
    "text": "repository is telling you that it can run arbitrary programs that's not right right how did we do that",
    "start": "1498390",
    "end": "1505980"
  },
  {
    "text": "let's get diff master and take a look",
    "start": "1505980",
    "end": "1511640"
  },
  {
    "text": "right well I've added this file called dot git all caps hooks pre-commit soget",
    "start": "1512210",
    "end": "1520740"
  },
  {
    "text": "has this system called hooks which are programs that you can add to your git repository that can run throughout the",
    "start": "1520740",
    "end": "1527970"
  },
  {
    "text": "git workflow for example there's a pre-commit hook which runs to validate",
    "start": "1527970",
    "end": "1534690"
  },
  {
    "text": "your commit you could put stuff in here like a linter or something to to validate that the code you're about to commit is of high quality but you can't",
    "start": "1534690",
    "end": "1543920"
  },
  {
    "text": "add this to the git repository right like your configuration hooks are something that you have to add yourself",
    "start": "1543920",
    "end": "1550320"
  },
  {
    "text": "because you wouldn't want to get clone a repository and then have it something running a bunch of scripts that you",
    "start": "1550320",
    "end": "1555540"
  },
  {
    "text": "didn't write that you don't have any control over so it's get is very careful to make sure that you can't add",
    "start": "1555540",
    "end": "1561510"
  },
  {
    "text": "pre-commit hooks at least normally so by going through this dot get all caps",
    "start": "1561510",
    "end": "1568370"
  },
  {
    "text": "system an attacker could give you a look that then runs on your system so that's",
    "start": "1568370",
    "end": "1577410"
  },
  {
    "text": "not ideal so again this was CVE",
    "start": "1577410",
    "end": "1582780"
  },
  {
    "text": "2014 - 9390 and so it allowed a couple things it allowed a an attacker to put",
    "start": "1582780",
    "end": "1590460"
  },
  {
    "text": "code potentially into your repository or",
    "start": "1590460",
    "end": "1595100"
  },
  {
    "text": "execute arbitrary programs through the Hookes mechanism and so basically the",
    "start": "1595500",
    "end": "1602350"
  },
  {
    "text": "way get was protecting its repository itself was doing the moral equivalent of",
    "start": "1602350",
    "end": "1609130"
  },
  {
    "text": "stir comp get if you're not a si person this is actually just doing a string",
    "start": "1609130",
    "end": "1614290"
  },
  {
    "text": "compare on dot GI T all lowercase and so",
    "start": "1614290",
    "end": "1619620"
  },
  {
    "text": "the naive solution to this problem is just stir case cop which does a case",
    "start": "1619620",
    "end": "1626140"
  },
  {
    "text": "insensitive comparison on the dot get directory and that should work right so",
    "start": "1626140",
    "end": "1633460"
  },
  {
    "text": "before we were protecting the dot git folder and by moving to sir case comp we",
    "start": "1633460",
    "end": "1639060"
  },
  {
    "text": "protect all variations of dot git dot lowercase get thought uppercase get",
    "start": "1639060",
    "end": "1644860"
  },
  {
    "text": "mixed case get we've got them all surely surely there's no way to go around this",
    "start": "1644860",
    "end": "1651250"
  },
  {
    "text": "right well let's take a look at windows real quick so here I've got the same",
    "start": "1651250",
    "end": "1660610"
  },
  {
    "text": "evil repository and this time I'm on Windows so let me run git branch so I",
    "start": "1660610",
    "end": "1666190"
  },
  {
    "text": "still got hooks and now I've got two more folders called win hooks and win hooks - let's check one of those out ok",
    "start": "1666190",
    "end": "1677320"
  },
  {
    "text": "great and now let's do the same thing as before we'll look inside our repository",
    "start": "1677320",
    "end": "1683230"
  },
  {
    "text": "we'll add a new file pardon me I really like the eye and I'm going to add this",
    "start": "1683230",
    "end": "1691240"
  },
  {
    "text": "file and commit it and just like before we get a dialog box popping up this time",
    "start": "1691240",
    "end": "1697390"
  },
  {
    "text": "I'm using VB script but you know could be could be anything how did we do it",
    "start": "1697390",
    "end": "1703660"
  },
  {
    "text": "this time well we've done things a little bit differently because I've",
    "start": "1703660",
    "end": "1709630"
  },
  {
    "text": "taken the patch to do the staircase comp and so I'm protected here against dot GI",
    "start": "1709630",
    "end": "1719470"
  },
  {
    "text": "t upper case attacks so let's look inside our repository and",
    "start": "1719470",
    "end": "1727780"
  },
  {
    "text": "here I've got IT dot slash hooks slash pre-commitment",
    "start": "1727780",
    "end": "1735090"
  },
  {
    "text": "windows is famously backwards compatible and to the point where Windows 10 has",
    "start": "1736409",
    "end": "1744100"
  },
  {
    "text": "some of the same file system semantics that Doss had if you remember Doss it",
    "start": "1744100",
    "end": "1750490"
  },
  {
    "text": "had 8.3 file names you had up to 8 characters in the beginning followed by",
    "start": "1750490",
    "end": "1755799"
  },
  {
    "text": "a dot followed by at most three characters as a suffix so you get things like readme.txt great the thing about",
    "start": "1755799",
    "end": "1764710"
  },
  {
    "text": "8.3 is you didn't have to have that dot three you could just name a file read me",
    "start": "1764710",
    "end": "1769960"
  },
  {
    "text": "and in bosses you know muddled thinking",
    "start": "1769960",
    "end": "1774970"
  },
  {
    "text": "it's addled brain readme and readme dot were the same thing it was a file with",
    "start": "1774970",
    "end": "1780730"
  },
  {
    "text": "no extension so you could say open",
    "start": "1780730",
    "end": "1786190"
  },
  {
    "text": "readme dot and get readme similar so basically Doss and now Windows even",
    "start": "1786190",
    "end": "1792309"
  },
  {
    "text": "Windows 10 will look at a dot at the end of a file name and ignore it sames truths of space so you could add a",
    "start": "1792309",
    "end": "1801669"
  },
  {
    "text": "folder called get dot to your repository and when you call create file which is",
    "start": "1801669",
    "end": "1808720"
  },
  {
    "text": "the win32 system call when you call create file dot get dot it'll open the",
    "start": "1808720",
    "end": "1814120"
  },
  {
    "text": "not get repository so here's another fun way to get in to the git repository okay",
    "start": "1814120",
    "end": "1822539"
  },
  {
    "text": "so let's take a look at this other",
    "start": "1822539",
    "end": "1828070"
  },
  {
    "text": "branch when hooks to I'm gonna check it out and when I to even just checking",
    "start": "1828070",
    "end": "1835780"
  },
  {
    "text": "this branch out I've got this dialog box popping up we were taking advantage of a different hook it's sort of the same",
    "start": "1835780",
    "end": "1842409"
  },
  {
    "text": "idea but this one runs when I as the post checkout process when I put files",
    "start": "1842409",
    "end": "1848049"
  },
  {
    "text": "on disk so switching branches invokes a check out files get put on disk and the",
    "start": "1848049",
    "end": "1853419"
  },
  {
    "text": "post check out hook runs well that's neat how are we doing this one",
    "start": "1853419",
    "end": "1860220"
  },
  {
    "text": "let's look at my repository again and this time I've got get Tilda one y'all",
    "start": "1861020",
    "end": "1871140"
  },
  {
    "text": "look quite young you may not remember again in the battle days of das file",
    "start": "1871140",
    "end": "1877800"
  },
  {
    "text": "names were 8.3 and then when we moved to long filenames",
    "start": "1877800",
    "end": "1883470"
  },
  {
    "text": "we needed some compatibility story for those poor people still running dass who",
    "start": "1883470",
    "end": "1890190"
  },
  {
    "text": "wanted to be able to mount a volume that had long filenames you know the future of file systems things that weren't 8.3",
    "start": "1890190",
    "end": "1897410"
  },
  {
    "text": "but we needed to give a backwards compatibility story for the people who were stuck in dass and so this is how we",
    "start": "1897410",
    "end": "1904500"
  },
  {
    "text": "did it if I der slash X you can see that",
    "start": "1904500",
    "end": "1909630"
  },
  {
    "text": "I've got this file this is a long filename and then I've got this",
    "start": "1909630",
    "end": "1914670"
  },
  {
    "text": "underscore i tilde 1 dot txt so when I write any file again even on Windows 10",
    "start": "1914670",
    "end": "1922520"
  },
  {
    "text": "when I write any file with a quote unquote long filename ie one that isn't 8.3 the file the sorry not the file",
    "start": "1922520",
    "end": "1931590"
  },
  {
    "text": "system it's not NTFS is Fault win32 the open call will actually create another",
    "start": "1931590",
    "end": "1937500"
  },
  {
    "text": "file that is 8.3 compatible and it's got this crazy naming rules and so what it",
    "start": "1937500",
    "end": "1943470"
  },
  {
    "text": "does is it basically truncates at six characters and adds a tilde one and then keeps the whatever was in the",
    "start": "1943470",
    "end": "1951930"
  },
  {
    "text": "file extension so I get this underscore I tilde 1 dot txt this is all for fun",
    "start": "1951930",
    "end": "1958080"
  },
  {
    "text": "backwards compatibility with a operating system that hasn't existed in decades",
    "start": "1958080",
    "end": "1964130"
  },
  {
    "text": "but what I can do is I can create a git",
    "start": "1964130",
    "end": "1969690"
  },
  {
    "text": "tilde 1 because when get creates that dot git directory it calls you know make",
    "start": "1969690",
    "end": "1976830"
  },
  {
    "text": "sure on it the system will create that backwards-compatible 8.3 final minutes",
    "start": "1976830",
    "end": "1983460"
  },
  {
    "text": "get tilde 1 so I can use that as an attack vector 2 so the first",
    "start": "1983460",
    "end": "1992679"
  },
  {
    "text": "we heard about this security vulnerability when I heard about this anyway the proposal was basically let's",
    "start": "1992679",
    "end": "1999700"
  },
  {
    "text": "protect all variations of dot get and we realized very quickly looking at it that that wasn't going to be enough because",
    "start": "1999700",
    "end": "2006110"
  },
  {
    "text": "Windows does stupid still and again it's not NTFS is fault a lot of people",
    "start": "2006110",
    "end": "2012659"
  },
  {
    "text": "go and blame NTFS the NTFS filesystem isn't a terrible filesystem it's actually pretty good",
    "start": "2012659",
    "end": "2019379"
  },
  {
    "text": "it's the win32 API is that sit on top of it that do all this mangling so we had",
    "start": "2019379",
    "end": "2024869"
  },
  {
    "text": "to protect against that we had to look for dot git dot dot git space get tilde",
    "start": "2024869",
    "end": "2030029"
  },
  {
    "text": "one and thankfully that was the end of it at least for Windows C Mac OS 10",
    "start": "2030029",
    "end": "2037129"
  },
  {
    "text": "actually does have a terrible file system you can't blame this on its api's",
    "start": "2037129",
    "end": "2042590"
  },
  {
    "text": "OS 10 has it has a bad file system hfs+",
    "start": "2042590",
    "end": "2049500"
  },
  {
    "text": "does this weird thing where it stores a particular canonicalize form of utf-8 so",
    "start": "2049500",
    "end": "2057658"
  },
  {
    "text": "if you give it say an A with an umlaut over it it's gonna store it in one way even though that could be represented",
    "start": "2057659",
    "end": "2063919"
  },
  {
    "text": "multiple different ways in unicode there's what's called canonically decomposed which is basically unicode",
    "start": "2063919",
    "end": "2071069"
  },
  {
    "text": "saying i want the letter a and then i want to put a lout over that last letter",
    "start": "2071069",
    "end": "2076349"
  },
  {
    "text": "or it could be canonically composed which means i have a literal a with an",
    "start": "2076349",
    "end": "2081388"
  },
  {
    "text": "umlaut as my unicode code point so two different ways to do it Mac OS enforces a single way on HFS+ that's not the end",
    "start": "2081389",
    "end": "2090750"
  },
  {
    "text": "of the mangling that HFS+ does though there are all these fun unicode code",
    "start": "2090750",
    "end": "2096540"
  },
  {
    "text": "points like 200c which is a zero width non joiner 200 d which is a zero width",
    "start": "2096540",
    "end": "2103260"
  },
  {
    "text": "joiner these are unicode code points that aren't principal characters you can't",
    "start": "2103260",
    "end": "2108900"
  },
  {
    "text": "see them but their control codes in unicode and when you want to write a file with a name like that on a mac and",
    "start": "2108900",
    "end": "2117420"
  },
  {
    "text": "you're using an H OS + filesystem Mac will just remove them so you could have",
    "start": "2117420",
    "end": "2124500"
  },
  {
    "text": "any of these spring throughout a folder called get so you could have dot gi's your with nan Joyner",
    "start": "2124500",
    "end": "2131340"
  },
  {
    "text": "T and hfs+ will happily right into the dot get",
    "start": "2131340",
    "end": "2137430"
  },
  {
    "text": "directory well so it turns out CBD 2014",
    "start": "2137430",
    "end": "2143100"
  },
  {
    "text": "ninety three ninety was actually kind of an interesting problem that we had to",
    "start": "2143100",
    "end": "2148110"
  },
  {
    "text": "dig into and find all the little variations of ways that somebody could get a file into your dot git repository",
    "start": "2148110",
    "end": "2157760"
  },
  {
    "text": "how did we hear about this thankfully through responsible disclosure we",
    "start": "2157790",
    "end": "2165210"
  },
  {
    "text": "actually heard about it through the mercurial project it turns out I think somebody found this in Atlassian bug",
    "start": "2165210",
    "end": "2171480"
  },
  {
    "text": "bounty Atlassian bitbucket hosts mercurial repositories so somebody found",
    "start": "2171480",
    "end": "2178770"
  },
  {
    "text": "this bug in mercurial because it stores files in dot hg hg is the atomic symbol",
    "start": "2178770",
    "end": "2185250"
  },
  {
    "text": "for mercury so you could write a file called dot hg all caps and do the same",
    "start": "2185250",
    "end": "2190980"
  },
  {
    "text": "attack in a mercurial repository and so I think they exploited this on Atlassian's bug bounty program Atlassian",
    "start": "2190980",
    "end": "2198300"
  },
  {
    "text": "went and fixed the bug in mercurial realized very quickly since they also host git repositories that it's a vector",
    "start": "2198300",
    "end": "2203850"
  },
  {
    "text": "there so they alerted the get security community and my buddy peph works at",
    "start": "2203850",
    "end": "2211950"
  },
  {
    "text": "github he's one of the perhaps of the lead security guy for the git project he",
    "start": "2211950",
    "end": "2218160"
  },
  {
    "text": "told my buddy the cent who also works at github he was then the maintainer of Libya to with cent told me he's like hey",
    "start": "2218160",
    "end": "2224250"
  },
  {
    "text": "we've got this patch it does aster comp it does aster case comp instead of aster comp and that's when me so I'm the UNIX",
    "start": "2224250",
    "end": "2233790"
  },
  {
    "text": "guy the Mac guy at Microsoft which is a window shop that's when I kind of lost my mind and realized there are other",
    "start": "2233790",
    "end": "2240210"
  },
  {
    "text": "attack vectors so we looked at all of these various ways to get in so it was a",
    "start": "2240210",
    "end": "2245850"
  },
  {
    "text": "great community response beginning with mercurial going to get",
    "start": "2245850",
    "end": "2251100"
  },
  {
    "text": "and then live get to and because of that we had these awesome joint releases so we put out new",
    "start": "2251100",
    "end": "2259260"
  },
  {
    "text": "versions of mercury get-get for Windows Lib get to all at the same time the git hosting provider",
    "start": "2259260",
    "end": "2265050"
  },
  {
    "text": "is all patched at the same time so when we announced the security vulnerability",
    "start": "2265050",
    "end": "2270840"
  },
  {
    "text": "all the major hosting providers at least github bitbucket and Visual Studio Team",
    "start": "2270840",
    "end": "2276720"
  },
  {
    "text": "Services we're all patched to avoid this vulnerability so you couldn't get push a",
    "start": "2276720",
    "end": "2283470"
  },
  {
    "text": "repository that had this in it so you couldn't use any of us as a vector for this attack we also patched the get clients github",
    "start": "2283470",
    "end": "2290490"
  },
  {
    "text": "desktop in Visual Studio so all were released the same day we were really happy about that but we were a little",
    "start": "2290490",
    "end": "2298110"
  },
  {
    "text": "disappointed because there are a lot of people not on this list one of the",
    "start": "2298110",
    "end": "2303510"
  },
  {
    "text": "really disappointing notable absences is source tree which is Atlassian's get GUI the reason this is disappointing is",
    "start": "2303510",
    "end": "2310230"
  },
  {
    "text": "because bitbucket did get patched the source tree team didn't know about this",
    "start": "2310230",
    "end": "2317130"
  },
  {
    "text": "bug even though they literally have the desks next to the bitbucket team so we",
    "start": "2317130",
    "end": "2323010"
  },
  {
    "text": "realized that maybe we weren't doing a great job of communicating this problem so we started a new mailing list and",
    "start": "2323010",
    "end": "2329550"
  },
  {
    "text": "this is how we communicate about security vulnerabilities now amongst each other which is good because they",
    "start": "2329550",
    "end": "2336240"
  },
  {
    "text": "keep coming this is CBE 2017 - 1 0-0 we got to start",
    "start": "2336240",
    "end": "2341820"
  },
  {
    "text": "giving these better names so this is",
    "start": "2341820",
    "end": "2347510"
  },
  {
    "text": "this answers the question can i exploit code on your computer just by making you",
    "start": "2347510",
    "end": "2353400"
  },
  {
    "text": "clone a repository and the answer is yes so I'm gonna get clone - - recursive",
    "start": "2353400",
    "end": "2359670"
  },
  {
    "text": "this repo I have and I put it on a private git server because everything",
    "start": "2359670",
    "end": "2366780"
  },
  {
    "text": "else is patched and oh no calculator opened when I ran clone didn't expect",
    "start": "2366780",
    "end": "2372150"
  },
  {
    "text": "that I really wanted to open up candy crush saga but I finally figured out how to delete it from my machine and I",
    "start": "2372150",
    "end": "2377700"
  },
  {
    "text": "didn't want to put it back ok so let me close that right so what have I done",
    "start": "2377700",
    "end": "2385590"
  },
  {
    "text": "well you can see in the output some hints at this but let's take a look inside the repository so I",
    "start": "2385590",
    "end": "2394080"
  },
  {
    "text": "a repository with nothing in it but I don't get modules file so I've got a git repository that only has a sub module in",
    "start": "2394080",
    "end": "2401010"
  },
  {
    "text": "it and if you needed any more reason to avoid sub modules this is one of them and let's look at my get modules right",
    "start": "2401010",
    "end": "2410310"
  },
  {
    "text": "so here so a get modules file describes",
    "start": "2410310",
    "end": "2416580"
  },
  {
    "text": "how your sub module works so this is a super repository this is a parent repository and it's just got a sub",
    "start": "2416580",
    "end": "2422310"
  },
  {
    "text": "module in it the sub module name is pwned that's just a string that talks",
    "start": "2422310",
    "end": "2428610"
  },
  {
    "text": "about well the name it's just metadata don't worry about that and then it's got",
    "start": "2428610",
    "end": "2434070"
  },
  {
    "text": "a path the path is where it would be checked out into the repository itself so basically what would happen is when I",
    "start": "2434070",
    "end": "2442710"
  },
  {
    "text": "recursively clone this parent repository git will then clone the URL and put it",
    "start": "2442710",
    "end": "2449160"
  },
  {
    "text": "inside it check it out inside the pond directory and the URL for this",
    "start": "2449160",
    "end": "2455070"
  },
  {
    "text": "repository is SSH colon slash slash - OH proxy command equals calc eggsy git is",
    "start": "2455070",
    "end": "2463490"
  },
  {
    "text": "written in the UNIX philosophy of having small programs that interact with each",
    "start": "2463490",
    "end": "2468780"
  },
  {
    "text": "other and work with other programs on the UNIX system like SSH so instead of",
    "start": "2468780",
    "end": "2475620"
  },
  {
    "text": "embedding lib SSH or Lib SSH - which are great linkable libraries that get could",
    "start": "2475620",
    "end": "2481950"
  },
  {
    "text": "have chosen to go with it runs the command line SSH and it gives it the",
    "start": "2481950",
    "end": "2487110"
  },
  {
    "text": "hostname in your in your sub module",
    "start": "2487110",
    "end": "2492630"
  },
  {
    "text": "configuration it's a clone so you know if I had HTTP github.com /e Thompson",
    "start": "2492630",
    "end": "2499680"
  },
  {
    "text": "whatever it would run sorry if I had SSH colon github it would run ssh space",
    "start": "2499680",
    "end": "2506610"
  },
  {
    "text": "github.com and so here it's running ssh space - Oh proxy command equals Cal Tech",
    "start": "2506610",
    "end": "2514620"
  },
  {
    "text": "Z - oh is the SSH option configuration",
    "start": "2514620",
    "end": "2522290"
  },
  {
    "text": "proxy command is what it will run like a socks proxy to get out of your network",
    "start": "2522290",
    "end": "2527370"
  },
  {
    "text": "so this is literally running SSH space - Oh proxy command equals Caltech Z and SSH is dutifully opening calc C out I",
    "start": "2527370",
    "end": "2538470"
  },
  {
    "text": "mean this was an obvious one we just are very careful about how we handle host",
    "start": "2538470",
    "end": "2544230"
  },
  {
    "text": "names in get but it's an important consideration that you can actually run",
    "start": "2544230",
    "end": "2550710"
  },
  {
    "text": "arbitrary commands just by running a recursive clone and that's very sort of",
    "start": "2550710",
    "end": "2557280"
  },
  {
    "text": "frightening I expect to be able to clone a repository and there might be bad code",
    "start": "2557280",
    "end": "2562560"
  },
  {
    "text": "in the repository that I wouldn't want to run or build or anything like that but I don't expect get itself to be",
    "start": "2562560",
    "end": "2567870"
  },
  {
    "text": "vulnerable to these sort of problems right thankfully that was the last up",
    "start": "2567870",
    "end": "2575550"
  },
  {
    "text": "now of course not we really do need to start getting these better names so this is 2018 - 11 - 35 this is actually a two",
    "start": "2575550",
    "end": "2583860"
  },
  {
    "text": "week old exploit that we just patched very recently yeah two weeks ago was not",
    "start": "2583860",
    "end": "2590190"
  },
  {
    "text": "my favorite time of this year let's go",
    "start": "2590190",
    "end": "2595230"
  },
  {
    "text": "back to my Mac and this time I'm gonna get clone again recursively again maybe",
    "start": "2595230",
    "end": "2600900"
  },
  {
    "text": "rethink your use of sub modules so I'm gonna get clone - - recursive again",
    "start": "2600900",
    "end": "2607380"
  },
  {
    "text": "something on my server because everything else is patched so that I can't host these repositories there and",
    "start": "2607380",
    "end": "2615140"
  },
  {
    "text": "yep there we go remote code execution as soon as I clone",
    "start": "2615140",
    "end": "2620850"
  },
  {
    "text": "the repository this one is a little bit different it's actually pretty clever",
    "start": "2620850",
    "end": "2627840"
  },
  {
    "text": "I'm really was really happy to see this this exploit so what did we do this time",
    "start": "2627840",
    "end": "2633600"
  },
  {
    "text": "well let's go into the repository let's take a look right so I've got that git",
    "start": "2633600",
    "end": "2641430"
  },
  {
    "text": "modules file again so obviously I have sub modules and I've got this folder called an innocent sub module okay cool",
    "start": "2641430",
    "end": "2648960"
  },
  {
    "text": "let's let's take a look at our get modules if I type it out okay well right",
    "start": "2648960",
    "end": "2655740"
  },
  {
    "text": "so clearly I've got two sub modules an innocent sub module and then this one",
    "start": "2655740",
    "end": "2661230"
  },
  {
    "text": "got a weird name hmm like I said that name doesn't matter does it it's just an arbitrary name right so it doesn't",
    "start": "2661230",
    "end": "2668490"
  },
  {
    "text": "matter that it's dot dot slash dot dot slash module slash evil hmm yeah it",
    "start": "2668490",
    "end": "2674850"
  },
  {
    "text": "might let's take a look at our docket folder again right so I've got this modules directory that's something new",
    "start": "2674850",
    "end": "2682680"
  },
  {
    "text": "now that we have a repository that has sub modules in it and let's take a look inside ok well I've got this folder",
    "start": "2682680",
    "end": "2691619"
  },
  {
    "text": "called an innocent sub module and if we look inside that will see that it is",
    "start": "2691619",
    "end": "2699770"
  },
  {
    "text": "it's got the same structure as our other git repositories there's this file called head there's this directory",
    "start": "2699770",
    "end": "2705750"
  },
  {
    "text": "called objects and another one called Refs so this is actually the contents of what",
    "start": "2705750",
    "end": "2711480"
  },
  {
    "text": "we would do the git folder of this sub module instead of putting it in inside",
    "start": "2711480",
    "end": "2717030"
  },
  {
    "text": "the folder space in the repository in its own get folder when you clone a or",
    "start": "2717030",
    "end": "2723030"
  },
  {
    "text": "add a sub-module to a git repository it puts that that sub modules get data the",
    "start": "2723030",
    "end": "2731640"
  },
  {
    "text": "metadata inside the parent repositories dot git folder ok so what I've got is",
    "start": "2731640",
    "end": "2741270"
  },
  {
    "text": "this an innocent sub module but I actually had two sub modules listed in my git modules file didn't I I did I did",
    "start": "2741270",
    "end": "2752359"
  },
  {
    "text": "so it turns out that that sub module name isn't actually so arbitrary after",
    "start": "2752359",
    "end": "2757710"
  },
  {
    "text": "all the name is actually where yet we'll",
    "start": "2757710",
    "end": "2763080"
  },
  {
    "text": "create the folder inside the parents don't get repository and it will use the",
    "start": "2763080",
    "end": "2771990"
  },
  {
    "text": "sub module name as that folder so if it's dot dot slash dot dot slash modules slash evil right so an innocent sub",
    "start": "2771990",
    "end": "2779100"
  },
  {
    "text": "module is here dot dot slash dot dot slash module slash evil is my other one and let's go look at dot dot slash dot",
    "start": "2779100",
    "end": "2786510"
  },
  {
    "text": "dot right that's the root of my working directory slash module slash evil",
    "start": "2786510",
    "end": "2792970"
  },
  {
    "text": "is a git repository hmm okay so did get just clone this so",
    "start": "2792970",
    "end": "2800020"
  },
  {
    "text": "module there no it didn't it didn't need to if I take a look at what's in my",
    "start": "2800020",
    "end": "2807400"
  },
  {
    "text": "repository I've put modules evil into",
    "start": "2807400",
    "end": "2813550"
  },
  {
    "text": "the parent project so what happens when I run get clone - - recursive it gets",
    "start": "2813550",
    "end": "2820990"
  },
  {
    "text": "the parent project it looks at the dot get modules file and then it goes to clone that an innocent sub module and it",
    "start": "2820990",
    "end": "2827770"
  },
  {
    "text": "does that and then it goes to clone the modules evil and it looks on disk and",
    "start": "2827770",
    "end": "2835780"
  },
  {
    "text": "says well I've already got that I don't need to bother cloning it because we've an attacker has bundled that for us and",
    "start": "2835780",
    "end": "2843280"
  },
  {
    "text": "put it right there in the parent repository so get looks and says well I don't need to do",
    "start": "2843280",
    "end": "2849040"
  },
  {
    "text": "anything I've already got all the data that I need that's great the other great",
    "start": "2849040",
    "end": "2854530"
  },
  {
    "text": "thing is that we've got this modules evil hooks post checkout so not only",
    "start": "2854530",
    "end": "2862839"
  },
  {
    "text": "were we able to give the repository data for the sub module we were able to go",
    "start": "2862839",
    "end": "2868510"
  },
  {
    "text": "ahead and configure it with hooks and again hooks are just arbitrary programs",
    "start": "2868510",
    "end": "2873730"
  },
  {
    "text": "that we can run and they should never come from a remote they should have to be configured manually obviously in this",
    "start": "2873730",
    "end": "2881859"
  },
  {
    "text": "case it wasn't so we can look inside our",
    "start": "2881859",
    "end": "2887280"
  },
  {
    "text": "modules evil and we've got this hooks directory and we've got a post checkout",
    "start": "2887280",
    "end": "2898599"
  },
  {
    "text": "hook right there so an attacker was able",
    "start": "2898599",
    "end": "2903730"
  },
  {
    "text": "to give us a hook that runs as soon as we recursively clone it okay and that",
    "start": "2903730",
    "end": "2910960"
  },
  {
    "text": "post checkout hook again this is just Apple script but it could have been anything could be a Bitcoin miner it could be our",
    "start": "2910960",
    "end": "2916810"
  },
  {
    "text": "M minus RF slash it could be something that tries to get into your corporate",
    "start": "2916810",
    "end": "2922330"
  },
  {
    "text": "network and use this as a foothold as an attack vector for going through",
    "start": "2922330",
    "end": "2929440"
  },
  {
    "text": "your corporate network and setting up command and control there so there are a lot of real interesting opportunities",
    "start": "2929440",
    "end": "2935130"
  },
  {
    "text": "for this sort of an attack so again this",
    "start": "2935130",
    "end": "2941290"
  },
  {
    "text": "was CBE 2018 - one one two three five",
    "start": "2941290",
    "end": "2948870"
  },
  {
    "text": "there's a lot more information going into the details on all of these you can",
    "start": "2948870",
    "end": "2954040"
  },
  {
    "text": "check it out on AKMs slash get security",
    "start": "2954040",
    "end": "2959370"
  },
  {
    "text": "if you're worried I would I can",
    "start": "2959370",
    "end": "2964390"
  },
  {
    "text": "understand nobody expects to be running some version control operation and all of a sudden get routed but I would",
    "start": "2964390",
    "end": "2972930"
  },
  {
    "text": "comfort you with the idea that these are first of all rather arbitrary bugs",
    "start": "2972930",
    "end": "2979500"
  },
  {
    "text": "they're not subtle if you see somebody that you don't know opening a pull",
    "start": "2979500",
    "end": "2985330"
  },
  {
    "text": "request in your repository like hi please add please merge my pull request it contains a file called git slash you",
    "start": "2985330",
    "end": "2993820"
  },
  {
    "text": "know lots of data and it's an impenetrable binary mess you are probably not going to merge that if",
    "start": "2993820",
    "end": "3001860"
  },
  {
    "text": "somebody comes up to you and says hi",
    "start": "3001860",
    "end": "3007260"
  },
  {
    "text": "would you please recursively clone my repository and gives you some wacky URLs",
    "start": "3007260",
    "end": "3013260"
  },
  {
    "text": "from some hosting provider you've never heard of I'd like to think that you would not do that right if somebody comes up to you and",
    "start": "3013260",
    "end": "3020190"
  },
  {
    "text": "says hi please run these obscure git commands I would encourage you not to do",
    "start": "3020190",
    "end": "3025410"
  },
  {
    "text": "that so although these are interesting technical vulnerabilities I think I'm",
    "start": "3025410",
    "end": "3031800"
  },
  {
    "text": "finding them fascinating I don't think that they're really the strongest attack vectors for getting into your repository",
    "start": "3031800",
    "end": "3040260"
  },
  {
    "text": "if I can convince you to run some arbitrary git command it's probably easier for me to just give you that Bitcoin miner and how do you run it",
    "start": "3040260",
    "end": "3046680"
  },
  {
    "text": "because it's a social engineering attack either way that said of course the git",
    "start": "3046680",
    "end": "3054480"
  },
  {
    "text": "community building get building look at to building hosting providers building get client",
    "start": "3054480",
    "end": "3059620"
  },
  {
    "text": "none of us wants to be used as that vector so we're very vigilant about this",
    "start": "3059620",
    "end": "3066160"
  },
  {
    "text": "despite that okay so I would encourage",
    "start": "3066160",
    "end": "3071290"
  },
  {
    "text": "you to always protect yourself first of all stay patched if you're on Windows",
    "start": "3071290",
    "end": "3078430"
  },
  {
    "text": "please make sure that you've downloaded the latest kit for Windows again this most recent attack was only two weeks",
    "start": "3078430",
    "end": "3084550"
  },
  {
    "text": "ago so we really do encourage you to stay patched stay updated that's true",
    "start": "3084550",
    "end": "3090010"
  },
  {
    "text": "for your operating systems that's true for your IDE that's true forget get for",
    "start": "3090010",
    "end": "3096430"
  },
  {
    "text": "Windows is really nice the most recent versions are actually self updating so they'll check to make sure that they're",
    "start": "3096430",
    "end": "3102340"
  },
  {
    "text": "up to date and if not they will download a newer version if you're a Mac user you",
    "start": "3102340",
    "end": "3108600"
  },
  {
    "text": "get get bundled with Xcode please throw",
    "start": "3108600",
    "end": "3114580"
  },
  {
    "text": "that away as bad as Apple is about file",
    "start": "3114580",
    "end": "3120130"
  },
  {
    "text": "systems they're also really bad about developer tools that get never gets",
    "start": "3120130",
    "end": "3126160"
  },
  {
    "text": "patched they've applied some random patches to it before they ship it and they're bad about giving you the source",
    "start": "3126160",
    "end": "3132550"
  },
  {
    "text": "code for that so it's not really clear what's in that version of yet obviously",
    "start": "3132550",
    "end": "3138700"
  },
  {
    "text": "you can get it like they're legally bound to give you that source code and they will do that but they're not great",
    "start": "3138700",
    "end": "3144340"
  },
  {
    "text": "about about this process they're not great about updating it please use",
    "start": "3144340",
    "end": "3149650"
  },
  {
    "text": "homebrew or compile it yourself or you know whatever download a recent binary",
    "start": "3149650",
    "end": "3154690"
  },
  {
    "text": "from somebody you trust but don't use the version in Xcode pretty please if",
    "start": "3154690",
    "end": "3160020"
  },
  {
    "text": "you're on Linux you probably know I'm sure you know how to update that's Debian based systems use apt that's",
    "start": "3160020",
    "end": "3167680"
  },
  {
    "text": "great if your rpm based or you know whatever that's fine but please do stay",
    "start": "3167680",
    "end": "3173650"
  },
  {
    "text": "updated and again use a hosting provider that you trust github is very active in security as is",
    "start": "3173650",
    "end": "3183670"
  },
  {
    "text": "bitbucket and get lab I'm they patched for the most recent one so did visual studio team services so if you're",
    "start": "3183670",
    "end": "3189850"
  },
  {
    "text": "running one of those you know the nice cloud hosted get providers great bill there you know",
    "start": "3189850",
    "end": "3196450"
  },
  {
    "text": "as long as it's one of those four for sure and probably others you know check their security policy we've got you",
    "start": "3196450",
    "end": "3203470"
  },
  {
    "text": "covered if you're using an on-premises solution also make sure that you apply the latest",
    "start": "3203470",
    "end": "3209710"
  },
  {
    "text": "security updates and again please don't you know run arbitrary git commands",
    "start": "3209710",
    "end": "3217660"
  },
  {
    "text": "please do make sure that you are you",
    "start": "3217660",
    "end": "3222700"
  },
  {
    "text": "know using common sense security practices okay so that's all I got thank",
    "start": "3222700",
    "end": "3229540"
  },
  {
    "text": "you so much again if you are interested in get if you're interested in developer tools or security issues I do have a",
    "start": "3229540",
    "end": "3238150"
  },
  {
    "text": "podcast you can check it out it's called all things get and if you have questions for me I will absolutely hang around",
    "start": "3238150",
    "end": "3243970"
  },
  {
    "text": "after or if not you can find me on twitter i'm e Thompson so thanks again",
    "start": "3243970",
    "end": "3250560"
  },
  {
    "text": "[Applause]",
    "start": "3250560",
    "end": "3255519"
  }
]