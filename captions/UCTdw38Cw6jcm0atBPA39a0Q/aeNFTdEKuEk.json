[
  {
    "text": "okay first of all thank you so much for this opportunity for giving this opportunity",
    "start": "6640",
    "end": "12480"
  },
  {
    "text": "and welcome to this session called actual sql database lesson learned from the",
    "start": "12480",
    "end": "18400"
  },
  {
    "text": "strangest my name is my name is jose manuel cuado i am a scholastic engineer",
    "start": "18400",
    "end": "25119"
  },
  {
    "text": "working in microsoft based on madrid spain you have my little contact here",
    "start": "25119",
    "end": "32320"
  },
  {
    "text": "about my background is i'm supporting right now several databases let's say sql database",
    "start": "32320",
    "end": "38719"
  },
  {
    "text": "manage instance my sequel mariadb and progress working every uh all running in the in the azure",
    "start": "38719",
    "end": "46399"
  },
  {
    "text": "platform as a platform as a services i have been working microsoft for more than nine years",
    "start": "46399",
    "end": "52239"
  },
  {
    "text": "and i used to work with multiple customers like deep depth ops startups developers",
    "start": "52239",
    "end": "60320"
  },
  {
    "text": "etc i am speaker in other events let's say sql saturday tech ready",
    "start": "60320",
    "end": "66560"
  },
  {
    "text": "and also i work previously in uh as with different roles in different companies let's say dva",
    "start": "66560",
    "end": "72400"
  },
  {
    "text": "developer id manager for more than 25 in other other companies not microsoft in",
    "start": "72400",
    "end": "78320"
  },
  {
    "text": "other companies so also i support sql server so i have",
    "start": "78320",
    "end": "83439"
  },
  {
    "text": "several expertise a developer and when i saw the opportunity to deliver a session as",
    "start": "83439",
    "end": "90240"
  },
  {
    "text": "a for developers it was my third question no the first question is",
    "start": "90240",
    "end": "95360"
  },
  {
    "text": "why this session well first of all it's a base on support tickets uh working with",
    "start": "95360",
    "end": "102320"
  },
  {
    "text": "developers at dva's and it managers uh i have seen working",
    "start": "102320",
    "end": "108240"
  },
  {
    "text": "in this type of cases i have seen let's say no mistake but errors let's say mistake",
    "start": "108240",
    "end": "114240"
  },
  {
    "text": "errors issues that i would like to share with you for the reason was the idea about",
    "start": "114240",
    "end": "122560"
  },
  {
    "text": "the lesson learned from the strategies so when i'm working with developers uh i",
    "start": "122560",
    "end": "129200"
  },
  {
    "text": "have learned multiple things that i would like to to share with you in two into a scenarios uh",
    "start": "129200",
    "end": "137840"
  },
  {
    "text": "but i would like to resume let's say have a summary about the session in three different concepts",
    "start": "137840",
    "end": "144959"
  },
  {
    "text": "it's when you are working in azure normally the the the main idea is to run fast",
    "start": "144959",
    "end": "152640"
  },
  {
    "text": "that's mean that reduce the cost okay because you know that when your",
    "start": "152640",
    "end": "158239"
  },
  {
    "text": "developer build an application develop an application you could think about okay",
    "start": "158239",
    "end": "163360"
  },
  {
    "text": "i'm going to have a big server i don't take care about the hardware",
    "start": "163360",
    "end": "168480"
  },
  {
    "text": "that i have just only write my code and that's all ensure that multiple multiple things you",
    "start": "168480",
    "end": "176160"
  },
  {
    "text": "are going to pay by the use for the for the use that you are going to use",
    "start": "176160",
    "end": "182080"
  },
  {
    "text": "it's very important it's very important uh to try to pay less in order to have more",
    "start": "182080",
    "end": "187920"
  },
  {
    "text": "uh to have more so let's say that you are going to have a benefit so if you run faster or you run the",
    "start": "187920",
    "end": "195040"
  },
  {
    "text": "application uh very fast and the end uh you are going to reduce several costs okay it's very important",
    "start": "195040",
    "end": "201760"
  },
  {
    "text": "because for the result it's my the session that i'm going to show you how to for example to identify a",
    "start": "201760",
    "end": "209840"
  },
  {
    "text": "performance query okay based uh using a and several tools or several",
    "start": "209840",
    "end": "216159"
  },
  {
    "text": "applications i have in this case other things is there a silence so what that's mean that's mean that",
    "start": "216159",
    "end": "222480"
  },
  {
    "text": "for sure when you are working a cloud environment that you have in some place you have",
    "start": "222480",
    "end": "230000"
  },
  {
    "text": "the client machine when you have your application in another space you have a",
    "start": "230000",
    "end": "237200"
  },
  {
    "text": "your sql server or you my sql server you process server etc and then you need to think about several",
    "start": "237200",
    "end": "244879"
  },
  {
    "text": "things it's about the connectivity uh sometimes could happen some something for example",
    "start": "244879",
    "end": "251519"
  },
  {
    "text": "that the server needs to be restarted because we need to apply and save this pack",
    "start": "251519",
    "end": "256720"
  },
  {
    "text": "or or you have a problem in your application so it's very important it's very important",
    "start": "256720",
    "end": "262079"
  },
  {
    "text": "that your application to be more silent in terms of these things so i'm going to show you",
    "start": "262079",
    "end": "267199"
  },
  {
    "text": "in another scenario how uh of the best practice and how to avoid",
    "start": "267199",
    "end": "274160"
  },
  {
    "text": "for example um this type of issues so and final finally",
    "start": "274160",
    "end": "281759"
  },
  {
    "text": "i would like to other other uh topic other term it's about available",
    "start": "281759",
    "end": "288320"
  },
  {
    "text": "so what that's mean this that's mean that okay for sure uh you are every application you",
    "start": "288320",
    "end": "296000"
  },
  {
    "text": "you have the the maintain cycle so that's being that you need to implement your code text your code",
    "start": "296000",
    "end": "302240"
  },
  {
    "text": "running your code and the end you are continuously adding more options",
    "start": "302240",
    "end": "307600"
  },
  {
    "text": "or include more options in your code but it's very",
    "start": "307600",
    "end": "313600"
  },
  {
    "text": "important it's very important another lesson learned that a i got working with developers",
    "start": "313600",
    "end": "319840"
  },
  {
    "text": "about the the telemetry we have financial a lot of telemetry data",
    "start": "319840",
    "end": "325199"
  },
  {
    "text": "so it's very important that when you implement your code it's not just a stop here okay i implement the code",
    "start": "325199",
    "end": "332400"
  },
  {
    "text": "everything will run perfectly but on the end it's very important okay to have in this intelligent this",
    "start": "332400",
    "end": "339840"
  },
  {
    "text": "telemetry this telemetry will uh will represent uh if your application will run well",
    "start": "339840",
    "end": "347039"
  },
  {
    "text": "or run with issues or you are going to have several things so it's very important",
    "start": "347039",
    "end": "352479"
  },
  {
    "text": "about the the uh this this this sort of thing so this is base that i'm going to show you",
    "start": "352479",
    "end": "359280"
  },
  {
    "text": "in my lesson learned so what is the agenda the agenda is",
    "start": "359280",
    "end": "365120"
  },
  {
    "text": "i'm going to show you uh two scenarios the first scenario that we have is the typical",
    "start": "365120",
    "end": "371680"
  },
  {
    "text": "question that we have in support of when we receive a new case a new service request",
    "start": "371680",
    "end": "376960"
  },
  {
    "text": "from any customer developers the va etc is why my application is running",
    "start": "376960",
    "end": "383120"
  },
  {
    "text": "slow so right now i'm going to show you several things several ways that in support we are using in",
    "start": "383120",
    "end": "390319"
  },
  {
    "text": "order to identify what's happening in your code and also how is it or what is the tool that we have",
    "start": "390319",
    "end": "397520"
  },
  {
    "text": "uh in order to for example to detect what is the query what is the problem and try to fix the",
    "start": "397520",
    "end": "403360"
  },
  {
    "text": "issue i try to fix sorry i try to fix the issue other scenario",
    "start": "403360",
    "end": "409520"
  },
  {
    "text": "as i mentioned before it's about why my application times out so",
    "start": "409520",
    "end": "416720"
  },
  {
    "text": "when we are working with developers uh we have many situations",
    "start": "416720",
    "end": "423599"
  },
  {
    "text": "that okay the or developers say uh i don't i have a command i know a",
    "start": "423599",
    "end": "428960"
  },
  {
    "text": "connection tying out but they don't know exactly what is the the these two difference okay for",
    "start": "428960",
    "end": "435840"
  },
  {
    "text": "example command tying out for example suppose that depending on if you are using java or",
    "start": "435840",
    "end": "440960"
  },
  {
    "text": "php or net it's very important to put focus about",
    "start": "440960",
    "end": "447039"
  },
  {
    "text": "the message for example sometimes if you have login a sign out means that you have a",
    "start": "447039",
    "end": "453759"
  },
  {
    "text": "connection tying out because you read some time out that the application was not able to connect",
    "start": "453759",
    "end": "459919"
  },
  {
    "text": "okay or for example when you run a query or you run a process so you could receive for example the",
    "start": "459919",
    "end": "466240"
  },
  {
    "text": "weight time time outs okay so that's mean that was the execution so",
    "start": "466240",
    "end": "472240"
  },
  {
    "text": "it's very important when you are trying to identify what happened is try to put the focus about this",
    "start": "472240",
    "end": "480639"
  },
  {
    "text": "other things that we are going to discuss and i'm going to show you",
    "start": "480639",
    "end": "485759"
  },
  {
    "text": "several examples it's about how to measure how to measure the network",
    "start": "485759",
    "end": "491280"
  },
  {
    "text": "latency we are going to review several points that i have in charge or",
    "start": "491280",
    "end": "496560"
  },
  {
    "text": "using a several options like stopwatch in.net in order to detect what",
    "start": "496560",
    "end": "503280"
  },
  {
    "text": "is the language latency that i have okay and finally i'm going to share with you",
    "start": "503280",
    "end": "508720"
  },
  {
    "text": "uh the coding best practice it's how it's a the typic the the main",
    "start": "508720",
    "end": "515839"
  },
  {
    "text": "things that you need to think about when you are creating when you are developing your application",
    "start": "515839",
    "end": "521279"
  },
  {
    "text": "it's very important to follow up these instructions in order to as i mentioned before",
    "start": "521279",
    "end": "526320"
  },
  {
    "text": "to run fast and to be available er in silence about any error that could",
    "start": "526320",
    "end": "532640"
  },
  {
    "text": "happen okay so right now as i mentioned we are going to go in this scenario so",
    "start": "532640",
    "end": "538959"
  },
  {
    "text": "i'm going to switch to the demo",
    "start": "538959",
    "end": "544880"
  },
  {
    "text": "and let me show you an example a real example this is one case that i received and the",
    "start": "545519",
    "end": "551839"
  },
  {
    "text": "customer was running without any issue from let's say for",
    "start": "551839",
    "end": "557120"
  },
  {
    "text": "more than one year but unexpectedly something happened and the application that",
    "start": "557120",
    "end": "563519"
  },
  {
    "text": "normally every um every action every line that you have every transaction that you have this",
    "start": "563519",
    "end": "570560"
  },
  {
    "text": "customer so that is running very very very slow so as you can see let's say okay i don't know what",
    "start": "570560",
    "end": "576560"
  },
  {
    "text": "happened so what is my problem the problem that we have for example when i receive",
    "start": "576560",
    "end": "583040"
  },
  {
    "text": "this case is do you have a you own a telemetric data",
    "start": "583040",
    "end": "588240"
  },
  {
    "text": "they say no i did this i don't know what happened so in this case my main idea was using",
    "start": "588240",
    "end": "595279"
  },
  {
    "text": "for example visual studio is the profile of visual studio is try to find",
    "start": "595279",
    "end": "600880"
  },
  {
    "text": "what is the part of the code okay that is causing this problem so",
    "start": "600880",
    "end": "607519"
  },
  {
    "text": "i'm going to stop uh right now the the application as you could see uh i used to",
    "start": "607519",
    "end": "615440"
  },
  {
    "text": "every time that i have a case uh i would like to create a proof of concept for for the reason as you could see here",
    "start": "615440",
    "end": "622480"
  },
  {
    "text": "you could see many classes that i have for many uh for many issues for for",
    "start": "622480",
    "end": "630240"
  },
  {
    "text": "for different cases that i was previously so in this case i have one application basically this",
    "start": "630240",
    "end": "637839"
  },
  {
    "text": "application is called is running around a 100 000 a transaction again one application",
    "start": "637839",
    "end": "646160"
  },
  {
    "text": "and right now i don't have any telemetry data",
    "start": "646160",
    "end": "651279"
  },
  {
    "text": "i'm going to use the pulling okay and the best thing is okay let's try to identify if school impossible for sure",
    "start": "651279",
    "end": "657920"
  },
  {
    "text": "it could be possible to know what is the part of the code that discussed in the problem okay so i'm going to go to the back",
    "start": "657920",
    "end": "665839"
  },
  {
    "text": "run the profiler",
    "start": "665839",
    "end": "669040"
  },
  {
    "text": "click start basic using the basic things without any more activity i'm going to use the",
    "start": "671200",
    "end": "676959"
  },
  {
    "text": "instrumentation part",
    "start": "676959",
    "end": "680000"
  },
  {
    "text": "around the process so right now this application will run and i'm going to run for example just",
    "start": "682880",
    "end": "689440"
  },
  {
    "text": "only a 10 transactions it's running right now one two",
    "start": "689440",
    "end": "697360"
  },
  {
    "text": "three and four let's wait for just only uh until we'll reach 10",
    "start": "697360",
    "end": "703839"
  },
  {
    "text": "6 7 8 9 okay",
    "start": "704000",
    "end": "710560"
  },
  {
    "text": "okay so as you can see right now um in your profiler in this profiler",
    "start": "712240",
    "end": "720880"
  },
  {
    "text": "i have several information that was very useful for me is try to identify what happened as you",
    "start": "721040",
    "end": "727040"
  },
  {
    "text": "can see right now running this application i saw two things first is the 50 of the execution",
    "start": "727040",
    "end": "734560"
  },
  {
    "text": "right now it was around 20 seconds sorry 21 seconds the half of the part of",
    "start": "734560",
    "end": "741680"
  },
  {
    "text": "this execution was using a slip i i did by for for example i'm going to remove this",
    "start": "741680",
    "end": "748079"
  },
  {
    "text": "and also we have that running the dv command sql scalar is also another a half",
    "start": "748079",
    "end": "755200"
  },
  {
    "text": "or another 15 in this execution so right now i uh uh in this i found two",
    "start": "755200",
    "end": "761680"
  },
  {
    "text": "things it seems that for example part of the code part of the this class is doing",
    "start": "761680",
    "end": "767600"
  },
  {
    "text": "something that is not related with the database that is causing let's say",
    "start": "767600",
    "end": "773760"
  },
  {
    "text": "a performance issues and also i saw that right now uh running any specific query",
    "start": "773760",
    "end": "780320"
  },
  {
    "text": "is taking time so my main idea i'm going to for example i'm going to",
    "start": "780320",
    "end": "786959"
  },
  {
    "text": "go to the classes to this class and i'm going to remove as i mentioned before i did just only",
    "start": "786959",
    "end": "794399"
  },
  {
    "text": "for example i'm going to remove this slip okay so if i run again",
    "start": "794399",
    "end": "802160"
  },
  {
    "text": "if i run again the profiler for sure that we are going to see a different behaviors",
    "start": "802160",
    "end": "808399"
  },
  {
    "text": "that most probably the information that we are going to have",
    "start": "808399",
    "end": "815839"
  },
  {
    "text": "it's basically it's it seems that it will run just only at this sql common statement",
    "start": "815839",
    "end": "821920"
  },
  {
    "text": "okay so right now what what is the what is the the lesson learned is very important uh when you have a",
    "start": "821920",
    "end": "829360"
  },
  {
    "text": "performance problem is try to identify that if the problem is the code",
    "start": "829360",
    "end": "834560"
  },
  {
    "text": "when for example you retrieve the data or when you're writing a query okay so it seems",
    "start": "834560",
    "end": "841519"
  },
  {
    "text": "that i'm going to just only wait for the next 10 executions",
    "start": "841519",
    "end": "847279"
  },
  {
    "text": "okay i'm going to stop here",
    "start": "847279",
    "end": "850639"
  },
  {
    "text": "as us as you can see right now it's clear that the 1995",
    "start": "855199",
    "end": "860399"
  },
  {
    "text": "percent uh of this of this part is basically it's",
    "start": "860399",
    "end": "867760"
  },
  {
    "text": "the execution of the query so right now it's clear that something happened with the database right",
    "start": "867760",
    "end": "874160"
  },
  {
    "text": "so uh but what is the query that i am securing so",
    "start": "874160",
    "end": "880240"
  },
  {
    "text": "right now we have two things in order to in order to",
    "start": "880240",
    "end": "886959"
  },
  {
    "text": "identify this one thing is try to add my main code for example i will like to",
    "start": "887040",
    "end": "896560"
  },
  {
    "text": "in this class uh for example you could use for example i used to",
    "start": "896560",
    "end": "902320"
  },
  {
    "text": "recommend to use a stock watch just only to measure what is the time of the execution for different process",
    "start": "902320",
    "end": "908880"
  },
  {
    "text": "also most probably you know we have application insights is another internet elementary data that",
    "start": "908880",
    "end": "915360"
  },
  {
    "text": "explain with more details what happened in your code and also you could add your main code",
    "start": "915360",
    "end": "923120"
  },
  {
    "text": "okay so for example i would like to add my own code in terms",
    "start": "923120",
    "end": "930800"
  },
  {
    "text": "of internal telemetry data and i add several details for example",
    "start": "930800",
    "end": "936880"
  },
  {
    "text": "using the sql connection uh object uh we have an option",
    "start": "937040",
    "end": "943759"
  },
  {
    "text": "uh that is called a statistics so when uh you run a query and you",
    "start": "943759",
    "end": "950000"
  },
  {
    "text": "enable the these statistics like using",
    "start": "950000",
    "end": "955199"
  },
  {
    "text": "this parameter this proper this property and the end you could have some details about",
    "start": "955199",
    "end": "963040"
  },
  {
    "text": "what happened with my connection or for example what happened with the execution time of",
    "start": "963040",
    "end": "970079"
  },
  {
    "text": "my query so i'm going to for example enable this this this metrics",
    "start": "970079",
    "end": "979440"
  },
  {
    "text": "i'm going to write again the application as you can see here",
    "start": "981759",
    "end": "989199"
  },
  {
    "text": "right now i have a lot of very useful information in terms of",
    "start": "989199",
    "end": "994800"
  },
  {
    "text": "execution in terms of execution this query the first things if i have the id connection it's very",
    "start": "994800",
    "end": "1002639"
  },
  {
    "text": "important when you have a problem in terms of to establish the connection normally all the drivers",
    "start": "1002639",
    "end": "1008480"
  },
  {
    "text": "when you're connected to the sql usher or manage instance and then you have an id connection id connection is very",
    "start": "1008480",
    "end": "1014720"
  },
  {
    "text": "important because also with this information you could share this information with my colleagues in support and say okay i",
    "start": "1014720",
    "end": "1021600"
  },
  {
    "text": "have a problem i got or i had i i'll face this problem in in this connection",
    "start": "1021600",
    "end": "1029600"
  },
  {
    "text": "also i uh this is the the bytes that i received that received the the",
    "start": "1029600",
    "end": "1035918"
  },
  {
    "text": "application sorry the data that we receive the bytes that i sent okay and also in terms of",
    "start": "1035919",
    "end": "1043280"
  },
  {
    "text": "execution so how much time spent in order to execute this query",
    "start": "1043280",
    "end": "1048319"
  },
  {
    "text": "okay and one thing that also it's a it's a very important it's about for example is",
    "start": "1048319",
    "end": "1056400"
  },
  {
    "text": "the network server time okay it's how much time took in order to connect to the server that",
    "start": "1056400",
    "end": "1063440"
  },
  {
    "text": "is right now is in west europe i'm based in madrid right now i'm freaking from work working from home and",
    "start": "1063440",
    "end": "1069760"
  },
  {
    "text": "okay i took for everything i took nine uh a hundred milliseconds so and",
    "start": "1069760",
    "end": "1076960"
  },
  {
    "text": "then i have a lot of information that okay it seems that something happened",
    "start": "1076960",
    "end": "1082480"
  },
  {
    "text": "okay so for for the reason for every query that i have i have this information the last part",
    "start": "1082480",
    "end": "1090080"
  },
  {
    "text": "that i would like to show you is this these two last line",
    "start": "1090080",
    "end": "1095520"
  },
  {
    "text": "these two last line basically the idea that i have is the the time that when the my code my",
    "start": "1095520",
    "end": "1102160"
  },
  {
    "text": "the the function or the part of my code works including the execution of the of the of",
    "start": "1102160",
    "end": "1108880"
  },
  {
    "text": "the this t-sql command statement okay it's very important because i would like to understand if my problem is",
    "start": "1108880",
    "end": "1115360"
  },
  {
    "text": "just only basically the query or a something i have in the in my code",
    "start": "1115360",
    "end": "1121440"
  },
  {
    "text": "that is not working with okay so",
    "start": "1121440",
    "end": "1126240"
  },
  {
    "text": "we identified the the situation and how i could understand what is this query",
    "start": "1126720",
    "end": "1133039"
  },
  {
    "text": "okay so the idea is for sure if if you are a developer and not a dva uh",
    "start": "1133039",
    "end": "1140960"
  },
  {
    "text": "for sure dad one second let me maintain the application running keep it running okay that's right",
    "start": "1140960",
    "end": "1151120"
  },
  {
    "text": "uh the the main idea is normally you you are going to say okay you are going to contact with your dvi team okay we",
    "start": "1151120",
    "end": "1157440"
  },
  {
    "text": "have this query with we have a problem with this query please review this",
    "start": "1157440",
    "end": "1163600"
  },
  {
    "text": "uh depending on the company we don't have this group or we don't have a pure dva so at the end the developer",
    "start": "1163600",
    "end": "1170480"
  },
  {
    "text": "we have a mix a mix of roles sometimes we have developer developers a dva the dva is a developer et cetera so",
    "start": "1170480",
    "end": "1178960"
  },
  {
    "text": "i would like to show you several aspects okay in order to identify",
    "start": "1178960",
    "end": "1185840"
  },
  {
    "text": "what happened okay basically using two tools okay i'm going to say three",
    "start": "1185840",
    "end": "1192160"
  },
  {
    "text": "tools the first thing is the portal okay for example you could see that this is",
    "start": "1192160",
    "end": "1198000"
  },
  {
    "text": "my database uh the database right now as you can see right now it's using",
    "start": "1198000",
    "end": "1204799"
  },
  {
    "text": "right now eighty percent of uh eighty percent of one hundred percent of the uh",
    "start": "1204799",
    "end": "1210240"
  },
  {
    "text": "of the dtu uh forget about the dtu i would like to show you",
    "start": "1210240",
    "end": "1215280"
  },
  {
    "text": "uh one one topic about the real thing about the cpu and the end in sql last year you have",
    "start": "1215280",
    "end": "1222159"
  },
  {
    "text": "two different tiers that are based here you have dtu model and vcore motor i choose the tdu because i would like to",
    "start": "1222159",
    "end": "1230480"
  },
  {
    "text": "show you in reality what happened and the ndtu is no more than",
    "start": "1230480",
    "end": "1236080"
  },
  {
    "text": "the the max value for three counters it's cpu io or data io",
    "start": "1236080",
    "end": "1242880"
  },
  {
    "text": "local data for example right now as you can see i'm going to use cpu percentage i'm going to add",
    "start": "1242880",
    "end": "1251760"
  },
  {
    "text": "a data your percentage and i'm going to add right now a local percentage",
    "start": "1253039",
    "end": "1262000"
  },
  {
    "text": "so on the end i'm going to remove the ddu because that is not needed okay and the end uh right now",
    "start": "1262000",
    "end": "1269280"
  },
  {
    "text": "i saw that okay in terms of that io it seems that i don't have any problem",
    "start": "1269280",
    "end": "1275679"
  },
  {
    "text": "but it seems that is it seems that my problem is uh the cpu so it seems that",
    "start": "1275679",
    "end": "1283200"
  },
  {
    "text": "at least this query is taking too much time or taking a lot of resources okay",
    "start": "1283200",
    "end": "1290480"
  },
  {
    "text": "so right now also if if you are using for example a sql",
    "start": "1290480",
    "end": "1296480"
  },
  {
    "text": "server management studio you have",
    "start": "1296480",
    "end": "1301520"
  },
  {
    "text": "other reviews like this one",
    "start": "1301520",
    "end": "1307600"
  },
  {
    "text": "that you are going to have more or less the same data you have okay so as you can see here right now",
    "start": "1314799",
    "end": "1321600"
  },
  {
    "text": "uh the amount of data that you have here is okay right now my database is running",
    "start": "1321600",
    "end": "1328320"
  },
  {
    "text": "it's clear that i have a problem in terms of cpu okay we have other tools we have sql",
    "start": "1328320",
    "end": "1334240"
  },
  {
    "text": "auditing we have profiler another profiler that we could that we have in sql server profiler but",
    "start": "1334240",
    "end": "1341360"
  },
  {
    "text": "we have other ways in order to capture also the execution of the query but i don't want",
    "start": "1341360",
    "end": "1346960"
  },
  {
    "text": "to go to this because just like we'd like to show you basic things in order to detect the query okay so",
    "start": "1346960",
    "end": "1354240"
  },
  {
    "text": "right now i found that i have a problem running my query okay so what is the next step is try to",
    "start": "1354240",
    "end": "1360320"
  },
  {
    "text": "identify what is the squaring in this situation uh thanks to the",
    "start": "1360320",
    "end": "1366799"
  },
  {
    "text": "several options that we have in azure you could see we have a performance",
    "start": "1366799",
    "end": "1372480"
  },
  {
    "text": "overview automatic tuning and performance recommendations so i'm going to start from the from the",
    "start": "1372480",
    "end": "1378320"
  },
  {
    "text": "bottom about the automatic tuning so at the end if you're a developer and you don't want to be on",
    "start": "1378320",
    "end": "1384159"
  },
  {
    "text": "it's not your main interest about the dva so you could enable several things in order to speed",
    "start": "1384159",
    "end": "1391280"
  },
  {
    "text": "up a your application is even the uh given the the the decisions to create",
    "start": "1391280",
    "end": "1399120"
  },
  {
    "text": "indexes or drop indexes or for the plants directly to azure sql engine",
    "start": "1399120",
    "end": "1404240"
  },
  {
    "text": "so the main idea doing this is that if uh after for example two or three days",
    "start": "1404240",
    "end": "1410320"
  },
  {
    "text": "that your application is running if this and you have owned this option",
    "start": "1410320",
    "end": "1416080"
  },
  {
    "text": "sql will start uh try to analyze the data",
    "start": "1416080",
    "end": "1421919"
  },
  {
    "text": "based on this workload and try to make some suggestions about okay you need to create indexes",
    "start": "1421919",
    "end": "1427279"
  },
  {
    "text": "here you need to drop index because you are not is you know your application is not using this one",
    "start": "1427279",
    "end": "1433200"
  },
  {
    "text": "etc for the reason based on these things uh i have some",
    "start": "1433200",
    "end": "1439440"
  },
  {
    "text": "performance recommendations that as you could see here is basically if i need to create some",
    "start": "1439440",
    "end": "1445279"
  },
  {
    "text": "indexes or not so i don't know what happens i think that we are going to have but",
    "start": "1445279",
    "end": "1451760"
  },
  {
    "text": "anyway but right now i don't have suppose that right now",
    "start": "1451760",
    "end": "1456880"
  },
  {
    "text": "let me it could be possible to obtain again the data if not much but i need to",
    "start": "1456880",
    "end": "1462240"
  },
  {
    "text": "refresh one second",
    "start": "1462240",
    "end": "1473840"
  },
  {
    "text": "okay anyway okay let me to stop because much probably sticking too much second",
    "start": "1476720",
    "end": "1487840"
  },
  {
    "text": "so on the end right now i don't have any i don't know what happens sorry in",
    "start": "1493840",
    "end": "1499919"
  },
  {
    "text": "this demo let me just only to try for a couple of seconds",
    "start": "1499919",
    "end": "1505200"
  },
  {
    "text": "to use the portal using other browser",
    "start": "1505200",
    "end": "1510639"
  },
  {
    "text": "sorry",
    "start": "1512840",
    "end": "1515840"
  },
  {
    "text": "okay okay okay it's a an error okay something happened okay anyway so and",
    "start": "1530080",
    "end": "1536080"
  },
  {
    "text": "the end i don't know what happened but the idea that i have it's i'm going to have here",
    "start": "1536080",
    "end": "1542000"
  },
  {
    "text": "some information about the queries that i'm running okay and also i'm going",
    "start": "1542000",
    "end": "1548400"
  },
  {
    "text": "to have some charts about every query that i have what is",
    "start": "1548400",
    "end": "1555919"
  },
  {
    "text": "the cpu consumptions that i have for this query okay or for example in terms of cpu",
    "start": "1555919",
    "end": "1563600"
  },
  {
    "text": "in terms of io in terms of everything if i click in the different lines that i",
    "start": "1563600",
    "end": "1569600"
  },
  {
    "text": "have here that as i mentioned i don't know what happened uh you are going to see what is",
    "start": "1569600",
    "end": "1574720"
  },
  {
    "text": "the text of the query that represents this cpu usage in another hand we could use for sure",
    "start": "1574720",
    "end": "1583039"
  },
  {
    "text": "we could use other tool it's for example a one tool that we know",
    "start": "1583039",
    "end": "1589520"
  },
  {
    "text": "that is called a query store okay a query store is a option that we have",
    "start": "1589520",
    "end": "1595440"
  },
  {
    "text": "in sql by default is enabled by the following all the databases that you have in sql lasher and also",
    "start": "1595440",
    "end": "1600799"
  },
  {
    "text": "in manage instance you could disable or disable this option and also we have several",
    "start": "1600799",
    "end": "1607840"
  },
  {
    "text": "reports one of these reports it's for example a query with statistics query with",
    "start": "1607840",
    "end": "1615200"
  },
  {
    "text": "statistics the main things that you are going to have is okay",
    "start": "1615200",
    "end": "1620320"
  },
  {
    "text": "the main weight consum the main weight stats that you have is you have cpu",
    "start": "1620320",
    "end": "1625679"
  },
  {
    "text": "data etc log for example you know that could",
    "start": "1625679",
    "end": "1631440"
  },
  {
    "text": "happen some some blocking issues etc so at the end uh right now there is no need to",
    "start": "1631440",
    "end": "1638640"
  },
  {
    "text": "configure for example if you if you want to know what happened two days ago you could modify the in time interval in",
    "start": "1638640",
    "end": "1645679"
  },
  {
    "text": "order to retrieve the data etc okay but in this case it's a live issue so the main idea is it's",
    "start": "1645679",
    "end": "1653120"
  },
  {
    "text": "clear that right now the total time for this number of executions that i have",
    "start": "1653120",
    "end": "1659039"
  },
  {
    "text": "for example 1200 executions is taking this time and also if i choose",
    "start": "1659039",
    "end": "1665120"
  },
  {
    "text": "the average time they mentioned that every query",
    "start": "1665120",
    "end": "1670960"
  },
  {
    "text": "that i'm running in cpu sticking around 900 milliseconds so if i click here",
    "start": "1670960",
    "end": "1678480"
  },
  {
    "text": "you are going to you are going to have multiple queries that is taking time so uh",
    "start": "1679440",
    "end": "1686000"
  },
  {
    "text": "this is this is the query that is taking time as you could see here it's very simple it's basically it's a",
    "start": "1686000",
    "end": "1692960"
  },
  {
    "text": "oh for example this one is other a other query at the end basically",
    "start": "1692960",
    "end": "1701039"
  },
  {
    "text": "the the the idea is something happened about in this in this execution that is",
    "start": "1701039",
    "end": "1707440"
  },
  {
    "text": "taking too much time also you could see two things first it's when you have the cycle means",
    "start": "1707440",
    "end": "1714960"
  },
  {
    "text": "that the execution was completed another one is the execution was cancelled okay",
    "start": "1714960",
    "end": "1720159"
  },
  {
    "text": "but beside that the execution plan because this is not the proposal of this session it's about",
    "start": "1720159",
    "end": "1726960"
  },
  {
    "text": "uh to try to review what happened for example it's clear that i'm reading all the roles so for",
    "start": "1726960",
    "end": "1732960"
  },
  {
    "text": "example the performer bar card where the text to search is equal",
    "start": "1732960",
    "end": "1739039"
  },
  {
    "text": "value i would like to put focus in two things first the normal thing is i need do i",
    "start": "1739039",
    "end": "1745279"
  },
  {
    "text": "need a for example an index so in this case i'm going to go to the table that must probably",
    "start": "1745279",
    "end": "1752080"
  },
  {
    "text": "normally if we have a missing index you are going to have here an advice about okay you need to create",
    "start": "1752080",
    "end": "1758159"
  },
  {
    "text": "an index but right now we don't have this index or we we have this in this already created",
    "start": "1758159",
    "end": "1763600"
  },
  {
    "text": "but it's still running a performance problem if i go to this table",
    "start": "1763600",
    "end": "1771278"
  },
  {
    "text": "it's performance okay worker",
    "start": "1773440",
    "end": "1778398"
  },
  {
    "text": "and expand indexes and as you can see here i have an index that is related that",
    "start": "1779440",
    "end": "1785360"
  },
  {
    "text": "right now is rated about the text search but it seems that i don't need the index",
    "start": "1785360",
    "end": "1790720"
  },
  {
    "text": "so but i have a wording message here it seems that one a one",
    "start": "1790720",
    "end": "1798080"
  },
  {
    "text": "was the lesson learned that i have with this customer okay so right now we have a message",
    "start": "1798080",
    "end": "1805360"
  },
  {
    "text": "they mentioned that okay it seems that the parameter that",
    "start": "1805360",
    "end": "1811520"
  },
  {
    "text": "you are using in order to execute this query",
    "start": "1811520",
    "end": "1816720"
  },
  {
    "text": "it's not the data type that is not the same data type that you",
    "start": "1816720",
    "end": "1822720"
  },
  {
    "text": "have in your table okay for this reason sql needs to",
    "start": "1822720",
    "end": "1828480"
  },
  {
    "text": "run let's say and convert implicit in order to convert right now for",
    "start": "1828480",
    "end": "1834159"
  },
  {
    "text": "example to uh right now if you could see the",
    "start": "1834159",
    "end": "1840080"
  },
  {
    "text": "the the data type of these failures varchar they need to convert if you're using envar car they need to",
    "start": "1840080",
    "end": "1846399"
  },
  {
    "text": "compare to to worker so what is the impact",
    "start": "1846399",
    "end": "1851679"
  },
  {
    "text": "about it the first impact is we are not using sick sick is the the most the most",
    "start": "1851679",
    "end": "1858399"
  },
  {
    "text": "efficient uh way to repeat the data because basically it's when you have an index i'm going",
    "start": "1858399",
    "end": "1864159"
  },
  {
    "text": "directly to the data but right now i'm using one thing that is called scan scan means",
    "start": "1864159",
    "end": "1870080"
  },
  {
    "text": "that i'm going to read all the rows that you have okay all the data that you have for the",
    "start": "1870080",
    "end": "1875440"
  },
  {
    "text": "reason i found that when the customer runs this query every time is running is reading all the",
    "start": "1875440",
    "end": "1883200"
  },
  {
    "text": "rows four hundred thousand rows and they need to convert this thing so if i copy for example this",
    "start": "1883200",
    "end": "1889760"
  },
  {
    "text": "text that is very simple to copy the text if i",
    "start": "1889760",
    "end": "1894880"
  },
  {
    "text": "for example if you want to obtain the basically the execution plan basically you need to enable this option in you",
    "start": "1894880",
    "end": "1902720"
  },
  {
    "text": "in your into sql server management studio also you could use sql data studio or",
    "start": "1902720",
    "end": "1908000"
  },
  {
    "text": "sql the studio other tool that you have and also you could see here there's an",
    "start": "1908000",
    "end": "1914000"
  },
  {
    "text": "execution plan as you can see is it's taking around two seconds okay so we have a convert template so",
    "start": "1914000",
    "end": "1922000"
  },
  {
    "text": "right now it seems that if i go back it seems that our customer or the",
    "start": "1922000",
    "end": "1928799"
  },
  {
    "text": "application is using n and means unicode",
    "start": "1928799",
    "end": "1934480"
  },
  {
    "text": "unicode you know that is a double byte that if you when you are not using uh not on",
    "start": "1934480",
    "end": "1940640"
  },
  {
    "text": "unicode so if i copy the query in order just only to uh to fix this issue",
    "start": "1940640",
    "end": "1949279"
  },
  {
    "text": "is i'm going to replace this thing removing the the the this letter that's mean that",
    "start": "1949279",
    "end": "1956159"
  },
  {
    "text": "i'm using unicode so i'm going to execute again",
    "start": "1956159",
    "end": "1962000"
  },
  {
    "text": "and as you can see here the execution took a few milliseconds and i'm using",
    "start": "1962000",
    "end": "1967919"
  },
  {
    "text": "indexing okay because i'm using the right data type that i have in my table okay",
    "start": "1967919",
    "end": "1975679"
  },
  {
    "text": "so what was the lesson learned in this in this situation the lesson learned is this customer in",
    "start": "1975679",
    "end": "1982159"
  },
  {
    "text": "the definition of the table in this on other ones the customer use varchar but in reality the code is using",
    "start": "1982159",
    "end": "1990320"
  },
  {
    "text": "unicode for every place that i have in this application so in reality the problem was more than",
    "start": "1990320",
    "end": "1997679"
  },
  {
    "text": "the compression implicit that you have more than the real problem about the",
    "start": "1997679",
    "end": "2004080"
  },
  {
    "text": "database so in this situation my recommendation oh we have the data right now",
    "start": "2004080",
    "end": "2010080"
  },
  {
    "text": "as i don't know what happened but as you can see here using the portal you could see the the",
    "start": "2010080",
    "end": "2017200"
  },
  {
    "text": "graphic that i mentioned before it's okay these queries for example right now these queries",
    "start": "2017200",
    "end": "2024080"
  },
  {
    "text": "is taking this time so also you have the queries a summary of the queries that is taking too much time okay",
    "start": "2024080",
    "end": "2030640"
  },
  {
    "text": "and as i mentioned before if you click here you could see the text okay so and",
    "start": "2030640",
    "end": "2038159"
  },
  {
    "text": "you have all the times all the information that you have uh thanks to to uh to this application",
    "start": "2038159",
    "end": "2045440"
  },
  {
    "text": "so in these situations i go back to the application",
    "start": "2045440",
    "end": "2050800"
  },
  {
    "text": "i ask please stop the application let's go to a view call and please",
    "start": "2051280",
    "end": "2060000"
  },
  {
    "text": "remove the incorrect data type that you are using okay when we remove this set of things",
    "start": "2060000",
    "end": "2070000"
  },
  {
    "text": "as you could see right now even using the internal telemetry data",
    "start": "2072159",
    "end": "2077520"
  },
  {
    "text": "so you could see right now that the execution time is just a pure connection because as you",
    "start": "2082000",
    "end": "2089040"
  },
  {
    "text": "could see here the execution is 30 36 um",
    "start": "2089040",
    "end": "2094079"
  },
  {
    "text": "milliseconds and another body is a 35 milliseconds and the end is a pure",
    "start": "2094079",
    "end": "2099200"
  },
  {
    "text": "execution so it's a pure network to give you the data give me the data and also um you could see the difference",
    "start": "2099200",
    "end": "2105839"
  },
  {
    "text": "so what was a lesson learned that lesson learned was this okay it's very important when you have this",
    "start": "2105839",
    "end": "2112320"
  },
  {
    "text": "type of things is as we mentioned try to add you internal telemetry data or try to use",
    "start": "2112320",
    "end": "2118800"
  },
  {
    "text": "application inside try to review if your code is using the same data type that you have in the tables",
    "start": "2118800",
    "end": "2125520"
  },
  {
    "text": "etc and if you're not able to find these things basically following the the the same uh the same",
    "start": "2125520",
    "end": "2132480"
  },
  {
    "text": "thing that uh that i showed you previously you have uh let's say the way to identify what",
    "start": "2132480",
    "end": "2138800"
  },
  {
    "text": "happened in your code we have other ways but i would like to show you an example um",
    "start": "2138800",
    "end": "2148079"
  },
  {
    "text": "about it okay so uh just only to to finish this scenario",
    "start": "2148079",
    "end": "2154160"
  },
  {
    "text": "it's also a in the similar way that you have in your web app application cloud solu",
    "start": "2154160",
    "end": "2160800"
  },
  {
    "text": "cloud service application etc remember that you have a alerts okay",
    "start": "2160800",
    "end": "2166000"
  },
  {
    "text": "alerts uh you could create some alerts based on the cpu usage of your database",
    "start": "2166000",
    "end": "2171200"
  },
  {
    "text": "based on the data that you have you could create some first one specific threshold you",
    "start": "2171200",
    "end": "2176800"
  },
  {
    "text": "could receive some message about okay the cpu of the database is taking too much time etc",
    "start": "2176800",
    "end": "2183760"
  },
  {
    "text": "other things this is the last tool that i'm going to show you about",
    "start": "2183760",
    "end": "2190960"
  },
  {
    "text": "about the international limited data in terms of performance so you know that in actually you have",
    "start": "2190960",
    "end": "2196800"
  },
  {
    "text": "application inside but also you have other thing that is called a diagnostic settings the updates settings",
    "start": "2196800",
    "end": "2204400"
  },
  {
    "text": "receive the data from the application insights also we have the integrations",
    "start": "2204400",
    "end": "2210800"
  },
  {
    "text": "before you database okay so for example right now if i use this diagnostics",
    "start": "2210800",
    "end": "2219280"
  },
  {
    "text": "for if you want to review what happened in your database for a long time what happened previously",
    "start": "2219280",
    "end": "2227280"
  },
  {
    "text": "you have these reports that this that you could have a lot of",
    "start": "2227280",
    "end": "2234320"
  },
  {
    "text": "information about what happened with my database uh what happened with my report you have",
    "start": "2234320",
    "end": "2240000"
  },
  {
    "text": "several links to move on between between the screens",
    "start": "2240000",
    "end": "2246560"
  },
  {
    "text": "okay and also for other ones that they want to run their own codes of",
    "start": "2246560",
    "end": "2252400"
  },
  {
    "text": "their own requests or queries you have one language",
    "start": "2252400",
    "end": "2258079"
  },
  {
    "text": "one query language that is called kusto okay so at the end",
    "start": "2258079",
    "end": "2264640"
  },
  {
    "text": "you could for example run not just sorry for applications as i mentioned before it's also",
    "start": "2264800",
    "end": "2272640"
  },
  {
    "text": "for one second it's also for example uh",
    "start": "2272640",
    "end": "2279520"
  },
  {
    "text": "the acoustic query custom query is basically the the idea that is behind is uh in application inside",
    "start": "2279520",
    "end": "2287520"
  },
  {
    "text": "storage sql all the service that we have the internet telemetry data that we have",
    "start": "2287520",
    "end": "2293839"
  },
  {
    "text": "will save in just in this workspace and using the report that you have by default or",
    "start": "2293839",
    "end": "2302160"
  },
  {
    "text": "these queries you could obtain a lot of information about what happened",
    "start": "2302160",
    "end": "2307200"
  },
  {
    "text": "yesterday today on run your own filters okay it's a this this custom query is a it's",
    "start": "2307200",
    "end": "2313119"
  },
  {
    "text": "a huge uh uh it's an other language very similar and the end is very similar with like",
    "start": "2313119",
    "end": "2320560"
  },
  {
    "text": "you could have a in sql because on the end you need to specify for example the table",
    "start": "2320560",
    "end": "2326240"
  },
  {
    "text": "and specify the work the where and also summarize let's say that",
    "start": "2326240",
    "end": "2332640"
  },
  {
    "text": "more or less is a a group by a render and the end is a time chart okay it's",
    "start": "2332640",
    "end": "2337680"
  },
  {
    "text": "how you are going to represent the data so this is the scenario uh that as you can see let's say that",
    "start": "2337680",
    "end": "2345680"
  },
  {
    "text": "i'm not going to say it's very it was very simple because take time but it's how just only implement your",
    "start": "2345680",
    "end": "2352000"
  },
  {
    "text": "code and implement or using the tools that you have already without to be on spur",
    "start": "2352000",
    "end": "2359119"
  },
  {
    "text": "dva etc you could find what is the problem you code okay so i don't know if you have",
    "start": "2359119",
    "end": "2366480"
  },
  {
    "text": "any questions about this first scenario before moving on to",
    "start": "2366480",
    "end": "2372160"
  },
  {
    "text": "another another scenario",
    "start": "2372160",
    "end": "2375759"
  },
  {
    "text": "it seems that not okay so the second scenario the second scenario",
    "start": "2380160",
    "end": "2386880"
  },
  {
    "text": "that we mentioned before is about why uh my applications stand out",
    "start": "2386880",
    "end": "2392720"
  },
  {
    "text": "okay so in in this situation uh in many cases uh",
    "start": "2392720",
    "end": "2400160"
  },
  {
    "text": "that we have beside us i mentioned before about the command tying out",
    "start": "2400160",
    "end": "2407599"
  },
  {
    "text": "execution tie now etc it's the basic things or the the best",
    "start": "2407839",
    "end": "2413760"
  },
  {
    "text": "practice that your application could save a lot of time okay for example let me show you an",
    "start": "2413760",
    "end": "2418880"
  },
  {
    "text": "example i'm going to use another application",
    "start": "2418880",
    "end": "2424160"
  },
  {
    "text": "another part of the application as i mentioned i i did several for this",
    "start": "2424160",
    "end": "2429680"
  },
  {
    "text": "for this presentation one second is here",
    "start": "2429680",
    "end": "2433920"
  },
  {
    "text": "i have another application that er er to show you several things for",
    "start": "2437680",
    "end": "2443520"
  },
  {
    "text": "example we have cases that our customers say okay the condition is",
    "start": "2443520",
    "end": "2449440"
  },
  {
    "text": "the connection time spent in order to connect the server is it's i think that is taking too much",
    "start": "2449440",
    "end": "2456240"
  },
  {
    "text": "time right so in this case it's very important that mention that for example if you are",
    "start": "2456240",
    "end": "2464319"
  },
  {
    "text": "using pulling or not for example let me show you",
    "start": "2464319",
    "end": "2471119"
  },
  {
    "text": "an example what is the impact uh when you specified in your connection in",
    "start": "2472319",
    "end": "2477440"
  },
  {
    "text": "your connection stream one thing that is called connection pulling right now i'm not using the",
    "start": "2477440",
    "end": "2482640"
  },
  {
    "text": "connection pulley as you can see this is every time that you",
    "start": "2482640",
    "end": "2487839"
  },
  {
    "text": "you're seeing one line in a single thread i'm not using multiple threads in my application i have other example",
    "start": "2487839",
    "end": "2494319"
  },
  {
    "text": "but it's taking this time okay also we could see for example how much time one second",
    "start": "2494319",
    "end": "2509838"
  },
  {
    "text": "okay one seconds here i need to add another one it's a network type",
    "start": "2511839",
    "end": "2523119"
  },
  {
    "text": "yeah so right now as you can see the network time it's taking around",
    "start": "2523119",
    "end": "2529920"
  },
  {
    "text": "this time to 100 milliseconds all the time so as you can see here it's taking",
    "start": "2529920",
    "end": "2536319"
  },
  {
    "text": "several times milliseconds in order to establish the connection what happened if i use connection pull",
    "start": "2536319",
    "end": "2544400"
  },
  {
    "text": "it let's say i i'm going to enable the connection pool in my connection stream",
    "start": "2544400",
    "end": "2549520"
  },
  {
    "text": "okay and also if i run",
    "start": "2549520",
    "end": "2554160"
  },
  {
    "text": "so right now i'm taking less time because also this connection pulling let's say that",
    "start": "2556880",
    "end": "2562720"
  },
  {
    "text": "we are going to uh cache the connections okay",
    "start": "2562720",
    "end": "2569280"
  },
  {
    "text": "even using connection pooling using um",
    "start": "2569280",
    "end": "2574720"
  },
  {
    "text": "java other languages have this connection fully but what happened what happened when my",
    "start": "2575760",
    "end": "2582000"
  },
  {
    "text": "code have an error and and i not closed the connection correctly",
    "start": "2582000",
    "end": "2588240"
  },
  {
    "text": "or i have an error that i open the connection but i never close the connections",
    "start": "2588240",
    "end": "2594880"
  },
  {
    "text": "so i'm going to receive right now a message that is called this message that means",
    "start": "2594880",
    "end": "2601040"
  },
  {
    "text": "that china expire the timeline expire obtain the connection cooling",
    "start": "2601040",
    "end": "2606240"
  },
  {
    "text": "right now if i try to connect to my database",
    "start": "2606240",
    "end": "2611279"
  },
  {
    "text": "for example to run again this query it seems that it's working so come on something happened uh",
    "start": "2612400",
    "end": "2621040"
  },
  {
    "text": "with my database no the problem that you have is when you enable the connection pooling",
    "start": "2621040",
    "end": "2628800"
  },
  {
    "text": "and you are you are not closing the connection correctly or you are not managing you",
    "start": "2628800",
    "end": "2634319"
  },
  {
    "text": "the error handle correctly and the end you are leaving let's say this connection open so at the end you are going to reach one",
    "start": "2634319",
    "end": "2641440"
  },
  {
    "text": "situation that you are going to reach the limit that they have in max pool okay that is",
    "start": "2641440",
    "end": "2647040"
  },
  {
    "text": "causing an error okay this is very important because right now the",
    "start": "2647040",
    "end": "2652720"
  },
  {
    "text": "the problem is not let's say the application the the database it's more it's about",
    "start": "2652720",
    "end": "2660559"
  },
  {
    "text": "the application is it's not closing correctly connection what happened if i for example close the connection i",
    "start": "2660960",
    "end": "2668240"
  },
  {
    "text": "close the connection even when we have any error so as you could see here",
    "start": "2668240",
    "end": "2677838"
  },
  {
    "text": "if i close explicitly in this application okay as you can see the time is it's",
    "start": "2677920",
    "end": "2684880"
  },
  {
    "text": "very fast right now it's you could see the connection it's it's really really amazing okay so",
    "start": "2684880",
    "end": "2691040"
  },
  {
    "text": "for the reason it's very important what was my lesson learned in this type of cases usefully it could",
    "start": "2691040",
    "end": "2697440"
  },
  {
    "text": "be possible in the driver review uh if something happened to be sure that",
    "start": "2697440",
    "end": "2703680"
  },
  {
    "text": "you close the connection etc okay it's it's very important",
    "start": "2703680",
    "end": "2709359"
  },
  {
    "text": "about it so again so we could add more uh internal telemetry",
    "start": "2709359",
    "end": "2716160"
  },
  {
    "text": "data for sure okay for example using a for example a",
    "start": "2716160",
    "end": "2723599"
  },
  {
    "text": "dotnet it's possible for example to obtain data for example",
    "start": "2723599",
    "end": "2730839"
  },
  {
    "text": "about the number of connection pooling that i have open already open so right now as you can see",
    "start": "2730839",
    "end": "2738800"
  },
  {
    "text": "for example in my application that is called a dot that example right now i i obtain",
    "start": "2738800",
    "end": "2746560"
  },
  {
    "text": "a in the performance code that i have in my machine right now i have okay you have a",
    "start": "2746560",
    "end": "2753200"
  },
  {
    "text": "an active connections you have how many connections you have per second what is the number of connection pool",
    "start": "2753200",
    "end": "2759440"
  },
  {
    "text": "that you have okay so on the end also i'm saving this data i'm doing other uh",
    "start": "2759440",
    "end": "2764800"
  },
  {
    "text": "i also in this code i o i add any other any other",
    "start": "2764800",
    "end": "2770560"
  },
  {
    "text": "test including test if the port is open etc okay it's very important just only because as",
    "start": "2770560",
    "end": "2777200"
  },
  {
    "text": "much i can in order to add internal telemetry data more more quicker i'm going to find what is",
    "start": "2777200",
    "end": "2783760"
  },
  {
    "text": "the problem in terms of connectivity okay so for example i i add",
    "start": "2783760",
    "end": "2789599"
  },
  {
    "text": "a initial check that's mean that uh every time that i establish the connection i try to open the port",
    "start": "2789599",
    "end": "2795920"
  },
  {
    "text": "running a telnet command for example in order that okay the port is it's a",
    "start": "2795920",
    "end": "2803040"
  },
  {
    "text": "with you two examples that are very very common when when we are working",
    "start": "2807200",
    "end": "2814000"
  },
  {
    "text": "um with developer when we have some problems in terms of connectivity",
    "start": "2814000",
    "end": "2819200"
  },
  {
    "text": "the first thing that is very important as i mentioned before it's about one thing that is called a",
    "start": "2819200",
    "end": "2826319"
  },
  {
    "text": "retry logic the trial logic so what that's mean a retar logic let me so one second yeah",
    "start": "2826319",
    "end": "2832160"
  },
  {
    "text": "one second let me to just fully stop the performance counter because it's taking time and then one",
    "start": "2832160",
    "end": "2838319"
  },
  {
    "text": "my main interest is to show you",
    "start": "2838319",
    "end": "2845680"
  },
  {
    "text": "as you can see we are connecting to the database we are going to reach a i know right now i'm not closing the",
    "start": "2845680",
    "end": "2851520"
  },
  {
    "text": "connection so i'm going to have a problem okay when i reach 50 i'm going to reach",
    "start": "2851520",
    "end": "2857359"
  },
  {
    "text": "one situation that sql or the client is not able to open more more connection because we reach the",
    "start": "2857359",
    "end": "2863920"
  },
  {
    "text": "maximum capacity of the connection pulling that by default is 100 but you could modify this okay and",
    "start": "2863920",
    "end": "2870720"
  },
  {
    "text": "right now i'm not able to connect after reach the connection timeout i receive an error",
    "start": "2870720",
    "end": "2876559"
  },
  {
    "text": "uh what happened in this situation or not just only this example suppose that",
    "start": "2876559",
    "end": "2881920"
  },
  {
    "text": "we're running a reconfiguration of your server or your database because we add a new a new option or we need to apply a",
    "start": "2881920",
    "end": "2889280"
  },
  {
    "text": "as a a new service pack etc so",
    "start": "2889280",
    "end": "2894559"
  },
  {
    "text": "the most important thing when you're working in in azure is to is try",
    "start": "2894559",
    "end": "2901040"
  },
  {
    "text": "to use play trial logic retro logic is not more than to add let's say a logic in order that if",
    "start": "2901040",
    "end": "2908640"
  },
  {
    "text": "something happened in the connection in state to let's say",
    "start": "2908640",
    "end": "2914960"
  },
  {
    "text": "give an error closed application and we have an error is let's try to retry the connection",
    "start": "2914960",
    "end": "2921440"
  },
  {
    "text": "again but immediately no the main idea is for example",
    "start": "2921440",
    "end": "2927040"
  },
  {
    "text": "is try to wait for example let's say five seconds okay and after it try to increase for",
    "start": "2927040",
    "end": "2933839"
  },
  {
    "text": "example another 10 50 20 25 etc",
    "start": "2933839",
    "end": "2938880"
  },
  {
    "text": "and after when we reach one number of a connection in this case if you are not able to connect",
    "start": "2938880",
    "end": "2944240"
  },
  {
    "text": "yes for sure the application needs to retrieve an error say okay i'm not able to connect what is the",
    "start": "2944240",
    "end": "2949599"
  },
  {
    "text": "reason that is behind because suppose that we are running a reconfiguration recognition means that",
    "start": "2949599",
    "end": "2955200"
  },
  {
    "text": "for let's say no more than 10 seconds your database was will not available in order to attend",
    "start": "2955200",
    "end": "2961680"
  },
  {
    "text": "more connections okay in this case normally will not take more than 30 seconds when",
    "start": "2961680",
    "end": "2968880"
  },
  {
    "text": "this situation happened okay when we have our configuration for the reason i used to more or less to use ten times",
    "start": "2968880",
    "end": "2976400"
  },
  {
    "text": "okay the uh 10 opt-ins in order to connect the database and",
    "start": "2976400",
    "end": "2981760"
  },
  {
    "text": "also i want uh one thing that i used to suggest is to run uh the clear old pools in order to",
    "start": "2981760",
    "end": "2989680"
  },
  {
    "text": "clean all the uh previous connection pooling",
    "start": "2989680",
    "end": "2994960"
  },
  {
    "text": "that that we are using so basically the main idea is okay if i'm not able to connect try",
    "start": "2994960",
    "end": "3002079"
  },
  {
    "text": "to connect if not retry the connection and also",
    "start": "3002079",
    "end": "3007440"
  },
  {
    "text": "for me it's very important to know the errors we have some errors that is clear that retraining the connection will be",
    "start": "3007440",
    "end": "3013280"
  },
  {
    "text": "fine or if we have any other for example i don't know that in this such situation it's clear",
    "start": "3013280",
    "end": "3021280"
  },
  {
    "text": "that you need to write an error about it okay",
    "start": "3021280",
    "end": "3026880"
  },
  {
    "text": "so it's very important retro logic for sure every application that you have in",
    "start": "3026880",
    "end": "3032160"
  },
  {
    "text": "action needs to have the trilogy okay the last thing that i would like to show you",
    "start": "3032160",
    "end": "3037839"
  },
  {
    "text": "about the connectivity it's about one thing that",
    "start": "3037839",
    "end": "3045359"
  },
  {
    "text": "we used to see very frequently it's about suppose that",
    "start": "3045359",
    "end": "3053119"
  },
  {
    "text": "i'm not using the connection polling and open the connection you know that it's taking some time",
    "start": "3053119",
    "end": "3059839"
  },
  {
    "text": "but what happened",
    "start": "3059839",
    "end": "3064800"
  },
  {
    "text": "when i'm not i have an error i'm i'm not using connection pulling but",
    "start": "3066000",
    "end": "3072160"
  },
  {
    "text": "i open the connections but without closing the the connection",
    "start": "3072160",
    "end": "3077520"
  },
  {
    "text": "let me show you what happened",
    "start": "3077520",
    "end": "3083839"
  },
  {
    "text": "let's let's wait for let's say 20 yeah okay so as you could see here uh",
    "start": "3084480",
    "end": "3092000"
  },
  {
    "text": "you have this line okay i create these two lines what that's mean this line this line",
    "start": "3092000",
    "end": "3097760"
  },
  {
    "text": "means that the connection that you that i have open against my server beside the 22",
    "start": "3097760",
    "end": "3104160"
  },
  {
    "text": "i have 160 okay i have established 300 if the time",
    "start": "3104160",
    "end": "3110480"
  },
  {
    "text": "weight is 61. but as you can see if i'm not closing the connection",
    "start": "3110480",
    "end": "3116480"
  },
  {
    "text": "the connection that is established will be will be will be increment let's say okay",
    "start": "3117599",
    "end": "3124319"
  },
  {
    "text": "so without control okay so in this situation something happened",
    "start": "3124319",
    "end": "3130160"
  },
  {
    "text": "that we are going to reach one situation that occur will occur two things or do you reach",
    "start": "3130160",
    "end": "3138319"
  },
  {
    "text": "the maximum capacity of the concurrent connections that you have for your database",
    "start": "3138319",
    "end": "3143839"
  },
  {
    "text": "or you are going to exhaust all the resources in terms of tcp socket that you have in",
    "start": "3143839",
    "end": "3149680"
  },
  {
    "text": "your server okay we have many many messages many message about",
    "start": "3149680",
    "end": "3157359"
  },
  {
    "text": "when we reach these exhaustions okay we have sometimes catastrophic filers",
    "start": "3157359",
    "end": "3165599"
  },
  {
    "text": "you don't have enough memory for the cp tcp socket we don't have this thing normally",
    "start": "3165599",
    "end": "3172480"
  },
  {
    "text": "normally our customers mentioned that okay i closed up my application",
    "start": "3172480",
    "end": "3178640"
  },
  {
    "text": "but when i close the application everything works fine again it's clear because when i close the",
    "start": "3178640",
    "end": "3184079"
  },
  {
    "text": "application all the ports that i have open will be closed again okay for the reason",
    "start": "3184079",
    "end": "3190079"
  },
  {
    "text": "again so it's very important it's very important that the retry logic and also how you manage",
    "start": "3190079",
    "end": "3196480"
  },
  {
    "text": "your errors okay the error the possible error the possible files it's very important",
    "start": "3196480",
    "end": "3201760"
  },
  {
    "text": "about it just not just only for the connection even for the executions okay about it so",
    "start": "3201760",
    "end": "3208000"
  },
  {
    "text": "we are going to reach one situation that mutually uh we are going to receive a meanwhile",
    "start": "3208000",
    "end": "3214000"
  },
  {
    "text": "much right we will receive this error i would like to show you other things for example",
    "start": "3214000",
    "end": "3221599"
  },
  {
    "text": "using for example java what is the the retired logic that i",
    "start": "3221599",
    "end": "3226800"
  },
  {
    "text": "have in java again the same my main idea was to create a special class that",
    "start": "3226800",
    "end": "3235599"
  },
  {
    "text": "that i have in in in c sharps that i i'm going to retry the connection",
    "start": "3235599",
    "end": "3242960"
  },
  {
    "text": "uh i'm going to retry the connection and also the main idea that i have",
    "start": "3242960",
    "end": "3249440"
  },
  {
    "text": "in this code it's for a it's also about um it's a to know how much time",
    "start": "3249440",
    "end": "3256800"
  },
  {
    "text": "took a microwave okay as you could see i'm connecting to the to the database",
    "start": "3256800",
    "end": "3263599"
  },
  {
    "text": "running some queries for example as you could see here",
    "start": "3263599",
    "end": "3269838"
  },
  {
    "text": "i have an error because as i mentioned before my t-shirt is running it's a",
    "start": "3270880",
    "end": "3277440"
  },
  {
    "text": "we reach the maximum number of concurrent connections that i have for this database tier right now my applications are not able",
    "start": "3277440",
    "end": "3284160"
  },
  {
    "text": "to connect because even i'm not able to connect because my problem is i reach 600 a",
    "start": "3284160",
    "end": "3289839"
  },
  {
    "text": "concurrent connection i'm not closing anything and i'm going to have the same problem for",
    "start": "3289839",
    "end": "3295040"
  },
  {
    "text": "other applications and also i'm going to have the same problem for example let's say for let's say for",
    "start": "3295040",
    "end": "3302720"
  },
  {
    "text": "php if i run my php situation as you can see i'm going to have the",
    "start": "3302720",
    "end": "3309119"
  },
  {
    "text": "same message okay so what is the as i mentioned the lesson learned is a",
    "start": "3309119",
    "end": "3315839"
  },
  {
    "text": "try to implement the retry look i'm going to stop the application much probably right now",
    "start": "3315839",
    "end": "3321839"
  },
  {
    "text": "after the retry logic that i have for php or that i have for for java",
    "start": "3321839",
    "end": "3329280"
  },
  {
    "text": "they are going to establish the connection again and i could retrieve for example right now using php",
    "start": "3329280",
    "end": "3336480"
  },
  {
    "text": "in terms of milliseconds this is the time that they spend in order to connect to run some process",
    "start": "3336480",
    "end": "3341839"
  },
  {
    "text": "and also here i add this time so it's very important when",
    "start": "3341839",
    "end": "3349520"
  },
  {
    "text": "you are working in in these sets of things okay so um i have more examples but",
    "start": "3349520",
    "end": "3356559"
  },
  {
    "text": "i will like just sorry to before finishing this presentation normally i used to",
    "start": "3356559",
    "end": "3364799"
  },
  {
    "text": "i used to to share this best best practice in when you are",
    "start": "3364799",
    "end": "3370319"
  },
  {
    "text": "coding about how to configure how to prevent the problem how to execute or",
    "start": "3370319",
    "end": "3377680"
  },
  {
    "text": "how to monitor for example several things for sure er",
    "start": "3377680",
    "end": "3382880"
  },
  {
    "text": "the recommendation about a use the protocol tcp 4143 for sure right now sql usher manage",
    "start": "3382880",
    "end": "3390640"
  },
  {
    "text": "instance uh just only reply the connection or try to connect the connection using tcp and also the one for the port one four",
    "start": "3390640",
    "end": "3397040"
  },
  {
    "text": "three three what is the recommendation if you use tcp um the port one four three three in the connection screen at the end",
    "start": "3397040",
    "end": "3403680"
  },
  {
    "text": "you're not going to you know and you're going to receive an exact problem that you have because if you're not using this one",
    "start": "3403680",
    "end": "3409760"
  },
  {
    "text": "most probably the error message that you're going to that you're going to receive will be different because",
    "start": "3409760",
    "end": "3416240"
  },
  {
    "text": "in for example in net if you are not a specified protocol",
    "start": "3416240",
    "end": "3421520"
  },
  {
    "text": "the client will try to connect using different protocols let's say nine pipes let's say um",
    "start": "3421520",
    "end": "3429599"
  },
  {
    "text": "nine parts divides etc but this is the most important thing for sure follow up the best practice",
    "start": "3429599",
    "end": "3434880"
  },
  {
    "text": "about the connection time connection tying out use the connection pulling multiple",
    "start": "3434880",
    "end": "3440240"
  },
  {
    "text": "things about try to avoid to use multiple active result sets it's needed so open a connection uh as far as",
    "start": "3440240",
    "end": "3447520"
  },
  {
    "text": "possible acted okay so i think that we reached the the time of the",
    "start": "3447520",
    "end": "3452880"
  },
  {
    "text": "presentation again if you have any question you have my detail of contact here you",
    "start": "3452880",
    "end": "3458240"
  },
  {
    "text": "could send me an email if you need anything or you have any question also i could share with you",
    "start": "3458240",
    "end": "3466559"
  },
  {
    "text": "this code that contain other other tests that i did even using multiple threads okay",
    "start": "3466559",
    "end": "3474720"
  },
  {
    "text": "i don't know if we have any questions uh it doesn't look like it let me check",
    "start": "3474720",
    "end": "3481119"
  },
  {
    "text": "the slack real quick okay no nothing else either",
    "start": "3481119",
    "end": "3486799"
  },
  {
    "text": "okay great thank you so much and finish some time right yes one hour okay perfect so again we",
    "start": "3486799",
    "end": "3494640"
  },
  {
    "text": "have many other situations many other tests uh the basic things please as i mentioned before it's very",
    "start": "3494640",
    "end": "3501599"
  },
  {
    "text": "important if you want to save your money it's very important that the developer and the dva work together",
    "start": "3501599",
    "end": "3507839"
  },
  {
    "text": "okay i think that in summary is very important try to try to invest your time in your",
    "start": "3507839",
    "end": "3513280"
  },
  {
    "text": "code if you invest your time in your code in order to be fast in order to run faster and all in order",
    "start": "3513280",
    "end": "3518559"
  },
  {
    "text": "to manage the error that you have i promise that you are going to pay just only the money that you need for running or working on you",
    "start": "3518559",
    "end": "3526799"
  },
  {
    "text": "again alan thank you so much for your time i i think that i hope that you'll really",
    "start": "3526799",
    "end": "3532160"
  },
  {
    "text": "enjoy with this session thank you so much for giving this",
    "start": "3532160",
    "end": "3537280"
  },
  {
    "text": "opportunity you",
    "start": "3542839",
    "end": "3549200"
  }
]