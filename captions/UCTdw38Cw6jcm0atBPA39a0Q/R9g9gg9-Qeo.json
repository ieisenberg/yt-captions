[
  {
    "text": "I think we will start okay yeah okay thanks everyone for coming it's great to",
    "start": "5520",
    "end": "12719"
  },
  {
    "text": "see that a lot of people came so early in the morning still drinking your coffees my name is Rizzo hock I come all",
    "start": "12719",
    "end": "19740"
  },
  {
    "text": "the way from Europe I work for Microsoft and today we will be talking about powering hundred million users daily a",
    "start": "19740",
    "end": "27590"
  },
  {
    "text": "bit about me I work as a senior software engineer at Microsoft have been working",
    "start": "27590",
    "end": "34350"
  },
  {
    "text": "there for more than eight years now I've been part of the core team member",
    "start": "34350",
    "end": "39810"
  },
  {
    "text": "building the Microsoft Office graph if you are a familiar with it that what I did in that project was mainly focus on",
    "start": "39810",
    "end": "47970"
  },
  {
    "text": "the storage on how we store user relationships on disk so that they can",
    "start": "47970",
    "end": "53010"
  },
  {
    "text": "be queried in an optimized fashion there's a lots of interesting stories around ok this actually jumped over yeah",
    "start": "53010",
    "end": "60300"
  },
  {
    "text": "so there is a lot of interesting stories around that but today we are going to talk about something else in the last",
    "start": "60300",
    "end": "65880"
  },
  {
    "text": "two years have been working with a team where we build people experiences for Microsoft Office 365 offering how many",
    "start": "65880",
    "end": "73770"
  },
  {
    "text": "of you know about office 65 can you raise your hand ok that's great ok do you use it ok so at least we will talk",
    "start": "73770",
    "end": "83130"
  },
  {
    "text": "about some experience that you already use so I've been a tech lead for a few",
    "start": "83130",
    "end": "89369"
  },
  {
    "text": "of the services which powers these experiences in office 65 across all the",
    "start": "89369",
    "end": "94529"
  },
  {
    "text": "workloads from Outlook to over to SharePoint to onedrive so what do we",
    "start": "94529",
    "end": "100289"
  },
  {
    "text": "want to do for example the cool mission for Microsoft is that we want to empower",
    "start": "100289",
    "end": "105719"
  },
  {
    "text": "people to do more at work this is why office 65 exists this is why a lot of productivity tool exists today and our",
    "start": "105719",
    "end": "113130"
  },
  {
    "text": "team wanted to looked at it and said when you want to communicate with a person you can chat you can call over",
    "start": "113130",
    "end": "120209"
  },
  {
    "text": "Skype you can collaborate through slides documents and whatnot right and I guess a lot of you do that on a daily basis",
    "start": "120209",
    "end": "126689"
  },
  {
    "text": "but you also talk to your clients which are new you don't have no idea who they are you also sometimes talk to your",
    "start": "126689",
    "end": "132120"
  },
  {
    "text": "manager or a person who's new in the company wants to know who you are what you have worked on so you want to be",
    "start": "132120",
    "end": "137160"
  },
  {
    "text": "able to contextualize the person you're working and collaborating that's what we wanted to build we wanted to",
    "start": "137160",
    "end": "142430"
  },
  {
    "text": "build an experience when you could have a 360 view of a person and understand",
    "start": "142430",
    "end": "147440"
  },
  {
    "text": "immediately who this person is how can I reach him what kind of things is he or she working on so the experience that",
    "start": "147440",
    "end": "155030"
  },
  {
    "text": "disciplined me jumps okay yeah so this is the experience that we kind of went a",
    "start": "155030",
    "end": "161660"
  },
  {
    "text": "built and which actually captures all this information for you to be able to",
    "start": "161660",
    "end": "167030"
  },
  {
    "text": "actually power this experience you need some set of data right and luckily for",
    "start": "167030",
    "end": "172670"
  },
  {
    "text": "us in over 65 all these workloads already have this data its present the",
    "start": "172670",
    "end": "179750"
  },
  {
    "text": "challenge however is that all this data about the person is fragmented across all these services and each of the",
    "start": "179750",
    "end": "186140"
  },
  {
    "text": "services have a different availability requirements it has different performance some of them must know as",
    "start": "186140",
    "end": "192770"
  },
  {
    "text": "slow as a couple of seconds but if you want to build an experience where you want to see who this person is",
    "start": "192770",
    "end": "198650"
  },
  {
    "text": "before you start chatting with someone you cannot wait for seconds worse if if you are doing it on over these 10 data",
    "start": "198650",
    "end": "206330"
  },
  {
    "text": "sources the slowest one is near bottleneck right so you need to build an experience which is fast enough still",
    "start": "206330",
    "end": "212690"
  },
  {
    "text": "yet have the same data from all these data sources so that's what we will talk more about today on how we build that",
    "start": "212690",
    "end": "219230"
  },
  {
    "text": "service to power this experience a bit",
    "start": "219230",
    "end": "224720"
  },
  {
    "text": "about how it looks now if you actually go to Outlook today and you have your",
    "start": "224720",
    "end": "231410"
  },
  {
    "text": "emails and if you click on some one you'll be able to contextualize that person you get this kind of a view right",
    "start": "231410",
    "end": "238430"
  },
  {
    "text": "when you a able to know how to contact this person how to reach that person what kind of files is working on what",
    "start": "238430",
    "end": "244850"
  },
  {
    "text": "kind of LinkedIn view does he have where has it worked before and what are the",
    "start": "244850",
    "end": "249950"
  },
  {
    "text": "documents that you both are collaborating with each other now so this is a feel of experience that we",
    "start": "249950",
    "end": "256730"
  },
  {
    "text": "have built so we only talk about goals high level",
    "start": "256730",
    "end": "264210"
  },
  {
    "text": "goals that we wanted to achieve because of this one is that we wanted to build a service which will do power this",
    "start": "264210",
    "end": "270930"
  },
  {
    "text": "experience and we've needed to be scalable right because we knew upfront",
    "start": "270930",
    "end": "276780"
  },
  {
    "text": "that if we have to ship this to all this office fifty-five workloads then it will",
    "start": "276780",
    "end": "282330"
  },
  {
    "text": "have to serve 100 million daily users so we need to do build the service in a way",
    "start": "282330",
    "end": "287340"
  },
  {
    "text": "that is scalable the second thing we need to ensure that this view that comes",
    "start": "287340",
    "end": "293039"
  },
  {
    "text": "it's super fast and we look at what look at some of the things that we need to reach to those goals and lastly while",
    "start": "293039",
    "end": "300659"
  },
  {
    "text": "you actually go and build a lot of these services you actually add more and more",
    "start": "300659",
    "end": "306150"
  },
  {
    "text": "engineers it becomes successful teams grow people bro code base grow right I think we have realized over and over",
    "start": "306150",
    "end": "313740"
  },
  {
    "text": "again that we do not put enough thought on how we are structuring our cones so I'm gonna talk a bit about that space as",
    "start": "313740",
    "end": "320099"
  },
  {
    "text": "well and what we did there and what worked for us let's start with scaling",
    "start": "320099",
    "end": "325139"
  },
  {
    "text": "the overall architecture let's take a very simplified view of how it looks",
    "start": "325139",
    "end": "330990"
  },
  {
    "text": "today if you this is a very over simplified view of our architecture but I think this kind of captures the main",
    "start": "330990",
    "end": "337440"
  },
  {
    "text": "things that we need to scape so on one hand you have the experiencer you wanna power on the other hand you have all the",
    "start": "337440",
    "end": "343919"
  },
  {
    "text": "data about all that there needed to power that experience right spread across many data services as I said like",
    "start": "343919",
    "end": "350880"
  },
  {
    "text": "LinkedIn ad onedrive SharePoint and you",
    "start": "350880",
    "end": "356639"
  },
  {
    "text": "need to basically bring all this data together reason over all this data aggregated them use some ranking",
    "start": "356639",
    "end": "362759"
  },
  {
    "text": "algorithms to rank what data useful for the person who's looking at it and then serve that data so you need a service",
    "start": "362759",
    "end": "370039"
  },
  {
    "text": "and then you build this middle tier service and you basically fetch all this data and you show this experience the",
    "start": "370039",
    "end": "377490"
  },
  {
    "text": "problem is however that as I said the data services were not fast enough to give data back in a responsive way so",
    "start": "377490",
    "end": "384870"
  },
  {
    "text": "what do we do we just like had a cache right on top of it so very simple",
    "start": "384870",
    "end": "390060"
  },
  {
    "text": "architecture you build a service you put a cache to make sure that you have your data source",
    "start": "390060",
    "end": "395680"
  },
  {
    "text": "the data needed available in the cash flow can actually do the needed processing under service experience so",
    "start": "395680",
    "end": "402730"
  },
  {
    "text": "if you look at it the main two or three things that we need to scale for this entire architecture to scale is that you",
    "start": "402730",
    "end": "408490"
  },
  {
    "text": "need to make sure that your middle guess service is scaleable you need to make sure this varies cash that you are using",
    "start": "408490",
    "end": "414280"
  },
  {
    "text": "it's scalable and all the data sources that you are talking to if you put more load to them they are scalable as well",
    "start": "414280",
    "end": "420160"
  },
  {
    "text": "in addition right so that at least these three things that you need to make sure that they're scalable so you need to",
    "start": "420160",
    "end": "426130"
  },
  {
    "text": "ensure that the compute that you have scalable the radius you have scalable and the data service that you have are",
    "start": "426130",
    "end": "433210"
  },
  {
    "text": "using there all these resources are scalable does everyone know what radius cache is yeah there's a lot of nodding",
    "start": "433210",
    "end": "440800"
  },
  {
    "text": "heads but for people who do not know it's a simple cache it's a network attached in-memory cache it's something",
    "start": "440800",
    "end": "445990"
  },
  {
    "text": "that I do provides out of the box for us it's managed so you don't have to host a VM and then won it for yourself you can",
    "start": "445990",
    "end": "451360"
  },
  {
    "text": "just talk to it and you'll manage it for you if you look at this the first thing",
    "start": "451360",
    "end": "456610"
  },
  {
    "text": "we did is that we went to all this data service and said ok we are going to put this much of load on you eventually can",
    "start": "456610",
    "end": "462400"
  },
  {
    "text": "you handle it and the answer was yes with some caveats right so we are not going to talk about those so but it's",
    "start": "462400",
    "end": "468550"
  },
  {
    "text": "important to realize that any dependency that you take you need to make sure that they are scalable or else your overall",
    "start": "468550",
    "end": "473740"
  },
  {
    "text": "architecture is not scalable then you we looked at our computer and you said ok we have the service we need",
    "start": "473740",
    "end": "481240"
  },
  {
    "text": "to make sure that when we have more users that needs to scale up how do we do that these days is very simple to do",
    "start": "481240",
    "end": "487000"
  },
  {
    "text": "that right if you have a stateless service all you do is that you pick your cloud provider for us we picked our",
    "start": "487000",
    "end": "492580"
  },
  {
    "text": "you'll understandably so Amazon Web Services have the same capabilities as",
    "start": "492580",
    "end": "497800"
  },
  {
    "text": "to just get a compute and then you say I want to Auto scan this when load increases and that just happens out of",
    "start": "497800",
    "end": "503050"
  },
  {
    "text": "the box these days right so there's no magic there so we don't talk about that today",
    "start": "503050",
    "end": "508260"
  },
  {
    "text": "cash however is a bit tricky it can be tricky because for us that is one of the",
    "start": "508260",
    "end": "516490"
  },
  {
    "text": "resource which will grow over time as we become more and more successful here as long as we understand our scenarios",
    "start": "516490",
    "end": "522940"
  },
  {
    "text": "better and catch more of the data because it actually helps build the right experience for us that will grow",
    "start": "522940",
    "end": "528110"
  },
  {
    "text": "we knew that and today I should actually provides a premium version of the discussion if you actually pay more you",
    "start": "528110",
    "end": "534829"
  },
  {
    "text": "get scaling out of the box even though we are Microsoft we kind of said yeah it's expensive right it can be built and",
    "start": "534829",
    "end": "542180"
  },
  {
    "text": "schedule ourself so I'm gonna talk about how we did that we kind of in this",
    "start": "542180",
    "end": "548600"
  },
  {
    "text": "picture here you can see that we have the VM or the virtual machine and the service is there and on the right hand",
    "start": "548600",
    "end": "555470"
  },
  {
    "text": "side you can see we have like four instances of Redis and we want to n each",
    "start": "555470",
    "end": "560720"
  },
  {
    "text": "of these instances have around 56 GB of space and what we want to do is that we",
    "start": "560720",
    "end": "567140"
  },
  {
    "text": "want to cache across all these instances that's wrong easier way to partition the",
    "start": "567140",
    "end": "573320"
  },
  {
    "text": "data uniformly across these instances so let's exam for example make a user comes",
    "start": "573320",
    "end": "580070"
  },
  {
    "text": "and looks at someone's card and that call basically ends up to our service at",
    "start": "580070",
    "end": "585440"
  },
  {
    "text": "this point you have a unique cache key you have formed that this is the piece of data I want to store in my cache so",
    "start": "585440",
    "end": "591829"
  },
  {
    "text": "what we do is that we go ahead and do a hash we do a consistent hashing on the key video consider hashing on the key it",
    "start": "591829",
    "end": "599570"
  },
  {
    "text": "has a nice property that it uniformly distribute the output for you right and",
    "start": "599570",
    "end": "604730"
  },
  {
    "text": "it's also one-way hashing so every time you have the same cache key and you do a",
    "start": "604730",
    "end": "611029"
  },
  {
    "text": "constant hashing on that you get the same number we take that number and we do a modulus on the number of instances",
    "start": "611029",
    "end": "617510"
  },
  {
    "text": "we have in this example it would be four so you do that and you get a number out",
    "start": "617510",
    "end": "622730"
  },
  {
    "text": "of that from one to four in this example let's say we ended up in red is zero one",
    "start": "622730",
    "end": "628070"
  },
  {
    "text": "so remember this that we ended up for this cache key on red is 0-1 and if you",
    "start": "628070",
    "end": "635209"
  },
  {
    "text": "do it again you have the same cashy same procedure hashing same modulus of 1 4 you get the same number so it's sticky",
    "start": "635209",
    "end": "641750"
  },
  {
    "text": "right so you get to get back to where you have stored it and because of constant hashing your we distributed",
    "start": "641750",
    "end": "648199"
  },
  {
    "text": "data uniformly across is for this for fills up you know you have more users",
    "start": "648199",
    "end": "654410"
  },
  {
    "text": "you are more successful and now you want to add more capacity to it so what you do is that you just take out of the",
    "start": "654410",
    "end": "660589"
  },
  {
    "text": "shelf and add one more radius instance to this configuration I do topology that's super simple one clicker where you get one",
    "start": "660589",
    "end": "666770"
  },
  {
    "text": "more up but now what will happen is that you have updated your code and say there",
    "start": "666770",
    "end": "671900"
  },
  {
    "text": "are five instances now you do the same thing you come we have the same cache key you do some consistent hashing you",
    "start": "671900",
    "end": "679070"
  },
  {
    "text": "get the same number till here but now you do a modulus on five instead of four because you have five instances and that",
    "start": "679070",
    "end": "686090"
  },
  {
    "text": "means that you would get a number from one to five and you will not get necessarily get one there is a",
    "start": "686090",
    "end": "692060"
  },
  {
    "text": "probability that you men might get one as well then my you might end up in the right instance but there's a good",
    "start": "692060",
    "end": "697880"
  },
  {
    "text": "probability that you will end up in some other because now your distribution is different in this case this is a cache",
    "start": "697880",
    "end": "704060"
  },
  {
    "text": "miss so what is important to note is that if you use the scaling strategy you need to be make sure that you can",
    "start": "704060",
    "end": "710480"
  },
  {
    "text": "tolerate cache misses that when you scale up you will get some cache misses in our case what will happen if there is",
    "start": "710480",
    "end": "717500"
  },
  {
    "text": "a cache miss we just go down back to the downstream service and say hey I don't have it in the cache can you give it to",
    "start": "717500",
    "end": "723170"
  },
  {
    "text": "me right so that works out for us if you actually had persistent storage then",
    "start": "723170",
    "end": "728840"
  },
  {
    "text": "this model will not work you like kind of lose data right so you have to make sure that you can use this scaling model",
    "start": "728840",
    "end": "735500"
  },
  {
    "text": "only when you are able to withstand some loss if you actually had a persistent",
    "start": "735500",
    "end": "741260"
  },
  {
    "text": "data storage instead of cash you had a storage and you wanted to use this when you add one of these new storage you",
    "start": "741260",
    "end": "746750"
  },
  {
    "text": "have to go any partition here you have to move them around and that's a really hard problem and that's the some of the",
    "start": "746750",
    "end": "751790"
  },
  {
    "text": "harder problems that like when you store data you have to solve so now let's look",
    "start": "751790",
    "end": "758990"
  },
  {
    "text": "at so we talked about this building blocks like oh we're scaling up our",
    "start": "758990",
    "end": "764060"
  },
  {
    "text": "computer we're scaling our radius right so we take almost all our resources that we have we bundle it and we deployed in",
    "start": "764060",
    "end": "770390"
  },
  {
    "text": "one datacenter and we say ok this is great like we are serving all this experience from this data center but",
    "start": "770390",
    "end": "777020"
  },
  {
    "text": "let's say that that data center does not have capacity doesn't happen that often has happened to us couple of times so we",
    "start": "777020",
    "end": "783260"
  },
  {
    "text": "kind of said ok if the descendant does not have capacity maybe another data center has capacity we took the entire thing and replicated in another region",
    "start": "783260",
    "end": "790010"
  },
  {
    "text": "right in the same geography we did it for a couple of reasons one is that",
    "start": "790010",
    "end": "795410"
  },
  {
    "text": "if you are in more regions that means people who are living in East to us you",
    "start": "795410",
    "end": "800930"
  },
  {
    "text": "have a data center there your code is more closer to them therefore it's a bit faster right the network hop is closer",
    "start": "800930",
    "end": "807649"
  },
  {
    "text": "the other reason why we did is that we have this ability that if something goes wrong it often doesn't but you have",
    "start": "807649",
    "end": "815149"
  },
  {
    "text": "another thing to fall back on so you have a disaster recovery scenario have more availability if you guys follow a",
    "start": "815149",
    "end": "822139"
  },
  {
    "text": "sure who knows that as your south-central us was down this month yeah so this actually happened right",
    "start": "822139",
    "end": "828980"
  },
  {
    "text": "like there was a lightning strike there's actually a very nice write-up Microsoft like did it very detailed RCA",
    "start": "828980",
    "end": "835129"
  },
  {
    "text": "like root cause analysis on why like a simple lightning strike could take an entire data center down even though we",
    "start": "835129",
    "end": "841819"
  },
  {
    "text": "have a lot of failsafe we have a lot of failsafe in the data center it's not that you treat a while and then",
    "start": "841819",
    "end": "848750"
  },
  {
    "text": "everything goes down right they have a lot of failsafe in every reason Amazon probably has the same all cloud providers have the same yet this kind of",
    "start": "848750",
    "end": "855050"
  },
  {
    "text": "things happen so you if you were only in south central us because all your users were in there you'll be completely down",
    "start": "855050",
    "end": "861560"
  },
  {
    "text": "right so this happened to us and with this setup with the Traffic Manager on top how our traffic just got",
    "start": "861560",
    "end": "867110"
  },
  {
    "text": "redistributed to the other ones because we have a lot so it was almost not a",
    "start": "867110",
    "end": "872300"
  },
  {
    "text": "headed for us but we did see the bleep in our optics that whoops something went wrong and we're like oh",
    "start": "872300",
    "end": "877310"
  },
  {
    "text": "we did something wrong and we went ahead and said okay great it's not us right is",
    "start": "877310",
    "end": "882500"
  },
  {
    "text": "a sure how's your is it down so it's good I think this kind of setup really helps you in those kind of cases when",
    "start": "882500",
    "end": "888649"
  },
  {
    "text": "this actually happens even though it doesn't happen that often it's good to have this kind of setup now you it could",
    "start": "888649",
    "end": "894980"
  },
  {
    "text": "also be that the entire geography in entire US could be wrong I mean very highly unlikely but who knows right like",
    "start": "894980",
    "end": "902269"
  },
  {
    "text": "with all these geopolitical things happen in these days no one knows so you go and actually take the same concept",
    "start": "902269",
    "end": "908689"
  },
  {
    "text": "and build more data centers or stand up your coding more data centers in more regions across the wall right like you",
    "start": "908689",
    "end": "915319"
  },
  {
    "text": "have Latin America you have Europe you do this for two reasons one you want to",
    "start": "915319",
    "end": "920420"
  },
  {
    "text": "be more closer to your user so that you can serve faster and you also have this geo availability zones where if",
    "start": "920420",
    "end": "928160"
  },
  {
    "text": "half of the wall goes down your experience doesn't go down I don't know if it really makes sense to see a car if",
    "start": "928160",
    "end": "933440"
  },
  {
    "text": "half of the wall is not there but we will be available right so it's like fun",
    "start": "933440",
    "end": "939100"
  },
  {
    "text": "was that a question no okay yeah so and if you think about it we started with",
    "start": "939100",
    "end": "946430"
  },
  {
    "text": "simple building blocks we scale we insure the each of them can scale we took all of them compose them together",
    "start": "946430",
    "end": "952100"
  },
  {
    "text": "and then we scaled in the region and then we scaled across geographies now we kind of are everywhere in the world this",
    "start": "952100",
    "end": "958550"
  },
  {
    "text": "is a very nice map of Asia which were it shows all the regions that as you'll",
    "start": "958550",
    "end": "964730"
  },
  {
    "text": "actually has a data center and all some of them are upcoming data centers very soon we kind of like look at this",
    "start": "964730",
    "end": "971569"
  },
  {
    "text": "usually and look at the traffic pattern that we have currently and where are our users located collate those two",
    "start": "971569",
    "end": "978050"
  },
  {
    "text": "information and say these are the places where we need to be and I think I would",
    "start": "978050",
    "end": "983839"
  },
  {
    "text": "encourage a lot of you not just blindly build and deploy your data centers all across the world right the thing is that",
    "start": "983839",
    "end": "990740"
  },
  {
    "text": "you should know that you want to be in more than one region in more than one geography so that you have this wall",
    "start": "990740",
    "end": "996350"
  },
  {
    "text": "pterence but and you can scale out of the data center but also try to be in places where your users are which will",
    "start": "996350",
    "end": "1003459"
  },
  {
    "text": "actually help you okay so we talked a",
    "start": "1003459",
    "end": "1008829"
  },
  {
    "text": "bit about scaling now let's shift gears and talk about performance so we want to",
    "start": "1008829",
    "end": "1016990"
  },
  {
    "text": "have we kind of say oh we want to have support blazing fast person car I want to like whenever you click a person it",
    "start": "1016990",
    "end": "1023620"
  },
  {
    "text": "should come instantly but what does that really mean right like when you go to the crux of the problem there is this",
    "start": "1023620",
    "end": "1030010"
  },
  {
    "text": "thing notion of user perceived latency how many of you are familiar with this concept of user perceived latency okay",
    "start": "1030010",
    "end": "1036788"
  },
  {
    "text": "couple of hands but what it actually says is that it's not about just serving",
    "start": "1036789",
    "end": "1042610"
  },
  {
    "text": "everything very fast what matters for the user is that he or she sees",
    "start": "1042610",
    "end": "1047678"
  },
  {
    "text": "something on the screen that they can start consuming while the rest of the thing loads if it's like a white page",
    "start": "1047679",
    "end": "1053590"
  },
  {
    "text": "for like three seconds and everything comes after that it's not that good if",
    "start": "1053590",
    "end": "1058659"
  },
  {
    "text": "some parts of the card which are important like for example if for news if the headlines on the picture",
    "start": "1058659",
    "end": "1063670"
  },
  {
    "text": "comes then that's the first information that the user is consuming and then the rest of the news can come right so we",
    "start": "1063670",
    "end": "1069580"
  },
  {
    "text": "look at our experience and says what does user facilities mean for us the",
    "start": "1069580",
    "end": "1075160"
  },
  {
    "text": "experience would be that you get the card and then you get the rest of the card and we believe that if you can see",
    "start": "1075160",
    "end": "1081490"
  },
  {
    "text": "the first part of the card you have actually contextualized that person enough to be hooked to stay for the rest",
    "start": "1081490",
    "end": "1086770"
  },
  {
    "text": "of the car to load and therefore we put some perfect garments for ourselves and",
    "start": "1086770",
    "end": "1091870"
  },
  {
    "text": "we said we want to be able to render this top part of the card in 250",
    "start": "1091870",
    "end": "1097150"
  },
  {
    "text": "milliseconds end-to-end that means starting from the browser getting all",
    "start": "1097150",
    "end": "1102220"
  },
  {
    "text": "the data out and rendering it right so that's like end-to-end perfect number",
    "start": "1102220",
    "end": "1107470"
  },
  {
    "text": "that we want to achieve and the rest of the card could render in 600 milliseconds then that's okay and that's",
    "start": "1107470",
    "end": "1112840"
  },
  {
    "text": "also pretty hard to do but I think we'll focus more on the top part let's again",
    "start": "1112840",
    "end": "1119500"
  },
  {
    "text": "look at the architecture we had we said we have a service which basically takes",
    "start": "1119500",
    "end": "1124600"
  },
  {
    "text": "all this data out does it's magic and then serves the experience and we put a cache so that there is no delay at least",
    "start": "1124600",
    "end": "1132010"
  },
  {
    "text": "fitting this data imagine you had this architecture and I go and click on one of my colleagues the request comes to",
    "start": "1132010",
    "end": "1138640"
  },
  {
    "text": "the service the service basically looks up the cache there's nothing in the cache when it's the first time you're looking up you go fetch all this data do",
    "start": "1138640",
    "end": "1145750"
  },
  {
    "text": "it it takes a few seconds yeah I'm not really happy I'm never using the card like what do I do because it's not but",
    "start": "1145750",
    "end": "1152860"
  },
  {
    "text": "if you had clicked it for the second time then it comes to the service comes to the cache you get a cache hit it's",
    "start": "1152860",
    "end": "1158049"
  },
  {
    "text": "instant but does it really matter if the second term is instant it doesn't right",
    "start": "1158049",
    "end": "1163570"
  },
  {
    "text": "because what when I really need that information it was the first time when I wanted to contextualize I don't want to",
    "start": "1163570",
    "end": "1169660"
  },
  {
    "text": "be the book guy go and populate your experiences cache so that next time I can actually use it so what I'm getting",
    "start": "1169660",
    "end": "1175660"
  },
  {
    "text": "at is that this cache is there but then you need to make sure that cache is populated beforehand before you actually",
    "start": "1175660",
    "end": "1182919"
  },
  {
    "text": "need it somehow so we do something called profession cache which is a standard technique I would say and if we",
    "start": "1182919",
    "end": "1191770"
  },
  {
    "text": "look at our experience let's say we take Outlook the picture looks bad here bad resolution but it's not",
    "start": "1191770",
    "end": "1198910"
  },
  {
    "text": "that bad I guess a lot of you use Outlook so you know that looks great so",
    "start": "1198910",
    "end": "1205390"
  },
  {
    "text": "for example I think at least we'll get the idea here that you have you load the card and then you have a bunch of people",
    "start": "1205390",
    "end": "1211600"
  },
  {
    "text": "in the card like people who send you emails the conversation threads and you will be able to click in any of this",
    "start": "1211600",
    "end": "1217780"
  },
  {
    "text": "person and say who's this person is sending me emails like what is he working on and stuff like that right that's the goal",
    "start": "1217780",
    "end": "1223200"
  },
  {
    "text": "the good thing over this is that no none of you I hope open outlook and",
    "start": "1223200",
    "end": "1228790"
  },
  {
    "text": "immediately go and click on someone I don't want to care about email I just want to open and click right it doesn't happen like that so most users like open",
    "start": "1228790",
    "end": "1235450"
  },
  {
    "text": "maybe takes a few seconds to gloss over the experience and then wants to say",
    "start": "1235450",
    "end": "1240670"
  },
  {
    "text": "that who is this person so those couple of seconds are super important for us what we do is that in that couple of seconds we kind of figure",
    "start": "1240670",
    "end": "1247750"
  },
  {
    "text": "out all the people which are visibly rendered in this page and we can just",
    "start": "1247750",
    "end": "1252970"
  },
  {
    "text": "send a preferred signal saying that hey you know what someone might actually click on this person to know who this is",
    "start": "1252970",
    "end": "1259360"
  },
  {
    "text": "so go and prefetch this and go and cache it and then we solve this the first bootstrap problem for this user right so",
    "start": "1259360",
    "end": "1267160"
  },
  {
    "text": "now when I go and click on someone I get an instant card because that was professional cached the probability is",
    "start": "1267160",
    "end": "1272530"
  },
  {
    "text": "very high for that to happening and we have seen in our system that that actually works for us we have a cache",
    "start": "1272530",
    "end": "1278320"
  },
  {
    "text": "hit ratio of around 93 93 percent now at some point we have 98 I don't know we",
    "start": "1278320",
    "end": "1284710"
  },
  {
    "text": "regressed a bit but 93 is pretty good and our ambition is to be at 99 we are",
    "start": "1284710",
    "end": "1291010"
  },
  {
    "text": "working on that so if you look at it what is that we just looked at our",
    "start": "1291010",
    "end": "1297430"
  },
  {
    "text": "scenario we took a simple heuristics and then use that to actually profession cache but if you but there is also a lot",
    "start": "1297430",
    "end": "1305470"
  },
  {
    "text": "of resource way waste on when you do prefer some cash right I want to highlight that you have like 50 people",
    "start": "1305470",
    "end": "1311170"
  },
  {
    "text": "for example in that page you professed and cached for all these 50 people because you thought they might click and",
    "start": "1311170",
    "end": "1318190"
  },
  {
    "text": "you don't want to be slow when they click but maybe the user just clicked on one person or maybe five maximum didn't",
    "start": "1318190",
    "end": "1323740"
  },
  {
    "text": "click on 50 or 50 of them for sure that we know from data that means the data that you did not click are all",
    "start": "1323740",
    "end": "1330700"
  },
  {
    "text": "wasted it both wasted my computer resource it wasted my cash resources it wasted some resources downstream for",
    "start": "1330700",
    "end": "1337360"
  },
  {
    "text": "those services to actually give me that data so now we are starting to use",
    "start": "1337360",
    "end": "1343570"
  },
  {
    "text": "machine learning models where we can predict based on all the people that you interact with who are the people who are",
    "start": "1343570",
    "end": "1349929"
  },
  {
    "text": "very strange to you so you have no idea who these people are and then a probability for you actually going and trying to know who this person is is",
    "start": "1349929",
    "end": "1356380"
  },
  {
    "text": "very high so then we kind of like group them and we say hey like out of this 50",
    "start": "1356380",
    "end": "1361690"
  },
  {
    "text": "if you can fetch only these 15 people then we know based on the data from",
    "start": "1361690",
    "end": "1368139"
  },
  {
    "text": "before that the likelihood of them clicking is more than 90% for example",
    "start": "1368139",
    "end": "1373149"
  },
  {
    "text": "like this is a hypothetical example that means you can remove the rest of the 40 people are not profession cash for them",
    "start": "1373149",
    "end": "1378700"
  },
  {
    "text": "and take the heat if anyone happened to do it then we are slow but then their",
    "start": "1378700",
    "end": "1384100"
  },
  {
    "text": "machine learning model basically learns and over time it becomes better and better this allows us to become more efficient",
    "start": "1384100",
    "end": "1392518"
  },
  {
    "text": "so you have the cash on the service side that's it but then and to get the cash",
    "start": "1393720",
    "end": "1400570"
  },
  {
    "text": "like from the service to get the cash it's single digit milliseconds you can if you want to read something from your",
    "start": "1400570",
    "end": "1406720"
  },
  {
    "text": "discussion it's like two seconds three seconds maximum it takes nine seconds I",
    "start": "1406720",
    "end": "1412570"
  },
  {
    "text": "think the maximum that I've seen it's a single threaded model it's pretty good very efficient right so that's not a",
    "start": "1412570",
    "end": "1418809"
  },
  {
    "text": "bottleneck so now you just spin this up five milliseconds here but then you have to send the data back all the way to",
    "start": "1418809",
    "end": "1424120"
  },
  {
    "text": "your client right so you just do a simple rest request what can go wrong like remember that we have this two 50",
    "start": "1424120",
    "end": "1431289"
  },
  {
    "text": "millisecond goal and we measured it and it's 600 milliseconds in between I was",
    "start": "1431289",
    "end": "1437620"
  },
  {
    "text": "like okay what's happening there's something happening behind the scenes",
    "start": "1437620",
    "end": "1443529"
  },
  {
    "text": "right you are using an HTTP so you do this three-way handshake to form the secure connection TLS and all that so it",
    "start": "1443529",
    "end": "1450850"
  },
  {
    "text": "turns out it's pretty slow it like just to send the data back it's 600",
    "start": "1450850",
    "end": "1456309"
  },
  {
    "text": "milliseconds on networks which are bad and we are not able to meet our goal even though all the things are cached on",
    "start": "1456309",
    "end": "1461889"
  },
  {
    "text": "our and of course there are monsters in the internet as well right which drags",
    "start": "1461889",
    "end": "1467470"
  },
  {
    "text": "everything down right that's there it's the truth so and so now what we are what",
    "start": "1467470",
    "end": "1474460"
  },
  {
    "text": "I'm getting at is that to be able to transfer this data all the way there we need to reduce this TLS handshake but",
    "start": "1474460",
    "end": "1481870"
  },
  {
    "text": "you still need to be secure so one way to do that is to use a tunnel right like you can use WebSockets or signal or",
    "start": "1481870",
    "end": "1488560"
  },
  {
    "text": "whatnot to form this tunnel while you're forming this tunnel you do this scalar handshake and you form that connection",
    "start": "1488560",
    "end": "1495340"
  },
  {
    "text": "but then all the other requests just Spanish through it we can have chose to go with signal or it was very easy to",
    "start": "1495340",
    "end": "1501700"
  },
  {
    "text": "start with didn't have you guys use signal or lots of people use signal are",
    "start": "1501700",
    "end": "1507970"
  },
  {
    "text": "and I tell you the main thing that we learned it was that signal is very good",
    "start": "1507970",
    "end": "1514150"
  },
  {
    "text": "if you want to have a duplex channel open with multiple clients because it keeps it has bookkeeping and it has a",
    "start": "1514150",
    "end": "1521020"
  },
  {
    "text": "backplane on the server side to maintain all the state and it knows what message has sent and we sends it it's pretty",
    "start": "1521020",
    "end": "1526450"
  },
  {
    "text": "good right that comes with the cost I'll come to that in a bit but normally we",
    "start": "1526450",
    "end": "1532000"
  },
  {
    "text": "just send signals and then we just measure it and it says 230 milliseconds so like 5 milliseconds here 230",
    "start": "1532000",
    "end": "1538840"
  },
  {
    "text": "milliseconds to send it like to get the Wreckers and send it back and we get to",
    "start": "1538840",
    "end": "1543880"
  },
  {
    "text": "reach our goal and be very happy about trying your bits Marc issues were like yes we like met this goal at this point",
    "start": "1543880",
    "end": "1551380"
  },
  {
    "text": "we know we are scalable as well like life is good we have a 1 million daily",
    "start": "1551380",
    "end": "1556750"
  },
  {
    "text": "active users like what do we do next we can just scale up right so as I say we",
    "start": "1556750",
    "end": "1562840"
  },
  {
    "text": "had 1 million and we wanted to go to 70 because that's the amount of load that we already knew that existed in in the",
    "start": "1562840",
    "end": "1568900"
  },
  {
    "text": "cloud for 55 already so we say ok we go throw money to the problem add some",
    "start": "1568900",
    "end": "1576340"
  },
  {
    "text": "bunch of machines and scale it up right that is all good so we started rolling out and we onboarding more and more",
    "start": "1576340",
    "end": "1583480"
  },
  {
    "text": "bigger organizations enable it for that experience and what happened is that",
    "start": "1583480",
    "end": "1588610"
  },
  {
    "text": "suddenly we started realizing that we had all this bunch of resources but some of those machines were burning up",
    "start": "1588610",
    "end": "1595370"
  },
  {
    "text": "not all of them but some of them right was very strange like you're like why is the traffic like what is happening",
    "start": "1595370",
    "end": "1604070"
  },
  {
    "text": "behind the scenes for which I have so much of resource but they are not being used but some of those vm's are struggling their CPU usage spiked in",
    "start": "1604070",
    "end": "1610580"
  },
  {
    "text": "like 80 percent and slow things down some of them in crashed and rebooted themselves and then again went to the",
    "start": "1610580",
    "end": "1616130"
  },
  {
    "text": "same mode it was like chaos so we kind of rolled back the users and started investigating and saying okay what is",
    "start": "1616130",
    "end": "1622850"
  },
  {
    "text": "happening here remember this thing that we used for signal hour and we were like yes we've made our performance core",
    "start": "1622850",
    "end": "1628190"
  },
  {
    "text": "turns out was not a great idea and what was happening is that signal on has this",
    "start": "1628190",
    "end": "1634880"
  },
  {
    "text": "thing that because it maintains the back plane maintains the state behind the scenes it wants to connect if your",
    "start": "1634880",
    "end": "1640550"
  },
  {
    "text": "connection basically drops you want to connect back to the same back-end server so they can use that state so that it's",
    "start": "1640550",
    "end": "1646100"
  },
  {
    "text": "a bit faster right that's an optimization trick so we have one an enabled IP affinity in traffic manager",
    "start": "1646100",
    "end": "1652850"
  },
  {
    "text": "so that if the connection any drops usually connect back to the same VM right and this actually was the main",
    "start": "1652850",
    "end": "1659929"
  },
  {
    "text": "problem but you like to understand it better is that okay you have a bunch of",
    "start": "1659929",
    "end": "1665630"
  },
  {
    "text": "users you have a connection with one guy it gets to be connected he connects back what's the problem why do I get all the",
    "start": "1665630",
    "end": "1671360"
  },
  {
    "text": "traffic to the same VM when we on-boarded these big organizations they all like to be safe and secure so they",
    "start": "1671360",
    "end": "1677660"
  },
  {
    "text": "are all behind a firewall and an act right so they have a single public IP so all this big organization came to all",
    "start": "1677660",
    "end": "1684320"
  },
  {
    "text": "the traffic came to only one VM and because of that even though we had resources left and we could put more",
    "start": "1684320",
    "end": "1690740"
  },
  {
    "text": "money and just add more VMS it did not matter because you could not vertically scale up the virtual machine you needed",
    "start": "1690740",
    "end": "1697190"
  },
  {
    "text": "like I don't know a supercomputer to serve that right so that model did not work so we kind of got we we knew that",
    "start": "1697190",
    "end": "1703910"
  },
  {
    "text": "we have to get rid of signaler because of this the other thing I want to mention is that well very investigating this we also did a lot of profiling to",
    "start": "1703910",
    "end": "1710809"
  },
  {
    "text": "understand is it because we are stupid and we are using a lot of resources somehow there's a deadlock or something",
    "start": "1710809",
    "end": "1716450"
  },
  {
    "text": "right it could happen this kind of symptoms usually means that something goes into a bad state and then that just",
    "start": "1716450",
    "end": "1723560"
  },
  {
    "text": "builds up and during that we kind of figure out that signal are was really",
    "start": "1723560",
    "end": "1728900"
  },
  {
    "text": "using a lot of our resources it was keeping this backplane it was doing all this kind of big objects in heap they",
    "start": "1728900",
    "end": "1735770"
  },
  {
    "text": "were eating about memory garbage collector was not that happy and the idea of the other right so we have to",
    "start": "1735770",
    "end": "1742910"
  },
  {
    "text": "get rid of signal our for the first reason I explained but it would be great to reduce the number of resources that",
    "start": "1742910",
    "end": "1748490"
  },
  {
    "text": "being used and also remember to meet our first goal we had to have a tunnel so we kind of like said okay signal nod did",
    "start": "1748490",
    "end": "1754910"
  },
  {
    "text": "not scale well for our purpose let's go and use WebSockets right it's also a tunnel it's the most simpler right you",
    "start": "1754910",
    "end": "1760550"
  },
  {
    "text": "just have user web server at this point of the project all our code on the",
    "start": "1760550",
    "end": "1766370"
  },
  {
    "text": "server side the Commission start was written or signaler but imagine we are serving more than 1 million users",
    "start": "1766370",
    "end": "1772070"
  },
  {
    "text": "through this commission stack which is single are we signal on the client side as well and now we are saying hey the",
    "start": "1772070",
    "end": "1778610"
  },
  {
    "text": "engine is running we need like change this connection protocol and do WebSockets before I said",
    "start": "1778610",
    "end": "1785540"
  },
  {
    "text": "what we did there is another interesting thing we observed that even though we had signal are for some users wrist was",
    "start": "1785540",
    "end": "1792860"
  },
  {
    "text": "performing better that signal or even ok jumps yeah I mean what was happening is",
    "start": "1792860",
    "end": "1799640"
  },
  {
    "text": "that if you looked at people who are using Mac and when using Safari it happened that their rest across or",
    "start": "1799640",
    "end": "1805910"
  },
  {
    "text": "faster I was like weird right like why would that happen and the hypothesis over there was people who use Mac Mac's",
    "start": "1805910",
    "end": "1813470"
  },
  {
    "text": "are expensive right like everyone agrees and people who could afford mac potentially lived in places where the",
    "start": "1813470",
    "end": "1820070"
  },
  {
    "text": "internet connection was better as well so coupled with the internet connection being better your processing power being",
    "start": "1820070",
    "end": "1825140"
  },
  {
    "text": "better right your overall three-way handshake and everything was more stable you met your peripherals you didn't need",
    "start": "1825140",
    "end": "1831800"
  },
  {
    "text": "a tunnel so we also wanted to have the ability to actually fine-tune and say ok",
    "start": "1831800",
    "end": "1837410"
  },
  {
    "text": "for some users which are able to surf the rest we just do rest but for others we want to use the tunnel and also you",
    "start": "1837410",
    "end": "1844580"
  },
  {
    "text": "want to also have that capability because if you try to establish a web server connection if it does if you fail",
    "start": "1844580",
    "end": "1850400"
  },
  {
    "text": "for try many times you fail which happens a lot it doesn't happen a lot but does happen enough and you if you",
    "start": "1850400",
    "end": "1855890"
  },
  {
    "text": "have millions of users one person is a lot then you want to have the fallback",
    "start": "1855890",
    "end": "1860960"
  },
  {
    "text": "to rest rest is pretty resilient right but we don't want to we already have the signal our communications tank you don't",
    "start": "1860960",
    "end": "1867230"
  },
  {
    "text": "want to go and build a bunch of two more protocols that you delete one you",
    "start": "1867230",
    "end": "1873080"
  },
  {
    "text": "addressed and you add WebSockets that's crazy so what we did is that we said why",
    "start": "1873080",
    "end": "1878210"
  },
  {
    "text": "don't we just do the rest over WebSockets so what that means is that we create like we wrote two layers one on",
    "start": "1878210",
    "end": "1886040"
  },
  {
    "text": "the client side on the on the server side where the client you would just send requests through that layer but they would send a rest request right send a",
    "start": "1886040",
    "end": "1893000"
  },
  {
    "text": "rest request what that layer would do take that rest request packet into small",
    "start": "1893000",
    "end": "1898190"
  },
  {
    "text": "frame and then send it over and on the other side it would just unpack it and then just replay it as a rest request so",
    "start": "1898190",
    "end": "1906020"
  },
  {
    "text": "all my server needed to understand was a rest request all my client needed to do was always send rest but we could find",
    "start": "1906020",
    "end": "1912770"
  },
  {
    "text": "you need else a but it goes through a tunnel or it doesn't go through a tunnel now right so we had those knobs this is",
    "start": "1912770",
    "end": "1918710"
  },
  {
    "text": "something we're trying to open-source I think might be useful some for some people but we haven't done that work yet",
    "start": "1918710",
    "end": "1923810"
  },
  {
    "text": "but I think this really helped us and it reduced the cost on our servers and",
    "start": "1923810",
    "end": "1931300"
  },
  {
    "text": "actually helped us come to a cleaner commissioning stack which is just a waste waste so when a developer comes",
    "start": "1931300",
    "end": "1937250"
  },
  {
    "text": "and adds a new feature they just have to worry about one commissioned stack good",
    "start": "1937250",
    "end": "1943850"
  },
  {
    "text": "then all see all was good we started rolling to more and more users that means more and more features as well",
    "start": "1943850",
    "end": "1950990"
  },
  {
    "text": "people started saying oh I want teams data to show up here I want like chat to show up here because that's important",
    "start": "1950990",
    "end": "1958220"
  },
  {
    "text": "for me when I want to continue ties someone right and then as you become successful with your feature",
    "start": "1958220",
    "end": "1964280"
  },
  {
    "text": "it grows naturally your codebase grows the number of engineers that's working on it grows and the number of teams that",
    "start": "1964280",
    "end": "1970610"
  },
  {
    "text": "you work on that project grows for us we started with like a couple of people",
    "start": "1970610",
    "end": "1975770"
  },
  {
    "text": "like two three and then it grew to almost 50 plus people actively working",
    "start": "1975770",
    "end": "1980990"
  },
  {
    "text": "on the same code base today and the teams like it was one team owning everything and now it's like eight plus",
    "start": "1980990",
    "end": "1987020"
  },
  {
    "text": "teams working across different time zones like from India to like Velma to Europe yeah so there's also a",
    "start": "1987020",
    "end": "1994760"
  },
  {
    "text": "coordination factor and we knew from day one we had the luxury that we knew that we will reach",
    "start": "1994760",
    "end": "2000500"
  },
  {
    "text": "to that point if we do things right so that's the unique position to be in right so we could actually think about",
    "start": "2000500",
    "end": "2005810"
  },
  {
    "text": "how do you wanna structure our code do you wanna just like build it and then see what happens or you want to do micro",
    "start": "2005810",
    "end": "2010940"
  },
  {
    "text": "services or do you want to do monoliths like we were pretty good at doing monoliths like I guess everyone hadn't made that at least Microsoft",
    "start": "2010940",
    "end": "2017150"
  },
  {
    "text": "historically has been very good at doing monoliths like companies like uber and Netflix has pioneered micro services",
    "start": "2017150",
    "end": "2023270"
  },
  {
    "text": "it's also great but it has pros and cons so let's look at one way to do it one",
    "start": "2023270",
    "end": "2028850"
  },
  {
    "text": "way to do it we'll just build another model with this layered architecture you have your view models you have your",
    "start": "2028850",
    "end": "2035810"
  },
  {
    "text": "business layer you have your storage layer so I guess everyone's familiar with monoliths right so I don't want to",
    "start": "2035810",
    "end": "2041690"
  },
  {
    "text": "go into pros and cons you guys are good but high level is it actually a very",
    "start": "2041690",
    "end": "2050000"
  },
  {
    "text": "simplistic model doesn't matter it's pretty big as long as you can deploy it often in many cases which you can do if",
    "start": "2050000",
    "end": "2056510"
  },
  {
    "text": "you have a CI CD pipeline if you have been the right test you can actually deploy it very often as well it doesn't",
    "start": "2056510",
    "end": "2061730"
  },
  {
    "text": "have to say all right someone or it's big so you have deployed once a week I think that's kind of a myth a lot of",
    "start": "2061730",
    "end": "2067580"
  },
  {
    "text": "companies have that problem because they grew over time and they do not have the right set of tests and pipeline to be",
    "start": "2067580",
    "end": "2073100"
  },
  {
    "text": "able to do that but if you're building something from scratch with a monolith you can go and build that because you have to do the same thing if you build",
    "start": "2073100",
    "end": "2078950"
  },
  {
    "text": "another service right it's like no difference between is writing a small service and a big service what is",
    "start": "2078950",
    "end": "2084320"
  },
  {
    "text": "different however is how you structure your code in okay this again jumped okay",
    "start": "2084320",
    "end": "2090889"
  },
  {
    "text": "let's go through this a bit slowly how you structure over code here is that this is their architecture and let's say",
    "start": "2090890",
    "end": "2097760"
  },
  {
    "text": "you want to change something in one of the business logic you have to go into all these layers and kind of change your",
    "start": "2097760",
    "end": "2103670"
  },
  {
    "text": "data a beta business a bit your controllers and views and be trying and the things that change together often",
    "start": "2103670",
    "end": "2109640"
  },
  {
    "text": "and spread across these layers there was a very good talk from Jimmy burger maybe",
    "start": "2109640",
    "end": "2115010"
  },
  {
    "text": "yesterday on vertical scaling that talks a bit about this problem and how you can solve it we did something very similar",
    "start": "2115010",
    "end": "2122750"
  },
  {
    "text": "so I'm going to talk about it a bit on the other hand you could actually like for us we knew they were going to grow",
    "start": "2122750",
    "end": "2128270"
  },
  {
    "text": "we will have more teams so one of the appealing things was okay what if we did micro-services then we could like just say his section of the",
    "start": "2128270",
    "end": "2134540"
  },
  {
    "text": "card is one service and it's just like one team dealing with files one team dealing with emails right that would be",
    "start": "2134540",
    "end": "2140780"
  },
  {
    "text": "great way to scale up more in teams and engineering teams we also saw the",
    "start": "2140780",
    "end": "2146630"
  },
  {
    "text": "pitfalls of micro-services right because like a big company we have done this many times and we know that we don't the",
    "start": "2146630",
    "end": "2152330"
  },
  {
    "text": "right set of tools the right set of abstractions are there right set of patterns up front you will not be",
    "start": "2152330",
    "end": "2158030"
  },
  {
    "text": "successful in this journey if you are just a small team of three so what we",
    "start": "2158030",
    "end": "2163640"
  },
  {
    "text": "did was something in between what we call organized monolith so it is small",
    "start": "2163640",
    "end": "2169970"
  },
  {
    "text": "pieces of microservices if you will but they are not deployable independently",
    "start": "2169970",
    "end": "2176110"
  },
  {
    "text": "they are not scalable independently however they have the same properties they have bounded context the deal about",
    "start": "2176110",
    "end": "2183440"
  },
  {
    "text": "only one domain so all your code about one domain is in the same place so we want to go and change something fine",
    "start": "2183440",
    "end": "2189800"
  },
  {
    "text": "related you just go to that project everything is there in one place and most importantly they communicate with",
    "start": "2189800",
    "end": "2196130"
  },
  {
    "text": "each other through a standard communication stack you cannot just like take a dependence on another project and say oh I just",
    "start": "2196130",
    "end": "2201710"
  },
  {
    "text": "like use it right because that basically mangles your code again eventually you get spaghetti so it's very important for",
    "start": "2201710",
    "end": "2208580"
  },
  {
    "text": "now follow a structure like this that you make sure that the components that you build which you aspire to make sure",
    "start": "2208580",
    "end": "2214940"
  },
  {
    "text": "into micro services later on that they do they communicate well with each other and also of course if you want to follow",
    "start": "2214940",
    "end": "2221540"
  },
  {
    "text": "some of the good principles of micro services you go and build just blocks so that they own their own data so that if",
    "start": "2221540",
    "end": "2226940"
  },
  {
    "text": "there is a data that this person this block owns another person cannot directly access that data you have to go",
    "start": "2226940",
    "end": "2232220"
  },
  {
    "text": "through him if you do those kind of principles so you're just doing micro services in a fashion without getting",
    "start": "2232220",
    "end": "2237350"
  },
  {
    "text": "the benefit of having to deploy them independently maybe that's good for you",
    "start": "2237350",
    "end": "2242690"
  },
  {
    "text": "or you are not able to scale them independently because they are all in one service we take all this is one",
    "start": "2242690",
    "end": "2248090"
  },
  {
    "text": "services deployed once this model kind of was very appealing for us because we kind of said what do you want to achieve",
    "start": "2248090",
    "end": "2253700"
  },
  {
    "text": "as a team and I think this is a question you have to ask if it is that you want your individual teams to deploy fully",
    "start": "2253700",
    "end": "2260630"
  },
  {
    "text": "independently and and that is what autonomous means for you by all means maybe Microsoft's",
    "start": "2260630",
    "end": "2265820"
  },
  {
    "text": "are great for you but if your end goal is that all these services are powering the same experience and I don't like as",
    "start": "2265820",
    "end": "2272390"
  },
  {
    "text": "long as you can deploy it five times a day or with every commit like why do I care if I deploy it or it gets deployed",
    "start": "2272390",
    "end": "2277880"
  },
  {
    "text": "automatically right in many cases we build micro services and then at the end of the day we do docker compose and then",
    "start": "2277880",
    "end": "2284630"
  },
  {
    "text": "we sell because this hour together so you know like deploys together or I want to test it together so you eventually end up coupling some parts of it anyways",
    "start": "2284630",
    "end": "2293500"
  },
  {
    "text": "one of the good things about micro services that I actually really like is that because they are domain oriented",
    "start": "2293500",
    "end": "2299120"
  },
  {
    "text": "it's very easy to go and delete something like you can just say oh there's no traffic on this service should you need to try in this world",
    "start": "2299120",
    "end": "2306170"
  },
  {
    "text": "like in the left hand side wall in the Montek world like how many people dare to go and delete a domain full domain",
    "start": "2306170",
    "end": "2312770"
  },
  {
    "text": "right like it because it's a bit hard to go into all these places and reason over it if you don't have overview you don't",
    "start": "2312770",
    "end": "2319400"
  },
  {
    "text": "do it so it just grows it has more deadweight in this world if you are really good citizen it's very simple to",
    "start": "2319400",
    "end": "2325760"
  },
  {
    "text": "understand what you can delete and this this good property actually follows an organized monitor ID now you have the",
    "start": "2325760",
    "end": "2332540"
  },
  {
    "text": "structured code where you have your entire domain in one place you can just",
    "start": "2332540",
    "end": "2338000"
  },
  {
    "text": "go and delete it if it's not being used you can see the telemetry and then you can delete it so if you look a bit on",
    "start": "2338000",
    "end": "2344030"
  },
  {
    "text": "how we did it and you talk about this military service which does all this magic right so which fragmented into",
    "start": "2344030",
    "end": "2351290"
  },
  {
    "text": "smaller things or blocks if you will we call them provider services I think the naming is a bit wrong",
    "start": "2351290",
    "end": "2357620"
  },
  {
    "text": "because they are not really a service but they are providing a service inside this big block right that's what we call provider services and they own their own",
    "start": "2357620",
    "end": "2365420"
  },
  {
    "text": "state they have clean communication channels and they have the same ones is",
    "start": "2365420",
    "end": "2371360"
  },
  {
    "text": "standardized and each part of the card is being served by one of these blocks so it's a very nice model you can",
    "start": "2371360",
    "end": "2378380"
  },
  {
    "text": "imagine that you could have built smaller micro services which power each of these services but then we kind of",
    "start": "2378380",
    "end": "2385220"
  },
  {
    "text": "just instead of building separate services we structured in this way these are all dll's",
    "start": "2385220",
    "end": "2391160"
  },
  {
    "text": "but then they're act as one big service if you want to call it monolithic sir",
    "start": "2391160",
    "end": "2396920"
  },
  {
    "text": "so you want to go to the organized model it is up to you and as I said like I go",
    "start": "2396920",
    "end": "2403250"
  },
  {
    "text": "and say oh this LinkedIn thing is not used anymore I'm just like deleted right on and this is where the power of",
    "start": "2403250",
    "end": "2408470"
  },
  {
    "text": "immutable services come or immutable blocks come that sometimes you can even",
    "start": "2408470",
    "end": "2413600"
  },
  {
    "text": "go to the extreme and say hey somebody wrote this blog he had some domain knowledge this is very buggy just go and",
    "start": "2413600",
    "end": "2419750"
  },
  {
    "text": "rewrite a block because it's very cleanly separated so if you can rewrite the block and run the same tests just",
    "start": "2419750",
    "end": "2424880"
  },
  {
    "text": "throw away the other one right make them small so you can do that often and you can groom your developers can change",
    "start": "2424880",
    "end": "2431180"
  },
  {
    "text": "your teams can change code can change but over time there will be some of the",
    "start": "2431180",
    "end": "2436190"
  },
  {
    "text": "things which you cannot do with around goodness monolith because you are essentially in the same stack so you",
    "start": "2436190",
    "end": "2441740"
  },
  {
    "text": "have to use the same technologies right one of the other appeals for micro services is that okay you could use different tool sets for different",
    "start": "2441740",
    "end": "2447920"
  },
  {
    "text": "services which is actually useful in many cases just an overview of what it",
    "start": "2447920",
    "end": "2455630"
  },
  {
    "text": "means if you have this one of these building blocks they are formed on bounded context they should be very",
    "start": "2455630",
    "end": "2461990"
  },
  {
    "text": "simple and small they should have data ownership I think this is absolutely mandatory or else you end up in the same",
    "start": "2461990",
    "end": "2469400"
  },
  {
    "text": "place as before and you should should thrive not to have dependency type",
    "start": "2469400",
    "end": "2476180"
  },
  {
    "text": "dependency on each other you can depend on each other for functionality but to a well-established protocol you can",
    "start": "2476180",
    "end": "2481790"
  },
  {
    "text": "achieve that in many ways as I said Jimmy robot-like showed in his vertical slash architecture how many of you",
    "start": "2481790",
    "end": "2487730"
  },
  {
    "text": "attended that talk okay like half of you wish well you well he kind of like showed how",
    "start": "2487730",
    "end": "2494030"
  },
  {
    "text": "to do something similar and what he did is that he if I got him properly he actually implemented the mediator",
    "start": "2494030",
    "end": "2500390"
  },
  {
    "text": "pattern forum that's a pattern where you can build building blocks but they don't depend on each other they go through a",
    "start": "2500390",
    "end": "2506630"
  },
  {
    "text": "mediator to actually consume its functionality right so you could use that but what period was all these",
    "start": "2506630",
    "end": "2513410"
  },
  {
    "text": "blocks all the interfaces for these blocks were pulled out into a common place so if anyone wanted to know I want",
    "start": "2513410",
    "end": "2519890"
  },
  {
    "text": "to consume files because I need it's a dependency you don't depend on the files provide a service you depend on that",
    "start": "2519890",
    "end": "2525350"
  },
  {
    "text": "interfaces project where the interface is there and then you get the implementation get",
    "start": "2525350",
    "end": "2530550"
  },
  {
    "text": "injected for you later on hadron type what this gives us is that if you have this nice abstraction later on it's easy",
    "start": "2530550",
    "end": "2536310"
  },
  {
    "text": "to move to another communication protocol you can just put a rest on top or do whatever right yes so if you look",
    "start": "2536310",
    "end": "2544950"
  },
  {
    "text": "at our product structure it's something like this you have this provider services you know like shared libraries and I",
    "start": "2544950",
    "end": "2550740"
  },
  {
    "text": "think I haven't talked enough about shared libraries when you venture into the wall of micro-services or organized monolith it's super",
    "start": "2550740",
    "end": "2557610"
  },
  {
    "text": "important to have the cross-cutting concerns figure out like your earth monitoring logging bunch of",
    "start": "2557610",
    "end": "2563490"
  },
  {
    "text": "cross-cutting concepts for us caching was a cross-cutting concern because all these blocks would cache right or if you",
    "start": "2563490",
    "end": "2569220"
  },
  {
    "text": "want to talk to storage the same thing so you have to like figure those out and all the provider services will use this",
    "start": "2569220",
    "end": "2575880"
  },
  {
    "text": "libraries standardized right and then even the provider service block you have",
    "start": "2575880",
    "end": "2581310"
  },
  {
    "text": "bunch of this so people just came all they have to do is create a project say",
    "start": "2581310",
    "end": "2586590"
  },
  {
    "text": "that this is my domain use those libraries build their domain and then",
    "start": "2586590",
    "end": "2591690"
  },
  {
    "text": "just be done with it right and then don't forget about deploying on everything it just happens out of the works for you of course you have to own",
    "start": "2591690",
    "end": "2598230"
  },
  {
    "text": "the endpoints that you have for your provider service so that you are accountable for that there's alerting and everything that you",
    "start": "2598230",
    "end": "2604260"
  },
  {
    "text": "own but when you want to reason about one part of the code you come to that particular project based on that domain",
    "start": "2604260",
    "end": "2610920"
  },
  {
    "text": "and the last part of this is that as a",
    "start": "2610920",
    "end": "2616320"
  },
  {
    "text": "problem is paul it by saying is that you could actually take one of these blocks out and you can make them into micro",
    "start": "2616320",
    "end": "2624120"
  },
  {
    "text": "service very easily for two reasons one is that it's already formed with the",
    "start": "2624120",
    "end": "2630630"
  },
  {
    "text": "domain in mind so that was what you would have done if you wanted to create a microphone beginning and it also gave",
    "start": "2630630",
    "end": "2637140"
  },
  {
    "text": "an opportunity to understand if your service boundary is proper because you are in this world you're learning you",
    "start": "2637140",
    "end": "2642450"
  },
  {
    "text": "actually refactor the code many times then you get your boundaries right at this point you're pretty stable to",
    "start": "2642450",
    "end": "2648900"
  },
  {
    "text": "actually spin this up as a microwave all you need to do is a communication protocol you had switch it to rest deploy it as its own",
    "start": "2648900",
    "end": "2656010"
  },
  {
    "text": "service and done right of course done means start off another journey because now you're in a micro service world so",
    "start": "2656010",
    "end": "2661800"
  },
  {
    "text": "it's a new journey that you start but you have delays their journey because I often like talk",
    "start": "2661800",
    "end": "2666810"
  },
  {
    "text": "to many startups and they share a lot of very interesting stories about what they did on how to test micro services or how",
    "start": "2666810",
    "end": "2674460"
  },
  {
    "text": "to run them how to standardize them and they have this great stories and it's actually admiring to even hear the",
    "start": "2674460",
    "end": "2680250"
  },
  {
    "text": "stories but you think if I go and ask them like why did you will start with micro services like often people say I",
    "start": "2680250",
    "end": "2685770"
  },
  {
    "text": "don't know like it was like that right I think a lot of this has to do with hype and not business requirements so what",
    "start": "2685770",
    "end": "2692910"
  },
  {
    "text": "I'm trying to say that try to understand your business requirement it could be that you need to go to micro services",
    "start": "2692910",
    "end": "2698190"
  },
  {
    "text": "but you could start with an organised monolith in our case that has helped us so that is an option to consider as well",
    "start": "2698190",
    "end": "2705620"
  },
  {
    "text": "of course you can do more of this and then you can actually just build one which is completely new using the same",
    "start": "2705620",
    "end": "2712350"
  },
  {
    "text": "standards how am i doing in time okay good so key takeaways we talked about",
    "start": "2712350",
    "end": "2720450"
  },
  {
    "text": "scaling we talked about performance and we talked about scaling code bases and engineers the key takeaway for scaling",
    "start": "2720450",
    "end": "2727470"
  },
  {
    "text": "architectures is that every resource that you have in your architecture needs",
    "start": "2727470",
    "end": "2734370"
  },
  {
    "text": "to be scalable on its own that is the only way to achieve true scalability for",
    "start": "2734370",
    "end": "2739800"
  },
  {
    "text": "your architecture if one of the pieces like for us signal are we didn't even think about it as a resource right but",
    "start": "2739800",
    "end": "2745620"
  },
  {
    "text": "it was fundamentally so that was a resource that we were using to communicate with services that was our",
    "start": "2745620",
    "end": "2750720"
  },
  {
    "text": "bottleneck right and then think about",
    "start": "2750720",
    "end": "2756120"
  },
  {
    "text": "scaling just broader than this PC or datacenter I just go more and more the",
    "start": "2756120",
    "end": "2762900"
  },
  {
    "text": "second is designing for performance like we talked about some examples like all we did this and then we fine-tuned this",
    "start": "2762900",
    "end": "2768960"
  },
  {
    "text": "because this was flow all of this was just possible because we were able to measure it we had optics I think that's the key",
    "start": "2768960",
    "end": "2775620"
  },
  {
    "text": "takeaway you want to like design for performance you need to have visibility",
    "start": "2775620",
    "end": "2781110"
  },
  {
    "text": "on every part of the stack from where your request starts from the browser where does it hit a traffic manager then",
    "start": "2781110",
    "end": "2788400"
  },
  {
    "text": "it goes to a load balance that goes to the VM it goes to your process goes to your thread then it like goes to another",
    "start": "2788400",
    "end": "2795180"
  },
  {
    "text": "service know like the more visibility you have the more you will know what you can do the",
    "start": "2795180",
    "end": "2800300"
  },
  {
    "text": "trade-offs that you can do to make it performant you'll need to understand it so there's a very famous or maybe it's",
    "start": "2800300",
    "end": "2807110"
  },
  {
    "text": "not that famous but I really like this saying from Peter Drucker is that you can't measure it you can't improve it so",
    "start": "2807110",
    "end": "2812300"
  },
  {
    "text": "like design for performance for me this course sums it up like if you can internalize this code then you can",
    "start": "2812300",
    "end": "2819470"
  },
  {
    "text": "actually really design for performance we can know you can you can measure everything on the way then you can",
    "start": "2819470",
    "end": "2825830"
  },
  {
    "text": "really find the ways and your way would be completely different because your scenario is very different so the",
    "start": "2825830",
    "end": "2830960"
  },
  {
    "text": "takeaway is make sure that you understand and have enough optics early in your project the third thing is that",
    "start": "2830960",
    "end": "2839090"
  },
  {
    "text": "scaling engineering should be considered a first class problem often people don't",
    "start": "2839090",
    "end": "2844490"
  },
  {
    "text": "think about this upfront right we kind of like start with this why I want to build this feature I want to have this business I don't know but if you want to",
    "start": "2844490",
    "end": "2851270"
  },
  {
    "text": "build a long-lasting business and long lasting product you need to think about your engineering how will it scale I",
    "start": "2851270",
    "end": "2857180"
  },
  {
    "text": "think like companies like uber and Netflix has reflected a lot on this because they kind of knew that they they",
    "start": "2857180",
    "end": "2864320"
  },
  {
    "text": "were growing superfast and there was no way they can't have like a huge monolithic application which would scale",
    "start": "2864320",
    "end": "2870170"
  },
  {
    "text": "to their needs most often people don't have that problem but you could also",
    "start": "2870170",
    "end": "2876530"
  },
  {
    "text": "think from your core structure point of view I think like the core architecture",
    "start": "2876530",
    "end": "2881690"
  },
  {
    "text": "is as important as your overall resource architecture or your topology on how you manage your resources and it doesn't",
    "start": "2881690",
    "end": "2888890"
  },
  {
    "text": "have to be binary choice between oh I just build a monolith on or else I just build a micro service and take this",
    "start": "2888890",
    "end": "2894920"
  },
  {
    "text": "headache it can be that you start with an organized monolith and then as you",
    "start": "2894920",
    "end": "2900140"
  },
  {
    "text": "mature more you go and you go and much as you mature more you go and actually",
    "start": "2900140",
    "end": "2906800"
  },
  {
    "text": "build into micro services when you have the right set of tools right it doesn't have the bandages so that was all I had",
    "start": "2906800",
    "end": "2913400"
  },
  {
    "text": "for today thank you for coming and listening and I'm here to take some questions if there are any yes",
    "start": "2913400",
    "end": "2920980"
  },
  {
    "text": "yeah yes yes that's actually a very good",
    "start": "2924680",
    "end": "2935880"
  },
  {
    "text": "question I think there was a talk where they said like one of the two hardest problem in the world or in computer science was",
    "start": "2935880",
    "end": "2942380"
  },
  {
    "text": "dispute systems and one was cache invalidation right so you're talking about cache invalidation right like when",
    "start": "2942380",
    "end": "2948390"
  },
  {
    "text": "the cache data becomes stale I think it's a very hard problem to solve we are thinking of solving it for our services",
    "start": "2948390",
    "end": "2955410"
  },
  {
    "text": "we are trying to build hooks back from our data sources so that when anything changes we can push it up to the cache",
    "start": "2955410",
    "end": "2961830"
  },
  {
    "text": "and say okay this data stale you have to go and refresh it right but so far we haven't done it and it seems that we",
    "start": "2961830",
    "end": "2968280"
  },
  {
    "text": "don't have been doing that we have a good enough experience because what we did instead is that we looked at all the data and said if the data is needs to be",
    "start": "2968280",
    "end": "2976890"
  },
  {
    "text": "fresh we don't cash it we take the performance in for example in the card you actually have emails see you it",
    "start": "2976890",
    "end": "2984780"
  },
  {
    "text": "showed you the last three emails that we have interacted with if I'm looking at you if you I send you an email and then",
    "start": "2984780",
    "end": "2989910"
  },
  {
    "text": "immediately in your inbox you have me and you hover on me you'll not see that data if you had cached it all right so",
    "start": "2989910",
    "end": "2995970"
  },
  {
    "text": "then that's a bad experience so you have to like go scenario by scenario and this side is does it make sense to cache is",
    "start": "2995970",
    "end": "3001790"
  },
  {
    "text": "it still get up good enough for your scenario if it is then you cache it and then you have like time to leave so you can tune that how long is it good enough",
    "start": "3001790",
    "end": "3008950"
  },
  {
    "text": "right so I think the answer here is that it depends on your scenario it's a there",
    "start": "3008950",
    "end": "3014090"
  },
  {
    "text": "is no magic or silver bullet for this it is a hard problem we are aware of it for",
    "start": "3014090",
    "end": "3019520"
  },
  {
    "text": "some cases it's important for us to do caching validation that means we did",
    "start": "3019520",
    "end": "3024619"
  },
  {
    "text": "another set of scaling challenges because if you had all these updates happening downstream and you want to push all this up to your cache that's",
    "start": "3024619",
    "end": "3030859"
  },
  {
    "text": "another infrastructure that you have to build yeah does that answer your question right yes",
    "start": "3030859",
    "end": "3037900"
  },
  {
    "text": "yeah yeah yeah yes so I think one of the",
    "start": "3040390",
    "end": "3051109"
  },
  {
    "text": "this also comes back from the same microservice principles right like when you write your code you need to just",
    "start": "3051109",
    "end": "3056180"
  },
  {
    "text": "assume that you all your dependents can fail right that's the first assumption and this is like a different mindset of",
    "start": "3056180",
    "end": "3062150"
  },
  {
    "text": "programming because like we historically started with monoliths where everything was in the stay in process or nothing",
    "start": "3062150",
    "end": "3068299"
  },
  {
    "text": "failed but now all your dependency will fail so the way you write code is different it's just so for us what we do",
    "start": "3068299",
    "end": "3074660"
  },
  {
    "text": "is that we look at what it's supposed to do what kind of data it should give like for example it try to fetch the cache",
    "start": "3074660",
    "end": "3081289"
  },
  {
    "text": "let's say and the cache failed or in so the then what can we do we can do we can",
    "start": "3081289",
    "end": "3087979"
  },
  {
    "text": "say that okay we couldn't get it so the person who called can take a decision that it's fine for me not to serve this",
    "start": "3087979",
    "end": "3094400"
  },
  {
    "text": "experience at this point like that portion will go down for example and because we are also cache based we are",
    "start": "3094400",
    "end": "3101269"
  },
  {
    "text": "able to tolerate some of the cache misses and some of the like data loss so",
    "start": "3101269",
    "end": "3107029"
  },
  {
    "text": "the experience doesn't suffer that much so we didn't have to solve very strict transaction kind of problems that some",
    "start": "3107029",
    "end": "3113719"
  },
  {
    "text": "of you might have yeah any more questions yeah so we have because this",
    "start": "3113719",
    "end": "3131809"
  },
  {
    "text": "is one service right and then you have all these smaller blocks that one service has like we use or in Vickers",
    "start": "3131809",
    "end": "3138079"
  },
  {
    "text": "pipeline so there is a module which does authentication how I envisioned when we extract them into micro services would",
    "start": "3138079",
    "end": "3144469"
  },
  {
    "text": "be similar that we'll have an authentication service up front instead of being a middleware it to just be a",
    "start": "3144469",
    "end": "3149809"
  },
  {
    "text": "service right little a gateway so for now it's our gateway it's kind of you think about it's the request pipeline",
    "start": "3149809",
    "end": "3155719"
  },
  {
    "text": "right everything goes through that so you just put an inbound in authentication there is there any other",
    "start": "3155719",
    "end": "3162589"
  },
  {
    "text": "questions if not thank you very much for coming and listening and I'll hang around so we can also discuss if there",
    "start": "3162589",
    "end": "3169099"
  },
  {
    "text": "are more questions",
    "start": "3169099",
    "end": "3171670"
  }
]