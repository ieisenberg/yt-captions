[
  {
    "start": "0",
    "end": "115000"
  },
  {
    "text": "okay cool so how many of you have been to the last talk okay",
    "start": "8700",
    "end": "14950"
  },
  {
    "text": "so Brock and I have been working for a long time and our interests have been",
    "start": "14950",
    "end": "22240"
  },
  {
    "text": "well it is what we started with has been on the server side so we created this thing called identity server which is an",
    "start": "22240",
    "end": "28210"
  },
  {
    "text": "implementation of Open ID Connect in OAuth because we think that is the you",
    "start": "28210",
    "end": "33400"
  },
  {
    "text": "know that's the right architecture for writing modern modern applications and",
    "start": "33400",
    "end": "40739"
  },
  {
    "text": "after that was done we had more and more customers actually want to use that",
    "start": "40739",
    "end": "46030"
  },
  {
    "text": "right so we have a client so that the server is not good enough right you need someone to talk to so so with the next",
    "start": "46030",
    "end": "54699"
  },
  {
    "text": "thing we got interested in is like what would be the best way or the recommended way of writing clients that connect to a",
    "start": "54699",
    "end": "62199"
  },
  {
    "text": "token-based back-end and we indeed independently of each other",
    "start": "62199",
    "end": "68530"
  },
  {
    "text": "wrote client libraries one me being you know historically more like a native guy",
    "start": "68530",
    "end": "76020"
  },
  {
    "text": "started working on a native library brach being strangely attracted to",
    "start": "76020",
    "end": "81340"
  },
  {
    "text": "JavaScript here so yeah we wrote these",
    "start": "81340",
    "end": "87670"
  },
  {
    "text": "libraries and it turns out that if Ed all our V Vaughn's weren't that good so we had to do a v2 and learned a lot",
    "start": "87670",
    "end": "94930"
  },
  {
    "text": "while doing that and this talk is actually you know basically about what we learned and how these things work and",
    "start": "94930",
    "end": "100720"
  },
  {
    "text": "what what you would need to do manually if these libraries wouldn't exist okay",
    "start": "100720",
    "end": "106500"
  },
  {
    "text": "good so so this is kind of the big picture as additives Dadd the reference",
    "start": "106500",
    "end": "113380"
  },
  {
    "text": "architecture we're talking about it's basically we have a couple of api's and a couple of that applications and",
    "start": "113380",
    "end": "119950"
  },
  {
    "start": "115000",
    "end": "115000"
  },
  {
    "text": "you have a couple of different client types native clients browser-based clients either you know like the classic",
    "start": "119950",
    "end": "126460"
  },
  {
    "text": "web application where the code lifts on the server and the sparse tile where all the code lives on on them in the browser",
    "start": "126460",
    "end": "133030"
  },
  {
    "text": "actually and you have native applications",
    "start": "133030",
    "end": "138069"
  },
  {
    "text": "applications and and and mobile",
    "start": "138069",
    "end": "143379"
  },
  {
    "text": "applications and they all want to you know participate in in this architecture so the thing we you know recommend doing",
    "start": "143379",
    "end": "151510"
  },
  {
    "text": "here because to manage all that complexity is sector out all of your authentication needs into a thing called",
    "start": "151510",
    "end": "157390"
  },
  {
    "text": "a security token service and then you know all the clients will go first to",
    "start": "157390",
    "end": "162670"
  },
  {
    "text": "the token service or get a token you know authenticate the user things like that get a token and then talk used to",
    "start": "162670",
    "end": "169030"
  },
  {
    "text": "token to talk to the APS right so this is kind of like the that the optimal way",
    "start": "169030",
    "end": "174489"
  },
  {
    "text": "to to remove the security complexity from the actual endpoint move them to a separate service if you like",
    "start": "174489",
    "end": "181230"
  },
  {
    "text": "authentication as a service so to speak okay now now to connect your client",
    "start": "181230",
    "end": "190299"
  },
  {
    "start": "187000",
    "end": "187000"
  },
  {
    "text": "applications to that thing called a security token service they need to talk",
    "start": "190299",
    "end": "195629"
  },
  {
    "text": "some protocols okay so we have two protocols we are primarily dealing with",
    "start": "195629",
    "end": "201370"
  },
  {
    "text": "here one is called open ID connect and that's an authentication protocol so whenever your client application wants to know who is the user that is the",
    "start": "201370",
    "end": "208810"
  },
  {
    "text": "protocol to use we also if you wanna know who's you know who's the guy",
    "start": "208810",
    "end": "213940"
  },
  {
    "text": "holding me in my hand right now yeah or you know who is who's sitting in front of the browser or open ID Connect is the",
    "start": "213940",
    "end": "220269"
  },
  {
    "text": "protocol that that authenticates the the user ma'am the second protocol is used for",
    "start": "220269",
    "end": "227010"
  },
  {
    "text": "talking to API so once you know who the user is you want to delegate the identity of that user to the next hop to",
    "start": "227010",
    "end": "234430"
  },
  {
    "text": "your API so the API can do work on behalf of that user and it would be",
    "start": "234430",
    "end": "242530"
  },
  {
    "text": "really bad if these were completely unrelated protocols right so you would need to learn two different things to",
    "start": "242530",
    "end": "248439"
  },
  {
    "text": "achieve something which obviously belongs very closely together so that's",
    "start": "248439",
    "end": "253689"
  },
  {
    "text": "why I open ID connect and OAuth are really just oh of was their first and",
    "start": "253689",
    "end": "262539"
  },
  {
    "text": "then they added stuff to OAuth 2 to to fill the missing gaps to make it serve",
    "start": "262539",
    "end": "268120"
  },
  {
    "text": "both purposes both authentication and and getting those access token there so they are very very similar and",
    "start": "268120",
    "end": "274500"
  },
  {
    "text": "the good news is you only have to learn it once and then you can do both okay now this may might look a little bit",
    "start": "274500",
    "end": "280560"
  },
  {
    "text": "complicated but basically what we're doing is you're focusing on this part today okay only the client side and in",
    "start": "280560",
    "end": "287819"
  },
  {
    "text": "particular we want to focus on first on the the JavaScript scenario so you're",
    "start": "287819",
    "end": "293340"
  },
  {
    "text": "writing a spa application how does this get a token use the token and then it",
    "start": "293340",
    "end": "300659"
  },
  {
    "text": "turns out once you understand that you know like 80% of it already so that only",
    "start": "300659",
    "end": "305909"
  },
  {
    "text": "20% missing - to understand also how you would do it from a native application okay so just to recap that really really",
    "start": "305909",
    "end": "315030"
  },
  {
    "start": "313000",
    "end": "313000"
  },
  {
    "text": "shortly so we are all on the same page the general flow regardless of the",
    "start": "315030",
    "end": "320819"
  },
  {
    "text": "client type you're writing will always be like this the client opens a connection to the token service it sends",
    "start": "320819",
    "end": "327389"
  },
  {
    "text": "the user yeah to that service the user authenticates of the service as the",
    "start": "327389",
    "end": "332879"
  },
  {
    "text": "token service and the token service will establish some sort of authentication session yeah so he he will remember that",
    "start": "332879",
    "end": "338520"
  },
  {
    "text": "user for a certain amount of time and that is obviously also the enabler for a feature called single sign-on right",
    "start": "338520",
    "end": "344729"
  },
  {
    "text": "because once you open the gate once the server remembers you then the next mfp",
    "start": "344729",
    "end": "350009"
  },
  {
    "text": "rope and you don't have to authenticate again because you're being remembered them the outcome of that will be a",
    "start": "350009",
    "end": "356909"
  },
  {
    "text": "so-called identity token which is think of it as a protected data structure that",
    "start": "356909",
    "end": "362759"
  },
  {
    "text": "represents the identity of the user so your client application can know who the user is and it's coming from a trusted",
    "start": "362759",
    "end": "368699"
  },
  {
    "text": "source there are some cryptography around there to make sure these that data structure doesn't get tempered wave",
    "start": "368699",
    "end": "374099"
  },
  {
    "text": "on the way back and the other thing you're getting back is a so called access token and the access token",
    "start": "374099",
    "end": "379590"
  },
  {
    "text": "represents the same user but the recipient of the access token is not the client application it's the API so",
    "start": "379590",
    "end": "386849"
  },
  {
    "text": "basically you take the access token and then just forward it to the API and that in essence means you forwarded or",
    "start": "386849",
    "end": "394110"
  },
  {
    "text": "delegated the identity of the user to your back-end system so make sense is",
    "start": "394110",
    "end": "400320"
  },
  {
    "text": "that all good all clear okay cool so that's",
    "start": "400320",
    "end": "407069"
  },
  {
    "text": "what we do that that's our daily our daily lives in many many years okay but",
    "start": "407069",
    "end": "413190"
  },
  {
    "text": "that that's why sometimes you might miss something which is obvious to us but not for everyone so now how do we write",
    "start": "413190",
    "end": "420000"
  },
  {
    "text": "these client applications and there are two mindsets fear when you go to a company and there they want to write it",
    "start": "420000",
    "end": "426000"
  },
  {
    "text": "application obviously the low-hanging fruit somehow is you know I'm just writing a username password login page",
    "start": "426000",
    "end": "433020"
  },
  {
    "text": "right I've been doing that for years I know how to do that yeah if they have a username and the password and the",
    "start": "433020",
    "end": "439349"
  },
  {
    "text": "login button okay so what's hard about that you know and then I'll just send it and then the",
    "start": "439349",
    "end": "445800"
  },
  {
    "text": "name and the password to the to the token service they give me back a token and from that point on you know I'm I'm",
    "start": "445800",
    "end": "452310"
  },
  {
    "text": "in the other competing approach how to",
    "start": "452310",
    "end": "460770"
  },
  {
    "text": "do that is you don't put the login UI into the client application itself",
    "start": "460770",
    "end": "466289"
  },
  {
    "text": "you're doing a redirect to the server yeah and the server has a login page and",
    "start": "466289",
    "end": "472500"
  },
  {
    "text": "you log in on the server and then the server will send you back to token now",
    "start": "472500",
    "end": "478009"
  },
  {
    "text": "so now that they're just an ongoing debate which approach should I use yeah and there are some advantages and some",
    "start": "478009",
    "end": "485009"
  },
  {
    "text": "disadvantages of of each of these approaches yeah obviously the the biggest advantage and that's why people",
    "start": "485009",
    "end": "490500"
  },
  {
    "text": "love at the you know option number one is they have complete control in their",
    "start": "490500",
    "end": "495599"
  },
  {
    "text": "own application of how the login looks like right so if you're if you have your your your your UI designer in there and",
    "start": "495599",
    "end": "503190"
  },
  {
    "text": "he says no no no I want to control how that login page looks like this button is five pixels way to the right yeah I",
    "start": "503190",
    "end": "509159"
  },
  {
    "text": "want to control that yeah then you know that's one really strong argument but",
    "start": "509159",
    "end": "515880"
  },
  {
    "text": "there are a number of disadvantages you get when building the login UI into the",
    "start": "515880",
    "end": "521130"
  },
  {
    "text": "client application for example single sign-on right so things are non is one",
    "start": "521130",
    "end": "528779"
  },
  {
    "text": "feature you might want to have like let's say you have five applications and you want to allow the user to only sign",
    "start": "528779",
    "end": "535800"
  },
  {
    "text": "in one's and then switch between the applications and don't have to login again how would that work if every",
    "start": "535800",
    "end": "540899"
  },
  {
    "text": "application has its own login page right there there's no shared session between those applications that's one thing you",
    "start": "540899",
    "end": "548760"
  },
  {
    "text": "know if you can argue if this is your client application going against your",
    "start": "548760",
    "end": "554130"
  },
  {
    "text": "back-end and it's your users and you already know the password of these guys because you store it in your database",
    "start": "554130",
    "end": "560459"
  },
  {
    "text": "what's what's wrong about harvesting credentials on the front end yeah and there's not much to say about that but",
    "start": "560459",
    "end": "567510"
  },
  {
    "text": "what about if you're a scenarios get more complex like you have third-party applications for example do you want",
    "start": "567510",
    "end": "572820"
  },
  {
    "text": "that your users type in their password into third-party applications or would",
    "start": "572820",
    "end": "578100"
  },
  {
    "text": "you broader prefer having that in your server as opposed to someone's code that's one thing what about if you want",
    "start": "578100",
    "end": "584760"
  },
  {
    "text": "to enable things like Google authentication no one will type in his Google password into your application",
    "start": "584760",
    "end": "590130"
  },
  {
    "text": "right this will never happen now he shouldn't atleast so yeah so the",
    "start": "590130",
    "end": "597810"
  },
  {
    "text": "Federation scenarios are not really achievable with this approach of I have my own login UI so long story short you",
    "start": "597810",
    "end": "605459"
  },
  {
    "text": "can do option number one you have been warned there are issues with that you",
    "start": "605459",
    "end": "610560"
  },
  {
    "text": "shouldn't do it okay we can really prefer option number two where all of",
    "start": "610560",
    "end": "616770"
  },
  {
    "text": "your login logic is on a server now whatever feature you built their names",
    "start": "616770",
    "end": "623459"
  },
  {
    "text": "passwords Google login Federation with business partners two-factor authentication fraud detection whatever",
    "start": "623459",
    "end": "630209"
  },
  {
    "text": "you only implement at once right and all of your client applications just use",
    "start": "630209",
    "end": "635339"
  },
  {
    "text": "that as a service so to speak and get that feature for free okay yeah good",
    "start": "635339",
    "end": "644100"
  },
  {
    "text": "yeah all right so the first scenario that we're going to look at for these",
    "start": "644100",
    "end": "649170"
  },
  {
    "start": "647000",
    "end": "647000"
  },
  {
    "text": "client applications are spa style JavaScript applications the the target",
    "start": "649170",
    "end": "656070"
  },
  {
    "text": "audience that we're really focusing on here are really pure spa applications where you have all of your rendering in",
    "start": "656070",
    "end": "662490"
  },
  {
    "text": "javascript in the browser you don't have anything on the server other than maybe a file you know serving up files",
    "start": "662490",
    "end": "669899"
  },
  {
    "text": "and then of course because your application to be useful you want to call some sort of web API that's basically the idea so you might think",
    "start": "669899",
    "end": "678000"
  },
  {
    "start": "677000",
    "end": "677000"
  },
  {
    "text": "well in the past I've just used cookies for doing authentication right why do I need to do this token based you know",
    "start": "678000",
    "end": "683699"
  },
  {
    "text": "architecture and it turns out cookies are problematic for spa style or JavaScript style applications there are",
    "start": "683699",
    "end": "690779"
  },
  {
    "text": "a few reasons one of them has to do with the fact that we'll maybe like I just said you don't have any server-side code",
    "start": "690779",
    "end": "696870"
  },
  {
    "text": "running for your application you're doing all your rendering client-side so there's nothing really just send a",
    "start": "696870",
    "end": "702540"
  },
  {
    "text": "cookie back to the API that you're invoking may actually be from a totally",
    "start": "702540",
    "end": "707699"
  },
  {
    "text": "different domain maybe it's a third party API so it's not even coming from you know your server so you can't you",
    "start": "707699",
    "end": "713850"
  },
  {
    "text": "know issue a cookie across that that domain boundary if you do require",
    "start": "713850",
    "end": "719010"
  },
  {
    "text": "cookies to protect or authenticate your web api's then you're fundamentally",
    "start": "719010",
    "end": "724320"
  },
  {
    "text": "limiting yourself to browser-based clients of that and a pretty much has to",
    "start": "724320",
    "end": "729540"
  },
  {
    "text": "be your own client application so your native application would have a hard time calling the Web API or any other",
    "start": "729540",
    "end": "735690"
  },
  {
    "text": "scenario and fundamentally the real reason that the final reason which is the nail in the coffin here is that if",
    "start": "735690",
    "end": "743819"
  },
  {
    "text": "you rely upon cookies for protecting your web api's for authenticating those",
    "start": "743819",
    "end": "749040"
  },
  {
    "text": "calls then you have a anti-air cross-site request forgery of",
    "start": "749040",
    "end": "754260"
  },
  {
    "text": "vulnerability in your application if any of you have ever done MVC in the past right you know that there's this",
    "start": "754260",
    "end": "761190"
  },
  {
    "text": "validate an T forgery stuff that you should be using and so that's a very easy thing to use from you know MVC",
    "start": "761190",
    "end": "767819"
  },
  {
    "text": "running on your server but what about those Ajax api's right cookies are going to be sent to that but you still have",
    "start": "767819",
    "end": "774240"
  },
  {
    "text": "the concern about some other you know tab and the browser making malicious requests to those endpoints just doing a",
    "start": "774240",
    "end": "780810"
  },
  {
    "text": "form post for example so you have to protect that okay and it turns out that",
    "start": "780810",
    "end": "785819"
  },
  {
    "text": "this token based architecture that we're talking about is actually going to to achieve that okay so that's",
    "start": "785819",
    "end": "790980"
  },
  {
    "text": "fundamentally why we're moving towards a token based system so this protocol",
    "start": "790980",
    "end": "797730"
  },
  {
    "start": "794000",
    "end": "794000"
  },
  {
    "text": "called Open ID Connect and OAuth 2 is going to help us you know build this applique",
    "start": "797730",
    "end": "802880"
  },
  {
    "text": "to connect up to some token service that will issue these tokens to us and then",
    "start": "802880",
    "end": "808130"
  },
  {
    "text": "we can use them and know who the user is and call these API s so the first thing you're going to have to do in these",
    "start": "808130",
    "end": "813590"
  },
  {
    "text": "applications is of course have a server ok that's typically called your authority right that's the the token",
    "start": "813590",
    "end": "818990"
  },
  {
    "text": "service that your application is trusting and that your API s are trusting so what you're going to do in",
    "start": "818990",
    "end": "824510"
  },
  {
    "text": "your application is then probably use a library like one of the ones that we've developed and configure the library to",
    "start": "824510",
    "end": "832400"
  },
  {
    "text": "know about that authority and so there are a lot of things that you need to know about that authority that that",
    "start": "832400",
    "end": "837680"
  },
  {
    "text": "token service to achieve all of these protocol steps right first of all there",
    "start": "837680",
    "end": "843560"
  },
  {
    "text": "are things like where's the UI or the login page to send the user to and oh we had tokens so we're going to want to do",
    "start": "843560",
    "end": "849500"
  },
  {
    "text": "you know validation and things like that so we need some information about our token service so in the open ID connect",
    "start": "849500",
    "end": "856670"
  },
  {
    "text": "set of specifications there's something called discovery and so from your client if you register your library and tell it",
    "start": "856670",
    "end": "863630"
  },
  {
    "text": "the authority that you're using then your library can go to this well-known endpoint wait which the name of it is is",
    "start": "863630",
    "end": "871040"
  },
  {
    "text": "in the specification and it makes a request to the send point to download all that additional information so you",
    "start": "871040",
    "end": "877520"
  },
  {
    "text": "get back this discovery document and it tells you everything you need to know about how to interact with that token",
    "start": "877520",
    "end": "883280"
  },
  {
    "text": "service where to send the user what key material to use to do signing to",
    "start": "883280",
    "end": "889100"
  },
  {
    "text": "validate signatures and a whole bunch of other things ok so that's the first thing that we're going to need to do so",
    "start": "889100",
    "end": "895520"
  },
  {
    "text": "it turns out we have some sample code here and we happen have a token service so this is identity server the token",
    "start": "895520",
    "end": "902960"
  },
  {
    "text": "service that we work on and here there is this discovery document so this is",
    "start": "902960",
    "end": "908570"
  },
  {
    "text": "the discovery document that my JavaScript application is about to consume so over here I then have a",
    "start": "908570",
    "end": "915410"
  },
  {
    "text": "JavaScript application that's going to consume that I'll switch over that to it and second the steps for this JavaScript",
    "start": "915410",
    "end": "923120"
  },
  {
    "start": "921000",
    "end": "921000"
  },
  {
    "text": "application then is once it knows where to send the user to authenticate that's exactly what's going to do it's going to",
    "start": "923120",
    "end": "928490"
  },
  {
    "text": "redirect the user to the token service or the open ID provider as they're also called for signing in and the user will",
    "start": "928490",
    "end": "935480"
  },
  {
    "text": "enter their path for it there that's their username and password secret whatever they're going to use and the outcome of this",
    "start": "935480",
    "end": "940940"
  },
  {
    "text": "authentication process is going to be the proof of the users identity encapsulated in something called an ID",
    "start": "940940",
    "end": "946399"
  },
  {
    "text": "token which Dominic talked about so the job of the JavaScript now at this point is to validate that ID token and then",
    "start": "946399",
    "end": "953209"
  },
  {
    "text": "from that we'll know who the user is this right now is only authentication we're not yet calling a web api so how",
    "start": "953209",
    "end": "961819"
  },
  {
    "text": "do we do that so let me go back to my sample app I have a sample application here I'm just going to run it for now",
    "start": "961819",
    "end": "968750"
  },
  {
    "text": "just kind of walk through the steps so what I have here is write my JavaScript",
    "start": "968750",
    "end": "976100"
  },
  {
    "text": "running application running just localhost 7017 and this is using the",
    "start": "976100",
    "end": "981769"
  },
  {
    "text": "JavaScript library that the Dominic mentioned and when I trigger login here this will trigger a request over to to",
    "start": "981769",
    "end": "988370"
  },
  {
    "text": "sign in okay so this ended up redirecting me over to the token service",
    "start": "988370",
    "end": "993529"
  },
  {
    "text": "are running now on port 5,000 this is identity server and like dominic said this is where you would do all of the",
    "start": "993529",
    "end": "1000009"
  },
  {
    "text": "hard work of logging the user in may be supporting google logins whatever so i",
    "start": "1000009",
    "end": "1005319"
  },
  {
    "text": "just have a test user i'll hit log in and what happens is when i come back oh",
    "start": "1005319",
    "end": "1010600"
  },
  {
    "text": "there's a content screen as well this is where you know you can enable this or disable this based on the nature of your",
    "start": "1010600",
    "end": "1017410"
  },
  {
    "text": "app if it needs this and when we come back what happens is then this token is",
    "start": "1017410",
    "end": "1023170"
  },
  {
    "text": "delivered back to the spa application okay now i my sample here is deliberately not going any further just",
    "start": "1023170",
    "end": "1029168"
  },
  {
    "text": "because i wanted to show this this pause and the process so this token has to be sent back to the application because",
    "start": "1029169",
    "end": "1036130"
  },
  {
    "text": "it's a spa application really the only good way across this domain boundary of",
    "start": "1036130",
    "end": "1041829"
  },
  {
    "text": "conveying this these parameters is to pass it in the URL so that's actually if",
    "start": "1041829",
    "end": "1047079"
  },
  {
    "text": "you can see up here in the URL the token is passed here in the hash fragment okay",
    "start": "1047079",
    "end": "1053010"
  },
  {
    "text": "now the hash fragments an interesting question why why's is passed in the hash",
    "start": "1053010",
    "end": "1058360"
  },
  {
    "text": "fragment and not something like a query string say again",
    "start": "1058360",
    "end": "1064900"
  },
  {
    "text": "yeah exactly well it's not sent to the to the server when you're reloading this",
    "start": "1064900",
    "end": "1070130"
  },
  {
    "text": "HTML page right so this wouldn't end up in a server log or somehow leaked perhaps to other you know if somehow",
    "start": "1070130",
    "end": "1077330"
  },
  {
    "text": "your application had some sort of vulnerability where so the referer header would send things that the ID c--",
    "start": "1077330",
    "end": "1083510"
  },
  {
    "text": "intent for putting it in the in the hash fragment so great we basically not",
    "start": "1083510",
    "end": "1088790"
  },
  {
    "text": "completed but we've gotten a very far long way down the path of establishing the user's identity we've made the",
    "start": "1088790",
    "end": "1094460"
  },
  {
    "text": "connection to the token service we gotten the outcome so what we have to do next is validate that same coming back",
    "start": "1094460",
    "end": "1100550"
  },
  {
    "text": "and so this is what we're getting back with an ID token an ID token like Dominic said has a structured has a data",
    "start": "1100550",
    "end": "1107750"
  },
  {
    "text": "structure that represents the ID or the identity of the user it is a JSON format it's basically",
    "start": "1107750",
    "end": "1113840"
  },
  {
    "text": "broken down into these parts separated by dots the most important one here well depends how you look at it but the one",
    "start": "1113840",
    "end": "1119750"
  },
  {
    "text": "in the middle are the payload if you will the claims for the user and then the bit at the end is the signature over",
    "start": "1119750",
    "end": "1126980"
  },
  {
    "text": "the the entire thing and there's some header information which informs how to perform the validation check so at this",
    "start": "1126980",
    "end": "1133400"
  },
  {
    "text": "point now you have this data structure you need to validate it to really trust",
    "start": "1133400",
    "end": "1138710"
  },
  {
    "text": "you know the outcome so the nice thing about the specification is very clear on",
    "start": "1138710",
    "end": "1143990"
  },
  {
    "start": "1142000",
    "end": "1142000"
  },
  {
    "text": "all the steps guide but it turns out there are quite a few steps right there's a digital signature involved so",
    "start": "1143990",
    "end": "1149060"
  },
  {
    "text": "that means you have to go and you know download the certificate from the the token service basically do some crypto",
    "start": "1149060",
    "end": "1156020"
  },
  {
    "text": "work right to validate the signature there's time information inside the the",
    "start": "1156020",
    "end": "1162020"
  },
  {
    "text": "token which says like the token expires after this amount of time so that you know the user can't replay it like a",
    "start": "1162020",
    "end": "1168350"
  },
  {
    "text": "month later and get back into your system there's also some other properties like there's a nuns a nuns as",
    "start": "1168350",
    "end": "1175910"
  },
  {
    "text": "a security feature to prevent replay detection into your application again if somebody takes out and replays that",
    "start": "1175910",
    "end": "1181940"
  },
  {
    "text": "token later and then there's also this audience thing which says this token is",
    "start": "1181940",
    "end": "1187460"
  },
  {
    "text": "intended for this application and you don't want to trust tokens meant for other applications right the user may be",
    "start": "1187460",
    "end": "1193880"
  },
  {
    "text": "an administrator in another app but not your app so if you're not actually checking that the token was meant for",
    "start": "1193880",
    "end": "1199590"
  },
  {
    "text": "your app right you might get the right say identity or set of privileges so",
    "start": "1199590",
    "end": "1204900"
  },
  {
    "text": "that's kind of a quick overview of what is needed to validate the identity token",
    "start": "1204900",
    "end": "1210059"
  },
  {
    "text": "and that's a lot of work to do okay so as Dominic said fortunately we've written some libraries right when we",
    "start": "1210059",
    "end": "1215910"
  },
  {
    "text": "first started developing with open ID connect several years ago I was so excited now I can go write the",
    "start": "1215910",
    "end": "1221309"
  },
  {
    "text": "JavaScript application and nothing out there existed so that's basically what I did is I built this thing so there's a",
    "start": "1221309",
    "end": "1228299"
  },
  {
    "text": "JavaScript library called oh I DC client and that's exactly what my my sample here is using so this thing's up on NPM",
    "start": "1228299",
    "end": "1234809"
  },
  {
    "text": "it's up on github feel free to you know check out the issue tracker and you know",
    "start": "1234809",
    "end": "1240780"
  },
  {
    "text": "if you have any suggestions or issues with it and so just to show you a little",
    "start": "1240780",
    "end": "1246480"
  },
  {
    "text": "bit more what I have here is my my page here is pulling in this app dot jf and there's a lot of configuration really",
    "start": "1246480",
    "end": "1253559"
  },
  {
    "text": "just from the sample code to show a lot of the different options you can do but fundamentally right we have to configure",
    "start": "1253559",
    "end": "1258630"
  },
  {
    "text": "some you know some some aspects about connecting to my token service so right",
    "start": "1258630",
    "end": "1264390"
  },
  {
    "text": "there is the authority property all right we have the client ID for representing our client some coordinates",
    "start": "1264390",
    "end": "1271110"
  },
  {
    "text": "to return to our application and some other frame numbers about how what we're requesting from the token server so to",
    "start": "1271110",
    "end": "1277860"
  },
  {
    "text": "actually have triggered the sign-in I'm sorry so then what we do is we take this",
    "start": "1277860",
    "end": "1283080"
  },
  {
    "text": "and initialize this user manager so this is really the heart of this library to help make you writing your JavaScript",
    "start": "1283080",
    "end": "1289380"
  },
  {
    "text": "applications easier the user manager will do all the protocol work for you it can figure out how to load the metadata",
    "start": "1289380",
    "end": "1295770"
  },
  {
    "text": "document it will help validate the the response coming back and then once that",
    "start": "1295770",
    "end": "1301260"
  },
  {
    "text": "has been validated it will manage the storage of all of the things you will",
    "start": "1301260",
    "end": "1308250"
  },
  {
    "text": "need for your user their name their profile ultimately then when we get to the access tokens we'll see that so to",
    "start": "1308250",
    "end": "1314340"
  },
  {
    "text": "have triggered the login just to show you how fairly easy it is I have",
    "start": "1314340",
    "end": "1320669"
  },
  {
    "text": "basically method here sign-in redirect right so your login button basically calls this method and this sends you",
    "start": "1320669",
    "end": "1326429"
  },
  {
    "text": "away okay then when we come back into our application right I have the separate call back page",
    "start": "1326429",
    "end": "1332250"
  },
  {
    "text": "and this is the page that we're sitting on right now where it says processing call back pretty simple",
    "start": "1332250",
    "end": "1338430"
  },
  {
    "text": "you basically just say redirect call back right and this will do all the heavy lifting of processing the result",
    "start": "1338430",
    "end": "1345300"
  },
  {
    "text": "response if that's all good then we'll just send the user back to the the index page so hopefully if I just hit refresh",
    "start": "1345300",
    "end": "1352650"
  },
  {
    "text": "now that tokens still sitting there although it might have timed out no ok",
    "start": "1352650",
    "end": "1359880"
  },
  {
    "text": "I'll trigger it one more time there we go so now what happened is I went to login Oh actually notice I went to login",
    "start": "1359880",
    "end": "1366690"
  },
  {
    "text": "a second time notice I was not prompted for my credential so I'm getting the benefits of single sign-on and Here I am",
    "start": "1366690",
    "end": "1372630"
  },
  {
    "text": "with the results of my authentication and so what I end up having here are some claims that represent my user and",
    "start": "1372630",
    "end": "1379380"
  },
  {
    "text": "right now I'm really only getting back one thing hold the subject claim which is the unique ID of that user okay that",
    "start": "1379380",
    "end": "1386370"
  },
  {
    "text": "was real quick but any questions about that yeah well so the token is so there",
    "start": "1386370",
    "end": "1407850"
  },
  {
    "text": "are few things there first of all the token all of the network traffic that we're talking about here should all be done over HTTPS okay sure that's the",
    "start": "1407850",
    "end": "1422400"
  },
  {
    "text": "entire point the token service that is the thing that the token service gives to your app to prove the identity of the",
    "start": "1422400",
    "end": "1428400"
  },
  {
    "text": "user okay so I'm missing then so now we know who the user is now what what have",
    "start": "1428400",
    "end": "1434970"
  },
  {
    "text": "you what is your app leaked right now",
    "start": "1434970",
    "end": "1440670"
  },
  {
    "text": "this is being managed inside of web storage ok so what happens is then we",
    "start": "1440670",
    "end": "1446040"
  },
  {
    "text": "are you know doing the validation and we happen to store this here in the browser and web storage okay session storage",
    "start": "1446040",
    "end": "1453150"
  },
  {
    "text": "just in the tab",
    "start": "1453150",
    "end": "1456470"
  },
  {
    "text": "sure any JavaScript application can know the users unique ID okay but yeah from",
    "start": "1458380",
    "end": "1466310"
  },
  {
    "text": "that domain presumably you have control over you know your domain and the",
    "start": "1466310",
    "end": "1474320"
  },
  {
    "text": "applications running under it right that's just how the web works same thing with your cookies to write any other app",
    "start": "1474320",
    "end": "1480680"
  },
  {
    "text": "under that you know other than cookie pathing okay all right question so we",
    "start": "1480680",
    "end": "1491870"
  },
  {
    "text": "did drop a cookie on the login page of identity server so yes identity server",
    "start": "1491870",
    "end": "1496910"
  },
  {
    "text": "has established a session if you look here I'm now logged in as Bob and now in the spa you have this data structure",
    "start": "1496910",
    "end": "1503900"
  },
  {
    "text": "that tells you who the user is we don't necessarily need a cookie for that okay and again if you didn't want to stick this in session in session storage just",
    "start": "1503900",
    "end": "1511520"
  },
  {
    "text": "hold as a variable right for the duration of the you know in memory of the spa that doesn't work so well if you",
    "start": "1511520",
    "end": "1517970"
  },
  {
    "text": "refresh the page though because you lose all your in memory State yeah it's the",
    "start": "1517970",
    "end": "1523310"
  },
  {
    "text": "web right okay so one of the things that",
    "start": "1523310",
    "end": "1528320"
  },
  {
    "text": "we got back was the users unique ID that's called the subject claim if you want more information about the user you",
    "start": "1528320",
    "end": "1535820"
  },
  {
    "text": "can pass the request along and ask for what are called additional scopes and these are basically just identifiers for",
    "start": "1535820",
    "end": "1542630"
  },
  {
    "text": "other sets of information that you might want from the user so there's a profile scope and an email scope and an address scope and you can come up with your own",
    "start": "1542630",
    "end": "1549080"
  },
  {
    "text": "so that's what this other button is doing here in my application it's just passing more arguments requesting more",
    "start": "1549080",
    "end": "1556160"
  },
  {
    "text": "identity data so now that we go to the token service notice I'm being informed that the token service is about to",
    "start": "1556160",
    "end": "1562370"
  },
  {
    "text": "release more to the application and again the user can consent to that and now my application has a way to get",
    "start": "1562370",
    "end": "1568370"
  },
  {
    "text": "additional data about the user okay all right so there is a bit of a problem",
    "start": "1568370",
    "end": "1577040"
  },
  {
    "start": "1574000",
    "end": "1574000"
  },
  {
    "text": "that ID token that's passed back in the URL can get bigger and bigger and bigger and bigger with the more claims that you",
    "start": "1577040",
    "end": "1583340"
  },
  {
    "text": "put in there so there is an optimization in the protocol that allows you to defer",
    "start": "1583340",
    "end": "1588560"
  },
  {
    "text": "or not put so many claims into the ID token okay so how are you going to then give",
    "start": "1588560",
    "end": "1595190"
  },
  {
    "text": "something back to the app but allow it to get you know more profile data well it turns out that there is a Web API",
    "start": "1595190",
    "end": "1602150"
  },
  {
    "text": "built into the token service called the user info endpoint and this is basically",
    "start": "1602150",
    "end": "1607280"
  },
  {
    "text": "a web API that you can call to get more identity data more profile data and so",
    "start": "1607280",
    "end": "1614480"
  },
  {
    "text": "the way we do this is you have to ask for access to that API so our",
    "start": "1614480",
    "end": "1622100"
  },
  {
    "text": "application what does it will do is when it makes the request over to the token service instead of just asking for the",
    "start": "1622100",
    "end": "1627710"
  },
  {
    "text": "ID token which is just the user's identity we will also ask for what's called an access token and the",
    "start": "1627710",
    "end": "1633980"
  },
  {
    "text": "additional parameter that we pass is just the word token what's going to happen there is the response coming back",
    "start": "1633980",
    "end": "1639679"
  },
  {
    "text": "from the token service is still the ID token that same signed data structure it will only have the users unique ID their",
    "start": "1639679",
    "end": "1647270"
  },
  {
    "text": "subject claim and then you get an additional token back called an access token and with that you can call back to",
    "start": "1647270",
    "end": "1655070"
  },
  {
    "text": "the token service and that access token then will be your key to getting in and",
    "start": "1655070",
    "end": "1661040"
  },
  {
    "text": "getting more profile information so if you have a lot of data about the user maybe like I don't know some image of",
    "start": "1661040",
    "end": "1667160"
  },
  {
    "text": "the user or something that's obviously not going to fit in the URL so it's a it's a time space you know trade-off",
    "start": "1667160",
    "end": "1674350"
  },
  {
    "text": "absolutely we're on the right track so yes it we will then you be able to use that access token to call other api's if",
    "start": "1675160",
    "end": "1682429"
  },
  {
    "text": "you know you've configured it to do so so what I have is my application right",
    "start": "1682429",
    "end": "1690530"
  },
  {
    "text": "here is login with profile and access token so what happens is when I get my",
    "start": "1690530",
    "end": "1695840"
  },
  {
    "text": "response back from this notice my response now gives me that actually let",
    "start": "1695840",
    "end": "1701270"
  },
  {
    "text": "me go back and just do this one here login with profile so notice all of the data I have I really only have the ID token here so when I make this type of",
    "start": "1701270",
    "end": "1708919"
  },
  {
    "text": "request it's now requesting an additional token and here that is with this access token okay and now if you",
    "start": "1708919",
    "end": "1716090"
  },
  {
    "text": "look at my users profile I only have the unique ID okay that means I need to make",
    "start": "1716090",
    "end": "1721190"
  },
  {
    "text": "that extra Ajax call with the access token to go get that data so the way that's done or with any",
    "start": "1721190",
    "end": "1728549"
  },
  {
    "start": "1727000",
    "end": "1727000"
  },
  {
    "text": "kind of access token is you would have to make this you know Ajax call you pass the access token as the authorization",
    "start": "1728549",
    "end": "1734880"
  },
  {
    "text": "header using the bearer scheme and the results of that are more profile data and again as you can imagine our little",
    "start": "1734880",
    "end": "1743280"
  },
  {
    "text": "library here has a flag for that okay",
    "start": "1743280",
    "end": "1749570"
  },
  {
    "text": "all right so as long as my page is not cached I will now go get my access token",
    "start": "1749990",
    "end": "1756210"
  },
  {
    "text": "and I have a feeling it is cached okay",
    "start": "1756210",
    "end": "1765919"
  },
  {
    "text": "and do I have more now hey there we go okay so the library then made the",
    "start": "1765919",
    "end": "1772799"
  },
  {
    "text": "roundtrip a second round trip back to the token service to get the additional profile data okay and as the gentleman",
    "start": "1772799",
    "end": "1783750"
  },
  {
    "start": "1782000",
    "end": "1782000"
  },
  {
    "text": "in the back you know came to the conclusion hey can't we use that access token for calling other api's and",
    "start": "1783750",
    "end": "1788809"
  },
  {
    "text": "exactly so what we're going to do is if we want that access token to be able to",
    "start": "1788809",
    "end": "1794070"
  },
  {
    "text": "be used at other Web API s you have to request more scopes and the scope",
    "start": "1794070",
    "end": "1799770"
  },
  {
    "text": "represents the access to these api's so you could come up with your own scope representing your API 1 or your calendar",
    "start": "1799770",
    "end": "1807720"
  },
  {
    "text": "API or whatever and when you get that access token back it can then be used to",
    "start": "1807720",
    "end": "1813090"
  },
  {
    "text": "call those Web API s the network call looks exactly the same so what I have here in my application n is actually an",
    "start": "1813090",
    "end": "1820289"
  },
  {
    "text": "API but I wasn't running it so let me run that real quick now back here in my",
    "start": "1820289",
    "end": "1826230"
  },
  {
    "text": "spa I can now access a request token with additional scopes for that Web API",
    "start": "1826230",
    "end": "1832650"
  },
  {
    "text": "my consent screen is letting me know I've requested those I will consent and now I should be able to call that Web",
    "start": "1832650",
    "end": "1838950"
  },
  {
    "text": "API and the Web API is basically just echoing back what it saw in the access",
    "start": "1838950",
    "end": "1844740"
  },
  {
    "text": "token so now my Web API will know the users unique ID and any other additional",
    "start": "1844740",
    "end": "1850830"
  },
  {
    "text": "data that you've put in there okay there's also logout support I'll",
    "start": "1850830",
    "end": "1859220"
  },
  {
    "text": "just Emma that real quick I know we're kind of tight on time here but logout there we go so those are the basic",
    "start": "1859220",
    "end": "1867260"
  },
  {
    "text": "moving parts for getting a spa style application a user logged into a token service getting tokens back getting",
    "start": "1867260",
    "end": "1873560"
  },
  {
    "text": "their identity data and getting access to a Web API I'm glad you asked right so",
    "start": "1873560",
    "end": "1887840"
  },
  {
    "start": "1884000",
    "end": "1884000"
  },
  {
    "text": "the question was what hell out expiration so absolutely that access token has a finite duration when it can",
    "start": "1887840",
    "end": "1895490"
  },
  {
    "text": "be used now that's always configurable you can choose to make it one hour or ten hours or ten days depends on your",
    "start": "1895490",
    "end": "1901910"
  },
  {
    "text": "scenarios okay but the consideration is of course the access token if it's lost then anybody else can use it and it's",
    "start": "1901910",
    "end": "1909590"
  },
  {
    "text": "going to be good for that duration so what we usually do is tend to keep that access token duration short but then",
    "start": "1909590",
    "end": "1916280"
  },
  {
    "text": "that does mean you have to go back to the token service to obtain a new one",
    "start": "1916280",
    "end": "1921860"
  },
  {
    "text": "okay so so those are two things here one is the expiration the other one is the",
    "start": "1921860",
    "end": "1927140"
  },
  {
    "text": "storage that we mentioned briefly here you have to hold that data somewhere so the library by default is storing this",
    "start": "1927140",
    "end": "1932750"
  },
  {
    "text": "for you in session storage but you can configure it with other storage if you just want to keep it in memory that's",
    "start": "1932750",
    "end": "1938090"
  },
  {
    "text": "fine too then the token expiration is another consideration so I'll just cut",
    "start": "1938090",
    "end": "1943400"
  },
  {
    "text": "to the chase the the the common approach for solving that problem is you want to",
    "start": "1943400",
    "end": "1949130"
  },
  {
    "text": "have short access token lifetimes but you want to you need to periodically go back to the token service to get new",
    "start": "1949130",
    "end": "1955040"
  },
  {
    "text": "ones you don't want to interrupt the user though right you don't want to redirect the main window because they could be in the middle of filling out a",
    "start": "1955040",
    "end": "1960950"
  },
  {
    "text": "big form or something so any guesses as to the way that on the web which is kind",
    "start": "1960950",
    "end": "1967280"
  },
  {
    "text": "of hacky by nature but we need to somehow go back to some other website",
    "start": "1967280",
    "end": "1972650"
  },
  {
    "text": "but without the users involvement no",
    "start": "1972650",
    "end": "1977740"
  },
  {
    "text": "second refresh tokens are not used in this type of application in spa style JavaScript",
    "start": "1977740",
    "end": "1984380"
  },
  {
    "text": "applications if you've heard of those before that's not not that not the approach an iframe absolutely so that's",
    "start": "1984380",
    "end": "1992480"
  },
  {
    "text": "the last thing that the library here supports for you the library that we're using it will monitor the expiration",
    "start": "1992480",
    "end": "1999500"
  },
  {
    "start": "1996000",
    "end": "1996000"
  },
  {
    "text": "time of the access token and five minutes which is again configurable five minutes prior to expiration it will open",
    "start": "1999500",
    "end": "2006250"
  },
  {
    "text": "up an iframe and go back to the token service and what makes this work is that",
    "start": "2006250",
    "end": "2011920"
  },
  {
    "text": "when you go back in the iframe the cookie is still sent to the token service and you already are signed in so",
    "start": "2011920",
    "end": "2019690"
  },
  {
    "text": "by the bennet with the benefit of single sign-on with the iframe you're just you know going back and it immediately",
    "start": "2019690",
    "end": "2024970"
  },
  {
    "text": "returns with the new token and you know there you go you have your updated token",
    "start": "2024970",
    "end": "2030130"
  },
  {
    "text": "one of the parameters we pass though is what if the user has signed out well in the iframe you don't want to show a",
    "start": "2030130",
    "end": "2036460"
  },
  {
    "text": "login screen that nobody can see so there is a parameter called prompt equals none that you pass along that",
    "start": "2036460",
    "end": "2042400"
  },
  {
    "text": "tells the token service that you're doing this and it will immediately come back with an error and then you'll tell the user and then they'll have to",
    "start": "2042400",
    "end": "2048520"
  },
  {
    "text": "redirect in the main window okay okay Dominic are you ready to come up we're",
    "start": "2048520",
    "end": "2054158"
  },
  {
    "text": "going to switch now to two native applications doing something which you should never ever do in a presentation",
    "start": "2054159",
    "end": "2060158"
  },
  {
    "text": "unblocked DAV you never know what's going to happen on the other side but",
    "start": "2060159",
    "end": "2065800"
  },
  {
    "text": "while Dominic's plugging in any questions about the the JavaScript scenario yes",
    "start": "2065800",
    "end": "2073408"
  },
  {
    "text": "right that was the bit at the end that we were talking about you could redirect the main browser window but it wouldn't",
    "start": "2076730",
    "end": "2082230"
  },
  {
    "text": "be user-friendly so that's the iframe approach yeah you can do it before you",
    "start": "2082230",
    "end": "2089069"
  },
  {
    "text": "want to do it before the token expires you have to redirect the user well let",
    "start": "2089069",
    "end": "2096270"
  },
  {
    "text": "me get the back sorry so when the user if the token expires that's you that",
    "start": "2096270",
    "end": "2103470"
  },
  {
    "text": "just means you can't use it at the API but you can take the user back to the token service in and the iframe and as",
    "start": "2103470",
    "end": "2110579"
  },
  {
    "text": "long as they still have their cookie their sign-in session at the token service that will come back with a new",
    "start": "2110579",
    "end": "2116789"
  },
  {
    "text": "token that they can use at the API yeah",
    "start": "2116789",
    "end": "2122250"
  },
  {
    "text": "usually you set up maybe a 10 hour cookie the duration of a workday in terms of the expiration on that but",
    "start": "2122250",
    "end": "2128160"
  },
  {
    "text": "again that's all configurable as well okay native apps so I get to sit down",
    "start": "2128160",
    "end": "2134760"
  },
  {
    "text": "okay you can sit down yeah okay cool so second part is native apps and it turns",
    "start": "2134760",
    "end": "2142710"
  },
  {
    "text": "out they are very very similar to JavaScript apps even if you wouldn't expect it to be the case yeah so first",
    "start": "2142710",
    "end": "2149549"
  },
  {
    "text": "of all I think it's important to make sure that I you know what I mean with native apps because there are so many",
    "start": "2149549",
    "end": "2156660"
  },
  {
    "text": "ways how you can now do stays you know build build client-side application so what I mean with native apps is typically applications that have access",
    "start": "2156660",
    "end": "2163770"
  },
  {
    "text": "to native operating system facilities you know you can call native api's and the most the most interesting one type",
    "start": "2163770",
    "end": "2171869"
  },
  {
    "text": "of API you might want to call for these types of applications is to protect the data storage you know the the crypto API",
    "start": "2171869",
    "end": "2178589"
  },
  {
    "text": "so to speak on on on the oval rating system so for example on Windows you",
    "start": "2178589",
    "end": "2183839"
  },
  {
    "text": "have this thing called DP API the data protection API in in iOS you have thing",
    "start": "2183839",
    "end": "2190529"
  },
  {
    "text": "called a keychain for example which is seems to be like really a secure place to store data right you know the FBI",
    "start": "2190529",
    "end": "2196770"
  },
  {
    "text": "paid a lot of money to get access to it their Android has a similar thing and so",
    "start": "2196770",
    "end": "2202289"
  },
  {
    "text": "on vanya so you're having access to that feature can enable some extra scenarios",
    "start": "2202289",
    "end": "2207569"
  },
  {
    "text": "that in the browser a little bit you know questionable right at least yet I",
    "start": "2207569",
    "end": "2214709"
  },
  {
    "text": "mean there are other there were development of the bit crypto that you know in the future you might have these",
    "start": "2214709",
    "end": "2221459"
  },
  {
    "text": "as well also so in other words yeah if",
    "start": "2221459",
    "end": "2227640"
  },
  {
    "text": "you're writing a c-sharp application native now if you're writing an objective-c application that's native if",
    "start": "2227640",
    "end": "2234690"
  },
  {
    "start": "2228000",
    "end": "2228000"
  },
  {
    "text": "you're writing a Cordova application using Java Script that would be native",
    "start": "2234690",
    "end": "2239880"
  },
  {
    "text": "as well at least according to my definition right because you can call down to into native operating system API",
    "start": "2239880",
    "end": "2245699"
  },
  {
    "text": "yeah in a browser you can't do that so desktop Mobile's of metal Ilham so this",
    "start": "2245699",
    "end": "2252989"
  },
  {
    "text": "is a very common scenario and there's actually a spec for that it's the OO",
    "start": "2252989",
    "end": "2258299"
  },
  {
    "text": "open early connect for native applications it's a really good spec you should read it lots of thinking is going into how to",
    "start": "2258299",
    "end": "2265319"
  },
  {
    "text": "secure applications on mobile devices on the desktop and so on that that use this token based approach so again it's the",
    "start": "2265319",
    "end": "2275729"
  },
  {
    "start": "2273000",
    "end": "2273000"
  },
  {
    "text": "same as I said earlier you could have your native login UI and we already figured out that this is not the right",
    "start": "2275729",
    "end": "2282869"
  },
  {
    "text": "way to go right we want to use our server based UI in other words well how",
    "start": "2282869",
    "end": "2288539"
  },
  {
    "text": "do I show a web page if I'm not in the browser I have to open a browser yeah",
    "start": "2288539",
    "end": "2294420"
  },
  {
    "text": "and a couple of options here from less",
    "start": "2294420",
    "end": "2299999"
  },
  {
    "text": "recommended to recommend it now is you know some some frameworks are pretty",
    "start": "2299999",
    "end": "2305489"
  },
  {
    "start": "2300000",
    "end": "2300000"
  },
  {
    "text": "much every framework has this thing called that few like an embedded that browser you just have you know a control",
    "start": "2305489",
    "end": "2312269"
  },
  {
    "text": "inside of your application which you give it a URL and it renders of that page right and that is something you",
    "start": "2312269",
    "end": "2319559"
  },
  {
    "text": "could use now the webview has a couple of problems",
    "start": "2319559",
    "end": "2325579"
  },
  {
    "text": "first of all there there's no indication for the end user if it is really a",
    "start": "2325579",
    "end": "2331049"
  },
  {
    "text": "browser is looking at right I mean it's something that looks like Google's login page but it might be you know something",
    "start": "2331049",
    "end": "2337289"
  },
  {
    "text": "you've you've drawn yourself and just have the smell the keystrokes yeah there's no way to check am I really on Google because they",
    "start": "2337289",
    "end": "2343710"
  },
  {
    "text": "have no URL bar at the bottom you can D X inspect the SSL certificate for",
    "start": "2343710",
    "end": "2349829"
  },
  {
    "text": "example and for from a former pure usability point of view also is you",
    "start": "2349829",
    "end": "2356579"
  },
  {
    "text": "don't have support for add-ins like your password manager for example yeah so what do you have to do and there are",
    "start": "2356579",
    "end": "2361619"
  },
  {
    "text": "some really nasty offenders on the Windows platform like Visual Studio for",
    "start": "2361619",
    "end": "2368039"
  },
  {
    "text": "example yeah you all know that right window pops up from time to time a dialog which which have a login page",
    "start": "2368039",
    "end": "2374130"
  },
  {
    "text": "right and now you I don't know my password so I have to go to my password manager find my MSDN password copy to",
    "start": "2374130",
    "end": "2380849"
  },
  {
    "text": "the clipboard go back paste it into the lid into my password box and not so nice",
    "start": "2380849",
    "end": "2386789"
  },
  {
    "text": "yeah so yeah these are the few mam not",
    "start": "2386789",
    "end": "2392999"
  },
  {
    "text": "not recommended and if you're reading the spec actually kind of like forbidden okay so they did they did say you you",
    "start": "2392999",
    "end": "2399569"
  },
  {
    "text": "shouldn't use them anymore actually that goes up to a point where starting this year Google will sniff the user agent",
    "start": "2399569",
    "end": "2407880"
  },
  {
    "text": "and if they find out it's a it's a few control from you know winforms WPF and so on they will block their login page",
    "start": "2407880",
    "end": "2414210"
  },
  {
    "text": "so you can't use Google anymore from within the webview obviously unless you change the user agent string I guess",
    "start": "2414210",
    "end": "2419670"
  },
  {
    "text": "then but still did you know the intention is they are insecure they don't give the end user a lot of control",
    "start": "2419670",
    "end": "2425759"
  },
  {
    "text": "you shouldn't use them here you should give the end user as much information as",
    "start": "2425759",
    "end": "2430799"
  },
  {
    "text": "possible about the thing he's typing is tested in mam the second category is some some people",
    "start": "2430799",
    "end": "2439739"
  },
  {
    "text": "came up with thing called authentication brokers and think of them as special browsers in the system they they share a",
    "start": "2439739",
    "end": "2446880"
  },
  {
    "text": "couple of things they are like locked down they don't allow you know reading the keystrokes for example and some",
    "start": "2446880",
    "end": "2455150"
  },
  {
    "text": "might have some special features they sometimes even share the cookies between the client applications that's another",
    "start": "2455150",
    "end": "2461489"
  },
  {
    "text": "thing that data def you can't do right by by definition you're hosting a private copy of a browser so you can't",
    "start": "2461489",
    "end": "2468690"
  },
  {
    "text": "share cookies between your applications which means you don't get a shared logon session between the applications some of",
    "start": "2468690",
    "end": "2474480"
  },
  {
    "text": "you education program allowed to do that has anyone ever used the web authentication broker in Windows",
    "start": "2474480",
    "end": "2480480"
  },
  {
    "text": "8 or Windows 10 to build in a special browser well you haven't missed much the really",
    "start": "2480480",
    "end": "2490110"
  },
  {
    "text": "recommended way of doing that is using the system browser okay so the system browser is probably already the most",
    "start": "2490110",
    "end": "2497460"
  },
  {
    "text": "trusted piece of software on your computer right using it every day using",
    "start": "2497460",
    "end": "2503610"
  },
  {
    "text": "it probably most likely you know counting the hours you sit on the computer for the for the most time",
    "start": "2503610",
    "end": "2508650"
  },
  {
    "text": "you're probably going to use the browser you type in all your passwords there you type in all your credit card information there you use your search engine which",
    "start": "2508650",
    "end": "2515460"
  },
  {
    "text": "you never lie to you know and so on okay so why not use this piece of code to to",
    "start": "2515460",
    "end": "2521430"
  },
  {
    "text": "to log in to something okay also your cookies are always already in there so if you are logged into Google",
    "start": "2521430",
    "end": "2528890"
  },
  {
    "text": "yesterday then today you will get signals along with Google if this application is using the system browser",
    "start": "2528890",
    "end": "2534830"
  },
  {
    "text": "now you know more modern operating systems like iOS and Android they have",
    "start": "2534830",
    "end": "2541590"
  },
  {
    "text": "API to invoke the system browser programmatically and they called it an",
    "start": "2541590",
    "end": "2547290"
  },
  {
    "text": "in-app browser tab so basically what you do is you actually open a tab of your browser inside your application yeah",
    "start": "2547290",
    "end": "2553860"
  },
  {
    "text": "it's the real system browser with all the bells and whistles with the add in support and all these things they add",
    "start": "2553860",
    "end": "2561180"
  },
  {
    "text": "some extra special protection to it again like the keystroke logging and so on you get the shared cookie container",
    "start": "2561180",
    "end": "2568080"
  },
  {
    "text": "and you get all the benefits basically you would get from a system browser okay",
    "start": "2568080",
    "end": "2573270"
  },
  {
    "text": "so these are the three fundamental options so quickly show you that so I have a customer you know he did open",
    "start": "2573270",
    "end": "2581460"
  },
  {
    "text": "early connects back to the DAA you and all your hippie talk yeah we do WinForms yeah can can can we do fancy open ID",
    "start": "2581460",
    "end": "2589920"
  },
  {
    "text": "connect with wind forms but yeah I think I can do that yeah and the way this works is you know this is a an example",
    "start": "2589920",
    "end": "2596070"
  },
  {
    "text": "of a web view right so this is a browser it renders our identity server login",
    "start": "2596070",
    "end": "2604200"
  },
  {
    "text": "page somewhere yeah it's you know the user can't see that is the browser",
    "start": "2604200",
    "end": "2609420"
  },
  {
    "text": "ah well I probably could right-click I'm what's happening here yeah it looks like a browser right you can't see the URL",
    "start": "2609420",
    "end": "2618089"
  },
  {
    "text": "you can't see the certificate you can't you can you know let's let's you know let's hope it's really a browser so we",
    "start": "2618089",
    "end": "2626069"
  },
  {
    "text": "can sign in we get our typical you know server-side logic and we get back our",
    "start": "2626069",
    "end": "2635240"
  },
  {
    "text": "identity token our access token in our claims back into the client application I'll show in a second how that works",
    "start": "2635240",
    "end": "2640740"
  },
  {
    "text": "so just want to show the the user experience first here's an example for",
    "start": "2640740",
    "end": "2647490"
  },
  {
    "text": "this authentication broker so because no one has ever seen it before I show it to",
    "start": "2647490",
    "end": "2653190"
  },
  {
    "text": "you once and then you can forget about it again yeah let's see okay the best",
    "start": "2653190",
    "end": "2669240"
  },
  {
    "text": "login button it invokes this authentication broker that's built into the Windows operating system you get",
    "start": "2669240",
    "end": "2676049"
  },
  {
    "text": "this window that is not resizable for whatever reason that is beyond me it's a",
    "start": "2676049",
    "end": "2683099"
  },
  {
    "text": "fixed size it doesn't have an address bar it doesn't show you a certificate information it doesn't have add in",
    "start": "2683099",
    "end": "2688650"
  },
  {
    "text": "support but it's you know it's supposed to be secure the only thing it has it's",
    "start": "2688650",
    "end": "2695520"
  },
  {
    "text": "kind of a questionable password manager support built in so Microsoft takes the",
    "start": "2695520",
    "end": "2703109"
  },
  {
    "text": "freedom to basically look at what you're typing into oh that looked like a password I should start it for you and",
    "start": "2703109",
    "end": "2709020"
  },
  {
    "text": "actually you know what not only on your machine but also in the cloud yeah because you know you never know when you",
    "start": "2709020",
    "end": "2715349"
  },
  {
    "text": "need it again so let's press yes and because I am you know I thought that's a",
    "start": "2715349",
    "end": "2722670"
  },
  {
    "text": "good idea so the thing is that they don't even use that stored password to",
    "start": "2722670",
    "end": "2728700"
  },
  {
    "text": "give you a single sign-on experience now because when you log in again they just prefilled the password fee",
    "start": "2728700",
    "end": "2736339"
  },
  {
    "text": "well okay anyways if you ever wondered and if",
    "start": "2736339",
    "end": "2742560"
  },
  {
    "text": "I buy it by mistake press that that button the yes button you can get rid of",
    "start": "2742560",
    "end": "2748800"
  },
  {
    "text": "it very obvious by called searching for something called a credential manager and then here you see two above he",
    "start": "2748800",
    "end": "2755339"
  },
  {
    "text": "signed into something here his password you can remove it again okay so really",
    "start": "2755339",
    "end": "2762960"
  },
  {
    "text": "the the preferred way of doing it if is",
    "start": "2762960",
    "end": "2768089"
  },
  {
    "text": "a set of system browser and this works arguably the best right now on on mobile",
    "start": "2768089",
    "end": "2775020"
  },
  {
    "text": "platforms so let's have a summary in application here let's start that I",
    "start": "2775020",
    "end": "2781880"
  },
  {
    "text": "don't know why my iPhone 7 is always that big when I'm only when I want to projector otherwise it's pretty tiny",
    "start": "2782330",
    "end": "2788270"
  },
  {
    "text": "when I'm not on the projector okay there's a way to scroll here right yeah",
    "start": "2788270",
    "end": "2794070"
  },
  {
    "text": "so so what happens when I press login is now I'm using the native Safari api's",
    "start": "2794070",
    "end": "2801869"
  },
  {
    "text": "from iOS then you see basically this is",
    "start": "2801869",
    "end": "2807270"
  },
  {
    "text": "a bit different now yeah same same login page but now you get all the information you get the",
    "start": "2807270",
    "end": "2812339"
  },
  {
    "text": "certificate you can sign in here and",
    "start": "2812339",
    "end": "2819890"
  },
  {
    "text": "we're back and here's my hero my claims and his Mac's talking and I can call my",
    "start": "2819890",
    "end": "2826859"
  },
  {
    "text": "API okay just run it again just to show another feature or maybe even two",
    "start": "2826859",
    "end": "2833099"
  },
  {
    "text": "features because of single sign-on I have to",
    "start": "2833099",
    "end": "2838810"
  },
  {
    "text": "restart the emulator right I'm signed in now I didn't have a look I didn't write",
    "start": "2838810",
    "end": "2844570"
  },
  {
    "text": "a local logout button yet but who cares about logout okay",
    "start": "2844570",
    "end": "2851320"
  },
  {
    "text": "login so let's say you know you logged into Google already yet the Google",
    "start": "2851320",
    "end": "2856570"
  },
  {
    "text": "button and now we can use your existing Google login to assign to the",
    "start": "2856570",
    "end": "2861880"
  },
  {
    "text": "application now and the very last thing I want to show you this one it again is a feature that is I think you know it's",
    "start": "2861880",
    "end": "2870640"
  },
  {
    "text": "quite nice at least someone fought about that at Apple is you could be extra",
    "start": "2870640",
    "end": "2877270"
  },
  {
    "text": "paranoid saying okay yeah it looks like you're starting Safari but is it really Safari or just the tricky clever",
    "start": "2877270",
    "end": "2882790"
  },
  {
    "text": "animation you did here in which within your application right so they have a",
    "start": "2882790",
    "end": "2888400"
  },
  {
    "text": "button here in in their browser control this guy which basically it switches to",
    "start": "2888400",
    "end": "2894760"
  },
  {
    "text": "the real Safari on your desktop so to speak as if I click that now you are",
    "start": "2894760",
    "end": "2900700"
  },
  {
    "text": "actually in real Safari and if I log in with this guy it is okay are you ok with",
    "start": "2900700",
    "end": "2909550"
  },
  {
    "text": "going back yes I am and now I'm locked in here okay and it looks very similar",
    "start": "2909550",
    "end": "2915520"
  },
  {
    "text": "on on Android as well so how does it",
    "start": "2915520",
    "end": "2923320"
  },
  {
    "text": "work",
    "start": "2923320",
    "end": "2925440"
  },
  {
    "start": "2929000",
    "end": "2929000"
  },
  {
    "text": "so rocks broke shout you what in the oak MediConnect specification is called the implicit flow and it's think of it as a",
    "start": "2929070",
    "end": "2936070"
  },
  {
    "text": "simplified version of open airy connect for browser-based applications because we have less features in the browser for",
    "start": "2936070",
    "end": "2943380"
  },
  {
    "text": "oh yeah and and one of the one of the behaviors of implicit flow is that",
    "start": "2943380",
    "end": "2948640"
  },
  {
    "text": "everything you're doing which makes total sense happens inside the browser this thing is called a hybrid flow",
    "start": "2948640",
    "end": "2954220"
  },
  {
    "text": "because what what they do here is one part happens in the browser and one part",
    "start": "2954220",
    "end": "2959230"
  },
  {
    "text": "happens in a back-channel communication so the the not so sensitive identity token is Ischia is transferred over the",
    "start": "2959230",
    "end": "2965830"
  },
  {
    "text": "front channel but the sensitive access token is transferred over a back channel okay so you have less exposure of the",
    "start": "2965830",
    "end": "2973750"
  },
  {
    "text": "sensitive data so you know it looks very similar one thing to point out here is",
    "start": "2973750",
    "end": "2980350"
  },
  {
    "text": "the redirect URI so Brock said earlier you prove ownership of the domain where",
    "start": "2980350",
    "end": "2986800"
  },
  {
    "text": "you go back to ok and the idea here is very similar yeah you don't you obviously don't use a web address here",
    "start": "2986800",
    "end": "2994360"
  },
  {
    "text": "because you don't have the Internet in your pocket right it's something locally on your on your phone so there are these",
    "start": "2994360",
    "end": "3000720"
  },
  {
    "text": "custom uri schemes that you can register with your application yeah so basically",
    "start": "3000720",
    "end": "3005820"
  },
  {
    "text": "together the typical pattern is you take like my company comm you reverse that",
    "start": "3005820",
    "end": "3011010"
  },
  {
    "text": "you make it combat my company dot and then the name of the application and then the idea is whenever the browser",
    "start": "3011010",
    "end": "3018530"
  },
  {
    "text": "navigates to this address here it knows that it belongs to this native application and it calls you back ok so",
    "start": "3018530",
    "end": "3026190"
  },
  {
    "text": "the whole workflow is we run through our web-based flow whatever that is it might be you know registration login to fact",
    "start": "3026190",
    "end": "3033510"
  },
  {
    "text": "or whatever the very last thing the browser will do is is to redirect to this URL ok and then this URL the",
    "start": "3033510",
    "end": "3042450"
  },
  {
    "text": "browser knows ok this belongs to this application here and it will call back the application and hand in the query",
    "start": "3042450",
    "end": "3050250"
  },
  {
    "text": "string ok so now my application takes over again it passes the identity token",
    "start": "3050250",
    "end": "3057420"
  },
  {
    "text": "validates it same steps as we've seen before it takes the it is code that got sent back not the",
    "start": "3057420",
    "end": "3063690"
  },
  {
    "text": "actual token but a code and then thus a direct connection using event API call",
    "start": "3063690",
    "end": "3070890"
  },
  {
    "text": "to the token service sends in that code we got earlier back from from the token",
    "start": "3070890",
    "end": "3077130"
  },
  {
    "text": "service and this in turn gives you back the actual access token okay so one more",
    "start": "3077130",
    "end": "3082860"
  },
  {
    "text": "step one more step to basically reduce",
    "start": "3082860",
    "end": "3087870"
  },
  {
    "text": "the exposure of the access token to the browser so one one little sites note",
    "start": "3087870",
    "end": "3095310"
  },
  {
    "text": "here because someone asked there there are some additional things which we I don't want to go into details for the",
    "start": "3095310",
    "end": "3100410"
  },
  {
    "text": "interest of time but that data specification called tick feed approve key for code exchange which kind of",
    "start": "3100410",
    "end": "3106110"
  },
  {
    "text": "introduces a per request secret between the client and the server so it makes it harder for attackers to intercept the",
    "start": "3106110",
    "end": "3112800"
  },
  {
    "text": "token coming back or the code erratum and that is basically this thing called decode challenge which which is a hash",
    "start": "3112800",
    "end": "3119220"
  },
  {
    "text": "you send in the hash on on leg number one so to speak on on leg number two here you send the unhatched version of",
    "start": "3119220",
    "end": "3125730"
  },
  {
    "start": "3124000",
    "end": "3124000"
  },
  {
    "text": "the same value the server does some crypto on that and make sure that you know the entity on leg 1 is the same as",
    "start": "3125730",
    "end": "3133020"
  },
  {
    "text": "the entity on leg two okay we don't need to go go into very much detail",
    "start": "3133020",
    "end": "3138810"
  },
  {
    "text": "one thing that's also different here is as opposed to the implicit scenario you get a refresh token",
    "start": "3138810",
    "end": "3144300"
  },
  {
    "text": "so a refresh token is basically a token that allows you to get a new access token without having the user to be",
    "start": "3144300",
    "end": "3151050"
  },
  {
    "text": "interactive right so scenario is the same you know the user wants to use this",
    "start": "3151050",
    "end": "3156780"
  },
  {
    "text": "native application on the phone I have it installed for years you don't want to maybe maybe you don't want to ask the",
    "start": "3156780",
    "end": "3163230"
  },
  {
    "text": "user again and again and again for its authentication you for fourth credentials here so but you want to call",
    "start": "3163230",
    "end": "3168390"
  },
  {
    "text": "api's so what you do is then typically you take this refresh token store it",
    "start": "3168390",
    "end": "3174150"
  },
  {
    "text": "locally in your protected data storage here most the most secure place you know on your operating system and then I use",
    "start": "3174150",
    "end": "3182970"
  },
  {
    "text": "that to whenever you need get a new access token so you send the Refresh",
    "start": "3182970",
    "end": "3188370"
  },
  {
    "start": "3185000",
    "end": "3185000"
  },
  {
    "text": "token in get a new access token and can continue using the API like then yeah well my clients on my",
    "start": "3188370",
    "end": "3206590"
  },
  {
    "text": "Mountain yep my client libraries chop is done once you have all the data from the",
    "start": "3206590",
    "end": "3211990"
  },
  {
    "text": "server and then you would store in your local storage you know the refresh token the",
    "start": "3211990",
    "end": "3217780"
  },
  {
    "text": "expiration time and so on I thought about that but then that meant I needed different implementations for Windows",
    "start": "3217780",
    "end": "3223930"
  },
  {
    "text": "for iOS or Android and a for Thea no I'm not going to do that yeah so yeah one",
    "start": "3223930",
    "end": "3231340"
  },
  {
    "text": "last thing how are we in time perfect this is a digital of work yeah again",
    "start": "3231340",
    "end": "3238270"
  },
  {
    "text": "like block yeah in in proxy Nereo it took us quite a while to implement all",
    "start": "3238270",
    "end": "3243730"
  },
  {
    "text": "that you're all they're going back and forth the crypto the change checking here hashing there and you know doing",
    "start": "3243730",
    "end": "3249130"
  },
  {
    "text": "all the magic so you typically don't",
    "start": "3249130",
    "end": "3254140"
  },
  {
    "text": "want to implement it from scratch okay so there are a couple of options for native libraries I'm working as I said",
    "start": "3254140",
    "end": "3262000"
  },
  {
    "text": "on one written in c-sharp that there were two versions of that right now one one is a c-sharp portable class library",
    "start": "3262000",
    "end": "3269740"
  },
  {
    "text": "now that was the only thing that was available by the time I started with the",
    "start": "3269740",
    "end": "3275230"
  },
  {
    "text": "project to create a cross-platform library for all of you who have ever done in their life a portable exactly",
    "start": "3275230",
    "end": "3280750"
  },
  {
    "text": "they know that you don't envy me writing that code it's horrible with the advent",
    "start": "3280750",
    "end": "3288640"
  },
  {
    "text": "of the state dot net standard now it becomes much much easier to write these",
    "start": "3288640",
    "end": "3293980"
  },
  {
    "text": "kind of things right the dotnet standard library is a shared feature set of dotnet across desktop Windows and uwp",
    "start": "3293980",
    "end": "3303070"
  },
  {
    "text": "and Semoran so that's the one I'm currently working on it's it's working",
    "start": "3303070",
    "end": "3310120"
  },
  {
    "text": "progress but I think it's pretty much done and that's the new one and then",
    "start": "3310120",
    "end": "3316600"
  },
  {
    "text": "there are also native libraries so if you're doing native mobile development the people who wrote the the o of spec",
    "start": "3316600",
    "end": "3324940"
  },
  {
    "text": "as always and then 80 expec they have reference implementations for objective-c and for",
    "start": "3324940",
    "end": "3330790"
  },
  {
    "text": "Java so you know if you care about that and the last thing I really want to show",
    "start": "3330790",
    "end": "3336370"
  },
  {
    "text": "you is the library I'm working on right",
    "start": "3336370",
    "end": "3342970"
  },
  {
    "text": "now as I said it's it's a dotnet core library which means it runs on Windows",
    "start": "3342970",
    "end": "3350050"
  },
  {
    "text": "on Linux and Mac OS on Android on iOS",
    "start": "3350050",
    "end": "3355560"
  },
  {
    "text": "and whatever other operating systems are supported by document core and this is a",
    "start": "3355560",
    "end": "3361120"
  },
  {
    "text": "console application right so what what do you do in console applications same",
    "start": "3361120",
    "end": "3367180"
  },
  {
    "text": "thing you start a system browser right and then you just have a have to find a way how to communicate with these things",
    "start": "3367180",
    "end": "3373180"
  },
  {
    "text": "so here's my system browser that's the one I trust the most it's it from Google but still so when I",
    "start": "3373180",
    "end": "3383320"
  },
  {
    "text": "do dotnet console browser DLL C get some",
    "start": "3383320",
    "end": "3390100"
  },
  {
    "text": "little ASCII art going on here now I'm launching the browser I'm",
    "start": "3390100",
    "end": "3396000"
  },
  {
    "text": "sending the browser to Maya or to the login server right I could log in with Google here and now",
    "start": "3396000",
    "end": "3405120"
  },
  {
    "text": "it's communicating back to the controller application and here's my claims here's my identity token",
    "start": "3405120",
    "end": "3410500"
  },
  {
    "text": "here's my access token and now I can call an API ok and you know that the",
    "start": "3410500",
    "end": "3416740"
  },
  {
    "text": "nice thing about that is now imagine that another application console native web whatever yeah",
    "start": "3416740",
    "end": "3423970"
  },
  {
    "text": "and now we have no and now we have a shared a shared authentication session",
    "start": "3423970",
    "end": "3434410"
  },
  {
    "text": "between that that those applications you know the next time you want to use the same authentication provider you get",
    "start": "3434410",
    "end": "3442630"
  },
  {
    "text": "single sign-on one cool so that's it",
    "start": "3442630",
    "end": "3450120"
  },
  {
    "text": "that all we have on the slides you can download from here from speaker backslash lease privilege and thanks for",
    "start": "3450120",
    "end": "3457800"
  },
  {
    "text": "your time and enjoy the rest of the conference thank you [Applause]",
    "start": "3457800",
    "end": "3464540"
  }
]