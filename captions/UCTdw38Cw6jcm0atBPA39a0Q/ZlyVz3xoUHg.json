[
  {
    "text": "it's the middle of the World Cup the Norwegian team has just had a disappointing draw against Switzerland",
    "start": "6640",
    "end": "13440"
  },
  {
    "text": "but that result was completely overshadowed by Captain Hanson's Outburst towards coach Risa after the",
    "start": "13440",
    "end": "19680"
  },
  {
    "text": "match now the Norwegian public is eagerly awaiting the consequences what will happen will Captain Hanson be sent",
    "start": "19680",
    "end": "26960"
  },
  {
    "text": "home will Thea resign after a string of disappointing results what will will",
    "start": "26960",
    "end": "32840"
  },
  {
    "text": "happen but then somewhere out there on the internet someone is getting ready to",
    "start": "32840",
    "end": "39079"
  },
  {
    "text": "push that big red button and during the next 15 minutes n the front page of nk.",
    "start": "39079",
    "end": "48120"
  },
  {
    "text": "is being hit by 75 million",
    "start": "48120",
    "end": "53280"
  },
  {
    "text": "requests but before we get into that part we should probably introduce ourselves yes first uh thank you for",
    "start": "53280",
    "end": "60800"
  },
  {
    "text": "having us my name is in Gan and I am a tech lead at nrk.no and my name is Yan",
    "start": "60800",
    "end": "66880"
  },
  {
    "text": "ped I'm also a tech lead at n. and since we are here talking about",
    "start": "66880",
    "end": "72840"
  },
  {
    "text": "dasas attack at nrk and NK we're going to talk a little bit about nrk first so",
    "start": "72840",
    "end": "80040"
  },
  {
    "text": "we come from the Norwegian Broadcasting Corporation also known as nrk and it's quite similar to BBC but",
    "start": "80040",
    "end": "87680"
  },
  {
    "text": "it's a lot smaller and for Norway um and even though we are smaller we are",
    "start": "87680",
    "end": "94119"
  },
  {
    "text": "quite heavily used by an region population uh so we like to call ourself a gigantic small",
    "start": "94119",
    "end": "100520"
  },
  {
    "text": "broadcaster and in fact 91% of the population use one of our services each",
    "start": "100520",
    "end": "106439"
  },
  {
    "text": "day and a fun fact that percentage is higher than the percentage of people drinking water on a daily basis let's",
    "start": "106439",
    "end": "114000"
  },
  {
    "text": "that seems incredible to many people you you should really drink water yeah you should and the main purpose of nrk is",
    "start": "114000",
    "end": "121240"
  },
  {
    "text": "defining something called the nk's statements of commitments and the purpose of nk's overall public media",
    "start": "121240",
    "end": "127719"
  },
  {
    "text": "service is to meet Democratic social and cultural needs in society and we're also",
    "start": "127719",
    "end": "134040"
  },
  {
    "text": "quite proud that we were named Norway's most attractive workday and that's not the first time no that's the third time",
    "start": "134040",
    "end": "140519"
  },
  {
    "text": "in AO these are the products that we",
    "start": "140519",
    "end": "145879"
  },
  {
    "text": "deliver to the Norwegian population we have nrk TV which is a streaming and On",
    "start": "145879",
    "end": "151560"
  },
  {
    "text": "Demand video service we have nrk radio which has multiple radio channels and",
    "start": "151560",
    "end": "157760"
  },
  {
    "text": "podcasts we have e our Weather Service which is very heavily used in Norway but",
    "start": "157760",
    "end": "163480"
  },
  {
    "text": "also outside Norway strangely yeah Brazil is one of our main consumers and",
    "start": "163480",
    "end": "169879"
  },
  {
    "text": "we have nrk which is the product that we represent yeah so just so you know what nrk and O",
    "start": "169879",
    "end": "177800"
  },
  {
    "text": "is uh we are a news page or we're more than just a news page because we're going to be the main entry point to all",
    "start": "177800",
    "end": "184720"
  },
  {
    "text": "of things at nrk uh but we deliver the front page articles special formats recipes Sports",
    "start": "184720",
    "end": "192720"
  },
  {
    "text": "everything videos culture yeah and we are Norway's second biggest newspaper we",
    "start": "192720",
    "end": "199720"
  },
  {
    "text": "have about 1.5 million daily users which is the biggest product at",
    "start": "199720",
    "end": "205239"
  },
  {
    "text": "n and quite impressively 60% of our users VIs nrk and four more than four uh",
    "start": "205239",
    "end": "212760"
  },
  {
    "text": "of seven days a week so we're quite proud of that the Loyalty of our",
    "start": "212760",
    "end": "218799"
  },
  {
    "text": "users uh and our team we're about 30 people creating and enhancing nk. no and",
    "start": "218799",
    "end": "225760"
  },
  {
    "text": "we also have lots of cont Management systems for journalists plural there and",
    "start": "225760",
    "end": "232120"
  },
  {
    "text": "we're mostly half of us are developers and speaking of developers we are here at a developers conference so",
    "start": "232120",
    "end": "238959"
  },
  {
    "text": "it's only prudent to take a look under the hood as it were what are we using what technologies are we using to to",
    "start": "238959",
    "end": "245079"
  },
  {
    "text": "create nk. so broadly we can separate our site into three categories we have",
    "start": "245079",
    "end": "251439"
  },
  {
    "text": "the front page that's the most widely used uh system and it's built in the so",
    "start": "251439",
    "end": "258799"
  },
  {
    "text": "rendering layer is usually is mostly typescript running on node and then we have an inhouse developed um CMS um",
    "start": "258799",
    "end": "266759"
  },
  {
    "text": "written in react and there's some Java there in front of the the database and stuff like that but that's how we build",
    "start": "266759",
    "end": "272440"
  },
  {
    "text": "our modern systems and then we have the the article system that's the oldest part of n Eno uh it's Java based mostly",
    "start": "272440",
    "end": "282080"
  },
  {
    "text": "H still actually has some jsps be there somewhere so it's that",
    "start": "282080",
    "end": "287160"
  },
  {
    "text": "that kind of dates it a bit um and then um we do do a lot of uh oneoff content",
    "start": "287160",
    "end": "294039"
  },
  {
    "text": "uh content or um uh systems built for one particular use case one article one",
    "start": "294039",
    "end": "299919"
  },
  {
    "text": "special feature or some something like that and in those cases we are Freer to use whatever Technologies the developers",
    "start": "299919",
    "end": "307240"
  },
  {
    "text": "want to use so that's where we're trying out new Frameworks trying out new",
    "start": "307240",
    "end": "312639"
  },
  {
    "text": "technologies and everything well almost everything that we that we do um runs on",
    "start": "312639",
    "end": "319120"
  },
  {
    "text": "kubernetes um and we are we have hosted redundantly across three data centers uh",
    "start": "319120",
    "end": "325520"
  },
  {
    "text": "and since we're barebones um ulators we we can actually do that um while being",
    "start": "325520",
    "end": "332720"
  },
  {
    "text": "uh across different data center providers as well uh so we have two data",
    "start": "332720",
    "end": "337800"
  },
  {
    "text": "centers uh from Microsoft aser uh one in Norway that's obviously our main one we're serving the the population of",
    "start": "337800",
    "end": "344639"
  },
  {
    "text": "Norway and we have one in um in Western Europe and then we also have a setup in redundant setup in Google Cloud uh the",
    "start": "344639",
    "end": "351919"
  },
  {
    "text": "Google Cloud engine in the north than Europe uh so that these are all running the all the critical infrastructure",
    "start": "351919",
    "end": "358639"
  },
  {
    "text": "redundantly and we can switch switch between them and loow balance between them and the reason that we're so",
    "start": "358639",
    "end": "364720"
  },
  {
    "text": "concerned with u redundancy and data centers in multiple locations and things",
    "start": "364720",
    "end": "370080"
  },
  {
    "text": "like that is our special preparedness responsibility now INR mentioned our",
    "start": "370080",
    "end": "377160"
  },
  {
    "text": "corporate Mission our statement of commitments saying that we're to um meet",
    "start": "377160",
    "end": "382360"
  },
  {
    "text": "uh meet Democratic and social and cultural needs in Norway but in addition to that we have this uh uh requirement",
    "start": "382360",
    "end": "390479"
  },
  {
    "text": "to be an accessible information uh channel for the government during time of war and National crisis so this means",
    "start": "390479",
    "end": "399000"
  },
  {
    "text": "in theory that we should always be up we should always be available even if uh",
    "start": "399000",
    "end": "404120"
  },
  {
    "text": "Norway is cut off from the rest of the internet n n should still be there",
    "start": "404120",
    "end": "410800"
  },
  {
    "text": "serving informing the public now that's a that's a sort of in theory exercise we",
    "start": "410800",
    "end": "416800"
  },
  {
    "text": "we haven't tried cutting off no way from the rest of the internet this if that works um but we're trying to do these",
    "start": "416800",
    "end": "423360"
  },
  {
    "text": "preventive measures trying to see uh think through what what will happen and make sure that we we think we're covered",
    "start": "423360",
    "end": "430599"
  },
  {
    "text": "um unfortunately not everyone wants us to fulfill these uh special preparedness",
    "start": "430599",
    "end": "437639"
  },
  {
    "text": "responsibilities we are living in times of informational Warfare um and our role",
    "start": "437639",
    "end": "444240"
  },
  {
    "text": "as a non-commercial unaffiliated broadcaster is more important than ever to uh provide factual unbiased news",
    "start": "444240",
    "end": "452960"
  },
  {
    "text": "coverage of current events we all know about the propaganda and lies used in in",
    "start": "452960",
    "end": "458960"
  },
  {
    "text": "these situations to affect opinion or spread disinformation and hide TR truths",
    "start": "458960",
    "end": "465159"
  },
  {
    "text": "so it's the job of broadcasters like NK to to correct this by by providing the",
    "start": "465159",
    "end": "471879"
  },
  {
    "text": "the factual unbiased news to the public and so they try to stop us they try to",
    "start": "471879",
    "end": "477680"
  },
  {
    "text": "uh disrupt our ability to provide our content to to the users and",
    "start": "477680",
    "end": "483199"
  },
  {
    "text": "there are of course many ways to do that hacking try to hacking us for instance",
    "start": "483199",
    "end": "488599"
  },
  {
    "text": "and and more physical means but the by far most widely used these days is Doos",
    "start": "488599",
    "end": "497120"
  },
  {
    "text": "attacks yes so what is a Dos attack well we can start with DOs which stands for",
    "start": "497120",
    "end": "502919"
  },
  {
    "text": "denial of service attack and that is an attack that prevent someone or something",
    "start": "502919",
    "end": "508240"
  },
  {
    "text": "from accessing something they want to access in our case it would mean taking our website down and the D",
    "start": "508240",
    "end": "516200"
  },
  {
    "text": "in data STS from distributed and this means that the attack comes from multiple places at the same time and",
    "start": "516200",
    "end": "523320"
  },
  {
    "text": "they do this to disguise as normal users and because if an attack comes",
    "start": "523320",
    "end": "529519"
  },
  {
    "text": "from one single IP it's quite easy to detect this as an attack because it's",
    "start": "529519",
    "end": "534880"
  },
  {
    "text": "very unlikely to have users that check the front page two million times in a row",
    "start": "534880",
    "end": "540040"
  },
  {
    "text": "uh and it's also quite easy to stop the attack because we can just block the one IP but if it comes from multiple places",
    "start": "540040",
    "end": "546600"
  },
  {
    "text": "at the same time it's harder to know if this is actual use users or an attack so",
    "start": "546600",
    "end": "552160"
  },
  {
    "text": "it's kind of hard to separate popularity from attacks H so let's return to July 25th last year",
    "start": "552160",
    "end": "560800"
  },
  {
    "text": "um when en was hit by a major deers attack and try to see what happened at",
    "start": "560800",
    "end": "566560"
  },
  {
    "text": "that time uh and what what kind of what it looks like from the inside um our initial alert comes in",
    "start": "566560",
    "end": "575160"
  },
  {
    "text": "slack with our our pingdom bot uh the Apex test is checking whether or not our",
    "start": "575160",
    "end": "581519"
  },
  {
    "text": "front page is uh responding within the and given time limit responding fast",
    "start": "581519",
    "end": "587959"
  },
  {
    "text": "enough really and in this case it wasn't so anus is detected as down what we do",
    "start": "587959",
    "end": "594320"
  },
  {
    "text": "when we see this Alert in slack is we initi our initial reaction is just open up a browser navigate to n and the front",
    "start": "594320",
    "end": "601320"
  },
  {
    "text": "page is it up okay yes it is up great then it's not down for everyone at least",
    "start": "601320",
    "end": "607480"
  },
  {
    "text": "so then we can just then we log into ping them see what is happening is this a genuine alert is this something a Miss",
    "start": "607480",
    "end": "614399"
  },
  {
    "text": "with one of the probes and and ping them in this case it did seem like an actual",
    "start": "614399",
    "end": "619600"
  },
  {
    "text": "problem there were multiple probes uh failing uh but we before we were able to",
    "start": "619600",
    "end": "624800"
  },
  {
    "text": "dwell deeper into that uh that issue we got another notification saying the N is",
    "start": "624800",
    "end": "630399"
  },
  {
    "text": "back up great everything okay well let's see what actually",
    "start": "630399",
    "end": "636519"
  },
  {
    "text": "happened so this these are some graphs from our CDM provider Akamai um",
    "start": "636519",
    "end": "642160"
  },
  {
    "text": "Akamai as a CDM provider provides routing and uh caching and also a set of",
    "start": "642160",
    "end": "648279"
  },
  {
    "text": "rules designed to uh stop this kind of these de attacks before they happen um",
    "start": "648279",
    "end": "656079"
  },
  {
    "text": "or whe rather stop them when they are happening so preventing them from reaching our service so the DD DDOS",
    "start": "656079",
    "end": "662200"
  },
  {
    "text": "filter identifies these issues and they they managed to stop a significant number of the requests before they're",
    "start": "662200",
    "end": "668920"
  },
  {
    "text": "able to hit our service now as in mentioned it's of course challenging to",
    "start": "668920",
    "end": "674279"
  },
  {
    "text": "decide what is actually in deas attack and what is merely a surge in popularity",
    "start": "674279",
    "end": "679680"
  },
  {
    "text": "and well we don't know how or what techniques AR come I use to try to",
    "start": "679680",
    "end": "685560"
  },
  {
    "text": "detect that they're not public with this information obviously because they don't want uh evildoers to try to use that",
    "start": "685560",
    "end": "692320"
  },
  {
    "text": "information to circumvent those techniques but um if we take a look closer look at the U requests so the",
    "start": "692320",
    "end": "699360"
  },
  {
    "text": "Shaded blue here is the the um total number of requests and then the red line is those that have been stopped by um by",
    "start": "699360",
    "end": "706680"
  },
  {
    "text": "the Doos filter at akami so in this case it was able to stop around 30% of the incoming um requests and we can see that",
    "start": "706680",
    "end": "714680"
  },
  {
    "text": "once alamis starts denying the attack requests uh the the attack subss it",
    "start": "714680",
    "end": "721880"
  },
  {
    "text": "seems like um my uh estimate is that the attackers are seeing that their their",
    "start": "721880",
    "end": "728440"
  },
  {
    "text": "requests are being denied and there's no point in just hammering on towards the",
    "start": "728440",
    "end": "733560"
  },
  {
    "text": "DS filter at akami because that's built to sub sustain that kind of pressure so",
    "start": "733560",
    "end": "740560"
  },
  {
    "text": "they just okay then attack over for for now and and by the way it seems like the",
    "start": "740560",
    "end": "747000"
  },
  {
    "text": "request rate is down to zero on the either side of the attack here that's obviously not the case that's our normal",
    "start": "747000",
    "end": "754079"
  },
  {
    "text": "normal usage so that just is totally overshadowed by the scale of of the",
    "start": "754079",
    "end": "760000"
  },
  {
    "text": "attack um and um if we look at the uh countries that",
    "start": "760000",
    "end": "767440"
  },
  {
    "text": "were where the Vos attacks originated this this is since we're talking about distributed denial of",
    "start": "767440",
    "end": "773600"
  },
  {
    "text": "service attacks we can see that they are quite distributed and these uh should is",
    "start": "773600",
    "end": "779279"
  },
  {
    "text": "no surprised that these are not our our main um Target groups uh in in a normal",
    "start": "779279",
    "end": "785160"
  },
  {
    "text": "situation so uh you'd probably you could probably say well why don't you just uh",
    "start": "785160",
    "end": "791279"
  },
  {
    "text": "block any IPS not originating in in Norway but you will not say that because",
    "start": "791279",
    "end": "797199"
  },
  {
    "text": "obviously we can't uh we want to serve to the Norwegian public uh and others",
    "start": "797199",
    "end": "802720"
  },
  {
    "text": "obviously but um the Norwegian public whether they are in Norway or on holiday",
    "start": "802720",
    "end": "808560"
  },
  {
    "text": "in uh Indonesia or even working at a conference in",
    "start": "808560",
    "end": "814399"
  },
  {
    "text": "London and if you were looking for um Norway on that list you'd actually have",
    "start": "814399",
    "end": "819600"
  },
  {
    "text": "to scroll down to the 83rd spot so even though no is now a target for these",
    "start": "819600",
    "end": "825480"
  },
  {
    "text": "dasas Texs we are currently not a",
    "start": "825480",
    "end": "830000"
  },
  {
    "text": "source some more graphs uh this is from one of our data centers uh this is from",
    "start": "830560",
    "end": "835880"
  },
  {
    "text": "the the cetus rigs and you you can see the request graft as well you can see",
    "start": "835880",
    "end": "842320"
  },
  {
    "text": "that the from the pods here in this um center right uh that uh when the attack",
    "start": "842320",
    "end": "848279"
  },
  {
    "text": "hits uh our pods start start a crash and the number of PODS go down that's why",
    "start": "848279",
    "end": "853639"
  },
  {
    "text": "they're because they're unable to handle the incoming traffic and so the health probe um fails and kubernetes kills the",
    "start": "853639",
    "end": "863079"
  },
  {
    "text": "replicas and try and we'll try to or the containers and we'll try to uh start new ones and it's able to do that we're",
    "start": "863079",
    "end": "870040"
  },
  {
    "text": "we're starting up we're ramping up more than the initial amount of uh of containers because there is a lot of",
    "start": "870040",
    "end": "875680"
  },
  {
    "text": "incoming attacks or incoming requests but at that point the attack is more or",
    "start": "875680",
    "end": "881160"
  },
  {
    "text": "less over and it just scales down again but but looking at the timer graphs and",
    "start": "881160",
    "end": "886720"
  },
  {
    "text": "and things like that you can you can it's obvious that we did actually uh go down during this time",
    "start": "886720",
    "end": "893880"
  },
  {
    "text": "period uh and this is this attack is of a very um",
    "start": "893880",
    "end": "899639"
  },
  {
    "text": "uh brief duration and that's often the case but that could be an indicator of a",
    "start": "899639",
    "end": "905000"
  },
  {
    "text": "larger attack to come so the attackers might use an initial",
    "start": "905000",
    "end": "911360"
  },
  {
    "text": "attack to see where can we actually do some damage uh where are the the weak",
    "start": "911360",
    "end": "916959"
  },
  {
    "text": "spots uh and then uh return with even more massive attack at the later stage",
    "start": "916959",
    "end": "923920"
  },
  {
    "text": "in this case that larger attack did not come uh so I I don't I shouldn't we",
    "start": "923920",
    "end": "929040"
  },
  {
    "text": "shouldn't say we're still waiting for it but uh we so far we're okay and during",
    "start": "929040",
    "end": "934959"
  },
  {
    "text": "these attacks it can look like feel like something like this like being surrounded by a hord of bloodthirsty",
    "start": "934959",
    "end": "940839"
  },
  {
    "text": "zombies uh and obviously in this case uh it's too late you can't really do",
    "start": "940839",
    "end": "947000"
  },
  {
    "text": "anything when the the zombies have have surrounded you like this uh that's why",
    "start": "947000",
    "end": "952040"
  },
  {
    "text": "we try to avoid uh it getting to this point and now we're going to tell you a bit about how yes because you can't lie",
    "start": "952040",
    "end": "960160"
  },
  {
    "text": "awake at night worrying about if your website is going to go down so we have",
    "start": "960160",
    "end": "966199"
  },
  {
    "text": "created six steps to help you sleep better at night uh and the most",
    "start": "966199",
    "end": "971279"
  },
  {
    "text": "important steps are those we can do before the attack occurs because that's when we had the time the resources and",
    "start": "971279",
    "end": "977319"
  },
  {
    "text": "are calm and can just Implement code changes or better protective Mees",
    "start": "977319",
    "end": "984040"
  },
  {
    "text": "measures so we are going to uh go through to our steps and",
    "start": "984040",
    "end": "990360"
  },
  {
    "text": "they're quite high level so that you could apply them to your systems as well",
    "start": "990360",
    "end": "995519"
  },
  {
    "text": "and we won't delve into technical details of nrk.no so we won't teach you how to take nrk n",
    "start": "995519",
    "end": "1003519"
  },
  {
    "text": "down first one um so I've talked about Alami arami is a a Content delivery",
    "start": "1003519",
    "end": "1011040"
  },
  {
    "text": "Network this means that they have uh nodes all around the globe uh in close",
    "start": "1011040",
    "end": "1017480"
  },
  {
    "text": "proximity to the actual users so they're able to handle traffic close to the user",
    "start": "1017480",
    "end": "1022920"
  },
  {
    "text": "away from our service uh and that means that they're able to using the DS filter",
    "start": "1022920",
    "end": "1030558"
  },
  {
    "text": "and other kind of filters to avoid the traffic hitting our servers so uh we",
    "start": "1030559",
    "end": "1036360"
  },
  {
    "text": "talked about the Dos filter there's also the a um web application firewall used",
    "start": "1036360",
    "end": "1041640"
  },
  {
    "text": "to uh stop lots of requests come from coming from one single IP things are",
    "start": "1041640",
    "end": "1047400"
  },
  {
    "text": "easy to detect single IPS or requests with obvious malevolent query parameters",
    "start": "1047400",
    "end": "1053799"
  },
  {
    "text": "and things like that so so this these filters and these um uh preventive measures are all",
    "start": "1053799",
    "end": "1060520"
  },
  {
    "text": "running on those Edge nodes uh all of this happens before the requests hit our",
    "start": "1060520",
    "end": "1067120"
  },
  {
    "text": "services so to summarize this in one tip Stop The Unwanted traffic as far away",
    "start": "1067120",
    "end": "1072880"
  },
  {
    "text": "from the service as possible so next up we have caching and",
    "start": "1072880",
    "end": "1077960"
  },
  {
    "text": "we have cach cashing multiple places so the primary goal is to have caching as",
    "start": "1077960",
    "end": "1083200"
  },
  {
    "text": "early as possible for each application so in our case we have initial caching",
    "start": "1083200",
    "end": "1088640"
  },
  {
    "text": "already in the CDM provider and this is to prevent the request to even hit our",
    "start": "1088640",
    "end": "1094400"
  },
  {
    "text": "applications in the first place but next up we have caching within applications",
    "start": "1094400",
    "end": "1099720"
  },
  {
    "text": "and in between applications so that if one of our services get lots of traffic",
    "start": "1099720",
    "end": "1104760"
  },
  {
    "text": "it won't send lots of requests to other services so they also get in",
    "start": "1104760",
    "end": "1110200"
  },
  {
    "text": "um as an example the front page of nrk.no has a few seconds caching within the CDM provider then it has an inmemory",
    "start": "1110200",
    "end": "1116799"
  },
  {
    "text": "caching in each of the instances running in each of the data centers and it also",
    "start": "1116799",
    "end": "1122039"
  },
  {
    "text": "caches the responses from the API so the API it doesn't really get that many requests at",
    "start": "1122039",
    "end": "1127840"
  },
  {
    "text": "all in this uh way we are we are using caching to try to limit how a attack uh",
    "start": "1127840",
    "end": "1135280"
  },
  {
    "text": "spreads to other parts of our system infrastructure other part of the system reducing the tech further",
    "start": "1135280",
    "end": "1142600"
  },
  {
    "text": "in um in theory you can just scale up your uh your services to be able to",
    "start": "1142600",
    "end": "1150480"
  },
  {
    "text": "handle any kind of amount of incoming traffic but of course you can't do that",
    "start": "1150480",
    "end": "1155799"
  },
  {
    "text": "because that will be very uh costly and we as a publicly funded company we can't",
    "start": "1155799",
    "end": "1161640"
  },
  {
    "text": "waste the taxpayers money where it's not needed uh instead we use autoscaling uh",
    "start": "1161640",
    "end": "1167240"
  },
  {
    "text": "to be able to uh automatically scale uh the resources when traffic increases um",
    "start": "1167240",
    "end": "1173919"
  },
  {
    "text": "but even though the autoscaler can start uh to um scale up the the moment it's",
    "start": "1173919",
    "end": "1180080"
  },
  {
    "text": "triggered it takes some time to get these new replicas and new pods up and running uh and so we we need to both uh",
    "start": "1180080",
    "end": "1189080"
  },
  {
    "text": "fine CH our triggers to make sure that they fire at the the first hint of an",
    "start": "1189080",
    "end": "1194960"
  },
  {
    "text": "incoming uh attack as is or incoming uh sort of um uh increasing in traffic um",
    "start": "1194960",
    "end": "1203159"
  },
  {
    "text": "that means that we might uh scale up even though it's not needed if that",
    "start": "1203159",
    "end": "1209320"
  },
  {
    "text": "major increase does not come but it's better to be safe than Sor in those instances and we also since it takes",
    "start": "1209320",
    "end": "1215880"
  },
  {
    "text": "time to scale up we also run at a higher level at default scaling than what is",
    "start": "1215880",
    "end": "1220919"
  },
  {
    "text": "strictly need needed to handle the everyday traffic uh so that we have some",
    "start": "1220919",
    "end": "1226679"
  },
  {
    "text": "some buffer to handle minor traffic increases and also handle the start of a",
    "start": "1226679",
    "end": "1232400"
  },
  {
    "text": "major traffic increase while the autoscaler start starts getting the new replicas and pods",
    "start": "1232400",
    "end": "1240159"
  },
  {
    "text": "ready so you need to buy Time by overscaling uh unana has now talked",
    "start": "1240159",
    "end": "1247360"
  },
  {
    "text": "about how important it is to be uh scaled to handle the traffic and the next tip is that you need to check that",
    "start": "1247360",
    "end": "1254280"
  },
  {
    "text": "this is actually correct uh preferably uh with a test test and not with an",
    "start": "1254280",
    "end": "1259679"
  },
  {
    "text": "actual event uh so to do this we do a load test it simulates normal or extreme user",
    "start": "1259679",
    "end": "1265960"
  },
  {
    "text": "traffic and the goal is to find unstable systems or bottlenecks in your system",
    "start": "1265960",
    "end": "1271720"
  },
  {
    "text": "and doing the actual test is it's quite easy as you probably know you use a lad testing uh service for inance we use k6",
    "start": "1271720",
    "end": "1278799"
  },
  {
    "text": "and you write a lad testing script uh the hard part here is to know what to actually test because first you cannot",
    "start": "1278799",
    "end": "1286039"
  },
  {
    "text": "do it in production because you don't want production to go down and the goal with this test is to actually take down",
    "start": "1286039",
    "end": "1291159"
  },
  {
    "text": "your system to see how much can you actually handle um so you need a test environment and the S environment has to",
    "start": "1291159",
    "end": "1297799"
  },
  {
    "text": "be as similar to production as possible uh but you probably cannot create your",
    "start": "1297799",
    "end": "1304279"
  },
  {
    "text": "whole production environment so you need to marck out some Integrations but not all because you don't want to test you",
    "start": "1304279",
    "end": "1311080"
  },
  {
    "text": "need you need to test everything you need to see if this application actually works as",
    "start": "1311080",
    "end": "1317320"
  },
  {
    "text": "intended uh for instance we usually marck out third party Integrations for",
    "start": "1317320",
    "end": "1322400"
  },
  {
    "text": "instance Firebase because Firebase block you if you send too many requests um and to do this you actually",
    "start": "1322400",
    "end": "1331039"
  },
  {
    "text": "have to know how your system works and after you have tested one part of your architecture you would probably do a",
    "start": "1331039",
    "end": "1337760"
  },
  {
    "text": "test on some other part that has been mocked out in the first test it's never the parts that you think",
    "start": "1337760",
    "end": "1344720"
  },
  {
    "text": "are going to fail or the parts you think are the bottlenecks that are the actual button leg when uh things happens so you",
    "start": "1344720",
    "end": "1351760"
  },
  {
    "text": "need to know you know everything about your system about your Integrations both to find the",
    "start": "1351760",
    "end": "1357520"
  },
  {
    "text": "bottlenecks but also to be able to make sure you're testing it correctly and and handling and scaling up the things that",
    "start": "1357520",
    "end": "1364080"
  },
  {
    "text": "are needed to scale up uh but you can't really scale up everything and not",
    "start": "1364080",
    "end": "1370039"
  },
  {
    "text": "everything is as important at any given time um tomorrow it's Saturday I think",
    "start": "1370039",
    "end": "1376640"
  },
  {
    "text": "uh uh tomorrow is the grand finale of the nor Norwegian Melody Grand Prix uh",
    "start": "1376640",
    "end": "1382480"
  },
  {
    "text": "the Norwegian leg of the Eurovision song contest so families all around Norway",
    "start": "1382480",
    "end": "1388440"
  },
  {
    "text": "will gather around the TV mobiles in hand ready to vote for their favor the one who's going to represent Norway in",
    "start": "1388440",
    "end": "1395279"
  },
  {
    "text": "the Eurovision Sun contest later this spring and and during that short voting",
    "start": "1395279",
    "end": "1400679"
  },
  {
    "text": "window it's obviously critical that our voting system our login the voting page",
    "start": "1400679",
    "end": "1406400"
  },
  {
    "text": "all that stays up but we don't really need to cater to that random guy that",
    "start": "1406400",
    "end": "1412039"
  },
  {
    "text": "just happens upon nk. and tries to search who whe was the Prime Minister of",
    "start": "1412039",
    "end": "1418159"
  },
  {
    "text": "Norway do we have anything about the prime minister of Norway in the ' 80s and and so we can actually scale down",
    "start": "1418159",
    "end": "1424000"
  },
  {
    "text": "our search service and then scale up our our voting rigs our loading login stuff",
    "start": "1424000",
    "end": "1430000"
  },
  {
    "text": "and that and things like that and these um um PRI priorities will change during",
    "start": "1430000",
    "end": "1437600"
  },
  {
    "text": "the week during the a year uh so when it's a breaking news situation we need to prioritize the front page and the",
    "start": "1437600",
    "end": "1443799"
  },
  {
    "text": "Articles and during election night which is the the biggest night for for nrk uh",
    "start": "1443799",
    "end": "1451559"
  },
  {
    "text": "we actually have scaled down or even turned off the uh login and personalization to be able to cach our",
    "start": "1451559",
    "end": "1459200"
  },
  {
    "text": "content better to Ser serve the same cash same cach content to everyone because we know that there's going to be",
    "start": "1459200",
    "end": "1465559"
  },
  {
    "text": "a huge traffic surge that night and we don't need to to worry about everything else that that can be handled in the",
    "start": "1465559",
    "end": "1472799"
  },
  {
    "text": "morning and this always sounds so hard do you actually need to accept that not everything can be up all the",
    "start": "1472799",
    "end": "1480960"
  },
  {
    "text": "time and then you should ask yourself what is the absolutely most important thing that we do or deliver and that one",
    "start": "1481399",
    "end": "1488799"
  },
  {
    "text": "thing is your purpose and everything else is a bonus I mean important bonus but still our main purpose is to deliver",
    "start": "1488799",
    "end": "1497000"
  },
  {
    "text": "information to the Norwegian people I said and that means that we can do some priorities we can turn off feature",
    "start": "1497000",
    "end": "1504960"
  },
  {
    "text": "testing as you mentioned during critical periods we do not do any feature testing",
    "start": "1504960",
    "end": "1510520"
  },
  {
    "text": "during election time and we also have a data center in Norway which gives us",
    "start": "1510520",
    "end": "1516919"
  },
  {
    "text": "geographical proximity to our main users which is Norway and it also means that",
    "start": "1516919",
    "end": "1522840"
  },
  {
    "text": "we can prioritize this data center if something happens that means that that's the last data center that we will take",
    "start": "1522840",
    "end": "1529840"
  },
  {
    "text": "down because that's closest to our main",
    "start": "1529840",
    "end": "1534240"
  },
  {
    "text": "users any service that you build is going to have a main purpose uh it's going to have Parts other parts of the",
    "start": "1535000",
    "end": "1541559"
  },
  {
    "text": "service that you really like but that aren't as important and in critical times you need to you know remember what",
    "start": "1541559",
    "end": "1548480"
  },
  {
    "text": "is the main purpose of your service in our case it's pretty simple because we have it have it clearly defined in our",
    "start": "1548480",
    "end": "1554799"
  },
  {
    "text": "uh statement of commitments and also the special prepar responsibility but any",
    "start": "1554799",
    "end": "1561000"
  },
  {
    "text": "service has one purpose at least so I'm just going to summarize a bit uh this is",
    "start": "1561000",
    "end": "1568600"
  },
  {
    "text": "the technical protections we have talked about added to this simple illustration so when we have a user accessing our web",
    "start": "1568600",
    "end": "1575880"
  },
  {
    "text": "page they will hit the CDN where we have DS protection wire web application",
    "start": "1575880",
    "end": "1582320"
  },
  {
    "text": "firewall and caching and if the data is not in the cache it will reach one of",
    "start": "1582320",
    "end": "1587760"
  },
  {
    "text": "many multiple instances of the application where we have caching and we also have AOS skating to be sure that we",
    "start": "1587760",
    "end": "1594200"
  },
  {
    "text": "have enough instances running at all the time and if it's not there it will ask",
    "start": "1594200",
    "end": "1599880"
  },
  {
    "text": "the API this is another example of the",
    "start": "1599880",
    "end": "1606919"
  },
  {
    "text": "Dos traffic attack um or is it no these are the votes received",
    "start": "1606919",
    "end": "1614600"
  },
  {
    "text": "during last Saturday's semi-final in the melody Grand Prix but as you can see the",
    "start": "1614600",
    "end": "1619880"
  },
  {
    "text": "the pattern traffic pattern here is very similar to what we saw from the earlier dos attacks a very Peak based burst of",
    "start": "1619880",
    "end": "1627039"
  },
  {
    "text": "traffic uh so so this uh is is not a Doos attack it's what we like to call a",
    "start": "1627039",
    "end": "1634279"
  },
  {
    "text": "benevolent attack it's a surging popularity now of course we we we know",
    "start": "1634279",
    "end": "1640080"
  },
  {
    "text": "about these popular shows the meline Grand Prix in advance so we we're able to take precautions and and uh uh we",
    "start": "1640080",
    "end": "1647880"
  },
  {
    "text": "know that they're they're going to vote we know that we're going to see the these kinds of Peaks but we don't always",
    "start": "1647880",
    "end": "1654320"
  },
  {
    "text": "know about these uh events in advance we are a news site and the News",
    "start": "1654320",
    "end": "1661039"
  },
  {
    "text": "happens when they do uh we can't control whe When Things what happens in Norway",
    "start": "1661039",
    "end": "1666880"
  },
  {
    "text": "or around the globe and news will be reported when it happens and everyone uh",
    "start": "1666880",
    "end": "1672039"
  },
  {
    "text": "with the N app installed on their phones and push notifications enabled will get",
    "start": "1672039",
    "end": "1677799"
  },
  {
    "text": "a ification when things happen immediately everyone will get at at more",
    "start": "1677799",
    "end": "1683440"
  },
  {
    "text": "or less the same time and if it's something that looks interesting or scary or fun they will click that that",
    "start": "1683440",
    "end": "1690600"
  },
  {
    "text": "notification open up our our article or our front page and and read all about it",
    "start": "1690600",
    "end": "1695840"
  },
  {
    "text": "and then we get these uh sudden surges in um in traffic that we we can't really",
    "start": "1695840",
    "end": "1702240"
  },
  {
    "text": "prepare for uh or we don't know about in in advance yes to illustrate this we are",
    "start": "1702240",
    "end": "1709360"
  },
  {
    "text": "going to give you a concrete example from 2022 uh more precisely the 8th of",
    "start": "1709360",
    "end": "1714720"
  },
  {
    "text": "September uh when Queen Elizabeth II passed away and even though she was not",
    "start": "1714720",
    "end": "1720080"
  },
  {
    "text": "the queen of Norway uh the news were read quite heavily and they got lots of",
    "start": "1720080",
    "end": "1726279"
  },
  {
    "text": "attention and was read by many people so we found this graph from this",
    "start": "1726279",
    "end": "1734600"
  },
  {
    "text": "day and this is uh open push notification dur during the day you can see the first bikes they are not related",
    "start": "1734600",
    "end": "1741440"
  },
  {
    "text": "to the queen but around two you can see the first news about her being ill and",
    "start": "1741440",
    "end": "1747440"
  },
  {
    "text": "then the high peak at 750 is the news that she had passed and as you can see",
    "start": "1747440",
    "end": "1754559"
  },
  {
    "text": "from this graph such events gives us sudden burst of traffic and we cannot we",
    "start": "1754559",
    "end": "1759960"
  },
  {
    "text": "didn't know about the news in advance and we can prepare for it other than",
    "start": "1759960",
    "end": "1765279"
  },
  {
    "text": "just in general in general m so sending these kind of breaking news",
    "start": "1765279",
    "end": "1771600"
  },
  {
    "text": "push notifications is somewhat like opening the doors on Black Friday a",
    "start": "1771600",
    "end": "1776679"
  },
  {
    "text": "sudden Rush of people trying to get in uh and the pre the preventive measures",
    "start": "1776679",
    "end": "1782200"
  },
  {
    "text": "we've been discussing uh helps handle these uh uh traffic Peaks as well but",
    "start": "1782200",
    "end": "1788039"
  },
  {
    "text": "with one crucial obvious difference we don't want to stop these requests we",
    "start": "1788039",
    "end": "1793600"
  },
  {
    "text": "don't want to deny these uses from uh reading our our front page or or reading",
    "start": "1793600",
    "end": "1798960"
  },
  {
    "text": "our content so so luckily uh since these",
    "start": "1798960",
    "end": "1804159"
  },
  {
    "text": "traffic Peaks are do not reach the same dimensions as the Deux do attex do H we",
    "start": "1804159",
    "end": "1809559"
  },
  {
    "text": "usually handle it okay usually but not always uh and so",
    "start": "1809559",
    "end": "1816000"
  },
  {
    "text": "we're going to give you a few examples of when we didn't um I guess to try to",
    "start": "1816000",
    "end": "1823000"
  },
  {
    "text": "uh tell you that it's okay to fail once in a while I don't know why so the first one uh is uh from um",
    "start": "1823000",
    "end": "1831480"
  },
  {
    "text": "last summer I think yeah uh so this in Norway on NK has Regional officers all",
    "start": "1831480",
    "end": "1838279"
  },
  {
    "text": "around Norway and they have their own journalists do their own reporting use any tools made available to to them in",
    "start": "1838279",
    "end": "1845240"
  },
  {
    "text": "the CMS uh perhaps without reading the fine print so in this case uh the uh",
    "start": "1845240",
    "end": "1852320"
  },
  {
    "text": "office in Northern Norway wanted the public to vote for nland the the",
    "start": "1852320",
    "end": "1858919"
  },
  {
    "text": "Region's most beautiful mountain tour and oh boy they did and there was",
    "start": "1858919",
    "end": "1865200"
  },
  {
    "text": "probably some scripting involved as well someone W wanting their favorite Mountain to to reach the top as it were",
    "start": "1865200",
    "end": "1873320"
  },
  {
    "text": "on that list um and they were using the informal pole plugging that we provided",
    "start": "1873320",
    "end": "1880679"
  },
  {
    "text": "um and that was not built to handle these kind of things so it crashed um",
    "start": "1880679",
    "end": "1887240"
  },
  {
    "text": "and we didn't actually know about it until they called us and say U hey guys",
    "start": "1887240",
    "end": "1892760"
  },
  {
    "text": "are polic down uh what's up and then we could see that okay this is not that's",
    "start": "1892760",
    "end": "1898840"
  },
  {
    "text": "not you not know um and long story short we actually restarted that poll using",
    "start": "1898840",
    "end": "1905480"
  },
  {
    "text": "the same voting backend that we use for uh M the grand PRI the biggest voting",
    "start": "1905480",
    "end": "1911200"
  },
  {
    "text": "event outside of the election in Norway uh so they really like their mountains there up in the north",
    "start": "1911200",
    "end": "1919080"
  },
  {
    "text": "I'm going to go walk you through one of my personal favorites so first uh cross",
    "start": "1919080",
    "end": "1924120"
  },
  {
    "text": "country skiing is quite big in Norway is probably because we are best or because",
    "start": "1924120",
    "end": "1929559"
  },
  {
    "text": "no other country care about the sport uh so this was during the winter Olympics a few years ago and we started",
    "start": "1929559",
    "end": "1936600"
  },
  {
    "text": "getting messages about nrk o being down and that we had technical problems and",
    "start": "1936600",
    "end": "1942360"
  },
  {
    "text": "we did as we always do checked and it worked on our machines so it was",
    "start": "1942360",
    "end": "1947440"
  },
  {
    "text": "probably not thing well we got more messages and we said okay and we check logs we couldn't find anything so we",
    "start": "1947440",
    "end": "1954120"
  },
  {
    "text": "started checking more and we found that in our CDM provider that a lot of",
    "start": "1954120",
    "end": "1962120"
  },
  {
    "text": "Norwegian IPS had been blocked um so what had happened why were",
    "start": "1962120",
    "end": "1968080"
  },
  {
    "text": "these people being marked as attacks well H the Olympics happen during",
    "start": "1968080",
    "end": "1974240"
  },
  {
    "text": "daytime or more precisely work time so so uh these was these were employees uh",
    "start": "1974240",
    "end": "1981840"
  },
  {
    "text": "working at a company and they were having the same IP because they were sitting on the same internet connection",
    "start": "1981840",
    "end": "1989240"
  },
  {
    "text": "uh and our CDM provider thought they were attacks so they were just blocked",
    "start": "1989240",
    "end": "1997080"
  },
  {
    "text": "so we did two things to fix this first we have event mode that we turned on this is it says that the event or the",
    "start": "1997080",
    "end": "2005039"
  },
  {
    "text": "user pattern is different now than normally so so it it's Kinder before it",
    "start": "2005039",
    "end": "2010600"
  },
  {
    "text": "blocks users and also we have allow list some of the company IPS because these",
    "start": "2010600",
    "end": "2016159"
  },
  {
    "text": "were big companies in Norway because it's easier to allow list them than to tell them not to watch the Winter",
    "start": "2016159",
    "end": "2023399"
  },
  {
    "text": "Olympics during work so this is an an older example but",
    "start": "2023399",
    "end": "2030480"
  },
  {
    "text": "um in some years ago n aired yeah it's a strange picture n aired a reality dating",
    "start": "2030480",
    "end": "2037799"
  },
  {
    "text": "show uh called literally when the chemistry is right uh and they were trying to match participants using",
    "start": "2037799",
    "end": "2045399"
  },
  {
    "text": "science um smell for instance um and it was a strange show but it it became",
    "start": "2045399",
    "end": "2052158"
  },
  {
    "text": "quite popular and uh with a lot of people following from from week to week",
    "start": "2052159",
    "end": "2057398"
  },
  {
    "text": "and uh in the finale the winning couple was raled ready to start dating proper",
    "start": "2057399",
    "end": "2063240"
  },
  {
    "text": "uh and during the credits a voiceover said something like uh and if you're if you like to learn more about how that",
    "start": "2063240",
    "end": "2069638"
  },
  {
    "text": "dating went uh visit nk. now and oh boy people did uh so this is something that",
    "start": "2069639",
    "end": "2077320"
  },
  {
    "text": "we should we could have been made aware of in advance but um and and prepared",
    "start": "2077320",
    "end": "2082720"
  },
  {
    "text": "for but we on the sort of webite of things we didn't know that we were going to run this promotion at the end of the",
    "start": "2082720",
    "end": "2088720"
  },
  {
    "text": "of the finale and the people from the TV production probably didn't think it",
    "start": "2088720",
    "end": "2094960"
  },
  {
    "text": "could be an issue being used to Broadcasting um so well we got got a good low test",
    "start": "2094960",
    "end": "2101200"
  },
  {
    "text": "out it and we did actually uh go down or crash at that point because well this",
    "start": "2101200",
    "end": "2107079"
  },
  {
    "text": "was before we were able to implement all the tips we've talked about today uh and all our traffic was running through the",
    "start": "2107079",
    "end": "2113680"
  },
  {
    "text": "same load balancer and um that me meant that all images and assets and scripts",
    "start": "2113680",
    "end": "2120400"
  },
  {
    "text": "and stuff including all the HTML files and or the the web content and it became",
    "start": "2120400",
    "end": "2127240"
  },
  {
    "text": "too much of a bottleneck for that uh for that old Lo bander and also ran of rules",
    "start": "2127240",
    "end": "2132920"
  },
  {
    "text": "and stuff so and just to mention that thing things takes time to fix um the next year they",
    "start": "2132920",
    "end": "2141920"
  },
  {
    "text": "actually got a new season of this show uh and during the finale the exact same",
    "start": "2141920",
    "end": "2147560"
  },
  {
    "text": "thing happened so did we learn something yes did we manag to fix it in time",
    "start": "2147560",
    "end": "2154960"
  },
  {
    "text": "no okay so this is not a failure but but we're going to mention election again",
    "start": "2154960",
    "end": "2160359"
  },
  {
    "text": "because it's quite big in Norway and it's or and one of the main events at NK and happens every second year so at 9:00",
    "start": "2160359",
    "end": "2167720"
  },
  {
    "text": "p.m. the polling stations close and the results of the early votes are released along with the first",
    "start": "2167720",
    "end": "2173800"
  },
  {
    "text": "projections and we are not allowed to give out the first project projections",
    "start": "2173800",
    "end": "2179560"
  },
  {
    "text": "or results before 9 p.m. if we do the um",
    "start": "2179560",
    "end": "2184599"
  },
  {
    "text": "the election could be an olded and if we don't deliver at 9:00 um we're not",
    "start": "2184599",
    "end": "2190400"
  },
  {
    "text": "adhering to the nrk statement of commitments and we get fines we're not informing the public just at 9:00 we",
    "start": "2190400",
    "end": "2197200"
  },
  {
    "text": "have to deliver the results and people know that the results come at 9: so they sit and wait and",
    "start": "2197200",
    "end": "2204319"
  },
  {
    "text": "refresh the web page to see what are the first results so here you can see our graphs",
    "start": "2204319",
    "end": "2210880"
  },
  {
    "text": "from 20121 and can you guess what time it's 9",
    "start": "2210880",
    "end": "2217520"
  },
  {
    "text": "so we mentioned uh the melody that's obviously not the only uh public",
    "start": "2217720",
    "end": "2222760"
  },
  {
    "text": "interaction event we have throughout the year we have a lot of other uh award shows and competitions and uh even our",
    "start": "2222760",
    "end": "2229800"
  },
  {
    "text": "own version of The Masked Singer uh and many of these have these short voting",
    "start": "2229800",
    "end": "2235079"
  },
  {
    "text": "Windows where the host says something like vote for your favorite now and everyone does that and in the next 5",
    "start": "2235079",
    "end": "2241800"
  },
  {
    "text": "minutes while that voting window is open we get a lot of requests so this is something we can and do you prepare for",
    "start": "2241800",
    "end": "2248520"
  },
  {
    "text": "and we have a lot of practice preparing for these these sort of events because it's a live show we needless to go um um",
    "start": "2248520",
    "end": "2256640"
  },
  {
    "text": "correctly without hitch uh and talking about U Melody Grand PR NK",
    "start": "2256640",
    "end": "2264079"
  },
  {
    "text": "has been running it since the early 60s um a a few years ago I think probably",
    "start": "2264079",
    "end": "2270079"
  },
  {
    "text": "around 2020 we started doing online voting uh by the public during this",
    "start": "2270079",
    "end": "2276240"
  },
  {
    "text": "events before that it was uh SMS based and before that it was all juries selecting um but 2020 was the first year",
    "start": "2276240",
    "end": "2285480"
  },
  {
    "text": "went all in on online voting and we even had um emojis where you able to react on",
    "start": "2285480",
    "end": "2292119"
  },
  {
    "text": "the artist's performance by clicking in the appropriate emoji and you can not",
    "start": "2292119",
    "end": "2297240"
  },
  {
    "text": "just once as many times as you wanted and that those emojis from the public would confetti out during the um",
    "start": "2297240",
    "end": "2303520"
  },
  {
    "text": "artist's performance um and I like to show a short clip from from that night",
    "start": "2303520",
    "end": "2311000"
  },
  {
    "text": "this is from Grand",
    "start": "2311000",
    "end": "2313520"
  },
  {
    "text": "[Applause] PR",
    "start": "2331550",
    "end": "2338940"
  },
  {
    "text": "[Applause] for one can only dream it is we did get",
    "start": "2338940",
    "end": "2346000"
  },
  {
    "text": "the voting under way and and we were able to uh select a lovely winner as as",
    "start": "2346000",
    "end": "2351720"
  },
  {
    "text": "Ron said unfortunately she was not able to perform at the Eurovision Sun contest",
    "start": "2351720",
    "end": "2357079"
  },
  {
    "text": "due to a small worldwide pandemic you might",
    "start": "2357079",
    "end": "2361839"
  },
  {
    "text": "remember yes so I'm going to bring this back this was the layers of protection",
    "start": "2362319",
    "end": "2367480"
  },
  {
    "text": "that we talked about earlier now it's dark blue so how would you access the API if",
    "start": "2367480",
    "end": "2376400"
  },
  {
    "text": "you were a developer well it's quite the same you",
    "start": "2376400",
    "end": "2382040"
  },
  {
    "text": "will you have an address it will go through the CDN it will go through one of the applications and you will get the",
    "start": "2382040",
    "end": "2387640"
  },
  {
    "text": "data from the API of course you won't you will just ask the API directly and",
    "start": "2387640",
    "end": "2395280"
  },
  {
    "text": "is there a problem with this well yes because all the protection we have added is now",
    "start": "2395280",
    "end": "2401119"
  },
  {
    "text": "gone and this leads up to the final type of attacks that we are going to talk",
    "start": "2401119",
    "end": "2406359"
  },
  {
    "text": "about yes a text from within uh we call this U this category why wait for the",
    "start": "2406359",
    "end": "2413160"
  },
  {
    "text": "public or the evildoers to to take us down when we can just do it ourselves so we call this think from within but we",
    "start": "2413160",
    "end": "2420240"
  },
  {
    "text": "might as well call it accidents or uh shortcuts or poor planning or or even we",
    "start": "2420240",
    "end": "2426240"
  },
  {
    "text": "should really know better um so this is when we're generating the",
    "start": "2426240",
    "end": "2431400"
  },
  {
    "text": "excessive amounts of of traffic ourselves um just due to improper configuration or",
    "start": "2431400",
    "end": "2439160"
  },
  {
    "text": "just testing something or not considering the impl implications of our",
    "start": "2439160",
    "end": "2446079"
  },
  {
    "text": "implementations uh and these attacks are extra scary because as England chose it",
    "start": "2446079",
    "end": "2451319"
  },
  {
    "text": "they they circumvent all the U measures we've put in place to protect our services um and not only that uh they",
    "start": "2451319",
    "end": "2460800"
  },
  {
    "text": "can use these services in ways they weren't originally designed for uh in a",
    "start": "2460800",
    "end": "2465839"
  },
  {
    "text": "company like Nik we have different teams building different components different apis and you might make usage",
    "start": "2465839",
    "end": "2472960"
  },
  {
    "text": "assumptions about that other API that that team was not uh did not plan",
    "start": "2472960",
    "end": "2479800"
  },
  {
    "text": "for so we are going to give you some examples of our failures because we have",
    "start": "2479800",
    "end": "2485520"
  },
  {
    "text": "some of those as well failures again oh yeah uh so the first one I'm just going to talk in general terms because we've",
    "start": "2485520",
    "end": "2492200"
  },
  {
    "text": "done this so many times um so let's say you have a system with lots of data and you suddenly need",
    "start": "2492200",
    "end": "2498880"
  },
  {
    "text": "to make changes to the data and it's too too much data to do it manually but",
    "start": "2498880",
    "end": "2505160"
  },
  {
    "text": "luckily you have an API and you can just you can just write a little script and post the data to the API and boom all",
    "start": "2505160",
    "end": "2512200"
  },
  {
    "text": "data is updated of course it's not because you forgot that your API is actually quite slow and it's placed",
    "start": "2512200",
    "end": "2518520"
  },
  {
    "text": "behind a CU because it's so slow and what happened when you send a few",
    "start": "2518520",
    "end": "2523960"
  },
  {
    "text": "thousand requests at it it goes down so much for all the protection you",
    "start": "2523960",
    "end": "2529440"
  },
  {
    "text": "have added and the queue and all the good thoughts of your [Music]",
    "start": "2529440",
    "end": "2535119"
  },
  {
    "text": "architecture um a few years ago we added videos to the front page of an anada I",
    "start": "2535119",
    "end": "2541440"
  },
  {
    "text": "know and then uh the product team or the journalists said what we've seen that",
    "start": "2541440",
    "end": "2547839"
  },
  {
    "text": "other sites have have autop playing videos can't we have that and and our initial response was obviously please no",
    "start": "2547839",
    "end": "2554720"
  },
  {
    "text": "uh because no one likes AO playing videos uh but but they were quite pers persuasive so so uh well we try and then",
    "start": "2554720",
    "end": "2562480"
  },
  {
    "text": "so we enabled the autop playing videos only thing was that we had not",
    "start": "2562480",
    "end": "2568359"
  },
  {
    "text": "talked to the team uh running the uh on demand streaming side of things so any",
    "start": "2568359",
    "end": "2574520"
  },
  {
    "text": "uh loading of a or starting a playing a video would send a request to that API say these are the uh the parts of the",
    "start": "2574520",
    "end": "2582319"
  },
  {
    "text": "file you need to load stuff like that uh the Manifest and so so on and so that was not scaled at all to handle the",
    "start": "2582319",
    "end": "2589520"
  },
  {
    "text": "traffic from the most used page on N uh so that that went down the streaming",
    "start": "2589520",
    "end": "2596160"
  },
  {
    "text": "service went down n TV um and there was some shouting and then we got turn off",
    "start": "2596160",
    "end": "2603800"
  },
  {
    "text": "the AL playing videos we discussed it with the the other team got the proper",
    "start": "2603800",
    "end": "2609119"
  },
  {
    "text": "uh um uh routes set up and we were able to unfortunately enable it",
    "start": "2609119",
    "end": "2615640"
  },
  {
    "text": "again yes and one final friendly attack because uh we have previously talked",
    "start": "2616119",
    "end": "2621599"
  },
  {
    "text": "about load test and that it's hard to do load test on new systems so of course we have an example from that too um we've",
    "start": "2621599",
    "end": "2628839"
  },
  {
    "text": "talked about the election too many times so this was the day before the election and we were doing the load test on our",
    "start": "2628839",
    "end": "2635680"
  },
  {
    "text": "application and we had created a good test environment it was a pre-production",
    "start": "2635680",
    "end": "2640960"
  },
  {
    "text": "environment very similar to the production environment actually twoo similar to the production environment",
    "start": "2640960",
    "end": "2646960"
  },
  {
    "text": "because we had an integration to our production environment so when we",
    "start": "2646960",
    "end": "2653079"
  },
  {
    "text": "started doing the test in the preproduction we got alarms in the production on applications that were not",
    "start": "2653079",
    "end": "2658200"
  },
  {
    "text": "at all related to our test and first we thought well that's just a coincidence",
    "start": "2658200",
    "end": "2664920"
  },
  {
    "text": "so we did the test again and no it was not a coincidence um but it was surprising and",
    "start": "2664920",
    "end": "2670280"
  },
  {
    "text": "what we found out was that we had used our production Firebase account I said mock out your Firebase Integrations uh",
    "start": "2670280",
    "end": "2677599"
  },
  {
    "text": "so that when we did the load test Firebase blocked us which means that the other applications using Firebase also",
    "start": "2677599",
    "end": "2683400"
  },
  {
    "text": "got blocked and got down and they were production applications they were not critical it wasn't a big problem but it",
    "start": "2683400",
    "end": "2690160"
  },
  {
    "text": "was stressful and it was it was the day before the election and it was not how we were going to do the load test that's",
    "start": "2690160",
    "end": "2696240"
  },
  {
    "text": "not when you wantt stress or or pressure so we should really add one",
    "start": "2696240",
    "end": "2703240"
  },
  {
    "text": "extra tip to the list uh uh to try to avoid uh internal attacks because there's no point in setting up all",
    "start": "2703240",
    "end": "2710119"
  },
  {
    "text": "preventive measures if you're just going to from from the external attacks if you're going to let the internal ons",
    "start": "2710119",
    "end": "2716680"
  },
  {
    "text": "take you down so consider how uh you and your fellow developers are accessing the",
    "start": "2716680",
    "end": "2723119"
  },
  {
    "text": "services um both during development and and with internal traffic and make sure",
    "start": "2723119",
    "end": "2728880"
  },
  {
    "text": "that all the Integrations have circuit breakers and and other systems in place",
    "start": "2728880",
    "end": "2734280"
  },
  {
    "text": "to avoid overloading um if a service has a cash use it obviously uh really just",
    "start": "2734280",
    "end": "2742119"
  },
  {
    "text": "pretend that any service or micros service or app within your uh system",
    "start": "2742119",
    "end": "2748559"
  },
  {
    "text": "could be evil and put all the preventive measures in place so do not bypass your own",
    "start": "2748559",
    "end": "2756480"
  },
  {
    "text": "protection and here we",
    "start": "2756480",
    "end": "2761640"
  },
  {
    "text": "are the six no seven tips on how to avoid having your planet blown up as it",
    "start": "2761640",
    "end": "2767800"
  },
  {
    "text": "were um in recent years thetics have become more frequent it's something",
    "start": "2767800",
    "end": "2773200"
  },
  {
    "text": "we've learned to live with and these are based on our experience on how to how to",
    "start": "2773200",
    "end": "2780559"
  },
  {
    "text": "actually live with that situation but um",
    "start": "2780559",
    "end": "2785640"
  },
  {
    "text": "as you um as you se but even if you're not a target of theas attack actually",
    "start": "2785640",
    "end": "2791319"
  },
  {
    "text": "you might have traffic from um the normal your actual normal users or even",
    "start": "2791319",
    "end": "2797760"
  },
  {
    "text": "a a tire developer running in an incorrect script um but hand these handling these",
    "start": "2797760",
    "end": "2805079"
  },
  {
    "text": "uh attacks that that is hard and like us you will probably fail from time to time",
    "start": "2805079",
    "end": "2811800"
  },
  {
    "text": "but hopefully we've uh shown you that uh it's okay to fail if nothing else you get it kind of good story out of",
    "start": "2811800",
    "end": "2819640"
  },
  {
    "text": "it and that's about it I think I think so any questions oh you can clip",
    "start": "2819640",
    "end": "2826130"
  },
  {
    "text": "[Music] [Applause]",
    "start": "2826130",
    "end": "2832160"
  },
  {
    "text": "over we have a question in the back sure one thing I found with WS is it",
    "start": "2832160",
    "end": "2840240"
  },
  {
    "text": "turns into a game of wack yeah or user policies to actually because uh your",
    "start": "2840240",
    "end": "2848319"
  },
  {
    "text": "users keep getting blocked is this something you experienced and how did you deal with it uh how Okay so so the",
    "start": "2848319",
    "end": "2856240"
  },
  {
    "text": "the web application firewall and and the rules that we set up they they might uh",
    "start": "2856240",
    "end": "2861400"
  },
  {
    "text": "prevent actual users to accessing the service and how they would deal with with that that situation I think was a",
    "start": "2861400",
    "end": "2869079"
  },
  {
    "text": "question and well it is uh it is the game of wack we we keep tuning that",
    "start": "2869079",
    "end": "2875640"
  },
  {
    "text": "those triggers and that or those limits to try to figure out uh what is the correct way of uh what where are they uh",
    "start": "2875640",
    "end": "2883680"
  },
  {
    "text": "where what is the correct limit of threshold uh what we've done recently is try to use different because these rules",
    "start": "2883680",
    "end": "2890520"
  },
  {
    "text": "are set up by domain so we tried to separate our main content domain uh www.",
    "start": "2890520",
    "end": "2897599"
  },
  {
    "text": "nrk.no from uh API requests and things like that and also images so that if you're",
    "start": "2897599",
    "end": "2905599"
  },
  {
    "text": "blocked from some API requests uh you will still be able to access the content",
    "start": "2905599",
    "end": "2911240"
  },
  {
    "text": "uh and uh we try to and we have that in mind when building the services say that",
    "start": "2911240",
    "end": "2916359"
  },
  {
    "text": "you if something is incorrect or you you're we have a page with too many uh",
    "start": "2916359",
    "end": "2922079"
  },
  {
    "text": "elements using the dynamic Elements which might happen since we have the journalists using whatever they want um",
    "start": "2922079",
    "end": "2929839"
  },
  {
    "text": "then you you only lose a bit of interaction uh a bit of the the Dynamics of it you w you will still be able to",
    "start": "2929839",
    "end": "2936280"
  },
  {
    "text": "read the content which is the important part for for us but it is",
    "start": "2936280",
    "end": "2943240"
  },
  {
    "text": "difficult another question in count we publish all our IP addresses so you can",
    "start": "2943240",
    "end": "2948559"
  },
  {
    "text": "just say to the hosting service we accept requests from these IP addresses",
    "start": "2948559",
    "end": "2954160"
  },
  {
    "text": "that forges all the traffic to go through Cloud flare and the W yeah is there not an equivalent in AIM yes so so",
    "start": "2954160",
    "end": "2961480"
  },
  {
    "text": "yeah so we have we have that for we don't have that for our internal Services because we want to to be able",
    "start": "2961480",
    "end": "2967920"
  },
  {
    "text": "to test things uh from uh from within and we also have uh things that are not",
    "start": "2967920",
    "end": "2973359"
  },
  {
    "text": "available from from through Aki so that why that's why we route things internally as well but but any um uh",
    "start": "2973359",
    "end": "2981400"
  },
  {
    "text": "traffic for for our our major uh apps that's all always handled uh or the",
    "start": "2981400",
    "end": "2987319"
  },
  {
    "text": "outer layers is always handled uh limited through the IPS uh from from akmi but the but the internal uh um uh",
    "start": "2987319",
    "end": "2995960"
  },
  {
    "text": "apis are not they are just internal uh",
    "start": "2995960",
    "end": "3000599"
  },
  {
    "text": "requests another question for M did any your services explicitly imp R",
    "start": "3002520",
    "end": "3010960"
  },
  {
    "text": "limits I noticed you said over scaling what about the",
    "start": "3010960",
    "end": "3017640"
  },
  {
    "text": "opp if we get too many reest",
    "start": "3017640",
    "end": "3023000"
  },
  {
    "text": "um we don't we have that actually um uh that's something we we we try to do",
    "start": "3027400",
    "end": "3035359"
  },
  {
    "text": "where where if we reach a sort of limit we can start denying requests with",
    "start": "3035359",
    "end": "3040720"
  },
  {
    "text": "saying a two minute request we have that on the search service we try to do that on the unimportant part of the service",
    "start": "3040720",
    "end": "3046920"
  },
  {
    "text": "as that's that that come comes back to the tip about uh prioritizing part of the service so that we're able to or we",
    "start": "3046920",
    "end": "3054119"
  },
  {
    "text": "want to everyone to be able to access the main content but other parts we can say okay this is getting too much",
    "start": "3054119",
    "end": "3060520"
  },
  {
    "text": "traffic now so we'll we'll just dial it back a bit we also have set criticality for all",
    "start": "3060520",
    "end": "3067920"
  },
  {
    "text": "of our apps and it change during the week or during the year depending on what's important right now so every app",
    "start": "3067920",
    "end": "3073720"
  },
  {
    "text": "has a criticality number uh so that if for instance our cluster will be full of",
    "start": "3073720",
    "end": "3080440"
  },
  {
    "text": "PODS it will start taking down un important apps because we say that not everything is as important",
    "start": "3080440",
    "end": "3087240"
  },
  {
    "text": "even though the I mean it's hard to say that but but that's something that's handled by by by Ces you can you can say",
    "start": "3087240",
    "end": "3094720"
  },
  {
    "text": "that this uh deployment is more important than this one so if we if it needs more room to scale just shut down",
    "start": "3094720",
    "end": "3101319"
  },
  {
    "text": "replicas of the other one so we don't search is not important at an arc",
    "start": "3101319",
    "end": "3106400"
  },
  {
    "text": "Dino it also sucks yeah if there are no further questions",
    "start": "3106400",
    "end": "3114240"
  },
  {
    "text": "thank you for the time thank you for NC for happenings and enjoy the rest of the conference",
    "start": "3114240",
    "end": "3119380"
  },
  {
    "text": "[Applause]",
    "start": "3119380",
    "end": "3124569"
  }
]