[
  {
    "start": "0",
    "end": "60000"
  },
  {
    "text": "so let me just start with this session from a distributed monolith to a microservices solution um",
    "start": "9440",
    "end": "18480"
  },
  {
    "text": "i i'd like to tell you my experience from going from a monolith to to a microservices",
    "start": "18480",
    "end": "24320"
  },
  {
    "text": "solution or at least something which looks like it i'm janna",
    "start": "24320",
    "end": "29760"
  },
  {
    "text": "cloud solution architect at a small consulting firm based in the netherlands called 4.net at which",
    "start": "29760",
    "end": "37520"
  },
  {
    "text": "i'm doing well a lot of consulting and mostly migrating on-premises solution to the cloud or",
    "start": "37520",
    "end": "44399"
  },
  {
    "text": "expanding the current cloud ecosystem they have focused on azure solutions so",
    "start": "44399",
    "end": "50879"
  },
  {
    "text": "this talk is also focused on on well azure or at least most of the services i i'm",
    "start": "50879",
    "end": "57280"
  },
  {
    "text": "talking about is azure related but first well going from a monolith to a",
    "start": "57280",
    "end": "64158"
  },
  {
    "start": "60000",
    "end": "150000"
  },
  {
    "text": "microsoft solution why that's that's actually the question i'm asking most of",
    "start": "64159",
    "end": "71439"
  },
  {
    "text": "my clients nowadays uh because a monolith solution",
    "start": "71439",
    "end": "76960"
  },
  {
    "text": "most of the time is a pretty robust solution it has stood the ages of well it has stood the the",
    "start": "76960",
    "end": "85280"
  },
  {
    "text": "the time for quite some time most of them are quite old or at least quite old they're",
    "start": "85280",
    "end": "91920"
  },
  {
    "text": "all the rest two years so uh they work they make money",
    "start": "91920",
    "end": "98000"
  },
  {
    "text": "so why move away from something which makes money do something well something else",
    "start": "98000",
    "end": "105360"
  },
  {
    "text": "uh sure there are reasons uh most of my clients say or at least the developers say",
    "start": "105360",
    "end": "110960"
  },
  {
    "text": "yeah we want to scale globally we want to scale this part this part and microservices are better",
    "start": "110960",
    "end": "118880"
  },
  {
    "text": "it's it's it's a cloud it's the future and that's just not true",
    "start": "118880",
    "end": "125920"
  },
  {
    "text": "or at least not per se a monolith is a perfectly fine",
    "start": "125920",
    "end": "133120"
  },
  {
    "text": "architecture if you've designed this well and that's most that's the problem most",
    "start": "133120",
    "end": "139360"
  },
  {
    "text": "of the time because most of the time the monolith",
    "start": "139360",
    "end": "144400"
  },
  {
    "text": "which they want to move off from isn't designed very well",
    "start": "144400",
    "end": "149760"
  },
  {
    "start": "150000",
    "end": "240000"
  },
  {
    "text": "but what happens if they're not careful they're creating some kind of services",
    "start": "150000",
    "end": "156560"
  },
  {
    "text": "architecture with a lot of well services doing their own little thing because they think",
    "start": "156560",
    "end": "162720"
  },
  {
    "text": "that's what microservices is all about and when you do something to",
    "start": "162720",
    "end": "168959"
  },
  {
    "text": "one service everything will fall down or at least that's that's what",
    "start": "168959",
    "end": "175040"
  },
  {
    "text": "i'm seeing quite a lot at the customers so instead of making this",
    "start": "175040",
    "end": "183360"
  },
  {
    "text": "big distributed jenga tower why not start with the monolith first or",
    "start": "183360",
    "end": "190000"
  },
  {
    "text": "why not start at your problem first because yeah like i mentioned if you",
    "start": "190000",
    "end": "196000"
  },
  {
    "text": "move one block from the tower everything crumbles and this is",
    "start": "196000",
    "end": "201680"
  },
  {
    "text": "this goes for the for the monolith solution they have most of the time because it's not designed properly so",
    "start": "201680",
    "end": "208400"
  },
  {
    "text": "there's a lot of technical depth and if you change one class you probably have changed",
    "start": "208400",
    "end": "214000"
  },
  {
    "text": "lots of other classes also so a lot of customers also say yeah we",
    "start": "214000",
    "end": "219680"
  },
  {
    "text": "want to start from scratch and do everything in a green field solution",
    "start": "219680",
    "end": "224959"
  },
  {
    "text": "which is good good and fun for me as an external consultant but most of the time not very cost",
    "start": "224959",
    "end": "231440"
  },
  {
    "text": "efficient so i'd advise against such a scenario",
    "start": "231440",
    "end": "238560"
  },
  {
    "text": "um but let me also state state first before i'm going uh into the",
    "start": "238840",
    "end": "244640"
  },
  {
    "start": "240000",
    "end": "315000"
  },
  {
    "text": "techniques and and the pitfalls uh with such a migration there is no silver",
    "start": "244640",
    "end": "250799"
  },
  {
    "text": "bullet with such a migration that's just the truth no customer is the same",
    "start": "250799",
    "end": "257680"
  },
  {
    "text": "sure there are some principles you can you can adopt to to make your overall",
    "start": "257680",
    "end": "262880"
  },
  {
    "text": "solution and migration better but there is no silver bullet no if if you",
    "start": "262880",
    "end": "270479"
  },
  {
    "text": "read the blog post this is how this is the step-by-step plan how to move away from your monolith to a microsoft",
    "start": "270479",
    "end": "276320"
  },
  {
    "text": "solution it's probably their experience",
    "start": "276320",
    "end": "281440"
  },
  {
    "text": "not something you can map one-on-one on your uh your customer your project",
    "start": "281440",
    "end": "287759"
  },
  {
    "text": "so be aware of this so everything i'm telling you now is my experience and",
    "start": "287759",
    "end": "294639"
  },
  {
    "text": "also some of the pitfalls and practices i've learned from doing well",
    "start": "294639",
    "end": "301039"
  },
  {
    "text": "quite a couple of migrations of these types of projects and well the first one like i mentioned",
    "start": "301039",
    "end": "308160"
  },
  {
    "text": "is asking why move away so that's the first question so we also thought",
    "start": "308160",
    "end": "316479"
  },
  {
    "start": "315000",
    "end": "375000"
  },
  {
    "text": "we had to go from our monolith solution to to microsoft solution and at one of my",
    "start": "316479",
    "end": "322639"
  },
  {
    "text": "customers what we did is well what we started out with was something which looks like this we had",
    "start": "322639",
    "end": "331280"
  },
  {
    "text": "well like like everyone we had some or like most people we had some sql server with some",
    "start": "331280",
    "end": "338000"
  },
  {
    "text": "database holding all our customer data and some back-end systems like",
    "start": "338000",
    "end": "343600"
  },
  {
    "text": "sap sharepoint salesforce you name it we had them which",
    "start": "343600",
    "end": "350080"
  },
  {
    "text": "also held some customer data and that's this was a lot of data and we had",
    "start": "350080",
    "end": "356080"
  },
  {
    "text": "we had some internal internal services using using it so our employees",
    "start": "356080",
    "end": "363759"
  },
  {
    "text": "could use all of this and obviously an identity service to login",
    "start": "363759",
    "end": "369600"
  },
  {
    "text": "log out holding credentials stuff like this also stored in the customer database",
    "start": "369600",
    "end": "376880"
  },
  {
    "start": "375000",
    "end": "480000"
  },
  {
    "text": "so this is argon well we're quite happy with this starting point or having lots of data of",
    "start": "376880",
    "end": "382479"
  },
  {
    "text": "customers and because we had a lot of data of customers uh which was quite value well valuable data",
    "start": "382479",
    "end": "390560"
  },
  {
    "text": "if you if you're in the market of this this type of data so",
    "start": "390560",
    "end": "396960"
  },
  {
    "text": "we got approached by some well partners now and they said yeah we'd like to",
    "start": "396960",
    "end": "403280"
  },
  {
    "text": "integrate we'd like to have all this data or at least use it or",
    "start": "403280",
    "end": "408639"
  },
  {
    "text": "extend it or stand our own services with it or add data to your data sources",
    "start": "408639",
    "end": "416880"
  },
  {
    "text": "so that's that's good making our well monetizing the data monetizing the well",
    "start": "416880",
    "end": "422960"
  },
  {
    "text": "user data so what we did is we created an integration service so this integration service was",
    "start": "422960",
    "end": "430800"
  },
  {
    "text": "well the entry point to our data repositories like the sql server salesforce sharepoint all of them",
    "start": "430800",
    "end": "438400"
  },
  {
    "text": "it connects to all of those services aggregated the data modeled it to some kind of a useful",
    "start": "438400",
    "end": "444240"
  },
  {
    "text": "format and exposed it to our business to business api and this business business api is the",
    "start": "444240",
    "end": "450880"
  },
  {
    "text": "api our partners could connect to to fetch the data it was a rather thin layer",
    "start": "450880",
    "end": "458160"
  },
  {
    "text": "because well all of the aggregation stuff was being handled in the integration",
    "start": "458160",
    "end": "464639"
  },
  {
    "text": "service so still pretty happy with this design",
    "start": "464639",
    "end": "469759"
  },
  {
    "text": "because our b2b api could be held quite small and thin and scale well easily because it was so",
    "start": "469759",
    "end": "478400"
  },
  {
    "text": "thin um after a couple of months we discovered",
    "start": "478400",
    "end": "484240"
  },
  {
    "start": "480000",
    "end": "540000"
  },
  {
    "text": "some partners were so happy with it they were hammering the api with thousands of requests",
    "start": "484240",
    "end": "490400"
  },
  {
    "text": "per minute so we had to add an api management azure api",
    "start": "490400",
    "end": "496639"
  },
  {
    "text": "management in front of it which is a good idea anyway having some",
    "start": "496639",
    "end": "502080"
  },
  {
    "text": "b2b management a service api in front of it to manage api",
    "start": "502080",
    "end": "507280"
  },
  {
    "text": "management you can do it in a portal and a management uh site also but",
    "start": "507280",
    "end": "513120"
  },
  {
    "text": "that's not something well stakeholders liked using for account manager so we created a nice",
    "start": "513120",
    "end": "520560"
  },
  {
    "text": "management suite for them and we stored the data in a separate sql database because we",
    "start": "520560",
    "end": "527600"
  },
  {
    "text": "figured yeah all this partner management data isn't exactly",
    "start": "527600",
    "end": "532800"
  },
  {
    "text": "stuff we want to integrate with our customer data so a new database would spun up",
    "start": "532800",
    "end": "539760"
  },
  {
    "text": "and that went well and quite well for well i think a year or so and then we thought",
    "start": "539760",
    "end": "548720"
  },
  {
    "start": "540000",
    "end": "750000"
  },
  {
    "text": "this is working so well why not use this service ourselves also",
    "start": "548720",
    "end": "554720"
  },
  {
    "text": "as you've probably heard about the term dog food in your own product or drinking your own champagne so we",
    "start": "556320",
    "end": "562080"
  },
  {
    "text": "thought let's do this also because if we're using our own api",
    "start": "562080",
    "end": "567279"
  },
  {
    "text": "we can probably find bugs issues performance optimizations or amazing features our",
    "start": "567279",
    "end": "574080"
  },
  {
    "text": "partners are also experiencing so that sounds like a good idea",
    "start": "574080",
    "end": "579519"
  },
  {
    "text": "and it is um and at the time we had a financial institution a bank",
    "start": "579519",
    "end": "585760"
  },
  {
    "text": "contacting us or well we contacted the bank that who wants to",
    "start": "585760",
    "end": "591200"
  },
  {
    "text": "uh get some uh the payment information of our customers and well stupid in our",
    "start": "591200",
    "end": "597680"
  },
  {
    "text": "own ecosystem so there's whole procedures to to do this",
    "start": "597680",
    "end": "603040"
  },
  {
    "text": "and to get approval for this so we got it and as you might know i don't know how",
    "start": "603040",
    "end": "609040"
  },
  {
    "text": "it is in australia but here in europe banks and financial",
    "start": "609040",
    "end": "614560"
  },
  {
    "text": "institutions aren't per se the most modern and fancy",
    "start": "614560",
    "end": "619839"
  },
  {
    "text": "institutions concerning techniques so what we had to do",
    "start": "619839",
    "end": "625040"
  },
  {
    "text": "is connect with an ftp server connect to an ftp server download",
    "start": "625040",
    "end": "632880"
  },
  {
    "text": "files from a specific folder par well unzip these files parse them to",
    "start": "632880",
    "end": "638800"
  },
  {
    "text": "some kind of a usable format because they were zipped encrypted and",
    "start": "638800",
    "end": "647200"
  },
  {
    "text": "zipped and encrypted well encrypted two times because reasons i guess so that we had to parse",
    "start": "647200",
    "end": "654959"
  },
  {
    "text": "and afterwards model it to something useful for our own ecosystem and push it to the b2b api",
    "start": "654959",
    "end": "663200"
  },
  {
    "text": "so oh well so we we were thinking well downloading uh",
    "start": "663200",
    "end": "669519"
  },
  {
    "text": "parsing the stuff and processing it like sending it away that's three steps and someone read",
    "start": "669519",
    "end": "677360"
  },
  {
    "text": "something about doing microservices and the microservice should only do one thing and do it very",
    "start": "677360",
    "end": "684000"
  },
  {
    "text": "well okay so sounds like we need three services to do so in order to uh to",
    "start": "684000",
    "end": "691440"
  },
  {
    "text": "hop on the microservice bandwagon so that's what we did you created a web job downloading uh the",
    "start": "691440",
    "end": "699040"
  },
  {
    "text": "files from an ftp site a parser well parser service which was invoked by",
    "start": "699040",
    "end": "706640"
  },
  {
    "text": "the time it web job whenever something was downloaded and this parser did all the magic of",
    "start": "706640",
    "end": "712000"
  },
  {
    "text": "extracting and parsing and the processor was sending the stuff to the b2b api",
    "start": "712000",
    "end": "718800"
  },
  {
    "text": "and in a nutshell because we had to store some state and share the state across the services",
    "start": "718800",
    "end": "725200"
  },
  {
    "text": "we added a new sql database storing the state of well the files we downloaded",
    "start": "725200",
    "end": "733199"
  },
  {
    "text": "and this looked very fun on paper until it didn't in practice",
    "start": "733360",
    "end": "740720"
  },
  {
    "text": "because as you might see or know from experience or well for me it's pretty obvious now",
    "start": "740720",
    "end": "749440"
  },
  {
    "text": "but what we actually had designed was a distributed monolith over here",
    "start": "749440",
    "end": "756639"
  },
  {
    "start": "750000",
    "end": "810000"
  },
  {
    "text": "because what we were doing could just as well be done inside one well single service",
    "start": "756639",
    "end": "765200"
  },
  {
    "text": "because it's not that fancy and we're using a single database so whenever",
    "start": "766000",
    "end": "772240"
  },
  {
    "text": "something is changing inside the database like the scheme or",
    "start": "772240",
    "end": "777839"
  },
  {
    "text": "yeah like the scheme we have to check all three services if they're still well compliant with",
    "start": "777839",
    "end": "785120"
  },
  {
    "text": "with the new scheme and if not change all those services so that's that's one of the well one of",
    "start": "785120",
    "end": "793120"
  },
  {
    "text": "the things to look out for when going microservices",
    "start": "793120",
    "end": "798399"
  },
  {
    "text": "are they sharing the same database no you're probably doing uh you're probably",
    "start": "798399",
    "end": "803760"
  },
  {
    "text": "doing a distributed monolith but that's one thing uh we found one",
    "start": "803760",
    "end": "809680"
  },
  {
    "text": "this was in production one other thing is uh the way we designed it each service",
    "start": "809680",
    "end": "815519"
  },
  {
    "start": "810000",
    "end": "880000"
  },
  {
    "text": "called called the next service so whenever the processor service was failing for",
    "start": "815519",
    "end": "823120"
  },
  {
    "text": "reasons the parser and the timert web job also threw exceptions meaning",
    "start": "823120",
    "end": "830000"
  },
  {
    "text": "nothing got processed nothing went inside our data repository and all the",
    "start": "830000",
    "end": "835440"
  },
  {
    "text": "files well were still standing at the bank's ftp location",
    "start": "835440",
    "end": "841680"
  },
  {
    "text": "which was well kind of annoying no one got got hurt and no service got",
    "start": "841680",
    "end": "848000"
  },
  {
    "text": "hurt and the files weren't lost in the process but still annoying when when",
    "start": "848000",
    "end": "853920"
  },
  {
    "text": "something like this happened so that's also one of the signs you're doing something",
    "start": "853920",
    "end": "860880"
  },
  {
    "text": "well not right in your design but what what's also a problem in this",
    "start": "860880",
    "end": "868839"
  },
  {
    "text": "design is whenever the integration api is failing",
    "start": "868839",
    "end": "874720"
  },
  {
    "text": "everything is failing and that's not something the integration",
    "start": "874720",
    "end": "881360"
  },
  {
    "start": "880000",
    "end": "945000"
  },
  {
    "text": "api was quite stable almost never fell down but when it did",
    "start": "881360",
    "end": "887120"
  },
  {
    "text": "our whole ecosystem went down because we had designed a lot of synchronous calls and services",
    "start": "887120",
    "end": "894000"
  },
  {
    "text": "calling services so that's bad so we didn't only create a small",
    "start": "894000",
    "end": "899360"
  },
  {
    "text": "distributed monolith we created a rather big distributed monolith which is",
    "start": "899360",
    "end": "907440"
  },
  {
    "text": "not very fun to maintain especially if you're making breaking changes",
    "start": "907600",
    "end": "912880"
  },
  {
    "text": "some of the times so what we should have been doing",
    "start": "912880",
    "end": "918800"
  },
  {
    "text": "instead of making a lot of cool well services and using the newest and fanciest techniques",
    "start": "918800",
    "end": "925440"
  },
  {
    "text": "in azure we should have been thinking about what are we supposed to solve which",
    "start": "925440",
    "end": "933600"
  },
  {
    "text": "problem are we supposed to be solve which problem are we solving and well",
    "start": "933600",
    "end": "941279"
  },
  {
    "text": "how well what should we have been doing maybe just maybe we should have",
    "start": "941279",
    "end": "949040"
  },
  {
    "start": "945000",
    "end": "1170000"
  },
  {
    "text": "get to know the business people a bit better because most of the time the business people",
    "start": "949040",
    "end": "954160"
  },
  {
    "text": "actually know what they want and and well maybe not how but they know",
    "start": "954160",
    "end": "961519"
  },
  {
    "text": "they have a problem which needs to be solved so if you listen and talk to the",
    "start": "961519",
    "end": "966880"
  },
  {
    "text": "business people you might actually learn what you're well what you should be creating",
    "start": "966880",
    "end": "974800"
  },
  {
    "text": "and how to solve this problem uh one of the key features one of the well",
    "start": "974800",
    "end": "980480"
  },
  {
    "text": "the the key benefits of talking to them is you get to know their jargon",
    "start": "980480",
    "end": "986079"
  },
  {
    "text": "when they're talking about a customer you know or you get to know what a",
    "start": "986079",
    "end": "992560"
  },
  {
    "text": "customer actually means because if you're talking to an account manager a customer",
    "start": "992560",
    "end": "997920"
  },
  {
    "text": "is a totally different person when compared to when you're talking to a service desk person",
    "start": "997920",
    "end": "1004079"
  },
  {
    "text": "or maybe a marketeer that those customers are three three totally",
    "start": "1004079",
    "end": "1012000"
  },
  {
    "text": "different well objects because the goal of each of those stakeholders",
    "start": "1012000",
    "end": "1018639"
  },
  {
    "text": "is different an account manager doesn't need to know well does need to know per se",
    "start": "1018639",
    "end": "1024400"
  },
  {
    "text": "how many tickets how many uh alerts the customer has been raising sure it",
    "start": "1024400",
    "end": "1031199"
  },
  {
    "text": "might be good to know the the sentiment of of the customer when he or she is calling a column but",
    "start": "1031199",
    "end": "1039038"
  },
  {
    "text": "it's not all of the the key metrics that account manager is working with so get to know the jargon",
    "start": "1039039",
    "end": "1046000"
  },
  {
    "text": "and write down the functionality they want i personally like writing it down on a",
    "start": "1046000",
    "end": "1051840"
  },
  {
    "text": "sticky a small sticky with a marker so a big pen",
    "start": "1051840",
    "end": "1057039"
  },
  {
    "text": "so you can only write down one or two words when talking to the stakeholders why",
    "start": "1057039",
    "end": "1064480"
  },
  {
    "text": "well that means you have to actually listen to what they're telling because",
    "start": "1064480",
    "end": "1069760"
  },
  {
    "text": "you can't write down a whole s essay on the sticky note you can only write down one or two words",
    "start": "1069760",
    "end": "1075280"
  },
  {
    "text": "maybe an arrow or something else and that's it so you have to pay attention to what",
    "start": "1075280",
    "end": "1081679"
  },
  {
    "text": "they're saying make a reminder for yourself put it on the on the wall and when",
    "start": "1081679",
    "end": "1086720"
  },
  {
    "text": "you're well busy at your office at your desk you can check out the the sticky and be reminded of how",
    "start": "1086720",
    "end": "1094160"
  },
  {
    "text": "the conversation went what was being said stuff like this so that's well",
    "start": "1094160",
    "end": "1101120"
  },
  {
    "text": "due to a lot of developers i'm working with that's a whole new way",
    "start": "1101120",
    "end": "1107520"
  },
  {
    "text": "of working talking to people and talking to the business people because talking to our own teams is well",
    "start": "1107520",
    "end": "1114880"
  },
  {
    "text": "something most of us are doing anyway but talking to the businesses a whole new level and it takes some",
    "start": "1114880",
    "end": "1121280"
  },
  {
    "text": "getting used to but once you know what the business people what what the stakeholders want",
    "start": "1121280",
    "end": "1128000"
  },
  {
    "text": "you can translate this into some kind of a functional well functional domain functional wishes",
    "start": "1128000",
    "end": "1135679"
  },
  {
    "text": "and translate this to well how to solve this in a technical space",
    "start": "1135679",
    "end": "1143120"
  },
  {
    "text": "so at a different project a traveling agency we also had to move to the cloud and",
    "start": "1146559",
    "end": "1153840"
  },
  {
    "text": "make a scalable and dominate the world so what we did over there we started quite",
    "start": "1153840",
    "end": "1160240"
  },
  {
    "text": "all right in my opinion we were talking with the business people the stakeholders the product owners and",
    "start": "1160240",
    "end": "1165840"
  },
  {
    "text": "get to know what they actually wanted and after having talked to well lots",
    "start": "1165840",
    "end": "1171360"
  },
  {
    "start": "1170000",
    "end": "1375000"
  },
  {
    "text": "lots and lots of people so this takes quite a lot of time we came up with",
    "start": "1171360",
    "end": "1176400"
  },
  {
    "text": "uh well something which looks like this so as a traveling agency you have",
    "start": "1176400",
    "end": "1183200"
  },
  {
    "text": "this this thing called you want to book well vacations you have a catalog",
    "start": "1183200",
    "end": "1190799"
  },
  {
    "text": "where which holds the vacations and most of the time people want to search for vacations",
    "start": "1190799",
    "end": "1198160"
  },
  {
    "text": "well for wherever they want to go do you want to go to a sunny location do",
    "start": "1198160",
    "end": "1204240"
  },
  {
    "text": "you want to go to the snow something like this so church so these were three uh key functional domains",
    "start": "1204240",
    "end": "1212559"
  },
  {
    "text": "we had to implement because they're important um so we modeled this as",
    "start": "1212559",
    "end": "1220080"
  },
  {
    "text": "three different blocks and each of those blocks stood alone didn't have any con or doesn't has any",
    "start": "1220080",
    "end": "1227120"
  },
  {
    "text": "connection with each other which has a major benefit or search you",
    "start": "1227120",
    "end": "1233200"
  },
  {
    "text": "can use something like azure search the catalog it might be useful to store this in a cosmos",
    "start": "1233200",
    "end": "1239120"
  },
  {
    "text": "database and the booking that might be useful to store this in a relational database",
    "start": "1239120",
    "end": "1245200"
  },
  {
    "text": "and maybe a regis cache in front of it to well have have the data available",
    "start": "1245200",
    "end": "1250720"
  },
  {
    "text": "quickly and this isn't new you can also do this in a single executable on premises",
    "start": "1250720",
    "end": "1257840"
  },
  {
    "text": "this you don't have to go to the cloud to model something like this but my experience is",
    "start": "1257840",
    "end": "1263679"
  },
  {
    "text": "when you're modeling this in one big executable most of the time we find a way to",
    "start": "1263679",
    "end": "1271840"
  },
  {
    "text": "only connect to one single database and do some projections on it creating fuse creating whatever",
    "start": "1271840",
    "end": "1279360"
  },
  {
    "text": "type of database you have and find a way to get the data store the data in one",
    "start": "1279360",
    "end": "1286400"
  },
  {
    "text": "database and retrieve it and making very slow queries",
    "start": "1286400",
    "end": "1292080"
  },
  {
    "text": "in the cloud it's easier to spin up a search database no sql database caches stuff like this because it's just",
    "start": "1292080",
    "end": "1299360"
  },
  {
    "text": "one click away so this is a a bit how how we modeled it",
    "start": "1299360",
    "end": "1305200"
  },
  {
    "text": "and sure you might say yeah when booking a vacation i still need to know the",
    "start": "1305200",
    "end": "1311520"
  },
  {
    "text": "title the description the locations etc stuff data from the catalog and that's",
    "start": "1311520",
    "end": "1316840"
  },
  {
    "text": "true and also when searching for vacations you also need data from the catalog",
    "start": "1316840",
    "end": "1324000"
  },
  {
    "text": "so i need to connect to this database and that's not something i want or at least not",
    "start": "1324000",
    "end": "1330320"
  },
  {
    "text": "something i would advise to do um i've drawn this this",
    "start": "1330320",
    "end": "1335360"
  },
  {
    "text": "nice little event service underneath the fan grid icon over there i'll come",
    "start": "1335360",
    "end": "1341679"
  },
  {
    "text": "back to that later on whenever something major happens inside",
    "start": "1341679",
    "end": "1346720"
  },
  {
    "text": "one of these blocks i'm sending an event to the event service and any one of the other blocks can pick up",
    "start": "1346720",
    "end": "1353840"
  },
  {
    "text": "this event and do something with it so whenever there's a new vacation",
    "start": "1353840",
    "end": "1359520"
  },
  {
    "text": "being stored in the catalog or updated an event is being sent out and the",
    "start": "1359520",
    "end": "1364720"
  },
  {
    "text": "search and the booking can well update or subscribe to those events and do something with it",
    "start": "1364720",
    "end": "1372240"
  },
  {
    "text": "so this means i can keep my my well functional domains",
    "start": "1372240",
    "end": "1378640"
  },
  {
    "start": "1375000",
    "end": "1435000"
  },
  {
    "text": "have a single responsibility and keeping them rather simple i don't when creating",
    "start": "1378640",
    "end": "1384960"
  },
  {
    "text": "the booking domain i don't have to think about the catalog the the search",
    "start": "1384960",
    "end": "1391440"
  },
  {
    "text": "the payments the email reminds the whatever that's all",
    "start": "1391440",
    "end": "1397039"
  },
  {
    "text": "something else i only have to focus on the booking and creating a booking updating and booking stuff like this",
    "start": "1397039",
    "end": "1404720"
  },
  {
    "text": "so that's the only responsibility of this blog booking",
    "start": "1404720",
    "end": "1411520"
  },
  {
    "text": "makes the makes the overall service rather simple",
    "start": "1412559",
    "end": "1417840"
  },
  {
    "text": "now you might be thinking oh wow to store to do all of this stuff inside one",
    "start": "1421200",
    "end": "1427039"
  },
  {
    "text": "service it will create a pretty pretty big",
    "start": "1427039",
    "end": "1432080"
  },
  {
    "text": "service could be true that could be an implementation but you",
    "start": "1432080",
    "end": "1437279"
  },
  {
    "start": "1435000",
    "end": "1515000"
  },
  {
    "text": "could also implement this functional block like so having a small api",
    "start": "1437279",
    "end": "1442720"
  },
  {
    "text": "an app service communicating with a storage queue and a function picking up command",
    "start": "1442720",
    "end": "1449120"
  },
  {
    "text": "commands messages from the from storage queue updating the repositories updating",
    "start": "1449120",
    "end": "1454799"
  },
  {
    "text": "caches [Music] whatever so this is an implementation detail",
    "start": "1454799",
    "end": "1460720"
  },
  {
    "text": "so the overall design is those blocks and they have to do something with it",
    "start": "1460720",
    "end": "1465760"
  },
  {
    "text": "and this is just an implementation detail of one of those blocks when talking ab when",
    "start": "1465760",
    "end": "1472159"
  },
  {
    "text": "talking to the stakeholders the product owners they don't care how many azure functions",
    "start": "1472159",
    "end": "1477440"
  },
  {
    "text": "i have in my solution they don't care if i'm using storage queue or service-based queue they don't care",
    "start": "1477440",
    "end": "1483600"
  },
  {
    "text": "if i'm using q they just want their functional well problem",
    "start": "1483600",
    "end": "1488799"
  },
  {
    "text": "they want their problems being solved and they're asking me or my team to do so",
    "start": "1488799",
    "end": "1497279"
  },
  {
    "text": "and this is just an implementation detail just like creating an if statement or a switch",
    "start": "1497279",
    "end": "1502880"
  },
  {
    "text": "statement is an implementation detail on the higher level you don't actually",
    "start": "1502880",
    "end": "1508400"
  },
  {
    "text": "care you just want the code to flow appropriately",
    "start": "1508400",
    "end": "1514480"
  },
  {
    "text": "and then there's the next the next principle do repeat yourself the dry principle",
    "start": "1514480",
    "end": "1521919"
  },
  {
    "start": "1515000",
    "end": "1740000"
  },
  {
    "text": "and i see you're thinking i don't actually see your thinking but you could be",
    "start": "1521919",
    "end": "1528240"
  },
  {
    "text": "thinking i thought it was don't repeat yourself the the dry principle",
    "start": "1528240",
    "end": "1533360"
  },
  {
    "text": "and that's true until well 25 minutes ago now it's do repeat",
    "start": "1533360",
    "end": "1539919"
  },
  {
    "text": "yourself because i've done lots of projects where i thought yeah let's do this",
    "start": "1539919",
    "end": "1547360"
  },
  {
    "text": "drawing let's create an abstraction of this class and oh we need another base class and oh we need to",
    "start": "1547360",
    "end": "1553039"
  },
  {
    "text": "do some composition over here in order to not repeat this this calculation",
    "start": "1553039",
    "end": "1560720"
  },
  {
    "text": "not repeat this business logic not repeat whatever and it works quite well all of my",
    "start": "1560720",
    "end": "1567760"
  },
  {
    "text": "solutions didn't have a single line of well duplicated code because",
    "start": "1567760",
    "end": "1573760"
  },
  {
    "text": "everything was abstracted away composed the way it was very very clean you might say",
    "start": "1573760",
    "end": "1581919"
  },
  {
    "text": "but no one could understand how the code flowed anymore because i had so many abstractions in",
    "start": "1581919",
    "end": "1588400"
  },
  {
    "text": "the code uh so much logic was uh was yeah it's from redefining dry",
    "start": "1588400",
    "end": "1598240"
  },
  {
    "text": "so much abstraction is going on no one understood even me what happened what was happening",
    "start": "1600320",
    "end": "1608480"
  },
  {
    "text": "so that's not actually the goal of writing clean code or not repeating",
    "start": "1609039",
    "end": "1614559"
  },
  {
    "text": "yourself so when going microservices or when",
    "start": "1614559",
    "end": "1621760"
  },
  {
    "text": "creating distributed services it's actually fine to duplicate",
    "start": "1621760",
    "end": "1628880"
  },
  {
    "text": "some code it you don't have to go above and beyond to avoid duplicating",
    "start": "1628880",
    "end": "1635679"
  },
  {
    "text": "code it's fine to have some duplicate code sure if you're doing tax calculations it might be",
    "start": "1635679",
    "end": "1643440"
  },
  {
    "text": "useful to create a nougat package for this and use this nougat package to",
    "start": "1643440",
    "end": "1650000"
  },
  {
    "text": "calculate tags in all of your services because that well kind of has rules bound to it and",
    "start": "1650000",
    "end": "1656240"
  },
  {
    "text": "should be the same everywhere but sure there are exceptions",
    "start": "1656240",
    "end": "1663679"
  },
  {
    "text": "but keep on thinking think what you're doing",
    "start": "1663679",
    "end": "1670000"
  },
  {
    "text": "uh because i i once saw a quote from sandy metz uh i saw this quote on someone else's",
    "start": "1670000",
    "end": "1677279"
  },
  {
    "text": "slides i don't know if it was sandy's but uh she uh has a quote duplication is far cheaper",
    "start": "1677279",
    "end": "1684399"
  },
  {
    "text": "than the wrongest abstraction and i was would disagree with this like",
    "start": "1684399",
    "end": "1691600"
  },
  {
    "text": "10 15 years ago but after having seen a lot of abstracts abstracted code and a",
    "start": "1691600",
    "end": "1697919"
  },
  {
    "text": "lot of complexity it brings i think yeah this she could be onto something duplicating the code",
    "start": "1697919",
    "end": "1706159"
  },
  {
    "text": "20 times across 20 services and fixing the same bugs book 20 times often times",
    "start": "1706159",
    "end": "1714720"
  },
  {
    "text": "is cheaper as abstracting it away and adding complexity or newbie packages or",
    "start": "1714720",
    "end": "1720399"
  },
  {
    "text": "whatever so uh something to think about",
    "start": "1720399",
    "end": "1726000"
  },
  {
    "text": "but still think about it don't take my word for it or don't take some some other clean coat guru",
    "start": "1726000",
    "end": "1734080"
  },
  {
    "text": "word for it think about what you're doing that's what we're also being paid for",
    "start": "1734080",
    "end": "1741360"
  },
  {
    "start": "1740000",
    "end": "2005000"
  },
  {
    "text": "next up is loosely coupling also one of those software principles we're fond of but it",
    "start": "1741760",
    "end": "1748480"
  },
  {
    "text": "also applies on your solution design because well software and solutions are pretty",
    "start": "1748480",
    "end": "1756799"
  },
  {
    "text": "pretty much the same just on a different level",
    "start": "1756799",
    "end": "1762080"
  },
  {
    "text": "so how to achieve loosely coupled code",
    "start": "1763520",
    "end": "1767840"
  },
  {
    "text": "in your overall design well messaging services is one way to get this",
    "start": "1768880",
    "end": "1775679"
  },
  {
    "text": "so creating small services and sending messages or events to those messaging services",
    "start": "1775679",
    "end": "1783279"
  },
  {
    "text": "in azure you can use your storage cues search-based queues service topics",
    "start": "1783279",
    "end": "1788480"
  },
  {
    "text": "and event grid topics and you can use all of them you can use one of them you can use two",
    "start": "1788480",
    "end": "1794720"
  },
  {
    "text": "of them whatever you want most of the time i'm using storage cues",
    "start": "1794720",
    "end": "1800080"
  },
  {
    "text": "and event grid topics nowadays even great topics custom topics because event grid is just awesome",
    "start": "1800080",
    "end": "1808320"
  },
  {
    "text": "and it's well in my opinion the best eventing mechanism you can use in azure",
    "start": "1808320",
    "end": "1815679"
  },
  {
    "text": "or at least for for business for business events and storage cues because they're just",
    "start": "1815679",
    "end": "1821440"
  },
  {
    "text": "cheap they cost next about nothing and they work pretty well for sending",
    "start": "1821440",
    "end": "1827840"
  },
  {
    "text": "messages across services if you need some fancier stuff service bus is the way to go",
    "start": "1827840",
    "end": "1836720"
  },
  {
    "text": "at the current project i'm on we're using all of while we're using storage queues search",
    "start": "1836720",
    "end": "1842080"
  },
  {
    "text": "queues and defender topics storage use and vanguard topics well for the reasons i mentioned",
    "start": "1842080",
    "end": "1848000"
  },
  {
    "text": "earlier so it's because because we had to put a message on a queue and it should",
    "start": "1848000",
    "end": "1854960"
  },
  {
    "text": "be visible in 14 days from now you can solve this by storing a record",
    "start": "1854960",
    "end": "1861760"
  },
  {
    "text": "in a database having a timer function and paying the database is there something to process",
    "start": "1861760",
    "end": "1867840"
  },
  {
    "text": "but that's just old school for service-based queues you can say",
    "start": "1867840",
    "end": "1872960"
  },
  {
    "text": "well delayed this message till 14 days from now and it will get picked up for you so you",
    "start": "1872960",
    "end": "1879679"
  },
  {
    "text": "don't have to do anything fancy just have some time out on your message so that's one reason to use search biz it comes with a",
    "start": "1879679",
    "end": "1887360"
  },
  {
    "text": "price point but it's still fairly cheap in my opinion",
    "start": "1887360",
    "end": "1893760"
  },
  {
    "text": "so i'll also mentioned events and messages um",
    "start": "1893760",
    "end": "1899120"
  },
  {
    "text": "service q only allows one consumer topic slow yes yes so a question from william um",
    "start": "1900000",
    "end": "1907279"
  },
  {
    "text": "i'll go back to to this slide uh his question is so skews only allow one",
    "start": "1907279",
    "end": "1912880"
  },
  {
    "text": "consumer topics allow multiple yes that's true for a service queue it's a queue it has",
    "start": "1912880",
    "end": "1919919"
  },
  {
    "text": "one subscriber if you need multiple subscribers for us for a message you can use topics",
    "start": "1919919",
    "end": "1928559"
  },
  {
    "text": "which is something i'd like to see it as a queue with",
    "start": "1928559",
    "end": "1934159"
  },
  {
    "text": "virtual cues so you can create a subscription and subscribe to specific messages",
    "start": "1934159",
    "end": "1941600"
  },
  {
    "text": "and you can have like well a lot a lot of subscriptions",
    "start": "1941600",
    "end": "1948640"
  },
  {
    "text": "2 000 or 20 000 i i don't remember subscriptions per uh per topic so that's",
    "start": "1948640",
    "end": "1954960"
  },
  {
    "text": "quite a lot i saw alders in the session maybe he",
    "start": "1954960",
    "end": "1960880"
  },
  {
    "text": "knows on the top of his head he's if i'm not mistaking he's one of the one of the serious gurus",
    "start": "1960880",
    "end": "1970240"
  },
  {
    "text": "but i already talked about it about events and messages",
    "start": "1971360",
    "end": "1977200"
  },
  {
    "text": "events well they're pretty much well they look the",
    "start": "1977200",
    "end": "1982720"
  },
  {
    "text": "same you can you can use events and put them",
    "start": "1982720",
    "end": "1988799"
  },
  {
    "text": "on cues and message you can send messages to even grid",
    "start": "1988799",
    "end": "1995278"
  },
  {
    "text": "not something i'd advise to do so but i get asked sometimes what's the",
    "start": "1995519",
    "end": "2002399"
  },
  {
    "text": "difference between them well there is some there is quite a big difference",
    "start": "2002399",
    "end": "2007760"
  },
  {
    "start": "2005000",
    "end": "2200000"
  },
  {
    "text": "because they're used for different things uh so what's an event i found a",
    "start": "2007760",
    "end": "2013120"
  },
  {
    "text": "nice definition on the microsoft documentation site an event well it's something",
    "start": "2013120",
    "end": "2019679"
  },
  {
    "text": "some someone some service is sending and it's just sending it out to the world and it has no expectation on",
    "start": "2019679",
    "end": "2027200"
  },
  {
    "text": "what's going to happen with it so if you press a key on your keyboard",
    "start": "2027200",
    "end": "2033200"
  },
  {
    "text": "your keyboard or your your keyboard driver will send me fans to your operating system",
    "start": "2033200",
    "end": "2038399"
  },
  {
    "text": "but it doesn't actually know what will happen well if you have a word open the the",
    "start": "2038399",
    "end": "2045120"
  },
  {
    "text": "letter will uh probably be placed inside your page if you're doing something else the",
    "start": "2045120",
    "end": "2050800"
  },
  {
    "text": "operating system might open the windows explorer or finder",
    "start": "2050800",
    "end": "2056079"
  },
  {
    "text": "but it's an event it's being sent and something will pick it up or not you don't care the publisher doesn't",
    "start": "2056079",
    "end": "2062320"
  },
  {
    "text": "care it's the consumer who cares and a message well a message is",
    "start": "2062320",
    "end": "2069760"
  },
  {
    "text": "fundamentally different when you send a message i'd like to call them commands because",
    "start": "2069760",
    "end": "2077040"
  },
  {
    "text": "i'm using them as commands when i'm sending a command i have an expectation of something is going to",
    "start": "2077040",
    "end": "2083440"
  },
  {
    "text": "happen so when i'm creating a booking i'll send let's say a create booking command and i",
    "start": "2083440",
    "end": "2091520"
  },
  {
    "text": "have the expectation the booking will be created so maybe i'm expecting",
    "start": "2091520",
    "end": "2097118"
  },
  {
    "text": "a booking has been created event or something like this so that's fundamentally different",
    "start": "2097119",
    "end": "2105280"
  },
  {
    "text": "between the two one of the designs i adopt quite often",
    "start": "2105280",
    "end": "2113440"
  },
  {
    "text": "nowadays when i'm doing projects in azure is i have a very thin api layer which does some validation",
    "start": "2113440",
    "end": "2120640"
  },
  {
    "text": "some modeling of data and then sends the command to the storage queue",
    "start": "2120640",
    "end": "2126320"
  },
  {
    "text": "and as a function will pick pick up this command do his magic with it and uh",
    "start": "2126320",
    "end": "2133599"
  },
  {
    "text": "well and be done with it send send defense to uh to send defense",
    "start": "2133599",
    "end": "2140240"
  },
  {
    "text": "and in azure you have this signalr service so whenever a booking is created in this example",
    "start": "2140240",
    "end": "2146960"
  },
  {
    "text": "i'm sending a booking created event fierce signalr to to the customer to the customer",
    "start": "2146960",
    "end": "2153680"
  },
  {
    "text": "website so he or she will get notified your booking has been created",
    "start": "2153680",
    "end": "2159440"
  },
  {
    "text": "yay you'll get to go on vacation",
    "start": "2159440",
    "end": "2163760"
  },
  {
    "text": "but now i'm sending it to to the customer i can also send the same or something a similar",
    "start": "2165280",
    "end": "2171680"
  },
  {
    "text": "event to event grid because other services might also be interested",
    "start": "2171680",
    "end": "2178079"
  },
  {
    "text": "in in this event so that's why i'm sending it over there also same goes for when a booking is",
    "start": "2178079",
    "end": "2184320"
  },
  {
    "text": "updated someone might want to know like a payment payment block most traveling agencies",
    "start": "2184320",
    "end": "2191359"
  },
  {
    "text": "like to get paid also so maybe that one wants to know whenever",
    "start": "2191359",
    "end": "2196720"
  },
  {
    "text": "a booking is being made or updated",
    "start": "2196720",
    "end": "2201838"
  },
  {
    "text": "so what's the content of a message well all of it everything you can think about",
    "start": "2202000",
    "end": "2208800"
  },
  {
    "text": "should go in a message in a command everything which is necessary to complete the action you want to be",
    "start": "2208800",
    "end": "2215200"
  },
  {
    "text": "you want to have completed so in the case of a booking create a booking you want to send",
    "start": "2215200",
    "end": "2221680"
  },
  {
    "text": "all of it all of the information of the customer of the notification of the whatever you",
    "start": "2221680",
    "end": "2227680"
  },
  {
    "text": "want to send it in the command and it can get processed by the function",
    "start": "2227680",
    "end": "2232800"
  },
  {
    "text": "like in the earlier example you know it only has one receiver in case of a queue in a topic it can",
    "start": "2232800",
    "end": "2239359"
  },
  {
    "text": "have multiple receivers of course but",
    "start": "2239359",
    "end": "2244880"
  },
  {
    "text": "you you know because you know where it will uh where it will end up because it lives",
    "start": "2245920",
    "end": "2251359"
  },
  {
    "text": "inside your own domain probably in the same solution of visual studio or whatever",
    "start": "2251359",
    "end": "2257440"
  },
  {
    "text": "id you're using so whenever you change your command your message",
    "start": "2257440",
    "end": "2263440"
  },
  {
    "text": "probably get that squigglies whenever something is not compiling so it's easy to change",
    "start": "2263440",
    "end": "2271839"
  },
  {
    "text": "and because it's easy to change it can be quite well bloated",
    "start": "2273440",
    "end": "2278880"
  },
  {
    "text": "that's quite different from an event because an event can have an infinite amount of receivers",
    "start": "2279920",
    "end": "2287200"
  },
  {
    "text": "you don't know because you don't have any expectation of what happens with an event when i'm",
    "start": "2287200",
    "end": "2293520"
  },
  {
    "text": "sending a booking has been created event to event grid if i'm in the booking context i haven't",
    "start": "2293520",
    "end": "2300640"
  },
  {
    "text": "got a clue who is interested in this event i'm just sending it out to the world and",
    "start": "2300640",
    "end": "2306800"
  },
  {
    "text": "whoever is interested can pick it up which means if i'm changing this event",
    "start": "2306800",
    "end": "2314079"
  },
  {
    "text": "i might mess up other services so you have to be very very careful",
    "start": "2314079",
    "end": "2320640"
  },
  {
    "text": "changing something in it it lives outside your domain so",
    "start": "2320640",
    "end": "2327599"
  },
  {
    "text": "what are good practices i've adopted in the past well couple of years um",
    "start": "2327599",
    "end": "2334240"
  },
  {
    "start": "2328000",
    "end": "2795000"
  },
  {
    "text": "whenever sending an event just send another identifier book booking created id",
    "start": "2334240",
    "end": "2341680"
  },
  {
    "text": "and good that should be enough or booking updated the id",
    "start": "2341680",
    "end": "2349599"
  },
  {
    "text": "why is this a good practice well if your event is self describing the",
    "start": "2349920",
    "end": "2357599"
  },
  {
    "text": "self you are describing your subscribers already know what has happened and if it",
    "start": "2357599",
    "end": "2365040"
  },
  {
    "text": "is interested in in this type of event and does it know what has happened no it",
    "start": "2365040",
    "end": "2370960"
  },
  {
    "text": "doesn't in order to get to know what the late state is of well let's say a booking it has to query",
    "start": "2370960",
    "end": "2378000"
  },
  {
    "text": "the booking service so most of the time you create some api like get booking a booking get",
    "start": "2378000",
    "end": "2386400"
  },
  {
    "text": "and with an identifier and you get the latest state so in this case take for example a",
    "start": "2386400",
    "end": "2392720"
  },
  {
    "text": "payment service makes a get request to the booking and gets",
    "start": "2392720",
    "end": "2397760"
  },
  {
    "text": "well all of the data it needs from from the booking service you can get fancy",
    "start": "2397760",
    "end": "2403920"
  },
  {
    "text": "with this by using graphql for example like we saw in the previous session",
    "start": "2403920",
    "end": "2409760"
  },
  {
    "text": "so only getting the projection you actually want but that's about it and that's the only",
    "start": "2409760",
    "end": "2416400"
  },
  {
    "text": "connection we have so whenever the booking service isn't available well it doesn't matter well it does matter",
    "start": "2416400",
    "end": "2422800"
  },
  {
    "text": "but we still have we still have the latest state in our payment service because we've stored",
    "start": "2422800",
    "end": "2429280"
  },
  {
    "text": "it already the state and we might work with all data but if that's the",
    "start": "2429280",
    "end": "2435920"
  },
  {
    "text": "case we can just retry it retry it retry it",
    "start": "2435920",
    "end": "2441359"
  },
  {
    "text": "that's why it's a good idea to isolate the data you need in your own system so the payment",
    "start": "2442079",
    "end": "2447599"
  },
  {
    "text": "service probably has a copy of the well necessary data in its own repository",
    "start": "2447599",
    "end": "2453520"
  },
  {
    "text": "for a specific booking so in the payment context you probably want to know what",
    "start": "2453520",
    "end": "2459040"
  },
  {
    "text": "the price was of this booking how much has been paid already the",
    "start": "2459040",
    "end": "2464240"
  },
  {
    "text": "identifier obviously and maybe some other data some other practice uh we've we've done",
    "start": "2464240",
    "end": "2471680"
  },
  {
    "text": "in the past is sending the current and the previous state in an event and when doing so the event gets a bit",
    "start": "2471680",
    "end": "2479760"
  },
  {
    "text": "more bloated but also a bit more useful",
    "start": "2479760",
    "end": "2486079"
  },
  {
    "text": "because we also have implemented a payment uh payment context for the traveling agency",
    "start": "2486319",
    "end": "2493680"
  },
  {
    "text": "uh because well they also want to get paid um and when sending an",
    "start": "2493680",
    "end": "2500720"
  },
  {
    "text": "event like payment has been made for booking um",
    "start": "2500720",
    "end": "2507440"
  },
  {
    "text": "we don't actually know what has happened how much has been paid is the payment complete well the payment",
    "start": "2507440",
    "end": "2514240"
  },
  {
    "text": "complete should be a different event but how much has been paid from the thousand euros",
    "start": "2514240",
    "end": "2520319"
  },
  {
    "text": "the customers paid 200 so it still needs to pay 800 euros so that's",
    "start": "2520319",
    "end": "2527920"
  },
  {
    "text": "why we adopted in this case this specific case to send the previous and current state",
    "start": "2527920",
    "end": "2534000"
  },
  {
    "text": "so the previous state was a thousand euros was the outstanding amount",
    "start": "2534000",
    "end": "2539359"
  },
  {
    "text": "the current state is 800 euros just standing out and the customer still has to pay this",
    "start": "2539359",
    "end": "2544880"
  },
  {
    "text": "so we can send a reminder 800 euros still has to be paid",
    "start": "2544880",
    "end": "2550560"
  },
  {
    "text": "useful but think about what you're storing in your event because whenever",
    "start": "2550560",
    "end": "2556640"
  },
  {
    "text": "you change this stop will break and",
    "start": "2556640",
    "end": "2561760"
  },
  {
    "text": "that could be a problem so a practice we adopted for azure and",
    "start": "2561760",
    "end": "2568400"
  },
  {
    "text": "it might be a good idea to do this in our clouds also i'm not sure how those work but you can",
    "start": "2568400",
    "end": "2575760"
  },
  {
    "text": "you can have azure functions subscribe to event grid topics which is awesome they scale",
    "start": "2575760",
    "end": "2582960"
  },
  {
    "text": "insanely both scale insanely the downside is if your function is down",
    "start": "2582960",
    "end": "2590160"
  },
  {
    "text": "for some reason event grid will still try to send it to",
    "start": "2590160",
    "end": "2596079"
  },
  {
    "text": "your function and it has some exponential back-off magnesium back-off mechanism which is cool",
    "start": "2596079",
    "end": "2604000"
  },
  {
    "text": "however when this back off mechanism fails after five times by default if i'm",
    "start": "2604000",
    "end": "2610480"
  },
  {
    "text": "not mistaken it will throw the messages in some dead letter",
    "start": "2610480",
    "end": "2615920"
  },
  {
    "text": "location if you configure this because it's off by default or at least",
    "start": "2615920",
    "end": "2622480"
  },
  {
    "text": "you have to add some json in your home template to do so",
    "start": "2622480",
    "end": "2628640"
  },
  {
    "text": "and this is fine it's just hard to get those if or at least i find",
    "start": "2628720",
    "end": "2635359"
  },
  {
    "text": "it hard to get those events from the that location back to your function",
    "start": "2635359",
    "end": "2640640"
  },
  {
    "text": "to resend them as you might say so what we did is place a storage queue",
    "start": "2640640",
    "end": "2648000"
  },
  {
    "text": "in between because storage cues are always up because it's on storage and if storage goes down all",
    "start": "2648000",
    "end": "2655520"
  },
  {
    "text": "of azure goes down because everything needs storage so it's a pretty safe bet to say storage",
    "start": "2655520",
    "end": "2661280"
  },
  {
    "text": "skus are always on unlike your azure function which could be down for",
    "start": "2661280",
    "end": "2667119"
  },
  {
    "text": "a number of reasons and event grid is most of the time also",
    "start": "2667119",
    "end": "2672800"
  },
  {
    "text": "always up so these two are pretty safe bets so what we're doing now is sending all events which are well",
    "start": "2672800",
    "end": "2680720"
  },
  {
    "text": "which we're subscribed to sending them to a queue and picking them up it doesn't matter",
    "start": "2680720",
    "end": "2686800"
  },
  {
    "text": "much for for the scaling and for the for the extra hop",
    "start": "2686800",
    "end": "2692800"
  },
  {
    "text": "sure there's an extra hop so it will take a bit more time but it's not noticeable it's a beggar",
    "start": "2692800",
    "end": "2698720"
  },
  {
    "text": "background process anyway so that's a good practice we adopted and i'm adopting everywhere almost",
    "start": "2698720",
    "end": "2705280"
  },
  {
    "text": "everywhere now just for the stability and well from a functional perspective you don't",
    "start": "2705280",
    "end": "2713359"
  },
  {
    "text": "you don't see you don't notice it anything anyway",
    "start": "2713359",
    "end": "2719520"
  },
  {
    "text": "would you recommend the outbox pattern for extra safety in case of yes in case",
    "start": "2719520",
    "end": "2724880"
  },
  {
    "text": "of something goes down yes yes the outbox pattern is definitely something you should be adopting when when doing",
    "start": "2724880",
    "end": "2731680"
  },
  {
    "text": "so we have major problems at one of the",
    "start": "2731680",
    "end": "2736880"
  },
  {
    "text": "projects uh i'm at now because we're sending an email to a customer and we have to",
    "start": "2736880",
    "end": "2743760"
  },
  {
    "text": "add the state to the data to some other service an email as we said so we're working at",
    "start": "2743760",
    "end": "2750640"
  },
  {
    "text": "a very very distributed monolith solution right now and when when you're in such",
    "start": "2750640",
    "end": "2758720"
  },
  {
    "text": "pain you really need the outbox pattern the outbox pattern is",
    "start": "2758720",
    "end": "2764800"
  },
  {
    "text": "you're holding the state of an action if it in in some kind repository and holding a",
    "start": "2766560",
    "end": "2772400"
  },
  {
    "text": "state if it has been processed or not and if not you will just retry",
    "start": "2772400",
    "end": "2777599"
  },
  {
    "text": "a specific action until it the complete transaction has been completed that's in",
    "start": "2777599",
    "end": "2784160"
  },
  {
    "text": "a nutshell i'm sure wikipedia has a better definition of it but yes use it if you're in a",
    "start": "2784160",
    "end": "2791920"
  },
  {
    "text": "distributed monolith or or maybe even an event-driven distributed monolith",
    "start": "2791920",
    "end": "2799040"
  },
  {
    "start": "2795000",
    "end": "2955000"
  },
  {
    "text": "because that's what happens when you add events to a distributed monolith",
    "start": "2799040",
    "end": "2805599"
  },
  {
    "text": "you have an event-driven disputed monolith and there's nothing worse compared to that",
    "start": "2805599",
    "end": "2812800"
  },
  {
    "text": "to my knowledge if you know something which is worse please let me know in chat because i i want to read more about it",
    "start": "2812800",
    "end": "2821520"
  },
  {
    "text": "but let me start with the first first bullet point bloat defense lots of data like i",
    "start": "2821520",
    "end": "2828079"
  },
  {
    "text": "mentioned you have a ripple effect when you add lots of data in your events you're a major pain not not now not a",
    "start": "2828079",
    "end": "2835680"
  },
  {
    "text": "week from now but two months from now you're a major pain because then your product owner or",
    "start": "2835680",
    "end": "2841119"
  },
  {
    "text": "your business has decided we need additional fields and old fields can be removed",
    "start": "2841119",
    "end": "2846880"
  },
  {
    "text": "dependencies between systems now like i mentioned uh with my example uh of the outbox pattern",
    "start": "2846880",
    "end": "2854000"
  },
  {
    "text": "we need to send an email and some other service needs to store state an email has been sent and",
    "start": "2854000",
    "end": "2860000"
  },
  {
    "text": "we need to query well this this other service the email has been sent",
    "start": "2860000",
    "end": "2865840"
  },
  {
    "text": "[Music] and if one of them fails or at least if the second fails we'll send another",
    "start": "2865840",
    "end": "2871680"
  },
  {
    "text": "email so we have dependencies between systems and an inconsistent state so",
    "start": "2871680",
    "end": "2878800"
  },
  {
    "text": "well customers will get emails twice three times four times the number of",
    "start": "2878800",
    "end": "2884319"
  },
  {
    "text": "times it's being re-tried luckily we're not in production yet",
    "start": "2884319",
    "end": "2890240"
  },
  {
    "text": "and there's on top of our task board there's a job adding the outbox pattern for this",
    "start": "2890240",
    "end": "2897599"
  },
  {
    "text": "in order to solve it for now because our design is just wrong so like i mentioned the event-driven",
    "start": "2897599",
    "end": "2905359"
  },
  {
    "text": "disputed moment is a major pain because in the distributed monolith you can most of the time follow the path",
    "start": "2905359",
    "end": "2911440"
  },
  {
    "text": "how a command how a message is flowing through your system when you add defense in the mix you",
    "start": "2911440",
    "end": "2917200"
  },
  {
    "text": "can't stuff just happens magically events are being sent down to event grid",
    "start": "2917200",
    "end": "2923920"
  },
  {
    "text": "or whatever eventing mechanism you have commands are being sent all over the place and",
    "start": "2923920",
    "end": "2929760"
  },
  {
    "text": "if you don't have some kind of correlation identifier in your messages it's impossible to",
    "start": "2929760",
    "end": "2937599"
  },
  {
    "text": "tell how and why something has happened and you always figure this out during a",
    "start": "2937599",
    "end": "2942960"
  },
  {
    "text": "production incident so keep away from",
    "start": "2942960",
    "end": "2948000"
  },
  {
    "text": "such such designs but when you do design this stuff",
    "start": "2948000",
    "end": "2953599"
  },
  {
    "text": "properly you have this next principle the the open close principle",
    "start": "2953599",
    "end": "2958720"
  },
  {
    "start": "2955000",
    "end": "3251000"
  },
  {
    "text": "and this also goes for your solution design because in the blog booking",
    "start": "2958720",
    "end": "2965440"
  },
  {
    "text": "only the booking block the booking domain is responsible for the bookings the state of the bookings",
    "start": "2965440",
    "end": "2972160"
  },
  {
    "text": "no other service can modify the state the data of this booking",
    "start": "2972160",
    "end": "2978319"
  },
  {
    "text": "so it's closed for modifications data same goes for payments no one can modify the payment",
    "start": "2978319",
    "end": "2984000"
  },
  {
    "text": "information aside from the payment payment domain it is open for extension",
    "start": "2984000",
    "end": "2991359"
  },
  {
    "text": "if i decide i want to add well let's what do we have more in",
    "start": "2991359",
    "end": "2998160"
  },
  {
    "text": "traveling agency i don't have an example now but by listening to the events which are being sent",
    "start": "2998160",
    "end": "3004160"
  },
  {
    "text": "i can extend the functionality of my ecosystem of my solution because events are being sent or key",
    "start": "3004160",
    "end": "3011839"
  },
  {
    "text": "domain events which which need to be shared so i can",
    "start": "3011839",
    "end": "3016880"
  },
  {
    "text": "add new functionality on top of the rest i can even remove services",
    "start": "3016880",
    "end": "3022480"
  },
  {
    "text": "and spin up new services doing well new doing the same thing but version two",
    "start": "3022480",
    "end": "3030079"
  },
  {
    "text": "so adding new versions side by side that's that's very very",
    "start": "3030079",
    "end": "3037359"
  },
  {
    "text": "powerful extending stuff like this but how to get there i have to hurry a bit uh i'm almost done anyway",
    "start": "3037359",
    "end": "3045440"
  },
  {
    "text": "how to get there well um baby steps baby steps you won't get there in the",
    "start": "3045440",
    "end": "3052480"
  },
  {
    "text": "next months i i read a post of kent beck just this",
    "start": "3052480",
    "end": "3058800"
  },
  {
    "text": "week and he posted something similar and i'm paraphrasing over here",
    "start": "3058800",
    "end": "3064720"
  },
  {
    "text": "he wrote something like it probably took you ages or years and years and years of",
    "start": "3064720",
    "end": "3071839"
  },
  {
    "text": "development to get to this ugly monolith solution you have now don't expect",
    "start": "3071839",
    "end": "3079839"
  },
  {
    "text": "you will have a very nice and shiny microservices solution a month from now",
    "start": "3079839",
    "end": "3085359"
  },
  {
    "text": "it will probably take the same amount of time so how to get there well",
    "start": "3085359",
    "end": "3093359"
  },
  {
    "text": "it will take a lot of time and it's the devops cycle you need to plan code build deploy etc",
    "start": "3093599",
    "end": "3100960"
  },
  {
    "text": "and reflect on yourself and improve in baby steps boy scouting the the",
    "start": "3100960",
    "end": "3107520"
  },
  {
    "text": "tightly coupled dependencies between your functional domains",
    "start": "3107520",
    "end": "3112720"
  },
  {
    "text": "and when you think well i can extract this piece of code this piece of",
    "start": "3112720",
    "end": "3117839"
  },
  {
    "text": "functionality from my service try it try to decouple it try to put it",
    "start": "3117839",
    "end": "3124960"
  },
  {
    "text": "in some other module maybe a service if you're feeling really lucky and run",
    "start": "3124960",
    "end": "3132240"
  },
  {
    "text": "this side by side so toggle it via feature toggle perhaps so",
    "start": "3132240",
    "end": "3137520"
  },
  {
    "text": "the old show the old path and and the new loosely coupled path and random try to",
    "start": "3137520",
    "end": "3144559"
  },
  {
    "text": "run them side by side or toggle them and well do this it really",
    "start": "3144559",
    "end": "3149760"
  },
  {
    "text": "look and maybe in about two three four years you'll have a",
    "start": "3149760",
    "end": "3156240"
  },
  {
    "text": "nice lucy coupled design and maybe maybe you can just stay",
    "start": "3156240",
    "end": "3162880"
  },
  {
    "text": "with your monolith solution with a nice modular design [Music]",
    "start": "3162880",
    "end": "3169040"
  },
  {
    "text": "and if you need to you can just extract modules and put them inside a microservice if you actually need",
    "start": "3169040",
    "end": "3177920"
  },
  {
    "text": "to have need to implement this but it will take a lot of time it's a lot of work but",
    "start": "3177920",
    "end": "3184800"
  },
  {
    "text": "someone has to do this and well who better to do this as",
    "start": "3184800",
    "end": "3190000"
  },
  {
    "text": "us because i guess we all like to do this i like to refactor the stuff make",
    "start": "3190000",
    "end": "3196160"
  },
  {
    "text": "the code better it's something i like doing anyway especially in cloud requirements like",
    "start": "3196160",
    "end": "3202400"
  },
  {
    "text": "azure because there's always some new fancy solution you can use to make",
    "start": "3202400",
    "end": "3207680"
  },
  {
    "text": "this easier for you for your development team but it takes a lot of time and you have",
    "start": "3207680",
    "end": "3213760"
  },
  {
    "text": "to be up for it so that's that's it for now for me",
    "start": "3213760",
    "end": "3219520"
  },
  {
    "text": "um yeah no questions yet so uh i have a couple of",
    "start": "3219520",
    "end": "3226559"
  },
  {
    "text": "minutes left if i'm not mistaken so if you have any questions now in the chat it's okay you can also",
    "start": "3226559",
    "end": "3232880"
  },
  {
    "text": "ask them in the room one of slack or feel free to reach out to me later on",
    "start": "3232880",
    "end": "3251280"
  },
  {
    "text": "you",
    "start": "3251280",
    "end": "3253359"
  }
]