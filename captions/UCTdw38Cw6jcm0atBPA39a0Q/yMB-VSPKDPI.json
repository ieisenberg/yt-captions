[
  {
    "start": "0",
    "end": "97000"
  },
  {
    "text": "good morning my name is Barry d'harans I am the security PM for all of dark net",
    "start": "6330",
    "end": "12580"
  },
  {
    "text": "and you get various other things that I just can't get rid of even though I would dearly love to today we're gonna",
    "start": "12580",
    "end": "20140"
  },
  {
    "text": "talk about security and asp.net core 2.1 we're gonna cover some things that we're in too because some of you might not",
    "start": "20140",
    "end": "25869"
  },
  {
    "text": "know it and I'm not going to make the assumption that everyone is already migrated to core although obviously you",
    "start": "25869",
    "end": "33070"
  },
  {
    "text": "should be so my job title in the Microsoft global address list is dotnet",
    "start": "33070",
    "end": "39880"
  },
  {
    "text": "security curmudgeon because I am grumpy and horrible and chain smoke and swear",
    "start": "39880",
    "end": "46300"
  },
  {
    "text": "at people as my colleagues in the front row can attest to I generally get to",
    "start": "46300",
    "end": "52360"
  },
  {
    "text": "annoy everybody about coding securely I tell them what to do and then cry when David Fowler doesn't do it and then I",
    "start": "52360",
    "end": "60730"
  },
  {
    "text": "have to cope and clean up Fowler's mess when things go horribly wrong if you want to follow me on Twitter or tag me",
    "start": "60730",
    "end": "65979"
  },
  {
    "text": "on Twitter I am a blow dart it is not a particularly work focused account it has lots of swear words and lots of pictures",
    "start": "65979",
    "end": "72490"
  },
  {
    "text": "of my dog so I'm gonna go through a bunch of things I can go through hosting",
    "start": "72490",
    "end": "79030"
  },
  {
    "text": "authentication authorization little bits of identity with a preview of what we're",
    "start": "79030",
    "end": "84670"
  },
  {
    "text": "planning to do in 2.2 well a little bit after 2.2 but we're gonna start off with",
    "start": "84670",
    "end": "91720"
  },
  {
    "text": "this thing that makes me worry the most which is hosting and hosting means",
    "start": "91720",
    "end": "97360"
  },
  {
    "start": "97000",
    "end": "97000"
  },
  {
    "text": "Castrol kestrel is the asp.net core web",
    "start": "97360",
    "end": "103150"
  },
  {
    "text": "server it has scared me for the last three years that we decided we would",
    "start": "103150",
    "end": "108850"
  },
  {
    "text": "like to write our own web server again and abandon iis which of course is not",
    "start": "108850",
    "end": "115930"
  },
  {
    "text": "cross-platform so I can see the business reasons we're doing it but writing a web server from scratch is a security",
    "start": "115930",
    "end": "121119"
  },
  {
    "text": "nightmare we've had it tested by a bunch of external security firms you always go wait you've just written a web server",
    "start": "121119",
    "end": "127060"
  },
  {
    "text": "and you want us to bash on it and they get really big grins and get very very excited so what we have done into one is",
    "start": "127060",
    "end": "136090"
  },
  {
    "text": "we have turned on HTTPS by default it is everywhere now and all our templates you",
    "start": "136090",
    "end": "141580"
  },
  {
    "text": "will have HTTPS we have a tool that will generate a developer cert for you and",
    "start": "141580",
    "end": "147430"
  },
  {
    "text": "Trust it on Windows if your own Linux trusting it is your own problem because",
    "start": "147430",
    "end": "152530"
  },
  {
    "text": "Linux doesn't really have a security story which is a whole other presentation but its own by default you",
    "start": "152530",
    "end": "161709"
  },
  {
    "text": "can take a box that says don't use HTTPS if you do this you are a horrible person",
    "start": "161709",
    "end": "170190"
  },
  {
    "text": "HTTP is everywhere now Chrome gets really upset if your website is not on HTTPS edge will probably follow about",
    "start": "170190",
    "end": "176980"
  },
  {
    "text": "two years behind because that's what edge does so that's why we what that's",
    "start": "176980",
    "end": "182739"
  },
  {
    "text": "why it's there you are testing in sort of the same environment that you'll be running in production keep HTTPS on and",
    "start": "182739",
    "end": "190750"
  },
  {
    "text": "we really think casual HTTP can be config so you can have different",
    "start": "190750",
    "end": "195970"
  },
  {
    "text": "certificates based on your environment it can be selected automatically based",
    "start": "195970",
    "end": "201190"
  },
  {
    "text": "on subject name and expiry date that means it will rotate and we have support for sni so SN is when you have multiple",
    "start": "201190",
    "end": "210269"
  },
  {
    "text": "HTTP web servers listening on the same ip address and so the initial connection",
    "start": "210269",
    "end": "217480"
  },
  {
    "text": "comes in and cache all will get it and you can look at where it's going to go via the host header and send the right",
    "start": "217480",
    "end": "223510"
  },
  {
    "text": "HTTPS certificate back and like I say we have a tool because generating",
    "start": "223510",
    "end": "228670"
  },
  {
    "text": "self-signed cert on Windows is a pain in the ass even in PowerShell so we decided to make it a little bit easier for you",
    "start": "228670",
    "end": "234609"
  },
  {
    "text": "so dotnet dev certs is the tool because everything is a dotnet global tool these days and it'll",
    "start": "234609",
    "end": "241180"
  },
  {
    "text": "create it will delete all one's it will push through the trust on Windows so",
    "start": "241180",
    "end": "248530"
  },
  {
    "start": "247000",
    "end": "247000"
  },
  {
    "text": "certificate config works a little bit like this you can tell it where to get it from which on Windows is the Windows",
    "start": "248530",
    "end": "255250"
  },
  {
    "text": "Store on Linux it's a random file sitting on your filesystem unprotected because Linux has no security story and",
    "start": "255250",
    "end": "263729"
  },
  {
    "text": "if you have it in config we will wire it up even if you don't have it in config",
    "start": "263729",
    "end": "269500"
  },
  {
    "text": "we will look for ones based on local so the config only really comes into",
    "start": "269500",
    "end": "275290"
  },
  {
    "text": "play when you're moving towards your production environment like I say we have sni so that's a nice a little bit",
    "start": "275290",
    "end": "282790"
  },
  {
    "start": "278000",
    "end": "278000"
  },
  {
    "text": "complicated here we have certificate selection we are going to listen import",
    "start": "282790",
    "end": "287970"
  },
  {
    "text": "5005 and we have a bunch of listen options so we load all our certs up and",
    "start": "287970",
    "end": "293830"
  },
  {
    "text": "then in the HTTP options we set a server certificate selector and it will get the",
    "start": "293830",
    "end": "300400"
  },
  {
    "text": "name of the certificate that it's going to look for which is the domain name and you can do a selection based upon it and",
    "start": "300400",
    "end": "306729"
  },
  {
    "text": "return the right sir or return the default and then get loads of browser errors web servers needs tuning",
    "start": "306729",
    "end": "317220"
  },
  {
    "start": "312000",
    "end": "312000"
  },
  {
    "text": "everything nice tuning is has tuning engine access tuning Apache has tuning",
    "start": "317220",
    "end": "322810"
  },
  {
    "text": "and kestrel is no exception there are rather a lot of tuning options",
    "start": "322810",
    "end": "329280"
  },
  {
    "text": "we've tried to make these things safe by default depending on your environment",
    "start": "329280",
    "end": "335470"
  },
  {
    "text": "you may need to adjust things keep a lifetime rights for example we've",
    "start": "335470",
    "end": "340780"
  },
  {
    "text": "selected four reasonably fast internet but because you're in Australia that",
    "start": "340780",
    "end": "345910"
  },
  {
    "text": "does not exist here you may need to increase time i'ts for people who are in",
    "start": "345910",
    "end": "351310"
  },
  {
    "text": "Tasmania for example there are lots of reasons to ban people from Tasmania but",
    "start": "351310",
    "end": "357729"
  },
  {
    "text": "again that's a another another talk more sensibly you know if you are sending",
    "start": "357729",
    "end": "364060"
  },
  {
    "text": "things to Africa where people are on really old cellular connections you will",
    "start": "364060",
    "end": "371050"
  },
  {
    "text": "need to adjust your timeouts but by default we've chosen things that are",
    "start": "371050",
    "end": "376080"
  },
  {
    "text": "reasonably appropriate for normal non Australian connections they probably",
    "start": "376080",
    "end": "381940"
  },
  {
    "text": "work with Australian connections too I shouldn't pick on Australian internet too much but I've had to suffer with it",
    "start": "381940",
    "end": "388930"
  },
  {
    "text": "since Sunday because we've put HTTPS on",
    "start": "388930",
    "end": "394660"
  },
  {
    "text": "by default we also have a bunch of options we will add HTTP redirection so",
    "start": "394660",
    "end": "400479"
  },
  {
    "text": "if you hit the HTTP site it will redirect you up HTTP and you can configure that as you",
    "start": "400479",
    "end": "408250"
  },
  {
    "text": "can see by saying services options some people like to think that they just want",
    "start": "408250",
    "end": "413320"
  },
  {
    "text": "to redirect up to HTTPS for a login page and then redirect down again that's a horrible idea and we don't support it so",
    "start": "413320",
    "end": "419290"
  },
  {
    "text": "don't do it and then we have h sts this",
    "start": "419290",
    "end": "425350"
  },
  {
    "start": "422000",
    "end": "422000"
  },
  {
    "text": "slide came I have a really long conversation on Twitter with a bunch of people who work on Chrome HSTs is a flag",
    "start": "425350",
    "end": "434590"
  },
  {
    "text": "that when you hit a site over SSL for the first time you can send this header",
    "start": "434590",
    "end": "441850"
  },
  {
    "text": "it will say never ever load this site again over HTTP even if the customer",
    "start": "441850",
    "end": "448000"
  },
  {
    "text": "types in HTTP in the URL location and it's great except for when it's not HH",
    "start": "448000",
    "end": "455650"
  },
  {
    "text": "SDS is dangerous because it persists once you've sent that header you send it",
    "start": "455650",
    "end": "460780"
  },
  {
    "text": "with at I might value and which eventually clears out of the browser after that time is expired but trying to",
    "start": "460780",
    "end": "467590"
  },
  {
    "text": "clear it beforehand is really really hard I have HSTs turned on on my website",
    "start": "467590",
    "end": "472930"
  },
  {
    "text": "because I trusted a sure to renew my SSL certificate last year that failed I no",
    "start": "472930",
    "end": "480820"
  },
  {
    "text": "longer had an SSL certificate it did not rotate it ended up expired and HSTs pin",
    "start": "480820",
    "end": "487660"
  },
  {
    "text": "sites will not load if there are problems with the certificate thank you",
    "start": "487660",
    "end": "492940"
  },
  {
    "text": "Azure someone got a really rude email the next morning so HSTs is great and",
    "start": "492940",
    "end": "499420"
  },
  {
    "text": "you should enable it but you only enable it once you've trusted all your certificate",
    "start": "499420",
    "end": "504790"
  },
  {
    "text": "infrastructure here are all the problems that you have did you really want to",
    "start": "504790",
    "end": "510130"
  },
  {
    "text": "cover all your subdomains did you forget a test site that's running off your production demand don't do that get",
    "start": "510130",
    "end": "516700"
  },
  {
    "text": "another get another demand for all your test sites how fast can you roll your certificate if the certificate has been",
    "start": "516700",
    "end": "522969"
  },
  {
    "text": "accidentally revoked how fast can you get a new one do your certificates actually Auto renew does it work thanks",
    "start": "522969",
    "end": "529540"
  },
  {
    "text": "ah sure what happens if the CA has been pulled out of Chrome's trust as has happened with a bunch of CAS recently",
    "start": "529540",
    "end": "535950"
  },
  {
    "text": "that funnily enough pal are still using I think in a month if paypal does not rotate their certs",
    "start": "535950",
    "end": "542530"
  },
  {
    "text": "Chrome will no longer trust it what happens you got a bad revoke how fast can you move from one CA to another are",
    "start": "542530",
    "end": "548440"
  },
  {
    "text": "you monitoring your certificate status do you send something to your site every five minutes that will send an HTTP",
    "start": "548440",
    "end": "555310"
  },
  {
    "text": "request look at the certificate make sure it's still valid and alert you if it's not these are the things you need",
    "start": "555310",
    "end": "561970"
  },
  {
    "text": "to take into account when you're going to use HSTs so when you run out into production start with a really sure",
    "start": "561970",
    "end": "569320"
  },
  {
    "text": "expiration start with five minutes and once you've got five minutes and that's",
    "start": "569320",
    "end": "575650"
  },
  {
    "text": "been running for a week to two weeks okay you think you're good increase it to an hour and then a couple",
    "start": "575650",
    "end": "582220"
  },
  {
    "text": "of months later and crease it to a week and eventually ramp it up to where you are at I my HSTs flag is going to be for",
    "start": "582220",
    "end": "590050"
  },
  {
    "text": "a year and once you've had it working for six months then you can consider pre loading it pre loading is where HSTs",
    "start": "590050",
    "end": "597940"
  },
  {
    "text": "status are baked into browser builds so our request doesn't even need to be sent",
    "start": "597940",
    "end": "603480"
  },
  {
    "text": "chrome will know that your site is in the HSTs list and it will just send everything over HTTP and as does it as",
    "start": "603480",
    "end": "612220"
  },
  {
    "text": "well so an asp.net core we defaults to 30 days for your HSTs expiration and",
    "start": "612220",
    "end": "620530"
  },
  {
    "text": "it's kind of a bad compromise between the five minutes that's recommended by a",
    "start": "620530",
    "end": "625690"
  },
  {
    "text": "chrome and edge for pre loading and the year that everyone expects you to end up",
    "start": "625690",
    "end": "631150"
  },
  {
    "text": "in so use it but remember it is a commitment that nothing will ever go",
    "start": "631150",
    "end": "637390"
  },
  {
    "text": "wrong with your cert infrastructure you may get called at midnight when your",
    "start": "637390",
    "end": "642550"
  },
  {
    "text": "cert expires and as your forgot to roll it so we added here using AB dot use",
    "start": "642550",
    "end": "649360"
  },
  {
    "text": "HSTs and then we set a bunch of options preload is where you can say that your",
    "start": "649360",
    "end": "655930"
  },
  {
    "text": "sites in the preload list includes sub demands max age and we exclude hosts and a bunch of other stuff it's STS will not",
    "start": "655930",
    "end": "662680"
  },
  {
    "text": "work on localhost we hard-coded that because it's so hard to clear HSTs",
    "start": "662680",
    "end": "669040"
  },
  {
    "text": "status in your browsers that if we put it on low host and then you decided to spin up",
    "start": "669040",
    "end": "675110"
  },
  {
    "text": "another test website and not didn't have HTTPS because you hit puppies and kittens the browser would still try and",
    "start": "675110",
    "end": "682850"
  },
  {
    "text": "load over HSTs so localhost is excluded",
    "start": "682850",
    "end": "688460"
  },
  {
    "text": "from all of this so if you start trying to trace things and fiddler and wonder why you are not getting an HSTs editor",
    "start": "688460",
    "end": "693800"
  },
  {
    "text": "on your dev site running on localhost this is why we are protecting you from yourself so kestrel what when we had",
    "start": "693800",
    "end": "705020"
  },
  {
    "text": "initially launched it in version 1 we said please run up behind a proxy run it",
    "start": "705020",
    "end": "710089"
  },
  {
    "text": "behind I asked to run it behind nginx and everyone went no we want the speed",
    "start": "710089",
    "end": "715700"
  },
  {
    "text": "and I'm like but it's a new web server from version 2 of dotnet core onwards we",
    "start": "715700",
    "end": "721580"
  },
  {
    "text": "will support you exposing kestrel directly to the Internet but I will underscore again that this is new web",
    "start": "721580",
    "end": "728240"
  },
  {
    "text": "server code we believe it's secure we've had a couple of we've had a couple of",
    "start": "728240",
    "end": "735529"
  },
  {
    "text": "interesting bugs over the last few months and we've pushed our kestrel updates there was one last month so if",
    "start": "735529",
    "end": "741080"
  },
  {
    "text": "you are going to expose kestrel directly you need to pay very close attention to the github announcements repo for",
    "start": "741080",
    "end": "747680"
  },
  {
    "text": "asp.net on Patch Tuesday because we don't push darknet core patches over Windows Update because that wouldn't",
    "start": "747680",
    "end": "754490"
  },
  {
    "text": "work on Linux and we made a promise that we would never patch underneath you because sometimes patches break people",
    "start": "754490",
    "end": "760070"
  },
  {
    "text": "so you all need to be subscribed to the announcements repo on github for asp.net",
    "start": "760070",
    "end": "765890"
  },
  {
    "text": "and for dotnet if you're gonna expose Castrol directly to the Internet because you will need to patch in a timely",
    "start": "765890",
    "end": "773060"
  },
  {
    "text": "manner so we've got hosting by the way and then we have authentication knowing",
    "start": "773060",
    "end": "779959"
  },
  {
    "start": "779000",
    "end": "779000"
  },
  {
    "text": "who you are in our templates we have support for no authentication we have",
    "start": "779959",
    "end": "785209"
  },
  {
    "text": "supports for individual user accounts which is asp.net identity plus a bunch of other stuff we have work in school",
    "start": "785209",
    "end": "791480"
  },
  {
    "text": "accounts so that's a sure ad and we have windows authentication that only runs on Windows we have had a bunch of requests",
    "start": "791480",
    "end": "800060"
  },
  {
    "text": "from people saying we would like integrated in Windows authentication in our Linux containers",
    "start": "800060",
    "end": "806209"
  },
  {
    "text": "that has made me cry so much that I'm actually now thinking about it because when those authentication underneath the",
    "start": "806209",
    "end": "812569"
  },
  {
    "text": "hood is in fact Kerberos authentication and I believe we can support it on Linux if you want to take a dependency on",
    "start": "812569",
    "end": "818720"
  },
  {
    "text": "samba which is an interesting idea from a security perspective but we are starting to look at that now so if you",
    "start": "818720",
    "end": "825769"
  },
  {
    "text": "are running in an ad environment and you are running in Linux containers because you don't want to pay all your windows",
    "start": "825769",
    "end": "831199"
  },
  {
    "text": "licensing fees and you still want that smooth login of no one ever having to type anything in we might get there",
    "start": "831199",
    "end": "838399"
  },
  {
    "text": "it'll be 3.0 or 3.1 and we have social authentication built in so we have",
    "start": "838399",
    "end": "843889"
  },
  {
    "text": "Facebook Twitter Google Microsoft account and ooofff and there is a ton of",
    "start": "843889",
    "end": "849309"
  },
  {
    "text": "social identification services that are",
    "start": "849309",
    "end": "854869"
  },
  {
    "text": "in that github repo in the asp.net contrib repo there are some really weird ones of of social networks I've never",
    "start": "854869",
    "end": "861920"
  },
  {
    "text": "heard before but pretty much everything is going to be in there that you will ever need so individual user accounts",
    "start": "861920",
    "end": "870050"
  },
  {
    "start": "868000",
    "end": "868000"
  },
  {
    "text": "like I say we have a local database so you are committing to having a database",
    "start": "870050",
    "end": "875179"
  },
  {
    "text": "somewhere that will never ever leaked to the internet because bad evil hackers",
    "start": "875179",
    "end": "880249"
  },
  {
    "text": "got at it you may wish to accept that risk you may not if you don't want to",
    "start": "880249",
    "end": "886279"
  },
  {
    "text": "accept that risk there is as your b2c some people like it some people don't then there are other things you can have",
    "start": "886279",
    "end": "892399"
  },
  {
    "text": "like identity server which still requires a database on the back end you",
    "start": "892399",
    "end": "899329"
  },
  {
    "text": "have a sauce and an open eye deck and and if you are stuck in government how many people here are working in",
    "start": "899329",
    "end": "904999"
  },
  {
    "text": "government that would like to admit it mmm for those people stuck in government",
    "start": "904999",
    "end": "912139"
  },
  {
    "text": "we have support for WS fed finally that came I just after 2.0 so you can stick",
    "start": "912139",
    "end": "919549"
  },
  {
    "text": "with those really really old but actually really secure authentication",
    "start": "919549",
    "end": "924889"
  },
  {
    "text": "providers that government demands because they haven't moved on since the 1990s the template off we will have our",
    "start": "924889",
    "end": "934249"
  },
  {
    "start": "932000",
    "end": "932000"
  },
  {
    "text": "local debt database you can configure your EF models for accounts and groups and everything else we",
    "start": "934249",
    "end": "939800"
  },
  {
    "text": "quite opinionated about it we don't allow you to change our password saving algorithms because we don't trust you to",
    "start": "939800",
    "end": "946250"
  },
  {
    "text": "make the right decisions I'm sorry but that's true so we have a bunch of",
    "start": "946250",
    "end": "952480"
  },
  {
    "text": "reasonable compromises between speed of hashing and security and we review those",
    "start": "952480",
    "end": "959060"
  },
  {
    "text": "with every minor release and we can tweak them somewhat and move things on for work and school accounts we have",
    "start": "959060",
    "end": "966079"
  },
  {
    "text": "asked your Active Directory and that's using OID see underneath look this slide",
    "start": "966079",
    "end": "971089"
  },
  {
    "text": "is now I have debt because it says no WS fed support so we support ad FS as well",
    "start": "971089",
    "end": "976160"
  },
  {
    "text": "so if you're working in an old networking environment where you haven't",
    "start": "976160",
    "end": "981649"
  },
  {
    "text": "moved to Azure ad and you still want to do federated login with your Active",
    "start": "981649",
    "end": "987230"
  },
  {
    "text": "Directory you can use WS fed or you can use ad FS with oh I DC and then like I",
    "start": "987230",
    "end": "993290"
  },
  {
    "text": "say windows authentication which needs iis you can't expose Castrol directly for windows off you're gonna have to",
    "start": "993290",
    "end": "1001029"
  },
  {
    "text": "join your service to the demand which is an interesting idea from a security point of view and there is no impersonation it used to be that when",
    "start": "1001029",
    "end": "1008740"
  },
  {
    "text": "people used integrated off to iis then IAS would run a process as that person we don't do that because we think it's a",
    "start": "1008740",
    "end": "1015130"
  },
  {
    "text": "terrible idea you then have to specifically choose when you want to impersonate which usually is when you want to talk to a",
    "start": "1015130",
    "end": "1021070"
  },
  {
    "text": "database and then it will automatically Emperor unimpressive it once it's done",
    "start": "1021070",
    "end": "1028350"
  },
  {
    "start": "1028000",
    "end": "1028000"
  },
  {
    "text": "so for those of you that haven't moved to core and have are still stuck on the",
    "start": "1028350",
    "end": "1036130"
  },
  {
    "text": "classic asp.net framework there are a",
    "start": "1036130",
    "end": "1041438"
  },
  {
    "text": "few changes everything now is a claims principle we have multiple pieces of",
    "start": "1041439",
    "end": "1047949"
  },
  {
    "text": "identification well it's not middleware anymore but it's close enough you can",
    "start": "1047949",
    "end": "1053620"
  },
  {
    "text": "have multiple ways to authenticate within the same app so you could have Facebook and Twitter and Google and",
    "start": "1053620",
    "end": "1058950"
  },
  {
    "text": "local databases and WS fair and oh I D see all at once you can cherry-pick",
    "start": "1058950",
    "end": "1067360"
  },
  {
    "text": "which one to use depending on where you want to go and you can run one automatically at a time",
    "start": "1067360",
    "end": "1073600"
  },
  {
    "text": "if you have multiple ones you have to choose which one is your man one which is generally cookie and then you can",
    "start": "1073600",
    "end": "1079179"
  },
  {
    "text": "pick and choose what gets triggered when you go to certain endpoints or by calling sign in in your code and we have",
    "start": "1079179",
    "end": "1086470"
  },
  {
    "text": "cookie authentication which is the backbone of everything that's generally how your identity is going to be",
    "start": "1086470",
    "end": "1093100"
  },
  {
    "text": "persisted through the browser in a nice encrypted in sign cookie and it finally understands the difference between",
    "start": "1093100",
    "end": "1098169"
  },
  {
    "text": "authenticated and forbidden which for the longest time it did not so everybody got the same login prompt no matter what",
    "start": "1098169",
    "end": "1104380"
  },
  {
    "text": "they tried to do so in core 2 we changed",
    "start": "1104380",
    "end": "1110440"
  },
  {
    "start": "1107000",
    "end": "1107000"
  },
  {
    "text": "it so authentication is now a single service it's not exactly middleware anymore like I said it's services within",
    "start": "1110440",
    "end": "1116770"
  },
  {
    "text": "the service and we have this this whole thing between active and passive that",
    "start": "1116770",
    "end": "1122830"
  },
  {
    "text": "was a real mess in 1.0 and we fixed it in 2.0 so this is this whole I want to",
    "start": "1122830",
    "end": "1128559"
  },
  {
    "text": "choose my default Authenticator and everything else is optional it was",
    "start": "1128559",
    "end": "1134799"
  },
  {
    "text": "really easy to mess that up in one you were only ever supposed to mark one",
    "start": "1134799",
    "end": "1140309"
  },
  {
    "text": "piece of authentication middleware as active and the rest would be passive and",
    "start": "1140309",
    "end": "1146470"
  },
  {
    "text": "then you do your picking and choosing but there was no enforcement of that so you ended up if you had more than one",
    "start": "1146470",
    "end": "1152500"
  },
  {
    "text": "piece of active middleware and what we euphemistically called an unsupported state which is a nice say not nice way",
    "start": "1152500",
    "end": "1158679"
  },
  {
    "text": "of saying we don't know what the hell's going to happen now so we have enforced that now if you are migrating from one",
    "start": "1158679",
    "end": "1165400"
  },
  {
    "text": "to two these are the changes that you will need to make it used to be a dot",
    "start": "1165400",
    "end": "1171370"
  },
  {
    "text": "use and then the middleware and now we have services don't add and then in",
    "start": "1171370",
    "end": "1178059"
  },
  {
    "text": "configure we have user authentication and here is how we set our defaults so",
    "start": "1178059",
    "end": "1184059"
  },
  {
    "text": "if you are supporting for example social off we have default challenge scheme default",
    "start": "1184059",
    "end": "1190000"
  },
  {
    "text": "sign-in scheme and default authentication now this is worth explaining so if I do a social login say",
    "start": "1190000",
    "end": "1198070"
  },
  {
    "text": "I go to Facebook and I come back and I get an identity from Facebook I need to",
    "start": "1198070",
    "end": "1203200"
  },
  {
    "text": "save it somewhere so every single request doesn't go through this first call because that would be irritating as",
    "start": "1203200",
    "end": "1209049"
  },
  {
    "text": "hell so when I say that generally a default that you want for everything is cookie that's what we end up doing you",
    "start": "1209049",
    "end": "1216220"
  },
  {
    "text": "do your Facebook often and we write it to a cookie that is dropped on the machine so in the v2 section down here",
    "start": "1216220",
    "end": "1222789"
  },
  {
    "text": "what we have is we have our default sign-in scheme which is cookie we have",
    "start": "1222789",
    "end": "1227980"
  },
  {
    "text": "our default authenticate scheme which is cookie on our challenge scheme which is off to OID CR off to Facebook so",
    "start": "1227980",
    "end": "1236019"
  },
  {
    "text": "challenge happens when someone tries to access a protected resource and they are",
    "start": "1236019",
    "end": "1241539"
  },
  {
    "text": "not logged in so when you hit something that has the authentic it attribute on",
    "start": "1241539",
    "end": "1247899"
  },
  {
    "text": "it we will go off to Facebook but sign in and sign in and authenticate our cookies",
    "start": "1247899",
    "end": "1253750"
  },
  {
    "text": "because that helps us rehydrate from the cookie on every single request we don't",
    "start": "1253750",
    "end": "1259840"
  },
  {
    "text": "want those to be Facebook or OID C because that won't work because every single request you would get both start",
    "start": "1259840",
    "end": "1265029"
  },
  {
    "text": "and come back in again and it would be horrible does that make sense okay and",
    "start": "1265029",
    "end": "1273870"
  },
  {
    "text": "then if you are migrating from 1 to 2 you're really behind the times you",
    "start": "1273870",
    "end": "1278919"
  },
  {
    "text": "should have done that last year we've changed how things work so instead of everything being in HP net core HTTP",
    "start": "1278919",
    "end": "1286240"
  },
  {
    "text": "authentication we've done just moved it up to authentication and you use contacts that authenticates challenge",
    "start": "1286240",
    "end": "1292659"
  },
  {
    "text": "and sign in to trigger all these things if you forget to make it you get a weird-ass error or you get warning",
    "start": "1292659",
    "end": "1298690"
  },
  {
    "text": "saying you're using deprecated code and if you want to do everything yourself if",
    "start": "1298690",
    "end": "1304659"
  },
  {
    "start": "1302000",
    "end": "1302000"
  },
  {
    "text": "you hit the templates that we give you for asp.net identity and that's fine I honestly don't care I would like to",
    "start": "1304659",
    "end": "1312340"
  },
  {
    "text": "know why you hit them but you know that's what get help issues before you can do everything yourself you can use",
    "start": "1312340",
    "end": "1317950"
  },
  {
    "text": "our cookie middleware or our cookie services and get the security that we",
    "start": "1317950",
    "end": "1323769"
  },
  {
    "text": "built into those with your own identity so you can go off and use the database of your own and then instead of having",
    "start": "1323769",
    "end": "1329769"
  },
  {
    "text": "to figure out how you want to secure it encrypt cookies to save that identity",
    "start": "1329769",
    "end": "1335470"
  },
  {
    "text": "through requests use our stuff it is properly documented we properly",
    "start": "1335470",
    "end": "1340630"
  },
  {
    "text": "comenta this in one point home we've kept the documentation up-to-date unlike previous versions of the framework where",
    "start": "1340630",
    "end": "1345940"
  },
  {
    "text": "there was no documentation for this whatsoever so the cookie stuff will encrypt ensign cookies it uses data",
    "start": "1345940",
    "end": "1352960"
  },
  {
    "text": "protection so you can synchronize your keys across multiple instances of your website and you don't have to worry",
    "start": "1352960",
    "end": "1360010"
  },
  {
    "text": "about this so here's how we can configure it we just add cookie",
    "start": "1360010",
    "end": "1366520"
  },
  {
    "start": "1362000",
    "end": "1362000"
  },
  {
    "text": "authentication with a cookie scheme name and a scheme name is just basically a key in a dictionary and then you call",
    "start": "1366520",
    "end": "1372280"
  },
  {
    "text": "sign in with a cookie scheme name and the user principle that you want to persist and you call sign I with a",
    "start": "1372280",
    "end": "1379750"
  },
  {
    "text": "cookie scheme name and everything else is taken care of for you with each request we will look for the cookie and",
    "start": "1379750",
    "end": "1385660"
  },
  {
    "text": "if it is there we will rehydrate the identity for you and shove it on the user property for the request for the",
    "start": "1385660",
    "end": "1391990"
  },
  {
    "text": "page for the controller for the action it will be there for you and you don't",
    "start": "1391990",
    "end": "1397480"
  },
  {
    "text": "have to worry about it you can write your own authentication handlers I've got a couple of sample ones I've got one",
    "start": "1397480",
    "end": "1405370"
  },
  {
    "text": "for certificate authentication I've got one for basic authentication which no one should ever use in production but",
    "start": "1405370",
    "end": "1411070"
  },
  {
    "text": "people were bugging me so I wrote it which would show you how to write your",
    "start": "1411070",
    "end": "1416380"
  },
  {
    "text": "own authentication handlers it's rare that you'll need to do this if you do need to do it I'd love to know what",
    "start": "1416380",
    "end": "1422650"
  },
  {
    "text": "you're trying to do please drop me an email so once you drop a cookie it is",
    "start": "1422650",
    "end": "1429040"
  },
  {
    "text": "the sole source of truth because the services will kick in and rehydrate",
    "start": "1429040",
    "end": "1435490"
  },
  {
    "text": "every single time we are not going back to a database every single time because that would be horrible in terms of",
    "start": "1435490",
    "end": "1441580"
  },
  {
    "text": "scalability but the cookie service has the concept of a validator and in the",
    "start": "1441580",
    "end": "1449290"
  },
  {
    "text": "validator you can go back to a back-end database yourself so say for example you",
    "start": "1449290",
    "end": "1454960"
  },
  {
    "text": "have an HR system you may well want to go back to a database and check that the",
    "start": "1454960",
    "end": "1460570"
  },
  {
    "text": "user has not been fired in the last five minutes you probably don't want to do this in every single request because",
    "start": "1460570",
    "end": "1466690"
  },
  {
    "text": "like I say it's gonna kill scalability but we have validators that can reject the principle that has been rehydrate",
    "start": "1466690",
    "end": "1474370"
  },
  {
    "text": "from the cookie or it can even replace them so someone gets promoted you could change their job title on the website so",
    "start": "1474370",
    "end": "1481330"
  },
  {
    "text": "you wire this up in the options on the cookie middleware we do this for you in asp.net identity we refresh every 30",
    "start": "1481330",
    "end": "1488320"
  },
  {
    "text": "minutes and you can actually look at how identity does it to figure I if that's going to work for you here's how we",
    "start": "1488320",
    "end": "1495910"
  },
  {
    "start": "1495000",
    "end": "1495000"
  },
  {
    "text": "implement a validator it's not very exciting replace means I don't want to",
    "start": "1495910",
    "end": "1502750"
  },
  {
    "text": "throw the user ID I'm just going to say that they have new roles or they have new properties reject that's what you",
    "start": "1502750",
    "end": "1509500"
  },
  {
    "text": "think it's going to do and then here's how you wire up in the cookie authentication events and we have",
    "start": "1509500",
    "end": "1517600"
  },
  {
    "start": "1516000",
    "end": "1516000"
  },
  {
    "text": "authentication forwarding which is new into one so we finally got something",
    "start": "1517600",
    "end": "1523120"
  },
  {
    "text": "that's new into one so like I said we",
    "start": "1523120",
    "end": "1529210"
  },
  {
    "text": "could we have ways of wiring up multiple authentication services so we have let's",
    "start": "1529210",
    "end": "1534490"
  },
  {
    "text": "say cookie authentication and then I have a bunch of api's and hopefully we're all aware because Troy has told us",
    "start": "1534490",
    "end": "1541000"
  },
  {
    "text": "that authenticate against api's with the cookie is just really weird and you may not have cookies if you were calling",
    "start": "1541000",
    "end": "1546970"
  },
  {
    "text": "them from phone apps or something else and you want to use JA tokens because JA tokens are the new hotness and no one",
    "start": "1546970",
    "end": "1553300"
  },
  {
    "text": "loves XML anymore and no one wants to do WS star identity come to my public alpha",
    "start": "1553300",
    "end": "1558850"
  },
  {
    "text": "talk and I will tell you how wrong you are and we supported this in version 1",
    "start": "1558850",
    "end": "1566170"
  },
  {
    "text": "and in version 2 you could choose the scheme that you wanted to use during authentication by putting it on a",
    "start": "1566170",
    "end": "1573429"
  },
  {
    "text": "property on the Authenticator attribute or putting it in an authorization policy",
    "start": "1573429",
    "end": "1578860"
  },
  {
    "text": "which I'll come on to in a bit and that was in my mind the right way to do it",
    "start": "1578860",
    "end": "1584650"
  },
  {
    "text": "you would apply it to a controller because as you're well aware there are multiple ways to route to a controller",
    "start": "1584650",
    "end": "1591040"
  },
  {
    "text": "and nobody should be doing anything based on request path but because my",
    "start": "1591040",
    "end": "1596620"
  },
  {
    "text": "customers are horrible people all of you want to do it based on request path so",
    "start": "1596620",
    "end": "1603010"
  },
  {
    "text": "now you can do it based on request path if you want to make me sad",
    "start": "1603010",
    "end": "1608409"
  },
  {
    "text": "we have authentication forwarding so each piece of each cookie or sorry each",
    "start": "1608409",
    "end": "1614850"
  },
  {
    "text": "authentication service has a forward default selector option and in the",
    "start": "1614850",
    "end": "1621220"
  },
  {
    "text": "forward default selector option you can write your own code so here we have I've",
    "start": "1621220",
    "end": "1626770"
  },
  {
    "text": "got cookie authentication setup and then you can see that if my path starts with",
    "start": "1626770",
    "end": "1632650"
  },
  {
    "text": "slash API I'm gonna forward it to the API authentication this is a scheme name",
    "start": "1632650",
    "end": "1639880"
  },
  {
    "text": "here so like I said we have scheme names you can see up top I'm adding two I'm adding like a scheme a fake API scheme",
    "start": "1639880",
    "end": "1648779"
  },
  {
    "text": "handler but then when a request comes in the default will be cookie and then cookie will go where this goes to slash",
    "start": "1648779",
    "end": "1655570"
  },
  {
    "text": "API so I'm gonna hand it off to the API authentication handler so now you can",
    "start": "1655570",
    "end": "1662380"
  },
  {
    "text": "put this all in one place as opposed to putting it in policies or in attributes within your code and you can do things",
    "start": "1662380",
    "end": "1668830"
  },
  {
    "text": "based on path which may eventually help if you want to do multi-tenancy does",
    "start": "1668830",
    "end": "1675039"
  },
  {
    "text": "that make sense have people been wanting this no one's gonna admit it because I'm",
    "start": "1675039",
    "end": "1681760"
  },
  {
    "text": "gonna tell you you're horrible okay but we also have virtual schemes",
    "start": "1681760",
    "end": "1688090"
  },
  {
    "start": "1686000",
    "end": "1686000"
  },
  {
    "text": "which is a different way of doing exactly the same thing because we never like to give you one way to do things",
    "start": "1688090",
    "end": "1693880"
  },
  {
    "text": "we'd like to complicate things you can set up a virtual scheme which is an authentication scheme which has no",
    "start": "1693880",
    "end": "1700960"
  },
  {
    "text": "authentication in it it is just the forwarding insight here so you would add",
    "start": "1700960",
    "end": "1706289"
  },
  {
    "text": "authentication and say I'm gonna use my virtual scheme as my default and then we add a policy scheme we have our virtual",
    "start": "1706289",
    "end": "1714159"
  },
  {
    "text": "scheme scheme name we have a display name which you don't particularly need to worry about and in our options we can",
    "start": "1714159",
    "end": "1719470"
  },
  {
    "text": "put a forward default selector in there and choose which one we want to end up",
    "start": "1719470",
    "end": "1724779"
  },
  {
    "text": "with two ways of doing exactly the same thing I like this way because then it's",
    "start": "1724779",
    "end": "1731140"
  },
  {
    "text": "not on individual options inside handlers",
    "start": "1731140",
    "end": "1736740"
  },
  {
    "start": "1736000",
    "end": "1736000"
  },
  {
    "text": "and then there's API us so when we were",
    "start": "1737380",
    "end": "1743600"
  },
  {
    "text": "back in classic asp.net you could create an API API project and say I want to add",
    "start": "1743600",
    "end": "1748910"
  },
  {
    "text": "individual authentication and we had an",
    "start": "1748910",
    "end": "1754180"
  },
  {
    "text": "authentication server built into previous versions of asp.net and when we",
    "start": "1754180",
    "end": "1760670"
  },
  {
    "text": "moved to core I didn't want to bother with writing and authentication server",
    "start": "1760670",
    "end": "1766820"
  },
  {
    "text": "anymore there are an awful lot of authentication servers out there that",
    "start": "1766820",
    "end": "1772160"
  },
  {
    "text": "are much better than anything we could produce identity server being the one",
    "start": "1772160",
    "end": "1777590"
  },
  {
    "text": "that springs to mind mainly because I have their sticker on my laptop and so",
    "start": "1777590",
    "end": "1784520"
  },
  {
    "text": "that option went away and everybody said I have an API and I want to add a",
    "start": "1784520",
    "end": "1791030"
  },
  {
    "text": "syndication to it what do I do and I'm like you job bearer and the answer was okay how do I get a job bearer token I'm",
    "start": "1791030",
    "end": "1798020"
  },
  {
    "text": "like ah you're on your own with that one which is not a good story according to",
    "start": "1798020",
    "end": "1804470"
  },
  {
    "text": "management they would like us to you know not tell customers they're on their",
    "start": "1804470",
    "end": "1809570"
  },
  {
    "text": "own so we've been kind of mulling over what we wanted to do and adding identity",
    "start": "1809570",
    "end": "1819320"
  },
  {
    "text": "server or a sauce or open edict has been historically complicated these things",
    "start": "1819320",
    "end": "1827690"
  },
  {
    "text": "generally tend to require you to know more about oh i DC than you ever wanted",
    "start": "1827690",
    "end": "1834740"
  },
  {
    "text": "to know so we decided four to one and all honestly this will probably come a",
    "start": "1834740",
    "end": "1841520"
  },
  {
    "text": "couple of months after t1 it will ship out a band and then it will be properly integrated in three we decided we wanted",
    "start": "1841520",
    "end": "1847580"
  },
  {
    "text": "to fill that gap and so we're like okay we're going to add authentication for",
    "start": "1847580",
    "end": "1853820"
  },
  {
    "text": "API projects and here we have a sneak",
    "start": "1853820",
    "end": "1860150"
  },
  {
    "text": "peek of what we're going to do and when we suggested we were going to do this",
    "start": "1860150",
    "end": "1866800"
  },
  {
    "text": "the community was somewhat vocal I think is the polite way to put",
    "start": "1866800",
    "end": "1875620"
  },
  {
    "text": "it you see we thought we would just we could write a simple one that would do a",
    "start": "1875620",
    "end": "1881620"
  },
  {
    "text": "lot of the work for us and it was very simple to configure and it was very limited in what it would do just for API",
    "start": "1881620",
    "end": "1888880"
  },
  {
    "text": "first party API scenarios and a community basically said wait you're",
    "start": "1888880",
    "end": "1896800"
  },
  {
    "text": "killing all these third party authentication services you should use those and we're like okay but you keep",
    "start": "1896800",
    "end": "1905740"
  },
  {
    "text": "telling us they're really really complicated to set up and configuring like nah we don't care use those stop",
    "start": "1905740",
    "end": "1911800"
  },
  {
    "text": "killing off other open source projects which was never the idea in the first place we were gonna give you a nice migration path so we went and pull the",
    "start": "1911800",
    "end": "1922720"
  },
  {
    "text": "code that we'd written / happy ere all his code got thrown away and it's like",
    "start": "1922720",
    "end": "1927790"
  },
  {
    "text": "okay make integration happen so we had to pick who to integrate with and",
    "start": "1927790",
    "end": "1934110"
  },
  {
    "text": "because I already have their sticker we chose identity server that is not the",
    "start": "1934110",
    "end": "1939400"
  },
  {
    "text": "reason we chose identity server please don't quote me on that so here we have a",
    "start": "1939400",
    "end": "1947860"
  },
  {
    "text": "sneak peak of a work in progress the names for some of these functions will",
    "start": "1947860",
    "end": "1954490"
  },
  {
    "text": "change because as sure as you're well aware we suck at naming things so here",
    "start": "1954490",
    "end": "1961600"
  },
  {
    "text": "we have an API project and here we have we're just gonna like use sequel server we're gonna add asp.net identity to be",
    "start": "1961600",
    "end": "1969370"
  },
  {
    "text": "our backing database for this and we're gonna add entity framework and then what",
    "start": "1969370",
    "end": "1976540"
  },
  {
    "text": "we'll make a bunch of you happy is we add identity server and then below that",
    "start": "1976540",
    "end": "1983260"
  },
  {
    "text": "we're going to go add asp.net core conventions that will change because it sucks this is function name and we will",
    "start": "1983260",
    "end": "1990670"
  },
  {
    "text": "wire everything up for you and we get really opinionated about this you don't need to worry about generating your keys",
    "start": "1990670",
    "end": "1997390"
  },
  {
    "text": "anymore you don't need to worry about scopes you don't want you to worry about naming because we are going to have a simple convention",
    "start": "1997390",
    "end": "2004970"
  },
  {
    "text": "best way of registering your applications in identity server for you",
    "start": "2004970",
    "end": "2010539"
  },
  {
    "text": "at runtime so you don't have to worry about any of the admittedly very",
    "start": "2010539",
    "end": "2017030"
  },
  {
    "text": "flexible configuration for identity server but also the quite overwhelming configuration for identity server and",
    "start": "2017030",
    "end": "2023510"
  },
  {
    "text": "then we're going to call services to out of indication like we always do and then we're gonna say hey look I've got a",
    "start": "2023510",
    "end": "2028580"
  },
  {
    "text": "local API in this project so I'm gonna call add local API so here we have an",
    "start": "2028580",
    "end": "2035929"
  },
  {
    "text": "API controller ooh it's the stunningly excited values controller and of course they aren't",
    "start": "2035929",
    "end": "2043400"
  },
  {
    "text": "here we also have use identity server so if I run this it worked last night I may",
    "start": "2043400",
    "end": "2050419"
  },
  {
    "text": "have pulled dot in the repo again this morning so we'll see how this goes like",
    "start": "2050419",
    "end": "2059450"
  },
  {
    "text": "I say it's a work in progress you are the first people to know that this is",
    "start": "2059450",
    "end": "2065000"
  },
  {
    "text": "going to be using identity server so if you're going to tweet anything that's the thing to tweet it will probably be",
    "start": "2065000",
    "end": "2073099"
  },
  {
    "text": "delayed by a couple months after two one as we try and get different scenarios working I want to get to the point where",
    "start": "2073099",
    "end": "2078530"
  },
  {
    "text": "you do new web API project and you choose individual off with identity",
    "start": "2078530",
    "end": "2083868"
  },
  {
    "text": "server and then when you add a new API project to your solution that will also",
    "start": "2083869",
    "end": "2089419"
  },
  {
    "text": "get wired up and I also want to get to the point where API projects can authenticate themselves to other API",
    "start": "2089419",
    "end": "2096200"
  },
  {
    "text": "projects as one project to another and once we've got that and I'm happy that's",
    "start": "2096200",
    "end": "2102740"
  },
  {
    "text": "when we'll release and also it has to be simple because I care about the experience I don't want people to have",
    "start": "2102740",
    "end": "2109369"
  },
  {
    "text": "to write configuration for themselves now when you sort of like move outside",
    "start": "2109369",
    "end": "2114520"
  },
  {
    "text": "our scenarios then you just you know you drop back to using an identity server",
    "start": "2114520",
    "end": "2119810"
  },
  {
    "text": "with our helper classes and we will give you a bunch of migration documents that tell you these are the conventions that",
    "start": "2119810",
    "end": "2125869"
  },
  {
    "text": "we did here's how you do the manually an identity server now you're adding more stuff here's how you switch to going",
    "start": "2125869",
    "end": "2132800"
  },
  {
    "text": "from identity server with training wheels to identity server with its big",
    "start": "2132800",
    "end": "2138230"
  },
  {
    "text": "turbo so here we have a template prototype spa client this will not be in the final",
    "start": "2138230",
    "end": "2144740"
  },
  {
    "text": "template this is just to prove that everything works when the final templates come around it will probably",
    "start": "2144740",
    "end": "2150740"
  },
  {
    "text": "just be a raffle so you can type code kind of need to figure out how I can do Oh IDC within a raffle but we'll solve",
    "start": "2150740",
    "end": "2157100"
  },
  {
    "text": "we'll think about that when it comes to it so if I click login",
    "start": "2157100",
    "end": "2161200"
  },
  {
    "text": "this is identity server its identity server embedded in your project there's",
    "start": "2164440",
    "end": "2171800"
  },
  {
    "text": "there's no identity server controllers or anything whole UI is embedded just like we have done with asp.net identity",
    "start": "2171800",
    "end": "2178010"
  },
  {
    "text": "so if I log in here",
    "start": "2178010",
    "end": "2180910"
  },
  {
    "text": "and I remember my password and it hasn't",
    "start": "2191220",
    "end": "2200760"
  },
  {
    "text": "broken",
    "start": "2200760",
    "end": "2203119"
  },
  {
    "text": "oh dear what chance your have to go there we go no your Logan there we go so I am logged in now I have gotten the job",
    "start": "2207420",
    "end": "2214349"
  },
  {
    "text": "token back it's not cookies anymore and because I have a job token and it's saved in the browser as a job token",
    "start": "2214349",
    "end": "2221069"
  },
  {
    "text": "using brought local storage I can call an API using the same methods that I",
    "start": "2221069",
    "end": "2227280"
  },
  {
    "text": "would use to call it from a mobile app so we have the same authentication mechanisms between our web app and our",
    "start": "2227280",
    "end": "2235049"
  },
  {
    "text": "mobile app and I lo longer have to support two different types of authentication so I can call the API and it's good old values controller and",
    "start": "2235049",
    "end": "2242240"
  },
  {
    "text": "that's not sending a cookie anymore it is sending a job token using identity",
    "start": "2242240",
    "end": "2248369"
  },
  {
    "text": "servers client for these things their JavaScript client for doing requests so",
    "start": "2248369",
    "end": "2255809"
  },
  {
    "text": "we have integration with the communities probably most popular authenticate third",
    "start": "2255809",
    "end": "2262440"
  },
  {
    "text": "party authentication service and you can still keep everything local I mean you could obviously do this with off the",
    "start": "2262440",
    "end": "2267780"
  },
  {
    "text": "zero as well if you want to like have all their stuff stored in the cloud but I'd any server seems to be where it's at",
    "start": "2267780",
    "end": "2273210"
  },
  {
    "text": "and it is incredibly flexible and can do all sorts of wonderful magical things so",
    "start": "2273210",
    "end": "2278970"
  },
  {
    "text": "that will come maybe a couple of months after 2.1 and there will be templates and there will be magic and it will all",
    "start": "2278970",
    "end": "2285809"
  },
  {
    "text": "be gloriously documented and you won't have to worry about configuration because we will know there is an API project and an identity server and we",
    "start": "2285809",
    "end": "2293369"
  },
  {
    "text": "will just wire it all up by magic do we like this yeah is this what you wanted",
    "start": "2293369",
    "end": "2301339"
  },
  {
    "text": "yes okay so thank you for saying that because this has been like a year of",
    "start": "2301339",
    "end": "2306510"
  },
  {
    "text": "work and if it's like no I don't want that I'm just gonna go home and cry so",
    "start": "2306510",
    "end": "2312319"
  },
  {
    "text": "identity server is what we chose you get your integration and if you're gonna",
    "start": "2312319",
    "end": "2318569"
  },
  {
    "text": "tweet anything that's the thing I would love you to tweet because it will make dominic and Brock very happy and instead",
    "start": "2318569",
    "end": "2324510"
  },
  {
    "text": "of me buying them dinner it might be the other way around for a change",
    "start": "2324510",
    "end": "2330260"
  },
  {
    "text": "so well that's glorious data protection so",
    "start": "2330380",
    "end": "2343340"
  },
  {
    "start": "2341000",
    "end": "2341000"
  },
  {
    "text": "I said that we we encrypt and we sign things in authentication cookies and",
    "start": "2343340",
    "end": "2348500"
  },
  {
    "text": "this is how we do it this is pretty much the same as last year nothing has particularly changed so if you sat in",
    "start": "2348500",
    "end": "2354980"
  },
  {
    "text": "this last year I'm sorry this is pretty much the same you've got your exciting stuff with identity server I feel happy",
    "start": "2354980",
    "end": "2361490"
  },
  {
    "text": "about that but we need somewhere to store our encryption and signing keys and it used",
    "start": "2361490",
    "end": "2367040"
  },
  {
    "text": "to be in web config we had the concepts of machine key which was a hard-coded",
    "start": "2367040",
    "end": "2373760"
  },
  {
    "text": "signing key in a config file how many of you have ever had to change your machine",
    "start": "2373760",
    "end": "2380420"
  },
  {
    "text": "key okay if those people have had to change it how many of you were in web",
    "start": "2380420",
    "end": "2385790"
  },
  {
    "text": "form scenarios where you had to change it on every single machine at once it",
    "start": "2385790",
    "end": "2391550"
  },
  {
    "text": "sucked this was not my idea web config was long before I joined okay so you can't blame",
    "start": "2391550",
    "end": "2399650"
  },
  {
    "text": "me for that I know who you can blame if you give me cash I might give you their email address so we got rid of web",
    "start": "2399650",
    "end": "2406910"
  },
  {
    "text": "config as you're well aware because you know nobody likes XML anymore and no everything suggests but we we got rid of",
    "start": "2406910",
    "end": "2413360"
  },
  {
    "text": "machine key I'm replaced it with a data protection layer and so what we have now",
    "start": "2413360",
    "end": "2422690"
  },
  {
    "text": "is automatic key generation automatic key rotation we choose algorithms for",
    "start": "2422690",
    "end": "2427910"
  },
  {
    "text": "you we isolate applications automatically we isolate based on purpose we figure out where the key",
    "start": "2427910",
    "end": "2433250"
  },
  {
    "text": "should be stored best on app platform which mostly works until you publish to Azure and once you use slot storage and",
    "start": "2433250",
    "end": "2439700"
  },
  {
    "text": "slot swapping in which case it breaks horribly because you're still haven't given me that function after three years",
    "start": "2439700",
    "end": "2444950"
  },
  {
    "text": "of asking you can easily write new key stores so you can match things to your customers environments if they're not in",
    "start": "2444950",
    "end": "2451040"
  },
  {
    "text": "Azure and they have a sequel to invest and they want to store all their encryption keys in sequel you can write your own and we can support custom",
    "start": "2451040",
    "end": "2457070"
  },
  {
    "text": "algorithms which is not for you it is for Russia because Russia doesn't allow you to use American encryption",
    "start": "2457070",
    "end": "2462920"
  },
  {
    "text": "algorithms anymore because they all have flags and they wear their flags so Russian encryption algorithm which is ghost you",
    "start": "2462920",
    "end": "2469570"
  },
  {
    "text": "can write your own encryption algorithm and plug it in we do not provide a gust",
    "start": "2469570",
    "end": "2475330"
  },
  {
    "text": "implementation for you because trying to write one of those outside Russia is interesting and the Russian government",
    "start": "2475330",
    "end": "2482200"
  },
  {
    "text": "can get quite upset but the custom algorithms are there it's the same with China China now wants",
    "start": "2482200",
    "end": "2487660"
  },
  {
    "text": "people to use their own encryption algorithms as well so if you are trying to sell a service to China you may well",
    "start": "2487660",
    "end": "2494530"
  },
  {
    "text": "need to wire up the Chinese algorithms and there are new get packages for ghost ghost and the Chinese one whose name I",
    "start": "2494530",
    "end": "2501160"
  },
  {
    "text": "can never remember and then you can just wrap these things around but they are not provided by Microsoft so here is",
    "start": "2501160",
    "end": "2509050"
  },
  {
    "text": "what we can fake how we can figure things which is what your security people want to know we do not hide this",
    "start": "2509050",
    "end": "2514210"
  },
  {
    "text": "away it is in the source code and that if they go around and say well what's the encryption and signing on this you",
    "start": "2514210",
    "end": "2519490"
  },
  {
    "text": "point them to this slide and that's what we choose so it split up into two two",
    "start": "2519490",
    "end": "2524530"
  },
  {
    "text": "concepts we have a key store where we store your keys and then we have protection for that store so by default",
    "start": "2524530",
    "end": "2531340"
  },
  {
    "text": "you write your keys to a store they're not protected they're in plain text you have to layer on protection on top of it",
    "start": "2531340",
    "end": "2537340"
  },
  {
    "text": "so you want the two of these things together and so we have key stores as your web apps it's in a special synced",
    "start": "2537340",
    "end": "2542410"
  },
  {
    "text": "folder and by default that's our unencrypted with iis with no user proof profile well it sits in the registry and",
    "start": "2542410",
    "end": "2549640"
  },
  {
    "text": "now we actually use some windows capabilities to protect it and i guess with a user profile again we store it in",
    "start": "2549640",
    "end": "2556120"
  },
  {
    "text": "your app data folder and we use Windows capabilities to protect it and we also have an in-memory one which is where we",
    "start": "2556120",
    "end": "2561550"
  },
  {
    "text": "used to default to so we am data protection and ephemeral data data that",
    "start": "2561550",
    "end": "2568390"
  },
  {
    "text": "you don't care about losing so how many in memory is just fine until you had you",
    "start": "2568390",
    "end": "2574360"
  },
  {
    "text": "know like try and scale out and then you're like it was in memory what do I do and you have to switch to various key stores and then we have protection",
    "start": "2574360",
    "end": "2581020"
  },
  {
    "text": "mechanisms so we have a couple windows specific ones DP API and DP API ng then we have good old x.509 certificate we",
    "start": "2581020",
    "end": "2587980"
  },
  {
    "text": "have a jerky vault support and then we have plan text if you really don't care then don't protect it",
    "start": "2587980",
    "end": "2596100"
  },
  {
    "start": "2596000",
    "end": "2596000"
  },
  {
    "text": "but if you persist if you persist your keyring properly if you stick it in a",
    "start": "2596390",
    "end": "2601560"
  },
  {
    "text": "sequel database if you still get an azure blob stories if you stick it in a persistent Redis provider you can use",
    "start": "2601560",
    "end": "2608070"
  },
  {
    "text": "this for known ephemeral data but you're on your own we've tried to make it as foolproof as possible because we realize people would",
    "start": "2608070",
    "end": "2614280"
  },
  {
    "text": "use machine key protection on their own data and then complain to us when they updated their machine key and web config",
    "start": "2614280",
    "end": "2621690"
  },
  {
    "text": "that their data didn't decrypt anymore and we're like yeah because you change the key did you keep a copy of the old",
    "start": "2621690",
    "end": "2627450"
  },
  {
    "text": "one no okay so we don't ever delete keys",
    "start": "2627450",
    "end": "2632880"
  },
  {
    "text": "anymore the keyring just grows bigger and bigger and bigger but it's it's tiny anyway I'm still getting blob storage",
    "start": "2632880",
    "end": "2638550"
  },
  {
    "text": "you're good it'll cost you like maybe once two cents every month you can use it manually like I say you just create",
    "start": "2638550",
    "end": "2644280"
  },
  {
    "text": "and data protector from it with a purpose and you just call protect and um protect and it will use the key rings so",
    "start": "2644280",
    "end": "2650670"
  },
  {
    "text": "here's how to do it like in memory the ephemeral data protection brighter is RM every one which we use in tests you read",
    "start": "2650670",
    "end": "2659700"
  },
  {
    "text": "things you call protect and then you call unprotect and lo and behold we're done purpose strings are interesting",
    "start": "2659700",
    "end": "2666210"
  },
  {
    "start": "2664000",
    "end": "2664000"
  },
  {
    "text": "they provide isolation so you really don't want to use the same key for",
    "start": "2666210",
    "end": "2671480"
  },
  {
    "text": "different types of data so say I am encrypting your credit card numbers",
    "start": "2671480",
    "end": "2678270"
  },
  {
    "text": "about example because you should never be saving credit card numbers but will will go with it anyway I want to encrypt",
    "start": "2678270",
    "end": "2683310"
  },
  {
    "text": "your credit card number and I want to encrypt your email you should be using different keys for each one so purpose",
    "start": "2683310",
    "end": "2689310"
  },
  {
    "text": "would allow you to say this is going to be an encryption for credit cards with a purpose of credit cards and this is going to be an encryption for email",
    "start": "2689310",
    "end": "2696000"
  },
  {
    "text": "addresses with a purpose of email and they have separate keys that are all generated through all sorts of weird key",
    "start": "2696000",
    "end": "2702360"
  },
  {
    "text": "derivation stuff and they can't unprotect each other there are a couple of caveats here don't use user input as",
    "start": "2702360",
    "end": "2709290"
  },
  {
    "text": "the sole source of a purpose because then a hacker can like say okay well I'm gonna actually try and create a credit",
    "start": "2709290",
    "end": "2716460"
  },
  {
    "text": "card decryptor when you really wanted an email one and that's not a good idea and you'd probably want to like try and",
    "start": "2716460",
    "end": "2721590"
  },
  {
    "text": "version your purposes so as you change things or as you change formats you can",
    "start": "2721590",
    "end": "2727380"
  },
  {
    "text": "change your protect your format so there are configuration points like I say we have",
    "start": "2727380",
    "end": "2734130"
  },
  {
    "start": "2731000",
    "end": "2731000"
  },
  {
    "text": "our key stores where we're gonna save the keys we have how we're going to encrypt stuff in those key stores and we have key expiration policy which is how",
    "start": "2734130",
    "end": "2740730"
  },
  {
    "text": "long we are going to rotate thing how long keys live for before they are rotated automatically and if you want to",
    "start": "2740730",
    "end": "2747869"
  },
  {
    "text": "share key stores between applications well apps are isolated by default so",
    "start": "2747869",
    "end": "2753089"
  },
  {
    "text": "there's an application name that you can set and if you set it to be the same then they can share and cripsy data",
    "start": "2753089",
    "end": "2759210"
  },
  {
    "text": "between the two and if you want to use it in older asp.net applications we have",
    "start": "2759210",
    "end": "2765720"
  },
  {
    "text": "a forward compatibility pack we're not doing back compact for this we're going",
    "start": "2765720",
    "end": "2770910"
  },
  {
    "text": "to drag you kicking and screaming up so we'll skip past configuration and here's",
    "start": "2770910",
    "end": "2777000"
  },
  {
    "start": "2775000",
    "end": "2775000"
  },
  {
    "text": "how to implement a key store it's incredibly easy you've got get all elements and store elements and in 2.2 we will finally give you the red key",
    "start": "2777000",
    "end": "2783779"
  },
  {
    "text": "store that has been ready since - oh and I just forgot to tell someone to flick the bit to production authorization how",
    "start": "2783779",
    "end": "2795119"
  },
  {
    "start": "2792000",
    "end": "2792000"
  },
  {
    "text": "many of you were here for this last year so some of you and you so I should go",
    "start": "2795119",
    "end": "2800940"
  },
  {
    "text": "through this again it's gonna be exactly the same demo as last year that is route",
    "start": "2800940",
    "end": "2805950"
  },
  {
    "text": "to ginger people so you have that to look forward to so I'm gonna run through this I have an entire workshop for this",
    "start": "2805950",
    "end": "2814160"
  },
  {
    "text": "which is probably the best way to do it it's it's maybe two hours worth of going",
    "start": "2814160",
    "end": "2821039"
  },
  {
    "text": "through and it talks you through building things up step-by-step so we",
    "start": "2821039",
    "end": "2826140"
  },
  {
    "text": "don't want you to write your own authorization attribute any more because that was hard and it was wrong and hard-coded things instead we switched",
    "start": "2826140",
    "end": "2832769"
  },
  {
    "text": "everything to policies and policies are ways that you can express rules in code based on requirements and we also have",
    "start": "2832769",
    "end": "2841230"
  },
  {
    "text": "given you resource based authorization everything is done in DI we have our custom scheme filtering which what you should have been using to select stuff",
    "start": "2841230",
    "end": "2847650"
  },
  {
    "text": "but no we've got skiing four-wheelers so use those if you want to make me unhappy so we have things based on requirements",
    "start": "2847650",
    "end": "2856910"
  },
  {
    "text": "requirement is just a marker interface you can put properties into your requirements if you",
    "start": "2856910",
    "end": "2862220"
  },
  {
    "text": "so if you have like a minimum age requirement and you want to spin up lots of them you could have like a minimum age in here that you could then set to",
    "start": "2862220",
    "end": "2868880"
  },
  {
    "text": "be like 18 or 21 bets don't what you want to do and their requirements have",
    "start": "2868880",
    "end": "2874160"
  },
  {
    "text": "handlers and handler basically says ok",
    "start": "2874160",
    "end": "2879250"
  },
  {
    "text": "what what needs to be fulfilled for this requirement to pass and I put my code",
    "start": "2879250",
    "end": "2885920"
  },
  {
    "text": "inside our handler so here we're gonna check that someone has a claim of a",
    "start": "2885920",
    "end": "2891470"
  },
  {
    "text": "badge number it's been issue back in toto and obviously you do more here you check whether the badge is valid and so",
    "start": "2891470",
    "end": "2897440"
  },
  {
    "text": "on and if it is if it's correct then I'm gonna say yep I'm gonna do task dot well",
    "start": "2897440",
    "end": "2904040"
  },
  {
    "text": "in this case it's tasked up from result zero because I'm caring about back",
    "start": "2904040",
    "end": "2909110"
  },
  {
    "text": "impact to one but you can do tester succeed and test out finish but the",
    "start": "2909110",
    "end": "2915170"
  },
  {
    "text": "important thing to note here is contact stop succeed if your requirement has",
    "start": "2915170",
    "end": "2920240"
  },
  {
    "text": "been fulfilled you call contact succeed and pass the requirement back and then",
    "start": "2920240",
    "end": "2928460"
  },
  {
    "text": "we build our policies up by adding authorization and say in our policy so",
    "start": "2928460",
    "end": "2933800"
  },
  {
    "text": "here I'm creating a policy called building entry I'm gonna add on your requirement which is office entry",
    "start": "2933800",
    "end": "2938960"
  },
  {
    "text": "requirement and then you're gonna shove our requirement handler into di because",
    "start": "2938960",
    "end": "2944540"
  },
  {
    "text": "everything is di based and then when I want to authorize I'm gonna say",
    "start": "2944540",
    "end": "2950000"
  },
  {
    "text": "authorize policy building entry which is the one that we can figure before with our building entry requirement and it",
    "start": "2950000",
    "end": "2956990"
  },
  {
    "text": "will go into our handler and call the code that you wrote in raiser pages",
    "start": "2956990",
    "end": "2962390"
  },
  {
    "text": "everything slightly different you can set pages to be authorized and then you",
    "start": "2962390",
    "end": "2968570"
  },
  {
    "text": "can set the actual policy on the page model so here we have our authorization",
    "start": "2968570",
    "end": "2976370"
  },
  {
    "text": "demo",
    "start": "2976370",
    "end": "2978880"
  },
  {
    "text": "I'm rapidly running out of time because I got so excited about the API off thing",
    "start": "2983640",
    "end": "2989790"
  },
  {
    "text": "it is lunch after this right yeah they always put me on before lunch because I",
    "start": "2994830",
    "end": "3000869"
  },
  {
    "text": "run over so I prepare to starve people",
    "start": "3000869",
    "end": "3005210"
  },
  {
    "text": "the workshop is a good place to start with this so as you can see this is a",
    "start": "3008210",
    "end": "3014250"
  },
  {
    "text": "custom demo for Australia we're gonna have the ability to change the weather",
    "start": "3014250",
    "end": "3020790"
  },
  {
    "text": "and choose whether we go inside or outside and what the rules will do is",
    "start": "3020790",
    "end": "3027150"
  },
  {
    "text": "the policies that we set up will be based on looking at the weather and where we're gonna end up and who we are",
    "start": "3027150",
    "end": "3034109"
  },
  {
    "text": "and see whether it's safe or not so in the minute it's winter so I want to go",
    "start": "3034109",
    "end": "3040140"
  },
  {
    "text": "outside I'm gonna choose who I am how are you par ron weasley some weird",
    "start": "3040140",
    "end": "3049980"
  },
  {
    "text": "famous Australian chap I don't know so well we'll go to Harry par he can go outside",
    "start": "3049980",
    "end": "3055920"
  },
  {
    "text": "in winter that's absolutely fine because we're checking who he is and the wet and",
    "start": "3055920",
    "end": "3063090"
  },
  {
    "text": "you know what the season is however if I choose the late great Steve Irwin it's",
    "start": "3063090",
    "end": "3070830"
  },
  {
    "text": "it's winter and few people realize how warm I two days outside right now and",
    "start": "3070830",
    "end": "3077130"
  },
  {
    "text": "yeah you're wandering around with layers on it is hilarious but apparently you",
    "start": "3077130",
    "end": "3082410"
  },
  {
    "text": "know if it's less than 20 degrees no one wants to go outside without six layers on so in winter it is too cold for Steve",
    "start": "3082410",
    "end": "3090000"
  },
  {
    "text": "Irwin to go outside so let's sign off Steve and we'll we'll",
    "start": "3090000",
    "end": "3095310"
  },
  {
    "text": "change it to all Z summer forest and climate change so now it's summer so I'm",
    "start": "3095310",
    "end": "3103650"
  },
  {
    "text": "gonna go outside again I'm gonna be Daniel Radcliffe",
    "start": "3103650",
    "end": "3109809"
  },
  {
    "text": "no you see now it's summer and British people should not go outside in Australian summers because they'll burn",
    "start": "3109809",
    "end": "3118259"
  },
  {
    "text": "okay but if I go outside I Steve Erin",
    "start": "3118259",
    "end": "3128130"
  },
  {
    "text": "it's fine because now it's summer and it's finally warm enough for Australians to go outside okay just watch out for",
    "start": "3128130",
    "end": "3136239"
  },
  {
    "text": "your drop bears and then you know what we we have Rupert Grint and honestly cuz",
    "start": "3136239",
    "end": "3143140"
  },
  {
    "text": "he's ginger it doesn't matter what season this is ginger people should not go outside in Australia because it's too",
    "start": "3143140",
    "end": "3149589"
  },
  {
    "text": "sunny and you'll burn to a crisp so we should look at the code behind this I love doing this one because in America",
    "start": "3149589",
    "end": "3156519"
  },
  {
    "text": "they think ginger people are real people it's it's really quite bizarre they",
    "start": "3156519",
    "end": "3162309"
  },
  {
    "text": "don't they don't understand this one of my friends married a ginger last week I",
    "start": "3162309",
    "end": "3167680"
  },
  {
    "text": "went to the ceremony and then like literally fled the ceremony to get a plan to come here and got there like 10",
    "start": "3167680",
    "end": "3174519"
  },
  {
    "text": "minutes beforehand and before I went I gave them both a big hug and I got a text from my friend saying that his",
    "start": "3174519",
    "end": "3181509"
  },
  {
    "text": "partner was was deeply amused that the guy hugging I went no it's fine you have half a soul between you now it's okay I'll hug them so what we have is do we",
    "start": "3181509",
    "end": "3196689"
  },
  {
    "text": "have required well we have requirements so we have a location requirement that's going to be inside or outside and then",
    "start": "3196689",
    "end": "3204699"
  },
  {
    "text": "we have an authorization for gingers which is specific to for Ron Weasley and",
    "start": "3204699",
    "end": "3213809"
  },
  {
    "text": "we have a weather provider which is where you probably go really enough to your database so what we do is we are",
    "start": "3213809",
    "end": "3219789"
  },
  {
    "text": "going to add a policy for inside and it's and we have a policy for outside",
    "start": "3219789",
    "end": "3224979"
  },
  {
    "text": "and we're gonna add the handlers for those because it's gonna be the same handler for multiple policies or for",
    "start": "3224979",
    "end": "3231759"
  },
  {
    "text": "multiple requirements they're all gonna handle location requirement and the collation requirement for gingers",
    "start": "3231759",
    "end": "3237429"
  },
  {
    "text": "basically says you can't go outside or inside at all you're in Australia it's bad for you whereas our normal",
    "start": "3237429",
    "end": "3244110"
  },
  {
    "text": "requirement handler will make it depend on your nationality",
    "start": "3244110",
    "end": "3249880"
  },
  {
    "text": "it doesn't take hair color into a go through the lab it becomes a little bit more clear but I'll try and explain",
    "start": "3249880",
    "end": "3255910"
  },
  {
    "text": "it now so policies are made up of one or more requirements and all the requirements have to succeed for policy",
    "start": "3255910",
    "end": "3260920"
  },
  {
    "start": "3256000",
    "end": "3256000"
  },
  {
    "text": "to pass and all requirements are evaluated just in case you want to log and handlers are handlers for",
    "start": "3260920",
    "end": "3269320"
  },
  {
    "text": "requirements and you can have multiple handlers so there are multiple ways to fulfill a requirement and the way to",
    "start": "3269320",
    "end": "3274930"
  },
  {
    "text": "think of this is gain access to your office if you have to swipe a badge to get access to your office that is one",
    "start": "3274930",
    "end": "3280990"
  },
  {
    "text": "way of fulfilling your office entry requirement but visitors need to come in to so they get like little visitor",
    "start": "3280990",
    "end": "3288250"
  },
  {
    "text": "badges which don't swipe but the receptionist will press a button but their visitor badge is another way of",
    "start": "3288250",
    "end": "3294820"
  },
  {
    "text": "fulfilling the office entry requirement so you have two handlers for a single",
    "start": "3294820",
    "end": "3301180"
  },
  {
    "text": "requirement and if either one is fulfilled then the requirement is",
    "start": "3301180",
    "end": "3306370"
  },
  {
    "text": "fulfilled and when it's successful you call contacts that succeed when it's",
    "start": "3306370",
    "end": "3312370"
  },
  {
    "text": "unsuccessful you do nothing at all because like I said there are multiple handlers on a requirement so the next",
    "start": "3312370",
    "end": "3318100"
  },
  {
    "text": "one might succeed there is a context off fail that is not something you generally",
    "start": "3318100",
    "end": "3324220"
  },
  {
    "text": "want to use it is for horrific circumstances it's for that I need to short-circuit everything it's like I",
    "start": "3324220",
    "end": "3330340"
  },
  {
    "text": "don't care if another handler will succeed so my database is on fire",
    "start": "3330340",
    "end": "3335970"
  },
  {
    "text": "don't throw anything more but it's it normally it's not something you will want to call and you can do this",
    "start": "3335970",
    "end": "3342940"
  },
  {
    "start": "3341000",
    "end": "3341000"
  },
  {
    "text": "imperative Lee as well because everything is best in DI you can take authorization service into your",
    "start": "3342940",
    "end": "3348100"
  },
  {
    "text": "controller and call authorize async with a policy name if you're inside a view",
    "start": "3348100",
    "end": "3354550"
  },
  {
    "text": "and you want to do things if it fails just return you challenge result and we will take care of all the prompting for",
    "start": "3354550",
    "end": "3361180"
  },
  {
    "text": "logins or the forbidden or unauthorized stuff for you just always remember to",
    "start": "3361180",
    "end": "3366760"
  },
  {
    "start": "3365000",
    "end": "3365000"
  },
  {
    "text": "register your handles in DI if you don't do that nothing is going to work and you'll sit there going why is nothing",
    "start": "3366760",
    "end": "3372910"
  },
  {
    "text": "working and then you'll remember that you have to rewrite your hand register your handles in di and if you",
    "start": "3372910",
    "end": "3378880"
  },
  {
    "text": "are using databases of course just remember to change the scope during your",
    "start": "3378880",
    "end": "3384130"
  },
  {
    "text": "di injection of the handlers we have resource base authorization so say you have a document and someone wants to",
    "start": "3384130",
    "end": "3390370"
  },
  {
    "start": "3386000",
    "end": "3386000"
  },
  {
    "text": "edit it you can change your resource you can change your authorization based on what that document is so it's like hey",
    "start": "3390370",
    "end": "3395890"
  },
  {
    "text": "you're the author of this document I'm gonna let you edit it or you're the",
    "start": "3395890",
    "end": "3400930"
  },
  {
    "text": "admin of this SharePoint site I'm gonna let you edit it so it's best in operation again this is in the workshop",
    "start": "3400930",
    "end": "3409920"
  },
  {
    "text": "but you can do all sorts of funny things so here is one that takes an authorization Handler this time for a",
    "start": "3409920",
    "end": "3415780"
  },
  {
    "start": "3411000",
    "end": "3411000"
  },
  {
    "text": "resource it takes a requirement but this time it's also taking the resource itself the document and that will then",
    "start": "3415780",
    "end": "3423250"
  },
  {
    "text": "pass through to handle requirement anything we've got our document I'm gonna look at a property of the document",
    "start": "3423250",
    "end": "3429310"
  },
  {
    "text": "and then decide whether I want to succeed or not here's how we add",
    "start": "3429310",
    "end": "3434740"
  },
  {
    "text": "authorization everywhere this will work for rezar pages too and if you don't",
    "start": "3434740",
    "end": "3440770"
  },
  {
    "text": "like scheme forwarding and want to do things the correct way although filer will disagree with me then you can",
    "start": "3440770",
    "end": "3446260"
  },
  {
    "text": "actually limit by schemes inside your policy and you can do things if you're an NBC because the authorization service",
    "start": "3446260",
    "end": "3453430"
  },
  {
    "text": "is in DI and you don't want to use view models because you're a horrible person you can inject the authorization service",
    "start": "3453430",
    "end": "3459250"
  },
  {
    "text": "into your view and call authorize async in your view and then show/hide things",
    "start": "3459250",
    "end": "3465190"
  },
  {
    "text": "based on the result doing a few models for heaven's sake just remember to then duplicate those checks on the back end",
    "start": "3465190",
    "end": "3471370"
  },
  {
    "text": "because otherwise people will just hit your routes directly if you don't like it you can throw it away this is what",
    "start": "3471370",
    "end": "3478470"
  },
  {
    "text": "policy server does they replace our entire policy provider with their one that then allows you to set rules based",
    "start": "3478470",
    "end": "3484840"
  },
  {
    "text": "in a database in a server somewhere else",
    "start": "3484840",
    "end": "3488700"
  },
  {
    "start": "3490000",
    "end": "3490000"
  },
  {
    "text": "so we're getting towards the end asp.net identity is our database for storing",
    "start": "3490080",
    "end": "3496600"
  },
  {
    "text": "user names and passwords it used to come with an awful lot of crud in the",
    "start": "3496600",
    "end": "3502660"
  },
  {
    "text": "templates because we have this lovely facility now in MVC 2.1 to bundle",
    "start": "3502660",
    "end": "3508750"
  },
  {
    "text": "everything including UI into and you get package we've done that",
    "start": "3508750",
    "end": "3514030"
  },
  {
    "text": "now so you know if you create a new solution with identity you won't see any of the identity controllers which is",
    "start": "3514030",
    "end": "3520360"
  },
  {
    "text": "great until you want to come to customize things and you're like how do I customize it well you right click and",
    "start": "3520360",
    "end": "3525490"
  },
  {
    "text": "choose scaffold I add new scaffold an item and you will see identity in there and it will extract everything I and lo",
    "start": "3525490",
    "end": "3533020"
  },
  {
    "text": "and behold you have all your controllers and UI back again you can also use this to add identity afterwards so you've got",
    "start": "3533020",
    "end": "3539560"
  },
  {
    "text": "a project and you're like oh darn it I need a login I need a login screen I need usernames",
    "start": "3539560",
    "end": "3545200"
  },
  {
    "text": "and passwords you can also just do add new scaffolded item and choose HP don't hide anything",
    "start": "3545200",
    "end": "3550620"
  },
  {
    "text": "we have gdpr points because everyone likes those cookie prompts we are not",
    "start": "3550620",
    "end": "3559270"
  },
  {
    "text": "saying asp.net is gdpr compliant we are saying that we can help you meet some of",
    "start": "3559270",
    "end": "3565840"
  },
  {
    "text": "your obligations there was an awful lot more to gdpr than this my manager keeps joking that he will stand up one day and",
    "start": "3565840",
    "end": "3572350"
  },
  {
    "text": "say if you use our templates you're fully protected for gdpr and he knows that's wrong but we'll give",
    "start": "3572350",
    "end": "3578230"
  },
  {
    "text": "you extension points in our templates for data downloads and deletion we give you extension points for encrypting data",
    "start": "3578230",
    "end": "3583510"
  },
  {
    "text": "at rest although for heaven's sake don't use them this is the last possible resort for this stuff this is when you",
    "start": "3583510",
    "end": "3590920"
  },
  {
    "text": "are using a database that does not give you encryption at rest but you realize you still need it use a database that",
    "start": "3590920",
    "end": "3597550"
  },
  {
    "text": "gives you encryption at rest it's so much easier and it's transparent to you and we have two-factor authentication",
    "start": "3597550",
    "end": "3604150"
  },
  {
    "text": "for your nice little TOTP apps and for",
    "start": "3604150",
    "end": "3609460"
  },
  {
    "text": "GD P are outside of identity we have support for those annoying consent dialogues once you start implementing",
    "start": "3609460",
    "end": "3616420"
  },
  {
    "text": "this it gets a little bit more interesting if a user has not consented asp.net will not drop cookies that are",
    "start": "3616420",
    "end": "3622420"
  },
  {
    "text": "not marked as essential so you have to change you have to rethink how all your",
    "start": "3622420",
    "end": "3628990"
  },
  {
    "text": "cookies work and choose whether you want mark something as essential or not and be prepared to argue that they are in",
    "start": "3628990",
    "end": "3634810"
  },
  {
    "text": "fact essential when Europe comes down on you with a great big heavy boot here's",
    "start": "3634810",
    "end": "3641560"
  },
  {
    "text": "our we start of wire up cookie policy options we're going to check whether consent is needed and that will go away and look for something and",
    "start": "3641560",
    "end": "3647160"
  },
  {
    "text": "that's something is up to you and then when we are creating cookies we can set",
    "start": "3647160",
    "end": "3653610"
  },
  {
    "text": "a cookie option that says something is essential and in our views we can use",
    "start": "3653610",
    "end": "3658920"
  },
  {
    "text": "this to set the consent to being tracked or using non essential cookies just by",
    "start": "3658920",
    "end": "3665730"
  },
  {
    "text": "dropping another cookie funnily enough because that's the only way to do it so that's quick run of where we went",
    "start": "3665730",
    "end": "3672750"
  },
  {
    "text": "that has covered things in one two to one and what will eventually come about two months after we have dropped to two",
    "start": "3672750",
    "end": "3679140"
  },
  {
    "text": "I am aware that I have run over by two minutes so if anyone has questions and",
    "start": "3679140",
    "end": "3684960"
  },
  {
    "text": "hits everyone else in the room enough to keep them from your lunch now is the time to put your hands up or come sneak",
    "start": "3684960",
    "end": "3691740"
  },
  {
    "text": "up there is someone that hits you there's a man at the back man at the back what would you like to ask to keep",
    "start": "3691740",
    "end": "3697560"
  },
  {
    "text": "everyone from their lunch yes",
    "start": "3697560",
    "end": "3709130"
  },
  {
    "text": "so the questions about unit testing the authorization policies and you say it's very hard I would honestly argue that it",
    "start": "3712260",
    "end": "3719200"
  },
  {
    "text": "is not but that's just me because it's you you you test the handler so you just",
    "start": "3719200",
    "end": "3725950"
  },
  {
    "text": "call authorized async you pass it in a mocked up request and check what comes",
    "start": "3725950",
    "end": "3732400"
  },
  {
    "text": "out again no I think we need to talk a little bit further about why it's why",
    "start": "3732400",
    "end": "3738760"
  },
  {
    "text": "it's hard for your circumstances because there's probably something I'm missing here like whether you have database",
    "start": "3738760",
    "end": "3745330"
  },
  {
    "text": "dependencies or or something else that's slightly weird but in theory it is just",
    "start": "3745330",
    "end": "3750460"
  },
  {
    "text": "a matter of mocking up there are creating an instance of the requirement handler that has everything you want",
    "start": "3750460",
    "end": "3756610"
  },
  {
    "text": "mocked around it and then call it and see what drops out the other end which to me is easy but I must be missing",
    "start": "3756610",
    "end": "3764620"
  },
  {
    "text": "something so if you want to like delay your food gratification and come up and and have a chat I think that's probably",
    "start": "3764620",
    "end": "3771250"
  },
  {
    "text": "the best option does anyone else have questions yes yes",
    "start": "3771250",
    "end": "3780299"
  },
  {
    "text": "so the question is if we are going for the new fancy web API stuff and you issue a token what do we use for private",
    "start": "3783850",
    "end": "3792250"
  },
  {
    "text": "keys for signing that JAL token we take care of that for you um we will we will we would always it",
    "start": "3792250",
    "end": "3799780"
  },
  {
    "text": "and how does it get distributed okay that becomes slightly more interesting we're gonna give you a key provider in",
    "start": "3799780",
    "end": "3805960"
  },
  {
    "text": "much the same way that you can do with identity server right now we will give",
    "start": "3805960",
    "end": "3811690"
  },
  {
    "text": "you we will give you a one that looks roughly like the data protection providers so you can say I want to share my key via Redis or I want to share my",
    "start": "3811690",
    "end": "3817960"
  },
  {
    "text": "key via a sequel or I want to share it by blob storage that isn't my list of things to do which is why it's going to",
    "start": "3817960",
    "end": "3823330"
  },
  {
    "text": "come two to three months after two point two launches but we will be supporting your skill like scenarios for this it's",
    "start": "3823330",
    "end": "3829480"
  },
  {
    "text": "just not quite there yet it's all hidden away in a private repo that you can't",
    "start": "3829480",
    "end": "3835090"
  },
  {
    "text": "look at yet either give up give it a week a week in half and it will all be public and you can all start creating",
    "start": "3835090",
    "end": "3841180"
  },
  {
    "text": "issues like well a lot about this what about that what about the other and make Xavier really really sad does anybody",
    "start": "3841180",
    "end": "3847480"
  },
  {
    "text": "have any more questions or would you all rather go for lunch I'm terribly sorry around over you can",
    "start": "3847480",
    "end": "3853810"
  },
  {
    "text": "grab me over the next couple of days and just pass to me about more questions enjoy your lines thank you very much",
    "start": "3853810",
    "end": "3859690"
  },
  {
    "text": "[Applause]",
    "start": "3859690",
    "end": "3862300"
  }
]