[
  {
    "text": "hello everybody good afternoon my name is Edward Thompson I'm a program manager",
    "start": "5620",
    "end": "10820"
  },
  {
    "text": "at Microsoft I work on Azure DevOps if you've never heard of Azure DevOps you could be forgiven until last week it",
    "start": "10820",
    "end": "18109"
  },
  {
    "text": "was known as visual studio team services then we what we did was we decided to",
    "start": "18109",
    "end": "24740"
  },
  {
    "text": "break it up into chunks so you know we have an agile planning tool we have git",
    "start": "24740",
    "end": "33230"
  },
  {
    "text": "repository hosting we have pipelines for build and test and so now those are individual products from Microsoft and",
    "start": "33230",
    "end": "41420"
  },
  {
    "text": "as your DevOps is the family of those tools I work mostly on git before I",
    "start": "41420",
    "end": "48289"
  },
  {
    "text": "became a program manager I was a software engineer at Microsoft and at github working on the get tooling that",
    "start": "48289",
    "end": "55690"
  },
  {
    "text": "that you probably use whether that's in github or an azure repos I also do",
    "start": "55690",
    "end": "62959"
  },
  {
    "text": "random things outside of work that aren't technical no√© opposite so I have",
    "start": "62959",
    "end": "68390"
  },
  {
    "text": "a podcast about git it's called all things get you should check it out and if you want to sticker I've got some come get them I want to talk about get",
    "start": "68390",
    "end": "77480"
  },
  {
    "text": "at scale the idea of being how you can",
    "start": "77480",
    "end": "82690"
  },
  {
    "text": "adopt get for a very large team or a very large project and a lot of that was",
    "start": "82690",
    "end": "89090"
  },
  {
    "text": "driven out of what we have done at Microsoft and what we have learned at Microsoft so when I started at Microsoft",
    "start": "89090",
    "end": "97580"
  },
  {
    "text": "almost 10 years ago we used a bunch of different tools but primarily we used",
    "start": "97580",
    "end": "103730"
  },
  {
    "text": "either source Depot or Team Foundation version control how many people have used Team Foundation version control",
    "start": "103730",
    "end": "109970"
  },
  {
    "text": "with yeah with you've got a lock a file and edit it talk to the server before",
    "start": "109970",
    "end": "116600"
  },
  {
    "text": "you do anything which is crazy obnoxious right except if you are on a really",
    "start": "116600",
    "end": "124610"
  },
  {
    "text": "really large software project then it actually comes in kind of handy the",
    "start": "124610",
    "end": "130310"
  },
  {
    "text": "problem is we were building all of these sort of tools ourselves and nobody liked",
    "start": "130310",
    "end": "137389"
  },
  {
    "text": "them right nobody liked TFE see it turns out because you've got",
    "start": "137389",
    "end": "142610"
  },
  {
    "text": "to lock the files and everything everybody wants to use git and so a couple of years ago Satya Nadella",
    "start": "142610",
    "end": "149650"
  },
  {
    "text": "actually looked around the company and the way we were building software and realized that we weren't doing it well",
    "start": "149650",
    "end": "158830"
  },
  {
    "text": "for lack of a better way to put it and so he decided that we should modernize the way we build our software and the",
    "start": "158830",
    "end": "166670"
  },
  {
    "text": "goal is to adopt one engineering system throughout Microsoft a single engineering system that was using modern",
    "start": "166670",
    "end": "174110"
  },
  {
    "text": "tooling so we were actually using agile processes we were using it as a version",
    "start": "174110",
    "end": "181190"
  },
  {
    "text": "control system and we wanted to move everybody in the company onto that the",
    "start": "181190",
    "end": "186890"
  },
  {
    "text": "windows team the office team being my team Minecraft everybody this created a",
    "start": "186890",
    "end": "195380"
  },
  {
    "text": "bit of a problem though because all of the teams throughout Microsoft had historically been doing kind of whatever",
    "start": "195380",
    "end": "201410"
  },
  {
    "text": "they wanted if you've seen this organizational chart of Microsoft let me zoom in on Microsoft for you that's kind",
    "start": "201410",
    "end": "207950"
  },
  {
    "text": "of how it felt back in the day like I said there was this tool called source",
    "start": "207950",
    "end": "213980"
  },
  {
    "text": "Depot and that was built by the windows team for the windows team the office",
    "start": "213980",
    "end": "219320"
  },
  {
    "text": "team took it and changed it so now there were two incompatible versions of source Depot and then my team the azure devops",
    "start": "219320",
    "end": "227180"
  },
  {
    "text": "team looked at that and said why are we building a source control system that we're not selling to customers our",
    "start": "227180",
    "end": "232670"
  },
  {
    "text": "customers could use this too so we built our own version of it and called it team",
    "start": "232670",
    "end": "238400"
  },
  {
    "text": "foundation version control so now we had three incompatible versions of the same",
    "start": "238400",
    "end": "243560"
  },
  {
    "text": "system and we were selling one of them we were using two internally and then we",
    "start": "243560",
    "end": "248690"
  },
  {
    "text": "had teams with like a little bit of get here and a little bit of mercurial there so this was really frustrating this is",
    "start": "248690",
    "end": "256970"
  },
  {
    "text": "perhaps not entirely accurate but it's fair to say that we lived in silos every",
    "start": "256970",
    "end": "262160"
  },
  {
    "text": "team did their own thing they use different tools for bug tracking different tools for version control all",
    "start": "262160",
    "end": "267470"
  },
  {
    "text": "of those sorts of things and so that was a big frustration",
    "start": "267470",
    "end": "272870"
  },
  {
    "text": "we were spending a lot of money to develop software that that we didn't even like using so so the goal was to",
    "start": "272870",
    "end": "280850"
  },
  {
    "text": "bring everybody in to get and that's gonna work out fine because I read on",
    "start": "280850",
    "end": "287449"
  },
  {
    "text": "the get website on git SCM comm that it was built to work on Linux kernel meaning it's had to effectively handle",
    "start": "287449",
    "end": "294560"
  },
  {
    "text": "large repositories from day one so you know why am I even up here talking to you it turns out that maybe Linux is a",
    "start": "294560",
    "end": "304010"
  },
  {
    "text": "big software project if you look at some other open-source projects Linux is big",
    "start": "304010",
    "end": "311440"
  },
  {
    "text": "it's about six hundred and forty six hundred fifty megabytes when you check it out that's you know when you run git clone",
    "start": "311440",
    "end": "318280"
  },
  {
    "text": "the stuff the dot C files the documentation the text files is about",
    "start": "318280",
    "end": "323930"
  },
  {
    "text": "640 megabytes not not all the history the history all told for the Linux kernel is about 1.7 gigs compressed as a",
    "start": "323930",
    "end": "332180"
  },
  {
    "text": "pack file so that's big fifty seven thousand files it's much bigger than",
    "start": "332180",
    "end": "338570"
  },
  {
    "text": "Roslin the the Roslin compiler which is two hundred thirty Meg's over about twelve thousand files and much much",
    "start": "338570",
    "end": "344450"
  },
  {
    "text": "bigger than get the git project itself is about thirty five megabytes so Linux",
    "start": "344450",
    "end": "351080"
  },
  {
    "text": "is big I guess it's not at Microsoft though if if you if you start looking",
    "start": "351080",
    "end": "358430"
  },
  {
    "text": "and comparing Linux to some git repositories around the company my team's repository is about three gigs",
    "start": "358430",
    "end": "365979"
  },
  {
    "text": "that's again source test data lots and",
    "start": "365979",
    "end": "371000"
  },
  {
    "text": "lots of test data documentation stuff like that so we're about three gigs",
    "start": "371000",
    "end": "377210"
  },
  {
    "text": "we've got three hundred people working in our repository every day and around",
    "start": "377210",
    "end": "384560"
  },
  {
    "text": "Microsoft though we're still pretty small because around Microsoft when we",
    "start": "384560",
    "end": "389570"
  },
  {
    "text": "talk about large repositories we talk about one repository and that's Windows Windows blows everything out of the",
    "start": "389570",
    "end": "397220"
  },
  {
    "text": "water it's about 270 gigabytes again not",
    "start": "397220",
    "end": "402380"
  },
  {
    "text": "history just the stuff that's needed to build Windows and and ship it to you is about 270",
    "start": "402380",
    "end": "408980"
  },
  {
    "text": "gigabytes because they've been working in a mono repo for their entire existence and so the source for notepad",
    "start": "408980",
    "end": "416720"
  },
  {
    "text": "is right next to the source for I mean not right next to it's you know in a different directory but a scuzzy driver",
    "start": "416720",
    "end": "422960"
  },
  {
    "text": "from 97 is right next to I don't know candy crush Pro or whatever that thing's",
    "start": "422960",
    "end": "429350"
  },
  {
    "text": "called that you can't get rid of and it's not just like the Windows client not it's",
    "start": "429350",
    "end": "437180"
  },
  {
    "text": "not just Windows 10 Windows Server is in their Xboxes in their Windows Phone is",
    "start": "437180",
    "end": "442340"
  },
  {
    "text": "still in there so so it's big and you might think that",
    "start": "442340",
    "end": "448910"
  },
  {
    "text": "it needs to be reorganized it needs to be changed but fundamentally when you",
    "start": "448910",
    "end": "454850"
  },
  {
    "text": "start with something that big that's not a day-to-day sort of thing it's not like you can just walk in and be like let's",
    "start": "454850",
    "end": "461180"
  },
  {
    "text": "refactor everything and split it up into you know nice tiny repositories that talk to each other over some sort of",
    "start": "461180",
    "end": "467810"
  },
  {
    "text": "contract because 4,000 people work in this repository every day you can't just",
    "start": "467810",
    "end": "473480"
  },
  {
    "text": "say hey 4,000 people go home for a week we won't do any work we're gonna reorganize everything it'll be fine when",
    "start": "473480",
    "end": "479660"
  },
  {
    "text": "you come back that just doesn't happen so we had to figure out a way to get these 4,000 people and they're nearly",
    "start": "479660",
    "end": "489200"
  },
  {
    "text": "300 gigabyte repository in to get and this was a challenge for us because so",
    "start": "489200",
    "end": "494990"
  },
  {
    "text": "like I said I worked at github at github we were the world's largest get hosting",
    "start": "494990",
    "end": "500750"
  },
  {
    "text": "provider and we could if somebody came to us and said I want to stuff 270 gigabytes into a single repository we",
    "start": "500750",
    "end": "507470"
  },
  {
    "text": "would have said no we're not going to do that for you unfortunately at Microsoft when Sasha",
    "start": "507470",
    "end": "514880"
  },
  {
    "text": "says you are going to support the windows team in their move to get we had to figure out how to do that so Windows",
    "start": "514880",
    "end": "524150"
  },
  {
    "text": "is by far the the biggest challenge that we have but we've had a lot of challenges bringing various people",
    "start": "524150",
    "end": "530480"
  },
  {
    "text": "throughout the company into in to get and into Azure DevOps so first things",
    "start": "530480",
    "end": "539690"
  },
  {
    "text": "first code integration is a challenge at the scale of a few hundred to a few thousand",
    "start": "539690",
    "end": "546529"
  },
  {
    "text": "developers working in the same repository we what we suggest to people",
    "start": "546529",
    "end": "553819"
  },
  {
    "text": "throughout the company what we what we think is a best practice is to use trump based development not to use feature",
    "start": "553819",
    "end": "560809"
  },
  {
    "text": "branches not to create long-running long-lived feature branches you have a single master branch you create a topic",
    "start": "560809",
    "end": "568639"
  },
  {
    "text": "branch work on it briefly very briefly a couple of commits you know hours maybe a",
    "start": "568639",
    "end": "574999"
  },
  {
    "text": "day and then you you push that back into the master branch this is similar ish to",
    "start": "574999",
    "end": "583429"
  },
  {
    "text": "get hub flow a little simpler it is nothing like git flow which is not trunk",
    "start": "583429",
    "end": "590179"
  },
  {
    "text": "based development and should be avoided at all costs the fundamentally the idea is spin up a",
    "start": "590179",
    "end": "596299"
  },
  {
    "text": "topic branch write some code create some commits push it in a master write but",
    "start": "596299",
    "end": "602720"
  },
  {
    "text": "the actual fundamentals of how that topic branch gets merged is a little",
    "start": "602720",
    "end": "610369"
  },
  {
    "text": "challenging because you could just run git push and that would be fine I guess",
    "start": "610369",
    "end": "618459"
  },
  {
    "text": "you know you might want to use code review you might want to do some code review you could do that outside of a",
    "start": "618459",
    "end": "624049"
  },
  {
    "text": "pull request maybe but fundamentally if we think about the way we build code and",
    "start": "624049",
    "end": "631309"
  },
  {
    "text": "get it into production right we start writing some code we build it and test it locally we get sign-off from our from",
    "start": "631309",
    "end": "639439"
  },
  {
    "text": "our peers we get a code review we merge it into master and then we we release it",
    "start": "639439",
    "end": "645949"
  },
  {
    "text": "we ship it to production and we can use pull requests to to target the the",
    "start": "645949",
    "end": "651019"
  },
  {
    "text": "middle three items there really you know pull rip bus isn't gonna write your code for you sadly and it's not going to push",
    "start": "651019",
    "end": "659600"
  },
  {
    "text": "it to production right you need some sort of this continuous delivery system pipelines for that it's the middle three",
    "start": "659600",
    "end": "667039"
  },
  {
    "text": "things that that pull requests are good at they're good at handling the build and test integration",
    "start": "667039",
    "end": "673329"
  },
  {
    "text": "making sure that that things work well they're good at handling the code review",
    "start": "673329",
    "end": "679389"
  },
  {
    "text": "portion people are can comment on your code and they're good at handling the merge you know you click the green merge",
    "start": "679389",
    "end": "685809"
  },
  {
    "text": "this commit button and and that code goes into master and that's all good but it turns out that pull requests have",
    "start": "685809",
    "end": "693910"
  },
  {
    "text": "some other advantages so when we started dogfooding when we started building get support into Azure repos the first thing we did",
    "start": "693910",
    "end": "703360"
  },
  {
    "text": "was build the server and we didn't have pull requests yet so that this is how we",
    "start": "703360",
    "end": "708489"
  },
  {
    "text": "were we weren't using pull requests we wanted to we were getting there so for writing our code all 300 people",
    "start": "708489",
    "end": "714459"
  },
  {
    "text": "would just get a code review from somebody and then run git push to the server and this broke down real quick",
    "start": "714459",
    "end": "723879"
  },
  {
    "text": "it's it's hard to think about this until you have three hundred plus people working in the same repository all at",
    "start": "723879",
    "end": "731049"
  },
  {
    "text": "once on a Friday the last day of your sprint everybody wants to get push all",
    "start": "731049",
    "end": "736360"
  },
  {
    "text": "at once and so the workflow looks kind of like this I'm going to clone from the server cool I'm going to create a commit",
    "start": "736360",
    "end": "744419"
  },
  {
    "text": "great when I'm done with that I'm ready to push that up to the server so I run",
    "start": "744419",
    "end": "749739"
  },
  {
    "text": "git push origin master and the server says no the server says no because while",
    "start": "749739",
    "end": "755559"
  },
  {
    "text": "I was working somebody else had pushed to commit up and so what do I need to do well I need to pull their changes down",
    "start": "755559",
    "end": "763600"
  },
  {
    "text": "and merge them with mine or rebase them I kind of like rebase I'm not gonna get into that argument here and now I I've",
    "start": "763600",
    "end": "772419"
  },
  {
    "text": "got their code I've got their changes now I can try my push again and this",
    "start": "772419",
    "end": "778179"
  },
  {
    "text": "server won't reject it this time because I've included all of the changes that are on the server except it's a busy",
    "start": "778179",
    "end": "786759"
  },
  {
    "text": "Friday at the end of a sprint and somebody else has had the same problem and they've beat me to it because maybe",
    "start": "786759",
    "end": "792699"
  },
  {
    "text": "they didn't have merge conflicts than I did or their their machine is just faster or their network is faster and",
    "start": "792699",
    "end": "799179"
  },
  {
    "text": "meanwhile they've put something on the server too so now I need to",
    "start": "799179",
    "end": "805690"
  },
  {
    "text": "pull from the server again and if it's really a busy Friday this can actually",
    "start": "805690",
    "end": "812830"
  },
  {
    "text": "go on for a while and this is not like a theoretical concern this really happened to us we",
    "start": "812830",
    "end": "819460"
  },
  {
    "text": "were getting to the point where we couldn't get work done so we we started",
    "start": "819460",
    "end": "824500"
  },
  {
    "text": "using a you know an accelerated system for our forgetting our pull request",
    "start": "824500",
    "end": "830530"
  },
  {
    "text": "system done because this just didn't work and pull requests do solve this",
    "start": "830530",
    "end": "835570"
  },
  {
    "text": "problem largely because instead of having to pull the code down do the",
    "start": "835570",
    "end": "840640"
  },
  {
    "text": "merge yourself you just click the merge button and the server does that all for you so you don't have to worry about",
    "start": "840640",
    "end": "846760"
  },
  {
    "text": "downloading the code you don't have to worry about doing a merge you do still have to worry about merge conflicts you",
    "start": "846760",
    "end": "852970"
  },
  {
    "text": "know you still have to pull the code down down then and do the work then but",
    "start": "852970",
    "end": "858480"
  },
  {
    "text": "pretty rare at least on on our team I mean maybe if you guys are editing the same files",
    "start": "858480",
    "end": "865230"
  },
  {
    "text": "often you might want to think about breaking them up in some way if that's possible but largely we don't see a ton",
    "start": "865230",
    "end": "872290"
  },
  {
    "text": "of merge conflicts and that's great so this drastically reduced our cycle time",
    "start": "872290",
    "end": "879690"
  },
  {
    "text": "so polar requests remain a best practice I mean they're they're a best practice for code review turns out they're a best",
    "start": "879690",
    "end": "886270"
  },
  {
    "text": "practice for scaling your your git team you can enforce them by a branch",
    "start": "886270",
    "end": "893410"
  },
  {
    "text": "policies to talk more about that a minute but you can make sure that people are using pull requests and not going",
    "start": "893410",
    "end": "900820"
  },
  {
    "text": "you know through the just try and get push on the command line so this was",
    "start": "900820",
    "end": "906670"
  },
  {
    "text": "good but it wasn't it still wasn't perfect especially when you get up to like the 4,000 developers on the windows",
    "start": "906670",
    "end": "914350"
  },
  {
    "text": "team they actually have problems where they have multiple people pressing that",
    "start": "914350",
    "end": "924130"
  },
  {
    "text": "green merge pull request button at the same time they're that big so what",
    "start": "924130",
    "end": "931540"
  },
  {
    "text": "happens then is one person wins and three people lose and so the whichever",
    "start": "931540",
    "end": "939220"
  },
  {
    "text": "you whichever person mashed it just a little bit quicker or whichever packet the server picked up off the wire and",
    "start": "939220",
    "end": "946240"
  },
  {
    "text": "processed first that person gets their pull request emerged and the other three",
    "start": "946240",
    "end": "952960"
  },
  {
    "text": "people don't so what the server actually does is it will retarget all their pull",
    "start": "952960",
    "end": "959050"
  },
  {
    "text": "requests against the new what has now become the master branch right so the the person who won their master now",
    "start": "959050",
    "end": "966850"
  },
  {
    "text": "they're the master branch and the the other three pull requests are now are now pointing at that but as far as a UI",
    "start": "966850",
    "end": "974940"
  },
  {
    "text": "concept goes they had a green merge pull request button they pressed it nothing",
    "start": "974940",
    "end": "984460"
  },
  {
    "text": "happened got an error message and it turns gray and that's a bad experience so some this",
    "start": "984460",
    "end": "992830"
  },
  {
    "text": "is the way I think all other get hosting providers work you know I don't want to name names you can you might recognize",
    "start": "992830",
    "end": "998080"
  },
  {
    "text": "that button but that's not the way as your repos works and as your repos if",
    "start": "998080",
    "end": "1004500"
  },
  {
    "text": "you if you have four people pressing the merge pull request button at the same",
    "start": "1004500",
    "end": "1009930"
  },
  {
    "text": "time and they actually do press it at the same time and so the server processes those requests what it'll",
    "start": "1009930",
    "end": "1016020"
  },
  {
    "text": "actually do is whomever got in first will go first into the merge queue the",
    "start": "1016020",
    "end": "1023070"
  },
  {
    "text": "next pull request will follow that and so the server will actually try to merge",
    "start": "1023070",
    "end": "1028110"
  },
  {
    "text": "these in order then so it'll take what is the master branch and you'll merge the first person's pull request and once",
    "start": "1028110",
    "end": "1034470"
  },
  {
    "text": "that's done it'll merge the second person's pull request into that and on and on and at peak times on our very",
    "start": "1034470",
    "end": "1043560"
  },
  {
    "text": "largest repos with the most number of people working in them this is actually necessary for us especially since four",
    "start": "1043560",
    "end": "1052110"
  },
  {
    "text": "thousand person repo that's many many gigabytes takes a little while to do the merge so that's that's not ideal that's",
    "start": "1052110",
    "end": "1061110"
  },
  {
    "text": "something else we need to work on but this is this is still necessary",
    "start": "1061110",
    "end": "1066590"
  },
  {
    "text": "sometimes merge conflicts happen in here which is frightening and so they'll just",
    "start": "1066590",
    "end": "1071790"
  },
  {
    "text": "be ejected from the merge key and they will then get that gray you",
    "start": "1071790",
    "end": "1077220"
  },
  {
    "text": "know the grey button error message experience but it's an incredibly uncommon so we do plan for that but it",
    "start": "1077220",
    "end": "1085110"
  },
  {
    "text": "doesn't happen very often the other caveat is that it you'll note that so",
    "start": "1085110",
    "end": "1092159"
  },
  {
    "text": "when you open up a pull request if you're doing continuous integration and I hope you are your CI system will build",
    "start": "1092159",
    "end": "1099059"
  },
  {
    "text": "your pull request changes as they would be merged into master that can now",
    "start": "1099059",
    "end": "1108330"
  },
  {
    "text": "change so it's possible that we're actually putting code into the master branch that hasn't really been built",
    "start": "1108330",
    "end": "1113340"
  },
  {
    "text": "because we're now checking in the integration of this merged queue and so",
    "start": "1113340",
    "end": "1121500"
  },
  {
    "text": "there is a little bit more risk as well but again we don't actually see any",
    "start": "1121500",
    "end": "1127620"
  },
  {
    "text": "build breaks in in practice because of this so that's kind of nice again we can",
    "start": "1127620",
    "end": "1134429"
  },
  {
    "text": "enforce that people go through the pull request experience using policies and at",
    "start": "1134429",
    "end": "1142010"
  },
  {
    "text": "at scale we absolutely have to have policies because anytime somebody makes",
    "start": "1142010",
    "end": "1150240"
  },
  {
    "text": "just a little mistake you know it's human nature to make a mistake but when you have 4,000 people working in the",
    "start": "1150240",
    "end": "1155309"
  },
  {
    "text": "same repository those mistakes add up and so if somebody were to push code",
    "start": "1155309",
    "end": "1160649"
  },
  {
    "text": "that didn't build or tests didn't pass you'd be delaying 4,000 people from",
    "start": "1160649",
    "end": "1166769"
  },
  {
    "text": "doing work until that got fixed and so that's that's really not ideal right so",
    "start": "1166769",
    "end": "1173850"
  },
  {
    "text": "we can plug into the the sort of code review post portion and enable policies",
    "start": "1173850",
    "end": "1181260"
  },
  {
    "text": "and in fact we can execute almost arbitrary commands as part of the build",
    "start": "1181260",
    "end": "1186870"
  },
  {
    "text": "of during the code review process this is nice because we can get as much as we",
    "start": "1186870",
    "end": "1194220"
  },
  {
    "text": "can away from humans because human nature is not great all the time let me",
    "start": "1194220",
    "end": "1202440"
  },
  {
    "text": "give you a concrete example so this is a change in an open source project that I work on",
    "start": "1202440",
    "end": "1208620"
  },
  {
    "text": "I work on a project called Lib get 2 and this is an actual pull request and it's",
    "start": "1208620",
    "end": "1215279"
  },
  {
    "text": "not a very good one if you zoom in you",
    "start": "1215279",
    "end": "1221039"
  },
  {
    "text": "might be able to tell right in the middle there's that test if ODB equals null but it's only one equals which of",
    "start": "1221039",
    "end": "1229019"
  },
  {
    "text": "course is an assignment so we're actually setting ODB to null and that's bad and that caused a problem right but",
    "start": "1229019",
    "end": "1236490"
  },
  {
    "text": "we merged it because we missed it in the code review even though it's really obvious right here it turns out that",
    "start": "1236490",
    "end": "1242460"
  },
  {
    "text": "this was actually a really big change this was some refactoring this you know",
    "start": "1242460",
    "end": "1248700"
  },
  {
    "text": "lots of files changed lots of seemingly innocuous changes going in and we just",
    "start": "1248700",
    "end": "1255629"
  },
  {
    "text": "missed this one thing and that's a bummer and it caused a problem and we",
    "start": "1255629",
    "end": "1261929"
  },
  {
    "text": "caught it quickly and fixed it you know we didn't release a major we didn't create a new major release with it or",
    "start": "1261929",
    "end": "1267090"
  },
  {
    "text": "anything like that but it did sneak into the master branch briefly and that's and",
    "start": "1267090",
    "end": "1272490"
  },
  {
    "text": "that's not good but a human missed this but a computer wouldn't have so we could",
    "start": "1272490",
    "end": "1279840"
  },
  {
    "text": "have enabled maybe some better static",
    "start": "1279840",
    "end": "1285299"
  },
  {
    "text": "code analysis would have certainly caught that and so we've been beefing up our CI and CD on on this project in",
    "start": "1285299",
    "end": "1294269"
  },
  {
    "text": "order to add those sorts of things and so one thing we've been doing is using Azure pipelines and the nice thing about",
    "start": "1294269",
    "end": "1300559"
  },
  {
    "text": "Azure pipelines is that in the azure DevOps marketplace you can grab like",
    "start": "1300559",
    "end": "1306480"
  },
  {
    "text": "sonar cube and you can just it's like a one-click install to get sonar cube",
    "start": "1306480",
    "end": "1311669"
  },
  {
    "text": "running and it will find these sorts of common problems white source is another",
    "start": "1311669",
    "end": "1317190"
  },
  {
    "text": "really handy addition that you can",
    "start": "1317190",
    "end": "1322470"
  },
  {
    "text": "install if you're not familiar with white source they do security scanning so they will look at your open source",
    "start": "1322470",
    "end": "1327750"
  },
  {
    "text": "dependencies the open source projects that you use and they will they'll",
    "start": "1327750",
    "end": "1334919"
  },
  {
    "text": "actually scan the versions they look at the versions that you're using and they'll compare that against the CVE",
    "start": "1334919",
    "end": "1341279"
  },
  {
    "text": "database CVG is common vulnerability and exposure it's the the Clearinghouse of",
    "start": "1341279",
    "end": "1346950"
  },
  {
    "text": "all security holes in software projects so when I do something stupid and lib",
    "start": "1346950",
    "end": "1353399"
  },
  {
    "text": "get too and we have like some security hole there's a CVE assigned that describes it and then we fix that so by",
    "start": "1353399",
    "end": "1361590"
  },
  {
    "text": "comparing the open-source components that you're using against this database you you can identify when you're using",
    "start": "1361590",
    "end": "1368879"
  },
  {
    "text": "when you have inherited these vulnerabilities so white source can scan for that so it's a nice way to add some",
    "start": "1368879",
    "end": "1376049"
  },
  {
    "text": "security and stability to your right to your pull request process and so again",
    "start": "1376049",
    "end": "1382590"
  },
  {
    "text": "these are just like one-click install in the in the marketplace you can also add",
    "start": "1382590",
    "end": "1388309"
  },
  {
    "text": "other tools you know if there's just a command-line way to do it that's fine",
    "start": "1388309",
    "end": "1394440"
  },
  {
    "text": "that's that's great so Coverity does static code analysis on C it's very very",
    "start": "1394440",
    "end": "1400019"
  },
  {
    "text": "good we've been finding we've been using that we've been doing fuzzing as well and a little get to project and so",
    "start": "1400019",
    "end": "1407489"
  },
  {
    "text": "that's something that that I do on those projects and a variety of of projects",
    "start": "1407489",
    "end": "1412859"
  },
  {
    "text": "throughout Microsoft take advantage of a variety of these techniques as well so",
    "start": "1412859",
    "end": "1417929"
  },
  {
    "text": "that's really nice and the nice thing is that we can enforce that they run right",
    "start": "1417929",
    "end": "1424470"
  },
  {
    "text": "by ensuring that people go through the pull request process we can in fact",
    "start": "1424470",
    "end": "1430649"
  },
  {
    "text": "ensure that all of these safety checks run so",
    "start": "1430649",
    "end": "1439039"
  },
  {
    "text": "let me figure out how to get out of my slideshow",
    "start": "1443570",
    "end": "1449090"
  },
  {
    "text": "right let's do it the hard way",
    "start": "1453950",
    "end": "1461409"
  },
  {
    "text": "there we go right so branch policies so",
    "start": "1463690",
    "end": "1470020"
  },
  {
    "text": "here I have a fairly simple c-sharp project it's a it's a dotnet it's a",
    "start": "1470020",
    "end": "1476470"
  },
  {
    "text": "dynamic framework actually it's a dotnet framework command line application and if I want to add this validation super",
    "start": "1476470",
    "end": "1484930"
  },
  {
    "text": "simple first thing I want to do is hit",
    "start": "1484930",
    "end": "1489940"
  },
  {
    "text": "reload here right so the first thing I",
    "start": "1489940",
    "end": "1499270"
  },
  {
    "text": "want to make sure I have is a actual build pipeline and so I can very easily",
    "start": "1499270",
    "end": "1505360"
  },
  {
    "text": "add that to my repository and it'll give me a Hamel build description I like",
    "start": "1505360",
    "end": "1512650"
  },
  {
    "text": "configuration is code we there's also a whiz-bang UI designer don't like that as",
    "start": "1512650",
    "end": "1517690"
  },
  {
    "text": "much personally I like to be able to version my build definition and so I",
    "start": "1517690",
    "end": "1523060"
  },
  {
    "text": "could actually add in here any you know any steps so it's basically just running",
    "start": "1523060",
    "end": "1528190"
  },
  {
    "text": "msbuild and then running the tests I could absolutely add in any sort of",
    "start": "1528190",
    "end": "1534760"
  },
  {
    "text": "validation I want right here whether that's a command line application I could add extensions in as well and so",
    "start": "1534760",
    "end": "1542470"
  },
  {
    "text": "once that's set up so it's gonna go ahead and run the build but I can go",
    "start": "1542470",
    "end": "1547840"
  },
  {
    "text": "back to my my repository and click right",
    "start": "1547840",
    "end": "1553930"
  },
  {
    "text": "here and go to branch policies and this is where I can add these actual policies",
    "start": "1553930",
    "end": "1561580"
  },
  {
    "text": "I can make sure that a human has seen and signed off on my my pull request I",
    "start": "1561580",
    "end": "1567930"
  },
  {
    "text": "can look for link work items this is something that I find really handy it",
    "start": "1567930",
    "end": "1573160"
  },
  {
    "text": "helps you get some traceability to understand why a change came into the codebase because with 4,000 people",
    "start": "1573160",
    "end": "1578280"
  },
  {
    "text": "checking in code it's not always obvious why did why did Bob make this change",
    "start": "1578280",
    "end": "1584200"
  },
  {
    "text": "well Bob made it because Alice found a bug and assigned it to him okay so you",
    "start": "1584200",
    "end": "1590110"
  },
  {
    "text": "get that traceability from the code back to the actual work item",
    "start": "1590110",
    "end": "1595860"
  },
  {
    "text": "but the thing that I think is the best is the build policy so this will use the",
    "start": "1596040",
    "end": "1604950"
  },
  {
    "text": "the pipeline that we just created it will make sure that it succeeds so the build has to succeed and the tests must",
    "start": "1604950",
    "end": "1611950"
  },
  {
    "text": "pass before I can merge a pull request and so this is incredibly handy I can",
    "start": "1611950",
    "end": "1618549"
  },
  {
    "text": "save those changes and now if I were to open a pull request it would not allow",
    "start": "1618549",
    "end": "1623650"
  },
  {
    "text": "me to to merge it until the build actually succeeded so that helps us make",
    "start": "1623650",
    "end": "1631870"
  },
  {
    "text": "sure that that we basically keep the master branch healthy at all times and",
    "start": "1631870",
    "end": "1638410"
  },
  {
    "text": "that's critical when you have it's critical for any size development team but it's especially critical when you",
    "start": "1638410",
    "end": "1644890"
  },
  {
    "text": "have so many developers",
    "start": "1644890",
    "end": "1648330"
  },
  {
    "text": "wow I really closed that right",
    "start": "1655600",
    "end": "1659850"
  },
  {
    "text": "great so the other thing that we see a",
    "start": "1664330",
    "end": "1670480"
  },
  {
    "text": "lot of with repositories around Microsoft is repositories that have",
    "start": "1670480",
    "end": "1675640"
  },
  {
    "text": "large files in them and this large files are not ideal and again",
    "start": "1675640",
    "end": "1681850"
  },
  {
    "text": "it used to be that we would see maybe on the windows team back when they were using source Depot that they would",
    "start": "1681850",
    "end": "1687669"
  },
  {
    "text": "actually build something and then check in the build results and that well that's that's that's painful so please",
    "start": "1687669",
    "end": "1694120"
  },
  {
    "text": "don't do that but we do still see a lot of repositories that have legitimately large files that need to be versioned in",
    "start": "1694120",
    "end": "1699639"
  },
  {
    "text": "them I work in Cambridge England and the Microsoft Office there is actually a",
    "start": "1699639",
    "end": "1705039"
  },
  {
    "text": "Microsoft Research Office so they're the ones that actually came up with hololens",
    "start": "1705039",
    "end": "1710700"
  },
  {
    "text": "so they do a lot of computer vision they do a lot of AI and ml and that always",
    "start": "1710700",
    "end": "1715750"
  },
  {
    "text": "means big corpuses of tests data so they've just got big files for images",
    "start": "1715750",
    "end": "1721210"
  },
  {
    "text": "and stuff like that for tests sometimes you'll see artwork going into a product",
    "start": "1721210",
    "end": "1727840"
  },
  {
    "text": "and that might want to be version controlled sometimes you see a nice application that has a help video and",
    "start": "1727840",
    "end": "1735250"
  },
  {
    "text": "you want to version that help video alongside the code that it describes so",
    "start": "1735250",
    "end": "1741330"
  },
  {
    "text": "there's nothing wrong with large files it's just that git wasn't really meant",
    "start": "1741330",
    "end": "1746889"
  },
  {
    "text": "to support them so the problem isn't even a single large file it's multiple",
    "start": "1746889",
    "end": "1752529"
  },
  {
    "text": "versions of a large file because when you run like git clone you don't just get the most recent version of of a file",
    "start": "1752529",
    "end": "1761110"
  },
  {
    "text": "you get all of the history yeah thanks",
    "start": "1761110",
    "end": "1769320"
  },
  {
    "text": "one of these days I'm going to have to learn how to use PowerPoint there we go",
    "start": "1769320",
    "end": "1775470"
  },
  {
    "text": "right so it's the multiple versions of large files because when you run git",
    "start": "1775470",
    "end": "1781239"
  },
  {
    "text": "clone you get all of the history so that means you get all of the versions of the large files you don't just get the most recent one because clone like the name",
    "start": "1781239",
    "end": "1789820"
  },
  {
    "text": "implies gives you all of the data gives you a full copy of the repository which",
    "start": "1789820",
    "end": "1794889"
  },
  {
    "text": "is great unless there's binaries in it so you get all of these commits with all of these",
    "start": "1794889",
    "end": "1800379"
  },
  {
    "text": "files in it and if that's a those files are a 100 megabyte ping now you've got 4",
    "start": "1800379",
    "end": "1806169"
  },
  {
    "text": "100 megabyte pings and you probably only care about the most recent one it's rare",
    "start": "1806169",
    "end": "1811570"
  },
  {
    "text": "that you're gonna wanna I don't know diff two versions of a ping I guess it's possible so the idea is to get these",
    "start": "1811570",
    "end": "1818649"
  },
  {
    "text": "files out of the repository out of git itself and so you can you can use a",
    "start": "1818649",
    "end": "1824559"
  },
  {
    "text": "technique called git LFS get LFS does exactly that it takes the binaries out",
    "start": "1824559",
    "end": "1830409"
  },
  {
    "text": "of your git repository and replaces them with a what's called a pointer file that",
    "start": "1830409",
    "end": "1838179"
  },
  {
    "text": "describes where it can find the actual binary itself so what goes into the git",
    "start": "1838179",
    "end": "1845229"
  },
  {
    "text": "repository is this tiny little text file it's just got some metadata and get LFS",
    "start": "1845229",
    "end": "1851200"
  },
  {
    "text": "when you check out the repository git LFS will read this file and use it to",
    "start": "1851200",
    "end": "1857919"
  },
  {
    "text": "locate the the actual binary and so it will basically bring these binaries in",
    "start": "1857919",
    "end": "1863440"
  },
  {
    "text": "to your repository on demand it's it's very clever it's what we recommend",
    "start": "1863440",
    "end": "1868450"
  },
  {
    "text": "people use for large file support",
    "start": "1868450",
    "end": "1874470"
  },
  {
    "text": "right there we go",
    "start": "1881060",
    "end": "1887919"
  },
  {
    "text": "great and of course my VM fell asleep while I was talking so right so get LFS",
    "start": "1888860",
    "end": "1895909"
  },
  {
    "text": "is if you're using it for Windows it's available it actually comes as part of the installer you just need to check",
    "start": "1895909",
    "end": "1902330"
  },
  {
    "text": "that box otherwise it is a separate installation if you're on Mac or on Linux your package manager will have it",
    "start": "1902330",
    "end": "1909980"
  },
  {
    "text": "of course great so so if I so I've got a",
    "start": "1909980",
    "end": "1923210"
  },
  {
    "text": "repository set up already there we go so",
    "start": "1923210",
    "end": "1930409"
  },
  {
    "text": "this has got I think a thousand one megabyte pings checked into it so",
    "start": "1930409",
    "end": "1937100"
  },
  {
    "text": "there's only ten in the most recent version in in head there's only ten of",
    "start": "1937100",
    "end": "1943789"
  },
  {
    "text": "these but there's a thousand overall so right now I'm cloning well a thousand",
    "start": "1943789",
    "end": "1950870"
  },
  {
    "text": "one megabyte pings and it's not going very fast it's actually going faster than I expected conference internet in in Australia I",
    "start": "1950870",
    "end": "1957830"
  },
  {
    "text": "didn't expect to be this fast but it's still not not great so these are just",
    "start": "1957830",
    "end": "1963110"
  },
  {
    "text": "checked in in the normal fashion I've also got the same repository with the same history checked in only this time I",
    "start": "1963110",
    "end": "1970309"
  },
  {
    "text": "used get all FS so if I clone that one instead it's gonna give me the same sort",
    "start": "1970309",
    "end": "1978380"
  },
  {
    "text": "of thing Oh and so that receiving objects went incredibly quickly that's where we were stuck last time now it just pulled down",
    "start": "1978380",
    "end": "1986049"
  },
  {
    "text": "2000 files because it's just those tiny little text files this time those LFS",
    "start": "1986049",
    "end": "1991100"
  },
  {
    "text": "pointer files that describe how to get the contents and then it the next line",
    "start": "1991100",
    "end": "1996590"
  },
  {
    "text": "is filtering content 10 out of 10 so it brought down the 10 files that I have",
    "start": "1996590",
    "end": "2001929"
  },
  {
    "text": "here in my sorry let me go into the repo here in my repository and so you can see",
    "start": "2001929",
    "end": "2010409"
  },
  {
    "text": "let me just if I open up one of them that's the get logo now that's cute",
    "start": "2010409",
    "end": "2017669"
  },
  {
    "text": "so there's another technique that that you could use that some people",
    "start": "2017679",
    "end": "2022750"
  },
  {
    "text": "like where instead of cloning the entire repository you just get the most recent",
    "start": "2022750",
    "end": "2027970"
  },
  {
    "text": "version and at a glance it feels like these are sort of the same technique",
    "start": "2027970",
    "end": "2033840"
  },
  {
    "text": "instead of using LFS you could just commit all your data all your big files normally push it up and then to a",
    "start": "2033840",
    "end": "2041260"
  },
  {
    "text": "shallow clone it's called to get just the most recent version the problem with doing a shallow clone though is that you",
    "start": "2041260",
    "end": "2048158"
  },
  {
    "text": "can't run get log and see anything because you only have that one commit you don't have all of the rest of history and so by using LFS I can still",
    "start": "2048159",
    "end": "2057040"
  },
  {
    "text": "run git log I can also check out",
    "start": "2057040",
    "end": "2066970"
  },
  {
    "text": "previous versions because again with a with a shallow clone I won't have this",
    "start": "2066970",
    "end": "2072550"
  },
  {
    "text": "data now I can go back in time and I can check out old versions I can go all the",
    "start": "2072550",
    "end": "2078490"
  },
  {
    "text": "way back in fact and what'll happen is that get LFS will just page in the",
    "start": "2078490",
    "end": "2085450"
  },
  {
    "text": "missing data right so now if I open this file I think I had a blue background",
    "start": "2085450",
    "end": "2091240"
  },
  {
    "text": "before oops sorry I got a blue background before no I had a red background before now I have a blue",
    "start": "2091240",
    "end": "2097030"
  },
  {
    "text": "background and so I can go back to different versions and now I should have",
    "start": "2097030",
    "end": "2105040"
  },
  {
    "text": "right now I should have that red background yeah there we go so get LFS is a really nice technique",
    "start": "2105040",
    "end": "2112270"
  },
  {
    "text": "for for that",
    "start": "2112270",
    "end": "2117930"
  },
  {
    "text": "great all right so large files are one thing but we actually see a lot of",
    "start": "2120790",
    "end": "2126680"
  },
  {
    "text": "repositories around Microsoft that are just big right the windows repository",
    "start": "2126680",
    "end": "2131840"
  },
  {
    "text": "itself doesn't have a lot of really large files in it it has some but that's",
    "start": "2131840",
    "end": "2137270"
  },
  {
    "text": "not as problem its problem is that it's just big and so we had to come up with",
    "start": "2137270",
    "end": "2145550"
  },
  {
    "text": "some other strategies to cope with that we thought about splitting it up I'm not",
    "start": "2145550",
    "end": "2151700"
  },
  {
    "text": "sure what to do with the 300 gigabyte repository do you split it into 300 one gigabyte repositories that's a pain do",
    "start": "2151700",
    "end": "2157730"
  },
  {
    "text": "you split it into 30 10 gigabyte repositories that now you've got 30 repositories and they're still really",
    "start": "2157730",
    "end": "2164120"
  },
  {
    "text": "big we thought about trying to do some clever things with sub-modules we",
    "start": "2164120",
    "end": "2170270"
  },
  {
    "text": "actually spent a lot of time convinced that we could make some modules not be terrible but we failed that one's on me",
    "start": "2170270",
    "end": "2178930"
  },
  {
    "text": "but fundamentally we needed a solution so again the problem is that when you",
    "start": "2178930",
    "end": "2188090"
  },
  {
    "text": "clone a giant repository you get all of the history and even if you don't do that even if you do do that shallow",
    "start": "2188090",
    "end": "2194330"
  },
  {
    "text": "clone that I was talking about with 4000 developers that gets really expensive",
    "start": "2194330",
    "end": "2199490"
  },
  {
    "text": "really fast and even if you ignore history for a moment even just working",
    "start": "2199490",
    "end": "2205790"
  },
  {
    "text": "in the repository it's really slow when we first looked at Windows we just",
    "start": "2205790",
    "end": "2214820"
  },
  {
    "text": "dumped it into a git repository and said how bad is this gonna be and it was bad it was real bad we cloned it we ran git",
    "start": "2214820",
    "end": "2222890"
  },
  {
    "text": "clone it ran for a couple hours and we were like oh man this is painful and",
    "start": "2222890",
    "end": "2227990"
  },
  {
    "text": "then we realized that it had failed cuz like the network had had gone out so we tried it again and we let it run",
    "start": "2227990",
    "end": "2234110"
  },
  {
    "text": "overnight and 12 hours later we had a repository to work with and it took you",
    "start": "2234110",
    "end": "2239390"
  },
  {
    "text": "know three hours to switch branches it took eight minutes to run git status and",
    "start": "2239390",
    "end": "2244640"
  },
  {
    "text": "that's when we hadn't changed anything so it took 8 minutes to scan the disk and go nothing so this was this was not",
    "start": "2244640",
    "end": "2252560"
  },
  {
    "text": "ideal the the solution that we came up with I",
    "start": "2252560",
    "end": "2259650"
  },
  {
    "text": "thought was crazy but my my colleague Sayid was convinced that it would work and in fact it did it's it's something",
    "start": "2259650",
    "end": "2266190"
  },
  {
    "text": "that he called at the time GB FS the get virtual file system now it's called VFS",
    "start": "2266190",
    "end": "2272790"
  },
  {
    "text": "forget turns out there's another gvfs we didn't do a lot of homework when we were naming it we were just like what are we",
    "start": "2272790",
    "end": "2279510"
  },
  {
    "text": "gonna call it well it's a virtual file system forget let's call it the get virtual file system once we published it",
    "start": "2279510",
    "end": "2285300"
  },
  {
    "text": "we were told by the genome project that there is a genome virtual file system so",
    "start": "2285300",
    "end": "2291330"
  },
  {
    "text": "we changed it to VFS forget you'll still see ggbfs a couple places here so I",
    "start": "2291330",
    "end": "2297900"
  },
  {
    "text": "apologize for not having gotten everything done the idea behind EFS forget is largely",
    "start": "2297900",
    "end": "2305760"
  },
  {
    "text": "that we want to make every command and get run in linear time or you know not",
    "start": "2305760",
    "end": "2314340"
  },
  {
    "text": "quadratic time at least against the number of files that you are working with not just the number of files in the",
    "start": "2314340",
    "end": "2320460"
  },
  {
    "text": "repository so if I'm hacking on notepad I don't care about that scuzzy driver from the 90s I don't care about Xbox I",
    "start": "2320460",
    "end": "2326520"
  },
  {
    "text": "only care about the notepad source and get behaves much closer to the speed",
    "start": "2326520",
    "end": "2333690"
  },
  {
    "text": "that I would expect for the notepad repository and not the entire Windows repository and we were largely pretty",
    "start": "2333690",
    "end": "2340530"
  },
  {
    "text": "successful with this we were able to get the the time that it takes to clone the",
    "start": "2340530",
    "end": "2347850"
  },
  {
    "text": "repository down to 90 seconds which is pretty impressive actually considering",
    "start": "2347850",
    "end": "2353700"
  },
  {
    "text": "it took hours before switching branches takes about 30 seconds running git",
    "start": "2353700",
    "end": "2360150"
  },
  {
    "text": "status takes about eight that is that is really what we measure one of the things",
    "start": "2360150",
    "end": "2366090"
  },
  {
    "text": "we measure most is get status because you run it all the time I don't know if you've ever if you replace your get",
    "start": "2366090",
    "end": "2373680"
  },
  {
    "text": "status command with like a 30-second sleep people drive you absolutely crazy",
    "start": "2373680",
    "end": "2379280"
  },
  {
    "text": "eight is still too slow but we're making",
    "start": "2379280",
    "end": "2384300"
  },
  {
    "text": "headway on that I'm adding a file takes five seconds committing that change takes another",
    "start": "2384300",
    "end": "2389380"
  },
  {
    "text": "five so ten seconds to just add a file and commit it so this is very workable",
    "start": "2389380",
    "end": "2396340"
  },
  {
    "text": "and if you're going wow that's really slow it's actually not that much worse than source Depot was or TF PC you know",
    "start": "2396340",
    "end": "2403180"
  },
  {
    "text": "because a lot of those things things talk to the server right so you've got some network latency involved so this is",
    "start": "2403180",
    "end": "2409690"
  },
  {
    "text": "this is enough for us to have moved the windows team over and we did so the windows team is now entirely using it",
    "start": "2409690",
    "end": "2416980"
  },
  {
    "text": "using the FS forget so we're really happy about that the wavy FS forget works is that instead",
    "start": "2416980",
    "end": "2426940"
  },
  {
    "text": "of running git clone you run gvfs clone that's the only weird command cuz it",
    "start": "2426940",
    "end": "2433270"
  },
  {
    "text": "needs to set some things up and instead of getting the entire repository you get",
    "start": "2433270",
    "end": "2440800"
  },
  {
    "text": "sort of the equivalent of a shallow clone except you don't get any of the files so you get the metadata you get",
    "start": "2440800",
    "end": "2446230"
  },
  {
    "text": "the history of a repository so you get the moat and not even very much of that you get a couple of commits objects you",
    "start": "2446230",
    "end": "2452650"
  },
  {
    "text": "get all of the tree objects those describe the way a repository gets laid",
    "start": "2452650",
    "end": "2458380"
  },
  {
    "text": "out but you get none of the blobs you get none of the actual file contents and as you work with the repository we throw",
    "start": "2458380",
    "end": "2466990"
  },
  {
    "text": "in this this sneaky little layer into into windows above the file system and",
    "start": "2466990",
    "end": "2473920"
  },
  {
    "text": "below you the application layer to intercept calls to files and then we we",
    "start": "2473920",
    "end": "2480970"
  },
  {
    "text": "pretend like they're there and when you open them we actually go and get them so we add you know a normal application",
    "start": "2480970",
    "end": "2487810"
  },
  {
    "text": "just talks straight to the file system using the win32 api s windows has the",
    "start": "2487810",
    "end": "2493150"
  },
  {
    "text": "notion of a filter driver so we plug in at that level and a filter driver",
    "start": "2493150",
    "end": "2499720"
  },
  {
    "text": "basically gets to intercept every win32 api file system call and decide what to",
    "start": "2499720",
    "end": "2505480"
  },
  {
    "text": "do with it this is how your virus scanners work right when you go to open a file your virus scanner can add a",
    "start": "2505480",
    "end": "2510850"
  },
  {
    "text": "filter driver and it can say hold on I'm gonna actually read that file on disk",
    "start": "2510850",
    "end": "2516130"
  },
  {
    "text": "make sure it's safe okay everything's fine I'll get out of the way now instead of",
    "start": "2516130",
    "end": "2521200"
  },
  {
    "text": "doing that we when you enumerate the directory contents we pretend that these",
    "start": "2521200",
    "end": "2528190"
  },
  {
    "text": "files are there we tell the the API to return these files even though they're",
    "start": "2528190",
    "end": "2534490"
  },
  {
    "text": "not actually on disk because we didn't clone them when you actually go to open one of the files you know just whether",
    "start": "2534490",
    "end": "2542560"
  },
  {
    "text": "that's on the command line whether that's in Visual Studio will actually",
    "start": "2542560",
    "end": "2549880"
  },
  {
    "text": "intercept those calls to download the contents from from Visual Studio from",
    "start": "2549880",
    "end": "2555910"
  },
  {
    "text": "Azure repos pardon me and then put the file contents on disk so subsequent",
    "start": "2555910",
    "end": "2562750"
  },
  {
    "text": "reads are fast because the file contents exist but they don't actually need to",
    "start": "2562750",
    "end": "2568200"
  },
  {
    "text": "need to be there the first time you open a file as long as you're on line so",
    "start": "2568200",
    "end": "2573579"
  },
  {
    "text": "we'll do that with with subsequent files too and it's it's surprisingly good",
    "start": "2573579",
    "end": "2580920"
  },
  {
    "text": "downloading files on demand doesn't seem like it would be particularly fast but",
    "start": "2581880",
    "end": "2587800"
  },
  {
    "text": "it works out surprisingly well certainly well enough for the windows team to be",
    "start": "2587800",
    "end": "2594940"
  },
  {
    "text": "using it so I'm gonna there we go don't",
    "start": "2594940",
    "end": "2601000"
  },
  {
    "text": "I have to type that URL so I've got just I've just got a git repository here",
    "start": "2601000",
    "end": "2606010"
  },
  {
    "text": "again this is Lib get - this is the open source project that I work on so there's nothing particularly special about the",
    "start": "2606010",
    "end": "2613510"
  },
  {
    "text": "repositories that VFS forget uses and again it's still called the command line",
    "start": "2613510",
    "end": "2618550"
  },
  {
    "text": "it's still called gvfs for legacy that compact so I'm gonna I'm gonna gvfs",
    "start": "2618550",
    "end": "2624400"
  },
  {
    "text": "clone this down from my asher repo and it's gonna clone just the information",
    "start": "2624400",
    "end": "2632470"
  },
  {
    "text": "again the the it'll say here commits and trees so just the metadata about how the",
    "start": "2632470",
    "end": "2639760"
  },
  {
    "text": "repository is laid out and then it's going to set up the actual filter driver",
    "start": "2639760",
    "end": "2647260"
  },
  {
    "text": "and so I can go into my directory and I'm sure that was really",
    "start": "2647260",
    "end": "2653369"
  },
  {
    "text": "fast usually when the first time when you're under there's just an almost imperceptible lag while it goes and",
    "start": "2653369",
    "end": "2659640"
  },
  {
    "text": "fetches some information out of the git repository let's see if it did know",
    "start": "2659640",
    "end": "2667080"
  },
  {
    "text": "superfast Wow okay but so these files don't actually exist",
    "start": "2667080",
    "end": "2673140"
  },
  {
    "text": "on disk yet they look like they do right there's nothing special this isn't a",
    "start": "2673140",
    "end": "2678690"
  },
  {
    "text": "special command line that needs to know how to talk to BFS per get these just appear to exist and I can even open up one of them there",
    "start": "2678690",
    "end": "2686520"
  },
  {
    "text": "you'll notice a slight lag so what it's done is it's actually downloaded the file contents and put them on disk and I",
    "start": "2686520",
    "end": "2694440"
  },
  {
    "text": "can I can edit this I can make changes to it I can do whatever I want and",
    "start": "2694440",
    "end": "2699960"
  },
  {
    "text": "certainly I interact with my repository as if it's really there I can stop the",
    "start": "2699960",
    "end": "2707070"
  },
  {
    "text": "filter driver I'm gonna gvfs unmount there we go and now we see what's",
    "start": "2707070",
    "end": "2712560"
  },
  {
    "text": "actually behind the curtain so I've got a couple of files VI read the dot editor",
    "start": "2712560",
    "end": "2719310"
  },
  {
    "text": "config that's cool get attributes is needed to know how to put files on disk this readme was the",
    "start": "2719310",
    "end": "2727589"
  },
  {
    "text": "one that I opened and I navigated into the sorcerer so it actually created that but there's nothing else in there so",
    "start": "2727589",
    "end": "2736160"
  },
  {
    "text": "it's it's a surprisingly effective way to avoid having to download the entire",
    "start": "2736160",
    "end": "2743550"
  },
  {
    "text": "repository and it works because most people don't work across the entire windows source tree even the people that",
    "start": "2743550",
    "end": "2750570"
  },
  {
    "text": "were working at a very low level and doing cross-cutting concerns still are only touching handfuls of files at a",
    "start": "2750570",
    "end": "2757050"
  },
  {
    "text": "time not the entire certainly not the entire 300 gigs if I gvfs amount that'll",
    "start": "2757050",
    "end": "2763050"
  },
  {
    "text": "start the filter driver again it'll take",
    "start": "2763050",
    "end": "2769470"
  },
  {
    "text": "just a second and now I've got all those all those files back it's it's it's",
    "start": "2769470",
    "end": "2775470"
  },
  {
    "text": "pretty crazy it's again I didn't think this would work",
    "start": "2775470",
    "end": "2781000"
  },
  {
    "text": "and yet my colleague Sayid absolutely proved me wrong so I'm very impressed",
    "start": "2781000",
    "end": "2786400"
  },
  {
    "text": "and this is this is what enabled the windows team to move over to to get so",
    "start": "2786400",
    "end": "2795190"
  },
  {
    "text": "they use get with gvfs again I was I'm",
    "start": "2795190",
    "end": "2801130"
  },
  {
    "text": "still even as I say it now I'm still surprised how well this works it has a number of advantages like we can",
    "start": "2801130",
    "end": "2806530"
  },
  {
    "text": "basically use stock yet aside from the gvfs clone after that it's a regular git",
    "start": "2806530",
    "end": "2812590"
  },
  {
    "text": "repository because it reads files on disk just like just like notepad or or",
    "start": "2812590",
    "end": "2818500"
  },
  {
    "text": "VI does so that it it doesn't really require any too many special changes the",
    "start": "2818500",
    "end": "2827070"
  },
  {
    "text": "we have been making changes and we we are committing them back we're publishing them back to the git project",
    "start": "2827070",
    "end": "2833770"
  },
  {
    "text": "itself so we're a little bit ahead of that with our version of get but by and",
    "start": "2833770",
    "end": "2840160"
  },
  {
    "text": "large you know when when somebody runs into a problem using yet they look it up on Stack Overflow or they ask a friend",
    "start": "2840160",
    "end": "2847770"
  },
  {
    "text": "they don't need to know something special about gvfs so it's incredibly",
    "start": "2847770",
    "end": "2854320"
  },
  {
    "text": "handy there are limitations of course you've got to be online at least the",
    "start": "2854320",
    "end": "2860170"
  },
  {
    "text": "first time you open a file subsequent uses you can be offline we I've been",
    "start": "2860170",
    "end": "2867040"
  },
  {
    "text": "build building version control systems for a long time we always used to talk about the developer on a plane it feels",
    "start": "2867040",
    "end": "2873430"
  },
  {
    "text": "a little outdated now since most planes have internet but but it does work",
    "start": "2873430",
    "end": "2879580"
  },
  {
    "text": "pretty well even in the you know developer on a plane scenarios where you don't have network access as long as you",
    "start": "2879580",
    "end": "2886599"
  },
  {
    "text": "have gotten the files that you're interested in working in and so a lot of people will sort of proceed what they",
    "start": "2886599",
    "end": "2894160"
  },
  {
    "text": "want so if you're working on notepad you get the notepad derp and that's you've got everything you need right now it",
    "start": "2894160",
    "end": "2900970"
  },
  {
    "text": "only works with get it doesn't work with Lib get to or J get which are alternate",
    "start": "2900970",
    "end": "2906339"
  },
  {
    "text": "libraries I'd like to see that but it's not you know as the Lib get as one of",
    "start": "2906339",
    "end": "2912640"
  },
  {
    "text": "the loop get to maintain errs it's not four high on my priority list so we'll see and some commands don't work you",
    "start": "2912640",
    "end": "2919119"
  },
  {
    "text": "can't run get grep sure not if you've never used get grep you can say get grep foo and it'll show you a list of the",
    "start": "2919119",
    "end": "2925180"
  },
  {
    "text": "files that have the word foo in it that's great in order for that to work",
    "start": "2925180",
    "end": "2930250"
  },
  {
    "text": "the files need to be there so if you ran get grep on a gvfs repository on the",
    "start": "2930250",
    "end": "2936400"
  },
  {
    "text": "windows repository it would download all the files that's not good so we've",
    "start": "2936400",
    "end": "2941920"
  },
  {
    "text": "turned that off frankly if you're trying to grep through 400 gigs of source you probably want indexed fancy search that",
    "start": "2941920",
    "end": "2950650"
  },
  {
    "text": "we have on the server anyway so it's not a big loss it is open source and it is",
    "start": "2950650",
    "end": "2959280"
  },
  {
    "text": "at the moment limited to Windows we're working on a Mac version now the Linux",
    "start": "2959280",
    "end": "2966430"
  },
  {
    "text": "version we're working with github to build so and I don't have an ETA on that",
    "start": "2966430",
    "end": "2972060"
  },
  {
    "text": "and it is largely only on Azure repos",
    "start": "2972060",
    "end": "2977640"
  },
  {
    "text": "there is a bit bucket plugin and github has announced that they're going to",
    "start": "2977640",
    "end": "2984180"
  },
  {
    "text": "support it but they as far as I know they have not yet so it's still heavily",
    "start": "2984180",
    "end": "2989859"
  },
  {
    "text": "windows and azure repos we'd like to see that continue to grow though and the open source community is helping to",
    "start": "2989859",
    "end": "2995650"
  },
  {
    "text": "drive that so that's very exciting that's not the only thing that we needed",
    "start": "2995650",
    "end": "3001740"
  },
  {
    "text": "to do though we actually have to make changes to get itself and a lot of this",
    "start": "3001740",
    "end": "3008400"
  },
  {
    "text": "is around assumptions that were made about the size of repositories that",
    "start": "3008400",
    "end": "3013560"
  },
  {
    "text": "would exist when a quick history lesson I'm sure many of you know this the the",
    "start": "3013560",
    "end": "3020609"
  },
  {
    "text": "git and get itself was built for was",
    "start": "3020609",
    "end": "3027480"
  },
  {
    "text": "built by Linus Torvalds to build to manage the Linux kernel and so largely",
    "start": "3027480",
    "end": "3035390"
  },
  {
    "text": "it reflects that ecosystem and so as",
    "start": "3035390",
    "end": "3042060"
  },
  {
    "text": "long as git could handle the Linux kernel itself that was considered you know probably good enough",
    "start": "3042060",
    "end": "3047590"
  },
  {
    "text": "not good enough for us unfortunately so we actually have had a really amazing",
    "start": "3047590",
    "end": "3053590"
  },
  {
    "text": "hire on the team Derek Stoli and he's written about a lot",
    "start": "3053590",
    "end": "3060130"
  },
  {
    "text": "of the changes that he's made to get to enable it to to go faster Derek was a",
    "start": "3060130",
    "end": "3067140"
  },
  {
    "text": "was a mathematician before he became a professional programmer and he's actually a graph theorist so perfect for",
    "start": "3067140",
    "end": "3075340"
  },
  {
    "text": "working on get so somebody coming in with knowledge of complexity theory and",
    "start": "3075340",
    "end": "3081730"
  },
  {
    "text": "graph theory is amazing and so a lot of these things are just basic computer",
    "start": "3081730",
    "end": "3088090"
  },
  {
    "text": "science II kind of changes if there's a if there's a function that's quadratic",
    "start": "3088090",
    "end": "3093360"
  },
  {
    "text": "can we reduce that to something simpler so there's a lot of time spent sitting",
    "start": "3093360",
    "end": "3099790"
  },
  {
    "text": "in a profiler identifying hotspots and just aggressively going in and reducing",
    "start": "3099790",
    "end": "3105070"
  },
  {
    "text": "those we've made a lot of headway there there's also some some problems when",
    "start": "3105070",
    "end": "3113650"
  },
  {
    "text": "bringing it over into the world of Windows because again it was built on",
    "start": "3113650",
    "end": "3119850"
  },
  {
    "text": "Linux for Linux primarily by people who knew Linux there's not a lot of people",
    "start": "3119850",
    "end": "3126610"
  },
  {
    "text": "working on the core good application itself that really are familiar deeply",
    "start": "3126610",
    "end": "3132850"
  },
  {
    "text": "with Windows and so git for Windows exists as a separate Fork and is managed separately and there's a lot of work",
    "start": "3132850",
    "end": "3138790"
  },
  {
    "text": "that goes into it to make it work because yet it turns out is a lot of",
    "start": "3138790",
    "end": "3144900"
  },
  {
    "text": "well it's a lot of things it's in the in the spirit of a UNIX application where",
    "start": "3144900",
    "end": "3151510"
  },
  {
    "text": "you have small separate programs that do their own things",
    "start": "3151510",
    "end": "3156850"
  },
  {
    "text": "if you run get space add what that really does is it goes and finds an application called get - add on the",
    "start": "3156850",
    "end": "3163090"
  },
  {
    "text": "system and so there's a get - add there's a get - commit there's a get -",
    "start": "3163090",
    "end": "3169840"
  },
  {
    "text": "status and all of these programs will actually talk to each other you know",
    "start": "3169840",
    "end": "3174880"
  },
  {
    "text": "like good unix programs often do and that's great but not so much on Windows",
    "start": "3174880",
    "end": "3181010"
  },
  {
    "text": "reason get for Windows is what it is is because some of these applications are",
    "start": "3181010",
    "end": "3186140"
  },
  {
    "text": "not native code they're written in shell scripts for example and so you need a",
    "start": "3186140",
    "end": "3191840"
  },
  {
    "text": "bash interpreter so when you download and install I get from Windows you get bash and bash isn't very useful",
    "start": "3191840",
    "end": "3199820"
  },
  {
    "text": "on its own because shell scripts do things like call awk and said and cut and all these other three-letter Unix",
    "start": "3199820",
    "end": "3206360"
  },
  {
    "text": "commands and so those need to come along for the ride as well what's worse though is something that's",
    "start": "3206360",
    "end": "3213830"
  },
  {
    "text": "sort of different about Windows compared",
    "start": "3213830",
    "end": "3219380"
  },
  {
    "text": "to your typical UNIX system so let's see",
    "start": "3219380",
    "end": "3227090"
  },
  {
    "text": "if we can get back to window great and that is executing processes creating new",
    "start": "3227090",
    "end": "3233090"
  },
  {
    "text": "processes turns out it's a little bit slower on Windows than it is on UNIX so here I've",
    "start": "3233090",
    "end": "3240980"
  },
  {
    "text": "got a rather simple application this is a simple C application it's gonna call",
    "start": "3240980",
    "end": "3247810"
  },
  {
    "text": "this other command no op eggsy a thousand times just gonna execute it a",
    "start": "3247810",
    "end": "3254420"
  },
  {
    "text": "thousand times in a loop what is no FX you do well as the name suggests not",
    "start": "3254420",
    "end": "3261110"
  },
  {
    "text": "very much return zero simplest C program you can have right I guess I could have",
    "start": "3261110",
    "end": "3267560"
  },
  {
    "text": "made it simpler by writing in an assembly or something but no simplest C program you can have so let me let me go",
    "start": "3267560",
    "end": "3276380"
  },
  {
    "text": "ahead and start that up I'm gonna I can remember my PowerShell yeah exactly I",
    "start": "3276380",
    "end": "3284330"
  },
  {
    "text": "see great so while that's going let's go do the same thing on Mac OS I have the",
    "start": "3284330",
    "end": "3291530"
  },
  {
    "text": "exact same program exact dot C no op dot",
    "start": "3291530",
    "end": "3297440"
  },
  {
    "text": "C cool and we'll time that one",
    "start": "3297440",
    "end": "3304180"
  },
  {
    "text": "about four seconds okay I'm let's let's do the same thing on Linux where it was",
    "start": "3307550",
    "end": "3316620"
  },
  {
    "text": "created okay there we go oh that was",
    "start": "3316620",
    "end": "3325820"
  },
  {
    "text": "that was unbelievably fast I don't even believe it was doing any work let's put",
    "start": "3325820",
    "end": "3331230"
  },
  {
    "text": "a printf in here I wanted to avoid IO cuz IO can slow things down okay and",
    "start": "3331230",
    "end": "3338550"
  },
  {
    "text": "we'll build it and we'll throw in some optimization it's got some warnings we",
    "start": "3338550",
    "end": "3344520"
  },
  {
    "text": "can ignore and yeah for real it's doing work in a second okay",
    "start": "3344520",
    "end": "3350730"
  },
  {
    "text": "well oh yeah the Windows one isn't even done yet so when you have an application",
    "start": "3350730",
    "end": "3360000"
  },
  {
    "text": "a system like get that interacts with other applications just by calling them",
    "start": "3360000",
    "end": "3366510"
  },
  {
    "text": "and parsing their output through standard out or standard end you can",
    "start": "3366510",
    "end": "3372090"
  },
  {
    "text": "understand how this could get slower like a lot slower rebase is one of the",
    "start": "3372090",
    "end": "3377940"
  },
  {
    "text": "really guilty parties as is stache they're both heavily shell scripted and so the maintainer of get for Windows",
    "start": "3377940",
    "end": "3385730"
  },
  {
    "text": "Janish inulin has been going through and changing this to to be more see more",
    "start": "3385730",
    "end": "3393240"
  },
  {
    "text": "native code and less shell scripts because again shell scripts are slow there we go 110 seconds yeah 110 versus",
    "start": "3393240",
    "end": "3402990"
  },
  {
    "text": "one so you can understand why why he's doing that so rebase and stache were recently",
    "start": "3402990",
    "end": "3410310"
  },
  {
    "text": "rewritten as c native code as quote",
    "start": "3410310",
    "end": "3415440"
  },
  {
    "text": "unquote built-ins and you can enable that in get for windows 2.19 which just came out the other day it's still",
    "start": "3415440",
    "end": "3421830"
  },
  {
    "text": "experimental gotta warn eeeh but it's a big performance boost and my computer's",
    "start": "3421830",
    "end": "3427800"
  },
  {
    "text": "fans are all running just from trying to exact a couple processes on Windows so",
    "start": "3427800",
    "end": "3434060"
  },
  {
    "text": "so yeah so not not an ideal situation so it is",
    "start": "3434060",
    "end": "3440359"
  },
  {
    "text": "something that we've had to invest in at Microsoft and I'm really happy to see that we leveraged google Summer of Code",
    "start": "3440359",
    "end": "3448430"
  },
  {
    "text": "as well I'm really happy about that so pretty much out of time I'd be happy",
    "start": "3448430",
    "end": "3456079"
  },
  {
    "text": "to if you have questions or just want to chat about get and performance or get and scale I would be very happy to hang",
    "start": "3456079",
    "end": "3464480"
  },
  {
    "text": "out and talk feel free to hit me up on Twitter also I'm at a Thompson if you",
    "start": "3464480",
    "end": "3470930"
  },
  {
    "text": "were at very dorans talk yesterday he mentioned that his Twitter is mostly swearing in dog pictures and I'll make",
    "start": "3470930",
    "end": "3476599"
  },
  {
    "text": "the same same caveat just before you jump in and click the follow button but",
    "start": "3476599",
    "end": "3483320"
  },
  {
    "text": "otherwise yeah thanks so much for coming out and feel free to be in touch [Applause]",
    "start": "3483320",
    "end": "3490449"
  }
]