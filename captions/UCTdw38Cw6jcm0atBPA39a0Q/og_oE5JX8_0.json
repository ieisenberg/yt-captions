[
  {
    "text": "okay hello everyone and welcome to our presentation our title for today is multi container",
    "start": "2210",
    "end": "9140"
  },
  {
    "text": "applications with dotnet core on kubernetes and will show you throughout the",
    "start": "9140",
    "end": "15410"
  },
  {
    "text": "presentation an application developed for hofland which is a demo application",
    "start": "15410",
    "end": "20500"
  },
  {
    "text": "so Hobson is power and Grid company located here in Oslo or in greater Oslo",
    "start": "20500",
    "end": "27350"
  },
  {
    "text": "if you want and we'll show this demo application how it corresponds to the",
    "start": "27350",
    "end": "33170"
  },
  {
    "text": "entire IT infrastructure and architecture of huxley so this will be",
    "start": "33170",
    "end": "38720"
  },
  {
    "text": "our agenda for today so first stola hair which is the chief technology officer in",
    "start": "38720",
    "end": "45230"
  },
  {
    "text": "hofland we'll take you through the background and strategy of hustling and then we'll further just dig a little bit",
    "start": "45230",
    "end": "52700"
  },
  {
    "text": "deeper into the technical stuff we'll show you a framework called Luna form this is something that hustlin has",
    "start": "52700",
    "end": "60170"
  },
  {
    "text": "created developed on their own it's basically consists of terraform",
    "start": "60170",
    "end": "67549"
  },
  {
    "text": "which which is an open source infrastructure as code and moonshine which is also a framework developed for",
    "start": "67549",
    "end": "74600"
  },
  {
    "text": "poplin moonshine encrypts application secrets and decrypted on the fly in",
    "start": "74600",
    "end": "82070"
  },
  {
    "text": "runtime when you start up your application will go further into that later then we'll show you the",
    "start": "82070",
    "end": "89210"
  },
  {
    "text": "development of an application from just starting to actually from scratch starting to develop an application with",
    "start": "89210",
    "end": "97070"
  },
  {
    "text": "the creation of infrastructure coding and stuff like that we'll show you an angular to clients and we'll show you a",
    "start": "97070",
    "end": "103939"
  },
  {
    "text": "dotnet core REST API service and finally we'll deploy all of this as a multi",
    "start": "103939",
    "end": "109820"
  },
  {
    "text": "container application on kubernetes so first just briefly about us so I'm not",
    "start": "109820",
    "end": "118130"
  },
  {
    "text": "consultant working for a consultancy firm called competence Aaron Oslo I work mainly as an architect and developer and",
    "start": "118130",
    "end": "125680"
  },
  {
    "text": "if some of you want to reach me afterwards so you can either come up here and talk with me or you can give it",
    "start": "125680",
    "end": "132529"
  },
  {
    "text": "more easy way and contact me here if you and still all the we'll take it from here yes hello",
    "start": "132529",
    "end": "138540"
  },
  {
    "text": "so this title technology chief I've ever gotten from Agnes I'm a regular that I think I'll show",
    "start": "138540",
    "end": "144100"
  },
  {
    "text": "with my boss I'm also a developer and architect and I'm alone almost only one",
    "start": "144100",
    "end": "151210"
  },
  {
    "text": "that's employed in Absalom the rest are consultants so we're looking at least mentioned reflected in",
    "start": "151210",
    "end": "157120"
  },
  {
    "text": "the future we'll hire people so here yeah okay",
    "start": "157120",
    "end": "162480"
  },
  {
    "text": "I'll say something about the background just briefly just to say where we are we're coming from and this is where I",
    "start": "162480",
    "end": "170200"
  },
  {
    "text": "got to my boss which is knit and the point of this is to tell you that this business is over 100 years old and for",
    "start": "170200",
    "end": "177280"
  },
  {
    "text": "the first hundred years nothing happened except at the net stations were progressively getting out there and then",
    "start": "177280",
    "end": "183490"
  },
  {
    "text": "what they're telling that the next five years that's starting two years ago more",
    "start": "183490",
    "end": "189160"
  },
  {
    "text": "stuff will happen in this business I think worldwide and ever before mostly because of regulation from the",
    "start": "189160",
    "end": "195510"
  },
  {
    "text": "government so the big driver right now the AMS project which is the bit",
    "start": "195510",
    "end": "201370"
  },
  {
    "text": "automatic meters and have where oh woman every business in Norway so that's like the driver for all this technology we",
    "start": "201370",
    "end": "207580"
  },
  {
    "text": "are now talking about the recent history when it comes to what we are you know",
    "start": "207580",
    "end": "215050"
  },
  {
    "text": "like programming it's like this before 2012 we just bought software",
    "start": "215050",
    "end": "220209"
  },
  {
    "text": "nothing not a single line of code was ever written in option and that continued also after 2012 but then they",
    "start": "220209",
    "end": "226870"
  },
  {
    "text": "were we became uh sure customers but",
    "start": "226870",
    "end": "232030"
  },
  {
    "text": "only having virtual machines in the cloud so the modern world started for us",
    "start": "232030",
    "end": "238420"
  },
  {
    "text": "in the middle of 2014 they wrote our first line of code on the full dotnet",
    "start": "238420",
    "end": "243720"
  },
  {
    "text": "framework and with a dash of cloud services or windows services we also",
    "start": "243720",
    "end": "251020"
  },
  {
    "text": "made a decision to try to go micro service we know about the mood that was our decision so this has been going on",
    "start": "251020",
    "end": "257169"
  },
  {
    "text": "until late middle year ago about what does net",
    "start": "257169",
    "end": "262930"
  },
  {
    "text": "score came along which we immediately and fell in love with started the using",
    "start": "262930",
    "end": "268180"
  },
  {
    "text": "now we're using does make for and those doctor or in 2006 similarly those doctor",
    "start": "268180",
    "end": "273370"
  },
  {
    "text": "technologies we of course still have what does now what we become that legacy code from 2014 and we also have this big",
    "start": "273370",
    "end": "281680"
  },
  {
    "text": "milestone where we established new team where among this is one of the key players in the another last year for the",
    "start": "281680",
    "end": "288310"
  },
  {
    "text": "district heating business so now we have two teams and we try to develop in the",
    "start": "288310",
    "end": "295509"
  },
  {
    "text": "same way and the first full application container based we released in April this year and we also after that have",
    "start": "295509",
    "end": "303060"
  },
  {
    "text": "gone from sworn to kubernetes so when I'm now talking about communities where just one and a half months in have an",
    "start": "303060",
    "end": "312069"
  },
  {
    "text": "introduction so it's still fairly new on kubernetes quickly this is very new",
    "start": "312069",
    "end": "319000"
  },
  {
    "text": "problem just this is the anchored all the way up to the top in our computer",
    "start": "319000",
    "end": "324819"
  },
  {
    "text": "which is very new that we are going to develop everything that's core business ourselves or potentially of course the",
    "start": "324819",
    "end": "332979"
  },
  {
    "text": "consultants but we do not control we're going to have the code in our code wrapper and otherwise you're going to",
    "start": "332979",
    "end": "339789"
  },
  {
    "text": "buy stuff but way to legal to customize that that's one of our main pains now",
    "start": "339789",
    "end": "344830"
  },
  {
    "text": "it's all the stuff that's customized and to us as developers this translates this",
    "start": "344830",
    "end": "351190"
  },
  {
    "text": "when we are going to code we want continuous integration and continuous",
    "start": "351190",
    "end": "356199"
  },
  {
    "text": "delivery and that's I think the essence of what we were trying to show you today is the way we're trying to do continuous",
    "start": "356199",
    "end": "362590"
  },
  {
    "text": "integration and delivery and first that means that the infrastructure is code it",
    "start": "362590",
    "end": "368199"
  },
  {
    "text": "means that you can deploy and everything and what will especially focus on because we made ourselves it's the",
    "start": "368199",
    "end": "373840"
  },
  {
    "text": "secure and house we have negative secret to say is one of the small but important things you need in order to get this",
    "start": "373840",
    "end": "379960"
  },
  {
    "text": "going also naming conventions in structural code resources that's also thing we did I should have known",
    "start": "379960",
    "end": "385900"
  },
  {
    "text": "timeline because we start with a sure without a thought everybody did whatever they wanted we are",
    "start": "385900",
    "end": "391699"
  },
  {
    "text": "subscriptions resource groups and no air so me and a milder colleague I think we",
    "start": "391699",
    "end": "396919"
  },
  {
    "text": "had this project I went through and saved hundreds of thousands of crores per delete and stuff because we didn't",
    "start": "396919",
    "end": "404810"
  },
  {
    "text": "have the naming conventions didn't know what things were also mentioning since",
    "start": "404810",
    "end": "414289"
  },
  {
    "text": "we have this history over working on a sure we know these platform as a service",
    "start": "414289",
    "end": "420159"
  },
  {
    "text": "components on Azure and we are already invested so now when we started doing",
    "start": "420159",
    "end": "425719"
  },
  {
    "text": "containers instead of old-fashioned cloud services we are doing it state in a stateless way because that's the",
    "start": "425719",
    "end": "433039"
  },
  {
    "text": "history aware to be frank don't know that much yet about Satan in directly in",
    "start": "433039",
    "end": "438139"
  },
  {
    "text": "containers but it has given us the ability to move easily so we switch from sworn to given it is not a problem we",
    "start": "438139",
    "end": "444409"
  },
  {
    "text": "are also currently running on a Sherpa some stuff for the utility part but we in the district heating we're running on",
    "start": "444409",
    "end": "450830"
  },
  {
    "text": "Google cloud platform which is what we show today so this statelessness made this very easy to move to the core I",
    "start": "450830",
    "end": "461360"
  },
  {
    "text": "think at the first time I saw it we just fell in love immediately I think in my mind must be the future does not I can't",
    "start": "461360",
    "end": "468110"
  },
  {
    "text": "see a and I can't see any way around that so with the jump straight ahead and",
    "start": "468110",
    "end": "475189"
  },
  {
    "text": "they use it from June I think you near last year that the first person came",
    "start": "475189",
    "end": "480430"
  },
  {
    "text": "which means that we are cross-platform we are hard pcs but we build on the next",
    "start": "480430",
    "end": "485930"
  },
  {
    "text": "we run on Linux it also means that we can leverage what we already know because we are talking to developers and",
    "start": "485930",
    "end": "492259"
  },
  {
    "text": "there has been some problems I think it's hearing better we are the main problem is all the legacy assemblies",
    "start": "492259",
    "end": "497930"
  },
  {
    "text": "everything I don't run yet and open core so a long period for instance FM tab which we use a lot there wasn't a lot",
    "start": "497930",
    "end": "504169"
  },
  {
    "text": "before it so we had to write our more low-level protocol thing and then we had",
    "start": "504169",
    "end": "509479"
  },
  {
    "text": "that running for one month then plug weekend so still early days but I I'm",
    "start": "509479",
    "end": "515390"
  },
  {
    "text": "betting that this is the future quickly",
    "start": "515390",
    "end": "520818"
  },
  {
    "text": "you'll see this is the most that we have this decided on this we are very liberal when it comes to we",
    "start": "520819",
    "end": "527860"
  },
  {
    "text": "have subscriptions we make subscriptions all the time every application it's a subscription this is for not dr.",
    "start": "527860",
    "end": "534670"
  },
  {
    "text": "Portillo forever you know storage queueing over the inertia we make separate subscriptions and we'll use",
    "start": "534670",
    "end": "542319"
  },
  {
    "text": "resource groups inside the subscriptions to in order to have the different versions for the full application so",
    "start": "542319",
    "end": "549129"
  },
  {
    "text": "this is a approach we just learn from another big year and maybe a probably the biggest user in Lhasa area they did",
    "start": "549129",
    "end": "555730"
  },
  {
    "text": "this and we if they do it like this we'll do it like this so that's you just have to decide on some convention and",
    "start": "555730",
    "end": "562060"
  },
  {
    "text": "the main part area very important is that it's strictly forbidden to do anything by hand so everything when we",
    "start": "562060",
    "end": "568959"
  },
  {
    "text": "have this inside subscriptions is include circulars code and then we have",
    "start": "568959",
    "end": "575800"
  },
  {
    "text": "a playground subscription where you can try stuff to be prepared that I can be deleted and you know in the next second",
    "start": "575800",
    "end": "583620"
  },
  {
    "text": "yes and that was the background strategy / - thank you okay so now you have maybe",
    "start": "583769",
    "end": "592540"
  },
  {
    "text": "a kind of decent overview of the how the strategy is what we're trying to achieve",
    "start": "592540",
    "end": "598240"
  },
  {
    "text": "here so now we'll dig more into the technical stuff so I'll start off by",
    "start": "598240",
    "end": "603579"
  },
  {
    "text": "showing you a demo of this Luna form framework and how we start from scratch",
    "start": "603579",
    "end": "608980"
  },
  {
    "text": "from okay we have to develop an application now we start from scratch we",
    "start": "608980",
    "end": "614379"
  },
  {
    "text": "want to create some infrastructure write some code and we'll take it from there",
    "start": "614379",
    "end": "619689"
  },
  {
    "text": "okay so first a little bit background about Luna form so it consists as I said",
    "start": "619689",
    "end": "626050"
  },
  {
    "text": "above the terraform and moonshine so Tara form is this open source infrastructure as code library you can",
    "start": "626050",
    "end": "633309"
  },
  {
    "text": "contribute yourself it has a lot of different providers included into the",
    "start": "633309",
    "end": "639069"
  },
  {
    "text": "framework and if you want to read more you can go visit their web page",
    "start": "639069",
    "end": "645930"
  },
  {
    "text": "moonshine is our own developed framework in hustling what moonshine does it is",
    "start": "646079",
    "end": "652689"
  },
  {
    "text": "that it takes application secrets and it encrypts it with the",
    "start": "652689",
    "end": "658630"
  },
  {
    "text": "keep air that you provide it and it stores it in the implementation we have",
    "start": "658630",
    "end": "665290"
  },
  {
    "text": "at the moment which is a table storage implementation in usher and then we can refer to these secrets by an annotation",
    "start": "665290",
    "end": "672970"
  },
  {
    "text": "language that we have created in moonshine so we never refer directly to application secrets we refer to this",
    "start": "672970",
    "end": "679180"
  },
  {
    "text": "annotation in our config files for our applications so when we fire up a",
    "start": "679180",
    "end": "685420"
  },
  {
    "text": "container containing our code then moonshine will go directly into the encrypted store and retrieve the values",
    "start": "685420",
    "end": "692290"
  },
  {
    "text": "for us and decrypt it with the keys that we provide so Luna form is a combination",
    "start": "692290",
    "end": "699340"
  },
  {
    "text": "of this terraform in moonshine so what luna from does in runtime is",
    "start": "699340",
    "end": "704470"
  },
  {
    "text": "that it runs the terraform apply command which is a terra forms way of actually",
    "start": "704470",
    "end": "710980"
  },
  {
    "text": "creating the infrastructure that you have witness code then moonshine takes",
    "start": "710980",
    "end": "717250"
  },
  {
    "text": "over and the output from this run of infrastructure creation will be",
    "start": "717250",
    "end": "723100"
  },
  {
    "text": "encrypted and stored into moonshine so all of this terraform code and Luna form",
    "start": "723100",
    "end": "731470"
  },
  {
    "text": "stuff is checked into a known repository that we suffix with application so for",
    "start": "731470",
    "end": "739120"
  },
  {
    "text": "instance in this case we're going to create a demo application which we just called demo so then we'll suffix it with",
    "start": "739120",
    "end": "746710"
  },
  {
    "text": "application so our repository will be demo application and here we store all of the stuff needed to create",
    "start": "746710",
    "end": "753550"
  },
  {
    "text": "infrastructure to deploy all our containers in order to run our application smoothly so for instance",
    "start": "753550",
    "end": "760690"
  },
  {
    "text": "throughout the demo you'll see terraform files and kubernetes files we'll get",
    "start": "760690",
    "end": "766690"
  },
  {
    "text": "into that soon so we'll soon just jump right into a demo and we'll show just a",
    "start": "766690",
    "end": "773290"
  },
  {
    "text": "very small application it's basically a front-end client where you can write in",
    "start": "773290",
    "end": "778810"
  },
  {
    "text": "your name and click the button and it will just register how many times a given name has clicked the button and it",
    "start": "778810",
    "end": "785380"
  },
  {
    "text": "will of course store it down to our API which further stores it back into",
    "start": "785380",
    "end": "790750"
  },
  {
    "text": "table storage annasher so this is basically the architecture that you see",
    "start": "790750",
    "end": "797640"
  },
  {
    "text": "so we have this developer sitting in its local its local hiss or her local",
    "start": "797640",
    "end": "804520"
  },
  {
    "text": "environment and okay so you start from scratch and you write in terraform code",
    "start": "804520",
    "end": "810070"
  },
  {
    "text": "because you want to test your entire integration of databases and stuff so",
    "start": "810070",
    "end": "815770"
  },
  {
    "text": "you have to write okay I need a table storage storage account in Asscher so you write code for that and when you run",
    "start": "815770",
    "end": "823540"
  },
  {
    "text": "this in Luna form it will create what you have said terraform to create and",
    "start": "823540",
    "end": "829240"
  },
  {
    "text": "then it will take all the output and persist it in moonshine as encrypted values and will now have this down here",
    "start": "829240",
    "end": "837670"
  },
  {
    "text": "this demo application repository where these terraform files and Luna form",
    "start": "837670",
    "end": "844210"
  },
  {
    "text": "stuff will be located so we'll just jump right into a demo so before we go on all",
    "start": "844210",
    "end": "851680"
  },
  {
    "text": "of the demos that you'll see today are recorded videos because then we know that it will actually work and there's",
    "start": "851680",
    "end": "858850"
  },
  {
    "text": "no bugs or growers take and everything yeah the first thing okay so we'll just",
    "start": "858850",
    "end": "864820"
  },
  {
    "text": "jump right into this so okay yeah very nice code here",
    "start": "864820",
    "end": "871770"
  },
  {
    "text": "sorry about that okay so now we're into the azure portal of hustling so what",
    "start": "871770",
    "end": "879640"
  },
  {
    "text": "you'll see here is the first thing technical thing we'll start off with is the subscription this is the the",
    "start": "879640",
    "end": "887140"
  },
  {
    "text": "technical stuff that developers I kind of take into consideration so here we",
    "start": "887140",
    "end": "892720"
  },
  {
    "text": "have an empty subscription for our demo application so we have just call this also demo and you can see here there's",
    "start": "892720",
    "end": "902050"
  },
  {
    "text": "no resource groups yet so because resource groups are basically a container for all your resources that",
    "start": "902050",
    "end": "909130"
  },
  {
    "text": "you want to work on so instead of clicking this create resource button sorry a great resource group button will",
    "start": "909130",
    "end": "916750"
  },
  {
    "text": "of course create this automatically by applying terraform so we'll just go",
    "start": "916750",
    "end": "923080"
  },
  {
    "text": "right into our demo vacation repository which I mentioned previously this is where all the",
    "start": "923080",
    "end": "928690"
  },
  {
    "text": "infrastructure code and deployment code will will be written so here we're into",
    "start": "928690",
    "end": "934470"
  },
  {
    "text": "IDE we have this source folder and terraform folder so at this moment of",
    "start": "934470",
    "end": "940899"
  },
  {
    "text": "time we just want to create a dev resource group for development because we want to test our entire integration",
    "start": "940899",
    "end": "946360"
  },
  {
    "text": "so here you can see we have given Luna from files that we need we have the terraform files so now we're into the",
    "start": "946360",
    "end": "952810"
  },
  {
    "text": "main terraform file which specifies what resources will be created so you can see",
    "start": "952810",
    "end": "961120"
  },
  {
    "text": "we want to create a resource group because that's basically a group for all our resources if you don't have one we",
    "start": "961120",
    "end": "967899"
  },
  {
    "text": "can't create any resources to work on and further we'll also create a storage",
    "start": "967899",
    "end": "974020"
  },
  {
    "text": "account which is an account for storage basically so you can have blob storage table Storage bunch of different stuff",
    "start": "974020",
    "end": "980110"
  },
  {
    "text": "we'll have a table storage implementation here too today and we can",
    "start": "980110",
    "end": "987160"
  },
  {
    "text": "also go into this variables file and we you can see the the text I've",
    "start": "987160",
    "end": "992589"
  },
  {
    "text": "highlighted here is basically a variable defined in the variables file we won't",
    "start": "992589",
    "end": "997899"
  },
  {
    "text": "go into this file today because it contains all of our secrets so you won't see that today so we'll just skip right",
    "start": "997899",
    "end": "1005579"
  },
  {
    "text": "into the output file because this is very important because as I mentioned previously terraform outputs what you",
    "start": "1005579",
    "end": "1011820"
  },
  {
    "text": "tell it output so in this case we want to output all the different stuff we need for our application to run because",
    "start": "1011820",
    "end": "1018270"
  },
  {
    "text": "we need it in our config file but we don't want the actual secrets we want",
    "start": "1018270",
    "end": "1023430"
  },
  {
    "text": "the encrypted secrets to moonshine so this is what terraform will output as",
    "start": "1023430",
    "end": "1029428"
  },
  {
    "text": "plain text so it will just output all of our secrets right into the console when",
    "start": "1029429",
    "end": "1034500"
  },
  {
    "text": "we run it the blue uniform will take all of this and encrypt it into moonshine for us so we can just go into our",
    "start": "1034500",
    "end": "1043620"
  },
  {
    "text": "development folder for terraform so there we'll just make sure that we're in this folder and we have these files and",
    "start": "1043620",
    "end": "1050670"
  },
  {
    "text": "now we can run terraform in order to just show you the output of",
    "start": "1050670",
    "end": "1058100"
  },
  {
    "text": "the terraform run command usually we just run Luna forum right away because",
    "start": "1058100",
    "end": "1063350"
  },
  {
    "text": "Luna forum would take all of the output and encrypted into moonshine and you'll never see the plaintext secrets but just",
    "start": "1063350",
    "end": "1070100"
  },
  {
    "text": "in order to show you how it works we'll just run the terraform app icon on first",
    "start": "1070100",
    "end": "1075190"
  },
  {
    "text": "so terraform apply we'll run this one this will usually take a little bit of",
    "start": "1075190",
    "end": "1082970"
  },
  {
    "text": "time so I'll just speed up a little bit okay so now you can see it has created a",
    "start": "1082970",
    "end": "1090679"
  },
  {
    "text": "storage account here a resource group here and our storage account name is here so now you can see it's still",
    "start": "1090679",
    "end": "1097850"
  },
  {
    "text": "creating our storage account so you can see how many seconds have elapsed",
    "start": "1097850",
    "end": "1104169"
  },
  {
    "text": "30 seconds should be done soon okay so here is the output of terraform so you",
    "start": "1106030",
    "end": "1114380"
  },
  {
    "text": "have this storage account key which is basically our plaintext storage account",
    "start": "1114380",
    "end": "1119419"
  },
  {
    "text": "key which we don't want anyone to know about so what Luna firm does is that it takes",
    "start": "1119419",
    "end": "1125030"
  },
  {
    "text": "this output it encrypts it and it stores it into moonshine so now we have run",
    "start": "1125030",
    "end": "1131270"
  },
  {
    "text": "this terraform apartment and we didn't have any resource groups prior to this so we'll just go right ahead and refresh",
    "start": "1131270",
    "end": "1138679"
  },
  {
    "text": "and hopefully we have gotten a new resource group which we have so we have now a development resource group in",
    "start": "1138679",
    "end": "1145400"
  },
  {
    "text": "Azure for our demo so we can go ahead and click into this just make sure that with",
    "start": "1145400",
    "end": "1151190"
  },
  {
    "text": "our storage account was created as well so we'll just scroll down here okay so",
    "start": "1151190",
    "end": "1160340"
  },
  {
    "text": "here you can see we have a storage account postman demo dab which was the name that we specified in our telephone",
    "start": "1160340",
    "end": "1166940"
  },
  {
    "text": "files okay so so far so good so we can go back into here and now we",
    "start": "1166940",
    "end": "1174650"
  },
  {
    "text": "want to take all these secrets it's basically just one secret but we want the other variables as well to refer to",
    "start": "1174650",
    "end": "1180799"
  },
  {
    "text": "in moonshine because let's say you have a production storage account in a test",
    "start": "1180799",
    "end": "1186590"
  },
  {
    "text": "storage account we want to version all of these secrets or variables if you",
    "start": "1186590",
    "end": "1191720"
  },
  {
    "text": "want to a given environment so for if we say now we've run in the dev environment",
    "start": "1191720",
    "end": "1196909"
  },
  {
    "text": "then our storage account name is awesome demo depth if we run for production it's",
    "start": "1196909",
    "end": "1202010"
  },
  {
    "text": "awesome demo pod so we just want to have all of these injected into moonshine so",
    "start": "1202010",
    "end": "1208130"
  },
  {
    "text": "what we do then is that we can go into our moonshine table storage which is where our secrets will be encrypted so",
    "start": "1208130",
    "end": "1216500"
  },
  {
    "text": "this is just a cloud Explorer into a sure we have this config values table",
    "start": "1216500",
    "end": "1222110"
  },
  {
    "text": "and we can just refresh it to make sure that there are no entities area and when",
    "start": "1222110",
    "end": "1227450"
  },
  {
    "text": "today's cool okay so what we want to do now is run Luna form and what Luna form",
    "start": "1227450",
    "end": "1233510"
  },
  {
    "text": "does is that it first run this Tyra form apply that we have just run here but",
    "start": "1233510",
    "end": "1238580"
  },
  {
    "text": "they will do it integrated into the Luna phone framework but now that we have run it it will just check that okay it has",
    "start": "1238580",
    "end": "1244940"
  },
  {
    "text": "already been run there are no changes so it'll just skip that step so now we run",
    "start": "1244940",
    "end": "1249950"
  },
  {
    "text": "the Luna from command and now it calls terraform but nothing has happened there",
    "start": "1249950",
    "end": "1255320"
  },
  {
    "text": "so it won't run it it's back to terraform and now it has taken all the application secrets from the output that",
    "start": "1255320",
    "end": "1262159"
  },
  {
    "text": "you saw last time when we run terraform apply and now it has taken and the",
    "start": "1262159",
    "end": "1267769"
  },
  {
    "text": "secrets and encrypted them into moonshine and now we can refer to them through this annotation language instead",
    "start": "1267769",
    "end": "1274580"
  },
  {
    "text": "so in our config files will never know the actual secrets we'll just know the annotation to the sequence you can also",
    "start": "1274580",
    "end": "1282559"
  },
  {
    "text": "see that we have for the dev environment here because we version on environment",
    "start": "1282559",
    "end": "1287690"
  },
  {
    "text": "properties so now we can go back into our moonshine store and we can go in and",
    "start": "1287690",
    "end": "1294830"
  },
  {
    "text": "refresh so hopefully we have some values there now and we do so we partition on",
    "start": "1294830",
    "end": "1302210"
  },
  {
    "text": "application and then we have a component for the application which in this case",
    "start": "1302210",
    "end": "1307309"
  },
  {
    "text": "is storage and this storage also have a version so you can see it's storage with",
    "start": "1307309",
    "end": "1312860"
  },
  {
    "text": "a suffix dead so that's for the development environment obviously so we",
    "start": "1312860",
    "end": "1318620"
  },
  {
    "text": "have also stored this account key as a property with a property value and our storage name because names are also",
    "start": "1318620",
    "end": "1326000"
  },
  {
    "text": "versioned if we want to version them and in this case we have because our storage account name was hasn't had a suffix",
    "start": "1326000",
    "end": "1332690"
  },
  {
    "text": "called that okay so now we have this encrypted secret or secret sorry into",
    "start": "1332690",
    "end": "1339710"
  },
  {
    "text": "moonshine which was the output of terraform the the secrets that perform",
    "start": "1339710",
    "end": "1345950"
  },
  {
    "text": "output and and these outputs from terraform also what we specifies we have",
    "start": "1345950",
    "end": "1351410"
  },
  {
    "text": "full control of that what Luna forum stores okay so that was",
    "start": "1351410",
    "end": "1356870"
  },
  {
    "text": "our first demo so I'll just try to illustrate what I've just been talking",
    "start": "1356870",
    "end": "1362990"
  },
  {
    "text": "about about these config files so this is a typically default standard Jason",
    "start": "1362990",
    "end": "1369440"
  },
  {
    "text": "config file in dotnet core so in this case we have just referred directly to",
    "start": "1369440",
    "end": "1375530"
  },
  {
    "text": "our secret in this Jason file which is stuff that many people do but we don't",
    "start": "1375530",
    "end": "1381980"
  },
  {
    "text": "want to do it because we if someone gets our code then we're kind of in bad",
    "start": "1381980",
    "end": "1387050"
  },
  {
    "text": "weather so what we do in moonshine or through moonshine is to refer to it in",
    "start": "1387050",
    "end": "1393650"
  },
  {
    "text": "this way with the moonshine annotation language and when we refer to it this",
    "start": "1393650",
    "end": "1398990"
  },
  {
    "text": "way moonshine will take and resolve our application sequence on the fly when we",
    "start": "1398990",
    "end": "1404720"
  },
  {
    "text": "start the application so how do we",
    "start": "1404720",
    "end": "1409820"
  },
  {
    "text": "actually input this complan to our code well this is the standard way of doing",
    "start": "1409820",
    "end": "1415640"
  },
  {
    "text": "it in dotnet core you just say adjacent file to our configuration builder and then you build it how we do it in",
    "start": "1415640",
    "end": "1423530"
  },
  {
    "text": "moonshine it's basically just the same way but with an extension method so we have just extended the configuration",
    "start": "1423530",
    "end": "1429410"
  },
  {
    "text": "builder to this so now instead of saying adjacent file we just say set of",
    "start": "1429410",
    "end": "1434780"
  },
  {
    "text": "moonshine configuration with our accounting file and on the fly when we say build it will resolve all our",
    "start": "1434780",
    "end": "1441770"
  },
  {
    "text": "secrets decrypted for us and we're good to go and of course we have to provide",
    "start": "1441770",
    "end": "1448880"
  },
  {
    "text": "moonshine run time with our encryption keys and where the actual",
    "start": "1448880",
    "end": "1456830"
  },
  {
    "text": "encrypted secrets are located and we'll get to that soon so then we",
    "start": "1456830",
    "end": "1463190"
  },
  {
    "text": "can start injecting our secrets into our code so in this case you'll see a person repository which is a repository over",
    "start": "1463190",
    "end": "1471020"
  },
  {
    "text": "our table storage account where we will store person's names and how often they have clicked the button so now we have",
    "start": "1471020",
    "end": "1478250"
  },
  {
    "text": "all of these decrypted secrets from moonshine ready to be injected into our person repository so we just refer to",
    "start": "1478250",
    "end": "1486380"
  },
  {
    "text": "them as this and eject them into our classes so like this and we inject them",
    "start": "1486380",
    "end": "1495380"
  },
  {
    "text": "like this okay so now we have our",
    "start": "1495380",
    "end": "1500570"
  },
  {
    "text": "development infrastructure ready to go it has been created we have a storage account we can start actually persisting",
    "start": "1500570",
    "end": "1508040"
  },
  {
    "text": "some data so this is what we had this is where we left off and this is where we",
    "start": "1508040",
    "end": "1516590"
  },
  {
    "text": "want to get now so now we want to start develop a demo service which has its own repository down here and we want to read",
    "start": "1516590",
    "end": "1524990"
  },
  {
    "text": "and write to our created table storage account or storage account if you want because you can store many different",
    "start": "1524990",
    "end": "1531950"
  },
  {
    "text": "implementations there so we'll just jump right into it so now we're into our demo",
    "start": "1531950",
    "end": "1542030"
  },
  {
    "text": "service which you can see here on the right and now we're into the actual demo",
    "start": "1542030",
    "end": "1548150"
  },
  {
    "text": "controller which is our entry point for our REST API calls that we'll soon get",
    "start": "1548150",
    "end": "1553640"
  },
  {
    "text": "to so what we have here is that we have a guest method for getting data which is",
    "start": "1553640",
    "end": "1561020"
  },
  {
    "text": "basically the names and how many times the person has clicked the button and we",
    "start": "1561020",
    "end": "1566750"
  },
  {
    "text": "also have post because we want to take all the clicks and post them and persist",
    "start": "1566750",
    "end": "1572150"
  },
  {
    "text": "the actual data into our table storage and you can see here that we have",
    "start": "1572150",
    "end": "1577580"
  },
  {
    "text": "injected this I person repository as a singleton we saw how we resolved the",
    "start": "1577580",
    "end": "1583760"
  },
  {
    "text": "secrets and injected them into the person repository which is this class so here we inject the actual secrets",
    "start": "1583760",
    "end": "1591470"
  },
  {
    "text": "the storage account for the table storage is in need of these parameters",
    "start": "1591470",
    "end": "1598879"
  },
  {
    "text": "storage account key and storage account name which was the previous slide I showed you where we inject our secrets",
    "start": "1598879",
    "end": "1605409"
  },
  {
    "text": "which we don't have any clue voice we just sell moonshine to decrypt them for",
    "start": "1605409",
    "end": "1611419"
  },
  {
    "text": "us so we have this right person we have this delete person just basic repository",
    "start": "1611419",
    "end": "1616639"
  },
  {
    "text": "operations that will soon refer to in our code actually we have referred to it",
    "start": "1616639",
    "end": "1622399"
  },
  {
    "text": "I'll just show you so now we're back into our app settings JSON file which was the file that I showed you on the",
    "start": "1622399",
    "end": "1629509"
  },
  {
    "text": "slide so we have referred to our moonshine annotation secrets we don't",
    "start": "1629509",
    "end": "1634669"
  },
  {
    "text": "know what they are we just say to moonshine this is our secret please get it for us",
    "start": "1634669",
    "end": "1640659"
  },
  {
    "text": "then the storage name and of course as we showed previously we have this demo",
    "start": "1642759",
    "end": "1649850"
  },
  {
    "text": "application storage tab and the account key and the name which are encrypted so",
    "start": "1649850",
    "end": "1657279"
  },
  {
    "text": "and now the kind of magical stuff comes into play because some of you might now",
    "start": "1657279",
    "end": "1664039"
  },
  {
    "text": "wonder well how do you know where to get the values from how doesn't know how to",
    "start": "1664039",
    "end": "1670399"
  },
  {
    "text": "encrypt it you need to provide something rights so of course we do so we specify",
    "start": "1670399",
    "end": "1676700"
  },
  {
    "text": "environment variables in our running application so moonshine will take these",
    "start": "1676700",
    "end": "1683919"
  },
  {
    "text": "into consideration and know what to do with them so when we develop locally we",
    "start": "1683919",
    "end": "1690470"
  },
  {
    "text": "have this support for moonshine properties files which are the",
    "start": "1690470",
    "end": "1695629"
  },
  {
    "text": "environment variable specified in a file that moonshine recipe recognizes",
    "start": "1695629",
    "end": "1701419"
  },
  {
    "text": "usually when we deploy the applications to kubernetes these secrets are actually",
    "start": "1701419",
    "end": "1708259"
  },
  {
    "text": "specified in turbo Nettie's as secrets we'll get to that sooner later sorry but",
    "start": "1708259",
    "end": "1715009"
  },
  {
    "text": "now when we work in our local environment we can specify it through this moonshine properties file so we",
    "start": "1715009",
    "end": "1721369"
  },
  {
    "text": "don't have to go into our system environment Bibles and change don't we just in a file and change them we can go",
    "start": "1721369",
    "end": "1728540"
  },
  {
    "text": "towards several multiple environments in this case we want to go to the dev",
    "start": "1728540",
    "end": "1735150"
  },
  {
    "text": "environment so all of this is specified here so we have the moonshine storage account key we have the moonshine",
    "start": "1735150",
    "end": "1741300"
  },
  {
    "text": "account name what table it is located in and stuff for that so this is kind of the",
    "start": "1741300",
    "end": "1747390"
  },
  {
    "text": "configuration for moonshine in runtime so here are our secrets for encrypting",
    "start": "1747390",
    "end": "1753930"
  },
  {
    "text": "and decrypting so these were the same secrets that Luna form use to to encrypt",
    "start": "1753930",
    "end": "1759300"
  },
  {
    "text": "the the values and store them into the table storage and it will also use these",
    "start": "1759300",
    "end": "1764520"
  },
  {
    "text": "to decrypt it on the fly so now we're into our one detail at file is get",
    "start": "1764520",
    "end": "1769860"
  },
  {
    "text": "ignored right so it's not check the net that's very important so we just have them local so now we can run our demo",
    "start": "1769860",
    "end": "1777000"
  },
  {
    "text": "service and in document core you just",
    "start": "1777000",
    "end": "1782820"
  },
  {
    "text": "say dotnet run and the application started we can go into postman and we",
    "start": "1782820",
    "end": "1792120"
  },
  {
    "text": "can just test that our API actually works so we go to the local host API",
    "start": "1792120",
    "end": "1798750"
  },
  {
    "text": "demo we can get it send a request and we",
    "start": "1798750",
    "end": "1804360"
  },
  {
    "text": "see that we get no content well obviously we don't have any data persisted in the table storage yet so",
    "start": "1804360",
    "end": "1810870"
  },
  {
    "text": "that's kind of the expected reply so we can start posting some data so I'll go",
    "start": "1810870",
    "end": "1817800"
  },
  {
    "text": "ahead and just post the name stola because i likes to order sandwich so",
    "start": "1817800",
    "end": "1824660"
  },
  {
    "text": "i'll just go ahead and click send and",
    "start": "1824660",
    "end": "1830990"
  },
  {
    "text": "okay we get a 200 ok back one click we",
    "start": "1830990",
    "end": "1836190"
  },
  {
    "text": "can send no we'll just do something random we go back and we can go into get",
    "start": "1836190",
    "end": "1843840"
  },
  {
    "text": "again so now we have post one time and now when we get it we get the expected",
    "start": "1843840",
    "end": "1849600"
  },
  {
    "text": "value back 200 ok which is good so now we can just go back and post Staller",
    "start": "1849600",
    "end": "1856020"
  },
  {
    "text": "some times to to make sure that it's magic air it",
    "start": "1856020",
    "end": "1861570"
  },
  {
    "text": "actually works as it should so we click in five times okay we get it again it",
    "start": "1861570",
    "end": "1870300"
  },
  {
    "text": "seems okay and now we can go into our",
    "start": "1870300",
    "end": "1878150"
  },
  {
    "text": "table storage accounts so this was our storage account that we created in the acid demo subscription under our",
    "start": "1878150",
    "end": "1885300"
  },
  {
    "text": "resource group and now we have these tables ready to go now we can refresh",
    "start": "1885300",
    "end": "1891360"
  },
  {
    "text": "because we have created our table persons and we want to that we can just",
    "start": "1891360",
    "end": "1896550"
  },
  {
    "text": "go in and this was the person's table name that we specified in our config file so and it's also the table name",
    "start": "1896550",
    "end": "1904170"
  },
  {
    "text": "that gets injected into the person repository which tells it where to store",
    "start": "1904170",
    "end": "1909300"
  },
  {
    "text": "it so we can go into this one and you can see now it has persisted the data that we have sent into our service we",
    "start": "1909300",
    "end": "1916800"
  },
  {
    "text": "can just go ahead and post again and we can go back into this one and refresh it",
    "start": "1916800",
    "end": "1922230"
  },
  {
    "text": "and okay so well as one more click so the entire integration the service",
    "start": "1922230",
    "end": "1927600"
  },
  {
    "text": "integration with our database now seems to work so so far so good so this was",
    "start": "1927600",
    "end": "1935000"
  },
  {
    "text": "where we left off last time or just now",
    "start": "1935000",
    "end": "1940020"
  },
  {
    "text": "and now we want to create a client that will communicate with our service the",
    "start": "1940020",
    "end": "1947700"
  },
  {
    "text": "service that we just showed in order to have a kind of better graphical user",
    "start": "1947700",
    "end": "1952800"
  },
  {
    "text": "interface that the users can interact with and this will be in its own repository demo client so we'll just go",
    "start": "1952800",
    "end": "1961610"
  },
  {
    "text": "back into demo okay so this was where we left off we had the skate store last six",
    "start": "1961610",
    "end": "1969030"
  },
  {
    "text": "times so the integration with the service and the database seems to work so what we'll do now is we'll just stop",
    "start": "1969030",
    "end": "1976350"
  },
  {
    "text": "the service from running we don't want it to run out and we can go into our",
    "start": "1976350",
    "end": "1982200"
  },
  {
    "text": "client code that we have called the demo clients this is angular code so this is",
    "start": "1982200",
    "end": "1990180"
  },
  {
    "text": "basically a client that will communicate where our REST API so now we're into the demo",
    "start": "1990180",
    "end": "1997309"
  },
  {
    "text": "clients in our powershell so what we'll do now is that will start this client",
    "start": "1997309",
    "end": "2003700"
  },
  {
    "text": "through the angular CLI and we'll say",
    "start": "2003700",
    "end": "2008740"
  },
  {
    "text": "that will run with the local environment and first time is pretty slow so we'll",
    "start": "2008740",
    "end": "2018190"
  },
  {
    "text": "just skip up a little bit there I see",
    "start": "2018190",
    "end": "2023410"
  },
  {
    "text": "that the codec is really do you get the green screen swells in 2000 that just",
    "start": "2023410",
    "end": "2030460"
  },
  {
    "text": "speed up here so now you can see it's building stuff it's going to deploy to",
    "start": "2030460",
    "end": "2035679"
  },
  {
    "text": "this localhost 4200 port so we can soon",
    "start": "2035679",
    "end": "2040809"
  },
  {
    "text": "start interacting with it 92 percent okay so now it's good to go we can go",
    "start": "2040809",
    "end": "2047440"
  },
  {
    "text": "into our low close and hopefully see our client running",
    "start": "2047440",
    "end": "2054329"
  },
  {
    "text": "okay so this is basically our graphical user interface communicating with our",
    "start": "2059050",
    "end": "2066970"
  },
  {
    "text": "service so we can just try to submit a name and we'll now running in the local",
    "start": "2066970",
    "end": "2073210"
  },
  {
    "text": "environment we'll click the button but of course nothing will happen because we",
    "start": "2073210",
    "end": "2078310"
  },
  {
    "text": "stop the service previously so we want to fire it up does not run again okay",
    "start": "2078310",
    "end": "2090330"
  },
  {
    "text": "now it's back up and we can try to click",
    "start": "2090330",
    "end": "2095648"
  },
  {
    "text": "the button again will refresh it",
    "start": "2095649",
    "end": "2102720"
  },
  {
    "text": "worked laughter well okay so it just took a little bit time before it",
    "start": "2108150",
    "end": "2114040"
  },
  {
    "text": "actually could communicate their own service maybe our local computer was trying to",
    "start": "2114040",
    "end": "2119950"
  },
  {
    "text": "craft that so we click it again okay so now it seems to work pretty well we can",
    "start": "2119950",
    "end": "2125590"
  },
  {
    "text": "click it once more okay so we'll just leave it at five clicks for myself okay",
    "start": "2125590",
    "end": "2131980"
  },
  {
    "text": "so now we actually have this client communicating with our service it seems",
    "start": "2131980",
    "end": "2137050"
  },
  {
    "text": "to we can refresh and hopefully we have monitor as well which we do so now the",
    "start": "2137050",
    "end": "2142750"
  },
  {
    "text": "entire integration of the client to service and the database seems to be working pretty fine so now we're kind of",
    "start": "2142750",
    "end": "2154420"
  },
  {
    "text": "ready to let some users actually start using the application",
    "start": "2154420",
    "end": "2161350"
  },
  {
    "text": "so now we'll see how we actually take this local or development environment",
    "start": "2161350",
    "end": "2168940"
  },
  {
    "text": "application and ship it to production which we want to be as patient as",
    "start": "2168940",
    "end": "2174130"
  },
  {
    "text": "possible which are why we have used decided to use kubernetes and we'll get",
    "start": "2174130",
    "end": "2182500"
  },
  {
    "text": "into the details there so slowly we'll take it from here and talk a little bit about that yes just a brief overview of",
    "start": "2182500",
    "end": "2189790"
  },
  {
    "text": "kubernetes or so what is it it's a container what they call a container",
    "start": "2189790",
    "end": "2195540"
  },
  {
    "text": "orchestration engine so there are mainly you can choose between kubernetes or which is a open source comes from Google",
    "start": "2195540",
    "end": "2202800"
  },
  {
    "text": "from Google or you have swarm or also something called maiasaurs and this is",
    "start": "2202800",
    "end": "2208150"
  },
  {
    "text": "long we're using so when you can run containers by yourself or you can use",
    "start": "2208150",
    "end": "2213430"
  },
  {
    "text": "this if you use this it hands the cluster machines for you and it also handles this hard state so you say what",
    "start": "2213430",
    "end": "2222940"
  },
  {
    "text": "you want and it tries to enforce it so that if you say I want two of these services and one of the one one goes",
    "start": "2222940",
    "end": "2229690"
  },
  {
    "text": "down it will start the new one again runs on all the major cloud platforms",
    "start": "2229690",
    "end": "2235930"
  },
  {
    "text": "and there's a large community so whenever communities you are defining",
    "start": "2235930",
    "end": "2243630"
  },
  {
    "text": "kubernetes objects and absolutely define your new files and what they are as I",
    "start": "2243630",
    "end": "2249150"
  },
  {
    "text": "mentioned our desired state look at what you want running on a cluster what you",
    "start": "2249150",
    "end": "2255750"
  },
  {
    "text": "want to run and how each application should behave when it comes to scaling up grading and fault tolerance and those",
    "start": "2255750",
    "end": "2262200"
  },
  {
    "text": "kinds of things and there are several kinds of what we call objects or all",
    "start": "2262200",
    "end": "2269670"
  },
  {
    "text": "them are defined in the same way and these are the most basic or important ones the most basic one is called a pod",
    "start": "2269670",
    "end": "2277440"
  },
  {
    "text": "so you never refer directly to a container a pod runs one or more",
    "start": "2277440",
    "end": "2282960"
  },
  {
    "text": "containers inside of it and the basic a building book and what it means is that",
    "start": "2282960",
    "end": "2288020"
  },
  {
    "text": "if you have several containers inside of one pod they are guaranteed to be co-located so they're on the same node",
    "start": "2288020",
    "end": "2294750"
  },
  {
    "text": "same machine and they can easily communicate with each other by a local host and other mechanisms so that's a",
    "start": "2294750",
    "end": "2302400"
  },
  {
    "text": "basic but if you deploy a pod directly so one thing that's not the side state that's going to make important it dies",
    "start": "2302400",
    "end": "2307829"
  },
  {
    "text": "it dies nobody's looking after your naked bulb so you have to define a replicator replica set which is if you",
    "start": "2307829",
    "end": "2316799"
  },
  {
    "text": "define a publisher replica set then it's a desired state configuration and it",
    "start": "2316799",
    "end": "2322380"
  },
  {
    "text": "will handle it this is also where you say well how many copies you want and then this is higher level concept color",
    "start": "2322380",
    "end": "2328140"
  },
  {
    "text": "deployment which is what you actually usually define the deployment that will would be a combined definition of a",
    "start": "2328140",
    "end": "2334349"
  },
  {
    "text": "replica set on a pub you can do replicas so directly you can do pull directly but the recommended thing is to do a",
    "start": "2334349",
    "end": "2340380"
  },
  {
    "text": "deployment so that's the one thing you do and then now you have a container or",
    "start": "2340380",
    "end": "2347789"
  },
  {
    "text": "several containers running inside of one or several pods but nobody can contact them so that's fine for some things if",
    "start": "2347789",
    "end": "2354299"
  },
  {
    "text": "your reference is just listening to a cue and doing in the background working on your finish but normally I will often",
    "start": "2354299",
    "end": "2359819"
  },
  {
    "text": "you want to communicate with it and then you have to just define a service because a pod is a ephemeral it can die",
    "start": "2359819",
    "end": "2365789"
  },
  {
    "text": "any time should never refer direct is a pub so if you want to talk to a pub you",
    "start": "2365789",
    "end": "2371220"
  },
  {
    "text": "have to make a service that with first Bob yeah so uh service is an abstract",
    "start": "2371220",
    "end": "2379310"
  },
  {
    "text": "way of talking to your pods and also it's like an internal node balancer so if you say I want 10 copies of this pod",
    "start": "2379310",
    "end": "2386120"
  },
  {
    "text": "and the other service defined for that deployment then the service will automatically do a little dancing and",
    "start": "2386120",
    "end": "2393820"
  },
  {
    "text": "normally the way we do it is that the service is you can have several kinds of services are three types the one we're",
    "start": "2393820",
    "end": "2400190"
  },
  {
    "text": "using is called cluster IP which means it's just you can just talk to it",
    "start": "2400190",
    "end": "2405680"
  },
  {
    "text": "internally on the cluster so you have to be on the cluster in order to talk to this and then yeah this thing but you",
    "start": "2405680",
    "end": "2413300"
  },
  {
    "text": "could define if you're on the cloud provider you couldn't define it as they're called would from a load bouncer",
    "start": "2413300",
    "end": "2418490"
  },
  {
    "text": "that automatically makes a Google or Amazon or a sure load balancer which has",
    "start": "2418490",
    "end": "2424340"
  },
  {
    "text": "a public IP and you can talk directly to the service we don't do that I think most people don't what they do is they",
    "start": "2424340",
    "end": "2430880"
  },
  {
    "text": "define what's called an ingress ingress controller and I'm going to show you later that means you have one load",
    "start": "2430880",
    "end": "2436520"
  },
  {
    "text": "balancer with one IP address talking to one container which is a special one and",
    "start": "2436520",
    "end": "2443600"
  },
  {
    "text": "there you handle everything by code internally inside also you have a",
    "start": "2443600",
    "end": "2450340"
  },
  {
    "text": "configuration Maps and secrets which are more or less the same thing which is for the whole cluster so this is where we",
    "start": "2450340",
    "end": "2456970"
  },
  {
    "text": "have all the secrets which among the showed in that file so that's for instance for the production cluster I",
    "start": "2456970",
    "end": "2462770"
  },
  {
    "text": "can load up the secrets and not give in access we potentially doesn't know",
    "start": "2462770",
    "end": "2468670"
  },
  {
    "text": "anything can't actually find out what the secrets are and there are many other",
    "start": "2468670",
    "end": "2477110"
  },
  {
    "text": "objects these are the most important ones though i think so i mentioned we",
    "start": "2477110",
    "end": "2484100"
  },
  {
    "text": "are using this through so there's this concept called an ingress controller and when you're at a special kind of",
    "start": "2484100",
    "end": "2490030"
  },
  {
    "text": "container which i will have no idea you can write yourself you probably can but there are three brands do you have nginx",
    "start": "2490030",
    "end": "2497810"
  },
  {
    "text": "and you have this traffic and the hea proxy so we through just random process",
    "start": "2497810",
    "end": "2505520"
  },
  {
    "text": "more or less we chose try SiC because it seems good all these I",
    "start": "2505520",
    "end": "2510530"
  },
  {
    "text": "think are roughly equivalent but it's French software which is open source that's French so all the documentation",
    "start": "2510530",
    "end": "2516680"
  },
  {
    "text": "is in French which is refreshing and I also also have this what I call a",
    "start": "2516680",
    "end": "2524140"
  },
  {
    "text": "Norwegian letter in the name which we are the gift suits then that's why we",
    "start": "2524140",
    "end": "2529730"
  },
  {
    "text": "decided on this yes so we have this one",
    "start": "2529730",
    "end": "2536270"
  },
  {
    "text": "each controller is set up for the low volume of Google so we can we can reach it and then we can do cold do routing",
    "start": "2536270",
    "end": "2543680"
  },
  {
    "text": "afterwards alright so this was where we",
    "start": "2543680",
    "end": "2550730"
  },
  {
    "text": "left off in the previous demo so we had this client the service working together",
    "start": "2550730",
    "end": "2556070"
  },
  {
    "text": "with a database in our local environment and we were pretty satisfied and wanted",
    "start": "2556070",
    "end": "2561109"
  },
  {
    "text": "to ship it to production basically so what will go how to do now is that we",
    "start": "2561109",
    "end": "2567680"
  },
  {
    "text": "create an automatic deployment build and this build will just run our master code",
    "start": "2567680",
    "end": "2575450"
  },
  {
    "text": "or our tag for the release and it will run the terraform scripts for production",
    "start": "2575450",
    "end": "2583119"
  },
  {
    "text": "which will create the production table storage account in uh sure it will take",
    "start": "2583119",
    "end": "2591440"
  },
  {
    "text": "the output from terraform these secrets that we specify terraform to output for us it will encrypt these secrets and",
    "start": "2591440",
    "end": "2598820"
  },
  {
    "text": "store them into the moonshine table storage then we will deploy our",
    "start": "2598820",
    "end": "2605230"
  },
  {
    "text": "application or multi container application because we have this client we have this service that we need to",
    "start": "2605230",
    "end": "2611210"
  },
  {
    "text": "deploy to Cuba Nettie's on Google Cloud and finally will show you that the users",
    "start": "2611210",
    "end": "2619160"
  },
  {
    "text": "can reach this application from the web and communicate with it so we'll just",
    "start": "2619160",
    "end": "2626119"
  },
  {
    "text": "jump into our demo again so this is where we left off and so stola mention these kubernetes",
    "start": "2626119",
    "end": "2635109"
  },
  {
    "text": "stuff these objects these kind principles of kubernetes",
    "start": "2635109",
    "end": "2640580"
  },
  {
    "text": "and what we'll show you now firstly is that we're going to build the image the",
    "start": "2640580",
    "end": "2647660"
  },
  {
    "text": "docker container for the Democrats and push it to the container registry and",
    "start": "2647660",
    "end": "2652850"
  },
  {
    "text": "Google Cloud so what we do now is we push a sorry queue new-build and we want",
    "start": "2652850",
    "end": "2660290"
  },
  {
    "text": "to run it for our release one tags and usually this is automatic but now we're",
    "start": "2660290",
    "end": "2667460"
  },
  {
    "text": "just showing you that will wake you up a new build ourselves and it will start",
    "start": "2667460",
    "end": "2672910"
  },
  {
    "text": "packaging building the Democrats and it will ship it to the container registry",
    "start": "2672910",
    "end": "2679520"
  },
  {
    "text": "in Google Cloud as a docker container or docker image if you want so this this",
    "start": "2679520",
    "end": "2685640"
  },
  {
    "text": "build is running we'll do the same for the demo service which has a newer minor",
    "start": "2685640",
    "end": "2691490"
  },
  {
    "text": "release than the client so this is one point 1.0 know how to accept so it'll",
    "start": "2691490",
    "end": "2698300"
  },
  {
    "text": "run the same steps but for the.net core stuff so it will two definite restore",
    "start": "2698300",
    "end": "2704840"
  },
  {
    "text": "doesn't build they will do doesn't publish and finally it will push the image to our project in Google Cloud",
    "start": "2704840",
    "end": "2711200"
  },
  {
    "text": "which is called this and in Google Cloud we have this container registry which are all our packet images ready for",
    "start": "2711200",
    "end": "2718490"
  },
  {
    "text": "deployments so you can see we have this demo client image folder and the demo",
    "start": "2718490",
    "end": "2724010"
  },
  {
    "text": "service image folder which are basically containing all of the images for for the",
    "start": "2724010",
    "end": "2730310"
  },
  {
    "text": "demo service and the democrat so here you can see we have two days ago we had tested develop and master just to make",
    "start": "2730310",
    "end": "2736880"
  },
  {
    "text": "sure that stuff works but now we want to actually deploy it to production with",
    "start": "2736880",
    "end": "2742820"
  },
  {
    "text": "with a release tag so we have the same for the dump client at seven days ago so",
    "start": "2742820",
    "end": "2747980"
  },
  {
    "text": "these builds running in the background now will soon push these images to our",
    "start": "2747980",
    "end": "2754330"
  },
  {
    "text": "container registry so you can see here it's still a building so this usually",
    "start": "2754330",
    "end": "2760580"
  },
  {
    "text": "takes a little bit of time so we can maybe fast forward a little bit so finally it will see we have this pushed",
    "start": "2760580",
    "end": "2769040"
  },
  {
    "text": "our images to Google Cloud and here is actually building the building the image and it",
    "start": "2769040",
    "end": "2777400"
  },
  {
    "text": "will soon just when the building is ready will push it to pick obtain registry which you saw it's pushing now",
    "start": "2777400",
    "end": "2786490"
  },
  {
    "text": "it's Christian yep so it'll soon finish",
    "start": "2786490",
    "end": "2792870"
  },
  {
    "text": "okay so now the demo service have built",
    "start": "2792870",
    "end": "2799180"
  },
  {
    "text": "succeeded which is great everything seems to be fine okay",
    "start": "2799180",
    "end": "2806340"
  },
  {
    "text": "we can go into our container registry for the demo service and the last one",
    "start": "2806340",
    "end": "2814120"
  },
  {
    "text": "was two days ago a pair and we can",
    "start": "2814120",
    "end": "2819900"
  },
  {
    "text": "refresh it and hopefully we have a new image here now okay so a new image was just now",
    "start": "2819900",
    "end": "2828310"
  },
  {
    "text": "uploaded for a tag one point one point zero which is great so the image seems",
    "start": "2828310",
    "end": "2834520"
  },
  {
    "text": "to be fine we can go ahead back into our builds and go to the demo client build",
    "start": "2834520",
    "end": "2840040"
  },
  {
    "text": "and it seems that the build has succeeded there as well so we can go back into the container registry for the",
    "start": "2840040",
    "end": "2848160"
  },
  {
    "text": "demo client and you see the last one was a week ago and we'll go ahead and",
    "start": "2848160",
    "end": "2854680"
  },
  {
    "text": "refresh this one",
    "start": "2854680",
    "end": "2857339"
  },
  {
    "text": "okay so now we have this one point one zero point zero and it was just uploaded",
    "start": "2862839",
    "end": "2869680"
  },
  {
    "text": "so everything seems to be in order here so this is basically what we're trying",
    "start": "2869680",
    "end": "2878089"
  },
  {
    "text": "to achieve now so now we have pushed the images up here and we also want it to",
    "start": "2878089",
    "end": "2884239"
  },
  {
    "text": "deploy the actual images as running containers in pretty necklace",
    "start": "2884239",
    "end": "2889999"
  },
  {
    "text": "so we'll just go back into the demo and Staller will tell you a little bit about",
    "start": "2889999",
    "end": "2896959"
  },
  {
    "text": "the actual technical kubernetes files as a result of the individual reporters is",
    "start": "2896959",
    "end": "2902660"
  },
  {
    "text": "not the you know the end goal you may emerge to master then you have a image sub roaming yet right so that's what we",
    "start": "2902660",
    "end": "2909049"
  },
  {
    "text": "do in the demo application roster we have the infrastructure as code and we have what's the topology of the",
    "start": "2909049",
    "end": "2915859"
  },
  {
    "text": "containers that we're going to run for this move the container application so",
    "start": "2915859",
    "end": "2920930"
  },
  {
    "text": "now I have this new folder in there called kubernetes and here we are defining deployments and services and",
    "start": "2920930",
    "end": "2929660"
  },
  {
    "text": "induce controllers so it increases yep",
    "start": "2929660",
    "end": "2937089"
  },
  {
    "text": "personally so this is a deployment so as I mentioned this is a combination of a",
    "start": "2937089",
    "end": "2942949"
  },
  {
    "text": "replica set and the pods so I'm saying here that if you look from the top the first thing is here I'm RIF it so that",
    "start": "2942949",
    "end": "2948920"
  },
  {
    "text": "you see this is filmed later than da because we have made a new version but the imaginary was the version one to all",
    "start": "2948920",
    "end": "2954890"
  },
  {
    "text": "that we just pushed so here we're referring to the image we just pushed",
    "start": "2954890",
    "end": "2959930"
  },
  {
    "text": "we're saying that we want one replicas and down and here we are specifying",
    "start": "2959930",
    "end": "2965829"
  },
  {
    "text": "environment variables to push into the container as it started and there you can of course hard code things but here",
    "start": "2965829",
    "end": "2973069"
  },
  {
    "text": "we're referring to these configuration Maps and do have a secret there I think",
    "start": "2973069",
    "end": "2978229"
  },
  {
    "text": "it is further down our secrets play yep not so technical there were secrets down",
    "start": "2978229",
    "end": "2987499"
  },
  {
    "text": "there that I previously loaded up to the cluster as an entire day so that means",
    "start": "2987499",
    "end": "2992539"
  },
  {
    "text": "we have separate clusters for development tests production some people do namespaces we",
    "start": "2992539",
    "end": "2998510"
  },
  {
    "text": "don't these separate histories and then since I want to reach this these this",
    "start": "2998510",
    "end": "3005530"
  },
  {
    "text": "one pub I have to define a service and that's here everything by the way in in",
    "start": "3005530",
    "end": "3011650"
  },
  {
    "text": "the kubernetes its labels and selectors to label things and then if I want to service to refer to set the pods I have",
    "start": "3011650",
    "end": "3019030"
  },
  {
    "text": "a selector that matches those labels so it's like a soft label Ram that's how",
    "start": "3019030",
    "end": "3024880"
  },
  {
    "text": "you're typing together I'm defining a service I'm saying I want to call it demo service API SVC that means if",
    "start": "3024880",
    "end": "3032500"
  },
  {
    "text": "you're inside the cluster you can now say HTTP demo service API SVC and they",
    "start": "3032500",
    "end": "3037690"
  },
  {
    "text": "will reach that service on port 5000 which is what I'm specifying and it's a",
    "start": "3037690",
    "end": "3043089"
  },
  {
    "text": "tight cluster IP which means its internal not reachable from outside but",
    "start": "3043089",
    "end": "3049480"
  },
  {
    "text": "I want to reduce on the outside so that's where the final ingress that's",
    "start": "3049480",
    "end": "3057970"
  },
  {
    "text": "top so we have an ingress which automatically registered with the English controller which is this French",
    "start": "3057970",
    "end": "3063069"
  },
  {
    "text": "software the traffic so what I'm saying here is if anybody hits us in this case",
    "start": "3063069",
    "end": "3068950"
  },
  {
    "text": "you can have a lots of rules this case it's and it's a demo service after the domain then we fit to the service which",
    "start": "3068950",
    "end": "3076119"
  },
  {
    "text": "I called demo service API SVC and",
    "start": "3076119",
    "end": "3081220"
  },
  {
    "text": "there's also this part prefix script which means it will strip away the demo service we have because if you just sent",
    "start": "3081220",
    "end": "3089700"
  },
  {
    "text": "address that to our container it wouldn't understand because there's no controller another plaque or called demo",
    "start": "3089700",
    "end": "3095109"
  },
  {
    "text": "service so we script our way so you know all those sorts of rules the nice thing with this that's in your code you",
    "start": "3095109",
    "end": "3101230"
  },
  {
    "text": "control it you call your service provider once gets them to set up the DNS tree or 50 point 94 what the IP",
    "start": "3101230",
    "end": "3108790"
  },
  {
    "text": "address that you got from Google rusher and then your finish and the rest is you and your code so now we're ready to go",
    "start": "3108790",
    "end": "3116980"
  },
  {
    "text": "so this is so we have the same for the client this is for the backend service",
    "start": "3116980",
    "end": "3123660"
  },
  {
    "text": "yeah that's really cool so we have all of these communities files",
    "start": "3123660",
    "end": "3128890"
  },
  {
    "text": "specify that we need to deploy it and you can also see that we have this we have this depth infrastructure is code",
    "start": "3128890",
    "end": "3136540"
  },
  {
    "text": "for terraform uniform but we now also want to have for production so usually",
    "start": "3136540",
    "end": "3142750"
  },
  {
    "text": "we staged it in a test environment first but of course we don't have time to do that today so we'll just ship it right",
    "start": "3142750",
    "end": "3149079"
  },
  {
    "text": "into production so we have these files there as well so now we have written all the stuff for deployment and for",
    "start": "3149079",
    "end": "3156599"
  },
  {
    "text": "infrastructure is code for production so we'll go ahead and push this stuff so",
    "start": "3156599",
    "end": "3162579"
  },
  {
    "text": "we'll just push it straight into the master branch which is kind of cowboy we",
    "start": "3162579",
    "end": "3168069"
  },
  {
    "text": "usually do pull request of course and stuff like that and continuous integration but we don't have time for that now so we have specified this",
    "start": "3168069",
    "end": "3175740"
  },
  {
    "text": "automatic deployment build which starts with it has a trigger listening to the",
    "start": "3175740",
    "end": "3182079"
  },
  {
    "text": "master branch so now it has started a build on a master branch so we can go ahead and look at this build because we",
    "start": "3182079",
    "end": "3188020"
  },
  {
    "text": "push the code directly to master so usually it's a merge into master but now",
    "start": "3188020",
    "end": "3193359"
  },
  {
    "text": "we pushed it so now it runs this Luna form step over here for automatic",
    "start": "3193359",
    "end": "3199869"
  },
  {
    "text": "creation of the production environment which we need for production it runs the kubernetes deploy step which is what we",
    "start": "3199869",
    "end": "3208240"
  },
  {
    "text": "needed for deploying security it's running the queued CTL commands yes anybody's familiar so there are",
    "start": "3208240",
    "end": "3214839"
  },
  {
    "text": "tools out there we might look at them we're just doing the g-cloud cube CTL",
    "start": "3214839",
    "end": "3220030"
  },
  {
    "text": "commands directly as we didn't just see here so here is run the deploy",
    "start": "3220030",
    "end": "3225160"
  },
  {
    "text": "production script so it has configured all this different stuff that we need in",
    "start": "3225160",
    "end": "3231069"
  },
  {
    "text": "communities in our production environment and so everything seems to",
    "start": "3231069",
    "end": "3236799"
  },
  {
    "text": "be ok now and I don't know if the film",
    "start": "3236799",
    "end": "3242290"
  },
  {
    "text": "actually you can actually have bugs and videos as well it seems ok so I think",
    "start": "3242290",
    "end": "3249190"
  },
  {
    "text": "it's running now we have to restart it the whole",
    "start": "3249190",
    "end": "3255109"
  },
  {
    "text": "yeah sorry what okay we'll try to just go ahead into here okay so we're back",
    "start": "3255109",
    "end": "3261979"
  },
  {
    "text": "here yeah so this is where we left off we saw the kubernetes stuff and we also",
    "start": "3261979",
    "end": "3270680"
  },
  {
    "text": "run run the the luna forum terraform stuff so we now should have a resource",
    "start": "3270680",
    "end": "3277369"
  },
  {
    "text": "group for production as well we had this the development resource group but now if we refresh it that shirt has should",
    "start": "3277369",
    "end": "3285109"
  },
  {
    "text": "have created this production resource group which it has so now we have a",
    "start": "3285109",
    "end": "3291079"
  },
  {
    "text": "production environment in Azure as well and finally it should have deployed it",
    "start": "3291079",
    "end": "3298099"
  },
  {
    "text": "to our production cluster which we can reach here so we'll try to communicate",
    "start": "3298099",
    "end": "3303229"
  },
  {
    "text": "with the Democrat that has just been deployed and so now we have this",
    "start": "3303229",
    "end": "3310009"
  },
  {
    "text": "deployed application in the production cluster so let's just go ahead and test",
    "start": "3310009",
    "end": "3316279"
  },
  {
    "text": "that it works so we'll just go ahead and",
    "start": "3316279",
    "end": "3321319"
  },
  {
    "text": "write my name just okay so it seems to",
    "start": "3321319",
    "end": "3328069"
  },
  {
    "text": "be working we can just I'll just fast for a little bit because we're a little late on time I think and we'll just try",
    "start": "3328069",
    "end": "3337190"
  },
  {
    "text": "to okay so it seems to be working so now we have shipped the entire application into production we have automatically",
    "start": "3337190",
    "end": "3344690"
  },
  {
    "text": "created the infrastructure that we need and all of this were done by the automatic deployment bill that just",
    "start": "3344690",
    "end": "3351469"
  },
  {
    "text": "triggered from our master branch when we push the code so we can just see that it",
    "start": "3351469",
    "end": "3357440"
  },
  {
    "text": "works as expected since it's in our production environment we don't want it to be broken okay so we can just click",
    "start": "3357440",
    "end": "3363949"
  },
  {
    "text": "stall a little bit here so it seems to be working fine so it was pretty pretty",
    "start": "3363949",
    "end": "3370069"
  },
  {
    "text": "easy to just go from having nothing starting from scratch creating infrastructure is code just coding a",
    "start": "3370069",
    "end": "3377150"
  },
  {
    "text": "very simple service a client and just shipping it off to production through",
    "start": "3377150",
    "end": "3382729"
  },
  {
    "text": "kubernetes I'm detecting all the secrets without their gravity to see it earth created",
    "start": "3382729",
    "end": "3390200"
  },
  {
    "text": "the intersection communicate this equation we don't know what they are so this is basically where we left off so",
    "start": "3390200",
    "end": "3397819"
  },
  {
    "text": "this is the entire architecture for what we just showed you and the summary is",
    "start": "3397819",
    "end": "3404359"
  },
  {
    "text": "basically this we have we run platform as a service in Azure where we use usually have our databases and storage",
    "start": "3404359",
    "end": "3412130"
  },
  {
    "text": "accounts and application insights logging and stuff like that and we run",
    "start": "3412130",
    "end": "3417349"
  },
  {
    "text": "Luna form for automatic infrastructure creation and application encryption sorry application secrets encryption and",
    "start": "3417349",
    "end": "3426470"
  },
  {
    "text": "then we usually use angular for front-end stuff and we use dotnet core",
    "start": "3426470",
    "end": "3431930"
  },
  {
    "text": "for backyard services stuff and finally we deploy all of these as",
    "start": "3431930",
    "end": "3436940"
  },
  {
    "text": "multi container applications to kubernetes on Google Cloud so thank you",
    "start": "3436940",
    "end": "3443480"
  },
  {
    "text": "so much for listening and showing up we really appreciate it remote invisible is as open-source by",
    "start": "3443480",
    "end": "3448640"
  },
  {
    "text": "the way it will keep keep all of you know that okay so if you want to get in",
    "start": "3448640",
    "end": "3455299"
  },
  {
    "text": "touch afterwards you can of course come up and talk to us and ask us questions and stuff or you can reach us here if",
    "start": "3455299",
    "end": "3461480"
  },
  {
    "text": "you want so thank you so much",
    "start": "3461480",
    "end": "3464859"
  }
]