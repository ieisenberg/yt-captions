[
  {
    "text": "all right uh yes i'm on screen excellent um always weird starting when you can't see",
    "start": "8480",
    "end": "14080"
  },
  {
    "text": "anybody else uh coming into a room and sitting down i'm still not used to it uh but yes welcome welcome to this",
    "start": "14080",
    "end": "21439"
  },
  {
    "text": "session um my name is sonash i am a developer",
    "start": "21439",
    "end": "27840"
  },
  {
    "text": "evangelist at a company called twilio and antolio if you don't already know is a communications platform uh that is uh",
    "start": "27840",
    "end": "34880"
  },
  {
    "text": "it's a whole bunch of apis that you can use in your applications to do things from making receiving phone calls and",
    "start": "34880",
    "end": "40399"
  },
  {
    "text": "sending and receiving text messages or whatsapp messages all the way through email and video chat basically any way",
    "start": "40399",
    "end": "46160"
  },
  {
    "text": "you want to communicate with your users in your applications we have an api that can help you do that",
    "start": "46160",
    "end": "52640"
  },
  {
    "text": "so if you have any questions either about this talk or indeed about twilio in general you can find me online uh i'm",
    "start": "52640",
    "end": "58879"
  },
  {
    "text": "phil nash all over the place um or just drop me an email at fillmastertwilio.com",
    "start": "58879",
    "end": "64080"
  },
  {
    "text": "and i'd love to hear what you're building and how we can help um as we uh as we go through this talk i",
    "start": "64080",
    "end": "70320"
  },
  {
    "text": "have both the chat in slack open over to my right hand side and the chat uh in in",
    "start": "70320",
    "end": "76479"
  },
  {
    "text": "webex so if you are if you have any questions drop them in there and uh and",
    "start": "76479",
    "end": "81759"
  },
  {
    "text": "if it's particularly important i'll interrupt and answer at that point or we can uh leave them to the end uh depending on how that is",
    "start": "81759",
    "end": "88240"
  },
  {
    "text": "um so yeah i'm going to get going and talk about uh webrtc on",
    "start": "88240",
    "end": "93520"
  },
  {
    "text": "our lives on screen uh you're on mute uh is probably a thing we've all uh screamed at a uh a",
    "start": "93520",
    "end": "100560"
  },
  {
    "text": "co-worker or a friend or somebody on a video chat over the last uh a couple of years",
    "start": "100560",
    "end": "105680"
  },
  {
    "text": "and i want to talk about how we can both overcome",
    "start": "105680",
    "end": "110720"
  },
  {
    "text": "issues like that but also how we in general uh can use webrtc",
    "start": "110720",
    "end": "116560"
  },
  {
    "text": "as a way to make better uh make better video chats uh for our businesses for",
    "start": "116560",
    "end": "123920"
  },
  {
    "text": "applications um because we have spent all this time uh on screen over the last couple of years",
    "start": "123920",
    "end": "129840"
  },
  {
    "text": "but you probably find that most of it is uh in an application uh right now we're",
    "start": "129840",
    "end": "135360"
  },
  {
    "text": "watching in webex uh you might have spent a lot of time in zoom or teams or any other kind of application like this",
    "start": "135360",
    "end": "142560"
  },
  {
    "text": "and so but i'm not kind of i don't want webrtc and the web platform to compete",
    "start": "142560",
    "end": "148319"
  },
  {
    "text": "necessarily against these uh you see when we are",
    "start": "148319",
    "end": "154000"
  },
  {
    "text": "when we are chatting uh with people from work or with meetings or with friends or with family and i'm surprised by how",
    "start": "154000",
    "end": "160080"
  },
  {
    "text": "much over the last couple of years uh friends and family got really into uh zoom calls and things like that",
    "start": "160080",
    "end": "166959"
  },
  {
    "text": "uh as it's definitely a work tool but that's fine um whilst uh yeah applications like that",
    "start": "166959",
    "end": "172800"
  },
  {
    "text": "are great for these kind of things um because you can agree beforehand you can you can text your friends you can you",
    "start": "172800",
    "end": "178720"
  },
  {
    "text": "probably have an it team at work telling you which of these video applications you're going to use in order to talk",
    "start": "178720",
    "end": "185200"
  },
  {
    "text": "to your colleagues and you can agree with your friends which one you're going to use and download that and be ready beforehand",
    "start": "185200",
    "end": "190959"
  },
  {
    "text": "uh applications like this are not great for one-offs uh for for the kind of um",
    "start": "190959",
    "end": "197760"
  },
  {
    "text": "or business applications where you need to uh talk to you're getting uh in touch with uh somebody",
    "start": "197760",
    "end": "203840"
  },
  {
    "text": "um for a one-off reason uh for example like a doctor's appointment telemedicine that kind of thing uh or even um",
    "start": "203840",
    "end": "211200"
  },
  {
    "text": "yeah but i think that's a good example um if you had to do a telemedicine",
    "start": "211200",
    "end": "216239"
  },
  {
    "text": "appointment and you had to download a a whole new application in order to use that maybe even start up a new account",
    "start": "216239",
    "end": "222080"
  },
  {
    "text": "uh that's a bad thing um you don't need to be passing your data off to some third party just to talk to your doctor",
    "start": "222080",
    "end": "229200"
  },
  {
    "text": "similarly it's not great for specialist applications and whilst telemedicine is mostly you know just the video kind of",
    "start": "229200",
    "end": "235840"
  },
  {
    "text": "chat uh if you're doing something like remote learning or remote interviews um",
    "start": "235840",
    "end": "242400"
  },
  {
    "text": "then then something like teams or zoom or webex is not set up for that it's set up for that generic workplace",
    "start": "242400",
    "end": "248480"
  },
  {
    "text": "collaboration um sort of interviews i think it's some hacker rank that managed to build a",
    "start": "248480",
    "end": "254799"
  },
  {
    "text": "system uh where uh online they were able to both interview a face-to-face video but also build in",
    "start": "254799",
    "end": "262079"
  },
  {
    "text": "and pair programming pair programming and chat into that system as well uh and and that's",
    "start": "262079",
    "end": "268880"
  },
  {
    "text": "not the sort of thing you can do easily with a the generic app so uh webrtc uh is uh for all those other",
    "start": "268880",
    "end": "277040"
  },
  {
    "text": "applications it's uh something we can build into our browsers into things that",
    "start": "277040",
    "end": "282160"
  },
  {
    "text": "can host those very custom applications and that only require the user to",
    "start": "282160",
    "end": "288880"
  },
  {
    "text": "have a web browser installed so webrtc if you're not already aware is",
    "start": "288880",
    "end": "294000"
  },
  {
    "text": "real-time video audio and data experiences for your users on the web the fact that you can join",
    "start": "294000",
    "end": "300479"
  },
  {
    "text": "uh a webrtc video chat with just a url is a super power of of the web right",
    "start": "300479",
    "end": "306720"
  },
  {
    "text": "it's shareable it's linkable and you already have the browser you're already",
    "start": "306720",
    "end": "312160"
  },
  {
    "text": "involved in that and so that's why i think webrtc is just it's a very exciting opportunity to",
    "start": "312160",
    "end": "317919"
  },
  {
    "text": "build these experiences and build the experiences that you want",
    "start": "317919",
    "end": "322880"
  },
  {
    "text": "so for today uh we are going to cover a few bits um",
    "start": "323199",
    "end": "328880"
  },
  {
    "text": "about webrtc first the basics just to see how all this kind of hangs together how it works and see what the underlying",
    "start": "328880",
    "end": "334560"
  },
  {
    "text": "apis are now i don't expect anybody to come out with an ability to build a webrtc chat off the back of the example",
    "start": "334560",
    "end": "341840"
  },
  {
    "text": "code i'm going to show out of this but it's important to know what is going on under the hood it's also important to",
    "start": "341840",
    "end": "346960"
  },
  {
    "text": "know that there are many uh tools and libraries out there that will do a lot of that for you so understanding what's",
    "start": "346960",
    "end": "352880"
  },
  {
    "text": "happening is good uh but you don't necessarily need to know that to go on and build beyond that we're then going to talk",
    "start": "352880",
    "end": "358800"
  },
  {
    "text": "about controlling that user experience um because",
    "start": "358800",
    "end": "363919"
  },
  {
    "text": "i want to be able to move our webrtc application beyond uh just street video uh one-to-one chat",
    "start": "363919",
    "end": "370880"
  },
  {
    "text": "or or one-to-many chat i want to show the things that you can achieve",
    "start": "370880",
    "end": "376000"
  },
  {
    "text": "with the other bits that kind of work around webrtc to make these experiences possible and finally i've got a couple of tools",
    "start": "376000",
    "end": "382560"
  },
  {
    "text": "and takeaways for you right at the end so make sure you hang out till then and as i said please ask questions as we go",
    "start": "382560",
    "end": "389280"
  },
  {
    "text": "through i'm happy to answer things as we come as we go",
    "start": "389280",
    "end": "395400"
  },
  {
    "text": "so the basics of webrtc how does it all fit together well this is what a webrtc conversation",
    "start": "396479",
    "end": "404160"
  },
  {
    "text": "might start off looking like we have three participants we have somebody on a mobile device we have uh",
    "start": "404160",
    "end": "409759"
  },
  {
    "text": "we have a desktop computer apparently it's a floppy drive cd drive who knows uh and and a laptop here uh",
    "start": "409759",
    "end": "417520"
  },
  {
    "text": "and i have this kind of central servery kind of thing that we'll get to use in a minute and these three users participants uh",
    "start": "417520",
    "end": "425360"
  },
  {
    "text": "want to um talk to each other that wants to stream audio and video to each other and see",
    "start": "425360",
    "end": "431440"
  },
  {
    "text": "each other in real time in order to do that they first have to know that their other participants that",
    "start": "431440",
    "end": "437199"
  },
  {
    "text": "are the friends are available to talk to and for that that's the first thing we use our",
    "start": "437199",
    "end": "443840"
  },
  {
    "text": "uh server for uh we need to do some signaling uh we need to basically announce presence for a start",
    "start": "443840",
    "end": "451599"
  },
  {
    "text": "and then also be able to pass back and forth data about how you can connect to",
    "start": "451599",
    "end": "457840"
  },
  {
    "text": "the other participants that want to talk here and so once we normally a signaling",
    "start": "457840",
    "end": "464000"
  },
  {
    "text": "server is a websocket connection that way you can send and receive data without having to kind of reload a page",
    "start": "464000",
    "end": "469919"
  },
  {
    "text": "or anything and that is rather useful um so once you have some signaling set",
    "start": "469919",
    "end": "476720"
  },
  {
    "text": "up and you've passed back and forth that connection data there are two ways you can then connect",
    "start": "476720",
    "end": "483759"
  },
  {
    "text": "in a webrtc chat one of which is peer-to-peer and that's sort of the basics that webrtc was built for in the",
    "start": "483759",
    "end": "489759"
  },
  {
    "text": "first place it's peer-to-peer communication and which point each of the browsers on each of these devices is",
    "start": "489759",
    "end": "496080"
  },
  {
    "text": "able to directly connect and stream audio video and data to the other peer",
    "start": "496080",
    "end": "501360"
  },
  {
    "text": "and receive that uh receive that stream back from them",
    "start": "501360",
    "end": "506479"
  },
  {
    "text": "this is really good uh this is great this is probably the most um efficient way of doing things",
    "start": "506479",
    "end": "511599"
  },
  {
    "text": "for small groups of people because as you see uh in this example each of the participants is both sending",
    "start": "511599",
    "end": "519279"
  },
  {
    "text": "a stream to another participant and receiving streams from those participants so as the number of",
    "start": "519279",
    "end": "524640"
  },
  {
    "text": "participants increases uh your laptop has to send more streams and receive",
    "start": "524640",
    "end": "529760"
  },
  {
    "text": "more streams and that can get um that can get difficult i can get difficult for you for the cpu and for",
    "start": "529760",
    "end": "536480"
  },
  {
    "text": "bandwidth uh there are two two different ways that can get limiting uh on you cpu particularly i think on",
    "start": "536480",
    "end": "542000"
  },
  {
    "text": "the mobile devices uh is a difficult one uh and so if that is a problem and you need to be able to",
    "start": "542000",
    "end": "548480"
  },
  {
    "text": "have more peers join you can do so also via a server and this is not the same signaling server as earlier",
    "start": "548480",
    "end": "554800"
  },
  {
    "text": "this is what's called an sfu or selective forwarding unit in this setup",
    "start": "554800",
    "end": "559839"
  },
  {
    "text": "the peer that each of the participants joins uh and connects to is",
    "start": "559839",
    "end": "566640"
  },
  {
    "text": "uh is this is this sfu and so what this means is you only have to send out one stream of of media to",
    "start": "566640",
    "end": "573839"
  },
  {
    "text": "the uh to that server and then receive streams uh back from it for all the other participants",
    "start": "573839",
    "end": "580000"
  },
  {
    "text": "uh this means uh that it's easier to scale it's better scale but also um",
    "start": "580000",
    "end": "586160"
  },
  {
    "text": "uh that's sfu in the middle can actually then control other things about the the bandwidth and things like that it can um",
    "start": "586160",
    "end": "593040"
  },
  {
    "text": "re-encode re-encode video it can lower bandwidth requirements uh it can change priorities",
    "start": "593040",
    "end": "599519"
  },
  {
    "text": "of tracks things like that so um this allows you to scale a bit further uh but it does require the",
    "start": "599519",
    "end": "605279"
  },
  {
    "text": "central server so there are trade-offs in how you deal with webrtc um",
    "start": "605279",
    "end": "610320"
  },
  {
    "text": "but that's kind of how a connection looks now we have to cover a few um a few acronyms uh in this as",
    "start": "610320",
    "end": "617680"
  },
  {
    "text": "well just to know what we're talking about so um ice is the interactive",
    "start": "617680",
    "end": "624160"
  },
  {
    "text": "connectivity establishment protocol uh this is the thing that you will that those participants are sending around in",
    "start": "624160",
    "end": "630079"
  },
  {
    "text": "that signaling section of the of the connection and ice is in inter intended to",
    "start": "630079",
    "end": "638880"
  },
  {
    "text": "provide uh ultimately provide ip addresses and port numbers on which a browser can be",
    "start": "638880",
    "end": "645120"
  },
  {
    "text": "connected or contacted on now this is because we have um you know your your device on your",
    "start": "645120",
    "end": "651360"
  },
  {
    "text": "network uh probably has its own private ip address on that network and then the network itself will have a public ip",
    "start": "651360",
    "end": "656640"
  },
  {
    "text": "address and this is what we call network address translation um however in order for a browser",
    "start": "656640",
    "end": "663760"
  },
  {
    "text": "outside of your network to connect to you uh you need to be able to find that public address that can then be passed",
    "start": "663760",
    "end": "669519"
  },
  {
    "text": "through to a to the private one and connect you up so for that we use a stun server uh session traversal",
    "start": "669519",
    "end": "676560"
  },
  {
    "text": "utilities for nat a stun server basically um you can your browser makes a request to it and it tells it back",
    "start": "676560",
    "end": "683680"
  },
  {
    "text": "what that public ip address and port number is that it was making a request from",
    "start": "683680",
    "end": "688720"
  },
  {
    "text": "and that's where you can be contacted that's really useful sadly though some",
    "start": "688720",
    "end": "694640"
  },
  {
    "text": "particularly restrictive networks normally big corporate networks",
    "start": "694640",
    "end": "700560"
  },
  {
    "text": "don't allow for that to happen they don't allow for a public ip address connection for uh for an",
    "start": "700560",
    "end": "706959"
  },
  {
    "text": "a machine on the private network and so for that we need a turn server traversal using relays around nat i do like how",
    "start": "706959",
    "end": "714320"
  },
  {
    "text": "people come up with these names in order to background in things into it um",
    "start": "714320",
    "end": "719440"
  },
  {
    "text": "but basically the turn server acts a bit the same as the stun server in the first place but when it works out that it can't connect back",
    "start": "719440",
    "end": "725920"
  },
  {
    "text": "um you can make that connection to the turn server and then use the turn server's",
    "start": "725920",
    "end": "731120"
  },
  {
    "text": "public ip address and port number as a connection there",
    "start": "731120",
    "end": "736639"
  },
  {
    "text": "so participants in the chat can connect to the turn server and that",
    "start": "736639",
    "end": "741920"
  },
  {
    "text": "will relay the media through to your private network um thankfully",
    "start": "741920",
    "end": "747120"
  },
  {
    "text": "uh as this is this is the sort of thing that yeah big corporate networks tend to be a problem with uh it's actually not",
    "start": "747120",
    "end": "753120"
  },
  {
    "text": "as popular it's not as prevalent as being able to make a proper connection directly just using stun",
    "start": "753120",
    "end": "759519"
  },
  {
    "text": "but turn is there to media relay after if you need it",
    "start": "759519",
    "end": "765120"
  },
  {
    "text": "cool so let's have a look at the apis i like code instead of just talking about acronyms let's talk about the apis",
    "start": "765120",
    "end": "770560"
  },
  {
    "text": "themselves uh there's kind of three um objects slash functions methods that i",
    "start": "770560",
    "end": "777040"
  },
  {
    "text": "think are important to know about um and i'm gonna go go through and describe them right now",
    "start": "777040",
    "end": "783680"
  },
  {
    "text": "so we start with getusermedia getusemedia is far away my favorite uh",
    "start": "783680",
    "end": "790240"
  },
  {
    "text": "web api that we've put into browsers the first time i realized that we could",
    "start": "790240",
    "end": "795839"
  },
  {
    "text": "use a function in a browser to get access to camera and microphone of a user",
    "start": "795839",
    "end": "801120"
  },
  {
    "text": "i was just kind of blown away it was it was a thing you just couldn't do with the web before that so i was very excited about it",
    "start": "801120",
    "end": "806720"
  },
  {
    "text": "um and so the api has changed a little bit over time uh now it lives on this media devices object on the navigator",
    "start": "806720",
    "end": "812800"
  },
  {
    "text": "object and uh and and it returns promises uh used to be a used to be a callback um",
    "start": "812800",
    "end": "819920"
  },
  {
    "text": "but this is what it looks like right now and you pass a set of options instead of media constraints and we'll talk further about media constraints later",
    "start": "819920",
    "end": "826560"
  },
  {
    "text": "um in this case these are kind of the default constraints we want audio we want video",
    "start": "826560",
    "end": "832000"
  },
  {
    "text": "uh this is going to pop a permissions dialog to the user that's why it's a an asynchronous call",
    "start": "832000",
    "end": "837680"
  },
  {
    "text": "and if the user accepts the permissions then we'll get a media stream back and we can",
    "start": "837680",
    "end": "842959"
  },
  {
    "text": "use it in our connection i love how simple it is to get something",
    "start": "842959",
    "end": "849839"
  },
  {
    "text": "quite so complicated as a stream of audio and video it's just simply one function i love it uh we get into more",
    "start": "849839",
    "end": "857120"
  },
  {
    "text": "deep depths of what we can do with this later though next up is the rtc peerconnection object",
    "start": "857120",
    "end": "865680"
  },
  {
    "text": "we can initialize one of these and we initialize it using ice servers as a an argument",
    "start": "865760",
    "end": "871600"
  },
  {
    "text": "in the object this is why we need to kind of know underneath what those um what that terminology uh is so our",
    "start": "871600",
    "end": "877519"
  },
  {
    "text": "iservers are our stun and our turn servers for our interactive connectivity i always forget the e i don't know how i",
    "start": "877519",
    "end": "884160"
  },
  {
    "text": "forget this establishment for the interactive connectivity establishment protocol uh ice servers so this um",
    "start": "884160",
    "end": "891279"
  },
  {
    "text": "this object of servers um tends to include a sun server and a turn server at least one",
    "start": "891279",
    "end": "897519"
  },
  {
    "text": "of each and you tend to include credentials for return server at this point as well uh",
    "start": "897519",
    "end": "903839"
  },
  {
    "text": "since some media relay is more of an expensive operation uh you probably have your turn servers",
    "start": "903839",
    "end": "910399"
  },
  {
    "text": "behind a credential behind a username and password or something like that",
    "start": "910399",
    "end": "916160"
  },
  {
    "text": "um once you uh create your rtc connect pay a connection object like this you want to then listen",
    "start": "916160",
    "end": "922480"
  },
  {
    "text": "for ice candidates and those candidates are the ip address and port number pairs that your browser",
    "start": "922480",
    "end": "928800"
  },
  {
    "text": "may be contacted upon and so as the peer connection object goes out and finds them using those ice",
    "start": "928800",
    "end": "934320"
  },
  {
    "text": "servers uh it throws this event and you can send those off to um off to",
    "start": "934320",
    "end": "940560"
  },
  {
    "text": "other candidates uh through the signaling mechanism now we had our stream so we uh stream",
    "start": "940560",
    "end": "946079"
  },
  {
    "text": "back from get using get user media and we'll take our peer connection object we need to add the stream to that so that it can work out",
    "start": "946079",
    "end": "953759"
  },
  {
    "text": "what it can send to the other uh to the other participants in this as well um",
    "start": "953759",
    "end": "960000"
  },
  {
    "text": "so once we have our stream we have some uh we have our candidates uh we can create an offer and this offer basically",
    "start": "960000",
    "end": "965519"
  },
  {
    "text": "is this uh list of things that we can our browser can use to connect to other",
    "start": "965519",
    "end": "972160"
  },
  {
    "text": "browsers including uh the codecs that are available uh the streams that we're trying to send",
    "start": "972160",
    "end": "978639"
  },
  {
    "text": "those addresses we can be contacted on and and creating that offer just kind of",
    "start": "978639",
    "end": "984880"
  },
  {
    "text": "says this is all the things we can do so once we've created that offer we set that as our local description but then",
    "start": "984880",
    "end": "990160"
  },
  {
    "text": "using signaling send the offer to another peer that we're trying to connect to so that peer will receive an offer uh",
    "start": "990160",
    "end": "998399"
  },
  {
    "text": "via the signalling channel however that works and set it as the remote description of the peer that they're trying to connect to",
    "start": "998399",
    "end": "1004160"
  },
  {
    "text": "now once they've set that as a remote description they can create an answer basically comparing the original offer",
    "start": "1004160",
    "end": "1009920"
  },
  {
    "text": "uh with all the codecs and the addresses available for them uh with their own uh offer that they",
    "start": "1009920",
    "end": "1016720"
  },
  {
    "text": "kind of internally create uh that leads to kind of a what's hopefully an agreement a way that can be",
    "start": "1016720",
    "end": "1022880"
  },
  {
    "text": "connect they can be connected a shared codec that will be understood on both ends uh and that becomes the answer so we set",
    "start": "1022880",
    "end": "1030558"
  },
  {
    "text": "the local descriptions the answer and send that back to the peer which then sets it as a remote description",
    "start": "1030559",
    "end": "1036400"
  },
  {
    "text": "um once those two have agreed that is the agreement protocol there we uh as as",
    "start": "1036400",
    "end": "1041438"
  },
  {
    "text": "soon as the offer and the answer are sort of agreed upon then um we can start listening then the peer",
    "start": "1041439",
    "end": "1047678"
  },
  {
    "text": "connection object itself under the hood is going to do all of that connectivity and start sending the tracks back and",
    "start": "1047679",
    "end": "1054160"
  },
  {
    "text": "forth between the peers so what we have to do all we have left to do is add an event listener for a",
    "start": "1054160",
    "end": "1060720"
  },
  {
    "text": "track uh and when we receive that track we can then show it uh in the ui or you know make sound if",
    "start": "1060720",
    "end": "1068160"
  },
  {
    "text": "it's an audio track or do stuff with it if it's a if it's a data track",
    "start": "1068160",
    "end": "1073520"
  },
  {
    "text": "um so that's kind of that's the basic of basis of how a peer connection is put together",
    "start": "1073520",
    "end": "1079520"
  },
  {
    "text": "there's a bit more dancing around in terms of uh creating and and",
    "start": "1079520",
    "end": "1084799"
  },
  {
    "text": "sending those things down and signaling servers and things like that but that's that's kind of how it all comes",
    "start": "1084799",
    "end": "1090720"
  },
  {
    "text": "together and i mentioned data tracks at the end there uh that's using the rtc data",
    "start": "1090720",
    "end": "1096480"
  },
  {
    "text": "channel so we started with get user media which makes our audio and video but we can send arbitrary data down a",
    "start": "1096480",
    "end": "1103360"
  },
  {
    "text": "data channel as part of one of these peer connection objects as well and that allows us to send anything else we want",
    "start": "1103360",
    "end": "1109360"
  },
  {
    "text": "as part of this uh connected connectivity uh so to do so you use the peer",
    "start": "1109360",
    "end": "1114400"
  },
  {
    "text": "connection object to create a data channel and you can name it stuff and listen for message events coming down it",
    "start": "1114400",
    "end": "1121280"
  },
  {
    "text": "and you can do whatever you want with that message when it arrives in this case just logging it um",
    "start": "1121280",
    "end": "1126720"
  },
  {
    "text": "then uh kind of on the other side of the peer connection object you just need to listen for a new data channel event and",
    "start": "1126720",
    "end": "1132799"
  },
  {
    "text": "once you have them and this works a little bit like web sockets as well you need to listen to make sure that channel is open and once it is you can send data",
    "start": "1132799",
    "end": "1140320"
  },
  {
    "text": "down it using just this event channel send method nice and easy",
    "start": "1140320",
    "end": "1147120"
  },
  {
    "text": "and so with all of that with those things in hand we can get to work on improving the user",
    "start": "1147120",
    "end": "1152960"
  },
  {
    "text": "experience because like i said it's good to know and understand kind of what's going on under the hood",
    "start": "1152960",
    "end": "1158960"
  },
  {
    "text": "and then i mean there is under the hood of the itc peer connection objects itself which is doing a lot of work for",
    "start": "1158960",
    "end": "1164000"
  },
  {
    "text": "us but there's also um there are also libraries and frameworks that we can use to build this without",
    "start": "1164000",
    "end": "1170240"
  },
  {
    "text": "having to know that and that's useful but when it comes to the user experience that's where we can make a difference",
    "start": "1170240",
    "end": "1176000"
  },
  {
    "text": "that is the um that is the part of the call that we are now in control of and that's this what i",
    "start": "1176000",
    "end": "1181200"
  },
  {
    "text": "think is really interesting um so first off i want to go back to media i",
    "start": "1181200",
    "end": "1187600"
  },
  {
    "text": "get user media is really simple uh but there's more to it first up it's",
    "start": "1187600",
    "end": "1192720"
  },
  {
    "text": "important to know that uh i mentioned this pops up permissions dialogue earlier and if you accept the",
    "start": "1192720",
    "end": "1197760"
  },
  {
    "text": "permissions then the promise resolves and we end up with a stream object and that's great",
    "start": "1197760",
    "end": "1204559"
  },
  {
    "text": "but if the user does uh deny the permission then you do have to be ready to catch that and tell them about it",
    "start": "1204559",
    "end": "1211440"
  },
  {
    "text": "um i'm sure uh you know with the with the proliferation of other permissions",
    "start": "1211440",
    "end": "1216799"
  },
  {
    "text": "uh popping out of browsers at various different moments uh it's always easy it's always possible for somebody to",
    "start": "1216799",
    "end": "1223280"
  },
  {
    "text": "mistakenly block uh permission to a camera and uh microphone so",
    "start": "1223280",
    "end": "1228960"
  },
  {
    "text": "uh always gonna be ready to tell them what's happened there",
    "start": "1228960",
    "end": "1235520"
  },
  {
    "text": "now media constraints i'm just going to zero in on this uh on this object here that we were passing to get user media",
    "start": "1235520",
    "end": "1242400"
  },
  {
    "text": "this is a very basic kind of set of media constraints that says i would like a microphone and i would like a camera and i would like to stream from both of",
    "start": "1242400",
    "end": "1248640"
  },
  {
    "text": "them please and that's great but there's more to it there's more we can do with that",
    "start": "1248640",
    "end": "1254480"
  },
  {
    "text": "um first up if you're making a video chat of some sort then you likely want the",
    "start": "1254480",
    "end": "1261520"
  },
  {
    "text": "user um who's trying to chat to be on camera",
    "start": "1261520",
    "end": "1267440"
  },
  {
    "text": "now it's it we'll get to how to pick a specific camera in a bit but the easiest thing to do is set the",
    "start": "1267440",
    "end": "1274240"
  },
  {
    "text": "facing mode to say user because when you have particularly if you have a mobile device with cameras on both sides you probably",
    "start": "1274240",
    "end": "1281120"
  },
  {
    "text": "want the front camera in order to uh in order to have that user have their",
    "start": "1281120",
    "end": "1286320"
  },
  {
    "text": "face on camera rather than everything else around them uh so specifying uh in",
    "start": "1286320",
    "end": "1291440"
  },
  {
    "text": "the media constraints that you are facing mode of user will get you that front camera at least on a mobile device",
    "start": "1291440",
    "end": "1297360"
  },
  {
    "text": "if uh if you're on a laptop at that point then most cameras face the user at that point",
    "start": "1297360",
    "end": "1303039"
  },
  {
    "text": "um facing mode has four potential options uh which i think are really interesting so environment tends to be the back",
    "start": "1303039",
    "end": "1309120"
  },
  {
    "text": "camera on a mobile device um and still whatever your default camera is",
    "start": "1309120",
    "end": "1314400"
  },
  {
    "text": "uh in a in a laptop or something right and left are supposed to be i think cameras to the right or left of",
    "start": "1314400",
    "end": "1321280"
  },
  {
    "text": "the user but i've honestly and genuinely never seen that work so i don't know",
    "start": "1321280",
    "end": "1327840"
  },
  {
    "text": "i don't know what's going on with those but facing mode user or facing mode environment allows you to specify basically",
    "start": "1327840",
    "end": "1333760"
  },
  {
    "text": "front-facing cameras or back-facing cameras and are really useful now you can",
    "start": "1333760",
    "end": "1339679"
  },
  {
    "text": "set a device id for a for a camera or a microphone indeed i'm just using video as the",
    "start": "1339679",
    "end": "1345679"
  },
  {
    "text": "example here and if you set using this object saying exact and this device id then you can",
    "start": "1345679",
    "end": "1352400"
  },
  {
    "text": "select a device specifically uh if a person has mobile one camera more than one",
    "start": "1352400",
    "end": "1357760"
  },
  {
    "text": "microphone you can do this i have a weird array of cameras and we'll see that in a minute",
    "start": "1357760",
    "end": "1363280"
  },
  {
    "text": "um but what you need to do of course is get that device id you can't just know it",
    "start": "1363280",
    "end": "1368880"
  },
  {
    "text": "and this is where the enumerate devices method comes into play it also lives on the media devices",
    "start": "1368880",
    "end": "1375280"
  },
  {
    "text": "object next to get user media and whilst it doesn't require permissions",
    "start": "1375280",
    "end": "1380400"
  },
  {
    "text": "dialogue to deal with this it still is a promise-based api and when you call off to enumerate devices",
    "start": "1380400",
    "end": "1388000"
  },
  {
    "text": "the promise will resolve with a list of available devices on the machine that",
    "start": "1388000",
    "end": "1393120"
  },
  {
    "text": "you the user is using this is really useful in this particular uh example all i'm going to do is uh is",
    "start": "1393120",
    "end": "1400159"
  },
  {
    "text": "just loop through those devices and log out their id and their label now there's an interesting problem here",
    "start": "1400159",
    "end": "1406240"
  },
  {
    "text": "though some browsers uh do not uh tell you what the device labels are",
    "start": "1406240",
    "end": "1412640"
  },
  {
    "text": "until you have actually requested and got permission to access the camera and audio uh the camera microphone in the",
    "start": "1412640",
    "end": "1419440"
  },
  {
    "text": "first place uh this is a protection against fingerprinting uh so that um you know the browser or",
    "start": "1419440",
    "end": "1426880"
  },
  {
    "text": "malicious code can't kind of enumerate all the devices you have and use that to identify you around the web",
    "start": "1426880",
    "end": "1433200"
  },
  {
    "text": "um so until you have given permission for access to the camera this label will be empty and indeed i",
    "start": "1433200",
    "end": "1440480"
  },
  {
    "text": "have an example of that so i have a just a demo app here for playing around with",
    "start": "1440480",
    "end": "1446480"
  },
  {
    "text": "cameras and if i look at this um drop down uh in the middle this is being built out of a",
    "start": "1446480",
    "end": "1454240"
  },
  {
    "text": "call to enumerate devices and i had to make up labels for the cameras i didn't have uh so i apparently have five camera",
    "start": "1454240",
    "end": "1461279"
  },
  {
    "text": "devices on here the two of them are virtual three of them are real cameras and we'll see that in a second uh so if",
    "start": "1461279",
    "end": "1466720"
  },
  {
    "text": "i go and request access to the camera and there i am on screen again um now",
    "start": "1466720",
    "end": "1473200"
  },
  {
    "text": "enumerate devices can go through and get all the labels and you can see that this is my usb capture hdmi and i've got",
    "start": "1473200",
    "end": "1478880"
  },
  {
    "text": "other ones i've got facetime i've got c922 and then two virtual ones which definitely won't work",
    "start": "1478880",
    "end": "1484320"
  },
  {
    "text": "um so until you've got permission in the first place you cannot know those labels uh",
    "start": "1484320",
    "end": "1489760"
  },
  {
    "text": "and so you need to plan accordingly for that let's stop sharing that for a sec",
    "start": "1489760",
    "end": "1497120"
  },
  {
    "text": "otherwise the new rate device is really useful and once you have that device id um",
    "start": "1497600",
    "end": "1502720"
  },
  {
    "text": "uh you can use that to request like a different camera so in this case",
    "start": "1502720",
    "end": "1507840"
  },
  {
    "text": "uh even though my camera 2 there was always going to be was there going to be my facetime camera sweet",
    "start": "1507840",
    "end": "1516480"
  },
  {
    "text": "next up is uh it's resolution um what's interesting is uh when you uh set",
    "start": "1516640",
    "end": "1522720"
  },
  {
    "text": "if you just send in the defaults you don't tend to get a great resolution out of the camera that you're asking for at least in my experience",
    "start": "1522720",
    "end": "1529360"
  },
  {
    "text": "uh the default is actually like 640 by 480 i think",
    "start": "1529360",
    "end": "1535039"
  },
  {
    "text": "and so um you can set in the resolution of the video in this case by sending in a width",
    "start": "1535039",
    "end": "1540799"
  },
  {
    "text": "or a height now this is just a suggestion to the browser it's saying hey i'd love to get 1920x1080 i'd love",
    "start": "1540799",
    "end": "1546960"
  },
  {
    "text": "1080p high definition video please can i have that but don't worry just give me the",
    "start": "1546960",
    "end": "1552320"
  },
  {
    "text": "best you've got you can give those restrictions in a slightly different way you can give a",
    "start": "1552320",
    "end": "1557600"
  },
  {
    "text": "min and a max and an ideal saying you know what i what i'd really like but what i'm happy for it's fall within",
    "start": "1557600",
    "end": "1564080"
  },
  {
    "text": "um and you can ask for those exact resolutions but you run the risk here",
    "start": "1564080",
    "end": "1570400"
  },
  {
    "text": "and with any of these media constraints you always run the risk of over constraining the browser and and if it's",
    "start": "1570400",
    "end": "1577360"
  },
  {
    "text": "unable to provide the the request that you've asked for uh then you will it will throw an",
    "start": "1577360",
    "end": "1583440"
  },
  {
    "text": "over-constrained error in this particular case uh i think",
    "start": "1583440",
    "end": "1588960"
  },
  {
    "text": "uh if i actually go back to this example this is in firefox and so i'm going to start by taking out",
    "start": "1588960",
    "end": "1595919"
  },
  {
    "text": "width and height i'm not going to ask for a particular width and height and so",
    "start": "1595919",
    "end": "1601200"
  },
  {
    "text": "this has now taken my hd camera but it's actually got it in 640",
    "start": "1601200",
    "end": "1607360"
  },
  {
    "text": "by 480 which you know not great it doesn't look too bad but it's not the best of uh",
    "start": "1607360",
    "end": "1613440"
  },
  {
    "text": "best of resolutions and it's certainly not what it's certainly less than my",
    "start": "1613440",
    "end": "1618640"
  },
  {
    "text": "camera can uh achieve and so if i ask firefox in this case",
    "start": "1618640",
    "end": "1624720"
  },
  {
    "text": "uh i'd like 1080p resolution please from this camera uh it doesn't give it to me i don't know",
    "start": "1624720",
    "end": "1631520"
  },
  {
    "text": "why firefox seems unable to give me uh 1080p from this camera it can give me 720p that'll give me 1280",
    "start": "1631520",
    "end": "1638960"
  },
  {
    "text": "by 720. that's fine that's it's cool sure um we have at least changed the uh the",
    "start": "1638960",
    "end": "1644960"
  },
  {
    "text": "actual um resolution we're now in 16 9 rather than 4 3 which we started in",
    "start": "1644960",
    "end": "1651440"
  },
  {
    "text": "because and we can like you know we can ask to go down as well we can go 640 by 480 and then chop the sides off",
    "start": "1651440",
    "end": "1657919"
  },
  {
    "text": "uh go go down to there but i do find it odd i don't know why firefox can't do this and if i asked",
    "start": "1657919",
    "end": "1663600"
  },
  {
    "text": "firefox for an exact 1920x1080 i'd get that over constrained error i can go",
    "start": "1663600",
    "end": "1668880"
  },
  {
    "text": "back and this is chrome and let's see if i can get 1920",
    "start": "1668880",
    "end": "1674320"
  },
  {
    "text": "by 1080 out of this camera",
    "start": "1674320",
    "end": "1679600"
  },
  {
    "text": "we do right so in chrome we can get this uh and and it's very happy about it which is",
    "start": "1679600",
    "end": "1685520"
  },
  {
    "text": "good and we can go down really low as well i think uh whoa chrome is actually very happy to",
    "start": "1685520",
    "end": "1692480"
  },
  {
    "text": "give me um anything that i ask for and so in this case since i hit height of",
    "start": "1692480",
    "end": "1697520"
  },
  {
    "text": "zero it gave me a height of one uh which is not great um but there we go you can actually see",
    "start": "1697520",
    "end": "1703360"
  },
  {
    "text": "some pixelation where i can see some pixelation on this 320 by 240 version",
    "start": "1703360",
    "end": "1708399"
  },
  {
    "text": "um so chrome will is is much better at giving those um uh",
    "start": "1708399",
    "end": "1714320"
  },
  {
    "text": "those constraints than firefox is uh but the most important thing to be aware of is this over constrained error just uh",
    "start": "1714320",
    "end": "1720480"
  },
  {
    "text": "be careful that um you don't over constrain a browser",
    "start": "1720480",
    "end": "1725840"
  },
  {
    "text": "next up there are a bunch of more advanced media constraints and i do recommend you kind of take a look through the list",
    "start": "1727200",
    "end": "1733440"
  },
  {
    "text": "there is actually there's a function where you can list out the supported media constraints uh in your browser but",
    "start": "1733440",
    "end": "1739679"
  },
  {
    "text": "one i just wanted to talk about because i thought it's it's both interesting that you can do it uh and also maybe",
    "start": "1739679",
    "end": "1744799"
  },
  {
    "text": "it's not that useful either uh is the torch um",
    "start": "1744799",
    "end": "1750559"
  },
  {
    "text": "if you if you uh so when you're setting media constraints uh from the advanced section you pass in",
    "start": "1750559",
    "end": "1757200"
  },
  {
    "text": "a list of objects uh and in this case we passing torches true and we can turn on the torch on a",
    "start": "1757200",
    "end": "1763120"
  },
  {
    "text": "supported device and so i have an android device here which supports that um",
    "start": "1763120",
    "end": "1768880"
  },
  {
    "text": "weird thing is you can't turn it off again you can't pass a constraint in to say hey i know i no longer want this",
    "start": "1768880",
    "end": "1774640"
  },
  {
    "text": "torch it just doesn't turn it off it's weird but it's what it does um",
    "start": "1774640",
    "end": "1780880"
  },
  {
    "text": "i'll talk about why i think that is later but let's just see it working in action first so i'm going to get the",
    "start": "1780880",
    "end": "1786240"
  },
  {
    "text": "camera and see hopefully you can see there we go that's me on camera on this device",
    "start": "1786240",
    "end": "1792480"
  },
  {
    "text": "and uh i can toggle the torch i've got a little button there and the torch is on um",
    "start": "1792480",
    "end": "1798159"
  },
  {
    "text": "but like that button should toggle it off again but it does not uh the only way to stop it again is",
    "start": "1798159",
    "end": "1804880"
  },
  {
    "text": "either to refresh the page this is what i'm gonna do now off or stop the video track entirely and so i",
    "start": "1804880",
    "end": "1812559"
  },
  {
    "text": "think this does have a use case i think its use cases around scanning things uh reading things uh via",
    "start": "1812559",
    "end": "1819600"
  },
  {
    "text": "the camera which i think is interesting like if you're scanning a barcode and you might be doing it in the dark you can turn the",
    "start": "1819600",
    "end": "1825039"
  },
  {
    "text": "torch on but once you've finished scanning it once it's done a complete and correct scan",
    "start": "1825039",
    "end": "1830640"
  },
  {
    "text": "uh at that point you don't need the video track anymore and you can you can turn it off and that will turn the torch off again so if you're if you're",
    "start": "1830640",
    "end": "1836960"
  },
  {
    "text": "building a barcode scanner check out the the torch media constraint but also you know there are other advanced ones",
    "start": "1836960",
    "end": "1842559"
  },
  {
    "text": "available to you uh now i've just kind of shown the media constraints so far",
    "start": "1842559",
    "end": "1849200"
  },
  {
    "text": "and we've seen media constraints in use when calling straight to get user media",
    "start": "1849200",
    "end": "1855440"
  },
  {
    "text": "but you can actually apply media constraints to a track that you already have access to",
    "start": "1855440",
    "end": "1861120"
  },
  {
    "text": "and so in this case and in my example if i'm using the same video track",
    "start": "1861120",
    "end": "1866320"
  },
  {
    "text": "then i can apply the constraints and change the resolution or at least request a change in resolution",
    "start": "1866320",
    "end": "1872399"
  },
  {
    "text": "just by using apply constraints like this one thing i'd like to warn about here is",
    "start": "1872399",
    "end": "1878000"
  },
  {
    "text": "not to do that with the device id constraint um but this does work on some browsers but it most importantly just",
    "start": "1878000",
    "end": "1884640"
  },
  {
    "text": "doesn't work on safari particularly on ios aspiring ios is not",
    "start": "1884640",
    "end": "1890399"
  },
  {
    "text": "happy about you having access to more than one video track at any one time uh more than one",
    "start": "1890399",
    "end": "1896799"
  },
  {
    "text": "camera track that is sorry at any one time and if you try and do this then you haven't finished the old track by the",
    "start": "1896799",
    "end": "1902640"
  },
  {
    "text": "time you're asking for the new track and safari gives up on you it's a bit unfair so if you are trying to change the",
    "start": "1902640",
    "end": "1909600"
  },
  {
    "text": "camera itself don't try and apply constraints uh stop a camera",
    "start": "1909600",
    "end": "1914640"
  },
  {
    "text": "stop the camera and then re-ask for permission to the new camera and uh and it will work in all browsers",
    "start": "1914640",
    "end": "1921279"
  },
  {
    "text": "this way around it is a shame i'd love to be able to use",
    "start": "1921279",
    "end": "1926640"
  },
  {
    "text": "both front and back camera for interesting kind of work on the ios but you just can't do it they won't let you",
    "start": "1926640",
    "end": "1933600"
  },
  {
    "text": "what are we gonna do about it uh so i have shown a bit of a demo um so",
    "start": "1933600",
    "end": "1940080"
  },
  {
    "text": "far uh with this little um uh resolution thing but i do wanna i just changed that up for",
    "start": "1940080",
    "end": "1946399"
  },
  {
    "text": "i've been working on a bit of a more involved video collaboration uh application in the browser",
    "start": "1946399",
    "end": "1952159"
  },
  {
    "text": "and uh and i have a couple of kind of recommendations out of this section to do with media constraints um the first",
    "start": "1952159",
    "end": "1957440"
  },
  {
    "text": "is uh let's use a nice one uh i use my microphone",
    "start": "1957440",
    "end": "1962960"
  },
  {
    "text": "um always provide a preview for your users like this like be able allow them to",
    "start": "1962960",
    "end": "1968159"
  },
  {
    "text": "check that their video is working and allow them to choose and change things so if they decide they don't want",
    "start": "1968159",
    "end": "1974240"
  },
  {
    "text": "this particular camera we could move to a different one uh one over there yes um",
    "start": "1974240",
    "end": "1979760"
  },
  {
    "text": "and i will talk about this uh audio thing as well we should be able to change microphone as well",
    "start": "1979760",
    "end": "1984960"
  },
  {
    "text": "uh being able to do this before you join a room before you join a video chat allows users to you know get comfortable",
    "start": "1984960",
    "end": "1992000"
  },
  {
    "text": "with what they are streaming and uh and make sure it's working as well",
    "start": "1992000",
    "end": "1998000"
  },
  {
    "text": "so always provide a way to check and change those inputs and mastering media constraints is the",
    "start": "1998000",
    "end": "2004240"
  },
  {
    "text": "way to handle that uh and so of understand the available media constraints to you",
    "start": "2004240",
    "end": "2010080"
  },
  {
    "text": "uh things like resolution are um are really useful for things like video but there are a bunch of others that you can",
    "start": "2010080",
    "end": "2016240"
  },
  {
    "text": "take advantage of as well um just make sure they are also capable in that browser that you're using",
    "start": "2016240",
    "end": "2023360"
  },
  {
    "text": "next up is screen share um screen share has been a painful thing on the web for years",
    "start": "2023360",
    "end": "2029120"
  },
  {
    "text": "because it used to require you to build an extension in order to access the screen",
    "start": "2029120",
    "end": "2035840"
  },
  {
    "text": "terrible thankfully the browsers got together and sorted that out and we now have another function on the media",
    "start": "2035840",
    "end": "2041440"
  },
  {
    "text": "devices object get display media and get display media works almost the same as get user media um it returns a uh",
    "start": "2041440",
    "end": "2049599"
  },
  {
    "text": "returns a promise uh which ultimately resolves to a video stream of the uh of",
    "start": "2049599",
    "end": "2055118"
  },
  {
    "text": "the display chosen uh gets played media will trigger a permissions dialogue",
    "start": "2055119",
    "end": "2061599"
  },
  {
    "text": "and most importantly um whilst it is possible in um if i just",
    "start": "2061599",
    "end": "2066878"
  },
  {
    "text": "do this uh in in firefox you can it's probably a little bit small because it's part of the ui here but there's a little checkbox there saying remember this",
    "start": "2066879",
    "end": "2073200"
  },
  {
    "text": "decision are you allowed to you can always you can have the site the browser",
    "start": "2073200",
    "end": "2079200"
  },
  {
    "text": "remember that the site is allowed to access this camera but when we're dealing with uh get display media and",
    "start": "2079200",
    "end": "2086079"
  },
  {
    "text": "the screen that permissions dialog will always pop up there is no remember this and this is so a malicious site can't",
    "start": "2086079",
    "end": "2092878"
  },
  {
    "text": "kind of get access to the stream screen one time and then surreptitiously start recording the screen somewhat sometime",
    "start": "2092879",
    "end": "2099359"
  },
  {
    "text": "later when you might be using that screen for something else that you're not aware of uh so there's always permissions for",
    "start": "2099359",
    "end": "2105119"
  },
  {
    "text": "this and that's important that's an important part of the web so i can show you screen share of work",
    "start": "2105119",
    "end": "2111599"
  },
  {
    "text": "uh let's that's not that's so that's a virtual camera that's not gonna work at all let's uh let's",
    "start": "2111599",
    "end": "2118880"
  },
  {
    "text": "okay sure we'll use the facetime camera it's not very pretty and so i'm just gonna log into a video",
    "start": "2119359",
    "end": "2125200"
  },
  {
    "text": "chat room here um and my video should come up there it is",
    "start": "2125200",
    "end": "2131119"
  },
  {
    "text": "uh i'll come back to that later too um and i can share screen and so in firefox",
    "start": "2131119",
    "end": "2137680"
  },
  {
    "text": "we get this uh allow localhost to see your screen i'm just running this locally and either windows or screens that i can",
    "start": "2137680",
    "end": "2144720"
  },
  {
    "text": "look at so uh i got screen one what's on there uh that's a bunch of code i was working",
    "start": "2144720",
    "end": "2151119"
  },
  {
    "text": "on uh and screen two i think is slack and webex yeah there we go uh",
    "start": "2151119",
    "end": "2158640"
  },
  {
    "text": "and screen three is the one we're looking at right now so i like the way that firefox deals with this you've got this little uh preview window of it",
    "start": "2158640",
    "end": "2164800"
  },
  {
    "text": "uh and let's do it let's go into infinity share the screen that is sharing the screen that's showing the screen there we go",
    "start": "2164800",
    "end": "2171440"
  },
  {
    "text": "and we have access to this i love this um it's just another nice easy api that we",
    "start": "2171440",
    "end": "2177920"
  },
  {
    "text": "can use on the web to do powerful things um now we see right in the middle it's a",
    "start": "2177920",
    "end": "2184160"
  },
  {
    "text": "little bit small but we've got this you're sharing your entire screen uh overlay uh which also has a little",
    "start": "2184160",
    "end": "2189680"
  },
  {
    "text": "button this comes up in five um sorry in chrome as well when you're using chromium-based browsers a similar one uh",
    "start": "2189680",
    "end": "2195760"
  },
  {
    "text": "normally has a stop sharing button uh which you need to handle you need to handle the track stopped event uh if",
    "start": "2195760",
    "end": "2201359"
  },
  {
    "text": "somebody clicks on that and so again if i click share screen again it's going to um ask me for",
    "start": "2201359",
    "end": "2208160"
  },
  {
    "text": "permission again which is great and it's going to show me that and there",
    "start": "2208160",
    "end": "2213359"
  },
  {
    "text": "we go uh and back on the screen uh but you also stop the track yourself just with a",
    "start": "2213359",
    "end": "2218720"
  },
  {
    "text": "button there and we're back in control i'm gonna disconnect from that for the second",
    "start": "2218720",
    "end": "2224160"
  },
  {
    "text": "so sharing screens super easy uh no longer need to use an extension if you",
    "start": "2224160",
    "end": "2229280"
  },
  {
    "text": "google for how to screen share in a browser i actually have a bunch of blog posts which might come up in that search",
    "start": "2229280",
    "end": "2234880"
  },
  {
    "text": "result and some of them say here's how to build an extension do not pay attention to me use get display media",
    "start": "2234880",
    "end": "2240720"
  },
  {
    "text": "it's the right way um now the web audio api not strictly part",
    "start": "2240720",
    "end": "2246960"
  },
  {
    "text": "of webrtc but i think it's super important for this little web ap the web audio api allows us to",
    "start": "2246960",
    "end": "2253760"
  },
  {
    "text": "create manipulate and analyze audio in the browser",
    "start": "2253760",
    "end": "2258880"
  },
  {
    "text": "now in these calls i don't think i necessarily need to create or manipulate audio but analyzing it is really",
    "start": "2258880",
    "end": "2264640"
  },
  {
    "text": "important and i think it's a vital part of displaying audio to the user and this",
    "start": "2264640",
    "end": "2270400"
  },
  {
    "text": "comes into that part where we're checking whether a user is um is ready and comfortable to join a chat",
    "start": "2270400",
    "end": "2277839"
  },
  {
    "text": "and so if i go back to the demo here you've already seen this this visualization here underneath the video",
    "start": "2277839",
    "end": "2283200"
  },
  {
    "text": "that says hey um the microphone is working and uh",
    "start": "2283200",
    "end": "2289440"
  },
  {
    "text": "and it shows these the microphones working uh other kind of ways you can test this is have somebody kind of talk into this",
    "start": "2289440",
    "end": "2295760"
  },
  {
    "text": "and then record that and play it back to them but i really like this is just a an obvious visualization of audio as you're",
    "start": "2295760",
    "end": "2301520"
  },
  {
    "text": "making it um there's a couple of things we can do this as well uh if i pick a microphone",
    "start": "2301520",
    "end": "2307200"
  },
  {
    "text": "that is not a microphone like like this loopback one um there's nothing there at",
    "start": "2307200",
    "end": "2313200"
  },
  {
    "text": "all uh and that's that's actually something we could be um detecting inside this application you've",
    "start": "2313200",
    "end": "2318640"
  },
  {
    "text": "got a microphone uh it's either hardware muted or not producing any audio whatsoever",
    "start": "2318640",
    "end": "2324640"
  },
  {
    "text": "so you might want to check that uh because even if uh i have my actual microphone on",
    "start": "2324640",
    "end": "2330960"
  },
  {
    "text": "uh and i don't say anything if i go quiet for a second we can still see that's picking up some",
    "start": "2330960",
    "end": "2336240"
  },
  {
    "text": "background noise and so that is at least saying that there might be silence but uh we're we're detecting something",
    "start": "2336240",
    "end": "2343359"
  },
  {
    "text": "background if you get nothing at all um then you can notify the user and say",
    "start": "2343359",
    "end": "2349040"
  },
  {
    "text": "hey your microphone's not working we're expecting to get some audio out of this i think that's important right it's",
    "start": "2349040",
    "end": "2355520"
  },
  {
    "text": "going to save us having people shout you're a mute at people because it's the worst problem we have",
    "start": "2355520",
    "end": "2361920"
  },
  {
    "text": "in all video conversations uh is uh you know because people can see each other see themselves on the camera",
    "start": "2361920",
    "end": "2368320"
  },
  {
    "text": "but they can't in many different way apps and things that we do can't see if they are making",
    "start": "2368320",
    "end": "2374079"
  },
  {
    "text": "sound to other people and so euromute is as a problem we can solve firstly by",
    "start": "2374079",
    "end": "2380240"
  },
  {
    "text": "using that web audio api to check that there's some sound coming from the microphone and displaying things to",
    "start": "2380240",
    "end": "2385520"
  },
  {
    "text": "somebody else and secondly um when you're in a call uh",
    "start": "2385520",
    "end": "2392720"
  },
  {
    "text": "when you're in a call uh yeah i'm gonna join the call uh and mute myself um we can also kind of",
    "start": "2393599",
    "end": "2399760"
  },
  {
    "text": "detect the idea of so muting here is actually just disabling sending that audio to the connection but we still",
    "start": "2399760",
    "end": "2406880"
  },
  {
    "text": "have access to the to the microphone so what we can do is uh clone that audio stream and pop it into a web audio api",
    "start": "2406880",
    "end": "2413440"
  },
  {
    "text": "analyzer and and then if um if i'm muted within the application but i'm kind of",
    "start": "2413440",
    "end": "2420720"
  },
  {
    "text": "crossing a threshold of audio uh anyway we can we can show a message",
    "start": "2420720",
    "end": "2426319"
  },
  {
    "text": "to say hey are you talking using your mute uh so having the application shout you're on mute uh at the person",
    "start": "2426319",
    "end": "2434640"
  },
  {
    "text": "i think that's a better way of doing it and that way they can check either unmute themselves or indeed um",
    "start": "2434640",
    "end": "2441680"
  },
  {
    "text": "like i said if we have that issue with the hardware mute uh something like that we can say we're getting no audio from you so are you on are you trying to say",
    "start": "2441680",
    "end": "2448160"
  },
  {
    "text": "something what's happening um so yeah it's a it's a simple little",
    "start": "2448160",
    "end": "2454560"
  },
  {
    "text": "thing that we can do using the web audio api that just makes uh a conversation like this better",
    "start": "2454560",
    "end": "2461359"
  },
  {
    "text": "next up uh talk about the data channel um i showed kind of how you add a data",
    "start": "2463760",
    "end": "2469040"
  },
  {
    "text": "channel here and how you can use it to listen for incoming messages or send out messages",
    "start": "2469040",
    "end": "2474240"
  },
  {
    "text": "the beauty of this is the data is completely arbitrary and so i have a couple of demos just to",
    "start": "2474240",
    "end": "2479520"
  },
  {
    "text": "show what you can do with this i'm going to leave this version of the app behind i",
    "start": "2479520",
    "end": "2484720"
  },
  {
    "text": "actually have a second version of the app which is not quite so pretty and it's lobby",
    "start": "2484720",
    "end": "2490640"
  },
  {
    "text": "as you can see here but does have extra things um",
    "start": "2490640",
    "end": "2496640"
  },
  {
    "text": "uh does have extra things in uh in it whilst it's on now i don't need uh",
    "start": "2497119",
    "end": "2503599"
  },
  {
    "text": "sound at this point because i will definitely myself in fact i do like to mute that just in case",
    "start": "2503920",
    "end": "2510240"
  },
  {
    "text": "i'm going to use two different cameras so that you can see two different me's in this",
    "start": "2510240",
    "end": "2515920"
  },
  {
    "text": "um oops don't use the same name or i'll get myself kicked out",
    "start": "2515920",
    "end": "2522560"
  },
  {
    "text": "and so here i am joining two rooms at the same time and just muting just to make sure",
    "start": "2522560",
    "end": "2529280"
  },
  {
    "text": "that there's no audio coming from the supposed microphone i'm using and so in this application i have built",
    "start": "2529280",
    "end": "2535119"
  },
  {
    "text": "a couple of additional things one is uh reactions and so this literally uh uses",
    "start": "2535119",
    "end": "2541119"
  },
  {
    "text": "the data channel to send that emoji down as part of a tiny json object",
    "start": "2541119",
    "end": "2546319"
  },
  {
    "text": "and you can send that down and you can see that i'm happy on on this side where i'm clicking it on the left hand side but on the right hand side that's also",
    "start": "2546319",
    "end": "2552240"
  },
  {
    "text": "appearing uh for the other person i also like the idea that in this one we can have different levels of emotion uh that",
    "start": "2552240",
    "end": "2558960"
  },
  {
    "text": "we can pass over and so if you click it five times it grows to five times the size and you can",
    "start": "2558960",
    "end": "2564560"
  },
  {
    "text": "pretend to be a really happy emoji",
    "start": "2564560",
    "end": "2569920"
  },
  {
    "text": "um or face bomb of course also useful",
    "start": "2570079",
    "end": "2575359"
  },
  {
    "text": "that was useful like i said it's just sending a little uh object um across the data channel that kind of",
    "start": "2575359",
    "end": "2581040"
  },
  {
    "text": "says this is a reaction and this is the the available reaction that we're sending really useful uh the second one i built",
    "start": "2581040",
    "end": "2587280"
  },
  {
    "text": "into this is a whiteboard session and so this firstly triggers to say hey join the whiteboard and then as i draw",
    "start": "2587280",
    "end": "2596319"
  },
  {
    "text": "on the whiteboard sends those drawings across to be drawn on a canvas on the other side",
    "start": "2596319",
    "end": "2602880"
  },
  {
    "text": "i can't obviously my handwriting in this is terrible but um",
    "start": "2602880",
    "end": "2608640"
  },
  {
    "text": "and you know if we pick the other other side we can actually draw something back and send it back i'm",
    "start": "2608640",
    "end": "2614240"
  },
  {
    "text": "gonna send a little smiley face because i'm pretty happy with all of this oop let's fill that in",
    "start": "2614240",
    "end": "2620560"
  },
  {
    "text": "uh and that gets sent over i'm still on yellow army nope there we",
    "start": "2620560",
    "end": "2627040"
  },
  {
    "text": "go i'll smiley face",
    "start": "2627040",
    "end": "2630799"
  },
  {
    "text": "and possibly pushing my computer a little far here and that's not the smartest of faces is it oh my goodness it was halloween last weekend and that",
    "start": "2632640",
    "end": "2638720"
  },
  {
    "text": "is a halloween smiley face if you ask me um cool i'm gonna disconnect and stop",
    "start": "2638720",
    "end": "2643839"
  },
  {
    "text": "this whiteboard session because i think that is causing my machine to be very unhappy",
    "start": "2643839",
    "end": "2649520"
  },
  {
    "text": "with me i'll go back to the slides instead um but right that data channel is is just",
    "start": "2649520",
    "end": "2656240"
  },
  {
    "text": "there for you to share data across like that and it's brilliant and so finally",
    "start": "2656240",
    "end": "2661520"
  },
  {
    "text": "i want to close up with a couple of useful tools which i think will be useful for you if you are building applications",
    "start": "2661520",
    "end": "2667599"
  },
  {
    "text": "like this um and first i want to talk to you about",
    "start": "2667599",
    "end": "2672960"
  },
  {
    "text": "some open source diagnostic tooling now twilio uh does provide a um",
    "start": "2672960",
    "end": "2679200"
  },
  {
    "text": "uh does have a a product where we allow you to build webrtc video uh",
    "start": "2679200",
    "end": "2684240"
  },
  {
    "text": "applications um that's a paid for product i'm not here to talk about that but earlier this year",
    "start": "2684240",
    "end": "2690640"
  },
  {
    "text": "we open sourced a set of diagnostics tooling that you can use in any video applications to give",
    "start": "2690640",
    "end": "2697599"
  },
  {
    "text": "you access to some interesting data and help you get users",
    "start": "2697599",
    "end": "2702800"
  },
  {
    "text": "from uh joining the call to uh to a successful call so i have a little demo",
    "start": "2702800",
    "end": "2707839"
  },
  {
    "text": "of how that works right now uh i'm gonna close that down",
    "start": "2707839",
    "end": "2713920"
  },
  {
    "text": "and uh this was just a demo page i wrote using the tooling underneath and",
    "start": "2714880",
    "end": "2720880"
  },
  {
    "text": "the drawing allows us to do four tests now i've uh kind of talked about testing audio input and video input so far",
    "start": "2720880",
    "end": "2726720"
  },
  {
    "text": "um but that's not all like we be able to test the connection speed",
    "start": "2726720",
    "end": "2732400"
  },
  {
    "text": "is really useful to understand like what um what resolution you should be requesting",
    "start": "2732400",
    "end": "2738720"
  },
  {
    "text": "the video at and uh and somebody like um bitrate of the audio",
    "start": "2738720",
    "end": "2744560"
  },
  {
    "text": "so that you can be confident it's going to send it across the wire and so the bitrate test here allows actually does",
    "start": "2744560",
    "end": "2750319"
  },
  {
    "text": "make a connection to uh to a twilio server in the background here uh only in order to test",
    "start": "2750319",
    "end": "2756079"
  },
  {
    "text": "the bitrate and uh i was uh i was playing with this yesterday uh yesterday evening and uh my",
    "start": "2756079",
    "end": "2762880"
  },
  {
    "text": "bit rate was much worse assumedly because everybody was on the internet on the nbn uh last night",
    "start": "2762880",
    "end": "2769920"
  },
  {
    "text": "uh and making me around 4k rather than 12k as i got here from my 13",
    "start": "2769920",
    "end": "2775040"
  },
  {
    "text": "measurements so the bitrate test gives us that confidence in the connection of a user",
    "start": "2775040",
    "end": "2780400"
  },
  {
    "text": "the audio input test is great because you can pick a microphone and and it's going to give you a volume",
    "start": "2780400",
    "end": "2786880"
  },
  {
    "text": "it gives you events showing the volume and then at the end we get this little report as well and so you can visualize this volume",
    "start": "2786880",
    "end": "2794640"
  },
  {
    "text": "as i've kind of been doing in my other application this is more of a simple volume thing rather than the fancy graph",
    "start": "2794640",
    "end": "2799920"
  },
  {
    "text": "and that tells me what the volume was we can do audio output tests as well",
    "start": "2799920",
    "end": "2805119"
  },
  {
    "text": "now i don't know if you can hear this through webex which is what i'm presenting through but i'm getting a an audio um ding in my",
    "start": "2805119",
    "end": "2813040"
  },
  {
    "text": "ear sounds like a phone's ringing and we can visualize what that sound should have been so it was definitely",
    "start": "2813040",
    "end": "2818960"
  },
  {
    "text": "making the sound if i couldn't hear that uh then there would be something wrong with my output um because there was a",
    "start": "2818960",
    "end": "2824400"
  },
  {
    "text": "volume and it we did a bunch of measurements for it and finally then there's the video input as well so this",
    "start": "2824400",
    "end": "2829520"
  },
  {
    "text": "allows us to go and get a get a video stream and see what it's doing",
    "start": "2829520",
    "end": "2835200"
  },
  {
    "text": "and this returns also some other reporting things on it and i think this uh little application just reports like",
    "start": "2835200",
    "end": "2840640"
  },
  {
    "text": "what resolution we got at the end and there we go um it got 640 by 480.",
    "start": "2840640",
    "end": "2846079"
  },
  {
    "text": "so this open source diagnostics tooling is a library uh that you can install",
    "start": "2846079",
    "end": "2852240"
  },
  {
    "text": "into your applications uh it's available online at github under twilio rtc diagnostics",
    "start": "2852240",
    "end": "2859520"
  },
  {
    "text": "and is really useful for building uh that initial experience for users",
    "start": "2859520",
    "end": "2865119"
  },
  {
    "text": "that is going to tell them whether they're going to have a good time inside a insider webrtc call",
    "start": "2865119",
    "end": "2871359"
  },
  {
    "text": "so that's kind of our lives uh on screen that's uh how we can build webrtc applications to",
    "start": "2871599",
    "end": "2878319"
  },
  {
    "text": "improve upon this uh and um and how we can stop yelling euron mute to people ultimately",
    "start": "2878319",
    "end": "2885359"
  },
  {
    "text": "um the benefits i see here uh just in webrtc itself is that it's everywhere",
    "start": "2885359",
    "end": "2890559"
  },
  {
    "text": "it's anywhere you have a device that has a browser on it uh and uh i don't think i don't i don't know of too many",
    "start": "2890559",
    "end": "2896800"
  },
  {
    "text": "computers that aren't devices with browsers on and so this means that um",
    "start": "2896800",
    "end": "2902640"
  },
  {
    "text": "webrtc is has that power because in your applications in your business",
    "start": "2902640",
    "end": "2908960"
  },
  {
    "text": "you can get somebody into a video call the video experience that you want",
    "start": "2908960",
    "end": "2914720"
  },
  {
    "text": "uh by sending them a link anyway for an email very text message however you want you can get somebody to your webrtc",
    "start": "2914720",
    "end": "2921440"
  },
  {
    "text": "experience and they don't have to go and install and download some other application or sign up somewhere else",
    "start": "2921440",
    "end": "2927839"
  },
  {
    "text": "have the tools to build great webrtc experiences uh an innovative webrtc experiences not",
    "start": "2927839",
    "end": "2934400"
  },
  {
    "text": "everything has to look like a zoom call um and so hopefully i've given you some ideas",
    "start": "2934400",
    "end": "2940559"
  },
  {
    "text": "about how you might go ahead and do that as part of this call and i'd love to see",
    "start": "2940559",
    "end": "2946079"
  },
  {
    "text": "what you will build with it so that's all i have for you",
    "start": "2946079",
    "end": "2951599"
  },
  {
    "text": "um thank you so much for for joining me and i hope you have a great ndc again my name is phil nash i'm a developer",
    "start": "2951599",
    "end": "2957520"
  },
  {
    "text": "evangelist at twilio uh and as always please contact me anywhere online for national drop me an email from",
    "start": "2957520",
    "end": "2963040"
  },
  {
    "text": "nationally.com we'd love to hear from you uh i don't think there's been any comments or questions in slack or webex",
    "start": "2963040",
    "end": "2971359"
  },
  {
    "text": "but if you do have any com if you do have any questions drop them in right now",
    "start": "2971359",
    "end": "2976400"
  },
  {
    "text": "otherwise go off and enjoy the rest of your conference and thank you very much",
    "start": "2976400",
    "end": "2983640"
  },
  {
    "text": "you",
    "start": "2990480",
    "end": "2992559"
  }
]