[
  {
    "text": "good afternoon everyone almost to the finish line here in the afternoon uh my",
    "start": "1760",
    "end": "6839"
  },
  {
    "text": "name is Jimmy Bogard you can find me on X formerly known as Twitter uh while",
    "start": "6839",
    "end": "11840"
  },
  {
    "text": "it's still alive and writing I guess on atj Bogard and this presentation can be found on my GitHub at github.com J",
    "start": "11840",
    "end": "18840"
  },
  {
    "text": "Bogard and I blog about these kinds of topics on my blog at Jimmy bard.com uh",
    "start": "18840",
    "end": "23880"
  },
  {
    "text": "my day job is as a consultant and I mainly focus on like system application",
    "start": "23880",
    "end": "29160"
  },
  {
    "text": "monetization and this talk in particular is from a recent project in which we were migrating uh a client from their",
    "start": "29160",
    "end": "35800"
  },
  {
    "text": "on- premise system up to the cloud and AER um and so this is something I've done uh a number of times in the past",
    "start": "35800",
    "end": "43399"
  },
  {
    "text": "and uh what I've inevitably found is that every single one of these kinds of projects is always unique in some",
    "start": "43399",
    "end": "50719"
  },
  {
    "text": "specific way so I'll be talking a lot about the things that I ran into in my project doing these kind of things they",
    "start": "50719",
    "end": "56920"
  },
  {
    "text": "won't be the same things that you run into and your aure maker but that's okay hopefully I can leave you this some uh",
    "start": "56920",
    "end": "62879"
  },
  {
    "text": "some tools and techniques to help make that migration easier but I'm definitely going to hit resources that you don't hit and you're going to hit resources",
    "start": "62879",
    "end": "69119"
  },
  {
    "text": "that I don't hit and that is okay um so kind of reminded of the the book Anna Corin from Tolstoy and the opening line",
    "start": "69119",
    "end": "77479"
  },
  {
    "text": "is just this kind of classic line of happy families happy families are all alike every unhappy family is unhappy in",
    "start": "77479",
    "end": "84240"
  },
  {
    "text": "its own way similarly Cod migrations are the same where if you're starting from a completely blank slate you can make all",
    "start": "84240",
    "end": "90119"
  },
  {
    "text": "sorts of choices and kind of pick whatever resource you want um and you get to do whatever you kind kind of",
    "start": "90119",
    "end": "95200"
  },
  {
    "text": "whatever you want in that system but when I'm dealing with on-prem existing systems then they're going to have their",
    "start": "95200",
    "end": "100240"
  },
  {
    "text": "own unique challenges and complications and so they're always going to be different and they never going to be exactly the",
    "start": "100240",
    "end": "105920"
  },
  {
    "text": "same now this system in particular was being in use in production like at that time and being actively developed and",
    "start": "105920",
    "end": "112880"
  },
  {
    "text": "maintained and so what we couldn't do is just say let's just pause all developments and all Feature work for",
    "start": "112880",
    "end": "120000"
  },
  {
    "text": "like three months or whatever while we figure out how we're going to do the migration uh plan the migration and then",
    "start": "120000",
    "end": "125960"
  },
  {
    "text": "roll it out um instead it's more like how they build highways in Texas uh which is in these incremental phases and",
    "start": "125960",
    "end": "133840"
  },
  {
    "text": "in this kind of process we never um it's not like we build a completely new highway to the side and then like get it",
    "start": "133840",
    "end": "140560"
  },
  {
    "text": "all nice and Shining up and running and then like one day there's just this big traffic switch and everyone goes over to the new highway um I say that we",
    "start": "140560",
    "end": "148000"
  },
  {
    "text": "actually did that once in Texas um but usually what that goes on is uh",
    "start": "148000",
    "end": "153360"
  },
  {
    "text": "there is uh like they're upgrading the highway as they go and during those",
    "start": "153360",
    "end": "158879"
  },
  {
    "text": "transition periods where there's like Old Highway and new highway um it's going to be bumpy right you're going to",
    "start": "158879",
    "end": "163920"
  },
  {
    "text": "have these these awkward transitions it'll be like temporary roads and and uh it'll just kind of be a little bit bumpy",
    "start": "163920",
    "end": "170080"
  },
  {
    "text": "uh as we go but the idea is that we can't just shut down the entire Highway and then create something off to the",
    "start": "170080",
    "end": "175599"
  },
  {
    "text": "side similarly I can't necessarily just shut down all like new feature work and new development and say just pause for a",
    "start": "175599",
    "end": "180879"
  },
  {
    "text": "bit while we figure things out and then go migrate over to the cloud instead it's going to be a very uh sort of incremental",
    "start": "180879",
    "end": "187200"
  },
  {
    "text": "process so in any kind of in uh projects like this it usually starts out with some kind of Discovery assessment uh",
    "start": "187200",
    "end": "194680"
  },
  {
    "text": "phase and so what we're trying to do here is just understand the lay of the land like what are the kinds of things",
    "start": "194680",
    "end": "200480"
  },
  {
    "text": "that they're that they have on premise um and what are the things we want to move to in the cloud um this also will",
    "start": "200480",
    "end": "207680"
  },
  {
    "text": "be looking at what things do we want do we want to move and one thing do we not want to move so this customer and most",
    "start": "207680",
    "end": "214040"
  },
  {
    "text": "of mine don't really like migrate everything all at once like they're not trying to migrate every single virtual",
    "start": "214040",
    "end": "219480"
  },
  {
    "text": "machine up to the cloud it's really like okay let's go uh let's go do this in phases where there's these set of",
    "start": "219480",
    "end": "225640"
  },
  {
    "text": "applications that have a kind of a high win High upside and say we'll move those first our learn our lessons from doing",
    "start": "225640",
    "end": "231439"
  },
  {
    "text": "that migration and then over time migrate the rest of their systems I know there are tools for Microsoft to do this",
    "start": "231439",
    "end": "238079"
  },
  {
    "text": "like big bang migration um but what we found typically is that those kinds of tools will just be more of a lift and",
    "start": "238079",
    "end": "243920"
  },
  {
    "text": "shift so they'll take exactly what you've got on premise and just do the exact thing same thing in the cloud and",
    "start": "243920",
    "end": "249879"
  },
  {
    "text": "so for some customers that's an okay transition um but this organization also wanted to modernize so they wanted to",
    "start": "249879",
    "end": "256000"
  },
  {
    "text": "make something better in the cloud than what they had before they didn't want to just take their exact you know exact",
    "start": "256000",
    "end": "261959"
  },
  {
    "text": "existing VMS they were running on premise and just say go ahead and just you know dump them up in the cloud that wouldn't get them to a better spot so",
    "start": "261959",
    "end": "269160"
  },
  {
    "text": "along with this we also wanted to kind of make things better and land in a better spot than we",
    "start": "269160",
    "end": "274960"
  },
  {
    "text": "were um Microsoft also has some tooling here uh to help you do this they have uh some new capabilities and Azure migrate",
    "start": "274960",
    "end": "281840"
  },
  {
    "text": "um at the time we did this project uh this was like a couple years ago uh the",
    "start": "281840",
    "end": "286960"
  },
  {
    "text": "better Azure migrate tools did not exist so i' say if you're at the start of this journey definitely go look at those",
    "start": "286960",
    "end": "292080"
  },
  {
    "text": "tools from uh Azure and Azure migrates at the time though the Azure migrate tools was like point us at your virtual",
    "start": "292080",
    "end": "298199"
  },
  {
    "text": "uh your virtualized infrastructure and we'll tell you exactly what VMS we can C create in the cloud for those like well",
    "start": "298199",
    "end": "303560"
  },
  {
    "text": "that's not what we want we don't want to just you know lift and shift VMS we want to as much as possible move to the better thing in the cloud so uh in this",
    "start": "303560",
    "end": "311800"
  },
  {
    "text": "phase we were looking at um you know what are the what are the kind of um what are the compute resources that we",
    "start": "311800",
    "end": "317600"
  },
  {
    "text": "have so this is the server uh the server infrastructure things like what applications are running out there how",
    "start": "317600",
    "end": "323680"
  },
  {
    "text": "are they running where how are they being hosted um what information is being written to where's that",
    "start": "323680",
    "end": "329199"
  },
  {
    "text": "information being rined into so like you what databases do you have if you're using file storage because everyone uses",
    "start": "329199",
    "end": "334639"
  },
  {
    "text": "file storage still um especially on Prem what are you doing there and if they have any other kind of like message",
    "start": "334639",
    "end": "339960"
  },
  {
    "text": "queuing or logs or anything like that go and gather all of those resources as well and we also want to understand what",
    "start": "339960",
    "end": "346160"
  },
  {
    "text": "are the different environments that they support so you know they have a Dev environment and a production environment",
    "start": "346160",
    "end": "351479"
  },
  {
    "text": "they have four kind of pre-production environments two pre-production uh what are the different environments that we",
    "start": "351479",
    "end": "356600"
  },
  {
    "text": "need to support um because we want to also do that up in the Cloud as well we",
    "start": "356600",
    "end": "361639"
  },
  {
    "text": "were also looking at their Network infrastructure um I I am not a network person we had a good Network person on",
    "start": "361639",
    "end": "367880"
  },
  {
    "text": "my team so if you have questions about this I will either make something up or I'll just point you to some resource online because I don't know um there are",
    "start": "367880",
    "end": "374880"
  },
  {
    "text": "lots of acronyms that were being thrown about during this time and I knew like everything had to be set up just right",
    "start": "374880",
    "end": "379960"
  },
  {
    "text": "or nothing would work but we had a good team of folks and the infrastructure operation side that understood all these",
    "start": "379960",
    "end": "385400"
  },
  {
    "text": "things and could get it set up for us appropriately um we also wanted to just",
    "start": "385400",
    "end": "390560"
  },
  {
    "text": "understand because we weren't going to be stopping the train of feature development I wanted to also understand",
    "start": "390560",
    "end": "396120"
  },
  {
    "text": "you know how the team does their software development um because if we're going to be in this like transitional",
    "start": "396120",
    "end": "401360"
  },
  {
    "text": "phase where there may be environments both on Prim and in the cloud we wanted",
    "start": "401360",
    "end": "406400"
  },
  {
    "text": "to make sure that if if that affects their software development life cycle uh that we kind of get ahead of that and we",
    "start": "406400",
    "end": "412560"
  },
  {
    "text": "don't surprise them like oops you can't test that feature for another month because the environment doesn't exist or something like that uh so we want to",
    "start": "412560",
    "end": "419240"
  },
  {
    "text": "understand just kind of like you know what are the processes they use um and how will we then incorporate our work",
    "start": "419240",
    "end": "424759"
  },
  {
    "text": "into that process all right so uh in this particular application um in terms of",
    "start": "424759",
    "end": "430960"
  },
  {
    "text": "like the the systems they actually had running um it wasn't a it wasn't a huge site uh this one was a website that was",
    "start": "430960",
    "end": "438240"
  },
  {
    "text": "for um for college applications and um",
    "start": "438240",
    "end": "443440"
  },
  {
    "text": "uh scholarships um so as as for scholarship grants to to to students here um so didn't have a ton of users",
    "start": "443440",
    "end": "450639"
  },
  {
    "text": "but it was very important to those users because it was also the system that the the uh the students would use to like I",
    "start": "450639",
    "end": "457520"
  },
  {
    "text": "need money for something and they would use the system to get the money and if that system didn't work they wouldn't get the money so it was very important",
    "start": "457520",
    "end": "464080"
  },
  {
    "text": "to those group of users uh so this system had uh two two web applications there was an internal like admin",
    "start": "464080",
    "end": "470360"
  },
  {
    "text": "application and then an external facing public application as well and of course had different security sort of uh uh",
    "start": "470360",
    "end": "477599"
  },
  {
    "text": "postures for each of those applications as well this application was uh on asp.net 4.8",
    "start": "477599",
    "end": "484759"
  },
  {
    "text": "but at the same time they were also migrating to net 6 this talk is not about the net migration I actually have",
    "start": "484759",
    "end": "491199"
  },
  {
    "text": "a whole different talk that's about net migration there were a couple things that we had a worry about in this like",
    "start": "491199",
    "end": "496720"
  },
  {
    "text": "transition from on Prim up to Azure because uh there were some things that net aspnet core supported uh differently",
    "start": "496720",
    "end": "505520"
  },
  {
    "text": "in Azure than on Prem which was awesome to find out when we tried to deploy something and it didn't work because a",
    "start": "505520",
    "end": "511280"
  },
  {
    "text": "when we deployed Azure they're like no uhuh you can't use that here um it also had various middleware like hangfire for",
    "start": "511280",
    "end": "517560"
  },
  {
    "text": "background tasks a signal R for um real time notifications to the browser uh",
    "start": "517560",
    "end": "523080"
  },
  {
    "text": "didn't have any like messaging in points so there wasn't any like msmq or rabit mq going on uh luckily that would have",
    "start": "523080",
    "end": "528959"
  },
  {
    "text": "been a bit more challenging to migrate that to the cloud um but we do have some techniques to be able to do that as",
    "start": "528959",
    "end": "535560"
  },
  {
    "text": "well uh there were two application databases and the internal based on U us",
    "start": "535560",
    "end": "542160"
  },
  {
    "text": "uh evaluating the different applications the internal one communicated to both applications and the external",
    "start": "542160",
    "end": "547800"
  },
  {
    "text": "application had its own like public database just for that single application and it still used SQL Server",
    "start": "547800",
    "end": "554120"
  },
  {
    "text": "agent to uh for some like scheduled task and uh scheduled",
    "start": "554120",
    "end": "559560"
  },
  {
    "text": "jobs now the tool that you can use these days to make this kind of analysis easier uh is the Azure migrate tool you",
    "start": "559560",
    "end": "566160"
  },
  {
    "text": "can point it as like a visual studio plugin you can point it to your solution and it will analyze the code it will see",
    "start": "566160",
    "end": "573120"
  },
  {
    "text": "how you're using the code and it will tell you which things uh you you may need to change when you move up to the",
    "start": "573120",
    "end": "579120"
  },
  {
    "text": "cloud it won't catch everything but it does a pretty good job of saying like Okay this is you're doing things this",
    "start": "579120",
    "end": "585680"
  },
  {
    "text": "way here uh you'll need to you know provide a shim or provide a different way of doing it whenever you move up to",
    "start": "585680",
    "end": "591160"
  },
  {
    "text": "cloud based on here are the resources that you're trying to Target once you're up",
    "start": "591160",
    "end": "596560"
  },
  {
    "text": "there um so on the software Vel life cycle side they had three deploy",
    "start": "596560",
    "end": "601600"
  },
  {
    "text": "environments they had a QA environment which is a kind of like Po you know they had a poll request to review they push",
    "start": "601600",
    "end": "606800"
  },
  {
    "text": "it up to the QA environment uh they had a pre-production like final uh gate in the stage um and production with Stage",
    "start": "606800",
    "end": "613880"
  },
  {
    "text": "gating production so you had to deploy to stage and then would promote from stage to production uh and this is",
    "start": "613880",
    "end": "619279"
  },
  {
    "text": "important for us to understand because if again we're in this transition period where we have some environments in some",
    "start": "619279",
    "end": "624480"
  },
  {
    "text": "places I wanted to understand like if we're going to disrupt this process uh how can we make sure we still support",
    "start": "624480",
    "end": "630839"
  },
  {
    "text": "those Engineers during that time period uh we also had various Integrations with other stuff so we had",
    "start": "630839",
    "end": "636920"
  },
  {
    "text": "both incoming web hooks to our application so things like oh gosh so they're using twillo and syrid and they",
    "start": "636920",
    "end": "643839"
  },
  {
    "text": "wanted to get notified if one of those failed if actually both if it succeeded or failed um because they had internal",
    "start": "643839",
    "end": "650720"
  },
  {
    "text": "uh you know internal tables and stuff to say okay I need to notify the um I need to notify the student that their check",
    "start": "650720",
    "end": "657120"
  },
  {
    "text": "is ready or something um and so we'll send them email but if Sy grid is down then they'll need to manage that",
    "start": "657120",
    "end": "662839"
  },
  {
    "text": "downtime so there was also like database stuff behind the scenes to keep track of this and then web hooks to say okay this",
    "start": "662839",
    "end": "668680"
  },
  {
    "text": "succeeded or failed um and we also had like incoming API calls as well as outgoing API calls from all this with",
    "start": "668680",
    "end": "675959"
  },
  {
    "text": "all sorts of different security measures in place to lock down these different apis based on whatever the uh whatever",
    "start": "675959",
    "end": "682839"
  },
  {
    "text": "that API provider was and then also like what our security posture was as well",
    "start": "682839",
    "end": "690360"
  },
  {
    "text": "um so this is production uh for them again not a huge web uh not a huge number of users but it was still in a",
    "start": "691120",
    "end": "697560"
  },
  {
    "text": "web Farm scenario with a load balancer so we had a load balancer on the front and then that would uh then load balance",
    "start": "697560",
    "end": "703880"
  },
  {
    "text": "between two application servers to web application servers each both having the",
    "start": "703880",
    "end": "709279"
  },
  {
    "text": "applications uh on that hosted with IIs um and then those talked to uh",
    "start": "709279",
    "end": "715480"
  },
  {
    "text": "databases behind the scenes and they also had a production file server now one of the things we found here and",
    "start": "715480",
    "end": "721839"
  },
  {
    "text": "which was a good thing is that because they were already in a uh web Farm environment they couldn't do a lot of",
    "start": "721839",
    "end": "728399"
  },
  {
    "text": "really bad things that people do when they know they're just on one single server we had another client moving to",
    "start": "728399",
    "end": "733760"
  },
  {
    "text": "Cloud where they just had a a single server hosting their application and they did all sorts of dirty tricks like",
    "start": "733760",
    "end": "739639"
  },
  {
    "text": "using static variables to Cache things and then went to a web Farm they're like that thing didn't exist and would throw",
    "start": "739639",
    "end": "745880"
  },
  {
    "text": "all sorts of exceptions sometimes because we didn't have sust session Affinity turned honored whatever so",
    "start": "745880",
    "end": "751760"
  },
  {
    "text": "because they're already in a web Farm environment they couldn't do any of those like you know those sort of hacks to make things work uh that you can do",
    "start": "751760",
    "end": "758399"
  },
  {
    "text": "on a single server um so luckily this was actually a bit easier because we knew we were going to be targeting a load balance scenario up in Azure as",
    "start": "758399",
    "end": "765959"
  },
  {
    "text": "well um on the QA uh stage Serv so the lower environments um they were intended",
    "start": "765959",
    "end": "771360"
  },
  {
    "text": "to be like you know like production instances you know that's something I know a lot of customers try to do is",
    "start": "771360",
    "end": "777120"
  },
  {
    "text": "like try to make lower environments as much as possible look like production until they get the bill for those things",
    "start": "777120",
    "end": "782600"
  },
  {
    "text": "they're like Maybe not maybe let's mooth things down a bit so in this case they actually had both QA and stage on the",
    "start": "782600",
    "end": "788120"
  },
  {
    "text": "same system but these um the the these sort of uh like the hardware and CPU",
    "start": "788120",
    "end": "794959"
  },
  {
    "text": "were the same as production okay so networking side um I",
    "start": "794959",
    "end": "801320"
  },
  {
    "text": "know there was like some stuff that would then talk to some more stuff that",
    "start": "801320",
    "end": "806440"
  },
  {
    "text": "then would talk to even more stuff and then finally go to our job junk um the the network Engineers would explain it",
    "start": "806440",
    "end": "812279"
  },
  {
    "text": "to me many times about exactly I was like okay fine you know what just tell it to that guy who is the infrastructure",
    "start": "812279",
    "end": "818079"
  },
  {
    "text": "Azure person and then let me know when it's working so that I can actually then go make sure that our junk actually",
    "start": "818079",
    "end": "823360"
  },
  {
    "text": "works so there was a lot here behind the scenes um they had like several custom",
    "start": "823360",
    "end": "829360"
  },
  {
    "text": "DNS resolvers internally with like two different vpns they had to supports and",
    "start": "829360",
    "end": "834480"
  },
  {
    "text": "based on which VPN you are you can only get access to certain resources so we had to do a lot lot of stuff to make",
    "start": "834480",
    "end": "839839"
  },
  {
    "text": "sure that that still worked once we got into Azure um but I didn't do any of it so we won't be talking about it so",
    "start": "839839",
    "end": "846839"
  },
  {
    "text": "there um and then finally looking at their software development life cycle this was another one of those things of",
    "start": "846839",
    "end": "852120"
  },
  {
    "text": "like okay if they're if they're modernizing their applications should",
    "start": "852120",
    "end": "857199"
  },
  {
    "text": "they also modernize their application life cycle stuff so in this case they're",
    "start": "857199",
    "end": "862800"
  },
  {
    "text": "they all their sdlc stuff because their systems were on Prem like even all their sdlc stuff was also on Prem so they",
    "start": "862800",
    "end": "869199"
  },
  {
    "text": "using on Prem bit bucket on Prem jira um for Bill they're using Powershell",
    "start": "869199",
    "end": "875680"
  },
  {
    "text": "whatever um and then for their build and deploy they had team City doing both on",
    "start": "875680",
    "end": "880839"
  },
  {
    "text": "Prem team City team City call calling something called calling P and the CD was calling something called pastrami",
    "start": "880839",
    "end": "888240"
  },
  {
    "text": "um I forgot this tool even existed it's a Powershell like continuous deployment tool um it's actually on nougat but the",
    "start": "888240",
    "end": "894800"
  },
  {
    "text": "last deployment of that thing was 10 years ago so that was one we looked at maybe we should should not use that",
    "start": "894800",
    "end": "900079"
  },
  {
    "text": "thing anymore and like what is the right sort of CD tool for for Azure yeah so it look something like",
    "start": "900079",
    "end": "906680"
  },
  {
    "text": "like this um you know bitb at Team City and team City all right so once we kind",
    "start": "906680",
    "end": "912360"
  },
  {
    "text": "of gather the lay of the land of all these different aspects the next thing we want to do was the design phase so",
    "start": "912360",
    "end": "918519"
  },
  {
    "text": "what should they be moving to the team did tell us that they don't want to just do a pure lift and shift but they don't",
    "start": "918519",
    "end": "925480"
  },
  {
    "text": "want to go too crazy with like a bunch of new kinds of resources so as much as possible what we try to do is apply some",
    "start": "925480",
    "end": "931880"
  },
  {
    "text": "sort of guiding principles to choosing the appropriate resources up in Azure um so first principle is like we want to do",
    "start": "931880",
    "end": "938120"
  },
  {
    "text": "Platform as a service so using like they didn't care about sort of vendor lockin",
    "start": "938120",
    "end": "943600"
  },
  {
    "text": "whatever so they weren't like well maybe next year we'll go to Amazon and maybe the year after get that we'll go to",
    "start": "943600",
    "end": "948759"
  },
  {
    "text": "Google Cloud they're like no it takes so much work to get all this set up that would be like astronomically expensive",
    "start": "948759",
    "end": "953800"
  },
  {
    "text": "to try to support multicloud they didn't care about that sort of thing so as much as possible we want to true",
    "start": "953800",
    "end": "959480"
  },
  {
    "text": "leverage the features of that platform because that's what they you know that's",
    "start": "959480",
    "end": "964639"
  },
  {
    "text": "one of the things they want to do is you know modernize make things better um not make things the same as they were",
    "start": "964639",
    "end": "970279"
  },
  {
    "text": "today um we would use infrastructure as a service if we were forced to so if there was some reason that we could not",
    "start": "970279",
    "end": "977160"
  },
  {
    "text": "use the platform as a surface play then we would then drop down to uh infrastructure as a service um in the",
    "start": "977160",
    "end": "984199"
  },
  {
    "text": "end we only had to use like bare metal VMS for you know very few sorts resources and most of them are temporary",
    "start": "984199",
    "end": "990880"
  },
  {
    "text": "or things like jump boxes machine you can rote into that's inside that Network boundary uh they can access and then be",
    "start": "990880",
    "end": "997360"
  },
  {
    "text": "able to get to all the resources but otherwise the actual applications themselves uh were able to go to platform as a",
    "start": "997360",
    "end": "1003279"
  },
  {
    "text": "service um we wanted to we wanted to avoid like any kind of like oh while we're here why would we make this better",
    "start": "1003279",
    "end": "1009480"
  },
  {
    "text": "like no like laser focus that the goal here is to do the aure migration not try to add a bunch of other things um as we",
    "start": "1009480",
    "end": "1017399"
  },
  {
    "text": "go so this is kind of a like pacified lift and shift where we take the existing resources they have today and",
    "start": "1017399",
    "end": "1023839"
  },
  {
    "text": "then put them in the appropriate Platformers of service play up in the cloud there were still some things that",
    "start": "1023839",
    "end": "1030480"
  },
  {
    "text": "we didn't know were weren't going to work until we got into uh guidance side of azure um but I'll cover those as we",
    "start": "1030480",
    "end": "1037600"
  },
  {
    "text": "get to them um on the sdlc tooling so we Lo",
    "start": "1037600",
    "end": "1043120"
  },
  {
    "text": "that we looked and saw that okay you're using all these other on-prem things is now the appropriate time to get off of",
    "start": "1043120",
    "end": "1049520"
  },
  {
    "text": "those into something else so jir like I wanted so desperately to get off of this",
    "start": "1049520",
    "end": "1055080"
  },
  {
    "text": "um but the problem was that their whole organization used jir not just this team",
    "start": "1055080",
    "end": "1060160"
  },
  {
    "text": "but all the other teams as well and so this would have been been a much bigger scope item to say you know let's move",
    "start": "1060160",
    "end": "1065880"
  },
  {
    "text": "you also from jir on Prim even it look like at lasting in Cloud because everyone used it and they had this like",
    "start": "1065880",
    "end": "1072360"
  },
  {
    "text": "you know like Global templates of work items and whatever um this was not going to be possible so we just kept them on",
    "start": "1072360",
    "end": "1078559"
  },
  {
    "text": "Prim jir um bit though is a bit easier though because you know it's git right so you",
    "start": "1078559",
    "end": "1084960"
  },
  {
    "text": "have your own individual repository the most you have to really worry about is like different security rules and things",
    "start": "1084960",
    "end": "1090480"
  },
  {
    "text": "like that uh so they did want to get off a bit bucket onto something else and the team then decided to go to GitHub so",
    "start": "1090480",
    "end": "1096880"
  },
  {
    "text": "they got a GitHub Enterprise account thing and uh we're were going to be moving them over to",
    "start": "1096880",
    "end": "1103039"
  },
  {
    "text": "GitHub um the saki tool it's just Powershell so we're like this the team",
    "start": "1103039",
    "end": "1108480"
  },
  {
    "text": "likes Powershell they're comfortable with it I don't really like it I feel like every time I touch po shell have to relearn everything about it they liked",
    "start": "1108480",
    "end": "1114679"
  },
  {
    "text": "it whatever so we kept uh we kept that as well um finally for uh for the build",
    "start": "1114679",
    "end": "1121039"
  },
  {
    "text": "and deploy so we had team City uh so technically we could have still use team City to deploy up into Azure but again",
    "start": "1121039",
    "end": "1128600"
  },
  {
    "text": "they were trying to get rid of all these kinds of um all these kinds of services they were having to maintain over time",
    "start": "1128600",
    "end": "1134159"
  },
  {
    "text": "you know manage the updates of these sort of things as well so for this they decided to go to Azure devops for build",
    "start": "1134159",
    "end": "1140200"
  },
  {
    "text": "and deploy now I don't know why they decided to go GitHub for Source control and then Azure devops for the other",
    "start": "1140200",
    "end": "1146799"
  },
  {
    "text": "stuff versus just like picking one or the other whatever they like GitHub for pull requests and they like Azure devops",
    "start": "1146799",
    "end": "1152400"
  },
  {
    "text": "for all the stuff that it does Azure devops pipelines I should",
    "start": "1152400",
    "end": "1157640"
  },
  {
    "text": "say all right so uh on the um on the Azure resource side we wanted to look to",
    "start": "1157640",
    "end": "1164559"
  },
  {
    "text": "see okay what are what it's going to be the appropriate sort of uh Azure resources for the computes and storage",
    "start": "1164559",
    "end": "1171440"
  },
  {
    "text": "up in the cloud now this is again one that um if you use the Azure migrate tooling it will tell you like here's the",
    "start": "1171440",
    "end": "1178400"
  },
  {
    "text": "Azure VM that you can size for this but that wasn't what that wasn't important to us so we looked at what are the",
    "start": "1178400",
    "end": "1184840"
  },
  {
    "text": "existing resources of your on-prem virtual machines and then picking sort of the appropriate sizing for uh those",
    "start": "1184840",
    "end": "1191440"
  },
  {
    "text": "resources up in Azure but like it's much easier for us to change those in Azure",
    "start": "1191440",
    "end": "1197000"
  },
  {
    "text": "you know you got the little the magic slider that says you know go more cores or less cores or whatever um so we just",
    "start": "1197000",
    "end": "1202559"
  },
  {
    "text": "made a good first guess of this and then um later on we could look at things like autoscaling for those Peaks and valleys",
    "start": "1202559",
    "end": "1209360"
  },
  {
    "text": "of the system uh based on their usage so um for the Computer Resources",
    "start": "1209360",
    "end": "1215000"
  },
  {
    "text": "so right now on PR they're using I and the equivalent to IAS and Azure is azure",
    "start": "1215000",
    "end": "1221760"
  },
  {
    "text": "app Services I mean I think it actually is I in the cloud I think um so we knew that that was going to be a very",
    "start": "1221760",
    "end": "1227760"
  },
  {
    "text": "straightforward migration path to us uh yes there like there a bunch of extra features that we're going to that we",
    "start": "1227760",
    "end": "1232960"
  },
  {
    "text": "will be eventually taking advantage of with app services but this is like the most the most easiest way of like saying",
    "start": "1232960",
    "end": "1239240"
  },
  {
    "text": "I've got a web app running here now I'm going to take that web app and run it over there for storage uh okay this is like",
    "start": "1239240",
    "end": "1246679"
  },
  {
    "text": "the SQL Server agents stuff um SQL Server agents uh is one of those things",
    "start": "1246679",
    "end": "1252480"
  },
  {
    "text": "you kind of forget exists because it doesn't really exist up in Azure unless",
    "start": "1252480",
    "end": "1257720"
  },
  {
    "text": "you're using like the more infrastructure as a service options so he saw this and said okay for um we want",
    "start": "1257720",
    "end": "1263520"
  },
  {
    "text": "we want to use the more pacified version of azure uh SQL up in the cloud which is",
    "start": "1263520",
    "end": "1268799"
  },
  {
    "text": "the Azure SQL databases which does not support SQL Server agents um so he said you know what we don't like those anyway",
    "start": "1268799",
    "end": "1275120"
  },
  {
    "text": "it's running an executable inside SQL Server it's just a weird thing uh so we said we don't we don't want to use this",
    "start": "1275120",
    "end": "1280360"
  },
  {
    "text": "anyway we don't we want to get off of this way of running background schedule tasks uh so we uh migrated those over to",
    "start": "1280360",
    "end": "1288039"
  },
  {
    "text": "hangfire we did this before we did any kind of azure migration whatsoever so we for these sort of like um fix the thing",
    "start": "1288039",
    "end": "1295279"
  },
  {
    "text": "before we get to the Cloud we wanted to make sure that we uh fully vetted and deployed those on Prem before we make we",
    "start": "1295279",
    "end": "1302600"
  },
  {
    "text": "mixed Azure into the mix or yeah before he got Azure to the mix so database side um there's a this",
    "start": "1302600",
    "end": "1311000"
  },
  {
    "text": "is one of those on there's there's not really an either or option there's a spectrum of things to choose from inside",
    "start": "1311000",
    "end": "1316240"
  },
  {
    "text": "of azure for SQL uh there's on the more pass side is azure SQL database so this",
    "start": "1316240",
    "end": "1322200"
  },
  {
    "text": "is like you have a database that's running on a virtual server but you can then size that individual databases",
    "start": "1322200",
    "end": "1327720"
  },
  {
    "text": "resources independent of other databases even having like different like different kind of core models and",
    "start": "1327720",
    "end": "1333559"
  },
  {
    "text": "different kind of charging models uh based on that so that would be like kind of our ideal scenario is azure SQL",
    "start": "1333559",
    "end": "1340200"
  },
  {
    "text": "database in the middle is azure SQL managed instance so this is a pacified",
    "start": "1340200",
    "end": "1346279"
  },
  {
    "text": "version of azure SQL server not just the individual databases up in the cloud so it's kind of this this Middle Ground",
    "start": "1346279",
    "end": "1351960"
  },
  {
    "text": "between like pure VMS over here on the right and then like I just have a pacified Azure SQL database running",
    "start": "1351960",
    "end": "1358799"
  },
  {
    "text": "somewhere somehow up in the cloud now in in order for us to to",
    "start": "1358799",
    "end": "1364559"
  },
  {
    "text": "figure out which one of these options is best for us we also need to understand like what are the different capabilities",
    "start": "1364559",
    "end": "1370960"
  },
  {
    "text": "each of these support for the different features that we're running as well as for the migration up into the cloud",
    "start": "1370960",
    "end": "1377720"
  },
  {
    "text": "these different uh versions of azure SQL have different options for doing this uh",
    "start": "1377720",
    "end": "1382840"
  },
  {
    "text": "migration up into Azure so and unfortunately there are a ton of",
    "start": "1382840",
    "end": "1388159"
  },
  {
    "text": "options here for doing this actual Azure SQL migration um yes so the first one is",
    "start": "1388159",
    "end": "1394640"
  },
  {
    "text": "azure migrates uh this is the assessment tool but will also perform a migration um there is the Azure SQL migration",
    "start": "1394640",
    "end": "1401039"
  },
  {
    "text": "extension for Azure data studio uh and this uses a data migration service to assess and perform the migration and the",
    "start": "1401039",
    "end": "1408000"
  },
  {
    "text": "migration is somewhere up in Azure as well uh there's transactional replication and this is one I wanted to",
    "start": "1408000",
    "end": "1413799"
  },
  {
    "text": "avoid like the plague because it is very hard to set up it's annoying to set up there's a lot of security things it's",
    "start": "1413799",
    "end": "1419039"
  },
  {
    "text": "like up there with distributed transaction coordinator of like the most annoying things to set up and get right um and so we you know this the",
    "start": "1419039",
    "end": "1425919"
  },
  {
    "text": "transaction replication would give us like the most liveness for updates so I make a change here and it will show up",
    "start": "1425919",
    "end": "1431600"
  },
  {
    "text": "very quickly uh up in the cloud um but we knew it was going to be really annoying to set up and remember the",
    "start": "1431600",
    "end": "1436760"
  },
  {
    "text": "clouds of networking stuff like mixing transaction replication on top of all that would have just been",
    "start": "1436760",
    "end": "1441919"
  },
  {
    "text": "like a nightmare so he said only if absolutely necessary will we do this um we have backpack uh backpack is",
    "start": "1441919",
    "end": "1450640"
  },
  {
    "text": "uh like you can export the database as a special like zip file with the Manifest and and the data inside of it uh and so",
    "start": "1450640",
    "end": "1457840"
  },
  {
    "text": "if if you are able to basically stop people from using the application you can export the database into a backpack",
    "start": "1457840",
    "end": "1464520"
  },
  {
    "text": "file and then go in Azure and then import that backpack file up into to your database behind the scenes it",
    "start": "1464520",
    "end": "1470200"
  },
  {
    "text": "actually uses the next tool here called SQL bul copy um but this is a good",
    "start": "1470200",
    "end": "1475799"
  },
  {
    "text": "choice if I have like a readon database or a very slowly changing database then backpack is the easiest way to do uh the",
    "start": "1475799",
    "end": "1482360"
  },
  {
    "text": "migration I just export the data and then import the data and then hopefully that finishes",
    "start": "1482360",
    "end": "1488320"
  },
  {
    "text": "quickly um then we have Azure data Factory Azure data Factory is like SQL Server integration services but in the",
    "start": "1488320",
    "end": "1494640"
  },
  {
    "text": "cloud uh so if you have to do ETL as part of your process so there's like things you need to change in your data",
    "start": "1494640",
    "end": "1501360"
  },
  {
    "text": "as it goes from on Prem up in the cloud the Azure data Factory is a good choice for that uh for our system though we",
    "start": "1501360",
    "end": "1507679"
  },
  {
    "text": "didn't want to change data or change the shape of the data or anything really just like make it look exactly like it",
    "start": "1507679",
    "end": "1512720"
  },
  {
    "text": "does on Prem but just over there now uh and the final tool here is SQL data sync um SQL data sync is uh it's a",
    "start": "1512720",
    "end": "1521000"
  },
  {
    "text": "tool I'll actually talk more about this one but it does uh client and server bidirectional syn syncing for Azure SQL",
    "start": "1521000",
    "end": "1527840"
  },
  {
    "text": "to azure SQL and Azure SQL to and from SQL server on",
    "start": "1527840",
    "end": "1533840"
  },
  {
    "text": "Prem now in order to understand which one of these is most appropriate for us",
    "start": "1533840",
    "end": "1538960"
  },
  {
    "text": "to use we also have to understand like which are the Azure SQL database SKS that each one of these tools can be used",
    "start": "1538960",
    "end": "1545240"
  },
  {
    "text": "with as well as do each of these tools support offline or online migration so",
    "start": "1545240",
    "end": "1551320"
  },
  {
    "text": "the offline migration means you stop everyone from using the server you close all the connections you use this ETL",
    "start": "1551320",
    "end": "1557600"
  },
  {
    "text": "tool or whatever tool is to then migrate your data to cloud and then you can bring up the application pointing to the",
    "start": "1557600",
    "end": "1563559"
  },
  {
    "text": "new database whereas an online migration means that it's ongoing and it's more of",
    "start": "1563559",
    "end": "1569080"
  },
  {
    "text": "like a like a DNS swap to swap someone or you know like connection string swap to swap an application from the on-prem",
    "start": "1569080",
    "end": "1576320"
  },
  {
    "text": "database to another database and of course depending on the the tool um they",
    "start": "1576320",
    "end": "1582399"
  },
  {
    "text": "support each of these kinds of scenarios so we knew um this application",
    "start": "1582399",
    "end": "1588399"
  },
  {
    "text": "was still being used on an ongoing basis and to keep our options open in terms of",
    "start": "1588399",
    "end": "1594679"
  },
  {
    "text": "uh application downtime we wanted to favor as much as possible the online uh",
    "start": "1594679",
    "end": "1599720"
  },
  {
    "text": "migration options because if it was going to take a long time for whatever reason for us to migrate the application",
    "start": "1599720",
    "end": "1606760"
  },
  {
    "text": "from one to the other um we didn't want to have a large amount of application downtime so we wanted to go with the um",
    "start": "1606760",
    "end": "1614200"
  },
  {
    "text": "the online models as much as possible the other thing that made things worse for us is the on-prem servers were in",
    "start": "1614200",
    "end": "1620960"
  },
  {
    "text": "Austin Texas the target environment was South Africa and that's a long way away",
    "start": "1620960",
    "end": "1627279"
  },
  {
    "text": "from Texas um the reason being is that this application was scholarships for students in South Africa so like hey you",
    "start": "1627279",
    "end": "1634360"
  },
  {
    "text": "know you're a now you can pick the region that best supports your user needs so why not put the application and",
    "start": "1634360",
    "end": "1639399"
  },
  {
    "text": "data much closer to the people that are actually using the system versus like the administrators of the system who are",
    "start": "1639399",
    "end": "1645120"
  },
  {
    "text": "in Texas so um those another the reasons why we were looking at using online migration tools uh because we tested and",
    "start": "1645120",
    "end": "1652399"
  },
  {
    "text": "timed a few of the offline migration options and like going over the network over the entire Atlantic Ocean or pacif",
    "start": "1652399",
    "end": "1659760"
  },
  {
    "text": "I don't even know which way the the data went from from where it was uh it took like just absolutely forever and we didn't want to take the application down",
    "start": "1659760",
    "end": "1665919"
  },
  {
    "text": "for like a day waiting for this data to get pushed up um from Texas over to um",
    "start": "1665919",
    "end": "1671799"
  },
  {
    "text": "to South Africa so an online migration lets us do a very like a bulk insert of the initial data and then ongoing",
    "start": "1671799",
    "end": "1678679"
  },
  {
    "text": "migrations are much smaller because it's only than the Deltas as we go so um in terms of tooling we actually",
    "start": "1678679",
    "end": "1685720"
  },
  {
    "text": "wind up going with the last option SQL data sync now the Azure um migration",
    "start": "1685720",
    "end": "1691360"
  },
  {
    "text": "documentation says don't use this for this purpose but it worked really well and so you're like H if it works you",
    "start": "1691360",
    "end": "1697519"
  },
  {
    "text": "know why not and the reason why they don't want you to use it for this purpose is because they want you to use their other like purpose-built tools",
    "start": "1697519",
    "end": "1703720"
  },
  {
    "text": "they want you to use Azure U Azure migration Azure migrates or for Azure data Factory we you have to pay for",
    "start": "1703720",
    "end": "1710200"
  },
  {
    "text": "those but you don't have to pay for SQL data syncs so like let's use that one so the way it works is um it",
    "start": "1710200",
    "end": "1718080"
  },
  {
    "text": "supports different synchronization models um there's an idea of a hub database and then a member database and",
    "start": "1718080",
    "end": "1725519"
  },
  {
    "text": "the Hub database uh is like your your destination for the data and then the member databases are then other like",
    "start": "1725519",
    "end": "1732120"
  },
  {
    "text": "participating databases that will get uh copied up into the Hub database there's",
    "start": "1732120",
    "end": "1737320"
  },
  {
    "text": "also a seate sync database that holds the metadata about your synchronization so like which are the databases that are",
    "start": "1737320",
    "end": "1743760"
  },
  {
    "text": "being uh supported what tables and which colums uh do you care about those are all stored in the separate database in",
    "start": "1743760",
    "end": "1749760"
  },
  {
    "text": "the sync DB um allegedly you can also do sync between three or more databases we",
    "start": "1749760",
    "end": "1755799"
  },
  {
    "text": "didn't we didn't do this it's really just like okay we have our Target Hub database up in Azure so that's our you",
    "start": "1755799",
    "end": "1761799"
  },
  {
    "text": "know eventual Target and then we also have our on Prem database uh which is",
    "start": "1761799",
    "end": "1767559"
  },
  {
    "text": "the the other member database and there's also going to be the sync agent so this is a window service that runs on",
    "start": "1767559",
    "end": "1774480"
  },
  {
    "text": "Prem somewhere that can connect to your on-prem database look and see what the changes are and then push those changes",
    "start": "1774480",
    "end": "1780399"
  },
  {
    "text": "up into Azure so there's something that has to run locally of course uh so your SQL database itself doesn't like know",
    "start": "1780399",
    "end": "1787840"
  },
  {
    "text": "that this is happening we have a background seek agent that is pushing those changes up on some kind of uh",
    "start": "1787840",
    "end": "1793559"
  },
  {
    "text": "scheduled basis there are limitations to this uh and there is a tool for Microsoft to run",
    "start": "1793559",
    "end": "1800880"
  },
  {
    "text": "against your database to tell you like here are the problems that you're going to run into if you try to do this uh and",
    "start": "1800880",
    "end": "1806880"
  },
  {
    "text": "so things like if I'm doing Deltas um I need to make I need understand what are",
    "start": "1806880",
    "end": "1813320"
  },
  {
    "text": "the items that have changed and the way we know which things have changed is that we look at the rows and look at the",
    "start": "1813320",
    "end": "1818960"
  },
  {
    "text": "primary keys to know like oh this thing was added because this thing with this primary key doesn't exist over there so",
    "start": "1818960",
    "end": "1824279"
  },
  {
    "text": "every table must have a primary key like all every single table that you're going to participate in this",
    "start": "1824279",
    "end": "1830200"
  },
  {
    "text": "migration um snapshot isolation must be enabled I don't know why I guess it's what the tool uses to perform this sort",
    "start": "1830200",
    "end": "1837159"
  },
  {
    "text": "of work is use Snapshot isolation this is just something we found in production lower environments had it turned on",
    "start": "1837159",
    "end": "1842399"
  },
  {
    "text": "upper environments did not so we had to go like fiddle the SQL Server configuration to turn this on um PE the",
    "start": "1842399",
    "end": "1848799"
  },
  {
    "text": "primary Keys can't be weird and by weird I mean like XML like you can have XML as a primary",
    "start": "1848799",
    "end": "1855399"
  },
  {
    "text": "key but like I don't know why you do it but you can't do that things like images you can't have an image as your primary",
    "start": "1855399",
    "end": "1860440"
  },
  {
    "text": "key um like these are things that you would probably never ever see but they can't be weird I'd say um your schema",
    "start": "1860440",
    "end": "1867559"
  },
  {
    "text": "table call names also can't be weird um things like don't use Emoji in the names",
    "start": "1867559",
    "end": "1872919"
  },
  {
    "text": "of your database you can actually your table your table schema your database",
    "start": "1872919",
    "end": "1878480"
  },
  {
    "text": "column schemas all that stuff can have Emoji or weird you know UTF characters",
    "start": "1878480",
    "end": "1884000"
  },
  {
    "text": "um but they can't be weird so like just if they're vanilla normal you're good table names must be unique this is the",
    "start": "1884000",
    "end": "1890559"
  },
  {
    "text": "one that actually did bite us um because the table names and a regular system like can don't have to be unique across",
    "start": "1890559",
    "end": "1897320"
  },
  {
    "text": "schemas but for whatever reason this tool can't support unique table names that are uh not unique across schemas I",
    "start": "1897320",
    "end": "1905720"
  },
  {
    "text": "don't know why um so there were a couple tables like TBL address that was in two schemas we had to go and change the name",
    "start": "1905720",
    "end": "1911600"
  },
  {
    "text": "of it in one place uh to make sure it was unique everywhere um userdefined types aren't",
    "start": "1911600",
    "end": "1917399"
  },
  {
    "text": "supported so the thing that we all thought was really cool to do like in 2008 um you can't you shouldn't probably",
    "start": "1917399",
    "end": "1922639"
  },
  {
    "text": "shouldn't do that today anyway um but userdefined types aren't supported um",
    "start": "1922639",
    "end": "1927919"
  },
  {
    "text": "things like if you bypass the transactions and triggers then they won't sync so if you truncate a table",
    "start": "1927919",
    "end": "1934600"
  },
  {
    "text": "then the mechanism that the SQL Server data agent uses which is just triggers",
    "start": "1934600",
    "end": "1940080"
  },
  {
    "text": "um won't be fired and so that won't work but I'm not in the habit of like randomly truncating tables in production",
    "start": "1940080",
    "end": "1946880"
  },
  {
    "text": "so this was not going to be problem for us um and like any kind of replication",
    "start": "1946880",
    "end": "1952039"
  },
  {
    "text": "model schema changes are not automatically replicated so if I add or remove tables add or remove columns",
    "start": "1952039",
    "end": "1958679"
  },
  {
    "text": "rename columns whatever um this tool won't know about them so we had to define a process to be able to take care",
    "start": "1958679",
    "end": "1965120"
  },
  {
    "text": "of this sort of scenario there is again some tooling from Microsoft that will like do will help do this for you but it",
    "start": "1965120",
    "end": "1971559"
  },
  {
    "text": "sucks so don't I wouldn't recommend using it uh so we wind up just leveraging some of our existing schema",
    "start": "1971559",
    "end": "1978600"
  },
  {
    "text": "change tooling uh into this schema change process um there are also some",
    "start": "1978600",
    "end": "1984679"
  },
  {
    "text": "unsupported data types as part of this and again like this is not something that we ran into but if you look at like",
    "start": "1984679",
    "end": "1990000"
  },
  {
    "text": "some older databases again from like the early mid 2000s where Microsoft was pushing like all this crazy crazy stuff",
    "start": "1990000",
    "end": "1996720"
  },
  {
    "text": "inside your database then this may exist for you uh things like file stream I don't even know what that would mean to",
    "start": "1996720",
    "end": "2002399"
  },
  {
    "text": "replicate a file stream from on Prim up into the cloud uh no no userdefined types or seal types um again I'm sorry",
    "start": "2002399",
    "end": "2010080"
  },
  {
    "text": "if you have those in your system you're probably annoyed by them today anyway uh a I don't know uh all sorts of weird",
    "start": "2010080",
    "end": "2017639"
  },
  {
    "text": "things um but the the really challenging one though that this system and most systems I see in production today uh was",
    "start": "2017639",
    "end": "2023919"
  },
  {
    "text": "computed columns so computed columns aren't actually stored anywhere and so those won't be replicated like how could",
    "start": "2023919",
    "end": "2031519"
  },
  {
    "text": "they be so whatever or read only columns like if you can't change the data then there has no way to like push those",
    "start": "2031519",
    "end": "2037399"
  },
  {
    "text": "changes up to the cloud um for those last two or for any of these really you just kind of decide",
    "start": "2037399",
    "end": "2043360"
  },
  {
    "text": "do I change the existing system in order to get rid of these types or do I just migrate that data in some different way",
    "start": "2043360",
    "end": "2050000"
  },
  {
    "text": "like maybe just build a custom tool to be able to do so or if it's pervasive enough in your system then you'd want to",
    "start": "2050000",
    "end": "2055679"
  },
  {
    "text": "then just go to one of the other tools to do so so going to use like Azure data Factory or Azure migrate which are much",
    "start": "2055679",
    "end": "2061839"
  },
  {
    "text": "more complicated and more difficult to set up uh than this tool",
    "start": "2061839",
    "end": "2068000"
  },
  {
    "text": "uh this one also bit us as well that there are limitations on the dimensions of your items as well um like the max",
    "start": "2068000",
    "end": "2076358"
  },
  {
    "text": "number uh the one that really hit us was the naming here the database table schema and colum names cannot have more",
    "start": "2076359",
    "end": "2081720"
  },
  {
    "text": "than 50 characters which again is like can't you just change the like like there's this the reason why this comes",
    "start": "2081720",
    "end": "2087520"
  },
  {
    "text": "in is the sync database that holds all this metadata limited all the columns to 50 I'm like varar Max is a thing like",
    "start": "2087520",
    "end": "2093839"
  },
  {
    "text": "you can do this they didn't whatever um tables in a syn group 500 um luckily we",
    "start": "2093839",
    "end": "2101200"
  },
  {
    "text": "our database did not have over 500 tables but I'm sure some of you today have like well into the four digits",
    "start": "2101200",
    "end": "2106880"
  },
  {
    "text": "maybe five digits hopefully not of number of tables and so you just break this up into smaller groups um which you",
    "start": "2106880",
    "end": "2112520"
  },
  {
    "text": "probably want to do anyway because that's this can get resource intensive um these last two we also hit",
    "start": "2112520",
    "end": "2117920"
  },
  {
    "text": "as well so columns and a table in a sync group you can't have more than 1,000 columns we have more than a thousand",
    "start": "2117920",
    "end": "2124480"
  },
  {
    "text": "columns on a table in the production system like T user or person or whatever",
    "start": "2124480",
    "end": "2129560"
  },
  {
    "text": "has like you know just keep adding on those columns go go go um so again we didn't get bit by this we did get bit",
    "start": "2129560",
    "end": "2135520"
  },
  {
    "text": "though by the data row size and this is actually hard to like figure out from your database it's limited to 24",
    "start": "2135520",
    "end": "2141040"
  },
  {
    "text": "megabytes of a row and so we did hit this in our production um it wasn't like",
    "start": "2141040",
    "end": "2147280"
  },
  {
    "text": "they were storing images uh they were storing they were storing their log entries and TBL log and that log entry",
    "start": "2147280",
    "end": "2155200"
  },
  {
    "text": "was varar Max and sometimes it would be like an insane L long stack Trace that they would put in there and store it in",
    "start": "2155200",
    "end": "2161200"
  },
  {
    "text": "their log table and we're like we don't want to keep the log table in Azure right we'll just use Azure monitor like",
    "start": "2161200",
    "end": "2167000"
  },
  {
    "text": "a normal person so this one we just said we're not going to migrate your log because who cares if you need the logs",
    "start": "2167000",
    "end": "2172640"
  },
  {
    "text": "for your historical system you can still go back to the historical database whatever all right so um in terms of the",
    "start": "2172640",
    "end": "2181040"
  },
  {
    "text": "migration process of uh changing schema um so we have like our uh the oh yes so",
    "start": "2181040",
    "end": "2190119"
  },
  {
    "text": "the in terms of uh managing this migration so the first thing we did was correct any schema issues uh and based",
    "start": "2190119",
    "end": "2196640"
  },
  {
    "text": "on running the tool to say like okay these tables don't have primary Keys these table names are too long these column names are too long this column",
    "start": "2196640",
    "end": "2203200"
  },
  {
    "text": "name is weird so fix it so the very first thing is we uh we would correct all the schema in their on-prem database",
    "start": "2203200",
    "end": "2211000"
  },
  {
    "text": "first uh the next thing we do is then initialize the schema so create a blank database up an Azure and then export the",
    "start": "2211000",
    "end": "2218560"
  },
  {
    "text": "schema from on-prem and then import the schema and then you know like create the",
    "start": "2218560",
    "end": "2223760"
  },
  {
    "text": "tables just everything blank up inside of azure and then finally magic of",
    "start": "2223760",
    "end": "2229440"
  },
  {
    "text": "syncing the data so initializing is pretty straightforward right you can just right click the thing go to tasks",
    "start": "2229440",
    "end": "2235599"
  },
  {
    "text": "and uh just you know say generate a script that is all this stuff um so some",
    "start": "2235599",
    "end": "2241040"
  },
  {
    "text": "of the things we would do is Skip some of the autogenerated tables so things like uh your your EF migration table or",
    "start": "2241040",
    "end": "2247960"
  },
  {
    "text": "hangfire things that get created for you on the fire automatically uh we wind up skipping those because sometimes the",
    "start": "2247960",
    "end": "2253839"
  },
  {
    "text": "application would uh not know that those are there and then and then create them for us um we also wanted to make sure we",
    "start": "2253839",
    "end": "2260560"
  },
  {
    "text": "included all the other kind of uh related things like indexes and triggers and",
    "start": "2260560",
    "end": "2265880"
  },
  {
    "text": "whatnot um the next thing we do inside of azure is create a data sync group um",
    "start": "2265880",
    "end": "2271240"
  },
  {
    "text": "and so what this is is just saying here are the group of servers that I want to uh want to migrate or the group of",
    "start": "2271240",
    "end": "2277839"
  },
  {
    "text": "databases and I do this I'll show you here in a second um inside the Azure portal you go ahead and create this uh",
    "start": "2277839",
    "end": "2284520"
  },
  {
    "text": "go ahead and create this sync group you can also turn on automatic syncing but it's just on a scheduled",
    "start": "2284520",
    "end": "2290440"
  },
  {
    "text": "basis so for us we just turn it off for now and then as we get closer to production we would turn on automatic",
    "start": "2290440",
    "end": "2296800"
  },
  {
    "text": "syncing and make it run like every 10 minutes or 1 minute or whatever to ensure that the Deltas when we went live",
    "start": "2296800",
    "end": "2302720"
  },
  {
    "text": "were much lower so this would just reduce the amount of time for that final Sy before we turned on",
    "start": "2302720",
    "end": "2309839"
  },
  {
    "text": "production um then we also have to install a local sync agent so you get to",
    "start": "2309839",
    "end": "2315200"
  },
  {
    "text": "the point where you say I want to uh create a you know here's the database I want to sync and I want to sync to this",
    "start": "2315200",
    "end": "2320640"
  },
  {
    "text": "other database and this other database is on Prem at this point you install a sync agent somewhere on your on premise",
    "start": "2320640",
    "end": "2328000"
  },
  {
    "text": "environment that can talk to both the Azure SQL database and to your on-prem",
    "start": "2328000",
    "end": "2334040"
  },
  {
    "text": "database um so this one we would like we just just found a VM that was available",
    "start": "2334040",
    "end": "2339280"
  },
  {
    "text": "for us and installed the SQL data agent on here you can't install it on your SQL Server I typically don't because it is",
    "start": "2339280",
    "end": "2344920"
  },
  {
    "text": "using resources um and we just needed to make sure it had enough resources to be able to like the initial like push-up of data",
    "start": "2344920",
    "end": "2352680"
  },
  {
    "text": "it does by both copy all right so once I've created that",
    "start": "2352680",
    "end": "2358280"
  },
  {
    "text": "uh seek agent and installed the syn agent locally then I can select it up here in Azure and then now on my uh on",
    "start": "2358280",
    "end": "2366200"
  },
  {
    "text": "Prem VM the local agent I can then point it at the local database and point it up",
    "start": "2366200",
    "end": "2372319"
  },
  {
    "text": "at the uh Azure database as well so um when I'm selecting the",
    "start": "2372319",
    "end": "2380000"
  },
  {
    "text": "database up in Azure to say I want to uh I want to synchronize this database we also tell the directions I want to sync",
    "start": "2380000",
    "end": "2387520"
  },
  {
    "text": "and it it also supports bidirectional so it supports from your Hub database to",
    "start": "2387520",
    "end": "2392560"
  },
  {
    "text": "your member database from your me member database to your Hub database or vice versa and this is configurable and",
    "start": "2392560",
    "end": "2399040"
  },
  {
    "text": "changeable uh so for us because we were wanting to um potentially support a roll",
    "start": "2399040",
    "end": "2405040"
  },
  {
    "text": "back operation so if something went wrong in Azure and we needed to roll back to on Prem we actually made it",
    "start": "2405040",
    "end": "2410079"
  },
  {
    "text": "bidirectional so that during this transition period if we put it live and something went wrong you know how do we",
    "start": "2410079",
    "end": "2416119"
  },
  {
    "text": "make sure the data from Azure makes it back down to on Prem so if the users are going unchanging stuff and then",
    "start": "2416119",
    "end": "2422520"
  },
  {
    "text": "something breaks and you know we have to pull the plug and say back to on Prim then this uh tool lets us do so to go",
    "start": "2422520",
    "end": "2429040"
  },
  {
    "text": "both directions as much as possible we wanted to plan these kinds of contingencies up",
    "start": "2429040",
    "end": "2434800"
  },
  {
    "text": "front we didn't want to be surprised by something going wrong at production after we migrated and then us not have a",
    "start": "2434800",
    "end": "2440000"
  },
  {
    "text": "process or plan for a roll back so all these kinds of things we practice ahead of time roll outs roll backs back and",
    "start": "2440000",
    "end": "2446560"
  },
  {
    "text": "forth to make sure that when we went to production it was like as boring as",
    "start": "2446560",
    "end": "2451760"
  },
  {
    "text": "possible um this is like you know Azure portal gets a lot of flack for being like can be challenging to work with",
    "start": "2452000",
    "end": "2457720"
  },
  {
    "text": "it's better now uh this is like one of the worst UI I've ever seen um to select which things you want to actually uh",
    "start": "2457720",
    "end": "2464920"
  },
  {
    "text": "synchronize up into production so this one I I go and there's this UI in which I select the tables and then you can",
    "start": "2464920",
    "end": "2471960"
  },
  {
    "text": "also select the individual colums to watch as well so if you don't want to uh worry about specific Columns of data",
    "start": "2471960",
    "end": "2478760"
  },
  {
    "text": "like maybe there's just something that changes a lot but you don't care about uh or in this case like I didn't care about the T TBL log so I just unselected",
    "start": "2478760",
    "end": "2486240"
  },
  {
    "text": "that table and that it won't be migrated as part of this package um so yeah the last thing to",
    "start": "2486240",
    "end": "2493359"
  },
  {
    "text": "worry about is uh this the schema update process um now I was going to demo the",
    "start": "2493359",
    "end": "2499240"
  },
  {
    "text": "SQL data sync but it it doesn't work in the region I picked which was Australia East so whoops um so if I was going to",
    "start": "2499240",
    "end": "2506680"
  },
  {
    "text": "run this I'd have to run against Central and it takes forever to the for the day to get back so anyway um yes so then the last thing we",
    "start": "2506680",
    "end": "2514000"
  },
  {
    "text": "had to worry about was uh using this tool uh we were going to have ongoing",
    "start": "2514000",
    "end": "2519720"
  },
  {
    "text": "updating changes to the application so we wanted to make sure that we can handle this sort of process of like okay",
    "start": "2519720",
    "end": "2526119"
  },
  {
    "text": "there's features getting added features that that change the schema on Prim how",
    "start": "2526119",
    "end": "2531400"
  },
  {
    "text": "do we affect those changes up into our Azure environments during this migration",
    "start": "2531400",
    "end": "2536599"
  },
  {
    "text": "process luckily this didn't happen very often um but we didn't want to have like again like batch changes to say like",
    "start": "2536599",
    "end": "2542480"
  },
  {
    "text": "okay this poll request includes schema changes put it off to the side and wait until all the s m is complete uh we just",
    "start": "2542480",
    "end": "2548440"
  },
  {
    "text": "didn't want to uh incur that risk so uh the way this would work when",
    "start": "2548440",
    "end": "2554079"
  },
  {
    "text": "we did this update process is uh when we knew that there was a synchronization that was going to happen or a um a schem",
    "start": "2554079",
    "end": "2560839"
  },
  {
    "text": "of change was going to happen uh we would pause the sync uh so it would not be live and trying to go back and forth",
    "start": "2560839",
    "end": "2568040"
  },
  {
    "text": "um and in the UI it's as simple as just like click pause and then it's paused we would then deploy the schema",
    "start": "2568040",
    "end": "2575000"
  },
  {
    "text": "changes to uh both sides so on Prem and an Azure now uh for us we were using a",
    "start": "2575000",
    "end": "2582559"
  },
  {
    "text": "schema migration tool to do so I think it's called Uh it was Roundhouse at the time but now it's something else now I",
    "start": "2582559",
    "end": "2589520"
  },
  {
    "text": "forget the name oh great it's called great as in migrate um and so you may be using like EF migrations or something",
    "start": "2589520",
    "end": "2595559"
  },
  {
    "text": "like that so our deployment process would just point to both on Prem and Azure and roll out those schema changes",
    "start": "2595559",
    "end": "2602079"
  },
  {
    "text": "to both locations once both sides now had the correct schema I would go into that",
    "start": "2602079",
    "end": "2609240"
  },
  {
    "text": "horrendous user interface find the table and column that have been added or changed or removed whatever and then",
    "start": "2609240",
    "end": "2615119"
  },
  {
    "text": "check the box there that would then uh push that metadata out to uh SQL data",
    "start": "2615119",
    "end": "2620599"
  },
  {
    "text": "sync and it would also and this is I mean you can look behind the scenes of how it works but it's pretty it's pretty",
    "start": "2620599",
    "end": "2626599"
  },
  {
    "text": "like if I was going to invented myself this is probably what have what invented the way SQL data sync actually works",
    "start": "2626599",
    "end": "2631720"
  },
  {
    "text": "behind the scenes is for all of the tables and columns that you enlist in this migration process it will create",
    "start": "2631720",
    "end": "2639200"
  },
  {
    "text": "triggers a update trigger an insert trigger and a delete trigger and then it",
    "start": "2639200",
    "end": "2644319"
  },
  {
    "text": "creates Separate Tables to keep track of all those changes so anytime I change data or update whatever and then like it",
    "start": "2644319",
    "end": "2650960"
  },
  {
    "text": "Flags it in another table so that's uh when the data sync runs it only has to",
    "start": "2650960",
    "end": "2656280"
  },
  {
    "text": "look at the the Deltas there and say okay these are the changes that that work so contrast this with transaction",
    "start": "2656280",
    "end": "2661440"
  },
  {
    "text": "replication where I'm just looking at the log right the transaction log and applying those up into Azure that could",
    "start": "2661440",
    "end": "2668599"
  },
  {
    "text": "be more challenging to De with this process with SQL data sync it's very easy for me and Azure migrate and Azure",
    "start": "2668599",
    "end": "2674200"
  },
  {
    "text": "data Factory you can simply pause those things make your changes and then roll",
    "start": "2674200",
    "end": "2679280"
  },
  {
    "text": "them out and then hit enable and you're good to go yeah we would then reenable",
    "start": "2679280",
    "end": "2684559"
  },
  {
    "text": "this and then run the sync now the way data sync works is there's a initial synchronization that",
    "start": "2684559",
    "end": "2691520"
  },
  {
    "text": "happens the initial synchronization uses SQL book copy so that is like blazingly",
    "start": "2691520",
    "end": "2696760"
  },
  {
    "text": "fast for that initial uh data load I think for us because we were on Prim in",
    "start": "2696760",
    "end": "2702520"
  },
  {
    "text": "Texas running to uh running to uh South Africa regions that initial push for a",
    "start": "2702520",
    "end": "2709920"
  },
  {
    "text": "200 gig database took like a 10 hours or so so even though bul copy is really",
    "start": "2709920",
    "end": "2716079"
  },
  {
    "text": "really fast this is why we wanted to use online migration because it would take at least 10 hours if not more to export",
    "start": "2716079",
    "end": "2723800"
  },
  {
    "text": "the data then import it or copy it somewhere else to make it faster whatever it would take at least a day",
    "start": "2723800",
    "end": "2730160"
  },
  {
    "text": "for us to do all those things which is why we wanted to use a live online migration process because we just",
    "start": "2730160",
    "end": "2735640"
  },
  {
    "text": "couldn't wait that long also there's no like bulk copy does",
    "start": "2735640",
    "end": "2741400"
  },
  {
    "text": "not have a um there's like progress bar so you just don't know like you don't know how long it's taking and so you can",
    "start": "2741400",
    "end": "2748160"
  },
  {
    "text": "be just like well we we're going live in production stop the website and then we just wait and wait and wait and wait uh",
    "start": "2748160",
    "end": "2754160"
  },
  {
    "text": "until it's till it's complete the file migration um you know there's",
    "start": "2754160",
    "end": "2759520"
  },
  {
    "text": "like I showed like eight tools for doing SQL migration for the files there's surprisingly there's just not a lot of",
    "start": "2759520",
    "end": "2765559"
  },
  {
    "text": "tools out there to do so they work great um but there it's just kind of silly that you go to the uh when you go to the",
    "start": "2765559",
    "end": "2772040"
  },
  {
    "text": "documentation for Microsoft of like okay we have this fancy tool and UI and and editor and ID to do this migration uh",
    "start": "2772040",
    "end": "2779160"
  },
  {
    "text": "for files where we're going from on Prem file server and we're using storage accounts with file storage accounts up",
    "start": "2779160",
    "end": "2785720"
  },
  {
    "text": "in Azure so not blobs uh that would be another migration process we're using this like files up in Azure uh they just",
    "start": "2785720",
    "end": "2791880"
  },
  {
    "text": "say use robocopy but robocopy does support like",
    "start": "2791880",
    "end": "2797160"
  },
  {
    "text": "incremental online migrations as well so um with the jobs file you can do this uh",
    "start": "2797160",
    "end": "2803680"
  },
  {
    "text": "so there's it tells you the exact command line arguments to feed into this tool to be able to do this incremental",
    "start": "2803680",
    "end": "2809680"
  },
  {
    "text": "migration proc process so what I'm doing is I'm creating a jobs file which is just taking all the arguments and",
    "start": "2809680",
    "end": "2815280"
  },
  {
    "text": "sticking them into a file and then I did the initial migration uh which took again like 3 or 4 days because again had",
    "start": "2815280",
    "end": "2822599"
  },
  {
    "text": "to cross the entire ocean uh but the incremental migration process would take seconds so I had put in a scheduled",
    "start": "2822599",
    "end": "2828960"
  },
  {
    "text": "basis ran it like every hour or so and then right before we went live we would run this last time to say like okay stop",
    "start": "2828960",
    "end": "2835760"
  },
  {
    "text": "the application do the last set of migration and it would just take seconds um one thing we we didn't",
    "start": "2835760",
    "end": "2842200"
  },
  {
    "text": "realize is we had to tune the threads for performance um so the initial load you don't want to have a lot of threads",
    "start": "2842200",
    "end": "2848240"
  },
  {
    "text": "because now that's like doing a lot of it's more um iio bound or network bound I should say so if I have 20 threads up",
    "start": "2848240",
    "end": "2854880"
  },
  {
    "text": "front then I'm saturating the network and it gets actually slower but for incremental migrations uh we want to up",
    "start": "2854880",
    "end": "2860760"
  },
  {
    "text": "the thread counts because it's spidering through all the folders on both sides to see what things have been added modified",
    "start": "2860760",
    "end": "2867160"
  },
  {
    "text": "whatever um and so it's something we did after the initial migration we used Mir to mirror and",
    "start": "2867160",
    "end": "2874000"
  },
  {
    "text": "preserve structure so the production looked exactly the same and then we put just a schedule task uh to automate all",
    "start": "2874000",
    "end": "2879680"
  },
  {
    "text": "these different things so I was surprised like they they",
    "start": "2879680",
    "end": "2885079"
  },
  {
    "text": "suggested to use this janky tool that I only like I only use in Anger um but is",
    "start": "2885079",
    "end": "2890680"
  },
  {
    "text": "it worked actually quite well so he said okay if they recommend to use it then why not there of course other file",
    "start": "2890680",
    "end": "2896640"
  },
  {
    "text": "migration tools you can use like I don't know other ones um but this one worked well for us and they already had a",
    "start": "2896640",
    "end": "2902440"
  },
  {
    "text": "documented so he said that's that's good enough",
    "start": "2902440",
    "end": "2907160"
  },
  {
    "text": "um yes so on the the actual applications themselves so that was the kind of storage migration uh on the application",
    "start": "2907680",
    "end": "2914480"
  },
  {
    "text": "migration we again wanted to make sure that we didn't stop the train of their feature de delivery so we didn't want to",
    "start": "2914480",
    "end": "2920520"
  },
  {
    "text": "say stop delivering features for three months while we get all this up and going and then you can finally have new",
    "start": "2920520",
    "end": "2926200"
  },
  {
    "text": "features again we wanted to be able to support the software like we wanted to support their uh application life cycle",
    "start": "2926200",
    "end": "2932480"
  },
  {
    "text": "sdlc um from kind of both sides so the way we did this was uh initially migrated their their repository from on",
    "start": "2932480",
    "end": "2939200"
  },
  {
    "text": "print B bit bucket over to GitHub and that was a relatively easy thing to do right just get you can just do like",
    "start": "2939200",
    "end": "2945240"
  },
  {
    "text": "actually GitHub supports you importing from somewhere else um unless that somewhere else is on Prim then it",
    "start": "2945240",
    "end": "2951319"
  },
  {
    "text": "doesn't work so well but this is easy as like I just add a new remote in a repository and say you know get push",
    "start": "2951319",
    "end": "2957599"
  },
  {
    "text": "with you know all the tags and whatever and then it'll push it up over to GitHub and then I configure my build server to",
    "start": "2957599",
    "end": "2963960"
  },
  {
    "text": "look at a different GitHub different git repository and that was fairly straightforward for us to do so the G",
    "start": "2963960",
    "end": "2969079"
  },
  {
    "text": "the G side of things is actually pretty simple you know tell the team push up all your changes all your branches",
    "start": "2969079",
    "end": "2974720"
  },
  {
    "text": "whatever although I didn't have to really do that right you could just add a new remotes whatever and then we pointed their uh existing on-prem build",
    "start": "2974720",
    "end": "2981920"
  },
  {
    "text": "in build agents over to GitHub once we had that pipeline in",
    "start": "2981920",
    "end": "2987160"
  },
  {
    "text": "place now came the time for us to then uh build a build and release pipelines up into Azure so what we want up doing",
    "start": "2987160",
    "end": "2993760"
  },
  {
    "text": "is instead of modifying their existing build and deploy pipelines we just built new ones off to the side so we built the",
    "start": "2993760",
    "end": "2999160"
  },
  {
    "text": "new build and deploy pipelines over in Azure Azure devops pipelines",
    "start": "2999160",
    "end": "3005520"
  },
  {
    "text": "yes uh so we used uh Azure devops pipelines to manage all of the build and deployment into Azure and then team City",
    "start": "3005520",
    "end": "3011920"
  },
  {
    "text": "just continues to be the on-prem deployments uh on you know manag builds and deploys into on-prem and never were",
    "start": "3011920",
    "end": "3018240"
  },
  {
    "text": "the two like mix or meet so we just said parallel build and deployment pipelines",
    "start": "3018240",
    "end": "3023480"
  },
  {
    "text": "uh which means we can we can preserve or even design new on all existing release uh build and release strategies so we",
    "start": "3023480",
    "end": "3030000"
  },
  {
    "text": "built and uh designed the build and release pipelines as like they were for",
    "start": "3030000",
    "end": "3037359"
  },
  {
    "text": "on Prem yes so the build and release pipelines were independent and then",
    "start": "3037359",
    "end": "3042480"
  },
  {
    "text": "application configuration was then duplicated per pipeline so if you had a new config value that had to be added",
    "start": "3042480",
    "end": "3048280"
  },
  {
    "text": "over on the left you had to remember to then add it over on the right now some things were not exactly the same so",
    "start": "3048280",
    "end": "3054119"
  },
  {
    "text": "things like uh like folder names or path names or drive names those were going to",
    "start": "3054119",
    "end": "3060160"
  },
  {
    "text": "change but there were a lot of those connection strings as well right that's going to be different for in Azure versus on Prem um so we had to do that",
    "start": "3060160",
    "end": "3066960"
  },
  {
    "text": "sort of migration here so um their existing way of doing",
    "start": "3066960",
    "end": "3072040"
  },
  {
    "text": "their uh configuration was this really this janky pastrami tool um was like a",
    "start": "3072040",
    "end": "3077200"
  },
  {
    "text": "homegrown like way of doing XML poke into web config and all sorts of crazy business uh so we didn't want to do that",
    "start": "3077200",
    "end": "3082839"
  },
  {
    "text": "in Azure so we wind up doing is um we moved all the non-secret into config transforms because this is aspnet 4.8 uh",
    "start": "3082839",
    "end": "3090520"
  },
  {
    "text": "for the net 6 stuff uh you'd use like the app app settings. blah. Json so app",
    "start": "3090520",
    "end": "3096400"
  },
  {
    "text": "settings. qa. json. stage. json. production. Json for all their non-secret values their secrets were a",
    "start": "3096400",
    "end": "3103760"
  },
  {
    "text": "little trickier um because in their current system their secrets were being stored inside of Team City and then",
    "start": "3103760",
    "end": "3110839"
  },
  {
    "text": "deployed uh and poked into XML when they did the deployment in Azure right we'",
    "start": "3110839",
    "end": "3117160"
  },
  {
    "text": "want to use key Vault for Secrets but if we use key vault in Azure how are we",
    "start": "3117160",
    "end": "3122559"
  },
  {
    "text": "going to manage that on Prem would we change on Prem to use key Vault for Secrets would we have like feature Flags",
    "start": "3122559",
    "end": "3128920"
  },
  {
    "text": "to say you know if on Prem do this thing if not on Prem do this other thing uh so",
    "start": "3128920",
    "end": "3133960"
  },
  {
    "text": "he said we'll we'll wait for that we'll wait until we'll actually fully inside of azure to have a strategy for your",
    "start": "3133960",
    "end": "3140760"
  },
  {
    "text": "proper secret management there so for this one we just still used Ado like the the way they were doing today which is",
    "start": "3140760",
    "end": "3146880"
  },
  {
    "text": "Secrets being stored in AZ or devops pipeline variables clicking the little padlog for secrets and then config drand",
    "start": "3146880",
    "end": "3153079"
  },
  {
    "text": "forms would then like poke those values into XML Ado pipeline supports this out of the box it's like not a big thing for",
    "start": "3153079",
    "end": "3159280"
  },
  {
    "text": "us to do we just like enter app service deployments I check the box to say and do config uh transforms you tell your",
    "start": "3159280",
    "end": "3165559"
  },
  {
    "text": "config files and it will do the transforms for you uh one of the things we did have to",
    "start": "3165559",
    "end": "3171400"
  },
  {
    "text": "uh figure out was Ado pipelines have limitations in their variable names their",
    "start": "3171400",
    "end": "3176960"
  },
  {
    "text": "I I don't remember anymore exactly the weird jankiness that had there but on Prim we could do whatever we want it was Powershell in the Azure deployments",
    "start": "3176960",
    "end": "3184000"
  },
  {
    "text": "we're using those those uh app service pipeline tasks and so there were some limitations there we had to conform to",
    "start": "3184000",
    "end": "3190640"
  },
  {
    "text": "not a really big deal but we just had to go back and correct them before we went over to Azure and if there are any changes here",
    "start": "3190640",
    "end": "3196920"
  },
  {
    "text": "between these two it was a manual job so if I added new config values over here I would have to then remember to go ahead",
    "start": "3196920",
    "end": "3202880"
  },
  {
    "text": "and add them over there as well now signal R um presented its own fun",
    "start": "3202880",
    "end": "3210599"
  },
  {
    "text": "challenge um so the current APP uses asp.net singal R um ASP net single R",
    "start": "3210599",
    "end": "3217920"
  },
  {
    "text": "does not support Azure SQL so remember we're in a web Farm environment so if you're in a scale out scenario with with",
    "start": "3217920",
    "end": "3223839"
  },
  {
    "text": "signal R you don't want your back plane stored in memory you want your back plane stored somewhere persistent so SQL",
    "start": "3223839",
    "end": "3230240"
  },
  {
    "text": "or a broker or whatever not in memory so they were on a web Farm scenario on PR",
    "start": "3230240",
    "end": "3236799"
  },
  {
    "text": "so they'd already gone through this process of putting their uh back plane of signal art into SQL right so it's",
    "start": "3236799",
    "end": "3242680"
  },
  {
    "text": "just all there together Azure aspet singal R does not support Azure",
    "start": "3242680",
    "end": "3249200"
  },
  {
    "text": "SQL why because there's a line of code I finally found this because it had this",
    "start": "3249200",
    "end": "3254319"
  },
  {
    "text": "very specific exception title so I go search in GitHub and sure enough when signal R starts off starts up and you're",
    "start": "3254319",
    "end": "3261079"
  },
  {
    "text": "using the SQL backplane provider whatever it will check the server properties and says if you're Azure",
    "start": "3261079",
    "end": "3267680"
  },
  {
    "text": "throw an exception not supported is it actually not supported no it could work",
    "start": "3267680",
    "end": "3273040"
  },
  {
    "text": "like it's there's nothing special and Signal our schema and tables right there's nothing that magical there but",
    "start": "3273040",
    "end": "3279559"
  },
  {
    "text": "there exists an Azure service for this right Azure signal R so how do you get everyone to move to Azure signal R throw",
    "start": "3279559",
    "end": "3285839"
  },
  {
    "text": "an exception when they try to do anything else so Azure signal R this is the other",
    "start": "3285839",
    "end": "3291079"
  },
  {
    "text": "problem we ran into is not asp.net signal R the the old one it's the new one signal r 2.0 um these are somewhat",
    "start": "3291079",
    "end": "3298480"
  },
  {
    "text": "compatible but not not exactly so you can use Azure signal R and asp.net",
    "start": "3298480",
    "end": "3304440"
  },
  {
    "text": "classic that is a thing that is supported today but it's like the next version so like version 1.0 to version",
    "start": "3304440",
    "end": "3309680"
  },
  {
    "text": "2.0 so like okay do we migrate signal r on Prim to 2.0 and then get ready for",
    "start": "3309680",
    "end": "3316680"
  },
  {
    "text": "production or is it easy enough for us to be able to manage it too so we wind up just doing a feature flag to toggle",
    "start": "3316680",
    "end": "3322359"
  },
  {
    "text": "between these two things what it meant was today the Hub is hosted inside of",
    "start": "3322359",
    "end": "3329480"
  },
  {
    "text": "our on-prem application when we move up to Azure we're no longer having to host",
    "start": "3329480",
    "end": "3334839"
  },
  {
    "text": "the Hub The Hub is azure signal R so we actually just like R up removing things",
    "start": "3334839",
    "end": "3340799"
  },
  {
    "text": "and there were slight API changes from 1.0 to 2.0 for the clients and so that was just a feature flag to say if on",
    "start": "3340799",
    "end": "3347599"
  },
  {
    "text": "Prim do X otherwise in Azure do y wasn't that um wasn't that big of a deal and",
    "start": "3347599",
    "end": "3354280"
  },
  {
    "text": "they wind up using some shims to swap out between the hubs and clients so there's some code in there to say like",
    "start": "3354280",
    "end": "3359319"
  },
  {
    "text": "I'm kind of abstracting the API of signalr and then used a feature toggle something like this to say um you know",
    "start": "3359319",
    "end": "3366319"
  },
  {
    "text": "if I'm over here do this if I'm over there uh do that okay so the networking side so",
    "start": "3366319",
    "end": "3374480"
  },
  {
    "text": "remember before there was like stuff more stuff and even more stuff but now it's just going to be Azure stuff that",
    "start": "3374480",
    "end": "3380520"
  },
  {
    "text": "talks to more Azure stuff and then even more Azure stuff and then finally our Azure junk again this is like private",
    "start": "3380520",
    "end": "3387880"
  },
  {
    "text": "links and v-ets and those are only two things I can think of but there are all these kind of other aure networking",
    "start": "3387880",
    "end": "3393520"
  },
  {
    "text": "things to make this all work properly with you know security blah blah blah um and so that there was again smart people",
    "start": "3393520",
    "end": "3399079"
  },
  {
    "text": "that knew how this all this worked and I just said like I want my app service and there was connected to everything",
    "start": "3399079",
    "end": "3405359"
  },
  {
    "text": "hopefully to actually deploy this out the team decided to use terraform one of the nice things about sort of a",
    "start": "3405359",
    "end": "3410720"
  },
  {
    "text": "Greenfield Azure deployments is that I can actually use these infrastructures code tools um unfortunately these tools",
    "start": "3410720",
    "end": "3418200"
  },
  {
    "text": "don't really work great for existing Cloud infrastructure like you can point terraform at an existing kind of",
    "start": "3418200",
    "end": "3424319"
  },
  {
    "text": "deployment and we'll download like The jankiest Looking terraform files locally um so for this one they'll like okay",
    "start": "3424319",
    "end": "3430039"
  },
  {
    "text": "this is all new net new Azure resources so I'll use terraform to be able to put this",
    "start": "3430039",
    "end": "3436838"
  },
  {
    "text": "out um so all these kinds of new technologies we wanted to make sure that they would work for us so we wind up",
    "start": "3437920",
    "end": "3444160"
  },
  {
    "text": "prototyping all these different things so all these potential Technologies like SQL data sync um the robocopy stuff I",
    "start": "3444160",
    "end": "3451839"
  },
  {
    "text": "created dummy apps with like dummy data what not to make sure that these things could actually work before we got too",
    "start": "3451839",
    "end": "3457039"
  },
  {
    "text": "far down the line of choosing resources and whatnot um so all the Technologies are prototype and demoed um all the",
    "start": "3457039",
    "end": "3464160"
  },
  {
    "text": "decisions were logged into a ADR um so if you get one thing out of this talk do adrs because frantastic to have a record",
    "start": "3464160",
    "end": "3471640"
  },
  {
    "text": "of decisions instead of just like why did we pick Azure signal R oh right we were forced to because of that",
    "start": "3471640",
    "end": "3478079"
  },
  {
    "text": "exception and then we use this sandbox environment and subscription as a playground to try all these different",
    "start": "3478079",
    "end": "3483839"
  },
  {
    "text": "sort of tools out so what do this look like in terms",
    "start": "3483839",
    "end": "3489000"
  },
  {
    "text": "of a roll out so about three weeks before a single environment was ready uh",
    "start": "3489000",
    "end": "3494480"
  },
  {
    "text": "the Azure environment needed to be complete then about two weeks before go live we had to have the release pipeline",
    "start": "3494480",
    "end": "3500640"
  },
  {
    "text": "finish the data sync set up and file sync set up and kicked off then one week before go live we would do our data",
    "start": "3500640",
    "end": "3506680"
  },
  {
    "text": "validation environment validation and configuration validation which then finally lead into go",
    "start": "3506680",
    "end": "3513839"
  },
  {
    "text": "live so how did this actually work so this was our process we had both",
    "start": "3513839",
    "end": "3519480"
  },
  {
    "text": "environments up and running and validated now we needed to do a swap from one to the other so we would enable",
    "start": "3519480",
    "end": "3525880"
  },
  {
    "text": "a maintenance mode on Prim we still to take the application down but luckily it was like much less time than uh we",
    "start": "3525880",
    "end": "3532319"
  },
  {
    "text": "originally would need to um so you know this is like do the app offline thing",
    "start": "3532319",
    "end": "3537640"
  },
  {
    "text": "with is uh and put it offline also put it offline in Azure as well so that like",
    "start": "3537640",
    "end": "3543359"
  },
  {
    "text": "we can validate it first when we get over there we would disable hangfire and disable any kind of background running",
    "start": "3543359",
    "end": "3549760"
  },
  {
    "text": "things to make sure those weren't also doing any kind of you know new transactions we' run our syncs the last",
    "start": "3549760",
    "end": "3555559"
  },
  {
    "text": "time so running SQL data sync and file sync one last time to get all those changes since the last time it run so",
    "start": "3555559",
    "end": "3562079"
  },
  {
    "text": "this would because it was just those tiny little Deltas this would just take seconds to",
    "start": "3562079",
    "end": "3567400"
  },
  {
    "text": "run we had F flipped DNS so over here this is cloud flare we had flipped the",
    "start": "3567400",
    "end": "3572599"
  },
  {
    "text": "cloud flare DNS entries from on Prim over to Azure then finally turn everything back",
    "start": "3572599",
    "end": "3578559"
  },
  {
    "text": "on again over on the Azure side so enable hangfire enable the applications disable the maintenance mode um our case",
    "start": "3578559",
    "end": "3585160"
  },
  {
    "text": "maintenance mode uh we also changed over to use cloudflare in this case so we disabled maintenance mode and Cloud",
    "start": "3585160",
    "end": "3590720"
  },
  {
    "text": "flare uh smoke test and monitor make sure everything looks good and then finally like pop the cork pop the",
    "start": "3590720",
    "end": "3597079"
  },
  {
    "text": "champagne because it all worked um yeah so we also had a kind of",
    "start": "3597079",
    "end": "3602480"
  },
  {
    "text": "an incremental roll out of our of our different environments so we didn't do all of One environment before we moved",
    "start": "3602480",
    "end": "3607520"
  },
  {
    "text": "on to the next one uh we would like have a rolling set of changes to say we're going to start the roll out of one",
    "start": "3607520",
    "end": "3613000"
  },
  {
    "text": "environment while the other one environment is actually completing to cut down on the like the amount of time for the overall completion and then once",
    "start": "3613000",
    "end": "3620920"
  },
  {
    "text": "QA was done we would do stages and do a very fast follow production because had",
    "start": "3620920",
    "end": "3626200"
  },
  {
    "text": "that issue where stage gated production and so if there's weeks between stage and production that was also weeks",
    "start": "3626200",
    "end": "3632400"
  },
  {
    "text": "between when they can roll out so just a few lessons learn here uh prototype",
    "start": "3632400",
    "end": "3637640"
  },
  {
    "text": "those Technologies before choosing which one works best for you uh so instead of like going far down the path of a",
    "start": "3637640",
    "end": "3644400"
  },
  {
    "text": "migration tooling choice and realizing doesn't work to make a very simple set of prototypes to make sure that your",
    "start": "3644400",
    "end": "3649799"
  },
  {
    "text": "choices will work and the environments that they're actually going to be running in um don't let the perfect be",
    "start": "3649799",
    "end": "3655440"
  },
  {
    "text": "the enemy of good this kind of a universal uh recommendation uh there were a lot of cases where like oh",
    "start": "3655440",
    "end": "3660720"
  },
  {
    "text": "wouldn't it be cool if we used Azure retus for caching as opposed to SQL as caching um but we just didn't want to",
    "start": "3660720",
    "end": "3667119"
  },
  {
    "text": "add too many new technologies to the mix um like and this is again like like to resist sort of quote fixing the",
    "start": "3667119",
    "end": "3673119"
  },
  {
    "text": "architecture uh we wanted to land in Azure first and then innovate once we got there not have a bunch of things",
    "start": "3673119",
    "end": "3679119"
  },
  {
    "text": "that were changing once we were going from on Prem up into Azure be very careful with",
    "start": "3679119",
    "end": "3685079"
  },
  {
    "text": "infrastructure changes during rollout so one of the things that got introduced between environment validation and go",
    "start": "3685079",
    "end": "3690559"
  },
  {
    "text": "live is the infrastructure team decided to turn on the web application firewall which like blocked everything",
    "start": "3690559",
    "end": "3696839"
  },
  {
    "text": "so we're like gosh I could have sworn this application worked what the hell happened and it turns out they turned on",
    "start": "3696839",
    "end": "3702480"
  },
  {
    "text": "a WAFF which like broke almost every request in the system um and so like",
    "start": "3702480",
    "end": "3708079"
  },
  {
    "text": "maybe don't do that maybe don't change things right before you're G to go live like kind of settle things down a bit",
    "start": "3708079",
    "end": "3714559"
  },
  {
    "text": "and if you've done this right and you're prepared then roll out should be boring and it was it was just like I guess I",
    "start": "3714559",
    "end": "3720520"
  },
  {
    "text": "guess that's it I guess I guess we're done and it just all worked so thank you all very much um if",
    "start": "3720520",
    "end": "3727400"
  },
  {
    "text": "you have questions I'll be hanging out afterwards uh because yeah we're right at time um otherwise enjoy the rest of",
    "start": "3727400",
    "end": "3732680"
  },
  {
    "text": "the conference and thanks for having me",
    "start": "3732680",
    "end": "3736680"
  }
]