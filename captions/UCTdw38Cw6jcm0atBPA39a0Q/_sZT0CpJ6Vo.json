[
  {
    "start": "0",
    "end": "33000"
  },
  {
    "text": "you can all hear me I hear actually I heard echoes oh okay good morning finally we're getting",
    "start": "4860",
    "end": "11219"
  },
  {
    "text": "started three minutes after the assigned time but that's okay we have a whole",
    "start": "11219",
    "end": "20220"
  },
  {
    "text": "hour my name is Nikolai I work for a company here in Oslo called Bek while",
    "start": "20220",
    "end": "25800"
  },
  {
    "text": "here in Norway we have office in Trondheim - and I'm here to talk about this first just very easy about what",
    "start": "25800",
    "end": "37860"
  },
  {
    "start": "33000",
    "end": "65000"
  },
  {
    "text": "f-sharp make is because is in the title and I feel like I not to maybe explain",
    "start": "37860",
    "end": "44220"
  },
  {
    "text": "where I'm going with this title because it's a bit bus were the bus were they and yeah well fake is what we all know",
    "start": "44220",
    "end": "53190"
  },
  {
    "text": "from a long long time ago about make files and everything is a build",
    "start": "53190",
    "end": "58770"
  },
  {
    "text": "automation utility what that means basically mean is just a tool for",
    "start": "58770",
    "end": "64430"
  },
  {
    "text": "enabling build automation and this is",
    "start": "64430",
    "end": "70110"
  },
  {
    "start": "65000",
    "end": "105000"
  },
  {
    "text": "just taken straight from Wikipedia and just like explains what a build",
    "start": "70110",
    "end": "75840"
  },
  {
    "text": "automation what build automation is and the reason we use build automation is",
    "start": "75840",
    "end": "81960"
  },
  {
    "text": "because we want documented builds and we want reproducible builds and we want our",
    "start": "81960",
    "end": "89640"
  },
  {
    "text": "build to return some kind of artifacts that we can use I'm saying I'm using the",
    "start": "89640",
    "end": "94890"
  },
  {
    "text": "word immutable but we want the build to be reproducible and we want the artefact to when it's done to be immutable we",
    "start": "94890",
    "end": "101880"
  },
  {
    "text": "don't want to change it later and that's why I mean the tiled saying like immutable deployments or rip",
    "start": "101880",
    "end": "108710"
  },
  {
    "start": "105000",
    "end": "216000"
  },
  {
    "text": "reproducible deployments because the goal here and what I'm going through in",
    "start": "108710",
    "end": "113790"
  },
  {
    "text": "this talk is about achieving the same for our deployments as we are for our",
    "start": "113790",
    "end": "121110"
  },
  {
    "text": "builds and the reason we want to do that",
    "start": "121110",
    "end": "127799"
  },
  {
    "text": "is because we want to get everything back in the source control that's the big thing about make files and cake and",
    "start": "127799",
    "end": "133290"
  },
  {
    "text": "fake and all of these things we get it back into source control and everyone can read the",
    "start": "133290",
    "end": "138790"
  },
  {
    "text": "read how things are built we can check out our old version of the code and we",
    "start": "138790",
    "end": "144230"
  },
  {
    "text": "can see how the code was built at that time so if we store everything in like",
    "start": "144230",
    "end": "149530"
  },
  {
    "text": "team CD or VST s we just usually have it doesn't like follow the code we can have",
    "start": "149530",
    "end": "155540"
  },
  {
    "text": "different revisions and insurance stuff like that but it's kind of hard to keep track of what build process and what",
    "start": "155540",
    "end": "161420"
  },
  {
    "text": "build steps are belong to what revision",
    "start": "161420",
    "end": "166790"
  },
  {
    "text": "of the code and also if you have a lot of branching and stuff maybe you want to change how the app is built in a branch",
    "start": "166790",
    "end": "173960"
  },
  {
    "text": "and you do a pull request you want it to build but you don't want to change the build process for the other branches B",
    "start": "173960",
    "end": "179450"
  },
  {
    "text": "until this one is ready so that's another like big win for having your",
    "start": "179450",
    "end": "184550"
  },
  {
    "text": "build automation in the source control and together with the code and not letting some external system control it",
    "start": "184550",
    "end": "191510"
  },
  {
    "text": "or own it and you get all the other things that you get by having things in git like it's distributed everyone has a",
    "start": "191510",
    "end": "198560"
  },
  {
    "text": "copy yada-yada so I was thinking like okay so",
    "start": "198560",
    "end": "203600"
  },
  {
    "text": "we're using a tool like this for build and I was thinking why not use the same",
    "start": "203600",
    "end": "208670"
  },
  {
    "text": "tool that the developers know for our deployments and I got this like I got",
    "start": "208670",
    "end": "218330"
  },
  {
    "start": "216000",
    "end": "308000"
  },
  {
    "text": "this email here on the left side like this summary email from Twitter and like oh yeah another of these build",
    "start": "218330",
    "end": "224860"
  },
  {
    "text": "automation tools or utilities and I'm pitching this term and term up here",
    "start": "224860",
    "end": "230690"
  },
  {
    "text": "which is a cake and it's like there are so many to choose from these days",
    "start": "230690",
    "end": "236420"
  },
  {
    "text": "and as a.net developer you have basically these three options with which",
    "start": "236420",
    "end": "241459"
  },
  {
    "text": "are the big ones and I kind of wanted to just say that peace sake which is",
    "start": "241459",
    "end": "249890"
  },
  {
    "text": "PowerShell sure if you have a lot of PowerShell and your whole team is super awesome in PowerShell you can use it but",
    "start": "249890",
    "end": "255709"
  },
  {
    "text": "if you in terms of features in terms of contributors and the way going forward",
    "start": "255709",
    "end": "261310"
  },
  {
    "text": "the other two are much better options I can be as honest as to say that if you",
    "start": "261310",
    "end": "267229"
  },
  {
    "text": "choose cake or if you choose fake it doesn't really matter you have to choose what your team is most for the bullet because you can do the",
    "start": "267229",
    "end": "273889"
  },
  {
    "text": "same with both of them the reason I prefer fake is a personal experience",
    "start": "273889",
    "end": "280479"
  },
  {
    "text": "with that I've tried to start using cake in teams that are more C sharp focused",
    "start": "280479",
    "end": "286639"
  },
  {
    "text": "and a bit hostile against F sharp but I didn't have as good an experience in the",
    "start": "286639",
    "end": "292190"
  },
  {
    "text": "editor and in the documentation and that's why I've I'm falling back to fake",
    "start": "292190",
    "end": "298580"
  },
  {
    "text": "I feel all the time and the C sharp devs on my team they are all very happy with",
    "start": "298580",
    "end": "304030"
  },
  {
    "text": "F sharp make or fake also I had to",
    "start": "304030",
    "end": "311000"
  },
  {
    "start": "308000",
    "end": "367000"
  },
  {
    "text": "change some things with this talk because nine days ago the final release of fake five was or five fake five came",
    "start": "311000",
    "end": "319070"
  },
  {
    "text": "out like officially it's been like a release candidate for some time so been using it and but I just it's a bit yeah",
    "start": "319070",
    "end": "326449"
  },
  {
    "text": "because it has all of these things included in it it's much more",
    "start": "326449",
    "end": "332900"
  },
  {
    "text": "modularized it's like a rewrite of fake in many ways so they've taken the good going forward it's much more focused on",
    "start": "332900",
    "end": "340430"
  },
  {
    "text": "the new dotnet CLI tools and it's even now it doesn't like core 2.1 you get",
    "start": "340430",
    "end": "348800"
  },
  {
    "text": "global tools and now fake is a global tool which feels much more right than having to bootstrap it I'll get a bit",
    "start": "348800",
    "end": "355099"
  },
  {
    "text": "back to that and yeah removed some needs that you had previously but you don't",
    "start": "355099",
    "end": "361759"
  },
  {
    "text": "need any more the reason I like fakes so much is because fake is all valid F",
    "start": "361759",
    "end": "369740"
  },
  {
    "start": "367000",
    "end": "508000"
  },
  {
    "text": "sharp so as long as you have a editor that supports F sharp then you have fake",
    "start": "369740",
    "end": "376729"
  },
  {
    "text": "working you just need to define your modules in the start which is still",
    "start": "376729",
    "end": "382220"
  },
  {
    "text": "valid F sharp though this syntax is fake specific it's still valid F sharp so it",
    "start": "382220",
    "end": "387500"
  },
  {
    "text": "doesn't break anything in your editor and then it gives you this intellisense file that you log in f sharp has been",
    "start": "387500",
    "end": "394159"
  },
  {
    "text": "cross-platform and available on on all platforms for a long time it's also like",
    "start": "394159",
    "end": "401570"
  },
  {
    "text": "scripting language down it's core it didn't get like a CSX files like the years and years after the",
    "start": "401570",
    "end": "408150"
  },
  {
    "text": "language was what's created it's very lean and nice functional programming language on the dotnet stack and that",
    "start": "408150",
    "end": "414540"
  },
  {
    "text": "makes it perfect for script files and it lets you know this intellisense file effects makes for you then you get auto",
    "start": "414540",
    "end": "421110"
  },
  {
    "text": "completion and compile errors everything like you expect to have in your normal",
    "start": "421110",
    "end": "426470"
  },
  {
    "text": "daily programming experience you get that also in your build script and I",
    "start": "426470",
    "end": "432780"
  },
  {
    "text": "feel that this is from my experience much superior to the other build systems",
    "start": "432780",
    "end": "438650"
  },
  {
    "text": "so you do that you said your your modules or your dependencies whatever you want to call them and they are built",
    "start": "438650",
    "end": "445140"
  },
  {
    "text": "independently and publish on you get and that's why it's getting fetched from you",
    "start": "445140",
    "end": "450330"
  },
  {
    "text": "take in your editor Auto completion and then you define targets and here are",
    "start": "450330",
    "end": "455610"
  },
  {
    "text": "some very simple targets like clean folders build the solution and yeah just",
    "start": "455610",
    "end": "463110"
  },
  {
    "text": "a default target because in a target you can basically do anything anything dotnet can do you can do inside a target",
    "start": "463110",
    "end": "468360"
  },
  {
    "text": "like this and then in the end all the way to the bottom you have these arrows",
    "start": "468360",
    "end": "473720"
  },
  {
    "text": "defining the order or the dependencies of your targets you're saying to build I",
    "start": "473720",
    "end": "480150"
  },
  {
    "text": "first need to clean because I've if I try to build there might be a lot of file old files in in these folders so",
    "start": "480150",
    "end": "487950"
  },
  {
    "text": "it's kind of like a DSL a domain-specific language like that you're writing the fake language but",
    "start": "487950",
    "end": "494700"
  },
  {
    "text": "it's again all valid F sharp so this target is like a namespace or module and",
    "start": "494700",
    "end": "500340"
  },
  {
    "text": "dot create is a function that takes a name and yeah another function so or",
    "start": "500340",
    "end": "506250"
  },
  {
    "text": "valid F sharp there's a lot of finished module tools so you don't you don't have",
    "start": "506250",
    "end": "511890"
  },
  {
    "start": "508000",
    "end": "550000"
  },
  {
    "text": "to jump into a target and start writing like dotnet code there's a lot of like finished modules and it's just an",
    "start": "511890",
    "end": "519000"
  },
  {
    "text": "example of a lot of things you can do with fake kind of out of the box with the the modules that are already there",
    "start": "519000",
    "end": "525320"
  },
  {
    "text": "especially like things like generating assembly info files for this version",
    "start": "525320",
    "end": "532800"
  },
  {
    "text": "that you're building integration to team city and yeah creating releases in octopus deploy",
    "start": "532800",
    "end": "538860"
  },
  {
    "text": "you can do almost anything with modules that are already there so usually in a",
    "start": "538860",
    "end": "547800"
  },
  {
    "text": "in a project like normal project in my team the dependency graph in the bottom",
    "start": "547800",
    "end": "554100"
  },
  {
    "start": "550000",
    "end": "636000"
  },
  {
    "text": "of the build fsx file would look something like this and what we're looking at here is like the first is the",
    "start": "554100",
    "end": "561329"
  },
  {
    "text": "simple one to build the project you need to restore the packages before you do",
    "start": "561329",
    "end": "567060"
  },
  {
    "text": "all that you need to clean so I just established that the first in the file then we have integration tests and they",
    "start": "567060",
    "end": "574680"
  },
  {
    "text": "become a bit more complex because before integration tests are on we need to migrate the database and before we can",
    "start": "574680",
    "end": "581430"
  },
  {
    "text": "migrate the database we need to created the database and then we have we want to",
    "start": "581430",
    "end": "586470"
  },
  {
    "text": "delete the old integration test database if it's there from before and before we",
    "start": "586470",
    "end": "592110"
  },
  {
    "text": "can migrate and run tests we need the migration and the tests projects to have been built so they depend on build again",
    "start": "592110",
    "end": "599160"
  },
  {
    "text": "which again depends on restore packages and clean then we have 3 independent",
    "start": "599160",
    "end": "605399"
  },
  {
    "text": "kind of targets that are all",
    "start": "605399",
    "end": "610850"
  },
  {
    "text": "dependencies of the CI target so if I tell fake to run the CI target it will",
    "start": "610850",
    "end": "616560"
  },
  {
    "text": "see that these are not dependent on each other so they can be run in parallel and",
    "start": "616560",
    "end": "623370"
  },
  {
    "text": "then the last step we have is the artifact step or target which is dependent on the CI again so when",
    "start": "623370",
    "end": "628949"
  },
  {
    "text": "everything has their own unit tests integration does everything we're gonna build an artifact and I'll get back a",
    "start": "628949",
    "end": "634470"
  },
  {
    "text": "bit to to the artifact so when I run fake it looks to my file and as long as",
    "start": "634470",
    "end": "641880"
  },
  {
    "text": "it's valid it builds this dependency graph for me and here you'll see that it will start all the way to the right with",
    "start": "641880",
    "end": "647790"
  },
  {
    "text": "the clean it will work itself up but as you can see here integration test unit",
    "start": "647790",
    "end": "653579"
  },
  {
    "text": "tests and this NuGet packages consolidated step are on the same level",
    "start": "653579",
    "end": "659339"
  },
  {
    "text": "so if you run fake with the parallel command line flag you can get the faster",
    "start": "659339",
    "end": "665670"
  },
  {
    "text": "builds if you are a bit smart with your dependency graphs",
    "start": "665670",
    "end": "671529"
  },
  {
    "text": "so for example this this is a great example of a target that is it's just",
    "start": "672520",
    "end": "678230"
  },
  {
    "text": "pure F sharp dotnet code and you don't need to understand what this screen says",
    "start": "678230",
    "end": "684770"
  },
  {
    "text": "but you have to understand this is this is like the same I would write if I was writing a command-line tool to do this",
    "start": "684770",
    "end": "691279"
  },
  {
    "text": "it basically just parses all the packages this is a dotnet framework target and it just goes to all the",
    "start": "691279",
    "end": "698300"
  },
  {
    "text": "package the config files in your solution and make sure that if you're",
    "start": "698300",
    "end": "703580"
  },
  {
    "text": "using the same library in two different projects they are the same version you",
    "start": "703580",
    "end": "708709"
  },
  {
    "text": "can achieve this by right-clicking on the solution in visual studio choosing manage NuGet packages and then go to the",
    "start": "708709",
    "end": "714140"
  },
  {
    "text": "consolidate tab you can fix that there because that's not something you get enforces for you in dotnet framework so",
    "start": "714140",
    "end": "722990"
  },
  {
    "text": "I was like okay then we're gonna stop this at Build time and we're gonna make a build step and it has nothing to do",
    "start": "722990",
    "end": "729260"
  },
  {
    "text": "with with the.net CLI or msbuild or anything just pure code because of a",
    "start": "729260",
    "end": "734750"
  },
  {
    "text": "build step that we as a team decided this is important for us and in the same",
    "start": "734750",
    "end": "740930"
  },
  {
    "text": "with the create integration test database step it's simply a this is the",
    "start": "740930",
    "end": "746420"
  },
  {
    "start": "745000",
    "end": "754000"
  },
  {
    "text": "whole target and it just calls a function or a static method for c-sharp",
    "start": "746420",
    "end": "751760"
  },
  {
    "text": "people like it's nothing special and that that function again is just normal",
    "start": "751760",
    "end": "757100"
  },
  {
    "text": "dotnet code to yeah create a database if it doesn't exist already so nothing",
    "start": "757100",
    "end": "764330"
  },
  {
    "text": "special here and it's so nice to be able to write these things in dotnet the day I use the the language I use all day",
    "start": "764330",
    "end": "774550"
  },
  {
    "text": "sorry about that so before dotnet core 2.1 you would do",
    "start": "780279",
    "end": "785809"
  },
  {
    "text": "it still do it like this because you would need a CS project file to resolve this dotnet CLI reference that you see",
    "start": "785809",
    "end": "792920"
  },
  {
    "text": "on the bottom here but luckily with fake v we can just cut this whole step and",
    "start": "792920",
    "end": "798829"
  },
  {
    "start": "795000",
    "end": "834000"
  },
  {
    "text": "actually don't have this CMD sh bootstrapping stuff because we don't need core 2.1 we got global tools for",
    "start": "798829",
    "end": "805639"
  },
  {
    "text": "dotnet and now all you have to do is install fake the fake CLI as a global",
    "start": "805639",
    "end": "811100"
  },
  {
    "text": "tool and then you can run with a simple command-line fake run build fsx the.net",
    "start": "811100",
    "end": "818149"
  },
  {
    "text": "global tools are added to your path so this is available there okay so very",
    "start": "818149",
    "end": "824839"
  },
  {
    "text": "easy to get to run the fake script as a developer on your machine you just install the tool fake run build fsx okay",
    "start": "824839",
    "end": "833359"
  },
  {
    "text": "but that's the easy part like now we're thinking how would we hook this up on our on our build server like on team CD",
    "start": "833359",
    "end": "839299"
  },
  {
    "start": "834000",
    "end": "843000"
  },
  {
    "text": "or VST s or whatever well not surprisingly it's as simple as this we",
    "start": "839299",
    "end": "846799"
  },
  {
    "text": "add a command line step and we do the exact same thing and this is important",
    "start": "846799",
    "end": "852290"
  },
  {
    "text": "like now we're getting down to the to the core of why we want build automation",
    "start": "852290",
    "end": "858949"
  },
  {
    "text": "tools like this the same thing that I'm doing to test the build on my machine is",
    "start": "858949",
    "end": "864259"
  },
  {
    "text": "the exact same thing that is happening here on the build server so if I want to",
    "start": "864259",
    "end": "869569"
  },
  {
    "text": "test the change to the build how the build server builds stuff I can just do it on my machine because it's the sack",
    "start": "869569",
    "end": "875389"
  },
  {
    "text": "same thing I don't have to keep checking in thing and have this long feedback loop if I want to do changes to my build",
    "start": "875389",
    "end": "881709"
  },
  {
    "text": "the only thing we have extras is published artifact out step which is like VST s specific in this case so",
    "start": "881709",
    "end": "889369"
  },
  {
    "text": "we're saying like okay we're gonna get artifact out of our build you have to upload it to VST s cause VST s in this",
    "start": "889369",
    "end": "899389"
  },
  {
    "text": "case is like our artifact repository that's what keeps our artifacts and",
    "start": "899389",
    "end": "905899"
  },
  {
    "start": "905000",
    "end": "1019000"
  },
  {
    "text": "artifacts in our cases we we use fake and we also use",
    "start": "905899",
    "end": "911720"
  },
  {
    "text": "a bit longer further along in the pipeline which we're getting to so this is how our artifact looks it has an",
    "start": "911720",
    "end": "919250"
  },
  {
    "text": "infrastructure folder which is basically just copied straight from the repository",
    "start": "919250",
    "end": "924319"
  },
  {
    "text": "and it keeps this assure deployed JSON",
    "start": "924319",
    "end": "929420"
  },
  {
    "text": "which is a assure resource manager template is basically our infrastructure",
    "start": "929420",
    "end": "935060"
  },
  {
    "text": "is code and it doesn't matter if it's a sure or our M templates it could be terraform whatever it's just",
    "start": "935060",
    "end": "942290"
  },
  {
    "text": "this is the infrastructure as code or as data whatever you choose to call it we",
    "start": "942290",
    "end": "948860"
  },
  {
    "text": "have this public key vault secret file I get bit back to that it's not very important now so that's like the",
    "start": "948860",
    "end": "954949"
  },
  {
    "text": "infrastructure and then under that you see we have this provision fsx and the",
    "start": "954949",
    "end": "960829"
  },
  {
    "text": "fsx lock file the log file just holds some information about which versions of your most people who are probably",
    "start": "960829",
    "end": "967100"
  },
  {
    "text": "familiar with log files it's nothing special it's just pins our version of dependencies and stuff and then in the",
    "start": "967100",
    "end": "974180"
  },
  {
    "text": "bottom we have this app is called weather so here we have weather 23 dot",
    "start": "974180",
    "end": "980870"
  },
  {
    "text": "zip so this is kind of what most people would consider the artifact these days because that's the actual app but our",
    "start": "980870",
    "end": "987740"
  },
  {
    "text": "artifact here is not only the app is the infrastructure at the point of time this app was made to actually run it and it's",
    "start": "987740",
    "end": "994579"
  },
  {
    "text": "also a script on how to put that infrastructure out and how to deploy the",
    "start": "994579",
    "end": "1000490"
  },
  {
    "text": "app to that infrastructure because this is all relevant to which which version",
    "start": "1000490",
    "end": "1005709"
  },
  {
    "text": "of this app it is so we're building that all together and the final artifact is everything you need to know to get this",
    "start": "1005709",
    "end": "1012370"
  },
  {
    "text": "up into production or into a running State the RM template is basically what",
    "start": "1012370",
    "end": "1021790"
  },
  {
    "start": "1019000",
    "end": "1079000"
  },
  {
    "text": "you would expect if you've seen it before define some parameters some variables like names of stuff but it",
    "start": "1021790",
    "end": "1029409"
  },
  {
    "text": "kind of bases the names on on the name of the app we make our app service plan",
    "start": "1029409",
    "end": "1035168"
  },
  {
    "text": "which is like the underlying resources we make in this case our website and the",
    "start": "1035169",
    "end": "1041740"
  },
  {
    "text": "important thing to notice here that we give it some settings we give it a connection string",
    "start": "1041740",
    "end": "1047790"
  },
  {
    "text": "but as you can see we don't provide the name or their explicit connection string we just hook it up to another resource",
    "start": "1047790",
    "end": "1054690"
  },
  {
    "text": "in the same file so that when this SQL Server is made it will insert the correct connection string so I don't",
    "start": "1054690",
    "end": "1059880"
  },
  {
    "text": "need to know the connection string beforehand it will be resolved by a shield for me and we are the database we",
    "start": "1059880",
    "end": "1067650"
  },
  {
    "text": "add the identity of our web app to that SQL Server so it has access to the",
    "start": "1067650",
    "end": "1074130"
  },
  {
    "text": "server we add a key vault and here we also do the same we add the identity of our app to that key vault so our app can",
    "start": "1074130",
    "end": "1080460"
  },
  {
    "start": "1079000",
    "end": "1135000"
  },
  {
    "text": "access the key ball and we will end up with this when you run the file which is a resource group with a web app a key",
    "start": "1080460",
    "end": "1087540"
  },
  {
    "text": "vault for secrets a sequel server and that's it I'll get a",
    "start": "1087540",
    "end": "1095070"
  },
  {
    "text": "bit back to the identity of the web app but this is important that we are giving our app its own identity so it doesn't",
    "start": "1095070",
    "end": "1102630"
  },
  {
    "text": "have like a shared connection string or shared username or password that everyone can use to connect to the",
    "start": "1102630",
    "end": "1108660"
  },
  {
    "text": "database it has its own identity in Azure in Active Directory which is uses",
    "start": "1108660",
    "end": "1115320"
  },
  {
    "text": "to talk to SQL and to key volved so we get complete auditing if you want to be",
    "start": "1115320",
    "end": "1121260"
  },
  {
    "text": "that you can't be the app on your developer machine then you have to use your own natural accountant it's very clear that you are the one accessing",
    "start": "1121260",
    "end": "1127200"
  },
  {
    "text": "cable or at sequel server so I'll beat it back to this provision fsx because we",
    "start": "1127200",
    "end": "1133559"
  },
  {
    "text": "have one prerequisite for that and that is that you need the azure CLI installed",
    "start": "1133559",
    "end": "1138690"
  },
  {
    "start": "1135000",
    "end": "1286000"
  },
  {
    "text": "and this is a prerequisite not only for you on your machine if you want to run the script because of course the",
    "start": "1138690",
    "end": "1144390"
  },
  {
    "text": "provision dot fsx script that we have in our artifact it runs the same on your",
    "start": "1144390",
    "end": "1149580"
  },
  {
    "text": "machine as it does from any other tool and this is also important like if I",
    "start": "1149580",
    "end": "1158490"
  },
  {
    "text": "want to put up a new environment to see that the provision script actually works I can do that from my machine no problem",
    "start": "1158490",
    "end": "1164340"
  },
  {
    "text": "all I need to do is log in to a show CLI this is like a new developer on the team this is all they have to do make sure",
    "start": "1164340",
    "end": "1170130"
  },
  {
    "text": "they are on the right subscription an improv is not emphasized where fsx we",
    "start": "1170130",
    "end": "1176250"
  },
  {
    "text": "have some like cold basically just wraps around the Asher CLI and in this case you can say it's",
    "start": "1176250",
    "end": "1184410"
  },
  {
    "text": "maybe a bit overkill to to just why we're not I could just write a",
    "start": "1184410",
    "end": "1190010"
  },
  {
    "text": "PowerShell file or something with this like calling the Asher CLI but what I",
    "start": "1190040",
    "end": "1195990"
  },
  {
    "text": "notice is that this I can hide away in a fake module probably going to do that just contribute it straight into fake so",
    "start": "1195990",
    "end": "1201960"
  },
  {
    "text": "there's a there's a module for calling - for CLI but what I noticed that if I was",
    "start": "1201960",
    "end": "1207540"
  },
  {
    "text": "using PowerShell for that I found it much harder to parse output from actual",
    "start": "1207540",
    "end": "1212940"
  },
  {
    "text": "commands when I do it in FY begins the f5 type provider to read the answer I get which is Jason and use the values if",
    "start": "1212940",
    "end": "1220170"
  },
  {
    "text": "I'm going to keep using them further down in my build script or provision script and also basic things like",
    "start": "1220170",
    "end": "1227040"
  },
  {
    "text": "checking if the parameters passed in is correct and everything is like I can use the same language for validation and all",
    "start": "1227040",
    "end": "1234270"
  },
  {
    "text": "of these things as I do in my daily job writing software for for the company where I'm at so that's kind of important",
    "start": "1234270",
    "end": "1241740"
  },
  {
    "text": "and that's why I think this like wrapping around action CLI was was worth it",
    "start": "1241740",
    "end": "1247430"
  },
  {
    "text": "so a simple step would be something like this I'm sure resource group exists",
    "start": "1248840",
    "end": "1254490"
  },
  {
    "text": "because that's the one thing we need to have before deploying the the RM",
    "start": "1254490",
    "end": "1260580"
  },
  {
    "text": "template so you see it's basically just a command the AC is wrapped in here but",
    "start": "1260580",
    "end": "1266820"
  },
  {
    "text": "it just runs a normal CLI command group create location the name is passed in as",
    "start": "1266820",
    "end": "1272730"
  },
  {
    "text": "a parameter and then I just querying the result that's built into the azure CLI for the provisioning state making sure",
    "start": "1272730",
    "end": "1279390"
  },
  {
    "text": "that succeeded and then I'm just like saying OK and if it didn't succeed I'm just gonna fail it so super simple then",
    "start": "1279390",
    "end": "1287580"
  },
  {
    "start": "1286000",
    "end": "1318000"
  },
  {
    "text": "I'm basically the next step the same thing group deployment parson parameters",
    "start": "1287580",
    "end": "1292710"
  },
  {
    "text": "to find the parameters files I want to use because we have different parameters file depending on what kind of",
    "start": "1292710",
    "end": "1298860"
  },
  {
    "text": "environment you are so you can be a test environment or a production environment we don't operate with the production or",
    "start": "1298860",
    "end": "1307050"
  },
  {
    "text": "D test so you have different parameter sets based on what kind of environment you are and basically it runs to a command group",
    "start": "1307050",
    "end": "1314910"
  },
  {
    "text": "deploy him and create if it succeeds carry on same with the deployment of the",
    "start": "1314910",
    "end": "1321210"
  },
  {
    "start": "1318000",
    "end": "1356000"
  },
  {
    "text": "app it just bit of magic to find the closest zip file this could probably be",
    "start": "1321210",
    "end": "1327000"
  },
  {
    "text": "done a lot better it's just an example that would work both on your machine where maybe the zip file is in a in a",
    "start": "1327000",
    "end": "1333300"
  },
  {
    "text": "build directory while on the build server or the server running the script it might be in the same folder as a",
    "start": "1333300",
    "end": "1340980"
  },
  {
    "text": "script so basically running this deployment with the zip file as a parameter and of course logically they",
    "start": "1340980",
    "end": "1349170"
  },
  {
    "text": "if it gets the start is called for back that's a success it makes a lot of sense I guess it's some enum being answered",
    "start": "1349170",
    "end": "1356160"
  },
  {
    "text": "there so you end up having a provision fsx file that looks something like this",
    "start": "1356160",
    "end": "1361730"
  },
  {
    "text": "you make sure the resource group exists you run the deployment of all that which",
    "start": "1361730",
    "end": "1367050"
  },
  {
    "text": "we saw in the earlier together the web app the SQL server the kewal then we",
    "start": "1367050",
    "end": "1372240"
  },
  {
    "text": "deploy the zip file the web app to the actual web app if the secret file is",
    "start": "1372240",
    "end": "1378060"
  },
  {
    "text": "decrypted I'll get a bit back to that then we can populate the key vault then we do smoke tests which is basically in",
    "start": "1378060",
    "end": "1384960"
  },
  {
    "text": "our cases we just have an endpoint that we call for each app and it's up to each",
    "start": "1384960",
    "end": "1390690"
  },
  {
    "text": "app or each service or whatever itself to determine what it's gonna what",
    "start": "1390690",
    "end": "1396330"
  },
  {
    "text": "determines if it's online and working so we basically just know we're gonna pull the call this endpoint and if we get a",
    "start": "1396330",
    "end": "1403650"
  },
  {
    "text": "200 okay we're gonna take the staging slope that we just deployed to and swap",
    "start": "1403650",
    "end": "1410040"
  },
  {
    "text": "it with the production slot so that's the last thing we do when we see everything is working then we switch",
    "start": "1410040",
    "end": "1416610"
  },
  {
    "text": "production and staging slots I'm not going to get into deployment slots but",
    "start": "1416610",
    "end": "1423330"
  },
  {
    "text": "people who use our web apps know about it and you can check it out yourself if",
    "start": "1423330",
    "end": "1428700"
  },
  {
    "text": "you want to know more and of course again anything that net can do we can do",
    "start": "1428700",
    "end": "1434580"
  },
  {
    "text": "in this script and it's the same tool we're using now to provision and deploy",
    "start": "1434580",
    "end": "1440700"
  },
  {
    "text": "our app as we're building it we're putting this script back in source control so if I check out it over",
    "start": "1440700",
    "end": "1445860"
  },
  {
    "text": "of the code I still have the way I still have the infrastructure and I have how",
    "start": "1445860",
    "end": "1451289"
  },
  {
    "text": "its deployed so I have everything I needed to maybe test that version and so",
    "start": "1451289",
    "end": "1457350"
  },
  {
    "start": "1456000",
    "end": "1561000"
  },
  {
    "text": "how do we hook this up in our release management tool of choice because while I go to to colleagues and friends and I",
    "start": "1457350",
    "end": "1464760"
  },
  {
    "text": "say like I hate dr. post-deploy I hate VSDs like don't use they don't lock",
    "start": "1464760",
    "end": "1470460"
  },
  {
    "text": "yourself in to that of course you should have one of those tools because you need them for their like centralized",
    "start": "1470460",
    "end": "1475950"
  },
  {
    "text": "management of what artifact is deployed where what I'm not a big fan of is",
    "start": "1475950",
    "end": "1481039"
  },
  {
    "text": "putting too much variables too much steps in these tools that's not only for",
    "start": "1481039",
    "end": "1488789"
  },
  {
    "text": "the release tools like the STS octopus deploy but also the same for teamcity and build tools like you should source",
    "start": "1488789",
    "end": "1496350"
  },
  {
    "text": "control everything and these tools are getting the release tools they are getting much better at understanding that this is what we want they're",
    "start": "1496350",
    "end": "1502860"
  },
  {
    "text": "letting you define your steps in the source control and this is this is",
    "start": "1502860",
    "end": "1507870"
  },
  {
    "text": "something you should be doing and I've been in projects where we have like pages upon pages of variables in in",
    "start": "1507870",
    "end": "1515549"
  },
  {
    "text": "octopus deploy and that that's our own fault that is nothing to do with octopus deploy by the way but it's so easy to",
    "start": "1515549",
    "end": "1521399"
  },
  {
    "text": "get there because you kind of forget you start relying on these tools too much so",
    "start": "1521399",
    "end": "1527039"
  },
  {
    "text": "this is an example of VSDs it luckily for us has a Asha Asha CLI step which",
    "start": "1527039",
    "end": "1533820"
  },
  {
    "text": "was the only prerequisite that we had remember so the same goes for the release too as for the developers you",
    "start": "1533820",
    "end": "1542760"
  },
  {
    "text": "need this Asha CLI and then of course the same familiar two lines install the",
    "start": "1542760",
    "end": "1548070"
  },
  {
    "text": "fake tool and just run the script except here it's worth to notice that we're working out of the root of the directory",
    "start": "1548070",
    "end": "1556080"
  },
  {
    "text": "of the artifact so we're like we set the working directory to be correct and it's",
    "start": "1556080",
    "end": "1562740"
  },
  {
    "start": "1561000",
    "end": "1579000"
  },
  {
    "text": "also worth noticing that we pass in some parameters here so here we say this is the test environment and the apt name",
    "start": "1562740",
    "end": "1569429"
  },
  {
    "text": "which will be the name of the resource group and the web app we pass in from",
    "start": "1569429",
    "end": "1575159"
  },
  {
    "text": "the release management tool that means that it's in this case VSDs job to keep track of",
    "start": "1575159",
    "end": "1582929"
  },
  {
    "start": "1579000",
    "end": "1788000"
  },
  {
    "text": "what environments do I have running now and what artifact has been deployed in them and that's the only job it has it",
    "start": "1582929",
    "end": "1588899"
  },
  {
    "text": "doesn't know anything about how to deploy it just knows there's a script that I have to run and if I want to add",
    "start": "1588899",
    "end": "1594090"
  },
  {
    "text": "a new environment now I just click that button give it a name and click deploy and that name will be it would be that",
    "start": "1594090",
    "end": "1600690"
  },
  {
    "text": "name dot a few websites dotnet and it would run the script it will see that there's nothing there it will provision",
    "start": "1600690",
    "end": "1607259"
  },
  {
    "text": "everything deploy the app and I have an environment up and running and they",
    "start": "1607259",
    "end": "1614669"
  },
  {
    "text": "since it's so easy is easy to hook up like if people do pull requests into the repo you can basically just put some",
    "start": "1614669",
    "end": "1622440"
  },
  {
    "text": "tools to run the provision with that the provision script with like the name of",
    "start": "1622440",
    "end": "1628409"
  },
  {
    "text": "that pull requests or something and you can have an environment up and running with the changes in that pull request to",
    "start": "1628409",
    "end": "1634169"
  },
  {
    "text": "review it just delete it after like if you make provisioning and deploying this",
    "start": "1634169",
    "end": "1639539"
  },
  {
    "text": "easy it's very easy to to put up new environments to test changes in the code so here you can finally get some some",
    "start": "1639539",
    "end": "1651690"
  },
  {
    "text": "some of the benefits that you get for free with containers and that kind of stuff with the platform as a service too",
    "start": "1651690",
    "end": "1659960"
  },
  {
    "text": "so this is this is important because this makes you able to stop thinking",
    "start": "1659960",
    "end": "1665159"
  },
  {
    "text": "about environments because in a lot of",
    "start": "1665159",
    "end": "1670200"
  },
  {
    "text": "projects people are of course looking at environments as like a whole thing this is the production environment this is",
    "start": "1670200",
    "end": "1675779"
  },
  {
    "text": "the QA environment this is the test environment but you shouldn't look at it like that you should look at this is the",
    "start": "1675779",
    "end": "1681179"
  },
  {
    "text": "entry point that my testers know about this is the DNS to address everything",
    "start": "1681179",
    "end": "1687119"
  },
  {
    "text": "else forget about it we just if we put up a new environment we just change the",
    "start": "1687119",
    "end": "1692190"
  },
  {
    "text": "DNS don't don't be afraid to have environments that you can delete the only thing that is important is your",
    "start": "1692190",
    "end": "1697200"
  },
  {
    "text": "data not the environment or the resources other than that so just find a way to to take care of that and then",
    "start": "1697200",
    "end": "1704519"
  },
  {
    "text": "stop thinking of it of environments as something holy",
    "start": "1704519",
    "end": "1710479"
  },
  {
    "text": "so basically if you are a new developer on the team you come in you set up your",
    "start": "1711690",
    "end": "1717340"
  },
  {
    "text": "ass you CLI install the fake CLI dotnet global tool you run build fsx you'll end",
    "start": "1717340",
    "end": "1725440"
  },
  {
    "text": "up with the artifact on your machine and then you can just run provision fsx with some kind of like your username -",
    "start": "1725440",
    "end": "1732820"
  },
  {
    "text": "company name or whatever just to get an environment up and running that you can test and do stuff on and this of course",
    "start": "1732820",
    "end": "1741310"
  },
  {
    "text": "as we saw it's the exact same thing that the build server and the deployment tool runs the only extra responsibility we",
    "start": "1741310",
    "end": "1748330"
  },
  {
    "text": "put on the build server is keeping track of which of build numbers it's just a centralized way of making sure that when",
    "start": "1748330",
    "end": "1754810"
  },
  {
    "text": "we talk about one build number we are all talking about the same artifact and the second thing is responsible for in",
    "start": "1754810",
    "end": "1761260"
  },
  {
    "text": "our case is the artifact store is the one who keeps these artifacts you don't have to use that you can use my get or",
    "start": "1761260",
    "end": "1768690"
  },
  {
    "text": "FTP FTPS server for all I care don't do that but that's just the things that we",
    "start": "1768690",
    "end": "1776110"
  },
  {
    "text": "want centralized and then our release tool of course the only thing it keeps track of each with which environment",
    "start": "1776110",
    "end": "1782950"
  },
  {
    "text": "exists and what artifacts are deployed there so what happens to the zip file",
    "start": "1782950",
    "end": "1790780"
  },
  {
    "start": "1788000",
    "end": "1812000"
  },
  {
    "text": "we're running this command this is basically the command we're running inside provision F is X so we have a zip",
    "start": "1790780",
    "end": "1796990"
  },
  {
    "text": "file and it is going somewhere and where it goes is kudou which is the like",
    "start": "1796990",
    "end": "1805560"
  },
  {
    "text": "engine behind the deployments and everything for web apps you can access",
    "start": "1805560",
    "end": "1813370"
  },
  {
    "start": "1812000",
    "end": "1830000"
  },
  {
    "text": "it by going to advanced tools all the way in the bottom here on the left side inside your web app and clicking on this",
    "start": "1813370",
    "end": "1819280"
  },
  {
    "text": "gold button there or you can just add a dot SCM thought Asha website store net your address and I know everyone who's",
    "start": "1819280",
    "end": "1827080"
  },
  {
    "text": "ever worked with Web Apps has been into this site I'll just show it simply it",
    "start": "1827080",
    "end": "1834850"
  },
  {
    "start": "1830000",
    "end": "1913000"
  },
  {
    "text": "gives us information about our environment and gives us api's to look into our environment it gives us a",
    "start": "1834850",
    "end": "1842250"
  },
  {
    "text": "debugging console which is in the or PowerShell but I think they",
    "start": "1842250",
    "end": "1848019"
  },
  {
    "text": "are also they have bash if you are using a Linux or container version and here",
    "start": "1848019",
    "end": "1855309"
  },
  {
    "text": "you can browse your files you can look into them if you don't have any log aggregation yet or there is error in",
    "start": "1855309",
    "end": "1862019"
  },
  {
    "text": "that's not there you can go there and have a look right commands and you can",
    "start": "1862019",
    "end": "1867190"
  },
  {
    "text": "go in you can check all the environment variables what is in your path make sure that everything is right you can go in",
    "start": "1867190",
    "end": "1873789"
  },
  {
    "text": "and check the status of your deploy and the output of your deploy so you can see",
    "start": "1873789",
    "end": "1879399"
  },
  {
    "text": "the actual things that were run during your deploy so if your deployment fails",
    "start": "1879399",
    "end": "1892690"
  },
  {
    "text": "this is the easy way to just go in and see what actually flay failed and you of course you have the rest api is to with",
    "start": "1892690",
    "end": "1898029"
  },
  {
    "text": "a like Jason plug-in for your browser super easy to browse through and see all the deployments and you can of course",
    "start": "1898029",
    "end": "1905440"
  },
  {
    "text": "also integrate against this if you want to pull this and output it somewhere else in some kind of screen or inside",
    "start": "1905440",
    "end": "1911619"
  },
  {
    "text": "some some kind of tool because it's just not web interface",
    "start": "1911619",
    "end": "1917169"
  },
  {
    "start": "1913000",
    "end": "1996000"
  },
  {
    "text": "guru is as it says here is the engine behind deployments and web jobs and the",
    "start": "1917169",
    "end": "1924159"
  },
  {
    "text": "cool thing about Kudo is is open source it can run on your own machine I actually had it up running on my own",
    "start": "1924159",
    "end": "1931059"
  },
  {
    "text": "machine and to test stuff because it was a much faster feedback cycle I was just",
    "start": "1931059",
    "end": "1937149"
  },
  {
    "text": "getting to know guru it lets you deploy in different ways not just get HD",
    "start": "1937149",
    "end": "1945279"
  },
  {
    "text": "deployments but it also lets you deploy via FTP you have that all the good old lemmas web deploy which it lets you do",
    "start": "1945279",
    "end": "1951969"
  },
  {
    "text": "and you can of course connect directly to github or bitbucket in this kind of",
    "start": "1951969",
    "end": "1957159"
  },
  {
    "text": "places and pull changes from there and",
    "start": "1957159",
    "end": "1962399"
  },
  {
    "text": "you can either deploy like a zip file with files ready to deploy you just say",
    "start": "1962399",
    "end": "1968259"
  },
  {
    "text": "copy this into the folder and serve it or it can discover if you publish if you",
    "start": "1968259",
    "end": "1975369"
  },
  {
    "text": "have a dotnet up in a github directory and you've connected with guru to your web app then it will discover this is a dotnet app and you",
    "start": "1975369",
    "end": "1983139"
  },
  {
    "text": "will have script ready for building it and copying the correct output files",
    "start": "1983139",
    "end": "1988210"
  },
  {
    "text": "into the web app and of course it also lets you run custom deploy scripts it",
    "start": "1988210",
    "end": "1997059"
  },
  {
    "start": "1996000",
    "end": "2037000"
  },
  {
    "text": "uses the tool called kudos Inc which basically takes files from a staging area files that has been staged and",
    "start": "1997059",
    "end": "2003450"
  },
  {
    "text": "copies it into the production folder and it's just a kind of dipping tool that",
    "start": "2003450",
    "end": "2009179"
  },
  {
    "text": "makes sure that all the all files are clean up and new files replace old files",
    "start": "2009179",
    "end": "2014659"
  },
  {
    "text": "the only thing we're noticing is that a you use this tool if you write a custom",
    "start": "2014659",
    "end": "2020220"
  },
  {
    "text": "deponents kid but it works on your machine it's just it's on NPM and it's",
    "start": "2020220",
    "end": "2025230"
  },
  {
    "text": "an it works just the same in your machine as it does inside of Kulu so I",
    "start": "2025230",
    "end": "2033899"
  },
  {
    "text": "guess you see where we're going with this we have a tool that can run on our",
    "start": "2033899",
    "end": "2038909"
  },
  {
    "start": "2037000",
    "end": "2052000"
  },
  {
    "text": "machine we have a custom build script feature where you can add a dot",
    "start": "2038909",
    "end": "2045419"
  },
  {
    "text": "deployment file in the root of whatever you're deploying and you can call whatever you want I guess you didn't see",
    "start": "2045419",
    "end": "2054720"
  },
  {
    "start": "2052000",
    "end": "2083000"
  },
  {
    "text": "that coming but it's the same two lines that we've been using for build and provisioning but now we're going to use",
    "start": "2054720",
    "end": "2061169"
  },
  {
    "text": "it for deploy the only difference here is that they don't put the global tools",
    "start": "2061169",
    "end": "2066480"
  },
  {
    "text": "in your path because of security stuff but they always put it in the same place so that's why we have the folder",
    "start": "2066480",
    "end": "2071908"
  },
  {
    "text": "underneath there it's always going to end up there never anywhere else so yeah",
    "start": "2071909",
    "end": "2077970"
  },
  {
    "text": "cool now we're going to write our deploy script but why would we want to do that well the big win about running the",
    "start": "2077970",
    "end": "2085919"
  },
  {
    "start": "2083000",
    "end": "2121000"
  },
  {
    "text": "script inside of kuru is that we're actually running it inside of this CUDA sandbox we're running it in the same",
    "start": "2085919",
    "end": "2092069"
  },
  {
    "text": "place but our app is running inside the same sandbox and that means that we will",
    "start": "2092069",
    "end": "2100109"
  },
  {
    "text": "have the same configuration we will have access to the same environment variables the same connection strings and the same",
    "start": "2100109",
    "end": "2107400"
  },
  {
    "text": "identity which means that inside this script we have all the things available available to us we can",
    "start": "2107400",
    "end": "2113890"
  },
  {
    "text": "act us the app with all the accesses that the app has and we have things like",
    "start": "2113890",
    "end": "2120220"
  },
  {
    "text": "the connection string that's when it starts getting interesting because then I don't have to need to have my",
    "start": "2120220",
    "end": "2126630"
  },
  {
    "start": "2121000",
    "end": "2146000"
  },
  {
    "text": "connection string in my deployment tool as a variable inside of es TS or octopus",
    "start": "2126630",
    "end": "2133390"
  },
  {
    "text": "deploy or whatever tool you use because the app has the connection string so if I need to use that to migrate my SQL",
    "start": "2133390",
    "end": "2140230"
  },
  {
    "text": "database the Scriptures needs to know that it has the name of the connection",
    "start": "2140230",
    "end": "2146140"
  },
  {
    "start": "2146000",
    "end": "2234000"
  },
  {
    "text": "string so basically you can get a step like this where our migration tool is",
    "start": "2146140",
    "end": "2153430"
  },
  {
    "text": "just our console application that takes the connection string and token I'm",
    "start": "2153430",
    "end": "2158530"
  },
  {
    "text": "using some which I'll get back to built in our rational libraries to get access",
    "start": "2158530",
    "end": "2164650"
  },
  {
    "text": "token as the identity of the web app and I'm using that talking to get with that",
    "start": "2164650",
    "end": "2169780"
  },
  {
    "text": "connection string to migrate the database and I'm since I'm doing this inside of guru the guru sandbox I have",
    "start": "2169780",
    "end": "2177460"
  },
  {
    "text": "all these things available to me I can migrate the database without having to provide variable set with all the",
    "start": "2177460",
    "end": "2183609"
  },
  {
    "text": "different environments I have what is the connection string for that what is the connection string for that and I",
    "start": "2183609",
    "end": "2189339"
  },
  {
    "text": "don't need to administer that at all it's up to each environment to know",
    "start": "2189339",
    "end": "2194369"
  },
  {
    "text": "where their database it we can talk here about security aspect of this which is",
    "start": "2194369",
    "end": "2201790"
  },
  {
    "text": "totally solvable if you feel like it because to migrate the database you need to be able to create tables for example",
    "start": "2201790",
    "end": "2208510"
  },
  {
    "text": "maybe you don't want that user of your app to be able to create tables so you",
    "start": "2208510",
    "end": "2215260"
  },
  {
    "text": "can you can go around this by giving your app two identities one for migrations and one that is yeah so",
    "start": "2215260",
    "end": "2222609"
  },
  {
    "text": "solvable but I'm not going to cover that here important thing is here that we",
    "start": "2222609",
    "end": "2227829"
  },
  {
    "text": "just removed all the knowledge about doing this kind of deployment things from our deployment tool but it's",
    "start": "2227829",
    "end": "2235569"
  },
  {
    "start": "2234000",
    "end": "2344000"
  },
  {
    "text": "important to know that the last thing we did is the last thing we did is swap the",
    "start": "2235569",
    "end": "2244299"
  },
  {
    "text": "staging spot for the devil a lot earlier so if we're doing this and",
    "start": "2244299",
    "end": "2251620"
  },
  {
    "text": "this is the case not only with fake but of course with any deployment to that you might migrate to database and then the actual deploy fails and you never",
    "start": "2251620",
    "end": "2258910"
  },
  {
    "text": "put the code into production but the migration has been run well there's a simple answer for that and a lot of",
    "start": "2258910",
    "end": "2264310"
  },
  {
    "text": "people are wondering how to solve that problem all right or talking about it it's just always be backwards compatible the easiest example",
    "start": "2264310",
    "end": "2270490"
  },
  {
    "text": "of that is if you want to remove a column in your database or in the table",
    "start": "2270490",
    "end": "2276480"
  },
  {
    "text": "then you don't deploy the migration that removes the column and the code that",
    "start": "2276480",
    "end": "2281500"
  },
  {
    "text": "stopped the code that stops using it in the same deploy first you deploy the",
    "start": "2281500",
    "end": "2288400"
  },
  {
    "text": "code that stops using the column and when that's where can find in production then you do another deployment where you",
    "start": "2288400",
    "end": "2294490"
  },
  {
    "text": "delete the column so three steps because then if the removal of the column",
    "start": "2294490",
    "end": "2301230"
  },
  {
    "text": "happens but the deployment fails you still did a deployment before that stopped using that column puts a lot of",
    "start": "2301230",
    "end": "2308620"
  },
  {
    "text": "pressure on on a developer a development team going fast but if you're using SQL",
    "start": "2308620",
    "end": "2314470"
  },
  {
    "text": "migrations because you're using a relational database that's that's how you have to do it to be able to deliver",
    "start": "2314470",
    "end": "2320830"
  },
  {
    "text": "continuously and don't but don't break stuff and it basically the same thing",
    "start": "2320830",
    "end": "2327820"
  },
  {
    "text": "applies to Cosmo DB and document database is like you have to be compatible with the if you're changing",
    "start": "2327820",
    "end": "2334210"
  },
  {
    "text": "the schema and stuff like that your your app has to be backwards compatible to to support that of course it might be",
    "start": "2334210",
    "end": "2340540"
  },
  {
    "text": "obvious I just thought that I'd mention it so I wanted to go like a be back and",
    "start": "2340540",
    "end": "2346900"
  },
  {
    "start": "2344000",
    "end": "2433000"
  },
  {
    "text": "because I'm talking about identity here and why you should give your application",
    "start": "2346900",
    "end": "2352930"
  },
  {
    "text": "one because you should and it's all about because we're talking about our web apps here and and actually has great",
    "start": "2352930",
    "end": "2361510"
  },
  {
    "text": "support for role based access control built in into Azure and it has the",
    "start": "2361510",
    "end": "2369040"
  },
  {
    "text": "ability to give to make up registrations or service principles and all this stuff",
    "start": "2369040",
    "end": "2374650"
  },
  {
    "text": "well you can give your app or your resource and assure its own either",
    "start": "2374650",
    "end": "2379710"
  },
  {
    "text": "that's because you don't want to have an SQL database with a username and a",
    "start": "2379710",
    "end": "2385320"
  },
  {
    "text": "password that everyone is sharing around and you want to know who is accessing that database and you want to be able to",
    "start": "2385320",
    "end": "2391200"
  },
  {
    "text": "give them certain credentials or permissions in that database and we're",
    "start": "2391200",
    "end": "2396840"
  },
  {
    "text": "doing that for like our developers on our team we all have like different accounts to log into VSDs whatever and",
    "start": "2396840",
    "end": "2402890"
  },
  {
    "text": "we should also if I'm working on an app that uses key vault or SQL Server on my",
    "start": "2402890",
    "end": "2408000"
  },
  {
    "text": "machine then I should use my astro account and have permissions set to my account on those resources asses it so",
    "start": "2408000",
    "end": "2415830"
  },
  {
    "text": "that the accesses are correct and so that all the thing is correct especially",
    "start": "2415830",
    "end": "2420840"
  },
  {
    "text": "now with gdpr and everything in case there is personal data in these those",
    "start": "2420840",
    "end": "2426780"
  },
  {
    "text": "resources is it easy to give up an identity one time I was in we started it",
    "start": "2426780",
    "end": "2434430"
  },
  {
    "text": "very easy way we made our own certificates private public key we made our own service principles in usher",
    "start": "2434430",
    "end": "2441710"
  },
  {
    "text": "uploaded the public key there gave the uploaded the how we did it is not",
    "start": "2441710",
    "end": "2447600"
  },
  {
    "text": "important provisioning the private key to the app so it had the private key and coat of the authenticate itself as that",
    "start": "2447600",
    "end": "2455520"
  },
  {
    "text": "service principle but that's like the total unmanaged way to do it then you",
    "start": "2455520",
    "end": "2460650"
  },
  {
    "start": "2460000",
    "end": "2483000"
  },
  {
    "text": "can also go a step further you can be partly managed where it's where you can have key vault create or when you run",
    "start": "2460650",
    "end": "2467130"
  },
  {
    "text": "the command create the service principle you can tell it to here's the key vault",
    "start": "2467130",
    "end": "2472590"
  },
  {
    "text": "create a certificate for me and put it in key volt so then you have a partly manage the identity of your application",
    "start": "2472590",
    "end": "2479280"
  },
  {
    "text": "but you still have to run that command to create that service principle well",
    "start": "2479280",
    "end": "2484370"
  },
  {
    "start": "2483000",
    "end": "2527000"
  },
  {
    "text": "now this is the new thing which is in I think it's still in preview but I think",
    "start": "2484370",
    "end": "2489750"
  },
  {
    "text": "it's gonna be out soon and this is what you're gonna start using if you're using using Azure managed service identity is",
    "start": "2489750",
    "end": "2499230"
  },
  {
    "text": "a fully managed way to get an identity for your application but not just web",
    "start": "2499230",
    "end": "2504630"
  },
  {
    "text": "apps but also SQL servers and other resources in Nasher can get their own identity and it's fully managed you",
    "start": "2504630",
    "end": "2512010"
  },
  {
    "text": "don't have to create any thing any service principle you don't have to create any certificates its",
    "start": "2512010",
    "end": "2517680"
  },
  {
    "text": "renew any certificate is all done and handled by a sure you don't have to",
    "start": "2517680",
    "end": "2524220"
  },
  {
    "text": "think about it at all fully managed all I do in my RM template is just say on my",
    "start": "2524220",
    "end": "2531540"
  },
  {
    "start": "2527000",
    "end": "2538000"
  },
  {
    "text": "web app that hey I want an identity and I want it to be system assigns the",
    "start": "2531540",
    "end": "2537990"
  },
  {
    "text": "output would then be this so I get the tenant ID which will and we're not doing",
    "start": "2537990",
    "end": "2545910"
  },
  {
    "start": "2538000",
    "end": "2590000"
  },
  {
    "text": "too much multi-tenant stuff so it's it's usually the same as a web app and everything else but we get this",
    "start": "2545910",
    "end": "2550980"
  },
  {
    "text": "principle ID which is kind of the user name of the app so when I create this",
    "start": "2550980",
    "end": "2556109"
  },
  {
    "text": "web app I get this as an output and then further on in my RM templates I can",
    "start": "2556109",
    "end": "2562740"
  },
  {
    "text": "basically say hey make a access policy for this key bolt and put the identity",
    "start": "2562740",
    "end": "2568980"
  },
  {
    "text": "of this web app inside of that access policies so in this keyboard then is",
    "start": "2568980",
    "end": "2574589"
  },
  {
    "text": "made my web app will already have access to read from it and I haven't done",
    "start": "2574589",
    "end": "2580380"
  },
  {
    "text": "anything about users or identities here other than tell it to referencing the",
    "start": "2580380",
    "end": "2588540"
  },
  {
    "text": "web app that it's made further up and then if I go inside my key ball I will see that I have this in this case the",
    "start": "2588540",
    "end": "2598470"
  },
  {
    "start": "2590000",
    "end": "2652000"
  },
  {
    "text": "applications name is weather in hardstyle because who doesn't wander about that so that's I can see that's",
    "start": "2598470",
    "end": "2604079"
  },
  {
    "text": "been added for me and I don't have to to hook up my web app to the key vault",
    "start": "2604079",
    "end": "2609299"
  },
  {
    "text": "anyway in any way and here is example of using this a shoe services Apple",
    "start": "2609299",
    "end": "2615599"
  },
  {
    "text": "indication library together with the keyboard library so this is like inside of this Red Square here this is all I do",
    "start": "2615599",
    "end": "2621720"
  },
  {
    "text": "to get an access token and that's because the MSI what it does it puts up",
    "start": "2621720",
    "end": "2628349"
  },
  {
    "text": "like a a localhost endpoint inside the web app today the web app has access to",
    "start": "2628349",
    "end": "2634290"
  },
  {
    "text": "which is kind of like a token endpoint like all wealth style and it just calls",
    "start": "2634290",
    "end": "2639569"
  },
  {
    "text": "this endpoint with some client ID and stuff that gets from variables environment variables and it",
    "start": "2639569",
    "end": "2646809"
  },
  {
    "text": "gets the Nexus talking back so this is how it don't any kids then you're asking will this work on the development",
    "start": "2646809",
    "end": "2653019"
  },
  {
    "start": "2652000",
    "end": "2690000"
  },
  {
    "text": "machine because I'm all about this whole talk I've been about I want things to work on my machine the same as it does",
    "start": "2653019",
    "end": "2658150"
  },
  {
    "text": "in the cloud or on a build server and stuff and yes it will this library first goes to this managed service endpoint",
    "start": "2658150",
    "end": "2665829"
  },
  {
    "text": "and if it doesn't find access token there does it doesn't manage to to find that endpoint it get tries to get it",
    "start": "2665829",
    "end": "2671469"
  },
  {
    "text": "from visual studio and then finally from the azure CLI so if you are logged in which is anyway that prerequisite for",
    "start": "2671469",
    "end": "2677859"
  },
  {
    "text": "all our developers and all our tools then you would get a token there so you could run this up basically as long as",
    "start": "2677859",
    "end": "2684039"
  },
  {
    "text": "you're logged into - woo CLI and be authenticated and call the key vault so",
    "start": "2684039",
    "end": "2691180"
  },
  {
    "start": "2690000",
    "end": "2717000"
  },
  {
    "text": "how do we populate the key world with secrets that are not generating in a tree we get a lot of like maybe we get",
    "start": "2691180",
    "end": "2697539"
  },
  {
    "text": "certificates or we get secrets from other teams or whatever it happens what",
    "start": "2697539",
    "end": "2704170"
  },
  {
    "text": "we've started doing is also source controlling this for the same reasons that we source control our build steps",
    "start": "2704170",
    "end": "2712749"
  },
  {
    "text": "are provisioning steps and our deployment steps we are also putting our secrets you can do that you can have a",
    "start": "2712749",
    "end": "2719650"
  },
  {
    "start": "2717000",
    "end": "2744000"
  },
  {
    "text": "script that does it which we do on some apps we don't have too many secrets like",
    "start": "2719650",
    "end": "2724900"
  },
  {
    "text": "this we try to have an everything inside of a sphere that talks to each other and managed by usher so this is just",
    "start": "2724900",
    "end": "2731799"
  },
  {
    "text": "third-party services will maybe have it like this where I just insert it into the key vault and then update the",
    "start": "2731799",
    "end": "2738359"
  },
  {
    "text": "corresponding web app with up setting pointing at that key vault URL or I wish",
    "start": "2738359",
    "end": "2745690"
  },
  {
    "start": "2744000",
    "end": "2773000"
  },
  {
    "text": "I could have a nested template doing this I could have it in the main template but nested templates in RM",
    "start": "2745690",
    "end": "2751989"
  },
  {
    "text": "templates is sorry to say and this",
    "start": "2751989",
    "end": "2757029"
  },
  {
    "text": "would just work with terraform but basically - unless the templates in RM",
    "start": "2757029",
    "end": "2762190"
  },
  {
    "text": "you need to have them publicly available on the internet you can't like ship them up and do a deployment with them in the",
    "start": "2762190",
    "end": "2768279"
  },
  {
    "text": "same folder or something your main temple it has to reference it with like a public URL so yeah keep your secret",
    "start": "2768279",
    "end": "2775420"
  },
  {
    "start": "2773000",
    "end": "2801000"
  },
  {
    "text": "source trol I'm provision them like everything else in the keyboard because the secrets",
    "start": "2775420",
    "end": "2780570"
  },
  {
    "text": "change and you want to have them together with the app the secrets that were belonging to the app at this exact",
    "start": "2780570",
    "end": "2787140"
  },
  {
    "text": "time same as with provisioning and everything but of course the big question and what everything everyone's",
    "start": "2787140",
    "end": "2793950"
  },
  {
    "text": "wanted now you don't want to put secrets in get open for everyone to read of course not and I'm not saying that",
    "start": "2793950",
    "end": "2800130"
  },
  {
    "text": "either this is not an endorsement of get secret but get secret it's very easy to",
    "start": "2800130",
    "end": "2805350"
  },
  {
    "start": "2801000",
    "end": "2899000"
  },
  {
    "text": "use where you basically you have a GPG key which is not easy to use but that's",
    "start": "2805350",
    "end": "2813120"
  },
  {
    "text": "another story still waiting for the next evolution of of being able to identify",
    "start": "2813120",
    "end": "2819180"
  },
  {
    "text": "myself securely on the internet but basically get secret there are two other tools like this you have gold pass and",
    "start": "2819180",
    "end": "2828230"
  },
  {
    "text": "and just pass the UNIX password manager a lot of tools like this that you can",
    "start": "2828230",
    "end": "2834240"
  },
  {
    "text": "use for sharing secrets among your team but also for populating for example a",
    "start": "2834240",
    "end": "2840420"
  },
  {
    "text": "keyboard basically here I'm I'm adding file as a secret I'm telling myself in",
    "start": "2840420",
    "end": "2847890"
  },
  {
    "text": "this example or someone else I have the public key of in my keychain I then run",
    "start": "2847890",
    "end": "2854760"
  },
  {
    "text": "this hide command which makes this dot secret file of that file I wanted to to",
    "start": "2854760",
    "end": "2861090"
  },
  {
    "text": "hide and I make sure to add the real file in to get ignore so that means I",
    "start": "2861090",
    "end": "2866760"
  },
  {
    "text": "can when a new developer comes on the team I can basically just run this kid secret tell after I got in there and",
    "start": "2866760",
    "end": "2871980"
  },
  {
    "text": "their public key and then run the hide command again and then they are they can decrypt the key as long as they have the",
    "start": "2871980",
    "end": "2879780"
  },
  {
    "text": "private key belongs about the public key I got from it which I hope they do so of",
    "start": "2879780",
    "end": "2885570"
  },
  {
    "text": "course this puts some more demands to knowledge about like keys and and crypto",
    "start": "2885570",
    "end": "2892800"
  },
  {
    "text": "on developers on your team but they should know this stuff anyway so that's no problem so basically a new developer",
    "start": "2892800",
    "end": "2901560"
  },
  {
    "start": "2899000",
    "end": "2953000"
  },
  {
    "text": "comes on the team you can just run get secret reveal and it will reveal the secret files as long as they have",
    "start": "2901560",
    "end": "2908880"
  },
  {
    "text": "access to that and when somebody leaves the team you run this kill person command and",
    "start": "2908880",
    "end": "2914599"
  },
  {
    "text": "it's a nice command and then they are basically removed and you encrypt the",
    "start": "2914599",
    "end": "2920579"
  },
  {
    "text": "files again and they can't access any files from that day onward because you",
    "start": "2920579",
    "end": "2926069"
  },
  {
    "text": "don't want to approve somehow remove them back in time because they can",
    "start": "2926069",
    "end": "2931529"
  },
  {
    "text": "anyway I've written down the secret it doesn't matter you just want to make sure that from now on they don't get any access so that's an example of how to do",
    "start": "2931529",
    "end": "2939390"
  },
  {
    "text": "it and I think it's really worth looking into this you don't want to have you",
    "start": "2939390",
    "end": "2945390"
  },
  {
    "text": "want your secrets to get all the benefits of git which is that it's distributed and that is version controlled yadda yadda so basically this",
    "start": "2945390",
    "end": "2955410"
  },
  {
    "start": "2953000",
    "end": "3034000"
  },
  {
    "text": "is where we arrived three simple scripts that can all be put in source control",
    "start": "2955410",
    "end": "2961920"
  },
  {
    "text": "all using the same tools the same language the same libraries we ran build",
    "start": "2961920",
    "end": "2967589"
  },
  {
    "text": "fsx for the artifact provision to get our infrastructure and actually putting our",
    "start": "2967589",
    "end": "2973259"
  },
  {
    "text": "app up in the cloud and we run deploy fsx for actually doing things that we",
    "start": "2973259",
    "end": "2980819"
  },
  {
    "text": "want to do in the context of the application as migrating the database may be getting a secret from key vault",
    "start": "2980819",
    "end": "2988829"
  },
  {
    "text": "to use for something up to you and all",
    "start": "2988829",
    "end": "2994440"
  },
  {
    "text": "of these scripts are runnable from the developers machine all he has to do is",
    "start": "2994440",
    "end": "2999450"
  },
  {
    "text": "log into the asheville CLI and he can run all the script including deploy fsx he can use that to migrate his own",
    "start": "2999450",
    "end": "3005690"
  },
  {
    "text": "database on its own machine to see that it's actually working he can see that the files staged by this kudu sync",
    "start": "3005690",
    "end": "3011719"
  },
  {
    "text": "application and ends up in the final folder are the correct files so everything that kudu does during the",
    "start": "3011719",
    "end": "3018920"
  },
  {
    "text": "deploy inside of deploy fsx the developer who makes a change to that or it's testing something new can run on",
    "start": "3018920",
    "end": "3025160"
  },
  {
    "text": "his machine and see that it actually works none of these scripts will give you an error if you run them on your machine so",
    "start": "3025160",
    "end": "3035029"
  },
  {
    "start": "3034000",
    "end": "3154000"
  },
  {
    "text": "the same as before showing like a new developer on the team you can run deploy",
    "start": "3035029",
    "end": "3041450"
  },
  {
    "text": "have sex he wants to on his machine but it's of course inside the zip file that we're pushing up to Asher and it's getting run",
    "start": "3041450",
    "end": "3048260"
  },
  {
    "text": "there and these files doesn't have to be",
    "start": "3048260",
    "end": "3054710"
  },
  {
    "text": "a short specific eater like you can just say that this is how we how we want to",
    "start": "3054710",
    "end": "3060680"
  },
  {
    "text": "do it in our team no matter if you're using I don't know containers or if you're deploying to we're doing the same thing",
    "start": "3060680",
    "end": "3068000"
  },
  {
    "text": "to virtual machines too and that's actually important to know that then this managed service identity is also",
    "start": "3068000",
    "end": "3075080"
  },
  {
    "text": "available for usher VMs so you can get our identity for inside of your VM that",
    "start": "3075080",
    "end": "3080570"
  },
  {
    "text": "your apps running that you can use but we do the same thing is just that inside of the deploy fsx script it's not these",
    "start": "3080570",
    "end": "3087410"
  },
  {
    "text": "CUDA syncing stuff it's just inside there we actually just do we take our IIAs page and just put a point it at",
    "start": "3087410",
    "end": "3096080"
  },
  {
    "text": "another folder so that's how we do the same same procedure but to a VM it's",
    "start": "3096080",
    "end": "3101930"
  },
  {
    "text": "just that inside of deploy fsx it's vm specific like setup of is not setup of",
    "start": "3101930",
    "end": "3108020"
  },
  {
    "text": "iOS bindings and stuff that doesn't belong in deploy of sex that belongs in your provisioning script so just think",
    "start": "3108020",
    "end": "3116450"
  },
  {
    "text": "of also disaster recovery and how easy all this thing is as long as you have your data disaster recovery is is almost",
    "start": "3116450",
    "end": "3122270"
  },
  {
    "text": "covered by this it's very easy to to practice at least you don't have to you have everything ready so you can check",
    "start": "3122270",
    "end": "3131570"
  },
  {
    "text": "out the fake at fake top-billed there's",
    "start": "3131570",
    "end": "3136760"
  },
  {
    "text": "also a link here nikolai at weather in hardstyle which is an example repo",
    "start": "3136760",
    "end": "3143690"
  },
  {
    "text": "showing almost all of these stuff I",
    "start": "3143690",
    "end": "3147490"
  },
  {
    "text": "wanted it to show I see",
    "start": "3149290",
    "end": "3153280"
  },
  {
    "text": "which basically is a secret entire secret it is it's not a secret anymore I",
    "start": "3155480",
    "end": "3163400"
  },
  {
    "text": "live it's a example app showing these things that I showed you today almost all of",
    "start": "3163400",
    "end": "3171410"
  },
  {
    "text": "them it doesn't have the migration stuff since that was net framework specific and I haven't moved it here for for",
    "start": "3171410",
    "end": "3176869"
  },
  {
    "text": "people to see and of course you you're not getting any secrets because they are",
    "start": "3176869",
    "end": "3183400"
  },
  {
    "text": "encrypted here it's just a simple page",
    "start": "3183400",
    "end": "3190520"
  },
  {
    "text": "showing the weather in in hosta from different sources it's kind of cool project check it out",
    "start": "3190520",
    "end": "3196369"
  },
  {
    "text": "uses f-sharp type providers on botnet core to to integrate to two different services and stuff so that's if you want",
    "start": "3196369",
    "end": "3204200"
  },
  {
    "text": "to check it out and that's it thank you for listening",
    "start": "3204200",
    "end": "3209690"
  },
  {
    "text": "[Applause]",
    "start": "3209690",
    "end": "3218280"
  }
]