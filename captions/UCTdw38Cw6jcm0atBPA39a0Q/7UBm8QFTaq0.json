[
  {
    "text": "good morning good morning everyone I hope you're enjoying the conference",
    "start": "480",
    "end": "5819"
  },
  {
    "text": "um let's talk about API security and more specifically about getting API security very wrong that's not a part in",
    "start": "5819",
    "end": "13019"
  },
  {
    "text": "the title but that's going to be the the line chart the presentation I'm going to show you how things go wrong in Real",
    "start": "13019",
    "end": "18600"
  },
  {
    "text": "World Systems plenty of stories and I'm going to talk about getting things right some guidelines some pointers and some",
    "start": "18600",
    "end": "24240"
  },
  {
    "text": "practical advice that you can use to look at your apis and make sure they're secure or even make them more secure and",
    "start": "24240",
    "end": "31260"
  },
  {
    "text": "the starting point here is a study from about two years ago where a company looked at a bunch of e-health apps and",
    "start": "31260",
    "end": "37620"
  },
  {
    "text": "they e-health apps well they handle sensitive data by Nature there's no such thing as non-sensitive e-health or",
    "start": "37620",
    "end": "43140"
  },
  {
    "text": "Healthcare information so it's Healthcare information very sensitive data and this study discovered like a",
    "start": "43140",
    "end": "48180"
  },
  {
    "text": "bunch of problems and one of these problems is that a lot of these apps about 30 apps they tested a lot of them",
    "start": "48180",
    "end": "53219"
  },
  {
    "text": "like 77 contained hard-coded API keys and seven percent had hard-coded",
    "start": "53219",
    "end": "58379"
  },
  {
    "text": "usernames and passwords that's not good have you ever followed something about mobile security lesson",
    "start": "58379",
    "end": "65040"
  },
  {
    "text": "number one is typically like Hey whenever you're doing something in a mobile app in a front-end web app you",
    "start": "65040",
    "end": "70439"
  },
  {
    "text": "cannot put hard-coded secrets in there because it's very trivial to get them out people can decompile the app and",
    "start": "70439",
    "end": "75600"
  },
  {
    "text": "extract your secrets if it's JavaScript they can just look at the JavaScript extractor Secrets or they can just",
    "start": "75600",
    "end": "80640"
  },
  {
    "text": "monitor Network traffic and investigate what you're including as a secret get it out and abuse it that way so that's not",
    "start": "80640",
    "end": "87240"
  },
  {
    "text": "really great same study looked at the apis Behind These systems as well they looked at the apis and they discovered",
    "start": "87240",
    "end": "93180"
  },
  {
    "text": "that a lot of these apis are all of the ones that they looked at had authorization failures Bola attacks",
    "start": "93180",
    "end": "98700"
  },
  {
    "text": "broken object level authorization that brings me to the very first",
    "start": "98700",
    "end": "103799"
  },
  {
    "text": "takeaway in this presentation already so I have a whole bunch of takeaways in case you're wondering the first one is",
    "start": "103799",
    "end": "109680"
  },
  {
    "text": "that it's time to take security seriously or if you want to make it more exciting the cowboy years are over as in",
    "start": "109680",
    "end": "116159"
  },
  {
    "text": "there's you can't really build an application anymore and be like yeah I will worry about security later because guess what later is never gonna come",
    "start": "116159",
    "end": "122820"
  },
  {
    "text": "it's always like oh yeah we don't have time now we have to build this feature and that feature and by the time you're actually getting to security it's",
    "start": "122820",
    "end": "128880"
  },
  {
    "text": "probably too late and it's going to be insanely difficult to get this done",
    "start": "128880",
    "end": "133980"
  },
  {
    "text": "so the real takeaway is that you have to ingrain security throughout your entire development life cycle from the start",
    "start": "133980",
    "end": "140640"
  },
  {
    "text": "from day one you have to think about security you have to build applications to enable security doesn't mean you have",
    "start": "140640",
    "end": "146040"
  },
  {
    "text": "to do all the bells and whistle Security First but at least think about how things will evolve over time and set",
    "start": "146040",
    "end": "152819"
  },
  {
    "text": "yourself up for success that's essentially what this means right here all right",
    "start": "152819",
    "end": "158640"
  },
  {
    "text": "before we dive into the details let me introduce myself I'm Philip Drake and I'm a security expert and I did a PhD in",
    "start": "158640",
    "end": "165300"
  },
  {
    "text": "web security so I've been doing security for quite a long time and since a while now I run my own company called",
    "start": "165300",
    "end": "170819"
  },
  {
    "text": "pragmatic web security and through that company I help developers build more secure applications I teach workshops I",
    "start": "170819",
    "end": "177000"
  },
  {
    "text": "did a two-day conference Workshop right here in NSC London I did one in Oslo last week but I also do a quite a bunch",
    "start": "177000",
    "end": "183180"
  },
  {
    "text": "of In-House trainings where we actually dive deep into security topics with Developers do some Consulting highly",
    "start": "183180",
    "end": "189420"
  },
  {
    "text": "specialized Consulting on complex topics or out open ID connect API security if you work with these topics you know that",
    "start": "189420",
    "end": "195420"
  },
  {
    "text": "there's a lot of stuff you probably don't know and you need someone to help you explain that all right I'm also a Google developer",
    "start": "195420",
    "end": "202200"
  },
  {
    "text": "expert and art zero Ambassador which is always a bit confusing I'm not employed by these companies but they like to",
    "start": "202200",
    "end": "208379"
  },
  {
    "text": "recognize the work I'm doing for the community by having talks like this and sharing articles and resources and so on",
    "start": "208379",
    "end": "213540"
  },
  {
    "text": "and they recognize that send me some free swag in return and give me a nice title and batch I can put on slides so",
    "start": "213540",
    "end": "221099"
  },
  {
    "text": "thank you for that our xeros here by the way at the conference they have a boot downstairs they have some cool swag that they're looking to get rid of so if you",
    "start": "221099",
    "end": "227099"
  },
  {
    "text": "want to talk about authentication go visit that boot downstairs all right finally I organize a course in Belgium",
    "start": "227099",
    "end": "233940"
  },
  {
    "text": "it's a non-profit organization SEC app Dev it's a course focused on secure application development it's a week-long",
    "start": "233940",
    "end": "240420"
  },
  {
    "text": "course in Belgium so there's some benefits to being in Belgium you can figure out what those are but we also",
    "start": "240420",
    "end": "245640"
  },
  {
    "text": "bring in experts from around the world to teach appsec one week so it runs in June this year so look it up and make",
    "start": "245640",
    "end": "252420"
  },
  {
    "text": "sure you can be there if you want to learn about appsec but enough about me let's talk about security",
    "start": "252420",
    "end": "259260"
  },
  {
    "text": "let's talk about the oasp API security top 10 very good resource about figuring out what's going",
    "start": "259260",
    "end": "265320"
  },
  {
    "text": "wrong on apis if you know oasp it's a non-profit organization aiming to improve the state of web security and",
    "start": "265320",
    "end": "271919"
  },
  {
    "text": "they've been running this OS top 10 for about two decades now it's a very influential document to raise awareness",
    "start": "271919",
    "end": "277919"
  },
  {
    "text": "about the 10 most dangerous issues in web applications but apis are slightly",
    "start": "277919",
    "end": "283560"
  },
  {
    "text": "different but not that much so they also created a couple of years ago a specific top 10 for apis",
    "start": "283560",
    "end": "289919"
  },
  {
    "text": "with some major issues you have to investigate by the way the new version of this one is coming out in the coming",
    "start": "289919",
    "end": "295139"
  },
  {
    "text": "weeks or months so there's going to be an updated version I haven't looked at the draft yet so I don't know what's going to be in there",
    "start": "295139",
    "end": "300840"
  },
  {
    "text": "but I might have to update the slide when it drops but I'm fairly confident that the top issues are not likely to",
    "start": "300840",
    "end": "307440"
  },
  {
    "text": "change authorization failures number one number five it's all about authorization and we're going to talk about quite a",
    "start": "307440",
    "end": "313259"
  },
  {
    "text": "few of these things here in this session all right first thing to talk about is",
    "start": "313259",
    "end": "319560"
  },
  {
    "text": "Bumble a dating app Bumble has is a dating app using the traditional freemium model so you can use Bumble and",
    "start": "319560",
    "end": "325560"
  },
  {
    "text": "you get some free features and after a while if you swipe enough left and right you have to pay them so they actually",
    "start": "325560",
    "end": "330660"
  },
  {
    "text": "make some money and so on and so on and somebody looked at Bumble and investigated how to implement these",
    "start": "330660",
    "end": "335759"
  },
  {
    "text": "restrictions and limits and it turns out that they did everything in the front end in a mobile app so you could use a mobile app and you",
    "start": "335759",
    "end": "342180"
  },
  {
    "text": "were locked out or blocked from doing anything else but if you knew how to send API requests which a lot of you",
    "start": "342180",
    "end": "347639"
  },
  {
    "text": "will be able to do then you can still access the API as if your account was not locked or you didn't reach those",
    "start": "347639",
    "end": "353520"
  },
  {
    "text": "limits that's not good in case you're wondering that's not good that's not what's supposed to happen and this is a",
    "start": "353520",
    "end": "359880"
  },
  {
    "text": "very very common pattern that we see over and over again like front-end apps mobile apps and forcing certain restrictions that are not enforced by",
    "start": "359880",
    "end": "366840"
  },
  {
    "text": "the API and forcing things like transactional Integrity first we send request one then request two and then",
    "start": "366840",
    "end": "372960"
  },
  {
    "text": "request three think about a webshop fill your cart pay for your stuff ship",
    "start": "372960",
    "end": "378180"
  },
  {
    "text": "it to your home well if you can skip step two profit well at least for you not for the web shop very illegal by the way so",
    "start": "378180",
    "end": "385080"
  },
  {
    "text": "don't do that but these things happen quite often here's an example from Twitter where they forgot or they send a",
    "start": "385080",
    "end": "391560"
  },
  {
    "text": "read notification from the front lines which you could suppress so you could read this is about fleets like a temporary feature that they quickly",
    "start": "391560",
    "end": "397380"
  },
  {
    "text": "dropped after that never made it but just to show you that these things occur",
    "start": "397380",
    "end": "402720"
  },
  {
    "text": "quite often and this is something I often see when talking to developers there's very often security enforced in the frontland",
    "start": "402720",
    "end": "409199"
  },
  {
    "text": "without mimicking that behavior in the back end and that is a problem because attackers real attackers they don't give",
    "start": "409199",
    "end": "415560"
  },
  {
    "text": "a crap about your front end they don't care about the mobile app they will use a proxy sitting in the middle they will",
    "start": "415560",
    "end": "421080"
  },
  {
    "text": "use the app intercept traffic modify requests and send them to their API in the back end and they can do whatever",
    "start": "421080",
    "end": "426539"
  },
  {
    "text": "they want and if the API doesn't account for that you are in a world of trouble seriously this is not a good place to be",
    "start": "426539",
    "end": "433740"
  },
  {
    "text": "in so the client is irrelevant for security what the client does is good for user",
    "start": "433740",
    "end": "439919"
  },
  {
    "text": "experience and all of that stuff but the real security is on the API on the endpoints you expose that's where you",
    "start": "439919",
    "end": "445380"
  },
  {
    "text": "have to protect the application not in the front end of course the front end is not",
    "start": "445380",
    "end": "451680"
  },
  {
    "text": "completely useless so if you're also a mobile developer don't worry your job is not completely useless and of course we",
    "start": "451680",
    "end": "458220"
  },
  {
    "text": "have that as a window to the API but we can also enforce security restrictions in that mobile app in that front-end app",
    "start": "458220",
    "end": "464699"
  },
  {
    "text": "as long as we do the same thing on the API and then things get interesting because",
    "start": "464699",
    "end": "469740"
  },
  {
    "text": "if you enforce authorization or input validation or whatever boats in the front end and on the API",
    "start": "469740",
    "end": "476639"
  },
  {
    "text": "guess how often that should fail on the API never it's there to protect you but it",
    "start": "476639",
    "end": "483300"
  },
  {
    "text": "shouldn't be triggered and that means if it triggers if your API decides like hey this user is not allowed to access admin",
    "start": "483300",
    "end": "489599"
  },
  {
    "text": "features why is this here in the first place how did it get here either you have a bug that would be my case I",
    "start": "489599",
    "end": "495000"
  },
  {
    "text": "probably screw at the front end but since you're a good developers your Frontline is going to be solid so somebody's attacking your API so now you",
    "start": "495000",
    "end": "500940"
  },
  {
    "text": "have a high confidence signal that somebody is tampering with the application sending you stuff that is never supposed to reach you and you can",
    "start": "500940",
    "end": "507599"
  },
  {
    "text": "use that to monitor the behavior of attackers you can use that if you're",
    "start": "507599",
    "end": "512700"
  },
  {
    "text": "building sensitive applications you can use that as a high confidence signal in your security monitoring like something",
    "start": "512700",
    "end": "518039"
  },
  {
    "text": "is really wrong let's look at what this user is doing let's keep track of that or even if you want to take evasive",
    "start": "518039",
    "end": "524279"
  },
  {
    "text": "action let's block that user divert them to a system with no sensitive data whatever you want to do to actually fix",
    "start": "524279",
    "end": "529740"
  },
  {
    "text": "that so the real takeaway is that the client is irrelevant to enforce security enforcement is an API thing not a",
    "start": "529740",
    "end": "536580"
  },
  {
    "text": "clienting but the client can of course Aid in the whole process by ensuring that the same controls are also enforced",
    "start": "536580",
    "end": "543120"
  },
  {
    "text": "on the client all right",
    "start": "543120",
    "end": "547399"
  },
  {
    "text": "back to our stories grinder had a security problem like so many",
    "start": "548279",
    "end": "555420"
  },
  {
    "text": "applications Grindr has user accounts you can sign up with your email address and so on and so on so like so many",
    "start": "555420",
    "end": "561240"
  },
  {
    "text": "applications they have a password reset feature because well we suck at keeping track of passwords and you know how a",
    "start": "561240",
    "end": "567899"
  },
  {
    "text": "password reset feature works right you enter an email address so you go to brand new Ender Philippe at pragmatic web screw.com",
    "start": "567899",
    "end": "573480"
  },
  {
    "text": "and you submit that and I'll get a mail in my mailbox with a unique link and that link is like reset password with a",
    "start": "573480",
    "end": "579360"
  },
  {
    "text": "unique token that allows the user with that link to reset the account ID",
    "start": "579360",
    "end": "584519"
  },
  {
    "text": "password from my account one time if you fill it out you can't read my",
    "start": "584519",
    "end": "589860"
  },
  {
    "text": "mailbox hopefully otherwise I'm in big trouble but you can't read my mailbox so no attack Factor there and the front-end",
    "start": "589860",
    "end": "597180"
  },
  {
    "text": "application if you enter an email address is from the set like yeah we send an email to that email address go check your mail no attack Factor there",
    "start": "597180",
    "end": "603720"
  },
  {
    "text": "however if you would inspect the actual Network traffic you could see the request go to",
    "start": "603720",
    "end": "608940"
  },
  {
    "text": "the API and the response comes back and it's like status success secret password reset code something something",
    "start": "608940",
    "end": "615600"
  },
  {
    "text": "in the response in the Json data the front that never shows it but the API exposes it by accident that's a mistake",
    "start": "615600",
    "end": "621660"
  },
  {
    "text": "that was not supposed to be there if you can look it up figure out how you use the Network Tools like it's not a very",
    "start": "621660",
    "end": "627120"
  },
  {
    "text": "sophisticated attack you inspect the network traffic in your browser look at the response like a second tab you can",
    "start": "627120",
    "end": "632940"
  },
  {
    "text": "get the data and off you go and with that token of course you can reset the password from my account and",
    "start": "632940",
    "end": "638940"
  },
  {
    "text": "we again have a security vulnerability and this problem is in the last API executed then in spot number three if",
    "start": "638940",
    "end": "646380"
  },
  {
    "text": "you paid attention you knew what that was if you didn't I'm going to tell you so don't worry about that it's called excessive data exposure because the API",
    "start": "646380",
    "end": "653399"
  },
  {
    "text": "is returning data to the front end at the front that never uses and in this case creates a significant vulnerability",
    "start": "653399",
    "end": "659220"
  },
  {
    "text": "and this is a really common problem here's an example for the API security swag shop whatever it shows a list of",
    "start": "659220",
    "end": "666300"
  },
  {
    "text": "online users not sure if that's like really privacy sensitive okay but whatever it shows a",
    "start": "666300",
    "end": "672540"
  },
  {
    "text": "list of online users so there's an API call to the back end to get like get me a list of online users and it returns a",
    "start": "672540",
    "end": "678600"
  },
  {
    "text": "set of Json information and we can easily render that as an array in it's not very sophisticated UI design I know",
    "start": "678600",
    "end": "685560"
  },
  {
    "text": "right but straightforward right however in the back end to get that list of users we",
    "start": "685560",
    "end": "691260"
  },
  {
    "text": "have some users somewhere users have properties like addresses and that information is just sent back in the response this is extremely common",
    "start": "691260",
    "end": "700140"
  },
  {
    "text": "you want to know how common open up your Dev tools and go to any application you use stay in layout",
    "start": "700140",
    "end": "706079"
  },
  {
    "text": "open up your online bank and look at what traffic they're sending back and forth it's absolutely insane there's a",
    "start": "706079",
    "end": "712320"
  },
  {
    "text": "lot of information there happens quite often why does this happen how do we get here",
    "start": "712320",
    "end": "719339"
  },
  {
    "text": "well in this particular case it's because we're using a data class",
    "start": "719339",
    "end": "724680"
  },
  {
    "text": "somewhere in our system it's Java my apologies for that but the benefit of java everybody can read it never start",
    "start": "724680",
    "end": "730920"
  },
  {
    "text": "Java in your life I mean it's so verbose it just basically tells you what's going on so in this case we have a list of",
    "start": "730920",
    "end": "737160"
  },
  {
    "text": "online users we get that users we have a list of actual user objects and users of course have an ID and name and address",
    "start": "737160",
    "end": "742980"
  },
  {
    "text": "and so on and we just throw that in a response like here's the list bam response whoop out goes to Json we don't",
    "start": "742980",
    "end": "749040"
  },
  {
    "text": "construct Json by hand it just happens automatically because otherwise our lives would be living hell if you've",
    "start": "749040",
    "end": "754380"
  },
  {
    "text": "ever done Json by hand you know exactly what I mean not fun so this is how this happens right return users and off we go",
    "start": "754380",
    "end": "761820"
  },
  {
    "text": "data marshalling from objects to Json very often leads to exposing sensitive data",
    "start": "761820",
    "end": "768779"
  },
  {
    "text": "how can we fix that well there's a crappy solution and a good",
    "start": "768779",
    "end": "774300"
  },
  {
    "text": "solution the crappy solution well it's not that crappy but it doesn't really work at",
    "start": "774300",
    "end": "779339"
  },
  {
    "text": "scale the crappy solution is to use annotations you can say like hey Jason parser let's just pretend the field is",
    "start": "779339",
    "end": "785639"
  },
  {
    "text": "not here so we don't accidentally expose this Jason ignore it works but I'm not a big fan of that",
    "start": "785639",
    "end": "792240"
  },
  {
    "text": "because you can imagine it works for like this super simple example on PowerPoint but a real world application",
    "start": "792240",
    "end": "797339"
  },
  {
    "text": "of it like dozens of these data classes going through all the fields and adding annotations left and right that's not",
    "start": "797339",
    "end": "803100"
  },
  {
    "text": "going to work very well and if you miss one you have a vulnerability whoops password recent token okay yeah yeah we",
    "start": "803100",
    "end": "808440"
  },
  {
    "text": "missed that annotation are bad and you have a problem so a better approach is to use this age-old pattern called data",
    "start": "808440",
    "end": "814800"
  },
  {
    "text": "transfer objects or a schema or whatever works in your language because this translates to different languages in",
    "start": "814800",
    "end": "820560"
  },
  {
    "text": "different ways but instead of returning users directly we're now returning a public user info object making things",
    "start": "820560",
    "end": "826980"
  },
  {
    "text": "very clear about what's going on what are we returning public user info what is public or an idea and a name like",
    "start": "826980",
    "end": "832260"
  },
  {
    "text": "yeah that makes sense if you ever need to add a new field well if you add a field like credit card",
    "start": "832260",
    "end": "839700"
  },
  {
    "text": "number to public user info that's on you that's not a just a simple mistake you make that's like I don't know Monday",
    "start": "839700",
    "end": "845880"
  },
  {
    "text": "morning code after heavy weekend of spending in the pub something like that but",
    "start": "845880",
    "end": "851160"
  },
  {
    "text": "this makes it very clear allows you to review your DDOS and be like yeah that makes sense and this actually explains",
    "start": "851160",
    "end": "856740"
  },
  {
    "text": "what's going on all right automatic marshalling from objects to Json results in excessive",
    "start": "856740",
    "end": "864000"
  },
  {
    "text": "data exposure number three in the top 10. what if we flip it around",
    "start": "864000",
    "end": "870600"
  },
  {
    "text": "what if we marshaled Jason back into objects can we then trick the API into accepting data",
    "start": "870600",
    "end": "877820"
  },
  {
    "text": "and after building this anticipation the answer is not no yes yes we can otherwise it's going to be pretty like",
    "start": "878399",
    "end": "883920"
  },
  {
    "text": "oh no we can't I gotcha next one so this is called Mass assignment this is the same problem but the other way around",
    "start": "883920",
    "end": "889620"
  },
  {
    "text": "Mass assignment means that the user is giving us data we're transforming that data into an object to work with because",
    "start": "889620",
    "end": "895860"
  },
  {
    "text": "we don't want to deal with Json as a raw value and that object makes its way through the application to the data",
    "start": "895860",
    "end": "901920"
  },
  {
    "text": "layer and results in updates in the database and this is supposed to be like that there's a user class on the left",
    "start": "901920",
    "end": "907260"
  },
  {
    "text": "again Java we have a request on the right to update my name my name becomes",
    "start": "907260",
    "end": "913380"
  },
  {
    "text": "Dr Phil which I can actually do so that's pretty cool so well I'm not sure if that's cool but uh sure if you're old enough you",
    "start": "913380",
    "end": "919560"
  },
  {
    "text": "know what I'm talking about I can send that request and update my name that's a legitimate scenario and",
    "start": "919560",
    "end": "925019"
  },
  {
    "text": "everything goes well you have a unit test that checks isn't always good look at the class on the left let me see",
    "start": "925019",
    "end": "931019"
  },
  {
    "text": "yes my highlighter Works class on the left has a role parameter guess what that does that's used for authorization",
    "start": "931019",
    "end": "936779"
  },
  {
    "text": "purposes I may be a user in the system so my role as user and that's it so what if I send a request with like",
    "start": "936779",
    "end": "943680"
  },
  {
    "text": "additional Json properties what's going to happen here in this case my name is Philip becomes admin and my role is",
    "start": "943680",
    "end": "949260"
  },
  {
    "text": "admin and I sent this and the system is like yeah I'm going to translate that into a user object give it to the data",
    "start": "949260",
    "end": "954480"
  },
  {
    "text": "layer the data layers like which Fields have changed oh the name update the name oh the role updateral bam flip is now",
    "start": "954480",
    "end": "960720"
  },
  {
    "text": "admin Mass assignment real world vulnerability leads to massive problems account takeovers",
    "start": "960720",
    "end": "966680"
  },
  {
    "text": "changing prices of products in web shops all kinds of nasty consequences",
    "start": "966680",
    "end": "973339"
  },
  {
    "text": "how do we fix this annotations we can do like access read only that's",
    "start": "973380",
    "end": "980519"
  },
  {
    "text": "it works like if you have one field this is probably fine but if you do this at scale in a real world applications this",
    "start": "980519",
    "end": "986459"
  },
  {
    "text": "is not going to work very well so you use data transfer objects or schemas or whatever works in your language you",
    "start": "986459",
    "end": "992760"
  },
  {
    "text": "basically restrict what information is acceptable only a fixed set of fields and now you have a very clear idea what",
    "start": "992760",
    "end": "999600"
  },
  {
    "text": "you're accepting and you can translate that to what it means and update the system correctly",
    "start": "999600",
    "end": "1005600"
  },
  {
    "text": "all right the takeaway here is to test your apis in their natural habitats as",
    "start": "1005600",
    "end": "1010880"
  },
  {
    "text": "in you have to test these things out this is not something that screams at you from code analysis like oh my God",
    "start": "1010880",
    "end": "1017180"
  },
  {
    "text": "this is wrong this is a very subtle problem and doing code analysis doesn't always reveal it especially Mass",
    "start": "1017180",
    "end": "1022880"
  },
  {
    "text": "assignments so you have to try this out you have to test this write a test case mess around temper with your own",
    "start": "1022880",
    "end": "1028400"
  },
  {
    "text": "requests and responses to see what's going on and if you can make the API misbehave",
    "start": "1028400",
    "end": "1033860"
  },
  {
    "text": "all right that brings us to another question I",
    "start": "1033860",
    "end": "1040040"
  },
  {
    "text": "have a lot of questions in this presentation even though there's no interactivity so I just do it in your",
    "start": "1040040",
    "end": "1045438"
  },
  {
    "text": "head that might work the question here is is this really a good approach",
    "start": "1045439",
    "end": "1050540"
  },
  {
    "text": "like yeah you can test your apis and maybe you can hire a pen testing firm to test your apis and they'll tell you like oh whoops excessive data here Mass",
    "start": "1050540",
    "end": "1057559"
  },
  {
    "text": "assignment there left right and so on and now what you can fix them that's step one",
    "start": "1057559",
    "end": "1063380"
  },
  {
    "text": "probably and then you keep developing your API so when are you going to test again tomorrow well probably not especially if",
    "start": "1063380",
    "end": "1070460"
  },
  {
    "text": "you get the bill from a pen testing firm that's not going to be for tomorrow maybe next week next month well yeah",
    "start": "1070460",
    "end": "1076580"
  },
  {
    "text": "let's do it like twice a year so in these six months you have nothing",
    "start": "1076580",
    "end": "1082940"
  },
  {
    "text": "it's called fingers crossed security doesn't really work very well it's like yeah things might work out but maybe they don't so testing is useful testing",
    "start": "1082940",
    "end": "1090200"
  },
  {
    "text": "is good yes you can test this but it's not a scalable approach that will allow you to apply this in the real world",
    "start": "1090200",
    "end": "1096860"
  },
  {
    "text": "something that might work better is using API contracts if you specify an open API contract for",
    "start": "1096860",
    "end": "1103520"
  },
  {
    "text": "an API endpoint you are defining the exact behavior that you want to see",
    "start": "1103520",
    "end": "1109400"
  },
  {
    "text": "I'm going to apologize again it's yaml I know my apologies but there's still support to help save",
    "start": "1109400",
    "end": "1115700"
  },
  {
    "text": "your space bar so you don't have to be like running your spacebar the whole time tools will actually help you write these schemas but this is really really",
    "start": "1115700",
    "end": "1122240"
  },
  {
    "text": "useful because it defines the behavior of the API it defines in this case the exact response of that list of online",
    "start": "1122240",
    "end": "1128900"
  },
  {
    "text": "users and guess what's not their address this is an ID and a name that's all we",
    "start": "1128900",
    "end": "1134179"
  },
  {
    "text": "really care about and that's what we want to see in the response very clearly defined",
    "start": "1134179",
    "end": "1139720"
  },
  {
    "text": "how do you use these things well you write them you can review them that's good",
    "start": "1141620",
    "end": "1148220"
  },
  {
    "text": "but the evolution that we're going towards is having tools that use this as",
    "start": "1148220",
    "end": "1153500"
  },
  {
    "text": "input so that they understand your API tools like fuzz Lightyear which you can",
    "start": "1153500",
    "end": "1159080"
  },
  {
    "text": "use for fuzzing your API it will send you a whole bunch of requests and try to make your API fail on certain inputs or",
    "start": "1159080",
    "end": "1165140"
  },
  {
    "text": "Microsoft has a tool called wrestler that might do something that does something very similar that's one Suite of tools like testing",
    "start": "1165140",
    "end": "1172460"
  },
  {
    "text": "tools that understand where the inputs go the format of the inputs and hey if we give you a string where you expect an",
    "start": "1172460",
    "end": "1178100"
  },
  {
    "text": "integer do you actually fail proper input validation proper checks",
    "start": "1178100",
    "end": "1183320"
  },
  {
    "text": "and so on and the second phase here the Second Step what we're going towards is actual enforcement at runtime you have",
    "start": "1183320",
    "end": "1190160"
  },
  {
    "text": "API gateways API firewalls that will actually be able to take a schema as input and actually enforce that on",
    "start": "1190160",
    "end": "1196520"
  },
  {
    "text": "incoming requests like API Shields from cloudflare it's an Enterprise feature so I haven't tried it because I don't have",
    "start": "1196520",
    "end": "1202880"
  },
  {
    "text": "an Enterprise plan but if somebody from cloudflare is here just give me one and I'll try it out for you that's uh that",
    "start": "1202880",
    "end": "1208460"
  },
  {
    "text": "might be awesome but cloudflare does this 42 crunch is a company specifically dedicated to this space they have an API",
    "start": "1208460",
    "end": "1214760"
  },
  {
    "text": "firewall that does this on requests and responses automatically based on the contract that's the takeaway here write",
    "start": "1214760",
    "end": "1221419"
  },
  {
    "text": "the contract write your API to the best of your abilities and now you can map these things",
    "start": "1221419",
    "end": "1228380"
  },
  {
    "text": "together and make sure that API behaves as you defined in the contract and if you accidentally expose the password",
    "start": "1228380",
    "end": "1234320"
  },
  {
    "text": "reset token the contract is not going to contain it so you have a mismatch and you can",
    "start": "1234320",
    "end": "1239360"
  },
  {
    "text": "detect that or even fix it at runtime",
    "start": "1239360",
    "end": "1244240"
  },
  {
    "text": "all right",
    "start": "1246799",
    "end": "1249399"
  },
  {
    "text": "let me take a moment here and ask you a question who here is using API contracts",
    "start": "1254720",
    "end": "1262179"
  },
  {
    "text": "a handful of people all right interesting who here is using them for security",
    "start": "1263480",
    "end": "1270320"
  },
  {
    "text": "and not just for documentation crickets nobody if you're watching a recording like",
    "start": "1270320",
    "end": "1276440"
  },
  {
    "text": "literally nobody everybody's like crap all right a couple of takeaways for the",
    "start": "1276440",
    "end": "1282080"
  },
  {
    "text": "people not doing API contracts start doing that why",
    "start": "1282080",
    "end": "1288380"
  },
  {
    "text": "not I'm not saying right like 15 pages of contracts for all your apis but learn how to deal with API contracts in the",
    "start": "1288380",
    "end": "1295700"
  },
  {
    "text": "real world this is not an easy thing it seems like yeah I'll just write some yaml and we're done no it isn't",
    "start": "1295700",
    "end": "1301580"
  },
  {
    "text": "the hard Parts keeping this thing in sync with your actual implementation because it's not like you write it once",
    "start": "1301580",
    "end": "1306980"
  },
  {
    "text": "you drop it somewhere and then you just code your API because guess what if something changes you have to update the contract learn how to keep these things",
    "start": "1306980",
    "end": "1313100"
  },
  {
    "text": "up to date learn how to deal where they best put the contracts what works really well is like having code",
    "start": "1313100",
    "end": "1318860"
  },
  {
    "text": "in the endpoint implementation so you can actually having documents sorry having comments in your code so we can",
    "start": "1318860",
    "end": "1325159"
  },
  {
    "text": "keep these API contracts close to where they are keep them up to date and so on learn how to construct documentation",
    "start": "1325159",
    "end": "1330740"
  },
  {
    "text": "from that and deal with that in practice one of the things you should not do well at least for security documentation",
    "start": "1330740",
    "end": "1337460"
  },
  {
    "text": "purposes that's different but for security you do not want to Auto generate your contracts from your code yes there's tools that do that and no",
    "start": "1337460",
    "end": "1344299"
  },
  {
    "text": "they're not very useful in this case because guess what if you have since the excessive data exposure or mass",
    "start": "1344299",
    "end": "1349760"
  },
  {
    "text": "assignment in your code and you ought to generate a contract you'll have the same vulnerabilities in the contract so you",
    "start": "1349760",
    "end": "1354799"
  },
  {
    "text": "gain nothing basically these tools are built with documentation purposes like create documentation from the",
    "start": "1354799",
    "end": "1361100"
  },
  {
    "text": "implementation which is also a bit I'm a bit skeptical about that but that's not how security Works in practice seriously",
    "start": "1361100",
    "end": "1368240"
  },
  {
    "text": "this might be the most important takeaway from the entire presentation look into using open API contracts",
    "start": "1368240",
    "end": "1374960"
  },
  {
    "text": "all right got this really important",
    "start": "1374960",
    "end": "1382539"
  },
  {
    "text": "let's talk about authorization let's talk about T-Mobile they've been",
    "start": "1385220",
    "end": "1390440"
  },
  {
    "text": "in the news recently because they had another breach like whatever I've been using this slide for a long time for me",
    "start": "1390440",
    "end": "1396140"
  },
  {
    "text": "because it's from 2017 but it highlights the point very aptly and well let's say",
    "start": "1396140",
    "end": "1401360"
  },
  {
    "text": "that T-Mobile has had some issues since then that they might have to deal with but the problem here is that with T-Mobile",
    "start": "1401360",
    "end": "1408460"
  },
  {
    "text": "my account information by contacting an API Imports and the ID of my account is my phone number",
    "start": "1411620",
    "end": "1417260"
  },
  {
    "text": "kind of makes sense it's a unique number anyway so let's let's use that as an ID sure why not",
    "start": "1417260",
    "end": "1423380"
  },
  {
    "text": "if I send that request they check if I'm authenticated good and they get the account information and",
    "start": "1423380",
    "end": "1429320"
  },
  {
    "text": "they send me back the response but if I want to get your account information I send a requested API",
    "start": "1429320",
    "end": "1434919"
  },
  {
    "text": "substitute my phone number with your phone number send it T-Mobile is like are you authenticated like oh yeah you",
    "start": "1434919",
    "end": "1440000"
  },
  {
    "text": "are here's the account information whoops they forgot about authorization and this vulnerability used to be called",
    "start": "1440000",
    "end": "1446539"
  },
  {
    "text": "idor insecure direct object references that's kind of the old crappy name the better name is broken object level",
    "start": "1446539",
    "end": "1452840"
  },
  {
    "text": "authorization and this problem is everywhere remember that story from the beginning slide number two",
    "start": "1452840",
    "end": "1459679"
  },
  {
    "text": "every single API of those Healthcare apps had Bola vulnerabilities this problem and in India a while ago they built a",
    "start": "1459679",
    "end": "1466760"
  },
  {
    "text": "patient portal whoops a broken object level authorization you could access other patients information and with",
    "start": "1466760",
    "end": "1472039"
  },
  {
    "text": "Twitter they had a problem where you could map phone numbers to Twitter accounts and on Facebook they had a problem where it could take control well",
    "start": "1472039",
    "end": "1478360"
  },
  {
    "text": "change the name of a Facebook page and then register a new one with the old name so everybody would come to your",
    "start": "1478360",
    "end": "1483860"
  },
  {
    "text": "page instead of the legitimate page pays out 15 000 USD in bug Bounty so",
    "start": "1483860",
    "end": "1488900"
  },
  {
    "text": "this is not a small insignificant vulnerability this is a real problem that Facebook paid real money for for",
    "start": "1488900",
    "end": "1495440"
  },
  {
    "text": "reporting that broken object level authorization how do we get there what is it and how",
    "start": "1495440",
    "end": "1501740"
  },
  {
    "text": "do we get there well the starting point of getting there is this building in restful API in 10",
    "start": "1501740",
    "end": "1507860"
  },
  {
    "text": "minutes I can tell you that in 10 minutes there's not going to be any Security in that API which is okay I'm not bashing",
    "start": "1507860",
    "end": "1516200"
  },
  {
    "text": "the tutorial here this is a fine tutorial to learn about restful principles in node.js",
    "start": "1516200",
    "end": "1521960"
  },
  {
    "text": "and it explains to you how to build a take a wild guess what application we're going to build",
    "start": "1521960",
    "end": "1527419"
  },
  {
    "text": "it's a two application yes tasks because everybody has tasks like always tasks by",
    "start": "1527419",
    "end": "1533840"
  },
  {
    "text": "the way in my trainings I use restaurant reviews because I like good food and I hate desks so it kind of works out well",
    "start": "1533840",
    "end": "1539360"
  },
  {
    "text": "for me that said if you want to build a restful API to delete the task you send a delete",
    "start": "1539360",
    "end": "1544820"
  },
  {
    "text": "request to the application like the HP method delete you handle that you get a task ID you find the task you drop it",
    "start": "1544820",
    "end": "1550279"
  },
  {
    "text": "from your database and you're done that's what you learn in a tutorial like that and that's exactly how rest apis",
    "start": "1550279",
    "end": "1556039"
  },
  {
    "text": "work and if you've done that you're like okay I got that awesome let's add",
    "start": "1556039",
    "end": "1562460"
  },
  {
    "text": "security you're going to add authentication that's going to be the next step your follower tutorials",
    "start": "1562460",
    "end": "1567559"
  },
  {
    "text": "somewhere on the Internet is going to be like building authentication node.js in 10 minutes and you can follow that one and you will get somewhere that says",
    "start": "1567559",
    "end": "1574279"
  },
  {
    "text": "requires off good if you're T-Mobile at this point you're",
    "start": "1574279",
    "end": "1579980"
  },
  {
    "text": "like job done bye bye next you can cross off the task if you're someone else you might want to think a",
    "start": "1579980",
    "end": "1585980"
  },
  {
    "text": "bit further like authenticating the user is good but how do I know that they can delete tasks maybe we need to add some",
    "start": "1585980",
    "end": "1592279"
  },
  {
    "text": "authorization so we check has permission delete task that makes perfect sense right",
    "start": "1592279",
    "end": "1598100"
  },
  {
    "text": "because maybe only Philip is allowed to delete tasks but not the other user at",
    "start": "1598100",
    "end": "1603740"
  },
  {
    "text": "this point we have implemented function level authorization we already fixed number one of the OS API security",
    "start": "1603740",
    "end": "1609740"
  },
  {
    "text": "top 10 issues number five is now fixed function level authorization good awesome good job",
    "start": "1609740",
    "end": "1617059"
  },
  {
    "text": "T-Mobile you that's I'm gonna get in trouble for this but I will deal with that later",
    "start": "1617059",
    "end": "1625059"
  },
  {
    "text": "what we haven't fixed is object level authorization how do we",
    "start": "1626000",
    "end": "1631760"
  },
  {
    "text": "know if you're allowed to delete tasks how do we know you're deleting the right tasks what if you want to delete my",
    "start": "1631760",
    "end": "1636799"
  },
  {
    "text": "tasks are you allowed to do that well that requires you to look at the actual task and the user and the permissions",
    "start": "1636799",
    "end": "1642559"
  },
  {
    "text": "and so on to deal with that and that is broken object level authorization and that problem exists in",
    "start": "1642559",
    "end": "1648559"
  },
  {
    "text": "a lot of apis but we'll talk about that in a second first the takeaway here's and force authorization at the function",
    "start": "1648559",
    "end": "1654740"
  },
  {
    "text": "level that's a good thing that's something you have to do and to be honest that's something that a lot of apis actually get right as well it's not",
    "start": "1654740",
    "end": "1662539"
  },
  {
    "text": "too common to see completely no authorization at all it happens but not that often",
    "start": "1662539",
    "end": "1668120"
  },
  {
    "text": "that's good let's take a side track here before we talk about object level authorization",
    "start": "1668120",
    "end": "1674120"
  },
  {
    "text": "let's look at authorization in general here's two requests on top you have one for getting tasks and at the bottom you",
    "start": "1674120",
    "end": "1681320"
  },
  {
    "text": "have one for deleting tasks all right the top one has no authorization logic here the",
    "start": "1681320",
    "end": "1687500"
  },
  {
    "text": "bottom one has a permission check for deleting tasks function level authorization",
    "start": "1687500",
    "end": "1693039"
  },
  {
    "text": "good is this correct or not",
    "start": "1693260",
    "end": "1698720"
  },
  {
    "text": "I don't know I'm often in this position where I'm working with a team I'm improving their",
    "start": "1698720",
    "end": "1703760"
  },
  {
    "text": "security and we look at authorization logic and I'm like is this correct and I have to ask like",
    "start": "1703760",
    "end": "1710179"
  },
  {
    "text": "is this do you actually intend that getting task is probably accessible I",
    "start": "1710179",
    "end": "1715279"
  },
  {
    "text": "can everybody see a list of tasks maybe it's like a super accountable task manager where everybody can see the",
    "start": "1715279",
    "end": "1720620"
  },
  {
    "text": "stuff you have to do then I don't know or maybe somebody forgot authorization the fact that we can't see it is the",
    "start": "1720620",
    "end": "1727279"
  },
  {
    "text": "fact that you have to look at this snippet of code in me like yeah I don't know if that's supposed to be like that",
    "start": "1727279",
    "end": "1732620"
  },
  {
    "text": "or not that means this policy is not easy to audit it doesn't scream at you that this is",
    "start": "1732620",
    "end": "1738380"
  },
  {
    "text": "either a mistake or probably accessible it's like oh yeah this is a subtle detail something is missing and because",
    "start": "1738380",
    "end": "1743419"
  },
  {
    "text": "of that everybody can access this endpoint what if we make everybody's life easier",
    "start": "1743419",
    "end": "1749360"
  },
  {
    "text": "by doing like just a little bit more effort we can do something like this allow Public Access",
    "start": "1749360",
    "end": "1756080"
  },
  {
    "text": "guess what if this was not supposed to be the case and you look at your API code now or you bring me in to help you",
    "start": "1756080",
    "end": "1762020"
  },
  {
    "text": "with that I'm going to be like why the hell is that endpoint public you'll be like oh yeah whoops I don't",
    "start": "1762020",
    "end": "1768080"
  },
  {
    "text": "know it's but it's not gonna happen because you'll see that you'll see that immediately if you look at the code that something is really wrong here or you",
    "start": "1768080",
    "end": "1774799"
  },
  {
    "text": "see that this is actually intentional instead of just an oversight and this takeaway is so important Empower",
    "start": "1774799",
    "end": "1782480"
  },
  {
    "text": "auditability because the security of your authorization policy is completely dependent on your power of other things",
    "start": "1782480",
    "end": "1789320"
  },
  {
    "text": "the policy because if you can't review it how the hell do you know that it does what it's supposed to do",
    "start": "1789320",
    "end": "1794480"
  },
  {
    "text": "again we're back to fingers crossed it's like yeah it's probably good for likely it isn't all of the",
    "start": "1794480",
    "end": "1800840"
  },
  {
    "text": "healthcare apis had Bola vulnerabilities I don't know the details but I'm fairly certain that a lot of those policies",
    "start": "1800840",
    "end": "1807020"
  },
  {
    "text": "were impossible to audit really really important",
    "start": "1807020",
    "end": "1812559"
  },
  {
    "text": "all right let's go back to Broken object level authorization why is that issue so common because it's a nightmare to",
    "start": "1813260",
    "end": "1819440"
  },
  {
    "text": "actually enforce here's an example of what you'll end up with and I'm not joking I see this code",
    "start": "1819440",
    "end": "1825320"
  },
  {
    "text": "in different contexts of course I don't review to do applications but in different contexts I see code like this",
    "start": "1825320",
    "end": "1831260"
  },
  {
    "text": "all the time clue is on line number four like yeah we",
    "start": "1831260",
    "end": "1836539"
  },
  {
    "text": "check functional level Access Control delete task the user has this permission and then it's like oh if you're an admin",
    "start": "1836539",
    "end": "1841700"
  },
  {
    "text": "or a manager like yeah you're allowed to do that but if you're not if you're like a regular employee or a regular user you",
    "start": "1841700",
    "end": "1847580"
  },
  {
    "text": "can only delete your own tasks so now the fun starts like oh if the user is this then we have to check that and",
    "start": "1847580",
    "end": "1853520"
  },
  {
    "text": "again auditability of this is an absolute Nightmare how do I know that you covered all cases I don't it takes",
    "start": "1853520",
    "end": "1859580"
  },
  {
    "text": "very intricate knowledge about the business domain to assess whether this endpoint is implemented securely and I",
    "start": "1859580",
    "end": "1865640"
  },
  {
    "text": "don't really like that so how can we improve this",
    "start": "1865640",
    "end": "1870980"
  },
  {
    "text": "how can we fix this well first step or an important step is pulling that authorization logic out of",
    "start": "1870980",
    "end": "1877940"
  },
  {
    "text": "the application so instead of doing everything in the API what if we put our authorization logic separately",
    "start": "1877940",
    "end": "1884980"
  },
  {
    "text": "your developers your engineers I can already see you overthinking this I can see you thinking like oh yeah we can",
    "start": "1885080",
    "end": "1891140"
  },
  {
    "text": "probably find a service that handles no no the simplest version of doing this",
    "start": "1891140",
    "end": "1898100"
  },
  {
    "text": "is using one code file you copy the logic you move it into an authorization policy JavaScript module",
    "start": "1898100",
    "end": "1904820"
  },
  {
    "text": "or Java class with static methods or whatever you're doing and you ask can delete task",
    "start": "1904820",
    "end": "1910760"
  },
  {
    "text": "very simple very straightforward very under engineered by the way by Design because everybody can do this it costs",
    "start": "1910760",
    "end": "1917059"
  },
  {
    "text": "you zero money for vendors it costs it doesn't require you to spin up a separate service to run a separate",
    "start": "1917059",
    "end": "1922700"
  },
  {
    "text": "product to find something that suits you all it takes is writing a few lines of code and that's it and this gives you",
    "start": "1922700",
    "end": "1928460"
  },
  {
    "text": "massive benefits first of all if I have to review something like this I can say",
    "start": "1928460",
    "end": "1934220"
  },
  {
    "text": "very fast like yeah this makes perfect sense the leading tasks you check the authorization policy good I'm not saying",
    "start": "1934220",
    "end": "1940820"
  },
  {
    "text": "that your transition policy is correct I'm saying the endpoint code is Rock Solid awesome",
    "start": "1940820",
    "end": "1947179"
  },
  {
    "text": "second step in this would be evaluating the optimization policy does this thing do what you wanted to do according to",
    "start": "1947179",
    "end": "1952640"
  },
  {
    "text": "your business rules and it's now centralized so you have one file you have to review awesome you have one file",
    "start": "1952640",
    "end": "1958220"
  },
  {
    "text": "you can unit test you can unit test your actual policy without having to deal with endpoints and requests or responses",
    "start": "1958220",
    "end": "1964640"
  },
  {
    "text": "you can just write a set of unit tests you can apply source code control on that file like somebody you can log the",
    "start": "1964640",
    "end": "1971720"
  },
  {
    "text": "file and nobody is allowed to update the authorization policy by accident I've seen it as well PR's like a pull",
    "start": "1971720",
    "end": "1977720"
  },
  {
    "text": "request where somebody's like yeah I'm gonna change something here and delete this part of authorization logic because I don't think it's necessary and Bam",
    "start": "1977720",
    "end": "1983419"
  },
  {
    "text": "vulnerability this will help fix that so this makes your code",
    "start": "1983419",
    "end": "1988580"
  },
  {
    "text": "a lot better well at least line four makes your code better not just the sad face as",
    "start": "1988580",
    "end": "1994880"
  },
  {
    "text": "exception handling that's not a very good way to handle errors on line seven so don't do that but take the relevant",
    "start": "1994880",
    "end": "2000580"
  },
  {
    "text": "Parts here line number four and yes let's bring you back to the engineering",
    "start": "2000580",
    "end": "2005980"
  },
  {
    "text": "part yes you can make this better you can Implement some centralized Services you can Implement things like a policy",
    "start": "2005980",
    "end": "2012100"
  },
  {
    "text": "engine where you use a service to handle your authorization logic but that's for complex use cases if you have like a",
    "start": "2012100",
    "end": "2018820"
  },
  {
    "text": "really Advanced policy writing an encode is not going to work very well anymore so you can use tools like open policy",
    "start": "2018820",
    "end": "2024940"
  },
  {
    "text": "agents like an Oso like so many startups are building now this is a Hot Topic in startup World fixing authorization this",
    "start": "2024940",
    "end": "2032019"
  },
  {
    "text": "will be possible but the first step is centralizing it yourself and then if you're like yeah this thing is becoming",
    "start": "2032019",
    "end": "2037480"
  },
  {
    "text": "too big to really manage let's push it out to a separate service that is perfectly possible as well",
    "start": "2037480",
    "end": "2043779"
  },
  {
    "text": "keep taking away your centralization either in code or as a service whatever",
    "start": "2043779",
    "end": "2049780"
  },
  {
    "text": "floats your boat you can have various degrees of complexity here but this is a better way than having it scattered",
    "start": "2049780",
    "end": "2055780"
  },
  {
    "text": "throughout the code because it allows you to audit the policy and allows you to test the policy to control who changes it and it will",
    "start": "2055780",
    "end": "2062200"
  },
  {
    "text": "make things better in the long run trust me on that one",
    "start": "2062200",
    "end": "2067020"
  },
  {
    "text": "all right what else do we have well",
    "start": "2068560",
    "end": "2073440"
  },
  {
    "text": "I make it sound like there's a choice but there really isn't it's like a sequential set of slides so I",
    "start": "2073899",
    "end": "2079500"
  },
  {
    "text": "where do we how do we make authorization decisions well we talked about the specifics but we have we have to get the",
    "start": "2079500",
    "end": "2085179"
  },
  {
    "text": "user information somewhere right the user typically authenticates to the Apple to an authentication Service somewhere or an authentication endpoint",
    "start": "2085179",
    "end": "2091839"
  },
  {
    "text": "once we don't authenticate every time we don't provide the user details on every",
    "start": "2091839",
    "end": "2097839"
  },
  {
    "text": "well the user's authentication details on every request we do it once and now we propagate authentication state",
    "start": "2097839",
    "end": "2104980"
  },
  {
    "text": "some people are old enough to remember the concept of session management like whoa 30 sessions well 30 sessions is one",
    "start": "2104980",
    "end": "2112240"
  },
  {
    "text": "way of doing that you can have a Chase session ID it points to a Java session server-side object keeping track of",
    "start": "2112240",
    "end": "2118180"
  },
  {
    "text": "information for this specific session this specific user and we can keep track of the user's authentication State and",
    "start": "2118180",
    "end": "2124480"
  },
  {
    "text": "their roles and their permissions and whatever we want to keep track of and this mechanism is beautiful",
    "start": "2124480",
    "end": "2131260"
  },
  {
    "text": "I'm not joking here this is actually beautiful this is a secure service and environment nobody can really go into",
    "start": "2131260",
    "end": "2136960"
  },
  {
    "text": "the server and modify values in memory or in your cache or whatever you're keeping that",
    "start": "2136960",
    "end": "2142000"
  },
  {
    "text": "this is a solid place to store that data yes it has some drawbacks",
    "start": "2142000",
    "end": "2147700"
  },
  {
    "text": "no it is absolutely not an invalid pattern for apis you can use that in",
    "start": "2147700",
    "end": "2152800"
  },
  {
    "text": "modern applications in fact this better is well supported in many platforms Heroku where you can deploy cloud-based",
    "start": "2152800",
    "end": "2159760"
  },
  {
    "text": "applications has built-in session support for Java using a redis cache",
    "start": "2159760",
    "end": "2166119"
  },
  {
    "text": "is it completely stateless like the major applications are doing like you built Facebook or Netflix no it isn't",
    "start": "2166119",
    "end": "2173079"
  },
  {
    "text": "does it work well for an application with a few hundred or a few thousand users yes it does beautifully and it",
    "start": "2173079",
    "end": "2178900"
  },
  {
    "text": "will make your life extremely easy because you don't have to worry about pushing data to the client",
    "start": "2178900",
    "end": "2184839"
  },
  {
    "text": "about whether you can trust that data when it comes back and how you secure it how you revoke an active session how you log in user out and all of that stuff",
    "start": "2184839",
    "end": "2191500"
  },
  {
    "text": "magically solved by server-side sessions yes they're ugly in some respects yes",
    "start": "2191500",
    "end": "2196660"
  },
  {
    "text": "they are not infinitely scalable but for many applications this perfectly suffices",
    "start": "2196660",
    "end": "2202900"
  },
  {
    "text": "I can't tell you how often I have the case where a customer is building a new app and you're like yeah we want to make",
    "start": "2202900",
    "end": "2208660"
  },
  {
    "text": "the stateless and use shots that we push to decline and this and that but we have these and these challenges like yeah of course you do",
    "start": "2208660",
    "end": "2214660"
  },
  {
    "text": "and my question is how many users do you have like yeah we have in this case it was a very specific application for the",
    "start": "2214660",
    "end": "2220240"
  },
  {
    "text": "customers we have like 50 to 100 users like what the hell are you doing run that with a server-side session on a",
    "start": "2220240",
    "end": "2227500"
  },
  {
    "text": "single server and it's going to work beautifully and you want load balancing that have two which Azure replication it's going to work beautifully saves you",
    "start": "2227500",
    "end": "2233320"
  },
  {
    "text": "a whole bunch of headaches and this actually saved them a couple of days of time in building that simple application",
    "start": "2233320",
    "end": "2239260"
  },
  {
    "text": "just by using proven Concepts and the takeaway here is that traditional web sessions people will tell you that apis",
    "start": "2239260",
    "end": "2245680"
  },
  {
    "text": "can never use cookies and they're wrong as proven by half of the internet",
    "start": "2245680",
    "end": "2250780"
  },
  {
    "text": "actually traditional web sessions are still valid they make your life extremely easy and sometimes you don't",
    "start": "2250780",
    "end": "2256000"
  },
  {
    "text": "need to push it to the extremes but sometimes you do and when you do",
    "start": "2256000",
    "end": "2262540"
  },
  {
    "text": "there's a whole bunch of approaches you can use there's some custom token mechanisms there's a very wrong way of",
    "start": "2262540",
    "end": "2268420"
  },
  {
    "text": "doing it the more better way of doing it and then there's the state of the art or the best practice of doing it using",
    "start": "2268420",
    "end": "2274960"
  },
  {
    "text": "oauth using oauth is not going to make your life easier it's going to make your life harder significantly harder to bid on to",
    "start": "2274960",
    "end": "2283060"
  },
  {
    "text": "be honest starts with figuring out which spec you need to read because there's like a dozen that overlap and deprecate",
    "start": "2283060",
    "end": "2289000"
  },
  {
    "text": "stuff and add new stuff and trust me I've been there for a long time this is not an easy approach but it has benefits",
    "start": "2289000",
    "end": "2295359"
  },
  {
    "text": "because in a lot I'm just going to give you a quick rundown of how it works I'm not going to dive into detail we don't have that much of time that much time",
    "start": "2295359",
    "end": "2302020"
  },
  {
    "text": "here but in oauth clients our users authenticate to an authorization server not the authentication server but the",
    "start": "2302020",
    "end": "2308500"
  },
  {
    "text": "authorization a lot of stuff anyway centralized handling of credentials and client authentication and so on and",
    "start": "2308500",
    "end": "2315160"
  },
  {
    "text": "afterwards they conduct apis with access tokens and that access token represents the",
    "start": "2315160",
    "end": "2320619"
  },
  {
    "text": "authority of the client to act on behalf of user or as a client directly to the API and allows the client to handle",
    "start": "2320619",
    "end": "2327460"
  },
  {
    "text": "other API to handle authorization awesome",
    "start": "2327460",
    "end": "2332338"
  },
  {
    "text": "if you're an API developer now you're happy right tokens oh thank God the stuff about sessions what the hell was",
    "start": "2332500",
    "end": "2338440"
  },
  {
    "text": "that about tokens now everybody's happy good",
    "start": "2338440",
    "end": "2343680"
  },
  {
    "text": "did you know that oauth has two types of tokens you have somebody's nodding yes good you have",
    "start": "2344020",
    "end": "2351280"
  },
  {
    "text": "reference tokens and you have self-contained tokens here's how a reference token works so a reference token is called an access token but it's",
    "start": "2351280",
    "end": "2357940"
  },
  {
    "text": "basically just like a random ID it doesn't contain anything and it points to State kept by the authorization",
    "start": "2357940",
    "end": "2364359"
  },
  {
    "text": "server server side state so even in oauth you have tokens that represent a",
    "start": "2364359",
    "end": "2369700"
  },
  {
    "text": "session ID we just call them an access token because we don't want to call them a session ID but they represent the same thing as a session ID when the API",
    "start": "2369700",
    "end": "2376420"
  },
  {
    "text": "receives that they will have to do token introspection a process where you go back to the authorization server ask like hey I got this ID what does that",
    "start": "2376420",
    "end": "2382839"
  },
  {
    "text": "mean oh yeah here's a bunch of claims thank you and now you can make authorization decisions that's one mode",
    "start": "2382839",
    "end": "2388300"
  },
  {
    "text": "of operation very very similar to server-side session management with the same Security benefits and the same",
    "start": "2388300",
    "end": "2393880"
  },
  {
    "text": "drawbacks just so you know even with modern state-of-the-art approaches we still",
    "start": "2393880",
    "end": "2399520"
  },
  {
    "text": "have server-side state because it's a valid concept of course all the cool kids are doing",
    "start": "2399520",
    "end": "2405700"
  },
  {
    "text": "Json web token so you can also have access tokens in the format of a Json web token where the client gets a jot",
    "start": "2405700",
    "end": "2412180"
  },
  {
    "text": "the job contains all the claims you send that job to the API and the API can verify the signature get the claims out",
    "start": "2412180",
    "end": "2418540"
  },
  {
    "text": "and use those claims to make authorization decisions obviously Better scalability Properties",
    "start": "2418540",
    "end": "2424900"
  },
  {
    "text": "because now there's no direct link to the API and the authorization server there's no heavy communication there and",
    "start": "2424900",
    "end": "2431740"
  },
  {
    "text": "apis can validate tokens independently but this approach has some revocation issues they should be short-lived so",
    "start": "2431740",
    "end": "2438040"
  },
  {
    "text": "because you can't really terminate tokens proactively and so on just so you know that these things exist",
    "start": "2438040",
    "end": "2443680"
  },
  {
    "text": "the takeaway here is basically that you want to analyze your security requirements carefully",
    "start": "2443680",
    "end": "2449920"
  },
  {
    "text": "because sometimes you don't need to go full overboard with things like oads and",
    "start": "2449920",
    "end": "2455140"
  },
  {
    "text": "sometimes you don't want to use Json web tokens but want to use reference tokens and sometimes you'll have to decide and",
    "start": "2455140",
    "end": "2460300"
  },
  {
    "text": "the trade-off is going to be not that clear and you'll have to accept certain risks in favor or in exchange for",
    "start": "2460300",
    "end": "2465940"
  },
  {
    "text": "certain benefits or not and the other way around that's a very important takeaway",
    "start": "2465940",
    "end": "2473220"
  },
  {
    "text": "we've been talking about Json web tokens now so I have to say a couple of things about that",
    "start": "2473859",
    "end": "2479760"
  },
  {
    "text": "Jason web tokens are a mess there's a whole bunch of security pitfalls and vulnerabilities and things to take care",
    "start": "2479980",
    "end": "2485440"
  },
  {
    "text": "of and I don't have the time to talk about them so what I'm going to do is I'm going to give you two references one is a spec I",
    "start": "2485440",
    "end": "2492820"
  },
  {
    "text": "know everybody loves reading RFC so that's good news because this is an RFC number 8725 if you want to know but it's",
    "start": "2492820",
    "end": "2500800"
  },
  {
    "text": "a very consumable RFC it's about Json web tokens and has two meaningful sections there's like the introduction",
    "start": "2500800",
    "end": "2506260"
  },
  {
    "text": "which is whatever section one problems with jaws like just a list with",
    "start": "2506260",
    "end": "2512079"
  },
  {
    "text": "some explanation section two fixing jars like recommendations with",
    "start": "2512079",
    "end": "2517119"
  },
  {
    "text": "explanations that's it there's no weird ascr diagrams and stuff like that it's just like hey here's some problems",
    "start": "2517119",
    "end": "2523000"
  },
  {
    "text": "here's some best practices follow them thank you if you like to read prettier content I've also written an article about Json",
    "start": "2523000",
    "end": "2529119"
  },
  {
    "text": "web token security pitfalls last a year and two months ago so that might be a",
    "start": "2529119",
    "end": "2534760"
  },
  {
    "text": "bit more consumable than RC we have some nice pictures and so on and so on I don't care what you read this is just",
    "start": "2534760",
    "end": "2540040"
  },
  {
    "text": "some pointers but read up on job security make sure you avoid these common pitfalls",
    "start": "2540040",
    "end": "2545320"
  },
  {
    "text": "all right follow jot security best practices",
    "start": "2545320",
    "end": "2551280"
  },
  {
    "text": "that brings us close to lunch I know people are anxious like oh come on I'm",
    "start": "2554200",
    "end": "2559780"
  },
  {
    "text": "hungry are we done done yet almost almost",
    "start": "2559780",
    "end": "2564240"
  },
  {
    "text": "I have another question to ask yes another one what happens when poo goes",
    "start": "2565359",
    "end": "2570760"
  },
  {
    "text": "wrong I'm being recorded here so I have to be careful what happens when something goes wrong",
    "start": "2570760",
    "end": "2576280"
  },
  {
    "text": "far too often when something trivial goes wrong",
    "start": "2576280",
    "end": "2581160"
  },
  {
    "text": "everything breaks when something trivial goes wrong here it means like a full system compromise",
    "start": "2581440",
    "end": "2588040"
  },
  {
    "text": "and that makes no sense at all why on Earth are we running like super",
    "start": "2588040",
    "end": "2594540"
  },
  {
    "text": "unsecure features alongside the main application alongside super trusted features like user authentication and",
    "start": "2594540",
    "end": "2600880"
  },
  {
    "text": "stuff like that like what the hell are we doing compartmentalize your apis",
    "start": "2600880",
    "end": "2606579"
  },
  {
    "text": "they're easy to say in PowerPoint like yeah just split them up like untrusted stuff here and have some boundaries and",
    "start": "2606579",
    "end": "2612460"
  },
  {
    "text": "then the main application apis like and then some boundaries and then the highly sensitive services",
    "start": "2612460",
    "end": "2618099"
  },
  {
    "text": "that's the awesomeness of my job I just have to draw some lines on the slide I'm like dumb you do that I know this is not",
    "start": "2618099",
    "end": "2624640"
  },
  {
    "text": "easy to do in practice I know this is not trivial and that's why we often don't do it but this is your only",
    "start": "2624640",
    "end": "2630280"
  },
  {
    "text": "fighting chance to stop an attack from fully compromising your backend services",
    "start": "2630280",
    "end": "2636040"
  },
  {
    "text": "this is what we need to do to try and contain the out file of an attack because some vulnerabilities are gonna",
    "start": "2636040",
    "end": "2642280"
  },
  {
    "text": "exist and somebody's gonna exploit them at some time and if it happens in this super unimportant search feature in your",
    "start": "2642280",
    "end": "2648700"
  },
  {
    "text": "application you want to be able to tell your customers like yeah we had a problem well best case is we had a",
    "start": "2648700",
    "end": "2654160"
  },
  {
    "text": "problem we don't nobody nothing was compromised so we don't even have to report it that's good and otherwise it's like yeah we had a problem but guess",
    "start": "2654160",
    "end": "2660819"
  },
  {
    "text": "what none of your data was compromised did you ever get an email like that no",
    "start": "2660819",
    "end": "2666339"
  },
  {
    "text": "of course not but this can help you getting there compartmentalization is",
    "start": "2666339",
    "end": "2672460"
  },
  {
    "text": "really important to reduce the impact of a vulnerability and yes it's a pain and no it's not something you just decide in",
    "start": "2672460",
    "end": "2678819"
  },
  {
    "text": "five minutes and do it but it's something you have to work towards in practice and that light I have one more topic to",
    "start": "2678819",
    "end": "2685960"
  },
  {
    "text": "talk about and that is using web application firewalls or API firewalls or API gateways and so on we've been",
    "start": "2685960",
    "end": "2693040"
  },
  {
    "text": "using these devices for a long time as like a first line of defense I always run into them when I do",
    "start": "2693040",
    "end": "2698980"
  },
  {
    "text": "cross-at scripting in my workshop because people are on a corporate networks and they do access attacks on the demo of the training application and",
    "start": "2698980",
    "end": "2705339"
  },
  {
    "text": "the firewall is like uh-uh you can't do crosstrypting then I tell them like here's how you get around that which is so not questionable",
    "start": "2705339",
    "end": "2713200"
  },
  {
    "text": "but no offense the WAFF that they're using is probably pretty stupid so it doesn't really account for much but",
    "start": "2713200",
    "end": "2718839"
  },
  {
    "text": "there's a change here there's a change in API based systems that we're trying or not trying we're moving towards using",
    "start": "2718839",
    "end": "2725619"
  },
  {
    "text": "these devices as actual defenses you can find API gateways that do things like",
    "start": "2725619",
    "end": "2731800"
  },
  {
    "text": "rate limiting or authentication or API gateways that will do enforcement of contracts on",
    "start": "2731800",
    "end": "2738220"
  },
  {
    "text": "requests and responses and that means that they're no longer no longer a first line of defense but they're deep defense",
    "start": "2738220",
    "end": "2745000"
  },
  {
    "text": "for some things the only line of defense and that's by itself not a bad pattern",
    "start": "2745000",
    "end": "2752380"
  },
  {
    "text": "that's good we can do that that's what these products are for but it also means one very important thing you have to make sure the attacker",
    "start": "2752380",
    "end": "2758740"
  },
  {
    "text": "can't get around that waft that Gateway that firewall I have a good image to illustrate that",
    "start": "2758740",
    "end": "2766480"
  },
  {
    "text": "you're not supposed to implement an API Gateway like that that's not very good",
    "start": "2766480",
    "end": "2772680"
  },
  {
    "text": "might work in the UK because it's going to be mother nobody can get through it but in the rest of the world it doesn't",
    "start": "2773560",
    "end": "2778720"
  },
  {
    "text": "rain that often so it shouldn't it should be fairly accessible but seriously",
    "start": "2778720",
    "end": "2784240"
  },
  {
    "text": "this is a real problem modern systems we call those apis let me skip back here we call these applications these apis the",
    "start": "2784240",
    "end": "2790359"
  },
  {
    "text": "origin servers the actual service handling requests and they're not supposed to be exposed to the internet",
    "start": "2790359",
    "end": "2796540"
  },
  {
    "text": "you have to make sure that there's no path around that gateway to access the origin server directly and this is",
    "start": "2796540",
    "end": "2802359"
  },
  {
    "text": "something that comes up quite often in vulnerability reports or in penetration testing reports and so on because once",
    "start": "2802359",
    "end": "2809440"
  },
  {
    "text": "the attacker figures out where the origin server is they can access it directly guess what no rate limits so all of these brute forcing things that",
    "start": "2809440",
    "end": "2815380"
  },
  {
    "text": "you thought were covered are no longer covered like MFA codes like four digits or six digits well brute forcing that is",
    "start": "2815380",
    "end": "2821680"
  },
  {
    "text": "not that hard bam oops all of his stuff these things going wrong so the takeaway",
    "start": "2821680",
    "end": "2827200"
  },
  {
    "text": "here is make sure that if you rely on perimeter level security for the actual security of your",
    "start": "2827200",
    "end": "2833440"
  },
  {
    "text": "applications that it's not bypassable that there's no path around it try to hide origin servers",
    "start": "2833440",
    "end": "2840160"
  },
  {
    "text": "which is not easy by the way so assume that the attacker will always discover where the actual origin server is and",
    "start": "2840160",
    "end": "2846339"
  },
  {
    "text": "make sure the account access it and if they can access it move the defense closer to the API if that's your deployment model where",
    "start": "2846339",
    "end": "2853540"
  },
  {
    "text": "you're like yeah we can't prevent this from happening then guess what you can't do perimeter security because you have to do it closer to the API that's the",
    "start": "2853540",
    "end": "2860440"
  },
  {
    "text": "final takeaway here so now it's up to you my part is done I told you what to",
    "start": "2860440",
    "end": "2865660"
  },
  {
    "text": "do so now you enjoy the rest of the conference first and then on Monday you pick one of these topics and you do them",
    "start": "2865660",
    "end": "2871720"
  },
  {
    "text": "that's how you improve security it's not like like oh yeah that was interesting and then do nothing and the same thing all over again no you take one of these",
    "start": "2871720",
    "end": "2878079"
  },
  {
    "text": "things my recommendation look at your authorization policy open up your API look at your endpoints and",
    "start": "2878079",
    "end": "2883960"
  },
  {
    "text": "see to stand what's going on here can I tell if this is a secure policy if the answer",
    "start": "2883960",
    "end": "2889540"
  },
  {
    "text": "is no well maybe try again on Tuesday because I don't know what happens on Monday in your world but if you can't tell this",
    "start": "2889540",
    "end": "2898560"
  },
  {
    "text": "improve it your policy is not auditable enough refactor it to make sure it",
    "start": "2898720",
    "end": "2903940"
  },
  {
    "text": "becomes more clear apply what we talked about here write security tests to verify your authorization improve your",
    "start": "2903940",
    "end": "2909760"
  },
  {
    "text": "job handling build open API specifications there's so many takeaways use that information later on to",
    "start": "2909760",
    "end": "2916900"
  },
  {
    "text": "review your systems all right if you go to my website you'll find the slides there as well if you want to learn more",
    "start": "2916900",
    "end": "2923560"
  },
  {
    "text": "hire me for a security Workshop I can go into plenty of detail on each of these topics if you want to I have some online",
    "start": "2923560",
    "end": "2929319"
  },
  {
    "text": "courses as well on my website so you can look at that and with that I basically want to say",
    "start": "2929319",
    "end": "2935500"
  },
  {
    "text": "thank you for being here thank you for listening thank you for staying which",
    "start": "2935500",
    "end": "2940540"
  },
  {
    "text": "usually is not a problem so that's good um I hope you enjoyed it and we have a few",
    "start": "2940540",
    "end": "2945880"
  },
  {
    "text": "minutes for questions if you're not too hungry there's a mic up front so you can come up front ask your question so it's",
    "start": "2945880",
    "end": "2951160"
  },
  {
    "text": "also on the live stream and then afterwards we can enjoy lunch thank you [Applause]",
    "start": "2951160",
    "end": "2966949"
  },
  {
    "text": "are there any questions yes yeah in a few words what's uh option uh",
    "start": "2967540",
    "end": "2976660"
  },
  {
    "text": "if we can't hard code API keys in the client how do we",
    "start": "2976660",
    "end": "2982900"
  },
  {
    "text": "make sure that the client has access to it yeah it depends on the clients what that",
    "start": "2982900",
    "end": "2989260"
  },
  {
    "text": "means if your client runs on a user device then no you can't hard code it because they will get it out anyway if",
    "start": "2989260",
    "end": "2995619"
  },
  {
    "text": "your client runs in a secure environment such as a server-side application you can provide that through environment",
    "start": "2995619",
    "end": "3001380"
  },
  {
    "text": "variables or whatever comfy so that's server-side environments easy to handle user device is not that easy",
    "start": "3001380",
    "end": "3007220"
  },
  {
    "text": "very often user clients running on user devices they only need access on behalf of a user you",
    "start": "3007220",
    "end": "3014280"
  },
  {
    "text": "don't really care which client it is you care which user it is so in that case the user would follow an authentication",
    "start": "3014280",
    "end": "3019380"
  },
  {
    "text": "step and the client would get a some form of token representing that authentication and can use that one to",
    "start": "3019380",
    "end": "3025680"
  },
  {
    "text": "authenticate calls to the API if you can do that then the whole problem goes away because you don't really need to authenticate a specific client just the",
    "start": "3025680",
    "end": "3032400"
  },
  {
    "text": "user using the client and then for client-specific authentication if you really want to do",
    "start": "3032400",
    "end": "3037800"
  },
  {
    "text": "that on user devices it involves generating a secret on the device and",
    "start": "3037800",
    "end": "3043740"
  },
  {
    "text": "then having a registration step where you shared it with the API so for example a mobile app could generate a keeper and then register itself with the",
    "start": "3043740",
    "end": "3050940"
  },
  {
    "text": "API through under registration endpoint which is unprotected but that's how it is like hey I'm this client here's my",
    "start": "3050940",
    "end": "3057480"
  },
  {
    "text": "public key and whenever I sign something with my private key you know it's me and then you can associate identity with",
    "start": "3057480",
    "end": "3063359"
  },
  {
    "text": "that and you can use that for authentication a registration step in a corporate setup that typically is",
    "start": "3063359",
    "end": "3068940"
  },
  {
    "text": "something where you have to register your device once with like a code you get from somewhere you copy pasted something stuff like that could work as",
    "start": "3068940",
    "end": "3075300"
  },
  {
    "text": "well scanning QR codes that's that's how you do it you generate secrets on the device and use a registration step to",
    "start": "3075300",
    "end": "3081359"
  },
  {
    "text": "link the client to the secret on the API and from that point on you have your Authentication",
    "start": "3081359",
    "end": "3087859"
  },
  {
    "text": "awesome that was a good question thank you for that anybody else",
    "start": "3088079",
    "end": "3095059"
  },
  {
    "text": "well you can always grab me during lunch because I'm also hungry so I'll see you downstairs enjoy the conference",
    "start": "3097440",
    "end": "3105740"
  },
  {
    "text": "okay",
    "start": "3106079",
    "end": "3108500"
  }
]