[
  {
    "text": "welcome so while doing the slides I was",
    "start": "3160",
    "end": "6839"
  },
  {
    "text": "looking at this title and I thought it",
    "start": "6839",
    "end": "8280"
  },
  {
    "text": "was a bit too long uh",
    "start": "8280",
    "end": "11120"
  },
  {
    "text": "so I thought of actually changing it a",
    "start": "11120",
    "end": "14559"
  },
  {
    "text": "bit so today I'm going to talk about",
    "start": "14559",
    "end": "17439"
  },
  {
    "text": "debugging uh while having performance in",
    "start": "17439",
    "end": "20160"
  },
  {
    "text": "mind and while doing it using real-time",
    "start": "20160",
    "end": "25320"
  },
  {
    "text": "statistics so I'm Hugo I'm a Portuguese",
    "start": "25320",
    "end": "28880"
  },
  {
    "text": "developer based in Oslo",
    "start": "28880",
    "end": "30759"
  },
  {
    "text": "I work for a company called varnish",
    "start": "30759",
    "end": "33960"
  },
  {
    "text": "software where I'm have the title of",
    "start": "33960",
    "end": "36000"
  },
  {
    "text": "product",
    "start": "36000",
    "end": "36840"
  },
  {
    "text": "manager for those who don't know varnish",
    "start": "36840",
    "end": "39000"
  },
  {
    "text": "software is the company behind the open",
    "start": "39000",
    "end": "41120"
  },
  {
    "text": "source uh reverse HTTP proxy varnish",
    "start": "41120",
    "end": "44360"
  },
  {
    "text": "cach uh can you raise your hands if",
    "start": "44360",
    "end": "46120"
  },
  {
    "text": "you've heard of varnish before okay good",
    "start": "46120",
    "end": "50600"
  },
  {
    "text": "great",
    "start": "50600",
    "end": "52160"
  },
  {
    "text": "so when we talk about uh web performance",
    "start": "52160",
    "end": "56280"
  },
  {
    "text": "most of us think about speed uh that's",
    "start": "56280",
    "end": "59359"
  },
  {
    "text": "the first thing that the major majority",
    "start": "59359",
    "end": "61840"
  },
  {
    "text": "of us has it comes to mind and then we",
    "start": "61840",
    "end": "65158"
  },
  {
    "text": "have several things in this space we",
    "start": "65159",
    "end": "66840"
  },
  {
    "text": "have AB testing they can help you",
    "start": "66840",
    "end": "68560"
  },
  {
    "text": "monitoring skillability we have",
    "start": "68560",
    "end": "70320"
  },
  {
    "text": "architecture we have all these buzzwords",
    "start": "70320",
    "end": "72640"
  },
  {
    "text": "but in the end of the day it all is cost",
    "start": "72640",
    "end": "75720"
  },
  {
    "text": "cost for our users cost for us that time",
    "start": "75720",
    "end": "79400"
  },
  {
    "text": "uh servers Etc",
    "start": "79400",
    "end": "82200"
  },
  {
    "text": "so today I'm going to approach the web",
    "start": "82200",
    "end": "85640"
  },
  {
    "text": "performance more into like a debugging",
    "start": "85640",
    "end": "88479"
  },
  {
    "text": "uh kind of approach",
    "start": "88479",
    "end": "91360"
  },
  {
    "text": "so this is probably familiar to to you",
    "start": "91360",
    "end": "95520"
  },
  {
    "text": "to most of you this is the dev tools of",
    "start": "95520",
    "end": "97960"
  },
  {
    "text": "chrome and this is basically the network",
    "start": "97960",
    "end": "100320"
  },
  {
    "text": "tab where you can see the calls for the",
    "start": "100320",
    "end": "102560"
  },
  {
    "text": "backend so if you're a front end",
    "start": "102560",
    "end": "104399"
  },
  {
    "text": "developer you've probably used these a",
    "start": "104399",
    "end": "106119"
  },
  {
    "text": "lot so you see the different calls the",
    "start": "106119",
    "end": "107960"
  },
  {
    "text": "the time it takes for each of uh the",
    "start": "107960",
    "end": "111240"
  },
  {
    "text": "requests to go to the back",
    "start": "111240",
    "end": "112799"
  },
  {
    "text": "end and here you have uh flame shart",
    "start": "112799",
    "end": "117200"
  },
  {
    "text": "which is basically uh the calls the call",
    "start": "117200",
    "end": "119640"
  },
  {
    "text": "stack in JavaScript so these are that",
    "start": "119640",
    "end": "122399"
  },
  {
    "text": "this is typically where a developer has",
    "start": "122399",
    "end": "124439"
  },
  {
    "text": "a problem in their web application he",
    "start": "124439",
    "end": "126640"
  },
  {
    "text": "goes to and of course if you're more of",
    "start": "126640",
    "end": "129000"
  },
  {
    "text": "a devops uh c m guy you go into logging",
    "start": "129000",
    "end": "132760"
  },
  {
    "text": "your server and you check logs here I",
    "start": "132760",
    "end": "135640"
  },
  {
    "text": "mean this is just a aache log uh simple",
    "start": "135640",
    "end": "139239"
  },
  {
    "text": "so I had a a Siege script running and",
    "start": "139239",
    "end": "141360"
  },
  {
    "text": "then this is just an example of",
    "start": "141360",
    "end": "144879"
  },
  {
    "text": "that but uh I want to diverge a bit from",
    "start": "144879",
    "end": "148319"
  },
  {
    "text": "the debugging to tell a small story and",
    "start": "148319",
    "end": "151040"
  },
  {
    "text": "then come back and of course with that",
    "start": "151040",
    "end": "154239"
  },
  {
    "text": "it comes a solution so this is a rotary",
    "start": "154239",
    "end": "159120"
  },
  {
    "text": "printing",
    "start": "159120",
    "end": "160239"
  },
  {
    "text": "machine and before it was invented",
    "start": "160239",
    "end": "163319"
  },
  {
    "text": "typically uh people would uh assemble",
    "start": "163319",
    "end": "166319"
  },
  {
    "text": "small letters or words of senten in a",
    "start": "166319",
    "end": "168080"
  },
  {
    "text": "sheet of paper against a sheet of paper",
    "start": "168080",
    "end": "169400"
  },
  {
    "text": "with ink and then print it was a very",
    "start": "169400",
    "end": "172159"
  },
  {
    "text": "long and tedious uh process and when",
    "start": "172159",
    "end": "175239"
  },
  {
    "text": "this printer was invented uh a a",
    "start": "175239",
    "end": "178280"
  },
  {
    "text": "cylinder with a momentum",
    "start": "178280",
    "end": "181080"
  },
  {
    "text": "allowed it to uh print copies very very",
    "start": "181080",
    "end": "184400"
  },
  {
    "text": "fast and save a lot of",
    "start": "184400",
    "end": "187680"
  },
  {
    "text": "time so varnish cach is a bit a rotar",
    "start": "187680",
    "end": "192040"
  },
  {
    "text": "printer for the web it all it it gives",
    "start": "192040",
    "end": "194560"
  },
  {
    "text": "it serves copies of your content really",
    "start": "194560",
    "end": "197159"
  },
  {
    "text": "fast W without uh going to the back",
    "start": "197159",
    "end": "201840"
  },
  {
    "text": "end so typically you have",
    "start": "201840",
    "end": "205720"
  },
  {
    "text": "uh something like this your client's",
    "start": "205720",
    "end": "208560"
  },
  {
    "text": "doing requests and then you're servers",
    "start": "208560",
    "end": "210200"
  },
  {
    "text": "doing responses fish is pretty good at",
    "start": "210200",
    "end": "213439"
  },
  {
    "text": "two things it's pretty good at allowing",
    "start": "213439",
    "end": "217280"
  },
  {
    "text": "you to solve technical uh problems like",
    "start": "217280",
    "end": "220120"
  },
  {
    "text": "uh you have resource uh starvation Etc",
    "start": "220120",
    "end": "223360"
  },
  {
    "text": "and also it's pretty good at",
    "start": "223360",
    "end": "226080"
  },
  {
    "text": "speed varnish uh sits between your uh",
    "start": "226080",
    "end": "229799"
  },
  {
    "text": "clients or your servers and then here",
    "start": "229799",
    "end": "233120"
  },
  {
    "text": "you can see that actually then strip",
    "start": "233120",
    "end": "235120"
  },
  {
    "text": "down the backend request backend",
    "start": "235120",
    "end": "236879"
  },
  {
    "text": "response Etc and the logic goes inside",
    "start": "236879",
    "end": "239840"
  },
  {
    "text": "that small box",
    "start": "239840",
    "end": "243120"
  },
  {
    "text": "there so now I'm going to explain a bit",
    "start": "243760",
    "end": "246400"
  },
  {
    "text": "how the process works so when your",
    "start": "246400",
    "end": "248400"
  },
  {
    "text": "request",
    "start": "248400",
    "end": "249519"
  },
  {
    "text": "comes varnish uh fetches uh the content",
    "start": "249519",
    "end": "254439"
  },
  {
    "text": "that's requested from the back end it",
    "start": "254439",
    "end": "256799"
  },
  {
    "text": "then makes a copy in memory and serves",
    "start": "256799",
    "end": "259680"
  },
  {
    "text": "that same content to your client request",
    "start": "259680",
    "end": "262000"
  },
  {
    "text": "to your",
    "start": "262000",
    "end": "263199"
  },
  {
    "text": "client the next time if based on the",
    "start": "263199",
    "end": "266040"
  },
  {
    "text": "same premise fish will serve that",
    "start": "266040",
    "end": "268479"
  },
  {
    "text": "content from memory into the client",
    "start": "268479",
    "end": "270919"
  },
  {
    "text": "avoiding calls to the back end of course",
    "start": "270919",
    "end": "272759"
  },
  {
    "text": "it needs to be uh with the same premise",
    "start": "272759",
    "end": "275479"
  },
  {
    "text": "but this is a very simple approach you",
    "start": "275479",
    "end": "277120"
  },
  {
    "text": "can do much more than",
    "start": "277120",
    "end": "279320"
  },
  {
    "text": "this",
    "start": "279320",
    "end": "282320"
  },
  {
    "text": "so uh now I'm going to talk about",
    "start": "284240",
    "end": "286440"
  },
  {
    "text": "varnish configuration language which",
    "start": "286440",
    "end": "288039"
  },
  {
    "text": "allows you to",
    "start": "288039",
    "end": "289240"
  },
  {
    "text": "configure this logic in your varnish",
    "start": "289240",
    "end": "293720"
  },
  {
    "text": "server this is a state machine of the",
    "start": "293720",
    "end": "297639"
  },
  {
    "text": "varnish uh uh language so don't I'm not",
    "start": "297639",
    "end": "302440"
  },
  {
    "text": "going to go through all the detail it's",
    "start": "302440",
    "end": "304639"
  },
  {
    "text": "quite complex but it's just to have",
    "start": "304639",
    "end": "306199"
  },
  {
    "text": "overview how many things are going on",
    "start": "306199",
    "end": "308080"
  },
  {
    "text": "inside of Orange",
    "start": "308080",
    "end": "309479"
  },
  {
    "text": "server and all these calls there all",
    "start": "309479",
    "end": "312360"
  },
  {
    "text": "these routines are uh built-in sub",
    "start": "312360",
    "end": "315880"
  },
  {
    "text": "routines and uh the good thing in this",
    "start": "315880",
    "end": "319160"
  },
  {
    "text": "is that in each of these sub routines",
    "start": "319160",
    "end": "321360"
  },
  {
    "text": "there are objects that we can manipulate",
    "start": "321360",
    "end": "324160"
  },
  {
    "text": "and um change so let's say HTP heads you",
    "start": "324160",
    "end": "328840"
  },
  {
    "text": "can pretty much do anything you want",
    "start": "328840",
    "end": "330720"
  },
  {
    "text": "inside these routines and there are",
    "start": "330720",
    "end": "332000"
  },
  {
    "text": "routines dedicated to the front end and",
    "start": "332000",
    "end": "334759"
  },
  {
    "text": "to the back end or I mean to the client",
    "start": "334759",
    "end": "336880"
  },
  {
    "text": "side and to the back end side",
    "start": "336880",
    "end": "339680"
  },
  {
    "text": "sorry",
    "start": "339680",
    "end": "342000"
  },
  {
    "text": "so now going back to the",
    "start": "342000",
    "end": "345240"
  },
  {
    "text": "logging uh the varnish log Works in a",
    "start": "345240",
    "end": "347960"
  },
  {
    "text": "bit different than other uh servers or",
    "start": "347960",
    "end": "351919"
  },
  {
    "text": "web servers so the varnish log is in",
    "start": "351919",
    "end": "354479"
  },
  {
    "text": "memory it's pretty much 80 megab and it",
    "start": "354479",
    "end": "358520"
  },
  {
    "text": "has the structure of a ring buffer so it",
    "start": "358520",
    "end": "360560"
  },
  {
    "text": "uses a share memory log and by this we",
    "start": "360560",
    "end": "363800"
  },
  {
    "text": "avoid uh writing to file and it's quite",
    "start": "363800",
    "end": "366960"
  },
  {
    "text": "fast and uh I mean in files you have",
    "start": "366960",
    "end": "370680"
  },
  {
    "text": "problems where you it's pretty hard to",
    "start": "370680",
    "end": "374240"
  },
  {
    "text": "uh to write to the file in terms of the",
    "start": "374240",
    "end": "378560"
  },
  {
    "text": "logic and then sequence and then I/O Etc",
    "start": "378560",
    "end": "381720"
  },
  {
    "text": "so there's and most importantly it's",
    "start": "381720",
    "end": "384120"
  },
  {
    "text": "enabled by default so when you have a",
    "start": "384120",
    "end": "387000"
  },
  {
    "text": "problem in your website typically you go",
    "start": "387000",
    "end": "389240"
  },
  {
    "text": "back and oh now I need to enable some",
    "start": "389240",
    "end": "391680"
  },
  {
    "text": "logging or extra logging to figure out",
    "start": "391680",
    "end": "393680"
  },
  {
    "text": "what's going on in varnish that logging",
    "start": "393680",
    "end": "395960"
  },
  {
    "text": "is always happening so you don't need to",
    "start": "395960",
    "end": "397639"
  },
  {
    "text": "go back and figuring out uh like try to",
    "start": "397639",
    "end": "400840"
  },
  {
    "text": "replicate the problem it's already",
    "start": "400840",
    "end": "403520"
  },
  {
    "text": "there so this is an example of a varnish",
    "start": "403520",
    "end": "407960"
  },
  {
    "text": "log on the left you have the varnish log",
    "start": "407960",
    "end": "411360"
  },
  {
    "text": "more to the client side and in the right",
    "start": "411360",
    "end": "415160"
  },
  {
    "text": "more into the back end but in fact this",
    "start": "415160",
    "end": "418120"
  },
  {
    "text": "is a full uh stream of",
    "start": "418120",
    "end": "421479"
  },
  {
    "text": "data uh up there in request you have an",
    "start": "421479",
    "end": "425520"
  },
  {
    "text": "ID so that ID allows us to group the",
    "start": "425520",
    "end": "428879"
  },
  {
    "text": "full request from uh the client request",
    "start": "428879",
    "end": "432479"
  },
  {
    "text": "back end and coming back in a uh a full",
    "start": "432479",
    "end": "435560"
  },
  {
    "text": "log where you can see pretty much what's",
    "start": "435560",
    "end": "438000"
  },
  {
    "text": "what's",
    "start": "438000",
    "end": "438759"
  },
  {
    "text": "happening and this is happening like uh",
    "start": "438759",
    "end": "441599"
  },
  {
    "text": "it's very fast and it's happening in",
    "start": "441599",
    "end": "442840"
  },
  {
    "text": "real time of course if you have a lot of",
    "start": "442840",
    "end": "445800"
  },
  {
    "text": "data uh because we have this structure",
    "start": "445800",
    "end": "448280"
  },
  {
    "text": "of ring buffer after a while",
    "start": "448280",
    "end": "450160"
  },
  {
    "text": "it gets erased but still 80 megab it's",
    "start": "450160",
    "end": "453199"
  },
  {
    "text": "it's a lot of a lot of data and all of",
    "start": "453199",
    "end": "455879"
  },
  {
    "text": "this is quable so you can query pretty",
    "start": "455879",
    "end": "459240"
  },
  {
    "text": "much everything that's there these",
    "start": "459240",
    "end": "461039"
  },
  {
    "text": "objects you can query and and uh extract",
    "start": "461039",
    "end": "465919"
  },
  {
    "text": "them and here is something that we have",
    "start": "465919",
    "end": "468479"
  },
  {
    "text": "also which is reads also from the share",
    "start": "468479",
    "end": "470520"
  },
  {
    "text": "memory log which is the varnish and CSA",
    "start": "470520",
    "end": "472960"
  },
  {
    "text": "but here is more like a a patchy kind of",
    "start": "472960",
    "end": "475479"
  },
  {
    "text": "approach still configurable you can",
    "start": "475479",
    "end": "477720"
  },
  {
    "text": "still configure what what's there but",
    "start": "477720",
    "end": "480400"
  },
  {
    "text": "it's more of a traditional",
    "start": "480400",
    "end": "482800"
  },
  {
    "text": "logging",
    "start": "482800",
    "end": "484400"
  },
  {
    "text": "so why varnish like why use varnish it's",
    "start": "484400",
    "end": "488800"
  },
  {
    "text": "it's really fast it's it's used by I",
    "start": "488800",
    "end": "492560"
  },
  {
    "text": "checked yesterday like 2.5 million",
    "start": "492560",
    "end": "494280"
  },
  {
    "text": "websites in the world typically big",
    "start": "494280",
    "end": "497199"
  },
  {
    "text": "websites it you can change your",
    "start": "497199",
    "end": "499000"
  },
  {
    "text": "configuration on fly so you don't need",
    "start": "499000",
    "end": "500599"
  },
  {
    "text": "to restart it you just need to change",
    "start": "500599",
    "end": "503240"
  },
  {
    "text": "your vcl and uh apply the configuration",
    "start": "503240",
    "end": "506800"
  },
  {
    "text": "and the the way the logging Works don't",
    "start": "506800",
    "end": "508919"
  },
  {
    "text": "doesn't slow down the core",
    "start": "508919",
    "end": "511399"
  },
  {
    "text": "functionality so that's that's from our",
    "start": "511399",
    "end": "515360"
  },
  {
    "text": "point of view is very",
    "start": "515360",
    "end": "516640"
  },
  {
    "text": "interesting and because everything uh",
    "start": "516640",
    "end": "519599"
  },
  {
    "text": "that's HTTP goes through varnish you can",
    "start": "519599",
    "end": "521839"
  },
  {
    "text": "do a lot with",
    "start": "521839",
    "end": "524440"
  },
  {
    "text": "it",
    "start": "526720",
    "end": "528600"
  },
  {
    "text": "so now I want to talk about how we at",
    "start": "528600",
    "end": "531920"
  },
  {
    "text": "varish software use the power of varnish",
    "start": "531920",
    "end": "534399"
  },
  {
    "text": "log to build something something",
    "start": "534399",
    "end": "537959"
  },
  {
    "text": "else like",
    "start": "537959",
    "end": "540519"
  },
  {
    "text": "we call it varnish custom statistics",
    "start": "540519",
    "end": "542959"
  },
  {
    "text": "which is a inmemory database that Pro",
    "start": "542959",
    "end": "546600"
  },
  {
    "text": "processes varnish log and creates time",
    "start": "546600",
    "end": "550279"
  },
  {
    "text": "series so this is the architecture of uh",
    "start": "550279",
    "end": "555640"
  },
  {
    "text": "uh VCS varnish custom",
    "start": "555640",
    "end": "557839"
  },
  {
    "text": "statistics so you have your varnish",
    "start": "557839",
    "end": "560120"
  },
  {
    "text": "servers and then the share memory and",
    "start": "560120",
    "end": "562760"
  },
  {
    "text": "then you have this thing which which we",
    "start": "562760",
    "end": "564240"
  },
  {
    "text": "call the probe the probe then reads from",
    "start": "564240",
    "end": "567399"
  },
  {
    "text": "the share memory log and sends the data",
    "start": "567399",
    "end": "569519"
  },
  {
    "text": "to the VCS through Zer mq then VCS does",
    "start": "569519",
    "end": "573040"
  },
  {
    "text": "all the aggregation in Time series and",
    "start": "573040",
    "end": "575240"
  },
  {
    "text": "exposes adjacent",
    "start": "575240",
    "end": "577800"
  },
  {
    "text": "API basically this VCS probe reads from",
    "start": "577800",
    "end": "581399"
  },
  {
    "text": "the share memory log through these vcl",
    "start": "581399",
    "end": "583839"
  },
  {
    "text": "based keys that we write in the vcl that",
    "start": "583839",
    "end": "586040"
  },
  {
    "text": "configuration language and then it sends",
    "start": "586040",
    "end": "588519"
  },
  {
    "text": "it to the the VCS",
    "start": "588519",
    "end": "590600"
  },
  {
    "text": "server",
    "start": "590600",
    "end": "592240"
  },
  {
    "text": "so I'm going to give some examples in",
    "start": "592240",
    "end": "594880"
  },
  {
    "text": "how to use",
    "start": "594880",
    "end": "596079"
  },
  {
    "text": "them so for instance this is a typical",
    "start": "596079",
    "end": "599760"
  },
  {
    "text": "uh routine like a vcl receive is the",
    "start": "599760",
    "end": "601720"
  },
  {
    "text": "first routine that's get triggered when",
    "start": "601720",
    "end": "603279"
  },
  {
    "text": "the request comes and here uh just",
    "start": "603279",
    "end": "606440"
  },
  {
    "text": "checking the user agent uh HTTP header",
    "start": "606440",
    "end": "609320"
  },
  {
    "text": "and doing a regular uh expression",
    "start": "609320",
    "end": "611480"
  },
  {
    "text": "matching with Modzilla and then we set a",
    "start": "611480",
    "end": "613959"
  },
  {
    "text": "key uh that we we called user agents and",
    "start": "613959",
    "end": "617480"
  },
  {
    "text": "then for mazil and then we do some other",
    "start": "617480",
    "end": "619320"
  },
  {
    "text": "things and we could even do more uh",
    "start": "619320",
    "end": "622000"
  },
  {
    "text": "crazy things with the regular",
    "start": "622000",
    "end": "623600"
  },
  {
    "text": "Expressions if you have a crazy user",
    "start": "623600",
    "end": "625440"
  },
  {
    "text": "agent that you want to track Etc this is",
    "start": "625440",
    "end": "627959"
  },
  {
    "text": "a just a simple example",
    "start": "627959",
    "end": "630279"
  },
  {
    "text": "and the output would be something like",
    "start": "630279",
    "end": "632680"
  },
  {
    "text": "this uh this is actually um uh a Time",
    "start": "632680",
    "end": "638000"
  },
  {
    "text": "series like a bucket of data and you can",
    "start": "638000",
    "end": "641079"
  },
  {
    "text": "actually choose how much uh how much",
    "start": "641079",
    "end": "644959"
  },
  {
    "text": "data that bucket has like 10 seconds 30",
    "start": "644959",
    "end": "647880"
  },
  {
    "text": "seconds Etc and by default you get all",
    "start": "647880",
    "end": "650839"
  },
  {
    "text": "these counters and the interesting bit",
    "start": "650839",
    "end": "653360"
  },
  {
    "text": "here for instance is the time for time",
    "start": "653360",
    "end": "656240"
  },
  {
    "text": "to First Bite Miss and hit is very",
    "start": "656240",
    "end": "658440"
  },
  {
    "text": "important because you can figure out how",
    "start": "658440",
    "end": "660760"
  },
  {
    "text": "fast we are delivering the first bite to",
    "start": "660760",
    "end": "663680"
  },
  {
    "text": "your client also uh if you notice here",
    "start": "663680",
    "end": "666760"
  },
  {
    "text": "we have the HTTP codes like let's say in",
    "start": "666760",
    "end": "669320"
  },
  {
    "text": "the 400 range you have in this example",
    "start": "669320",
    "end": "672279"
  },
  {
    "text": "there were 82",
    "start": "672279",
    "end": "673959"
  },
  {
    "text": "83 uh uh request that got a 400 so this",
    "start": "673959",
    "end": "678240"
  },
  {
    "text": "is interesting in terms of",
    "start": "678240",
    "end": "681120"
  },
  {
    "text": "debugging uh so you could in real time",
    "start": "681120",
    "end": "684440"
  },
  {
    "text": "check that there's something wrong and",
    "start": "684440",
    "end": "686959"
  },
  {
    "text": "you can take action",
    "start": "686959",
    "end": "690720"
  },
  {
    "text": "here for an example uh it's the top 400",
    "start": "691160",
    "end": "694360"
  },
  {
    "text": "range errors uh that's the 10 for the",
    "start": "694360",
    "end": "698920"
  },
  {
    "text": "top 10 and then uh for the last five",
    "start": "698920",
    "end": "701320"
  },
  {
    "text": "buckets in this case my example was",
    "start": "701320",
    "end": "703560"
  },
  {
    "text": "running uh buckets of 30 seconds so this",
    "start": "703560",
    "end": "707560"
  },
  {
    "text": "is inde dependently of the key that we",
    "start": "707560",
    "end": "711920"
  },
  {
    "text": "using so time series time series are",
    "start": "711920",
    "end": "715880"
  },
  {
    "text": "really a a good way of uh getting this",
    "start": "715880",
    "end": "718639"
  },
  {
    "text": "data it all happens in real time it's uh",
    "start": "718639",
    "end": "721800"
  },
  {
    "text": "let's say around 1 second so it's not",
    "start": "721800",
    "end": "724399"
  },
  {
    "text": "real real time but almost there so we",
    "start": "724399",
    "end": "727079"
  },
  {
    "text": "like to say to call it real time and",
    "start": "727079",
    "end": "729639"
  },
  {
    "text": "because of the power of the",
    "start": "729639",
    "end": "730639"
  },
  {
    "text": "configuration of varnish it's real",
    "start": "730639",
    "end": "733600"
  },
  {
    "text": "flexible so this is um was more a simple",
    "start": "733600",
    "end": "738399"
  },
  {
    "text": "example but now I'm going to uh give you",
    "start": "738399",
    "end": "740680"
  },
  {
    "text": "a more uh of a how to use this because I",
    "start": "740680",
    "end": "743800"
  },
  {
    "text": "mean this is nice it works fast Etc but",
    "start": "743800",
    "end": "747519"
  },
  {
    "text": "there is no real value in it so we can",
    "start": "747519",
    "end": "750839"
  },
  {
    "text": "do a lot of things with it uh I've I'm",
    "start": "750839",
    "end": "753440"
  },
  {
    "text": "covering some examples but we could do",
    "start": "753440",
    "end": "755480"
  },
  {
    "text": "like AB testing uh so we can measure the",
    "start": "755480",
    "end": "757920"
  },
  {
    "text": "performance in real time of different",
    "start": "757920",
    "end": "759680"
  },
  {
    "text": "contents and then decide what to to",
    "start": "759680",
    "end": "763199"
  },
  {
    "text": "publish we can try conversion rates on",
    "start": "763199",
    "end": "765720"
  },
  {
    "text": "uh online Publications uh which so for",
    "start": "765720",
    "end": "770240"
  },
  {
    "text": "instance write articles more in a",
    "start": "770240",
    "end": "772639"
  },
  {
    "text": "subject can see the audience is engage",
    "start": "772639",
    "end": "774440"
  },
  {
    "text": "in a subject so you get your editorial",
    "start": "774440",
    "end": "776800"
  },
  {
    "text": "team to write more content to that",
    "start": "776800",
    "end": "778920"
  },
  {
    "text": "subject object and also for instance",
    "start": "778920",
    "end": "781040"
  },
  {
    "text": "scouting users per video stream we have",
    "start": "781040",
    "end": "783279"
  },
  {
    "text": "people using it for checking what's the",
    "start": "783279",
    "end": "785480"
  },
  {
    "text": "most popular segment in a video Etc",
    "start": "785480",
    "end": "787880"
  },
  {
    "text": "things like",
    "start": "787880",
    "end": "789120"
  },
  {
    "text": "that",
    "start": "789120",
    "end": "790839"
  },
  {
    "text": "so uh for a testing for instance we",
    "start": "790839",
    "end": "794120"
  },
  {
    "text": "would use uh vcl like this first up",
    "start": "794120",
    "end": "797880"
  },
  {
    "text": "there let me see if I have yeah so here",
    "start": "797880",
    "end": "801079"
  },
  {
    "text": "we would just clean these custom HTTP",
    "start": "801079",
    "end": "803680"
  },
  {
    "text": "add that we create we will create down",
    "start": "803680",
    "end": "806360"
  },
  {
    "text": "here and then for every single request",
    "start": "806360",
    "end": "808800"
  },
  {
    "text": "that DL matches Fu we randomly uh create",
    "start": "808800",
    "end": "812560"
  },
  {
    "text": "this A or B we set the Heather to either",
    "start": "812560",
    "end": "815880"
  },
  {
    "text": "A or B and then to the client we if",
    "start": "815880",
    "end": "820600"
  },
  {
    "text": "there is this AB group seted we create a",
    "start": "820600",
    "end": "823600"
  },
  {
    "text": "cookie that lasts for 60 seconds with",
    "start": "823600",
    "end": "826519"
  },
  {
    "text": "the name of the",
    "start": "826519",
    "end": "828839"
  },
  {
    "text": "group the next step is actually to check",
    "start": "828839",
    "end": "832759"
  },
  {
    "text": "for that cookie and if the cookie is not",
    "start": "832759",
    "end": "835560"
  },
  {
    "text": "set to the previous uh I but if the",
    "start": "835560",
    "end": "840120"
  },
  {
    "text": "cookie is set just uh make make sure you",
    "start": "840120",
    "end": "843360"
  },
  {
    "text": "set it in Heather and then here we we",
    "start": "843360",
    "end": "847279"
  },
  {
    "text": "creates a key that logs that header so",
    "start": "847279",
    "end": "851000"
  },
  {
    "text": "what what this line is actually doing is",
    "start": "851000",
    "end": "853440"
  },
  {
    "text": "inserting that key in the varnish log so",
    "start": "853440",
    "end": "856920"
  },
  {
    "text": "the varnish log I just showed there's a",
    "start": "856920",
    "end": "858880"
  },
  {
    "text": "a stream of data that's constantly going",
    "start": "858880",
    "end": "861320"
  },
  {
    "text": "and then we just add a key with a header",
    "start": "861320",
    "end": "863240"
  },
  {
    "text": "and then when we query it we are able to",
    "start": "863240",
    "end": "866440"
  },
  {
    "text": "group it and actually figure out what's",
    "start": "866440",
    "end": "868279"
  },
  {
    "text": "going on in real time and here as well I",
    "start": "868279",
    "end": "871600"
  },
  {
    "text": "can I I use the cookie to create a",
    "start": "871600",
    "end": "874040"
  },
  {
    "text": "unique session ID so I can even count",
    "start": "874040",
    "end": "876440"
  },
  {
    "text": "how many different sessions I'm",
    "start": "876440",
    "end": "880279"
  },
  {
    "text": "having another example is something that",
    "start": "880480",
    "end": "883759"
  },
  {
    "text": "uh online Publications use so this graph",
    "start": "883759",
    "end": "888759"
  },
  {
    "text": "on the bottom the x- axis the the now",
    "start": "888759",
    "end": "891759"
  },
  {
    "text": "moment is the right to the right so the",
    "start": "891759",
    "end": "896320"
  },
  {
    "text": "so imagine that this is like the last 30",
    "start": "896320",
    "end": "898639"
  },
  {
    "text": "minutes",
    "start": "898639",
    "end": "899959"
  },
  {
    "text": "in blue there is the front uh font U",
    "start": "899959",
    "end": "903040"
  },
  {
    "text": "sorry uh front page um clicks per second",
    "start": "903040",
    "end": "906920"
  },
  {
    "text": "so how many clicks we're having in a",
    "start": "906920",
    "end": "909079"
  },
  {
    "text": "front page of a",
    "start": "909079",
    "end": "910440"
  },
  {
    "text": "publication in green uh specific article",
    "start": "910440",
    "end": "915320"
  },
  {
    "text": "is is uh measured but here is the amount",
    "start": "915320",
    "end": "919079"
  },
  {
    "text": "of hits that are coming from the front",
    "start": "919079",
    "end": "921240"
  },
  {
    "text": "page to that article so this allows you",
    "start": "921240",
    "end": "924199"
  },
  {
    "text": "to measure the performance of actually",
    "start": "924199",
    "end": "927519"
  },
  {
    "text": "an article and then",
    "start": "927519",
    "end": "930040"
  },
  {
    "text": "uh if the front page is doing a good job",
    "start": "930040",
    "end": "932040"
  },
  {
    "text": "actually in moving people around the the",
    "start": "932040",
    "end": "936720"
  },
  {
    "text": "content another example keeping the also",
    "start": "936880",
    "end": "941079"
  },
  {
    "text": "the refer in mind in terms of where the",
    "start": "941079",
    "end": "943800"
  },
  {
    "text": "the traffic is coming from this is for a",
    "start": "943800",
    "end": "946000"
  },
  {
    "text": "given article you can see that different",
    "start": "946000",
    "end": "948720"
  },
  {
    "text": "sources of of uh traffic are here uh",
    "start": "948720",
    "end": "952360"
  },
  {
    "text": "displayed and here we use multiple time",
    "start": "952360",
    "end": "954959"
  },
  {
    "text": "series to create uh the different uh",
    "start": "954959",
    "end": "958040"
  },
  {
    "text": "lines or different uh areas and then we",
    "start": "958040",
    "end": "961639"
  },
  {
    "text": "can see for instance that here the same",
    "start": "961639",
    "end": "963920"
  },
  {
    "text": "zero is there and then after uh the",
    "start": "963920",
    "end": "966639"
  },
  {
    "text": "front page after a while the front page",
    "start": "966639",
    "end": "968480"
  },
  {
    "text": "is linking the article you can see that",
    "start": "968480",
    "end": "971040"
  },
  {
    "text": "social uh networks start sharing it so",
    "start": "971040",
    "end": "973880"
  },
  {
    "text": "this is always through the it's",
    "start": "973880",
    "end": "975880"
  },
  {
    "text": "measuring the referral for a given",
    "start": "975880",
    "end": "977600"
  },
  {
    "text": "article and the traffic",
    "start": "977600",
    "end": "979240"
  },
  {
    "text": "sources this is done by the simple HTTP",
    "start": "979240",
    "end": "981920"
  },
  {
    "text": "other that's the referal header that",
    "start": "981920",
    "end": "984120"
  },
  {
    "text": "actually has the information of the of",
    "start": "984120",
    "end": "986680"
  },
  {
    "text": "where the traffic came from of course",
    "start": "986680",
    "end": "988680"
  },
  {
    "text": "you you can track anything HTTP this is",
    "start": "988680",
    "end": "991160"
  },
  {
    "text": "just a simple",
    "start": "991160",
    "end": "993279"
  },
  {
    "text": "example so a running example that's",
    "start": "993279",
    "end": "997120"
  },
  {
    "text": "running on my",
    "start": "997120",
    "end": "998519"
  },
  {
    "text": "machine right now so I have a machine",
    "start": "998519",
    "end": "1000959"
  },
  {
    "text": "and I am siing traffic on two varnish",
    "start": "1000959",
    "end": "1003759"
  },
  {
    "text": "cache",
    "start": "1003759",
    "end": "1004480"
  },
  {
    "text": "servers and here you can see for",
    "start": "1004480",
    "end": "1007319"
  },
  {
    "text": "instance uh a a a UI that I've done on",
    "start": "1007319",
    "end": "1011600"
  },
  {
    "text": "top of that chase and API and it's a",
    "start": "1011600",
    "end": "1013959"
  },
  {
    "text": "simple uh here is checking the refer",
    "start": "1013959",
    "end": "1016759"
  },
  {
    "text": "header and I'm I'm just stimulating",
    "start": "1016759",
    "end": "1019440"
  },
  {
    "text": "traffic that comes from different",
    "start": "1019440",
    "end": "1020800"
  },
  {
    "text": "sources Twitter Instagram and Facebook",
    "start": "1020800",
    "end": "1023199"
  },
  {
    "text": "and I can see for instance that which",
    "start": "1023199",
    "end": "1025280"
  },
  {
    "text": "one is the",
    "start": "1025280",
    "end": "1026438"
  },
  {
    "text": "slowest by default like I have all these",
    "start": "1026439",
    "end": "1029640"
  },
  {
    "text": "metrics that were in that time stamp uh",
    "start": "1029640",
    "end": "1032839"
  },
  {
    "text": "uh response and I can see for instance",
    "start": "1032839",
    "end": "1035000"
  },
  {
    "text": "that Instagram is the slowest of course",
    "start": "1035000",
    "end": "1036959"
  },
  {
    "text": "here the order of magnitude is not very",
    "start": "1036959",
    "end": "1039038"
  },
  {
    "text": "relevant this is just an example and",
    "start": "1039039",
    "end": "1041640"
  },
  {
    "text": "then out of the box I get all of these",
    "start": "1041640",
    "end": "1043640"
  },
  {
    "text": "details I found 15 time series and I can",
    "start": "1043640",
    "end": "1046720"
  },
  {
    "text": "see how many cach hits cach misses",
    "start": "1046720",
    "end": "1049679"
  },
  {
    "text": "and then the bandwith it was consumed",
    "start": "1049679",
    "end": "1051520"
  },
  {
    "text": "the number of times it has happened here",
    "start": "1051520",
    "end": "1054679"
  },
  {
    "text": "sorry the response time here and the",
    "start": "1054679",
    "end": "1056120"
  },
  {
    "text": "number of times it's this one so hits",
    "start": "1056120",
    "end": "1058320"
  },
  {
    "text": "misses along the along the",
    "start": "1058320",
    "end": "1061840"
  },
  {
    "text": "time this is actually uh interesting",
    "start": "1061840",
    "end": "1065640"
  },
  {
    "text": "because you can then also see uh server",
    "start": "1065640",
    "end": "1068480"
  },
  {
    "text": "errors uh top requested for instance",
    "start": "1068480",
    "end": "1071559"
  },
  {
    "text": "here you can see the top requested and",
    "start": "1071559",
    "end": "1073520"
  },
  {
    "text": "actually I'm just checking the the refer",
    "start": "1073520",
    "end": "1077880"
  },
  {
    "text": "uh key but actually I could reset it and",
    "start": "1077880",
    "end": "1079840"
  },
  {
    "text": "see everything and then I I've created",
    "start": "1079840",
    "end": "1083320"
  },
  {
    "text": "this structure of uh folders but this is",
    "start": "1083320",
    "end": "1087400"
  },
  {
    "text": "basically the flattened uh structure and",
    "start": "1087400",
    "end": "1090320"
  },
  {
    "text": "I have two hosts and then I can see all",
    "start": "1090320",
    "end": "1092320"
  },
  {
    "text": "my keys here that I'm inserting and I",
    "start": "1092320",
    "end": "1095000"
  },
  {
    "text": "can see pretty much yeah so now the",
    "start": "1095000",
    "end": "1096919"
  },
  {
    "text": "slowest for",
    "start": "1096919",
    "end": "1098480"
  },
  {
    "text": "instance and I can see okay my slowest",
    "start": "1098480",
    "end": "1101480"
  },
  {
    "text": "is this orl but again because everything",
    "start": "1101480",
    "end": "1103720"
  },
  {
    "text": "is happening in my local machine the the",
    "start": "1103720",
    "end": "1106919"
  },
  {
    "text": "magnitudes the the time difference are",
    "start": "1106919",
    "end": "1108919"
  },
  {
    "text": "not not that relevant I can even see the",
    "start": "1108919",
    "end": "1111880"
  },
  {
    "text": "size and I can see what's the biggest",
    "start": "1111880",
    "end": "1114760"
  },
  {
    "text": "object that is coming out from my web",
    "start": "1114760",
    "end": "1117039"
  },
  {
    "text": "server and if I'm maintaining like my",
    "start": "1117039",
    "end": "1119120"
  },
  {
    "text": "web server I want I I need to tackle",
    "start": "1119120",
    "end": "1121559"
  },
  {
    "text": "that so this is just a implementation on",
    "start": "1121559",
    "end": "1125760"
  },
  {
    "text": "top of that chase and",
    "start": "1125760",
    "end": "1128440"
  },
  {
    "text": "API so this one actually is uh is live",
    "start": "1128440",
    "end": "1132760"
  },
  {
    "text": "right now so this is not a video running",
    "start": "1132760",
    "end": "1135400"
  },
  {
    "text": "on my laptop this is actually coming",
    "start": "1135400",
    "end": "1137440"
  },
  {
    "text": "from vg. no newspaper and what this",
    "start": "1137440",
    "end": "1141480"
  },
  {
    "text": "represents is the popularity of a given",
    "start": "1141480",
    "end": "1144200"
  },
  {
    "text": "article Clicks in their front page right",
    "start": "1144200",
    "end": "1146559"
  },
  {
    "text": "now so this is in real time so the",
    "start": "1146559",
    "end": "1148960"
  },
  {
    "text": "bigger the square the more audience it",
    "start": "1148960",
    "end": "1153159"
  },
  {
    "text": "has and this has a 10c",
    "start": "1153159",
    "end": "1156640"
  },
  {
    "text": "bucket and it's updating every 10",
    "start": "1156640",
    "end": "1158799"
  },
  {
    "text": "seconds so what vg.no did was they",
    "start": "1158799",
    "end": "1162600"
  },
  {
    "text": "integrated VCS with their uh CMS and",
    "start": "1162600",
    "end": "1165919"
  },
  {
    "text": "they fetch the corresponding image for",
    "start": "1165919",
    "end": "1168240"
  },
  {
    "text": "the article that they see it's more",
    "start": "1168240",
    "end": "1170400"
  },
  {
    "text": "popular at this time so if I click here",
    "start": "1170400",
    "end": "1173679"
  },
  {
    "text": "actually I can go and open directly the",
    "start": "1173679",
    "end": "1177960"
  },
  {
    "text": "the article so it looks like this",
    "start": "1177960",
    "end": "1180120"
  },
  {
    "text": "article is really popular right",
    "start": "1180120",
    "end": "1183760"
  },
  {
    "text": "now yeah",
    "start": "1183919",
    "end": "1187159"
  },
  {
    "text": "so uh my my Takeaway on this is if you",
    "start": "1187159",
    "end": "1191760"
  },
  {
    "text": "have some kind of issue if you need to",
    "start": "1191760",
    "end": "1194280"
  },
  {
    "text": "figure out what's wrong with your web",
    "start": "1194280",
    "end": "1196039"
  },
  {
    "text": "application varnish cach is a a good",
    "start": "1196039",
    "end": "1200000"
  },
  {
    "text": "option to just check it and while using",
    "start": "1200000",
    "end": "1203159"
  },
  {
    "text": "it you then get out of the box you get",
    "start": "1203159",
    "end": "1205480"
  },
  {
    "text": "the speed",
    "start": "1205480",
    "end": "1208480"
  },
  {
    "text": "and we have built this on top of the",
    "start": "1208480",
    "end": "1211600"
  },
  {
    "text": "varnish log but you could also do it I",
    "start": "1211600",
    "end": "1214320"
  },
  {
    "text": "mean it's it's just a a a usage that",
    "start": "1214320",
    "end": "1217440"
  },
  {
    "text": "that uh it's just some some feature we",
    "start": "1217440",
    "end": "1220080"
  },
  {
    "text": "created but it's out there it's open",
    "start": "1220080",
    "end": "1222039"
  },
  {
    "text": "source so I invite you to try yeah so I",
    "start": "1222039",
    "end": "1227400"
  },
  {
    "text": "just my my goal here was to show the",
    "start": "1227400",
    "end": "1229240"
  },
  {
    "text": "flexibility of logging and actually how",
    "start": "1229240",
    "end": "1232520"
  },
  {
    "text": "logging in real time in a structured way",
    "start": "1232520",
    "end": "1235400"
  },
  {
    "text": "is very very",
    "start": "1235400",
    "end": "1237280"
  },
  {
    "text": "powerful so yeah so if you have",
    "start": "1237280",
    "end": "1240159"
  },
  {
    "text": "questions",
    "start": "1240159",
    "end": "1243159"
  }
]