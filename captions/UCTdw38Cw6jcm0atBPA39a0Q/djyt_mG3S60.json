[
  {
    "text": "good morning everyone hope you've been enjoying the conference this morning I'm gonna",
    "start": "1860",
    "end": "8639"
  },
  {
    "text": "I appreciate everyone coming out to listen about cdns I've kept it pretty",
    "start": "8639",
    "end": "13740"
  },
  {
    "text": "high level across a bunch of the concepts that you might like to know if you haven't encountered cdns",
    "start": "13740",
    "end": "20760"
  },
  {
    "text": "before or even if you have I'd like to kind of fill in a couple of the gaps for you um just to get started it's",
    "start": "20760",
    "end": "27840"
  },
  {
    "text": "cdns is something that powers the Internet it's something that's almost transparent you don't know is there but",
    "start": "27840",
    "end": "33239"
  },
  {
    "text": "they they power up to kind of 50 to 70 percent based on current stats of all",
    "start": "33239",
    "end": "39059"
  },
  {
    "text": "traffic on the internet that's way way higher for streaming videos like well above 1995 percent",
    "start": "39059",
    "end": "46620"
  },
  {
    "text": "um during covert cdns were kind of such a crucial part of the internet infrastructure making sure that we could",
    "start": "46620",
    "end": "53820"
  },
  {
    "text": "jump on video calls and all of that and everything surviving um",
    "start": "53820",
    "end": "59460"
  },
  {
    "text": "if you haven't kind of used cdns and leveraged them uh it is kind of one of",
    "start": "59460",
    "end": "64860"
  },
  {
    "text": "these tools in your toolbox that when you start realizing the power of what you can do with it it's pretty",
    "start": "64860",
    "end": "70020"
  },
  {
    "text": "impressive so what I'm going to go through today is kind of a bit of the high level uh agnostic Concepts between",
    "start": "70020",
    "end": "79439"
  },
  {
    "text": "all the different cdns I've tried not to go into any particular brand or or cloud provider but I'd",
    "start": "79439",
    "end": "87119"
  },
  {
    "text": "rather give you the concepts and kind of the basic building blocks you'll need to be able to navigate what cdns are and",
    "start": "87119",
    "end": "92340"
  },
  {
    "text": "how to use them across the various different uh Cloud Networks",
    "start": "92340",
    "end": "97380"
  },
  {
    "text": "bit about me my name is Jake gennovan I'm from Perth in Western Australia it's",
    "start": "97380",
    "end": "102900"
  },
  {
    "text": "awesome to be back up this side of the world and seeing a whole lot of people I haven't seen for a long time I'm a",
    "start": "102900",
    "end": "109799"
  },
  {
    "text": "principal consultant at a small consulting company called Arcana we're only about two years old and we mainly",
    "start": "109799",
    "end": "116040"
  },
  {
    "text": "focus and play in the Microsoft space and do outcomes-based Consulting so I",
    "start": "116040",
    "end": "121140"
  },
  {
    "text": "really enjoy that aspect where I get to work with my customers to um oops to",
    "start": "121140",
    "end": "126899"
  },
  {
    "text": "make sure that I am getting outcomes rather than fixing scope and that sort of stuff hit me up on Twitter I'll also",
    "start": "126899",
    "end": "133620"
  },
  {
    "text": "be around the conference just hanging around for the next day and a half so",
    "start": "133620",
    "end": "139020"
  },
  {
    "text": "feel free to hit me up if you've got any questions or want to chat",
    "start": "139020",
    "end": "144379"
  },
  {
    "text": "um I want to go through a bit of the what and why of cdns uh that's where",
    "start": "145140",
    "end": "150660"
  },
  {
    "text": "I'll spend majority of my time uh there's this concept around Edge Computing give you kind of the",
    "start": "150660",
    "end": "156180"
  },
  {
    "text": "understanding of what it is and how it works and how you can leverage it and then I want to take a step back and talk",
    "start": "156180",
    "end": "162540"
  },
  {
    "text": "about HTTP fundamentals because at the end of the day cdns help you serve your HTTP content predominantly and then",
    "start": "162540",
    "end": "170160"
  },
  {
    "text": "finally I want to get into some tips and tricks and gotchas because using cdns and any sort of caching comes with uh",
    "start": "170160",
    "end": "177360"
  },
  {
    "text": "potential risk so I want to kind of highlight some of the problem areas that that come with using a CDN and some of",
    "start": "177360",
    "end": "185879"
  },
  {
    "text": "the ways to get around it let's dig in what is a CDN well let's",
    "start": "185879",
    "end": "191099"
  },
  {
    "text": "break down the words it stands for Content delivery network if we break that apart there is a bunch of content",
    "start": "191099",
    "end": "198239"
  },
  {
    "text": "we like to serve so HTML images JavaScript video all of those sort of",
    "start": "198239",
    "end": "203819"
  },
  {
    "text": "things so it's just what is the content your website is serving up delivery is normally the mechanism is https and it",
    "start": "203819",
    "end": "212280"
  },
  {
    "text": "provides a lot of nice services around that but the the really interesting part is this network cdns have this backbone",
    "start": "212280",
    "end": "219480"
  },
  {
    "text": "Network that will jump into a little bit later um if we look at the world I am from",
    "start": "219480",
    "end": "227280"
  },
  {
    "text": "Perth in Australia and I might have a point of presence in my data center kind",
    "start": "227280",
    "end": "232560"
  },
  {
    "text": "of on the East Coast of Australia so I'm hosting my website there and we're up here in Oslo uh and that all your isps",
    "start": "232560",
    "end": "241440"
  },
  {
    "text": "so your phone they often have a what's called a point of presence it is a",
    "start": "241440",
    "end": "246480"
  },
  {
    "text": "server in your ISP or local data centers that is a point of presence for this CDN",
    "start": "246480",
    "end": "252599"
  },
  {
    "text": "Network and between that these networks have their own CDN backbone this is what",
    "start": "252599",
    "end": "258299"
  },
  {
    "text": "this first kind of area of Advantage Advantage is",
    "start": "258299",
    "end": "263400"
  },
  {
    "text": "um so with the CDN Network they can intelligently Route traffic because it",
    "start": "263400",
    "end": "269040"
  },
  {
    "text": "knows where your origin server is which is where you're hosting your website and you've got your Edge server or your",
    "start": "269040",
    "end": "274800"
  },
  {
    "text": "point of presence and it knows how to navigate the internet effectively and in fact it stays off the internet to use",
    "start": "274800",
    "end": "281940"
  },
  {
    "text": "these private CDN networks for um to avoid all sorts of issues like if",
    "start": "281940",
    "end": "287880"
  },
  {
    "text": "there is a lot of congestion on a particular switch it knows how to route around that and that sort of thing so",
    "start": "287880",
    "end": "294060"
  },
  {
    "text": "that's kind of the the idea but there are lots of points of presences if you",
    "start": "294060",
    "end": "299280"
  },
  {
    "text": "have a look at your Azure or AWS and have a look at the regions there's only a kind of a handful of regions a couple",
    "start": "299280",
    "end": "306180"
  },
  {
    "text": "of dozen regions but there are tons of these points of presence all around the",
    "start": "306180",
    "end": "312060"
  },
  {
    "text": "world and that's kind of the the what of it",
    "start": "312060",
    "end": "317580"
  },
  {
    "text": "um where it's much more interesting is the why I I like to jump in and talk about kind of the whys of things uh and",
    "start": "317580",
    "end": "325259"
  },
  {
    "text": "I got to know about the whys when I was working at a news company in Australia called wa news my team helped build the",
    "start": "325259",
    "end": "334639"
  },
  {
    "text": "west.com.eu perthnow.com7news.com so three news websites seven news was the biggest uh",
    "start": "334639",
    "end": "341460"
  },
  {
    "text": "at the time and when we were building it it was probably about 70 million page views a month so not not a massive uh",
    "start": "341460",
    "end": "348900"
  },
  {
    "text": "News website in terms of some of the global scales but still a decent amount of traffic",
    "start": "348900",
    "end": "354600"
  },
  {
    "text": "um learned a lot of little things around how to leverage cdns to keep costs under",
    "start": "354600",
    "end": "360240"
  },
  {
    "text": "control and that sort of thing but one of the biggest costs is data if you use",
    "start": "360240",
    "end": "365520"
  },
  {
    "text": "AWS or any of the clouds you might and you are serving any sort of volume of",
    "start": "365520",
    "end": "370680"
  },
  {
    "text": "traffic you've probably noticed that egress the the how much you get charged",
    "start": "370680",
    "end": "375720"
  },
  {
    "text": "for data going out of the data center to the customers or end users it can get",
    "start": "375720",
    "end": "381300"
  },
  {
    "text": "super expensive one of the things that we we kind of learned really early is",
    "start": "381300",
    "end": "386780"
  },
  {
    "text": "Javascript bundles sizes uh you if you've been to a News website and you've",
    "start": "386780",
    "end": "391919"
  },
  {
    "text": "seen like this article was published three hours ago at relative time problem",
    "start": "391919",
    "end": "397500"
  },
  {
    "text": "um if you are trying to Target say Internet Explorer 11 at the time we one of our",
    "start": "397500",
    "end": "403740"
  },
  {
    "text": "devs installed a poly fill it's like it came with about 600 K of",
    "start": "403740",
    "end": "409860"
  },
  {
    "text": "translations like what is Wednesday in every single uh language uh so that blew",
    "start": "409860",
    "end": "416460"
  },
  {
    "text": "out our bundle size and it ended up costing us tens of thousands of dollars over a couple of weeks we because we",
    "start": "416460",
    "end": "422220"
  },
  {
    "text": "just didn't notice that our bundle size had popped up by the time we noticed it a few weeks later it had already racked",
    "start": "422220",
    "end": "429180"
  },
  {
    "text": "up a massive bill so you can you can kind of when you saw it when you're serving these great volumes of traffic",
    "start": "429180",
    "end": "434400"
  },
  {
    "text": "it's pretty pretty easy to Rack it up so what what sort of egress costs are around there well",
    "start": "434400",
    "end": "440699"
  },
  {
    "text": "this is one of the first benefits of cdns your CDN egress is with say AWS is",
    "start": "440699",
    "end": "446759"
  },
  {
    "text": "immediately cheaper so your standard if you're just toasting on ec2 or any other service you're paying about 12 cents U.S",
    "start": "446759",
    "end": "453900"
  },
  {
    "text": "a gig as soon as you put cloudfront in front of it that drops to about eight and a half cents per gig so just by",
    "start": "453900",
    "end": "460139"
  },
  {
    "text": "putting a CDN in front of your uh your application and serving you get immediate cost savings and also as you",
    "start": "460139",
    "end": "467759"
  },
  {
    "text": "serve more traffic those cost savings get far far better when you're talking about",
    "start": "467759",
    "end": "473639"
  },
  {
    "text": "um like the price tiering Azure is much the same the egress is a slightly more",
    "start": "473639",
    "end": "479280"
  },
  {
    "text": "expensive on Azure but you're looking at about 18 cents us per gig and that drops down to about 12 and a half cents per",
    "start": "479280",
    "end": "485580"
  },
  {
    "text": "gig as soon as you you put a CD in like Azure front door in front of it",
    "start": "485580",
    "end": "491160"
  },
  {
    "text": "uh the other really interesting one is cloudflare where egress is free now",
    "start": "491160",
    "end": "496919"
  },
  {
    "text": "um one of the things about cloudflare is often you will use it with another provider like Azure or AWS so you will",
    "start": "496919",
    "end": "505500"
  },
  {
    "text": "still have to pay egress between say Azure and cloudflare but they have",
    "start": "505500",
    "end": "511139"
  },
  {
    "text": "bandwidth agreements in place so you'll get a discounted rate when sending",
    "start": "511139",
    "end": "516360"
  },
  {
    "text": "traffic from say Azure to cloudflare um there's some really interesting blog",
    "start": "516360",
    "end": "521399"
  },
  {
    "text": "articles around kind of the egress costs and and how to leverage all of this stuff which will cover a few of those",
    "start": "521399",
    "end": "528300"
  },
  {
    "text": "later another example of kind of uh a cost blowout who's seen in the site have I",
    "start": "528300",
    "end": "534540"
  },
  {
    "text": "been owned by Troy hunt who's often yeah so Troy builds his site have I been",
    "start": "534540",
    "end": "539760"
  },
  {
    "text": "owned you put in your email address and it tells you has my email address been included in some sort of data leakage",
    "start": "539760",
    "end": "545940"
  },
  {
    "text": "event he had an issue a little while ago where he he noticed his bill came through and he's like whoa I've got four",
    "start": "545940",
    "end": "552420"
  },
  {
    "text": "and a half thousand dollars Australian of uh egress costs on my storage account it's normally sense what what's happened",
    "start": "552420",
    "end": "561839"
  },
  {
    "text": "um and this is one of the really Nifty things about cdns is you can control these if it's all configured properly",
    "start": "561839",
    "end": "568320"
  },
  {
    "text": "it's a really interesting read but essentially one of the concepts we're going to cover pretty soon around",
    "start": "568320",
    "end": "574440"
  },
  {
    "text": "caching uh for some reason it no longer was having cash hits in the CDN so all",
    "start": "574440",
    "end": "582420"
  },
  {
    "text": "of the traffic was going back to the origin server and he wasn't getting any of those kind of bandwidth Savings of",
    "start": "582420",
    "end": "588839"
  },
  {
    "text": "having cloudflare giving free egress so suddenly his uh his costs went up and",
    "start": "588839",
    "end": "594480"
  },
  {
    "text": "ended up costing a fair bit but Microsoft and cloudflare came to the party and covered his bills for him and",
    "start": "594480",
    "end": "601019"
  },
  {
    "text": "that was really really nice of them so can recommend uh having a look at that blog post how I got owned by my cloud",
    "start": "601019",
    "end": "607680"
  },
  {
    "text": "costs it's a it's a good one and a lot of the concepts we'll talk about today when you go read that blog post it's",
    "start": "607680",
    "end": "615779"
  },
  {
    "text": "kind of that next level of detail down it's a good read so caching this is kind of one of the",
    "start": "615779",
    "end": "621959"
  },
  {
    "text": "primary reasons that people use cdns let's say I am going to the NDC agenda",
    "start": "621959",
    "end": "629640"
  },
  {
    "text": "page from for my talk I visit it with my browser it then hits",
    "start": "629640",
    "end": "635339"
  },
  {
    "text": "the point of presence and goes back to my origin server gets the response",
    "start": "635339",
    "end": "641399"
  },
  {
    "text": "I can include a cache control header when we get to the HTTP fundamentals I'll explain some of these a little bit",
    "start": "641399",
    "end": "647579"
  },
  {
    "text": "more but I can return a cash control header which basically says this is good for that many seconds 3600 seconds",
    "start": "647579",
    "end": "655339"
  },
  {
    "text": "and that mean that instructs the CDN that you can save that and serve that",
    "start": "655339",
    "end": "660420"
  },
  {
    "text": "same content to other people so when the next lots of people come along it immediately just Returns the same",
    "start": "660420",
    "end": "667200"
  },
  {
    "text": "response to those if they have hit the website within the next minute so if you've got any sort of content that is",
    "start": "667200",
    "end": "672959"
  },
  {
    "text": "is allowed to be a little bit stale it's a perfect scenario just turns one of",
    "start": "672959",
    "end": "678060"
  },
  {
    "text": "these TTL time to live caching on and then suddenly you you just reduce your",
    "start": "678060",
    "end": "684360"
  },
  {
    "text": "origin server by a huge amount for new sites we are getting people hitting the home page all the time like people just",
    "start": "684360",
    "end": "690899"
  },
  {
    "text": "have it auto refreshing um and so just by putting a minute or two minute time to live on that home",
    "start": "690899",
    "end": "697019"
  },
  {
    "text": "page suddenly uh traffic on our origin server which means we have far less",
    "start": "697019",
    "end": "702540"
  },
  {
    "text": "instances our compute costs go down all that sort of stuff suddenly all of that just drops",
    "start": "702540",
    "end": "708600"
  },
  {
    "text": "dramatically so that's kind of your first first little uh thing that you'd like to do is",
    "start": "708600",
    "end": "714060"
  },
  {
    "text": "turn on caching for anything you can prime candidate so this is like your",
    "start": "714060",
    "end": "719519"
  },
  {
    "text": "JavaScript and images and any kind of static assets immediately you can for your single page apps is a really good",
    "start": "719519",
    "end": "726060"
  },
  {
    "text": "Target for those sort of things you can you can start leveraging this caching to improve reliability as well",
    "start": "726060",
    "end": "731940"
  },
  {
    "text": "let's take the same scenario I I've cached it but instead I'm turn returning",
    "start": "731940",
    "end": "737640"
  },
  {
    "text": "a different cache control directive which says I want you to serve stale if there's an error for the next minute",
    "start": "737640",
    "end": "744300"
  },
  {
    "text": "what's Nifty about this is the second person can come along and it will still go back to my origin server so I haven't",
    "start": "744300",
    "end": "751800"
  },
  {
    "text": "said to the CDN that you're allowed to serve stale or cached data so we'll",
    "start": "751800",
    "end": "757800"
  },
  {
    "text": "always go back to to my origin server except let's say my CDN or my origin",
    "start": "757800",
    "end": "763380"
  },
  {
    "text": "server catches on fire um now a whole bunch of people are hitting the website they want to see the",
    "start": "763380",
    "end": "768660"
  },
  {
    "text": "agenda the CDN will go to my origin server that won't work can't contact it because I've",
    "start": "768660",
    "end": "775500"
  },
  {
    "text": "said you're allowed to serve stale if there's an error it will just return the last known good copy of my website this",
    "start": "775500",
    "end": "782880"
  },
  {
    "text": "is incredibly handy uh because we built we were Distributing a News website and",
    "start": "782880",
    "end": "789120"
  },
  {
    "text": "we want news to be up to date but we also wanted our team to be super efficient so what we did is we moved",
    "start": "789120",
    "end": "794880"
  },
  {
    "text": "towards continuous deployment where anytime our team would merge a pull request that would go straight out to",
    "start": "794880",
    "end": "801120"
  },
  {
    "text": "production for these three news websites sometimes things went wrong and we had a Sev one it might have been something",
    "start": "801120",
    "end": "808620"
  },
  {
    "text": "blew out the CPU usage or it could have been like an error that we just didn't catch because we're going out this saved",
    "start": "808620",
    "end": "815880"
  },
  {
    "text": "us a lot of time so we decided that we would let our team Leverage The CDN allow our origin to go down because we",
    "start": "815880",
    "end": "823019"
  },
  {
    "text": "could redeploy any fixes and to five to ten minutes it we move towards being",
    "start": "823019",
    "end": "829440"
  },
  {
    "text": "able to detect the errors really quickly and then fix them fast different Industries",
    "start": "829440",
    "end": "835740"
  },
  {
    "text": "you might not be able to do that because you you can't afford to actually be down you can't cache the content but for us",
    "start": "835740",
    "end": "842639"
  },
  {
    "text": "it was a great trade-off uh latency this one is kind of",
    "start": "842639",
    "end": "849720"
  },
  {
    "text": "leveraging the network side of things so when I I visit the website it's got my point of presence I've mentioned earlier",
    "start": "849720",
    "end": "856019"
  },
  {
    "text": "that you enter the cdns network these are incredibly sophisticated",
    "start": "856019",
    "end": "861060"
  },
  {
    "text": "networks because they understand their worldwide Network they intelligently",
    "start": "861060",
    "end": "866220"
  },
  {
    "text": "Route traffic so if there's a massive event for instance it will and there's a",
    "start": "866220",
    "end": "871860"
  },
  {
    "text": "bunch of uh congestion in a particular region in the world that the switches",
    "start": "871860",
    "end": "878160"
  },
  {
    "text": "are overloaded things are getting slow it understands the throughput of its",
    "start": "878160",
    "end": "883320"
  },
  {
    "text": "entire network and can intelligently route around it a little bit like your GPS can Route Around traffic problems",
    "start": "883320",
    "end": "890639"
  },
  {
    "text": "and give you the most optimal route cdns have that aspect to it so just because",
    "start": "890639",
    "end": "896100"
  },
  {
    "text": "you aren't traversing the internet and it understands its own network you can just avoid a whole bunch of reliability",
    "start": "896100",
    "end": "902579"
  },
  {
    "text": "issues and between say Oslo and Perth the it's",
    "start": "902579",
    "end": "909899"
  },
  {
    "text": "about 250 milliseconds of latency um but these networks can can bring that",
    "start": "909899",
    "end": "915600"
  },
  {
    "text": "down just because they route so much more efficiently but what's really Nifty about this this network is they are also",
    "start": "915600",
    "end": "922260"
  },
  {
    "text": "a load balancing or a reverse proxy where I can have multiple origin servers",
    "start": "922260",
    "end": "928500"
  },
  {
    "text": "in different locations around the world now the really cool thing about that is you can instruct your CDN that for any",
    "start": "928500",
    "end": "936180"
  },
  {
    "text": "point of presence I want you to route to the point the origin server that has the",
    "start": "936180",
    "end": "942120"
  },
  {
    "text": "least ping so now you can have your Regional multiple regions and your CDN",
    "start": "942120",
    "end": "948600"
  },
  {
    "text": "can automatically route or hit the origin server that is closest to the user reducing latency but then if that",
    "start": "948600",
    "end": "955800"
  },
  {
    "text": "origin server happens to go down you can then it just will direct traffic to the other service so it gives you that kind",
    "start": "955800",
    "end": "962459"
  },
  {
    "text": "of flexibility and continually tries to reduce the time to getting your website",
    "start": "962459",
    "end": "968880"
  },
  {
    "text": "to those users there's a lot of literature around this",
    "start": "968880",
    "end": "974040"
  },
  {
    "text": "around from Google and whatnot around the impact of how how much it can improve conversion rate",
    "start": "974040",
    "end": "980880"
  },
  {
    "text": "reduce bounce rate and then those sort of things if your website loads faster so all of these things just little",
    "start": "980880",
    "end": "987839"
  },
  {
    "text": "little wins that help your website load a bit quicker another one is DDOS protection so",
    "start": "987839",
    "end": "993380"
  },
  {
    "text": "distributed denial of service attacks are getting far far larger and more",
    "start": "993380",
    "end": "998399"
  },
  {
    "text": "problematic and essentially one of the reasons for that is we've got all of",
    "start": "998399",
    "end": "1003500"
  },
  {
    "text": "these old Windows XP boxes from all around the world that have like little",
    "start": "1003500",
    "end": "1008660"
  },
  {
    "text": "Bots running on them that any one that controls one of these bot",
    "start": "1008660",
    "end": "1013940"
  },
  {
    "text": "networks can suddenly just turn them all on and start hitting a website to try and bring it down but it's not just",
    "start": "1013940",
    "end": "1020600"
  },
  {
    "text": "bringing it down the reliability that denial of service attacks can um can actually hurt you we've talked about",
    "start": "1020600",
    "end": "1027199"
  },
  {
    "text": "egress costs and there's also compute costs if you're using serverless because of the elastic nature of cloud if you're",
    "start": "1027199",
    "end": "1035058"
  },
  {
    "text": "getting a distributed denial of service attack against your website all of your",
    "start": "1035059",
    "end": "1040520"
  },
  {
    "text": "infrastructure will probably scale up to kind of deal with this extra traffic that means extra cost it's quite easy",
    "start": "1040520",
    "end": "1048079"
  },
  {
    "text": "for a DDOS attack to cost you a lot of money uh",
    "start": "1048079",
    "end": "1054020"
  },
  {
    "text": "so like cloudflare for instance earlier this year they had they mitigated an attack against one of the clients on",
    "start": "1054020",
    "end": "1060740"
  },
  {
    "text": "their Network and it was issuing about 71 million requests a second so I don't know if your servers can handle that I",
    "start": "1060740",
    "end": "1067760"
  },
  {
    "text": "certainly do not want to be having running that amount of infrastructure um Microsoft also last year had one",
    "start": "1067760",
    "end": "1074240"
  },
  {
    "text": "where they mitigated an attack of about 3.5 terabits per second which is about 133 gigs per second of just inbound",
    "start": "1074240",
    "end": "1083240"
  },
  {
    "text": "traffic these networks can absorb a massive amount of traffic it's it's",
    "start": "1083240",
    "end": "1089000"
  },
  {
    "text": "quite impressive but one of the really cool things about when you sign up for a CDN and if you go to some of the premium",
    "start": "1089000",
    "end": "1096679"
  },
  {
    "text": "skus and pay for the better DDOS protection a lot of what comes with it",
    "start": "1096679",
    "end": "1102320"
  },
  {
    "text": "is insurance policies like if you are using AWS Cloud front and and use their",
    "start": "1102320",
    "end": "1107900"
  },
  {
    "text": "Shield product any additional cost that you incur on your AWS bill due to like a",
    "start": "1107900",
    "end": "1116000"
  },
  {
    "text": "CDN sorry to DDOS attack they will cover it as kind of an insurance policy from",
    "start": "1116000",
    "end": "1121100"
  },
  {
    "text": "your your CDN so have a look into that because it can it can kind of be a really useful financial protection for",
    "start": "1121100",
    "end": "1128240"
  },
  {
    "text": "you and your company if you are running that sort of stuff flexibility",
    "start": "1128240",
    "end": "1134559"
  },
  {
    "text": "we can have let's say I have the agenda page again and it goes I load it up hits",
    "start": "1134559",
    "end": "1142520"
  },
  {
    "text": "my origin server serves up the HTML inside my CDN you can actually configure a whole bunch of rules so I'm going to",
    "start": "1142520",
    "end": "1149179"
  },
  {
    "text": "configure a routing rule here where I said everything that's under the static folder I instead like a Javascript file",
    "start": "1149179",
    "end": "1157340"
  },
  {
    "text": "for instance I want to route that to a storage account or S3 or something like",
    "start": "1157340",
    "end": "1162440"
  },
  {
    "text": "that because those services that are optimized for serving files and that means my origin server on my web server",
    "start": "1162440",
    "end": "1168799"
  },
  {
    "text": "doesn't have to serve up files which most web servers are not as good at doing that as say S3 or another",
    "start": "1168799",
    "end": "1176720"
  },
  {
    "text": "storage account so it gives you that flexibility to control have multiple origin servers and then route between",
    "start": "1176720",
    "end": "1184160"
  },
  {
    "text": "them based on abstract rules uh this is also super super handy if you",
    "start": "1184160",
    "end": "1189799"
  },
  {
    "text": "are let's say you have deployments that require downtime if you can stand up a",
    "start": "1189799",
    "end": "1196100"
  },
  {
    "text": "second origin server that even hits the same database or however you do it you can get your CDN to Route all of the",
    "start": "1196100",
    "end": "1202940"
  },
  {
    "text": "traffic over to one region take one region off the other region offline upgrade everything bring that Region",
    "start": "1202940",
    "end": "1210200"
  },
  {
    "text": "online move it across other examples of this let's say you are",
    "start": "1210200",
    "end": "1215840"
  },
  {
    "text": "trying to move from a web stack like WordPress and now you want to run next.js you could use your origin sorry",
    "start": "1215840",
    "end": "1224840"
  },
  {
    "text": "your CDN to Route base different paths to each of the applications so you can",
    "start": "1224840",
    "end": "1231200"
  },
  {
    "text": "do a gradual migration between different platforms there's a heap of things you can do and this is one of the reasons",
    "start": "1231200",
    "end": "1237320"
  },
  {
    "text": "even if I'm not leveraging the caching ability of a CDN I pretty much always put one in front just for its reverse",
    "start": "1237320",
    "end": "1244520"
  },
  {
    "text": "proxy capability so it gives you a lot of really nice ability to kind of",
    "start": "1244520",
    "end": "1250100"
  },
  {
    "text": "adapt to any unforeseen issues that will happen over the lifetime of your",
    "start": "1250100",
    "end": "1255260"
  },
  {
    "text": "application finally we've kind of got logging and analytics just",
    "start": "1255260",
    "end": "1260900"
  },
  {
    "text": "data is super super useful and at the edge you're getting a heap of requests just being able to aggregate over that",
    "start": "1260900",
    "end": "1268100"
  },
  {
    "text": "and see what traffic patterns you have against your website is really really handy so a lot of the cdns have quite",
    "start": "1268100",
    "end": "1274160"
  },
  {
    "text": "good Insight products to tell you where all the traffic is coming from and categorize the types of traffic from",
    "start": "1274160",
    "end": "1281120"
  },
  {
    "text": "Bots to end users where they were referred from do getting referrals from",
    "start": "1281120",
    "end": "1286340"
  },
  {
    "text": "Google or social networks or any of those sort of things",
    "start": "1286340",
    "end": "1291820"
  },
  {
    "text": "so a bit of a Roundup",
    "start": "1293539",
    "end": "1297039"
  },
  {
    "text": "cheap and bandwidth costs you have caching that gives you the",
    "start": "1301360",
    "end": "1306380"
  },
  {
    "text": "ability to serve while stale or if there's an error there's a bunch of other cache control headers we'll jump",
    "start": "1306380",
    "end": "1311720"
  },
  {
    "text": "into later latency improvements leveraging that Network getting time to",
    "start": "1311720",
    "end": "1316820"
  },
  {
    "text": "First Bite in those other metrics that Google used to rank you if you're a public website and you are trying to",
    "start": "1316820",
    "end": "1323960"
  },
  {
    "text": "issue like improve your search rankings and that sort of stuff latency and time",
    "start": "1323960",
    "end": "1330080"
  },
  {
    "text": "to First buy it and those sort of metrics are quite important uh and also just DDOS protection and the",
    "start": "1330080",
    "end": "1336559"
  },
  {
    "text": "flexibility that it can provide so they're kind of a bit of a wrap up of the features and reasons why you would",
    "start": "1336559",
    "end": "1342740"
  },
  {
    "text": "want to to put it in but just ones like egress that you almost get something for nothing it just uh makes a lot of sense",
    "start": "1342740",
    "end": "1351580"
  },
  {
    "text": "so the next thing I want to talk about Edge Computing uh is is there's been a lot of uh interest in this area",
    "start": "1352820",
    "end": "1359960"
  },
  {
    "text": "especially with Frameworks like nexjs and remix which allow you to deploy your",
    "start": "1359960",
    "end": "1365900"
  },
  {
    "text": "web applications to the edge I just want to point out that a lot of",
    "start": "1365900",
    "end": "1371720"
  },
  {
    "text": "this I mentioned this at the beginning I don't want to try and tie myself to a particular CDN Network each of them are",
    "start": "1371720",
    "end": "1378679"
  },
  {
    "text": "quite different in their terminology and the way you implement these things so I've kind of taken a step back to",
    "start": "1378679",
    "end": "1384980"
  },
  {
    "text": "explain the concepts and once you understand these Concepts you'll be able to navigate the documentation and figure",
    "start": "1384980",
    "end": "1390500"
  },
  {
    "text": "out how to do that for that particular product so that's kind of the approach I've taken",
    "start": "1390500",
    "end": "1395900"
  },
  {
    "text": "uh what we have here is our end user you've got your CDN and the cache in the",
    "start": "1395900",
    "end": "1402080"
  },
  {
    "text": "in the CDN and then I've got my origin server if I'm getting my website the first",
    "start": "1402080",
    "end": "1408380"
  },
  {
    "text": "thing that kind of the edge allows you to do is run compute so you can have if",
    "start": "1408380",
    "end": "1414020"
  },
  {
    "text": "you're in AWS land or cloudfront you can run a Lambda at Edge or a cloudflare",
    "start": "1414020",
    "end": "1419480"
  },
  {
    "text": "worker um and it allows you to basically deploy python or JavaScript or whatever the the",
    "start": "1419480",
    "end": "1425720"
  },
  {
    "text": "service provides into your CDN and run compute at various points of the life",
    "start": "1425720",
    "end": "1431539"
  },
  {
    "text": "cycle so the first thing is running the compute before you the cache now this is",
    "start": "1431539",
    "end": "1438140"
  },
  {
    "text": "useful for a bunch of different scenarios but the one I'm going to do is let's say I have a paywall on my My",
    "start": "1438140",
    "end": "1445640"
  },
  {
    "text": "article and I have a user that logs in I have a cookie that has their auth token",
    "start": "1445640",
    "end": "1451760"
  },
  {
    "text": "that token is a JWT I run my Edge function",
    "start": "1451760",
    "end": "1456980"
  },
  {
    "text": "now my Edge function could look something like this where I get the request in I can use a JWT library to",
    "start": "1456980",
    "end": "1465200"
  },
  {
    "text": "validate that that JWT was issued by me a JWT for those that aren't super",
    "start": "1465200",
    "end": "1471260"
  },
  {
    "text": "familiar with auth is a JavaScript web token and it essentially allows you to",
    "start": "1471260",
    "end": "1477260"
  },
  {
    "text": "prove that someone issued it so if I am logging in with auth zero auth zero",
    "start": "1477260",
    "end": "1484280"
  },
  {
    "text": "we'll use a private key to sign the JWT and I can validate that auth zero issued",
    "start": "1484280",
    "end": "1491900"
  },
  {
    "text": "that JWT without talking to that authentication server so it allows offline verification of what the like",
    "start": "1491900",
    "end": "1500179"
  },
  {
    "text": "the person is proving um so here I am what I'm doing is",
    "start": "1500179",
    "end": "1506240"
  },
  {
    "text": "grabbing out the claim of the subscription level so the token has a whole bunch of user information in it",
    "start": "1506240",
    "end": "1512900"
  },
  {
    "text": "but if I'm thinking about caching and I'm serving 70 million requests if you",
    "start": "1512900",
    "end": "1518179"
  },
  {
    "text": "think about a news website or a lot of public websites you have a lot of people only visiting one or two websites so if",
    "start": "1518179",
    "end": "1527000"
  },
  {
    "text": "you cache per user the on the home page you essentially will never return a",
    "start": "1527000",
    "end": "1533000"
  },
  {
    "text": "cached result because users are only returning to the website once a day or whatnot so your cash effectively becomes",
    "start": "1533000",
    "end": "1539840"
  },
  {
    "text": "useless what I can do is I can extract their subscription level from that and",
    "start": "1539840",
    "end": "1545419"
  },
  {
    "text": "set a header and now when my origin server looks at that header it can",
    "start": "1545419",
    "end": "1551600"
  },
  {
    "text": "render either a paywall or the unlocked article based on this header",
    "start": "1551600",
    "end": "1558440"
  },
  {
    "text": "um that's super handy because now because I can just cache that header and if I've",
    "start": "1558440",
    "end": "1564500"
  },
  {
    "text": "got two different versions so none or subscriber I now have two versions of my",
    "start": "1564500",
    "end": "1571700"
  },
  {
    "text": "cached website the payworld version and the unlocked version and my cache",
    "start": "1571700",
    "end": "1577220"
  },
  {
    "text": "becomes effective again so this is a reason you would run compute before the cache is to essentially modify the",
    "start": "1577220",
    "end": "1584000"
  },
  {
    "text": "request to make the cache more efficient",
    "start": "1584000",
    "end": "1588460"
  },
  {
    "text": "so the next scenario that's kind of got us to here and then you've got the modified request and then it checks to",
    "start": "1589520",
    "end": "1595220"
  },
  {
    "text": "see if there there's been a cache yet we'll continue to say there wasn't and",
    "start": "1595220",
    "end": "1600679"
  },
  {
    "text": "the next piece of compute that we can run is after the CDN behind the cache",
    "start": "1600679",
    "end": "1607580"
  },
  {
    "text": "scenario here is I am migrating let's say my blog from WordPress across to",
    "start": "1607580",
    "end": "1614960"
  },
  {
    "text": "Astro which is a new static site generator it might be Jekyll or whatever the latest uh and greatest static",
    "start": "1614960",
    "end": "1622159"
  },
  {
    "text": "website generator is um an example of there is I just want to do URL rewrites from the old one to the",
    "start": "1622159",
    "end": "1628640"
  },
  {
    "text": "new one so I can check to see if the if the URL coming in matches a WordPress",
    "start": "1628640",
    "end": "1633799"
  },
  {
    "text": "URL if it does I will do issue a permanent redirect to the new URL structure otherwise I'll just let the",
    "start": "1633799",
    "end": "1641000"
  },
  {
    "text": "request go through this means I don't have to write this redirect logic into",
    "start": "1641000",
    "end": "1646159"
  },
  {
    "text": "my origin server simplifies things and that will",
    "start": "1646159",
    "end": "1651919"
  },
  {
    "text": "return the new URL whereas when I come in using the new URL after the redirect",
    "start": "1651919",
    "end": "1658940"
  },
  {
    "text": "that will go through to my origin server because it isn't one of the old urls",
    "start": "1658940",
    "end": "1664279"
  },
  {
    "text": "and that's now on GitHub pages so I'm not paying for it and that sort of stuff so",
    "start": "1664279",
    "end": "1669520"
  },
  {
    "text": "migrations are a really good example of when you would use compute behind the cache",
    "start": "1669520",
    "end": "1677720"
  },
  {
    "text": "so that's got us to hear you can also run compute before the",
    "start": "1677720",
    "end": "1683240"
  },
  {
    "text": "response is sent that's a scenario for that",
    "start": "1683240",
    "end": "1688658"
  },
  {
    "text": "let's say I am serving images lots and lots of images on my website now",
    "start": "1688760",
    "end": "1694279"
  },
  {
    "text": "browsers have different levels of support for different types of image formats so Chrome supports webp but",
    "start": "1694279",
    "end": "1700400"
  },
  {
    "text": "Safari doesn't so for all my Chrome users I want to be able to serve the most optimal image format for them",
    "start": "1700400",
    "end": "1708860"
  },
  {
    "text": "there is a header called the accept header the browsers always send and it",
    "start": "1708860",
    "end": "1713960"
  },
  {
    "text": "essentially says these are the types of content that I support server please return me a format that I know how to",
    "start": "1713960",
    "end": "1721640"
  },
  {
    "text": "deal with so if the request is coming in and it's got an accept header of webp you'll notice that even though the",
    "start": "1721640",
    "end": "1728179"
  },
  {
    "text": "logo.png you're asking for a PNG it will send a whole bunch of accept headers for",
    "start": "1728179",
    "end": "1733520"
  },
  {
    "text": "the other formats that it can receive I'm also a quick putting on a query string of w equals 300. we'll have a",
    "start": "1733520",
    "end": "1741799"
  },
  {
    "text": "look at that in a sec so my origin server is returning a PNG back to my",
    "start": "1741799",
    "end": "1746900"
  },
  {
    "text": "Edge function and it's got dimensions of 1500 by 1200 so it's a thousand so it's",
    "start": "1746900",
    "end": "1752480"
  },
  {
    "text": "a large image much larger than the user wants I can write an edge function which grabs the accept adder and goes okay if",
    "start": "1752480",
    "end": "1760700"
  },
  {
    "text": "the if it's a webp I want the format of my response to be a webp image otherwise",
    "start": "1760700",
    "end": "1767480"
  },
  {
    "text": "I just want it to be a NG if it doesn't support png's drop it back to jpeg so",
    "start": "1767480",
    "end": "1772700"
  },
  {
    "text": "now I can kind of my image function can serve three different types of images",
    "start": "1772700",
    "end": "1777860"
  },
  {
    "text": "I then use something like sharp which is an image manipulation library and I can say I want you to send back the image",
    "start": "1777860",
    "end": "1785380"
  },
  {
    "text": "resized to this width and it will keep the aspect ratio so it'll still be in",
    "start": "1785380",
    "end": "1790940"
  },
  {
    "text": "the same aspect ratio I want you to send it as this format",
    "start": "1790940",
    "end": "1796159"
  },
  {
    "text": "create a buffer and then I can just say return this image now that's really",
    "start": "1796159",
    "end": "1801500"
  },
  {
    "text": "really Nifty because uh we've talked about egress costs this can save you masses of money because if you are only",
    "start": "1801500",
    "end": "1808159"
  },
  {
    "text": "serving a 300 by uh whatever the dimension is",
    "start": "1808159",
    "end": "1814340"
  },
  {
    "text": "um 300 by 500 or 50 image it is way way",
    "start": "1814340",
    "end": "1819860"
  },
  {
    "text": "smaller it'll only be like a k and then you use webp instead of PNG and it will",
    "start": "1819860",
    "end": "1825440"
  },
  {
    "text": "be smaller again and you're serving the most optimal images to the end user and it's you'll have to put a little bit of",
    "start": "1825440",
    "end": "1831620"
  },
  {
    "text": "error handling and stuff around but this is a service that is natively provided in a lot of cdns really really useful",
    "start": "1831620",
    "end": "1838159"
  },
  {
    "text": "and Nifty trick so that's kind of the before and the",
    "start": "1838159",
    "end": "1845120"
  },
  {
    "text": "reason you'd run that before your cache is you don't want to be resizing the image on every request you want to serve",
    "start": "1845120",
    "end": "1851299"
  },
  {
    "text": "that once that takes us to the final compute which runs after which it should",
    "start": "1851299",
    "end": "1856460"
  },
  {
    "text": "say after apology uh get so",
    "start": "1856460",
    "end": "1862220"
  },
  {
    "text": "this is getting before the cache and then I'm returning and hitting my Edge function now let's say I want to kind of",
    "start": "1862220",
    "end": "1868940"
  },
  {
    "text": "track users if I if someone is revisiting the site on their their phone",
    "start": "1868940",
    "end": "1874399"
  },
  {
    "text": "and I want to kind of keep track of who is visiting I can run after the cache",
    "start": "1874399",
    "end": "1880340"
  },
  {
    "text": "because let's say I'm News website again I want to have",
    "start": "1880340",
    "end": "1885500"
  },
  {
    "text": "I don't want to associate my cash with users so now I can cash for everyone and",
    "start": "1885500",
    "end": "1891799"
  },
  {
    "text": "my Edge function can check to see if there is a viewer ID cookie um",
    "start": "1891799",
    "end": "1897500"
  },
  {
    "text": "and if there isn't of your ID cookie append a set cookie response to that and",
    "start": "1897500",
    "end": "1904039"
  },
  {
    "text": "then I can generate a user ID so it allows me to kind of categorize each of these requests into like per user that's",
    "start": "1904039",
    "end": "1912679"
  },
  {
    "text": "super super handy for attributing that to say Google analytics and giving you kind of consistent I know",
    "start": "1912679",
    "end": "1919820"
  },
  {
    "text": "when a user is returning to my website to improve improve Analytics",
    "start": "1919820",
    "end": "1927639"
  },
  {
    "text": "uh so that they're kind of the the various different types of compute and reasons that you would run compute",
    "start": "1930919",
    "end": "1936500"
  },
  {
    "text": "before and after the the CDN cache",
    "start": "1936500",
    "end": "1942159"
  },
  {
    "text": "so just to sum up kind of what the edge is uh it it pretty much is just allows",
    "start": "1942500",
    "end": "1948500"
  },
  {
    "text": "you to run compute in those points of presence so rather than having to run your origin server and all of your code",
    "start": "1948500",
    "end": "1955360"
  },
  {
    "text": "in a data center in Azure where if you want to set up multi-region",
    "start": "1955360",
    "end": "1960380"
  },
  {
    "text": "architectures it becomes really complicated and the cost goes up you can",
    "start": "1960380",
    "end": "1965600"
  },
  {
    "text": "just move that compute closer to your users and leverage all of those little",
    "start": "1965600",
    "end": "1971480"
  },
  {
    "text": "servers they have in thousands and thousands of points of presence around the world um and that makes a huge difference to",
    "start": "1971480",
    "end": "1978140"
  },
  {
    "text": "how responsive your website is it can run theoretically in four different places the viewer request the origin",
    "start": "1978140",
    "end": "1986120"
  },
  {
    "text": "request origin response and viewer response they're kind of the four logical places that you can run compute",
    "start": "1986120",
    "end": "1991880"
  },
  {
    "text": "each of the clouds call these different things this terminology is more specific",
    "start": "1991880",
    "end": "1997039"
  },
  {
    "text": "to AWS but um the concepts move between the different clouds uh you can also now",
    "start": "1997039",
    "end": "2004419"
  },
  {
    "text": "run Astro remix next JS you can deploy Edge functions and so it will deploy",
    "start": "2004419",
    "end": "2011380"
  },
  {
    "text": "your website as functions to all of these points presences around the world and you don't even have to run an origin",
    "start": "2011380",
    "end": "2017679"
  },
  {
    "text": "server which is really pretty nifty there's a new an example of kind of the",
    "start": "2017679",
    "end": "2023260"
  },
  {
    "text": "things that this unlocks there's a new open source tool called party kit and it is a SDK that's designed to help you",
    "start": "2023260",
    "end": "2030220"
  },
  {
    "text": "build collaborative applications so if you've ever gone into Google Docs or Miro where you are collaborating live",
    "start": "2030220",
    "end": "2036880"
  },
  {
    "text": "doing like a drawing application latency is is a massive Factor if it if",
    "start": "2036880",
    "end": "2042820"
  },
  {
    "text": "those every time you draw something it has to go back to your origin server and then deal with uh",
    "start": "2042820",
    "end": "2048760"
  },
  {
    "text": "putting that back out to all of the end users it can be quite slow and and",
    "start": "2048760",
    "end": "2054580"
  },
  {
    "text": "latency really really adds up and makes the feel of those products really really crappy so up until now it's been really",
    "start": "2054580",
    "end": "2061000"
  },
  {
    "text": "hard to build those sort of collaborative experiences party kit leverages cdns to build that multiplayer",
    "start": "2061000",
    "end": "2068638"
  },
  {
    "text": "capability into your app leveraging compute running in all of these points",
    "start": "2068639",
    "end": "2073960"
  },
  {
    "text": "of presence so you can write your own logic it takes care of running that in all of these points of presence plus",
    "start": "2073960",
    "end": "2080080"
  },
  {
    "text": "giving you that kind of multiplayer capability it's pretty pretty cool project only just come out but it's an",
    "start": "2080080",
    "end": "2086378"
  },
  {
    "text": "example of of how the edge is being used to kind of further these experiences",
    "start": "2086379",
    "end": "2093520"
  },
  {
    "text": "um you've got HTTP fundamentals is is kind of the next thing I want to chat about because without understanding kind",
    "start": "2093520",
    "end": "2100660"
  },
  {
    "text": "of the building blocks there's a lot of traps with caching and CDN so let's just",
    "start": "2100660",
    "end": "2106300"
  },
  {
    "text": "take a step back and talk a little bit about HTTP fundamentals uh and because I always like to to kind of look into the",
    "start": "2106300",
    "end": "2113800"
  },
  {
    "text": "what and why and and kind of how we got to these areas",
    "start": "2113800",
    "end": "2119440"
  },
  {
    "text": "so HTTP has a concept called Methods for uh which these",
    "start": "2119440",
    "end": "2126880"
  },
  {
    "text": "each method has kind of different semantics associated with them one of the semantics associated with the",
    "start": "2126880",
    "end": "2133000"
  },
  {
    "text": "different methods is if that can be cached or not so get and head requests for instance they are cachable you you",
    "start": "2133000",
    "end": "2139900"
  },
  {
    "text": "should always be assuming that your get requests could be cached and this is a",
    "start": "2139900",
    "end": "2145720"
  },
  {
    "text": "reason why they always the the best practices never put anything in your application that mutates state inside a",
    "start": "2145720",
    "end": "2153220"
  },
  {
    "text": "get request because if you're relying on that state being mutated in a get request and then suddenly something",
    "start": "2153220",
    "end": "2159520"
  },
  {
    "text": "caches that that side effect will not be happening anymore so get and head",
    "start": "2159520",
    "end": "2165099"
  },
  {
    "text": "requests shouldn't mutate State because they are inherently cachable post is",
    "start": "2165099",
    "end": "2170320"
  },
  {
    "text": "sometimes cachable but generally I I try and make it so it's considered an item",
    "start": "2170320",
    "end": "2176800"
  },
  {
    "text": "potent endpoint which means if you do the same thing multiple times you end up with in the same spot and then the rest",
    "start": "2176800",
    "end": "2184180"
  },
  {
    "text": "of these HTTP methods are not cash so proxy cdns browsers won't cache those",
    "start": "2184180",
    "end": "2192099"
  },
  {
    "text": "methods so that's the first kind of uh basic there's also a heap of different",
    "start": "2192099",
    "end": "2197980"
  },
  {
    "text": "type of caches when when working in the web so you've got your private cache which is the browser",
    "start": "2197980",
    "end": "2204240"
  },
  {
    "text": "proxies are more let's say your internet service provider these were more",
    "start": "2204240",
    "end": "2209640"
  },
  {
    "text": "prevalent when the web was HTTP so they could actually store copies of web pages",
    "start": "2209640",
    "end": "2215320"
  },
  {
    "text": "inside your ISP to so your internet service provider rather so if you've got",
    "start": "2215320",
    "end": "2221560"
  },
  {
    "text": "a bunch of people on a mobile network they could cache a copy of the website and then share that cash copy for every",
    "start": "2221560",
    "end": "2229060"
  },
  {
    "text": "user on their mobile network https puts a stop to that so that that one's kind of dying a",
    "start": "2229060",
    "end": "2235900"
  },
  {
    "text": "little bit the next one is this this managed shared cache which is uh reverse",
    "start": "2235900",
    "end": "2241180"
  },
  {
    "text": "proxies or cdns and the reason they can work is they in terms of https is they",
    "start": "2241180",
    "end": "2249339"
  },
  {
    "text": "terminate https so if you are using a CDN the request hits the CDN that's",
    "start": "2249339",
    "end": "2255640"
  },
  {
    "text": "where the SSL cert is terminated and if if you're running an SSL back end it",
    "start": "2255640",
    "end": "2262060"
  },
  {
    "text": "will establish its own SSL connection to your origin server but it always",
    "start": "2262060",
    "end": "2267960"
  },
  {
    "text": "terminates at the CDN layer and that's how it can read the content because",
    "start": "2267960",
    "end": "2273359"
  },
  {
    "text": "https stops anything in transit from being able to read that content so",
    "start": "2273359",
    "end": "2279520"
  },
  {
    "text": "that's kind of how they go get around that and and comprise provide all these caching capabilities is by being a SSL",
    "start": "2279520",
    "end": "2286240"
  },
  {
    "text": "termination point but that your website can essentially be cached by any of these the main way you control that is",
    "start": "2286240",
    "end": "2294579"
  },
  {
    "text": "with the cache control header or the CDN cache control header they're the same header but the CDN cache control header",
    "start": "2294579",
    "end": "2302020"
  },
  {
    "text": "will only be looked at by the CDN and then it will be stripped off and not returned to the end user the advantage",
    "start": "2302020",
    "end": "2310119"
  },
  {
    "text": "of this is that you can actually have different caching strategies for the",
    "start": "2310119",
    "end": "2315400"
  },
  {
    "text": "private cache or the browser and the CDN cache where this is really really handy",
    "start": "2315400",
    "end": "2320619"
  },
  {
    "text": "is if you make a mistake in your caching or you're doing a new deployment and you",
    "start": "2320619",
    "end": "2325660"
  },
  {
    "text": "need to stop that cache cdns allow you to invalidate the cache",
    "start": "2325660",
    "end": "2330940"
  },
  {
    "text": "but you can't invalidate a brow like end users browsers if you cache something in",
    "start": "2330940",
    "end": "2336460"
  },
  {
    "text": "there you're kind of stuffed so what you want to do is use these headers",
    "start": "2336460",
    "end": "2341560"
  },
  {
    "text": "cash heavily inside your CDN if you can but don't really cache inside the",
    "start": "2341560",
    "end": "2348040"
  },
  {
    "text": "browser unless you know it's safe to do so so there's different there's quite a",
    "start": "2348040",
    "end": "2353140"
  },
  {
    "text": "few different options private means it's only allowed to be stored in the private cache or in the browser this instructs a",
    "start": "2353140",
    "end": "2359740"
  },
  {
    "text": "CDN then it's not allowed to store this an example of when you'd use that is for auth if there's anything private about",
    "start": "2359740",
    "end": "2368260"
  },
  {
    "text": "the user it's like setting cookies or anything like that private",
    "start": "2368260",
    "end": "2375099"
  },
  {
    "text": "no store do not store this in any of the caches you can also we saw this earlier you can",
    "start": "2375099",
    "end": "2382240"
  },
  {
    "text": "say max age equals number of seconds or you can also do s match max age which is",
    "start": "2382240",
    "end": "2387460"
  },
  {
    "text": "a shared same same directive but it is only interpreted by the shared cache",
    "start": "2387460",
    "end": "2393099"
  },
  {
    "text": "which is your seat again you can also specify that something is immutable so massive max age it's",
    "start": "2393099",
    "end": "2400300"
  },
  {
    "text": "immutable this file will never change we'll cover a kind of a Nifty example of",
    "start": "2400300",
    "end": "2406359"
  },
  {
    "text": "that later and then if you are caching you can tell the CDM that it must",
    "start": "2406359",
    "end": "2412000"
  },
  {
    "text": "revalidate to make sure that its cached copy is the latest copy so there's all",
    "start": "2412000",
    "end": "2417160"
  },
  {
    "text": "of these directives in the cache control headoff and we saw this a bit earlier that allow",
    "start": "2417160",
    "end": "2423640"
  },
  {
    "text": "you to control exactly how your content is cached and this has been built into the HTTP spec for ages and it's a really",
    "start": "2423640",
    "end": "2431079"
  },
  {
    "text": "really powerful tool if even if you are not using a CDN you should have an idea",
    "start": "2431079",
    "end": "2436240"
  },
  {
    "text": "of these sort of cache control headers to to be explicit about how your content can be stored in the various caches",
    "start": "2436240",
    "end": "2444480"
  },
  {
    "text": "the next one if you were looking uh very closely at some of my previous examples",
    "start": "2444760",
    "end": "2450820"
  },
  {
    "text": "you might have kind of thought well how do you make sure that if I'm serving",
    "start": "2450820",
    "end": "2456339"
  },
  {
    "text": "asking for image.png and then I'm changing the format how do I make sure that uh that I'm not",
    "start": "2456339",
    "end": "2464079"
  },
  {
    "text": "serving the wrong format to the wrong people and the way you do that is with",
    "start": "2464079",
    "end": "2469300"
  },
  {
    "text": "something called The Very header so the very header when I'm getting my webp and",
    "start": "2469300",
    "end": "2475800"
  },
  {
    "text": "jpeg image my server can actually add a response",
    "start": "2475800",
    "end": "2481060"
  },
  {
    "text": "header called very accept this essentially directs the CDN to say I want to create a cache key which matches",
    "start": "2481060",
    "end": "2488380"
  },
  {
    "text": "on not just the URL but it also matches on the accept header so you can you can",
    "start": "2488380",
    "end": "2494800"
  },
  {
    "text": "kind of bucket your your caches up with these different composite cache keys and",
    "start": "2494800",
    "end": "2500020"
  },
  {
    "text": "and to use the very header to tell the browser what additional headers that you want to cache on",
    "start": "2500020",
    "end": "2507820"
  },
  {
    "text": "um something to be aware of with here is different CDN support there so like for",
    "start": "2507820",
    "end": "2514359"
  },
  {
    "text": "instance cloudflare only supports using this for this scenario the image",
    "start": "2514359",
    "end": "2520720"
  },
  {
    "text": "scenario it's not a general purpose for all cdns other cdns like AWS you can use",
    "start": "2520720",
    "end": "2527980"
  },
  {
    "text": "it for more scenarios so just something to be aware of but what this allows you to do is if I",
    "start": "2527980",
    "end": "2534700"
  },
  {
    "text": "when I'm asking for a PNG but I only accept the image PNG I have a different",
    "start": "2534700",
    "end": "2540760"
  },
  {
    "text": "match requirement so now when my first one comes in it will match the cache",
    "start": "2540760",
    "end": "2546820"
  },
  {
    "text": "from the first request not the second request because I varied on the accept",
    "start": "2546820",
    "end": "2552040"
  },
  {
    "text": "header and it uses the accept header to figure out which version of the cached request response rather that it is going",
    "start": "2552040",
    "end": "2559839"
  },
  {
    "text": "to return so that's very very header there's a",
    "start": "2559839",
    "end": "2564880"
  },
  {
    "text": "bunch of others that I won't go into like last modified if modified since and",
    "start": "2564880",
    "end": "2570700"
  },
  {
    "text": "this is around uh if it can fetch updated or if the",
    "start": "2570700",
    "end": "2576040"
  },
  {
    "text": "content has changed rather e-tags are another method around this where you can hash the content and it can efficiently",
    "start": "2576040",
    "end": "2584260"
  },
  {
    "text": "say this is my last e-tag that I knew about if the server has it has newer",
    "start": "2584260",
    "end": "2591160"
  },
  {
    "text": "content it can then say the content has changed and send the response otherwise it can just say yep you got the latest",
    "start": "2591160",
    "end": "2597760"
  },
  {
    "text": "copy use the copy in your cache so there's a bunch of other tags which are which are pretty handy",
    "start": "2597760",
    "end": "2604500"
  },
  {
    "text": "fundamental summary get head requests cachable post",
    "start": "2604839",
    "end": "2610660"
  },
  {
    "text": "sometimes can be cachable other methods are not cachable at all so be specific",
    "start": "2610660",
    "end": "2616599"
  },
  {
    "text": "in which hdb methods you're using they can affect a whole bunch of different things and have different semantics the",
    "start": "2616599",
    "end": "2623020"
  },
  {
    "text": "cache control headers allow you to instruct all of these various proxies",
    "start": "2623020",
    "end": "2628599"
  },
  {
    "text": "and and caches that exist on the internet how they're allowed to store your content and the Very header is used",
    "start": "2628599",
    "end": "2636099"
  },
  {
    "text": "to kind of segregate into multiple cache copies or make it more specific",
    "start": "2636099",
    "end": "2642240"
  },
  {
    "text": "Now tips tricks and gotchas there's some interesting ones and here are kind of my favorite examples of of where you can",
    "start": "2643180",
    "end": "2650200"
  },
  {
    "text": "use it so cache busted URLs if you use a JavaScript build tool or any sort of web",
    "start": "2650200",
    "end": "2656500"
  },
  {
    "text": "build tool you've probably noticed that um like webpack for instance produces",
    "start": "2656500",
    "end": "2663160"
  },
  {
    "text": "files that look something like this it's got like the chunk name and then it's got a random string now the whole reason",
    "start": "2663160",
    "end": "2671020"
  },
  {
    "text": "around this is for uh making these infinitely cachable or immutable files",
    "start": "2671020",
    "end": "2678220"
  },
  {
    "text": "so generally this is what the you instruct the build tool to do is create these static assets as chunk name Dash",
    "start": "2678220",
    "end": "2685480"
  },
  {
    "text": "file Hash A hashing algorithm is a one-way transformation of the file in",
    "start": "2685480",
    "end": "2691660"
  },
  {
    "text": "this case the file content to a string so if the file content changes at all it",
    "start": "2691660",
    "end": "2698260"
  },
  {
    "text": "will end up with a different suffix on the URL so that means that if for any",
    "start": "2698260",
    "end": "2703720"
  },
  {
    "text": "given URL it can only have that exact content",
    "start": "2703720",
    "end": "2709359"
  },
  {
    "text": "which means I can instruct the CDN and the private cache that this file can be",
    "start": "2709359",
    "end": "2714579"
  },
  {
    "text": "cached forever really really handy because then the private cache on the website when they re-return to your",
    "start": "2714579",
    "end": "2721119"
  },
  {
    "text": "website won't even hit the CDN it will keep copies of of all of your static assets so this is something that's super",
    "start": "2721119",
    "end": "2727839"
  },
  {
    "text": "super handy and you should be taking advantage of because Eve egress costs",
    "start": "2727839",
    "end": "2733119"
  },
  {
    "text": "still cost on your CDN it is still cheaper to not serve any traffic so cash",
    "start": "2733119",
    "end": "2739300"
  },
  {
    "text": "busting all of your static assets can save you a bit of money if you've got any kind of volume of traffic",
    "start": "2739300",
    "end": "2745900"
  },
  {
    "text": "um has anyone had an issue or seen in the news where a website suddenly is you're like logged in as a different",
    "start": "2745900",
    "end": "2751960"
  },
  {
    "text": "user has anyone had that happen before yeah I've had it happen it sucks uh",
    "start": "2751960",
    "end": "2757480"
  },
  {
    "text": "these These are kind of one of the worst security instance instances the incidences you can have",
    "start": "2757480",
    "end": "2764380"
  },
  {
    "text": "um but it basically comes from if you set a cookie on your response from your",
    "start": "2764380",
    "end": "2770140"
  },
  {
    "text": "server and you have caching set up you are going to end up with a bad time",
    "start": "2770140",
    "end": "2776619"
  },
  {
    "text": "um the the what it's actually called when this happens is Cash poisoning so you have inputs to your request those",
    "start": "2776619",
    "end": "2784780"
  },
  {
    "text": "are kind of the URL or the um accept header or various other things that",
    "start": "2784780",
    "end": "2791200"
  },
  {
    "text": "makes up your cash key if your origin server is looking at more information on",
    "start": "2791200",
    "end": "2797680"
  },
  {
    "text": "that request like you aren't caching or you're not saying the authorization",
    "start": "2797680",
    "end": "2802780"
  },
  {
    "text": "header or the authorization cookie is part of the cache key and then you are looking at the user cookie on the server",
    "start": "2802780",
    "end": "2811240"
  },
  {
    "text": "you are going to end up with a bad time and so some of the rules to get around this is make sure your origin server is",
    "start": "2811240",
    "end": "2819579"
  },
  {
    "text": "only looking at stuff in that request that is part of the cache key",
    "start": "2819579",
    "end": "2825480"
  },
  {
    "text": "and and what what that allows you to set up is let's say you've got your callback endpoints for oauth those should set all",
    "start": "2825480",
    "end": "2833560"
  },
  {
    "text": "of the no cash private um cache control headers to just say this can never be cached because I am",
    "start": "2833560",
    "end": "2840160"
  },
  {
    "text": "looking at a whole bunch of user specific and request specific information",
    "start": "2840160",
    "end": "2845280"
  },
  {
    "text": "that I don't want to have so when when it when users get logged in as someone",
    "start": "2845280",
    "end": "2850420"
  },
  {
    "text": "else all that's happened is the server has got a response it is gone okay I'm",
    "start": "2850420",
    "end": "2856960"
  },
  {
    "text": "going to set the auth cookie for this user so it's a set cookie header that",
    "start": "2856960",
    "end": "2863079"
  },
  {
    "text": "then gets cached by the CDN next user comes in gets the cached response it's",
    "start": "2863079",
    "end": "2868300"
  },
  {
    "text": "still got that set cookie header now the second user that's come along has got that auth cookie for the first user",
    "start": "2868300",
    "end": "2874780"
  },
  {
    "text": "that's cash poisoning and it's incredibly easy to do as soon as you have a a cache in front of your your",
    "start": "2874780",
    "end": "2881380"
  },
  {
    "text": "website so it's one of the biggest call outs and if you take anything away from this talk it is make sure when you start",
    "start": "2881380",
    "end": "2887740"
  },
  {
    "text": "playing around with the caching that you're really really careful around anything to do with auth and if you are",
    "start": "2887740",
    "end": "2893200"
  },
  {
    "text": "setting cookies it can be once you set that cache as I said if it",
    "start": "2893200",
    "end": "2899319"
  },
  {
    "text": "ends up in the browser cache it's very hard to get rid of so when we did it we",
    "start": "2899319",
    "end": "2904720"
  },
  {
    "text": "actually had to write code which we deployed to our application that went",
    "start": "2904720",
    "end": "2910000"
  },
  {
    "text": "and found these poisoned cookies and deleted them from the end users end user's browser so it's a it's one of",
    "start": "2910000",
    "end": "2917440"
  },
  {
    "text": "those ones that are super super annoying and you see these post-mortems from",
    "start": "2917440",
    "end": "2922720"
  },
  {
    "text": "different companies that are having it probably every 12 months or so so it is a reasonably common problem the other",
    "start": "2922720",
    "end": "2929260"
  },
  {
    "text": "thing is as I said caches should be um should be",
    "start": "2929260",
    "end": "2934599"
  },
  {
    "text": "sorry get request should be cachable and so what you if there is a body attach",
    "start": "2934599",
    "end": "2940480"
  },
  {
    "text": "the get request don't look at it I generally one of the cash poisoning attacks that people do is if you can put",
    "start": "2940480",
    "end": "2948280"
  },
  {
    "text": "anything in any header like a value and then that value is included in the",
    "start": "2948280",
    "end": "2955240"
  },
  {
    "text": "response so any inputs of that affect the response but that input isn't in the",
    "start": "2955240",
    "end": "2961420"
  },
  {
    "text": "cache key that is when you are opening yourself to a a cash poisoning attack so",
    "start": "2961420",
    "end": "2967780"
  },
  {
    "text": "um just make sure you you kind of line up whatever your request on your origin",
    "start": "2967780",
    "end": "2974079"
  },
  {
    "text": "server is doing make sure that's lined up with your cache key in your CDN",
    "start": "2974079",
    "end": "2979720"
  },
  {
    "text": "um the other really really Nifty uh thing that I I often do is I have a",
    "start": "2979720",
    "end": "2985480"
  },
  {
    "text": "single page application let's say we're running next JS one of the problems is it you often bake your config into the",
    "start": "2985480",
    "end": "2993940"
  },
  {
    "text": "build process which means if you're deploying to Dev Dev needs to know where the API is to be able to make API calls",
    "start": "2993940",
    "end": "3001020"
  },
  {
    "text": "you generally provide that as a environmental variable at build time to",
    "start": "3001020",
    "end": "3006720"
  },
  {
    "text": "your next JS application against included into your bundle a really really Nifty trick is I can include a",
    "start": "3006720",
    "end": "3015300"
  },
  {
    "text": "script tag to config.js inside my HTML that I return",
    "start": "3015300",
    "end": "3020599"
  },
  {
    "text": "so get a index.html to the CDN it goes",
    "start": "3020599",
    "end": "3025680"
  },
  {
    "text": "to my static file server to return that HTML file I'm going to configure some path rules",
    "start": "3025680",
    "end": "3032819"
  },
  {
    "text": "that basically say okay for config.js route that request to my API so the",
    "start": "3032819",
    "end": "3039839"
  },
  {
    "text": "browser doesn't need to know what the URL of my API is my CDN knows what that",
    "start": "3039839",
    "end": "3045660"
  },
  {
    "text": "is so when I get my config.js it can hit my API and it can return a route that",
    "start": "3045660",
    "end": "3052800"
  },
  {
    "text": "looks something like this I realize that might be hard because of the the screen that's low but this um this request",
    "start": "3052800",
    "end": "3059220"
  },
  {
    "text": "essentially returns a Javascript file and I've put some JavaScript in the",
    "start": "3059220",
    "end": "3064440"
  },
  {
    "text": "response which is window.content equals API URL equals the the URL of the API",
    "start": "3064440",
    "end": "3073020"
  },
  {
    "text": "and then whatever other config that you might want because it's far easier to",
    "start": "3073020",
    "end": "3079140"
  },
  {
    "text": "manage config inside a server rather than these static websites so this is a trick I use a lot to to give my config",
    "start": "3079140",
    "end": "3086940"
  },
  {
    "text": "to my CD sorry to my single page each application and so essentially your API",
    "start": "3086940",
    "end": "3093000"
  },
  {
    "text": "can just return its own URL to the front end now anywhere in my front end app I can just go",
    "start": "3093000",
    "end": "3099500"
  },
  {
    "text": "window.config.api URL and use that for my fetch requests super super example simple example of",
    "start": "3099500",
    "end": "3106680"
  },
  {
    "text": "how you can use that flexibility of the CDN and multiple Origins to get a really really nice outcome the other thing you",
    "start": "3106680",
    "end": "3113760"
  },
  {
    "text": "can do with this scenario is you can map slash API to your API origin and I'm",
    "start": "3113760",
    "end": "3121319"
  },
  {
    "text": "sure if you do web development you've hit cause errors before where you can't call your API well if you've if you're",
    "start": "3121319",
    "end": "3127680"
  },
  {
    "text": "just mapping a path to your API cause problems go away because it's all the same domain it's not cross-domain",
    "start": "3127680",
    "end": "3133740"
  },
  {
    "text": "anymore cause issues disappear so some really Nifty examples of how you can just use path mapping routing to",
    "start": "3133740",
    "end": "3140160"
  },
  {
    "text": "different Origins to get away some from some really annoying problems",
    "start": "3140160",
    "end": "3145619"
  },
  {
    "text": "so that's been cdn's 101 I hope you have a few takeaways there and and it gives",
    "start": "3145619",
    "end": "3151559"
  },
  {
    "text": "you kind of the tools in your toolbox to navigate what I found a pretty daunting subject when I first got into playing",
    "start": "3151559",
    "end": "3159359"
  },
  {
    "text": "with them I built line of business applications before and cdns were just kind of this thing that I'd heard about",
    "start": "3159359",
    "end": "3165839"
  },
  {
    "text": "like Akamai have some delivery Network and didn't really understand what it is",
    "start": "3165839",
    "end": "3171420"
  },
  {
    "text": "and and how to how to use it and then throughout various projects I had to",
    "start": "3171420",
    "end": "3176579"
  },
  {
    "text": "learn to to make use of cdns and realized how valuable a tool they are so",
    "start": "3176579",
    "end": "3183480"
  },
  {
    "text": "that's been cdns 101 I think to everyone for rocking up at 9am on a on a Thursday",
    "start": "3183480",
    "end": "3188520"
  },
  {
    "text": "but thanks very much [Applause]",
    "start": "3188520",
    "end": "3196630"
  }
]