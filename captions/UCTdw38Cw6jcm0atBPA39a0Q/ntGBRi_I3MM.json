[
  {
    "start": "0",
    "end": "127000"
  },
  {
    "text": "well it's 114 are we on yes we are so hello everyone",
    "start": "8650",
    "end": "14750"
  },
  {
    "text": "thanks for having me here at MDC Oslo I'm very happy to be here my name is Cara Zygmunt I work on dotnet",
    "start": "14750",
    "end": "21259"
  },
  {
    "text": "team and I'm gonna tell you something about war stories from dotnet team where I have been for last 14 years and a",
    "start": "21259",
    "end": "28340"
  },
  {
    "text": "little disclaimer before we start I rehearsed the talk this morning and",
    "start": "28340",
    "end": "33649"
  },
  {
    "text": "found out there is lot too much content so I removed some and then I did Twitter Paul you know if you you know if you",
    "start": "33649",
    "end": "38930"
  },
  {
    "text": "want advice what do you do you go to Twitter right and Twitter poll told me like yep it's better it's better to kind",
    "start": "38930",
    "end": "46070"
  },
  {
    "text": "of pace through so I apologize for some of those stories that I'm gonna talk about I'm gonna probe a little bit",
    "start": "46070",
    "end": "52399"
  },
  {
    "text": "faster so just heads up and what I'm gonna talk about I'm gonna talk about",
    "start": "52399",
    "end": "58159"
  },
  {
    "text": "stories so stories from that I mostly lived through either directly as a developer or maybe you know as a manager",
    "start": "58159",
    "end": "66409"
  },
  {
    "text": "that this has been on my team some of the stories are actually not that I directed was involved but it's something from the team and stories that I kind of",
    "start": "66409",
    "end": "72860"
  },
  {
    "text": "think are cool most leaders are some investigations on.net team run time base class library something like that and",
    "start": "72860",
    "end": "78560"
  },
  {
    "text": "they're not just for me and hopefully I'm gonna show you as well or in order the key to some kind of lessons that we",
    "start": "78560",
    "end": "84350"
  },
  {
    "text": "have learned along the way from some of these cool and or interesting at least investigations so what's not on the",
    "start": "84350",
    "end": "91250"
  },
  {
    "text": "agenda you won't see any source code you won't see any debugger there is one call stack and that's it so if you if you",
    "start": "91250",
    "end": "98300"
  },
  {
    "text": "expect debugger and source code this is the wrong talk please leave or don't get is appointed something like that",
    "start": "98300",
    "end": "105140"
  },
  {
    "text": "and you don't need any deep knowledge of dotnet I'm gonna explain some of the concepts but you know if you miss them",
    "start": "105140",
    "end": "110420"
  },
  {
    "text": "that fine if you are into debugging and advanced debugging techniques this is the torque",
    "start": "110420",
    "end": "116420"
  },
  {
    "text": "you should have been to yesterday so those are critter guys Kevin and Christoph and they did awesome job",
    "start": "116420",
    "end": "123560"
  },
  {
    "text": "between dbg no such stuff over here I'm gonna start with my first story so my",
    "start": "123560",
    "end": "129500"
  },
  {
    "start": "127000",
    "end": "264000"
  },
  {
    "text": "first serious investigation on dotnet team happened actually quite early so it",
    "start": "129500",
    "end": "135950"
  },
  {
    "text": "was 2006 I joined 2005 in October so I was three months in and this investigation kind of",
    "start": "135950",
    "end": "142250"
  },
  {
    "text": "comes in which was pretty fun so it was some kind of build up team in Windows some component and",
    "start": "142250",
    "end": "148310"
  },
  {
    "text": "they're building their product and to set the expectation sorry so to set the",
    "start": "148310",
    "end": "153740"
  },
  {
    "text": "context I was in owner as I joined I was owner of metadata component part of the CLR for the right time so they have this",
    "start": "153740",
    "end": "160760"
  },
  {
    "text": "you know you know this built lab you know dozens of machines you know crunching builds every night probably",
    "start": "160760",
    "end": "166760"
  },
  {
    "text": "multiple times a day and what happens like roughly once per week they get a build break and the build break is",
    "start": "166760",
    "end": "172460"
  },
  {
    "text": "actually access violation dialogue back then nobody nothing dismissed it so they had to login on the machine you know",
    "start": "172460",
    "end": "178940"
  },
  {
    "text": "click the ok and restart the bill kind of like bummer on productivity and so",
    "start": "178940",
    "end": "184670"
  },
  {
    "text": "they started investigating they went through like oh it must be a mess no problem so they involved I must build people a mess bill people said like you",
    "start": "184670",
    "end": "190550"
  },
  {
    "text": "know ok take out the c-sharp compiler or you know repro or the command line try that ok that's in c-sharp let's move it to",
    "start": "190550",
    "end": "196730"
  },
  {
    "text": "c-sharp compiler c-sharp compiler look at that and they said like yep that's somewhere in metadata so boom curl you",
    "start": "196730",
    "end": "202130"
  },
  {
    "text": "go that was actually the investigation before that happened what was funny that they notice that heavy actually updated",
    "start": "202130",
    "end": "209240"
  },
  {
    "text": "tool set of the CLR of the compiler just few weeks ago that must be it like you",
    "start": "209240",
    "end": "214820"
  },
  {
    "text": "know we updated to to 2.0 RTM suddenly it started failing you're it it's your problem I was interesting attitude and you know",
    "start": "214820",
    "end": "222410"
  },
  {
    "text": "they were kind of right as you still see so the good news is that these people were smart very good and they try to",
    "start": "222410",
    "end": "229970"
  },
  {
    "text": "create a repro for us which is you know lifesaver so first they tried it and you know kind of inner loop building the",
    "start": "229970",
    "end": "236540"
  },
  {
    "text": "same stuff over and over again it Reynaud failed roughly once in 50/50 runs which is great and then ray your",
    "start": "236540",
    "end": "243770"
  },
  {
    "text": "internet overnight and you know you see some numbers 77 77 thousand iterations over now overnight actually over weekend",
    "start": "243770",
    "end": "250160"
  },
  {
    "text": "I believe or overnight I don't remember 250 cash 247 crashes so you know some",
    "start": "250160",
    "end": "255980"
  },
  {
    "text": "significant reproducible things so good we have very Pro before I you know and out of the repros we actually got call",
    "start": "255980",
    "end": "262730"
  },
  {
    "text": "stack before I showed the call stack there was some funny quotes actually in the old emails I found out so the first",
    "start": "262730",
    "end": "269330"
  },
  {
    "start": "264000",
    "end": "371000"
  },
  {
    "text": "one first one basically said that hey it looks like from the call stack that's some boilerplate stack checking code is",
    "start": "269330",
    "end": "276890"
  },
  {
    "text": "wrong now I wasn't you know experience enough free months in the job right if I saw it today the first thing",
    "start": "276890",
    "end": "283100"
  },
  {
    "text": "would be like alarm alarm this is a you know security issue as soon as you mess up it's called wit stack you know",
    "start": "283100",
    "end": "288530"
  },
  {
    "text": "something is wrong and it's gonna bite you anyway back then nobody noticed that so we went",
    "start": "288530",
    "end": "294650"
  },
  {
    "text": "on and other funny you know comment you know rebels into email which basically",
    "start": "294650",
    "end": "301220"
  },
  {
    "text": "you know the person from C sharp team kind of ping me on I am like what do we do and I basically set back like you",
    "start": "301220",
    "end": "306650"
  },
  {
    "text": "know yeah this is great but I'm nuclear code so you gotta help me you have to you know it may take make",
    "start": "306650",
    "end": "313520"
  },
  {
    "text": "may take some time so they said it as well to the expectation of Anubis love it was you know pretty funny nothing",
    "start": "313520",
    "end": "318920"
  },
  {
    "text": "anyway we got the call stack this is the call stack I removed lines things so",
    "start": "318920",
    "end": "324560"
  },
  {
    "text": "make a little bit more readable at the bottom you see the c-sharp compiler higher up you see kind of the as low",
    "start": "324560",
    "end": "331160"
  },
  {
    "text": "c-sharp compiler which is kind of like emitting metadata and at the top of the call stack it's us and over there",
    "start": "331160",
    "end": "338090"
  },
  {
    "text": "there's some kind of readwrite lock which suddenly blows up and AV so",
    "start": "338090",
    "end": "343220"
  },
  {
    "text": "obviously it was not enough luckily we got like heap dumps so we could look at the assembly code so that was a great",
    "start": "343220",
    "end": "350300"
  },
  {
    "text": "three days of learning how to use my latent knowledge of x86 assembly and",
    "start": "350300",
    "end": "358490"
  },
  {
    "text": "figure out like you know what's what the locals what are the parameters how it flows and debugging through that it was",
    "start": "358490",
    "end": "364790"
  },
  {
    "text": "lots of fun and great learning opportunity if you want to run assembly I recommend some issue like that like",
    "start": "364790",
    "end": "369890"
  },
  {
    "text": "really really useful so first thing on that you know when you get schools like",
    "start": "369890",
    "end": "374990"
  },
  {
    "start": "371000",
    "end": "460000"
  },
  {
    "text": "like that get heap dumps so it's like who corrupts the stack and because we are in the world of managed code like GC",
    "start": "374990",
    "end": "382130"
  },
  {
    "text": "and loop and why not because this is",
    "start": "382130",
    "end": "387260"
  },
  {
    "text": "c-sharp compiler remember this is before Roslyn even existed or was a thing so it was all native so GC doesn't even run",
    "start": "387260",
    "end": "394430"
  },
  {
    "text": "right that the parts of the metadata emitter or metadata reader was actually you know does the native part of the",
    "start": "394430",
    "end": "401090"
  },
  {
    "text": "code and no GC ever run so no GC wasn't it when I dug deeper I found it actually",
    "start": "401090",
    "end": "406960"
  },
  {
    "text": "there were you know there was one call you know on the coast a car up on the coast I guess we've seen that sudden",
    "start": "406960",
    "end": "412500"
  },
  {
    "text": "some data change like you know on one hand it was like I'll make it up five and if you look further down it was four",
    "start": "412500",
    "end": "419720"
  },
  {
    "text": "turns out that it was actually a single bit change you look at that and say like",
    "start": "419720",
    "end": "425240"
  },
  {
    "text": "who corrupts you know just one single bit what could it be could it be like GC",
    "start": "425240",
    "end": "430770"
  },
  {
    "text": "car table like updates you know those are the kind of weird things that set up things and then like now like we already",
    "start": "430770",
    "end": "436140"
  },
  {
    "text": "said there's no GC in that process so I was actually good experience of like myself and as well others first jumping",
    "start": "436140",
    "end": "443130"
  },
  {
    "text": "to conclusions to the known patterns and then realizing like yeah they are not quite applicable when you think that",
    "start": "443130",
    "end": "448200"
  },
  {
    "text": "they should be so GC it is not it so what else could it be could it be like Hardware flaky like that sounds stupid",
    "start": "448200",
    "end": "455250"
  },
  {
    "text": "right you know why would it be always on the call stack but maybe maybe yes turns",
    "start": "455250",
    "end": "461850"
  },
  {
    "start": "460000",
    "end": "646000"
  },
  {
    "text": "out that you know it was actually a hardware issue so I know how I found out",
    "start": "461850",
    "end": "468419"
  },
  {
    "text": "I asked actually the team like so guys you know bar a chance doesn't reproduce only on one machine and the answer was",
    "start": "468419",
    "end": "474330"
  },
  {
    "text": "like how did you know well I had a hunch and then comes the next question so so",
    "start": "474330",
    "end": "481440"
  },
  {
    "text": "long story short probably memory or CPU whatever but then you know kind of you think about that it said like you know",
    "start": "481440",
    "end": "487140"
  },
  {
    "text": "so why does it fail always on the same coast that just doesn't make sense once per week right or once per iteration the",
    "start": "487140",
    "end": "493620"
  },
  {
    "text": "iterations once for 50 you know what I don't have good you know it's a good question why I have no good answer some",
    "start": "493620",
    "end": "501060"
  },
  {
    "text": "magic they took the machine out everything worked since then so that was my first investigation on the run time",
    "start": "501060",
    "end": "507690"
  },
  {
    "text": "team which I count found funny and interesting and which actually taught me some things and lesson that I learned",
    "start": "507690",
    "end": "515490"
  },
  {
    "text": "mostly from that is the debugging hardware eros is actually costly and hard and the key takeaway is that taught",
    "start": "515490",
    "end": "524070"
  },
  {
    "text": "me to ask always one question for anything which looks fishy weird and",
    "start": "524070",
    "end": "529140"
  },
  {
    "text": "stuff and that's does it repro only on one machine if the answer is oh we didn't try it on more machines like okay",
    "start": "529140",
    "end": "535110"
  },
  {
    "text": "I'll stop talking to you you try it on another machine when you see it on two machines then we can start talking",
    "start": "535110",
    "end": "540740"
  },
  {
    "text": "there's so now I come over as smart you know and everything it's not as that you",
    "start": "540740",
    "end": "546150"
  },
  {
    "text": "know took me actually won more hardware back to to can of debug and you know waste like one week or something and then I",
    "start": "546150",
    "end": "552179"
  },
  {
    "text": "finally learned this lesson and honestly since then that's the first thing I asked interestingly over my career",
    "start": "552179",
    "end": "559410"
  },
  {
    "text": "actually I ran into one issue which I don't remember exactly which was somewhat similar it was actually not",
    "start": "559410",
    "end": "565139"
  },
  {
    "text": "hardware issue but it was some driver issue so the the symptoms symptoms were that you got this weird thing happening",
    "start": "565139",
    "end": "571589"
  },
  {
    "text": "but only on certain machines which had the same I think graphics card or something with the same driver solution",
    "start": "571589",
    "end": "578040"
  },
  {
    "text": "to that like you know sometimes you might want to ask or I might want to ask back hey you know can you try different hardware just in case you know that you",
    "start": "578040",
    "end": "584910"
  },
  {
    "text": "can really reproduce it and actually there's one even extreme version of this if you know Mona Stevens she's our GC",
    "start": "584910",
    "end": "592110"
  },
  {
    "text": "guru for years like she's the she's awesome GC and when I talked with her",
    "start": "592110",
    "end": "597839"
  },
  {
    "text": "about this story and like how cool it is she's like look at me and like yeah you know what I don't even trust VMs this",
    "start": "597839",
    "end": "604829"
  },
  {
    "text": "was like back that's like 10 years ago whenever someone comes back in oh hey this is GC back first thing I'm asking",
    "start": "604829",
    "end": "609899"
  },
  {
    "text": "him like you know does it reproduce on real hardware if you don't have the answer I'm not even talking to you Oh",
    "start": "609899",
    "end": "616309"
  },
  {
    "text": "obviously sometimes we are right you know when there's business enough reason we do but it was funny that the",
    "start": "616309",
    "end": "621509"
  },
  {
    "text": "perspectives are very different and was in the time it was during the time when kind of VMs had like still kind of problems in their drivers and things and",
    "start": "621509",
    "end": "628290"
  },
  {
    "text": "things could get corrupted on behalf of your process and chasing down GC issues",
    "start": "628290",
    "end": "633989"
  },
  {
    "text": "is extremely difficult so that's how she shielded herself from that at least for a while probably she doesn't do it these",
    "start": "633989",
    "end": "639839"
  },
  {
    "text": "days because everything is VM and you know ask for people to try to reproduce it on real hardware all right so that's",
    "start": "639839",
    "end": "647069"
  },
  {
    "start": "646000",
    "end": "901000"
  },
  {
    "text": "my first story and because I started in metadata you know owning the metadata component I'm gonna continue with",
    "start": "647069",
    "end": "654059"
  },
  {
    "text": "another metadata story for that I'm gonna first introduce some kind of background on metadata format we all",
    "start": "654059",
    "end": "660749"
  },
  {
    "text": "need it so metadata in nutshell is basically describing your program if you",
    "start": "660749",
    "end": "666779"
  },
  {
    "text": "you know if you're not not developer so hopefully you are you know DLL or exhibit you have that there are two",
    "start": "666779",
    "end": "671999"
  },
  {
    "text": "parts there's the code the il which is for Java words is like basically the bytecode and there's the metadata",
    "start": "671999",
    "end": "678809"
  },
  {
    "text": "which describes ty who inherits from her what like you know which method starts at which offset and",
    "start": "678809",
    "end": "684630"
  },
  {
    "text": "those type of things and the metadata is basically just the database it was",
    "start": "684630",
    "end": "690120"
  },
  {
    "text": "interesting it was invented but for people who kind of came from database background so they use the first thing that they knew and it's a fitting format",
    "start": "690120",
    "end": "696870"
  },
  {
    "text": "actually it has rows it has columns it has tables example is table of type deaths which are you know definitions of",
    "start": "696870",
    "end": "704640"
  },
  {
    "text": "types and it in the table we have kind of rows kind of entry for each type and",
    "start": "704640",
    "end": "710700"
  },
  {
    "text": "each column is something like for example flags or you have their information about like type name",
    "start": "710700",
    "end": "716600"
  },
  {
    "text": "namespace you know what it extends or method list and we're gonna get to that",
    "start": "716600",
    "end": "722010"
  },
  {
    "text": "that's the important part the when you have references between these tables",
    "start": "722010",
    "end": "727350"
  },
  {
    "text": "they are not for example do strings are not exactly directly in just in the in the table the strings are on so called",
    "start": "727350",
    "end": "733680"
  },
  {
    "text": "string heap so on the side and you have only index into that now the trick is because back then when it was designed",
    "start": "733680",
    "end": "740370"
  },
  {
    "text": "like 20-plus years ago I believe back then like you know memory and or size",
    "start": "740370",
    "end": "745920"
  },
  {
    "text": "was very important so there's some kind of primitive compression basically saying like oh if the if you're indexing",
    "start": "745920",
    "end": "751530"
  },
  {
    "text": "something which is less than 64 K you can use only two bytes now if it's more",
    "start": "751530",
    "end": "756780"
  },
  {
    "text": "like okay you gotta use four bytes so basically statically pair each DLL or eggsy and you look at that you know it",
    "start": "756780",
    "end": "763170"
  },
  {
    "text": "has information like how many strings do we do I have how many you know methods I have how many types do I have and based",
    "start": "763170",
    "end": "770070"
  },
  {
    "text": "on that those those indexes are for specific references either two bytes or four bytes so what can go wrong with",
    "start": "770070",
    "end": "777750"
  },
  {
    "text": "that all right sorry skip too far so I need to invest first in a you know want",
    "start": "777750",
    "end": "785100"
  },
  {
    "text": "to explain what the method list means here so each type has some methods usually and the method list is a smart",
    "start": "785100",
    "end": "792300"
  },
  {
    "text": "way how to basically saying like hey here's my first method and there's a list and it goes on and goes down on",
    "start": "792300",
    "end": "798270"
  },
  {
    "text": "either until end of the table or until the next type method list starts so in",
    "start": "798270",
    "end": "805680"
  },
  {
    "text": "this example we have we have met at least you know method number 10 on type",
    "start": "805680",
    "end": "810900"
  },
  {
    "text": "full and type bar has starts method 11 which means that the type type",
    "start": "810900",
    "end": "816660"
  },
  {
    "text": "fool has only one method and it's going to be the method number 10 at index 10",
    "start": "816660",
    "end": "822180"
  },
  {
    "text": "hopefully clear so what happens if the last type def let's say the type bar in",
    "start": "822180",
    "end": "830129"
  },
  {
    "text": "this case doesn't have any methods what do you do if you look at the spec I'm gonna show it even later you basically",
    "start": "830129",
    "end": "837000"
  },
  {
    "text": "suppose to to kind of point it to the plus one so the next one that doesn't",
    "start": "837000",
    "end": "842790"
  },
  {
    "text": "exist so when you look up the method list you go to the to the index of method you see oh this is the one that",
    "start": "842790",
    "end": "849449"
  },
  {
    "text": "doesn't exist because I have only let's say 20 entries this is pointing at 21 okay I'm done no no entries all right",
    "start": "849449",
    "end": "857790"
  },
  {
    "text": "that makes sense this is the definition so method lists you know will be X plus",
    "start": "857790",
    "end": "863519"
  },
  {
    "text": "1 but what happens if you have exactly 64 K minus 1 methods you know that",
    "start": "863519",
    "end": "871529"
  },
  {
    "text": "that's not gonna end up well because if you add 1 to that what's gonna happen",
    "start": "871529",
    "end": "877160"
  },
  {
    "text": "you overflow and I said before like each",
    "start": "877160",
    "end": "882329"
  },
  {
    "text": "time you decide or add you know by sizes and everything do I use 2 by 2 bytes for",
    "start": "882329",
    "end": "887370"
  },
  {
    "text": "representation or 4 bytes because I have ffff methods how many bytes it is it's 2",
    "start": "887370",
    "end": "892949"
  },
  {
    "text": "bytes but now I'm supposed to index something if the last type is empty which is actually it requires 4 bytes so",
    "start": "892949",
    "end": "901319"
  },
  {
    "text": "what do you do with that so first of all let's look at it actually at the you",
    "start": "901319",
    "end": "907230"
  },
  {
    "text": "know at the CEO ice pack which exactly describes what it is just like for reference and basically it",
    "start": "907230",
    "end": "913439"
  },
  {
    "text": "explains what I just said like you know if you have less than not less than equal or equal but less than 2 to 16",
    "start": "913439",
    "end": "920250"
  },
  {
    "text": "rows then you use of 2 bytes otherwise 4 bytes and by the way the method list is",
    "start": "920250",
    "end": "925800"
  },
  {
    "text": "from 1 because 0 even Tove your or developers and we love zero based 0 is now so that's forbidden so 1 2 rowcount",
    "start": "925800",
    "end": "935639"
  },
  {
    "text": "plus 1 and that's basically when you look at that the problem that we discovered is that in certain cases if",
    "start": "935639",
    "end": "941910"
  },
  {
    "text": "those two things collide you have as we have back in the specification",
    "start": "941910",
    "end": "946930"
  },
  {
    "text": "how do you fix that well you don't that the that the that's that kind of",
    "start": "946930",
    "end": "953620"
  },
  {
    "text": "narratives because fixing this back means going change the specification going chase down chase down and all the",
    "start": "953620",
    "end": "961210"
  },
  {
    "text": "old ecosystem all the profilers debuggers Visual Studio Isle spy",
    "start": "961210",
    "end": "966940"
  },
  {
    "text": "reflector whatnot and go and back them guys can you please change can you",
    "start": "966940",
    "end": "972160"
  },
  {
    "text": "please make this special case that if it's this then do something else right you know that's that's a lot of work",
    "start": "972160",
    "end": "977440"
  },
  {
    "text": "across the giveaway system so it's extremely expensive and to take that some perspective actually Macau who who",
    "start": "977440",
    "end": "985360"
  },
  {
    "text": "kind of investigated this because why do I forgot to say that this is a story from I think this this February or last",
    "start": "985360",
    "end": "992290"
  },
  {
    "text": "February so quite recent he said it nicely like you know given that this happens like once in seventeen years you",
    "start": "992290",
    "end": "999190"
  },
  {
    "text": "know maybe we don't have to fix that it was actually the VIN RT team they produced some venom these files and they",
    "start": "999190",
    "end": "1005970"
  },
  {
    "text": "just happen to run in case that they had the last type which was exactly that ffff you know exactly the same number of",
    "start": "1005970",
    "end": "1013320"
  },
  {
    "text": "methods ran into that and the type was empty now or didn't have didn't have any",
    "start": "1013320",
    "end": "1018330"
  },
  {
    "text": "metals it had maybe properties or fields so the other thing that you can this you",
    "start": "1018330",
    "end": "1023490"
  },
  {
    "text": "know start thinking about it's like how do you compensate for such a bug so we ran through couple of you know interesting things first of all you",
    "start": "1023490",
    "end": "1030030"
  },
  {
    "text": "could do you can start playing games and really rearranging order of types as soon as the last one is not the empty",
    "start": "1030030",
    "end": "1035730"
  },
  {
    "text": "one you're good well how would you like it if you know if your compiler sometimes changed order of your types as",
    "start": "1035730",
    "end": "1043079"
  },
  {
    "text": "you define them you know from the deterministic way that's usually kind of like not good so that's kind of nice to",
    "start": "1043079",
    "end": "1049500"
  },
  {
    "text": "think we kind of punted that the other option actually was that to emit a fake",
    "start": "1049500",
    "end": "1055530"
  },
  {
    "text": "type at the end you know if you don't like this situation exactly this kind of overflow in a one-off I think let's",
    "start": "1055530",
    "end": "1061620"
  },
  {
    "text": "let's omit one fake type again how would you feel if your compiler here and there sometimes randomly injects new types and",
    "start": "1061620",
    "end": "1068700"
  },
  {
    "text": "then you start reflecting over that and then you say like what the heck is this right so again not a good thing the only",
    "start": "1068700",
    "end": "1075360"
  },
  {
    "text": "reasonable thing that we thought for or is like if it's overflow you know what let's use the zero you know let's let it overflow let's use the zero",
    "start": "1075360",
    "end": "1082320"
  },
  {
    "text": "but suddenly you have to tell everyone all that you know - sorry to change the ecosystem products like forks yeah you",
    "start": "1082320",
    "end": "1088590"
  },
  {
    "text": "gotta you got to deal with that special like it's not as obvious as you seem and that's where we decided you know what",
    "start": "1088590",
    "end": "1094460"
  },
  {
    "text": "it's not worth to fix every single bug especially if it's high frequency like",
    "start": "1094460",
    "end": "1100290"
  },
  {
    "text": "once per 17 years yeah so we decided to punt it it's still actually open just in",
    "start": "1100290",
    "end": "1105360"
  },
  {
    "text": "case one day we might maybe fix it but I don't think so well we're we gonna wait another 17",
    "start": "1105360",
    "end": "1111150"
  },
  {
    "text": "years if we have one more hit maybe then already that introduced us into",
    "start": "1111150",
    "end": "1116820"
  },
  {
    "start": "1115000",
    "end": "1321000"
  },
  {
    "text": "something you know or this type of fix would be basically a breaking change",
    "start": "1116820",
    "end": "1122280"
  },
  {
    "text": "breaking change to many many tools many existing kind of metadata readers and things and breaking changes are",
    "start": "1122280",
    "end": "1129690"
  },
  {
    "text": "interesting topics topic on its own so I would like to focus on that first observation is that you know everyone",
    "start": "1129690",
    "end": "1136380"
  },
  {
    "text": "and I mean everyone in this room everywhere you know when you have you when you hit a buck especially in the runtime or Windows the first thing that",
    "start": "1136380",
    "end": "1142230"
  },
  {
    "text": "you're gonna say like I want it fixed it's a buck everyone does that it's natural",
    "start": "1142230",
    "end": "1147570"
  },
  {
    "text": "right they're developers you find something somewhere you're really proud like yeah I found it but go fix it well",
    "start": "1147570",
    "end": "1152790"
  },
  {
    "text": "turns out nobody likes to be broken as well and those two things kind of don't",
    "start": "1152790",
    "end": "1158670"
  },
  {
    "text": "work well together because what we observed over time and this is kind of",
    "start": "1158670",
    "end": "1164250"
  },
  {
    "text": "quote from our one of our architects not super super you know hard data but",
    "start": "1164250",
    "end": "1170760"
  },
  {
    "text": "roughly in ten percent one in ten changes is gonna introduce some",
    "start": "1170760",
    "end": "1176130"
  },
  {
    "text": "unintended consequences no matter how many code reviews how smart people doesn't matter one in ten is gonna have",
    "start": "1176130",
    "end": "1182430"
  },
  {
    "text": "something unexpected now the question is is it gonna be side effect that is okay",
    "start": "1182430",
    "end": "1187710"
  },
  {
    "text": "and minimal and nobody cares nobody hits that or is it something that's gonna do boom and those two things as I said like",
    "start": "1187710",
    "end": "1196440"
  },
  {
    "text": "everyone was there bug fix and but nobody wants to be broken that's where we especially kind of in the platform's have to be extremely careful to which",
    "start": "1196440",
    "end": "1203730"
  },
  {
    "text": "bugs we you know we choose sorry which bugs me fix we have to choose we have to",
    "start": "1203730",
    "end": "1209430"
  },
  {
    "text": "be kind of conscious of all the potential consequences obviously the people in the first cat so if you find a bug like often I see on",
    "start": "1209430",
    "end": "1216660"
  },
  {
    "text": "github and everywhere people ask you like but it's a bug like just just fix it like oh it's not as simple and over",
    "start": "1216660",
    "end": "1223860"
  },
  {
    "text": "over my career actually run into one extreme case and that was actually that a pair of improvement broke a customer",
    "start": "1223860",
    "end": "1230600"
  },
  {
    "text": "you would say like you know what thing that you know I'm I improved perf good right and what happened I think it was",
    "start": "1230600",
    "end": "1236820"
  },
  {
    "text": "something around type loading or whatnot you know he made some optimization and turns out that there was one customer",
    "start": "1236820",
    "end": "1241950"
  },
  {
    "text": "something important that came back to us that actually you know was relying unintentionally obviously on this slow",
    "start": "1241950",
    "end": "1249420"
  },
  {
    "text": "speed because they relied on the order how things are initialized they should not but there's a reality right you know",
    "start": "1249420",
    "end": "1255860"
  },
  {
    "text": "so they relied on it they and when we make things faster they got broken",
    "start": "1255860",
    "end": "1261210"
  },
  {
    "text": "because things got initialized in different order they read something before it was initialized so it was zero boom their application stopped working",
    "start": "1261210",
    "end": "1267900"
  },
  {
    "text": "obviously it was some kind of like in place update of dotnet framework so it was probably not them no damn suffering",
    "start": "1267900",
    "end": "1274740"
  },
  {
    "text": "it was their customers and ever unhappy to put it probably mildly what you do in",
    "start": "1274740",
    "end": "1280410"
  },
  {
    "text": "such you know situations you know if you take this too extreme you should not change anything which kind of sucks",
    "start": "1280410",
    "end": "1287190"
  },
  {
    "text": "right you know that that doesn't make sense so in that case I believe that we just said the right thing like yep sorry",
    "start": "1287190",
    "end": "1293100"
  },
  {
    "text": "you you basically had a back I know you know it's not your fault that you do all it's your fault kind of that you",
    "start": "1293100",
    "end": "1298830"
  },
  {
    "text": "dependent on time something that is kind of not guaranteed but we understand but you gotta change there's nothing you",
    "start": "1298830",
    "end": "1303960"
  },
  {
    "text": "know we're not going to beg helper for improvements just because you had this dependency on this and the key lesson",
    "start": "1303960",
    "end": "1310470"
  },
  {
    "text": "from these kind of things I have learned over over time is that basically everything has a risk of breaking",
    "start": "1310470",
    "end": "1317040"
  },
  {
    "text": "someone you know if it comes down to you know making Parfum provement and I have",
    "start": "1317040",
    "end": "1322710"
  },
  {
    "start": "1321000",
    "end": "1505000"
  },
  {
    "text": "a couple of more fun stories on the braking changes one is very interesting",
    "start": "1322710",
    "end": "1327900"
  },
  {
    "text": "well-built so it was it was end of Windows 8 on arm and you know for it was",
    "start": "1327900",
    "end": "1335070"
  },
  {
    "text": "the I think it was the first surface RT release or something like that and one of the last builds you know v-final",
    "start": "1335070",
    "end": "1341970"
  },
  {
    "text": "suddenly started what happened is that suddenly finance application",
    "start": "1341970",
    "end": "1347230"
  },
  {
    "text": "crushing and obviously Microsoft you know surface RT was a big thing back then so you know application on the",
    "start": "1347230",
    "end": "1353200"
  },
  {
    "text": "first start fails the application team was not happy to put it mildly and",
    "start": "1353200",
    "end": "1359160"
  },
  {
    "text": "eventually they came to us when they kind of couldn't figure out it turned out that it was actually a latent bug",
    "start": "1359160",
    "end": "1365320"
  },
  {
    "text": "that was there for months it was there actually since beta time and was interesting to find out what triggered",
    "start": "1365320",
    "end": "1372270"
  },
  {
    "text": "kind of triggered this bug and it was there was two conditions first one was",
    "start": "1372270",
    "end": "1378880"
  },
  {
    "text": "that there had to be method in engine images if you don't know what it is ignore it you know sterilized on the disk IOT",
    "start": "1378880",
    "end": "1386110"
  },
  {
    "text": "ahead of time compilation and it had to be exactly you know if it was on on the",
    "start": "1386110",
    "end": "1391600"
  },
  {
    "text": "boundary of 8 kilobyte pages that was one condition the other condition that GC had to be",
    "start": "1391600",
    "end": "1397929"
  },
  {
    "text": "triggered twice while this was on the call stack which means that the application had to be under some stress",
    "start": "1397929",
    "end": "1403679"
  },
  {
    "text": "starting application you know that can happen right you know application starts lots of things happen you know on",
    "start": "1403679",
    "end": "1409600"
  },
  {
    "text": "multiple frets it happened in finance and it was actually some kind of networking for networking part and that",
    "start": "1409600",
    "end": "1415690"
  },
  {
    "text": "we found out that actually some totally unrelated change somewhere just was",
    "start": "1415690",
    "end": "1421419"
  },
  {
    "text": "lucky enough to push this method of default proxy which took enough time",
    "start": "1421419",
    "end": "1427179"
  },
  {
    "text": "that under stress was twice during GC on the call stack and was unlucky to be on",
    "start": "1427179",
    "end": "1432669"
  },
  {
    "text": "the border of the eighth kilobyte pages and big bada boom you broke you broke",
    "start": "1432669",
    "end": "1438070"
  },
  {
    "text": "finance application and the change I don't know what it was we didn't track it down but basically the outcome of",
    "start": "1438070",
    "end": "1443860"
  },
  {
    "text": "that is no matter what's change you know if you say like oh this is the safest change I look here like look like you",
    "start": "1443860",
    "end": "1449140"
  },
  {
    "text": "guy can prove you that this is right you don't know what it's gonna cause farther down the line",
    "start": "1449140",
    "end": "1454410"
  },
  {
    "text": "obviously we should not be that paranoid even to sometime we should but the key",
    "start": "1454410",
    "end": "1459490"
  },
  {
    "text": "takeaway from that is like anything and I mean literally anything has a risk of breaking you know even I've heard",
    "start": "1459490",
    "end": "1466299"
  },
  {
    "text": "stories I didn't leave it for myself even just triggering rebuild you know even that can suddenly kick off you know",
    "start": "1466299",
    "end": "1472990"
  },
  {
    "text": "some latent bugs and stuff there has been stories about that I don't have them personally so again should you be",
    "start": "1472990",
    "end": "1478270"
  },
  {
    "text": "so scared not to do anything probably not but those are some of the things that sometimes you have to consider and when you see and",
    "start": "1478270",
    "end": "1484600"
  },
  {
    "text": "hear on github or somewhere from us like oh we don't gonna fix this because it's the risk and you look at that it's",
    "start": "1484600",
    "end": "1490570"
  },
  {
    "text": "simple just like look at the code just fix it right it's I can I can you know prove it to you that is right like these",
    "start": "1490570",
    "end": "1496180"
  },
  {
    "text": "kind of stories and experiences come from the other side for to our minds and that's why sometimes we said politely",
    "start": "1496180",
    "end": "1501670"
  },
  {
    "text": "sorry yeah like no you're not gonna fix it even though it's super simple of",
    "start": "1501670",
    "end": "1507640"
  },
  {
    "text": "course only if it's and your end of the release the other kind of angle of the",
    "start": "1507640",
    "end": "1512650"
  },
  {
    "text": "breaking changes and stuff of fun fun part is actually that they may have like really huge impact and this is a story",
    "start": "1512650",
    "end": "1519250"
  },
  {
    "text": "that that actual I didn't live through directly but that's it it kind of is a very well-known on our team as a as a",
    "start": "1519250",
    "end": "1526840"
  },
  {
    "text": "poster child of like you shall not change things at certain time and it was",
    "start": "1526840",
    "end": "1531910"
  },
  {
    "text": "actually patched to.net framework so boom bust on all the two billion machines or whatever days and certain",
    "start": "1531910",
    "end": "1537880"
  },
  {
    "text": "texts of church not gonna main kind of name broke okay",
    "start": "1537880",
    "end": "1544180"
  },
  {
    "text": "the trouble was that the part that broke was printing the text forms okay you",
    "start": "1544180",
    "end": "1549760"
  },
  {
    "text": "know not good well the update was pushed right before the text deadline in the US and when you",
    "start": "1549760",
    "end": "1555910"
  },
  {
    "text": "put those two things together it's like oh my gosh you know that's not good it wasn't good customers were unhappy it",
    "start": "1555910",
    "end": "1563260"
  },
  {
    "text": "was not just the text software it was their customers who they kind of like start printing you know one day before",
    "start": "1563260",
    "end": "1569320"
  },
  {
    "text": "deadline or a few hours I don't know how you do Texas in Europe oftentimes the employer does it for you I do then last",
    "start": "1569320",
    "end": "1574450"
  },
  {
    "text": "minute I'm a procrastinator I hate them many people do and guess what if you well I I do them online but back then",
    "start": "1574450",
    "end": "1580330"
  },
  {
    "text": "people probably you know sometime print them and they cannot print their taxes that's that's bad that's bad what was",
    "start": "1580330",
    "end": "1586780"
  },
  {
    "text": "funny you can look at it like oh you maybe didn't test enough turns out we did test that the text software company",
    "start": "1586780",
    "end": "1594190"
  },
  {
    "text": "test tested that scenario except we printed everything into PDF we never",
    "start": "1594190",
    "end": "1599650"
  },
  {
    "text": "reused the printer because why would your test pass always print out something on the printer the buck was so",
    "start": "1599650",
    "end": "1606430"
  },
  {
    "text": "specific that it broke only printing on the printer yep tough luck so what was the lesson",
    "start": "1606430",
    "end": "1612130"
  },
  {
    "text": "learned from that certain dates be careful for example text season you know and",
    "start": "1612130",
    "end": "1618989"
  },
  {
    "text": "there might be other other parts for example even end of the year and you know these are this is old story this is",
    "start": "1618989",
    "end": "1625049"
  },
  {
    "text": "you know probably ten years old or something like that but you see similar things as well in for example online",
    "start": "1625049",
    "end": "1630749"
  },
  {
    "text": "shopping companies right there usually before season their season like",
    "start": "1630749",
    "end": "1636119"
  },
  {
    "text": "Christmas is their time and they kind of some have most sell in ourselves maybe 50% or 30% of their all volume they",
    "start": "1636119",
    "end": "1642419"
  },
  {
    "text": "basically stopped pushing anything into production just to avoid any risk of anything breaking so I have friends in",
    "start": "1642419",
    "end": "1649320"
  },
  {
    "text": "those companies or and they always like yup I I cannot do anything until January you know lockdown season which starts in",
    "start": "1649320",
    "end": "1656039"
  },
  {
    "text": "November so it's very similar what's interesting on this that you see certain similar patterns even in frameworks or",
    "start": "1656039",
    "end": "1662369"
  },
  {
    "text": "operating systems which is not quite super intuitive at first sight but yep we had interesting experience all righty",
    "start": "1662369",
    "end": "1670919"
  },
  {
    "start": "1668000",
    "end": "2057000"
  },
  {
    "text": "and now I'm gonna go through the you know fun part networking sure this is last story it's",
    "start": "1670919",
    "end": "1677070"
  },
  {
    "text": "sellable longer one it's a very dear to me because I lived through that last July it was lots of fun and because we",
    "start": "1677070",
    "end": "1685169"
  },
  {
    "text": "already pushed out the security fixes in last August or something I can hopefully talk about that and was it was very",
    "start": "1685169",
    "end": "1691769"
  },
  {
    "text": "interesting and eye-opening so this story starts actually the story starts nor denote more than in July last year",
    "start": "1691769",
    "end": "1697139"
  },
  {
    "text": "but it starts actually December before just 2017 and in January there was some",
    "start": "1697139",
    "end": "1702989"
  },
  {
    "text": "kind of researcher running some ml for clothes mining thing you know inside",
    "start": "1702989",
    "end": "1708210"
  },
  {
    "text": "Microsoft and on models and he used cosmos I'm not sure it's cosmos now public I think it is right yeah",
    "start": "1708210",
    "end": "1715169"
  },
  {
    "text": "so I processing lots of lots of data large jobs and things and here and there he got weird results and eventually they",
    "start": "1715169",
    "end": "1721350"
  },
  {
    "text": "got you know Frew cosmos and some kind of couple of SDKs to us and to like this is weird like he's getting like vir",
    "start": "1721350",
    "end": "1727409"
  },
  {
    "text": "responses for these requests so what's the first response to that being trained",
    "start": "1727409",
    "end": "1734039"
  },
  {
    "text": "of like you know how people ask us for various weird things that have nothing to do with us first thing is like are",
    "start": "1734039",
    "end": "1739350"
  },
  {
    "text": "you sure it's on the client well I own sorry our team back then or my team now own sexually networking client side are",
    "start": "1739350",
    "end": "1746609"
  },
  {
    "text": "you sure it's on the client it's not on the server because if you're chasing down the server you know if we're good",
    "start": "1746609",
    "end": "1751980"
  },
  {
    "text": "collecting logs from the client it's not going to help us right you know we need to find out very well the problem is you",
    "start": "1751980",
    "end": "1759210"
  },
  {
    "text": "know where it starts so they started doing some kind of logging I think that",
    "start": "1759210",
    "end": "1764220"
  },
  {
    "text": "you deployed var shark because in production & Kosmos that's that's not fun so that you know lots of people and",
    "start": "1764220",
    "end": "1769340"
  },
  {
    "text": "eventually the proof or the Dvorak traces and other traces prove that actually it's you know server is fine",
    "start": "1769340",
    "end": "1775260"
  },
  {
    "text": "you know it gets the requests it sends the right responses so something is fishy on the client so I don't know many",
    "start": "1775260",
    "end": "1781230"
  },
  {
    "text": "were like okay yeah you might be involved so it's either us as a networking site or something underneath us which is like",
    "start": "1781230",
    "end": "1787770"
  },
  {
    "text": "OS networking but you know when you're on the on top of the stack to blame guess what you gotta investigate so we",
    "start": "1787770",
    "end": "1794280"
  },
  {
    "text": "started investigation and it was already kind of I think more uh February and so",
    "start": "1794280",
    "end": "1799920"
  },
  {
    "text": "we send them it should we were suspicious about like we look at the codes around like what could happen I was like you know some kind of weird buffers so I was like ya know that's",
    "start": "1799920",
    "end": "1806550"
  },
  {
    "text": "weird we gave them actually some logging furs they collected logs they were useless obviously we didn't count it it was",
    "start": "1806550",
    "end": "1812340"
  },
  {
    "text": "something like this so we edit we created private bills for them it like special special logging points gave them",
    "start": "1812340",
    "end": "1819150"
  },
  {
    "text": "the private bills and then right it turns out that you know after months we",
    "start": "1819150",
    "end": "1824730"
  },
  {
    "text": "ping them so what's up like do you have deluxe for us that we can take a look at that and it's like no it's gone the repo is gone",
    "start": "1824730",
    "end": "1829830"
  },
  {
    "text": "like what am I gonna have you updated two different cluster what no different hardware and doesn't reproduce anymore and even back then like the reproduce",
    "start": "1829830",
    "end": "1836820"
  },
  {
    "text": "reproduction was like you know once per week you know the researcher kind of got wrong results so I don't know how many",
    "start": "1836820",
    "end": "1842160"
  },
  {
    "text": "how many kind of data points he cracked in but you know it was not quite you",
    "start": "1842160",
    "end": "1847620"
  },
  {
    "text": "know quite at so with that if you don't have repro even though if you sis you know you suspect something was really fishy and well actually back then we",
    "start": "1847620",
    "end": "1854670"
  },
  {
    "text": "didn't know if it's just one machine I know I didn't even get to ask that question I believe or maybe I did then they told me that probably multiple but",
    "start": "1854670",
    "end": "1861960"
  },
  {
    "text": "we were suspicious we probably knew it is something fishy but now you have not no leads basically I have nothing to do",
    "start": "1861960",
    "end": "1867020"
  },
  {
    "text": "so we kind of put it to ice and then in May so two months later kind of similar",
    "start": "1867020",
    "end": "1872760"
  },
  {
    "text": "report comes and all the email and I was interesting that I would one email and like lots of people and like a we see",
    "start": "1872760",
    "end": "1880380"
  },
  {
    "text": "some big things be centric and you know something wrong wrong comes back what the heck you know it might be",
    "start": "1880380",
    "end": "1885560"
  },
  {
    "text": "networking team and when I looked at that we actually we started looking at",
    "start": "1885560",
    "end": "1891650"
  },
  {
    "text": "that and roughly and slowly first like okay you know guys did you check server client and in two weeks suddenly blew up",
    "start": "1891650",
    "end": "1898520"
  },
  {
    "text": "because there was like multiple teams like suddenly I know five or six teams back then I actually realized suddenly",
    "start": "1898520",
    "end": "1904490"
  },
  {
    "text": "that the email in May actually it had two teams on the and email they somehow found each other they have the same",
    "start": "1904490",
    "end": "1910130"
  },
  {
    "text": "problem and came to us together and we were I was not able to kind of decomp you know D compost that information out",
    "start": "1910130",
    "end": "1915950"
  },
  {
    "text": "of the email it was you know you know what's funny what kana and then we had",
    "start": "1915950",
    "end": "1921470"
  },
  {
    "text": "like roughly five five teams kind of knocking on our door like hey something fishy is happening so it was suddenly",
    "start": "1921470",
    "end": "1928280"
  },
  {
    "text": "all hands on deck situation because you know when I'm gonna act and get to that",
    "start": "1928280",
    "end": "1934430"
  },
  {
    "text": "later but basically when you provide different response to requests or",
    "start": "1934430",
    "end": "1939890"
  },
  {
    "text": "something like that you know that that might have some serious consequences we're gonna get to that luckily it's team or the two teams",
    "start": "1939890",
    "end": "1946880"
  },
  {
    "text": "had like awesome thing they worked on a repro like that's you know please and whenever whenever you can work on small",
    "start": "1946880",
    "end": "1954380"
  },
  {
    "text": "repairs as small as possible so they had like very simple thing and in twenty minutes it was able to reproduce the",
    "start": "1954380",
    "end": "1961250"
  },
  {
    "text": "program then they kind of tweak some parameters but not and in one minute you had very Pro which is awesome it's",
    "start": "1961250",
    "end": "1967190"
  },
  {
    "text": "amazing makes life so much easier and on top of that even the the best thing ever",
    "start": "1967190",
    "end": "1973640"
  },
  {
    "text": "gave are able to reproduce it under time travel debugging if you don't know what time travel debugging is it used to been",
    "start": "1973640",
    "end": "1979490"
  },
  {
    "text": "called I DNA and TTT or slightly different technology similar go find out it's only in windbg sorry but it's a",
    "start": "1979490",
    "end": "1987170"
  },
  {
    "text": "lifesaver like basically naively you can think about it that the whole execution",
    "start": "1987170",
    "end": "1992210"
  },
  {
    "text": "of the program or part of it is recorded instruction by instruction on each fret",
    "start": "1992210",
    "end": "1997310"
  },
  {
    "text": "the trouble is that is as you know the recording has like eight X or 10x overhead on the application so",
    "start": "1997310",
    "end": "2003370"
  },
  {
    "text": "oftentimes if you can reproduce something you run it under TTD suddenly doesn't reproduce because different",
    "start": "2003370",
    "end": "2008710"
  },
  {
    "text": "timing and things but as soon as you catch it under under TTD you're golden",
    "start": "2008710",
    "end": "2014020"
  },
  {
    "text": "you're done like you know you probe it's just a matter of time before you get to that the beautiful on that on",
    "start": "2014020",
    "end": "2020019"
  },
  {
    "text": "the recording is that actually you you are at the time that word error happened you can set breakpoints data breakpoints",
    "start": "2020019",
    "end": "2026830"
  },
  {
    "text": "on read or write or breakpoints on methods and you just say go back and it reverts back the kind of you know",
    "start": "2026830",
    "end": "2033340"
  },
  {
    "text": "execution time and cell oops over here it was triggered so when for example if you remember the hardware back like the",
    "start": "2033340",
    "end": "2039309"
  },
  {
    "text": "bit flip right you know that wouldn't probably show up but you know if if there would be religiously or something",
    "start": "2039309",
    "end": "2044830"
  },
  {
    "text": "like flipping your bit you would just set you know hey I have this data this bit shouldn't be set like tell me who wrote it or who wrote into this thing",
    "start": "2044830",
    "end": "2051429"
  },
  {
    "text": "you could just go back in the trace which is just lifesaver so with that we were able to kind of",
    "start": "2051429",
    "end": "2056710"
  },
  {
    "text": "root cause the issue into something that was actually HTTP pipelining under",
    "start": "2056710",
    "end": "2061780"
  },
  {
    "start": "2057000",
    "end": "2153000"
  },
  {
    "text": "stress funny part was that was a 13 years old puck which all of the blue",
    "start": "2061780",
    "end": "2068158"
  },
  {
    "text": "started started kind of you know reproducing and messing up with other",
    "start": "2068159",
    "end": "2073809"
  },
  {
    "text": "stuff if you don't know what HTTP pipelining is I'm gonna do a quick intro on that so classic HTTP is that you have",
    "start": "2073809",
    "end": "2080530"
  },
  {
    "text": "a request you send it to the server server sends back bot response simple right now if you imagine you it over and",
    "start": "2080530",
    "end": "2087158"
  },
  {
    "text": "over on you know you have multiple you have several connections you don't you usually don't have too many you know",
    "start": "2087159",
    "end": "2092799"
  },
  {
    "text": "default is to I believe inductance framework sorry for that but if you have like maybe hundred or something you have",
    "start": "2092799",
    "end": "2098770"
  },
  {
    "text": "basically limited pipeline or mean limited kind of what is it called",
    "start": "2098770",
    "end": "2105359"
  },
  {
    "text": "limited by how to communicate with the server if you want to reuse the same",
    "start": "2105359",
    "end": "2110799"
  },
  {
    "text": "connection for another request you have to wait for the request which is kind of time to server and back which takes time so it's kind of slow so HTTP pipelining",
    "start": "2110799",
    "end": "2117339"
  },
  {
    "text": "introduces the thing that you can actually own the connection you can send multiple requests even if you don't get",
    "start": "2117339",
    "end": "2123730"
  },
  {
    "text": "the response yet and the server has to send the responses in that order simple right you just kind of avoid the",
    "start": "2123730",
    "end": "2130869"
  },
  {
    "text": "blocking on getting the response back you you pipeline things kind of i-64",
    "start": "2130869",
    "end": "2136859"
  },
  {
    "text": "awful thing anyway when you get you know what happens if you send for example",
    "start": "2136859",
    "end": "2142780"
  },
  {
    "text": "request one then request to before you get answer then you get response one and later on you get response too",
    "start": "2142780",
    "end": "2148780"
  },
  {
    "text": "life is beautiful you know it's associated to the right things so what was this back about the back was about",
    "start": "2148780",
    "end": "2154869"
  },
  {
    "start": "2153000",
    "end": "2303000"
  },
  {
    "text": "if you had at least three requests pipeline on in connection and when cancellation of requests was involved",
    "start": "2154869",
    "end": "2161800"
  },
  {
    "text": "time outs so it was the stress part you know the system was so stressed you know so overloaded that you know here and",
    "start": "2161800",
    "end": "2168430"
  },
  {
    "text": "there something was cancelled now if you cancel the first request what do you do",
    "start": "2168430",
    "end": "2173500"
  },
  {
    "text": "whatever code it it did the right thing it look at the you know at the connection and said like well the first",
    "start": "2173500",
    "end": "2179349"
  },
  {
    "text": "response that comes back is going to be to the request I don't care about anymore so boom throw away the the",
    "start": "2179349",
    "end": "2185349"
  },
  {
    "text": "connection life is beautiful now what if you would do it with request",
    "start": "2185349",
    "end": "2190569"
  },
  {
    "text": "number three and the last one the code what it says like kind of natural exit like look at it and like yep just like",
    "start": "2190569",
    "end": "2197440"
  },
  {
    "text": "listen to the first to you know throw away this one and and Mark the connection you know one once you're done",
    "start": "2197440",
    "end": "2203380"
  },
  {
    "text": "with with wit processing request just close it don't kill more you know again simple",
    "start": "2203380",
    "end": "2209790"
  },
  {
    "text": "you would get response one you would get response to afterwards and then you",
    "start": "2209790",
    "end": "2215349"
  },
  {
    "text": "would just close the connection now the trick came comes what if you can so the request in the middle obviously we can",
    "start": "2215349",
    "end": "2223060"
  },
  {
    "text": "come up with you know right now from top of head with the right tank probably what should happen but that what the code actually does it removed the",
    "start": "2223060",
    "end": "2230319"
  },
  {
    "text": "request from the queue looks kind of innocent and kind of similar to what the request freed it except that do you gain",
    "start": "2230319",
    "end": "2237520"
  },
  {
    "text": "that response one good the associate with request to and then you get a response to accept the response to its",
    "start": "2237520",
    "end": "2244720"
  },
  {
    "text": "associated with your request free boom so in certain load situations we",
    "start": "2244720",
    "end": "2251349"
  },
  {
    "text": "associate the wrong response door Bronk response with with with the request and",
    "start": "2251349",
    "end": "2257460"
  },
  {
    "text": "that can have multiple side effects as I said for example imagine the request was",
    "start": "2257460",
    "end": "2262540"
  },
  {
    "text": "something I'm not gonna name it the products affected but hey does this data exists and answer should be no but you",
    "start": "2262540",
    "end": "2270310"
  },
  {
    "text": "get different response which is a yes go on you just lost data because you get wrong",
    "start": "2270310",
    "end": "2275790"
  },
  {
    "text": "wrong information imagine that it's actually in an adverse divorce case it",
    "start": "2275790",
    "end": "2281260"
  },
  {
    "text": "was some multi-tenant you know server something something large that is multiple customers and the",
    "start": "2281260",
    "end": "2287740"
  },
  {
    "text": "request free was like give me data about customer X and the response to was hey here's data about customer Y that's not",
    "start": "2287740",
    "end": "2294970"
  },
  {
    "text": "that's not fun it's kind of mixing mixing data and if you mixing customer data it's now that",
    "start": "2294970",
    "end": "2300940"
  },
  {
    "text": "nobody wants that so that happened I was also fun we had workaround for",
    "start": "2300940",
    "end": "2307540"
  },
  {
    "start": "2303000",
    "end": "2428000"
  },
  {
    "text": "that just disable pipelining luckily it was it was present there it had some perf impact because as I said the",
    "start": "2307540",
    "end": "2313750"
  },
  {
    "text": "pipelining was invented so to kind of streamline I get more fruit but hey if you have to choose between security",
    "start": "2313750",
    "end": "2321120"
  },
  {
    "text": "potentially be broken and being a bit slower what do you choose I choose slower or everyone saying yes right so",
    "start": "2321120",
    "end": "2328480"
  },
  {
    "text": "what they did that day that's what they did we just cool and in parallel we worked on a fix and we were verifying",
    "start": "2328480",
    "end": "2335320"
  },
  {
    "text": "the fix and repro after four hours fail again with our fix and we we're like",
    "start": "2335320",
    "end": "2342100"
  },
  {
    "text": "what the heck is going on so you come back and it was exactly the same",
    "start": "2342100",
    "end": "2347890"
  },
  {
    "text": "symptoms you send something you get the wrong result and we just fixed that and we were quite short like sure it was",
    "start": "2347890",
    "end": "2354670"
  },
  {
    "text": "cold archeology it was ancient code line it actually for the first time our expert was just you know on vacation you",
    "start": "2354670",
    "end": "2362080"
  },
  {
    "text": "know by a chance that happens and but anyway you know we kind of looped in a",
    "start": "2362080",
    "end": "2368650"
  },
  {
    "text": "couple of experts who used to work around that codebase and was like yeah that sounds right you know when you explain it this way so we were digging",
    "start": "2368650",
    "end": "2375720"
  },
  {
    "text": "what didn't help is that the repro what we had was extremely sensitive actually to work load on the in the cloud on the",
    "start": "2375720",
    "end": "2382750"
  },
  {
    "text": "network so I you know it was in July my family was already in Europe so I worked",
    "start": "2382750",
    "end": "2388300"
  },
  {
    "text": "overtime because this was fun part and it needed to get done and I couldn't rip right in the UNIX I was like what the",
    "start": "2388300",
    "end": "2394630"
  },
  {
    "text": "heck is going on then a queue later we found out that actually between 8 and 17 the load was exactly right it got the",
    "start": "2394630",
    "end": "2400120"
  },
  {
    "text": "right stress and these things reproduced if you did it after hours boom you're a pro is gone so that didn't help with",
    "start": "2400120",
    "end": "2405970"
  },
  {
    "text": "debugging by the way so we tried again time travel debugging because it's lifesaver",
    "start": "2405970",
    "end": "2411520"
  },
  {
    "text": "tough luck we were not lucky to catch it under time travel debugging so that didn't help us and we got again",
    "start": "2411520",
    "end": "2419290"
  },
  {
    "text": "suspicious you know we remembered our suspicions from January so this is joy helpful year earlier about the buffers",
    "start": "2419290",
    "end": "2425020"
  },
  {
    "text": "so like all we have these kind of special logging let's try that and of course we discovered that there was like",
    "start": "2425020",
    "end": "2431290"
  },
  {
    "start": "2428000",
    "end": "2623000"
  },
  {
    "text": "bad buffer lifetime management on the sending side actually so we when we were",
    "start": "2431290",
    "end": "2437500"
  },
  {
    "text": "sending sending a request before it went out we reuse the buffer for another",
    "start": "2437500",
    "end": "2443560"
  },
  {
    "text": "request and the other request wrote the data into the payload and then this request send it out so what ended up",
    "start": "2443560",
    "end": "2449079"
  },
  {
    "text": "actually the request for one server from the other one got sent to another server",
    "start": "2449079",
    "end": "2455020"
  },
  {
    "text": "which was fun that's actually how we first found out and you know about it as well from production in parallel it",
    "start": "2455020",
    "end": "2461170"
  },
  {
    "text": "turned out that this buck was five years old in the codebase since night four five two interestingly it was introduced",
    "start": "2461170",
    "end": "2468180"
  },
  {
    "text": "at the time that I was perfect and you know so it was basically under my leadership which was funny so back then",
    "start": "2468180",
    "end": "2477460"
  },
  {
    "text": "it seemed to be like great tank and we you know improve things for from performance reason and didn't realize",
    "start": "2477460",
    "end": "2483520"
  },
  {
    "text": "that the buffer lifetime management is not quite right so what what we were",
    "start": "2483520",
    "end": "2491500"
  },
  {
    "text": "then digging into was interesting to final act so why why was this triggered like what what happened like you know",
    "start": "2491500",
    "end": "2497890"
  },
  {
    "text": "why suddenly you know since four five two until now which was four seven one",
    "start": "2497890",
    "end": "2503950"
  },
  {
    "text": "whatever version you know it nobody kind of it wasn't trigger and luckily we had",
    "start": "2503950",
    "end": "2509560"
  },
  {
    "text": "Skype team who was amazing they basically had they had ability to take",
    "start": "2509560",
    "end": "2514569"
  },
  {
    "text": "our private builds put them to production they didn't care too much if it kind of is all bit broken because",
    "start": "2514569",
    "end": "2519640"
  },
  {
    "text": "they had like creature eyes and think and they said like yeah whatever like if you go from one person failure to ten",
    "start": "2519640",
    "end": "2524740"
  },
  {
    "text": "percent good good it was like I love it like you know when you have when you have this type of like I you know how's it like you know I",
    "start": "2524740",
    "end": "2531069"
  },
  {
    "text": "don't I don't test and when I do I do it in production so yeah this was exactly that so we love it because like when you",
    "start": "2531069",
    "end": "2538270"
  },
  {
    "text": "have this complicated repro and like you know this type of thing you know how do you you know how are you sure even if you try to track it down on",
    "start": "2538270",
    "end": "2544329"
  },
  {
    "text": "your repro that's the real thing in production and it was already second buck right you know we are",
    "start": "2544329",
    "end": "2549760"
  },
  {
    "text": "fixed one and we discovered another one so anyway with their with their kind of help we figure out that actually it was",
    "start": "2549760",
    "end": "2557110"
  },
  {
    "text": "changed in four seven one that triggered it what was mind-blowing is first of all the change that triggered this problem",
    "start": "2557110",
    "end": "2563620"
  },
  {
    "text": "was actually partial fix of this buck so there was something basically imagine that you start you know in main method",
    "start": "2563620",
    "end": "2570760"
  },
  {
    "text": "you start and if we go when went then down and hold on the buffer and the the kind of the change in four seven one was",
    "start": "2570760",
    "end": "2577000"
  },
  {
    "text": "that we moved oh you know what let's release the buffer here the right change that we did actually but this was all release it even higher so you could view",
    "start": "2577000",
    "end": "2584560"
  },
  {
    "text": "it that like oh we kind of created the window when the buffer could be reused was like smaller you'll figure you know",
    "start": "2584560",
    "end": "2592840"
  },
  {
    "text": "it was smaller yet suddenly triggered somehow the issue fun times and so to",
    "start": "2592840",
    "end": "2599980"
  },
  {
    "text": "make it even more interesting through code reviews we couldn't hit this in in the repro we actually found out we have",
    "start": "2599980",
    "end": "2605980"
  },
  {
    "text": "similar type of bug of a lifetime management on the not on the sending side but on the receiving side and it",
    "start": "2605980",
    "end": "2612550"
  },
  {
    "text": "was introduced the same kind of at the same time it was entirely different code different principle but the lifetime was",
    "start": "2612550",
    "end": "2618700"
  },
  {
    "text": "just not right so that was the most fun thing because you know basically you",
    "start": "2618700",
    "end": "2626800"
  },
  {
    "start": "2623000",
    "end": "2716000"
  },
  {
    "text": "find out that they're you sound out of the blue you hit two issues probably free which have same symptoms and they",
    "start": "2626800",
    "end": "2632980"
  },
  {
    "text": "are kind of independent at the same time so first question we asked like you know hey you know why so many customers or",
    "start": "2632980",
    "end": "2640060"
  },
  {
    "text": "services and actually we counted what we did actually we didn't talk with a bunch of a bunch of teams in Microsoft and",
    "start": "2640060",
    "end": "2648940"
  },
  {
    "text": "asked them like that you hit that you hit this and they went through their logs and most of them like yeah you know",
    "start": "2648940",
    "end": "2654370"
  },
  {
    "text": "what that's the 0.01% of our failure rate could be this because it had certain signature I forgot what it was",
    "start": "2654370",
    "end": "2660400"
  },
  {
    "text": "like 404 or something but it was under the threshold that they care about and",
    "start": "2660400",
    "end": "2665680"
  },
  {
    "text": "suddenly out of the blue you know multiple services were hit by this this heart and you know the only the best",
    "start": "2665680",
    "end": "2673330"
  },
  {
    "text": "thing that economists we came up it that it was kind of after the spectra meltdown which had some kind of impact",
    "start": "2673330",
    "end": "2679690"
  },
  {
    "text": "on performance fixes in OS and that's the best thing that we can kind of kind of imagine we",
    "start": "2679690",
    "end": "2686230"
  },
  {
    "text": "even tried like you know afterwards like you know various things you know how it triggers doesn't trigger why why this",
    "start": "2686230",
    "end": "2692380"
  },
  {
    "text": "and we couldn't come up with anything so into that or basically just magic you",
    "start": "2692380",
    "end": "2699910"
  },
  {
    "text": "know I started believing in magic so lesson lesson learned from this is like",
    "start": "2699910",
    "end": "2706450"
  },
  {
    "text": "like weird coincidences can happen like you know three bucks at the same time or",
    "start": "2706450",
    "end": "2711970"
  },
  {
    "text": "two to free you know I don't know I still cannot process that fully alright",
    "start": "2711970",
    "end": "2718480"
  },
  {
    "start": "2716000",
    "end": "2899000"
  },
  {
    "text": "that's roughly about it so I'm gonna wrap it up and I want to kind of review the lessons that we learned today hopefully you know the key takeaways",
    "start": "2718480",
    "end": "2724780"
  },
  {
    "text": "that you guys can have folks so first of all we went further like always a score",
    "start": "2724780",
    "end": "2730870"
  },
  {
    "text": "at least from our sides or don't be surprised when we do does it repro only on one machine and you know if you think",
    "start": "2730870",
    "end": "2736750"
  },
  {
    "text": "that you're just stalling or not we're protecting ourselves from the extremely expensive investigation and costly and",
    "start": "2736750",
    "end": "2743350"
  },
  {
    "text": "yeah it's at the cost that you have to try it on another machine when you hit the back but you know at the end of the day life is better because debugging",
    "start": "2743350",
    "end": "2750310"
  },
  {
    "text": "hardware hardware issues if it comes to that is extremely costly some bugs",
    "start": "2750310",
    "end": "2755380"
  },
  {
    "text": "happen only once per 17 years should we fix them or not that's a good question",
    "start": "2755380",
    "end": "2761640"
  },
  {
    "text": "spec bugs are extremely hard to fix because the impact in the meta data format if you saw across the across the",
    "start": "2761640",
    "end": "2768270"
  },
  {
    "text": "you know ecosystem would be nightmare luckily it was the once in 17 years so",
    "start": "2768270",
    "end": "2773590"
  },
  {
    "text": "we could kind of downplay it but imagine it would be more often it's raw and if it's roll out rolled out expect suddenly",
    "start": "2773590",
    "end": "2781810"
  },
  {
    "text": "becomes problematic I don't think you know anything really anything has risk",
    "start": "2781810",
    "end": "2788110"
  },
  {
    "text": "of breaking someone so that was the story about the light and back all 8k",
    "start": "2788110",
    "end": "2795310"
  },
  {
    "text": "eight kilobytes things that you know in something entirely unrelated can trigger bucks so just be careful about that or",
    "start": "2795310",
    "end": "2802000"
  },
  {
    "text": "or be prepared for fun times and sometimes the impact can be really huge",
    "start": "2802000",
    "end": "2807130"
  },
  {
    "text": "was the you know text seasoned thinking and one thing if I if I if you can come",
    "start": "2807130",
    "end": "2813550"
  },
  {
    "text": "up with this from this talk with one learning I would ask like always try to create small repros that by the way if",
    "start": "2813550",
    "end": "2819670"
  },
  {
    "text": "you ever saw me on github encore effects like that that's the first times you're gonna get from me like do you have a small repro give me",
    "start": "2819670",
    "end": "2825579"
  },
  {
    "text": "minimal repro oftentimes people say like but I don't have time for that I was like do I have time to debug your whole",
    "start": "2825579",
    "end": "2831670"
  },
  {
    "text": "application like know like you know try to create small repro obviously it's not always possible you know but you see",
    "start": "2831670",
    "end": "2837250"
  },
  {
    "text": "that some you know one of the stories was actually the networking like the people are able to get small reports",
    "start": "2837250",
    "end": "2843190"
  },
  {
    "text": "just you know so much easier to debug without this small repro I think it would take us two months handful you",
    "start": "2843190",
    "end": "2848829"
  },
  {
    "text": "know hands on something against something that we could pull off in less than week right so having small Reaper",
    "start": "2848829",
    "end": "2855220"
  },
  {
    "text": "not having is like very huge you know change and you're gonna make your life easier you're gonna make everyone Li's",
    "start": "2855220",
    "end": "2860530"
  },
  {
    "text": "life easier even though it's some investment it costs something but it just worth it other thing you know if",
    "start": "2860530",
    "end": "2867730"
  },
  {
    "text": "you can look up the TTD time travel debugging I highly recommend that if you run into some of these cool crazy things",
    "start": "2867730",
    "end": "2874270"
  },
  {
    "text": "you know it's my safe it's it's a lifesaver like or time saver as well obviously and the key takeaways I think",
    "start": "2874270",
    "end": "2881109"
  },
  {
    "text": "that sometimes there's just magic you know you just you know there's no explanation when things happen like that and at certain point as ng engineers we",
    "start": "2881109",
    "end": "2888910"
  },
  {
    "text": "want to understand everything obviously but sometimes SEC you know what I I I tried hard enough I give up",
    "start": "2888910",
    "end": "2894369"
  },
  {
    "text": "it's fixed or whatever we have work around let's move on right thank you very much I would like to ask you for",
    "start": "2894369",
    "end": "2903309"
  },
  {
    "start": "2899000",
    "end": "2950000"
  },
  {
    "text": "feedback after days I don't know why I made it this way sorry now you see",
    "start": "2903309",
    "end": "2909069"
  },
  {
    "text": "everything hopefully you enjoyed to talk you know if you have feedback hit me on",
    "start": "2909069",
    "end": "2914740"
  },
  {
    "text": "DM on twitter email or over here in person I would love to hear like you",
    "start": "2914740",
    "end": "2919750"
  },
  {
    "text": "know what you liked what you didn't like was it too rushed actually I ended up 10 minutes 10 minutes beforehand which is",
    "start": "2919750",
    "end": "2924849"
  },
  {
    "text": "awesome I didn't expect that if something was hard to understand boring core whatnot I love feedback that helps",
    "start": "2924849",
    "end": "2930849"
  },
  {
    "text": "me and as you see in the tweet which I did actually yesterday you know there",
    "start": "2930849",
    "end": "2935950"
  },
  {
    "text": "are more you know apply this to other to other speakers as well speakers love feedback because that's",
    "start": "2935950",
    "end": "2942160"
  },
  {
    "text": "the only way how we can get better so thank you very much [Applause]",
    "start": "2942160",
    "end": "2952420"
  }
]