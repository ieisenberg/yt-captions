[
  {
    "text": "right then it's nine o'clock so we can kick off thank you so much for coming here it is",
    "start": "8080",
    "end": "14160"
  },
  {
    "text": "a joy to see your happy shining faces after two years of not being able to do",
    "start": "14160",
    "end": "19279"
  },
  {
    "text": "this kind of thing so i'm really excited uh to to see you all and and to get back into this um so my name is steve and i",
    "start": "19279",
    "end": "26720"
  },
  {
    "text": "work at microsoft i'm on the asp.net team and one of my main focuses is this thing blazer which i'm going to be here",
    "start": "26720",
    "end": "33360"
  },
  {
    "text": "to talk to you about today particularly about stuff that we've been doing in.net",
    "start": "33360",
    "end": "38480"
  },
  {
    "text": "6 and maybe some slightly further ahead things than that so blazer is a ui framework for net for",
    "start": "38480",
    "end": "45840"
  },
  {
    "text": "building web-based uis if you didn't already know um and it's going really well as a project it's one of the fastest growing parts of net and we've",
    "start": "45840",
    "end": "52559"
  },
  {
    "text": "done a lot of work on it in net six we've shipped an absolute mountain of",
    "start": "52559",
    "end": "58559"
  },
  {
    "text": "new features uh here's a sampling of many of them now obviously i do not have",
    "start": "58559",
    "end": "64320"
  },
  {
    "text": "time in this talk to go through each of these one by one also it would be boring um so what we're gonna do in this talk",
    "start": "64320",
    "end": "71600"
  },
  {
    "text": "is focus on a specific business scenario and go through the process of working",
    "start": "71600",
    "end": "77759"
  },
  {
    "text": "out which of these new features would actually be useful in solving some of the business requirements in this",
    "start": "77759",
    "end": "84240"
  },
  {
    "text": "scenario so it's not going to be representative of everything in blazer it's just going to be a specific set of",
    "start": "84240",
    "end": "90320"
  },
  {
    "text": "things that are new and hopefully interesting and on this same theme so we'll focus on stuff that is new in net",
    "start": "90320",
    "end": "97439"
  },
  {
    "text": "six and uh hopefully it will inspire you to think about some potentially new kinds",
    "start": "97439",
    "end": "102720"
  },
  {
    "text": "of application capabilities that you could create that you wouldn't have done before on.net 5.",
    "start": "102720",
    "end": "109520"
  },
  {
    "text": "now we'll also talk a bit about some of the work we've done and performance for webassembly and then at the end i'll",
    "start": "109520",
    "end": "115600"
  },
  {
    "text": "talk about some other experiments that are you know not stuff that we've shipped or even committed to ship but are just thinking about at the moment",
    "start": "115600",
    "end": "122640"
  },
  {
    "text": "okay so we're gonna need a specific application scenario i don't really like to just do basic hello world kind of",
    "start": "122640",
    "end": "129759"
  },
  {
    "text": "demos so let's imagine a kind of business okay so i don't know if you know this but as well as being on the",
    "start": "129759",
    "end": "135680"
  },
  {
    "text": "asp.net team i'm also a reclusive eccentric billionaire and i",
    "start": "135680",
    "end": "140879"
  },
  {
    "text": "was chatting to some of my billionaire friends lately and it turns out they've all got their own space agencies and i",
    "start": "140879",
    "end": "146720"
  },
  {
    "text": "felt a bit envious of that so i called up my people and i said hey can we have a space agency please and they set one",
    "start": "146720",
    "end": "152879"
  },
  {
    "text": "up for me and i decided to call it blazorbital um and this is great news for you",
    "start": "152879",
    "end": "160239"
  },
  {
    "text": "because i want you to come and work at this company and be one of the chief",
    "start": "160239",
    "end": "165440"
  },
  {
    "text": "software architects and i know this is big news to you because you thought you'd already got a job and a family and stuff but you're gonna relocate okay",
    "start": "165440",
    "end": "172080"
  },
  {
    "text": "um you've probably got a lot of questions chief question i would think is what technologies do you use at this company",
    "start": "172080",
    "end": "178879"
  },
  {
    "text": "so i will give you a quick overview all right so at this company we've got a set of",
    "start": "178879",
    "end": "184560"
  },
  {
    "text": "central servers which manage all the critical business data and our auth that kind of thing and it just so happens to",
    "start": "184560",
    "end": "191280"
  },
  {
    "text": "be written with asp.net core but doesn't really matter for the purposes of this talk then there's various other departments",
    "start": "191280",
    "end": "197840"
  },
  {
    "text": "in the business that you'll need to know about and work with there's the manufacturing group okay these people",
    "start": "197840",
    "end": "203440"
  },
  {
    "text": "design and manufacture rockets and manage warehouses that kind of thing and they've got a front end implemented with",
    "start": "203440",
    "end": "210120"
  },
  {
    "text": "blazerwebassemblyon.net five so you might want to update that um and that communicates to the central server over",
    "start": "210120",
    "end": "215680"
  },
  {
    "text": "a secure grpc channel then there's another group the missions team they",
    "start": "215680",
    "end": "220720"
  },
  {
    "text": "deal with people are actually in space tracking satellites that kind of thing and they've got a front end implemented",
    "start": "220720",
    "end": "226480"
  },
  {
    "text": "in react so it's just a different team they've made a different technology choice that's how it is in the world",
    "start": "226480",
    "end": "232080"
  },
  {
    "text": "okay and then there's a third group might not seem quite as cool but it's sort of important if you like getting",
    "start": "232080",
    "end": "237599"
  },
  {
    "text": "paid that's the accounting team and they have got a native windows wpf desktop",
    "start": "237599",
    "end": "244239"
  },
  {
    "text": "application it might be a bit legacy but you know that's how things are and again it connects to the same central servers",
    "start": "244239",
    "end": "250640"
  },
  {
    "text": "and then finally i almost forgot there's a team called the libraries team they produce shared code that everyone else",
    "start": "250640",
    "end": "256799"
  },
  {
    "text": "uses and for their own mysterious reasons they will only work in rust so you're going to have to deal with that",
    "start": "256799",
    "end": "263040"
  },
  {
    "text": "whether or not that's convenient to you okay so you are going to be working on the manufacturing hub part of our",
    "start": "263040",
    "end": "270800"
  },
  {
    "text": "software suite which is the blazer webassembly application so let's imagine that you take this job",
    "start": "270800",
    "end": "276080"
  },
  {
    "text": "all right and you've been working on it for like a year or something like that you've been having a good time the technology is good you've got incredible",
    "start": "276080",
    "end": "282800"
  },
  {
    "text": "ceo so you're like you're pretty happy um but one day i come to you and i say",
    "start": "282800",
    "end": "288400"
  },
  {
    "text": "hey i've got a new business requirement for you okay we've been having some trouble in the warehouses knowing what's",
    "start": "288400",
    "end": "295280"
  },
  {
    "text": "in stock and where it is and how much it should be billed for and things like that so i need you to create a new",
    "start": "295280",
    "end": "300639"
  },
  {
    "text": "inventory management system and i've got some requirements for you firstly it needs to support some very",
    "start": "300639",
    "end": "306560"
  },
  {
    "text": "fast and powerful querying so we can quickly see what's where all right but while you're doing that you are not",
    "start": "306560",
    "end": "313039"
  },
  {
    "text": "allowed to put any new heavy load on the central servers because they are already busy enough",
    "start": "313039",
    "end": "318400"
  },
  {
    "text": "right now thirdly this is a space agency so we need to tolerate failures uh network",
    "start": "318400",
    "end": "325280"
  },
  {
    "text": "connection could go down during a mission and you need your application to keep on working including the querying",
    "start": "325280",
    "end": "330960"
  },
  {
    "text": "uh even if the network is down okay fourthly i don't just want to see this in the",
    "start": "330960",
    "end": "336479"
  },
  {
    "text": "blazer application we also need this in the react application and in the wpf application i've no idea how you're",
    "start": "336479",
    "end": "341759"
  },
  {
    "text": "going to do that but you're the developer so you go and figure out out please and then finally",
    "start": "341759",
    "end": "346960"
  },
  {
    "text": "we need to print out these shipping labels in the warehouses but don't worry the rust team has already created a",
    "start": "346960",
    "end": "352960"
  },
  {
    "text": "library for generating qr codes so please integrate that into your software again i don't know how you're going to",
    "start": "352960",
    "end": "358720"
  },
  {
    "text": "use rust you figure it out all right so those are your requirements",
    "start": "358720",
    "end": "364400"
  },
  {
    "text": "so let's have a go at doing some of that and we'll see if some of the new",
    "start": "364400",
    "end": "369520"
  },
  {
    "text": "features in dot net six will help you deliver on your goals so let's switch",
    "start": "369520",
    "end": "374639"
  },
  {
    "text": "over to visual studio and i've got a fairly predictable kind of solution here where i've got the central server and",
    "start": "374639",
    "end": "381039"
  },
  {
    "text": "some other projects and i've got my manufacturing hub application we'll just start that in a browser and see how it",
    "start": "381039",
    "end": "386400"
  },
  {
    "text": "looks before we start getting into any code okay so it's a pretty typical kind of blazer webassembly",
    "start": "386400",
    "end": "392080"
  },
  {
    "text": "application this is and of course you're gonna have to log in because the central server won't talk to you if you don't",
    "start": "392080",
    "end": "397520"
  },
  {
    "text": "give it any auth tokens so let's log in",
    "start": "397520",
    "end": "402080"
  },
  {
    "text": "like that and now we're logged in we can access some data on the central server which",
    "start": "402560",
    "end": "407600"
  },
  {
    "text": "has given us these statistics about stuff that's happening in the warehouse okay so that's all very well but we",
    "start": "407600",
    "end": "412720"
  },
  {
    "text": "don't actually care about any of that right now what we care about is this inventory screen over here",
    "start": "412720",
    "end": "419360"
  },
  {
    "text": "so this is where we're going to build the new warehouse management ui and remember we need to be able to have",
    "start": "419360",
    "end": "426240"
  },
  {
    "text": "fast powerful querying that works offline and doesn't put load on the server so we're going to need some kind",
    "start": "426240",
    "end": "432000"
  },
  {
    "text": "of client-side offline capable database now wouldn't it be nice if we could use",
    "start": "432000",
    "end": "437680"
  },
  {
    "text": "the leading tool for working with relational databases on.net core which is entity framework core and wouldn't it",
    "start": "437680",
    "end": "444560"
  },
  {
    "text": "be nice if the database behind that was something robust and industry standard and battle tested like sql lite well",
    "start": "444560",
    "end": "452000"
  },
  {
    "text": "you could try and do that on blazerwebassembly.net5 and it would not work and i will show you why it will not",
    "start": "452000",
    "end": "459039"
  },
  {
    "text": "work okay let's have a look at a little bit of code so here is the uh component that we were",
    "start": "459039",
    "end": "465440"
  },
  {
    "text": "just looking at there the inventory page okay so i've got a bit of code in here",
    "start": "465440",
    "end": "470560"
  },
  {
    "text": "already which is going to try and use efcor so first it's going to create a database context that defines the shape",
    "start": "470560",
    "end": "477199"
  },
  {
    "text": "of the database and it says that we're going to use sqlite as the underlying backend and then we've got some code",
    "start": "477199",
    "end": "484639"
  },
  {
    "text": "that will try to create a database with ensure created async we're going to insert a new row into it and finally",
    "start": "484639",
    "end": "492639"
  },
  {
    "text": "we'll do a query to see if we can get all that data back now don't worry if you can't read this in time or don't",
    "start": "492639",
    "end": "497840"
  },
  {
    "text": "understand it but you get the basic idea we're going to create a database and try and use it all right let's see if it",
    "start": "497840",
    "end": "503120"
  },
  {
    "text": "actually works and it won't so when i click on this button what do we get we get an unhandled error",
    "start": "503120",
    "end": "508800"
  },
  {
    "text": "has occurred well why let's have a look we'll look in the console and we'll see the underlying reason for the error is",
    "start": "508800",
    "end": "516080"
  },
  {
    "text": "this dll not found e-sqlite3 well this makes sense actually because sqlite",
    "start": "516080",
    "end": "523120"
  },
  {
    "text": "is native code it's written with c and although you can compile it into a dll",
    "start": "523120",
    "end": "528240"
  },
  {
    "text": "you can't load random dlls into a web browser you know the browser sandbox webassembly does not allow you to load",
    "start": "528240",
    "end": "534320"
  },
  {
    "text": "random native code like that so it's not going to work um but a feature that we",
    "start": "534320",
    "end": "539680"
  },
  {
    "text": "are adding in net 6 called native dependencies means that we can overcome this problem so with dot net 6 if you",
    "start": "539680",
    "end": "546959"
  },
  {
    "text": "can compile something to webassembly you can now link it in with your laser webassembly application and then call it",
    "start": "546959",
    "end": "553760"
  },
  {
    "text": "like any other native library so let's see if we can make sqlite three uh",
    "start": "553760",
    "end": "558800"
  },
  {
    "text": "sqlite work for us so we're gonna have to try and compile it to webassembly and i've got over here",
    "start": "558800",
    "end": "564800"
  },
  {
    "text": "the source code for sqlite3 which is one giant c file believe it or not that is how they distribute it which is",
    "start": "564800",
    "end": "571040"
  },
  {
    "text": "fantastic it's such an easy way of making it portable across different operating systems and different",
    "start": "571040",
    "end": "576880"
  },
  {
    "text": "compilation systems so i'm going to compile that using the uh and script and c compiler here i'm",
    "start": "576880",
    "end": "584160"
  },
  {
    "text": "going to compile that to a shared library called e sqlite3 whose name might be familiar to you from this",
    "start": "584160",
    "end": "590320"
  },
  {
    "text": "previous error message over here all right so if we have a look again in this directory you'll see we've now got e",
    "start": "590320",
    "end": "596560"
  },
  {
    "text": "sqlite 3.0 which actually contains webassembly by code and we're going to link that into our application so let's",
    "start": "596560",
    "end": "604000"
  },
  {
    "text": "go to the project file here and don't pay attention to the rest of it because it's just more stuff that you",
    "start": "604000",
    "end": "610640"
  },
  {
    "text": "can read and understand the important point here is we're referencing the entity framework core sqlite package and",
    "start": "610640",
    "end": "617040"
  },
  {
    "text": "next to this although i could put it anywhere i'm going to put this new thing called native file reference okay and",
    "start": "617040",
    "end": "623680"
  },
  {
    "text": "that is telling the compiler that i want to include this e sqlite 3.0 file that",
    "start": "623680",
    "end": "629120"
  },
  {
    "text": "we've built in the compiled application right now because i've done that the next time i build it takes a little bit",
    "start": "629120",
    "end": "635760"
  },
  {
    "text": "longer to build because it sees that the native dependencies have changed and it has to re-link stuff and re-optimize and",
    "start": "635760",
    "end": "642000"
  },
  {
    "text": "so on um but when it's done that the application will reload and let us see what happens when we click the button",
    "start": "642000",
    "end": "648399"
  },
  {
    "text": "this time do we get an error this time the answer is no we do not get an error it now actually works it now really uses",
    "start": "648399",
    "end": "655519"
  },
  {
    "text": "ef core inside the browser really has an actual sqlite database so that opens up",
    "start": "655519",
    "end": "661360"
  },
  {
    "text": "some interesting new possibilities for us so let's imagine that you do a few more",
    "start": "661360",
    "end": "667120"
  },
  {
    "text": "days of work now based on this new power and you write some code that is going to",
    "start": "667120",
    "end": "672320"
  },
  {
    "text": "fetch data from the central servers and synchronize it into this client-side database and you start working on a",
    "start": "672320",
    "end": "679040"
  },
  {
    "text": "little bit of a grid ui to display it as well now we don't have time to go through that step by step so what i'm",
    "start": "679040",
    "end": "684800"
  },
  {
    "text": "going to do is i'm going to just jump forwards in time slightly to the point where you've got a basic version of this",
    "start": "684800",
    "end": "691760"
  },
  {
    "text": "already okay so i'm going to hit save on that and the first thing we'll notice is that the hot reload system",
    "start": "691760",
    "end": "699360"
  },
  {
    "text": "jumps up and says hey looks like you changed your code there but you made so many changes i can't hot reload that now",
    "start": "699360",
    "end": "704959"
  },
  {
    "text": "we'll have a look at hot reload in a minute but when we've made this many changes i'm just going to say all right fine you can just restart my application",
    "start": "704959",
    "end": "711839"
  },
  {
    "text": "for me because i've made all these changes so that's going to restart now and when it does you'll see it starts",
    "start": "711839",
    "end": "717519"
  },
  {
    "text": "doing some slightly more interesting stuff so it's now fetching this data from the",
    "start": "717519",
    "end": "722720"
  },
  {
    "text": "back end and synchronizing it into this client-side database and displaying it",
    "start": "722720",
    "end": "727839"
  },
  {
    "text": "in a little grid uh you can find all the source code for this on github i'll give you the link to it later on um but the",
    "start": "727839",
    "end": "734720"
  },
  {
    "text": "stuff i really want to to emphasize to you is uh that this is a virtualized grid so even though we're working with",
    "start": "734720",
    "end": "741440"
  },
  {
    "text": "quite a lot of data here we've got 100 000 items in here i can still just instantly scroll to any part of that",
    "start": "741440",
    "end": "748720"
  },
  {
    "text": "list that i want to it's as if the data is already there in the browser because it is it's inside the sqlite database so",
    "start": "748720",
    "end": "756079"
  },
  {
    "text": "we can just query it locally and put it into this virtualized ui instantly even",
    "start": "756079",
    "end": "761120"
  },
  {
    "text": "with very large volumes of data okay that's good now then let's have a go at making some",
    "start": "761120",
    "end": "767120"
  },
  {
    "text": "other changes to our code and i'm going to just reorganize the screen a little bit",
    "start": "767120",
    "end": "773040"
  },
  {
    "text": "so we can experience a bit of hot reload uh while we work on this code",
    "start": "773040",
    "end": "778560"
  },
  {
    "text": "so i'm not very happy with the way this price is displayed actually let me just uh change the scroll position and sort",
    "start": "778560",
    "end": "786079"
  },
  {
    "text": "order like that right so i'm not super happy with this because these numbers like this number here that's just mad",
    "start": "786079",
    "end": "791200"
  },
  {
    "text": "what is that let's change the formatting a little bit so i have got this um",
    "start": "791200",
    "end": "798000"
  },
  {
    "text": "template column here uh and i can make some changes to it and hopefully when i",
    "start": "798000",
    "end": "803200"
  },
  {
    "text": "make changes they will automatically show up in the browser okay so i'm going to say firstly let's uh display this",
    "start": "803200",
    "end": "810959"
  },
  {
    "text": "with currency formatting okay so using.net's currency formatting uh feature i'm going to press save on that",
    "start": "810959",
    "end": "817360"
  },
  {
    "text": "and when i do hot reload kicks in and you'll see it now instantly starts changing to show this stuff in british",
    "start": "817360",
    "end": "823199"
  },
  {
    "text": "pounds but we haven't lost the scroll um position or the saw order or anything like that it's all just retained um so",
    "start": "823199",
    "end": "829920"
  },
  {
    "text": "that's good but it's also wrong because these are meant to be the price in cents and yeah i'm saying they're pounds",
    "start": "829920",
    "end": "835440"
  },
  {
    "text": "that's that's pretty weird so let's change that i'm going to get rid of this and i'm going to pretend that they're dollars so i'm going to put a dollar",
    "start": "835440",
    "end": "841519"
  },
  {
    "text": "sign at the start there and we'll save and then that updates that's nice but it's still wrong because these are the",
    "start": "841519",
    "end": "847199"
  },
  {
    "text": "price in cents and not dollars so let's divide that by 100 hit save again and",
    "start": "847199",
    "end": "852240"
  },
  {
    "text": "that makes slightly more sense now but i still want to format it a bit better than that i would like to i want",
    "start": "852240",
    "end": "857760"
  },
  {
    "text": "it to have comma separators in between the different groups so i'm going to say i'll do that to string as a number with",
    "start": "857760",
    "end": "865440"
  },
  {
    "text": "zero decimal places i'll hit save and again it updates and the formatting starts to make a bit of sense now that's",
    "start": "865440",
    "end": "872720"
  },
  {
    "text": "good um but i'm still not happy i don't really want to have this dollar sign on every single row so let's take that out",
    "start": "872720",
    "end": "879120"
  },
  {
    "text": "from there just to show we can change more stuff than a bit of static template like that and we'll change this",
    "start": "879120",
    "end": "884880"
  },
  {
    "text": "parameter and you'll see that that does indeed update up there and since this is a number i'm going to",
    "start": "884880",
    "end": "890959"
  },
  {
    "text": "right align it so let's do that and that's going to work as well and we could make more changes still for",
    "start": "890959",
    "end": "898079"
  },
  {
    "text": "example let's say i don't want the the columns to be in this order i want the name column to be first not id well",
    "start": "898079",
    "end": "904480"
  },
  {
    "text": "i'm just going to swap the order of these lines in my editor press save and they will of course swap around again",
    "start": "904480",
    "end": "911040"
  },
  {
    "text": "and maybe i don't actually want to display the id anyway because what what's the use of that that's just some technical detail let's display this",
    "start": "911040",
    "end": "917680"
  },
  {
    "text": "stock level in stock like that and i will display the stock level all",
    "start": "917680",
    "end": "924639"
  },
  {
    "text": "right so i'm going to hit save on that and again that's going to update all right so we are having a pretty good",
    "start": "924639",
    "end": "931839"
  },
  {
    "text": "fluid development experience thanks to the hot reload system uh all of these",
    "start": "931839",
    "end": "937199"
  },
  {
    "text": "changes that we've been making we did not lose the state of our application as for what changes you can make without",
    "start": "937199",
    "end": "943839"
  },
  {
    "text": "losing your state well it it varies uh there are many kinds of changes that will be applied without losing any state",
    "start": "943839",
    "end": "950160"
  },
  {
    "text": "there are some changes that can't be applied and when that happens it will automatically restart your page for you",
    "start": "950160",
    "end": "955519"
  },
  {
    "text": "but hopefully you have a pretty fluid experience with that now let's look at this file a little bit",
    "start": "955519",
    "end": "960880"
  },
  {
    "text": "more broadly because there's more stuff going on in here and i appreciate i haven't shown you all this code and you won't know what it all is but let's just",
    "start": "960880",
    "end": "968000"
  },
  {
    "text": "try and spot a few new.net six features in here so looking down from the top the first new dot net six feature is this",
    "start": "968000",
    "end": "974160"
  },
  {
    "text": "thing page title okay so this is a on a slightly tangential topic really but um",
    "start": "974160",
    "end": "980399"
  },
  {
    "text": "one of the new features is that you see this title up here where it says inventory well if i navigate to another",
    "start": "980399",
    "end": "986320"
  },
  {
    "text": "page well that title is going to change and if i navigate back then it's going to change back so that's just",
    "start": "986320",
    "end": "992240"
  },
  {
    "text": "another feature of.net 6. easy way of changing the page title um the sing status thing that's some code that i",
    "start": "992240",
    "end": "998800"
  },
  {
    "text": "wrote that displays the progress bar that you saw a minute ago there's nothing new in there you can see the code for this later if you want to",
    "start": "998800",
    "end": "1005440"
  },
  {
    "text": "uh what else have we got well the actual logic for the component is this when it's initialized it's going to get an",
    "start": "1005440",
    "end": "1012320"
  },
  {
    "text": "entity framework db context that gives us access to the local sqlite database",
    "start": "1012320",
    "end": "1017920"
  },
  {
    "text": "and we'll subscribe for notifications when that changes so we can update the ui and then finally we've got the grid",
    "start": "1017920",
    "end": "1024160"
  },
  {
    "text": "and you've already seen some of that now the grid is another thing whose sources in this project you can see later if you",
    "start": "1024160",
    "end": "1029839"
  },
  {
    "text": "want so this is cool we could build a quite sophisticated ui with this so",
    "start": "1029839",
    "end": "1035520"
  },
  {
    "text": "again let's pretend that you do a couple days more work and you add some more",
    "start": "1035520",
    "end": "1040558"
  },
  {
    "text": "columns and you add some filtering capabilities so once again let's jump forwards in time slightly to a more",
    "start": "1040559",
    "end": "1046640"
  },
  {
    "text": "updated version of this code and i'll hit save and again uh because i've made",
    "start": "1046640",
    "end": "1052160"
  },
  {
    "text": "so many changes the hot reload system is going to have to restart the page just there and when that comes back you'll",
    "start": "1052160",
    "end": "1057679"
  },
  {
    "text": "see there's more stuff going on now so we've got more columns we've got filtering i can do things like",
    "start": "1057679",
    "end": "1063200"
  },
  {
    "text": "multi-select to to you know show more to filter on",
    "start": "1063200",
    "end": "1068320"
  },
  {
    "text": "categories and subcategories that's another new.net six feature by the way if you bind to an array then that",
    "start": "1068320",
    "end": "1074720"
  },
  {
    "text": "automatically works with multi-selection didn't before but it does now uh what else have we got we've got something",
    "start": "1074720",
    "end": "1080160"
  },
  {
    "text": "like uh filtering as we search let's as i type then you see that that just updates i'll show you how that works in",
    "start": "1080160",
    "end": "1086160"
  },
  {
    "text": "a minute and then finally what about filtering by stock level i've got these sliders and as i move the slider what",
    "start": "1086160",
    "end": "1093039"
  },
  {
    "text": "happens oh nothing happens nothing whatsoever what's going on have we got a bug in the code",
    "start": "1093039",
    "end": "1099679"
  },
  {
    "text": "well no i deliberately just didn't implement this because i wanted to show you how it's implemented to give you a bit more of a sense of what's going on",
    "start": "1099679",
    "end": "1105600"
  },
  {
    "text": "here so how does this work and or why does it not work well let's have a look at the source code well what we've got now uh",
    "start": "1105600",
    "end": "1113600"
  },
  {
    "text": "inside our markup here inside this stock column we've got some options for that",
    "start": "1113600",
    "end": "1119039"
  },
  {
    "text": "and we've got these html range sliders and that uses normal blazer syntax to",
    "start": "1119039",
    "end": "1125120"
  },
  {
    "text": "bind the value of this slider to a c sharp field called min stock all right",
    "start": "1125120",
    "end": "1130880"
  },
  {
    "text": "what's that well that is defined down here i've got min stock and mac stock that have got particular default values",
    "start": "1130880",
    "end": "1137600"
  },
  {
    "text": "and we want to include those values in the query that we do against the sqlite",
    "start": "1137600",
    "end": "1142799"
  },
  {
    "text": "database where is that query defined well it's defined here as this big property",
    "start": "1142799",
    "end": "1148640"
  },
  {
    "text": "and you can see it uses a standard iqueryable which is the the net way of",
    "start": "1148640",
    "end": "1154720"
  },
  {
    "text": "building up a query and then that can be translated automatically by ef core into",
    "start": "1154720",
    "end": "1160240"
  },
  {
    "text": "a sql query that hopefully will be reasonably efficient and we can use normal procedural logic to build up that",
    "start": "1160240",
    "end": "1166240"
  },
  {
    "text": "query and you see we're including the category subcategory and name but we have not included the stock level so",
    "start": "1166240",
    "end": "1171919"
  },
  {
    "text": "it's that's why it's ignoring the stock level so let's put in the logic for that right so let's just paste that in if",
    "start": "1171919",
    "end": "1178720"
  },
  {
    "text": "you've given us a stock level then we'll have a where clause for the min stock and maybe for the max stock as well all",
    "start": "1178720",
    "end": "1184880"
  },
  {
    "text": "right let's see if that actually works then shall we we'll go back into our browser here and now if i move these",
    "start": "1184880",
    "end": "1191440"
  },
  {
    "text": "range sliders here you'll see that the querying happens in real time while i move the slider if you see that number",
    "start": "1191440",
    "end": "1197360"
  },
  {
    "text": "in the bottom left see how that's changing as i move it and this is a pretty awesome developer user experience",
    "start": "1197360",
    "end": "1203600"
  },
  {
    "text": "actually you don't normally see this kind of thing on the web because it would normally be impractical to be you",
    "start": "1203600",
    "end": "1209360"
  },
  {
    "text": "know hitting the server with queries at 60 frames a second but when you've got a client-side single user database you can",
    "start": "1209360",
    "end": "1215840"
  },
  {
    "text": "just do this kind of thing it's fine like the performance is going to be fine because the worst thing that can happen",
    "start": "1215840",
    "end": "1221200"
  },
  {
    "text": "is that one user slows themselves down they can't slow anyone else down by issuing too many queries so you know you",
    "start": "1221200",
    "end": "1227039"
  },
  {
    "text": "can do this kind of thing which is pretty cool all right so let's recap where we are",
    "start": "1227039",
    "end": "1233039"
  },
  {
    "text": "on our on our roadmap here we've implemented some fast and powerful querying and",
    "start": "1233039",
    "end": "1239280"
  },
  {
    "text": "we've done so without putting any heavy load on the server because we're just synchronizing changes from the server",
    "start": "1239280",
    "end": "1244799"
  },
  {
    "text": "and after that we don't even talk to it okay so that's pretty good right then what about these other things",
    "start": "1244799",
    "end": "1251120"
  },
  {
    "text": "let's start with that one at the bottom the qr code from the rust team",
    "start": "1251120",
    "end": "1256640"
  },
  {
    "text": "what's that where's that going to go and how are we going to use it well let's uh",
    "start": "1256640",
    "end": "1261840"
  },
  {
    "text": "open up one of these things let's open up this support ramp which sounds very exciting um this is the stock label that",
    "start": "1261840",
    "end": "1269360"
  },
  {
    "text": "people need to be able to print out and you can see it's got this gray box in it and that's where we want to display a qr",
    "start": "1269360",
    "end": "1275039"
  },
  {
    "text": "code right so let's see i've actually started working on a component that displays qr codes already this is a",
    "start": "1275039",
    "end": "1282080"
  },
  {
    "text": "normal blazer component and it wants to display stuff using an html canvas where",
    "start": "1282080",
    "end": "1287440"
  },
  {
    "text": "it can paint the qr code and it's going to get that qr code by making a call",
    "start": "1287440",
    "end": "1293679"
  },
  {
    "text": "into this function called generate qr code which itself is being imported from",
    "start": "1293679",
    "end": "1299440"
  },
  {
    "text": "a dll called lib rust qr so i think hopefully you'll get a sense of how this is going to fit together now we're going",
    "start": "1299440",
    "end": "1305600"
  },
  {
    "text": "to write a bit of rus code that creates a dll and then we're going to link this in with our blazer webassembly",
    "start": "1305600",
    "end": "1310960"
  },
  {
    "text": "application and then we'll be able to call rust code directly from our.net code now in fact i've already done that so",
    "start": "1310960",
    "end": "1317840"
  },
  {
    "text": "i'm just going to uncomment this line and you'll see it happen so let's just move this over here and this over here",
    "start": "1317840",
    "end": "1323679"
  },
  {
    "text": "and uh yeah that's good enough all right so when i uncomment this and i press save hot reload will happen and you can",
    "start": "1323679",
    "end": "1330080"
  },
  {
    "text": "see it now actually does call into this rust library and a qr code shows up",
    "start": "1330080",
    "end": "1335760"
  },
  {
    "text": "which is cool um but how does it work and why is it blue that's pretty weird isn't it qr codes aren't normally blue",
    "start": "1335760",
    "end": "1342960"
  },
  {
    "text": "so i just want to use that as an excuse to show you the russ code basically um and we're going to fix this entirely",
    "start": "1342960",
    "end": "1349039"
  },
  {
    "text": "artificial bug in the rust code so here is my rust library or the rust",
    "start": "1349039",
    "end": "1355120"
  },
  {
    "text": "teams library and how does it work well if you don't know russcode obviously it's going to look a bit unfamiliar to",
    "start": "1355120",
    "end": "1361120"
  },
  {
    "text": "you but don't worry about that it's pretty straightforward all it's doing is it's taking this value in from.net and",
    "start": "1361120",
    "end": "1367919"
  },
  {
    "text": "it's calling out to a third-party rust package or crate as they call it called qr code to generate a qr code that",
    "start": "1367919",
    "end": "1375200"
  },
  {
    "text": "encodes that value and then all the remaining code down here which there's not very much of all that is doing is",
    "start": "1375200",
    "end": "1382640"
  },
  {
    "text": "just changing the order of the pixels because in an html canvas you must have rgba format",
    "start": "1382640",
    "end": "1388880"
  },
  {
    "text": "pixels and that's not what the rust crate produces so we have to change the order of all those pixels and that and",
    "start": "1388880",
    "end": "1394960"
  },
  {
    "text": "that's what this is for but there is a bug and it is on this line of code here",
    "start": "1394960",
    "end": "1400000"
  },
  {
    "text": "you'll see that the blue channel is hard-coded to be 255 which is always on uh regardless of whether this pixel",
    "start": "1400000",
    "end": "1406320"
  },
  {
    "text": "should be on or off so that's why it's coming out in blue and it's pretty obvious that we can fix that by making",
    "start": "1406320",
    "end": "1411919"
  },
  {
    "text": "the pixel the blue channel vary according to the uh the pixel value okay so i've made that change i'm going to",
    "start": "1411919",
    "end": "1418559"
  },
  {
    "text": "rebuild it using cargo build that's the standard rust tool chain it's insanely",
    "start": "1418559",
    "end": "1423679"
  },
  {
    "text": "fast and that is natively producing some web assembly by code for me okay so we",
    "start": "1423679",
    "end": "1429919"
  },
  {
    "text": "want to have that in our blazer application in fact we already do let me just show you here we've got um this",
    "start": "1429919",
    "end": "1437760"
  },
  {
    "text": "native reference here which is the same as the way that we pulled in the sqlite",
    "start": "1437760",
    "end": "1442799"
  },
  {
    "text": "binary before this time we're pulling in the rust binary which has been compiled to",
    "start": "1442799",
    "end": "1448240"
  },
  {
    "text": "webassembly so hopefully when that finishes redoing all the native linking it's going to restart our application",
    "start": "1448240",
    "end": "1455840"
  },
  {
    "text": "and then we should see the changes being applied uh based on the change we just",
    "start": "1455840",
    "end": "1460880"
  },
  {
    "text": "made to the rust code okay so here that comes back and now we'll go into here and you'll see it now",
    "start": "1460880",
    "end": "1466000"
  },
  {
    "text": "comes up in black and we've fixed our book so it really was running the rust code cool that's nice now what about making",
    "start": "1466000",
    "end": "1473520"
  },
  {
    "text": "it work offline well in a sense there might not be very much work for us to do here because",
    "start": "1473520",
    "end": "1479919"
  },
  {
    "text": "we've already got a local database which doesn't need a server and blazer webassembly has always supported working",
    "start": "1479919",
    "end": "1486080"
  },
  {
    "text": "offline as a pwa so maybe it's just gonna work maybe if we just publish it as a pwa it's gonna work so i'm gonna i",
    "start": "1486080",
    "end": "1493840"
  },
  {
    "text": "have published it as a pwa already and i've just launched it from my windows taskbar and you see it comes up in its",
    "start": "1493840",
    "end": "1499039"
  },
  {
    "text": "own window and it's looking the same as it does when it's in a browser it's got all the same functionality and filtering",
    "start": "1499039",
    "end": "1504640"
  },
  {
    "text": "and stuff great but what about being offline well to simulate that i'm going to kill",
    "start": "1504640",
    "end": "1511200"
  },
  {
    "text": "the web server completely so here is the web server for central server and now it is dead right so if i start this again",
    "start": "1511200",
    "end": "1518240"
  },
  {
    "text": "it obviously can't talk to the web server because there isn't one um it's simulating a severed network connection",
    "start": "1518240",
    "end": "1523919"
  },
  {
    "text": "so it takes a little longer to start up now because it's trying to talk to the server and it can't so after a little",
    "start": "1523919",
    "end": "1529520"
  },
  {
    "text": "bit it's going to give up and we can write whatever kind of user experience we want around that so we can say sorry",
    "start": "1529520",
    "end": "1534960"
  },
  {
    "text": "there's a problem if we want we can tell people what the problem was but they can still use the application they can still",
    "start": "1534960",
    "end": "1540799"
  },
  {
    "text": "navigate over to inventory and we can still give them access to all the data that's already available locally and all",
    "start": "1540799",
    "end": "1546400"
  },
  {
    "text": "the same filtering and stuff is still going to work our code knows it can't talk to the server so we can still have",
    "start": "1546400",
    "end": "1551919"
  },
  {
    "text": "a user experience around that but basically it's going to work as well as could be possible under the",
    "start": "1551919",
    "end": "1557440"
  },
  {
    "text": "circumstances so we've got it working offline as well right now time for something a bit more",
    "start": "1557440",
    "end": "1563679"
  },
  {
    "text": "challenging what about using it in these other apps the react app and the wpf app",
    "start": "1563679",
    "end": "1568799"
  },
  {
    "text": "how on earth are we going to do that well let's start by thinking about this react application actually for mission",
    "start": "1568799",
    "end": "1574159"
  },
  {
    "text": "control i'm going to show you that so let's go over to this mission control application here which i've got in vs",
    "start": "1574159",
    "end": "1580400"
  },
  {
    "text": "code this is a react application there's nothing react specific about this by the way be the same for angular view or html",
    "start": "1580400",
    "end": "1587039"
  },
  {
    "text": "whatever you want okay i'm going to start this up in a web browser and this is our mission control application this",
    "start": "1587039",
    "end": "1593200"
  },
  {
    "text": "is where we track the position of satellites we track how long it's been since we last saw any aliens that kind of normal stuff okay",
    "start": "1593200",
    "end": "1599919"
  },
  {
    "text": "and of course it's going to require us to log in because otherwise the central server will not give us any data it's",
    "start": "1599919",
    "end": "1606080"
  },
  {
    "text": "going to use the same single sign-on system so i don't have to type my password i just become logged in based",
    "start": "1606080",
    "end": "1611200"
  },
  {
    "text": "on my existing cookies all right now we don't really care about all this stuff what we care about is the equipment",
    "start": "1611200",
    "end": "1617600"
  },
  {
    "text": "finder alright this is where we want to put the inventory grid that we just implemented in blazer but how on earth",
    "start": "1617600",
    "end": "1623919"
  },
  {
    "text": "are we going to do that in a react application well let's have a look shall we let's see how",
    "start": "1623919",
    "end": "1630000"
  },
  {
    "text": "this um application looks in the first place the react source code so i've got this",
    "start": "1630000",
    "end": "1636480"
  },
  {
    "text": "equipment finder js file and let's get a bit more space on the screen all right",
    "start": "1636480",
    "end": "1641520"
  },
  {
    "text": "then so if you know react you'll see this is pretty basic stuff and if you don't well",
    "start": "1641520",
    "end": "1646559"
  },
  {
    "text": "just trust me it's pretty basic um the only thing that this is doing is keeping track of some text that's typed into",
    "start": "1646559",
    "end": "1652880"
  },
  {
    "text": "this search box all right so that's what this search text up here is going to be and then the rest of it is just",
    "start": "1652880",
    "end": "1658320"
  },
  {
    "text": "displaying some static html and we want to put the inventory grid",
    "start": "1658320",
    "end": "1663440"
  },
  {
    "text": "right here how could we do it well one way we could do it which would be kind of rubbish but it would sort of",
    "start": "1663440",
    "end": "1669279"
  },
  {
    "text": "work is that we could put an iframe in here and an iframe could host the blazer",
    "start": "1669279",
    "end": "1674399"
  },
  {
    "text": "webassembly application it would work it's very old-school way of approaching this um but it would be kind of rubbish",
    "start": "1674399",
    "end": "1679679"
  },
  {
    "text": "because it would be a completely separate universe it wouldn't uh share any auth state it wouldn't share any",
    "start": "1679679",
    "end": "1685679"
  },
  {
    "text": "styling it'd be really hard to get parameters in and out so wouldn't it be nice if instead of",
    "start": "1685679",
    "end": "1691520"
  },
  {
    "text": "that we could just somehow use our inventory grid as if it was a normal html element that would be cool wouldn't",
    "start": "1691520",
    "end": "1697360"
  },
  {
    "text": "it well one of the new features of dot net 6 is that you can if you want to do",
    "start": "1697360",
    "end": "1703679"
  },
  {
    "text": "exactly that so i'm going to show you how this is enabled if i go into my",
    "start": "1703679",
    "end": "1710000"
  },
  {
    "text": "program cs file here and scroll down to the bottom you can see we're calling this api i'm taking the inventory",
    "start": "1710000",
    "end": "1716320"
  },
  {
    "text": "component that we implemented earlier and registering it as a custom element called inventory grid so custom elements",
    "start": "1716320",
    "end": "1723360"
  },
  {
    "text": "are part of the web component spec and this means it looks and feels like a normal html element and you can just use",
    "start": "1723360",
    "end": "1729520"
  },
  {
    "text": "that in your angular react view or plain html website whatever you've got okay so let's have a go at trying to do that",
    "start": "1729520",
    "end": "1736880"
  },
  {
    "text": "i've already added the necessary script tag to this page that will load the blazer webassembly code so hopefully i",
    "start": "1736880",
    "end": "1744159"
  },
  {
    "text": "can just add an inventory grid right here and then i'm going to press save and the react hot reload system will",
    "start": "1744159",
    "end": "1750480"
  },
  {
    "text": "happen and our blazer uh component will show up as if it's just a normal html",
    "start": "1750480",
    "end": "1756240"
  },
  {
    "text": "element and it will have all the same functionality that we had before um if you're wondering why it has to fetch all",
    "start": "1756240",
    "end": "1761679"
  },
  {
    "text": "the data again well it's because this is a different website it doesn't share any storage with the other one you know it's a different origin",
    "start": "1761679",
    "end": "1767840"
  },
  {
    "text": "so it's a completely separate uh world as far as the data is concerned but it's gonna work and we've got all",
    "start": "1767840",
    "end": "1773840"
  },
  {
    "text": "the same functionality um one thing i'm not too happy with here though",
    "start": "1773840",
    "end": "1778960"
  },
  {
    "text": "is the visual styling because everything else in mission control uses a dark theme but this is a",
    "start": "1778960",
    "end": "1784640"
  },
  {
    "text": "light theme and it's kind of a bit clashing and out of place um but the good news is since this is not an iframe",
    "start": "1784640",
    "end": "1790559"
  },
  {
    "text": "it's going to use the same css styles as the host page so i can use react styling",
    "start": "1790559",
    "end": "1796240"
  },
  {
    "text": "system here i'm going to go into this css file and i'll say i want to find the table that's",
    "start": "1796240",
    "end": "1802000"
  },
  {
    "text": "in my inventory grid and apply a css filter to invert that",
    "start": "1802000",
    "end": "1807600"
  },
  {
    "text": "and press save and boom instant dark mode and now we are on theme for the",
    "start": "1807600",
    "end": "1813279"
  },
  {
    "text": "mission control application that's good um but one the other thing is still not",
    "start": "1813279",
    "end": "1818799"
  },
  {
    "text": "working you see this thing where i'm typing search criteria in it's just not doing",
    "start": "1818799",
    "end": "1824080"
  },
  {
    "text": "anything why is that well because i'm not passing that criteria into the dot net code yet now inside the inventory",
    "start": "1824080",
    "end": "1831200"
  },
  {
    "text": "grid if you look in the uh the blazer code we've got a parameter called",
    "start": "1831200",
    "end": "1836559"
  },
  {
    "text": "search name which we can pass in and that is translated in this api to an html attribute so i can pass",
    "start": "1836559",
    "end": "1843760"
  },
  {
    "text": "search name in here and what value should we give to it well we'll give the value that you've typed into your text",
    "start": "1843760",
    "end": "1849200"
  },
  {
    "text": "box so i'll press save and now again the hot reload system happens and our query",
    "start": "1849200",
    "end": "1854640"
  },
  {
    "text": "is applied and just instantly now as we type that will be applied directly from the",
    "start": "1854640",
    "end": "1860799"
  },
  {
    "text": "react text box into the blazer application cool pretty good now i don't know if",
    "start": "1860799",
    "end": "1866720"
  },
  {
    "text": "you've noticed but we've been using the react hot reload system there and it's retained the state of the react",
    "start": "1866720",
    "end": "1871840"
  },
  {
    "text": "application as we did that it's also retained the state of the dot net application as we did that so that's",
    "start": "1871840",
    "end": "1877360"
  },
  {
    "text": "pretty neat but what would happen if we changed the net code would the hot reload system for",
    "start": "1877360",
    "end": "1882880"
  },
  {
    "text": "dot network in this environment well let's try it shall we um so what are we going to change well it's a bit",
    "start": "1882880",
    "end": "1889279"
  },
  {
    "text": "arbitrary but let's just change this column title just for the sake of changing something i'm going to change it from category to cat's name just you",
    "start": "1889279",
    "end": "1898000"
  },
  {
    "text": "know to change something and i'll press save on that and get a strange message but nonetheless you'll see that the hot",
    "start": "1898000",
    "end": "1904799"
  },
  {
    "text": "reload system has actually worked so the dot net hot reload has worked inside this react application preserving the",
    "start": "1904799",
    "end": "1912000"
  },
  {
    "text": "state of both the dot net code and the react code as well as the react hot reload system also working together in",
    "start": "1912000",
    "end": "1918720"
  },
  {
    "text": "one application which hopefully means that you can be pretty spectacularly",
    "start": "1918720",
    "end": "1923840"
  },
  {
    "text": "productive and and i can give you a promotion and we're all happy all right",
    "start": "1923840",
    "end": "1928960"
  },
  {
    "text": "so we've got our blazer code running inside a react application that's nice but what about putting it in a wpf app",
    "start": "1928960",
    "end": "1936080"
  },
  {
    "text": "is that even harder maybe because with react at least it's running in a browser but wpf it's not even a web browser how",
    "start": "1936080",
    "end": "1942960"
  },
  {
    "text": "on earth are we going to display a blazer component in that well let me show you uh in fact i've already got",
    "start": "1942960",
    "end": "1949120"
  },
  {
    "text": "this working and i'm just going to show you that it's working so i'm going to set this accounting application as my starter project and",
    "start": "1949120",
    "end": "1954640"
  },
  {
    "text": "run it and this is going to use a feature that we haven't actually shipped in.net 6 yet so i'm cheating a little bit here but as part of the maui release",
    "start": "1954640",
    "end": "1962000"
  },
  {
    "text": "next year we are creating the ability to uh host blazer components inside native",
    "start": "1962000",
    "end": "1968240"
  },
  {
    "text": "desktop and mobile applications for windows mac ios android and also for wpf",
    "start": "1968240",
    "end": "1974000"
  },
  {
    "text": "and winforms so here's a wpf application it's got all this boring accounting stuff in it but when i move over onto",
    "start": "1974000",
    "end": "1980320"
  },
  {
    "text": "the inventory page what are we going to see well we're going to see our blazer component the first thing it's going to",
    "start": "1980320",
    "end": "1985760"
  },
  {
    "text": "demand that i log in because you know again the central server won't talk to us otherwise uh but once i've done that",
    "start": "1985760",
    "end": "1992399"
  },
  {
    "text": "exactly the same stuff is going to work as we had before and this is really the same code literally the same thing where",
    "start": "1992399",
    "end": "1998880"
  },
  {
    "text": "we just changed cat name a minute ago is right there inside our wpf application",
    "start": "1998880",
    "end": "2004159"
  },
  {
    "text": "and it's got exactly the same functionality now how does that work well the api for embedding a blazer",
    "start": "2004159",
    "end": "2010960"
  },
  {
    "text": "component is going to be different depending on whether you're doing winforms wpf or maui",
    "start": "2010960",
    "end": "2016720"
  },
  {
    "text": "in the wpf case which i don't know whether you care about or not uh but let me just show you anyway uh wfpf is based",
    "start": "2016720",
    "end": "2023519"
  },
  {
    "text": "around xaml so excuse me we've got uh xaml api for that and it looks a bit",
    "start": "2023519",
    "end": "2028640"
  },
  {
    "text": "like this so we've got this blazer webview and what that's going to do is create a small web browser",
    "start": "2028640",
    "end": "2036080"
  },
  {
    "text": "instance that lives as part of the wpf control hierarchy and then it's able to",
    "start": "2036080",
    "end": "2041840"
  },
  {
    "text": "insert one of our blazer components in this case we're inserting the inventory one",
    "start": "2041840",
    "end": "2046960"
  },
  {
    "text": "and if you're wondering is this web assembly or is this blazer server the answer is no neither it this is just",
    "start": "2046960",
    "end": "2053679"
  },
  {
    "text": "blazer okay it's running your blazer component directly on the native.net runtime within this application not",
    "start": "2053679",
    "end": "2060158"
  },
  {
    "text": "webassembly not server it's just blazeron.net okay so it's a relatively",
    "start": "2060159",
    "end": "2065200"
  },
  {
    "text": "simple and highly performant system and one last thing if i click on one of these you'll see this qr code comes up",
    "start": "2065200",
    "end": "2071679"
  },
  {
    "text": "now that might be a bit baffling at first because remember we compiled the rust code to webassembly and this is not",
    "start": "2071679",
    "end": "2076960"
  },
  {
    "text": "webassembly this application so how is this rust code working inside blazer inside wpf well the answer to that is",
    "start": "2076960",
    "end": "2084398"
  },
  {
    "text": "if you've got a native library you need to compile it to each of the native platforms you want to support and in this case i've compiled the",
    "start": "2084399",
    "end": "2091440"
  },
  {
    "text": "libros qr both to webassembly and to a native windows binary and so when we use",
    "start": "2091440",
    "end": "2097520"
  },
  {
    "text": "an api like this dll import it's going to work the same everywhere this is an important",
    "start": "2097520",
    "end": "2103680"
  },
  {
    "text": "thing to illustrate that we want the programming experience to be the same whether you're doing webassembly server",
    "start": "2103680",
    "end": "2108720"
  },
  {
    "text": "maui anything else if you're using something even an advanced feature like dll import it should work the same and",
    "start": "2108720",
    "end": "2114720"
  },
  {
    "text": "do the right thing on each platform that you're running on all right so we've completed all of our goals and we",
    "start": "2114720",
    "end": "2121359"
  },
  {
    "text": "can go home for the weekend and feel good about ourselves um but let's change the subject a little bit",
    "start": "2121359",
    "end": "2128560"
  },
  {
    "text": "and think now about performance okay we've not really thought about that",
    "start": "2128560",
    "end": "2133920"
  },
  {
    "text": "in this talk so far uh this is an area that we've done a lot of investment in in dot net six um i don't know if you",
    "start": "2133920",
    "end": "2140160"
  },
  {
    "text": "know this but dot net on webassembly up until now in dot net 5 and earlier has always been",
    "start": "2140160",
    "end": "2146079"
  },
  {
    "text": "running on an interpreter the dot net runtime uh is an interpreter for for dot net runtime",
    "start": "2146079",
    "end": "2153760"
  },
  {
    "text": "when we compile the dot net runtime for webassembly it is an interpreter that's all i'm saying here and that's great for your productivity",
    "start": "2153760",
    "end": "2160400"
  },
  {
    "text": "and for small app sizes but it's not always great for performance on cpu bound code and that is why we've created",
    "start": "2160400",
    "end": "2167680"
  },
  {
    "text": "ahead of time compilation for this which can hopefully improve the performance and i'm going to give you a quick",
    "start": "2167680",
    "end": "2173040"
  },
  {
    "text": "demonstration of that a visual demonstration even though it's kind of a silly scenario okay so",
    "start": "2173040",
    "end": "2178720"
  },
  {
    "text": "our uh crazy scenario is that we found a wormhole into a binary star system and",
    "start": "2178720",
    "end": "2185200"
  },
  {
    "text": "we want to send some satellites in to research the this uh you know binary star system so our",
    "start": "2185200",
    "end": "2190560"
  },
  {
    "text": "scientists have created a simulation of satellites moving inside a binary star",
    "start": "2190560",
    "end": "2196480"
  },
  {
    "text": "system here and they've chosen to do that on blazer webassembly which is a wildly inappropriate thing to do but they've",
    "start": "2196480",
    "end": "2202720"
  },
  {
    "text": "done that anyway okay and the only thing that you actually need to care about here is the fact that this",
    "start": "2202720",
    "end": "2209599"
  },
  {
    "text": "all of this physics stuff here is actually c sharp code it is.now and i'll actually let me just show you i'm not",
    "start": "2209599",
    "end": "2214960"
  },
  {
    "text": "going to go through it line by line a wrong file it's in here all right so it's super basic we've got a body which has got a",
    "start": "2214960",
    "end": "2221599"
  },
  {
    "text": "position velocity mass and color all right we can make it go to a random place we've got the satellites and some",
    "start": "2221599",
    "end": "2227839"
  },
  {
    "text": "suns we give them an initial position on every frame here 60 frames a second",
    "start": "2227839",
    "end": "2233200"
  },
  {
    "text": "we're going to run the physics for the sun's and for all of the bodies all right and what does it mean to run physics well we'll loop over all the",
    "start": "2233200",
    "end": "2240560"
  },
  {
    "text": "suns we'll work out the acceleration using some basic like high school newtonian physics and update the",
    "start": "2240560",
    "end": "2247520"
  },
  {
    "text": "velocity we'll update the position and if it's gone too far away we'll respawn it all right so it's basic basic stuff",
    "start": "2247520",
    "end": "2255280"
  },
  {
    "text": "and you just need to understand that it's written in c sharp okay so this is an actual measure of the performance of",
    "start": "2255280",
    "end": "2260480"
  },
  {
    "text": "our c sharp code how many satellites can we get well we've got 100 in here could we have",
    "start": "2260480",
    "end": "2265920"
  },
  {
    "text": "a 200 satellites yes we could could we have 500",
    "start": "2265920",
    "end": "2271200"
  },
  {
    "text": "yes we could and it's 60 frames a second okay that's great could we manage a thousand satellites",
    "start": "2271200",
    "end": "2278160"
  },
  {
    "text": "yes 2 000 yes 4 000 yes",
    "start": "2278160",
    "end": "2284640"
  },
  {
    "text": "six thousand yeah no okay so it's gone down to less",
    "start": "2284640",
    "end": "2289839"
  },
  {
    "text": "than 60 frames a second it's near oh okay we can just about do six thousand",
    "start": "2289839",
    "end": "2294880"
  },
  {
    "text": "seven thousand no all right so this is not aot compiled code this is running on",
    "start": "2294880",
    "end": "2300800"
  },
  {
    "text": "the interpreter which is you know reasonably fast and if you're just building grids and stuff it's easily fast enough but if you're going to do",
    "start": "2300800",
    "end": "2306960"
  },
  {
    "text": "some c some high performance cpu band code then you might encounter bottlenecks how much faster would this",
    "start": "2306960",
    "end": "2313920"
  },
  {
    "text": "get if we compiled it to uh with aot compilation well i've got that same code",
    "start": "2313920",
    "end": "2321040"
  },
  {
    "text": "absolutely identical here compiled and published with aot compilation here and i'm going to run that just the same as",
    "start": "2321040",
    "end": "2328079"
  },
  {
    "text": "we did before now we know of course we can get a thousand or five thousand because we just did that on the",
    "start": "2328079",
    "end": "2333200"
  },
  {
    "text": "interpreter could we have ten thousand yes uh how about twenty thousand yep",
    "start": "2333200",
    "end": "2341280"
  },
  {
    "text": "forty thousand yeah uh fifty thousand uh yes",
    "start": "2341280",
    "end": "2347440"
  },
  {
    "text": "uh seventy thousand no not really it's now oh sort of still doing yeah eighty 000 i don't know",
    "start": "2347440",
    "end": "2354560"
  },
  {
    "text": "around this point we're going to run out of steam uh and you know we've seen the limits here but this is a pretty amazing",
    "start": "2354560",
    "end": "2360880"
  },
  {
    "text": "improvement it's kind of a 10x improvement over what we had on the interpreter so to",
    "start": "2360880",
    "end": "2366960"
  },
  {
    "text": "to illustrate this a little bit more precisely i want to give you some numbers now so i ran some tests earlier on i had a",
    "start": "2366960",
    "end": "2374000"
  },
  {
    "text": "higher screen resolution at the time so there were smaller numbers of satellites uh so in debug mode i was getting about",
    "start": "2374000",
    "end": "2379839"
  },
  {
    "text": "four and a half thousand satellites when i compile this with a release build which is still on the interpreter but",
    "start": "2379839",
    "end": "2386079"
  },
  {
    "text": "it's more optimized i was getting you know good improvement kind of three times faster there in release build",
    "start": "2386079",
    "end": "2391760"
  },
  {
    "text": "when i did an aot build it went up to a massive 58 000 satellites so that's kind",
    "start": "2391760",
    "end": "2398560"
  },
  {
    "text": "of a 10 times gain and you will generally see this kind of massive improvement if your code is cpu bound",
    "start": "2398560",
    "end": "2404400"
  },
  {
    "text": "but not if it's bound on something else obviously if it's bound on network speed or the rate of user input or something",
    "start": "2404400",
    "end": "2410240"
  },
  {
    "text": "obviously it's not users won't type 10 times faster because you've done iot type uh code but um it will hopefully",
    "start": "2410240",
    "end": "2417440"
  },
  {
    "text": "make your cpu bound code faster however there is a cost to doing this and i want",
    "start": "2417440",
    "end": "2423839"
  },
  {
    "text": "to make sure you understand that cost because i'm all about giving you a realistic picture and not just making",
    "start": "2423839",
    "end": "2429280"
  },
  {
    "text": "stuff artificially look better than it actually is the big cost to doing web assembly is that your application will",
    "start": "2429280",
    "end": "2434560"
  },
  {
    "text": "get bigger and therefore take longer to download and start so let's talk about application sizes on webassembly",
    "start": "2434560",
    "end": "2442960"
  },
  {
    "text": "if you've got a really small application like satellite simulator which hardly does anything it's tiny when you do a",
    "start": "2442960",
    "end": "2449680"
  },
  {
    "text": "release publish on.net 6. that's 1.1 megabytes which is a really great improvement compared with what we had",
    "start": "2449680",
    "end": "2456400"
  },
  {
    "text": "on.net 5. we've cut kind of almost 40 off that and that is just because we are",
    "start": "2456400",
    "end": "2461520"
  },
  {
    "text": "now stripping out a lot more code or we're capable of stripping out more code if you turn on the right flags but if",
    "start": "2461520",
    "end": "2468160"
  },
  {
    "text": "you publish that with aot that's going to go up to 2.8 megabytes because aot",
    "start": "2468160",
    "end": "2473280"
  },
  {
    "text": "code just has a lot more stuff in it that's all you know pre-optimized and baked into it",
    "start": "2473280",
    "end": "2478480"
  },
  {
    "text": "right if you have a more middling sized app such as the default app that comes out of the project template that by",
    "start": "2478480",
    "end": "2485200"
  },
  {
    "text": "default is a two megabyte thing when you publish it down slightly from net five but not down as much because we don't",
    "start": "2485200",
    "end": "2491040"
  },
  {
    "text": "turn on all the code stripping by default when you do an aot build that's going to double to four megabytes",
    "start": "2491040",
    "end": "2497760"
  },
  {
    "text": "okay and what about a large application because obviously people do build large applications and we need to think about",
    "start": "2497760",
    "end": "2503440"
  },
  {
    "text": "that well manufacturing hub is an example of that and you might be thinking no no it's not",
    "start": "2503440",
    "end": "2509520"
  },
  {
    "text": "a large application because that's just a demo you built it in like a week or something that is not a large app but actually it is a large app because",
    "start": "2509520",
    "end": "2516880"
  },
  {
    "text": "the size of your application is largely determined by the size of your dependencies if you've got a load of big heavy dependencies then your app is",
    "start": "2516880",
    "end": "2523599"
  },
  {
    "text": "going to be big and heavy sorry but there's no other way around it and manufacturing hub uses ef core which is",
    "start": "2523599",
    "end": "2529280"
  },
  {
    "text": "absolutely not optimized for code stripping on.net 6. now we might do some optimizations for that in dot 7 but we",
    "start": "2529280",
    "end": "2536000"
  },
  {
    "text": "haven't in dot net 6. so if you depend on that your app is at least going to be about five and a half megabytes and if",
    "start": "2536000",
    "end": "2542800"
  },
  {
    "text": "you do an aot build it's going to be a pretty scary 15 megabytes all right so what can we say about that",
    "start": "2542800",
    "end": "2549359"
  },
  {
    "text": "well i would say i would not recommend aot compiling the manufacturing hub app because what's the",
    "start": "2549359",
    "end": "2556640"
  },
  {
    "text": "point all the heavy lifting is happening inside sqlite there anyway which is already itself aot compiled the net code",
    "start": "2556640",
    "end": "2563839"
  },
  {
    "text": "doesn't really even break a sweat so what's the point making it three times bigger when you won't have any impact on",
    "start": "2563839",
    "end": "2569520"
  },
  {
    "text": "the speed whereas for the satellite simulator i absolutely would ait compile that is",
    "start": "2569520",
    "end": "2574880"
  },
  {
    "text": "critical for the the nature of the application that you want that so you need to decide for yourself in your",
    "start": "2574880",
    "end": "2580880"
  },
  {
    "text": "application is this trade-off the right one for me and sometimes it will be sometimes it won't be",
    "start": "2580880",
    "end": "2586720"
  },
  {
    "text": "okay so that is a lot of stuff about blazer and",
    "start": "2586720",
    "end": "2591839"
  },
  {
    "text": "hopefully that gives you a sense of some of the stuff that's changed in dot net six some new opportunities that are there for you",
    "start": "2591839",
    "end": "2597839"
  },
  {
    "text": "i would like to spend the remaining part of this talk uh covering something that's not actually even about blazer which like",
    "start": "2597839",
    "end": "2604319"
  },
  {
    "text": "can you imagine that something that's not even related to blazer and i want to think about a little bit",
    "start": "2604319",
    "end": "2610400"
  },
  {
    "text": "webassembly not used in a browser because so far all the time we've ever talked about running.net on webassembly",
    "start": "2610400",
    "end": "2616640"
  },
  {
    "text": "it's been about running inside browsers that's where webassembly started it's the obvious use case but there may be",
    "start": "2616640",
    "end": "2622240"
  },
  {
    "text": "cases to run it in non-browser environments as well and to understand why we need to think a",
    "start": "2622240",
    "end": "2628079"
  },
  {
    "text": "bit about what webassembly actually is well webassembly is a bytecode format",
    "start": "2628079",
    "end": "2633200"
  },
  {
    "text": "like dot net bytecode or java bytecode which is designed to run in a sandbox virtual machine",
    "start": "2633200",
    "end": "2639040"
  },
  {
    "text": "originally in the browser for for your security and what can it actually do well the",
    "start": "2639040",
    "end": "2644160"
  },
  {
    "text": "only thing it can do natively is just perform operations on its own memory so it's got a buffer of memory and it can",
    "start": "2644160",
    "end": "2650560"
  },
  {
    "text": "twiddle the bits in it that's literally all it can do by default which sounds completely pointless and it would be if",
    "start": "2650560",
    "end": "2657040"
  },
  {
    "text": "you didn't have a way of calling functions in it or having it call functions back to you and that's why the",
    "start": "2657040",
    "end": "2662640"
  },
  {
    "text": "other part of what webassembly is is the ability to import and export functions that can be called there all right so",
    "start": "2662640",
    "end": "2668720"
  },
  {
    "text": "that's what webassembly is but what are these functions that we would import and",
    "start": "2668720",
    "end": "2673920"
  },
  {
    "text": "wouldn't it be nice if there was a standard set of import functions that we could rely on being there",
    "start": "2673920",
    "end": "2680400"
  },
  {
    "text": "well that brings us to something called wazi or webassembly system interface which some of you may have heard of",
    "start": "2680400",
    "end": "2686640"
  },
  {
    "text": "hands up if you've ever heard of this yeah relatively few actually probably only five percent of people right so",
    "start": "2686640",
    "end": "2692560"
  },
  {
    "text": "that is a spec that goes back for about two years now and um it comes out of mozilla and what",
    "start": "2692560",
    "end": "2698640"
  },
  {
    "text": "this actually is is a set of standard imports for web assembly that give",
    "start": "2698640",
    "end": "2704720"
  },
  {
    "text": "access to operating system platform like features so if you wanted to do things like file system access work with",
    "start": "2704720",
    "end": "2711680"
  },
  {
    "text": "network sockets work with timers that kind of thing that's what wazi provides",
    "start": "2711680",
    "end": "2716800"
  },
  {
    "text": "now critically it's still about running in a sandbox so even though that you",
    "start": "2716800",
    "end": "2722640"
  },
  {
    "text": "might be able to access these operating system features you also might not be you as the user of wazi module can",
    "start": "2722640",
    "end": "2729200"
  },
  {
    "text": "choose to opt in or out on a per-function basis which platform features are allowed into",
    "start": "2729200",
    "end": "2735040"
  },
  {
    "text": "that sandbox and it's not about running in a browser anymore this is primarily",
    "start": "2735040",
    "end": "2740400"
  },
  {
    "text": "about server-side code okay so why on earth would you want to run your",
    "start": "2740400",
    "end": "2745520"
  },
  {
    "text": "server-side code on wazi you can already run it without washi so why do you want to make your life more difficult well",
    "start": "2745520",
    "end": "2751359"
  },
  {
    "text": "the answer is this potentially solves some interesting problems so",
    "start": "2751359",
    "end": "2757040"
  },
  {
    "text": "firstly it can solve similar kinds of problems that you can solve with containerization docker and that kind of",
    "start": "2757040",
    "end": "2762720"
  },
  {
    "text": "thing so if something crashes within your wazi environment it's not going to affect anything else on that machine",
    "start": "2762720",
    "end": "2768880"
  },
  {
    "text": "it's very much limited to to that one thing that's been affected and in terms of data leaks well",
    "start": "2768880",
    "end": "2775920"
  },
  {
    "text": "are you using any third-party modules in your code any third-party dependencies from nougat or npm the answer is",
    "start": "2775920",
    "end": "2782480"
  },
  {
    "text": "obviously yes you are how do you know if it's doing something nefarious behind your back and exfiltrating all your data over the",
    "start": "2782480",
    "end": "2789119"
  },
  {
    "text": "network to hackers well truth is you probably don't know but if it's running",
    "start": "2789119",
    "end": "2794800"
  },
  {
    "text": "inside a wazi sandbox then for that particular call you can limit it and say hey i'm making this call now but it's",
    "start": "2794800",
    "end": "2801280"
  },
  {
    "text": "not allowed to access network it's not allowed to access file system it's only allowed to use a certain amount of memory it's only got a certain amount of",
    "start": "2801280",
    "end": "2807200"
  },
  {
    "text": "cpu time and you know then that it's not doing anything weird behind your back um",
    "start": "2807200",
    "end": "2812800"
  },
  {
    "text": "you know with the network however okay at the same time it's about retaining performance webassembly has always been",
    "start": "2812800",
    "end": "2818960"
  },
  {
    "text": "about getting near native performance and we can do even better on the server than we can do in browsers because there's time to do more pre-optimization",
    "start": "2818960",
    "end": "2826640"
  },
  {
    "text": "and finally it gives you a pretty extreme portability even more than a docker container because it's",
    "start": "2826640",
    "end": "2832000"
  },
  {
    "text": "independent of your cpu architecture it's a truly portable single binary that would work on any runtime okay so who's",
    "start": "2832000",
    "end": "2839520"
  },
  {
    "text": "behind all this well mozilla created the wazi spec originally they originally created webassembly itself so makes",
    "start": "2839520",
    "end": "2845839"
  },
  {
    "text": "sense but since then it's been largely put forward and pushed forwards by the by code alliance which is a group of",
    "start": "2845839",
    "end": "2852240"
  },
  {
    "text": "companies that you've probably heard of some of them and these people are working on advancing that spec and",
    "start": "2852240",
    "end": "2858880"
  },
  {
    "text": "standardizing it even more and importantly they've been building some wazi run times uh in which you can run",
    "start": "2858880",
    "end": "2865520"
  },
  {
    "text": "your modules on a server so there's wasm time which is the high performance one and the webassembly micro runtime which",
    "start": "2865520",
    "end": "2871119"
  },
  {
    "text": "is the more portable one that come out of the bike code alliance but there's also various third parties creating",
    "start": "2871119",
    "end": "2877040"
  },
  {
    "text": "wizzy runtimes as well uh that have got different capabilities and and performance characteristics",
    "start": "2877040",
    "end": "2883280"
  },
  {
    "text": "there's quite a bit of hype around this uh as well this guy who created docker suggests",
    "start": "2883280",
    "end": "2889200"
  },
  {
    "text": "that if you had existed back at that time they wouldn't have bothered creating docker and in fact",
    "start": "2889200",
    "end": "2894800"
  },
  {
    "text": "it's a fairly mainstream view i'd say among a lot of people that wazzy could well represent the next logical step in",
    "start": "2894800",
    "end": "2902079"
  },
  {
    "text": "the evolution of containerized server-side computing because it gives you some of those benefits of the same",
    "start": "2902079",
    "end": "2907119"
  },
  {
    "text": "benefits as docker but in an even more lightweight and portable way now bad news for you though if you're a net",
    "start": "2907119",
    "end": "2914400"
  },
  {
    "text": "developer so sorry to break this awful news to you but the dot net support for webassembly does not work on wazi and to",
    "start": "2914400",
    "end": "2921839"
  },
  {
    "text": "explain why it's because when we compile the dot net runtime to webassembly we do so using this thing called m scriptin",
    "start": "2921839",
    "end": "2928720"
  },
  {
    "text": "fairly old goes back to the data back to the beginning of webassembly and that compiles the.net runtime so that when it",
    "start": "2928720",
    "end": "2935599"
  },
  {
    "text": "wants to use platform features like files and network and so on it maps that into javascript api calls which is fine",
    "start": "2935599",
    "end": "2942559"
  },
  {
    "text": "if you're in a browser but not fine if you're not in a browser because there's no javascript in general in a way",
    "start": "2942559",
    "end": "2948000"
  },
  {
    "text": "runtime you don't want that it's more lightweight than that so we need a different way of",
    "start": "2948000",
    "end": "2953200"
  },
  {
    "text": "running.net on webassembly and that brings me to a little experiment that i've been working on for the last few weeks or so",
    "start": "2953200",
    "end": "2959119"
  },
  {
    "text": "that i want to show you and this is an alternate way of compiling the dot net runtime to webassembly using the wazi",
    "start": "2959119",
    "end": "2965040"
  },
  {
    "text": "sdk instead of m scripting that's based on the llvm compiler 2 chain and what",
    "start": "2965040",
    "end": "2970079"
  },
  {
    "text": "that does is it creates a net runtime that when it tries to use platform calls it will not use javascript it will just",
    "start": "2970079",
    "end": "2976240"
  },
  {
    "text": "use the wazi system calls or other features of your jobs of your yz runtime now this is just an experiment there's",
    "start": "2976240",
    "end": "2982559"
  },
  {
    "text": "absolutely no uh specific plan or commitment to make a product out of this but i just want to give you a sense of",
    "start": "2982559",
    "end": "2988400"
  },
  {
    "text": "how this could be and what sort of thing we could do with that so let's see it shall we okay so i want to run some dot net code",
    "start": "2988400",
    "end": "2995200"
  },
  {
    "text": "on wazi and i'm not going to run any exciting code it's going to be super basic stuff",
    "start": "2995200",
    "end": "3001119"
  },
  {
    "text": "just to illustrate the point it's not about the code we're running it's about how we're running it and to really",
    "start": "3001119",
    "end": "3006800"
  },
  {
    "text": "emphasize that the first thing we're going to run is going to be pretty basic i think you can see what that's going to do okay so i want to run this in wazi",
    "start": "3006800",
    "end": "3014720"
  },
  {
    "text": "now and let's jump over to the console here which is this one",
    "start": "3014720",
    "end": "3019920"
  },
  {
    "text": "and i'm just going to run that first and that is actually running there you",
    "start": "3019920",
    "end": "3025839"
  },
  {
    "text": "can see it says hellofrom.net and that is running on the wasa micro runtime one of the runtimes created by the bytecode",
    "start": "3025839",
    "end": "3033200"
  },
  {
    "text": "alliance uh let me just prove that it really is the code that you saw in vs running so let me change it so let's say",
    "start": "3033200",
    "end": "3039200"
  },
  {
    "text": "the time is date time dot now dot too long",
    "start": "3039200",
    "end": "3044880"
  },
  {
    "text": "time string okay cool and then i'm going to recompile that and rerun that in the",
    "start": "3044880",
    "end": "3050880"
  },
  {
    "text": "wesley environment again so this time you'll see it's going to say the time is and it gives us the time if i run it",
    "start": "3050880",
    "end": "3056400"
  },
  {
    "text": "again it doesn't have to compile this time it just you know says the time the the interesting thing here is this",
    "start": "3056400",
    "end": "3062559"
  },
  {
    "text": "is just pure wazi stuff so it's going to run in any of these runtimes and to prove that let's use some other runtimes",
    "start": "3062559",
    "end": "3069680"
  },
  {
    "text": "shall we i've also got a runtime called wasma which i i pretty uh was one of my",
    "start": "3069680",
    "end": "3075119"
  },
  {
    "text": "favorite ones um and i'm going to run this thing.net.wasm this is the netruntime compiled through the wazi sdk",
    "start": "3075119",
    "end": "3082960"
  },
  {
    "text": "and that is going to find our.net dlls and execute them or at least it's going to try to but it will actually fail on",
    "start": "3082960",
    "end": "3089200"
  },
  {
    "text": "this occasion if i run it you'll see we get this error and it says failed to load this.net app dll so why is that",
    "start": "3089200",
    "end": "3096160"
  },
  {
    "text": "well this illustrates an important aspect of wazi by default everything is locked down you can't even touch the",
    "start": "3096160",
    "end": "3102319"
  },
  {
    "text": "file system by default and i didn't opt into giving this file system access so it can't load and run my code",
    "start": "3102319",
    "end": "3108559"
  },
  {
    "text": "but what i can do is i can say uh let's give it access to the current working directory and when it runs this time it",
    "start": "3108559",
    "end": "3115200"
  },
  {
    "text": "will find the dll and it will execute it and it's nice and fast okay that's good what about another third-party wazey",
    "start": "3115200",
    "end": "3121920"
  },
  {
    "text": "runtime let's try wasm time that's a different bytecode alliance one uses the same command line arguments and when i",
    "start": "3121920",
    "end": "3128000"
  },
  {
    "text": "run that same thing it's going to work great okay so we can run stuff that",
    "start": "3128000",
    "end": "3133200"
  },
  {
    "text": "prints to console awesome that's great probably going to make billions out of that good",
    "start": "3133200",
    "end": "3138400"
  },
  {
    "text": "um but could we do something more interesting than that could we make a web server because the most common uh",
    "start": "3138400",
    "end": "3144800"
  },
  {
    "text": "use case that people cite for wazi is networked services so i've made this little web server this is not using",
    "start": "3144800",
    "end": "3151200"
  },
  {
    "text": "asp.net core i probably could make asp.net call work like this but i haven't tried yet so this is just a",
    "start": "3151200",
    "end": "3156559"
  },
  {
    "text": "simple little thing that's going to listen for different http requests and give different output and let me just",
    "start": "3156559",
    "end": "3162400"
  },
  {
    "text": "run it first and then you can see it so let's go web server here we go",
    "start": "3162400",
    "end": "3168480"
  },
  {
    "text": "and this is going to run on wasm time now sorry wasma again and that's listening now",
    "start": "3168480",
    "end": "3174160"
  },
  {
    "text": "so i'll start this up in my browser and you can see it's displaying the current time there if i refresh it updates um is",
    "start": "3174160",
    "end": "3179920"
  },
  {
    "text": "it fast well i don't know let's have a look at the network trays shall we uh if i reload this a few times then you'll",
    "start": "3179920",
    "end": "3186160"
  },
  {
    "text": "see it's generally always gonna take about three two three four milliseconds which is exactly the same amount of time",
    "start": "3186160",
    "end": "3191680"
  },
  {
    "text": "that it would take to run something on kestrel or nginx or something so there's no particular overhead in doing this",
    "start": "3191680",
    "end": "3200319"
  },
  {
    "text": "okay right so we've got some basic.net code running on wazzy and that's nice um",
    "start": "3200319",
    "end": "3207280"
  },
  {
    "text": "but the point of this is not just to run the same kinds of code that we would",
    "start": "3207280",
    "end": "3212480"
  },
  {
    "text": "have run before if that's all you want to do then just keep doing it in the same way the point of wazi is to maybe",
    "start": "3212480",
    "end": "3218800"
  },
  {
    "text": "write applications in slightly different ways and take advantage of it to do different kinds of things and so to give",
    "start": "3218800",
    "end": "3224640"
  },
  {
    "text": "you an example just to you know give you a sense of how things could be different i want to take a quick look across the",
    "start": "3224640",
    "end": "3230640"
  },
  {
    "text": "wazi ecosystem imagine that you look around a little bit and you stumble across a few projects because there's loads of",
    "start": "3230640",
    "end": "3236160"
  },
  {
    "text": "projects on wazi that are doing interesting stuff and so as an example of that there's this thing called",
    "start": "3236160",
    "end": "3241520"
  },
  {
    "text": "lunatic which is a slightly dubious name for their project but what they're trying to do there is create an erlang",
    "start": "3241520",
    "end": "3248319"
  },
  {
    "text": "level reliability for server-side web applications using webassembly so what",
    "start": "3248319",
    "end": "3253520"
  },
  {
    "text": "they're doing is within your application instead of just running it as a single process like you",
    "start": "3253520",
    "end": "3258880"
  },
  {
    "text": "normally do it runs as tens hundreds or hundreds of thousands of microprocessors",
    "start": "3258880",
    "end": "3264559"
  },
  {
    "text": "each one responsible for a separate bit of the system and each one is separately sandboxed it's got its own memory space",
    "start": "3264559",
    "end": "3271200"
  },
  {
    "text": "and its own set of permissions uh and you know its own ability to restart things if they break down",
    "start": "3271200",
    "end": "3277119"
  },
  {
    "text": "so if you were building a web service for example then maybe maybe every http request would run as an independent",
    "start": "3277119",
    "end": "3283760"
  },
  {
    "text": "microprocess and then you could guarantee that you would never accidentally leak state out of one",
    "start": "3283760",
    "end": "3289200"
  },
  {
    "text": "request into another and errors or you know resource issues in one request",
    "start": "3289200",
    "end": "3294480"
  },
  {
    "text": "would never affect another one so let's see if we can write a little bit of.net code and have it run inside lunatic and",
    "start": "3294480",
    "end": "3301680"
  },
  {
    "text": "see if that actually works so i've got yet another project down here which",
    "start": "3301680",
    "end": "3307520"
  },
  {
    "text": "is i've wrapped the lunatic apis in some net code here so you can see i've got this request",
    "start": "3307520",
    "end": "3314000"
  },
  {
    "text": "started event and i'm just going to print out some html to the response we'll look at that more in a moment but",
    "start": "3314000",
    "end": "3319839"
  },
  {
    "text": "let's just start running so we'll go to here and we'll do make run again",
    "start": "3319839",
    "end": "3325680"
  },
  {
    "text": "all right so that's going to start things up there and i'm going to go to that in my web browser so that's around",
    "start": "3325680",
    "end": "3333119"
  },
  {
    "text": "here right and you can see it says hellofrom.net after one request and it",
    "start": "3333119",
    "end": "3338799"
  },
  {
    "text": "displays the current time well let's have a look at the code for that so you see it's saying hello after count",
    "start": "3338799",
    "end": "3345359"
  },
  {
    "text": "requests and count is actually a static and it's going to increment on every",
    "start": "3345359",
    "end": "3350480"
  },
  {
    "text": "request so if this was a normal net application on asp.net core or something then you would",
    "start": "3350480",
    "end": "3356640"
  },
  {
    "text": "expect that that count would go up by one on every request and if i reload in the browser it'll say two requests three",
    "start": "3356640",
    "end": "3362240"
  },
  {
    "text": "requests and so on well let's see i'm going to reload and you'll see that the time changes but it still says one",
    "start": "3362240",
    "end": "3368720"
  },
  {
    "text": "request why is that why didn't update this this value the answer is",
    "start": "3368720",
    "end": "3373920"
  },
  {
    "text": "it did update it but every single request is running as its own independent microprocessor which doesn't",
    "start": "3373920",
    "end": "3379280"
  },
  {
    "text": "share any memory space with the other requests which means that things like statics cannot leak out from one request",
    "start": "3379280",
    "end": "3387280"
  },
  {
    "text": "into another now this is not really about being able to use statics that's kind of a silly example the more important thing is that",
    "start": "3387280",
    "end": "3394079"
  },
  {
    "text": "you can't leak any state and in fact you can't leak any memory at all even if you're trying to",
    "start": "3394079",
    "end": "3399680"
  },
  {
    "text": "whatever memory state is used within a request can just be instantly discarded at the end of that request and that",
    "start": "3399680",
    "end": "3406480"
  },
  {
    "text": "starts to change the rules of the game in some interesting kind of ways so as dot net developers we've believed for a",
    "start": "3406480",
    "end": "3413359"
  },
  {
    "text": "long time that you know you have to minimize allocations because you don't want to trigger too much garbage collection and",
    "start": "3413359",
    "end": "3419040"
  },
  {
    "text": "you you have to minimize thread blocking because that's expensive but in this kind of environment actually you can",
    "start": "3419040",
    "end": "3424559"
  },
  {
    "text": "allocate all you like it literally makes no difference because we're just going to atomically discard it all at the end",
    "start": "3424559",
    "end": "3429680"
  },
  {
    "text": "of the request i've actually turned garbage collection off for these requests because it literally would not do anything anyway and in terms of",
    "start": "3429680",
    "end": "3436799"
  },
  {
    "text": "thread blocking well you can block all you like because these aren't operating system threads these are just lightweight webassembly microprocessors",
    "start": "3436799",
    "end": "3443920"
  },
  {
    "text": "you can block them it's completely free like literally doesn't make a difference so just block if you want to it's fine",
    "start": "3443920",
    "end": "3449599"
  },
  {
    "text": "and then as another illustration of that let's think about memory allocation",
    "start": "3449599",
    "end": "3454720"
  },
  {
    "text": "now i've set up a policy within the system that each request is only allowed to use a few megabytes of memory in",
    "start": "3454720",
    "end": "3460799"
  },
  {
    "text": "total and if i go to this url here it's going to try and allocate 10 megabytes which will exceed that memory budget so",
    "start": "3460799",
    "end": "3467280"
  },
  {
    "text": "what will happen let's find out i'll go to allocate and you'll see it says out of memory well my laptop is not out of",
    "start": "3467280",
    "end": "3474319"
  },
  {
    "text": "memory and the web server is not out of memory the thing that's out of memory is this individual request that's not",
    "start": "3474319",
    "end": "3480319"
  },
  {
    "text": "something you would normally be able to do because normally you can't say which memory belongs to which request but when",
    "start": "3480319",
    "end": "3486319"
  },
  {
    "text": "they're in separate microprocessors you can and so we can impose budgets on things like memory and cpu time we could",
    "start": "3486319",
    "end": "3492880"
  },
  {
    "text": "have diagnostics that say hey this request uses more memory than this other request and that kind of thing and this",
    "start": "3492880",
    "end": "3498319"
  },
  {
    "text": "really creates a new interesting set of possibilities for how you could write web applications that are potentially",
    "start": "3498319",
    "end": "3505040"
  },
  {
    "text": "simpler whilst also being safer and equally performant as before",
    "start": "3505040",
    "end": "3510640"
  },
  {
    "text": "okay so just to emphasize i'm not in any way suggesting that we're literally going to",
    "start": "3510640",
    "end": "3515760"
  },
  {
    "text": "like ship something with lunatic i don't even know who creates this thing i'm not endorsing it in the slides i'm just giving it as an example of the fact we",
    "start": "3515760",
    "end": "3523040"
  },
  {
    "text": "can we can take stuff out of the wazi ecosystem or you can and build something interesting with that",
    "start": "3523040",
    "end": "3528640"
  },
  {
    "text": "if we can run in this kind of way so that is all we're going to have time for in this talk uh to recap we looked at",
    "start": "3528640",
    "end": "3536000"
  },
  {
    "text": "some of the new features on blazer on net six uh we hopefully gave you a sense",
    "start": "3536000",
    "end": "3541040"
  },
  {
    "text": "that you could do some new kinds of app features with that we looked at the performance changes where they're aot",
    "start": "3541040",
    "end": "3546559"
  },
  {
    "text": "compilation and we looked at this slightly uh wild world of wazi and how you could do something cool with that",
    "start": "3546559",
    "end": "3553520"
  },
  {
    "text": "maybe in the future so if you want some of the code from this talk you can go to this github repo there that i've set up",
    "start": "3553520",
    "end": "3560079"
  },
  {
    "text": "and you can get the blaze orbital application and all the related parts the wazi stuff is not uh publicly",
    "start": "3560079",
    "end": "3565599"
  },
  {
    "text": "available just yet but i'll you know we'll see about getting permission to publish that but for now you can get",
    "start": "3565599",
    "end": "3571200"
  },
  {
    "text": "blaze orbital and play with that and that's all we have time for so i hope that's been fun and useful for you and i",
    "start": "3571200",
    "end": "3577200"
  },
  {
    "text": "hope that you have a really good rest of conference uh remember to evaluate as you go out and uh have a super day thank",
    "start": "3577200",
    "end": "3584079"
  },
  {
    "text": "you",
    "start": "3584079",
    "end": "3587079"
  }
]