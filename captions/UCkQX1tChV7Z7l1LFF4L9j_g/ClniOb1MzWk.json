[
  {
    "start": "0",
    "end": "50000"
  },
  {
    "text": "good morning everybody oh come on it's not good",
    "start": "2159",
    "end": "8120"
  },
  {
    "text": "morning everybody good morning morning oh so much better thank you everyone for",
    "start": "8120",
    "end": "13920"
  },
  {
    "text": "coming and uh spending your morning here with me uh my name is Dave Smith I am the Android lead at New Circle training",
    "start": "13920",
    "end": "20760"
  },
  {
    "text": "and I am here today to talk to you about building and distributing SDK add-ons Google's way of Distributing your",
    "start": "20760",
    "end": "27720"
  },
  {
    "text": "Android code to Developers uh again I mentioned my name is Dave Smith I am Devon wired on pretty much all of the",
    "start": "27720",
    "end": "34840"
  },
  {
    "text": "social things if you want to follow me or connect with me after the fact uh the only exception to that is Google+",
    "start": "34840",
    "end": "41960"
  },
  {
    "text": "because I decided to get clever and tried to use my real name so if you want to follow me on Google+ I am at Dave",
    "start": "41960",
    "end": "47480"
  },
  {
    "text": "Smith Dev instead okay question for everyone in the audience how many of you sitting out",
    "start": "47480",
    "end": "54640"
  },
  {
    "start": "50000",
    "end": "306000"
  },
  {
    "text": "there either have worked or are currently working on building an android-based device or customizing",
    "start": "54640",
    "end": "61000"
  },
  {
    "text": "Android for a device okay good that's what I would expect now of those how many of you have",
    "start": "61000",
    "end": "68280"
  },
  {
    "text": "built cool new features into that device that you would like third-party app developers to be able to",
    "start": "68280",
    "end": "74960"
  },
  {
    "text": "access okay good I was hoping to see most of the same hands that's good so",
    "start": "74960",
    "end": "80320"
  },
  {
    "text": "what we're going to talk about today is we're going to discuss what are some",
    "start": "80320",
    "end": "86000"
  },
  {
    "text": "what are some potential solutions to that problem you know how do we distrib rute our code to developers",
    "start": "86000",
    "end": "91880"
  },
  {
    "text": "so all of us here or most of us are likely Engineers we've probably worked on a Android project and we've spent",
    "start": "91880",
    "end": "99799"
  },
  {
    "text": "painstaking amounts of hours putting awesome new hardware features or extending the Android platform to add",
    "start": "99799",
    "end": "105439"
  },
  {
    "text": "all maybe some new sensors maybe you put 15 cameras on your device you know who knows what the exact uh piece might be",
    "start": "105439",
    "end": "112040"
  },
  {
    "text": "but then one day your boss comes to you and he says how can we basically take",
    "start": "112040",
    "end": "118320"
  },
  {
    "text": "all this stuff that you just put into this device and how can we integrate it so that other developers can take advantage of it you know we'd like to",
    "start": "118320",
    "end": "124759"
  },
  {
    "text": "get this out into the ecosystem so that's really the question that we'd like to solve uh here today now there's",
    "start": "124759",
    "end": "131280"
  },
  {
    "text": "a couple ways that we could do that um you know there's you know basically what we've decided is well if we're going to",
    "start": "131280",
    "end": "137560"
  },
  {
    "text": "distribute this functionality to developers we need some kind of SDK uh but we could do that in a number",
    "start": "137560",
    "end": "143800"
  },
  {
    "text": "of ways right you know an SDK a good SDK is more than just the library code you",
    "start": "143800",
    "end": "149360"
  },
  {
    "text": "know we could start by building all the code that we need into a library package that up as a jar file or whatever we",
    "start": "149360",
    "end": "155599"
  },
  {
    "text": "need and the simplest case is we just throw it up on our website let developers download it give them some",
    "start": "155599",
    "end": "161760"
  },
  {
    "text": "information on how they would integrate it into their project and they could move on and move forward from",
    "start": "161760",
    "end": "167120"
  },
  {
    "text": "there uh but there are some other problems that we really need to solve associated with an SDK such as how do we",
    "start": "167120",
    "end": "174959"
  },
  {
    "text": "distribute it well how do we version it what if we want to ship a new version to our develop Vel opers and we want to let",
    "start": "174959",
    "end": "181040"
  },
  {
    "text": "them know that that has happened uh do we want to be able to document it probably I'm sure we've all worked on",
    "start": "181040",
    "end": "186720"
  },
  {
    "text": "projects Android included that is not very well documented uh and so we want to be able to provide as much",
    "start": "186720",
    "end": "191959"
  },
  {
    "text": "documentation as we can to the other developers uh and potential validation you know how can they test the code that",
    "start": "191959",
    "end": "198640"
  },
  {
    "text": "we're giving them to make sure that it works uh as they're moving through this and very quickly the basic idea of just",
    "start": "198640",
    "end": "204959"
  },
  {
    "text": "throwing a jar file up on a website starts to fall apart right it gives them the Code but it doesn't really give us",
    "start": "204959",
    "end": "211040"
  },
  {
    "text": "any other functionality around that to be able to better fit that need okay um",
    "start": "211040",
    "end": "217599"
  },
  {
    "text": "you know but there are other options you know uh with the recent Advent of Gradle as as the common build system for",
    "start": "217599",
    "end": "224200"
  },
  {
    "text": "Android applications uh developers are becoming more Savvy to Common dependency management functionality like Maven and",
    "start": "224200",
    "end": "231360"
  },
  {
    "text": "Ivy um and so dependency management might be a good system for this we could",
    "start": "231360",
    "end": "236680"
  },
  {
    "text": "bundle up our library code with its documentation into say a maven artifact and we could",
    "start": "236680",
    "end": "242920"
  },
  {
    "text": "host that up on Maven Central uh and we could then take that information and",
    "start": "242920",
    "end": "248280"
  },
  {
    "text": "tell the other developers simply what is the artifact ad that they need to use and this presents some new functionality",
    "start": "248280",
    "end": "254560"
  },
  {
    "text": "to us now we can uh deploy it to a central server so if we want to deploy an update we just push the update back",
    "start": "254560",
    "end": "261160"
  },
  {
    "text": "to the same server uh artifact IDs are inherently versioned so if we want to",
    "start": "261160",
    "end": "266479"
  },
  {
    "text": "tell developers that a new version has existed uh then they can simply modify their artifact to update to the new",
    "start": "266479",
    "end": "271919"
  },
  {
    "text": "version it will download into the system uh so a lot of these problems are taken care of when we start using dependency",
    "start": "271919",
    "end": "278080"
  },
  {
    "text": "management but one big piece from a custom Android device uh standpoint is",
    "start": "278080",
    "end": "283919"
  },
  {
    "text": "still missing and that's the validation piece you know without us giving them",
    "start": "283919",
    "end": "289280"
  },
  {
    "text": "some kind of physical piece of Hardware that is you know is our custom device Target whether that's the device itself",
    "start": "289280",
    "end": "295520"
  },
  {
    "text": "or some sort of an evaluation board that's based off the same platform How do they run the code test it and make",
    "start": "295520",
    "end": "301560"
  },
  {
    "text": "sure that it actually works to some degree of accuracy anyway Okay Google's",
    "start": "301560",
    "end": "307199"
  },
  {
    "start": "306000",
    "end": "663000"
  },
  {
    "text": "solution to this problem is the SDK add-on okay so this is a uh it's an SDK",
    "start": "307199",
    "end": "312639"
  },
  {
    "text": "component that has been around in the Android build system uh you know for as long as Android has been part of AOSP",
    "start": "312639",
    "end": "319240"
  },
  {
    "text": "Google uses this internally for their Google apis targets so anyone in here",
    "start": "319240",
    "end": "324440"
  },
  {
    "text": "who's done application development has worked with the SDK manager and you've seen the not just the Android platform",
    "start": "324440",
    "end": "330720"
  },
  {
    "text": "targets but the Android with Google apis targets those targets are built as SDK",
    "start": "330720",
    "end": "336319"
  },
  {
    "text": "add-ons so they use this same functionality internally and we're going to show you today how you can use it",
    "start": "336319",
    "end": "342120"
  },
  {
    "text": "inside of your own uh device builds as well so this uh an SDK add-on basically",
    "start": "342120",
    "end": "348680"
  },
  {
    "text": "starts as two primary components now it used to be one but in lollipop they've split this out into two uh there is what",
    "start": "348680",
    "end": "356240"
  },
  {
    "text": "I'll be calling the library package uh and that is the these are basically just zip files um this is a zipped up",
    "start": "356240",
    "end": "362600"
  },
  {
    "text": "contents of the actual Library code that you need to distribute to a developer as",
    "start": "362600",
    "end": "367960"
  },
  {
    "text": "well as the documentation associated with that we'll talk about how that gets built uh and then just some metadata",
    "start": "367960",
    "end": "373720"
  },
  {
    "text": "associated with what's in that package okay so this is all built as what we would call the library this is what a",
    "start": "373720",
    "end": "378800"
  },
  {
    "text": "developer would need to Target to link against in their applications so that their code compiles with your new",
    "start": "378800",
    "end": "385520"
  },
  {
    "text": "functionality the secondary package which again used to be bundled in with the first but now they've split them out",
    "start": "385520",
    "end": "391919"
  },
  {
    "text": "uh is a system image and this is where it really starts to shine Beyond any of the other traditional methods when we're",
    "start": "391919",
    "end": "398000"
  },
  {
    "text": "talking about a custom Android device this SDK Target lives right alongside",
    "start": "398000",
    "end": "403280"
  },
  {
    "text": "the existing device Target that you have and it allows you from the same Android build system to generate a the library",
    "start": "403280",
    "end": "410960"
  },
  {
    "text": "package and B A package with a working system image that they can take and",
    "start": "410960",
    "end": "416479"
  },
  {
    "text": "developers can download and spin up an emulator instance that runs with your custom system image so this is a full",
    "start": "416479",
    "end": "423800"
  },
  {
    "text": "package it has the system data partitions the ram dis you know all the pieces a custom kernel image if you need",
    "start": "423800",
    "end": "429280"
  },
  {
    "text": "it uh all the pieces that you need to integrate this together and hand it off to a developer so that not only can they",
    "start": "429280",
    "end": "435800"
  },
  {
    "text": "use your code but they can spin up an Android virtual device that's running your custom system image to actually be",
    "start": "435800",
    "end": "441720"
  },
  {
    "text": "able to test their code okay that's a very unique component of this whole system so we've got the validation piece",
    "start": "441720",
    "end": "448560"
  },
  {
    "text": "in there that we discussed earlier now in addition to this the Android SDK",
    "start": "448560",
    "end": "453639"
  },
  {
    "text": "tools provide a specification for something called an SDK repository um",
    "start": "453639",
    "end": "458759"
  },
  {
    "text": "and the repository really ends up just being a specialized XML definition that allows you as the distributor or the",
    "start": "458759",
    "end": "465840"
  },
  {
    "text": "Builder of this SDK to throw up somewhere on the public web the archives that are generated and this additional",
    "start": "465840",
    "end": "472479"
  },
  {
    "text": "XML and provide developers nothing more than a URL what we're calling an update",
    "start": "472479",
    "end": "478440"
  },
  {
    "text": "site that they can add to their existing SDK tools to pull down your code",
    "start": "478440",
    "end": "483919"
  },
  {
    "text": "directly into their environment okay we'll talk more about how these are built and some of the features",
    "start": "483919",
    "end": "489639"
  },
  {
    "text": "associated with them in just a little bit the SDK repositories have additional",
    "start": "489639",
    "end": "494759"
  },
  {
    "text": "features they're going to be very helpful for us from a distribution perspective one the URLs that we can give the uh the developers but also the",
    "start": "494759",
    "end": "503000"
  },
  {
    "text": "ability to version our sdks add licenses to our sdks that the developers have to",
    "start": "503000",
    "end": "508599"
  },
  {
    "text": "agree to before can download it um and we can also we'll see here in a little bit that we can split out portions of",
    "start": "508599",
    "end": "515159"
  },
  {
    "text": "the SDK by platform so if we have separate archives we need to provide to Developers for Mac windows and Linux say",
    "start": "515159",
    "end": "522279"
  },
  {
    "text": "we can generate those archives compact them together in one repository and the SDK tools will do the job of installing",
    "start": "522279",
    "end": "529680"
  },
  {
    "text": "the appropriate one on the appropriate platform when the developers go to the site okay so this as an entire package really",
    "start": "529680",
    "end": "538079"
  },
  {
    "text": "provides all the things we need to solve those four problems that we just discussed done who's buying",
    "start": "538079",
    "end": "545360"
  },
  {
    "text": "beer all right if it were really that simple I would just walk off the stage now but let's talk a little bit more",
    "start": "545360",
    "end": "551200"
  },
  {
    "text": "about how we need to go through this process um what are the things that you",
    "start": "551200",
    "end": "556600"
  },
  {
    "text": "as uh system image developers need to make sure you're doing in your system image builds and then the additional",
    "start": "556600",
    "end": "563560"
  },
  {
    "text": "pieces you may need to add to take your system image code and pop out this SDK",
    "start": "563560",
    "end": "568600"
  },
  {
    "text": "add-on okay okay now the first piece is you got to make sure you have the right code um you know most of you have",
    "start": "568600",
    "end": "575200"
  },
  {
    "text": "probably seen this type of code before this is a snippet from a repo manifest um if you've ever looked through the",
    "start": "575200",
    "end": "580399"
  },
  {
    "text": "repo manifest though you may have may not have noticed that each project in there has a series of groups associated",
    "start": "580399",
    "end": "585760"
  },
  {
    "text": "with it and if you do just a generic repo init repo sync you don't get all of",
    "start": "585760",
    "end": "591000"
  },
  {
    "text": "them there is a series of groups called not default that is on predominantly the",
    "start": "591000",
    "end": "596480"
  },
  {
    "text": "tools packages but just with repo andent repo sync those do not come down to your machine because in most cases they're",
    "start": "596480",
    "end": "603600"
  },
  {
    "text": "not necessary the basic repo sync gives you everything you need to build a system image but nothing else if you",
    "start": "603600",
    "end": "610640"
  },
  {
    "text": "want to build a component like an SDK add-on you need all of the additional tools packages that are associated with",
    "start": "610640",
    "end": "617000"
  },
  {
    "text": "building the SDK and those again are marked in this case with this not default group now the way there's a",
    "start": "617000",
    "end": "623560"
  },
  {
    "text": "couple ways we could pull that down the simplest is when you're running repo AIT you just want to throw that Dash G flag",
    "start": "623560",
    "end": "630279"
  },
  {
    "text": "on the end that defines which additional groups or which specific groups you",
    "start": "630279",
    "end": "635320"
  },
  {
    "text": "should pull down as part of the next sync in this case-g all tells us that we",
    "start": "635320",
    "end": "641079"
  },
  {
    "text": "get everything um you could also do a-g tools if you only one of the tools",
    "start": "641079",
    "end": "646120"
  },
  {
    "text": "packages but generally we're talking about building the system image and the SDK as part of the same system so we're",
    "start": "646120",
    "end": "652240"
  },
  {
    "text": "just going to grab everything okay so repo in it with the - Gall and then a repo sync will give you all the packages",
    "start": "652240",
    "end": "658800"
  },
  {
    "text": "you need to be able to do the additional steps",
    "start": "658800",
    "end": "664480"
  },
  {
    "start": "663000",
    "end": "1052000"
  },
  {
    "text": "question yeah basically everything yeah so the",
    "start": "664480",
    "end": "671079"
  },
  {
    "text": "question was are there packages in the Manifest required for SDK generation that are that are set as not default",
    "start": "671079",
    "end": "677000"
  },
  {
    "text": "basically everything under the tools subdirectory so the there are there's",
    "start": "677000",
    "end": "682440"
  },
  {
    "text": "sections under Tools that are specific to generating the IDE plugins um as well as just building the core SDK",
    "start": "682440",
    "end": "689920"
  },
  {
    "text": "and the basically anything that's under Tools slash in that project list um is",
    "start": "689920",
    "end": "694959"
  },
  {
    "text": "required to do a make SDK which is effectively what we need to do a little bit later on good question",
    "start": "694959",
    "end": "702000"
  },
  {
    "text": "okay so from a system image perspective what do you have to change on your device assuming you're not already doing",
    "start": "702000",
    "end": "708760"
  },
  {
    "text": "this to sort of facilitate this process um SDK add-ons run along with a a",
    "start": "708760",
    "end": "715720"
  },
  {
    "text": "functionality inside of Android that is their shared Library support um um Android supports shared libraries in a",
    "start": "715720",
    "end": "721320"
  },
  {
    "text": "very narrow specific way uh which is they allow system image developers to expose Java libraries inside of their",
    "start": "721320",
    "end": "729000"
  },
  {
    "text": "system partition to application developers the advantage of this is you can develop the code that you need to",
    "start": "729000",
    "end": "736160"
  },
  {
    "text": "share with developers into a expose or an extracted Java library and rather",
    "start": "736160",
    "end": "741720"
  },
  {
    "text": "than Distributing the code to each of them you can simply put it on the system",
    "start": "741720",
    "end": "746959"
  },
  {
    "text": "image as a shared library and then the uh developers can reference that Library",
    "start": "746959",
    "end": "752880"
  },
  {
    "text": "by name so that when they're running their code on your device it can be properly added to their class path so",
    "start": "752880",
    "end": "758800"
  },
  {
    "text": "this allows us to distribute the library with the device or the functionality of that library and allows the developers",
    "start": "758800",
    "end": "765240"
  },
  {
    "text": "to link to it without having to copy jar files or other things into their own package into their own project so you",
    "start": "765240",
    "end": "770920"
  },
  {
    "text": "don't end up with multiple copies of the same thing strewn across the device okay they're all referencing the same",
    "start": "770920",
    "end": "776399"
  },
  {
    "text": "instance that's on your system image so what we need to do effectively is we need to build that Library code into a",
    "start": "776399",
    "end": "783440"
  },
  {
    "text": "shared Library if it's not already by wrapping that up into a individual",
    "start": "783440",
    "end": "788560"
  },
  {
    "text": "module inside of our system image build so there's basically three targets that we're going to look at that will do this",
    "start": "788560",
    "end": "795480"
  },
  {
    "text": "um the first piece that's necessary to make this work uh is this shared Library definition file that I have listed at",
    "start": "795480",
    "end": "802360"
  },
  {
    "text": "the bottom of the slides there it's a very simple file there are several of these On Any Given Android device in the",
    "start": "802360",
    "end": "808680"
  },
  {
    "text": "system metsy permissions directory uh this is where all the shared libraries as well as all additional optional",
    "start": "808680",
    "end": "814880"
  },
  {
    "text": "Hardware features are declared on any Android device so you'll see files in here for devices that support NFC or",
    "start": "814880",
    "end": "821399"
  },
  {
    "text": "certain types of Wi-Fi there will be a file in here for each one of those features a shared library is considered",
    "start": "821399",
    "end": "827560"
  },
  {
    "text": "one of those features so this is just a simple XML file that uh Maps two things together it Maps a library's name to the",
    "start": "827560",
    "end": "835160"
  },
  {
    "text": "actual file that has the the library code inside of it that Library code is typically found in system framework um",
    "start": "835160",
    "end": "842160"
  },
  {
    "text": "although if you're massaging the build system a little bit more you could pretty much put it anywhere on the system partition as long as this file",
    "start": "842160",
    "end": "848839"
  },
  {
    "text": "maps to where that location is okay so this XML file is a piece of boilerplate",
    "start": "848839",
    "end": "854160"
  },
  {
    "text": "that you just have to create it would go in your device directory somewhere so that it can be copied into the final",
    "start": "854160",
    "end": "859720"
  },
  {
    "text": "system image okay this file exposes that library to other applications oh I",
    "start": "859720",
    "end": "866560"
  },
  {
    "text": "jumped past that using the uses Library Declaration on the client side so this",
    "start": "866560",
    "end": "872079"
  },
  {
    "text": "is something this is some syntax that application developers are familiar with they've done this before especially if",
    "start": "872079",
    "end": "877839"
  },
  {
    "text": "they were working with some of the previous Google apis there is an attribute that a client application",
    "start": "877839",
    "end": "883639"
  },
  {
    "text": "developer would use called Us's library that goes in their application manifest and that definition would declare that",
    "start": "883639",
    "end": "890839"
  },
  {
    "text": "Library used by name and would tell the install process that when this application is run it needs to link in",
    "start": "890839",
    "end": "898079"
  },
  {
    "text": "with the shared Library on the device it also has some additional features that if that Library doesn't exist that",
    "start": "898079",
    "end": "904199"
  },
  {
    "text": "application cannot be installed on that device and some of the more common distribution mechanisms like Google Play",
    "start": "904199",
    "end": "910120"
  },
  {
    "text": "will enforce that they will determine whether or not an app can even be shown to the user in the app store by whether",
    "start": "910120",
    "end": "916279"
  },
  {
    "text": "or not it has the shared Library declarations that that particular device uh is look application is looking for in",
    "start": "916279",
    "end": "922120"
  },
  {
    "text": "that device okay and that definition comes from that XML",
    "start": "922120",
    "end": "927319"
  },
  {
    "text": "file now in addition to that you have to actually build your code into a shared Library so if your if the code that is",
    "start": "927319",
    "end": "935240"
  },
  {
    "text": "associated with the functionality you want to expose is already somehow baked into say one of your core apps maybe you",
    "start": "935240",
    "end": "942000"
  },
  {
    "text": "added a custom system service and all the functionality to work with that service is inside that application the",
    "start": "942000",
    "end": "947639"
  },
  {
    "text": "best way to do this is to break out the code specifically for working with that feature into a Java Library so you're",
    "start": "947639",
    "end": "955680"
  },
  {
    "text": "going to take that code Define it as a module in your build system so it's going to have its own Android MK and",
    "start": "955680",
    "end": "960959"
  },
  {
    "text": "it's going to have that familiar syntax that you can see up there that we want to Define this as a Java library then",
    "start": "960959",
    "end": "967199"
  },
  {
    "text": "your system Services application can still use the code internally by declaring that it uses this local shared",
    "start": "967199",
    "end": "973199"
  },
  {
    "text": "library in the build system so you can do that all internally and still get your code to work but by exposing this",
    "start": "973199",
    "end": "979079"
  },
  {
    "text": "code as a shared Library module it makes it easier for the build system to excise that for your SDK add-on later okay so",
    "start": "979079",
    "end": "986880"
  },
  {
    "text": "that top section there in the in the build build file is essentially what points to that section and again the",
    "start": "986880",
    "end": "992759"
  },
  {
    "text": "syntax should be fairly familiar the only thing you may not have seen before is the build macro which is build Java",
    "start": "992759",
    "end": "997880"
  },
  {
    "text": "library that effectively just takes that code and instead of turning it into say an APK or something like that it's going",
    "start": "997880",
    "end": "1004600"
  },
  {
    "text": "to turn it into a jar file and by default it will drop it in system framework on the system image okay then",
    "start": "1004600",
    "end": "1012720"
  },
  {
    "text": "in addition we have to add in a rule that takes that XML file that I just described and copies in okay so that",
    "start": "1012720",
    "end": "1020319"
  },
  {
    "text": "second half of the make file there is it uses a build pre-built macro which if you've never seen it before is basically",
    "start": "1020319",
    "end": "1026240"
  },
  {
    "text": "just a glorified file copy um that will take that XML file from your device",
    "start": "1026240",
    "end": "1031959"
  },
  {
    "text": "directory or whatever your host sources are and drop it into the appropriate location on the system image which in",
    "start": "1031959",
    "end": "1037880"
  },
  {
    "text": "this case is system Etsy permissions okay so those two pieces are sort of the",
    "start": "1037880",
    "end": "1043160"
  },
  {
    "text": "core bare minimum of what you would want to do to modify your system image that you have existing to make this code",
    "start": "1043160",
    "end": "1049840"
  },
  {
    "text": "accessible to the SDK system okay now being good SDK developers we probably",
    "start": "1049840",
    "end": "1057000"
  },
  {
    "start": "1052000",
    "end": "1313000"
  },
  {
    "text": "would want to document our code because we like it when other people document their code um so there is a build macro",
    "start": "1057000",
    "end": "1063799"
  },
  {
    "text": "inside of the Android build system called build Droid doc this is essentially just a scripted wrapper around a Java doc parser so if you're",
    "start": "1063799",
    "end": "1070840"
  },
  {
    "text": "familiar with Java do comments it is the same idea there where uh if you as you're building your Java code inside of",
    "start": "1070840",
    "end": "1077440"
  },
  {
    "text": "your library if you comment that or decorate your classes and methods with Java do style comments the Droid doc",
    "start": "1077440",
    "end": "1084720"
  },
  {
    "text": "macro will go through and scrape that code and generate the HTML files necessary to essentially be the same",
    "start": "1084720",
    "end": "1091960"
  },
  {
    "text": "thing you would get spit out from a Java doc so Droid Doc is really nothing special other than it's a way to hook",
    "start": "1091960",
    "end": "1097880"
  },
  {
    "text": "Java do comment parsing into the Android build system okay so again another make",
    "start": "1097880",
    "end": "1103120"
  },
  {
    "text": "file snippet for that module which has the build Droid doc at the end uh most of these attributes again should either",
    "start": "1103120",
    "end": "1109400"
  },
  {
    "text": "be familiar or easy enough to figure out the only one that I think is a little awkward is the Droid doc options",
    "start": "1109400",
    "end": "1115760"
  },
  {
    "text": "attribute that one is actually designed to point to the root Java package that",
    "start": "1115760",
    "end": "1121880"
  },
  {
    "text": "you want to generate your comments from okay so if you don't necessarily want to generate Java do for the entire module",
    "start": "1121880",
    "end": "1129360"
  },
  {
    "text": "maybe it's just for a specific subset of the Java packages you can do that by defining the root Java package and Droid",
    "start": "1129360",
    "end": "1136440"
  },
  {
    "text": "do will start there and only drill down recursively into the sub you know the sub packages from there and it can leave",
    "start": "1136440",
    "end": "1142799"
  },
  {
    "text": "other things alone so you can use that to narrow scope if you want to um but in",
    "start": "1142799",
    "end": "1148200"
  },
  {
    "text": "a lot of cases and what we do in our examples is we'll typically just set this to whatever the root package would be of the same code so that we get",
    "start": "1148200",
    "end": "1154520"
  },
  {
    "text": "everything okay all right that's pretty much it for what you",
    "start": "1154520",
    "end": "1162559"
  },
  {
    "text": "would need to put into your system image definition now maybe you've already doing those things in which case you're",
    "start": "1162559",
    "end": "1167640"
  },
  {
    "text": "way ahead of the game but you're going to want to make sure that you get that code separated out so that you don't have those problems the next question is",
    "start": "1167640",
    "end": "1175159"
  },
  {
    "text": "how do we get this stuff to developers right we discussed a couple options uh as far as you know Maven Central or",
    "start": "1175159",
    "end": "1181799"
  },
  {
    "text": "throwing it up on a website the recommended way to do this and what I would tell you is the best",
    "start": "1181799",
    "end": "1187640"
  },
  {
    "text": "way to do this is hook into this thing this is the SDK manager if you've never seen it before this is a tool that",
    "start": "1187640",
    "end": "1194320"
  },
  {
    "text": "developers understand they know how it works they use it all the time if you want your applica or your additional",
    "start": "1194320",
    "end": "1200799"
  },
  {
    "text": "Library code to be easily accessible to them use this tool okay and that's what",
    "start": "1200799",
    "end": "1205960"
  },
  {
    "text": "the whole point of the SDK add-on is to do how do we add on some additional pieces to our build so that we can",
    "start": "1205960",
    "end": "1212360"
  },
  {
    "text": "generate packages that this tool will recognize immediately and will simply integrate in alongside with the rest of",
    "start": "1212360",
    "end": "1219960"
  },
  {
    "text": "the base platform exactly what they need to work with your code",
    "start": "1219960",
    "end": "1225320"
  },
  {
    "text": "okay so there's some additional pieces that we add in into our device directory that are specific to the add-on the",
    "start": "1225320",
    "end": "1232640"
  },
  {
    "text": "first one is this manifest. file this is a very simple metadata file it's just designed to to uh provide some basic",
    "start": "1232640",
    "end": "1240440"
  },
  {
    "text": "information to the SDK manager about what your library code is so it's going",
    "start": "1240440",
    "end": "1245679"
  },
  {
    "text": "to have some information like what's the name of the add-on who's the vendor that is providing this add-on uh what is the",
    "start": "1245679",
    "end": "1253159"
  },
  {
    "text": "base Target API so you're going to have to tell the SDK add-on what what version",
    "start": "1253159",
    "end": "1259159"
  },
  {
    "text": "of the Android platform is your add-on based off of because the add-on is not going to provide the entire SDK along",
    "start": "1259159",
    "end": "1266600"
  },
  {
    "text": "with it it's just going to decorate the existing one on there so it needs to know for instance that our add-on is",
    "start": "1266600",
    "end": "1272679"
  },
  {
    "text": "based off of an Android 5.0 Bas device that's API level 21 and then it's going",
    "start": "1272679",
    "end": "1277720"
  },
  {
    "text": "to use that as the base Target and simply include our libraries on top of that okay so that one's very important",
    "start": "1277720",
    "end": "1284679"
  },
  {
    "text": "uh and then additionally what are the definitions of the shared libraries we're providing so this is just a list",
    "start": "1284679",
    "end": "1289799"
  },
  {
    "text": "of Library names and then each name is referenced to the the file on the system",
    "start": "1289799",
    "end": "1295039"
  },
  {
    "text": "image that that library is associated with and giving it some sort of a display name so again just some",
    "start": "1295039",
    "end": "1300320"
  },
  {
    "text": "information that the SDK manager will use to display your contents to the",
    "start": "1300320",
    "end": "1305360"
  },
  {
    "text": "developers inside of that tool okay and we'll see that this this file actually has a secondary usage a little bit later",
    "start": "1305360",
    "end": "1313919"
  },
  {
    "start": "1313000",
    "end": "1564000"
  },
  {
    "text": "on stubs probably one of my favorite features of add-ons something that you",
    "start": "1313919",
    "end": "1319360"
  },
  {
    "text": "you could probably do yourself in another way but I think it's cool that this is really hooked in so the question",
    "start": "1319360",
    "end": "1325200"
  },
  {
    "text": "often would come up as we're developing this SDK add-on one of the problems with",
    "start": "1325200",
    "end": "1331360"
  },
  {
    "text": "just exposing these Java libraries even if they're compiled to other developers",
    "start": "1331360",
    "end": "1336799"
  },
  {
    "text": "is that if we have to give them all of our source code they could decompile it they could look at what's in there and",
    "start": "1336799",
    "end": "1341840"
  },
  {
    "text": "they you know if there's some proprietary information in there you know Java code is not that hard to reverse engineer right so is there a",
    "start": "1341840",
    "end": "1349279"
  },
  {
    "text": "better way that we could distribute this to developers uh and there's a functionality inside of the build system",
    "start": "1349279",
    "end": "1354880"
  },
  {
    "text": "that's then used in the SDK which is used to generate stub jars from the code",
    "start": "1354880",
    "end": "1360320"
  },
  {
    "text": "that's on your system image so that means that the library code that is actually put into the library package of",
    "start": "1360320",
    "end": "1367279"
  },
  {
    "text": "your add-on is not full working code it is empty stubbed classes and methods",
    "start": "1367279",
    "end": "1372960"
  },
  {
    "text": "with nothing in them in fact if you decompile the source you'll see a bunch of empty methods that throw a runtime",
    "start": "1372960",
    "end": "1378480"
  },
  {
    "text": "exemption saying stub so there's no actual code that you give to the",
    "start": "1378480",
    "end": "1383840"
  },
  {
    "text": "developers you give them the bare minimum necessary to link their application code and have it compile and",
    "start": "1383840",
    "end": "1390039"
  },
  {
    "text": "then when it runs on the real device it's going to run against the actual system image where the real code is okay so you don't have to worry about",
    "start": "1390039",
    "end": "1395960"
  },
  {
    "text": "Distributing your code necessarily to all thirdparty developers uh additionally the SDK",
    "start": "1395960",
    "end": "1402919"
  },
  {
    "text": "add-on has this functionality that allows you to control what from your system image goes into the uh the SDK",
    "start": "1402919",
    "end": "1411120"
  },
  {
    "text": "package so let's say that you build a Java library but inside that library inside that jar file there are still",
    "start": "1411120",
    "end": "1417320"
  },
  {
    "text": "some internal classes versus maybe some actual public facing classes that the developer needs to see using a stub",
    "start": "1417320",
    "end": "1424679"
  },
  {
    "text": "definition file the SDK add-on allows you to control what goes into the stub before the stubs are generated okay so",
    "start": "1424679",
    "end": "1431720"
  },
  {
    "text": "it's just a very simple text file using the syntax that I have up there where you have this sort of plus minus idea",
    "start": "1431720",
    "end": "1437360"
  },
  {
    "text": "that I want to add everything from this package but not these pieces and you can do this all the way down to the",
    "start": "1437360",
    "end": "1442799"
  },
  {
    "text": "individual class level okay so I can let's say I have unit test classes or",
    "start": "1442799",
    "end": "1448279"
  },
  {
    "text": "other things somehow in my code but I don't want to ship those off to the developers even as stubs I can remove",
    "start": "1448279",
    "end": "1453799"
  },
  {
    "text": "those elements out by putting into my stubs definition file what should go in what should pull out and then it will",
    "start": "1453799",
    "end": "1460520"
  },
  {
    "text": "take all the resulting information and generate the stubs from that",
    "start": "1460520",
    "end": "1466400"
  },
  {
    "text": "okay all right one last piece of information that is necessary for or I should say boiler",
    "start": "1466840",
    "end": "1472600"
  },
  {
    "text": "plate that is necessary for our build for the system image template so I mentioned that we had the manifest. II",
    "start": "1472600",
    "end": "1478880"
  },
  {
    "text": "as a file that's necessary to let the SDK manager know the the contents of our",
    "start": "1478880",
    "end": "1483960"
  },
  {
    "text": "library package there is a similar definition of metadata for the system image package the package that has your",
    "start": "1483960",
    "end": "1489880"
  },
  {
    "text": "your binaries in it that they can use to create an emulator okay so the in this case it's not called manifest inii it's",
    "start": "1489880",
    "end": "1495480"
  },
  {
    "text": "called source. properties uh and the the build system supports another extension called source. propop template uh that",
    "start": "1495480",
    "end": "1502679"
  },
  {
    "text": "allows you to generate essentially the same information but this time the build system is going to use it to generate",
    "start": "1502679",
    "end": "1508320"
  },
  {
    "text": "the system image package instead of the library package now one of the nice things about the system image template",
    "start": "1508320",
    "end": "1514799"
  },
  {
    "text": "is that it is actually a template it supports inlining c not all but certain build system variables like the SDK",
    "start": "1514799",
    "end": "1522159"
  },
  {
    "text": "version the target ABI like x86 or arm that you might be supporting and instead",
    "start": "1522159",
    "end": "1527559"
  },
  {
    "text": "of hard coding those into your file you can put them in as templates and the build system will inject the right",
    "start": "1527559",
    "end": "1533640"
  },
  {
    "text": "values before it generates the resulting source. properties file okay this is in",
    "start": "1533640",
    "end": "1538919"
  },
  {
    "text": "a lot of cases may not be super useful since most of us are building to one version of Android on one specific",
    "start": "1538919",
    "end": "1544919"
  },
  {
    "text": "architecture if it's our custom device but Google uses this internally obviously because they build Google apis",
    "start": "1544919",
    "end": "1550799"
  },
  {
    "text": "for arm x86 x86 64 now um and they can use a single file and each time they do",
    "start": "1550799",
    "end": "1556840"
  },
  {
    "text": "the build the right file just happens to be generated okay so if you're if you're in that game at all it's very helpful",
    "start": "1556840",
    "end": "1562840"
  },
  {
    "text": "with that with all these pieces in place we",
    "start": "1562840",
    "end": "1567960"
  },
  {
    "start": "1564000",
    "end": "1643000"
  },
  {
    "text": "just have to create another product definition so again this should be very familiar to most of us in the room it's",
    "start": "1567960",
    "end": "1573440"
  },
  {
    "text": "going to look just like a product definition make file now some of the uh attribute names have changed a little",
    "start": "1573440",
    "end": "1579880"
  },
  {
    "text": "bit and that allows them to be co-resident with the actual system image in the same Target um but it's the same",
    "start": "1579880",
    "end": "1585840"
  },
  {
    "text": "basic information right we're going to give it a name we have rules for copying files into that add-on uh which in this",
    "start": "1585840",
    "end": "1592120"
  },
  {
    "text": "case is just that manifest file we generated a rule to copy modules which is similar to a product packages",
    "start": "1592120",
    "end": "1598320"
  },
  {
    "text": "declaration uh which is going to take the shared Library jar files or whatever those modules put out and copy them into",
    "start": "1598320",
    "end": "1605159"
  },
  {
    "text": "the resulting zip file that becomes the archive um and you know the stubs definition file needs to be added in",
    "start": "1605159",
    "end": "1611520"
  },
  {
    "text": "here uh as well as you know the definitions of any documentation modules everything we've generated up to this",
    "start": "1611520",
    "end": "1617720"
  },
  {
    "text": "point that system image CIS prop I point out specifically that that's new in lollipop because if you're building any",
    "start": "1617720",
    "end": "1623760"
  },
  {
    "text": "other version of Android which I imagine some of you still are um that attribute doesn't exist and is not necessary there",
    "start": "1623760",
    "end": "1630840"
  },
  {
    "text": "because in in previous build systems the system image and the library are together in one package so that is new",
    "start": "1630840",
    "end": "1638039"
  },
  {
    "text": "so that the two could be split out and distributed separately okay all right then before we walk",
    "start": "1638039",
    "end": "1645799"
  },
  {
    "start": "1643000",
    "end": "1694000"
  },
  {
    "text": "through and build this we simply need to append it to our device Target so common",
    "start": "1645799",
    "end": "1651080"
  },
  {
    "text": "you know the common way of doing this is that your system image probably already has an Android products file that is",
    "start": "1651080",
    "end": "1657320"
  },
  {
    "text": "indirected to the make file that looks similar to the one I showed you before right the device make file that defines",
    "start": "1657320",
    "end": "1663519"
  },
  {
    "text": "all the product definitions for the system image Target uh in that same line",
    "start": "1663519",
    "end": "1668679"
  },
  {
    "text": "we can just modify that file to append an additional make file which is the SDK",
    "start": "1668679",
    "end": "1674080"
  },
  {
    "text": "add-on file that I just showed you before okay so we don't have to create separate directory for all our add-on",
    "start": "1674080",
    "end": "1679960"
  },
  {
    "text": "stuff with its own Android products file its own vendor setup file it can live in the same directory and all those files",
    "start": "1679960",
    "end": "1685679"
  },
  {
    "text": "can live there we just have to Define both products at the head of the Android products. MK okay and then it'll allow",
    "start": "1685679",
    "end": "1692440"
  },
  {
    "text": "us to build both now there is one slight difference with an SDK add-on though and that is",
    "start": "1692440",
    "end": "1698000"
  },
  {
    "start": "1694000",
    "end": "1790000"
  },
  {
    "text": "that you cannot build an add-on from a lunch Target so there's no way for us to run lunch see the add-on build it that",
    "start": "1698000",
    "end": "1705399"
  },
  {
    "text": "way that is only for system image Target builds okay okay there's some specific",
    "start": "1705399",
    "end": "1710919"
  },
  {
    "text": "make Target uh definition boiler plate that you would use to generate this add-on directly and it looks just like",
    "start": "1710919",
    "end": "1716679"
  },
  {
    "text": "this so the the device SDK add-on that section there is the name of your add-on",
    "start": "1716679",
    "end": "1721720"
  },
  {
    "text": "which you defined in the add-ons make file and then it's just going to be bracketed by that boilerplate",
    "start": "1721720",
    "end": "1727039"
  },
  {
    "text": "information so you'll always have product in the front and the type of product you're building on the tail",
    "start": "1727039",
    "end": "1732880"
  },
  {
    "text": "which in this case is SDK add-on if you get too deep into this you might see some other things here like sdks or SDK",
    "start": "1732880",
    "end": "1739519"
  },
  {
    "text": "extras um but in this case that will always be SDK add-on okay and you just",
    "start": "1739519",
    "end": "1745240"
  },
  {
    "text": "run this and this will generate the SDK add-on now the nice thing is if you have",
    "start": "1745240",
    "end": "1751039"
  },
  {
    "text": "already built your system image this is really just considered an incremental build on top of that so it does take a",
    "start": "1751039",
    "end": "1757279"
  },
  {
    "text": "little while but it's not like building from clean this is going to just build the SDK components necessary on top of",
    "start": "1757279",
    "end": "1763640"
  },
  {
    "text": "the system image but reusing those intermediates similarly if you haven't built it before you can build the SDK",
    "start": "1763640",
    "end": "1770000"
  },
  {
    "text": "Target and it will build just enough of the system image to generate this so they're common enough that you can build",
    "start": "1770000",
    "end": "1776320"
  },
  {
    "text": "one or the other you don't have to have this order of operations necessarily like I got to build this one first and",
    "start": "1776320",
    "end": "1781519"
  },
  {
    "text": "then I do this doesn't matter whatever works well for your workflow uh the build will will appropriately do what it",
    "start": "1781519",
    "end": "1787799"
  },
  {
    "text": "needs to do okay so the last step is how do we",
    "start": "1787799",
    "end": "1795039"
  },
  {
    "start": "1790000",
    "end": "1835000"
  },
  {
    "text": "get develop or how do we hook this back into the the distribution system for developers so the SDK manager I",
    "start": "1795039",
    "end": "1801200"
  },
  {
    "text": "mentioned before has this concept of an add-on site and the add-on site is a section in the SDK manager where",
    "start": "1801200",
    "end": "1807880"
  },
  {
    "text": "developers can simply get a URL from you or any other manufacturer to where your",
    "start": "1807880",
    "end": "1813440"
  },
  {
    "text": "SDK repository is hosted and all they have to do is throw that URL in this list and the next time the SDK manager",
    "start": "1813440",
    "end": "1820720"
  },
  {
    "text": "refreshes it will search for your packages along with all the other Android packages at the same time okay",
    "start": "1820720",
    "end": "1826799"
  },
  {
    "text": "and you can add as many of these as you'd like as a developer uh into this list now the question is what gets added",
    "start": "1826799",
    "end": "1833279"
  },
  {
    "text": "here uh well there's a couple things you will upload the archives that",
    "start": "1833279",
    "end": "1838960"
  },
  {
    "start": "1835000",
    "end": "2024000"
  },
  {
    "text": "we've been talking about those zip files which will become the output of that make build that will get uploaded to",
    "start": "1838960",
    "end": "1844720"
  },
  {
    "text": "somewhere on the public web and then these repository XML files need to live",
    "start": "1844720",
    "end": "1849760"
  },
  {
    "text": "right next to it so you'll you'll just have a little directory somewhere out on a CDN or somewhere on the public web",
    "start": "1849760",
    "end": "1855200"
  },
  {
    "text": "where you want to provide these things and it will simply have the this XML file which is a little bit small to read",
    "start": "1855200",
    "end": "1861600"
  },
  {
    "text": "up there uh and an individual archive now this repository definition is going",
    "start": "1861600",
    "end": "1867159"
  },
  {
    "text": "to have a lot of the same information in it that that manifest. or that source.",
    "start": "1867159",
    "end": "1872200"
  },
  {
    "text": "properties file does it's just a bunch of metadata about the archive so it's going to have information like the name",
    "start": "1872200",
    "end": "1878440"
  },
  {
    "text": "the vendor name the Bas SDK and then it will have references to the archives",
    "start": "1878440",
    "end": "1883799"
  },
  {
    "text": "themselves so the the archive uh Block in this file defines the actual name of the zip file",
    "start": "1883799",
    "end": "1890919"
  },
  {
    "text": "associated with this add-on or with this system image and then for checking reasons it also you have to provide a",
    "start": "1890919",
    "end": "1896200"
  },
  {
    "text": "correct Shaw and a correct file size that the SDK manager will use to verify the download after the fact okay um so",
    "start": "1896200",
    "end": "1903760"
  },
  {
    "text": "this this first uh SDK here is for the system image template in the example",
    "start": "1903760",
    "end": "1909559"
  },
  {
    "text": "that we've been working through uh and then I have another one next to it on the slides for what you would see for",
    "start": "1909559",
    "end": "1916720"
  },
  {
    "text": "the actual Library package okay again similar data this one has those Library",
    "start": "1916720",
    "end": "1921919"
  },
  {
    "text": "definitions on the bottom the same things that were at the bottom of that I manifest. II file um but again defines",
    "start": "1921919",
    "end": "1927760"
  },
  {
    "text": "the same information now there are some important values in here that were not in that file though the first is",
    "start": "1927760",
    "end": "1933720"
  },
  {
    "text": "revision okay you can version your SDK components using this repository so you",
    "start": "1933720",
    "end": "1940279"
  },
  {
    "text": "know initially this would probably be revision one um but then if we decide later on that we want to ship an update",
    "start": "1940279",
    "end": "1947639"
  },
  {
    "text": "to to developers all we need to do is upload the new zip file modify this XML",
    "start": "1947639",
    "end": "1953360"
  },
  {
    "text": "to say revision 2 and then the next time the developers open their SDK manager",
    "start": "1953360",
    "end": "1958480"
  },
  {
    "text": "and it goes through and it checks all the add-on sites they'll see that there's an updated version of your SDK",
    "start": "1958480",
    "end": "1964600"
  },
  {
    "text": "and they can download it and install it straight from the tool they already know okay so it allows us to distribute",
    "start": "1964600",
    "end": "1970360"
  },
  {
    "text": "versions to them and update them but it also has that uh notification mechanism built in you know if if you're hosting",
    "start": "1970360",
    "end": "1977399"
  },
  {
    "text": "these up on on a a dependency management system there's really no good way for the developers to go check and see if a",
    "start": "1977399",
    "end": "1983039"
  },
  {
    "text": "new version is available this allows them to do that in a tool they're probably in quite a bit anyway without",
    "start": "1983039",
    "end": "1989200"
  },
  {
    "text": "necessarily automatically downloading it for them the the option is there for them to pull it if they want to and",
    "start": "1989200",
    "end": "1995200"
  },
  {
    "text": "you'll see what that looks like here in just a minute uh and of course I mentioned before the other one the other big one for a lot of SDK developers is",
    "start": "1995200",
    "end": "2002200"
  },
  {
    "text": "licensing so you can attach a license to your SDK and that license will be shown to the developer or the user before",
    "start": "2002200",
    "end": "2009799"
  },
  {
    "text": "they're allowed to download it so they'll see the licensed text they're forced to agree to it before the",
    "start": "2009799",
    "end": "2014840"
  },
  {
    "text": "download begins so it's just an additional feature that you probably would have otherwise had to write yourself just write in the system for",
    "start": "2014840",
    "end": "2020960"
  },
  {
    "text": "you okay",
    "start": "2020960",
    "end": "2026279"
  },
  {
    "start": "2024000",
    "end": "2214000"
  },
  {
    "text": "okay uh just a couple additional things here before I show you a quick demo uh and that is there are a few things that",
    "start": "2026279",
    "end": "2033360"
  },
  {
    "text": "are part of AOSP that can make this a little bit easier uh I mentioned before that each one of those archives in the",
    "start": "2033360",
    "end": "2039559"
  },
  {
    "text": "repository XML uh you had to define the Shaw and the file size inside of it um",
    "start": "2039559",
    "end": "2044880"
  },
  {
    "text": "these are these top two elements are just a couple of Snippets that I figured I'd throw at you that you can keep in",
    "start": "2044880",
    "end": "2050000"
  },
  {
    "text": "your back pocket that are easy ways for you to generate that Shaw and that file size so that that sha cut and that stat",
    "start": "2050000",
    "end": "2057118"
  },
  {
    "text": "command will give you the exact piece you need to drop right into that XML",
    "start": "2057119",
    "end": "2062200"
  },
  {
    "text": "okay now I didn't write those myself I actually stole them and I'll show you where in just a minute uh in addition",
    "start": "2062200",
    "end": "2067760"
  },
  {
    "text": "into that the AOSP comes with uh some schema definition files for all of those",
    "start": "2067760",
    "end": "2074839"
  },
  {
    "text": "XML files that I just showed you so the question might come up well how do I generate one of those things great you",
    "start": "2074839",
    "end": "2080398"
  },
  {
    "text": "showed me an example but what can go in them the xsd files for all the schemas that Google supports and they've revved",
    "start": "2080399",
    "end": "2086919"
  },
  {
    "text": "this a few times so there's going to be a couple versions of them for instance the latest version of the add-on schema",
    "start": "2086919",
    "end": "2092158"
  },
  {
    "text": "is version s um and they'll probably rev that again at some point uh but the the xsd files that defines here's everything",
    "start": "2092159",
    "end": "2099400"
  },
  {
    "text": "that can go in what's required what's optional all that information is inside AOSP you'll find it at pre-builts Dev",
    "start": "2099400",
    "end": "2105560"
  },
  {
    "text": "tools repository and they'll all be listed there okay so at a minimum you",
    "start": "2105560",
    "end": "2110640"
  },
  {
    "text": "can use these to validate the XML you're generating whether you're crafting it by hand or you've come up with a script or some other tool to do that you can use",
    "start": "2110640",
    "end": "2118000"
  },
  {
    "text": "with something like XML lint you can validate that against the schema in AOSP to make sure that it's actually going to",
    "start": "2118000",
    "end": "2124280"
  },
  {
    "text": "work with the SDK manager okay so that's a very helpful tool and then the other piece that's in AOSP which is kind of",
    "start": "2124280",
    "end": "2131760"
  },
  {
    "text": "helpful um is this make xdk repo XML script this is a script that is designed",
    "start": "2131760",
    "end": "2139040"
  },
  {
    "text": "to take your archive parse through it and generate the XML that you need for your repository it doesn't quite work",
    "start": "2139040",
    "end": "2146720"
  },
  {
    "text": "that well um it does generate correct XML but it's incomplete and part of that",
    "start": "2146720",
    "end": "2152480"
  },
  {
    "text": "is because um there is additional information that I showed you that goes in the repository that's not in the",
    "start": "2152480",
    "end": "2158240"
  },
  {
    "text": "archives like in the archives manifest or at source. properties things like the license distribution URLs revisions",
    "start": "2158240",
    "end": "2165480"
  },
  {
    "text": "those don't exist in there so they don't get thrown into the uh XML but that XML",
    "start": "2165480",
    "end": "2170760"
  },
  {
    "text": "is required for it to validate properly against the schema so if you attempt to run this script and I encourage you to",
    "start": "2170760",
    "end": "2177000"
  },
  {
    "text": "play with it you'll see that it generates an XML file but it will always fail validation every single time and",
    "start": "2177000",
    "end": "2182960"
  },
  {
    "text": "it's at first you think it's wrong but it's just because it's incomplete the nice thing about this script is it will",
    "start": "2182960",
    "end": "2188040"
  },
  {
    "text": "do things like generating the Shaw and the file size and that's where I stole those Snippets from uh so it can do some",
    "start": "2188040",
    "end": "2193760"
  },
  {
    "text": "of that work for you initially but you're going to have to go back in and sort of fill in the gaps if you decide",
    "start": "2193760",
    "end": "2198920"
  },
  {
    "text": "to use this script as part of your workflow",
    "start": "2198920",
    "end": "2204079"
  },
  {
    "text": "okay all right just a little bit of time here so let me quickly jump into a demo",
    "start": "2204079",
    "end": "2211359"
  },
  {
    "start": "2214000",
    "end": "2449000"
  },
  {
    "text": "here okay so what I'd like to show you here is the example that we use in our",
    "start": "2215119",
    "end": "2220680"
  },
  {
    "text": "internals classes of a device Target that lives side by side with the SDK",
    "start": "2220680",
    "end": "2227079"
  },
  {
    "text": "add-on uh so just as I showed you before in the slides uh if we take a look at the Android products definition uh of",
    "start": "2227079",
    "end": "2233680"
  },
  {
    "text": "this particular example here we can see that I've added the SDK add-on make file",
    "start": "2233680",
    "end": "2240440"
  },
  {
    "text": "right on top of the make file for the product definition so I won't take too much time to look at the product",
    "start": "2240440",
    "end": "2246560"
  },
  {
    "text": "definition of the actual system image uh but just to show you what it is we have this system image here uh that is",
    "start": "2246560",
    "end": "2253359"
  },
  {
    "text": "defined by this product definition that inherits from the emulator build uh that has some additional products and",
    "start": "2253359",
    "end": "2260359"
  },
  {
    "text": "packages added to it and our SDK add-on is just living right alongside that in",
    "start": "2260359",
    "end": "2265599"
  },
  {
    "text": "the same directory we don't have to create a new directory or anything like that to separate this from the invidual",
    "start": "2265599",
    "end": "2271800"
  },
  {
    "text": "target so we pull up the SDK add-on here uh we can see some of those pieces that I just described to you here so the",
    "start": "2271800",
    "end": "2277960"
  },
  {
    "text": "add-on has a name uh we Define all of the files that need to be copied into",
    "start": "2277960",
    "end": "2283119"
  },
  {
    "text": "our SDK add-on and this specifically the one we discussed before was this manifest. uh if there's anything",
    "start": "2283119",
    "end": "2289400"
  },
  {
    "text": "specific to your add-on that may need to get copied um you can add that in here as well an interesting example is that",
    "start": "2289400",
    "end": "2296560"
  },
  {
    "text": "the kernel image that we're using in our uh internals example for Alpha is actually a custom kernel um and by",
    "start": "2296560",
    "end": "2304240"
  },
  {
    "text": "default it doesn't add the custom kernel to the system image package that gets built so we have to explicitly tell it",
    "start": "2304240",
    "end": "2310920"
  },
  {
    "text": "to take our kernel and copy it into the resulting build by default it's going to take the pre-built image for qmu",
    "start": "2310920",
    "end": "2318359"
  },
  {
    "text": "emulator that it it has along with OSP uh We've added the copy modules",
    "start": "2318359",
    "end": "2323640"
  },
  {
    "text": "declaration to include that those two Java libraries that are associated with our system image that we want to expose",
    "start": "2323640",
    "end": "2331480"
  },
  {
    "text": "to these individual developers uh and we'll take a look here in just a minute at what's actually in those libraries",
    "start": "2331480",
    "end": "2336599"
  },
  {
    "text": "only one of them really is is of importance in this particular case uh and then the stubs definition file that",
    "start": "2336599",
    "end": "2342359"
  },
  {
    "text": "I showed you has to get included in here as well the required definition of our source. propop template for the system",
    "start": "2342359",
    "end": "2348760"
  },
  {
    "text": "image and our documentation so basically everything that I've just walked you through as we were going through the uh",
    "start": "2348760",
    "end": "2355920"
  },
  {
    "text": "buildup of our SDK add-on you can see it's all lined out here in this product definition for our SDK add-on living",
    "start": "2355920",
    "end": "2363760"
  },
  {
    "text": "right alongside our system image here okay so just in the interest of",
    "start": "2363760",
    "end": "2369280"
  },
  {
    "text": "time I'll just briefly go through uh what's going on in here so our our system image has a handful of apps",
    "start": "2369280",
    "end": "2375040"
  },
  {
    "text": "inside of them um and sort of the high level view of what's going on here is we have a Services application that adds a",
    "start": "2375040",
    "end": "2381760"
  },
  {
    "text": "new system service to the device that in this case is exposing some additional logging functionality uh that isn't",
    "start": "2381760",
    "end": "2388520"
  },
  {
    "text": "otherwise exposed to uh applications and then we uh have a demonstration of a client application that accesses that",
    "start": "2388520",
    "end": "2395599"
  },
  {
    "text": "functionality using this public Java Library that's exposed for other applications to use so as I mentioned",
    "start": "2395599",
    "end": "2402839"
  },
  {
    "text": "before the best way to do this is to really extract your Java code from any",
    "start": "2402839",
    "end": "2407920"
  },
  {
    "text": "individual app that you want to expose to a developer into its own Java library",
    "start": "2407920",
    "end": "2413480"
  },
  {
    "text": "and in this case we have included that code in the separate call framework directory so we",
    "start": "2413480",
    "end": "2421359"
  },
  {
    "text": "have a a library here for what we're calling a log service and here",
    "start": "2421359",
    "end": "2429318"
  },
  {
    "text": "[Music]",
    "start": "2439560",
    "end": "2442650"
  },
  {
    "start": "2449000",
    "end": "2641000"
  },
  {
    "text": "of generating a system service similar to the other uh managers that developers would find in the framework but the",
    "start": "2449960",
    "end": "2456520"
  },
  {
    "text": "point here is this log manager is a class that client application should be able to access but is not part of the",
    "start": "2456520",
    "end": "2463000"
  },
  {
    "text": "core framework so if a developer simply starts developing an application in Android Studio or in eclipse and they",
    "start": "2463000",
    "end": "2470520"
  },
  {
    "text": "try to declare this in their code by default that isn't going to compile and they're not going to be able to build it",
    "start": "2470520",
    "end": "2476880"
  },
  {
    "text": "and that's the whole point of the SDK add-on in general so what we're going to show you in this demonstration is how U",
    "start": "2476880",
    "end": "2483760"
  },
  {
    "text": "including this add-on gives the developer in their own environment access to a class like log manager okay",
    "start": "2483760",
    "end": "2492000"
  },
  {
    "text": "so log manager this entire uh build here is wrapped up using that Android MK that",
    "start": "2492000",
    "end": "2498040"
  },
  {
    "text": "I showed you earlier with the three primary modules in it so the module to build this is a Java Library uh the",
    "start": "2498040",
    "end": "2505000"
  },
  {
    "text": "module to include that XML definition as a pre-built into Etsy permissions and",
    "start": "2505000",
    "end": "2510359"
  },
  {
    "text": "then the Droid doc module to generate the HTML documentation to go along with the Java library that we're building",
    "start": "2510359",
    "end": "2516560"
  },
  {
    "text": "here so all that code for the log manager log listener and services are going to get built into a jar file and",
    "start": "2516560",
    "end": "2524040"
  },
  {
    "text": "in our system image build they will be dropped into system framework uh where we can access them from other",
    "start": "2524040",
    "end": "2531680"
  },
  {
    "text": "applications so as an Android developer if I were inside of my",
    "start": "2531680",
    "end": "2537400"
  },
  {
    "text": "favorite IDE and for the moment I will choose Android studio uh if I were to",
    "start": "2537400",
    "end": "2542960"
  },
  {
    "text": "want to build an application using this fancy new library there's a couple things that I would want to do uh the",
    "start": "2542960",
    "end": "2549359"
  },
  {
    "text": "first is as I mentioned in the slides you would want to include the users",
    "start": "2549359",
    "end": "2554640"
  },
  {
    "text": "Library declaration using the name that is exposed for that library inside of that",
    "start": "2554640",
    "end": "2561760"
  },
  {
    "text": "XML definition so just to jump back here for a minute this XML file defines the",
    "start": "2561760",
    "end": "2568040"
  },
  {
    "text": "name of the lib and that same name is what a developer would use inside of",
    "start": "2568040",
    "end": "2573400"
  },
  {
    "text": "their Android manifest declaring that this application uh wants to use this",
    "start": "2573400",
    "end": "2578720"
  },
  {
    "text": "shared Library so first of all that shared library has to exist on the device and secondary we want that uh",
    "start": "2578720",
    "end": "2585839"
  },
  {
    "text": "library to be added to the Java class path of this process so that the application can access those classes so",
    "start": "2585839",
    "end": "2593400"
  },
  {
    "text": "this is important for the runtime use but we also want to assist the developer in building their application from from",
    "start": "2593400",
    "end": "2600520"
  },
  {
    "text": "the get-go so for instance if I just show you this simple little activity that we've created in this demo",
    "start": "2600520",
    "end": "2605760"
  },
  {
    "text": "application the problem should be readily apparent as a developer I'm trying to use the fancy new log manager",
    "start": "2605760",
    "end": "2613400"
  },
  {
    "text": "that is specific to this device and just targeting a regular Android application",
    "start": "2613400",
    "end": "2619480"
  },
  {
    "text": "uh base API I cannot do that because this symbol is unknown when we're just linking against",
    "start": "2619480",
    "end": "2626160"
  },
  {
    "text": "the core framework so we have to include the SDK",
    "start": "2626160",
    "end": "2631640"
  },
  {
    "text": "add-on so that all of these uh issues will go away so as a developer the way",
    "start": "2631640",
    "end": "2636720"
  },
  {
    "text": "that I would do this is I would hop into the SDK manager and when the SDK manager comes",
    "start": "2636720",
    "end": "2643400"
  },
  {
    "start": "2641000",
    "end": "2759000"
  },
  {
    "text": "up I need to add to my environment the",
    "start": "2643400",
    "end": "2648520"
  },
  {
    "text": "add-on sites where those custom sdks are being provided from so I can jump in",
    "start": "2648520",
    "end": "2654680"
  },
  {
    "text": "here from the tools go up to manage add-on sites and there is a section for",
    "start": "2654680",
    "end": "2661559"
  },
  {
    "text": "userdefined sites and you can see that I've already added uh a couple of those",
    "start": "2661559",
    "end": "2667240"
  },
  {
    "text": "two repository xmls that were in the slides that I've just got locally hosted on a web server on my machine here you",
    "start": "2667240",
    "end": "2673599"
  },
  {
    "text": "would obviously want to host these somewhere out on the public web uh but these are the repositories I've created",
    "start": "2673599",
    "end": "2680200"
  },
  {
    "text": "for my add-on and for the system image and this way with those add-on sites in",
    "start": "2680200",
    "end": "2686200"
  },
  {
    "text": "place when the developer looks at their list of available options for installation uh in this case I'll go",
    "start": "2686200",
    "end": "2692520"
  },
  {
    "text": "down to 5.0 since that's what we targeted uh they'll see a couple additional options they'll see an option",
    "start": "2692520",
    "end": "2698000"
  },
  {
    "text": "for my custom add-on and an option for the accompanying system image so I can",
    "start": "2698000",
    "end": "2705000"
  },
  {
    "text": "select both of those and choose to install them on my system notice that it",
    "start": "2705000",
    "end": "2710480"
  },
  {
    "text": "requires me to verify read and agree to the license associated with these two",
    "start": "2710480",
    "end": "2717160"
  },
  {
    "text": "elements which was that license text defined in the repository XML and then I",
    "start": "2717160",
    "end": "2722800"
  },
  {
    "text": "am able to install them now the install progress will take just a moment and once that install is",
    "start": "2722800",
    "end": "2729359"
  },
  {
    "text": "complete we can go back to the IDE and we can start using this",
    "start": "2729359",
    "end": "2735838"
  },
  {
    "text": "code okay we start SDK manager",
    "start": "2736040",
    "end": "2741640"
  },
  {
    "text": "here and first of all notice that both of these are now listed as installed on my system so I can leave the",
    "start": "2742839",
    "end": "2750920"
  },
  {
    "text": "manager and come back to my application now in an Android Studio application",
    "start": "2751079",
    "end": "2756119"
  },
  {
    "text": "which is uh constructed using the Gradle build system the build.gradle file",
    "start": "2756119",
    "end": "2761960"
  },
  {
    "start": "2759000",
    "end": "2894000"
  },
  {
    "text": "defines what the compile Target of your application is uh and the best way to",
    "start": "2761960",
    "end": "2768559"
  },
  {
    "text": "modify this today is to Simply manually change the compile SDK from the base",
    "start": "2768559",
    "end": "2775000"
  },
  {
    "text": "platform to the ver the value that's associated with your add-on this is not",
    "start": "2775000",
    "end": "2780599"
  },
  {
    "text": "yet set up in studio to go through the ide's uh graphical property settings I",
    "start": "2780599",
    "end": "2786040"
  },
  {
    "text": "imagine it will be in in the future but for the moment we have to actually do this manually in the file so we have to",
    "start": "2786040",
    "end": "2791480"
  },
  {
    "text": "know what the name of our SDK add-on is and this at least for the time being might be something you want to",
    "start": "2791480",
    "end": "2798000"
  },
  {
    "text": "explicitly convey to developers when you're providing documentation on how to install your add-on um until this gets",
    "start": "2798000",
    "end": "2804640"
  },
  {
    "text": "cleaned up a little bit at least in Android studio uh so we have to provide the fully qualified name for what this",
    "start": "2804640",
    "end": "2810400"
  },
  {
    "text": "value is and in this case an add-on is always defined as the vendor name",
    "start": "2810400",
    "end": "2817520"
  },
  {
    "text": "followed by the add-on [Music] name typed",
    "start": "2817520",
    "end": "2824000"
  },
  {
    "text": "correctly followed by the base API associated with it so this is the way",
    "start": "2824000",
    "end": "2829599"
  },
  {
    "text": "that the Android SDK names and uniquely identifies the add-on that I just",
    "start": "2829599",
    "end": "2835240"
  },
  {
    "text": "installed so if I resync the",
    "start": "2835240",
    "end": "2839000"
  },
  {
    "text": "project couple things so as Gradle is rebuilding the project if I reopen my",
    "start": "2841240",
    "end": "2846400"
  },
  {
    "text": "project Explorer uh down here under external libraries we can see that the",
    "start": "2846400",
    "end": "2851720"
  },
  {
    "text": "target for the SDK has changed to my Alpha add-on and that in addition to the android. jar that's always there the",
    "start": "2851720",
    "end": "2859000"
  },
  {
    "text": "stub jars for my additional libraries are also included here as well so we know that it's now linking against all",
    "start": "2859000",
    "end": "2865960"
  },
  {
    "text": "the stuff that we need it to and if I jump back to log activity I can now see that ah all of the things that wouldn't",
    "start": "2865960",
    "end": "2872400"
  },
  {
    "text": "resolve before now resolve properly because they have stub in our add-on",
    "start": "2872400",
    "end": "2877839"
  },
  {
    "text": "that they can link against Now reminder that this is just stub code I can't jump in and actually look at the definition",
    "start": "2877839",
    "end": "2884640"
  },
  {
    "text": "of what's going on in here these are all just going to be empty stubs but it's",
    "start": "2884640",
    "end": "2890119"
  },
  {
    "text": "enough to get the developers up and running and Link their application so that they can build and run",
    "start": "2890119",
    "end": "2895559"
  },
  {
    "start": "2894000",
    "end": "3001000"
  },
  {
    "text": "it now just as a side note if you are an eclipse user the functionality here is",
    "start": "2895559",
    "end": "2901160"
  },
  {
    "text": "similar um but it's done in a slightly more polished way in Eclipse the Vel",
    "start": "2901160",
    "end": "2906960"
  },
  {
    "text": "oper would go to the properties of their project and underneath the Android group",
    "start": "2906960",
    "end": "2913880"
  },
  {
    "text": "they would select the add-on as their SDK",
    "start": "2913880",
    "end": "2920280"
  },
  {
    "text": "Target I don't see here let me just try",
    "start": "2921480",
    "end": "2926960"
  },
  {
    "text": "again that's put eclipse and restart and see if it comes",
    "start": "2935400",
    "end": "2940520"
  },
  {
    "text": "back sometimes Eclipse likes to Cache information a little bit too",
    "start": "2948359",
    "end": "2954559"
  },
  {
    "text": "heavily okay so if we go to the properties of the project",
    "start": "2958720",
    "end": "2964760"
  },
  {
    "text": "Android we see the option of our Alpha add-on here so we can select that as the",
    "start": "2964760",
    "end": "2970920"
  },
  {
    "text": "target API and notice that as it switches from",
    "start": "2970920",
    "end": "2979319"
  },
  {
    "text": "the base Target to the alpha addon all the red that was associated with this file has now turned proper and this file",
    "start": "2979319",
    "end": "2986839"
  },
  {
    "text": "resolves as well so you can do the same thing if you are still developing on eclipse or if you're the developers that",
    "start": "2986839",
    "end": "2992640"
  },
  {
    "text": "you work with are still using Eclipse that functionality exists as well and in fact from a tools perspective it's still",
    "start": "2992640",
    "end": "2998720"
  },
  {
    "text": "slightly a little bit more polished so the last thing that I want to show you here is that in addition to",
    "start": "2998720",
    "end": "3004880"
  },
  {
    "start": "3001000",
    "end": "3174000"
  },
  {
    "text": "being able to link against the library project we the functionality has also been added for us to create an emulator",
    "start": "3004880",
    "end": "3012079"
  },
  {
    "text": "of this device so if I jump back into the SDK",
    "start": "3012079",
    "end": "3018000"
  },
  {
    "text": "manager and this time we decide to manage abds abds",
    "start": "3019559",
    "end": "3026720"
  },
  {
    "text": "stands for Android virtual device we're basically going to create a new emulator so in addition to the library package I",
    "start": "3026720",
    "end": "3031760"
  },
  {
    "text": "also downloaded that system image Target and if I create a new avd then there will be an option for",
    "start": "3031760",
    "end": "3041119"
  },
  {
    "text": "me to first of all select a device pick your favorite from the targets list to select",
    "start": "3041359",
    "end": "3047920"
  },
  {
    "text": "the alpha add-on and immediately the alpha add-on selects that it has a",
    "start": "3047920",
    "end": "3053640"
  },
  {
    "text": "available system image in this case targeting x86 that is available to work with now it's important to remember that",
    "start": "3053640",
    "end": "3060440"
  },
  {
    "text": "the way that these two things link together which we saw briefly in the slides is that the system image must be",
    "start": "3060440",
    "end": "3067000"
  },
  {
    "text": "tagged with the same ID as the name of the add-on and those two things will",
    "start": "3067000",
    "end": "3072200"
  },
  {
    "text": "allow the tools like the ABD manager to determine when I select this target that",
    "start": "3072200",
    "end": "3077559"
  },
  {
    "text": "it should present this option as the available AB that I can select from for my emulator then I could go through and",
    "start": "3077559",
    "end": "3086240"
  },
  {
    "text": "add remaining components that I want to in my avd and create",
    "start": "3086240",
    "end": "3092680"
  },
  {
    "text": "it and then at this point as a developer I could spin up a version of the",
    "start": "3093079",
    "end": "3098640"
  },
  {
    "text": "emulator that has all the functionality in it that is specific to this device",
    "start": "3098640",
    "end": "3103720"
  },
  {
    "text": "associated with these new apis that have been exposed to me during the library and I can fully code and test my",
    "start": "3103720",
    "end": "3110640"
  },
  {
    "text": "application against those device specific changes Okay so just final notes here",
    "start": "3110640",
    "end": "3118200"
  },
  {
    "text": "before we part ways uh as I mentioned that entire example that I just showed you the fully functional device Target",
    "start": "3118200",
    "end": "3124680"
  },
  {
    "text": "and the SDK add-on built alongside of it are hosted publicly on GitHub they're on our site at GitHub New Circle Alpha um",
    "start": "3124680",
    "end": "3132040"
  },
  {
    "text": "and if you want to learn any more about this information if you like what we were talking about here today you'd like",
    "start": "3132040",
    "end": "3137640"
  },
  {
    "text": "to dive a lot deeper and talk more about how to build sdks building the Android platform and all of that um our next",
    "start": "3137640",
    "end": "3143400"
  },
  {
    "text": "Android internals class where we teach all this in great detail is coming up in junee so you're welcome to sign up for",
    "start": "3143400",
    "end": "3149400"
  },
  {
    "text": "that and if you would prefer to instead have us come directly to you and train your team come talk to me afterwards and",
    "start": "3149400",
    "end": "3155480"
  },
  {
    "text": "we can talk about private training we would love to do that as well so thank you very much for your time and if you have any questions go ahead and come up",
    "start": "3155480",
    "end": "3161400"
  },
  {
    "text": "afterwards thank you",
    "start": "3161400",
    "end": "3165078"
  }
]