[
  {
    "start": "0",
    "end": "153000"
  },
  {
    "text": "I'm going to talk about a little bit of some of the transitions that slocks gone through over the last couple years just",
    "start": "4350",
    "end": "10500"
  },
  {
    "text": "by the way of introduction this was the nice welcome post that my manager julia posted on my first day at slack just",
    "start": "10500",
    "end": "16350"
  },
  {
    "text": "about two years ago um when I joined the infrastructure and scalability team before this I spent a bunch of time",
    "start": "16350",
    "end": "22680"
  },
  {
    "text": "doing various startups and other companies mostly in the networking space and spent some years at Berkeley doing a",
    "start": "22680",
    "end": "28680"
  },
  {
    "text": "PhD that's got very little to do with anything I'm going to talk to you about right now um and this is not a talk",
    "start": "28680",
    "end": "34680"
  },
  {
    "text": "about a transition from monolith to micro services so there were some really really great talks that happened earlier",
    "start": "34680",
    "end": "40859"
  },
  {
    "text": "about this theme and so I encourage you all to if you didn't see it catch the video afterwards what this is a talk",
    "start": "40859",
    "end": "48059"
  },
  {
    "text": "about is really the focusing on what's changed in slack in these past couple",
    "start": "48059",
    "end": "54059"
  },
  {
    "text": "years so to start kind of framing the conversation we'll go back in time a little bit I'll lay out the basic",
    "start": "54059",
    "end": "59519"
  },
  {
    "text": "architecture of the slack service in 2016 motivate a little bit of why we made",
    "start": "59519",
    "end": "64619"
  },
  {
    "text": "these changes in light of new requirements and new kind of scaling challenges talk most of the talk will be",
    "start": "64619",
    "end": "71280"
  },
  {
    "text": "about what we did about it and then I'll kind of thump some up with some themes that came out of that work and talk a",
    "start": "71280",
    "end": "76380"
  },
  {
    "text": "little bit about what we have in front of us all right so it's all getting a time machine and go back to 2016 I've",
    "start": "76380",
    "end": "82920"
  },
  {
    "text": "just joined this company I'm really excited to start and I go through this presentation about how slack works at the time I'm not going to do the thing",
    "start": "82920",
    "end": "90840"
  },
  {
    "text": "where I ask everyone to raise your hand if you use slack but if you don't know slack it is a messaging communication",
    "start": "90840",
    "end": "96420"
  },
  {
    "text": "hub for teams people can communicate in real-time with rich messaging features",
    "start": "96420",
    "end": "102180"
  },
  {
    "text": "in order to get their work done there's lots of integrations there's plenty of other features in the product and I just",
    "start": "102180",
    "end": "108600"
  },
  {
    "text": "want to point out right now I'm mostly going to be pretty much actually all gonna be focused on the core messaging",
    "start": "108600",
    "end": "113970"
  },
  {
    "text": "features of the product search calls there's all these other parts of the system that I'm just not going to talk",
    "start": "113970",
    "end": "120210"
  },
  {
    "text": "about that have their own interesting tails to them because this is just about the messaging core of the application so",
    "start": "120210",
    "end": "128599"
  },
  {
    "text": "it's important to note that slack has organized around this concept of a workspace when users log into the",
    "start": "128599",
    "end": "135480"
  },
  {
    "text": "service you log into a particular domaine that relates to your company or an interest group and then all the",
    "start": "135480",
    "end": "141450"
  },
  {
    "text": "communication all the user profiles all the interactions really live within this kind of bubble that we call a slack work",
    "start": "141450",
    "end": "147450"
  },
  {
    "text": "space and this is a really important element of the architecture at the time",
    "start": "147450",
    "end": "153620"
  },
  {
    "start": "153000",
    "end": "153000"
  },
  {
    "text": "so then back in 2016 with about four million daily active users people stayed",
    "start": "153620",
    "end": "159959"
  },
  {
    "text": "connected to this service for much of the work day there's a large number of our users would come in open their",
    "start": "159959",
    "end": "166260"
  },
  {
    "text": "laptop in the morning and have stock open for the for really the duration of the day before shutting down at night",
    "start": "166260",
    "end": "171540"
  },
  {
    "text": "and so our peak connected users there's kind of globally were about two and a half million at peak at that time and",
    "start": "171540",
    "end": "179159"
  },
  {
    "text": "those sessions are really long ten hours a day where people would stay connected to the service at the time we had",
    "start": "179159",
    "end": "185099"
  },
  {
    "text": "organizations of around 10,000 plus users were kind of the biggest that we're using the product at at that time",
    "start": "185099",
    "end": "191879"
  },
  {
    "text": "and really there was this culture of a very pragmatic and conservative engineering style and you'll see that",
    "start": "191879",
    "end": "198239"
  },
  {
    "text": "and kind of reflected in the architecture of how this system worked which really can be drawn up in five",
    "start": "198239",
    "end": "204659"
  },
  {
    "start": "202000",
    "end": "202000"
  },
  {
    "text": "really simple boxes on this diagram here",
    "start": "204659",
    "end": "210349"
  },
  {
    "text": "client applications made lots of their interactions with a big PHP monolith that was hosted in Amazon's u.s. East",
    "start": "210349",
    "end": "219180"
  },
  {
    "text": "data center in fact most of the site ran out of Us East it still does actually backed by a my sequel database tier",
    "start": "219180",
    "end": "226549"
  },
  {
    "text": "there's an asynchronous job queue system which has had its own share of",
    "start": "226549",
    "end": "231900"
  },
  {
    "text": "scalability and performance challenges but I'm actually not going to talk much about that during this talk but really",
    "start": "231900",
    "end": "238049"
  },
  {
    "text": "that was where we would defer activities like unfurling links or indexing messages for search would kind of get",
    "start": "238049",
    "end": "243689"
  },
  {
    "text": "pushed out to that tier and then in the yellowish boxes on the top was the real-time message stock so in addition",
    "start": "243689",
    "end": "250169"
  },
  {
    "text": "to having a pretty traditional web app with all the letters of lamp in there",
    "start": "250169",
    "end": "255590"
  },
  {
    "text": "Linux Apache my sequel end PHP all present and happy we had this real-time",
    "start": "255590",
    "end": "260609"
  },
  {
    "text": "message bus that was custom software built in a Java tier that is where all of the kind of pub/sub distribution of",
    "start": "260609",
    "end": "267360"
  },
  {
    "text": "the messaging product happened the only thing that didn't run in u.s. East one was this thing we",
    "start": "267360",
    "end": "273270"
  },
  {
    "text": "called the message proxy at the time it was really just responsible for kind of edge terminating SSL in proxying that",
    "start": "273270",
    "end": "279060"
  },
  {
    "text": "WebSocket connection over the WAM back to us east there's a pretty simple model",
    "start": "279060",
    "end": "284550"
  },
  {
    "text": "right five boxes to describe all of slack and that was kind of reflected in",
    "start": "284550",
    "end": "290220"
  },
  {
    "start": "289000",
    "end": "289000"
  },
  {
    "text": "a little bit of how the client and server interactions worked so you stand up the client you open it in the morning",
    "start": "290220",
    "end": "296220"
  },
  {
    "text": "and the first thing it does is make this API call RTM dot start to the PHP back end which",
    "start": "296220",
    "end": "301860"
  },
  {
    "text": "would download the entire of the entirety of the user model sorry the",
    "start": "301860",
    "end": "307860"
  },
  {
    "text": "entire workspace model so every user all of their preferences their profiles and pavatt ours every channel all the",
    "start": "307860",
    "end": "314490"
  },
  {
    "text": "information about them who is in every channel all of that would get kind of dumped to the client and the client would populate a pretty that model and",
    "start": "314490",
    "end": "322620"
  },
  {
    "text": "vision of the metadata of the team and then as part of that initial payload we also got a URL which the client would",
    "start": "322620",
    "end": "328650"
  },
  {
    "text": "then use to connect to a WebSocket to the nearby message proxy that would then go back to the message server and so",
    "start": "328650",
    "end": "337230"
  },
  {
    "text": "once you're connected to the service you're using it for ten hours a day um pushes would come over that WebSocket",
    "start": "337230",
    "end": "342690"
  },
  {
    "text": "you know messages would arrive a user might change their avatar and you'd see the the image show up and immediately",
    "start": "342690",
    "end": "348900"
  },
  {
    "text": "update and so all of the both a data plane and control plane messages were kind of sent over this real-time message",
    "start": "348900",
    "end": "355080"
  },
  {
    "text": "service to keep the client up-to-date though the backend was scaled out",
    "start": "355080",
    "end": "360840"
  },
  {
    "start": "358000",
    "end": "358000"
  },
  {
    "text": "horizontally by some pretty straightforward charting approach where when we create a new customer a new",
    "start": "360840",
    "end": "368790"
  },
  {
    "text": "workspace in slack we assign that workspace to a particular database shard and to a particular message server shard",
    "start": "368790",
    "end": "374730"
  },
  {
    "text": "that was pretty much it right you log in the first API action you would do would",
    "start": "374730",
    "end": "380730"
  },
  {
    "text": "look up the metadata row from this database tier that we call domains the kind of key initial bootstrapping tier",
    "start": "380730",
    "end": "386760"
  },
  {
    "text": "that response would go back to the PHP tier and then it would know which of the database shards and which of the MS ARDS",
    "start": "386760",
    "end": "392280"
  },
  {
    "text": "to route this request to and then from that point on pretty much all interactions for that user or actually",
    "start": "392280",
    "end": "398070"
  },
  {
    "text": "for all of the users in that workspace would be confined to that one data shard and that one Msgr",
    "start": "398070",
    "end": "404539"
  },
  {
    "text": "now at the time we kind of managed our servers in this mean that I'm sort of",
    "start": "404539",
    "end": "411389"
  },
  {
    "text": "calling a herd of pets people have heard this cattle verse pets metaphor we really had a lot of these individual",
    "start": "411389",
    "end": "417330"
  },
  {
    "text": "pets each database server was kind of and message server was known by a number",
    "start": "417330",
    "end": "422430"
  },
  {
    "text": "and lots of manual operations were needed to keep that service - you're up",
    "start": "422430",
    "end": "427470"
  },
  {
    "text": "to date um the PHP code the kind of monolith would have a big mapping that",
    "start": "427470",
    "end": "432479"
  },
  {
    "text": "would say database shard number 35 here is the host name that that is currently running on and they were kind of like I",
    "start": "432479",
    "end": "438539"
  },
  {
    "text": "said manual processes to keep that up to date the one exception of that is that we ran our databases in this slightly",
    "start": "438539",
    "end": "445940"
  },
  {
    "text": "non-standard way where we had to my sequel hosts running as active active",
    "start": "445940",
    "end": "451440"
  },
  {
    "text": "master master replication between them meaning each side was available for rights and they would replicate across",
    "start": "451440",
    "end": "459240"
  },
  {
    "text": "them which is a particular design choice that the real reason we did this we were",
    "start": "459240",
    "end": "468270"
  },
  {
    "text": "not dummies we did this as a as a pretty pragmatic approach to get a site availability with the obvious caveat",
    "start": "468270",
    "end": "474930"
  },
  {
    "text": "that we would sacrifice some consistency so every workspace in addition to having one particular numbered pair of my",
    "start": "474930",
    "end": "482219"
  },
  {
    "text": "sequel hosts also had a preferred side that it would try to read and write to and so when everything was up and",
    "start": "482219",
    "end": "487409"
  },
  {
    "text": "functioning every team every workspace would be pinned to one database host with the other side is really just the",
    "start": "487409",
    "end": "493500"
  },
  {
    "text": "backup for replication if anything goes bad though the application would automatically failover to the other side",
    "start": "493500",
    "end": "498630"
  },
  {
    "text": "and yes that did produce some conflict problems and there were some challenges along the way but for the most part this",
    "start": "498630",
    "end": "504120"
  },
  {
    "text": "model basically worked and the site was able to scale accordingly and really",
    "start": "504120",
    "end": "509550"
  },
  {
    "text": "there's kind of two dimensions for why I think this really worked well for slack in 2016 the first is that overall client",
    "start": "509550",
    "end": "516750"
  },
  {
    "text": "model really enabled a very rich real-time feel to the product that I think was a huge part of why slack was",
    "start": "516750",
    "end": "524159"
  },
  {
    "text": "so successful um it really just felt like everything happened right away after users did it messages appeared",
    "start": "524159",
    "end": "529920"
  },
  {
    "text": "reactions appeared it really was a key element of that kind of making the feel",
    "start": "529920",
    "end": "535770"
  },
  {
    "text": "of the messaging product that kind of rich experience even when it came to all of these metadata updates",
    "start": "535770",
    "end": "541730"
  },
  {
    "text": "and then for the backend we didn't have a huge engineering team and five boxes is a pretty simple model to keep in your",
    "start": "541730",
    "end": "548430"
  },
  {
    "text": "head about how things worked and if a particular customer was having a bad day you could figure out very quickly you",
    "start": "548430",
    "end": "555570"
  },
  {
    "text": "know which was the database host I needed to go look at what was the MS message server host that might be on fire you know that kind of debugging and",
    "start": "555570",
    "end": "562110"
  },
  {
    "text": "troubleshooting was you only had three places to look at for what the problem would be and so that really helped the",
    "start": "562110",
    "end": "567330"
  },
  {
    "text": "team focus on building the product and building the user experience that I",
    "start": "567330",
    "end": "572430"
  },
  {
    "text": "think was such a key part of why slack was so successful cool but this is not",
    "start": "572430",
    "end": "578610"
  },
  {
    "text": "2016 this is now 2018 and in the years between them there were some challenges that we ran into which is why that model",
    "start": "578610",
    "end": "585210"
  },
  {
    "text": "kind of no longer worked very well for us there's really two dimensions this",
    "start": "585210",
    "end": "590250"
  },
  {
    "text": "one was the increase in in scale for the site increase in usage and then some pretty fundamental changes in the",
    "start": "590250",
    "end": "596460"
  },
  {
    "text": "product model it's a first scale as you see here we had great growth that growth",
    "start": "596460",
    "end": "602550"
  },
  {
    "start": "598000",
    "end": "598000"
  },
  {
    "text": "has continued to the point that in 2018 we now have more than eight million daily active users for the product more",
    "start": "602550",
    "end": "611700"
  },
  {
    "start": "606000",
    "end": "606000"
  },
  {
    "text": "than seven million of which are connected at any one time this is a peak right off the presses light lean yeah",
    "start": "611700",
    "end": "617220"
  },
  {
    "text": "anyway so that's a lot of people connected to the service and we're hosting organizations of more than 125",
    "start": "617220",
    "end": "624120"
  },
  {
    "text": "thousand users so we've doubled our user base and we've more than 10 times increase the size of the largest",
    "start": "624120",
    "end": "631320"
  },
  {
    "text": "organizations that are using slack and as a result of kind of many of these",
    "start": "631320",
    "end": "636720"
  },
  {
    "text": "scaling challenges as I'll note more in this talk we've adapted our engineering",
    "start": "636720",
    "end": "641760"
  },
  {
    "text": "style we're a bigger team we're a little more ambitious in the types of solutions that were willing to embrace when it",
    "start": "641760",
    "end": "648030"
  },
  {
    "text": "comes to complexity in service of some of these big challenges now the product",
    "start": "648030",
    "end": "655350"
  },
  {
    "start": "653000",
    "end": "653000"
  },
  {
    "text": "model I mentioned before where there was this nice tidy workspace bucketing for all of the interactions in slack that",
    "start": "655350",
    "end": "661230"
  },
  {
    "text": "also started to break down and this was really two phases the first was the introduction of the enterprise product",
    "start": "661230",
    "end": "667740"
  },
  {
    "text": "of slack I'm not sure how many people are aware of this but for large organizations we offer a",
    "start": "667740",
    "end": "672839"
  },
  {
    "text": "version of slack in which you can actually have separate slack workspaces for each subdivision or a geolocation or",
    "start": "672839",
    "end": "680010"
  },
  {
    "text": "other organizational unit within a larger enterprise so that local teams can have their control over their",
    "start": "680010",
    "end": "686430"
  },
  {
    "text": "channels and their preferences and which integrations are added to it but these are all part of an umbrella organization",
    "start": "686430",
    "end": "691550"
  },
  {
    "text": "and so you know Wayne Enterprises can have announcements global channels where",
    "start": "691550",
    "end": "696839"
  },
  {
    "text": "the CEO can disappear okay right now my message is that everybody in the company can see but then you know Wayne security",
    "start": "696839",
    "end": "704579"
  },
  {
    "text": "has their own control over their future but this means that each of those kind of workspaces has its own notion in the",
    "start": "704579",
    "end": "711089"
  },
  {
    "text": "backend has its own database showerheads its own and uh shards and so any Khanum user now no longer belongs to just one",
    "start": "711089",
    "end": "717890"
  },
  {
    "text": "nice organizational bucket at the back end we now have these different contexts to consider is this an organization-wide",
    "start": "717890",
    "end": "723990"
  },
  {
    "text": "channel or is this a local channel and then things get even more interesting with this feature called shared channels",
    "start": "723990",
    "end": "730440"
  },
  {
    "text": "that's currently in beta where you can have two completely separate organizational entities with their own",
    "start": "730440",
    "end": "736529"
  },
  {
    "text": "management under billing and they can create a shared channel between them for collaboration this is really heavily",
    "start": "736529",
    "end": "742380"
  },
  {
    "text": "used by for example design agencies or PR agencies that want to have relationships with multiple customers",
    "start": "742380",
    "end": "747839"
  },
  {
    "text": "where those customers are also using slack and they can communicate within their home spot I've talked to people in",
    "start": "747839",
    "end": "753300"
  },
  {
    "text": "the other company well this really fundamentally blew up a lot of the assumptions that that original",
    "start": "753300",
    "end": "759029"
  },
  {
    "text": "architecture was written kind of written to service because now channels no longer belong necessarily to one",
    "start": "759029",
    "end": "765829"
  },
  {
    "text": "workspace but they're not sharing cases in which you Center how do I do that architectural",
    "start": "765829",
    "end": "771050"
  },
  {
    "text": "model to go take into account the bigger scale and some of these new shifts in",
    "start": "771050",
    "end": "776600"
  },
  {
    "text": "the landscape so like I said that prosperous nation Channel was one",
    "start": "776600",
    "end": "782540"
  },
  {
    "start": "778000",
    "end": "778000"
  },
  {
    "text": "challenge and then just dealing with the scale you know we had all the great war stories that we have eluded to where you",
    "start": "782540",
    "end": "789260"
  },
  {
    "text": "know an action would have been across a large number of customers for one workspace and all the client applications would come back and then",
    "start": "789260",
    "end": "795620"
  },
  {
    "text": "thunder into the back end to hammer it for some data but as we got to bigger and bigger organizations that boot",
    "start": "795620",
    "end": "802010"
  },
  {
    "text": "payloads and I mentioned before got bigger and bigger so we started to have challenges of just getting clients",
    "start": "802010",
    "end": "807110"
  },
  {
    "text": "connected to the site and then this heard of cuts you know it works fine when you have 20 servers it starts to",
    "start": "807110",
    "end": "813740"
  },
  {
    "text": "get bad when you have a hundred if you're getting into hundreds and hundreds of servers just the manual toil that was taking to keep the site up was",
    "start": "813740",
    "end": "820640"
  },
  {
    "text": "just creating on our service engineering operations teams alright so now let's",
    "start": "820640",
    "end": "826040"
  },
  {
    "text": "turn into a little bit of what we did about it and really I'm going to talk about three kind of separate changes to",
    "start": "826040",
    "end": "832250"
  },
  {
    "start": "829000",
    "end": "829000"
  },
  {
    "text": "the service that were really in service of a number of these challenges the first topic we'll talk about is a change",
    "start": "832250",
    "end": "839150"
  },
  {
    "text": "to the client-server model enabled by a cache of a service called flannel that allowing us to really slim down that",
    "start": "839150",
    "end": "844940"
  },
  {
    "text": "initial newspaper until we take a little step back",
    "start": "844940",
    "end": "850160"
  },
  {
    "start": "847000",
    "end": "847000"
  },
  {
    "text": "I did some spelunking in our data warehouse the original artyom start payload was a function of the number of",
    "start": "850160",
    "end": "857690"
  },
  {
    "text": "users in the team with the workspace times how big their profile was how many channels there are how big the topic and",
    "start": "857690",
    "end": "864530"
  },
  {
    "text": "purpose the channel is and then how many people are in that channel times the size of the user ID and I just pick three random",
    "start": "864530",
    "end": "872250"
  },
  {
    "text": "teams three rows or workplaces with different numbers of users and you see",
    "start": "872250",
    "end": "877530"
  },
  {
    "text": "you know every 1000 this is a you know reasonable 7 megabyte Kalyan not great",
    "start": "877530",
    "end": "883380"
  },
  {
    "text": "as you start to get up to you know tens of thousands or 170,000 users the",
    "start": "883380",
    "end": "889410"
  },
  {
    "text": "payload gets to be enormous gets to be you know basically prohibitively expensive for every laptop or iPhone to",
    "start": "889410",
    "end": "895740"
  },
  {
    "text": "pull that full payload down whenever a user wants to get onto the site and let's remember that that's per user so",
    "start": "895740",
    "end": "901830"
  },
  {
    "text": "if I have a hundred thousand users each pulling down 100 you know 100 plus megabytes of data that's just gonna",
    "start": "901830",
    "end": "907230"
  },
  {
    "text": "handle this and so the biggest change we did to address that was the name not the",
    "start": "907230",
    "end": "914280"
  },
  {
    "start": "910000",
    "end": "910000"
  },
  {
    "text": "initial payload to be much much smaller we did that by an introducing an edge",
    "start": "914280",
    "end": "919950"
  },
  {
    "text": "caching service that we call flannel that's deployed throughout winter presents all over the globe close to",
    "start": "919950",
    "end": "926790"
  },
  {
    "text": "clients and then we change the WebSocket connection flow so that after making an initial thin connection to the PHP",
    "start": "926790",
    "end": "933840"
  },
  {
    "text": "application we then connect the WebSocket to a nearby flannel cache oxys the connection to the message proxy and",
    "start": "933840",
    "end": "940170"
  },
  {
    "text": "then to that root pub set that's it sir so as I mentioned flannels a globally",
    "start": "940170",
    "end": "947250"
  },
  {
    "text": "distributed education when clients connect there's a routing tier in each",
    "start": "947250",
    "end": "952710"
  },
  {
    "text": "edge pop that routes a client team with workspace infinity to a flannel cache",
    "start": "952710",
    "end": "957840"
  },
  {
    "text": "that is likely to have the model for that workspace we didn't want to get in the situation which flannel had to have",
    "start": "957840",
    "end": "963000"
  },
  {
    "text": "all the metadata about every customer it's like does that really not scale so so you find next level that's nearby",
    "start": "963000",
    "end": "969570"
  },
  {
    "text": "that has the model for your work this then because it's a proxy for that",
    "start": "969570",
    "end": "976050"
  },
  {
    "text": "socket connection it's actually in mind and able to man in the middle the updates that occur for the users in that",
    "start": "976050",
    "end": "983360"
  },
  {
    "text": "in that workspace until that allows us to take all of those user profiles all",
    "start": "983360",
    "end": "989250"
  },
  {
    "text": "of that channel information how does the initial group end so the things that we're making that the payload huge we just remove them",
    "start": "989250",
    "end": "995100"
  },
  {
    "text": "altogether and then expose the callback query API so the clients could with very low latency fetch unknown information",
    "start": "995100",
    "end": "1002420"
  },
  {
    "text": "from a nearby planet so that allowed us to maintain that really real time and",
    "start": "1002420",
    "end": "1008480"
  },
  {
    "text": "feel to the product where every bit of information you see on the screen actually shows up at medially and it",
    "start": "1008480",
    "end": "1015050"
  },
  {
    "text": "feels like it's instantly there but without having to download all of it to",
    "start": "1015050",
    "end": "1020570"
  },
  {
    "text": "the client to be kind of pre-staged there we allow this kind of really rapid query response to the API to an educated",
    "start": "1020570",
    "end": "1028250"
  },
  {
    "text": "Flamel very close to the users that was able to service those craters and this",
    "start": "1028250",
    "end": "1034308"
  },
  {
    "text": "was hugely successful in allowing us to scale the product to be the larger and larger organizations one thing back in",
    "start": "1034309",
    "end": "1042380"
  },
  {
    "text": "here when we were rolling out planula this was both and operations both are",
    "start": "1042380",
    "end": "1049730"
  },
  {
    "text": "kind of back-end server refactor and then a huge client the clients had",
    "start": "1049730",
    "end": "1054800"
  },
  {
    "text": "expected you know they're written from mainland to expect that the whole model was resident memory and so if you think",
    "start": "1054800",
    "end": "1061130"
  },
  {
    "text": "about taking a you know large JavaScript to our other kind of Swift and the",
    "start": "1061130",
    "end": "1066140"
  },
  {
    "text": "Android code base and now they have to be prepared to make callbacks if an",
    "start": "1066140",
    "end": "1072380"
  },
  {
    "text": "object doesn't exist and so we did this in phases you know it obviously took cooperation and huge uplift from the",
    "start": "1072380",
    "end": "1078470"
  },
  {
    "text": "client teams and the final teams today little an interesting approach we took",
    "start": "1078470",
    "end": "1084289"
  },
  {
    "text": "as part of the initial rollout was because flannel staff has a man in the middle between the back end and the",
    "start": "1084289",
    "end": "1090740"
  },
  {
    "text": "front end and it had this in memory models of all the users it actually have a mode initially where even sniffs the",
    "start": "1090740",
    "end": "1097340"
  },
  {
    "text": "WebSocket messages that were coming across the wire to a different client and if it's saw a user ID or a channel",
    "start": "1097340",
    "end": "1103159"
  },
  {
    "text": "ad than it thought the claims you can have it would just inject that metadata in line to that WebSocket stream so it's",
    "start": "1103159",
    "end": "1109159"
  },
  {
    "text": "kind of ready in the model right before the client component while we went through this long slog of rewriting the",
    "start": "1109159",
    "end": "1114620"
  },
  {
    "text": "clients to expect projects to not necessarily exist the Omegas callback api but with these kind of techniques",
    "start": "1114620",
    "end": "1121580"
  },
  {
    "text": "and place and the kind of long hard work of all the engineers we're able to build",
    "start": "1121580",
    "end": "1126679"
  },
  {
    "text": "this flannel based metadata model that really really really enabled the site to",
    "start": "1126679",
    "end": "1131900"
  },
  {
    "text": "scale to these larger larger and larger customers in organizations the next big",
    "start": "1131900",
    "end": "1139280"
  },
  {
    "text": "change we made is to the native this layer from the WebSocket sack to the back end and this was a really big",
    "start": "1139280",
    "end": "1144799"
  },
  {
    "text": "fundamental rethinking of how we wanted to do our day to day sharks and this is",
    "start": "1144799",
    "end": "1150409"
  },
  {
    "start": "1149000",
    "end": "1149000"
  },
  {
    "text": "stemming mostly from the challenges that we had from continued database hotspots due to the co-locating all of the users",
    "start": "1150409",
    "end": "1157669"
  },
  {
    "text": "and all the channels for an organization onto a single database shower so I just",
    "start": "1157669",
    "end": "1162919"
  },
  {
    "text": "pulled out some of the kind of redacted post-mortem titles from our github repository where you know charge and",
    "start": "1162919",
    "end": "1169669"
  },
  {
    "text": "he's overwhelmed with queries or new features would get rolled out and they",
    "start": "1169669",
    "end": "1174950"
  },
  {
    "text": "would be kind of you know not always blue test they could and so the load would come in",
    "start": "1174950",
    "end": "1180279"
  },
  {
    "text": "and it would just hammered these data big sharks the graph on the left is actually the top hundred databases in",
    "start": "1180279",
    "end": "1186519"
  },
  {
    "text": "terms of daily query time that I just pulled from a random thing back in history and you see the kind of top you",
    "start": "1186519",
    "end": "1193149"
  },
  {
    "text": "know on that particular day one chart is more than five to ten you know five to ten times as busy because all arrested",
    "start": "1193149",
    "end": "1199929"
  },
  {
    "text": "and this would just keep happening someone would do something on a if I'm an organization that we didn't expect",
    "start": "1199929",
    "end": "1205629"
  },
  {
    "text": "maybe provisional whole bunch of movies occurs or delete a bunch of channels with these kind of unexpected sort of",
    "start": "1205629",
    "end": "1212049"
  },
  {
    "text": "feedback which would occur where all the clients would react to that and send all this live to the back end that would",
    "start": "1212049",
    "end": "1217690"
  },
  {
    "text": "just overwhelm our servers and so we knew we needed to do something about this and the observation did at the time",
    "start": "1217690",
    "end": "1223210"
  },
  {
    "text": "was that this workspace scoping was really useful to kind of keep things nice and tidy when you had lots of small",
    "start": "1223210",
    "end": "1230320"
  },
  {
    "text": "organizations using slack because the load would gets spread out and as we started to get bigger and bigger single",
    "start": "1230320",
    "end": "1236109"
  },
  {
    "text": "organizations not started to be a challenge because we were funneling all of the activity from all these users on",
    "start": "1236109",
    "end": "1241899"
  },
  {
    "text": "all these channels down to this one minute a shark that's what we wanted to do was change our charting approach so",
    "start": "1241899",
    "end": "1248529"
  },
  {
    "text": "that you can shard by much more fine-grained objects and accusers were channels and so we'd be able to spread",
    "start": "1248529",
    "end": "1254350"
  },
  {
    "text": "that load out more efficiently to our big data base fleet of that guidance so",
    "start": "1254350",
    "end": "1259720"
  },
  {
    "start": "1259000",
    "end": "1259000"
  },
  {
    "text": "in order to do that we introduced a new data steer and didymus technology to our system that's called the test so the",
    "start": "1259720",
    "end": "1267129"
  },
  {
    "text": "test is rolled out as of a second sort of fully featured data pipeline for the",
    "start": "1267129",
    "end": "1273220"
  },
  {
    "text": "application to use and the test the way it works is that it is it runs my sequel at the court and so",
    "start": "1273220",
    "end": "1281420"
  },
  {
    "text": "it is a sharding and topology management solution that sits on top of my single",
    "start": "1281420",
    "end": "1289180"
  },
  {
    "text": "in the test the application connects to a routing tier called VTA the TK knows",
    "start": "1290900",
    "end": "1296570"
  },
  {
    "text": "the set of tables that are in the configuration it knows which set the back of the servers are hosting those",
    "start": "1296570",
    "end": "1303290"
  },
  {
    "text": "tables and it knows which column a given table is charted that until that allowed",
    "start": "1303290",
    "end": "1309500"
  },
  {
    "text": "us to configure the system such that user scoped tables would be started by the user id channel stroke tables can be",
    "start": "1309500",
    "end": "1316430"
  },
  {
    "text": "charted by a channel ID workspace go to my workspace ID and all of that knowledge is no longer in our PHP code",
    "start": "1316430",
    "end": "1322520"
  },
  {
    "text": "that knowledge is not outsourced to the application and from the PHP code standpoint they look at you know they",
    "start": "1322520",
    "end": "1329210"
  },
  {
    "text": "query et-gay using the bicycle protocol as if there's one giant database that has all the",
    "start": "1329210",
    "end": "1334970"
  },
  {
    "text": "tables and that the ADA is responsible for disseminating and doing all of their routing where necessary it can scatter",
    "start": "1334970",
    "end": "1341690"
  },
  {
    "text": "and gather requests for multiple charts if a given query doesn't necessarily fit it doesn't necessarily get routed to one",
    "start": "1341690",
    "end": "1347600"
  },
  {
    "text": "chart and so that allowed us to efficiently and effectively rule out policy we wanted where data tables would",
    "start": "1347600",
    "end": "1354110"
  },
  {
    "text": "be spread and the multiple servers based on the particulars of that table without needing to do a bunch of application now",
    "start": "1354110",
    "end": "1362600"
  },
  {
    "text": "along the way it has also improved a lot the consistency story and our topology",
    "start": "1362600",
    "end": "1367970"
  },
  {
    "text": "manager so that idea of the active active master master mr. LaBelle no longer applies here in",
    "start": "1367970",
    "end": "1375080"
  },
  {
    "text": "the test we have a single regular master and we rely on Orchestrator open source project on github to man into the family I meant to",
    "start": "1375080",
    "end": "1383420"
  },
  {
    "text": "mention the start the test was originally invented at YouTube as their approach to sharding by sequels and",
    "start": "1383420",
    "end": "1388610"
  },
  {
    "text": "scaling that back-end and we've taken that open source project and adapted it for slack's use now with the tested",
    "start": "1388610",
    "end": "1397100"
  },
  {
    "text": "place weren't able to really effectively scale that data tier and so we now get",
    "start": "1397100",
    "end": "1402380"
  },
  {
    "text": "to the sort of best of both worlds where we are still using my sequel which we have a lot of know-how and a lot of",
    "start": "1402380",
    "end": "1407840"
  },
  {
    "text": "confidence in but we've outsourced that topology management into the test system",
    "start": "1407840",
    "end": "1413300"
  },
  {
    "text": "and the sharding decision and how data is allocated in also into the chest which enabled us to make these",
    "start": "1413300",
    "end": "1419810"
  },
  {
    "text": "transitions and thereby eliminating a lot of the hotspots that we have in our databases now one caveat about this that",
    "start": "1419810",
    "end": "1428540"
  },
  {
    "text": "I want to mention is that the migration from our existing system to the test it's been a little bit slower than I'm",
    "start": "1428540",
    "end": "1435980"
  },
  {
    "text": "gonna play actually become in many ways this is somewhat fundamental because we're changing not only how they did the",
    "start": "1435980",
    "end": "1443000"
  },
  {
    "text": "stored but the particulars of how an application wants to use that data we've just run into the need to kind of go",
    "start": "1443000",
    "end": "1450050"
  },
  {
    "text": "very slowly and carefully to maintain the site and so although we are underway",
    "start": "1450050",
    "end": "1455150"
  },
  {
    "text": "and the testing stuff proven it has everything solid database platform to build upon I think many of",
    "start": "1455150",
    "end": "1460760"
  },
  {
    "text": "us had hoped that this channel sharding project by the government faster we're making good progress I have high",
    "start": "1460760",
    "end": "1466580"
  },
  {
    "text": "confidence to succeed which is actually the project I've been meeting the most of slack so I have a lot of personal stake in this and so it has them",
    "start": "1466580",
    "end": "1474590"
  },
  {
    "text": "successful like I said in maintaining in eliminating a lot of those top box that we had before okay so I know I promised",
    "start": "1474590",
    "end": "1483350"
  },
  {
    "text": "that this talk was not about a transition to micro services I only slightly lied you know there is a part",
    "start": "1483350",
    "end": "1490580"
  },
  {
    "start": "1490000",
    "end": "1490000"
  },
  {
    "text": "of our stack that needed to change and that is this real-time messaging service and really this was motivated by the",
    "start": "1490580",
    "end": "1496340"
  },
  {
    "text": "need to handle these share channels the original message server architecture was very fundamentally built around the idea",
    "start": "1496340",
    "end": "1502820"
  },
  {
    "text": "that a single message server have all of the data around for a given workspace and so I've managed all of the pub/sub",
    "start": "1502820",
    "end": "1509600"
  },
  {
    "text": "interactions for every channel all of the metadata updates for every user and that just isn't gonna fly in the model",
    "start": "1509600",
    "end": "1516080"
  },
  {
    "text": "where a channel no longer belongs solely to one workspace and so we need to do something about we consider a lot of",
    "start": "1516080",
    "end": "1522980"
  },
  {
    "text": "things we can replicate that the shared channel data between the cooperating listed service but the team come",
    "start": "1522980",
    "end": "1529010"
  },
  {
    "text": "together and decided that this was action the case in which decomposing this monolith into a bunch of services",
    "start": "1529010",
    "end": "1534410"
  },
  {
    "text": "did make sense and so in this world we've refactored that message server",
    "start": "1534410",
    "end": "1540140"
  },
  {
    "start": "1536000",
    "end": "1536000"
  },
  {
    "text": "system into five really main cooperating services I feel a little bit like I",
    "start": "1540140",
    "end": "1546530"
  },
  {
    "text": "can't call this micro service but there are five and they all do you serve a separate purpose and this is",
    "start": "1546530",
    "end": "1552870"
  },
  {
    "text": "kind of how they fit into the architecture users connect their WebSocket to process that we knocked on",
    "start": "1552870",
    "end": "1559890"
  },
  {
    "text": "the Gateway server it replaces that message proxy box that I have up there before the Gateway server manages",
    "start": "1559890",
    "end": "1565860"
  },
  {
    "text": "subscriptions to a number of channel servers that are responsible for the call core publish/subscribe system an",
    "start": "1565860",
    "end": "1572990"
  },
  {
    "text": "administrative service tier is responsible for maintaining the cluster topology and then there's a separate",
    "start": "1572990",
    "end": "1578730"
  },
  {
    "text": "present server tier that's really just responsible for distributing good service and say yeah say that again",
    "start": "1578730",
    "end": "1585270"
  },
  {
    "text": "right here each of these services have their own bespoke roles but it turns out we had to keep that legacy message",
    "start": "1585270",
    "end": "1591810"
  },
  {
    "text": "server to your around I'll talk about this a little bit but there's a feature whereby we could schedule messages for",
    "start": "1591810",
    "end": "1598350"
  },
  {
    "text": "broadcast in the future it was used by some of our integrations that turned out to not actually have a great home in our",
    "start": "1598350",
    "end": "1603720"
  },
  {
    "text": "service decomposition so we just kept that in the old tier but it's just running many many fewer of them they're",
    "start": "1603720",
    "end": "1609270"
  },
  {
    "text": "actually much less critical to the operation of the site but so with this",
    "start": "1609270",
    "end": "1614610"
  },
  {
    "text": "refactoring we were able to change the fundamental model in this message server system by decomposing things not by",
    "start": "1614610",
    "end": "1622080"
  },
  {
    "text": "workspace but by chimp and so the overall pub/sub system is now a very",
    "start": "1622080",
    "end": "1627180"
  },
  {
    "text": "generic it's a very generic system in which everything is a channel in the",
    "start": "1627180",
    "end": "1632370"
  },
  {
    "text": "system and that is not just the channels that contain messages in slack but every user has their own channel ID and so if",
    "start": "1632370",
    "end": "1639960"
  },
  {
    "text": "you make an update to your profile that gets fanned out according to a subscription for a given user ID every",
    "start": "1639960",
    "end": "1646050"
  },
  {
    "text": "workspace has profile information that has its own fan out for kind of cross workspace information and",
    "start": "1646050",
    "end": "1651810"
  },
  {
    "text": "some of the service has become much more generic and therefore much simpler to reason about clients then subscribe to",
    "start": "1651810",
    "end": "1658710"
  },
  {
    "text": "the objects of their interest using this much more generic and aggressive so",
    "start": "1658710",
    "end": "1664680"
  },
  {
    "text": "fundamentally this is really let us adapt our real tetanus adjusted to accommodate some of these more shared",
    "start": "1664680",
    "end": "1670890"
  },
  {
    "text": "channel news cases again just like before we subscribe to updates for all the relevant objects we've decomposed",
    "start": "1670890",
    "end": "1677910"
  },
  {
    "text": "the service and to clear responsibilities this was not Tibetan see those comments before this actually",
    "start": "1677910",
    "end": "1684840"
  },
  {
    "text": "was a micro service refactor in the service of computer science and not for developer philosophy it's actually the",
    "start": "1684840",
    "end": "1690660"
  },
  {
    "text": "same development team that works on all these but this was really a goal of refactoring this to enable the",
    "start": "1690660",
    "end": "1696150"
  },
  {
    "text": "architecture to better meet the needs of the site as opposed to anything around kind of independent development now one",
    "start": "1696150",
    "end": "1703830"
  },
  {
    "text": "thing that emerge from this is a a given user no longer dependence on just one",
    "start": "1703830",
    "end": "1709830"
  },
  {
    "text": "message server being available in fact I as a user might be to subscribe to tens",
    "start": "1709830",
    "end": "1714900"
  },
  {
    "text": "hundreds of channels hundreds more user channels and so one of the elements of this that ended up happening was the",
    "start": "1714900",
    "end": "1721650"
  },
  {
    "text": "failures of the service ended up being much more widespread and so we've designed some additional systems to",
    "start": "1721650",
    "end": "1726930"
  },
  {
    "text": "ring-fence sort of some of the cascading failures because now each user is not",
    "start": "1726930",
    "end": "1732090"
  },
  {
    "text": "the kind many more of the back-end servers so we lost a little bit of the failure isolation that we had very naturally in",
    "start": "1732090",
    "end": "1739250"
  },
  {
    "text": "the workspace sharted model I'll talk about that a little bit later we get to some of the themes these changes but",
    "start": "1739250",
    "end": "1746900"
  },
  {
    "text": "overall these three fundamental we were three kind of fundamental changes in the slack architecture have really helped us",
    "start": "1746900",
    "end": "1753080"
  },
  {
    "text": "and enabled us to scale to the needs of our site right now both from the standpoint of scale as",
    "start": "1753080",
    "end": "1760760"
  },
  {
    "text": "well as the point of the user requirements on the product okay so",
    "start": "1760760",
    "end": "1767390"
  },
  {
    "text": "looking at some of these few things there are a few things that I thought would be worth to polygon has kind of",
    "start": "1767390",
    "end": "1773000"
  },
  {
    "text": "cross-cutting pass backs and this changes the first was that we've really",
    "start": "1773000",
    "end": "1778549"
  },
  {
    "start": "1776000",
    "end": "1776000"
  },
  {
    "text": "moved away from this concept of our heard of the pets in many in all of these systems actually we no longer have",
    "start": "1778549",
    "end": "1785440"
  },
  {
    "text": "hand to being servers that are individually replaced by humans when they fail instead the the services that",
    "start": "1785440",
    "end": "1794929"
  },
  {
    "text": "contribute to this overall architecture self-register in the service match other services are responsible for discovering",
    "start": "1794929",
    "end": "1801799"
  },
  {
    "text": "them and that's really enabled our operations team to have much less manual toil the other guy we now have a much",
    "start": "1801799",
    "end": "1808490"
  },
  {
    "text": "harder dependency on our service and our distribution system we use pencil no comment we we have some",
    "start": "1808490",
    "end": "1818170"
  },
  {
    "text": "challenges because although we're working through it but really it's been a big change in the way that you think about kind of the dependency tree for",
    "start": "1818170",
    "end": "1824950"
  },
  {
    "text": "the site has this much bigger kind of need on this topology management and service discovery system and then Holly",
    "start": "1824950",
    "end": "1832480"
  },
  {
    "text": "Hollander talked yesterday about on co-op black really touched on this third bullet if you didn't see her talk my",
    "start": "1832480",
    "end": "1838810"
  },
  {
    "text": "encouragement about the video but when we changed when we introduced these new architectural components as the",
    "start": "1838810",
    "end": "1845920"
  },
  {
    "text": "engineering team approved this actually was a big contributing factor to how we had to change the concept of service",
    "start": "1845920",
    "end": "1851170"
  },
  {
    "text": "leadership a non-qualified before those five boxes were really easy to think",
    "start": "1851170",
    "end": "1856480"
  },
  {
    "text": "about so anybody can kind of jump into the bug and diagnose the system with all",
    "start": "1856480",
    "end": "1861490"
  },
  {
    "text": "of this refactoring these more complicated services we actually needed much more specialized knowledge to both",
    "start": "1861490",
    "end": "1867550"
  },
  {
    "text": "isolate and then debug and diagnose the problems and so the kind of engineering culture then the concept of service of",
    "start": "1867550",
    "end": "1873670"
  },
  {
    "text": "ownership really followed the architectural design it's almost the universe of Conway's law we're kinda we",
    "start": "1873670",
    "end": "1879250"
  },
  {
    "text": "did this thing and then we needed to adopt our architectural or organizational design to match the architecture",
    "start": "1879250",
    "end": "1885990"
  },
  {
    "start": "1887000",
    "end": "1887000"
  },
  {
    "text": "I mention before how this fine-grain sharding really did help it help to leave in a ton of the local identity",
    "start": "1887140",
    "end": "1893590"
  },
  {
    "text": "servers but we really did start to get into some of these challenges when there were operations that no longer really",
    "start": "1893590",
    "end": "1901330"
  },
  {
    "text": "round everything a single chart I only do this before about the subscriptions that a given user has for all of the",
    "start": "1901330",
    "end": "1907690"
  },
  {
    "text": "channels and all of the users in their organizations but it applies also to the database yet there are certain cases in",
    "start": "1907690",
    "end": "1913210"
  },
  {
    "text": "which you actually do need to get the information about a whole bunch of channels for example to render that",
    "start": "1913210",
    "end": "1918250"
  },
  {
    "text": "sidebar really like it's a complicated thing respect to do you have to figure out all the channels you're in with the",
    "start": "1918250",
    "end": "1924669"
  },
  {
    "text": "last message you read in that channel and what the last message that was written in that channel there's no brain way to sharp that in a way that's both",
    "start": "1924669",
    "end": "1931360"
  },
  {
    "text": "scoped to you kind of what if I subscribe to and spoke to the channel what does that run written that in that",
    "start": "1931360",
    "end": "1936640"
  },
  {
    "text": "channel and so we've had to adopt the site and adapt the service to accommodate the fact that as part of",
    "start": "1936640",
    "end": "1943000"
  },
  {
    "text": "Augean might be to get a whole bunch of data from a bunch of different charts one of the person that we've done for",
    "start": "1943000",
    "end": "1949510"
  },
  {
    "text": "that is actually relaxing some of the consistency requirements and in adopted the clients to accept partial results",
    "start": "1949510",
    "end": "1956080"
  },
  {
    "text": "and so that means that when the client was to fetch that information it can bound how much time it's willing to wait",
    "start": "1956080",
    "end": "1961840"
  },
  {
    "text": "for me shark and if it exceeds that threshold we will return whatever information we can in the client and",
    "start": "1961840",
    "end": "1967090"
  },
  {
    "text": "trust that they will call back again later to fill in the gaps on that missing information it's a Mis behemoth of being able to",
    "start": "1967090",
    "end": "1974190"
  },
  {
    "text": "prepare for potential unavailability has really helped us still accommodate that",
    "start": "1974190",
    "end": "1979360"
  },
  {
    "text": "scattered these case without making every client and every action depend on every",
    "start": "1979360",
    "end": "1984850"
  },
  {
    "text": "back-end server she's pretty bad for resiliency ability and also for performance because the slowness charge",
    "start": "1984850",
    "end": "1991930"
  },
  {
    "text": "is always the slowest sharp and so if I have to talk to 100 then all of my operations are as slow as the hundreds",
    "start": "1991930",
    "end": "1997510"
  },
  {
    "text": "slow she'll know one thing that hasn't really occurred to me before making this",
    "start": "1997510",
    "end": "2003750"
  },
  {
    "start": "1999000",
    "end": "1999000"
  },
  {
    "text": "slight leg is just how few boxes I actually removed from the architectural diagram that I showed you before so with",
    "start": "2003750",
    "end": "2010350"
  },
  {
    "text": "only one exception everything that was on there in 2016 is actually still part of our productions back today there's a",
    "start": "2010350",
    "end": "2017130"
  },
  {
    "text": "bunch of reasons for this legacy clients are one reason their client doesn't still connect not through the flannel",
    "start": "2017130",
    "end": "2023100"
  },
  {
    "text": "path because they're either a third party integration or some old Windows Phone sitting out there somewhere that we still support you do support this",
    "start": "2023100",
    "end": "2031080"
  },
  {
    "text": "phone and then and then to this before",
    "start": "2031080",
    "end": "2036420"
  },
  {
    "text": "about the database migrations those interested they take time we have terabytes and terabytes of data lots",
    "start": "2036420",
    "end": "2042059"
  },
  {
    "text": "hike ups until making sure that migration can be done safely when you're trying to both recharge the data change",
    "start": "2042059",
    "end": "2048240"
  },
  {
    "text": "the data model and in many cases we've suffered from a little bit of a second system defect where we have a table it",
    "start": "2048240",
    "end": "2054480"
  },
  {
    "text": "works one way we have a long tail of things we've always wanted to do on that table boy wouldn't it be nice to couple",
    "start": "2054480",
    "end": "2060270"
  },
  {
    "text": "those new features with the data migrations we have to do right now anyway and so that's actually caused a",
    "start": "2060270",
    "end": "2065429"
  },
  {
    "text": "little bit of attention in how aggressively we move the data off those legacy shards into this new system the",
    "start": "2065429",
    "end": "2073560"
  },
  {
    "start": "2073000",
    "end": "2073000"
  },
  {
    "text": "other thing I feel like really important to find out is how these really grand architectural",
    "start": "2073560",
    "end": "2079799"
  },
  {
    "text": "refactorings I really useful they were essential for us to be able to manage the growth of the site but there's also",
    "start": "2079799",
    "end": "2086638"
  },
  {
    "text": "been hundreds of little kind of little supercritical not so glamorous",
    "start": "2086639",
    "end": "2091679"
  },
  {
    "text": "performance capable changes that we've done in the back-end system as we've seen various hot spots come through so",
    "start": "2091679",
    "end": "2098760"
  },
  {
    "text": "again it's true they needed a lot of these three factors but things like adding additional captioning removing",
    "start": "2098760",
    "end": "2105480"
  },
  {
    "text": "expensive database queries those are hugely important to getting these kind of you know parade of oh my god things",
    "start": "2105480",
    "end": "2112079"
  },
  {
    "text": "are terrible - oh great kind of things one pattern isn't really important to us",
    "start": "2112079",
    "end": "2118380"
  },
  {
    "text": "is adding jitter to our client operations to avoid some of these thundering herd's there have been those",
    "start": "2118380",
    "end": "2124740"
  },
  {
    "text": "of us who describe the basics flat client has a nice lead organs commanding",
    "start": "2124740",
    "end": "2129869"
  },
  {
    "text": "control botnet because it is sitting out there is very efficient pub/sub system just waiting to take commands from the",
    "start": "2129869",
    "end": "2136770"
  },
  {
    "text": "backend and sometimes those commands cause it to go turn on and das our system and so one of the patterns that",
    "start": "2136770",
    "end": "2143160"
  },
  {
    "text": "we've needed to do is really look at that thinking about operations where you know if we did them have a hundred",
    "start": "2143160",
    "end": "2148829"
  },
  {
    "text": "thousand or millions of people at a time what would it actually do and then spread those out over time a simple",
    "start": "2148829",
    "end": "2154470"
  },
  {
    "text": "jitter or delays or deferring actions that might not have to do that kind of cooperation between the client side and",
    "start": "2154470",
    "end": "2161180"
  },
  {
    "text": "the server side for us at least has proven really essential to come in keeping the site moving as we've been",
    "start": "2161180",
    "end": "2166460"
  },
  {
    "text": "making these bigger more sweeping changes to the overall architecture so",
    "start": "2166460",
    "end": "2173150"
  },
  {
    "start": "2172000",
    "end": "2172000"
  },
  {
    "text": "in general this is the picture that - this is the nice happy picture than we are now it's more complicated for sure",
    "start": "2173150",
    "end": "2179720"
  },
  {
    "text": "but many of in fact all of these changes were super important for us to be able to both meet the big-scale demands of",
    "start": "2179720",
    "end": "2186410"
  },
  {
    "text": "our customers and accommodate these new shared channels these cases that complicated involved we're not doing yet",
    "start": "2186410",
    "end": "2194450"
  },
  {
    "text": "I thought that we were talking about some other things we haven't done and some of the things that maybe future",
    "start": "2194450",
    "end": "2199460"
  },
  {
    "text": "slack employees might talk about but I felt like I had to put up this services",
    "start": "2199460",
    "end": "2206150"
  },
  {
    "text": "you can post my one thing we do so how to drive you monolith we suffer from some of the challenges at a large",
    "start": "2206150",
    "end": "2212060"
  },
  {
    "text": "engineering organization kind of working on that model to code and they're in some you know some efforts and thinking",
    "start": "2212060",
    "end": "2218300"
  },
  {
    "text": "about how they wanted you can post that much a long ones what the great folks who preceded me in this room talked it",
    "start": "2218300",
    "end": "2223940"
  },
  {
    "text": "up at some point we will be in multiple storage backends we'll need to figure that out that these synchronous chopped",
    "start": "2223940",
    "end": "2230810"
  },
  {
    "text": "you now I wish there's just some really good room for improvement there again continuing on",
    "start": "2230810",
    "end": "2237599"
  },
  {
    "text": "the scale and resiliency features of the product and then this this whole vector",
    "start": "2237599",
    "end": "2242790"
  },
  {
    "text": "and eventually consistency is going to be super important to future scaling in stock where the more that we can adapt",
    "start": "2242790",
    "end": "2248520"
  },
  {
    "text": "the client so that it still has that real-time feel for the things that really need to be real-time that is able",
    "start": "2248520",
    "end": "2253650"
  },
  {
    "text": "to tolerate some latency or some lag in the back end because I think it's been a super important for us to continue to",
    "start": "2253650",
    "end": "2259950"
  },
  {
    "text": "have the kind of gradual become important so I hope this is interesting I think I'm up for time for questions",
    "start": "2259950",
    "end": "2266250"
  },
  {
    "text": "than I thought I would in the practice so let's rush [Applause]",
    "start": "2266250",
    "end": "2274609"
  }
]