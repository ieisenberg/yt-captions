[
  {
    "start": "0",
    "end": "113000"
  },
  {
    "text": "[Music]",
    "start": "0",
    "end": "5250"
  },
  {
    "text": "[Music] so as I was saying before I'm Kyle Simpson I'm a JavaScript architect I do a lot of web performance optimization",
    "start": "7550",
    "end": "14360"
  },
  {
    "text": "things of that nature we're going to be talking today about HTML 5 and JavaScript and I'm going to call those",
    "start": "14360",
    "end": "19920"
  },
  {
    "text": "HTML 5 and friends because I actually don't really care what label you put on it or what spec it's in the point is HML",
    "start": "19920",
    "end": "25960"
  },
  {
    "text": "5 is is sort of ushered in this open thing uh I have a book that has several",
    "start": "25960",
    "end": "31039"
  },
  {
    "text": "chapters about things that we're talking about today this talk goes more in depth from what the book is but if you want to go and reference that o d is a discount",
    "start": "31039",
    "end": "38160"
  },
  {
    "text": "code will get you 50% off of that book so if you're interested go grab",
    "start": "38160",
    "end": "43200"
  },
  {
    "text": "that all right today the talk that I'm going to give is about building a game",
    "start": "43200",
    "end": "48680"
  },
  {
    "text": "this is not a talk about game mechanics or anything like that we're going to focus on the raw underlying HTML 5",
    "start": "48680",
    "end": "53879"
  },
  {
    "text": "JavaScript apis that I weave together I I was tired even in the book I was tired of having each of the these different",
    "start": "53879",
    "end": "60320"
  },
  {
    "text": "apis represented by these small little toy examples and I wanted one coherent application that I could build from",
    "start": "60320",
    "end": "66360"
  },
  {
    "text": "scratch and weave in all these different Advanced apis together and this game is what I came up with so it is not um like",
    "start": "66360",
    "end": "75040"
  },
  {
    "text": "I said it's not a talk about how great uh my game mechanics are but this game is called we puzzle it is a multiplayer",
    "start": "75040",
    "end": "82119"
  },
  {
    "text": "online um puzzle solving game you upload images it slices them up into tiles and then you compete and cooperate with each",
    "start": "82119",
    "end": "88360"
  },
  {
    "text": "other to uh get the the tiles in the right spot to solve the jigsaw puzzle get points for how quickly you do so um",
    "start": "88360",
    "end": "95799"
  },
  {
    "text": "and so we will later on you'll be able to see that and hopefully if the Wi-Fi holds up we'll be able to play it all",
    "start": "95799",
    "end": "101520"
  },
  {
    "text": "the code that I'm talking about today is up on GitHub again all you need is the orange part um but if you just go to",
    "start": "101520",
    "end": "108280"
  },
  {
    "text": "GitHub and search for getify you'll be able to find the we puzzle it game all right so the first part of this",
    "start": "108280",
    "end": "114640"
  },
  {
    "text": "talk we're going to talk about some sort of so some of the lower level simpler apis and these are the gateway drugs",
    "start": "114640",
    "end": "121079"
  },
  {
    "text": "that I want to get you hooked on HTML 5 JavaScript uh get you kind of Addicted by the end of this talk so the first",
    "start": "121079",
    "end": "127119"
  },
  {
    "text": "things that we'll talk about local storage session storage History app cache and canvas all right so local storage and",
    "start": "127119",
    "end": "134800"
  },
  {
    "start": "133000",
    "end": "233000"
  },
  {
    "text": "session storage um persist data inside of the users's web",
    "start": "134800",
    "end": "140080"
  },
  {
    "text": "browser um more better better than say cookies do um because it gives you a",
    "start": "140080",
    "end": "145680"
  },
  {
    "text": "dedicated location usually about 5 megabytes per website gives you a dedicated location to store key value pairs of data similar",
    "start": "145680",
    "end": "153319"
  },
  {
    "text": "to how you might do it in a nosql database or something like that so you can see here we have very simple API and",
    "start": "153319",
    "end": "159080"
  },
  {
    "text": "it's the same for both session storage and for local storage it's get item to grab it out by its key set item to put",
    "start": "159080",
    "end": "165159"
  },
  {
    "text": "it in by its key remove item to delete it it's pretty straightforward um I use this in the application to um do some",
    "start": "165159",
    "end": "172560"
  },
  {
    "text": "very simple things like persisting on the login form which you'll see later when you see the login form and you see",
    "start": "172560",
    "end": "178120"
  },
  {
    "text": "a place for a name and an email I I use the local storage to remember that after the first time you've typed that in so",
    "start": "178120",
    "end": "183239"
  },
  {
    "text": "you don't have to keep retyping that in I use the session storage to preserve the connection information so that I can",
    "start": "183239",
    "end": "189400"
  },
  {
    "text": "reestablish the socket if you refresh the page or or something of that nature so session storage like it says it's",
    "start": "189400",
    "end": "195959"
  },
  {
    "text": "dealing with the session that's happening inside the browser tab local storage will last for much much longer",
    "start": "195959",
    "end": "201519"
  },
  {
    "text": "you do want to be careful with something like local storage because if you start storing a bunch of data there and you never clean up after yourselves and the",
    "start": "201519",
    "end": "207920"
  },
  {
    "text": "user isn't cleaning up you can actually pollute a lot of data into their system some browsers don't clean out local",
    "start": "207920",
    "end": "214159"
  },
  {
    "text": "storage um the same way that they clean out temporary internet files so be careful with that but as you can see",
    "start": "214159",
    "end": "220640"
  },
  {
    "text": "it's pretty straightforward uh on line 37 I use json. stringify because I'm pushing in string value so local storage",
    "start": "220640",
    "end": "227200"
  },
  {
    "text": "and session storage store string values but you can do structured by uh Json",
    "start": "227200",
    "end": "232640"
  },
  {
    "text": "serialization next let's talk about the history API how many of you have been familiar with or pissed off about those",
    "start": "232640",
    "end": "240200"
  },
  {
    "start": "233000",
    "end": "318000"
  },
  {
    "text": "hashbang URLs the ones like Twitter has and so forth okay yeah hashbang URL is kind of the bane of our existence they",
    "start": "240200",
    "end": "246439"
  },
  {
    "text": "were invented as a hack to solve the problem that for years and like a decade or more we didn't have what we actually",
    "start": "246439",
    "end": "253040"
  },
  {
    "text": "needed in by way of javascript's ability to manage the history cue of your",
    "start": "253040",
    "end": "258440"
  },
  {
    "text": "browser the backward and forward cue we didn't have what we needed and so we invented all these ridiculous hacks to",
    "start": "258440",
    "end": "263880"
  },
  {
    "text": "get around those problems in particular what we wanted is to be able to change the url of the browser so that there was",
    "start": "263880",
    "end": "268960"
  },
  {
    "text": "some sort of State preservation in the address bar but we didn't want that to cause a whole new page refresh the",
    "start": "268960",
    "end": "274960"
  },
  {
    "text": "awesome part is that HTML 5 came along and said let's go ahead and pave that Cal path let's go ahead and give them",
    "start": "274960",
    "end": "280560"
  },
  {
    "text": "that functionality they've been needing and let's do so in a structured way so we have a a set of extensions to our",
    "start": "280560",
    "end": "286840"
  },
  {
    "text": "existing history capability there is a wrapper called history.js I highly recommend using polyfills and and um",
    "start": "286840",
    "end": "294199"
  },
  {
    "text": "other things like that when you can history.js is awesome because it does fall back to the old behavior in older",
    "start": "294199",
    "end": "299320"
  },
  {
    "text": "browser is for you so you don't have to think about it but you can see on line 38 I'm using their I'm binding I'm",
    "start": "299320",
    "end": "304800"
  },
  {
    "text": "listening for the state change that tells me when the user clicks the backward and forward button when when",
    "start": "304800",
    "end": "310240"
  },
  {
    "text": "they do that I get a state change and that allows me to respond and load up the contents of the page in my single",
    "start": "310240",
    "end": "315360"
  },
  {
    "text": "page app the way I would want to and then you can see here replace State and push State that's how we",
    "start": "315360",
    "end": "322039"
  },
  {
    "text": "manage that cue so replace state does what it sounds takes the existing entry in the address bar the existing entry in",
    "start": "322039",
    "end": "330039"
  },
  {
    "text": "the address bar as well as in the backward forward queue it takes that existing entry and overwrites it so I use this in the login page for instance",
    "start": "330039",
    "end": "336440"
  },
  {
    "text": "the login page of the app once you have logged in there's no reason for that login page to be in your backward forward cache because you're never going",
    "start": "336440",
    "end": "342840"
  },
  {
    "text": "to want to go back to that login page just to be redirected so I after you're done with the login page the next page",
    "start": "342840",
    "end": "348759"
  },
  {
    "text": "you go to I go ahead and replace that with the new page that you've gone to thereby removing login from the queue",
    "start": "348759",
    "end": "354120"
  },
  {
    "text": "push State on the other hand pushes it in creates a new entry and that creates a navigable and as as you see if you",
    "start": "354120",
    "end": "360840"
  },
  {
    "text": "play around the game later you'll see how it's a single page app but it does actually manage the address bar with",
    "start": "360840",
    "end": "366599"
  },
  {
    "text": "index.html and other types of you know exactly like you would expect but it's not making full page requests the reason",
    "start": "366599",
    "end": "372400"
  },
  {
    "text": "I do that is because there's a socket connection for this game and I don't want to reestablish that socket unnecessarily every page load so use a",
    "start": "372400",
    "end": "379240"
  },
  {
    "text": "single page um application concept and uh we use history API to manage it a lot",
    "start": "379240",
    "end": "387360"
  },
  {
    "text": "better next we'll talk about appcache I'm not a huge fan of appcash and uh there's actually a talk that was just",
    "start": "387360",
    "end": "393400"
  },
  {
    "start": "388000",
    "end": "496000"
  },
  {
    "text": "recently given you should definitely go look up appcash douchebag um it's an",
    "start": "393400",
    "end": "399039"
  },
  {
    "text": "awesome talk uh go and Google that um uh basically appcash has a lot of",
    "start": "399039",
    "end": "406199"
  },
  {
    "text": "problems it has a lot of promise and it has a lot of problems and I do not use this you can see in my little to-do note",
    "start": "406199",
    "end": "412039"
  },
  {
    "text": "I do not use this yet in the application because I'm still under development I would highly suggest that you not use",
    "start": "412039",
    "end": "418280"
  },
  {
    "text": "appcash until your application is basically done because it's a real pain in the butt uh to uh to deal with",
    "start": "418280",
    "end": "425680"
  },
  {
    "text": "clearing out that app cach or always updating a file um I'm not going to spend a whole lot of time talking about all the problems of appcash but I will",
    "start": "425680",
    "end": "432039"
  },
  {
    "text": "talk about the JavaScript API that it gives us that helps smooth out some of those problems so the the main concern",
    "start": "432039",
    "end": "438120"
  },
  {
    "text": "that we have is that when uh an application is AB cached it's really persistently cached and even if you",
    "start": "438120",
    "end": "443800"
  },
  {
    "text": "update the files uh a user doesn't necessarily get notified and and even on a refresh they don't get those files",
    "start": "443800",
    "end": "449560"
  },
  {
    "text": "files and even if you take the extra step of updating your manifest file which is what you have to do to notify",
    "start": "449560",
    "end": "455000"
  },
  {
    "text": "the Bri now it takes two page refreshes before the user actually gets those files so like I said it's really really",
    "start": "455000",
    "end": "461479"
  },
  {
    "text": "persistent caching for the offline um use cases and so forth so the JavaScript",
    "start": "461479",
    "end": "466800"
  },
  {
    "text": "API helps us deal with that a little bit inside of the running of the page and I might hook this up on an interval in my",
    "start": "466800",
    "end": "472039"
  },
  {
    "text": "application or you may have it as an on demand button but inside I can tell the browser go and ask if the Manifest file",
    "start": "472039",
    "end": "477840"
  },
  {
    "text": "is updated and if it has been updated go ahead and fetch all those contents in the background and then I can listen for",
    "start": "477840",
    "end": "484039"
  },
  {
    "text": "when that update finishes and I can prompt the user and say hey there's new files would you like to go ahead and refresh so we get those new files so",
    "start": "484039",
    "end": "490560"
  },
  {
    "text": "that Smooths things out to one page refresh instead of the ugly two that users normally have to",
    "start": "490560",
    "end": "496120"
  },
  {
    "start": "496000",
    "end": "531000"
  },
  {
    "text": "do uh canvas this is a screenshot of a part of the game and what I want you to notice it may be hard to see for some of",
    "start": "496120",
    "end": "502560"
  },
  {
    "text": "you in the back but what I want you notice is the slight grid effect that I have overlaid on top of this image This",
    "start": "502560",
    "end": "507840"
  },
  {
    "text": "creepy clown that I've upd uploaded um I have a difficulty selector down at the B bottom and so if you select hard",
    "start": "507840",
    "end": "513880"
  },
  {
    "text": "it makes smaller tiles and more of them but I wanted an effect to Overlay the Grid on top of the image to show you",
    "start": "513880",
    "end": "519680"
  },
  {
    "text": "where those slices are going to be made but I didn't want to do so in sort of the ugly way of just drawing lines and canvas gave us a couple of interesting",
    "start": "519680",
    "end": "526480"
  },
  {
    "text": "Advanced features to allow us to accomplish that so we'll take a look at that code the first thing is that I can take",
    "start": "526480",
    "end": "533240"
  },
  {
    "start": "531000",
    "end": "661000"
  },
  {
    "text": "an image inside of an IM image element or um you know well basically inside of",
    "start": "533240",
    "end": "538600"
  },
  {
    "text": "an image element or a canvas element or a video element but I can draw that image into a canvas using the draw image",
    "start": "538600",
    "end": "545040"
  },
  {
    "text": "command and it has a variety of um different ways that the parameters can be used but if you take a look at U the",
    "start": "545040",
    "end": "551920"
  },
  {
    "text": "specification for it you can see it's pretty straightforward what these parameters are the original XY width and",
    "start": "551920",
    "end": "557440"
  },
  {
    "text": "height and then the new XY width and height it's what that boils down to but we draw from an image element into the",
    "start": "557440",
    "end": "564160"
  },
  {
    "text": "canvas and then I get the image data back out of the canvas as a data URL",
    "start": "564160",
    "end": "569200"
  },
  {
    "text": "what what's awesome about this is I now have I I've used the canvas's power of its resampling and resizing and cropping",
    "start": "569200",
    "end": "575640"
  },
  {
    "text": "off of my image so that I have it in a in a whatever image you've uploaded I've got a predictable um image ratio if you",
    "start": "575640",
    "end": "582320"
  },
  {
    "text": "will and and now I've got it right back inside of an image tag as a data URL without any trans you know transfer over",
    "start": "582320",
    "end": "589600"
  },
  {
    "text": "to the server and asking it to do it with PHP or anything like that it's happened right inside the browser with two commands draw image and two data URL",
    "start": "589600",
    "end": "597120"
  },
  {
    "text": "and I find in the work that I do with canvas I do this a lot I trade back and forth between images and canvases back",
    "start": "597120",
    "end": "602760"
  },
  {
    "text": "and forth and it's incredibly fast very efficient um and they these two functions make it very easy to",
    "start": "602760",
    "end": "608880"
  },
  {
    "text": "do the next thing is I wanted to so now that I've got a predictable image now I",
    "start": "608880",
    "end": "614240"
  },
  {
    "text": "want to be able to draw that grid so the first thing is I can't actually use lines because I'm going to use clipping",
    "start": "614240",
    "end": "619640"
  },
  {
    "text": "masks and in canvas unfortunately a line can't participate in a clipping mask but if I do a rect a rectangle that's the",
    "start": "619640",
    "end": "626720"
  },
  {
    "text": "shape of a line just two pixels wide then it will participate in a clipping mask you can see I don't have an arrow",
    "start": "626720",
    "end": "633079"
  },
  {
    "text": "to it but on line 349 context. clip so what I've done is drawn the grid and made the grid a clipping mask and then I",
    "start": "633079",
    "end": "640399"
  },
  {
    "text": "set a global composite operation to lighter and a global Alpha to 7 and then I draw that image on back onto itself",
    "start": "640399",
    "end": "648399"
  },
  {
    "text": "twice on top of that that grid mask so it only lightens the areas where the",
    "start": "648399",
    "end": "653440"
  },
  {
    "text": "grid was clipped and not the rest of the image and that's how I achieved that uh effect of overlaying the grid on top of",
    "start": "653440",
    "end": "659800"
  },
  {
    "text": "the image another way that I use canvas is I take the big image that you've uploaded",
    "start": "659800",
    "end": "665320"
  },
  {
    "start": "661000",
    "end": "718000"
  },
  {
    "text": "and I slice it up and I didn't want to do a bunch of JavaScript on the server necessarily for that although there are",
    "start": "665320",
    "end": "671760"
  },
  {
    "text": "ways to do that in node you can use a canvas emulator on on node and I could have done it there but I've got canvas",
    "start": "671760",
    "end": "677440"
  },
  {
    "text": "inside of the browser you've already uploaded it locally into the browser so why not go ahead and do all the slicing inside of the browser so that's what I",
    "start": "677440",
    "end": "683600"
  },
  {
    "text": "do you can see here that this is these are the tiles once you're starting to play the game these are the tiles of the",
    "start": "683600",
    "end": "688760"
  },
  {
    "text": "image already sliced up but these are all image elements they're not individual canvas elements so how do I",
    "start": "688760",
    "end": "694200"
  },
  {
    "text": "get all the individual data uis for those and unsurprisingly I just use draw image I Loop through and grab all those",
    "start": "694200",
    "end": "701360"
  },
  {
    "text": "tiles one at a time from the original canvas into image elements so it's pretty straightforward",
    "start": "701360",
    "end": "707839"
  },
  {
    "text": "and it gives you a lot of power and then I push it right back in creating image elements using the two data URL as I",
    "start": "707839",
    "end": "712959"
  },
  {
    "text": "said you do a lot of trading back and forth at least in my coding patterns okay so that's kind of an",
    "start": "712959",
    "end": "719560"
  },
  {
    "start": "718000",
    "end": "751000"
  },
  {
    "text": "introduction to some of the maybe more basic stuff that HTML 5 JavaScript gives us now we're really going to get",
    "start": "719560",
    "end": "725079"
  },
  {
    "text": "addicted to some hardcore stuff this is the part that I really have the most fun with um so we're going to take a look at",
    "start": "725079",
    "end": "730680"
  },
  {
    "text": "Dragon drop that's native Dragon doop of course you can always still emulate and sometimes you do have to uh we've got",
    "start": "730680",
    "end": "736440"
  },
  {
    "text": "local file access that's reading local files we've got xr2 which is a whole bunch of extensions the one we'll talk",
    "start": "736440",
    "end": "742920"
  },
  {
    "text": "about is actually being able to upload the file contents directly using an Ajax request websockets using socket.io and",
    "start": "742920",
    "end": "749480"
  },
  {
    "text": "then web workers so native drag and drop uh allows you to take an element and say",
    "start": "749480",
    "end": "755040"
  },
  {
    "start": "751000",
    "end": "814000"
  },
  {
    "text": "this element is draggable and I want you to be able to drag it around the page that's not particularly interesting and",
    "start": "755040",
    "end": "760199"
  },
  {
    "text": "we've had that for a decade what's really interesting and we haven't had for a long time we haven't had until",
    "start": "760199",
    "end": "765519"
  },
  {
    "text": "just recently is the ability to drag an image off of your desktop directly into a web application and that's what I'm",
    "start": "765519",
    "end": "770800"
  },
  {
    "text": "showing here I've got an element on the page that I basically make uh a drop zone I say it's okay in this drop zone",
    "start": "770800",
    "end": "778199"
  },
  {
    "text": "for you to drop elements and then I can drag it directly off of the browser you know off of the desktop onto my browser",
    "start": "778199",
    "end": "784760"
  },
  {
    "text": "and drop it there you can see and when you play around this you'll see that I can actually that that thing only turns",
    "start": "784760",
    "end": "790279"
  },
  {
    "text": "green when you are dropping an image file and so I'm able to tell what kind of file it is you're about to drop and",
    "start": "790279",
    "end": "795800"
  },
  {
    "text": "only allow image files and things like that you can even check the image size to make sure it's not too big um other",
    "start": "795800",
    "end": "802199"
  },
  {
    "text": "things like that so you can get a whole lot of functionality that would have been basically impossible in web apps you would have had to use Java applets",
    "start": "802199",
    "end": "808199"
  },
  {
    "text": "or other things like that this is built into the browser and it's only a few lines of code so we'll just briefly look",
    "start": "808199",
    "end": "813760"
  },
  {
    "text": "at that so here I'm I've got file drop zone line 884 file Drop Zone I listen",
    "start": "813760",
    "end": "820720"
  },
  {
    "text": "for some events I'm using jQuery just because it's helpful to not have to deal with all the cross browser crap um",
    "start": "820720",
    "end": "827760"
  },
  {
    "text": "although when you're dealing with HTML 5 browsers there isn't a lot of that but it's helpful to make some smooth out some of the event handling and Ajax and",
    "start": "827760",
    "end": "834279"
  },
  {
    "text": "other things but by no means is this jQuery only but I'm binding I'm listening for a couple events drag over",
    "start": "834279",
    "end": "839880"
  },
  {
    "text": "and drag enter that's the drop zone that it can respond to when I drag over it I then ask is this a file of the type that",
    "start": "839880",
    "end": "846120"
  },
  {
    "text": "I want to accept and I go ahead and change it to be a green box with a dotted line around it drag leave when it",
    "start": "846120",
    "end": "851959"
  },
  {
    "text": "leaves unsurprisingly we go ahead and take the green off and then drop is the important one we want to listen for that",
    "start": "851959",
    "end": "857880"
  },
  {
    "text": "event and when you drop a file element onto the Drop Zone you're going to get a file reference just like if you'd done a",
    "start": "857880",
    "end": "863920"
  },
  {
    "text": "normal file upload an input type selector you know type equals file and picked a file there you're going to get",
    "start": "863920",
    "end": "870040"
  },
  {
    "text": "that same file reference of what you've dropped in so the way I tell it that it's okay",
    "start": "870040",
    "end": "877720"
  },
  {
    "start": "875000",
    "end": "902000"
  },
  {
    "text": "for the way I tell the browser that it's okay for you to drop some elements is we set the data transfer. drop effect and",
    "start": "877720",
    "end": "884000"
  },
  {
    "text": "there's several values copy is probably the most common one that you'll use or you set it to none when it's not okay so",
    "start": "884000",
    "end": "889480"
  },
  {
    "text": "here I'm saying is it a file drag event if you're dragging something that's not a file I don't want to respond to it I",
    "start": "889480",
    "end": "894639"
  },
  {
    "text": "don't even want to have to special case the code so I just don't let you drop it unless it's actually a",
    "start": "894639",
    "end": "901040"
  },
  {
    "text": "file then we have here when you drop file accept in my code when when drop file accept is called you see I have",
    "start": "901120",
    "end": "908839"
  },
  {
    "start": "902000",
    "end": "925000"
  },
  {
    "text": "original event datat transfer. files there on line 770 that's an array of all",
    "start": "908839",
    "end": "914279"
  },
  {
    "text": "the files that I was dragging from my desktop into the browser application I'm going to pass those along to a function",
    "start": "914279",
    "end": "921160"
  },
  {
    "text": "and we'll see here in a moment what we do with the references to that file but you can see that it was",
    "start": "921160",
    "end": "926440"
  },
  {
    "start": "925000",
    "end": "981000"
  },
  {
    "text": "actually just a couple of lines of code to make this native Dragon drop enabled there literally was no other magic",
    "start": "926440",
    "end": "931560"
  },
  {
    "text": "involved at all so now let's talk about what do we do when we want to get access to files",
    "start": "931560",
    "end": "936800"
  },
  {
    "text": "you may grab a file through a standard input box or you may grab a file that",
    "start": "936800",
    "end": "941959"
  },
  {
    "text": "somebody has dragg and droing in either case you're going to get a file reference now what do we want to do with it we want to read the contents of that",
    "start": "941959",
    "end": "947440"
  },
  {
    "text": "file this was impossible until recently we now have the ability first to look at",
    "start": "947440",
    "end": "953199"
  },
  {
    "text": "the file reference and get other information that we couldn't get before in this case I'm looking at its MIM type",
    "start": "953199",
    "end": "958600"
  },
  {
    "text": "so I can make sure that it's an an image that I want to accept uh if you're dropping in an image that couldn't be",
    "start": "958600",
    "end": "964199"
  },
  {
    "text": "embeddable in a web browser that's not helpful so I limit it to Ping GIF and jpeg also I can look at its file size",
    "start": "964199",
    "end": "971040"
  },
  {
    "text": "and make sure you're not trying to upload some you know 12,000 megabyte you know super HDR photo to me and crashed",
    "start": "971040",
    "end": "978199"
  },
  {
    "text": "my my server and here's the important part file reader this is a new API that's in",
    "start": "978199",
    "end": "984600"
  },
  {
    "start": "981000",
    "end": "1035000"
  },
  {
    "text": "several browsers it's not in safario 51 I hear that it's coming in in newer versions of safari but it's in Chrome",
    "start": "984600",
    "end": "991040"
  },
  {
    "text": "and Firefox this allows you to instantiate a reader object and read the",
    "start": "991040",
    "end": "996160"
  },
  {
    "text": "image and read that file and get the data URL from it why do we want the data URL obviously because we'll stick it",
    "start": "996160",
    "end": "1001959"
  },
  {
    "text": "directly into an image element then we'll start messing with it with canvas so I have this file reader I have the",
    "start": "1001959",
    "end": "1007120"
  },
  {
    "text": "onload listener that because obviously it's an asynchronous event I listen for the onload and then I go ahead and call",
    "start": "1007120",
    "end": "1012759"
  },
  {
    "text": "the preview now what's interesting about this code is that you'll see here in just a moment I don't have to change",
    "start": "1012759",
    "end": "1019680"
  },
  {
    "text": "anything about this code when I call preview I'm calling it if I've gotten it from a drag and drop or if I've gotten",
    "start": "1019680",
    "end": "1026120"
  },
  {
    "text": "it from an input file selector it's the same type of file reference I can get all the same properties and read it in",
    "start": "1026120",
    "end": "1031880"
  },
  {
    "text": "exactly the same way local files and xr2 um if the user",
    "start": "1031880",
    "end": "1039000"
  },
  {
    "start": "1035000",
    "end": "1112000"
  },
  {
    "text": "does not have a file reader if they're in a browser that has a lot of these capabilities but say they're in Safari",
    "start": "1039000",
    "end": "1044438"
  },
  {
    "text": "51 or some of the Safari mobiles that don't have a file reader you want to provide some sort of workaround for them",
    "start": "1044439",
    "end": "1050400"
  },
  {
    "text": "and the workaround is that you can send that file using Ajax and then get the image back so in this case the only",
    "start": "1050400",
    "end": "1056640"
  },
  {
    "text": "important line that's different from anything you've ever seen before is that when I send the file there on line 547",
    "start": "1056640",
    "end": "1062840"
  },
  {
    "text": "it's actually sending the file's binary data up to a server and I have nothing more interesting than a PHP file that",
    "start": "1062840",
    "end": "1069559"
  },
  {
    "text": "simply takes binary data and spits back out a data URL so I have a data URL",
    "start": "1069559",
    "end": "1074640"
  },
  {
    "text": "either from my server or from the file reader API but in both cases once I have that dat URL I can do all those canvas",
    "start": "1074640",
    "end": "1080320"
  },
  {
    "text": "things we just talked about file reader is incredibly powerful and it's the first step in a whole new set of things",
    "start": "1080320",
    "end": "1086679"
  },
  {
    "text": "we're going to be able to do with local files Chrome is experimenting with local file systems literally being able to",
    "start": "1086679",
    "end": "1091799"
  },
  {
    "text": "create a virtual file system directly on the system uh on the user system and",
    "start": "1091799",
    "end": "1097039"
  },
  {
    "text": "manage files and folders and all kinds of things like that sandboxed away from any of the rest of their stuff so it's",
    "start": "1097039",
    "end": "1102679"
  },
  {
    "text": "secure but you really get a a full powerful API through some of these things so local files are really getting",
    "start": "1102679",
    "end": "1108360"
  },
  {
    "text": "cool in htl 5 JavaScript so are we getting addicted",
    "start": "1108360",
    "end": "1114240"
  },
  {
    "start": "1112000",
    "end": "1136000"
  },
  {
    "text": "yet I hope you guys are getting interested in some of this really cool stuff and what I also hope you're seeing is that it's not that hard to weave",
    "start": "1114240",
    "end": "1120559"
  },
  {
    "text": "these things together into a single application it doesn't have to be some of the stupid toy examples we see out on",
    "start": "1120559",
    "end": "1126200"
  },
  {
    "text": "the web there's a plausible story for putting all these things into a powerful web application not that my game is",
    "start": "1126200",
    "end": "1132280"
  },
  {
    "text": "powerful uh but there's a way to do this kind of stuff so let's talk about web sockets um",
    "start": "1132280",
    "end": "1139120"
  },
  {
    "start": "1136000",
    "end": "1238000"
  },
  {
    "text": "websockets are what I'm using to keep the browser constantly communicating with the server it's a two-way",
    "start": "1139120",
    "end": "1144520"
  },
  {
    "text": "communication street instead of having to do long polling or other things like that now I use socket IO um there's a",
    "start": "1144520",
    "end": "1150480"
  },
  {
    "text": "number of other websocket emulation libraries out there socket iio is is my favorite it has a whole bunch of",
    "start": "1150480",
    "end": "1156640"
  },
  {
    "text": "fallback um things you know for older browsers even IE and Flash and all kinds",
    "start": "1156640",
    "end": "1162039"
  },
  {
    "text": "of crazy stuff so it basically can give you the same API and you can have that sort of emulated layer in the older",
    "start": "1162039",
    "end": "1168360"
  },
  {
    "text": "browser and direct websocket Connections in the newer browsers but keep your web",
    "start": "1168360",
    "end": "1173480"
  },
  {
    "text": "application constantly connected that will allow your server to update things that the browser has not asked for yet",
    "start": "1173480",
    "end": "1180080"
  },
  {
    "text": "so it's a two-way Communication channel sort of that push notification if you will so I'm using it here just to once",
    "start": "1180080",
    "end": "1186240"
  },
  {
    "text": "I've logged in I've established a connection between them and each time you refresh a page I just reestablish",
    "start": "1186240",
    "end": "1191880"
  },
  {
    "text": "that same connection again using the session storage um stored session",
    "start": "1191880",
    "end": "1196919"
  },
  {
    "text": "ID so let's take a look at what the API for socket iio is looks like using here the first thing is I make a very simple",
    "start": "1196919",
    "end": "1203559"
  },
  {
    "text": "connection uh I'm connecting to my server and I'm using a nam space that I call SL site I actually have two",
    "start": "1203559",
    "end": "1210120"
  },
  {
    "text": "connections of websockets that I make in this app and I'll explain that in a little bit why but the first one is site",
    "start": "1210120",
    "end": "1215360"
  },
  {
    "text": "and the other one is called ww which will explain just a sec um but it's very easy to use this name spacing right on",
    "start": "1215360",
    "end": "1221880"
  },
  {
    "text": "the end of the URL and socket IO will keep all that communication separate in in those name spaces we listen for",
    "start": "1221880",
    "end": "1228679"
  },
  {
    "text": "events using sock.on in this case sock.on I'm listening for the disconnect event so if I'm somehow disconnected",
    "start": "1228679",
    "end": "1234480"
  },
  {
    "text": "from the server I want to make sure I listen for that and then we send events using emit",
    "start": "1234480",
    "end": "1240679"
  },
  {
    "start": "1238000",
    "end": "1272000"
  },
  {
    "text": "so socket. onon socket. on to listen for events socket. emit to send events this",
    "start": "1240679",
    "end": "1246360"
  },
  {
    "text": "a two way back and forth the really cool part we'll see in in just a slide or two the really cool part is that's almost",
    "start": "1246360",
    "end": "1252360"
  },
  {
    "text": "exactly the same code you write on the server because the API is the same if you're using it of course inside of something like nodejs socket.io also has",
    "start": "1252360",
    "end": "1260000"
  },
  {
    "text": "python bindings and PHP and some other um Java I think and some other things like that but uh path of leas resistance",
    "start": "1260000",
    "end": "1267200"
  },
  {
    "text": "for me obviously was JavaScript in both places using nodejs here's what it looks like on the",
    "start": "1267200",
    "end": "1273240"
  },
  {
    "start": "1272000",
    "end": "1308000"
  },
  {
    "text": "server unsurprisingly socket. IIT when I want to send we do have some additional",
    "start": "1273240",
    "end": "1278640"
  },
  {
    "text": "functionalities I can select a particular namespace using uh the of and",
    "start": "1278640",
    "end": "1283919"
  },
  {
    "text": "then in is actually selecting a Channel with inside of that namespace so in this case want to restrict the communication",
    "start": "1283919",
    "end": "1289960"
  },
  {
    "text": "that's going out for an individual game only to the people that are actually playing that game as opposed to people",
    "start": "1289960",
    "end": "1295559"
  },
  {
    "text": "playing Another game so I can really get fine grain in terms of how much data is going out and and not sending out too",
    "start": "1295559",
    "end": "1301120"
  },
  {
    "text": "much data not just broadcasting every message to every single connected",
    "start": "1301120",
    "end": "1306919"
  },
  {
    "text": "user and finally we'll talk uh a bit about web workers how many of you guys",
    "start": "1306919",
    "end": "1312120"
  },
  {
    "start": "1308000",
    "end": "1481000"
  },
  {
    "text": "know what web workers are let me see how much I need to explain okay a fair amount of you don't know what web workers are so we'll just Dive In don't",
    "start": "1312120",
    "end": "1318720"
  },
  {
    "text": "want to just show you code and not explain what that means web workers are a new thing that's come in in some of",
    "start": "1318720",
    "end": "1324039"
  },
  {
    "text": "the latest generations of browsers we are even starting to see it a little bit on mobile basically it's a way to solve",
    "start": "1324039",
    "end": "1330200"
  },
  {
    "text": "a problem that JavaScript has well some people call it a problem JavaScript is single threaded what that means is that",
    "start": "1330200",
    "end": "1336000"
  },
  {
    "text": "when the browser is going to update the page say you've moved an element or you've changed some CSS or you've added",
    "start": "1336000",
    "end": "1341760"
  },
  {
    "text": "some text or something when it's going to update and repaint the page it's using the same thread of your processor",
    "start": "1341760",
    "end": "1347679"
  },
  {
    "text": "on your machine as the JavaScript execution which in some cases is not a",
    "start": "1347679",
    "end": "1352799"
  },
  {
    "text": "problem but in some cases if you're doing an animation and you're doing some heavy computation or you're receiving an",
    "start": "1352799",
    "end": "1358000"
  },
  {
    "text": "event from a server for instance you can cause that stuttering another reason why you see stuttering is the garbage",
    "start": "1358000",
    "end": "1363559"
  },
  {
    "text": "collection that happens so you stuff all of your code execution your CSS updating",
    "start": "1363559",
    "end": "1369880"
  },
  {
    "text": "your markup parsing all of that stuff it all happens on one thread on the user's machine and in some cases you can end up",
    "start": "1369880",
    "end": "1377200"
  },
  {
    "text": "competing for things in you start to see that stuttering that happens with animations and so forth so a solution to",
    "start": "1377200",
    "end": "1383000"
  },
  {
    "text": "this is to instantiate some JavaScript to run in an entirely different thread and prior to web workers we had no",
    "start": "1383000",
    "end": "1389159"
  },
  {
    "text": "concept of how to do that because JavaScript as a language has no concept of threads built into it and so we",
    "start": "1389159",
    "end": "1396200"
  },
  {
    "text": "needed something sort of an additional help and web workers are that answer the browsers allow us to point at another",
    "start": "1396200",
    "end": "1402480"
  },
  {
    "text": "file um another Javascript file in the server and say I want you to load up that code I want you to run that in a",
    "start": "1402480",
    "end": "1408039"
  },
  {
    "text": "separate thread and that way if it's running sort of in that thread and the browser is doing some updates over here",
    "start": "1408039",
    "end": "1414600"
  },
  {
    "text": "this thing could be long running and blocking and all that and the browser is still very smooth and you can scroll",
    "start": "1414600",
    "end": "1419720"
  },
  {
    "text": "around you get none of that jumpiness so if you're doing a whole bunch of communications say for instance in a",
    "start": "1419720",
    "end": "1425080"
  },
  {
    "text": "game where I've got a whole bunch of data coming back and forth over socket iio and I also want for the when the",
    "start": "1425080",
    "end": "1430640"
  },
  {
    "text": "user is moving a piece around I want for that to be as smooth and graceful as possible one solution to that is to put",
    "start": "1430640",
    "end": "1435919"
  },
  {
    "text": "those in separate threads web worker for the socket game communication and then the main browser thread for making",
    "start": "1435919",
    "end": "1442039"
  },
  {
    "text": "things smooth while I'm dragging pieces around so web workers allow you to instantiate a an asynchronous set of",
    "start": "1442039",
    "end": "1448880"
  },
  {
    "text": "running JavaScript code sort of in its own sandbox and then communicate with it and the cool part is you communicate",
    "start": "1448880",
    "end": "1454760"
  },
  {
    "text": "with it very much like you communicate with websockets it's just a remote piece of code that's running it happens to be",
    "start": "1454760",
    "end": "1460600"
  },
  {
    "text": "on the same machine and not on a server across the internet but you're still posting a message to it and listening",
    "start": "1460600",
    "end": "1466200"
  },
  {
    "text": "for messages back and the worker can do the same the worker does not have access to the Dom or any of those other things",
    "start": "1466200",
    "end": "1471799"
  },
  {
    "text": "it's really in its own sandbox but it can send data back and forth and you can communicate that way so we'll take a",
    "start": "1471799",
    "end": "1478200"
  },
  {
    "text": "look at what that code looks like here we instantiate a new worker I give it a you a file ww.",
    "start": "1478200",
    "end": "1485919"
  },
  {
    "start": "1481000",
    "end": "1500000"
  },
  {
    "text": "JS and let me go back you listen for messages using gamew worker. on",
    "start": "1485919",
    "end": "1491799"
  },
  {
    "text": "message um and you parse out those messages in the same way that you would parse out messages from socket.io for",
    "start": "1491799",
    "end": "1497120"
  },
  {
    "text": "instance and you send messages using post message so this is what's happening inside of my",
    "start": "1497120",
    "end": "1503320"
  },
  {
    "start": "1500000",
    "end": "1527000"
  },
  {
    "text": "main page I've I've I've got my main page going and I'm saying I want you to start up a web worker for me and run",
    "start": "1503320",
    "end": "1508520"
  },
  {
    "text": "that code over there in that web worker I want to listen for when he wants to tell me things and I want to send him",
    "start": "1508520",
    "end": "1514360"
  },
  {
    "text": "stuff namely I want to send him a go ahead and get started message so that's what this line 399 does says go ahead",
    "start": "1514360",
    "end": "1520399"
  },
  {
    "text": "and send him a start message it tells him what the game ideas and that he can get started and make his",
    "start": "1520399",
    "end": "1526120"
  },
  {
    "text": "communication inside of the web worker site of ww. JS we've got a couple things that are new to us first is that we're",
    "start": "1526120",
    "end": "1533360"
  },
  {
    "start": "1527000",
    "end": "1558000"
  },
  {
    "text": "able to synchronously import other scripts so it doesn't have to all be in one file in this case I'm importing the",
    "start": "1533360",
    "end": "1538960"
  },
  {
    "text": "socket.io client Library it can run inside of a web worker that allows me to establish a whole different thread of",
    "start": "1538960",
    "end": "1545520"
  },
  {
    "text": "websocket communication that's unblocked from the main browser's thread down there at the bottom on line",
    "start": "1545520",
    "end": "1552600"
  },
  {
    "text": "23 we're posting messages that's posting messages back to the main page and we're listening for messages",
    "start": "1552600",
    "end": "1559200"
  },
  {
    "start": "1558000",
    "end": "1585000"
  },
  {
    "text": "using on message it's pretty straightforward and simple now again there are polyfills and wrappers that make these apis even nicer but I",
    "start": "1559200",
    "end": "1565120"
  },
  {
    "text": "actually wanted to show you the underlying API to show you it's not that complicated actually it's very simple to",
    "start": "1565120",
    "end": "1570399"
  },
  {
    "text": "listen send and receive messages back and forth and your code looks the same so you don't do a lot of mental context",
    "start": "1570399",
    "end": "1576480"
  },
  {
    "text": "switching code looks the same in both those cases similar very similar to when you're writing um web socket",
    "start": "1576480",
    "end": "1584159"
  },
  {
    "text": "code last thing I'll last piece of code I'll show is in my particular game I wanted to have a fallback for some of",
    "start": "1584159",
    "end": "1590480"
  },
  {
    "start": "1585000",
    "end": "1630000"
  },
  {
    "text": "the browsers which may have advanced HTML 5 functionality and capable of playing the game but they don't yet have",
    "start": "1590480",
    "end": "1595799"
  },
  {
    "text": "web workers this would be some of your you know a couple of generation old mobile devices that have a lot of things",
    "start": "1595799",
    "end": "1602360"
  },
  {
    "text": "like canvas and stuff but they don't yet have web workers so this is a shim for not having that worker API it does not",
    "start": "1602360",
    "end": "1608760"
  },
  {
    "text": "actually create asynchronous multi-threaded JavaScript but it simulates it using the same API so my",
    "start": "1608760",
    "end": "1614799"
  },
  {
    "text": "code doesn't have to worry about it and in those cases those browsers would still work the same but maybe have slightly less performance in those few",
    "start": "1614799",
    "end": "1621960"
  },
  {
    "text": "cases where there are conflicts the API is the same so I create a worker API that you can instantiate and I have post",
    "start": "1621960",
    "end": "1627880"
  },
  {
    "text": "message and on message as you would expect yeah so so the question is do I have an overview of the things that are",
    "start": "1627880",
    "end": "1634120"
  },
  {
    "start": "1630000",
    "end": "1924000"
  },
  {
    "text": "H that are upcoming in HTML 5 um yes so I'm actually I just started up a book",
    "start": "1634120",
    "end": "1640760"
  },
  {
    "text": "project called Beyond HTML 5 where we're going to write about things um some of that cool stuff a number of things that",
    "start": "1640760",
    "end": "1646360"
  },
  {
    "text": "are coming up that are on the horizon we talked about the the file the virtual file system that you can read and write files there's web intents a very cool",
    "start": "1646360",
    "end": "1653880"
  },
  {
    "text": "thing if you're familiar with Android you know about intents but web intents allows your web application to register",
    "start": "1653880",
    "end": "1659240"
  },
  {
    "text": "with the browser and say anytime somebody wants to do XYZ action give them the option to invoke my web",
    "start": "1659240",
    "end": "1665399"
  },
  {
    "text": "application even if they don't have me loaded yet so say you're a photo editing service you've got a person that logged",
    "start": "1665399",
    "end": "1671679"
  },
  {
    "text": "into their site and it prompts them and says hey this photo application would like to register a web intent that it",
    "start": "1671679",
    "end": "1677760"
  },
  {
    "text": "can handle any kind of photo editing that a user may run across you know when they find a photo on flicker or",
    "start": "1677760",
    "end": "1683279"
  },
  {
    "text": "something like that so then they say yes that's okay and then they're on Flicker and they click something you know to do",
    "start": "1683279",
    "end": "1688360"
  },
  {
    "text": "something with an image the browser pops up and says hey would you like to inote that photo editing application that you authorized so web intents are a very",
    "start": "1688360",
    "end": "1695399"
  },
  {
    "text": "cool way for web applications to kind of uh interact with each other sort of it's It's distributed mashups if you will",
    "start": "1695399",
    "end": "1701519"
  },
  {
    "text": "allowing each person's web application to handle different things Shadow Dom is another really cool thing that's coming",
    "start": "1701519",
    "end": "1706840"
  },
  {
    "text": "along it's it's just been kind of proposed and it's working its way through the browser has had to Shadow Dom for a long time and what that means",
    "start": "1706840",
    "end": "1713039"
  },
  {
    "text": "is when I have an element like input type equals file there's actually more elements there underneath that the",
    "start": "1713039",
    "end": "1719320"
  },
  {
    "text": "browser doesn't tell us about there's a button element and some other things like that a calendar is another example",
    "start": "1719320",
    "end": "1724840"
  },
  {
    "text": "when you do an input type equals calendar it renders a whole bunch of Dom elements to show you that calendar popup",
    "start": "1724840",
    "end": "1730480"
  },
  {
    "text": "widget but you have no access to any of that shadow Dom using normal current Technologies the shadow Dom sort of",
    "start": "1730480",
    "end": "1737559"
  },
  {
    "text": "proposal that are coming along are going to allow you to be able to access some of that stuff in some interesting ways targeting it with CSS and things like",
    "start": "1737559",
    "end": "1744200"
  },
  {
    "text": "that but you're also going to be able to create your own tag types with your own shadow Dom so you can push up a tag type",
    "start": "1744200",
    "end": "1750760"
  },
  {
    "text": "that when it sees that in the markup it knows that this is the Dom you want it to build and this is all the JavaScript",
    "start": "1750760",
    "end": "1756559"
  },
  {
    "text": "code that you want to associate with that element and then inside of your markup you can simply say you know tag Fubar and it invokes the",
    "start": "1756559",
    "end": "1764120"
  },
  {
    "text": "fubar.gr Dom and it works exactly like native elements do so it's giving that very cool functionality that we",
    "start": "1764120",
    "end": "1770600"
  },
  {
    "text": "currently we have to go and create all those elements ourselves and then we have to make sure we have to be very",
    "start": "1770600",
    "end": "1775640"
  },
  {
    "text": "careful through CSS targeting that other things on the page don't affect that this allows us to create that sandbox",
    "start": "1775640",
    "end": "1781559"
  },
  {
    "text": "with Shadow Dom um some other things peer-to-peer web RTC is an API that's coming along uh in a couple of the",
    "start": "1781559",
    "end": "1788200"
  },
  {
    "text": "browsers right now Chrome I no definitely has I think Firefox is getting it as well um web RTC is going",
    "start": "1788200",
    "end": "1793559"
  },
  {
    "text": "to allow a direct connection between your browser and my browser without a Federated connection to a server so",
    "start": "1793559",
    "end": "1799679"
  },
  {
    "text": "we'll be able to do peer-to-peer you know video You Know video chats and things like that games like this the communication between us could go",
    "start": "1799679",
    "end": "1805760"
  },
  {
    "text": "directly without going through a server um so there's a bunch of really really cool stuff that's happening and and I",
    "start": "1805760",
    "end": "1811600"
  },
  {
    "text": "would say this it's not particularly useful to try to put labels on things and say well that's HTML 5 and that's",
    "start": "1811600",
    "end": "1817799"
  },
  {
    "text": "HTML 6 that's a stupid label that's just marketing buzzwords I think HTML 5",
    "start": "1817799",
    "end": "1822840"
  },
  {
    "text": "signals this whole new open acceleration of every possible technology in the web platform it's open that we all know",
    "start": "1822840",
    "end": "1829399"
  },
  {
    "text": "what's happening we can all participate in it so I think HTML 5 and friends is the term to use going forward to talk",
    "start": "1829399",
    "end": "1834960"
  },
  {
    "text": "about all these things but there's definitely a lot of very cool stuff that we don't even fully know how it's going",
    "start": "1834960",
    "end": "1840480"
  },
  {
    "text": "to work yet but we know it's coming we know these browser vendors and specifications are really trying to experiment and that doesn't even scratch",
    "start": "1840480",
    "end": "1846799"
  },
  {
    "text": "the surface of the cool stuff that they're thinking about for css4 some really amazing stuff there so uh there's",
    "start": "1846799",
    "end": "1852320"
  },
  {
    "text": "a bright future even the cool stuff that we talked about today which is kind of more fully baked and you can you can actually build applications on it be",
    "start": "1852320",
    "end": "1858799"
  },
  {
    "text": "hard to build an application entirely around something like web intense yet because it's only in a very experimental",
    "start": "1858799",
    "end": "1864279"
  },
  {
    "text": "version of Chrome but as an example the social sharing company add this I don't know if you guys saw but they just",
    "start": "1864279",
    "end": "1871159"
  },
  {
    "text": "released uh you know an update to their service that uses web intents for browsers that have it so now when you",
    "start": "1871159",
    "end": "1878039"
  },
  {
    "text": "are on a site you don't even have to click and add this button it'll just say would you like to go Ahad and share this with Facebook because it can register",
    "start": "1878039",
    "end": "1883799"
  },
  {
    "text": "that for you um so there's some very cool stuff that's happening the web applications that we know today going to be entirely unlike what we see even a",
    "start": "1883799",
    "end": "1890320"
  },
  {
    "text": "year or two from now so good question uh so just any other questions",
    "start": "1890320",
    "end": "1896600"
  },
  {
    "text": "final my final question to you guys I do want you um to you know ping me if you",
    "start": "1896600",
    "end": "1902039"
  },
  {
    "text": "have any questions find me on online or on Twitter things like that but uh I do hope that you will go away from this",
    "start": "1902039",
    "end": "1908039"
  },
  {
    "text": "believing that HTML 5 and JavaScript is something you practically can use right now thanks for having me I appreciate it",
    "start": "1908039",
    "end": "1913760"
  },
  {
    "text": "very much [Music]",
    "start": "1913760",
    "end": "1926510"
  }
]