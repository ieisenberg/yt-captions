[
  {
    "text": "thanks for coming everybody my name is Coulomb I'm an engineer at Amazon Web Services and I'm here to talk about PID",
    "start": "4290",
    "end": "12509"
  },
  {
    "text": "loops and about how we use them to keep systems stable and I actually have a subtitle for this talk which I went back",
    "start": "12509",
    "end": "19740"
  },
  {
    "text": "and forth and whether I should give it or not which is PID loop Pibb loops PID",
    "start": "19740",
    "end": "25410"
  },
  {
    "text": "loops are they come from control theory and this is maybe my fourth third or",
    "start": "25410",
    "end": "32430"
  },
  {
    "text": "fourth talk different talk about control theory in the last year and back in January I did a I did a workshop where",
    "start": "32430",
    "end": "39240"
  },
  {
    "text": "we looked at control theory with a bunch of practitioners and academics who do",
    "start": "39240",
    "end": "44280"
  },
  {
    "text": "formal verification of systems and the conclusion I've reached in that year is",
    "start": "44280",
    "end": "49680"
  },
  {
    "text": "that control theory is just an unbelievably rich vein of knowledge and",
    "start": "49680",
    "end": "55489"
  },
  {
    "text": "expertise and insight into how the control systems how to keep systems",
    "start": "55489",
    "end": "61620"
  },
  {
    "text": "stable which are very much part of like what I do you know I work at Amazon Web Services where we have all these cloud",
    "start": "61620",
    "end": "67110"
  },
  {
    "text": "services big distributed systems and keeping them live and running it's",
    "start": "67110",
    "end": "72329"
  },
  {
    "text": "obviously a very important task and and like really digging into control theory like reading books about it at getting",
    "start": "72329",
    "end": "78389"
  },
  {
    "text": "into the literature talking to experts it's like like finding literally like a haunted ears I've written down expertise",
    "start": "78389",
    "end": "85979"
  },
  {
    "text": "that just all applied to my field that we seem not to know about you know the title the title for this whole track",
    "start": "85979",
    "end": "92670"
  },
  {
    "text": "that we're doing here is about CS in the modern world and I actually think it's it's kind of a travesty that we don't",
    "start": "92670",
    "end": "98100"
  },
  {
    "text": "teach control theory as part of computer science generally it's commonly part of engineering and physics and that's where",
    "start": "98100",
    "end": "103770"
  },
  {
    "text": "I first learned it I did physics in college and it amazes me how much",
    "start": "103770",
    "end": "109109"
  },
  {
    "text": "relevancy there is in there and like it says here the fruit is so low-hanging like there's so many things to learn",
    "start": "109109",
    "end": "115889"
  },
  {
    "text": "that it's touching the ground we could just take these lessons away in fact I actually think you can spend just a week",
    "start": "115889",
    "end": "122069"
  },
  {
    "text": "or two like reading about control theory and you will be in the 99th percentile",
    "start": "122069",
    "end": "127529"
  },
  {
    "text": "of all people in computer science who know anything about control theory and you will be like an instant expert and",
    "start": "127529",
    "end": "134790"
  },
  {
    "text": "it gives you superpowers which I'm going to talk about to really get insights into into how systems can",
    "start": "134790",
    "end": "140800"
  },
  {
    "text": "be built better it's it's fascinating and like nothing excites me more right now but I'm gonna start with something",
    "start": "140800",
    "end": "147400"
  },
  {
    "text": "that's a little meta back in late last year and a Tobias's big conference",
    "start": "147400",
    "end": "154360"
  },
  {
    "text": "called reinvent I gave a talk which was one of a series of talks there - we",
    "start": "154360",
    "end": "160870"
  },
  {
    "text": "actually gave some kind of let's open the curtains talks about how we build things internally how we design systems",
    "start": "160870",
    "end": "166750"
  },
  {
    "text": "how we analyze them my colleague Peter Voss will give one about how we think about blast radius and I gave one about",
    "start": "166750",
    "end": "172420"
  },
  {
    "text": "just how we control systems and just a small bit in the middle I was talking about this stuff control theory because",
    "start": "172420",
    "end": "179500"
  },
  {
    "text": "I didn't have time to go into too much detail and Cindy reached out after and contacted me said well the material",
    "start": "179500",
    "end": "185590"
  },
  {
    "text": "looks pretty interesting let's get some more on that and Here I am Mike UConn right and so like I did something I gave",
    "start": "185590",
    "end": "193390"
  },
  {
    "text": "a talk right somebody observed it gave me feedback and now I'm reacting and",
    "start": "193390",
    "end": "198670"
  },
  {
    "text": "giving you that talk right congratulations that is like 99% of control theory like it applies to like",
    "start": "198670",
    "end": "206650"
  },
  {
    "text": "almost everything in life not just how we control stable systems and analyze them and make sure that they're safe but",
    "start": "206650",
    "end": "213670"
  },
  {
    "text": "like business processes - like I've seen a crop up in really strange places you know I was talking to a sales team and",
    "start": "213670",
    "end": "219880"
  },
  {
    "text": "they were telling me the first thing they do when they go into a new field area and they have to you know get leads and sell products and so on is they just",
    "start": "219880",
    "end": "227290"
  },
  {
    "text": "start measuring they should start measuring their success rate so that they can identify their wins and build on them and identify their losses and",
    "start": "227290",
    "end": "233680"
  },
  {
    "text": "correct whatever they need to correct and it just fascinated me they're basically taking a control theory",
    "start": "233680",
    "end": "240090"
  },
  {
    "text": "process - even like a very high level task like how to sell things it doesn't",
    "start": "240090",
    "end": "246220"
  },
  {
    "text": "just apply to engineering things so if you're not familiar with control theory if you've never heard about it didn't",
    "start": "246220",
    "end": "251830"
  },
  {
    "text": "even know it existed like I said it's about a hundred-year-old field it evolved independently in several",
    "start": "251830",
    "end": "258340"
  },
  {
    "text": "different branches of science there's a few competing arguments as to where the first discoverers where the chemists",
    "start": "258340",
    "end": "264880"
  },
  {
    "text": "claim it was first discovered when analyzing chemical react the physics the physicists claim who was",
    "start": "264880",
    "end": "270300"
  },
  {
    "text": "first discovered when studying you know thermodynamics and engineers have been",
    "start": "270300",
    "end": "275640"
  },
  {
    "text": "using it for mechanical control systems and so on and eventually all these different fields realized hey we have",
    "start": "275640",
    "end": "282510"
  },
  {
    "text": "these same equations and same approaches that turn out are very general they're",
    "start": "282510",
    "end": "287670"
  },
  {
    "text": "about controlling things getting intent you know we want to make the world a certain way and and getting the world",
    "start": "287670",
    "end": "295050"
  },
  {
    "text": "into that state turns out there's a whole branch of science around it I'm gonna try and give a talk that's I'm",
    "start": "295050",
    "end": "300930"
  },
  {
    "text": "gonna give you real examples places we're using this just to give you a flavor what control theory does but my",
    "start": "300930",
    "end": "306270"
  },
  {
    "text": "real goals I'm gonna try to give you jumping-off points to like places where you can take things and then take them",
    "start": "306270",
    "end": "312420"
  },
  {
    "text": "on your own and maybe digging deeper if this excites you and interest you there's lots of prior art right here at",
    "start": "312420",
    "end": "318930"
  },
  {
    "text": "Q Khan actually Q Khan in San Francisco just a few months months ago is a great talk on control theory where Valerie",
    "start": "318930",
    "end": "325080"
  },
  {
    "text": "goes into a really good formal approach into into how some container scaling",
    "start": "325080",
    "end": "331410"
  },
  {
    "text": "systems can be modeled and approached in a control theory framework and it's a talk while we're watching there's more",
    "start": "331410",
    "end": "337800"
  },
  {
    "text": "math in this talk in that talk then there will be in my talk so if you're really excited by calculus look look up",
    "start": "337800",
    "end": "344760"
  },
  {
    "text": "that talk it's like it's a really really good one there's books on this subject thankfully I've read both these books",
    "start": "344760",
    "end": "351690"
  },
  {
    "text": "they're pretty good the feedback control book is is very",
    "start": "351690",
    "end": "356760"
  },
  {
    "text": "directly applicable to our site to our field you know if you're controlling computers and distributed systems and so",
    "start": "356760",
    "end": "361950"
  },
  {
    "text": "on the second book designing distributed control systems was not really written",
    "start": "361950",
    "end": "368550"
  },
  {
    "text": "with computer systems in mind when they talk about you know they're distributed systems they're actually talking about",
    "start": "368550",
    "end": "374580"
  },
  {
    "text": "you know big real-world machines where not everything's connected and talking to one another as you see there's like a",
    "start": "374580",
    "end": "379980"
  },
  {
    "text": "logging machine on the front cover obviously it's got nothing to do with like say running s3 or a system like I",
    "start": "379980",
    "end": "386070"
  },
  {
    "text": "work on but it turns out it actually has a lot of patterns and a lot of lessons in it that directly apply to our field I",
    "start": "386070",
    "end": "393050"
  },
  {
    "text": "like it's amazing how much I keep coming back to it and the places where I see",
    "start": "393050",
    "end": "399360"
  },
  {
    "text": "control theory crop up like directly in my job is I go to a lot of design reviews right I'm a principal",
    "start": "399360",
    "end": "406139"
  },
  {
    "text": "principal engineer at West so one of my job's is team wants to build something",
    "start": "406139",
    "end": "411300"
  },
  {
    "text": "or is in the process of building something they'll have some design reviews and they'll invite some people",
    "start": "411300",
    "end": "416849"
  },
  {
    "text": "and often I'm there and we're looking at the system and whether it's you know gonna work and what we can do with it",
    "start": "416849",
    "end": "422849"
  },
  {
    "text": "and I do the same with customers there's you know sets of customers I meet pretty frequently where we're talking about",
    "start": "422849",
    "end": "429539"
  },
  {
    "text": "hair they're gonna you know move to the cloud what are they building in the process what do their systems look like and and I see a lot of places where",
    "start": "429539",
    "end": "440069"
  },
  {
    "text": "control theory is directly applicable but rarely applied auto scaling and",
    "start": "440069",
    "end": "446039"
  },
  {
    "text": "placement are really obvious examples we're gonna walk through some but another it's like fairness algorithms so",
    "start": "446039",
    "end": "452339"
  },
  {
    "text": "a really common fairness algorithm is how like TCP achieves fairness you know",
    "start": "452339",
    "end": "457439"
  },
  {
    "text": "you got all these network users and you want to give them all a fair slice turns out there's actually you know that's",
    "start": "457439",
    "end": "462509"
  },
  {
    "text": "essentially a PID loop is what's happening and in system stability right how do we absorb errors recover from",
    "start": "462509",
    "end": "468719"
  },
  {
    "text": "those errors and I'll give you some examples so no talk you know focused on",
    "start": "468719",
    "end": "474179"
  },
  {
    "text": "control theory would be complete without like it's a really really classic example which is a furnace right this is",
    "start": "474179",
    "end": "482129"
  },
  {
    "text": "like if you were learning control theory at the University this would be the very first example anyone pick out I'm not gonna do anything any different but it's",
    "start": "482129",
    "end": "488459"
  },
  {
    "text": "really it's a good example because it's so easy to follow so imagine we've got you know a tank of water and we've got a",
    "start": "488459",
    "end": "494519"
  },
  {
    "text": "heat source and we want to get the tank to a known temperature right and we can",
    "start": "494519",
    "end": "500219"
  },
  {
    "text": "we can vary the heat source we can turn it up we can turn it down we can make it hotter we can we can make it cooler and",
    "start": "500219",
    "end": "506659"
  },
  {
    "text": "you know how you would go about doing this it's kind of obvious right you would measure the temperature of the",
    "start": "506659",
    "end": "511979"
  },
  {
    "text": "water and then if the water is too cold you know you turn the heat up and if the water is too hot you turn the heat off",
    "start": "511979",
    "end": "518339"
  },
  {
    "text": "or you turn the heat down if it's approaching that temperature right really really simple stuff but it turns",
    "start": "518339",
    "end": "526170"
  },
  {
    "text": "out control theory has a lot to say about how this can be done stabili you",
    "start": "526170",
    "end": "531660"
  },
  {
    "text": "know there's a lot of very naive approaches right like if you just have a really big fire and you just keep it under the",
    "start": "531660",
    "end": "536970"
  },
  {
    "text": "furnace for a long time until exactly the you measure the right temperature and you just remove the heat like it'll",
    "start": "536970",
    "end": "542879"
  },
  {
    "text": "probably start cooling down really really quickly right or you can overheat in some cases where there's lag because",
    "start": "542879",
    "end": "548970"
  },
  {
    "text": "you know the place you're measuring in the tank of water is maybe you know not",
    "start": "548970",
    "end": "554009"
  },
  {
    "text": "being connected to efficiently and and the rest of the water isn't at that temperature I can tell control theory is",
    "start": "554009",
    "end": "560759"
  },
  {
    "text": "the science and analysis of like figuring out how to get this right how to make it stable and it has a lot to",
    "start": "560759",
    "end": "566279"
  },
  {
    "text": "say and the biggest thing it has to say right is that you should approach the system in terms of measuring its error",
    "start": "566279",
    "end": "572910"
  },
  {
    "text": "right so I've got a desire temperature like let's say I want to get this water",
    "start": "572910",
    "end": "578220"
  },
  {
    "text": "to 100 degrees Celsius I'm European so to translate which is boiling",
    "start": "578220",
    "end": "584249"
  },
  {
    "text": "temperature and it starts off at room temperature which is about 20 degrees Celsius in that case the error is 80",
    "start": "584249",
    "end": "590910"
  },
  {
    "text": "degrees Celsius right we focus on the error like what is the distance from the",
    "start": "590910",
    "end": "596129"
  },
  {
    "text": "desired state that we wanted to get to and a really simple kind of controller is a P controller that's a proportional",
    "start": "596129",
    "end": "603660"
  },
  {
    "text": "controller where all we do is we take some action proportionate to the error right so the error is 80 so I keep the",
    "start": "603660",
    "end": "611279"
  },
  {
    "text": "heat high then the a then goes to 70 60 you know 50 and I gradually turn down",
    "start": "611279",
    "end": "616980"
  },
  {
    "text": "the heat as it goes and that's a proportional controller really really simple control system and you would",
    "start": "616980",
    "end": "623910"
  },
  {
    "text": "think that would just get to the line and go really you know just fine in reality a proportional controller will",
    "start": "623910",
    "end": "629370"
  },
  {
    "text": "tend to oscillate because there are natural lags in the system and there's no like perfect way to measure things as",
    "start": "629370",
    "end": "635639"
  },
  {
    "text": "we all know so I'll just kind of hover above the line it won't be a perfectly stable system so we improve on that we",
    "start": "635639",
    "end": "643290"
  },
  {
    "text": "don't just act in proportion to the error we act we use an integral of the",
    "start": "643290",
    "end": "648300"
  },
  {
    "text": "error - now that's just fancy math for saying you know we take the whole area under the curve of that error right so",
    "start": "648300",
    "end": "656160"
  },
  {
    "text": "we take some action that's proportionate to like how much error we've had over a period of time and when you add that",
    "start": "656160",
    "end": "664259"
  },
  {
    "text": "you've got a PI controller we've got a proportional component if you integral component that'll still tend to",
    "start": "664259",
    "end": "670269"
  },
  {
    "text": "oscillate them far less it'll tend to like really close to asymptotes the the",
    "start": "670269",
    "end": "676389"
  },
  {
    "text": "line you're trying to hit trying to get things to a target temperature many many real-world systems RPI controllers",
    "start": "676389",
    "end": "682800"
  },
  {
    "text": "potentially the you know thermostat and HVAC system in this room or cruise control in your car and so on but",
    "start": "682800",
    "end": "690430"
  },
  {
    "text": "control theory and it's really refined sense actually says well even a PI controller isn't perfectly stable and",
    "start": "690430",
    "end": "695470"
  },
  {
    "text": "the reason is if this system where this stuff for a big shock like if you know a",
    "start": "695470",
    "end": "700630"
  },
  {
    "text": "lot of water where there's suddenly to be taken out of the tank it won't react well there'll be just too",
    "start": "700630",
    "end": "707110"
  },
  {
    "text": "much nor too much noise in the measuring signal and it'll it'll overdrive or on",
    "start": "707110",
    "end": "712329"
  },
  {
    "text": "to drive the system and to correct for that you need a derivative component right and that's where PID comes from a",
    "start": "712329",
    "end": "717850"
  },
  {
    "text": "proportional integral and a derivative component and control theory actually says you can't be a completely stable",
    "start": "717850",
    "end": "723339"
  },
  {
    "text": "system without all three even on the real world there's a lot of you know p i-- controllers they just there's",
    "start": "723339",
    "end": "728829"
  },
  {
    "text": "theoretical shocks they may not be able to absorb and if you can build a mental",
    "start": "728829",
    "end": "737079"
  },
  {
    "text": "model of like analyzing systems through this framework we're gonna go through a",
    "start": "737079",
    "end": "742120"
  },
  {
    "text": "few it can give you really simple insights and you can very quickly",
    "start": "742120",
    "end": "747550"
  },
  {
    "text": "determine that a system you know may not be stable or or or safe or needs",
    "start": "747550",
    "end": "754000"
  },
  {
    "text": "correction in some way so this is the example of a furnace right it's actually produced the exact same graph and the",
    "start": "754000",
    "end": "761260"
  },
  {
    "text": "exact same response for like an auto scaling system and all of scaling is a fancy furnace there's there's a there's",
    "start": "761260",
    "end": "768430"
  },
  {
    "text": "not much else going on that you know in the case of an auto scaling system you",
    "start": "768430",
    "end": "774310"
  },
  {
    "text": "know we're measuring some target metric right like say cpu like the utilization on a fleet right so let's say i've got",
    "start": "774310",
    "end": "780639"
  },
  {
    "text": "ten ec2 instances and my goal is that none of them should be more than you",
    "start": "780639",
    "end": "785649"
  },
  {
    "text": "know 20% of cpu or something like that which would be a typical value it seems low but people pick those values because",
    "start": "785649",
    "end": "790959"
  },
  {
    "text": "they want very responsive late and sees and they don't want queues building up and that our garbage collection and all",
    "start": "790959",
    "end": "796630"
  },
  {
    "text": "those kind of things so we measure it state and we see okay what's the CPU if it's below way",
    "start": "796630",
    "end": "803339"
  },
  {
    "text": "below 20 then the system can be like oh you've got too many hosts I'm gonna scale you down just like turning the",
    "start": "803339",
    "end": "809100"
  },
  {
    "text": "heat off right and then the CPU starts to rise a bit because the fleet gets a little bit more contended now that",
    "start": "809100",
    "end": "814559"
  },
  {
    "text": "there's fewer boxes and you can see what's gonna happen right eventually I'll get small enough that the CPU will go above 20 percent on",
    "start": "814559",
    "end": "820999"
  },
  {
    "text": "whatever the remaining number of hosts are and we'll start scaling out again right or putting or vertically or",
    "start": "820999",
    "end": "827459"
  },
  {
    "text": "horizontally whatever way the system has been tuned to scale and the our auto",
    "start": "827459",
    "end": "834059"
  },
  {
    "text": "scaling system that we've built we haven't did a direct AC to auto scaling system you can use it to",
    "start": "834059",
    "end": "840119"
  },
  {
    "text": "provision instances this is exactly how it works we have also have auto scaling systems that are built into our elastic",
    "start": "840119",
    "end": "846600"
  },
  {
    "text": "load balancer that are built into how we provision storage or if you're using a",
    "start": "846600",
    "end": "851970"
  },
  {
    "text": "service like dynamodb DynamoDB you know how many storage slices to use to give",
    "start": "851970",
    "end": "857730"
  },
  {
    "text": "you a certain amount of IUP's and so on this is the exact kind of control system that's going on behind the scenes now",
    "start": "857730",
    "end": "864989"
  },
  {
    "text": "they get fancier over time right a simple PI controller will do a pretty",
    "start": "864989",
    "end": "870989"
  },
  {
    "text": "good job but it's maybe not as optimal or as efficient as something with more knowledge can be so an example something",
    "start": "870989",
    "end": "879660"
  },
  {
    "text": "we launched pretty recently that's part of our auto scaling services we launched support for machine learning based",
    "start": "879660",
    "end": "885449"
  },
  {
    "text": "forecasting right which is kind of incredible what what we can do is we can actually look",
    "start": "885449",
    "end": "892439"
  },
  {
    "text": "at your metric and say well this is this is the metric that you want ahead over time you want to be this 20% and so on",
    "start": "892439",
    "end": "897809"
  },
  {
    "text": "we can analyze our metric using techniques like Fourier analysis right that break it down into constituent",
    "start": "897809",
    "end": "904970"
  },
  {
    "text": "frequencies so a lot of metrics that we look at like a lot of people's daily load patterns our daily load patterns",
    "start": "904970",
    "end": "912149"
  },
  {
    "text": "right or but they also have like a weekly load pattern right so even so every day you know it's maybe busy in",
    "start": "912149",
    "end": "919259"
  },
  {
    "text": "the evenings if it's say an entertainment service you know people watching videos or something like that but then every week maybe you know",
    "start": "919259",
    "end": "927029"
  },
  {
    "text": "Friday night is your busiest week because that's what our busiest out of the week and then you might have busier days or quieter days across",
    "start": "927029",
    "end": "934440"
  },
  {
    "text": "because of holidays and sporting events and so on right and that's kind of analysis can",
    "start": "934440",
    "end": "940320"
  },
  {
    "text": "find these patterns and then they can be forecast right so we can replay them",
    "start": "940320",
    "end": "946290"
  },
  {
    "text": "into the future and see well what's gonna happen and we can actually apply machine learning techniques to it now we",
    "start": "946290",
    "end": "952020"
  },
  {
    "text": "have inference models and so on that can figure out what they think is gonna happen next and prescale before they're",
    "start": "952020",
    "end": "958230"
  },
  {
    "text": "gonna happen and you know this just looks like a machine learning feature but to me looking at this system through",
    "start": "958230",
    "end": "965520"
  },
  {
    "text": "the lens of a PID controller is like well this is just a fancy integral right",
    "start": "965520",
    "end": "970740"
  },
  {
    "text": "this is like the I component of a PID controller what I'm trying to do is I'm trying to look at my total history and",
    "start": "970740",
    "end": "977000"
  },
  {
    "text": "project a little into the future right integration is essentially a form of forecasting and so it still fits in may",
    "start": "977000",
    "end": "985290"
  },
  {
    "text": "in my PID controller model and can still be analyzed in that way and I've tested",
    "start": "985290",
    "end": "990810"
  },
  {
    "text": "it out I've done a few things along those things like you can you know play with different values and see how the",
    "start": "990810",
    "end": "996570"
  },
  {
    "text": "system responds as you would expect a PID controller to work and it does now",
    "start": "996570",
    "end": "1002630"
  },
  {
    "text": "that's it that's a really simple straightforward kind of application of a pit controller a less kind of simple one",
    "start": "1002630",
    "end": "1010970"
  },
  {
    "text": "and less common one is well we can auto scale when we've got elastic capacity right like you know we can take users",
    "start": "1010970",
    "end": "1017840"
  },
  {
    "text": "wherever they are in the world and send them to the closest best region you know that I'm operating in and we can just",
    "start": "1017840",
    "end": "1024500"
  },
  {
    "text": "scale elastically so that everybody can be serviced by their absolutely best region right that's great when I've got",
    "start": "1024500",
    "end": "1031459"
  },
  {
    "text": "elastic capacity but when I've got fixed capacity like we also have a CDN Amazon",
    "start": "1031459",
    "end": "1036890"
  },
  {
    "text": "CloudFront and that's got fixed well to the static capacity you know when we build a cloud for insight it goes in",
    "start": "1036890",
    "end": "1043730"
  },
  {
    "text": "there with a certain number of machines you know we put some racks in a room and it's got those machines and actually the",
    "start": "1043730",
    "end": "1048980"
  },
  {
    "text": "count might go slightly down over time because there's a failure rate and you know not everything gets replaced",
    "start": "1048980",
    "end": "1054190"
  },
  {
    "text": "instantaneously and but essentially they have they have the capacity they have",
    "start": "1054190",
    "end": "1059450"
  },
  {
    "text": "you know I can't just like launching an ec2 instance I can't just go in tomorrow and add another racket",
    "start": "1059450",
    "end": "1065860"
  },
  {
    "text": "a bit of planning and there's a whole procedure for that and so on and so you might think this is somewhere where you",
    "start": "1065860",
    "end": "1072340"
  },
  {
    "text": "know figuring out which side can take which users well how could a pit",
    "start": "1072340",
    "end": "1077559"
  },
  {
    "text": "controller help there one way is well we we know one easy way to do a system here",
    "start": "1077559",
    "end": "1085240"
  },
  {
    "text": "would be okay figure out what the capacity of each side is figure out your peak time of every single day okay and",
    "start": "1085240",
    "end": "1092799"
  },
  {
    "text": "then make sure that at that peak time no site would be overwhelmed you know only allocate each site enough users enough",
    "start": "1092799",
    "end": "1100720"
  },
  {
    "text": "of like the close users that you're not gonna overwhelm each size but that's",
    "start": "1100720",
    "end": "1106660"
  },
  {
    "text": "very inefficient because then at night when things are a bit less busy while",
    "start": "1106660",
    "end": "1112150"
  },
  {
    "text": "there's lots of users who might be slightly better serviced by a site but they're going to maybe their second or",
    "start": "1112150",
    "end": "1117760"
  },
  {
    "text": "their third best site which it's just not optimal and actually ends up just",
    "start": "1117760",
    "end": "1124600"
  },
  {
    "text": "because of the way you know time zones work and people having different periods of activity across the world leads to",
    "start": "1124600",
    "end": "1130480"
  },
  {
    "text": "suboptimal packing this is something we do in Clara font is that we actually run a control system we're constantly",
    "start": "1130480",
    "end": "1137410"
  },
  {
    "text": "measuring the utilization of each site and depending on that utilization like",
    "start": "1137410",
    "end": "1143590"
  },
  {
    "text": "we figure out what's our error how far away from optimized and we changed the",
    "start": "1143590",
    "end": "1148690"
  },
  {
    "text": "kind of like mass or radius of effect of",
    "start": "1148690",
    "end": "1153850"
  },
  {
    "text": "each site right so that a really busy time of day like really close to peak its servicing you know everybody in that",
    "start": "1153850",
    "end": "1160450"
  },
  {
    "text": "city everybody directly around it drawing those in but that are quieter time of day can extend a little further and and",
    "start": "1160450",
    "end": "1166960"
  },
  {
    "text": "go out and that's an exam it's like a big system of dynamic Springs all interconnected and so on all with pit",
    "start": "1166960",
    "end": "1174250"
  },
  {
    "text": "loops and it's amazing how optimal a",
    "start": "1174250",
    "end": "1180250"
  },
  {
    "text": "system like that can be and how applying a system like that has actually increased our effectiveness as a CDN",
    "start": "1180250",
    "end": "1187450"
  },
  {
    "text": "provider you know we now provide stream quite a lot of video that people are",
    "start": "1187450",
    "end": "1193210"
  },
  {
    "text": "watching at home a pretty high percentage of it is is hosted on cloud for these days",
    "start": "1193210",
    "end": "1198500"
  },
  {
    "text": "and I think a lot of that still directly in part to that to that control system",
    "start": "1198500",
    "end": "1203780"
  },
  {
    "text": "so these are you know straightforward examples of where viewed applied pit",
    "start": "1203780",
    "end": "1210050"
  },
  {
    "text": "loops I'm gonna go through some more but like I said I wanted to give us more of a mental model and some jumping-off",
    "start": "1210050",
    "end": "1215780"
  },
  {
    "text": "points and ways of utilizing kit theory kind of more directly and in in our",
    "start": "1215780",
    "end": "1223040"
  },
  {
    "text": "daily lives and their daily jobs and so when I gave this talk back in November I",
    "start": "1223040",
    "end": "1228620"
  },
  {
    "text": "said that if you if you go to the effort of really understanding control theory it can be like a superpower right it can",
    "start": "1228620",
    "end": "1235760"
  },
  {
    "text": "really help you deep dive into these systems and the superpower I think it is is its most like his x-ray vision",
    "start": "1235760",
    "end": "1242320"
  },
  {
    "text": "because it'll you can really nail some some things and so the first of five",
    "start": "1242320",
    "end": "1248180"
  },
  {
    "text": "kind of patterns that I'm just gonna go through into what I see as like common anti patterns or common lessons from",
    "start": "1248180",
    "end": "1255380"
  },
  {
    "text": "control theory that I see us miss in real world designs and the first is open",
    "start": "1255380",
    "end": "1261380"
  },
  {
    "text": "loops and it's um it's very natural when",
    "start": "1261380",
    "end": "1266900"
  },
  {
    "text": "you're building a control system right when you when you've got you something needs to do something right I've got to",
    "start": "1266900",
    "end": "1273770"
  },
  {
    "text": "get a config onto ten boxes I've got to launch ten instances you know it's very",
    "start": "1273770",
    "end": "1279110"
  },
  {
    "text": "natural to have a script or write a system that just does those things in",
    "start": "1279110",
    "end": "1284330"
  },
  {
    "text": "that order right we've probably all seen scripts like this at small-scale they",
    "start": "1284330",
    "end": "1289730"
  },
  {
    "text": "work fine and if you're doing things manually you know this is what this is",
    "start": "1289730",
    "end": "1294980"
  },
  {
    "text": "how we do manual actions and so on as well but systems like this are an open",
    "start": "1294980",
    "end": "1300230"
  },
  {
    "text": "loop right there just doing actions and nothing's really checking if those actions occur and you know we've gotten",
    "start": "1300230",
    "end": "1308990"
  },
  {
    "text": "really good at building reliable infrastructure and in some ways to good like it works so reliably you just do a",
    "start": "1308990",
    "end": "1316190"
  },
  {
    "text": "time after time after time you never really noticed well what if it failed one day something is gonna go wrong right and that can kind of creep",
    "start": "1316190",
    "end": "1323090"
  },
  {
    "text": "into systems in very very dangerous ways and a surprising number of control",
    "start": "1323090",
    "end": "1329360"
  },
  {
    "text": "systems are just like this they're just open loops you know I can't count the number of",
    "start": "1329360",
    "end": "1335510"
  },
  {
    "text": "customers I've gone through control systems with and they told me well we",
    "start": "1335510",
    "end": "1341450"
  },
  {
    "text": "have this system that pushes out some states and some configuration and so on it sometimes it doesn't do it like and",
    "start": "1341450",
    "end": "1347390"
  },
  {
    "text": "they don't really know why but they have built this other button that they press that basically starts everything all",
    "start": "1347390",
    "end": "1353150"
  },
  {
    "text": "over and it gets there the next time and in some cases they even have their support personnel you know at the end of",
    "start": "1353150",
    "end": "1358670"
  },
  {
    "text": "a phone line that's what they do you know they get a complaint from one of their customers saying you know I took",
    "start": "1358670",
    "end": "1364580"
  },
  {
    "text": "an action I'd set a setting and it didn't happen and they have this magic button that's just they press it and it",
    "start": "1364580",
    "end": "1370790"
  },
  {
    "text": "syncs all the configure ghin and it's fixed and it's I find that kind of scary",
    "start": "1370790",
    "end": "1376190"
  },
  {
    "text": "because what it's saying is nothing's actually monitoring the system nothing's really checking that everything is as it",
    "start": "1376190",
    "end": "1381200"
  },
  {
    "text": "should be and already every day they're getting this kind of you know creep from",
    "start": "1381200",
    "end": "1387560"
  },
  {
    "text": "from what the state should be if they ever had a really big problem like a big shock in the system it clearly wouldn't",
    "start": "1387560",
    "end": "1392840"
  },
  {
    "text": "be able to self repair healthily which is which is not which is not what you",
    "start": "1392840",
    "end": "1398630"
  },
  {
    "text": "want another common reason for open loops is when actions are just infrequent right if it's an action that",
    "start": "1398630",
    "end": "1404720"
  },
  {
    "text": "you're not taking really really often odds are it's just an open loop it's relying on people to fix things not the",
    "start": "1404720",
    "end": "1411080"
  },
  {
    "text": "system itself there's two kind of complementary tools in the chest that we",
    "start": "1411080",
    "end": "1418070"
  },
  {
    "text": "all have these days that really help combat open loops the first is chaos",
    "start": "1418070",
    "end": "1423500"
  },
  {
    "text": "engineering right if you actually deliberately go break things a lot that tends to find a lot of open loops and",
    "start": "1423500",
    "end": "1429410"
  },
  {
    "text": "make it obvious that they have to be fixed it drives me crazy a little because I find that you know you can",
    "start": "1429410",
    "end": "1435710"
  },
  {
    "text": "probably just tank through a lot of the things chaos engineering will find and that can be quicker and then the other",
    "start": "1435710",
    "end": "1442730"
  },
  {
    "text": "is observability right there really what this problems face demands is look we've got to be monitoring things we really",
    "start": "1442730",
    "end": "1448820"
  },
  {
    "text": "got to be keeping an eye on it we have to observability systems at a West cloud",
    "start": "1448820",
    "end": "1455960"
  },
  {
    "text": "watch an x-ray and one of the things I didn't appreciate until I joined Ada",
    "start": "1455960",
    "end": "1462170"
  },
  {
    "text": "West who knows a bit bit like going going and Charlie and the",
    "start": "1462170",
    "end": "1467200"
  },
  {
    "text": "Chocolate Factory and seeing the insides I expected to see all sorts of cool algorithms and all sorts of fancy",
    "start": "1467200",
    "end": "1472270"
  },
  {
    "text": "techniques and things that I just never imagined and it was kind of a little bit",
    "start": "1472270",
    "end": "1477549"
  },
  {
    "text": "of that like there was some of that once I once I got inside working but mostly what I found was really mundane the book",
    "start": "1477549",
    "end": "1483760"
  },
  {
    "text": "that people were just doing a lot of things at scale that I didn't realize and one of those things was just the",
    "start": "1483760",
    "end": "1489160"
  },
  {
    "text": "sheer volume of Mah during like the number of metrics we keep on you know",
    "start": "1489160",
    "end": "1494470"
  },
  {
    "text": "every single host every single system I still find staggering like we've we've made collecting those metrics extremely",
    "start": "1494470",
    "end": "1501909"
  },
  {
    "text": "cheap and then we collect them as much as possible and that helps us close all these loops right that helps us build",
    "start": "1501909",
    "end": "1508450"
  },
  {
    "text": "systems where you know we can detect drift and we can make sure they're in they're heading for stable States and",
    "start": "1508450",
    "end": "1516190"
  },
  {
    "text": "not heading for unstable States we try",
    "start": "1516190",
    "end": "1521230"
  },
  {
    "text": "to avoid infrequent actions right if if we have a process that's happening once",
    "start": "1521230",
    "end": "1527110"
  },
  {
    "text": "a year it's almost certainly doomed to failure right if it's happening once a day it's probably okay my classic",
    "start": "1527110",
    "end": "1534669"
  },
  {
    "text": "favorite example of this as an open loop process is certificate rotation right so",
    "start": "1534669",
    "end": "1542710"
  },
  {
    "text": "I like I happen to work on T lasts a lot it's it's something I spent a lot of my time on and not a week goes by without",
    "start": "1542710",
    "end": "1550059"
  },
  {
    "text": "some major website having a certificate outage right and often it's because they got like a three year or a one-year",
    "start": "1550059",
    "end": "1557890"
  },
  {
    "text": "certificate and they put it on their boxes like okay well I don't have to think about it for another year or three",
    "start": "1557890",
    "end": "1563919"
  },
  {
    "text": "and then the person leaves and there's nothing really monitoring it nobody's getting an email and then you know that",
    "start": "1563919",
    "end": "1571179"
  },
  {
    "text": "day comes and the certificate isn't valid anymore and we're in trouble a really really common open loop is just",
    "start": "1571179",
    "end": "1578590"
  },
  {
    "text": "credential management in general of which this is just one example I mean West we built it you know we have",
    "start": "1578590",
    "end": "1585760"
  },
  {
    "text": "this problem too right we have to keep a lot of certificates in sync so we built",
    "start": "1585760",
    "end": "1590980"
  },
  {
    "text": "our own certificate management system and we actually made it public we use this ourselves it's tied into ELB and",
    "start": "1590980",
    "end": "1597970"
  },
  {
    "text": "cloud front and a bunch of things but having that system with a closed loop so Amazon",
    "start": "1597970",
    "end": "1602980"
  },
  {
    "text": "certificate manager is actually monitoring certificates as well looking for any drift making sure that the low",
    "start": "1602980",
    "end": "1609130"
  },
  {
    "text": "bouncers that should have things really have them that a cloud form distribution that should have it really has it and so",
    "start": "1609130",
    "end": "1614350"
  },
  {
    "text": "on and it's even possible to look monitor and alert and so on and on",
    "start": "1614350",
    "end": "1620920"
  },
  {
    "text": "certificate expiry times if you've loaded them in manually so the the magic",
    "start": "1620920",
    "end": "1627460"
  },
  {
    "text": "to fixing these open loops is to really think about measuring first right like I",
    "start": "1627460",
    "end": "1633550"
  },
  {
    "text": "said with that earliest example about just taking feedback and integrating that but approaching systems design as",
    "start": "1633550",
    "end": "1641520"
  },
  {
    "text": "okay I'm not gonna write a script or a control system that just does ax then Y",
    "start": "1641520",
    "end": "1647440"
  },
  {
    "text": "then Z instead I'm gonna approach it as I'm gonna describe my desired state so",
    "start": "1647440",
    "end": "1654370"
  },
  {
    "text": "it's a bit more declarative and then you're gonna write a system that kind of drives everything to that desired state",
    "start": "1654370",
    "end": "1659590"
  },
  {
    "text": "those are very different shapes of systems right like you'll just write your code very differently when you've",
    "start": "1659590",
    "end": "1665860"
  },
  {
    "text": "got that maple model and in my experience that model is is far better if are better because it is a closed",
    "start": "1665860",
    "end": "1673360"
  },
  {
    "text": "loop from day one far better because they tend to be smaller more succinct",
    "start": "1673360",
    "end": "1678400"
  },
  {
    "text": "way stew just describe these systems far better because it can also be dual purpose like often you're provisioning",
    "start": "1678400",
    "end": "1685030"
  },
  {
    "text": "system can be the same as a control system like for example you know you show up on day one and you've got a new",
    "start": "1685030",
    "end": "1690809"
  },
  {
    "text": "region to build in our case or availability zone to build or something like that again in our case you know you",
    "start": "1690809",
    "end": "1696940"
  },
  {
    "text": "can just run your control plane and it starts off and the error is I don't have any of my hosts so provision them right",
    "start": "1696940",
    "end": "1703750"
  },
  {
    "text": "it's because that's what it's meant to do that's what it's built to do and it ends up having a dual role which is kind",
    "start": "1703750",
    "end": "1709360"
  },
  {
    "text": "of cool if you're into form of verification like I am it is vastly",
    "start": "1709360",
    "end": "1714550"
  },
  {
    "text": "easier you know when you get to the stage where you can formally verify something to to verify declarative",
    "start": "1714550",
    "end": "1720220"
  },
  {
    "text": "system systems that have their state described like that it's just easier the tools are more structured that way we've",
    "start": "1720220",
    "end": "1726880"
  },
  {
    "text": "been doing a bunch of this we've we've got papers out where we've we use TLA + and saw and crypt all and",
    "start": "1726880",
    "end": "1734130"
  },
  {
    "text": "you can you can search for those if you're interested but we also use tools like F star and Coke and so on which are",
    "start": "1734130",
    "end": "1740940"
  },
  {
    "text": "pretty awesome and useful for verifying these kinds of systems anyway that's the first x-ray vision superpower look for",
    "start": "1740940",
    "end": "1747750"
  },
  {
    "text": "open loops so the second is about power loss right and it's about looking for",
    "start": "1747750",
    "end": "1754890"
  },
  {
    "text": "power laws and systems and how to fight them and I'm the reason for this is to do with another mental model that I have",
    "start": "1754890",
    "end": "1762960"
  },
  {
    "text": "which is around how errors propagate so like imagine your distributed system in",
    "start": "1762960",
    "end": "1770730"
  },
  {
    "text": "my case the cloud right as just this one big uniform collection of boxes and",
    "start": "1770730",
    "end": "1776070"
  },
  {
    "text": "these boxes might represent hosts or applications or processes or however",
    "start": "1776070",
    "end": "1781320"
  },
  {
    "text": "granular you want these could be you know every tiny little bit of memory on every device in your entire system right",
    "start": "1781320",
    "end": "1788280"
  },
  {
    "text": "and someday an error happens somewhere that you didn't really plan for right an",
    "start": "1788280",
    "end": "1794760"
  },
  {
    "text": "exception is thrown a box chokes up a piece of hardware fails like whatever",
    "start": "1794760",
    "end": "1800309"
  },
  {
    "text": "right well in distributed systems that box has dependencies right and they tend",
    "start": "1800309",
    "end": "1806790"
  },
  {
    "text": "to fail then - especially if they're synchronous systems right so now these other things that we're talking to it",
    "start": "1806790",
    "end": "1812549"
  },
  {
    "text": "are failing in unpredictable ways and that's Brad's and like an e network effect right when things are",
    "start": "1812549",
    "end": "1819179"
  },
  {
    "text": "interconnected they tend to exhibit power loss and how they spread right because things just exponentially",
    "start": "1819179",
    "end": "1824970"
  },
  {
    "text": "increase at each at each layer and that's kind of what we're fighting in system stability right that's the problem and it's a really tough one",
    "start": "1824970",
    "end": "1832470"
  },
  {
    "text": "you know our primary mechanism for fighting this and Amazon Web Services is we compartmentalize right we just don't",
    "start": "1832470",
    "end": "1838440"
  },
  {
    "text": "let ourselves have really really big systems we instead try to have cellular systems like our availability zones and",
    "start": "1838440",
    "end": "1845610"
  },
  {
    "text": "regions that are like really strongly isolated so that errors we can't even think about just won't spread and that's",
    "start": "1845610",
    "end": "1852750"
  },
  {
    "text": "been working pretty well for us and also is a lesson from control theory a lot of the literature and control theory talks",
    "start": "1852750",
    "end": "1858360"
  },
  {
    "text": "about you know if you've got a critical system dividing it up into compartments and controlling them independently",
    "start": "1858360",
    "end": "1863660"
  },
  {
    "text": "at the cost of maybe some optimality tends to be tends to be worth it a good example there is uh you know nuclear",
    "start": "1863660",
    "end": "1870170"
  },
  {
    "text": "power plants you know typically each reactor is controlled independently right because the risk of having one",
    "start": "1870170",
    "end": "1875600"
  },
  {
    "text": "control system for all of them just isn't worth it so that that helps but",
    "start": "1875600",
    "end": "1882170"
  },
  {
    "text": "you know you that still that still means you could have an error that propagates to infect the whole compartment but we",
    "start": "1882170",
    "end": "1889250"
  },
  {
    "text": "want to be able to fight that so we need our own power laws that can fight back you know things that can push in the",
    "start": "1889250",
    "end": "1894770"
  },
  {
    "text": "other direction and these are like those integral and derivative components right these are things that can drive the",
    "start": "1894770",
    "end": "1900560"
  },
  {
    "text": "system into the state we want exponential back-off right really strong examples the exponential back-off is",
    "start": "1900560",
    "end": "1906830"
  },
  {
    "text": "basically an integral right where you know an error happens and we retry you",
    "start": "1906830",
    "end": "1912710"
  },
  {
    "text": "know maybe a second later that fails well then we wait you know an exponentially increase the amount of",
    "start": "1912710",
    "end": "1917930"
  },
  {
    "text": "time three seconds then ten seconds then 100 seconds right it's clearly exponential and it's clearly acting",
    "start": "1917930",
    "end": "1924050"
  },
  {
    "text": "acting based on the total history and and that really helps in fact it's the only way to drive an overloaded system",
    "start": "1924050",
    "end": "1930290"
  },
  {
    "text": "back to stability is with some kind of exponential back-off very very powerful rate limiters they're kind of like",
    "start": "1930290",
    "end": "1937040"
  },
  {
    "text": "derivatives right they're just raid estimators and what's going on and deciding what's to let in and what to",
    "start": "1937040",
    "end": "1943700"
  },
  {
    "text": "let out and we've built both of these actually into the ada wes SDKs right so like if you're using the s3 client or",
    "start": "1943700",
    "end": "1950720"
  },
  {
    "text": "dynamodb client these are built in and we've really finely tuned these things",
    "start": "1950720",
    "end": "1955850"
  },
  {
    "text": "you know we've tuned them so that we've got the appropriate amounts of jitter they've got the appropriate amounts of back off and then we also rate limit the",
    "start": "1955850",
    "end": "1964280"
  },
  {
    "text": "retries themselves so that we don't get crazy distributed retry storms that can",
    "start": "1964280",
    "end": "1969830"
  },
  {
    "text": "take down entire systems and we've really focused to make the backpressure as efficient and effective as as we",
    "start": "1969830",
    "end": "1979010"
  },
  {
    "text": "think it needs to be this is not an easy problem and there's a whole science and",
    "start": "1979010",
    "end": "1984590"
  },
  {
    "text": "control theory called loop tuning right about getting all these little parameters perfectly optimal and I think",
    "start": "1984590",
    "end": "1991190"
  },
  {
    "text": "there's about four or five years of history now gone into the LMS SDKs I'm just how we're trying to get this",
    "start": "1991190",
    "end": "1997049"
  },
  {
    "text": "right and we're constantly trying to improve it but it's but it's pretty cool and worth copying we've got other",
    "start": "1997049",
    "end": "2004820"
  },
  {
    "text": "backpressure strategies too you know we've got systems where servers can tell clients you know back off please I'm a",
    "start": "2004820",
    "end": "2010369"
  },
  {
    "text": "little busy right now all those kind of things working together but if I look at a system design and it doesn't have any",
    "start": "2010369",
    "end": "2016549"
  },
  {
    "text": "of this if it doesn't have exponential back-off if it doesn't have rate limiters in some place if it's not able",
    "start": "2016549",
    "end": "2022070"
  },
  {
    "text": "to fight some power law that I think might arise due to errors propagating",
    "start": "2022070",
    "end": "2027429"
  },
  {
    "text": "that tells me you know I need I need to be a bit more worried and start digging deeper there's a also great paper or a",
    "start": "2027429",
    "end": "2036499"
  },
  {
    "text": "blog post I should say by mark broker my colleague which you can search for where he goes into some really fine grained",
    "start": "2036499",
    "end": "2042379"
  },
  {
    "text": "detail about how the stuff we put into the SDKs actually works so that's the second five patterns the third is about",
    "start": "2042379",
    "end": "2052039"
  },
  {
    "text": "liveness and lag so pretty much any control system is doomed to failure if",
    "start": "2052039",
    "end": "2057919"
  },
  {
    "text": "its operating on old information right and old information can be even worse",
    "start": "2057919",
    "end": "2063349"
  },
  {
    "text": "than no information right like if we were you know controlling the temperature in this room based on the",
    "start": "2063349",
    "end": "2070549"
  },
  {
    "text": "temperature you know 30 minutes ago that's just not going to work because there weren't so many people in the room",
    "start": "2070549",
    "end": "2076669"
  },
  {
    "text": "at that time and the informations just false and it's it's gonna heat it up too much it's now no good but this can crop",
    "start": "2076669",
    "end": "2085398"
  },
  {
    "text": "up a lot and the reason this can crop up a lot in distributed systems is we often use workflows to do things right and",
    "start": "2085399",
    "end": "2092148"
  },
  {
    "text": "workflows can start just taking variable amounts of time you know as the work flow grows and we put more work in it",
    "start": "2092149",
    "end": "2097819"
  },
  {
    "text": "you can just start taking longer to do things I'm also reporting back metrics like",
    "start": "2097819",
    "end": "2103730"
  },
  {
    "text": "getting information back can also become laggy especially when you've got a really busy day or a really chaotic",
    "start": "2103730",
    "end": "2110270"
  },
  {
    "text": "event lots of stuff going on and that can result in you know ephemeral shocks",
    "start": "2110270",
    "end": "2117349"
  },
  {
    "text": "to the system you know like huge spikes in load or a Matar addict sudden",
    "start": "2117349",
    "end": "2122750"
  },
  {
    "text": "decrease in capacity can become unrecoverable right because the system",
    "start": "2122750",
    "end": "2127849"
  },
  {
    "text": "just becomes overwhelmed and then the lag starts driving the system and it can never",
    "start": "2127849",
    "end": "2133730"
  },
  {
    "text": "really get back into the state it wants to be the the underlying reason for a",
    "start": "2133730",
    "end": "2139400"
  },
  {
    "text": "lot of this is because we we use FIFO for most things I'll get to that in a",
    "start": "2139400",
    "end": "2145130"
  },
  {
    "text": "second the kind of bullet proof fix for these systems is impractical and very",
    "start": "2145130",
    "end": "2152990"
  },
  {
    "text": "expensive but it's to do everything everywhere in constant time right so a",
    "start": "2152990",
    "end": "2159260"
  },
  {
    "text": "simple example of that is let's say I've got a configuration file and it's got",
    "start": "2159260",
    "end": "2164540"
  },
  {
    "text": "some user parameters in it that they can set right and one way to build that system is okay user sets parameter well",
    "start": "2164540",
    "end": "2171800"
  },
  {
    "text": "just push that little diff or Delta out to the system works great right until",
    "start": "2171800",
    "end": "2177200"
  },
  {
    "text": "lots of user just changed their settings at the same time if you've got some kind of correlated condition now the system",
    "start": "2177200",
    "end": "2182540"
  },
  {
    "text": "gets super laggy right a different way to build it would be well just push all the state every time you know especially",
    "start": "2182540",
    "end": "2188480"
  },
  {
    "text": "if it's not too big that can be practical it gets expensive for for really big systems the same for",
    "start": "2188480",
    "end": "2195770"
  },
  {
    "text": "measuring things measure everything all the time well we're a little bit better about that that tends to be how monitoring systems work we have some",
    "start": "2195770",
    "end": "2203119"
  },
  {
    "text": "systems at a breast like our most critical systems where we've built this patterning so our systems for doing DNS",
    "start": "2203119",
    "end": "2210230"
  },
  {
    "text": "health checks networking health checks and so on they're so critical to",
    "start": "2210230",
    "end": "2215599"
  },
  {
    "text": "availability they have to work even during the most critical events even during when there's total chaos they",
    "start": "2215599",
    "end": "2222050"
  },
  {
    "text": "absolutely have to work so we built those as completely constant time systems you know when you set up a roof",
    "start": "2222050",
    "end": "2227660"
  },
  {
    "text": "50 tree he'll check that's like pinging your website to see if it's healthy or not and should your traffic load go to",
    "start": "2227660",
    "end": "2233390"
  },
  {
    "text": "you know this web server in this zone or this web server in this other zone that's happening at the same rate all",
    "start": "2233390",
    "end": "2240440"
  },
  {
    "text": "the time and the information about it's being relayed back all the time it's healthy or unhealthy healthy or",
    "start": "2240440",
    "end": "2246079"
  },
  {
    "text": "unhealthy not oh it went from healthy to unhealthy so I'll only send that Delta",
    "start": "2246079",
    "end": "2251089"
  },
  {
    "text": "back and that makes it really really robust and reliable if you if you do",
    "start": "2251089",
    "end": "2258319"
  },
  {
    "text": "need a cue or a workflow think really really carefully about how deep that should be",
    "start": "2258319",
    "end": "2264380"
  },
  {
    "text": "allowed grow you know in general we want to keep them really short if they get too long like it's best to return errors",
    "start": "2264380",
    "end": "2271269"
  },
  {
    "text": "we've I mean that it's a lesson I've heard restated from so many different",
    "start": "2271269",
    "end": "2277759"
  },
  {
    "text": "places that I think it's an extremely deep one and that for information channels if you're relaying back metrics",
    "start": "2277759",
    "end": "2284839"
  },
  {
    "text": "and so on LIFO is commonly overlooked and it's a really great strategy a LIFO",
    "start": "2284839",
    "end": "2292160"
  },
  {
    "text": "queue does exactly what we want here always prioritize liveness it'll always give you the most recent information a",
    "start": "2292160",
    "end": "2297890"
  },
  {
    "text": "little backfill you know when it has some capacity any previous informations like the best of both worlds was rarely",
    "start": "2297890",
    "end": "2304670"
  },
  {
    "text": "seen you rarely see like those in information systems ours are but I don't",
    "start": "2304670",
    "end": "2312140"
  },
  {
    "text": "know why it's more not more common so my fourth pattern and a really short and",
    "start": "2312140",
    "end": "2317240"
  },
  {
    "text": "simple one is to look for false functions so the thing you're measuring you want it to be like a real function",
    "start": "2317240",
    "end": "2323210"
  },
  {
    "text": "you want it to be something that like moves in a predictable way that is",
    "start": "2323210",
    "end": "2328519"
  },
  {
    "text": "something you're actually trying to control and it's really common for there",
    "start": "2328519",
    "end": "2335059"
  },
  {
    "text": "to be many dimensions of utilization in the distributed system so a really simple example right let's say we've got",
    "start": "2335059",
    "end": "2340160"
  },
  {
    "text": "a web server and it's taking requests well as load goes up you know CPU goes",
    "start": "2340160",
    "end": "2346369"
  },
  {
    "text": "up at a certain rate because of like SSL handshakes and whatnot memory consumption goes up at a certain rate",
    "start": "2346369",
    "end": "2351710"
  },
  {
    "text": "because of you know overloads and maybe I've got a caching system and my cache utilization goes up at a different rate",
    "start": "2351710",
    "end": "2358369"
  },
  {
    "text": "all different rates right they all have their own kind of functions but what can",
    "start": "2358369",
    "end": "2366559"
  },
  {
    "text": "it happen is that someone you know we we don't always perceive that these are",
    "start": "2366559",
    "end": "2371809"
  },
  {
    "text": "different things and we instead measure some synthetic variable that's a fake",
    "start": "2371809",
    "end": "2377420"
  },
  {
    "text": "function of all three right it's like looking at the max of all three and that",
    "start": "2377420",
    "end": "2383599"
  },
  {
    "text": "doesn't work it turns out not to be predictable you haven't really dimensionalized the system this all is a really complicated process control",
    "start": "2383599",
    "end": "2391880"
  },
  {
    "text": "theory way to say that the UNIX load metric is evil",
    "start": "2391880",
    "end": "2396900"
  },
  {
    "text": "and and will bite you and the not like if because the eunuchs loud metric or",
    "start": "2396900",
    "end": "2402710"
  },
  {
    "text": "network latency or queue depth metrics in general so UNIX load is a cubed apt",
    "start": "2402710",
    "end": "2407819"
  },
  {
    "text": "metric is the compound of so many other things that are going on that it doesn't",
    "start": "2407819",
    "end": "2413220"
  },
  {
    "text": "really behave in a linear way there's you got to get at the underlying variables and so a lot of systems that",
    "start": "2413220",
    "end": "2419730"
  },
  {
    "text": "are built just on measuring load tend to be chaotic and not really be able to correctly control and we found that it's",
    "start": "2419730",
    "end": "2427650"
  },
  {
    "text": "best to actually measure some of the underlying things CPU turns out to be surprising rely surprisingly reliable",
    "start": "2427650",
    "end": "2433740"
  },
  {
    "text": "it's surprising to me because they spend a lot of time working on low-level CPU architecture and I know how complicated",
    "start": "2433740",
    "end": "2439829"
  },
  {
    "text": "CPU pipelines are but it turns out at the macro level just measuring CPU",
    "start": "2439829",
    "end": "2445230"
  },
  {
    "text": "percentage can be very effective and then my last pattern is about edge triggering right and so what edge",
    "start": "2445230",
    "end": "2452010"
  },
  {
    "text": "triggering is is you know you've got a system like we're heating our furnace",
    "start": "2452010",
    "end": "2457589"
  },
  {
    "text": "right and it gets and let's say we just keep the heat on and it gets all the way to the target temperature and then once",
    "start": "2457589",
    "end": "2463680"
  },
  {
    "text": "it gets to the target temperature we cross the heat off right we turn the heat off that is an edge triggered",
    "start": "2463680",
    "end": "2469470"
  },
  {
    "text": "system we triggered at the edge right and only at the edge there's a lot of",
    "start": "2469470",
    "end": "2475650"
  },
  {
    "text": "control theory and a lot of debate about edge Syst ads triggered systems versus level triggered system they can even be",
    "start": "2475650",
    "end": "2482940"
  },
  {
    "text": "modeled in terms of ease in in terms of one another but I like to really watch out for edge",
    "start": "2482940",
    "end": "2488220"
  },
  {
    "text": "triggering in systems it tends to be an anti-pattern one reason is because edge triggering seems to imply a modal",
    "start": "2488220",
    "end": "2494819"
  },
  {
    "text": "behavior you know you cross the line you kick into a new mode that mode is probably rarely tested and it's now",
    "start": "2494819",
    "end": "2501030"
  },
  {
    "text": "being kicked in two at a time of high stress that's really dangerous right I know there is that add triggering when",
    "start": "2501030",
    "end": "2507150"
  },
  {
    "text": "you think about it kind of needs us to solve to deliver exactly once problem which nobody has solved or ever will",
    "start": "2507150",
    "end": "2513450"
  },
  {
    "text": "solve right because what if you miss that message you know what if your system is while I just handle alarm when",
    "start": "2513450",
    "end": "2519180"
  },
  {
    "text": "I cross the line well what if that gets dropped well now I've got to retry it well no your system has to be idempotent",
    "start": "2519180",
    "end": "2524760"
  },
  {
    "text": "and if you're gonna build an idempotent system you might as well make a level triggered system in the first because the generally the only benefit",
    "start": "2524760",
    "end": "2531019"
  },
  {
    "text": "of building an edge triggered system is it doesn't have to be a component so I like to see a triggering only from",
    "start": "2531019",
    "end": "2536059"
  },
  {
    "text": "humans you know if I'm actually alerting a human actually sending them a page or something like that but for control",
    "start": "2536059",
    "end": "2542150"
  },
  {
    "text": "systems it's it's usually an anti-pattern it's better instead to be measuring that level like we said that",
    "start": "2542150",
    "end": "2548809"
  },
  {
    "text": "gets us to the end of all my patterns the biggest one is to look for the",
    "start": "2548809",
    "end": "2554959"
  },
  {
    "text": "system being measured honestly you'll be surprised how many times you will just",
    "start": "2554959",
    "end": "2560119"
  },
  {
    "text": "notice that the system isn't really being measured or observed and that's enough to really improve the stability",
    "start": "2560119",
    "end": "2565989"
  },
  {
    "text": "by a lot and if you learn and look into all these techniques they're really highly leveraged like I said the fruits",
    "start": "2565989",
    "end": "2572329"
  },
  {
    "text": "touching the ground it's a it's pretty cool thank you everybody for coming to",
    "start": "2572329",
    "end": "2580279"
  },
  {
    "text": "my talk it's been a pleasure and a privilege I did want to save one bad joke for the very end which is that this",
    "start": "2580279",
    "end": "2588079"
  },
  {
    "text": "is going on my resume as I performed on Broadway so I hope thank you",
    "start": "2588079",
    "end": "2596588"
  },
  {
    "text": "I can barely see so if there are",
    "start": "2600840",
    "end": "2609420"
  },
  {
    "text": "questions I'm gonna have to hear them",
    "start": "2609420",
    "end": "2613339"
  },
  {
    "text": "yeah the only question I have is because we have used machine learning for the first full patterns why can we not use",
    "start": "2620420",
    "end": "2626610"
  },
  {
    "text": "that in the edge triggering system to lower the edge just before the high stress point and that becomes a pattern",
    "start": "2626610",
    "end": "2634590"
  },
  {
    "text": "again why is it an anti pattern then say",
    "start": "2634590",
    "end": "2639720"
  },
  {
    "text": "your question you're asking well if we if we just give ourselves some margin of error if we put the line even a little",
    "start": "2639720",
    "end": "2645780"
  },
  {
    "text": "bit lower wouldn't that improve safety you can absolutely do that but in high shock or",
    "start": "2645780",
    "end": "2651930"
  },
  {
    "text": "high stress situations you'll never guarantee that there isn't too much lag between those things that you just don't",
    "start": "2651930",
    "end": "2657390"
  },
  {
    "text": "have time to correct and then I know there is there's an entire area of control theory designed around exactly",
    "start": "2657390",
    "end": "2664140"
  },
  {
    "text": "where you're talking about which is called hysteresis which is just almost exactly that property and you can",
    "start": "2664140",
    "end": "2670560"
  },
  {
    "text": "totally do it it just gets really complicated really quickly and level triggering tends to be far simpler okay",
    "start": "2670560",
    "end": "2679380"
  },
  {
    "text": "thank you but your intuition is right though it can be done yeah other",
    "start": "2679380",
    "end": "2688140"
  },
  {
    "text": "questions so you you mentioned three",
    "start": "2688140",
    "end": "2694230"
  },
  {
    "text": "variables P I I and D so can you give an example of a system that just simple",
    "start": "2694230",
    "end": "2701370"
  },
  {
    "text": "example of a system that will not recover from a stress a system that will",
    "start": "2701370",
    "end": "2707460"
  },
  {
    "text": "no longer recover from stress no just I miss this part I don't understand what",
    "start": "2707460",
    "end": "2712530"
  },
  {
    "text": "does it mean so the system is let's say auto-scaling scenario yeah can you give an example of a stressful scenario where",
    "start": "2712530",
    "end": "2719700"
  },
  {
    "text": "a similar system would not recover yeah so as if we merely had a P controller",
    "start": "2719700",
    "end": "2725220"
  },
  {
    "text": "for example for auto scaling and we suddenly lost half the capacity right",
    "start": "2725220",
    "end": "2730260"
  },
  {
    "text": "like just half the server's died what would happen is the would go up so quickly and the remaining",
    "start": "2730260",
    "end": "2737400"
  },
  {
    "text": "hosts that a P controller would with what you know way over scale the system and then load",
    "start": "2737400",
    "end": "2745349"
  },
  {
    "text": "would go down so much right because there were so many more hosts so then it would scale it back in again and it",
    "start": "2745349",
    "end": "2751830"
  },
  {
    "text": "would just oscillate like that for quite a while and that's what we mean by instability in the context of a control",
    "start": "2751830",
    "end": "2757260"
  },
  {
    "text": "system thank you",
    "start": "2757260",
    "end": "2760190"
  },
  {
    "text": "hi thanks for the talk it's a really good inside and my question is about",
    "start": "2769300",
    "end": "2774670"
  },
  {
    "text": "well we actually quite often have this situation which was just asked when we",
    "start": "2774670",
    "end": "2780310"
  },
  {
    "text": "have a relatively stable load and then a sudden spike and which we can't actually",
    "start": "2780310",
    "end": "2786490"
  },
  {
    "text": "predict and my question will be then what would be the direction to look into",
    "start": "2786490",
    "end": "2791920"
  },
  {
    "text": "maybe in this control assistance how to properly respond so usually the problem is that the response time is like too",
    "start": "2791920",
    "end": "2800320"
  },
  {
    "text": "slow we can't scale that fast and we need to know before that and it's not",
    "start": "2800320",
    "end": "2805690"
  },
  {
    "text": "that predictable yeah thanks I so I don't have an answer and I don't i we",
    "start": "2805690",
    "end": "2811180"
  },
  {
    "text": "have not yet built precognition which I would love I mean our main focus for",
    "start": "2811180",
    "end": "2816910"
  },
  {
    "text": "that I tobias has been to build systems that are just inherently you know more capacity so for example when the",
    "start": "2816910",
    "end": "2823720"
  },
  {
    "text": "differences between application Bell bouncer or main like layer 7 low bouncer and our network law bouncer is their",
    "start": "2823720",
    "end": "2830380"
  },
  {
    "text": "network club answers are scaled to like five gigabits per second minimum",
    "start": "2830380",
    "end": "2835690"
  },
  {
    "text": "millions of connections per second you know can do terabits ultimately and we",
    "start": "2835690",
    "end": "2840880"
  },
  {
    "text": "barely even need to control them right just because the Headroom is so high and that's how we're trying to fix that and",
    "start": "2840880",
    "end": "2846700"
  },
  {
    "text": "then meanwhile for other systems well we just have to react and scale as quickly as possible and we've been trying to get",
    "start": "2846700",
    "end": "2852880"
  },
  {
    "text": "our launch times down as low as low as possible and we can we can now scale and launch ec2 instances in seconds which which",
    "start": "2852880",
    "end": "2860410"
  },
  {
    "text": "helps but there's there's no other fix for that there's nothing we can do in a controller that can magic away the",
    "start": "2860410",
    "end": "2866530"
  },
  {
    "text": "unpredictable",
    "start": "2866530",
    "end": "2869160"
  },
  {
    "text": "hi you talked about like back off retry",
    "start": "2877250",
    "end": "2883340"
  },
  {
    "text": "all that stuff being really important what sort of process frameworks tools do",
    "start": "2883340",
    "end": "2889440"
  },
  {
    "text": "you have it tab to make it really easy for teams to do that sure so at ABS we",
    "start": "2889440",
    "end": "2895350"
  },
  {
    "text": "try to bake those into our like request libraries directly so we have an",
    "start": "2895350",
    "end": "2901230"
  },
  {
    "text": "internal library system called Carl which we build all of our clients and servers on and we just make it the",
    "start": "2901230",
    "end": "2906780"
  },
  {
    "text": "default sits in there and then for our customers and ourselves because we use the SDKs as well we've got our SDKs and",
    "start": "2906780",
    "end": "2914040"
  },
  {
    "text": "we bake it all in there and the SDK team that maintains all that you know they think a lot about this stuff so we just",
    "start": "2914040",
    "end": "2920670"
  },
  {
    "text": "try to make it the default that comes out of the box and not have to have to",
    "start": "2920670",
    "end": "2925830"
  },
  {
    "text": "educate customers or expect anybody to do anything different than the default that's been very successful yeah thanks",
    "start": "2925830",
    "end": "2935220"
  },
  {
    "text": "forward to talking in control theory the most gain that we can get is to actually",
    "start": "2935220",
    "end": "2942930"
  },
  {
    "text": "move the control points to as close as to the pole right I think it's in the",
    "start": "2942930",
    "end": "2947990"
  },
  {
    "text": "resort management it's not the case so that what do you think and any certainiy",
    "start": "2947990",
    "end": "2953820"
  },
  {
    "text": "and it would be great to have inside of where we actually take the point in between the establish purses the",
    "start": "2953820",
    "end": "2961080"
  },
  {
    "text": "performance I'm not sure I've heard all the questions are from the from the",
    "start": "2961080",
    "end": "2968190"
  },
  {
    "text": "given resources that we can get like an XML of like for example like computation",
    "start": "2968190",
    "end": "2974910"
  },
  {
    "text": "resources from there right but in when we actually reach pursuing the more and",
    "start": "2974910",
    "end": "2981180"
  },
  {
    "text": "more stable system then we tend to actually lose the maximum capacity that we can expand right yeah so there is",
    "start": "2981180",
    "end": "2988650"
  },
  {
    "text": "definitely tension between stability and optimality and you know in general the",
    "start": "2988650",
    "end": "2995940"
  },
  {
    "text": "more finely tuned you want to make a system to achieve absolute optimality the more risk you are at being able to",
    "start": "2995940",
    "end": "3002630"
  },
  {
    "text": "drive it into a non stable State is there are people who do entire PhDs on nothing else than like finding that",
    "start": "3002630",
    "end": "3010009"
  },
  {
    "text": "balance for one system like you know our oil refineries are a good example where",
    "start": "3010009",
    "end": "3015140"
  },
  {
    "text": "the oil industry will pay people a lot of money just to optimize that even very slightly computer science in my opinion",
    "start": "3015140",
    "end": "3023660"
  },
  {
    "text": "and distributed systems are nowhere near that level of advanced control theory",
    "start": "3023660",
    "end": "3029210"
  },
  {
    "text": "practice yet we've a long way to go we're still down at the baby steps of well at least measure it thank you",
    "start": "3029210",
    "end": "3041250"
  },
  {
    "text": "[Applause]",
    "start": "3041250",
    "end": "3045199"
  }
]