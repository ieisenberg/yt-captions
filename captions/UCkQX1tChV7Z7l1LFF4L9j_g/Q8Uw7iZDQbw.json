[
  {
    "text": "good morning everybody thanks so much for coming out and there are some more seats over here as always I don't bite",
    "start": "4180",
    "end": "11039"
  },
  {
    "text": "so we can be talking today about Microsoft's decomposition patterns hence the kind of nasty jellyfish type",
    "start": "11039",
    "end": "18700"
  },
  {
    "text": "thing because they sort of see there's tangled entities that also stinger might kill us and that has a lot in common",
    "start": "18700",
    "end": "24790"
  },
  {
    "text": "with the average Enterprise micro service migration and as Nicky said I",
    "start": "24790",
    "end": "30369"
  },
  {
    "text": "wrote some books I do some consulting and advisory work you can find out about the work I do of my company over on my",
    "start": "30369",
    "end": "35739"
  },
  {
    "text": "website I won't talk more about it now and I've got a brand new book that is",
    "start": "35739",
    "end": "40750"
  },
  {
    "text": "out as of well the end of last year called monitor micro services all blimey",
    "start": "40750",
    "end": "46359"
  },
  {
    "text": "my laptop is lagging called monitor micro services which is out now so if you want to find out more information",
    "start": "46359",
    "end": "51879"
  },
  {
    "text": "about what we're going to talk about this talk the book is available but we're here to talk about micro services",
    "start": "51879",
    "end": "57609"
  },
  {
    "text": "or more specifically how we get to them so I think a lot of people are running around being microservices micro",
    "start": "57609",
    "end": "63370"
  },
  {
    "text": "services I want a micro service you would imarco service we want to micro service we're gonna roll around in the micro services we'll make sweet micro",
    "start": "63370",
    "end": "69460"
  },
  {
    "text": "service e enterprise digital transformation together you know you",
    "start": "69460",
    "end": "75280"
  },
  {
    "text": "scratch a little surface deep on any digital transformation that's going on around the world and micro services are",
    "start": "75280",
    "end": "81100"
  },
  {
    "text": "just below the surface and you know that digital transformation is a big thing right now because any airport lounge in",
    "start": "81100",
    "end": "87130"
  },
  {
    "text": "the world right now has adverts on one of the major IT consultancy selling you on digital transformation be it Deloitte",
    "start": "87130",
    "end": "94630"
  },
  {
    "text": "the XE Accenture or whoever else so micro services are all the rage you want",
    "start": "94630",
    "end": "99790"
  },
  {
    "text": "micro services I of course also what micro services when I talk about micro services so I kind of focus a little bit",
    "start": "99790",
    "end": "106180"
  },
  {
    "text": "initially on on on this there's major property not on technology not on the technology we use to implement them",
    "start": "106180",
    "end": "111880"
  },
  {
    "text": "which is quite of interesting but I focus more on the outcome why are micro Service is an interesting architectural choice for us and there",
    "start": "111880",
    "end": "118600"
  },
  {
    "text": "are lots of reasons why we might pick a micro service architecture but the one I keep coming back to again and again and",
    "start": "118600",
    "end": "124480"
  },
  {
    "text": "again is this property of independent deployability there's a piece of functionality a change that I want to",
    "start": "124480",
    "end": "130539"
  },
  {
    "text": "make to how my system behaves and I want to get that change out as quickly as possible so in this situation here I",
    "start": "130539",
    "end": "136719"
  },
  {
    "text": "want to make a change that shipping service I should be able to deploy that shipping service into a production environment",
    "start": "136719",
    "end": "142310"
  },
  {
    "text": "release that functionality when appropriate to my customers to my users of my system without having to change",
    "start": "142310",
    "end": "148519"
  },
  {
    "text": "the rest of the system this all helps us sort of ship software more quickly it",
    "start": "148519",
    "end": "153680"
  },
  {
    "text": "helps our teams work in a more autonomous fashion as well rather than this kind of idea that the whole",
    "start": "153680",
    "end": "158720"
  },
  {
    "text": "software ecosystem that we own is like a giant fungus that we can't we kind of can't grapple with instead we're looking",
    "start": "158720",
    "end": "165680"
  },
  {
    "text": "at being able to make targeted changes where appropriate and we compare these architectures to the monolith and of",
    "start": "165680",
    "end": "172370"
  },
  {
    "text": "course here we have a very nice model if I think this is one of the standing stones up in Orkney you should go to alchemy if you can loads of fantastic",
    "start": "172370",
    "end": "178430"
  },
  {
    "text": "monoliths there and we have this vision of the monolith as being this of a single impenetrable block which no",
    "start": "178430",
    "end": "185810"
  },
  {
    "text": "change can be made to it has become the worst thing in our lives is the millstone around our necks apparently",
    "start": "185810",
    "end": "192680"
  },
  {
    "text": "and I think that's grossly unfair ultimately monolith in the last two or three years has now become a replacement",
    "start": "192680",
    "end": "199310"
  },
  {
    "text": "for the term we used to use before which was legacy and this is a fundamental problem because some people are now",
    "start": "199310",
    "end": "205790"
  },
  {
    "text": "starting to see any monolith as being their legacy and therefore something to be removed and I think that's deeply",
    "start": "205790",
    "end": "212120"
  },
  {
    "text": "inappropriate monoliths actually come in multiple shapes and sizes when I talk",
    "start": "212120",
    "end": "217459"
  },
  {
    "text": "about a monolithic application I'm talking about the monolith as a unit primarily of deployment we can think",
    "start": "217459",
    "end": "224359"
  },
  {
    "text": "about the classical monolith which I think many of you have in your head so which is all of my code is packaged",
    "start": "224359",
    "end": "230030"
  },
  {
    "text": "together into a single process so I've got all my stuff maybe it's a war file",
    "start": "230030",
    "end": "235130"
  },
  {
    "text": "in Tomcat maybe I've got a PHP based application but all mykos packaged",
    "start": "235130",
    "end": "240319"
  },
  {
    "text": "together into a single deployable unit which talks to a database right this is the very simple idea it's worth bearing",
    "start": "240319",
    "end": "246980"
  },
  {
    "text": "in mind that this is a distributed system it's a quite simple distributed system a distributed system is one where",
    "start": "246980",
    "end": "253069"
  },
  {
    "text": "your system consists of more than one computer talking to each other over non-local networks so in this situation",
    "start": "253069",
    "end": "259010"
  },
  {
    "text": "we have a very simple distributed system so all of our code is packaged together in a single process and importantly all",
    "start": "259010",
    "end": "264889"
  },
  {
    "text": "of our data is in one big giant database something which can cause us much pain",
    "start": "264889",
    "end": "269990"
  },
  {
    "text": "suffering and Aang as our lives move on we of course have variations on this single process",
    "start": "269990",
    "end": "275510"
  },
  {
    "text": "monolith which would be what some people would call the modular monolith the modular monolith of course is using",
    "start": "275510",
    "end": "281900"
  },
  {
    "text": "cutting-edge ideas from the early 1970s around structured programming which some",
    "start": "281900",
    "end": "287750"
  },
  {
    "text": "of us are still getting to grips with but here we have taken our single process monolithic application and we",
    "start": "287750",
    "end": "293750"
  },
  {
    "text": "have broken it down into modules so those modules if we get our module boundaries right can be worked on",
    "start": "293750",
    "end": "299900"
  },
  {
    "text": "independently the process of deployment is inherently statically linked approach",
    "start": "299900",
    "end": "304910"
  },
  {
    "text": "so we have to sort of link all those modules together to make a deployment think about a Ruby application",
    "start": "304910",
    "end": "310630"
  },
  {
    "text": "consisting of lots of gem files NuGet packages being packed up jar files being linked together via maven I would spit",
    "start": "310630",
    "end": "318080"
  },
  {
    "text": "at this point but I think that's really bad in the current viral climate so we bundled all of this stuff together as",
    "start": "318080",
    "end": "323720"
  },
  {
    "text": "part of our deployment so we still have a monolithic deployment but a modular monolith has some significant benefits",
    "start": "323720",
    "end": "329930"
  },
  {
    "text": "to it because we've broken our code down into those modules this does give us a degree of independent working it makes",
    "start": "329930",
    "end": "336920"
  },
  {
    "text": "it a bit it kind of increases the surface area of the system it can make it easy for different teams to work",
    "start": "336920",
    "end": "342110"
  },
  {
    "text": "together and approach and address different aspects of the system and I think this is a highly underrated option",
    "start": "342110",
    "end": "348880"
  },
  {
    "text": "the problem with this is that people tend to not be very good at defining module boundaries or more to the point",
    "start": "348880",
    "end": "356030"
  },
  {
    "text": "even if they are good at defining module boundaries they're not very good at continuing to have discipline about how",
    "start": "356030",
    "end": "362240"
  },
  {
    "text": "module boundaries are formed and what tends to happen is a lot of modular modernists I see unfortunately this is",
    "start": "362240",
    "end": "368900"
  },
  {
    "text": "not a problem with the concepts of structure programming or modernization they still descend into that sort of",
    "start": "368900",
    "end": "374270"
  },
  {
    "text": "single big ball of mud problem that we have but I think for many organizations I work with actually they'd be better",
    "start": "374270",
    "end": "380510"
  },
  {
    "text": "off with a modular monolith and they would have micro service architecture half of all the clients I've worked with over the last three years I have told",
    "start": "380510",
    "end": "386480"
  },
  {
    "text": "them might be services are not for you some of those clients even listen to me but you know so for many of them if you",
    "start": "386480",
    "end": "393950"
  },
  {
    "text": "could find a good way of defining his module boundaries you get she's good enough right now you've got a much simpler dish beater system you get a",
    "start": "393950",
    "end": "400520"
  },
  {
    "text": "degree of independent or Thomas working and I think longer term as our runtimes continue to have a",
    "start": "400520",
    "end": "406590"
  },
  {
    "text": "better concept of what a module is you might find more people using these kinds",
    "start": "406590",
    "end": "411780"
  },
  {
    "text": "of architectures if you look at these sort of properties of modules in Erlang for example they're really impressive",
    "start": "411780",
    "end": "417300"
  },
  {
    "text": "and I think give it another 15 or 20 years maybe Oracle would eventually get Java to the point where it has the same",
    "start": "417300",
    "end": "423719"
  },
  {
    "text": "quality of module system that Erlang did 15 years ago we can only hope but at that point we might have a system that",
    "start": "423719",
    "end": "429900"
  },
  {
    "text": "allows for proper hot deployment of modules into a runtime system which could use some significant benefits we",
    "start": "429900",
    "end": "436379"
  },
  {
    "text": "have variations on the modular model if this one looks a bit odd but has been something that I proposed a number of",
    "start": "436379",
    "end": "442500"
  },
  {
    "text": "times for a certainly the startup type of organizations I think startups are not a good choice so micro services are",
    "start": "442500",
    "end": "448620"
  },
  {
    "text": "not a good choice in my opinion for for most modern startups but in this situation here we've taken this modular",
    "start": "448620",
    "end": "454379"
  },
  {
    "text": "monolith idea and rather than having that single monolithic database still backing it we've broken that down",
    "start": "454379",
    "end": "460289"
  },
  {
    "text": "instead and now we're looking and storing and managing the data for each module in isolation now this looks",
    "start": "460289",
    "end": "466620"
  },
  {
    "text": "really odd but this ultimately is a hedging architecture this is someone",
    "start": "466620",
    "end": "471659"
  },
  {
    "text": "saying I think I might want to do micro services in the beginning and I recognize that one of the most difficult",
    "start": "471659",
    "end": "477060"
  },
  {
    "text": "things I'm going to do when I decompose a monolithic architecture is dealing with the data tier so what I'm going to",
    "start": "477060",
    "end": "482849"
  },
  {
    "text": "do is in advance come up with what I think is going to be my sort of separate data pools link to those modules the",
    "start": "482849",
    "end": "488610"
  },
  {
    "text": "idea being if I'm working on module C I have full ownership and control over the",
    "start": "488610",
    "end": "494129"
  },
  {
    "text": "data associated with module C and in the future if module C becomes a separate",
    "start": "494129",
    "end": "499529"
  },
  {
    "text": "service it should be an easier time to migrate it the very first time I saw this sort of pattern was actually no it",
    "start": "499529",
    "end": "505199"
  },
  {
    "text": "was actually an old colleague of mine Peter Gill of moss when I was still working at ThoughtWorks and he came up with this for an internal system we were",
    "start": "505199",
    "end": "510990"
  },
  {
    "text": "working on he said I think this could work we're not sure gonna do services and we should maybe should be a monolith and I said look give it a go so what",
    "start": "510990",
    "end": "517018"
  },
  {
    "text": "happens I spoke to Peter I think last year so it's about six years on they still haven't changed it's still running",
    "start": "517019",
    "end": "523890"
  },
  {
    "text": "right it's quite happily but they have different people working with different modules and having the data separated",
    "start": "523890",
    "end": "529560"
  },
  {
    "text": "even at that level gives them significant benefits now of course we can come on to the worst of the",
    "start": "529560",
    "end": "536220"
  },
  {
    "text": "monoliths the distributive monolith right there should be some sort of dark ominous",
    "start": "536220",
    "end": "541550"
  },
  {
    "text": "music at this point the distributed monolith is a more distributed architecture our application code is now",
    "start": "541550",
    "end": "548300"
  },
  {
    "text": "running on separate processes we're communicating together but for whatever reason we have to deploy the entire",
    "start": "548300",
    "end": "554000"
  },
  {
    "text": "system together as part of a lockstep release often this can occur because we've maybe got our service boundaries",
    "start": "554000",
    "end": "561440"
  },
  {
    "text": "wrong we're smearing business logic all over these different layers we've we've",
    "start": "561440",
    "end": "566870"
  },
  {
    "text": "not listened to the messages around coupling in cohesion and so now our sort",
    "start": "566870",
    "end": "572330"
  },
  {
    "text": "of you know our invoicing logic is in 15 different places across our services stack and we're having to coordinate",
    "start": "572330",
    "end": "577810"
  },
  {
    "text": "changes between multiple teams to get anything done when you start seeing an",
    "start": "577810",
    "end": "583130"
  },
  {
    "text": "organization where you've got lots of cross-cutting changes going on that's often a sign that either your organizational boundaries are in the",
    "start": "583130",
    "end": "589220"
  },
  {
    "text": "wrong place or your service boundaries are in the wrong place and the problem with a distributed monolith is that",
    "start": "589220",
    "end": "594290"
  },
  {
    "text": "inherently you have a more distributed system and so that you have all of those associated design runtime and",
    "start": "594290",
    "end": "600410"
  },
  {
    "text": "operational challenges but you also still have all of those inherent coordination activities I want to send",
    "start": "600410",
    "end": "607160"
  },
  {
    "text": "my thing live but I cannot so I've got to wait till you've done your change but you can't you're waiting for somebody",
    "start": "607160",
    "end": "612170"
  },
  {
    "text": "else and now we're having say ok well on the 5th of July we're all going to go live is everybody ready ok 3 & 2 & 1 & deploy and of course it",
    "start": "612170",
    "end": "621560"
  },
  {
    "text": "all goes fine doesn't it we never have any issues with these types of systems if you have an organization that has a",
    "start": "621560",
    "end": "627800"
  },
  {
    "text": "full time job which is a release Coordination manager or something along those lines chances are you have a",
    "start": "627800",
    "end": "634430"
  },
  {
    "text": "distributed monolith because coordinating lockstep deployments of distributed systems is not fun we end up",
    "start": "634430",
    "end": "641840"
  },
  {
    "text": "with a much higher cost of change the Scopes of deployments are much larger we have more to go wrong and we also have",
    "start": "641840",
    "end": "649040"
  },
  {
    "text": "this inherent coordination activity probably not just around the release activity but also around the general",
    "start": "649040",
    "end": "654560"
  },
  {
    "text": "deployment activity you know satisfied agile just look at lean manufacturing what you learn from lean manufacturing",
    "start": "654560",
    "end": "661250"
  },
  {
    "text": "with only a cursory examination of that is that reducing handoffs is key to optimizing for throughput if I'm having",
    "start": "661250",
    "end": "667970"
  },
  {
    "text": "to wait on somebody else to do something for me that creates weight steaks it creates bottlenecks in",
    "start": "667970",
    "end": "673309"
  },
  {
    "text": "our throughput if you want to sip chip software more quickly reducing handoffs reducing coordination",
    "start": "673309",
    "end": "678889"
  },
  {
    "text": "is key and distributed models unfortunately tend to create an environment in which that coordination",
    "start": "678889",
    "end": "684439"
  },
  {
    "text": "just has to happen and sometimes it's not where your service boundaries are sometimes it can purely start from how",
    "start": "684439",
    "end": "691219"
  },
  {
    "text": "you do your software development process how many people here have heard of a release train choo choo all aboard the",
    "start": "691219",
    "end": "697579"
  },
  {
    "text": "release train yes so some people misunderstand fundamentally the release train the release train was always",
    "start": "697579",
    "end": "703369"
  },
  {
    "text": "considered to be a remedial release technique not an aspirational activity",
    "start": "703369",
    "end": "708379"
  },
  {
    "text": "not one day you two can jump on a release train no no it was like training wheels on a bike if you're helping an",
    "start": "708379",
    "end": "714589"
  },
  {
    "text": "organization move to a continuous delivery you would pick something like a release train the idea behind a release train is you say were on a regular basis",
    "start": "714589",
    "end": "721939"
  },
  {
    "text": "maybe every four weeks all of the software that's ready goes out the door and if your software isn't ready it gets",
    "start": "721939",
    "end": "727759"
  },
  {
    "text": "on the next release train and actually for many organizations this is a step forward and is a good thing but you're",
    "start": "727759",
    "end": "733339"
  },
  {
    "text": "the idea with the release train adjust both to eventually get rid of it you're supposed to increase how quickly the release train leaves and then eventually",
    "start": "733339",
    "end": "739399"
  },
  {
    "text": "get rid of it altogether all too many organizations though adopt the release training they never change if you've got",
    "start": "739399",
    "end": "745099"
  },
  {
    "text": "a bunch of teams all working to the same release train every four weeks all the software we've got this ready all goes",
    "start": "745099",
    "end": "750679"
  },
  {
    "text": "together then you suddenly got lots of services being deployed at once as each release train leaves this is a real",
    "start": "750679",
    "end": "756949"
  },
  {
    "text": "issue if you're practicing the release train one of the really important things you should try and do is at the very",
    "start": "756949",
    "end": "762199"
  },
  {
    "text": "least break those release trains down so that they're per team released trains allowed seperate teams to set their own",
    "start": "762199",
    "end": "768409"
  },
  {
    "text": "you know when their train leaves the station but ultimately you should get rid of these things right this is a stepping stone towards continuous",
    "start": "768409",
    "end": "774949"
  },
  {
    "text": "delivery unfortunately some excellent really really good efforts around",
    "start": "774949",
    "end": "781389"
  },
  {
    "text": "marketing agile have codified the release train as being the ultimate way",
    "start": "781389",
    "end": "786859"
  },
  {
    "text": "of delivering software we know they've done that because in these safe diagrams you'll see many corporate organizations",
    "start": "786859",
    "end": "792229"
  },
  {
    "text": "there is the word release train behind an a.1 laminated picture on your home",
    "start": "792229",
    "end": "797239"
  },
  {
    "text": "right this is not good right safe whatever other problems you might have the release train is a remedial",
    "start": "797239",
    "end": "804450"
  },
  {
    "text": "can you get something is training wheels on your bike you're supposed to be moving forward to continuous delivery right but the problem is if you stick",
    "start": "804450",
    "end": "811680"
  },
  {
    "text": "with these release trains for too long you will end up with a distributed mala through your architecture because you",
    "start": "811680",
    "end": "818550"
  },
  {
    "text": "get used to this idea of all of your services get deployed together so just be aware of that it may not happen",
    "start": "818550",
    "end": "824070"
  },
  {
    "text": "overnight you might started off with an architecture which could be deployed independently but if you stick with this",
    "start": "824070",
    "end": "829649"
  },
  {
    "text": "for too long you won't have that anymore because the architecture would just start to coalesce around those release",
    "start": "829649",
    "end": "834990"
  },
  {
    "text": "practices and ultimately the distributed monolith is problematic because it has",
    "start": "834990",
    "end": "841380"
  },
  {
    "text": "all the complexity of a distributed system but also the downsides of a single unit of deployment as well",
    "start": "841380",
    "end": "848040"
  },
  {
    "text": "and so we wouldn't want to move past this to better ways of working so just be aware of that and the district",
    "start": "848040",
    "end": "853589"
  },
  {
    "text": "equality is a tricky thing to deal with there's lots of advice out there but how you deal with it sometimes the right",
    "start": "853589",
    "end": "858870"
  },
  {
    "text": "answer is to merge it back into being a single Process Model S but if you've got a distributed monolith today your best",
    "start": "858870",
    "end": "865170"
  },
  {
    "text": "thing is to work out why you've got that start moving towards parts that architecture being independently",
    "start": "865170",
    "end": "871230"
  },
  {
    "text": "deployable before you start adding any new services and new services into that mix is likely going to make your world",
    "start": "871230",
    "end": "876930"
  },
  {
    "text": "much more difficult so coming back to our monolith a micro service architecture we want this property of",
    "start": "876930",
    "end": "882029"
  },
  {
    "text": "independent deployment are independent deployability I want to be able to change my service and deploy that into production without",
    "start": "882029",
    "end": "888329"
  },
  {
    "text": "changing anything else this is the golden rule of micro services this is the main rule of micro services Club",
    "start": "888329",
    "end": "895170"
  },
  {
    "text": "right so we want to do this this is lovely look isn't it great I'm up here I don't like it look watch watch that's",
    "start": "895170",
    "end": "902190"
  },
  {
    "text": "really easy on a slide that's really easy okay in real life it's a lot more",
    "start": "902190",
    "end": "907980"
  },
  {
    "text": "difficult to make this happen especially given that most people don't start with a blank sheet of paper hands up those of",
    "start": "907980",
    "end": "915149"
  },
  {
    "text": "you who've got something as too big that you're trying to make smaller put your hands up if you gets most of the room",
    "start": "915149",
    "end": "920190"
  },
  {
    "text": "right this is the state of the world the vast majority of the people in this audience have a system that they feel to",
    "start": "920190",
    "end": "926639"
  },
  {
    "text": "them is too big and they need to make money to break it apart but going from sort of this to a micro service",
    "start": "926639",
    "end": "932040"
  },
  {
    "text": "architectures well what I start it's a big what almost by definition the thing I've got right now is too big so how on",
    "start": "932040",
    "end": "938579"
  },
  {
    "text": "earth do I know where to start now I spoken before about the importance of things like domain driven design",
    "start": "938579",
    "end": "943920"
  },
  {
    "text": "domain keeping design is has some great ideas in it that can help us find our service boundaries and often always but",
    "start": "943920",
    "end": "952319"
  },
  {
    "text": "often are working with organisations that are looking at a micro service migration the very first thing we will start with is actually performing some",
    "start": "952319",
    "end": "958470"
  },
  {
    "text": "kind of domain driven modelling exercise on the existing monolithic application",
    "start": "958470",
    "end": "963569"
  },
  {
    "text": "architecture the idea is to say well what are the things that happen inside the monolith what are the units of work",
    "start": "963569",
    "end": "970290"
  },
  {
    "text": "from a business the main point of view that we can find so into all though it might just look like a big giant box",
    "start": "970290",
    "end": "976079"
  },
  {
    "text": "really when we apply a domain given design sort of model and project a logical model onto that monolith we",
    "start": "976079",
    "end": "982500"
  },
  {
    "text": "realized oh no no no we've got things in here around order management and invoicing and loyalty and PDF rendering",
    "start": "982500",
    "end": "990240"
  },
  {
    "text": "and sending notifications to clients and recommending new items to our customers",
    "start": "990240",
    "end": "995399"
  },
  {
    "text": "and these things exist inside that monolith now our code is probably almost",
    "start": "995399",
    "end": "1000649"
  },
  {
    "text": "certainly not organized around these concepts but when we think about it for the point of view of our users we think",
    "start": "1000649",
    "end": "1005870"
  },
  {
    "text": "about it from the point of view of a business domain model these concepts exist in our code and for reasons I",
    "start": "1005870",
    "end": "1011630"
  },
  {
    "text": "won't go into now we business domain boundaries often are called bounded contexts in the domain driven design",
    "start": "1011630",
    "end": "1017180"
  },
  {
    "text": "speak become our kind of units of decomposition and so the first thing you",
    "start": "1017180",
    "end": "1022550"
  },
  {
    "text": "want to do is say well where do I start with what what other things I can prioritize so what are the units of work",
    "start": "1022550",
    "end": "1027798"
  },
  {
    "text": "I've got in here so here I can start saying I've got some order management I've got invoicing I've got notifications which piece should I start",
    "start": "1027799",
    "end": "1033319"
  },
  {
    "text": "with one of the other things you'll get coming out of a domain driven design exercise is a sense of sort of how these",
    "start": "1033319",
    "end": "1039079"
  },
  {
    "text": "things are related hopefully you'll come up with a directed a cyclical graph of dependencies between these different",
    "start": "1039079",
    "end": "1045650"
  },
  {
    "text": "pieces of functionality if you've got a cyclical graph of dependencies you have to do some more work right but in this",
    "start": "1045650",
    "end": "1051020"
  },
  {
    "text": "situation here you see I can see lots of things end up depending on notifications on the ability to send",
    "start": "1051020",
    "end": "1057290"
  },
  {
    "text": "various forms of notifications to our customers and that's part of a CMC's be quite a cool part of our domain and so I",
    "start": "1057290",
    "end": "1064130"
  },
  {
    "text": "can start already asking questions about it well based on this understanding should I extract No",
    "start": "1064130",
    "end": "1070100"
  },
  {
    "text": " that'd be the first thing I start with and I can look at it purely through this lens and the face of it I might say",
    "start": "1070100",
    "end": "1076370"
  },
  {
    "text": "well look well notifications is used by lots of things and therefore if micro services are better than me extracting",
    "start": "1076370",
    "end": "1084200"
  },
  {
    "text": "something that's used by lots of parts of my system will make more things better right so maybe I should start",
    "start": "1084200",
    "end": "1089750"
  },
  {
    "text": "there but another part of me is looking at all those inbound dependencies and those inbound lines and thinking we'll",
    "start": "1089750",
    "end": "1094760"
  },
  {
    "text": "hang on a minute if this is a monolithic architecture and there are loads of things that are calling out to this how",
    "start": "1094760",
    "end": "1100190"
  },
  {
    "text": "am I going to detangle this my system how am I gonna sort of rip it out of the existing malefic architecture on the",
    "start": "1100190",
    "end": "1105980"
  },
  {
    "text": "other hand I start looking at say invoicing or order management concepts which exist in that monolithic system",
    "start": "1105980",
    "end": "1111530"
  },
  {
    "text": "but seem to be more self-contained they're likely going to be easy things to decompose now of course there's",
    "start": "1111530",
    "end": "1117980"
  },
  {
    "text": "something inherent in what I'm talking about here I'm talking about where do I start which piece do I start with this",
    "start": "1117980",
    "end": "1123080"
  },
  {
    "text": "speaks fundamentally to an incremental approach to decomposition would have come back to that in a minute but before",
    "start": "1123080",
    "end": "1128780"
  },
  {
    "text": "we do I want you all to really take this next message to heart the monolith is",
    "start": "1128780",
    "end": "1134390"
  },
  {
    "text": "not the enemy okay the monolith is not the enemy that's just you know I want",
    "start": "1134390",
    "end": "1141830"
  },
  {
    "text": "you to really reason about that it is not right this is not the problem that you've got and people see any monolithic",
    "start": "1141830",
    "end": "1149870"
  },
  {
    "text": "system as being a problem where you can't do that you can do micro services and this is at one of the most concerning things I've seen over the",
    "start": "1149870",
    "end": "1155750"
  },
  {
    "text": "last couple of years is the fact that micro service is seen for many to now be the default choice well of course we're",
    "start": "1155750",
    "end": "1161390"
  },
  {
    "text": "going to do micro services why some of you have got grey hair in the audience I",
    "start": "1161390",
    "end": "1166580"
  },
  {
    "text": "can see for those of you still got that hair but some of you may remember an old saying nobody ever got fired for buying",
    "start": "1166580",
    "end": "1173480"
  },
  {
    "text": "IBM right and it was this idea that because everybody else was buying IBM",
    "start": "1173480",
    "end": "1179390"
  },
  {
    "text": "you too might as well buy IBM because if it turned out the things you bought didn't work for you we can't be your",
    "start": "1179390",
    "end": "1184429"
  },
  {
    "text": "fault because everybody's doing it so you don't stick your neck above the parapet and now that everyone's doing",
    "start": "1184429",
    "end": "1189980"
  },
  {
    "text": "micro services we have the same problem everyone's going microsomes micro service and like I said now it's good",
    "start": "1189980",
    "end": "1195049"
  },
  {
    "text": "for me I write books on the subject why win right but that might not be good for you okay fundamentalist comes down to what",
    "start": "1195049",
    "end": "1201840"
  },
  {
    "text": "problems is it that you are trying to solve so what is it you're trying to achieve that your current architecture",
    "start": "1201840",
    "end": "1208080"
  },
  {
    "text": "doesn't let you do and maybe micro-service is the answer or maybe something else's but it's also really",
    "start": "1208080",
    "end": "1214470"
  },
  {
    "text": "important that you understand what it is you're trying to achieve because without this it's going to be very difficult for",
    "start": "1214470",
    "end": "1220740"
  },
  {
    "text": "you to understand how to migrate your system because fundamentally what you're trying to do is going to change how you",
    "start": "1220740",
    "end": "1227190"
  },
  {
    "text": "decompose the system and how you prioritize that work when we think about Microsoft's migrations the metaphor I",
    "start": "1227190",
    "end": "1233549"
  },
  {
    "text": "try and use is is not like a switch it's not an offer or a non-state mate it's",
    "start": "1233549",
    "end": "1238559"
  },
  {
    "text": "not like 0 & 1 it's more like a dial you're turning a dial as you start adopting micro services you know you",
    "start": "1238559",
    "end": "1244950"
  },
  {
    "text": "start you turn that dial can you add one or two services I'm going to see how they work does it work for you does it give you what you need does it solve the",
    "start": "1244950",
    "end": "1251249"
  },
  {
    "text": "problems you've got and if it does and you're like you can keep telling that dial but the idea is you turn that dial",
    "start": "1251249",
    "end": "1256769"
  },
  {
    "text": "up you deploy some services you learn from that if it worked you keep turning that dial what I see a lot of people do",
    "start": "1256769",
    "end": "1262499"
  },
  {
    "text": "dodo I think mike says are we good right how many do you have let's do 500 right we'll crank that die around and like then we'll plug the",
    "start": "1262499",
    "end": "1269490"
  },
  {
    "text": "headphones in and see how the volume is right that's a great way to blow your eardrums okay that's a bad idea right",
    "start": "1269490",
    "end": "1275999"
  },
  {
    "text": "because that you just don't know the problems you're going to face or things that aren't going to hit you on your developer laptop okay they're going to",
    "start": "1275999",
    "end": "1284070"
  },
  {
    "text": "hit you in production and when you've just deployed gone from Amala thick system to 500 services all of those",
    "start": "1284070",
    "end": "1289710"
  },
  {
    "text": "issues you his issues hit you all at once how far along this spectrum should you be do you want one service to",
    "start": "1289710",
    "end": "1295350"
  },
  {
    "text": "service is five do you want to be joining me mondo you wanna have likes only be like mom don't have like 800 or",
    "start": "1295350",
    "end": "1300720"
  },
  {
    "text": "1,500 services that works well for them it seems might not work well for you how do you know how far you need to turn",
    "start": "1300720",
    "end": "1306419"
  },
  {
    "text": "that dial well that's your choice but this idea of turning that data is important you want to start off your",
    "start": "1306419",
    "end": "1312419"
  },
  {
    "text": "migration you get it you need to pick your first few get those deployed get them running in production learn from",
    "start": "1312419",
    "end": "1318269"
  },
  {
    "text": "that experience work out where your pain points are address them and then turn them up because this is the real problem",
    "start": "1318269",
    "end": "1324059"
  },
  {
    "text": "you are not going to fully appreciate the sheer terror horror pain suffering",
    "start": "1324059",
    "end": "1329129"
  },
  {
    "text": "anguish and expense of running micro services until they're actually in production this is",
    "start": "1329129",
    "end": "1335020"
  },
  {
    "text": "where the vast bulk of the nasty problems hit you if you're if your biggest issue is a developer whinging",
    "start": "1335020",
    "end": "1340600"
  },
  {
    "text": "about haven't got enough around to run all the Micra services on their laptop you're doing quite well but it might also mean you're not in production yet",
    "start": "1340600",
    "end": "1346330"
  },
  {
    "text": "okay this is what's going to hurt you and so you need to bring that learning forward as quickly as possible and the",
    "start": "1346330",
    "end": "1353080"
  },
  {
    "text": "problem is your H your going to face are going to vary on so many different factors so you want to get something from the Amala thick system to extract",
    "start": "1353080",
    "end": "1359770"
  },
  {
    "text": "some functionality have it talk to the monolith integrate with the monolith and do that as quickly as you possibly can",
    "start": "1359770",
    "end": "1366120"
  },
  {
    "text": "this is really really important we don't want to do Big Bang rewrites anymore we",
    "start": "1366120",
    "end": "1371590"
  },
  {
    "text": "use spare to do this when you could deploy software and when you deploy software every year to your customers every year to your users you had a 12",
    "start": "1371590",
    "end": "1378220"
  },
  {
    "text": "month window in which you could say we'll look we've treated our existing system so badly it's impossible to work",
    "start": "1378220",
    "end": "1383890"
  },
  {
    "text": "with but we've got 12 months to the next release so if we try really hard we can",
    "start": "1383890",
    "end": "1388990"
  },
  {
    "text": "completely rewrite the system and we won't make any of the mistakes we made in the past and we'll have all the",
    "start": "1388990",
    "end": "1394990"
  },
  {
    "text": "existing functionality and we'll have a lot more functionality besides and it's all going to be fine that was never true",
    "start": "1394990",
    "end": "1401380"
  },
  {
    "text": "when we were releasing software every year I don't know how we justify it now when people expect software to be",
    "start": "1401380",
    "end": "1407140"
  },
  {
    "text": "released on a monthly basis weekly daily basis to paraphrase Martin Fowler if you",
    "start": "1407140",
    "end": "1412330"
  },
  {
    "text": "do a Big Bang rewrite the only thing you're certain off is a Big Bang right now I love explosions right I love",
    "start": "1412330",
    "end": "1419380"
  },
  {
    "text": "explosions in action films but not necessarily my IT projects so we really need to think a bit differently about",
    "start": "1419380",
    "end": "1425350"
  },
  {
    "text": "how we make these changes happen so I'm a big fan of sort of incremental evolution of architectures we shouldn't",
    "start": "1425350",
    "end": "1431169"
  },
  {
    "text": "see our architectures as fixed unchanging things so we need patterns that help us change systems in",
    "start": "1431169",
    "end": "1437410"
  },
  {
    "text": "incremental ways so I'm gonna share with you for the rest of the talk really a few different patterns and different ways of taking existing monolithic",
    "start": "1437410",
    "end": "1444669"
  },
  {
    "text": "application and moving it to micro service architecture one of the first ones we could start with is a thing",
    "start": "1444669",
    "end": "1449710"
  },
  {
    "text": "called the strangler fig application pattern this is a this particular picture here's a picture of a tree with",
    "start": "1449710",
    "end": "1456070"
  },
  {
    "text": "a fig wrapped around it it's in the rain forest in Queensland I also live in Australia I love the place it's fantastic but Australia is a dangerous",
    "start": "1456070",
    "end": "1462700"
  },
  {
    "text": "place the weather wants to kill you the Sun wants to kill you the things in the on the land they want",
    "start": "1462700",
    "end": "1468430"
  },
  {
    "text": "to kill you the nine most poisonous snakes and spiders in the world are in Australia everything in the sea they",
    "start": "1468430",
    "end": "1474100"
  },
  {
    "text": "really want to kill you you got sharks and jellyfish the people in the food is nice but even the plants can sometimes",
    "start": "1474100",
    "end": "1481030"
  },
  {
    "text": "have quite vicious names so this is what you're seeing here is a vine that's wrapped around a tree there's actually a",
    "start": "1481030",
    "end": "1486580"
  },
  {
    "text": "type of plant called a strangler fig and the way these strangler figs grow is quite interesting they basically take",
    "start": "1486580",
    "end": "1492160"
  },
  {
    "text": "root in the canopy of trees and they they send tendrils down around the tree and wrap themselves around the existing",
    "start": "1492160",
    "end": "1497170"
  },
  {
    "text": "structure so by themselves you know strangler fig couldn't get up into the canopy of these forests to get enough",
    "start": "1497170",
    "end": "1503560"
  },
  {
    "text": "sunlight and so rather than trying to have become a sapling and grow up like an old tree would it extends that wraps",
    "start": "1503560",
    "end": "1509500"
  },
  {
    "text": "things around existing structures so it relies on the existing height and strength of the tree over time as these",
    "start": "1509500",
    "end": "1516610"
  },
  {
    "text": "figs become bigger and more mature they may be able to stand by themselves and if the underlying tree dies and rots",
    "start": "1516610",
    "end": "1522610"
  },
  {
    "text": "away you often left with it is hollow column in the middle and when you see these things in real life seems like the",
    "start": "1522610",
    "end": "1527650"
  },
  {
    "text": "Moreton Bay fig and stuff they look like wax has been dripped around other trees it's a really disturbing looking stuff",
    "start": "1527650",
    "end": "1533760"
  },
  {
    "text": "see the idea is really useful when we come to thinking about application migration strategy we can use this",
    "start": "1533760",
    "end": "1539740"
  },
  {
    "text": "pattern the idea is we take an existing system that does all the things we wanted to our existing politic application and we sync we start to wrap",
    "start": "1539740",
    "end": "1546790"
  },
  {
    "text": "our new system around it in our case that's going to be our micro service architecture so it's kind of two key",
    "start": "1546790",
    "end": "1552610"
  },
  {
    "text": "pieces to implementing a strangler fig application the first is what's called asset capture and that's the process of",
    "start": "1552610",
    "end": "1559270"
  },
  {
    "text": "identifying which functionality is it that we're going to migrate so it's finding what that box of stuff is that we're going to move and we're thinking",
    "start": "1559270",
    "end": "1565720"
  },
  {
    "text": "here logically of moving this functionality into a new place and in our situation that's going to be into a",
    "start": "1565720",
    "end": "1571450"
  },
  {
    "text": "micro service architecture and then we need to be added by verticals the cause",
    "start": "1571450",
    "end": "1576580"
  },
  {
    "text": "that used to go to the monolithic application is instead gonna have to be diverted to where the new functionality",
    "start": "1576580",
    "end": "1581950"
  },
  {
    "text": "lives if the functionality hasn't been migrated those calls are not diverted it's pretty straightforward stuff there",
    "start": "1581950",
    "end": "1588130"
  },
  {
    "text": "are lots of different ways to implement it and I'm gonna give you the simplest one and that's using a good old fashioned bit of HTTP so here we have Oh",
    "start": "1588130",
    "end": "1595510"
  },
  {
    "text": "before I forget when we talk about movement of functionality some people be confused about this even more you",
    "start": "1595510",
    "end": "1602050"
  },
  {
    "text": "might be really lucky and you might be out a copy and paste the code you might say where I'm gonna create an invoice in",
    "start": "1602050",
    "end": "1608230"
  },
  {
    "text": "service and all look all of my code is in a nice box in my mother thick code based invoicing and I copy and paste",
    "start": "1608230",
    "end": "1613930"
  },
  {
    "text": "it into my new service I would argue if that's the state your code bases in you probably don't need my help right",
    "start": "1613930",
    "end": "1620920"
  },
  {
    "text": "because you've already got a nice code base it's easy to work with more likely you're gonna have to go scurrying around your sister and trying to drag all the",
    "start": "1620920",
    "end": "1626950"
  },
  {
    "text": "bits of invoicing together it's bringing me some pre refactoring exercises maybe you can reuse that code but in that case",
    "start": "1626950",
    "end": "1634150"
  },
  {
    "text": "it's going to be a copy and paste not a cut and paste we want to leave the functionality in the monolith as well",
    "start": "1634150",
    "end": "1639640"
  },
  {
    "text": "we'll come back to why in a minute but more likely often people will do a little bit of a rewrite they'll say well",
    "start": "1639640",
    "end": "1645370"
  },
  {
    "text": "up the thing I want to extract is the invoicing functionality I'm going to rewrite the invoicing functionality that tends to be a bit more common but if",
    "start": "1645370",
    "end": "1652150"
  },
  {
    "text": "you're lucky you might be out actually directly use that code so coming back to our example of a strangler fig",
    "start": "1652150",
    "end": "1657790"
  },
  {
    "text": "implementation in this situation here we've got a monolithic system which is being driven via HTTP so then this",
    "start": "1657790",
    "end": "1663490"
  },
  {
    "text": "situation this could be a headless application we could be intercepting this maybe an API boundary might be",
    "start": "1663490",
    "end": "1668950"
  },
  {
    "text": "regular intercepting calls underneath a user interface so what we need is something that can allow to redirect",
    "start": "1668950",
    "end": "1674080"
  },
  {
    "text": "calls and so we're going to make use of some kind of HTTP proxy the reason that HTTP works so well as a protocol for",
    "start": "1674080",
    "end": "1681760"
  },
  {
    "text": "these kinds of architectures is because it's extremely amenable to transparent redirection of calls I make a call over",
    "start": "1681760",
    "end": "1687700"
  },
  {
    "text": "HTTP it can be diverted to lots different places and I'm a client point of view do not care and there's loads of software out",
    "start": "1687700",
    "end": "1694300"
  },
  {
    "text": "there that can do this for you and it's extremely simple it's the very first thing you would do is you'd put a proxy",
    "start": "1694300",
    "end": "1699640"
  },
  {
    "text": "between the upstream traffic and they'll a downstream monolithic system and you would do nothing else you would deploy",
    "start": "1699640",
    "end": "1704770"
  },
  {
    "text": "there isn't of into production at this point no calls are being diverted and hopefully they should work if it doesn't",
    "start": "1704770",
    "end": "1711850"
  },
  {
    "text": "work you can find that out why now but do this in production one of the things we're worried about a little bit here is",
    "start": "1711850",
    "end": "1717790"
  },
  {
    "text": "the quality of your network we've added a network hop here called user go straight into your monolithic system now",
    "start": "1717790",
    "end": "1724120"
  },
  {
    "text": "they're going via your proxy latency is the killer in these situations now hopefully adding a complete path through",
    "start": "1724120",
    "end": "1731350"
  },
  {
    "text": "proxy in a separate network hop should the ads I don't know a very small number of milliseconds overhead to your",
    "start": "1731350",
    "end": "1736740"
  },
  {
    "text": "existing calls you know lesson 10 I'll be great right if it adds like 200",
    "start": "1736740",
    "end": "1742260"
  },
  {
    "text": "milliseconds of latency adding one Network hop you're gonna need to pause your microservice migration because",
    "start": "1742260",
    "end": "1747450"
  },
  {
    "text": "you've got big issues that need to be solved you might think it unlikely it happened to me I was working down in London it's about the herds about 10",
    "start": "1747450",
    "end": "1753809"
  },
  {
    "text": "years ago now and we had a real performance issue with our software these two services were talking to each other they're both in a London",
    "start": "1753809",
    "end": "1760350"
  },
  {
    "text": "datacenter in fact they're even in the same rack in the same data center and we had these huge latency spikes across we",
    "start": "1760350",
    "end": "1767220"
  },
  {
    "text": "couldn't work out what was going on and we thought it was our software and eventually we found out that for reasons known only to the networked team that",
    "start": "1767220",
    "end": "1773250"
  },
  {
    "text": "all traffic between these two services through in London was being routed via Luxembourg now if that's your network",
    "start": "1773250",
    "end": "1779670"
  },
  {
    "text": "configuration this kind of architecture is going to be an issue by putting the proxy in place we allow us to identify",
    "start": "1779670",
    "end": "1785220"
  },
  {
    "text": "those deltas and spot the problem with that quite quickly if it's all good you move on fantastic if it's not you can",
    "start": "1785220",
    "end": "1791790"
  },
  {
    "text": "back it out straight away and dive deep into what the problems are the next thing we're going to do is to start working on our brand new service so I've",
    "start": "1791790",
    "end": "1798630"
  },
  {
    "text": "deployed my new invoicing service I'm starting to work on that functionality and I would deploy that into production",
    "start": "1798630",
    "end": "1804260"
  },
  {
    "text": "and I can do that safely it's not being used right we've got to separate these",
    "start": "1804260",
    "end": "1810540"
  },
  {
    "text": "ideas in our head I would actually encourage you to you've got a new micro service the first time you've done micro services right you want to be deploying",
    "start": "1810540",
    "end": "1816720"
  },
  {
    "text": "that into production on a regular basis makes you a deployment mechanism works you can be testing that service in isolation as you're adding the",
    "start": "1816720",
    "end": "1823140"
  },
  {
    "text": "functionality it's not released to your customers yet to your users is in the",
    "start": "1823140",
    "end": "1828900"
  },
  {
    "text": "production environment you get it hooked up to your dashboards you can make sure the log aggregation is working whatever else you want to do when you're ready",
    "start": "1828900",
    "end": "1834809"
  },
  {
    "text": "when you think the functionality is equivalent to the old system you just reconfigure the proxy to divert calls from the old front kanata over into your",
    "start": "1834809",
    "end": "1841679"
  },
  {
    "text": "new functionality that's it it's quite straightforward now I have a slide step data we'll come back to day two a bit",
    "start": "1841679",
    "end": "1847980"
  },
  {
    "text": "later on I example here I'm using as HTTP based but I've seen this work with",
    "start": "1847980",
    "end": "1853140"
  },
  {
    "text": "FTP I've done this message interceptors I've done this with fixed file uploads where you basically intercept the fixed",
    "start": "1853140",
    "end": "1859110"
  },
  {
    "text": "file strip out and stuff that you want your new service and pass the rest on it's a really simple technique and it",
    "start": "1859110",
    "end": "1864390"
  },
  {
    "text": "works surprisingly well in a large situations but the key thing here is that we've made one small step which is",
    "start": "1864390",
    "end": "1870400"
  },
  {
    "text": "one service but even extracting that one service itself can be broken down into lots of little steps that's getting the",
    "start": "1870400",
    "end": "1877120"
  },
  {
    "text": "Skeleton service up is implementing the methods testing it in production making sure it's working and then you deploy",
    "start": "1877120",
    "end": "1882520"
  },
  {
    "text": "the release and the nice thing is this functionality is up here in our new service we haven't removed from the monolithic application yet so if we have",
    "start": "1882520",
    "end": "1889929"
  },
  {
    "text": "a problem we hit an issue in production we've got an extremely fast remediation",
    "start": "1889929",
    "end": "1895299"
  },
  {
    "text": "technique we just change the proxy configuration low divert the traffic back to the monolith because the",
    "start": "1895299",
    "end": "1900850"
  },
  {
    "text": "functionality is still there this is and should be a true refactoring so a refactoring is where you change the",
    "start": "1900850",
    "end": "1907120"
  },
  {
    "text": "structure of the code but not changing the behavior so the the the functionality here should be",
    "start": "1907120",
    "end": "1912580"
  },
  {
    "text": "functionally equivalent so if you better switch backwards and forwards at will until we're happy that's working",
    "start": "1912580",
    "end": "1918669"
  },
  {
    "text": "properly this is also why when you're doing this migration if we wouldn't be adding new functionality at the same point in time so and you can kind of",
    "start": "1918669",
    "end": "1925480"
  },
  {
    "text": "chip away at this it's a nice process now that's going to work great if we look up saying coming back to our",
    "start": "1925480",
    "end": "1930640"
  },
  {
    "text": "directed a cyclical graph of dependencies inside our monolith that would work quite well with something",
    "start": "1930640",
    "end": "1936309"
  },
  {
    "text": "like invoicing or order management pieces of functionality that are likely going to sit higher up in your call",
    "start": "1936309",
    "end": "1941320"
  },
  {
    "text": "stack but what about something like say the ability to award points for loyalty or maybe the ability to send",
    "start": "1941320",
    "end": "1947260"
  },
  {
    "text": "notifications to your customers there's not a call that comes into the monolithic system that sense says send",
    "start": "1947260",
    "end": "1952450"
  },
  {
    "text": "email to Sam about his order or you know let's say oh no she's awarded some points that's not what happens instead",
    "start": "1952450",
    "end": "1959350"
  },
  {
    "text": "the caller comes into the monitors place order or pay invoice as a side effect of",
    "start": "1959350",
    "end": "1964659"
  },
  {
    "text": "those operations we might award points or send the email so as a result we",
    "start": "1964659",
    "end": "1969970"
  },
  {
    "text": "can't intercept calls to say loyalty or notifications at the perimeter of our",
    "start": "1969970",
    "end": "1975159"
  },
  {
    "text": "monolith we're not able to do that we actually at this point have to go inside the monolith itself to make those",
    "start": "1975159",
    "end": "1980169"
  },
  {
    "text": "changes happen so let's take a look at imagine we can extract notifications we've got all these inbound links how",
    "start": "1980169",
    "end": "1986020"
  },
  {
    "text": "can we extract that piece of functionality in an incremental way without breaking the rest of the system",
    "start": "1986020",
    "end": "1991140"
  },
  {
    "text": "so here's another technique that can work really well that's a technique called branch by abstraction so branch",
    "start": "1991140",
    "end": "1996760"
  },
  {
    "text": "by abstraction is a pattern you may in the context of trunk based development which is a I think is a very",
    "start": "1996760",
    "end": "2003330"
  },
  {
    "text": "very good way of developing software but branch by abstraction is also incredibly useful as a pattern in this context as",
    "start": "2003330",
    "end": "2008550"
  },
  {
    "text": "well the way it works is that we're going to basically create a space in our existing malefic system where we can",
    "start": "2008550",
    "end": "2014190"
  },
  {
    "text": "coexist two implementations of the same piece of functionality in many ways this",
    "start": "2014190",
    "end": "2019470"
  },
  {
    "text": "is true Liskov substitution principle right this is a separate implementation of exactly the same abstraction so",
    "start": "2019470",
    "end": "2026100"
  },
  {
    "text": "here's an example of how we do is we got our existing code and we're going to extract maybe the notifications functionality so we've got all this",
    "start": "2026100",
    "end": "2032250"
  },
  {
    "text": "notifications code is scattered all over our system the very first thing we want to do is get all of that notifications functionality that's going to go into",
    "start": "2032250",
    "end": "2037680"
  },
  {
    "text": "our new service we just get it in sort of hidden behind abstraction point and so we what we want to do is say have our",
    "start": "2037680",
    "end": "2043740"
  },
  {
    "text": "invoicing code our orders code it's going to call out to this code functionality when it coming by some",
    "start": "2043740",
    "end": "2049110"
  },
  {
    "text": "abstraction point so maybe we create a brand new notifications interface and the only implementation of that",
    "start": "2049110",
    "end": "2055290"
  },
  {
    "text": "notifications interface we have is a class that has all the existing functionality and that functionality",
    "start": "2055290",
    "end": "2060510"
  },
  {
    "text": "lives inside the monolithic system so all of our calls out to you know SMTP",
    "start": "2060510",
    "end": "2065669"
  },
  {
    "text": "libraries and calling out to Twilio to send SMS is or I don't know sending tik-tok messages I think that's how that",
    "start": "2065669",
    "end": "2073679"
  },
  {
    "text": "works would all get bundled into this class so at this point all we've done is",
    "start": "2073679",
    "end": "2079408"
  },
  {
    "text": "we've created a nice abstraction point in our code and we can stop here and we've made our code base nicer and more",
    "start": "2079409",
    "end": "2085980"
  },
  {
    "text": "testable which doesn't sound like a bad thing to do anyway right this is good old-fashioned video refactoring so we've",
    "start": "2085980",
    "end": "2091860"
  },
  {
    "text": "now created though a situation where we can change the implementation of notifications that invoices uses all the",
    "start": "2091860",
    "end": "2098670"
  },
  {
    "text": "orders uses this is step one this is a refactoring effort that could be done over a period of days or weeks while you're doing other stuff like actually",
    "start": "2098670",
    "end": "2105690"
  },
  {
    "text": "shipping features again these all these refactoring patterns are things that can be folded in while still shipping",
    "start": "2105690",
    "end": "2110820"
  },
  {
    "text": "functionality as well now we start working on our brand new implementation so we start creating our new",
    "start": "2110820",
    "end": "2116580"
  },
  {
    "text": "implementation of notifications and it is kind of going to split into two bits we've got the implementation of the",
    "start": "2116580",
    "end": "2122880"
  },
  {
    "text": "interface that lives inside the monolith but that really is just going to be client code calling out to your new",
    "start": "2122880",
    "end": "2129240"
  },
  {
    "text": "notification service we can be working on these Tosi's we can be checking them in we can",
    "start": "2129240",
    "end": "2134820"
  },
  {
    "text": "be deploying them because again we can deploy them safely because they're not being used these things we're",
    "start": "2134820",
    "end": "2140130"
  },
  {
    "text": "integrating our code more frequently reducing the merge effort making sure everything works so once we're happy",
    "start": "2140130",
    "end": "2147780"
  },
  {
    "text": "that our new service calling implementation works all we need to do now is switch the implementation of the",
    "start": "2147780",
    "end": "2152880"
  },
  {
    "text": "abstraction using this is what we use feature toggles or feature flags for you could use you know awesome tools and",
    "start": "2152880",
    "end": "2159510"
  },
  {
    "text": "platforms like launch darkly or split the i/o for this sort of stuff or a text file whatever you wanna do right there's",
    "start": "2159510",
    "end": "2165360"
  },
  {
    "text": "lots of amazing feature toggles so runtime build time deploy time those sorts of things if I have a problem I",
    "start": "2165360",
    "end": "2171420"
  },
  {
    "text": "haven't removed the old functionality yet so I can flick that toggle back and go back to the old functionality that",
    "start": "2171420",
    "end": "2176820"
  },
  {
    "text": "I'm using so again we're this is a small step this is one service but this small step is also broken down into lots of",
    "start": "2176820",
    "end": "2182850"
  },
  {
    "text": "smaller steps and we're trying to get to production as quickly as possible in all of these steps once I'm happy it's",
    "start": "2182850",
    "end": "2188790"
  },
  {
    "text": "better than working I then if I want to it is optional clean up the code maybe I'm gonna remove the flag once it's no",
    "start": "2188790",
    "end": "2194970"
  },
  {
    "text": "longer needed I could even remove the old code and it's really easy to remove the old code because you just spent some",
    "start": "2194970",
    "end": "2200220"
  },
  {
    "text": "time earlier putting all of that code into an icebox and then you're going to delete that class it's gone and then",
    "start": "2200220",
    "end": "2206010"
  },
  {
    "text": "look just make the Model S smaller and everyone feels good about themselves so again this just this browse by",
    "start": "2206010",
    "end": "2211650"
  },
  {
    "text": "abstraction pad and could it be useful now in terms of that effort sort of",
    "start": "2211650",
    "end": "2217200"
  },
  {
    "text": "restructuring with fracturing code I can strongly recommend this book working effectively with legacy code buying it Michael feathers so Michaels definition",
    "start": "2217200",
    "end": "2225300"
  },
  {
    "text": "of legacy code is code without tests there's loads of great ideas about how you find these abstractions he called",
    "start": "2225300",
    "end": "2231750"
  },
  {
    "text": "some sort of microfiber a lot of seams how you creates abstractions safely in a code base and a way without disrupting",
    "start": "2231750",
    "end": "2237330"
  },
  {
    "text": "existing system it's a really really excellent book I think the original version was written for C++ I think but",
    "start": "2237330",
    "end": "2243030"
  },
  {
    "text": "there's been examples of the code the code examples of this have been done in Java Ruby net Python and things so this",
    "start": "2243030",
    "end": "2249300"
  },
  {
    "text": "is well worth a read and look even if you don't go to micro services those first couple steps just create an",
    "start": "2249300",
    "end": "2254820"
  },
  {
    "text": "abstraction point is probably going to leave your code in a better more testable state anyway so I sort of said",
    "start": "2254820",
    "end": "2261240"
  },
  {
    "text": "earlier that it's a good idea to not remove the old too quickly and that there actually some",
    "start": "2261240",
    "end": "2267609"
  },
  {
    "text": "benefits are having both implementations there at the same time and in this situation we've got both implementations",
    "start": "2267609",
    "end": "2274119"
  },
  {
    "text": "live in the monoliths at once and that opens up some really interesting approaches to how we deploy and roll out",
    "start": "2274119",
    "end": "2280420"
  },
  {
    "text": "our software more specifically because rather than calling the old implementation or the new implementation",
    "start": "2280420",
    "end": "2285460"
  },
  {
    "text": "why don't we call both so it's called a parallel run so in this situation here when a call comes in to the abstraction",
    "start": "2285460",
    "end": "2292030"
  },
  {
    "text": "point I'm going to call both implementations why would I want to do that it's comparison this should be a",
    "start": "2292030",
    "end": "2298630"
  },
  {
    "text": "refactoring refractory is where we change the structure of the code but not the behavior so what we want to make",
    "start": "2298630",
    "end": "2305050"
  },
  {
    "text": "sure is that our new microservice based implementation has the same functional equivalency so if I execute both copies",
    "start": "2305050",
    "end": "2312099"
  },
  {
    "text": "of that functionality I can compare them so I execute both and I compare the results I've done it a few times I we",
    "start": "2312099",
    "end": "2319840"
  },
  {
    "text": "did this free an authorization that was doing so these interesting financial instruments this is pre GFC so it was",
    "start": "2319840",
    "end": "2327010"
  },
  {
    "text": "very interesting and we had to make sure we were generating exactly the right numbers from the old system the new",
    "start": "2327010",
    "end": "2332800"
  },
  {
    "text": "system because the numbers we generated directly impacted the bonuses paid to the traders at end of each quarter so",
    "start": "2332800",
    "end": "2338440"
  },
  {
    "text": "they really wanted to make sure those numbers were exactly the same and so you can execute both implementations and you",
    "start": "2338440",
    "end": "2343480"
  },
  {
    "text": "compare the results they you have to consider what is your source of truth here because I wouldn't necessarily want",
    "start": "2343480",
    "end": "2349599"
  },
  {
    "text": "to make both of these implementations my source of truth because in the case of notifications that would result in me potentially sending two emails to people",
    "start": "2349599",
    "end": "2356349"
  },
  {
    "text": "where I probably want to send one but this technique can be incredibly useful because you get a direct live comparison",
    "start": "2356349",
    "end": "2363460"
  },
  {
    "text": "and not just of the functional equivalency but also the acceptable non-functional zs-- it's not just did I",
    "start": "2363460",
    "end": "2369820"
  },
  {
    "text": "create the right email did I send it to the right-side owner dummy SMTP server but also did it did the service that",
    "start": "2369820",
    "end": "2376000"
  },
  {
    "text": "I've created which is pardoned quickly enough am I getting an acceptable error rate am I getting a decent you know 95th",
    "start": "2376000",
    "end": "2381609"
  },
  {
    "text": "percentile response times or whatever else it is we're actually able to compare both and normally what you do here is your new implementation would be",
    "start": "2381609",
    "end": "2389530"
  },
  {
    "text": "run side-by-side with your old but the old would be the trusted implementations that's the ones the results you're going",
    "start": "2389530",
    "end": "2395120"
  },
  {
    "text": "to use and once you trust the old implementation you say what when that's now trust a new implementation let's keep running them side by side for",
    "start": "2395120",
    "end": "2401540"
  },
  {
    "text": "a period of time and eventually we can get rid of the old one github do this a lot they actually have",
    "start": "2401540",
    "end": "2407630"
  },
  {
    "text": "act created a library called github scientist and this is a little ruby library for wrapping different abstractions and scoring them and they",
    "start": "2407630",
    "end": "2414350"
  },
  {
    "text": "you're sort of users wherever they're refactoring critical code parts in your application and so they actually give you a way of doing is live comparison",
    "start": "2414350",
    "end": "2421250"
  },
  {
    "text": "stuff github scientist has been ported to a bunch of different languages now including inexplicably three different",
    "start": "2421250",
    "end": "2427400"
  },
  {
    "text": "ports for perl so clearly I don't know these parallel runs are a big thing in the perl community but if you're",
    "start": "2427400",
    "end": "2433760"
  },
  {
    "text": "interested in doing this of live sort of parallel runs inside application it's there's loads of good advice out there",
    "start": "2433760",
    "end": "2440630"
  },
  {
    "text": "how to do this you can also do set different levels when I first did this we didn't do a live comparison we've",
    "start": "2440630",
    "end": "2445640"
  },
  {
    "text": "done offline comparison so you ran the both subsystems in parallel and we did an offline overnight comparison of the",
    "start": "2445640",
    "end": "2451970"
  },
  {
    "text": "results generated and we sent an email so any more now coming over an email an Excel document telling me all the things that we got wrong which was quite good",
    "start": "2451970",
    "end": "2459650"
  },
  {
    "text": "but you're spotting those things before your customers spot them you before your users button is really important I've",
    "start": "2459650",
    "end": "2465890"
  },
  {
    "text": "mentioned a couple of times this idea that we're going to sort of make a change we can start working in the production environment but without",
    "start": "2465890",
    "end": "2472280"
  },
  {
    "text": "releasing that functionality to our customers yet and that gives us our ability to make sure it's working and",
    "start": "2472280",
    "end": "2477440"
  },
  {
    "text": "spot problems before the end users of our software spot these problems and fundamentally what we're trying to do",
    "start": "2477440",
    "end": "2483920"
  },
  {
    "text": "here is separate these two concepts in our heads that previously have been bound together we're trying to separate",
    "start": "2483920",
    "end": "2489830"
  },
  {
    "text": "here the idea of deployment from the idea of release and traditionally we would consider these two activities to",
    "start": "2489830",
    "end": "2496100"
  },
  {
    "text": "be one and the same we take our software we deploy it and the active deployment is the same as",
    "start": "2496100",
    "end": "2501920"
  },
  {
    "text": "releasing our software to our production users and this is why everyone's scary about anything happening production and",
    "start": "2501920",
    "end": "2507770"
  },
  {
    "text": "that's how adduction becomes this gated environment but we can separate these two concepts the act of deploying",
    "start": "2507770",
    "end": "2514580"
  },
  {
    "text": "something into production is not the same as releasing something to our customers this is really the underpinning idea behind something that",
    "start": "2514580",
    "end": "2521330"
  },
  {
    "text": "people are now calling progressive delivery which is sort of an umbrella term for a bunch of different techniques think about Canary only",
    "start": "2521330",
    "end": "2527240"
  },
  {
    "text": "seeing a be testing parallel runs Bluegreen deployments and dark launching this idea that we can be smarter about",
    "start": "2527240",
    "end": "2533840"
  },
  {
    "text": "getting our production our software out quickly but we don't have to get to all customers or any customers we can get it",
    "start": "2533840",
    "end": "2539210"
  },
  {
    "text": "out there see if it works tested ourselves bear that pain ourselves if you know good overview of",
    "start": "2539210",
    "end": "2544580"
  },
  {
    "text": "progressive delivery James governor from red marks got a nice overview of this over on the red mark blog but it's a",
    "start": "2544580",
    "end": "2551090"
  },
  {
    "text": "really interesting idea but if you can think about ways you can separate deployment from release it allows you to",
    "start": "2551090",
    "end": "2556460"
  },
  {
    "text": "do risk deployments so much better it makes it you makes you be much more brave about making changes you'll be",
    "start": "2556460",
    "end": "2563900"
  },
  {
    "text": "able to make more frequent releases and those releases will have much much lower risk so have a look into progressive",
    "start": "2563900",
    "end": "2571190"
  },
  {
    "text": "delivery but just it we were the most important thing is here the active deployment is not the same thing as the active release and you can control how",
    "start": "2571190",
    "end": "2578090"
  },
  {
    "text": "that release activity happens so we skipped over data I'm gonna try and",
    "start": "2578090",
    "end": "2583100"
  },
  {
    "text": "cover data off in six minutes and seven seconds so wish me luck so here we have our existing oolitic application we've",
    "start": "2583100",
    "end": "2588410"
  },
  {
    "text": "got our data locked away in our system we've decided that we're going to extract our invoicing functionality but",
    "start": "2588410",
    "end": "2594080"
  },
  {
    "text": "oh no we need data and the data is over here so what do we do well option number one is just go get the data now this is",
    "start": "2594080",
    "end": "2602660"
  },
  {
    "text": "for a short period of time acceptable in a situation where you may be not sure",
    "start": "2602660",
    "end": "2607850"
  },
  {
    "text": "which is your trusted implementation you're switching between is invoicing live in the monolith or is invoicing live in the month and the micro service",
    "start": "2607850",
    "end": "2614000"
  },
  {
    "text": "you likely want data compatibility and consistency across those two implementations so for a short period of",
    "start": "2614000",
    "end": "2620030"
  },
  {
    "text": "time this is acceptable but long term it's not this is because we're on the golden rules of databases after",
    "start": "2620030",
    "end": "2625160"
  },
  {
    "text": "independent deployability is vow shalt not share databases fundamentally this",
    "start": "2625160",
    "end": "2630260"
  },
  {
    "text": "is down to the coupling issues that it causes so here's my shipping service I've got some data in my database I",
    "start": "2630260",
    "end": "2636080"
  },
  {
    "text": "allow somebody else to access my data directly and now I've sort of exposed my",
    "start": "2636080",
    "end": "2641119"
  },
  {
    "text": "internal implementation details to an external party it makes it hard for me as a developer of the shipping service",
    "start": "2641119",
    "end": "2647150"
  },
  {
    "text": "to know what I can change safely I haven't actually got any separation between what is shared and hid and what",
    "start": "2647150",
    "end": "2652580"
  },
  {
    "text": "is hidden again coming back to cutting edge ideas from 1970s David Parnas developed this concept called",
    "start": "2652580",
    "end": "2658250"
  },
  {
    "text": "information hiding which is how we think about modular decomposition going to hide as much information as possible inside the",
    "start": "2658250",
    "end": "2665340"
  },
  {
    "text": "boundary of a module or inside the boundary of a micro-service if instead I say no if you want information from me",
    "start": "2665340",
    "end": "2671520"
  },
  {
    "text": "you have to come to a well-defined service interface point it allows me as a developer of the shipping service to",
    "start": "2671520",
    "end": "2677070"
  },
  {
    "text": "have an explicit understanding about what the contract is that I exposed to the outside world and as long as I",
    "start": "2677070",
    "end": "2683010"
  },
  {
    "text": "maintain that contract I can do whatever I want in my service this is about allowing independent evolution and",
    "start": "2683010",
    "end": "2688590"
  },
  {
    "text": "development of these services so don't do direct database access except an extremely limited number of circumstances we don't want this so what",
    "start": "2688590",
    "end": "2696330"
  },
  {
    "text": "are we going to do well we've got kind of two options so let's imagine we've decided that the invoicing service is",
    "start": "2696330",
    "end": "2701910"
  },
  {
    "text": "now good enough to be the real source of truth for invoicing we need to get data what do we do well the first thing is",
    "start": "2701910",
    "end": "2707130"
  },
  {
    "text": "what kind of data is it you want so if the data that you want is actually somebody else's data well at the moment",
    "start": "2707130",
    "end": "2713760"
  },
  {
    "text": "the only other people own data is the mullets you come to the monolith you say to the month can I please have some information so you create some kind of",
    "start": "2713760",
    "end": "2720720"
  },
  {
    "text": "explicit service interface on the monolith itself in this case an API and I gonna fix the data I want and this",
    "start": "2720720",
    "end": "2726990"
  },
  {
    "text": "worked really well at one level and if it's like like if it's not like erm say orders data that would make sense I'm",
    "start": "2726990",
    "end": "2733740"
  },
  {
    "text": "not the orders service I'm the invoicing service orders lives in the monolith I'm gonna come to you to get the data I want",
    "start": "2733740",
    "end": "2739250"
  },
  {
    "text": "it's sort of really interesting we start defining these service interfaces on the monolith to expose that information you",
    "start": "2739250",
    "end": "2745380"
  },
  {
    "text": "start to see the shape emerge of other perspective services it's not that being alien",
    "start": "2745380",
    "end": "2750540"
  },
  {
    "text": "where John Hurt's got the alien coming out of his stomach right and you can start seeing the a little heads or their",
    "start": "2750540",
    "end": "2755730"
  },
  {
    "text": "little kind of alien sky creeping out his stomach and it bursts and he dies so a lot of micro size migrations is just",
    "start": "2755730",
    "end": "2761790"
  },
  {
    "text": "like that but you start to sort of see the shape of this horrific entity emerging from the month but but",
    "start": "2761790",
    "end": "2767160"
  },
  {
    "text": "nonetheless it might help you see okay well there's a there's an order services waiting to be freed from the vicious",
    "start": "2767160",
    "end": "2773670"
  },
  {
    "text": "clutches of the monolith although in this context the money would be John Hurt and it would be dead but now of",
    "start": "2773670",
    "end": "2780090"
  },
  {
    "text": "course we need to invert that situation what if the data that you want is actually your data what if it's invoicing data well at that",
    "start": "2780090",
    "end": "2786750"
  },
  {
    "text": "point guess what we've got to move the data over and this is where all the hard stuff happens this is the really hard",
    "start": "2786750",
    "end": "2793369"
  },
  {
    "text": "when you're taking data out an existing system especially a relational databases causes a lot of pain suffering and",
    "start": "2793369",
    "end": "2799469"
  },
  {
    "text": "anguish so I'll give you a very quick example of the kinds of challenges can",
    "start": "2799469",
    "end": "2805739"
  },
  {
    "text": "create I'm gonna throw us right in at the deep end which is how we deal with joins so here we have an existing",
    "start": "2805739",
    "end": "2812519"
  },
  {
    "text": "monitoring application and this is for a system where we are selling compact discs online you can tell how long I've",
    "start": "2812519",
    "end": "2819269"
  },
  {
    "text": "been using this example for it's we're selling compact discs online so we've",
    "start": "2819269",
    "end": "2824670"
  },
  {
    "text": "got some catalog related functionality this knows how much something costs and its thoughts information in our table",
    "start": "2824670",
    "end": "2831059"
  },
  {
    "text": "here so we've got the best of death bulk of volume four and the best of music this is the kind of stuff we sell and",
    "start": "2831059",
    "end": "2837719"
  },
  {
    "text": "the finance sort of functionality it manages our financial transactions so we",
    "start": "2837719",
    "end": "2842819"
  },
  {
    "text": "store stuff in a ledger table and one of the things that we need to do is we need to generate a top ten list of our",
    "start": "2842819",
    "end": "2848069"
  },
  {
    "text": "bestsellers that week and that's actually a pretty straightforward drawing operation in this situation what",
    "start": "2848069",
    "end": "2853529"
  },
  {
    "text": "we would do is we would do a select on our ledger table we'd pull back the top",
    "start": "2853529",
    "end": "2859709"
  },
  {
    "text": "10 best sellers we know you know we limit that select based on the row and everything else and that wouldn't allow",
    "start": "2859709",
    "end": "2867479"
  },
  {
    "text": "us to get the list of ID's but the problem is if we're doing a join out to the album to tell us what things we should be using that's not going to work",
    "start": "2867479",
    "end": "2874499"
  },
  {
    "text": "very well so instead we need to go into a join operation in the application tier",
    "start": "2874499",
    "end": "2879930"
  },
  {
    "text": "move this word to services we would enter into a very different world so we",
    "start": "2879930",
    "end": "2886319"
  },
  {
    "text": "moved to this sort of world now how much I paid for stuff is over in the ledger table here so I pulled my financial",
    "start": "2886319",
    "end": "2893160"
  },
  {
    "text": "transactions back from this place but the the items that I've sold is over in this world here so to generate that top",
    "start": "2893160",
    "end": "2899670"
  },
  {
    "text": "ten list I'm gonna have to pull back my bestseller to the ledger and then I'm gonna have to go to the catalogue and pull back those records as well and all",
    "start": "2899670",
    "end": "2907229"
  },
  {
    "text": "of that joint operations goes from being done in a relational tier up into the application tier and this becomes",
    "start": "2907229",
    "end": "2912959"
  },
  {
    "text": "horrific in terms of things like latency now I go while welding one single join roundtrip I'm now doing one call there",
    "start": "2912959",
    "end": "2920579"
  },
  {
    "text": "to pull back the top ten IDs now I'm going over to the catalog those ten IDs then I'm going to the catalog database",
    "start": "2920579",
    "end": "2926309"
  },
  {
    "text": "they're ten saying please can have the catalog items that I'm getting that response I'm getting response back during operations",
    "start": "2926309",
    "end": "2932190"
  },
  {
    "text": "like this horrendous in terms of latency so this sounds like a lot of fun right and we haven't even scratched the issues",
    "start": "2932190",
    "end": "2939090"
  },
  {
    "text": "around the fact that we haven't got any data integrity in this situation or the relational database windforce things",
    "start": "2939090",
    "end": "2945360"
  },
  {
    "text": "like referential integrity now we are out of time we started a bit late unfortunately I can't talk to you about",
    "start": "2945360",
    "end": "2952470"
  },
  {
    "text": "how I solve all of these problems I'm gonna be around for a bit later on so you can go grab me in the break we talked about this stuff in more detail but thank you so much for your time we",
    "start": "2952470",
    "end": "2960870"
  },
  {
    "text": "there's loads more information about how we sold these sorts of problems out there on the internet and on my blog the",
    "start": "2960870",
    "end": "2965970"
  },
  {
    "text": "one thing I want you to take away from this talk is please buy my book the",
    "start": "2965970",
    "end": "2971130"
  },
  {
    "text": "second thing is that micro sources shouldn't be a default choice okay they",
    "start": "2971130",
    "end": "2976230"
  },
  {
    "text": "should not be a default choice you've got to think really carefully about if they're right for you thank you very much your time",
    "start": "2976230",
    "end": "2981740"
  },
  {
    "text": "[Applause]",
    "start": "2981740",
    "end": "2986130"
  }
]