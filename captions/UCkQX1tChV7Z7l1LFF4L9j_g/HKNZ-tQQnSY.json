[
  {
    "start": "0",
    "end": "132000"
  },
  {
    "text": "[Music]",
    "start": "460",
    "end": "10840"
  },
  {
    "text": "very excited that everyone can make it out this morning and uh it's going to start off pretty intense uh so this is",
    "start": "13160",
    "end": "19960"
  },
  {
    "text": "going to be I had uh physics for physics Majors four semesters in a row at 8:00 a.m. um and it's going to be a little",
    "start": "19960",
    "end": "27039"
  },
  {
    "text": "bit like that as we start so buckle up and um I'll try to keep it light but",
    "start": "27039",
    "end": "32279"
  },
  {
    "text": "it's going to be kind of heavy so we're going to talk about Cash's King and uh of course it's a play on",
    "start": "32279",
    "end": "39719"
  },
  {
    "text": "words right this is uh you know the the actual phrase um it's unclear where this",
    "start": "39719",
    "end": "45239"
  },
  {
    "text": "came from uh they cited from the late 80s in the world St stock market uh uh",
    "start": "45239",
    "end": "51719"
  },
  {
    "text": "downturn um but actually today we're not going to be talking about cash and uh",
    "start": "51719",
    "end": "58079"
  },
  {
    "text": "this kind of cash anyway and and we're not going to be talking about",
    "start": "58079",
    "end": "63359"
  },
  {
    "text": "this kind of cash or this kind of King we're going to be talking about this",
    "start": "63359",
    "end": "69000"
  },
  {
    "text": "kind of cash CH we're going to be talking about this kind of cash um and I think the cash and how we",
    "start": "69000",
    "end": "77520"
  },
  {
    "text": "take advantage of the cash and what browsers do with the cash is really important so I've written about this",
    "start": "77520",
    "end": "83439"
  },
  {
    "text": "extensively and in fact a couple months ago I announced that um browser cach and",
    "start": "83439",
    "end": "89119"
  },
  {
    "text": "what we can do with it it and how we can control it and use it to our advantage is the focus of my research um for the",
    "start": "89119",
    "end": "95880"
  },
  {
    "text": "next few months and I want to start by uh going over this study that I just",
    "start": "95880",
    "end": "102320"
  },
  {
    "text": "released last week um where I wanted to look at some of the long poles in the",
    "start": "102320",
    "end": "107360"
  },
  {
    "text": "tent when it comes to creating fast websites and I think those are uh",
    "start": "107360",
    "end": "113000"
  },
  {
    "text": "connection speed how fast your network connection is how fast you can get those bites uh down over the wire front end",
    "start": "113000",
    "end": "120000"
  },
  {
    "text": "which is primarily JavaScript CSS also plays a role but I think JavaScript is a much bigger um impact on performance and",
    "start": "120000",
    "end": "128360"
  },
  {
    "text": "how we use the cache um so I set up this experiment and let me describe it really",
    "start": "128360",
    "end": "135200"
  },
  {
    "start": "132000",
    "end": "132000"
  },
  {
    "text": "quick uh I'm going to use webpagetest.org how many people have used webpage test.org",
    "start": "135200",
    "end": "140720"
  },
  {
    "text": "so this is the most important thing to take away I should have put this on my takeaway slide this is the most",
    "start": "140720",
    "end": "146599"
  },
  {
    "text": "important thing to take away from today is go to webpage test. .org and it uh you don't have to install anything",
    "start": "146599",
    "end": "152959"
  },
  {
    "text": "anywhere it just gives you a tool that you can use um to uh load any URL and",
    "start": "152959",
    "end": "159480"
  },
  {
    "text": "get performance information about it it's done by Pat mean who started it when he was at AOL but now he's at",
    "start": "159480",
    "end": "165400"
  },
  {
    "text": "Google has a couple resources helping them with it um so I actually have",
    "start": "165400",
    "end": "170959"
  },
  {
    "text": "access to a private instance of webpage test.org and it supports an API so I'm",
    "start": "170959",
    "end": "176239"
  },
  {
    "text": "able to do uh large um runs on in fact at 2 a.m. this morning I started a run",
    "start": "176239",
    "end": "183239"
  },
  {
    "text": "with 300,000 URLs um but I did this last week where I looked at the Alexa top 100",
    "start": "183239",
    "end": "190720"
  },
  {
    "text": "and I ran it in ie9 using a simulated DSL connection so 1.5 mag down uh 50",
    "start": "190720",
    "end": "199280"
  },
  {
    "text": "millisecond uh round trip latency and I'm only looking at the empty cache or",
    "start": "199280",
    "end": "204799"
  },
  {
    "text": "first view experience so this would be the first time for example that a user",
    "start": "204799",
    "end": "209840"
  },
  {
    "text": "ever came to your website or the first time they came to your website after their cash had been cleared and we're",
    "start": "209840",
    "end": "216159"
  },
  {
    "text": "taking the median of three runs and the median is based on the window onload so there's other metrics we should look at",
    "start": "216159",
    "end": "222519"
  },
  {
    "text": "for performance besides onload like start render or above the fold rendering",
    "start": "222519",
    "end": "227640"
  },
  {
    "text": "time but the um one that's predominantly looked at is window onload so that's what we're going to be using when we",
    "start": "227640",
    "end": "233879"
  },
  {
    "text": "analyze these thousand sites so this is the Baseline and then to look at those long PS in the tent I did three",
    "start": "233879",
    "end": "240439"
  },
  {
    "start": "238000",
    "end": "238000"
  },
  {
    "text": "variations so the first one was replacing that DSL connection at 1.5",
    "start": "240439",
    "end": "246360"
  },
  {
    "text": "megabits with a fos connection that's 20 megabits down megabits per",
    "start": "246360",
    "end": "252040"
  },
  {
    "text": "second uh disabling JavaScript which would take that long pull uh out of the tent and instead of looking at empty",
    "start": "252040",
    "end": "259600"
  },
  {
    "text": "cache view looking at the primed cache view or the repeat view so let's pause",
    "start": "259600",
    "end": "265320"
  },
  {
    "text": "for just a second I always do this before I run an experiment",
    "start": "265320",
    "end": "270600"
  },
  {
    "text": "um I don't know about you guys but it usually takes me about three to five tries of designing an experiment running",
    "start": "270600",
    "end": "277800"
  },
  {
    "text": "it looking at the data and realizing some flaw I had in my design so before I start an experiment especially one",
    "start": "277800",
    "end": "284440"
  },
  {
    "text": "that's going to take quite a few resources to run I stop and I Envision",
    "start": "284440",
    "end": "289479"
  },
  {
    "text": "what the results might say and I usually have something that I'm expecting it to say and I always ask myself what if the",
    "start": "289479",
    "end": "297080"
  },
  {
    "text": "results come out the opposite would I explain that away by some flaw in the experiment design and if so let me",
    "start": "297080",
    "end": "303840"
  },
  {
    "text": "address that now so I stopped before I ran this and I thought what the results were going to come out to be so of these",
    "start": "303840",
    "end": "310280"
  },
  {
    "text": "three how many people which of these uh fixes or improvements do you think is going to produce the fastest result what",
    "start": "310280",
    "end": "317080"
  },
  {
    "text": "about uh going to a fast",
    "start": "317080",
    "end": "320879"
  },
  {
    "text": "network uh disabling",
    "start": "322319",
    "end": "326520"
  },
  {
    "text": "JavaScript and using primcast so you guys read the title of the talk",
    "start": "327400",
    "end": "333840"
  },
  {
    "text": "today didn't you I even though I ran this when I'm on",
    "start": "333840",
    "end": "340400"
  },
  {
    "text": "my focus on caching like I want to focus on caching but I kind of want to see how big is the thing that I'm focusing on I",
    "start": "340400",
    "end": "347000"
  },
  {
    "text": "actually thought it was going to be JavaScript so let's just jump to the results uh this is what the results came",
    "start": "347000",
    "end": "353120"
  },
  {
    "text": "out to be so I'm going to kind of focus on the median time but the 95th",
    "start": "353120",
    "end": "358440"
  },
  {
    "text": "percentile time is there as as well so the Baseline was about 7 1/2 seconds uh",
    "start": "358440",
    "end": "363639"
  },
  {
    "text": "so that's the median of three runs for each website so we took the median time so 1,000 medians we took the average of",
    "start": "363639",
    "end": "370240"
  },
  {
    "text": "that was 7.65 um if we disable JavaScript we're",
    "start": "370240",
    "end": "375319"
  },
  {
    "text": "at 4.7 seconds uh going to a fast network was",
    "start": "375319",
    "end": "381080"
  },
  {
    "text": "uh much bigger than I expected 4.13 and using the prime cache was",
    "start": "381080",
    "end": "387560"
  },
  {
    "text": "3.46 so doing a primed cache or repeat view was less than half it was twice as",
    "start": "387560",
    "end": "393639"
  },
  {
    "text": "fast as the empty cache page view um and I don't know maybe that's surprising",
    "start": "393639",
    "end": "399560"
  },
  {
    "text": "maybe not but if we look at this next chart which shows the uh total transfer",
    "start": "399560",
    "end": "405680"
  },
  {
    "text": "size so this is um if any of the responses are JavaScript or css or HTML",
    "start": "405680",
    "end": "411319"
  },
  {
    "text": "they're compressed so this is just the number of of uh bytes transferred over the wire if we look at the total number",
    "start": "411319",
    "end": "417720"
  },
  {
    "text": "of requests and the total transfer for size we can kind of see how these numbers make",
    "start": "417720",
    "end": "423360"
  },
  {
    "text": "sense um so here's the Baseline oh and in blue I wrote the median onload time",
    "start": "423360",
    "end": "429120"
  },
  {
    "text": "just to remind us so uh here's the Baseline uh the average transfer size",
    "start": "429120",
    "end": "436160"
  },
  {
    "text": "was 900k and the number of requests was 90",
    "start": "436160",
    "end": "441400"
  },
  {
    "text": "if we disable JavaScript we go down to 59 requests because of course uh",
    "start": "441400",
    "end": "447560"
  },
  {
    "text": "JavaScript is doing more and more work in these websites especially in the top 1,000 websites they're downloading other",
    "start": "447560",
    "end": "453759"
  },
  {
    "text": "Dynamic resources so if we disable JavaScript the number of requests is going to drop dramatically even though",
    "start": "453759",
    "end": "459840"
  },
  {
    "text": "there might be some images or whatever in no script tags it's going to be reduced from what would come down with",
    "start": "459840",
    "end": "465639"
  },
  {
    "text": "JavaScript enabled and so with that drop in requests we also get a drop in total transfer size but more importantly to me",
    "start": "465639",
    "end": "472919"
  },
  {
    "text": "something that's not reflected here is the time it takes to parse and execute JavaScript so um we're also skipping all",
    "start": "472919",
    "end": "479639"
  },
  {
    "text": "of that pain here as well I would have thought this would have been much faster um and then this is really",
    "start": "479639",
    "end": "487280"
  },
  {
    "text": "interesting and uh speaks to the pain that we have with building fast mobile",
    "start": "487280",
    "end": "492879"
  },
  {
    "text": "sites where with a FiOS connection we're actually downloading as many resources",
    "start": "492879",
    "end": "498440"
  },
  {
    "text": "and bytes as we were in the Baseline but because the speed is so much faster",
    "start": "498440",
    "end": "504039"
  },
  {
    "text": "we're getting a much faster time uh again almost half not quite but almost",
    "start": "504039",
    "end": "509919"
  },
  {
    "text": "and so there's still a lot this was surprising to me because a fast network is going to make a huge difference but",
    "start": "509919",
    "end": "515839"
  },
  {
    "text": "there's still a lot of contention in the browser there's things have to happen in a certain order in this uh fast Network",
    "start": "515839",
    "end": "523599"
  },
  {
    "text": "um test we're still executing JavaScript CSS and reflows are still happening and",
    "start": "523599",
    "end": "529160"
  },
  {
    "text": "yet just the faster connection is getting us down to 4 seconds so um",
    "start": "529160",
    "end": "534680"
  },
  {
    "text": "that's very impressive and and I don't know I I didn't mention it the uh late y",
    "start": "534680",
    "end": "539880"
  },
  {
    "text": "here was very low I think it was four or 5 milliseconds in the simulated connection so we're not going to get we",
    "start": "539880",
    "end": "545680"
  },
  {
    "text": "might get speeds that are like DSL on mobile typically less but the they're",
    "start": "545680",
    "end": "550839"
  },
  {
    "text": "very high latency and so that's going to be a problem on mobile networks but if you have a fast home network um you",
    "start": "550839",
    "end": "556959"
  },
  {
    "text": "might be getting faster uh page load times benefiting from that but this is",
    "start": "556959",
    "end": "562160"
  },
  {
    "text": "the big change is with a prime cache we're dropping down to about 160k and",
    "start": "562160",
    "end": "568800"
  },
  {
    "text": "about 30 from 90 requests to only 30 requests so um now this is a best case",
    "start": "568800",
    "end": "577120"
  },
  {
    "text": "scenario so typically the way so what happens in web page test is you say load",
    "start": "577120",
    "end": "583160"
  },
  {
    "text": "the page with an empty cache and then load it again and record the results for the prime cache for the um repeat View",
    "start": "583160",
    "end": "590279"
  },
  {
    "text": "and that repeat view happens 30 seconds after the first one so whatever was",
    "start": "590279",
    "end": "595680"
  },
  {
    "text": "stuffed into the cach is still there right there's the user didn't wander off for a day or two downloading other",
    "start": "595680",
    "end": "602640"
  },
  {
    "text": "images and videos and websites so this is a best case scenario anything that",
    "start": "602640",
    "end": "608240"
  },
  {
    "text": "the website owner said could be cached is going to be there in the cache whereas typically you would want to",
    "start": "608240",
    "end": "614440"
  },
  {
    "text": "think about a repeat experience happening the next day or 3 Days Later whatever your typical user demographics",
    "start": "614440",
    "end": "621200"
  },
  {
    "text": "user sessions uh uh stats indicate so this is a best case scenario but um it",
    "start": "621200",
    "end": "628519"
  },
  {
    "text": "produces very significant savings so you know this tells me the cash is pretty",
    "start": "628519",
    "end": "634079"
  },
  {
    "text": "important so before I go too much farther we're going to get into the uh physics for physics Majors part of the",
    "start": "634079",
    "end": "640560"
  },
  {
    "text": "talk and we're going to do a little primer a little review on how caching works with htvp how many people feel",
    "start": "640560",
    "end": "647959"
  },
  {
    "text": "comfortable with their knowledge in caching it's only four slides",
    "start": "647959",
    "end": "656079"
  },
  {
    "text": "so so bear with me okay so suppose we're re esting main.js we're going to send up a simple",
    "start": "656079",
    "end": "662600"
  },
  {
    "start": "662000",
    "end": "662000"
  },
  {
    "text": "G request like this the nice thing about uh HTTP is it's um a text based protocol",
    "start": "662600",
    "end": "668200"
  },
  {
    "text": "so we can see everything um and we're going to get back this response that says it's a 200 okay uh we're returning",
    "start": "668200",
    "end": "675600"
  },
  {
    "text": "some text JavaScript and it's about 200k of JavaScript um and there's the actual",
    "start": "675600",
    "end": "681279"
  },
  {
    "text": "beginning of the file so that's pretty simple that's how a simple git works now",
    "start": "681279",
    "end": "686480"
  },
  {
    "text": "the next time the user goes to this page in a minute in a day this is typically",
    "start": "686480",
    "end": "691800"
  },
  {
    "text": "what's going to happen they're going to make another get request and they're going to get the",
    "start": "691800",
    "end": "697680"
  },
  {
    "text": "same response right there might be some humanistic caching going on and we'll talk about that in a few slides but",
    "start": "697680",
    "end": "705000"
  },
  {
    "text": "basically this is the way it's going to work and what we notice is we just downloaded 200k twice and it's probably",
    "start": "705000",
    "end": "711959"
  },
  {
    "text": "the exact same 200k it's the exact same size and that's not really efficient",
    "start": "711959",
    "end": "717079"
  },
  {
    "text": "right so the guys who created HTTP said said well what can we do to make it so that if a file hasn't changed you don't",
    "start": "717079",
    "end": "723560"
  },
  {
    "text": "have to download it again and the way uh that's achieved is with a conditional get request so the first time you make",
    "start": "723560",
    "end": "730279"
  },
  {
    "start": "728000",
    "end": "728000"
  },
  {
    "text": "the request the thing that changes is in the response the website owner has added",
    "start": "730279",
    "end": "735360"
  },
  {
    "text": "these two response HTTP headers uh and you don't have to add both you could add one or the other um",
    "start": "735360",
    "end": "742519"
  },
  {
    "text": "last modified gives the date that this response was last modified so the last",
    "start": "742519",
    "end": "747639"
  },
  {
    "text": "time the developer edited it and pushed it to production was September 24th and there might also be an e tag this could",
    "start": "747639",
    "end": "754320"
  },
  {
    "text": "be anything you want by default Apache puts in the file timestamp which is just kind of repetitive with last modified",
    "start": "754320",
    "end": "761320"
  },
  {
    "text": "you might put a check sum or something like that it could be something that is generated based on something about this",
    "start": "761320",
    "end": "767760"
  },
  {
    "text": "user and their location and their browser um but whatever it is it can be any string that you want uh according to",
    "start": "767760",
    "end": "774399"
  },
  {
    "text": "the spec now and then we get 200k of JavaScript now the next time the next",
    "start": "774399",
    "end": "779480"
  },
  {
    "text": "day the user asked for this resource the browser knows that it got these headers",
    "start": "779480",
    "end": "784920"
  },
  {
    "text": "the eag and the last modified before and so the browser can send up these two new",
    "start": "784920",
    "end": "790600"
  },
  {
    "text": "request headers if modified since I want this file main.js I have one in my cache",
    "start": "790600",
    "end": "798440"
  },
  {
    "text": "that is dated September 24th do you have anything that's been modified since then",
    "start": "798440",
    "end": "803880"
  },
  {
    "text": "and also the E tag I it also has this e tag is the new one got a matching do",
    "start": "803880",
    "end": "809120"
  },
  {
    "text": "does the new one have a matching e tag and if nothing has changed the server can just return this tiny little 304",
    "start": "809120",
    "end": "816160"
  },
  {
    "text": "Response Code so we can save 200k so that's awesome but if you're on a high",
    "start": "816160",
    "end": "822440"
  },
  {
    "text": "latency Network like mobile making this check doing this conditional git request",
    "start": "822440",
    "end": "828600"
  },
  {
    "text": "for all your resources is going to be very painful you'll have tremendous savings but the typical website has",
    "start": "828600",
    "end": "834920"
  },
  {
    "text": "about 80 or 90 requests in it so if you had to make 80 of these conditional get requests over a mobile network or even",
    "start": "834920",
    "end": "841440"
  },
  {
    "text": "desktop it's going to slow things down significantly so the guys thought what",
    "start": "841440",
    "end": "846519"
  },
  {
    "text": "can we do is there a way to avoid doing this conditional get uh request every",
    "start": "846519",
    "end": "852000"
  },
  {
    "text": "time and that's where we get into the caching headers that indicate um how",
    "start": "852000",
    "end": "857759"
  },
  {
    "start": "854000",
    "end": "854000"
  },
  {
    "text": "long something can be held in the cach and reused before it expires so the way",
    "start": "857759",
    "end": "863639"
  },
  {
    "text": "that that's enacted is the website owner returns this max age cash control max age value",
    "start": "863639",
    "end": "869600"
  },
  {
    "text": "and this says this is the maximum number of seconds that you can continue to repeatedly use this response this",
    "start": "869600",
    "end": "877079"
  },
  {
    "text": "Javascript file without even checking with me you don't even have to bother to check and so in this case this is one",
    "start": "877079",
    "end": "883000"
  },
  {
    "text": "year of seconds so within a year if the user loads this page again and needs",
    "start": "883000",
    "end": "889839"
  },
  {
    "text": "this file there's no request no HTTP traffic at all it just reads it from the",
    "start": "889839",
    "end": "895560"
  },
  {
    "text": "cache off local storage off disk so that's really really fast it eliminates",
    "start": "895560",
    "end": "901079"
  },
  {
    "text": "the HTP traffic altogether now this is what is really really good and if your resources aren't",
    "start": "901079",
    "end": "907639"
  },
  {
    "text": "changing or you know when they change you can just change the file name you want to use a max age a year is good a",
    "start": "907639",
    "end": "915399"
  },
  {
    "text": "week is about the minimum you want to use you can use 10 years really once you push something out live to the world you",
    "start": "915399",
    "end": "922639"
  },
  {
    "text": "never want to change it without changing the name because there are so many misconfigured proxies out there about",
    "start": "922639",
    "end": "928560"
  },
  {
    "text": "one to 10% somewhere in there of your users will never get an update unless you change the name so really you could",
    "start": "928560",
    "end": "935160"
  },
  {
    "text": "make it cashable for 10 years it doesn't matter you're never going to push a change without changing the name of the",
    "start": "935160",
    "end": "940279"
  },
  {
    "text": "file um so a year is kind of good um but in some cases you have",
    "start": "940279",
    "end": "945480"
  },
  {
    "text": "something Dynamic like the inbox the address book uh the number of mentions",
    "start": "945480",
    "end": "950880"
  },
  {
    "text": "things that you don't ever want the browser to cach or any intermediate proxies to Cache so how do you avoid",
    "start": "950880",
    "end": "957040"
  },
  {
    "text": "caching even though that's the opposite of what I want to espouse I'll just mention it for clarity um suppose you",
    "start": "957040",
    "end": "963959"
  },
  {
    "start": "963000",
    "end": "963000"
  },
  {
    "text": "had something like inbox. JS maybe it's Jason or something um you can return this cash control header and set a max",
    "start": "963959",
    "end": "971079"
  },
  {
    "text": "age of zero and specify no cash and must revalidate that tells the browser",
    "start": "971079",
    "end": "976680"
  },
  {
    "text": "anytime a web page wants this resource you have to check back with me and if",
    "start": "976680",
    "end": "982120"
  },
  {
    "text": "it's something that's confidential you might also want to add no store like banking information you could add no",
    "start": "982120",
    "end": "987800"
  },
  {
    "text": "store um um so the next time that uh the user loads a page that needs inbox JS it",
    "start": "987800",
    "end": "994600"
  },
  {
    "text": "makes the request again so that's how caching works that wasn't too bad but",
    "start": "994600",
    "end": "1000319"
  },
  {
    "text": "the takeaway from this is it's really important to be explicit you really",
    "start": "1000319",
    "end": "1005959"
  },
  {
    "text": "should never kind of be in the waffle say well I'm not sure if I don't want it cashed or I do want it cashed I just",
    "start": "1005959",
    "end": "1012720"
  },
  {
    "text": "won't do anything and I'll leave it up to the whims of uh intermediate caches and proxies out there",
    "start": "1012720",
    "end": "1019560"
  },
  {
    "text": "um what to do with this resource when the user requests it next time be decisive if if something isn't changing",
    "start": "1019560",
    "end": "1026880"
  },
  {
    "text": "very much or if you can change the file name whenever it does change then make it cashable for a year if something",
    "start": "1026880",
    "end": "1033079"
  },
  {
    "text": "shouldn't be cash if they should check back with you your server every time then say you got to say no cash",
    "start": "1033079",
    "end": "1039240"
  },
  {
    "text": "otherwise they might not check back so be explicit specify cash control uh no",
    "start": "1039240",
    "end": "1045160"
  },
  {
    "text": "cash or max age so that's a good takeaway what do we actually see in practice this is where",
    "start": "1045160",
    "end": "1051280"
  },
  {
    "text": "it gets a little more fun so I think the the phys physics for physics Majors part is more or less over um because it's",
    "start": "1051280",
    "end": "1058320"
  },
  {
    "text": "always fun to look at what real websites are doing and that's what we're going to go into now so here's the Alexa top 1000",
    "start": "1058320",
    "end": "1065039"
  },
  {
    "text": "worldwide and what we see is uh I'm just looking at max age here so we see that",
    "start": "1065039",
    "end": "1072600"
  },
  {
    "text": "uh I can't even read this it's too small for me uh 5% have a max age that's more",
    "start": "1072600",
    "end": "1078120"
  },
  {
    "text": "than a year that's really good not as good as it should be on the other end",
    "start": "1078120",
    "end": "1083840"
  },
  {
    "text": "37% of responses don't specify any max age right so some of these might be no",
    "start": "1083840",
    "end": "1091840"
  },
  {
    "text": "caches right there's no max age you should say max age zero you don't have to but some of these might be a no cach",
    "start": "1091840",
    "end": "1099080"
  },
  {
    "text": "but 37% is pretty high and the top 1,000 sites are better configured than um the",
    "start": "1099080",
    "end": "1105720"
  },
  {
    "text": "long tale of websites out there so we can look and uh I looked at this data",
    "start": "1105720",
    "end": "1111799"
  },
  {
    "text": "and I saw that 14% of the responses had no cash or must",
    "start": "1111799",
    "end": "1118280"
  },
  {
    "text": "revalidate and about 10% of that 14% were in this bucket with no max age so",
    "start": "1118280",
    "end": "1125320"
  },
  {
    "text": "that means uh and also in here uh 24% of them",
    "start": "1125320",
    "end": "1131000"
  },
  {
    "text": "had no cash control header at all so that's where people have just said I don't know about this or I'm I'm just",
    "start": "1131000",
    "end": "1137440"
  },
  {
    "text": "ambiguous I don't know what the answer is and 27% 37 minus 10 have no max age",
    "start": "1137440",
    "end": "1144600"
  },
  {
    "text": "and they don't say no cash or must rev validate so again the website owner is just being ambiguous and ambivalent",
    "start": "1144600",
    "end": "1151320"
  },
  {
    "text": "about what the caching Behavior should be and what that means is these responses are going to be subject to",
    "start": "1151320",
    "end": "1157000"
  },
  {
    "text": "heuristic cashing which we'll talk about in a minute so that's not great the top",
    "start": "1157000",
    "end": "1162120"
  },
  {
    "text": "1,000 sites in the world 25% of the responses really have no indication of",
    "start": "1162120",
    "end": "1168760"
  },
  {
    "text": "of what cashes should do with them should I reuse it should I not reuse it I don't know you guys just decide and",
    "start": "1168760",
    "end": "1175880"
  },
  {
    "text": "really as top websites people shouldn't do that now if we look at the top",
    "start": "1175880",
    "end": "1181080"
  },
  {
    "text": "300,000 all this data I'll mention at the end is from this project I run htpr archive.org um and currently as I",
    "start": "1181080",
    "end": "1187919"
  },
  {
    "text": "mentioned right now we kicked off the crawl we're doing 300 analyzing 300,000 uh the top 300,000 worldwide URLs every",
    "start": "1187919",
    "end": "1195679"
  },
  {
    "text": "two weeks so if we look at the top 300,000 again as we get out of that top",
    "start": "1195679",
    "end": "1201880"
  },
  {
    "text": "1,000 uh well configured sites things get a lot worse so instead of",
    "start": "1201880",
    "end": "1207000"
  },
  {
    "text": "37% having no max age now it's 57% more than half of the resources have no max",
    "start": "1207000",
    "end": "1213679"
  },
  {
    "text": "age indicator again there might be some they don't have a max age indicator because they're not cashable but only 9%",
    "start": "1213679",
    "end": "1221919"
  },
  {
    "text": "of this 57% are no cash so that means 44% have",
    "start": "1221919",
    "end": "1228320"
  },
  {
    "text": "no cash control header at all and 57us 9 is 48% have no max age or no cash or",
    "start": "1228320",
    "end": "1235559"
  },
  {
    "text": "must revalidate and so they're subject half of the responses are subject to heuristic caching whatever Behavior the",
    "start": "1235559",
    "end": "1243080"
  },
  {
    "text": "cashes out there in the world want to do and there's no spec that dictates how",
    "start": "1243080",
    "end": "1248159"
  },
  {
    "text": "heuristic caching should work so 50% of the responses are going be cached up to",
    "start": "1248159",
    "end": "1253559"
  },
  {
    "text": "the whims of whatever cash the user is behind their local cash or their intermediate cash",
    "start": "1253559",
    "end": "1259880"
  },
  {
    "text": "cashes and the other sad thing is as much as I love to go out and talk to",
    "start": "1259880",
    "end": "1265840"
  },
  {
    "text": "people and beat the drama around high performance we're really not seeing a pickup in the use of caching headers",
    "start": "1265840",
    "end": "1273480"
  },
  {
    "text": "this is for the last two years um looking at the uh top two years ago we",
    "start": "1273480",
    "end": "1278919"
  },
  {
    "text": "were only doing 50,000 the top 50,000 URLs so during the course of this that's what some of the drops and and increases",
    "start": "1278919",
    "end": "1286240"
  },
  {
    "text": "are from is CH as we expand the number of URLs we're looking at the stats drop",
    "start": "1286240",
    "end": "1291799"
  },
  {
    "text": "a little bit because generally as you get closer to the tail performance is worse so we'll drop a little bit and",
    "start": "1291799",
    "end": "1297760"
  },
  {
    "text": "we'll start climbing and drop a little bit but generally there's not a great uptake in this very important",
    "start": "1297760",
    "end": "1304760"
  },
  {
    "text": "performance uh optimization of getting resources to be",
    "start": "1304760",
    "end": "1309960"
  },
  {
    "text": "cached so we have slow adoption so a lot of these resources in the case of the",
    "start": "1309960",
    "end": "1315600"
  },
  {
    "start": "1313000",
    "end": "1313000"
  },
  {
    "text": "top 300,000 URLs going be subject to euristic caching and there's nothing that dictates what an intermediate cach",
    "start": "1315600",
    "end": "1322520"
  },
  {
    "text": "or local cach should do for euristic caching but there are guidelines so this is what the spec says in the absence of",
    "start": "1322520",
    "end": "1329679"
  },
  {
    "text": "Max age so that's what we're talking about here we're talking about resources that don't have a max age and they also",
    "start": "1329679",
    "end": "1336279"
  },
  {
    "text": "don't have no cash or must revalidate so really the website owner hasn't said anything about how cashing should uh be",
    "start": "1336279",
    "end": "1343679"
  },
  {
    "text": "dictated for these resources in the absence of Max age the cash May compute",
    "start": "1343679",
    "end": "1349159"
  },
  {
    "text": "it's up to them a freshness lifetime using a heuristic if the response has a",
    "start": "1349159",
    "end": "1354880"
  },
  {
    "text": "last modified time theistic expiration value should you don't have to but we",
    "start": "1354880",
    "end": "1360480"
  },
  {
    "text": "recommend you should be no more than some fraction of the interval since that time so it's actually very simple but",
    "start": "1360480",
    "end": "1368200"
  },
  {
    "text": "the wording makes it a little hard for me so suppose today October",
    "start": "1368200",
    "end": "1374320"
  },
  {
    "text": "15th we downloaded Main main.js and it had its last modified time of",
    "start": "1374320",
    "end": "1381120"
  },
  {
    "text": "September 24th how long ago was that 21 days the guideline is you should",
    "start": "1381120",
    "end": "1389679"
  },
  {
    "text": "have a freshness window of 2 days 10% of that two days so",
    "start": "1389679",
    "end": "1396600"
  },
  {
    "text": "if the user came back tomorrow if they downloaded it today and we uh saw that it last modified the 24th user came",
    "start": "1396600",
    "end": "1404000"
  },
  {
    "text": "tomorrow and there was no caching headers the browser would say well it's been less than two days so I'll let you",
    "start": "1404000",
    "end": "1410320"
  },
  {
    "text": "reuse it I won't generate another request if they came back uh two days later or three or more then the browser",
    "start": "1410320",
    "end": "1417080"
  },
  {
    "text": "would re-request it even though it's possible and likely that this resource hasn't",
    "start": "1417080",
    "end": "1422440"
  },
  {
    "text": "changed so that's how urisa caching works now remember we've got browsers",
    "start": "1422440",
    "end": "1427840"
  },
  {
    "text": "and intermediate caches don't have to do this if they don't want to um and we've got 50% for the top 300,000 sites are",
    "start": "1427840",
    "end": "1436000"
  },
  {
    "text": "subject to this you know fairly vague guideline about what uh cashes should do",
    "start": "1436000",
    "end": "1442960"
  },
  {
    "text": "so let's assume it turns out I9 uh actually adopted this exact behavior um",
    "start": "1442960",
    "end": "1449559"
  },
  {
    "text": "and that's what we ran our experiment in so what's a typical interval between R",
    "start": "1449559",
    "end": "1455480"
  },
  {
    "text": "when we ran the experiment I ran it uh the first week of October so when I ran the experiment and the last modified",
    "start": "1455480",
    "end": "1463000"
  },
  {
    "text": "date of the resources what's a typical interval of that time the date the experiment ran in the last modified date",
    "start": "1463000",
    "end": "1470320"
  },
  {
    "text": "so if we look at these top 300,000 responses uh websites if we look at all the responses there's about uh 3",
    "start": "1470320",
    "end": "1478679"
  },
  {
    "start": "1471000",
    "end": "1471000"
  },
  {
    "text": "million of them no 30 million of them um this is the distribution about",
    "start": "1478679",
    "end": "1485520"
  },
  {
    "text": "3% have an interval so that's the Delta of the time of the experiment and the",
    "start": "1485520",
    "end": "1490559"
  },
  {
    "text": "last modified date 3% have an interval under a day another about 3% under a",
    "start": "1490559",
    "end": "1496679"
  },
  {
    "text": "week um so we have about 6% of them have a",
    "start": "1496679",
    "end": "1502559"
  },
  {
    "text": "heuristic max age that's the interval that's less than a day which if you take 10% of it is like two hours so if the",
    "start": "1502559",
    "end": "1509600"
  },
  {
    "text": "user if there's if you don't specify anything the user comes back within two two hours um and this is out of the",
    "start": "1509600",
    "end": "1515760"
  },
  {
    "text": "total number of requests so we had uh about 40 what was it 48% of the",
    "start": "1515760",
    "end": "1521720"
  },
  {
    "text": "responses didn't have any max age headers 6% of those will have be able to",
    "start": "1521720",
    "end": "1527840"
  },
  {
    "text": "be reused used in uh 2 hours or less",
    "start": "1527840",
    "end": "1533480"
  },
  {
    "text": "but um so that's not very good and we have about of that 48% 30% of them so",
    "start": "1533480",
    "end": "1539799"
  },
  {
    "text": "about a third of overall requests will be able to be reused without a response",
    "start": "1539799",
    "end": "1546200"
  },
  {
    "text": "um if it's uh done in more than 3 days so that's not bad if all the browsers",
    "start": "1546200",
    "end": "1551360"
  },
  {
    "text": "out there adopted this juristic um but it could be a lot better if they just",
    "start": "1551360",
    "end": "1556399"
  },
  {
    "text": "specified a max age right it's not that hard and you're going to get some",
    "start": "1556399",
    "end": "1561840"
  },
  {
    "text": "caching Behavior anyway it's just that you don't know what it's going to be it's up to the whim of the caches",
    "start": "1561840",
    "end": "1566960"
  },
  {
    "text": "whatever they've implemented so it would be much better since you're going to get some caching Behavior anyway to be very",
    "start": "1566960",
    "end": "1573760"
  },
  {
    "text": "explicit about it if you want your stuff cashed specify how long it should be cashed and when the browser should check",
    "start": "1573760",
    "end": "1580520"
  },
  {
    "text": "back for an update if you don't want it cashed specify uh no cash and then we",
    "start": "1580520",
    "end": "1586440"
  },
  {
    "text": "also have this uh 8% % of the overall responses are unknown in the case of I9",
    "start": "1586440",
    "end": "1593399"
  },
  {
    "text": "I don't know about other browsers what it does with the unknown ones is it will check once per session so that you close",
    "start": "1593399",
    "end": "1600399"
  },
  {
    "text": "your browser you open it the next day you visit that website that has something that was cached without any",
    "start": "1600399",
    "end": "1606000"
  },
  {
    "text": "max age and without last modified then um for those the browser going to check",
    "start": "1606000",
    "end": "1611640"
  },
  {
    "text": "the first time and never check it or I9 will check the first time and never check again for the life of that session",
    "start": "1611640",
    "end": "1618399"
  },
  {
    "text": "so again you're getting behavior that you don't really know about so a lot of stats a lot of",
    "start": "1618399",
    "end": "1625320"
  },
  {
    "text": "charts let's do something a little more fun let's bring it home a little bit so",
    "start": "1625320",
    "end": "1632039"
  },
  {
    "text": "people who live in glass houses shouldn't throw stones but it's kind of",
    "start": "1632039",
    "end": "1639080"
  },
  {
    "text": "fun nobody's perfect so please everyone take this with a grain of salt if I talk",
    "start": "1639080",
    "end": "1644360"
  },
  {
    "text": "about a website that you work on so for",
    "start": "1644360",
    "end": "1649559"
  },
  {
    "text": "example if you're a speaker at this conference your slide a slide for your",
    "start": "1649559",
    "end": "1655080"
  },
  {
    "text": "website is probably in this deck so I sat down to do this last",
    "start": "1655080",
    "end": "1660120"
  },
  {
    "text": "night and I was excited I analyze a lot of websites and I looked at the speakers",
    "start": "1660120",
    "end": "1667039"
  },
  {
    "text": "and the websites they worked on and a lot of these like Airbnb were interesting sites that I had never",
    "start": "1667039",
    "end": "1673399"
  },
  {
    "text": "analyzed from a performance perspective before and I my I was you excited this",
    "start": "1673399",
    "end": "1679640"
  },
  {
    "text": "is going to be fun I'll put people on the you know uh Hot Seat a little bit",
    "start": "1679640",
    "end": "1687120"
  },
  {
    "text": "I'll tell tell attendees to go and why are you making your site better configured and it was hugely",
    "start": "1687120",
    "end": "1694720"
  },
  {
    "text": "disappointing because most all the sites were really",
    "start": "1694720",
    "end": "1700279"
  },
  {
    "text": "good I all the speakers who run these websites thank you very much but uh you",
    "start": "1701440",
    "end": "1707320"
  },
  {
    "text": "kind of took the wind out the sales of my presentation so here we have Airbnb 81% so uh I color code the the stats",
    "start": "1707320",
    "end": "1715240"
  },
  {
    "text": "green is good red is bad uh an ugly Harvest color is in the middle so",
    "start": "1715240",
    "end": "1723000"
  },
  {
    "text": "all green uh 81% of the responses have cash control headers uh sure it could be",
    "start": "1723000",
    "end": "1728440"
  },
  {
    "text": "higher but that's pretty good um a very small number of them uh have very short",
    "start": "1728440",
    "end": "1735440"
  },
  {
    "text": "uh so you might specify a cash control header but it might be really short like oh only cash it for 6 minutes that's",
    "start": "1735440",
    "end": "1741039"
  },
  {
    "text": "bogus well only 10% of the resources have an expiration time less than a day",
    "start": "1741039",
    "end": "1747200"
  },
  {
    "text": "so that's pretty good that's really good in fact um and they've specified last modified you want to specify last",
    "start": "1747200",
    "end": "1753880"
  },
  {
    "text": "modified otherwise puristic caching is really um out the window as well and",
    "start": "1753880",
    "end": "1758960"
  },
  {
    "text": "browsers are getting smarter and smarter and smarter um I didn't have time to um reverse engineer theistic caching for",
    "start": "1758960",
    "end": "1766000"
  },
  {
    "text": "all the browsers but I'm confident that they're uh good and they're going to be getting better so um but you have to",
    "start": "1766000",
    "end": "1772960"
  },
  {
    "text": "specify a last modified to give those yourist those browsers those caches some clue about what they should be doing",
    "start": "1772960",
    "end": "1779880"
  },
  {
    "text": "juristically and 78% is pretty high and uh the last modified interval is about",
    "start": "1779880",
    "end": "1785960"
  },
  {
    "text": "40 days so in cases where a h cach has to kick in it's going to be about a 4day",
    "start": "1785960",
    "end": "1792640"
  },
  {
    "text": "uh interval at least in I9 10% of 40 days so that's pretty good there Airbnb",
    "start": "1792640",
    "end": "1798519"
  },
  {
    "text": "is in pretty good shape very good shape I would say another site I hadn't looked at",
    "start": "1798519",
    "end": "1804080"
  },
  {
    "text": "Pinterest really hoping for a lot of red here not getting",
    "start": "1804080",
    "end": "1809399"
  },
  {
    "text": "it um so here we see here we see 131 requests 87% of them",
    "start": "1809399",
    "end": "1818840"
  },
  {
    "text": "have a cash control header only 2% expire in less than a day 94% have last",
    "start": "1818840",
    "end": "1824919"
  },
  {
    "text": "modified and the median uh last modified interval is 151 days so 10% of that",
    "start": "1824919",
    "end": "1831600"
  },
  {
    "text": "would be a euristic window of 15 days that something could be reused in the cash if it didn't have a max age so this",
    "start": "1831600",
    "end": "1838720"
  },
  {
    "text": "is again really good so I've got about 10 or 15 other speaker websites that all",
    "start": "1838720",
    "end": "1845919"
  },
  {
    "text": "look good and I'm not going to go through those because that's not fun so let's look at some that aren't so",
    "start": "1845919",
    "end": "1854640"
  },
  {
    "text": "good uh so I think this uh this is Sydney is speaking today and he's from",
    "start": "1854720",
    "end": "1862320"
  },
  {
    "text": "stackmob only 25% of the responses have a cash control header Sydney do you want",
    "start": "1862320",
    "end": "1868600"
  },
  {
    "text": "to raise your hand no I haven't met him before I hope he's",
    "start": "1868600",
    "end": "1873880"
  },
  {
    "text": "not bigger than me so uh only 25% of the responses have",
    "start": "1873880",
    "end": "1879559"
  },
  {
    "text": "a cash control header and again like this is like not being decisive it's like making a decision by doing nothing",
    "start": "1879559",
    "end": "1886320"
  },
  {
    "text": "and that's not good like be explicit should these things be cached or not because you're going to get in certain browsers you're going to get certain",
    "start": "1886320",
    "end": "1892200"
  },
  {
    "text": "caching anyway do you really want to have no idea no control over what's happening or do you want to control",
    "start": "1892200",
    "end": "1897639"
  },
  {
    "text": "where your resources are going to get updated so 25% that's really bad um the",
    "start": "1897639",
    "end": "1903080"
  },
  {
    "text": "ones that do have caching headers only 1% expire in less than a day so that's good and 81% of the responses have a",
    "start": "1903080",
    "end": "1910799"
  },
  {
    "text": "last modified that's really good and it's a really long last modified interval the median last modified time",
    "start": "1910799",
    "end": "1918440"
  },
  {
    "text": "between when I ran the experiment and the uh median last modified date is 240 days but that's a red because that means",
    "start": "1918440",
    "end": "1926480"
  },
  {
    "text": "their resources aren't changing very much and they could have made them cashable for a really long time but they",
    "start": "1926480",
    "end": "1932720"
  },
  {
    "text": "didn't specify any cash control header so they could have made these things cachable for uh months maybe even a year",
    "start": "1932720",
    "end": "1939799"
  },
  {
    "text": "and they're not uh achieving that so it's a really lost opportunity Mozilla generally really",
    "start": "1939799",
    "end": "1946760"
  },
  {
    "text": "good um and this is a small page only 32 requests but it's their front page only",
    "start": "1946760",
    "end": "1952720"
  },
  {
    "text": "31% have a cash control header again like be explicit uh not too many have a short",
    "start": "1952720",
    "end": "1960639"
  },
  {
    "text": "expiration time most of them have a last modified the median uh last modified",
    "start": "1960639",
    "end": "1965760"
  },
  {
    "text": "time is 24 days 10% of that is only 2.4 so that's not a great euristic window if",
    "start": "1965760",
    "end": "1972159"
  },
  {
    "text": "they are if the median uh time between when they change is 24 days you could",
    "start": "1972159",
    "end": "1977399"
  },
  {
    "text": "specify a last a max age of a week or two and get better",
    "start": "1977399",
    "end": "1982840"
  },
  {
    "text": "caching sendes is speaking today makito uh 70 requests so you know it's kind of",
    "start": "1982840",
    "end": "1989760"
  },
  {
    "text": "in there it's a median you know average page 94% have cash control that's really",
    "start": "1989760",
    "end": "1994840"
  },
  {
    "text": "good but 59% of them expire in less than a day like I find it hard to believe",
    "start": "1994840",
    "end": "2000760"
  },
  {
    "text": "that they're changing so much and in fact if we skip down unfortunately only 69% of them have a last modified but",
    "start": "2000760",
    "end": "2008200"
  },
  {
    "text": "they have a pretty long last modified interval and so it really seems again that this is a Lo lost opportunity",
    "start": "2008200",
    "end": "2015200"
  },
  {
    "text": "things aren't changing that much in reality when we look at the last modified of the resources on this page",
    "start": "2015200",
    "end": "2022360"
  },
  {
    "text": "specify a max age header um for more of them catch.com 52 requests on a very",
    "start": "2022360",
    "end": "2030799"
  },
  {
    "text": "heavy page only 19% have a cash control header and a lot of them expire in less",
    "start": "2030799",
    "end": "2036000"
  },
  {
    "text": "than a day only 69 % have a last modified so we really don't even know what the we're not giving a lot of Clues",
    "start": "2036000",
    "end": "2042240"
  },
  {
    "text": "to the htic uh heuristic uh uh algorithms and again there's a lot of",
    "start": "2042240",
    "end": "2048679"
  },
  {
    "text": "opportunity uh resources aren't changing that much we could have specified a max age here and Intel I think is the last",
    "start": "2048679",
    "end": "2056520"
  },
  {
    "text": "speaker side I'm looking at 90 uh resources um only 66% have a cash",
    "start": "2056520",
    "end": "2063398"
  },
  {
    "text": "control header 84% of them that specify a max age expire in less than a day um a",
    "start": "2063399",
    "end": "2070638"
  },
  {
    "text": "large percentage of the resources have last modified but there's a it seems like there is a lot of churn in the",
    "start": "2070639",
    "end": "2076560"
  },
  {
    "text": "resources in this website so they should be more explicit about what's cashable and what's not certainly you're not",
    "start": "2076560",
    "end": "2082760"
  },
  {
    "text": "going to get a large turistic uh interval here 10% of 12 is only one day",
    "start": "2082760",
    "end": "2090079"
  },
  {
    "text": "but if uh if they're changing that on average every 12 days you could have specified a max age of About a Week",
    "start": "2090079",
    "end": "2097880"
  },
  {
    "text": "so these speaker sites thankfully weren't that bad um and",
    "start": "2097880",
    "end": "2105240"
  },
  {
    "text": "that's what we see we saw that before in the charts I showed the histogram with",
    "start": "2105240",
    "end": "2110720"
  },
  {
    "text": "the use of Max age we saw that we saw that um when we looked at",
    "start": "2110720",
    "end": "2118320"
  },
  {
    "text": "the top 1,000 they had better use of Max age than the top",
    "start": "2118320",
    "end": "2123480"
  },
  {
    "text": "300,000 um so that's typically what we see so I'm not surprised that speakers",
    "start": "2123480",
    "end": "2128599"
  },
  {
    "text": "from companies you know that are uh you know speaking here at a Dev conference that their sites are better configured",
    "start": "2128599",
    "end": "2135839"
  },
  {
    "text": "but we still saw these pretty bad statistics out there for the longtail of sites um so where do these bad apples",
    "start": "2135839",
    "end": "2143320"
  },
  {
    "text": "come from um if you do any Consulting work in the area of performance I",
    "start": "2143320",
    "end": "2149520"
  },
  {
    "text": "recommend that you look at media companies so we're going to do that really quick and we'll see that things",
    "start": "2149520",
    "end": "2155280"
  },
  {
    "text": "are worse out there than um um is reflected in the speaker websites so",
    "start": "2155280",
    "end": "2160680"
  },
  {
    "text": "here's uh boston.com uh 69% of cash control a lot of the resources expire",
    "start": "2160680",
    "end": "2167760"
  },
  {
    "text": "quickly um there's a fairly decent last modified interval so um we could have uh",
    "start": "2167760",
    "end": "2173720"
  },
  {
    "text": "had a higher less modified rate and more max age time.com uh hardly anything has a cash",
    "start": "2173720",
    "end": "2180520"
  },
  {
    "text": "control header things that do expire very quickly uh there's not a lot of churn in the resources so specifying a",
    "start": "2180520",
    "end": "2187079"
  },
  {
    "text": "Max AG would have been an easy win USA Today a large sight 127 requests almost",
    "start": "2187079",
    "end": "2193680"
  },
  {
    "text": "nothing has a max age a lot of quick expiring um and a fairly decent last",
    "start": "2193680",
    "end": "2200240"
  },
  {
    "text": "modified uh interval so they could have taken advantage of Max age Telegraph a",
    "start": "2200240",
    "end": "2205960"
  },
  {
    "start": "2205000",
    "end": "2205000"
  },
  {
    "text": "large site 179 requests almost nothing has a max age the ones that do expire very quickly um and again a huge",
    "start": "2205960",
    "end": "2213680"
  },
  {
    "text": "opportunity to make things cashable uh tmz.com um huge number of requests that's got to",
    "start": "2213680",
    "end": "2222200"
  },
  {
    "text": "be wrong there must be well maybe not uh and it's all red uh only half the things",
    "start": "2222200",
    "end": "2228640"
  },
  {
    "text": "have a max age uh the ones that do expire very quickly only 60% have a last",
    "start": "2228640",
    "end": "2233880"
  },
  {
    "text": "modified and the last modified time is pretty short so the heuristics aren't going to be that good so the takeaway",
    "start": "2233880",
    "end": "2241000"
  },
  {
    "text": "here is be explicit so I spent a lot of time",
    "start": "2241000",
    "end": "2246520"
  },
  {
    "text": "last night and this morning morning looking at these background searching flicker for these background photos and",
    "start": "2246520",
    "end": "2252640"
  },
  {
    "text": "searching for the word explicit didn't return what I",
    "start": "2252640",
    "end": "2257079"
  },
  {
    "text": "expected so I had to change my Search terms uh but you want to be",
    "start": "2257760",
    "end": "2262960"
  },
  {
    "text": "explicit always specify a cash control header if things can be cashable specify",
    "start": "2262960",
    "end": "2268800"
  },
  {
    "text": "a max age if you want to be a little conservative be a little conservative but specify something because most",
    "start": "2268800",
    "end": "2274359"
  },
  {
    "text": "caches are going to do some level of fistic caching if you don't specify anything it's taken out of your hands so",
    "start": "2274359",
    "end": "2280640"
  },
  {
    "text": "you're still going to be stung by stuff being stuck in the cash you just won't have any idea how long that's going to",
    "start": "2280640",
    "end": "2286079"
  },
  {
    "text": "happen and when the user is going to get an update so if things can be cachable specify a max age if you don't want them",
    "start": "2286079",
    "end": "2292319"
  },
  {
    "text": "to be cachable specify no cash does that all make sense okay so that's a very",
    "start": "2292319",
    "end": "2299119"
  },
  {
    "text": "easy takeaway for today um I wanted to touch on some other things that are kind",
    "start": "2299119",
    "end": "2305040"
  },
  {
    "text": "of outside our control or outside leas of this cash control header this is a study that Tenny toyer and I ran at",
    "start": "2305040",
    "end": "2311760"
  },
  {
    "text": "Yahoo uh in 2007 so it's been a while but it was a seminal study that still gets a lot of links to it where we found",
    "start": "2311760",
    "end": "2318920"
  },
  {
    "text": "that we ran this on various Yahoo sites and we found that about 20%",
    "start": "2318920",
    "end": "2324960"
  },
  {
    "text": "of I heard crickets about 20% of sites um of page",
    "start": "2324960",
    "end": "2333359"
  },
  {
    "text": "views the user has an empty cache we measured the US by empty cach cash what we mean is the Yahoo resources that had",
    "start": "2333359",
    "end": "2340520"
  },
  {
    "text": "a 10-year expiration window were not in the user's cache and we were able to",
    "start": "2340520",
    "end": "2345680"
  },
  {
    "text": "measure that by putting a um uh transparent image in the page that had long caching headers and detecting",
    "start": "2345680",
    "end": "2352319"
  },
  {
    "text": "whether that was requested or not and correlating it back to page views so we found that about 20% of page views were",
    "start": "2352319",
    "end": "2359040"
  },
  {
    "text": "done where the user did not have Yahoo resources in their cash and that's not",
    "start": "2359040",
    "end": "2364640"
  },
  {
    "text": "too bad that's maybe what we would have expected but when we translate that into unique users it turns out that of our",
    "start": "2364640",
    "end": "2371960"
  },
  {
    "text": "daily users about half of them came in at least once a day without Yahoo's",
    "start": "2371960",
    "end": "2377760"
  },
  {
    "text": "resources in their cash how could that be and why are these so different well",
    "start": "2377760",
    "end": "2383040"
  },
  {
    "text": "the answer is the the uh usage patterns of a site if the you typical number of",
    "start": "2383040",
    "end": "2389119"
  },
  {
    "text": "page views per session is five the user will come in the first time and have an empty cache but then for their next four",
    "start": "2389119",
    "end": "2396200"
  },
  {
    "text": "page views they'll have a prim cash so they would only register once when we look at it from the unique user",
    "start": "2396200",
    "end": "2401640"
  },
  {
    "text": "perspective so even though the number of page views the percentage is fairly low",
    "start": "2401640",
    "end": "2406920"
  },
  {
    "text": "for an empty cache users really anchor on a negative experience and so when",
    "start": "2406920",
    "end": "2412119"
  },
  {
    "text": "that first time they come in if they have an empty cash or at least if your resources aren't in their cash they're",
    "start": "2412119",
    "end": "2417560"
  },
  {
    "text": "going to have a slow pay flow time and that's going to give them a negative perception of your brand and your website so that's really unusual when we",
    "start": "2417560",
    "end": "2426440"
  },
  {
    "text": "when we have our the repeat patterns were very high we had a 10-year expiration window why is it that so many",
    "start": "2426440",
    "end": "2434000"
  },
  {
    "text": "of users coming back still did not have our resources in their cash we don't know the exact answer there are some",
    "start": "2434000",
    "end": "2440680"
  },
  {
    "text": "things um certainly that we can think of this was a great will Chan works at Google on Chrome and he wrote this about",
    "start": "2440680",
    "end": "2446960"
  },
  {
    "text": "six months ago uh about cash and he started looking at some of the stats and he found out that uh",
    "start": "2446960",
    "end": "2455480"
  },
  {
    "text": "approximately 70% of users do not have a full cach so take the inverse of that it",
    "start": "2455480",
    "end": "2461160"
  },
  {
    "text": "means about 30% of users using Chrome have a full cache the cash size varies",
    "start": "2461160",
    "end": "2466280"
  },
  {
    "text": "between about 150 and 320 megabytes depending on your free disc base for",
    "start": "2466280",
    "end": "2471359"
  },
  {
    "text": "those users who filled up their cash it only took uh 4 hours for them for the",
    "start": "2471359",
    "end": "2476880"
  },
  {
    "text": "median user to fill their cash only four hours of active browsing that's pretty",
    "start": "2476880",
    "end": "2482920"
  },
  {
    "text": "fast um and then this thing about where the cach gets cleared about 7% he found",
    "start": "2482920",
    "end": "2488880"
  },
  {
    "text": "of users explicitly clear their cash through Chrome settings which was maybe higher than I expected but this was a",
    "start": "2488880",
    "end": "2495599"
  },
  {
    "text": "real surprise I think to him as well and the Chrome team 19% of users once a week",
    "start": "2495599",
    "end": "2501200"
  },
  {
    "text": "experience some cash corruption that required clearing their cash so once a",
    "start": "2501200",
    "end": "2506520"
  },
  {
    "text": "week over 25% of users were having their cash cleared at least once a week so I",
    "start": "2506520",
    "end": "2512680"
  },
  {
    "text": "think that's one thing that's attributing to people visiting our sites and not having things in the cach that",
    "start": "2512680",
    "end": "2517920"
  },
  {
    "text": "we would have expected to be there here's another thing is cach sizes this is a study from",
    "start": "2517920",
    "end": "2523880"
  },
  {
    "text": "blaze.of aami Talking looking at mobile caches which are uh uh certainly much",
    "start": "2523880",
    "end": "2530720"
  },
  {
    "text": "smaller than desktop browsers but even desktop browsers with the amount of um",
    "start": "2530720",
    "end": "2535800"
  },
  {
    "text": "browsing that you do in them will fill up fairly quickly so caches are small so",
    "start": "2535800",
    "end": "2542000"
  },
  {
    "text": "website uh developers web developers are looking at Alternatives one is appcache",
    "start": "2542000",
    "end": "2547400"
  },
  {
    "text": "uh it helps with offline as well as uh having a longer cache um the nice thing about app cach and I'll talk about local",
    "start": "2547400",
    "end": "2554200"
  },
  {
    "text": "storage is you get cash that's dedicated to your website a certain amount of",
    "start": "2554200",
    "end": "2559280"
  },
  {
    "text": "space 5 Meg uh might be a typical amount to think of whereas the browser cache is",
    "start": "2559280",
    "end": "2565040"
  },
  {
    "text": "shared with all the other websites so it's possible so your resources are in contention for that space with all the",
    "start": "2565040",
    "end": "2571240"
  },
  {
    "text": "other websites that the user visits um so here's how it works you specify a manifest attribute with which gives the",
    "start": "2571240",
    "end": "2577640"
  },
  {
    "text": "file name for your manifest file that file has to start with a cache manifest header at the top we'll talk about the",
    "start": "2577640",
    "end": "2584839"
  },
  {
    "text": "comment in a minute um and you have these various sections cash is what can be saved in app cash Network are things",
    "start": "2584839",
    "end": "2591359"
  },
  {
    "text": "that should never be saved in app cash you should always pull them from the network fallback helps you in that offline mode if you're online hit",
    "start": "2591359",
    "end": "2599720"
  },
  {
    "text": "index.html if you're offline if you don't have network access fall back to this other uh website oh something I see",
    "start": "2599720",
    "end": "2606559"
  },
  {
    "text": "people taking not something I should have mentioned the slides are already up on my website steve.com and also on",
    "start": "2606559",
    "end": "2612200"
  },
  {
    "text": "SlideShare under my account which I think is saouter um and you have to at least for",
    "start": "2612200",
    "end": "2618119"
  },
  {
    "text": "now return a specific content type for all this to work so it's not too difficult but it turns out when you",
    "start": "2618119",
    "end": "2624319"
  },
  {
    "text": "actually try to get it working it is really difficult there are a lot of gotas um even if you don't list the HTML",
    "start": "2624319",
    "end": "2630920"
  },
  {
    "start": "2625000",
    "end": "2625000"
  },
  {
    "text": "document in that Network section any HTML document that uses the Manifest attribute is automatically Saed into",
    "start": "2630920",
    "end": "2637520"
  },
  {
    "text": "appcache so if you have something like a login form on the page but the user has logged in even though they have a valid",
    "start": "2637520",
    "end": "2644520"
  },
  {
    "text": "cookie they'll be reading that out of the uh cache and it will still have the login form in it so you have to rethink",
    "start": "2644520",
    "end": "2651079"
  },
  {
    "text": "the flow of your website which can be very challenging if anything in the cash 404s nothing is cash you have about five",
    "start": "2651079",
    "end": "2658200"
  },
  {
    "text": "Meg um that comment in there is uh that I talked about in the Manifest file if",
    "start": "2658200",
    "end": "2663960"
  },
  {
    "text": "you change a resource so suppose you have an image that's reference to the Manifest file and you update that image",
    "start": "2663960",
    "end": "2670559"
  },
  {
    "text": "on your website the uh app cache will never be updated unless you actually",
    "start": "2670559",
    "end": "2676880"
  },
  {
    "text": "modify the Manifest file because the first thing the browser does is it checks to see if the Manifest file has",
    "start": "2676880",
    "end": "2682880"
  },
  {
    "text": "changed if it hasn't changed it doesn't check any of the resources just to be efficient if you're on a a phone for",
    "start": "2682880",
    "end": "2688920"
  },
  {
    "text": "example you don't want it to in a conditional get requests on all of the uh manifest file resources so the way",
    "start": "2688920",
    "end": "2696079"
  },
  {
    "text": "that it um controls whether it does that check is by first checking the Manifest file itself and what this uh means is",
    "start": "2696079",
    "end": "2704480"
  },
  {
    "text": "that it's going to take two reloads for a user to get a updated resource now",
    "start": "2704480",
    "end": "2710280"
  },
  {
    "text": "that's kind of confusing and it tripped me up when I built my first appach app so let's walk through an example here so",
    "start": "2710280",
    "end": "2717200"
  },
  {
    "text": "suppose you go home you uh this afternoon you build a appcash app you push it uh and it has this green logo",
    "start": "2717200",
    "end": "2724240"
  },
  {
    "text": "GIF right and some user load your app um and uh when they load it the app cach is",
    "start": "2724240",
    "end": "2731079"
  },
  {
    "text": "empty so the browser reads everything um off the network it gets the Manifest file it goes through the Manifest file",
    "start": "2731079",
    "end": "2736839"
  },
  {
    "text": "it sees logo.gif listed it downloads this green logo and saves it to appcash and then renders the app to the user so",
    "start": "2736839",
    "end": "2745000"
  },
  {
    "text": "then you go home tonight uh the next night tomorrow night and you decide to change the logo to be orange and you",
    "start": "2745000",
    "end": "2750680"
  },
  {
    "text": "push that to your server so now you've got a new logo up there and you even",
    "start": "2750680",
    "end": "2755760"
  },
  {
    "text": "remember to modify the Manifest file somehow so now the next day the user",
    "start": "2755760",
    "end": "2760800"
  },
  {
    "text": "loads the app again but what's the browser do the whole point of appcache is to not touch the network to touch the",
    "start": "2760800",
    "end": "2767319"
  },
  {
    "text": "network as little as possible so what the browser does is it loads that HTML",
    "start": "2767319",
    "end": "2772400"
  },
  {
    "text": "document out of appcash that HTML document references logo.gif the browser looks and says oh I have logo.gif in the",
    "start": "2772400",
    "end": "2779559"
  },
  {
    "text": "appcash so I'm going and the one that's in there is the one that I last stored there is green so I'm going to use that",
    "start": "2779559",
    "end": "2785400"
  },
  {
    "text": "one and that's what the user sees it sees this green one that's pulled from the appcache even though the night",
    "start": "2785400",
    "end": "2792240"
  },
  {
    "text": "before you updated that logo the user is still going to get the one out of appcash but now what happens is the",
    "start": "2792240",
    "end": "2798640"
  },
  {
    "text": "browser checks to see if the Manifest file has changed it has so it checks all of the images and it sees that there's a",
    "start": "2798640",
    "end": "2805880"
  },
  {
    "text": "new logo and so it gets the orange logo and it saves it to cash but the user is already looking at the green logo and so",
    "start": "2805880",
    "end": "2812640"
  },
  {
    "text": "it's not going to be until the next time the user loads the app that this is all reped and the browser says oh here's the",
    "start": "2812640",
    "end": "2819319"
  },
  {
    "text": "HML document it references logo.gif I have that in my appcache let me pull it out of appcache and render it for the",
    "start": "2819319",
    "end": "2825599"
  },
  {
    "text": "user and the user sees your update so that's why it takes two reloads for a user to see any updated",
    "start": "2825599",
    "end": "2833160"
  },
  {
    "text": "resources so you can get around that by tracking this update ready event um but",
    "start": "2833319",
    "end": "2838760"
  },
  {
    "text": "it's more work that you have to do and you have to figure out what you're going to do in that case if it's something like the logo changed and they're the",
    "start": "2838760",
    "end": "2845079"
  },
  {
    "text": "exact same size and won't uh cause the page to flash you could just swap it out",
    "start": "2845079",
    "end": "2850119"
  },
  {
    "text": "if it's um like a JavaScript update or a CSF update that's not that critical or an image update maybe you do nothing if",
    "start": "2850119",
    "end": "2857440"
  },
  {
    "text": "it's like a Security JavaScript fix you might tell the user um we've updated",
    "start": "2857440",
    "end": "2862880"
  },
  {
    "text": "your ver your local version of our JavaScript and we're going to reload the app so that you get this security fixed",
    "start": "2862880",
    "end": "2869720"
  },
  {
    "text": "so you can decide what to do here but you have to do the heavy lifting local storage is really easy it's got a simple",
    "start": "2869720",
    "end": "2876520"
  },
  {
    "text": "AP Pi uh again it's about 5 Meg um one warning is that that we've gotten",
    "start": "2876520",
    "end": "2884200"
  },
  {
    "text": "from some browser vendors is it can be bad for performance because it's synchronous um but recently will Chan",
    "start": "2884200",
    "end": "2891319"
  },
  {
    "text": "the same guy ran this study where he found that even for the 95th percentile",
    "start": "2891319",
    "end": "2896839"
  },
  {
    "text": "it's only like 50 to 150 millisecond impact on load time so uh I think local",
    "start": "2896839",
    "end": "2902920"
  },
  {
    "text": "storage depending on how you're using it um could uh and not have a large impact",
    "start": "2902920",
    "end": "2908319"
  },
  {
    "start": "2903000",
    "end": "2903000"
  },
  {
    "text": "on performance and we're seeing folks like Google search on mobile and being on mobile use it to store JavaScript and",
    "start": "2908319",
    "end": "2914680"
  },
  {
    "text": "CSS I'm running out of time so I'm going to go over this pretty quickly um what they do the first time you load it is",
    "start": "2914680",
    "end": "2921400"
  },
  {
    "text": "they download a bunch of inline JavaScript and CSS they save that to local storage and they set a cookie for",
    "start": "2921400",
    "end": "2928480"
  },
  {
    "text": "each string or module that's saved the next time you get a search result the server looks at the cookies and doesn't",
    "start": "2928480",
    "end": "2934960"
  },
  {
    "text": "have to download that inline code again in and this reduces the size of the page from 110k to about 10K the one tricky",
    "start": "2934960",
    "end": "2943640"
  },
  {
    "text": "thing is what they're doing is they're reading these strings out of local storage and eval it and so if you have",
    "start": "2943640",
    "end": "2950240"
  },
  {
    "text": "um other thirdparty JavaScript on the page they also have access to local storage equal access to local storage so",
    "start": "2950240",
    "end": "2956799"
  },
  {
    "text": "if you're going to use this technique you'll want to wrap it around some sort of uh cryptography checkm uh algorithm",
    "start": "2956799",
    "end": "2963640"
  },
  {
    "text": "and there's a URL for a discussion on that topic um and the other thing so that's",
    "start": "2963640",
    "end": "2969440"
  },
  {
    "text": "something else that's uh that people can work on are other forms of web storage but the other thing that I think we're",
    "start": "2969440",
    "end": "2975200"
  },
  {
    "text": "going to see happen is smarter browsers um we're seeing tremendous Improvement in browser performance bigger caches uh",
    "start": "2975200",
    "end": "2983480"
  },
  {
    "text": "smarter purging I think is coming IE10 I think was the first browser to take M",
    "start": "2983480",
    "end": "2988559"
  },
  {
    "text": "type in consideration I'd rather have you Purge images than Purge JavaScript because JavaScript is more important um",
    "start": "2988559",
    "end": "2995280"
  },
  {
    "text": "to download quickly uh and prioritizing websites here's an example of what I mean by that um in IE",
    "start": "2995280",
    "end": "3003839"
  },
  {
    "start": "3001000",
    "end": "3001000"
  },
  {
    "text": "9 or 10 I forget where they added this feature for preserve uh favorites",
    "start": "3003839",
    "end": "3009680"
  },
  {
    "text": "website data so anything that's in your favorites or bookmarks when you clear your cash you can say yeah but those are",
    "start": "3009680",
    "end": "3016200"
  },
  {
    "text": "my favorites don't clear it now I don't necessarily like the UI here I have thousands of bookmarked websites they're",
    "start": "3016200",
    "end": "3022720"
  },
  {
    "text": "not all my favorites I'd rather have at the browser learn my favorites it already knows the top 10 sites I visit",
    "start": "3022720",
    "end": "3029200"
  },
  {
    "text": "all the time those are in the start uh page right so automatically give those preferred caching and I think we're",
    "start": "3029200",
    "end": "3036319"
  },
  {
    "text": "going to see this oh here's another example in Chrome where there's a lot of uh DNS resolution and TCP connection",
    "start": "3036319",
    "end": "3043520"
  },
  {
    "text": "prec connects that are done depending on what you've done in the past for example that knows your top 10 most visited",
    "start": "3043520",
    "end": "3049760"
  },
  {
    "text": "sites when you start Chrome it resolves those 10 domain names automatically so",
    "start": "3049760",
    "end": "3054960"
  },
  {
    "text": "that they're ready to go and other uh uh preconnect Behavior like that and I",
    "start": "3054960",
    "end": "3060720"
  },
  {
    "text": "think that's where we're going no one knows um how you use the web better than",
    "start": "3060720",
    "end": "3065839"
  },
  {
    "text": "your browser it knows what you've done in the past it knows the context that you're in now and I think we're going to",
    "start": "3065839",
    "end": "3071480"
  },
  {
    "text": "see things like we saw in Chrome with DNS and TCP preconnect and we're going to see that move into the world of",
    "start": "3071480",
    "end": "3076720"
  },
  {
    "text": "prefetching resources as well I know for me every morning I sit down and I load I",
    "start": "3076720",
    "end": "3083079"
  },
  {
    "text": "have a script that loads 30 websites and then I go get my coffee and I come back to cuz I hate watching websites take a",
    "start": "3083079",
    "end": "3090400"
  },
  {
    "text": "long time to load um and the browser will know in the future the browser will",
    "start": "3090400",
    "end": "3095760"
  },
  {
    "text": "know that behavior and it will know at that time in the morning Monday through Friday it should start pre- connecting",
    "start": "3095760",
    "end": "3101839"
  },
  {
    "text": "and pre-etching resources that were on those websites yesterday that had a long Cash Time make sure that they're in my",
    "start": "3101839",
    "end": "3108359"
  },
  {
    "text": "cash and maybe even start reading them into memory doing some jit on them so uh",
    "start": "3108359",
    "end": "3114040"
  },
  {
    "text": "I think we still have a long uh uh a large number of optimizations for",
    "start": "3114040",
    "end": "3119119"
  },
  {
    "text": "performance that we're going to get from browsers so the takeaways that was actually pretty good this is a brand new",
    "start": "3119119",
    "end": "3125960"
  },
  {
    "text": "talk uh I timed it pretty well get the uh need",
    "start": "3125960",
    "end": "3131000"
  },
  {
    "text": "cash so takeaways uh gather some stats like um if you read that blog post on the study",
    "start": "3131000",
    "end": "3137839"
  },
  {
    "text": "Tenny and I did at Yahoo it explains how we did it with the transparent pixel run",
    "start": "3137839",
    "end": "3142960"
  },
  {
    "text": "it on your site how many of you your users are benefiting from cash or aren't",
    "start": "3142960",
    "end": "3148440"
  },
  {
    "text": "be explicit about how what your caching policy is for every",
    "start": "3148440",
    "end": "3153920"
  },
  {
    "text": "resource consider augmenting uh what you're caching your caching uh performance by looking at",
    "start": "3153920",
    "end": "3161280"
  },
  {
    "text": "local storage and app cash and Lobby browser vendors to implement smarter algorithms bigger",
    "start": "3161280",
    "end": "3167960"
  },
  {
    "text": "caches and more personalized caching for the user I just wanted to mention uh I got",
    "start": "3167960",
    "end": "3174200"
  },
  {
    "text": "almost all the data for those Char and stuff are the HTTP archive which is a uh",
    "start": "3174200",
    "end": "3179400"
  },
  {
    "text": "part of the internet archive project um it's a project I'm running so check that out and that's it thank you very much",
    "start": "3179400",
    "end": "3188920"
  },
  {
    "text": "[Music]",
    "start": "3191510",
    "end": "3199849"
  }
]