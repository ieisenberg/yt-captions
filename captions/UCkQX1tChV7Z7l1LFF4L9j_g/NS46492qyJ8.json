[
  {
    "text": "[Music]",
    "start": "340",
    "end": "7919"
  },
  {
    "text": "cool excellent um so let's get started um so U let me tell you a little bit",
    "start": "7919",
    "end": "13719"
  },
  {
    "text": "first of all let me tell you a little bit about my my uh uh the agenda for today so the plan is to talk briefly",
    "start": "13719",
    "end": "20359"
  },
  {
    "text": "about Android stack we're just going to kind of cover the basics seems like most of you are familiar with that um already",
    "start": "20359",
    "end": "26880"
  },
  {
    "text": "then we're going to talk about uh security ESS Essentials part of that we're going to talk about the architecture so basically how is Android",
    "start": "26880",
    "end": "34480"
  },
  {
    "text": "architected Uh u in terms of the security we're going to talk about application signing we're going to talk",
    "start": "34480",
    "end": "40520"
  },
  {
    "text": "about uids how they work we're going to discuss file access multiple user",
    "start": "40520",
    "end": "45680"
  },
  {
    "text": "support that was added in 4.2 and we're going to talk about permissions and as part of that I'm going to we're going to",
    "start": "45680",
    "end": "51199"
  },
  {
    "text": "do a little lab on um adding permissions to an existing application so you kind of have kind of you know firstand",
    "start": "51199",
    "end": "57359"
  },
  {
    "text": "knowledge of how that works um afterwards we're going to talk about the advanced security uh so as part of that",
    "start": "57359",
    "end": "64080"
  },
  {
    "text": "we're going to talk about the encryption both um basically application Level encryption as well as the whole dis",
    "start": "64080",
    "end": "70080"
  },
  {
    "text": "encryption we're going to talk about tring and issues that come with that then we're going to talk about device",
    "start": "70080",
    "end": "75240"
  },
  {
    "text": "Administration malware we're going to mention SC Linux and we're going to discuss some other concerns so that's",
    "start": "75240",
    "end": "81640"
  },
  {
    "text": "basically uh the the plan for today I believe we have just under two hours if",
    "start": "81640",
    "end": "86960"
  },
  {
    "text": "I'm correct um and we may or may not do a break uh depending on how um how how",
    "start": "86960",
    "end": "93360"
  },
  {
    "text": "we go um so just really briefly uh about myself um so my name is Marco garanta uh",
    "start": "93360",
    "end": "100520"
  },
  {
    "text": "my background is in Java um I've been doing Java since before it was Java uh and I've been doing a lot of Android uh",
    "start": "100520",
    "end": "107759"
  },
  {
    "text": "from the GetGo so from early days on Android um when Android came out and in the beginning I was mostly focused on",
    "start": "107759",
    "end": "114600"
  },
  {
    "text": "app development um and I developed a course called Android boot camp as part of that course um I basically traveled",
    "start": "114600",
    "end": "122240"
  },
  {
    "text": "all over all over the world training developers on how to build apps uh and",
    "start": "122240",
    "end": "127360"
  },
  {
    "text": "that was a couple of years ago um I bottled that course into a book called learning Android that's been published",
    "start": "127360",
    "end": "133440"
  },
  {
    "text": "in Chinese English German couple other languages uh and it was one of the top",
    "start": "133440",
    "end": "140000"
  },
  {
    "text": "10 best sellers I haven't checked lately um So lately what I've been doing is mostly focused on Android internal so",
    "start": "140000",
    "end": "146840"
  },
  {
    "text": "basically what happens under the hood how how how do things really work uh inside of Android so that's been most of",
    "start": "146840",
    "end": "153040"
  },
  {
    "text": "my recent uh sort of focus um I frequently speak at conferences uh this is my I believe third time this is the",
    "start": "153040",
    "end": "159800"
  },
  {
    "text": "third conference third Android Builder Summit so third time here um and I frequently speak at osone and Devon and",
    "start": "159800",
    "end": "167760"
  },
  {
    "text": "similar U so that's a little bit about me so um you guys are probably already familiar with this stack you've seen a",
    "start": "167760",
    "end": "175040"
  },
  {
    "text": "picture like this before um let me just resize this so we can fit on this small SC screen so basically as you guys know",
    "start": "175040",
    "end": "182040"
  },
  {
    "text": "Android is based on Linux kernel on top of that we have the native layer uh in my pictures green roughly represents",
    "start": "182040",
    "end": "188480"
  },
  {
    "text": "cc++ blue roughly represents Java but it's not always like that the bonders",
    "start": "188480",
    "end": "193760"
  },
  {
    "text": "are not uh nice and perfect like we have in the picture um so basically above uh",
    "start": "193760",
    "end": "199760"
  },
  {
    "text": "the native layer we have the application framework and then finally we have the apps so each layer has its own security",
    "start": "199760",
    "end": "206640"
  },
  {
    "text": "concerns so we're going to uh cover those as we keep on going so uh the basic premise of the",
    "start": "206640",
    "end": "216519"
  },
  {
    "text": "architecture in Android is that basically apps cannot talk to one",
    "start": "216519",
    "end": "221760"
  },
  {
    "text": "another so basically each app is uh isolated and this isolation happens uh",
    "start": "221760",
    "end": "227640"
  },
  {
    "text": "by the kernel so essentially uh what I have in this picture is um a set of applications we draw them as um as as",
    "start": "227640",
    "end": "236239"
  },
  {
    "text": "these vertical boxes so basically each vertical box represents a process um",
    "start": "236239",
    "end": "242400"
  },
  {
    "text": "and if you kind of consider this over time um so if this is a boot boot time",
    "start": "242400",
    "end": "248680"
  },
  {
    "text": "so this would be time zero so basically processes get created this way so",
    "start": "248680",
    "end": "254159"
  },
  {
    "text": "initially we have the kernel that starts so kernel as part of that launches um a",
    "start": "254159",
    "end": "259959"
  },
  {
    "text": "few demons uh that that are needed so it VA D netd install d uh Etc so those are",
    "start": "259959",
    "end": "267120"
  },
  {
    "text": "basically your native cc++ services or D um after that we have the service",
    "start": "267120",
    "end": "273160"
  },
  {
    "text": "manager uh that's basically the naming Discovery uh service for all the other system services that starts next after",
    "start": "273160",
    "end": "281000"
  },
  {
    "text": "that we we have zot which is the uh the the mother of all Android apps it's",
    "start": "281000",
    "end": "286400"
  },
  {
    "text": "basically the initial app that gets spawn whenever you want to start any other Android application so that gets",
    "start": "286400",
    "end": "293039"
  },
  {
    "text": "started that initializes dvic initializes all the libraries that need to be loaded into dvic um and so on and",
    "start": "293039",
    "end": "299840"
  },
  {
    "text": "finally we have system server that starts which basically boots up uh all",
    "start": "299840",
    "end": "304880"
  },
  {
    "text": "all of those 60 70 different services so everything from location to Wi-Fi to Bluetooth to networking to audio um to",
    "start": "304880",
    "end": "312880"
  },
  {
    "text": "vibrator NFC etc etc so all the services basically um get started under this",
    "start": "312880",
    "end": "318600"
  },
  {
    "text": "umbrella of the system server which is basically uh controlling U their their",
    "start": "318600",
    "end": "324680"
  },
  {
    "text": "the access to them um once we have all that started um at at about this line in",
    "start": "324680",
    "end": "331520"
  },
  {
    "text": "the in the timeline uh we say the boot is completed so that's basically when the broadcast boot completed gets sent",
    "start": "331520",
    "end": "337280"
  },
  {
    "text": "out after that the apps start um so basically we have the home screen technically home screen starts before",
    "start": "337280",
    "end": "343680"
  },
  {
    "text": "that line but uh it's not on the picture but basically we have Android applications start after that the point",
    "start": "343680",
    "end": "350840"
  },
  {
    "text": "that we wanted to uh kind of uh clear with this picture is that um the apps cannot uh talk to anybody else right so",
    "start": "350840",
    "end": "359400"
  },
  {
    "text": "basically basically an application like app one is not allowed to talk to another app is not allowed to talk to a",
    "start": "359400",
    "end": "364680"
  },
  {
    "text": "system server is not allowed to talk to zygote uh a service manager nor any of The Damons or kernel directly so how",
    "start": "364680",
    "end": "372520"
  },
  {
    "text": "does that work then so Android is basically a privilege based operating systems operating systems which",
    "start": "372520",
    "end": "378319"
  },
  {
    "text": "basically means that each app runs in its own process and if an app wants to",
    "start": "378319",
    "end": "383400"
  },
  {
    "text": "do something it needs to have the permission to do that the permission to do anything in Android is is is uh",
    "start": "383400",
    "end": "390080"
  },
  {
    "text": "ultimately handled by the kernel itself so the kernel basically checks uh who can do what so in other words kernel",
    "start": "390080",
    "end": "396639"
  },
  {
    "text": "does this isolation between various processes so by default an app is not",
    "start": "396639",
    "end": "401919"
  },
  {
    "text": "allowed to do anything that can adversely affect um the user other apps or the system itself so so in other",
    "start": "401919",
    "end": "408880"
  },
  {
    "text": "words if it's about reading personal data uh that affects the user it's it's a privacy issue if it's uh if it's U",
    "start": "408880",
    "end": "416840"
  },
  {
    "text": "reading U for example accessing um internet it can cost user money so so",
    "start": "416840",
    "end": "422319"
  },
  {
    "text": "that's a you know cost money issue uh and if it's for example keeping the device alive like awake keeping the",
    "start": "422319",
    "end": "429080"
  },
  {
    "text": "screen on for instance that's adversely affecting other applications because it's wasting the battery so any of those",
    "start": "429080",
    "end": "435240"
  },
  {
    "text": "potentially dangerous things an app is by default not allowed to do um so um",
    "start": "435240",
    "end": "441639"
  },
  {
    "text": "we're going to discuss how permissions work um later on how that's actually implemented down at the low level um so",
    "start": "441639",
    "end": "447520"
  },
  {
    "text": "basically we have we have the uh the fine grain permission uh system uh in",
    "start": "447520",
    "end": "452560"
  },
  {
    "text": "Android uh they can the permissions can be enforced statically or they can be they can be um enforced dynamically they",
    "start": "452560",
    "end": "460160"
  },
  {
    "text": "can also be granted dynamically at runtime uh in certain cases so we'll we'll talk about",
    "start": "460160",
    "end": "465960"
  },
  {
    "text": "that um apps can talk to one another via certain me systems um um binder IPC is",
    "start": "465960",
    "end": "474479"
  },
  {
    "text": "one of them intents is a specialized version of binder IPC mechanism so that's another way uh to communicate as",
    "start": "474479",
    "end": "481199"
  },
  {
    "text": "well as the content providers they also offer another binder based mechanism to exchange uh the the the data the content",
    "start": "481199",
    "end": "488759"
  },
  {
    "text": "between applications U but again uh the the rights to access that are enforced",
    "start": "488759",
    "end": "494440"
  },
  {
    "text": "by uh by the kernel so the Linux kernel is ultimately the the sole mechanism uh",
    "start": "494440",
    "end": "500360"
  },
  {
    "text": "for ensuring this and this is sort of something that's very uh interesting about Android and Android security",
    "start": "500360",
    "end": "505960"
  },
  {
    "text": "design uh that's very unlike other um Java based applica operating system like",
    "start": "505960",
    "end": "512200"
  },
  {
    "text": "Blackberry for example so carel is the ultimate enforcer of the security so we say that all the",
    "start": "512200",
    "end": "519200"
  },
  {
    "text": "applications are created equal um there's a SL there's going to be a slight difference between those applications that are actually installed",
    "start": "519200",
    "end": "525000"
  },
  {
    "text": "on the system partition versus those that are installed in a user partition um but other than that the code itself",
    "start": "525000",
    "end": "530560"
  },
  {
    "text": "is different uh is the same so they can just have a different level of of security um depending on what they're",
    "start": "530560",
    "end": "536399"
  },
  {
    "text": "installed so we'll discuss that uh in a in a bit so I mentioned um application sandboxing",
    "start": "536399",
    "end": "543440"
  },
  {
    "text": "as as a concept so basically what we have is uh we have something like this",
    "start": "543440",
    "end": "548920"
  },
  {
    "text": "uh when it comes to an application so each app in Android is a Linux process right and each app is going to have its",
    "start": "548920",
    "end": "555800"
  },
  {
    "text": "own instance of deling on top of that each app is going to have any number of",
    "start": "555800",
    "end": "561240"
  },
  {
    "text": "activities Services providers or receivers right those are the basic building blocks of Android within that",
    "start": "561240",
    "end": "568279"
  },
  {
    "text": "application sandbo we're also going to have various data so we're going to have possibly databases",
    "start": "568279",
    "end": "574800"
  },
  {
    "text": "files resources permissions uh Native libraries etc etc so that's basically",
    "start": "574800",
    "end": "580160"
  },
  {
    "text": "all uh um contained within a single process so that's the the premise of the",
    "start": "580160",
    "end": "586160"
  },
  {
    "text": "sandboxing mechanism Android has applications are signed so uh an",
    "start": "586160",
    "end": "592600"
  },
  {
    "text": "application uh before it can actually be shipped to a device U is packaged into a",
    "start": "592600",
    "end": "598120"
  },
  {
    "text": "so-called APK file which stands for application package and it must be signed um so basically the point of the",
    "start": "598120",
    "end": "605880"
  },
  {
    "text": "signatures is really just to uh to to clarify who the owner is in other words",
    "start": "605880",
    "end": "610920"
  },
  {
    "text": "the owner of the application can prove that uh he or she is the owner of the application but it doesn't certify uh",
    "start": "610920",
    "end": "617560"
  },
  {
    "text": "the identity of the owner so there's no Providence basically around the actual",
    "start": "617560",
    "end": "623279"
  },
  {
    "text": "uh identity of the of of the of the creator of the app we just know that an application belongs to to somebody who",
    "start": "623279",
    "end": "629760"
  },
  {
    "text": "wants the signature um so it basically um it's usually used to create a trust",
    "start": "629760",
    "end": "634959"
  },
  {
    "text": "relationship between applications so applications with the same signature can establish a trust relationship among",
    "start": "634959",
    "end": "642959"
  },
  {
    "text": "themselves the assigning process is uh um is is using a very standard public",
    "start": "642959",
    "end": "648639"
  },
  {
    "text": "key uh cryptography uh the same technology that Java uses so in other words we just use the Java uh key tool",
    "start": "648639",
    "end": "655800"
  },
  {
    "text": "it's a standard key tool that all of you have as part of your jdk um and we basically um sign applications uh by",
    "start": "655800",
    "end": "663120"
  },
  {
    "text": "default all of you guys actually have a key that's located in a directory uh",
    "start": "663120",
    "end": "668240"
  },
  {
    "text": "that you have um under your home directory so on my on my system that",
    "start": "668240",
    "end": "673360"
  },
  {
    "text": "would be basically um cd. Android and in",
    "start": "673360",
    "end": "678760"
  },
  {
    "text": "this directory there's basically a debug uh key store so that's the key store that eclipse is going to create uh for",
    "start": "678760",
    "end": "686079"
  },
  {
    "text": "all of you and that's what we're using in the development uh process if you actually wanted to create your own uh",
    "start": "686079",
    "end": "691720"
  },
  {
    "text": "key store you can do that multiple ways you can uh use the key tool which as I mentioned is the standard key tool and",
    "start": "691720",
    "end": "698560"
  },
  {
    "text": "you can you can generate u a key that way or you can use Eclipse which has u a",
    "start": "698560",
    "end": "705079"
  },
  {
    "text": "built-in preferences Android built default key store uh system so you can basically uh create the key tool that",
    "start": "705079",
    "end": "711880"
  },
  {
    "text": "way um there is no when it comes to this key tool one thing that I already",
    "start": "711880",
    "end": "717600"
  },
  {
    "text": "mentioned uh there is no uh certified Authority in the world of Android so",
    "start": "717600",
    "end": "722920"
  },
  {
    "text": "this is also one place where Android sort of departs from other ecosystems right all the other mobile ecosystems",
    "start": "722920",
    "end": "729240"
  },
  {
    "text": "have sort of the the the the the certified Authority somebody you go to to actually verify the ownership of of",
    "start": "729240",
    "end": "736760"
  },
  {
    "text": "an app um in Android world you create a key you say who you are and uh nobody",
    "start": "736760",
    "end": "743199"
  },
  {
    "text": "really checks any of that uh Google has a specific policy but this is now just",
    "start": "743199",
    "end": "748839"
  },
  {
    "text": "Google in terms of the Google Play Store um and they ask you to to have a key that's valid for at least 25 years that",
    "start": "748839",
    "end": "755639"
  },
  {
    "text": "use the same key to uh encrypt all the uh all the applications that come from the same organization or the user and so",
    "start": "755639",
    "end": "762519"
  },
  {
    "text": "on but that's just specific to to a key store um so so basically um you can",
    "start": "762519",
    "end": "770120"
  },
  {
    "text": "verify a key for example you can use the key tool just to kind of uh check the the the authenticity of a key so if I",
    "start": "770120",
    "end": "777760"
  },
  {
    "text": "try to run the this against my debug key store um and I leave password blank I'm",
    "start": "777760",
    "end": "784800"
  },
  {
    "text": "going to find out a little bit about who this uh key belongs to so it's going to",
    "start": "784800",
    "end": "790040"
  },
  {
    "text": "tell you that this is just my debug key there's not really much in it uh but if you created your own key you would",
    "start": "790040",
    "end": "795760"
  },
  {
    "text": "basically be able to verify uh the the ownership that way um there's um there's also a uh jar",
    "start": "795760",
    "end": "804480"
  },
  {
    "text": "signer this is an alternative to using the standard key tool jar signer just uses the a jar that you can download and",
    "start": "804480",
    "end": "811440"
  },
  {
    "text": "um it basically command line Looks like that uh it's pretty straightforward um and you can use it to basically sign",
    "start": "811440",
    "end": "817360"
  },
  {
    "text": "your applications St once an application is signed um what",
    "start": "817360",
    "end": "823519"
  },
  {
    "text": "basically happens um it's zipped up into um into a zip file which is essentially",
    "start": "823519",
    "end": "830399"
  },
  {
    "text": "What APK is and as as as part of that we have uh the Manifest file which now",
    "start": "830399",
    "end": "836399"
  },
  {
    "text": "describes the signatures for every single app so in other words um the",
    "start": "836399",
    "end": "841680"
  },
  {
    "text": "files themselves are not modified what happens is there's just basically an",
    "start": "841680",
    "end": "847079"
  },
  {
    "text": "entry the Manifest file which specifies the uh the signature or the digest of of",
    "start": "847079",
    "end": "853279"
  },
  {
    "text": "of a specific key to kind of identify um its um its its size and and and content",
    "start": "853279",
    "end": "859600"
  },
  {
    "text": "at that point in time um so so this information is stored in a meta INF folder just to give you",
    "start": "859600",
    "end": "866320"
  },
  {
    "text": "give you an example um I have um created um Android Builder Summit um I built a",
    "start": "866320",
    "end": "874399"
  },
  {
    "text": "couple of apps here that I'm going to be showing you later on so if I just pick um a random app um secure note and",
    "start": "874399",
    "end": "882440"
  },
  {
    "text": "actually I haven't run it so let me just run it so the actually gets installed",
    "start": "882440",
    "end": "887759"
  },
  {
    "text": "um so if I run it and if I go into the bin folder the the eclipse uh eclipse is",
    "start": "887759",
    "end": "895040"
  },
  {
    "text": "automatically going to create secur node. APK file uh like I I said this is just a zip file so if I was going to",
    "start": "895040",
    "end": "902720"
  },
  {
    "text": "make a temporary directory um and just unzip",
    "start": "902720",
    "end": "911120"
  },
  {
    "text": "it um we basically see let me just show you like this we can see that the",
    "start": "911720",
    "end": "917040"
  },
  {
    "text": "content of that secure not APK file is really uh just the the the classes",
    "start": "917040",
    "end": "924120"
  },
  {
    "text": "themselves so the doic code that's zipped up the resources right the",
    "start": "924120",
    "end": "929160"
  },
  {
    "text": "Manifest file which we're going to talk about later which specifies all the components that this application is",
    "start": "929160",
    "end": "934720"
  },
  {
    "text": "going to use and permissions that it requires and in addition to that the only new thing is the Met INF so that's",
    "start": "934720",
    "end": "941480"
  },
  {
    "text": "the directory that basically contains the the signatures uh for each specific",
    "start": "941480",
    "end": "946920"
  },
  {
    "text": "file that's part of this application so those are the Sears and the Manifest so all this happen behind the",
    "start": "946920",
    "end": "952880"
  },
  {
    "text": "scenes by Eclipse um since we're in the development mode so um so that's a little bit about",
    "start": "952880",
    "end": "960480"
  },
  {
    "text": "the uh that um in as part of the final compression of the uh of the files",
    "start": "960480",
    "end": "968319"
  },
  {
    "text": "there's also something called zipline which basically just ensures that the files are nicely optimized in terms of",
    "start": "968319",
    "end": "974240"
  },
  {
    "text": "the memory allocation so that it can run faster when it's actually installed on on a device",
    "start": "974240",
    "end": "980720"
  },
  {
    "text": "itself so um so that's a little bit about the uh signage of applications now",
    "start": "980720",
    "end": "988959"
  },
  {
    "text": "now uh most of you probably that built uh Android ROM probably know of this but",
    "start": "988959",
    "end": "994759"
  },
  {
    "text": "as part of the buildt process the platform itself also has keys and as a matter of fact it doesn't have one key",
    "start": "994759",
    "end": "1001079"
  },
  {
    "text": "but it has three four different Keys um and this is a this is a pretty common um",
    "start": "1001079",
    "end": "1007639"
  },
  {
    "text": "mistake or um or something that people Overlook when they build drum they basically don't replace those keys",
    "start": "1007639",
    "end": "1014040"
  },
  {
    "text": "because AOSP uh doesn't force you to do it uh you already have the the ke that",
    "start": "1014040",
    "end": "1019160"
  },
  {
    "text": "are installed so um just to kind of show you that what I'm going to do is I'm going to uh mount my I believe I have it",
    "start": "1019160",
    "end": "1027880"
  },
  {
    "text": "actually already mounted so let me actually make sure that I have the right um",
    "start": "1027880",
    "end": "1033640"
  },
  {
    "text": "ASP so I'm going to mount this",
    "start": "1033640",
    "end": "1037959"
  },
  {
    "text": "one um source so um if I go to this directory",
    "start": "1040839",
    "end": "1047959"
  },
  {
    "text": "uh these are the keys that ship with ASP as you as you get them so often people",
    "start": "1047959",
    "end": "1053000"
  },
  {
    "text": "don't uh don't remove them um so they're based on the same principles it's the",
    "start": "1053000",
    "end": "1058720"
  },
  {
    "text": "same key tool none of it is different uh the only difference is that you actually need to generate four different keys and",
    "start": "1058720",
    "end": "1065160"
  },
  {
    "text": "they're used for four different things so basically platform is used for core Frameworks so it's going to sign about",
    "start": "1065160",
    "end": "1071799"
  },
  {
    "text": "half of the core uh Frameworks um shared is used for uh the applications",
    "start": "1071799",
    "end": "1077919"
  },
  {
    "text": "especially the applications that are shared uh by the systems like content providers and such so that's a shared",
    "start": "1077919",
    "end": "1083600"
  },
  {
    "text": "key then we have a media key which is used by DRM by Gallery couple applications uh like that and finally",
    "start": "1083600",
    "end": "1090200"
  },
  {
    "text": "the test key which is used by um by everyone else on the platform so your you know the pro the",
    "start": "1090200",
    "end": "1097480"
  },
  {
    "text": "proper instructions would be to blow away those keys on on in the on the r uh",
    "start": "1097480",
    "end": "1103440"
  },
  {
    "text": "in the in the source tree itself uh to create the signer to basically specify who the signer is going to be",
    "start": "1103440",
    "end": "1109360"
  },
  {
    "text": "and to basically then run the um the um platform make key tool which basically",
    "start": "1109360",
    "end": "1115080"
  },
  {
    "text": "ships with ASP but ultimately does the same thing thing as key tool and",
    "start": "1115080",
    "end": "1120120"
  },
  {
    "text": "generate the Four Keys for each platform so so that's this is uh this is how we",
    "start": "1120120",
    "end": "1126360"
  },
  {
    "text": "would basically uh generate the platform key and I would repeat the same step for",
    "start": "1126360",
    "end": "1131840"
  },
  {
    "text": "media share and test Keys yeah uh so so um basically when it comes to management",
    "start": "1131840",
    "end": "1139120"
  },
  {
    "text": "of the source code I would um I usually recommend keeping your changes to the source code outside of the the the main",
    "start": "1139120",
    "end": "1145600"
  },
  {
    "text": "tree right so basically keeping it in in SL vendor or something like that uh but",
    "start": "1145600",
    "end": "1150919"
  },
  {
    "text": "when it comes to Keys U because there's no real good reason why would they even have the default keys and they can just",
    "start": "1150919",
    "end": "1156480"
  },
  {
    "text": "lead to mistakes in the build um right I mean exactly I mean you can",
    "start": "1156480",
    "end": "1163919"
  },
  {
    "text": "do it that way the only problem is if you actually make a mistake and don't point to the right Keys then it's going to not tell you that it's using the",
    "start": "1163919",
    "end": "1169840"
  },
  {
    "text": "platform keys and it's going to find them and it's successfully going to use just the standard platform keys and and that leads to problems later on because",
    "start": "1169840",
    "end": "1176679"
  },
  {
    "text": "if you end up actually Distributing a ROM that you actually signed with the default Keys anyone can provide the update.zip for that ROM and can",
    "start": "1176679",
    "end": "1183559"
  },
  {
    "text": "basically do anything they want to it so that's why you know if you know what you're doing you can have a separate",
    "start": "1183559",
    "end": "1189679"
  },
  {
    "text": "copy or you can just blow them away and not even you know cool cool so that's uh",
    "start": "1189679",
    "end": "1195200"
  },
  {
    "text": "that's a little bit about the platform Keys um so let's talk a little bit about uh user",
    "start": "1195200",
    "end": "1201919"
  },
  {
    "text": "IDs so basically um Android has users but it doesn't use the users uh or uids",
    "start": "1201919",
    "end": "1208120"
  },
  {
    "text": "the same way Linux does um essentially they uh they are only logical users",
    "start": "1208120",
    "end": "1213919"
  },
  {
    "text": "they're not physical users in other words you cannot have a user Bob right um so what happens with Android uids is",
    "start": "1213919",
    "end": "1220200"
  },
  {
    "text": "they represent the actual U applications application uids um up until um ice",
    "start": "1220200",
    "end": "1226280"
  },
  {
    "text": "cream sandwich they were of the format apore XX where dxx was Bas basically a",
    "start": "1226280",
    "end": "1232240"
  },
  {
    "text": "number that was assigned to each application at install time so install d",
    "start": "1232240",
    "end": "1238919"
  },
  {
    "text": "uh does that and they actually map into the uh uids that start at 10,000 so",
    "start": "1238919",
    "end": "1244919"
  },
  {
    "text": "that's essentially what that looks like let me just kind of uh do the following I'm just going to do the um um ad shell",
    "start": "1244919",
    "end": "1253080"
  },
  {
    "text": "and run a PS on my emulator so uh so these are the users that that I'm talking about so essentially um the the",
    "start": "1253080",
    "end": "1261240"
  },
  {
    "text": "very first process that we have the inate process has uid one um and after",
    "start": "1261240",
    "end": "1266880"
  },
  {
    "text": "that we basically don't have anything super interesting up until zygo starts",
    "start": "1266880",
    "end": "1272240"
  },
  {
    "text": "uh which now in this case is the uh 795 so this is basically the first Android",
    "start": "1272240",
    "end": "1277720"
  },
  {
    "text": "app or the mother of all Android applications what's going to happen next is every single Android application that",
    "start": "1277720",
    "end": "1283600"
  },
  {
    "text": "ever starts is going to have that as the parent uh parent process and the",
    "start": "1283600",
    "end": "1289159"
  },
  {
    "text": "so-called underprivileged Android apps or the regular Android apps they're going to have the UI user ID that's off",
    "start": "1289159",
    "end": "1295559"
  },
  {
    "text": "format uh such as _ a and then something something uh now",
    "start": "1295559",
    "end": "1300880"
  },
  {
    "text": "this is a new format this format was introduced in Ice Cream Sandwich under the hood but it was really introduced in",
    "start": "1300880",
    "end": "1307520"
  },
  {
    "text": "Jelly Bean or exposed in Jelly Bean to the users uh as the as part of the multi",
    "start": "1307520",
    "end": "1312600"
  },
  {
    "text": "user support so we'll talk about that uh in a bit but basically these users now",
    "start": "1312600",
    "end": "1317760"
  },
  {
    "text": "represent the actual app uids and that's how kernel now enforces the security so",
    "start": "1317760",
    "end": "1323520"
  },
  {
    "text": "um so that's um so when I install a random application like for example in this case I just have the secure note",
    "start": "1323520",
    "end": "1329880"
  },
  {
    "text": "application that I just ran um it's got a u user of _ a59 so basically a59 maps",
    "start": "1329880",
    "end": "1338000"
  },
  {
    "text": "to the old app 59 uh user ID so uh so",
    "start": "1338000",
    "end": "1343480"
  },
  {
    "text": "basically these uh these mappings um represent um uh we we can actually see",
    "start": "1343480",
    "end": "1349480"
  },
  {
    "text": "these mappings um if we um if we just cat the system package list so for",
    "start": "1349480",
    "end": "1354840"
  },
  {
    "text": "example if I'm looking for a specific application um I can see what that application uh uid is so um so for",
    "start": "1354840",
    "end": "1363200"
  },
  {
    "text": "example if I want to know what browser is running as okay um so the standard",
    "start": "1363200",
    "end": "1369080"
  },
  {
    "text": "Android browser in this case is running under the uhu the uid of 104 and that",
    "start": "1369080",
    "end": "1377440"
  },
  {
    "text": "actually maps to use 0 underscore um A14 so that's going to be the uid so uh",
    "start": "1377440",
    "end": "1384840"
  },
  {
    "text": "which if I do ADB shell PS um you can probably see somewhere here if it's",
    "start": "1384840",
    "end": "1391240"
  },
  {
    "text": "actually running at all um and we don't currently have it but if I just start",
    "start": "1391240",
    "end": "1396799"
  },
  {
    "text": "the browser uh that should be easy enough to to um to start",
    "start": "1396799",
    "end": "1403960"
  },
  {
    "text": "um except that this emulator is not going to work this way because of the screen size when I connect it so just",
    "start": "1403960",
    "end": "1410679"
  },
  {
    "text": "start it restart it so we'll see that in in a little bit",
    "start": "1410679",
    "end": "1417320"
  },
  {
    "text": "um so so again that's how the mappings happen between the users and the actual",
    "start": "1417320",
    "end": "1422480"
  },
  {
    "text": "apps um at install time what happens is when you download an application that application gets stored in a in a in a",
    "start": "1422480",
    "end": "1429760"
  },
  {
    "text": "quarantine space it goes into a temporary folder um and that point gets analyzed by you uh install demon and so",
    "start": "1429760",
    "end": "1437960"
  },
  {
    "text": "basically it looks up at the application analyzes its manifest file and at that time um once the user actually grants",
    "start": "1437960",
    "end": "1444000"
  },
  {
    "text": "the permissions which we'll talk about later on to to that application install D is the one that actually assigns it",
    "start": "1444000",
    "end": "1450080"
  },
  {
    "text": "the uh the um uh uid at that time and installs it so we'll see that um in a",
    "start": "1450080",
    "end": "1457159"
  },
  {
    "text": "bit so do I have this started I do so if I just launch for example",
    "start": "1457159",
    "end": "1464960"
  },
  {
    "text": "browser we should be able to",
    "start": "1464960",
    "end": "1470000"
  },
  {
    "text": "see the browser is indeed running under A14 uh user so so that's the browser",
    "start": "1470000",
    "end": "1476880"
  },
  {
    "text": "right there again this this uh this is not going to change for the life of this",
    "start": "1476880",
    "end": "1482480"
  },
  {
    "text": "application on this device the file that manages all this is",
    "start": "1482480",
    "end": "1487799"
  },
  {
    "text": "in the data system package list so if I C that on this device you notice that",
    "start": "1487799",
    "end": "1495039"
  },
  {
    "text": "every single application that was ever installed is basically uh given the package name so this is going to be the",
    "start": "1495039",
    "end": "1501720"
  },
  {
    "text": "unique ID of that the unique name of that application on this device so that's how the the application is signed",
    "start": "1501720",
    "end": "1508480"
  },
  {
    "text": "that's how it's known uh this is going to be its uid which as we said maps to",
    "start": "1508480",
    "end": "1514440"
  },
  {
    "text": "on on a multi-user on a post Ice Cream Sandwich devices this maps to uer and",
    "start": "1514440",
    "end": "1520120"
  },
  {
    "text": "then a48 and what we have here is we basically have the uh the uh uh what",
    "start": "1520120",
    "end": "1527559"
  },
  {
    "text": "this application is uh using as its private data storage so we'll talk about",
    "start": "1527559",
    "end": "1532679"
  },
  {
    "text": "that when we talk about the file system access right um so that's briefly how",
    "start": "1532679",
    "end": "1538120"
  },
  {
    "text": "that how that gets installed and how the system keeps track of that so the users",
    "start": "1538120",
    "end": "1543200"
  },
  {
    "text": "uh in Android are quite different than the users in Linux but underneath they're leveraging the Linux uids and",
    "start": "1543200",
    "end": "1550000"
  },
  {
    "text": "that's how the kernel is actually enforcing the the the security ultimately so um so we that's we",
    "start": "1550000",
    "end": "1557600"
  },
  {
    "text": "basically saw the things um it is possible to have multiple applications",
    "start": "1557600",
    "end": "1562880"
  },
  {
    "text": "run under the same user um and this is um often done when you sort of have like",
    "start": "1562880",
    "end": "1569279"
  },
  {
    "text": "a Federation of applications so for example if you're developing uh extensions to the framework or you just",
    "start": "1569279",
    "end": "1575559"
  },
  {
    "text": "have a system where you actually have multiple apps and those applications need to communicate what you can do is",
    "start": "1575559",
    "end": "1580760"
  },
  {
    "text": "you can have them run uh and share the same uid uh when they share the same uid",
    "start": "1580760",
    "end": "1585840"
  },
  {
    "text": "they ultimately are considered basically same application using having the same",
    "start": "1585840",
    "end": "1590919"
  },
  {
    "text": "access rights to the file system permissions that sort of thing but for them to actually be able to share uids",
    "start": "1590919",
    "end": "1598159"
  },
  {
    "text": "they must be signed with the same key so this is only possible when they're signed with the same key so that that's how that's what the key enforcement",
    "start": "1598159",
    "end": "1604919"
  },
  {
    "text": "again uh comes comes in canand so ultimately what we're doing in this case is we're defining that application runs",
    "start": "1604919",
    "end": "1611279"
  },
  {
    "text": "as a specific process so if you don't specify that application is just going to run on the its pre-assigned uh",
    "start": "1611279",
    "end": "1617240"
  },
  {
    "text": "process so um so that's uh this is the Manifest file um and we're using the",
    "start": "1617240",
    "end": "1623120"
  },
  {
    "text": "shared uh user ID um uh we're using the shared user user ID uh property of",
    "start": "1623120",
    "end": "1631720"
  },
  {
    "text": "manifest so we briefly touched uh the uh the file system so just really briefly",
    "start": "1631720",
    "end": "1637679"
  },
  {
    "text": "uh let me kind of uh give you a quick overview of of the file system on a typical device",
    "start": "1637679",
    "end": "1643720"
  },
  {
    "text": "so on a from a secureity standpoint so basically on a typical Android device um",
    "start": "1643720",
    "end": "1649880"
  },
  {
    "text": "we have a file system uh there are a couple of partitions that are kind of interesting uh to us system partition is",
    "start": "1649880",
    "end": "1656600"
  },
  {
    "text": "one of them this is the operating system itself uh so that's essentially the ROM",
    "start": "1656600",
    "end": "1661640"
  },
  {
    "text": "this is the partition that's about two 300 Megs when it's all said and done uh the what's important about this",
    "start": "1661640",
    "end": "1667360"
  },
  {
    "text": "partition is that it's mounted read only so basically an app developer or a user",
    "start": "1667360",
    "end": "1673000"
  },
  {
    "text": "in theory doesn't have any access to this partition uh so I'm assuming a non-rooted device uh because it's rooted",
    "start": "1673000",
    "end": "1678600"
  },
  {
    "text": "all hell goes loose basically uh none of this matters but the RO rooted device um",
    "start": "1678600",
    "end": "1683919"
  },
  {
    "text": "there's basically no access to user or apps to this partition what that ultimately means is that this partition",
    "start": "1683919",
    "end": "1690000"
  },
  {
    "text": "is uh doesn't contain any user data so in other words from security standpoint we don't really care too much about",
    "start": "1690000",
    "end": "1696519"
  },
  {
    "text": "backing it up or encrypting user data on it because there shouldn't be any user data to begin with right so so that's",
    "start": "1696519",
    "end": "1704200"
  },
  {
    "text": "basically the the the system partition the other one that's very very much of interest to us is the data partition uh",
    "start": "1704200",
    "end": "1711519"
  },
  {
    "text": "this is the user data uh Mount point so basically this is a read write partition",
    "start": "1711519",
    "end": "1718000"
  },
  {
    "text": "uh what we have on it is we basically have all the downloaded apps and we have the data not just for the downloaded",
    "start": "1718000",
    "end": "1724519"
  },
  {
    "text": "apps but for all the apps in general so basically all the applications are going to store their data there so the user",
    "start": "1724519",
    "end": "1730279"
  },
  {
    "text": "downloaded apps are going to go into uh app uh data app folder so each",
    "start": "1730279",
    "end": "1735320"
  },
  {
    "text": "application is going to be in here so these are the APK files that came from the internet uh you may notice some o",
    "start": "1735320",
    "end": "1742159"
  },
  {
    "text": "odex files those are the optimized Dex files which basically uh got extracted from the often extracted from the APK",
    "start": "1742159",
    "end": "1749279"
  },
  {
    "text": "file optimized for given platform and uh then stored uh stored the such as odex",
    "start": "1749279",
    "end": "1755000"
  },
  {
    "text": "files so these are the user downloaded applications that we can uninstall that we can upgrade Etc um",
    "start": "1755000",
    "end": "1763399"
  },
  {
    "text": "the data for all the applications lives in the data data folder so from a app",
    "start": "1763399",
    "end": "1770000"
  },
  {
    "text": "developer or user standpoint this is the most important place because each application is going to keep keep its",
    "start": "1770000",
    "end": "1777480"
  },
  {
    "text": "data uh in in this folder uh and this is true for both system and uh and uh user",
    "start": "1777480",
    "end": "1784080"
  },
  {
    "text": "downloaded the applications um so if I for example take a look at um a random application uh so I'm going",
    "start": "1784080",
    "end": "1792559"
  },
  {
    "text": "to um CD into Data data um and I'm going to CD to Maracana let's see Marana",
    "start": "1792559",
    "end": "1802880"
  },
  {
    "text": "Android yamba for example um I have an application what's",
    "start": "1802880",
    "end": "1809720"
  },
  {
    "text": "interesting um um so I'm in in this folder uh what's interesting about this folder is that",
    "start": "1809720",
    "end": "1816360"
  },
  {
    "text": "um uh is that um it is um is that it's basically owned by",
    "start": "1816360",
    "end": "1825080"
  },
  {
    "text": "the uh that user so so we have the uer a54 so that's the app that was assigned",
    "start": "1825080",
    "end": "1831919"
  },
  {
    "text": "the U user ID that was assigned to this application so both user and group on this directory are belong to that",
    "start": "1831919",
    "end": "1839200"
  },
  {
    "text": "particular application so Al so as you can see for all the applications this is the case so we have basically sandbox uh",
    "start": "1839200",
    "end": "1847679"
  },
  {
    "text": "on the pile system uh they're unreadable to anyone else other than the user in group and the user in group belong to",
    "start": "1847679",
    "end": "1854600"
  },
  {
    "text": "that particular application so this is the how the sandboxing of the actual file system uh is managed on per",
    "start": "1854600",
    "end": "1861000"
  },
  {
    "text": "application uh basis um so so that's a little bit about",
    "start": "1861000",
    "end": "1866960"
  },
  {
    "text": "um the file system in general we also have the um um other than user and",
    "start": "1866960",
    "end": "1872200"
  },
  {
    "text": "system partition we also have the SD card partition which in this case is the mount SD card and uh SD card partition",
    "start": "1872200",
    "end": "1880200"
  },
  {
    "text": "used to be uh Free for All Storage so you actually didn't even require permissions to read nor write to it up",
    "start": "1880200",
    "end": "1886760"
  },
  {
    "text": "until uh I want to say say 1.5 uh then they introduced the the write permissions so basically now it's",
    "start": "1886760",
    "end": "1892880"
  },
  {
    "text": "potentially dangerous to write to it so you can read from it but if you want to write you need to ask user for for",
    "start": "1892880",
    "end": "1899080"
  },
  {
    "text": "access to that um so as such it's not really um all that managed by the system they're getting a better about it we'll",
    "start": "1899080",
    "end": "1905840"
  },
  {
    "text": "talk talk about the obb uh section later on uh but that's the the SD card SD card",
    "start": "1905840",
    "end": "1911440"
  },
  {
    "text": "is mentioned by VD uh volum demon so we'll talk about that in a bit as well",
    "start": "1911440",
    "end": "1917440"
  },
  {
    "text": "so um so the so this so that's are the partitions that we talked about um so",
    "start": "1917440",
    "end": "1924639"
  },
  {
    "text": "there's also slash which is used for transient data browser cache Etc um so",
    "start": "1924639",
    "end": "1931159"
  },
  {
    "text": "these are the partitions that we just discussed um you can you can use the uh",
    "start": "1931159",
    "end": "1936519"
  },
  {
    "text": "PM package manager to find out the specific partition uh location of the",
    "start": "1936519",
    "end": "1942720"
  },
  {
    "text": "sandbox for a particular application so for example if I do PM path I can ask",
    "start": "1942720",
    "end": "1948559"
  },
  {
    "text": "based on a package so I can find out where a specific uh app is installed or",
    "start": "1948559",
    "end": "1954880"
  },
  {
    "text": "what file this application is installed under because it doesn't have to be installed under a nice nice looking file",
    "start": "1954880",
    "end": "1961919"
  },
  {
    "text": "name like this it could be a totally arbitary file so for example if I did uh Maracana Android yamba um so we now see",
    "start": "1961919",
    "end": "1970840"
  },
  {
    "text": "that this file name is actually a totally different file name so it's das1 or something so there's no signif in",
    "start": "1970840",
    "end": "1977000"
  },
  {
    "text": "other words there's not lot of significance in the file name itself uh whereas the package name is",
    "start": "1977000",
    "end": "1983720"
  },
  {
    "text": "important um there u under each um uh",
    "start": "1983720",
    "end": "1989399"
  },
  {
    "text": "each sandbox application so under each application we basically have a um Li",
    "start": "1989399",
    "end": "1994519"
  },
  {
    "text": "directory as well so this directory is used to place uh possible shared",
    "start": "1994519",
    "end": "2000639"
  },
  {
    "text": "libraries so SOS the native libraries that you could Shipe with your application so if you look at that on",
    "start": "2000639",
    "end": "2006880"
  },
  {
    "text": "the the the SL data partition so if I go SL data dat and I pick some random",
    "start": "2006880",
    "end": "2012840"
  },
  {
    "text": "application like uh like gallery for example you'll notice that there's a left directory now um for almost all as",
    "start": "2012840",
    "end": "2021760"
  },
  {
    "text": "a matter of fact all system apps this directory is always going to be empty and for majority of the built-in applic",
    "start": "2021760",
    "end": "2027919"
  },
  {
    "text": "uh downloaded applications it's also going to be empty uh it's only for the applications that actually contain uh",
    "start": "2027919",
    "end": "2033720"
  },
  {
    "text": "some native libraries that there may be something in it so uh let me show you an",
    "start": "2033720",
    "end": "2039080"
  },
  {
    "text": "example of that that we have so let me just make this a little bigger so you can actually see um so I have um",
    "start": "2039080",
    "end": "2046880"
  },
  {
    "text": "something called native so this application contains a library so this",
    "start": "2046880",
    "end": "2052480"
  },
  {
    "text": "is a native Library uh that's plays there so in other words on uh so in",
    "start": "2052480",
    "end": "2057520"
  },
  {
    "text": "other words there's a li folder that's part of the LD Library path for each individual application and in most cases",
    "start": "2057520",
    "end": "2064638"
  },
  {
    "text": "doesn't contain anything um we'll talk about this uh when you talk about multi-user support since Ice Cream",
    "start": "2064639",
    "end": "2071398"
  },
  {
    "text": "Sandwich uh but basically this location has actually been moved and symbolically linked to so uh for multiple users we're",
    "start": "2071399",
    "end": "2078599"
  },
  {
    "text": "actually going to have a different location for different uh libraries as",
    "start": "2078599",
    "end": "2083638"
  },
  {
    "text": "well so um so basically that's a little bit about the the file system how it's",
    "start": "2083639",
    "end": "2090320"
  },
  {
    "text": "organized and how the permissions are enforced on it um what's also interesting that talk",
    "start": "2090320",
    "end": "2098000"
  },
  {
    "text": "about at the at the startup time the innit process uh goes through the",
    "start": "2098000",
    "end": "2104800"
  },
  {
    "text": "through all the mount points and actually sets the permissions so unlike a traditional Linux operating system",
    "start": "2104800",
    "end": "2111760"
  },
  {
    "text": "where this would be something that statically managed in FS tab or some file like that on Android in it resets",
    "start": "2111760",
    "end": "2120160"
  },
  {
    "text": "the permissions on the files every single time so uh let me so if we do Mount here",
    "start": "2120160",
    "end": "2126880"
  },
  {
    "text": "you can actually see what the mount permission partitions we have so um I was talking about the SD system",
    "start": "2126880",
    "end": "2133599"
  },
  {
    "text": "partition so that's why it's mounted read only right um and we were also",
    "start": "2133599",
    "end": "2138960"
  },
  {
    "text": "discussing the data uh partition which is somewhere",
    "start": "2138960",
    "end": "2146160"
  },
  {
    "text": "here next one down yeah so this one is mounted read right yeah um but what's",
    "start": "2146320",
    "end": "2151920"
  },
  {
    "text": "what I wanted to show you which is going to be easier to show you here is uh is",
    "start": "2151920",
    "end": "2159640"
  },
  {
    "text": "uh CER init.rc",
    "start": "2159920",
    "end": "2164838"
  },
  {
    "text": "file and let me go for four",
    "start": "2165400",
    "end": "2172760"
  },
  {
    "text": "uh so let me try to fit this on the screen so this is the init file that is",
    "start": "2174680",
    "end": "2180640"
  },
  {
    "text": "run by init process as the very first thing that colel does and what happens",
    "start": "2180640",
    "end": "2187400"
  },
  {
    "text": "is is it actually creates all the mount all the all the folders and sets the",
    "start": "2187400",
    "end": "2193599"
  },
  {
    "text": "permission so you can basically see how uh in it is every single time at every single boot setting up what what the",
    "start": "2193599",
    "end": "2201800"
  },
  {
    "text": "access rights are to SL data to 771 ownership system system right um it's",
    "start": "2201800",
    "end": "2207400"
  },
  {
    "text": "mounting uh various directories so in this case it's mounting the U um SL",
    "start": "2207400",
    "end": "2214000"
  },
  {
    "text": "Mount secure um and so on and so on so basically every single time we are configuring the access to various",
    "start": "2214000",
    "end": "2220839"
  },
  {
    "text": "partitions um this is where the M this is the this is the point where the the",
    "start": "2220839",
    "end": "2228160"
  },
  {
    "text": "system partition actually gets remounted read only so it's not like that the ROM",
    "start": "2228160",
    "end": "2233359"
  },
  {
    "text": "itself is not physically writable it is it's just that in it makees sure that at",
    "start": "2233359",
    "end": "2239880"
  },
  {
    "text": "Mount time it actually marks it read on me so that's that's what makes it uh",
    "start": "2239880",
    "end": "2245440"
  },
  {
    "text": "unaccessible to anyone but but rud for example who could re remount it to re",
    "start": "2245440",
    "end": "2251760"
  },
  {
    "text": "read write so uh so essentially we'll we'll talk about rooting later on but",
    "start": "2251760",
    "end": "2257280"
  },
  {
    "text": "one of the exploits is you know booting up the system before this line 99",
    "start": "2257280",
    "end": "2263680"
  },
  {
    "text": "essentially executes so um having a friendly bootloader and having a way to",
    "start": "2263680",
    "end": "2268839"
  },
  {
    "text": "to mount the system outside of in it would do the trick in this case is there",
    "start": "2268839",
    "end": "2274640"
  },
  {
    "text": "reason to ever allow system partition to be writable there is so yeah so OTA is the primary reason",
    "start": "2274640",
    "end": "2282000"
  },
  {
    "text": "it's so um as a matter of fact that's how",
    "start": "2282000",
    "end": "2289319"
  },
  {
    "text": "OTA yes yeah so so OTA is executed basically",
    "start": "2290640",
    "end": "2296359"
  },
  {
    "text": "by the bootloader so so and it essentially Treads the cache file and",
    "start": "2296359",
    "end": "2302200"
  },
  {
    "text": "there's basically one liner in the file that tells it hey you should go into a single user mode you should execute this",
    "start": "2302200",
    "end": "2308000"
  },
  {
    "text": "script and at that point this the system partition is mounted read right now now to do updates of the",
    "start": "2308000",
    "end": "2315839"
  },
  {
    "text": "system installed apps you do not need to go through OTA right so they can actually there's a mechanism to install",
    "start": "2315839",
    "end": "2321079"
  },
  {
    "text": "the updated applications for example system applications like a browser could be downloaded in data app folder and it",
    "start": "2321079",
    "end": "2326920"
  },
  {
    "text": "can actually override the the previously baked in application in system app fold",
    "start": "2326920",
    "end": "2333760"
  },
  {
    "text": "so so that's possible so in other words we do not need OTA to just update a",
    "start": "2333760",
    "end": "2339040"
  },
  {
    "text": "browser for instance so that's so so there's a work around that um so so back",
    "start": "2339040",
    "end": "2346200"
  },
  {
    "text": "to this um so that's a little bit about how the file system is organized and",
    "start": "2346200",
    "end": "2352160"
  },
  {
    "text": "what it does on a I mentioned in 4.2 day they support for multi-user um and I say",
    "start": "2352160",
    "end": "2359119"
  },
  {
    "text": "multiuser I mean actually physical user so basically you can have two people in a household share a tablet um and so so",
    "start": "2359119",
    "end": "2367200"
  },
  {
    "text": "again it's not exactly that we are using Linux uids as in ad user Bob you can't",
    "start": "2367200",
    "end": "2373400"
  },
  {
    "text": "do that uh but you can add um a higher level user at the Android level that",
    "start": "2373400",
    "end": "2378720"
  },
  {
    "text": "maps to a lower level Linux uid the way that works is um as I mentioned this was",
    "start": "2378720",
    "end": "2384640"
  },
  {
    "text": "introduced in 4.2 but the underpinnings of that were actually already available in in Ice Cream Sandwich um the way it",
    "start": "2384640",
    "end": "2391920"
  },
  {
    "text": "works is first of all there's a config file in the platform U that that is going to show that's going to tell the",
    "start": "2391920",
    "end": "2397839"
  },
  {
    "text": "operating system what's the maximum number of users and typically on on devices like phones that number is set",
    "start": "2397839",
    "end": "2403920"
  },
  {
    "text": "to one so although you have a support for multi-user you always going to have a single user um on tablets that number",
    "start": "2403920",
    "end": "2411400"
  },
  {
    "text": "may be as high as eight so you may have eight or more users there's not nothing",
    "start": "2411400",
    "end": "2417520"
  },
  {
    "text": "specific that's preventing you to actually compile it with any number you want in there um from the user",
    "start": "2417520",
    "end": "2423240"
  },
  {
    "text": "standpoint you can just go to settings user add and you can add a new user now",
    "start": "2423240",
    "end": "2428839"
  },
  {
    "text": "what happens internally is that back in the data system partition which we",
    "start": "2428839",
    "end": "2434319"
  },
  {
    "text": "talked about briefly before so let me um let me do this I'm going to see in",
    "start": "2434319",
    "end": "2441280"
  },
  {
    "text": "into uh just to uh do that so",
    "start": "2441280",
    "end": "2447480"
  },
  {
    "text": "CD uh so if I go into users so there's now a subdirectory called users which is",
    "start": "2447880",
    "end": "2453079"
  },
  {
    "text": "new um and what we have in there is we have a user user list so if I cat um",
    "start": "2453079",
    "end": "2461079"
  },
  {
    "text": "user list XML um that's just an XML file that says how many users we have um or",
    "start": "2461079",
    "end": "2467240"
  },
  {
    "text": "what their respective IDs are so on a single user device you're always going",
    "start": "2467240",
    "end": "2472800"
  },
  {
    "text": "to have one user and that's a user zero so if I had more it be it would be one and so on now for each user there's",
    "start": "2472800",
    "end": "2479160"
  },
  {
    "text": "going to be there's going to be an XML file in a directory so if I C 0.",
    "start": "2479160",
    "end": "2484319"
  },
  {
    "text": "XML um you can see that this just gives you the name of the user so it says this is the primary user and this is the one",
    "start": "2484319",
    "end": "2490520"
  },
  {
    "text": "user device now if I go into SL zero so data system user zero uh we now",
    "start": "2490520",
    "end": "2498400"
  },
  {
    "text": "have specific information about the user so there's basically a sqlite database uh that talks about the accounts the",
    "start": "2498400",
    "end": "2506000"
  },
  {
    "text": "package restrictions uh things like that the package restrictions are interesting",
    "start": "2506000",
    "end": "2512680"
  },
  {
    "text": "C so basically what we have here is where we can disable certain components",
    "start": "2514240",
    "end": "2519720"
  },
  {
    "text": "and certain certain things on per or enable uh per per user so we can grant",
    "start": "2519720",
    "end": "2525560"
  },
  {
    "text": "certain packages and so forth so so multi-user support um is implemented",
    "start": "2525560",
    "end": "2531560"
  },
  {
    "text": "that way so essentially it just maps to uh again Linux uids um they're essentially using a mask so um we're",
    "start": "2531560",
    "end": "2538920"
  },
  {
    "text": "still starting um if we have a single user we're starting at 10,000 if we have multi-user then we're starting at",
    "start": "2538920",
    "end": "2545720"
  },
  {
    "text": "100,000 and then we're multiplying that by the uid so in in this case it would",
    "start": "2545720",
    "end": "2551000"
  },
  {
    "text": "be a uid 0 1 2 3 and so forth and then on top of that we're adding the actual",
    "start": "2551000",
    "end": "2556559"
  },
  {
    "text": "app ID so essentially by combining these two uid and the app ID uh we're getting",
    "start": "2556559",
    "end": "2563040"
  },
  {
    "text": "a new ID that encap that is basically a combination of the two so in other words we have a user uh per app per physical",
    "start": "2563040",
    "end": "2571599"
  },
  {
    "text": "user yes did this change very recently with2 or is it different from phoneus",
    "start": "2571599",
    "end": "2578559"
  },
  {
    "text": "because on my phone the vanilla official 42 um I don't get that mapping I get 8",
    "start": "2578559",
    "end": "2585720"
  },
  {
    "text": "is 20001 is 2000 all the apps it's not an OP yeah so um so it depends so it",
    "start": "2585720",
    "end": "2593640"
  },
  {
    "text": "depends on um if you have multi-user device or single user device uh so even",
    "start": "2593640",
    "end": "2599000"
  },
  {
    "text": "if even though you have 422 for example this is a 422 device um or it's this one",
    "start": "2599000",
    "end": "2604160"
  },
  {
    "text": "actually is not but um this is a device that's going to have have just uh just a single uh user so there's going to be if",
    "start": "2604160",
    "end": "2611480"
  },
  {
    "text": "you go here you're going to see um actually it's hard to do this on a on a",
    "start": "2611480",
    "end": "2617920"
  },
  {
    "text": "tablet um but yeah so this is basically just going to be a device with a uh with a just default user in other words on",
    "start": "2617920",
    "end": "2624680"
  },
  {
    "text": "this device this number is set to to the config Max user maximum users is set to",
    "start": "2624680",
    "end": "2631800"
  },
  {
    "text": "one so if you only have one user then the mask is going to be shorter by 10",
    "start": "2631800",
    "end": "2637920"
  },
  {
    "text": "it's not even increasing it should be increasing by the app so do you have the question is",
    "start": "2637920",
    "end": "2644640"
  },
  {
    "text": "do you have the apps be aore something or do you have like this format where",
    "start": "2644640",
    "end": "2651240"
  },
  {
    "text": "it's u z you do like",
    "start": "2651240",
    "end": "2655800"
  },
  {
    "text": "ID okay um so I'll show you where the file is that that is that is governing",
    "start": "2657760",
    "end": "2664040"
  },
  {
    "text": "that we're going to look at that file but it's a h file that's defined when to increase and how to basically",
    "start": "2664040",
    "end": "2670640"
  },
  {
    "text": "start those masks uh so we'll we'll take a look at that yeah but on a typical on a typical",
    "start": "2670640",
    "end": "2677480"
  },
  {
    "text": "device that U that has multi-user support so we're going to uh we're going to basically have something like that so",
    "start": "2677480",
    "end": "2684160"
  },
  {
    "text": "U A3 is going to look like that",
    "start": "2684160",
    "end": "2688960"
  },
  {
    "text": "uid um what we're going to then have for each user we're going to have a specific",
    "start": "2689680",
    "end": "2696640"
  },
  {
    "text": "uh us user data folder so each user gets his own copy of basically apps data so",
    "start": "2696640",
    "end": "2702400"
  },
  {
    "text": "in other words um you know if you have two people in a house using the same tablet they're going to install the same",
    "start": "2702400",
    "end": "2709760"
  },
  {
    "text": "Angry Birds they can share the Angry Birds app itself but data folder for Angry Birds is going to be separate so",
    "start": "2709760",
    "end": "2715960"
  },
  {
    "text": "their high scores are separate and so forth so that's managed by uh data user partition so if we do SL dat SL",
    "start": "2715960",
    "end": "2724640"
  },
  {
    "text": "user um LS uh so so in in this device we only have",
    "start": "2724640",
    "end": "2732800"
  },
  {
    "text": "because we only have a single user and that user is has a ID zero that Maps to/",
    "start": "2732800",
    "end": "2738800"
  },
  {
    "text": "data dat so if you had multi-user support that would actually go to a different uh different SL data",
    "start": "2738800",
    "end": "2745240"
  },
  {
    "text": "partitions so this is going to be remounted U as you as you switch users so uh it's going to look to apps the",
    "start": "2745240",
    "end": "2752079"
  },
  {
    "text": "same so it's going to be SL data data so if you have apps that are actually referring to full path uh still going to",
    "start": "2752079",
    "end": "2757920"
  },
  {
    "text": "work it's just that it's going to be mounted to a different partition so so that's uh that's how",
    "start": "2757920",
    "end": "2763400"
  },
  {
    "text": "that that that's you know so essentially if I had say 11 users or this would be a 12th user so we would have SL dat user12",
    "start": "2763400",
    "end": "2772000"
  },
  {
    "text": "and then we would have for every single package we would have a folder in there um so we saw how different uids",
    "start": "2772000",
    "end": "2781040"
  },
  {
    "text": "have different uh how different apps have different users we talked about that so that's basically how the data is",
    "start": "2781040",
    "end": "2788640"
  },
  {
    "text": "uh segmented between users the actual um the actual um binaries are not right",
    "start": "2788640",
    "end": "2795480"
  },
  {
    "text": "because there's no real reason to separate the binaries between multiple users because they don't change so um so",
    "start": "2795480",
    "end": "2802359"
  },
  {
    "text": "we're essentially having all the the cache and the apps be shared uh the native libraries um are as I said",
    "start": "2802359",
    "end": "2809720"
  },
  {
    "text": "they're now changed so as opposed to being in the data user uh user ID",
    "start": "2809720",
    "end": "2814920"
  },
  {
    "text": "package they're basically mapped to data app Flip package so to specific to",
    "start": "2814920",
    "end": "2820280"
  },
  {
    "text": "specific link so there's basically a link to a shared library in other words",
    "start": "2820280",
    "end": "2825400"
  },
  {
    "text": "if I download Angry Birds and Angry Birds has Li angry birds. so which is how they do computations or whatever um",
    "start": "2825400",
    "end": "2833640"
  },
  {
    "text": "as opposed to having multiple copies of the same Library the library is now in a new location SL data and this there's a",
    "start": "2833640",
    "end": "2841680"
  },
  {
    "text": "symbolic link for each package uh so that the actual lib is now shared between multip users so so that's a",
    "start": "2841680",
    "end": "2849000"
  },
  {
    "text": "little bit about how that support works and as I said it was introduced uh just",
    "start": "2849000",
    "end": "2856119"
  },
  {
    "text": "recently um so what what we're going to talk about next is we're going to talk about permissions um so um as we said",
    "start": "2856559",
    "end": "2862680"
  },
  {
    "text": "earlier Android is uh permission based system so basically if you have an application uh such as a um an",
    "start": "2862680",
    "end": "2870040"
  },
  {
    "text": "application contains a service um and you want this application to be able to access uh uh if you if you want this",
    "start": "2870040",
    "end": "2877160"
  },
  {
    "text": "application to do something that's potentially dangerous like for example access drivers and such and U and does",
    "start": "2877160",
    "end": "2883480"
  },
  {
    "text": "this application run in their system user we need to protect this application from just having anyone access it so one",
    "start": "2883480",
    "end": "2890520"
  },
  {
    "text": "way to do that is to essentially say that we require a permission now on the",
    "start": "2890520",
    "end": "2895760"
  },
  {
    "text": "flip side if somebody wants to use this application so for example we have a client activity that wants to directly",
    "start": "2895760",
    "end": "2902160"
  },
  {
    "text": "talk to it what we would know what we would do is we would request that permission so it needs to match so it's",
    "start": "2902160",
    "end": "2908400"
  },
  {
    "text": "like ying and yang so required permission and and users permission to",
    "start": "2908400",
    "end": "2913440"
  },
  {
    "text": "need to match and ultimately it's the user that gets little screen and says yeah or N I approve this permission in",
    "start": "2913440",
    "end": "2919800"
  },
  {
    "text": "case of a dangerous permission uh there're different they're about four to six different types of permissions we'll",
    "start": "2919800",
    "end": "2925079"
  },
  {
    "text": "talk about that uh but uh but that's that's a screen that most of us have experience with so so that's the premise",
    "start": "2925079",
    "end": "2931799"
  },
  {
    "text": "behind that um we can actually see uh uh what what ious applications um run as so",
    "start": "2931799",
    "end": "2939400"
  },
  {
    "text": "for example if I wanted to um find out various permissions for for an application U let's for example see um",
    "start": "2939400",
    "end": "2947720"
  },
  {
    "text": "we we wanted to see the browser I believe that was the one that we were running run as um let me see actually",
    "start": "2947720",
    "end": "2955760"
  },
  {
    "text": "what's package um oops",
    "start": "2955760",
    "end": "2961599"
  },
  {
    "text": "Mell PS um and we had a we had the the",
    "start": "2961599",
    "end": "2967160"
  },
  {
    "text": "browser or one of these applications",
    "start": "2967160",
    "end": "2971200"
  },
  {
    "text": "running um Can to browser but I can do my applications",
    "start": "2974839",
    "end": "2981079"
  },
  {
    "text": "so Android number so I can now I can now basically",
    "start": "2981440",
    "end": "2988760"
  },
  {
    "text": "U um do something as that application and what I can attempt to do is I can",
    "start": "2988760",
    "end": "2994319"
  },
  {
    "text": "attempt to make a phone call so I can attempt to uh run as an underprivileged user so",
    "start": "2994319",
    "end": "2999720"
  },
  {
    "text": "whatever that uid is and I can try to basically have this application uh make",
    "start": "2999720",
    "end": "3005400"
  },
  {
    "text": "a phone call and in this case this is uh this is not going to work uh because we",
    "start": "3005400",
    "end": "3010480"
  },
  {
    "text": "don't have the permission to do that so this application is not granted a specific call permission so it can't do",
    "start": "3010480",
    "end": "3017400"
  },
  {
    "text": "that so that's that's that's how the kernel in this case is enforcing this",
    "start": "3017400",
    "end": "3023079"
  },
  {
    "text": "it's essentially uh failing with a security exception",
    "start": "3023079",
    "end": "3028119"
  },
  {
    "text": "um so to uh we mentioned basically the app level uh we specify users permission",
    "start": "3028119",
    "end": "3034520"
  },
  {
    "text": "and we specify requires permission so you guys are probably familiar with this",
    "start": "3034520",
    "end": "3039880"
  },
  {
    "text": "uh statements in the Manifest file let's take a look at some of the permissions that actually exist in the",
    "start": "3039880",
    "end": "3046359"
  },
  {
    "text": "device so PM um PM list",
    "start": "3046359",
    "end": "3052798"
  },
  {
    "text": "oops so on this particular device I can use package manager to actually see all",
    "start": "3055280",
    "end": "3060359"
  },
  {
    "text": "the permissions that exist on this device um so this includes both the",
    "start": "3060359",
    "end": "3066520"
  },
  {
    "text": "built-in permissions so for example a permission to call privileged as well as",
    "start": "3066520",
    "end": "3072000"
  },
  {
    "text": "some you know custom a permissions that that that that exist on this device uh what we can do with this is we can",
    "start": "3072000",
    "end": "3078200"
  },
  {
    "text": "actually sort them based on various um various um settings so if I do uh do",
    "start": "3078200",
    "end": "3086160"
  },
  {
    "text": "something like this I can get a little more details about specific permissions so you can kind of see that this device",
    "start": "3086160",
    "end": "3091599"
  },
  {
    "text": "has a permission called read status that is enforced by this package that is a",
    "start": "3091599",
    "end": "3097160"
  },
  {
    "text": "protection level signature etc etc so this is a this is how permission",
    "start": "3097160",
    "end": "3102680"
  },
  {
    "text": "manifest itself uh inside of the package manager so um now obviously there's so",
    "start": "3102680",
    "end": "3110400"
  },
  {
    "text": "many uh permissions um at play uh and they're not all equal so uh this is a",
    "start": "3110400",
    "end": "3116760"
  },
  {
    "text": "this is from the Google iio last year uh the the top 10 list of uh bad",
    "start": "3116760",
    "end": "3122559"
  },
  {
    "text": "permissions if you will so so Google doesn't have any curation in terms of",
    "start": "3122559",
    "end": "3127960"
  },
  {
    "text": "what goes into the market uh but they do have a curation in terms of what gets bubbled up in the market so in other",
    "start": "3127960",
    "end": "3133760"
  },
  {
    "text": "words if you're going to become featured they actually have a team of pretty smart guys that actually analyze the the",
    "start": "3133760",
    "end": "3141240"
  },
  {
    "text": "applications and they run some kind of curis and they figure if an application",
    "start": "3141240",
    "end": "3146319"
  },
  {
    "text": "is is actually possibly a good application or a bad application so if an application",
    "start": "3146319",
    "end": "3153000"
  },
  {
    "text": "is sending sms and receiving SMS unless it's an SMS application it's it's a bad",
    "start": "3153000",
    "end": "3159960"
  },
  {
    "text": "application most likely right if an application is using system alert windows it's probably a bad application",
    "start": "3159960",
    "end": "3165359"
  },
  {
    "text": "there's no real good reason to use that often uh if it's if it's an application that's reading your bookmarks and",
    "start": "3165359",
    "end": "3171599"
  },
  {
    "text": "writing to your bookmarks in other words tracking what you're browsing it's probably a bad application um if it's",
    "start": "3171599",
    "end": "3177000"
  },
  {
    "text": "reading writing a contacts same thing calling a phone number distinct from dialing a phone number uh so calling",
    "start": "3177000",
    "end": "3183920"
  },
  {
    "text": "phone number is actually bad we'll talk about dialing which is not bad um reading a logs is potentially bad",
    "start": "3183920",
    "end": "3190240"
  },
  {
    "text": "because you could be leaking some important information in the logs accessing fine location so unless it's",
    "start": "3190240",
    "end": "3195799"
  },
  {
    "text": "some kind of you know location tracking application you often can do pretty well with just the uh uh the course location",
    "start": "3195799",
    "end": "3204200"
  },
  {
    "text": "for games for example um get tasks in other words figure out what's running um",
    "start": "3204200",
    "end": "3209960"
  },
  {
    "text": "receive boot completed so this actually surprised me um because it's usually a good place to use for installing alarms",
    "start": "3209960",
    "end": "3216680"
  },
  {
    "text": "and such but uh it's one of the it's number nine on the list of bad apps to use and U and change Wi-Fi state is",
    "start": "3216680",
    "end": "3225359"
  },
  {
    "text": "another one uh that's bad I would also add to this list uh access the phone",
    "start": "3225359",
    "end": "3230640"
  },
  {
    "text": "State um almost every single game nowadays uses that because they need the",
    "start": "3230640",
    "end": "3235680"
  },
  {
    "text": "telep manager get phone ID or get device ID to figure out unique ID of the device",
    "start": "3235680",
    "end": "3241599"
  },
  {
    "text": "and that's kind of like an anti pattern in figuring out who's using uh the app there are better ways to manage that but",
    "start": "3241599",
    "end": "3247920"
  },
  {
    "text": "um a lot of uh apps depend on that number which is usually mapped to uh",
    "start": "3247920",
    "end": "3253160"
  },
  {
    "text": "IMEI number on on um GSM phones so this is from from Google from Google IO from",
    "start": "3253160",
    "end": "3260160"
  },
  {
    "text": "last list list so basically um the work around is that whenever",
    "start": "3260160",
    "end": "3267040"
  },
  {
    "text": "possible you should not be using permissions that are potentially dangerous but rather use uh permissions",
    "start": "3267040",
    "end": "3272760"
  },
  {
    "text": "that U that are not so for example um let's compare the permission to access",
    "start": "3272760",
    "end": "3279040"
  },
  {
    "text": "camera right so taking a picture is a potentially dangerous thing it could be spying it could be intruding your P",
    "start": "3279040",
    "end": "3284880"
  },
  {
    "text": "privacy DOD certainly would not like you to even go anywhere near the camera um",
    "start": "3284880",
    "end": "3291079"
  },
  {
    "text": "now action so so that request is pretty bad but action image cap",
    "start": "3291079",
    "end": "3296880"
  },
  {
    "text": "on other hand is not necessarily bad because that is just going to open up",
    "start": "3296880",
    "end": "3302520"
  },
  {
    "text": "the system camera application right so the user still has knows what's going on",
    "start": "3302520",
    "end": "3308319"
  },
  {
    "text": "the camera is open and the user gets to say yeah or a and and and snap a photo uh so so that's okay so this is",
    "start": "3308319",
    "end": "3315960"
  },
  {
    "text": "basically the code that would uh work around that so you would uh you would start an activity for result and you",
    "start": "3315960",
    "end": "3322200"
  },
  {
    "text": "would use image capture um request which would just pop up the camera Cera you take a picture with the familiar camera",
    "start": "3322200",
    "end": "3328599"
  },
  {
    "text": "application um and once you return from that you actually on activity result you",
    "start": "3328599",
    "end": "3333680"
  },
  {
    "text": "get the data back so that's a preferred way of handling that um similar similar thing is true for SMS so there's no good",
    "start": "3333680",
    "end": "3342280"
  },
  {
    "text": "reason for your application to be possibly secretively Sent SMS messages",
    "start": "3342280",
    "end": "3347760"
  },
  {
    "text": "out there this can cost money and intrude some privacy so as opposed to send SMS what we can do is we can just",
    "start": "3347760",
    "end": "3354119"
  },
  {
    "text": "create an intent with some data so in this case SMS to 41555 5551 1212 or 1 1234 and that's",
    "start": "3354119",
    "end": "3363480"
  },
  {
    "text": "going to pop up the standard um SMS application and uh and so users is going",
    "start": "3363480",
    "end": "3369039"
  },
  {
    "text": "to be familiar with that uh reading contacts is another example of that so as opposed to read contacts just do",
    "start": "3369039",
    "end": "3375319"
  },
  {
    "text": "action get content and access the standard content provider for contacts for example or context",
    "start": "3375319",
    "end": "3383119"
  },
  {
    "text": "application um so read a phone State this is the sort of the anti pattern that I was talking about so a lot of",
    "start": "3383119",
    "end": "3390400"
  },
  {
    "text": "apps are using get get device ID to access the unique the IMEI number of a",
    "start": "3390400",
    "end": "3396280"
  },
  {
    "text": "device uh the better way would be to actually uh generate that number and store it uh store it on the device",
    "start": "3396280",
    "end": "3403400"
  },
  {
    "text": "itself as opposed to uh have this potentially dangerous permission",
    "start": "3403400",
    "end": "3409480"
  },
  {
    "text": "yeah uh what would it return uh it's it's really up to um U whoever buil the",
    "start": "3413200",
    "end": "3418760"
  },
  {
    "text": "device to determine what it returns it just most commonly the the default",
    "start": "3418760",
    "end": "3423799"
  },
  {
    "text": "implementation the reference implementation is to return IMEI number yeah",
    "start": "3423799",
    "end": "3430520"
  },
  {
    "text": "yeah so uh well yes that's correct Google's been running things",
    "start": "3453760",
    "end": "3459920"
  },
  {
    "text": "very Loosely when it comes to security for for some time and and this is one of those examples so um but basically",
    "start": "3459920",
    "end": "3467200"
  },
  {
    "text": "they're saying now that the best practice is not to use not to ask for that per permission so",
    "start": "3467200",
    "end": "3474640"
  },
  {
    "text": "right yeah yeah yeah ultimately I get that we need a unique ID per device so",
    "start": "3476799",
    "end": "3483760"
  },
  {
    "text": "that we can identify it as a cookie or whatever equivalent on ad networks and and things like that or for licensing",
    "start": "3483760",
    "end": "3489920"
  },
  {
    "text": "reasons uh but um the only ID that people kind of figured out to use was the get device ID and unfortunately that",
    "start": "3489920",
    "end": "3497079"
  },
  {
    "text": "requires user to approve this potentially you know dangerous permission which is read the phone state",
    "start": "3497079",
    "end": "3502799"
  },
  {
    "text": "which can we can actually tell you if the phone is off hook on hook um ringing that sort of thing so it tells tells",
    "start": "3502799",
    "end": "3509640"
  },
  {
    "text": "gives the app way more privileges than just access this potentially innocent",
    "start": "3509640",
    "end": "3515559"
  },
  {
    "text": "unique number on a device so uh like I said it's an anti pattern it's it's been",
    "start": "3515559",
    "end": "3520920"
  },
  {
    "text": "going on in a big way for many years uh but it's something that you",
    "start": "3520920",
    "end": "3527640"
  },
  {
    "text": "know only serial number property um",
    "start": "3530559",
    "end": "3537599"
  },
  {
    "text": "and is that available by like bill. or something like that",
    "start": "3539359",
    "end": "3544880"
  },
  {
    "text": "or yeah it may not be available at",
    "start": "3549680",
    "end": "3553760"
  },
  {
    "text": "Java yeah yeah there to my knowledge there",
    "start": "3555920",
    "end": "3563160"
  },
  {
    "text": "isn't another obvious unique number on device that's available to app developers so basically what they're",
    "start": "3563160",
    "end": "3569880"
  },
  {
    "text": "saying is hey generate your own number and then store it but this is more work",
    "start": "3569880",
    "end": "3575240"
  },
  {
    "text": "because you now have to worry about storage and all that other stuff as opposed to just saying hey I'm just going to access you know the number",
    "start": "3575240",
    "end": "3581200"
  },
  {
    "text": "that's there on every single device and that's why everyone's doing it so yeah um permission enforcement so",
    "start": "3581200",
    "end": "3589160"
  },
  {
    "text": "basically uh they're number of triggers how the permissions are enforced ultimately colel has the final say but",
    "start": "3589160",
    "end": "3595119"
  },
  {
    "text": "uh but native demons also do the same thing application framework has a way to do that and application components can",
    "start": "3595119",
    "end": "3602319"
  },
  {
    "text": "enforce permissions as well uh so as we basically discussed already init process um sets up the the",
    "start": "3602319",
    "end": "3610960"
  },
  {
    "text": "ownership um it works via init RC file which I showed you briefly there's",
    "start": "3610960",
    "end": "3616480"
  },
  {
    "text": "another file that's of interest and that's uent d. RC and um um so cat you",
    "start": "3616480",
    "end": "3623920"
  },
  {
    "text": "event ERC so basically this file sets the",
    "start": "3623920",
    "end": "3630319"
  },
  {
    "text": "permissions on various device drivers right so so we we're setting up who can access What U on this particular device",
    "start": "3630319",
    "end": "3638599"
  },
  {
    "text": "so for example to install alarms somebody needs to be either system or a radio user or to access camera it needs",
    "start": "3638599",
    "end": "3646599"
  },
  {
    "text": "to be either a root user or a camera user so this is now handled by uevent D",
    "start": "3646599",
    "end": "3652520"
  },
  {
    "text": "um at bham it's one of the very first demons that is started by the uh init",
    "start": "3652520",
    "end": "3659760"
  },
  {
    "text": "process um system ROM um also has a file and I mentioned this file earlier and",
    "start": "3660000",
    "end": "3666039"
  },
  {
    "text": "this is the file that actually creates all the masks for users so unlike",
    "start": "3666039",
    "end": "3671440"
  },
  {
    "text": "traditional Linux that has Etc password file which we don't have on Android um",
    "start": "3671440",
    "end": "3677119"
  },
  {
    "text": "there's a file that looks like this um just one",
    "start": "3677119",
    "end": "3682240"
  },
  {
    "text": "second U",
    "start": "3682240",
    "end": "3686240"
  },
  {
    "text": "um so it looks like this and this is where we're setting up those those masks so these are the various AIDS now that",
    "start": "3687760",
    "end": "3694640"
  },
  {
    "text": "that they going to map to various uids right so basically we're saying that rout is zero uh system um apps start at",
    "start": "3694640",
    "end": "3703319"
  },
  {
    "text": "1,000 and they keep on going um so we then have the um um 2,000 3,000 and then",
    "start": "3703319",
    "end": "3711920"
  },
  {
    "text": "we're starting the actual app users at 10,000 or 100,000 on a multiuser devices",
    "start": "3711920",
    "end": "3718640"
  },
  {
    "text": "so that's the the first app user and typically this is going to be your launcher uh is going to be at U uh at",
    "start": "3718640",
    "end": "3726559"
  },
  {
    "text": "10,000 uid we're now mapping the users to these",
    "start": "3726559",
    "end": "3733319"
  },
  {
    "text": "uids so um if we have a root user we're going to map it to uid Zer and so on um",
    "start": "3733319",
    "end": "3742760"
  },
  {
    "text": "and then we basically have file system permission that we're also mapping so we're setting the permissions so for",
    "start": "3742760",
    "end": "3748359"
  },
  {
    "text": "example the fact that the data data permission is isolated from anyone else",
    "start": "3748359",
    "end": "3753440"
  },
  {
    "text": "in other words that Cornerstone of the sandboxing on Android uh that's managed by basically this file setting up that",
    "start": "3753440",
    "end": "3761680"
  },
  {
    "text": "uh it's a system system for user and for group right and we're giving it 771 uh",
    "start": "3761680",
    "end": "3770279"
  },
  {
    "text": "mask for data data so we're starting generics generic first and then more and",
    "start": "3770279",
    "end": "3775480"
  },
  {
    "text": "more specific so that's the that that's why when ultimately we go on a device",
    "start": "3775480",
    "end": "3781000"
  },
  {
    "text": "and we ls- dat dat we can see that this is now well actually if I LS data we can",
    "start": "3781000",
    "end": "3789000"
  },
  {
    "text": "now see that let me kind of clean this up that the data partition is owned by",
    "start": "3789000",
    "end": "3794839"
  },
  {
    "text": "system system and has that mask of 771 so so that's that's where that that is",
    "start": "3794839",
    "end": "3802319"
  },
  {
    "text": "configured um so we're now doing that on a file basis so this this is not doing it on a directory basis this is now",
    "start": "3802319",
    "end": "3808000"
  },
  {
    "text": "doing it on a file basis it gets even more specific so we're Now setting permissions for each specific file um",
    "start": "3808000",
    "end": "3814240"
  },
  {
    "text": "and um and then ultimately uh we're doing it on per user basis so it's figuring out the permissions on on for",
    "start": "3814240",
    "end": "3821559"
  },
  {
    "text": "specific user so that's that this is the replacement essentially for what we know in standard Linux as a etc password file",
    "start": "3821559",
    "end": "3828720"
  },
  {
    "text": "uh so that's kind of how the users are dynamically uh essentially allocated on on",
    "start": "3828720",
    "end": "3834559"
  },
  {
    "text": "Android um so that's the Linux uh enforcement now what's interesting is",
    "start": "3834559",
    "end": "3839839"
  },
  {
    "text": "you guys are familiar from the app level that uh that we have users right that we",
    "start": "3839839",
    "end": "3845559"
  },
  {
    "text": "have permissions so we've all seen a permission for example Android permission internet so how does this",
    "start": "3845559",
    "end": "3850720"
  },
  {
    "text": "really work so let's take a look at this file so if I um if I",
    "start": "3850720",
    "end": "3857720"
  },
  {
    "text": "um open that file up um essentially this is the file that's listing every single",
    "start": "3857720",
    "end": "3863160"
  },
  {
    "text": "permission that ships with Android so this is the operating uh system level uh",
    "start": "3863160",
    "end": "3868279"
  },
  {
    "text": "Android permissions and there's our internet permission for instance essentially what happens is this",
    "start": "3868279",
    "end": "3873559"
  },
  {
    "text": "permission it just gets mapped from this highlevel Android construct android. permission. internet to a Linux um Linux",
    "start": "3873559",
    "end": "3882079"
  },
  {
    "text": "kernel or Linux G inet right so now we're basically just mapping so",
    "start": "3882079",
    "end": "3887720"
  },
  {
    "text": "essentially when install D downloads say Angry Birds right it analyzes its",
    "start": "3887720",
    "end": "3894200"
  },
  {
    "text": "manifest file it see uses permission line right and that uses permission line says Angry Birds wants to use permission",
    "start": "3894200",
    "end": "3901240"
  },
  {
    "text": "for internet right so what that what then happens is if the user says yeah to",
    "start": "3901240",
    "end": "3906599"
  },
  {
    "text": "that permission um that app gets assigned a GID of finet okay so from",
    "start": "3906599",
    "end": "3912880"
  },
  {
    "text": "this point on it's really just up to the colonel to manage the the permissions right so now we have our app that we",
    "start": "3912880",
    "end": "3920520"
  },
  {
    "text": "downloaded granted permissions for internet and that's how it works for pretty much all the other permissions um",
    "start": "3920520",
    "end": "3925799"
  },
  {
    "text": "what follows that is basically the enforcement uh which we're going to see",
    "start": "3925799",
    "end": "3931760"
  },
  {
    "text": "in a little bit uh but that's that's now enforced at IP IP uh level um who can",
    "start": "3931760",
    "end": "3938640"
  },
  {
    "text": "open a socket uh is basically uh controlled uh by kernel to basically say",
    "start": "3938640",
    "end": "3943960"
  },
  {
    "text": "hey is is this uh is this process member of of that group so we'll see that later",
    "start": "3943960",
    "end": "3949760"
  },
  {
    "text": "on um so we talked about this file uh that's what we did uh so that was the the file that we looked at how the how",
    "start": "3949760",
    "end": "3957279"
  },
  {
    "text": "we manage the uids for apps and this is what we were just",
    "start": "3957279",
    "end": "3962319"
  },
  {
    "text": "talking about a this is So-Cal paranoid network security and I'm using internet just as an example of how all the most",
    "start": "3962319",
    "end": "3968839"
  },
  {
    "text": "of the other permissions work so how we map them from this high level Android constructs to the lowlevel Linux",
    "start": "3968839",
    "end": "3974400"
  },
  {
    "text": "constructs so uh as we mentioned so this is the Manifest file that manifest file",
    "start": "3974400",
    "end": "3979920"
  },
  {
    "text": "uh States uses permission so that permission gets mapped in this operating system level file to inet group this",
    "start": "3979920",
    "end": "3987559"
  },
  {
    "text": "inet group is in that uh replacement for ETC passwords file ma to the actual inet",
    "start": "3987559",
    "end": "3994400"
  },
  {
    "text": "user or more specifically map to the uid of 3003 for instance um and now what we",
    "start": "3994400",
    "end": "4002640"
  },
  {
    "text": "basically have at the networking level the kernel level is we basically have a",
    "start": "4002640",
    "end": "4008440"
  },
  {
    "text": "little check that says does it have access to network and we basically check",
    "start": "4008440",
    "end": "4013960"
  },
  {
    "text": "hey is this part of that group so that's kind of how we have an app uh",
    "start": "4013960",
    "end": "4019440"
  },
  {
    "text": "ultimately be able to do something or not be able to do something so this is the kernel level yeah um so so so",
    "start": "4019440",
    "end": "4026279"
  },
  {
    "text": "basically the confused Deputy has to do with not that app actually executing",
    "start": "4026279",
    "end": "4031559"
  },
  {
    "text": "that request directly but confusing another application that has those rights to do that and uh so we're now",
    "start": "4031559",
    "end": "4038440"
  },
  {
    "text": "talking at a very low level kernel enforcement above the kernel level we basically have uh the apps uh you know",
    "start": "4038440",
    "end": "4045559"
  },
  {
    "text": "we have the frame we have the the Frameworks worrying about permissions and then we finally have the",
    "start": "4045559",
    "end": "4050640"
  },
  {
    "text": "applications so if an application gets an intent to do something is that is it really validating that intent is it is",
    "start": "4050640",
    "end": "4056760"
  },
  {
    "text": "it a valid intent and so on so so now that's going to be at a higher level so we we'll get into some of those uh",
    "start": "4056760",
    "end": "4062880"
  },
  {
    "text": "concerns so this is is this is just the mapping of the high level uh permission to a lowle Linux uh",
    "start": "4062880",
    "end": "4069960"
  },
  {
    "text": "G um so this is how it's enforced for IPv6 uh and V4",
    "start": "4069960",
    "end": "4076039"
  },
  {
    "text": "um so this is U some other kernel changes it's not really that important",
    "start": "4076039",
    "end": "4081520"
  },
  {
    "text": "for for this so so now that you have this permission you can also uh you can",
    "start": "4081520",
    "end": "4086760"
  },
  {
    "text": "create your own your own permission right so when you create your own permission you can blanket protect an",
    "start": "4086760",
    "end": "4093160"
  },
  {
    "text": "application using uh that permission so um what we can do is we can protect all",
    "start": "4093160",
    "end": "4100520"
  },
  {
    "text": "the components with static permissions so activity we can Pro protect against",
    "start": "4100520",
    "end": "4105920"
  },
  {
    "text": "being started service we can protect against being uh started stopped or bound too right provider we can protect",
    "start": "4105920",
    "end": "4114440"
  },
  {
    "text": "against be having data be read or written so it's the only one that actually has two different permissions",
    "start": "4114440",
    "end": "4120520"
  },
  {
    "text": "and the receiver uh we can basically protect who is allowed to send broadcast to this receiver so so those are",
    "start": "4120520",
    "end": "4127600"
  },
  {
    "text": "basically our ways to protect uh uh some of these components um so so let me uh",
    "start": "4127600",
    "end": "4135159"
  },
  {
    "text": "give give you an example of of this um so let me show you um actually let me",
    "start": "4135159",
    "end": "4143880"
  },
  {
    "text": "show you like this so I have an application here and um so I have a",
    "start": "4143880",
    "end": "4151600"
  },
  {
    "text": "service um and this service currently doesn't require any permissions right um",
    "start": "4151600",
    "end": "4157359"
  },
  {
    "text": "and that's why we have a lot lots of warnings the the the newer the newer tools are actually warning you against",
    "start": "4157359",
    "end": "4164159"
  },
  {
    "text": "doing things that are potentially uh not so good from security standpoint but they're still not making it illegal",
    "start": "4164159",
    "end": "4170838"
  },
  {
    "text": "um so basically this this service is not protected in any way shape perform so I'm looking at this piece of code so",
    "start": "4170839",
    "end": "4177480"
  },
  {
    "text": "essentially anyone can access this service and I have a client um that I'm going to run and I'm going to have this",
    "start": "4177480",
    "end": "4183318"
  },
  {
    "text": "client basically uh access the service so this client",
    "start": "4183319",
    "end": "4188640"
  },
  {
    "text": "is it's just a little Fibonacci application so for example if I say I want to calculate a Fibonacci of 23 what",
    "start": "4188640",
    "end": "4195760"
  },
  {
    "text": "this is going to do is it's going to go from one process so these are separate processes right very important so one",
    "start": "4195760",
    "end": "4202159"
  },
  {
    "text": "process one application is going to contact the other application via the the binder IPC and it's actually going",
    "start": "4202159",
    "end": "4207320"
  },
  {
    "text": "to bind and and do calculate the result so the Fibonacci of 23 we get the data",
    "start": "4207320",
    "end": "4213040"
  },
  {
    "text": "and and and that's basically what it is so now what I can do is I can define a",
    "start": "4213040",
    "end": "4220159"
  },
  {
    "text": "permission um and then and I can statically protect this application so",
    "start": "4220159",
    "end": "4225880"
  },
  {
    "text": "let me zoom in so you guys can actually see um now there's only basically two",
    "start": "4225880",
    "end": "4231640"
  },
  {
    "text": "things that you must provide for permission one is the name and the name can be anything so you can just make it",
    "start": "4231640",
    "end": "4238360"
  },
  {
    "text": "up permission access right so I just made up a name for this permission and what I",
    "start": "4238360",
    "end": "4246080"
  },
  {
    "text": "uh should also uh provide is the protection level and protection level is going to be one of these couple of",
    "start": "4246080",
    "end": "4252920"
  },
  {
    "text": "different protection levels normal uh is a normal uh protection",
    "start": "4252920",
    "end": "4259719"
  },
  {
    "text": "usually doesn't even ask the user if you're going to Grant it or not it's more like hey there's a protect there's a there's a permission there that you",
    "start": "4259719",
    "end": "4265480"
  },
  {
    "text": "should use dangerous is the sorry dangerous is the permission that you actually get asked as a user to okay at",
    "start": "4265480",
    "end": "4273320"
  },
  {
    "text": "install time right we're not going to see this with a uh debug key signed apps",
    "start": "4273320",
    "end": "4279159"
  },
  {
    "text": "because uh uh it just doesn't uh it doesn't U makes they don't kind of want",
    "start": "4279159",
    "end": "4284560"
  },
  {
    "text": "to create a friction in the development time but uh when you download Angry Birds and it uses internet permission you're going to get prompted with this",
    "start": "4284560",
    "end": "4292159"
  },
  {
    "text": "signature um is essentially going to be automatically granted to the apps that are signed with the same key um so this",
    "start": "4292159",
    "end": "4298639"
  },
  {
    "text": "is where basically it becomes interesting how you can create a Federation of of your own application so you sign them with the same key and you",
    "start": "4298639",
    "end": "4305400"
  },
  {
    "text": "can enforce signature based permission and that's the only way they can get access um signature system is going to",
    "start": "4305400",
    "end": "4311480"
  },
  {
    "text": "be granted to those that are signning with the same key as well as those those that are baked into the platform so",
    "start": "4311480",
    "end": "4317199"
  },
  {
    "text": "essentially remember how I said they're the same apps but there's something uh that do the apps located in system app",
    "start": "4317199",
    "end": "4324360"
  },
  {
    "text": "folder can do more than standard apps and this is it right so in other words they're slightly more trusted because",
    "start": "4324360",
    "end": "4330360"
  },
  {
    "text": "somebody actually went out of the way to download these apps and and pre-install them on the platform and this is very",
    "start": "4330360",
    "end": "4336280"
  },
  {
    "text": "useful um in cases where you're building a ROM and you want to include third party apps uh but you don't have the",
    "start": "4336280",
    "end": "4343159"
  },
  {
    "text": "source and nor you can resign them system is just the system and development is development so I'm just",
    "start": "4343159",
    "end": "4348880"
  },
  {
    "text": "going to go with a with a signature level um application in this case so if I now Define a permission what I can do",
    "start": "4348880",
    "end": "4355840"
  },
  {
    "text": "next is I can enforce it so if I want to blanket protect this service what I can do is basically I can say this service",
    "start": "4355840",
    "end": "4362960"
  },
  {
    "text": "requires that permission so basically now nobody can access this service except those that have the permission to",
    "start": "4362960",
    "end": "4370199"
  },
  {
    "text": "to do so so if I reinstall this app so that install D picks this up and updates",
    "start": "4370199",
    "end": "4376159"
  },
  {
    "text": "that /data system/ permissions file that we've seen earlier um and if I rerun my",
    "start": "4376159",
    "end": "4384480"
  },
  {
    "text": "client um and I try to uh I basically I need to rebound bind it",
    "start": "4385320",
    "end": "4392320"
  },
  {
    "text": "so let me just do something really quick I'm going to touch my client so that I cause the rebuild and then I'm going to",
    "start": "4392320",
    "end": "4399560"
  },
  {
    "text": "run it so it gets reinstalled um and it just died right so",
    "start": "4399560",
    "end": "4405199"
  },
  {
    "text": "just crashed so and now if if you actually were going to look at um log",
    "start": "4405199",
    "end": "4411040"
  },
  {
    "text": "cat um you you would see that we got a security exception thrown somewhere here",
    "start": "4411040",
    "end": "4418239"
  },
  {
    "text": "so not allowed to buy to the service right so we basically BL blank and protected that service now if you wanted",
    "start": "4418239",
    "end": "4423600"
  },
  {
    "text": "to Grant access to our application but nobody else uh we would basically take",
    "start": "4423600",
    "end": "4429280"
  },
  {
    "text": "the same uh same application uh same U permission so this is the permission",
    "start": "4429280",
    "end": "4434679"
  },
  {
    "text": "that we in forcing right and if we go here then the client can now say that it",
    "start": "4434679",
    "end": "4443320"
  },
  {
    "text": "uses permission with the name that so now the client says that then um in case",
    "start": "4443320",
    "end": "4450760"
  },
  {
    "text": "of a dangerous it's going to prop the user in case of a signature the system is just going to compare the signatures",
    "start": "4450760",
    "end": "4457280"
  },
  {
    "text": "uh the part of the system that's going to do that is basically the activity manager when it's starting it so it's going to basically say hey is this guy",
    "start": "4457280",
    "end": "4463320"
  },
  {
    "text": "allowed to start and so if I restart put some number use calculate Fibonacci uh",
    "start": "4463320",
    "end": "4469760"
  },
  {
    "text": "there's there The Client Service uh works again right so so that's uh so",
    "start": "4469760",
    "end": "4476080"
  },
  {
    "text": "that's working um in this case so that was a static permission in enforcement",
    "start": "4476080",
    "end": "4482440"
  },
  {
    "text": "um so that's basically what we talked about you can kind of read on your own um what we can also do is we can",
    "start": "4482440",
    "end": "4490159"
  },
  {
    "text": "dynamically enforce permissions and this is what the operating system uh does all the time so in other words operating",
    "start": "4490159",
    "end": "4496120"
  },
  {
    "text": "system doesn't say hey U you just don't have access to location service at all",
    "start": "4496120",
    "end": "4501800"
  },
  {
    "text": "right uh that would be that would be kind of tough for them to even Implement uh uh in in the on the system level",
    "start": "4501800",
    "end": "4508280"
  },
  {
    "text": "everyone's got access to every single system service but then the system service itself is going to enforce the",
    "start": "4508280",
    "end": "4514000"
  },
  {
    "text": "permissions so in other words it's doing that dynamically so for example everyone",
    "start": "4514000",
    "end": "4519480"
  },
  {
    "text": "can buy into a location service it's actually pre-bound but that's beside the point um",
    "start": "4519480",
    "end": "4525719"
  },
  {
    "text": "but depending on what kind of a location you want we can dynamically determine if",
    "start": "4525719",
    "end": "4531199"
  },
  {
    "text": "you have rights to access GPS versus mobile network right so that's done dynamically so essentially again our",
    "start": "4531199",
    "end": "4538040"
  },
  {
    "text": "client our service right let's say it's location service or Food Service it doesn't really matter um so let's say I",
    "start": "4538040",
    "end": "4545520"
  },
  {
    "text": "have some native piece of code likeo file native Library so if my",
    "start": "4545520",
    "end": "4550960"
  },
  {
    "text": "activity wants to go native um it can everything's fine with that but just the",
    "start": "4550960",
    "end": "4556600"
  },
  {
    "text": "fact that we have cc++ code in our app does this is underprivileged app right so not some a47 right it doesn't mean",
    "start": "4556600",
    "end": "4564360"
  },
  {
    "text": "that this app can now have access to some driver right the kernel is going to block that the colonel is going to block",
    "start": "4564360",
    "end": "4570679"
  },
  {
    "text": "that because U event D sets the permissions on/ Dev right so so basically your lib is not going to have",
    "start": "4570679",
    "end": "4577760"
  },
  {
    "text": "access to that right so that's not how the system works uh the way the system usually works um or most of the system",
    "start": "4577760",
    "end": "4584520"
  },
  {
    "text": "services is system services are running under the system user right or some kind",
    "start": "4584520",
    "end": "4589880"
  },
  {
    "text": "of privileged user so this privileged user is going to have access to that",
    "start": "4589880",
    "end": "4595719"
  },
  {
    "text": "driver that you want let's say GPS for instance right so so there is going to be a Leb GPS for instance there's going",
    "start": "4595719",
    "end": "4603120"
  },
  {
    "text": "to be a wrapper some you know location something something. CPP file um there's",
    "start": "4603120",
    "end": "4608440"
  },
  {
    "text": "going to be a Java file that's going to provide access to that jni file U and then we're going to have a location",
    "start": "4608440",
    "end": "4615719"
  },
  {
    "text": "manager uh which is misnamed for location service so we're going to basically uh have location service uh",
    "start": "4615719",
    "end": "4623719"
  },
  {
    "text": "here now what's going to happen is when you want to access it uh the the location manager here it's going to ask",
    "start": "4623719",
    "end": "4630679"
  },
  {
    "text": "by the binder it's going to basically want to access that and the permissions permissions are going to be checked at",
    "start": "4630679",
    "end": "4637120"
  },
  {
    "text": "the context level so the context is basically going to enforce the permissions dynamically so the context",
    "start": "4637120",
    "end": "4642360"
  },
  {
    "text": "is the one that owns The Binding between the client in the server and it can actually enforce that um so the so um",
    "start": "4642360",
    "end": "4650199"
  },
  {
    "text": "I'll kind of u u let's say let me just kind of give you a quick example so in my client server example if I created",
    "start": "4650199",
    "end": "4657639"
  },
  {
    "text": "another permission I'm going to copy paste this one I'll create a permission to access",
    "start": "4657639",
    "end": "4664719"
  },
  {
    "text": "um um I'll call it access uh uh Native",
    "start": "4664719",
    "end": "4670520"
  },
  {
    "text": "so for example I'm going to do a dynamic permission check depending on if which",
    "start": "4670520",
    "end": "4678679"
  },
  {
    "text": "algorithm you want to use right so now inside of my service so let me just find",
    "start": "4678679",
    "end": "4684199"
  },
  {
    "text": "my service implementation so I'm not using unlike before where I blanket protected the",
    "start": "4684199",
    "end": "4690199"
  },
  {
    "text": "entire service I'm not going to do that I'm going to be dynamically checking this permission so what I'm going to do is inside of my Java file and it's",
    "start": "4690199",
    "end": "4697360"
  },
  {
    "text": "usually done at the Java level um I am going to uh when I handle for example",
    "start": "4697360",
    "end": "4706400"
  },
  {
    "text": "uh Native method so this is a call to a native call I think I have a couple of calls here but uh let's let me just",
    "start": "4706400",
    "end": "4713520"
  },
  {
    "text": "protect for example native uh Native iterative so what I can do is I can",
    "start": "4713520",
    "end": "4719960"
  },
  {
    "text": "check um um in this case do we actually have the context um in this case we",
    "start": "4719960",
    "end": "4726719"
  },
  {
    "text": "actually don't have the context um should have passed the context in um Let",
    "start": "4726719",
    "end": "4732360"
  },
  {
    "text": "me let me do this um um so as opposed to typing all that just in interest of",
    "start": "4732360",
    "end": "4739199"
  },
  {
    "text": "time um let me uh switch to actually have Branch um",
    "start": "4739199",
    "end": "4748960"
  },
  {
    "text": "so basically what I would do if I had context let me just fine it I don't have",
    "start": "4748960",
    "end": "4754360"
  },
  {
    "text": "it uh private context context um what I would",
    "start": "4754360",
    "end": "4761080"
  },
  {
    "text": "do is I would check with context",
    "start": "4761080",
    "end": "4766440"
  },
  {
    "text": "check self um check calling or self permission",
    "start": "4766600",
    "end": "4772199"
  },
  {
    "text": "so basically I would enforce a permission here right and basically check is the caller allowed to even call",
    "start": "4772199",
    "end": "4779560"
  },
  {
    "text": "this permission and I would basically compare that to a package",
    "start": "4779560",
    "end": "4786320"
  },
  {
    "text": "manager dot organize Imports uh",
    "start": "4786320",
    "end": "4793719"
  },
  {
    "text": "zoom in so you guys can see uh permission granted for example so unless we have a permission granted right um",
    "start": "4797000",
    "end": "4804719"
  },
  {
    "text": "I'm not going to let this go further so what I would typically do is throw um",
    "start": "4804719",
    "end": "4810760"
  },
  {
    "text": "throw new secure",
    "start": "4810760",
    "end": "4813880"
  },
  {
    "text": "exception right something like that so so now um the only thing that's missing",
    "start": "4817600",
    "end": "4824400"
  },
  {
    "text": "in this guy is basically a public Constructor to actually pass in the",
    "start": "4824400",
    "end": "4829800"
  },
  {
    "text": "context CU I context",
    "start": "4829800",
    "end": "4834679"
  },
  {
    "text": "context and there that context is context so",
    "start": "4837560",
    "end": "4843760"
  },
  {
    "text": "um so basically if we now create this with a passing a this in here um we're",
    "start": "4843760",
    "end": "4851320"
  },
  {
    "text": "now dynamically enforcing this permission so yeah so so now if I try to run if I",
    "start": "4851320",
    "end": "4859199"
  },
  {
    "text": "install this service and I'm going to run my client really",
    "start": "4859199",
    "end": "4865560"
  },
  {
    "text": "briefly and if I run my uh Java uh Java algorithm I get the result but if I run",
    "start": "4867360",
    "end": "4874360"
  },
  {
    "text": "my native algorithm it dies right and if you look",
    "start": "4874360",
    "end": "4879480"
  },
  {
    "text": "at the the log cat you would basically see that we threw a this is not my per",
    "start": "4879480",
    "end": "4886080"
  },
  {
    "text": "this is somebody else's uh but we would see that we have a go away security permission in there",
    "start": "4886080",
    "end": "4893120"
  },
  {
    "text": "so that was dynamically enforced right um so so this is um I'm not just making",
    "start": "4893120",
    "end": "4899159"
  },
  {
    "text": "this up hey this is interesting and and you know cool but this is actually how the system does it all the time so if",
    "start": "4899159",
    "end": "4905440"
  },
  {
    "text": "you look at for example the vibrator service right so they're going to uh do exactly the same thing they're going to",
    "start": "4905440",
    "end": "4911840"
  },
  {
    "text": "basically say if you want to vibrate this phone we're going to first check dynamically that via the context that",
    "start": "4911840",
    "end": "4918880"
  },
  {
    "text": "you actually have the vibrate permission right so this is a simple example and if you don't it's just going to throw a",
    "start": "4918880",
    "end": "4924080"
  },
  {
    "text": "secure exception so that's one example um um location it's an one that's most",
    "start": "4924080",
    "end": "4930239"
  },
  {
    "text": "people are familiar with does exactly the same thing so there's going to be a private method called check oops check",
    "start": "4930239",
    "end": "4936040"
  },
  {
    "text": "permissions that's called by pretty much every single API and what it does is basically says you know do you does the",
    "start": "4936040",
    "end": "4944159"
  },
  {
    "text": "caller have GPS if the provider is GPS does the call caller have the permission to to",
    "start": "4944159",
    "end": "4949800"
  },
  {
    "text": "contact that and if not it's going to throw a specific security exception for for U for example location manager",
    "start": "4949800",
    "end": "4958040"
  },
  {
    "text": "so um so that's what we just talked about custom permissions and what the levels are you can kind of read that on",
    "start": "4958040",
    "end": "4964000"
  },
  {
    "text": "your own adding custom permission this is that example that we just uh walk",
    "start": "4964000",
    "end": "4969239"
  },
  {
    "text": "through so basically we have our service that was enforcing some kind of permission both stattic and dynamically",
    "start": "4969239",
    "end": "4975920"
  },
  {
    "text": "right and it actually had a native code that was uh in this case calcul calculating Fibonacci but it could have",
    "start": "4975920",
    "end": "4982520"
  },
  {
    "text": "been accessing a driver that typically would be off limits to any other application um so so that's the design",
    "start": "4982520",
    "end": "4990560"
  },
  {
    "text": "of that and this is all spelled out in detail so you guys can kind of go through that I know I went through it a little fast uh just in terms of uh",
    "start": "4990560",
    "end": "4998880"
  },
  {
    "text": "because of the time um content providers also have permissions what's different about content ERS is that there are two",
    "start": "4998880",
    "end": "5005520"
  },
  {
    "text": "permissions they're based on read and write so um so basically you can grant a read permission or you can grant a write",
    "start": "5005520",
    "end": "5011800"
  },
  {
    "text": "permission so that's the significance of that um public versus private components",
    "start": "5011800",
    "end": "5018239"
  },
  {
    "text": "um so traditionally in Android when you define a component by default it's",
    "start": "5018239",
    "end": "5025320"
  },
  {
    "text": "exported which means that this this component is now available to everyone and for longest time that was not a",
    "start": "5025320",
    "end": "5031800"
  },
  {
    "text": "problem right so basically if I had a this service here",
    "start": "5031800",
    "end": "5038040"
  },
  {
    "text": "um and unless I had the permission so if I take this permission out um that was",
    "start": "5038040",
    "end": "5044639"
  },
  {
    "text": "not a problem before but what you're seeing now is the tiny little warning they started to actually give you a warning that that basically says",
    "start": "5044639",
    "end": "5051239"
  },
  {
    "text": "exported service does not require permissions so now they're saying hey you know this is something that's potentially dangerous you're basically",
    "start": "5051239",
    "end": "5057440"
  },
  {
    "text": "leaking uh to the entire system your intent filter in other words every single component on the device if it",
    "start": "5057440",
    "end": "5064120"
  },
  {
    "text": "knows the intent filter which is you know readily available in a in a readable manifest file uh can start or",
    "start": "5064120",
    "end": "5071040"
  },
  {
    "text": "stop or bind to this service or launch an activity that's not meant to be launched from outside and so on so so",
    "start": "5071040",
    "end": "5077960"
  },
  {
    "text": "that's that's a security concern uh so luckily Eclipse now started giving you at least the warning but the solution to",
    "start": "5077960",
    "end": "5084320"
  },
  {
    "text": "that is to basically just say export it false for the components that you do not",
    "start": "5084320",
    "end": "5089400"
  },
  {
    "text": "want to expose uh publicly uh what should be the most most components",
    "start": "5089400",
    "end": "5094440"
  },
  {
    "text": "unless you're specifically Expo exposing in publicly so this should actually be the default would make sense to be the",
    "start": "5094440",
    "end": "5100320"
  },
  {
    "text": "reverse but just because the way they architected it were carrying the baggage of of that with",
    "start": "5100320",
    "end": "5106360"
  },
  {
    "text": "us so that's a little bit about exported uh uh components uh intent broadcast uh",
    "start": "5106360",
    "end": "5112800"
  },
  {
    "text": "broadcasts are slightly different um they um so basically if you send a broadcast it goes to everyone unless you",
    "start": "5112800",
    "end": "5120600"
  },
  {
    "text": "specify the permission so sometimes people do sometimes people don't but you can can basically enforce who is allowed",
    "start": "5120600",
    "end": "5127239"
  },
  {
    "text": "to uh to get that broadcast in other words which receiver can be on the receiving side uh this um so if you",
    "start": "5127239",
    "end": "5135320"
  },
  {
    "text": "specify that then the receiver actually must say must own the permission to to get that uh",
    "start": "5135320",
    "end": "5141920"
  },
  {
    "text": "broadcast and um and if it doesn't it's actually not even going to know that it doesn't uh C permission in other words",
    "start": "5141920",
    "end": "5149440"
  },
  {
    "text": "you don't as a receiver you don't get you know nobody knocks at your door and says hey there something for you can't",
    "start": "5149440",
    "end": "5155119"
  },
  {
    "text": "tell you what it is uh just you just don't know what you don't need to know right so uh so that's kind of how the",
    "start": "5155119",
    "end": "5161679"
  },
  {
    "text": "receivers is likely different unlike an activity if you try to do something you're not allowed to do like connect to",
    "start": "5161679",
    "end": "5166880"
  },
  {
    "text": "Internet it's just going to blow up in your face and it's going to say hey you don't have a security perm you don't have the internet permission you have",
    "start": "5166880",
    "end": "5172920"
  },
  {
    "text": "did you forget to to to specify so it's more of a uh it's more informative in",
    "start": "5172920",
    "end": "5178320"
  },
  {
    "text": "that case uh but given the nature of receivers uh any information would be",
    "start": "5178320",
    "end": "5183400"
  },
  {
    "text": "too much information so that's why they don't do it which makes sense uh pending intents are",
    "start": "5183400",
    "end": "5189920"
  },
  {
    "text": "interesting uh for those of you who haven't used the pending intent is basically an intent plus the action on",
    "start": "5189920",
    "end": "5195920"
  },
  {
    "text": "that intent that's kind of wrapped up and meant for somebody else to activate it at some future point in time um so",
    "start": "5195920",
    "end": "5202679"
  },
  {
    "text": "the ownership or the identity of that pending intent is owned by whoever created it so so that's that's an",
    "start": "5202679",
    "end": "5208360"
  },
  {
    "text": "interesting uh thing and that's usually the way you want it uh although the one that's actually activating the intent or",
    "start": "5208360",
    "end": "5215440"
  },
  {
    "text": "pending intent or triggering it can also fill in some information on that as well so that's a little bit about the",
    "start": "5215440",
    "end": "5222040"
  },
  {
    "text": "application Level uh application Level uh security uh that's kind of interesting new stuff in Android um what",
    "start": "5222040",
    "end": "5230159"
  },
  {
    "text": "I want to go through is data security uh so uh basically Android provides uh encryption",
    "start": "5230159",
    "end": "5237239"
  },
  {
    "text": "uh the different levels of encryption at different parts of the stack uh so data encryption exists as as part the op SSL",
    "start": "5237239",
    "end": "5246520"
  },
  {
    "text": "uh in the native Library so it's in lib U System lib open lib SSL um what",
    "start": "5246520",
    "end": "5253560"
  },
  {
    "text": "basically it provides um in in conjunction with the Java bouncy CLE which is basically the Java",
    "start": "5253560",
    "end": "5259199"
  },
  {
    "text": "implementation of the Java cryptography uh extension it provides uh public uh",
    "start": "5259199",
    "end": "5265880"
  },
  {
    "text": "provides public private key encryption so you can basically um use it to to open up uh the um the you know do the",
    "start": "5265880",
    "end": "5274360"
  },
  {
    "text": "management um and and so on so this is an example of how to do https um",
    "start": "5274360",
    "end": "5279639"
  },
  {
    "text": "connection or SSL connection um you um this is how you would read from from HTP so so that's",
    "start": "5279639",
    "end": "5287320"
  },
  {
    "text": "that's provided um on the platform um we have an example that just shows how to",
    "start": "5287320",
    "end": "5295199"
  },
  {
    "text": "use cryptography Library itself so um all these examp examples by the way are",
    "start": "5295199",
    "end": "5300400"
  },
  {
    "text": "available at github.com marakana so they're about couple of hundred or about",
    "start": "5300400",
    "end": "5305920"
  },
  {
    "text": "100 uh little open source examples so this one is called secure note what it basically does is it uses the uh the",
    "start": "5305920",
    "end": "5314199"
  },
  {
    "text": "crypto Library the bouncy castle U and it uses it to encrypt the message so I",
    "start": "5314199",
    "end": "5319960"
  },
  {
    "text": "could basically create a message I could say this is U secret right um I can save",
    "start": "5319960",
    "end": "5326320"
  },
  {
    "text": "this message what what it's going to do it's going to ask me to generate a",
    "start": "5326320",
    "end": "5331600"
  },
  {
    "text": "basically the key the seat not the key itself but the seed for a key so I'll say um uh",
    "start": "5331600",
    "end": "5340280"
  },
  {
    "text": "secret secret right so if I do okay uh we're going to use this password to",
    "start": "5340280",
    "end": "5347840"
  },
  {
    "text": "generate a key and we're going to use that key to actually encrypt this message and store it so now if I close",
    "start": "5347840",
    "end": "5353400"
  },
  {
    "text": "this application actually do a total close and then if I re try to reread",
    "start": "5353400",
    "end": "5359520"
  },
  {
    "text": "this data from secure note it's going to ask me for that password if if I mistype",
    "start": "5359520",
    "end": "5364800"
  },
  {
    "text": "it uh the message stays uh secret if I try",
    "start": "5364800",
    "end": "5370280"
  },
  {
    "text": "again can I actually try again I guess uh I need to restart it and if I",
    "start": "5370280",
    "end": "5376320"
  },
  {
    "text": "actually type secret uh it's going to decrypt it so this is the this is the uh",
    "start": "5376320",
    "end": "5382639"
  },
  {
    "text": "that's so that's you know the message to be uh stored so the code for that is let me just close all",
    "start": "5382639",
    "end": "5390480"
  },
  {
    "text": "this uh so that's using the bouncy castle and jce U to to do that so we",
    "start": "5391400",
    "end": "5397119"
  },
  {
    "text": "basically have a little Crypt utility to generate Keys um that's creating that's creating",
    "start": "5397119",
    "end": "5404320"
  },
  {
    "text": "the secure random um uh secure random object it's basically getting the seed",
    "start": "5404320",
    "end": "5411199"
  },
  {
    "text": "the seed is based on the on the on the secret and then we're using that as the key and then L later on to encrypt and",
    "start": "5411199",
    "end": "5418920"
  },
  {
    "text": "thec decrypt we're using the cipher that was generated based on that key and based on that seed um so that now",
    "start": "5418920",
    "end": "5426080"
  },
  {
    "text": "becomes how we um encrypt and decrypt the the message so the entire you know",
    "start": "5426080",
    "end": "5431960"
  },
  {
    "text": "this is the this is the crypto part of that application everything else is the UI so it's not as significant from",
    "start": "5431960",
    "end": "5438639"
  },
  {
    "text": "security standpoint so this is the encrypt using that Cipher so we basically need the cipher and we encrypt",
    "start": "5438639",
    "end": "5445760"
  },
  {
    "text": "encrypt it and we do the opposite in the Crypt right so so that's using the the built-in uh the built-in libraries uh",
    "start": "5445760",
    "end": "5453159"
  },
  {
    "text": "that are part of the Android uh Android so that's the code for that um there's a whole dis encryption",
    "start": "5453159",
    "end": "5460440"
  },
  {
    "text": "so this is now the operating system level um that's that that was introduced on uh in 3.0 it's been improved since",
    "start": "5460440",
    "end": "5467199"
  },
  {
    "text": "but basically what it does is provides for the encryption encryption of the onara file system encrypts your data",
    "start": "5467199",
    "end": "5472840"
  },
  {
    "text": "partition your SD card um it uh um it's um um it it's slow we did we've done",
    "start": "5472840",
    "end": "5481119"
  },
  {
    "text": "some um analysis on this um so what we've done is uh we did a a writing of 1",
    "start": "5481119",
    "end": "5487320"
  },
  {
    "text": "gigabyte of data uh just to kind of time it and it took about 100 seconds 103",
    "start": "5487320",
    "end": "5493320"
  },
  {
    "text": "seconds to be precise um and then what we did is we did a reading of 1 gigabyte of data and it took about uh 45 46",
    "start": "5493320",
    "end": "5501400"
  },
  {
    "text": "seconds so 145 roughly right um after encryption so we repeated the same thing",
    "start": "5501400",
    "end": "5508600"
  },
  {
    "text": "so uh the reading took 107 seconds so",
    "start": "5508600",
    "end": "5513679"
  },
  {
    "text": "it's not that sorry the writing so it's not that much you're only you're looking at 3% degradation in speed right but",
    "start": "5513679",
    "end": "5520880"
  },
  {
    "text": "reading the encrypted data uh took 70 seconds in other words it was about half as slow uh in terms of performance um so",
    "start": "5520880",
    "end": "5529880"
  },
  {
    "text": "there's a little bit of a hit sure you can turn on the encryption of the file entire file system you're going to pay the penalty in performance um and U and",
    "start": "5529880",
    "end": "5538239"
  },
  {
    "text": "that's basically U what it is this was done you know some time ago on Galaxy Nexus that we prefer on this um the",
    "start": "5538239",
    "end": "5546239"
  },
  {
    "text": "they've been improving this since um so let me see um in 4.1 and two they",
    "start": "5546239",
    "end": "5554119"
  },
  {
    "text": "actually changed it a little bit so the the the performance got improved but I actually don't have the exact data um",
    "start": "5554119",
    "end": "5561040"
  },
  {
    "text": "what the numbers are on that um VPN there's been a change to VPN um you may",
    "start": "5561040",
    "end": "5568360"
  },
  {
    "text": "recall that for a while VPN was was based on raccoon framework and was basically uh inched into operating",
    "start": "5568360",
    "end": "5575280"
  },
  {
    "text": "system there was even quotes from Andy Rubin that they're never going to expose it because um it represents a major kind",
    "start": "5575280",
    "end": "5582480"
  },
  {
    "text": "of surgery to the operating system and security issue um but this was something that was kind of blocking Android from",
    "start": "5582480",
    "end": "5587960"
  },
  {
    "text": "becoming a serious Enterprise device because there was no VPN support for any meaningful VPN uh protocols uh so in ic",
    "start": "5587960",
    "end": "5596440"
  },
  {
    "text": "they basically provided a way for apps to essentially hot swap uh VPN so that",
    "start": "5596440",
    "end": "5601920"
  },
  {
    "text": "you could download Cisco VPN for example and install it um so the the way that",
    "start": "5601920",
    "end": "5607199"
  },
  {
    "text": "works is now there's a a system warning so when you actually want to do something that's potentially dangerous it pops up a a message says hey are you",
    "start": "5607199",
    "end": "5614520"
  },
  {
    "text": "sure you want to do this it's going to allow this app to basically control the entire uh access to to network",
    "start": "5614520",
    "end": "5621320"
  },
  {
    "text": "communication um so that's that's uh that's about VPN key store keychain apis",
    "start": "5621320",
    "end": "5627600"
  },
  {
    "text": "they've been built into Android since 1 1.6 it got facelifted 4.0 but basically",
    "start": "5627600",
    "end": "5634840"
  },
  {
    "text": "uh it's it's your management of systemwide management of key stores it's used for you know storing everything",
    "start": "5634840",
    "end": "5640199"
  },
  {
    "text": "from U your certificates and you know things like that um so that's part of",
    "start": "5640199",
    "end": "5645840"
  },
  {
    "text": "the operating system um App application enry encryption we talked about that",
    "start": "5645840",
    "end": "5650920"
  },
  {
    "text": "briefly um so uh roting I know this is a a topic",
    "start": "5650920",
    "end": "5656159"
  },
  {
    "text": "that a lot of you are often interested in um so um we mentioned this earlier",
    "start": "5656159",
    "end": "5662840"
  },
  {
    "text": "typical Android device is not rooted uh you probably don't want it to be or you don't probably don't want users to have",
    "start": "5662840",
    "end": "5668719"
  },
  {
    "text": "a rooted device to begin with uh so basically the the the key to essentially",
    "start": "5668719",
    "end": "5674719"
  },
  {
    "text": "unrooting or uh getting access to root on a system would be to remount your",
    "start": "5674719",
    "end": "5680320"
  },
  {
    "text": "your system partition um so it could be something as simple as you know Mount like this um and basically specify read",
    "start": "5680320",
    "end": "5687320"
  },
  {
    "text": "write right of course this would fail unless you have root to begin with so it's a it's a cach 22 uh but if if you",
    "start": "5687320",
    "end": "5694639"
  },
  {
    "text": "were able to do that you could then basically create an Su command chod it and give it rights and then you could",
    "start": "5694639",
    "end": "5700800"
  },
  {
    "text": "repackage your fault system to to be uh to be um read only again uh but again",
    "start": "5700800",
    "end": "5707159"
  },
  {
    "text": "the catches you you can't remount this partition once it's in it mounted to",
    "start": "5707159",
    "end": "5712960"
  },
  {
    "text": "begin with so um so um and the reason for that is",
    "start": "5712960",
    "end": "5718440"
  },
  {
    "text": "again because it's booty that way so if you were able to do remount that would have to be done um before the init run",
    "start": "5718440",
    "end": "5726360"
  },
  {
    "text": "so in other words before the col kernel starts so most of these rooting uh procedures are done at a boot loader",
    "start": "5726360",
    "end": "5733119"
  },
  {
    "text": "level so basically before uh the kernel even got booted um now if you have a",
    "start": "5733119",
    "end": "5739880"
  },
  {
    "text": "rooted device um the problem is that now everyone has access to root and that's",
    "start": "5739880",
    "end": "5745080"
  },
  {
    "text": "why you don't usually want that because any random app can just do whatever it wants right um so um once sort of work",
    "start": "5745080",
    "end": "5754560"
  },
  {
    "text": "around that is to use the the super user app so there's there's an app that's kind of going to provide meta",
    "start": "5754560",
    "end": "5760639"
  },
  {
    "text": "provisioning of what you can or cannot do is just an appy download from the market so in other words you have root",
    "start": "5760639",
    "end": "5767600"
  },
  {
    "text": "but now every time somebody tries to do su uh it goes through that app and the app War warns you as the user and says",
    "start": "5767600",
    "end": "5774040"
  },
  {
    "text": "hey do you grant pseudo to such and such uh um application so that's kind of one",
    "start": "5774040",
    "end": "5779800"
  },
  {
    "text": "work around that um but again um you know you would have to kind of worry about that um these are some other um",
    "start": "5779800",
    "end": "5788480"
  },
  {
    "text": "exploits uh that that we know about so you Dev exploit um so that's been that's",
    "start": "5788480",
    "end": "5794679"
  },
  {
    "text": "been patched uh ADB um uh set you ID uh",
    "start": "5794679",
    "end": "5800560"
  },
  {
    "text": "exhaust attack U basically ADB wasn't wasn't checking um for set u ID so after",
    "start": "5800560",
    "end": "5808480"
  },
  {
    "text": "a while you could actually change the the uid on it um this is zygote attempt",
    "start": "5808480",
    "end": "5815199"
  },
  {
    "text": "um U um zygote um um basically um um exploit also to do with a set",
    "start": "5815199",
    "end": "5822440"
  },
  {
    "text": "ID Ashman protect um attacks so these are all known attacks this is in from",
    "start": "5822440",
    "end": "5829560"
  },
  {
    "text": "4.3 from from ginger bread uh buffer overun overruns for VA D so that's",
    "start": "5829560",
    "end": "5835719"
  },
  {
    "text": "another exploit so just going to kind of list them up um so this is the just the",
    "start": "5835719",
    "end": "5841679"
  },
  {
    "text": "um the Linux Loc privilege escalation uh attack attack that was",
    "start": "5841679",
    "end": "5847880"
  },
  {
    "text": "provided um drivers this is specific to Samsung so Samsung basically had a",
    "start": "5847880",
    "end": "5853360"
  },
  {
    "text": "driver that uh uh the physical memory manager that was set to be readable and writable by all uh so so that was uh so",
    "start": "5853360",
    "end": "5861840"
  },
  {
    "text": "that was basically an exploit uh that was specific to Samsung and um you know",
    "start": "5861840",
    "end": "5867719"
  },
  {
    "text": "was used by their camera and their GRC huls so so that's a little bit about that uh",
    "start": "5867719",
    "end": "5874080"
  },
  {
    "text": "exploit web kit again it's an exploit of the specific Library um it not it's not",
    "start": "5874080",
    "end": "5879880"
  },
  {
    "text": "just specific to Android it actually also have to do with iOS um and again",
    "start": "5879880",
    "end": "5885400"
  },
  {
    "text": "it's based on Buffer overuns uh it's not it doesn't give you a root but what it",
    "start": "5885400",
    "end": "5890560"
  },
  {
    "text": "does is it allows you to basically have your browser execute um an application so it sandbox within that application",
    "start": "5890560",
    "end": "5898080"
  },
  {
    "text": "but still it's a you know pre-installed app and was patched in 2.2 uh so the you",
    "start": "5898080",
    "end": "5905639"
  },
  {
    "text": "know the the point the the the point about rooting is you know that Android is designed in such a way that um you",
    "start": "5905639",
    "end": "5913040"
  },
  {
    "text": "don't really know who the apps really come from uh the signature uh system only guarantees that you know the owner",
    "start": "5913040",
    "end": "5920480"
  },
  {
    "text": "of the the signature can only update the apps but it doesn't really tell you who the owner really is so there's no",
    "start": "5920480",
    "end": "5926119"
  },
  {
    "text": "certified Authority or anything like that so once you have a rooted device um you basically have the problem of",
    "start": "5926119",
    "end": "5932199"
  },
  {
    "text": "managing all this un trusted apps that come from third parties that we don't really know much about so so that's you",
    "start": "5932199",
    "end": "5938080"
  },
  {
    "text": "know that's something to worry about um so those exploits then become really hard to to to to track uh and attack uh",
    "start": "5938080",
    "end": "5945639"
  },
  {
    "text": "one of the systems we mentioned is uh is the uh um super user app but that's just",
    "start": "5945639",
    "end": "5953159"
  },
  {
    "text": "you know it doesn't really do all the Justice um and there also many malware root root kits that that are available",
    "start": "5953159",
    "end": "5960199"
  },
  {
    "text": "there so um OEM carriers are usually not all of them but they're usually slow about providing the the updates and and",
    "start": "5960199",
    "end": "5967080"
  },
  {
    "text": "patching those exploits so um so that's basically a little bit about uh the the",
    "start": "5967080",
    "end": "5972599"
  },
  {
    "text": "known uh known exploits of the um of the",
    "start": "5972599",
    "end": "5977760"
  },
  {
    "text": "root so so that's something to think about before providing a roting device um a little bit about device",
    "start": "5977760",
    "end": "5984119"
  },
  {
    "text": "Administration this is an interesting API that was uh provided by Google couple years ago and kind of it's a",
    "start": "5984119",
    "end": "5990880"
  },
  {
    "text": "little bit went quiet not a lot of people know about it but but um basically the the premise behind uh this",
    "start": "5990880",
    "end": "5997159"
  },
  {
    "text": "is that Google essentially said look you know um in Corporate America today most",
    "start": "5997159",
    "end": "6002719"
  },
  {
    "text": "people have two phones right you have your personal Android phone or iOS and then you have usually some company issue",
    "start": "6002719",
    "end": "6009520"
  },
  {
    "text": "Blackberry it used to be Blackberry but some kind of corporate device and you need to use one for work the other one",
    "start": "6009520",
    "end": "6015760"
  },
  {
    "text": "for personal stuff uh so they basically said look you know we see the future as you have a single device and it's it's",
    "start": "6015760",
    "end": "6021920"
  },
  {
    "text": "your home it's your personal device and you're going to use this device to download you know Angry Birds and some",
    "start": "6021920",
    "end": "6027840"
  },
  {
    "text": "malware and spyware and apps like that and they're going to go to work and you're going to access your private",
    "start": "6027840",
    "end": "6033719"
  },
  {
    "text": "corporate secure network with the same device um and they say there's a way to do that so what they've done is they",
    "start": "6033719",
    "end": "6039920"
  },
  {
    "text": "basically provided a plumbing the framework to administer devices to manage a fleet of devices right uh just",
    "start": "6039920",
    "end": "6047440"
  },
  {
    "text": "to kind of give you an example um we we run entire business on on uh on um uh",
    "start": "6047440",
    "end": "6053800"
  },
  {
    "text": "Google uh apps and so basically what I can do I have my couple of my devices",
    "start": "6053800",
    "end": "6058960"
  },
  {
    "text": "here what I can do is I can basically um I can locate my device um I can if it's",
    "start": "6058960",
    "end": "6065960"
  },
  {
    "text": "on a network um I can even um if I'm on a network um I can try to",
    "start": "6065960",
    "end": "6073480"
  },
  {
    "text": "locate it um of course I have GPS issues here I can ring the device but right now",
    "start": "6073480",
    "end": "6078760"
  },
  {
    "text": "my device is probably on a silent mode so I'm not sure if it's actually going to make uh any",
    "start": "6078760",
    "end": "6084119"
  },
  {
    "text": "uh sound uh but we'll find out when it actually gets located so it's still trying to locate the device um sorry I'm",
    "start": "6084119",
    "end": "6092440"
  },
  {
    "text": "loting the wrong device oops",
    "start": "6092440",
    "end": "6100080"
  },
  {
    "text": "so so so so basically",
    "start": "6100159",
    "end": "6108960"
  },
  {
    "text": "just um but the point is I can remotely ident I can remotely find my my device I can remotely reset my device um Etc so",
    "start": "6109280",
    "end": "6116560"
  },
  {
    "text": "that's that's kind of the the gist of uh this this framework um so um it",
    "start": "6116560",
    "end": "6122840"
  },
  {
    "text": "basically consists of couple of things um and we actually wrote an example how to write um an Administration to a",
    "start": "6122840",
    "end": "6130679"
  },
  {
    "text": "device um but essentially uh you're creating an app that's essentially a super app right this app not only has",
    "start": "6130679",
    "end": "6137400"
  },
  {
    "text": "permissions but it can actually enforce policies now policies are Way Beyond",
    "start": "6137400",
    "end": "6142560"
  },
  {
    "text": "quite different than permissions they allow uh an app to do things like wiod",
    "start": "6142560",
    "end": "6148080"
  },
  {
    "text": "the entire device right uh disable camera log the screen the next version",
    "start": "6148080",
    "end": "6153199"
  },
  {
    "text": "they're going to actually self-destruct it so I heard um so so there are lots of kind of like you know uh things that you",
    "start": "6153199",
    "end": "6159199"
  },
  {
    "text": "can do um well actually not that many it's about half a dozen things right so we're going to kind of take take a look",
    "start": "6159199",
    "end": "6165639"
  },
  {
    "text": "at that so basically what you can do via policies is you can set maximum inactivity uh minimum number of password",
    "start": "6165639",
    "end": "6172119"
  },
  {
    "text": "attempts um maximum number of failed password attempts um you know how long the password is uh when does it expire",
    "start": "6172119",
    "end": "6179599"
  },
  {
    "text": "and some history restrictions and so on uh they added a restriction a policy for",
    "start": "6179599",
    "end": "6184800"
  },
  {
    "text": "a camera in uh IC uh that was probably a request of DOD and um and that's that's",
    "start": "6184800",
    "end": "6192199"
  },
  {
    "text": "that's about it so so what your app does is these are kind of the moving parts of",
    "start": "6192199",
    "end": "6198239"
  },
  {
    "text": "the app I'm not going to um you know go through that um because we don't have time but essentially defining a receiver",
    "start": "6198239",
    "end": "6204880"
  },
  {
    "text": "I can actually run this app and again it's available in our GitHub tree um so",
    "start": "6204880",
    "end": "6210040"
  },
  {
    "text": "let me kind of run it so what this app is going to do is it's going to say hey",
    "start": "6210040",
    "end": "6215880"
  },
  {
    "text": "I would like to become an administrator of your device so this is this is where",
    "start": "6215880",
    "end": "6221800"
  },
  {
    "text": "you're basically about to give the app super rights right and this is",
    "start": "6221800",
    "end": "6227080"
  },
  {
    "text": "essentially what you would trade as your privacy if you want to take your personal device to say your company",
    "start": "6227080",
    "end": "6234199"
  },
  {
    "text": "Network and want to connect it so the administrator would usually say you got to activate it so in this case uh I'm",
    "start": "6234199",
    "end": "6240639"
  },
  {
    "text": "saying all right let me see what this is all about and this is now a system popup so this is now a system popup similar to",
    "start": "6240639",
    "end": "6247119"
  },
  {
    "text": "the one where you're granting permissions today to the application but you're granting policies so this app",
    "start": "6247119",
    "end": "6252320"
  },
  {
    "text": "wants to be able to erase all the data on my device wants to be able to lock my screen to change my password rules to",
    "start": "6252320",
    "end": "6258159"
  },
  {
    "text": "monitor unlocks and etc etc so it's pretty significant uh sort of set of",
    "start": "6258159",
    "end": "6264159"
  },
  {
    "text": "things that it's asking me if I say activate now this is this",
    "start": "6264159",
    "end": "6270119"
  },
  {
    "text": "app is administering my device so if certain things happen like I attempt too many times to to uh you know log in and",
    "start": "6270119",
    "end": "6277960"
  },
  {
    "text": "it fails this app is going to have a broadcast receiver that actually gets notified about that and now you can do",
    "start": "6277960",
    "end": "6283320"
  },
  {
    "text": "some certain things you can ping the mother ship and say hey this device is lost U or you can actually reset the",
    "start": "6283320",
    "end": "6289960"
  },
  {
    "text": "device or you can log the device so resetting the device is actually going to factory reset so it's going to Nuke all the all all the user data on the",
    "start": "6289960",
    "end": "6296880"
  },
  {
    "text": "device so this is kind of like a Google attempt to provide security at the Enterprise level to Corporate America to",
    "start": "6296880",
    "end": "6304119"
  },
  {
    "text": "make them feel warm and and fuzzy about actually bringing Android into the workplace as the single uh as a single",
    "start": "6304119",
    "end": "6310599"
  },
  {
    "text": "device now Google is just providing the the the planning for this right so this",
    "start": "6310599",
    "end": "6315920"
  },
  {
    "text": "is just an API uh that's pretty well thought out I think uh but there aren't",
    "start": "6315920",
    "end": "6321440"
  },
  {
    "text": "many apps that so Google has their own Google apps app right for uh business uh",
    "start": "6321440",
    "end": "6327080"
  },
  {
    "text": "users of Google uh but other than that third parties are basically coming up with solutions to solve that security",
    "start": "6327080",
    "end": "6333280"
  },
  {
    "text": "hall uh so that's a little bit about um how to how the app works and how to",
    "start": "6333280",
    "end": "6339000"
  },
  {
    "text": "implement it um so I'm going to P skip to that um so those are the details and",
    "start": "6339000",
    "end": "6348320"
  },
  {
    "text": "again all the code is in the in the uh um uh Source stre in the gitri uh",
    "start": "6348320",
    "end": "6355080"
  },
  {
    "text": "malware so how do you protect now your device from possible malware right so uh",
    "start": "6355080",
    "end": "6362880"
  },
  {
    "text": "so basically we need to First identify it right so figure out what Mal malware is um so there are some studies that are",
    "start": "6362880",
    "end": "6369280"
  },
  {
    "text": "done um you know you know looking up at some of the characterization and",
    "start": "6369280",
    "end": "6374360"
  },
  {
    "text": "evolution of malware um so this particular study looked at you know 12,00 different malware samples um and",
    "start": "6374360",
    "end": "6382280"
  },
  {
    "text": "they found out some you know signatures or patterns in malware they basically",
    "start": "6382280",
    "end": "6387360"
  },
  {
    "text": "concluded that 86 of them are repackage versions of existing apps with some malicious payload so basically they",
    "start": "6387360",
    "end": "6393840"
  },
  {
    "text": "would you know take a popular game or Bank of America app or something like that uh and they would basically add",
    "start": "6393840",
    "end": "6400880"
  },
  {
    "text": "certain hidden features um and sometimes those features could be uh hidden in in",
    "start": "6400880",
    "end": "6406719"
  },
  {
    "text": "a you know what looks like a pack or a Java package or you know class uh that",
    "start": "6406719",
    "end": "6412520"
  },
  {
    "text": "may look legitimate when you look at it at a you know with just a naked eye um",
    "start": "6412520",
    "end": "6418080"
  },
  {
    "text": "so so that's uh so so that's basically majority of the apps uh some of them",
    "start": "6418080",
    "end": "6424599"
  },
  {
    "text": "don't do that but so a small percentage about seven seven of them but basically they uh just asked to get updated with",
    "start": "6424599",
    "end": "6431520"
  },
  {
    "text": "the version of themselves uh so they basically go and uh download a version",
    "start": "6431520",
    "end": "6437080"
  },
  {
    "text": "um or additional payload U as part of the app and uh um and added to the",
    "start": "6437080",
    "end": "6443520"
  },
  {
    "text": "application so basically what they're adding is either an asset or a resource or something of that nature it's sort of",
    "start": "6443520",
    "end": "6449639"
  },
  {
    "text": "similar when you have um a game that goes and downloads the next level uh sort of thing",
    "start": "6449639",
    "end": "6455239"
  },
  {
    "text": "right um so um sometime sometimes they're using even the dvic class loader so basically you can have dvic",
    "start": "6455239",
    "end": "6461840"
  },
  {
    "text": "dynamically load the library so you can say hey I'm going to download a payload as my next level in a game uh but then",
    "start": "6461840",
    "end": "6469280"
  },
  {
    "text": "um have dvic uh try to load the uh load that payload um so these are some other",
    "start": "6469280",
    "end": "6476760"
  },
  {
    "text": "uh things that they uh discovered uh so drive by download so um applications um",
    "start": "6476760",
    "end": "6483880"
  },
  {
    "text": "that are basically analyzing the user device and figuring out what's installed",
    "start": "6483880",
    "end": "6488920"
  },
  {
    "text": "um we have about 13 uh 13.8% of applications have malicious behavior out",
    "start": "6488920",
    "end": "6494719"
  },
  {
    "text": "of these 83 use boot complete or SMS receive so remember the top 10 list of",
    "start": "6494719",
    "end": "6500520"
  },
  {
    "text": "bad permissions that Google has so it of maps nicely to this 83% um so these are some of the",
    "start": "6500520",
    "end": "6507760"
  },
  {
    "text": "permissions that these guys found so internet is in uh 98% versus 89 in standard apps so you",
    "start": "6507760",
    "end": "6515159"
  },
  {
    "text": "can kind of see the differences and based on this you could build some curis and say hey this app is you know",
    "start": "6515159",
    "end": "6521000"
  },
  {
    "text": "potentially a mare right um so these are some other numbers in terms of uh what they come up with",
    "start": "6521000",
    "end": "6528520"
  },
  {
    "text": "and so on um so how do you detect it well there is a package man manager package manager is exposed via uh API so",
    "start": "6528520",
    "end": "6536320"
  },
  {
    "text": "package manager is at the Java level at the low level we basically have the uh",
    "start": "6536320",
    "end": "6541480"
  },
  {
    "text": "install D so the code for this application is actually in anti malware",
    "start": "6541480",
    "end": "6546840"
  },
  {
    "text": "so you can actually see this uh app that's going to analyze all the other apps once I install it so it can",
    "start": "6546840",
    "end": "6552679"
  },
  {
    "text": "actually scan my packages look for signatures um and find a specific app and says this app looks like potential",
    "start": "6552679",
    "end": "6559920"
  },
  {
    "text": "you know malware you can proceed now this app can actually uninstall this app so yeah basically wrote a little app",
    "start": "6559920",
    "end": "6566599"
  },
  {
    "text": "that's U uninstalling my own app uh an timeware it's basically um uninstalling",
    "start": "6566599",
    "end": "6572880"
  },
  {
    "text": "this app so that's how virus protection programs work this is basically this the you know the blueprint for a virus",
    "start": "6572880",
    "end": "6578920"
  },
  {
    "text": "protection uh in uh in the following slides so I'm going to skip through that um how to remove it um there's SC Linux",
    "start": "6578920",
    "end": "6587159"
  },
  {
    "text": "which is a project NSA to um SC Android to do something similar to se Linux",
    "start": "6587159",
    "end": "6593239"
  },
  {
    "text": "um so that's basically a secure uh security enhanced Linux and these are some other uh concerns um the biggest",
    "start": "6593239",
    "end": "6601040"
  },
  {
    "text": "one that I would mention is the social engineering vectors of attack basically fooling the users into doing stuff that",
    "start": "6601040",
    "end": "6607280"
  },
  {
    "text": "they're not supposed to be doing um so so that's basically um what we what what",
    "start": "6607280",
    "end": "6613840"
  },
  {
    "text": "I had so there's giving me a stop notice so essentially we talked about stack a little bit we talked about essential",
    "start": "6613840",
    "end": "6620440"
  },
  {
    "text": "security issues so architecture IDs file access multi-user permissions app",
    "start": "6620440",
    "end": "6625480"
  },
  {
    "text": "signing we touched on some of the advanced security issues encryption routing device admin malware and so on",
    "start": "6625480",
    "end": "6633960"
  },
  {
    "text": "um so of course security is a really big topic means many things to many people",
    "start": "6633960",
    "end": "6639920"
  },
  {
    "text": "but I kind of try to touch on many many different things uh hopefully you guys found it useful um if you have any",
    "start": "6639920",
    "end": "6647040"
  },
  {
    "text": "questions comments concerns that's my contact info feel free to hit me up and",
    "start": "6647040",
    "end": "6652199"
  },
  {
    "text": "uh this slides are available online again that's the shortener there and the video of this presentation is going to",
    "start": "6652199",
    "end": "6657800"
  },
  {
    "text": "be available online as well so any questions well thank you guys appreciate",
    "start": "6657800",
    "end": "6664639"
  },
  {
    "text": "it [Music]",
    "start": "6664639",
    "end": "6677569"
  }
]