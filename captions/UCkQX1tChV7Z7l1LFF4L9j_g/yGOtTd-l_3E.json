[
  {
    "start": "0",
    "end": "115000"
  },
  {
    "text": "[Music]",
    "start": "680",
    "end": "8549"
  },
  {
    "text": "one of the pre-pandemic things i miss most about work are the dance classes",
    "start": "15120",
    "end": "20640"
  },
  {
    "text": "pictured here is a dance flash mob that we did in our office a few years ago",
    "start": "20640",
    "end": "25760"
  },
  {
    "text": "this is an example of when many individuals work together we were able to create something fun a coordinated",
    "start": "25760",
    "end": "31519"
  },
  {
    "text": "dance set but such a collaboration among so many humans is really challenging",
    "start": "31519",
    "end": "37760"
  },
  {
    "text": "it requires intentional design effort and planning this is not something that happens spontaneously overnight",
    "start": "37760",
    "end": "45520"
  },
  {
    "text": "like any good flash mob a technical architecture revamp is also a big human coordination project",
    "start": "45520",
    "end": "52399"
  },
  {
    "text": "architecture migrations require a lot of planning time and extensive collaboration in order to be successful",
    "start": "52399",
    "end": "60719"
  },
  {
    "text": "i've been at airbnb for seven years and seen the architecture evolve and the amount of human power it takes",
    "start": "61680",
    "end": "67840"
  },
  {
    "text": "thanks for joining my talk today my name is jessica i worked extensively in our monolith and our first micro services at",
    "start": "67840",
    "end": "75040"
  },
  {
    "text": "airbnb i'm now an engineering manager on two of our platform infrastructure teams",
    "start": "75040",
    "end": "81520"
  },
  {
    "text": "having gone through various migration of architectures at airbnb first hand",
    "start": "81520",
    "end": "88240"
  },
  {
    "text": "i'll give a brief overview by covering the three major stages and the changes that we saw within teams to",
    "start": "88240",
    "end": "95119"
  },
  {
    "text": "support these architectural migrations",
    "start": "95119",
    "end": "99880"
  },
  {
    "text": "i'll then cover some of the highlights and the low lights that we've seen in our migration journey",
    "start": "100479",
    "end": "107280"
  },
  {
    "text": "then i'll end with what we're working on now and the next challenges that we see on the horizon",
    "start": "107280",
    "end": "114920"
  },
  {
    "start": "115000",
    "end": "275000"
  },
  {
    "text": "architecture reflects the needs of your company and product for airbnb it began as a simple",
    "start": "117119",
    "end": "124560"
  },
  {
    "text": "marketplace for hosts to open up their homes to their guests",
    "start": "124560",
    "end": "129840"
  },
  {
    "text": "this could be done in a ruby on rails application our monolith",
    "start": "130080",
    "end": "135120"
  },
  {
    "text": "for a number of years our monolith worked really well for us",
    "start": "135120",
    "end": "140319"
  },
  {
    "text": "most of our engineers were full stack in our monolith you could do our front",
    "start": "140319",
    "end": "145360"
  },
  {
    "text": "end api layer rm database migrations all within the single repository and",
    "start": "145360",
    "end": "152480"
  },
  {
    "text": "engineers were able to execute on end-to-end features themselves",
    "start": "152480",
    "end": "158720"
  },
  {
    "text": "because features were able to be completed within the team there are less inter-team dependencies",
    "start": "160080",
    "end": "167040"
  },
  {
    "text": "this is because all engineers could access the whole code base and the monolith and not need to depend on another team to make a change in a",
    "start": "167040",
    "end": "173280"
  },
  {
    "text": "certain part of the code base however as airbnb entered hyper growth",
    "start": "173280",
    "end": "179120"
  },
  {
    "text": "there were many more engineers and many more teams it was not possible for a single person or team to have context on",
    "start": "179120",
    "end": "185040"
  },
  {
    "text": "the whole code base anymore ownership and team boundaries were needed",
    "start": "185040",
    "end": "190720"
  },
  {
    "text": "we attempted to make more granular teams focused on clear product surface areas",
    "start": "191440",
    "end": "198080"
  },
  {
    "text": "however the monolith was tightly coupled as a result of moving quickly and prioritizing",
    "start": "198080",
    "end": "203920"
  },
  {
    "text": "fast product iteration code changes in one team could have unattended consequences for another team",
    "start": "203920",
    "end": "211360"
  },
  {
    "text": "team ownership was confusing for different pieces of code and there were areas that were completely unowned",
    "start": "211360",
    "end": "218560"
  },
  {
    "text": "as airbnb grew to hundreds of engineers our monolith encountered more and more",
    "start": "218560",
    "end": "224000"
  },
  {
    "text": "of these scaling challenges until we reached a breaking point where",
    "start": "224000",
    "end": "230319"
  },
  {
    "text": "we could no longer be productive the largest pain point that we experienced was the slow deploys",
    "start": "230319",
    "end": "238480"
  },
  {
    "text": "when i first joined airbnb i could deploy our monolith within the matter of",
    "start": "238480",
    "end": "243680"
  },
  {
    "text": "20-30 minutes at a tourist it was taking many hours sometimes over a day to get a single",
    "start": "243680",
    "end": "250400"
  },
  {
    "text": "deploy done the slow deploys thus contributed greatly to a slower developer velocity",
    "start": "250400",
    "end": "257919"
  },
  {
    "text": "hurting both engineering morale as well as the company business it's difficult to have hundreds of",
    "start": "257919",
    "end": "264240"
  },
  {
    "text": "engineers contributing to the same application and the way the model is structured now it was clear that i",
    "start": "264240",
    "end": "269600"
  },
  {
    "text": "wasn't going to last as a architecture for many more years",
    "start": "269600",
    "end": "276000"
  },
  {
    "start": "275000",
    "end": "477000"
  },
  {
    "text": "like other companies we decided to move to microservices and wanted to be a bit more disciplined about our approach",
    "start": "276400",
    "end": "283040"
  },
  {
    "text": "we aligned on having four different service types one having a data fetching service to",
    "start": "283040",
    "end": "290160"
  },
  {
    "text": "read and write data two a business logic service able to apply functions and combine",
    "start": "290160",
    "end": "297120"
  },
  {
    "text": "different pieces of data together three a workflow service for write",
    "start": "297120",
    "end": "302720"
  },
  {
    "text": "orchestration this is important in handling operations that involve touching pieces of data across multiple",
    "start": "302720",
    "end": "308080"
  },
  {
    "text": "services and for the last type of service is our",
    "start": "308080",
    "end": "313280"
  },
  {
    "text": "ui aggregation service putting this together from beneath data services",
    "start": "313280",
    "end": "319440"
  },
  {
    "text": "these services are all behind our api gateway",
    "start": "320400",
    "end": "325680"
  },
  {
    "text": "we did do a similar migration for our monolithic front-end into separate react services",
    "start": "325680",
    "end": "331360"
  },
  {
    "text": "but that won't be the focus of this talk",
    "start": "331360",
    "end": "336000"
  },
  {
    "text": "since ownership was a problem in the monolith we made sure that each service had only one owning team",
    "start": "337680",
    "end": "344000"
  },
  {
    "text": "a team could own many different services and this is a lot easier to reason about",
    "start": "344000",
    "end": "349280"
  },
  {
    "text": "because the clear api boundaries and code space of each service",
    "start": "349280",
    "end": "354400"
  },
  {
    "text": "was much easier to enforce we could easily add mandatory reviewers",
    "start": "354400",
    "end": "359680"
  },
  {
    "text": "to a project that has the team that owns it as a tag person that must approve the pull",
    "start": "359680",
    "end": "366319"
  },
  {
    "text": "request before it is merged there is a change in the way that we",
    "start": "366319",
    "end": "372319"
  },
  {
    "text": "structured our teams as well instead of having teams that were full stack able to handle anything we saw",
    "start": "372319",
    "end": "379120"
  },
  {
    "text": "that we were having teams that were focused just on the back end we had teams now that were specialized",
    "start": "379120",
    "end": "385440"
  },
  {
    "text": "on certain data services and other teams are focused on the more",
    "start": "385440",
    "end": "390720"
  },
  {
    "text": "complexes pieces of business logic",
    "start": "390720",
    "end": "395840"
  },
  {
    "text": "we even created a team dedicated specifically for the migration of monolith to microservice",
    "start": "397600",
    "end": "405120"
  },
  {
    "text": "this team is responsible for building tools that help compare read and write endpoints for the",
    "start": "405120",
    "end": "410639"
  },
  {
    "text": "migration as well as embed with other teams to help teach them the best practices of service building",
    "start": "410639",
    "end": "418000"
  },
  {
    "text": "and operations",
    "start": "418000",
    "end": "421240"
  },
  {
    "text": "we saw a change in collaboration too as we moved to microservices features now required changes across",
    "start": "423199",
    "end": "429360"
  },
  {
    "text": "multiple services but these multiple services could live in different teams no longer was it common for a feature to",
    "start": "429360",
    "end": "436960"
  },
  {
    "text": "be executed completely within its own team now teams needed to be much more aware",
    "start": "436960",
    "end": "443120"
  },
  {
    "text": "of the larger service ecosystem to understand where the dependencies may lie what",
    "start": "443120",
    "end": "448240"
  },
  {
    "text": "interactions need to have to make sure that the priorities aligned for a particular end-to-end feature to be",
    "start": "448240",
    "end": "454400"
  },
  {
    "text": "built we migrated",
    "start": "454400",
    "end": "460880"
  },
  {
    "text": "many microservices to a point of his hundreds after about a few years into",
    "start": "460880",
    "end": "465919"
  },
  {
    "text": "the migration new challenges were emerging it was now difficult to be managing so many services and their dependencies",
    "start": "465919",
    "end": "474599"
  },
  {
    "start": "477000",
    "end": "610000"
  },
  {
    "text": "trying to address some of those challenges we decided to have a hybrid between micro and macro services and",
    "start": "478720",
    "end": "484639"
  },
  {
    "text": "this is what we're working on now i go into more detail about this in my previous qcon plus talk but i'll give a",
    "start": "484639",
    "end": "491599"
  },
  {
    "text": "quick overview right now",
    "start": "491599",
    "end": "495520"
  },
  {
    "text": "the micro macro service hybrid model focuses on unification of apis",
    "start": "497120",
    "end": "502240"
  },
  {
    "text": "how can we consolidate and make things easier as the clear one place to go for certain pieces of data or functionality",
    "start": "502240",
    "end": "511039"
  },
  {
    "text": "now our backend services previously able to call any other service in our microservice world",
    "start": "511599",
    "end": "518320"
  },
  {
    "text": "we'll go through a great graphql interface and get the data only from our",
    "start": "518320",
    "end": "523518"
  },
  {
    "text": "central data aggregator the central data aggregator then federates out its",
    "start": "523519",
    "end": "529839"
  },
  {
    "text": "schema using a simple graphql interface as well",
    "start": "529839",
    "end": "535839"
  },
  {
    "text": "into our service blocks our service blocks have a facade api",
    "start": "535839",
    "end": "541440"
  },
  {
    "text": "that abstracts away the microservices beneath it in our previous microservice only word",
    "start": "541440",
    "end": "548240"
  },
  {
    "text": "our services were talking to each other with thrift so we preserved that within the blocks",
    "start": "548240",
    "end": "556800"
  },
  {
    "text": "and allowed our existing microservices to continue using thrift but have a subtraction layer encapsulating them in",
    "start": "556800",
    "end": "563600"
  },
  {
    "text": "the service block our team structure changed as well",
    "start": "563600",
    "end": "569680"
  },
  {
    "text": "now our teams are more specialized our product teams are just focusing on that the product they no longer need to",
    "start": "569680",
    "end": "576160"
  },
  {
    "text": "be responsible for optimizing performance of data fetching because now we have a dedicated team to do this",
    "start": "576160",
    "end": "583680"
  },
  {
    "text": "we also had dedicated teams for our service walks which is really important to have cohesive ownership over the",
    "start": "583680",
    "end": "590000"
  },
  {
    "text": "larger domains that pro power our airbnb product",
    "start": "590000",
    "end": "595279"
  },
  {
    "text": "now let's switch a little bit and go into reverse and think about how our journey came to be what were the",
    "start": "595519",
    "end": "602800"
  },
  {
    "text": "things that we did well and the things that we did not do so well that would like to adjust in our upcoming work",
    "start": "602800",
    "end": "610160"
  },
  {
    "start": "610000",
    "end": "657000"
  },
  {
    "text": "when thinking about how to frame this for the talk i realized that there are two major cycles that happen in airbnb",
    "start": "610399",
    "end": "616720"
  },
  {
    "text": "with a bunch of many similar cycles one it starts with a problem",
    "start": "616720",
    "end": "623360"
  },
  {
    "text": "two we then create a solution to make this problem better",
    "start": "623360",
    "end": "629519"
  },
  {
    "text": "three then we need to get people to adopt the solution to motivate them and show them",
    "start": "629519",
    "end": "634640"
  },
  {
    "text": "why it's impactful four if we're successful at that there's going to be tons of people using that",
    "start": "634640",
    "end": "640800"
  },
  {
    "text": "particular solution and five so many people are using it it might",
    "start": "640800",
    "end": "646240"
  },
  {
    "text": "push it to a breaking point of creating a new scaling challenge in which we need to go back and figure",
    "start": "646240",
    "end": "651680"
  },
  {
    "text": "out how do we address this new state of the world",
    "start": "651680",
    "end": "656320"
  },
  {
    "start": "657000",
    "end": "884000"
  },
  {
    "text": "so one of these cycles starts from the move from monolith to services",
    "start": "658399",
    "end": "664720"
  },
  {
    "text": "in the beginning there's a lot of excitement yes we're going to move to services it'll be so great our deploys",
    "start": "664720",
    "end": "669760"
  },
  {
    "text": "will be faster but the services were really hard to set up",
    "start": "669760",
    "end": "675279"
  },
  {
    "text": "and maintain in the beginning it took three or four weeks to do all the steps in this diagram and then some",
    "start": "675279",
    "end": "681279"
  },
  {
    "text": "just to get a health point up and running it's pretty difficult to convince somebody to migrate to services if you",
    "start": "681279",
    "end": "688320"
  },
  {
    "text": "say you have to add on an extra month of time just to get that service up and",
    "start": "688320",
    "end": "694320"
  },
  {
    "text": "running recognizing that we needed to make this easier for our engineers in order to get",
    "start": "694320",
    "end": "701440"
  },
  {
    "text": "the migration going we invested heavily in our service infrastructure",
    "start": "701440",
    "end": "708079"
  },
  {
    "text": "they developed a way to have service infrastructure as code this configuration lives alongside the",
    "start": "708079",
    "end": "715360"
  },
  {
    "text": "service in the same repository it manages configurations including our kubernetes",
    "start": "715360",
    "end": "723519"
  },
  {
    "text": "setup all within simple configuration based format",
    "start": "723519",
    "end": "731839"
  },
  {
    "text": "the hope is that this would make it really easy for people to get a service up and running so that they would be",
    "start": "732639",
    "end": "738399"
  },
  {
    "text": "motivated to then get the benefits of having an isolated service and the fast deployment process",
    "start": "738399",
    "end": "745839"
  },
  {
    "text": "we further devised waze so that all teams could be using this new tool to build a service",
    "start": "747279",
    "end": "753680"
  },
  {
    "text": "we increase adoption by enabling people to be migrating incrementally out of the",
    "start": "753680",
    "end": "759120"
  },
  {
    "text": "monolith and in parallel to each other again this is really important because we were hitting that breaking point",
    "start": "759120",
    "end": "765839"
  },
  {
    "text": "where the deploys in our models were so slow and painful",
    "start": "765839",
    "end": "770480"
  },
  {
    "text": "and doing this migration in parallel did enable many services to be built",
    "start": "771760",
    "end": "778959"
  },
  {
    "text": "and meet the benefits of that better developer experience we migrated",
    "start": "778959",
    "end": "784160"
  },
  {
    "text": "field by field and point by endpoint and soon",
    "start": "784160",
    "end": "789680"
  },
  {
    "text": "hundreds of people were making services and we had hundreds of services in our",
    "start": "789680",
    "end": "794880"
  },
  {
    "text": "network",
    "start": "794880",
    "end": "797880"
  },
  {
    "text": "and then it leads us to the scaling challenge so many services were created in a short amount of time",
    "start": "801120",
    "end": "807360"
  },
  {
    "text": "and they got the benefit of the deployments going from hours or days down to minutes",
    "start": "807360",
    "end": "813200"
  },
  {
    "text": "however the dependency graph became really complicated and hard for both humans and services to navigate",
    "start": "813200",
    "end": "821760"
  },
  {
    "text": "furthermore we saw that quick developer velocity and a desire to get features",
    "start": "822639",
    "end": "827920"
  },
  {
    "text": "that quickly or iterate fast led to mixed functionality in our",
    "start": "827920",
    "end": "833519"
  },
  {
    "text": "services our services and the apis were becoming too complicated",
    "start": "833519",
    "end": "839040"
  },
  {
    "text": "the complexity deal but not having those four initial service types",
    "start": "839040",
    "end": "844880"
  },
  {
    "text": "clearly defined in each service instead what used to be a ui presentation service was now fetching",
    "start": "844880",
    "end": "852160"
  },
  {
    "text": "data a data service may also be orchestrating like a workflow service or",
    "start": "852160",
    "end": "857440"
  },
  {
    "text": "doing a lot of complicated business logic services were having circular dependencies between each other it was",
    "start": "857440",
    "end": "864079"
  },
  {
    "text": "really difficult for us to understand the topology of our hundreds of services and reason about them",
    "start": "864079",
    "end": "870480"
  },
  {
    "text": "code is being duplicated because it was difficult to discover what services existed what functionality was in the",
    "start": "870480",
    "end": "875920"
  },
  {
    "text": "monolith or what could be extended from something that was already existing",
    "start": "875920",
    "end": "882279"
  },
  {
    "text": "so this leads us to our second cycle of that migration challenge journey",
    "start": "885279",
    "end": "890480"
  },
  {
    "text": "our starting problem is now the dependency graph was really difficult for humans and services",
    "start": "890480",
    "end": "897360"
  },
  {
    "text": "features were requiring collaboration across many different teams we needed a way to work in this new world where it was",
    "start": "897360",
    "end": "905040"
  },
  {
    "text": "rare to have a feature only be finished by your own team it needed to be easy for other",
    "start": "905040",
    "end": "912399"
  },
  {
    "text": "engineers to understand how the other services interact with each other and their",
    "start": "912399",
    "end": "917760"
  },
  {
    "text": "capabilities we had a set of solutions aimed to make",
    "start": "917760",
    "end": "924639"
  },
  {
    "text": "this better we wanted to improve productivity observability with ownership tools",
    "start": "924639",
    "end": "930800"
  },
  {
    "text": "and automation such as code generation distributed systems across distributed",
    "start": "930800",
    "end": "937519"
  },
  {
    "text": "teams create more communication overhead knowing your call graph knowing which",
    "start": "937519",
    "end": "942800"
  },
  {
    "text": "teams are your downstream dependency knowing how your service is being used by its clients are really important for",
    "start": "942800",
    "end": "949600"
  },
  {
    "text": "service ownership and maintainability we wanted to make this information really easy for our engineers to",
    "start": "949600",
    "end": "956160"
  },
  {
    "text": "understand so they can more effectively work with each other",
    "start": "956160",
    "end": "960800"
  },
  {
    "text": "an example of this is our ownership tool it's really simple metadata for each of",
    "start": "962000",
    "end": "968079"
  },
  {
    "text": "our services going line by line showing what are the best communication channels to reach the owners",
    "start": "968079",
    "end": "973680"
  },
  {
    "text": "tagging what type of service it is and providing links to",
    "start": "973680",
    "end": "978959"
  },
  {
    "text": "the code repository where it lives this metadata is important for engineers",
    "start": "978959",
    "end": "985680"
  },
  {
    "text": "to know who to contact during incidents the purpose of a service",
    "start": "985680",
    "end": "990800"
  },
  {
    "text": "and also used as a way for us to programmatically create trackers for migration",
    "start": "990800",
    "end": "999440"
  },
  {
    "text": "tools and ongoing processes for example",
    "start": "999759",
    "end": "1005600"
  },
  {
    "text": "migrating something for a framework level may require migrating it",
    "start": "1005600",
    "end": "1011519"
  },
  {
    "text": "for all services it's not easy to track down 500 plus services but with this",
    "start": "1011519",
    "end": "1016800"
  },
  {
    "text": "tool we have a better idea of which services exist and how to find the",
    "start": "1016800",
    "end": "1021920"
  },
  {
    "text": "people who are the experts at maintaining them",
    "start": "1021920",
    "end": "1026400"
  },
  {
    "start": "1025000",
    "end": "1434000"
  },
  {
    "text": "we created a service api explorer tool this not only has information",
    "start": "1027439",
    "end": "1032798"
  },
  {
    "text": "useful to the api itself in an easy searchable way but also has information useful for the",
    "start": "1032799",
    "end": "1040079"
  },
  {
    "text": "humans to know how to contact each other their slack channels dashboards to look at health design docs",
    "start": "1040079",
    "end": "1047280"
  },
  {
    "text": "to understand what's going on all provided easily as thrift annotations right along alongside the api for this",
    "start": "1047280",
    "end": "1054320"
  },
  {
    "text": "service this documentation is in thrift deployed with this service",
    "start": "1054320",
    "end": "1061200"
  },
  {
    "text": "so it's really easy for the developers to keep up to date",
    "start": "1061200",
    "end": "1066679"
  },
  {
    "text": "our services are built using that one setup and it comes with a lot of free code for",
    "start": "1066720",
    "end": "1073280"
  },
  {
    "text": "us scaffolding both the client and server side with all the spoiler plate generated",
    "start": "1073280",
    "end": "1079760"
  },
  {
    "text": "from the service framework comes with pre-populated metrics and standard",
    "start": "1079760",
    "end": "1085120"
  },
  {
    "text": "dashboards the one i use a lot is looking at the callers of my particular service",
    "start": "1085120",
    "end": "1093400"
  },
  {
    "text": "a side mini challenge journey and learning that we have is that when creating",
    "start": "1094480",
    "end": "1100720"
  },
  {
    "text": "a network or service it's really important to know how the services are talking to each other which includes",
    "start": "1100720",
    "end": "1106400"
  },
  {
    "text": "passing down the id of a caller to the service that is calling",
    "start": "1106400",
    "end": "1113039"
  },
  {
    "text": "however in the beginning we did not have the standardizer required across our various services so each service is",
    "start": "1113039",
    "end": "1118960"
  },
  {
    "text": "doing it a little bit differently this resulted in not having the standardized metrics and some of the",
    "start": "1118960",
    "end": "1125039"
  },
  {
    "text": "caller ids being unpopulated hence unknown",
    "start": "1125039",
    "end": "1130480"
  },
  {
    "text": "this has been really difficult for us to track down what are the source of these unknown calls and understand",
    "start": "1130480",
    "end": "1136880"
  },
  {
    "text": "how those unknown callers are trying to use our service so tip for next time make sure that your",
    "start": "1136880",
    "end": "1142960"
  },
  {
    "text": "request context is set and standardized ahead of time",
    "start": "1142960",
    "end": "1148320"
  },
  {
    "text": "going back to the solutions another solution to make it better is replacing some of our bespoke thrift",
    "start": "1148400",
    "end": "1156080"
  },
  {
    "text": "schemas with a single unified graphql schema we wanted to move to graphql to get a",
    "start": "1156080",
    "end": "1163039"
  },
  {
    "text": "richer set of features that more closely resemble the way that our api was being used",
    "start": "1163039",
    "end": "1169120"
  },
  {
    "text": "however you recognize this is yet another migration so we needed to invest in ways to make it easy for people to",
    "start": "1169120",
    "end": "1175520"
  },
  {
    "text": "migrate away from the thrift that they were used to using with developing services",
    "start": "1175520",
    "end": "1183280"
  },
  {
    "text": "when introducing new technologies to your tech stack the education piece and",
    "start": "1184080",
    "end": "1190080"
  },
  {
    "text": "onboarding cost is important to factor as well we invested heavily in creating graphql",
    "start": "1190080",
    "end": "1196960"
  },
  {
    "text": "training courses to get our engineers more familiar with the best practices there",
    "start": "1196960",
    "end": "1205399"
  },
  {
    "text": "here's an example of a reservation page and how we would start to translate it to",
    "start": "1207440",
    "end": "1213120"
  },
  {
    "text": "reservations in graphql and to get people to adopt",
    "start": "1213120",
    "end": "1219440"
  },
  {
    "text": "such a schema we wanted to focus on how can we improve",
    "start": "1219440",
    "end": "1224960"
  },
  {
    "text": "the developer velocity we do this through graphql annotations",
    "start": "1224960",
    "end": "1230400"
  },
  {
    "text": "and creating a lot of behind the scenes code from these annotations",
    "start": "1230400",
    "end": "1235440"
  },
  {
    "text": "so we take a look at that reservation snippet again we'll have",
    "start": "1235440",
    "end": "1241280"
  },
  {
    "text": "a annotation around owners this allows us to",
    "start": "1241280",
    "end": "1247760"
  },
  {
    "text": "provide a way for alerts to be automatically",
    "start": "1247760",
    "end": "1252799"
  },
  {
    "text": "generated and paging the right team also a way for us to automatically tag the correct",
    "start": "1252799",
    "end": "1258880"
  },
  {
    "text": "team to review code when anything in the schema changes we want to be really strong about who",
    "start": "1258880",
    "end": "1264240"
  },
  {
    "text": "the owner is for a particular schema so that things don't get out of hand people adding",
    "start": "1264240",
    "end": "1270880"
  },
  {
    "text": "fields to places that might not make the most sense",
    "start": "1270880",
    "end": "1275960"
  },
  {
    "text": "another annotation that we found was really useful is our service back node annotation",
    "start": "1276480",
    "end": "1282240"
  },
  {
    "text": "this is helpful because it auto generates a bunch of code for us in the resolver to call our internal",
    "start": "1282240",
    "end": "1288640"
  },
  {
    "text": "microservice with thrift this is important because the migration",
    "start": "1288640",
    "end": "1293840"
  },
  {
    "text": "price to pay to integrate a service into this data aggregation layer",
    "start": "1293840",
    "end": "1300400"
  },
  {
    "text": "is high if everyone needs to make these changes done manually but if we're able to just add this",
    "start": "1300400",
    "end": "1305919"
  },
  {
    "text": "annotation and use the existing service name and the existing endpoint name",
    "start": "1305919",
    "end": "1312480"
  },
  {
    "text": "the rest is done for us",
    "start": "1312480",
    "end": "1316600"
  },
  {
    "text": "there are many different other annotations a few others include marking what type of data classification",
    "start": "1318480",
    "end": "1325280"
  },
  {
    "text": "each field has is this field pii is it other data what type of security",
    "start": "1325280",
    "end": "1331520"
  },
  {
    "text": "and privacy methods do we need to apply to this field the permissions piece is particularly",
    "start": "1331520",
    "end": "1337120"
  },
  {
    "text": "useful because this previously lived in our monolith at this application level",
    "start": "1337120",
    "end": "1342880"
  },
  {
    "text": "that was a lot of complex logic scattered across many places some",
    "start": "1342880",
    "end": "1348480"
  },
  {
    "text": "people have migrated out into their own permission services in our microservice world",
    "start": "1348480",
    "end": "1354880"
  },
  {
    "text": "we created a separate permission service that tried to be this connection for all the permission checks but found",
    "start": "1354880",
    "end": "1360799"
  },
  {
    "text": "it was difficult to get traction on migration there too by introducing this as a simple",
    "start": "1360799",
    "end": "1366880"
  },
  {
    "text": "annotation we're able to get permissions easily defined in line and really clear",
    "start": "1366880",
    "end": "1372320"
  },
  {
    "text": "how the logic of the permission maps to each particular field",
    "start": "1372320",
    "end": "1378400"
  },
  {
    "text": "with all these annotations it was a lot easier for people to get started and find the benefits of doing things in",
    "start": "1380400",
    "end": "1387039"
  },
  {
    "text": "graphql now we have migrated hundreds of data entities to this unified graphql schema",
    "start": "1387039",
    "end": "1396480"
  },
  {
    "text": "which then leads us to what's next the scaling challenge it's slower to build and deploy and the",
    "start": "1396480",
    "end": "1404320"
  },
  {
    "text": "data aggregation now that so many engineers are actively contributing and using it",
    "start": "1404320",
    "end": "1411120"
  },
  {
    "text": "recognizing the slowdown as a sign of what happened to our monolith we are doubling down and",
    "start": "1411120",
    "end": "1418080"
  },
  {
    "text": "investing heavily into our developer infrastructure and tools",
    "start": "1418080",
    "end": "1423120"
  },
  {
    "text": "to make sure that the developer experience for the data aggregation service remains",
    "start": "1423120",
    "end": "1429520"
  },
  {
    "text": "high productivity levels",
    "start": "1429520",
    "end": "1432799"
  },
  {
    "start": "1434000",
    "end": "1722000"
  },
  {
    "text": "so what's next for our airbnb what are our upcoming challenges",
    "start": "1435919",
    "end": "1441519"
  },
  {
    "text": "as described arabi is moving towards that hybrid mode of having aggregators",
    "start": "1441760",
    "end": "1446799"
  },
  {
    "text": "act as these macro services that abstract the microservices initially when we did our micro service",
    "start": "1446799",
    "end": "1453760"
  },
  {
    "text": "migration we were trying to run away from any sort of centralization",
    "start": "1453760",
    "end": "1460400"
  },
  {
    "text": "this ended up resulting in a lot of different free form services that had",
    "start": "1460400",
    "end": "1466159"
  },
  {
    "text": "a little too much flexibility of how the dependency graph could",
    "start": "1466159",
    "end": "1471520"
  },
  {
    "text": "look like and their functionality internally",
    "start": "1471520",
    "end": "1476158"
  },
  {
    "text": "instead we're trying to be more stringent about enforcing a paved path",
    "start": "1476640",
    "end": "1482240"
  },
  {
    "text": "for this micro and macro service architecture the pave path looks like our internal back-end service",
    "start": "1482240",
    "end": "1489039"
  },
  {
    "text": "gets its data from the data aggregation service using the unified graphql schema",
    "start": "1489039",
    "end": "1498080"
  },
  {
    "text": "that large graphql schemas then federated out into smaller ones that are owned by their service blocks",
    "start": "1498159",
    "end": "1505200"
  },
  {
    "text": "the service blocks are the units that are encapsulating some of our larger",
    "start": "1505200",
    "end": "1510960"
  },
  {
    "text": "business domains core to the airbnb product the service blocks have facade apis that",
    "start": "1510960",
    "end": "1516640"
  },
  {
    "text": "encapsulate a collection of microservices we only have a few service blocks",
    "start": "1516640",
    "end": "1523200"
  },
  {
    "text": "as they're really for the larger product entities such as reservations at airbnb users",
    "start": "1523200",
    "end": "1531440"
  },
  {
    "text": "these are guests and hosts homes reviews pricing and availability etc",
    "start": "1531440",
    "end": "1539200"
  },
  {
    "text": "beneath the service blocks we have a unified data store layer and api",
    "start": "1539200",
    "end": "1544240"
  },
  {
    "text": "and this is a way to further specialize the",
    "start": "1544240",
    "end": "1549360"
  },
  {
    "text": "optimizations needed at the data level and to provide that unified schema going throughout the",
    "start": "1549360",
    "end": "1555679"
  },
  {
    "text": "whole stack we saw changes and how our teams were",
    "start": "1555679",
    "end": "1562159"
  },
  {
    "text": "structured as well we wanted to clarify the responsibilities by specializing our",
    "start": "1562159",
    "end": "1568080"
  },
  {
    "text": "engineering teams more our product teams should be focused on just that",
    "start": "1568080",
    "end": "1573840"
  },
  {
    "text": "building the product they shouldn't need to worry about optimizing data for performance or figuring out the",
    "start": "1573840",
    "end": "1579919"
  },
  {
    "text": "permissions for particular pieces instead that's the focus of the data aggregation team",
    "start": "1579919",
    "end": "1585520"
  },
  {
    "text": "stitching together the data across the company into an easy to consume and understand way",
    "start": "1585520",
    "end": "1593039"
  },
  {
    "text": "our platform or service blocks are run by separate teams as well it's important",
    "start": "1594799",
    "end": "1600960"
  },
  {
    "text": "to have teams focused on these holistic domains to be stewards of these important pieces",
    "start": "1600960",
    "end": "1607200"
  },
  {
    "text": "of our product this will help reduce and the duplication that we saw in the microservice",
    "start": "1607200",
    "end": "1614080"
  },
  {
    "text": "world where there wasn't this type of centralization",
    "start": "1614080",
    "end": "1618559"
  },
  {
    "text": "but we also want to make sure that we are planning a little bit more ahead and getting",
    "start": "1620960",
    "end": "1628159"
  },
  {
    "text": "in front of some foreseeable challenges",
    "start": "1628159",
    "end": "1632400"
  },
  {
    "text": "at the product team level we know that there is a need for quick product iteration so we need to be able to",
    "start": "1634559",
    "end": "1639919"
  },
  {
    "text": "design our architecture in a way that doesn't stifle",
    "start": "1639919",
    "end": "1645679"
  },
  {
    "text": "that iteration cycle speed but at the same time is not accruing tech debt",
    "start": "1645679",
    "end": "1651760"
  },
  {
    "text": "for each new attempt at the data aggregation layer challenge",
    "start": "1651760",
    "end": "1657200"
  },
  {
    "text": "that we foresee is that it becomes a new monolith that has lower productivity developer",
    "start": "1657200",
    "end": "1662480"
  },
  {
    "text": "velocity and tight coupling we want to make sure that we are",
    "start": "1662480",
    "end": "1668159"
  },
  {
    "text": "disciplined about what belongs where in this data aggregation layer so it",
    "start": "1668159",
    "end": "1674000"
  },
  {
    "text": "doesn't become the new monolith and at the service block layer",
    "start": "1674000",
    "end": "1680240"
  },
  {
    "text": "challenge that we foresee is how to define these schema boundaries in a clean way",
    "start": "1680240",
    "end": "1686000"
  },
  {
    "text": "there's many pieces of data or logic that can span multiple entities",
    "start": "1686000",
    "end": "1691279"
  },
  {
    "text": "for example where would you put the number of completed reservation about a host had",
    "start": "1691279",
    "end": "1697440"
  },
  {
    "text": "in the reservation block or the user block these types of questions are things that we're working out now to",
    "start": "1697440",
    "end": "1702640"
  },
  {
    "text": "make sure that we have a paved path for these common use cases",
    "start": "1702640",
    "end": "1710360"
  },
  {
    "text": "finally there's a whole other slew of challenges that exist in the offline or asynchronous world the ones covered here",
    "start": "1710640",
    "end": "1717520"
  },
  {
    "text": "are just the online use cases",
    "start": "1717520",
    "end": "1721640"
  },
  {
    "start": "1722000",
    "end": "1781000"
  },
  {
    "text": "i had to describe our future looking forward i see a lot of tracks our migrations are on track but there's",
    "start": "1724000",
    "end": "1730720"
  },
  {
    "text": "a lot of parallel tracks with many moving pieces going on at once",
    "start": "1730720",
    "end": "1735840"
  },
  {
    "text": "we're migrating our internal services to call that data aggregation later we'll building we are building out that new",
    "start": "1735840",
    "end": "1741840"
  },
  {
    "text": "data aggregation layer we're building service blocks migrating callers to those service blocks and building on our",
    "start": "1741840",
    "end": "1748880"
  },
  {
    "text": "data store with many migrations happening at the",
    "start": "1748880",
    "end": "1754640"
  },
  {
    "text": "same time they need to be not only backward compatible but also compatible",
    "start": "1754640",
    "end": "1760240"
  },
  {
    "text": "with each other we're also wary of the fatigue that comes from engineers doing migration",
    "start": "1760240",
    "end": "1767279"
  },
  {
    "text": "after migration but it's important that we actually fully complete the migrations because there's any long tail",
    "start": "1767279",
    "end": "1774960"
  },
  {
    "text": "remaining then we're stuck having to maintain various states of our infrastructure",
    "start": "1774960",
    "end": "1781799"
  },
  {
    "start": "1781000",
    "end": "1851000"
  },
  {
    "text": "putting this together means that the deprecation of a monolith takes a very long",
    "start": "1781840",
    "end": "1787840"
  },
  {
    "text": "time we are our third year into our migration",
    "start": "1787840",
    "end": "1793600"
  },
  {
    "text": "process and there's still a lot to happen we have a working group that put",
    "start": "1793600",
    "end": "1799200"
  },
  {
    "text": "together some proposals at helping to move this migration process along our mobile apps are going to be",
    "start": "1799200",
    "end": "1805840"
  },
  {
    "text": "automatically deprecated after 12 months this will help us get rid of features that aren't being supported in parity on",
    "start": "1805840",
    "end": "1812640"
  },
  {
    "text": "web anymore we elevate and track our monolithic debt alongside our other business metrics",
    "start": "1812640",
    "end": "1819360"
  },
  {
    "text": "we have plans to sunset low usage endpoints and are",
    "start": "1819360",
    "end": "1826000"
  },
  {
    "text": "raising the importance and finding long-term owners for pieces in the monolith",
    "start": "1826000",
    "end": "1831520"
  },
  {
    "text": "finally from a more human perspective we're recognizing that the deprecation work is impactful",
    "start": "1831520",
    "end": "1838640"
  },
  {
    "text": "it might not be as flashy as building a new product but cleaning up our tech",
    "start": "1838640",
    "end": "1843919"
  },
  {
    "text": "debt will enable us to build better cleaner products in the future with higher efficiency",
    "start": "1843919",
    "end": "1851840"
  },
  {
    "start": "1851000",
    "end": "1919000"
  },
  {
    "text": "so we're keeping at it the team effort we've learned from previous migration",
    "start": "1853600",
    "end": "1859279"
  },
  {
    "text": "experiences all the migration experiences really",
    "start": "1859279",
    "end": "1864960"
  },
  {
    "text": "settle around what does it take to improve engineering",
    "start": "1864960",
    "end": "1870000"
  },
  {
    "text": "productivity one way is restructuring teams in a way to collaborate whenever there's a new",
    "start": "1870000",
    "end": "1876480"
  },
  {
    "text": "architecture another is to invest heavily into",
    "start": "1876480",
    "end": "1883279"
  },
  {
    "text": "developer productivity with tools and automation such as code generation",
    "start": "1883279",
    "end": "1889440"
  },
  {
    "text": "migrations are tiring work so it's important to make it as easy for engineers as",
    "start": "1889440",
    "end": "1894559"
  },
  {
    "text": "possible we're increasing the focus of teams",
    "start": "1894559",
    "end": "1901039"
  },
  {
    "text": "with more platformization of teams and central domains",
    "start": "1901039",
    "end": "1906159"
  },
  {
    "text": "and finally building with the expectation that there's going to be new challenges",
    "start": "1906159",
    "end": "1912640"
  },
  {
    "text": "as a company continues to evolve and grow the challenge cycle will continue to start once again",
    "start": "1912640",
    "end": "1920679"
  },
  {
    "text": "in closing airbnb decentralizing into microservices",
    "start": "1921200",
    "end": "1926399"
  },
  {
    "text": "created both technical and human challenges but as we look back many of these",
    "start": "1926399",
    "end": "1933279"
  },
  {
    "text": "growing pains were necessary parts of our evolving journey to where we are right now",
    "start": "1933279",
    "end": "1939200"
  },
  {
    "text": "we didn't know what we didn't know at the time and needed the migration and incremental steps",
    "start": "1939200",
    "end": "1946000"
  },
  {
    "text": "of our services to let us know how our system worked where the pain",
    "start": "1946000",
    "end": "1951279"
  },
  {
    "text": "points were and how we can continue improving going into the future",
    "start": "1951279",
    "end": "1957200"
  },
  {
    "text": "thanks for listening to my talk today",
    "start": "1957440",
    "end": "1961720"
  },
  {
    "text": "so there's quite a lot of questions which came through around the migration um so one of them",
    "start": "1963279",
    "end": "1968880"
  },
  {
    "text": "was could you maybe just tell a little bit more about the dedicated service migration team and what kind of tasks",
    "start": "1968880",
    "end": "1975279"
  },
  {
    "text": "they were actually performing and there's a related question which sort of says that if if there was a dedicated",
    "start": "1975279",
    "end": "1981519"
  },
  {
    "text": "team to do this um it sounds like the team creating the microservices was not the team actually owning the service in",
    "start": "1981519",
    "end": "1987760"
  },
  {
    "text": "the long term so how did how did that work yeah so we had the centralized team it",
    "start": "1987760",
    "end": "1993679"
  },
  {
    "text": "was um formed with about four",
    "start": "1993679",
    "end": "1999120"
  },
  {
    "text": "building and so they were the ones kind of building the initial services working with our service framework team and",
    "start": "2002480",
    "end": "2008240"
  },
  {
    "text": "infrastructure team to make it a lot easier and then once we felt comfortable building a few services",
    "start": "2008240",
    "end": "2015279"
  },
  {
    "text": "within that centralized team they then went to work with our product teams to help get them onto services so we",
    "start": "2015279",
    "end": "2021919"
  },
  {
    "text": "focused on our core flows for airbnb that's our search page our homes description page and our",
    "start": "2021919",
    "end": "2029440"
  },
  {
    "text": "payments page so we had an engineer from the core team go pick",
    "start": "2029440",
    "end": "2035360"
  },
  {
    "text": "practices and work with them as a way to better educate the best practices for service building so we didn't have",
    "start": "2037120",
    "end": "2042960"
  },
  {
    "text": "people building services more bespoke like we wanted to have a standardized way and encourage folks to",
    "start": "2042960",
    "end": "2050158"
  },
  {
    "text": "do this sort of migration as we recognize that it was",
    "start": "2050159",
    "end": "2055679"
  },
  {
    "text": "a bit of a lift more to migrate to a service instead of just continuing to develop in the model so this is a way to",
    "start": "2055679",
    "end": "2062079"
  },
  {
    "text": "help some of our critical pieces start and then the team disbanded after two",
    "start": "2062079",
    "end": "2067200"
  },
  {
    "text": "years once the migration got enough",
    "start": "2067200",
    "end": "2071800"
  },
  {
    "text": "okay great thank you so it wasn't that the um uh the migration team actually i just",
    "start": "2074800",
    "end": "2081118"
  },
  {
    "text": "did it and handed it over the fence um it was more collaborative kind of helping best practices and things like",
    "start": "2081119",
    "end": "2086720"
  },
  {
    "text": "that yeah yeah it was teaching best practices",
    "start": "2086720",
    "end": "2092000"
  },
  {
    "text": "and also taking the learnings from what the product teams are struggling with and being a liaison with their infrastructure teams to ensure that",
    "start": "2092000",
    "end": "2099760"
  },
  {
    "text": "we're building the right infrastructures to support the actual needs of the service owners okay all right let me try and get one",
    "start": "2099760",
    "end": "2106720"
  },
  {
    "text": "more in there um so um let's see um",
    "start": "2106720",
    "end": "2112960"
  },
  {
    "text": "why not break the micro services down following a domain driven approach",
    "start": "2113760",
    "end": "2119838"
  },
  {
    "text": "um we did do that a bit i wouldn't say we were so",
    "start": "2120320",
    "end": "2125839"
  },
  {
    "text": "strict to call it domain driven um i think for us a",
    "start": "2125839",
    "end": "2133200"
  },
  {
    "text": "challenge we had is that we actually didn't have too much understanding of what the major domains",
    "start": "2133200",
    "end": "2139359"
  },
  {
    "text": "were in our month we had an idea of what some of the larger files where we",
    "start": "2139359",
    "end": "2145839"
  },
  {
    "text": "views etc but there are a lot of different features that were appended onto these",
    "start": "2146480",
    "end": "2152560"
  },
  {
    "text": "main domains in the monolith so it was difficult for us to just go about it with a clear approach",
    "start": "2152560",
    "end": "2159599"
  },
  {
    "text": "and breaking it into services gave us a better observability of how the different pieces interacted and which",
    "start": "2159599",
    "end": "2166480"
  },
  {
    "text": "parts were core which parts were not all right um",
    "start": "2166480",
    "end": "2173119"
  },
  {
    "text": "i think i think we're actually out of time now if i'm not mistaken um if i can",
    "start": "2173119",
    "end": "2179119"
  },
  {
    "text": "just check with the um uh refresh and um",
    "start": "2179119",
    "end": "2186720"
  },
  {
    "text": "are we still good to go with questions more questions yeah or",
    "start": "2186720",
    "end": "2192480"
  },
  {
    "text": "um i can just carry on if that's the case i think we're",
    "start": "2192480",
    "end": "2198160"
  },
  {
    "text": "slightly out of time but um i don't see any maybe i'm not getting messages on my",
    "start": "2198160",
    "end": "2203520"
  },
  {
    "text": "side um i okay i i think we're",
    "start": "2203520",
    "end": "2209760"
  },
  {
    "text": "hopefully we're still okay it's time to go to the hangout with speakers i think",
    "start": "2209760",
    "end": "2215280"
  },
  {
    "text": "um all right so thank you everybody thank you so much um jessica uh thank you so",
    "start": "2215280",
    "end": "2221359"
  },
  {
    "text": "much for your your talk it was great and for everybody else if you can join us in the in the hangouts um jessica can",
    "start": "2221359",
    "end": "2226880"
  },
  {
    "text": "answer all the other hundreds of questions that have come through so thank you so much for for joining us",
    "start": "2226880",
    "end": "2232480"
  },
  {
    "text": "here and i hope you'll also join for the final session coming up with chris thanks everyone bye",
    "start": "2232480",
    "end": "2239950"
  },
  {
    "text": "[Music]",
    "start": "2239950",
    "end": "2247820"
  },
  {
    "text": "you",
    "start": "2250079",
    "end": "2252160"
  }
]