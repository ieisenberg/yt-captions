[
  {
    "text": "thanks everyone for having me thanks for coming to this first talk of the day I'm just gonna move this out of the way",
    "start": "4530",
    "end": "9600"
  },
  {
    "text": "great so yeah so we're talking about envoy and at lyft and obviously server smash which is a very exciting topic but",
    "start": "9600",
    "end": "17010"
  },
  {
    "text": "I guess the one thing that I want to say is that we've been doing a service mesh architecture at lyft for almost three",
    "start": "17010",
    "end": "23790"
  },
  {
    "text": "years now and it's been super successful so very happy to share that with all of",
    "start": "23790",
    "end": "28920"
  },
  {
    "text": "you so first let's just go back about five years just to give some context this is lifts architecture five years",
    "start": "28920",
    "end": "35760"
  },
  {
    "text": "ago it's a very quote simple architecture obviously we have a bunch of clients connecting over the Internet",
    "start": "35760",
    "end": "43050"
  },
  {
    "text": "we're entirely cloud hosted so we have a single AWS ELB we have a monolith",
    "start": "43050",
    "end": "49260"
  },
  {
    "text": "written in PHP and Apache and our data stores MongoDB and you know one thing to",
    "start": "49260",
    "end": "56129"
  },
  {
    "text": "point out is that this is a quote very simple architecture but even at this time you know almost five years ago",
    "start": "56129",
    "end": "62639"
  },
  {
    "text": "we're starting to see operational problems just around things like networking and observability and trying",
    "start": "62639",
    "end": "68820"
  },
  {
    "text": "to understand what's actually going on right like if there's problems is it in the client is it in the Internet is in",
    "start": "68820",
    "end": "75659"
  },
  {
    "text": "Amazon's load balancer is in the monolith is it in MongoDB without proper",
    "start": "75659",
    "end": "81000"
  },
  {
    "text": "stats proper logging and proper tracing it can be very difficult to actually tell so fast forward two years beyond",
    "start": "81000",
    "end": "88590"
  },
  {
    "text": "that lyft has started its micro service journey we now have clients we obviously",
    "start": "88590",
    "end": "94259"
  },
  {
    "text": "go over the Internet we still have an external AWS ELB but now we've expanded into a micro service architecture so",
    "start": "94259",
    "end": "100979"
  },
  {
    "text": "we've got our monolith and PHP we're building a bunch of different services and Python we're starting to think about",
    "start": "100979",
    "end": "107609"
  },
  {
    "text": "writing services and go now we're using an entire fleet of internal load",
    "start": "107609",
    "end": "112829"
  },
  {
    "text": "balancers to do service discovery we've got two different data stores we're using MongoDB we're using dynamo DB and",
    "start": "112829",
    "end": "119909"
  },
  {
    "text": "obviously intermixed in there you know to help with various queuing problems we've got some H a proxy we've got some",
    "start": "119909",
    "end": "126359"
  },
  {
    "text": "NS q and and really the key takeaway here is that our complexity from the",
    "start": "126359",
    "end": "132629"
  },
  {
    "text": "five year ago slide to the three years ago slide here is you know complexities probably gone off",
    "start": "132629",
    "end": "138689"
  },
  {
    "text": "by an order of magnitude and we're just having more and more problems around how",
    "start": "138689",
    "end": "145109"
  },
  {
    "text": "do we know we're failures or how do we know what's actually breaking and it's it's getting so bad at this point that",
    "start": "145109",
    "end": "152459"
  },
  {
    "text": "you know developers are trying to write micro-services because we're obviously telling them to do so because we can",
    "start": "152459",
    "end": "158220"
  },
  {
    "text": "scale are kind of human organization but because they don't quite understand",
    "start": "158220",
    "end": "163769"
  },
  {
    "text": "where these failures are occurring where's that latency occurring they don't necessarily trust these micro",
    "start": "163769",
    "end": "169409"
  },
  {
    "text": "services so this architecture has become complicated it's trying to solve human",
    "start": "169409",
    "end": "174569"
  },
  {
    "text": "scaling problems but it's not necessarily scaling because developers",
    "start": "174569",
    "end": "179609"
  },
  {
    "text": "don't actually trust that architecture so let's go through kind of point by",
    "start": "179609",
    "end": "184620"
  },
  {
    "text": "point by point some of the problems that we were having three years ago first problem which many people are facing is",
    "start": "184620",
    "end": "191639"
  },
  {
    "text": "that lift was already using multiple languages and multiple application frameworks so we were building our",
    "start": "191639",
    "end": "197730"
  },
  {
    "text": "monolith on PHP we had a bunch of services in Python we actually had front-end stuff written in node starting",
    "start": "197730",
    "end": "204870"
  },
  {
    "text": "to bring online some NGO services so you know each of these languages obviously",
    "start": "204870",
    "end": "210209"
  },
  {
    "text": "we have to figure out how do they handle our pcs how do they make RPC calls how",
    "start": "210209",
    "end": "215609"
  },
  {
    "text": "do we do stats how do we do logging how do we do tracing and that's a very complicated problem to replicate across",
    "start": "215609",
    "end": "221790"
  },
  {
    "text": "all those different languages already seeing many different protocols we've got h1 h2 we're starting to think about",
    "start": "221790",
    "end": "228810"
  },
  {
    "text": "GRP see we have MongoDB dynamodb we have we have Redis so just trying to wrap",
    "start": "228810",
    "end": "236190"
  },
  {
    "text": "your head around all of the all the protocols that make up lift you know it's a very non non-trivial thing",
    "start": "236190",
    "end": "243590"
  },
  {
    "text": "we're obviously using now multiple black box load balancers so these are devices that are that are virtual they're",
    "start": "243590",
    "end": "250019"
  },
  {
    "text": "provided by Amazon and you know that the problem with the black box load balancers is that again it can be",
    "start": "250019",
    "end": "256859"
  },
  {
    "text": "difficult to understand when the load balancer fails is it my application problem is it within the load balancer",
    "start": "256859",
    "end": "263570"
  },
  {
    "text": "you know how do I understand what the load balancers actually doing so at the time",
    "start": "263570",
    "end": "269159"
  },
  {
    "text": "this is about three years ago the load balancers would only output logs into s3 so as an operator I'd have to go to s3",
    "start": "269159",
    "end": "276929"
  },
  {
    "text": "find the logs attempt to correlate them you know and that was a very very difficult thing so that was a major",
    "start": "276929",
    "end": "282929"
  },
  {
    "text": "operational issue really the big one and this will be a theme of my talk is a",
    "start": "282929",
    "end": "288389"
  },
  {
    "text": "lack of consistent observability and what you'll find when you're operating these micro service architectures is",
    "start": "288389",
    "end": "294569"
  },
  {
    "text": "that fundamentally your problems are very often going to come down to networking and observability and that's",
    "start": "294569",
    "end": "301349"
  },
  {
    "text": "because the networking fails and if you can't understand where it's failing it's very difficult to do anything about it",
    "start": "301349",
    "end": "307740"
  },
  {
    "text": "and when you're dealing with all of these languages all these different languages and frameworks all these",
    "start": "307740",
    "end": "313169"
  },
  {
    "text": "different protocols all these different load balancers you're lucky if you not only get stats logging and tracing but",
    "start": "313169",
    "end": "320279"
  },
  {
    "text": "you know you're really lucky if they're actually consistent so each of these devices are going to output difference",
    "start": "320279",
    "end": "325589"
  },
  {
    "text": "that's different logs different types of traces and from an operational standpoint trying to stitch all that",
    "start": "325589",
    "end": "332099"
  },
  {
    "text": "together very difficult even worse you know we're told as distributed system",
    "start": "332099",
    "end": "338219"
  },
  {
    "text": "developers that we need to do all these best practices around things like retry circuit breaking rate limiting timeouts",
    "start": "338219",
    "end": "344929"
  },
  {
    "text": "but again because of the different languages different frameworks different types of code what you'll find in most",
    "start": "344929",
    "end": "351929"
  },
  {
    "text": "organizations is that people either they have partial implementations or they have no implementations or if they have",
    "start": "351929",
    "end": "358529"
  },
  {
    "text": "implementations they're not consistent so again it's all about cognitive load trying to sit there and understand you",
    "start": "358529",
    "end": "365129"
  },
  {
    "text": "know what these applications are doing if one of them is doing exponential back-off when its retrying and one of",
    "start": "365129",
    "end": "371189"
  },
  {
    "text": "them is not that can be a very complicated problem most organizations",
    "start": "371189",
    "end": "376829"
  },
  {
    "text": "including lyft you know we were doing authentication at the edge but basically no authorization for for service to",
    "start": "376829",
    "end": "385529"
  },
  {
    "text": "service calls you know and that that obviously works very smaller org but as you're trying to build your micro",
    "start": "385529",
    "end": "391649"
  },
  {
    "text": "service architecture you know kind of doing these things can lead to a more robust platform so that was a problem",
    "start": "391649",
    "end": "398060"
  },
  {
    "text": "and I talked about this but really again it's all about these per language and per framework libraries so if I have to",
    "start": "398060",
    "end": "406130"
  },
  {
    "text": "support five different languages if I want to have consistent observability retry circuit breaking you know I have",
    "start": "406130",
    "end": "414650"
  },
  {
    "text": "to re-implement it in all of these different libraries and that is for a smaller organization it is almost",
    "start": "414650",
    "end": "421040"
  },
  {
    "text": "impossible so really what this comes down to is that it is just extremely",
    "start": "421040",
    "end": "427370"
  },
  {
    "text": "difficult to debug and that's what I was showing in that last slide so developers have an architecture they're being told",
    "start": "427370",
    "end": "433400"
  },
  {
    "text": "to write micro services things are breaking they don't necessarily understand where's that latency coming",
    "start": "433400",
    "end": "439760"
  },
  {
    "text": "from where those failures coming from and that leads to a lack of trust and what I like to say is that as people are",
    "start": "439760",
    "end": "448010"
  },
  {
    "text": "rolling out their micro service architectures if your developers do not trust your micro service substrate they",
    "start": "448010",
    "end": "454940"
  },
  {
    "text": "will not use it so what we found at lyft about again about three years ago is that we were trying to roll out micro",
    "start": "454940",
    "end": "461270"
  },
  {
    "text": "services and then developers didn't trust the micro service platform because",
    "start": "461270",
    "end": "466280"
  },
  {
    "text": "of all of these problems and they would go back and they would write their features back in the monolith so we were",
    "start": "466280",
    "end": "471560"
  },
  {
    "text": "in the worst of all possible worlds we had a micro service rollout the people",
    "start": "471560",
    "end": "476840"
  },
  {
    "text": "didn't trust people who are still writing their features back in that monolith so that was a bad situation so",
    "start": "476840",
    "end": "482140"
  },
  {
    "text": "it was a really big and confusing mess and we were trying to figure out what",
    "start": "482140",
    "end": "487790"
  },
  {
    "text": "what do we do about this so that brings us to envoy so envoy kind of our our project plug is",
    "start": "487790",
    "end": "495500"
  },
  {
    "text": "the network should be transparent to applications when network and application problems do occur it should",
    "start": "495500",
    "end": "500570"
  },
  {
    "text": "be easy to figure out the source of the problem I like to say that you know every minute that application developers",
    "start": "500570",
    "end": "508250"
  },
  {
    "text": "are not writing business logic is time wasted if you're a product manager and you figure out that your developers are",
    "start": "508250",
    "end": "514969"
  },
  {
    "text": "spending 60 percent of their time working on deployment or networking or",
    "start": "514970",
    "end": "520159"
  },
  {
    "text": "looking at graphs like that's time that they're not spending writing application",
    "start": "520160",
    "end": "525440"
  },
  {
    "text": "code or app code that can actually make your company and that is a big problem so we would",
    "start": "525440",
    "end": "531230"
  },
  {
    "text": "like to abstract as much as possible and then when it can't be abstracted because",
    "start": "531230",
    "end": "536420"
  },
  {
    "text": "things you know things fail we like to help people figure out what the source of the failure is so that we can",
    "start": "536420",
    "end": "541580"
  },
  {
    "text": "actually fix it so service mesh is obviously a super big buzzword right now",
    "start": "541580",
    "end": "547610"
  },
  {
    "text": "so I'm sure you've all heard of it but just to give a super quick refresher the",
    "start": "547610",
    "end": "553460"
  },
  {
    "text": "idea behind the service mash is that we have different clusters of applications in here we have service a B C and D we",
    "start": "553460",
    "end": "561470"
  },
  {
    "text": "co-locate a sidecar proxy next to every service instance so that's something",
    "start": "561470",
    "end": "566900"
  },
  {
    "text": "running on on localhost and when service B wants to talk to service C instead of",
    "start": "566900",
    "end": "573320"
  },
  {
    "text": "figuring out how to talk to service C directly it talks to its sidecar proxy the sidecar proxy will do things like",
    "start": "573320",
    "end": "580490"
  },
  {
    "text": "service discovery load balancing rate limiting circuit breaking retry it'll",
    "start": "580490",
    "end": "585920"
  },
  {
    "text": "send that request over to the other side car proxy on service C that way they can",
    "start": "585920",
    "end": "591410"
  },
  {
    "text": "link up traces and logs and stats the sidecar proxy on C will deliver that",
    "start": "591410",
    "end": "597320"
  },
  {
    "text": "request to serve as C and then it'll go all the way back and the idea is that both service B and service C they're",
    "start": "597320",
    "end": "604550"
  },
  {
    "text": "only aware of the sidecar proxy that's running on localhost so the network has been fully abstracted for them and the",
    "start": "604550",
    "end": "611570"
  },
  {
    "text": "entire networking topology and all of the complexity around things again like service discovery and retry and load",
    "start": "611570",
    "end": "618260"
  },
  {
    "text": "balancing those have all been hidden from the application developer which is a very powerful paradigm so let's talk",
    "start": "618260",
    "end": "625430"
  },
  {
    "text": "about envoy specifically so as I was just kind of speaking out of envoy as an",
    "start": "625430",
    "end": "630560"
  },
  {
    "text": "out of process architecture so you know there's two general ways that that developers solve this problem one of",
    "start": "630560",
    "end": "638060"
  },
  {
    "text": "them is a library based approach so that's like hysterics and one of them is an out of process approach if you're",
    "start": "638060",
    "end": "645500"
  },
  {
    "text": "using something like Java a library like hysterics is super-powerful and it's an absolutely great solution the problem is",
    "start": "645500",
    "end": "652460"
  },
  {
    "text": "is that if you're if your architecture is five or six or seven different languages you can't you can't use",
    "start": "652460",
    "end": "658040"
  },
  {
    "text": "historic sit doesn't actually work so the idea behind the out of process rket I can build a self-contained server a",
    "start": "658040",
    "end": "665190"
  },
  {
    "text": "self-contained proxy it can run alongside any application language it",
    "start": "665190",
    "end": "670860"
  },
  {
    "text": "doesn't matter whether it's Java or Haskell or something else and I can build a bunch of this complicated",
    "start": "670860",
    "end": "676769"
  },
  {
    "text": "functionality that we should do once I can build it in one place so I can build it in that sidecar proxy and then my",
    "start": "676769",
    "end": "683610"
  },
  {
    "text": "application doesn't have to have implementations of things like like service discovery and circuit braking",
    "start": "683610",
    "end": "689519"
  },
  {
    "text": "and rate limiting because we're building this code in one place we obviously want",
    "start": "689519",
    "end": "695189"
  },
  {
    "text": "it to be very high performance and very low latency so we focused a lot on that at its core envoy as an l3 l4 filter",
    "start": "695189",
    "end": "704339"
  },
  {
    "text": "architecture what that means is that at its core envoy is actually a TCP proxy",
    "start": "704339",
    "end": "709860"
  },
  {
    "text": "which means that it can be used for both you know raw TCP traffic so just bytes",
    "start": "709860",
    "end": "715319"
  },
  {
    "text": "in bytes out it can be used for MongoDB it can be used for Redis it can be used",
    "start": "715319",
    "end": "720959"
  },
  {
    "text": "for H HTTP so it's a it's a very general architecture of course a large portion",
    "start": "720959",
    "end": "729060"
  },
  {
    "text": "of the Internet is is based on rest so we have focused a lot on that layer so",
    "start": "729060",
    "end": "734670"
  },
  {
    "text": "we have a layer seven protocol layer which operates on things like headers body trailers on boy was written to be",
    "start": "734670",
    "end": "744060"
  },
  {
    "text": "an h2 proxy first this is actually very important just because the industry is",
    "start": "744060",
    "end": "749310"
  },
  {
    "text": "moving towards G RPC and h2 and at the time the Envoy came out it was actually",
    "start": "749310",
    "end": "755399"
  },
  {
    "text": "fairly rare for a proxy to be able to handle both h1 and h2 traffic on both",
    "start": "755399",
    "end": "762240"
  },
  {
    "text": "sides so that means h1 front end to h2 back-end or h2 back end to h1 front end",
    "start": "762240",
    "end": "769699"
  },
  {
    "text": "obviously on boy performs a whole bunch of service discovery we do active and passive health checking so active health",
    "start": "769699",
    "end": "776309"
  },
  {
    "text": "checking is the idea of sending a slash health check ping to a back-end every",
    "start": "776309",
    "end": "781379"
  },
  {
    "text": "say 30 seconds and kind of seeing if that back-end is up passive health checking is actually monitoring the",
    "start": "781379",
    "end": "787620"
  },
  {
    "text": "traffic as it's happening so what on boy can do is let's say a particular back-end returns three 500s in a",
    "start": "787620",
    "end": "795420"
  },
  {
    "text": "on boy can say okay this back-end is probably bad I'm gonna boot that back in for 30 seconds you know hope that it",
    "start": "795420",
    "end": "802679"
  },
  {
    "text": "gets better or if it's not maybe active help checking will will then kick in we",
    "start": "802679",
    "end": "808470"
  },
  {
    "text": "do a whole lot of load balancing so that's you know various different load balancing algorithms we do shadowing",
    "start": "808470",
    "end": "814769"
  },
  {
    "text": "would you retry and again you'll hear me talk about it more but observability",
    "start": "814769",
    "end": "820410"
  },
  {
    "text": "observability observability you know I I believe on boy has best-in-class observer ability that's around stats",
    "start": "820410",
    "end": "827009"
  },
  {
    "text": "logging as well as tracing we have a huge amount of authentication",
    "start": "827009",
    "end": "832949"
  },
  {
    "text": "authorization primitives and that's actually a huge focus of the larger community right now and this this I",
    "start": "832949",
    "end": "839399"
  },
  {
    "text": "think is one of the most complicated things to get right so kind of centralizing this logic in one place is",
    "start": "839399",
    "end": "844800"
  },
  {
    "text": "is very good and finally one thing to point out is that we use envoy as both a",
    "start": "844800",
    "end": "852389"
  },
  {
    "text": "middle proxy a service proxy as well as an edge proxy and historically what you",
    "start": "852389",
    "end": "858179"
  },
  {
    "text": "find in most architectures is a lot of people have put nginx at the edge and",
    "start": "858179",
    "end": "863399"
  },
  {
    "text": "then they're using a cheap proxy in the middle and that's fine those are both fantastic proxies but what you'll find",
    "start": "863399",
    "end": "870839"
  },
  {
    "text": "in those situations is that the operational burden of understanding how to operate nginx at the edge an H a",
    "start": "870839",
    "end": "878040"
  },
  {
    "text": "proxy in your internal architecture it's just two sophisticated pieces of",
    "start": "878040",
    "end": "883350"
  },
  {
    "text": "software that you have to learn they have different stats different logging different tracing and what's interesting",
    "start": "883350",
    "end": "889079"
  },
  {
    "text": "is that if you look at what an edge proxy does so an edge proxy sits on your internet gateway and maybe does like",
    "start": "889079",
    "end": "894660"
  },
  {
    "text": "rate-limiting and often and stuff like that is most of what the edge proxy does",
    "start": "894660",
    "end": "900839"
  },
  {
    "text": "I would say 95 percent or even 99 percent is exactly the same as what your middle proxy does it does service",
    "start": "900839",
    "end": "907139"
  },
  {
    "text": "discovery it does load balancing it does you know you know those those types of",
    "start": "907139",
    "end": "912389"
  },
  {
    "text": "things so running the same software on both the edge and in the middle is very",
    "start": "912389",
    "end": "918240"
  },
  {
    "text": "powerful just just from an Operations perspective ok so let's focus on observability so as",
    "start": "918240",
    "end": "924720"
  },
  {
    "text": "i've said several times now observability you know and my opinion really is the most important thing that envoy provides and the",
    "start": "924720",
    "end": "931520"
  },
  {
    "text": "overall service match mainly because networks break right I mean we're",
    "start": "931520",
    "end": "936530"
  },
  {
    "text": "running on very sophisticated architectures now we have physical hardware we have virtual hardware we",
    "start": "936530",
    "end": "942680"
  },
  {
    "text": "have containers we have all these different things and there's many layers of abstraction and it can be really",
    "start": "942680",
    "end": "948560"
  },
  {
    "text": "difficult to understand where's that failure actually occurring so having really robust observability to figure",
    "start": "948560",
    "end": "955130"
  },
  {
    "text": "out on a point-to-point basis you know where these failures are occurring is incredibly powerful",
    "start": "955130",
    "end": "960740"
  },
  {
    "text": "so when all a traffic in your infrastructure trans is through envoy it",
    "start": "960740",
    "end": "966860"
  },
  {
    "text": "provides a single place where we can do a couple of different things we can again produce consistent stats for every",
    "start": "966860",
    "end": "972710"
  },
  {
    "text": "hop we can create and propagate a stable request trace ID that's very important",
    "start": "972710",
    "end": "978740"
  },
  {
    "text": "if we're gonna do tracing or if we're gonna do stable sample logging so stable sample logging is the idea that if I",
    "start": "978740",
    "end": "985190"
  },
  {
    "text": "want to log 1% but I want it I want the same 1% of all requests to be logged",
    "start": "985190",
    "end": "991250"
  },
  {
    "text": "across the entire infrastructure instead of 1% of all random requests which is not as as useful you can do that through",
    "start": "991250",
    "end": "997670"
  },
  {
    "text": "envoy and again we get consistent logging and we can unlock tracing so",
    "start": "997670",
    "end": "1003850"
  },
  {
    "text": "before we dive into some examples of observability at left you know this is lifts architecture today and we still",
    "start": "1003850",
    "end": "1011800"
  },
  {
    "text": "have the clients we still have the internet obviously we have a set of edge envoy machines we still have our legacy",
    "start": "1011800",
    "end": "1019690"
  },
  {
    "text": "monolith though I'm told that it will be gone by the end of the quarter and not not quite sure if I believe that but",
    "start": "1019690",
    "end": "1025329"
  },
  {
    "text": "it's quite close and then and then we have a lot of services written and go we",
    "start": "1025330",
    "end": "1030579"
  },
  {
    "text": "have a lot of servers written Python and not not showing here we have obviously other things written a node and Java and",
    "start": "1030580",
    "end": "1036459"
  },
  {
    "text": "C++ and and etc and now everything at live talks through envoy so it's a",
    "start": "1036460",
    "end": "1042850"
  },
  {
    "text": "hundred percent traffic coverage there's no communication at lip that does not occur through envoy so it is a complete",
    "start": "1042850",
    "end": "1049390"
  },
  {
    "text": "hundred percent full full mesh on the backend we talked to MongoDB Redis dynamo obviously lyft uses you know 40",
    "start": "1049390",
    "end": "1057580"
  },
  {
    "text": "or 50 different external partners staff logging and tracing and we have our management server which",
    "start": "1057580",
    "end": "1063080"
  },
  {
    "text": "I will talk about later so now I'm gonna go in and I'm actually going to talk a",
    "start": "1063080",
    "end": "1068900"
  },
  {
    "text": "little bit about kind of the developer experience that we give people at at",
    "start": "1068900",
    "end": "1074690"
  },
  {
    "text": "lyft and one of the things that envoy allows us to do which i think is one of the most powerful things is that because",
    "start": "1074690",
    "end": "1081650"
  },
  {
    "text": "we have again all this consistent staff logging and tracing we can build very",
    "start": "1081650",
    "end": "1087260"
  },
  {
    "text": "powerful default dashboards for people so when you run a service at lyft no",
    "start": "1087260",
    "end": "1092510"
  },
  {
    "text": "matter what you do you can obviously modify that dashboard but we give you a set of you know default panels on your",
    "start": "1092510",
    "end": "1099470"
  },
  {
    "text": "dashboards that you just get for free they give you a huge amount of basic information and not only is that",
    "start": "1099470",
    "end": "1105740"
  },
  {
    "text": "information really cool but it's consistent so if people are actually debugging across the infrastructure and",
    "start": "1105740",
    "end": "1112130"
  },
  {
    "text": "they're going to different you know kind of services dashboards they can expect that at least the top few rows are going",
    "start": "1112130",
    "end": "1119060"
  },
  {
    "text": "to be similar and again as I like to say you know from an operational perspective it's all",
    "start": "1119060",
    "end": "1124280"
  },
  {
    "text": "about reducing cognitive load it's all about when you're firefighting trying to make things as consistent as possible so",
    "start": "1124280",
    "end": "1130760"
  },
  {
    "text": "that when people are digging in you know they're not confused about oh this looks like this one way but it looks like this",
    "start": "1130760",
    "end": "1136970"
  },
  {
    "text": "the other way so what I'm showing you here is that the per service panel that we that would that we give people and",
    "start": "1136970",
    "end": "1143810"
  },
  {
    "text": "you know a couple of things that I think are neat that I'll point out is on the top left you know we give people links",
    "start": "1143810",
    "end": "1149840"
  },
  {
    "text": "where they can click out to github deploy you know code health like various",
    "start": "1149840",
    "end": "1154970"
  },
  {
    "text": "other things one of the coolest things that I think that we do that I we've done in the last six months is those",
    "start": "1154970",
    "end": "1162020"
  },
  {
    "text": "dots that I'm showing there those are traces that are actually overlaid onto",
    "start": "1162020",
    "end": "1167060"
  },
  {
    "text": "our onto our dashboards and you know there's been a lot of discussion recently about oh like you know people",
    "start": "1167060",
    "end": "1173600"
  },
  {
    "text": "are investing and tracing is it really useful and you know my standpoint on tracing is that it's not really useful",
    "start": "1173600",
    "end": "1180560"
  },
  {
    "text": "from a firefighting perspective but from a debugging perspective for debugging",
    "start": "1180560",
    "end": "1185960"
  },
  {
    "text": "kind of interesting functionality problems or performance problems there there's there are very few things as",
    "start": "1185960",
    "end": "1192410"
  },
  {
    "text": "powerful as what a trace view can do and what we found is that now that we're overlaying these dots on these top-level",
    "start": "1192410",
    "end": "1199440"
  },
  {
    "text": "dashboards developers can actually click on those dots and they'll go out to our",
    "start": "1199440",
    "end": "1204509"
  },
  {
    "text": "tour trace UI and that has driven a really large increase in traffic to our",
    "start": "1204509",
    "end": "1210329"
  },
  {
    "text": "tracing system and kind of gotten developers to click on these things and say oh this request has long long",
    "start": "1210329",
    "end": "1216959"
  },
  {
    "text": "response time why right so that's been very cool so again so we show a bunch of top-level information like response time",
    "start": "1216959",
    "end": "1223949"
  },
  {
    "text": "call volume per second error rate we allow people to click on those traces we",
    "start": "1223949",
    "end": "1230519"
  },
  {
    "text": "also do per caller ingress data so again because all calls happen through envoy",
    "start": "1230519",
    "end": "1236279"
  },
  {
    "text": "we have very good information on who is calling each service so in the bottom left there we have requests per second",
    "start": "1236279",
    "end": "1243149"
  },
  {
    "text": "broken down on a per caller basis so if I am the user service and I have service",
    "start": "1243149",
    "end": "1248429"
  },
  {
    "text": "a B and C calling me I can see how many requests per second are coming from each of those services what is the error rate",
    "start": "1248429",
    "end": "1255119"
  },
  {
    "text": "per second what is the total errors per second so that is that is a very powerful view so this is the trace view",
    "start": "1255119",
    "end": "1262379"
  },
  {
    "text": "so with with envoy we again were able to obtain a 100% trace coverage and I think",
    "start": "1262379",
    "end": "1270719"
  },
  {
    "text": "a lot of times when people give up on tracing it's because they don't have a hundred percent coverage and if you",
    "start": "1270719",
    "end": "1275849"
  },
  {
    "text": "don't have a hundred percent coverage when you're tracing and the traces have gaps in them it's it's not not very",
    "start": "1275849",
    "end": "1281759"
  },
  {
    "text": "useful and people kind of give up but that service mesh allows you to actually dig in and because we have all of that",
    "start": "1281759",
    "end": "1287940"
  },
  {
    "text": "traffic transiting it can just flip the switch and boom we have a hundred",
    "start": "1287940",
    "end": "1293279"
  },
  {
    "text": "percent so here's a sample view of a request coming in from our iOS app it's",
    "start": "1293279",
    "end": "1298679"
  },
  {
    "text": "coming in from our edge envoy obviously we're doing a bunch of rate-limiting and auth and onward and then we have a bunch",
    "start": "1298679",
    "end": "1306569"
  },
  {
    "text": "of interesting tags on that right side and again because these views are clickable from you know the other",
    "start": "1306569",
    "end": "1312629"
  },
  {
    "text": "top-level UI from the dashboard it allows people to kind of go back and forth which is very powerful from a",
    "start": "1312629",
    "end": "1319859"
  },
  {
    "text": "logging standpoint we are using Cabana as well as elasticsearch and what I've",
    "start": "1319859",
    "end": "1325440"
  },
  {
    "text": "highlighted here is a stable request ID this request ID is generated via envoy",
    "start": "1325440",
    "end": "1330880"
  },
  {
    "text": "it's a stable ID that's propagated around lift system and that stable ID is",
    "start": "1330880",
    "end": "1337480"
  },
  {
    "text": "used again in all our logs all of our traces so when developers are trying to",
    "start": "1337480",
    "end": "1342580"
  },
  {
    "text": "correlate things they can search on that on that unique ID and that will transit our entire system here is another",
    "start": "1342580",
    "end": "1351850"
  },
  {
    "text": "dashboard that's very popular at lyft this is what we call our service to service template dashboard so what we",
    "start": "1351850",
    "end": "1358000"
  },
  {
    "text": "have here is a drop down and we have every service at lyft that you can",
    "start": "1358000",
    "end": "1364450"
  },
  {
    "text": "specify in that drop down and you can specify both the origin service and the",
    "start": "1364450",
    "end": "1370630"
  },
  {
    "text": "destination service and when you populate both of those dropdowns this dashboard will give you information from",
    "start": "1370630",
    "end": "1376780"
  },
  {
    "text": "both the caller and the callee perspective that's very detailed so if a developer you know is looking at their",
    "start": "1376780",
    "end": "1383380"
  },
  {
    "text": "service the service graph we're sorry they're their top-level service dashboard and they're seeing oh you know",
    "start": "1383380",
    "end": "1389530"
  },
  {
    "text": "I'm seeing a bunch of errors from a particular user here I can dig in detail",
    "start": "1389530",
    "end": "1394870"
  },
  {
    "text": "here by selecting both my caller and my colleague and that drop-down and I can get very detailed information about why",
    "start": "1394870",
    "end": "1401500"
  },
  {
    "text": "those errors are occurring and again all this information is provided by by envoy the application developers have done",
    "start": "1401500",
    "end": "1407770"
  },
  {
    "text": "absolutely nothing it doesn't matter what what actual language those applications are written in as I said we",
    "start": "1407770",
    "end": "1414670"
  },
  {
    "text": "run envoy on the edge and you know we did this historically because most of",
    "start": "1414670",
    "end": "1419890"
  },
  {
    "text": "the internet a kind of cloud load balancers the observability output was not as robust as we would have liked",
    "start": "1419890",
    "end": "1426610"
  },
  {
    "text": "so from an edge perspective obviously we have all of the connections per second requests per second information but most",
    "start": "1426610",
    "end": "1433750"
  },
  {
    "text": "importantly on that next line because of all of the l7 routing that we're doing we can look at a per back end basis both",
    "start": "1433750",
    "end": "1442090"
  },
  {
    "text": "from a p99 latency perspective you know from a failure perspective from a requests per second perspective so this",
    "start": "1442090",
    "end": "1449380"
  },
  {
    "text": "allows us at the edge to really deeply understand if our overall success rate",
    "start": "1449380",
    "end": "1454809"
  },
  {
    "text": "for example goes down to 98% but we have 300 services which of those services",
    "start": "1454809",
    "end": "1460510"
  },
  {
    "text": "might might actually be the cause and finally this is our global health dashboard so this",
    "start": "1460510",
    "end": "1467450"
  },
  {
    "text": "is a relatively simple dashboard but we run on boy at this point on about 20,000",
    "start": "1467450",
    "end": "1473210"
  },
  {
    "text": "hosts at lift and this is a dashboard that basically aggregates every every",
    "start": "1473210",
    "end": "1480710"
  },
  {
    "text": "envoy and this is you know it's not it's not going to be detailed information but",
    "start": "1480710",
    "end": "1486109"
  },
  {
    "text": "this is often my first stop dashboard of just I want to get a general feeling of",
    "start": "1486109",
    "end": "1491600"
  },
  {
    "text": "our things okay right now and obviously you know just because the success rate",
    "start": "1491600",
    "end": "1496729"
  },
  {
    "text": "is at a hundred percent doesn't mean that the user isn't having problems but if the success rate globally pink's to",
    "start": "1496729",
    "end": "1502460"
  },
  {
    "text": "ninety seven percent that's a good indication that something is probably wrong so this just gives us a general",
    "start": "1502460",
    "end": "1508489"
  },
  {
    "text": "idea of what's going on and then in that bottom left there this is how we track envoy deploy so we deploy envoy again",
    "start": "1508489",
    "end": "1514999"
  },
  {
    "text": "across thousands and thousands of machines so this allows us to also help track you know are all of those versions",
    "start": "1514999",
    "end": "1520960"
  },
  {
    "text": "actually converging so let's talk a little bit about how how people from an",
    "start": "1520960",
    "end": "1530179"
  },
  {
    "text": "application perspective actually make calls because I've been sitting up here I've been telling you and many of the",
    "start": "1530179",
    "end": "1535970"
  },
  {
    "text": "service mesh people will tell you that oh it's it's magic it's fantastic you use the service mesh and have to do",
    "start": "1535970",
    "end": "1541549"
  },
  {
    "text": "anything and like everything will be perfect it's not not quite like that and the the",
    "start": "1541549",
    "end": "1546950"
  },
  {
    "text": "reason that it's not quite like that is that they're typically still has to be",
    "start": "1546950",
    "end": "1552349"
  },
  {
    "text": "some client code that actually runs and the most important reason for that is",
    "start": "1552349",
    "end": "1558739"
  },
  {
    "text": "actually context propagation so context propagation is the idea that when I get",
    "start": "1558739",
    "end": "1563779"
  },
  {
    "text": "a particular query scon text in it I",
    "start": "1563779",
    "end": "1569419"
  },
  {
    "text": "have to send that trace context to all of my egress requests right and if I",
    "start": "1569419",
    "end": "1575359"
  },
  {
    "text": "don't do that I'm going to get these traces that don't actually link up so",
    "start": "1575359",
    "end": "1580940"
  },
  {
    "text": "from a thin client perspective at at a minimum in each language we're likely",
    "start": "1580940",
    "end": "1586099"
  },
  {
    "text": "going to have to have some thin wrapper that takes your incoming context and",
    "start": "1586099",
    "end": "1592070"
  },
  {
    "text": "propagates it out to egress calls now at live what we've done is because",
    "start": "1592070",
    "end": "1597450"
  },
  {
    "text": "we have to have this thin client anyway which is a couple hundred lines we've we've made it into a nice little wrapper",
    "start": "1597450",
    "end": "1604110"
  },
  {
    "text": "so this is an example I'm showing you here of a Python client which we call envoy client and this is what it looks",
    "start": "1604110",
    "end": "1610799"
  },
  {
    "text": "like to a user at lyft who's writing a Python service and they're calling a service called switchboard and instead",
    "start": "1610799",
    "end": "1617130"
  },
  {
    "text": "of understanding what port envoy is running on or like how to set different settings we basically just allow them to",
    "start": "1617130",
    "end": "1624960"
  },
  {
    "text": "instantiate a client envoy client say what service they would like to call they can specify different headers or",
    "start": "1624960",
    "end": "1632549"
  },
  {
    "text": "they can specify a particular message then they then they post that request and then under the covers that's going",
    "start": "1632549",
    "end": "1639419"
  },
  {
    "text": "to call envoy on the right port on what's gonna do all of the retrying circuit breaking low balancing service",
    "start": "1639419",
    "end": "1644940"
  },
  {
    "text": "discovery and then that response is actually going to come back and again",
    "start": "1644940",
    "end": "1650549"
  },
  {
    "text": "you know this this client is order you know hundreds of lines of code so you",
    "start": "1650549",
    "end": "1656400"
  },
  {
    "text": "know it's not like you're going to have extremely complicated clients in every different language I just wanted to",
    "start": "1656400",
    "end": "1661679"
  },
  {
    "text": "point out that you know because of this context propagation problem it's not like you can just install the service",
    "start": "1661679",
    "end": "1667919"
  },
  {
    "text": "mesh and have it just magically work like they're still going to be client work to do though it's orders of",
    "start": "1667919",
    "end": "1673860"
  },
  {
    "text": "magnitude smaller than what you would have done if you had written you know basically written all of that code in",
    "start": "1673860",
    "end": "1679530"
  },
  {
    "text": "every different language and we have you know different thin clients for go PHP node etcetera so let's talk talk a",
    "start": "1679530",
    "end": "1688590"
  },
  {
    "text": "little bit about envoy configuration and I you know I think envoy has become very",
    "start": "1688590",
    "end": "1694380"
  },
  {
    "text": "popular for a couple of different reasons but I think one one of the most important reasons that envoy has become",
    "start": "1694380",
    "end": "1701549"
  },
  {
    "text": "very popular is that it was really built from the ground up for a cloud native",
    "start": "1701549",
    "end": "1707270"
  },
  {
    "text": "configuration and by that I mean we don't assume that a config file has to",
    "start": "1707270",
    "end": "1712830"
  },
  {
    "text": "be put on every host for envoy running and kept up to date and what you'll find if you're you know running older proxies",
    "start": "1712830",
    "end": "1720090"
  },
  {
    "text": "is that or generally older systems where you have to kind of spray config files around your infrastructure is keeping",
    "start": "1720090",
    "end": "1726659"
  },
  {
    "text": "those config files up-to-date is is a non-trivial problem like did the config file get out to every host did",
    "start": "1726659",
    "end": "1733140"
  },
  {
    "text": "you hop it properly is it actually running it like it's it's quite complicated so what we have with Envoy",
    "start": "1733140",
    "end": "1739770"
  },
  {
    "text": "is from the start envoy has a set of different API so which we call the XDS api's and these",
    "start": "1739770",
    "end": "1746310"
  },
  {
    "text": "are these are our discovery or config service api's we have lots of different API at this point but some examples of",
    "start": "1746310",
    "end": "1753450"
  },
  {
    "text": "different API is our LDS for the listener discovery service CDs for the cluster discovery service and the idea",
    "start": "1753450",
    "end": "1761070"
  },
  {
    "text": "here is that when Envoy boots up it can understand where a management server is",
    "start": "1761070",
    "end": "1766320"
  },
  {
    "text": "located it can ask the management server hey I'm envoy X I'm running on this host",
    "start": "1766320",
    "end": "1772320"
  },
  {
    "text": "or in this availability zone give me my own configuration and what this unlocks",
    "start": "1772320",
    "end": "1778590"
  },
  {
    "text": "is an incredibly powerful paradigm where you can have a single static bootstrap",
    "start": "1778590",
    "end": "1784890"
  },
  {
    "text": "config for all envoys that you run across your entire infrastructure and when on voice starts whether that be",
    "start": "1784890",
    "end": "1790620"
  },
  {
    "text": "from an auto scaling perspective from a deploy or something else envoy will reach out to that management server and",
    "start": "1790620",
    "end": "1797130"
  },
  {
    "text": "say hey I'm here give me my config and then the management server can do all all types",
    "start": "1797130",
    "end": "1802290"
  },
  {
    "text": "of interesting things it can give a canary config to a canary envoy I can give a staging config to a staging envoy",
    "start": "1802290",
    "end": "1809460"
  },
  {
    "text": "it can really do whatever it wants and you know based on those different API is",
    "start": "1809460",
    "end": "1815490"
  },
  {
    "text": "people can build a deployment that's either as simple or as complex as they",
    "start": "1815490",
    "end": "1820500"
  },
  {
    "text": "want people can deploy envoy with no management api's they can use only listener discovery service they can use",
    "start": "1820500",
    "end": "1826800"
  },
  {
    "text": "all the api's if they actually want the other thing that we've done in the newer",
    "start": "1826800",
    "end": "1831810"
  },
  {
    "text": "versions of envoy which I'm very excited about is that all the API is used to be only only JSON and now we actually do G",
    "start": "1831810",
    "end": "1840150"
  },
  {
    "text": "RPC streaming and we've we've made that possible by defining all of our api's",
    "start": "1840150",
    "end": "1845550"
  },
  {
    "text": "using proto 3 and that allows us to very trivially transcode between G RPC and",
    "start": "1845550",
    "end": "1851520"
  },
  {
    "text": "Jason Hammel I have to say that actually working with proto 3 from an api",
    "start": "1851520",
    "end": "1857640"
  },
  {
    "text": "perspective has been absolutely incredible I give that team a lot of a lot of kudos it's it's quite awesome",
    "start": "1857640",
    "end": "1864840"
  },
  {
    "text": "so so where this leads us right is that we can we can avoid kind of this config",
    "start": "1864840",
    "end": "1871570"
  },
  {
    "text": "file hell we can have a simple bootstrap config for our own voice you know we can",
    "start": "1871570",
    "end": "1878050"
  },
  {
    "text": "have our management server be as sophisticated or or as simple as we want and it gives us a lot of flexibility and",
    "start": "1878050",
    "end": "1886000"
  },
  {
    "text": "really what this does is that instead of having to cobble together a bunch of scripts and get these config files out",
    "start": "1886000",
    "end": "1891370"
  },
  {
    "text": "you know we have a bunch of envoys we have our XD s api's we have our management server and this kind of takes",
    "start": "1891370",
    "end": "1897430"
  },
  {
    "text": "envoy from a single proxy into a fleet of proxies that are linked together into a into a larger system so this is what",
    "start": "1897430",
    "end": "1906190"
  },
  {
    "text": "config management looks like today at at lyft and obviously lyft developed envoy",
    "start": "1906190",
    "end": "1911200"
  },
  {
    "text": "so I'm showing you what we have today we've we've come a very very long way",
    "start": "1911200",
    "end": "1916320"
  },
  {
    "text": "but the way that it works today is every service at lyft so on that on that",
    "start": "1916320",
    "end": "1922870"
  },
  {
    "text": "bottom right side we have a service manifest that's actually deployed alongside every service so that manifest",
    "start": "1922870",
    "end": "1930100"
  },
  {
    "text": "is not just about networking obviously it's going to be what tests run and CI like what did the deploy pipelines look",
    "start": "1930100",
    "end": "1936250"
  },
  {
    "text": "like security stuff but the idea is that in that service manifests we have",
    "start": "1936250",
    "end": "1941830"
  },
  {
    "text": "application developers specify certain networking things around hey I talked to",
    "start": "1941830",
    "end": "1947320"
  },
  {
    "text": "these services or I would like these circuit braking overrides or I would like these authorization primitives so",
    "start": "1947320",
    "end": "1955120"
  },
  {
    "text": "when a service deploys they basically take that manifest we compile it we drop",
    "start": "1955120",
    "end": "1960820"
  },
  {
    "text": "it up in s3 then we have another static configuration repo which application developers can also make changes into",
    "start": "1960820",
    "end": "1967840"
  },
  {
    "text": "overall route config and that also gets deployed and all of those different manifest files get merged into s3 and",
    "start": "1967840",
    "end": "1976090"
  },
  {
    "text": "then we have our management system so it's called envoy manager it speaks these XDS api's an envoy manager",
    "start": "1976090",
    "end": "1983590"
  },
  {
    "text": "basically collates all of that information from s3 it does various",
    "start": "1983590",
    "end": "1988720"
  },
  {
    "text": "logic around is it the staging config is that the canary can at the prod config and then all of the",
    "start": "1988720",
    "end": "1996369"
  },
  {
    "text": "envoys when they actually boot up they start talking LDS RTS and because lyft",
    "start": "1996369",
    "end": "2004919"
  },
  {
    "text": "has had envoy running for a very long time we have the split architecture now where we still use the legacy rest v1",
    "start": "2004919",
    "end": "2012570"
  },
  {
    "text": "service service discovery api's that goes to our legacy service but you can",
    "start": "2012570",
    "end": "2018840"
  },
  {
    "text": "see that this system is very flexible and over time what we're likely going to do is we're going to deprecated that that legacy service and everything will",
    "start": "2018840",
    "end": "2026820"
  },
  {
    "text": "likely happen via this Envoy envoy management system but again really the key takeaway here just from a kind of",
    "start": "2026820",
    "end": "2033090"
  },
  {
    "text": "short talk perspective is that we've really decoupled config generation from you know we've got this config delivery",
    "start": "2033090",
    "end": "2040080"
  },
  {
    "text": "system and then we have the envoys that have a very simple bootstrap config and that allows us to be much more agile",
    "start": "2040080",
    "end": "2046559"
  },
  {
    "text": "from a deaf perspective because we can iterate on the config system without having to figure out how to spray out",
    "start": "2046559",
    "end": "2052319"
  },
  {
    "text": "that config - over over 10,000 hosts so looping back to lifts envoy deployment",
    "start": "2052319",
    "end": "2060450"
  },
  {
    "text": "as I was saying before we have hundreds of services now that are that are running on boy depending on time of day",
    "start": "2060450",
    "end": "2067799"
  },
  {
    "text": "we're running 10 20,000 plus hosts the entire mesh for all the RPC and edge",
    "start": "2067799",
    "end": "2074460"
  },
  {
    "text": "calls with envoy does between 5 and 10 million requests per second the majority",
    "start": "2074460",
    "end": "2079740"
  },
  {
    "text": "of it is an h2 mesh so we try to keep alive connections as much as possible we",
    "start": "2079740",
    "end": "2086549"
  },
  {
    "text": "do basically have a hundred percent coverage so all of our edge traffic all of our services service traffic and most",
    "start": "2086549",
    "end": "2093510"
  },
  {
    "text": "of our external partners MongoDB DynamoDB through envoy we're",
    "start": "2093510",
    "end": "2098520"
  },
  {
    "text": "starting to use spanner we all do all of our Redis through envoy and obviously",
    "start": "2098520",
    "end": "2103920"
  },
  {
    "text": "don't have time in this talk but a whole separate talk is we are beginning our kubernetes migration at lift which is a",
    "start": "2103920",
    "end": "2110789"
  },
  {
    "text": "very very interesting topic and obviously on boys a is a key part of",
    "start": "2110789",
    "end": "2115829"
  },
  {
    "text": "that because you know we need to mean to bridge our legacy infrastructure with",
    "start": "2115829",
    "end": "2121020"
  },
  {
    "text": "our new kubernetes infrastructure and how we do service discovery how we kind of feed all of that information",
    "start": "2121020",
    "end": "2126810"
  },
  {
    "text": "into our management systems becomes quite interesting so from an adoption",
    "start": "2126810",
    "end": "2132450"
  },
  {
    "text": "perspective we open-source envoy in September of 2016 and I am really blown",
    "start": "2132450",
    "end": "2141330"
  },
  {
    "text": "away by what's happened since then it's been really incredible here is just a small list of the different companies",
    "start": "2141330",
    "end": "2146970"
  },
  {
    "text": "that are now envoy users we have over a hundred hundred and eighty different contributors now I think in our last",
    "start": "2146970",
    "end": "2153630"
  },
  {
    "text": "release we had over 90 contributors just in in the last three months so it's gone",
    "start": "2153630",
    "end": "2159240"
  },
  {
    "text": "from a project that lyft where you know we had a few people working on it and",
    "start": "2159240",
    "end": "2164250"
  },
  {
    "text": "now a project that really we have almost the entire entire industry working on which is really fantastic so you know",
    "start": "2164250",
    "end": "2173790"
  },
  {
    "text": "that's that's it and I I think what I'd like to close with is you know kind of",
    "start": "2173790",
    "end": "2180900"
  },
  {
    "text": "why why has envoy started to become so popular obviously it's been great for us at lyft and I think you know the project",
    "start": "2180900",
    "end": "2190340"
  },
  {
    "text": "becoming so popular is for for a couple different reasons one of them I think is",
    "start": "2190340",
    "end": "2195930"
  },
  {
    "text": "that we've maintained a fairly high quality bar a lot of companies are running this in production we we run",
    "start": "2195930",
    "end": "2201810"
  },
  {
    "text": "master we deploy it at lyft twice per week so we take quality very seriously on boi is a very extensible system I",
    "start": "2201810",
    "end": "2209160"
  },
  {
    "text": "didn't touch on this very much but we've tried very hard to kind of build envoy",
    "start": "2209160",
    "end": "2214830"
  },
  {
    "text": "into a set of core code and a set of extensions so extensions are gonna be things like access loggers or different",
    "start": "2214830",
    "end": "2222090"
  },
  {
    "text": "stats backends or different types of filters and this allows people to either write their own custom extensions or",
    "start": "2222090",
    "end": "2228210"
  },
  {
    "text": "they can pick and choose what extensions they actually want when they deploy I already talked about the eventually",
    "start": "2228210",
    "end": "2234570"
  },
  {
    "text": "consistent API I think that's been very popular there's there's no open core",
    "start": "2234570",
    "end": "2240600"
  },
  {
    "text": "there's no paid version here like this is a true community project and it's it's really blow kind of blowing my mind",
    "start": "2240600",
    "end": "2247520"
  },
  {
    "text": "just to see the types of changes that all these companies are coming together to create it's been fantastic and we've",
    "start": "2247520",
    "end": "2255570"
  },
  {
    "text": "just been focusing on the overall community trying trying to build that community get people excited and kind of the way",
    "start": "2255570",
    "end": "2262560"
  },
  {
    "text": "that I look at it is that you know we have so much uptake with the system now in terms of startups that are building",
    "start": "2262560",
    "end": "2269490"
  },
  {
    "text": "their products on envoy companies that are using envoy cloud providers that are starting to offer envoy as a as a",
    "start": "2269490",
    "end": "2276930"
  },
  {
    "text": "service that you know at a certain point I almost feel like I'm biased of course",
    "start": "2276930",
    "end": "2282660"
  },
  {
    "text": "but I feel like it becomes almost too costly not to use because if all of your",
    "start": "2282660",
    "end": "2288330"
  },
  {
    "text": "competitors are using it why would you go and reimplemented you to take QA",
    "start": "2288330",
    "end": "2296500"
  },
  {
    "text": "[Applause]",
    "start": "2296500",
    "end": "2305670"
  },
  {
    "text": "if your environment word Java is a primary language how do you compare this",
    "start": "2308119",
    "end": "2313500"
  },
  {
    "text": "with Netflix open source packages or his chick as I mentioned about whatsapp wrong Kong of using this versus Azul",
    "start": "2313500",
    "end": "2319770"
  },
  {
    "text": "package I mean I would say that if your if your based on Java like if you're if",
    "start": "2319770",
    "end": "2326250"
  },
  {
    "text": "you're lucky enough to have an infrastructure that is Java only I think if you're using finagle or you're using",
    "start": "2326250",
    "end": "2333180"
  },
  {
    "text": "hysterics I I don't I don't think you can go wrong I mean I think those are both absolutely fantastic libraries so",
    "start": "2333180",
    "end": "2339240"
  },
  {
    "text": "III think that a lot of what the projects are are solving tend to be probably quite similar the honest",
    "start": "2339240",
    "end": "2347280"
  },
  {
    "text": "reality though is that almost no companies now are only Java so so you",
    "start": "2347280",
    "end": "2353940"
  },
  {
    "text": "wind up in this situation where maybe you're using history or you're using finagle on your on your java services",
    "start": "2353940",
    "end": "2361500"
  },
  {
    "text": "but then what about when people start writing go right or what about their node services and that's when you run",
    "start": "2361500",
    "end": "2368400"
  },
  {
    "text": "into all of these problems so I'm a big fan of finagle I'm a big fan of hysterics they're they're great",
    "start": "2368400",
    "end": "2374130"
  },
  {
    "text": "libraries but we've moved into a very polyglot worlds where people do not write only Java and that becomes very",
    "start": "2374130",
    "end": "2381030"
  },
  {
    "text": "problematic",
    "start": "2381030",
    "end": "2383210"
  },
  {
    "text": "hi so what do you think about making the",
    "start": "2392910",
    "end": "2398140"
  },
  {
    "text": "n foil layer aware of protocol level",
    "start": "2398140",
    "end": "2403809"
  },
  {
    "text": "structure for example the how your REST API structured so you could get more fine-grained metrics on which endpoints",
    "start": "2403809",
    "end": "2411400"
  },
  {
    "text": "are actually producing the earth sure is that something you do for example read yours yeah so we we allow",
    "start": "2411400",
    "end": "2420460"
  },
  {
    "text": "envoy to have extension points at various levels so like I was saying before envoy at its core is an l3 l4",
    "start": "2420460",
    "end": "2427900"
  },
  {
    "text": "proxy so we have kind of rest and G RPC and those types of things built on top",
    "start": "2427900",
    "end": "2434049"
  },
  {
    "text": "and then on top of that we do emit actually very detailed stats around like response codes so like 200 204 you know",
    "start": "2434049",
    "end": "2442420"
  },
  {
    "text": "blah so we are we are already doing that today where it gets complicated from an",
    "start": "2442420",
    "end": "2450099"
  },
  {
    "text": "HTTP perspective is that sometimes envoy doesn't necessarily know what an actual",
    "start": "2450099",
    "end": "2456760"
  },
  {
    "text": "endpoint is right because it doesn't necessarily know that an application does different things",
    "start": "2456760",
    "end": "2462910"
  },
  {
    "text": "unlike slash foo bar Baz or like slash foo bar right so it's often up to the",
    "start": "2462910",
    "end": "2469990"
  },
  {
    "text": "controller of the system to kind of make envoy aware of what are interesting",
    "start": "2469990",
    "end": "2475359"
  },
  {
    "text": "paths and then on boy can emit stats based on really whatever you want so I",
    "start": "2475359",
    "end": "2480940"
  },
  {
    "text": "would say that it's it's it's there and I I think some more interesting things",
    "start": "2480940",
    "end": "2488230"
  },
  {
    "text": "that we're gonna look at in the future is potentially bridging things for example if a company is using swagger to",
    "start": "2488230",
    "end": "2494920"
  },
  {
    "text": "kind of define their their api's you can imagine that swagger or a similar system",
    "start": "2494920",
    "end": "2500349"
  },
  {
    "text": "would output an API definition file that could be fed into Envoy and then on boy would actually know right so that's not",
    "start": "2500349",
    "end": "2506650"
  },
  {
    "text": "something that we do today but I think that that's an interesting area of where people might go to avoid some of this",
    "start": "2506650",
    "end": "2512079"
  },
  {
    "text": "some of this manual configuration",
    "start": "2512079",
    "end": "2516029"
  },
  {
    "text": "as the sidecar proxies are they part of envoy and do they",
    "start": "2517509",
    "end": "2525650"
  },
  {
    "text": "is there a vision for as more and more services move towards function as a",
    "start": "2525650",
    "end": "2530690"
  },
  {
    "text": "service there's a kind of a plan or vision or for that yeah so from up from",
    "start": "2530690",
    "end": "2536990"
  },
  {
    "text": "a sidecar proxy perspective envoy is the actual sidecar proxy but I think the",
    "start": "2536990",
    "end": "2544250"
  },
  {
    "text": "whole topic of functions is very interesting and you know my own",
    "start": "2544250",
    "end": "2549349"
  },
  {
    "text": "impression of kind of the current state of the art of most of the server lists or functional stuff is that people today",
    "start": "2549349",
    "end": "2555859"
  },
  {
    "text": "are mostly using it for batch processing like there's some people that are that are starting to do real-time systems",
    "start": "2555859",
    "end": "2562400"
  },
  {
    "text": "with it but at least from from like a like a high availability real-time systems",
    "start": "2562400",
    "end": "2568430"
  },
  {
    "text": "perspective it's not not quite there yet mainly because what you'll find is that",
    "start": "2568430",
    "end": "2573730"
  },
  {
    "text": "functions or like surplus architectures they take all of the auto scaling networking problems and they multiply",
    "start": "2573730",
    "end": "2580549"
  },
  {
    "text": "them by ten I mean it's like things are coming and going much faster you have all of these problems but you have them",
    "start": "2580549",
    "end": "2586250"
  },
  {
    "text": "10x so to answer your question I actually do think that ultimately envoy",
    "start": "2586250",
    "end": "2591910"
  },
  {
    "text": "you know will be a core part of service architectures and there are already companies out there that are building",
    "start": "2591910",
    "end": "2598069"
  },
  {
    "text": "service platforms based on envoy and I think that brings us to a to follow up",
    "start": "2598069",
    "end": "2603500"
  },
  {
    "text": "which is I actually think longer term I don't know that a lot of people are",
    "start": "2603500",
    "end": "2609230"
  },
  {
    "text": "going to be aware that envoy is actually running like I I think that you know people will be using a particular server",
    "start": "2609230",
    "end": "2616339"
  },
  {
    "text": "lists kind of architecture or a particular container architecture or a path architecture and they're going to",
    "start": "2616339",
    "end": "2621799"
  },
  {
    "text": "be relying on particular features so like whether that's retries or circuit breaking our service discovery and they",
    "start": "2621799",
    "end": "2627319"
  },
  {
    "text": "they may not care what the underlying implementation is like they just want those features to actually be there so I",
    "start": "2627319",
    "end": "2633769"
  },
  {
    "text": "think over time you know I think envoy is going to continue to get embedded",
    "start": "2633769",
    "end": "2638900"
  },
  {
    "text": "into lots of different projects just for functional reasons but I don't know that it's required that every user really",
    "start": "2638900",
    "end": "2645710"
  },
  {
    "text": "kind of understand that it is envoy that is providing those features",
    "start": "2645710",
    "end": "2651490"
  },
  {
    "text": "up there",
    "start": "2659770",
    "end": "2662730"
  },
  {
    "text": "so envoy was built to provide a lot of",
    "start": "2666170",
    "end": "2671760"
  },
  {
    "text": "features that make sense for a system that uses rest calls or synchronous communication what benefits would",
    "start": "2671760",
    "end": "2678600"
  },
  {
    "text": "provide for a system that is event-driven and uses asynchronous messaging so you're talking about like",
    "start": "2678600",
    "end": "2684930"
  },
  {
    "text": "the Kafka or like a message Bosch type system yeah that's people have been talking",
    "start": "2684930",
    "end": "2689970"
  },
  {
    "text": "about that a lot lately I think initially right now probably not very much",
    "start": "2689970",
    "end": "2695880"
  },
  {
    "text": "you know it's it's possible that it would you know it would provide basic observability on top of some of those",
    "start": "2695880",
    "end": "2702410"
  },
  {
    "text": "message bus systems but what we're seeing right now is there's a bunch of",
    "start": "2702410",
    "end": "2708270"
  },
  {
    "text": "community interest in actually doing different types of kind of synchronous -",
    "start": "2708270",
    "end": "2714660"
  },
  {
    "text": "async bridges so there's someone at Red Hat right now for example that's working on an AMQP - HTTP bridge and the way",
    "start": "2714660",
    "end": "2722100"
  },
  {
    "text": "that that would work is it would be implemented with an envoy a user might be able to make you know some type of",
    "start": "2722100",
    "end": "2727800"
  },
  {
    "text": "rest call then envoy will convert it actually into an AMQP message and then",
    "start": "2727800",
    "end": "2732960"
  },
  {
    "text": "have it be have it be sent off so I think we're at the very early stages of",
    "start": "2732960",
    "end": "2738570"
  },
  {
    "text": "beginning to explore kind of what these dual architectures will actually look",
    "start": "2738570",
    "end": "2743760"
  },
  {
    "text": "like but I do think that on boy can play a role in helping to bridge kind of",
    "start": "2743760",
    "end": "2749970"
  },
  {
    "text": "these two different types of building architecture and I think that's important because I think for most",
    "start": "2749970",
    "end": "2755880"
  },
  {
    "text": "larger scale infrastructures it's it's not a question of choosing between like",
    "start": "2755880",
    "end": "2761340"
  },
  {
    "text": "sink or a sink I think most larger and most larger inferring both right it's",
    "start": "2761340",
    "end": "2768000"
  },
  {
    "text": "like it lifts we have a huge amount of real-time synchronous communication and we also have a bunch of async message box communication and having a system",
    "start": "2768000",
    "end": "2775140"
  },
  {
    "text": "that in certain cases can bridge those things is interesting so later this year",
    "start": "2775140",
    "end": "2780540"
  },
  {
    "text": "or early next year we're gonna start working on Kafka support within Envoy there's actually an open issue on it and",
    "start": "2780540",
    "end": "2785910"
  },
  {
    "text": "it's actually it's an interesting issue just to look at and github because there's so many people to have ideas of",
    "start": "2785910",
    "end": "2793170"
  },
  {
    "text": "like what could envoy do and there's ideas that I never would have I mean there's some pretty cool stuff so",
    "start": "2793170",
    "end": "2799050"
  },
  {
    "text": "III think that today the answer is is not much but I think that over the next",
    "start": "2799050",
    "end": "2804300"
  },
  {
    "text": "couple of years it'll probably get more interesting I think we have time for one",
    "start": "2804300",
    "end": "2811050"
  },
  {
    "text": "more question",
    "start": "2811050",
    "end": "2813410"
  },
  {
    "text": "hi so presumably you had an existing RPC mechanism in place when you started all",
    "start": "2831120",
    "end": "2837100"
  },
  {
    "text": "this with your monolith can you talk a little bit about how it was to migrate and how that process went and were you",
    "start": "2837100",
    "end": "2843730"
  },
  {
    "text": "able to do it yeah sure that is a great question and a",
    "start": "2843730",
    "end": "2849370"
  },
  {
    "text": "very complicated topic I'm gonna do my best to answer in about 60 seconds I've given entire talks on this topic so",
    "start": "2849370",
    "end": "2856360"
  },
  {
    "text": "I would I would search for those because there's there's a lot more information what I would say is you know I think",
    "start": "2856360",
    "end": "2864700"
  },
  {
    "text": "that when we were first starting to roll out on boy you know we did it obviously first at the edge you know then we did a",
    "start": "2864700",
    "end": "2871180"
  },
  {
    "text": "couple of our larger services and you know there was a bunch of value there",
    "start": "2871180",
    "end": "2876580"
  },
  {
    "text": "like people were really into all the stats and the logging and we solved some perf problems and like it was it was",
    "start": "2876580",
    "end": "2882100"
  },
  {
    "text": "pretty popular and I I had thought honestly and this is going back about two years I thought that we were gonna",
    "start": "2882100",
    "end": "2889300"
  },
  {
    "text": "have to kind of have much more of a much more of a management stick approach to kind of get people to actually migrate",
    "start": "2889300",
    "end": "2896560"
  },
  {
    "text": "and I was very surprised but it was mostly a carrot based approach like we",
    "start": "2896560",
    "end": "2901630"
  },
  {
    "text": "basically went to all the service developers and said look like if you follow these instructions to do this",
    "start": "2901630",
    "end": "2906940"
  },
  {
    "text": "migration which involve just you know basically changing the port and like doing a few other things you get all",
    "start": "2906940",
    "end": "2913150"
  },
  {
    "text": "this stuff and I would say 90% of people just migrated I mean like it was it was",
    "start": "2913150",
    "end": "2920290"
  },
  {
    "text": "pretty awesome actually but we it took months I mean like we had a spreadsheet",
    "start": "2920290",
    "end": "2925810"
  },
  {
    "text": "we would burn it down like try to you know ping people on like happy to have you done your upgrade yet finally our",
    "start": "2925810",
    "end": "2932200"
  },
  {
    "text": "team went in and it kind of did the the last few stragglers so you know it's a",
    "start": "2932200",
    "end": "2937840"
  },
  {
    "text": "it's a non-trivial human problem in terms of how you do that upgrade there's there's other there's other types of",
    "start": "2937840",
    "end": "2944760"
  },
  {
    "text": "solutions like what SDO is doing around using item tables but that's a that's a very very interesting topic which I can",
    "start": "2944760",
    "end": "2951400"
  },
  {
    "text": "talk about more after but I'm being told to cut it off all right thank you you",
    "start": "2951400",
    "end": "2958360"
  }
]