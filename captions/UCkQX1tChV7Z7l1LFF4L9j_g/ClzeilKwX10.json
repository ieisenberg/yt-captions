[
  {
    "start": "0",
    "end": "28000"
  },
  {
    "text": "[Music]",
    "start": "500",
    "end": "9410"
  },
  {
    "text": "thank you guys so much for being here this is actually the most important Talk of the day and it's not just because we're all",
    "start": "13000",
    "end": "19119"
  },
  {
    "text": "going to go drinking afterwards but because this talk is about saving",
    "start": "19119",
    "end": "26800"
  },
  {
    "text": "lives in a a single month collectively internet users are waiting about 10,000",
    "start": "27199",
    "end": "33480"
  },
  {
    "text": "years just for pages to load that's a lot of",
    "start": "33480",
    "end": "39160"
  },
  {
    "text": "lifetimes now I know we've we've this an HTML5 conference we've beaten the low",
    "start": "39160",
    "end": "46079"
  },
  {
    "text": "times dead horse to death um but what no one talks",
    "start": "46079",
    "end": "52480"
  },
  {
    "text": "about in the hallways out there and in these rooms is who's really responsible",
    "start": "52480",
    "end": "57920"
  },
  {
    "text": "for about half of those 10,000 years that internet users waste every month",
    "start": "57920",
    "end": "64760"
  },
  {
    "text": "and that's the little Banner ad at the top of your page that's right the synchronous ad that has to load before",
    "start": "64760",
    "end": "72560"
  },
  {
    "text": "anything that the user really came for is going to arrive on the",
    "start": "72560",
    "end": "79280"
  },
  {
    "text": "page this is a talk about saving [Music]",
    "start": "83079",
    "end": "88439"
  },
  {
    "text": "lives so in a moment I'm going to show you a short documentary um it's actually really",
    "start": "88439",
    "end": "95119"
  },
  {
    "start": "89000",
    "end": "145000"
  },
  {
    "text": "short uh so short there's there's not really time for character development so I'm going to go ahead and and introduce",
    "start": "95119",
    "end": "101720"
  },
  {
    "text": "our characters um it's a taale of two ads so we have a synchronous",
    "start": "101720",
    "end": "109079"
  },
  {
    "text": "ad and an asynchronous ad now we've called them synchronous and asynchronous to actually disguise their disguise",
    "start": "110439",
    "end": "118039"
  },
  {
    "text": "their true identities um because what you're about to hear is not",
    "start": "118039",
    "end": "124840"
  },
  {
    "text": "pretty so let me ask you guys which one do you think is the good",
    "start": "124840",
    "end": "131319"
  },
  {
    "text": "guy we got asynchronous anyone else well is actually a trick question",
    "start": "132680",
    "end": "140160"
  },
  {
    "text": "because all ads are evil they're not just evil because they",
    "start": "140160",
    "end": "147360"
  },
  {
    "start": "145000",
    "end": "284000"
  },
  {
    "text": "spam our users they're evil evil for the absolute worst",
    "start": "147360",
    "end": "154080"
  },
  {
    "text": "reason anything on a web page can be evil and that's that they make a hell of",
    "start": "154080",
    "end": "159159"
  },
  {
    "text": "a lot of um requests internet",
    "start": "159159",
    "end": "164640"
  },
  {
    "text": "requests so let me let me show you so this is this is a snippet that",
    "start": "165480",
    "end": "172760"
  },
  {
    "text": "you'll you'll put on your page here for for double click can you all read that I'm just kidding",
    "start": "172760",
    "end": "180720"
  },
  {
    "text": "um you put that on your page and this document dot right here that's like a",
    "start": "180720",
    "end": "186200"
  },
  {
    "text": "macro a macro that expands at runtime it like blows up like a like a helium bomb",
    "start": "186200",
    "end": "192840"
  },
  {
    "text": "and it produces all",
    "start": "192840",
    "end": "195840"
  },
  {
    "text": "this all that stuff goes into your web page and that's okay it's just HTML",
    "start": "199239",
    "end": "205959"
  },
  {
    "text": "right but if we do a search for SRC equals",
    "start": "205959",
    "end": "211480"
  },
  {
    "text": "we end up with about 22 Network requests from that one",
    "start": "211480",
    "end": "217280"
  },
  {
    "text": "ad once again this is a talk about saving lives and I'm going to show you how to do that now do you guys know",
    "start": "217400",
    "end": "226799"
  },
  {
    "text": "what a what a synchronous ad is if I say synchronous ad or I mean we all know",
    "start": "226799",
    "end": "232079"
  },
  {
    "text": "what a synchronous script is right on the in the HTML it's it's just a script tag",
    "start": "232079",
    "end": "239959"
  },
  {
    "text": "you guys with me on that yeah so a synchronous",
    "start": "240280",
    "end": "247200"
  },
  {
    "text": "ad scripts scripts can document. write other scripts and they can doc document.",
    "start": "247200",
    "end": "252840"
  },
  {
    "text": "write anything as they as they do their their macro their",
    "start": "252840",
    "end": "259239"
  },
  {
    "text": "macron a synchronous ad says to the browser as it the browser is parsing the",
    "start": "262600",
    "end": "267840"
  },
  {
    "text": "Dom it says stop stop everything you're doing right now I need to to make 22",
    "start": "267840",
    "end": "274479"
  },
  {
    "text": "Network requests and load 12 remote scripts in serial before you show the",
    "start": "274479",
    "end": "279720"
  },
  {
    "text": "user anything I I I was really surprised when",
    "start": "279720",
    "end": "286240"
  },
  {
    "start": "284000",
    "end": "333000"
  },
  {
    "text": "I I found out about this I mean I come from a a UI background where you know we're taught about how to to load",
    "start": "286240",
    "end": "293320"
  },
  {
    "text": "scripts asynchronously and insert them into the Dom like good Network citizens",
    "start": "293320",
    "end": "300919"
  },
  {
    "text": "but no one talks about these these these scripts these ads that are using document.",
    "start": "300919",
    "end": "308320"
  },
  {
    "text": "write all right let's go to the documentary",
    "start": "309120",
    "end": "316160"
  },
  {
    "start": "333000",
    "end": "380000"
  },
  {
    "text": "all right the the internet in here is actually really Speedy which is which is working against me so here's a",
    "start": "335160",
    "end": "341280"
  },
  {
    "text": "documentary you ready so we have our two characters two ads walk into a [Music]",
    "start": "341280",
    "end": "349190"
  },
  {
    "text": "browser what's happening there",
    "start": "350880",
    "end": "355560"
  },
  {
    "text": "okay so as you can see I mean this is really fast",
    "start": "361720",
    "end": "366759"
  },
  {
    "text": "internet the ad on the left has to load before we can see the content on the",
    "start": "368000",
    "end": "373919"
  },
  {
    "text": "left and that's it that's the documentary let's go behind the scenes though and see what's going on",
    "start": "379680",
    "end": "388080"
  },
  {
    "start": "380000",
    "end": "463000"
  },
  {
    "text": "so this is our synchronous",
    "start": "391240",
    "end": "394280"
  },
  {
    "text": "page there's our",
    "start": "400400",
    "end": "403759"
  },
  {
    "text": "HTML so here we have our our",
    "start": "406080",
    "end": "411360"
  },
  {
    "text": "ad we document that right inside the the div here and then we have our",
    "start": "411360",
    "end": "416879"
  },
  {
    "text": "content so far so good now",
    "start": "416879",
    "end": "421520"
  },
  {
    "text": "what we're loading here in the slideshow this is Artistic these are the artistic",
    "start": "423680",
    "end": "429240"
  },
  {
    "text": "gymnast medal winners from the past Olympics let's see let's see where they",
    "start": "429240",
    "end": "435039"
  },
  {
    "text": "turned out in this",
    "start": "435039",
    "end": "438319"
  },
  {
    "text": "competition all right there they are they're they're kind of mediocre here",
    "start": "443800",
    "end": "449280"
  },
  {
    "text": "kind of halfway down see what what came in above them oh look double click got the",
    "start": "449280",
    "end": "456850"
  },
  {
    "text": "[Music]",
    "start": "456850",
    "end": "460249"
  },
  {
    "text": "gold all right now let's look at the other character the async",
    "start": "462800",
    "end": "470599"
  },
  {
    "start": "463000",
    "end": "484000"
  },
  {
    "text": "page first of all where did our artistic gymnast",
    "start": "471879",
    "end": "479720"
  },
  {
    "text": "come in this time oh look at that they first this is",
    "start": "479720",
    "end": "487159"
  },
  {
    "start": "484000",
    "end": "506000"
  },
  {
    "text": "what the user came to see and this is what you're giving them right away how did we do",
    "start": "487159",
    "end": "493800"
  },
  {
    "text": "this well the short answer is Magic a lot of magic",
    "start": "493800",
    "end": "499680"
  },
  {
    "text": "um the long answer will come and that's what the rest of this talk is",
    "start": "499680",
    "end": "505520"
  },
  {
    "text": "about so here's our ad where did the document.",
    "start": "505520",
    "end": "511000"
  },
  {
    "start": "506000",
    "end": "550000"
  },
  {
    "text": "wrgo at the bottom of the page we're loading this special Library called",
    "start": "511000",
    "end": "517279"
  },
  {
    "text": "postcript dright that's right asynchronous document.",
    "start": "517719",
    "end": "524000"
  },
  {
    "text": "WR and then we're writing to our ad the same HTML that we document.",
    "start": "524000",
    "end": "530600"
  },
  {
    "text": "wrot on the synchronous page",
    "start": "530600",
    "end": "535399"
  },
  {
    "text": "all [Music] right so we all know that load times",
    "start": "548279",
    "end": "554440"
  },
  {
    "start": "550000",
    "end": "618000"
  },
  {
    "text": "matter not not just load times but writing asynchronous also lets us do",
    "start": "554440",
    "end": "561200"
  },
  {
    "text": "something that we can't with regular document. right we can refresh and add so say we have this slideshow",
    "start": "561200",
    "end": "567519"
  },
  {
    "text": "here we have Intel at the top and then we have Lawrence",
    "start": "567519",
    "end": "575399"
  },
  {
    "text": "Fishburn oh and a new [Music] ad and that's not this isn't an ey",
    "start": "575399",
    "end": "581740"
  },
  {
    "text": "[Music]",
    "start": "581740",
    "end": "584889"
  },
  {
    "text": "frame here's our ad let's do that",
    "start": "587279",
    "end": "594800"
  },
  {
    "text": "again so it's actually rewriting the Dom there but the ad is just using document. WR we",
    "start": "595440",
    "end": "601600"
  },
  {
    "text": "didn't change anything we didn't go to the ad server and say Hey listen you got to change your document. write",
    "start": "601600",
    "end": "607000"
  },
  {
    "text": "for for document.createelement a pen",
    "start": "607000",
    "end": "613839"
  },
  {
    "start": "618000",
    "end": "680000"
  },
  {
    "text": "child so we know all these numbers we know that load times matter and we",
    "start": "618040",
    "end": "625079"
  },
  {
    "text": "know that this is something we need to do we need to make ads async",
    "start": "626560",
    "end": "634320"
  },
  {
    "text": "it's the way of the future a lot of big names are interested in making ads async including Google uh all of our clients",
    "start": "634320",
    "end": "641760"
  },
  {
    "text": "at krux um people like Wikia New York Times Wall Street",
    "start": "641760",
    "end": "647480"
  },
  {
    "text": "Journal uh Reuters are all interested in this problem so wait so why why doesn't",
    "start": "647480",
    "end": "655920"
  },
  {
    "text": "everyone just do it um and that's a that's a good question the problem is document. rght",
    "start": "655920",
    "end": "663519"
  },
  {
    "text": "are are you are most people here familiar with how document. rght works the fact that it has to be in the page I",
    "start": "663519",
    "end": "671360"
  },
  {
    "text": "see a lot of people nodding",
    "start": "671360",
    "end": "676639"
  },
  {
    "text": "awesome so a few people tried or started to a",
    "start": "676839",
    "end": "684639"
  },
  {
    "text": "couple years ago try and make override document outright and come with an",
    "start": "684639",
    "end": "689720"
  },
  {
    "text": "implementation that was",
    "start": "689720",
    "end": "693160"
  },
  {
    "text": "asynchronous and there's been a lot of improvement since two years ago um I'm going",
    "start": "695519",
    "end": "703320"
  },
  {
    "text": "to I'm going to talk to tell you about this document. write and show you some",
    "start": "703320",
    "end": "708720"
  },
  {
    "text": "of the some of its idiosyncrasies then I'm going to talk about a few approaches to making it",
    "start": "708720",
    "end": "716160"
  },
  {
    "text": "asynchronous and finally I'm going to talk about some products products that use those approaches and the pros and",
    "start": "716160",
    "end": "722079"
  },
  {
    "text": "cons of each so you'll have something to go home and save lives",
    "start": "722079",
    "end": "728519"
  },
  {
    "start": "744000",
    "end": "886000"
  },
  {
    "text": "with I had a lot of fun rating these little uh these Little Helper programs that um",
    "start": "744199",
    "end": "751839"
  },
  {
    "text": "I'm going to use to to to demo some of this stuff um HTML turning HTML into the Dom",
    "start": "751839",
    "end": "759360"
  },
  {
    "text": "I mean that's pretty straightforward right you you see a tag there so there should be be an",
    "start": "759360",
    "end": "766600"
  },
  {
    "text": "element if there are things in inside the tag those those become child nodes in the Dom I mean it's",
    "start": "766600",
    "end": "772480"
  },
  {
    "text": "pretty straightforward I'm here to tell you in",
    "start": "772480",
    "end": "777519"
  },
  {
    "text": "the next 5 minutes that it's not it's HTML HTML is kind of like the",
    "start": "777519",
    "end": "787839"
  },
  {
    "text": "Matrix The Matrix before Neo takes the red pill everything kind of looks washed",
    "start": "787839",
    "end": "795519"
  },
  {
    "text": "out black and white the Dom",
    "start": "795519",
    "end": "800639"
  },
  {
    "text": "however Dom is like the Matrix on the red pill and we're going to see just how far the rabbit hole goes here so this",
    "start": "800639",
    "end": "807720"
  },
  {
    "text": "looks normal",
    "start": "807720",
    "end": "810959"
  },
  {
    "text": "uh we know about t-body elements kind of these implicit elements",
    "start": "821519",
    "end": "826760"
  },
  {
    "text": "that crop up um what if we ask it to do something ridiculous so I don't know if if I've",
    "start": "826760",
    "end": "834639"
  },
  {
    "text": "made it clear but on the left is HTML on the right is what it would produce if we document that right what's in",
    "start": "834639",
    "end": "843399"
  },
  {
    "text": "here all right sometimes we forget to close things and we're",
    "start": "848639",
    "end": "854480"
  },
  {
    "text": "naughty this looks fine the the the Dom gets closed closes it for",
    "start": "855079",
    "end": "860360"
  },
  {
    "text": "us but what happens if we start writing outside here",
    "start": "860360",
    "end": "865399"
  },
  {
    "text": "again the eye element is almost echoed and if they're",
    "start": "865560",
    "end": "872360"
  },
  {
    "text": "attributes they get echoed too now not all browsers behave like",
    "start": "872360",
    "end": "877560"
  },
  {
    "text": "this this is uh the more modern ones if you take something",
    "start": "877560",
    "end": "885320"
  },
  {
    "text": "like this which is complete I guess they call it tag soup",
    "start": "885959",
    "end": "891199"
  },
  {
    "start": "886000",
    "end": "924000"
  },
  {
    "text": "it's improperly nested tags modern browsers will produce a tree",
    "start": "891199",
    "end": "897240"
  },
  {
    "text": "that looks sane where if you're my child then I'm your",
    "start": "897240",
    "end": "902399"
  },
  {
    "text": "parent and I have multiple children iie actually tries to be or i7 I8 actually tries to be um tries to represent this",
    "start": "902399",
    "end": "911480"
  },
  {
    "text": "in the in the Dom and actually creates Dom soup uh so just cuz I'm your parent",
    "start": "911480",
    "end": "920519"
  },
  {
    "text": "doesn't mean that you're my child for example so in this",
    "start": "920519",
    "end": "927000"
  },
  {
    "start": "924000",
    "end": "940000"
  },
  {
    "text": "case P could have I as a child but I has peace parent as a",
    "start": "927000",
    "end": "933440"
  },
  {
    "text": "parent anyways why why why is this",
    "start": "933440",
    "end": "937839"
  },
  {
    "text": "important I'm trying to instill a problem in instill in you an",
    "start": "939319",
    "end": "944639"
  },
  {
    "start": "940000",
    "end": "980000"
  },
  {
    "text": "understanding of the problem um and why it's hard we're not we're not all the",
    "start": "944639",
    "end": "950040"
  },
  {
    "text": "way there yet so that when I show you the solution you guys are going to be like oh wow thanks Derek",
    "start": "950040",
    "end": "957440"
  },
  {
    "text": "[Music] let's do a simple doc right",
    "start": "957440",
    "end": "963040"
  },
  {
    "text": "[Music] here so if you document. write",
    "start": "966340",
    "end": "971920"
  },
  {
    "text": "[Music]",
    "start": "971920",
    "end": "975190"
  },
  {
    "text": "something inside a script the script is actually if a script is inline it actually gets executed right then and",
    "start": "980079",
    "end": "985839"
  },
  {
    "text": "there so you have to be careful if you're going to emulate document. R you have to",
    "start": "985839",
    "end": "992519"
  },
  {
    "text": "get this nesting right even more interesting if you load a remote",
    "start": "992519",
    "end": "1000720"
  },
  {
    "start": "997000",
    "end": "1067000"
  },
  {
    "text": "script the the writer actually",
    "start": "1000880",
    "end": "1007519"
  },
  {
    "text": "delays the continuation uh until after the script is loaded now remote all remote JS does",
    "start": "1007839",
    "end": "1014600"
  },
  {
    "text": "is is it writes this uh div remote",
    "start": "1014600",
    "end": "1020839"
  },
  {
    "text": "so if I were",
    "start": "1023319",
    "end": "1026959"
  },
  {
    "text": "to if I were to document. WR a remote script and then try and use it down here",
    "start": "1029400",
    "end": "1037839"
  },
  {
    "text": "some function like remote it wouldn't exist yet thank god um because if if the",
    "start": "1037839",
    "end": "1046079"
  },
  {
    "text": "JavaScript thread actually paused for the script to load um then you know the page would freeze",
    "start": "1046079",
    "end": "1053240"
  },
  {
    "text": "up so the script is allowed to [Music]",
    "start": "1053240",
    "end": "1059080"
  },
  {
    "text": "exit in this example we we note that document. rate is actually actually",
    "start": "1066360",
    "end": "1071600"
  },
  {
    "start": "1067000",
    "end": "1118000"
  },
  {
    "text": "happens immediately so here we're going to write a div with ID div one",
    "start": "1071600",
    "end": "1079080"
  },
  {
    "text": "and then immediately we can set it in inner HTML to something interesting and",
    "start": "1079080",
    "end": "1084679"
  },
  {
    "text": "creative and ads actually do this a lot they'll document WR a div and then",
    "start": "1084679",
    "end": "1091400"
  },
  {
    "text": "just to have a place to hang things they'll start a pending setting in",
    "start": "1091400",
    "end": "1097720"
  },
  {
    "text": "HTML and creating the visual representation of the ad in the Dom",
    "start": "1097720",
    "end": "1104880"
  },
  {
    "text": "all right so now for the solutions the first there there are two",
    "start": "1113919",
    "end": "1120720"
  },
  {
    "start": "1118000",
    "end": "1140000"
  },
  {
    "text": "parts to the problem of document. write one is getting the flow right and",
    "start": "1120720",
    "end": "1127120"
  },
  {
    "text": "by flow I mean you know a script can call",
    "start": "1127120",
    "end": "1133039"
  },
  {
    "text": "document. write and document. WR can create script tags",
    "start": "1133039",
    "end": "1140280"
  },
  {
    "start": "1140000",
    "end": "1177000"
  },
  {
    "text": "and everything if you document. write a script tag everything after that document.",
    "start": "1140320",
    "end": "1145440"
  },
  {
    "text": "write has to be delayed until the script executes so you have to get this this nesting this tree of scripts and",
    "start": "1145440",
    "end": "1153919"
  },
  {
    "text": "writes you have to get it right that's the problem of flow once you once you",
    "start": "1153919",
    "end": "1159440"
  },
  {
    "text": "get that right then you just have a sequence of static HTML HTML that",
    "start": "1159440",
    "end": "1165840"
  },
  {
    "text": "doesn't contain any scripts because you've evaluated all the scripts you can throw away scripts once they once they",
    "start": "1165840",
    "end": "1170919"
  },
  {
    "text": "execute they're not really needed in the",
    "start": "1170919",
    "end": "1174639"
  },
  {
    "text": "Dom so the next problem that of putting these rights having the",
    "start": "1176120",
    "end": "1183679"
  },
  {
    "text": "rights append things to the Dom is is actually the the hardest",
    "start": "1183679",
    "end": "1191559"
  },
  {
    "text": "problem um and the reason is for that is just that the way the parser works is so",
    "start": "1191559",
    "end": "1197960"
  },
  {
    "text": "complicated it's hard to to emulate it programmatically but people have tried",
    "start": "1197960",
    "end": "1204159"
  },
  {
    "text": "including Crux our first two iterations of an async writer were uh parser based",
    "start": "1204159",
    "end": "1212039"
  },
  {
    "text": "and what I mean by parser based",
    "start": "1212039",
    "end": "1215600"
  },
  {
    "start": "1219000",
    "end": "1249000"
  },
  {
    "text": "is as a Right comes in there's some HTML you parse it into tokens say you",
    "start": "1219360",
    "end": "1225760"
  },
  {
    "text": "know here's a start tag say it's a div so I'm going to create a div and put in the",
    "start": "1225760",
    "end": "1231799"
  },
  {
    "text": "Dom and then before I see before that tag closes I see a paragraph tag so I'm going to create a",
    "start": "1231799",
    "end": "1239760"
  },
  {
    "text": "paragraph element and make that a child of the div using a pen",
    "start": "1239760",
    "end": "1246360"
  },
  {
    "text": "child that works fine until it doesn't and we really found that there were too many ways that could go wrong",
    "start": "1248440",
    "end": "1256559"
  },
  {
    "text": "so here I have an example",
    "start": "1256559",
    "end": "1260600"
  },
  {
    "text": "on the left um of the parser and Dom approach",
    "start": "1263520",
    "end": "1271360"
  },
  {
    "text": "it works really well for doing things immediately as you can see we document that wrote this and immediately added in",
    "start": "1271360",
    "end": "1277440"
  },
  {
    "text": "HTML and boom it worked like a",
    "start": "1277440",
    "end": "1282158"
  },
  {
    "text": "charm but the way that this writer decides to Nest Dom nodes is dependent",
    "start": "1285039",
    "end": "1291360"
  },
  {
    "text": "on a parser that's written in JavaScript so it gets stuff like this it",
    "start": "1291360",
    "end": "1297640"
  },
  {
    "text": "gets that right you know it's not I'm not telling I'm expecting those PS to be",
    "start": "1297640",
    "end": "1303480"
  },
  {
    "text": "side by side because P's are are",
    "start": "1303480",
    "end": "1307120"
  },
  {
    "text": "self-closing [Music] but over here the the Dom is telling us",
    "start": "1309279",
    "end": "1314840"
  },
  {
    "text": "that the div closes the ptag document. do write is the the final has the final say",
    "start": "1314840",
    "end": "1323200"
  },
  {
    "text": "on this um because that's what advertisers are expecting document",
    "start": "1323200",
    "end": "1329200"
  },
  {
    "text": "outright to do but this parser plus Dom approach is",
    "start": "1329200",
    "end": "1334720"
  },
  {
    "text": "doing something completely different and that's why ads",
    "start": "1334720",
    "end": "1340000"
  },
  {
    "text": "break for this uh in this example the parser plus Dom approach is a ghost",
    "start": "1343120",
    "end": "1348840"
  },
  {
    "text": "riter",
    "start": "1348840",
    "end": "1351440"
  },
  {
    "text": "11.6 so we found the pars plus Dom approach to be it it it just too",
    "start": "1353880",
    "end": "1360640"
  },
  {
    "text": "hard too hard to to rewrite uh what the browser does when it loads an HTML",
    "start": "1360640",
    "end": "1366440"
  },
  {
    "text": "page now the first thing people thought of I mean what would what would you guys think of if you had some HTML and you",
    "start": "1366440",
    "end": "1373120"
  },
  {
    "text": "need to convert it into um into the Dom",
    "start": "1373120",
    "end": "1379039"
  },
  {
    "text": "what's that could you speak",
    "start": "1379960",
    "end": "1385520"
  },
  {
    "text": "up make it well formed okay but you actually we don't have control over that",
    "start": "1385520",
    "end": "1390640"
  },
  {
    "text": "it's the it's the ad engine that's giving us some JavaScript and they're",
    "start": "1390640",
    "end": "1397440"
  },
  {
    "text": "they're terrible",
    "start": "1397440",
    "end": "1401240"
  },
  {
    "text": "programmers enter HTML yes um that's that's what I think that's",
    "start": "1402880",
    "end": "1408840"
  },
  {
    "start": "1403000",
    "end": "1446000"
  },
  {
    "text": "what jQuery uses when you when you pass it some HTML and say",
    "start": "1408840",
    "end": "1413880"
  },
  {
    "text": "hey put this put this in the Dom in HTML is amazing",
    "start": "1413880",
    "end": "1422120"
  },
  {
    "text": "because it's asynchronous you you don't have to interrupt anything",
    "start": "1422120",
    "end": "1427720"
  },
  {
    "text": "to to use it and it does exactly what document.",
    "start": "1427720",
    "end": "1433520"
  },
  {
    "text": "write would do so remember we've gotten rid of the scripts already we're just concerned with writing things that don't",
    "start": "1433520",
    "end": "1438880"
  },
  {
    "text": "contain scripts anymore cuz we figured out the",
    "start": "1438880",
    "end": "1442639"
  },
  {
    "text": "flow and know HTML is is perfect except for for one",
    "start": "1445520",
    "end": "1450720"
  },
  {
    "start": "1446000",
    "end": "1475000"
  },
  {
    "text": "thing um it only works for the first right the the other 130 or however many",
    "start": "1450720",
    "end": "1457760"
  },
  {
    "text": "your ad makes won't work and the reason for that",
    "start": "1457760",
    "end": "1464279"
  },
  {
    "start": "1475000",
    "end": "1501000"
  },
  {
    "text": "so this is really the the the first naive approach let's um let's just do plus",
    "start": "1476000",
    "end": "1484679"
  },
  {
    "text": "equals we want our paragraph to contain an i element [Music]",
    "start": "1489080",
    "end": "1495869"
  },
  {
    "text": "right now let's look at the in h actually let's just look at the [Music]",
    "start": "1495919",
    "end": "1501039"
  },
  {
    "text": "div and it doesn't it didn't do what we wanted and the reason is that inner HTML is kind of",
    "start": "1501039",
    "end": "1507240"
  },
  {
    "text": "final let's let's let's set the inner HTML once again to a",
    "start": "1507240",
    "end": "1512960"
  },
  {
    "text": "paragraph So if we look at our in HTML it's already closed it for",
    "start": "1515880",
    "end": "1521919"
  },
  {
    "text": "us so plus equals isn't going to work for doing multiple rights",
    "start": "1521919",
    "end": "1530320"
  },
  {
    "text": "on on top of that something to note here is that if [Music]",
    "start": "1530960",
    "end": "1537890"
  },
  {
    "text": "um if say we had a pixel in our ad this is trying to pick up a trying to",
    "start": "1539320",
    "end": "1547640"
  },
  {
    "text": "load this pixel um that say notified the ad server when the",
    "start": "1547640",
    "end": "1553399"
  },
  {
    "text": "impression uh had impressed the user",
    "start": "1553399",
    "end": "1559200"
  },
  {
    "text": "um and then we try to you know append to",
    "start": "1559200",
    "end": "1564760"
  },
  {
    "text": "that our I element that actually it actually loads the the image again and that's because",
    "start": "1565480",
    "end": "1573159"
  },
  {
    "text": "as as we know as programmers plus equals is a get a plus and then a set so you're",
    "start": "1573159",
    "end": "1578600"
  },
  {
    "text": "you're wiping out the Dom and reconstructing it this just will not do",
    "start": "1578600",
    "end": "1587520"
  },
  {
    "text": "so the next generation of document. write emulators um right capture comes to mind",
    "start": "1591399",
    "end": "1599600"
  },
  {
    "text": "Q bits open tag they said well listen we're just going to buffer",
    "start": "1599600",
    "end": "1605440"
  },
  {
    "text": "everything and at the very end we'll just do an an in HTML and and that that gets the",
    "start": "1605440",
    "end": "1613039"
  },
  {
    "text": "structure perfectly that's that's exactly what you",
    "start": "1613039",
    "end": "1618399"
  },
  {
    "text": "want from a structure point of view the the problem is that and here we're going",
    "start": "1618399",
    "end": "1623440"
  },
  {
    "text": "to here we have an in h in HTML",
    "start": "1623440",
    "end": "1630840"
  },
  {
    "text": "writer problem is it doesn't get um doesn't get this right on a second",
    "start": "1633520",
    "end": "1642679"
  },
  {
    "start": "1648000",
    "end": "1668000"
  },
  {
    "text": "doesn't get it doesn't write immediately right because it's buffering it's waiting till the end till all the document. writes have finished because",
    "start": "1648799",
    "end": "1655120"
  },
  {
    "text": "it knows that afterwards I'm going to I'm going to be Doc I'm going to keep document that writing other",
    "start": "1655120",
    "end": "1662360"
  },
  {
    "text": "stuff it knows that I'm going to keep document. writing and if if it used plus equals this this",
    "start": "1667120",
    "end": "1674640"
  },
  {
    "start": "1668000",
    "end": "1702000"
  },
  {
    "text": "P would be beside the div but because it's waiting till the end it knows oh it",
    "start": "1674640",
    "end": "1681279"
  },
  {
    "text": "it uses in HTML and in HTML figures out that the p goes inside the",
    "start": "1681279",
    "end": "1686360"
  },
  {
    "text": "div but not only is the div not available here we actually broke the ad",
    "start": "1686360",
    "end": "1693120"
  },
  {
    "text": "the P can no longer be written because div one is",
    "start": "1693120",
    "end": "1700840"
  },
  {
    "text": "null this sucks and and and this is ADS do this all the time they they they",
    "start": "1700880",
    "end": "1707240"
  },
  {
    "start": "1702000",
    "end": "1781000"
  },
  {
    "text": "write something and then then they want to they want to pen children to or they want to set",
    "start": "1707240",
    "end": "1712600"
  },
  {
    "text": "attributes so I know I'm being really negative um but if it weren't for uh you",
    "start": "1713559",
    "end": "1720880"
  },
  {
    "text": "know digital FK folr rooms ghost riter for right",
    "start": "1720880",
    "end": "1727000"
  },
  {
    "text": "capture um for for qbit and open tag uh",
    "start": "1727000",
    "end": "1732279"
  },
  {
    "text": "Crux wouldn't have accomplished what what we have and that's what I'm kind of",
    "start": "1732279",
    "end": "1737799"
  },
  {
    "text": "pretty excited to to show you guys",
    "start": "1737799",
    "end": "1744399"
  },
  {
    "text": "um so our solution is called postcript",
    "start": "1745440",
    "end": "1750559"
  },
  {
    "text": "um so I'm going to turn diffs on so we can see where things screw",
    "start": "1770320",
    "end": "1776080"
  },
  {
    "text": "up so as you can see post CCRI post CCRI gets the immediate part right post uses",
    "start": "1780519",
    "end": "1788080"
  },
  {
    "start": "1781000",
    "end": "1823000"
  },
  {
    "text": "interner HTML but it does so in a way that is",
    "start": "1788080",
    "end": "1794039"
  },
  {
    "text": "streamable it figures out the plus equals and I'll show you how it did that",
    "start": "1794039",
    "end": "1800039"
  },
  {
    "text": "it also gets all the the nesting right here's RP with a div that not many",
    "start": "1801200",
    "end": "1808200"
  },
  {
    "text": "people know about parser plus Dom gets it gets it",
    "start": "1808200",
    "end": "1813559"
  },
  {
    "text": "wrong Ghost Rider actually parer plus Dom is right captur to um Ghost Rider gets it",
    "start": "1813559",
    "end": "1822120"
  },
  {
    "text": "wrong in HML gets it right but once again that's because it was buffering",
    "start": "1822399",
    "end": "1829960"
  },
  {
    "text": "post cribe gets the correctness and the",
    "start": "1830120",
    "end": "1836240"
  },
  {
    "text": "immediacy now how does it do that I'm going to show you in I'm going",
    "start": "1836240",
    "end": "1842120"
  },
  {
    "text": "to show you the algorithm so you can understand because it's actually it's actually pretty",
    "start": "1842120",
    "end": "1848039"
  },
  {
    "text": "simple",
    "start": "1848039",
    "end": "1851039"
  },
  {
    "text": "all right I had fun thinking of this like a proof by induction do you guys remember",
    "start": "1863080",
    "end": "1869279"
  },
  {
    "start": "1865000",
    "end": "1920000"
  },
  {
    "text": "that from from school where you say you know this is the base case you know for",
    "start": "1869279",
    "end": "1875679"
  },
  {
    "text": "the first right we're going to use in HTML and then assume magically we can do it for the first n WR we can write",
    "start": "1875679",
    "end": "1882200"
  },
  {
    "text": "perfectly how do we do the n plus one right",
    "start": "1882200",
    "end": "1887200"
  },
  {
    "text": "so the way we do it is is this context we keep track of a this context",
    "start": "1891399",
    "end": "1899200"
  },
  {
    "text": "of everything that's been written so far but we strip out the text and we strip",
    "start": "1899200",
    "end": "1904679"
  },
  {
    "text": "out the attributes because they're not really needed to understand what the Dom should",
    "start": "1904679",
    "end": "1910919"
  },
  {
    "text": "look like",
    "start": "1910919",
    "end": "1914200"
  },
  {
    "start": "1920000",
    "end": "1936000"
  },
  {
    "text": "here we have what we want to write next so we open a",
    "start": "1920919",
    "end": "1927440"
  },
  {
    "text": "span then we have this image we don't want the image to fire",
    "start": "1927440",
    "end": "1932600"
  },
  {
    "text": "twice then we want to write some text have a paragraph some other text and close the span and behind",
    "start": "1935399",
    "end": "1942480"
  },
  {
    "start": "1936000",
    "end": "1954000"
  },
  {
    "text": "that write some more",
    "start": "1942480",
    "end": "1946960"
  },
  {
    "text": "got it so here's what here's what we want it to look like this this uh tree down here is just",
    "start": "1949080",
    "end": "1956679"
  },
  {
    "text": "is just a fancy way to look at the",
    "start": "1956679",
    "end": "1960720"
  },
  {
    "text": "Dom all we're doing here is interent HTML how do we get the next",
    "start": "1963360",
    "end": "1971880"
  },
  {
    "text": "right the answer is we take this context and we append",
    "start": "1974440",
    "end": "1981600"
  },
  {
    "text": "it prepend it sorry to what we want to write",
    "start": "1981600",
    "end": "1986880"
  },
  {
    "text": "next now the yellow nodes are nodes that we've already",
    "start": "1988880",
    "end": "1996720"
  },
  {
    "text": "written and the other nodes are no are new nodes we know that if we see a text node",
    "start": "2001639",
    "end": "2008159"
  },
  {
    "text": "that it's a new note and maybe we've inserted an attribute into the context",
    "start": "2008159",
    "end": "2014360"
  },
  {
    "text": "that tells us that that this image is a is a proxy for the image that's over",
    "start": "2014360",
    "end": "2022360"
  },
  {
    "text": "here then what we do is we look at the parent the parents of the new the",
    "start": "2023080",
    "end": "2031399"
  },
  {
    "text": "elements if that parent is a proxy for an element that's already been",
    "start": "2031799",
    "end": "2036880"
  },
  {
    "text": "written we move that child underneath we append that child to the actual node in the",
    "start": "2036880",
    "end": "2046278"
  },
  {
    "text": "Dom does that make sense so in",
    "start": "2050440",
    "end": "2058358"
  },
  {
    "text": "doing in doing this we've been able to see some amazing differences in in how ads",
    "start": "2058359",
    "end": "2066240"
  },
  {
    "text": "are rendered asynchronously",
    "start": "2066240",
    "end": "2069720"
  },
  {
    "text": "you guys have any questions about this does this does this make",
    "start": "2073119",
    "end": "2078679"
  },
  {
    "text": "sense the question was how how are we buffering yeah just in a a JavaScript variable I don't know maybe that that",
    "start": "2078679",
    "end": "2084638"
  },
  {
    "text": "was too much of a simplistic",
    "start": "2084639",
    "end": "2087878"
  },
  {
    "text": "answer actually this is just this just a string and then we use regular",
    "start": "2090200",
    "end": "2096760"
  },
  {
    "text": "expressions to just extract take out the attributes and take out all the text",
    "start": "2096760",
    "end": "2102599"
  },
  {
    "text": "notes there a gentleman in the front here in the nice shirt we don't do we don't so the question",
    "start": "2102599",
    "end": "2109079"
  },
  {
    "text": "was about how do we how do we put the attributes back into the Dom yes okay",
    "start": "2109079",
    "end": "2115480"
  },
  {
    "text": "well we don't they we we didn't take them out in the first place these as you",
    "start": "2115480",
    "end": "2120760"
  },
  {
    "text": "can see the the attributes are there we we just keep around a a cop",
    "start": "2120760",
    "end": "2128440"
  },
  {
    "text": "we only keep around the only thing we care about what's been written before we want to give some context to to the new",
    "start": "2128440",
    "end": "2134320"
  },
  {
    "text": "write so that we understand where nodes fit in and in HTML is going to tell us",
    "start": "2134320",
    "end": "2143680"
  },
  {
    "text": "that so this context is just a string it's just the bare minimum we need to",
    "start": "2144040",
    "end": "2149839"
  },
  {
    "text": "keep track of to to let in HTML know where we are in in the writing process",
    "start": "2149839",
    "end": "2158799"
  },
  {
    "text": "so listen I'm going to leave you with some",
    "start": "2173319",
    "end": "2181280"
  },
  {
    "start": "2186000",
    "end": "2211000"
  },
  {
    "text": "resources um some links to all the things that we we we talked about just just to refresh your memory we we talked",
    "start": "2186280",
    "end": "2193079"
  },
  {
    "text": "about how horrible it is I mean people talk about blood pressure and they talk about",
    "start": "2193079",
    "end": "2199800"
  },
  {
    "text": "you know heart heart problems but no one talks about banner",
    "start": "2199800",
    "end": "2205078"
  },
  {
    "text": "ads um then we talk about the idea of making",
    "start": "2205240",
    "end": "2212520"
  },
  {
    "start": "2211000",
    "end": "2226000"
  },
  {
    "text": "document. rght asynchronous and we looked at a couple approaches for doing that",
    "start": "2212520",
    "end": "2218880"
  },
  {
    "text": "um inter HTML and parsing and inserting things into the Dom and finally uh we",
    "start": "2218880",
    "end": "2227960"
  },
  {
    "start": "2226000",
    "end": "2249000"
  },
  {
    "text": "introduced a new library into the mix called",
    "start": "2227960",
    "end": "2233599"
  },
  {
    "text": "[Music] um viewers of NBC Universal Wikia New",
    "start": "2243250",
    "end": "2252480"
  },
  {
    "start": "2249000",
    "end": "2262000"
  },
  {
    "text": "York Times this is Battle",
    "start": "2252480",
    "end": "2257000"
  },
  {
    "text": "tested there's the uh the GitHub",
    "start": "2258480",
    "end": "2264839"
  },
  {
    "start": "2262000",
    "end": "2285000"
  },
  {
    "text": "repo we'd like you guys to give it a shot if you find bugs let us",
    "start": "2264839",
    "end": "2271319"
  },
  {
    "text": "know um we our company is really behind this product it's the core of uh a lot",
    "start": "2271319",
    "end": "2277680"
  },
  {
    "text": "of things that we do",
    "start": "2277680",
    "end": "2283960"
  },
  {
    "text": "yes uh oh geez uh is it free to use and if so how do we make money that's like",
    "start": "2284720",
    "end": "2291079"
  },
  {
    "start": "2285000",
    "end": "2384000"
  },
  {
    "text": "the classic in startup question uh it is absolutely free to use",
    "start": "2291079",
    "end": "2296680"
  },
  {
    "text": "MIT license um really friendly support",
    "start": "2296680",
    "end": "2303760"
  },
  {
    "text": "staff uh we make money off of a whole bunch of other things we're krux",
    "start": "2304160",
    "end": "2311560"
  },
  {
    "text": "is uh in the business of um helping Publishers manage their",
    "start": "2311560",
    "end": "2317560"
  },
  {
    "text": "data so this this product is actually part of a",
    "start": "2317560",
    "end": "2322920"
  },
  {
    "text": "tag management solution uh we tag management is kind of like a uh",
    "start": "2322920",
    "end": "2331160"
  },
  {
    "text": "content management system for Snippets like Google analytics ads um",
    "start": "2331160",
    "end": "2337960"
  },
  {
    "text": "all kinds of pixels so this this is the core of of our tag management solution",
    "start": "2337960",
    "end": "2344400"
  },
  {
    "text": "our tag manage solution is just one part of of what we do we we this this has been this Project's been closed Source",
    "start": "2344400",
    "end": "2351160"
  },
  {
    "text": "uh for a couple years but we decided that we want um to get the word out",
    "start": "2351160",
    "end": "2357000"
  },
  {
    "text": "there and get people using this um and yeah hopefully you'll like it",
    "start": "2357000",
    "end": "2363760"
  },
  {
    "text": "well listen I I had a I had a lot of fun and uh yeah let's let's go drink something",
    "start": "2363760",
    "end": "2370680"
  },
  {
    "text": "thank you very much for your time",
    "start": "2370680",
    "end": "2374520"
  },
  {
    "text": "[Music]",
    "start": "2377640",
    "end": "2386109"
  }
]