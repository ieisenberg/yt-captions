[
  {
    "start": "0",
    "end": "50000"
  },
  {
    "text": "[Music]",
    "start": "0",
    "end": "22420"
  },
  {
    "text": "wow that's a big crowd I'm pretty excited to be here thanks for having me",
    "start": "23000",
    "end": "28560"
  },
  {
    "text": "um topic of this talk is going to be myql high availability Solutions and",
    "start": "28560",
    "end": "33800"
  },
  {
    "text": "what I'd like to do is give you an overview of how you can make a MyQ server instance more robust and",
    "start": "33800",
    "end": "41440"
  },
  {
    "text": "more um yeah more available if some of the systems go down um let me start with",
    "start": "41440",
    "end": "49320"
  },
  {
    "text": "a quick introduction of myself yeah my first contact with open source software was in 1995 during my",
    "start": "49320",
    "end": "56320"
  },
  {
    "start": "50000",
    "end": "405000"
  },
  {
    "text": "studies in the University this is where I first learned about Linux and all the exciting things that you can do with it",
    "start": "56320",
    "end": "62640"
  },
  {
    "text": "um I've been using Linux on my desktop exclusively since then uh which kind of",
    "start": "62640",
    "end": "67960"
  },
  {
    "text": "led me to working for a company that is related with Linux um I was a distribution engineer at Souza from 1998",
    "start": "67960",
    "end": "74920"
  },
  {
    "text": "until 2002 that was before they got acquired by Noel um one of my first tasks there",
    "start": "74920",
    "end": "82280"
  },
  {
    "text": "was to add MySQL to the distribution that didn't exist before back then MySQL",
    "start": "82280",
    "end": "88200"
  },
  {
    "text": "was not available under the GP L they still had their own home grown or home BR license uh which basically made it",
    "start": "88200",
    "end": "96840"
  },
  {
    "text": "impossible to include it on the distribution based on the terms they have set up uh so I got in contact with",
    "start": "96840",
    "end": "102600"
  },
  {
    "text": "these guys um Monty and dar the founders of the company we exchanged some email",
    "start": "102600",
    "end": "108079"
  },
  {
    "text": "and I kind of asked them okay what can we do to get my SC on sus Linux since we",
    "start": "108079",
    "end": "113159"
  },
  {
    "text": "I really wanted to have it on there and the deal that we struck over email was that uh soua is allowed to include my",
    "start": "113159",
    "end": "119520"
  },
  {
    "text": "Square and in return we sent them five packaged boxes of the distribution each time we make a new release so that was a",
    "start": "119520",
    "end": "126320"
  },
  {
    "text": "pretty cool deal and so since then myql is available on this distribution",
    "start": "126320",
    "end": "132800"
  },
  {
    "text": "actually soua was the first of the Linux Distributors that ship MySQL as part of their",
    "start": "132800",
    "end": "138760"
  },
  {
    "text": "package um so I've been in contact with these guys very early on",
    "start": "138760",
    "end": "144319"
  },
  {
    "text": "which um yeah we we stayed in contact every time there was a new release we were talking about what needs to be",
    "start": "144319",
    "end": "151160"
  },
  {
    "text": "fixed um I met Monty and David at numerous conferences all across the world they were giving talks about MySQL",
    "start": "151160",
    "end": "158360"
  },
  {
    "text": "I was giving talks about Su Linux so we bumped into each other quite a lot um",
    "start": "158360",
    "end": "164480"
  },
  {
    "text": "and during some random email discussion I I kind of jokingly asked if they would",
    "start": "164480",
    "end": "169959"
  },
  {
    "text": "have a need for a guy like me and boom two months later I I joined my SQL um as",
    "start": "169959",
    "end": "175800"
  },
  {
    "text": "a release engineer so my first task was offloading Monty from the task of building the MySQL releases so the",
    "start": "175800",
    "end": "183200"
  },
  {
    "text": "developers were hiking on the code and at some point it was time to make a new release and then when I got into gear I",
    "start": "183200",
    "end": "189760"
  },
  {
    "text": "started the builds compiling my skill on all the various platforms doing the packaging publishing and uploading this",
    "start": "189760",
    "end": "195920"
  },
  {
    "text": "things um sending out the release announcements all these things that relate to release engineering were in my",
    "start": "195920",
    "end": "201799"
  },
  {
    "text": "lab back then um I also started getting engaged with the myo community on our mailing",
    "start": "201799",
    "end": "207840"
  },
  {
    "text": "list and all the other available forums that we had um so at some point I",
    "start": "207840",
    "end": "213680"
  },
  {
    "text": "realized that this is what I'd like to do more and I went to doing community relations exclusively and this is what I",
    "start": "213680",
    "end": "219920"
  },
  {
    "text": "still do um back when we were an independent company the community community",
    "start": "219920",
    "end": "226040"
  },
  {
    "text": "relations team actually reported to Martin mikos the CEO directly so it was always a very important role inside of",
    "start": "226040",
    "end": "232040"
  },
  {
    "text": "the company um so we didn't report to marketing or we part of engineering we really were independent from all of",
    "start": "232040",
    "end": "237920"
  },
  {
    "text": "these groups sometimes even with different agenda especially with marketing um and we of course had",
    "start": "237920",
    "end": "245280"
  },
  {
    "text": "contact with all these groups um as as the community team you really have to pull strings into all these various",
    "start": "245280",
    "end": "251640"
  },
  {
    "text": "directions you get feedback from the users from your community that you have to then trickle into the engineering",
    "start": "251640",
    "end": "257000"
  },
  {
    "text": "organization to let them know what needs to be fixed what the focus of the product should be you talk with the",
    "start": "257000",
    "end": "263040"
  },
  {
    "text": "marketing folks about how the messaging to the community should look like um product management needs to be advised",
    "start": "263040",
    "end": "269280"
  },
  {
    "text": "on how the community expects things to be done so it's a very exciting job and I still",
    "start": "269280",
    "end": "274720"
  },
  {
    "text": "enjoy doing it even though I switched companies two times in the meanwhile you probably all know the story of my schol",
    "start": "274720",
    "end": "280960"
  },
  {
    "text": "and how we got acquired by Sun and how sun in turn got acquired by Oracle so",
    "start": "280960",
    "end": "286120"
  },
  {
    "text": "I'm now an oracle employee by business card and well kind of still a my S by",
    "start": "286120",
    "end": "291680"
  },
  {
    "text": "heart I guess so this is who I am um I'm",
    "start": "291680",
    "end": "297400"
  },
  {
    "text": "here in the Bay Area for the same event that Sarah was talking about the I um",
    "start": "297400",
    "end": "303000"
  },
  {
    "text": "Summit as in my role as the M community relations contact for the imia region so",
    "start": "303000",
    "end": "309240"
  },
  {
    "text": "this meeting was really a Meetup of all the leaders and presidents of Oracle",
    "start": "309240",
    "end": "314479"
  },
  {
    "text": "user groups worldwide not just the us and what struck me as very interesting",
    "start": "314479",
    "end": "320039"
  },
  {
    "text": "is that all of these Oracle user groups do have a lot of interest in my schol their their users the members already",
    "start": "320039",
    "end": "327120"
  },
  {
    "text": "use my schol somewhere in their data centers already and now that they are that my is part of Oracle they are not",
    "start": "327120",
    "end": "333680"
  },
  {
    "text": "shy anymore to actually talk about it so in a way my has become a bit more",
    "start": "333680",
    "end": "339199"
  },
  {
    "text": "serious with this corporate backing um and as it's probably obvious with the",
    "start": "339199",
    "end": "346520"
  },
  {
    "text": "latest release of my. 5 Oracle is not out to kill my in any way quite the contrary um my definitely change and",
    "start": "346520",
    "end": "354960"
  },
  {
    "text": "mature over time this is what a big company brings with it and I think some of these changes are certainly for the",
    "start": "354960",
    "end": "361360"
  },
  {
    "text": "better I mean a small startup has different focus and different requirements on for a product than a",
    "start": "361360",
    "end": "368840"
  },
  {
    "text": "company like Oracle who definitely realized that myc is not competing with a big database and mycol serves a",
    "start": "368840",
    "end": "376520"
  },
  {
    "text": "completely different need in audience and this is where my school is going to be um be improved for in the future so",
    "start": "376520",
    "end": "384400"
  },
  {
    "text": "we're not trying to become a replacement or a competition to the Oracle database",
    "start": "384400",
    "end": "389440"
  },
  {
    "text": "but but we are going to make sure that my school will continue to be better for the use case that you are all using it",
    "start": "389440",
    "end": "396400"
  },
  {
    "text": "for and so we are now um much better suited to really address the needs and",
    "start": "396400",
    "end": "402160"
  },
  {
    "text": "the requirements of where my SC is being used today that said let me give you a short",
    "start": "402160",
    "end": "408039"
  },
  {
    "start": "405000",
    "end": "463000"
  },
  {
    "text": "agenda I start with a little background about my schol high availability Concepts then I'll try to introduce the",
    "start": "408039",
    "end": "415440"
  },
  {
    "text": "various building blocks of what you should take a look at if you want to create a a high available my school",
    "start": "415440",
    "end": "421520"
  },
  {
    "text": "setup and this is an introductionary talk I'm not going to go into the Gory details on how to actually set this up",
    "start": "421520",
    "end": "428479"
  },
  {
    "text": "um each of these components are quite complex with the ex exception of myc",
    "start": "428479",
    "end": "433800"
  },
  {
    "text": "replication maybe so it also um requires that you have to look into what your",
    "start": "433800",
    "end": "440879"
  },
  {
    "text": "particular needs are um High availability usually isn't something that you can get off the shelf and it it",
    "start": "440879",
    "end": "447160"
  },
  {
    "text": "suits your needs you have to really customize it and make sure sure it fits your personal requirements and what you",
    "start": "447160",
    "end": "453560"
  },
  {
    "text": "need to get um configured in your system my school cluster pacemaker all",
    "start": "453560",
    "end": "460240"
  },
  {
    "text": "these are tools that I'm going to talk about so let's take a look at what you probably know so we have a",
    "start": "460240",
    "end": "467080"
  },
  {
    "start": "463000",
    "end": "525000"
  },
  {
    "text": "server here a PC you have MySQL running over there you have your local hard disk",
    "start": "467080",
    "end": "473759"
  },
  {
    "text": "drive and your client either your web app or an external application it talk",
    "start": "473759",
    "end": "479680"
  },
  {
    "text": "to the myc server using SQL statements these can come either Through the Wire",
    "start": "479680",
    "end": "485759"
  },
  {
    "text": "so over TCP IP or even on a local socket coming from from the same machine the",
    "start": "485759",
    "end": "492120"
  },
  {
    "text": "myc server takes your statements and performs the required action and then stores the data on disk on your file",
    "start": "492120",
    "end": "499159"
  },
  {
    "text": "system and Returns the result sets to you so what happens if this machine",
    "start": "499159",
    "end": "504680"
  },
  {
    "text": "crashes well you're screwed you don't have any replacement you don't have any backup",
    "start": "504680",
    "end": "510080"
  },
  {
    "text": "the client can't talk to the server anymore so something needs to be done about that particularly if that client",
    "start": "510080",
    "end": "516120"
  },
  {
    "text": "is a web app that serves 100,000 people that are waiting to get their their order placed into a",
    "start": "516120",
    "end": "523760"
  },
  {
    "text": "form so why do I need High availability or ha um what you can really be sure of",
    "start": "524040",
    "end": "531560"
  },
  {
    "start": "525000",
    "end": "623000"
  },
  {
    "text": "something can and it will fail at some point and according to Murphy it will always fail in the time that you're not",
    "start": "531560",
    "end": "537279"
  },
  {
    "text": "expecting it to be and well if you are a web shop there isn't really an ideal",
    "start": "537279",
    "end": "542360"
  },
  {
    "text": "time because somewhere over the globe somebody is awakened wants to do a purchase so downtime is usually not an",
    "start": "542360",
    "end": "549000"
  },
  {
    "text": "option but it's it's only necessary for to avoid um great failures in Hardware",
    "start": "549000",
    "end": "556720"
  },
  {
    "text": "or software sometimes you just want to be able to make an update of the operating system or there's a security",
    "start": "556720",
    "end": "563079"
  },
  {
    "text": "problem with mySQL you need to update so for service maintenance you need to be able to have uh a way to keep your",
    "start": "563079",
    "end": "570720"
  },
  {
    "text": "system up and running but still be able to perform such maintenance tasks and yes I've already mention it",
    "start": "570720",
    "end": "577680"
  },
  {
    "text": "downtime is expensive and depending on the role in your company you either get fired or you go",
    "start": "577680",
    "end": "583440"
  },
  {
    "text": "bankrupt if something like this happens so keep it in mind um downtime can be um",
    "start": "583440",
    "end": "593000"
  },
  {
    "text": "significant and also if you are just starting from scratch and you're",
    "start": "593000",
    "end": "598399"
  },
  {
    "text": "building up your infastructure and you're working on developing a new system try to consider High availability",
    "start": "598399",
    "end": "604720"
  },
  {
    "text": "as part of your entire setup from the very beginning it's usually quite painful to add this to an already",
    "start": "604720",
    "end": "610680"
  },
  {
    "text": "existing and running system without introducing any downtime if you start with having high availability in mind",
    "start": "610680",
    "end": "617079"
  },
  {
    "text": "from the beginning you're much better off than trying to plump this in at a later point in",
    "start": "617079",
    "end": "622680"
  },
  {
    "text": "time so the aim of high availability is to eliminate the so-called spuff the",
    "start": "622680",
    "end": "628360"
  },
  {
    "start": "623000",
    "end": "755000"
  },
  {
    "text": "single point of f failure so and the single point of failure can be quite a wide range of",
    "start": "628360",
    "end": "635560"
  },
  {
    "text": "things things that definitely fail at some point is everything that is moving and spinning like hard disk fence",
    "start": "635560",
    "end": "642320"
  },
  {
    "text": "spinning rust like hard dis they have a meantime between failures and especially under extreme",
    "start": "642320",
    "end": "650920"
  },
  {
    "text": "circumstances like uh high temperature these end of life situations tend to get",
    "start": "650920",
    "end": "656959"
  },
  {
    "text": "reached much faster than you think CPU fans are always cheap or too cheap and",
    "start": "656959",
    "end": "662519"
  },
  {
    "text": "they start to fail um but not always Hardware can fail your application can",
    "start": "662519",
    "end": "667600"
  },
  {
    "text": "crash there's a a bug and one of the services goes down and your website",
    "start": "667600",
    "end": "672639"
  },
  {
    "text": "still fails and it's not reachable Linux for example has this nice tendency to completely come to a",
    "start": "672639",
    "end": "679680"
  },
  {
    "text": "grinding Hal when you run out of memory or if you go heavily into Swap all of a sudden your system is so busy with",
    "start": "679680",
    "end": "685720"
  },
  {
    "text": "itself that it's not servicing any request anymore and the only solution for that usually is you have to reboot",
    "start": "685720",
    "end": "692440"
  },
  {
    "text": "if you can still shut down uh enter the shutdown command and Linux can really",
    "start": "692440",
    "end": "697519"
  },
  {
    "text": "get itself into a state where it's not reacting to anything anymore and in that case you just have to flip the switch",
    "start": "697519",
    "end": "704000"
  },
  {
    "text": "which then might lead to other problems and you want to get back up on your feet again other operating systems handle",
    "start": "704000",
    "end": "710079"
  },
  {
    "text": "this a bit more gracefully or well the classical case",
    "start": "710079",
    "end": "715160"
  },
  {
    "text": "that the cleaner trips over the cable and the network cable of your server is out no connection what",
    "start": "715160",
    "end": "721000"
  },
  {
    "text": "happens power supplies are always good for fun so there are lots of um sources",
    "start": "721000",
    "end": "726920"
  },
  {
    "text": "that can become the single point of failure that you should take a look at and need to have or need to be aware",
    "start": "726920",
    "end": "732880"
  },
  {
    "text": "of and this really is something that only you can identify you have to go through your configuration your system",
    "start": "732880",
    "end": "739279"
  },
  {
    "text": "your environment and take a look at okay where are the crucial Parts which other things where I might want to have a",
    "start": "739279",
    "end": "745519"
  },
  {
    "text": "replacement somewhere on the shelf or even better in a hot stand by mod ready to be acting as the replacement for the",
    "start": "745519",
    "end": "752560"
  },
  {
    "text": "active system and with computers and servers what you usually do is you create a",
    "start": "752560",
    "end": "759560"
  },
  {
    "start": "755000",
    "end": "888000"
  },
  {
    "text": "cluster a high available cluster means you provide redundancy of hardware and",
    "start": "759560",
    "end": "765279"
  },
  {
    "text": "the data that you want to store in it in that case you have a a backup system or more of them that can take",
    "start": "765279",
    "end": "771880"
  },
  {
    "text": "over in case that your primary system goes down in in the case that I'm talking",
    "start": "771880",
    "end": "778920"
  },
  {
    "text": "about what you usually do is you have a so-called virtual IP address this is the IP address that is known to the other",
    "start": "778920",
    "end": "785519"
  },
  {
    "text": "services and applications to talk with it this particular server but this virtual IP address can move between",
    "start": "785519",
    "end": "792240"
  },
  {
    "text": "different physical Hardware machines so the application doesn't really care it's always talking to the same IP address",
    "start": "792240",
    "end": "798320"
  },
  {
    "text": "and it doesn't realize that the hardware and the system behind it has been replaced because the the original ones",
    "start": "798320",
    "end": "803959"
  },
  {
    "text": "went down in the meanwhile",
    "start": "803959",
    "end": "810120"
  },
  {
    "text": "and yeah you have to ensure that the data that you want to make available is also in an integer state or is in a is",
    "start": "810120",
    "end": "818880"
  },
  {
    "text": "not corrupted by the failover or by the by the failure that has occurred and even though it's tempting a",
    "start": "818880",
    "end": "826040"
  },
  {
    "text": "high availability cluster is not designed to replace any Performance",
    "start": "826040",
    "end": "831320"
  },
  {
    "text": "Tuning measurements that you might want to also make so a high available ha",
    "start": "831320",
    "end": "838279"
  },
  {
    "text": "cluster is something different from a high performance cluster sometimes you can use it for both",
    "start": "838279",
    "end": "843639"
  },
  {
    "text": "purposes but something that you have to keep in mind if you design your system that two machines are constantly serving",
    "start": "843639",
    "end": "850240"
  },
  {
    "text": "your load because well who wants to have a system just being there running idle",
    "start": "850240",
    "end": "856480"
  },
  {
    "text": "we can make use of this because we we currently have such a spike in load let's use the hot spare for this cool",
    "start": "856480",
    "end": "863560"
  },
  {
    "text": "and then the primary system failes and all of a sudden the load that you've gotten used to had to be served from",
    "start": "863560",
    "end": "869240"
  },
  {
    "text": "that single remaining box and then you run into the next problem because it will get saturated and fall on its",
    "start": "869240",
    "end": "875560"
  },
  {
    "text": "feet or over its feet so high availability and scaleout",
    "start": "875560",
    "end": "883079"
  },
  {
    "text": "are two different things and both need to be kept in consideration of course you probably have seen this slide",
    "start": "883079",
    "end": "890800"
  },
  {
    "start": "888000",
    "end": "934000"
  },
  {
    "text": "before if my clicker Works um the level of high of",
    "start": "890800",
    "end": "895959"
  },
  {
    "text": "availability is usually given in a percentage um up time per year and the",
    "start": "895959",
    "end": "901480"
  },
  {
    "text": "Magical 59s is if when you have only yeah around 5 minutes of downtime",
    "start": "901480",
    "end": "908040"
  },
  {
    "text": "per year and that little curve here also shows um the cost that is usually um",
    "start": "908040",
    "end": "915000"
  },
  {
    "text": "involved with getting there so the question that you should be qu asking yourself do I need 59s or is it fine if",
    "start": "915000",
    "end": "923839"
  },
  {
    "text": "my system is available for well at least less than an hour per year",
    "start": "923839",
    "end": "929680"
  },
  {
    "text": "does it make sense no is or can it go down for less than an hour per year sorry so you want to get an explanation",
    "start": "929680",
    "end": "937839"
  },
  {
    "start": "934000",
    "end": "1032000"
  },
  {
    "text": "of the difference between High availability and high performance yeah you repeat exctly can get okay consider",
    "start": "937839",
    "end": "945600"
  },
  {
    "text": "that you you have a system that you want to make highly available in order to do this you need redundancy maybe in the",
    "start": "945600",
    "end": "952880"
  },
  {
    "text": "case of a second server so your application runs on your primary server the second server is a hot stand it's",
    "start": "952880",
    "end": "959279"
  },
  {
    "text": "doing nothing because it just waits for the case that the primary goes down and then it takes over so it makes sure that",
    "start": "959279",
    "end": "965759"
  },
  {
    "text": "the data has always been synchronized and it's it's ready to start at any time then your boss comes in and says hey our",
    "start": "965759",
    "end": "971600"
  },
  {
    "text": "website is getting so much load we need more power isn't there this second box",
    "start": "971600",
    "end": "976880"
  },
  {
    "text": "that can't we use that to serve some parts of the load so you enable the second box and you start serving um",
    "start": "976880",
    "end": "983560"
  },
  {
    "text": "requests from there so now your application is distributed on two machines and the load goes down",
    "start": "983560",
    "end": "989440"
  },
  {
    "text": "cool and then the primary node crashes so all of a sudden the load from this",
    "start": "989440",
    "end": "995079"
  },
  {
    "text": "service and the additional load that you have put on the other box goes to one system uh yeah is that could be doable",
    "start": "995079",
    "end": "1001920"
  },
  {
    "text": "so you could say yes we are using both systems but we're just utilizing them to 50% each but where's the difference 2 *",
    "start": "1001920",
    "end": "1009519"
  },
  {
    "text": "50% to 1 * 100% yeah you might get away with it sure sure all I'm trying to say is don't",
    "start": "1009519",
    "end": "1017959"
  },
  {
    "text": "assume that you're High availability system should be serving to for the load",
    "start": "1017959",
    "end": "1023959"
  },
  {
    "text": "distribution or to increase the performance this should really be done on dedicated machines that can also be",
    "start": "1023959",
    "end": "1030038"
  },
  {
    "text": "replaced with failover mechanisms rules of high availability I put these in front I usually had this as the last",
    "start": "1030039",
    "end": "1036079"
  },
  {
    "start": "1032000",
    "end": "1231000"
  },
  {
    "text": "slide and then I realized I run out of time and this slide never shows up so I start with it here again prepare for",
    "start": "1036079",
    "end": "1042280"
  },
  {
    "text": "failure it will happen at some point if your service is valuable and you depend on it make sure that it's always up or",
    "start": "1042280",
    "end": "1049799"
  },
  {
    "text": "that you can provide at least a reduced um level of service and you're not",
    "start": "1049799",
    "end": "1055440"
  },
  {
    "text": "completely off offline in any case and also try to identify what is really",
    "start": "1055440",
    "end": "1062120"
  },
  {
    "text": "important that needs to be available is it the entire website with everything just parts of it um most of the um",
    "start": "1062120",
    "end": "1070160"
  },
  {
    "text": "really popular websites usually degrade in a graceful way so that parts of the",
    "start": "1070160",
    "end": "1076080"
  },
  {
    "text": "service is still available um let's say you have a a video or a picture",
    "start": "1076080",
    "end": "1081600"
  },
  {
    "text": "uploading site the the part that still serves pictures is still up but the path",
    "start": "1081600",
    "end": "1087159"
  },
  {
    "text": "where you upload pictures might be down for a moment because this part just has a downtime so how try to identify if you",
    "start": "1087159",
    "end": "1094200"
  },
  {
    "text": "have any options for implementing it in this direction in order to not having to make everything fully",
    "start": "1094200",
    "end": "1101640"
  },
  {
    "text": "redundant and yeah kiss keep it simple stupid the case of a downtime when",
    "start": "1101640",
    "end": "1107960"
  },
  {
    "text": "something has crashed is usually when you have the highest stress and you need to get your system up and running as fast as possible if you first have to",
    "start": "1107960",
    "end": "1115559"
  },
  {
    "text": "read a 50 page manual to follow up and figure out how the system gets back up",
    "start": "1115559",
    "end": "1121440"
  },
  {
    "text": "this is likely going to cause you a lot of stress so make sure to keep it easy and simple and it's tempting to start",
    "start": "1121440",
    "end": "1129360"
  },
  {
    "text": "adding everything to the high availability system hey the M server cool let's put it into in here as well",
    "start": "1129360",
    "end": "1134840"
  },
  {
    "text": "and the file server yeah we want to make sure that this is highly available too so you have a very complex setup that",
    "start": "1134840",
    "end": "1139880"
  },
  {
    "text": "all of a sudden serves way too many purposes and it's hard to figure out what happened all the administrator is",
    "start": "1139880",
    "end": "1145919"
  },
  {
    "text": "on vacation or has left the company um so the more complex the system is the",
    "start": "1145919",
    "end": "1152240"
  },
  {
    "text": "the hard it really is to make get it up on its feed in case there is a failure and also as much as possible",
    "start": "1152240",
    "end": "1159840"
  },
  {
    "text": "automate this whole thing create scripts reduce the manual intervention",
    "start": "1159840",
    "end": "1165640"
  },
  {
    "text": "as much as you can to make sure it's repeatable and and has been tested so the last part really is most important",
    "start": "1165640",
    "end": "1172600"
  },
  {
    "text": "one there's no point in setting something up that is highly available that you haven't tested at all because",
    "start": "1172600",
    "end": "1178320"
  },
  {
    "text": "you just trust yeah it'll work also if you have made changes to the system test",
    "start": "1178320",
    "end": "1183919"
  },
  {
    "text": "if it still fails over if you have installed a new package if you have made an upgrade of something it may have",
    "start": "1183919",
    "end": "1189840"
  },
  {
    "text": "changed something underneath that you're not aware of maybe the system doesn't boot up anymore so even though there's",
    "start": "1189840",
    "end": "1196159"
  },
  {
    "text": "always a little risk involved the more testing you do the less harmful is the fal if it really goes down and it",
    "start": "1196159",
    "end": "1202840"
  },
  {
    "text": "doesn't come back up again because then it's under your control you're in front of the system you can make the change",
    "start": "1202840",
    "end": "1210000"
  },
  {
    "text": "you can see if it comes back up properly or not Murphy strikes again usually if a",
    "start": "1210000",
    "end": "1217039"
  },
  {
    "text": "failure occurs you're not around because you're just asleep it's 4:00 a.m. um and",
    "start": "1217039",
    "end": "1222080"
  },
  {
    "text": "then you back in the data center half sleeve and the system doesn't come up because you made a mistake so that's",
    "start": "1222080",
    "end": "1228280"
  },
  {
    "text": "something to avoid if you tested it before parts of an ha",
    "start": "1228280",
    "end": "1233880"
  },
  {
    "start": "1231000",
    "end": "1369000"
  },
  {
    "text": "system heartbeat that's the process or the application that kind of Pinks a",
    "start": "1233880",
    "end": "1240280"
  },
  {
    "text": "service or an application or an entire system if it's still alive or several",
    "start": "1240280",
    "end": "1246200"
  },
  {
    "text": "systems talk to each other and ensure that they're all still available that the data that they are returning makes",
    "start": "1246200",
    "end": "1252159"
  },
  {
    "text": "sense and it's not garbage these things are usually done through some kind of",
    "start": "1252159",
    "end": "1257200"
  },
  {
    "text": "heartbeating system you can either create this by yourself the easiest way to check if a web server is up you",
    "start": "1257200",
    "end": "1263080"
  },
  {
    "text": "create a little sh script that runs double you get for a web page and you compare the content of that web page",
    "start": "1263080",
    "end": "1268799"
  },
  {
    "text": "with a check sum or something like that so you can check both that the system is actually answering and that what it",
    "start": "1268799",
    "end": "1275400"
  },
  {
    "text": "returns still makes sense okay in case that the heartbeat tells you that something is not",
    "start": "1275400",
    "end": "1281720"
  },
  {
    "text": "answering or gives you wrong results you need to take action this part is usually being taken care of by an ha mon",
    "start": "1281720",
    "end": "1288919"
  },
  {
    "text": "application or tool it makes sure that it takes the appropriate action to remedy the",
    "start": "1288919",
    "end": "1294360"
  },
  {
    "text": "situation either by just restarting a service if it's just a process that has crashed um or by switching over to a",
    "start": "1294360",
    "end": "1301440"
  },
  {
    "text": "completely different system making sure that the servic are being started and um initialized in the appropriate way and",
    "start": "1301440",
    "end": "1308559"
  },
  {
    "text": "I'm going to give you an introduction to the most popular tool here in a later slide and also it should be able to",
    "start": "1308559",
    "end": "1315799"
  },
  {
    "text": "manually control those things especially if you want to test this um there should be a console where you",
    "start": "1315799",
    "end": "1321520"
  },
  {
    "text": "can run commands to do the the fail over in an in a manual way as",
    "start": "1321520",
    "end": "1326799"
  },
  {
    "text": "well um so we're talking a lot about how to make the system and the services",
    "start": "1326799",
    "end": "1332799"
  },
  {
    "text": "highly available but something that's very crucial about it is actually the data that you work with so if you have a",
    "start": "1332799",
    "end": "1339600"
  },
  {
    "text": "maid server the actual email or the mailboxes of your users this is the important data and in our case with myc",
    "start": "1339600",
    "end": "1347200"
  },
  {
    "text": "of course it's the databases in table that you want to make sure remain um up",
    "start": "1347200",
    "end": "1352360"
  },
  {
    "text": "to date and accessible so there are several ways on how you can make sure",
    "start": "1352360",
    "end": "1357480"
  },
  {
    "text": "that the data um is available or it's being made redundant and I'm going to talk about the two most popular um",
    "start": "1357480",
    "end": "1366000"
  },
  {
    "text": "Solutions in the mykill um field here another term that um pops up quite",
    "start": "1366000",
    "end": "1373279"
  },
  {
    "start": "1369000",
    "end": "1557000"
  },
  {
    "text": "frequently is split brain this is the situation in which you have two",
    "start": "1373279",
    "end": "1379880"
  },
  {
    "text": "systems well or more depending on on your setup that both think that they are",
    "start": "1379880",
    "end": "1385880"
  },
  {
    "text": "now in charge of the entire application because they can't reach the other one",
    "start": "1385880",
    "end": "1391080"
  },
  {
    "text": "anymore so if you have two systems and they have a heartbeat going on and they check each other if they are still alive",
    "start": "1391080",
    "end": "1399039"
  },
  {
    "text": "and all of a sudden the connection between these two machines is down they are still both up and running but they",
    "start": "1399039",
    "end": "1404200"
  },
  {
    "text": "can't reach their partner anymore so they assume okay the other one is gone I'm another one to take charge of of the",
    "start": "1404200",
    "end": "1411480"
  },
  {
    "text": "application and depending on how your system is configured this may lead to really really bad things especially if",
    "start": "1411480",
    "end": "1419080"
  },
  {
    "text": "you have a shared storage and you have two mycol servers that no want to access the same table",
    "start": "1419080",
    "end": "1425080"
  },
  {
    "text": "files bad so in order to avoid this you need to have a moderator or an arbitrator",
    "start": "1425080",
    "end": "1433200"
  },
  {
    "text": "which is usually a process or a server that runs somewhere outside that can",
    "start": "1433200",
    "end": "1438840"
  },
  {
    "text": "kind of make the decision for these two guys if they can't figure it out by themselves and then depending on what",
    "start": "1438840",
    "end": "1445320"
  },
  {
    "text": "you use this moderator takes some very serious action by simply shutting off",
    "start": "1445320",
    "end": "1451520"
  },
  {
    "text": "one of the systems to make sure they can't create any more harm or he runs scripts or executes any certain commands",
    "start": "1451520",
    "end": "1459400"
  },
  {
    "text": "to make sure to solve the situation this depends on how it's being configured and what tools you use but split brain is",
    "start": "1459400",
    "end": "1466640"
  },
  {
    "text": "something to to avoid as depl okay I'm now going to talk a bit",
    "start": "1466640",
    "end": "1472360"
  },
  {
    "text": "how to make the data redundant and the first thing I'm going to talk about is what's built into",
    "start": "1472360",
    "end": "1478799"
  },
  {
    "text": "my SQL replication you're probably all aware of it I hope so what we do this is the setup",
    "start": "1478799",
    "end": "1485919"
  },
  {
    "text": "that we just have we have our server with the local hard disk running MySQL",
    "start": "1485919",
    "end": "1492200"
  },
  {
    "text": "and we just pop a second box right next to it in this case it's also running MySQL with a local",
    "start": "1492200",
    "end": "1499159"
  },
  {
    "text": "dis the client is configured to talk",
    "start": "1499159",
    "end": "1504279"
  },
  {
    "text": "to this box as usual which then stores the data on its local disk but also",
    "start": "1504360",
    "end": "1511000"
  },
  {
    "text": "replicates the data to the second myql instance so you now have a backup copy of your data sitting on a second machine",
    "start": "1511000",
    "end": "1518440"
  },
  {
    "text": "ready for you to be used in case it's needed so the data is stored here as well and in case this one falls down",
    "start": "1518440",
    "end": "1527200"
  },
  {
    "text": "your application just talks with the second copy which is still there and the usual way to do this is by",
    "start": "1527200",
    "end": "1534679"
  },
  {
    "text": "using what I already mentioned the floating IP address so the my school client application appears being",
    "start": "1534679",
    "end": "1540120"
  },
  {
    "text": "configured to talk to Virtual IP address then is which is then moved over to the second Machine by either a script that",
    "start": "1540120",
    "end": "1547399"
  },
  {
    "text": "you've created yourself or using a load balancer or one of the tools that are",
    "start": "1547399",
    "end": "1554720"
  },
  {
    "start": "1557000",
    "end": "1681000"
  },
  {
    "text": "available so so a bit more details about myc replication I hope I don't bore you with this um MyQ replication is built",
    "start": "1557039",
    "end": "1565399"
  },
  {
    "text": "into MyQ since 3.23 it has been R for quite a while it's a way to",
    "start": "1565399",
    "end": "1572000"
  },
  {
    "text": "replicate statements that Chang data in your table so you need to have a second",
    "start": "1572000",
    "end": "1579279"
  },
  {
    "text": "copy of the data that is in the same state and the replication then copies over all the statements that modify data",
    "start": "1579279",
    "end": "1586640"
  },
  {
    "text": "in any way so the changes are being sled on both sides um it used to be statement based",
    "start": "1586640",
    "end": "1592440"
  },
  {
    "text": "so we actually distributed the SQL statements that I used to change the data um since my school 5.1 you can also",
    "start": "1592440",
    "end": "1599120"
  },
  {
    "text": "use So-Cal row based replication in which case the actual change data is being copied over to the other",
    "start": "1599120",
    "end": "1605559"
  },
  {
    "text": "side it's fairly easy to configure and set up there's a mixed mode isn't there",
    "start": "1605559",
    "end": "1610640"
  },
  {
    "text": "there is also a mixed mode yes good point so in the mixed mode myol decides if it's going to use statement or row",
    "start": "1610640",
    "end": "1616320"
  },
  {
    "text": "based replication based on what makes most sense in this",
    "start": "1616320",
    "end": "1621720"
  },
  {
    "text": "situation um one thing to keep in mind myc replication by default is asynchronous which means that the mycle",
    "start": "1621720",
    "end": "1630039"
  },
  {
    "text": "master Server doesn't really know or care if any of the slaves has reached and replicated the data it just proceeds",
    "start": "1630039",
    "end": "1637360"
  },
  {
    "text": "and goes on it's not actually not aware of the slaves at all so it's it's up to the slave to make sure that it's keeping",
    "start": "1637360",
    "end": "1644279"
  },
  {
    "text": "up with what's happening on the master um we have added a new feature in myc 5.5 which is called the",
    "start": "1644279",
    "end": "1650679"
  },
  {
    "text": "semisynchronous replication since it's not fully synchronous it's a a nice",
    "start": "1650679",
    "end": "1657279"
  },
  {
    "text": "workaround that we have implemented there um what we basically do is that",
    "start": "1657279",
    "end": "1663600"
  },
  {
    "text": "the my master server Waits until at least one of the slaves has acknowledged that it has received the data on its",
    "start": "1663600",
    "end": "1670640"
  },
  {
    "text": "side so there is a a backup copy somewhere outside of the master server before it proceeds with um giving the",
    "start": "1670640",
    "end": "1678240"
  },
  {
    "text": "okay to the application so on the master server you",
    "start": "1678240",
    "end": "1683399"
  },
  {
    "text": "have a so-called binary log file and this is where all the statements all the",
    "start": "1683399",
    "end": "1688519"
  },
  {
    "text": "rows are being stored the slave then connects to the mass and just pulls everything that has been put into the",
    "start": "1688519",
    "end": "1693880"
  },
  {
    "text": "binary lock since the last time it has connected to the master so my replication is push uh pull the slave",
    "start": "1693880",
    "end": "1701840"
  },
  {
    "text": "connects to the master and pulls the data from there it's not the master that says hey I've got something new here it",
    "start": "1701840",
    "end": "1707760"
  },
  {
    "text": "is the master just writes it to its loog fights and forgets about it the slave goes to the master and asks okay do you",
    "start": "1707760",
    "end": "1714200"
  },
  {
    "text": "have anything new for me and then it grabs all the changes since",
    "start": "1714200",
    "end": "1719399"
  },
  {
    "text": "then um a little caveat here is that replication on the slave is single",
    "start": "1719399",
    "end": "1726200"
  },
  {
    "text": "threaded so while on the master you can have multi concurrent sessions banging",
    "start": "1726200",
    "end": "1731559"
  },
  {
    "text": "on the server at the same time on the slave all these changes are being serialized and being applied one after",
    "start": "1731559",
    "end": "1738840"
  },
  {
    "text": "another not in a parallel fashion as it happens on the master so the slave slave",
    "start": "1738840",
    "end": "1744760"
  },
  {
    "text": "May lack behind if you have really quite a lot of updates happening um so if you are very heavy on",
    "start": "1744760",
    "end": "1753240"
  },
  {
    "text": "iO you replication slave might actually have to be a bit faster than the master in order to keep up with what's",
    "start": "1753240",
    "end": "1759159"
  },
  {
    "text": "happening we are working on how to solve this problem right now what you are thinking of is having separate threats",
    "start": "1759159",
    "end": "1766039"
  },
  {
    "text": "for Separate Tables um not at the moment my school isn't designed like that um but we are aware",
    "start": "1766039",
    "end": "1773480"
  },
  {
    "text": "of this limitation and the link here gives you a bit of background information how we try to to solve this",
    "start": "1773480",
    "end": "1780120"
  },
  {
    "text": "problem just to repeat for the remote audience one of the problems is that the",
    "start": "1780120",
    "end": "1785720"
  },
  {
    "text": "replication used to be statement based and since you having if you want to um",
    "start": "1785720",
    "end": "1791120"
  },
  {
    "text": "treat transactions in the appropriate way you simply have to serialize this to make sure that the data ends up in the",
    "start": "1791120",
    "end": "1797240"
  },
  {
    "text": "in the right order is consistent one thing also to keep in mind this is just pure data replication",
    "start": "1797240",
    "end": "1805240"
  },
  {
    "text": "there's no hard beating there's no monitoring or nothing need to be implemented outside of the myc server",
    "start": "1805240",
    "end": "1812000"
  },
  {
    "text": "something that we've added with myo 5.5 is a so-called replication heartbeat so this allows the slave to determine if",
    "start": "1812000",
    "end": "1819600"
  },
  {
    "text": "the master is actually still up or if it has failed which can be then um used",
    "start": "1819600",
    "end": "1825760"
  },
  {
    "text": "with ex with um external scripts to take appropriate action if the heartbeat is",
    "start": "1825760",
    "end": "1832000"
  },
  {
    "text": "missing and here's a quick overview on how replication is being configured so",
    "start": "1832000",
    "end": "1838200"
  },
  {
    "text": "you have the mcod server here it writes the data to its local tables and also",
    "start": "1838200",
    "end": "1843320"
  },
  {
    "text": "all the changes are being stored into the binary lock the slave then connects and replicates the data and the first",
    "start": "1843320",
    "end": "1850799"
  },
  {
    "text": "thing the slave does is is storing the data in its own loog F the relay log so",
    "start": "1850799",
    "end": "1855880"
  },
  {
    "text": "the all the changes they don't end up in the slaves tables directly they put into",
    "start": "1855880",
    "end": "1861919"
  },
  {
    "text": "a a temporary space so to say the relay lock and from there the SQL fight is",
    "start": "1861919",
    "end": "1867799"
  },
  {
    "text": "taking all the the updates it inserts and deletes and applies them to the local",
    "start": "1867799",
    "end": "1874039"
  },
  {
    "text": "tables okay I'm not going to this in much detail but both statement based and",
    "start": "1874039",
    "end": "1880039"
  },
  {
    "text": "row based replications have their pros and cons I will make the slides available for you to download so um I",
    "start": "1880039",
    "end": "1886440"
  },
  {
    "text": "guess we can skip this for now it's take a bit too long so row based replication was included or added in myc 5.1 and",
    "start": "1886440",
    "end": "1893639"
  },
  {
    "text": "this is the replication technology that usually is used by all the other",
    "start": "1893639",
    "end": "1899039"
  },
  {
    "text": "classical um database systems so statement based replication was pretty",
    "start": "1899039",
    "end": "1904279"
  },
  {
    "text": "unique to mySQL there weren't really only a few other databases that implemented this approach um there are",
    "start": "1904279",
    "end": "1912120"
  },
  {
    "text": "several ways in how you can set up myol application the simplest one is you have",
    "start": "1912120",
    "end": "1917600"
  },
  {
    "text": "one master and one slave a master can also have multiple slaves that take the",
    "start": "1917600",
    "end": "1922760"
  },
  {
    "text": "same data and replicate it it can be cascaded in this fashion this makes",
    "start": "1922760",
    "end": "1928720"
  },
  {
    "text": "sense if you have for example quite a lot of replication slaves that would um",
    "start": "1928720",
    "end": "1934080"
  },
  {
    "text": "add too much load on your primary master so you can set up one slave that then serves just as a as a master for all the",
    "start": "1934080",
    "end": "1941200"
  },
  {
    "text": "others to offload this system from from this task what's currently not possible is",
    "start": "1941200",
    "end": "1947440"
  },
  {
    "text": "that you have a multisource replication or multimaster replication where you have several my school Masters that all",
    "start": "1947440",
    "end": "1954039"
  },
  {
    "text": "replicate into the one single slave will this be coming eventually um we have lots of requests",
    "start": "1954039",
    "end": "1961799"
  },
  {
    "text": "for that um I'm sure there's a worklog entry for this and my SC keeps track of",
    "start": "1961799",
    "end": "1967279"
  },
  {
    "text": "all the features and things that we need to fix in a so-called worklog which is our internal tool for planning the",
    "start": "1967279",
    "end": "1975000"
  },
  {
    "text": "releases I would have to look it up if it's already already been worked on and how far the implementation has gone yes",
    "start": "1975000",
    "end": "1981919"
  },
  {
    "text": "we do have a public copy of our worklog on the my school Forge forg school.com",
    "start": "1981919",
    "end": "1987200"
  },
  {
    "text": "slork loock if you want to take a look at what our Engineers are up to this is a very special setup that I'm going to",
    "start": "1987200",
    "end": "1993559"
  },
  {
    "text": "explain in more detail later on master master so you have two servers that are",
    "start": "1993559",
    "end": "1998799"
  },
  {
    "text": "both master and slave to each other and this can be quite useful you can also create a ring where",
    "start": "1998799",
    "end": "2005200"
  },
  {
    "text": "you have boxes replicating each other until the replication goes back to the",
    "start": "2005200",
    "end": "2010480"
  },
  {
    "text": "beginning that's also possible and has some use cases but these two setups have",
    "start": "2010480",
    "end": "2015919"
  },
  {
    "text": "their gotas that you need to be aware of okay elaborating on master",
    "start": "2015919",
    "end": "2021120"
  },
  {
    "text": "master so you have two machines both are from a my school standpoint configured to be master and slave of each",
    "start": "2021120",
    "end": "2029760"
  },
  {
    "text": "other which makes it quite easy to fail over because they are already aware of their relationship with the other which",
    "start": "2030120",
    "end": "2037519"
  },
  {
    "text": "with each other you don't have to reconfigure anything if a slave all of a sudden becomes the master because the",
    "start": "2037519",
    "end": "2043559"
  },
  {
    "text": "other system crashes it's already properly configured um so it looks like this is",
    "start": "2043559",
    "end": "2050320"
  },
  {
    "text": "very tempting to Simply spread right load between those two machines as well it's master master right you can just",
    "start": "2050320",
    "end": "2056240"
  },
  {
    "text": "shoot queries at both of them um doesn't really help because people sometimes",
    "start": "2056240",
    "end": "2063440"
  },
  {
    "text": "assume that this gives them uh load balancing or helps them to distribute",
    "start": "2063440",
    "end": "2068839"
  },
  {
    "text": "the right load but since they are replicating from each other anyway they",
    "start": "2068839",
    "end": "2073960"
  },
  {
    "text": "also have to apply the same changes on the other side that and if one of the systems",
    "start": "2073960",
    "end": "2081200"
  },
  {
    "text": "fails uh since the replication is ASN chronous you don't really know if the data has already made it to the other",
    "start": "2081200",
    "end": "2087760"
  },
  {
    "text": "side so you're definitely going to run into inconsistencies that are hard to resolve so if you are setting up a",
    "start": "2087760",
    "end": "2094040"
  },
  {
    "text": "master master my score setup um make sure that you any queries that modifier your data",
    "start": "2094040",
    "end": "2101520"
  },
  {
    "text": "in that update delete are only sent to one of these nodes um at a time right so",
    "start": "2101520",
    "end": "2107320"
  },
  {
    "text": "for schema changes there this setup has an advantage because you can make the",
    "start": "2107320",
    "end": "2112359"
  },
  {
    "text": "schema change on on the replication SL without any outage but that depends on the schema change if you just add",
    "start": "2112359",
    "end": "2118720"
  },
  {
    "text": "another column this works but sometimes schema changes are not um rep rep",
    "start": "2118720",
    "end": "2124880"
  },
  {
    "text": "replicatable anymore so depends sometimes you get lucky with this but you definitely need to know what you're",
    "start": "2124880",
    "end": "2130839"
  },
  {
    "text": "doing ddl ddl is also replicated yes so creating tables dropping tables also",
    "start": "2130839",
    "end": "2137440"
  },
  {
    "text": "replicates to the slave and that's something to keep in mind if you accidentally drop a table It's Quickly",
    "start": "2137440",
    "end": "2144560"
  },
  {
    "text": "gone on the slave as well so um we do have a patch in the pipeline that will",
    "start": "2144560",
    "end": "2150319"
  },
  {
    "text": "Implement um delayed replication where you can set up the slave that is",
    "start": "2150319",
    "end": "2155480"
  },
  {
    "text": "deliberately lagging behind the master for a given given amount of time which is a nice way to Stage replication to",
    "start": "2155480",
    "end": "2162200"
  },
  {
    "text": "avoid accidental errors like this where you know okay I just made a mistake but fortunately this slave is lagging behind",
    "start": "2162200",
    "end": "2169480"
  },
  {
    "text": "it hasn't received this statement yet and allows you to recover from",
    "start": "2169480",
    "end": "2174800"
  },
  {
    "text": "there so mycol replication is an ha solution what happens if the master",
    "start": "2174800",
    "end": "2183280"
  },
  {
    "text": "fails well the application won't work anymore right and the slave has nothing to replicate",
    "start": "2183280",
    "end": "2190319"
  },
  {
    "text": "from what happens if the slave fails data will no longer be",
    "start": "2190319",
    "end": "2196640"
  },
  {
    "text": "replicated but the application still runs fine on the master and is this High",
    "start": "2196640",
    "end": "2205040"
  },
  {
    "text": "availability yes no this doesn't sound like high availability right fooled by",
    "start": "2205040",
    "end": "2210319"
  },
  {
    "text": "my own slides damn anyway so replication is just a part of an ha",
    "start": "2210319",
    "end": "2218400"
  },
  {
    "text": "configuration so replication by by Design is pretty dumb so it does its thing it replicates data makes sure you",
    "start": "2218400",
    "end": "2224920"
  },
  {
    "text": "have a copy but in order to use it in an high availability system you need to do",
    "start": "2224920",
    "end": "2230119"
  },
  {
    "text": "some more work and if you're running Linux which you probably should when you're running",
    "start": "2230119",
    "end": "2235440"
  },
  {
    "start": "2231000",
    "end": "2350000"
  },
  {
    "text": "MyQ in production um you should take a look at pacemaker formerly known as",
    "start": "2235440",
    "end": "2240560"
  },
  {
    "text": "heartbeat this pacemaker is kind of the the second generation of this um tool",
    "start": "2240560",
    "end": "2247560"
  },
  {
    "text": "and it's an open source project that provides a framework for making",
    "start": "2247560",
    "end": "2252920"
  },
  {
    "text": "basically any generic Linux service highly available so it provides services that allow you to monitor resources like",
    "start": "2252920",
    "end": "2260319"
  },
  {
    "text": "processes or Hardware um it has the heartbeating",
    "start": "2260319",
    "end": "2265480"
  },
  {
    "text": "functionality um it provides a fencing mechanism fencing is the the approach",
    "start": "2265640",
    "end": "2272839"
  },
  {
    "text": "that you want to make sure that once a system is failing or is in very in an in",
    "start": "2272839",
    "end": "2279440"
  },
  {
    "text": "an undefined state that it doesn't interfere anymore so the approach that they are using is",
    "start": "2279440",
    "end": "2285560"
  },
  {
    "text": "called stonith Shoot the other node in the head and they usually do this by flipping a switch and taking off the",
    "start": "2285560",
    "end": "2291720"
  },
  {
    "text": "power from the box there are power strips that have a TCP IP or a Serial interface so you can control them by PC",
    "start": "2291720",
    "end": "2299000"
  },
  {
    "text": "in order to um switch off the power so the system in uh in question is being",
    "start": "2299000",
    "end": "2305720"
  },
  {
    "text": "shut off it's pretty fast in determining if a service or a note has failed and it can",
    "start": "2305720",
    "end": "2312200"
  },
  {
    "text": "then take the appropriate action to do the fail over to the backup system and",
    "start": "2312200",
    "end": "2319440"
  },
  {
    "text": "for my schol it even includes predefined scripts that automate this process",
    "start": "2319440",
    "end": "2324760"
  },
  {
    "text": "making sure that Master the Master Slave configuration is being changed",
    "start": "2324760",
    "end": "2330599"
  },
  {
    "text": "appropriately it's quite complex to set up um but it has good docks and and",
    "start": "2330599",
    "end": "2337560"
  },
  {
    "text": "there are even two examples that you can't really read on these slides I guess how to create a load balanced",
    "start": "2337560",
    "end": "2343480"
  },
  {
    "text": "mycol application cluster and how to use drbd with my square and drbd is something that I'm going to talk",
    "start": "2343480",
    "end": "2349720"
  },
  {
    "text": "about so we have replication we have pacemaker these two pieces combined give",
    "start": "2349720",
    "end": "2356040"
  },
  {
    "start": "2350000",
    "end": "2516000"
  },
  {
    "text": "us a quite wellworking High availability solution so yeah pacemaker also uses",
    "start": "2356040",
    "end": "2361960"
  },
  {
    "text": "virtual IP address that can float between systems so I set up in in the minimal case two myc servers that",
    "start": "2361960",
    "end": "2368920"
  },
  {
    "text": "replicate to each other we have a virtual IP address that is being used for the application to talk with one of",
    "start": "2368920",
    "end": "2374440"
  },
  {
    "text": "these servers and pacemaker makes sure that if the my school process dies or",
    "start": "2374440",
    "end": "2379680"
  },
  {
    "text": "the hardware fails the other takes over and everything is being configured appropriately the problem with mycol",
    "start": "2379680",
    "end": "2386839"
  },
  {
    "text": "replication is um one that it's asynchronous so in a case of a failover",
    "start": "2386839",
    "end": "2392880"
  },
  {
    "text": "there might be a gap and data data is lost because it hasn't replicated before Master crashed or disappeared",
    "start": "2392880",
    "end": "2400640"
  },
  {
    "text": "whatever and once the primary system is back up you can't easily fall back to it",
    "start": "2400640",
    "end": "2407920"
  },
  {
    "text": "because of the way replication works so we have to figure out okay is anything missing can I simply continue the",
    "start": "2407920",
    "end": "2414359"
  },
  {
    "text": "replication with what has happened on the new Master since then or do I have to restore from backup um",
    "start": "2414359",
    "end": "2422359"
  },
  {
    "text": "so from failing from the master to the slave is usually easy but going back",
    "start": "2422359",
    "end": "2428480"
  },
  {
    "text": "again may require some manual interaction since there is no automatic conflict",
    "start": "2428480",
    "end": "2434800"
  },
  {
    "text": "resolution and therefore yeah you need to invest some time or brain to get this",
    "start": "2434800",
    "end": "2441119"
  },
  {
    "text": "sorted out okay we can use other replication Technologies and dis replication is",
    "start": "2441119",
    "end": "2447880"
  },
  {
    "text": "another one I'm wanting to cover so in this case we again have our myc server",
    "start": "2447880",
    "end": "2453440"
  },
  {
    "text": "which stes its data on this we have another one and this time we just have a dis in there running at",
    "start": "2453440",
    "end": "2460000"
  },
  {
    "text": "the moment application talks with my schol on this side stores the data on disk and",
    "start": "2460000",
    "end": "2467480"
  },
  {
    "text": "in this case the replication is being done on the dis level not we're not using mycore replication here but we're",
    "start": "2467480",
    "end": "2474319"
  },
  {
    "text": "replicating the files as they are stored on the dis by the mycore server and in case that the first one goes down we",
    "start": "2474319",
    "end": "2481839"
  },
  {
    "text": "start MySQL on the second system and have access to the file system and can start serving um data from",
    "start": "2481839",
    "end": "2490839"
  },
  {
    "text": "there that process is not automatic the switch over here would have to be done",
    "start": "2490839",
    "end": "2496839"
  },
  {
    "text": "with something like um pacemaker for example well you need a person involved",
    "start": "2496839",
    "end": "2502160"
  },
  {
    "text": "to switch that no in well in the very basic case this could be a DBA yes but",
    "start": "2502160",
    "end": "2508599"
  },
  {
    "text": "you usually have a script or something like that or you use pacemaker or a dedicated solution that takes care of",
    "start": "2508599",
    "end": "2516240"
  },
  {
    "start": "2516000",
    "end": "3053000"
  },
  {
    "text": "this if you're running Linux um we have a a kernel module named drbd the",
    "start": "2516240",
    "end": "2522240"
  },
  {
    "text": "distributed replicated block device and what drbd does is yeah well it can be",
    "start": "2522240",
    "end": "2528440"
  },
  {
    "text": "compared with rid one over a network card so you have a partition or a block device on on the on the primary server",
    "start": "2528440",
    "end": "2535920"
  },
  {
    "text": "and then you set up a second machine ideally configured in the similar way also with the partition and you enable",
    "start": "2535920",
    "end": "2542680"
  },
  {
    "text": "drbd on both systems and drbd will replicate block",
    "start": "2542680",
    "end": "2547760"
  },
  {
    "text": "from one device to another this dedicated network card and it's doing this in an synchronous way which is very",
    "start": "2547760",
    "end": "2556880"
  },
  {
    "text": "essential so every time you make a change on the primary system every block",
    "start": "2557040",
    "end": "2562359"
  },
  {
    "text": "block that has changed on this block device is being replicated over to the other side and only when the second node",
    "start": "2562359",
    "end": "2568880"
  },
  {
    "text": "acknowledg that it has received the block then the RBD gives back the okay",
    "start": "2568880",
    "end": "2574559"
  },
  {
    "text": "that then trickles up from the F system layer up to the application by default they are being",
    "start": "2574559",
    "end": "2581440"
  },
  {
    "text": "configured in an active passive configuration let me go back to that slide real quick so you have the active",
    "start": "2581440",
    "end": "2590079"
  },
  {
    "text": "system and the replication takes place and the the block device on the",
    "start": "2590079",
    "end": "2597800"
  },
  {
    "text": "the of the secondary system is not accessible even though you have a full identical copy of the data as long as",
    "start": "2597800",
    "end": "2605720"
  },
  {
    "text": "this one is in replication mode you can't really access it well drbd has changed this in the meanwhile um so",
    "start": "2605720",
    "end": "2613760"
  },
  {
    "text": "there now are options of of doing this using a cluster file system but by default with the usual file systems like",
    "start": "2613760",
    "end": "2620599"
  },
  {
    "text": "xfs or axt um you wouldn't be able to access the data since um the RBD works on a",
    "start": "2620599",
    "end": "2629040"
  },
  {
    "text": "block device level so it's a layer underneath the file system and file systems usually don't cope well with",
    "start": "2629040",
    "end": "2636480"
  },
  {
    "text": "blocks that changing underneath them when they are mounted they they don't expect this to happen so you will run",
    "start": "2636480",
    "end": "2641880"
  },
  {
    "text": "into grave inconsistencies if you try to mount such a fire system in fact drbd",
    "start": "2641880",
    "end": "2647040"
  },
  {
    "text": "protects you you can't mount a drbd controlled file system as long as it's in in passive replication you can put",
    "start": "2647040",
    "end": "2653680"
  },
  {
    "text": "them both in active mode yes the RBD will complain about this and if you",
    "start": "2653680",
    "end": "2659040"
  },
  {
    "text": "don't have a cluster fire system like ocfs or GFS you will corrupt your",
    "start": "2659040",
    "end": "2664599"
  },
  {
    "text": "data yeah well but be aware that this is not recommended so only if the primary",
    "start": "2664599",
    "end": "2670920"
  },
  {
    "text": "node crashes the secondary will be promoted to be the new primary and then you can mount the file system start the",
    "start": "2670920",
    "end": "2677359"
  },
  {
    "text": "MyCare server and get going again all right let's",
    "start": "2677359",
    "end": "2683599"
  },
  {
    "text": "see yeah I mentioned this here dual primary mode is available drbd is the",
    "start": "2683599",
    "end": "2689240"
  },
  {
    "text": "website the whole thing is maintained by an Austrian company named linbit and",
    "start": "2689240",
    "end": "2694520"
  },
  {
    "text": "they have been very actively developing this thing for many many years and I think sometime",
    "start": "2694520",
    "end": "2702040"
  },
  {
    "text": "last year they lenus toal finally accepted the code and it's no part of the Mainland Linux",
    "start": "2702040",
    "end": "2709000"
  },
  {
    "text": "kernel replicates blocks we already said that yes anbd is very commonly used in",
    "start": "2710599",
    "end": "2717280"
  },
  {
    "text": "combination with pacemaker for example because well since it's on on the Block",
    "start": "2717280",
    "end": "2722599"
  },
  {
    "text": "Level there you can replicate anything be it m server or file server data myc tables it's used for anything that's",
    "start": "2722599",
    "end": "2730160"
  },
  {
    "text": "true so since it's synchronous replication and an RM minus RF star on",
    "start": "2730160",
    "end": "2736240"
  },
  {
    "text": "the left side replicates immediately to the other side so in this case a backup is needed since this is happening again",
    "start": "2736240",
    "end": "2743359"
  },
  {
    "text": "on the Block Level layer when you fail over you mount the file system and the",
    "start": "2743359",
    "end": "2749480"
  },
  {
    "text": "file system us uh quite likely is in an inconsistent State first because well",
    "start": "2749480",
    "end": "2755040"
  },
  {
    "text": "it's not a file system replication it's a block replication so this secondary starts up you mount the F system and",
    "start": "2755040",
    "end": "2761640"
  },
  {
    "text": "first has to perform an Integrity check that's why you have to use a journaling file system like xfs Riser FS",
    "start": "2761640",
    "end": "2768559"
  },
  {
    "text": "ext4 JFS there are many options but don't use EXT2 or anything else that is",
    "start": "2768559",
    "end": "2774720"
  },
  {
    "text": "not journaling and then you have a file system then you start MySQL if you use",
    "start": "2774720",
    "end": "2780599"
  },
  {
    "text": "INB which you should because my Isam is not that robust for such situations INB",
    "start": "2780599",
    "end": "2786079"
  },
  {
    "text": "will have to Performance log recovery and consistency check and then you finally get going again there were",
    "start": "2786079",
    "end": "2791680"
  },
  {
    "text": "several questions let's start with this one in the back so the question was um how much latency is involved by this",
    "start": "2791680",
    "end": "2798400"
  },
  {
    "text": "replication because it's synchronous and what happens if the the slave crashes um",
    "start": "2798400",
    "end": "2804960"
  },
  {
    "text": "the terms that you've just been using make it sound as if you think this is a database but it's just really block",
    "start": "2804960",
    "end": "2810200"
  },
  {
    "text": "replication there's no transactions involved but it's it's synchronous and and the way drbd works is that the",
    "start": "2810200",
    "end": "2817040"
  },
  {
    "text": "application writes to the file system the file system writes into the block device",
    "start": "2817040",
    "end": "2822280"
  },
  {
    "text": "drbd replicates this block over to the secondary node the secondary node gives",
    "start": "2822280",
    "end": "2827640"
  },
  {
    "text": "a confirmation that it has stored the block on its local disk then the primary confirms the file",
    "start": "2827640",
    "end": "2834920"
  },
  {
    "text": "system the block has written to disk the file system inform informs the application that the data is there so",
    "start": "2834920",
    "end": "2841480"
  },
  {
    "text": "there is latency involved yes and therefore you need to make sure that for drbd you have a low latency high",
    "start": "2841480",
    "end": "2849079"
  },
  {
    "text": "bandwidth connection between those two so gigabit e switched or uh a crossover",
    "start": "2849079",
    "end": "2854440"
  },
  {
    "text": "cable between two Network CS is probably the best and the second is what happens if the secondary replication node fails",
    "start": "2854440",
    "end": "2862720"
  },
  {
    "text": "um basically nothing drbd continues to run just fine on the primary note um it",
    "start": "2862720",
    "end": "2869359"
  },
  {
    "text": "stores the data locally of course um and it also confirms to the",
    "start": "2869359",
    "end": "2874640"
  },
  {
    "text": "application immediately that the data has been stored but um the RBD is able to trigger a warning or you have to take",
    "start": "2874640",
    "end": "2881680"
  },
  {
    "text": "action in this point and there are hooks in the RBD that allow you to do that um",
    "start": "2881680",
    "end": "2886720"
  },
  {
    "text": "once the secondary node is back up again it will catch up um the master tapes",
    "start": "2886720",
    "end": "2892000"
  },
  {
    "text": "care of what has changed in the meanwhile so once the secondary node is up again it will simply take everything",
    "start": "2892000",
    "end": "2898200"
  },
  {
    "text": "that has been changed since then so it'll be in asynchronous mode for a while until it has fully caught up and",
    "start": "2898200",
    "end": "2903720"
  },
  {
    "text": "then it will switch back to synchronous mode a drb can also be configured in",
    "start": "2903720",
    "end": "2909400"
  },
  {
    "text": "asynchronous mode so if you think that you can live with data loss and you are more concerned about getting a quick",
    "start": "2909400",
    "end": "2916119"
  },
  {
    "text": "reply to the application drbd can also be configured to run in asynchronous mode but this kind of defeats the",
    "start": "2916119",
    "end": "2922040"
  },
  {
    "text": "purpose and yes for drbd you definitely want to use INB tables and not my Isam",
    "start": "2922040",
    "end": "2929319"
  },
  {
    "text": "tables because INB is simply much more um re uh robust against corruption and",
    "start": "2929319",
    "end": "2938160"
  },
  {
    "text": "yeah since we're replicating blocks again you never know in what state the file system or the my Isam tables are on",
    "start": "2938160",
    "end": "2944680"
  },
  {
    "text": "disc in case you have to fill over my Isam takes just too long to get back in a consistent State the mycle system",
    "start": "2944680",
    "end": "2950640"
  },
  {
    "text": "tables yes they are they are in my Ison by default that's true the fortunate thing about the system tables is that",
    "start": "2950640",
    "end": "2956880"
  },
  {
    "text": "they usually don't change that much so the risk that you have a crash in the moment where you create a ground for a",
    "start": "2956880",
    "end": "2964000"
  },
  {
    "text": "new user or something like that is relatively low these tables aren't that hot like the",
    "start": "2964000",
    "end": "2969960"
  },
  {
    "text": "rest of your data so the chances are pretty high that they will be recovered just fine yes you can definitely compare",
    "start": "2969960",
    "end": "2976440"
  },
  {
    "text": "to this so since the RBD is synchronous and creates a onetoone copy of a data",
    "start": "2976440",
    "end": "2982079"
  },
  {
    "text": "it's basically similar to having a San or some other shared storage that you use because you have just one my school",
    "start": "2982079",
    "end": "2988839"
  },
  {
    "text": "server accessing the data at the same time and then you flip over and in fact speaking of that let me continue this",
    "start": "2988839",
    "end": "2996680"
  },
  {
    "text": "this is how you would use MySQL using a shared storage system like a s or something like that so in this case we",
    "start": "2996680",
    "end": "3002520"
  },
  {
    "text": "have three PCS or servers and this one just runs the myc server again the",
    "start": "3002520",
    "end": "3009319"
  },
  {
    "text": "client just talks with this one using a virtual IP address and the data is then stored on the central storage system",
    "start": "3009319",
    "end": "3016799"
  },
  {
    "text": "using fiber channel what have not or Amazon whatever",
    "start": "3016799",
    "end": "3022160"
  },
  {
    "text": "is available in case this one fails you start my Square on the second note and",
    "start": "3022160",
    "end": "3028559"
  },
  {
    "text": "it will then Mount the file system and access the tables on that shared storage",
    "start": "3028559",
    "end": "3034119"
  },
  {
    "text": "system that's another option either you have two dis in both machines using the",
    "start": "3034119",
    "end": "3039680"
  },
  {
    "text": "RBD to keep make sure they are in sync or you have a Central Storage but this",
    "start": "3039680",
    "end": "3044720"
  },
  {
    "text": "Central piece of storage May then be another single point of failure you have to consider in your um",
    "start": "3044720",
    "end": "3052400"
  },
  {
    "text": "analysis and I have a bit more of a comparison and a few aspects here so",
    "start": "3052839",
    "end": "3059359"
  },
  {
    "start": "3053000",
    "end": "3186000"
  },
  {
    "text": "data consistency and integrity especially with a a shared storage or drbd since it's synchronously replicated",
    "start": "3059359",
    "end": "3066559"
  },
  {
    "text": "or it's it's just stored one time anyway if your data is corrupted because of the failure there's it will be corrupted",
    "start": "3066559",
    "end": "3074079"
  },
  {
    "text": "regardless where you fail over to the the second instant starts up and tries to access the data if it's garbage it's",
    "start": "3074079",
    "end": "3081000"
  },
  {
    "text": "garbage in your screw um so myc application in that case",
    "start": "3081000",
    "end": "3086319"
  },
  {
    "text": "my have an edge because the data is really being duplicated to a second",
    "start": "3086319",
    "end": "3091839"
  },
  {
    "text": "system and a corruption or on on the file system level can't easily propagate",
    "start": "3091839",
    "end": "3096880"
  },
  {
    "text": "to the nextbox the sign can become the spuff cold caches are really nasty thing um in",
    "start": "3096880",
    "end": "3104079"
  },
  {
    "text": "any case where you have to start mycol from scratch and mount the tables means",
    "start": "3104079",
    "end": "3109480"
  },
  {
    "text": "that well the the caches are cold you have just started the my school server",
    "start": "3109480",
    "end": "3115160"
  },
  {
    "text": "so you will have to live with uh in a certain amount of time where the performance isn't optimal",
    "start": "3115160",
    "end": "3121480"
  },
  {
    "text": "yet that's probably hard to avoid um with",
    "start": "3121480",
    "end": "3126720"
  },
  {
    "text": "myc replication the caches are already in a somewhat warm State simply by the",
    "start": "3126720",
    "end": "3131760"
  },
  {
    "text": "fact that the replication is going on and there are tools um there's a script included in mkit that you can use to run",
    "start": "3131760",
    "end": "3140880"
  },
  {
    "text": "queries based on the data that is being replicated that make sure that even more information is stored in the caches",
    "start": "3140880",
    "end": "3147440"
  },
  {
    "text": "which make a a failover a bit more faster yes using INB was already said",
    "start": "3147440",
    "end": "3154480"
  },
  {
    "text": "let me see split brain yeah split brain can usually just happen in this setup if",
    "start": "3154480",
    "end": "3160359"
  },
  {
    "text": "you by accident start two my school instances accessing the same data you are host MySQL isn't designed for that",
    "start": "3160359",
    "end": "3169160"
  },
  {
    "text": "um even though some people say yeah but they can put my Isam in read only mode",
    "start": "3169160",
    "end": "3174200"
  },
  {
    "text": "yeah you might but is this a classical scenario probably not and we don't really have any protection",
    "start": "3174200",
    "end": "3181480"
  },
  {
    "text": "against this so make sure it doesn't happen Okay myo cluster is the next one",
    "start": "3181480",
    "end": "3189720"
  },
  {
    "start": "3186000",
    "end": "3538000"
  },
  {
    "text": "in my list who of you has heard of myo",
    "start": "3189720",
    "end": "3196799"
  },
  {
    "text": "cluster using it h a few hands excellent good so my",
    "start": "3196799",
    "end": "3205799"
  },
  {
    "text": "sco cluster is a very interesting Beast even though it's called MCO cluster it's",
    "start": "3205799",
    "end": "3211440"
  },
  {
    "text": "basically uh independent from the MCO server and can actually be used independently as well so I have my myol",
    "start": "3211440",
    "end": "3219319"
  },
  {
    "text": "D process running on one box um and then here this is my cluster in this case I",
    "start": "3219319",
    "end": "3224640"
  },
  {
    "text": "have four machines the MCO server talks to a MCO",
    "start": "3224640",
    "end": "3229760"
  },
  {
    "text": "cluster as if it is a storage engine so instead of storing the data locally like in my ISM or INB any table that I create",
    "start": "3229760",
    "end": "3238200"
  },
  {
    "text": "is being created over the network in a cluster of machines which are these four down here for example I can also use two",
    "start": "3238200",
    "end": "3245280"
  },
  {
    "text": "or eight or what have not and these guys here take care of um Distributing and",
    "start": "3245280",
    "end": "3251200"
  },
  {
    "text": "replicating the data in a fashion that makes sure that failure can be tolerated and the myle server doesn't",
    "start": "3251200",
    "end": "3258200"
  },
  {
    "text": "really know about this it just talks as if it was a regular storage engine my application isn't aware of it because it",
    "start": "3258200",
    "end": "3264680"
  },
  {
    "text": "just talks to regular mycol server so in this case insert update delete go",
    "start": "3264680",
    "end": "3270119"
  },
  {
    "text": "to myc client server protocol and then the server puts the",
    "start": "3270119",
    "end": "3275960"
  },
  {
    "text": "data into the cluster notes and they will then take care of the communication and",
    "start": "3275960",
    "end": "3282079"
  },
  {
    "text": "the distribution of of the data for me I can also take a second MyQ server",
    "start": "3282079",
    "end": "3287880"
  },
  {
    "text": "and connect it to the same cluster and an update insert delete that I make on this site is automatically",
    "start": "3287880",
    "end": "3295640"
  },
  {
    "text": "visible on the other side as well so since the data nodes in the mycol",
    "start": "3295640",
    "end": "3300680"
  },
  {
    "text": "cluster replicate um information synchronously changes are automatically",
    "start": "3300680",
    "end": "3306160"
  },
  {
    "text": "visible on both sides of of of the mycol servers and you can have more than two mycol server",
    "start": "3306160",
    "end": "3313079"
  },
  {
    "text": "instances so this is pretty nifty because it allows you if that one crashes I would simply talk to the other",
    "start": "3313079",
    "end": "3319720"
  },
  {
    "text": "my school server it's still available if that one goes down I don't even notice because the data is replicated to the",
    "start": "3319720",
    "end": "3326319"
  },
  {
    "text": "the other notes and they take care of serving the missing pieces from another note of course well the administrator",
    "start": "3326319",
    "end": "3333559"
  },
  {
    "text": "gets notified that the cluster is running in degraded motor and needs to take action but this all happens",
    "start": "3333559",
    "end": "3340000"
  },
  {
    "text": "automatically without any interaction this is part of the building cluster how would the monitor know which database to",
    "start": "3340000",
    "end": "3346839"
  },
  {
    "text": "use okay up here right again this is something that you would have to do or",
    "start": "3346839",
    "end": "3353680"
  },
  {
    "text": "have to script with something like pacemaker or balance or something like that so informing the client application",
    "start": "3353680",
    "end": "3360720"
  },
  {
    "text": "that needs to talk to another my server follows the same approach that I've introduced already um my school cluster",
    "start": "3360720",
    "end": "3367880"
  },
  {
    "text": "just takes care of the redundancy part down here how would you assess the",
    "start": "3367880",
    "end": "3373680"
  },
  {
    "text": "availability um we claim that my school cluster gives you five NS",
    "start": "3373680",
    "end": "3380240"
  },
  {
    "text": "um for notes is a very common setup um depends of course on the quality of your",
    "start": "3380359",
    "end": "3388160"
  },
  {
    "text": "Hardware but it's it's a very robust system M cluster comes from the telecommunication industry um back when",
    "start": "3388160",
    "end": "3397000"
  },
  {
    "text": "my girl was still uh an independent company we acquired another company named alato they were a spin-off from",
    "start": "3397000",
    "end": "3404480"
  },
  {
    "text": "Ericson at Big telecommunications company in in Sweden I think and and",
    "start": "3404480",
    "end": "3409920"
  },
  {
    "text": "they created this thing called NDB the network database as an as a product aimed for the telecommunication industry",
    "start": "3409920",
    "end": "3417319"
  },
  {
    "text": "Ericson uses NDB in their um I don't know how you call this the the the call",
    "start": "3417319",
    "end": "3425160"
  },
  {
    "text": "register I think it's called so parts of the mobile phone network that take care",
    "start": "3425160",
    "end": "3430240"
  },
  {
    "text": "that mobile phones are being registered that CS are being distributed and that everything is being built appropriately",
    "start": "3430240",
    "end": "3437240"
  },
  {
    "text": "so you have lots of high concurrency very short running transactions with",
    "start": "3437240",
    "end": "3443000"
  },
  {
    "text": "high volume this is where Myco cluster or NDB really shines and well we acquired the company and",
    "start": "3443000",
    "end": "3449000"
  },
  {
    "text": "then we we realized that it's very easy to make this into a storage engine but you don't have to talk the myo client",
    "start": "3449000",
    "end": "3455319"
  },
  {
    "text": "server protocol actually I'm going to show this in another slide these are",
    "start": "3455319",
    "end": "3460559"
  },
  {
    "text": "commodity of the Shelf Linux boxes yes so you don't really need any special Hardware to set up a cluster in fact for",
    "start": "3460559",
    "end": "3468280"
  },
  {
    "text": "for testing purposes it's quite appropriate to Simply start all these processes on one single Linux box they",
    "start": "3468280",
    "end": "3474839"
  },
  {
    "text": "don't really have to be on dedicated machines if you just want to toy around with it but then you don't have the redundancy that you probably want to",
    "start": "3474839",
    "end": "3481599"
  },
  {
    "text": "achieve good point um in the early days myo cluster was an inmemory database so",
    "start": "3481599",
    "end": "3487480"
  },
  {
    "text": "your entire tables had to fit in the memory in the total memory of the of the storage notes and this is a limitation",
    "start": "3487480",
    "end": "3494799"
  },
  {
    "text": "that has been lifted in the meanwhile so the latest versions of myo cluster can make use of local dis drives to store",
    "start": "3494799",
    "end": "3502079"
  },
  {
    "text": "data but the indexes that are needed still have to fit in memory this is",
    "start": "3502079",
    "end": "3508520"
  },
  {
    "text": "simply a requirement in order to be able to um provide the the low latency and fast response time the cluster gives you",
    "start": "3508520",
    "end": "3516000"
  },
  {
    "text": "how does the client pick the note of the cluster to talk to um it just talks with",
    "start": "3516000",
    "end": "3521520"
  },
  {
    "text": "one and then they internally make sure that you get the information so if this",
    "start": "3521520",
    "end": "3527240"
  },
  {
    "text": "one talks with that one it knows who else to ask to retrieve the information so this is transparent the NDB API that",
    "start": "3527240",
    "end": "3535440"
  },
  {
    "text": "is being used in the background takes care of this a few more keywords here so data is",
    "start": "3535440",
    "end": "3542039"
  },
  {
    "start": "3538000",
    "end": "3599000"
  },
  {
    "text": "automatically being partitioned among the notes so you also have load balancing um the fragments are",
    "start": "3542039",
    "end": "3549000"
  },
  {
    "text": "distributed so you have multiple copies of the data um fail over happens automatically",
    "start": "3549000",
    "end": "3556119"
  },
  {
    "text": "in a subsec mode so you don't really realize that a note has failed if you wouldn't get the notification by the",
    "start": "3556119",
    "end": "3563280"
  },
  {
    "text": "logging and they can also automatically re so if a note has failed due to Heart of a failure you replace the machine you",
    "start": "3563280",
    "end": "3570400"
  },
  {
    "text": "start this note up again and it will register back into the cluster retrieve the data and will continue working",
    "start": "3570400",
    "end": "3576440"
  },
  {
    "text": "without you doing anything it's transparent as I already said to the application it supports",
    "start": "3576440",
    "end": "3583960"
  },
  {
    "text": "transactions and I have some more info we should continue in memory indexes I already",
    "start": "3583960",
    "end": "3589920"
  },
  {
    "text": "mentioned big bummer um my scho cluster is not suitable for any application so",
    "start": "3589920",
    "end": "3595799"
  },
  {
    "text": "if you you think you can make druple highly available using mycore cluster think again um due to its nature there",
    "start": "3595799",
    "end": "3604240"
  },
  {
    "text": "are certain workloads and query patterns where Myco cluster doesn't perform very well especially anything that has to",
    "start": "3604240",
    "end": "3611520"
  },
  {
    "text": "join multiple tables together or if you have to make range scans where you need the data from every single line of your",
    "start": "3611520",
    "end": "3618559"
  },
  {
    "text": "table because this requires a lot of communication between the notes in the",
    "start": "3618559",
    "end": "3623960"
  },
  {
    "text": "cluster and that simply takes long yes it handles writes very well in fact much",
    "start": "3623960",
    "end": "3629640"
  },
  {
    "text": "better than read queries so if you need to pipe a lot of data into it just use",
    "start": "3629640",
    "end": "3636400"
  },
  {
    "text": "several myc servers and you all the inserts deletes into the cluster using multiple",
    "start": "3636400",
    "end": "3643039"
  },
  {
    "text": "noes so that is possible and in fact I have a slide that I'm wanted to show you here if my clicker would",
    "start": "3643039",
    "end": "3650799"
  },
  {
    "text": "work so I think anything else has been said Network lat latency is crucial",
    "start": "3650799",
    "end": "3656559"
  },
  {
    "text": "you can combine it with replication to set up a replicated cluster in another data center if you need it doesn't",
    "start": "3656559",
    "end": "3663079"
  },
  {
    "text": "support foreign Keys might be a gotcha here's a more elaborate picture",
    "start": "3663079",
    "end": "3670079"
  },
  {
    "text": "again here these are the storage notes that you have and this is really what my cluster is all about then you have a",
    "start": "3670079",
    "end": "3676440"
  },
  {
    "text": "small so-called management note which takes care of configuring the cluster but only at startup time once the data",
    "start": "3676440",
    "end": "3684480"
  },
  {
    "text": "notes have booted up so to say and they know their peers you can even shut this",
    "start": "3684480",
    "end": "3689839"
  },
  {
    "text": "thing down this is a very small process that you can even install on one of the mcod servers on top of that so here in",
    "start": "3689839",
    "end": "3695760"
  },
  {
    "text": "this example we are using three mycod servers to talk to the cluster something that's missing from this picture you",
    "start": "3695760",
    "end": "3702160"
  },
  {
    "text": "don't need MySQL for this this cluster is fully autonomous and you can use its own API to talk with cluster directly so",
    "start": "3702160",
    "end": "3710359"
  },
  {
    "text": "in a way my school cluster is yet another nosql key value store with high availability that you can use and we",
    "start": "3710359",
    "end": "3717680"
  },
  {
    "text": "have uh I think a Java API and a python API that you can use in your application",
    "start": "3717680",
    "end": "3724119"
  },
  {
    "text": "to store and retrieve data from my scho cluster without even using SQL if you want to the question is if if it's",
    "start": "3724119",
    "end": "3730720"
  },
  {
    "text": "usually the case that you use a load balancer to distribute load and sure you could either configure the application",
    "start": "3730720",
    "end": "3737079"
  },
  {
    "text": "to be aware that there are multiple myc servers you use a load balancer to distribute the load everything's",
    "start": "3737079",
    "end": "3742839"
  },
  {
    "text": "possible are done here no um the mycot servers here speak the",
    "start": "3742839",
    "end": "3748720"
  },
  {
    "text": "so-called NDB API so they too query the management server for the IP addresses",
    "start": "3748720",
    "end": "3754520"
  },
  {
    "text": "of all the data notes that are available and then it depends on the data that you want to get which of the notes they are",
    "start": "3754520",
    "end": "3761720"
  },
  {
    "text": "contacting so you don't care about this it's done automatically do the MyCare",
    "start": "3761720",
    "end": "3767039"
  },
  {
    "text": "server instances have a query cache sure you can use the query cache is it useful",
    "start": "3767039",
    "end": "3772440"
  },
  {
    "text": "yes it might actually it can be combined with the query crash if needed and especially since um joints and certain",
    "start": "3772440",
    "end": "3780400"
  },
  {
    "text": "queries don't perform that well the query crash might actually be beneficial here so the question was if is it",
    "start": "3780400",
    "end": "3786720"
  },
  {
    "text": "possible to use Myco cluster as one big Myco Master server for replication and",
    "start": "3786720",
    "end": "3792480"
  },
  {
    "text": "that's exactly the case that I wanted to show you here so cluster comes to paralyzing inserts",
    "start": "3792480",
    "end": "3800039"
  },
  {
    "text": "particularly so um a colleague of mine came up with the idea hey how can this be combined with replication and making",
    "start": "3800039",
    "end": "3807839"
  },
  {
    "text": "use of other storage engines to distribute the read load and this is the picture that he came up",
    "start": "3807839",
    "end": "3813400"
  },
  {
    "text": "with so your application needs to be aware that reads and writes need to be split",
    "start": "3813400",
    "end": "3819520"
  },
  {
    "text": "you can use for example myo proxy or load balancer that is myc aware for this",
    "start": "3819520",
    "end": "3824960"
  },
  {
    "text": "so any inserts go into this direction you have two myod",
    "start": "3824960",
    "end": "3832240"
  },
  {
    "text": "servers and they use mycco cluster to store the data and have synchronous",
    "start": "3832240",
    "end": "3837559"
  },
  {
    "text": "replication and then you set up a regular asynchronous mycol replication stream that replicates to one or more",
    "start": "3837559",
    "end": "3844680"
  },
  {
    "text": "myc servers that use regular storage engines so up here the data is high highly",
    "start": "3844680",
    "end": "3850319"
  },
  {
    "text": "available start in my school cluster and it's then being replicated into normal",
    "start": "3850319",
    "end": "3856079"
  },
  {
    "text": "my ISM or indb tables and you can then run your queries that are more complex on this side of",
    "start": "3856079",
    "end": "3863200"
  },
  {
    "text": "the story so you have the The Best of Both Worlds and that's a setup that has already been",
    "start": "3863200",
    "end": "3869799"
  },
  {
    "text": "um set up in production with some of our users all right another interesting approach to replication comes from a",
    "start": "3869799",
    "end": "3876119"
  },
  {
    "text": "company named koders ship based in Finland I guess somewhere in Scandinavia",
    "start": "3876119",
    "end": "3881240"
  },
  {
    "text": "and they basically patched INB to create a synchronous replication mechanism",
    "start": "3881240",
    "end": "3887559"
  },
  {
    "text": "inside of INB and it can be used to provide both",
    "start": "3887559",
    "end": "3892680"
  },
  {
    "text": "High availability since the replication is synchronous on multiple M code",
    "start": "3892680",
    "end": "3897760"
  },
  {
    "text": "servers as well as um high performance since you can distribute the load",
    "start": "3897760",
    "end": "3903240"
  },
  {
    "text": "between those machines and they are not using the classical schema of using two-phase commit protocol to make sure",
    "start": "3903240",
    "end": "3910119"
  },
  {
    "text": "that the data is synchronized um they call it certificate based replication their white paper is",
    "start": "3910119",
    "end": "3916440"
  },
  {
    "text": "highly technical I admit that I haven't understood it but it seems to work quite",
    "start": "3916440",
    "end": "3921640"
  },
  {
    "text": "impressively well so Galera is something to keep a close eye on they are very actively behind this",
    "start": "3921640",
    "end": "3928880"
  },
  {
    "text": "thing mmm if you don't want to set up pacemaker you just have a my school",
    "start": "3928880",
    "end": "3935119"
  },
  {
    "text": "setup that you want to make highly available the my school master master replication manager is the tool to take",
    "start": "3935119",
    "end": "3941680"
  },
  {
    "text": "a look at it's a pearl script with a very active community that takes care of",
    "start": "3941680",
    "end": "3946720"
  },
  {
    "text": "nothing than making sure that MySQL servers are in a replication",
    "start": "3946720",
    "end": "3952440"
  },
  {
    "text": "configuration are being made highly available by moving a virtual IP address and making sure that the Master Slave",
    "start": "3952440",
    "end": "3958520"
  },
  {
    "text": "relationships are set up properly so this is the the smaller",
    "start": "3958520",
    "end": "3965279"
  },
  {
    "text": "version very dedicated and specialized to mySQL pacemaker really is the big gun",
    "start": "3965279",
    "end": "3970559"
  },
  {
    "text": "that can do much more things and it can also support read balancing which is kind of nice so if",
    "start": "3970559",
    "end": "3978440"
  },
  {
    "text": "your application is capable to um send read load to at a different",
    "start": "3978440",
    "end": "3984119"
  },
  {
    "text": "IP address m M provides a floating IP address that can move between replication slaves based on which of",
    "start": "3984119",
    "end": "3991079"
  },
  {
    "text": "these slaves is up to date if one of the slaves is lagging behind the IP address will move to another slave that is fully",
    "start": "3991079",
    "end": "3997319"
  },
  {
    "text": "up to date which is kind of neat what happens if every slave has a big lag I guess you can either configure mmm to",
    "start": "3997319",
    "end": "4004079"
  },
  {
    "text": "give up in this case or it picks the one with the lowest lag that would be my wild guess but I have to admit to the",
    "start": "4004079",
    "end": "4011160"
  },
  {
    "text": "master or it should go back to the master yeah good point if the master is still there the virtual IP address would",
    "start": "4011160",
    "end": "4016880"
  },
  {
    "text": "move to the master yes how well does mmm handle split brain um it has",
    "start": "4016880",
    "end": "4022559"
  },
  {
    "text": "functionality that makes use of an arbitrator so I would guess that they",
    "start": "4022559",
    "end": "4027599"
  },
  {
    "text": "have considered this case and should handle it gracefully cool stuff I've seen webinars",
    "start": "4027599",
    "end": "4032880"
  },
  {
    "text": "of this um it does a lot of the things that my replication currently isn't capable",
    "start": "4032880",
    "end": "4038319"
  },
  {
    "text": "of uh there are more redhead cluster Suite is an application that does stuff",
    "start": "4038319",
    "end": "4043880"
  },
  {
    "text": "pretty similar to what pacemaker does but with the blessing and support from redhead if you happen to use the",
    "start": "4043880",
    "end": "4049200"
  },
  {
    "text": "Enterprise Linux Edition um enough said other operating systems have",
    "start": "4049200",
    "end": "4055720"
  },
  {
    "text": "similar functionality Solaris has um open ha cluster which is the open source",
    "start": "4055720",
    "end": "4061000"
  },
  {
    "text": "version of Solaris cluster um this is really the big big gun while Solaris Enterprise Unix",
    "start": "4061000",
    "end": "4067760"
  },
  {
    "text": "operating system this thing is quite impressive and they have a special MyQ",
    "start": "4067760",
    "end": "4074240"
  },
  {
    "text": "plugin that you can use so if you have Solaris in your data centers this is the way to go and well not really an ha",
    "start": "4074240",
    "end": "4083079"
  },
  {
    "text": "solution but kind of nifty flipper is a little p script that allows you to switch master and slave by moving",
    "start": "4083079",
    "end": "4089839"
  },
  {
    "text": "virtual IP addresses manually on the command line if without having to configure the my CNF file manually and",
    "start": "4089839",
    "end": "4097600"
  },
  {
    "text": "making the changes flipper does this for you in case you have no need for",
    "start": "4097600",
    "end": "4102920"
  },
  {
    "text": "automatic High availability but you just want to be able to switch between one myc server to another one for",
    "start": "4102920",
    "end": "4108318"
  },
  {
    "text": "maintenance purposes as an administrator so kind of neat and with that I'm",
    "start": "4108319",
    "end": "4113480"
  },
  {
    "text": "finally through more questions comments feedback okay the best way to test",
    "start": "4113480",
    "end": "4119278"
  },
  {
    "text": "failover of MySQL what is the best way to test fail over of my well at first you would have",
    "start": "4119279",
    "end": "4125719"
  },
  {
    "text": "to set up um an ha system like mmm to get started and the best way well Kil me",
    "start": "4125719",
    "end": "4134359"
  },
  {
    "text": "minus 9 would be option really to shoot the process with kill minus 9 UM take the IP address offline take",
    "start": "4134359",
    "end": "4141520"
  },
  {
    "text": "the IP address offline pull the cable insert random data into the table",
    "start": "4141520",
    "end": "4148000"
  },
  {
    "text": "files change the routing tables also a good idea there are various ways on how to to trigger it but for a basic test",
    "start": "4148000",
    "end": "4155600"
  },
  {
    "text": "just kill the process and see what happens and use the manual system most",
    "start": "4155600",
    "end": "4160640"
  },
  {
    "text": "of these fade over systems usually have a manual trigger that you can use if that one works as a first step then you",
    "start": "4160640",
    "end": "4166679"
  },
  {
    "text": "can start playing with killing stuff and destroying things any more questions",
    "start": "4166679",
    "end": "4172560"
  },
  {
    "text": "otherwise going once going twice thank you very [Applause]",
    "start": "4172560",
    "end": "4183068"
  },
  {
    "text": "[Music]",
    "start": "4183069",
    "end": "4191979"
  },
  {
    "text": "much",
    "start": "4194320",
    "end": "4197320"
  },
  {
    "text": "oh",
    "start": "4200000",
    "end": "4203000"
  }
]