[
  {
    "text": "the electric grid is the largest and most complex machine ever built it's an amazing feat of Engineering providing",
    "start": "3950",
    "end": "10160"
  },
  {
    "text": "reliable safe and on-demand power this grid is built on 20th century technology",
    "start": "10160",
    "end": "15260"
  },
  {
    "text": "with large centralized generation mostly fossil fuel-based and only a few points of control we now face an urgent",
    "start": "15260",
    "end": "22100"
  },
  {
    "text": "challenge to transition off of fossil fuels in order to prevent the worst effects of climate change",
    "start": "22100",
    "end": "27820"
  },
  {
    "text": "fortunately we also now have new tools clean power generation like wind solar and hydro are cheap and getting cheaper",
    "start": "28480",
    "end": "35000"
  },
  {
    "text": "but this hardware is not on its own enough to replace fossil fuels while maintaining our current standard of",
    "start": "35000",
    "end": "40430"
  },
  {
    "text": "on-demand and reliable power software is really the key to enabling these diverse",
    "start": "40430",
    "end": "46339"
  },
  {
    "text": "components to act in concert and one of the things we can do is bring together",
    "start": "46339",
    "end": "51680"
  },
  {
    "text": "thousands of small batteries in people's homes to create virtual power plants providing value to both the electrical",
    "start": "51680",
    "end": "58220"
  },
  {
    "text": "grid as well as to the home or business owner this marries some of the most interesting and challenging problems in",
    "start": "58220",
    "end": "63470"
  },
  {
    "text": "distributed computing with some of the most important and challenging problems in distributed renewable energy and this",
    "start": "63470",
    "end": "70700"
  },
  {
    "text": "is why we work at Tesla we get to work on these exciting challenge software challenges while also accelerating the",
    "start": "70700",
    "end": "76430"
  },
  {
    "text": "world's transition to renewable energy we're going to take you through the evolution of the tesla virtual power",
    "start": "76430",
    "end": "81439"
  },
  {
    "text": "plant and share architectures patterns and practices for distributed computing and IOT that have helped us tackle these",
    "start": "81439",
    "end": "89060"
  },
  {
    "text": "complex and exciting challenges I'm Percy I'm a software engineer and",
    "start": "89060",
    "end": "94460"
  },
  {
    "text": "technical lead on the team that builds Tesla's energy optimization and market participation platform and I'm Colin I'm",
    "start": "94460",
    "end": "100189"
  },
  {
    "text": "a software engineer and I lead the teams that build and operate the cloud IOT platforms for Tesla energy products and",
    "start": "100189",
    "end": "106399"
  },
  {
    "text": "just a disclaimer before we start we do not speak on behalf of Tesla we are just representing our personal experiences",
    "start": "106399",
    "end": "114399"
  },
  {
    "text": "so before we dig into the software let's cover some background on how the grid",
    "start": "116820",
    "end": "122049"
  },
  {
    "text": "works and on the role that batteries play in it so that you're set up to appreciate the software problems the",
    "start": "122049",
    "end": "128050"
  },
  {
    "text": "tricky thing about the power grid is that supply and demand have to match in real time or else frequency and voltage",
    "start": "128050",
    "end": "133360"
  },
  {
    "text": "can deviate and this can damage devices and lead to blackouts the grid itself has no ability to store power so the",
    "start": "133360",
    "end": "140350"
  },
  {
    "text": "incoming power supply and outgoing power consumption need to be controlled in a way maybe wet in a way that maintains the balance with old-style centralized",
    "start": "140350",
    "end": "148870"
  },
  {
    "text": "fossil fuel generation supply could be turned up and down according to demand and they were a relatively small number",
    "start": "148870",
    "end": "154090"
  },
  {
    "text": "of plants to control and this made it relatively straightforward to maintain the balance as more renewable generation",
    "start": "154090",
    "end": "160450"
  },
  {
    "text": "comes onto the grid a few things happen first reduced control generation can't be as easily turned up to follow demand",
    "start": "160450",
    "end": "166959"
  },
  {
    "text": "and we don't want to turn generation down or else we're losing some of our clean energy a second uncertainty and",
    "start": "166959",
    "end": "173140"
  },
  {
    "text": "rapid change generation can't be forecast precisely and it can change quickly and third distribution there are",
    "start": "173140",
    "end": "179709"
  },
  {
    "text": "many small generators behaving independently so in a grid with large amounts of wind and solar generation the",
    "start": "179709",
    "end": "187150"
  },
  {
    "text": "supply might look something like this with variability and supply and with times of high supply not aligned with",
    "start": "187150",
    "end": "192400"
  },
  {
    "text": "times of high demand and this can result in power surpluses and deficits that are larger than previously and that can",
    "start": "192400",
    "end": "198579"
  },
  {
    "text": "change fairly rapidly batteries can charge during the surpluses and discharged during the deficits and they",
    "start": "198579",
    "end": "204910"
  },
  {
    "text": "can respond very quickly to offset any rapid swings and imbalance and this rapid response is actually even an",
    "start": "204910",
    "end": "210519"
  },
  {
    "text": "innovation an opportunity to be better than the old grid it's not just a compromise and so to fulfill this role",
    "start": "210519",
    "end": "216640"
  },
  {
    "text": "we could just install giant batteries batteries the size of a typical coal or natural gas power plant and they can and",
    "start": "216640",
    "end": "222340"
  },
  {
    "text": "do play an important part of the equation but we can also take advantage of smaller batteries already installed",
    "start": "222340",
    "end": "228130"
  },
  {
    "text": "in individual homes that are already providing local value like backup power or helping the owner consume more of",
    "start": "228130",
    "end": "234010"
  },
  {
    "text": "their own solar generation we can aggregate homes and businesses with these smaller batteries and solar into",
    "start": "234010",
    "end": "240549"
  },
  {
    "text": "virtual power plants so in this presentation we'll walk you through the evolution of the Tesla energy platform",
    "start": "240549",
    "end": "246970"
  },
  {
    "text": "for powerplants and it's broken into four sections with each stage laying the foundation for the next we'll start with",
    "start": "246970",
    "end": "253670"
  },
  {
    "text": "the development of the Tesla energy platform then we'll describe how we learn to participate in energy markets",
    "start": "253670",
    "end": "258890"
  },
  {
    "text": "and how we learn to build software to do this algorithmically using a single battery the largest battery in the world",
    "start": "258890",
    "end": "265180"
  },
  {
    "text": "then we'll talk about our first virtual power plant where we learn to aggregate and directly control thousands of",
    "start": "265180",
    "end": "270680"
  },
  {
    "text": "batteries in near-real-time in people's homes and finally we'll talk about how we combined all of these experience",
    "start": "270680",
    "end": "276890"
  },
  {
    "text": "platforms and experiences to aggregate optimize and control thousands of batteries for energy market participation so let's begin with the",
    "start": "276890",
    "end": "288170"
  },
  {
    "text": "architecture of the Tesla energy platform this platform was this platform",
    "start": "288170",
    "end": "294440"
  },
  {
    "text": "was built for both residential and industrial customers so for residential customers the platform supports products",
    "start": "294440",
    "end": "300230"
  },
  {
    "text": "like the power wall home battery which can provide backup power for a house for hours or days in the event of a power",
    "start": "300230",
    "end": "306890"
  },
  {
    "text": "outage solar roof which produces power from beautiful roofing tiles and",
    "start": "306890",
    "end": "312820"
  },
  {
    "text": "retrofits Solar and the solar products can be paired with power wall to provide not only backup power but also maximize",
    "start": "312820",
    "end": "319310"
  },
  {
    "text": "solar energy production and we use software to deliver an integrated product experience across solar",
    "start": "319310",
    "end": "325340"
  },
  {
    "text": "generation energy storage backup power transportation and vehicle charging as",
    "start": "325340",
    "end": "332000"
  },
  {
    "text": "well as create unique products like storm watch where we will charge your power wall to full when alerted to an",
    "start": "332000",
    "end": "337760"
  },
  {
    "text": "approaching storm so that you have full backup power if the power goes out part of the customer experience is viewing",
    "start": "337760",
    "end": "344300"
  },
  {
    "text": "the real-time performance of the system in the mobile app and customers can control some behaviors such as",
    "start": "344300",
    "end": "349940"
  },
  {
    "text": "prioritizing charging during low cost times for industrial customers the",
    "start": "349940",
    "end": "355460"
  },
  {
    "text": "software platform supports products like power pack and mega pack for large state large scale energy storage as well as",
    "start": "355460",
    "end": "362840"
  },
  {
    "text": "industrial scale solar software platforms like power hub allow customers",
    "start": "362840",
    "end": "368540"
  },
  {
    "text": "to monitor the performance of their systems in real time or inspect historical performance over days weeks",
    "start": "368540",
    "end": "375320"
  },
  {
    "text": "or even years now these products for solar generation energy storage",
    "start": "375320",
    "end": "380410"
  },
  {
    "text": "transportation and charging all have an edge computing platform and zooming in on that edge",
    "start": "380410",
    "end": "386779"
  },
  {
    "text": "computing platform for energy it's used to interface with a diverse set of sensors and controllers things like",
    "start": "386779",
    "end": "392989"
  },
  {
    "text": "inverters bus controllers and power stages and it runs a full Linux operating system and provides local data",
    "start": "392989",
    "end": "399949"
  },
  {
    "text": "storage computation and control while also meaning maintaining bi-directional",
    "start": "399949",
    "end": "405349"
  },
  {
    "text": "streaming communication with the cloud over WebSocket so that it can regularly send measurements to the cloud for some",
    "start": "405349",
    "end": "412309"
  },
  {
    "text": "applications as frequently as once a second and it can also be commanded on-demand from the cloud",
    "start": "412309",
    "end": "417829"
  },
  {
    "text": "now what mentioned a few things throughout the presentation about this edge computing platform but our main focus is going to be on that cloud iot",
    "start": "417829",
    "end": "424489"
  },
  {
    "text": "platform and the foundation of this platform is this linearly scalable WebSocket front-end that handles",
    "start": "424489",
    "end": "430639"
  },
  {
    "text": "connectivity as well as security it has a kafka cluster behind it for ingesting",
    "start": "430639",
    "end": "436759"
  },
  {
    "text": "large volumes of telemetry from millions of IOT devices and this provides messaging durability decouples",
    "start": "436759",
    "end": "443179"
  },
  {
    "text": "publishers of data from consumers of data and it allows for sharing this telemetry across many downstream",
    "start": "443179",
    "end": "449479"
  },
  {
    "text": "services the platform also has a service for published subscribed messaging enabling bi-directional command and",
    "start": "449479",
    "end": "456559"
  },
  {
    "text": "control of IOT devices and these three services together are offered as a shared infrastructure throughout Tesla",
    "start": "456559",
    "end": "463219"
  },
  {
    "text": "on which we build higher order services on the other side of the equation are these customer facing applications",
    "start": "463219",
    "end": "469329"
  },
  {
    "text": "supporting the products that I just highlighted the AP is for energy products are organized broadly into",
    "start": "469329",
    "end": "475489"
  },
  {
    "text": "three domains the first our API is for querying telemetry alerts and events",
    "start": "475489",
    "end": "480709"
  },
  {
    "text": "from devices or streaming these as they happen second our API is for describing energy",
    "start": "480709",
    "end": "487189"
  },
  {
    "text": "assets and their relationships among these assets and lastly AP is for commanding and controlling energy",
    "start": "487189",
    "end": "492769"
  },
  {
    "text": "devices like batteries now the backing services for these AP is are composed of",
    "start": "492769",
    "end": "498559"
  },
  {
    "text": "approximately 150 polyglot micro services far too many to detail in this presentation I'll just provide a",
    "start": "498559",
    "end": "505249"
  },
  {
    "text": "high-level understanding of the micro services in each domain and we're going to dive a bit deeper into a few of them",
    "start": "505249",
    "end": "511069"
  },
  {
    "text": "later when we look at the virtual power plan and the theme you'll see throughout is the the challenge of handling real-time data",
    "start": "511069",
    "end": "517279"
  },
  {
    "text": "at IOT scale imagine the battery installed in everybody's home so it's to",
    "start": "517279",
    "end": "523969"
  },
  {
    "text": "support efficient queries and roll-ups of telemetry these be queries like what's the power output over the past",
    "start": "523969",
    "end": "530120"
  },
  {
    "text": "day or week we use influx DB which is an open source purpose-built time series",
    "start": "530120",
    "end": "535310"
  },
  {
    "text": "database and it depends on the data stream and the application but generally our goal is to make historical data",
    "start": "535310",
    "end": "541430"
  },
  {
    "text": "available to the customer for the lifetime of the product we maintain a large number of low latency streaming",
    "start": "541430",
    "end": "547700"
  },
  {
    "text": "services for data ingestion and transformation and for some of these Kafka topics the very first thing we do",
    "start": "547700",
    "end": "553130"
  },
  {
    "text": "is create a canonical topic where data are already filtered and refined into very strict data types this is more",
    "start": "553130",
    "end": "559339"
  },
  {
    "text": "efficient because it removes this burden from every downstream service and it also provides consistency across across",
    "start": "559339",
    "end": "565070"
  },
  {
    "text": "the downstream consumers a very unique challenge in this domain is the streaming real-time aggregation of",
    "start": "565070",
    "end": "571399"
  },
  {
    "text": "telemetry from thousands of batteries this is a service that we'll look at in much more detail because it forms one of",
    "start": "571399",
    "end": "576980"
  },
  {
    "text": "the foundations of the virtual power plant now like any company large company",
    "start": "576980",
    "end": "582110"
  },
  {
    "text": "product and customer information comes from many many different business systems and it's really unworkable to",
    "start": "582110",
    "end": "588260"
  },
  {
    "text": "have every micro service connect to every business system many of which are not designed to be internet facing or",
    "start": "588260",
    "end": "594529"
  },
  {
    "text": "IOT scale so the purposes of the service is the asset management services there's",
    "start": "594529",
    "end": "601100"
  },
  {
    "text": "there's four things one is to abstract and unify these many different business systems into one consistent API two is",
    "start": "601100",
    "end": "608060"
  },
  {
    "text": "to provide a consistent source of truth especially when there are conflicting data three it provides a kind of type",
    "start": "608060",
    "end": "615560"
  },
  {
    "text": "system where applications can rely on the same attributes of the same type of device like a battery and fourth",
    "start": "615560",
    "end": "623300"
  },
  {
    "text": "it describes unique relationships among these energy assets like which devices can talk to each other and who can",
    "start": "623300",
    "end": "629329"
  },
  {
    "text": "control them and it relies heavily on a Postgres database to describe these relationships now we used Kafka to",
    "start": "629329",
    "end": "635450"
  },
  {
    "text": "integrate changes as they happen for many of these different business systems where we stream the changes directly",
    "start": "635450",
    "end": "640670"
  },
  {
    "text": "from IOT devices and at scale actually this is a lot more reliable devices are often the most reliable source of truth",
    "start": "640670",
    "end": "647300"
  },
  {
    "text": "self reporting they're configure State and relationships now a digital",
    "start": "647300",
    "end": "653820"
  },
  {
    "text": "twin is the representation of a physical IOT device a battery and inverter a charger in software modeled virtually",
    "start": "653820",
    "end": "662310"
  },
  {
    "text": "and we do a lot of digital twin modeling to represent the current state and relationships of various assets finally",
    "start": "662310",
    "end": "668970"
  },
  {
    "text": "there are services for commanding and controlling IOT devices like telling a battery to discharge at a given power",
    "start": "668970",
    "end": "674760"
  },
  {
    "text": "setpoint for a specific duration and similar to both the telemetry and asset",
    "start": "674760",
    "end": "680279"
  },
  {
    "text": "domains we need a streaming stateful and real-time representation of IOT devices",
    "start": "680279",
    "end": "685470"
  },
  {
    "text": "at scale including modeling this inherent inherent uncertainty that comes with controlling IOT devices over the",
    "start": "685470",
    "end": "692190"
  },
  {
    "text": "internet now akka has been an essential tool for us for building these micro",
    "start": "692190",
    "end": "697560"
  },
  {
    "text": "services akka is a toolkit for distributed computing and it also supports actor model programming which",
    "start": "697560",
    "end": "703350"
  },
  {
    "text": "is great for modeling the state of individual entities like a battery while also providing a model for concurrency",
    "start": "703350",
    "end": "709589"
  },
  {
    "text": "and distribution based on asynchronous and mutable message passing it's really",
    "start": "709589",
    "end": "714870"
  },
  {
    "text": "really great model for IOT and I'll provide some specific examples later in the presentation",
    "start": "714870",
    "end": "720110"
  },
  {
    "text": "another part of the akka toolkit that we use extensively is the reactive streams component called akka streams akka",
    "start": "720110",
    "end": "727050"
  },
  {
    "text": "streams provides sophisticated primitives for flow control concurrency and data management all with back",
    "start": "727050",
    "end": "732930"
  },
  {
    "text": "pressure under the hood ensuring that the services have bounded resource constraints and generally all the",
    "start": "732930",
    "end": "738300"
  },
  {
    "text": "developer rights are functions and then akka streams handles the system dynamics",
    "start": "738300",
    "end": "743520"
  },
  {
    "text": "allowing processes to bend and stretch with as the load of the system changes and the messaging volume changes the",
    "start": "743520",
    "end": "752310"
  },
  {
    "text": "alpaca project has a large number of these reactive streams interfaces to services like Kafka or AWS s3 and Opaka",
    "start": "752310",
    "end": "759930"
  },
  {
    "text": "is what we use for interfacing with Kafka extensively we don't actually use Kafka streams because we find the",
    "start": "759930",
    "end": "766170"
  },
  {
    "text": "interface there is too simplistic for our use case and akka streams provide and it's also ecosystem specific and",
    "start": "766170",
    "end": "772230"
  },
  {
    "text": "akka streams provides this much more general-purpose streaming tool now like",
    "start": "772230",
    "end": "777990"
  },
  {
    "text": "any large platform there's a there's a mix of languages but our primary programming language is Scala and the reason we came",
    "start": "777990",
    "end": "784740"
  },
  {
    "text": "to Scala was through akka because it's really the first-class way to use akka and then we really kind of fell in love",
    "start": "784740",
    "end": "790710"
  },
  {
    "text": "with Scala's rich type system and we've become big fans and functional programming for building large complex",
    "start": "790710",
    "end": "798330"
  },
  {
    "text": "distributed systems so we like things like the compile time safety immutability pure functions composition",
    "start": "798330",
    "end": "804840"
  },
  {
    "text": "and doing things like modeling errors as data rather than throwing exceptions and for a small team having a primary",
    "start": "804840",
    "end": "811280"
  },
  {
    "text": "programming language reinvest in a deep understanding and first-class tooling there's a huge boost to productivity job",
    "start": "811280",
    "end": "818790"
  },
  {
    "text": "satisfaction and the overall quality of a compact complex system majority of our",
    "start": "818790",
    "end": "824220"
  },
  {
    "text": "micro services run on kubernetes and the pairing of akka and kubernetes is really",
    "start": "824220",
    "end": "829590"
  },
  {
    "text": "really fantastic kubernetes can handle force coarse-grained failures and scaling so that would be things like",
    "start": "829590",
    "end": "835320"
  },
  {
    "text": "scaling pods up or down running liveness probes or restarting a failed pod with a",
    "start": "835320",
    "end": "841350"
  },
  {
    "text": "with exponential back-off and then we use akka for handling fine-grained",
    "start": "841350",
    "end": "846960"
  },
  {
    "text": "failures like circuit breaking or retrying an individual request and modeling the state of individual",
    "start": "846960",
    "end": "853110"
  },
  {
    "text": "entities like the fact that a battery is charging or discharging and then we use",
    "start": "853110",
    "end": "858570"
  },
  {
    "text": "akka streams for handling the system dynamics and these message based real-time streaming systems the initial",
    "start": "858570",
    "end": "866700"
  },
  {
    "text": "platform was built with traditional HTTP API in JSON that allowed rapid",
    "start": "866700",
    "end": "872340"
  },
  {
    "text": "development of the initial platform but over the past year we've invested much more in G RPC it's been a big win it's",
    "start": "872340",
    "end": "878160"
  },
  {
    "text": "now our preference for new services or if we extend older services and it brought three distinct advantages",
    "start": "878160",
    "end": "885360"
  },
  {
    "text": "strict contracts make these systems much more reliable code generation of clients",
    "start": "885360",
    "end": "891090"
  },
  {
    "text": "means we're no longer writing clients which is great and third and somewhat",
    "start": "891090",
    "end": "896250"
  },
  {
    "text": "unexpected we saw much improved cross team collaboration around these contracts and we're not just seeing this",
    "start": "896250",
    "end": "902250"
  },
  {
    "text": "with G RPC because we also prefer protobuf for our streaming messages including the ones that are going",
    "start": "902250",
    "end": "907530"
  },
  {
    "text": "through Kafka and we we maintain a single repository where we share these contracts and then collaborate across",
    "start": "907530",
    "end": "914900"
  },
  {
    "text": "I've mentioned this theme of strict typing a few times rich types in Scala strict schema with",
    "start": "914900",
    "end": "921510"
  },
  {
    "text": "protobuf and then these strict asset models for systems integration and constraints ultimately provide freedom",
    "start": "921510",
    "end": "928110"
  },
  {
    "text": "and they allow decoupling of Micra services and decoupling of teams and constraints are really a foundation for",
    "start": "928110",
    "end": "935610"
  },
  {
    "text": "reliability in large-scale distributed systems so takeaways from building the Tesla energy platform we were lucky to",
    "start": "935610",
    "end": "943410"
  },
  {
    "text": "embrace the principles of reactive systems from day one and this produced incredibly robust reliable and effective",
    "start": "943410",
    "end": "949470"
  },
  {
    "text": "systems reactive streams a really important component for handling the system dynamics and providing resource",
    "start": "949470",
    "end": "955590"
  },
  {
    "text": "constraints while also providing this rich general-purpose API for streaming and what's needed to",
    "start": "955590",
    "end": "962040"
  },
  {
    "text": "build these complex services especially in IOT is a toolkit for distributed computing now for us that's Binaca for",
    "start": "962040",
    "end": "969150"
  },
  {
    "text": "others that might be Erlang OTP and I think now we're also seeing the evolution of stateful service platforms",
    "start": "969150",
    "end": "975660"
  },
  {
    "text": "to support the same building blocks and I kind of imagine that's how we're all going to be programming these systems in",
    "start": "975660",
    "end": "981210"
  },
  {
    "text": "the future that's things like managing state modeling individual entities at scale workflow management streaming",
    "start": "981210",
    "end": "988170"
  },
  {
    "text": "interfaces then allowing the the runtime to handle concurrency distribution and",
    "start": "988170",
    "end": "993210"
  },
  {
    "text": "failure strict contracts make systems more reliable and allows services and",
    "start": "993210",
    "end": "998790"
  },
  {
    "text": "teams that work more decoupled will also improve in collaboration and don't develop every microservice differently",
    "start": "998790",
    "end": "1005360"
  },
  {
    "text": "just because you can compound your investments in your knowledge and in your tooling by creating a deep",
    "start": "1005360",
    "end": "1011720"
  },
  {
    "text": "understanding and also this paved path in your primary toolset",
    "start": "1011720",
    "end": "1017470"
  },
  {
    "text": "so on top of the Tesla energy platform the Colin described we built our first power plant type application in this",
    "start": "1019570",
    "end": "1027490"
  },
  {
    "text": "phase we were learning how to productize real-time forecast and optimization of batteries and in this case we started",
    "start": "1027490",
    "end": "1033550"
  },
  {
    "text": "with a single albeit very large battery which was the horn snail battery the horn steel battery was built on a tight",
    "start": "1033550",
    "end": "1039339"
  },
  {
    "text": "timeline because of this famous tweet and it's the largest battery in the world at 100 megawatts 129 megawatt",
    "start": "1039339",
    "end": "1045970"
  },
  {
    "text": "hours which is about the size of a gas turbine and horn seal helps keep the",
    "start": "1045970",
    "end": "1053920"
  },
  {
    "text": "grid stable even as more renewables are coming online and not only is it keeping the grid stable it's actually reduced",
    "start": "1053920",
    "end": "1059800"
  },
  {
    "text": "the cost to customers of doing so and it provides this service it helps the grid",
    "start": "1059800",
    "end": "1066070"
  },
  {
    "text": "by providing multiple kinds of services so during extreme events like when a generator trips off line horns doll",
    "start": "1066070",
    "end": "1071470"
  },
  {
    "text": "responds nearly instantaneously to balance big frequency excursions that could otherwise cause a blackout but",
    "start": "1071470",
    "end": "1077650"
  },
  {
    "text": "even during normal times whereas a conventional generators response lags the grid operators signaled by the order",
    "start": "1077650",
    "end": "1083680"
  },
  {
    "text": "of minutes the battery can risk can follow the grid operator frequency regulation commands nearly",
    "start": "1083680",
    "end": "1089260"
  },
  {
    "text": "instantaneously and this helps maintain a safe grid frequency so this big battery provides",
    "start": "1089260",
    "end": "1095710"
  },
  {
    "text": "these services to the grid by way of the energy market and why do we have to participate in an energy market so",
    "start": "1095710",
    "end": "1101800"
  },
  {
    "text": "recall the requirement that supply and demand have to be balanced in real-time markets are an economically efficient",
    "start": "1101800",
    "end": "1107170"
  },
  {
    "text": "way to make them balanced participants bid in what they're willing to produce or consume at different price levels and",
    "start": "1107170",
    "end": "1112570"
  },
  {
    "text": "at different time scales and the operator activates the participants you can provide the necessary services at",
    "start": "1112570",
    "end": "1117820"
  },
  {
    "text": "the lowest price and if we want the battery to continually provide services to the grid and help stabilize that as",
    "start": "1117820",
    "end": "1123730"
  },
  {
    "text": "more renewables come online we need to be participating in energy markets and in order to participate in energy",
    "start": "1123730",
    "end": "1129940"
  },
  {
    "text": "markets we need software so to do this we built Auto bitter to operate horns Dale and now we offer it as a product",
    "start": "1129940",
    "end": "1135220"
  },
  {
    "text": "this is the UI for Auto bitter it's a pro tool that's intended for control room operators who look at it day in and",
    "start": "1135220",
    "end": "1141400"
  },
  {
    "text": "day out there's a lot of information on the screen I know but it's running workflows that fetch data forecast prices and",
    "start": "1141400",
    "end": "1148600"
  },
  {
    "text": "renewable generation and sidon an optimal bid then submit it and these were closed run every five minutes that's the cadence of",
    "start": "1148600",
    "end": "1154409"
  },
  {
    "text": "the Australian market and at a high level the optimization problem is trade-offs across different market",
    "start": "1154409",
    "end": "1159809"
  },
  {
    "text": "products which are different kinds of services that the battery can provide to the grid and trade-offs in time since",
    "start": "1159809",
    "end": "1166380"
  },
  {
    "text": "the battery has a finite amount of energy auto bidders built on the applications in the applications layer",
    "start": "1166380",
    "end": "1172770"
  },
  {
    "text": "of the Tesla energy platform that Colin described and it consists of several micro services and it interacts with",
    "start": "1172770",
    "end": "1179279"
  },
  {
    "text": "both the platform and with third-party ap is an auto bidder is fundamentally a",
    "start": "1179279",
    "end": "1184350"
  },
  {
    "text": "workflow orchestration platform and so you might ask why did we build our own rather than using an open-source tool",
    "start": "1184350",
    "end": "1189690"
  },
  {
    "text": "the key thing is this is operational technology these these aren't batch or offline jobs and it's critical for",
    "start": "1189690",
    "end": "1195600"
  },
  {
    "text": "financial and physical reasons that these workflows run we also leverage our primary toolset rather than so that",
    "start": "1195600",
    "end": "1201720"
  },
  {
    "text": "allowed us to avoid introducing a new language and a new infrastructure into our stack in the center of the system is",
    "start": "1201720",
    "end": "1207570"
  },
  {
    "text": "the orchestrator micro service and this runs auto bidding workflows and principle we hold - as we keep this core",
    "start": "1207570",
    "end": "1213450"
  },
  {
    "text": "as simple as possible and contain complexity and the peripheral services so the market data service abstracts the",
    "start": "1213450",
    "end": "1220049"
  },
  {
    "text": "ETL of complex input data this data has diverse kinds of timing when it arrives relative to the market cycle and this",
    "start": "1220049",
    "end": "1227340"
  },
  {
    "text": "service handles that timing and it handles callbacks in case of late arriving data or missing data there's a",
    "start": "1227340",
    "end": "1232799"
  },
  {
    "text": "forecast service and an optimisation service that executes algorithmic code and a bid service to interact with the",
    "start": "1232799",
    "end": "1238529"
  },
  {
    "text": "market submission interface interface the orchestrator market data service and bid service are written in scala and",
    "start": "1238529",
    "end": "1244409"
  },
  {
    "text": "again this common toolkit gives us great concurrency semantics functional programming tight safety and compounding",
    "start": "1244409",
    "end": "1250380"
  },
  {
    "text": "best practices across the parties however the forecast and optimization services are in Python and this is",
    "start": "1250380",
    "end": "1257610"
  },
  {
    "text": "because we it's very important to us to enable rapid algorithm improvement and development and Python gives us a couple",
    "start": "1257610",
    "end": "1263159"
  },
  {
    "text": "things they're their key numerical and solver libraries available in Python and also the algorithm engineers on our team",
    "start": "1263159",
    "end": "1269039"
  },
  {
    "text": "are more fluent in Python and having these services in Python empowers them to own the core logic there and iterate",
    "start": "1269039",
    "end": "1275010"
  },
  {
    "text": "it iterate on it the communication between the market data and bidding services and Orchestrator happens over G",
    "start": "1275010",
    "end": "1281580"
  },
  {
    "text": "RPC with the benefits Colin described as strict contracts code generation and collaboration but the communication",
    "start": "1281580",
    "end": "1289200"
  },
  {
    "text": "between the orchestrator and the forecasting and optimization services uses Amazon sqs message queues and these",
    "start": "1289200",
    "end": "1295620"
  },
  {
    "text": "queues give us durable delivery retries in cases of consumer failures and easily support long running tasks without a",
    "start": "1295620",
    "end": "1301740"
  },
  {
    "text": "long-lived network connection between services we use an immutable input/output messaging model and the",
    "start": "1301740",
    "end": "1308400"
  },
  {
    "text": "messages have strict schemas and this allows us to persist the immutable inputs and outputs and have them",
    "start": "1308400",
    "end": "1313980"
  },
  {
    "text": "available for back testing which is an important part of our program our overall team's mission also sqs allows",
    "start": "1313980",
    "end": "1321870"
  },
  {
    "text": "us to build worker pools so like I said forecast and optimization are in Python which has somewhat cumbersome concurrency semantics and the message",
    "start": "1321870",
    "end": "1329250"
  },
  {
    "text": "queue allows us to implement concurrency across workers instead of within a worker and it's notable that these",
    "start": "1329250",
    "end": "1335100"
  },
  {
    "text": "services are functions effectively they take inputs and produce outputs without other effects and this keeps them more",
    "start": "1335100",
    "end": "1340260"
  },
  {
    "text": "testable and makes these important algorithm changes and improvements safer and also relieves algorithm engineers of",
    "start": "1340260",
    "end": "1346560"
  },
  {
    "text": "the burden of writing i/o code and it lets us use Scala Scala concurrency for i/o so stepping back and looking at",
    "start": "1346560",
    "end": "1353730"
  },
  {
    "text": "these workflows as a whole these workflows are stateful and the state is a set of immutable facts that are",
    "start": "1353730",
    "end": "1360060"
  },
  {
    "text": "generated by business logic stages these stages happen sequentially in time and",
    "start": "1360060",
    "end": "1365700"
  },
  {
    "text": "the workflow state includes things like knowing what the current stage is and accumulating the results of a task",
    "start": "1365700",
    "end": "1371490"
  },
  {
    "text": "within the current stage and across stages and some stages like the forecast stage have multiple tasks that need to",
    "start": "1371490",
    "end": "1377760"
  },
  {
    "text": "be accumulated before deciding to proceed and some stages might need outputs of multiple previous stages not",
    "start": "1377760",
    "end": "1384690"
  },
  {
    "text": "just the immediate predecessor in case of a failure like the orchestrator pod restarting we don't want to forget that",
    "start": "1384690",
    "end": "1391350"
  },
  {
    "text": "a workflow was in progress and we prefer not to completely restart it so we can instead take snapshots of the state at",
    "start": "1391350",
    "end": "1397710"
  },
  {
    "text": "checkpoints and if the workflow fails it can be resumed from the last checkpoint and we keep this state in a NOC actor",
    "start": "1397710",
    "end": "1404640"
  },
  {
    "text": "representing the workflow state machine an occupation a persistence gives us transparent resumption of the state",
    "start": "1404640",
    "end": "1410940"
  },
  {
    "text": "through checkpointing in an event journal but an important lesson we've learned is to keep the business logic of",
    "start": "1410940",
    "end": "1416460"
  },
  {
    "text": "stage execution and pure functions separate from the actor as much as possible this makes testing and",
    "start": "1416460",
    "end": "1421980"
  },
  {
    "text": "composition of that business logic so much easier and the new aqua type API naturally helps with that decomposition",
    "start": "1421980",
    "end": "1429800"
  },
  {
    "text": "on our team it's very important to enable rapid development of algorithms and improvement in iteration and so we",
    "start": "1429800",
    "end": "1435690"
  },
  {
    "text": "have Python in specific places in our system but we also really need to minimize the risk that the iteration on",
    "start": "1435690",
    "end": "1441630"
  },
  {
    "text": "the algorithms breaks workflows and so a couple things that work really well for us to minimize that risk are an",
    "start": "1441630",
    "end": "1447030"
  },
  {
    "text": "input-output model to the algorithmic services keeps that code simpler and more easily testable and strict",
    "start": "1447030",
    "end": "1453330"
  },
  {
    "text": "contracts which gives again gives freedom to change the algorithm internal logic independently in the rest of the",
    "start": "1453330",
    "end": "1458730"
  },
  {
    "text": "system it's been important for us to abstract the messy details of external data sources and services from the core",
    "start": "1458730",
    "end": "1465630"
  },
  {
    "text": "system and this is a fundamental tenet of the whole platform actually and it's",
    "start": "1465630",
    "end": "1471120"
  },
  {
    "text": "these workloads are inevitably stateful but entangling state with the business logic stages can lead to spaghetti code",
    "start": "1471120",
    "end": "1476940"
  },
  {
    "text": "and instead keep the business logic stages functional testable and composable okay in the next part let me",
    "start": "1476940",
    "end": "1487590"
  },
  {
    "text": "describe our first virtual power plant application that so Percy just described",
    "start": "1487590",
    "end": "1492840"
  },
  {
    "text": "how we leverage the platform to participate in it in the energy markets algorithmically with one large battery",
    "start": "1492840",
    "end": "1498980"
  },
  {
    "text": "now we'll focus on how we extend that and what use what we learn to measure",
    "start": "1498980",
    "end": "1504030"
  },
  {
    "text": "model and control a fleet of thousands of power walls that are installed in people's homes to do peak shaving for an",
    "start": "1504030",
    "end": "1510660"
  },
  {
    "text": "electrical utility now before I detail this off our architecture I'll describe the problem that we're trying to solve",
    "start": "1510660",
    "end": "1516590"
  },
  {
    "text": "so this is a graph of aggregate grid load in megawatts now grid load varies with weather and with time of year this",
    "start": "1516590",
    "end": "1523590"
  },
  {
    "text": "is a typical load profile for a warm summer day the left-hand side is midnight the minimum load is around 4",
    "start": "1523590",
    "end": "1530880"
  },
  {
    "text": "a.m. when most people are sleeping and then peak load is around 6 p.m. when a lot of people are running air",
    "start": "1530880",
    "end": "1535920"
  },
  {
    "text": "conditioning or cooking dinner now peak loads are very very expensive the grid only needs to meet the peak",
    "start": "1535920",
    "end": "1543000"
  },
  {
    "text": "load a few hours in a year and the options for satisfying the peak load are build more capacity which",
    "start": "1543000",
    "end": "1549370"
  },
  {
    "text": "incurs significant capital costs and then this capacity is largely underused outside of those Peaks and the other",
    "start": "1549370",
    "end": "1556330"
  },
  {
    "text": "option do is to import power from another jurisdiction that has excess and this is often at a significant premium",
    "start": "1556330",
    "end": "1562650"
  },
  {
    "text": "so power can be cheaper if we can offset demand and make this load curve more uniform and that's our objective we want",
    "start": "1562650",
    "end": "1569950"
  },
  {
    "text": "to discharge power wall batteries during the peak grid load and at other times the homeowner will use this battery for",
    "start": "1569950",
    "end": "1576190"
  },
  {
    "text": "clean backup power a lesson we quickly learned as our virtual power plants grew to thousands of power walls and tens of",
    "start": "1576190",
    "end": "1583000"
  },
  {
    "text": "megawatts of power was that charging the batteries back up right after the peak would lead to our own peak defeating the",
    "start": "1583000",
    "end": "1589900"
  },
  {
    "text": "purpose and of course the solution is to not only control when the batteries discharge but also when they charge and",
    "start": "1589900",
    "end": "1596920"
  },
  {
    "text": "spread out the charging over a longer period of time now this is what we're trying to accomplish this picture but in",
    "start": "1596920",
    "end": "1602410"
  },
  {
    "text": "reality we don't have the complete picture there's uncertainty it's noon and we're trying to predict whether or",
    "start": "1602410",
    "end": "1608200"
  },
  {
    "text": "not there's going to be a peak and we only want to discharge batteries if there's a high likelihood of a peak once",
    "start": "1608200",
    "end": "1614920"
  },
  {
    "text": "we've decided to discharge batteries to avoid the peak how do we control them and I want to be very clear that we only",
    "start": "1614920",
    "end": "1621010"
  },
  {
    "text": "control power walls that are enrolled in specific virtual power plant programs we don't arbitrarily control power walls",
    "start": "1621010",
    "end": "1627670"
  },
  {
    "text": "that aren't enrolled in these programs so not every customer has this feature as Percy mentioned the grids not",
    "start": "1627670",
    "end": "1634330"
  },
  {
    "text": "designed to interact with a whole bunch of small players so we need to aggregate these power walls to look more like a",
    "start": "1634330",
    "end": "1639940"
  },
  {
    "text": "traditional grid asset something like a large steam turbine and typically we do this by having hierarchical aggregations",
    "start": "1639940",
    "end": "1647770"
  },
  {
    "text": "that are a virtual representation in cloud software the first level is a",
    "start": "1647770",
    "end": "1653860"
  },
  {
    "text": "digital twin representing an individual site so there'll be a house with a power wall and the next level might be",
    "start": "1653860",
    "end": "1660340"
  },
  {
    "text": "organized by electrical top topology something like a substation or it could be by geography something like a county",
    "start": "1660340",
    "end": "1667260"
  },
  {
    "text": "the next level can again be a physical grouping like an electrical interconnection or it might be logical",
    "start": "1667260",
    "end": "1673480"
  },
  {
    "text": "like sites with a battery and sites with a battery plus solar that we want to control or demise differently and all of these",
    "start": "1673480",
    "end": "1680890"
  },
  {
    "text": "sites come together to form the top level of the virtual power plant meaning we can query the aggregate of thousands",
    "start": "1680890",
    "end": "1686980"
  },
  {
    "text": "of power walls as fast as we can query a single power wall and use this aggregate to inform our global optimization now",
    "start": "1686980",
    "end": "1694780"
  },
  {
    "text": "it's easy to think of the virtual power plant as uniform but the reality is more like this there's a diversity of",
    "start": "1694780",
    "end": "1701020"
  },
  {
    "text": "installations and home loads some homes have one battery some have two or three the batteries are not all fully charged",
    "start": "1701020",
    "end": "1707950"
  },
  {
    "text": "some might be half full or close to empty depending on home loads time of day solar production on that day and the",
    "start": "1707950",
    "end": "1715240"
  },
  {
    "text": "mode of operation and there's also uncertainty in communication with these sites over the internet as some of them",
    "start": "1715240",
    "end": "1721690"
  },
  {
    "text": "may be temporarily offline finally there's the asset management problem of new sites coming online regularly",
    "start": "1721690",
    "end": "1728070"
  },
  {
    "text": "firmware being non-uniform in terms of its capabilities across the whole fleet and hardware being operate upgraded and",
    "start": "1728070",
    "end": "1735309"
  },
  {
    "text": "replaced over time so it's really critical to represent the this",
    "start": "1735309",
    "end": "1740440"
  },
  {
    "text": "uncertainty in the data model and in the business logic so we want to say things like there's 10 megawatt hours of energy",
    "start": "1740440",
    "end": "1746980"
  },
  {
    "text": "available but only 95 percent of the sites we expect to be reporting have",
    "start": "1746980",
    "end": "1752410"
  },
  {
    "text": "reported and it's really only the consumer of the data that can decide how how to interpret this uncertainty based",
    "start": "1752410",
    "end": "1759250"
  },
  {
    "text": "on the local context of that service so one way we manage this uncertainty is through a site level abstraction so even",
    "start": "1759250",
    "end": "1766240"
  },
  {
    "text": "if the sites are heterogeneous this edge computing platform provides site level",
    "start": "1766240",
    "end": "1771580"
  },
  {
    "text": "telemetry for things like power frequency and voltage that give us a consistent abstraction in software and",
    "start": "1771580",
    "end": "1778360"
  },
  {
    "text": "then another way is to aggregate the telemetry across the virtual power plan",
    "start": "1778360",
    "end": "1783400"
  },
  {
    "text": "because people don't want to worry about you know controlling individual power wall batteries they want to worry about discharging 10 megawatts from 5 p.m. to",
    "start": "1783400",
    "end": "1791230"
  },
  {
    "text": "6 p.m. in order to save the peak and this is a really difficult engineering challenge which is a combination of",
    "start": "1791230",
    "end": "1797290"
  },
  {
    "text": "streaming telemetry and asset modeling for modeling each site in software the",
    "start": "1797290",
    "end": "1803200"
  },
  {
    "text": "so-called digital twin we represent each site with an actor the actor manages",
    "start": "1803200",
    "end": "1808900"
  },
  {
    "text": "state like the latest reported telemetry from that bad and execute a state machine changing its",
    "start": "1808900",
    "end": "1815320"
  },
  {
    "text": "behavior if the site is offline in telemetry is delayed but it also provides a convenient model for",
    "start": "1815320",
    "end": "1822010"
  },
  {
    "text": "concurrency and computation so the programmer worries about modeling an individual site in an actor and then the",
    "start": "1822010",
    "end": "1829210"
  },
  {
    "text": "akka runtime handles scaling this to thousands or millions of sites and you don't have to worry about that it's a",
    "start": "1829210",
    "end": "1834549"
  },
  {
    "text": "very very powerful abstraction for IOT in particular and we generally never worry about threads or locks or",
    "start": "1834549",
    "end": "1841120"
  },
  {
    "text": "concurrency bugs the higher-level aggregations are also represented by",
    "start": "1841120",
    "end": "1846790"
  },
  {
    "text": "individual actors and then actors maintain their relationships with other actors describing this physical or",
    "start": "1846790",
    "end": "1853150"
  },
  {
    "text": "logical aggregation then the telemetry is aggregated by messaging up to",
    "start": "1853150",
    "end": "1858760"
  },
  {
    "text": "hierarchy in memory in near real time and how real-time the aggregate is at",
    "start": "1858760",
    "end": "1864070"
  },
  {
    "text": "any level is really just a trade-off between messaging volume and latency we",
    "start": "1864070",
    "end": "1870700"
  },
  {
    "text": "can query at any node in this hierarchy to know the aggregate value at that location or query the latest telemetry",
    "start": "1870700",
    "end": "1877870"
  },
  {
    "text": "from an individual site and we can also navigate up and down the hierarchy from any point now the services that perform",
    "start": "1877870",
    "end": "1885910"
  },
  {
    "text": "this real-time hierarchical aggregation run in an akka cluster alka cluster",
    "start": "1885910",
    "end": "1891070"
  },
  {
    "text": "allows a set of pods with different roles to communicate with each other transparently so the first role is a set",
    "start": "1891070",
    "end": "1899140"
  },
  {
    "text": "of linearly scalable pods that stream data off Kafka and they use akka streams",
    "start": "1899140",
    "end": "1904419"
  },
  {
    "text": "for backpressure bounded resource constraints so then low latency stream processing then they message with a set",
    "start": "1904419",
    "end": "1911230"
  },
  {
    "text": "of pods running all the actors in this virtual representation that I just described when these the stream processors read a",
    "start": "1911230",
    "end": "1917620"
  },
  {
    "text": "message off Kafka for a particular site they message to the actor representing that site simply using the site",
    "start": "1917620",
    "end": "1923770"
  },
  {
    "text": "identifier and it doesn't matter where in the cluster that actor is running the akka runtime will transparently handle",
    "start": "1923770",
    "end": "1930490"
  },
  {
    "text": "the delivery of that message this is this is called location transparency and then site actors message with their",
    "start": "1930490",
    "end": "1937630"
  },
  {
    "text": "parents in a similar manner all the way up that hierarchy there's also a set of",
    "start": "1937630",
    "end": "1943690"
  },
  {
    "text": "API pods that can serve client requests for site-level or aggregate telemetry",
    "start": "1943690",
    "end": "1949300"
  },
  {
    "text": "because they can query into the cluster in this same location transparent way and it's this collection of services",
    "start": "1949300",
    "end": "1956140"
  },
  {
    "text": "that provides the in-memory near-real-time aggregation of telemetry for thousands of power walls it's an architecture that",
    "start": "1956140",
    "end": "1964060"
  },
  {
    "text": "provides great flexibility especially when paired with kubernetes to manage the pods because the actors are just",
    "start": "1964060",
    "end": "1970840"
  },
  {
    "text": "kind of running on this substrate of computer kind of running on the heap if you will and an individual pod can fail",
    "start": "1970840",
    "end": "1977530"
  },
  {
    "text": "or be restarted and the actors that were on that pod will simply migrate to another until it recovers and the",
    "start": "1977530",
    "end": "1984370"
  },
  {
    "text": "runtime handles doing this the programmer doesn't have to worry about it or the cluster can also be scaled up",
    "start": "1984370",
    "end": "1989860"
  },
  {
    "text": "or down and the actors will rebalance across the cluster actors can recover their state automatically using akka",
    "start": "1989860",
    "end": "1997270"
  },
  {
    "text": "persistence but in this case we don't actually need to use akka persistence because the actor can just rediscover",
    "start": "1997270",
    "end": "2003330"
  },
  {
    "text": "its relationships as well as the latest state when the next message from the battery arrives within a few seconds so",
    "start": "2003330",
    "end": "2011550"
  },
  {
    "text": "to conclude this section after aggregating telemetry to know the capacity that's available in the virtual",
    "start": "2011550",
    "end": "2017190"
  },
  {
    "text": "power plant let's look at how the batteries are actually controlled so the first step is taking past measurements",
    "start": "2017190",
    "end": "2023660"
  },
  {
    "text": "forecasting and deciding how many megawatts to discharge if we are going to hit a peak and at a high level this",
    "start": "2023660",
    "end": "2031080"
  },
  {
    "text": "loop of measure forecasts optimized and controlled is basically running continuously and the control part of",
    "start": "2031080",
    "end": "2037500"
  },
  {
    "text": "this loop is true closed-loop control once an aggregate control setpoint has been determined we continuously monal",
    "start": "2037500",
    "end": "2044070"
  },
  {
    "text": "the monitor the disaggregate telemetry from every single site to see how it responds and we adjust the site the set",
    "start": "2044070",
    "end": "2050850"
  },
  {
    "text": "point for the individual sites to minimize error we can take a look at how this works the auto bit of platform that",
    "start": "2050850",
    "end": "2058050"
  },
  {
    "text": "Percy described may decide to control the whole fleet so to give a sense of scale this might be enough megawatts to",
    "start": "2058050",
    "end": "2064080"
  },
  {
    "text": "offset the need to build a new natural gas peaker plant or we might just decide to control a subset of the hierarchy",
    "start": "2064080",
    "end": "2071700"
  },
  {
    "text": "depending on the objectives now the control service that I mentioned earlier dynamically resolves the individual",
    "start": "2071700",
    "end": "2077580"
  },
  {
    "text": "sites under this target by querying the asset service and this is because the sites can change over time new sites are installed the",
    "start": "2077580",
    "end": "2085118"
  },
  {
    "text": "virtual hierarchy might be modified or the properties of the individual site might change maybe you add a second",
    "start": "2085119",
    "end": "2090789"
  },
  {
    "text": "battery the control service queries the battery telemetry at every site",
    "start": "2090789",
    "end": "2096519"
  },
  {
    "text": "potentially thousands of sites using the in-memory aggregation that I just discussed to decide how to discharge the",
    "start": "2096519",
    "end": "2103150"
  },
  {
    "text": "battery at each site there's no point discharging a battery that's almost empty and you can kind of think of this as somewhat similar to a",
    "start": "2103150",
    "end": "2110410"
  },
  {
    "text": "database query planner basically trying to plan the plan the execution the",
    "start": "2110410",
    "end": "2115569"
  },
  {
    "text": "control service then sends a message to each site with a discharge setpoint and a time frame and it will keep retrying",
    "start": "2115569",
    "end": "2121990"
  },
  {
    "text": "until it gets an acknowledgment from the site or the time frame has elapsed because these logical aggregations of",
    "start": "2121990",
    "end": "2129339"
  },
  {
    "text": "batteries are so large we stream over these huge collections using akka streams to provide bounded resource",
    "start": "2129339",
    "end": "2135490"
  },
  {
    "text": "constraints in all of the steps that I've just described so that's resolving the site's reading all of the telemetry",
    "start": "2135490",
    "end": "2141160"
  },
  {
    "text": "and then sending all the control set points so a huge aggregations demand",
    "start": "2141160",
    "end": "2147730"
  },
  {
    "text": "different API s and data processing patterns you can't just go build typical crud microservices not going to work",
    "start": "2147730",
    "end": "2153670"
  },
  {
    "text": "need streaming semantics for processing large collections with low latency and bounded resource constraints and then",
    "start": "2153670",
    "end": "2160089"
  },
  {
    "text": "what we really need is a runtime for modeling stateful entities that support location transparency concurrency",
    "start": "2160089",
    "end": "2166119"
  },
  {
    "text": "scaling and resilience unheard uncertainty is inherent in distributed",
    "start": "2166119",
    "end": "2172029"
  },
  {
    "text": "iot systems so we need to just embrace this in the data model in the business logic and even in the customer",
    "start": "2172029",
    "end": "2177910"
  },
  {
    "text": "experience rather than trying to escape it and representing physical and virtual",
    "start": "2177910",
    "end": "2183420"
  },
  {
    "text": "relationships among IOT devices especially as they change over time is the hardest problem in IOT trust me but",
    "start": "2183420",
    "end": "2191710"
  },
  {
    "text": "essential for creating a great product now direct control based on a central objective doesn't account for local",
    "start": "2191710",
    "end": "2198309"
  },
  {
    "text": "needs and this creates a kind of tension so imagine a storm is approaching close to a peak the global objective wants to",
    "start": "2198309",
    "end": "2205599"
  },
  {
    "text": "discharge these batteries to avoid the peak but of course the homeowner wants a full battery in case the power goes out",
    "start": "2205599",
    "end": "2211210"
  },
  {
    "text": "and this leads to the for part of our presentation the co optimized virtual power plan so just to",
    "start": "2211210",
    "end": "2222099"
  },
  {
    "text": "review where we are so far we've built on the the fundamental platform to first of all optimize a single big battery to",
    "start": "2222099",
    "end": "2228339"
  },
  {
    "text": "participate in an electricity market and then second aggregate optimize and control thousands of batteries to meet a",
    "start": "2228339",
    "end": "2234160"
  },
  {
    "text": "central coal and so in the select last section like Colin said we're again going to aggregate optimizing control",
    "start": "2234160",
    "end": "2240280"
  },
  {
    "text": "thousands of batteries but this time not just for a global global goal we're going to co-opt Amaya and global",
    "start": "2240280",
    "end": "2246369"
  },
  {
    "text": "objectives so where's the peak shaving virtual power plants that Colin just described optimized a central objective",
    "start": "2246369",
    "end": "2252790"
  },
  {
    "text": "and past and past the control decisions downward to the sights the market",
    "start": "2252790",
    "end": "2258609"
  },
  {
    "text": "virtual power plant distributes the optimization itself across the sites in the cloud and the sites",
    "start": "2258609",
    "end": "2264550"
  },
  {
    "text": "actually in this case participate in the control decisions this distributed",
    "start": "2264550",
    "end": "2270250"
  },
  {
    "text": "optimization is only possible because Tesla builds its own hardware and has full control over firmware and software",
    "start": "2270250",
    "end": "2275280"
  },
  {
    "text": "this enables quick iteration on across the local and central intelligence and how they relate to each other and this",
    "start": "2275280",
    "end": "2281770"
  },
  {
    "text": "collaboration is cross team rather than cross company so when we say that this",
    "start": "2281770",
    "end": "2288310"
  },
  {
    "text": "virtual power plant Co optimizes local and global objectives what do we mean so",
    "start": "2288310",
    "end": "2293890"
  },
  {
    "text": "let's take a non-virtual power plant home and at home with this solar generation and this electricity",
    "start": "2293890",
    "end": "2299619"
  },
  {
    "text": "consumption would have net load like this this is the load that the utility sees with a power wall home battery the",
    "start": "2299619",
    "end": "2307990"
  },
  {
    "text": "power wall can charge during excess solar generation and discharged during high load and this is thanks to the",
    "start": "2307990",
    "end": "2313240"
  },
  {
    "text": "local intelligence on the device and that the goal of this would be some either to minimize the customers bill or",
    "start": "2313240",
    "end": "2319660"
  },
  {
    "text": "to maximize how much of the their own solar production they're using so this is local optimization what does it look",
    "start": "2319660",
    "end": "2325599"
  },
  {
    "text": "like to co-opt amaizing global objectives the local one way to do it is",
    "start": "2325599",
    "end": "2331330"
  },
  {
    "text": "that the local optimization can consider information about the aggregate goal like market prices indicating the real",
    "start": "2331330",
    "end": "2337210"
  },
  {
    "text": "time balancing needs of the grid so in this example negative prices and the night perhaps caused by wind over",
    "start": "2337210",
    "end": "2342970"
  },
  {
    "text": "generation might cause the battery to charge earlier and a high price in the afternoon cause",
    "start": "2342970",
    "end": "2348039"
  },
  {
    "text": "maybe by unexpectedly high demand prompts the battery to discharge rather than waiting to fully offset the evening",
    "start": "2348039",
    "end": "2354549"
  },
  {
    "text": "road like it would have and just a note that this is all well following local regulations around discharging to the",
    "start": "2354549",
    "end": "2360189"
  },
  {
    "text": "grid in our Co optimized virtual power plant auto bidder generates a time",
    "start": "2360189",
    "end": "2367359"
  },
  {
    "text": "series of price forecasts every 15 minutes and the Tesla energy platforms",
    "start": "2367359",
    "end": "2372429"
  },
  {
    "text": "control component distributes those forecasts to the sites the local optimization then runs makes a plan for",
    "start": "2372429",
    "end": "2378849"
  },
  {
    "text": "the battery and given both the local and global objectives and then the sites",
    "start": "2378849",
    "end": "2384609"
  },
  {
    "text": "communicate that plan back to the Tesla energy platform which ingests and aggregates it using the same framework",
    "start": "2384609",
    "end": "2389619"
  },
  {
    "text": "that adjusts and aggregates telemetry an auto bidder then uses the aggregate plans to decide what to bid this this",
    "start": "2389619",
    "end": "2398169"
  },
  {
    "text": "distributed algorithm has a couple of big advantages one is scalability we're taking advantage of edge computing power",
    "start": "2398169",
    "end": "2404379"
  },
  {
    "text": "here and we're not solving one huge optimization problem over all sites and as more sites join the aggregation we",
    "start": "2404379",
    "end": "2410709"
  },
  {
    "text": "don't have to worry about our central optimization falling over another big",
    "start": "2410709",
    "end": "2415779"
  },
  {
    "text": "advantage is resilience to the inevitable intermittency of communication when sites go offline for",
    "start": "2415779",
    "end": "2421539"
  },
  {
    "text": "short or moderate amounts of time they have this last version received of this global time series of prices and they",
    "start": "2421539",
    "end": "2427659"
  },
  {
    "text": "can continue to co-opt amaizing the best estimate of the global objective and then if the sites are offline for longer",
    "start": "2427659",
    "end": "2434409"
  },
  {
    "text": "than the length of that price time series they just revert to purely local optimization and this is a really reasonable behavior and in the case of",
    "start": "2434409",
    "end": "2441219"
  },
  {
    "text": "degraded connectivity it's still creating local value for the local site and then on the others from the other",
    "start": "2441219",
    "end": "2447639"
  },
  {
    "text": "perspective of the server the telemetry aggregation accounts for offline sites out of the box if sites haven't reported",
    "start": "2447639",
    "end": "2453459"
  },
  {
    "text": "signals in a certain amount of time they're excluded from the aggregate and so then auto bidder is able to bid conservatively and assume that offline",
    "start": "2453459",
    "end": "2459849"
  },
  {
    "text": "sites are not available to participate in market bids Tesla's Tesla's unique",
    "start": "2459849",
    "end": "2467019"
  },
  {
    "text": "vertical Hardware firmware software integration enables this distributed algorithm and the vertical integration",
    "start": "2467019",
    "end": "2472569"
  },
  {
    "text": "lets us build a better overall solution this distributed algorithm makes the",
    "start": "2472569",
    "end": "2477849"
  },
  {
    "text": "virtual power plant more resilient devices are able to behave in a reasonable way during in the inevitable",
    "start": "2477849",
    "end": "2483540"
  },
  {
    "text": "communications failures of a distributed system and this algorithm is only",
    "start": "2483540",
    "end": "2488730"
  },
  {
    "text": "possible because of the high-quality and extensible Tesla energy platform that embraces uncertainty and models reality",
    "start": "2488730",
    "end": "2496349"
  },
  {
    "text": "and at the same time the algorithms help the software platform the algorithms enhance the overall value of the product",
    "start": "2496349",
    "end": "2504619"
  },
  {
    "text": "so in our journey building the Tesla energy virtual power plant we've found it very true that while the algorithms",
    "start": "2504619",
    "end": "2511380"
  },
  {
    "text": "are obviously important to the virtual power plant success the architecture and reliability of the overall system are",
    "start": "2511380",
    "end": "2517319"
  },
  {
    "text": "the key to the solution it's the system that allows us to provide reliable power",
    "start": "2517319",
    "end": "2522960"
  },
  {
    "text": "to people who have never had it before balance renewables on the grid or",
    "start": "2522960",
    "end": "2528180"
  },
  {
    "text": "provide flexible energy solutions for disaster relief and build highly integrated products and services that",
    "start": "2528180",
    "end": "2534390"
  },
  {
    "text": "deliver a superior customer experience so we're working on a mix of the most interesting and challenging problems in",
    "start": "2534390",
    "end": "2541200"
  },
  {
    "text": "distributed computing as well as some of the most challenging and interesting problems in distributed renewable energy",
    "start": "2541200",
    "end": "2547770"
  },
  {
    "text": "we're hiring if you want to work on these challenging important problems with us of course but equally",
    "start": "2547770",
    "end": "2556020"
  },
  {
    "text": "importantly software has the potential to address many of the most pressing problems in the world from renewable",
    "start": "2556020",
    "end": "2561900"
  },
  {
    "text": "energy and climate change to food and agriculture to cancer and infectious disease research so let's take our",
    "start": "2561900",
    "end": "2567420"
  },
  {
    "text": "talents and software engineering and work on the most important and lasting problems that we can find",
    "start": "2567420",
    "end": "2574070"
  },
  {
    "text": "[Applause]",
    "start": "2574070",
    "end": "2578639"
  }
]