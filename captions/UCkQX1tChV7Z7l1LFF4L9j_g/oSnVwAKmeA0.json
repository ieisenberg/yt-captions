[
  {
    "start": "0",
    "end": "64000"
  },
  {
    "text": "foreign [Music]",
    "start": "0",
    "end": "17240"
  },
  {
    "text": "presentation today about how we built our card processor um we'll start off with some introductions so my name is Robert",
    "start": "17240",
    "end": "23760"
  },
  {
    "text": "Donovan and I'm the tech lead for the card engineering team at styling bank",
    "start": "23760",
    "end": "29099"
  },
  {
    "text": "and I've been at styling for coming up to three years now uh hello and I'm Juana cranger I'm an",
    "start": "29099",
    "end": "37260"
  },
  {
    "text": "engineering lead for payments processing group at starlink I've been with Starling for almost four years now",
    "start": "37260",
    "end": "44520"
  },
  {
    "text": "um and this is the presentation that we have on how we filled our card processor",
    "start": "44520",
    "end": "50760"
  },
  {
    "text": "um it's it's going to mainly focus on the architecture of it and we hope that you're going to see some design patterns",
    "start": "50760",
    "end": "57300"
  },
  {
    "text": "in it where um and designed to use some of them in your own architectures later on",
    "start": "57300",
    "end": "63379"
  },
  {
    "text": "and let's let's get started let's jump right into it uh what we're going to",
    "start": "63379",
    "end": "69420"
  },
  {
    "start": "64000",
    "end": "134000"
  },
  {
    "text": "have covered today um at this point if you don't live in",
    "start": "69420",
    "end": "74460"
  },
  {
    "text": "the UK or you don't work in the financial services domain you might be having two questions so one is what is",
    "start": "74460",
    "end": "80880"
  },
  {
    "text": "Sterling Bank and we're going to answer that in the second one is what exactly is a card processor",
    "start": "80880",
    "end": "87960"
  },
  {
    "text": "um so for us to be able to give Insight on how we build the cloud processor we're gonna have to discuss about the",
    "start": "87960",
    "end": "95220"
  },
  {
    "text": "more global payment architecture and how does the card processor fit into that more Global uh payments architecture",
    "start": "95220",
    "end": "102200"
  },
  {
    "text": "you're going to also find out what happens when you pay with your card",
    "start": "102200",
    "end": "107700"
  },
  {
    "text": "at a terminal or at an online shop we're gonna reveal um our architecture diagram of the card",
    "start": "107700",
    "end": "114780"
  },
  {
    "text": "processor because this is why we're all here uh and on the way you're going we're gonna discuss really interesting",
    "start": "114780",
    "end": "121259"
  },
  {
    "text": "Concepts like HSM Snips um how PIN verification works and what",
    "start": "121259",
    "end": "127259"
  },
  {
    "text": "cryptograms are but for now let's just find out what is tunneling Bank",
    "start": "127259",
    "end": "133940"
  },
  {
    "start": "134000",
    "end": "200000"
  },
  {
    "text": "so for those of you who don't know us um Starling is a digital bank so you can see our a lovely app here",
    "start": "134879",
    "end": "142200"
  },
  {
    "text": "um and we've won best British bank for four years in a row",
    "start": "142200",
    "end": "147300"
  },
  {
    "text": "um and uh as we said today we're going to be talking about um about our cards um that you can see here",
    "start": "147300",
    "end": "153599"
  },
  {
    "text": "um so just to give some perspective on on the scale of the bank we currently",
    "start": "153599",
    "end": "159060"
  },
  {
    "text": "have 2.8 million accounts uh with 8.4 billion pounds worth of deposits in them",
    "start": "159060",
    "end": "166260"
  },
  {
    "text": "um and from a card volume perspective we currently process um just over 2 000 authorizations per",
    "start": "166260",
    "end": "172739"
  },
  {
    "text": "minute on average which is around 33 per second",
    "start": "172739",
    "end": "178019"
  },
  {
    "text": "um but as you can imagine our uh our numbers are going up uh very quickly every day so we need to we need",
    "start": "178019",
    "end": "185160"
  },
  {
    "text": "to be able to scale scale upwards quickly um",
    "start": "185160",
    "end": "190500"
  },
  {
    "text": "so what is a card processor",
    "start": "190500",
    "end": "194360"
  },
  {
    "text": "your need yes sorry uh so this this slide promises",
    "start": "196200",
    "end": "203340"
  },
  {
    "start": "200000",
    "end": "233000"
  },
  {
    "text": "to answer this question uh what is a card processor so first to tell you that",
    "start": "203340",
    "end": "208440"
  },
  {
    "text": "we're we're gonna go through a more global payment architecture and where does the chiropractor fit into that",
    "start": "208440",
    "end": "215120"
  },
  {
    "text": "architecture so we're going to be discussing all of these parties that are involved when when you pay with your",
    "start": "215120",
    "end": "222120"
  },
  {
    "text": "card at a terminal um and after we explain all of these systems we're gonna give a very simple",
    "start": "222120",
    "end": "229200"
  },
  {
    "text": "example of a card authorization message so let's start with Merchant uh Merchant",
    "start": "229200",
    "end": "236220"
  },
  {
    "start": "233000",
    "end": "714000"
  },
  {
    "text": "is the company that you buy from so this is Amazon or preda major but for these Merchants to be able to",
    "start": "236220",
    "end": "243659"
  },
  {
    "text": "accept card payments from a card Association like Mastercard or VISA they",
    "start": "243659",
    "end": "249299"
  },
  {
    "text": "need to have an account with an acquiring bank so the acquiring bank is simply the bank that holds the money for",
    "start": "249299",
    "end": "255959"
  },
  {
    "text": "the merchant and doesn't know anything about the customer that is trying to to make the purchase uh to get that",
    "start": "255959",
    "end": "262620"
  },
  {
    "text": "answered you will have to be able to put this transaction message into the payments Network",
    "start": "262620",
    "end": "268800"
  },
  {
    "text": "um so we have their MasterCard that's just because darling just supports MasterCard card networks but it can be",
    "start": "268800",
    "end": "274560"
  },
  {
    "text": "Visa or American Express the payments networks role um is to look inside the car transaction",
    "start": "274560",
    "end": "282479"
  },
  {
    "text": "message and see what the primary account number for it is so the gloves which is",
    "start": "282479",
    "end": "288780"
  },
  {
    "text": "which is what we call a pan Which is simply just the the number that is printed on the card so it needs to look",
    "start": "288780",
    "end": "295380"
  },
  {
    "text": "inside see this pan and know where to Route these transactions so which which",
    "start": "295380",
    "end": "301979"
  },
  {
    "text": "card processor it needs to go to based on that information another thing that the payments Network",
    "start": "301979",
    "end": "308699"
  },
  {
    "text": "needs to be able to facilitate is the movement of funds between the using bank and the acquiring bank so when you pay",
    "start": "308699",
    "end": "315479"
  },
  {
    "text": "with your cards obviously money needs to leave your account and end up in the in",
    "start": "315479",
    "end": "321000"
  },
  {
    "text": "the merchants account so this movement of funds needs to be facilitated by the payments Network",
    "start": "321000",
    "end": "328400"
  },
  {
    "text": "um and now we've reached the card processor so this is what we're talking about right this is what this uh this",
    "start": "328620",
    "end": "335220"
  },
  {
    "text": "presentation is about so we're going to spend a bit more time here so you notice here that the card processor and using",
    "start": "335220",
    "end": "342000"
  },
  {
    "text": "Bank they're just two separate entities on this slide and the reason for that is that uh some banks don't have their own",
    "start": "342000",
    "end": "351060"
  },
  {
    "text": "card processor um they have this outsourced to another company a third-party company and",
    "start": "351060",
    "end": "358560"
  },
  {
    "text": "startling used to be the same so uh seven years ago when the Sterling Bank uh launched uh didn't want to we didn't",
    "start": "358560",
    "end": "366840"
  },
  {
    "text": "want to embark on this long journey of creating the card processor um so we decided to just go for uh for a",
    "start": "366840",
    "end": "373860"
  },
  {
    "text": "third party company that does that for us um so now Sterling Bank has two card",
    "start": "373860",
    "end": "379080"
  },
  {
    "text": "processor actually because we're still using the old card processor with this third-party company and we also have the",
    "start": "379080",
    "end": "385740"
  },
  {
    "text": "new card processor that half of half of our traffic goes actually through this card processor that we've built that we",
    "start": "385740",
    "end": "392220"
  },
  {
    "text": "are talking about now uh and half of it is just through the old card processor",
    "start": "392220",
    "end": "398520"
  },
  {
    "text": "um so that explains why these two entities that are separated on this slide",
    "start": "398520",
    "end": "403800"
  },
  {
    "text": "um so today we're just going to be talking about the card processor that we've built um",
    "start": "403800",
    "end": "409199"
  },
  {
    "text": "so what is the main role of a card processor so it needs to be able to have",
    "start": "409199",
    "end": "415319"
  },
  {
    "text": "access to the payments Network and as you'll see later on this is not a",
    "start": "415319",
    "end": "420479"
  },
  {
    "text": "trivial uh task um and it also needs to be able to decode these messages that are coming",
    "start": "420479",
    "end": "427020"
  },
  {
    "text": "from the payments Network and verify cryptographic transaction data and the",
    "start": "427020",
    "end": "432840"
  },
  {
    "text": "simplest examples of these cryptographic operations would be the",
    "start": "432840",
    "end": "437940"
  },
  {
    "text": "the PIN verification and the cryptogram validation and which is just a way of",
    "start": "437940",
    "end": "443220"
  },
  {
    "text": "figuring out if the transaction has been tampered with on the way",
    "start": "443220",
    "end": "449220"
  },
  {
    "text": "um but to be able to perform all these operations it needs to hold some secrets",
    "start": "449220",
    "end": "454740"
  },
  {
    "text": "and manage um some secrets of the of the card uh so",
    "start": "454740",
    "end": "459840"
  },
  {
    "text": "things like uh pin the pin block it needs to be able to store that",
    "start": "459840",
    "end": "464940"
  },
  {
    "text": "um and things like CVV and expiry date um and another thing that it can do",
    "start": "464940",
    "end": "472620"
  },
  {
    "text": "um although is not always the case it can hold the account balance so for",
    "start": "472620",
    "end": "477840"
  },
  {
    "text": "example for the old card procedure that we have uh that is going through the third part party company they don't hold",
    "start": "477840",
    "end": "485160"
  },
  {
    "text": "the account balances for us they just make a call to us to understand if the",
    "start": "485160",
    "end": "490199"
  },
  {
    "text": "customer has enough money into their account or not uh and of course for the new conferences we do hold our own",
    "start": "490199",
    "end": "496380"
  },
  {
    "text": "account balances so these are the main things that the card processor needs to be able to do",
    "start": "496380",
    "end": "502199"
  },
  {
    "text": "um and at the using Bank level um business rules can be applied on the car transaction things like does this",
    "start": "502199",
    "end": "509340"
  },
  {
    "text": "customer have enough uh money uh or you know a lot of other projects will be",
    "start": "509340",
    "end": "515279"
  },
  {
    "text": "performed at the audition Bank level um so now that we went through all of",
    "start": "515279",
    "end": "520380"
  },
  {
    "text": "these uh parties involved in a card authorization message let's just go through a very simple example of a card",
    "start": "520380",
    "end": "526620"
  },
  {
    "text": "authorization um so Rob here is not only an excellent coder but he is also a great musician",
    "start": "526620",
    "end": "533880"
  },
  {
    "text": "and his favorite Merchant is Denmark Street so he goes to Dharma Street and",
    "start": "533880",
    "end": "539940"
  },
  {
    "text": "he wants to buy himself yet another very expensive guitar so because it's a very expensive guitar",
    "start": "539940",
    "end": "546779"
  },
  {
    "text": "he can't just tap into the terminal he will have to put his card in uh and enter the pen this is what we call",
    "start": "546779",
    "end": "554100"
  },
  {
    "text": "a chip and pin transaction chip because the card some of you might not know the",
    "start": "554100",
    "end": "559740"
  },
  {
    "text": "car has a chip and pin because he has to enter his his pen",
    "start": "559740",
    "end": "565019"
  },
  {
    "text": "um so what happens with the transaction afterwards it gets packed by the pack by the terminal and sent over to the",
    "start": "565019",
    "end": "572220"
  },
  {
    "text": "acquiring bank system so we have their Barclays we don't know if",
    "start": "572220",
    "end": "577380"
  },
  {
    "text": "Barclays is actually the acquiring bank for Denmark Street but you know you're very welcome Barclays for the free",
    "start": "577380",
    "end": "583380"
  },
  {
    "text": "advertisement so what what Barclays will need to do is well it doesn't know anything about raw because Rob doesn't",
    "start": "583380",
    "end": "589860"
  },
  {
    "text": "have account with with them um so it won't actually put any money",
    "start": "589860",
    "end": "595560"
  },
  {
    "text": "into Denmark Street's account it will send it over to the payments Network so",
    "start": "595560",
    "end": "601560"
  },
  {
    "text": "it will Mark as the cut this card transaction being in flight for Denmark Street and then put it into the network",
    "start": "601560",
    "end": "610140"
  },
  {
    "text": "um so the network in this case is Mastercard because Europe has a MasterCard card",
    "start": "610140",
    "end": "616380"
  },
  {
    "text": "and what monster car will do it will look inside the transaction you will see what is the card number that is printed",
    "start": "616380",
    "end": "623100"
  },
  {
    "text": "on the card um and it will figure out that this",
    "start": "623100",
    "end": "628800"
  },
  {
    "text": "um this transaction needs to be routed so the starlink card process that we've built",
    "start": "628800",
    "end": "635040"
  },
  {
    "text": "um so it reaches the current processor and here you know we're gonna do all of the verifications that we need to do",
    "start": "635040",
    "end": "642120"
  },
  {
    "text": "like the we're going to verify that Rob remember correctly he's been uh and",
    "start": "642120",
    "end": "648300"
  },
  {
    "text": "we're gonna also figure out if um if the transaction has been tampered",
    "start": "648300",
    "end": "653339"
  },
  {
    "text": "with on the way uh you know we're going to also verify other other things here",
    "start": "653339",
    "end": "658920"
  },
  {
    "text": "and and also you know uh business rules",
    "start": "658920",
    "end": "663959"
  },
  {
    "text": "like you know does drop have enough money into uh his account or maybe in",
    "start": "663959",
    "end": "669540"
  },
  {
    "text": "the past Rob has decided that to remove any Temptation from buying more guitars",
    "start": "669540",
    "end": "675120"
  },
  {
    "text": "from Denmark street he decided to just block this this Merchant uh so we're going to verify that here as well uh",
    "start": "675120",
    "end": "682019"
  },
  {
    "text": "we're also gonna do some projects so is this transaction likely to be fraudulent",
    "start": "682019",
    "end": "687060"
  },
  {
    "text": "or not uh so this is what happens uh with a card transaction message this is",
    "start": "687060",
    "end": "692820"
  },
  {
    "text": "this is how it flows for all of these systems that are involved now the question is if it's such a complex job",
    "start": "692820",
    "end": "699899"
  },
  {
    "text": "to build a card processor you know so that entire companies build their business on that why did we even bother",
    "start": "699899",
    "end": "706800"
  },
  {
    "text": "to go for this long journey of building our own card processor",
    "start": "706800",
    "end": "711920"
  },
  {
    "start": "714000",
    "end": "875000"
  },
  {
    "text": "so um there are a few reasons why we decided to uh to embark on this um this project",
    "start": "716399",
    "end": "722459"
  },
  {
    "text": "the the first one of these is innovation so um starling's been innovating in the",
    "start": "722459",
    "end": "728279"
  },
  {
    "text": "the banking space uh since this since it started um and previously",
    "start": "728279",
    "end": "735779"
  },
  {
    "text": "um there were certain restrictions on us being able to um to add new features",
    "start": "735779",
    "end": "741180"
  },
  {
    "text": "um that may be part of the card processing workflow um and so we really wanted to be able to",
    "start": "741180",
    "end": "747540"
  },
  {
    "text": "bring this functionality in-house so we could create new products um where we're in control of",
    "start": "747540",
    "end": "753420"
  },
  {
    "text": "um of them from the moment they leave the uh the MasterCard Network",
    "start": "753420",
    "end": "758519"
  },
  {
    "text": "um and aside that alongside that is time to Market so by bringing this into the",
    "start": "758519",
    "end": "764820"
  },
  {
    "text": "starting ecosystem it means that we can release our card processor as quickly as we can our other services so we do many",
    "start": "764820",
    "end": "771839"
  },
  {
    "text": "releases a day whereas if you use a a third party they obviously have to",
    "start": "771839",
    "end": "777600"
  },
  {
    "text": "prioritize work um depending on the needs of all of their various customers",
    "start": "777600",
    "end": "783839"
  },
  {
    "text": "um we can build new features um very very quickly and release them",
    "start": "783839",
    "end": "789899"
  },
  {
    "text": "based on our own priorities um and if if bugs come up and we can",
    "start": "789899",
    "end": "795540"
  },
  {
    "text": "also fix those very quickly and that brings us on to resiliency",
    "start": "795540",
    "end": "801060"
  },
  {
    "text": "um so when issues do come up again with a third party they have to manage that",
    "start": "801060",
    "end": "807120"
  },
  {
    "text": "incident across all of all of their customers and we can very quickly identify the",
    "start": "807120",
    "end": "814079"
  },
  {
    "text": "problem and release fixes um or or even mitigations on our side",
    "start": "814079",
    "end": "821240"
  },
  {
    "text": "but also there's this uh this fact that MasterCard only give the issuing Bank",
    "start": "821240",
    "end": "826800"
  },
  {
    "text": "seven seconds to respond to a card authorization if you take longer than that then MasterCard will make a",
    "start": "826800",
    "end": "833519"
  },
  {
    "text": "decision on our behalf depending on rules that we have set up with them so by bringing this in-house that gives",
    "start": "833519",
    "end": "839880"
  },
  {
    "text": "us the full seven seconds to respond um whereas using a third party you would generally get",
    "start": "839880",
    "end": "846120"
  },
  {
    "text": "um a much more restricted amount of time to execute our business rules",
    "start": "846120",
    "end": "851279"
  },
  {
    "text": "um and uh finally there's the kind of obvious one which is a long-term cost",
    "start": "851279",
    "end": "857040"
  },
  {
    "text": "saving so by having this in-house it means we don't have to pay contract costs and it means that the interchange",
    "start": "857040",
    "end": "863579"
  },
  {
    "text": "fees uh the MasterCard give us for each transaction we can keep all of those we",
    "start": "863579",
    "end": "869160"
  },
  {
    "text": "don't have to out to give a percentage to a third party so what are the technical challenges on",
    "start": "869160",
    "end": "875579"
  },
  {
    "start": "875000",
    "end": "965000"
  },
  {
    "text": "this um so the first one is that we're going to need some boxes uh sitting in a data",
    "start": "875579",
    "end": "882180"
  },
  {
    "text": "center for this and firstly to connect to the MasterCard Network and also for um for our security purposes",
    "start": "882180",
    "end": "890579"
  },
  {
    "text": "um so we have these physical boxes but we need them to be able to talk to our um our microservices architecture that's",
    "start": "890579",
    "end": "897540"
  },
  {
    "text": "running in the cloud which is where we have all of our you know very fast release cycles and resiliency and all of",
    "start": "897540",
    "end": "904440"
  },
  {
    "text": "that stuff um next to security so we're now going to have to start storing",
    "start": "904440",
    "end": "910860"
  },
  {
    "text": "um sensitive data from our customers that we didn't previously need to store",
    "start": "910860",
    "end": "915899"
  },
  {
    "text": "um previously that was the third party's challenge to store that data securely um there's a huge amount of complexity",
    "start": "915899",
    "end": "922199"
  },
  {
    "text": "in um in building a car processor this is because of the sheer number of permutations that you can get in terms",
    "start": "922199",
    "end": "929220"
  },
  {
    "text": "of types of messages that you have how you have to handle those messages depending on certain jurisdictions and",
    "start": "929220",
    "end": "934260"
  },
  {
    "text": "regulations different parts of the world um we have uh you know mobile wallets",
    "start": "934260",
    "end": "939600"
  },
  {
    "text": "online transactions we're 3D secure as well as terminal based transactions and all of these sorts of things",
    "start": "939600",
    "end": "946980"
  },
  {
    "text": "um and finally we want to make it so that um if customers do encounter issues with card payments and we can very quickly",
    "start": "946980",
    "end": "953399"
  },
  {
    "text": "identify where those issues are occurring um and and understand them quickly uh so",
    "start": "953399",
    "end": "959820"
  },
  {
    "text": "that we can we can fix them if necessary or at least communicate to the customer what's happened",
    "start": "959820",
    "end": "965959"
  },
  {
    "start": "965000",
    "end": "1098000"
  },
  {
    "text": "so what's the starlink technology stack so um I mentioned we have things running",
    "start": "966120",
    "end": "971459"
  },
  {
    "text": "in the cloud so we currently run everything on AWS we were using containers and ec2 instances and but",
    "start": "971459",
    "end": "978899"
  },
  {
    "text": "we're moving stuff over to kubernetes now um we use infrastructure as code so in",
    "start": "978899",
    "end": "985440"
  },
  {
    "text": "the form of terraform for example and our infrastructure team's done a brilliant job of this and really put the",
    "start": "985440",
    "end": "991440"
  },
  {
    "text": "Power into the hands of developers um for for releasing infrastructure changes so um we can now make",
    "start": "991440",
    "end": "998220"
  },
  {
    "text": "infrastructure changes um as quickly as we can and standard service changes",
    "start": "998220",
    "end": "1003620"
  },
  {
    "text": "which is fantastic um our middle tier is um pretty much all Java backed by postgres databases",
    "start": "1003620",
    "end": "1010940"
  },
  {
    "text": "wherever that's needed and communication is um is generally restful but we have",
    "start": "1010940",
    "end": "1016820"
  },
  {
    "text": "some stuff that's also just Proto buff with Nettie um usually for performance reasons and",
    "start": "1016820",
    "end": "1022699"
  },
  {
    "text": "we have a lot of this in our card processor um and finally the the big Mantra of",
    "start": "1022699",
    "end": "1028160"
  },
  {
    "text": "Starling for our technology stack is keeping things simple as you can see this is not not a complicated",
    "start": "1028160",
    "end": "1034579"
  },
  {
    "text": "um long list of hundreds of different Technologies we're very careful about introducing um New pieces of Technology",
    "start": "1034579",
    "end": "1040459"
  },
  {
    "text": "into the um into the ecosystem whenever you do that um you have to spread the knowledge and",
    "start": "1040459",
    "end": "1047178"
  },
  {
    "text": "throughout the engineering team um such that if you do have issues then anyone is able to to solve those",
    "start": "1047179",
    "end": "1054020"
  },
  {
    "text": "problems um and also it often just introduces new point to failure any things that can go",
    "start": "1054020",
    "end": "1059840"
  },
  {
    "text": "wrong um so this this Stacks worked worked perfectly well for us for years",
    "start": "1059840",
    "end": "1066140"
  },
  {
    "text": "um and um so resiliency is often achieved simply through um ensuring that these these restful",
    "start": "1066140",
    "end": "1073160"
  },
  {
    "text": "calls um or a kind of RPC calls are item potent and that means that if a service",
    "start": "1073160",
    "end": "1079640"
  },
  {
    "text": "becomes unavailable um the the Upstream service can just stay synchronously retry for as many",
    "start": "1079640",
    "end": "1085400"
  },
  {
    "text": "times as it wants and not worry about any nefarious effects of a call being",
    "start": "1085400",
    "end": "1090980"
  },
  {
    "text": "made twice so um with all that in mind let's delve into the um the card processor",
    "start": "1090980",
    "end": "1097580"
  },
  {
    "text": "architecture cool so this is the design that you're all been waiting for this is the",
    "start": "1097580",
    "end": "1104000"
  },
  {
    "start": "1098000",
    "end": "1468000"
  },
  {
    "text": "architecture diagram of the card processor um we're gonna divide it into three main",
    "start": "1104000",
    "end": "1109640"
  },
  {
    "text": "parts so we're gonna talk about it individually um so what we have on the left uh is the",
    "start": "1109640",
    "end": "1117200"
  },
  {
    "text": "stalling data center so this is where we keep all of the hardware equipment that",
    "start": "1117200",
    "end": "1122960"
  },
  {
    "text": "we absolutely needed to have to be able to build the card processor and I'm coming back to that one right to the",
    "start": "1122960",
    "end": "1129320"
  },
  {
    "text": "installing data centers in this diagram there are two vpcs in the cloud so this is the what we",
    "start": "1129320",
    "end": "1135919"
  },
  {
    "text": "have in the cloud the one in the middle is called zero trust VPC",
    "start": "1135919",
    "end": "1141440"
  },
  {
    "text": "this is where we perform all of our cryptographic operations so things like",
    "start": "1141440",
    "end": "1147500"
  },
  {
    "text": "the PIN verification or the cryptogram validation this is all uh all happens here",
    "start": "1147500",
    "end": "1154100"
  },
  {
    "text": "um the reason why we call it zero trust and it might be you know a different",
    "start": "1154100",
    "end": "1159860"
  },
  {
    "text": "concept for for other people um we call it zero trust because there's zero trust between the microservices",
    "start": "1159860",
    "end": "1166520"
  },
  {
    "text": "that live in here so for example to be able to communicate between each other",
    "start": "1166520",
    "end": "1172280"
  },
  {
    "text": "to microservices we need to be very explicit and write infrastructure code",
    "start": "1172280",
    "end": "1177799"
  },
  {
    "text": "to say that this communication is allowed another tiny implementation detail on how we've achieved that we use",
    "start": "1177799",
    "end": "1185919"
  },
  {
    "text": "AWS feature um called Knuckles so network access control lists so",
    "start": "1185919",
    "end": "1193700"
  },
  {
    "text": "for example if we were to pick on two microservices in here like MasterCard",
    "start": "1193700",
    "end": "1199400"
  },
  {
    "text": "service and tokenization uh Microsoft MasterCard service",
    "start": "1199400",
    "end": "1204620"
  },
  {
    "text": "um is able to initiate and get responses from the documentation service but the",
    "start": "1204620",
    "end": "1210020"
  },
  {
    "text": "documentation service cannot initiate requests to MasterCard service it can only respond to MasterCard service so",
    "start": "1210020",
    "end": "1216679"
  },
  {
    "text": "every microservices in here has its own submit and we use Knuckles to control",
    "start": "1216679",
    "end": "1222440"
  },
  {
    "text": "the in and out traffic so the zero trust VPC here",
    "start": "1222440",
    "end": "1229520"
  },
  {
    "text": "um is not responsible for making any decisions about what should happen with",
    "start": "1229520",
    "end": "1235100"
  },
  {
    "text": "the truck with the car transaction if it should be approved or not its only role is to gather all of this data to learn",
    "start": "1235100",
    "end": "1242059"
  },
  {
    "text": "more about this car transaction that is currently in flight and send it over to",
    "start": "1242059",
    "end": "1248179"
  },
  {
    "text": "core VPC uh where we have the card processor to be able to make make that",
    "start": "1248179",
    "end": "1254240"
  },
  {
    "text": "decision um so this is the role of the of the core PPC the card procedure that exists",
    "start": "1254240",
    "end": "1260539"
  },
  {
    "text": "in the core VPC is to perform all of these business rules that we've talked",
    "start": "1260539",
    "end": "1265580"
  },
  {
    "text": "about you know does Rob have enough money for another expensive guitar uh you know is this transaction likely to",
    "start": "1265580",
    "end": "1272179"
  },
  {
    "text": "be fraudulent and all of these business rules will be applied here in the core of APC and now let's get back to what we",
    "start": "1272179",
    "end": "1279440"
  },
  {
    "text": "have in the data centers um so we have two different devices uh in",
    "start": "1279440",
    "end": "1286880"
  },
  {
    "text": "the data centers and one uh one uh is called a MIP MasterCard interface",
    "start": "1286880",
    "end": "1292640"
  },
  {
    "text": "processor so where you see the MasterCard logo what that's supposed to represent uh is a device uh called a MIP",
    "start": "1292640",
    "end": "1302600"
  },
  {
    "text": "um and this is what we have from MasterCard to be able to have access to",
    "start": "1302600",
    "end": "1307820"
  },
  {
    "text": "their famous Network uh what normally these devices have are two ethernet ports so one is uh to to to",
    "start": "1307820",
    "end": "1316580"
  },
  {
    "text": "give access to get access to the payments Network um and the eaching bank normally does not have access to that so we do not",
    "start": "1316580",
    "end": "1323120"
  },
  {
    "text": "have access to that one and they're not the internet port to be just plugged in into the card processor itself",
    "start": "1323120",
    "end": "1329960"
  },
  {
    "text": "um so these are the devices that we get that all of these real-time card or",
    "start": "1329960",
    "end": "1335960"
  },
  {
    "text": "transition messages this is where this these are flying from um another device type that we have in",
    "start": "1335960",
    "end": "1342260"
  },
  {
    "text": "the data centers are the HSM so Hardware security models and people that work in",
    "start": "1342260",
    "end": "1349039"
  },
  {
    "text": "Financial Service services are already very familiar with these and we use them in many different ways at",
    "start": "1349039",
    "end": "1356900"
  },
  {
    "text": "Starling but in the context of the card processor what we use them for is to get",
    "start": "1356900",
    "end": "1362480"
  },
  {
    "text": "help with cryptographic operations like uh the pin",
    "start": "1362480",
    "end": "1367520"
  },
  {
    "text": "pin block verification or the cryptogram uh validation",
    "start": "1367520",
    "end": "1372820"
  },
  {
    "text": "these hsms that we have they get they can be very generic but the ones that we have for the card processor they're very",
    "start": "1372820",
    "end": "1379760"
  },
  {
    "text": "specific they're so specific that you can literally send the command to the hsms to you know verify the pin block",
    "start": "1379760",
    "end": "1387860"
  },
  {
    "text": "when with the right arguments the HSM will just uh to verify it without you",
    "start": "1387860",
    "end": "1393320"
  },
  {
    "text": "having to decrypt the pin block and look at the pin and clear this is all this",
    "start": "1393320",
    "end": "1398419"
  },
  {
    "text": "all happens inside the device itself and",
    "start": "1398419",
    "end": "1403460"
  },
  {
    "text": "uh another uh important feature of the hsms is that they secure they safely",
    "start": "1403460",
    "end": "1410900"
  },
  {
    "text": "store the encryption encryption keys so they have all of these different sensors on them so that if they detect that",
    "start": "1410900",
    "end": "1418159"
  },
  {
    "text": "they're being moved from the rack they will self-destruct and wipe the encryption keys so that way you can just",
    "start": "1418159",
    "end": "1424760"
  },
  {
    "text": "be um uh be certain that your your encryption keys are just very safely",
    "start": "1424760",
    "end": "1431539"
  },
  {
    "text": "stored um cool so this this is about the Starling",
    "start": "1431539",
    "end": "1438020"
  },
  {
    "text": "data centers we have obviously multiple data centers across um across UK and we multiple map devices",
    "start": "1438020",
    "end": "1447200"
  },
  {
    "text": "and multiple hsms for redundancy and resiliency but because we've mentioned these",
    "start": "1447200",
    "end": "1453919"
  },
  {
    "text": "commands that we can just send to the hsms um let's let's get a little bit into",
    "start": "1453919",
    "end": "1460220"
  },
  {
    "text": "more detail about uh these uh PIN verification and cryptogram validation commands that we've talked about",
    "start": "1460220",
    "end": "1468140"
  },
  {
    "start": "1468000",
    "end": "1591000"
  },
  {
    "text": "foreign so um when we talk about uh pins",
    "start": "1468140",
    "end": "1474500"
  },
  {
    "text": "um you'll normally think about uh just uh you know the four numbers that you put in um or sometimes more if you're in",
    "start": "1474500",
    "end": "1480260"
  },
  {
    "text": "other parts of the world um when we send pin blocks around",
    "start": "1480260",
    "end": "1485840"
  },
  {
    "text": "um that when they're in the clear they're actually in this pin block format",
    "start": "1485840",
    "end": "1490940"
  },
  {
    "text": "um and the the reason for the pin block is to cryptographically tie the pin",
    "start": "1490940",
    "end": "1497600"
  },
  {
    "text": "itself to the customer's account number that's on the front of the card the reason for doing that is that um if",
    "start": "1497600",
    "end": "1504020"
  },
  {
    "text": "you're using a symmetric key for um encrypting the pin you don't want two different customers having the same pin",
    "start": "1504020",
    "end": "1509120"
  },
  {
    "text": "you encrypt them and then you could see that they're the same um So to avoid that we have pin blocks",
    "start": "1509120",
    "end": "1517220"
  },
  {
    "text": "um and there are a few different uh different formats of pin block the one that I'm going to talk about is the one",
    "start": "1517220",
    "end": "1522320"
  },
  {
    "text": "that we use which is um ISO zero format um and it's a very simple algorithm to",
    "start": "1522320",
    "end": "1527900"
  },
  {
    "text": "do this so we start off with um with this here so this is just the length of the PIN followed by the pin itself",
    "start": "1527900",
    "end": "1534020"
  },
  {
    "text": "um and then some some padding of 15s this is all interpreted as hexadecimal",
    "start": "1534020",
    "end": "1539380"
  },
  {
    "text": "and then we take the customers account number in the",
    "start": "1539380",
    "end": "1545900"
  },
  {
    "text": "right 12 or 8 most digits on that um and and left pad that with zeros",
    "start": "1545900",
    "end": "1551960"
  },
  {
    "text": "um the last digit of the Pan actually which is a one here is um known as a",
    "start": "1551960",
    "end": "1557360"
  },
  {
    "text": "loon check digit so this is actually um based on an algorithm to to validate",
    "start": "1557360",
    "end": "1563179"
  },
  {
    "text": "the uh that the pan has been entered correctly it's not really for security reasons um historically it was just to",
    "start": "1563179",
    "end": "1569000"
  },
  {
    "text": "make sure that the customer hadn't made a mistake entering their um their card number uh but it's just kind of an",
    "start": "1569000",
    "end": "1574220"
  },
  {
    "text": "interesting little fact there um um and to create a pin block we just take these two",
    "start": "1574220",
    "end": "1579860"
  },
  {
    "text": "um two elements and we xor them to uh to get the pin block so when we're",
    "start": "1579860",
    "end": "1585320"
  },
  {
    "text": "when we talk about the encrypted pin and passing the encrypted pin around we're actually talking about this uh this pin",
    "start": "1585320",
    "end": "1591200"
  },
  {
    "start": "1591000",
    "end": "1663000"
  },
  {
    "text": "block so um how does the chip actually talk to",
    "start": "1591200",
    "end": "1596299"
  },
  {
    "text": "the terminal um so the when when your card comes in contact with the terminal",
    "start": "1596299",
    "end": "1602600"
  },
  {
    "text": "um or within a certain distance of his contactless the the terminal induces a",
    "start": "1602600",
    "end": "1607880"
  },
  {
    "text": "current on the chip and the chip has a very small operating system that runs on it",
    "start": "1607880",
    "end": "1613400"
  },
  {
    "text": "um and that operating system supports about a bunch of applications which are effectively functions uh just take",
    "start": "1613400",
    "end": "1619880"
  },
  {
    "text": "um some bits as argument and spit some out um and so the terminal can select one of",
    "start": "1619880",
    "end": "1625460"
  },
  {
    "text": "these applications to run and provide information based on on what the customer's entered for example",
    "start": "1625460",
    "end": "1631100"
  },
  {
    "text": "um and it also needs to agree a verification method with the um with the chip so um they will effectively compare",
    "start": "1631100",
    "end": "1637940"
  },
  {
    "text": "what verification methods they support and there's an order of verification methods that we've programmed onto our",
    "start": "1637940",
    "end": "1643400"
  },
  {
    "text": "chip in order of preference so an example for verifying the card holder would be for them to enter a pin",
    "start": "1643400",
    "end": "1651140"
  },
  {
    "text": "um and and then the terminal is going to request a decision and ultimately send usually send that authorization through",
    "start": "1651140",
    "end": "1658100"
  },
  {
    "text": "to um to the acquiring bank and and eventually onto us through MasterCard",
    "start": "1658100",
    "end": "1664720"
  },
  {
    "start": "1663000",
    "end": "1739000"
  },
  {
    "text": "so um there are actually two different uh different versions of your PIN",
    "start": "1664720",
    "end": "1670159"
  },
  {
    "text": "um there's the one that's stored on your card itself so there's also a secure element on your card",
    "start": "1670159",
    "end": "1676159"
  },
  {
    "text": "um similar to a very very tiny little HSM on your card um and uh there's the online pin",
    "start": "1676159",
    "end": "1683659"
  },
  {
    "text": "but uh we'll start with the online PIN verification so um this actually happens in in quite a",
    "start": "1683659",
    "end": "1689360"
  },
  {
    "text": "lot of cases um because the the terminal only go online based on certain rules that we've",
    "start": "1689360",
    "end": "1695720"
  },
  {
    "text": "set on the card so that might be because it's above a certain value or it's um we",
    "start": "1695720",
    "end": "1700760"
  },
  {
    "text": "deemed to be higher risk because it's cash related for example and withdrawing cash in ATM",
    "start": "1700760",
    "end": "1706760"
  },
  {
    "text": "um but a lot of the time it will just validate the pin offline so that means that uh it's going to start by getting",
    "start": "1706760",
    "end": "1712640"
  },
  {
    "text": "the public key from the card um it then takes uh the pin that the",
    "start": "1712640",
    "end": "1718100"
  },
  {
    "text": "customers entered into the terminal and creates a pin block from it using the account number um it encrypts that using public key",
    "start": "1718100",
    "end": "1724220"
  },
  {
    "text": "that it got from the card and then it issues a verify command um which is where the the card is going",
    "start": "1724220",
    "end": "1729559"
  },
  {
    "text": "to compare that with the um pin block I think it's done the private key uh on the stored on the secure",
    "start": "1729559",
    "end": "1737120"
  },
  {
    "text": "elements thank you so um online pin validation is when we",
    "start": "1737120",
    "end": "1744559"
  },
  {
    "start": "1739000",
    "end": "1827000"
  },
  {
    "text": "actually receive the pin block ourselves and we validate it with the pin block",
    "start": "1744559",
    "end": "1749600"
  },
  {
    "text": "we've got stored for that customer um and really this process just involves",
    "start": "1749600",
    "end": "1755000"
  },
  {
    "text": "passing around the pin block through different parties encrypted with different keys so we start off with the",
    "start": "1755000",
    "end": "1762320"
  },
  {
    "text": "um the terminal that encrypts the pin block under a key that um is owned by the acquiring Bank",
    "start": "1762320",
    "end": "1769059"
  },
  {
    "text": "the acquiring Bank receives that and then it's going to translate it under a different key and that's a key that they",
    "start": "1769760",
    "end": "1776120"
  },
  {
    "text": "are acquiring bank will have exchanged with MasterCard so MasterCard receive uh received the",
    "start": "1776120",
    "end": "1783919"
  },
  {
    "text": "pinball encrypted on the acquirers key and we've also done an exchange with MasterCard with our own issuer key so",
    "start": "1783919",
    "end": "1790100"
  },
  {
    "text": "masks I'll then translate the pin block to be encrypted under that key um which is how we receive it",
    "start": "1790100",
    "end": "1796640"
  },
  {
    "text": "um and we also have the customers pen block stored um under a separate key so we can take",
    "start": "1796640",
    "end": "1801740"
  },
  {
    "text": "these two things we can take the pin block that we've got stored under key B and the one that we got from MasterCard",
    "start": "1801740",
    "end": "1809720"
  },
  {
    "text": "send them into the HSM and tell ask the HSM to tell us whether they they match",
    "start": "1809720",
    "end": "1815000"
  },
  {
    "text": "or not so the HSM does its uh decryption and comparison",
    "start": "1815000",
    "end": "1820179"
  },
  {
    "text": "all inside it's secure housing so we never have to have to see it in the",
    "start": "1820179",
    "end": "1825980"
  },
  {
    "text": "clear anywhere the application cryptogram um is an",
    "start": "1825980",
    "end": "1832640"
  },
  {
    "start": "1827000",
    "end": "1904000"
  },
  {
    "text": "element of of Chip transactions which um is to protect against tampering",
    "start": "1832640",
    "end": "1839179"
  },
  {
    "text": "so um the way this works is that the terminal will ask the card to generate an application cryptogram",
    "start": "1839179",
    "end": "1846020"
  },
  {
    "text": "um so it'll pass its certain information um that's on the transaction such as the transaction amounts for example",
    "start": "1846020",
    "end": "1853640"
  },
  {
    "text": "um and the card's going to take that information and encrypt it using another key that's stored on its secure element",
    "start": "1853640",
    "end": "1860899"
  },
  {
    "text": "um and the terminal then packages all of that up um and sends it through to us so we received the transaction details",
    "start": "1860899",
    "end": "1867380"
  },
  {
    "text": "um and we also received this encrypted block that we call the cryptogram um which contains the same details",
    "start": "1867380",
    "end": "1874640"
  },
  {
    "text": "um and so we can send that to the HSM and it will compare the values and we can decline if any of those values don't",
    "start": "1874640",
    "end": "1880940"
  },
  {
    "text": "match which indicates that it's been tampered with there's also a transaction counter in this block",
    "start": "1880940",
    "end": "1887360"
  },
  {
    "text": "um that we can use to prevent replay attacks so that's kind of the some of the the",
    "start": "1887360",
    "end": "1894919"
  },
  {
    "text": "main sort of cryptographic operations that we perform as a card",
    "start": "1894919",
    "end": "1900020"
  },
  {
    "text": "processor so let's head back to the the architecture",
    "start": "1900020",
    "end": "1905260"
  },
  {
    "start": "1904000",
    "end": "2154000"
  },
  {
    "text": "cool so um now that you've dealt in the fascinating world of hsms we're going to",
    "start": "1905260",
    "end": "1911600"
  },
  {
    "text": "go back to the zero trust VPC and what we have in there um and we're going to talk about what's",
    "start": "1911600",
    "end": "1917299"
  },
  {
    "text": "happening in each one of the microservices that live in here um so the first two ones",
    "start": "1917299",
    "end": "1923960"
  },
  {
    "text": "um the two ad services that we have there are MasterCard service and HSM",
    "start": "1923960",
    "end": "1929480"
  },
  {
    "text": "service so MasterCard service um its main role is to accept messages",
    "start": "1929480",
    "end": "1938299"
  },
  {
    "text": "from the maps and be able to decode them",
    "start": "1938299",
    "end": "1943419"
  },
  {
    "text": "card payments are globally have to comply to a specific format called ISO",
    "start": "1943419",
    "end": "1950679"
  },
  {
    "text": "8583 so all of these card payments are are coming into this format and card",
    "start": "1950679",
    "end": "1957860"
  },
  {
    "text": "Association have different implementation of this so Visa will have its own implementation in MasterCard",
    "start": "1957860",
    "end": "1963919"
  },
  {
    "text": "will have a different implementation um now for MasterCard specification uh what",
    "start": "1963919",
    "end": "1971000"
  },
  {
    "text": "we had to do here in this MasterCard service is to decode all of these messages according to that manual and it",
    "start": "1971000",
    "end": "1977899"
  },
  {
    "text": "was well just as a side note it was really hard work because this manual has over a thousand pages that we had to",
    "start": "1977899",
    "end": "1984860"
  },
  {
    "text": "read understand and then Implement um so",
    "start": "1984860",
    "end": "1990140"
  },
  {
    "text": "a lot of hard work went into this MasterCard service but how does the market MasterCard service even gets the",
    "start": "1990140",
    "end": "1996799"
  },
  {
    "text": "data from the map um so what we have here um there's this tcpip connection so it's",
    "start": "1996799",
    "end": "2003519"
  },
  {
    "text": "just um streams of bias just flowing through here and this is not all going over the",
    "start": "2003519",
    "end": "2011200"
  },
  {
    "text": "Internet so what we have here there are VPN tunnels over a private Network so we",
    "start": "2011200",
    "end": "2016480"
  },
  {
    "text": "use AWS Direct Connect um and that's why we don't have to send",
    "start": "2016480",
    "end": "2023140"
  },
  {
    "text": "the the data over the Internet we just use a private Network so these are all encrypted you know",
    "start": "2023140",
    "end": "2029320"
  },
  {
    "text": "stream of Rights going into the MasterCard service which will then decode all these card authorization",
    "start": "2029320",
    "end": "2034779"
  },
  {
    "text": "messages according to the manual that I've just mentioned that it's uh over a",
    "start": "2034779",
    "end": "2040360"
  },
  {
    "text": "thousand pages long so the decoding will just transform all of these you know bytes into a very simple Java object",
    "start": "2040360",
    "end": "2049419"
  },
  {
    "text": "um that will represent the card transaction that will just be passed over inside this VPC so this is",
    "start": "2049419",
    "end": "2055960"
  },
  {
    "text": "Mastercard service and HSM service just acts as a proxy client",
    "start": "2055960",
    "end": "2061780"
  },
  {
    "text": "to send commands to the hsms and now you know all about these commands that we're sending them to them so it's the PIN",
    "start": "2061780",
    "end": "2069398"
  },
  {
    "text": "verification and the cryptogram validation um and it's",
    "start": "2069399",
    "end": "2075220"
  },
  {
    "text": "it's the same principle was the MasterCard service there's also tcpip uh connection between them and we use Neti",
    "start": "2075220",
    "end": "2083679"
  },
  {
    "text": "uh Neti o framework to uh to get help with managing all of these Network",
    "start": "2083679",
    "end": "2088720"
  },
  {
    "text": "messages that are coming from from the Mastercard or from uh from the maps or from the hsms and another thing about",
    "start": "2088720",
    "end": "2096460"
  },
  {
    "text": "the HSM service is to be able to send all these commands to the hsms it will need",
    "start": "2096460",
    "end": "2102520"
  },
  {
    "text": "um well it will need specific data like the pin block the encrypted pin block or",
    "start": "2102520",
    "end": "2107980"
  },
  {
    "text": "you know the the track data and so on so um it can it doesn't store doesn't have",
    "start": "2107980",
    "end": "2114520"
  },
  {
    "text": "a database so it will have to go to some other services to get these uh the secrets from",
    "start": "2114520",
    "end": "2121180"
  },
  {
    "text": "um and you'll see that this is done um only if HSM service holds some access",
    "start": "2121180",
    "end": "2127060"
  },
  {
    "text": "tickets that it got from other services and if only those tickets are valid it will be able to get this data from the",
    "start": "2127060",
    "end": "2133900"
  },
  {
    "text": "the the safe uh services and be able to perform its commands so this is all",
    "start": "2133900",
    "end": "2141160"
  },
  {
    "text": "about the edge services that we have now let's look what happens next after we've decoded a car transaction message coming",
    "start": "2141160",
    "end": "2148119"
  },
  {
    "text": "from from the map um what happens next to the car transaction",
    "start": "2148119",
    "end": "2153960"
  },
  {
    "text": "so um the next step in the process is to gather the um the results of the",
    "start": "2155040",
    "end": "2160920"
  },
  {
    "text": "cryptographic validation um so once the MasterCard service has decoded the message",
    "start": "2160920",
    "end": "2167260"
  },
  {
    "text": "um the first thing that it does is it goes to the tokenization service to um tokenize the customer account number",
    "start": "2167260",
    "end": "2173200"
  },
  {
    "text": "into a unique ID um and it does this using a hash",
    "start": "2173200",
    "end": "2178900"
  },
  {
    "text": "function and the reason is is just so that we were passing around um something other than the account number and between the other services",
    "start": "2178900",
    "end": "2185200"
  },
  {
    "text": "just as an extra extra layer of security so um the uh the MasterCard service takes",
    "start": "2185200",
    "end": "2192700"
  },
  {
    "text": "that information plus what it got from the MasterCard Network sends it to this validator service and this validator",
    "start": "2192700",
    "end": "2199119"
  },
  {
    "text": "service is going to create the access tickets um that Joanna mentioned to send onto",
    "start": "2199119",
    "end": "2204640"
  },
  {
    "text": "the HSM service to be able to validate the cryptographic data on the transaction",
    "start": "2204640",
    "end": "2209740"
  },
  {
    "text": "the the validator is going to get those results back and it's going to package them up and send them on to the next",
    "start": "2209740",
    "end": "2215260"
  },
  {
    "text": "step to execute the business rules it very deliberately does not make any decisions",
    "start": "2215260",
    "end": "2220660"
  },
  {
    "text": "um on what to do with the transactions at this stage um it's it's just a dumb kind of data",
    "start": "2220660",
    "end": "2227320"
  },
  {
    "text": "and and validation results collector um and so um so the next thing that",
    "start": "2227320",
    "end": "2234520"
  },
  {
    "text": "needs to happen is the HSM service is going to need to get the data that it requires to perform that crypto",
    "start": "2234520",
    "end": "2240640"
  },
  {
    "text": "validation so that it can sends the results back so let's talk about that",
    "start": "2240640",
    "end": "2247560"
  },
  {
    "start": "2247000",
    "end": "2343000"
  },
  {
    "text": "cool so these are the microservices that hold the secrets the card Secrets like",
    "start": "2249220",
    "end": "2254560"
  },
  {
    "text": "the pan or the pin block or track safe track safe is just um CVV and expiry",
    "start": "2254560",
    "end": "2260619"
  },
  {
    "text": "date um so these three microservices they all",
    "start": "2260619",
    "end": "2265900"
  },
  {
    "text": "store these secrets and they're just whole simple pairs of a zero trust uid",
    "start": "2265900",
    "end": "2271720"
  },
  {
    "text": "and whatever secret it needs to store a zero trust uid is simply just a hashtag",
    "start": "2271720",
    "end": "2277240"
  },
  {
    "text": "a hash function of the of the pan and",
    "start": "2277240",
    "end": "2283240"
  },
  {
    "text": "for example for the pan save you will have the zero trust uid and the pan for the pin safe you will have the zero",
    "start": "2283240",
    "end": "2288640"
  },
  {
    "text": "trust uid and the encrypted pin block and",
    "start": "2288640",
    "end": "2295060"
  },
  {
    "text": "the way this works um what these microservices need to do besides storing this it also needs to be",
    "start": "2295240",
    "end": "2302320"
  },
  {
    "text": "able to return um the secrets to HSM service but it can only they can only do that if HSM",
    "start": "2302320",
    "end": "2309040"
  },
  {
    "text": "Service uh is surpassing um a valid ticket so they will all go",
    "start": "2309040",
    "end": "2314560"
  },
  {
    "text": "before returning any data through the HSM service they will go to the tokenization service who actually",
    "start": "2314560",
    "end": "2320619"
  },
  {
    "text": "created these tickets to validate them so only only if these tickets are valid",
    "start": "2320619",
    "end": "2325900"
  },
  {
    "text": "it will return to the data into the HSM service to be able to then send the",
    "start": "2325900",
    "end": "2331180"
  },
  {
    "text": "commands to the HSM service um but let's look in a little bit more",
    "start": "2331180",
    "end": "2336700"
  },
  {
    "text": "detail um on how these are access ticketing the system works",
    "start": "2336700",
    "end": "2343200"
  },
  {
    "start": "2343000",
    "end": "2489000"
  },
  {
    "text": "so um this ticketing system Really Works hand in hand with the um what we're calling the zero trust",
    "start": "2345280",
    "end": "2351640"
  },
  {
    "text": "um model um provides so each of these Services has its own subnet and we have to Define",
    "start": "2351640",
    "end": "2360460"
  },
  {
    "text": "Ingress and egress rules on both sides of the conversation in order for them to be able to talk to each other",
    "start": "2360460",
    "end": "2366520"
  },
  {
    "text": "um so the validator is going to need to create these access tickets um",
    "start": "2366520",
    "end": "2372220"
  },
  {
    "text": "to uh for the HSN proxy to be able to to get the data out",
    "start": "2372220",
    "end": "2377740"
  },
  {
    "text": "um so it creates those tickets and sends them on but the 187 proxy itself",
    "start": "2377740",
    "end": "2383260"
  },
  {
    "text": "um does not have these Ingress uh  rules um so it cannot reach the tokenization",
    "start": "2383260",
    "end": "2389320"
  },
  {
    "text": "as at all um so the tokenization service has a number of different servlets that it",
    "start": "2389320",
    "end": "2395800"
  },
  {
    "text": "exposes on different ports um and one of those is for Ticket creation and a separate one for",
    "start": "2395800",
    "end": "2402220"
  },
  {
    "text": "validation so we can allow the crypto validator just to reach the creation port and the HSN proxy is blocked from",
    "start": "2402220",
    "end": "2409599"
  },
  {
    "text": "from reaching either so um if you are here for example if she was upset with me about something maybe",
    "start": "2409599",
    "end": "2416260"
  },
  {
    "text": "because I'm spending too much time playing guitar and not enough time working",
    "start": "2416260",
    "end": "2421780"
  },
  {
    "text": "um she tries to Steal My Account Details so um if she were to somehow manage to",
    "start": "2421780",
    "end": "2427300"
  },
  {
    "text": "get onto um the HSM proxy box um she she could actually curl some of",
    "start": "2427300",
    "end": "2434619"
  },
  {
    "text": "the endpoints on the safes but she wouldn't be able to create a ticket to get access to that information",
    "start": "2434619",
    "end": "2442140"
  },
  {
    "text": "um and uh if she were to um breach the one of the safe boxes",
    "start": "2442540",
    "end": "2448839"
  },
  {
    "text": "um again she could curl those endpoints but this the the safe boxes can only validate tickets they can't create them",
    "start": "2448839",
    "end": "2455440"
  },
  {
    "text": "they are blocked there's no rules um for them to be able to do so um",
    "start": "2455440",
    "end": "2461020"
  },
  {
    "text": "and uh so what will happen is the validator can create the ticket send that onto the HSN proxy all that can do",
    "start": "2461020",
    "end": "2467020"
  },
  {
    "text": "is pass it on to the next step to get the data out it saves will call tokenization to validate that ticket and",
    "start": "2467020",
    "end": "2473260"
  },
  {
    "text": "return the data back if it is valid and these tickets also have a very limited lifespan so they will only be validated",
    "start": "2473260",
    "end": "2480700"
  },
  {
    "text": "successfully um if uh if they're validated a very short time after creation",
    "start": "2480700",
    "end": "2487859"
  },
  {
    "text": "so let's go back to the architecture cool so we're now kind of done with the",
    "start": "2490300",
    "end": "2495460"
  },
  {
    "text": "zero trust VPC we said that you know the main role of this VPC is to perform cryptographic operations and gather",
    "start": "2495460",
    "end": "2503560"
  },
  {
    "text": "um more information about this car transaction that is in flight but it will never make any decisions about if",
    "start": "2503560",
    "end": "2510579"
  },
  {
    "text": "this car transaction will be approved or not so crypto validator here gather all the data and we'll pass it on",
    "start": "2510579",
    "end": "2517660"
  },
  {
    "text": "to the core view PC where you see their code processor to make that decision",
    "start": "2517660",
    "end": "2523480"
  },
  {
    "text": "so this is where we apply all of those uh business rules like this Rob really have enough money increase his account",
    "start": "2523480",
    "end": "2530740"
  },
  {
    "text": "for this new guitar um and also you know it has has he blocked maybe transaction to Denmark",
    "start": "2530740",
    "end": "2537760"
  },
  {
    "text": "Street um and all of these maybe other fraud checks that we we have to perform",
    "start": "2537760",
    "end": "2543520"
  },
  {
    "text": "they're performed here in the card processor um and also like a tiny implementation",
    "start": "2543520",
    "end": "2548560"
  },
  {
    "text": "detail here um with what we've built in-house is just the business rules engine so we",
    "start": "2548560",
    "end": "2554920"
  },
  {
    "text": "didn't use anything that uh that was already there it's just a very lightweight business rules engine that",
    "start": "2554920",
    "end": "2560380"
  },
  {
    "text": "we built here uh to help us with that [Music] um I think that's about it that's all you",
    "start": "2560380",
    "end": "2567579"
  },
  {
    "text": "need to know about the the architecture uh your your file you probably found out uh um a bit like maybe you didn't want",
    "start": "2567579",
    "end": "2574839"
  },
  {
    "text": "to find out that much about the robespending habits but um yeah this is it and let's look at some technical",
    "start": "2574839",
    "end": "2580900"
  },
  {
    "text": "highlights cool so um it goes back to the",
    "start": "2580900",
    "end": "2587560"
  },
  {
    "start": "2584000",
    "end": "2689000"
  },
  {
    "text": "challenges that we mentioned earlier um so as we said um this uh bridging between",
    "start": "2587560",
    "end": "2592900"
  },
  {
    "text": "um a Data Center and a nice modern Cloud stack um was was achieved using AWS Direct",
    "start": "2592900",
    "end": "2598599"
  },
  {
    "text": "Connect and tandem with a VPN tunnel so that we can have this nice secure private Network to communicate between",
    "start": "2598599",
    "end": "2605380"
  },
  {
    "text": "the two but continue um releasing stuff very very rapidly in our Cloud environment",
    "start": "2605380",
    "end": "2611920"
  },
  {
    "text": "um and then um using the security features in AWS to",
    "start": "2611920",
    "end": "2617260"
  },
  {
    "text": "achieve our kind of uh zero trust model um has been really interesting and",
    "start": "2617260",
    "end": "2624460"
  },
  {
    "text": "especially um in combination with this kind of ticketing system that we've developed um we think that's a really nice kind of",
    "start": "2624460",
    "end": "2630880"
  },
  {
    "text": "robust way of protecting our data assets um and finally",
    "start": "2630880",
    "end": "2636520"
  },
  {
    "text": "um this separation of the data Gathering aspect of things from the business logic has worked really well so um this means",
    "start": "2636520",
    "end": "2643839"
  },
  {
    "text": "that when we do have issues or we have um kind of customers asking us why a",
    "start": "2643839",
    "end": "2649180"
  },
  {
    "text": "particular transaction was declined for example we know that there's just one place we need to go and look and that's",
    "start": "2649180",
    "end": "2654339"
  },
  {
    "text": "that's on our business logic side on the core VPC and we can see the the steps that it",
    "start": "2654339",
    "end": "2661480"
  },
  {
    "text": "took through our workflow engine um and the zero trust side of things kind of just sits there um and does its",
    "start": "2661480",
    "end": "2668380"
  },
  {
    "text": "crypto stuff and kind of just works so we don't really have to have to touch that um at all",
    "start": "2668380",
    "end": "2674260"
  },
  {
    "text": "um which is great we don't have to look in loads of different places when we're trying to debug these things so",
    "start": "2674260",
    "end": "2680319"
  },
  {
    "text": "um that brings us to the end thank you very much for watching um and uh we have some time for",
    "start": "2680319",
    "end": "2686500"
  },
  {
    "text": "questions thank you",
    "start": "2686500",
    "end": "2690660"
  },
  {
    "start": "2689000",
    "end": "2910000"
  },
  {
    "text": "we'll have time for one or two questions my um you both did a great job replying the",
    "start": "2693579",
    "end": "2700660"
  },
  {
    "text": "questions in the chat so I asked start with one question I'd like to explore more holiday because you mentioned about",
    "start": "2700660",
    "end": "2707380"
  },
  {
    "text": "a lot of microservices that you run in production which tools are techniques you you use to do a preservability of",
    "start": "2707380",
    "end": "2714040"
  },
  {
    "text": "those microservices running in production",
    "start": "2714040",
    "end": "2717780"
  },
  {
    "text": "okay I shall do that um well I can tell you about the stack that",
    "start": "2719079",
    "end": "2725140"
  },
  {
    "text": "we're using uh we use Prometheus you know for our metrics and then we use",
    "start": "2725140",
    "end": "2730359"
  },
  {
    "text": "grafana for dashboards um yeah I guess that would be it I don't",
    "start": "2730359",
    "end": "2737200"
  },
  {
    "text": "know if there's more to add to that yeah we um Prometheus",
    "start": "2737200",
    "end": "2743260"
  },
  {
    "text": "um metrics is what we use for alerting and so on now obviously we use some AWS",
    "start": "2743260",
    "end": "2748599"
  },
  {
    "text": "features as well to to alert on if you know some of the",
    "start": "2748599",
    "end": "2754180"
  },
  {
    "text": "um metrics that we have in there um you know largest of anything going wrong",
    "start": "2754180",
    "end": "2759700"
  },
  {
    "text": "okay so we use correlation tracking quite a lot as well which is really really",
    "start": "2759700",
    "end": "2765940"
  },
  {
    "text": "helpful um obviously obviously when you're following the logs but also um we're",
    "start": "2765940",
    "end": "2772359"
  },
  {
    "text": "using starter as well for tracing so that's we've found that really helpful",
    "start": "2772359",
    "end": "2777640"
  },
  {
    "text": "uh with with this kind of architecture for finding where bottlenecks are",
    "start": "2777640",
    "end": "2782920"
  },
  {
    "text": "essentially so you can see all of the the track all of the service calls through all the different layers and",
    "start": "2782920",
    "end": "2787960"
  },
  {
    "text": "where the time is being spent let's see thank you and before jumping for my last question I would invite",
    "start": "2787960",
    "end": "2794079"
  },
  {
    "text": "everyone to join Joanna and Rob in uh in a breakout room session they will be",
    "start": "2794079",
    "end": "2799420"
  },
  {
    "text": "there exploring any topic that you want and the last question to be you talked",
    "start": "2799420",
    "end": "2804520"
  },
  {
    "text": "about a time where you do migration that you're running your solution and also the third party vendor solution I do",
    "start": "2804520",
    "end": "2811780"
  },
  {
    "text": "like to ask how you recognize because you mentioned that I I assumed that from the terminal point",
    "start": "2811780",
    "end": "2819220"
  },
  {
    "text": "of view the payment terminal you'll be a different latency for both services",
    "start": "2819220",
    "end": "2824800"
  },
  {
    "text": "do you have any strategy to Route part of the traffic for one or for another depending especially on the land latency",
    "start": "2824800",
    "end": "2832359"
  },
  {
    "text": "that I cannot control in a third-part provider I mean the routing is done by MasterCard itself so when you set up a",
    "start": "2832359",
    "end": "2840160"
  },
  {
    "text": "card processor with MasterCard you you'll get you'll get that so initially when we had the third party provider",
    "start": "2840160",
    "end": "2846339"
  },
  {
    "text": "that was one setup that we had with MasterCard so and that is based on the",
    "start": "2846339",
    "end": "2851859"
  },
  {
    "text": "card number so the card number and the bin range will tell you exactly what it will go to so there's not nothing that",
    "start": "2851859",
    "end": "2858460"
  },
  {
    "text": "we can do on the fly to Route them to the to the new card processor so for example if you were to move everything",
    "start": "2858460",
    "end": "2866319"
  },
  {
    "text": "if you wanted to move the traffic or always the track to uh to the new card processor what you have to do is reissue",
    "start": "2866319",
    "end": "2872859"
  },
  {
    "text": "all of the cars into the bin that you have set up with MasterCard so that the traffic will be rooted by MasterCard",
    "start": "2872859",
    "end": "2879339"
  },
  {
    "text": "itself to the new card so it's a high cost to do it I see",
    "start": "2879339",
    "end": "2886060"
  },
  {
    "text": "okay thank you so much thank you again for your time and on this presentation was really helpful I took a lot of notes",
    "start": "2886060",
    "end": "2892420"
  },
  {
    "text": "here and see you everyone in the hangout session thanks very much thank you",
    "start": "2892420",
    "end": "2900540"
  },
  {
    "text": "[Music]",
    "start": "2902820",
    "end": "2909110"
  }
]