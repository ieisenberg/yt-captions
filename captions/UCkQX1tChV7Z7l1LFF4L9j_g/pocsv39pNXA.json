[
  {
    "start": "0",
    "end": "183000"
  },
  {
    "text": "[Music]",
    "start": "90",
    "end": "23550"
  },
  {
    "text": "condent security policy uh is a uh new feature in browsers that's currently",
    "start": "24599",
    "end": "31119"
  },
  {
    "text": "supported in uh Chrome Safari and Firefox and there's paral support in",
    "start": "31119",
    "end": "37160"
  },
  {
    "text": "Internet Explorer no we don't boo browser vendors we like we we want to support them all",
    "start": "37160",
    "end": "43480"
  },
  {
    "text": "make them all awesome uh so the goal of content security policy is to to help mitigate uh cross-site scripting",
    "start": "43480",
    "end": "50360"
  },
  {
    "text": "vulnerabilities um if you've built a large website and uh had mean people",
    "start": "50360",
    "end": "55960"
  },
  {
    "text": "come to your site and try to hack it uh you will be familiar with this problem um the general approach for Content",
    "start": "55960",
    "end": "62840"
  },
  {
    "text": "security policy is a bit different from uh other techniques for stopping cross-site scripting so most previous",
    "start": "62840",
    "end": "68680"
  },
  {
    "text": "techniques either focused on like on serers side Frameworks or on like JavaScript escaping uh techniques so",
    "start": "68680",
    "end": "76119"
  },
  {
    "text": "content security policy is a bit different uh in this model what happens is the website declares to the browser a",
    "start": "76119",
    "end": "82600"
  },
  {
    "text": "policy for where its scripts and other resources are expected to come from and",
    "start": "82600",
    "end": "87759"
  },
  {
    "text": "if the website loads resources or scripts from somewhere else the browser blocks it um so the idea is if the",
    "start": "87759",
    "end": "95079"
  },
  {
    "text": "attacker tries to load load his script the his script won't be on the the the",
    "start": "95079",
    "end": "100200"
  },
  {
    "text": "website's policy and the browser will stop it and there'll be no no attack so in that sense it's a a whitelisting",
    "start": "100200",
    "end": "106759"
  },
  {
    "text": "based approach where you Whit list the scripts and content that you know to be good in the world and then things that",
    "start": "106759",
    "end": "112560"
  },
  {
    "text": "aren't on your wh list uh hopefully uh won't be running and things that AR are on your white list will hopefully not",
    "start": "112560",
    "end": "119119"
  },
  {
    "text": "not hack you um it's meant to be a defense in-depth technique so you shouldn't rely on content security policy as your only",
    "start": "119119",
    "end": "125479"
  },
  {
    "text": "line of defense you should do everything you're doing today to protect against cross site scripting you know input",
    "start": "125479",
    "end": "130640"
  },
  {
    "text": "sanitization output escaping all that kind of stuff this is just another layer to help you secure your website uh more",
    "start": "130640",
    "end": "138720"
  },
  {
    "text": "um so as for availability 1.0 content security 1.0 is available today it's in",
    "start": "138720",
    "end": "144800"
  },
  {
    "text": "most major browsers um as I said the support in Internet Explorer is partial and we're hoping an Internet Explorer 11",
    "start": "144800",
    "end": "151280"
  },
  {
    "text": "that they'll uh complete their implementation um there's a 1.1 version which I'll talk about a little bit uh at",
    "start": "151280",
    "end": "157000"
  },
  {
    "text": "the end of the talk and that's under active development right now um and so we're adding some features and ref",
    "start": "157000",
    "end": "162680"
  },
  {
    "text": "finding some things and if you have feedback about content security policy or things you'd like think we could do",
    "start": "162680",
    "end": "168239"
  },
  {
    "text": "better or change that that's great to do as part of the 1.1 effort to to uh do",
    "start": "168239",
    "end": "173599"
  },
  {
    "text": "the next generation of this stuff so I I wanted to first start with",
    "start": "173599",
    "end": "178959"
  },
  {
    "text": "an example of a policy just to uh give you a feel for what this kind of stuff",
    "start": "178959",
    "end": "184159"
  },
  {
    "start": "183000",
    "end": "443000"
  },
  {
    "text": "looks like so the policy is delivered in an hdtp header so the browser requests",
    "start": "184159",
    "end": "190159"
  },
  {
    "text": "your website you send back the HTML then in a in a header along with your HTML you supply the policy so the reason the",
    "start": "190159",
    "end": "197319"
  },
  {
    "text": "policy is supplied in the header is because that's hard for an attacker to forge it's sort of a a good trusted uh",
    "start": "197319",
    "end": "203640"
  },
  {
    "text": "Communication channel to communicate the policy from the server to the to the client and then you can see that the the",
    "start": "203640",
    "end": "209319"
  },
  {
    "text": "policy here is a sequence of directives so there's a default Source directive",
    "start": "209319",
    "end": "214720"
  },
  {
    "text": "which is sort of that's the default so here it says self which means by default",
    "start": "214720",
    "end": "220239"
  },
  {
    "text": "allow allow me to load resources from my own origin from my own website and then you for different types of resources you",
    "start": "220239",
    "end": "227239"
  },
  {
    "text": "can uh be more specific or override the default policy so here in this policy",
    "start": "227239",
    "end": "232280"
  },
  {
    "text": "for images I've said the the source is star which means anything anything goes",
    "start": "232280",
    "end": "238319"
  },
  {
    "text": "and I I've written this because images you know if I I load a malicious image into my page it's not the end of the",
    "start": "238319",
    "end": "244159"
  },
  {
    "text": "world like life is not going to end it's probably going to be you know not ideal it could be like a ugly picture that I",
    "start": "244159",
    "end": "250280"
  },
  {
    "text": "don't like but it's not going to steal my user's data um here uh object this is",
    "start": "250280",
    "end": "255519"
  },
  {
    "text": "like the object tag or the embed tag that you use to load uh plugins so here I've said that I can get it from these",
    "start": "255519",
    "end": "261040"
  },
  {
    "text": "two different media uh hosts or from this CDN and then uh scripts I've",
    "start": "261040",
    "end": "266759"
  },
  {
    "text": "limited it to just this trusted scripts.com domain and so no other scripts can load in my page except if",
    "start": "266759",
    "end": "272400"
  },
  {
    "text": "they come from from this site does that kind of make sense at like a a high level yeah good yeah ah",
    "start": "272400",
    "end": "280080"
  },
  {
    "text": "yes you can actually specify a directory and then it'll say only uh from that directory you can also specify a scheme",
    "start": "280080",
    "end": "287080"
  },
  {
    "text": "or report or that kind of stuff if you leave off the the scheme it sort of picks a good one so if you're over SSL",
    "start": "287080",
    "end": "293759"
  },
  {
    "text": "or https it only allows https if you're over HTTP it'll allow HTTP or https",
    "start": "293759",
    "end": "300120"
  },
  {
    "text": "um but you can you can always qualify it to be more specific if you if you want uh so generally the different SRC",
    "start": "300120",
    "end": "306680"
  },
  {
    "text": "directives correspond to different HTML tags the correspondence isn't perfectly like one to one so like the object",
    "start": "306680",
    "end": "313400"
  },
  {
    "text": "Source means like the object tag and also counts the embed tag because the embed tag and the object tag are very",
    "start": "313400",
    "end": "318880"
  },
  {
    "text": "similar so this is really about like plugins plugins can come from from these sources and like image isn't just the",
    "start": "318880",
    "end": "325759"
  },
  {
    "text": "image tag it also includes like images that you load in your CSS basically generally it's mostly images but also",
    "start": "325759",
    "end": "333960"
  },
  {
    "text": "other yeah uh that's a good question so uh oh",
    "start": "333960",
    "end": "341520"
  },
  {
    "text": "sorry the question is how are all these rules processed is it the like most permissive one works is it the last one",
    "start": "341520",
    "end": "346880"
  },
  {
    "text": "that the browser sees so uh within a given policy the default sets up the",
    "start": "346880",
    "end": "353120"
  },
  {
    "text": "default and then the more specific directives override the default um but",
    "start": "353120",
    "end": "359000"
  },
  {
    "text": "you can also if you were having fun you could send many many policies so like",
    "start": "359000",
    "end": "364520"
  },
  {
    "text": "you could have six headers and have six policies and then something is allowed only if it's allowed by all the policies",
    "start": "364520",
    "end": "371240"
  },
  {
    "text": "so it's a way of tightening things down the because this is a security future generally we air on the side of uh",
    "start": "371240",
    "end": "378479"
  },
  {
    "text": "defaulting towards security so if you're setting multiple policies maybe your server is making a mistake or something",
    "start": "378479",
    "end": "385319"
  },
  {
    "text": "and so we don't we don't want to or maybe one of the policies is coming from the attacker like something weird is going on so we'd be cons we're",
    "start": "385319",
    "end": "390960"
  },
  {
    "text": "conservative and we say well they all have to be have to pass all the policies does that answer your question yes",
    "start": "390960",
    "end": "399599"
  },
  {
    "text": "okay uh so these I mentioned you can control different types of resources",
    "start": "404080",
    "end": "409199"
  },
  {
    "text": "these are all the different kinds of uh resources that you can control I don't know why I put a big",
    "start": "409199",
    "end": "415080"
  },
  {
    "text": "picture of Yoda here oh I think I was thinking about like use the Source but that doesn't",
    "start": "415080",
    "end": "420599"
  },
  {
    "text": "really make a lot of sense anyway I I wanted to focus on uh script source for a moment because",
    "start": "420599",
    "end": "427199"
  },
  {
    "text": "that's that's a like key key directive if you want to block cross-site scripting it's really about scripting",
    "start": "427199",
    "end": "433199"
  },
  {
    "text": "the other stuff is is sort of allows you to fine-tune if you're you're into into the",
    "start": "433199",
    "end": "438599"
  },
  {
    "text": "details so yeah the script Source directive controlling the source of script is really the key to blocking uh",
    "start": "438599",
    "end": "445360"
  },
  {
    "start": "443000",
    "end": "770000"
  },
  {
    "text": "cross-site scripting if you think about it cross-site scripting is really about executing the attacker script there are",
    "start": "445360",
    "end": "451560"
  },
  {
    "text": "other sort of variations of it other ways of thinking about it but in the end what makes a cross-site scripting attack an attack is that the attacker is",
    "start": "451560",
    "end": "458080"
  },
  {
    "text": "executing his script in your page and causing your page to do things it doesn't want to do you know potentially",
    "start": "458080",
    "end": "463919"
  },
  {
    "text": "leaking information or showing things to the user that they shouldn't see or things like that and so the script",
    "start": "463919",
    "end": "470080"
  },
  {
    "text": "Source directive lets you Whit list scripts so list out exactly where the scripts can come from that are allowed",
    "start": "470080",
    "end": "475840"
  },
  {
    "text": "to execute and no other scripts are allowed to execute and",
    "start": "475840",
    "end": "481360"
  },
  {
    "text": "this uh so the idea is you will say I wanted get scripts from my source maybe",
    "start": "481360",
    "end": "486879"
  },
  {
    "text": "you like to use the Ajax apis that Google hosts for jQuery or something and",
    "start": "486879",
    "end": "492199"
  },
  {
    "text": "maybe you have a CDN but that's it so like for example you're probably not going to put the attacker's website on",
    "start": "492199",
    "end": "499000"
  },
  {
    "text": "your list I mean you could yeah so it's space to limited yes there is space",
    "start": "499000",
    "end": "504360"
  },
  {
    "text": "delimited yeah the directives are delimited by semicolons but the individual values for a given directive",
    "start": "504360",
    "end": "510800"
  },
  {
    "text": "are just space delimited yeah yeah picking the syntax was a little bit hairy because you want it to like fit",
    "start": "510800",
    "end": "516039"
  },
  {
    "text": "well in an HTTP header so you and you also want to like fit well in like HTML attributes so we're a little bit shy on",
    "start": "516039",
    "end": "522279"
  },
  {
    "text": "like punctuation yeah so is this one of the",
    "start": "522279",
    "end": "527920"
  },
  {
    "text": "first things you put in your header uh yeah I mean it depends how worried you are about the attacker",
    "start": "527920",
    "end": "534000"
  },
  {
    "text": "injecting different headers generally I don't worry about that too much so it's not super important like what order you",
    "start": "534000",
    "end": "540399"
  },
  {
    "text": "send your headers or where in the header you put put these things because generally generally I would I would take",
    "start": "540399",
    "end": "545640"
  },
  {
    "text": "the view that the headers are going to get delivered fine most of your injection vulnerabilities are going to be in your HTML or in the the body of",
    "start": "545640",
    "end": "552720"
  },
  {
    "text": "your of your response you put that after all your SCS well uh generally HTTP headers get",
    "start": "552720",
    "end": "561200"
  },
  {
    "text": "sent first before like HTML tags so uh if you actually load your scripts that",
    "start": "561200",
    "end": "567040"
  },
  {
    "text": "comes in the body of your response and so that that comes after these directives yeah it it is possible by the",
    "start": "567040",
    "end": "574200"
  },
  {
    "text": "way you don't have to supply it in a header you can supply it in a meta tag but that's not as secure because you",
    "start": "574200",
    "end": "580519"
  },
  {
    "text": "could mess up before you put the meta tag yeah I don't recommend using IP",
    "start": "580519",
    "end": "587279"
  },
  {
    "text": "addresses but you can I mean it's fine you can also mix star and IP addresses",
    "start": "587279",
    "end": "592440"
  },
  {
    "text": "which will do weird things but you know we support it why not yeah so like you saw ear that we",
    "start": "592440",
    "end": "599680"
  },
  {
    "text": "could have like image source star which said give give me images from anywhere well we let you say script Source star",
    "start": "599680",
    "end": "605399"
  },
  {
    "text": "but you might not want to do that that's probably a bad idea because that says I'll take scripts from anywhere it kind",
    "start": "605399",
    "end": "611040"
  },
  {
    "text": "of defeats the point yeah yeah so um I would say the our",
    "start": "611040",
    "end": "617240"
  },
  {
    "text": "general philosophy on this topic is something uh we call the uh priority of",
    "start": "617240",
    "end": "623000"
  },
  {
    "text": "constituencies so that means as a browser vendor different people have competing interests and the question is",
    "start": "623000",
    "end": "628680"
  },
  {
    "text": "how do we balance those competing interests so like uh one person who has a competing interest is the person who",
    "start": "628680",
    "end": "634360"
  },
  {
    "text": "develops develops the browser so people who make browsers and so we're pretty low on the like the priority of",
    "start": "634360",
    "end": "640800"
  },
  {
    "text": "constituencies um somebody like the author so the person who makes the website or the person who supplies the",
    "start": "640800",
    "end": "645959"
  },
  {
    "text": "policy is is pretty high in that priority but even above the author is",
    "start": "645959",
    "end": "651160"
  },
  {
    "text": "the user the user who's actually using the browser so they have the the highest priority of constituency so generally if",
    "start": "651160",
    "end": "658040"
  },
  {
    "text": "a user wants to modify how a website works um as a sort of philosophical",
    "start": "658040",
    "end": "663120"
  },
  {
    "text": "point of view because the user has a higher uh priority of as a constituent",
    "start": "663120",
    "end": "668440"
  },
  {
    "text": "we we view that they should be allowed to do that so this doesn't prevent users from modifying uh scripts that that",
    "start": "668440",
    "end": "674760"
  },
  {
    "text": "website Supply that was sort of a long-winded answer to your",
    "start": "674760",
    "end": "679800"
  },
  {
    "text": "question yeah and related to that so users also have extensions in their browser so this we try really hard to",
    "start": "679839",
    "end": "686560"
  },
  {
    "text": "make it so that the website's policy doesn't interfere with extensions we don't always succeed and if you uh read",
    "start": "686560",
    "end": "694040"
  },
  {
    "text": "people who've given us feedback about content security policy in the past people written blog posts and such",
    "start": "694040",
    "end": "699120"
  },
  {
    "text": "you'll see that they were sad that they deployed CSP on their website and then people's extensions broke and so we",
    "start": "699120",
    "end": "706240"
  },
  {
    "text": "tried harder and now we're better at having CSP not interfere with extensions there was a question yeah so",
    "start": "706240",
    "end": "712560"
  },
  {
    "text": "can you write your extension if you know about this uh you can Although our goal is",
    "start": "712560",
    "end": "721040"
  },
  {
    "text": "that it works automatically that the extension author doesn't have to worry about it so for example we automatically",
    "start": "721040",
    "end": "726800"
  },
  {
    "text": "whitelist um resources loaded from extensions uh we don't we we allow those",
    "start": "726800",
    "end": "732480"
  },
  {
    "text": "Cu uh we believe that they're they reflect the users's",
    "start": "732480",
    "end": "737279"
  },
  {
    "text": "intent these are good questions I'm very excited about these questions yeah um",
    "start": "738800",
    "end": "743959"
  },
  {
    "text": "does the meta tag override the header uh no if you have a header The Meta tag is",
    "start": "743959",
    "end": "749240"
  },
  {
    "text": "ignored and if you have a metat tag the first one is taken and then the rest are just ignored so the the the metat tag is",
    "start": "749240",
    "end": "756160"
  },
  {
    "text": "really for cases where you can't use the header like in a file or",
    "start": "756160",
    "end": "761560"
  },
  {
    "text": "something so what happens when when uh say you try to run a script that that uh isn't listed in the policy so the",
    "start": "763320",
    "end": "771120"
  },
  {
    "start": "770000",
    "end": "1068000"
  },
  {
    "text": "browser refuses it says I refuse to load the script from evil.com because it violates the you know directive that",
    "start": "771120",
    "end": "778000"
  },
  {
    "text": "said only load scripts from self and from like apis or whatever um there's also an event that",
    "start": "778000",
    "end": "784920"
  },
  {
    "text": "gets generated in the Dom so you can listen for that event if you want to see um and then there's also a reporting",
    "start": "784920",
    "end": "792120"
  },
  {
    "text": "mechanism uh over that reports back to the server that I'll explain",
    "start": "792120",
    "end": "797800"
  },
  {
    "text": "later why did I put this here oh yes I remember so okay so this is a script",
    "start": "802440",
    "end": "808800"
  },
  {
    "text": "that comes from a URL right so it's like super clear what the source of this script is it's from my own website I",
    "start": "808800",
    "end": "816279"
  },
  {
    "text": "decided to use angular if I put self in my policy it's clear that this script should execute everyone's on board with",
    "start": "816279",
    "end": "824360"
  },
  {
    "text": "that what about this script where did this script come from",
    "start": "824360",
    "end": "832480"
  },
  {
    "text": "HTML yeah so you said HTML Source you said no origin cell from what presumably c yeah",
    "start": "832480",
    "end": "842000"
  },
  {
    "text": "so these are all sort of good questions so do you think that we should include this in self do you think that's a good",
    "start": "842000",
    "end": "847440"
  },
  {
    "text": "idea so what no why not um as you said before the reason you",
    "start": "847440",
    "end": "854920"
  },
  {
    "text": "have things in the header is because that comes through pretty clean um the",
    "start": "854920",
    "end": "860040"
  },
  {
    "text": "browser that's reliable yeah but now somebody could screw with your HTML and",
    "start": "860040",
    "end": "865920"
  },
  {
    "text": "inject script into the HTML so you won't allow that yeah exactly did everyone hear what he said or would you like me",
    "start": "865920",
    "end": "871199"
  },
  {
    "text": "to repeat ite oh I repeat it so what he said is is if you recall earlier I said that we sent the policy in the header",
    "start": "871199",
    "end": "878240"
  },
  {
    "text": "because we had high confidence that that data was really coming from the server and reflected the server's intent but",
    "start": "878240",
    "end": "884240"
  },
  {
    "text": "once we're down here in the like body of the document things are a little bit more murky if there's an attack going on",
    "start": "884240",
    "end": "890320"
  },
  {
    "text": "and the attacker is able to inject stuff into my page maybe he's injected this so",
    "start": "890320",
    "end": "895399"
  },
  {
    "text": "maybe this reflects the attacker's intent and not the server's intent and so if if we whitelisted if if the server",
    "start": "895399",
    "end": "902680"
  },
  {
    "text": "said self I want to execute scripts that come from me and then we get this we don't know whether it really comes from",
    "start": "902680",
    "end": "908680"
  },
  {
    "text": "the server or maybe is is coming from an attacker who's injecting it does that make sense yes",
    "start": "908680",
    "end": "918199"
  },
  {
    "text": "good oh does someone have a question can't",
    "start": "918199",
    "end": "923720"
  },
  {
    "text": "have ah yes so you can if you so there's a separate token",
    "start": "923720",
    "end": "929600"
  },
  {
    "text": "S I didn't read I didn't read oh I I I tricked you because I put it on the slide after you asked your",
    "start": "929600",
    "end": "935880"
  },
  {
    "text": "question yeah so there's a separate token which says uh in line which means allow scripts that are that are in line",
    "start": "935880",
    "end": "943279"
  },
  {
    "text": "but you might notice that we put the word unsafe here in the front and that's meant to be a hint to you as the",
    "start": "943279",
    "end": "949920"
  },
  {
    "text": "developer that maybe this is not the most secure thing to do so is that a technical keyword the",
    "start": "949920",
    "end": "959600"
  },
  {
    "text": "yeah so these things that come in quot marks are keywords so as distinguished from things that aren't coted which are",
    "start": "959600",
    "end": "965759"
  },
  {
    "text": "like you know host names so um one of the things that we notice is that um not",
    "start": "965759",
    "end": "971600"
  },
  {
    "text": "a lot but a sizable fraction of extensions had cross-site scripting vulnerabilities in them and those are",
    "start": "971600",
    "end": "978880"
  },
  {
    "text": "sort of pretty nasty vulnerabilities because if you can cross-site script into the extensions context then you can",
    "start": "978880",
    "end": "985199"
  },
  {
    "text": "do all the things that the extension can do which is sort of uh a",
    "start": "985199",
    "end": "990240"
  },
  {
    "text": "lot um so what we did is we actually uh revved the extension system we went to",
    "start": "990240",
    "end": "996880"
  },
  {
    "text": "version two of the extension system and then like we clean up a little like odds and ends but the the main difference",
    "start": "996880",
    "end": "1002959"
  },
  {
    "text": "between version one of Chrome extensions and version two of Chrome extensions is that in version two we actually enforce",
    "start": "1002959",
    "end": "1009839"
  },
  {
    "text": "a Content security policy by default um and in particular we in inforce one it's a little bit long",
    "start": "1009839",
    "end": "1016319"
  },
  {
    "text": "because it has a bunch of details in it but it doesn't allow um cross-site scripting and then since we've done that",
    "start": "1016319",
    "end": "1022440"
  },
  {
    "text": "the incident of cross-site scripting in version two extensions is like you know it's not zero that's like still possible",
    "start": "1022440",
    "end": "1029360"
  },
  {
    "text": "but like close to zero yeah so uh generally I would",
    "start": "1029360",
    "end": "1035319"
  },
  {
    "text": "recommend that you I'm not a like performance expert so I you know please take performance recommendations I give",
    "start": "1035319",
    "end": "1041480"
  },
  {
    "text": "you with a grain of salt but I think it makes sense to combine your scripts but uh you would have to do it as an an out",
    "start": "1041480",
    "end": "1048280"
  },
  {
    "text": "ofline script not an inline script that's actually what most people",
    "start": "1048280",
    "end": "1053799"
  },
  {
    "text": "do when they do this stuff yeah so how does it deal with likee over ha you are",
    "start": "1053799",
    "end": "1059640"
  },
  {
    "text": "you guys are a great audience so uh give me give me two",
    "start": "1059640",
    "end": "1064880"
  },
  {
    "text": "slides okay well give me two slides I'll get there anyway so this was my slide in",
    "start": "1064880",
    "end": "1070440"
  },
  {
    "start": "1068000",
    "end": "1104000"
  },
  {
    "text": "in case nobody got the could this be from the attacker uh you know so this is like supposed to be like PHP where",
    "start": "1070440",
    "end": "1076159"
  },
  {
    "text": "you're just like echoing the user's name into an HTML context and I really enjoy",
    "start": "1076159",
    "end": "1082559"
  },
  {
    "text": "this XKCD comic about little Bobby tables so if you have a little Bobby script tag or something uh you could be",
    "start": "1082559",
    "end": "1090120"
  },
  {
    "text": "in for a bad time I think everybody should print out",
    "start": "1090120",
    "end": "1097000"
  },
  {
    "text": "this comic and like tape it to their their monitor or something to remind them of",
    "start": "1097000",
    "end": "1103559"
  },
  {
    "start": "1104000",
    "end": "1210000"
  },
  {
    "text": "this yeah so what do you have so what do you have to do so really really what's going on is you're separating your code code and your data so if if you uh hang",
    "start": "1104520",
    "end": "1112520"
  },
  {
    "text": "out in security circles you'll find that people repeat various phrases over and over again like principle of lease",
    "start": "1112520",
    "end": "1118080"
  },
  {
    "text": "privilege or separation of code and data as like General like high level security",
    "start": "1118080",
    "end": "1123320"
  },
  {
    "text": "principles and so really that's what's going on here by moving your inline script uh out of line you're separating",
    "start": "1123320",
    "end": "1130000"
  },
  {
    "text": "your code which is the script from your data which is your Dom or your HTML didn't answer my question okay one more",
    "start": "1130000",
    "end": "1137360"
  },
  {
    "text": "slide oh and you should do it async or there's",
    "start": "1137360",
    "end": "1142840"
  },
  {
    "text": "ways of loading scripts fast okay this is your question right yeah okay so what about these",
    "start": "1142840",
    "end": "1150080"
  },
  {
    "text": "these kinds of uh things so these are uh inline event handlers so you can have a",
    "start": "1150080",
    "end": "1155200"
  },
  {
    "text": "button and you can say onclick and you can write some code here and this has the same problem as a inline script",
    "start": "1155200",
    "end": "1161679"
  },
  {
    "text": "Block in the sense that an attacker could be writing this code because it's part of the body of your document so",
    "start": "1161679",
    "end": "1167400"
  },
  {
    "text": "inline event handlers also count as inline scripts and you you have to remove them to use content security",
    "start": "1167400",
    "end": "1175600"
  },
  {
    "text": "policy so generally Frameworks help you do this so for example uh this is how",
    "start": "1175600",
    "end": "1181280"
  },
  {
    "text": "you might do this in jQuery you would instead give the button a class you would select it and you'd bind a click",
    "start": "1181280",
    "end": "1187880"
  },
  {
    "text": "Handler or listen for the click event or an ID or a name or yeah any kind of",
    "start": "1187880",
    "end": "1192960"
  },
  {
    "text": "selector you want yeah so the idea is this this is",
    "start": "1192960",
    "end": "1199799"
  },
  {
    "text": "part of your uh script and this is your data and they're separate and the",
    "start": "1199799",
    "end": "1205360"
  },
  {
    "text": "concerns have been separated so it's postload binding postload",
    "start": "1205360",
    "end": "1211480"
  },
  {
    "start": "1210000",
    "end": "1312000"
  },
  {
    "text": "binding so J cor is is uh does a nice job with this I think other Frameworks do as well I just happen to my slides",
    "start": "1211480",
    "end": "1218440"
  },
  {
    "text": "happen to be jQuery based so what's cool about jQuery is you can actually bind these events before the elements exist",
    "start": "1218440",
    "end": "1226400"
  },
  {
    "text": "so that's what this live keyword means in bind so you set up the query and it says later on if someone happens to",
    "start": "1226400",
    "end": "1233159"
  },
  {
    "text": "create a button in the future that happens to have this class and somebody happens to click on it please call this",
    "start": "1233159",
    "end": "1238840"
  },
  {
    "text": "function um and so generally you can build a an event map and then have the Dom come and go and not have to worry",
    "start": "1238840",
    "end": "1245200"
  },
  {
    "text": "about actually finding the nodes and poking at them um other Frameworks that are uh more more modern than than jQuery",
    "start": "1245200",
    "end": "1252200"
  },
  {
    "text": "have like even fancier ways of doing this um I think it's generally considered a good practice these days to",
    "start": "1252200",
    "end": "1257640"
  },
  {
    "text": "like not use in line event handlers but to use some more structured representation like a class or an ID and",
    "start": "1257640",
    "end": "1263799"
  },
  {
    "text": "a a more structured event map you you might disagree that's sort of a matter of opinion but it's less obvious but",
    "start": "1263799",
    "end": "1270720"
  },
  {
    "text": "yeah this two is is also in the sort of issue of separating code and data generally um people who've deployed CSP",
    "start": "1270720",
    "end": "1277120"
  },
  {
    "text": "and and work with this stuff this hasn't been a big sticking point for them this part has been pretty easy removing all",
    "start": "1277120",
    "end": "1282919"
  },
  {
    "text": "the inline script has been more of a sticking point um and I'll talk a little bit about how we're hoping to help that",
    "start": "1282919",
    "end": "1288760"
  },
  {
    "text": "in in the future so eval is also a way that you",
    "start": "1288760",
    "end": "1295120"
  },
  {
    "text": "can get cross site scripted if you have an untrusted string and you pass it to eval now you could be uh running the",
    "start": "1295120",
    "end": "1301919"
  },
  {
    "text": "attacker's code so uh set time out also has the same",
    "start": "1301919",
    "end": "1308640"
  },
  {
    "text": "problem if you pass a string to set timeout it gets evalid essentially but so instead of doing that you should just",
    "start": "1308640",
    "end": "1314000"
  },
  {
    "text": "pass a function and that doesn't get eval it just gets called as a normal function that's a easy change to make",
    "start": "1314000",
    "end": "1320200"
  },
  {
    "text": "anyway so the eval thing is optional it's disabled by default if you are controlling scripts so if you have a",
    "start": "1320200",
    "end": "1326360"
  },
  {
    "text": "script directive um but you can turn it back on with uh unsafe eval I would say",
    "start": "1326360",
    "end": "1331600"
  },
  {
    "text": "that that uh unsafe inline is more unsafe unsafe eval is not such a big",
    "start": "1331600",
    "end": "1338640"
  },
  {
    "text": "deal if you wanted to keep keep using eval in your code but I keep in mind that it is a vector where you could get",
    "start": "1338640",
    "end": "1344880"
  },
  {
    "text": "cross- side scripted",
    "start": "1344880",
    "end": "1348279"
  },
  {
    "start": "1349000",
    "end": "1411000"
  },
  {
    "text": "yeah so here's my four-step program to mitigating Crosset scripting uh move your scripts out of",
    "start": "1350679",
    "end": "1357279"
  },
  {
    "text": "line get rid of your inline event handlers if you're feeling ambitious get rid of eval if you're not feeling",
    "start": "1357279",
    "end": "1363279"
  },
  {
    "text": "ambitious you can skip that step um and then add a script Source directive to your content security",
    "start": "1363279",
    "end": "1371600"
  },
  {
    "text": "policy easy right we should all no maybe it's a little bit of work",
    "start": "1371600",
    "end": "1378840"
  },
  {
    "text": "so you saw earlier there's a big long list of directives if you were feeling paranoid and you wanted to control more",
    "start": "1381200",
    "end": "1386799"
  },
  {
    "text": "than just script there are lots of knobs you can turn to have more control so there's a short section in my talk where",
    "start": "1386799",
    "end": "1393400"
  },
  {
    "text": "I tell you how to do that if you're feeling ambitious so the default Source",
    "start": "1393400",
    "end": "1399600"
  },
  {
    "text": "directive is the one that helps you there so you could have set default source to none and now you have a very",
    "start": "1399600",
    "end": "1405120"
  },
  {
    "text": "secure website that would not have very many features and you probably wouldn't want to use",
    "start": "1405120",
    "end": "1410600"
  },
  {
    "text": "it uh but you can start with something more sensible like by default load",
    "start": "1410600",
    "end": "1415720"
  },
  {
    "text": "things for myself and then refine it over time as you find that you have",
    "start": "1415720",
    "end": "1422120"
  },
  {
    "text": "resources that are blocked so here here's a policy from a real uh real site this is this Gard nomatic website that I",
    "start": "1422120",
    "end": "1429159"
  },
  {
    "text": "wrote a little while ago so here I I started with with default Source none because I was feeling ambitious and",
    "start": "1429159",
    "end": "1434919"
  },
  {
    "text": "figured I should try this stuff out for myself and then here are all the different like kinds of resources and",
    "start": "1434919",
    "end": "1439960"
  },
  {
    "text": "where they come from um you notice that I did use the unsafe inline keyword for style so I can",
    "start": "1439960",
    "end": "1448039"
  },
  {
    "text": "I have a style block that has stuff in it you know maybe maybe that maybe that wores you maybe it doesn't depends on",
    "start": "1448039",
    "end": "1453480"
  },
  {
    "text": "how paranoid you are you have the ability to control it to turn it on or off as you",
    "start": "1453480",
    "end": "1459559"
  },
  {
    "text": "choose yeah you can see that I use fonts fancy fonts everyone should use fancy fonts",
    "start": "1460360",
    "end": "1468200"
  },
  {
    "start": "1468000",
    "end": "1554000"
  },
  {
    "text": "so here's my cheat sheet that says what each of the directives maps to so for example media maps to both audio and",
    "start": "1471039",
    "end": "1477799"
  },
  {
    "text": "video cuz they're closely related generally it's not worth controlling them separately and the sort of funny",
    "start": "1477799",
    "end": "1483919"
  },
  {
    "text": "one is connect source so connect source is like the the grab bag of if you have",
    "start": "1483919",
    "end": "1489760"
  },
  {
    "text": "a JavaScript API that loads resources so like XML HTP requests or websockets or",
    "start": "1489760",
    "end": "1496039"
  },
  {
    "text": "workers or whatever all that kind of stuff those are all controlled by connect Source generally those are not such a",
    "start": "1496039",
    "end": "1502559"
  },
  {
    "text": "big deal but the if you want to control them the option is there it's at your at your",
    "start": "1502559",
    "end": "1508960"
  },
  {
    "text": "choice okay someone asked earlier what happens if there's oh did you have a question Chrome extensions do not allow",
    "start": "1509880",
    "end": "1516880"
  },
  {
    "text": "you to have unsafe inline scripts yeah yeah if they did then they would they",
    "start": "1516880",
    "end": "1521919"
  },
  {
    "text": "would allow developers to open themselves up so it's a yeah on the on the web you have more choice if you want",
    "start": "1521919",
    "end": "1527960"
  },
  {
    "text": "to be a powerful extension in Chrome we give you a little bit less choice because we're worried about uh you",
    "start": "1527960",
    "end": "1533279"
  },
  {
    "text": "endangering users so I mentioned that uh when your",
    "start": "1533279",
    "end": "1539760"
  },
  {
    "text": "website violates a policy there's an event that gets generated in the Dom that says you this element tried to load",
    "start": "1539760",
    "end": "1545200"
  },
  {
    "text": "something that violated your policy we also uh you can also specify a report",
    "start": "1545200",
    "end": "1551799"
  },
  {
    "text": "URI so there you give a a URL and then when there's a violation the browser",
    "start": "1551799",
    "end": "1557360"
  },
  {
    "text": "will send you this Jon on blob to to that URL and tell you something went wrong so it'll tell you this document",
    "start": "1557360",
    "end": "1564320"
  },
  {
    "text": "that was referred to by somebody uh trying to load this thing",
    "start": "1564320",
    "end": "1570440"
  },
  {
    "text": "that was blocked because it violated this directive and then here's the whole policy that was being",
    "start": "1570440",
    "end": "1576559"
  },
  {
    "text": "enforced and so the idea is that you can use this to see if you're causing",
    "start": "1576559",
    "end": "1581640"
  },
  {
    "text": "trouble for your users so you can get feedback about how well your policy is working if there's some corner of your",
    "start": "1581640",
    "end": "1587159"
  },
  {
    "text": "site that like maybe you don't have the policy quite right on or maybe if you're being attacked maybe the the reports",
    "start": "1587159",
    "end": "1593919"
  },
  {
    "text": "will give you some sort of early warning that that there's an attack going on and this Fe feature is actually very",
    "start": "1593919",
    "end": "1600320"
  },
  {
    "text": "popular um this feature is so popular that there's actually a report only mode",
    "start": "1600320",
    "end": "1606080"
  },
  {
    "start": "1602000",
    "end": "1680000"
  },
  {
    "text": "which says here's a policy uh please just tell me reports about it and don't bother blocking things yet um and so",
    "start": "1606080",
    "end": "1614799"
  },
  {
    "text": "that that's uh you can also have both you can have one that's enforced and one that's being uh in report only",
    "start": "1614799",
    "end": "1620960"
  },
  {
    "text": "mode yeah so that would be good if you want to set up a Honeypot yeah so it's good for honeypots it's also good for",
    "start": "1620960",
    "end": "1626760"
  },
  {
    "text": "just testing so suppose you were interested in in CSP and you wanted to use it on your website but you were",
    "start": "1626760",
    "end": "1632520"
  },
  {
    "text": "afraid of of breaking your website then you could try report only mode for a while and then see how many reports you",
    "start": "1632520",
    "end": "1638880"
  },
  {
    "text": "get and then if that number gets low then you can turn it on for real and you would uh sort of a softer deployment",
    "start": "1638880",
    "end": "1645320"
  },
  {
    "text": "path",
    "start": "1645320",
    "end": "1648320"
  },
  {
    "text": "okay so this is my summary of content security policy 1.0 so it's goal is to mitigate cross-site scripting it does",
    "start": "1652279",
    "end": "1657919"
  },
  {
    "text": "that by whitelisting content especially script to use it you have to do some work on your site you can't just apply",
    "start": "1657919",
    "end": "1664480"
  },
  {
    "text": "it as is you have to really separate your code and your data so that the browser can tell where all the code is",
    "start": "1664480",
    "end": "1670000"
  },
  {
    "text": "coming from so that involves moving your inline scripts out of line removing the inline event handlers and ideally",
    "start": "1670000",
    "end": "1676799"
  },
  {
    "text": "removing eal but not not really required um and you have default Source if you",
    "start": "1676799",
    "end": "1682640"
  },
  {
    "start": "1680000",
    "end": "1751000"
  },
  {
    "text": "really want to be secure by default and go to the like paranoid lockdown route",
    "start": "1682640",
    "end": "1687799"
  },
  {
    "text": "um you can get violation reports which is Fe feedback from the field about how how well this is working",
    "start": "1687799",
    "end": "1694320"
  },
  {
    "text": "um and this is as I said it's implemented in Chrome Firefox and Safari there's a partial implementation in",
    "start": "1694320",
    "end": "1699720"
  },
  {
    "text": "Internet Explorer they Implement actually a directive that I haven't even told you about um",
    "start": "1699720",
    "end": "1705679"
  },
  {
    "text": "yeah so I think what you're referring to is um some people like the script tag but they don't put script in it they put",
    "start": "1705679",
    "end": "1712200"
  },
  {
    "text": "data in it and so they'll specify a type like type this is my data this is not script and then the browser won't",
    "start": "1712200",
    "end": "1718240"
  },
  {
    "text": "execute that script it'll just leave it there in the Dom for something else to interact with and that works fine so",
    "start": "1718240",
    "end": "1725080"
  },
  {
    "text": "here because the uh script is not executing it's not going to run a foul of any policy it'll just show up it'll",
    "start": "1725080",
    "end": "1732159"
  },
  {
    "text": "be inline it'll just sit there it won't violate any policy it'll just be fine",
    "start": "1732159",
    "end": "1738640"
  },
  {
    "text": "so I I have a couple more minutes so I'd like to briefly talk about the future of this stuff which is content security",
    "start": "1740480",
    "end": "1747200"
  },
  {
    "text": "policy 1.1 so the biggest piece of feedback that we've gotten on 1.0 is that people",
    "start": "1747200",
    "end": "1754399"
  },
  {
    "start": "1751000",
    "end": "1790000"
  },
  {
    "text": "wish they could use inline scripts and this requirement of like getting all of your scripts out of line is like really",
    "start": "1754399",
    "end": "1761440"
  },
  {
    "text": "you know it's work like it's doable like definitely people have done it but it's work and so as an example here's the uh",
    "start": "1761440",
    "end": "1768240"
  },
  {
    "text": "Google analytics stipp it they tell you to create this like GQ object so that",
    "start": "1768240",
    "end": "1774360"
  },
  {
    "text": "you can like call functions before it's loaded it's like some fancy thing but the point is if you really want to do",
    "start": "1774360",
    "end": "1779559"
  },
  {
    "text": "this the the way it's meant to be done you need to have this inline script so how can we solve this",
    "start": "1779559",
    "end": "1786960"
  },
  {
    "text": "problem so the approach that we've are experimenting with currently in 1.1 one",
    "start": "1787200",
    "end": "1792679"
  },
  {
    "start": "1790000",
    "end": "1890000"
  },
  {
    "text": "is to use a Nots so uh if you're familiar with with the",
    "start": "1792679",
    "end": "1798240"
  },
  {
    "text": "idea of Ann it's just a random number that you made up one day and you every day you wake up or every time your",
    "start": "1798240",
    "end": "1804880"
  },
  {
    "text": "website is fetched you make up a new random number and the idea is that it's known to you but unpredictable to an",
    "start": "1804880",
    "end": "1811279"
  },
  {
    "text": "attacker does that make sense so you can include in your policy that one of the places you can get scripts from is from",
    "start": "1811279",
    "end": "1817919"
  },
  {
    "text": "people who know the knots and then this is just some like random number I don't know how many how many how long it has",
    "start": "1817919",
    "end": "1824320"
  },
  {
    "text": "to be that's like up to you you get to decide like how paranoid you are how how afraid you are of somebody guessing this",
    "start": "1824320",
    "end": "1830000"
  },
  {
    "text": "random number you made up probably if it's this long no one's going to guess it and then what the web protocol guys",
    "start": "1830000",
    "end": "1837679"
  },
  {
    "text": "thought yeah well make it longer yeah so what do you do with this",
    "start": "1837679",
    "end": "1842960"
  },
  {
    "text": "nons well what you do is you take your inline script and you say I know the nons here it is and this thing matches",
    "start": "1842960",
    "end": "1851000"
  },
  {
    "text": "this thing and then because the nons is here the browser can reason o this must",
    "start": "1851000",
    "end": "1858360"
  },
  {
    "text": "not be the attacker supplying this data because the attacker doesn't know the nons so given that the nons has been",
    "start": "1858360",
    "end": "1865039"
  },
  {
    "text": "associated with this script it's okay to execute because that's what it does that make sense yeah so this",
    "start": "1865039",
    "end": "1872840"
  },
  {
    "text": "is uh this feature of 1.1 is like very popular people are very excited about",
    "start": "1872840",
    "end": "1878760"
  },
  {
    "text": "this so there are also new directives in 1.1 that do various interesting things so like before you can only control",
    "start": "1878760",
    "end": "1885760"
  },
  {
    "text": "plugins by URL and now you could you can control plugins by type so you can say I want to have PDF or I want to have flash",
    "start": "1885760",
    "end": "1893039"
  },
  {
    "start": "1890000",
    "end": "1970000"
  },
  {
    "text": "but I don't want Java or Skype or whatever it is you like or don't",
    "start": "1893039",
    "end": "1899240"
  },
  {
    "text": "like yeah yeah so that's a good question so uh all of oh sorry the question is I'm",
    "start": "1899240",
    "end": "1906840"
  },
  {
    "text": "not sure I 100% understood the question but I think the question was what is the scope of a policy so when a site",
    "start": "1906840",
    "end": "1912679"
  },
  {
    "text": "declares a policy what does it affect does it affect an individual page does it affect the whole site was that your",
    "start": "1912679",
    "end": "1918639"
  },
  {
    "text": "question [Music]",
    "start": "1918639",
    "end": "1923490"
  },
  {
    "text": "yeah uh ah yes okay I understand the question now so so let me first answer",
    "start": "1927000",
    "end": "1932399"
  },
  {
    "text": "the simple version then I'll answer the Advance version of the question so the simple version is the policy applies to",
    "start": "1932399",
    "end": "1937679"
  },
  {
    "text": "a single document so when you supply a policy with the httv response it applies",
    "start": "1937679",
    "end": "1944120"
  },
  {
    "text": "to the content in that response and the advanced question is maybe that's too coar grained maybe I wish that different",
    "start": "1944120",
    "end": "1950799"
  },
  {
    "text": "parts of my page had a different policy so that's a a request that people have made and we haven't figured out a good",
    "start": "1950799",
    "end": "1956159"
  },
  {
    "text": "way of doing that yet um so if you have ideas for how you think we should do that I would encourage you to come to",
    "start": "1956159",
    "end": "1962360"
  },
  {
    "text": "the w3c working group and and present your ideas and try to get people on",
    "start": "1962360",
    "end": "1968638"
  },
  {
    "text": "board okay uh yeah so CSP 1.1 is under active development if you are interested",
    "start": "1969360",
    "end": "1975080"
  },
  {
    "start": "1970000",
    "end": "2030000"
  },
  {
    "text": "in this stuff and you want to share your experiences with with 1.1 and tell us what we did well or poorly and what we",
    "start": "1975080",
    "end": "1981240"
  },
  {
    "text": "should change in in 1.1 this is the mailing list of the w3c so it's the web application security working group we",
    "start": "1981240",
    "end": "1987919"
  },
  {
    "text": "have a bunch of browser vendors there we have a bunch of website uh operators there um we would love to hear more",
    "start": "1987919",
    "end": "1994440"
  },
  {
    "text": "feedback um if you want to play with uh CSP 1.1 in Chrome you can turn it on in",
    "start": "1994440",
    "end": "2001600"
  },
  {
    "text": "in the flags so you turn on experimental blink features",
    "start": "2001600",
    "end": "2009240"
  },
  {
    "text": "uh yeah but if you want to use 1.1 that's stable and like ready for use in in",
    "start": "2009480",
    "end": "2016320"
  },
  {
    "text": "production thank you",
    "start": "2016320",
    "end": "2020518"
  },
  {
    "text": "[Music]",
    "start": "2024020",
    "end": "2032490"
  }
]