[
  {
    "text": "[Music]",
    "start": "3320",
    "end": "8769"
  },
  {
    "text": "thank you thank you thanks Wes for that wonderful",
    "start": "10360",
    "end": "18039"
  },
  {
    "text": "introduction but I have to say that's a lot of Spotlight for a backend",
    "start": "18039",
    "end": "23759"
  },
  {
    "text": "engineer while I'm getting accustomed to all the attention and all of you here I hope you had a good coffee break and",
    "start": "23960",
    "end": "30160"
  },
  {
    "text": "snacks I don't know if you already got them or they going to be after this talk I don't know whether you need them before or after but they're going to be",
    "start": "30160",
    "end": "35879"
  },
  {
    "text": "snacks at some point the misconception like our chair",
    "start": "35879",
    "end": "41200"
  },
  {
    "text": "lead here thinks that you put a backend engineer in front of all of this Spotlight get a room full of people and the show is going to roll it just",
    "start": "41200",
    "end": "48199"
  },
  {
    "text": "reminds me that when a backend engineer works at Netflix and when they when you",
    "start": "48199",
    "end": "53440"
  },
  {
    "text": "tell somebody that I work for Netflix there's a whole bunch of misconceptions that follow us everywhere some of these",
    "start": "53440",
    "end": "59120"
  },
  {
    "text": "misconceptions start at home so you'll have a long hard day at work of course doing the usual debugging writing code",
    "start": "59120",
    "end": "65799"
  },
  {
    "text": "your meetings design reviews so on you get back home finally it's your moment to sit back relax feet up on the automon",
    "start": "65799",
    "end": "72479"
  },
  {
    "text": "you hit play That's when your kids will be quick to confront you and ask what are you doing and I'll be like I'm",
    "start": "72479",
    "end": "79119"
  },
  {
    "text": "watching Netflix and then they'll be like what did you do the whole day I wish I had the luxury of watching",
    "start": "79119",
    "end": "87640"
  },
  {
    "text": "Netflix the whole day actually I don't sometimes these misconceptions I know",
    "start": "87640",
    "end": "92759"
  },
  {
    "text": "we're going to get to the talk in a minute but sometimes these misconceptions travel with us to work",
    "start": "92759",
    "end": "98520"
  },
  {
    "text": "there was this instance uh one time an Uber driver he was dropping me off to work and probably his first time on the",
    "start": "98520",
    "end": "104920"
  },
  {
    "text": "campus and it can happen our lobby is really amazing and they've got all of these Emmy Awards Oscars you you name it",
    "start": "104920",
    "end": "112880"
  },
  {
    "text": "they look at the lobby and they look at me and then they're like finally they asked me I hope you have a change of",
    "start": "112880",
    "end": "119520"
  },
  {
    "text": "clothes in your backpack for this red carpet event that you're going to and I'm like I wish while Netflix is",
    "start": "119520",
    "end": "126520"
  },
  {
    "text": "synonymous with a lot of Red Carpet Events we backend Engineers are often not the vvps there but we could be vvps",
    "start": "126520",
    "end": "134080"
  },
  {
    "text": "here so I'll take this any day finally some of these misconceptions trust me we",
    "start": "134080",
    "end": "139480"
  },
  {
    "text": "really get to the talk in a second these misconceptions travel internationally",
    "start": "139480",
    "end": "144560"
  },
  {
    "text": "there was this one time my teammate BD he's traveled to India like for the summer long flight New York to Mumbai 17",
    "start": "144560",
    "end": "151599"
  },
  {
    "text": "hours jet lagged he's at the Mumbai airport and uh the Port of Entry the",
    "start": "151599",
    "end": "157239"
  },
  {
    "text": "immigration official like going through all of it and then finally asks him so where do you work and he's like I work",
    "start": "157239",
    "end": "162959"
  },
  {
    "text": "for Netflix so that's when the person looks up and asks so what do you do for",
    "start": "162959",
    "end": "169519"
  },
  {
    "text": "Netflix what show what movie Where Are You featured so here we go and I'm I'm",
    "start": "169519",
    "end": "176599"
  },
  {
    "text": "telling you the immigration official pretty disappointed with whatever BD had to tell tell them that this is membership I'm an engineer this is what",
    "start": "176599",
    "end": "182000"
  },
  {
    "text": "I do so all of you esteemed members of the audience here cuon attendees fellow",
    "start": "182000",
    "end": "188080"
  },
  {
    "text": "technical practitioners I am no actor no star I a senior software",
    "start": "188080",
    "end": "194840"
  },
  {
    "text": "engineer at Netflix I'm surui danan and I will be your best shot at technical",
    "start": "194840",
    "end": "201560"
  },
  {
    "text": "entertainment for the next 45 to 50 minutes so I hope you enjoy the",
    "start": "201560",
    "end": "208120"
  },
  {
    "text": "ride this this is what the technical programming for today looks like I'll start out by",
    "start": "208519",
    "end": "216120"
  },
  {
    "text": "establishing what we do where do we sit like I think there have been many Netflix speakers before me today and in",
    "start": "216120",
    "end": "222799"
  },
  {
    "text": "earlier cuon conferences Netflix has a big microservice architecture there's a",
    "start": "222799",
    "end": "227920"
  },
  {
    "text": "whole like probably hundreds of thousands of services in the backdrop so I'll try to establish where membership",
    "start": "227920",
    "end": "233560"
  },
  {
    "text": "sits if you as an end user were to use steam Netflix application where is it",
    "start": "233560",
    "end": "238920"
  },
  {
    "text": "that you would have have a run in with some of uis or some of the fun things that you could do on the app and what is",
    "start": "238920",
    "end": "245079"
  },
  {
    "text": "it that we do on the background and roughly once you're at at the end of that is when we go deeper so till then",
    "start": "245079",
    "end": "251760"
  },
  {
    "text": "I'm just establishing what we do where we are at and what technical choices we' made and the use stud use case studies",
    "start": "251760",
    "end": "258639"
  },
  {
    "text": "are where go deeper I will start out with some of the pricing technology choices we made probably a decade ago",
    "start": "258639",
    "end": "264560"
  },
  {
    "text": "that predates my andure at Netflix moving on to a use case study to for",
    "start": "264560",
    "end": "269919"
  },
  {
    "text": "member history that is really our second persistent store that helps us answer",
    "start": "269919",
    "end": "275120"
  },
  {
    "text": "questions to the microsc granularity about any and every single change that has been made to anybody's subscription",
    "start": "275120",
    "end": "282400"
  },
  {
    "text": "and I'm sure most of you here are Netflix members if you're not I will show you exactly how to sign up as we",
    "start": "282400",
    "end": "288039"
  },
  {
    "text": "get into the details of this and last but not least I will try",
    "start": "288039",
    "end": "293080"
  },
  {
    "text": "to answer what does the subscriptions ecosystem Evolution look like like w pointed out when I wrote the abstract",
    "start": "293080",
    "end": "299759"
  },
  {
    "text": "that was probably in the summer it was 220 million it's already October while I stand in front of you we're getting",
    "start": "299759",
    "end": "305000"
  },
  {
    "text": "ready for Halloween it's 238 so really what is that Journey like if you have to",
    "start": "305000",
    "end": "310320"
  },
  {
    "text": "add another 5 million subscribers what does that look like and if you have to add another 100 what does that look like",
    "start": "310320",
    "end": "316840"
  },
  {
    "text": "so with that let's get started this is really about what my",
    "start": "316840",
    "end": "323520"
  },
  {
    "text": "team does so we are in the critical path for both signups and streaming at",
    "start": "323520",
    "end": "329080"
  },
  {
    "text": "Netflix so those are just words there I have uis which I'll show how that all comes together we operate a dozen",
    "start": "329080",
    "end": "336199"
  },
  {
    "text": "microservices so while Netflix itself could be 500,000 microservices we within membership have",
    "start": "336199",
    "end": "342880"
  },
  {
    "text": "a dozen microservices we have the four nines availability because the critical",
    "start": "342880",
    "end": "348000"
  },
  {
    "text": "paths that we serve if any of our services is down it would have a direct impact on signups and somebody's ability",
    "start": "348000",
    "end": "355639"
  },
  {
    "text": "to play and have a good evening so we own MTI services so we are not at the",
    "start": "355639",
    "end": "361520"
  },
  {
    "text": "edge we are not Zool we really in the middle of how things come together our",
    "start": "361520",
    "end": "367440"
  },
  {
    "text": "services serve a lot of traffic so based on what use case it is whether it is subscriptions or whether it is plan or",
    "start": "367440",
    "end": "373360"
  },
  {
    "text": "pricing that scale can go up to millions of requests per second I will talk about",
    "start": "373360",
    "end": "378400"
  },
  {
    "text": "the technical choices we've made what what is off the shelf Tech that we just used to make all that scale happen we",
    "start": "378400",
    "end": "385319"
  },
  {
    "text": "act as a source of Truth for total membership counts so that number whether it's 220 Mill Ion 2 38 million it's",
    "start": "385319",
    "end": "390960"
  },
  {
    "text": "actually membership systems which emit the events and rights to the persistance",
    "start": "390960",
    "end": "397720"
  },
  {
    "text": "store which are used by Downstream analytics both within Netflix outside Netflix to actually say for real that",
    "start": "397720",
    "end": "403520"
  },
  {
    "text": "that's the actual Global Netflix subscription count on a given day in",
    "start": "403520",
    "end": "408639"
  },
  {
    "text": "short we are solving hard distributed problems at scale with high accuracy and how we do it is what lies",
    "start": "408639",
    "end": "417038"
  },
  {
    "text": "ahead so we own and operate the catalog of all p and pricing so in the United",
    "start": "417160",
    "end": "422639"
  },
  {
    "text": "States this is pretty um I would say you can count it on your fingers it's really",
    "start": "422639",
    "end": "428000"
  },
  {
    "text": "basic standard premium we have a set number of choices that's how we've run a business for a good length in time we",
    "start": "428000",
    "end": "434360"
  },
  {
    "text": "are the source of truth I already mentioned that but particularly in your subscription we care about the correct",
    "start": "434360",
    "end": "439680"
  },
  {
    "text": "plan price the billing country and the payment status because this would determine what is the quality of service",
    "start": "439680",
    "end": "445960"
  },
  {
    "text": "you receive is your accountant good standing and if you are a paying member are we doing right by you and allowing",
    "start": "445960",
    "end": "451520"
  },
  {
    "text": "you to have the concurrent number of streams or the devices that you need to be streaming on or if downloads are",
    "start": "451520",
    "end": "457240"
  },
  {
    "text": "allowed or not we manage membership life cycle we shall get into the details of",
    "start": "457240",
    "end": "462960"
  },
  {
    "text": "some of this it could be really when you're trying to begin your journey with this you're trying to sign up for Netflix you can also sign up for Netflix",
    "start": "462960",
    "end": "469680"
  },
  {
    "text": "using other partner channels you could sign up with the T-Mobile or any other",
    "start": "469680",
    "end": "474720"
  },
  {
    "text": "partner goo in India and so on as a member you could change your plan we",
    "start": "474720",
    "end": "479879"
  },
  {
    "text": "will try to renew you yeah we are a subscription service so we try to use",
    "start": "479879",
    "end": "485039"
  },
  {
    "text": "your method of payment to get the amount that we need to make sure there's continuity of service that could",
    "start": "485039",
    "end": "490680"
  },
  {
    "text": "actually put your account on hold or you might receive a grace period in case there's some issues for us to charge",
    "start": "490680",
    "end": "496520"
  },
  {
    "text": "your account you could pause your membership cancel or at the end of your journey with us I hopefully you wouldn't",
    "start": "496520",
    "end": "502360"
  },
  {
    "text": "cancel we we are also on the hook to delete all customer",
    "start": "502360",
    "end": "507520"
  },
  {
    "text": "data I think that was a broad establishment of what my team does but I think as end",
    "start": "508240",
    "end": "514479"
  },
  {
    "text": "users you would really care about if you were to go on the Netflix app right now please don't you can look at me now and",
    "start": "514479",
    "end": "521279"
  },
  {
    "text": "maybe stream later but these are some of the places so this is a very important flow this start membership button is",
    "start": "521279",
    "end": "529279"
  },
  {
    "text": "what the counts add up to so if you hit start membership pretty much all of the",
    "start": "529279",
    "end": "535440"
  },
  {
    "text": "um flow it hits a bunch of our apps on the back end in a second we'll actually go deeper I have this whole flowchart",
    "start": "535440",
    "end": "542200"
  },
  {
    "text": "where we talk about all the different services within membership outside of membership all the different things that",
    "start": "542200",
    "end": "547839"
  },
  {
    "text": "actually happen correctly before your membership is in good standing and you can start streaming on the right is the",
    "start": "547839",
    "end": "554519"
  },
  {
    "text": "very cetted play button so that image is a little old is it cake is not in the",
    "start": "554519",
    "end": "560120"
  },
  {
    "text": "top 10 but yeah the deck is a little old sorry about that so when you hit play",
    "start": "560120",
    "end": "565240"
  },
  {
    "text": "there's a direct call to the membership systems which actually",
    "start": "565240",
    "end": "571120"
  },
  {
    "text": "determines what is the quality of service associated with your plan which",
    "start": "571440",
    "end": "576680"
  },
  {
    "text": "plan are you on what concurrence streams are you allowed what devices and so on and that's also where we get the highest",
    "start": "576680",
    "end": "583560"
  },
  {
    "text": "traffic perpetually in all of our paths is really the streaming button because that's billions of streams every",
    "start": "583560",
    "end": "592240"
  },
  {
    "text": "day the other place you could run into membership flows is your account page so",
    "start": "593040",
    "end": "598279"
  },
  {
    "text": "not everything displayed here is what's owned by our team but if you were to change your plan if you were to manage",
    "start": "598279",
    "end": "604519"
  },
  {
    "text": "your extra members or do some of the other actions hopefully not cancelled all of these flows go directly into",
    "start": "604519",
    "end": "610519"
  },
  {
    "text": "membership services on the right what you see is bundle activations or partner",
    "start": "610519",
    "end": "615720"
  },
  {
    "text": "signups I have a Xfinity example so sometimes when you get your internet from Comcast they might give you an",
    "start": "615720",
    "end": "622120"
  },
  {
    "text": "offer that sign up for Netflix 3 months free and so on so all of those sign up",
    "start": "622120",
    "end": "627240"
  },
  {
    "text": "flows are also uated by membership services on the",
    "start": "627240",
    "end": "632640"
  },
  {
    "text": "background I think this is the meat of the puzzle it's establish what we do this is really how we do it so this is a",
    "start": "632640",
    "end": "640760"
  },
  {
    "text": "little hard to unpack but let's start from the right side we have the",
    "start": "640760",
    "end": "645800"
  },
  {
    "text": "membership plan and pricing catalog service which holds all of the plans as",
    "start": "645800",
    "end": "651880"
  },
  {
    "text": "I said in the United States it's a limited set but across geographies across different countries we do a lot",
    "start": "651880",
    "end": "657920"
  },
  {
    "text": "of experimentation so that's where all the plans and prices go that service is also responsible for managing the rules",
    "start": "657920",
    "end": "664560"
  },
  {
    "text": "because the availability of plans is really managed by where you're at and so",
    "start": "664560",
    "end": "670320"
  },
  {
    "text": "on and given we have different offerings in different places there's a whole rule set that goes there in terms of database",
    "start": "670320",
    "end": "676760"
  },
  {
    "text": "choices we have two cockroach DB databases in our Fleet So the plan",
    "start": "676760",
    "end": "682639"
  },
  {
    "text": "pricing is backed by cockroach DB we also have code redemptions so during uh Winters or more like Christmas season in",
    "start": "682639",
    "end": "689680"
  },
  {
    "text": "we see that a lot of friends family buy Netflix gift cards and then they hand it out to you know when you're gifting so",
    "start": "689680",
    "end": "696600"
  },
  {
    "text": "all the code Redemption flows also work with membership services and then we have a member pricing service once you",
    "start": "696600",
    "end": "703200"
  },
  {
    "text": "signed up once we know what your plan price year is for upholding all of your member actions for example changing plan",
    "start": "703200",
    "end": "710519"
  },
  {
    "text": "if you want to sign up an extra member so on all of those would flow through the member pricing",
    "start": "710519",
    "end": "716000"
  },
  {
    "text": "services in the middle is what takes care of some of our partner interactions there's a dedicated microservice which",
    "start": "716000",
    "end": "721880"
  },
  {
    "text": "would take care of all bundle activations sign up if you were to change plans during using a bundle so on",
    "start": "721880",
    "end": "728480"
  },
  {
    "text": "we have the membership App Store service that's we also have an integration with apple with the recent gaming launches",
    "start": "728480",
    "end": "734959"
  },
  {
    "text": "you have the ability to sign up for a Netflix subscription from your iOS App Store so those signups are activated in",
    "start": "734959",
    "end": "742920"
  },
  {
    "text": "the background using the member app store or the member iTunes service on the left is where we have the",
    "start": "742920",
    "end": "749600"
  },
  {
    "text": "other persistent Store where all your memberships are saved so Cassandra is the choice of database we have the",
    "start": "749600",
    "end": "755480"
  },
  {
    "text": "subscription service and the subscriptions history service these are really a persistance",
    "start": "755480",
    "end": "761959"
  },
  {
    "text": "bagged stores so this is where the meat of the 238 million membership set I also",
    "start": "761959",
    "end": "768399"
  },
  {
    "text": "want to mention 238 million is the active membership count as Engineers our concerns are not just about the current",
    "start": "768399",
    "end": "775160"
  },
  {
    "text": "members we also have to care for former members and rejoins and so on and there folks who come to Netflix and then use",
    "start": "775160",
    "end": "781600"
  },
  {
    "text": "it for a few days and go away but we want to uphold a rejoin experience for you so really we are not in the millions",
    "start": "781600",
    "end": "787440"
  },
  {
    "text": "game we are in the billions game and fronting some of this as I mentioned all",
    "start": "787440",
    "end": "792880"
  },
  {
    "text": "the State Management that we do we have the member State service and we have member holds and Grace service I have",
    "start": "792880",
    "end": "799440"
  },
  {
    "text": "omitted a few other services which do have other use cases but this I would",
    "start": "799440",
    "end": "805079"
  },
  {
    "text": "say in a broad sense give you an overview of all of the things that we concerns ourselves concern ourselves",
    "start": "805079",
    "end": "811680"
  },
  {
    "text": "with and how are they broken down and finally we have a whole bunch of work that happens using big data so all of",
    "start": "811680",
    "end": "818839"
  },
  {
    "text": "our databases have backups and then we use caor which would put the active live",
    "start": "818839",
    "end": "824360"
  },
  {
    "text": "databases in backup tables where we can run aache spark jobs to do reconciliation within membership across",
    "start": "824360",
    "end": "831560"
  },
  {
    "text": "membership and other teams and also emit events which are used by a lot of",
    "start": "831560",
    "end": "836959"
  },
  {
    "text": "Downstream consumers for example messaging and analytics which actually pick up all of this data and come back",
    "start": "836959",
    "end": "843360"
  },
  {
    "text": "with numbers that this is what the current signups are and this is what the revenu is projected to",
    "start": "843360",
    "end": "849560"
  },
  {
    "text": "be as promised I will teach you how to sign up so we are at that point now so",
    "start": "849560",
    "end": "855040"
  },
  {
    "text": "if you just go to netflix.com and if you're not punched in your credentials yet you would see something on the left",
    "start": "855040",
    "end": "860480"
  },
  {
    "text": "which is really what we call the nonmember homepage once you start your journey you",
    "start": "860480",
    "end": "866320"
  },
  {
    "text": "would see this uh these options of the plans that you can sign up on so this is",
    "start": "866320",
    "end": "871360"
  },
  {
    "text": "something that's powered by membership systems and this is where we get millions of requests per second because",
    "start": "871360",
    "end": "876920"
  },
  {
    "text": "you may or may not sign up it's important for us to render this page for you correctly and there's complexity in",
    "start": "876920",
    "end": "882279"
  },
  {
    "text": "the background because these numbers vary by geography so the currency and",
    "start": "882279",
    "end": "888120"
  },
  {
    "text": "the uh the pricing would change what actual plans are available would change",
    "start": "888120",
    "end": "893360"
  },
  {
    "text": "historically Netflix did had did have offers so what you see don't see what your terms in and conditions for sign up",
    "start": "893360",
    "end": "899959"
  },
  {
    "text": "all of that varies and these rules are also managed by our team and as mentioned that's the red",
    "start": "899959",
    "end": "907480"
  },
  {
    "text": "button if somebody here still doesn't have Netflix that's where so yeah so in the background if you were to start",
    "start": "907480",
    "end": "914040"
  },
  {
    "text": "signing up that's the plan selection page those are all your options so once you and just a little uh disclaimer here",
    "start": "914040",
    "end": "921560"
  },
  {
    "text": "so all the green boxes here is what is membership services perview everything",
    "start": "921560",
    "end": "927000"
  },
  {
    "text": "else in white is the other system teams that membership collaborates with to orchestrate a flow which is like sign up",
    "start": "927000",
    "end": "933920"
  },
  {
    "text": "as an example so we start out with the plan selection it's fronted by the growth engineering apps the member",
    "start": "933920",
    "end": "940560"
  },
  {
    "text": "chooses a plan this is queried from the membership plan and pricing service which is backed by the rules and the",
    "start": "940560",
    "end": "947040"
  },
  {
    "text": "persistence store this is the Cockroach DB I was hoping somebody here would prompt but",
    "start": "947040",
    "end": "953160"
  },
  {
    "text": "yeah let's move along and this is really the plan pricing bits of it this has",
    "start": "953160",
    "end": "958360"
  },
  {
    "text": "been in quired it's established what offerings are available the plan is selected and that's where we when we",
    "start": "958360",
    "end": "963720"
  },
  {
    "text": "take you to the next place where we're just trying to confirm and say that this is everything everything looking good and once you stay start membership",
    "start": "963720",
    "end": "970199"
  },
  {
    "text": "that's when it hits membership State service and the membership history service we we will write to our",
    "start": "970199",
    "end": "976199"
  },
  {
    "text": "persistent records and say that this is the row which is suggesting this is your",
    "start": "976199",
    "end": "982240"
  },
  {
    "text": "uh some pii information of course and the other bits being what plan what price here what country this would",
    "start": "982240",
    "end": "988160"
  },
  {
    "text": "establish Lish what catalog we offer you and what streaming experience you would",
    "start": "988160",
    "end": "993279"
  },
  {
    "text": "enjoy at that point and this is also the juncture where we emit all the events",
    "start": "993279",
    "end": "999120"
  },
  {
    "text": "which suggest that this membership is in a good state it is started out and",
    "start": "999120",
    "end": "1004759"
  },
  {
    "text": "messaging pipelines would pick that up and you would receive your welcome email saying welcome to Netflix this is a",
    "start": "1004759",
    "end": "1010519"
  },
  {
    "text": "subscription this is what you're paying so on and that same image data is also read by Downstream DSC teams and",
    "start": "1010519",
    "end": "1017560"
  },
  {
    "text": "analytics and and they would now know that the membership count has gone up by a little bit so again it's simplified",
    "start": "1017560",
    "end": "1023600"
  },
  {
    "text": "there are a lot more collaborating entities within Netflix there are more persistent stores that we have to write to but this is also just the happy path",
    "start": "1023600",
    "end": "1031720"
  },
  {
    "text": "this is all being done at extremely high scale this is a distributed system there are lots of failures so our concerns are",
    "start": "1031720",
    "end": "1037678"
  },
  {
    "text": "not just to uphold the happy path but also to jump in reconcile retries and",
    "start": "1037679",
    "end": "1043240"
  },
  {
    "text": "make choices so that if our online systems fail us we are able to still go find where the gaps are at and then fix",
    "start": "1043240",
    "end": "1050240"
  },
  {
    "text": "them when we can so this is roughly what our Tech",
    "start": "1050240",
    "end": "1058160"
  },
  {
    "text": "footprint looks like we are a distributed system of architecture we are optimized for high read",
    "start": "1058160",
    "end": "1064200"
  },
  {
    "text": "RPS which is request per second we have about 12 plus microservices we are running grpc or the Google remote",
    "start": "1064200",
    "end": "1071320"
  },
  {
    "text": "procedure call at the HTTP layer as far as the source code goes we are really a Java shop and more recently we've been",
    "start": "1071320",
    "end": "1078000"
  },
  {
    "text": "rewriting our apps using cotlin we use spring boot to bring it all together that's that's the server right there",
    "start": "1078000",
    "end": "1084919"
  },
  {
    "text": "we've been using Kafka a whole lot for all our messaging message passing and that's where we interface with for",
    "start": "1084919",
    "end": "1090919"
  },
  {
    "text": "example other teams like messaging or the downstream analytics we have spark and Flink to perform a lot of offline",
    "start": "1090919",
    "end": "1098080"
  },
  {
    "text": "reconciliation over our big data and we will be getting deeper into what the",
    "start": "1098080",
    "end": "1103240"
  },
  {
    "text": "reconciliation looks like and why it's needed and so on",
    "start": "1103240",
    "end": "1110320"
  },
  {
    "text": "as I said we don't just architect for the happy path the moment you're done writing code deploy to production the",
    "start": "1113280",
    "end": "1118400"
  },
  {
    "text": "job doesn't end there we also go on call and take care of operations and hope that no Pages go off but when they do",
    "start": "1118400",
    "end": "1125320"
  },
  {
    "text": "that can mean a lot of critical failures so there are a bunch of things we've chosen to do to make life easy so here",
    "start": "1125320",
    "end": "1131960"
  },
  {
    "text": "we go this this talks about once the code is in production what else can happen so we we use a lot of light we",
    "start": "1131960",
    "end": "1138600"
  },
  {
    "text": "transactions and retries for rights and this is to avoid gaps as the first line of defense in our online system so this",
    "start": "1138600",
    "end": "1145280"
  },
  {
    "text": "is really before anything bad can happen we are aware it's a distributed system so we try to retry or use lightweight",
    "start": "1145280",
    "end": "1151640"
  },
  {
    "text": "transactions at the Cassandra level to make sure that all the systems that need to know about a certain record are in",
    "start": "1151640",
    "end": "1158280"
  },
  {
    "text": "sync but that can fail Network failures and you know the gist we run multiple",
    "start": "1158280",
    "end": "1164440"
  },
  {
    "text": "reconciliation jobs this is where the spark and Kafka comes in that reconciles",
    "start": "1164440",
    "end": "1170880"
  },
  {
    "text": "these records within membership so as you've already seen membership itself has two systems of record we have the",
    "start": "1170880",
    "end": "1176440"
  },
  {
    "text": "subscriptions database and we have the member history database so if a right is present here but not in the other place",
    "start": "1176440",
    "end": "1182559"
  },
  {
    "text": "our offline jobs would work with our entire data set find the discrepancy and then bring both of those systems up to",
    "start": "1182559",
    "end": "1190120"
  },
  {
    "text": "date having said that membership also upholds that same accuracy guarantees",
    "start": "1190120",
    "end": "1195280"
  },
  {
    "text": "outside of our team so if membership thinks this is right we also believe that payments and billing and messaging",
    "start": "1195280",
    "end": "1202000"
  },
  {
    "text": "and all the other systems in the ecosystem should also know that this is the latest greatest state so in the offline world we run reconciliation",
    "start": "1202000",
    "end": "1208559"
  },
  {
    "text": "across all of those places to catch gaps we have a lot of data alerts that are built off of these Hive tables or the",
    "start": "1208559",
    "end": "1216000"
  },
  {
    "text": "backups from the Cassandra to make sure that if there are any gaps we find them and we fix them and if all of our online",
    "start": "1216000",
    "end": "1222400"
  },
  {
    "text": "systems like we also run repair jobs in spark like this is a discrepancy we know that the last right wins so upd with the",
    "start": "1222400",
    "end": "1228440"
  },
  {
    "text": "other place so we have a lot of those checks but if everything fails at the very end an on call human would go check",
    "start": "1228440",
    "end": "1234960"
  },
  {
    "text": "every last record and put every single one of them in good State and that's the promise that our team really values that",
    "start": "1234960",
    "end": "1241799"
  },
  {
    "text": "if our members are in good state they're paying they are good standing citizens they should be able to",
    "start": "1241799",
    "end": "1249158"
  },
  {
    "text": "stream now we get to the monitoring or really observability so bad things",
    "start": "1250159",
    "end": "1255480"
  },
  {
    "text": "happen uh when the pager goes off you usually have about a few minutes to respond so it's important that these",
    "start": "1255480",
    "end": "1262080"
  },
  {
    "text": "choices are weaved into the development cycle it's never an afterthought so we do extensive request and response",
    "start": "1262080",
    "end": "1268520"
  },
  {
    "text": "logging we have the ability to create dashboards and read all of this data using keano elastic search to make sure",
    "start": "1268520",
    "end": "1276320"
  },
  {
    "text": "that if there's a spike in the error rate we really can just go look it up on the logs dashboard and figure out very",
    "start": "1276320",
    "end": "1282559"
  },
  {
    "text": "quickly what endpoint and what is it that actually erroring out we use distributed tasing extensively this is",
    "start": "1282559",
    "end": "1289279"
  },
  {
    "text": "again going back to Netflix having a humongous number of microservices so the",
    "start": "1289279",
    "end": "1295080"
  },
  {
    "text": "ability to isolate and say which particular microservice is being latent or which particular microservice just",
    "start": "1295080",
    "end": "1301679"
  },
  {
    "text": "had a bad deployment and is suffering from a higher error rate to be able to cascad that that back and triangulate",
    "start": "1301679",
    "end": "1308720"
  },
  {
    "text": "and say exactly what's going on distributed tracing comes in really handy we have a lot of production alerts",
    "start": "1308720",
    "end": "1315159"
  },
  {
    "text": "so this would monitor all of your usual operation metrics like what's the latency per endpoint every app the",
    "start": "1315159",
    "end": "1321919"
  },
  {
    "text": "averages and we really track latency and we have those threshold Define that if a",
    "start": "1321919",
    "end": "1327760"
  },
  {
    "text": "particular endpoint is 20% more late in like fire and alert we do care about some of our core metrics so of course if",
    "start": "1327760",
    "end": "1334919"
  },
  {
    "text": "the sign up raate is not what it should be or if a lot more people are going on hold we we need to go back and check so",
    "start": "1334919",
    "end": "1340679"
  },
  {
    "text": "we get alerts for all of those and we at Netflix believe that being operationally",
    "start": "1340679",
    "end": "1347360"
  },
  {
    "text": "on top of things is extremely valuable because that's how our members enjoy the guarantee that when you go home hit play",
    "start": "1347360",
    "end": "1354360"
  },
  {
    "text": "it actually plays so in the backdrop we use a lot of this operational data to build ml models that can get better at",
    "start": "1354360",
    "end": "1361279"
  },
  {
    "text": "animaly detection so the second an issue happens somebody is paged and or we have",
    "start": "1361279",
    "end": "1367400"
  },
  {
    "text": "that resilience or that auto correction Auto Repair built in so all of those are",
    "start": "1367400",
    "end": "1372760"
  },
  {
    "text": "either fixed automatically or a non-all human could just jump in and resolve that problem for you",
    "start": "1372760",
    "end": "1379960"
  },
  {
    "text": "I think we can all take a breath I've been talking a whole lot we have also establish ground as to where does my",
    "start": "1381520",
    "end": "1388080"
  },
  {
    "text": "team sit what is our architecture what are some of the core flows that we uphold I think it's important that we",
    "start": "1388080",
    "end": "1394440"
  },
  {
    "text": "get deeper and see what is it that could have been different and how are we",
    "start": "1394440",
    "end": "1399919"
  },
  {
    "text": "getting ready for the future here I would also like to draw a comparison like while I was putting this talk",
    "start": "1399919",
    "end": "1405760"
  },
  {
    "text": "together it appears system design has a lot or getting good at system design",
    "start": "1405760",
    "end": "1411039"
  },
  {
    "text": "would be a lot like getting good at a game of chess just like you need to know the rules you need to figure out your",
    "start": "1411039",
    "end": "1416559"
  },
  {
    "text": "strategy you need to play a lot of games you need to join a club and sometimes you need to go back and analyze what",
    "start": "1416559",
    "end": "1423159"
  },
  {
    "text": "were your plays what worked out and what didn't and that's how you would really get better for the next set of games",
    "start": "1423159",
    "end": "1429039"
  },
  {
    "text": "that await you so our journey in system design or architectural Evolution would",
    "start": "1429039",
    "end": "1435120"
  },
  {
    "text": "be something similar so I roughly started my 10 here in this team about 5 years ago so there are some decisions",
    "start": "1435120",
    "end": "1443039"
  },
  {
    "text": "that were made that predate me but there is a learning for us and how we are",
    "start": "1443039",
    "end": "1448840"
  },
  {
    "text": "using that learning as we position ourselves to make the next set of architectural choices so that first one",
    "start": "1448840",
    "end": "1454400"
  },
  {
    "text": "is really about the Netflix pricing technology choices and what is it that we learned there the next one",
    "start": "1454400",
    "end": "1462600"
  },
  {
    "text": "is history or more like cataloging every single modification made to every single",
    "start": "1462600",
    "end": "1468000"
  },
  {
    "text": "record in our systems and why that's important and why at our scale why we get asked all of these questions all the",
    "start": "1468000",
    "end": "1474399"
  },
  {
    "text": "time and where were we at and finally the last one is where I'll walk you through that um what does that journey",
    "start": "1474399",
    "end": "1481480"
  },
  {
    "text": "in that scale expansion looks like and what is it that we doing to get better like where is it that we started out",
    "start": "1481480",
    "end": "1487840"
  },
  {
    "text": "some more requirements happen we evolved and then what does that path look like so with that jumping into the",
    "start": "1487840",
    "end": "1496240"
  },
  {
    "text": "first study I'll just take a water",
    "start": "1496240",
    "end": "1501200"
  },
  {
    "text": "break so as I said this pricing architecture Choice was made about a",
    "start": "1503960",
    "end": "1509200"
  },
  {
    "text": "decade ago this was at a time where the Netflix plan and pricing model was very",
    "start": "1509200",
    "end": "1514880"
  },
  {
    "text": "basic we just has had a few plans like anybody familiar here with relational databases that's a very simplistic",
    "start": "1514880",
    "end": "1521640"
  },
  {
    "text": "representation we just had the three plans one country one set of prices and",
    "start": "1521640",
    "end": "1526960"
  },
  {
    "text": "the membership Services were more or less stateless there was probably one monolith architecture or just one",
    "start": "1526960",
    "end": "1532960"
  },
  {
    "text": "monolith at the time membership services were called by a lot of other Netflix",
    "start": "1532960",
    "end": "1538000"
  },
  {
    "text": "Services because we would still uphold important things we would still be the service or the team of choice if you had",
    "start": "1538000",
    "end": "1543880"
  },
  {
    "text": "to start a membership make any modifications if you had to switch building Partners cancel so",
    "start": "1543880",
    "end": "1549799"
  },
  {
    "text": "on so the decision that was made was to have an inmemory library that would just",
    "start": "1549799",
    "end": "1556120"
  },
  {
    "text": "be like a just these few items here and it it would be small it would just be a",
    "start": "1556120",
    "end": "1562120"
  },
  {
    "text": "full few MBS it would be quick to edit and release and it would be just be consumed by one or two applications",
    "start": "1562120",
    "end": "1567200"
  },
  {
    "text": "within Netflix so at the time this seemed like a good choice but Netflix got extremely successful again some of",
    "start": "1567200",
    "end": "1574440"
  },
  {
    "text": "these errors and times predate my might andure here but this is what happened the plan offerings grew Netflix went",
    "start": "1574440",
    "end": "1582440"
  },
  {
    "text": "Global in 2016 but the expansion of let's go in a few more countries let's try Canada let's try Mexico let's try",
    "start": "1582440",
    "end": "1588799"
  },
  {
    "text": "Europe all of that happened goes back to 2010 the domain scope of this particular",
    "start": "1588799",
    "end": "1594440"
  },
  {
    "text": "membership Library expanded to include quality of service supported devices download access and the list goes on so",
    "start": "1594440",
    "end": "1601159"
  },
  {
    "text": "in in in some ways this this Library started doing much more than it had",
    "start": "1601159",
    "end": "1606720"
  },
  {
    "text": "originally thought out or you know originally proposed it to be doing more",
    "start": "1606720",
    "end": "1611960"
  },
  {
    "text": "applications within and out outside membership became part of critical flaws and the adoption of this Library grew so",
    "start": "1611960",
    "end": "1619279"
  },
  {
    "text": "in simple terms what I'm trying to say is if there was a popularity contest for libraries this Library just one hands",
    "start": "1619279",
    "end": "1626520"
  },
  {
    "text": "down and in a second we'll see what that Journey looked like So the plan offerings grew as an",
    "start": "1626520",
    "end": "1633200"
  },
  {
    "text": "example we have the basic standard premium but then we did experimentation just to name a few we have the mobile",
    "start": "1633200",
    "end": "1640120"
  },
  {
    "text": "plan that's now offered in India Asia and many countries in Africa it was not",
    "start": "1640120",
    "end": "1646600"
  },
  {
    "text": "there from the get-go we do run experimentation we've had a mobile plus plan and so on so basically we grew in",
    "start": "1646600",
    "end": "1653360"
  },
  {
    "text": "the plan offerings dimension on the other hand as the Netflix business evolved we grew in the",
    "start": "1653360",
    "end": "1659480"
  },
  {
    "text": "geography Dimension if that was not enough the",
    "start": "1659480",
    "end": "1664720"
  },
  {
    "text": "domain expanded we started now doing supported devices and we started doing quality of",
    "start": "1664720",
    "end": "1671559"
  },
  {
    "text": "service the membership services grew so we started out with one service give or take one giant monol",
    "start": "1671559",
    "end": "1678120"
  },
  {
    "text": "now there's a subscription service there's a Gateway service there's an asyn service and as you can tell on the",
    "start": "1678120",
    "end": "1683559"
  },
  {
    "text": "right is pretty much how the library is expanding and on the left is how the adoption is growing so the same Library",
    "start": "1683559",
    "end": "1690279"
  },
  {
    "text": "lived in one server now is already part of many different servers time went on",
    "start": "1690279",
    "end": "1697240"
  },
  {
    "text": "and the library as I said kept getting popular so what we're seeing here is growth Engineering Systems messaging",
    "start": "1697240",
    "end": "1702640"
  },
  {
    "text": "billing playback API Gateway ad Services you name it everybody needed that like library and it kept getting bigger and",
    "start": "1702640",
    "end": "1711200"
  },
  {
    "text": "bigger and let's also not forget this is also when Netflix probably went from 10 million to 200 million users so there",
    "start": "1711200",
    "end": "1718000"
  },
  {
    "text": "was horizontal scale so every single app that existed within Netflix was now",
    "start": "1718000",
    "end": "1723039"
  },
  {
    "text": "going from a 10 node cluster to probably 100 and let's remind ourselves that",
    "start": "1723039",
    "end": "1728159"
  },
  {
    "text": "every single one of them had this library and this is how we finally landed where the library itself grew",
    "start": "1728159",
    "end": "1734200"
  },
  {
    "text": "because now there's so much complexity It's a combination of an inmemory persistent store there is code logic to",
    "start": "1734200",
    "end": "1740440"
  },
  {
    "text": "go with the modifications availability rules so on and the general sprawl",
    "start": "1740440",
    "end": "1746519"
  },
  {
    "text": "across all of",
    "start": "1746519",
    "end": "1749519"
  },
  {
    "text": "Netflix this highlights all the challenges but I think the peak one here which is actually my favorite because I",
    "start": "1752919",
    "end": "1759159"
  },
  {
    "text": "wrote typically when you're appearing for an interview somebody asked you to write a web crawler so all the practice",
    "start": "1759159",
    "end": "1764640"
  },
  {
    "text": "that I got in the interviews really came in handy because at it speak we were running a web crawler at Netflix scale",
    "start": "1764640",
    "end": "1770720"
  },
  {
    "text": "to make sure every single node within Netflix had the latest greatest version",
    "start": "1770720",
    "end": "1775880"
  },
  {
    "text": "of the library and also lets me mindful of the fact that this Library had very",
    "start": "1775880",
    "end": "1781120"
  },
  {
    "text": "critical information we're talking about Netflix prices if altered Union guarantees that every single node or",
    "start": "1781120",
    "end": "1788320"
  },
  {
    "text": "every single app or system that is giving out a price number needs to be the same you can't afford to have 100",
    "start": "1788320",
    "end": "1794440"
  },
  {
    "text": "incarnations of a price value so in terms of operational inefficiency I'll just paraphrase all of this it it was a",
    "start": "1794440",
    "end": "1801519"
  },
  {
    "text": "giant Library so developing releasing all of that validation became extremely",
    "start": "1801519",
    "end": "1807159"
  },
  {
    "text": "hard if there was any problem in how this was configured it would go fail in",
    "start": "1807159",
    "end": "1812399"
  },
  {
    "text": "some remote Corner because the library wouldn't just go by itself it would also pull in like 50 60 other dependencies so",
    "start": "1812399",
    "end": "1820519"
  },
  {
    "text": "it's it's really not something that you want to sign up for operationally that I released this library and then it went",
    "start": "1820519",
    "end": "1826519"
  },
  {
    "text": "and failed like 20 nodes away from me or 20 hops away from me so so it was",
    "start": "1826519",
    "end": "1831799"
  },
  {
    "text": "getting very very hard as I mentioned already reliability is something that we",
    "start": "1831799",
    "end": "1836960"
  },
  {
    "text": "care about very deeply and this is price so we really don't have the luxury of showing you a different price on the signup screen and when you get that",
    "start": "1836960",
    "end": "1843080"
  },
  {
    "text": "email that's off so making sure that this price point is exactly what it needs to be at all points required us to",
    "start": "1843080",
    "end": "1850600"
  },
  {
    "text": "really run away from this architecture so the requirements for the",
    "start": "1850600",
    "end": "1855720"
  },
  {
    "text": "new plan pricing architecture like if you just look at this you'll be like this is a no-brainer like you know this is so standard like you put a assistent",
    "start": "1855720",
    "end": "1862840"
  },
  {
    "text": "store you get all the guarantees you have the grpc service right in the middle it takes care of all of the",
    "start": "1862840",
    "end": "1868639"
  },
  {
    "text": "burden of the scale scale it horizontally and so on the only fun thing I would say which is not truly",
    "start": "1868639",
    "end": "1874840"
  },
  {
    "text": "simplistic is that because this was such a popular Library if you really have to create a service for this from the",
    "start": "1874840",
    "end": "1880480"
  },
  {
    "text": "get-go we had to onboard millions of requests per second right from like you know Day Zero",
    "start": "1880480",
    "end": "1887880"
  },
  {
    "text": "we didn't really get that slow ramp up it was really we migrated traffic off of the library and into a live system while",
    "start": "1887880",
    "end": "1894960"
  },
  {
    "text": "the other things were straightforward that's where the challenge lived so to summarize this is what the",
    "start": "1894960",
    "end": "1902559"
  },
  {
    "text": "current version looks like and we have that cockroach DB database like I at the",
    "start": "1902559",
    "end": "1908080"
  },
  {
    "text": "very beginning I introduced you to the fact that a plan pricing information lives there but it just didn't start out",
    "start": "1908080",
    "end": "1914399"
  },
  {
    "text": "like that we are now in that state where we have all the Rel ational guarantees persistence so on we have a grpc service",
    "start": "1914399",
    "end": "1922279"
  },
  {
    "text": "that manages all of your traffic which like on good days 3 4 million uh requests per second and",
    "start": "1922279",
    "end": "1930519"
  },
  {
    "text": "that's why we are using a lot of these Shenanigans around client side caching at the grpc level we ourselves cach the",
    "start": "1930519",
    "end": "1937200"
  },
  {
    "text": "entire records in in memory so as not to have the Cockroach DP as a single point",
    "start": "1937200",
    "end": "1942639"
  },
  {
    "text": "of failure so we had to deploy a whole bunch of optimizations there to hold up in the face of as much traffic and also",
    "start": "1942639",
    "end": "1948679"
  },
  {
    "text": "to open the gates to so many important services within Netflix and as you can",
    "start": "1948679",
    "end": "1954279"
  },
  {
    "text": "see all of the apps directly called into this plan pricing service all of the",
    "start": "1954279",
    "end": "1960960"
  },
  {
    "text": "external teams and apps within Netflix also call into this service so while",
    "start": "1960960",
    "end": "1966960"
  },
  {
    "text": "this architecture itself is simplified and clean the real takeaway is the journey to get here was a multi-year",
    "start": "1966960",
    "end": "1973600"
  },
  {
    "text": "long migration across 20 Plus Engineering teams and 50 plus apps and five plus libraries which is also",
    "start": "1973600",
    "end": "1980240"
  },
  {
    "text": "interesting that given you're really talking about all of Netflix so let alone the apps there are also these",
    "start": "1980240",
    "end": "1986440"
  },
  {
    "text": "libraries that have an important footprint within Netflix and these libraries themselves would distribute",
    "start": "1986440",
    "end": "1992639"
  },
  {
    "text": "the membership Library so your library is everywhere and then good luck trying to migrate it",
    "start": "1992639",
    "end": "1997880"
  },
  {
    "text": "away so while this was our journey the key takeaway here that all of us can",
    "start": "1997880",
    "end": "2004679"
  },
  {
    "text": "benefit from if you're making architectural choices in this case it was as simple as",
    "start": "2004679",
    "end": "2010639"
  },
  {
    "text": "do we need a library or an app like it was a simple one at the very beginning probably 10 15 years ago somebody chose",
    "start": "2010639",
    "end": "2018000"
  },
  {
    "text": "that the library was a good choice so really maybe future proofing your technology choices a little bit can",
    "start": "2018000",
    "end": "2024399"
  },
  {
    "text": "really go a long way so this was showing up to be a problem in our operational logs so the other thing is you should",
    "start": "2024399",
    "end": "2030799"
  },
  {
    "text": "not ignore that that's a signal every week or every two weeks when you're going off call you look at what's going",
    "start": "2030799",
    "end": "2036639"
  },
  {
    "text": "on if there's there's this item that is pesky and shows up all the time that's a sign of tech debt you should pivot",
    "start": "2036639",
    "end": "2043120"
  },
  {
    "text": "quickly and tackle it or else damage control after many years can be expensive so I have to report back that",
    "start": "2043120",
    "end": "2050599"
  },
  {
    "text": "while a new service is really the de facto place that's where all our plan pricing availability everything is",
    "start": "2050599",
    "end": "2057240"
  },
  {
    "text": "handled it is serving all of your traffic this Library still exists in certain corners of Netflix and it's",
    "start": "2057240",
    "end": "2063839"
  },
  {
    "text": "really like we have to find the bandwidth to run the these migrations and it's still an ongoing effort so I",
    "start": "2063839",
    "end": "2070079"
  },
  {
    "text": "just wish we had pivoted sooner but now when we are faced with technology choices if you're really doing a reite",
    "start": "2070079",
    "end": "2076398"
  },
  {
    "text": "we just don't solve for today tomorrow or the next month we actually solve for a few years so answer some of those",
    "start": "2076399",
    "end": "2082960"
  },
  {
    "text": "questions when you're in the driving seat so I'll pause there for a second",
    "start": "2082960",
    "end": "2090398"
  },
  {
    "text": "and the next use case study that we go deeper into is member",
    "start": "2090399",
    "end": "2095878"
  },
  {
    "text": "history",
    "start": "2095879",
    "end": "2098879"
  },
  {
    "text": "so when we first started out with member history it was really only available via application Level events produced by",
    "start": "2104240",
    "end": "2110359"
  },
  {
    "text": "services in a fire and forget fashion every service endpoint wrote a bunch of",
    "start": "2110359",
    "end": "2115440"
  },
  {
    "text": "updates and then would emit a single event afterwards these events were used",
    "start": "2115440",
    "end": "2120839"
  },
  {
    "text": "for tracing historical State triggering actions for other services customer service operations and business",
    "start": "2120839",
    "end": "2126320"
  },
  {
    "text": "reporting I think I've touched upon how membership importance and criticality evolved so we",
    "start": "2126320",
    "end": "2133480"
  },
  {
    "text": "were at that juncture where the ability to answer questions related to member State at the microsc granularity became",
    "start": "2133480",
    "end": "2140800"
  },
  {
    "text": "incumbent but since we only maintain the latest graders or the current state of a member this was really a requirement",
    "start": "2140800",
    "end": "2147440"
  },
  {
    "text": "that was left un unfulfilled so I know that's a lot of text there I think a picture can do justice so this is what",
    "start": "2147440",
    "end": "2155560"
  },
  {
    "text": "was really going on so I think by now we already familiar with the membership architecture on the right you have the",
    "start": "2155560",
    "end": "2161920"
  },
  {
    "text": "plan pricing bits and the code Redemption and the member pricing service which upholds all of your State",
    "start": "2161920",
    "end": "2168079"
  },
  {
    "text": "Management once you're already a current member on the left is more of our uh subscription management going on",
    "start": "2168079",
    "end": "2175000"
  },
  {
    "text": "and in the middle is some of the partner bits and if you see all these events in green is everything that the system is",
    "start": "2175000",
    "end": "2182280"
  },
  {
    "text": "emitting so on the left if somebody started their membership we would emit start membership event this would be",
    "start": "2182280",
    "end": "2188440"
  },
  {
    "text": "used by for example your messaging system and then send and craft you that email saying that congratulations you",
    "start": "2188440",
    "end": "2194880"
  },
  {
    "text": "just signed up this is your subscription this is your billing country this is what you're going to be paying us these are your other options and these are",
    "start": "2194880",
    "end": "2200720"
  },
  {
    "text": "your show recommendations same thing if you were to take any action if you were to change",
    "start": "2200720",
    "end": "2206680"
  },
  {
    "text": "plan or if you were to switch your uh uh we call the partner like you could be",
    "start": "2206680",
    "end": "2213880"
  },
  {
    "text": "signed up as a Netflix organic member but at any point you might say that I want to now pay for my Netflix account",
    "start": "2213880",
    "end": "2220200"
  },
  {
    "text": "via for example App Store like an iTunes sign up so that's that's something what we call as a bilding partner change",
    "start": "2220200",
    "end": "2226400"
  },
  {
    "text": "event so our system would Adit that an example here is you are getting renewed",
    "start": "2226400",
    "end": "2231960"
  },
  {
    "text": "so we would emit a renewal event but from this architecture what you're really seeing is that there hundreds of",
    "start": "2231960",
    "end": "2238880"
  },
  {
    "text": "events that are getting emitted there's a whole bunch of rights that are happening and these events could go out",
    "start": "2238880",
    "end": "2244480"
  },
  {
    "text": "at any time or not and if at any micr second if somebody were to call me in",
    "start": "2244480",
    "end": "2249560"
  },
  {
    "text": "question like I'm I'm the membership on call and they're like at this time somebody took this action for this",
    "start": "2249560",
    "end": "2255160"
  },
  {
    "text": "account can you come back and say who made that change why did they make it and what really happened or how did our",
    "start": "2255160",
    "end": "2261079"
  },
  {
    "text": "systems respond given membership at the time this is like a few years ago we only had the current state of a member",
    "start": "2261079",
    "end": "2268000"
  },
  {
    "text": "we could not answer like it's a blind spot and we could hope for the best that these events were persisted in a limited",
    "start": "2268000",
    "end": "2274880"
  },
  {
    "text": "cap capacity but there if there any failures for us to trace that figure it out reconcile all of that was not",
    "start": "2274880",
    "end": "2282960"
  },
  {
    "text": "possible so this summarizes what the challenges were I've already talked through a bunch of",
    "start": "2282960",
    "end": "2289200"
  },
  {
    "text": "those these events were also a combination of change history and business logic there's no persistence no",
    "start": "2289200",
    "end": "2295200"
  },
  {
    "text": "guarantees that there would be written if there's a application logic or database failure so there's a whole",
    "start": "2295200",
    "end": "2301240"
  },
  {
    "text": "bunch of problems to summarize these are the key ones so there's less than desirability observability there's a gap",
    "start": "2301240",
    "end": "2308480"
  },
  {
    "text": "in the ability to easily and accurately view the series of State changes to our operational data data stores and there's",
    "start": "2308480",
    "end": "2315359"
  },
  {
    "text": "really a split brain on Mission critical information so different consumers are eating these events using them in",
    "start": "2315359",
    "end": "2321880"
  },
  {
    "text": "different ways and then after the math they come back and ask questions that why is this the case there's no way for",
    "start": "2321880",
    "end": "2328079"
  },
  {
    "text": "us to go back and actually reconcile all of that state and build it out and say okay this is exactly what",
    "start": "2328079",
    "end": "2334119"
  },
  {
    "text": "happened this is where we decided that that we needed a new service in our mids",
    "start": "2334119",
    "end": "2340160"
  },
  {
    "text": "so this is the established goals that we had when we took this turn on that architectural",
    "start": "2340160",
    "end": "2345920"
  },
  {
    "text": "conversation so this is something that some of the databases already do it it's really an appendonly log but we were",
    "start": "2345920",
    "end": "2351760"
  },
  {
    "text": "looking to borrow from that and create a direct Delta or capture the direct Delta of changes on our key operational data",
    "start": "2351760",
    "end": "2357520"
  },
  {
    "text": "sources this really a change data capture pattern and in lab person terms",
    "start": "2357520",
    "end": "2362640"
  },
  {
    "text": "like as I said this is really what you depend Only log is but we didn't have the luxur to just pick this off the shelf we were on Cassandra 2 at the time",
    "start": "2362640",
    "end": "2370319"
  },
  {
    "text": "and given we have to uphold High availability our team doesn't really",
    "start": "2370319",
    "end": "2375960"
  },
  {
    "text": "have the luxury to now start doing a science project on top of an operational database which can potentially bring",
    "start": "2375960",
    "end": "2381839"
  },
  {
    "text": "down service so while yes we could hag into Cassandra we chose not to so this",
    "start": "2381839",
    "end": "2388200"
  },
  {
    "text": "is what the new architecture looks like so this is again a little thick but I think that's where the meat of the",
    "start": "2388200",
    "end": "2393720"
  },
  {
    "text": "puzzle is we have a lot of membership services so that's abstracted away but at any time you're trying to update a",
    "start": "2393720",
    "end": "2400599"
  },
  {
    "text": "record so right in the middle is our membership subscription service that is the system of record for all of our 220",
    "start": "2400599",
    "end": "2407200"
  },
  {
    "text": "million growing back by the Cassandra database so we here working through an example so",
    "start": "2407200",
    "end": "2413560"
  },
  {
    "text": "right on the top let me see if this works yeah we are working through a billing partner update as I mentioned",
    "start": "2413560",
    "end": "2419079"
  },
  {
    "text": "earlier this is when somebody who's already paying via Netflix chooses to move to a different paying partner it",
    "start": "2419079",
    "end": "2425359"
  },
  {
    "text": "could be apple it could be Xfinity it could be something else so this is really an update to the cast member data",
    "start": "2425359",
    "end": "2431160"
  },
  {
    "text": "which is our database right here and as I said this will just maintain the current state so once this right goes",
    "start": "2431160",
    "end": "2437359"
  },
  {
    "text": "through what you would see is this has been updated but what we also want to capture is that that particular",
    "start": "2437359",
    "end": "2443800"
  },
  {
    "text": "timestamp we will in an async way write to the history database capturing that",
    "start": "2443800",
    "end": "2449720"
  },
  {
    "text": "this is the change that was made and captured that so every time a right is",
    "start": "2449720",
    "end": "2454920"
  },
  {
    "text": "updated we basically tracking packing it in an append only lock fashion and the other cleanup that we did earlier you",
    "start": "2454920",
    "end": "2462040"
  },
  {
    "text": "saw there like all of these 2030 apps they're writing out your events to whatever other team they would like to",
    "start": "2462040",
    "end": "2468400"
  },
  {
    "text": "in whatever fashion that split brain problem is also solved because now",
    "start": "2468400",
    "end": "2473440"
  },
  {
    "text": "member history came in the picture we started tracking all of this information",
    "start": "2473440",
    "end": "2478920"
  },
  {
    "text": "persisting it and started using keyone streams to emit so the ability to retrace retract or if there's a failure",
    "start": "2478920",
    "end": "2486040"
  },
  {
    "text": "to come back and reconcile all of that became a possible with the new architecture so these were some of the",
    "start": "2486040",
    "end": "2493079"
  },
  {
    "text": "planned wins we were able to unlock Super Power debugging ability so for if I'm on call",
    "start": "2493079",
    "end": "2499880"
  },
  {
    "text": "somebody comes and asks that at this microc this happened to this record can you come back and tell me exactly why it",
    "start": "2499880",
    "end": "2505720"
  },
  {
    "text": "happened or my system received this event and somebody provided consent can you double check that that actually",
    "start": "2505720",
    "end": "2511400"
  },
  {
    "text": "happen I was able to answer all of those questions because now we just didn't have a current View of all our",
    "start": "2511400",
    "end": "2516680"
  },
  {
    "text": "memberships but we could go back to every single right that happened at every single microc since that",
    "start": "2516680",
    "end": "2522920"
  },
  {
    "text": "membership started to exist we replaced all our app level events with a view on",
    "start": "2522920",
    "end": "2528000"
  },
  {
    "text": "top of member history so this goes back to there is this one system which is the interface to all other systems within",
    "start": "2528000",
    "end": "2534480"
  },
  {
    "text": "Netflix so everything needed to go through there there was never this that this right happened or didn't happen or",
    "start": "2534480",
    "end": "2540040"
  },
  {
    "text": "you know like the Ws in addition with schematization and persistence it was possible like we also",
    "start": "2540040",
    "end": "2547040"
  },
  {
    "text": "brought in better Tech of the shell we started using Iceberg tables using these we were persisting every single event",
    "start": "2547040",
    "end": "2554599"
  },
  {
    "text": "that we emitted using member history streams this gave us the ability to reconcile we could reconcile history",
    "start": "2554599",
    "end": "2560800"
  },
  {
    "text": "with our core membership systems and make sure everything is in order and we",
    "start": "2560800",
    "end": "2565839"
  },
  {
    "text": "were also able to replay so suppose a sister team analytics or Downstream came back and said that we didn't hear about",
    "start": "2565839",
    "end": "2571480"
  },
  {
    "text": "these 20,000 memberships on that certain day can you replay them given now we have a persistent store backing all of",
    "start": "2571480",
    "end": "2578240"
  },
  {
    "text": "these events we were also able to do that so reconciliation and making sure all of the systems within Netflix see",
    "start": "2578240",
    "end": "2584559"
  },
  {
    "text": "the same exact accurate records became",
    "start": "2584559",
    "end": "2589800"
  },
  {
    "text": "possible with the history service and it didn't end there there",
    "start": "2589800",
    "end": "2595359"
  },
  {
    "text": "was some other ways where history just you know came and stole the day there was this issue that happened with data",
    "start": "2595359",
    "end": "2602319"
  },
  {
    "text": "corruption this was at the Cassandra Lair and Netflix was one of the few teams or apps that was impacted and this",
    "start": "2602319",
    "end": "2609400"
  },
  {
    "text": "was really because of the scale that we operate in we had made a change to our data store to add a collections data",
    "start": "2609400",
    "end": "2616559"
  },
  {
    "text": "type but this resulted in data corruption and we lost some data but",
    "start": "2616559",
    "end": "2621800"
  },
  {
    "text": "because we already had history at play and this is really our second system of record we were able to replay back all",
    "start": "2621800",
    "end": "2628520"
  },
  {
    "text": "of that records that were corrupted and bring everything back to what it should",
    "start": "2628520",
    "end": "2635079"
  },
  {
    "text": "be so other than saving the day in the times of critical issues the history",
    "start": "2635079",
    "end": "2640160"
  },
  {
    "text": "service now feeds into customer service contact analysis so if somebody calls and says so and so happened there's like",
    "start": "2640160",
    "end": "2646960"
  },
  {
    "text": "you straight dig in run a query in membership history and you would know exactly to the microsc granularity what",
    "start": "2646960",
    "end": "2652640"
  },
  {
    "text": "changed and why it is now feeding into Downstream analytics pipelines messaging",
    "start": "2652640",
    "end": "2657680"
  },
  {
    "text": "experience and has become a backbone of membership Data Systems so the key takeaway here is some architectural",
    "start": "2657680",
    "end": "2664480"
  },
  {
    "text": "choices May pay off heavy dividends once at play we should have the courage to invest in big bets like building out",
    "start": "2664480",
    "end": "2671400"
  },
  {
    "text": "member history and getting it to this juncture was probably a three or four year long journey but it has really paid",
    "start": "2671400",
    "end": "2679200"
  },
  {
    "text": "for all the effort that we put in worth its weight and gold and some more and with this we really getting to",
    "start": "2679200",
    "end": "2686240"
  },
  {
    "text": "the final lap of this stock and this is where we'll talk about how these subscriptions ecosystems evolve so it",
    "start": "2686240",
    "end": "2693559"
  },
  {
    "text": "starts out with what are the basic architectural choices we did what are the basic of the Shelf uh bits we took",
    "start": "2693559",
    "end": "2700200"
  },
  {
    "text": "piece together and started serving traffic and then how in our journey from really like every 100 million how that",
    "start": "2700200",
    "end": "2707280"
  },
  {
    "text": "has evolved so yeah this also brings back",
    "start": "2707280",
    "end": "2713520"
  },
  {
    "text": "all our system design one on oneone classes or you know all of us Engineers have to go through this whenever you try",
    "start": "2713520",
    "end": "2720240"
  },
  {
    "text": "switching jobs so we're all aware if somebody tells you you need a scalable performant highly available distri",
    "start": "2720240",
    "end": "2725920"
  },
  {
    "text": "distributed fall tolerance system how would you do it so because we are joining the distributed systems Journey",
    "start": "2725920",
    "end": "2732920"
  },
  {
    "text": "here a lot of these problems have already been solved for us so you pick up the latest and greatest so you pick",
    "start": "2732920",
    "end": "2739079"
  },
  {
    "text": "up a grpc service at your app level you pick up a database which could be",
    "start": "2739079",
    "end": "2744119"
  },
  {
    "text": "Cassandra for all your scaling needs and remember to put that backup Cassandra there for fall tolerance and I think",
    "start": "2744119",
    "end": "2751440"
  },
  {
    "text": "they should pretty much get you through",
    "start": "2751440",
    "end": "2757880"
  },
  {
    "text": "but does it really work there is no ability to reconcile State without talking to the live system as I said",
    "start": "2758000",
    "end": "2764559"
  },
  {
    "text": "earlier given this is a very highly available service and system we can't really go and run queries in the back",
    "start": "2764559",
    "end": "2770680"
  },
  {
    "text": "end or reconcile data on the live system there is no ability to walk the data set quickly and there's no deletion pipeline",
    "start": "2770680",
    "end": "2777640"
  },
  {
    "text": "to keep the records in check going back to the fact that this is a billions game",
    "start": "2777640",
    "end": "2782920"
  },
  {
    "text": "and there is really no infinite scale what we needed here was to unlock Big",
    "start": "2782920",
    "end": "2789559"
  },
  {
    "text": "Data capabilities so for all of our database needs we also now added a spark",
    "start": "2789559",
    "end": "2794720"
  },
  {
    "text": "aspor which picks up the latest backup of the data and then puts it in Hive",
    "start": "2794720",
    "end": "2800280"
  },
  {
    "text": "tables this is where we run all our reconciliation jobs run all our data auditor alerts and figure out there are",
    "start": "2800280",
    "end": "2806839"
  },
  {
    "text": "gaps and do some degree of self-healing now if this were grade",
    "start": "2806839",
    "end": "2813400"
  },
  {
    "text": "school and not cuon I would ask you what were we missing in there so yeah now we have history so we just got",
    "start": "2813400",
    "end": "2820040"
  },
  {
    "text": "better at answering a lot of the other questions about you know better debug ability or tracing member state so",
    "start": "2820040",
    "end": "2827240"
  },
  {
    "text": "adding history in the mix also removed that single point of failure vulnerability from membership systems",
    "start": "2827240",
    "end": "2833480"
  },
  {
    "text": "and of course like as an engineer now I can track back and see exactly what's going on",
    "start": "2833480",
    "end": "2839559"
  },
  {
    "text": "where so this architecture solves a lot of our problems but as I said no",
    "start": "2839559",
    "end": "2844880"
  },
  {
    "text": "infinite scale so we would have issues with our slas if the data keeps growing which thanks to you I know some of you",
    "start": "2844880",
    "end": "2851440"
  },
  {
    "text": "are going to go home and sign up from Netflix today so that's another few entries there that's",
    "start": "2851440",
    "end": "2857800"
  },
  {
    "text": "where cash is something that we have to start looking into so this is something that's on the table probably we'll start",
    "start": "2857800",
    "end": "2864079"
  },
  {
    "text": "executing on this this quarter next quarter and this is really coming back to say that when consensus based lookups",
    "start": "2864079",
    "end": "2871280"
  },
  {
    "text": "will not serve us well hash based lookups will so we really looking to to front all of a persistent database with",
    "start": "2871280",
    "end": "2879040"
  },
  {
    "text": "EV cache and we will be trading off for performance at the cost of lower",
    "start": "2879040",
    "end": "2885039"
  },
  {
    "text": "consistency so the key takeaway here is there is really nothing like infinite scale every system has a limit to which",
    "start": "2885319",
    "end": "2892720"
  },
  {
    "text": "it will perform optimally it is important to stay on top of innovation and invest in rites and Architectural",
    "start": "2892720",
    "end": "2899839"
  },
  {
    "text": "Evolution proactively we should not be waiting for an outage to really understand what our system limits are",
    "start": "2899839",
    "end": "2907040"
  },
  {
    "text": "and to summarize we really getting at the juncture where it's all going to come to an end so the Netflix pricing",
    "start": "2907040",
    "end": "2915400"
  },
  {
    "text": "choice that really is the key takeaway from that use case is we should future",
    "start": "2915400",
    "end": "2920880"
  },
  {
    "text": "proof our technology choices as much as we can or react or pivot before it's too",
    "start": "2920880",
    "end": "2926680"
  },
  {
    "text": "late the key learning from the member history case is some architectural choices May pay off heavy dividends once",
    "start": "2926680",
    "end": "2933599"
  },
  {
    "text": "at play have the courage to invest in big bets and finally the last",
    "start": "2933599",
    "end": "2940319"
  },
  {
    "text": "one which is about the member subscriptions Evolution which is really you really need to keep at it and you're",
    "start": "2940319",
    "end": "2946920"
  },
  {
    "text": "never really done and you might wonder why I said that that's really because",
    "start": "2946920",
    "end": "2952960"
  },
  {
    "text": "this is a problem that my team is faced with somebody very famous said this many many years ago there are only two hard",
    "start": "2952960",
    "end": "2959400"
  },
  {
    "text": "things in computer science one is Cash inv validation and the other one is naming things so",
    "start": "2959400",
    "end": "2966520"
  },
  {
    "text": "while I'm busy taking care of cashing and figuring out what's going on there",
    "start": "2966520",
    "end": "2971760"
  },
  {
    "text": "if you're looking for your next show to watch that would be the Queen's Gambit and that's also where I borrowed a lot",
    "start": "2971760",
    "end": "2977040"
  },
  {
    "text": "of the visuals from this is a story about a girl Beth Haron who goes on this",
    "start": "2977040",
    "end": "2984040"
  },
  {
    "text": "journey to become the best chess player in the whole white world so that's",
    "start": "2984040",
    "end": "2989720"
  },
  {
    "text": "her and with that really have the end",
    "start": "2989720",
    "end": "2997520"
  },
  {
    "text": "[Music]",
    "start": "2998040",
    "end": "3004340"
  }
]