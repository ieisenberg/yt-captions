[
  {
    "start": "0",
    "end": "75000"
  },
  {
    "text": "[Music]",
    "start": "3360",
    "end": "6550"
  },
  {
    "text": "welcome",
    "start": "9920",
    "end": "10559"
  },
  {
    "text": "to the mechanical sympathy track at qcon",
    "start": "10559",
    "end": "14000"
  },
  {
    "text": "in this talk i'd like to share our",
    "start": "14000",
    "end": "15759"
  },
  {
    "text": "experiences in optimizing production",
    "start": "15759",
    "end": "17600"
  },
  {
    "text": "systems",
    "start": "17600",
    "end": "19279"
  },
  {
    "text": "like most jobs but especially software",
    "start": "19279",
    "end": "21199"
  },
  {
    "text": "engineering",
    "start": "21199",
    "end": "22320"
  },
  {
    "text": "eighty percent of the time is grunt work",
    "start": "22320",
    "end": "24640"
  },
  {
    "text": "but twenty percent of the time we get to",
    "start": "24640",
    "end": "26160"
  },
  {
    "text": "step out and see how we're doing with",
    "start": "26160",
    "end": "27760"
  },
  {
    "text": "respect to other things",
    "start": "27760",
    "end": "29760"
  },
  {
    "text": "and these are those experiences that i",
    "start": "29760",
    "end": "31199"
  },
  {
    "text": "would like to share today",
    "start": "31199",
    "end": "33440"
  },
  {
    "text": "my name is ramesh subramanian i'm a",
    "start": "33440",
    "end": "36079"
  },
  {
    "text": "principal engineer at target",
    "start": "36079",
    "end": "38239"
  },
  {
    "text": "i work for the high performance",
    "start": "38239",
    "end": "39520"
  },
  {
    "text": "computing group located in sunnyvale",
    "start": "39520",
    "end": "42800"
  },
  {
    "text": "our group's charter is to drive compute",
    "start": "42800",
    "end": "44559"
  },
  {
    "text": "efficiency throughout the company",
    "start": "44559",
    "end": "46879"
  },
  {
    "text": "both in the products we build and",
    "start": "46879",
    "end": "48640"
  },
  {
    "text": "support and as advisors to the company",
    "start": "48640",
    "end": "51440"
  },
  {
    "text": "at large",
    "start": "51440",
    "end": "53280"
  },
  {
    "text": "the reason i chose this title pragmatic",
    "start": "53280",
    "end": "55920"
  },
  {
    "text": "performance",
    "start": "55920",
    "end": "57280"
  },
  {
    "text": "is to underscore the constraints under",
    "start": "57280",
    "end": "58960"
  },
  {
    "text": "which we often find ourselves",
    "start": "58960",
    "end": "61600"
  },
  {
    "text": "rarely enough time or resources",
    "start": "61600",
    "end": "64640"
  },
  {
    "text": "limited ability to perturb a system in",
    "start": "64640",
    "end": "66640"
  },
  {
    "text": "production",
    "start": "66640",
    "end": "68400"
  },
  {
    "text": "and the general reluctance of it",
    "start": "68400",
    "end": "70320"
  },
  {
    "text": "departments to adopt bleeding edge",
    "start": "70320",
    "end": "72240"
  },
  {
    "text": "software or hardware",
    "start": "72240",
    "end": "75680"
  },
  {
    "start": "75000",
    "end": "485000"
  },
  {
    "text": "what's the one thing i'd like to leave",
    "start": "76560",
    "end": "78000"
  },
  {
    "text": "you with at the end of this talk",
    "start": "78000",
    "end": "80479"
  },
  {
    "text": "it's that despite the seemingly bleak",
    "start": "80479",
    "end": "82320"
  },
  {
    "text": "picture i just painted",
    "start": "82320",
    "end": "84159"
  },
  {
    "text": "there's often hope buried in the",
    "start": "84159",
    "end": "85759"
  },
  {
    "text": "specifics of your particular problem",
    "start": "85759",
    "end": "89439"
  },
  {
    "text": "general solutions are great because",
    "start": "89439",
    "end": "92479"
  },
  {
    "text": "well they are general they work in all",
    "start": "92479",
    "end": "95600"
  },
  {
    "text": "situations but this generality comes at",
    "start": "95600",
    "end": "98880"
  },
  {
    "text": "a cost",
    "start": "98880",
    "end": "100640"
  },
  {
    "text": "so what i'm going to do today is to",
    "start": "100640",
    "end": "102320"
  },
  {
    "text": "encourage you to embrace your inner",
    "start": "102320",
    "end": "104399"
  },
  {
    "text": "snowflake",
    "start": "104399",
    "end": "105759"
  },
  {
    "text": "find out what's really your problem and",
    "start": "105759",
    "end": "108320"
  },
  {
    "text": "solve",
    "start": "108320",
    "end": "108799"
  },
  {
    "text": "just that as one who has been",
    "start": "108799",
    "end": "111920"
  },
  {
    "text": "responsible for more bugs than i'd care",
    "start": "111920",
    "end": "113759"
  },
  {
    "text": "to admit",
    "start": "113759",
    "end": "115280"
  },
  {
    "text": "i'm highly biased towards picking",
    "start": "115280",
    "end": "116960"
  },
  {
    "text": "solutions with low complexity",
    "start": "116960",
    "end": "119439"
  },
  {
    "text": "both in terms of implementation and",
    "start": "119439",
    "end": "121600"
  },
  {
    "text": "maintenance",
    "start": "121600",
    "end": "124159"
  },
  {
    "text": "i'm going to illustrate this point with",
    "start": "125439",
    "end": "126960"
  },
  {
    "text": "two simple examples that are as old as",
    "start": "126960",
    "end": "128800"
  },
  {
    "text": "the hills",
    "start": "128800",
    "end": "130399"
  },
  {
    "text": "the first is evaluating a boolean",
    "start": "130399",
    "end": "132000"
  },
  {
    "text": "expression as an example",
    "start": "132000",
    "end": "134239"
  },
  {
    "text": "a and b are not c and d",
    "start": "134239",
    "end": "137520"
  },
  {
    "text": "where a b c d are expressions that",
    "start": "137520",
    "end": "141120"
  },
  {
    "text": "evaluate to true or false",
    "start": "141120",
    "end": "144080"
  },
  {
    "text": "the other is the problem of determining",
    "start": "144080",
    "end": "146400"
  },
  {
    "text": "whether and where",
    "start": "146400",
    "end": "148000"
  },
  {
    "text": "a string s1 is contained in a string s2",
    "start": "148000",
    "end": "152239"
  },
  {
    "text": "solutions to this problem have existed",
    "start": "152239",
    "end": "154160"
  },
  {
    "text": "for over 50 years in c standard",
    "start": "154160",
    "end": "156000"
  },
  {
    "text": "library and pretty much every language",
    "start": "156000",
    "end": "158879"
  },
  {
    "text": "provides some form of solution to this",
    "start": "158879",
    "end": "160640"
  },
  {
    "text": "problem",
    "start": "160640",
    "end": "162959"
  },
  {
    "text": "let me set the business context that",
    "start": "164319",
    "end": "166080"
  },
  {
    "text": "motivates optimizing the performance of",
    "start": "166080",
    "end": "168080"
  },
  {
    "text": "boolean expression evaluation",
    "start": "168080",
    "end": "170959"
  },
  {
    "text": "our group is responsible for the",
    "start": "170959",
    "end": "172480"
  },
  {
    "text": "development and support of thalamus",
    "start": "172480",
    "end": "174879"
  },
  {
    "text": "a real-time monitoring and alerting",
    "start": "174879",
    "end": "176879"
  },
  {
    "text": "system deployed at target",
    "start": "176879",
    "end": "179760"
  },
  {
    "text": "as its popularity has grown so has its",
    "start": "179760",
    "end": "182239"
  },
  {
    "text": "footprint",
    "start": "182239",
    "end": "183040"
  },
  {
    "text": "and its usage anything we can do to",
    "start": "183040",
    "end": "185840"
  },
  {
    "text": "speed it up",
    "start": "185840",
    "end": "186720"
  },
  {
    "text": "has a disproportionate impact thalamus",
    "start": "186720",
    "end": "190159"
  },
  {
    "text": "touches over a petabyte a week of data",
    "start": "190159",
    "end": "192159"
  },
  {
    "text": "traffic",
    "start": "192159",
    "end": "193360"
  },
  {
    "text": "this is truly a firehose of data to",
    "start": "193360",
    "end": "195280"
  },
  {
    "text": "process and requires us to be extremely",
    "start": "195280",
    "end": "197840"
  },
  {
    "text": "conscious of extracting",
    "start": "197840",
    "end": "199040"
  },
  {
    "text": "every ounce of performance",
    "start": "199040",
    "end": "202799"
  },
  {
    "text": "how do boolean expressions get used in",
    "start": "204319",
    "end": "205840"
  },
  {
    "text": "thalamus",
    "start": "205840",
    "end": "207440"
  },
  {
    "text": "let's say that you are a user of",
    "start": "207440",
    "end": "208959"
  },
  {
    "text": "thalamus the first thing you do is to",
    "start": "208959",
    "end": "211440"
  },
  {
    "text": "write a filter",
    "start": "211440",
    "end": "213120"
  },
  {
    "text": "a filter is a way of expressing whether",
    "start": "213120",
    "end": "215200"
  },
  {
    "text": "a packet is of interest",
    "start": "215200",
    "end": "217200"
  },
  {
    "text": "the good news is that in most cases most",
    "start": "217200",
    "end": "219440"
  },
  {
    "text": "packets are not",
    "start": "219440",
    "end": "220720"
  },
  {
    "text": "of interest that's because you are",
    "start": "220720",
    "end": "223440"
  },
  {
    "text": "looking for deviations from the norm",
    "start": "223440",
    "end": "226400"
  },
  {
    "text": "but this is also why optimizing filters",
    "start": "226400",
    "end": "229040"
  },
  {
    "text": "becomes",
    "start": "229040",
    "end": "229840"
  },
  {
    "text": "important it is the gatekeeper to",
    "start": "229840",
    "end": "232239"
  },
  {
    "text": "subsequent computations",
    "start": "232239",
    "end": "235040"
  },
  {
    "text": "so how do you go about writing a filter",
    "start": "235040",
    "end": "237920"
  },
  {
    "text": "one is to write it in lua",
    "start": "237920",
    "end": "240319"
  },
  {
    "text": "lua is an interpreted language designed",
    "start": "240319",
    "end": "242720"
  },
  {
    "text": "as an embedding",
    "start": "242720",
    "end": "243760"
  },
  {
    "text": "and embedded language hence it fits",
    "start": "243760",
    "end": "246959"
  },
  {
    "text": "perfectly well into our c plus",
    "start": "246959",
    "end": "248959"
  },
  {
    "text": "framework the other is to use a domain",
    "start": "248959",
    "end": "252480"
  },
  {
    "text": "specific language",
    "start": "252480",
    "end": "253760"
  },
  {
    "text": "in our case we call it tql for today",
    "start": "253760",
    "end": "256799"
  },
  {
    "text": "think of tql as the equivalent",
    "start": "256799",
    "end": "258560"
  },
  {
    "text": "of writing a select statement in sql",
    "start": "258560",
    "end": "262799"
  },
  {
    "text": "the details and the syntax of tql are",
    "start": "263759",
    "end": "265840"
  },
  {
    "text": "not important",
    "start": "265840",
    "end": "267280"
  },
  {
    "text": "what is important is that we have a",
    "start": "267280",
    "end": "268800"
  },
  {
    "text": "compiler that turns a tql filter",
    "start": "268800",
    "end": "271040"
  },
  {
    "text": "into a tree leaf expressions",
    "start": "271040",
    "end": "274320"
  },
  {
    "text": "a b and c in this example perform",
    "start": "274320",
    "end": "277120"
  },
  {
    "text": "computations based on values of keys",
    "start": "277120",
    "end": "279680"
  },
  {
    "text": "in the json packet and return true or",
    "start": "279680",
    "end": "282240"
  },
  {
    "text": "false",
    "start": "282240",
    "end": "283840"
  },
  {
    "text": "examples are regex matches substring",
    "start": "283840",
    "end": "286240"
  },
  {
    "text": "matches",
    "start": "286240",
    "end": "287360"
  },
  {
    "text": "membership and sets numerical",
    "start": "287360",
    "end": "289199"
  },
  {
    "text": "comparisons comparisons",
    "start": "289199",
    "end": "291120"
  },
  {
    "text": "range checks and so on",
    "start": "291120",
    "end": "294160"
  },
  {
    "text": "the tree is generated at compile time",
    "start": "294160",
    "end": "296800"
  },
  {
    "text": "the key decision at runtime",
    "start": "296800",
    "end": "298400"
  },
  {
    "text": "is do we start down the left branch of",
    "start": "298400",
    "end": "300080"
  },
  {
    "text": "the route or the right branch",
    "start": "300080",
    "end": "303758"
  },
  {
    "text": "when it comes to making decisions like",
    "start": "305120",
    "end": "306560"
  },
  {
    "text": "this we can look for inspirations from a",
    "start": "306560",
    "end": "308720"
  },
  {
    "text": "variety of sources",
    "start": "308720",
    "end": "310080"
  },
  {
    "text": "ranging from yogi berra to the matrix",
    "start": "310080",
    "end": "313360"
  },
  {
    "text": "and for the artists among us we could",
    "start": "313360",
    "end": "315360"
  },
  {
    "text": "take the lead from robert frost",
    "start": "315360",
    "end": "318639"
  },
  {
    "text": "but seriously we need a disciplined",
    "start": "318639",
    "end": "320639"
  },
  {
    "text": "decision-making process",
    "start": "320639",
    "end": "324560"
  },
  {
    "text": "before we answer the question posed in",
    "start": "324560",
    "end": "326400"
  },
  {
    "text": "the slide in what order should tree the",
    "start": "326400",
    "end": "328560"
  },
  {
    "text": "tree be evaluated",
    "start": "328560",
    "end": "330479"
  },
  {
    "text": "let's see why order matters at all it",
    "start": "330479",
    "end": "333680"
  },
  {
    "text": "matters because of short circuiting",
    "start": "333680",
    "end": "336639"
  },
  {
    "text": "in other words if you had to evaluate",
    "start": "336639",
    "end": "338320"
  },
  {
    "text": "the expression a and b",
    "start": "338320",
    "end": "340560"
  },
  {
    "text": "and you evaluated b and it turned out to",
    "start": "340560",
    "end": "342240"
  },
  {
    "text": "be false you know that you don't need to",
    "start": "342240",
    "end": "344639"
  },
  {
    "text": "evaluate a",
    "start": "344639",
    "end": "346800"
  },
  {
    "text": "but what if i told you that a is false",
    "start": "346800",
    "end": "348800"
  },
  {
    "text": "99 times out of 100",
    "start": "348800",
    "end": "350880"
  },
  {
    "text": "whereas b is false only 50 times out of",
    "start": "350880",
    "end": "353680"
  },
  {
    "text": "100.",
    "start": "353680",
    "end": "355120"
  },
  {
    "text": "you might be tempted to pick a first",
    "start": "355120",
    "end": "358560"
  },
  {
    "text": "but what if i also told you that a cost",
    "start": "358560",
    "end": "360639"
  },
  {
    "text": "a thousand times as much as",
    "start": "360639",
    "end": "362080"
  },
  {
    "text": "b a could be a complex regex com",
    "start": "362080",
    "end": "365360"
  },
  {
    "text": "evaluation b could be a simple integer",
    "start": "365360",
    "end": "368400"
  },
  {
    "text": "equality comparison",
    "start": "368400",
    "end": "370160"
  },
  {
    "text": "would you still pick a first",
    "start": "370160",
    "end": "373520"
  },
  {
    "text": "so the intuition behind the solution is",
    "start": "375039",
    "end": "377039"
  },
  {
    "text": "as follows",
    "start": "377039",
    "end": "378960"
  },
  {
    "text": "in the tree that we just saw we maintain",
    "start": "378960",
    "end": "380880"
  },
  {
    "text": "statistics for the costs",
    "start": "380880",
    "end": "382479"
  },
  {
    "text": "and the outcomes the outcomes being true",
    "start": "382479",
    "end": "384639"
  },
  {
    "text": "or false",
    "start": "384639",
    "end": "385680"
  },
  {
    "text": "of each node now assume the root node",
    "start": "385680",
    "end": "389039"
  },
  {
    "text": "is and we have two choices we could go",
    "start": "389039",
    "end": "392080"
  },
  {
    "text": "left or right",
    "start": "392080",
    "end": "393759"
  },
  {
    "text": "if we go left we definitely pay the cost",
    "start": "393759",
    "end": "396080"
  },
  {
    "text": "of evaluating the left child",
    "start": "396080",
    "end": "398639"
  },
  {
    "text": "and if the left child evaluated true",
    "start": "398639",
    "end": "401759"
  },
  {
    "text": "we would pay an additional cost of the",
    "start": "401759",
    "end": "403680"
  },
  {
    "text": "right child",
    "start": "403680",
    "end": "405759"
  },
  {
    "text": "similarly if we went right first we are",
    "start": "405759",
    "end": "407840"
  },
  {
    "text": "definitely on the hook",
    "start": "407840",
    "end": "409440"
  },
  {
    "text": "for paying the cost of the right child",
    "start": "409440",
    "end": "411759"
  },
  {
    "text": "and we may end up having to pay the cost",
    "start": "411759",
    "end": "413360"
  },
  {
    "text": "of the left child",
    "start": "413360",
    "end": "414319"
  },
  {
    "text": "if the rest right child evaluated to",
    "start": "414319",
    "end": "416720"
  },
  {
    "text": "true",
    "start": "416720",
    "end": "418160"
  },
  {
    "text": "so the strategy is to pick the minimum",
    "start": "418160",
    "end": "420800"
  },
  {
    "text": "average cost",
    "start": "420800",
    "end": "423840"
  },
  {
    "text": "now the proof that this strategy is in",
    "start": "423919",
    "end": "426240"
  },
  {
    "text": "fact optimal",
    "start": "426240",
    "end": "427280"
  },
  {
    "text": "has some interesting twists that are",
    "start": "427280",
    "end": "429199"
  },
  {
    "text": "beyond the scope of this talk",
    "start": "429199",
    "end": "431759"
  },
  {
    "text": "but you can recognize the cost of going",
    "start": "431759",
    "end": "434840"
  },
  {
    "text": "left",
    "start": "434840",
    "end": "436319"
  },
  {
    "text": "versus the cost of going right",
    "start": "436319",
    "end": "440080"
  },
  {
    "text": "now in the beginning our next question",
    "start": "440080",
    "end": "443120"
  },
  {
    "text": "is how does this perform",
    "start": "443120",
    "end": "444319"
  },
  {
    "text": "in practice so we ran a simulation where",
    "start": "444319",
    "end": "448240"
  },
  {
    "text": "we generated the structure of the tree",
    "start": "448240",
    "end": "450639"
  },
  {
    "text": "the outcomes and the costs at random",
    "start": "450639",
    "end": "454319"
  },
  {
    "text": "the x-axis shows the progress of the",
    "start": "454319",
    "end": "456479"
  },
  {
    "text": "simulation",
    "start": "456479",
    "end": "458080"
  },
  {
    "text": "the y-axis shows the total cost of the",
    "start": "458080",
    "end": "460479"
  },
  {
    "text": "tree evaluation",
    "start": "460479",
    "end": "463199"
  },
  {
    "text": "in the beginning",
    "start": "463199",
    "end": "465840"
  },
  {
    "text": "in the beginning we focused on learning",
    "start": "469280",
    "end": "471199"
  },
  {
    "text": "the statistics of the distribution",
    "start": "471199",
    "end": "472960"
  },
  {
    "text": "without taking advantage of it after",
    "start": "472960",
    "end": "476240"
  },
  {
    "text": "that we started exploiting what we had",
    "start": "476240",
    "end": "478000"
  },
  {
    "text": "learned and relatively soon the",
    "start": "478000",
    "end": "480319"
  },
  {
    "text": "algorithm converged",
    "start": "480319",
    "end": "481759"
  },
  {
    "text": "onto the optimal solution",
    "start": "481759",
    "end": "485039"
  },
  {
    "start": "485000",
    "end": "752000"
  },
  {
    "text": "in summary optimizing boolean expression",
    "start": "486560",
    "end": "489199"
  },
  {
    "text": "evaluation is important",
    "start": "489199",
    "end": "490639"
  },
  {
    "text": "because filters are intensively invoked",
    "start": "490639",
    "end": "492879"
  },
  {
    "text": "in our real-time monitoring alert system",
    "start": "492879",
    "end": "496400"
  },
  {
    "text": "the context that i have been asking you",
    "start": "496400",
    "end": "498240"
  },
  {
    "text": "to look for but the context",
    "start": "498240",
    "end": "500240"
  },
  {
    "text": "in this case was that the cost and",
    "start": "500240",
    "end": "502560"
  },
  {
    "text": "outcomes",
    "start": "502560",
    "end": "503759"
  },
  {
    "text": "of the individual atoms of the boolean",
    "start": "503759",
    "end": "505759"
  },
  {
    "text": "expression could be learned",
    "start": "505759",
    "end": "508879"
  },
  {
    "text": "retrofitting this knowledge into the",
    "start": "508879",
    "end": "510639"
  },
  {
    "text": "existing system was not onerous",
    "start": "510639",
    "end": "513039"
  },
  {
    "text": "we did need to maintain a few additional",
    "start": "513039",
    "end": "515279"
  },
  {
    "text": "counters with each node",
    "start": "515279",
    "end": "516959"
  },
  {
    "text": "and a protocol to age out old",
    "start": "516959",
    "end": "519518"
  },
  {
    "text": "information",
    "start": "519519",
    "end": "521680"
  },
  {
    "text": "the reward for our pains was a 2x",
    "start": "521680",
    "end": "523360"
  },
  {
    "text": "improvement",
    "start": "523360",
    "end": "524720"
  },
  {
    "text": "this is non-trivial compared to the",
    "start": "524720",
    "end": "526480"
  },
  {
    "text": "amount of minimal amount of disruption",
    "start": "526480",
    "end": "528800"
  },
  {
    "text": "that we had introduced",
    "start": "528800",
    "end": "531760"
  },
  {
    "text": "let's look at another example also",
    "start": "533200",
    "end": "535360"
  },
  {
    "text": "motivated by thalamus",
    "start": "535360",
    "end": "536880"
  },
  {
    "text": "the monitoring and alerting system we",
    "start": "536880",
    "end": "538640"
  },
  {
    "text": "described earlier",
    "start": "538640",
    "end": "540880"
  },
  {
    "text": "here the underlying packet distribution",
    "start": "540880",
    "end": "543040"
  },
  {
    "text": "is affected",
    "start": "543040",
    "end": "543920"
  },
  {
    "text": "using kafka in an ideal world",
    "start": "543920",
    "end": "547279"
  },
  {
    "text": "each kafka topic would be a logical unit",
    "start": "547279",
    "end": "550240"
  },
  {
    "text": "for example the logs from a specific",
    "start": "550240",
    "end": "552240"
  },
  {
    "text": "business application this allows easy",
    "start": "552240",
    "end": "555839"
  },
  {
    "text": "horizontal scaling",
    "start": "555839",
    "end": "558080"
  },
  {
    "text": "each application or topic would get its",
    "start": "558080",
    "end": "560399"
  },
  {
    "text": "own virtual server",
    "start": "560399",
    "end": "562399"
  },
  {
    "text": "whose underlying hardware resources",
    "start": "562399",
    "end": "563920"
  },
  {
    "text": "could be scaled independent of others",
    "start": "563920",
    "end": "567519"
  },
  {
    "text": "however rit department in their infinite",
    "start": "567519",
    "end": "569680"
  },
  {
    "text": "wisdom merged",
    "start": "569680",
    "end": "570640"
  },
  {
    "text": "several applications into a single topic",
    "start": "570640",
    "end": "573440"
  },
  {
    "text": "threatening to overwhelm",
    "start": "573440",
    "end": "574800"
  },
  {
    "text": "even a well-provisioned server",
    "start": "574800",
    "end": "577839"
  },
  {
    "text": "and i don't mean to pour any kind of",
    "start": "577839",
    "end": "581200"
  },
  {
    "text": "doubt on this wisdom of rit department",
    "start": "581200",
    "end": "583839"
  },
  {
    "text": "but this reflects the fact that in large",
    "start": "583839",
    "end": "586480"
  },
  {
    "text": "enterprises one is often optimizing for",
    "start": "586480",
    "end": "588640"
  },
  {
    "text": "several things",
    "start": "588640",
    "end": "590080"
  },
  {
    "text": "in this case they just didn't happen to",
    "start": "590080",
    "end": "591519"
  },
  {
    "text": "be optimizing for us",
    "start": "591519",
    "end": "594480"
  },
  {
    "text": "so what we ended up having to do was to",
    "start": "595600",
    "end": "598959"
  },
  {
    "text": "build a dis",
    "start": "598959",
    "end": "599760"
  },
  {
    "text": "aggregator we needed to undo what the it",
    "start": "599760",
    "end": "602640"
  },
  {
    "text": "department had done",
    "start": "602640",
    "end": "604399"
  },
  {
    "text": "so we needed to break the raging torrent",
    "start": "604399",
    "end": "607440"
  },
  {
    "text": "into manageable rivulets i beg your",
    "start": "607440",
    "end": "610720"
  },
  {
    "text": "pardon for overworking the streaming",
    "start": "610720",
    "end": "612160"
  },
  {
    "text": "metaphor a little bit",
    "start": "612160",
    "end": "613440"
  },
  {
    "text": "but this is a rough schematic of what",
    "start": "613440",
    "end": "614959"
  },
  {
    "text": "looks like things looks like",
    "start": "614959",
    "end": "617200"
  },
  {
    "text": "what the dis aggregator needs to do is",
    "start": "617200",
    "end": "619519"
  },
  {
    "text": "to route packets with",
    "start": "619519",
    "end": "620800"
  },
  {
    "text": "minimal delay",
    "start": "620800",
    "end": "623839"
  },
  {
    "text": "this would have been an impossible task",
    "start": "625040",
    "end": "627120"
  },
  {
    "text": "if it weren't for some valuable context",
    "start": "627120",
    "end": "628880"
  },
  {
    "text": "that we could leverage",
    "start": "628880",
    "end": "631440"
  },
  {
    "text": "each packet contains a key value as",
    "start": "631440",
    "end": "633839"
  },
  {
    "text": "shown",
    "start": "633839",
    "end": "634800"
  },
  {
    "text": "so in this case if we knew the applique",
    "start": "634800",
    "end": "636800"
  },
  {
    "text": "the value of the key application id",
    "start": "636800",
    "end": "639279"
  },
  {
    "text": "was joe's application we route it to the",
    "start": "639279",
    "end": "641680"
  },
  {
    "text": "joe topic and we're done",
    "start": "641680",
    "end": "644320"
  },
  {
    "text": "however we simply don't have time to",
    "start": "644320",
    "end": "646320"
  },
  {
    "text": "json decode the packet",
    "start": "646320",
    "end": "649040"
  },
  {
    "text": "but what if we could find the location",
    "start": "649040",
    "end": "650480"
  },
  {
    "text": "of the key we knew exactly where it",
    "start": "650480",
    "end": "652160"
  },
  {
    "text": "existed in the packet",
    "start": "652160",
    "end": "653839"
  },
  {
    "text": "we could grab the value and be off and",
    "start": "653839",
    "end": "655760"
  },
  {
    "text": "running",
    "start": "655760",
    "end": "657360"
  },
  {
    "text": "this is where the function str str came",
    "start": "657360",
    "end": "659519"
  },
  {
    "text": "to the rescue",
    "start": "659519",
    "end": "661440"
  },
  {
    "text": "but what challenged us given the size of",
    "start": "661440",
    "end": "663360"
  },
  {
    "text": "the packets was",
    "start": "663360",
    "end": "664959"
  },
  {
    "text": "whether we could do better than a naive",
    "start": "664959",
    "end": "667360"
  },
  {
    "text": "implementation",
    "start": "667360",
    "end": "668320"
  },
  {
    "text": "of str str",
    "start": "668320",
    "end": "671279"
  },
  {
    "text": "in this example the haystack is a",
    "start": "671760",
    "end": "673440"
  },
  {
    "text": "sentence the quick brown fox jumped over",
    "start": "673440",
    "end": "675600"
  },
  {
    "text": "the lazy dog",
    "start": "675600",
    "end": "677120"
  },
  {
    "text": "and the needle is the word fox",
    "start": "677120",
    "end": "680240"
  },
  {
    "text": "normally we would have started our",
    "start": "680240",
    "end": "681760"
  },
  {
    "text": "search at position zero",
    "start": "681760",
    "end": "684240"
  },
  {
    "text": "now assume that we had three experts who",
    "start": "684240",
    "end": "687120"
  },
  {
    "text": "offer the following hints",
    "start": "687120",
    "end": "689120"
  },
  {
    "text": "expert 0 tells us to start searching at",
    "start": "689120",
    "end": "691120"
  },
  {
    "text": "16",
    "start": "691120",
    "end": "692720"
  },
  {
    "text": "expert 2 tells us to start searching at",
    "start": "692720",
    "end": "695040"
  },
  {
    "text": "position 10",
    "start": "695040",
    "end": "696880"
  },
  {
    "text": "and expert 3 tells us to start searching",
    "start": "696880",
    "end": "699440"
  },
  {
    "text": "at position 19. how does this affect",
    "start": "699440",
    "end": "702959"
  },
  {
    "text": "scan length and the cost of the search",
    "start": "702959",
    "end": "707040"
  },
  {
    "text": "the answer is as follows in the first",
    "start": "711040",
    "end": "713040"
  },
  {
    "text": "case if you look at it we had no hint at",
    "start": "713040",
    "end": "714639"
  },
  {
    "text": "all",
    "start": "714639",
    "end": "715200"
  },
  {
    "text": "so we would start the offset is zero and",
    "start": "715200",
    "end": "717600"
  },
  {
    "text": "our cost is 16.",
    "start": "717600",
    "end": "719839"
  },
  {
    "text": "in the second case we are told exactly",
    "start": "719839",
    "end": "722079"
  },
  {
    "text": "where the word fox starts from we have",
    "start": "722079",
    "end": "724240"
  },
  {
    "text": "virtually zero cost",
    "start": "724240",
    "end": "727360"
  },
  {
    "text": "if we listen to expert two we would",
    "start": "727360",
    "end": "728720"
  },
  {
    "text": "start position start at position 10",
    "start": "728720",
    "end": "730959"
  },
  {
    "text": "well not exactly where we'd like to be",
    "start": "730959",
    "end": "733360"
  },
  {
    "text": "but definitely better than starting from",
    "start": "733360",
    "end": "734959"
  },
  {
    "text": "zero",
    "start": "734959",
    "end": "736880"
  },
  {
    "text": "three is an interesting case because",
    "start": "736880",
    "end": "738079"
  },
  {
    "text": "here actually we get hammered",
    "start": "738079",
    "end": "740079"
  },
  {
    "text": "we are told to start looking from",
    "start": "740079",
    "end": "741360"
  },
  {
    "text": "position 19 which means we would scan to",
    "start": "741360",
    "end": "743839"
  },
  {
    "text": "the end of the string",
    "start": "743839",
    "end": "745040"
  },
  {
    "text": "find nothing there then we'd start at",
    "start": "745040",
    "end": "747200"
  },
  {
    "text": "position 0 again",
    "start": "747200",
    "end": "748560"
  },
  {
    "text": "and then we would find fox",
    "start": "748560",
    "end": "751839"
  },
  {
    "text": "so how do you build a predictor this is",
    "start": "753920",
    "end": "757040"
  },
  {
    "text": "made difficult by the fact that you",
    "start": "757040",
    "end": "758480"
  },
  {
    "text": "don't have time to examine the packet",
    "start": "758480",
    "end": "760959"
  },
  {
    "text": "all you know is its length on the bright",
    "start": "760959",
    "end": "764160"
  },
  {
    "text": "side you don't need to be that good",
    "start": "764160",
    "end": "766240"
  },
  {
    "text": "you can be hopelessly wrong quite a few",
    "start": "766240",
    "end": "768160"
  },
  {
    "text": "times you just need to be better on",
    "start": "768160",
    "end": "770639"
  },
  {
    "text": "average",
    "start": "770639",
    "end": "771200"
  },
  {
    "text": "than starting from scratch",
    "start": "771200",
    "end": "774639"
  },
  {
    "text": "now this slide looks a bit dense but",
    "start": "776480",
    "end": "778560"
  },
  {
    "text": "let's walk through it",
    "start": "778560",
    "end": "781120"
  },
  {
    "text": "so what we did was for every possible",
    "start": "781120",
    "end": "782959"
  },
  {
    "text": "packet length",
    "start": "782959",
    "end": "784240"
  },
  {
    "text": "we model the offset which is the true",
    "start": "784240",
    "end": "786320"
  },
  {
    "text": "location of the needle",
    "start": "786320",
    "end": "788160"
  },
  {
    "text": "as a normally distributed random",
    "start": "788160",
    "end": "789760"
  },
  {
    "text": "variable",
    "start": "789760",
    "end": "791680"
  },
  {
    "text": "that's not exactly accurate since",
    "start": "791680",
    "end": "793279"
  },
  {
    "text": "offsets cannot be negative",
    "start": "793279",
    "end": "795040"
  },
  {
    "text": "but the random variable can but as the",
    "start": "795040",
    "end": "798000"
  },
  {
    "text": "adage goes",
    "start": "798000",
    "end": "799040"
  },
  {
    "text": "all models are wrong some are useful",
    "start": "799040",
    "end": "803680"
  },
  {
    "text": "next we estimated the mean and standard",
    "start": "804079",
    "end": "806320"
  },
  {
    "text": "deviation from historical data",
    "start": "806320",
    "end": "809360"
  },
  {
    "text": "note one key difference between this and",
    "start": "809360",
    "end": "811279"
  },
  {
    "text": "the previous example",
    "start": "811279",
    "end": "813120"
  },
  {
    "text": "in that case learning was done online in",
    "start": "813120",
    "end": "815600"
  },
  {
    "text": "real time",
    "start": "815600",
    "end": "817040"
  },
  {
    "text": "in this case it is done offline and",
    "start": "817040",
    "end": "819360"
  },
  {
    "text": "uploaded to the server periodically",
    "start": "819360",
    "end": "821440"
  },
  {
    "text": "as a configuration parameter",
    "start": "821440",
    "end": "829279"
  },
  {
    "text": "the next thing we do is given that we",
    "start": "829279",
    "end": "832480"
  },
  {
    "text": "have mu and sigma",
    "start": "832480",
    "end": "834240"
  },
  {
    "text": "we'll start our search from a little bit",
    "start": "834240",
    "end": "836079"
  },
  {
    "text": "to the left of the mean",
    "start": "836079",
    "end": "838320"
  },
  {
    "text": "remember from our previous example where",
    "start": "838320",
    "end": "840160"
  },
  {
    "text": "we were looking for the fox",
    "start": "840160",
    "end": "841920"
  },
  {
    "text": "that it is better to undershoot than to",
    "start": "841920",
    "end": "843920"
  },
  {
    "text": "overshoot while guessing the offset",
    "start": "843920",
    "end": "847279"
  },
  {
    "text": "so we call the start position y and",
    "start": "847279",
    "end": "849839"
  },
  {
    "text": "write y as mu",
    "start": "849839",
    "end": "851120"
  },
  {
    "text": "minus alpha times sigma",
    "start": "851120",
    "end": "854240"
  },
  {
    "text": "we have mu and sigma from the data",
    "start": "854240",
    "end": "857040"
  },
  {
    "text": "question is how do we go about finding",
    "start": "857040",
    "end": "859040"
  },
  {
    "text": "alpha to do so let us model the cost",
    "start": "859040",
    "end": "864480"
  },
  {
    "text": "of the search as a fixed cost c plus a",
    "start": "864480",
    "end": "867760"
  },
  {
    "text": "variable cost",
    "start": "867760",
    "end": "869199"
  },
  {
    "text": "which is proportional to the length of",
    "start": "869199",
    "end": "870720"
  },
  {
    "text": "the string that has to be scanned",
    "start": "870720",
    "end": "873600"
  },
  {
    "text": "so the cost is c plus beta times l",
    "start": "873600",
    "end": "876880"
  },
  {
    "text": "for some constant beta we estimate c and",
    "start": "876880",
    "end": "880720"
  },
  {
    "text": "beta by performing a number of searches",
    "start": "880720",
    "end": "882800"
  },
  {
    "text": "and fitting a straight line to the",
    "start": "882800",
    "end": "884560"
  },
  {
    "text": "observed costs",
    "start": "884560",
    "end": "887360"
  },
  {
    "text": "now let s of x comma y be the cost when",
    "start": "888959",
    "end": "892160"
  },
  {
    "text": "x",
    "start": "892160",
    "end": "892480"
  },
  {
    "text": "is the true offset and y is where we",
    "start": "892480",
    "end": "894720"
  },
  {
    "text": "start the search",
    "start": "894720",
    "end": "896800"
  },
  {
    "text": "the formula for s depends on whether we",
    "start": "896800",
    "end": "898800"
  },
  {
    "text": "undershoot or overshoot",
    "start": "898800",
    "end": "901440"
  },
  {
    "text": "if we undershoot it is c plus beta times",
    "start": "901440",
    "end": "904480"
  },
  {
    "text": "x minus y",
    "start": "904480",
    "end": "906480"
  },
  {
    "text": "if we overshoot we pay twice the first",
    "start": "906480",
    "end": "909440"
  },
  {
    "text": "cost",
    "start": "909440",
    "end": "910000"
  },
  {
    "text": "is c plus beta times l minus y",
    "start": "910000",
    "end": "913040"
  },
  {
    "text": "that takes us to the end of the string",
    "start": "913040",
    "end": "915199"
  },
  {
    "text": "then we start again from the beginning",
    "start": "915199",
    "end": "916720"
  },
  {
    "text": "and paste c",
    "start": "916720",
    "end": "917519"
  },
  {
    "text": "plus beta times x",
    "start": "917519",
    "end": "920560"
  },
  {
    "text": "so given that y is some fixed starting",
    "start": "921440",
    "end": "923760"
  },
  {
    "text": "position and x is a random variable",
    "start": "923760",
    "end": "926320"
  },
  {
    "text": "we can compute the expected cost of s",
    "start": "926320",
    "end": "928800"
  },
  {
    "text": "using the integral shown",
    "start": "928800",
    "end": "931600"
  },
  {
    "text": "and lastly if we minimize s with respect",
    "start": "931600",
    "end": "934480"
  },
  {
    "text": "to y",
    "start": "934480",
    "end": "935120"
  },
  {
    "text": "and we invoke some high school calculus",
    "start": "935120",
    "end": "937199"
  },
  {
    "text": "we're actually quite lucky",
    "start": "937199",
    "end": "938399"
  },
  {
    "text": "to end up with a nice closed form",
    "start": "938399",
    "end": "939759"
  },
  {
    "text": "solution for alpha",
    "start": "939759",
    "end": "943199"
  },
  {
    "start": "942000",
    "end": "1069000"
  },
  {
    "text": "summarizing this example the idea was to",
    "start": "944240",
    "end": "947279"
  },
  {
    "text": "look for context",
    "start": "947279",
    "end": "949279"
  },
  {
    "text": "we found it in the fact that the",
    "start": "949279",
    "end": "950560"
  },
  {
    "text": "location of the needle in the haystack",
    "start": "950560",
    "end": "952399"
  },
  {
    "text": "could be learnt",
    "start": "952399",
    "end": "954480"
  },
  {
    "text": "note that we use learning in a very weak",
    "start": "954480",
    "end": "956160"
  },
  {
    "text": "sense over here",
    "start": "956160",
    "end": "957839"
  },
  {
    "text": "we don't need to be that accurate we",
    "start": "957839",
    "end": "960399"
  },
  {
    "text": "just need to be better than starting",
    "start": "960399",
    "end": "961920"
  },
  {
    "text": "from zero",
    "start": "961920",
    "end": "964160"
  },
  {
    "text": "learning can be done either online or",
    "start": "964160",
    "end": "966839"
  },
  {
    "text": "offline in the two examples we looked at",
    "start": "966839",
    "end": "969120"
  },
  {
    "text": "today",
    "start": "969120",
    "end": "969680"
  },
  {
    "text": "we have one of each the cost of the",
    "start": "969680",
    "end": "973040"
  },
  {
    "text": "implementation",
    "start": "973040",
    "end": "974639"
  },
  {
    "text": "involved periodic offline calculations",
    "start": "974639",
    "end": "976560"
  },
  {
    "text": "of c and beta",
    "start": "976560",
    "end": "978480"
  },
  {
    "text": "and for every packet length mu and sigma",
    "start": "978480",
    "end": "982160"
  },
  {
    "text": "the benefits were unexpectedly good we",
    "start": "982160",
    "end": "984639"
  },
  {
    "text": "got an average speed up",
    "start": "984639",
    "end": "986079"
  },
  {
    "text": "of 5x",
    "start": "986079",
    "end": "988720"
  },
  {
    "text": "so what's the key takeaway from today's",
    "start": "989199",
    "end": "991839"
  },
  {
    "text": "talk",
    "start": "991839",
    "end": "993199"
  },
  {
    "text": "it is the general purpose algorithms are",
    "start": "993199",
    "end": "995279"
  },
  {
    "text": "great they work",
    "start": "995279",
    "end": "996800"
  },
  {
    "text": "always you don't have to think too much",
    "start": "996800",
    "end": "998880"
  },
  {
    "text": "about plugging them",
    "start": "998880",
    "end": "999920"
  },
  {
    "text": "and they'll work just fine but what i do",
    "start": "999920",
    "end": "1002560"
  },
  {
    "text": "want to",
    "start": "1002560",
    "end": "1003519"
  },
  {
    "text": "make us recognize is that generality",
    "start": "1003519",
    "end": "1005839"
  },
  {
    "text": "comes at a cost",
    "start": "1005839",
    "end": "1008240"
  },
  {
    "text": "now specializing algorithms means taking",
    "start": "1008240",
    "end": "1010320"
  },
  {
    "text": "advantage of something that's particular",
    "start": "1010320",
    "end": "1011920"
  },
  {
    "text": "to your problem to the local",
    "start": "1011920",
    "end": "1013519"
  },
  {
    "text": "context in which this algorithm is going",
    "start": "1013519",
    "end": "1015440"
  },
  {
    "text": "to function",
    "start": "1015440",
    "end": "1017360"
  },
  {
    "text": "the advantages from at least our",
    "start": "1017360",
    "end": "1019360"
  },
  {
    "text": "experience shows that we can get",
    "start": "1019360",
    "end": "1020639"
  },
  {
    "text": "significant speed up",
    "start": "1020639",
    "end": "1022000"
  },
  {
    "text": "without undue cost and as i mentioned",
    "start": "1022000",
    "end": "1024558"
  },
  {
    "text": "the cost for us is the cost of",
    "start": "1024559",
    "end": "1026079"
  },
  {
    "text": "implementation",
    "start": "1026079",
    "end": "1026880"
  },
  {
    "text": "of maintenance the downside",
    "start": "1026880",
    "end": "1030160"
  },
  {
    "text": "is that it does require us to look for",
    "start": "1030160",
    "end": "1031600"
  },
  {
    "text": "the context",
    "start": "1031600",
    "end": "1033918"
  },
  {
    "text": "which brings the question up is the",
    "start": "1033919",
    "end": "1035600"
  },
  {
    "text": "benefit of specialization worth the cost",
    "start": "1035600",
    "end": "1039199"
  },
  {
    "text": "and unfortunately the answer like in",
    "start": "1039199",
    "end": "1041360"
  },
  {
    "text": "many of these questions is",
    "start": "1041360",
    "end": "1042720"
  },
  {
    "text": "it all depends however",
    "start": "1042720",
    "end": "1046319"
  },
  {
    "text": "we one thing that we can state",
    "start": "1046319",
    "end": "1048240"
  },
  {
    "text": "unequivocally",
    "start": "1048240",
    "end": "1049840"
  },
  {
    "text": "is that it is worth some time",
    "start": "1049840",
    "end": "1051600"
  },
  {
    "text": "investigating and finding out",
    "start": "1051600",
    "end": "1053440"
  },
  {
    "text": "whether there is local structure that",
    "start": "1053440",
    "end": "1055919"
  },
  {
    "text": "can be exploited",
    "start": "1055919",
    "end": "1058880"
  },
  {
    "text": "thank you for listening you've been a",
    "start": "1058960",
    "end": "1060720"
  },
  {
    "text": "great virtual audience",
    "start": "1060720",
    "end": "1062000"
  },
  {
    "text": "i hope to meet some of you in the quest",
    "start": "1062000",
    "end": "1063679"
  },
  {
    "text": "and answer session and in the subsequent",
    "start": "1063679",
    "end": "1065760"
  },
  {
    "text": "panel discussion",
    "start": "1065760",
    "end": "1067280"
  },
  {
    "text": "thank you",
    "start": "1067280",
    "end": "1071760"
  }
]