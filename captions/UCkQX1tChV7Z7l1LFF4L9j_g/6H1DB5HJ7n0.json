[
  {
    "text": "so what does this talk about um i come from kind of an sre background software operations for the last several years",
    "start": "4720",
    "end": "11519"
  },
  {
    "text": "and i've noticed in the last decade we've kind of gone from running our systems ourselves by",
    "start": "11519",
    "end": "17199"
  },
  {
    "text": "hand to building and running the systems that run our systems",
    "start": "17199",
    "end": "22400"
  },
  {
    "text": "like we've added an extra layer of abstraction here and that's what and this it's really good in many ways it lets us do things",
    "start": "22400",
    "end": "29119"
  },
  {
    "text": "we couldn't otherwise do but there's a bunch of risks and considerations that come with it and",
    "start": "29119",
    "end": "35360"
  },
  {
    "text": "that's what this talk is about if anyone has seen my previous year's talk at qcon in new york",
    "start": "35360",
    "end": "40399"
  },
  {
    "text": "it was kind of a tales of failed talk and this too has a tails of fail element so if you like you know software",
    "start": "40399",
    "end": "46320"
  },
  {
    "text": "operations architecture and failure you are in the right place",
    "start": "46320",
    "end": "51280"
  },
  {
    "text": "right about me um i cannot work presentations uh i am not a real astronaut or a real",
    "start": "52160",
    "end": "57920"
  },
  {
    "text": "presenter apparently i'm a senior staff software engineer at slack dublin and before that i was at google for a number of years",
    "start": "57920",
    "end": "63920"
  },
  {
    "text": "i was a contributor to the site reliability engineering how google runs its production systems book also known",
    "start": "63920",
    "end": "69200"
  },
  {
    "text": "as the sre book and i write for various places including in focus as of last week and i do a",
    "start": "69200",
    "end": "75439"
  },
  {
    "text": "quarterly column for usenix's login magazine and you know fun interesting fact i",
    "start": "75439",
    "end": "80640"
  },
  {
    "text": "campaign for a banned treaty against lethal autonomous weapons and you should too because we all know that software is terrible we",
    "start": "80640",
    "end": "87040"
  },
  {
    "text": "should not put it in charge of killing people and on twitter and lower lifts okay",
    "start": "87040",
    "end": "93119"
  },
  {
    "text": "so reliability in the cloud we all you know we think we can cloud you know",
    "start": "93119",
    "end": "99439"
  },
  {
    "text": "lots of really smart people building really resilient systems all this redundancy",
    "start": "99439",
    "end": "104640"
  },
  {
    "text": "all this failover right you know these things are designed for the bottom up to be resilient to any kind of hardware",
    "start": "104640",
    "end": "110640"
  },
  {
    "text": "failure you know from an entire data center on up and yet",
    "start": "110640",
    "end": "116799"
  },
  {
    "text": "and yet and i'm not going to pick just on amazon",
    "start": "117840",
    "end": "123680"
  },
  {
    "text": "and yet you know i'm also not going to pick just on google so that's you know the top three kind of major",
    "start": "123680",
    "end": "130000"
  },
  {
    "text": "cloud providers they all have outages we know this you know we have to build our own systems if we're using",
    "start": "130000",
    "end": "136160"
  },
  {
    "text": "the cloud we have to build our own systems be resilient to this as best we can",
    "start": "136160",
    "end": "142480"
  },
  {
    "text": "but consider a humble server you know it's actually not unusual to see multi-year uptimes",
    "start": "142480",
    "end": "149360"
  },
  {
    "text": "it's pretty unusual to have your public cloud go for an entire year without some kind of major outage",
    "start": "149360",
    "end": "156720"
  },
  {
    "text": "you know this thing has no redundancy just a single box running in one rack no network",
    "start": "156720",
    "end": "162400"
  },
  {
    "text": "redundancy to speak of no power redundancy so why are we failing to make our clouds as",
    "start": "162400",
    "end": "170080"
  },
  {
    "text": "reliable as more reliable than a single machine hopefully this talk will shed some light",
    "start": "170080",
    "end": "175840"
  },
  {
    "text": "on this question so in the old days we had human beings",
    "start": "175840",
    "end": "181840"
  },
  {
    "text": "you know the human was in the loop we were configuring our servers by hand or you know we were sort of",
    "start": "181840",
    "end": "187360"
  },
  {
    "text": "semi by hand we were using you know scripts you know we would have puppet or we would have capistrano back in the day and but the",
    "start": "187360",
    "end": "195120"
  },
  {
    "text": "decision to provision a new machine and set it up and verify it and put it in your load balancer pool",
    "start": "195120",
    "end": "201120"
  },
  {
    "text": "that was typically done by a human being we weren't auto scaling",
    "start": "201120",
    "end": "206480"
  },
  {
    "text": "things besides things for peak plus 10 or whatever if whatever your magic number was and we left things running we",
    "start": "206480",
    "end": "213760"
  },
  {
    "text": "weren't scaling up and scaling down we weren't dynamic in that way we didn't have job",
    "start": "213760",
    "end": "219120"
  },
  {
    "text": "orchestration you know kubernetes and all these things were only a glimmer in somebody's eye",
    "start": "219120",
    "end": "225200"
  },
  {
    "text": "you know we lived we lived in a mostly static world mostly run by human beings",
    "start": "225200",
    "end": "231680"
  },
  {
    "text": "times have changed now this may not be the case everywhere you know the as our previous speaker said the feature",
    "start": "234400",
    "end": "239920"
  },
  {
    "text": "is here it's just not evenly distributed but certainly at the very very large",
    "start": "239920",
    "end": "245120"
  },
  {
    "text": "software houses all of the public clouds and you know any any other sort of smaller",
    "start": "245120",
    "end": "251200"
  },
  {
    "text": "software company that's running their own private cloud or running on amazon web services or any of the other cloud",
    "start": "251200",
    "end": "256239"
  },
  {
    "text": "providers clouds are using these tend to be using a lot of this sort of dynamic automated",
    "start": "256239",
    "end": "264080"
  },
  {
    "text": "provision the mantra and operations for the last decade or more has been to automate everything you know",
    "start": "264080",
    "end": "271919"
  },
  {
    "text": "automate job orchestration so no more provisioning by hand no more scaling up and down to meet load",
    "start": "271919",
    "end": "278000"
  },
  {
    "text": "by hand all manner of routing failover load balancing all this should",
    "start": "278000",
    "end": "284320"
  },
  {
    "text": "be automated and this is not wrong it isn't wrong um you know a lot of this work is",
    "start": "284320",
    "end": "290800"
  },
  {
    "text": "repetitive and there are downsides to it but this is the change that we have wrought",
    "start": "290800",
    "end": "297440"
  },
  {
    "text": "in the parts of the future that are distributed you know we have largely succeeded in automating away a lot of this work",
    "start": "297440",
    "end": "304320"
  },
  {
    "text": "that we were doing in 2010 and that is the truth",
    "start": "304320",
    "end": "310320"
  },
  {
    "text": "why money in a lot of cases money is the",
    "start": "310320",
    "end": "315360"
  },
  {
    "text": "overriding pressure i mean we are business right we we we run our systems to support businesses",
    "start": "315360",
    "end": "322000"
  },
  {
    "text": "there are direct financial savings from some of these elements so by using job orchestration systems",
    "start": "322000",
    "end": "328560"
  },
  {
    "text": "having multi-tenant computing and by scaling our jobs up and down to meet demand",
    "start": "328560",
    "end": "333840"
  },
  {
    "text": "if we're in a public cloud either way we can save money we also save money by not having to",
    "start": "333840",
    "end": "339039"
  },
  {
    "text": "employ as many people to run our fleets the mantra is automate yourself out of",
    "start": "339039",
    "end": "344080"
  },
  {
    "text": "your job so that we don't need to have 10 people to replace you next year",
    "start": "344080",
    "end": "349199"
  },
  {
    "text": "and this makes a lot of sense so it's just important to remember that money is the overriding reason that we do this",
    "start": "349199",
    "end": "355680"
  },
  {
    "text": "but there are a bunch of other pressures one major weather pressure is better performance and latency",
    "start": "355680",
    "end": "362240"
  },
  {
    "text": "so if you have a job that's being automatically scaled up and down to meet demand it should have better latency because",
    "start": "362240",
    "end": "369199"
  },
  {
    "text": "you have a lower chance of hitting a congested sort of uh you know an overloaded instance",
    "start": "369199",
    "end": "377120"
  },
  {
    "text": "a lot of these systems that we're going to look at are related to how do you balance load how do you",
    "start": "377120",
    "end": "382720"
  },
  {
    "text": "distribute a load in a way that's kind of globally optimized how do i route you",
    "start": "382720",
    "end": "388000"
  },
  {
    "text": "your traffic to the nearest place where i can serve you without being overloaded this is very",
    "start": "388000",
    "end": "393919"
  },
  {
    "text": "good for your systems performance this is very good for end user perceived latency which i mean again going back to the last slide",
    "start": "393919",
    "end": "400000"
  },
  {
    "text": "that's good for money right but we also want to reduce the repetitive toil of managing a",
    "start": "400000",
    "end": "405199"
  },
  {
    "text": "large fleet when you when you run a system with thousands or hundreds of thousands or",
    "start": "405199",
    "end": "411120"
  },
  {
    "text": "millions of jobs and machines you are dealing with failure constantly um if anyone was at denise",
    "start": "411120",
    "end": "418319"
  },
  {
    "text": "use talk yesterday she had a really adorable slide illustrating you know failures when google turns up a data center",
    "start": "418319",
    "end": "424639"
  },
  {
    "text": "and had like a little computer with a pram was just gorgeous her art is so great but it's real you know we see failures",
    "start": "424639",
    "end": "431039"
  },
  {
    "text": "constantly and you cannot you cannot page a human being to deal with that every time you",
    "start": "431039",
    "end": "436639"
  },
  {
    "text": "have any little failure it's costly it's repetitive work nobody wants to do this",
    "start": "436639",
    "end": "442400"
  },
  {
    "text": "right we also want to react faster to routine hardware failures we don't",
    "start": "442400",
    "end": "448000"
  },
  {
    "text": "want a box to break and have a bad hard drive or whatever and sit there",
    "start": "448000",
    "end": "453120"
  },
  {
    "text": "throwing errors until a human being comes along and takes that out of your load balancer",
    "start": "453120",
    "end": "458319"
  },
  {
    "text": "pool there is just no point in living that way you know it's unnecessary pain for our customers it's unnecessary",
    "start": "458319",
    "end": "464080"
  },
  {
    "text": "stress and pain for us in operations we want more consistency in production",
    "start": "464080",
    "end": "470800"
  },
  {
    "text": "and this is one of the big changes that we see in operations in the last few years this concept of",
    "start": "470800",
    "end": "475840"
  },
  {
    "text": "infrastructure as code we don't want to be building machines by hand anymore",
    "start": "475840",
    "end": "481199"
  },
  {
    "text": "we want to be able to press a button or better yet have a dynamic control plane actuate an",
    "start": "481199",
    "end": "487360"
  },
  {
    "text": "rpc and provision our our instances of our services in a way that is completely consistent",
    "start": "487360",
    "end": "493440"
  },
  {
    "text": "and completely repeatable we do not want to be building pet systems anymore and that makes a",
    "start": "493440",
    "end": "498479"
  },
  {
    "text": "huge amount of sense and we also want to we want to reduce compliance risks related to engineers",
    "start": "498479",
    "end": "504240"
  },
  {
    "text": "touching productions you know a lot of especially if you're in finance or dealing with any sort of",
    "start": "504240",
    "end": "509599"
  },
  {
    "text": "payments or anything to do with kind of the federal government in the us",
    "start": "509599",
    "end": "514640"
  },
  {
    "text": "or other governments they get very picky about who is logging into your servers",
    "start": "514640",
    "end": "520959"
  },
  {
    "text": "for debugging or for for operational stuff and you want to minimize that as much as you can a lot of companies",
    "start": "520959",
    "end": "526959"
  },
  {
    "text": "now are saying well can we automate all of our control and and have humans never ssh in just",
    "start": "526959",
    "end": "534240"
  },
  {
    "text": "remove that access and as an aside i think that's very very difficult to do",
    "start": "534240",
    "end": "539680"
  },
  {
    "text": "but you should be certainly removing that from routine operations so there's a bunch of pressures towards",
    "start": "539680",
    "end": "546240"
  },
  {
    "text": "this this pattern where our systems are controlling are being controlled dynamically by some",
    "start": "546240",
    "end": "552240"
  },
  {
    "text": "sort of a control plane system just as a little aside here i'd like to call your attention to this wonderful",
    "start": "552240",
    "end": "558720"
  },
  {
    "text": "diagram because this presentation has a space theme um space themes are great for your",
    "start": "558720",
    "end": "564880"
  },
  {
    "text": "presentations because all of the nasa imagery is creative commons by law so this is an apollo 14 spacesuit",
    "start": "564880",
    "end": "572640"
  },
  {
    "text": "it's got a sunglasses pocket on the right arm i just want to call attention to that",
    "start": "572640",
    "end": "578399"
  },
  {
    "text": "okay so i've been talking about control planes and the sort of dynamic control",
    "start": "580399",
    "end": "587040"
  },
  {
    "text": "plane pattern that we start that we're seeing it arises in order to control other",
    "start": "587040",
    "end": "594399"
  },
  {
    "text": "systems and to very often to solve global optimization problems so let's look at a few of these",
    "start": "594399",
    "end": "601600"
  },
  {
    "text": "this is our simplest form so we have some kind of a controller process our",
    "start": "601600",
    "end": "607040"
  },
  {
    "text": "controller process is in charge it's got some sort of it's got some business rules",
    "start": "607040",
    "end": "612880"
  },
  {
    "text": "it's probably got some configuration it might be accepting some sort of control input from human beings",
    "start": "612880",
    "end": "618800"
  },
  {
    "text": "occasionally and what it's doing is it's doing operations on our service",
    "start": "618800",
    "end": "624800"
  },
  {
    "text": "instances and these could be switches or it could be jobs like you know sort of instances of some",
    "start": "624800",
    "end": "630880"
  },
  {
    "text": "binary that you're running or kubernetes pods that kind of thing probably these service instances are",
    "start": "630880",
    "end": "638000"
  },
  {
    "text": "serving or pcs or web pages or something to to someone else outside of this system",
    "start": "638000",
    "end": "643760"
  },
  {
    "text": "and probably they have some sort of load balancer pointed at them but this is kind of outside the the control plane diagram",
    "start": "643760",
    "end": "650240"
  },
  {
    "text": "that we're showing here and you know i didn't put it in because hey this could be you know",
    "start": "650240",
    "end": "655600"
  },
  {
    "text": "pipelines that are processing data a signal aggregator this is the the way",
    "start": "655600",
    "end": "661760"
  },
  {
    "text": "that the controller senses what's happening in the service pool so it can react",
    "start": "661760",
    "end": "667440"
  },
  {
    "text": "because typically these controllers are trying to keep some kind of a the system in some sort of a status quo",
    "start": "667440",
    "end": "673279"
  },
  {
    "text": "state or a state that conforms to some kind of configuration that they have so",
    "start": "673279",
    "end": "679360"
  },
  {
    "text": "things change in the service instances they get they get more load or less load or you know or they change state they go",
    "start": "679360",
    "end": "686880"
  },
  {
    "text": "healthy or unhealthy and the signal aggregator will scrape that state",
    "start": "686880",
    "end": "691920"
  },
  {
    "text": "from each of the service instances and make it available to the controller so this signal aggregator it could be",
    "start": "691920",
    "end": "698480"
  },
  {
    "text": "amazon cloudwatch or it could be prometheus or any of these kinds of tools graphite or",
    "start": "698480",
    "end": "706320"
  },
  {
    "text": "sometimes the signal aggregator and the controller are collapsed into one entity",
    "start": "706320",
    "end": "712560"
  },
  {
    "text": "okay here's a concrete example so auto scaling groups as provided by all",
    "start": "713760",
    "end": "719040"
  },
  {
    "text": "of the major cloud services the idea here is i have a bunch of service instances so running instances of my containers or my",
    "start": "719040",
    "end": "726560"
  },
  {
    "text": "binaries or whatever it is i want to scale them up and down based",
    "start": "726560",
    "end": "732399"
  },
  {
    "text": "on how busy they are so you're going to collect metrics in some way and this could be",
    "start": "732399",
    "end": "738240"
  },
  {
    "text": "some sort of monitoring tool as provided by that cloud provider or you could be collecting things through some of your own monitoring",
    "start": "738240",
    "end": "744399"
  },
  {
    "text": "tools and making them available to the auto scaling logic this could be something you've built yourself i have seen hand-drawn versions",
    "start": "744399",
    "end": "750639"
  },
  {
    "text": "of this kind of thing so you're going to collect metrics which could be cpu load it could be you know some sort of count",
    "start": "750639",
    "end": "757360"
  },
  {
    "text": "of the number of requests served per unit time and based on that your water scaler is going to",
    "start": "757360",
    "end": "763760"
  },
  {
    "text": "scale that pool of instances up and down so busy put more in not busy",
    "start": "763760",
    "end": "770480"
  },
  {
    "text": "take some out saving you money on your cloud bill great simple enough right",
    "start": "770480",
    "end": "778160"
  },
  {
    "text": "so but this is the same architecture as we saw on the previous slide this is a control plane",
    "start": "778160",
    "end": "784480"
  },
  {
    "text": "one of the really interesting things that people forget about auto scaling is the system is bigger than just this",
    "start": "784720",
    "end": "792000"
  },
  {
    "text": "you are you're making a assumption here that your system is not going to be scaled",
    "start": "792000",
    "end": "797839"
  },
  {
    "text": "for the peak of your traffic and therefore in order to serve the peak of your traffic",
    "start": "797839",
    "end": "803600"
  },
  {
    "text": "you are dependent on this auto scaling system working correctly and you're also dependent on whatever",
    "start": "803600",
    "end": "811040"
  },
  {
    "text": "process you have to provision a new instance and to get it registered with whatever load balancing tools or",
    "start": "811040",
    "end": "817279"
  },
  {
    "text": "or dns or whatever it needs to be registered with and that varies by system",
    "start": "817279",
    "end": "822320"
  },
  {
    "text": "um from experience very often a lot of that stuff is made from junky python or",
    "start": "822320",
    "end": "827360"
  },
  {
    "text": "whatever you don't want this if you have this pattern whatever is needed to provision your",
    "start": "827360",
    "end": "833839"
  },
  {
    "text": "instances are part of your core production system now because it's required in order to serve",
    "start": "833839",
    "end": "839839"
  },
  {
    "text": "your peak load and it's surprising how often things like this become fragile",
    "start": "839839",
    "end": "846399"
  },
  {
    "text": "here's a kubernetes cluster kubernetes is the hotness so i'm not going to explain what it is but basically it's a system",
    "start": "848800",
    "end": "855680"
  },
  {
    "text": "for orchestrating and managing your jobs so you say hey kubernetes here's a bunch of nodes",
    "start": "855680",
    "end": "861440"
  },
  {
    "text": "you manage these you know you run vms on them and you distribute jobs um instances of the thing the tasks",
    "start": "861440",
    "end": "868320"
  },
  {
    "text": "i want to run through this cluster so the cubelet is a process that runs",
    "start": "868320",
    "end": "874240"
  },
  {
    "text": "on each of the instances in your kubernetes cluster and it monitors the load and",
    "start": "874240",
    "end": "882240"
  },
  {
    "text": "the health of the pods which are your your jobs your working production",
    "start": "882240",
    "end": "887360"
  },
  {
    "text": "systems that are running you got a control plane which is the kubernetes master um",
    "start": "887360",
    "end": "893279"
  },
  {
    "text": "and it's the same system so this is an instance of our control plane system that doesn't have a specific signal aggregator because the",
    "start": "893279",
    "end": "899440"
  },
  {
    "text": "control plane just talks to the cubelet directly it should be noted kubernetes it doesn't",
    "start": "899440",
    "end": "905199"
  },
  {
    "text": "let you scale that large it lets you scale up to about 5000 nodes and partly that will be because of the",
    "start": "905199",
    "end": "910880"
  },
  {
    "text": "control plane limits in terms of how many signals i can get from how many nodes i have seen job orchestration systems",
    "start": "910880",
    "end": "917440"
  },
  {
    "text": "that scale much larger but they had that level of interaction with the separate signal aggregator",
    "start": "917440",
    "end": "924880"
  },
  {
    "text": "so getting a bit more complicated um those first three instances we saw",
    "start": "925760",
    "end": "932240"
  },
  {
    "text": "are kind of like a regional or local or zonal controller you might run like multiples",
    "start": "932240",
    "end": "938399"
  },
  {
    "text": "of these like you might run multiples of these in one data center you might run one per region",
    "start": "938399",
    "end": "944399"
  },
  {
    "text": "but they're separate and that will that will solve some of your problems like it will solve your problem of",
    "start": "944399",
    "end": "949600"
  },
  {
    "text": "i want to scale this job in this location to meet this demand or i want to run this kubernetes cluster",
    "start": "949600",
    "end": "956000"
  },
  {
    "text": "in this location but sometimes you have bigger problems",
    "start": "956000",
    "end": "961519"
  },
  {
    "text": "sometimes you have problems where you need to think about global demand very often this arises in the realms",
    "start": "961519",
    "end": "968240"
  },
  {
    "text": "of networking and load balancing and routing because if you've got a global backbone",
    "start": "968240",
    "end": "974399"
  },
  {
    "text": "or you're trying to steer user demand to your your systems on in a",
    "start": "974399",
    "end": "979839"
  },
  {
    "text": "global way you need to think about the problem in a global way the thing about global problems is you",
    "start": "979839",
    "end": "986000"
  },
  {
    "text": "cannot optimize for them locally you can you can make them work by doing things locally but you're going to have",
    "start": "986000",
    "end": "993040"
  },
  {
    "text": "waste and potentially reduce performance in parts of your system where the local parts of your system are",
    "start": "993040",
    "end": "998800"
  },
  {
    "text": "not able to to optimize the kind of the global view right and remember this is one of the",
    "start": "998800",
    "end": "1004399"
  },
  {
    "text": "pressures that we see towards these global global control systems let's look at an example",
    "start": "1004399",
    "end": "1011519"
  },
  {
    "text": "so dns load balancing if you want to route user traffic to the",
    "start": "1011519",
    "end": "1018000"
  },
  {
    "text": "nearest instance of your service if you're running multiple places around the world you need some sort of dns load balancing",
    "start": "1018000",
    "end": "1024640"
  },
  {
    "text": "to do it or an anycast network of which possibly more later so this",
    "start": "1024640",
    "end": "1029678"
  },
  {
    "text": "will be something like the ns1 has a a geo load balancing product you you say hey ns1 my service is here",
    "start": "1029679",
    "end": "1037360"
  },
  {
    "text": "here here and here and please route my users to the nearest instance that has",
    "start": "1037360",
    "end": "1044160"
  },
  {
    "text": "capacity to serve that load so you don't know where your demand is going to spike up",
    "start": "1044160",
    "end": "1050080"
  },
  {
    "text": "at any particular time or any particular geography and let's say you know i have data",
    "start": "1050080",
    "end": "1055760"
  },
  {
    "text": "center in singapore data center in hong kong data center in japan and a bunch of load",
    "start": "1055760",
    "end": "1061679"
  },
  {
    "text": "pops up in asia because i do a launch or whatever",
    "start": "1061679",
    "end": "1067840"
  },
  {
    "text": "if your load balancing system knows what the capacity of each of those sites is and how much load each of those sites",
    "start": "1068160",
    "end": "1074720"
  },
  {
    "text": "currently have it can steer the demand to the sites that are optimized for nearness and for not being",
    "start": "1074720",
    "end": "1081760"
  },
  {
    "text": "too busy and this is good so what you need here is you have your service pool a and b and they're pushing up into their signal",
    "start": "1081760",
    "end": "1088559"
  },
  {
    "text": "aggregator how busy they are and you push that up to your global controller which is",
    "start": "1088559",
    "end": "1094320"
  },
  {
    "text": "going to program out all of the dns servers for basically what percentage of loads",
    "start": "1094320",
    "end": "1100720"
  },
  {
    "text": "they should send to each of these each each of the sites",
    "start": "1100720",
    "end": "1106240"
  },
  {
    "text": "based on how much uh how much capacity they have and this is good this works really well this works a lot better than just",
    "start": "1106240",
    "end": "1113039"
  },
  {
    "text": "um random where you could be sending users to a place with an arbitrarily high latency i mean you",
    "start": "1113039",
    "end": "1118640"
  },
  {
    "text": "don't want to send users in japan to the east coast of the us if there's capacity nearer",
    "start": "1118640",
    "end": "1124880"
  },
  {
    "text": "but you also don't want to send them to an overloaded site or a site that might be down for maintenance so this is why we use",
    "start": "1124880",
    "end": "1131440"
  },
  {
    "text": "systems like this and it's worth noting here our dns servers",
    "start": "1131440",
    "end": "1138640"
  },
  {
    "text": "they're not actually acting on the service instances so it's missing one element of the control plane pattern but you know we're still",
    "start": "1138640",
    "end": "1145120"
  },
  {
    "text": "seeing the signal aggregation and the global controller elements of it",
    "start": "1145120",
    "end": "1151840"
  },
  {
    "text": "this is a sort of a simplified version of an sdn1 controller so",
    "start": "1151919",
    "end": "1159600"
  },
  {
    "text": "specifically it's a simplified version of google's b4 sdn1 controller so b4 is google's",
    "start": "1160559",
    "end": "1167039"
  },
  {
    "text": "software defined networking backbone it's global so it's a network that spans the world",
    "start": "1167039",
    "end": "1173039"
  },
  {
    "text": "and what you want to do with that network is you want to look at where load is coming from i'm going to and you want",
    "start": "1173039",
    "end": "1180240"
  },
  {
    "text": "to figure out how do i use the paths i have optimally to serve that load at the lowest latency",
    "start": "1180240",
    "end": "1187600"
  },
  {
    "text": "so it's a global optimization problem and you know load pops up in different",
    "start": "1187600",
    "end": "1192720"
  },
  {
    "text": "places and and sort of comes and goes one of the reasons for that is that b4",
    "start": "1192720",
    "end": "1198960"
  },
  {
    "text": "is um it's used for sort of batch type work so if you need to copy you know some",
    "start": "1198960",
    "end": "1204799"
  },
  {
    "text": "terabytes of data from here to there you would use the network priority that gets it onto the b41 as opposed to the other one that",
    "start": "1204799",
    "end": "1212480"
  },
  {
    "text": "they have anyway um so you need to be constantly looking at what the demand in this",
    "start": "1212480",
    "end": "1218960"
  },
  {
    "text": "network is and optimizing for it and so you've got a bunch of switches",
    "start": "1218960",
    "end": "1224880"
  },
  {
    "text": "all around the world in the different data centers where this network is and they're sending metrics up to",
    "start": "1224880",
    "end": "1232240"
  },
  {
    "text": "the collection system which is sending those up to this sort of global optimizer service which",
    "start": "1232240",
    "end": "1238240"
  },
  {
    "text": "looks at configured bandwidth limits for different users and it looks at the flows and it figures out",
    "start": "1238240",
    "end": "1244480"
  },
  {
    "text": "how to optimize that and it pushes that configuration out constantly to these things called te for traffic",
    "start": "1244480",
    "end": "1250960"
  },
  {
    "text": "engineering servers which program paths into these switches to create this global network of",
    "start": "1250960",
    "end": "1257760"
  },
  {
    "text": "switched paths which are efficient in network terms so",
    "start": "1257760",
    "end": "1262799"
  },
  {
    "text": "this this is your complex global dynamic control plane",
    "start": "1262799",
    "end": "1268399"
  },
  {
    "text": "but the dynamic control pane is not just any automation this is um this is automation that tends",
    "start": "1270559",
    "end": "1277840"
  },
  {
    "text": "to it tends to control very important parts of your production systems like",
    "start": "1277840",
    "end": "1283120"
  },
  {
    "text": "are my jobs running like is my network working is my dns working these are mission",
    "start": "1283120",
    "end": "1290320"
  },
  {
    "text": "critical things you know this is not this is not something that's doing you know",
    "start": "1290320",
    "end": "1295600"
  },
  {
    "text": "ancillary things like checking to my backups work which is also very important but your systems won't fall over today",
    "start": "1295600",
    "end": "1300720"
  },
  {
    "text": "if they're not right this is it's sort of an architectural smell",
    "start": "1300720",
    "end": "1306000"
  },
  {
    "text": "this automation means something this automation matters",
    "start": "1306000",
    "end": "1311120"
  },
  {
    "text": "so with these systems we're mission control now that's what that's what the title of this talk comes from",
    "start": "1315039",
    "end": "1321840"
  },
  {
    "text": "we don't run our systems the robots that we build the systems we build run our systems and",
    "start": "1321840",
    "end": "1328080"
  },
  {
    "text": "that's it's harder this is a more challenging engineering task and it can go wrong in",
    "start": "1328080",
    "end": "1334640"
  },
  {
    "text": "a bunch of ways this this is the apollo 13 lunar module",
    "start": "1334640",
    "end": "1342400"
  },
  {
    "text": "because we have a space theme now i'm guessing probably most people have seen the movie and know some elements of this story so",
    "start": "1342400",
    "end": "1348559"
  },
  {
    "text": "i'm not going to tell the whole thing but what happened with apollo 13",
    "start": "1348559",
    "end": "1353600"
  },
  {
    "text": "is they had an accident as we all know and just all heroics and things",
    "start": "1353600",
    "end": "1360080"
  },
  {
    "text": "when the accident happened everyone back in mission control was super confused",
    "start": "1360080",
    "end": "1365600"
  },
  {
    "text": "they were getting these really really really confusing signals from the telemetry that they were seeing",
    "start": "1365600",
    "end": "1371039"
  },
  {
    "text": "here they are with their amused faces so they were just getting a bunch of signals about um the electrical",
    "start": "1371039",
    "end": "1376880"
  },
  {
    "text": "um the electrical voltage fluctuating up and down and pressure fluctuating up and down in cylinders",
    "start": "1376880",
    "end": "1382559"
  },
  {
    "text": "because their electrical system required the oxygen cylinders to to to provide um oxygen to the hydrogen",
    "start": "1382559",
    "end": "1390000"
  },
  {
    "text": "oxygen fuel cells this part is not my technical part but anyway the big point here is these guys were",
    "start": "1390000",
    "end": "1396400"
  },
  {
    "text": "confused they were super confused because these they were looking at these very abstracted signals that were being",
    "start": "1396400",
    "end": "1403360"
  },
  {
    "text": "sent from space and how did they figure the problem out the astronauts figured the problem out",
    "start": "1403360",
    "end": "1408640"
  },
  {
    "text": "because they were there on site they heard a bang and that they could",
    "start": "1408640",
    "end": "1414080"
  },
  {
    "text": "see on their gauges they could see how the pressure was fluctuating up and down and they could see gas venting out into",
    "start": "1414080",
    "end": "1420640"
  },
  {
    "text": "space right they could see what was going on because they were there they had the mechanical",
    "start": "1420640",
    "end": "1427440"
  },
  {
    "text": "sympathy and the direct observation of their systems and that is kind of one of the big",
    "start": "1427440",
    "end": "1433840"
  },
  {
    "text": "things that we lose right here is this is the the service module",
    "start": "1433840",
    "end": "1441039"
  },
  {
    "text": "and you can see you can see here it's all exploded and stuff yeah so that's why that's why apollo 13 was sad",
    "start": "1441039",
    "end": "1447600"
  },
  {
    "text": "yeah so and then there's a whole great story um there's a really good uh really good part in charles parrow's book normal",
    "start": "1447600",
    "end": "1454080"
  },
  {
    "text": "accidents that deals with this story and emphasizes this particular part of about understanding what happened and",
    "start": "1454080",
    "end": "1459760"
  },
  {
    "text": "the sort of the mechanical sympathy of being on the spot which is really worth reading so anyway",
    "start": "1459760",
    "end": "1465120"
  },
  {
    "text": "they got home they managed to go around the moon and they that the whole thing where they cobbled together um oxygen um oxygen things from the",
    "start": "1465120",
    "end": "1472640"
  },
  {
    "text": "wrong thing it was well very exciting um but they got back and then nasa had an ipo",
    "start": "1472640",
    "end": "1480480"
  },
  {
    "text": "no they didn't they're happy because they're astronauts back okay so because we're mission control now",
    "start": "1480720",
    "end": "1485919"
  },
  {
    "text": "it's harder for us to understand our systems in production okay",
    "start": "1485919",
    "end": "1491120"
  },
  {
    "text": "now on to the tales of fail that was just the introductory tale of phil that was sort of justifies the title of",
    "start": "1491120",
    "end": "1496799"
  },
  {
    "text": "the talk so we're going to talk about dynamic control plane instance i'm going to talk about some cloud providers no judgement",
    "start": "1496799",
    "end": "1503360"
  },
  {
    "text": "you know we all have issues and these these providers are brave enough to and you know helpful enough to give",
    "start": "1503360",
    "end": "1509760"
  },
  {
    "text": "us accurate tales of what went wrong so not judging not throwing shades just",
    "start": "1509760",
    "end": "1515200"
  },
  {
    "text": "trying to look for lessons so this one's pretty old",
    "start": "1515200",
    "end": "1521120"
  },
  {
    "text": "it was the night before christmas and api calls relating to managing new or existing elastic load balancers started to throw",
    "start": "1522000",
    "end": "1528240"
  },
  {
    "text": "mysterious errors their running instances of their services seemed to be unaffected",
    "start": "1528240",
    "end": "1534000"
  },
  {
    "text": "their team was puzzled because many api calls were succeeding",
    "start": "1534000",
    "end": "1539200"
  },
  {
    "text": "they were able to create and manage new load balancers but not to manage existing load balancers",
    "start": "1539200",
    "end": "1544640"
  },
  {
    "text": "and so and some things were just failing what was happening they were confused",
    "start": "1544640",
    "end": "1550400"
  },
  {
    "text": "they spent some time being confused like four hours which is a long time when your systems are down",
    "start": "1551600",
    "end": "1557840"
  },
  {
    "text": "but they started to put together the fact that running load balances were okay unless there was a configuration update",
    "start": "1557840",
    "end": "1563279"
  },
  {
    "text": "or someone tried to scale them up or down once they figured that out they mitigated sensibly by",
    "start": "1563279",
    "end": "1569600"
  },
  {
    "text": "disabling those scaling workflows and then they dug in they noticed that there was",
    "start": "1569600",
    "end": "1576159"
  },
  {
    "text": "missing state data and that was the root cause of the service disruption",
    "start": "1576159",
    "end": "1581279"
  },
  {
    "text": "they did a daily recovery process and they merged in whatever changes since they since their last snapshot and it took",
    "start": "1581279",
    "end": "1587120"
  },
  {
    "text": "about 24 hours to get back from this that's a pretty serious pretty serious",
    "start": "1587120",
    "end": "1592159"
  },
  {
    "text": "thing when you can't create new load balancers or change your existing ones because that's a pretty important work",
    "start": "1592159",
    "end": "1597520"
  },
  {
    "text": "workflow and it turned out that a dev had run something in prod that should have been",
    "start": "1597520",
    "end": "1603039"
  },
  {
    "text": "running dev and it was an accidental deletion and it was sort of a data management issue",
    "start": "1603039",
    "end": "1608960"
  },
  {
    "text": "but what i really want to take from this incident is how difficult and how long it can take to debug when",
    "start": "1608960",
    "end": "1614880"
  },
  {
    "text": "things go wrong with these kinds of control planes and this is why",
    "start": "1614880",
    "end": "1620000"
  },
  {
    "text": "making the actions and the operations of these control planes really as understandable and clear as",
    "start": "1620000",
    "end": "1626799"
  },
  {
    "text": "possible to the human operators is really key",
    "start": "1626799",
    "end": "1631520"
  },
  {
    "text": "a big part of the danger and the risk that these things add is the fact that operators now need two",
    "start": "1636960",
    "end": "1643120"
  },
  {
    "text": "mental models so in the old days you just needed to know how your load balancer worked",
    "start": "1643120",
    "end": "1648640"
  },
  {
    "text": "and you went in and you made the changes by hand now at amazon elb the operators need",
    "start": "1648640",
    "end": "1655120"
  },
  {
    "text": "a mental model of how the elbs themselves work but also a mental model of how the elb",
    "start": "1655120",
    "end": "1661200"
  },
  {
    "text": "control plane works and unfortunately when you have two different things that are now",
    "start": "1661200",
    "end": "1666960"
  },
  {
    "text": "interacting that's more than twice as complicated as your your first thing right as two of the original things right the",
    "start": "1666960",
    "end": "1673200"
  },
  {
    "text": "interactions adds to the complexities so this is about four times as hard to do",
    "start": "1673200",
    "end": "1678640"
  },
  {
    "text": "nancy levison talks about this a lot she's an mit professor who talks a lot about engineering safety uh very often in military and industrial",
    "start": "1679120",
    "end": "1685760"
  },
  {
    "text": "contexts and um you know she talks she has good diagrams where you kind of have you know",
    "start": "1685760",
    "end": "1691520"
  },
  {
    "text": "the system the system that controls the system humans you know what we do as we saw in the",
    "start": "1691520",
    "end": "1696880"
  },
  {
    "text": "previous example um is part of the sort of the the unpredictability and the difficulty",
    "start": "1696880",
    "end": "1703840"
  },
  {
    "text": "of controlling these systems you know very often you have control actions taken by humans",
    "start": "1703840",
    "end": "1709120"
  },
  {
    "text": "sort of interacting and competing with the control actions that are taken by the control plane system so life just",
    "start": "1709120",
    "end": "1715600"
  },
  {
    "text": "you know especially when things are going wrong life just gets a lot more complicated",
    "start": "1715600",
    "end": "1720880"
  },
  {
    "text": "there's also the very old saw which is the ironies of automation and this has been studied a lot in um in",
    "start": "1720880",
    "end": "1726720"
  },
  {
    "text": "the context of aviation you automate something and that's great you make it more consistent you make it more reliable",
    "start": "1726720",
    "end": "1732240"
  },
  {
    "text": "you mean that it takes takes away some human work but it also means that humans become",
    "start": "1732240",
    "end": "1738799"
  },
  {
    "text": "less familiar with the day-to-day hands-on operation of that system so therefore when your automation breaks",
    "start": "1738799",
    "end": "1744960"
  },
  {
    "text": "or goes wrong in some way the humans are now further away from that system",
    "start": "1744960",
    "end": "1750399"
  },
  {
    "text": "and have less chance of being able to manually intervene quickly to resolve it so iron is of automation",
    "start": "1750399",
    "end": "1758559"
  },
  {
    "text": "here is our second taylor fill so moving on to 2016. google compute engine lost all the",
    "start": "1761039",
    "end": "1767919"
  },
  {
    "text": "external network connectivity for 18 minutes globally so that's your entire cloud network",
    "start": "1767919",
    "end": "1773679"
  },
  {
    "text": "down how did this happen they um somebody submitted a config change to",
    "start": "1773679",
    "end": "1779520"
  },
  {
    "text": "remove an old unused ip block this should be very safe",
    "start": "1779520",
    "end": "1784640"
  },
  {
    "text": "unfortunately there was a bug some sort of race condition happened and",
    "start": "1784640",
    "end": "1789840"
  },
  {
    "text": "the system decided to move remove all every single one of the gce ip blocks",
    "start": "1789840",
    "end": "1797360"
  },
  {
    "text": "so very sensibly they have a canary system that's a canary system is a small part of your",
    "start": "1799520",
    "end": "1804960"
  },
  {
    "text": "system where you can send upcoming changes to see what effect do they have and make sure that they're within expected",
    "start": "1804960",
    "end": "1811039"
  },
  {
    "text": "parameters and they did this which is great but unfortunately it seems their system just threw the",
    "start": "1811039",
    "end": "1817039"
  },
  {
    "text": "answer away which is not so great um so this is the second bug that we see",
    "start": "1817039",
    "end": "1822799"
  },
  {
    "text": "here so we have an initial race condition bug that produced a completely incorrect configuration we have a canary system",
    "start": "1822799",
    "end": "1828880"
  },
  {
    "text": "that was there but not working correctly",
    "start": "1828880",
    "end": "1833360"
  },
  {
    "text": "so they roll this out um",
    "start": "1834559",
    "end": "1838720"
  },
  {
    "text": "they're advertised over bgp border gateway protocol and uh they advertise the same blocks",
    "start": "1839600",
    "end": "1846640"
  },
  {
    "text": "everywhere all around the world and this is known as ip anticast what that means is you have this sort of",
    "start": "1846640",
    "end": "1852159"
  },
  {
    "text": "magical virtual ip address servable from a bunch of places and what the internet just does is it",
    "start": "1852159",
    "end": "1858480"
  },
  {
    "text": "routes you to the nearest network point where this is advertised and nearest in",
    "start": "1858480",
    "end": "1864399"
  },
  {
    "text": "network terms doesn't mean geographically nearest it really means cheapest but usually it's also the",
    "start": "1864399",
    "end": "1869679"
  },
  {
    "text": "nearest so this is fine so the thing about ip anicast is if it's available anywhere in the",
    "start": "1869679",
    "end": "1876880"
  },
  {
    "text": "world and you're probing it that will still work fine yay until the last one goes away and then",
    "start": "1876880",
    "end": "1882320"
  },
  {
    "text": "it's completely down so they were probing this system and it was fine fine fine as it was gone",
    "start": "1882320",
    "end": "1887600"
  },
  {
    "text": "in 99 of everywhere and then it goes from it it gets turned off from the last place",
    "start": "1887600",
    "end": "1894000"
  },
  {
    "text": "and everything is bad so their rollout process didn't have the signal that it needed",
    "start": "1894000",
    "end": "1899600"
  },
  {
    "text": "their control plane lacked lacked that signal um there are better ways of sorry there",
    "start": "1899600",
    "end": "1907039"
  },
  {
    "text": "are other ways of monitoring your anicas systems um you can for example you can put in a special",
    "start": "1907039",
    "end": "1912159"
  },
  {
    "text": "query that asks you that asks uh that that will tell you",
    "start": "1912159",
    "end": "1917440"
  },
  {
    "text": "exactly where the process the request is being served from and that can give you more signal about what's happening if you suddenly notice",
    "start": "1917440",
    "end": "1922799"
  },
  {
    "text": "that all your probes are coming back from a smaller and smaller and smaller pool of uh of results that will give you a",
    "start": "1922799",
    "end": "1929120"
  },
  {
    "text": "signal so that's something that you can do but they were not doing this at the time but that's a counterfactual and we don't like those but",
    "start": "1929120",
    "end": "1935279"
  },
  {
    "text": "just to say that this is a it's a complex systems failure multiple bugs and latent problems and",
    "start": "1935279",
    "end": "1941200"
  },
  {
    "text": "you've got multiple dynamic control planes going on here so there's the network configuration",
    "start": "1941200",
    "end": "1947440"
  },
  {
    "text": "but then there's also the control plane that's doing the canarying and checking the network configuration",
    "start": "1947440",
    "end": "1952559"
  },
  {
    "text": "and both of those went bad in interactive ways",
    "start": "1952559",
    "end": "1957600"
  },
  {
    "text": "so what we learned from this we learned that testing is a real challenge",
    "start": "1960240",
    "end": "1965679"
  },
  {
    "text": "these systems have bugs as all systems do",
    "start": "1966799",
    "end": "1971039"
  },
  {
    "text": "and the trick is you get your nasty failures when you have multiple bugs so it's not just testing",
    "start": "1972320",
    "end": "1978960"
  },
  {
    "text": "in terms of unit testing that you need although you need that you need to be doing testing in an integration um",
    "start": "1978960",
    "end": "1987360"
  },
  {
    "text": "you know an integration systems testing so spinning up little sandbox with all the instances of the related",
    "start": "1987360",
    "end": "1993279"
  },
  {
    "text": "systems and putting them through scenarios so in an ideal world you would have an integration test",
    "start": "1993279",
    "end": "1999760"
  },
  {
    "text": "for your um for your control pane system that would spin the whole thing up and have it try and put through a bad",
    "start": "1999760",
    "end": "2006640"
  },
  {
    "text": "configuration and make sure that the canary system catches it but these are very expensive",
    "start": "2006640",
    "end": "2012480"
  },
  {
    "text": "and quite difficult to do they're worth the investment i think to make sure that your failure scenarios",
    "start": "2012480",
    "end": "2018399"
  },
  {
    "text": "are all still running and it's worth doing these in your staging systems and production systems as well as a real disaster test",
    "start": "2018399",
    "end": "2024880"
  },
  {
    "text": "because if you don't one of one of the days it may bite you",
    "start": "2024880",
    "end": "2033279"
  },
  {
    "text": "last year um google had a big network outage um for cloud but also for their other google services",
    "start": "2033279",
    "end": "2039279"
  },
  {
    "text": "um elevated packet lost and network congestion for four hours and 25 minutes which is",
    "start": "2039279",
    "end": "2044799"
  },
  {
    "text": "quite a long time so google's machines are segregated into multiple logical clusters",
    "start": "2044799",
    "end": "2050800"
  },
  {
    "text": "and each of them have their own cluster management software so like the kubernetes clusters that we saw earlier",
    "start": "2050800",
    "end": "2057440"
  },
  {
    "text": "they had a maintenance event happening in just one physical location and this was the trigger for the outage so it should just have",
    "start": "2057440",
    "end": "2062878"
  },
  {
    "text": "brought down some some infrastructure in one site for maintenance so it could have been",
    "start": "2062879",
    "end": "2068398"
  },
  {
    "text": "power or network or any sort of maintenance that requires downtime",
    "start": "2068399",
    "end": "2074720"
  },
  {
    "text": "maintenances on that scale become common events not just daily events but multiple times",
    "start": "2074720",
    "end": "2079919"
  },
  {
    "text": "daily events so you automate them right the automation software becomes a control plane because it's",
    "start": "2079919",
    "end": "2086240"
  },
  {
    "text": "taking in these configurations and it's bringing down pieces of infrastructure and draining traffic away",
    "start": "2086240",
    "end": "2093040"
  },
  {
    "text": "and it's monitoring to make sure those drains are happening correctly",
    "start": "2093040",
    "end": "2098240"
  },
  {
    "text": "the automation control plane was also interacting with the software control plane for the network they had a bad configuration which",
    "start": "2099119",
    "end": "2105359"
  },
  {
    "text": "basically said hey turn off all the network control plane everywhere",
    "start": "2105359",
    "end": "2111039"
  },
  {
    "text": "so that was a misconfiguration",
    "start": "2111440",
    "end": "2116880"
  },
  {
    "text": "now this shouldn't have been allowed to happen but due to another software bug somewhere else it was allowed to happen the control",
    "start": "2116880",
    "end": "2123920"
  },
  {
    "text": "jobs they it's like what we saw with the b4 sdn-1 earlier",
    "start": "2123920",
    "end": "2128960"
  },
  {
    "text": "what they're doing is they're doing this global optimization and trying to program the network to efficiently route the packets without dropping anyone's packets",
    "start": "2128960",
    "end": "2135280"
  },
  {
    "text": "without introducing any extra latency where possible so without the control jobs the network will still stay",
    "start": "2135280",
    "end": "2141839"
  },
  {
    "text": "doing what it was doing before but it won't be able to adapt to things changing so after a little while you know it'll",
    "start": "2141839",
    "end": "2149440"
  },
  {
    "text": "it'll turn itself off it'll withdraw the network because it's gonna go okay right well the network control jobs they're not",
    "start": "2149440",
    "end": "2155920"
  },
  {
    "text": "there i can't adapt turn off so they actually managed to root cause the incident fairly fast",
    "start": "2155920",
    "end": "2162480"
  },
  {
    "text": "but the problem was their network was in a very bad shape and that impeded their ability to to get everything back up and",
    "start": "2162480",
    "end": "2167920"
  },
  {
    "text": "running and also their network control plane it runs as a",
    "start": "2167920",
    "end": "2173599"
  },
  {
    "text": "as a consensus-based replicated system but this had incorrectly brought down all",
    "start": "2173599",
    "end": "2178880"
  },
  {
    "text": "instances of the instances in a bunch of locations so it had lost its state",
    "start": "2178880",
    "end": "2184079"
  },
  {
    "text": "that state wasn't being backed up anywhere useful so they had to rebuild that from scratch which which lengthened this outage",
    "start": "2184079",
    "end": "2191920"
  },
  {
    "text": "so again we're seeing multiple misconfigurations bugs permissions problems um we have multiple dynamic control",
    "start": "2192400",
    "end": "2198839"
  },
  {
    "text": "planes and it was very hard to predict that particular sequence of events",
    "start": "2198839",
    "end": "2203920"
  },
  {
    "text": "data loss these systems are are critical stewards of the state of our systems and data in",
    "start": "2203920",
    "end": "2210800"
  },
  {
    "text": "these systems has to be treated like production data you know you need to have all sorts of plans for dealing with",
    "start": "2210800",
    "end": "2217440"
  },
  {
    "text": "failure or data loss or data corruption in your control planes",
    "start": "2217440",
    "end": "2222560"
  },
  {
    "text": "that's it's a key consideration when you're building these things and again you know may i stress we don't",
    "start": "2222560",
    "end": "2228480"
  },
  {
    "text": "just roll these out of janky python and assume that they're going to stay running forever they need",
    "start": "2228480",
    "end": "2233599"
  },
  {
    "text": "like real engineering going into them as we see the blast radius for these",
    "start": "2233599",
    "end": "2241200"
  },
  {
    "text": "incidents can be really large it can be your entire network that's really serious stuff",
    "start": "2241200",
    "end": "2248000"
  },
  {
    "text": "testing your fill safe behavior it's scary particularly if you mean scary and dev",
    "start": "2249359",
    "end": "2254880"
  },
  {
    "text": "even it's um it's easy not to do this it's easy to assume that the behavior you've designed in for",
    "start": "2254880",
    "end": "2262000"
  },
  {
    "text": "your system to to carry on to fail static when your control plane is down it's",
    "start": "2262000",
    "end": "2268880"
  },
  {
    "text": "easy to assume that that works the way you intended it's scary to test it because you're putting risk into your system and",
    "start": "2268880",
    "end": "2275280"
  },
  {
    "text": "we hate this i mean you don't want to be the person to to push that button on that disaster test and take everything down but it's",
    "start": "2275280",
    "end": "2281760"
  },
  {
    "text": "necessary it is necessary to have ways to test this this by the way it's from the report on",
    "start": "2281760",
    "end": "2289040"
  },
  {
    "text": "the challenger disaster and shows the the o-rings the o-rings that had no fail-safes it's an early",
    "start": "2289040",
    "end": "2296560"
  },
  {
    "text": "early classic of resiliency engineering that report is well worth reading",
    "start": "2296560",
    "end": "2301599"
  },
  {
    "text": "so what can we do you know is is it hopeless are we lost um are we",
    "start": "2301680",
    "end": "2308480"
  },
  {
    "text": "are we forced into we are basically forced into having these dynamic control plane systems",
    "start": "2308480",
    "end": "2314079"
  },
  {
    "text": "you know if we're large enough we need to have at least some of these in order to mitigate you know the the",
    "start": "2314079",
    "end": "2320400"
  },
  {
    "text": "sort of the human toil and all of the downsides and uncertainties that come with having humans manage our",
    "start": "2320400",
    "end": "2326720"
  },
  {
    "text": "systems so get get to a reasonable scale and that scale is probably only",
    "start": "2326720",
    "end": "2332560"
  },
  {
    "text": "in the hundreds to low thousands of instances and these systems become inevitable so",
    "start": "2332560",
    "end": "2338480"
  },
  {
    "text": "we have to do something so one thing that's uh that's pretty",
    "start": "2338480",
    "end": "2343920"
  },
  {
    "text": "important is to use regional or zonal control systems where feasible so instead of having one system that",
    "start": "2343920",
    "end": "2349760"
  },
  {
    "text": "tries to knit the entire world together unless there's a really really really good reason why you need that",
    "start": "2349760",
    "end": "2356560"
  },
  {
    "text": "try and have i try and have them split up it means that the maximum blast radius of any of these is",
    "start": "2356560",
    "end": "2363119"
  },
  {
    "text": "much less they need to be tested at least as",
    "start": "2363119",
    "end": "2368640"
  },
  {
    "text": "carefully as your main production systems and probably more",
    "start": "2368640",
    "end": "2372960"
  },
  {
    "text": "they need unit tests they need not to be made out of junky shell scripts although shell scripts can also be unit",
    "start": "2373920",
    "end": "2379920"
  },
  {
    "text": "tested they need integration testing they need to be tested in production",
    "start": "2379920",
    "end": "2385040"
  },
  {
    "text": "they need occasional testing that their failure modes and data recovery processes",
    "start": "2385040",
    "end": "2390480"
  },
  {
    "text": "and all of these things are really working the way you intend",
    "start": "2390480",
    "end": "2397680"
  },
  {
    "text": "this is a big one you need to plan for the time and this is significant time whoever is",
    "start": "2397680",
    "end": "2404720"
  },
  {
    "text": "running these systems needs to have time budgeted to stay familiar with what's actually going",
    "start": "2404720",
    "end": "2410079"
  },
  {
    "text": "on under the hood so time to run all of your sort of your backup",
    "start": "2410079",
    "end": "2417119"
  },
  {
    "text": "your backup tools your you know your your your manual processes for recovery for",
    "start": "2417119",
    "end": "2422640"
  },
  {
    "text": "staying familiar with what's actually happening under the hood it's so important because if you don't do this",
    "start": "2422640",
    "end": "2428480"
  },
  {
    "text": "you know this is something that you kind of don't take into account the first year or two where you build one of these systems because",
    "start": "2428480",
    "end": "2434640"
  },
  {
    "text": "everyone has been working with the underlying system for ages they know exactly what's going on with it they",
    "start": "2434640",
    "end": "2439680"
  },
  {
    "text": "know how all these operations work but fast forward three four years people have forgotten what they knew",
    "start": "2439680",
    "end": "2444880"
  },
  {
    "text": "and you'll have a whole bunch of new people on the team so you need to plan constantly for exercises drills and time",
    "start": "2444880",
    "end": "2451359"
  },
  {
    "text": "to stay familiar with underlying operations",
    "start": "2451359",
    "end": "2455200"
  },
  {
    "text": "and this is one of the hardest engineering tasks i think around these systems you should put",
    "start": "2456960",
    "end": "2462160"
  },
  {
    "text": "guardrails around them your automated system your control",
    "start": "2462160",
    "end": "2467280"
  },
  {
    "text": "system should not be able to withdraw every ip block that your cloud is managing it should not be able to",
    "start": "2467280",
    "end": "2475200"
  },
  {
    "text": "shut down every job that your system is running you need to put limits",
    "start": "2475200",
    "end": "2481119"
  },
  {
    "text": "on these systems because they can and they will have bugs they can and they will have",
    "start": "2481119",
    "end": "2486240"
  },
  {
    "text": "negative interactions with other systems you should put guardrails in and you should you should test these guardrails",
    "start": "2486240",
    "end": "2492000"
  },
  {
    "text": "constantly in your integration tests because these guardrails are a really important part of the",
    "start": "2492000",
    "end": "2497599"
  },
  {
    "text": "business logic of your dynamic control plate system",
    "start": "2497599",
    "end": "2502160"
  },
  {
    "text": "and sometimes humans are better we need large installations will need some dynamic control planes but you probably",
    "start": "2504160",
    "end": "2510880"
  },
  {
    "text": "don't need to have 10. you don't need to build a dynamic control plane system for every little thing",
    "start": "2510880",
    "end": "2517200"
  },
  {
    "text": "maybe sometimes what you need is a little script that a human will will actuate",
    "start": "2517200",
    "end": "2522640"
  },
  {
    "text": "and check the output of and hit ok and the operation rolls out you know that's a semi-automated state",
    "start": "2522640",
    "end": "2529200"
  },
  {
    "text": "but it's not this autonomated this fully automated autonomous control plane system right",
    "start": "2529200",
    "end": "2535599"
  },
  {
    "text": "so consider whether you need them",
    "start": "2535599",
    "end": "2538880"
  },
  {
    "text": "this is another big one when you're designing these systems they have to be designed to be able to",
    "start": "2541680",
    "end": "2546880"
  },
  {
    "text": "be understood by a human operator there are all sorts of things you can do",
    "start": "2546880",
    "end": "2552319"
  },
  {
    "text": "one really nice pattern is to add a status page to these kinds of systems and that's literally a web page that your system",
    "start": "2552319",
    "end": "2558640"
  },
  {
    "text": "will serve that will tell you exactly what the system has done recently and why and what it is going to do next if known",
    "start": "2558640",
    "end": "2566079"
  },
  {
    "text": "and why logs as usual traces tend to be maybe",
    "start": "2566079",
    "end": "2571280"
  },
  {
    "text": "less applicable to these systems but could still be useful another really really really useful",
    "start": "2571280",
    "end": "2577359"
  },
  {
    "text": "thing where you have multiple control systems interacting make them all log all of their",
    "start": "2577359",
    "end": "2583119"
  },
  {
    "text": "significant operations to one place so could be your slack channel it could be",
    "start": "2583119",
    "end": "2588720"
  },
  {
    "text": "any other sort of log ingestion mechanism just one place where people can go and look at the sequence of events when",
    "start": "2588720",
    "end": "2595760"
  },
  {
    "text": "you're trying to debug weird interactions between multiple control systems",
    "start": "2595760",
    "end": "2601359"
  },
  {
    "text": "that's where that's what you need you need to be able to say the sequence of what happened and figure out why",
    "start": "2601359",
    "end": "2607838"
  },
  {
    "text": "overrideable systems are systems they are fragile they are brittle they will have bugs",
    "start": "2608240",
    "end": "2614640"
  },
  {
    "text": "humans are adaptable humans are able to deal with the unexpected and make sensible decisions",
    "start": "2614640",
    "end": "2620400"
  },
  {
    "text": "so humans always need to be in charge a really good passion when you're building these automation systems is to build",
    "start": "2620400",
    "end": "2626640"
  },
  {
    "text": "a big red button and a big red button is just some sort of state bit that you can flip",
    "start": "2626640",
    "end": "2632160"
  },
  {
    "text": "somewhere that says hey system don't run anymore just stop what you're doing",
    "start": "2632160",
    "end": "2637920"
  },
  {
    "text": "until this bit gets fed back and ideally any on-call engineer in your organization should be able to",
    "start": "2637920",
    "end": "2644400"
  },
  {
    "text": "flip them because anybody might notice that these systems are running amok and sometimes if you if",
    "start": "2644400",
    "end": "2651280"
  },
  {
    "text": "if you have a system that's literally taking down your entire network or all your serving jobs in multiple locations",
    "start": "2651280",
    "end": "2656560"
  },
  {
    "text": "you just want to be able to say stop so that's a feature that should be built in to these kinds of automation a way to",
    "start": "2656560",
    "end": "2662000"
  },
  {
    "text": "stop them really fast and if we do all these things maybe one",
    "start": "2662000",
    "end": "2668960"
  },
  {
    "text": "day we'll be able to build a cloud or a large computing system that has better uptime than a single machine",
    "start": "2668960",
    "end": "2675359"
  },
  {
    "text": "does so that is that's the talk uh i should always say that we're hiring we're",
    "start": "2675359",
    "end": "2680960"
  },
  {
    "text": "hiring in dublin um i don't know if we're hiring here in london we're hiring in the us",
    "start": "2680960",
    "end": "2686880"
  },
  {
    "text": "i don't actually have time to hang around afterwards for questions i think there's like two minutes left of this session because i do have to go to the airport",
    "start": "2686880",
    "end": "2693920"
  },
  {
    "text": "but if anybody has any questions my twitter is lauralifts and i will reply to any tweets thank you",
    "start": "2693920",
    "end": "2704560"
  }
]