[
  {
    "text": "good morning let's start with a quick story so that's that's kind of weird",
    "start": "3959",
    "end": "13830"
  },
  {
    "text": "right see what happened before midnight",
    "start": "13830",
    "end": "21779"
  },
  {
    "text": "tonight and join the team you can be not just hashtag I'm with her in spirit but",
    "start": "21779",
    "end": "29730"
  },
  {
    "text": "hashtag I'm with her literally as in you could win a trip to Philadelphia to be",
    "start": "29730",
    "end": "36600"
  },
  {
    "text": "here on Thursday night when Hillary accepts the nomination so yeah my team",
    "start": "36600",
    "end": "48809"
  },
  {
    "text": "and I are sitting around the first night of the Democratic National Convention this was supposed to be a quiet night we",
    "start": "48809",
    "end": "56370"
  },
  {
    "text": "had scaled out all the services elastic load balancers were nice and toasty I was eating a burrito from Chipotle when",
    "start": "56370",
    "end": "65670"
  },
  {
    "text": "you're on a campaign you don't really know what to expect you ask your friend",
    "start": "65670",
    "end": "70920"
  },
  {
    "text": "leo from a prior campaign what type of traffic they saw didn't write anything",
    "start": "70920",
    "end": "76560"
  },
  {
    "text": "down you get a lot of graphs without x and y-axes so you ask the campaign's",
    "start": "76560",
    "end": "83010"
  },
  {
    "text": "comms team how many people do you think are gonna watch prime time during the",
    "start": "83010",
    "end": "88440"
  },
  {
    "text": "DNC and they tell you million million people seems a little low so you ask",
    "start": "88440",
    "end": "95850"
  },
  {
    "text": "another team and they tell you 10 million people so you basically know there's between 1 & 1 million and 10",
    "start": "95850",
    "end": "102450"
  },
  {
    "text": "million people are gonna watch this thing and you still don't know how many people are gonna come to the website but",
    "start": "102450",
    "end": "107640"
  },
  {
    "text": "here's here's the good part you did your homework you had your product teams for",
    "start": "107640",
    "end": "113100"
  },
  {
    "text": "months ask everyone that they could find which speakers were going to plug the website right so you can be prepared",
    "start": "113100",
    "end": "119540"
  },
  {
    "text": "senator Al Franken did not give us a heads up the story of the Franken bump",
    "start": "119540",
    "end": "127710"
  },
  {
    "text": "is the story of Hillary for America unexpected amounts of traffic and unexpected times in unexpected ways by",
    "start": "127710",
    "end": "135359"
  },
  {
    "text": "unexpected people I'm Michael Fisher I am currently a software engineer at the Democratic",
    "start": "135359",
    "end": "141180"
  },
  {
    "text": "National Committee but before that I led the site reliability engineering team at on Hillary Clinton's presidential",
    "start": "141180",
    "end": "147210"
  },
  {
    "text": "campaign we ran in a mutable infrastructure that grew to a hundred services in production and 80 software",
    "start": "147210",
    "end": "154140"
  },
  {
    "text": "engineers designers product managers sres and other tech folks I'm going to talk",
    "start": "154140",
    "end": "159750"
  },
  {
    "text": "to you about the easy wins and the challenges of a mutable infrastructure mostly though I'm here to tell you about",
    "start": "159750",
    "end": "167550"
  },
  {
    "text": "how immutable infrastructure as our architecture helped us defeat the chaos that comes on a presidential campaign",
    "start": "167550",
    "end": "175130"
  },
  {
    "text": "but first how did we get here we often",
    "start": "175130",
    "end": "180870"
  },
  {
    "text": "called Hillary for America the world's only nationalized nationally televised hackathon there are a few other",
    "start": "180870",
    "end": "187230"
  },
  {
    "text": "organizations where everyone from members of Congress to Ranji comedians who sometimes are also US senators to",
    "start": "187230",
    "end": "194520"
  },
  {
    "text": "Lady Gaga plug your site and the products you work on a hackathon there fun right it's a great recruiting",
    "start": "194520",
    "end": "201570"
  },
  {
    "text": "technique you got a lot of interesting developers it's also a terrible way to run a tech operation on a campaign it",
    "start": "201570",
    "end": "207060"
  },
  {
    "text": "can't be a hackathon when you have to be ready for senator Al Franken the plugger site unexpectedly it can't be a",
    "start": "207060",
    "end": "213540"
  },
  {
    "text": "hackathon when you have to scale from five engineers to 50 engineers deploying sometimes hundreds of times a day so why",
    "start": "213540",
    "end": "221040"
  },
  {
    "text": "did I join why am I even here I used to work at blue state digital which was a tech vendor who was a primary tech",
    "start": "221040",
    "end": "227910"
  },
  {
    "text": "vendor for the Oh eight and twelve Obama campaigns I actually worked there in 2012 and got the witness firsthand the impact that",
    "start": "227910",
    "end": "235350"
  },
  {
    "text": "cutting-edge tech can have on a campaign it really does a lot so when I learned",
    "start": "235350",
    "end": "240810"
  },
  {
    "text": "that I'd only have to take the subway to Brooklyn to actually work on a campaign last cycle I jumped at the chance and I",
    "start": "240810",
    "end": "246330"
  },
  {
    "text": "live in Manhattan so that was still a pain there's two ways to measure growth",
    "start": "246330",
    "end": "252030"
  },
  {
    "text": "on a campaign people services products you're building the tech you're building so this is the tech team back in summer",
    "start": "252030",
    "end": "258540"
  },
  {
    "text": "2015 that's six months before even the first contest in Iowa people were not",
    "start": "258540",
    "end": "263550"
  },
  {
    "text": "even paying attention at that point so pretty small team and then we grew",
    "start": "263550",
    "end": "269759"
  },
  {
    "text": "you win some primaries they let you hire people that's the deal",
    "start": "269759",
    "end": "274989"
  },
  {
    "text": "so this is the New York primary this is spring of 2016 so a little bit bigger we like filled out a conference room and",
    "start": "274989",
    "end": "281969"
  },
  {
    "text": "then you have summer 2016 you get even bigger and I think there were flags",
    "start": "281969",
    "end": "287469"
  },
  {
    "text": "because it was July 4th we didn't always have just a ton of American flags around",
    "start": "287469",
    "end": "292539"
  },
  {
    "text": "this was I think around July 4th so it was right after we got the nomination and right before the Democratic National",
    "start": "292539",
    "end": "297999"
  },
  {
    "text": "Convention after that we were too big to really sit in one frame so I don't have any photos so the scale just kind of",
    "start": "297999",
    "end": "305579"
  },
  {
    "text": "explodes right so I joined a Chafee back in June 2015 just a few months after",
    "start": "305579",
    "end": "312429"
  },
  {
    "text": "Secretary Clinton announced her candidacy at the time there were just a few Engineers you saw them working at a",
    "start": "312429",
    "end": "317949"
  },
  {
    "text": "Chafee and then there was an external engineering team called the groundwork who are the groundwork no it's not the",
    "start": "317949",
    "end": "324639"
  },
  {
    "text": "Illuminati true to their name the ground were created a lot of what H if they built its tech on a few of the folks",
    "start": "324639",
    "end": "330729"
  },
  {
    "text": "there came from Netflix and natural they brought with them a lot of the ideas around immutable infrastructure that",
    "start": "330729",
    "end": "336579"
  },
  {
    "text": "we're going to talk about today that informed the way that we did things on the campaign they provided us with the beginnings of our production environment",
    "start": "336579",
    "end": "342639"
  },
  {
    "text": "our first web page our first Hillary Clinton calm they gave us some of our core infrastructure",
    "start": "342639",
    "end": "348789"
  },
  {
    "text": "including but not limited to our API gateway the way that we collected money if your contribution forms the way we",
    "start": "348789",
    "end": "355389"
  },
  {
    "text": "collected signups a lot of our engagement tools speaking of infrastructure what did this all look",
    "start": "355389",
    "end": "361389"
  },
  {
    "text": "like the edge it's a cloud so the edge was a lot of what my team managed we",
    "start": "361389",
    "end": "369639"
  },
  {
    "text": "used fastly as our CDN it was all hosted varnish we actually ran more than 3700",
    "start": "369639",
    "end": "374859"
  },
  {
    "text": "lines of varnish in production which is a lot probably too much fast Lee is",
    "start": "374859",
    "end": "381489"
  },
  {
    "text": "where we stored actually the majority of our business logic so if you were coming to any of our web properties you know I",
    "start": "381489",
    "end": "388119"
  },
  {
    "text": "think we peaked at like 40 or 50 domains at one point you were coming through fastly and you were hitting our 3700",
    "start": "388119",
    "end": "394239"
  },
  {
    "text": "lines of varnish it handled all of our failover a regional failover or caching and our",
    "start": "394239",
    "end": "400449"
  },
  {
    "text": "edge security from their static front ends the vast",
    "start": "400449",
    "end": "407230"
  },
  {
    "text": "majority of our apps nearly 99% were static front ends react JavaScript based",
    "start": "407230",
    "end": "414550"
  },
  {
    "text": "front ends deployed to s3 and we're going to dig into the details on how that worked and why it was amazing",
    "start": "414550",
    "end": "422370"
  },
  {
    "text": "after the edge right you either went to your front ends you go to your back ends so we went to our API gateway and this is what I was talking about before",
    "start": "422370",
    "end": "428590"
  },
  {
    "text": "there's multiple API gateways because we scaled it out quite a bit this was built",
    "start": "428590",
    "end": "434350"
  },
  {
    "text": "by the groundwork it was a Python app that acted as a reverse proxy to all of our micro services so everything at HSA",
    "start": "434350",
    "end": "441580"
  },
  {
    "text": "was for the most part a micro service right built behind our API gateway running an AWS from their service",
    "start": "441580",
    "end": "451270"
  },
  {
    "text": "discovery we loved console everything talked through console we ran to console",
    "start": "451270",
    "end": "457480"
  },
  {
    "text": "clusters one in our development environment one in our production environment console did a bunch of stuff",
    "start": "457480",
    "end": "462700"
  },
  {
    "text": "for us it was service discovery let our machines know about each other it led",
    "start": "462700",
    "end": "468280"
  },
  {
    "text": "our our services know that they were healthy did health checks it was also",
    "start": "468280",
    "end": "474010"
  },
  {
    "text": "our secrets and key value store and that was really big and that's gonna come into play later and how we got around some challenges in immutability we also",
    "start": "474010",
    "end": "482590"
  },
  {
    "text": "had a central log service data dog we",
    "start": "482590",
    "end": "489910"
  },
  {
    "text": "had data dog on everything which gets very expensive the end of the campaign when you're paying for hosts so",
    "start": "489910",
    "end": "497940"
  },
  {
    "text": "everything had data dog AWS infrastructure we ran the agent on every single instance we were running in",
    "start": "497940",
    "end": "504070"
  },
  {
    "text": "lambdas we use the API every single thing had dated dog instrumentation just",
    "start": "504070",
    "end": "510550"
  },
  {
    "text": "like with people there were too many services to fit on one screen this",
    "start": "510550",
    "end": "516729"
  },
  {
    "text": "screen goes on and on and on but I can't take continuous screenshots at this point in the talk you might be asking",
    "start": "516730",
    "end": "523539"
  },
  {
    "text": "yourself why a presidential campaign would even have a tech team and that's a great question because for most of",
    "start": "523540",
    "end": "529150"
  },
  {
    "text": "history they have it so what kind of stuff did we build and why why did they build it why am I even here telling you",
    "start": "529150",
    "end": "534790"
  },
  {
    "text": "about it so just some examples donation platform we took credit cards ACH payments and more online we had a",
    "start": "534790",
    "end": "541389"
  },
  {
    "text": "way for you to donate to save your credit card and donate you could even text us to donate right we would reach",
    "start": "541389",
    "end": "546910"
  },
  {
    "text": "out to you via text and you would just say yeah I want to give Hilary money and we charge a card signup tools for",
    "start": "546910",
    "end": "552850"
  },
  {
    "text": "example if you wanted to go to Philadelphia right you come to Hillary Clinton comm like one hundred and forty",
    "start": "552850",
    "end": "558579"
  },
  {
    "text": "eight thousand per minute did and you'd sign up right voter protection tools you",
    "start": "558579",
    "end": "563860"
  },
  {
    "text": "were in line your polling place is closing oh my god what do I do well we had a tool for that tools to",
    "start": "563860",
    "end": "568959"
  },
  {
    "text": "find your polling place register to vote call tool and that's MSN so that supporters could talk to other",
    "start": "568959",
    "end": "574269"
  },
  {
    "text": "supporters events applications the list goes on and on how far does it go quite",
    "start": "574269",
    "end": "581019"
  },
  {
    "text": "far so just to give a sense of scale and perspective sixty elections between",
    "start": "581019",
    "end": "586779"
  },
  {
    "text": "April 12 2015 and November 8th 2016 that's 59 Democratic primaries and caucuses and of",
    "start": "586779",
    "end": "592870"
  },
  {
    "text": "course the general election ad technology staff everyone from software",
    "start": "592870",
    "end": "598300"
  },
  {
    "text": "develop front-end and back-end full-stack engineers Sr ease product managers product designers CTOs WDC TOS",
    "start": "598300",
    "end": "607740"
  },
  {
    "text": "100 immutable backends you know about a hundred services running in production by the end of this thing a hundred and",
    "start": "607740",
    "end": "614800"
  },
  {
    "text": "fifty serverless front ends so those front ends that we talked about on s3 we had a hundred and fifty of them five",
    "start": "614800",
    "end": "621009"
  },
  {
    "text": "hundred and seventy seven days twenty five hundred max QPS what we saw earlier",
    "start": "621009",
    "end": "626860"
  },
  {
    "text": "franken bomb 82 million seven hundred and fifty nine thousand six hundred and seventy six votes cast for Secretary",
    "start": "626860",
    "end": "633879"
  },
  {
    "text": "Clinton from day one in Iowa to November eighth so that's that's chaos right how",
    "start": "633879",
    "end": "642490"
  },
  {
    "text": "did we do it why why did we do it immutable to the rescue so at a chip day we thought of",
    "start": "642490",
    "end": "650829"
  },
  {
    "text": "immutable as a handshake between developers and sres immutable it's just",
    "start": "650829",
    "end": "657220"
  },
  {
    "text": "another abstraction layer right I don't have to care about every detail piece of your service all I have to do is",
    "start": "657220",
    "end": "662920"
  },
  {
    "text": "understand because of the architecture we have in place I understand how it works in our world right and that's the",
    "start": "662920",
    "end": "669370"
  },
  {
    "text": "only way you can survive when you have a team of four sres and a hundred production services",
    "start": "669370",
    "end": "675340"
  },
  {
    "text": "right and developers shipping code hundreds of times a day that said when",
    "start": "675340",
    "end": "682540"
  },
  {
    "text": "you have developers spanning from junior all the way to senior this can sometimes be a new concept right not everyone",
    "start": "682540",
    "end": "690190"
  },
  {
    "text": "comes from immutable this is you know this started back in 2015 so you know you got to you got to go back in time",
    "start": "690190",
    "end": "696190"
  },
  {
    "text": "and remember people were coming from all different backgrounds so a lot of people would ask well like why this is a Packer",
    "start": "696190",
    "end": "702340"
  },
  {
    "text": "build right why would I why would I do this why would I wait for this when I",
    "start": "702340",
    "end": "708550"
  },
  {
    "text": "can just do this I can just add this age into the really important production instance and restart nginx because I",
    "start": "708550",
    "end": "714970"
  },
  {
    "text": "just push my fix right I just I put it on my two boxes and I'm done and that's that's a good question right",
    "start": "714970",
    "end": "720280"
  },
  {
    "text": "this was not an easy conversation to have when you have and you're trying to",
    "start": "720280",
    "end": "725410"
  },
  {
    "text": "get people on board right they just want to ship at the end of the day though it's about trade-offs right developers",
    "start": "725410",
    "end": "731620"
  },
  {
    "text": "have constraints right like they their they need to move quickly they don't",
    "start": "731620",
    "end": "737320"
  },
  {
    "text": "want to use build tools that we prescribe you know all these things and as an Operations person and as an SRE I",
    "start": "737320",
    "end": "743710"
  },
  {
    "text": "also have prerogatives right I want to make sure that the services are resilient I want to make sure that I",
    "start": "743710",
    "end": "749350"
  },
  {
    "text": "don't need to understand why you're running nginx I just need to understand that if the service comes back up and de",
    "start": "749350",
    "end": "755170"
  },
  {
    "text": "NEX starts up and I'm good right I don't I don't want to know about this and I",
    "start": "755170",
    "end": "760270"
  },
  {
    "text": "mostly want to know how long is it going to take to fix it and who's gonna yell at me right and can I just every night",
    "start": "760270",
    "end": "767050"
  },
  {
    "text": "be able to go to sleep and say if something falls over it's gonna come back up right and that's one of the best things about an immutable infrastructure",
    "start": "767050",
    "end": "774340"
  },
  {
    "text": "like the one we had so what's what's easy build tooling there's lots of amazing tools out there we're gonna talk",
    "start": "774340",
    "end": "779650"
  },
  {
    "text": "about what tools we use deployment also lots of amazing tools out there",
    "start": "779650",
    "end": "784770"
  },
  {
    "text": "resiliency that's built in right if you have micro services orchestrated the way",
    "start": "784770",
    "end": "790480"
  },
  {
    "text": "we did behind an api gateway you are resilient to a lot of things like franken bomb but it still takes people",
    "start": "790480",
    "end": "797320"
  },
  {
    "text": "convincing that it's the right way to go for everything it's hard to make it work",
    "start": "797320",
    "end": "802720"
  },
  {
    "text": "for everything and it's hard to get everyone on board with a methodology like this where you say every single thing we ship is gonna",
    "start": "802720",
    "end": "809710"
  },
  {
    "text": "have a serverless front end and an immutable back end that's tough so as",
    "start": "809710",
    "end": "815620"
  },
  {
    "text": "far as build tools we used a couple different things we ran our CI environment and Travis we use that for",
    "start": "815620",
    "end": "821650"
  },
  {
    "text": "automated tests at deploying to s3 for front ends we used Packer to pack our",
    "start": "821650",
    "end": "828640"
  },
  {
    "text": "a.m. eyes right so we would first run through Travis then we would go over to Packer produce an ami and ship that off",
    "start": "828640",
    "end": "834700"
  },
  {
    "text": "to AWS continuum was a tool built by the",
    "start": "834700",
    "end": "840070"
  },
  {
    "text": "ground work if folks are familiar with spinnaker it's very much like that it handled all of our aSG's attaching",
    "start": "840070",
    "end": "848500"
  },
  {
    "text": "detaching load balancers making sure that health checks for copacetic and launch configurations it really abstract",
    "start": "848500",
    "end": "855010"
  },
  {
    "text": "at that layer out for developers so they never had to go into the AWS console which was huge and then we used ansible",
    "start": "855010",
    "end": "861760"
  },
  {
    "text": "ansible did the final moving around files and making sure that everything is good restarting services before things",
    "start": "861760",
    "end": "868210"
  },
  {
    "text": "came up in our development in our production environment so let's let's",
    "start": "868210",
    "end": "873490"
  },
  {
    "text": "take a step back and let's focus on each part of the infrastructure some of our some of the learnings and hopefully we've been through some takeaways so",
    "start": "873490",
    "end": "879930"
  },
  {
    "text": "starting in on our edge this everyone is",
    "start": "879930",
    "end": "886270"
  },
  {
    "text": "coming for you all the time right so it's really scary as it turns out when you raise your hand",
    "start": "886270",
    "end": "893440"
  },
  {
    "text": "and say you want to be President that attracts attention some of it is exceedingly negative so we used our edge",
    "start": "893440",
    "end": "900970"
  },
  {
    "text": "to protect our web applications right it's one of the reasons we went with serverless front-ends is because we knew",
    "start": "900970",
    "end": "906280"
  },
  {
    "text": "as three can take a pounding but how do you protect those backends right that's that's the stuff you really gotta worry about and who are you defending against",
    "start": "906280",
    "end": "914160"
  },
  {
    "text": "script kiddies and and DDoS is is mostly seeing what you're defending again mostly nuisances right you get a lot of",
    "start": "914160",
    "end": "921340"
  },
  {
    "text": "nuisances you get a lot of people coming by at you know four in the morning and just pounding you with WordPress",
    "start": "921340",
    "end": "926950"
  },
  {
    "text": "pingback attacks because they think it's fun and that'll take services out right",
    "start": "926950",
    "end": "932140"
  },
  {
    "text": "so how did we how did we deal with that how do we defend about against that and how did we",
    "start": "932140",
    "end": "937360"
  },
  {
    "text": "sleep every night working seven days a week for a year now confusion as a",
    "start": "937360",
    "end": "943600"
  },
  {
    "text": "defense strategy so this is some some DCL from our varnish config as it was on",
    "start": "943600",
    "end": "950829"
  },
  {
    "text": "on November 8th and actually it's still up because Hillary Clinton comm is still up so you know one of the fun things you",
    "start": "950829",
    "end": "957700"
  },
  {
    "text": "can do is you can let people think that they actually did take out your services",
    "start": "957700",
    "end": "963700"
  },
  {
    "text": "so Ron you're running for president in the United States you don't so much care",
    "start": "963700",
    "end": "968920"
  },
  {
    "text": "about people coming from maybe Brazil at 3:00 in the morning right it's not really a priority unfortunately that's",
    "start": "968920",
    "end": "975519"
  },
  {
    "text": "where perhaps a lot of bad actors are",
    "start": "975519",
    "end": "980589"
  },
  {
    "text": "coming from so you know what we did was we we really leveraged fast Lee's API is",
    "start": "980589",
    "end": "987430"
  },
  {
    "text": "to be able to quickly and easily flip switches to for example just turn off",
    "start": "987430",
    "end": "993550"
  },
  {
    "text": "everybody outside of the United States and what did you get if you were coming by and you were on a blacklist and you",
    "start": "993550",
    "end": "1000060"
  },
  {
    "text": "were hitting us with bad traffic at 3:00 in the morning you got a 503 so it looks like you won",
    "start": "1000060",
    "end": "1005160"
  },
  {
    "text": "it looks like you took out our API gateway but you didn't everything is still working for everyone we care about",
    "start": "1005160",
    "end": "1011070"
  },
  {
    "text": "and you think you've succeeded and then you leave right because your script is all of a sudden getting 503 s and you're",
    "start": "1011070",
    "end": "1016560"
  },
  {
    "text": "done right so one other thing you you run into is maybe you built a donations",
    "start": "1016560",
    "end": "1025048"
  },
  {
    "text": "API right like I talked about the groundwork built a donations API and maybe it works really really well so",
    "start": "1025049",
    "end": "1032280"
  },
  {
    "text": "well in fact that people use it for card testing so for folks who don't know what",
    "start": "1032280",
    "end": "1038370"
  },
  {
    "text": "card testing is you know I'm a I'm a person and I've acquired a set of credit",
    "start": "1038370",
    "end": "1043620"
  },
  {
    "text": "cards unknown origin and I want to know whether they're good in that good or bad right and so I need an easy quick way to",
    "start": "1043620",
    "end": "1050370"
  },
  {
    "text": "script against something to find out whether I'm gonna be able to submit a one dollar charge or or I'm gonna get a",
    "start": "1050370",
    "end": "1055530"
  },
  {
    "text": "decline rate people love to use api's",
    "start": "1055530",
    "end": "1060570"
  },
  {
    "text": "like this for that and so you know we didn't want to be those people right that cost money it makes it look like",
    "start": "1060570",
    "end": "1066990"
  },
  {
    "text": "you're getting donations when you're not you're getting a ton of declines it's very confusing it looks you're getting donations from all over",
    "start": "1066990",
    "end": "1072510"
  },
  {
    "text": "the world when you can't be so what we did was we basically at our edge right",
    "start": "1072510",
    "end": "1080100"
  },
  {
    "text": "we decided to just mess with people right you just confuse them you just randomly return yeah I charge the card",
    "start": "1080100",
    "end": "1086040"
  },
  {
    "text": "or that card is bad and all of a sudden you were no longer of reliable source for information about whether the credit",
    "start": "1086040",
    "end": "1092730"
  },
  {
    "text": "cards work and you can do all that at the edge right you can do all that server lists in varnish and doesn't",
    "start": "1092730",
    "end": "1100290"
  },
  {
    "text": "touch any of our infrastructure doesn't ever hit our API gateway doesn't ever hit any donation processing and it's",
    "start": "1100290",
    "end": "1106260"
  },
  {
    "text": "fantastic sometimes though you do have to just ban people so the the wall was",
    "start": "1106260",
    "end": "1115980"
  },
  {
    "text": "the name of our table that we stored all the the bad IP addresses in right we",
    "start": "1115980",
    "end": "1125700"
  },
  {
    "text": "would you know if you if you were a troublemaker right we would throw your IP address possibly your your entire IP",
    "start": "1125700",
    "end": "1134250"
  },
  {
    "text": "space into this blacklist and you would get an eight and error 819 because varnish is fantastic and you can just",
    "start": "1134250",
    "end": "1140790"
  },
  {
    "text": "make up HTTP error code it's like they don't actually exist of reality and and",
    "start": "1140790",
    "end": "1146160"
  },
  {
    "text": "also if you were a script Kitty with a wordpress pingback army you would get a",
    "start": "1146160",
    "end": "1151880"
  },
  {
    "text": "forbidden well let's see what that actually looks like it looks like that you've actually got a forbidden taco so",
    "start": "1151880",
    "end": "1159410"
  },
  {
    "text": "that actually works and it works exactly as well as you would hope it would so you know if you are trying to come to",
    "start": "1159410",
    "end": "1167670"
  },
  {
    "text": "Hillary Clinton calm and you're trying to cause problems there are easy ways to keep you from doing that right and you",
    "start": "1167670",
    "end": "1174420"
  },
  {
    "text": "can do that all serverless on someone else's infrastructure scaled out available and it never touches any of",
    "start": "1174420",
    "end": "1181140"
  },
  {
    "text": "your stuff and that was the primary way that we dealt with nonsense how did we",
    "start": "1181140",
    "end": "1188010"
  },
  {
    "text": "keep track of all this though right like you have a hundred services you've got 25 40 different domains how do you how",
    "start": "1188010",
    "end": "1196350"
  },
  {
    "text": "do you keep a handle on all that up spot so we built a lot of bought helpers",
    "start": "1196350",
    "end": "1202080"
  },
  {
    "text": "you know robots become into our slack and tell us yeah here's here's your to x-axis here's your",
    "start": "1202080",
    "end": "1207120"
  },
  {
    "text": "for x-axis here's your 5x X is whose here are the URLs here's the people we",
    "start": "1207120",
    "end": "1212670"
  },
  {
    "text": "didn't I didn't want to shame any IP addresses they get recycled so those are grayed out but those are the people that",
    "start": "1212670",
    "end": "1219690"
  },
  {
    "text": "are causing problems everyone here seems to be mostly behaving but often we would see you know one or two IP addresses",
    "start": "1219690",
    "end": "1224970"
  },
  {
    "text": "with counts of like millions right they're just causing millions of 5x X's and then we would ban them at the edge",
    "start": "1224970",
    "end": "1231120"
  },
  {
    "text": "and they would get their their taco so you know that was how we kept track of",
    "start": "1231120",
    "end": "1237410"
  },
  {
    "text": "everything and again because services were shipping all the time",
    "start": "1237410",
    "end": "1242840"
  },
  {
    "text": "sometimes we wouldn't even know that a new service has gone out maybe it attracted attention maybe it attracted",
    "start": "1242840",
    "end": "1248400"
  },
  {
    "text": "negative attention so all of a sudden you know we'd say okay I'll spot 5 X X and I'll thought would say like hey you",
    "start": "1248400",
    "end": "1254100"
  },
  {
    "text": "know it's slash you know new service and we'd be like we don't even know what new services but someone is abusing it and",
    "start": "1254100",
    "end": "1259440"
  },
  {
    "text": "they're gone right and that just takes care of the problem so turning to our",
    "start": "1259440",
    "end": "1264630"
  },
  {
    "text": "infrastructure let's talk about turbulence let's talk about static front ends this is where we started to",
    "start": "1264630",
    "end": "1272940"
  },
  {
    "text": "convince folks that it was this was the way to go we had a service called onesie",
    "start": "1272940",
    "end": "1278760"
  },
  {
    "text": "so when you're on a campaign you have to give everything a cool name otherwise no one will use it that's just a tip for",
    "start": "1278760",
    "end": "1284250"
  },
  {
    "text": "anyone in the future so onesie was our way of making s3 a robust serverless",
    "start": "1284250",
    "end": "1290880"
  },
  {
    "text": "origin all right so we have 150 static front ends those are your applications like those are what everyone is",
    "start": "1290880",
    "end": "1297060"
  },
  {
    "text": "interacting with on Hillary Clinton comm or any of our other domains so you have to stay organized you have to be able to",
    "start": "1297060",
    "end": "1302490"
  },
  {
    "text": "move really really quickly and that gives us onesie so once he was one part",
    "start": "1302490",
    "end": "1309120"
  },
  {
    "text": "AWS one part varnish and it gave us a way to route nearly all of our traffic",
    "start": "1309120",
    "end": "1315950"
  },
  {
    "text": "so nearly all of our traffic went through all of our front-end traffic went through onesie so what was one see",
    "start": "1315950",
    "end": "1321870"
  },
  {
    "text": "how did it work what can we learn from this so varnish is amazing because you can just easily",
    "start": "1321870",
    "end": "1327570"
  },
  {
    "text": "do things like this right you can say Hillary Clinton comm slash calls actually routes to a single bucket with",
    "start": "1327570",
    "end": "1335130"
  },
  {
    "text": "a sub directory called calls right and you can just do that all day long and the advantages are",
    "start": "1335130",
    "end": "1340750"
  },
  {
    "text": "numerous right so the advantage of using one bucket for all of your front ends is",
    "start": "1340750",
    "end": "1346120"
  },
  {
    "text": "just organization right I am keys or standardized no one has to",
    "start": "1346120",
    "end": "1352630"
  },
  {
    "text": "worry about bucket names this all just works once he gave us caching consistent",
    "start": "1352630",
    "end": "1358900"
  },
  {
    "text": "caching very short TTLs on our front end so that you know we were able to make",
    "start": "1358900",
    "end": "1366430"
  },
  {
    "text": "sure that you know everyone was on the same page about how their JavaScript would cash or where they're in or their",
    "start": "1366430",
    "end": "1372880"
  },
  {
    "text": "HTML would cache paths and query parameters varnish super easy to just",
    "start": "1372880",
    "end": "1378520"
  },
  {
    "text": "munch paths and strip out query parameters making sure you're not passing that stuff down to s3 and that's",
    "start": "1378520",
    "end": "1383710"
  },
  {
    "text": "the kind of stuff we did in 1z and also I think most importantly let us do regional failover really easily so you",
    "start": "1383710",
    "end": "1390960"
  },
  {
    "text": "know most of the world right that that a lot of people care about lives in US",
    "start": "1390960",
    "end": "1396340"
  },
  {
    "text": "East one and that's where we lived also in AWS but you know when you're on",
    "start": "1396340",
    "end": "1403000"
  },
  {
    "text": "a campaign people start to worry about everything right so you know you start",
    "start": "1403000",
    "end": "1408340"
  },
  {
    "text": "having these conversations like what happens if a hurricane comes two days before the election and wipes out",
    "start": "1408340",
    "end": "1414160"
  },
  {
    "text": "Northern Virginia and the federal government and that's a real conversation that you will have and",
    "start": "1414160",
    "end": "1419680"
  },
  {
    "text": "you'll say okay I guess we'll move things to us West too then also just in case and so this let us standardize all",
    "start": "1419680",
    "end": "1428290"
  },
  {
    "text": "of our failover to us West two and it let us do all of our regional fail or all of our failover health checking at",
    "start": "1428290",
    "end": "1433450"
  },
  {
    "text": "the edge and instantly be able to switch between buckets in many cases toward the end we were actually running out of both",
    "start": "1433450",
    "end": "1439270"
  },
  {
    "text": "regions and just you know randomly you would get us West to or you'd get us",
    "start": "1439270",
    "end": "1444520"
  },
  {
    "text": "East one and it didn't matter because of the way that we did our deploys so our",
    "start": "1444520",
    "end": "1451150"
  },
  {
    "text": "deploys for onesie or surrealist front ends very very simple the edge again",
    "start": "1451150",
    "end": "1457930"
  },
  {
    "text": "fastly we've been over that s3 was where we stored the files Travis is how we got the files there and",
    "start": "1457930",
    "end": "1465550"
  },
  {
    "text": "of course everything started and get the biggest thing about onesie that I want",
    "start": "1465550",
    "end": "1470950"
  },
  {
    "text": "to make sure folks you're taking away is static front-ends are only getting more",
    "start": "1470950",
    "end": "1476290"
  },
  {
    "text": "and more popular right and giving people a way to quickly push to update their",
    "start": "1476290",
    "end": "1484450"
  },
  {
    "text": "application again hundreds and hundreds of times a day often without having to worry about any other piece of the",
    "start": "1484450",
    "end": "1491110"
  },
  {
    "text": "infrastructure is super key we gave I am keys to our we encrypted I",
    "start": "1491110",
    "end": "1496540"
  },
  {
    "text": "am keys and Travis Travis did all this automatically for us at the end would just give right permissions for the",
    "start": "1496540",
    "end": "1503260"
  },
  {
    "text": "specific directory in s3 that means as a developer I never had to worry about taking out Hillary Clinton",
    "start": "1503260",
    "end": "1509200"
  },
  {
    "text": "comm or taking out Hillary Clinton calm flesh donated I only had to worry about my little world and as an SRE I didn't",
    "start": "1509200",
    "end": "1516010"
  },
  {
    "text": "have to worry that anyone else was going to do anything weird so that's what onesie let us do and again a ws+ varnish",
    "start": "1516010",
    "end": "1523930"
  },
  {
    "text": "that's all that was so we talked about script kiddies we talked about DDoS we",
    "start": "1523930",
    "end": "1530800"
  },
  {
    "text": "dealt with the old and various traffic we've talked about front-end architecture front-end developers can",
    "start": "1530800",
    "end": "1537010"
  },
  {
    "text": "ship fast right they're happy they just have to deal with Travis it's great let's assume then that the remaining",
    "start": "1537010",
    "end": "1543880"
  },
  {
    "text": "traffic are legitimate folks making API calls and they really really want to go",
    "start": "1543880",
    "end": "1549580"
  },
  {
    "text": "to Philadelphia so again here's that infrastructure and this is where the API",
    "start": "1549580",
    "end": "1555760"
  },
  {
    "text": "gateway and the micro services come in and just a reminder about what Frank and",
    "start": "1555760",
    "end": "1562750"
  },
  {
    "text": "bump looked like right that's the traffic that we were contending with on that night so what happened what",
    "start": "1562750",
    "end": "1570550"
  },
  {
    "text": "happened when that happened it wasn't good so you know our static front ends",
    "start": "1570550",
    "end": "1577060"
  },
  {
    "text": "were fine right they they were deployed to s3 everything was cached everything",
    "start": "1577060",
    "end": "1583480"
  },
  {
    "text": "looked good to everybody right and that's that's the number one takeaway from this from this architecture is that",
    "start": "1583480",
    "end": "1590080"
  },
  {
    "text": "if I'm a user coming to Hillary Clinton comm slash sign up and I really really",
    "start": "1590080",
    "end": "1595180"
  },
  {
    "text": "want to go to Philadelphia because I'll Franken told me I have to go you're gonna nothing looks wrong",
    "start": "1595180",
    "end": "1600550"
  },
  {
    "text": "right everything looks great so what happened though on the back ends right",
    "start": "1600550",
    "end": "1605650"
  },
  {
    "text": "like what happened to the API Gateway what happened to the microservices so you know depay despite pre-warming elastic load",
    "start": "1605650",
    "end": "1611880"
  },
  {
    "text": "balancers that's a pretty sudden onslaught of traffic and you're basically going from zero to insane and",
    "start": "1611880",
    "end": "1618720"
  },
  {
    "text": "then right back to zero because everyone left right away so like I said earlier",
    "start": "1618720",
    "end": "1624270"
  },
  {
    "text": "part of having an SRE team of four means that you have to trust your developers it means that I don't know about all the",
    "start": "1624270",
    "end": "1632100"
  },
  {
    "text": "applications that are making API calls from hillary clinton calm and quite frankly i don't want to know right that is the whole contract of this",
    "start": "1632100",
    "end": "1638970"
  },
  {
    "text": "architecture is you ship i monitor and we all understand how this works in our",
    "start": "1638970",
    "end": "1644940"
  },
  {
    "text": "world but i'm not going to tell you don't put that api call there right i'm not gonna tell you don't ship that",
    "start": "1644940",
    "end": "1650100"
  },
  {
    "text": "service you're just gonna do it we weren't the gatekeepers to production right so here's what worked that night",
    "start": "1650100",
    "end": "1658070"
  },
  {
    "text": "the api gateway kept passing traffic to microservices donations and signups were",
    "start": "1658070",
    "end": "1664530"
  },
  {
    "text": "built to queue right and that was the biggest thing is when designing these",
    "start": "1664530",
    "end": "1670200"
  },
  {
    "text": "micro services that have api's that have to withstand that and more you have to",
    "start": "1670200",
    "end": "1676140"
  },
  {
    "text": "separate out the work you're doing right and so what the model we use when designing these applications almost",
    "start": "1676140",
    "end": "1683220"
  },
  {
    "text": "universally was api worker right so the signup api for example would very",
    "start": "1683220",
    "end": "1690450"
  },
  {
    "text": "quickly all it was responsible for was taking that JSON payload from the front-end and shoving it into an sqs",
    "start": "1690450",
    "end": "1696810"
  },
  {
    "text": "queue that's it you can scale that right you can go horizontal on that you can",
    "start": "1696810",
    "end": "1703500"
  },
  {
    "text": "run that's really fast it's really efficient no database goes in the queue right maybe you start to lose instances",
    "start": "1703500",
    "end": "1711240"
  },
  {
    "text": "because you can't handle the api but you're not gonna lose them all right so you're at least gonna have some taking api requests right i'm fulfilling that",
    "start": "1711240",
    "end": "1717140"
  },
  {
    "text": "contract at the front end and then you just have your workers just working through that backlog right for hours",
    "start": "1717140",
    "end": "1722610"
  },
  {
    "text": "right just processing the sign up so those folks and go to Philadelphia and we did that with donations that was",
    "start": "1722610",
    "end": "1727830"
  },
  {
    "text": "signups we did that with events we did that with with almost all of our stuff so the queues worked the API gateways",
    "start": "1727830",
    "end": "1735810"
  },
  {
    "text": "scaled the front end stayed up one of the best things about the",
    "start": "1735810",
    "end": "1742090"
  },
  {
    "text": "immutable infrastructure that we had and what I think is one of the best reasons to use this in the future is that as an",
    "start": "1742090",
    "end": "1750040"
  },
  {
    "text": "SRE there's not a whole lot you have to do when this happens as a developer",
    "start": "1750040",
    "end": "1755410"
  },
  {
    "text": "there's not a whole lot you have to do you have to understand what's happening you have to understand that you know you don't have enough instances right and",
    "start": "1755410",
    "end": "1761350"
  },
  {
    "text": "you've got to let things Auto scale in the way that you've prescribed right but most of what you're doing is sitting",
    "start": "1761350",
    "end": "1767140"
  },
  {
    "text": "back and you're watching you're monitoring and you're trusting the system that you built to do its job",
    "start": "1767140",
    "end": "1772240"
  },
  {
    "text": "right you know that this is not gonna work out well for every single service but you kind of don't care because I",
    "start": "1772240",
    "end": "1780040"
  },
  {
    "text": "don't have to run around and start adding instances I don't have to start figuring out what's going on I know what's going on I'm looking at my",
    "start": "1780040",
    "end": "1785770"
  },
  {
    "text": "monitoring I'm saying yeah that's crazy and the infrastructure is going to scale and it's going to fix itself in",
    "start": "1785770",
    "end": "1792190"
  },
  {
    "text": "instances are gonna come back up and they're just gonna keep working through that load or they're gonna just start they're gonna keep taking API calls",
    "start": "1792190",
    "end": "1797380"
  },
  {
    "text": "right and that's one of the most beautiful things about that night is that I we didn't have to we were all",
    "start": "1797380",
    "end": "1804190"
  },
  {
    "text": "talking right we were all monitoring but we weren't trying to troubleshoot because the infrastructure took care of",
    "start": "1804190",
    "end": "1809620"
  },
  {
    "text": "the problem there's one thing though about that infrastructure diagram so",
    "start": "1809620",
    "end": "1819730"
  },
  {
    "text": "here it is again one week before the Democratic National Convention we",
    "start": "1819730",
    "end": "1826630"
  },
  {
    "text": "launched a new website exactly what you'd want to do before you get the most traffic you've ever seen in your entire life we went from a static service as",
    "start": "1826630",
    "end": "1836170"
  },
  {
    "text": "three based site like the beautiful thing I've described to you because we wanted to make life really difficult for",
    "start": "1836170",
    "end": "1841690"
  },
  {
    "text": "ourselves right we went to a no js' dynamic ec2 backed website of course",
    "start": "1841690",
    "end": "1849220"
  },
  {
    "text": "with a WordPress CMS in the back because why wouldn't you do that why would I why",
    "start": "1849220",
    "end": "1855160"
  },
  {
    "text": "would I why would we have done that given everything I just talked to you about for the last 30 minutes why would",
    "start": "1855160",
    "end": "1861400"
  },
  {
    "text": "we make that decision raise your hand if you've ever been asked to build a CMS or",
    "start": "1861400",
    "end": "1868030"
  },
  {
    "text": "like worked with a CMS content management systems in general yeah it's right it's like everyone",
    "start": "1868030",
    "end": "1873460"
  },
  {
    "text": "right I worked with four right like three alone at H if a right so it's it's",
    "start": "1873460",
    "end": "1880630"
  },
  {
    "text": "inevitable that you will have stakeholders who will ask you to build you a CMS and they want WordPress and",
    "start": "1880630",
    "end": "1887110"
  },
  {
    "text": "engineering will say that's super cool we love WordPress but we will actually",
    "start": "1887110",
    "end": "1893049"
  },
  {
    "text": "want to try a new CMS it's totally serverless it just uses markdown you put and get and then it builds in a lambda",
    "start": "1893049",
    "end": "1899080"
  },
  {
    "text": "and they go cool we'd like WordPress and then three months later you deliver",
    "start": "1899080",
    "end": "1905380"
  },
  {
    "text": "WordPress right there's a lot of reasons this happens WordPress is easy to use",
    "start": "1905380",
    "end": "1910990"
  },
  {
    "text": "people are familiar with it there's plugins I hate plugins right the plugins are the",
    "start": "1910990",
    "end": "1917710"
  },
  {
    "text": "reason that that developers and office folks hate WordPress right they also",
    "start": "1917710",
    "end": "1923380"
  },
  {
    "text": "hate it because it's popular right we had to ban people coming through with WordPress being back attacks because",
    "start": "1923380",
    "end": "1928450"
  },
  {
    "text": "it's so popular that's what everyone's looking for they're always looking for WordPress so we decided to do things a",
    "start": "1928450",
    "end": "1935169"
  },
  {
    "text": "little bit differently we decided to give people WordPress the WordPress that",
    "start": "1935169",
    "end": "1940419"
  },
  {
    "text": "they are comfortable with right the wonderful CMS and instead of using",
    "start": "1940419",
    "end": "1947770"
  },
  {
    "text": "WordPress as a actual website we used through JSON API and built a nodejs",
    "start": "1947770",
    "end": "1954299"
  },
  {
    "text": "server so on the night of Franken load Franken bump rather Hillary Clinton comm",
    "start": "1954299",
    "end": "1961539"
  },
  {
    "text": "was this nodejs server how did it",
    "start": "1961539",
    "end": "1966820"
  },
  {
    "text": "perform what was it like so we call it",
    "start": "1966820",
    "end": "1971950"
  },
  {
    "text": "secretary of state lists because again you have to have fun names otherwise no one will use your services this is what",
    "start": "1971950",
    "end": "1979240"
  },
  {
    "text": "it looked like actually if I'm being honest it looked a little bit more like",
    "start": "1979240",
    "end": "1984610"
  },
  {
    "text": "this because we had to run a lot of nodejs servers in order to handle the",
    "start": "1984610",
    "end": "1991779"
  },
  {
    "text": "load okay so what was the biggest",
    "start": "1991779",
    "end": "1996909"
  },
  {
    "text": "problem to solve when we were building this service right we wanted again to",
    "start": "1996909",
    "end": "2002610"
  },
  {
    "text": "build a service that let people put things into WordPress we want a persistent data store that was",
    "start": "2002610",
    "end": "2010260"
  },
  {
    "text": "scalable and not our problem right AWS is problem hence Redis we",
    "start": "2010260",
    "end": "2015450"
  },
  {
    "text": "wanted a nodejs server javascript was the choice because we had surprised a",
    "start": "2015450",
    "end": "2021180"
  },
  {
    "text": "lot of front-end developers writing those beautiful react front ends right and they just wanted to be able to write back-end code so it made sense and",
    "start": "2021180",
    "end": "2026450"
  },
  {
    "text": "notice cool right and we had our edge so what was the biggest problem that we had",
    "start": "2026450",
    "end": "2032520"
  },
  {
    "text": "to solve it was what is the state of your state there's too many things",
    "start": "2032520",
    "end": "2038160"
  },
  {
    "text": "moving along here right and you know I don't think that these types of applications are not naturally lend",
    "start": "2038160",
    "end": "2043800"
  },
  {
    "text": "themselves super well to immutable for a couple reasons you know the first is",
    "start": "2043800",
    "end": "2049310"
  },
  {
    "text": "CMS's or old data right and that's easy you put that in a database but then",
    "start": "2049310",
    "end": "2054419"
  },
  {
    "text": "you've gotta like produce a website and when you produce a website you've got these crazy things like templates and you have other data from the front end",
    "start": "2054419",
    "end": "2060929"
  },
  {
    "text": "and you have to combine all that to create this website instantly across you know 19 or more node servers and you",
    "start": "2060929",
    "end": "2065970"
  },
  {
    "text": "have to do all that making sure that everything is consistent and that if any service or rather if any instance falls",
    "start": "2065970",
    "end": "2071250"
  },
  {
    "text": "over that it comes right back up with the right version of the data and the right version the templates right that's that was the problem we had to solve so",
    "start": "2071250",
    "end": "2078720"
  },
  {
    "text": "each piece of this was pretty straightforward we had my sequel as a database for",
    "start": "2078720",
    "end": "2083820"
  },
  {
    "text": "WordPress that's not a controversial choice I think by any means scaling it wasn't an issue we ran Aurora in AWS it",
    "start": "2083820",
    "end": "2092250"
  },
  {
    "text": "had just come out pretty recently quite frankly we didn't know how it worked but it seemed to replace my sequel pretty",
    "start": "2092250",
    "end": "2098550"
  },
  {
    "text": "well toward the end you know we learned about its read-only endpoint support and move toward a lot of that stuff which",
    "start": "2098550",
    "end": "2104520"
  },
  {
    "text": "was really awesome we're able to separate out the rights from the reads which was cool WordPress is a beast",
    "start": "2104520",
    "end": "2110640"
  },
  {
    "text": "right developers make a decision to use it because custom fields right everyone",
    "start": "2110640",
    "end": "2116250"
  },
  {
    "text": "wants these beautiful custom fields this is great because you're using because",
    "start": "2116250",
    "end": "2122520"
  },
  {
    "text": "you can give them that right we used to plugin that stored all the custom field data instead of in separate",
    "start": "2122520",
    "end": "2128910"
  },
  {
    "text": "columns it's stored everything is one big JSON blob in a single column which sounds great if you're pulling it out as",
    "start": "2128910",
    "end": "2134940"
  },
  {
    "text": "JSON it also produces some insane my sequel queries like I've never seen",
    "start": "2134940",
    "end": "2140130"
  },
  {
    "text": "before so pulling data out of out of WordPress was essentially a non-starter without",
    "start": "2140130",
    "end": "2145420"
  },
  {
    "text": "caching it right so what we ended up doing was instead of pulling it out of WordPress we ended up pushing it into",
    "start": "2145420",
    "end": "2151390"
  },
  {
    "text": "Redis so every time someone published a page on the site it would go into Redis",
    "start": "2151390",
    "end": "2157360"
  },
  {
    "text": "and Redis is great because if you're a no js' server and you are simply taking",
    "start": "2157360",
    "end": "2163840"
  },
  {
    "text": "templates and you're combining data with templates and you're getting a page request and it's /foo slash bar I go to",
    "start": "2163840",
    "end": "2171010"
  },
  {
    "text": "uh I go to Redis and I say give me the value for foo bar and I get the JSON",
    "start": "2171010",
    "end": "2176380"
  },
  {
    "text": "right back right so it's the perfect key value store for something like this from",
    "start": "2176380",
    "end": "2183280"
  },
  {
    "text": "there again console and I'm going to talk about how we use console to solve our biggest problem in a second and we",
    "start": "2183280",
    "end": "2191080"
  },
  {
    "text": "stored all of our templeton s3 so that meant that that if you were a developer you could make changes to your templates",
    "start": "2191080",
    "end": "2198730"
  },
  {
    "text": "and push them up to s3 and that would be it so how did we solve this problem of",
    "start": "2198730",
    "end": "2204070"
  },
  {
    "text": "the state of the state so we abused s3 console and ELB health checks to figure out what everything",
    "start": "2204070",
    "end": "2211960"
  },
  {
    "text": "looked like at all times right this is like I think a very big immutable hack so the biggest fear in the design of the",
    "start": "2211960",
    "end": "2220510"
  },
  {
    "text": "system from from my team was how does it hold up to Al Franken right how is it",
    "start": "2220510",
    "end": "2226210"
  },
  {
    "text": "going to stand up to to an onslaught of traffic that you don't know about and you have to kind of assume that it won't",
    "start": "2226210",
    "end": "2232830"
  },
  {
    "text": "alright that's that was my team's mantra was just assume that your services aren't going to and make sure that",
    "start": "2232830",
    "end": "2239500"
  },
  {
    "text": "you're building them in a way that when they come back as they do everything is in sync and all the state is consistent",
    "start": "2239500",
    "end": "2245950"
  },
  {
    "text": "across your stateless machines right so that that's one of my big concerns right",
    "start": "2245950",
    "end": "2251320"
  },
  {
    "text": "second concern from developers is how am I gonna get templates changes out there right temporal changes are huge on a",
    "start": "2251320",
    "end": "2258010"
  },
  {
    "text": "website right digital team wants a button move from here to here they want this text change over here this happens",
    "start": "2258010",
    "end": "2264310"
  },
  {
    "text": "you know on a busy day tens maybe 50 times a day right so how do you do that",
    "start": "2264310",
    "end": "2269740"
  },
  {
    "text": "how do you get those templates to s3 how do you get them onto the machines",
    "start": "2269740",
    "end": "2275109"
  },
  {
    "text": "and make sure everything is consistent and remember hacking an ami takes time",
    "start": "2275109",
    "end": "2280749"
  },
  {
    "text": "right so you can't do that so what we did was we leveraged s3 to store all of",
    "start": "2280749",
    "end": "2287170"
  },
  {
    "text": "our templates right so you would make a template change you would push it up to s3 through Travis and we get tagged with",
    "start": "2287170",
    "end": "2292930"
  },
  {
    "text": "a version when you published a page or",
    "start": "2292930",
    "end": "2298089"
  },
  {
    "text": "rabbit rather when you were ready to publish new templates go into WordPress and you'd say this is the version of",
    "start": "2298089",
    "end": "2304029"
  },
  {
    "text": "templates I'd want I'm ready to go and I'd click OK that would write the",
    "start": "2304029",
    "end": "2310660"
  },
  {
    "text": "template version to console console was basically our our highly available",
    "start": "2310660",
    "end": "2317230"
  },
  {
    "text": "cluster that always told us what the right thing was it was the canonical source basically for our state",
    "start": "2317230",
    "end": "2322690"
  },
  {
    "text": "so console then new ok these are the right templates that I have how did we",
    "start": "2322690",
    "end": "2328900"
  },
  {
    "text": "abuse you he'll be health checks so this is this is actually the code that did it a bit of an anti-pattern right you'll be",
    "start": "2328900",
    "end": "2336009"
  },
  {
    "text": "health checks probably should be like real quick if I service up what we did instead was we had the LEL be health",
    "start": "2336009",
    "end": "2343029"
  },
  {
    "text": "check be responsible for basically controlling all this the state of our",
    "start": "2343029",
    "end": "2348670"
  },
  {
    "text": "world right we said ok there's two things you got to be to be in the ELB if you're an instance serving this website",
    "start": "2348670",
    "end": "2354430"
  },
  {
    "text": "you got to be you got to be up to guy to be taking traffic right you got to be responding to like just slash health and",
    "start": "2354430",
    "end": "2359920"
  },
  {
    "text": "giving it 200 ok but that's not good enough you also need to have the right template",
    "start": "2359920",
    "end": "2365920"
  },
  {
    "text": "versions so you'll be health check would kick off every five seconds it would make sure that the version and console",
    "start": "2365920",
    "end": "2371739"
  },
  {
    "text": "matched the version of the templates on the box and if it didn't because you know cron broke or something which is a",
    "start": "2371739",
    "end": "2377859"
  },
  {
    "text": "terrible that'd be horrible we should all just go home if that happens but sometimes things would happen right they",
    "start": "2377859",
    "end": "2384009"
  },
  {
    "text": "don't get pulled down there's a some sort of error in the templates so what",
    "start": "2384009",
    "end": "2389109"
  },
  {
    "text": "would the EOB health check do it would just pull that instance from rotation and take care of the problem so we",
    "start": "2389109",
    "end": "2394930"
  },
  {
    "text": "basically just co-opted EOB health checks into managing the state of all of",
    "start": "2394930",
    "end": "2400809"
  },
  {
    "text": "these nodes servers and and it worked that was the thing that that was stood",
    "start": "2400809",
    "end": "2406059"
  },
  {
    "text": "traffic on on to the DNC perfectly we attained 97 to",
    "start": "2406059",
    "end": "2413470"
  },
  {
    "text": "90 percent cash hit rate on that service through fastly just by being really smart about the way we were updating",
    "start": "2413470",
    "end": "2419080"
  },
  {
    "text": "things and when it did get traffic it handled 200 500 QPS no problem always",
    "start": "2419080",
    "end": "2426190"
  },
  {
    "text": "serving the right templates and when it wasn't that instance would just come",
    "start": "2426190",
    "end": "2431680"
  },
  {
    "text": "down and we'd start over and that was the beautiful thing about about fitting this into immutable so some takeaways",
    "start": "2431680",
    "end": "2438960"
  },
  {
    "text": "immutable infrastructure was key to our technical success I really don't think that we could have done this any other",
    "start": "2438960",
    "end": "2444550"
  },
  {
    "text": "way there's just quite frankly no other way to not have a giant ops team and a giant",
    "start": "2444550",
    "end": "2451090"
  },
  {
    "text": "don't have a giant off steam and a dev team of the size that we had and wanted to grow to and not have that that",
    "start": "2451090",
    "end": "2457540"
  },
  {
    "text": "contract in place there's no way I could know what was going on in every single service and so this was this was perfect",
    "start": "2457540",
    "end": "2465420"
  },
  {
    "text": "we're able to move quickly but we were resilient against failure most of the time right it takes more effort to apply",
    "start": "2465420",
    "end": "2474340"
  },
  {
    "text": "immutable to everything you're doing like you know applying immutable to something like what you just saw is not simple right you kind of have to work",
    "start": "2474340",
    "end": "2480760"
  },
  {
    "text": "you've got these workarounds but it's totally worth it and ultimately developers like the handshake between",
    "start": "2480760",
    "end": "2486880"
  },
  {
    "text": "sre and dev when it comes to immutable because I'm not the gateway to production I'm not telling you not to",
    "start": "2486880",
    "end": "2493510"
  },
  {
    "text": "ship it I'm just saying that thing better be stateless it better fit behind that API gateway and if you want a front-end oh it better be server lists",
    "start": "2493510",
    "end": "2499780"
  },
  {
    "text": "and then I never have to hear about it right except for when something goes wrong but we know how to fix it some",
    "start": "2499780",
    "end": "2506890"
  },
  {
    "text": "other takeaways on a presidential campaign innovation is a necessity and there aren't any hard and fast rules in",
    "start": "2506890",
    "end": "2513700"
  },
  {
    "text": "tech there's lots of other rules but you can build really cool stuff it's",
    "start": "2513700",
    "end": "2520120"
  },
  {
    "text": "difficult to imagine where infrastructure tech be in four years could be could be containers could be",
    "start": "2520120",
    "end": "2525970"
  },
  {
    "text": "something we don't even know but the next campaign will be leveraging the most exciting stuff out there right so",
    "start": "2525970",
    "end": "2531340"
  },
  {
    "text": "this is you know already over two years ago it's it's I can't even imagine what people will be thinking about in in",
    "start": "2531340",
    "end": "2537910"
  },
  {
    "text": "three years and things get going and what they'll want to use it's very exciting and I think the biggest takeaway likely",
    "start": "2537910",
    "end": "2543970"
  },
  {
    "text": "at least for me is that you can you can really build cool and work in public service right so there's nothing",
    "start": "2543970",
    "end": "2549880"
  },
  {
    "text": "stopping everyone from you know you go to a presidential campaign you go work",
    "start": "2549880",
    "end": "2555760"
  },
  {
    "text": "in tech you volunteer on a congressional campaign whatever it is you can do cool  you can build services at scale",
    "start": "2555760",
    "end": "2562090"
  },
  {
    "text": "it's not old legacy stuff it's it's really cool stuff so yeah I think that's",
    "start": "2562090",
    "end": "2568060"
  },
  {
    "text": "that's it thank you Michael",
    "start": "2568060",
    "end": "2580450"
  },
  {
    "text": "I think we have some time for some questions we do want to keep things away from the political sphere and towards",
    "start": "2580450",
    "end": "2586330"
  },
  {
    "text": "the technical sphere so if you have any questions feel free to raise your hand",
    "start": "2586330",
    "end": "2592320"
  },
  {
    "text": "you said you're using ansible yeah and Packer did you run ansible from packer",
    "start": "2596160",
    "end": "2601300"
  },
  {
    "text": "or is use ansible somewhere else three times actually so that's a really good question",
    "start": "2601300",
    "end": "2607170"
  },
  {
    "text": "so ansible ran in packer so the the primary way that we got code into the am",
    "start": "2607170",
    "end": "2613900"
  },
  {
    "text": "eyes was simply by creating a debian package but you know you could tar it up",
    "start": "2613900",
    "end": "2621130"
  },
  {
    "text": "whatever we just had a package that Travis would produce it's the bundle of all the files and we would send that",
    "start": "2621130",
    "end": "2626770"
  },
  {
    "text": "over to Packer Packer would put that on on packet the nice thing about doing",
    "start": "2626770",
    "end": "2632290"
  },
  {
    "text": "this is actually a groundwork convention the nice thing about doing this through the Debian packages is you get nice",
    "start": "2632290",
    "end": "2638440"
  },
  {
    "text": "dependency management rate tells it tells when to exactly what to install so",
    "start": "2638440",
    "end": "2643660"
  },
  {
    "text": "that happens and you get all your files in place and then you need to do a little bit more so we would run our ansible playbook there and then I would",
    "start": "2643660",
    "end": "2650200"
  },
  {
    "text": "actually run a second time once the ami was imaged onto the machine we were running ansible again in production to",
    "start": "2650200",
    "end": "2656350"
  },
  {
    "text": "make sure we got our production values so often things would change right between dev and prod so we'd pull from console again get our secrets and REE",
    "start": "2656350",
    "end": "2663160"
  },
  {
    "text": "template yep anybody else",
    "start": "2663160",
    "end": "2668819"
  },
  {
    "text": "it sounds like one of the big reasons your handle that huge spike was your",
    "start": "2674349",
    "end": "2680720"
  },
  {
    "text": "kind of message queue kind of situation we yeah you know built these things up",
    "start": "2680720",
    "end": "2686420"
  },
  {
    "text": "in the back back-end was that more important to handling that spike than the immutable architecture the immutable",
    "start": "2686420",
    "end": "2692869"
  },
  {
    "text": "backends or how did that how the amitabh apart play into that so I think the the",
    "start": "2692869",
    "end": "2698329"
  },
  {
    "text": "immutable part of that right is that our services were small and they and we",
    "start": "2698329",
    "end": "2704359"
  },
  {
    "text": "could basically guarantee that there was no state on them and that they were always going to be the same right so I",
    "start": "2704359",
    "end": "2709880"
  },
  {
    "text": "think obviously you know a core tenant here in just any resilient design is",
    "start": "2709880",
    "end": "2715310"
  },
  {
    "text": "getting everything that changes away from your machines right what I think",
    "start": "2715310",
    "end": "2721300"
  },
  {
    "text": "helped us survive that night right like that traffic spike and all the traffic spikes is really just the promise of of",
    "start": "2721300",
    "end": "2729470"
  },
  {
    "text": "the machines always looking exactly the same right and coming up without any inconsistencies and and really just",
    "start": "2729470",
    "end": "2736130"
  },
  {
    "text": "nothing to worry about and that it could just keep churning on whatever it was doing previously so I think it's a",
    "start": "2736130",
    "end": "2742670"
  },
  {
    "text": "combination of the mutable I think it's a combination of you know having service front ends and I think it's a",
    "start": "2742670",
    "end": "2747980"
  },
  {
    "text": "combination of just architecting your applications so that the work that you need to do is separate from the work",
    "start": "2747980",
    "end": "2755060"
  },
  {
    "text": "that's happening on the machines and that you can always know in any of your services that are going to be subjected",
    "start": "2755060",
    "end": "2760700"
  },
  {
    "text": "to something like this that they can all fall out one can just kind of handle things while the other ones are coming",
    "start": "2760700",
    "end": "2765710"
  },
  {
    "text": "back and they'll just keep churning right that's that's the promise of that of that set up I think cool anybody else",
    "start": "2765710",
    "end": "2773240"
  },
  {
    "text": "have a question all right well thank you very much thank you",
    "start": "2773240",
    "end": "2781390"
  }
]