[
  {
    "start": "0",
    "end": "19000"
  },
  {
    "text": "uh we're going to be exploring SDK add-ons for Android devices my name is Larry schaer uh here's my Twitter handle",
    "start": "9599",
    "end": "16198"
  },
  {
    "text": "there if you want to follow me uh so real quick I'll tell you a little bit about me and why I'm up here so I'm CTO",
    "start": "16199",
    "end": "22640"
  },
  {
    "start": "19000",
    "end": "19000"
  },
  {
    "text": "and co-founder of highq LLC we're a engineering consulting firm specializing",
    "start": "22640",
    "end": "28080"
  },
  {
    "text": "in uh Android mobile devices as well as device driver sport sport packages uh",
    "start": "28080",
    "end": "34399"
  },
  {
    "text": "and really the complete software stack I've got over 16 years uh developing embedded in mobile device",
    "start": "34399",
    "end": "40480"
  },
  {
    "text": "software of various kinds uh so I've got extensive experience throughout the software stack and Android is a big case",
    "start": "40480",
    "end": "47239"
  },
  {
    "text": "there I've been from the bottom down to the bootloader all the way up to doing end application work and in addition to",
    "start": "47239",
    "end": "53480"
  },
  {
    "text": "Android I've also worked on numerous other operating systems I've been working with Android",
    "start": "53480",
    "end": "60079"
  },
  {
    "text": "since the first uh public release since a AOSP was put out and I've actually",
    "start": "60079",
    "end": "65320"
  },
  {
    "text": "been doing native development and debugging uh since before the ndk was out so I've got a lot of experience uh",
    "start": "65320",
    "end": "72000"
  },
  {
    "text": "working on the Android platform in all aspects of it I've also been the lead architect and developer on three",
    "start": "72000",
    "end": "77600"
  },
  {
    "text": "different custom Android platforms that were put out for oems and I'm also an experienced trainer",
    "start": "77600",
    "end": "84000"
  },
  {
    "text": "so I've been up here and I've spoken at andevcon before uh I've also created some content",
    "start": "84000",
    "end": "89880"
  },
  {
    "text": "for plural site they're an online uh training uh course provider and I've",
    "start": "89880",
    "end": "95240"
  },
  {
    "text": "also do in-person training on Android internals for the new",
    "start": "95240",
    "end": "100398"
  },
  {
    "start": "100000",
    "end": "100000"
  },
  {
    "text": "Circle let's go over a quick overview of what we're going to talk about today uh so we're going to talk about a little",
    "start": "100920",
    "end": "106320"
  },
  {
    "text": "bit of OEM Magic on a on a platform and the SDK add-on we're going to talk about what",
    "start": "106320",
    "end": "112000"
  },
  {
    "text": "SDK add-ons can do what they're capable of doing and we're also going to talk about uh app developers and how they can",
    "start": "112000",
    "end": "119240"
  },
  {
    "text": "take advantage of the things that you're putting into your end platform how many in the room are app developers only and",
    "start": "119240",
    "end": "125640"
  },
  {
    "text": "not platform developers all right so good number so the rest of you guys are all working on end platforms building new devices uh so",
    "start": "125640",
    "end": "133760"
  },
  {
    "text": "this is good we got a nice Fair mix in here so then we're going to look at it",
    "start": "133760",
    "end": "138840"
  },
  {
    "text": "from a platform standpoint if you're creating a new platform uh how do you build one of these things how do you",
    "start": "138840",
    "end": "144400"
  },
  {
    "text": "create something that adds value to your platform and how do you make that available uh to your app developers and",
    "start": "144400",
    "end": "152480"
  },
  {
    "text": "then uh we'll also talk a little bit about extra add-ons and what those are they're a little different from the platform add-ons we'll have a little Q&A",
    "start": "152480",
    "end": "160080"
  },
  {
    "text": "uh but honestly feel free if uh you guys have questions as I'm going through something something's not clear if I'm",
    "start": "160080",
    "end": "165319"
  },
  {
    "text": "moving too fast just uh you know let me know all right so let's talk a little",
    "start": "165319",
    "end": "171000"
  },
  {
    "start": "169000",
    "end": "169000"
  },
  {
    "text": "bit about the OEM magic the SDK add-on all right this is platform specific",
    "start": "171000",
    "end": "176080"
  },
  {
    "text": "functionality that you the device vendor want to be able to enable a and give access to your users something that's",
    "start": "176080",
    "end": "182080"
  },
  {
    "text": "outside of the normal scope of what Android can provide okay so you want to be able to give developers the ability",
    "start": "182080",
    "end": "189000"
  },
  {
    "text": "to take advantage of those things and these value added features that really exercise some neat things on your",
    "start": "189000",
    "end": "195519"
  },
  {
    "text": "platform so you're really extending the core Android feature set you're providing functionality that's not there",
    "start": "195519",
    "end": "201360"
  },
  {
    "text": "we've seen this in the market quite a bit um a lot of times these things are adopted by the Android open source",
    "start": "201360",
    "end": "208159"
  },
  {
    "text": "project a great example is HTC so HTC provided some of the original uh",
    "start": "208159",
    "end": "213640"
  },
  {
    "text": "Bluetooth low energy work as well as uh some of the original uh HDMI output work",
    "start": "213640",
    "end": "220879"
  },
  {
    "text": "and they worked closely with Google on that and ultimately those kinds of features and functionality get pulled into the mainline",
    "start": "220879",
    "end": "227959"
  },
  {
    "text": "Android basically what an oem add-on or an SDK add-on is the special shared",
    "start": "227959",
    "end": "233239"
  },
  {
    "text": "Library which is on the OEM device and you can take advantage of those if you know how to use",
    "start": "233239",
    "end": "238680"
  },
  {
    "text": "them you give your users the ability to integrate those with ADT or with Android",
    "start": "238680",
    "end": "244879"
  },
  {
    "text": "Studio so now app developers can develop against your SDK add-on and leverage the",
    "start": "244879",
    "end": "251120"
  },
  {
    "text": "functionality that you provide if any of you have worked on a platform before you're probably going",
    "start": "251120",
    "end": "256959"
  },
  {
    "text": "whoa whoa whoa hold on just a second here all right I thought oems can't play",
    "start": "256959",
    "end": "263040"
  },
  {
    "text": "with Android that well or not that well they can't really mess with Android okay",
    "start": "263040",
    "end": "268199"
  },
  {
    "text": "there are restrictions about what you can and can't do the whole point of this thing is to make it Universal right so I",
    "start": "268199",
    "end": "273520"
  },
  {
    "text": "write my app in one way and it works on all these devices we know that's not always the case but yes according to the",
    "start": "273520",
    "end": "281039"
  },
  {
    "text": "CDD you're not allowed to do that as an oem and as a platform vendor but this is a little",
    "start": "281039",
    "end": "286919"
  },
  {
    "text": "different okay for those who aren't familiar the Android CDD is the compatibility definition document okay",
    "start": "286919",
    "end": "293960"
  },
  {
    "start": "287000",
    "end": "287000"
  },
  {
    "text": "this is a document that says if you're going to be called an Android device this is what you have to do okay",
    "start": "293960",
    "end": "301880"
  },
  {
    "text": "these are the rules you have to follow in order to use the Android name okay it has hardware and software",
    "start": "301880",
    "end": "309039"
  },
  {
    "text": "requirements and the thing is it's based on the version of Android in use so the",
    "start": "309039",
    "end": "314680"
  },
  {
    "text": "requirements for the older Android 2.3 releases the old gingerbread releases are different than what they are for the",
    "start": "314680",
    "end": "321360"
  },
  {
    "text": "latest KitKat release so the spec continues to evolve and based on how you",
    "start": "321360",
    "end": "327680"
  },
  {
    "text": "want your device put into the market and what version you want to put in the market you have to uh adhere to those",
    "start": "327680",
    "end": "334319"
  },
  {
    "text": "requirements okay and it continues to move a great example of this you know back in the froo and gingerbread days",
    "start": "334319",
    "end": "342039"
  },
  {
    "text": "they hadn't really got to tablets yet so they had restrictions on you had to provide Wireless telepan functionality",
    "start": "342039",
    "end": "348919"
  },
  {
    "text": "on all Android devices obviously that's pretty relaxed now because my Nexus 7",
    "start": "348919",
    "end": "354520"
  },
  {
    "text": "it's got Wi-Fi only okay so it continues to evolve you're no longer required to",
    "start": "354520",
    "end": "359759"
  },
  {
    "text": "have some functionality uh but you are required to have other bits of functionality what we're talking about",
    "start": "359759",
    "end": "365400"
  },
  {
    "text": "is a little bit different I'm not going to read that and it's probably an ey chart for those of you back in the back okay but section",
    "start": "365400",
    "end": "371000"
  },
  {
    "text": "3.6 of the CDD prohibits altering the public apis and if you read all that",
    "start": "371000",
    "end": "376919"
  },
  {
    "text": "gibberish it's going to tell you all the Java Java X Sun Android and com. Android",
    "start": "376919",
    "end": "383280"
  },
  {
    "text": "name space have to remain intact so you as the platform vendor are not allowed",
    "start": "383280",
    "end": "388880"
  },
  {
    "text": "to touch those apis you can't alter them and change their signature you can't add",
    "start": "388880",
    "end": "395400"
  },
  {
    "text": "new methods you can't add new classes and you can't remove any classes or",
    "start": "395400",
    "end": "400560"
  },
  {
    "text": "methods they all have to remain intact now there is a little caveat way down at",
    "start": "400560",
    "end": "405639"
  },
  {
    "text": "the bottom for those of you with really good eyes who can see it that states you",
    "start": "405639",
    "end": "411360"
  },
  {
    "text": "can't alter the signature of the various methods and classes but you can change the",
    "start": "411360",
    "end": "416840"
  },
  {
    "text": "implementation be careful though if you do that because because you have to adhere to whatever the contract of that",
    "start": "416840",
    "end": "421919"
  },
  {
    "text": "class is or that method so if you're going to change the built-in Behavior make sure you're doing it in a way",
    "start": "421919",
    "end": "428960"
  },
  {
    "text": "that's still going to maintain its compatibility",
    "start": "428960",
    "end": "434160"
  },
  {
    "text": "okay what we're doing with SDK add-ons is we're doing this in the OEM namespace",
    "start": "434160",
    "end": "439639"
  },
  {
    "text": "so you're calling your add-ons something that's specific to your device and you don't add it to what's considered the",
    "start": "439639",
    "end": "446759"
  },
  {
    "text": "Android public API does that make sense to everybody okay so what can you do you can do just",
    "start": "446759",
    "end": "453800"
  },
  {
    "start": "450000",
    "end": "450000"
  },
  {
    "text": "about anything you want with one of these things it's a good and a bad thing right so good example you've got",
    "start": "453800",
    "end": "460520"
  },
  {
    "text": "Google's apis okay you've got the map apis you've got the Play Store apis that",
    "start": "460520",
    "end": "466159"
  },
  {
    "text": "are all available as add-ons but they're really integrated in with the OEM platform okay the HTC sensui or the echo",
    "start": "466159",
    "end": "474759"
  },
  {
    "text": "display or the HDMI output is another good example okay these are SDK add-ons that are bundled with those specific",
    "start": "474759",
    "end": "481479"
  },
  {
    "text": "platforms that you as an app writer can take advantage of if you know how to do",
    "start": "481479",
    "end": "486919"
  },
  {
    "text": "it but the OEM Bears extra responsibility when you create one of these things okay there are security",
    "start": "486919",
    "end": "492759"
  },
  {
    "text": "risks associated with it are you writing secure code this is going into every one of these million devices you're going to",
    "start": "492759",
    "end": "498240"
  },
  {
    "text": "sell you better make sure you get it right okay uh you could have unintended",
    "start": "498240",
    "end": "503319"
  },
  {
    "text": "platform side effects so that's gets back to if you're going to change the underlying implementation you you don't",
    "start": "503319",
    "end": "509440"
  },
  {
    "text": "change the signature of a method but it better behave the same way that the uh",
    "start": "509440",
    "end": "515240"
  },
  {
    "text": "stock code does okay and you better have a good reason for why you're changing it you could also have unintended app",
    "start": "515240",
    "end": "522399"
  },
  {
    "text": "side effects so you have to be really careful from an app development",
    "start": "522399",
    "end": "528080"
  },
  {
    "start": "523000",
    "end": "523000"
  },
  {
    "text": "perspective where do you find these things how do I take advantage of some of these things I've just named off and",
    "start": "528080",
    "end": "533240"
  },
  {
    "text": "it really depends on the OEM okay each OEM provides a different uh location to",
    "start": "533240",
    "end": "538680"
  },
  {
    "text": "where you can download SDK add-ons they usually provide it via a URL that you",
    "start": "538680",
    "end": "544399"
  },
  {
    "text": "can drop into the SDK manager and take a look at what they've got out there and pull it into your tool",
    "start": "544399",
    "end": "550000"
  },
  {
    "text": "chain they're not always easy to find sometimes they're buried okay they don't",
    "start": "550000",
    "end": "555240"
  },
  {
    "text": "make it obvious on how to find these things and they're not always straightforward to set",
    "start": "555240",
    "end": "560760"
  },
  {
    "text": "up ideally you should be able to enter one of these URLs into the SDK manager",
    "start": "560760",
    "end": "566200"
  },
  {
    "text": "and just click on a couple of buttons and boom it's there okay however it doesn't always work that way so you just",
    "start": "566200",
    "end": "573160"
  },
  {
    "text": "have to be aware of that as you're going through it okay and not all SDK add-ons are created equal in some cases they",
    "start": "573160",
    "end": "580240"
  },
  {
    "text": "provide emulators with the apis that are going to emulate their devices and they'll also provide the API that you",
    "start": "580240",
    "end": "586720"
  },
  {
    "text": "can link against in other cases they're going to provide you with just an emulator so you can see how your app",
    "start": "586720",
    "end": "592040"
  },
  {
    "text": "would run on one of their devices but they're not really giving you access to their underlying apis so like I said",
    "start": "592040",
    "end": "599160"
  },
  {
    "text": "said they're not all created equal so let's talk about how you might",
    "start": "599160",
    "end": "604959"
  },
  {
    "text": "set one of these things up and we'll use HTC as an example if you load the SDK manager",
    "start": "604959",
    "end": "611440"
  },
  {
    "text": "and you go to tools manage add-on sites up in your menu and you go to user defined sites",
    "start": "611440",
    "end": "618640"
  },
  {
    "text": "it's an extra button or an extra tab up there if you've got the URL it's going to pop open this little dialogue and you",
    "start": "618640",
    "end": "625360"
  },
  {
    "text": "can stick the URL for uh whoever's add-on you're looking for time and put it in there and hit",
    "start": "625360",
    "end": "632600"
  },
  {
    "text": "okay sorry didn't mean to advance",
    "start": "632600",
    "end": "636959"
  },
  {
    "text": "there and once you do that it's going to basically add it to the uh repositories",
    "start": "638959",
    "end": "645880"
  },
  {
    "text": "and the sites that you can look through okay so sometimes that's kind of hard by",
    "start": "645880",
    "end": "651000"
  },
  {
    "start": "647000",
    "end": "647000"
  },
  {
    "text": "default the SDK manager sorts by name way down here at the bottom and the",
    "start": "651000",
    "end": "656800"
  },
  {
    "text": "easiest way to find a new Repository or a new set of tools that you want to add is to go down and click that you want to",
    "start": "656800",
    "end": "662200"
  },
  {
    "text": "sort by repository and now looking in my list you can see all the way down at the bottom here that I'm looking at just the",
    "start": "662200",
    "end": "668560"
  },
  {
    "text": "HTC add-ons and I want to check those and enable them and now I'll add them in and it'll pull it down uh and it'll",
    "start": "668560",
    "end": "675920"
  },
  {
    "text": "install it to my local environment okay but where is this thing what happened once I did",
    "start": "675920",
    "end": "682120"
  },
  {
    "start": "678000",
    "end": "678000"
  },
  {
    "text": "that the SDK manager places it in the SDK directory on your hard disk or on",
    "start": "682120",
    "end": "688760"
  },
  {
    "text": "your hard dis on your disc and it's stored hierarchically under the add-on subdirectory so if you look at an",
    "start": "688760",
    "end": "695399"
  },
  {
    "text": "example here you can see under my tools uh I've got the SDK and there's an add-ons directory and in my case we're",
    "start": "695399",
    "end": "702240"
  },
  {
    "text": "looking at the HTC apis and you can see how it's structured okay by their",
    "start": "702240",
    "end": "707639"
  },
  {
    "text": "package and I'm sorry for those in the back that that might be a little tough to read I see a few people",
    "start": "707639",
    "end": "713079"
  },
  {
    "text": "squinting does anybody have any questions on how you drop one of those into your environment",
    "start": "714560",
    "end": "720480"
  },
  {
    "text": "uh I saw the screenshots were for Eclipse yes try that Android Studio yes",
    "start": "720480",
    "end": "725800"
  },
  {
    "text": "it will generally work in Android Studio the same because you can still get to the same SDK",
    "start": "725800",
    "end": "731040"
  },
  {
    "text": "manager okay all right so on the platform side",
    "start": "731040",
    "end": "738399"
  },
  {
    "text": "of things you're integrating this functionality into your platform",
    "start": "738399",
    "end": "743920"
  },
  {
    "text": "build okay you're going to Dei Define this in your device or your vendor tree how many people have built the AOSP",
    "start": "744079",
    "end": "750880"
  },
  {
    "text": "source code anybody daring Souls good I like it so when you define your own uh",
    "start": "750880",
    "end": "759360"
  },
  {
    "text": "device or vendor tree you're basically telling the build system in AOSP how you want to construct this thing what",
    "start": "759360",
    "end": "765600"
  },
  {
    "text": "packages are going to be there and you're going to drop extra functionality in okay you want to be careful in the",
    "start": "765600",
    "end": "772600"
  },
  {
    "text": "core framework okay you generally want to tread very lightly in there because",
    "start": "772600",
    "end": "778120"
  },
  {
    "text": "you don't want to VI violate CDD and you also don't want to destabilize the system uh later on we're going to go through a little demo and I'll show you",
    "start": "778120",
    "end": "786240"
  },
  {
    "text": "how you can do it and still be CDD compliant and at the same time how easy it is to have unintended consequences",
    "start": "786240",
    "end": "793720"
  },
  {
    "text": "okay you're going to potentially open up something you shouldn't necessarily open up and I'm doing that on purpose okay",
    "start": "793720",
    "end": "801240"
  },
  {
    "text": "these can include jni components although I'm not going to go over that okay uh your Source tree is going to",
    "start": "801240",
    "end": "808320"
  },
  {
    "text": "contain some make files there's going to be a permissions declaration for your library for your SDK add-on and then",
    "start": "808320",
    "end": "815399"
  },
  {
    "text": "you're going to describe with some details what's in your add-on and then have the sources themselves and all",
    "start": "815399",
    "end": "820959"
  },
  {
    "text": "that's going to be under your device and vendor",
    "start": "820959",
    "end": "824680"
  },
  {
    "start": "824000",
    "end": "824000"
  },
  {
    "text": "tree okay so we're talking about basing our source code off of the AOSP public",
    "start": "826440",
    "end": "831600"
  },
  {
    "text": "Source if you're working with a platform that's from a specific chipset vendor",
    "start": "831600",
    "end": "838759"
  },
  {
    "text": "for example a Qualcomm or an Intel they'll have a different variant but even they derive all of their work from",
    "start": "838759",
    "end": "844920"
  },
  {
    "text": "the AOSP source code so it's all going to look very similar setting this up is beyond the",
    "start": "844920",
    "end": "852040"
  },
  {
    "text": "scope of this class okay this is there's a lot involved there with understanding the underpinnings of the system and uh",
    "start": "852040",
    "end": "858360"
  },
  {
    "text": "there's some some good uh training materials out there and available um so",
    "start": "858360",
    "end": "864040"
  },
  {
    "text": "I'm not going to cover all of that we're going to briefly touch on some of these things as we go through just the add-on",
    "start": "864040",
    "end": "869360"
  },
  {
    "text": "piece of it okay you're going to want to get familiar with the build system for those that are used to eclipse and",
    "start": "869360",
    "end": "875000"
  },
  {
    "text": "building applications with eclipse or Android Studio you can throw that out the window okay this is all command line",
    "start": "875000",
    "end": "881560"
  },
  {
    "text": "based it's all make file based it's extremely extensible in what it can do",
    "start": "881560",
    "end": "886880"
  },
  {
    "text": "but there's very little to no documentation on it okay your documentation is basically the make files and they're not always",
    "start": "886880",
    "end": "895399"
  },
  {
    "text": "commented all right so if I'm creating an SDK add-on I need to Define some",
    "start": "895959",
    "end": "901880"
  },
  {
    "start": "896000",
    "end": "896000"
  },
  {
    "text": "special make variables in my make file okay we're going to define a product SDK name and this is going to be what I call",
    "start": "901880",
    "end": "909720"
  },
  {
    "text": "my name or my or my module or my library okay I Define a special SDK",
    "start": "909720",
    "end": "915600"
  },
  {
    "text": "add-on copy files and these are the files that I'm going to copy into my SDK",
    "start": "915600",
    "end": "920920"
  },
  {
    "text": "add-on package that gets downloaded by people and pulled into their SDK uh manager",
    "start": "920920",
    "end": "927600"
  },
  {
    "text": "environment okay the SDK add-on copy modules this is a mapping of the Java",
    "start": "927600",
    "end": "934440"
  },
  {
    "text": "fully qualified name of the package to the device file system okay",
    "start": "934440",
    "end": "940319"
  },
  {
    "text": "so I'm going to create an SDK add-on package that's going to have your typical Java uh namespace and the fully",
    "start": "940319",
    "end": "946720"
  },
  {
    "text": "qualified name there well the system is going to need to know where on the file system of the end device that's stored",
    "start": "946720",
    "end": "952160"
  },
  {
    "text": "and that's really what this defines okay and don't worry I'm going to give",
    "start": "952160",
    "end": "957360"
  },
  {
    "text": "an example of all this you'll get to see see these in an actual make file the uh SDK add-on stub definitions",
    "start": "957360",
    "end": "964480"
  },
  {
    "text": "this basically tells the build tools that these apis out of my package and",
    "start": "964480",
    "end": "969519"
  },
  {
    "text": "out of my library are what are considered public and people could actually use and build against",
    "start": "969519",
    "end": "976560"
  },
  {
    "text": "okay the SDK add-on doc modules this allows you to include documentation with your SDK uh add-on it's important make",
    "start": "976560",
    "end": "984440"
  },
  {
    "text": "sure you add documentation otherwise people won't know how to use your things and you're going to modify some of the",
    "start": "984440",
    "end": "990560"
  },
  {
    "text": "standard make variables that are available in the uh the Android Source tools okay product packages you now need",
    "start": "990560",
    "end": "998279"
  },
  {
    "text": "to add your SDK add-on library to the product packages list that are going to get built into your end uh product your",
    "start": "998279",
    "end": "1005480"
  },
  {
    "text": "end image product copy files is a list of special files that are going to get",
    "start": "1005480",
    "end": "1011160"
  },
  {
    "text": "copied to the device file system that tell the end file system what to",
    "start": "1011160",
    "end": "1016800"
  },
  {
    "start": "1016000",
    "end": "1016000"
  },
  {
    "text": "do okay any questions on the build I kind of skipped through that I'm sorry all right",
    "start": "1016800",
    "end": "1023639"
  },
  {
    "text": "add-on permissions this is handled both on the device and the build machine this",
    "start": "1023639",
    "end": "1029000"
  },
  {
    "text": "uses special files to Define uh what apis from your library are accessible",
    "start": "1029000",
    "end": "1034280"
  },
  {
    "text": "and the library itself okay on the device it uses an XML permissions file",
    "start": "1034280",
    "end": "1040360"
  },
  {
    "text": "and this is basically a mapping that says that my library is available to",
    "start": "1040360",
    "end": "1045480"
  },
  {
    "text": "people to or for people to use okay so it gives them permission to use that library and this XML file is is copied",
    "start": "1045480",
    "end": "1053679"
  },
  {
    "text": "as part of that product copy files variable in your system make",
    "start": "1053679",
    "end": "1058919"
  },
  {
    "text": "files so here's some sample contents of what this thing looks like it's pretty simple XML you just declare permissions",
    "start": "1058919",
    "end": "1067320"
  },
  {
    "text": "and I call out the fully qualified name of my library and where it's stored on",
    "start": "1067320",
    "end": "1073840"
  },
  {
    "text": "the end device okay so you'll see that I'm putting this under system framework which is a typical place that system",
    "start": "1073840",
    "end": "1080200"
  },
  {
    "text": "libraries go on the end device on the build machine you also",
    "start": "1080200",
    "end": "1087280"
  },
  {
    "text": "have to set up some add-on permissions okay this declares all the apis which are publicly exposed now this is an",
    "start": "1087280",
    "end": "1094480"
  },
  {
    "text": "important detail because you could from a Java perspective declare certain",
    "start": "1094480",
    "end": "1100600"
  },
  {
    "text": "classes or methods to be public but this restricts it so that only the things",
    "start": "1100600",
    "end": "1106320"
  },
  {
    "text": "that you define in this file are what's exposed in the add-on okay if you've",
    "start": "1106320",
    "end": "1112360"
  },
  {
    "text": "ever worked within the AOSP source code this is the same way that the build puts together the Android jar file that",
    "start": "1112360",
    "end": "1118320"
  },
  {
    "text": "everybody links against right when you create your APK and there's you know the public apis that we talked about before",
    "start": "1118320",
    "end": "1125600"
  },
  {
    "text": "you know section 3.6 of the CDD and what it defines those public apis that all",
    "start": "1125600",
    "end": "1131360"
  },
  {
    "text": "come straight out of that source code there's a big XML file that defines these are the public apis okay and",
    "start": "1131360",
    "end": "1137440"
  },
  {
    "text": "there's annotation in the AOSP source code that says this is hidden this is hidden this is hidden",
    "start": "1137440",
    "end": "1143120"
  },
  {
    "text": "and during that build if you were to violate CDD there's some checks in there so if you go to build AOSP and you've",
    "start": "1143120",
    "end": "1149960"
  },
  {
    "text": "added a method or a variable and you didn't mark it as hidden the build will fail and it'll say whoa you violated",
    "start": "1149960",
    "end": "1156600"
  },
  {
    "text": "this okay doesn't quite go that far with SDK add-ons but this does allow you to strict uh restrict what it is you",
    "start": "1156600",
    "end": "1163320"
  },
  {
    "text": "publicly expose to people okay this is what was spe ified",
    "start": "1163320",
    "end": "1168640"
  },
  {
    "text": "in the product SDK add-on stub defs and the format is pretty simple basically a",
    "start": "1168640",
    "end": "1174039"
  },
  {
    "text": "plus the package name and then if you don't want to restrict anything you can use a wild card okay it's an asct at the",
    "start": "1174039",
    "end": "1180520"
  },
  {
    "text": "end uh if you wanted to specify a specific uh class you certainly could",
    "start": "1180520",
    "end": "1187360"
  },
  {
    "text": "okay or a set of classes it could just be a multi-line file okay in our example it's a real simple API as you see here",
    "start": "1187360",
    "end": "1194280"
  },
  {
    "text": "you'll see here in a little bit and we're just going to go ahead and expose it all",
    "start": "1194280",
    "end": "1199960"
  },
  {
    "start": "1198000",
    "end": "1198000"
  },
  {
    "text": "now the other thing we're going to Define is a little manifest that's going to basically give the SDK manager",
    "start": "1199960",
    "end": "1205720"
  },
  {
    "text": "details about our add-on okay and this is what is specified as part of the",
    "start": "1205720",
    "end": "1211120"
  },
  {
    "text": "add-on copy files this is going to it can include the hardware inii and special skins so",
    "start": "1211120",
    "end": "1218960"
  },
  {
    "text": "if you wanted to skin your emulator image right so that it had a a look and feel like your end device and your end",
    "start": "1218960",
    "end": "1226400"
  },
  {
    "text": "phone or tablet or whatever you could you could go through that and you could include that as part of your",
    "start": "1226400",
    "end": "1232080"
  },
  {
    "text": "build okay now this manifest isn't an XML manifest it's not like uh the",
    "start": "1232080",
    "end": "1237520"
  },
  {
    "text": "Manifest you use when creating an APK it's a little different and it's going to have a few key aspects to it you're",
    "start": "1237520",
    "end": "1243679"
  },
  {
    "text": "first going to define the name of your add-on you're going to define the vendor",
    "start": "1243679",
    "end": "1249960"
  },
  {
    "text": "which is you and a brief description you can restrict it by API level and give it",
    "start": "1249960",
    "end": "1257000"
  },
  {
    "text": "revision uh you know whatever you want to call the revision of your own Library um and then you define the fully",
    "start": "1257000",
    "end": "1263600"
  },
  {
    "text": "qualified uh Javas space Library name okay and then you go a step further",
    "start": "1263600",
    "end": "1270440"
  },
  {
    "text": "and you say this library is also called this okay this is",
    "start": "1270440",
    "end": "1276520"
  },
  {
    "text": "what this is the jar file that is the result uh or the mapping of the jar to this specific Library okay does that",
    "start": "1276520",
    "end": "1284080"
  },
  {
    "text": "make sense to everybody so what about the sources",
    "start": "1284080",
    "end": "1289200"
  },
  {
    "start": "1286000",
    "end": "1286000"
  },
  {
    "text": "we're going to structure this in the usual way for a platform built remember we're not building an APK here we're not",
    "start": "1289200",
    "end": "1295279"
  },
  {
    "text": "building an application we're building something that's going to go into an end platform so this uses an android.mk file",
    "start": "1295279",
    "end": "1303080"
  },
  {
    "text": "and there's all kinds of special variables and includes that you do in in",
    "start": "1303080",
    "end": "1309320"
  },
  {
    "text": "order to build these files and so if you're building an add-on you're going",
    "start": "1309320",
    "end": "1314640"
  },
  {
    "text": "to clear out your variables in your make file you're going to tell it to uh",
    "start": "1314640",
    "end": "1320159"
  },
  {
    "text": "typically if you're building a Java Side Library you're going to tell it what to",
    "start": "1320159",
    "end": "1325600"
  },
  {
    "text": "do and basically this is a a helper function in the make environment that will walk through all subdirectories and",
    "start": "1325600",
    "end": "1331960"
  },
  {
    "text": "look for Java files to build okay um we call this module optional okay because",
    "start": "1331960",
    "end": "1340159"
  },
  {
    "text": "it's not one of the stock special libraries that's bundled in every AOSP platform you have to Define this thing",
    "start": "1340159",
    "end": "1346120"
  },
  {
    "text": "as optional and later dra on in the top level make file of our platform we're",
    "start": "1346120",
    "end": "1351559"
  },
  {
    "text": "going to declare that this module is one of our packages if you remember I I mentioned that you've got to Define",
    "start": "1351559",
    "end": "1357440"
  },
  {
    "text": "product packages this is the module name that we're going to add in there for product packages and then we build this as a",
    "start": "1357440",
    "end": "1364080"
  },
  {
    "text": "Java Library okay you also want to make sure you build a Java doc too so again always",
    "start": "1364080",
    "end": "1371279"
  },
  {
    "text": "important to uh comment your code and provide documentation right there in line and so there's some special make",
    "start": "1371279",
    "end": "1378320"
  },
  {
    "text": "rules that allow you to do that okay uh you can tell it to walk through all of",
    "start": "1378320",
    "end": "1383400"
  },
  {
    "text": "the Java and any generated HTML files that you want to include in that build",
    "start": "1383400",
    "end": "1389080"
  },
  {
    "text": "and you basically give it the library that you're going to use uh you're going to tell it it's a library and you call a",
    "start": "1389080",
    "end": "1397440"
  },
  {
    "text": "special uh make include which will build the documentation for it and that'll all get bundled as part of your SDK",
    "start": "1397440",
    "end": "1405840"
  },
  {
    "text": "add-on any questions on that okay so building it it's part of your",
    "start": "1405840",
    "end": "1412279"
  },
  {
    "text": "product definition so there's a special make rule you have to use to build unlike building regular AOSP where you",
    "start": "1412279",
    "end": "1419080"
  },
  {
    "text": "just can call make after you've run lunch or included the appropriate product definitions you actually have to",
    "start": "1419080",
    "end": "1425080"
  },
  {
    "text": "call this Special Rule okay and this name here is whatever you've defined your platform name to be okay and we'll",
    "start": "1425080",
    "end": "1432200"
  },
  {
    "text": "I'll give you a good example of this here in a little bit this is going to depend on the system having been buil built before and",
    "start": "1432200",
    "end": "1438559"
  },
  {
    "start": "1436000",
    "end": "1436000"
  },
  {
    "text": "the SDK having built before and it it should trigger a build but you know doesn't always work out that way so um",
    "start": "1438559",
    "end": "1445679"
  },
  {
    "text": "you may have to do a clean in between it really just kind of depends okay once it's",
    "start": "1445679",
    "end": "1452880"
  },
  {
    "text": "done under your top level Source tree there'll be an out directory and uh it's",
    "start": "1452880",
    "end": "1459240"
  },
  {
    "text": "going to drop everything as a a Prezi SDK add-on uh file which is going to be",
    "start": "1459240",
    "end": "1466559"
  },
  {
    "text": "located in this type of a pack and this build platform is basically the name of your",
    "start": "1466559",
    "end": "1471960"
  },
  {
    "text": "platform okay it's going to contain a stub jar file remember those apis that we said these are my public apis that's",
    "start": "1472360",
    "end": "1478919"
  },
  {
    "text": "what goes into that kind of Jar file it allows apks to link against your API and then it's resolved at load time on the",
    "start": "1478919",
    "end": "1485919"
  },
  {
    "text": "end platform it'll also include some emulator images uh and any kind of other",
    "start": "1485919",
    "end": "1491399"
  },
  {
    "text": "build files that you said you wanted to copy as part of the product",
    "start": "1491399",
    "end": "1496760"
  },
  {
    "text": "SDK so now we've talked about how you build this thing you've built your own image",
    "start": "1496760",
    "end": "1502440"
  },
  {
    "start": "1497000",
    "end": "1497000"
  },
  {
    "text": "you've built an SDK add-on as part of it how do you make it available to people you know earlier I walked you through",
    "start": "1502440",
    "end": "1508440"
  },
  {
    "text": "you know pulling in an HTC add-on now I've got my own how do I make that so",
    "start": "1508440",
    "end": "1513559"
  },
  {
    "text": "that you guys can build it okay the SDK manager can use either a web URL or a",
    "start": "1513559",
    "end": "1521000"
  },
  {
    "text": "local file and in either case it's looking for a special XML file which is",
    "start": "1521000",
    "end": "1526279"
  },
  {
    "text": "going to describe the add-on and some of the details and it follows a pretty simple schema it defines the name",
    "start": "1526279",
    "end": "1533039"
  },
  {
    "text": "the vendor just like our manifest inii that we defined inside of our actual",
    "start": "1533039",
    "end": "1539399"
  },
  {
    "text": "product build inside of our source build okay so you'll see that we Define a name",
    "start": "1539399",
    "end": "1546000"
  },
  {
    "text": "an API level uh vendor ID which is a little different than the vendor name uh",
    "start": "1546000",
    "end": "1552480"
  },
  {
    "text": "it's generally best to use something that's uh suitable for use on a file system so you wouldn't want to use use",
    "start": "1552480",
    "end": "1557840"
  },
  {
    "text": "something that has a space in the name for example okay you can Define all kinds of",
    "start": "1557840",
    "end": "1563679"
  },
  {
    "text": "things in here what revision it is a description uh a URL to link to it that someone could get to like our website",
    "start": "1563679",
    "end": "1571120"
  },
  {
    "text": "for example um you can also Define your license which can then link down",
    "start": "1571120",
    "end": "1576640"
  },
  {
    "text": "somewhere else to a special tag that says this is the license for this and it could be an open source license close",
    "start": "1576640",
    "end": "1581919"
  },
  {
    "text": "Source license whatever you're comfortable releasing um where it gets interesting is right here in the middle",
    "start": "1581919",
    "end": "1589559"
  },
  {
    "text": "okay and unfortunately uh the default build system doesn't have an automated",
    "start": "1589559",
    "end": "1594960"
  },
  {
    "text": "automated automatic way of generating this for you okay so once you have that zip file you have to come in here and",
    "start": "1594960",
    "end": "1602240"
  },
  {
    "text": "write this XML and generate some of these things so you can tell it uh",
    "start": "1602240",
    "end": "1608000"
  },
  {
    "text": "exactly uh what the size of the SDK add-on is and then a sha one hash for it",
    "start": "1608000",
    "end": "1614360"
  },
  {
    "text": "that's used as a check some the ex exact name of the file and this is relative",
    "start": "1614360",
    "end": "1621039"
  },
  {
    "text": "to uh this XML file on the end server",
    "start": "1621039",
    "end": "1627640"
  },
  {
    "text": "okay and then there's also a li section which lists the fully qualified domain name of what's in",
    "start": "1627640",
    "end": "1635640"
  },
  {
    "text": "there any questions over that",
    "start": "1635720",
    "end": "1640919"
  },
  {
    "text": "okay so some additional items again I want to touch on security again it's really easy to blow your own foot off",
    "start": "1640919",
    "end": "1646440"
  },
  {
    "text": "with this thing okay you can get in there and you could add all kinds of functionality but if you're not careful you could make it really dangerous",
    "start": "1646440",
    "end": "1652799"
  },
  {
    "text": "you're going to want to use custom permissions okay if you're enabling access to special Hardware on your",
    "start": "1652799",
    "end": "1658799"
  },
  {
    "text": "device you definitely want to make sure that users are aware when they install an APK that's going to leverage this",
    "start": "1658799",
    "end": "1664039"
  },
  {
    "text": "functionality that they need a special permission okay you want to enforce existing and",
    "start": "1664039",
    "end": "1670480"
  },
  {
    "text": "new permissions okay so even though you define a permission it doesn't do any",
    "start": "1670480",
    "end": "1676000"
  },
  {
    "text": "good if your end code on the platform itself doesn't actually pay attention to it and it doesn't check that a process",
    "start": "1676000",
    "end": "1682240"
  },
  {
    "text": "that's calling into this thing actually has that permission you want to be wary of data",
    "start": "1682240",
    "end": "1688919"
  },
  {
    "text": "usage and persistence I mean these are just common security things uh but you're talking about working at the platform level here so you definitely",
    "start": "1688919",
    "end": "1695159"
  },
  {
    "text": "want to be careful you want to be careful of any kind of side effects anything that you add must be really",
    "start": "1695159",
    "end": "1700279"
  },
  {
    "text": "stable okay uh a great example of how this can go arai I had a uh an Android",
    "start": "1700279",
    "end": "1707120"
  },
  {
    "text": "phone that was a gingerbread phone from a vendor that will remain nameless and",
    "start": "1707120",
    "end": "1712360"
  },
  {
    "text": "it had a service that would run on it and about every other day it would just go absolutely nuts and it would consume",
    "start": "1712360",
    "end": "1720480"
  },
  {
    "text": "100% of the CPU and my battery would go from Full to I'm turning you off in the",
    "start": "1720480",
    "end": "1727919"
  },
  {
    "text": "span of about 30 minutes okay um so you want to be careful you want to make sure",
    "start": "1727919",
    "end": "1733440"
  },
  {
    "text": "what you're doing is stable and deals with airor conditions like any type of system software yeah did those custom",
    "start": "1733440",
    "end": "1739039"
  },
  {
    "text": "permissions will they show up in theore when download uh only the name I don't",
    "start": "1739039",
    "end": "1745399"
  },
  {
    "text": "think they'll have any kind of description okay but that's a good question it's something that I've not actually had to look into for one of my",
    "start": "1745399",
    "end": "1753440"
  },
  {
    "text": "customers okay you want to make sure your codee's efficient okay so in addition to air handling you don't want to do something that's going to chew up",
    "start": "1753440",
    "end": "1759640"
  },
  {
    "text": "a ton of memory right and basically make it harder for apps to run on your end",
    "start": "1759640",
    "end": "1765000"
  },
  {
    "text": "platform uh you want to make sure you use proper threading and locking you know those typical things you need to be",
    "start": "1765000",
    "end": "1770960"
  },
  {
    "text": "concerned about all right so let's do a a quick demo and uh we'll do a code walk through",
    "start": "1770960",
    "end": "1778200"
  },
  {
    "start": "1772000",
    "end": "1772000"
  },
  {
    "text": "on uh basically I'm going to add uh the functionality to be able to read the",
    "start": "1778200",
    "end": "1784279"
  },
  {
    "text": "process ID of system server does everybody know what system server is okay so system server is basically",
    "start": "1784279",
    "end": "1792279"
  },
  {
    "text": "the Hub of all services in your Android platform okay any anytime you've you",
    "start": "1792279",
    "end": "1798480"
  },
  {
    "text": "call in one of the manager apis and you say I want to talk to the notification service okay and I want the notification",
    "start": "1798480",
    "end": "1805279"
  },
  {
    "text": "manager or I want to talk to the vibrator service or anything like that it all goes through one Central Hub okay",
    "start": "1805279",
    "end": "1810519"
  },
  {
    "text": "and that's called system server so this is a prettyy central piece of the Android system and it runs with some",
    "start": "1810519",
    "end": "1816840"
  },
  {
    "text": "pretty high level of permissions okay anytime you access anything at the how",
    "start": "1816840",
    "end": "1822919"
  },
  {
    "text": "layer Hardware device access so you know vibrator Access Audio access anything",
    "start": "1822919",
    "end": "1828000"
  },
  {
    "text": "like that this is all going to funnel through this process so knowing it's p ID probably not the safest thing in the",
    "start": "1828000",
    "end": "1833640"
  },
  {
    "text": "world although you couldn't really kill it unless you were you know had super user permissions yourself um but I wanted to show you",
    "start": "1833640",
    "end": "1840120"
  },
  {
    "text": "this because it how easy it is to add something like this in it doesn't violate CDD okay so it's easy to create",
    "start": "1840120",
    "end": "1847320"
  },
  {
    "text": "an SDK add-on but you want to be careful so we'll start with the code",
    "start": "1847320",
    "end": "1852399"
  },
  {
    "text": "first and then I'll walk through some of these build files okay",
    "start": "1852399",
    "end": "1857880"
  },
  {
    "text": "here in the context object within the framework code so I'm I'm doing this on",
    "start": "1857880",
    "end": "1864200"
  },
  {
    "text": "a 4.3 AOS P tree okay so under Frameworks",
    "start": "1864200",
    "end": "1870240"
  },
  {
    "text": "base core Java Android content you have",
    "start": "1870240",
    "end": "1875320"
  },
  {
    "text": "the context object okay everybody's used to passing context objects around",
    "start": "1875320",
    "end": "1880360"
  },
  {
    "text": "everywhere and you'll see that I add a new service name so that I can request it from system server okay and I can do",
    "start": "1880360",
    "end": "1886679"
  },
  {
    "text": "a service look up now you remember I can't alter this API I can't add",
    "start": "1886679",
    "end": "1892159"
  },
  {
    "text": "anything to it so I've got an annotation here that tells the build system to hide this okay so I'm going to know about it",
    "start": "1892159",
    "end": "1899960"
  },
  {
    "text": "in my platform code but no one else will it's all going to be completely",
    "start": "1899960",
    "end": "1905840"
  },
  {
    "text": "abstracted so let's jump down to",
    "start": "1907679",
    "end": "1913720"
  },
  {
    "text": "um I apologize one second I'm in the wrong",
    "start": "1916159",
    "end": "1922480"
  },
  {
    "text": "place jump into system server and when system server starts up",
    "start": "1922480",
    "end": "1928519"
  },
  {
    "text": "it's an interesting read if you've ever uh in the mood you can see it's pretty lengthy too",
    "start": "1928519",
    "end": "1936799"
  },
  {
    "text": "this is what's starting all those various components that are running on your system like I mentioned before the package manager you can see it right",
    "start": "1936799",
    "end": "1942679"
  },
  {
    "text": "there um the account manager content manager the light service which controls",
    "start": "1942679",
    "end": "1948559"
  },
  {
    "text": "all the LEDs the vibrator battery all these things are initialized at system",
    "start": "1948559",
    "end": "1954559"
  },
  {
    "text": "startup and this is a a pretty first class citizen in the system okay so what",
    "start": "1954559",
    "end": "1959880"
  },
  {
    "text": "I've done here is in my example I'm starting up our new",
    "start": "1959880",
    "end": "1965760"
  },
  {
    "text": "service assuming I haven't passed it",
    "start": "1965760",
    "end": "1970159"
  },
  {
    "text": "here and this special object that it's going to",
    "start": "1970880",
    "end": "1976039"
  },
  {
    "text": "create",
    "start": "1976039",
    "end": "1979039"
  },
  {
    "text": "bear with me I'm sorry my editor decided to stop working",
    "start": "1981200",
    "end": "1988240"
  },
  {
    "text": "on me at any rate it's going to create an instance of this",
    "start": "1988240",
    "end": "1996320"
  },
  {
    "text": "guy so I know platform service because I just instantiated it is running as part",
    "start": "1996760",
    "end": "2003320"
  },
  {
    "text": "of system servers so I had to find a very simple method which is going to",
    "start": "2003320",
    "end": "2008480"
  },
  {
    "text": "just say give me my process ID okay and then I Define a get uh system server",
    "start": "2008480",
    "end": "2015399"
  },
  {
    "text": "process ID method and you'll notice that I've extended a binder interface has",
    "start": "2015399",
    "end": "2020919"
  },
  {
    "text": "anybody worked with binders good so our binder is a special",
    "start": "2020919",
    "end": "2029279"
  },
  {
    "text": "interface that allows crossprocess communication okay any one of those services that we've been you know that",
    "start": "2029279",
    "end": "2034639"
  },
  {
    "text": "I've named off here the vibrator service the notification manager the package manager the alarm manager all those",
    "start": "2034639",
    "end": "2041159"
  },
  {
    "text": "things to talk to system server Android uses uh the binder interface it's it's",
    "start": "2041159",
    "end": "2046919"
  },
  {
    "text": "very Central to it it allows you to Define uh methods and uh special objects",
    "start": "2046919",
    "end": "2053200"
  },
  {
    "text": "that you can pass across processes and so I've defined a simple method that just returns an integer to uh give me",
    "start": "2053200",
    "end": "2060520"
  },
  {
    "text": "the system server process ID and you'll see here this is in aidl so part of the",
    "start": "2060520",
    "end": "2065760"
  },
  {
    "text": "build tools will build this into a Java proxy class basically so there's a stub",
    "start": "2065760",
    "end": "2072679"
  },
  {
    "text": "and there's a proxy and I won't go into all the details there because it's way beyond the scope of this class um but",
    "start": "2072679",
    "end": "2079440"
  },
  {
    "text": "you can see here that this Pro provides an implementation of that",
    "start": "2079440",
    "end": "2084839"
  },
  {
    "text": "API okay the last little piece that we did",
    "start": "2084839",
    "end": "2090358"
  },
  {
    "text": "here within framework space is in this big old make file it defines",
    "start": "2090359",
    "end": "2098119"
  },
  {
    "text": "all of the interfaces all the binder interfaces that are bundled as part of the framework and our new interface also",
    "start": "2098119",
    "end": "2107200"
  },
  {
    "text": "gets thrown in here and I lost my highlighting but I had to add it to the make",
    "start": "2107200",
    "end": "2112400"
  },
  {
    "text": "file okay and you'll also notice that here in the aidl I've added an annotation that says this also should be",
    "start": "2112400",
    "end": "2119520"
  },
  {
    "text": "hidden so my new special interface class is also not going to be exposed to the",
    "start": "2119520",
    "end": "2126000"
  },
  {
    "text": "public API so I'm still in compliance with CDD okay so all that's great I've added",
    "start": "2126000",
    "end": "2132960"
  },
  {
    "text": "something to the framework I've added a new system service that sits out there and when asked what its process ID is",
    "start": "2132960",
    "end": "2138359"
  },
  {
    "text": "it'll report it but how do you actually use that thing now you remember I mentioned that you're going to define a",
    "start": "2138359",
    "end": "2144800"
  },
  {
    "text": "device in the device tree and I have all the files loaded here",
    "start": "2144800",
    "end": "2150599"
  },
  {
    "text": "it's under a different tree um rather than my AOSP source code so let me pull it up there",
    "start": "2150599",
    "end": "2155800"
  },
  {
    "text": "instead so here under",
    "start": "2155800",
    "end": "2161560"
  },
  {
    "text": "device you'll notice I added a highq directory and what I've called Ballard I",
    "start": "2162400",
    "end": "2167440"
  },
  {
    "text": "just decided to name my platform Ballard",
    "start": "2167440",
    "end": "2172240"
  },
  {
    "text": "and we'll open all these various files that are in",
    "start": "2172640",
    "end": "2178160"
  },
  {
    "text": "here okay the first one being vendor setup this is just a a script that when",
    "start": "2178640",
    "end": "2183760"
  },
  {
    "text": "you include the environment setup script as part of your a AOSP build shell uh",
    "start": "2183760",
    "end": "2190400"
  },
  {
    "text": "this will get picked up automatically and it'll add something to the lunch menu okay and if I'm speaking a",
    "start": "2190400",
    "end": "2196839"
  },
  {
    "text": "completely foreign language right now I apologize it's pretty easy though it's",
    "start": "2196839",
    "end": "2205119"
  },
  {
    "text": "um I'll do it real quick here so if you [Music]",
    "start": "2206800",
    "end": "2213768"
  },
  {
    "text": "uh wrong",
    "start": "2215680",
    "end": "2220720"
  },
  {
    "text": "directory so if I include this environment setup you'll see that it walks through all the various devices",
    "start": "2220920",
    "end": "2226280"
  },
  {
    "text": "that are defined in my OSP Source tree and here's my Ballard device okay that",
    "start": "2226280",
    "end": "2232960"
  },
  {
    "text": "we were just looking at some of that code and if I run lunch which is basically how you pick what it is you're",
    "start": "2232960",
    "end": "2238319"
  },
  {
    "text": "going to build you'll see that number 11 here is now my ballor user debug",
    "start": "2238319",
    "end": "2244680"
  },
  {
    "text": "definition which corresponds to exactly what I had it here okay so when I pick number 11 it's basically going to chew",
    "start": "2244680",
    "end": "2252000"
  },
  {
    "text": "through a bunch of stuff and it's going to set up the environment to build that end platform okay I've already got one built",
    "start": "2252000",
    "end": "2259040"
  },
  {
    "text": "and I've got an emulator running with it we're going to get to here in just a second but at the end of this you'll see that it's flagged some build variant",
    "start": "2259040",
    "end": "2266160"
  },
  {
    "text": "information I'm building for an arm v7a um and uh you know it's a it's a",
    "start": "2266160",
    "end": "2273359"
  },
  {
    "text": "release build here now some of these other files we've",
    "start": "2273359",
    "end": "2278520"
  },
  {
    "text": "already talked about here in my make file you'll see that product packages I",
    "start": "2278520",
    "end": "2285200"
  },
  {
    "text": "said I'm going to need this Library that's going to get included in the end",
    "start": "2285200",
    "end": "2290599"
  },
  {
    "text": "build here in copy files I'm going to copy this end XML permissions file over",
    "start": "2290599",
    "end": "2298359"
  },
  {
    "text": "to the end file system location on the device so under system Etsy",
    "start": "2298359",
    "end": "2305520"
  },
  {
    "text": "permissions Define my SDK add-on name",
    "start": "2305520",
    "end": "2311920"
  },
  {
    "text": "the Manifest inii and Hardware inii that I want to to find for my emulator so",
    "start": "2311920",
    "end": "2318200"
  },
  {
    "text": "these are all the things that you're going to set up like we already talked about in the slides okay and I give it a",
    "start": "2318200",
    "end": "2323960"
  },
  {
    "text": "name down here my product name brand and a little description of what the model",
    "start": "2323960",
    "end": "2329760"
  },
  {
    "text": "is okay and go through our Manifest inii this is going to look exactly like what",
    "start": "2329760",
    "end": "2335960"
  },
  {
    "text": "you saw in the slide slides okay so these are all the end files for my device so that when I build it can build",
    "start": "2335960",
    "end": "2343040"
  },
  {
    "text": "both the platform as well as the SDK add-on for my platform okay so that's all great but",
    "start": "2343040",
    "end": "2351119"
  },
  {
    "text": "you know I keep talking about this Library where is this magical Beast so here under my device tree I've",
    "start": "2351119",
    "end": "2359200"
  },
  {
    "text": "added my own what I call Frameworks utility library and here's my permissions file",
    "start": "2359200",
    "end": "2365880"
  },
  {
    "text": "that got coped by the make file and the make file itself which I won't bother opening because it's just going to drill",
    "start": "2365880",
    "end": "2371920"
  },
  {
    "text": "into all subdirectories to build Java code and here you'll",
    "start": "2371920",
    "end": "2377680"
  },
  {
    "text": "see the Java code that is the library and end application user is going to",
    "start": "2377680",
    "end": "2383240"
  },
  {
    "text": "call okay so as an app",
    "start": "2383240",
    "end": "2388599"
  },
  {
    "text": "user and we'll walk through an app that's going to use this here in a moment it's going to get a an instance",
    "start": "2388599",
    "end": "2394640"
  },
  {
    "text": "of a platform info object object and then it's going to call get service and get service I'm sorry that's",
    "start": "2394640",
    "end": "2402280"
  },
  {
    "text": "a private method it's going to call get system server PID internally that's going to get a",
    "start": "2402280",
    "end": "2409240"
  },
  {
    "text": "special binder interface to our underlying service and then through that binder",
    "start": "2409240",
    "end": "2414839"
  },
  {
    "text": "interface that we defined it's going to call get system server pit this is going to cross that process boundary and it's",
    "start": "2414839",
    "end": "2421599"
  },
  {
    "text": "going to go over to system server and call that method on system server and return me the result okay now you'll",
    "start": "2421599",
    "end": "2428040"
  },
  {
    "text": "notice I also wrapped this in a try and catch okay if this capability is not",
    "start": "2428040",
    "end": "2434839"
  },
  {
    "text": "there I'll get a remote exception okay and I I won't be able to do it so here",
    "start": "2434839",
    "end": "2440440"
  },
  {
    "text": "when I do get service and I try to do a get service from the",
    "start": "2440440",
    "end": "2447119"
  },
  {
    "text": "service manager if this thing fails on me I will gracefully fail okay so I can",
    "start": "2447119",
    "end": "2453440"
  },
  {
    "text": "actually run this I'm going to run it on an emulator and you'll see It'll report back the the PID of system server if I",
    "start": "2453440",
    "end": "2459119"
  },
  {
    "text": "stick it on my Nexus or I stick it on my S3 it'll gracefully deal with it at the",
    "start": "2459119",
    "end": "2464599"
  },
  {
    "text": "application Level if I've done my app correctly any questions on the library",
    "start": "2464599",
    "end": "2470800"
  },
  {
    "text": "so far okay everybody's good so we'll pop over to eclipse and",
    "start": "2470800",
    "end": "2476599"
  },
  {
    "text": "let's look at our code it's pretty simple I'm not going to win any awards with the prettiness of the app it's",
    "start": "2476599",
    "end": "2482520"
  },
  {
    "text": "pretty ugly okay you'll see I have an activity sets a simple content View and basically",
    "start": "2482520",
    "end": "2491480"
  },
  {
    "text": "gets it set up and then once I'm started creates an instance of the platform info object we just looked at",
    "start": "2491480",
    "end": "2499319"
  },
  {
    "text": "and then asks for the uh system server P ID okay if it hits any kind of exception",
    "start": "2499319",
    "end": "2506040"
  },
  {
    "text": "it's going to throw up an error message and gracefully deal with the problem okay",
    "start": "2506040",
    "end": "2512560"
  },
  {
    "text": "um let's run this real",
    "start": "2512560",
    "end": "2518720"
  },
  {
    "text": "quick and we're going to run I have an emulator running in the background that is from that AOSP",
    "start": "2520319",
    "end": "2528519"
  },
  {
    "text": "build so when Eclipse gets around running it and you'll see it reports back the system server pit is 283 so if",
    "start": "2533119",
    "end": "2539520"
  },
  {
    "text": "I pop back over to my",
    "start": "2539520",
    "end": "2542520"
  },
  {
    "text": "terminal",
    "start": "2545160",
    "end": "2548160"
  },
  {
    "text": "and I shell into the emulator system server is going to pop",
    "start": "2552720",
    "end": "2558160"
  },
  {
    "text": "up and the process ID is 283 so we know that we actually did communicate with",
    "start": "2558160",
    "end": "2565640"
  },
  {
    "text": "that server and we did cross that process boundary and we're using our SDK",
    "start": "2565640",
    "end": "2571480"
  },
  {
    "text": "add-on okay so the only other difference here is in my application",
    "start": "2571480",
    "end": "2578160"
  },
  {
    "text": "sorry it's not in the Manifest it's in Project properties when I set it up I told it that my target was my high Q's",
    "start": "2578319",
    "end": "2587839"
  },
  {
    "text": "SDK add-on that I had added so when I came I prior to the class and I apologize I probably should have done",
    "start": "2587839",
    "end": "2593960"
  },
  {
    "text": "this as part of the class within the SDK",
    "start": "2593960",
    "end": "2599480"
  },
  {
    "text": "manager I added a URL for basically this add-on that I created",
    "start": "2599480",
    "end": "2606480"
  },
  {
    "text": "that's hosted on our website and let me sort by repository",
    "start": "2606480",
    "end": "2612400"
  },
  {
    "text": "because it again will be easier to find and here it is my high Q's platform",
    "start": "2612400",
    "end": "2617839"
  },
  {
    "text": "utility SDK so it's part of my add-on and therefore when I um when I created",
    "start": "2617839",
    "end": "2623880"
  },
  {
    "text": "this Eclipse project I could tell it exactly what the target was for the",
    "start": "2623880",
    "end": "2631040"
  },
  {
    "text": "project and so right here I could select that and it adds that to my project properties and it tells exactly what to",
    "start": "2631040",
    "end": "2636599"
  },
  {
    "text": "build against okay you could uh for example if you wanted to Target multiple",
    "start": "2636599",
    "end": "2642559"
  },
  {
    "text": "devices as long as you write your app code to where if a library load fails or a jar file is not present you could do",
    "start": "2642559",
    "end": "2649359"
  },
  {
    "text": "that within your app and rather then Target like this if you have access to",
    "start": "2649359",
    "end": "2654960"
  },
  {
    "text": "their SDK jar files you could just add those to your build path and still be able to use those end applications or",
    "start": "2654960",
    "end": "2661440"
  },
  {
    "text": "those end features I should say all right any questions",
    "start": "2661440",
    "end": "2667960"
  },
  {
    "text": "all right we'll hop back over here so one other thing I want to talk",
    "start": "2667960",
    "end": "2675119"
  },
  {
    "text": "about is SDK add-ons which are a little special and they're called extras okay these are third-party components that",
    "start": "2675119",
    "end": "2681559"
  },
  {
    "text": "are not necessarily tied to a platform okay a good example is the Android support Library okay anybody use the",
    "start": "2681559",
    "end": "2688040"
  },
  {
    "text": "Android support Library all right lots of people use that um gives you access to features that are in the newer API",
    "start": "2688040",
    "end": "2695240"
  },
  {
    "text": "levels but you can still use it on older platforms so you can now write your application and deploy it on uh an older",
    "start": "2695240",
    "end": "2702760"
  },
  {
    "text": "platform but still use some of the newer functionality a lot of people use it for fragments okay um because it'll go all",
    "start": "2702760",
    "end": "2709359"
  },
  {
    "text": "way way back those are all extras okay they're they don't have to be integrated with the platform it's a special Library",
    "start": "2709359",
    "end": "2715280"
  },
  {
    "start": "2712000",
    "end": "2712000"
  },
  {
    "text": "you're going to link against and you can make that available to end users to take advantage of Google Play services is",
    "start": "2715280",
    "end": "2722160"
  },
  {
    "text": "kind of another one okay you can specify the architecture NOS if you actually",
    "start": "2722160",
    "end": "2728480"
  },
  {
    "text": "need to as part of an extra that you're going to create so what can an extra contain okay",
    "start": "2728480",
    "end": "2734400"
  },
  {
    "start": "2731000",
    "end": "2731000"
  },
  {
    "text": "remember this is a little different than a platform SDK add-on okay you're typically going to include libraries",
    "start": "2734400",
    "end": "2740680"
  },
  {
    "text": "okay you might include some sources okay you might give people sample Source you might give them other sources you're",
    "start": "2740680",
    "end": "2746599"
  },
  {
    "text": "basically going to tell it I want to package all this stuff in here okay uh the Android support library is another",
    "start": "2746599",
    "end": "2752480"
  },
  {
    "text": "good example of this there's all kinds of sample code that gets bundled in there so when you download and install",
    "start": "2752480",
    "end": "2757760"
  },
  {
    "text": "that extra as part of the SDK manager you have access to that documentation is a big one right",
    "start": "2757760",
    "end": "2764359"
  },
  {
    "text": "everybody loves their documentation big tip use Java do okay",
    "start": "2764359",
    "end": "2771559"
  },
  {
    "text": "comment your code do it right then and there it does all the heavy lifting for you okay and when you if you were to",
    "start": "2771559",
    "end": "2777800"
  },
  {
    "text": "create an extra if anybody's used any of the thirdparty add-ons for crash",
    "start": "2777800",
    "end": "2782839"
  },
  {
    "text": "analysis or ad networks and things like that using these types of SDK add-ons",
    "start": "2782839",
    "end": "2788359"
  },
  {
    "text": "okay this is one way that you could do this and make it available uh samples getting back to the",
    "start": "2788359",
    "end": "2794079"
  },
  {
    "start": "2793000",
    "end": "2793000"
  },
  {
    "text": "code so packaging is going to look very similar to the platform SDK because it's",
    "start": "2794079",
    "end": "2799640"
  },
  {
    "text": "in that same kind of XML format the big difference is here in uh the XML for",
    "start": "2799640",
    "end": "2805960"
  },
  {
    "text": "your extra you're going to Define it as an extra rather than as an add-on okay",
    "start": "2805960",
    "end": "2811720"
  },
  {
    "text": "you're also going to provide a SDK path tag which is going to tell the SDK",
    "start": "2811720",
    "end": "2820119"
  },
  {
    "text": "manager where to install it on your local file system does that make sense",
    "start": "2820119",
    "end": "2825800"
  },
  {
    "text": "to everybody I'll give you a good example of that here in just a second because we're going to talk about where they're stored it's still under the SDK",
    "start": "2825800",
    "end": "2832280"
  },
  {
    "start": "2827000",
    "end": "2827000"
  },
  {
    "text": "tree but instead of under the add-on directory it's going to be under an extras directory and it's hierarchical",
    "start": "2832280",
    "end": "2838520"
  },
  {
    "text": "Again by the vendor and it uses that path tag from the XML to tell it where",
    "start": "2838520",
    "end": "2844280"
  },
  {
    "text": "to stick it under the vendor tree okay so way down here you can see I've",
    "start": "2844280",
    "end": "2850559"
  },
  {
    "text": "got utilities under high cues because back here in my",
    "start": "2850559",
    "end": "2857200"
  },
  {
    "text": "XML",
    "start": "2857200",
    "end": "2860200"
  },
  {
    "text": "oops I have my path directive and I told it to stick it under utilities and it's",
    "start": "2866800",
    "end": "2872680"
  },
  {
    "text": "going to put that under my vendor ID directory so just like the uh the SDK",
    "start": "2872680",
    "end": "2879200"
  },
  {
    "text": "add-on where they're here and then it's hierarchical by vendor it's the same thing under extras so under extras we've",
    "start": "2879200",
    "end": "2884839"
  },
  {
    "text": "got a high cues directory and then utilities and then whatever we decided to bundle as part of",
    "start": "2884839",
    "end": "2890359"
  },
  {
    "start": "2890000",
    "end": "2890000"
  },
  {
    "text": "it so now how do I use it the short answer is it's going to depend most of the time these things are libraries",
    "start": "2890359",
    "end": "2895880"
  },
  {
    "text": "they're static libraries that people can drop into their uh their pack their um",
    "start": "2895880",
    "end": "2901559"
  },
  {
    "text": "their Eclipse build system so you might create a lives directory under your project and copy the jar file into the",
    "start": "2901559",
    "end": "2908359"
  },
  {
    "text": "lives directory unfortunately uh there's not a way that you can have an extra that's just a",
    "start": "2908359",
    "end": "2914920"
  },
  {
    "text": "eclipse package that you can just pull into and you can say this is a library",
    "start": "2914920",
    "end": "2919960"
  },
  {
    "text": "package I want to link against it okay A lot of times they can be",
    "start": "2919960",
    "end": "2926079"
  },
  {
    "text": "demonstrated or they can be used in place so the Google web driver or the Intel hackim installer is a good example",
    "start": "2926079",
    "end": "2932359"
  },
  {
    "text": "okay those are extras that you check the box in the SDK man manager it pulls it down and now it's effectively downloaded",
    "start": "2932359",
    "end": "2938480"
  },
  {
    "text": "an installer and so if you go into that extras directory and find let's say the hackim installer you could execute that",
    "start": "2938480",
    "end": "2945319"
  },
  {
    "text": "and it'll do whatever it needs to do for your your host machine okay like I said there's no",
    "start": "2945319",
    "end": "2951640"
  },
  {
    "text": "built-in support for this just giving you an eclipse Android Library project that you could add to your workspace and",
    "start": "2951640",
    "end": "2958000"
  },
  {
    "text": "then just point to it okay any",
    "start": "2958000",
    "end": "2963680"
  },
  {
    "start": "2960000",
    "end": "2960000"
  },
  {
    "text": "questions we're a little bit on the early side yeah I guess as far as the",
    "start": "2964520",
    "end": "2973319"
  },
  {
    "text": "distribution if you put it in the Play Store and um the spk plugin is not on",
    "start": "2973319",
    "end": "2981160"
  },
  {
    "text": "the device that's inst application will just fail as as you",
    "start": "2981160",
    "end": "2988759"
  },
  {
    "text": "it yeah if it can't find the library then you'll have a load failure uh the first time you try to use it and is",
    "start": "2989280",
    "end": "2996200"
  },
  {
    "text": "there any way to actually distribute these other than",
    "start": "2996200",
    "end": "3001400"
  },
  {
    "text": "shipping the platform SDK add-ons no it has to be cooked into the end",
    "start": "3001400",
    "end": "3007040"
  },
  {
    "text": "platform okay the difference is I mean extras are a different thing right so um",
    "start": "3007040",
    "end": "3013160"
  },
  {
    "text": "I gave an example here of an extra and there's actually all kinds of URLs here for reference",
    "start": "3013160",
    "end": "3020200"
  },
  {
    "start": "3019000",
    "end": "3019000"
  },
  {
    "text": "um the I've got git repository GitHub repositories out here if you guys want",
    "start": "3020200",
    "end": "3025240"
  },
  {
    "text": "to look at samples um and a whole bunch of other stuff the presentation's available at this URL um if you pulled",
    "start": "3025240",
    "end": "3033400"
  },
  {
    "text": "if you point your SDK manager at this URL the couple of add-ons that I talked",
    "start": "3033400",
    "end": "3038480"
  },
  {
    "text": "about in this talk are there you could actually pull them down and look at them one of them is an extra okay and it's a",
    "start": "3038480",
    "end": "3044240"
  },
  {
    "text": "simple one it's it's put out there binary only there's no source code or anything um so as long as it's a",
    "start": "3044240",
    "end": "3050000"
  },
  {
    "text": "standalone Library you absolutely can put that out there and anybody could grab it okay and anybody could use it",
    "start": "3050000",
    "end": "3055920"
  },
  {
    "text": "but if it's something that takes advantage of platform specific features value added Hardware components or",
    "start": "3055920",
    "end": "3062200"
  },
  {
    "text": "anything like that no that functionality has to be cooked into the end platform for someone to take advantage of it or",
    "start": "3062200",
    "end": "3071000"
  },
  {
    "text": "rooted any other questions you can tell it's Friday you",
    "start": "3073480",
    "end": "3080319"
  },
  {
    "text": "can tell it's the last session of the day all right February could leave",
    "start": "3080319",
    "end": "3086160"
  },
  {
    "text": "feedback I would appreciate it either via the app or grab a form and drop it off and if nobody has any questions",
    "start": "3086160",
    "end": "3092440"
  },
  {
    "text": "that's all I've got thank you thank you for your [Applause]",
    "start": "3092440",
    "end": "3101359"
  },
  {
    "text": "time",
    "start": "3104880",
    "end": "3107880"
  }
]