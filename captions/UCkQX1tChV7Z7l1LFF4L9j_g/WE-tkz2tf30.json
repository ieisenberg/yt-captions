[
  {
    "start": "0",
    "end": "120000"
  },
  {
    "text": "[Music]",
    "start": "680",
    "end": "8549"
  },
  {
    "text": "hello everyone how are you doing how was the start of qcon being so far all right it's a great lineup this year so many",
    "start": "15120",
    "end": "21520"
  },
  {
    "text": "great talks it's really great to be here as well so thank you so much for your time and if you don't mind let's get straight on with it because we've got so",
    "start": "21520",
    "end": "27599"
  },
  {
    "text": "much to do in the next 20 minutes or so we've got a whole website and set of apps which we need to",
    "start": "27599",
    "end": "34239"
  },
  {
    "text": "design a system for we're talking bbc online where at any one moment millions of users can be using the broad range of",
    "start": "34239",
    "end": "40719"
  },
  {
    "text": "features it's got this is a interesting challenge we've got in the next 20 minutes let's see what we can do to make",
    "start": "40719",
    "end": "46320"
  },
  {
    "text": "it happen so what's bbc online well the bit you might know the best is bbc news used",
    "start": "46320",
    "end": "52079"
  },
  {
    "text": "massively around the world according to feedspot it's the number one news website in the world",
    "start": "52079",
    "end": "57280"
  },
  {
    "text": "to be honest i've seen some other sites that claim yahoo is the number one news site in the world people still use your who",
    "start": "57280",
    "end": "63280"
  },
  {
    "text": "well maybe they do let's let's look for our bbc news right which is huge huge traffic as i say",
    "start": "63280",
    "end": "70080"
  },
  {
    "text": "users in the millions can turn up at a breaking news event around the world and obviously in the uk especially",
    "start": "70080",
    "end": "76640"
  },
  {
    "text": "it's available in about 40 different languages there's just a few of them so it's a pretty massive site but that's just the start for people in the uk",
    "start": "76640",
    "end": "83759"
  },
  {
    "text": "there's bbc iplayer which is maybe like netflix but so in some ways even better loads of live content huge product",
    "start": "83759",
    "end": "90320"
  },
  {
    "text": "castle also content catalog and millions of plays on that every day and this is just the start there's radio",
    "start": "90320",
    "end": "97280"
  },
  {
    "text": "podcasts live events sports goals weather forecasts food recipes things to you know make you think and to explore",
    "start": "97280",
    "end": "103680"
  },
  {
    "text": "and create stuff for children to grow and revise their exams and so much more there's about 15 apps as well as tv",
    "start": "103680",
    "end": "110159"
  },
  {
    "text": "applications carplay integrations and voice applications and all sorts more it is this really broad range that we need",
    "start": "110159",
    "end": "116719"
  },
  {
    "text": "our architecture to support so our requirements basically boil down to three things we need to handle the",
    "start": "116719",
    "end": "123520"
  },
  {
    "start": "120000",
    "end": "120000"
  },
  {
    "text": "scale of millions of users turning up that not just high traffic but highly variable traffic as well where a",
    "start": "123520",
    "end": "129039"
  },
  {
    "text": "breaking news alert can mean large numbers turn up out of nowhere then we've got that breadth of content",
    "start": "129039",
    "end": "134560"
  },
  {
    "text": "that we've just seen we need to handle all those different content types we're going to have multiple teams building",
    "start": "134560",
    "end": "139680"
  },
  {
    "text": "these sites and apps lots of stakeholders lots of content makers lots of feature requests how do we scale them",
    "start": "139680",
    "end": "145040"
  },
  {
    "text": "that way as well and finally this is a public service and not for profit the bbc use spends public",
    "start": "145040",
    "end": "152480"
  },
  {
    "text": "money so we must spend it super wisely we must watch out for our costs now there are obvious ones like the cloud",
    "start": "152480",
    "end": "158000"
  },
  {
    "text": "costs let's face it the number one cost that most of our organizations and businesses",
    "start": "158000",
    "end": "163200"
  },
  {
    "text": "have is people teams engineers so how are we designing something so that we can move quickly develop as fast as we",
    "start": "163200",
    "end": "169760"
  },
  {
    "text": "can and have a low operating cost as well that's really key there's our requirements thank you think",
    "start": "169760",
    "end": "175760"
  },
  {
    "text": "we can design an architecture for that i mean obviously that's not all the requirements there's all the features we",
    "start": "175760",
    "end": "181360"
  },
  {
    "text": "need right and all the content and we need to be personalized like all modern services what else",
    "start": "181360",
    "end": "186560"
  },
  {
    "text": "non-functionals right security is a given rights and reliability let's focus on that and that one's key right this is",
    "start": "186560",
    "end": "193360"
  },
  {
    "text": "a service that people will rely on so high up time is vital so we're quite a",
    "start": "193360",
    "end": "198800"
  },
  {
    "text": "lot to look up right but at the highest of levels let's have a go at this architecture and we can do a blank sheet",
    "start": "198800",
    "end": "203920"
  },
  {
    "start": "201000",
    "end": "201000"
  },
  {
    "text": "of paper here because the bbc did switch off its data centers last year moved to the cloud so we can do a proper start",
    "start": "203920",
    "end": "209280"
  },
  {
    "text": "again cloud native option brilliant huh we have users good place to start but we",
    "start": "209280",
    "end": "215599"
  },
  {
    "text": "have millions of users we said that so maybe we could draw it like this um we have websites and apps that they are",
    "start": "215599",
    "end": "221200"
  },
  {
    "text": "primarily consuming as we said we have an awful lot of them as well right so uh scale there as well that's one side of",
    "start": "221200",
    "end": "226879"
  },
  {
    "text": "the diagram on the other side we should show where the contents coming from there are a few places but we can",
    "start": "226879",
    "end": "231920"
  },
  {
    "text": "probably say the main one which is people bbc uh creative people news journalists tv",
    "start": "231920",
    "end": "239200"
  },
  {
    "text": "producers those kind of people there are thousands of them doing all kinds of different things so we need to give them",
    "start": "239200",
    "end": "245120"
  },
  {
    "text": "some really good tools content management systems to create manage all that can't just be one tool because",
    "start": "245120",
    "end": "250239"
  },
  {
    "text": "there's so much variety and we need them to be as efficient as possible as well don't we make as much great and rich",
    "start": "250239",
    "end": "255840"
  },
  {
    "text": "content as we can so we're going to need to give them those great tools and uh well if you don't mind let's let's get rid of that",
    "start": "255840",
    "end": "261680"
  },
  {
    "text": "um you know that that depth bit because we know there's a lot going on there right we have those core bits so what",
    "start": "261680",
    "end": "267600"
  },
  {
    "text": "are we going to add to this cloud architecture to make it work well media maybe there's a place to start",
    "start": "267600",
    "end": "273759"
  },
  {
    "text": "right our video and audio and images and how do we handle that and if you don't mind we won't go too much into detail in",
    "start": "273759",
    "end": "278880"
  },
  {
    "text": "that in this talk simply because it's worth the talk or many talks on its own right there's a lot of complexity",
    "start": "278880",
    "end": "284560"
  },
  {
    "text": "there it basically boils down to handling that media transcoding it um",
    "start": "284560",
    "end": "290080"
  },
  {
    "text": "preparing it storing it and then packaging and delivering it to the right place at the right time so the",
    "start": "290080",
    "end": "296160"
  },
  {
    "text": "highest of levels let's draw it like that let's focus perhaps a bit more on the other type of content the metadata",
    "start": "296160",
    "end": "302479"
  },
  {
    "text": "describing it the written content like articles the food recipes or the data rich content like sports scores or",
    "start": "302479",
    "end": "308800"
  },
  {
    "text": "weather forecasts there's loads of that type isn't it so i'd suggest the first thing we need to do when we get content like that is to process it understand it",
    "start": "308800",
    "end": "316160"
  },
  {
    "text": "right what is the content who's it for what does it reference if we can understand the content and get it right",
    "start": "316160",
    "end": "321520"
  },
  {
    "text": "now at this point to which the contents made that will help us when we come to make our user facing experiences later",
    "start": "321520",
    "end": "328320"
  },
  {
    "text": "they need to store it of course is a content store what's that it's not gonna be one thing is it we've",
    "start": "328320",
    "end": "334240"
  },
  {
    "text": "already said there's so much breadth right this is gonna be a range of different stores because there's different types of content we might have",
    "start": "334240",
    "end": "339759"
  },
  {
    "text": "key value stores for example they're nice and simple aren't they they work great but sometimes things are a bit more complex than that",
    "start": "339759",
    "end": "346080"
  },
  {
    "text": "and i'm a big believer in using the right tool for the job right so a relational database might be good if your content is if your data is",
    "start": "346080",
    "end": "352240"
  },
  {
    "text": "relational we probably want to use things like search engines and recommendation engines as well right because how people",
    "start": "352240",
    "end": "358000"
  },
  {
    "text": "discover this content is really key so we'll probably do many things in the storing of our content",
    "start": "358000",
    "end": "364160"
  },
  {
    "text": "right let's look at the other side right we said there are websites and apps and to make websites you need to render some html server side vending is essential",
    "start": "364160",
    "end": "370960"
  },
  {
    "text": "for good performing websites for apps of course they don't need html but they do need a great api from which to get the",
    "start": "370960",
    "end": "377280"
  },
  {
    "text": "right content so we need one of them as well and of course both of those things we'll need to get the content from that",
    "start": "377280",
    "end": "382319"
  },
  {
    "text": "contents that we just drew but if you don't mind i'm going to add one more box in the middle called business logic",
    "start": "382319",
    "end": "388000"
  },
  {
    "text": "yeah don't like that phrase business logic but do you know what i mean right the the actual logic of working out what to",
    "start": "388000",
    "end": "394080"
  },
  {
    "text": "do so who is the user who's requesting something are they signed in where are they in the world what do we know about them",
    "start": "394080",
    "end": "399919"
  },
  {
    "text": "and then the content what content do we have what's uh what's live now what events are on now what programs are on",
    "start": "399919",
    "end": "405039"
  },
  {
    "text": "now what's happening what's trending all of these things can come together to help work out the right thing to share",
    "start": "405039",
    "end": "410400"
  },
  {
    "text": "the user and the business logic just that bit so one box there so we can share that across our sites and apps",
    "start": "410400",
    "end": "416560"
  },
  {
    "text": "make sense let's draw one more box in here see that one now on the right hand side traffic",
    "start": "416560",
    "end": "422160"
  },
  {
    "text": "management this is a combination of cdns and routing layers proxy layers those",
    "start": "422160",
    "end": "427919"
  },
  {
    "text": "kind of things but if we've got a very high set of um users making thousands of requests a second",
    "start": "427919",
    "end": "433840"
  },
  {
    "text": "we've got a broad range of services we're going to get really good at handling those requests right making sure they're valid making sure they're",
    "start": "433840",
    "end": "439759"
  },
  {
    "text": "successful so for example the user's properly signed in this is the request of valid one or you do a dos attack or",
    "start": "439759",
    "end": "445120"
  },
  {
    "text": "something like that it's a really key thing we need to do with that traffic management layer together right",
    "start": "445120",
    "end": "450720"
  },
  {
    "text": "okay looking good isn't it though maybe a bit one way isn't it constantly going from left to right which is broadly",
    "start": "450720",
    "end": "456240"
  },
  {
    "text": "where most stuff happens but what about those users themselves maybe they can interact right they can certainly sign in and comment and maybe they can even",
    "start": "456240",
    "end": "462880"
  },
  {
    "text": "make their own content so let's have the concept of a user store again probably a bit generic right the place where users",
    "start": "462880",
    "end": "469599"
  },
  {
    "text": "can um track what they're doing and once we have that set of content we can start to offer amazing things such",
    "start": "469599",
    "end": "475360"
  },
  {
    "text": "as that recommendations engine above it let's draw an arrow into that and analytics right we can start reporting back to our content makers overall how",
    "start": "475360",
    "end": "483199"
  },
  {
    "text": "many people are accessing their content so they can they can make sure they're making the right thing",
    "start": "483199",
    "end": "488960"
  },
  {
    "text": "hurrah we have an architecture we're done in uh well eight minutes",
    "start": "488960",
    "end": "494080"
  },
  {
    "text": "hmm and have we really hit those requirements we had uh we had we had scale didn't we",
    "start": "494080",
    "end": "499280"
  },
  {
    "text": "challenge the scale and breadth of content and good value have we hit them well maybe we're on the way right we",
    "start": "499280",
    "end": "505280"
  },
  {
    "text": "probably need a few more details to really get them sorted let's have a look at a couple let's start with caching hopefully not too",
    "start": "505280",
    "end": "511599"
  },
  {
    "start": "510000",
    "end": "510000"
  },
  {
    "text": "controversial points fairly standard way of helping with this stuff right and to me there are four big advantages of",
    "start": "511599",
    "end": "516719"
  },
  {
    "text": "caching obviously scale is one of the right caches can respond to normally far more",
    "start": "516719",
    "end": "522159"
  },
  {
    "text": "responses than if you're just computing them every time and that's what we need right that's important it does it by",
    "start": "522159",
    "end": "527200"
  },
  {
    "text": "being phenomenally quick of course but let's call out speed has another advantage because we know performance is",
    "start": "527200",
    "end": "532560"
  },
  {
    "text": "a really key non-functional for services like this right we know that for every second a page",
    "start": "532560",
    "end": "538160"
  },
  {
    "text": "takes the load 10 of people hit back and go and do something else so a page taking two seconds which is not that",
    "start": "538160",
    "end": "544000"
  },
  {
    "text": "unusual ever 3g for example that's 20 of people gone on every click",
    "start": "544000",
    "end": "549279"
  },
  {
    "text": "speed is perhaps the number one thing you can do to increase your the amount of traffic you have so that will have",
    "start": "549279",
    "end": "554720"
  },
  {
    "text": "that advantage right brilliant cost is another one we said that's important to us and caches on the whole",
    "start": "554720",
    "end": "560560"
  },
  {
    "text": "are normally cheaper than computing things every time and there's a fourth benefit we don't always remember when thinking of caching but",
    "start": "560560",
    "end": "567040"
  },
  {
    "text": "they offer a brilliant resilience option as well should for example your database be struggling under load cache may have",
    "start": "567040",
    "end": "573680"
  },
  {
    "text": "something already in it from which it can respond that's serving last known good behavior also being stale and error",
    "start": "573680",
    "end": "579040"
  },
  {
    "text": "as it's sometimes called can make the difference to a wobbly system becoming a good one",
    "start": "579040",
    "end": "584240"
  },
  {
    "text": "so we'll take all those benefits right caching sounds ideal where should we put it on this diagram",
    "start": "584240",
    "end": "590959"
  },
  {
    "text": "well i think that traffic management there is the really obvious one isn't it right we mentioned cdns before front doors people come in two people request",
    "start": "590959",
    "end": "597519"
  },
  {
    "text": "the same thing and it's not personalized why compute that twice right the second person can have the copy from the first",
    "start": "597519",
    "end": "603120"
  },
  {
    "text": "so let's definitely use a cache there in terms of technology yeah maybe cdn can play a key part but i don't think",
    "start": "603120",
    "end": "608480"
  },
  {
    "text": "it's just that because we said the traffic management layer does a lot of complexity right around routing and understanding the user so we're going to",
    "start": "608480",
    "end": "614959"
  },
  {
    "text": "need boxes with all that logic in as well we're going to want some good cash on those boxes right as well",
    "start": "614959",
    "end": "621760"
  },
  {
    "text": "okay cash there where else well we mentioned a moment ago don't we the content stores databases they can",
    "start": "621760",
    "end": "628399"
  },
  {
    "text": "sometimes struggle and load a thundering herd of requests they might not be able to handle that well so a cash in front",
    "start": "628399",
    "end": "633839"
  },
  {
    "text": "of the content store seems to make complete sense right which technology should we use there are",
    "start": "633839",
    "end": "639200"
  },
  {
    "text": "loads of options here but let me suggest redis we've used that for years the bbc and it's phenomenally fast super",
    "start": "639200",
    "end": "646160"
  },
  {
    "text": "flexible too so it gets my vote every time let's mark the technology for that being redis if you don't mind",
    "start": "646160",
    "end": "652560"
  },
  {
    "text": "and maybe one more place i think we could put a cache i'm going to suggest here between that business logic and the",
    "start": "652560",
    "end": "657760"
  },
  {
    "text": "web and app api rendering just because i think there's a lot of overlap there right a lot of different pages and apps",
    "start": "657760",
    "end": "663920"
  },
  {
    "text": "are going to be sharing the same information about the content and about who the user is so it seems an opportunity there to be efficient too",
    "start": "663920",
    "end": "671440"
  },
  {
    "text": "as well as the kind of efficiency speed arguments as we said before there's a resilient argument as well so let's say that that business",
    "start": "671440",
    "end": "677920"
  },
  {
    "text": "logic layer whatever it is is having a bad day right and being a bit wobbly the cash in front of it can have a go at",
    "start": "677920",
    "end": "683200"
  },
  {
    "text": "serving the last known good assuming there is one of course assuming it's not personalized and that can keep us on the air keep us going until until whatever",
    "start": "683200",
    "end": "690320"
  },
  {
    "text": "times we can go and fix that issue all good there is one catch with caches of course",
    "start": "690320",
    "end": "696959"
  },
  {
    "text": "is they can slow things down because they have a habit of slowing of serving old things right so we need an event to",
    "start": "696959",
    "end": "702640"
  },
  {
    "text": "drive an element of this as well see on the left-hand side right we've got content being pushed through the process into the content store but if we",
    "start": "702640",
    "end": "708800"
  },
  {
    "text": "can also push it through into those caches or the very least mark those caches as needing to be",
    "start": "708800",
    "end": "714639"
  },
  {
    "text": "um to be stale and need to be revalidated then uh we can correct that issue right so particularly",
    "start": "714639",
    "end": "721040"
  },
  {
    "text": "if anything's you know fast changing such as a breaking news event or a sports score we can definitely get those",
    "start": "721040",
    "end": "726399"
  },
  {
    "text": "things updated so we're not sharing all content all good caching no brainer right",
    "start": "726399",
    "end": "731680"
  },
  {
    "text": "definitely needs to be part of an architecture like this one that's maybe a little bit more controversial is the use of serverless",
    "start": "731680",
    "end": "738160"
  },
  {
    "start": "733000",
    "end": "733000"
  },
  {
    "text": "so there is of course we you know in the cloud we've got the virtual machines we've got the containers and we've got",
    "start": "738160",
    "end": "743600"
  },
  {
    "text": "in a line right from the first being when you have the most controls the serverless we perhaps have the least control but in return you have the least",
    "start": "743600",
    "end": "749839"
  },
  {
    "text": "to do so it's that balance right i mean nobody wants to be looking after servers worrying about operating system patches",
    "start": "749839",
    "end": "755920"
  },
  {
    "text": "or the amount of disk space or worrying about auto scaling right you just want your code to run or your",
    "start": "755920",
    "end": "762160"
  },
  {
    "text": "content to be stored whatever it is you're doing service catch is that compromise are we willing",
    "start": "762160",
    "end": "767839"
  },
  {
    "text": "to accept the compromises of serverless which i think basically boil down to three things it can be slower it can be",
    "start": "767839",
    "end": "773760"
  },
  {
    "text": "restrictive it can be expensive as always with technology right there's",
    "start": "773760",
    "end": "780000"
  },
  {
    "text": "never offered a right or wrong answer just pros and cons of different ones how do we choose this time let's delve a little",
    "start": "780000",
    "end": "786800"
  },
  {
    "text": "bit into these right slow slowness well we've got a real example here um do",
    "start": "786800",
    "end": "792240"
  },
  {
    "text": "you remember the html box we had in the diagram the web rendering service for real",
    "start": "792240",
    "end": "798320"
  },
  {
    "text": "much of bbc online is rendered using aws lambda we have thousands of web page renders a second and this is the",
    "start": "798320",
    "end": "804240"
  },
  {
    "text": "performance we see with them the p50 the median that green line there about 140 milliseconds to respond",
    "start": "804240",
    "end": "810880"
  },
  {
    "text": "which includes back-end calls to fix the data right so i think that's pretty darn good for an average",
    "start": "810880",
    "end": "816240"
  },
  {
    "text": "the p99 the top one percent that's that purple i know but four hundred and something milliseconds so significantly",
    "start": "816240",
    "end": "822160"
  },
  {
    "text": "worse but it's only one percent and again it might include some slow data calls under the hood so uh probably all right that",
    "start": "822160",
    "end": "828639"
  },
  {
    "text": "one the issue isn't those two numbers it's the p100 it's the very slow final few",
    "start": "828639",
    "end": "834480"
  },
  {
    "text": "requests that can't even fit on this chart they even fit on the slide they are multiple seconds long this is the cold",
    "start": "834480",
    "end": "841839"
  },
  {
    "text": "start problem that we get with cloud functions where your code needs to be copied onto a new server under the hood and",
    "start": "841839",
    "end": "848000"
  },
  {
    "text": "instantiated for the first time under the hood serverless is just servers huh",
    "start": "848000",
    "end": "854560"
  },
  {
    "text": "this is a genuine issue and uh rather it wasn't there right and if you were doing something truly performance critical you",
    "start": "854560",
    "end": "860160"
  },
  {
    "text": "should worry about it but it happens so rarely and we can mitigate it against it we can just try again after half a",
    "start": "860160",
    "end": "866000"
  },
  {
    "text": "second and chances are it's going to work then we can probably count with that one the restricted point number two on that",
    "start": "866000",
    "end": "872480"
  },
  {
    "text": "slide yep there are some restrictions right you have less choice of compute and storage and those things but i think you can live with that right",
    "start": "872480",
    "end": "878320"
  },
  {
    "text": "specifically for what we're doing here and handling data and building web pages and so on that kind of single uh request",
    "start": "878320",
    "end": "884240"
  },
  {
    "text": "at once and um uh you know a stateless",
    "start": "884240",
    "end": "889279"
  },
  {
    "text": "model and basic standard cpu you don't need any gpu or anything like that i think we can probably work quite well",
    "start": "889279",
    "end": "894639"
  },
  {
    "text": "but that expensive point that's a bit worrying isn't it now one of the challenges with being",
    "start": "894639",
    "end": "900560"
  },
  {
    "start": "900000",
    "end": "900000"
  },
  {
    "text": "expensive is you have this uh function training problem where you you can end up being idle you know this one this is",
    "start": "900560",
    "end": "906880"
  },
  {
    "text": "where the way that all three of the cloud providers handle their cloud functions or lambda as amazon",
    "start": "906880",
    "end": "912240"
  },
  {
    "text": "calls it how it is your base you pay based on time the function is running and if your function is not doing",
    "start": "912240",
    "end": "918160"
  },
  {
    "text": "anything for some of that time you're effectively wasting your money so in this case let's for example say",
    "start": "918160",
    "end": "923680"
  },
  {
    "text": "that this storage on the right takes 300 milliseconds to respond which something like s3 is not unusual",
    "start": "923680",
    "end": "929519"
  },
  {
    "text": "say this cloud function also needs 300 milliseconds to do its processing on the response in total it's going to take 600",
    "start": "929519",
    "end": "935120"
  },
  {
    "text": "milliseconds right but you're only doing 300 milliseconds of compete the other 300 you'll you'll pay for that function or that lambda to",
    "start": "935120",
    "end": "942480"
  },
  {
    "text": "do nothing just to wait for underlying storage and if you've changed your functions like in this one then you",
    "start": "942480",
    "end": "948560"
  },
  {
    "text": "might have a point where that one on the left for example mainly 300 milliseconds of compute itself but it's ultimately paying for 1200 whilst because it's",
    "start": "948560",
    "end": "955360"
  },
  {
    "text": "waiting for those other ones down in this theoretical example we using 900",
    "start": "955360",
    "end": "960399"
  },
  {
    "text": "milliseconds of compute across those three functions but paying for three times that",
    "start": "960399",
    "end": "965519"
  },
  {
    "text": "please cloud providers change a pricing model charges less when we're not using the compute",
    "start": "965519",
    "end": "970720"
  },
  {
    "text": "until that time we're going to be careful about this chaining problem which is a pity right because this is kind of a microservice concept isn't it",
    "start": "970720",
    "end": "976880"
  },
  {
    "text": "separate things doing one thing well it doesn't work so well in a service environment certainly not if you're",
    "start": "976880",
    "end": "982320"
  },
  {
    "text": "running thousands of seconds but just really in a few seconds it's just nice but if you at scale this really costs",
    "start": "982320",
    "end": "987440"
  },
  {
    "text": "and so does using a slow uh storage solution like this example here as well so we need to design our service to not",
    "start": "987440",
    "end": "993519"
  },
  {
    "text": "have this issue it's a pity but we can manage that all right so we can do that that's one",
    "start": "993519",
    "end": "999120"
  },
  {
    "start": "999000",
    "end": "999000"
  },
  {
    "text": "uh cost challenge out the way but fundamentally isn't serverless just more expensive",
    "start": "999120",
    "end": "1004720"
  },
  {
    "text": "yeah we've done the math for all the cloud providers and if you compare the kind of rat rate virtual machine cost as",
    "start": "1004720",
    "end": "1010800"
  },
  {
    "text": "many of them if you're picking a good example against the kind of rap rate serverless cost just you know the actual cost of access",
    "start": "1010800",
    "end": "1017199"
  },
  {
    "text": "to cpu for a period of time with the cloud functions or lambdas you're paying two three four times as much as if you",
    "start": "1017199",
    "end": "1024400"
  },
  {
    "text": "were using the kind of virtual machine so not orders of magnitude yeah but a",
    "start": "1024400",
    "end": "1029918"
  },
  {
    "text": "significant amount of worry but is it really like for like comparable well maybe not because with serverless",
    "start": "1029919",
    "end": "1036798"
  },
  {
    "text": "you only pay for it when you need it right let's take this standard kind of behavior of traffic",
    "start": "1036799",
    "end": "1042160"
  },
  {
    "text": "coming over time right quiet periods and high periods and growing in between in the old days when we had data centers",
    "start": "1042160",
    "end": "1048558"
  },
  {
    "text": "we needed our capacity to be about this line right we need to have enough capacity to handle that highest moment",
    "start": "1048559",
    "end": "1054240"
  },
  {
    "text": "the most you know the busiest moments and we kind of need to hope that we can get at a busier moment we ran out of",
    "start": "1054240",
    "end": "1060000"
  },
  {
    "text": "capacity then when the cloud came along we got auto scalings we were able to do",
    "start": "1060000",
    "end": "1065440"
  },
  {
    "text": "something like this right where we were able to respond the amount of traffic and horizontally scale had some more",
    "start": "1065440",
    "end": "1070960"
  },
  {
    "text": "instances to cope with that but we never could get that yellow line quite that close to the underlying blue",
    "start": "1070960",
    "end": "1076880"
  },
  {
    "text": "line of the real traffic right because it took a moment to spot the traffic was increasing and then took another moment",
    "start": "1076880",
    "end": "1082000"
  },
  {
    "text": "to gain your instances to give you that additional capacity so you always had to have that special space in reserve right",
    "start": "1082000",
    "end": "1087520"
  },
  {
    "text": "in effect you were permanently over provisioning with that capacity there well serverless of course you're just",
    "start": "1087520",
    "end": "1093280"
  },
  {
    "text": "paying for what you need you're just paying for that blue line great but you might likely that's not two or three or four times as much right",
    "start": "1093280",
    "end": "1099039"
  },
  {
    "text": "so you're still thinking serverless is more expensive maybe it is in some situations but what's that yellow line",
    "start": "1099039",
    "end": "1105200"
  },
  {
    "text": "i mean chances are these virtual machines or the containers you were using you're not maxing out before you",
    "start": "1105200",
    "end": "1110960"
  },
  {
    "text": "before your auto scale right chances are your cpu is probably only getting to 20 or 30 percent normally you don't want to",
    "start": "1110960",
    "end": "1116960"
  },
  {
    "text": "get any higher than that because the contender cpu does not give you good performance same with memory and",
    "start": "1116960",
    "end": "1122080"
  },
  {
    "text": "networking right you do not want to be pushing those limits too much and so you are already paying for far",
    "start": "1122080",
    "end": "1127440"
  },
  {
    "text": "more compute than you need suddenly that two or three four times from the serverless point of view doesn't seem that bad",
    "start": "1127440",
    "end": "1134320"
  },
  {
    "text": "we've done a lot of math on this and it certainly varies on their variables right different different systems will have different",
    "start": "1134320",
    "end": "1140240"
  },
  {
    "text": "requirements but i don't think there is a major cost issue with serverless it may cost more i really wish the cloud",
    "start": "1140240",
    "end": "1146160"
  },
  {
    "text": "providers would make it a bit cheaper but ultimately you are using less of it so in many cases it won't be any more",
    "start": "1146160",
    "end": "1151919"
  },
  {
    "text": "overall so you can see where i'm going right i think there's a part for serverless to",
    "start": "1151919",
    "end": "1157679"
  },
  {
    "text": "play in this architecture let's have a look there start with that process box remember",
    "start": "1157679",
    "end": "1163600"
  },
  {
    "text": "what that is when a piece of content is made you want to analyze it and store it what about that do you think that i",
    "start": "1163600",
    "end": "1169600"
  },
  {
    "text": "think so i think this is the most obvious one right it's uh not that time critical if it takes a",
    "start": "1169600",
    "end": "1175039"
  },
  {
    "text": "second or two it probably doesn't matter it's event driven it's the perfect place for cloud function i think to do that",
    "start": "1175039",
    "end": "1180960"
  },
  {
    "text": "processing so what might i want to say but thank you very much what about the content store next to it",
    "start": "1180960",
    "end": "1186880"
  },
  {
    "text": "this isn't computer of course this is storage can this be serverless well all the cloud providers have some",
    "start": "1186880",
    "end": "1193520"
  },
  {
    "text": "options around here that they say it's azure's got its tables and amazon's got its dynamodb for example so um the key",
    "start": "1193520",
    "end": "1200160"
  },
  {
    "text": "value stores seem to be well suited for this not always perfect but on the whole there are some serverless options there",
    "start": "1200160",
    "end": "1206159"
  },
  {
    "text": "but when you get to some of the more sophisticated storage um relational databases and uh search engines and",
    "start": "1206159",
    "end": "1212720"
  },
  {
    "text": "relate and recommendation engines becomes a little hard this one the true serverless dream where you just have",
    "start": "1212720",
    "end": "1218000"
  },
  {
    "text": "infinite capacity as you need it but you're not having to worry about with how many replicas you've got or what",
    "start": "1218000",
    "end": "1223360"
  },
  {
    "text": "your sharding situation is we're not quite there are we with all of those i'm sure the cloud providers are working hard but it's a bit of a mixed",
    "start": "1223360",
    "end": "1230720"
  },
  {
    "text": "picture here isn't it so let me suggest this is serverless where possible okay let's move on uh what about this",
    "start": "1230720",
    "end": "1237840"
  },
  {
    "text": "traffic management layer remember this is have a bit of handling lots of concurrent requests to a high network",
    "start": "1237840",
    "end": "1244080"
  },
  {
    "text": "high throughput relatively low cpu because it's passing most things on this right not a good serverless",
    "start": "1244080",
    "end": "1250640"
  },
  {
    "text": "um option is it i mean there are kind of api gateway style solutions the cloud providers have but we want a bit more",
    "start": "1250640",
    "end": "1256159"
  },
  {
    "text": "control than that so we wouldn't want to use a cloud function here i'm going to suggest this is probably good for um you",
    "start": "1256159",
    "end": "1262720"
  },
  {
    "text": "know sticking with the virtual machines or maybe you could do it with containers right but we want we want quite a lot of control to get this right there's a lot",
    "start": "1262720",
    "end": "1269120"
  },
  {
    "text": "of traffic what about these ones the uh to the left then the the rendering of the web pages",
    "start": "1269120",
    "end": "1275280"
  },
  {
    "text": "and the app api is harder on this one isn't it because we want the scale we know that thousands of",
    "start": "1275280",
    "end": "1281919"
  },
  {
    "text": "users come through and we're going to need the compute in order to do to render the pages and so on but we also",
    "start": "1281919",
    "end": "1287440"
  },
  {
    "text": "we have that issue right with uh with the with the function chaining right we know that these services will be waiting",
    "start": "1287440",
    "end": "1293039"
  },
  {
    "text": "on the downstream ones such as um the content store to respond and if that's slow then we'll be paying just to",
    "start": "1293039",
    "end": "1299360"
  },
  {
    "text": "sit and wait for it but we have to put those caches in right and redis responds and then do a",
    "start": "1299360",
    "end": "1305039"
  },
  {
    "text": "millisecond so we're hoping most of the time they'll be there won't be much to wait around for right and we could really deal with that compete on demand",
    "start": "1305039",
    "end": "1311120"
  },
  {
    "text": "and not have to worry about autoscaling because this is the bit we really need to scale right so i'm going to suggest this is a pretty",
    "start": "1311120",
    "end": "1317280"
  },
  {
    "text": "good choice for serverless and the final one in the middle of business logic by the same argument i think there's a good serverless option",
    "start": "1317280",
    "end": "1323520"
  },
  {
    "text": "there as well we won't do the red bit at the top the green bit at the bottom just because we're short on time but you get the",
    "start": "1323520",
    "end": "1329600"
  },
  {
    "text": "principle right looking at those white bits how much is serverless half more than half",
    "start": "1329600",
    "end": "1335120"
  },
  {
    "text": "it's a fair chunk right not everything but it's a serverless word default philosophy use it for all the benefits",
    "start": "1335120",
    "end": "1341039"
  },
  {
    "text": "until you've proven that for that use case it doesn't make sense right it's too expensive we have two two inflexible or whatever",
    "start": "1341039",
    "end": "1348400"
  },
  {
    "text": "cool so we have some serverless in there quite a lot and those teams then building their systems can worry about the function functionality of what",
    "start": "1348400",
    "end": "1354880"
  },
  {
    "text": "they're doing rather than working out the best way of configuring everything for an operational point of view right",
    "start": "1354880",
    "end": "1361840"
  },
  {
    "text": "hmm all good we have an architecture thank you very much but are we ready to just print it out",
    "start": "1361840",
    "end": "1367760"
  },
  {
    "text": "and deliver it to our teams or do we think maybe we need a little bit more i'm thinking maybe we do",
    "start": "1367760",
    "end": "1374240"
  },
  {
    "text": "when we've done this for the bbc for real the one thing we found that was critical was to make sure that we then had clear ownership of everything that",
    "start": "1374240",
    "end": "1380559"
  },
  {
    "text": "needed to happen it's kind of obvious right but what the architecture diagram is and what actually needs to be owned not necessarily the same thing",
    "start": "1380559",
    "end": "1387440"
  },
  {
    "text": "so for example there are core capabilities that we must get right how do we host it how do we do our build",
    "start": "1387440",
    "end": "1392480"
  },
  {
    "start": "1388000",
    "end": "1388000"
  },
  {
    "text": "pipelines the icd how do we do our analytics and we won't list them all but you get the idea",
    "start": "1392480",
    "end": "1398400"
  },
  {
    "text": "there are common concerns we need to worry about like security and accessibility and so on right i mean who",
    "start": "1398400",
    "end": "1404080"
  },
  {
    "text": "we need people to own these issues we can't all be experts in all of them but we need to make sure they happen",
    "start": "1404080",
    "end": "1410080"
  },
  {
    "text": "we've got common capabilities that we want to have across our sites and apps for example video clips how are we handling them we want one team to own",
    "start": "1410080",
    "end": "1416880"
  },
  {
    "text": "that and do it really well in fact we want a team to win all of the things on these diagrams right and here's the fourth and final circle with of the",
    "start": "1416880",
    "end": "1423840"
  },
  {
    "text": "things in them they all need to be owned so for example weather that one over there we need someone to own weather",
    "start": "1423840",
    "end": "1429360"
  },
  {
    "text": "forecasts that team say you're on that team you're going to want to use lots of the other things in this diagram right you're",
    "start": "1429360",
    "end": "1435440"
  },
  {
    "text": "going to need to consider hosting and build pipelines and maybe video clips right you don't want to have to resolve",
    "start": "1435440",
    "end": "1440559"
  },
  {
    "text": "those problems so because other teams are owning them they can provide that as a service for you allowing you to focus",
    "start": "1440559",
    "end": "1445760"
  },
  {
    "text": "on the things that really matter to what you're doing that's different you know in this case weather forecasts",
    "start": "1445760",
    "end": "1451840"
  },
  {
    "text": "it's kind of obvious this right but by making that list of everything that needs to happen and then organizing our",
    "start": "1451840",
    "end": "1457039"
  },
  {
    "text": "teams around that to make sure everything's owned it makes a difference for this being a deliverable thing rather than just an architecture and by",
    "start": "1457039",
    "end": "1463600"
  },
  {
    "text": "ownership of course we mean proper end to end you design it you build it you operate it it breaks you get run up the",
    "start": "1463600",
    "end": "1469840"
  },
  {
    "text": "full devops ownership life cycle and you get that right and you get what",
    "start": "1469840",
    "end": "1475520"
  },
  {
    "text": "i love is one of the great mantras i think that i think it came from pearl originally let's make the common things easy and the specialist thinks possible",
    "start": "1475520",
    "end": "1482240"
  },
  {
    "text": "what do we mean by that well if you're a team building something you want most of the problems that have been",
    "start": "1482240",
    "end": "1488559"
  },
  {
    "start": "1484000",
    "end": "1484000"
  },
  {
    "text": "sold elsewhere to just be available for you to use right which could be video clips could be monitoring right it could be could be anything",
    "start": "1488559",
    "end": "1494559"
  },
  {
    "text": "but if 80 percent of the time you're on the same path as everyone else then hopefully though you'll build up",
    "start": "1494559",
    "end": "1500000"
  },
  {
    "text": "this ecosystem of features and capabilities and best practices that you can all use and that way you're not all reinventing",
    "start": "1500000",
    "end": "1506559"
  },
  {
    "text": "your own thing you're not all coming up with your own build pipelines for example because teams are sharing things where they can",
    "start": "1506559",
    "end": "1511840"
  },
  {
    "text": "but you don't want to over generalize right there's going to be 20 of the time when you're doing something different maybe you're doing machine learning",
    "start": "1511840",
    "end": "1517919"
  },
  {
    "text": "algorithms and no one else is maybe doing video transcoding you're going to need a different process different tools",
    "start": "1517919",
    "end": "1523520"
  },
  {
    "text": "and that's going to be okay too right you're trying to get that best of both common stuff is easy because everyone's following best practice and being as",
    "start": "1523520",
    "end": "1529679"
  },
  {
    "text": "efficient and um as possible but still allowing that specialism so you can have that breath when you need it",
    "start": "1529679",
    "end": "1537200"
  },
  {
    "text": "let's take one final look at our lovely diagram to show how that works in practice say you're a new team that needs to make",
    "start": "1537200",
    "end": "1543279"
  },
  {
    "text": "a new website no worries we have the place where we do that you can extend that or clone it as necessary but say",
    "start": "1543279",
    "end": "1549600"
  },
  {
    "text": "your website needs to be radically different maybe it's some 3d world that needs to happen no",
    "start": "1549600",
    "end": "1555120"
  },
  {
    "text": "worries we can go off and make something different if you want maybe pick different technology not use serverless whatever we can extend our architecture",
    "start": "1555120",
    "end": "1563360"
  },
  {
    "text": "some other time at least to work in a different way maybe a cms is needed that's different as well no ways we'll",
    "start": "1563360",
    "end": "1569120"
  },
  {
    "text": "do that getting that best of both right we have that consistency that efficiency so we can be as fast and optimized as",
    "start": "1569120",
    "end": "1575279"
  },
  {
    "text": "possible but still allowing that breadth that's the beauty of microservice architectures right fundamentally if you",
    "start": "1575279",
    "end": "1581679"
  },
  {
    "text": "get that balance writer's teams where you're allowing that golden path so everyone's sharing what they can but being different where they need it we're",
    "start": "1581679",
    "end": "1588080"
  },
  {
    "text": "hopefully getting that efficiency argument right as well right we're allowing everything to happen we're not being too we're not duplicating it",
    "start": "1588080",
    "end": "1593440"
  },
  {
    "text": "necessarily and we're ultimately creating what should be a nice fast reliable architecture",
    "start": "1593440",
    "end": "1600559"
  },
  {
    "text": "we're done thank you so much does bbc online really like this yeah pretty much",
    "start": "1600559",
    "end": "1605600"
  },
  {
    "text": "i mean he's 25 years old so i won't lie there's some tech debt right there's some the old systems aren't quite like this but",
    "start": "1605600",
    "end": "1612080"
  },
  {
    "text": "at its heart this is it if you were to go visit the bbc homepage",
    "start": "1612080",
    "end": "1617360"
  },
  {
    "text": "now or read news article that web page would have been rendered in the lambda it would have been cached",
    "start": "1617360",
    "end": "1622400"
  },
  {
    "text": "in redis this architecture you see it's preparing hundreds of millions of requests every",
    "start": "1622400",
    "end": "1627919"
  },
  {
    "text": "day in a reliable way touchwood in an efficient way too it's not rocket",
    "start": "1627919",
    "end": "1633039"
  },
  {
    "text": "science but it works all right thank you so much everyone we have looked at that architecture the",
    "start": "1633039",
    "end": "1639520"
  },
  {
    "start": "1638000",
    "end": "1638000"
  },
  {
    "text": "highest of levels haven't we um but thank you for going through that with me we've looked at some of the tech choices",
    "start": "1639520",
    "end": "1644640"
  },
  {
    "text": "particularly serverless and very briefly at the end we looked around you know how we organize ourselves making sure everything is owned end-to-end to make",
    "start": "1644640",
    "end": "1651360"
  },
  {
    "text": "it happen thank you so much for watching and i'll see you soon",
    "start": "1651360",
    "end": "1656799"
  },
  {
    "text": "wow there's been so many questions so many great ones as well a few questions about the content management system the bbc builds its own basically",
    "start": "1658480",
    "end": "1664720"
  },
  {
    "text": "um do i dare press the video but is that going to work who knows um the bbc builds its own content",
    "start": "1664720",
    "end": "1670640"
  },
  {
    "text": "management systems it's kind of headless in a way we have a team building that so we can get the workflow exactly right",
    "start": "1670640",
    "end": "1676240"
  },
  {
    "text": "for our content makers which then effectively they create an api or a feed an effect which then go into the storage",
    "start": "1676240",
    "end": "1682320"
  },
  {
    "text": "to which we make our websites and apps um obviously uh uh",
    "start": "1682320",
    "end": "1688000"
  },
  {
    "text": "building your own content management system is is uh it's got a history to it there are some brilliant ones out there but that's",
    "start": "1688000",
    "end": "1693600"
  },
  {
    "text": "just what we do uh there were some questions there about testing how do we test the serverless stuff so um",
    "start": "1693600",
    "end": "1700640"
  },
  {
    "text": "one of the we used to in the old days kind of have a kind of a qa environment a test and stage environment which kind",
    "start": "1700640",
    "end": "1706320"
  },
  {
    "text": "of things would come along and we still have that we still have one pre-production environment but one of the nice things of course about",
    "start": "1706320",
    "end": "1711919"
  },
  {
    "text": "serverless is every pull request can have its own separate set of tests running you can",
    "start": "1711919",
    "end": "1717039"
  },
  {
    "text": "create an environment just like the production one and you can have any point under to them of course because they're all just copies of your your",
    "start": "1717039",
    "end": "1722880"
  },
  {
    "text": "function your lambda so um we do that cicd pipeline does that automatically",
    "start": "1722880",
    "end": "1727919"
  },
  {
    "text": "we still have a moment when it gets that qa environment we can press a button to",
    "start": "1727919",
    "end": "1733039"
  },
  {
    "text": "launch so it's not completely automated to live um but it is just a one click deploy once we're happy with it",
    "start": "1733039",
    "end": "1739679"
  },
  {
    "text": "uh we don't do anything clever like blue green or kind of rolling out deploys something good love to do but we've",
    "start": "1739679",
    "end": "1744880"
  },
  {
    "text": "always found it because it's so easy to roll back to a previous version we found it just easier to roll out 100",
    "start": "1744880",
    "end": "1750640"
  },
  {
    "text": "um give it a go and you notice pretty quickly if something's wrong and you can roll back it's not the smartest solution we could do something clever there but",
    "start": "1750640",
    "end": "1756640"
  },
  {
    "text": "we actually find that to be good enough for now and something we'll work on um what's the idd pipeline do we use the",
    "start": "1756640",
    "end": "1763840"
  },
  {
    "text": "most of what we're doing is on amazon so we basically move to their kind of build code pipeline things just because it's",
    "start": "1763840",
    "end": "1769440"
  },
  {
    "text": "so managed um we used to do a lot of jenkins but there's quite a lot of over the head and keeping that going so uh we",
    "start": "1769440",
    "end": "1775440"
  },
  {
    "text": "have gone on about amazon with with the ci cd stuff um",
    "start": "1775440",
    "end": "1781840"
  },
  {
    "text": "what other questions did we ask so there's so many of them it's wonderful your feedback thank you",
    "start": "1781840",
    "end": "1787760"
  },
  {
    "text": "um security in the architecture yeah we didn't cover that clearly there's a lot around access control um obviously with",
    "start": "1787760",
    "end": "1795679"
  },
  {
    "text": "serverless it really helps because you have you have the boxes for which you need to worry about um who has access but we have our own process for which",
    "start": "1795679",
    "end": "1800960"
  },
  {
    "text": "form we do have those virtual machines um to make sure that we uh how you access those ones as well we",
    "start": "1800960",
    "end": "1807279"
  },
  {
    "text": "have we we go the full-on with the i am access right at least privilege making sure that each",
    "start": "1807279",
    "end": "1812640"
  },
  {
    "text": "function and each server and the rest of it already have access to what they need and we do quite a lot of course with",
    "start": "1812640",
    "end": "1817919"
  },
  {
    "text": "with handling requests into our site as well being a high profile site we do get some interesting uh attacks on us so we need",
    "start": "1817919",
    "end": "1824720"
  },
  {
    "text": "to there's a whole bit thing there we could do many talks on the security um",
    "start": "1824720",
    "end": "1830480"
  },
  {
    "text": "finding restrictive about serverless um well you know there's a whole set of things here isn't there right you have a",
    "start": "1830480",
    "end": "1836399"
  },
  {
    "text": "limited amount of compute variation right you can't do you know it's a gpu for example it's not a lot of storage you can't be stateful there's a",
    "start": "1836399",
    "end": "1842880"
  },
  {
    "text": "really key one if you do something you can't handle concurrent requests at once um that also ties into why we use the",
    "start": "1842880",
    "end": "1849679"
  },
  {
    "text": "virtual machine for the traffic management layer right high numbers of requests at once perhaps could do it with serverless but it kind of doesn't",
    "start": "1849679",
    "end": "1855279"
  },
  {
    "text": "make sense when you need to do something that involves a lot of concurrent networking requests",
    "start": "1855279",
    "end": "1860320"
  },
  {
    "text": "and i am aware that we are being told we have to be very much to time on this and we're hitting i think 22 of the hour so",
    "start": "1860320",
    "end": "1867039"
  },
  {
    "text": "uh there is the breakout room in zoom um so we could go and join that uh",
    "start": "1867039",
    "end": "1873279"
  },
  {
    "text": "but otherwise poor charles still having tech issues i think thank you so much for your time uh we can chat along in",
    "start": "1873279",
    "end": "1879039"
  },
  {
    "text": "slack as well for the rest of the conference if anybody wants to i'll be around for the whole two weeks um i'll see you soon",
    "start": "1879039",
    "end": "1885800"
  },
  {
    "text": "[Music]",
    "start": "1885800",
    "end": "1893660"
  },
  {
    "text": "you",
    "start": "1895919",
    "end": "1898000"
  }
]