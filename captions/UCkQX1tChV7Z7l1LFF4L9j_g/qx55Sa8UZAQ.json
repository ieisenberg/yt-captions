[
  {
    "start": "0",
    "end": "220000"
  },
  {
    "text": "all right well good afternoon everybody okay let's try that again good afternoon",
    "start": "8000",
    "end": "14719"
  },
  {
    "text": "everybody thank you for ending your day with me um my name is Dave Smith and I am here",
    "start": "14719",
    "end": "21359"
  },
  {
    "text": "today to talk to you about Bluetoothle and more specifically we're going to talk about some of the changes that have",
    "start": "21359",
    "end": "26960"
  },
  {
    "text": "come about in Bluetooth LE and the APIs as we've matured and come into Android",
    "start": "26960",
    "end": "32960"
  },
  {
    "text": "4.0 and the Lollipop release um Bluetooth on Android has kind of a",
    "start": "32960",
    "end": "38719"
  },
  {
    "text": "checkered past uh you know we first saw Bluetooth APIs show up for applications in 2.0 um and those those APIs were",
    "start": "38719",
    "end": "47280"
  },
  {
    "text": "simple but they were stable uh and one of the reasons they were so stable is because the Bluetooth stack at that time",
    "start": "47280",
    "end": "54079"
  },
  {
    "text": "was based off of a a fairly well-known and stable stack called Blue Z is anybody here familiar with Blue Z ever",
    "start": "54079",
    "end": "60719"
  },
  {
    "text": "heard that before okay a couple of you so it's a it's a longtime Linux stack for doing Bluetooth communication you",
    "start": "60719",
    "end": "67520"
  },
  {
    "text": "know inside of of the Linux operating system and it was up until very very",
    "start": "67520",
    "end": "73040"
  },
  {
    "text": "recently the core stack that Android used as well so all of the APIs that we had early on in Android were worked",
    "start": "73040",
    "end": "79840"
  },
  {
    "text": "quite well um but there were some issues with Blue Z uh one of the biggest ones",
    "start": "79840",
    "end": "84960"
  },
  {
    "text": "had to do with licensing as is common with a lot of the pieces in the Linux kernel the Blu Z stack was licensed",
    "start": "84960",
    "end": "90799"
  },
  {
    "text": "under the GPL which is something that is commonly very unfriendly to Android being licensed under Apache and there",
    "start": "90799",
    "end": "97200"
  },
  {
    "text": "are some issues associated with that uh that I won't go into but uh essentially in Android 4.2 they decided that the",
    "start": "97200",
    "end": "105600"
  },
  {
    "text": "Blues stack needed to go and they were going to replace that with a completely new implementation that they called Blue",
    "start": "105600",
    "end": "112240"
  },
  {
    "text": "Droid this was brought forth by Broadcom uh and it's pretty much solely maintained by that one entity with some",
    "start": "112240",
    "end": "119119"
  },
  {
    "text": "help from Google um that was a stack that was Apache licensed so it was much more friendly to the rest of the Android",
    "start": "119119",
    "end": "125680"
  },
  {
    "text": "stack but it was brand new so as a result we all saw at the application",
    "start": "125680",
    "end": "131520"
  },
  {
    "text": "level that really from Android 4.2 on into the future the Bluetooth stability",
    "start": "131520",
    "end": "136720"
  },
  {
    "text": "of Android has taken a tank and that's primarily because they've been starting over from scratch essentially on the",
    "start": "136720",
    "end": "143200"
  },
  {
    "text": "Bluetooth stack and sort of building their way back up you know on and from there um to kind of coincide with this",
    "start": "143200",
    "end": "150400"
  },
  {
    "text": "we got Bluetooth LE APIs at the application level starting in Jellybean 4.3 so just after they made that change",
    "start": "150400",
    "end": "157840"
  },
  {
    "text": "um and as a result many of you who have probably played around with this have realized that the original Bluetooth",
    "start": "157840",
    "end": "163120"
  },
  {
    "text": "APIs were pretty shaky themselves you know they were very finicky they would kind of work half the time I couldn't",
    "start": "163120",
    "end": "168640"
  },
  {
    "text": "even get a demo to work but you know they were what we had and we loved them for it um as we've moved forward the the",
    "start": "168640",
    "end": "176319"
  },
  {
    "text": "Blue Droid stack has continued to get a significant amount of updates and probably just looking at the commit logs",
    "start": "176319",
    "end": "183280"
  },
  {
    "text": "the amount of changes that have gone into Blue Droid from KitKat to Lollipop is probably one of the largest sums I've",
    "start": "183280",
    "end": "189440"
  },
  {
    "text": "seen since it was introduced so they've put a lot of work into Blue Droid and at least from the limited experience that",
    "start": "189440",
    "end": "194720"
  },
  {
    "text": "I've had with it so far Bluetooth and Bluetooth LE specifically seem much much more stable in Android Lollipop and",
    "start": "194720",
    "end": "202159"
  },
  {
    "text": "hopefully moving forward okay so that's good news u in addition they've added a ton of new features which is what we're",
    "start": "202159",
    "end": "208480"
  },
  {
    "text": "going to focus on uh for the rest of the talk here today so just a little background on Bluetoothle um for those",
    "start": "208480",
    "end": "215280"
  },
  {
    "text": "who may not have a lot of experience with it we won't go into too much detail here but effectively when we're talking",
    "start": "215280",
    "end": "220400"
  },
  {
    "start": "220000",
    "end": "361000"
  },
  {
    "text": "about Bluetoothle communication there are one of four roles that any device can m can take on as part of this",
    "start": "220400",
    "end": "227040"
  },
  {
    "text": "communication there's a central role peripheral role an observer and a broadcaster now the the pieces that we",
    "start": "227040",
    "end": "234000"
  },
  {
    "text": "have on the right there the peripheral and the broadcaster those are devices that are designed to advertise their",
    "start": "234000",
    "end": "239360"
  },
  {
    "text": "presence to other devices you know out in the out in the world whereas the central and observer are more scanning",
    "start": "239360",
    "end": "246640"
  },
  {
    "text": "devices that are looking for other advertisers around that they can communicate with or connect to okay the",
    "start": "246640",
    "end": "253280"
  },
  {
    "text": "primary difference between a peripheral and a broadcaster is whether or not that device is connectable so you think of a",
    "start": "253280",
    "end": "260479"
  },
  {
    "text": "broadcaster as a device that simply advertises on a regular basis some",
    "start": "260479",
    "end": "265680"
  },
  {
    "text": "packets of data out into the world and all the interesting information that they have to say is in that",
    "start": "265680",
    "end": "271520"
  },
  {
    "text": "advertisement packet the the device is not connectable you can't get any further information by connecting to it",
    "start": "271520",
    "end": "277680"
  },
  {
    "text": "and trying to you know get further data all we have is the the uh the",
    "start": "277680",
    "end": "283040"
  },
  {
    "text": "advertisement these are effectively the beacon type devices that you see from you know a number of different companies",
    "start": "283040",
    "end": "289440"
  },
  {
    "text": "around uh peripheral device on the other hand is something that you can advertise but then a device can remotely connect",
    "start": "289440",
    "end": "296479"
  },
  {
    "text": "to a peripheral and get further information uh from what are called the services and characteristics on that",
    "start": "296479",
    "end": "302800"
  },
  {
    "text": "device and we'll talk about how all that stuff is put together so that's kind of the distinction between those two and then on the opposite side of that we",
    "start": "302800",
    "end": "308960"
  },
  {
    "text": "have central devices which are devices that scan and look for peripherals and observers which are really just",
    "start": "308960",
    "end": "314639"
  },
  {
    "text": "listening for those broadcasts coming off of a beacon type device okay now the central and observer role",
    "start": "314639",
    "end": "323199"
  },
  {
    "text": "we've had APIs to do that stuff on an Android device since the original Jellybean release in 4.3 okay so as soon",
    "start": "323199",
    "end": "329680"
  },
  {
    "text": "as we had B APIs those were the device roles that we were able to to enact on a device now with the Lollipop release",
    "start": "329680",
    "end": "337039"
  },
  {
    "text": "they've given us the APIs to do advertising as well and to generate",
    "start": "337039",
    "end": "342720"
  },
  {
    "text": "what's known as a GAT server which allows us to create peripherals and broadcasters on Android devices as well",
    "start": "342720",
    "end": "350400"
  },
  {
    "text": "so now from a from an Android device we can implement any one of the primary B roles whereas prior we only were able to",
    "start": "350400",
    "end": "357520"
  },
  {
    "text": "do about half of them okay all right so just a little bit of",
    "start": "357520",
    "end": "363039"
  },
  {
    "start": "361000",
    "end": "535000"
  },
  {
    "text": "the architecture here so the Bluetoothle operates on what's known the general attribute or the GAT profile it's",
    "start": "363039",
    "end": "370080"
  },
  {
    "text": "basically just a giant table of key value data where the keys are unique IDs and the values are any number of",
    "start": "370080",
    "end": "377360"
  },
  {
    "text": "different things uh and they just collect themselves together in logical groupings so generally a single device",
    "start": "377360",
    "end": "384080"
  },
  {
    "text": "would be considered to implement a single profile now if you're if you're working with some of the adopted",
    "start": "384080",
    "end": "390639"
  },
  {
    "text": "profiles that the Bluetooth SIG has defined for interoperability like health thermometer or proximity profile or some",
    "start": "390639",
    "end": "398560"
  },
  {
    "text": "of those things then that profile and the pieces underneath it are well defined you could just as easily define",
    "start": "398560",
    "end": "404160"
  },
  {
    "text": "your own peripheral device that has your own custom collection of all these components and we would still sort of",
    "start": "404160",
    "end": "410160"
  },
  {
    "text": "refer to that overall device configuration as a profile okay it's just the top level element then",
    "start": "410160",
    "end": "416080"
  },
  {
    "text": "underneath that you'll have a collection of one or more services now these services can be defined either by a",
    "start": "416080",
    "end": "422720"
  },
  {
    "text": "fully unique ID or UYU ID or if again they are part of the adopted profiles",
    "start": "422720",
    "end": "429039"
  },
  {
    "text": "that the Bluetooth SIG defines that will be defined as a 16bit what's known as an",
    "start": "429039",
    "end": "434319"
  },
  {
    "text": "assigned number it's still a unique ID but it's assigned by the Bluetooth SIG so that everybody knows that each one of",
    "start": "434319",
    "end": "440800"
  },
  {
    "text": "these services has the same ID no matter what if you want to generate your own service that does something completely",
    "start": "440800",
    "end": "446720"
  },
  {
    "text": "customer specific you would create a full unique UYU ID the 128 bit version",
    "start": "446720",
    "end": "452240"
  },
  {
    "text": "and you would use that to define your service instead okay services generally are logical",
    "start": "452240",
    "end": "459520"
  },
  {
    "text": "groupings of functionality so you know there would be something like a proximity service or a power service or",
    "start": "459520",
    "end": "466080"
  },
  {
    "text": "a time service or maybe a thermometer service and underneath that service",
    "start": "466080",
    "end": "471120"
  },
  {
    "text": "would be one or more characteristics that are the individual values that make up that logical functionality now there",
    "start": "471120",
    "end": "477680"
  },
  {
    "text": "may only be one but there may be additional ones like for instance let's take the thermometer as the example",
    "start": "477680",
    "end": "483039"
  },
  {
    "text": "thermometer service may have a readonly characteristic that provides whatever",
    "start": "483039",
    "end": "488080"
  },
  {
    "text": "the current temperature value is of the thermometer that is just the value of that characteristic there may be a",
    "start": "488080",
    "end": "493919"
  },
  {
    "text": "second characteristic on that same service that defines the units of the temperature maybe that one is",
    "start": "493919",
    "end": "500160"
  },
  {
    "text": "readwritable so that you can configure what the units are that the temperature is reported in and maybe if you write",
    "start": "500160",
    "end": "505680"
  },
  {
    "text": "that characteristic the device starts reporting its temperature back in different units okay and that's just an",
    "start": "505680",
    "end": "510720"
  },
  {
    "text": "example but you can apply as many characteristics under a given service that you would like whatever the",
    "start": "510720",
    "end": "515919"
  },
  {
    "text": "individual points are that you need to read and or write on that specific device okay now every single one of",
    "start": "515919",
    "end": "522800"
  },
  {
    "text": "these elements services and characteristics each have a unique ID that's basically that key in the giant",
    "start": "522800",
    "end": "530000"
  },
  {
    "text": "key value table that makes up what we call the GAT table",
    "start": "530000",
    "end": "535440"
  },
  {
    "start": "535000",
    "end": "620000"
  },
  {
    "text": "okay all right so just a little bit about constructing UU IDs because it becomes important when you're writing",
    "start": "535720",
    "end": "540800"
  },
  {
    "text": "the code um I mentioned before that there are 16- bit UIDs for the assigned",
    "start": "540800",
    "end": "546720"
  },
  {
    "text": "numbers but there are also full 128-bit versions it turns out that if you just took one of those 16-bit UIDs and you",
    "start": "546720",
    "end": "553200"
  },
  {
    "text": "passed it to the Android APIs it would have no idea what to do with it because that designation is not quite correct it",
    "start": "553200",
    "end": "559920"
  },
  {
    "text": "turns out the what actually is going on is that anytime you have one of those 16bit UU IDs associated with an adopted",
    "start": "559920",
    "end": "567440"
  },
  {
    "text": "profile service or characteristic that is just shorthand for the 16 bits that",
    "start": "567440",
    "end": "573040"
  },
  {
    "text": "fit inside of this top UYU ID that I have listed there essentially in the red",
    "start": "573040",
    "end": "578240"
  },
  {
    "text": "section so inside of there the actual UYU ID is",
    "start": "578240",
    "end": "583440"
  },
  {
    "text": "the 16 bits that you're given if you look at Bluetooth documentation inserted into that larger what they call the",
    "start": "583440",
    "end": "589519"
  },
  {
    "text": "common base for all Bluetooth UUIDs okay so every adopted profile service",
    "start": "589519",
    "end": "594880"
  },
  {
    "text": "characteristic will have the same base UU ID with those individual elements filled in so you can see that the",
    "start": "594880",
    "end": "600480"
  },
  {
    "text": "example I have at the bottom there with the health thermometer which in Bluetooth documentation is defined just",
    "start": "600480",
    "end": "605839"
  },
  {
    "text": "as hex 1809 the actual UU ID you would need to put in code to connect to that",
    "start": "605839",
    "end": "611519"
  },
  {
    "text": "service is 1809 stuck in that larger number that I'm not going to read okay",
    "start": "611519",
    "end": "618800"
  },
  {
    "text": "questions on that all right so that's kind of the basics of",
    "start": "618800",
    "end": "626800"
  },
  {
    "start": "620000",
    "end": "918000"
  },
  {
    "text": "getting us up and running with using BLE okay let's talk a little bit about what's changed from a year ago to now",
    "start": "626800",
    "end": "634560"
  },
  {
    "text": "essentially um when we had the original release and even up through the Kit Kat APIs um some of the functionality that",
    "start": "634560",
    "end": "641760"
  },
  {
    "text": "was available to us when specifically when it came to B scanning um the first is that scans were very limited in terms",
    "start": "641760",
    "end": "649120"
  },
  {
    "text": "of the filtering we could do um so essentially you could from a device you could start a scan and you could",
    "start": "649120",
    "end": "655360"
  },
  {
    "text": "retrieve events for every BLE advertising device that would be picked up inside of range regardless of what",
    "start": "655360",
    "end": "662320"
  },
  {
    "text": "that device was you know you you had to in your code determine either by device",
    "start": "662320",
    "end": "667680"
  },
  {
    "text": "ID or by looking at the advertisement packets whe whether or not that was a device you were actually interested in",
    "start": "667680",
    "end": "673600"
  },
  {
    "text": "there was no assistance from the framework to make that easier for you there was there's essentially only one",
    "start": "673600",
    "end": "679680"
  },
  {
    "text": "option which is you could pass to this the scan request a list of service UU",
    "start": "679680",
    "end": "685600"
  },
  {
    "text": "IDs and ask the framework to only send you a call back if a device that",
    "start": "685600",
    "end": "691680"
  },
  {
    "text": "advertises one of those services uh came about so that you kind of do some filtering out but it was nothing more",
    "start": "691680",
    "end": "698000"
  },
  {
    "text": "than that okay um the other real detriment that a lot of us saw with the",
    "start": "698000",
    "end": "703040"
  },
  {
    "text": "early BLE is that it only allowed for active scanning basically what I mean by this is that scanning could only happen",
    "start": "703040",
    "end": "708880"
  },
  {
    "text": "while the device was powered on or fully powered up you couldn't start a scan and then let the device go into suspend mode",
    "start": "708880",
    "end": "716000"
  },
  {
    "text": "that would disable the scan essentially at the same time that functionality was not drilled low enough into the stack to",
    "start": "716000",
    "end": "721920"
  },
  {
    "text": "be able to have an active scan while the device was suspended so if you were running scans all the time you were",
    "start": "721920",
    "end": "727279"
  },
  {
    "text": "basically murdering the user's battery and there was no real balance in there you either had to set up some sort of a",
    "start": "727279",
    "end": "733680"
  },
  {
    "text": "wake up schedule and turn scans on periodically and shut them off or the device would never be able to go to sleep okay so that was a big problem",
    "start": "733680",
    "end": "739839"
  },
  {
    "text": "initially um another fairly annoying thing for beacon applications was that",
    "start": "739839",
    "end": "745120"
  },
  {
    "text": "if you started a scan you could only retrieve one advertisement per device",
    "start": "745120",
    "end": "750240"
  },
  {
    "text": "during that scan so even though a beacon may be advertising every 10 seconds as soon as you got the first advertisement",
    "start": "750240",
    "end": "757040"
  },
  {
    "text": "the stack would never deliver the remaining advertisements to you you had to stop the scan and start it over again to get the next one well if a device if",
    "start": "757040",
    "end": "764320"
  },
  {
    "text": "all a device has to tell you is that it's advertisement packet you kind of want to see them all okay and so that",
    "start": "764320",
    "end": "769920"
  },
  {
    "text": "was a sort of a frustrating thing where we'd have to stop and start scans all the time just to scan for beacons uh and",
    "start": "769920",
    "end": "775760"
  },
  {
    "text": "then finally as going along with the advertisement piece Google kind of",
    "start": "775760",
    "end": "780959"
  },
  {
    "text": "punted in the first release on this and they would not give us any um parsed data for advertisement records so the",
    "start": "780959",
    "end": "788480"
  },
  {
    "text": "advertisement data was basically handed to you in the scan call back as a raw bite array they said \"Here you figure it",
    "start": "788480",
    "end": "794240"
  },
  {
    "text": "out.\" And the bite arrays weren't even properly sized half the time you know advertisement packets are 27 bytes and",
    "start": "794240",
    "end": "799680"
  },
  {
    "text": "usually the arrays were 60 or 70 bytes for some odd reason it just it didn't make a whole lot of sense but the data",
    "start": "799680",
    "end": "805360"
  },
  {
    "text": "was there and we could work with it but it just it wasn't very finished so fast",
    "start": "805360",
    "end": "810560"
  },
  {
    "text": "forward to the latest release and all of this stuff has gotten a lot better okay so from the scanning perspective we now",
    "start": "810560",
    "end": "818079"
  },
  {
    "text": "have an array of filters that we can apply to scans to let the framework do",
    "start": "818079",
    "end": "823120"
  },
  {
    "text": "the differentiation on what types of advertisements we actually want to see we can filter on anything in an",
    "start": "823120",
    "end": "828800"
  },
  {
    "text": "advertisement packet now device name manufacturer data advertised services anything that's in that packet we can",
    "start": "828800",
    "end": "835200"
  },
  {
    "text": "filter on and the framework will do the work instead of us having to put all that stuff in our code okay um batching",
    "start": "835200",
    "end": "842399"
  },
  {
    "text": "of scan results is another really big one this goes to the power consideration so that now we um we can do a couple",
    "start": "842399",
    "end": "849360"
  },
  {
    "text": "things but with the filtration and the batching together these are actually sent down to the um down to the hardware",
    "start": "849360",
    "end": "856240"
  },
  {
    "text": "abstraction layer so that the scan filtering and the uh the ability to",
    "start": "856240",
    "end": "861519"
  },
  {
    "text": "batch multiple scans together is handled by the hardware so now the device can",
    "start": "861519",
    "end": "867199"
  },
  {
    "text": "fully go into suspend mode with an active BLE scan and then when the application wakes up at some later time",
    "start": "867199",
    "end": "874480"
  },
  {
    "text": "all the scan results as a single batch can be delivered to the application so it allows for much lower power longer",
    "start": "874480",
    "end": "880720"
  },
  {
    "text": "term scanning than we ever had before with the Jelly Bean and the Kit Kat APIs",
    "start": "880720",
    "end": "885800"
  },
  {
    "text": "okay um they also fixed the advertisement piece so now if I run a",
    "start": "885800",
    "end": "891440"
  },
  {
    "text": "scan and multiple advertisements come in from the same device I can see them all thank you so we don't have to worry",
    "start": "891440",
    "end": "898320"
  },
  {
    "text": "about that anymore uh and then we don't have to do manual work on scan records anymore there are actual classes for",
    "start": "898320",
    "end": "905120"
  },
  {
    "text": "scan records and advertisement data that we can call nice methods on to get out the device name and the UU IDs and all",
    "start": "905120",
    "end": "911680"
  },
  {
    "text": "that stuff okay so life is much much better than it was",
    "start": "911680",
    "end": "917480"
  },
  {
    "text": "before okay so then on top of the improvements the new features that we",
    "start": "917480",
    "end": "922800"
  },
  {
    "start": "918000",
    "end": "1063000"
  },
  {
    "text": "have really fall into these two categories so we have the ability to advertise now from devices u and we have",
    "start": "922800",
    "end": "929040"
  },
  {
    "text": "the ability to instantiate in our application what's known as a gat server it's basically just a way of saying that",
    "start": "929040",
    "end": "935600"
  },
  {
    "text": "on my Android device I can now set up my own table of services and characteristics and expose that to the",
    "start": "935600",
    "end": "942399"
  },
  {
    "text": "world for other devices to connect to me okay those two pieces together make up",
    "start": "942399",
    "end": "948000"
  },
  {
    "text": "what we call peripheral mode you need both right you know in fact it's kind of interesting some of the GAT server APIs",
    "start": "948000",
    "end": "954720"
  },
  {
    "text": "have been around since the original Jellybean release but without advertising there was no point to them",
    "start": "954720",
    "end": "960880"
  },
  {
    "text": "you know they existed but if you couldn't advertise out your presence other devices couldn't connect to you so we kind of needed the whole package but",
    "start": "960880",
    "end": "967839"
  },
  {
    "text": "technically speaking peripheral mode means you have a GAT server and you can advertise okay now this is kind of a yay",
    "start": "967839",
    "end": "974480"
  },
  {
    "text": "awe moment a little bit because while we've got this feature it is required to be implemented at the chipset level okay",
    "start": "974480",
    "end": "980800"
  },
  {
    "text": "so this is a feature that's it's basically a hardware feature which means you're probably not going to see it on",
    "start": "980800",
    "end": "987279"
  },
  {
    "text": "every device just because it gets updated to the Lollipop release okay in fact even with just the Nexus devices",
    "start": "987279",
    "end": "993759"
  },
  {
    "text": "that have been updated already the Nexus 9 and the Nexus 6 do support this the Nexus 5 and the Nexus 7 do not okay so",
    "start": "993759",
    "end": "1001279"
  },
  {
    "text": "generally speaking just because a device is getting Lollipop doesn't mean it's immediately going to be able to advertise they've given you a new new",
    "start": "1001279",
    "end": "1008959"
  },
  {
    "text": "method to basically you have to check on the framework to determine whether or not your device is going to be able to support this feature okay yes question",
    "start": "1008959",
    "end": "1017040"
  },
  {
    "text": "there was some discussion about whether it's actually the chip set that's the problem or the",
    "start": "1017040",
    "end": "1022920"
  },
  {
    "text": "certification i don't know if you have any more insights into that uh the question was there there was some",
    "start": "1022920",
    "end": "1028798"
  },
  {
    "text": "discussion about whether or not it was the chipset itself or the certification i don't know um the way they've",
    "start": "1028799",
    "end": "1034880"
  },
  {
    "text": "documented it anyway is that it has to be supported by the chipset but I I think the really what it means is that",
    "start": "1034880",
    "end": "1041520"
  },
  {
    "text": "the u what they've added is they've added APIs at the hardware abstraction layer and the device manufacturer for",
    "start": "1041520",
    "end": "1048319"
  },
  {
    "text": "whichever reason either does or doesn't support those additional APIs but they're they have to do with the",
    "start": "1048319",
    "end": "1053760"
  },
  {
    "text": "hardware it's not something that they added in the Android stack so that it just magically gets turned on for all devices it's a good question",
    "start": "1053760",
    "end": "1061640"
  },
  {
    "text": "though okay so let's talk a little bit about the actual APIs here so we're just going",
    "start": "1061640",
    "end": "1067679"
  },
  {
    "start": "1063000",
    "end": "1283000"
  },
  {
    "text": "to walk through some of the code uh that you would be using if you were going to build some of these in your application",
    "start": "1067679",
    "end": "1073200"
  },
  {
    "text": "so regardless of where you're headed the class that you're going to start with is always going to be a Bluetooth adapter",
    "start": "1073200",
    "end": "1079760"
  },
  {
    "text": "okay now there's a couple different code paths on this diagram here so the red",
    "start": "1079760",
    "end": "1084960"
  },
  {
    "text": "code path that I've got on the left hand side is the way that you would do BLE scanning in Jellybean and Kit Kat and",
    "start": "1084960",
    "end": "1091919"
  },
  {
    "text": "then the green path over there on the other side is the way that we do BLE scanning in the new APIs using Lollipop",
    "start": "1091919",
    "end": "1099559"
  },
  {
    "text": "okay now the old APIs do still work so it's not like you have to run out and branch your code just so that you can",
    "start": "1099559",
    "end": "1105919"
  },
  {
    "text": "support BLE on the latest release if you use the older APIs they've been shimmed into the newer ones so that they work",
    "start": "1105919",
    "end": "1112480"
  },
  {
    "text": "appropriately but you're going to lose some of the additional features like the filtering and the batching and some of",
    "start": "1112480",
    "end": "1118000"
  },
  {
    "text": "those other things when they're available um but the basics are either directly from the Bluetooth adapter in",
    "start": "1118000",
    "end": "1124080"
  },
  {
    "text": "the older case you would start an LE scan with a reference to a call back and that call back would just be handed a",
    "start": "1124080",
    "end": "1130799"
  },
  {
    "text": "new device every time one that was advertising was picked up by the scanner",
    "start": "1130799",
    "end": "1135919"
  },
  {
    "text": "um they've moved that into a new class in Lollipop called a Bluetoothle scanner",
    "start": "1135919",
    "end": "1141280"
  },
  {
    "text": "it works effectively the same way but now instead of talking to the adapter you get a scanner from the adapter and",
    "start": "1141280",
    "end": "1147120"
  },
  {
    "text": "then you call scan on that okay but other than that the APIs are roughly the same in either case there's still a scan",
    "start": "1147120",
    "end": "1153200"
  },
  {
    "text": "call back and the result of that call back is going to be a Bluetooth device",
    "start": "1153200",
    "end": "1158559"
  },
  {
    "text": "so Bluetooth device is just a reference to whatever remote device was found you can have the name the address and some",
    "start": "1158559",
    "end": "1164400"
  },
  {
    "text": "other basic information that was advertised about that device during the scan okay doesn't mean that you're",
    "start": "1164400",
    "end": "1170000"
  },
  {
    "text": "connected to anything at this point if you you need to make additional steps if you want to start communicating with",
    "start": "1170000",
    "end": "1175280"
  },
  {
    "text": "that actual device is there any backward compatibility library for some of the filtration and stuff",
    "start": "1175280",
    "end": "1181360"
  },
  {
    "text": "like that uh as far as I know they're not planning on doing anything like that and there aren't any existing support",
    "start": "1181360",
    "end": "1186799"
  },
  {
    "text": "APIs to do that now so we have to support both yeah so the idea is I think the simplest way to solve that problem",
    "start": "1186799",
    "end": "1192640"
  },
  {
    "text": "for now is to use the older APIs if you have a if you have a use case for the",
    "start": "1192640",
    "end": "1198880"
  },
  {
    "text": "newer stuff then you at this point you would need to fork your code to support that on newer versions only but the",
    "start": "1198880",
    "end": "1205280"
  },
  {
    "text": "older stuff works fine and you can see just looking at the log messages on the device calling the older APIs on a",
    "start": "1205280",
    "end": "1212000"
  },
  {
    "text": "Lollipop device do trigger through a real scanner so they're calling the new stuff you just have no way to insert a",
    "start": "1212000",
    "end": "1217440"
  },
  {
    "text": "filter okay now if you're working in a beacon",
    "start": "1217440",
    "end": "1223200"
  },
  {
    "text": "type application broadcasters observers that sort of thing that's kind of it that's really all there is to it you",
    "start": "1223200",
    "end": "1228480"
  },
  {
    "text": "know there's advertising and scanning and once you've scanned for the devices and read the advertisement data you're",
    "start": "1228480",
    "end": "1233520"
  },
  {
    "text": "done you wait for another advertisement and and move on but if we're talking about clients and peripherals here then",
    "start": "1233520",
    "end": "1239679"
  },
  {
    "text": "we need to move a little bit further down the line so once we find a device",
    "start": "1239679",
    "end": "1244880"
  },
  {
    "text": "that we want to connect to so this is looking from the client side or the the central side um once that scanning",
    "start": "1244880",
    "end": "1251840"
  },
  {
    "text": "device has found the remote it's interested in then it will take that Bluetooth device call the connect gat",
    "start": "1251840",
    "end": "1258799"
  },
  {
    "text": "method on it now there's a difference there because the Bluetooth device also has a connect method that's used for the",
    "start": "1258799",
    "end": "1264400"
  },
  {
    "text": "old Bluetooth classic stuff so it's something different than what we're talking about today um the connect GAT method and of course pass that a call",
    "start": "1264400",
    "end": "1271520"
  },
  {
    "text": "back will give you a reference to a Bluetooth GAT instance and once you have one of those you're connected to that",
    "start": "1271520",
    "end": "1278000"
  },
  {
    "text": "device and you can start reading and writing services and characteristics okay so from the Bluetooth gat we can",
    "start": "1278000",
    "end": "1284799"
  },
  {
    "text": "enumerate a number of pieces of information about that remote device we can get any one of the Bluetooth gat",
    "start": "1284799",
    "end": "1291440"
  },
  {
    "text": "services that are enumerated you can either list them all or you can get a specific one by its UYU ID and then from",
    "start": "1291440",
    "end": "1298640"
  },
  {
    "text": "a service we can enumerate all of its characteristics again get them all or get a specific one by ID uh and then",
    "start": "1298640",
    "end": "1304559"
  },
  {
    "text": "from characteristics descriptors descriptors is is another lower level discussion that we we probably won't get",
    "start": "1304559",
    "end": "1310240"
  },
  {
    "text": "into much it's just another layer of segmenting data characteristics can have multiple descriptors they're basically",
    "start": "1310240",
    "end": "1315760"
  },
  {
    "text": "just like properties okay um all of that information is actually",
    "start": "1315760",
    "end": "1322480"
  },
  {
    "text": "uh given to us as part of the connection event so we can query all of that without having to do anything",
    "start": "1322480",
    "end": "1327919"
  },
  {
    "text": "asynchronous with the remote device soon as we're connected to it we can get service and characteristics information",
    "start": "1327919",
    "end": "1333760"
  },
  {
    "text": "synchronously uh without any waiting but if we want to start communicating with the actual device then this is an",
    "start": "1333760",
    "end": "1341039"
  },
  {
    "text": "asynchronous process so the with that connect gat method that we had to",
    "start": "1341039",
    "end": "1346320"
  },
  {
    "text": "initially deal with we pass it a gat call back and that callback instance is",
    "start": "1346320",
    "end": "1351440"
  },
  {
    "text": "responsible for triggering all of the events once the remote device has responded to whatever our request is so",
    "start": "1351440",
    "end": "1358720"
  },
  {
    "text": "if it's a Bluetooth if it's a characteristic read or write if it's a descriptor read or write that we would",
    "start": "1358720",
    "end": "1364480"
  },
  {
    "text": "make that request of the GAT object and then sometime later the GAT callback",
    "start": "1364480",
    "end": "1369760"
  },
  {
    "text": "would trigger an onch characteristic read or write or you know to tell us whether that succeeded or failed and",
    "start": "1369760",
    "end": "1374880"
  },
  {
    "text": "what the value was okay now there's an additional layer in here that I didn't mention earlier um for notifications so",
    "start": "1374880",
    "end": "1382480"
  },
  {
    "text": "this green path that's in here uh has to do with characteristic notifications and that's actually a really helpful feature",
    "start": "1382480",
    "end": "1390080"
  },
  {
    "text": "if you need to subscribe to a characteristics's value so uh inside of",
    "start": "1390080",
    "end": "1395559"
  },
  {
    "text": "Bluetoothle if you are interested in a specific characteristic and you want to get the contents of that value on a",
    "start": "1395559",
    "end": "1402000"
  },
  {
    "text": "regular basis and you want to know anytime that value changes so that you can update something on your side the",
    "start": "1402000",
    "end": "1407280"
  },
  {
    "text": "way that that's done is by subscribing to that characteristic with something called a notification so in the APIs the",
    "start": "1407280",
    "end": "1415440"
  },
  {
    "text": "idea is that from your Bluetooth GAT you would simply ask the framework to set characteristic notification true on that",
    "start": "1415440",
    "end": "1422960"
  },
  {
    "text": "specific characteristic and then anytime this any whatever GAT server you're connected to anytime that peripheral",
    "start": "1422960",
    "end": "1429760"
  },
  {
    "text": "publishes a change to that characteristic you'll just get a notification and you can update on your site you don't have to keep calling read",
    "start": "1429760",
    "end": "1436080"
  },
  {
    "text": "and some sort of a polling loop or anything like that okay now there are some caveats on doing that we'll talk about them in a little bit but generally",
    "start": "1436080",
    "end": "1442320"
  },
  {
    "text": "speaking if you're interested in some value like say a temperature on a thermometer and you want to update the UI every time it changes you would",
    "start": "1442320",
    "end": "1448799"
  },
  {
    "text": "probably subscribe to it with a notification okay now the only difference there is that uh the callback",
    "start": "1448799",
    "end": "1454960"
  },
  {
    "text": "there is going to be on characteristic changed instead of on characteristic red okay but other than that it's the same",
    "start": "1454960",
    "end": "1462720"
  },
  {
    "text": "path all right so advertising this is some of the new stuff from Lollipop so if you have a device that supports",
    "start": "1463159",
    "end": "1469400"
  },
  {
    "start": "1464000",
    "end": "1585000"
  },
  {
    "text": "advertising checking with that method that we mentioned earlier um you can get an instance of Bluetoothle scanner's",
    "start": "1469400",
    "end": "1476240"
  },
  {
    "text": "cousin the Bluetooth advertiser again from the adapter um and Bluetoothle advertiser allows you to start an",
    "start": "1476240",
    "end": "1483000"
  },
  {
    "text": "advertisement using two pieces of information the advertised data and the advertised settings the advertised data",
    "start": "1483000",
    "end": "1489360"
  },
  {
    "text": "is essentially the packet that you want to transmit from this device as the advertisement so and you these have",
    "start": "1489360",
    "end": "1495679"
  },
  {
    "text": "builder classes associated with them so you can define exactly what you want in it you know do I want to include the",
    "start": "1495679",
    "end": "1500720"
  },
  {
    "text": "device name include the transmit power level of my device all these pieces that you want to add up keeping in mind that",
    "start": "1500720",
    "end": "1507360"
  },
  {
    "text": "advertisement packets are limited in size i mentioned before they're about 27 bytes and the framework will tell you if",
    "start": "1507360",
    "end": "1514960"
  },
  {
    "text": "you've built an advertise data that is too big to fit in that packet when you attempt to advertise you'll get an error",
    "start": "1514960",
    "end": "1520880"
  },
  {
    "text": "code that says advertise data too large or something like that um so you have to you have to play around with this a",
    "start": "1520880",
    "end": "1526640"
  },
  {
    "text": "little bit and make sure that the data you're trying to stuff in will actually fit okay um and then in addition to that",
    "start": "1526640",
    "end": "1532880"
  },
  {
    "text": "you give it the settings which really just defines what transmit power you want to use which is basically just",
    "start": "1532880",
    "end": "1538960"
  },
  {
    "text": "defining how how much distance you want to be able to cover with the with the advertisement whether or not the device",
    "start": "1538960",
    "end": "1544559"
  },
  {
    "text": "should be connectable so this is going to be different whether you're talking about a peripheral situation versus a beacon or a broadcaster uh the timeout",
    "start": "1544559",
    "end": "1551919"
  },
  {
    "text": "associated with it if you ignore the timeout you can just broadcast or uh advertise continuously until you decide",
    "start": "1551919",
    "end": "1558400"
  },
  {
    "text": "to stop or you can set a timeout that says only advertise for say the next 30 seconds and then the framework will shut",
    "start": "1558400",
    "end": "1563679"
  },
  {
    "text": "that down for you okay uh and then a latency mode which is really just a a couple constants to define the",
    "start": "1563679",
    "end": "1569760"
  },
  {
    "text": "difference between low power versus low latency which is really just how often do you want to advertise low latency is",
    "start": "1569760",
    "end": "1575200"
  },
  {
    "text": "going to be advertising very quickly maybe even multiple times a second whereas low power is going to be much much less often",
    "start": "1575200",
    "end": "1583840"
  },
  {
    "text": "okay all right now if you are using the older APIs I figured I would leave this",
    "start": "1584919",
    "end": "1590400"
  },
  {
    "start": "1585000",
    "end": "1664000"
  },
  {
    "text": "slide in just for you folks um you may still find yourself having to parse scan",
    "start": "1590400",
    "end": "1596080"
  },
  {
    "text": "record data manually so I wanted to just briefly go over what that is so this is the method that's in the scan callback",
    "start": "1596080",
    "end": "1602400"
  },
  {
    "text": "that you would see on the Jelly Bean or Kit Kat APIs whenever a new device is picked up by a scan and notice that we",
    "start": "1602400",
    "end": "1609279"
  },
  {
    "text": "have the device the receive signal and this raw bite array that represents the advertisement data called the scan",
    "start": "1609279",
    "end": "1614960"
  },
  {
    "text": "record now in those releases we didn't have any classes to parse them so you have to manually chunk through it",
    "start": "1614960",
    "end": "1620960"
  },
  {
    "text": "yourself really all this data is is it's just an array of these advertisement data structures which are just these",
    "start": "1620960",
    "end": "1627840"
  },
  {
    "text": "little payloads consisting of a length type and then a variable payload of whatever the length was defined in the",
    "start": "1627840",
    "end": "1634080"
  },
  {
    "text": "first one so it's fairly easy to parse through you just have to realize what's in there and do it yourself and the",
    "start": "1634080",
    "end": "1639600"
  },
  {
    "text": "types themselves are defined again by the Bluetooth sig and each type identifier will be device name service",
    "start": "1639600",
    "end": "1646320"
  },
  {
    "text": "UU IDs you know all those pieces that we talked about before you could stick in one you just have to go through the process of chunking them out yourself i",
    "start": "1646320",
    "end": "1653200"
  },
  {
    "text": "won't probably be going through it today but in the example repo that I've given you there is a sample parser for",
    "start": "1653200",
    "end": "1658799"
  },
  {
    "text": "chunking through those things that was used back in the older APIs to do some of these examples",
    "start": "1658799",
    "end": "1665679"
  },
  {
    "text": "okay all right so then just a couple things that are good to know that you",
    "start": "1665960",
    "end": "1672159"
  },
  {
    "text": "probably won't see in the documentation anywhere um there are a couple hard constants that are defined inside the",
    "start": "1672159",
    "end": "1678799"
  },
  {
    "text": "blue droid stra and these have evolved a little bit over time so it's interesting to note based on the version you're",
    "start": "1678799",
    "end": "1684799"
  },
  {
    "text": "trying to support as well uh the first is that there is a constant defined for the maximum number of concurrent",
    "start": "1684799",
    "end": "1690880"
  },
  {
    "text": "notifications you can be registered for so as a client you can only register for",
    "start": "1690880",
    "end": "1696480"
  },
  {
    "text": "a maximum of four concurrent notifications that means you can be registered or subscribed to four",
    "start": "1696480",
    "end": "1702240"
  },
  {
    "text": "different characteristics to be notified on you know for any given event that number was four in Jellybean it was",
    "start": "1702240",
    "end": "1708960"
  },
  {
    "text": "increased to seven in KitKat and as of the Lollipop release they've bumped it up to 15 okay so depending on which",
    "start": "1708960",
    "end": "1716320"
  },
  {
    "text": "Android version you're running on your device may fail to subscribe for a notification if you've already hit that",
    "start": "1716320",
    "end": "1722799"
  },
  {
    "text": "limit okay so just something to keep in mind then additionally to that there's",
    "start": "1722799",
    "end": "1728159"
  },
  {
    "text": "another constant they've defined which is the maximum number of connections so as a client I can connect to mult",
    "start": "1728159",
    "end": "1734799"
  },
  {
    "text": "multiple peripherals at the same time i can connect to this device then scan and connect to another one without having to",
    "start": "1734799",
    "end": "1740399"
  },
  {
    "text": "disconnect from the other that maximum again has been a bit variable it was started out as four in Jellybean evolved",
    "start": "1740399",
    "end": "1747440"
  },
  {
    "text": "to seven in KitKat but this one has stayed there so even in Lollipop seven is still the maximum number of devices",
    "start": "1747440",
    "end": "1753840"
  },
  {
    "text": "you can connect to at any one time if you wanted to connect to another device you'd have to disconnect from another",
    "start": "1753840",
    "end": "1759520"
  },
  {
    "text": "one first question those",
    "start": "1759520",
    "end": "1764559"
  },
  {
    "text": "limited software limits",
    "start": "1766279",
    "end": "1772039"
  },
  {
    "text": "sure so the question was are those software those are software limits is there anything in hardware uh the answer",
    "start": "1773600",
    "end": "1778799"
  },
  {
    "text": "is not as far as I know so you're right that those limits are they're hard-coded constants in the Bluetooth stack now",
    "start": "1778799",
    "end": "1785279"
  },
  {
    "text": "because of that and because they're not in any of the hardware abstraction pieces they're going to be the same on",
    "start": "1785279",
    "end": "1790799"
  },
  {
    "text": "every device so this doesn't mean that these are numbers that manufacturers can define based on whatever you know piece",
    "start": "1790799",
    "end": "1796960"
  },
  {
    "text": "of hardware they've chosen to implement their Bluetooth on they will be consistent but they are defined in",
    "start": "1796960",
    "end": "1802480"
  },
  {
    "text": "software and as far as I know they're not defined that way because of any specific hardware limitations i'm not",
    "start": "1802480",
    "end": "1808080"
  },
  {
    "text": "really sure why they chose those numbers but that's the numbers that are in the stack for sure good question one more",
    "start": "1808080",
    "end": "1814320"
  },
  {
    "text": "question is that for the platform i mean if there's another app running and it has connections so is it is it at the",
    "start": "1814320",
    "end": "1820720"
  },
  {
    "text": "platform level that's a good That's a good question the question was is that at the platform level or per app that is",
    "start": "1820720",
    "end": "1825919"
  },
  {
    "text": "for the entire stack yes good question okay yes one",
    "start": "1825919",
    "end": "1833960"
  },
  {
    "text": "more coales ask the question again i didn't quite",
    "start": "1833960",
    "end": "1839520"
  },
  {
    "text": "hear the last part",
    "start": "1839520",
    "end": "1842840"
  },
  {
    "text": "good question so does does the system coales filters together the answer is it's up to the device manufacturer u",
    "start": "1846880",
    "end": "1852880"
  },
  {
    "text": "because that specific piece that they've added in Lollipop is is part of the hardware abstraction layer so it's up to",
    "start": "1852880",
    "end": "1859200"
  },
  {
    "text": "each manufacturer to implement their their how driver essentially um as to how they would manage that on chip so",
    "start": "1859200",
    "end": "1866399"
  },
  {
    "text": "some might some might not it's up to them good question okay",
    "start": "1866399",
    "end": "1873320"
  },
  {
    "start": "1871000",
    "end": "2190000"
  },
  {
    "text": "so let's jump into some of the",
    "start": "1873320",
    "end": "1877759"
  },
  {
    "text": "examples all right so I've got a couple examples to show you and what I'll probably do is show you the example",
    "start": "1881880",
    "end": "1887919"
  },
  {
    "text": "first and then we'll walk through the code so let me switch over",
    "start": "1887919",
    "end": "1893440"
  },
  {
    "text": "here okay so the first example that I'm going to show you um is I have one in my",
    "start": "1897080",
    "end": "1902720"
  },
  {
    "text": "hand and a couple around the room these little key fob beacon devices um these are made by a company near us called KST",
    "start": "1902720",
    "end": "1909760"
  },
  {
    "text": "and this is just a it's a simple little temperature sensing beacon so it has a temperature sensor on it and it",
    "start": "1909760",
    "end": "1915200"
  },
  {
    "text": "advertises that temperature value constantly so that we can read that back from other devices and I've got them",
    "start": "1915200",
    "end": "1920480"
  },
  {
    "text": "around the room and I've got one up here so I've got a little Android application that I will bring on screen",
    "start": "1920480",
    "end": "1927440"
  },
  {
    "text": "for you that simply broadcast or simply goes out and scans for these devices and then",
    "start": "1927440",
    "end": "1934559"
  },
  {
    "text": "displays them in a list here now this is just it's constantly scanning and as the advertisements come in we'll see the the",
    "start": "1934559",
    "end": "1941919"
  },
  {
    "text": "data inside of this list update so it just displays the device name the temperature value that was advertised in",
    "start": "1941919",
    "end": "1947679"
  },
  {
    "text": "the packet and the device address and some other information and the the coloring is based on the temperature so",
    "start": "1947679",
    "end": "1953440"
  },
  {
    "text": "as the number gets higher it gets closer to red and closer to bleed because I'm a great UI designer and that's the way I",
    "start": "1953440",
    "end": "1958799"
  },
  {
    "text": "put it together um so this is a basic example of monitoring other beacon",
    "start": "1958799",
    "end": "1965600"
  },
  {
    "text": "devices that are advertising their data but what I can add to this is if I flip",
    "start": "1965600",
    "end": "1970640"
  },
  {
    "text": "on my Nexus 9 here now you all know my password um I",
    "start": "1970640",
    "end": "1976240"
  },
  {
    "text": "can flip on another example that I have here which is an advertiser and as soon as I do that you see the Nexus 9 shows",
    "start": "1976240",
    "end": "1982880"
  },
  {
    "text": "up in this list as well so the Nexus 9 is I have another application that I've",
    "start": "1982880",
    "end": "1987919"
  },
  {
    "text": "coded to do the same advertising packet format as these little beacons the only",
    "start": "1987919",
    "end": "1993039"
  },
  {
    "text": "difference is I've wrote a little app that I can control whatever the fake temperature is and every time I hit the update button it will change the you",
    "start": "1993039",
    "end": "2000159"
  },
  {
    "text": "know change what that advertisement is to the new data uh I can",
    "start": "2000159",
    "end": "2005880"
  },
  {
    "text": "try let's see if autofocus works i may not be able",
    "start": "2005880",
    "end": "2013518"
  },
  {
    "text": "to is that better or worse",
    "start": "2015640",
    "end": "2020279"
  },
  {
    "text": "yeah right well we'll have to stick with that sorry um what so if because of the",
    "start": "2022159",
    "end": "2029440"
  },
  {
    "text": "focus which you may or may not be able to read those of you up close may be able to see it but as I change this",
    "start": "2029440",
    "end": "2035760"
  },
  {
    "text": "value not only does the temperature value change but the device address is",
    "start": "2035760",
    "end": "2042960"
  },
  {
    "text": "actually going to change too u and you'll see why that's the case inside of the code but it turns out that every",
    "start": "2042960",
    "end": "2052320"
  },
  {
    "text": "time the every time we restart a new advertisement with the new APIs it",
    "start": "2052320",
    "end": "2057839"
  },
  {
    "text": "actually uses MAC address randomization so it doesn't use a hardware MAC address generates a new one so every time I",
    "start": "2057839",
    "end": "2064800"
  },
  {
    "text": "start a new advertisement it will generate a new address something that's very important to realize if you're expecting that to be the same on every",
    "start": "2064800",
    "end": "2070800"
  },
  {
    "text": "device um don't know i mean beacon devices use that as a",
    "start": "2070800",
    "end": "2078158"
  },
  {
    "text": "security mechanism but they tend to do that in a pattern you like there are some beacons that will randomize their",
    "start": "2078159",
    "end": "2083358"
  },
  {
    "text": "MAC address but they do it every so often this only happens when I manually start and stop a new advertisement so I",
    "start": "2083359",
    "end": "2088720"
  },
  {
    "text": "think it's just part of a new advertisement gets a new instance and moves on from there yeah yeah i think so",
    "start": "2088720",
    "end": "2097118"
  },
  {
    "text": "yes for instance does",
    "start": "2097119",
    "end": "2105320"
  },
  {
    "text": "well my phone does but it's because I'm looking for the device name so the in this in this specific case I can rely on",
    "start": "2106560",
    "end": "2113359"
  },
  {
    "text": "the device name as the only exact unique piece that I'll get in every",
    "start": "2113359",
    "end": "2119160"
  },
  {
    "text": "advertisement okay so let me flip over to the code and we'll see how that works",
    "start": "2119160",
    "end": "2128359"
  },
  {
    "text": "doesn't take a way to detect distance is there um yes and no so one of the pieces the",
    "start": "2130240",
    "end": "2137200"
  },
  {
    "text": "question was is there a way to detect distance um one of the pieces of information that you put inside of an",
    "start": "2137200",
    "end": "2142640"
  },
  {
    "text": "advertisement is the transmit power level the reason that they do that is so you can do some basic calculations",
    "start": "2142640",
    "end": "2149599"
  },
  {
    "text": "between transmit power and the received signal strength to try and make a rough determination of distance now obviously",
    "start": "2149599",
    "end": "2156560"
  },
  {
    "text": "all the factors between is it through a wall you know is it rainy out all that stuff is going to give you not allow you",
    "start": "2156560",
    "end": "2162160"
  },
  {
    "text": "to get an exact number but the the RSSI by itself is not enough you have to know",
    "start": "2162160",
    "end": "2167599"
  },
  {
    "text": "the transmit power to be able to figure out the difference and so in proximity based BLO uh situations those have the",
    "start": "2167599",
    "end": "2175280"
  },
  {
    "text": "transmit power defined in their advertisement so they can do that math the uh the beacons that are made by the",
    "start": "2175280",
    "end": "2181920"
  },
  {
    "text": "Certino fruit company essentially that's how they're they're near far that type of stuff works it's based off of that",
    "start": "2181920",
    "end": "2188280"
  },
  {
    "text": "difference good question okay so let's start with the scanning piece",
    "start": "2188280",
    "end": "2196800"
  },
  {
    "start": "2190000",
    "end": "2205000"
  },
  {
    "text": "and I'll show you both pieces here open up some classes so I can take",
    "start": "2196800",
    "end": "2202000"
  },
  {
    "text": "that off all right so first thing to realize",
    "start": "2202000",
    "end": "2207880"
  },
  {
    "start": "2205000",
    "end": "2265000"
  },
  {
    "text": "is when you're working with these APIs they're not going to be supported on every device so you're going to want to",
    "start": "2207880",
    "end": "2213680"
  },
  {
    "text": "make sure that if nothing else inside of your applications manifest you declare",
    "start": "2213680",
    "end": "2219200"
  },
  {
    "text": "whether or not you require use of hard of Bluetooth LE and you can do that using one of these standard uses feature",
    "start": "2219200",
    "end": "2225520"
  },
  {
    "text": "declarations that you know we've used a million times before um defining whether or not it should be required now in this",
    "start": "2225520",
    "end": "2232320"
  },
  {
    "text": "case because this is required this means that u places like the play store are going to filter out my app from devices",
    "start": "2232320",
    "end": "2238640"
  },
  {
    "text": "that don't have these features right so I get some assistance there um if you don't want to force that level you can",
    "start": "2238640",
    "end": "2244960"
  },
  {
    "text": "always do this as a non-required check and you can check at runtime if you just want to disable certain portions of your",
    "start": "2244960",
    "end": "2250960"
  },
  {
    "text": "application based on whether or not that support exists i'll show you that code in a minute um you're also going to need",
    "start": "2250960",
    "end": "2256079"
  },
  {
    "text": "to make sure that you have the Bluetooth and the Bluetooth admin permission you're not going to be able to do pretty much any of this without both of those",
    "start": "2256079",
    "end": "2263880"
  },
  {
    "text": "okay all right so first piece that we'll look at here this is the again this is",
    "start": "2263880",
    "end": "2269359"
  },
  {
    "start": "2265000",
    "end": "2350000"
  },
  {
    "text": "the scanning device so this is the one I had running on the handset that was going out and looking for the different",
    "start": "2269359",
    "end": "2275079"
  },
  {
    "text": "beacons so a couple of pieces that we're going to need um we're going to need our Bluetooth adapter bluetooth adapter",
    "start": "2275079",
    "end": "2281839"
  },
  {
    "text": "always comes from the Bluetooth manager system service okay so we just we get service we get the adapter and in",
    "start": "2281839",
    "end": "2287920"
  },
  {
    "text": "Lollipop's case we get a reference to that scanner from the adapter okay so those are the pieces we're just going to",
    "start": "2287920",
    "end": "2293920"
  },
  {
    "text": "need to have hold on to then to do some basic checking here",
    "start": "2293920",
    "end": "2299599"
  },
  {
    "text": "anytime we move into the foreground in this app I'm going to verify that this device has the support it needs first so",
    "start": "2299599",
    "end": "2305599"
  },
  {
    "text": "the first thing I'm going to make sure is is Bluetooth even on okay so just basic check about whether I got an",
    "start": "2305599",
    "end": "2310960"
  },
  {
    "text": "adapter or whether the adapter says things are enabled um if neither of those are the case the framework",
    "start": "2310960",
    "end": "2316240"
  },
  {
    "text": "provides an intent you can fire the user into settings to turn Bluetooth on first okay because otherwise none of this is",
    "start": "2316240",
    "end": "2322560"
  },
  {
    "text": "going to work um then additionally if you wanted to check for Bluetoothle support at runtime you could do that by",
    "start": "2322560",
    "end": "2330880"
  },
  {
    "text": "asking the package manager for that feature this does the same check as what I put in the manifest this is just doing",
    "start": "2330880",
    "end": "2336079"
  },
  {
    "text": "it at runtime if you maybe didn't want this to be a hard check maybe you just want to shut off this part of your app",
    "start": "2336079",
    "end": "2341760"
  },
  {
    "text": "then you could do it this way instead okay and then we're just going to start a scan so as long as this app is in the",
    "start": "2341760",
    "end": "2348240"
  },
  {
    "text": "foreground it is scanning and the way that this works is our",
    "start": "2348240",
    "end": "2354400"
  },
  {
    "text": "Bluetooth LE scanner just takes these three pieces of information that to define what the scan should be so it's",
    "start": "2354400",
    "end": "2360640"
  },
  {
    "text": "the scan filter the scan settings and the callback okay so the scan filter",
    "start": "2360640",
    "end": "2366400"
  },
  {
    "text": "defines any information that we want to tell the framework these are the specific devices I'm interested in i",
    "start": "2366400",
    "end": "2372960"
  },
  {
    "text": "could add things like device name and other pieces in there as well all I'm interested in is I only want you to give",
    "start": "2372960",
    "end": "2379839"
  },
  {
    "text": "me devices that advertise that one service that I was talking about which has the temperature data in it okay",
    "start": "2379839",
    "end": "2386000"
  },
  {
    "text": "which is what all these beacons do all these beacons advertise that temperature data inside of a thermometer service and",
    "start": "2386000",
    "end": "2392400"
  },
  {
    "text": "so I have that UU ID for that service defined as a constant somewhere and then that that information",
    "start": "2392400",
    "end": "2400079"
  },
  {
    "text": "I only want devices that are advertising that specific service and then the",
    "start": "2400079",
    "end": "2405440"
  },
  {
    "text": "settings are used to define the the data about the scan you know should I do a low latency scan a low power scan um you",
    "start": "2405440",
    "end": "2413040"
  },
  {
    "text": "know that type of information so that I can a low latency scan is going to pick up devices much quicker but I'm",
    "start": "2413040",
    "end": "2418400"
  },
  {
    "text": "obviously only going to want to do that if I'm in the foreground a low power scan would be the type of scan that I could run and then the user could leave",
    "start": "2418400",
    "end": "2424960"
  },
  {
    "text": "the app shut down their device and and the scan could still run safely without completely destroying the battery okay",
    "start": "2424960",
    "end": "2430640"
  },
  {
    "text": "so there's a couple different options in there that you can pick from uh and then the call back is just where you're going",
    "start": "2430640",
    "end": "2436240"
  },
  {
    "text": "to get more information as the scan progresses so we start the scan and then the information will come inside of this",
    "start": "2436240",
    "end": "2443440"
  },
  {
    "start": "2440000",
    "end": "2480000"
  },
  {
    "text": "callback now there's one of two options there's scan result and there's batch scan results so I mentioned that if in",
    "start": "2443440",
    "end": "2449760"
  },
  {
    "text": "the scan settings I had enabled batching the way that I do that is by telling it to delay scans by a certain amount of",
    "start": "2449760",
    "end": "2455839"
  },
  {
    "text": "time and that tells the framework that it can batch results up to that amount and then deliver them all at once um if",
    "start": "2455839",
    "end": "2462000"
  },
  {
    "text": "I had done that then the callbacks would come in here as a group um but in this application it turns out they all end up",
    "start": "2462000",
    "end": "2467520"
  },
  {
    "text": "coming through individually one at a time while we're in the foreground um so each one of these scan results has a",
    "start": "2467520",
    "end": "2474720"
  },
  {
    "text": "fully nicely parsed scan result object that I can look at no more raw bite arrays",
    "start": "2474720",
    "end": "2480960"
  },
  {
    "start": "2480000",
    "end": "2540000"
  },
  {
    "text": "and so inside of this little helper I've created I basically just take the scan",
    "start": "2480960",
    "end": "2486160"
  },
  {
    "text": "record from that advertisement and I construct another model object for it i just call it a temperature beacon so I",
    "start": "2486160",
    "end": "2493520"
  },
  {
    "text": "can jump into the beacon real quick and we can see that really all this is is just a piece of data that holds the",
    "start": "2493520",
    "end": "2499520"
  },
  {
    "text": "receive signal address device name and the current temperature value and so those values are pulled out of that scan",
    "start": "2499520",
    "end": "2506640"
  },
  {
    "text": "record again I can get them very nicely from the framework by saying I would like the device name please i would like",
    "start": "2506640",
    "end": "2511760"
  },
  {
    "text": "the service data associated with that UU ID and it does all the work of parsing through the bite array finding the right",
    "start": "2511760",
    "end": "2517440"
  },
  {
    "text": "chunk and returning back the value that I need okay so that's all done for us now this the structure of the service",
    "start": "2517440",
    "end": "2524960"
  },
  {
    "text": "data in this case is custom right like it it's not defined by the Bluetooth SIG or anything it's defined by the guys",
    "start": "2524960",
    "end": "2530960"
  },
  {
    "text": "over at KST that made these things they basically said that inside of their advertisement for this service the the",
    "start": "2530960",
    "end": "2538079"
  },
  {
    "text": "value for the temperature will just be a two byte packet basically will be the",
    "start": "2538079",
    "end": "2543200"
  },
  {
    "start": "2540000",
    "end": "2570000"
  },
  {
    "text": "degrees in Celsius where the high bite is the actual degree and the low bite will be zero or one based on whether or",
    "start": "2543200",
    "end": "2548720"
  },
  {
    "text": "not it's zero or 0.5 they only have half a degree resolution on their temperature sensor okay so they define that they",
    "start": "2548720",
    "end": "2554720"
  },
  {
    "text": "tell me what it is i put it in okay if we were building an application around an adopted profile we would get all that",
    "start": "2554720",
    "end": "2561440"
  },
  {
    "text": "data out of the profile spec from the Bluetooth SIG okay",
    "start": "2561440",
    "end": "2567640"
  },
  {
    "text": "the the advertisement data record is 27 bytes yeah so the idea is that the entire",
    "start": "2567760",
    "end": "2574800"
  },
  {
    "start": "2570000",
    "end": "2620000"
  },
  {
    "text": "advertisement is 27 bytes um what you fill it up with is is not really defined",
    "start": "2574800",
    "end": "2580960"
  },
  {
    "text": "so if you only had that one element in your ad data it could be 27 bytes of service data if you added the device",
    "start": "2580960",
    "end": "2587359"
  },
  {
    "text": "name that would truncate how much space you had so it doesn't really matter each one doesn't have a specific space as",
    "start": "2587359",
    "end": "2592800"
  },
  {
    "text": "long as the sum total of them is not larger than the packet size um you know I have not done testing to",
    "start": "2592800",
    "end": "2599520"
  },
  {
    "text": "know how quickly Android advertises on the low latency mode basically you set it to low latency and that advertises as",
    "start": "2599520",
    "end": "2606400"
  },
  {
    "text": "fast as Android is willing um my guess is it's definitely more than a few times a second but I haven't actually timed it",
    "start": "2606400",
    "end": "2612880"
  },
  {
    "text": "yet they don't they don't document what that actually is so good",
    "start": "2612880",
    "end": "2618520"
  },
  {
    "text": "question okay so we're just taking this data out of every advertisement we get and then we're just throwing it into",
    "start": "2618520",
    "end": "2624319"
  },
  {
    "text": "that list that you saw in the UI and every time I get a new advertisement I just replace that existing element in",
    "start": "2624319",
    "end": "2629359"
  },
  {
    "text": "the list and and update it so you can see the result",
    "start": "2629359",
    "end": "2634599"
  },
  {
    "text": "now something to point out here and this is true kind of across all of the Bluetooth LE callbacks but the um none",
    "start": "2634800",
    "end": "2642880"
  },
  {
    "start": "2635000",
    "end": "2685000"
  },
  {
    "text": "of these callbacks will come to you on the UI thread okay so if you want to do",
    "start": "2642880",
    "end": "2648000"
  },
  {
    "text": "anything in a scan call back a gat call back anything if you want to do anything touching the UI you're going to have to",
    "start": "2648000",
    "end": "2653760"
  },
  {
    "text": "post that result using a handler or some other mechanism to get that onto the main thread before you try to touch a",
    "start": "2653760",
    "end": "2659520"
  },
  {
    "text": "view okay so for instance in this case I'm taking that data and I'm sticking it",
    "start": "2659520",
    "end": "2664960"
  },
  {
    "text": "into my list adapter that I created but I have to do that by posting a message to a handler on the main thread i can't",
    "start": "2664960",
    "end": "2671200"
  },
  {
    "text": "do that directly inside of my scan result callback it will fail okay it'll",
    "start": "2671200",
    "end": "2676560"
  },
  {
    "text": "tell me that I'm I can't touch a view because I'm on the wrong thread and all that fun stuff we've seen a million",
    "start": "2676560",
    "end": "2682040"
  },
  {
    "text": "times so just keep that in mind okay questions so far",
    "start": "2682040",
    "end": "2689760"
  },
  {
    "start": "2685000",
    "end": "2795000"
  },
  {
    "text": "yes you're saying there's a software limit of devices",
    "start": "2689760",
    "end": "2696520"
  },
  {
    "text": "correct the stack defines that limit right is there anything in your code that will indicate",
    "start": "2698160",
    "end": "2705079"
  },
  {
    "text": "well essentially the indication is when you attempt to do so you'll get a failure um a failure to get back no no",
    "start": "2706560",
    "end": "2715200"
  },
  {
    "text": "the a failure to make either the the next connection or subscribe to that next notification so that that attempt",
    "start": "2715200",
    "end": "2722319"
  },
  {
    "text": "will fail now I will admit that at least on the connection side the return code is not real obvious to the fact that",
    "start": "2722319",
    "end": "2727920"
  },
  {
    "text": "that's the reason why they just give you a generic failure um that you can't really determine that beyond maybe much",
    "start": "2727920",
    "end": "2734960"
  },
  {
    "text": "any other failure but at that at least that's what you can look for is you attempt to connect to a device and it",
    "start": "2734960",
    "end": "2740079"
  },
  {
    "text": "fails and you'll know internally that's why okay",
    "start": "2740079",
    "end": "2745359"
  },
  {
    "text": "not really no the only failure code there there's only two return codes for that right now there's got success and gat failure hopefully they will add some",
    "start": "2745359",
    "end": "2752240"
  },
  {
    "text": "more as time goes on so if it gone out of re out of range you get the same failure no that would be a",
    "start": "2752240",
    "end": "2758920"
  },
  {
    "text": "disconnect so and we'll we'll talk before you've made the connection well so if if we're talking about a situation",
    "start": "2758920",
    "end": "2766000"
  },
  {
    "text": "like this where there's no connection made then something goes out of range the only thing that's going to happen is you're going to stop seeing the",
    "start": "2766000",
    "end": "2771280"
  },
  {
    "text": "advertisements from that device in a connection case if you're connected to it and it goes out of range you will see",
    "start": "2771280",
    "end": "2776960"
  },
  {
    "text": "a disconnection event or if you try to connect to them and you haven't connected yet at the connection",
    "start": "2776960",
    "end": "2782640"
  },
  {
    "text": "attempt time that would fail and that would be the same error yes as far as I know so you couldn't distinguish whether",
    "start": "2782640",
    "end": "2788079"
  },
  {
    "text": "you hit your max or those other to my knowledge that's correct yes",
    "start": "2788079",
    "end": "2794160"
  },
  {
    "start": "2795000",
    "end": "2835000"
  },
  {
    "text": "okay all right so then just quickly here um this is the same example using the",
    "start": "2796040",
    "end": "2802560"
  },
  {
    "text": "older APIs so this example runs on older devices as well as a new device and if",
    "start": "2802560",
    "end": "2807839"
  },
  {
    "text": "you run it on say a Jellybean or a Kit Kat device it's going to launch this activity instead um excuse me and so the",
    "start": "2807839",
    "end": "2815119"
  },
  {
    "text": "the functionality is pretty much the same i just want to quickly run you through the difference in the API so you can kind of see it if you've never used",
    "start": "2815119",
    "end": "2821280"
  },
  {
    "text": "the older APIs before um so basically we still get a reference to our Bluetooth adapter but there's no scanner anymore",
    "start": "2821280",
    "end": "2828000"
  },
  {
    "text": "it turns out in the older APIs the Bluetooth LE scanner didn't exist we did this a different way all of this code to",
    "start": "2828000",
    "end": "2834079"
  },
  {
    "text": "check for Bluetooth is the same and as far as setting up the scan",
    "start": "2834079",
    "end": "2839119"
  },
  {
    "start": "2835000",
    "end": "2865000"
  },
  {
    "text": "we instead would have called startle le scan directly on the adapter okay now we",
    "start": "2839119",
    "end": "2844640"
  },
  {
    "text": "still pass a call back and we still have the opportunity to do some filtering but",
    "start": "2844640",
    "end": "2850079"
  },
  {
    "text": "the only filter it supports is a list of UU ids for services we can't filter on anything else in the older versions just",
    "start": "2850079",
    "end": "2856560"
  },
  {
    "text": "turns out in this case that's all I need so I am actually leveraging that in this case now the other thing that's going on",
    "start": "2856560",
    "end": "2862319"
  },
  {
    "text": "in this older example based on this block of code that you can see here is that because I can't see all the",
    "start": "2862319",
    "end": "2868680"
  },
  {
    "text": "advertisements unless I keep stopping the scan um we have this runnable setup",
    "start": "2868680",
    "end": "2874480"
  },
  {
    "text": "that basically starts the scan for five minutes then shuts it off and then for two seconds turns it back on and just toggles it back and forth while we're in",
    "start": "2874480",
    "end": "2881119"
  },
  {
    "text": "the foreground the reason again is because if I didn't do that on older versions I would see one advertisement",
    "start": "2881119",
    "end": "2887599"
  },
  {
    "text": "from all my beacons and that's it so I wouldn't be able to continue to get those updates of whatever the current",
    "start": "2887599",
    "end": "2893119"
  },
  {
    "text": "temperature is unless I stopped and started again luckily that's been fixed but if you have to deal with that on",
    "start": "2893119",
    "end": "2898400"
  },
  {
    "text": "older platforms you have to do a mitigation strategy kind of like this okay and then similar thing with",
    "start": "2898400",
    "end": "2905760"
  },
  {
    "start": "2905000",
    "end": "2940000"
  },
  {
    "text": "the scan but back in the old days we had to parse these things by ourselves so we got that raw value and I just have a",
    "start": "2905760",
    "end": "2914240"
  },
  {
    "text": "very simple parser in here that you're welcome to look through later on that basically just chunks through those AD",
    "start": "2914240",
    "end": "2919920"
  },
  {
    "text": "records in this raw bite array and turns them into a simple structure that you can get things like the name or the",
    "start": "2919920",
    "end": "2924960"
  },
  {
    "text": "service data or stuff like that from okay so if you want to see an example of how to parse the data yourself if you",
    "start": "2924960",
    "end": "2930400"
  },
  {
    "text": "need it there's one in here i'm not going to spend too much time on it now um and luckily if you're supporting only",
    "start": "2930400",
    "end": "2935440"
  },
  {
    "text": "Lollipop it's done for you",
    "start": "2935440",
    "end": "2939640"
  },
  {
    "start": "2940000",
    "end": "2965000"
  },
  {
    "text": "okay so let's take a look at the advertising side so what happened when I",
    "start": "2941880",
    "end": "2947920"
  },
  {
    "text": "flipped on my Nexus 9 and it magically added itself to the list of devices that I could",
    "start": "2947920",
    "end": "2954720"
  },
  {
    "text": "see i go to my other project here my",
    "start": "2955319",
    "end": "2960720"
  },
  {
    "text": "advertiser you'll see it's actually pretty dead simple okay so we have the simple activity and",
    "start": "2961800",
    "end": "2968400"
  },
  {
    "text": "that's the one that had the slider on it so I could set the temperature and hit the button and go from there um in this",
    "start": "2968400",
    "end": "2974079"
  },
  {
    "text": "case I have the Bluetooth LE advertiser off of the adapter and then anytime we're in the",
    "start": "2974079",
    "end": "2981280"
  },
  {
    "text": "foreground going to check those same support issues now there's one more to check this time I need to make sure that",
    "start": "2981280",
    "end": "2987280"
  },
  {
    "text": "the device I'm running on supports advertisement because that's different than just supporting the BLE APIs okay",
    "start": "2987280",
    "end": "2995040"
  },
  {
    "text": "so that's checking whether or not this multiple advertisement is supported method if not then this is no good to me",
    "start": "2995040",
    "end": "3000559"
  },
  {
    "text": "i can't do this on this device okay so inside of the advertising same basic format i have a settings and",
    "start": "3000559",
    "end": "3007680"
  },
  {
    "start": "3005000",
    "end": "3045000"
  },
  {
    "text": "a data the settings defines the the information about the advertisement the",
    "start": "3007680",
    "end": "3012960"
  },
  {
    "text": "mode is how frequent you know so you know low power versus low latency um is",
    "start": "3012960",
    "end": "3018400"
  },
  {
    "text": "this device connectable in this case no because we want this to act as more of a beacon i'm just advertising data i'm not",
    "start": "3018400",
    "end": "3024319"
  },
  {
    "text": "setting up any connectability here timeout zero means advertise forever but if I want to set this to an actual value",
    "start": "3024319",
    "end": "3030880"
  },
  {
    "text": "I can tell this to time out after say 15 or 30 seconds and stop advertising at",
    "start": "3030880",
    "end": "3036240"
  },
  {
    "text": "that point okay if I just want to do this in short bursts um and then what's the transmit power I want for the",
    "start": "3036240",
    "end": "3042079"
  },
  {
    "text": "advertisement there's a low medium and high setting okay and the ad data I want",
    "start": "3042079",
    "end": "3047599"
  },
  {
    "start": "3045000",
    "end": "3080000"
  },
  {
    "text": "to make sure the device name is in there in this case I added the transmit power level and the data that I'm including is",
    "start": "3047599",
    "end": "3054079"
  },
  {
    "text": "that current temperature value so whatever was set on that slider in the UI gets packed into that two byte array",
    "start": "3054079",
    "end": "3061200"
  },
  {
    "text": "that I def I defined earlier as part of the KST protocol uh and that gets added as the service data for this",
    "start": "3061200",
    "end": "3067280"
  },
  {
    "text": "advertisement and it just gets built all together in into an ad data packet and then using my advertiser I tell it to",
    "start": "3067280",
    "end": "3074240"
  },
  {
    "text": "start advertising and that's pretty much it there is a call back but the call back",
    "start": "3074240",
    "end": "3079520"
  },
  {
    "text": "only exists to tell you whether or not you succeeded to start advertising or",
    "start": "3079520",
    "end": "3084880"
  },
  {
    "start": "3080000",
    "end": "3130000"
  },
  {
    "text": "whether there was a failure okay now um multiple applications can be advertising",
    "start": "3084880",
    "end": "3090000"
  },
  {
    "text": "at the same time so one of the reasons that you might get a failure is there's a maximum of I believe it's four",
    "start": "3090000",
    "end": "3097000"
  },
  {
    "text": "applications that can advertise at any given moment so and luckily they did a little bit better job with the error",
    "start": "3097000",
    "end": "3102880"
  },
  {
    "text": "codes here in this case if you fail because there are too many advertisers already it will tell you that you also",
    "start": "3102880",
    "end": "3109440"
  },
  {
    "text": "can't restart an advertisement to the same call back so if I called start advertise and then called it again later",
    "start": "3109440",
    "end": "3116079"
  },
  {
    "text": "I'd get another error saying that I'm already advertising you know for this particular instance okay so you'd only",
    "start": "3116079",
    "end": "3121520"
  },
  {
    "text": "have one of those in any given time so a little bit better error handling in the new stuff but other than that not a whole",
    "start": "3121520",
    "end": "3128160"
  },
  {
    "text": "lot of interesting to really see here and so this data is just going to advertise constantly just like my other",
    "start": "3128160",
    "end": "3133440"
  },
  {
    "start": "3130000",
    "end": "3200000"
  },
  {
    "text": "beacons now one thing to note is these advertisement data packets are immutable",
    "start": "3133440",
    "end": "3139760"
  },
  {
    "text": "you know the only way to create one is using this builder i can't hold on to a reference and say well actually I'm",
    "start": "3139760",
    "end": "3145520"
  },
  {
    "text": "going to change the temp value to this now and do all those things on the fly to modify what's going on inside of the",
    "start": "3145520",
    "end": "3151599"
  },
  {
    "text": "advertisement so what I have to do unfortunately and this is why you saw the MAC address change every time I",
    "start": "3151599",
    "end": "3158319"
  },
  {
    "text": "updated the the piece there is that in order to modify the ad data I have to",
    "start": "3158319",
    "end": "3164000"
  },
  {
    "text": "start a new advertisement okay so that I can create a new ad data object and I can pass that to start advertise again",
    "start": "3164000",
    "end": "3170880"
  },
  {
    "text": "okay so inside of the click handler for that specific button that I was clicking",
    "start": "3170880",
    "end": "3176720"
  },
  {
    "text": "there's basically just a method that I use to stop the current advertisement and start a new one with whatever the",
    "start": "3176720",
    "end": "3181920"
  },
  {
    "text": "current data is inside of the UI okay that's a little bit unfortunate maybe that'll get fixed in another version but",
    "start": "3181920",
    "end": "3188480"
  },
  {
    "text": "at least for now the advertisement data you provide to the framework is static if you want to change it you have to",
    "start": "3188480",
    "end": "3194000"
  },
  {
    "text": "restart your advertisement with new data okay",
    "start": "3194000",
    "end": "3199040"
  },
  {
    "text": "yes question could you tell me what the use cases ibacon is all about proximity right it's how far away are you from",
    "start": "3199040",
    "end": "3205920"
  },
  {
    "start": "3200000",
    "end": "3240000"
  },
  {
    "text": "some thing and then there's some unique identifying information about what that thing is this is essentially could be",
    "start": "3205920",
    "end": "3211280"
  },
  {
    "text": "the same idea right i could have this at the front of a store or something like that where that I need to uniquely",
    "start": "3211280",
    "end": "3218079"
  },
  {
    "text": "identify this thing and have other devices be able to determine how far they are away from this specific maybe",
    "start": "3218079",
    "end": "3224480"
  },
  {
    "text": "point of sale or something like that and in order to do that this has to be advertising information like where it is",
    "start": "3224480",
    "end": "3230160"
  },
  {
    "text": "and how the the current power level so that people can determine proximity that's just one example kind of stealing",
    "start": "3230160",
    "end": "3235440"
  },
  {
    "text": "from what Apple's doing but you know maybe there are others as well okay so the next example that I'm",
    "start": "3235440",
    "end": "3243119"
  },
  {
    "start": "3240000",
    "end": "3495000"
  },
  {
    "text": "going to show you is a little more involved and it might be hard to see",
    "start": "3243119",
    "end": "3248640"
  },
  {
    "text": "with the lack of focus on here but we'll see um so what I'm what I've got defined",
    "start": "3248640",
    "end": "3254720"
  },
  {
    "text": "here is now I'm going to show you a basic client peripheral communication so I've got the the Nexus 9 is going to",
    "start": "3254720",
    "end": "3261680"
  },
  {
    "text": "have an application on that's going to set up a GAT server um and it's going to provide some very basic information it's",
    "start": "3261680",
    "end": "3267200"
  },
  {
    "text": "just a very simple server that has one service and two characteristics and the characteristics are going to define uh",
    "start": "3267200",
    "end": "3273200"
  },
  {
    "text": "how much time has elapsed elapsed since some given offset and then another characteristic that allows you to set",
    "start": "3273200",
    "end": "3279440"
  },
  {
    "text": "when that offset was okay so some very basic information and at any time another device can query that service to",
    "start": "3279440",
    "end": "3285680"
  },
  {
    "text": "get either one of those pieces of information okay so the the GAT peripheral has pretty much no UI on it",
    "start": "3285680",
    "end": "3293040"
  },
  {
    "text": "in this case all that is going to show up on this screen is anytime a device connects to this server it's going to",
    "start": "3293040",
    "end": "3298880"
  },
  {
    "text": "show that device in the list okay the the UI that hopefully you'll be able to see okay is actually going to be on this",
    "start": "3298880",
    "end": "3306960"
  },
  {
    "text": "device and actually what I might do is just put them on top of each other so you can see it a little better",
    "start": "3306960",
    "end": "3313119"
  },
  {
    "text": "but basically I just have a couple buttons where um I can use this information to get the current value of",
    "start": "3313119",
    "end": "3319680"
  },
  {
    "text": "the characteristics and in the case of the offset value I can there's a little bit of UI in here that I can use to set",
    "start": "3319680",
    "end": "3325920"
  },
  {
    "text": "the current offset that should be resident on the server device okay it's probably easier to explain if I just run",
    "start": "3325920",
    "end": "3331839"
  },
  {
    "text": "it so first thing I have up here in the corner is a scan button and that will run a scan for any devices in the area",
    "start": "3331839",
    "end": "3338240"
  },
  {
    "text": "and since my server is active it's advertising so it shows up in the list here as my Nexus 9 and then I can",
    "start": "3338240",
    "end": "3344720"
  },
  {
    "text": "connect to that device and you see it shows up here in the list and then what's what shows up down",
    "start": "3344720",
    "end": "3351280"
  },
  {
    "text": "here is a current time value so basically what we're seeing is the number of seconds that have elapsed",
    "start": "3351280",
    "end": "3357359"
  },
  {
    "text": "since whatever the offset is right now the offset is zero so that's what January 1st 1970 or whatever that is in",
    "start": "3357359",
    "end": "3363359"
  },
  {
    "text": "in Pacific time um but I've got some basic pieces in here where using this",
    "start": "3363359",
    "end": "3368400"
  },
  {
    "text": "update button I can set what the new offset should be so I'm going to say well I'd like to figure out how much",
    "start": "3368400",
    "end": "3374720"
  },
  {
    "text": "time has elapsed since um let's say well no let's go",
    "start": "3374720",
    "end": "3381160"
  },
  {
    "text": "back since 4 55 so five minutes",
    "start": "3381160",
    "end": "3386200"
  },
  {
    "text": "ago and that will go to the device you can see there's a little notification on the server device that says it received",
    "start": "3386200",
    "end": "3392240"
  },
  {
    "text": "that characteristic right and then the data that shows up in that in that counter is now based off of the time the",
    "start": "3392240",
    "end": "3399920"
  },
  {
    "text": "time that has elapsed since 5 minutes ago and now based on this devices's current clock okay now the other thing",
    "start": "3399920",
    "end": "3406480"
  },
  {
    "text": "that's going on which you may or may not be able to see because of the focus is that every few seconds it's counting up",
    "start": "3406480",
    "end": "3412960"
  },
  {
    "text": "okay and that's going on using a notification so this client device has subscribed to that characteristic to say",
    "start": "3412960",
    "end": "3420559"
  },
  {
    "text": "anytime this characteristic changes notify me so I can update the UI and so the changes are not going on because the",
    "start": "3420559",
    "end": "3427119"
  },
  {
    "text": "client is constantly pulling the server the server is triggering a notification every so often when it decides that",
    "start": "3427119",
    "end": "3432960"
  },
  {
    "text": "something has changed okay",
    "start": "3432960",
    "end": "3437640"
  },
  {
    "text": "on the server so the the server basically that is a value that gets passed over to the server then the",
    "start": "3438079",
    "end": "3444000"
  },
  {
    "text": "server does the math of current time versus what you gave me and returns that back as a characteristic okay so just kind of a",
    "start": "3444000",
    "end": "3451240"
  },
  {
    "text": "semicontrived simple example okay",
    "start": "3451240",
    "end": "3458920"
  },
  {
    "text": "have I I'm sorry ask that question again",
    "start": "3460720",
    "end": "3465000"
  },
  {
    "text": "no no I haven't you mean like how how quickly I can pump notifications before they not get received anymore no I",
    "start": "3467200",
    "end": "3472400"
  },
  {
    "text": "haven't i imagine it's actually pretty responsive but I haven't timed",
    "start": "3472400",
    "end": "3478920"
  },
  {
    "text": "it right now it's happening every two seconds i think I could probably safely do it without any concern a couple times",
    "start": "3478920",
    "end": "3486000"
  },
  {
    "text": "a second but I haven't really tested that all right so let's look at the code",
    "start": "3486000",
    "end": "3491839"
  },
  {
    "text": "for this example so we've got two activities one",
    "start": "3491839",
    "end": "3497520"
  },
  {
    "text": "for the peripheral and one for the client and as I mentioned I've just defined just a very basic GAT server",
    "start": "3497520",
    "end": "3504160"
  },
  {
    "text": "with a service and two characteristics one for the elapsed time and one for the",
    "start": "3504160",
    "end": "3509280"
  },
  {
    "text": "offset that it should compute the elapse time from okay so these are just UU IDs",
    "start": "3509280",
    "end": "3514640"
  },
  {
    "text": "since this has nothing to do with any adopted profiles I just generated my own UU IDs you know if you have a Mac or",
    "start": "3514640",
    "end": "3521280"
  },
  {
    "text": "Linux system you just run UUID gen at the command line and take the output right or you can generate them any way you like um so we just have those three",
    "start": "3521280",
    "end": "3528559"
  },
  {
    "text": "parameters defined for this piece here so on the peripheral side some of the",
    "start": "3528559",
    "end": "3533680"
  },
  {
    "text": "same code we've seen before because the first thing we have to do is set up advertising so that other devices can",
    "start": "3533680",
    "end": "3539920"
  },
  {
    "text": "find it and connect to it so all those pieces are the same so we're still going to have our Bluetooth adapter and our",
    "start": "3539920",
    "end": "3546480"
  },
  {
    "text": "Bluetooth adapter is still going to have a reference to a Bluetooth LE advertiser so all those pieces are the same as they",
    "start": "3546480",
    "end": "3552160"
  },
  {
    "text": "were before what's new is now I'm also generating an instance of a Bluetooth",
    "start": "3552160",
    "end": "3557359"
  },
  {
    "text": "gat server okay and this is generated by calling opengat server on the Bluetooth manager and giving it a call back okay",
    "start": "3557359",
    "end": "3565680"
  },
  {
    "text": "now the gat server callback is going to be responsible for handling all the incoming requests so anytime a",
    "start": "3565680",
    "end": "3571440"
  },
  {
    "text": "characteristic read request write request anything like that it's going to be coming in through that call back okay",
    "start": "3571440",
    "end": "3577200"
  },
  {
    "text": "so we just call opengat server and that registers that instance with the framework i have to do a little bit more",
    "start": "3577200",
    "end": "3583440"
  },
  {
    "text": "work here which is I have to define on the server the services and characteristics okay so this gets a",
    "start": "3583440",
    "end": "3589520"
  },
  {
    "text": "little codeheavy i almost wish I could do this in XML but um basically I can define the service that I need using",
    "start": "3589520",
    "end": "3596319"
  },
  {
    "text": "that UU ID and a characteristic for each one of my elapse time and my offset okay",
    "start": "3596319",
    "end": "3602000"
  },
  {
    "text": "and I just pass the UU ID for that characteristic or service and the properties associated with it so my",
    "start": "3602000",
    "end": "3608240"
  },
  {
    "text": "elapse time characteristic is defined to be read only so it it's only defined to",
    "start": "3608240",
    "end": "3613280"
  },
  {
    "text": "have the read permission on it and it also supports notifications so clients can subscribe to this for the purposes",
    "start": "3613280",
    "end": "3620319"
  },
  {
    "text": "of notification you have to define that as a property on the characteristic the other one is readable",
    "start": "3620319",
    "end": "3626480"
  },
  {
    "text": "and writable so I have to define the properties and permissions on both of those if you don't do this and you try to read or write the characteristic it's",
    "start": "3626480",
    "end": "3632960"
  },
  {
    "text": "just going to fail okay so it's important to get these bits set appropriately add the characteristics to",
    "start": "3632960",
    "end": "3638640"
  },
  {
    "text": "the service add the service to the server what's the difference between write with response and write without response do you set that up here uh yes",
    "start": "3638640",
    "end": "3646240"
  },
  {
    "text": "well no you don't set that up here and maybe we can talk about that in a little more detail offline um because that",
    "start": "3646240",
    "end": "3651599"
  },
  {
    "text": "that's a property you define on the actual right okay um as opposed to on the characteristic",
    "start": "3651599",
    "end": "3658760"
  },
  {
    "text": "okay so we define that server and it's initialized so now anytime a device attempts to connect to this we and tries",
    "start": "3659599",
    "end": "3667520"
  },
  {
    "text": "to query for one of these services or characteristics the framework will route those requests to our application",
    "start": "3667520",
    "end": "3673760"
  },
  {
    "text": "because we've told the framework about our server and it knows what services and characteristics are on it",
    "start": "3673760",
    "end": "3679640"
  },
  {
    "text": "okay all right so then let me jump down to the advertisement piece real quick there it is um advertising code",
    "start": "3679640",
    "end": "3688319"
  },
  {
    "text": "not really any different we're advertising our one service so that other clients can filter on it that's",
    "start": "3688319",
    "end": "3693440"
  },
  {
    "text": "just making it easier on them we include the device name",
    "start": "3693440",
    "end": "3699000"
  },
  {
    "text": "there and then we pass that advertisement off okay so this is just advertising all the time now the one thing that's different here that's",
    "start": "3699000",
    "end": "3705960"
  },
  {
    "text": "important this is a connectable advertisement okay if I forget to set this because it defaults to false I've",
    "start": "3705960",
    "end": "3713200"
  },
  {
    "text": "essentially turned this nice server I created into a beacon nobody's going to connect to it okay so that's important",
    "start": "3713200",
    "end": "3718319"
  },
  {
    "text": "to realize all right so that's all set up and then eventually later on when",
    "start": "3718319",
    "end": "3723599"
  },
  {
    "text": "clients connect to me and do all these other things we'll start seeing events going on in the callback so I'll just go through those quickly here um so the",
    "start": "3723599",
    "end": "3730559"
  },
  {
    "text": "callback has methods like connection state change this tells me that a device has either connected or disconnected",
    "start": "3730559",
    "end": "3736480"
  },
  {
    "text": "from my server so I can check which one of those events it is and in this case I'm just posting that to the UI so that",
    "start": "3736480",
    "end": "3743119"
  },
  {
    "text": "it can add it or remove it from that list okay nothing crazy there characteristic read request this",
    "start": "3743119",
    "end": "3751040"
  },
  {
    "text": "happens anytime one of the clients asks to read one of my characteristics off of that service so I have to figure out",
    "start": "3751040",
    "end": "3757440"
  },
  {
    "text": "first of all which characteristic were they asking for they asking for my elapse time or my offset",
    "start": "3757440",
    "end": "3763880"
  },
  {
    "text": "value and then send back a response to the device using the APIs so there's a",
    "start": "3763880",
    "end": "3770640"
  },
  {
    "text": "send response method that I use to provide the value to the read request for whatever the characteristic is now",
    "start": "3770640",
    "end": "3777680"
  },
  {
    "text": "read requests by default require a response from the service so even if for",
    "start": "3777680",
    "end": "3783119"
  },
  {
    "text": "some reason somebody sends a read request to my device that it has a service or characteristic that I I don't",
    "start": "3783119",
    "end": "3789119"
  },
  {
    "text": "understand it's not part of my device even if that manages to happen you want to make sure that as a default you",
    "start": "3789119",
    "end": "3795839"
  },
  {
    "text": "always send some response back or that could essentially lock up the client waiting for a timeout or something like",
    "start": "3795839",
    "end": "3801440"
  },
  {
    "text": "that on the other side so in this case I'm sending back a failure with no data but you want to make sure to handle that",
    "start": "3801440",
    "end": "3806880"
  },
  {
    "text": "case as well okay and then characteristic write",
    "start": "3806880",
    "end": "3812359"
  },
  {
    "text": "request we have one characteristic that's writable and it's that offset value so if if a client attempts to",
    "start": "3812359",
    "end": "3818480"
  },
  {
    "text": "write to the offset then we'll p we need to make sure that that's the characteristic they're asking for and",
    "start": "3818480",
    "end": "3823839"
  },
  {
    "text": "then we can steal the value out of the characteristic now notice that the the",
    "start": "3823839",
    "end": "3830000"
  },
  {
    "text": "value from the write request is not in the characteristic object it's given to you separately don't ask me why they did",
    "start": "3830000",
    "end": "3836400"
  },
  {
    "text": "that but if you call get value on this characteristic it will be null the value they attempted to write is right here",
    "start": "3836400",
    "end": "3843720"
  },
  {
    "text": "okay now the question was asked about um write no response versus a default write",
    "start": "3843720",
    "end": "3849920"
  },
  {
    "text": "in on the server side that determination is made using this value so if the write",
    "start": "3849920",
    "end": "3856160"
  },
  {
    "text": "was made with the no response bit set this will be false otherwise this will be true so on a server you're simply",
    "start": "3856160",
    "end": "3862559"
  },
  {
    "text": "responsible for determining do I need to send a response and if I do same thing",
    "start": "3862559",
    "end": "3868480"
  },
  {
    "text": "as we did with the read okay then the idea of setting that or not setting it is responsible on the client side okay",
    "start": "3868480",
    "end": "3876160"
  },
  {
    "text": "and then we pop that toast that some of you may have seen when the offset actually went through",
    "start": "3876160",
    "end": "3881359"
  },
  {
    "text": "so on the client side does um you know on on write um does that get called",
    "start": "3881359",
    "end": "3887599"
  },
  {
    "text": "after it really got to the client after it really got to the peripheral and got a response sure so we're going to see",
    "start": "3887599",
    "end": "3893119"
  },
  {
    "text": "the client in a second but yeah the question was does on the client side get called on-write on the client side gets",
    "start": "3893119",
    "end": "3898799"
  },
  {
    "text": "called when the response comes back okay essentially so question so if the the",
    "start": "3898799",
    "end": "3905599"
  },
  {
    "text": "right request doesn't match one of the characteristics we're exposing should we still send that response but",
    "start": "3905599",
    "end": "3913798"
  },
  {
    "text": "you know to be honest to be super robust probably generally speaking you should",
    "start": "3914880",
    "end": "3920079"
  },
  {
    "text": "never see those because uh the framework shouldn't route them to your application's callback since they're not",
    "start": "3920079",
    "end": "3926319"
  },
  {
    "text": "defined as a service or characteristic on your server but kind of like I did before if for some reason something",
    "start": "3926319",
    "end": "3932240"
  },
  {
    "text": "happened you'd want to have a catchall in there so you probably would want to have a maybe a response error or something that gets thrown back it's",
    "start": "3932240",
    "end": "3938240"
  },
  {
    "text": "probably good practice okay last thing in here is the notification so what uh a couple",
    "start": "3938240",
    "end": "3945680"
  },
  {
    "text": "things happen anytime the write uh happens",
    "start": "3945680",
    "end": "3951280"
  },
  {
    "text": "or inside of this server to sort of mimic a a change because I mean since",
    "start": "3951319",
    "end": "3956559"
  },
  {
    "text": "I'm basically giving it a lapse time basically it changes every second but I've decided that I'm not going to",
    "start": "3956559",
    "end": "3962160"
  },
  {
    "text": "trigger the notification that often um instead I'm just running a simple handler that pulls every two seconds and",
    "start": "3962160",
    "end": "3968720"
  },
  {
    "text": "so every two seconds we're faking a way of saying yes the characteristic has changed okay it changed again um and so",
    "start": "3968720",
    "end": "3976400"
  },
  {
    "text": "either every two seconds or anytime the offset is changed uh we just pass this notify method",
    "start": "3976400",
    "end": "3982839"
  },
  {
    "text": "here which goes through and for that one characteristic passes the current value",
    "start": "3982839",
    "end": "3989920"
  },
  {
    "text": "and calls this notify characteristic changed method to all the connected devices that I have okay and then any",
    "start": "3989920",
    "end": "3997119"
  },
  {
    "text": "devices it's kind of nice from this side i can just do it to any connected device I've seen and the framework will deal",
    "start": "3997119",
    "end": "4002799"
  },
  {
    "text": "with whether or not they've actually subscribed on the client side and determine whether or not they have to get pushed in okay so I can just notify",
    "start": "4002799",
    "end": "4009680"
  },
  {
    "text": "everybody that a change has occurred and go from there",
    "start": "4009680",
    "end": "4015240"
  },
  {
    "text": "okay real quick we'll go through the client side so client side looks very very",
    "start": "4015240",
    "end": "4023039"
  },
  {
    "text": "similar um the one major difference comes inside of the the connection and the",
    "start": "4023039",
    "end": "4029280"
  },
  {
    "text": "communication but very briefly I'll show you the uh the scanning piece so here inside of this we're we're",
    "start": "4029280",
    "end": "4036400"
  },
  {
    "text": "using our Bluetooth LE scanner again looking for those advertisement packets coming from our device we're looking for",
    "start": "4036400",
    "end": "4043119"
  },
  {
    "text": "only devices that have our custom service advertised so that way we filter out everything else we don't care about",
    "start": "4043119",
    "end": "4049920"
  },
  {
    "text": "and then inside of the scan result we're just going to add those to a collection which is what was showing up inside of",
    "start": "4049920",
    "end": "4056240"
  },
  {
    "text": "the overflow menu up there so I had the scan button and the overflow and then the uh the options menu basically just",
    "start": "4056240",
    "end": "4063599"
  },
  {
    "text": "defines the overflow to be my scan button plus a",
    "start": "4063599",
    "end": "4069920"
  },
  {
    "text": "button for every device that I have in my collection okay so as they scan they just pop in there it's just an easy way",
    "start": "4069920",
    "end": "4075119"
  },
  {
    "text": "for me to keep it off the UI so when I selected that Nexus 9 out of the overflow that's when it attempted to",
    "start": "4075119",
    "end": "4081920"
  },
  {
    "text": "make the device connection so from that Bluetooth device connect GAT give it the call",
    "start": "4081920",
    "end": "4088480"
  },
  {
    "text": "back and the call back has very similar methods on it you know on connection state change um services discovered I'll",
    "start": "4088680",
    "end": "4096080"
  },
  {
    "text": "talk about that in a minute uh characteristic read and and in this case characteristic change now there are",
    "start": "4096080",
    "end": "4101520"
  },
  {
    "text": "other methods on here that I'm not overwriting because I don't need to you know there's on characteristic write on descriptor read and write all those",
    "start": "4101520",
    "end": "4106960"
  },
  {
    "text": "other ones I showed you in the slide um and basically there's just a simple setup here where from the client side",
    "start": "4106960",
    "end": "4112719"
  },
  {
    "text": "when I attempt to make that connection initially I will see that here uh in",
    "start": "4112719",
    "end": "4117838"
  },
  {
    "text": "connection state change telling me that I've connected to the server so great as soon as I've connected next thing I'm",
    "start": "4117839",
    "end": "4123440"
  },
  {
    "text": "going to do is attempt to discover services I want to know all the services on this device to make sure that the one",
    "start": "4123440",
    "end": "4128560"
  },
  {
    "text": "I'm interested in is actually there okay so that is going to trigger again another asynchronous call on services",
    "start": "4128560",
    "end": "4134278"
  },
  {
    "text": "discovered um so in that case I'm going to loop through all the services that I find make sure that I have the right",
    "start": "4134279",
    "end": "4141359"
  },
  {
    "text": "service available to me and then I'm going to attempt to read that elapsed",
    "start": "4141359",
    "end": "4147040"
  },
  {
    "text": "time characteristic from that service okay so this is all just happening one after the other this isn't as result of",
    "start": "4147040",
    "end": "4152640"
  },
  {
    "text": "me clicking a button or anything like that then the read characteristic method",
    "start": "4152640",
    "end": "4157838"
  },
  {
    "text": "is going to trigger the onch characteristic red yet another callback right so this will get triggered a",
    "start": "4157839",
    "end": "4164318"
  },
  {
    "text": "couple different times throughout the app but essentially inside of here is where I can determine if the characteristic result that I get back",
    "start": "4164319",
    "end": "4171278"
  },
  {
    "text": "was for the elapse time pop that into that text field in the UI um and if it",
    "start": "4171279",
    "end": "4176640"
  },
  {
    "text": "was the offset value um then I actually display that date somewhere else in the UI too so anytime I get a readback from",
    "start": "4176640",
    "end": "4182640"
  },
  {
    "text": "either one of these I'm going to just pop them up into the UI again using a handler because this is not the main",
    "start": "4182640",
    "end": "4187920"
  },
  {
    "text": "thread okay remember that the other thing that I'm doing is for this elapse",
    "start": "4187920",
    "end": "4193600"
  },
  {
    "text": "time as soon as I've gotten the initial read I enable notifications on that call",
    "start": "4193600",
    "end": "4200159"
  },
  {
    "text": "okay so this now I don't have to read this characteristic anymore anytime the server calls that notify characteristic",
    "start": "4200159",
    "end": "4206159"
  },
  {
    "text": "change that we just saw I'm going to get a call here that's all set up at this point",
    "start": "4206159",
    "end": "4211400"
  },
  {
    "text": "okay and in that case it's going to come through on characteristic changed instead of on characteristic red so I",
    "start": "4211400",
    "end": "4218080"
  },
  {
    "text": "have the same basic block of code in there where it just pushes that value up to the text for now so you can see it in",
    "start": "4218080",
    "end": "4224400"
  },
  {
    "text": "the UI so for every notification or for the initial read it's just updating that counter with the new data",
    "start": "4224400",
    "end": "4230280"
  },
  {
    "text": "okay and then the final thing that we saw was that I could push that little button to set the new time offset and it",
    "start": "4230280",
    "end": "4236880"
  },
  {
    "text": "would fire that off to the device okay that was inside of this update button",
    "start": "4236880",
    "end": "4242080"
  },
  {
    "text": "and this is just some basic code that showed that dialogue and then once I get whatever the time stamp was from that",
    "start": "4242080",
    "end": "4248320"
  },
  {
    "text": "dialogue that was set up we get our characteristic from our service we set",
    "start": "4248320",
    "end": "4253520"
  },
  {
    "text": "that characteristics value and then we tell the server we would like to write that characteristic",
    "start": "4253520",
    "end": "4259760"
  },
  {
    "text": "on the server okay and then that's where it updates that piece and then remember the code on the server side as soon as a",
    "start": "4259760",
    "end": "4265760"
  },
  {
    "text": "write happened it triggered a notification so that's why immediately on the client side I saw the update",
    "start": "4265760",
    "end": "4272640"
  },
  {
    "text": "okay questions on that i finished exactly on",
    "start": "4274199",
    "end": "4280840"
  },
  {
    "text": "time so thank you so um I don't know if they need this",
    "start": "4280840",
    "end": "4287679"
  },
  {
    "text": "room or not but obviously if you guys have questions maybe just come up here and we'll we'll chat about this stuff so that other people can clear out so come",
    "start": "4287679",
    "end": "4293520"
  },
  {
    "text": "on up so the sample code is on GitHub and the link to that is in the slides",
    "start": "4293520",
    "end": "4301239"
  }
]