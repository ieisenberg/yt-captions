[
  {
    "text": "[Music]",
    "start": "1100",
    "end": "10880"
  },
  {
    "text": "all right um let's get started so um hello everyone uh we're going to talk",
    "start": "10880",
    "end": "16880"
  },
  {
    "text": "about how we delivered millions of notifications within a few seconds during Super Bowl uh I'm Jen and uh",
    "start": "16880",
    "end": "25000"
  },
  {
    "text": "let's just get started actually uh before we do um a quick show of hands",
    "start": "25000",
    "end": "31039"
  },
  {
    "text": "how many of you know dualingo wow that's actually quite a lot",
    "start": "31039",
    "end": "36280"
  },
  {
    "text": "I wasn't expecting this much uh we did the same back in London and um I don't I",
    "start": "36280",
    "end": "41399"
  },
  {
    "text": "don't think it was that impressive so I guess like still a brief introduction of ourself if you don't know dualingo",
    "start": "41399",
    "end": "48440"
  },
  {
    "text": "dualingo is like the most popular language learning platform and we have",
    "start": "48440",
    "end": "53680"
  },
  {
    "text": "the most downloaded language learning app worldwide and our mission is to develop the best education in the world",
    "start": "53680",
    "end": "60640"
  },
  {
    "text": "and make it universally available so what do we have we currently have 31.4 million da which is",
    "start": "60640",
    "end": "68240"
  },
  {
    "text": "daily active users and we have over 100 courses offered in 40 plus languages on",
    "start": "68240",
    "end": "75080"
  },
  {
    "text": "top of that we also have a very unhinged social presence so uh you may know us from a",
    "start": "75080",
    "end": "83159"
  },
  {
    "text": "lot of things um and I assume internet memes is like one of them you may have heard of like Spanish or vanish",
    "start": "83159",
    "end": "90759"
  },
  {
    "text": "um some other stuff that I won't name but also um our marketing team is",
    "start": "90759",
    "end": "96600"
  },
  {
    "text": "really hard at work so uh you may have seen some of the pretty wild Tik toks or",
    "start": "96600",
    "end": "102640"
  },
  {
    "text": "memes that revolves around dual or our employees um that is really our",
    "start": "102640",
    "end": "107920"
  },
  {
    "text": "marketing team hard at work and let's switch gears a little bit and look at this number",
    "start": "107920",
    "end": "116240"
  },
  {
    "text": "what this number could be notifications um notification that's we we' like it to",
    "start": "119960",
    "end": "125840"
  },
  {
    "text": "be that way but not yet um but that was a good guess that's actually the number",
    "start": "125840",
    "end": "131400"
  },
  {
    "text": "of viewers of last Super Bowl so this year the Super Bowl game between Kansas City Chiefs and San Francisco 49ers",
    "start": "131400",
    "end": "138920"
  },
  {
    "text": "brought an average of",
    "start": "138920",
    "end": "142200"
  },
  {
    "text": "so since we already we're in the US and I don't really have to tell you uh what Super Bowl is I assume um uh so we'll",
    "start": "149959",
    "end": "158920"
  },
  {
    "text": "just skip over this but if you ask chat GPT to create an image of a typical",
    "start": "158920",
    "end": "164920"
  },
  {
    "text": "Super Bowl ad uh it kind of looks like this uh basically what you would expect",
    "start": "164920",
    "end": "171159"
  },
  {
    "text": "from like a chat GPT image uh it's kind of all over the place um it has like",
    "start": "171159",
    "end": "176280"
  },
  {
    "text": "cars Angels uh neon signs everything but why are we really talking about this",
    "start": "176280",
    "end": "184080"
  },
  {
    "text": "this is because everything was fine for us engineers at dingo for a while until one day we heard that Dingo",
    "start": "184080",
    "end": "192280"
  },
  {
    "text": "will run its first Super Bowl ad as it expands Beyond Tik Tok our chief",
    "start": "192280",
    "end": "198480"
  },
  {
    "text": "marketing officer expects the brand to be even more unhinged in",
    "start": "198480",
    "end": "204519"
  },
  {
    "text": "2024 then we saw some uh design docks that revolves around dual",
    "start": "204599",
    "end": "211319"
  },
  {
    "text": "spot okay so uh we know what's coming here uh so I might need some audio help",
    "start": "211319",
    "end": "218760"
  },
  {
    "text": "to play this hopefully all right so uh what's really",
    "start": "218760",
    "end": "226159"
  },
  {
    "text": "dawned on us was that we are uh buying like a Super Bowl ad and this is like a",
    "start": "226159",
    "end": "231599"
  },
  {
    "text": "5-sec ad that was played during this year's Super Bowl but at the time we",
    "start": "231599",
    "end": "236879"
  },
  {
    "text": "know that it has something to do with dual SP oh actually I forgot there's one last",
    "start": "236879",
    "end": "244120"
  },
  {
    "text": "thing uh the marketing team asked us to do a push notification at the same time",
    "start": "244120",
    "end": "250760"
  },
  {
    "text": "so what could possibly go wrong all right so let's give you an",
    "start": "250760",
    "end": "257199"
  },
  {
    "text": "overview of today's presentation we'll take you on a deep dive into the superb ow service which we named conveniently",
    "start": "257199",
    "end": "264680"
  },
  {
    "text": "after the Super Bowl um first section we'll be talking about how we dissect",
    "start": "264680",
    "end": "269800"
  },
  {
    "text": "this impossible task then we'll talk about how we cope with the changing",
    "start": "269800",
    "end": "274919"
  },
  {
    "text": "requirements um followed by we talking about the architecture Deep dive into how exactly the service works and last",
    "start": "274919",
    "end": "282720"
  },
  {
    "text": "but not least we all talk about what we learned and what we would have done differently so a fair warning of this",
    "start": "282720",
    "end": "289639"
  },
  {
    "text": "presentation this is not really a presentation on you should be doing this but instead of um this is what we did",
    "start": "289639",
    "end": "296880"
  },
  {
    "text": "and I hope you could perhaps learn something from our journey so let's start out with a",
    "start": "296880",
    "end": "304720"
  },
  {
    "text": "dissection of impossible task when I use the word impossible it may sound kind of",
    "start": "304720",
    "end": "310560"
  },
  {
    "text": "strong to you I mean it's just sending notification right um well when the",
    "start": "310560",
    "end": "315919"
  },
  {
    "text": "marketing team came to us they asked us well we want you to send millions of",
    "start": "315919",
    "end": "321400"
  },
  {
    "text": "notification um in a few seconds and uh can you do it and we were like hold on",
    "start": "321400",
    "end": "328080"
  },
  {
    "text": "let's do some research and we did some research and we came back to them and said well I don't think",
    "start": "328080",
    "end": "334360"
  },
  {
    "text": "we can do that um and then the next thing you heard was that them telling us",
    "start": "334360",
    "end": "339880"
  },
  {
    "text": "well we already paid for the ad so actually at that moment it wasn't",
    "start": "339880",
    "end": "346520"
  },
  {
    "text": "really up to us uh we have to do it um so they told us that they want to send 4",
    "start": "346520",
    "end": "352440"
  },
  {
    "text": "million notification within 5 Seconds when they first came to us we were actually a little nervous because here",
    "start": "352440",
    "end": "359120"
  },
  {
    "text": "you see how how fast our notification typically goes out it's at a rate of 10,000 notifications per second and I",
    "start": "359120",
    "end": "367199"
  },
  {
    "text": "mean if you do the math that's actually a lot of notifications per day but what they're asking is to send notifications",
    "start": "367199",
    "end": "374960"
  },
  {
    "text": "at 80 times faster speed and if you're a sight reliability engineer or you work",
    "start": "374960",
    "end": "381080"
  },
  {
    "text": "in the back end there might be already alarms that are going off yeah so this",
    "start": "381080",
    "end": "387520"
  },
  {
    "text": "is what I'm talking about back in 202 2 um coinbase launched its bouncing QR",
    "start": "387520",
    "end": "393800"
  },
  {
    "text": "code like campaign during Super Bowl and it was so popular that they crashed their site um we probably don't want to",
    "start": "393800",
    "end": "402560"
  },
  {
    "text": "do the same and on top of that we also discovered an issue with our Android app",
    "start": "402560",
    "end": "409000"
  },
  {
    "text": "so that well when we send out a notification to the Android app it sends a request right back to the back end",
    "start": "409000",
    "end": "415879"
  },
  {
    "text": "well this sound a little similar to dsing ourselves so if you want to send",
    "start": "415879",
    "end": "421599"
  },
  {
    "text": "like 5 million 4 million notification within a few seconds you probably want to avoid doing that so in theory um",
    "start": "421599",
    "end": "430280"
  },
  {
    "text": "leadership would just came to us well um you should just ship it um actually ship",
    "start": "430280",
    "end": "436160"
  },
  {
    "text": "it used to be uh or I don't actually know if it's still like a principle at",
    "start": "436160",
    "end": "441479"
  },
  {
    "text": "dingo but in practice this is kind of a complicated problem because here you see",
    "start": "441479",
    "end": "448680"
  },
  {
    "text": "um we want to build a the system to send notification fast we also want to make sure that we do not DS ourself we also",
    "start": "448680",
    "end": "456960"
  },
  {
    "text": "want to handle the organic traffic because people actually click on those notification and come back to the app to",
    "start": "456960",
    "end": "462919"
  },
  {
    "text": "practice learning new languages and our solution is basically somewhere in",
    "start": "462919",
    "end": "468440"
  },
  {
    "text": "between those three problems and to make matters worse um we",
    "start": "468440",
    "end": "473840"
  },
  {
    "text": "have people coming to us from different perspectives product managers or other",
    "start": "473840",
    "end": "479120"
  },
  {
    "text": "Eng they come to us with suggestions or inquiries can we add an icon to the",
    "start": "479120",
    "end": "484960"
  },
  {
    "text": "notification can we send to more cities can you localize the push into different languages can we use a vendor for this",
    "start": "484960",
    "end": "493400"
  },
  {
    "text": "all of these question so at this point you might be uh imagining there's like a your",
    "start": "493400",
    "end": "500240"
  },
  {
    "text": "favorite superhero from Marvel or DC to come and save the day um I mean in this",
    "start": "500240",
    "end": "507840"
  },
  {
    "text": "case we would probably call it the coding man or something there's no coding man in real",
    "start": "507840",
    "end": "514200"
  },
  {
    "text": "life so what we did was just very simple we divided and conquered the task um I",
    "start": "514200",
    "end": "520120"
  },
  {
    "text": "was in charge of building the system uh to send notification fast two of my wonderful colleagues Lise and Milo",
    "start": "520120",
    "end": "527240"
  },
  {
    "text": "they're respectively in charge of making sure that we're not dsing oursel and",
    "start": "527240",
    "end": "532440"
  },
  {
    "text": "making sure that we can handle the organic traffic so let's move on to the next",
    "start": "532440",
    "end": "538600"
  },
  {
    "text": "section and I'll talk about how we cope with the changing requirements on the first day of the",
    "start": "538600",
    "end": "544839"
  },
  {
    "text": "project my uh technical program manager Paul came to me and asked me well can",
    "start": "544839",
    "end": "550160"
  },
  {
    "text": "you give me a timeline on this project and at the time I wasn't really a senior",
    "start": "550160",
    "end": "555800"
  },
  {
    "text": "engineer and I I said well sure but where do I even start because it's such",
    "start": "555800",
    "end": "562079"
  },
  {
    "text": "a complicated project and all we knew was uh from August 2023 we know we want",
    "start": "562079",
    "end": "568399"
  },
  {
    "text": "to send $4 million notification in less than 5 seconds and Super Bowl happens",
    "start": "568399",
    "end": "573440"
  },
  {
    "text": "the next year on February 11th and they're not going to move that date for us how do we account for all these",
    "start": "573440",
    "end": "580600"
  },
  {
    "text": "uncertainties in between and as you may know to make",
    "start": "580600",
    "end": "585680"
  },
  {
    "text": "matters worse requirements are always changing um people are suggesting all",
    "start": "585680",
    "end": "591360"
  },
  {
    "text": "sorts of things to do um you should do this you should design this system in one way than the other",
    "start": "591360",
    "end": "599760"
  },
  {
    "text": "well to give you an example uh this is a slide that I showed you before I said they came to us saying we want to send 4",
    "start": "599760",
    "end": "606760"
  },
  {
    "text": "million notifications within 5 Seconds well that was actually a lie that",
    "start": "606760",
    "end": "612600"
  },
  {
    "text": "actually changed because when they first came to us they told us that they want to send notifications to three markets",
    "start": "612600",
    "end": "620079"
  },
  {
    "text": "with 2.6 million notification in total and they want to send all of it within 8",
    "start": "620079",
    "end": "625640"
  },
  {
    "text": "seconds well a few days later they changed their mind they were like how about we round up to three million",
    "start": "625640",
    "end": "632480"
  },
  {
    "text": "notifications and we want to send all that in 5 seconds and a few month has gone by they came to us they told us",
    "start": "632480",
    "end": "640399"
  },
  {
    "text": "well uh we actually um closed a new deal and we now have the ability to show the",
    "start": "640399",
    "end": "646959"
  },
  {
    "text": "ad in seven markets wo wonderful but uh that also mean you want uh we want you",
    "start": "646959",
    "end": "653079"
  },
  {
    "text": "to send to 4 million user um and because we're in the United States and people",
    "start": "653079",
    "end": "658920"
  },
  {
    "text": "have a lot of digital devices and potentially we want to send to 6 million plus devices which is 6 million plus",
    "start": "658920",
    "end": "666600"
  },
  {
    "text": "notification all of that within 5 seconds so you can see how requirements",
    "start": "666600",
    "end": "672680"
  },
  {
    "text": "can be changing all the time in a project and our solution was to figure",
    "start": "672680",
    "end": "678839"
  },
  {
    "text": "out uh what does not change um we figured that our operating principle does not change and one of our operating",
    "start": "678839",
    "end": "686000"
  },
  {
    "text": "principle at dualingo here is to test it first we're kind of obsessed with AB testing um we can ab test this project",
    "start": "686000",
    "end": "693760"
  },
  {
    "text": "though but um I'll talk just in a bit how we test it our principle in this",
    "start": "693760",
    "end": "700160"
  },
  {
    "text": "project is to not ship anything that we cannot test and here's a few example when they",
    "start": "700160",
    "end": "707399"
  },
  {
    "text": "came to us and asked if it it is okay to send to a larger audience we said yes",
    "start": "707399",
    "end": "714000"
  },
  {
    "text": "maybe we because we can probably test it when they came to us and asked whether we can send notification with an icon we",
    "start": "714000",
    "end": "721880"
  },
  {
    "text": "said yeah because we can test it when they asked is it okay to add the ability",
    "start": "721880",
    "end": "728200"
  },
  {
    "text": "to send notification to different markets at different times sure as long as we can test it but",
    "start": "728200",
    "end": "736240"
  },
  {
    "text": "is it okay to add 2 million users the day before after basically we finalized",
    "start": "736240",
    "end": "742040"
  },
  {
    "text": "the audience list no probably not because we cannot test it so after that we Lish the timeline um",
    "start": "742040",
    "end": "751680"
  },
  {
    "text": "back in August we know that we want to send to roughly 4 million users uh in less than 5 seconds and we want to have",
    "start": "751680",
    "end": "759440"
  },
  {
    "text": "the MVP ready by September 2023 and we know that we want to make sure that we cannot D ourselves by the",
    "start": "759440",
    "end": "766440"
  },
  {
    "text": "end of December 2023 so that enough time could be given so that new client",
    "start": "766440",
    "end": "771800"
  },
  {
    "text": "changes could be rolled out to users and by January 2024 we want to make sure",
    "start": "771800",
    "end": "776880"
  },
  {
    "text": "that all testings are done so that when Super Bowl really starts we're ready",
    "start": "776880",
    "end": "782279"
  },
  {
    "text": "because we have tested everything well let me take you on the",
    "start": "782279",
    "end": "787480"
  },
  {
    "text": "core of this presentation with which is the Deep dive into the architecture of",
    "start": "787480",
    "end": "792639"
  },
  {
    "text": "the system to send notifications and to send 4 million notifications in 5 seconds well I still",
    "start": "792639",
    "end": "800199"
  },
  {
    "text": "use 4 million maybe I should change it to six but you get the idea it's it's a",
    "start": "800199",
    "end": "805519"
  },
  {
    "text": "lot of Challenge and at dualingo we have an operating principle of embrace",
    "start": "805519",
    "end": "810760"
  },
  {
    "text": "challenges to summarize the challenges in this project we have three uh the",
    "start": "810760",
    "end": "816160"
  },
  {
    "text": "first one is speed I'll call it how fast second one is scale which is how big",
    "start": "816160",
    "end": "821959"
  },
  {
    "text": "third one is timing which is what time the first challenge is speed of course",
    "start": "821959",
    "end": "828040"
  },
  {
    "text": "so if you uh well I already told you that the speed is um 800,000",
    "start": "828040",
    "end": "834120"
  },
  {
    "text": "notifications per second roughly and if you think of the population of Boston um",
    "start": "834120",
    "end": "841440"
  },
  {
    "text": "last time I check on Google Boston has a population of 650,000",
    "start": "841440",
    "end": "847720"
  },
  {
    "text": "people uh I think that was back in 2022 now it's probably a little more but",
    "start": "847720",
    "end": "854199"
  },
  {
    "text": "to send notification to all these people at our rate it'll take less than one second it's just that",
    "start": "854199",
    "end": "861480"
  },
  {
    "text": "fast second problem and challenge is scale at dingo we host a lot of our",
    "start": "861480",
    "end": "867920"
  },
  {
    "text": "microservices uh on AWS and unfortunately that cost us",
    "start": "867920",
    "end": "874480"
  },
  {
    "text": "money yeah so um I mean I wish it was free um but um to build a system that",
    "start": "874480",
    "end": "881480"
  },
  {
    "text": "send notification really fast you also have to make sure that it's scaled up to the point that it can do its job and you",
    "start": "881480",
    "end": "888600"
  },
  {
    "text": "also want to make sure that your backand is scaled up fast enough to do its job",
    "start": "888600",
    "end": "893800"
  },
  {
    "text": "and on top of that you probably don't want to spend too much money on cloud infrastructures and that is also a",
    "start": "893800",
    "end": "900240"
  },
  {
    "text": "challenge at scale and the third challenge here is timing for those of",
    "start": "900240",
    "end": "905759"
  },
  {
    "text": "you who are kind of into sports event you'll know that sports events are kind of",
    "start": "905759",
    "end": "910880"
  },
  {
    "text": "unpredictable because U people get injured or sometimes it goes faster or slower even the more predictable ones",
    "start": "910880",
    "end": "918560"
  },
  {
    "text": "like the soccer games they're usually fixed 90 minutes but they have added times so it's also the same case with",
    "start": "918560",
    "end": "925399"
  },
  {
    "text": "the Super Bowl Super Bowls has timeouts and everything and the problem with a ad",
    "start": "925399",
    "end": "932120"
  },
  {
    "text": "campaign during Super Bowl is that you don't know exactly when your ad is going to air and you see our plan is to show",
    "start": "932120",
    "end": "938959"
  },
  {
    "text": "the notification right after our ad airs so we have to build a system that is on demand so that when some marketer",
    "start": "938959",
    "end": "946279"
  },
  {
    "text": "presses a button potentially a big red button um then or at then our",
    "start": "946279",
    "end": "953959"
  },
  {
    "text": "notification goes out um so we have to build such an ond demand system and we want to make sure that maybe if two",
    "start": "953959",
    "end": "960440"
  },
  {
    "text": "marketers press the same button at the same time no duplicate messages go up so",
    "start": "960440",
    "end": "965600"
  },
  {
    "text": "that's the challenge of timing to summarize uh we have the following",
    "start": "965600",
    "end": "971160"
  },
  {
    "text": "technical uh requirements uh to build this system we want to send notification at the Target rate we want to get all",
    "start": "971160",
    "end": "978240"
  },
  {
    "text": "the cloud resources we need just in time and we want to ensure resiliency and item potency um well I just explained uh",
    "start": "978240",
    "end": "986600"
  },
  {
    "text": "item potency uh here uh by the marketer example I hope you all understand um but",
    "start": "986600",
    "end": "993120"
  },
  {
    "text": "here's our system it's basically um a asynchronous system we have a lot of our",
    "start": "993120",
    "end": "999360"
  },
  {
    "text": "services on AWS and U I'll walk you through some of the use cases that we",
    "start": "999360",
    "end": "1004639"
  },
  {
    "text": "have and uh to basically show you how the system works let's assume that it's um a few",
    "start": "1004639",
    "end": "1012240"
  },
  {
    "text": "months before the Super Bowl you want to upload a notification campaign it starts",
    "start": "1012240",
    "end": "1017480"
  },
  {
    "text": "out with an engineer cre a campaign with like a whole list of user ID the server",
    "start": "1017480",
    "end": "1023519"
  },
  {
    "text": "after receiving that request will acknowledge the request and then asynchronously fetching all the data",
    "start": "1023519",
    "end": "1029240"
  },
  {
    "text": "from Dynamo DB after getting the data they will put the parts data into S3",
    "start": "1029240",
    "end": "1035199"
  },
  {
    "text": "locks the result into cloudwatch and a few month has come by",
    "start": "1035199",
    "end": "1040640"
  },
  {
    "text": "and maybe it's Super Bowl day already you want to get ready and because you want your backend infrastructure to be",
    "start": "1040640",
    "end": "1047640"
  },
  {
    "text": "scaled up well enough to uh handle the incoming traffic as well as being able to send out the",
    "start": "1047640",
    "end": "1054360"
  },
  {
    "text": "notification so what happens then the cloud operation admin will",
    "start": "1054360",
    "end": "1060039"
  },
  {
    "text": "actually have to scale up the ASG the automatic scaling group first and then the engineers uh who's responsible at",
    "start": "1060039",
    "end": "1067440"
  },
  {
    "text": "the time it was me uh would scale up the workers in the ECS console just change a",
    "start": "1067440",
    "end": "1072559"
  },
  {
    "text": "few numbers the workers will then fetch data from S3 which we previously stored",
    "start": "1072559",
    "end": "1078480"
  },
  {
    "text": "all the the data and store that data in memory that data will be like a mapping",
    "start": "1078480",
    "end": "1083960"
  },
  {
    "text": "from the user ID to the device IDs after all that the workers will log their",
    "start": "1083960",
    "end": "1089880"
  },
  {
    "text": "complete status to cloudwatch so maybe um a few hours has",
    "start": "1089880",
    "end": "1095640"
  },
  {
    "text": "gone by and someone was uh watching the ad and the ad the ad shows up and",
    "start": "1095640",
    "end": "1101919"
  },
  {
    "text": "someone presses the big red button so what happens after that the marketing admin uh hits the go",
    "start": "1101919",
    "end": "1109480"
  },
  {
    "text": "button and after that the API server will actually send out 50 plus messages",
    "start": "1109480",
    "end": "1114760"
  },
  {
    "text": "to the fifo first thing first out sqsq the interim worker in between after",
    "start": "1114760",
    "end": "1122000"
  },
  {
    "text": "receiving those messages they'll dispatch 10,000 Plus sqs messages to the",
    "start": "1122000",
    "end": "1127200"
  },
  {
    "text": "next queue and finally the last tier of notification workers will send",
    "start": "1127200",
    "end": "1132520"
  },
  {
    "text": "notifications by calling the batch APNs and fcms API there are Apple Google's",
    "start": "1132520",
    "end": "1139360"
  },
  {
    "text": "notification API if you're not aware so after all that after we're done making",
    "start": "1139360",
    "end": "1145400"
  },
  {
    "text": "all the network requests the workers will log their process time into cloudwatch so that we can analyze their",
    "start": "1145400",
    "end": "1153760"
  },
  {
    "text": "performance so let's come back to some of these technical requirements that we",
    "start": "1153760",
    "end": "1158840"
  },
  {
    "text": "discussed earlier because um if the system doesn't answer all these questions it's still not working",
    "start": "1158840",
    "end": "1167080"
  },
  {
    "text": "right the first question is to uh understand does it send notification at",
    "start": "1167080",
    "end": "1172280"
  },
  {
    "text": "the Target rate well it's kind of hard for me to convince you but um um some of",
    "start": "1172280",
    "end": "1178360"
  },
  {
    "text": "you who are familiar with sqs might notice that sqs in itself has an inflight message limit of 120,000",
    "start": "1178360",
    "end": "1186039"
  },
  {
    "text": "messages per second and just to send 4 million notification within 5 seconds",
    "start": "1186039",
    "end": "1191520"
  },
  {
    "text": "would put us at 800,000 messages per second and how does that",
    "start": "1191520",
    "end": "1196919"
  },
  {
    "text": "happen because actually we simply used the um technique of batching we batched",
    "start": "1196919",
    "end": "1203240"
  },
  {
    "text": "500 iOS users together in one message 250 for Android and that put us under",
    "start": "1203240",
    "end": "1209760"
  },
  {
    "text": "the limit second question we want to answer is can we provision all the cloud",
    "start": "1209760",
    "end": "1216039"
  },
  {
    "text": "resources we need in time to solve this problem we actually got in touch with a",
    "start": "1216039",
    "end": "1221840"
  },
  {
    "text": "technical contact from AWS uh who helped us drafted an imem infrastructure event",
    "start": "1221840",
    "end": "1228039"
  },
  {
    "text": "management document which included detailed steps like when and how you",
    "start": "1228039",
    "end": "1233960"
  },
  {
    "text": "would need to scale up as well as some of the more concrete steps such as",
    "start": "1233960",
    "end": "1239360"
  },
  {
    "text": "things like um the cach and um uh the cash connection limits and also Dynamo",
    "start": "1239360",
    "end": "1246679"
  },
  {
    "text": "limits that you have to consider to address in these kind of situation I'll talk more about that uh later and also",
    "start": "1246679",
    "end": "1255039"
  },
  {
    "text": "we also give the superb out service its own dedicated ECS cluster and um I'll",
    "start": "1255039",
    "end": "1260799"
  },
  {
    "text": "tell you just in a bit why we did that last question we want to answer is",
    "start": "1260799",
    "end": "1266880"
  },
  {
    "text": "can we ensure item potency to solve this problem we actually cheated a little bit we used a",
    "start": "1266880",
    "end": "1273600"
  },
  {
    "text": "fivefold first thing first out queue from AWS sqs service well you see the",
    "start": "1273600",
    "end": "1278919"
  },
  {
    "text": "fivefold Q in itself it D duplicates messages by message identifiers so uh it",
    "start": "1278919",
    "end": "1285440"
  },
  {
    "text": "also has a d duplication window of five minutes so when multiple marketers press the same big red buttons and it'll try",
    "start": "1285440",
    "end": "1293080"
  },
  {
    "text": "to send the same messages through the queue the queue will duplicate the message for us and we basically just",
    "start": "1293080",
    "end": "1300039"
  },
  {
    "text": "hand off that work and to keep in mind that uh the queue itself does have a",
    "start": "1300039",
    "end": "1306039"
  },
  {
    "text": "limited capacity for the fivefold Q it has limited capacity of 300 requests per",
    "start": "1306039",
    "end": "1312039"
  },
  {
    "text": "second so if you're building a system like this uh for your own purpose you",
    "start": "1312039",
    "end": "1317120"
  },
  {
    "text": "also might want to use a cash or table if you want to get past some of those",
    "start": "1317120",
    "end": "1322400"
  },
  {
    "text": "limits so let's get back to the system diagram graph um does it send",
    "start": "1322400",
    "end": "1328159"
  },
  {
    "text": "notification at the Target rate yes can it provision all can we provision all",
    "start": "1328159",
    "end": "1334080"
  },
  {
    "text": "the cloud resources we need in time yeah does it ensure item potency yeah so some",
    "start": "1334080",
    "end": "1341840"
  },
  {
    "text": "of you may say that um we're probably done here um",
    "start": "1341840",
    "end": "1348880"
  },
  {
    "text": "oh I'm kind of inclined to say so but actually not um so let's look at this",
    "start": "1350720",
    "end": "1356360"
  },
  {
    "text": "timeline of where we are now we basically are still at September",
    "start": "1356360",
    "end": "1362039"
  },
  {
    "text": "2023 it's when we built our MVP and next subject is everyone's favorite subject",
    "start": "1362039",
    "end": "1368679"
  },
  {
    "text": "which is testing how we tested it um as I just",
    "start": "1368679",
    "end": "1374400"
  },
  {
    "text": "mentioned at dingo we love to test things by AB testing we are kind of",
    "start": "1374400",
    "end": "1379760"
  },
  {
    "text": "obsessed with testing AB testing every single detail in the app but this is honestly not a thing that we can ab test",
    "start": "1379760",
    "end": "1387200"
  },
  {
    "text": "because we don't want to leak our precious marketing creatives to our users you don't want to show the Dual",
    "start": "1387200",
    "end": "1394720"
  },
  {
    "text": "spot on like something else because that'll ruin all the fun so we have to",
    "start": "1394720",
    "end": "1400279"
  },
  {
    "text": "came up with our um own way of testing the service and I'll walk you through uh",
    "start": "1400279",
    "end": "1406159"
  },
  {
    "text": "a few examples of how we tested the service service first we tested the throughput",
    "start": "1406159",
    "end": "1412159"
  },
  {
    "text": "of the service um and um this is what I call how we test the",
    "start": "1412159",
    "end": "1417600"
  },
  {
    "text": "MVP at the beginning we tested with not really notifications we tested with what",
    "start": "1417600",
    "end": "1423039"
  },
  {
    "text": "we call silent notifications this is effectively a empty payload that we sent",
    "start": "1423039",
    "end": "1428520"
  },
  {
    "text": "to the client devices and see what happens and it turns out it seems um",
    "start": "1428520",
    "end": "1434640"
  },
  {
    "text": "that we ran into some bottlenecks uh and the bottleneck we ran into into was the threat count here you see we actually",
    "start": "1434640",
    "end": "1441679"
  },
  {
    "text": "built our service in Python I know many of you might disagree and um but if you",
    "start": "1441679",
    "end": "1448279"
  },
  {
    "text": "are an expert in Python you would know that um when you build like multi-threaded um programs in Python you",
    "start": "1448279",
    "end": "1456320"
  },
  {
    "text": "run into issues with global interpreter log and all sorts of that things and that's the issue that we ran into so",
    "start": "1456320",
    "end": "1464600"
  },
  {
    "text": "what could we do we decrease the number of threads and continue with the test decrease it from 10 to 5 to 1 and the",
    "start": "1464600",
    "end": "1473039"
  },
  {
    "text": "bottom X seems to be gone then we decided to test with a larger audience because at the beginning",
    "start": "1473039",
    "end": "1479760"
  },
  {
    "text": "we tested with 500,000 users now we want to test with three million users but then the",
    "start": "1479760",
    "end": "1486559"
  },
  {
    "text": "bottleneck came back as you can see we decreased the number of threads but to get the same",
    "start": "1486559",
    "end": "1493120"
  },
  {
    "text": "performance we have to have a lot of tasks and it was really problematic to scale up to that many task count so we",
    "start": "1493120",
    "end": "1501000"
  },
  {
    "text": "decided to bin pack and put multiple processes within the same task we experimented with a few setups and got",
    "start": "1501000",
    "end": "1508600"
  },
  {
    "text": "to a point that we're okay with the next thing we test was the",
    "start": "1508600",
    "end": "1514039"
  },
  {
    "text": "cloud resources this is when we tested whether we can scale things up fast enough the first thing we ran was uh",
    "start": "1514039",
    "end": "1521640"
  },
  {
    "text": "pretty straightforward we want to make sure that we can scale up the system to send the notification really fast",
    "start": "1521640",
    "end": "1529000"
  },
  {
    "text": "um in this case it's the superb service it's actually relatively simple you just",
    "start": "1529000",
    "end": "1535919"
  },
  {
    "text": "go in you change one number and it scales up it's just like magic um and then we want to scale up",
    "start": "1535919",
    "end": "1544279"
  },
  {
    "text": "the back end um when we did that go through a few more steps and understand what services",
    "start": "1544279",
    "end": "1550919"
  },
  {
    "text": "we need to scale up so we found those services and we changed a few more numbers and they scale up just like your",
    "start": "1550919",
    "end": "1558279"
  },
  {
    "text": "ual life um and then the third question we want to answer is can we actually",
    "start": "1558279",
    "end": "1564480"
  },
  {
    "text": "scale up both the super out service and the back end and it turns out that we",
    "start": "1564480",
    "end": "1570320"
  },
  {
    "text": "ran into some trouble here you see that when you have services in the same um",
    "start": "1570320",
    "end": "1576440"
  },
  {
    "text": "AWS ECS cluster and when you try to scale up all of them AWS is actually",
    "start": "1576440",
    "end": "1582520"
  },
  {
    "text": "doing some maybe like bin packing problems and trying to figure out the optimal solution or some good",
    "start": "1582520",
    "end": "1591320"
  },
  {
    "text": "Solutions sorry but in the reality um what we",
    "start": "1591679",
    "end": "1600919"
  },
  {
    "text": "observed was that when we place the superb out service in the same cluster as the backend it has to wait in some",
    "start": "1600919",
    "end": "1607960"
  },
  {
    "text": "sort of a virtual queue it has to wait for all the other backend services to scale up so that it can scale up or vice",
    "start": "1607960",
    "end": "1616120"
  },
  {
    "text": "versa and that's not really the scenario we want to see happening because we",
    "start": "1616120",
    "end": "1621279"
  },
  {
    "text": "don't want to see our backend Services waiting because our notification service is scaling up and we don't want our",
    "start": "1621279",
    "end": "1628039"
  },
  {
    "text": "notification service not being able to scale up because backhand is trying to consume more resources so that's when we",
    "start": "1628039",
    "end": "1635000"
  },
  {
    "text": "gave it a dedicated ECS cluster so that it get rid of that queue and last but",
    "start": "1635000",
    "end": "1640840"
  },
  {
    "text": "not least we want to ensure that we can scale up both of the back end and Super",
    "start": "1640840",
    "end": "1646320"
  },
  {
    "text": "Service in less than three hours so that we don't have to waste money to have these service running around like maybe",
    "start": "1646320",
    "end": "1654120"
  },
  {
    "text": "days before the Super Bowl and we did that we tested it works then we move on",
    "start": "1654120",
    "end": "1659760"
  },
  {
    "text": "to test on real users well I said that I don't uh we",
    "start": "1659760",
    "end": "1665200"
  },
  {
    "text": "don't want to leak the creatives of dual spot to our users but I never said that",
    "start": "1665200",
    "end": "1671240"
  },
  {
    "text": "we couldn't test on real users so actually we tried uh to test in plain s",
    "start": "1671240",
    "end": "1677480"
  },
  {
    "text": "side using our new notification systems in October we tested on 1 million users",
    "start": "1677480",
    "end": "1683159"
  },
  {
    "text": "using a Halloween themed notification in November it was like a year in review",
    "start": "1683159",
    "end": "1688360"
  },
  {
    "text": "theme notification and in January it we tested on four million users with a welcome back from New Year message and",
    "start": "1688360",
    "end": "1695960"
  },
  {
    "text": "this is all us testing in plain site without leaking the um creative and I",
    "start": "1695960",
    "end": "1701360"
  },
  {
    "text": "want to uh mention that uh one of our internal tools called Zombie Mode really helped us in this process uh zombie mode",
    "start": "1701360",
    "end": "1709080"
  },
  {
    "text": "is essentially a mode that we created so that when we turn it on the user's device will stop making the request to",
    "start": "1709080",
    "end": "1716120"
  },
  {
    "text": "the back end for a certain amount of time until it tried to check that flag again it helps us in the scenarios where",
    "start": "1716120",
    "end": "1724080"
  },
  {
    "text": "backend cannot handle a surge in traffic and it needed time to recover so thanks",
    "start": "1724080",
    "end": "1730799"
  },
  {
    "text": "to that mode we were actually more comfortable with testing with real users because we know that we wouldn't have",
    "start": "1730799",
    "end": "1736480"
  },
  {
    "text": "extended periods of outages one of our lessons learned here is to always actually send yourself a",
    "start": "1736480",
    "end": "1743159"
  },
  {
    "text": "copy before sending it to the user because you never know uh in what way",
    "start": "1743159",
    "end": "1748240"
  },
  {
    "text": "your internal representation of the message could leak out to the user and you never want that to",
    "start": "1748240",
    "end": "1754399"
  },
  {
    "text": "happen and last but not least uh we tested uh within mind our microservice",
    "start": "1754399",
    "end": "1760240"
  },
  {
    "text": "architecture here are some of the things that um we saw in that imem",
    "start": "1760240",
    "end": "1765760"
  },
  {
    "text": "infrastructure event management document um this is also the work of my colleague",
    "start": "1765760",
    "end": "1771440"
  },
  {
    "text": "Milo mostly the first thing that we consider was is our M cach red is",
    "start": "1771440",
    "end": "1776919"
  },
  {
    "text": "hitting connection limit or can we use a proxy for some of the tables that we have this is actually a real thing that",
    "start": "1776919",
    "end": "1784240"
  },
  {
    "text": "we did one of our services uh was having problems scaling up past 400ish tasks",
    "start": "1784240",
    "end": "1790880"
  },
  {
    "text": "because it was hitting the connection limit well it wasn't really a priority to address so people kind of put it off",
    "start": "1790880",
    "end": "1797640"
  },
  {
    "text": "until this point you really need to scale up so what we did was we Pro put a",
    "start": "1797640",
    "end": "1802919"
  },
  {
    "text": "proxy behind the data store and it actually can scale up to however many tasks you want problem",
    "start": "1802919",
    "end": "1809720"
  },
  {
    "text": "solved second problem is uh where our Dynamo DB throttle well Dynamo DB claims",
    "start": "1809720",
    "end": "1816200"
  },
  {
    "text": "to be like infinitely scalable but some of you may know that it doesn't handle the spiky traffic really well especially",
    "start": "1816200",
    "end": "1823799"
  },
  {
    "text": "if you're provisioning your resources so we consider should we switch some of",
    "start": "1823799",
    "end": "1829200"
  },
  {
    "text": "these tables to On Demand briefly or should be like over provision it to a",
    "start": "1829200",
    "end": "1834240"
  },
  {
    "text": "point that it wouldn't throttle even with the spiking traffic the last two are the things that",
    "start": "1834240",
    "end": "1840600"
  },
  {
    "text": "we consider but we actually never addressed but I thought it would be relevant to uh mention here one of the",
    "start": "1840600",
    "end": "1847120"
  },
  {
    "text": "things that we consider was uh whether our retry policy was reasonable because",
    "start": "1847120",
    "end": "1852320"
  },
  {
    "text": "you can see we have so many microservices and when one microservice call the other might retry three times",
    "start": "1852320",
    "end": "1859720"
  },
  {
    "text": "and the other call the third one three times and goes on forever and it grows",
    "start": "1859720",
    "end": "1866240"
  },
  {
    "text": "exponentially and you don't want that to happen um and last but not least uh we",
    "start": "1866240",
    "end": "1871880"
  },
  {
    "text": "know that we are going to request a certain subset of our users so maybe uh",
    "start": "1871880",
    "end": "1877760"
  },
  {
    "text": "we could have cached some of that user data that we know that are going to be",
    "start": "1877760",
    "end": "1883480"
  },
  {
    "text": "requested but because of time limit of this project we obviously didn't get into the detail of all that but we got",
    "start": "1883480",
    "end": "1890200"
  },
  {
    "text": "to a point where we were happy so on the day of the Super Bowl we have a pretty",
    "start": "1890200",
    "end": "1896159"
  },
  {
    "text": "well-written Playbook we have Engineers on the zoom really carefully watching everything scaling things up and we have",
    "start": "1896159",
    "end": "1903679"
  },
  {
    "text": "marketers potentially at their TV holding popcorns um that's how I imagine what",
    "start": "1903679",
    "end": "1910279"
  },
  {
    "text": "they're doing um and we have a square Go Button um some of you might ask well why",
    "start": "1910279",
    "end": "1918080"
  },
  {
    "text": "isn't it round um I might explain it to you just a bit later but when Super Bowl starts",
    "start": "1918080",
    "end": "1926120"
  },
  {
    "text": "everybody was watching and we were watching for a different reason and uh",
    "start": "1926120",
    "end": "1931240"
  },
  {
    "text": "our marketers were waiting anxiously for the ad to show up it kind of didn't show",
    "start": "1931240",
    "end": "1936679"
  },
  {
    "text": "up for 20 minutes when it was supposed to and when it finally did two marketers click on that square button and one",
    "start": "1936679",
    "end": "1944880"
  },
  {
    "text": "message went out all right so the campaign results were actually wonderful",
    "start": "1944880",
    "end": "1950200"
  },
  {
    "text": "um 99% of notifications were out in 5.7 seconds",
    "start": "1950200",
    "end": "1955279"
  },
  {
    "text": "95% in 3.9 seconds um there was a figma blog post written about it and there's",
    "start": "1955279",
    "end": "1961840"
  },
  {
    "text": "also a Wall Street Journal uh on our Super Bowl campaign and I think someone",
    "start": "1961840",
    "end": "1967039"
  },
  {
    "text": "on Twitter or X actually posted about our notification campaign as well so",
    "start": "1967039",
    "end": "1974039"
  },
  {
    "text": "it's time to move on and talk about what we learned and what we would have have done differently in this",
    "start": "1974039",
    "end": "1979919"
  },
  {
    "text": "project well some of the mistakes we wish we had avoided um like relates back",
    "start": "1979919",
    "end": "1986000"
  },
  {
    "text": "to the very fundamentals um we started out this project using python but it",
    "start": "1986000",
    "end": "1991720"
  },
  {
    "text": "turns out it actually gave us a ton of performance bottleneck we thought about using async python we tried it uh it",
    "start": "1991720",
    "end": "2000000"
  },
  {
    "text": "didn't really work with the toolings that we have and actually um we didn't",
    "start": "2000000",
    "end": "2005799"
  },
  {
    "text": "end up trying because uh at the time our original notification stack was built in",
    "start": "2005799",
    "end": "2010919"
  },
  {
    "text": "Python and we don't want to reinvent all the technology all the authentications the connections that we established with",
    "start": "2010919",
    "end": "2018200"
  },
  {
    "text": "the outside apis so we stopped there because we wouldn't have enough time to test but actually two month um actually",
    "start": "2018200",
    "end": "2027200"
  },
  {
    "text": "one month after the project um my manager came out to me and say well have",
    "start": "2027200",
    "end": "2032240"
  },
  {
    "text": "you seen this hecken noon article from 2019 that says uh using gold to build a",
    "start": "2032240",
    "end": "2038600"
  },
  {
    "text": "system that sends millions of notifications uh within a few second um I was like that's",
    "start": "2038600",
    "end": "2046679"
  },
  {
    "text": "interesting I wish I had read that article it could have given us a lot more inspiration and lessons um and that",
    "start": "2046679",
    "end": "2056480"
  },
  {
    "text": "also uses go which is a completely different stack than what we use at dual dualingo but that could have helped us",
    "start": "2056480",
    "end": "2065000"
  },
  {
    "text": "the second thing that we wish we had improved was to optimize the memory well",
    "start": "2065000",
    "end": "2070280"
  },
  {
    "text": "I told you that at the end we want to send 6 million plus notification and to pack all these 6",
    "start": "2070280",
    "end": "2077118"
  },
  {
    "text": "million plus device IDs and user IDs into the memory of a service it was",
    "start": "2077119",
    "end": "2083040"
  },
  {
    "text": "actually a lot we ended up using seven gigs of memory for each task and you",
    "start": "2083040",
    "end": "2089358"
  },
  {
    "text": "remember that we have a lot of tasks which means that it requires a lot of",
    "start": "2089359",
    "end": "2094398"
  },
  {
    "text": "cloud cost and intervention um my colleague Milo works really hard on that",
    "start": "2094399",
    "end": "2100400"
  },
  {
    "text": "and we finally got it across but if we have time we would have optimized memories and resource usage in general",
    "start": "2100400",
    "end": "2109040"
  },
  {
    "text": "and last but not least we want to uh have better observability into the client Behavior but I told you earlier",
    "start": "2109040",
    "end": "2116680"
  },
  {
    "text": "that our Android app used to have a problem when you send a notification to the app and send a request right back",
    "start": "2116680",
    "end": "2123440"
  },
  {
    "text": "that's effectively dsing ourself that's not a problem anymore or we discovered new problems um because uh we discovered",
    "start": "2123440",
    "end": "2131839"
  },
  {
    "text": "that when someone clicks on the notification it actually multiplies the number um I wouldn't say multiply it",
    "start": "2131839",
    "end": "2139119"
  },
  {
    "text": "triggers multiple requests to the back end that number may be 10 20 50 uh and",
    "start": "2139119",
    "end": "2145640"
  },
  {
    "text": "that's not good because even if uh like 5% of people click on that notification",
    "start": "2145640",
    "end": "2152000"
  },
  {
    "text": "and if that multiplier is 50 you're effectively making like two times our",
    "start": "2152000",
    "end": "2159160"
  },
  {
    "text": "notification request back and that's a lot of request back to your back end in a short amount of",
    "start": "2159160",
    "end": "2165960"
  },
  {
    "text": "time so some of our lessons learned here are uh the following the first one is to",
    "start": "2165960",
    "end": "2171599"
  },
  {
    "text": "be open-minded about the design but be more rigorous with testing I wouldn't",
    "start": "2171599",
    "end": "2176760"
  },
  {
    "text": "say our design was the best it was really far from the best honestly but um",
    "start": "2176760",
    "end": "2183440"
  },
  {
    "text": "we went with one of the design that we could iterate and test on we know that",
    "start": "2183440",
    "end": "2188760"
  },
  {
    "text": "testing will be the core of this project because uh as long as you can test it",
    "start": "2188760",
    "end": "2193800"
  },
  {
    "text": "you can make sure that the system work the way that it's intended the second Le lesson learned is to always build the",
    "start": "2193800",
    "end": "2200359"
  },
  {
    "text": "system with resilience and robustness as we just mentioned multiple marketers can",
    "start": "2200359",
    "end": "2205720"
  },
  {
    "text": "press the same button at the same time and you don't want duplicate message to",
    "start": "2205720",
    "end": "2210880"
  },
  {
    "text": "go out to your users and this is just one example of the things that you",
    "start": "2210880",
    "end": "2216000"
  },
  {
    "text": "should take care of when you design a system like this and the third thing is things can always go wrong so accept it",
    "start": "2216000",
    "end": "2224119"
  },
  {
    "text": "I'm not really saying to do nothing about it actually we took a rather active approach we wrote a very detailed",
    "start": "2224119",
    "end": "2232400"
  },
  {
    "text": "uh work handbook uh to tell Engineers on that day what you should do on the exact",
    "start": "2232400",
    "end": "2238119"
  },
  {
    "text": "time of the day and also uh it included backup plans what if this a thing fails",
    "start": "2238119",
    "end": "2244680"
  },
  {
    "text": "what if this B thing fail we even have a backup plan plan for like the whole notification not going out what should",
    "start": "2244680",
    "end": "2251280"
  },
  {
    "text": "we do then yeah so um I think what we are saying here is to face it with a more",
    "start": "2251280",
    "end": "2258640"
  },
  {
    "text": "active attitude and that is all of my presentation uh thank you all for",
    "start": "2258640",
    "end": "2264520"
  },
  {
    "text": "listening and I'll leave it up for Q&A thank you",
    "start": "2264520",
    "end": "2270720"
  },
  {
    "text": "hi thank you for this amazing talk um I was curious about the number of um",
    "start": "2285480",
    "end": "2291480"
  },
  {
    "text": "instances in your ECS cluster and if you if you guys try to um vary that number",
    "start": "2291480",
    "end": "2298280"
  },
  {
    "text": "or do some test or what was it fixed at 5K as the limit for like the max amount",
    "start": "2298280",
    "end": "2303640"
  },
  {
    "text": "for the ECS cluster yeah I think um this is not my area of exse to be honest",
    "start": "2303640",
    "end": "2311760"
  },
  {
    "text": "but I think we did uh like experiment with different like instant sizes uh and",
    "start": "2311760",
    "end": "2317480"
  },
  {
    "text": "everything but as I mentioned one of the things that we could have done better was to optimize memory and at the end we",
    "start": "2317480",
    "end": "2324720"
  },
  {
    "text": "were kind of like bounded by memory because we tried to store all this information in memory and uh so that",
    "start": "2324720",
    "end": "2331880"
  },
  {
    "text": "lead us to um in the decision of how we decide to select the instance types",
    "start": "2331880",
    "end": "2338680"
  },
  {
    "text": "which is ended up being like memory intensive instance types and 5,000 is I",
    "start": "2338680",
    "end": "2345000"
  },
  {
    "text": "think it's just one of the numbers that we were comfortable with that makes sure that we can send out notification that",
    "start": "2345000",
    "end": "2351119"
  },
  {
    "text": "fast um like there could be a limit uh but I think it's mostly handled by my",
    "start": "2351119",
    "end": "2357400"
  },
  {
    "text": "colleague with some negotiation with",
    "start": "2357400",
    "end": "2361640"
  },
  {
    "text": "AWS yeah um sorry get another",
    "start": "2363640",
    "end": "2371400"
  },
  {
    "text": "micone thank you for an excellent talk uh I was wondering so when we talk about",
    "start": "2371400",
    "end": "2376880"
  },
  {
    "text": "um workloads that need to scale very rapidly and are very occasional my mind goes to serverless so I'm curious did",
    "start": "2376880",
    "end": "2383119"
  },
  {
    "text": "you consider maybe using AWS lambdas for some of the workloads in instead of uh",
    "start": "2383119",
    "end": "2388319"
  },
  {
    "text": "looking heavily into your uh your container cluster and what was the role serverless in general yeah I I think",
    "start": "2388319",
    "end": "2395440"
  },
  {
    "text": "that was definitely one of the suggestions that was being made early on in the project and I I think someone",
    "start": "2395440",
    "end": "2402760"
  },
  {
    "text": "suggested this to me and promised me well uh like even if it's Lambda it can",
    "start": "2402760",
    "end": "2408920"
  },
  {
    "text": "also like basically pre spin up all the things uh in the under the hood and you",
    "start": "2408920",
    "end": "2415880"
  },
  {
    "text": "know you are going to get all these resources but at the time like um we",
    "start": "2415880",
    "end": "2421920"
  },
  {
    "text": "just felt safer like working with uh like all the existing like the containers and the the ECS Services I",
    "start": "2421920",
    "end": "2430079"
  },
  {
    "text": "think uh without seeing like the machine spin up for you it still puts us like",
    "start": "2430079",
    "end": "2435319"
  },
  {
    "text": "into the area of like we're going to be like more concerned whether this is going to work or not but this is",
    "start": "2435319",
    "end": "2442400"
  },
  {
    "text": "definitely valid because this is like a basically like a one shot operation and you pay for what you do so it would make",
    "start": "2442400",
    "end": "2450560"
  },
  {
    "text": "sense uh in another scenario if we could test it to use like Lambda yeah m",
    "start": "2450560",
    "end": "2459240"
  },
  {
    "text": "no no got it okay good I thanks for your presentation is oh sorry I don't think I",
    "start": "2465520",
    "end": "2471839"
  },
  {
    "text": "can hear you hi they said raised my voice thanks for",
    "start": "2471839",
    "end": "2478000"
  },
  {
    "text": "the presentation it was really uh great um did your team ever did your team",
    "start": "2478000",
    "end": "2483319"
  },
  {
    "text": "worry about whether like fcm or APNs was was going to handle the the load or",
    "start": "2483319",
    "end": "2491000"
  },
  {
    "text": "freak out did you have to reach out to anyone um to make sure that you know",
    "start": "2491000",
    "end": "2496520"
  },
  {
    "text": "that didn't happen yeah yeah that's a wonderful question uh so basically the question was about whether we're",
    "start": "2496520",
    "end": "2503079"
  },
  {
    "text": "concerned we're going to get rate limited or throttled by fcm or APNs right so uh the answer is yes we were",
    "start": "2503079",
    "end": "2511599"
  },
  {
    "text": "concerned but also at the very early stage of the project we took initiative",
    "start": "2511599",
    "end": "2516720"
  },
  {
    "text": "and we reached out uh we asked our uh some of our business uh like business",
    "start": "2516720",
    "end": "2522800"
  },
  {
    "text": "like uh people to reach out to the Google and Apple's reps to understand",
    "start": "2522800",
    "end": "2529240"
  },
  {
    "text": "whether we are going to get uh rate limited or not and we only uh like",
    "start": "2529240",
    "end": "2535720"
  },
  {
    "text": "actually green green flagged the most of these after we knew that it's not going to get re limited and yeah basically",
    "start": "2535720",
    "end": "2544680"
  },
  {
    "text": "that's the answer",
    "start": "2544680",
    "end": "2548040"
  },
  {
    "text": "um oh yeah",
    "start": "2550240",
    "end": "2554079"
  },
  {
    "text": "please hello nice presentation um I'm curious about how you folks approach",
    "start": "2569119",
    "end": "2574800"
  },
  {
    "text": "testing because um I can imagine you talk a little bit about the cost and",
    "start": "2574800",
    "end": "2580240"
  },
  {
    "text": "then like how many times do you have to actually keep testing that and then actually multiplying the cost versus the",
    "start": "2580240",
    "end": "2586400"
  },
  {
    "text": "times that you had to do testing so I'm a little bit about how you approach a problem testing times",
    "start": "2586400",
    "end": "2592359"
  },
  {
    "text": "cost yeah yeah I I think our philosophy was that um um at least we want to",
    "start": "2592359",
    "end": "2599240"
  },
  {
    "text": "minimize the risk so uh the cost in test are relatively smaller compared with the",
    "start": "2599240",
    "end": "2606720"
  },
  {
    "text": "cost of like the system not working at all first of all um but also like we try",
    "start": "2606720",
    "end": "2612400"
  },
  {
    "text": "to leverage the system as much as we can when we test on real users so as you can",
    "start": "2612400",
    "end": "2617760"
  },
  {
    "text": "see we tested on millions of real users in actual campaigns and in those campaigns we uh would have spent the",
    "start": "2617760",
    "end": "2624920"
  },
  {
    "text": "money anyway and that was like basically no cost for that kind of test but on top",
    "start": "2624920",
    "end": "2632480"
  },
  {
    "text": "of that we did uh ran like multiple um Cloud tests basically to try to scale up",
    "start": "2632480",
    "end": "2638800"
  },
  {
    "text": "the infrastructure only and not try to send anything um I think it's worth it",
    "start": "2638800",
    "end": "2644440"
  },
  {
    "text": "to do maybe three five or even 10 times until you're at a point that you're",
    "start": "2644440",
    "end": "2649599"
  },
  {
    "text": "comfortable with the um system's ability to scale up because uh it's actually our",
    "start": "2649599",
    "end": "2656319"
  },
  {
    "text": "only um it's actually our first Super Bowl campaign and uh we don't want to mess it up so uh we want to be as much",
    "start": "2656319",
    "end": "2664559"
  },
  {
    "text": "risk averse as possible here so cost is a little less of a factor if you",
    "start": "2664559",
    "end": "2670280"
  },
  {
    "text": "consider we're already spending on the Super Bowl head yeah as the Super Bowl is a very",
    "start": "2670280",
    "end": "2677680"
  },
  {
    "text": "popular event were there any concerns about capacity not being available when you wanted to scale up because this was",
    "start": "2677680",
    "end": "2684000"
  },
  {
    "text": "such a high Spike usage yeah yeah absolutely that's a very good question",
    "start": "2684000",
    "end": "2689720"
  },
  {
    "text": "uh I think this is definitely something that uh we talked with our AWS representative and this is something",
    "start": "2689720",
    "end": "2697760"
  },
  {
    "text": "we definitely raised early on whether we're going to have enough memory whether we're going to have enough like",
    "start": "2697760",
    "end": "2705200"
  },
  {
    "text": "um like resource allocation for us uh that's definitely something that you would have to discuss when uh you",
    "start": "2705200",
    "end": "2712520"
  },
  {
    "text": "anticipate that your your program is either like uh compute or memory intensive I would say so",
    "start": "2712520",
    "end": "2720520"
  },
  {
    "text": "yeah uh hey uh really good uh presentation so for this project yeah I know you have",
    "start": "2720520",
    "end": "2728000"
  },
  {
    "text": "to do a lot of uh scaling but was there any strategy around like optimization for the service itself and did you use",
    "start": "2728000",
    "end": "2736000"
  },
  {
    "text": "any specific tools for that yeah um actually um I think we are not like",
    "start": "2736000",
    "end": "2744040"
  },
  {
    "text": "known for performance as a language learning company as you may tell um but",
    "start": "2744040",
    "end": "2749160"
  },
  {
    "text": "in this project we mainly focused on like to get it to a point where we can send notification that fast and uh the",
    "start": "2749160",
    "end": "2757359"
  },
  {
    "text": "way that we tested was actually just pretty simple we log some of the process times to Cloud watch and we would",
    "start": "2757359",
    "end": "2764520"
  },
  {
    "text": "process those logs afterwards and see how much time it takes to uh for like",
    "start": "2764520",
    "end": "2769559"
  },
  {
    "text": "each functions or each steps to execute and figure out the bottle NE and speed them up um I I think there are",
    "start": "2769559",
    "end": "2776280"
  },
  {
    "text": "definitely more performance like Frameworks out there that we could leverage um but um with the constraint",
    "start": "2776280",
    "end": "2783440"
  },
  {
    "text": "of this project we didn't go with all that but definitely it's like a good question and concern that um well if we",
    "start": "2783440",
    "end": "2790800"
  },
  {
    "text": "were to do this again we definitely do it right yeah yeah if there are more uh no more",
    "start": "2790800",
    "end": "2797920"
  },
  {
    "text": "question I can uh explain why we go with the square button now uh yeah um yeah",
    "start": "2797920",
    "end": "2806160"
  },
  {
    "text": "this is all thanks to uh my colleague JP here's work I asked him to uh initially",
    "start": "2806160",
    "end": "2812200"
  },
  {
    "text": "make a big red button make a round button as you may imagine but later we",
    "start": "2812200",
    "end": "2817400"
  },
  {
    "text": "discovered uh actually it might be a marketer who discovered that when you click on the corners of the button which",
    "start": "2817400",
    "end": "2824400"
  },
  {
    "text": "is like appears to be white but it actually will trigger the same function",
    "start": "2824400",
    "end": "2829520"
  },
  {
    "text": "as the uh as the square um you would call it well in video games term like",
    "start": "2829520",
    "end": "2835800"
  },
  {
    "text": "the hitbox is still a square uh and that's not good as much as we want to",
    "start": "2835800",
    "end": "2841880"
  },
  {
    "text": "avoid like human errors like we definitely want to avoid that so we made it a square so everybody knows what",
    "start": "2841880",
    "end": "2847680"
  },
  {
    "text": "they're doing and uh yeah I think it's time thank you all for being here",
    "start": "2847680",
    "end": "2855480"
  },
  {
    "text": "[Applause]",
    "start": "2856090",
    "end": "2860079"
  },
  {
    "text": "[Music]",
    "start": "2862070",
    "end": "2870570"
  }
]