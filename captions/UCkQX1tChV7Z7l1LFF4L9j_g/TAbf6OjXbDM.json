[
  {
    "start": "0",
    "end": "30000"
  },
  {
    "text": "[Music]",
    "start": "2009",
    "end": "17400"
  },
  {
    "text": "so last Talk of the night now apis are",
    "start": "17400",
    "end": "19880"
  },
  {
    "text": "well and good but my favorite thing to",
    "start": "19880",
    "end": "22000"
  },
  {
    "text": "end a night with is a good op story uh",
    "start": "22000",
    "end": "24800"
  },
  {
    "text": "and this is one of those now Simon has",
    "start": "24800",
    "end": "27160"
  },
  {
    "text": "kind of ruined my reveal here but I'll",
    "start": "27160",
    "end": "28519"
  },
  {
    "text": "do it anyway the challenge is to move",
    "start": "28519",
    "end": "30840"
  },
  {
    "start": "30000",
    "end": "48000"
  },
  {
    "text": "from myql to post grayers and also from",
    "start": "30840",
    "end": "33040"
  },
  {
    "text": "AWS to soft layer um the story behind",
    "start": "33040",
    "end": "35360"
  },
  {
    "text": "this is kind of long and convoluted but",
    "start": "35360",
    "end": "37600"
  },
  {
    "text": "basically there was sort of and I'll",
    "start": "37600",
    "end": "39640"
  },
  {
    "text": "explain in a second two different",
    "start": "39640",
    "end": "40960"
  },
  {
    "text": "situations that came up at roughly the",
    "start": "40960",
    "end": "42680"
  },
  {
    "text": "same time in s lanyard that meant that",
    "start": "42680",
    "end": "45440"
  },
  {
    "text": "both these moves made a lot of sense for",
    "start": "45440",
    "end": "47160"
  },
  {
    "text": "us so let's go through them now first of",
    "start": "47160",
    "end": "50199"
  },
  {
    "start": "48000",
    "end": "113000"
  },
  {
    "text": "all my SQL well it is a problem",
    "start": "50199",
    "end": "52000"
  },
  {
    "text": "generally it's my personal opinion but",
    "start": "52000",
    "end": "53520"
  },
  {
    "text": "why in particular is most equal a",
    "start": "53520",
    "end": "54800"
  },
  {
    "text": "problem uh first of all thing and the",
    "start": "54800",
    "end": "57239"
  },
  {
    "text": "big push for us here is that adding",
    "start": "57239",
    "end": "58640"
  },
  {
    "text": "columns is slow",
    "start": "58640",
    "end": "60559"
  },
  {
    "text": "scale at the time adding a column on our",
    "start": "60559",
    "end": "62680"
  },
  {
    "text": "biggest table is about 15 to 20 minutes",
    "start": "62680",
    "end": "64400"
  },
  {
    "text": "so adding four columns was over an hour",
    "start": "64400",
    "end": "66600"
  },
  {
    "text": "that's not really acceptable for a site",
    "start": "66600",
    "end": "68320"
  },
  {
    "text": "where you like and that locks the table",
    "start": "68320",
    "end": "70320"
  },
  {
    "text": "like you know say that this is our core",
    "start": "70320",
    "end": "72159"
  },
  {
    "text": "table that links users to to what events",
    "start": "72159",
    "end": "74080"
  },
  {
    "text": "they're going to which is a big part of",
    "start": "74080",
    "end": "75240"
  },
  {
    "text": "lanyard if that table is locked the site",
    "start": "75240",
    "end": "77960"
  },
  {
    "text": "basically can't run for an hour so",
    "start": "77960",
    "end": "79560"
  },
  {
    "text": "that's kind of unacceptable an a event",
    "start": "79560",
    "end": "81040"
  },
  {
    "text": "right scale it takes a lot longer to run",
    "start": "81040",
    "end": "83479"
  },
  {
    "text": "some of these additions it can take",
    "start": "83479",
    "end": "85680"
  },
  {
    "text": "sometimes multiple days but we do it",
    "start": "85680",
    "end": "86960"
  },
  {
    "text": "sort of um using uh picona so it's the",
    "start": "86960",
    "end": "90159"
  },
  {
    "text": "run in the background but at lanard we",
    "start": "90159",
    "end": "92079"
  },
  {
    "text": "didn't have option uh data Integrity",
    "start": "92079",
    "end": "94520"
  },
  {
    "text": "myle is quite poor it has foreign key",
    "start": "94520",
    "end": "96560"
  },
  {
    "text": "support just um it's not amazing foreign",
    "start": "96560",
    "end": "99159"
  },
  {
    "text": "key support it doesn't have certain",
    "start": "99159",
    "end": "100880"
  },
  {
    "text": "things like asserting check constraints",
    "start": "100880",
    "end": "102960"
  },
  {
    "text": "and asserting sort of types on foreign",
    "start": "102960",
    "end": "104920"
  },
  {
    "text": "keys and that kind of stuff and you can",
    "start": "104920",
    "end": "106399"
  },
  {
    "text": "sort of slip nulls into columns they",
    "start": "106399",
    "end": "108040"
  },
  {
    "text": "shouldn't be there and it corrupts very",
    "start": "108040",
    "end": "109399"
  },
  {
    "text": "easily and all manner of nauy things",
    "start": "109399",
    "end": "111079"
  },
  {
    "text": "that is a whole another talk by itself",
    "start": "111079",
    "end": "113040"
  },
  {
    "text": "um has a very limited set of data types",
    "start": "113040",
    "end": "115119"
  },
  {
    "text": "now my SQL has strings it has dates uh",
    "start": "115119",
    "end": "119079"
  },
  {
    "text": "doesn't have time zones on just has",
    "start": "119079",
    "end": "120360"
  },
  {
    "text": "dates um it has a few other things post",
    "start": "120360",
    "end": "122960"
  },
  {
    "text": "has arrays post has dates of time zones",
    "start": "122960",
    "end": "125280"
  },
  {
    "text": "post has IP address field types has a",
    "start": "125280",
    "end": "127000"
  },
  {
    "text": "whole manner of Rich tians of fields",
    "start": "127000",
    "end": "129119"
  },
  {
    "text": "with their own indexing their own fast",
    "start": "129119",
    "end": "130800"
  },
  {
    "text": "lookup functions all the stuff you want",
    "start": "130800",
    "end": "133200"
  },
  {
    "text": "um and yes that's all nice but the key",
    "start": "133200",
    "end": "135440"
  },
  {
    "text": "thing here is that adding columns is",
    "start": "135440",
    "end": "136640"
  },
  {
    "text": "slow this is the main thing us to move",
    "start": "136640",
    "end": "139239"
  },
  {
    "text": "after I think I think one change took",
    "start": "139239",
    "end": "140879"
  },
  {
    "text": "two hours site being that readon mode",
    "start": "140879",
    "end": "142680"
  },
  {
    "text": "some showed you earlier we're like okay",
    "start": "142680",
    "end": "144480"
  },
  {
    "text": "this is kind of a bit much now what do",
    "start": "144480",
    "end": "146360"
  },
  {
    "text": "we do there are many many other option",
    "start": "146360",
    "end": "149040"
  },
  {
    "start": "147000",
    "end": "155000"
  },
  {
    "text": "reasons this is the whole talk by itself",
    "start": "149040",
    "end": "151239"
  },
  {
    "text": "if you're in Budapest in 3 week's time",
    "start": "151239",
    "end": "152959"
  },
  {
    "text": "I'm giving that talk there but this is",
    "start": "152959",
    "end": "154840"
  },
  {
    "text": "not that talk so the second problem here",
    "start": "154840",
    "end": "157560"
  },
  {
    "start": "155000",
    "end": "233000"
  },
  {
    "text": "is AWS now AWS is kind of a trade-off um",
    "start": "157560",
    "end": "161360"
  },
  {
    "text": "it's more expensive than most servers by",
    "start": "161360",
    "end": "163040"
  },
  {
    "text": "itself but the wonderful idealistic goal",
    "start": "163040",
    "end": "165319"
  },
  {
    "text": "is that you look like this graph you",
    "start": "165319",
    "end": "167200"
  },
  {
    "text": "have a lovely sort of peaky like you",
    "start": "167200",
    "end": "169440"
  },
  {
    "text": "know this is this say on Netflix this is",
    "start": "169440",
    "end": "171680"
  },
  {
    "text": "the evening this is the middle of the",
    "start": "171680",
    "end": "173280"
  },
  {
    "text": "morning no one no one watches TV here",
    "start": "173280",
    "end": "175879"
  },
  {
    "text": "everyone watches TV here right that's",
    "start": "175879",
    "end": "177440"
  },
  {
    "text": "fantastic so what you do is you have",
    "start": "177440",
    "end": "178720"
  },
  {
    "text": "your servers you add more than Mong go",
    "start": "178720",
    "end": "180760"
  },
  {
    "text": "up you scale down it drops down again",
    "start": "180760",
    "end": "182920"
  },
  {
    "text": "and you save money in this Gap here",
    "start": "182920",
    "end": "184599"
  },
  {
    "text": "where you're not running Ser that that's",
    "start": "184599",
    "end": "185760"
  },
  {
    "text": "your money saving now unfortunately",
    "start": "185760",
    "end": "187640"
  },
  {
    "text": "landage demand looks much more like this",
    "start": "187640",
    "end": "189879"
  },
  {
    "text": "so sort of it's there is there is",
    "start": "189879",
    "end": "191599"
  },
  {
    "text": "definitely a curve there but we had",
    "start": "191599",
    "end": "193080"
  },
  {
    "text": "quite a lot of international um sort of",
    "start": "193080",
    "end": "195040"
  },
  {
    "text": "usage of the site was got a flat curve",
    "start": "195040",
    "end": "197159"
  },
  {
    "text": "and most of our demand was on a yearly",
    "start": "197159",
    "end": "198720"
  },
  {
    "text": "basis there's there's a big peak around",
    "start": "198720",
    "end": "200799"
  },
  {
    "text": "sort of spring and Autumn and a big dip",
    "start": "200799",
    "end": "202560"
  },
  {
    "text": "in Winter and so we didn't really have",
    "start": "202560",
    "end": "205840"
  },
  {
    "text": "that reason to like you know the Ops",
    "start": "205840",
    "end": "207840"
  },
  {
    "text": "work involved to scale service at that",
    "start": "207840",
    "end": "209200"
  },
  {
    "text": "point it's so fragile and so difficult",
    "start": "209200",
    "end": "210680"
  },
  {
    "text": "it just wasn't worth the investment for",
    "start": "210680",
    "end": "212159"
  },
  {
    "text": "us so what we're doing is we're paying",
    "start": "212159",
    "end": "214280"
  },
  {
    "text": "hourly rates for what we should be using",
    "start": "214280",
    "end": "217159"
  },
  {
    "text": "like in theory we'll be saving this",
    "start": "217159",
    "end": "218319"
  },
  {
    "text": "money here actually we're just paying a",
    "start": "218319",
    "end": "220319"
  },
  {
    "text": "more expensive value rate on this",
    "start": "220319",
    "end": "222120"
  },
  {
    "text": "continuous scale um another another",
    "start": "222120",
    "end": "224200"
  },
  {
    "text": "small reason that disio is very slow on",
    "start": "224200",
    "end": "226080"
  },
  {
    "text": "virtualized servers this has improved a",
    "start": "226080",
    "end": "228000"
  },
  {
    "text": "bit since but it's still pretty bad it's",
    "start": "228000",
    "end": "229360"
  },
  {
    "text": "one of the slowest things usually it's",
    "start": "229360",
    "end": "230640"
  },
  {
    "text": "usually 10 times or or or Worse slower",
    "start": "230640",
    "end": "233879"
  },
  {
    "start": "233000",
    "end": "304000"
  },
  {
    "text": "and so this kind of feeds into this sort",
    "start": "233879",
    "end": "235079"
  },
  {
    "text": "of this what I called spectrum of",
    "start": "235079",
    "end": "236360"
  },
  {
    "text": "Hosting there are many different kinds",
    "start": "236360",
    "end": "238200"
  },
  {
    "text": "of Hosting they kind of run on this",
    "start": "238200",
    "end": "239439"
  },
  {
    "text": "thing from very immediately costed and",
    "start": "239439",
    "end": "241840"
  },
  {
    "text": "sort of very fixed and generic Solutions",
    "start": "241840",
    "end": "245280"
  },
  {
    "text": "like AWS a cloud provider all the way",
    "start": "245280",
    "end": "247640"
  },
  {
    "text": "down to building your own data center",
    "start": "247640",
    "end": "249439"
  },
  {
    "text": "which is a ridiculous proposal by the",
    "start": "249439",
    "end": "250640"
  },
  {
    "text": "way don't don't ever do that unless",
    "start": "250640",
    "end": "252120"
  },
  {
    "text": "you're Google um and here here you got",
    "start": "252120",
    "end": "254480"
  },
  {
    "text": "like cost in the decad so like well we",
    "start": "254480",
    "end": "256280"
  },
  {
    "text": "need to get we need get a generator The",
    "start": "256280",
    "end": "257639"
  },
  {
    "text": "Waiting this for generators is a year so",
    "start": "257639",
    "end": "259199"
  },
  {
    "text": "need to factor that into the thing we",
    "start": "259199",
    "end": "260280"
  },
  {
    "text": "need to get all the builders in like it",
    "start": "260280",
    "end": "262320"
  },
  {
    "text": "becomes a ridiculous Prospect and so",
    "start": "262320",
    "end": "264560"
  },
  {
    "text": "somewhere on the scale and you probably",
    "start": "264560",
    "end": "266520"
  },
  {
    "text": "move up and down as your company grows",
    "start": "266520",
    "end": "267840"
  },
  {
    "text": "and shrinks uh you'll see it so as you",
    "start": "267840",
    "end": "270120"
  },
  {
    "text": "know my personal website sits here",
    "start": "270120",
    "end": "271759"
  },
  {
    "text": "because it's a good balance between you",
    "start": "271759",
    "end": "273840"
  },
  {
    "text": "know I'm I'm a single person I have not",
    "start": "273840",
    "end": "276080"
  },
  {
    "text": "very I'm not a company to have much",
    "start": "276080",
    "end": "277240"
  },
  {
    "text": "funds but I want some",
    "start": "277240",
    "end": "278880"
  },
  {
    "text": "customization uh lanyard was over here I",
    "start": "278880",
    "end": "281400"
  },
  {
    "text": "me we jumped down two steps to deicated",
    "start": "281400",
    "end": "283479"
  },
  {
    "text": "servers and so what sort of what youve",
    "start": "283479",
    "end": "285880"
  },
  {
    "text": "got with Cloud providers is this",
    "start": "285880",
    "end": "287080"
  },
  {
    "text": "wonderful like you know servers fully",
    "start": "287080",
    "end": "289039"
  },
  {
    "text": "available they spin up M rapidly but",
    "start": "289039",
    "end": "291919"
  },
  {
    "text": "they're kind of expensive and down here",
    "start": "291919",
    "end": "294280"
  },
  {
    "text": "it takes an hour or two to get a server",
    "start": "294280",
    "end": "296440"
  },
  {
    "text": "and but you can pick the memory you can",
    "start": "296440",
    "end": "297919"
  },
  {
    "text": "pick the dis types and a lot cheaper on",
    "start": "297919",
    "end": "300720"
  },
  {
    "text": "sort of the overall monthly",
    "start": "300720",
    "end": "302960"
  },
  {
    "text": "scale and so that's all but then you",
    "start": "302960",
    "end": "305800"
  },
  {
    "text": "know doing it at the same time like one",
    "start": "305800",
    "end": "308400"
  },
  {
    "text": "of these moves is already CRA like",
    "start": "308400",
    "end": "309639"
  },
  {
    "text": "moving from myle to postgres is already",
    "start": "309639",
    "end": "311840"
  },
  {
    "text": "a crazy idea combining with them moving",
    "start": "311840",
    "end": "314520"
  },
  {
    "text": "across an entire continent at the same",
    "start": "314520",
    "end": "317039"
  },
  {
    "text": "time and changing the kind of Hosting",
    "start": "317039",
    "end": "318600"
  },
  {
    "text": "you're running seems a bit ridiculous um",
    "start": "318600",
    "end": "321560"
  },
  {
    "text": "but there are good reasons why we did",
    "start": "321560",
    "end": "322840"
  },
  {
    "text": "this uh three of the me key reasons are",
    "start": "322840",
    "end": "324960"
  },
  {
    "text": "that both of these need time in roning",
    "start": "324960",
    "end": "327400"
  },
  {
    "text": "mode now redon mode isn't downtime it's",
    "start": "327400",
    "end": "329759"
  },
  {
    "text": "a lot better than that but it's still",
    "start": "329759",
    "end": "331240"
  },
  {
    "text": "not full site functionality there's",
    "start": "331240",
    "end": "332600"
  },
  {
    "text": "still issues with it you're not logged",
    "start": "332600",
    "end": "333680"
  },
  {
    "text": "in you can't attend and track new events",
    "start": "333680",
    "end": "335759"
  },
  {
    "text": "you can't create events so it's not a",
    "start": "335759",
    "end": "337680"
  },
  {
    "text": "preform War to be in and at this point",
    "start": "337680",
    "end": "339600"
  },
  {
    "text": "we' had I think about six or seven hours",
    "start": "339600",
    "end": "341199"
  },
  {
    "text": "in reading mode in the past two months",
    "start": "341199",
    "end": "342720"
  },
  {
    "text": "and so we were kind of worried we don't",
    "start": "342720",
    "end": "344800"
  },
  {
    "text": "have too too much more of it both of",
    "start": "344800",
    "end": "347160"
  },
  {
    "text": "them involve copying the whole data set",
    "start": "347160",
    "end": "348720"
  },
  {
    "text": "which is sort of the reason behind read",
    "start": "348720",
    "end": "350680"
  },
  {
    "text": "mode like both of these moving Data",
    "start": "350680",
    "end": "353000"
  },
  {
    "text": "Center and also moving your database",
    "start": "353000",
    "end": "355360"
  },
  {
    "text": "involve freezing your database in time",
    "start": "355360",
    "end": "358160"
  },
  {
    "text": "mutating it somehow being it moving",
    "start": "358160",
    "end": "359759"
  },
  {
    "text": "conents or changing the format of it and",
    "start": "359759",
    "end": "361319"
  },
  {
    "text": "then reloading it and so they kind of",
    "start": "361319",
    "end": "363800"
  },
  {
    "text": "and this last one here they they inter",
    "start": "363800",
    "end": "365120"
  },
  {
    "text": "leave very nicely both of these Concepts",
    "start": "365120",
    "end": "367360"
  },
  {
    "start": "367000",
    "end": "400000"
  },
  {
    "text": "sort of as you'll see in the plan later",
    "start": "367360",
    "end": "369599"
  },
  {
    "text": "on can be done sort of in step with each",
    "start": "369599",
    "end": "371880"
  },
  {
    "text": "other in a way that they use",
    "start": "371880",
    "end": "373599"
  },
  {
    "text": "fractionally more time than an",
    "start": "373599",
    "end": "375039"
  },
  {
    "text": "individual one you get so much more done",
    "start": "375039",
    "end": "378160"
  },
  {
    "text": "so the key trick here I the harder of",
    "start": "378160",
    "end": "381120"
  },
  {
    "text": "the two things is converting myle to",
    "start": "381120",
    "end": "383039"
  },
  {
    "text": "postgrads now this at the start of this",
    "start": "383039",
    "end": "385639"
  },
  {
    "text": "project was kind of like an idealistic",
    "start": "385639",
    "end": "387120"
  },
  {
    "text": "goal like I would love to convert my to",
    "start": "387120",
    "end": "389199"
  },
  {
    "text": "post be amazing but how would you do",
    "start": "389199",
    "end": "391759"
  },
  {
    "text": "that like they're very different",
    "start": "391759",
    "end": "393680"
  },
  {
    "text": "databases they have different column",
    "start": "393680",
    "end": "395000"
  },
  {
    "text": "types different formats different dump",
    "start": "395000",
    "end": "396639"
  },
  {
    "text": "type everything is different about them",
    "start": "396639",
    "end": "398039"
  },
  {
    "text": "they both run SQL that's about the same",
    "start": "398039",
    "end": "399960"
  },
  {
    "text": "and even then the SQL doesn't really",
    "start": "399960",
    "end": "401080"
  },
  {
    "start": "400000",
    "end": "555000"
  },
  {
    "text": "match properly and so your key thing",
    "start": "401080",
    "end": "403599"
  },
  {
    "text": "here is you start with my SQL excellent",
    "start": "403599",
    "end": "405440"
  },
  {
    "text": "place to start if you're getting away",
    "start": "405440",
    "end": "406400"
  },
  {
    "text": "from it um you then dump that in post",
    "start": "406400",
    "end": "409360"
  },
  {
    "text": "gross compatible format now I think at",
    "start": "409360",
    "end": "411520"
  },
  {
    "text": "some point in the past this was post",
    "start": "411520",
    "end": "413440"
  },
  {
    "text": "compatible it hasn't been for at least a",
    "start": "413440",
    "end": "415400"
  },
  {
    "text": "decade so you get you get this file it's",
    "start": "415400",
    "end": "418280"
  },
  {
    "text": "kind of it's it's not my SQL but it's",
    "start": "418280",
    "end": "420680"
  },
  {
    "text": "not post it's kind of a middle ground",
    "start": "420680",
    "end": "422280"
  },
  {
    "text": "like the quoting is wrong the functions",
    "start": "422280",
    "end": "423720"
  },
  {
    "text": "are all named wrongly but it's is a",
    "start": "423720",
    "end": "425639"
  },
  {
    "text": "start and so then what we have then we",
    "start": "425639",
    "end": "427520"
  },
  {
    "text": "have a second step which is um what we",
    "start": "427520",
    "end": "429840"
  },
  {
    "text": "wrote inside lanyard is a scripted file",
    "start": "429840",
    "end": "431919"
  },
  {
    "text": "conversion takes this dump file turns",
    "start": "431919",
    "end": "434000"
  },
  {
    "text": "into a separate dump file and what this",
    "start": "434000",
    "end": "435800"
  },
  {
    "text": "is doing this is fixing quoting this is",
    "start": "435800",
    "end": "437280"
  },
  {
    "text": "fixing um sort of a SQL syntax and small",
    "start": "437280",
    "end": "440039"
  },
  {
    "text": "minor variations of things um but it's",
    "start": "440039",
    "end": "442479"
  },
  {
    "text": "generally a very quick mapping like you",
    "start": "442479",
    "end": "443840"
  },
  {
    "text": "know this I think was a sort of tens of",
    "start": "443840",
    "end": "446639"
  },
  {
    "text": "gigabytes file um and being mapped into",
    "start": "446639",
    "end": "448840"
  },
  {
    "text": "a similar size that conversion took",
    "start": "448840",
    "end": "450479"
  },
  {
    "text": "about 10 minutes um it started off being",
    "start": "450479",
    "end": "452520"
  },
  {
    "text": "around I think it was an 8 hour",
    "start": "452520",
    "end": "454520"
  },
  {
    "text": "conversion and sort of optimize it down",
    "start": "454520",
    "end": "456560"
  },
  {
    "text": "I talk about that bit in a minute but",
    "start": "456560",
    "end": "458360"
  },
  {
    "text": "working out how we could save time on",
    "start": "458360",
    "end": "459800"
  },
  {
    "text": "that conversion and getting it to be a",
    "start": "459800",
    "end": "461280"
  },
  {
    "text": "much more efficient",
    "start": "461280",
    "end": "463080"
  },
  {
    "text": "conversion then you take that SQL file",
    "start": "463080",
    "end": "465639"
  },
  {
    "text": "and because it moving data sensors 2 you",
    "start": "465639",
    "end": "468560"
  },
  {
    "text": "load it over the network into post GD so",
    "start": "468560",
    "end": "470520"
  },
  {
    "text": "this this is basically PG dump over SSH",
    "start": "470520",
    "end": "473759"
  },
  {
    "text": "um which actually is more efficient than",
    "start": "473759",
    "end": "475680"
  },
  {
    "text": "transferring it and loading it at the",
    "start": "475680",
    "end": "476720"
  },
  {
    "text": "same time because this is dis bound this",
    "start": "476720",
    "end": "478400"
  },
  {
    "text": "is Network bound they kind of cancel out",
    "start": "478400",
    "end": "480680"
  },
  {
    "text": "and so this is streaming from AWS into",
    "start": "480680",
    "end": "483280"
  },
  {
    "text": "software at this point loading it in but",
    "start": "483280",
    "end": "486039"
  },
  {
    "text": "the key thing here is that this schema",
    "start": "486039",
    "end": "487680"
  },
  {
    "text": "here is not our final schema now one of",
    "start": "487680",
    "end": "490159"
  },
  {
    "text": "the differences between M and post Jango",
    "start": "490159",
    "end": "492240"
  },
  {
    "text": "in particular is the types of columns we",
    "start": "492240",
    "end": "494599"
  },
  {
    "text": "just store things so for example in my",
    "start": "494599",
    "end": "496240"
  },
  {
    "text": "seel a Boolean is St as a tiny in one in",
    "start": "496240",
    "end": "498720"
  },
  {
    "text": "post crit St as a Boolean type that's a",
    "start": "498720",
    "end": "500879"
  },
  {
    "text": "type cast that those are expensive and",
    "start": "500879",
    "end": "503319"
  },
  {
    "text": "initially this this scripted file",
    "start": "503319",
    "end": "505080"
  },
  {
    "text": "conversion here was doing those in",
    "start": "505080",
    "end": "506639"
  },
  {
    "text": "memory it would see okay I know this",
    "start": "506639",
    "end": "508680"
  },
  {
    "text": "table is",
    "start": "508680",
    "end": "509960"
  },
  {
    "text": "going to convert bullion whatever so I'm",
    "start": "509960",
    "end": "512640"
  },
  {
    "text": "going to examine every line of the SQL",
    "start": "512640",
    "end": "514399"
  },
  {
    "text": "file take that line in PA the fields out",
    "start": "514399",
    "end": "517240"
  },
  {
    "text": "change the value to be true false and",
    "start": "517240",
    "end": "518599"
  },
  {
    "text": "write it out again that's why it took",
    "start": "518599",
    "end": "519959"
  },
  {
    "text": "eight hours to convert um sort of a",
    "start": "519959",
    "end": "522279"
  },
  {
    "text": "moment of Happiness hit me when I realiz",
    "start": "522279",
    "end": "524320"
  },
  {
    "text": "that post has Type conversion built in",
    "start": "524320",
    "end": "526360"
  },
  {
    "text": "and it's a lot faster than my code",
    "start": "526360",
    "end": "527720"
  },
  {
    "text": "because written by people know what",
    "start": "527720",
    "end": "528560"
  },
  {
    "text": "they're doing and so what happens here",
    "start": "528560",
    "end": "531040"
  },
  {
    "text": "is there's a second step here where we",
    "start": "531040",
    "end": "533279"
  },
  {
    "text": "take our this schema which looks",
    "start": "533279",
    "end": "534839"
  },
  {
    "text": "basically is a direct mapping of the",
    "start": "534839",
    "end": "536000"
  },
  {
    "text": "MySQL schema and then add in our better",
    "start": "536000",
    "end": "538079"
  },
  {
    "text": "types with type casts and so this is",
    "start": "538079",
    "end": "540920"
  },
  {
    "text": "about 15 minutes-ish um this is about",
    "start": "540920",
    "end": "544839"
  },
  {
    "text": "I'd say 30 minutes-ish and this is tens",
    "start": "544839",
    "end": "548480"
  },
  {
    "text": "about 10 minutes like this this is",
    "start": "548480",
    "end": "550000"
  },
  {
    "text": "really really quickly um post is very",
    "start": "550000",
    "end": "552040"
  },
  {
    "text": "good at doing type cast it turns out and",
    "start": "552040",
    "end": "553959"
  },
  {
    "text": "a lot a lot of things are similar",
    "start": "553959",
    "end": "555040"
  },
  {
    "text": "internally I think and the nice thing is",
    "start": "555040",
    "end": "558079"
  },
  {
    "text": "I did all this work so you don't have to",
    "start": "558079",
    "end": "559320"
  },
  {
    "text": "if you ever want to do this um the",
    "start": "559320",
    "end": "561040"
  },
  {
    "text": "converter is available at GitHub in this",
    "start": "561040",
    "end": "563040"
  },
  {
    "text": "URL it is deliberately unmaintained",
    "start": "563040",
    "end": "565880"
  },
  {
    "text": "because I cannot maintain a crazy idea",
    "start": "565880",
    "end": "568040"
  },
  {
    "text": "like this for very long there are are",
    "start": "568040",
    "end": "569560"
  },
  {
    "text": "some patches been pulled in but it's it",
    "start": "569560",
    "end": "571760"
  },
  {
    "text": "is at its basis a mad idea and so those",
    "start": "571760",
    "end": "574800"
  },
  {
    "text": "don't really take very well to to being",
    "start": "574800",
    "end": "576680"
  },
  {
    "text": "maintained but it's there it works I",
    "start": "576680",
    "end": "579040"
  },
  {
    "text": "know several friends have used it since",
    "start": "579040",
    "end": "580360"
  },
  {
    "text": "and it's worked perfectly fine for them",
    "start": "580360",
    "end": "582120"
  },
  {
    "text": "so it's something to consider um but",
    "start": "582120",
    "end": "584920"
  },
  {
    "start": "584000",
    "end": "726000"
  },
  {
    "text": "overall like you know that's part of the",
    "start": "584920",
    "end": "586079"
  },
  {
    "text": "move what how did the move go as a",
    "start": "586079",
    "end": "587839"
  },
  {
    "text": "practice like there's a timeline here",
    "start": "587839",
    "end": "589600"
  },
  {
    "text": "there's a lot of organization Natalie in",
    "start": "589600",
    "end": "591760"
  },
  {
    "text": "particular is very good at sort of",
    "start": "591760",
    "end": "592920"
  },
  {
    "text": "setting timelines and organizing things",
    "start": "592920",
    "end": "594640"
  },
  {
    "text": "and getting us all working properly",
    "start": "594640",
    "end": "595800"
  },
  {
    "text": "which is fantastic um but the key thing",
    "start": "595800",
    "end": "597839"
  },
  {
    "text": "is the day before there's some things to",
    "start": "597839",
    "end": "599040"
  },
  {
    "text": "do like don't forget don't just go oh",
    "start": "599040",
    "end": "601320"
  },
  {
    "text": "today is fine it's all tomorrow all the",
    "start": "601320",
    "end": "603240"
  },
  {
    "text": "work's tomorrow you need to make sure",
    "start": "603240",
    "end": "606000"
  },
  {
    "text": "your servers are ready key thing",
    "start": "606000",
    "end": "607720"
  },
  {
    "text": "otherwise you'll wake up like ah Panic",
    "start": "607720",
    "end": "609839"
  },
  {
    "text": "um and also s make sure DNS TTL is nice",
    "start": "609839",
    "end": "611959"
  },
  {
    "text": "and low now not everything honors DNS",
    "start": "611959",
    "end": "614440"
  },
  {
    "text": "TTL which is the sort of um expiry time",
    "start": "614440",
    "end": "616640"
  },
  {
    "text": "for DNS record but a lot of things do",
    "start": "616640",
    "end": "619200"
  },
  {
    "text": "and uh 5 minutes 300 seconds is s of the",
    "start": "619200",
    "end": "621839"
  },
  {
    "text": "lowest you can generally set it so",
    "start": "621839",
    "end": "623160"
  },
  {
    "text": "that's a good place to to start that's",
    "start": "623160",
    "end": "625680"
  },
  {
    "text": "all good go to sleep have a nice sleep",
    "start": "625680",
    "end": "627600"
  },
  {
    "text": "have some midnight snacks whatever um",
    "start": "627600",
    "end": "629440"
  },
  {
    "text": "wake up go so the key thing is lanyard",
    "start": "629440",
    "end": "631600"
  },
  {
    "text": "is in what was in the UK and so we have",
    "start": "631600",
    "end": "634000"
  },
  {
    "text": "the advantage that the morning in the UK",
    "start": "634000",
    "end": "635920"
  },
  {
    "text": "is when all of you guys in America",
    "start": "635920",
    "end": "637560"
  },
  {
    "text": "asleep it's great and so 9:00 a.m. in",
    "start": "637560",
    "end": "640040"
  },
  {
    "text": "the morning is the best time to move",
    "start": "640040",
    "end": "641440"
  },
  {
    "text": "stuff because everyone here is asleep",
    "start": "641440",
    "end": "642959"
  },
  {
    "text": "our load is basically at its lowest",
    "start": "642959",
    "end": "644519"
  },
  {
    "text": "point and so at that point put sign into",
    "start": "644519",
    "end": "646680"
  },
  {
    "text": "read only mode you know flip that",
    "start": "646680",
    "end": "648279"
  },
  {
    "text": "feature flag check it there all good and",
    "start": "648279",
    "end": "650600"
  },
  {
    "text": "then once that's started we start that",
    "start": "650600",
    "end": "651920"
  },
  {
    "text": "databased D conversion that's part of",
    "start": "651920",
    "end": "653880"
  },
  {
    "text": "that flow chart you do earlier of the",
    "start": "653880",
    "end": "655560"
  },
  {
    "text": "first leg of it there that's all good",
    "start": "655560",
    "end": "658279"
  },
  {
    "text": "then when the convergence finished",
    "start": "658279",
    "end": "659760"
  },
  {
    "text": "we start loading that converted data",
    "start": "659760",
    "end": "661600"
  },
  {
    "text": "across the network into into the new",
    "start": "661600",
    "end": "663160"
  },
  {
    "text": "database and no we're not sitting around",
    "start": "663160",
    "end": "665040"
  },
  {
    "text": "this time we're also making sure the new",
    "start": "665040",
    "end": "666680"
  },
  {
    "text": "servers the right crons all the files",
    "start": "666680",
    "end": "668880"
  },
  {
    "text": "will be moved over properly that sort of",
    "start": "668880",
    "end": "670560"
  },
  {
    "text": "background stuff but that's quite easy",
    "start": "670560",
    "end": "672200"
  },
  {
    "text": "compared to this big task here um once",
    "start": "672200",
    "end": "675200"
  },
  {
    "text": "that load is finished we then make sure",
    "start": "675200",
    "end": "676920"
  },
  {
    "text": "the st's working correctly so this is",
    "start": "676920",
    "end": "678279"
  },
  {
    "text": "the whole team browsing around check and",
    "start": "678279",
    "end": "680880"
  },
  {
    "text": "we're sort of pinned that new DNS Place",
    "start": "680880",
    "end": "683320"
  },
  {
    "text": "making sure it's working correctly and",
    "start": "683320",
    "end": "684920"
  },
  {
    "text": "once once they sure it's working fine",
    "start": "684920",
    "end": "686839"
  },
  {
    "text": "and this is the point of no return you",
    "start": "686839",
    "end": "688560"
  },
  {
    "text": "switch to DNS and you point the low",
    "start": "688560",
    "end": "691040"
  },
  {
    "text": "balances on the old cluster to the new",
    "start": "691040",
    "end": "692800"
  },
  {
    "text": "cluster thus even if your DNS isn't",
    "start": "692800",
    "end": "695040"
  },
  {
    "text": "updated that still works it's a bit",
    "start": "695040",
    "end": "696519"
  },
  {
    "text": "slower but you're still getting all the",
    "start": "696519",
    "end": "698399"
  },
  {
    "text": "people with bad DNS providers the new",
    "start": "698399",
    "end": "700440"
  },
  {
    "text": "version site just proxied via Amazon and",
    "start": "700440",
    "end": "702920"
  },
  {
    "text": "then the point of no return is to exit",
    "start": "702920",
    "end": "704519"
  },
  {
    "text": "readon mode once you come out of readon",
    "start": "704519",
    "end": "706560"
  },
  {
    "text": "mode your databases of your old and new",
    "start": "706560",
    "end": "708440"
  },
  {
    "text": "site have diverged and you cannot ever",
    "start": "708440",
    "end": "710839"
  },
  {
    "text": "merge them again you can roll back in a",
    "start": "710839",
    "end": "713519"
  },
  {
    "text": "d situation which I we never did I I",
    "start": "713519",
    "end": "715800"
  },
  {
    "text": "remember you can roll back but you",
    "start": "715800",
    "end": "717399"
  },
  {
    "text": "cannot merge and so you'll be very very",
    "start": "717399",
    "end": "719399"
  },
  {
    "text": "sure we we get that last point that okay",
    "start": "719399",
    "end": "720800"
  },
  {
    "text": "we've moved it's all fine this is the",
    "start": "720800",
    "end": "722920"
  },
  {
    "text": "future and then turn it on and yeah so",
    "start": "722920",
    "end": "726279"
  },
  {
    "start": "726000",
    "end": "794000"
  },
  {
    "text": "you know this is a tricky process it's",
    "start": "726279",
    "end": "728959"
  },
  {
    "text": "kind of sort of tight tightens the",
    "start": "728959",
    "end": "731839"
  },
  {
    "text": "muscles one might say um and so with",
    "start": "731839",
    "end": "734839"
  },
  {
    "text": "with that in mind there's a lot of dry",
    "start": "734839",
    "end": "736360"
  },
  {
    "text": "runs here I ran the database conversion",
    "start": "736360",
    "end": "738760"
  },
  {
    "text": "I think eight times and I think five of",
    "start": "738760",
    "end": "740959"
  },
  {
    "text": "those at least had errors and",
    "start": "740959",
    "end": "742440"
  },
  {
    "text": "particularly the quoting of strings um I",
    "start": "742440",
    "end": "744839"
  },
  {
    "text": "think post uses single quotes and m",
    "start": "744839",
    "end": "747399"
  },
  {
    "text": "double quotes you flip them over any",
    "start": "747399",
    "end": "749440"
  },
  {
    "text": "double quotes single quotes inside the",
    "start": "749440",
    "end": "750600"
  },
  {
    "text": "strings flipped them over and then it",
    "start": "750600",
    "end": "752480"
  },
  {
    "text": "gets very complicated and then Unicode",
    "start": "752480",
    "end": "754440"
  },
  {
    "text": "came into the F course of the factor and",
    "start": "754440",
    "end": "755920"
  },
  {
    "text": "all that has had to be dealt with but I",
    "start": "755920",
    "end": "757720"
  },
  {
    "text": "think after the first five times had a",
    "start": "757720",
    "end": "759240"
  },
  {
    "text": "good clean run I did three more for good",
    "start": "759240",
    "end": "761480"
  },
  {
    "text": "luck and then we did two whole dry runs",
    "start": "761480",
    "end": "763959"
  },
  {
    "text": "of the whole move sort of making new",
    "start": "763959",
    "end": "765880"
  },
  {
    "text": "servers copy the M testing the site",
    "start": "765880",
    "end": "767720"
  },
  {
    "text": "everything but that last segment you saw",
    "start": "767720",
    "end": "769399"
  },
  {
    "text": "there um and it's this kind of thing",
    "start": "769399",
    "end": "771240"
  },
  {
    "text": "that gives you confidence that you sit",
    "start": "771240",
    "end": "772560"
  },
  {
    "text": "down that last day you're going to",
    "start": "772560",
    "end": "773519"
  },
  {
    "text": "launch and go you know me and Tom one of",
    "start": "773519",
    "end": "776320"
  },
  {
    "text": "our other sort of engineer Ops people",
    "start": "776320",
    "end": "778360"
  },
  {
    "text": "we've sat down we've sure of this we're",
    "start": "778360",
    "end": "780160"
  },
  {
    "text": "confident about this we can do this and",
    "start": "780160",
    "end": "781839"
  },
  {
    "text": "like it's very important to have",
    "start": "781839",
    "end": "782680"
  },
  {
    "text": "confidence especially when you know the",
    "start": "782680",
    "end": "785320"
  },
  {
    "text": "entire s livelihood is on the line here",
    "start": "785320",
    "end": "787040"
  },
  {
    "text": "like if you roll back or release wrongly",
    "start": "787040",
    "end": "788880"
  },
  {
    "text": "that's not only a PR disaster but you",
    "start": "788880",
    "end": "790680"
  },
  {
    "text": "could lose data in that process it's",
    "start": "790680",
    "end": "792240"
  },
  {
    "text": "very important to get it right but what",
    "start": "792240",
    "end": "794399"
  },
  {
    "start": "794000",
    "end": "831000"
  },
  {
    "text": "did we learn first of all it all went",
    "start": "794399",
    "end": "796320"
  },
  {
    "text": "well hooray um this is a very rare",
    "start": "796320",
    "end": "798720"
  },
  {
    "text": "ending to an OB I want to point this out",
    "start": "798720",
    "end": "800320"
  },
  {
    "text": "this is very important uh not everything",
    "start": "800320",
    "end": "802800"
  },
  {
    "text": "went perfectly it was a bit slow than",
    "start": "802800",
    "end": "804240"
  },
  {
    "text": "I'd like and there was a few hiccups we",
    "start": "804240",
    "end": "805800"
  },
  {
    "text": "forgot a few things we caught them all",
    "start": "805800",
    "end": "807040"
  },
  {
    "text": "before that last launch it's a big text",
    "start": "807040",
    "end": "809440"
  },
  {
    "text": "document I tried to find but couldn't",
    "start": "809440",
    "end": "810720"
  },
  {
    "text": "unfortunately to show here um of sort of",
    "start": "810720",
    "end": "812600"
  },
  {
    "text": "all the checklist points we went through",
    "start": "812600",
    "end": "813680"
  },
  {
    "text": "and all the different things we did uh",
    "start": "813680",
    "end": "816279"
  },
  {
    "text": "key thing is server low dropped now our",
    "start": "816279",
    "end": "818120"
  },
  {
    "text": "new soft layer servers were more",
    "start": "818120",
    "end": "819959"
  },
  {
    "text": "powerful had that nice quick dis access",
    "start": "819959",
    "end": "822519"
  },
  {
    "text": "as well and so our Ser dropped our",
    "start": "822519",
    "end": "824680"
  },
  {
    "text": "graphic went like this not as much we",
    "start": "824680",
    "end": "826600"
  },
  {
    "text": "would have liked um considering the",
    "start": "826600",
    "end": "828399"
  },
  {
    "text": "servers were a bit more powerful but it",
    "start": "828399",
    "end": "830320"
  },
  {
    "text": "was a drop at least and you the rest of",
    "start": "830320",
    "end": "832240"
  },
  {
    "start": "831000",
    "end": "968000"
  },
  {
    "text": "that load was some other part of our",
    "start": "832240",
    "end": "833519"
  },
  {
    "text": "process and we can look at that later",
    "start": "833519",
    "end": "835360"
  },
  {
    "text": "today um the server costs were hared",
    "start": "835360",
    "end": "837920"
  },
  {
    "text": "which we knew we knew this going in like",
    "start": "837920",
    "end": "839120"
  },
  {
    "text": "one of the main reasons for this move",
    "start": "839120",
    "end": "840639"
  },
  {
    "text": "away like I I sat down worked out AWS",
    "start": "840639",
    "end": "844360"
  },
  {
    "text": "cost this much softw cost this much this",
    "start": "844360",
    "end": "846680"
  },
  {
    "text": "is like half the cost that was a very",
    "start": "846680",
    "end": "848759"
  },
  {
    "text": "big part of getting um Simon to come",
    "start": "848759",
    "end": "850320"
  },
  {
    "text": "aboard with is like like this is we can",
    "start": "850320",
    "end": "851880"
  },
  {
    "text": "do this now we can save this much money",
    "start": "851880",
    "end": "853560"
  },
  {
    "text": "per month and that was a very important",
    "start": "853560",
    "end": "855279"
  },
  {
    "text": "thing and you know in a startup that",
    "start": "855279",
    "end": "858320"
  },
  {
    "text": "money you know that money counts you can",
    "start": "858320",
    "end": "860279"
  },
  {
    "text": "do more work with it you can have more",
    "start": "860279",
    "end": "861880"
  },
  {
    "text": "servers you know we had a lot more",
    "start": "861880",
    "end": "863680"
  },
  {
    "text": "Headroom on our um serving structure for",
    "start": "863680",
    "end": "866079"
  },
  {
    "text": "things like big events or South by which",
    "start": "866079",
    "end": "867920"
  },
  {
    "text": "always overwhelms landed a",
    "start": "867920",
    "end": "869920"
  },
  {
    "text": "year uh another fun thing is the ssds",
    "start": "869920",
    "end": "872920"
  },
  {
    "text": "which we moved all our databases onto",
    "start": "872920",
    "end": "874440"
  },
  {
    "text": "are not a panisa um they don't solve",
    "start": "874440",
    "end": "876639"
  },
  {
    "text": "your problems they are very helpful they",
    "start": "876639",
    "end": "878800"
  },
  {
    "text": "certainly improved our response time but",
    "start": "878800",
    "end": "880120"
  },
  {
    "text": "not amazingly um the kind of dis access",
    "start": "880120",
    "end": "882959"
  },
  {
    "text": "database does often won't be compatible",
    "start": "882959",
    "end": "884839"
  },
  {
    "text": "with these and also um postgres is by",
    "start": "884839",
    "end": "887759"
  },
  {
    "text": "default because it's actually",
    "start": "887759",
    "end": "889079"
  },
  {
    "text": "intelligent tuned for a hard drive with",
    "start": "889079",
    "end": "891000"
  },
  {
    "text": "slow seek time but you can dive into the",
    "start": "891000",
    "end": "892959"
  },
  {
    "text": "post configuration file and say hello",
    "start": "892959",
    "end": "894800"
  },
  {
    "text": "postgrads your drive has zero seek time",
    "start": "894800",
    "end": "897199"
  },
  {
    "text": "go and it'll optimize its query plan for",
    "start": "897199",
    "end": "899360"
  },
  {
    "text": "that new hard drive instead and so it's",
    "start": "899360",
    "end": "901160"
  },
  {
    "text": "much better at planning out and saying",
    "start": "901160",
    "end": "902800"
  },
  {
    "text": "okay actually hitting this index isn't",
    "start": "902800",
    "end": "904440"
  },
  {
    "text": "as costly as hitting this in memory and",
    "start": "904440",
    "end": "906240"
  },
  {
    "text": "rearrange itself and when we did that we",
    "start": "906240",
    "end": "907959"
  },
  {
    "text": "saw a nice big another extra drop in our",
    "start": "907959",
    "end": "909880"
  },
  {
    "text": "postc cross Tim so that was quite",
    "start": "909880",
    "end": "911720"
  },
  {
    "text": "nice and also and kind of the F most",
    "start": "911720",
    "end": "914720"
  },
  {
    "text": "important Point here move before it's",
    "start": "914720",
    "end": "916360"
  },
  {
    "text": "too late if you want to make this move",
    "start": "916360",
    "end": "918360"
  },
  {
    "text": "you can't do it at right scale at least",
    "start": "918360",
    "end": "920519"
  },
  {
    "text": "not not in any kind of reasonable sense",
    "start": "920519",
    "end": "922800"
  },
  {
    "text": "um lanyard was around the 780 gab",
    "start": "922800",
    "end": "924880"
  },
  {
    "text": "gigabyte range at this point we moved",
    "start": "924880",
    "end": "926680"
  },
  {
    "text": "that in about an hour that seems fine",
    "start": "926680",
    "end": "928600"
  },
  {
    "text": "for a of our size but any bigger and it",
    "start": "928600",
    "end": "930480"
  },
  {
    "text": "starts becoming a problem so if you're",
    "start": "930480",
    "end": "932079"
  },
  {
    "text": "considering this or considering some",
    "start": "932079",
    "end": "933800"
  },
  {
    "text": "other mood like different datab",
    "start": "933800",
    "end": "934920"
  },
  {
    "text": "technology the ear you do it sort of the",
    "start": "934920",
    "end": "937839"
  },
  {
    "text": "easier and cheaper it will be but of",
    "start": "937839",
    "end": "939199"
  },
  {
    "text": "course you have to develop new features",
    "start": "939199",
    "end": "941079"
  },
  {
    "text": "and as a startup with Landing",
    "start": "941079",
    "end": "942440"
  },
  {
    "text": "specifically there's always that race",
    "start": "942440",
    "end": "943959"
  },
  {
    "text": "between we need to make the site better",
    "start": "943959",
    "end": "946000"
  },
  {
    "text": "we need to add new features we need to",
    "start": "946000",
    "end": "947199"
  },
  {
    "text": "keep going and scaling and so that",
    "start": "947199",
    "end": "948360"
  },
  {
    "text": "that's always a tricky one to balance",
    "start": "948360",
    "end": "949440"
  },
  {
    "text": "out but this kind of task especially is",
    "start": "949440",
    "end": "952279"
  },
  {
    "text": "so much easier if you do it earlier on",
    "start": "952279",
    "end": "954160"
  },
  {
    "text": "when your dat is",
    "start": "954160",
    "end": "955720"
  },
  {
    "text": "smaller thank you",
    "start": "955720",
    "end": "959920"
  },
  {
    "text": "Happ yes",
    "start": "963560",
    "end": "967560"
  }
]